(function(){
shadow$provide[519]=function(xa,R,Ja,V){function b(){if("function"!==typeof WeakMap)return null;var q=new WeakMap;b=function(){return q};return q}function y(q){"@babel/helpers - typeof";y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};return y(q)}function D(q,t){for(var u=0;u<t.length;u++){var w=t[u];w.enumerable=w.enumerable||!1;w.configurable=
!0;"value"in w&&(w.writable=!0);Object.defineProperty(q,w.key,w)}}function n(q,t,u){t&&D(q.prototype,t);u&&D(q,u);return q}function m(q,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");q.prototype=Object.create(t&&t.prototype,{constructor:{value:q,writable:!0,configurable:!0}});t&&p(q,t)}function p(q,t){p=Object.setPrototypeOf||function(u,w){u.__proto__=w;return u};return p(q,t)}function h(q){var t=d();return function(){var u=e(q);if(t){var w=
e(this).constructor;u=Reflect.construct(u,arguments,w)}else u=u.apply(this,arguments);u=!u||"object"!==y(u)&&"function"!==typeof u?a(this):u;return u}}function a(q){if(void 0===q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q}function d(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(q){return!1}}
function e(q){e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)};return e(q)}Object.defineProperty(V,"__esModule",{value:!0});V["default"]=function(q){var t=function(u){function w(E){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");E=x.call(this,E);E.p=Promise.resolve();E.resizeHandler=null;E.handlers={};E.syncWindowResize=E.syncWindowResize.bind(a(E));E.syncEventHandlers=E.syncEventHandlers.bind(a(E));E.attachUpdateEvents=
E.attachUpdateEvents.bind(a(E));E.getRef=E.getRef.bind(a(E));E.handleUpdate=E.handleUpdate.bind(a(E));E.figureCallback=E.figureCallback.bind(a(E));E.updatePlotly=E.updatePlotly.bind(a(E));return E}m(w,u);var x=h(w);n(w,[{key:"updatePlotly",value:function(E,F,z){var B=this;this.p=this.p.then(function(){if(!B.unmounting){if(!B.el)throw Error("Missing element reference");return q.react(B.el,{data:B.props.data,layout:B.props.layout,config:B.props.config,frames:B.props.frames})}}).then(function(){B.unmounting||
(B.syncWindowResize(E),B.syncEventHandlers(),B.figureCallback(F),z&&B.attachUpdateEvents())})["catch"](function(C){if(B.props.onError)B.props.onError(C)})}},{key:"componentDidMount",value:function(){this.unmounting=!1;this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(E){this.unmounting=!1;var F=E.frames&&E.frames.length?E.frames.length:0,z=this.props.frames&&this.props.frames.length?this.props.frames.length:0,B=void 0!==E.revision,C=E.revision!==this.props.revision;
(E.layout!==this.props.layout||E.data!==this.props.data||E.config!==this.props.config||z!==F||B&&(!B||C))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0;this.figureCallback(this.props.onPurge);this.resizeHandler&&g&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null);this.removeUpdateEvents();q.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var E=this;this.el&&this.el.removeListener&&f.forEach(function(F){E.el.on(F,
E.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var E=this;this.el&&this.el.removeListener&&f.forEach(function(F){E.el.removeListener(F,E.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(E){if("function"===typeof E){var F=this.el;E({data:F.data,layout:F.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(E){var F=this;g&&(this.props.useResizeHandler&&
!this.resizeHandler?(this.resizeHandler=function(){return q.Plots.resize(F.el)},window.addEventListener("resize",this.resizeHandler),E&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(E){this.el=E;this.props.debug&&g&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var E=this;c.forEach(function(F){var z=E.props["on"+F],B=E.handlers[F],C=!!B;z&&!C?
E.addEventHandler(F,z):!z&&C?E.removeEventHandler(F):z&&C&&z!==B&&(E.removeEventHandler(F),E.addEventHandler(F,z))})}},{key:"addEventHandler",value:function(E,F){this.handlers[E]=F;this.el.on(this.getPlotlyEventName(E),this.handlers[E])}},{key:"removeEventHandler",value:function(E){this.el.removeListener(this.getPlotlyEventName(E),this.handlers[E]);delete this.handlers[E]}},{key:"getPlotlyEventName",value:function(E){return"plotly_"+E.toLowerCase()}},{key:"render",value:function(){return l["default"].createElement("div",
{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]);return w}(l.Component);t.propTypes={data:k["default"].arrayOf(k["default"].object),config:k["default"].object,layout:k["default"].object,frames:k["default"].arrayOf(k["default"].object),revision:k["default"].number,onInitialized:k["default"].func,onPurge:k["default"].func,onError:k["default"].func,onUpdate:k["default"].func,debug:k["default"].bool,style:k["default"].object,className:k["default"].string,
useResizeHandler:k["default"].bool,divId:k["default"].string};c.forEach(function(u){t.propTypes["on"+u]=k["default"].func});t.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}};return t};var l=function(q){if(q&&q.__esModule)return q;if(null===q||"object"!==y(q)&&"function"!==typeof q)return{"default":q};var t=b();if(t&&t.has(q))return t.get(q);var u={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor,x;for(x in q)if(Object.prototype.hasOwnProperty.call(q,
x)){var E=w?Object.getOwnPropertyDescriptor(q,x):null;E&&(E.get||E.set)?Object.defineProperty(u,x,E):u[x]=q[x]}u["default"]=q;t&&t.set(q,u);return u}(R(5)),k=function(q){return q&&q.__esModule?q:{"default":q}}(R(11)),c="AfterExport AfterPlot Animated AnimatingFrame AnimationInterrupted AutoSize BeforeExport ButtonClicked Click ClickAnnotation Deselect DoubleClick Framework Hover LegendClick LegendDoubleClick Relayout Relayouting Restyle Redraw Selected Selecting SliderChange SliderEnd SliderStart SunburstClick Transitioning TransitionInterrupted Unhover".split(" "),
f="plotly_restyle plotly_redraw plotly_relayout plotly_relayouting plotly_doubleclick plotly_animated plotly_sunburstclick".split(" "),g="undefined"!==typeof window};
shadow$provide[520]=function(xa,R,Ja,V){(function(b){"object"===typeof V&&"undefined"!==typeof Ja?Ja.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof xa?xa:"undefined"!==typeof self?self:this).Plotly=b()})(function(){return function(){function b(y,D,n){function m(a,d){if(!D[a]){if(!y[a]){var e="function"==typeof R&&R;if(!d&&e)return e(a,!0);if(p)return p(a,!0);d=Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",
d;}d=D[a]={exports:{}};y[a][0].call(d.exports,function(l){return m(y[a][1][l]||l)},d,d.exports,b,y,D,n)}return D[a].exports}for(var p="function"==typeof R&&R,h=0;h<n.length;h++)m(n[h]);return m}return b}()({1:[function(b,y,D){b=b("../src/lib");y={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;",
"X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;",
"X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;",
"X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover\x3e:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;",
"X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;",
"X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;",
"X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;",
"X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans', verdana, arial, sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;",
"Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var n in y)D=n.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),b.addStyleRule(D,y[n])},{"../src/lib":749}],2:[function(b,y,D){y.exports=b("../src/transforms/aggregate")},{"../src/transforms/aggregate":1332}],3:[function(b,y,D){y.exports=
b("../src/traces/bar")},{"../src/traces/bar":898}],4:[function(b,y,D){y.exports=b("../src/traces/barpolar")},{"../src/traces/barpolar":911}],5:[function(b,y,D){y.exports=b("../src/traces/box")},{"../src/traces/box":921}],6:[function(b,y,D){y.exports=b("../src/components/calendars")},{"../src/components/calendars":613}],7:[function(b,y,D){y.exports=b("../src/traces/candlestick")},{"../src/traces/candlestick":930}],8:[function(b,y,D){y.exports=b("../src/traces/carpet")},{"../src/traces/carpet":949}],
9:[function(b,y,D){y.exports=b("../src/traces/choropleth")},{"../src/traces/choropleth":963}],10:[function(b,y,D){y.exports=b("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":970}],11:[function(b,y,D){y.exports=b("../src/traces/cone")},{"../src/traces/cone":976}],12:[function(b,y,D){y.exports=b("../src/traces/contour")},{"../src/traces/contour":991}],13:[function(b,y,D){y.exports=b("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":1002}],14:[function(b,y,D){y.exports=
b("../src/core")},{"../src/core":726}],15:[function(b,y,D){y.exports=b("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":1010}],16:[function(b,y,D){y.exports=b("../src/transforms/filter")},{"../src/transforms/filter":1333}],17:[function(b,y,D){y.exports=b("../src/traces/funnel")},{"../src/traces/funnel":1020}],18:[function(b,y,D){y.exports=b("../src/traces/funnelarea")},{"../src/traces/funnelarea":1029}],19:[function(b,y,D){y.exports=b("../src/transforms/groupby")},{"../src/transforms/groupby":1334}],
20:[function(b,y,D){y.exports=b("../src/traces/heatmap")},{"../src/traces/heatmap":1042}],21:[function(b,y,D){y.exports=b("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":1052}],22:[function(b,y,D){y.exports=b("../src/traces/histogram")},{"../src/traces/histogram":1064}],23:[function(b,y,D){y.exports=b("../src/traces/histogram2d")},{"../src/traces/histogram2d":1070}],24:[function(b,y,D){y.exports=b("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1074}],25:[function(b,
y,D){y.exports=b("../src/traces/image")},{"../src/traces/image":1081}],26:[function(b,y,D){D=b("./core");D.register([b("./bar"),b("./box"),b("./heatmap"),b("./histogram"),b("./histogram2d"),b("./histogram2dcontour"),b("./contour"),b("./scatterternary"),b("./violin"),b("./funnel"),b("./waterfall"),b("./image"),b("./pie"),b("./sunburst"),b("./treemap"),b("./funnelarea"),b("./scatter3d"),b("./surface"),b("./isosurface"),b("./volume"),b("./mesh3d"),b("./cone"),b("./streamtube"),b("./scattergeo"),b("./choropleth"),
b("./scattergl"),b("./splom"),b("./pointcloud"),b("./heatmapgl"),b("./parcoords"),b("./parcats"),b("./scattermapbox"),b("./choroplethmapbox"),b("./densitymapbox"),b("./sankey"),b("./indicator"),b("./table"),b("./carpet"),b("./scattercarpet"),b("./contourcarpet"),b("./ohlc"),b("./candlestick"),b("./scatterpolar"),b("./scatterpolargl"),b("./barpolar")]);D.register([b("./aggregate"),b("./filter"),b("./groupby"),b("./sort")]);D.register([b("./calendars")]);y.exports=D},{"./aggregate":2,"./bar":3,"./barpolar":4,
"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./image":25,"./indicator":27,"./isosurface":28,"./mesh3d":29,"./ohlc":30,"./parcats":31,"./parcoords":32,"./pie":33,"./pointcloud":34,"./sankey":35,"./scatter3d":36,"./scattercarpet":37,
"./scattergeo":38,"./scattergl":39,"./scattermapbox":40,"./scatterpolar":41,"./scatterpolargl":42,"./scatterternary":43,"./sort":44,"./splom":45,"./streamtube":46,"./sunburst":47,"./surface":48,"./table":49,"./treemap":50,"./violin":51,"./volume":52,"./waterfall":53}],27:[function(b,y,D){y.exports=b("../src/traces/indicator")},{"../src/traces/indicator":1089}],28:[function(b,y,D){y.exports=b("../src/traces/isosurface")},{"../src/traces/isosurface":1095}],29:[function(b,y,D){y.exports=b("../src/traces/mesh3d")},
{"../src/traces/mesh3d":1100}],30:[function(b,y,D){y.exports=b("../src/traces/ohlc")},{"../src/traces/ohlc":1105}],31:[function(b,y,D){y.exports=b("../src/traces/parcats")},{"../src/traces/parcats":1114}],32:[function(b,y,D){y.exports=b("../src/traces/parcoords")},{"../src/traces/parcoords":1124}],33:[function(b,y,D){y.exports=b("../src/traces/pie")},{"../src/traces/pie":1135}],34:[function(b,y,D){y.exports=b("../src/traces/pointcloud")},{"../src/traces/pointcloud":1144}],35:[function(b,y,D){y.exports=
b("../src/traces/sankey")},{"../src/traces/sankey":1150}],36:[function(b,y,D){y.exports=b("../src/traces/scatter3d")},{"../src/traces/scatter3d":1187}],37:[function(b,y,D){y.exports=b("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1194}],38:[function(b,y,D){y.exports=b("../src/traces/scattergeo")},{"../src/traces/scattergeo":1202}],39:[function(b,y,D){y.exports=b("../src/traces/scattergl")},{"../src/traces/scattergl":1215}],40:[function(b,y,D){y.exports=b("../src/traces/scattermapbox")},
{"../src/traces/scattermapbox":1225}],41:[function(b,y,D){y.exports=b("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1233}],42:[function(b,y,D){y.exports=b("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1240}],43:[function(b,y,D){y.exports=b("../src/traces/scatterternary")},{"../src/traces/scatterternary":1248}],44:[function(b,y,D){y.exports=b("../src/transforms/sort")},{"../src/transforms/sort":1336}],45:[function(b,y,D){y.exports=b("../src/traces/splom")},{"../src/traces/splom":1257}],
46:[function(b,y,D){y.exports=b("../src/traces/streamtube")},{"../src/traces/streamtube":1265}],47:[function(b,y,D){y.exports=b("../src/traces/sunburst")},{"../src/traces/sunburst":1273}],48:[function(b,y,D){y.exports=b("../src/traces/surface")},{"../src/traces/surface":1282}],49:[function(b,y,D){y.exports=b("../src/traces/table")},{"../src/traces/table":1290}],50:[function(b,y,D){y.exports=b("../src/traces/treemap")},{"../src/traces/treemap":1299}],51:[function(b,y,D){y.exports=b("../src/traces/violin")},
{"../src/traces/violin":1311}],52:[function(b,y,D){y.exports=b("../src/traces/volume")},{"../src/traces/volume":1319}],53:[function(b,y,D){y.exports=b("../src/traces/waterfall")},{"../src/traces/waterfall":1327}],54:[function(b,y,D){function n(d,e){this._controllerNames=Object.keys(d);this._controllerList=this._controllerNames.map(function(l){return d[l]});this._mode=e;this._active=d[e];this._active||(this._mode="turntable",this._active=d.turntable);this.modes=this._controllerNames;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}y.exports=function(d){d=d||{};var e=d.eye||[0,0,1],l=d.center||[0,0,0],k=d.up||[0,1,0],c=d.distanceLimits||[0,Infinity];d=d.mode||"turntable";var f=m(),g=p(),q=h();f.setDistanceLimits(c[0],c[1]);f.lookAt(0,e,l,k);g.setDistanceLimits(c[0],c[1]);g.lookAt(0,e,l,k);q.setDistanceLimits(c[0],c[1]);q.lookAt(0,
e,l,k);return new n({turntable:f,orbit:g,matrix:q},d)};var m=b("turntable-camera-controller"),p=b("orbit-camera-controller"),h=b("matrix-camera-controller"),a=n.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(d){for(var e=d[0],l=[],k=0;k<d[1];++k)l.push("a"+k);d="var cc\x3dthis._controllerList;for(var i\x3d0;i\x3ccc.length;++i){cc[i]."+d[0]+"("+l.join()+")}";a[e]=Function.apply(null,l.concat(d))});
a.recalcMatrix=function(d){this._active.recalcMatrix(d)};a.getDistance=function(d){return this._active.getDistance(d)};a.getDistanceLimits=function(d){return this._active.getDistanceLimits(d)};a.lastT=function(){return this._active.lastT()};a.setMode=function(d){if(d!==this._mode){var e=this._controllerNames.indexOf(d);if(!(0>e)){var l=this._active;e=this._controllerList[e];var k=Math.max(l.lastT(),e.lastT());l.recalcMatrix(k);e.setMatrix(k,l.computedMatrix);this._active=e;this._mode=d;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}}};a.getMode=function(){return this._mode}},{"matrix-camera-controller":454,"orbit-camera-controller":475,"turntable-camera-controller":553}],55:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?m(D,b("d3-array"),b("d3-collection"),b("d3-shape"),b("elementary-circuits-directed-graph")):
m(n.d3=n.d3||{},n.d3,n.d3,n.d3,null)})(this,function(n,m,p,h,a){function d(na){return na.target.depth}function e(na,sa){return na.sourceLinks.length?na.depth:sa-1}function l(na){return function(){return na}}function k(na,sa){return f(na.source,sa.source)||na.index-sa.index}function c(na,sa){return f(na.target,sa.target)||na.index-sa.index}function f(na,sa){return na.partOfCycle===sa.partOfCycle?na.y0-sa.y0:"top"===na.circularLinkType||"bottom"===sa.circularLinkType?-1:1}function g(na){return na.value}
function q(na){return(na.y0+na.y1)/2}function t(na){return q(na.source)}function u(na){return q(na.target)}function w(na){return na.index}function x(na){return na.nodes}function E(na){return na.links}function F(na,sa){na=na.get(sa);if(!na)throw Error("missing: "+sa);return na}function z(na,sa,ua){var ta=0;if(null===ua){var oa=[];for(sa=0;sa<na.links.length;sa++){var va=na.links[sa],ma=va.source.index;va=va.target.index;oa[ma]||(oa[ma]=[]);oa[va]||(oa[va]=[]);-1===oa[ma].indexOf(va)&&oa[ma].push(va)}oa=
a(oa);oa.sort(function(za,qa){return za.length-qa.length});var pa={};for(sa=0;sa<oa.length;sa++)ma=oa[sa].slice(-2),pa[ma[0]]||(pa[ma[0]]={}),pa[ma[0]][ma[1]]=!0;na.links.forEach(function(za){var qa=za.target.index,Ca=za.source.index;qa===Ca||pa[Ca]&&pa[Ca][qa]?(za.circular=!0,za.circularLinkID=ta,ta+=1):za.circular=!1})}else na.links.forEach(function(za){za.source[ua]<za.target[ua]?za.circular=!1:(za.circular=!0,za.circularLinkID=ta,ta+=1)})}function B(na,sa){var ua=0,ta=0;na.links.forEach(function(oa){oa.circular&&
(oa.circularLinkType=oa.source.circularLinkType||oa.target.circularLinkType?oa.source.circularLinkType?oa.source.circularLinkType:oa.target.circularLinkType:ua<ta?"top":"bottom","top"==oa.circularLinkType?ua+=1:ta+=1,na.nodes.forEach(function(va){if(sa(va)==sa(oa.source)||sa(va)==sa(oa.target))va.circularLinkType=oa.circularLinkType}))});na.links.forEach(function(oa){oa.circular&&(oa.source.circularLinkType==oa.target.circularLinkType&&(oa.circularLinkType=oa.source.circularLinkType),ia(oa,sa)&&(oa.circularLinkType=
oa.source.circularLinkType))})}function C(na){return Math.atan(Math.abs(na.target.x0-na.source.x1)/Math.abs(na.y1-na.y0))}function v(na,sa){var ua=0;na.sourceLinks.forEach(function(oa){ua=oa.circular&&!ia(oa,sa)?ua+1:ua});var ta=0;na.targetLinks.forEach(function(oa){ta=oa.circular&&!ia(oa,sa)?ta+1:ta});return ua+ta}function G(na){var sa=0;na.source.sourceLinks.forEach(function(ta){sa=ta.circular?sa+1:sa});var ua=0;na.target.targetLinks.forEach(function(ta){ua=ta.circular?ua+1:ua});return 1<sa||1<
ua?!1:!0}function I(na,sa,ua){na.sort(K);na.forEach(function(ta,oa){var va=0;if(!ia(ta,ua)||!G(ta)){var ma=0;for(ma;ma<oa;ma++){var pa=na[oa];var za=na[ma];pa=pa.source.column<za.target.column?!1:pa.target.column>za.source.column?!1:!0;pa&&(pa=na[ma].circularPathData.verticalBuffer+na[ma].width/2+sa,va=pa>va?pa:va)}}ta.circularPathData.verticalBuffer=va+ta.width/2});return na}function J(na,sa,ua,ta){var oa=m.min(na.links,function(ma){return ma.source.y0});na.links.forEach(function(ma){ma.circular&&
(ma.circularPathData={})});var va=na.links.filter(function(ma){return"top"==ma.circularLinkType});I(va,sa,ta);va=na.links.filter(function(ma){return"bottom"==ma.circularLinkType});I(va,sa,ta);na.links.forEach(function(ma){if(ma.circular){ma.circularPathData.arcRadius=ma.width+10;ma.circularPathData.leftNodeBuffer=5;ma.circularPathData.rightNodeBuffer=5;ma.circularPathData.sourceWidth=ma.source.x1-ma.source.x0;ma.circularPathData.sourceX=ma.source.x0+ma.circularPathData.sourceWidth;ma.circularPathData.targetX=
ma.target.x0;ma.circularPathData.sourceY=ma.y0;ma.circularPathData.targetY=ma.y1;if(ia(ma,ta)&&G(ma))ma.circularPathData.leftSmallArcRadius=10+ma.width/2,ma.circularPathData.leftLargeArcRadius=10+ma.width/2,ma.circularPathData.rightSmallArcRadius=10+ma.width/2,ma.circularPathData.rightLargeArcRadius=10+ma.width/2,"bottom"==ma.circularLinkType?(ma.circularPathData.verticalFullExtent=ma.source.y1+25+ma.circularPathData.verticalBuffer,ma.circularPathData.verticalLeftInnerExtent=ma.circularPathData.verticalFullExtent-
ma.circularPathData.leftLargeArcRadius,ma.circularPathData.verticalRightInnerExtent=ma.circularPathData.verticalFullExtent-ma.circularPathData.rightLargeArcRadius):(ma.circularPathData.verticalFullExtent=ma.source.y0-25-ma.circularPathData.verticalBuffer,ma.circularPathData.verticalLeftInnerExtent=ma.circularPathData.verticalFullExtent+ma.circularPathData.leftLargeArcRadius,ma.circularPathData.verticalRightInnerExtent=ma.circularPathData.verticalFullExtent+ma.circularPathData.rightLargeArcRadius);
else{var pa=ma.source.column,za=ma.circularLinkType,qa=na.links.filter(function(Ka){return Ka.source.column==pa&&Ka.circularLinkType==za});"bottom"==ma.circularLinkType?qa.sort(H):qa.sort(N);var Ca=0;qa.forEach(function(Ka,Oa){Ka.circularLinkID==ma.circularLinkID&&(ma.circularPathData.leftSmallArcRadius=10+ma.width/2+Ca,ma.circularPathData.leftLargeArcRadius=10+ma.width/2+Oa*sa+Ca);Ca+=Ka.width});pa=ma.target.column;qa=na.links.filter(function(Ka){return Ka.target.column==pa&&Ka.circularLinkType==
za});"bottom"==ma.circularLinkType?qa.sort(P):qa.sort(L);Ca=0;qa.forEach(function(Ka,Oa){Ka.circularLinkID==ma.circularLinkID&&(ma.circularPathData.rightSmallArcRadius=10+ma.width/2+Ca,ma.circularPathData.rightLargeArcRadius=10+ma.width/2+Oa*sa+Ca);Ca+=Ka.width});"bottom"==ma.circularLinkType?(ma.circularPathData.verticalFullExtent=Math.max(ua,ma.source.y1,ma.target.y1)+25+ma.circularPathData.verticalBuffer,ma.circularPathData.verticalLeftInnerExtent=ma.circularPathData.verticalFullExtent-ma.circularPathData.leftLargeArcRadius,
ma.circularPathData.verticalRightInnerExtent=ma.circularPathData.verticalFullExtent-ma.circularPathData.rightLargeArcRadius):(ma.circularPathData.verticalFullExtent=oa-25-ma.circularPathData.verticalBuffer,ma.circularPathData.verticalLeftInnerExtent=ma.circularPathData.verticalFullExtent+ma.circularPathData.leftLargeArcRadius,ma.circularPathData.verticalRightInnerExtent=ma.circularPathData.verticalFullExtent+ma.circularPathData.rightLargeArcRadius)}ma.circularPathData.leftInnerExtent=ma.circularPathData.sourceX+
ma.circularPathData.leftNodeBuffer;ma.circularPathData.rightInnerExtent=ma.circularPathData.targetX-ma.circularPathData.rightNodeBuffer;ma.circularPathData.leftFullExtent=ma.circularPathData.sourceX+ma.circularPathData.leftLargeArcRadius+ma.circularPathData.leftNodeBuffer;ma.circularPathData.rightFullExtent=ma.circularPathData.targetX-ma.circularPathData.rightLargeArcRadius-ma.circularPathData.rightNodeBuffer}ma.circular?ma.path="top"==ma.circularLinkType?"M"+ma.circularPathData.sourceX+" "+ma.circularPathData.sourceY+
" L"+ma.circularPathData.leftInnerExtent+" "+ma.circularPathData.sourceY+" A"+ma.circularPathData.leftLargeArcRadius+" "+ma.circularPathData.leftSmallArcRadius+" 0 0 0 "+ma.circularPathData.leftFullExtent+" "+(ma.circularPathData.sourceY-ma.circularPathData.leftSmallArcRadius)+" L"+ma.circularPathData.leftFullExtent+" "+ma.circularPathData.verticalLeftInnerExtent+" A"+ma.circularPathData.leftLargeArcRadius+" "+ma.circularPathData.leftLargeArcRadius+" 0 0 0 "+ma.circularPathData.leftInnerExtent+" "+
ma.circularPathData.verticalFullExtent+" L"+ma.circularPathData.rightInnerExtent+" "+ma.circularPathData.verticalFullExtent+" A"+ma.circularPathData.rightLargeArcRadius+" "+ma.circularPathData.rightLargeArcRadius+" 0 0 0 "+ma.circularPathData.rightFullExtent+" "+ma.circularPathData.verticalRightInnerExtent+" L"+ma.circularPathData.rightFullExtent+" "+(ma.circularPathData.targetY-ma.circularPathData.rightSmallArcRadius)+" A"+ma.circularPathData.rightLargeArcRadius+" "+ma.circularPathData.rightSmallArcRadius+
" 0 0 0 "+ma.circularPathData.rightInnerExtent+" "+ma.circularPathData.targetY+" L"+ma.circularPathData.targetX+" "+ma.circularPathData.targetY:"M"+ma.circularPathData.sourceX+" "+ma.circularPathData.sourceY+" L"+ma.circularPathData.leftInnerExtent+" "+ma.circularPathData.sourceY+" A"+ma.circularPathData.leftLargeArcRadius+" "+ma.circularPathData.leftSmallArcRadius+" 0 0 1 "+ma.circularPathData.leftFullExtent+" "+(ma.circularPathData.sourceY+ma.circularPathData.leftSmallArcRadius)+" L"+ma.circularPathData.leftFullExtent+
" "+ma.circularPathData.verticalLeftInnerExtent+" A"+ma.circularPathData.leftLargeArcRadius+" "+ma.circularPathData.leftLargeArcRadius+" 0 0 1 "+ma.circularPathData.leftInnerExtent+" "+ma.circularPathData.verticalFullExtent+" L"+ma.circularPathData.rightInnerExtent+" "+ma.circularPathData.verticalFullExtent+" A"+ma.circularPathData.rightLargeArcRadius+" "+ma.circularPathData.rightLargeArcRadius+" 0 0 1 "+ma.circularPathData.rightFullExtent+" "+ma.circularPathData.verticalRightInnerExtent+" L"+ma.circularPathData.rightFullExtent+
" "+(ma.circularPathData.targetY+ma.circularPathData.rightSmallArcRadius)+" A"+ma.circularPathData.rightLargeArcRadius+" "+ma.circularPathData.rightSmallArcRadius+" 0 0 1 "+ma.circularPathData.rightInnerExtent+" "+ma.circularPathData.targetY+" L"+ma.circularPathData.targetX+" "+ma.circularPathData.targetY:(qa=h.linkHorizontal().source(function(Ka){return[Ka.source.x0+(Ka.source.x1-Ka.source.x0),Ka.y0]}).target(function(Ka){return[Ka.target.x0,Ka.y1]}),ma.path=qa(ma))})}function K(na,sa){return Q(na)==
Q(sa)?"bottom"==na.circularLinkType?H(na,sa):N(na,sa):Q(sa)-Q(na)}function N(na,sa){return na.y0-sa.y0}function H(na,sa){return sa.y0-na.y0}function L(na,sa){return na.y1-sa.y1}function P(na,sa){return sa.y1-na.y1}function Q(na){return na.target.column-na.source.column}function S(na,sa){var ua=C(na);sa=(sa.target.x0-sa.source.x1)/Math.tan(ua);return"up"==ca(na)?na.y1+sa:na.y1-sa}function O(na,sa){var ua=C(na);sa=(sa.target.x0-sa.source.x1)/Math.tan(ua);return"up"==ca(na)?na.y1-sa:na.y1+sa}function U(na,
sa,ua,ta){na.links.forEach(function(oa){if(!oa.circular&&1<oa.target.column-oa.source.column){var va=oa.source.column+1,ma=oa.target.column-1,pa=1,za=ma-va+1;for(pa=1;va<=ma;va++,pa++)na.nodes.forEach(function(qa){if(qa.column==va){var Ca=pa/(za+1),Ka=Math.pow(1-Ca,3)*oa.y0+3*Ca*Math.pow(1-Ca,2)*oa.y0+3*Math.pow(Ca,2)*(1-Ca)*oa.y1+Math.pow(Ca,3)*oa.y1;Ca=Ka-oa.width/2;Ka+=oa.width/2;if(Ca>qa.y0&&Ca<qa.y1){var Oa=qa.y1-Ca+10;Oa="bottom"==qa.circularLinkType?Oa:-Oa;qa=X(qa,Oa,sa,ua);na.nodes.forEach(function(kb){ta(kb)!=
ta(qa)&&kb.column==qa.column&&(qa.y0>kb.y0&&qa.y0<kb.y1||qa.y1>kb.y0&&qa.y1<kb.y1||qa.y0<kb.y0&&qa.y1>kb.y1)&&X(kb,Oa,sa,ua)})}else Ka>qa.y0&&Ka<qa.y1?(Oa=Ka-qa.y0+10,qa=X(qa,Oa,sa,ua),na.nodes.forEach(function(kb){ta(kb)!=ta(qa)&&kb.column==qa.column&&kb.y0<qa.y1&&kb.y1>qa.y1&&X(kb,Oa,sa,ua)})):Ca<qa.y0&&Ka>qa.y1&&(Oa=Ka-qa.y0+10,qa=X(qa,Oa,sa,ua),na.nodes.forEach(function(kb){ta(kb)!=ta(qa)&&kb.column==qa.column&&kb.y0<qa.y1&&kb.y1>qa.y1&&X(kb,Oa,sa,ua)}))}})}})}function X(na,sa,ua,ta){na.y0+sa>=
ua&&na.y1+sa<=ta&&(na.y0+=sa,na.y1+=sa,na.targetLinks.forEach(function(oa){oa.y1+=sa}),na.sourceLinks.forEach(function(oa){oa.y0+=sa}));return na}function da(na,sa,ua,ta){na.nodes.forEach(function(oa){ta&&oa.y+(oa.y1-oa.y0)>sa&&(oa.y-=oa.y+(oa.y1-oa.y0)-sa);var va=na.links.filter(function(za){return ua(za.source)==ua(oa)}),ma=va.length;1<ma&&va.sort(function(za,qa){if(!za.circular&&!qa.circular)if(za.target.column!=qa.target.column&&ca(za)==ca(qa)){if(za.target.column>qa.target.column)return qa=O(qa,
za),za.y1-qa;if(qa.target.column>za.target.column)return O(za,qa)-qa.y1}else return za.y1-qa.y1;if(za.circular&&!qa.circular)return"top"==za.circularLinkType?-1:1;if(qa.circular&&!za.circular)return"top"==qa.circularLinkType?1:-1;if(za.circular&&qa.circular)return za.circularLinkType===qa.circularLinkType&&"top"==za.circularLinkType?za.target.column===qa.target.column?za.target.y1-qa.target.y1:qa.target.column-za.target.column:za.circularLinkType===qa.circularLinkType&&"bottom"==za.circularLinkType?
za.target.column===qa.target.column?qa.target.y1-za.target.y1:za.target.column-qa.target.column:"top"==za.circularLinkType?-1:1});var pa=oa.y0;va.forEach(function(za){za.y0=pa+za.width/2;pa+=za.width});va.forEach(function(za,qa){if("bottom"==za.circularLinkType){qa+=1;var Ca=0;for(qa;qa<ma;qa++)Ca+=va[qa].width;za.y0=oa.y1-Ca-za.width/2}})})}function ea(na,sa,ua){na.nodes.forEach(function(ta){var oa=na.links.filter(function(pa){return ua(pa.target)==ua(ta)}),va=oa.length;1<va&&oa.sort(function(pa,
za){if(!pa.circular&&!za.circular)if(pa.source.column!=za.source.column&&ca(pa)==ca(za)){if(za.source.column<pa.source.column)return za=S(za,pa),pa.y0-za;if(pa.source.column<za.source.column)return S(pa,za)-za.y0}else return pa.y0-za.y0;if(pa.circular&&!za.circular)return"top"==pa.circularLinkType?-1:1;if(za.circular&&!pa.circular)return"top"==za.circularLinkType?1:-1;if(pa.circular&&za.circular)return pa.circularLinkType===za.circularLinkType&&"top"==pa.circularLinkType?pa.source.column===za.source.column?
pa.source.y1-za.source.y1:pa.source.column-za.source.column:pa.circularLinkType===za.circularLinkType&&"bottom"==pa.circularLinkType?pa.source.column===za.source.column?pa.source.y1-za.source.y1:za.source.column-pa.source.column:"top"==pa.circularLinkType?-1:1});var ma=ta.y0;oa.forEach(function(pa){pa.y1=ma+pa.width/2;ma+=pa.width});oa.forEach(function(pa,za){if("bottom"==pa.circularLinkType){za+=1;var qa=0;for(za;za<va;za++)qa+=oa[za].width;pa.y1=ta.y1-qa-pa.width/2}})})}function ca(na){return 0<
na.y0-na.y1?"up":"down"}function ia(na,sa){return sa(na.source)==sa(na.target)}function ha(na,sa,ua){var ta=na.nodes;na=na.links;var oa=!1,va=!1;na.forEach(function(qa){"top"==qa.circularLinkType?oa=!0:"bottom"==qa.circularLinkType&&(va=!0)});if(0==oa||0==va){var ma=m.min(ta,function(qa){return qa.y0}),pa=m.max(ta,function(qa){return qa.y1}),za=(ua-sa)/(pa-ma);ta.forEach(function(qa){var Ca=(qa.y1-qa.y0)*za;qa.y0=(qa.y0-ma)*za;qa.y1=qa.y0+Ca});na.forEach(function(qa){qa.y0=(qa.y0-ma)*za;qa.y1=(qa.y1-
ma)*za;qa.width*=za})}}a=a&&a.hasOwnProperty("default")?a["default"]:a;var fa="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(na){return typeof na}:function(na){return na&&"function"===typeof Symbol&&na.constructor===Symbol&&na!==Symbol.prototype?"symbol":typeof na};n.sankeyCircular=function(){function na(){var Ia={nodes:nb.apply(null,arguments),links:Ta.apply(null,arguments)};sa(Ia);z(Ia,mb,Ea);ua(Ia);va(Ia);B(Ia,mb);ma(Ia,fb,mb);pa(Ia);for(var Va=0;4>Va;Va++)da(Ia,Ka,mb),
ea(Ia,Ka,mb),U(Ia,qa,Ka,mb),da(Ia,Ka,mb),ea(Ia,Ka,mb);ha(Ia,qa,Ka);J(Ia,ab,Ka,mb);return Ia}function sa(Ia){Ia.nodes.forEach(function(rb,ib){rb.index=ib;rb.sourceLinks=[];rb.targetLinks=[]});var Va=p.map(Ia.nodes,mb);Ia.links.forEach(function(rb,ib){rb.index=ib;ib=rb.source;var Na=rb.target;"object"!==("undefined"===typeof ib?"undefined":fa(ib))&&(ib=rb.source=F(Va,ib));"object"!==("undefined"===typeof Na?"undefined":fa(Na))&&(Na=rb.target=F(Va,Na));ib.sourceLinks.push(rb);Na.targetLinks.push(rb)});
return Ia}function ua(Ia){Ia.nodes.forEach(function(Va){Va.partOfCycle=!1;Va.value=Math.max(m.sum(Va.sourceLinks,g),m.sum(Va.targetLinks,g));Va.sourceLinks.forEach(function(rb){rb.circular&&(Va.partOfCycle=!0,Va.circularLinkType=rb.circularLinkType)});Va.targetLinks.forEach(function(rb){rb.circular&&(Va.partOfCycle=!0,Va.circularLinkType=rb.circularLinkType)})})}function ta(Ia){var Va=0,rb=0,ib=0,Na=0,Za=m.max(Ia.nodes,function(eb){return eb.column});Ia.links.forEach(function(eb){eb.circular&&("top"==
eb.circularLinkType?Va+=eb.width:rb+=eb.width,0==eb.target.column&&(Na+=eb.width),eb.source.column==Za&&(ib+=eb.width))});Va=0<Va?Va+25+10:Va;rb=0<rb?rb+25+10:rb;ib=0<ib?ib+25+10:ib;Na=0<Na?Na+25+10:Na;return{top:Va,bottom:rb,left:Na,right:ib}}function oa(Ia,Va){var rb=m.max(Ia.nodes,function(Za){return Za.column}),ib=Ca-za,Na=Ka-qa;ib/=ib+Va.right+Va.left;Na/=Na+Va.top+Va.bottom;za=za*ib+Va.left;Ca=0==Va.right?Ca:Ca*ib;qa=qa*Na+Va.top;Ka*=Na;Ia.nodes.forEach(function(Za){Za.x0=za+(Ca-za-Oa)/rb*Za.column;
Za.x1=Za.x0+Oa});return Na}function va(Ia){var Va;var rb=Ia.nodes;var ib=[];for(Va=0;rb.length;++Va,rb=ib,ib=[])rb.forEach(function(Na){Na.depth=Va;Na.sourceLinks.forEach(function(Za){0>ib.indexOf(Za.target)&&!Za.circular&&ib.push(Za.target)})});rb=Ia.nodes;ib=[];for(Va=0;rb.length;++Va,rb=ib,ib=[])rb.forEach(function(Na){Na.height=Va;Na.targetLinks.forEach(function(Za){0>ib.indexOf(Za.source)&&!Za.circular&&ib.push(Za.source)})});Ia.nodes.forEach(function(Na){Na.column=Math.floor(tb.call(null,Na,
Va))})}function ma(Ia,Va,rb){function ib(Ba,Ma){var $a=Za.length;Za.forEach(function(lb){var Ra=lb.length,jb=lb[0].depth;lb.forEach(function(Xa){if((Xa.sourceLinks.length||Xa.targetLinks.length)&&!(Xa.partOfCycle&&0<v(Xa,Ma)))if(0==jb&&1==Ra){var pb=Xa.y1-Xa.y0;Xa.y0=Ka/2-pb/2;Xa.y1=Ka/2+pb/2}else if(jb==$a-1&&1==Ra)pb=Xa.y1-Xa.y0,Xa.y0=Ka/2-pb/2,Xa.y1=Ka/2+pb/2;else{pb=m.mean(Xa.sourceLinks,u);var vb=m.mean(Xa.targetLinks,t);pb=((pb&&vb?(pb+vb)/2:pb||vb)-q(Xa))*Ba;Xa.y0+=pb;Xa.y1+=pb}})})}function Na(){Za.forEach(function(Ba){var Ma=
qa,$a=Ba.length,lb;Ba.sort(f);for(lb=0;lb<$a;++lb){var Ra=Ba[lb];var jb=Ma-Ra.y0;0<jb&&(Ra.y0+=jb,Ra.y1+=jb);Ma=Ra.y1+kb}jb=Ma-kb-Ka;if(0<jb)for(Ma=Ra.y0-=jb,Ra.y1-=jb,lb=$a-2;0<=lb;--lb)Ra=Ba[lb],jb=Ra.y1+kb-Ma,0<jb&&(Ra.y0-=jb,Ra.y1-=jb),Ma=Ra.y0})}var Za=p.nest().key(function(Ba){return Ba.column}).sortKeys(m.ascending).entries(Ia.nodes).map(function(Ba){return Ba.values});(function(Ba){if(ra){var Ma=Infinity;Za.forEach(function(jb){jb=Ka*ra/(jb.length+1);Ma=jb<Ma?jb:Ma});kb=Ma}var $a=m.min(Za,
function(jb){return(Ka-qa-(jb.length-1)*kb)/m.sum(jb,g)});$a*=.3;Ia.links.forEach(function(jb){jb.width=jb.value*$a});var lb=ta(Ia),Ra=oa(Ia,lb);$a*=Ra;Ia.links.forEach(function(jb){jb.width=jb.value*$a});Za.forEach(function(jb){var Xa=jb.length;jb.forEach(function(pb,vb){pb.depth==Za.length-1&&1==Xa?pb.y0=Ka/2-pb.value*$a:0==pb.depth&&1==Xa?pb.y0=Ka/2-pb.value*$a:pb.partOfCycle?0==v(pb,Ba)?pb.y0=Ka/2+vb:pb.y0="top"==pb.circularLinkType?qa+vb:Ka-pb.value*$a-vb:pb.y0=0==lb.top||0==lb.bottom?(Ka-qa)/
Xa*vb:(Ka-qa)/2-Xa/2+vb;pb.y1=pb.y0+pb.value*$a})})})(rb);Na();for(var eb=1;0<Va;--Va)ib(eb*=.99,rb),Na()}function pa(Ia){Ia.nodes.forEach(function(Va){Va.sourceLinks.sort(c);Va.targetLinks.sort(k)});Ia.nodes.forEach(function(Va){var rb=Va.y0,ib=rb,Na=Va.y1,Za=Na;Va.sourceLinks.forEach(function(eb){eb.circular?(eb.y0=Na-eb.width/2,Na-=eb.width):(eb.y0=rb+eb.width/2,rb+=eb.width)});Va.targetLinks.forEach(function(eb){eb.circular?(eb.y1=Za-eb.width/2,Za-=eb.width):(eb.y1=ib+eb.width/2,ib+=eb.width)})})}
var za=0,qa=0,Ca=1,Ka=1,Oa=24,kb,mb=w,tb=e,nb=x,Ta=E,fb=32,ab=2,ra,Ea=null;na.nodeId=function(Ia){return arguments.length?(mb="function"===typeof Ia?Ia:l(Ia),na):mb};na.nodeAlign=function(Ia){return arguments.length?(tb="function"===typeof Ia?Ia:l(Ia),na):tb};na.nodeWidth=function(Ia){return arguments.length?(Oa=+Ia,na):Oa};na.nodePadding=function(Ia){return arguments.length?(kb=+Ia,na):kb};na.nodes=function(Ia){return arguments.length?(nb="function"===typeof Ia?Ia:l(Ia),na):nb};na.links=function(Ia){return arguments.length?
(Ta="function"===typeof Ia?Ia:l(Ia),na):Ta};na.size=function(Ia){return arguments.length?(za=qa=0,Ca=+Ia[0],Ka=+Ia[1],na):[Ca-za,Ka-qa]};na.extent=function(Ia){return arguments.length?(za=+Ia[0][0],Ca=+Ia[1][0],qa=+Ia[0][1],Ka=+Ia[1][1],na):[[za,qa],[Ca,Ka]]};na.iterations=function(Ia){return arguments.length?(fb=+Ia,na):fb};na.circularLinkGap=function(Ia){return arguments.length?(ab=+Ia,na):ab};na.nodePaddingRatio=function(Ia){return arguments.length?(ra=+Ia,na):ra};na.sortNodes=function(Ia){return arguments.length?
(Ea=Ia,na):Ea};na.update=function(Ia){B(Ia,mb);pa(Ia);Ia.links.forEach(function(Va){Va.circular&&(Va.circularLinkType=Va.y0+Va.y1<Ka?"top":"bottom",Va.source.circularLinkType=Va.circularLinkType,Va.target.circularLinkType=Va.circularLinkType)});da(Ia,Ka,mb,!1);ea(Ia,Ka,mb);J(Ia,ab,Ka,mb);return Ia};return na};n.sankeyCenter=function(na){return na.targetLinks.length?na.depth:na.sourceLinks.length?m.min(na.sourceLinks,d)-1:0};n.sankeyLeft=function(na){return na.depth};n.sankeyRight=function(na,sa){return sa-
1-na.height};n.sankeyJustify=e;Object.defineProperty(n,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165,"elementary-circuits-directed-graph":179}],56:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?m(D,b("d3-array"),b("d3-collection"),b("d3-shape")):m(n.d3=n.d3||{},n.d3,n.d3,n.d3)})(this,function(n,m,p,h){function a(B){return B.target.depth}function d(B,C){return B.sourceLinks.length?B.depth:C-1}function e(B){return function(){return B}}function l(B,
C){return c(B.source,C.source)||B.index-C.index}function k(B,C){return c(B.target,C.target)||B.index-C.index}function c(B,C){return B.y0-C.y0}function f(B){return B.value}function g(B){return(B.y0+B.y1)/2}function q(B){return g(B.source)*B.value}function t(B){return g(B.target)*B.value}function u(B){return B.index}function w(B){return B.nodes}function x(B){return B.links}function E(B,C){B=B.get(C);if(!B)throw Error("missing: "+C);return B}function F(B){return[B.source.x1,B.y0]}function z(B){return[B.target.x0,
B.y1]}n.sankey=function(){function B(){var ca={nodes:U.apply(null,arguments),links:X.apply(null,arguments)};C(ca);v(ca);G(ca);I(ca,da);J(ca);return ca}function C(ca){ca.nodes.forEach(function(ha,fa){ha.index=fa;ha.sourceLinks=[];ha.targetLinks=[]});var ia=p.map(ca.nodes,S);ca.links.forEach(function(ha,fa){ha.index=fa;fa=ha.source;var na=ha.target;"object"!==typeof fa&&(fa=ha.source=E(ia,fa));"object"!==typeof na&&(na=ha.target=E(ia,na));fa.sourceLinks.push(ha);na.targetLinks.push(ha)})}function v(ca){ca.nodes.forEach(function(ia){ia.value=
Math.max(m.sum(ia.sourceLinks,f),m.sum(ia.targetLinks,f))})}function G(ca){var ia;var ha=ca.nodes;var fa=[];for(ia=0;ha.length;++ia,ha=fa,fa=[])ha.forEach(function(sa){sa.depth=ia;sa.sourceLinks.forEach(function(ua){0>fa.indexOf(ua.target)&&fa.push(ua.target)})});ha=ca.nodes;fa=[];for(ia=0;ha.length;++ia,ha=fa,fa=[])ha.forEach(function(sa){sa.height=ia;sa.targetLinks.forEach(function(ua){0>fa.indexOf(ua.source)&&fa.push(ua.source)})});var na=(H-K-P)/(ia-1);ca.nodes.forEach(function(sa){sa.x1=(sa.x0=
K+Math.max(0,Math.min(ia-1,Math.floor(O.call(null,sa,ia))))*na)+P})}function I(ca){function ia(ta){na.forEach(function(oa){oa.forEach(function(va){if(va.targetLinks.length){var ma=(m.sum(va.targetLinks,q)/m.sum(va.targetLinks,f)-g(va))*ta;va.y0+=ma;va.y1+=ma}})})}function ha(ta){na.slice().reverse().forEach(function(oa){oa.forEach(function(va){if(va.sourceLinks.length){var ma=(m.sum(va.sourceLinks,t)/m.sum(va.sourceLinks,f)-g(va))*ta;va.y0+=ma;va.y1+=ma}})})}function fa(){na.forEach(function(ta){var oa=
N,va=ta.length,ma;ta.sort(c);for(ma=0;ma<va;++ma){var pa=ta[ma];var za=oa-pa.y0;0<za&&(pa.y0+=za,pa.y1+=za);oa=pa.y1+Q}za=oa-Q-L;if(0<za)for(oa=pa.y0-=za,pa.y1-=za,ma=va-2;0<=ma;--ma)pa=ta[ma],za=pa.y1+Q-oa,0<za&&(pa.y0-=za,pa.y1-=za),oa=pa.y0})}var na=p.nest().key(function(ta){return ta.x0}).sortKeys(m.ascending).entries(ca.nodes).map(function(ta){return ta.values});(function(){var ta=m.max(na,function(va){return va.length});ta=ea*(L-N)/(ta-1);Q>ta&&(Q=ta);var oa=m.min(na,function(va){return(L-N-
(va.length-1)*Q)/m.sum(va,f)});na.forEach(function(va){va.forEach(function(ma,pa){ma.y1=(ma.y0=pa)+ma.value*oa})});ca.links.forEach(function(va){va.width=va.value*oa})})();fa();for(var sa=1,ua=da;0<ua;--ua)ha(sa*=.99),fa(),ia(sa),fa()}function J(ca){ca.nodes.forEach(function(ia){ia.sourceLinks.sort(k);ia.targetLinks.sort(l)});ca.nodes.forEach(function(ia){var ha=ia.y0,fa=ha;ia.sourceLinks.forEach(function(na){na.y0=ha+na.width/2;ha+=na.width});ia.targetLinks.forEach(function(na){na.y1=fa+na.width/
2;fa+=na.width})})}var K=0,N=0,H=1,L=1,P=24,Q=8,S=u,O=d,U=w,X=x,da=32,ea=2/3;B.update=function(ca){J(ca);return ca};B.nodeId=function(ca){return arguments.length?(S="function"===typeof ca?ca:e(ca),B):S};B.nodeAlign=function(ca){return arguments.length?(O="function"===typeof ca?ca:e(ca),B):O};B.nodeWidth=function(ca){return arguments.length?(P=+ca,B):P};B.nodePadding=function(ca){return arguments.length?(Q=+ca,B):Q};B.nodes=function(ca){return arguments.length?(U="function"===typeof ca?ca:e(ca),B):
U};B.links=function(ca){return arguments.length?(X="function"===typeof ca?ca:e(ca),B):X};B.size=function(ca){return arguments.length?(K=N=0,H=+ca[0],L=+ca[1],B):[H-K,L-N]};B.extent=function(ca){return arguments.length?(K=+ca[0][0],H=+ca[1][0],N=+ca[0][1],L=+ca[1][1],B):[[K,N],[H,L]]};B.iterations=function(ca){return arguments.length?(da=+ca,B):da};return B};n.sankeyCenter=function(B){return B.targetLinks.length?B.depth:B.sourceLinks.length?m.min(B.sourceLinks,a)-1:0};n.sankeyLeft=function(B){return B.depth};
n.sankeyRight=function(B,C){return C-1-B.height};n.sankeyJustify=d;n.sankeyLinkHorizontal=function(){return h.linkHorizontal().source(F).target(z)};Object.defineProperty(n,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165}],57:[function(b,y,D){y.exports=b("./quad")},{"./quad":58}],58:[function(b,y,D){function n(g,q){var t=q[0],u=q[1],w=1/(q[2]-t);q=1/(q[3]-u);for(var x=Array(g.length),E=0,F=g.length/2;E<F;E++)x[2*E]=p((g[2*E]-t)*w,0,1),x[2*E+1]=p((g[2*E+1]-u)*q,0,1);return x}
var m=b("binary-search-bounds"),p=b("clamp"),h=b("parse-rect"),a=b("array-bounds"),d=b("pick-by-alias"),e=b("defined"),l=b("flatten-vertex-data"),k=b("is-obj"),c=b("dtype"),f=b("math-log2");y.exports=function(g,q){function t(H,L,P,Q,S,O){if(!Q.length)return null;var U=C[S]||(C[S]=[]),X=G[S]||(G[S]=[]),da=v[S]||(v[S]=[]),ea=U.length;S++;if(S>x||1073741824<O){for(H=0;H<Q.length;H++)U.push(Q[H]),X.push(O),da.push(null,null,null,null);return ea}U.push(Q[0]);X.push(O);if(1>=Q.length)return da.push(null,
null,null,null),ea;U=.5*P;X=H+U;P=L+U;for(var ca=[],ia=[],ha=[],fa=[],na=1,sa=Q.length;na<sa;na++){var ua=Q[na],ta=F[2*ua+1];F[2*ua]<X?ta<P?ca.push(ua):ia.push(ua):ta<P?ha.push(ua):fa.push(ua)}O<<=2;da.push(t(H,L,U,ca,S,O),t(H,P,U,ia,S,O+1),t(X,L,U,ha,S,O+2),t(X,P,U,fa,S,O+3));return ea}function u(H,L,P,Q,S){for(var O=[],U=0;U<S;U++){var X=G[U],da=I[U][0],ea=w(H,L,U),ca=w(P,Q,U);ea=m.ge(X,ea);X=m.gt(X,ca,ea,X.length-1);O[U]=[ea+da,X+da]}return O}function w(H,L,P){for(var Q=1,S=.5,O=.5,U=.5,X=0;X<
P;X++)Q<<=2,Q+=H<S?L<O?0:1:L<O?2:3,U*=.5,S+=H<S?-U:U,O+=L<O?-U:U;return Q}q||(q={});g=l(g,"float64");q=d(q,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var x=e(q.maxDepth,255),E=e(q.bounds,a(g,2));E[0]===E[2]&&E[2]++;E[1]===E[3]&&E[3]++;var F=n(g,E),z=g.length>>>1;q.dtype||(q.dtype="array");if("string"===typeof q.dtype)var B=new (c(q.dtype))(z);else q.dtype&&(B=q.dtype,Array.isArray(B)&&
(B.length=z));for(q=0;q<z;++q)B[q]=q;var C=[],v=[],G=[],I=[];t(0,0,1,B,0,1);for(q=z=0;q<C.length;q++){var J=C[q];if(B.set)B.set(J,z);else for(var K=0,N=J.length;K<N;K++)B[K+z]=J[K];J=z+C[q].length;I[q]=[z,J];z=J}B.range=function(){function H(sa,ua,ta,oa,va,ma){if(null!==va&&null!==ma&&!(da>sa+ta||ea>ua+ta||ca<sa||ia<ua||oa>=ha||va===ma)){var pa=C[oa];void 0===ma&&(ma=pa.length);for(var za=va;za<ma;za++){var qa=pa[za],Ca=g[2*qa],Ka=g[2*qa+1];Ca>=S&&Ca<=U&&Ka>=O&&Ka<=X&&na.push(qa)}Ca=v[oa];ma=Ca[4*
va];pa=Ca[4*va+1];za=Ca[4*va+2];qa=Ca[4*va+3];a:{Ka=null;for(var Oa=0;null===Ka;)if(Ka=Ca[4*(va+1)+Oa],Oa++,Oa>Ca.length){va=null;break a}va=Ka}ta*=.5;oa+=1;H(sa,ua,ta,oa,ma,pa||za||qa||va);H(sa,ua+ta,ta,oa,pa,za||qa||va);H(sa+ta,ua,ta,oa,za,qa||va);H(sa+ta,ua+ta,ta,oa,qa,va)}}for(var L=[],P=arguments.length;P--;)L[P]=arguments[P];if(k(L[L.length-1])){var Q=L.pop();L.length||null==Q.x&&null==Q.l&&null==Q.left||(L=[Q],P={});P=d(Q,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",
lod:"lod details ranges offsets"})}else P={};L.length||(L=E);L=h.apply(void 0,L);L=[Math.min(L.x,L.x+L.width),Math.min(L.y,L.y+L.height),Math.max(L.x,L.x+L.width),Math.max(L.y,L.y+L.height)];var S=L[0],O=L[1],U=L[2],X=L[3];L=n([S,O,U,X],E);var da=L[0],ea=L[1],ca=L[2],ia=L[3],ha=e(P.level,C.length);if(null!=P.d){if("number"===typeof P.d)var fa=[P.d,P.d];else P.d.length&&(fa=P.d);ha=Math.min(Math.max(Math.ceil(-f(Math.abs(fa[0])/(E[2]-E[0]))),Math.ceil(-f(Math.abs(fa[1])/(E[3]-E[1])))),ha)}ha=Math.min(ha,
C.length);if(P.lod)return u(da,ea,ca,ia,ha);var na=[];H(0,0,1,0,0,1);return na};return B}},{"array-bounds":70,"binary-search-bounds":96,clamp:120,defined:170,dtype:175,"flatten-vertex-data":244,"is-obj":442,"math-log2":453,"parse-rect":478,"pick-by-alias":485}],59:[function(b,y,D){function n(h){var a=0;if(h&&0<h.length){a+=Math.abs(m(h[0]));for(var d=1;d<h.length;d++)a-=Math.abs(m(h[d]))}return a}function m(h){var a,d=0,e=h.length;if(2<e){for(a=0;a<e;a++){if(a===e-2){var l=e-2;var k=e-1;var c=0}else a===
e-1?(l=e-1,k=0,c=1):(l=a,k=a+1,c=a+2);l=h[l];k=h[k];c=h[c];d+=(c[0]*Math.PI/180-l[0]*Math.PI/180)*Math.sin(k[1]*Math.PI/180)}d=40680631590769*d/2}return d}Object.defineProperty(D,"__esModule",{value:!0});var p=b("@turf/meta");D.default=function(h){return p.geomReduce(h,function(a,d){a:{var e=0,l;switch(d.type){case "Polygon":d=n(d.coordinates);break a;case "MultiPolygon":for(l=0;l<d.coordinates.length;l++)e+=n(d.coordinates[l]);d=e;break a}d=0}return a+d},0)}},{"@turf/meta":63}],60:[function(b,y,
D){Object.defineProperty(D,"__esModule",{value:!0});var n=b("@turf/meta");D.default=function(m){var p=[Infinity,Infinity,-Infinity,-Infinity];n.coordEach(m,function(h){p[0]>h[0]&&(p[0]=h[0]);p[1]>h[1]&&(p[1]=h[1]);p[2]<h[0]&&(p[2]=h[0]);p[3]<h[1]&&(p[3]=h[1])});return p}},{"@turf/meta":63}],61:[function(b,y,D){Object.defineProperty(D,"__esModule",{value:!0});var n=b("@turf/meta"),m=b("@turf/helpers");D.default=function(p,h){void 0===h&&(h={});var a=0,d=0,e=0;n.coordEach(p,function(l){a+=l[0];d+=l[1];
e++});return m.point([a/e,d/e],h.properties)}},{"@turf/helpers":62,"@turf/meta":63}],62:[function(b,y,D){function n(q,t,u){void 0===u&&(u={});var w={type:"Feature"};if(0===u.id||u.id)w.id=u.id;u.bbox&&(w.bbox=u.bbox);w.properties=t||{};w.geometry=q;return w}function m(q,t,u){void 0===u&&(u={});return n({type:"Point",coordinates:q},t,u)}function p(q,t,u){void 0===u&&(u={});for(var w=0;w<q.length;w++){var x=q[w];if(4>x.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");
for(var E=0;E<x[x.length-1].length;E++)if(x[x.length-1][E]!==x[0][E])throw Error("First and last Position are not equivalent.");}return n({type:"Polygon",coordinates:q},t,u)}function h(q,t,u){void 0===u&&(u={});if(2>q.length)throw Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:q},t,u)}function a(q,t){void 0===t&&(t={});var u={type:"FeatureCollection"};t.id&&(u.id=t.id);t.bbox&&(u.bbox=t.bbox);u.features=q;return u}function d(q,t,u){void 0===
u&&(u={});return n({type:"MultiLineString",coordinates:q},t,u)}function e(q,t,u){void 0===u&&(u={});return n({type:"MultiPoint",coordinates:q},t,u)}function l(q,t,u){void 0===u&&(u={});return n({type:"MultiPolygon",coordinates:q},t,u)}function k(q,t){void 0===t&&(t="kilometers");var u=D.factors[t];if(!u)throw Error(t+" units is invalid");return q*u}function c(q,t){void 0===t&&(t="kilometers");var u=D.factors[t];if(!u)throw Error(t+" units is invalid");return q/u}function f(q){return q%(2*Math.PI)*
180/Math.PI}function g(q){return!isNaN(q)&&null!==q&&!Array.isArray(q)&&!/^\s*$/.test(q)}Object.defineProperty(D,"__esModule",{value:!0});D.earthRadius=6371008.8;D.factors={centimeters:100*D.earthRadius,centimetres:100*D.earthRadius,degrees:D.earthRadius/111325,feet:3.28084*D.earthRadius,inches:39.37*D.earthRadius,kilometers:D.earthRadius/1E3,kilometres:D.earthRadius/1E3,meters:D.earthRadius,metres:D.earthRadius,miles:D.earthRadius/1609.344,millimeters:1E3*D.earthRadius,millimetres:1E3*D.earthRadius,
nauticalmiles:D.earthRadius/1852,radians:1,yards:D.earthRadius/1.0936};D.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1E3,millimetres:1E3,nauticalmiles:1/1852,radians:1/D.earthRadius,yards:1/1.0936};D.areaFactors={acres:2.47105E-4,centimeters:1E4,centimetres:1E4,feet:10.763910417,inches:1550.003100006,kilometers:1E-6,kilometres:1E-6,meters:1,metres:1,miles:3.86E-7,millimeters:1E6,
millimetres:1E6,yards:1.195990046};D.feature=n;D.geometry=function(q,t,u){switch(q){case "Point":return m(t).geometry;case "LineString":return h(t).geometry;case "Polygon":return p(t).geometry;case "MultiPoint":return e(t).geometry;case "MultiLineString":return d(t).geometry;case "MultiPolygon":return l(t).geometry;default:throw Error(q+" is invalid");}};D.point=m;D.points=function(q,t,u){void 0===u&&(u={});return a(q.map(function(w){return m(w,t)}),u)};D.polygon=p;D.polygons=function(q,t,u){void 0===
u&&(u={});return a(q.map(function(w){return p(w,t)}),u)};D.lineString=h;D.lineStrings=function(q,t,u){void 0===u&&(u={});return a(q.map(function(w){return h(w,t)}),u)};D.featureCollection=a;D.multiLineString=d;D.multiPoint=e;D.multiPolygon=l;D.geometryCollection=function(q,t,u){void 0===u&&(u={});return n({type:"GeometryCollection",geometries:q},t,u)};D.round=function(q,t){void 0===t&&(t=0);if(t&&!(0<=t))throw Error("precision must be a positive number");t=Math.pow(10,t||0);return Math.round(q*t)/
t};D.radiansToLength=k;D.lengthToRadians=c;D.lengthToDegrees=function(q,t){return f(c(q,t))};D.bearingToAzimuth=function(q){q%=360;0>q&&(q+=360);return q};D.radiansToDegrees=f;D.degreesToRadians=function(q){return q%360*Math.PI/180};D.convertLength=function(q,t,u){void 0===t&&(t="kilometers");void 0===u&&(u="kilometers");if(!(0<=q))throw Error("length must be a positive number");return k(c(q,t),u)};D.convertArea=function(q,t,u){void 0===t&&(t="meters");void 0===u&&(u="kilometers");if(!(0<=q))throw Error("area must be a positive number");
t=D.areaFactors[t];if(!t)throw Error("invalid original units");u=D.areaFactors[u];if(!u)throw Error("invalid final units");return q/t*u};D.isNumber=g;D.isObject=function(q){return!!q&&q.constructor===Object};D.validateBBox=function(q){if(!q)throw Error("bbox is required");if(!Array.isArray(q))throw Error("bbox must be an Array");if(4!==q.length&&6!==q.length)throw Error("bbox must be an Array of 4 or 6 numbers");q.forEach(function(t){if(!g(t))throw Error("bbox must only contain numbers");})};D.validateId=
function(q){if(!q)throw Error("id is required");if(-1===["string","number"].indexOf(typeof q))throw Error("id must be a number or a string");};D.radians2degrees=function(){throw Error("method has been renamed to `radiansToDegrees`");};D.degrees2radians=function(){throw Error("method has been renamed to `degreesToRadians`");};D.distanceToDegrees=function(){throw Error("method has been renamed to `lengthToDegrees`");};D.distanceToRadians=function(){throw Error("method has been renamed to `lengthToRadians`");
};D.radiansToDistance=function(){throw Error("method has been renamed to `radiansToLength`");};D.bearingToAngle=function(){throw Error("method has been renamed to `bearingToAzimuth`");};D.convertDistance=function(){throw Error("method has been renamed to `convertLength`");}},{}],63:[function(b,y,D){function n(k,c,f){if(null!==k){var g,q=0,t;var u=k.type;for(var w="FeatureCollection"===u,x="Feature"===u,E=w?k.features.length:1,F=0;F<E;F++){var z=(t=(g=w?k.features[F].geometry:x?k.geometry:k)?"GeometryCollection"===
g.type:!1)?g.geometries.length:1;for(var B=0;B<z;B++){var C=0,v=0;var G=t?g.geometries[B]:g;if(null!==G){var I=G.coordinates;var J=G.type;var K=!f||"Polygon"!==J&&"MultiPolygon"!==J?0:1;switch(J){case null:break;case "Point":if(!1===c(I,q,F,C,v))return!1;q++;break;case "LineString":case "MultiPoint":for(u=0;u<I.length;u++){if(!1===c(I[u],q,F,C,v))return!1;q++;"MultiPoint"===J&&C++}break;case "Polygon":case "MultiLineString":for(u=0;u<I.length;u++){for(G=0;G<I[u].length-K;G++){if(!1===c(I[u][G],q,
F,C,v))return!1;q++}"MultiLineString"===J&&C++;"Polygon"===J&&v++}break;case "MultiPolygon":for(u=0;u<I.length;u++){for(G=v=0;G<I[u].length;G++){for(J=0;J<I[u][G].length-K;J++){if(!1===c(I[u][G][J],q,F,C,v))return!1;q++}v++}C++}break;case "GeometryCollection":for(u=0;u<G.geometries.length;u++)if(!1===n(G.geometries[u],c,f))return!1;break;default:throw Error("Unknown Geometry Type");}}}}}}function m(k,c){var f;switch(k.type){case "FeatureCollection":for(f=0;f<k.features.length&&!1!==c(k.features[f].properties,
f);f++);break;case "Feature":c(k.properties,0)}}function p(k,c){if("Feature"===k.type)c(k,0);else if("FeatureCollection"===k.type)for(var f=0;f<k.features.length&&!1!==c(k.features[f],f);f++);}function h(k,c){var f,g,q,t,u=0,w="FeatureCollection"===k.type,x="Feature"===k.type,E=w?k.features.length:1;for(f=0;f<E;f++){var F=w?k.features[f].geometry:x?k.geometry:k;var z=w?k.features[f].properties:x?k.properties:{};var B=w?k.features[f].bbox:x?k.bbox:void 0;var C=w?k.features[f].id:x?k.id:void 0;var v=
(t=F?"GeometryCollection"===F.type:!1)?F.geometries.length:1;for(q=0;q<v;q++){var G=t?F.geometries[q]:F;if(null===G){if(!1===c(null,u,z,B,C))return!1}else switch(G.type){case "Point":case "LineString":case "MultiPoint":case "Polygon":case "MultiLineString":case "MultiPolygon":if(!1===c(G,u,z,B,C))return!1;break;case "GeometryCollection":for(g=0;g<G.geometries.length;g++)if(!1===c(G.geometries[g],u,z,B,C))return!1;break;default:throw Error("Unknown Geometry Type");}}u++}}function a(k,c){h(k,function(f,
g,q,t,u){var w=null===f?null:f.type;switch(w){case null:case "Point":case "LineString":case "Polygon":if(!1===c(l.feature(f,q,{bbox:t,id:u}),g,0))return!1;return}switch(w){case "MultiPoint":var x="Point";break;case "MultiLineString":x="LineString";break;case "MultiPolygon":x="Polygon"}for(t=0;t<f.coordinates.length;t++)if(!1===c(l.feature({type:x,coordinates:f.coordinates[t]},q),g,t))return!1})}function d(k,c){a(k,function(f,g,q){var t=0;if(f.geometry){var u=f.geometry.type;if("Point"!==u&&"MultiPoint"!==
u){var w,x=0,E=0,F=0;if(!1===n(f,function(z,B,C,v,G){if(void 0===w||g>x||v>E||G>F)w=z,x=g,E=v,F=G,t=0;else{B=l.lineString([w,z],f.properties);if(!1===c(B,g,q,G,t))return!1;t++;w=z}}))return!1}}})}function e(k,c){if(!k)throw Error("geojson is required");a(k,function(f,g,q){if(null!==f.geometry){var t=f.geometry.coordinates;switch(f.geometry.type){case "LineString":if(!1===c(f,g,q,0,0))return!1;break;case "Polygon":for(var u=0;u<t.length;u++)if(!1===c(l.lineString(t[u],f.properties),g,q,u))return!1}}})}
Object.defineProperty(D,"__esModule",{value:!0});var l=b("@turf/helpers");D.coordEach=n;D.coordReduce=function(k,c,f,g){var q=f;n(k,function(t,u,w,x,E){q=0===u&&void 0===f?t:c(q,t,u,w,x,E)},g);return q};D.propEach=m;D.propReduce=function(k,c,f){var g=f;m(k,function(q,t){g=0===t&&void 0===f?q:c(g,q,t)});return g};D.featureEach=p;D.featureReduce=function(k,c,f){var g=f;p(k,function(q,t){g=0===t&&void 0===f?q:c(g,q,t)});return g};D.coordAll=function(k){var c=[];n(k,function(f){c.push(f)});return c};
D.geomEach=h;D.geomReduce=function(k,c,f){var g=f;h(k,function(q,t,u,w,x){g=0===t&&void 0===f?q:c(g,q,t,u,w,x)});return g};D.flattenEach=a;D.flattenReduce=function(k,c,f){var g=f;a(k,function(q,t,u){g=0===t&&0===u&&void 0===f?q:c(g,q,t,u)});return g};D.segmentEach=d;D.segmentReduce=function(k,c,f){var g=f,q=!1;d(k,function(t,u,w,x,E){g=!1===q&&void 0===f?t:c(g,t,u,w,x,E);q=!0});return g};D.lineEach=e;D.lineReduce=function(k,c,f){var g=f;e(k,function(q,t,u,w){g=0===t&&void 0===f?q:c(g,q,t,u,w)});return g};
D.findSegment=function(k,c){c=c||{};if(!l.isObject(c))throw Error("options is invalid");var f=c.featureIndex||0,g=c.multiFeatureIndex||0,q=c.geometryIndex||0,t=c.segmentIndex||0,u=c.properties;switch(k.type){case "FeatureCollection":0>f&&(f=k.features.length+f);u=u||k.features[f].properties;k=k.features[f].geometry;break;case "Feature":u=u||k.properties;k=k.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");
}if(null===k)return null;f=k.coordinates;switch(k.type){case "Point":case "MultiPoint":return null;case "LineString":return 0>t&&(t=f.length+t-1),l.lineString([f[t],f[t+1]],u,c);case "Polygon":return 0>q&&(q=f.length+q),0>t&&(t=f[q].length+t-1),l.lineString([f[q][t],f[q][t+1]],u,c);case "MultiLineString":return 0>g&&(g=f.length+g),0>t&&(t=f[g].length+t-1),l.lineString([f[g][t],f[g][t+1]],u,c);case "MultiPolygon":return 0>g&&(g=f.length+g),0>q&&(q=f[g].length+q),0>t&&(t=f[g][q].length-t-1),l.lineString([f[g][q][t],
f[g][q][t+1]],u,c)}throw Error("geojson is invalid");};D.findPoint=function(k,c){c=c||{};if(!l.isObject(c))throw Error("options is invalid");var f=c.featureIndex||0,g=c.multiFeatureIndex||0,q=c.geometryIndex||0,t=c.coordIndex||0,u=c.properties;switch(k.type){case "FeatureCollection":0>f&&(f=k.features.length+f);u=u||k.features[f].properties;k=k.features[f].geometry;break;case "Feature":u=u||k.properties;k=k.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;
default:throw Error("geojson is invalid");}if(null===k)return null;f=k.coordinates;switch(k.type){case "Point":return l.point(f,u,c);case "MultiPoint":return 0>g&&(g=f.length+g),l.point(f[g],u,c);case "LineString":return 0>t&&(t=f.length+t),l.point(f[t],u,c);case "Polygon":return 0>q&&(q=f.length+q),0>t&&(t=f[q].length+t),l.point(f[q][t],u,c);case "MultiLineString":return 0>g&&(g=f.length+g),0>t&&(t=f[g].length+t),l.point(f[g][t],u,c);case "MultiPolygon":return 0>g&&(g=f.length+g),0>q&&(q=f[g].length+
q),0>t&&(t=f[g][q].length-t),l.point(f[g][q][t],u,c)}throw Error("geojson is invalid");}},{"@turf/helpers":62}],64:[function(b,y,D){D="undefined"===typeof WeakMap?b("weak-map"):WeakMap;var n=b("gl-buffer"),m=b("gl-vao"),p=new D;y.exports=function(h){var a=p.get(h),d=a&&(a._triangleBuffer.handle||a._triangleBuffer.buffer);d&&h.isBuffer(d)||(d=n(h,new Float32Array([-1,-1,-1,4,4,-1])),a=m(h,[{buffer:d,type:h.FLOAT,size:2}]),a._triangleBuffer=d,p.set(h,a));a.bind();h.drawArrays(h.TRIANGLES,0,3);a.unbind()}},
{"gl-buffer":258,"gl-vao":332,"weak-map":574}],65:[function(b,y,D){y.exports=function(n){var m=0,p=0,h=0,a=0;return n.map(function(d){d=d.slice();var e=d[0],l=e.toUpperCase();if(e!=l)switch(d[0]=l,e){case "a":d[6]+=h;d[7]+=a;break;case "v":d[1]+=a;break;case "h":d[1]+=h;break;default:for(e=1;e<d.length;)d[e++]+=h,d[e++]+=a}switch(l){case "Z":h=m;a=p;break;case "H":h=d[1];break;case "V":a=d[1];break;case "M":h=m=d[1];a=p=d[2];break;default:h=d[d.length-2],a=d[d.length-1]}return d})}},{}],66:[function(b,
y,D){var n=b("pad-left");y.exports=function(m,p,h){p="number"===typeof p?p:1;h=h||": ";m=m.split(/\r?\n/);var a=String(m.length+p-1).length;return m.map(function(d,e){e+=p;return n(e,a-String(e).length)+h+d}).join("\n")}},{"pad-left":476}],67:[function(b,y,D){y.exports=function(m){var p=m.length;if(0===p)return[];if(1===p)return[0];for(var h=m[0].length,a=[m[0]],d=[0],e=1;e<p;++e){a.push(m[e]);a:{var l=a;for(var k=h,c=Array(k+1),f=0;f<l.length;++f)c[f]=l[f];for(f=0;f<=l.length;++f){for(var g=l.length;g<=
k;++g){for(var q=Array(k),t=0;t<k;++t)q[t]=Math.pow(g+1-f,t);c[g]=q}if(n.apply(void 0,c)){l=!0;break a}}l=!1}if(l){if(d.push(e),d.length===h+1)break}else a.pop()}return d};var n=b("robust-orientation")},{"robust-orientation":520}],68:[function(b,y,D){y.exports=function(p,h){return n(h).filter(function(a){for(var d=Array(a.length),e=0;e<a.length;++e)d[e]=h[a[e]];return 1>m(d)*p})};var n=b("delaunay-triangulate"),m=b("circumradius")},{circumradius:119,"delaunay-triangulate":171}],69:[function(b,y,D){y.exports=
function(p,h){return m(n(p,h))};var n=b("alpha-complex"),m=b("simplicial-complex-boundary")},{"alpha-complex":68,"simplicial-complex-boundary":527}],70:[function(b,y,D){y.exports=function(n,m){if(!n||null==n.length)throw Error("Argument should be an array");m=null==m?1:Math.floor(m);for(var p=Array(2*m),h=0;h<m;h++){for(var a=-Infinity,d=Infinity,e=h,l=n.length;e<l;e+=m)n[e]>a&&(a=n[e]),n[e]<d&&(d=n[e]);p[h]=d;p[m+h]=a}return p}},{}],71:[function(b,y,D){var n=b("array-bounds");y.exports=function(m,
p,h){if(!m||null==m.length)throw Error("Argument should be an array");null==p&&(p=1);null==h&&(h=n(m,p));for(var a=0;a<p;a++){var d=h[p+a],e=h[a],l,k=m.length;if(Infinity===d&&-Infinity===e)for(l=a;l<k;l+=p)m[l]=m[l]===d?1:m[l]===e?0:.5;else if(Infinity===d)for(l=a;l<k;l+=p)m[l]=m[l]===d?1:0;else if(-Infinity===e)for(l=a;l<k;l+=p)m[l]=m[l]===e?0:1;else for(d-=e,l=a;l<k;l+=p)isNaN(m[l])||(m[l]=0===d?.5:(m[l]-e)/d)}return m}},{"array-bounds":70}],72:[function(b,y,D){y.exports=function(n,m){var p="number"===
typeof n,h="number"===typeof m;p&&!h?(m=n,n=0):p||h||(m=n=0);n|=0;m=(m|0)-n;if(0>m)throw Error("array length must be positive");p=Array(m);for(h=0;h<m;h++,n++)p[h]=n;return p}},{}],73:[function(b,y,D){(function(n){function m(I,J){if(I===J)return 0;for(var K=I.length,N=J.length,H=0,L=Math.min(K,N);H<L;++H)if(I[H]!==J[H]){K=I[H];N=J[H];break}return K<N?-1:N<K?1:0}function p(I){return n.Buffer&&"function"===typeof n.Buffer.isBuffer?n.Buffer.isBuffer(I):!(null==I||!I._isBuffer)}function h(I){return p(I)||
"function"!==typeof n.ArrayBuffer?!1:"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(I):I?I instanceof DataView||I.buffer&&I.buffer instanceof ArrayBuffer?!0:!1:!1}function a(I){if(E.isFunction(I))return B?I.name:(I=I.toString().match(v))&&I[1]}function d(I,J){return"string"===typeof I?I.length<J?I:I.slice(0,J):I}function e(I){if(B||!E.isFunction(I))return E.inspect(I);I=a(I);return"[Function"+(I?": "+I:"")+"]"}function l(I,J,K,N,H){throw new C.AssertionError({message:K,actual:I,expected:J,
operator:N,stackStartFunction:H});}function k(I,J){I||l(I,!0,J,"\x3d\x3d",C.ok)}function c(I,J,K,N){if(I===J)return!0;if(p(I)&&p(J))return 0===m(I,J);if(E.isDate(I)&&E.isDate(J))return I.getTime()===J.getTime();if(E.isRegExp(I)&&E.isRegExp(J))return I.source===J.source&&I.global===J.global&&I.multiline===J.multiline&&I.lastIndex===J.lastIndex&&I.ignoreCase===J.ignoreCase;if(null!==I&&"object"===typeof I||null!==J&&"object"===typeof J){if(!h(I)||!h(J)||Object.prototype.toString.call(I)!==Object.prototype.toString.call(J)||
I instanceof Float32Array||I instanceof Float64Array){if(p(I)!==p(J))return!1;N=N||{actual:[],expected:[]};var H=N.actual.indexOf(I);if(-1!==H&&H===N.expected.indexOf(J))return!0;N.actual.push(I);N.expected.push(J);return g(I,J,K,N)}return 0===m(new Uint8Array(I.buffer),new Uint8Array(J.buffer))}return K?I===J:I==J}function f(I){return"[object Arguments]"==Object.prototype.toString.call(I)}function g(I,J,K,N){if(null===I||void 0===I||null===J||void 0===J)return!1;if(E.isPrimitive(I)||E.isPrimitive(J))return I===
J;if(K&&Object.getPrototypeOf(I)!==Object.getPrototypeOf(J))return!1;var H=f(I),L=f(J);if(H&&!L||!H&&L)return!1;if(H)return I=z.call(I),J=z.call(J),c(I,J,K);H=G(I);var P=G(J);if(H.length!==P.length)return!1;H.sort();P.sort();for(L=H.length-1;0<=L;L--)if(H[L]!==P[L])return!1;for(L=H.length-1;0<=L;L--)if(P=H[L],!c(I[P],J[P],K,N))return!1;return!0}function q(I,J,K){c(I,J,!0)&&l(I,J,K,"notDeepStrictEqual",q)}function t(I,J){if(!I||!J)return!1;if("[object RegExp]"==Object.prototype.toString.call(J))return J.test(I);
try{if(I instanceof J)return!0}catch(K){}return Error.isPrototypeOf(J)?!1:!0===J.call({},I)}function u(I,J,K,N){if("function"!==typeof J)throw new TypeError('"block" argument must be a function');"string"===typeof K&&(N=K,K=null);try{J()}catch(Q){var H=Q}J=H;N=(K&&K.name?" ("+K.name+").":".")+(N?" "+N:".");I&&!J&&l(J,K,"Missing expected exception"+N);H="string"===typeof N;var L=!I&&E.isError(J),P=!I&&J&&!K;(L&&H&&t(J,K)||P)&&l(J,K,"Got unwanted exception"+N);if(I&&J&&K&&!t(J,K)||!I&&J)throw J;}function w(I,
J){I||l(I,!0,J,"\x3d\x3d",w)}var x=b("object-assign"),E=b("util/"),F=Object.prototype.hasOwnProperty,z=Array.prototype.slice,B=function(){return"foo"===function(){}.name}(),C=y.exports=k,v=/\s*function\s+([^\(\s]*)\s*/;C.AssertionError=function(I){this.name="AssertionError";this.actual=I.actual;this.expected=I.expected;this.operator=I.operator;I.message?(this.message=I.message,this.generatedMessage=!1):(this.message=d(e(this.actual),128)+" "+this.operator+" "+d(e(this.expected),128),this.generatedMessage=
!0);var J=I.stackStartFunction||l;Error.captureStackTrace?Error.captureStackTrace(this,J):(I=Error(),I.stack&&(I=I.stack,J=a(J),J=I.indexOf("\n"+J),0<=J&&(J=I.indexOf("\n",J+1),I=I.substring(J+1)),this.stack=I))};E.inherits(C.AssertionError,Error);C.fail=l;C.ok=k;C.equal=function(I,J,K){I!=J&&l(I,J,K,"\x3d\x3d",C.equal)};C.notEqual=function(I,J,K){I==J&&l(I,J,K,"!\x3d",C.notEqual)};C.deepEqual=function(I,J,K){c(I,J,!1)||l(I,J,K,"deepEqual",C.deepEqual)};C.deepStrictEqual=function(I,J,K){c(I,J,!0)||
l(I,J,K,"deepStrictEqual",C.deepStrictEqual)};C.notDeepEqual=function(I,J,K){c(I,J,!1)&&l(I,J,K,"notDeepEqual",C.notDeepEqual)};C.notDeepStrictEqual=q;C.strictEqual=function(I,J,K){I!==J&&l(I,J,K,"\x3d\x3d\x3d",C.strictEqual)};C.notStrictEqual=function(I,J,K){I===J&&l(I,J,K,"!\x3d\x3d",C.notStrictEqual)};C.throws=function(I,J,K){u(!0,I,J,K)};C.doesNotThrow=function(I,J,K){u(!1,I,J,K)};C.ifError=function(I){if(I)throw I;};C.strict=x(w,C,{equal:C.strictEqual,deepEqual:C.deepStrictEqual,notEqual:C.notStrictEqual,
notDeepEqual:C.notDeepStrictEqual});C.strict.strict=C.strict;var G=Object.keys||function(I){var J=[],K;for(K in I)F.call(I,K)&&J.push(K);return J}}).call(this,"undefined"!==typeof xa?xa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"object-assign":473,"util/":76}],74:[function(b,y,D){y.exports="function"===typeof Object.create?function(n,m){n.super_=m;n.prototype=Object.create(m.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:function(n,m){n.super_=
m;var p=function(){};p.prototype=m.prototype;n.prototype=new p;n.prototype.constructor=n}},{}],75:[function(b,y,D){y.exports=function(n){return n&&"object"===typeof n&&"function"===typeof n.copy&&"function"===typeof n.fill&&"function"===typeof n.readUInt8}},{}],76:[function(b,y,D){(function(n,m){function p(N,H){var L={seen:[],stylize:a};3<=arguments.length&&(L.depth=arguments[2]);4<=arguments.length&&(L.colors=arguments[3]);t(H)?L.showHidden=H:H&&D._extend(L,H);x(L.showHidden)&&(L.showHidden=!1);
x(L.depth)&&(L.depth=2);x(L.colors)&&(L.colors=!1);x(L.customInspect)&&(L.customInspect=!0);L.colors&&(L.stylize=h);return e(L,N,L.depth)}function h(N,H){return(H=p.styles[H])?"["+p.colors[H][0]+"m"+N+"["+p.colors[H][1]+"m":N}function a(N,H){return N}function d(N){var H={};N.forEach(function(L,P){H[L]=!0});return H}function e(N,H,L){if(N.customInspect&&H&&C(H.inspect)&&H.inspect!==D.inspect&&(!H.constructor||H.constructor.prototype!==H)){var P=H.inspect(L,N);w(P)||(P=e(N,P,L));return P}if(P=l(N,
H))return P;var Q=Object.keys(H),S=d(Q);N.showHidden&&(Q=Object.getOwnPropertyNames(H));if(B(H)&&(0<=Q.indexOf("message")||0<=Q.indexOf("description")))return k(H);if(0===Q.length){if(C(H))return N.stylize("[Function"+(H.name?": "+H.name:"")+"]","special");if(E(H))return N.stylize(RegExp.prototype.toString.call(H),"regexp");if(z(H))return N.stylize(Date.prototype.toString.call(H),"date");if(B(H))return k(H)}P="";var O=!1,U=["{","}"];q(H)&&(O=!0,U=["[","]"]);C(H)&&(P=" [Function"+(H.name?": "+H.name:
"")+"]");E(H)&&(P=" "+RegExp.prototype.toString.call(H));z(H)&&(P=" "+Date.prototype.toUTCString.call(H));B(H)&&(P=" "+k(H));if(0===Q.length&&(!O||0==H.length))return U[0]+P+U[1];if(0>L)return E(H)?N.stylize(RegExp.prototype.toString.call(H),"regexp"):N.stylize("[Object]","special");N.seen.push(H);Q=O?c(N,H,L,S,Q):Q.map(function(X){return f(N,H,L,S,X,O)});N.seen.pop();return g(Q,P,U)}function l(N,H){if(x(H))return N.stylize("undefined","undefined");if(w(H))return H="'"+JSON.stringify(H).replace(/^"|"$/g,
"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",N.stylize(H,"string");if(u(H))return N.stylize(""+H,"number");if(t(H))return N.stylize(""+H,"boolean");if(null===H)return N.stylize("null","null")}function k(N){return"["+Error.prototype.toString.call(N)+"]"}function c(N,H,L,P,Q){for(var S=[],O=0,U=H.length;O<U;++O)Object.prototype.hasOwnProperty.call(H,String(O))?S.push(f(N,H,L,P,String(O),!0)):S.push("");Q.forEach(function(X){X.match(/^\d+$/)||S.push(f(N,H,L,P,X,!0))});return S}function f(N,H,L,P,
Q,S){var O,U;H=Object.getOwnPropertyDescriptor(H,Q)||{value:H[Q]};H.get?U=H.set?N.stylize("[Getter/Setter]","special"):N.stylize("[Getter]","special"):H.set&&(U=N.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(P,Q)||(O="["+Q+"]");U||(0>N.seen.indexOf(H.value)?(U=null===L?e(N,H.value,null):e(N,H.value,L-1),-1<U.indexOf("\n")&&(U=S?U.split("\n").map(function(X){return"  "+X}).join("\n").substr(2):"\n"+U.split("\n").map(function(X){return"   "+X}).join("\n"))):U=N.stylize("[Circular]",
"special"));if(x(O)){if(S&&Q.match(/^\d+$/))return U;O=JSON.stringify(""+Q);O.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(O=O.substr(1,O.length-2),O=N.stylize(O,"name")):(O=O.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),O=N.stylize(O,"string"))}return O+": "+U}function g(N,H,L){var P=0;return 60<N.reduce(function(Q,S){P++;0<=S.indexOf("\n")&&P++;return Q+S.replace(/\u001b\[\d\d?m/g,"").length+1},0)?L[0]+(""===H?"":H+"\n ")+" "+N.join(",\n  ")+" "+L[1]:L[0]+H+" "+N.join(", ")+" "+L[1]}
function q(N){return Array.isArray(N)}function t(N){return"boolean"===typeof N}function u(N){return"number"===typeof N}function w(N){return"string"===typeof N}function x(N){return void 0===N}function E(N){return F(N)&&"[object RegExp]"===Object.prototype.toString.call(N)}function F(N){return"object"===typeof N&&null!==N}function z(N){return F(N)&&"[object Date]"===Object.prototype.toString.call(N)}function B(N){return F(N)&&("[object Error]"===Object.prototype.toString.call(N)||N instanceof Error)}
function C(N){return"function"===typeof N}function v(N){return 10>N?"0"+N.toString(10):N.toString(10)}var G=/%[sdj%]/g;D.format=function(N){if(!w(N)){for(var H=[],L=0;L<arguments.length;L++)H.push(p(arguments[L]));return H.join(" ")}L=1;var P=arguments,Q=P.length;H=String(N).replace(G,function(O){if("%%"===O)return"%";if(L>=Q)return O;switch(O){case "%s":return String(P[L++]);case "%d":return Number(P[L++]);case "%j":try{return JSON.stringify(P[L++])}catch(U){return"[Circular]"}default:return O}});
for(var S=P[L];L<Q;S=P[++L])H=null!==S&&F(S)?H+(" "+p(S)):H+(" "+S);return H};D.deprecate=function(N,H){if(x(m.process))return function(){return D.deprecate(N,H).apply(this,arguments)};if(!0===n.noDeprecation)return N;var L=!1;return function(){if(!L){if(n.throwDeprecation)throw Error(H);n.traceDeprecation?console.trace(H):console.error(H);L=!0}return N.apply(this,arguments)}};var I={},J;D.debuglog=function(N){x(J)&&(J=n.env.NODE_DEBUG||"");N=N.toUpperCase();if(!I[N])if((new RegExp("\\b"+N+"\\b",
"i")).test(J)){var H=n.pid;I[N]=function(){var L=D.format.apply(D,arguments);console.error("%s %d: %s",N,H,L)}}else I[N]=function(){};return I[N]};D.inspect=p;p.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};p.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};D.isArray=q;D.isBoolean=
t;D.isNull=function(N){return null===N};D.isNullOrUndefined=function(N){return null==N};D.isNumber=u;D.isString=w;D.isSymbol=function(N){return"symbol"===typeof N};D.isUndefined=x;D.isRegExp=E;D.isObject=F;D.isDate=z;D.isError=B;D.isFunction=C;D.isPrimitive=function(N){return null===N||"boolean"===typeof N||"number"===typeof N||"string"===typeof N||"symbol"===typeof N||"undefined"===typeof N};D.isBuffer=b("./support/isBuffer");var K="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");D.log=
function(){var N=console,H=N.log;var L=new Date;var P=[v(L.getHours()),v(L.getMinutes()),v(L.getSeconds())].join(":");L=[L.getDate(),K[L.getMonth()],P].join(" ");H.call(N,"%s - %s",L,D.format.apply(D,arguments))};D.inherits=b("inherits");D._extend=function(N,H){if(!H||!F(H))return N;for(var L=Object.keys(H),P=L.length;P--;)N[L[P]]=H[L[P]];return N}}).call(this,b("_process"),"undefined"!==typeof xa?xa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":75,_process:500,
inherits:74}],77:[function(b,y,D){y.exports=function(n){return atob(n)}},{}],78:[function(b,y,D){function n(p){for(var h=0,a=0;a<p.length;++a)h+=p[a];return h}y.exports=function(p,h){for(var a=h.length,d=Array(a+1),e=0;e<a;++e){for(var l=Array(a+1),k=0;k<=a;++k)l[k]=p[k][e];d[e]=l}d[a]=Array(a+1);for(e=0;e<=a;++e)d[a][e]=1;p=Array(a+1);for(e=0;e<a;++e)p[e]=h[e];p[a]=1;h=m(d,p);d=n(h[a+1]);0===d&&(d=1);p=Array(a+1);for(e=0;e<=a;++e)p[e]=n(h[e])/d;return p};var m=b("robust-linear-solve")},{"robust-linear-solve":519}],
79:[function(b,y,D){function n(a){var d=a.length;if(0<d%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("\x3d");-1===a&&(a=d);return[a,a===d?0:4-a%4]}D.byteLength=function(a){a=n(a);var d=a[1];return 3*(a[0]+d)/4-d};D.toByteArray=function(a){var d=n(a);var e=d[0];d=d[1];var l=new h(3*(e+d)/4-d),k=0,c=0<d?e-4:e,f;for(f=0;f<c;f+=4)e=p[a.charCodeAt(f)]<<18|p[a.charCodeAt(f+1)]<<12|p[a.charCodeAt(f+2)]<<6|p[a.charCodeAt(f+3)],l[k++]=e>>16&255,l[k++]=e>>8&255,l[k++]=e&255;2===
d&&(e=p[a.charCodeAt(f)]<<2|p[a.charCodeAt(f+1)]>>4,l[k++]=e&255);1===d&&(e=p[a.charCodeAt(f)]<<10|p[a.charCodeAt(f+1)]<<4|p[a.charCodeAt(f+2)]>>2,l[k++]=e>>8&255,l[k++]=e&255);return l};D.fromByteArray=function(a){for(var d=a.length,e=d%3,l=[],k=0,c=d-e;k<c;k+=16383){for(var f=l,g=f.push,q,t=a,u=k+16383>c?c:k+16383,w=[],x=k;x<u;x+=3)q=(t[x]<<16&16711680)+(t[x+1]<<8&65280)+(t[x+2]&255),w.push(m[q>>18&63]+m[q>>12&63]+m[q>>6&63]+m[q&63]);q=w.join("");g.call(f,q)}1===e?(a=a[d-1],l.push(m[a>>2]+m[a<<
4&63]+"\x3d\x3d")):2===e&&(a=(a[d-2]<<8)+a[d-1],l.push(m[a>>10]+m[a>>4&63]+m[a<<2&63]+"\x3d"));return l.join("")};var m=[],p=[],h="undefined"!==typeof Uint8Array?Uint8Array:Array;for(b=0;64>b;++b)m[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b],p["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(b)]=b;p[45]=62;p[95]=63},{}],80:[function(b,y,D){var n=b("./lib/rationalize");y.exports=function(m,p){return n(m[0].mul(p[1]).add(p[0].mul(m[1])),m[1].mul(p[1]))}},
{"./lib/rationalize":90}],81:[function(b,y,D){y.exports=function(n,m){return n[0].mul(m[1]).cmp(m[0].mul(n[1]))}},{}],82:[function(b,y,D){var n=b("./lib/rationalize");y.exports=function(m,p){return n(m[0].mul(p[1]),m[1].mul(p[0]))}},{"./lib/rationalize":90}],83:[function(b,y,D){function n(l,k){if(m(l))return k?e(l,n(k)):[l[0].clone(),l[1].clone()];var c=0;if(p(l))l=l.clone();else if("string"===typeof l)l=a(l);else{if(0===l)return[h(0),h(1)];if(l!==Math.floor(l))for(;l!==Math.floor(l);)l*=Math.pow(2,
256),c-=256;l=h(l)}if(m(k))l.mul(k[1]),k=k[0].clone();else if(p(k))k=k.clone();else if("string"===typeof k)k=a(k);else if(k){if(k!==Math.floor(k))for(;k!==Math.floor(k);)k*=Math.pow(2,256),c+=256;k=h(k)}else k=h(1);0<c?l=l.ushln(c):0>c&&(k=k.ushln(-c));return d(l,k)}var m=b("./is-rat"),p=b("./lib/is-bn"),h=b("./lib/num-to-bn"),a=b("./lib/str-to-bn"),d=b("./lib/rationalize"),e=b("./div");y.exports=n},{"./div":82,"./is-rat":84,"./lib/is-bn":88,"./lib/num-to-bn":89,"./lib/rationalize":90,"./lib/str-to-bn":91}],
84:[function(b,y,D){var n=b("./lib/is-bn");y.exports=function(m){return Array.isArray(m)&&2===m.length&&n(m[0])&&n(m[1])}},{"./lib/is-bn":88}],85:[function(b,y,D){var n=b("bn.js");y.exports=function(m){return m.cmp(new n(0))}},{"bn.js":99}],86:[function(b,y,D){var n=b("./bn-sign");y.exports=function(m){var p=m.length,h=m.words,a=0;if(1===p)a=h[0];else if(2===p)a=h[0]+67108864*h[1];else for(var d=0;d<p;d++)a+=h[d]*Math.pow(67108864,d);return n(m)*a}},{"./bn-sign":85}],87:[function(b,y,D){var n=b("double-bits"),
m=b("bit-twiddle").countTrailingZeros;y.exports=function(p){var h=m(n.lo(p));if(32>h)return h;p=m(n.hi(p));return 20<p?52:p+32}},{"bit-twiddle":97,"double-bits":173}],88:[function(b,y,D){b("bn.js");y.exports=function(n){return n&&"object"===typeof n&&!!n.words}},{"bn.js":99}],89:[function(b,y,D){var n=b("bn.js"),m=b("double-bits");y.exports=function(p){var h=m.exponent(p);return 52>h?new n(p):(new n(p*Math.pow(2,52-h))).ushln(h-52)}},{"bn.js":99,"double-bits":173}],90:[function(b,y,D){var n=b("./num-to-bn"),
m=b("./bn-sign");y.exports=function(p,h){var a=m(p),d=m(h);if(0===a)return[n(0),n(1)];if(0===d)return[n(0),n(0)];0>d&&(p=p.neg(),h=h.neg());a=p.gcd(h);return a.cmpn(1)?[p.div(a),h.div(a)]:[p,h]}},{"./bn-sign":85,"./num-to-bn":89}],91:[function(b,y,D){var n=b("bn.js");y.exports=function(m){return new n(m)}},{"bn.js":99}],92:[function(b,y,D){var n=b("./lib/rationalize");y.exports=function(m,p){return n(m[0].mul(p[0]),m[1].mul(p[1]))}},{"./lib/rationalize":90}],93:[function(b,y,D){var n=b("./lib/bn-sign");
y.exports=function(m){return n(m[0])*n(m[1])}},{"./lib/bn-sign":85}],94:[function(b,y,D){var n=b("./lib/rationalize");y.exports=function(m,p){return n(m[0].mul(p[1]).sub(m[1].mul(p[0])),m[1].mul(p[1]))}},{"./lib/rationalize":90}],95:[function(b,y,D){var n=b("./lib/bn-to-num"),m=b("./lib/ctz");y.exports=function(p){var h=p[0];p=p[1];if(0===h.cmpn(0))return 0;var a=h.abs().divmod(p.abs()),d=n(a.div);a=a.mod;h=h.negative!==p.negative?-1:1;if(0===a.cmpn(0))return h*d;if(d){var e=m(d)+4;p=n(a.ushln(e).divRound(p));
return h*(d+p*Math.pow(2,-e))}d=p.bitLength()-a.bitLength()+53;p=n(a.ushln(d).divRound(p));if(1023>d)return h*p*Math.pow(2,-d);p*=Math.pow(2,-1023);return h*p*Math.pow(2,1023-d)}},{"./lib/bn-to-num":86,"./lib/ctz":87}],96:[function(b,y,D){function n(p,h,a,d,e){p=["function ",p,"(a,l,h,",d.join(","),"){",e?"":"var i\x3d",a?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da[m]"];e?0>h.indexOf("c")?p.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):p.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):
p.push(";if(",h,"){i\x3dm;");a?p.push("l\x3dm+1}else{h\x3dm-1}"):p.push("h\x3dm-1}else{l\x3dm+1}");p.push("}");e?p.push("return -1};"):p.push("return i};");return p.join("")}function m(p,h,a,d){return(new Function([n("A","x"+p+"y",h,["y"],d),n("P","c(x,y)"+p+"0",h,["y","c"],d),"function dispatchBsearch",a,"(a,y,c,l,h){if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dvoid 0)?0:l|0,(h\x3d\x3d\x3dvoid 0)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dvoid 0)?0:c|0,(l\x3d\x3d\x3dvoid 0)?a.length-1:l|0,y)}}return dispatchBsearch",
a].join("")))()}y.exports={ge:m("\x3e\x3d",!1,"GE"),gt:m("\x3e",!1,"GT"),lt:m("\x3c",!0,"LT"),le:m("\x3c\x3d",!0,"LE"),eq:m("-",!0,"EQ",!0)}},{}],97:[function(b,y,D){function n(p){var h=32;(p&=-p)&&h--;p&65535&&(h-=16);p&16711935&&(h-=8);p&252645135&&(h-=4);p&858993459&&(h-=2);p&1431655765&&--h;return h}"use restrict";D.INT_BITS=32;D.INT_MAX=2147483647;D.INT_MIN=-2147483648;D.sign=function(p){return(0<p)-(0>p)};D.abs=function(p){var h=p>>31;return(p^h)-h};D.min=function(p,h){return h^(p^h)&-(p<h)};
D.max=function(p,h){return p^(p^h)&-(p<h)};D.isPow2=function(p){return!(p&p-1)&&!!p};D.log2=function(p){var h=(65535<p)<<4;p>>>=h;var a=(255<p)<<3;p>>>=a;h|=a;a=(15<p)<<2;p>>>=a;h|=a;a=(3<p)<<1;return h|a|p>>>a>>1};D.log10=function(p){return 1E9<=p?9:1E8<=p?8:1E7<=p?7:1E6<=p?6:1E5<=p?5:1E4<=p?4:1E3<=p?3:100<=p?2:10<=p?1:0};D.popCount=function(p){p-=p>>>1&1431655765;p=(p&858993459)+(p>>>2&858993459);return 16843009*(p+(p>>>4)&252645135)>>>24};D.countTrailingZeros=n;D.nextPow2=function(p){p+=0===p;
--p;p|=p>>>1;p|=p>>>2;p|=p>>>4;p|=p>>>8;return(p|p>>>16)+1};D.prevPow2=function(p){p|=p>>>1;p|=p>>>2;p|=p>>>4;p|=p>>>8;p|=p>>>16;return p-(p>>>1)};D.parity=function(p){p^=p>>>16;p^=p>>>8;return 27030>>>((p^p>>>4)&15)&1};var m=Array(256);(function(p){for(var h=0;256>h;++h){var a=h,d=h,e=7;for(a>>>=1;a;a>>>=1)d<<=1,d|=a&1,--e;p[h]=d<<e&255}})(m);D.reverse=function(p){return m[p&255]<<24|m[p>>>8&255]<<16|m[p>>>16&255]<<8|m[p>>>24&255]};D.interleave2=function(p,h){p&=65535;p=(p|p<<8)&16711935;p=(p|p<<
4)&252645135;p=(p|p<<2)&858993459;h&=65535;h=(h|h<<8)&16711935;h=(h|h<<4)&252645135;h=(h|h<<2)&858993459;return(p|p<<1)&1431655765|((h|h<<1)&1431655765)<<1};D.deinterleave2=function(p,h){p=p>>>h&1431655765;p=(p|p>>>1)&858993459;p=(p|p>>>2)&252645135;p=(p|p>>>4)&16711935;return((p|p>>>16)&65535)<<16>>16};D.interleave3=function(p,h,a){p&=1023;p=(p|p<<16)&4278190335;p=(p|p<<8)&251719695;p=(p|p<<4)&3272356035;h&=1023;h=(h|h<<16)&4278190335;h=(h|h<<8)&251719695;h=(h|h<<4)&3272356035;a&=1023;a=(a|a<<16)&
4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;return(p|p<<2)&1227133513|((h|h<<2)&1227133513)<<1|((a|a<<2)&1227133513)<<2};D.deinterleave3=function(p,h){p=p>>>h&1227133513;p=(p|p>>>2)&3272356035;p=(p|p>>>4)&251719695;p=(p|p>>>8)&4278190335;return((p|p>>>16)&1023)<<22>>22};D.nextCombination=function(p){var h=p|p-1;return h+1|(~h&-~h)-1>>>n(p)+1}},{}],98:[function(b,y,D){function n(a,d,e,l,k,c,f){for(var g=0;g<d;g++){for(var q=0;q<e;q++)l[q]=a[q*d+g];m(l,k,c,f,e);for(q=0;q<e;q++)a[q*d+g]=k[q]}for(q=
0;q<e;q++){for(g=0;g<d;g++)l[g]=a[q*d+g];m(l,k,c,f,d);for(g=0;g<d;g++)a[q*d+g]=Math.sqrt(k[g])}}function m(a,d,e,l,k){e[0]=0;l[0]=-h;l[1]=+h;for(var c=1,f=0;c<k;c++){for(var g=(a[c]+c*c-(a[e[f]]+e[f]*e[f]))/(2*c-2*e[f]);g<=l[f];)f--,g=(a[c]+c*c-(a[e[f]]+e[f]*e[f]))/(2*c-2*e[f]);f++;e[f]=c;l[f]=g;l[f+1]=+h}for(f=c=0;c<k;c++){for(;l[f+1]<c;)f++;d[c]=(c-e[f])*(c-e[f])+a[e[f]]}}var p=b("clamp");y.exports=function(a,d){d||(d={});var e=null==d.cutoff?.25:d.cutoff,l=null==d.radius?8:d.radius,k=d.channel||
0;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!d.width||!d.height)throw Error("For raw data width and height should be provided by options");var c=d.width;var f=d.height;var g=a;var q=d.stride?d.stride:Math.floor(a.length/c/f)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(f=a,g=f.getContext("2d"),c=f.width,f=f.height,g=g.getImageData(0,0,c,f),g=g.data,q=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(f=a.canvas,c=f.width,f=f.height,g=a.getImageData(0,
0,c,f),g=g.data,q=4):window.ImageData&&a instanceof window.ImageData&&(c=a.width,f=a.height,g=a.data,q=4);var t=Math.max(c,f);if(window.Uint8ClampedArray&&g instanceof window.Uint8ClampedArray||window.Uint8Array&&g instanceof window.Uint8Array){var u=g;g=Array(c*f);a=0;for(d=u.length;a<d;a++)g[a]=u[a*q+k]/255}else if(1!==q)throw Error("Raw data can have only 1 value per pixel");k=Array(c*f);q=Array(c*f);u=Array(t);var w=Array(t),x=Array(t+1);t=Array(t);a=0;for(d=c*f;a<d;a++){var E=g[a];k[a]=1===E?
0:0===E?h:Math.pow(Math.max(0,.5-E),2);q[a]=1===E?h:0===E?0:Math.pow(Math.max(0,E-.5),2)}n(k,c,f,u,w,t,x);n(q,c,f,u,w,t,x);g=window.Float32Array?new Float32Array(c*f):Array(c*f);a=0;for(d=c*f;a<d;a++)g[a]=p(1-((k[a]-q[a])/l+e),0,1);return g};var h=1E20},{clamp:120}],99:[function(b,y,D){(function(n,m){function p(v,G){if(!v)throw Error(G||"Assertion failed");}function h(v,G){v.super_=G;var I=function(){};I.prototype=G.prototype;v.prototype=new I;v.prototype.constructor=v}function a(v,G,I){if(a.isBN(v))return v;
this.negative=0;this.words=null;this.length=0;this.red=null;if(null!==v){if("le"===G||"be"===G)I=G,G=10;this._init(v||0,G||10,I||"be")}}function d(v,G,I){var J=0;for(I=Math.min(v.length,I);G<I;G++){var K=v.charCodeAt(G)-48;J<<=4;J=49<=K&&54>=K?J|K-49+10:17<=K&&22>=K?J|K-17+10:J|K&15}return J}function e(v,G,I,J){var K=0;for(I=Math.min(v.length,I);G<I;G++){var N=v.charCodeAt(G)-48;K*=J;K=49<=N?K+(N-49+10):17<=N?K+(N-17+10):K+N}return K}function l(v,G,I){I.negative=G.negative^v.negative;var J=v.length+
G.length|0;I.length=J;J=J-1|0;var K=v.words[0]|0,N=G.words[0]|0;K*=N;var H=K/67108864|0;I.words[0]=K&67108863;for(var L=1;L<J;L++){var P=H>>>26,Q=H&67108863;H=Math.min(L,G.length-1);for(var S=Math.max(0,L-v.length+1);S<=H;S++)K=v.words[L-S|0]|0,N=G.words[S]|0,K=K*N+Q,P+=K/67108864|0,Q=K&67108863;I.words[L]=Q|0;H=P|0}0!==H?I.words[L]=H|0:I.length--;return I.strip()}function k(v,G){this.x=v;this.y=G}function c(v,G){this.name=v;this.p=new a(G,16);this.n=this.p.bitLength();this.k=(new a(1)).iushln(this.n).isub(this.p);
this.tmp=this._tmp()}function f(){c.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function g(){c.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function q(){c.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function t(){c.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function u(v){"string"===typeof v?(v=a._prime(v),this.m=v.p,this.prime=v):(p(v.gtn(1),
"modulus must be greater than 1"),this.m=v,this.prime=null)}function w(v){u.call(this,v);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=26-this.shift%26);this.r=(new a(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof n?n.exports=a:m.BN=a;a.BN=a;a.wordSize=26;try{var x=b("buffer").Buffer}catch(v){}a.isBN=function(v){return v instanceof
a?!0:null!==v&&"object"===typeof v&&v.constructor.wordSize===a.wordSize&&Array.isArray(v.words)};a.max=function(v,G){return 0<v.cmp(G)?v:G};a.min=function(v,G){return 0>v.cmp(G)?v:G};a.prototype._init=function(v,G,I){if("number"===typeof v)return this._initNumber(v,G,I);if("object"===typeof v)return this._initArray(v,G,I);"hex"===G&&(G=16);p(G===(G|0)&&2<=G&&36>=G);v=v.toString().replace(/\s+/g,"");var J=0;"-"===v[0]&&J++;16===G?this._parseHex(v,J):this._parseBase(v,G,J);"-"===v[0]&&(this.negative=
1);this.strip();"le"===I&&this._initArray(this.toArray(),G,I)};a.prototype._initNumber=function(v,G,I){0>v&&(this.negative=1,v=-v);67108864>v?(this.words=[v&67108863],this.length=1):4503599627370496>v?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(p(9007199254740992>v),this.words=[v&67108863,v/67108864&67108863,1],this.length=3);"le"===I&&this._initArray(this.toArray(),G,I)};a.prototype._initArray=function(v,G,I){p("number"===typeof v.length);if(0>=v.length)return this.words=[0],this.length=
1,this;this.length=Math.ceil(v.length/3);this.words=Array(this.length);for(G=0;G<this.length;G++)this.words[G]=0;var J=0;if("be"===I)for(G=v.length-1,I=0;0<=G;G-=3){var K=v[G]|v[G-1]<<8|v[G-2]<<16;this.words[I]|=K<<J&67108863;this.words[I+1]=K>>>26-J&67108863;J+=24;26<=J&&(J-=26,I++)}else if("le"===I)for(I=G=0;G<v.length;G+=3)K=v[G]|v[G+1]<<8|v[G+2]<<16,this.words[I]|=K<<J&67108863,this.words[I+1]=K>>>26-J&67108863,J+=24,26<=J&&(J-=26,I++);return this.strip()};a.prototype._parseHex=function(v,G){this.length=
Math.ceil((v.length-G)/6);this.words=Array(this.length);for(var I=0;I<this.length;I++)this.words[I]=0;var J,K=0;I=v.length-6;for(J=0;I>=G;I-=6){var N=d(v,I,I+6);this.words[J]|=N<<K&67108863;this.words[J+1]|=N>>>26-K&4194303;K+=24;26<=K&&(K-=26,J++)}I+6!==G&&(N=d(v,G,I+6),this.words[J]|=N<<K&67108863,this.words[J+1]|=N>>>26-K&4194303);this.strip()};a.prototype._parseBase=function(v,G,I){this.words=[0];this.length=1;for(var J=0,K=1;67108863>=K;K*=G)J++;J--;K=K/G|0;var N=v.length-I,H=N%J;N=Math.min(N,
N-H)+I;for(var L=I;L<N;L+=J)I=e(v,L,L+J,G),this.imuln(K),67108864>this.words[0]+I?this.words[0]+=I:this._iaddn(I);if(0!==H){J=1;I=e(v,L,v.length,G);for(L=0;L<H;L++)J*=G;this.imuln(J);67108864>this.words[0]+I?this.words[0]+=I:this._iaddn(I)}};a.prototype.copy=function(v){v.words=Array(this.length);for(var G=0;G<this.length;G++)v.words[G]=this.words[G];v.length=this.length;v.negative=this.negative;v.red=this.red};a.prototype.clone=function(){var v=new a(null);this.copy(v);return v};a.prototype._expand=
function(v){for(;this.length<v;)this.words[this.length++]=0;return this};a.prototype.strip=function(){for(;1<this.length&&0===this.words[this.length-1];)this.length--;return this._normSign()};a.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};a.prototype.inspect=function(){return(this.red?"\x3cBN-R: ":"\x3cBN: ")+this.toString(16)+"\x3e"};var E=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
F=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],z=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(v,G){v=v||10;G=G|0||1;if(16===v||"hex"===v){var I="";for(var J=v=0,K=0;K<this.length;K++){var N=
this.words[K],H=((N<<v|J)&16777215).toString(16);J=N>>>24-v&16777215;I=0!==J||K!==this.length-1?E[6-H.length]+H+I:H+I;v+=2;26<=v&&(v-=26,K--)}for(0!==J&&(I=J.toString(16)+I);0!==I.length%G;)I="0"+I;0!==this.negative&&(I="-"+I);return I}if(v===(v|0)&&2<=v&&36>=v){J=F[v];K=z[v];I="";N=this.clone();for(N.negative=0;!N.isZero();)H=N.modn(K).toString(v),N=N.idivn(K),I=N.isZero()?H+I:E[J-H.length]+H+I;for(this.isZero()&&(I="0"+I);0!==I.length%G;)I="0"+I;0!==this.negative&&(I="-"+I);return I}p(!1,"Base should be between 2 and 36")};
a.prototype.toNumber=function(){var v=this.words[0];2===this.length?v+=67108864*this.words[1]:3===this.length&&1===this.words[2]?v+=4503599627370496+67108864*this.words[1]:2<this.length&&p(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-v:v};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(v,G){p("undefined"!==typeof x);return this.toArrayLike(x,v,G)};a.prototype.toArray=function(v,G){return this.toArrayLike(Array,v,G)};a.prototype.toArrayLike=
function(v,G,I){var J=this.byteLength();I=I||Math.max(1,J);p(J<=I,"byte array longer than desired length");p(0<I,"Requested array length \x3c\x3d 0");this.strip();var K="le"===G;v=new v(I);G=this.clone();if(K){for(K=0;!G.isZero();K++)J=G.andln(255),G.iushrn(8),v[K]=J;for(;K<I;K++)v[K]=0}else{for(K=0;K<I-J;K++)v[K]=0;for(K=0;!G.isZero();K++)J=G.andln(255),G.iushrn(8),v[I-K-1]=J}return v};a.prototype._countBits=Math.clz32?function(v){return 32-Math.clz32(v)}:function(v){var G=0;4096<=v&&(G+=13,v>>>=
13);64<=v&&(G+=7,v>>>=7);8<=v&&(G+=4,v>>>=4);2<=v&&(G+=2,v>>>=2);return G+v};a.prototype._zeroBits=function(v){if(0===v)return 26;var G=0;0===(v&8191)&&(G+=13,v>>>=13);0===(v&127)&&(G+=7,v>>>=7);0===(v&15)&&(G+=4,v>>>=4);0===(v&3)&&(G+=2,v>>>=2);0===(v&1)&&G++;return G};a.prototype.bitLength=function(){var v=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+v};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,G=0;G<this.length;G++){var I=this._zeroBits(this.words[G]);
v+=I;if(26!==I)break}return v};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(v){return 0!==this.negative?this.abs().inotn(v).iaddn(1):this.clone()};a.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()};a.prototype.isNeg=function(){return 0!==this.negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};a.prototype.iuor=
function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var G=0;G<v.length;G++)this.words[G]|=v.words[G];return this.strip()};a.prototype.ior=function(v){p(0===(this.negative|v.negative));return this.iuor(v)};a.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)};a.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)};a.prototype.iuand=function(v){var G=this.length>v.length?v:this;for(var I=0;I<G.length;I++)this.words[I]&=
v.words[I];this.length=G.length;return this.strip()};a.prototype.iand=function(v){p(0===(this.negative|v.negative));return this.iuand(v)};a.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)};a.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)};a.prototype.iuxor=function(v){if(this.length>v.length)var G=this;else G=v,v=this;for(var I=0;I<v.length;I++)this.words[I]=G.words[I]^v.words[I];if(this!==G)for(;I<
G.length;I++)this.words[I]=G.words[I];this.length=G.length;return this.strip()};a.prototype.ixor=function(v){p(0===(this.negative|v.negative));return this.iuxor(v)};a.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)};a.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)};a.prototype.inotn=function(v){p("number"===typeof v&&0<=v);var G=Math.ceil(v/26)|0;v%=26;this._expand(G);0<v&&G--;for(var I=0;I<G;I++)this.words[I]=
~this.words[I]&67108863;0<v&&(this.words[I]=~this.words[I]&67108863>>26-v);return this.strip()};a.prototype.notn=function(v){return this.clone().inotn(v)};a.prototype.setn=function(v,G){p("number"===typeof v&&0<=v);var I=v/26|0;v%=26;this._expand(I+1);this.words[I]=G?this.words[I]|1<<v:this.words[I]&~(1<<v);return this.strip()};a.prototype.iadd=function(v){if(0!==this.negative&&0===v.negative)return this.negative=0,this.isub(v),this.negative^=1,this._normSign();if(0===this.negative&&0!==v.negative){v.negative=
0;var G=this.isub(v);v.negative=1;return G._normSign()}if(this.length>v.length)var I=this;else I=v,v=this;for(var J=G=0;J<v.length;J++)G=(I.words[J]|0)+(v.words[J]|0)+G,this.words[J]=G&67108863,G>>>=26;for(;0!==G&&J<I.length;J++)G=(I.words[J]|0)+G,this.words[J]=G&67108863,G>>>=26;this.length=I.length;if(0!==G)this.words[this.length]=G,this.length++;else if(I!==this)for(;J<I.length;J++)this.words[J]=I.words[J];return this};a.prototype.add=function(v){if(0!==v.negative&&0===this.negative){v.negative=
0;var G=this.sub(v);v.negative^=1;return G}return 0===v.negative&&0!==this.negative?(this.negative=0,G=v.sub(this),this.negative=1,G):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)};a.prototype.isub=function(v){if(0!==v.negative){v.negative=0;var G=this.iadd(v);v.negative=1;return G._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();G=this.cmp(v);if(0===G)return this.negative=0,this.length=1,this.words[0]=0,this;if(0<G)var I=this;
else I=v,v=this;for(var J=0,K=0;K<v.length;K++)G=(I.words[K]|0)-(v.words[K]|0)+J,J=G>>26,this.words[K]=G&67108863;for(;0!==J&&K<I.length;K++)G=(I.words[K]|0)+J,J=G>>26,this.words[K]=G&67108863;if(0===J&&K<I.length&&I!==this)for(;K<I.length;K++)this.words[K]=I.words[K];this.length=Math.max(this.length,K);I!==this&&(this.negative=1);return this.strip()};a.prototype.sub=function(v){return this.clone().isub(v)};var B=function(v,G,I){var J=v.words,K=G.words,N=I.words,H=0,L=J[0]|0,P=L&8191,Q=L>>>13,S=J[1]|
0;L=S&8191;var O=S>>>13,U=J[2]|0;S=U&8191;var X=U>>>13,da=J[3]|0;U=da&8191;var ea=da>>>13,ca=J[4]|0;da=ca&8191;var ia=ca>>>13,ha=J[5]|0;ca=ha&8191;var fa=ha>>>13,na=J[6]|0;ha=na&8191;var sa=na>>>13,ua=J[7]|0;na=ua&8191;var ta=ua>>>13,oa=J[8]|0;ua=oa&8191;oa>>>=13;var va=J[9]|0;J=va&8191;va>>>=13;var ma=K[0]|0,pa=ma&8191,za=ma>>>13,qa=K[1]|0;ma=qa&8191;var Ca=qa>>>13,Ka=K[2]|0;qa=Ka&8191;var Oa=Ka>>>13,kb=K[3]|0;Ka=kb&8191;var mb=kb>>>13,tb=K[4]|0;kb=tb&8191;var nb=tb>>>13,Ta=K[5]|0;tb=Ta&8191;var fb=
Ta>>>13,ab=K[6]|0;Ta=ab&8191;var ra=ab>>>13,Ea=K[7]|0;ab=Ea&8191;var Ia=Ea>>>13,Va=K[8]|0;Ea=Va&8191;Va>>>=13;var rb=K[9]|0;K=rb&8191;rb>>>=13;I.negative=v.negative^G.negative;I.length=19;var ib=Math.imul(P,pa);v=Math.imul(P,za);v=v+Math.imul(Q,pa)|0;G=Math.imul(Q,za);var Na=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(Na>>>26)|0;Na&=67108863;ib=Math.imul(L,pa);v=Math.imul(L,za);v=v+Math.imul(O,pa)|0;G=Math.imul(O,za);ib=ib+Math.imul(P,ma)|0;v=v+Math.imul(P,Ca)|0;v=v+Math.imul(Q,ma)|0;G=G+Math.imul(Q,
Ca)|0;var Za=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(Za>>>26)|0;Za&=67108863;ib=Math.imul(S,pa);v=Math.imul(S,za);v=v+Math.imul(X,pa)|0;G=Math.imul(X,za);ib=ib+Math.imul(L,ma)|0;v=v+Math.imul(L,Ca)|0;v=v+Math.imul(O,ma)|0;G=G+Math.imul(O,Ca)|0;ib=ib+Math.imul(P,qa)|0;v=v+Math.imul(P,Oa)|0;v=v+Math.imul(Q,qa)|0;G=G+Math.imul(Q,Oa)|0;var eb=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(eb>>>26)|0;eb&=67108863;ib=Math.imul(U,pa);v=Math.imul(U,za);v=v+Math.imul(ea,pa)|0;G=Math.imul(ea,za);ib=ib+Math.imul(S,
ma)|0;v=v+Math.imul(S,Ca)|0;v=v+Math.imul(X,ma)|0;G=G+Math.imul(X,Ca)|0;ib=ib+Math.imul(L,qa)|0;v=v+Math.imul(L,Oa)|0;v=v+Math.imul(O,qa)|0;G=G+Math.imul(O,Oa)|0;ib=ib+Math.imul(P,Ka)|0;v=v+Math.imul(P,mb)|0;v=v+Math.imul(Q,Ka)|0;G=G+Math.imul(Q,mb)|0;var Ba=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(Ba>>>26)|0;Ba&=67108863;ib=Math.imul(da,pa);v=Math.imul(da,za);v=v+Math.imul(ia,pa)|0;G=Math.imul(ia,za);ib=ib+Math.imul(U,ma)|0;v=v+Math.imul(U,Ca)|0;v=v+Math.imul(ea,ma)|0;G=G+Math.imul(ea,Ca)|0;ib=
ib+Math.imul(S,qa)|0;v=v+Math.imul(S,Oa)|0;v=v+Math.imul(X,qa)|0;G=G+Math.imul(X,Oa)|0;ib=ib+Math.imul(L,Ka)|0;v=v+Math.imul(L,mb)|0;v=v+Math.imul(O,Ka)|0;G=G+Math.imul(O,mb)|0;ib=ib+Math.imul(P,kb)|0;v=v+Math.imul(P,nb)|0;v=v+Math.imul(Q,kb)|0;G=G+Math.imul(Q,nb)|0;var Ma=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(Ma>>>26)|0;Ma&=67108863;ib=Math.imul(ca,pa);v=Math.imul(ca,za);v=v+Math.imul(fa,pa)|0;G=Math.imul(fa,za);ib=ib+Math.imul(da,ma)|0;v=v+Math.imul(da,Ca)|0;v=v+Math.imul(ia,ma)|0;G=G+Math.imul(ia,
Ca)|0;ib=ib+Math.imul(U,qa)|0;v=v+Math.imul(U,Oa)|0;v=v+Math.imul(ea,qa)|0;G=G+Math.imul(ea,Oa)|0;ib=ib+Math.imul(S,Ka)|0;v=v+Math.imul(S,mb)|0;v=v+Math.imul(X,Ka)|0;G=G+Math.imul(X,mb)|0;ib=ib+Math.imul(L,kb)|0;v=v+Math.imul(L,nb)|0;v=v+Math.imul(O,kb)|0;G=G+Math.imul(O,nb)|0;ib=ib+Math.imul(P,tb)|0;v=v+Math.imul(P,fb)|0;v=v+Math.imul(Q,tb)|0;G=G+Math.imul(Q,fb)|0;var $a=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+($a>>>26)|0;$a&=67108863;ib=Math.imul(ha,pa);v=Math.imul(ha,za);v=v+Math.imul(sa,pa)|
0;G=Math.imul(sa,za);ib=ib+Math.imul(ca,ma)|0;v=v+Math.imul(ca,Ca)|0;v=v+Math.imul(fa,ma)|0;G=G+Math.imul(fa,Ca)|0;ib=ib+Math.imul(da,qa)|0;v=v+Math.imul(da,Oa)|0;v=v+Math.imul(ia,qa)|0;G=G+Math.imul(ia,Oa)|0;ib=ib+Math.imul(U,Ka)|0;v=v+Math.imul(U,mb)|0;v=v+Math.imul(ea,Ka)|0;G=G+Math.imul(ea,mb)|0;ib=ib+Math.imul(S,kb)|0;v=v+Math.imul(S,nb)|0;v=v+Math.imul(X,kb)|0;G=G+Math.imul(X,nb)|0;ib=ib+Math.imul(L,tb)|0;v=v+Math.imul(L,fb)|0;v=v+Math.imul(O,tb)|0;G=G+Math.imul(O,fb)|0;ib=ib+Math.imul(P,Ta)|
0;v=v+Math.imul(P,ra)|0;v=v+Math.imul(Q,Ta)|0;G=G+Math.imul(Q,ra)|0;var lb=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(lb>>>26)|0;lb&=67108863;ib=Math.imul(na,pa);v=Math.imul(na,za);v=v+Math.imul(ta,pa)|0;G=Math.imul(ta,za);ib=ib+Math.imul(ha,ma)|0;v=v+Math.imul(ha,Ca)|0;v=v+Math.imul(sa,ma)|0;G=G+Math.imul(sa,Ca)|0;ib=ib+Math.imul(ca,qa)|0;v=v+Math.imul(ca,Oa)|0;v=v+Math.imul(fa,qa)|0;G=G+Math.imul(fa,Oa)|0;ib=ib+Math.imul(da,Ka)|0;v=v+Math.imul(da,mb)|0;v=v+Math.imul(ia,Ka)|0;G=G+Math.imul(ia,mb)|
0;ib=ib+Math.imul(U,kb)|0;v=v+Math.imul(U,nb)|0;v=v+Math.imul(ea,kb)|0;G=G+Math.imul(ea,nb)|0;ib=ib+Math.imul(S,tb)|0;v=v+Math.imul(S,fb)|0;v=v+Math.imul(X,tb)|0;G=G+Math.imul(X,fb)|0;ib=ib+Math.imul(L,Ta)|0;v=v+Math.imul(L,ra)|0;v=v+Math.imul(O,Ta)|0;G=G+Math.imul(O,ra)|0;ib=ib+Math.imul(P,ab)|0;v=v+Math.imul(P,Ia)|0;v=v+Math.imul(Q,ab)|0;G=G+Math.imul(Q,Ia)|0;var Ra=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(Ra>>>26)|0;Ra&=67108863;ib=Math.imul(ua,pa);v=Math.imul(ua,za);v=v+Math.imul(oa,pa)|0;
G=Math.imul(oa,za);ib=ib+Math.imul(na,ma)|0;v=v+Math.imul(na,Ca)|0;v=v+Math.imul(ta,ma)|0;G=G+Math.imul(ta,Ca)|0;ib=ib+Math.imul(ha,qa)|0;v=v+Math.imul(ha,Oa)|0;v=v+Math.imul(sa,qa)|0;G=G+Math.imul(sa,Oa)|0;ib=ib+Math.imul(ca,Ka)|0;v=v+Math.imul(ca,mb)|0;v=v+Math.imul(fa,Ka)|0;G=G+Math.imul(fa,mb)|0;ib=ib+Math.imul(da,kb)|0;v=v+Math.imul(da,nb)|0;v=v+Math.imul(ia,kb)|0;G=G+Math.imul(ia,nb)|0;ib=ib+Math.imul(U,tb)|0;v=v+Math.imul(U,fb)|0;v=v+Math.imul(ea,tb)|0;G=G+Math.imul(ea,fb)|0;ib=ib+Math.imul(S,
Ta)|0;v=v+Math.imul(S,ra)|0;v=v+Math.imul(X,Ta)|0;G=G+Math.imul(X,ra)|0;ib=ib+Math.imul(L,ab)|0;v=v+Math.imul(L,Ia)|0;v=v+Math.imul(O,ab)|0;G=G+Math.imul(O,Ia)|0;ib=ib+Math.imul(P,Ea)|0;v=v+Math.imul(P,Va)|0;v=v+Math.imul(Q,Ea)|0;G=G+Math.imul(Q,Va)|0;var jb=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(jb>>>26)|0;jb&=67108863;ib=Math.imul(J,pa);v=Math.imul(J,za);v=v+Math.imul(va,pa)|0;G=Math.imul(va,za);ib=ib+Math.imul(ua,ma)|0;v=v+Math.imul(ua,Ca)|0;v=v+Math.imul(oa,ma)|0;G=G+Math.imul(oa,Ca)|0;ib=
ib+Math.imul(na,qa)|0;v=v+Math.imul(na,Oa)|0;v=v+Math.imul(ta,qa)|0;G=G+Math.imul(ta,Oa)|0;ib=ib+Math.imul(ha,Ka)|0;v=v+Math.imul(ha,mb)|0;v=v+Math.imul(sa,Ka)|0;G=G+Math.imul(sa,mb)|0;ib=ib+Math.imul(ca,kb)|0;v=v+Math.imul(ca,nb)|0;v=v+Math.imul(fa,kb)|0;G=G+Math.imul(fa,nb)|0;ib=ib+Math.imul(da,tb)|0;v=v+Math.imul(da,fb)|0;v=v+Math.imul(ia,tb)|0;G=G+Math.imul(ia,fb)|0;ib=ib+Math.imul(U,Ta)|0;v=v+Math.imul(U,ra)|0;v=v+Math.imul(ea,Ta)|0;G=G+Math.imul(ea,ra)|0;ib=ib+Math.imul(S,ab)|0;v=v+Math.imul(S,
Ia)|0;v=v+Math.imul(X,ab)|0;G=G+Math.imul(X,Ia)|0;ib=ib+Math.imul(L,Ea)|0;v=v+Math.imul(L,Va)|0;v=v+Math.imul(O,Ea)|0;G=G+Math.imul(O,Va)|0;ib=ib+Math.imul(P,K)|0;v=v+Math.imul(P,rb)|0;v=v+Math.imul(Q,K)|0;G=G+Math.imul(Q,rb)|0;P=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(P>>>26)|0;P&=67108863;ib=Math.imul(J,ma);v=Math.imul(J,Ca);v=v+Math.imul(va,ma)|0;G=Math.imul(va,Ca);ib=ib+Math.imul(ua,qa)|0;v=v+Math.imul(ua,Oa)|0;v=v+Math.imul(oa,qa)|0;G=G+Math.imul(oa,Oa)|0;ib=ib+Math.imul(na,Ka)|0;v=v+Math.imul(na,
mb)|0;v=v+Math.imul(ta,Ka)|0;G=G+Math.imul(ta,mb)|0;ib=ib+Math.imul(ha,kb)|0;v=v+Math.imul(ha,nb)|0;v=v+Math.imul(sa,kb)|0;G=G+Math.imul(sa,nb)|0;ib=ib+Math.imul(ca,tb)|0;v=v+Math.imul(ca,fb)|0;v=v+Math.imul(fa,tb)|0;G=G+Math.imul(fa,fb)|0;ib=ib+Math.imul(da,Ta)|0;v=v+Math.imul(da,ra)|0;v=v+Math.imul(ia,Ta)|0;G=G+Math.imul(ia,ra)|0;ib=ib+Math.imul(U,ab)|0;v=v+Math.imul(U,Ia)|0;v=v+Math.imul(ea,ab)|0;G=G+Math.imul(ea,Ia)|0;ib=ib+Math.imul(S,Ea)|0;v=v+Math.imul(S,Va)|0;v=v+Math.imul(X,Ea)|0;G=G+Math.imul(X,
Va)|0;ib=ib+Math.imul(L,K)|0;v=v+Math.imul(L,rb)|0;v=v+Math.imul(O,K)|0;G=G+Math.imul(O,rb)|0;L=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(L>>>26)|0;L&=67108863;ib=Math.imul(J,qa);v=Math.imul(J,Oa);v=v+Math.imul(va,qa)|0;G=Math.imul(va,Oa);ib=ib+Math.imul(ua,Ka)|0;v=v+Math.imul(ua,mb)|0;v=v+Math.imul(oa,Ka)|0;G=G+Math.imul(oa,mb)|0;ib=ib+Math.imul(na,kb)|0;v=v+Math.imul(na,nb)|0;v=v+Math.imul(ta,kb)|0;G=G+Math.imul(ta,nb)|0;ib=ib+Math.imul(ha,tb)|0;v=v+Math.imul(ha,fb)|0;v=v+Math.imul(sa,tb)|0;G=
G+Math.imul(sa,fb)|0;ib=ib+Math.imul(ca,Ta)|0;v=v+Math.imul(ca,ra)|0;v=v+Math.imul(fa,Ta)|0;G=G+Math.imul(fa,ra)|0;ib=ib+Math.imul(da,ab)|0;v=v+Math.imul(da,Ia)|0;v=v+Math.imul(ia,ab)|0;G=G+Math.imul(ia,Ia)|0;ib=ib+Math.imul(U,Ea)|0;v=v+Math.imul(U,Va)|0;v=v+Math.imul(ea,Ea)|0;G=G+Math.imul(ea,Va)|0;ib=ib+Math.imul(S,K)|0;v=v+Math.imul(S,rb)|0;v=v+Math.imul(X,K)|0;G=G+Math.imul(X,rb)|0;S=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(S>>>26)|0;S&=67108863;ib=Math.imul(J,Ka);v=Math.imul(J,mb);v=v+Math.imul(va,
Ka)|0;G=Math.imul(va,mb);ib=ib+Math.imul(ua,kb)|0;v=v+Math.imul(ua,nb)|0;v=v+Math.imul(oa,kb)|0;G=G+Math.imul(oa,nb)|0;ib=ib+Math.imul(na,tb)|0;v=v+Math.imul(na,fb)|0;v=v+Math.imul(ta,tb)|0;G=G+Math.imul(ta,fb)|0;ib=ib+Math.imul(ha,Ta)|0;v=v+Math.imul(ha,ra)|0;v=v+Math.imul(sa,Ta)|0;G=G+Math.imul(sa,ra)|0;ib=ib+Math.imul(ca,ab)|0;v=v+Math.imul(ca,Ia)|0;v=v+Math.imul(fa,ab)|0;G=G+Math.imul(fa,Ia)|0;ib=ib+Math.imul(da,Ea)|0;v=v+Math.imul(da,Va)|0;v=v+Math.imul(ia,Ea)|0;G=G+Math.imul(ia,Va)|0;ib=ib+
Math.imul(U,K)|0;v=v+Math.imul(U,rb)|0;v=v+Math.imul(ea,K)|0;G=G+Math.imul(ea,rb)|0;U=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(U>>>26)|0;U&=67108863;ib=Math.imul(J,kb);v=Math.imul(J,nb);v=v+Math.imul(va,kb)|0;G=Math.imul(va,nb);ib=ib+Math.imul(ua,tb)|0;v=v+Math.imul(ua,fb)|0;v=v+Math.imul(oa,tb)|0;G=G+Math.imul(oa,fb)|0;ib=ib+Math.imul(na,Ta)|0;v=v+Math.imul(na,ra)|0;v=v+Math.imul(ta,Ta)|0;G=G+Math.imul(ta,ra)|0;ib=ib+Math.imul(ha,ab)|0;v=v+Math.imul(ha,Ia)|0;v=v+Math.imul(sa,ab)|0;G=G+Math.imul(sa,
Ia)|0;ib=ib+Math.imul(ca,Ea)|0;v=v+Math.imul(ca,Va)|0;v=v+Math.imul(fa,Ea)|0;G=G+Math.imul(fa,Va)|0;ib=ib+Math.imul(da,K)|0;v=v+Math.imul(da,rb)|0;v=v+Math.imul(ia,K)|0;G=G+Math.imul(ia,rb)|0;da=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(da>>>26)|0;da&=67108863;ib=Math.imul(J,tb);v=Math.imul(J,fb);v=v+Math.imul(va,tb)|0;G=Math.imul(va,fb);ib=ib+Math.imul(ua,Ta)|0;v=v+Math.imul(ua,ra)|0;v=v+Math.imul(oa,Ta)|0;G=G+Math.imul(oa,ra)|0;ib=ib+Math.imul(na,ab)|0;v=v+Math.imul(na,Ia)|0;v=v+Math.imul(ta,
ab)|0;G=G+Math.imul(ta,Ia)|0;ib=ib+Math.imul(ha,Ea)|0;v=v+Math.imul(ha,Va)|0;v=v+Math.imul(sa,Ea)|0;G=G+Math.imul(sa,Va)|0;ib=ib+Math.imul(ca,K)|0;v=v+Math.imul(ca,rb)|0;v=v+Math.imul(fa,K)|0;G=G+Math.imul(fa,rb)|0;ca=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(ca>>>26)|0;ca&=67108863;ib=Math.imul(J,Ta);v=Math.imul(J,ra);v=v+Math.imul(va,Ta)|0;G=Math.imul(va,ra);ib=ib+Math.imul(ua,ab)|0;v=v+Math.imul(ua,Ia)|0;v=v+Math.imul(oa,ab)|0;G=G+Math.imul(oa,Ia)|0;ib=ib+Math.imul(na,Ea)|0;v=v+Math.imul(na,
Va)|0;v=v+Math.imul(ta,Ea)|0;G=G+Math.imul(ta,Va)|0;ib=ib+Math.imul(ha,K)|0;v=v+Math.imul(ha,rb)|0;v=v+Math.imul(sa,K)|0;G=G+Math.imul(sa,rb)|0;ha=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(ha>>>26)|0;ha&=67108863;ib=Math.imul(J,ab);v=Math.imul(J,Ia);v=v+Math.imul(va,ab)|0;G=Math.imul(va,Ia);ib=ib+Math.imul(ua,Ea)|0;v=v+Math.imul(ua,Va)|0;v=v+Math.imul(oa,Ea)|0;G=G+Math.imul(oa,Va)|0;ib=ib+Math.imul(na,K)|0;v=v+Math.imul(na,rb)|0;v=v+Math.imul(ta,K)|0;G=G+Math.imul(ta,rb)|0;na=(H+ib|0)+((v&8191)<<
13)|0;H=(G+(v>>>13)|0)+(na>>>26)|0;na&=67108863;ib=Math.imul(J,Ea);v=Math.imul(J,Va);v=v+Math.imul(va,Ea)|0;G=Math.imul(va,Va);ib=ib+Math.imul(ua,K)|0;v=v+Math.imul(ua,rb)|0;v=v+Math.imul(oa,K)|0;G=G+Math.imul(oa,rb)|0;ua=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(ua>>>26)|0;ua&=67108863;ib=Math.imul(J,K);v=Math.imul(J,rb);v=v+Math.imul(va,K)|0;G=Math.imul(va,rb);Q=(H+ib|0)+((v&8191)<<13)|0;H=(G+(v>>>13)|0)+(Q>>>26)|0;N[0]=Na;N[1]=Za;N[2]=eb;N[3]=Ba;N[4]=Ma;N[5]=$a;N[6]=lb;N[7]=Ra;N[8]=jb;N[9]=P;
N[10]=L;N[11]=S;N[12]=U;N[13]=da;N[14]=ca;N[15]=ha;N[16]=na;N[17]=ua;N[18]=Q&67108863;0!==H&&(N[19]=H,I.length++);return I};Math.imul||(B=l);a.prototype.mulTo=function(v,G){var I=this.length+v.length;if(10===this.length&&10===v.length)v=B(this,v,G);else if(63>I)v=l(this,v,G);else if(1024>I){G.negative=v.negative^this.negative;G.length=this.length+v.length;for(var J=0,K=I=0;K<G.length-1;K++){var N=I;I=0;J&=67108863;for(var H=Math.min(K,v.length-1),L=Math.max(0,K-this.length+1);L<=H;L++){var P=(this.words[K-
L]|0)*(v.words[L]|0),Q=P&67108863;N=N+(P/67108864|0)|0;Q=Q+J|0;J=Q&67108863;N=N+(Q>>>26)|0;I+=N>>>26;N&=67108863}G.words[K]=J;J=N}0!==J?G.words[K]=J:G.length--;v=G.strip()}else v=(new k).mulp(this,v,G);return v};k.prototype.makeRBT=function(v){for(var G=Array(v),I=a.prototype._countBits(v)-1,J=0;J<v;J++)G[J]=this.revBin(J,I,v);return G};k.prototype.revBin=function(v,G,I){if(0===v||v===I-1)return v;for(var J=I=0;J<G;J++)I|=(v&1)<<G-J-1,v>>=1;return I};k.prototype.permute=function(v,G,I,J,K,N){for(var H=
0;H<N;H++)J[H]=G[v[H]],K[H]=I[v[H]]};k.prototype.transform=function(v,G,I,J,K,N){this.permute(N,v,G,I,J,K);for(v=1;v<K;v<<=1){G=v<<1;N=Math.cos(2*Math.PI/G);for(var H=Math.sin(2*Math.PI/G),L=0;L<K;L+=G)for(var P=N,Q=H,S=0;S<v;S++){var O=I[L+S],U=J[L+S],X=I[L+S+v],da=J[L+S+v],ea=P*X-Q*da;da=P*da+Q*X;X=ea;I[L+S]=O+X;J[L+S]=U+da;I[L+S+v]=O-X;J[L+S+v]=U-da;S!==G&&(ea=N*P-H*Q,Q=N*Q+H*P,P=ea)}}};k.prototype.guessLen13b=function(v,G){v=Math.max(G,v)|1;G=v&1;var I=0;for(v=v/2|0;v;v>>>=1)I++;return 1<<I+1+
G};k.prototype.conjugate=function(v,G,I){if(!(1>=I))for(var J=0;J<I/2;J++){var K=v[J];v[J]=v[I-J-1];v[I-J-1]=K;K=G[J];G[J]=-G[I-J-1];G[I-J-1]=-K}};k.prototype.normalize13b=function(v,G){for(var I=0,J=0;J<G/2;J++)I=8192*Math.round(v[2*J+1]/G)+Math.round(v[2*J]/G)+I,v[J]=I&67108863,I=67108864>I?0:I/67108864|0;return v};k.prototype.convert13b=function(v,G,I,J){for(var K=0,N=0;N<G;N++)K+=v[N]|0,I[2*N]=K&8191,K>>>=13,I[2*N+1]=K&8191,K>>>=13;for(N=2*G;N<J;++N)I[N]=0;p(0===K);p(0===(K&-8192))};k.prototype.stub=
function(v){for(var G=Array(v),I=0;I<v;I++)G[I]=0;return G};k.prototype.mulp=function(v,G,I){var J=2*this.guessLen13b(v.length,G.length),K=this.makeRBT(J),N=this.stub(J),H=Array(J),L=Array(J),P=Array(J),Q=Array(J),S=Array(J),O=Array(J),U=I.words;U.length=J;this.convert13b(v.words,v.length,H,J);this.convert13b(G.words,G.length,Q,J);this.transform(H,N,L,P,J,K);this.transform(Q,N,S,O,J,K);for(H=0;H<J;H++)Q=L[H]*S[H]-P[H]*O[H],P[H]=L[H]*O[H]+P[H]*S[H],L[H]=Q;this.conjugate(L,P,J);this.transform(L,P,U,
N,J,K);this.conjugate(U,N,J);this.normalize13b(U,J);I.negative=v.negative^G.negative;I.length=v.length+G.length;return I.strip()};a.prototype.mul=function(v){var G=new a(null);G.words=Array(this.length+v.length);return this.mulTo(v,G)};a.prototype.mulf=function(v){var G=new a(null);G.words=Array(this.length+v.length);return(new k).mulp(this,v,G)};a.prototype.imul=function(v){return this.clone().mulTo(v,this)};a.prototype.imuln=function(v){p("number"===typeof v);p(67108864>v);for(var G=0,I=0;I<this.length;I++){var J=
(this.words[I]|0)*v,K=(J&67108863)+(G&67108863);G>>=26;G+=J/67108864|0;G+=K>>>26;this.words[I]=K&67108863}0!==G&&(this.words[I]=G,this.length++);return this};a.prototype.muln=function(v){return this.clone().imuln(v)};a.prototype.sqr=function(){return this.mul(this)};a.prototype.isqr=function(){return this.imul(this.clone())};a.prototype.pow=function(v){for(var G=Array(v.bitLength()),I=0;I<G.length;I++){var J=I%26;G[I]=(v.words[I/26|0]&1<<J)>>>J}if(0===G.length)return new a(1);v=this;for(I=0;I<G.length&&
0===G[I];I++,v=v.sqr());if(++I<G.length)for(J=v.sqr();I<G.length;I++,J=J.sqr())0!==G[I]&&(v=v.mul(J));return v};a.prototype.iushln=function(v){p("number"===typeof v&&0<=v);var G=v%26;v=(v-G)/26;var I=67108863>>>26-G<<26-G,J;if(0!==G){var K=0;for(J=0;J<this.length;J++){var N=this.words[J]&I;this.words[J]=(this.words[J]|0)-N<<G|K;K=N>>>26-G}K&&(this.words[J]=K,this.length++)}if(0!==v){for(J=this.length-1;0<=J;J--)this.words[J+v]=this.words[J];for(J=0;J<v;J++)this.words[J]=0;this.length+=v}return this.strip()};
a.prototype.ishln=function(v){p(0===this.negative);return this.iushln(v)};a.prototype.iushrn=function(v,G,I){p("number"===typeof v&&0<=v);var J=v%26,K=Math.min((v-J)/26,this.length);v=67108863^67108863>>>J<<J;G=Math.max(0,(G?(G-G%26)/26:0)-K);if(I){for(var N=0;N<K;N++)I.words[N]=this.words[N];I.length=K}if(0!==K)if(this.length>K)for(this.length-=K,N=0;N<this.length;N++)this.words[N]=this.words[N+K];else this.words[0]=0,this.length=1;K=0;for(N=this.length-1;0<=N&&(0!==K||N>=G);N--){var H=this.words[N]|
0;this.words[N]=K<<26-J|H>>>J;K=H&v}I&&0!==K&&(I.words[I.length++]=K);0===this.length&&(this.words[0]=0,this.length=1);return this.strip()};a.prototype.ishrn=function(v,G,I){p(0===this.negative);return this.iushrn(v,G,I)};a.prototype.shln=function(v){return this.clone().ishln(v)};a.prototype.ushln=function(v){return this.clone().iushln(v)};a.prototype.shrn=function(v){return this.clone().ishrn(v)};a.prototype.ushrn=function(v){return this.clone().iushrn(v)};a.prototype.testn=function(v){p("number"===
typeof v&&0<=v);var G=v%26;v=(v-G)/26;return this.length<=v?!1:!!(this.words[v]&1<<G)};a.prototype.imaskn=function(v){p("number"===typeof v&&0<=v);var G=v%26;v=(v-G)/26;p(0===this.negative,"imaskn works only with positive numbers");if(this.length<=v)return this;0!==G&&v++;this.length=Math.min(v,this.length);0!==G&&(this.words[this.length-1]&=67108863^67108863>>>G<<G);return this.strip()};a.prototype.maskn=function(v){return this.clone().imaskn(v)};a.prototype.iaddn=function(v){p("number"===typeof v);
p(67108864>v);if(0>v)return this.isubn(-v);if(0!==this.negative){if(1===this.length&&(this.words[0]|0)<v)return this.words[0]=v-(this.words[0]|0),this.negative=0,this;this.negative=0;this.isubn(v);this.negative=1;return this}return this._iaddn(v)};a.prototype._iaddn=function(v){this.words[0]+=v;for(v=0;v<this.length&&67108864<=this.words[v];v++)this.words[v]-=67108864,v===this.length-1?this.words[v+1]=1:this.words[v+1]++;this.length=Math.max(this.length,v+1);return this};a.prototype.isubn=function(v){p("number"===
typeof v);p(67108864>v);if(0>v)return this.iaddn(-v);if(0!==this.negative)return this.negative=0,this.iaddn(v),this.negative=1,this;this.words[0]-=v;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(v=0;v<this.length&&0>this.words[v];v++)this.words[v]+=67108864,--this.words[v+1];return this.strip()};a.prototype.addn=function(v){return this.clone().iaddn(v)};a.prototype.subn=function(v){return this.clone().isubn(v)};a.prototype.iabs=function(){this.negative=
0;return this};a.prototype.abs=function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(v,G,I){var J;this._expand(v.length+I);var K=0;for(J=0;J<v.length;J++){var N=(this.words[J+I]|0)+K;K=(v.words[J]|0)*G;N-=K&67108863;K=(N>>26)-(K/67108864|0);this.words[J+I]=N&67108863}for(;J<this.length-I;J++)N=(this.words[J+I]|0)+K,K=N>>26,this.words[J+I]=N&67108863;if(0===K)return this.strip();p(-1===K);for(J=K=0;J<this.length;J++)N=-(this.words[J]|0)+K,K=N>>26,this.words[J]=N&67108863;this.negative=
1;return this.strip()};a.prototype._wordDiv=function(v,G){var I=this.clone(),J=v,K=J.words[J.length-1]|0;v=26-this._countBits(K);0!==v&&(J=J.ushln(v),I.iushln(v),K=J.words[J.length-1]|0);var N=I.length-J.length;if("mod"!==G){var H=new a(null);H.length=N+1;H.words=Array(H.length);for(var L=0;L<H.length;L++)H.words[L]=0}L=I.clone()._ishlnsubmul(J,1,N);0===L.negative&&(I=L,H&&(H.words[N]=1));for(--N;0<=N;N--){L=67108864*(I.words[J.length+N]|0)+(I.words[J.length+N-1]|0);L=Math.min(L/K|0,67108863);for(I._ishlnsubmul(J,
L,N);0!==I.negative;)L--,I.negative=0,I._ishlnsubmul(J,1,N),I.isZero()||(I.negative^=1);H&&(H.words[N]=L)}H&&H.strip();I.strip();"div"!==G&&0!==v&&I.iushrn(v);return{div:H||null,mod:I}};a.prototype.divmod=function(v,G,I){p(!v.isZero());if(this.isZero())return{div:new a(0),mod:new a(0)};var J;if(0!==this.negative&&0===v.negative){var K=this.neg().divmod(v,G);"mod"!==G&&(J=K.div.neg());if("div"!==G){var N=K.mod.neg();I&&0!==N.negative&&N.iadd(v)}return{div:J,mod:N}}return 0===this.negative&&0!==v.negative?
(K=this.divmod(v.neg(),G),"mod"!==G&&(J=K.div.neg()),{div:J,mod:K.mod}):0!==(this.negative&v.negative)?(K=this.neg().divmod(v.neg(),G),"div"!==G&&(N=K.mod.neg(),I&&0!==N.negative&&N.isub(v)),{div:K.div,mod:N}):v.length>this.length||0>this.cmp(v)?{div:new a(0),mod:this}:1===v.length?"div"===G?{div:this.divn(v.words[0]),mod:null}:"mod"===G?{div:null,mod:new a(this.modn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new a(this.modn(v.words[0]))}:this._wordDiv(v,G)};a.prototype.div=function(v){return this.divmod(v,
"div",!1).div};a.prototype.mod=function(v){return this.divmod(v,"mod",!1).mod};a.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod};a.prototype.divRound=function(v){var G=this.divmod(v);if(G.mod.isZero())return G.div;var I=0!==G.div.negative?G.mod.isub(v):G.mod,J=v.ushrn(1);v=v.andln(1);I=I.cmp(J);return 0>I||1===v&&0===I?G.div:0!==G.div.negative?G.div.isubn(1):G.div.iaddn(1)};a.prototype.modn=function(v){p(67108863>=v);for(var G=67108864%v,I=0,J=this.length-1;0<=J;J--)I=(G*I+(this.words[J]|
0))%v;return I};a.prototype.idivn=function(v){p(67108863>=v);for(var G=0,I=this.length-1;0<=I;I--)G=(this.words[I]|0)+67108864*G,this.words[I]=G/v|0,G%=v;return this.strip()};a.prototype.divn=function(v){return this.clone().idivn(v)};a.prototype.egcd=function(v){p(0===v.negative);p(!v.isZero());var G=this,I=v.clone();G=0!==G.negative?G.umod(v):G.clone();v=new a(1);for(var J=new a(0),K=new a(0),N=new a(1),H=0;G.isEven()&&I.isEven();)G.iushrn(1),I.iushrn(1),++H;for(var L=I.clone(),P=G.clone();!G.isZero();){for(var Q=
0,S=1;0===(G.words[0]&S)&&26>Q;++Q,S<<=1);if(0<Q)for(G.iushrn(Q);0<Q--;){if(v.isOdd()||J.isOdd())v.iadd(L),J.isub(P);v.iushrn(1);J.iushrn(1)}Q=0;for(S=1;0===(I.words[0]&S)&&26>Q;++Q,S<<=1);if(0<Q)for(I.iushrn(Q);0<Q--;){if(K.isOdd()||N.isOdd())K.iadd(L),N.isub(P);K.iushrn(1);N.iushrn(1)}0<=G.cmp(I)?(G.isub(I),v.isub(K),J.isub(N)):(I.isub(G),K.isub(v),N.isub(J))}return{a:K,b:N,gcd:I.iushln(H)}};a.prototype._invmp=function(v){p(0===v.negative);p(!v.isZero());var G=this,I=v.clone();G=0!==G.negative?
G.umod(v):G.clone();for(var J=new a(1),K=new a(0),N=I.clone();0<G.cmpn(1)&&0<I.cmpn(1);){for(var H=0,L=1;0===(G.words[0]&L)&&26>H;++H,L<<=1);if(0<H)for(G.iushrn(H);0<H--;)J.isOdd()&&J.iadd(N),J.iushrn(1);H=0;for(L=1;0===(I.words[0]&L)&&26>H;++H,L<<=1);if(0<H)for(I.iushrn(H);0<H--;)K.isOdd()&&K.iadd(N),K.iushrn(1);0<=G.cmp(I)?(G.isub(I),J.isub(K)):(I.isub(G),K.isub(J))}G=0===G.cmpn(1)?J:K;0>G.cmpn(0)&&G.iadd(v);return G};a.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();
var G=this.clone();v=v.clone();G.negative=0;for(var I=v.negative=0;G.isEven()&&v.isEven();I++)G.iushrn(1),v.iushrn(1);do{for(;G.isEven();)G.iushrn(1);for(;v.isEven();)v.iushrn(1);var J=G.cmp(v);if(0>J)J=G,G=v,v=J;else if(0===J||0===v.cmpn(1))break;G.isub(v)}while(1);return v.iushln(I)};a.prototype.invm=function(v){return this.egcd(v).a.umod(v)};a.prototype.isEven=function(){return 0===(this.words[0]&1)};a.prototype.isOdd=function(){return 1===(this.words[0]&1)};a.prototype.andln=function(v){return this.words[0]&
v};a.prototype.bincn=function(v){p("number"===typeof v);var G=v%26;v=(v-G)/26;G=1<<G;if(this.length<=v)return this._expand(v+1),this.words[v]|=G,this;for(;0!==G&&v<this.length;v++){var I=this.words[v]|0;I+=G;G=I>>>26;I&=67108863;this.words[v]=I}0!==G&&(this.words[v]=G,this.length++);return this};a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]};a.prototype.cmpn=function(v){var G=0>v;if(0!==this.negative&&!G)return-1;if(0===this.negative&&G)return 1;this.strip();1<this.length?
v=1:(G&&(v=-v),p(67108863>=v,"Number is too big"),G=this.words[0]|0,v=G===v?0:G<v?-1:1);return 0!==this.negative?-v|0:v};a.prototype.cmp=function(v){if(0!==this.negative&&0===v.negative)return-1;if(0===this.negative&&0!==v.negative)return 1;v=this.ucmp(v);return 0!==this.negative?-v|0:v};a.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var G=0,I=this.length-1;0<=I;I--){var J=this.words[I]|0,K=v.words[I]|0;if(J!==K){J<K?G=-1:J>K&&(G=1);break}}return G};
a.prototype.gtn=function(v){return 1===this.cmpn(v)};a.prototype.gt=function(v){return 1===this.cmp(v)};a.prototype.gten=function(v){return 0<=this.cmpn(v)};a.prototype.gte=function(v){return 0<=this.cmp(v)};a.prototype.ltn=function(v){return-1===this.cmpn(v)};a.prototype.lt=function(v){return-1===this.cmp(v)};a.prototype.lten=function(v){return 0>=this.cmpn(v)};a.prototype.lte=function(v){return 0>=this.cmp(v)};a.prototype.eqn=function(v){return 0===this.cmpn(v)};a.prototype.eq=function(v){return 0===
this.cmp(v)};a.red=function(v){return new u(v)};a.prototype.toRed=function(v){p(!this.red,"Already a number in reduction context");p(0===this.negative,"red works only with positives");return v.convertTo(this)._forceRed(v)};a.prototype.fromRed=function(){p(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};a.prototype._forceRed=function(v){this.red=v;return this};a.prototype.forceRed=function(v){p(!this.red,"Already a number in reduction context");return this._forceRed(v)};
a.prototype.redAdd=function(v){p(this.red,"redAdd works only with red numbers");return this.red.add(this,v)};a.prototype.redIAdd=function(v){p(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,v)};a.prototype.redSub=function(v){p(this.red,"redSub works only with red numbers");return this.red.sub(this,v)};a.prototype.redISub=function(v){p(this.red,"redISub works only with red numbers");return this.red.isub(this,v)};a.prototype.redShl=function(v){p(this.red,"redShl works only with red numbers");
return this.red.shl(this,v)};a.prototype.redMul=function(v){p(this.red,"redMul works only with red numbers");this.red._verify2(this,v);return this.red.mul(this,v)};a.prototype.redIMul=function(v){p(this.red,"redMul works only with red numbers");this.red._verify2(this,v);return this.red.imul(this,v)};a.prototype.redSqr=function(){p(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};a.prototype.redISqr=function(){p(this.red,"redISqr works only with red numbers");
this.red._verify1(this);return this.red.isqr(this)};a.prototype.redSqrt=function(){p(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};a.prototype.redInvm=function(){p(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};a.prototype.redNeg=function(){p(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};a.prototype.redPow=function(v){p(this.red&&!v.red,"redPow(normalNum)");
this.red._verify1(this);return this.red.pow(this,v)};var C={k256:null,p224:null,p192:null,p25519:null};c.prototype._tmp=function(){var v=new a(null);v.words=Array(Math.ceil(this.n/13));return v};c.prototype.ireduce=function(v){do{this.split(v,this.tmp);v=this.imulK(v);v=v.iadd(this.tmp);var G=v.bitLength()}while(G>this.n);G=G<this.n?-1:v.ucmp(this.p);0===G?(v.words[0]=0,v.length=1):0<G?v.isub(this.p):v.strip();return v};c.prototype.split=function(v,G){v.iushrn(this.n,0,G)};c.prototype.imulK=function(v){return v.imul(this.k)};
h(f,c);f.prototype.split=function(v,G){for(var I=Math.min(v.length,9),J=0;J<I;J++)G.words[J]=v.words[J];G.length=I;if(9>=v.length)v.words[0]=0,v.length=1;else{I=v.words[9];G.words[G.length++]=I&4194303;for(J=10;J<v.length;J++)G=v.words[J]|0,v.words[J-10]=(G&4194303)<<4|I>>>22,I=G;I>>>=22;v.words[J-10]=I;v.length=0===I&&10<v.length?v.length-10:v.length-9}};f.prototype.imulK=function(v){v.words[v.length]=0;v.words[v.length+1]=0;v.length+=2;for(var G=0,I=0;I<v.length;I++){var J=v.words[I]|0;G+=977*J;
v.words[I]=G&67108863;G=64*J+(G/67108864|0)}0===v.words[v.length-1]&&(v.length--,0===v.words[v.length-1]&&v.length--);return v};h(g,c);h(q,c);h(t,c);t.prototype.imulK=function(v){for(var G=0,I=0;I<v.length;I++){G=19*(v.words[I]|0)+G;var J=G&67108863;G>>>=26;v.words[I]=J}0!==G&&(v.words[v.length++]=G);return v};a._prime=function(v){if(C[v])return C[v];if("k256"===v)var G=new f;else if("p224"===v)G=new g;else if("p192"===v)G=new q;else if("p25519"===v)G=new t;else throw Error("Unknown prime "+v);return C[v]=
G};u.prototype._verify1=function(v){p(0===v.negative,"red works only with positives");p(v.red,"red works only with red numbers")};u.prototype._verify2=function(v,G){p(0===(v.negative|G.negative),"red works only with positives");p(v.red&&v.red===G.red,"red works only with red numbers")};u.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):v.umod(this.m)._forceRed(this)};u.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)};u.prototype.add=
function(v,G){this._verify2(v,G);v=v.add(G);0<=v.cmp(this.m)&&v.isub(this.m);return v._forceRed(this)};u.prototype.iadd=function(v,G){this._verify2(v,G);v=v.iadd(G);0<=v.cmp(this.m)&&v.isub(this.m);return v};u.prototype.sub=function(v,G){this._verify2(v,G);v=v.sub(G);0>v.cmpn(0)&&v.iadd(this.m);return v._forceRed(this)};u.prototype.isub=function(v,G){this._verify2(v,G);v=v.isub(G);0>v.cmpn(0)&&v.iadd(this.m);return v};u.prototype.shl=function(v,G){this._verify1(v);return this.imod(v.ushln(G))};u.prototype.imul=
function(v,G){this._verify2(v,G);return this.imod(v.imul(G))};u.prototype.mul=function(v,G){this._verify2(v,G);return this.imod(v.mul(G))};u.prototype.isqr=function(v){return this.imul(v,v.clone())};u.prototype.sqr=function(v){return this.mul(v,v)};u.prototype.sqrt=function(v){if(v.isZero())return v.clone();var G=this.m.andln(3);p(1===G%2);if(3===G)return G=this.m.add(new a(1)).iushrn(2),this.pow(v,G);for(var I=this.m.subn(1),J=0;!I.isZero()&&0===I.andln(1);)J++,I.iushrn(1);p(!I.isZero());G=(new a(1)).toRed(this);
var K=G.redNeg(),N=this.m.subn(1).iushrn(1),H=this.m.bitLength();for(H=(new a(2*H*H)).toRed(this);0!==this.pow(H,N).cmp(K);)H.redIAdd(K);N=this.pow(H,I);K=this.pow(v,I.addn(1).iushrn(1));v=this.pow(v,I);for(I=J;0!==v.cmp(G);){H=v;for(J=0;0!==H.cmp(G);J++)H=H.redSqr();p(J<I);N=this.pow(N,(new a(1)).iushln(I-J-1));K=K.redMul(N);N=N.redSqr();v=v.redMul(N);I=J}return K};u.prototype.invm=function(v){v=v._invmp(this.m);return 0!==v.negative?(v.negative=0,this.imod(v).redNeg()):this.imod(v)};u.prototype.pow=
function(v,G){if(G.isZero())return(new a(1)).toRed(this);if(0===G.cmpn(1))return v.clone();var I=Array(16);I[0]=(new a(1)).toRed(this);I[1]=v;for(var J=2;J<I.length;J++)I[J]=this.mul(I[J-1],v);v=I[0];var K=0,N=0,H=G.bitLength()%26;0===H&&(H=26);for(J=G.length-1;0<=J;J--){var L=G.words[J];for(--H;0<=H;H--){var P=L>>H&1;v!==I[0]&&(v=this.sqr(v));if(0===P&&0===K)N=0;else if(K<<=1,K|=P,N++,4===N||0===J&&0===H)v=this.mul(v,I[K]),K=N=0}H=26}return v};u.prototype.convertTo=function(v){var G=v.umod(this.m);
return G===v?G.clone():G};u.prototype.convertFrom=function(v){v=v.clone();v.red=null;return v};a.mont=function(v){return new w(v)};h(w,u);w.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))};w.prototype.convertFrom=function(v){v=this.imod(v.mul(this.rinv));v.red=null;return v};w.prototype.imul=function(v,G){if(v.isZero()||G.isZero())return v.words[0]=0,v.length=1,v;v=v.imul(G);G=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);G=v=v.isub(G).iushrn(this.shift);
0<=v.cmp(this.m)?G=v.isub(this.m):0>v.cmpn(0)&&(G=v.iadd(this.m));return G._forceRed(this)};w.prototype.mul=function(v,G){if(v.isZero()||G.isZero())return(new a(0))._forceRed(this);v=v.mul(G);G=v.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);G=v=v.isub(G).iushrn(this.shift);0<=v.cmp(this.m)?G=v.isub(this.m):0>v.cmpn(0)&&(G=v.iadd(this.m));return G._forceRed(this)};w.prototype.invm=function(v){return this.imod(v._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===typeof y||
y,this)},{buffer:108}],100:[function(b,y,D){y.exports=function(n){var m,p,h,a=n.length;for(m=p=0;m<a;++m)p+=n[m].length;var d=Array(p),e=0;for(m=0;m<a;++m){var l=n[m],k=l.length;for(p=0;p<k;++p){var c=d[e++]=Array(k-1),f=0;for(h=0;h<k;++h)h!==p&&(c[f++]=l[h]);p&1&&(h=c[1],c[1]=c[0],c[0]=h)}}return d}},{}],101:[function(b,y,D){function n(l,k,c,f){for(var g=0,q=0,t=0,u=l.length;t<u;++t){var w=l[t],x;a:{for(x=0;x<k;++x)if(!(w[x]<=w[x+k])){x=!0;break a}x=!1}if(!x){for(x=0;x<2*k;++x)c[g++]=w[x];f[q++]=
t}}return q}function m(l,k,c,f){var g=l.length,q=k.length;if(!(0>=g||0>=q)){var t=l[0].length>>>1;if(!(0>=t)){var u=h.mallocDouble(2*t*g),w=h.mallocInt32(g);g=n(l,t,u,w);if(0<g){if(1===t&&f){a.init(g);var x=a.sweepComplete(t,c,0,g,u,w,0,g,u,w)}else{l=h.mallocDouble(2*t*q);var E=h.mallocInt32(q);q=n(k,t,l,E);0<q&&(a.init(g+q),x=1===t?a.sweepBipartite(t,c,0,g,u,w,0,q,l,E):d(t,c,f,g,u,w,q,l,E),h.free(l),h.free(E))}h.free(u);h.free(w)}return x}}}function p(l,k){e.push([l,k])}y.exports=function(l,k,c){switch(arguments.length){case 1:return e=
[],m(l,l,p,!0),e;case 2:if("function"===typeof k)return m(l,l,k,!0);e=[];m(l,k,p,!1);return e;case 3:return m(l,k,c,!1);default:throw Error("box-intersect: Invalid arguments");}};var h=b("typedarray-pool"),a=b("./lib/sweep"),d=b("./lib/intersect"),e},{"./lib/intersect":103,"./lib/sweep":107,"typedarray-pool":567}],102:[function(b,y,D){function n(p){function h(k,c){var f="bruteForce"+(k?"Red":"Blue")+(c?"Flip":"")+(p?"Full":""),g=["function ",f,"(",m.join(),"){","var ","es","\x3d2*","d",";"],q="for(var j\x3dbs,bp\x3des*bs;j\x3cbe;++j,bp+\x3des){var y0\x3dbb[ax+bp],"+
(p?"y1\x3dbb[ax+bp+d],":"")+"yi\x3dbi[j];";k?g.push("for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];","Q",":",q):g.push(q,"Q",":","for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];");p?g.push("if(y1\x3cx0||x1\x3cy0)continue;"):c?g.push("if(y0\x3c\x3dx0||x1\x3cy0)continue;"):g.push("if(y0\x3cx0||x1\x3cy0)continue;");g.push("for(var k\x3dax+1;k\x3cd;++k){var r0\x3drb[k+rp],r1\x3drb[k+d+rp],b0\x3dbb[k+bp],b1\x3dbb[k+d+bp];if(r1\x3cb0||b1\x3cr0)continue Q;}var rv\x3dvv(");
c?g.push("yi,xi"):g.push("xi,yi");g.push(");if(rv!\x3d\x3dvoid 0)return rv;}}}");k=g.join("");d.push(k);l.push("return "+f+"("+m.join()+");")}var a="bruteForce"+(p?"Full":"Partial"),d=[],e=m.slice();p||e.splice(3,0,"fp");var l=["function "+a+"("+e.join()+"){"];l.push("if(re-rs\x3ebe-bs){");p?(h(!0,!1),l.push("}else{"),h(!1,!1)):(l.push("if(fp){"),h(!0,!0),l.push("}else{"),h(!0,!1),l.push("}}else{if(fp){"),h(!1,!0),l.push("}else{"),h(!1,!1),l.push("}"));l.push("}}return "+a);a=d.join("")+l.join("");
return(new Function(a))()}var m="d ax vv rs re rb ri bs be bb bi".split(" ");D.partial=n(!1);D.full=n(!0)},{}],103:[function(b,y,D){function n(B,C,v,G,I,J,K,N,H){var L=x*B;F[L]=C;F[L+1]=v;F[L+2]=G;F[L+3]=I;F[L+4]=J;F[L+5]=K;B*=E;z[B]=N;z[B+1]=H}y.exports=function(B,C,v,G,I,J,K,N,H){var L=8*p.log2(G+K+1)*(B+1)|0,P=p.nextPow2(x*L);F.length<P&&(m.free(F),F=m.mallocInt32(P));L=p.nextPow2(E*L);z.length<L&&(m.free(z),z=m.mallocDouble(L));L=0;P=2*B;n(L++,0,0,G,0,K,v?16:0,-Infinity,Infinity);for(v||n(L++,
0,0,K,0,G,1,-Infinity,Infinity);0<L;){--L;v=L*x;var Q=F[v];K=F[v+1];var S=F[v+2],O=F[v+3],U=F[v+4];v=F[v+5];G=L*E;var X=z[G],da=z[G+1],ea=v&1,ca=!!(v&16),ia=I,ha=J,fa=N;G=H;ea&&(ia=N,ha=H,fa=I,G=J);if(v&2&&(S=q(B,Q,K,S,ia,ha,da),K>=S))continue;if(v&4&&(K=t(B,Q,K,S,ia,ha,X),K>=S))continue;v=S-K;var na=U-O;if(ca){if(B*v*(v+na)<c){var sa=d.scanComplete(B,Q,C,K,S,ia,ha,O,U,fa,G);if(void 0!==sa)return sa;continue}}else if(B*Math.min(v,na)<l){sa=h(B,Q,C,ea,K,S,ia,ha,O,U,fa,G);if(void 0!==sa)return sa;continue}else if(B*
v*na<k){sa=d.scanBipartite(B,Q,C,ea,K,S,ia,ha,O,U,fa,G);if(void 0!==sa)return sa;continue}v=f(B,Q,K,S,ia,ha,X,da);if(K<v)if(B*(v-K)<l){if(sa=a(B,Q+1,C,K,v,ia,ha,O,U,fa,G),void 0!==sa)return sa}else if(Q===B-2){if(sa=ea?d.sweepBipartite(B,C,O,U,fa,G,K,v,ia,ha):d.sweepBipartite(B,C,K,v,ia,ha,O,U,fa,G),void 0!==sa)return sa}else n(L++,Q+1,K,v,O,U,ea,-Infinity,Infinity),n(L++,Q+1,O,U,K,v,ea^1,-Infinity,Infinity);if(v<S)if(K=e(B,Q,O,U,fa,G),sa=fa[P*K+Q],na=g(B,Q,K,U,fa,G,sa),na<U&&n(L++,Q,v,S,na,U,(ea|
4)+(ca?16:0),sa,da),O<K&&n(L++,Q,v,S,O,K,(ea|2)+(ca?16:0),X,sa),K+1===na){if(ca)a:{O=B;U=C;G=G[K];ea=2*O;K*=ea;X=fa[K+Q];da=v;v*=ea;b:for(;da<S;++da,v+=ea)if(ca=ha[da],ca!==G&&(na=ia[v+Q],sa=ia[v+Q+O],!(X<na||sa<X))){for(var ua=Q+1;ua<O;++ua){na=ia[v+ua];sa=ia[v+ua+O];var ta=fa[K+ua+O];if(sa<fa[K+ua]||ta<na)continue b}ca=U(ca,G);if(void 0!==ca){sa=ca;break a}}sa=void 0}else a:{O=B;U=C;G=G[K];X=2*O;K*=X;da=fa[K+Q];ca=v;v*=X;b:for(;ca<S;++ca,v+=X)if(na=ia[v+Q],sa=ia[v+Q+O],!(da<na||sa<da||ea&&da===
na)){ua=ha[ca];for(ta=Q+1;ta<O;++ta){na=ia[v+ta];sa=ia[v+ta+O];var oa=fa[K+ta+O];if(sa<fa[K+ta]||oa<na)continue b}na=ea?U(G,ua):U(ua,G);if(void 0!==na){sa=na;break a}}sa=void 0}if(void 0!==sa)return sa}else if(K<na)if(ca){if(S=u(B,Q,v,S,ia,ha,sa),v<S)if(O=g(B,Q,v,S,ia,ha,sa),Q===B-2){if(v<O&&(sa=d.sweepComplete(B,C,v,O,ia,ha,K,na,fa,G),void 0!==sa)||O<S&&(sa=d.sweepBipartite(B,C,O,S,ia,ha,K,na,fa,G),void 0!==sa))return sa}else v<O&&n(L++,Q+1,v,O,K,na,16,-Infinity,Infinity),O<S&&(n(L++,Q+1,O,S,K,na,
0,-Infinity,Infinity),n(L++,Q+1,K,na,O,S,1,-Infinity,Infinity))}else S=ea?w(B,Q,v,S,ia,ha,sa):u(B,Q,v,S,ia,ha,sa),v<S&&(Q===B-2?ea?d.sweepBipartite(B,C,K,na,fa,G,v,S,ia,ha):d.sweepBipartite(B,C,v,S,ia,ha,K,na,fa,G):(n(L++,Q+1,v,S,K,na,ea,-Infinity,Infinity),n(L++,Q+1,K,na,v,S,ea^1,-Infinity,Infinity)))}};var m=b("typedarray-pool"),p=b("bit-twiddle");y=b("./brute");var h=y.partial,a=y.full,d=b("./sweep"),e=b("./median");b=b("./partition");var l=128,k=4194304,c=4194304,f=b("!(lo\x3e\x3dp0)\x26\x26!(p1\x3e\x3dhi)",
["p0","p1"]),g=b("lo\x3d\x3d\x3dp0",["p0"]),q=b("lo\x3cp0",["p0"]),t=b("hi\x3c\x3dp0",["p0"]),u=b("lo\x3c\x3dp0\x26\x26p0\x3c\x3dhi",["p0"]),w=b("lo\x3cp0\x26\x26p0\x3c\x3dhi",["p0"]),x=6,E=2,F=m.mallocInt32(1024),z=m.mallocDouble(1024)},{"./brute":102,"./median":104,"./partition":105,"./sweep":107,"bit-twiddle":97,"typedarray-pool":567}],104:[function(b,y,D){y.exports=function(p,h,a,d,e,l){if(d<=a+1)return a;var k=a,c=d;d=d+a>>>1;for(var f=2*p,g,q;k<c;){if(c-k<m){g=h;q=e;for(var t=l,u=2*p,w=u*(k+
1)+g,x=k+1;x<c;++x,w+=u)for(var E=q[w],F=x,z=u*(x-1);F>k&&q[z+g]>E;--F,z-=u){for(var B=z,C=z+u,v=0;v<u;++v,++B,++C){var G=q[B];q[B]=q[C];q[C]=G}B=t[F];t[F]=t[F-1];t[F-1]=B}break}w=c-k;g=Math.random()*w+k|0;q=e[f*g+h];u=Math.random()*w+k|0;t=e[f*u+h];x=Math.random()*w+k|0;w=e[f*x+h];q<=t?w>=t?(g=u,q=t):q>=w||(g=x,q=w):t>=w?(g=u,q=t):w>=q||(g=x,q=w);t=f*(c-1);u=f*g;for(w=0;w<f;++w,++t,++u)x=e[t],e[t]=e[u],e[u]=x;t=l[c-1];l[c-1]=l[g];l[g]=t;g=n(p,h,k,c-1,e,l,q);t=f*(c-1);u=f*g;for(w=0;w<f;++w,++t,++u)x=
e[t],e[t]=e[u],e[u]=x;t=l[c-1];l[c-1]=l[g];l[g]=t;if(d<g){for(c=g-1;k<c&&e[f*(c-1)+h]===q;)--c;c+=1}else if(g<d)for(k=g+1;k<c&&e[f*k+h]===q;)k+=1;else break}return n(p,h,a,d,e,l,e[f*d+h])};var n=b("./partition")("lo\x3cp0",["p0"]),m=8},{"./partition":105}],105:[function(b,y,D){y.exports=function(m,p){p="abcdef".split("").concat(p);var h=[];0<=m.indexOf("lo")&&h.push("lo\x3de[k+n]");0<=m.indexOf("hi")&&h.push("hi\x3de[k+o]");p.push(n.replace("_",h.join()).replace("$",m));return Function.apply(void 0,
p)};var n="for(var j\x3d2*a,k\x3dj*c,l\x3dk,m\x3dc,n\x3db,o\x3da+b,p\x3dc;d\x3ep;++p,k+\x3dj){var _;if($)if(m\x3d\x3d\x3dp)m+\x3d1,l+\x3dj;else{for(var s\x3d0;j\x3es;++s){var t\x3de[k+s];e[k+s]\x3de[l],e[l++]\x3dt}var u\x3df[p];f[p]\x3df[m],f[m++]\x3du}}return m"},{}],106:[function(b,y,D){function n(k,c,f){for(var g=2*(k+1),q=k+1;q<=c;++q){for(var t=f[g++],u=f[g++],w=q,x=g-2;w-- >k;){var E=f[x-2],F=f[x-1];if(E<t)break;else if(E===t&&F<u)break;f[x]=E;f[x+1]=F;x-=2}f[x]=t;f[x+1]=u}}function m(k,c,f){k*=
2;c*=2;var g=f[k],q=f[k+1];f[k]=f[c];f[k+1]=f[c+1];f[c]=g;f[c+1]=q}function p(k,c,f){k*=2;c*=2;f[k]=f[c];f[k+1]=f[c+1]}function h(k,c,f,g,q){k*=2;c*=2;q[k]=q[c];q[c]=f;q[k+1]=q[c+1];q[c+1]=g}function a(k,c,f){k*=2;c*=2;var g=f[k],q=f[c];return g<q?!1:g===q?f[k+1]>f[c+1]:!0}function d(k,c,f,g){k*=2;var q=g[k];return q<c?!0:q===c?g[k+1]<f:!1}function e(k,c,f){var g=(c-k+1)/6|0,q=k+g,t=c-g,u=k+c>>1,w=u-g,x=u+g,E=q,F=w,z=u,B=x,C=t;g=k+1;var v=c-1;if(a(E,F,f)){var G=E;E=F;F=G}a(B,C,f)&&(G=B,B=C,C=G);a(E,
z,f)&&(G=E,E=z,z=G);a(F,z,f)&&(G=F,F=z,z=G);a(E,B,f)&&(G=E,E=B,B=G);a(z,B,f)&&(G=z,z=B,B=G);a(F,C,f)&&(G=F,F=C,C=G);a(F,z,f)&&(G=F,F=z,z=G);a(B,C,f)&&(G=B,B=C,C=G);G=f[2*F];F=f[2*F+1];var I=f[2*B];B=f[2*B+1];E*=2;z*=2;C*=2;q*=2;u*=2;t*=2;for(var J=0;2>J;++J){var K=f[z+J],N=f[C+J];f[q+J]=f[E+J];f[u+J]=K;f[t+J]=N}p(w,k,f);p(x,c,f);for(w=g;w<=v;++w)if(d(w,G,F,f))w!==g&&m(w,g,f),++g;else if(!d(w,I,B,f))for(;;)if(d(v,I,B,f)){d(v,G,F,f)?(x=w,t=g,u=v,E=f,x*=2,t*=2,u*=2,q=E[x],z=E[x+1],E[x]=E[t],E[x+1]=E[t+
1],E[t]=E[u],E[t+1]=E[u+1],E[u]=q,E[u+1]=z,++g):m(w,v,f);--v;break}else if(--v<w)break;h(k,g-1,G,F,f);h(c,v+1,I,B,f);g-2-k<=l?n(k,g-2,f):e(k,g-2,f);c-(v+2)<=l?n(v+2,c,f):e(v+2,c,f);v-g<=l?n(g,v,f):e(g,v,f)}y.exports=function(k,c){c<=4*l?n(0,c-1,k):e(0,c-1,k)};var l=32},{}],107:[function(b,y,D){function n(q,t,u,w){w=t[w];u=q[u-1];q[w]=u;t[u]=w}y.exports={init:function(q){q=p.nextPow2(q);d.length<q&&(m.free(d),d=m.mallocInt32(q));e.length<q&&(m.free(e),e=m.mallocInt32(q));l.length<q&&(m.free(l),l=m.mallocInt32(q));
k.length<q&&(m.free(k),k=m.mallocInt32(q));c.length<q&&(m.free(c),c=m.mallocInt32(q));f.length<q&&(m.free(f),f=m.mallocInt32(q));q*=8;g.length<q&&(m.free(g),g=m.mallocDouble(q))},sweepBipartite:function(q,t,u,w,x,E,F,z,B,C){var v=0,G=2*q;--q;for(var I=G-1;u<w;++u){var J=E[u],K=G*u;g[v++]=x[K+q];g[v++]=-(J+1);g[v++]=x[K+I];g[v++]=J}for(u=F;u<z;++u)J=C[u]+a,w=G*u,g[v++]=B[w+q],g[v++]=-J,g[v++]=B[w+I],g[v++]=J;z=v>>>1;h(g,z);for(u=C=B=0;u<z;++u)if(v=g[2*u+1]|0,v>=a)v=v-a|0,n(l,k,C--,v);else if(0<=v)n(d,
e,B--,v);else if(v<=-a){v=-v-a|0;for(G=0;G<B;++G)if(w=t(d[G],v),void 0!==w)return w;G=k;w=C++;l[w]=v;G[v]=w}else{v=-v-1|0;for(G=0;G<C;++G)if(w=t(v,l[G]),void 0!==w)return w;G=e;w=B++;d[w]=v;G[v]=w}},sweepComplete:function(q,t,u,w,x,E,F,z,B,C){var v=0,G=2*q;--q;for(var I=G-1;u<w;++u){var J=E[u]+1<<1,K=G*u;g[v++]=x[K+q];g[v++]=-J;g[v++]=x[K+I];g[v++]=J}for(u=F;u<z;++u)J=C[u]+1<<1,w=G*u,g[v++]=B[w+q],g[v++]=-J|1,g[v++]=B[w+I],g[v++]=J|1;z=v>>>1;h(g,z);for(u=v=C=B=0;u<z;++u)if(G=g[2*u+1]|0,w=G&1,u<z-
1&&G>>1===g[2*u+3]>>1&&(w=2,u+=1),0>G){G=-(G>>1)-1;for(x=0;x<v;++x)if(E=t(c[x],G),void 0!==E)return E;if(0!==w)for(x=0;x<B;++x)if(E=t(d[x],G),void 0!==E)return E;if(1!==w)for(x=0;x<C;++x)if(E=t(l[x],G),void 0!==E)return E;0===w?(w=e,x=B++,d[x]=G,w[G]=x):1===w?(w=k,x=C++,l[x]=G,w[G]=x):2===w&&(w=f,x=v++,c[x]=G,w[G]=x)}else G=(G>>1)-1,0===w?n(d,e,B--,G):1===w?n(l,k,C--,G):2===w&&n(c,f,v--,G)},scanBipartite:function(q,t,u,w,x,E,F,z,B,C,v,G){var I=0,J=2*q,K=t+q,N=1,H=1;for(w?H=a:N=a;x<E;++x){var L=x+
N,P=J*x;g[I++]=F[P+t];g[I++]=-L;g[I++]=F[P+K];g[I++]=L}for(x=B;x<C;++x)L=x+H,E=J*x,g[I++]=v[E+t],g[I++]=-L;C=I>>>1;h(g,C);for(x=I=0;x<C;++x)if(L=g[2*x+1]|0,0>L)if(L=-L,L>=a?(H=!w,L-=a):(H=!!w,--L),H)H=e,E=I++,d[E]=L,H[L]=E;else a:for(H=G[L],L*=J,E=v[L+t+1],B=v[L+t+1+q],K=0;K<I;++K){P=d[K];var Q=J*P;if(!(B<F[Q+t+1]||F[Q+t+1+q]<E)){for(var S=t+2;S<q;++S)if(v[L+S+q]<F[Q+S]||F[Q+S+q]<v[L+S])continue a;P=z[P];P=w?u(H,P):u(P,H);if(void 0!==P)return P}}else n(d,e,I--,L-N)},scanComplete:function(q,t,u,w,
x,E,F,z,B,C,v){for(var G=0,I=2*q,J=t+q;w<x;++w){var K=w+a,N=I*w;g[G++]=E[N+t];g[G++]=-K;g[G++]=E[N+J];g[G++]=K}for(w=z;w<B;++w)K=w+1,x=I*w,g[G++]=C[x+t],g[G++]=-K;B=G>>>1;h(g,B);for(w=G=0;w<B;++w)if(x=g[2*w+1]|0,0>x)if(K=-x,K>=a)d[G++]=K-a;else a:for(--K,x=v[K],K*=I,J=C[K+t+1],N=C[K+t+1+q],z=0;z<G;++z){var H=d[z],L=F[H];if(L===x)break;H*=I;if(!(N<E[H+t+1]||E[H+t+1+q]<J)){for(var P=t+2;P<q;++P)if(C[K+P+q]<E[H+P]||E[H+P+q]<C[K+P])continue a;L=u(L,x);if(void 0!==L)return L}}else{K=x-a;for(z=G-1;0<=z;--z)if(d[z]===
K){for(P=z+1;P<G;++P)d[P-1]=d[P];break}--G}}};var m=b("typedarray-pool"),p=b("bit-twiddle"),h=b("./sort"),a=268435456,d=m.mallocInt32(1024),e=m.mallocInt32(1024),l=m.mallocInt32(1024),k=m.mallocInt32(1024),c=m.mallocInt32(1024),f=m.mallocInt32(1024),g=m.mallocDouble(8192)},{"./sort":106,"bit-twiddle":97,"typedarray-pool":567}],108:[function(b,y,D){},{}],109:[function(b,y,D){arguments[4][108][0].apply(D,arguments)},{dup:108}],110:[function(b,y,D){function n(){this._events&&Object.prototype.hasOwnProperty.call(this,
"_events")||(this._events=f(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function m(w,x,E,F){var z;if("function"!==typeof E)throw new TypeError('"listener" argument must be a function');if(z=w._events){z.newListener&&(w.emit("newListener",x,E.listener?E.listener:E),z=w._events);var B=z[x]}else z=w._events=f(null),w._eventsCount=0;B?("function"===typeof B?B=z[x]=F?[E,B]:[B,E]:F?B.unshift(E):B.push(E),B.warned||(E=void 0===w._maxListeners?n.defaultMaxListeners:w._maxListeners)&&
0<E&&B.length>E&&(B.warned=!0,E=Error("Possible EventEmitter memory leak detected. "+B.length+' "'+String(x)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),E.name="MaxListenersExceededWarning",E.emitter=w,E.type=x,E.count=B.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",E.name,E.message))):(z[x]=E,++w._eventsCount);return w}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);
case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var w=Array(arguments.length),x=0;x<w.length;++x)w[x]=arguments[x];this.listener.apply(this.target,w)}}function h(w,x,E){w={fired:!1,wrapFn:void 0,target:w,type:x,listener:E};x=q.call(p,w);x.listener=E;return w.wrapFn=x}function a(w,x,E){w=w._events;if(!w)return[];x=w[x];if(!x)return[];
if("function"===typeof x)return E?[x.listener||x]:[x];if(E)for(E=Array(x.length),w=0;w<E.length;++w)E[w]=x[w].listener||x[w];else E=e(x,x.length);return E}function d(w){var x=this._events;if(x){w=x[w];if("function"===typeof w)return 1;if(w)return w.length}return 0}function e(w,x){for(var E=Array(x),F=0;F<x;++F)E[F]=w[F];return E}function l(w){var x=function(){};x.prototype=w;return new x}function k(w){var x=[],E;for(E in w)Object.prototype.hasOwnProperty.call(w,E)&&x.push(E);return E}function c(w){var x=
this;return function(){return x.apply(w,arguments)}}var f=Object.create||l,g=Object.keys||k,q=Function.prototype.bind||c;y.exports=n;n.EventEmitter=n;n.prototype._events=void 0;n.prototype._maxListeners=void 0;var t=10;try{b={};Object.defineProperty&&Object.defineProperty(b,"x",{value:0});var u=0===b.x}catch(w){u=!1}u?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return t},set:function(w){if("number"!==typeof w||0>w||w!==w)throw new TypeError('"defaultMaxListeners" must be a positive number');
t=w}}):n.defaultMaxListeners=t;n.prototype.setMaxListeners=function(w){if("number"!==typeof w||0>w||isNaN(w))throw new TypeError('"n" argument must be a positive number');this._maxListeners=w;return this};n.prototype.getMaxListeners=function(){return void 0===this._maxListeners?n.defaultMaxListeners:this._maxListeners};n.prototype.emit=function(w){var x,E,F;var z="error"===w;if(F=this._events)z=z&&null==F.error;else if(!z)return!1;if(z){1<arguments.length&&(x=arguments[1]);if(x instanceof Error)throw x;
F=Error('Unhandled "error" event. ('+x+")");F.context=x;throw F;}x=F[w];if(!x)return!1;F="function"===typeof x;var B=arguments.length;switch(B){case 1:if(F)x.call(this);else for(F=x.length,x=e(x,F),z=0;z<F;++z)x[z].call(this);break;case 2:z=arguments[1];if(F)x.call(this,z);else for(F=x.length,x=e(x,F),B=0;B<F;++B)x[B].call(this,z);break;case 3:z=arguments[1];B=arguments[2];if(F)x.call(this,z,B);else for(F=x.length,x=e(x,F),E=0;E<F;++E)x[E].call(this,z,B);break;case 4:z=arguments[1];B=arguments[2];
E=arguments[3];if(F)x.call(this,z,B,E);else{F=x.length;x=e(x,F);for(var C=0;C<F;++C)x[C].call(this,z,B,E)}break;default:z=Array(B-1);for(E=1;E<B;E++)z[E-1]=arguments[E];if(F)x.apply(this,z);else for(F=x.length,x=e(x,F),B=0;B<F;++B)x[B].apply(this,z)}return!0};n.prototype.addListener=function(w,x){return m(this,w,x,!1)};n.prototype.on=n.prototype.addListener;n.prototype.prependListener=function(w,x){return m(this,w,x,!0)};n.prototype.once=function(w,x){if("function"!==typeof x)throw new TypeError('"listener" argument must be a function');
this.on(w,h(this,w,x));return this};n.prototype.prependOnceListener=function(w,x){if("function"!==typeof x)throw new TypeError('"listener" argument must be a function');this.prependListener(w,h(this,w,x));return this};n.prototype.removeListener=function(w,x){var E;if("function"!==typeof x)throw new TypeError('"listener" argument must be a function');var F=this._events;if(!F)return this;var z=F[w];if(!z)return this;if(z===x||z.listener===x)0===--this._eventsCount?this._events=f(null):(delete F[w],
F.removeListener&&this.emit("removeListener",w,z.listener||x));else if("function"!==typeof z){var B=-1;for(E=z.length-1;0<=E;E--)if(z[E]===x||z[E].listener===x){var C=z[E].listener;B=E;break}if(0>B)return this;if(0===B)z.shift();else{E=B+1;for(var v=z.length;E<v;B+=1,E+=1)z[B]=z[E];z.pop()}1===z.length&&(F[w]=z[0]);F.removeListener&&this.emit("removeListener",w,C||x)}return this};n.prototype.removeAllListeners=function(w){var x=this._events;if(!x)return this;if(!x.removeListener)return 0===arguments.length?
(this._events=f(null),this._eventsCount=0):x[w]&&(0===--this._eventsCount?this._events=f(null):delete x[w]),this;if(0===arguments.length){var E=g(x);for(x=0;x<E.length;++x){var F=E[x];"removeListener"!==F&&this.removeAllListeners(F)}this.removeAllListeners("removeListener");this._events=f(null);this._eventsCount=0;return this}E=x[w];if("function"===typeof E)this.removeListener(w,E);else if(E)for(x=E.length-1;0<=x;x--)this.removeListener(w,E[x]);return this};n.prototype.listeners=function(w){return a(this,
w,!0)};n.prototype.rawListeners=function(w){return a(this,w,!1)};n.listenerCount=function(w,x){return"function"===typeof w.listenerCount?w.listenerCount(x):d.call(w,x)};n.prototype.listenerCount=d;n.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],111:[function(b,y,D){(function(n){function m(H){if(2147483647<H)throw new RangeError('The value "'+H+'" is invalid for option "size"');H=new Uint8Array(H);H.__proto__=n.prototype;return H}function n(H,L,P){if("number"===
typeof H){if("string"===typeof L)throw new TypeError('The "string" argument must be of type string. Received type number');return a(H)}return p(H,L,P)}function p(H,L,P){if("string"===typeof H){var Q=L;if("string"!==typeof Q||""===Q)Q="utf8";if(!n.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);L=k(H,Q)|0;P=m(L);H=P.write(H,Q);H!==L&&(P=P.slice(0,H));return P}if(ArrayBuffer.isView(H))return d(H);if(null==H)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof H);if(G(H,ArrayBuffer)||H&&G(H.buffer,ArrayBuffer)){if(0>L||H.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<L+(P||0))throw new RangeError('"length" is outside of buffer bounds');H=void 0===L&&void 0===P?new Uint8Array(H):void 0===P?new Uint8Array(H,L):new Uint8Array(H,L,P);H.__proto__=n.prototype;return H}if("number"===typeof H)throw new TypeError('The "value" argument must not be of type number. Received type number');Q=H.valueOf&&H.valueOf();if(null!=
Q&&Q!==H)return n.from(Q,L,P);if(Q=e(H))return Q;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof H[Symbol.toPrimitive])return n.from(H[Symbol.toPrimitive]("string"),L,P);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);}function h(H){if("number"!==typeof H)throw new TypeError('"size" argument must be of type number');if(0>H)throw new RangeError('The value "'+H+'" is invalid for option "size"');
}function a(H){h(H);return m(0>H?0:l(H)|0)}function d(H){for(var L=0>H.length?0:l(H.length)|0,P=m(L),Q=0;Q<L;Q+=1)P[Q]=H[Q]&255;return P}function e(H){if(n.isBuffer(H)){var L=l(H.length)|0,P=m(L);if(0===P.length)return P;H.copy(P,0,0,L);return P}if(void 0!==H.length)return(L="number"!==typeof H.length)||(L=H.length,L=L!==L),L?m(0):d(H);if("Buffer"===H.type&&Array.isArray(H.data))return d(H.data)}function l(H){if(2147483647<=H)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
(2147483647).toString(16)+" bytes");return H|0}function k(H,L){if(n.isBuffer(H))return H.length;if(ArrayBuffer.isView(H)||G(H,ArrayBuffer))return H.byteLength;if("string"!==typeof H)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);var P=H.length,Q=2<arguments.length&&!0===arguments[2];if(!Q&&0===P)return 0;for(var S=!1;;)switch(L){case "ascii":case "latin1":case "binary":return P;case "utf8":case "utf-8":return z(H).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
P;case "hex":return P>>>1;case "base64":return C(H).length;default:if(S)return Q?-1:z(H).length;L=(""+L).toLowerCase();S=!0}}function c(H,L,P){var Q=!1;if(void 0===L||0>L)L=0;if(L>this.length)return"";if(void 0===P||P>this.length)P=this.length;if(0>=P)return"";P>>>=0;L>>>=0;if(P<=L)return"";for(H||(H="utf8");;)switch(H){case "hex":H=L;L=P;P=this.length;if(!H||0>H)H=0;if(!L||0>L||L>P)L=P;Q="";for(P=H;P<L;++P)H=Q,Q=this[P],Q=16>Q?"0"+Q.toString(16):Q.toString(16),Q=H+Q;return Q;case "utf8":case "utf-8":return t(this,
L,P);case "ascii":H="";for(P=Math.min(this.length,P);L<P;++L)H+=String.fromCharCode(this[L]&127);return H;case "latin1":case "binary":H="";for(P=Math.min(this.length,P);L<P;++L)H+=String.fromCharCode(this[L]);return H;case "base64":return L=0===L&&P===this.length?I.fromByteArray(this):I.fromByteArray(this.slice(L,P)),L;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":L=this.slice(L,P);P="";for(H=0;H<L.length;H+=2)P+=String.fromCharCode(L[H]+256*L[H+1]);return P;default:if(Q)throw new TypeError("Unknown encoding: "+
H);H=(H+"").toLowerCase();Q=!0}}function f(H,L,P){var Q=H[L];H[L]=H[P];H[P]=Q}function g(H,L,P,Q,S){if(0===H.length)return-1;"string"===typeof P?(Q=P,P=0):2147483647<P?P=2147483647:-2147483648>P&&(P=-2147483648);P=+P;P!==P&&(P=S?0:H.length-1);0>P&&(P=H.length+P);if(P>=H.length){if(S)return-1;P=H.length-1}else if(0>P)if(S)P=0;else return-1;"string"===typeof L&&(L=n.from(L,Q));if(n.isBuffer(L))return 0===L.length?-1:q(H,L,P,Q,S);if("number"===typeof L)return L&=255,"function"===typeof Uint8Array.prototype.indexOf?
S?Uint8Array.prototype.indexOf.call(H,L,P):Uint8Array.prototype.lastIndexOf.call(H,L,P):q(H,[L],P,Q,S);throw new TypeError("val must be string, number or Buffer");}function q(H,L,P,Q,S){function O(ea,ca){return 1===U?ea[ca]:ea.readUInt16BE(ca*U)}var U=1,X=H.length,da=L.length;if(void 0!==Q&&(Q=String(Q).toLowerCase(),"ucs2"===Q||"ucs-2"===Q||"utf16le"===Q||"utf-16le"===Q)){if(2>H.length||2>L.length)return-1;U=2;X/=2;da/=2;P/=2}if(S)for(Q=-1;P<X;P++)if(O(H,P)===O(L,-1===Q?0:P-Q)){if(-1===Q&&(Q=P),
P-Q+1===da)return Q*U}else-1!==Q&&(P-=P-Q),Q=-1;else for(P+da>X&&(P=X-da);0<=P;P--){X=!0;for(Q=0;Q<da;Q++)if(O(H,P+Q)!==O(L,Q)){X=!1;break}if(X)return P}return-1}function t(H,L,P){P=Math.min(H.length,P);for(var Q=[];L<P;){var S=H[L],O=null,U=239<S?4:223<S?3:191<S?2:1;if(L+U<=P)switch(U){case 1:128>S&&(O=S);break;case 2:var X=H[L+1];128===(X&192)&&(S=(S&31)<<6|X&63,127<S&&(O=S));break;case 3:X=H[L+1];var da=H[L+2];128===(X&192)&&128===(da&192)&&(S=(S&15)<<12|(X&63)<<6|da&63,2047<S&&(55296>S||57343<
S)&&(O=S));break;case 4:X=H[L+1];da=H[L+2];var ea=H[L+3];128===(X&192)&&128===(da&192)&&128===(ea&192)&&(S=(S&15)<<18|(X&63)<<12|(da&63)<<6|ea&63,65535<S&&1114112>S&&(O=S))}null===O?(O=65533,U=1):65535<O&&(O-=65536,Q.push(O>>>10&1023|55296),O=56320|O&1023);Q.push(O);L+=U}H=Q.length;if(H<=K)Q=String.fromCharCode.apply(String,Q);else{P="";for(L=0;L<H;)P+=String.fromCharCode.apply(String,Q.slice(L,L+=K));Q=P}return Q}function u(H,L,P){if(0!==H%1||0>H)throw new RangeError("offset is not uint");if(H+L>
P)throw new RangeError("Trying to access beyond buffer length");}function w(H,L,P,Q,S,O){if(!n.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>S||L<O)throw new RangeError('"value" argument is out of bounds');if(P+Q>H.length)throw new RangeError("Index out of range");}function x(H,L,P,Q,S,O){if(P+Q>H.length)throw new RangeError("Index out of range");if(0>P)throw new RangeError("Index out of range");}function E(H,L,P,Q,S){L=+L;P>>>=0;S||x(H,L,P,4,3.4028234663852886E38,
-3.4028234663852886E38);J.write(H,L,P,Q,23,4);return P+4}function F(H,L,P,Q,S){L=+L;P>>>=0;S||x(H,L,P,8,1.7976931348623157E308,-1.7976931348623157E308);J.write(H,L,P,Q,52,8);return P+8}function z(H,L){L=L||Infinity;for(var P,Q=H.length,S=null,O=[],U=0;U<Q;++U){P=H.charCodeAt(U);if(55295<P&&57344>P){if(!S){if(56319<P){-1<(L-=3)&&O.push(239,191,189);continue}else if(U+1===Q){-1<(L-=3)&&O.push(239,191,189);continue}S=P;continue}if(56320>P){-1<(L-=3)&&O.push(239,191,189);S=P;continue}P=(S-55296<<10|P-
56320)+65536}else S&&-1<(L-=3)&&O.push(239,191,189);S=null;if(128>P){if(0>--L)break;O.push(P)}else if(2048>P){if(0>(L-=2))break;O.push(P>>6|192,P&63|128)}else if(65536>P){if(0>(L-=3))break;O.push(P>>12|224,P>>6&63|128,P&63|128)}else if(1114112>P){if(0>(L-=4))break;O.push(P>>18|240,P>>12&63|128,P>>6&63|128,P&63|128)}else throw Error("Invalid code point");}return O}function B(H){for(var L=[],P=0;P<H.length;++P)L.push(H.charCodeAt(P)&255);return L}function C(H){var L=I,P=L.toByteArray;H=H.split("\x3d")[0];
H=H.trim().replace(N,"");if(2>H.length)H="";else for(;0!==H.length%4;)H+="\x3d";return P.call(L,H)}function v(H,L,P,Q){for(var S=0;S<Q&&!(S+P>=L.length||S>=H.length);++S)L[S+P]=H[S];return S}function G(H,L){return H instanceof L||null!=H&&null!=H.constructor&&null!=H.constructor.name&&H.constructor.name===L.name}var I=b("base64-js"),J=b("ieee754");D.Buffer=n;D.SlowBuffer=function(H){+H!=H&&(H=0);return n.alloc(+H)};D.INSPECT_MAX_BYTES=50;D.kMaxLength=2147483647;n.TYPED_ARRAY_SUPPORT=function(){try{var H=
new Uint8Array(1);H.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===H.foo()}catch(L){return!1}}();n.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}});Object.defineProperty(n.prototype,
"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}});"undefined"!==typeof Symbol&&null!=Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});n.poolSize=8192;n.from=function(H,L,P){return p(H,L,P)};n.prototype.__proto__=Uint8Array.prototype;n.__proto__=Uint8Array;n.alloc=function(H,L,P){h(H);H=0>=H?m(H):void 0!==L?"string"===typeof P?m(H).fill(L,P):m(H).fill(L):m(H);return H};n.allocUnsafe=
function(H){return a(H)};n.allocUnsafeSlow=function(H){return a(H)};n.isBuffer=function(H){return null!=H&&!0===H._isBuffer&&H!==n.prototype};n.compare=function(H,L){G(H,Uint8Array)&&(H=n.from(H,H.offset,H.byteLength));G(L,Uint8Array)&&(L=n.from(L,L.offset,L.byteLength));if(!n.isBuffer(H)||!n.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===L)return 0;for(var P=H.length,Q=L.length,S=0,O=Math.min(P,Q);S<O;++S)if(H[S]!==L[S]){P=H[S];Q=L[S];
break}return P<Q?-1:Q<P?1:0};n.isEncoding=function(H){switch(String(H).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};n.concat=function(H,L){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(0===H.length)return n.alloc(0);var P;if(void 0===L)for(P=L=0;P<H.length;++P)L+=H[P].length;L=n.allocUnsafe(L);var Q=0;for(P=0;P<
H.length;++P){var S=H[P];G(S,Uint8Array)&&(S=n.from(S));if(!n.isBuffer(S))throw new TypeError('"list" argument must be an Array of Buffers');S.copy(L,Q);Q+=S.length}return L};n.byteLength=k;n.prototype._isBuffer=!0;n.prototype.swap16=function(){var H=this.length;if(0!==H%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<H;L+=2)f(this,L,L+1);return this};n.prototype.swap32=function(){var H=this.length;if(0!==H%4)throw new RangeError("Buffer size must be a multiple of 32-bits");
for(var L=0;L<H;L+=4)f(this,L,L+3),f(this,L+1,L+2);return this};n.prototype.swap64=function(){var H=this.length;if(0!==H%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<H;L+=8)f(this,L,L+7),f(this,L+1,L+6),f(this,L+2,L+5),f(this,L+3,L+4);return this};n.prototype.toString=function(){var H=this.length;return 0===H?"":0===arguments.length?t(this,0,H):c.apply(this,arguments)};n.prototype.toLocaleString=n.prototype.toString;n.prototype.equals=function(H){if(!n.isBuffer(H))throw new TypeError("Argument must be a Buffer");
return this===H?!0:0===n.compare(this,H)};n.prototype.inspect=function(){var H=D.INSPECT_MAX_BYTES;var L=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim();this.length>H&&(L+=" ... ");return"\x3cBuffer "+L+"\x3e"};n.prototype.compare=function(H,L,P,Q,S){G(H,Uint8Array)&&(H=n.from(H,H.offset,H.byteLength));if(!n.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);void 0===L&&(L=0);void 0===P&&(P=H?H.length:0);void 0===Q&&
(Q=0);void 0===S&&(S=this.length);if(0>L||P>H.length||0>Q||S>this.length)throw new RangeError("out of range index");if(Q>=S&&L>=P)return 0;if(Q>=S)return-1;if(L>=P)return 1;L>>>=0;P>>>=0;Q>>>=0;S>>>=0;if(this===H)return 0;var O=S-Q,U=P-L,X=Math.min(O,U);Q=this.slice(Q,S);H=H.slice(L,P);for(L=0;L<X;++L)if(Q[L]!==H[L]){O=Q[L];U=H[L];break}return O<U?-1:U<O?1:0};n.prototype.includes=function(H,L,P){return-1!==this.indexOf(H,L,P)};n.prototype.indexOf=function(H,L,P){return g(this,H,L,P,!0)};n.prototype.lastIndexOf=
function(H,L,P){return g(this,H,L,P,!1)};n.prototype.write=function(H,L,P,Q){if(void 0===L)Q="utf8",P=this.length,L=0;else if(void 0===P&&"string"===typeof L)Q=L,P=this.length,L=0;else if(isFinite(L))L>>>=0,isFinite(P)?(P>>>=0,void 0===Q&&(Q="utf8")):(Q=P,P=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var S=this.length-L;if(void 0===P||P>S)P=S;if(0<H.length&&(0>P||0>L)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");
Q||(Q="utf8");for(S=!1;;)switch(Q){case "hex":a:{L=Number(L)||0;Q=this.length-L;P?(P=Number(P),P>Q&&(P=Q)):P=Q;Q=H.length;P>Q/2&&(P=Q/2);for(Q=0;Q<P;++Q){S=parseInt(H.substr(2*Q,2),16);if(S!==S){H=Q;break a}this[L+Q]=S}H=Q}return H;case "utf8":case "utf-8":return v(z(H,this.length-L),this,L,P);case "ascii":return v(B(H),this,L,P);case "latin1":case "binary":return v(B(H),this,L,P);case "base64":return v(C(H),this,L,P);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":Q=H;S=this.length-L;for(var O=
[],U=0;U<Q.length&&!(0>(S-=2));++U){var X=Q.charCodeAt(U);H=X>>8;X%=256;O.push(X);O.push(H)}return v(O,this,L,P);default:if(S)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase();S=!0}};n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var K=4096;n.prototype.slice=function(H,L){var P=this.length;H=~~H;L=void 0===L?P:~~L;0>H?(H+=P,0>H&&(H=0)):H>P&&(H=P);0>L?(L+=P,0>L&&(L=0)):L>P&&(L=P);L<H&&(L=H);H=this.subarray(H,L);H.__proto__=n.prototype;
return H};n.prototype.readUIntLE=function(H,L,P){H>>>=0;L>>>=0;P||u(H,L,this.length);P=this[H];for(var Q=1,S=0;++S<L&&(Q*=256);)P+=this[H+S]*Q;return P};n.prototype.readUIntBE=function(H,L,P){H>>>=0;L>>>=0;P||u(H,L,this.length);P=this[H+--L];for(var Q=1;0<L&&(Q*=256);)P+=this[H+--L]*Q;return P};n.prototype.readUInt8=function(H,L){H>>>=0;L||u(H,1,this.length);return this[H]};n.prototype.readUInt16LE=function(H,L){H>>>=0;L||u(H,2,this.length);return this[H]|this[H+1]<<8};n.prototype.readUInt16BE=function(H,
L){H>>>=0;L||u(H,2,this.length);return this[H]<<8|this[H+1]};n.prototype.readUInt32LE=function(H,L){H>>>=0;L||u(H,4,this.length);return(this[H]|this[H+1]<<8|this[H+2]<<16)+16777216*this[H+3]};n.prototype.readUInt32BE=function(H,L){H>>>=0;L||u(H,4,this.length);return 16777216*this[H]+(this[H+1]<<16|this[H+2]<<8|this[H+3])};n.prototype.readIntLE=function(H,L,P){H>>>=0;L>>>=0;P||u(H,L,this.length);P=this[H];for(var Q=1,S=0;++S<L&&(Q*=256);)P+=this[H+S]*Q;P>=128*Q&&(P-=Math.pow(2,8*L));return P};n.prototype.readIntBE=
function(H,L,P){H>>>=0;L>>>=0;P||u(H,L,this.length);P=L;for(var Q=1,S=this[H+--P];0<P&&(Q*=256);)S+=this[H+--P]*Q;S>=128*Q&&(S-=Math.pow(2,8*L));return S};n.prototype.readInt8=function(H,L){H>>>=0;L||u(H,1,this.length);return this[H]&128?-1*(255-this[H]+1):this[H]};n.prototype.readInt16LE=function(H,L){H>>>=0;L||u(H,2,this.length);H=this[H]|this[H+1]<<8;return H&32768?H|4294901760:H};n.prototype.readInt16BE=function(H,L){H>>>=0;L||u(H,2,this.length);H=this[H+1]|this[H]<<8;return H&32768?H|4294901760:
H};n.prototype.readInt32LE=function(H,L){H>>>=0;L||u(H,4,this.length);return this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24};n.prototype.readInt32BE=function(H,L){H>>>=0;L||u(H,4,this.length);return this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]};n.prototype.readFloatLE=function(H,L){H>>>=0;L||u(H,4,this.length);return J.read(this,H,!0,23,4)};n.prototype.readFloatBE=function(H,L){H>>>=0;L||u(H,4,this.length);return J.read(this,H,!1,23,4)};n.prototype.readDoubleLE=function(H,L){H>>>=0;L||u(H,8,
this.length);return J.read(this,H,!0,52,8)};n.prototype.readDoubleBE=function(H,L){H>>>=0;L||u(H,8,this.length);return J.read(this,H,!1,52,8)};n.prototype.writeUIntLE=function(H,L,P,Q){H=+H;L>>>=0;P>>>=0;Q||w(this,H,L,P,Math.pow(2,8*P)-1,0);Q=1;var S=0;for(this[L]=H&255;++S<P&&(Q*=256);)this[L+S]=H/Q&255;return L+P};n.prototype.writeUIntBE=function(H,L,P,Q){H=+H;L>>>=0;P>>>=0;Q||w(this,H,L,P,Math.pow(2,8*P)-1,0);Q=P-1;var S=1;for(this[L+Q]=H&255;0<=--Q&&(S*=256);)this[L+Q]=H/S&255;return L+P};n.prototype.writeUInt8=
function(H,L,P){H=+H;L>>>=0;P||w(this,H,L,1,255,0);this[L]=H&255;return L+1};n.prototype.writeUInt16LE=function(H,L,P){H=+H;L>>>=0;P||w(this,H,L,2,65535,0);this[L]=H&255;this[L+1]=H>>>8;return L+2};n.prototype.writeUInt16BE=function(H,L,P){H=+H;L>>>=0;P||w(this,H,L,2,65535,0);this[L]=H>>>8;this[L+1]=H&255;return L+2};n.prototype.writeUInt32LE=function(H,L,P){H=+H;L>>>=0;P||w(this,H,L,4,4294967295,0);this[L+3]=H>>>24;this[L+2]=H>>>16;this[L+1]=H>>>8;this[L]=H&255;return L+4};n.prototype.writeUInt32BE=
function(H,L,P){H=+H;L>>>=0;P||w(this,H,L,4,4294967295,0);this[L]=H>>>24;this[L+1]=H>>>16;this[L+2]=H>>>8;this[L+3]=H&255;return L+4};n.prototype.writeIntLE=function(H,L,P,Q){H=+H;L>>>=0;Q||(Q=Math.pow(2,8*P-1),w(this,H,L,P,Q-1,-Q));Q=0;var S=1,O=0;for(this[L]=H&255;++Q<P&&(S*=256);)0>H&&0===O&&0!==this[L+Q-1]&&(O=1),this[L+Q]=(H/S>>0)-O&255;return L+P};n.prototype.writeIntBE=function(H,L,P,Q){H=+H;L>>>=0;Q||(Q=Math.pow(2,8*P-1),w(this,H,L,P,Q-1,-Q));Q=P-1;var S=1,O=0;for(this[L+Q]=H&255;0<=--Q&&
(S*=256);)0>H&&0===O&&0!==this[L+Q+1]&&(O=1),this[L+Q]=(H/S>>0)-O&255;return L+P};n.prototype.writeInt8=function(H,L,P){H=+H;L>>>=0;P||w(this,H,L,1,127,-128);0>H&&(H=255+H+1);this[L]=H&255;return L+1};n.prototype.writeInt16LE=function(H,L,P){H=+H;L>>>=0;P||w(this,H,L,2,32767,-32768);this[L]=H&255;this[L+1]=H>>>8;return L+2};n.prototype.writeInt16BE=function(H,L,P){H=+H;L>>>=0;P||w(this,H,L,2,32767,-32768);this[L]=H>>>8;this[L+1]=H&255;return L+2};n.prototype.writeInt32LE=function(H,L,P){H=+H;L>>>=
0;P||w(this,H,L,4,2147483647,-2147483648);this[L]=H&255;this[L+1]=H>>>8;this[L+2]=H>>>16;this[L+3]=H>>>24;return L+4};n.prototype.writeInt32BE=function(H,L,P){H=+H;L>>>=0;P||w(this,H,L,4,2147483647,-2147483648);0>H&&(H=4294967295+H+1);this[L]=H>>>24;this[L+1]=H>>>16;this[L+2]=H>>>8;this[L+3]=H&255;return L+4};n.prototype.writeFloatLE=function(H,L,P){return E(this,H,L,!0,P)};n.prototype.writeFloatBE=function(H,L,P){return E(this,H,L,!1,P)};n.prototype.writeDoubleLE=function(H,L,P){return F(this,H,
L,!0,P)};n.prototype.writeDoubleBE=function(H,L,P){return F(this,H,L,!1,P)};n.prototype.copy=function(H,L,P,Q){if(!n.isBuffer(H))throw new TypeError("argument should be a Buffer");P||(P=0);Q||0===Q||(Q=this.length);L>=H.length&&(L=H.length);L||(L=0);0<Q&&Q<P&&(Q=P);if(Q===P||0===H.length||0===this.length)return 0;if(0>L)throw new RangeError("targetStart out of bounds");if(0>P||P>=this.length)throw new RangeError("Index out of range");if(0>Q)throw new RangeError("sourceEnd out of bounds");Q>this.length&&
(Q=this.length);H.length-L<Q-P&&(Q=H.length-L+P);var S=Q-P;if(this===H&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(L,P,Q);else if(this===H&&P<L&&L<Q)for(Q=S-1;0<=Q;--Q)H[Q+L]=this[Q+P];else Uint8Array.prototype.set.call(H,this.subarray(P,Q),L);return S};n.prototype.fill=function(H,L,P,Q){if("string"===typeof H){"string"===typeof L?(Q=L,L=0,P=this.length):"string"===typeof P&&(Q=P,P=this.length);if(void 0!==Q&&"string"!==typeof Q)throw new TypeError("encoding must be a string");
if("string"===typeof Q&&!n.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(1===H.length){var S=H.charCodeAt(0);if("utf8"===Q&&128>S||"latin1"===Q)H=S}}else"number"===typeof H&&(H&=255);if(0>L||this.length<L||this.length<P)throw new RangeError("Out of range index");if(P<=L)return this;L>>>=0;P=void 0===P?this.length:P>>>0;H||(H=0);if("number"===typeof H)for(Q=L;Q<P;++Q)this[Q]=H;else{S=n.isBuffer(H)?H:n.from(H,Q);var O=S.length;if(0===O)throw new TypeError('The value "'+H+'" is invalid for argument "value"');
for(Q=0;Q<P-L;++Q)this[Q+L]=S[Q%O]}return this};var N=/[^+/0-9A-Za-z-_]/g}).call(this,b("buffer").Buffer)},{"base64-js":79,buffer:111,ieee754:416}],112:[function(b,y,D){function n(l){return[Math.min(l[0],l[1]),Math.max(l[0],l[1])]}function m(l,k){return l[0]-k[0]||l[1]-k[1]}function p(l,k,c){return k in l?l[k]:c}var h=b("./lib/monotone"),a=b("./lib/triangulation"),d=b("./lib/delaunay"),e=b("./lib/filter");y.exports=function(l,k,c){Array.isArray(k)?(c=c||{},k=k||[]):(c=k||{},k=[]);var f=!!p(c,"delaunay",
!0),g=!!p(c,"interior",!0),q=!!p(c,"exterior",!0);c=!!p(c,"infinity",!1);if(!g&&!q||0===l.length)return[];var t=h(l,k);if(f||g!==q||c){k=a(l.length,k.map(n).sort(m));for(var u=0;u<t.length;++u){var w=t[u];k.addTriangle(w[0],w[1],w[2])}f&&d(l,k);return q?g?c?e(k,0,c):k.cells():e(k,1,c):e(k,-1)}return t}},{"./lib/delaunay":113,"./lib/filter":114,"./lib/monotone":115,"./lib/triangulation":116}],113:[function(b,y,D){function n(p,h,a,d,e,l){var k=h.opposite(d,e);if(!(0>k)){if(e<d){var c=d;d=e;e=c;c=l;
l=k;k=c}h.isConstraint(d,e)||0>m(p[d],p[e],p[l],p[k])&&a.push(d,e)}}var m=b("robust-in-sphere")[4];b("binary-search-bounds");y.exports=function(p,h){for(var a=[],d=p.length,e=h.stars,l=0;l<d;++l)for(var k=e[l],c=1;c<k.length;c+=2){var f=k[c];if(!(f<l||h.isConstraint(l,f))){for(var g=k[c-1],q=-1,t=1;t<k.length;t+=2)if(k[t-1]===f){q=k[t];break}0>q||0>m(p[l],p[f],p[g],p[q])&&a.push(l,f)}}for(;0<a.length;){f=a.pop();l=a.pop();q=g=-1;k=e[l];for(d=1;d<k.length;d+=2)c=k[d-1],t=k[d],c===f?q=t:t===f&&(g=c);
0>g||0>q||0<=m(p[l],p[f],p[g],p[q])||(h.flip(l,f),n(p,h,a,g,l,q),n(p,h,a,l,q,g),n(p,h,a,q,f,g),n(p,h,a,f,g,q))}}},{"binary-search-bounds":96,"robust-in-sphere":518}],114:[function(b,y,D){function n(h,a,d,e,l,k,c){this.cells=h;this.neighbor=a;this.flags=e;this.constraint=d;this.active=l;this.next=k;this.boundary=c}function m(h,a){return h[0]-a[0]||h[1]-a[1]||h[2]-a[2]}var p=b("binary-search-bounds");y.exports=function(h,a,d){for(var e=h.cells(),l=e.length,k=0;k<l;++k){var c=e[k],f=c[0],g=c[1],q=c[2];
g<q?g<f&&(c[0]=g,c[1]=q,c[2]=f):q<f&&(c[0]=q,c[1]=f,c[2]=g)}e.sort(m);var t=Array(l);for(k=0;k<t.length;++k)t[k]=0;var u=[],w=[],x=Array(3*l),E=Array(3*l),F=null;d&&(F=[]);q=new n(e,x,E,t,u,w,F);for(k=0;k<l;++k){c=e[k];for(var z=0;3>z;++z){f=c[z];g=c[(z+1)%3];var B=x[3*k+z]=q.locate(g,f,h.opposite(g,f)),C=E[3*k+z]=h.isConstraint(f,g);0>B&&(C?w.push(k):(u.push(k),t[k]=1),d&&F.push([g,f,-1]))}}if(0===a)return d?q.cells.concat(q.boundary):q.cells;l=1;k=q.active;c=q.next;h=q.flags;e=q.cells;f=q.constraint;
for(g=q.neighbor;0<k.length||0<c.length;){for(;0<k.length;)if(t=k.pop(),h[t]!==-l)for(h[t]=l,u=0;3>u;++u)w=g[3*t+u],0<=w&&0===h[w]&&(f[3*t+u]?c.push(w):(k.push(w),h[w]=l));t=c;c=k;k=t;c.length=0;l=-l}for(k=l=0;k<e.length;++k)h[k]===a&&(e[l++]=e[k]);e.length=l;return d?e.concat(q.boundary):e};n.prototype.locate=function(){var h=[0,0,0];return function(a,d,e){var l=a,k=d,c=e;d<e?d<a&&(l=d,k=e,c=a):e<a&&(l=e,k=a,c=d);if(0>l)return-1;h[0]=l;h[1]=k;h[2]=c;return p.eq(this.cells,h,m)}}()},{"binary-search-bounds":96}],
115:[function(b,y,D){function n(l,k,c,f,g){this.a=l;this.b=k;this.idx=c;this.lowerIds=f;this.upperIds=g}function m(l,k,c,f){this.a=l;this.b=k;this.type=c;this.idx=f}function p(l,k){var c=l.a[0]-k.a[0]||l.a[1]-k.a[1]||l.type-k.type;return c||0!==l.type&&(c=e(l.a,l.b,k.b))?c:l.idx-k.idx}function h(l,k){return e(l.a,l.b,k)}function a(l,k){var c;return(c=l.a[0]<k.a[0]?e(l.a,l.b,k.a):e(k.b,k.a,l.a))?c:(c=k.b[0]<l.b[0]?e(l.a,l.b,k.b):e(k.b,k.a,l.b))||l.idx-k.idx}var d=b("binary-search-bounds"),e=b("robust-orientation")[3];
y.exports=function(l,k){for(var c=l.length,f=k.length,g=[],q=0;q<c;++q)g.push(new m(l[q],null,0,q));for(q=0;q<f;++q){var t=k[q];c=l[t[0]];t=l[t[1]];c[0]<t[0]?g.push(new m(c,t,2,q),new m(t,c,1,q)):c[0]>t[0]&&g.push(new m(t,c,2,q),new m(c,t,1,q))}g.sort(p);q=g[0].a[0]-(1+Math.abs(g[0].a[0]))*Math.pow(2,-52);k=[new n([q,1],[q,0],-1,[],[],[],[])];f=[];q=0;for(c=g.length;q<c;++q){var u=g[q];t=u.type;if(0===t){t=f;var w=k,x=l,E=u.a;u=u.idx;for(var F=d.lt(w,E,h),z=d.gt(w,E,h);F<z;++F){for(var B=w[F],C=B.lowerIds,
v=C.length;1<v&&0<e(x[C[v-2]],x[C[v-1]],E);)t.push([C[v-1],C[v-2],u]),--v;C.length=v;C.push(u);B=B.upperIds;for(v=B.length;1<v&&0>e(x[B[v-2]],x[B[v-1]],E);)t.push([B[v-2],B[v-1],u]),--v;B.length=v;B.push(u)}}else 2===t?(t=k,w=u,x=d.le(t,w,a),E=t[x],u=E.upperIds,z=u[u.length-1],E.upperIds=[z],t.splice(x+1,0,new n(w.a,w.b,w.idx,[z],u))):(t=k,w=u,x=w.a,w.a=w.b,w.b=x,w=d.eq(t,w,a),t[w-1].upperIds=t[w].upperIds,t.splice(w,1))}return f}},{"binary-search-bounds":96,"robust-orientation":520}],116:[function(b,
y,D){function n(h,a){this.stars=h;this.edges=a}function m(h,a,d){for(var e=1,l=h.length;e<l;e+=2)if(h[e-1]===a&&h[e]===d){h[e-1]=h[l-2];h[e]=h[l-1];h.length=l-2;break}}var p=b("binary-search-bounds");y.exports=function(h,a){for(var d=Array(h),e=0;e<h;++e)d[e]=[];return new n(d,a)};b=n.prototype;b.isConstraint=function(){function h(d,e){return d[0]-e[0]||d[1]-e[1]}var a=[0,0];return function(d,e){a[0]=Math.min(d,e);a[1]=Math.max(d,e);return 0<=p.eq(this.edges,a,h)}}();b.removeTriangle=function(h,a,
d){var e=this.stars;m(e[h],a,d);m(e[a],d,h);m(e[d],h,a)};b.addTriangle=function(h,a,d){var e=this.stars;e[h].push(a,d);e[a].push(d,h);e[d].push(h,a)};b.opposite=function(h,a){a=this.stars[a];for(var d=1,e=a.length;d<e;d+=2)if(a[d]===h)return a[d-1];return-1};b.flip=function(h,a){var d=this.opposite(h,a),e=this.opposite(a,h);this.removeTriangle(h,a,d);this.removeTriangle(a,h,e);this.addTriangle(h,e,d);this.addTriangle(a,d,e)};b.edges=function(){for(var h=this.stars,a=[],d=0,e=h.length;d<e;++d)for(var l=
h[d],k=0,c=l.length;k<c;k+=2)a.push([l[k],l[k+1]]);return a};b.cells=function(){for(var h=this.stars,a=[],d=0,e=h.length;d<e;++d)for(var l=h[d],k=0,c=l.length;k<c;k+=2){var f=l[k],g=l[k+1];d<Math.min(f,g)&&a.push([d,f,g])}return a}},{"binary-search-bounds":96}],117:[function(b,y,D){y.exports=function(n){for(var m=1,p=1;p<n.length;++p)for(var h=0;h<p;++h)if(n[p]<n[h])m=-m;else if(n[h]===n[p])return 0;return m}},{}],118:[function(b,y,D){function n(d,e){for(var l=0,k=d.length,c=0;c<k;++c)l+=d[c]*e[c];
return l}function m(d){var e=d.length;if(0===e)return[];for(var l=h([d.length+1,d.length+1],1),k=h([d.length+1],1),c=l[e][e]=0;c<e;++c){for(var f=0;f<=c;++f)l[f][c]=l[c][f]=2*n(d[c],d[f]);k[c]=n(d[c],d[c])}d=a(l,k);l=0;k=d[e+1];for(c=0;c<k.length;++c)l+=k[c];var g=Array(e);for(c=0;c<e;++c){k=d[c];var q=0;for(f=0;f<k.length;++f)q+=k[f];g[c]=q/l}return g}function p(d){if(0===d.length)return[];for(var e=d[0].length,l=h([e]),k=m(d),c=0;c<d.length;++c)for(var f=0;f<e;++f)l[f]+=d[c][f]*k[c];return l}var h=
b("dup"),a=b("robust-linear-solve");p.barycenetric=m;y.exports=p},{dup:176,"robust-linear-solve":519}],119:[function(b,y,D){y.exports=function(m){for(var p=n(m),h=0,a=0;a<m.length;++a)for(var d=m[a],e=0;e<p.length;++e)h+=Math.pow(d[e]-p[e],2);return Math.sqrt(h/m.length)};var n=b("circumcenter")},{circumcenter:118}],120:[function(b,y,D){y.exports=function(n,m,p){return m<p?n<m?m:n>p?p:n:n<p?p:n>m?m:n}},{}],121:[function(b,y,D){function n(z){z=w(z);return[E(z,-Infinity),E(z,Infinity)]}function m(z){for(var B=
Array(z.length),C=0;C<z.length;++C){var v=z[C];B[C]=[E(v[0],-Infinity),E(v[1],-Infinity),E(v[0],Infinity),E(v[1],Infinity)]}return B}function p(z,B,C){var v=[];g(C,function(G,I){var J=B[G],K=B[I];J[0]!==K[0]&&J[0]!==K[1]&&J[1]!==K[0]&&J[1]!==K[1]&&q(z[J[0]],z[J[1]],z[K[0]],z[K[1]])&&v.push([G,I])});return v}function h(z,B,C,v){var G=[];g(C,v,function(I,J){var K=B[I];if(K[0]!==J&&K[1]!==J){var N=z[J];q(z[K[0]],z[K[1]],N,N)&&G.push([I,J])}});return G}function a(z,B,C,v,G){var I,J=z.map(function(O){return[t(O[0]),
t(O[1])]});for(I=0;I<C.length;++I){var K=C[I];var N=K[0];K=K[1];var H=B[N],L=B[K];if(H=F(x(z[H[0]]),x(z[H[1]]),x(z[L[0]]),x(z[L[1]])))L=z.length,z.push([w(H[0]),w(H[1])]),J.push(H),v.push([N,L],[K,L])}v.sort(function(O,U){if(O[0]!==U[0])return O[0]-U[0];O=J[O[1]];U=J[U[1]];return u(O[0],U[0])||u(O[1],U[1])});for(I=v.length-1;0<=I;--I){K=v[I];N=K[0];H=B[N];L=H[0];C=H[1];var P=z[L],Q=z[C];0>(P[0]-Q[0]||P[1]-Q[1])&&(P=L,L=C,C=P);H[0]=L;L=H[1]=K[1];var S;for(G&&(S=H[2]);0<I&&v[I-1][0]===N;)K=v[--I],K=
K[1],G?B.push([L,K,S]):B.push([L,K]),L=K;G?B.push([L,C,S]):B.push([L,C])}return J}function d(z,B,C){C=B.length;for(var v=new f(C),G=[],I=0;I<B.length;++I){var J=B[I],K=n(J[0]);J=n(J[1]);G.push([E(K[0],-Infinity),E(J[0],-Infinity),E(K[1],Infinity),E(J[1],Infinity)])}g(G,function(N,H){v.link(N,H)});K=!0;B=Array(C);for(I=0;I<C;++I)G=v.find(I),G!==I&&(K=!1,z[G]=[Math.min(z[I][0],z[G][0]),Math.min(z[I][1],z[G][1])]);if(K)return null;for(I=K=0;I<C;++I)G=v.find(I),G===I?(B[I]=K,z[K++]=z[I]):B[I]=-1;z.length=
K;for(I=0;I<C;++I)0>B[I]&&(B[I]=B[v.find(I)]);return B}function e(z,B){return z[0]-B[0]||z[1]-B[1]}function l(z,B){var C=z[0]-B[0]||z[1]-B[1];return C?C:z[2]<B[2]?-1:z[2]>B[2]?1:0}function k(z,B,C){if(0!==z.length){if(B)for(var v=0;v<z.length;++v){var G=z[v],I=B[G[0]],J=B[G[1]];G[0]=Math.min(I,J);G[1]=Math.max(I,J)}else for(v=0;v<z.length;++v)G=z[v],I=G[0],J=G[1],G[0]=Math.min(I,J),G[1]=Math.max(I,J);C?z.sort(l):z.sort(e);for(v=B=1;v<z.length;++v)if(G=z[v-1],I=z[v],I[0]!==G[0]||I[1]!==G[1]||C&&I[2]!==
G[2])z[B++]=I;z.length=B}}function c(z,B,C){for(var v=Array(B.length),G=0;G<B.length;++G){var I=B[G],J=z[I[0]];I=z[I[1]];v[G]=[E(Math.min(J[0],I[0]),-Infinity),E(Math.min(J[1],I[1]),-Infinity),E(Math.max(J[0],I[0]),Infinity),E(Math.max(J[1],I[1]),Infinity)]}G=p(z,B,v);J=m(z);v=h(z,B,v,J);I=a(z,B,G,v,C);z=d(z,I,J);k(B,z,C);return z?!0:0<G.length||0<v.length}y.exports=function(z,B,C){if(C){var v=B;for(var G=Array(B.length),I=0;I<B.length;++I){var J=B[I];G[I]=[J[0],J[1],C[I]]}B=G}I=B;J=!!C;G=d(z,[],
m(z));k(I,G,J);for(G=!!G;c(z,B,!!C);)G=!0;if(C&&G)for(v.length=0,I=C.length=0;I<B.length;++I)J=B[I],v.push([J[0],J[1]]),C.push(J[2]);return G};var f=b("union-find"),g=b("box-intersect"),q=b("robust-segment-intersect"),t=b("big-rat"),u=b("big-rat/cmp"),w=b("big-rat/to-float"),x=b("rat-vec"),E=b("nextafter"),F=b("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":122,"big-rat":83,"big-rat/cmp":81,"big-rat/to-float":95,"box-intersect":101,nextafter:470,"rat-vec":504,"robust-segment-intersect":523,
"union-find":568}],122:[function(b,y,D){function n(k,c){return h(m(k[0],c[1]),m(k[1],c[0]))}y.exports=function(k,c,f,g){c=d(c,k);var q=d(g,f);g=n(c,q);if(0===a(g))return null;f=d(k,f);f=n(q,f);f=p(f,g);c=l(c,f);return e(k,c)};var m=b("big-rat/mul"),p=b("big-rat/div"),h=b("big-rat/sub"),a=b("big-rat/sign"),d=b("rat-vec/sub"),e=b("rat-vec/add"),l=b("rat-vec/muls")},{"big-rat/div":82,"big-rat/mul":92,"big-rat/sign":93,"big-rat/sub":94,"rat-vec/add":503,"rat-vec/muls":505,"rat-vec/sub":506}],123:[function(b,
y,D){function n(p,h){null==h&&(h=!0);var a=p[0],d=p[1],e=p[2];p=p[3];null==p&&(p=h?1:255);h&&(a*=255,d*=255,e*=255,p*=255);a=m(a,0,255)&255;d=m(d,0,255)&255;e=m(e,0,255)&255;p=m(p,0,255)&255;return 16777216*a+(d<<16)+(e<<8)+p}var m=b("clamp");y.exports=n;y.exports.to=n;y.exports.from=function(p,h){p=+p;var a=p>>>24,d=(p&16711680)>>>16,e=(p&65280)>>>8;p&=255;return!1===h?[a,d,e,p]:[a/255,d/255,e/255,p/255]}},{clamp:120}],124:[function(b,y,D){y.exports={aliceblue:[240,248,255],antiquewhite:[250,235,
215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,
100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,
240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,
255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,
211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,
238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,
128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],125:[function(b,y,D){var n=b("color-rgba"),m=b("clamp"),p=b("dtype");y.exports=function(h,a){"float"!==a&&a||(a="array");"uint"===a&&(a="uint8");"uint_clamped"===a&&(a="uint8_clamped");var d=
new (p(a))(4);a="uint8"!==a&&"uint8_clamped"!==a;h.length&&"string"!==typeof h||(h=n(h),h[0]/=255,h[1]/=255,h[2]/=255);var e=h;e=e instanceof Uint8Array||e instanceof Uint8ClampedArray?!0:Array.isArray(e)&&(1<e[0]||0===e[0])&&(1<e[1]||0===e[1])&&(1<e[2]||0===e[2])&&(!e[3]||1<e[3])?!0:!1;if(e)return d[0]=h[0],d[1]=h[1],d[2]=h[2],d[3]=null!=h[3]?h[3]:255,a&&(d[0]/=255,d[1]/=255,d[2]/=255,d[3]/=255),d;a?(d[0]=h[0],d[1]=h[1],d[2]=h[2],d[3]=null!=h[3]?h[3]:1):(d[0]=m(Math.floor(255*h[0]),0,255),d[1]=m(Math.floor(255*
h[1]),0,255),d[2]=m(Math.floor(255*h[2]),0,255),d[3]=null==h[3]?255:m(Math.floor(255*h[3]),0,255));return d}},{clamp:120,"color-rgba":127,dtype:175}],126:[function(b,y,D){(function(n){var m=b("color-name"),p=b("is-plain-obj"),h=b("defined");y.exports=function(d){var e,l=[],k=1;if("string"===typeof d)if(m[d]){l=m[d].slice();var c="rgb"}else if("transparent"===d)k=0,c="rgb",l=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(d)){var f=d.slice(1),g=f.length;k=1;4>=g?(l=[parseInt(f[0]+f[0],16),parseInt(f[1]+f[1],
16),parseInt(f[2]+f[2],16)],4===g&&(k=parseInt(f[3]+f[3],16)/255)):(l=[parseInt(f[0]+f[1],16),parseInt(f[2]+f[3],16),parseInt(f[4]+f[5],16)],8===g&&(k=parseInt(f[6]+f[7],16)/255));l[0]||(l[0]=0);l[1]||(l[1]=0);l[2]||(l[2]=0);c="rgb"}else(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(d))?(d=e[1],k="rgb"===d,c=f=d.replace(/a$/,""),g="cmyk"===f?4:"gray"===f?1:3,l=e[2].trim().split(/\s*,\s*/).map(function(q,t){if(/%$/.test(q)){if(t===g)return parseFloat(q)/
100;if("rgb"===f)return 255*parseFloat(q)/100}else if("h"===f[t]&&!/deg$/.test(q)&&void 0!==a[q])return a[q];return parseFloat(q)}),d===f&&l.push(1),k=k?1:void 0===l[g]?1:l[g],l=l.slice(0,g)):10<d.length&&/[0-9](?:\s|\/)/.test(d)&&(l=d.match(/([0-9]+)/g).map(function(q){return parseFloat(q)}),c=d.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(d))c="rgb",l=[d>>>16,(d&65280)>>>8,d&255];else if(p(d))e=h(d.r,d.red,d.R,null),null!==e?(c="rgb",l=[e,h(d.g,d.green,d.G),h(d.b,d.blue,d.B)]):(c="hsl",
l=[h(d.h,d.hue,d.H),h(d.s,d.saturation,d.S),h(d.l,d.lightness,d.L,d.b,d.brightness)]),k=h(d.a,d.alpha,d.opacity,1),null!=d.opacity&&(k/=100);else if(Array.isArray(d)||n.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(d))l=[d[0],d[1],d[2]],c="rgb",k=4===d.length?d[3]:1;return{space:c,values:l,alpha:k}};var a={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!==typeof xa?xa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"color-name":124,defined:170,
"is-plain-obj":443}],127:[function(b,y,D){var n=b("color-parse"),m=b("color-space/hsl"),p=b("clamp");y.exports=function(h){var a=n(h);if(!a.space)return[];h=Array(3);h[0]=p(a.values[0],0,255);h[1]=p(a.values[1],0,255);h[2]=p(a.values[2],0,255);"h"===a.space[0]&&(h=m.rgb(h));h.push(p(a.alpha,0,1));return h}},{clamp:120,"color-parse":126,"color-space/hsl":128}],128:[function(b,y,D){b=b("./rgb");y.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],
rgb:function(n){var m=n[0]/360,p=n[1]/100;n=n[2]/100;if(0===p){var h=255*n;return[h,h,h]}p=.5>n?n*(1+p):n+p-n*p;n=2*n-p;var a=[0,0,0];for(var d=0;3>d;d++)h=m+1/3*-(d-1),0>h?h++:1<h&&h--,h=1>6*h?n+6*(p-n)*h:1>2*h?p:2>3*h?n+(p-n)*(2/3-h)*6:n,a[d]=255*h;return a}};b.hsl=function(n){var m=n[0]/255,p=n[1]/255,h=n[2]/255;n=Math.min(m,p,h);var a=Math.max(m,p,h),d=a-n,e;a===n?e=0:m===a?e=(p-h)/d:p===a?e=2+(h-m)/d:h===a&&(e=4+(m-p)/d);e=Math.min(60*e,360);0>e&&(e+=360);m=(n+a)/2;return[e,100*(a===n?0:.5>=
m?d/(a+n):d/(2-a-n)),100*m]}},{"./rgb":129}],129:[function(b,y,D){y.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],130:[function(b,y,D){y.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,
252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,
rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,
rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,
rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,
204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},
{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,
90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},
{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,
34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,
rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},
{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,
rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,
241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,
rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},
{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,
rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,
rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},
{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,
191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],131:[function(b,y,D){function n(d){return[d[0]/255,d[1]/255,d[2]/255,d[3]]}function m(d){for(var e,l="#",k=0;3>k;++k)e=d[k],e=e.toString(16),l+=("00"+e).substr(e.length);return l}function p(d){return"rgba("+d.join(",")+")"}var h=b("./colorScale"),a=b("lerp");y.exports=function(d){var e,l;d||(d={});var k=(d.nshades||72)-1;var c=d.format||"hex";(e=d.colormap)||(e="jet");if("string"===typeof e){e=e.toLowerCase();
if(!h[e])throw Error(e+" not a supported colorscale");var f=h[e]}else if(Array.isArray(e))f=e.slice();else throw Error("unsupported colormap option",e);if(f.length>k+1)throw Error(e+" map requires nshades to be at least size "+f.length);var g=Array.isArray(d.alpha)?2!==d.alpha.length?[1,1]:d.alpha.slice():"number"===typeof d.alpha?[d.alpha,d.alpha]:[1,1];d=f.map(function(F){return Math.round(F.index*k)});g[0]=Math.min(Math.max(g[0],0),1);g[1]=Math.min(Math.max(g[1],0),1);var q=f.map(function(F,z){F=
f[z].index;z=f[z].rgb.slice();if(4===z.length&&0<=z[3]&&1>=z[3])return z;z[3]=g[0]+(g[1]-g[0])*F;return z});var t=[];for(l=0;l<d.length-1;++l){var u=d[l+1]-d[l];e=q[l];var w=q[l+1];for(var x=0;x<u;x++){var E=x/u;t.push([Math.round(a(e[0],w[0],E)),Math.round(a(e[1],w[1],E)),Math.round(a(e[2],w[2],E)),a(e[3],w[3],E)])}}t.push(f[f.length-1].rgb.concat(g[1]));"hex"===c?t=t.map(m):"rgbaString"===c?t=t.map(p):"float"===c&&(t=t.map(n));return t}},{"./colorScale":130,lerp:446}],132:[function(b,y,D){function n(e,
l,k){var c=h(e[0],-l[0]);e=h(e[1],-l[1]);var f=h(k[0],-l[0]);l=h(k[1],-l[1]);c=d(a(c,f),a(e,l));return 0<=c[c.length-1]}y.exports=function(e,l,k,c){var f=m(l,k,c);if(0===f){f=p(m(e,l,k));var g=p(m(e,l,c));return f===g?0===f&&(k=n(e,l,k),e=n(e,l,c),k!==e)?k?1:-1:0:0===g?0<f?-1:n(e,l,c)?-1:1:0===f?0<g?1:n(e,l,k)?1:-1:p(g-f)}g=m(e,l,k);return 0<g?0<f&&0<m(e,l,c)?1:-1:0>g?0<f||0<m(e,l,c)?1:-1:0<m(e,l,c)?1:n(e,l,k)?1:-1};var m=b("robust-orientation"),p=b("signum"),h=b("two-sum"),a=b("robust-product"),
d=b("robust-sum")},{"robust-orientation":520,"robust-product":521,"robust-sum":525,signum:526,"two-sum":555}],133:[function(b,y,D){function n(p,h){return p-h}y.exports=function(p,h){var a=p.length,d=p.length-h.length;if(d)return d;switch(a){case 0:return 0;case 1:return p[0]-h[0];case 2:return p[0]+p[1]-h[0]-h[1]||m(p[0],p[1])-m(h[0],h[1]);case 3:a=p[0]+p[1];var e=h[0]+h[1];if(d=a+p[2]-(e+h[2]))return d;d=m(p[0],p[1]);var l=m(h[0],h[1]);return m(d,p[2])-m(l,h[2])||m(d+p[2],a)-m(l+h[2],e);case 4:d=
p[0];a=p[1];e=p[2];p=p[3];l=h[0];var k=h[1],c=h[2];h=h[3];return d+a+e+p-(l+k+c+h)||m(d,a,e,p)-m(l,k,c,h,l)||m(d+a,d+e,d+p,a+e,a+p,e+p)-m(l+k,l+c,l+h,k+c,k+h,c+h)||m(d+a+e,d+a+p,d+e+p,a+e+p)-m(l+k+c,l+k+h,l+c+h,k+c+h);default:p=p.slice().sort(n);h=h.slice().sort(n);for(e=0;e<a;++e)if(d=p[e]-h[e])return d;return 0}};var m=Math.min},{}],134:[function(b,y,D){var n=b("compare-cell"),m=b("cell-orientation");y.exports=function(p,h){return n(p,h)||m(p)-m(h)}},{"cell-orientation":117,"compare-cell":133}],
135:[function(b,y,D){var n=b("./lib/ch1d"),m=b("./lib/ch2d"),p=b("./lib/chnd");y.exports=function(h){var a=h.length;if(0===a)return[];if(1===a)return[[0]];a=h[0].length;return 0===a?[]:1===a?n(h):2===a?m(h):p(h,a)}},{"./lib/ch1d":136,"./lib/ch2d":137,"./lib/chnd":138}],136:[function(b,y,D){y.exports=function(n){for(var m=0,p=0,h=1;h<n.length;++h)n[h][0]<n[m][0]&&(m=h),n[h][0]>n[p][0]&&(p=h);return m<p?[[m],[p]]:m>p?[[p],[m]]:[[m]]}},{}],137:[function(b,y,D){y.exports=function(m){m=n(m);var p=m.length;
if(2>=p)return[];for(var h=Array(p),a=m[p-1],d=0;d<p;++d){var e=m[d];h[d]=[a,e];a=e}return h};var n=b("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":456}],138:[function(b,y,D){y.exports=function(p,h){try{return n(p,!0)}catch(g){var a=m(p);if(a.length<=h)return[];h=p.length;for(var d=Array(h),e=0;e<a.length;++e)d[e]=p[a[e]];var l=a.length;for(e=0;e<h;++e)0>a.indexOf(e)&&(d[l++]=p[e]);p=n(d,!0);h=p.length;d=a.length;for(e=0;e<h;++e){l=p[e];for(var k=0;k<l.length;++k){var c=l[k];if(c<d)l[k]=
a[c];else{c-=d;for(var f=0;f<d;++f)c>=a[f]&&(c+=1);l[k]=c}}}return p}};var n=b("incremental-convex-hull"),m=b("affine-hull")},{"affine-hull":67,"incremental-convex-hull":433}],139:[function(b,y,D){y.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?\x3d.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",
BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?\x3d.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?\x3d.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?\x3d.*bonaire).*eustatius|^(?\x3d.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",
KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?\x3d.*peo)(?\x3d.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",
CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?\x3d.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?\x3d.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",
FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?\x3d.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?\x3d.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",
GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?\x3d.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?\x3d.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",
JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?\x3d.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",
MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?\x3d.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",
OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",
SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?\x3d.*collectivity).*martin|^(?\x3d.*france).*martin(?!ique)|^(?\x3d.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",
SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?\x3d.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?\x3d.*leste).*timor|^(?\x3d.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",
ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?\x3d.*socialist).*viet.?nam",VGB:"^(?\x3d.*\\bu\\.?\\s?k).*virgin|^(?\x3d.*brit).*virgin|^(?\x3d.*kingdom).*virgin",VIR:"^(?\x3d.*\\bu\\.?\\s?s).*virgin|^(?\x3d.*states).*virgin",
WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?\x3d.*peo).*yemen|^(?!.*rep)(?\x3d.*dem).*yemen|^(?\x3d.*south).*yemen|^(?\x3d.*aden).*yemen|^(?\x3d.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],140:[function(b,y,D){y.exports="xx-small x-small small medium large x-large xx-large larger smaller".split(" ")},
{}],141:[function(b,y,D){y.exports="normal condensed semi-condensed extra-condensed ultra-condensed expanded semi-expanded extra-expanded ultra-expanded".split(" ")},{}],142:[function(b,y,D){y.exports=["normal","italic","oblique"]},{}],143:[function(b,y,D){y.exports="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ")},{}],144:[function(b,y,D){y.exports={parse:b("./parse"),stringify:b("./stringify")}},{"./parse":146,"./stringify":147}],145:[function(b,y,D){var n=b("css-font-size-keywords");
y.exports={isSize:function(m){return/^[\d\.]/.test(m)||-1!==m.indexOf("/")||-1!==n.indexOf(m)}}},{"css-font-size-keywords":140}],146:[function(b,y,D){function n(g){if("string"!==typeof g)throw Error("Font argument must be a string.");if(f[g])return f[g];if(""===g)throw Error("Cannot parse an empty string.");if(-1!==a.indexOf(g))return f[g]={system:g};for(var q={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},t=k(g,/\s+/),u;u=t.shift();){if(-1!==
h.indexOf(u))return["style","variant","weight","stretch"].forEach(function(x){q[x]=u}),f[g]=q;if(-1!==e.indexOf(u))q.style=u;else if("normal"===u||"small-caps"===u)q.variant=u;else if(-1!==l.indexOf(u))q.stretch=u;else if(-1!==d.indexOf(u))q.weight=u;else{if(c(u)){var w=k(u,"/");q.size=w[0];null!=w[1]?q.lineHeight=m(w[1]):"/"===t[0]&&(t.shift(),q.lineHeight=m(t.shift()));if(!t.length)throw Error("Missing required font-family.");q.family=k(t.join(" "),/\s*,\s*/).map(p);return f[g]=q}throw Error("Unknown or unsupported font token: "+
u);}}throw Error("Missing required font-size.");}function m(g){var q=parseFloat(g);return q.toString()===g?q:g}var p=b("unquote"),h=b("css-global-keywords"),a=b("css-system-font-keywords"),d=b("css-font-weight-keywords"),e=b("css-font-style-keywords"),l=b("css-font-stretch-keywords"),k=b("string-split-by"),c=b("./lib/util").isSize;y.exports=n;var f=n.cache={}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,
"string-split-by":540,unquote:570}],147:[function(b,y,D){function n(g,q){if(g&&!q[g]&&!a[g])throw Error("Unknown keyword `"+g+"`");return g}function m(g){for(var q={},t=0;t<g.length;t++)q[g[t]]=1;return q}var p=b("pick-by-alias"),h=b("./lib/util").isSize,a=m(b("css-global-keywords")),d=m(b("css-system-font-keywords")),e=m(b("css-font-weight-keywords")),l=m(b("css-font-style-keywords")),k=m(b("css-font-stretch-keywords")),c={normal:1,"small-caps":1},f={serif:1,"sans-serif":1,monospace:1,cursive:1,
fantasy:1,"system-ui":1};y.exports=function(g){g=p(g,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"});
if(g.system)return g.system&&n(g.system,d),g.system;n(g.style,l);n(g.variant,c);n(g.weight,e);n(g.stretch,k);null==g.size&&(g.size="1rem");"number"===typeof g.size&&(g.size+="px");if(!h)throw Error("Bad size value `"+g.size+"`");g.family||(g.family="serif");Array.isArray(g.family)&&(g.family.length||(g.family=["serif"]),g.family=g.family.map(function(t){return f[t]?t:'"'+t+'"'}).join(", "));var q=[];q.push(g.style);g.variant!==g.style&&q.push(g.variant);g.weight!==g.variant&&g.weight!==g.style&&q.push(g.weight);
g.stretch!==g.weight&&g.stretch!==g.variant&&g.stretch!==g.style&&q.push(g.stretch);q.push(g.size+(null==g.lineHeight||"normal"===g.lineHeight||"1"===g.lineHeight+""?"":"/"+g.lineHeight));q.push(g.family);return q.filter(Boolean).join(" ")}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,"pick-by-alias":485}],148:[function(b,y,D){y.exports=["inherit","initial","unset"]},{}],149:[function(b,
y,D){y.exports="caption icon menu message-box small-caption status-bar".split(" ")},{}],150:[function(b,y,D){y.exports=function(n,m,p,h,a,d){var e=a-1,l=a*a,k=e*e,c=(1+2*a)*k;k*=a;a=l*(3-2*a);e*=l;if(n.length){d||(d=Array(n.length));for(l=n.length-1;0<=l;--l)d[l]=c*n[l]+k*m[l]+a*p[l]+e*h[l];return d}return c*n+k*m+a*p+e*h};y.exports.derivative=function(n,m,p,h,a,d){var e=6*a*a-6*a,l=3*a*a-4*a+1,k=-6*a*a+6*a;a=3*a*a-2*a;if(n.length){d||(d=Array(n.length));for(var c=n.length-1;0<=c;--c)d[c]=e*n[c]+
l*m[c]+k*p[c]+a*h[c];return d}return e*n+l*m+k*p[c]+a*h}},{}],151:[function(b,y,D){function n(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var m=b("./lib/thunk.js");y.exports=function(p){var h=new n;h.pre=p.pre;h.body=p.body;h.post=p.post;var a=p.args.slice(0);h.argTypes=a;for(var d=0;d<a.length;++d){var e=
a[d];if("array"===e||"object"===typeof e&&e.blockIndices){h.argTypes[d]="array";h.arrayArgs.push(d);h.arrayBlockIndices.push(e.blockIndices?e.blockIndices:0);h.shimArgs.push("array"+d);if(d<h.pre.args.length&&0<h.pre.args[d].count)throw Error("cwise: pre() block may not reference array args");if(d<h.post.args.length&&0<h.post.args[d].count)throw Error("cwise: post() block may not reference array args");}else if("scalar"===e)h.scalarArgs.push(d),h.shimArgs.push("scalar"+d);else if("index"===e){h.indexArgs.push(d);
if(d<h.pre.args.length&&0<h.pre.args[d].count)throw Error("cwise: pre() block may not reference array index");if(d<h.body.args.length&&h.body.args[d].lvalue)throw Error("cwise: body() block may not write to array index");if(d<h.post.args.length&&0<h.post.args[d].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===e){h.shapeArgs.push(d);if(d<h.pre.args.length&&h.pre.args[d].lvalue)throw Error("cwise: pre() block may not write to array shape");if(d<h.body.args.length&&
h.body.args[d].lvalue)throw Error("cwise: body() block may not write to array shape");if(d<h.post.args.length&&h.post.args[d].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof e&&e.offset)h.argTypes[d]="offset",h.offsetArgs.push({array:e.array,offset:e.offset}),h.offsetArgIndex.push(d);else throw Error("cwise: Unknown argument type "+a[d]);}if(0>=h.arrayArgs.length)throw Error("cwise: No array arguments specified");if(h.pre.args.length>a.length)throw Error("cwise: Too many arguments in pre() block");
if(h.body.args.length>a.length)throw Error("cwise: Too many arguments in body() block");if(h.post.args.length>a.length)throw Error("cwise: Too many arguments in post() block");h.debug=!!p.printCode||!!p.debug;h.funcName=p.funcName||"cwise";h.blockSize=p.blockSize||64;return m(h)}},{"./lib/thunk.js":153}],152:[function(b,y,D){function n(h,a,d){var e=h.length,l=a.arrayArgs.length;a=0<a.indexArgs.length;var k=[],c=[],f=0,g,q;for(g=0;g<e;++g)c.push(["i",g,"\x3d0"].join(""));for(q=0;q<l;++q)for(g=0;g<
e;++g){var t=f;f=h[g];0===g?c.push(["d",q,"s",g,"\x3dt",q,"p",f].join("")):c.push(["d",q,"s",g,"\x3d(t",q,"p",f,"-s",t,"*t",q,"p",t,")"].join(""))}0<c.length&&k.push("var "+c.join(","));for(g=e-1;0<=g;--g)f=h[g],k.push(["for(i",g,"\x3d0;i",g,"\x3cs",f,";++i",g,"){"].join(""));k.push(d);for(g=0;g<e;++g){t=f;f=h[g];for(q=0;q<l;++q)k.push(["p",q,"+\x3dd",q,"s",g].join(""));a&&(0<g&&k.push(["index[",t,"]-\x3ds",t].join("")),k.push(["++index[",f,"]"].join("")));k.push("}")}return k.join("\n")}function m(h,
a,d){for(var e=h.body,l=[],k=[],c=0;c<h.args.length;++c){var f=h.args[c];if(!(0>=f.count)){var g=new RegExp(f.name,"g"),q="",t=a.arrayArgs.indexOf(c);switch(a.argTypes[c]){case "offset":var u=a.offsetArgIndex.indexOf(c);t=a.offsetArgs[u].array;q="+q"+u;case "array":q="p"+t+q;var w="l"+c;u="a"+t;if(0===a.arrayBlockIndices[t])1===f.count?"generic"===d[t]?f.lvalue?(l.push(["var ",w,"\x3d",u,".get(",q,")"].join("")),e=e.replace(g,w),k.push([u,".set(",q,",",w,")"].join(""))):e=e.replace(g,[u,".get(",q,
")"].join("")):e=e.replace(g,[u,"[",q,"]"].join("")):"generic"===d[t]?(l.push(["var ",w,"\x3d",u,".get(",q,")"].join("")),e=e.replace(g,w),f.lvalue&&k.push([u,".set(",q,",",w,")"].join(""))):(l.push(["var ",w,"\x3d",u,"[",q,"]"].join("")),e=e.replace(g,w),f.lvalue&&k.push([u,"[",q,"]\x3d",w].join("")));else{g=[f.name];f=[q];for(q=0;q<Math.abs(a.arrayBlockIndices[t]);q++)g.push("\\s*\\[([^\\]]+)\\]"),f.push("$"+(q+1)+"*t"+t+"b"+q);g=new RegExp(g.join(""),"g");q=f.join("+");if("generic"===d[t])throw Error("cwise: Generic arrays not supported in combination with blocks!");
e=e.replace(g,[u,"[",q,"]"].join(""))}break;case "scalar":e=e.replace(g,"Y"+a.scalarArgs.indexOf(c));break;case "index":e=e.replace(g,"index");break;case "shape":e=e.replace(g,"shape")}}}return[l.join("\n"),e,k.join("\n")].join("\n").trim()}var p=b("uniq");y.exports=function(h,a){for(var d=a[1].length-Math.abs(h.arrayBlockIndices[0])|0,e=Array(h.arrayArgs.length),l=Array(h.arrayArgs.length),k=0;k<h.arrayArgs.length;++k)l[k]=a[2*k],e[k]=a[2*k+1];var c=[],f=[],g=[],q=[],t=[];for(k=0;k<h.arrayArgs.length;++k){0>
h.arrayBlockIndices[k]?(g.push(0),q.push(d),c.push(d),f.push(d+h.arrayBlockIndices[k])):(g.push(h.arrayBlockIndices[k]),q.push(h.arrayBlockIndices[k]+d),c.push(0),f.push(h.arrayBlockIndices[k]));for(var u=[],w=0;w<e[k].length;w++)g[k]<=e[k][w]&&e[k][w]<q[k]&&u.push(e[k][w]-g[k]);t.push(u)}f=["SS"];q=["'use strict'"];u=[];for(w=0;w<d;++w)u.push(["s",w,"\x3dSS[",w,"]"].join(""));for(k=0;k<h.arrayArgs.length;++k){f.push("a"+k);f.push("t"+k);f.push("p"+k);for(w=0;w<d;++w)u.push(["t",k,"p",w,"\x3dt",k,
"[",g[k]+w,"]"].join(""));for(w=0;w<Math.abs(h.arrayBlockIndices[k]);++w)u.push(["t",k,"b",w,"\x3dt",k,"[",c[k]+w,"]"].join(""))}for(k=0;k<h.scalarArgs.length;++k)f.push("Y"+k);0<h.shapeArgs.length&&u.push("shape\x3dSS.slice(0)");if(0<h.indexArgs.length){w=Array(d);for(k=0;k<d;++k)w[k]="0";u.push(["index\x3d[",w.join(","),"]"].join(""))}for(k=0;k<h.offsetArgs.length;++k){c=h.offsetArgs[k];g=[];for(w=0;w<c.offset.length;++w)0!==c.offset[w]&&(1===c.offset[w]?g.push(["t",c.array,"p",w].join("")):g.push([c.offset[w],
"*t",c.array,"p",w].join("")));0===g.length?u.push("q"+k+"\x3d0"):u.push(["q",k,"\x3d",g.join("+")].join(""))}k=p([].concat(h.pre.thisVars).concat(h.body.thisVars).concat(h.post.thisVars));u=u.concat(k);0<u.length&&q.push("var "+u.join(","));for(k=0;k<h.arrayArgs.length;++k)q.push("p"+k+"|\x3d0");3<h.pre.body.length&&q.push(m(h.pre,h,l));w=m(h.body,h,l);a:for(k=0,u=t[0].length;k<u;){for(c=1;c<t.length;++c)if(t[c][k]!==t[0][k])break a;++k}if(k<d){d=q.push;u=k;t=t[0];c=t.length;g=h.arrayArgs.length;
for(var x=h.blockSize,E=0<h.indexArgs.length,F=[],z=0;z<g;++z)F.push(["var offset",z,"\x3dp",z].join(""));for(z=u;z<c;++z)F.push(["for(var j"+z+"\x3dSS[",t[z],"]|0;j",z,"\x3e0;){"].join("")),F.push(["if(j",z,"\x3c",x,"){"].join("")),F.push(["s",t[z],"\x3dj",z].join("")),F.push(["j",z,"\x3d0"].join("")),F.push(["}else{s",t[z],"\x3d",x].join("")),F.push(["j",z,"-\x3d",x,"}"].join("")),E&&F.push(["index[",t[z],"]\x3dj",z].join(""));for(z=0;z<g;++z){x=["offset"+z];for(E=u;E<c;++E)x.push(["j",E,"*t",z,
"p",t[E]].join(""));F.push(["p",z,"\x3d(",x.join("+"),")"].join(""))}F.push(n(t,h,w));for(z=u;z<c;++z)F.push("}");t=F.join("\n");d.call(q,t)}else q.push(n(t[0],h,w));3<h.post.body.length&&q.push(m(h.post,h,l));h.debug&&console.log("-----Generated cwise routine for ",a,":\n"+q.join("\n")+"\n----------");h=h.funcName||"unnamed";e=e[0].join("s");a=Array(l.length);t=!0;for(d=0;d<l.length;++d)w=l[d],u=(u=w.match(/\d+/))?u[0]:"",0===w.charAt(0)?a[d]="u"+w.charAt(1)+u:a[d]=w.charAt(0)+u,0<d&&(t=t&&a[d]===
a[d-1]);l=t?a[0]:a.join("");l=[h,"_cwise_loop_",e,"m",k,l].join("");return(new Function(["function ",l,"(",f.join(","),"){",q.join("\n"),"} return ",l].join("")))()}},{uniq:569}],153:[function(b,y,D){var n=b("./compile.js");y.exports=function(m){var p=["'use strict'","var CACHED\x3d{}"],h=[];p.push(["return function ",m.funcName+"_cwise_thunk","(",m.shimArgs.join(","),"){"].join(""));for(var a=[],d=[],e=[["array",m.arrayArgs[0],".shape.slice(",Math.max(0,m.arrayBlockIndices[0]),0>m.arrayBlockIndices[0]?
","+m.arrayBlockIndices[0]+")":")"].join("")],l=[],k=[],c=0;c<m.arrayArgs.length;++c){var f=m.arrayArgs[c];h.push(["t",f,"\x3darray",f,".dtype,r",f,"\x3darray",f,".order"].join(""));a.push("t"+f);a.push("r"+f);d.push("t"+f);d.push("r"+f+".join()");e.push("array"+f+".data");e.push("array"+f+".stride");e.push("array"+f+".offset|0");0<c&&(l.push("array"+m.arrayArgs[0]+".shape.length\x3d\x3d\x3darray"+f+".shape.length+"+(Math.abs(m.arrayBlockIndices[0])-Math.abs(m.arrayBlockIndices[c]))),k.push("array"+
m.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,m.arrayBlockIndices[0])+"]\x3d\x3d\x3darray"+f+".shape[shapeIndex+"+Math.max(0,m.arrayBlockIndices[c])+"]"))}1<m.arrayArgs.length&&(p.push("if (!("+l.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),p.push("for(var shapeIndex\x3darray"+m.arrayArgs[0]+".shape.length-"+Math.abs(m.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),p.push("if (!("+k.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),
p.push("}"));for(c=0;c<m.scalarArgs.length;++c)e.push("scalar"+m.scalarArgs[c]);h.push(["type\x3d[",d.join(","),"].join()"].join(""));h.push("proc\x3dCACHED[type]");p.push("var "+h.join(","));p.push(["if(!proc){CACHED[type]\x3dproc\x3dcompile([",a.join(","),"])}return proc(",e.join(","),")}"].join(""));m.debug&&console.log("-----Generated thunk:\n"+p.join("\n")+"\n----------");return(new Function("compile",p.join("\n")))(n.bind(void 0,m))}},{"./compile.js":152}],154:[function(b,y,D){var n=b("type/value/is"),
m=b("type/value/ensure"),p=b("type/plain-function/ensure"),h=b("es5-ext/object/copy"),a=b("es5-ext/object/normalize-options"),d=b("es5-ext/object/map"),e=Function.prototype.bind,l=Object.defineProperty,k=Object.prototype.hasOwnProperty;var c=function(f,g,q){var t=m(g)&&p(g.value);var u=h(g);delete u.writable;delete u.value;u.get=function(){if(!q.overwriteDefinition&&k.call(this,f))return t;g.value=e.call(t,q.resolveContext?q.resolveContext(this):this);l(this,f,g);return this[f]};return u};y.exports=
function(f,g){var q=a(g);n(q.resolveContext)&&p(q.resolveContext);return d(f,function(t,u){return c(u,t,q)})}},{"es5-ext/object/copy":196,"es5-ext/object/map":204,"es5-ext/object/normalize-options":205,"type/plain-function/ensure":561,"type/value/ensure":565,"type/value/is":566}],155:[function(b,y,D){var n=b("type/value/is"),m=b("type/plain-function/is"),p=b("es5-ext/object/assign"),h=b("es5-ext/object/normalize-options"),a=b("es5-ext/string/#/contains");(y.exports=function(d,e){if(2>arguments.length||
"string"!==typeof d){var l=e;e=d;d=null}else l=arguments[2];if(n(d)){var k=a.call(d,"c");var c=a.call(d,"e");var f=a.call(d,"w")}else k=f=!0,c=!1;k={value:e,configurable:k,enumerable:c,writable:f};return l?p(h(l),k):k}).gs=function(d,e,l,k){"string"!==typeof d&&(k=l,l=e,e=d,d=null);n(e)?m(e)?n(l)?m(l)||(k=l,l=void 0):l=void 0:(k=e,e=l=void 0):e=void 0;if(n(d)){var c=a.call(d,"c");d=a.call(d,"e")}else c=!0,d=!1;e={get:e,set:l,configurable:c,enumerable:d};return k?p(h(k),e):e}},{"es5-ext/object/assign":193,
"es5-ext/object/normalize-options":205,"es5-ext/string/#/contains":212,"type/plain-function/is":562,"type/value/is":566}],156:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?m(D):m(n.d3=n.d3||{})})(this,function(n){function m(N,H){return N<H?-1:N>H?1:N>=H?0:NaN}function p(N){1===N.length&&(N=h(N));return{left:function(H,L,P,Q){null==P&&(P=0);null==Q&&(Q=H.length);for(;P<Q;){var S=P+Q>>>1;0>N(H[S],L)?P=S+1:Q=S}return P},right:function(H,L,P,Q){null==P&&(P=0);null==Q&&(Q=
H.length);for(;P<Q;){var S=P+Q>>>1;0<N(H[S],L)?Q=S:P=S+1}return P}}}function h(N){return function(H,L){return m(N(H),L)}}function a(N,H){return[N,H]}function d(N){return null===N?NaN:+N}function e(N,H){var L=N.length,P=0,Q=-1,S=0,O,U=0;if(null==H)for(;++Q<L;){if(!isNaN(O=d(N[Q]))){var X=O-S;S+=X/++P;U+=X*(O-S)}}else for(;++Q<L;)isNaN(O=d(H(N[Q],Q,N)))||(X=O-S,S+=X/++P,U+=X*(O-S));if(1<P)return U/(P-1)}function l(N,H){return(N=e(N,H))?Math.sqrt(N):N}function k(N,H){var L=N.length,P=-1,Q,S,O;if(null==
H)for(;++P<L;){if(null!=(Q=N[P])&&Q>=Q)for(S=O=Q;++P<L;)null!=(Q=N[P])&&(S>Q&&(S=Q),O<Q&&(O=Q))}else for(;++P<L;)if(null!=(Q=H(N[P],P,N))&&Q>=Q)for(S=O=Q;++P<L;)null!=(Q=H(N[P],P,N))&&(S>Q&&(S=Q),O<Q&&(O=Q));return[S,O]}function c(N){return function(){return N}}function f(N){return N}function g(N,H,L){N=+N;H=+H;L=2>(Q=arguments.length)?(H=N,N=0,1):3>Q?1:+L;for(var P=-1,Q=Math.max(0,Math.ceil((H-N)/L))|0,S=Array(Q);++P<Q;)S[P]=N+P*L;return S}function q(N,H,L){H=(H-N)/Math.max(0,L);N=Math.floor(Math.log(H)/
Math.LN10);H/=Math.pow(10,N);return 0<=N?(H>=I?10:H>=J?5:H>=K?2:1)*Math.pow(10,N):-Math.pow(10,-N)/(H>=I?10:H>=J?5:H>=K?2:1)}function t(N,H,L){var P=Math.abs(H-N)/Math.max(0,L);L=Math.pow(10,Math.floor(Math.log(P)/Math.LN10));P/=L;P>=I?L*=10:P>=J?L*=5:P>=K&&(L*=2);return H<N?-L:L}function u(N){return Math.ceil(Math.log(N.length)/Math.LN2)+1}function w(N,H,L){null==L&&(L=d);if(P=N.length){if(0>=(H=+H)||2>P)return+L(N[0],0,N);if(1<=H)return+L(N[P-1],P-1,N);var P;H*=P-1;P=Math.floor(H);var Q=+L(N[P],
P,N);N=+L(N[P+1],P+1,N);return Q+(N-Q)*(H-P)}}function x(N,H){var L=N.length,P=-1,Q,S;if(null==H)for(;++P<L;){if(null!=(Q=N[P])&&Q>=Q)for(S=Q;++P<L;)null!=(Q=N[P])&&S>Q&&(S=Q)}else for(;++P<L;)if(null!=(Q=H(N[P],P,N))&&Q>=Q)for(S=Q;++P<L;)null!=(Q=H(N[P],P,N))&&S>Q&&(S=Q);return S}function E(N){if(!(S=N.length))return[];for(var H=-1,L=x(N,F),P=Array(L);++H<L;)for(var Q=-1,S,O=P[H]=Array(S);++Q<S;)O[Q]=N[Q][H];return P}function F(N){return N.length}var z=p(m),B=z.right;z=z.left;var C=Array.prototype,
v=C.slice,G=C.map,I=Math.sqrt(50),J=Math.sqrt(10),K=Math.sqrt(2);n.bisect=B;n.bisectRight=B;n.bisectLeft=z;n.ascending=m;n.bisector=p;n.cross=function(N,H,L){var P=N.length,Q=H.length,S=Array(P*Q),O,U,X;null==L&&(L=a);for(O=X=0;O<P;++O){var da=N[O];for(U=0;U<Q;++U,++X)S[X]=L(da,H[U])}return S};n.descending=function(N,H){return H<N?-1:H>N?1:H>=N?0:NaN};n.deviation=l;n.extent=k;n.histogram=function(){function N(Q){var S,O=Q.length,U=Array(O);for(S=0;S<O;++S)U[S]=H(Q[S],S,Q);S=L(U);var X=S[0],da=S[1],
ea=P(U,X,da);Array.isArray(ea)||(ea=t(X,da,ea),ea=g(Math.ceil(X/ea)*ea,da,ea));for(var ca=ea.length;ea[0]<=X;)ea.shift(),--ca;for(;ea[ca-1]>da;)ea.pop(),--ca;var ia=Array(ca+1);for(S=0;S<=ca;++S){var ha=ia[S]=[];ha.x0=0<S?ea[S-1]:X;ha.x1=S<ca?ea[S]:da}for(S=0;S<O;++S)ha=U[S],X<=ha&&ha<=da&&ia[B(ea,ha,0,ca)].push(Q[S]);return ia}var H=f,L=k,P=u;N.value=function(Q){return arguments.length?(H="function"===typeof Q?Q:c(Q),N):H};N.domain=function(Q){return arguments.length?(L="function"===typeof Q?Q:c([Q[0],
Q[1]]),N):L};N.thresholds=function(Q){return arguments.length?(P="function"===typeof Q?Q:Array.isArray(Q)?c(v.call(Q)):c(Q),N):P};return N};n.thresholdFreedmanDiaconis=function(N,H,L){N=G.call(N,d).sort(m);return Math.ceil((L-H)/(2*(w(N,.75)-w(N,.25))*Math.pow(N.length,-1/3)))};n.thresholdScott=function(N,H,L){return Math.ceil((L-H)/(3.5*l(N)*Math.pow(N.length,-1/3)))};n.thresholdSturges=u;n.max=function(N,H){var L=N.length,P=-1,Q,S;if(null==H)for(;++P<L;){if(null!=(Q=N[P])&&Q>=Q)for(S=Q;++P<L;)null!=
(Q=N[P])&&Q>S&&(S=Q)}else for(;++P<L;)if(null!=(Q=H(N[P],P,N))&&Q>=Q)for(S=Q;++P<L;)null!=(Q=H(N[P],P,N))&&Q>S&&(S=Q);return S};n.mean=function(N,H){var L=N.length,P=L,Q=-1,S,O=0;if(null==H)for(;++Q<L;)isNaN(S=d(N[Q]))?--P:O+=S;else for(;++Q<L;)isNaN(S=d(H(N[Q],Q,N)))?--P:O+=S;if(P)return O/P};n.median=function(N,H){var L=N.length,P=-1,Q,S=[];if(null==H)for(;++P<L;)isNaN(Q=d(N[P]))||S.push(Q);else for(;++P<L;)isNaN(Q=d(H(N[P],P,N)))||S.push(Q);return w(S.sort(m),.5)};n.merge=function(N){var H=N.length;
var L=-1;for(var P=0,Q,S;++L<H;)P+=N[L].length;for(Q=Array(P);0<=--H;)for(S=N[H],L=S.length;0<=--L;)Q[--P]=S[L];return Q};n.min=x;n.pairs=function(N,H){null==H&&(H=a);for(var L=0,P=N.length-1,Q=N[0],S=Array(0>P?0:P);L<P;)S[L]=H(Q,Q=N[++L]);return S};n.permute=function(N,H){for(var L=H.length,P=Array(L);L--;)P[L]=N[H[L]];return P};n.quantile=w;n.range=g;n.scan=function(N,H){if(L=N.length){var L,P=0,Q=0,S,O=N[Q];for(null==H&&(H=m);++P<L;)if(0>H(S=N[P],O)||0!==H(O,O))O=S,Q=P;if(0===H(O,O))return Q}};
n.shuffle=function(N,H,L){L=(null==L?N.length:L)-(H=null==H?0:+H);for(var P,Q;L;)Q=Math.random()*L--|0,P=N[L+H],N[L+H]=N[Q+H],N[Q+H]=P;return N};n.sum=function(N,H){var L=N.length,P=-1,Q,S=0;if(null==H)for(;++P<L;){if(Q=+N[P])S+=Q}else for(;++P<L;)if(Q=+H(N[P],P,N))S+=Q;return S};n.ticks=function(N,H,L){var P,Q=-1,S;H=+H;N=+N;L=+L;if(N===H&&0<L)return[N];if(P=H<N){var O=N;N=H;H=O}if(0===(S=q(N,H,L))||!isFinite(S))return[];if(0<S)for(N=Math.ceil(N/S),H=Math.floor(H/S),H=Array(O=Math.ceil(H-N+1));++Q<
O;)H[Q]=(N+Q)*S;else for(N=Math.floor(N*S),H=Math.ceil(H*S),H=Array(O=Math.ceil(N-H+1));++Q<O;)H[Q]=(N-Q)/S;P&&H.reverse();return H};n.tickIncrement=q;n.tickStep=t;n.transpose=E;n.variance=e;n.zip=function(){return E(arguments)};Object.defineProperty(n,"__esModule",{value:!0})})},{}],157:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?m(D):m(n.d3=n.d3||{})})(this,function(n){function m(){}function p(f,g){var q=new m;if(f instanceof m)f.each(function(x,E){q.set(E,x)});else if(Array.isArray(f)){var t=
-1,u=f.length,w;if(null==g)for(;++t<u;)q.set(t,f[t]);else for(;++t<u;)q.set(g(w=f[t],t,f),w)}else if(f)for(t in f)q.set(t,f[t]);return q}function h(){return{}}function a(f,g,q){f[g]=q}function d(){return p()}function e(f,g,q){f.set(g,q)}function l(){}function k(f,g){var q=new l;if(f instanceof l)f.each(function(w){q.add(w)});else if(f){var t=-1,u=f.length;if(null==g)for(;++t<u;)q.add(f[t]);else for(;++t<u;)q.add(g(f[t],t,f))}return q}m.prototype=p.prototype={constructor:m,has:function(f){return"$"+
f in this},get:function(f){return this["$"+f]},set:function(f,g){this["$"+f]=g;return this},remove:function(f){f="$"+f;return f in this&&delete this[f]},clear:function(){for(var f in this)"$"===f[0]&&delete this[f]},keys:function(){var f=[],g;for(g in this)"$"===g[0]&&f.push(g.slice(1));return f},values:function(){var f=[],g;for(g in this)"$"===g[0]&&f.push(this[g]);return f},entries:function(){var f=[],g;for(g in this)"$"===g[0]&&f.push({key:g.slice(1),value:this[g]});return f},size:function(){var f=
0,g;for(g in this)"$"===g[0]&&++f;return f},empty:function(){for(var f in this)if("$"===f[0])return!1;return!0},each:function(f){for(var g in this)"$"===g[0]&&f(this[g],g.slice(1),this)}};var c=p.prototype;l.prototype=k.prototype={constructor:l,has:c.has,add:function(f){f+="";this["$"+f]=f;return this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};n.nest=function(){function f(E,F,z,B){if(F>=q.length)return null!=u&&E.sort(u),null!=w?w(E):E;for(var C=-1,v=E.length,
G=q[F++],I,J,K=p(),N,H=z();++C<v;)(N=K.get(I=G(J=E[C])+""))?N.push(J):K.set(I,[J]);K.each(function(L,P){B(H,P,f(L,F,z,B))});return H}function g(E,F){if(++F>q.length)return E;var z=t[F-1];if(null!=w&&F>=q.length)var B=E.entries();else B=[],E.each(function(C,v){B.push({key:v,values:g(C,F)})});return null!=z?B.sort(function(C,v){return z(C.key,v.key)}):B}var q=[],t=[],u,w,x;return x={object:function(E){return f(E,0,h,a)},map:function(E){return f(E,0,d,e)},entries:function(E){return g(f(E,0,d,e),0)},
key:function(E){q.push(E);return x},sortKeys:function(E){t[q.length-1]=E;return x},sortValues:function(E){u=E;return x},rollup:function(E){w=E;return x}}};n.set=k;n.map=p;n.keys=function(f){var g=[],q;for(q in f)g.push(q);return g};n.values=function(f){var g=[],q;for(q in f)g.push(f[q]);return g};n.entries=function(f){var g=[],q;for(q in f)g.push({key:q,value:f[q]});return g};Object.defineProperty(n,"__esModule",{value:!0})})},{}],158:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==
typeof y?m(D):(n=n||self,m(n.d3=n.d3||{}))})(this,function(n){function m(pa,za,qa){pa.prototype=za.prototype=qa;qa.constructor=pa}function p(pa,za){pa=Object.create(pa.prototype);for(var qa in za)pa[qa]=za[qa];return pa}function h(){}function a(){return this.rgb().formatHex()}function d(){return this.rgb().formatRgb()}function e(pa){var za,qa;pa=(pa+"").trim().toLowerCase();return(za=U.exec(pa))?(qa=za[1].length,za=parseInt(za[1],16),6===qa?l(za):3===qa?new g(za>>8&15|za>>4&240,za>>4&15|za&240,(za&
15)<<4|za&15,1):8===qa?k(za>>24&255,za>>16&255,za>>8&255,(za&255)/255):4===qa?k(za>>12&15|za>>8&240,za>>8&15|za>>4&240,za>>4&15|za&240,((za&15)<<4|za&15)/255):null):(za=X.exec(pa))?new g(za[1],za[2],za[3],1):(za=da.exec(pa))?new g(255*za[1]/100,255*za[2]/100,255*za[3]/100,1):(za=ea.exec(pa))?k(za[1],za[2],za[3],za[4]):(za=ca.exec(pa))?k(255*za[1]/100,255*za[2]/100,255*za[3]/100,za[4]):(za=ia.exec(pa))?w(za[1],za[2]/100,za[3]/100,1):(za=ha.exec(pa))?w(za[1],za[2]/100,za[3]/100,za[4]):fa.hasOwnProperty(pa)?
l(fa[pa]):"transparent"===pa?new g(NaN,NaN,NaN,0):null}function l(pa){return new g(pa>>16&255,pa>>8&255,pa&255,1)}function k(pa,za,qa,Ca){0>=Ca&&(pa=za=qa=NaN);return new g(pa,za,qa,Ca)}function c(pa){pa instanceof h||(pa=e(pa));if(!pa)return new g;pa=pa.rgb();return new g(pa.r,pa.g,pa.b,pa.opacity)}function f(pa,za,qa,Ca){return 1===arguments.length?c(pa):new g(pa,za,qa,null==Ca?1:Ca)}function g(pa,za,qa,Ca){this.r=+pa;this.g=+za;this.b=+qa;this.opacity=+Ca}function q(){return"#"+u(this.r)+u(this.g)+
u(this.b)}function t(){var pa=this.opacity;pa=isNaN(pa)?1:Math.max(0,Math.min(1,pa));return(1===pa?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===pa?")":", "+pa+")")}function u(pa){pa=Math.max(0,Math.min(255,Math.round(pa)||0));return(16>pa?"0":"")+pa.toString(16)}function w(pa,za,qa,Ca){0>=Ca?pa=za=qa=NaN:0>=qa||1<=qa?pa=za=NaN:0>=za&&(pa=NaN);return new F(pa,za,qa,Ca)}
function x(pa){if(pa instanceof F)return new F(pa.h,pa.s,pa.l,pa.opacity);pa instanceof h||(pa=e(pa));if(!pa)return new F;if(pa instanceof F)return pa;pa=pa.rgb();var za=pa.r/255,qa=pa.g/255,Ca=pa.b/255,Ka=Math.min(za,qa,Ca),Oa=Math.max(za,qa,Ca),kb=NaN,mb=Oa-Ka,tb=(Oa+Ka)/2;mb?(kb=za===Oa?(qa-Ca)/mb+6*(qa<Ca):qa===Oa?(Ca-za)/mb+2:(za-qa)/mb+4,mb/=.5>tb?Oa+Ka:2-Oa-Ka,kb*=60):mb=0<tb&&1>tb?0:kb;return new F(kb,mb,tb,pa.opacity)}function E(pa,za,qa,Ca){return 1===arguments.length?x(pa):new F(pa,za,
qa,null==Ca?1:Ca)}function F(pa,za,qa,Ca){this.h=+pa;this.s=+za;this.l=+qa;this.opacity=+Ca}function z(pa,za,qa){return 255*(60>pa?za+(qa-za)*pa/60:180>pa?qa:240>pa?za+(qa-za)*(240-pa)/60:za)}function B(pa){if(pa instanceof v)return new v(pa.l,pa.a,pa.b,pa.opacity);if(pa instanceof L)return P(pa);pa instanceof g||(pa=c(pa));var za=K(pa.r),qa=K(pa.g),Ca=K(pa.b),Ka=G(.2225045*za+.7168786*qa+.0606169*Ca);if(za===qa&&qa===Ca)var Oa=za=Ka;else Oa=G((.4360747*za+.3850649*qa+.1430804*Ca)/.96422),za=G((.0139322*
za+.0971045*qa+.7141733*Ca)/.82521);return new v(116*Ka-16,500*(Oa-Ka),200*(Ka-za),pa.opacity)}function C(pa,za,qa,Ca){return 1===arguments.length?B(pa):new v(pa,za,qa,null==Ca?1:Ca)}function v(pa,za,qa,Ca){this.l=+pa;this.a=+za;this.b=+qa;this.opacity=+Ca}function G(pa){return pa>va?Math.pow(pa,1/3):pa/oa+ua}function I(pa){return pa>ta?pa*pa*pa:oa*(pa-ua)}function J(pa){return 255*(.0031308>=pa?12.92*pa:1.055*Math.pow(pa,1/2.4)-.055)}function K(pa){return.04045>=(pa/=255)?pa/12.92:Math.pow((pa+.055)/
1.055,2.4)}function N(pa){if(pa instanceof L)return new L(pa.h,pa.c,pa.l,pa.opacity);pa instanceof v||(pa=B(pa));if(0===pa.a&&0===pa.b)return new L(NaN,0<pa.l&&100>pa.l?0:NaN,pa.l,pa.opacity);var za=Math.atan2(pa.b,pa.a)*sa;return new L(0>za?za+360:za,Math.sqrt(pa.a*pa.a+pa.b*pa.b),pa.l,pa.opacity)}function H(pa,za,qa,Ca){return 1===arguments.length?N(pa):new L(pa,za,qa,null==Ca?1:Ca)}function L(pa,za,qa,Ca){this.h=+pa;this.c=+za;this.l=+qa;this.opacity=+Ca}function P(pa){if(isNaN(pa.h))return new v(pa.l,
0,0,pa.opacity);var za=pa.h*na;return new v(pa.l,Math.cos(za)*pa.c,Math.sin(za)*pa.c,pa.opacity)}function Q(pa,za,qa,Ca){if(1===arguments.length){var Ka=pa;if(Ka instanceof S)Ka=new S(Ka.h,Ka.s,Ka.l,Ka.opacity);else{Ka instanceof g||(Ka=c(Ka));var Oa=Ka.g/255,kb=Ka.b/255,mb=(ma*kb+Ka.r/255*-1.7884503806-3.5172982438*Oa)/(ma+-1.7884503806-3.5172982438);kb-=mb;var tb=(1.97294*(Oa-mb)- -.29227*kb)/-.90649;kb=(Oa=Math.sqrt(tb*tb+kb*kb)/(1.97294*mb*(1-mb)))?Math.atan2(tb,kb)*sa-120:NaN;Ka=new S(0>kb?kb+
360:kb,Oa,mb,Ka.opacity)}}else Ka=new S(pa,za,qa,null==Ca?1:Ca);return Ka}function S(pa,za,qa,Ca){this.h=+pa;this.s=+za;this.l=+qa;this.opacity=+Ca}var O=1/.7,U=/^#([0-9a-f]{3,8})$/,X=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,da=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,ea=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ca=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
ia=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,ha=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,fa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,
burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,
darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,
lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,
mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};m(h,e,{copy:function(pa){return Object.assign(new this.constructor,
this,pa)},displayable:function(){return this.rgb().displayable()},hex:a,formatHex:a,formatHsl:function(){return x(this).formatHsl()},formatRgb:d,toString:d});m(g,f,p(h,{brighter:function(pa){pa=null==pa?O:Math.pow(O,pa);return new g(this.r*pa,this.g*pa,this.b*pa,this.opacity)},darker:function(pa){pa=null==pa?.7:Math.pow(.7,pa);return new g(this.r*pa,this.g*pa,this.b*pa,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=
this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:q,formatHex:q,formatRgb:t,toString:t}));m(F,E,p(h,{brighter:function(pa){pa=null==pa?O:Math.pow(O,pa);return new F(this.h,this.s,this.l*pa,this.opacity)},darker:function(pa){pa=null==pa?.7:Math.pow(.7,pa);return new F(this.h,this.s,this.l*pa,this.opacity)},rgb:function(){var pa=this.h%360+360*(0>this.h),za=isNaN(pa)||isNaN(this.s)?0:this.s,qa=this.l;za=qa+(.5>qa?qa:1-qa)*za;qa=2*qa-za;return new g(z(240<=pa?pa-240:pa+120,qa,za),z(pa,qa,za),
z(120>pa?pa+240:pa-120,qa,za),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var pa=this.opacity;pa=isNaN(pa)?1:Math.max(0,Math.min(1,pa));return(1===pa?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===pa?")":", "+pa+")")}}));var na=Math.PI/180,sa=180/Math.PI,ua=4/29,ta=6/29,oa=3*ta*ta,va=ta*ta*ta;m(v,C,p(h,{brighter:function(pa){return new v(this.l+18*(null==
pa?1:pa),this.a,this.b,this.opacity)},darker:function(pa){return new v(this.l-18*(null==pa?1:pa),this.a,this.b,this.opacity)},rgb:function(){var pa=(this.l+16)/116,za=isNaN(this.a)?pa:pa+this.a/500,qa=isNaN(this.b)?pa:pa-this.b/200;za=.96422*I(za);pa=1*I(pa);qa=.82521*I(qa);return new g(J(3.1338561*za-1.6168667*pa-.4906146*qa),J(-.9787684*za+1.9161415*pa+.033454*qa),J(.0719453*za-.2289914*pa+1.4052427*qa),this.opacity)}}));m(L,H,p(h,{brighter:function(pa){return new L(this.h,this.c,this.l+18*(null==
pa?1:pa),this.opacity)},darker:function(pa){return new L(this.h,this.c,this.l-18*(null==pa?1:pa),this.opacity)},rgb:function(){return P(this).rgb()}}));var ma=1.78277*-.29227-.1347134789;m(S,Q,p(h,{brighter:function(pa){pa=null==pa?O:Math.pow(O,pa);return new S(this.h,this.s,this.l*pa,this.opacity)},darker:function(pa){pa=null==pa?.7:Math.pow(.7,pa);return new S(this.h,this.s,this.l*pa,this.opacity)},rgb:function(){var pa=isNaN(this.h)?0:(this.h+120)*na,za=+this.l,qa=isNaN(this.s)?0:this.s*za*(1-
za),Ca=Math.cos(pa);pa=Math.sin(pa);return new g(255*(za+qa*(-.14861*Ca+1.78277*pa)),255*(za+qa*(-.29227*Ca+-.90649*pa)),255*(za+1.97294*qa*Ca),this.opacity)}}));n.color=e;n.cubehelix=Q;n.gray=function(pa,za){return new v(pa,0,0,null==za?1:za)};n.hcl=H;n.hsl=E;n.lab=C;n.lch=function(pa,za,qa,Ca){return 1===arguments.length?N(pa):new L(qa,za,pa,null==Ca?1:Ca)};n.rgb=f;Object.defineProperty(n,"__esModule",{value:!0})})},{}],159:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?
m(D):(n=n||self,m(n.d3=n.d3||{}))})(this,function(n){function m(){for(var e=0,l=arguments.length,k={},c;e<l;++e){if(!(c=arguments[e]+"")||c in k||/[\s.]/.test(c))throw Error("illegal type: "+c);k[c]=[]}return new p(k)}function p(e){this._=e}function h(e,l){return e.trim().split(/^|\s+/).map(function(k){var c="",f=k.indexOf(".");0<=f&&(c=k.slice(f+1),k=k.slice(0,f));if(k&&!l.hasOwnProperty(k))throw Error("unknown type: "+k);return{type:k,name:c}})}function a(e,l,k){for(var c=0,f=e.length;c<f;++c)if(e[c].name===
l){e[c]=d;e=e.slice(0,c).concat(e.slice(c+1));break}null!=k&&e.push({name:l,value:k});return e}var d={value:function(){}};p.prototype=m.prototype={constructor:p,on:function(e,l){var k=this._,c=h(e+"",k),f,g=-1,q=c.length;if(2>arguments.length)for(;++g<q;){var t;if(t=f=(e=c[g]).type){a:{t=k[f];for(var u=0,w=t.length;u<w;++u)if((f=t[u]).name===e.name){f=f.value;break a}f=void 0}t=f}if(t)return f}else{if(null!=l&&"function"!==typeof l)throw Error("invalid callback: "+l);for(;++g<q;)if(f=(e=c[g]).type)k[f]=
a(k[f],e.name,l);else if(null==l)for(f in k)k[f]=a(k[f],e.name,null);return this}},copy:function(){var e={},l=this._,k;for(k in l)e[k]=l[k].slice();return new p(e)},call:function(e,l){if(0<(f=arguments.length-2))for(var k=Array(f),c=0,f,g;c<f;++c)k[c]=arguments[c+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);g=this._[e];c=0;for(f=g.length;c<f;++c)g[c].value.apply(l,k)},apply:function(e,l,k){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);e=this._[e];for(var c=0,f=e.length;c<
f;++c)e[c].value.apply(l,k)}};n.dispatch=m;Object.defineProperty(n,"__esModule",{value:!0})})},{}],160:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?m(D,b("d3-quadtree"),b("d3-collection"),b("d3-dispatch"),b("d3-timer")):m(n.d3=n.d3||{},n.d3,n.d3,n.d3,n.d3)})(this,function(n,m,p,h,a){function d(u){return function(){return u}}function e(){return 1E-6*(Math.random()-.5)}function l(u){return u.x+u.vx}function k(u){return u.y+u.vy}function c(u){return u.index}function f(u,
w){u=u.get(w);if(!u)throw Error("missing: "+w);return u}function g(u){return u.x}function q(u){return u.y}var t=Math.PI*(3-Math.sqrt(5));n.forceCenter=function(u,w){function x(){var F,z=E.length,B=0,C=0;for(F=0;F<z;++F){var v=E[F];B+=v.x;C+=v.y}B=B/z-u;C=C/z-w;for(F=0;F<z;++F)v=E[F],v.x-=B,v.y-=C}var E;null==u&&(u=0);null==w&&(w=0);x.initialize=function(F){E=F};x.x=function(F){return arguments.length?(u=+F,x):u};x.y=function(F){return arguments.length?(w=+F,x):w};return x};n.forceCollide=function(u){function w(){function v(S,
O,U,X,da){var ea=S.data;S=S.r;var ca=L+S;if(ea)ea.index>K.index&&(O=N-ea.x-ea.vx,U=H-ea.y-ea.vy,X=O*O+U*U,X<ca*ca&&(0===O&&(O=e(),X+=O*O),0===U&&(U=e(),X+=U*U),X=(ca-(X=Math.sqrt(X)))/X*B,K.vx+=(O*=X)*(ca=(S*=S)/(P+S)),K.vy+=(U*=X)*ca,ea.vx-=O*(ca=1-ca),ea.vy-=U*ca));else return O>N+ca||X<N-ca||U>H+ca||da<H-ca}for(var G,I=F.length,J,K,N,H,L,P,Q=0;Q<C;++Q)for(J=m.quadtree(F,l,k).visitAfter(x),G=0;G<I;++G)K=F[G],L=z[K.index],P=L*L,N=K.x+K.vx,H=K.y+K.vy,J.visit(v)}function x(v){if(v.data)return v.r=
z[v.data.index];for(var G=v.r=0;4>G;++G)v[G]&&v[G].r>v.r&&(v.r=v[G].r)}function E(){if(F){var v,G=F.length;z=Array(G);for(v=0;v<G;++v){var I=F[v];z[I.index]=+u(I,v,F)}}}var F,z,B=1,C=1;"function"!==typeof u&&(u=d(null==u?1:+u));w.initialize=function(v){F=v;E()};w.iterations=function(v){return arguments.length?(C=+v,w):C};w.strength=function(v){return arguments.length?(B=+v,w):B};w.radius=function(v){return arguments.length?(u="function"===typeof v?v:d(+v),E(),w):u};return w};n.forceLink=function(u){function w(H){for(var L=
0,P=u.length;L<N;++L)for(var Q=0,S,O,U,X,da;Q<P;++Q)S=u[Q],O=S.source,S=S.target,U=S.x+S.vx-O.x-O.vx||e(),X=S.y+S.vy-O.y-O.vy||e(),da=Math.sqrt(U*U+X*X),da=(da-G[Q])/da*H*C[Q],U*=da,X*=da,S.vx-=U*(da=K[Q]),S.vy-=X*da,O.vx+=U*(da=1-da),O.vy+=X*da}function x(){if(I){var H=I.length,L=u.length,P=p.map(I,z);var Q=0;for(J=Array(H);Q<L;++Q)H=u[Q],H.index=Q,"object"!==typeof H.source&&(H.source=f(P,H.source)),"object"!==typeof H.target&&(H.target=f(P,H.target)),J[H.source.index]=(J[H.source.index]||0)+1,
J[H.target.index]=(J[H.target.index]||0)+1;Q=0;for(K=Array(L);Q<L;++Q)H=u[Q],K[Q]=J[H.source.index]/(J[H.source.index]+J[H.target.index]);C=Array(L);E();G=Array(L);F()}}function E(){if(I)for(var H=0,L=u.length;H<L;++H)C[H]=+B(u[H],H,u)}function F(){if(I)for(var H=0,L=u.length;H<L;++H)G[H]=+v(u[H],H,u)}var z=c,B=function(H){return 1/Math.min(J[H.source.index],J[H.target.index])},C,v=d(30),G,I,J,K,N=1;null==u&&(u=[]);w.initialize=function(H){I=H;x()};w.links=function(H){return arguments.length?(u=H,
x(),w):u};w.id=function(H){return arguments.length?(z=H,w):z};w.iterations=function(H){return arguments.length?(N=+H,w):N};w.strength=function(H){return arguments.length?(B="function"===typeof H?H:d(+H),E(),w):B};w.distance=function(H){return arguments.length?(v="function"===typeof H?H:d(+H),F(),w):v};return w};n.forceManyBody=function(){function u(K){var N=F.length,H=m.quadtree(F,g,q).visitAfter(x);B=K;for(K=0;K<N;++K)z=F[K],H.visit(E)}function w(){if(F){var K,N=F.length;v=Array(N);for(K=0;K<N;++K){var H=
F[K];v[H.index]=+C(H,K,F)}}}function x(K){var N=0,H,L,P=0,Q,S,O;if(K.length){for(Q=S=O=0;4>O;++O)(H=K[O])&&(L=Math.abs(H.value))&&(N+=H.value,P+=L,Q+=L*H.x,S+=L*H.y);K.x=Q/P;K.y=S/P}else{H=K;H.x=H.data.x;H.y=H.data.y;do N+=v[H.data.index];while(H=H.next)}K.value=N}function E(K,N,H,L){if(!K.value)return!0;H=K.x-z.x;var P=K.y-z.y;N=L-N;L=H*H+P*P;if(N*N/J<L)return L<I&&(0===H&&(H=e(),L+=H*H),0===P&&(P=e(),L+=P*P),L<G&&(L=Math.sqrt(G*L)),z.vx+=H*K.value*B/L,z.vy+=P*K.value*B/L),!0;if(!(K.length||L>=I)){if(K.data!==
z||K.next)0===H&&(H=e(),L+=H*H),0===P&&(P=e(),L+=P*P),L<G&&(L=Math.sqrt(G*L));do K.data!==z&&(N=v[K.data.index]*B/L,z.vx+=H*N,z.vy+=P*N);while(K=K.next)}}var F,z,B,C=d(-30),v,G=1,I=Infinity,J=.81;u.initialize=function(K){F=K;w()};u.strength=function(K){return arguments.length?(C="function"===typeof K?K:d(+K),w(),u):C};u.distanceMin=function(K){return arguments.length?(G=K*K,u):Math.sqrt(G)};u.distanceMax=function(K){return arguments.length?(I=K*K,u):Math.sqrt(I)};u.theta=function(K){return arguments.length?
(J=K*K,u):Math.sqrt(J)};return u};n.forceRadial=function(u,w,x){function E(G){for(var I=0,J=z.length;I<J;++I){var K=z[I],N=K.x-w||1E-6,H=K.y-x||1E-6,L=Math.sqrt(N*N+H*H);L=(v[I]-L)*C[I]*G/L;K.vx+=N*L;K.vy+=H*L}}function F(){if(z){var G,I=z.length;C=Array(I);v=Array(I);for(G=0;G<I;++G)v[G]=+u(z[G],G,z),C[G]=isNaN(v[G])?0:+B(z[G],G,z)}}var z,B=d(.1),C,v;"function"!==typeof u&&(u=d(+u));null==w&&(w=0);null==x&&(x=0);E.initialize=function(G){z=G;F()};E.strength=function(G){return arguments.length?(B=
"function"===typeof G?G:d(+G),F(),E):B};E.radius=function(G){return arguments.length?(u="function"===typeof G?G:d(+G),F(),E):u};E.x=function(G){return arguments.length?(w=+G,E):w};E.y=function(G){return arguments.length?(x=+G,E):x};return E};n.forceSimulation=function(u){function w(){x();N.call("tick",z);B<C&&(K.stop(),N.call("end",z))}function x(H){var L,P=u.length;void 0===H&&(H=1);for(var Q=0;Q<H;++Q)for(B+=(G-B)*v,J.each(function(O){O(B)}),L=0;L<P;++L){var S=u[L];null==S.fx?S.x+=S.vx*=I:(S.x=
S.fx,S.vx=0);null==S.fy?S.y+=S.vy*=I:(S.y=S.fy,S.vy=0)}return z}function E(){for(var H=0,L=u.length,P;H<L;++H){P=u[H];P.index=H;null!=P.fx&&(P.x=P.fx);null!=P.fy&&(P.y=P.fy);if(isNaN(P.x)||isNaN(P.y)){var Q=10*Math.sqrt(H),S=H*t;P.x=Q*Math.cos(S);P.y=Q*Math.sin(S)}if(isNaN(P.vx)||isNaN(P.vy))P.vx=P.vy=0}}function F(H){H.initialize&&H.initialize(u);return H}var z,B=1,C=.001,v=1-Math.pow(C,1/300),G=0,I=.6,J=p.map(),K=a.timer(w),N=h.dispatch("tick","end");null==u&&(u=[]);E();return z={tick:x,restart:function(){return K.restart(w),
z},stop:function(){return K.stop(),z},nodes:function(H){return arguments.length?(u=H,E(),J.each(F),z):u},alpha:function(H){return arguments.length?(B=+H,z):B},alphaMin:function(H){return arguments.length?(C=+H,z):C},alphaDecay:function(H){return arguments.length?(v=+H,z):+v},alphaTarget:function(H){return arguments.length?(G=+H,z):G},velocityDecay:function(H){return arguments.length?(I=1-H,z):1-I},force:function(H,L){return 1<arguments.length?(null==L?J.remove(H):J.set(H,F(L)),z):J.get(H)},find:function(H,
L,P){var Q,S=u.length;P=null==P?Infinity:P*P;for(Q=0;Q<S;++Q){var O=u[Q];var U=H-O.x;var X=L-O.y;U=U*U+X*X;if(U<P){var da=O;P=U}}return da},on:function(H,L){return 1<arguments.length?(N.on(H,L),z):N.on(H)}}};n.forceX=function(u){function w(C){for(var v=0,G=F.length,I;v<G;++v)I=F[v],I.vx+=(B[v]-I.x)*z[v]*C}function x(){if(F){var C,v=F.length;z=Array(v);B=Array(v);for(C=0;C<v;++C)z[C]=isNaN(B[C]=+u(F[C],C,F))?0:+E(F[C],C,F)}}var E=d(.1),F,z,B;"function"!==typeof u&&(u=d(null==u?0:+u));w.initialize=
function(C){F=C;x()};w.strength=function(C){return arguments.length?(E="function"===typeof C?C:d(+C),x(),w):E};w.x=function(C){return arguments.length?(u="function"===typeof C?C:d(+C),x(),w):u};return w};n.forceY=function(u){function w(C){for(var v=0,G=F.length,I;v<G;++v)I=F[v],I.vy+=(B[v]-I.y)*z[v]*C}function x(){if(F){var C,v=F.length;z=Array(v);B=Array(v);for(C=0;C<v;++C)z[C]=isNaN(B[C]=+u(F[C],C,F))?0:+E(F[C],C,F)}}var E=d(.1),F,z,B;"function"!==typeof u&&(u=d(null==u?0:+u));w.initialize=function(C){F=
C;x()};w.strength=function(C){return arguments.length?(E="function"===typeof C?C:d(+C),x(),w):E};w.y=function(C){return arguments.length?(u="function"===typeof C?C:d(+C),x(),w):u};return w};Object.defineProperty(n,"__esModule",{value:!0})})},{"d3-collection":157,"d3-dispatch":159,"d3-quadtree":164,"d3-timer":168}],161:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?m(D):(n=n||self,m(n.d3=n.d3||{}))})(this,function(n){function m(oa,va){return oa.parent===va.parent?1:2}function p(oa,
va){return oa+va.x}function h(oa,va){return Math.max(oa,va.y)}function a(oa){for(var va;va=oa.children;)oa=va[0];return oa}function d(oa){for(var va;va=oa.children;)oa=va[va.length-1];return oa}function e(oa){var va=0,ma=oa.children,pa=ma&&ma.length;if(pa)for(;0<=--pa;)va+=ma[pa].value;else va=1;oa.value=va}function l(oa,va){var ma=new g(oa);oa=+oa.value&&(ma.value=oa.value);var pa,za=[ma],qa,Ca,Ka,Oa;for(null==va&&(va=k);pa=za.pop();)if(oa&&(pa.value=+pa.data.value),(Ca=va(pa.data))&&(Oa=Ca.length))for(pa.children=
Array(Oa),Ka=Oa-1;0<=Ka;--Ka)za.push(qa=pa.children[Ka]=new g(Ca[Ka])),qa.parent=pa,qa.depth=pa.depth+1;return ma.eachBefore(f)}function k(oa){return oa.children}function c(oa){oa.data=oa.data.data}function f(oa){var va=0;do oa.height=va;while((oa=oa.parent)&&oa.height<++va)}function g(oa){this.data=oa;this.depth=this.height=0;this.parent=null}function q(oa){var va=0;oa=fa.call(oa);for(var ma=oa.length,pa,za;ma;)za=Math.random()*ma--|0,pa=oa[ma],oa[ma]=oa[za],oa[za]=pa;ma=oa.length;pa=[];for(var qa;va<
ma;)if(za=oa[va],qa&&u(qa,za))++va;else{a:if(va=pa,w(za,va))va=[za];else{for(pa=0;pa<va.length;++pa)if(t(za,va[pa])&&w(x(va[pa],za),va)){va=[va[pa],za];break a}for(pa=0;pa<va.length-1;++pa)for(qa=pa+1;qa<va.length;++qa)if(t(x(va[pa],va[qa]),za)&&t(x(va[pa],za),va[qa])&&t(x(va[qa],za),va[pa])&&w(E(va[pa],va[qa],za),va)){va=[va[pa],va[qa],za];break a}throw Error();}a:{va=pa=va;switch(va.length){case 1:va=va[0];va={x:va.x,y:va.y,r:va.r};break a;case 2:va=x(va[0],va[1]);break a;case 3:va=E(va[0],va[1],
va[2]);break a}va=void 0}qa=va;va=0}return qa}function t(oa,va){var ma=oa.r-va.r,pa=va.x-oa.x;oa=va.y-oa.y;return 0>ma||ma*ma<pa*pa+oa*oa}function u(oa,va){var ma=oa.r-va.r+1E-6,pa=va.x-oa.x;oa=va.y-oa.y;return 0<ma&&ma*ma>pa*pa+oa*oa}function w(oa,va){for(var ma=0;ma<va.length;++ma)if(!u(oa,va[ma]))return!1;return!0}function x(oa,va){var ma=oa.x,pa=oa.y;oa=oa.r;var za=va.x,qa=va.y;va=va.r;var Ca=za-ma,Ka=qa-pa,Oa=va-oa,kb=Math.sqrt(Ca*Ca+Ka*Ka);return{x:(ma+za+Ca/kb*Oa)/2,y:(pa+qa+Ka/kb*Oa)/2,r:(kb+
oa+va)/2}}function E(oa,va,ma){var pa=oa.x,za=oa.y;oa=oa.r;var qa=va.x,Ca=va.y,Ka=va.r,Oa=ma.x,kb=ma.y,mb=ma.r;ma=pa-qa;va=pa-Oa;var tb=za-Ca,nb=za-kb,Ta=Ka-oa,fb=mb-oa,ab=pa*pa+za*za-oa*oa;Ca=ab-qa*qa-Ca*Ca+Ka*Ka;kb=ab-Oa*Oa-kb*kb+mb*mb;Oa=va*tb-ma*nb;qa=(tb*kb-nb*Ca)/(2*Oa)-pa;tb=(nb*Ta-tb*fb)/Oa;nb=(va*Ca-ma*kb)/(2*Oa)-za;ma=(ma*fb-va*Ta)/Oa;va=tb*tb+ma*ma-1;Ta=2*(oa+qa*tb+nb*ma);oa=qa*qa+nb*nb-oa*oa;oa=-(va?(Ta+Math.sqrt(Ta*Ta-4*va*oa))/(2*va):oa/Ta);return{x:pa+qa+tb*oa,y:za+nb+ma*oa,r:oa}}function F(oa,
va,ma){var pa=oa.x-va.x,za=oa.y-va.y,qa=pa*pa+za*za;if(qa){var Ca=va.r+ma.r;Ca*=Ca;var Ka=oa.r+ma.r;Ka*=Ka;if(Ca>Ka){var Oa=(qa+Ka-Ca)/(2*qa);Ca=Math.sqrt(Math.max(0,Ka/qa-Oa*Oa));ma.x=oa.x-Oa*pa-Ca*za;ma.y=oa.y-Oa*za+Ca*pa}else Oa=(qa+Ca-Ka)/(2*qa),Ca=Math.sqrt(Math.max(0,Ca/qa-Oa*Oa)),ma.x=va.x+Oa*pa-Ca*za,ma.y=va.y+Oa*za+Ca*pa}else ma.x=va.x+ma.r,ma.y=va.y}function z(oa,va){var ma=oa.r+va.r-1E-6,pa=va.x-oa.x;oa=va.y-oa.y;return 0<ma&&ma*ma>pa*pa+oa*oa}function B(oa){var va=oa._,ma=oa.next._,pa=
va.r+ma.r;oa=(va.x*ma.r+ma.x*va.r)/pa;va=(va.y*ma.r+ma.y*va.r)/pa;return oa*oa+va*va}function C(oa){this._=oa;this.previous=this.next=null}function v(oa){if(!(ma=oa.length))return 0;var va,ma;var pa=oa[0];pa.x=0;pa.y=0;if(!(1<ma))return pa.r;var za=oa[1];pa.x=-za.r;za.x=pa.r;za.y=0;if(!(2<ma))return pa.r+za.r;F(za,pa,va=oa[2]);pa=new C(pa);za=new C(za);va=new C(va);pa.next=va.previous=za;za.next=pa.previous=va;va.next=za.previous=pa;var qa=3;a:for(;qa<ma;++qa){F(pa._,za._,va=oa[qa]);va=new C(va);
var Ca=za.next;var Ka=pa.previous;var Oa=za._.r;var kb=pa._.r;do if(Oa<=kb){if(z(Ca._,va._)){za=Ca;pa.next=za;za.previous=pa;--qa;continue a}Oa+=Ca._.r;Ca=Ca.next}else{if(z(Ka._,va._)){pa=Ka;pa.next=za;za.previous=pa;--qa;continue a}kb+=Ka._.r;Ka=Ka.previous}while(Ca!==Ka.next);va.previous=pa;va.next=za;pa.next=za.previous=za=va;for(Ca=B(pa);(va=va.next)!==za;)(Ka=B(va))<Ca&&(pa=va,Ca=Ka);za=pa.next}pa=[za._];for(va=za;(va=va.next)!==za;)pa.push(va._);va=q(pa);for(qa=0;qa<ma;++qa)pa=oa[qa],pa.x-=
va.x,pa.y-=va.y;return va.r}function G(oa){if("function"!==typeof oa)throw Error();return oa}function I(){return 0}function J(oa){return function(){return oa}}function K(oa){return Math.sqrt(oa.value)}function N(oa){return function(va){va.children||(va.r=Math.max(0,+oa(va)||0))}}function H(oa,va){return function(ma){if(pa=ma.children){var pa,za,qa=pa.length,Ca=oa(ma)*va||0;if(Ca)for(za=0;za<qa;++za)pa[za].r+=Ca;var Ka=v(pa);if(Ca)for(za=0;za<qa;++za)pa[za].r-=Ca;ma.r=Ka+Ca}}}function L(oa){return function(va){var ma=
va.parent;va.r*=oa;ma&&(va.x=ma.x+oa*va.x,va.y=ma.y+oa*va.y)}}function P(oa){oa.x0=Math.round(oa.x0);oa.y0=Math.round(oa.y0);oa.x1=Math.round(oa.x1);oa.y1=Math.round(oa.y1)}function Q(oa,va,ma,pa,za){var qa=oa.children,Ca=-1,Ka=qa.length;for(pa=oa.value&&(pa-va)/oa.value;++Ca<Ka;)oa=qa[Ca],oa.y0=ma,oa.y1=za,oa.x0=va,oa.x1=va+=oa.value*pa}function S(oa){return oa.id}function O(oa){return oa.parentId}function U(oa,va){return oa.parent===va.parent?1:2}function X(oa){var va=oa.children;return va?va[0]:
oa.t}function da(oa){var va=oa.children;return va?va[va.length-1]:oa.t}function ea(oa,va){this._=oa;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=va}function ca(oa){oa=new ea(oa,0);for(var va,ma=[oa],pa,za,qa;va=ma.pop();)if(za=va._.children)for(va.children=Array(pa=za.length),qa=pa-1;0<=qa;--qa)ma.push(pa=va.children[qa]=new ea(za[qa],qa)),pa.parent=va;(oa.parent=new ea(null,0)).children=[oa];return oa}function ia(oa,va,ma,pa,za){var qa=oa.children,
Ca=-1,Ka=qa.length;for(za=oa.value&&(za-ma)/oa.value;++Ca<Ka;)oa=qa[Ca],oa.x0=va,oa.x1=pa,oa.y0=ma,oa.y1=ma+=oa.value*za}function ha(oa,va,ma,pa,za,qa){for(var Ca=[],Ka=va.children,Oa,kb,mb=Oa=0,tb=Ka.length,nb,Ta=va.value,fb,ab,ra,Ea,Ia,Va;Oa<tb;){va=za-ma;nb=qa-pa;do fb=Ka[mb++].value;while(!fb&&mb<tb);ab=ra=fb;Va=Math.max(nb/va,va/nb)/(Ta*oa);Ea=fb*fb*Va;for(Ia=Math.max(ra/Ea,Ea/ab);mb<tb;++mb){fb+=kb=Ka[mb].value;kb<ab&&(ab=kb);kb>ra&&(ra=kb);Ea=fb*fb*Va;Ea=Math.max(ra/Ea,Ea/ab);if(Ea>Ia){fb-=
kb;break}Ia=Ea}Ca.push(Oa={value:fb,dice:va<nb,children:Ka.slice(Oa,mb)});Oa.dice?Q(Oa,ma,pa,za,Ta?pa+=nb*fb/Ta:qa):ia(Oa,ma,pa,Ta?ma+=va*fb/Ta:za,qa);Ta-=fb;Oa=mb}return Ca}g.prototype=l.prototype={constructor:g,count:function(){return this.eachAfter(e)},each:function(oa){var va,ma=[this],pa;do{var za=ma.reverse();for(ma=[];va=za.pop();)if(oa(va),va=va.children){var qa=0;for(pa=va.length;qa<pa;++qa)ma.push(va[qa])}}while(ma.length);return this},eachAfter:function(oa){for(var va,ma=[this],pa=[],za,
qa;va=ma.pop();)if(pa.push(va),va=va.children)for(za=0,qa=va.length;za<qa;++za)ma.push(va[za]);for(;va=pa.pop();)oa(va);return this},eachBefore:function(oa){for(var va,ma=[this],pa;va=ma.pop();)if(oa(va),va=va.children)for(pa=va.length-1;0<=pa;--pa)ma.push(va[pa]);return this},sum:function(oa){return this.eachAfter(function(va){for(var ma=+oa(va.data)||0,pa=va.children,za=pa&&pa.length;0<=--za;)ma+=pa[za].value;va.value=ma})},sort:function(oa){return this.eachBefore(function(va){va.children&&va.children.sort(oa)})},
path:function(oa){var va=this;var ma=va;var pa=oa;if(ma!==pa){var za=ma.ancestors(),qa=pa.ancestors(),Ca=null;ma=za.pop();for(pa=qa.pop();ma===pa;)Ca=ma,ma=za.pop(),pa=qa.pop();ma=Ca}for(pa=[va];va!==ma;)va=va.parent,pa.push(va);for(va=pa.length;oa!==ma;)pa.splice(va,0,oa),oa=oa.parent;return pa},ancestors:function(){for(var oa=this,va=[oa];oa=oa.parent;)va.push(oa);return va},descendants:function(){var oa=[];this.each(function(va){oa.push(va)});return oa},leaves:function(){var oa=[];this.eachBefore(function(va){va.children||
oa.push(va)});return oa},links:function(){var oa=this,va=[];oa.each(function(ma){ma!==oa&&va.push({source:ma.parent,target:ma})});return va},copy:function(){return l(this).eachBefore(c)}};var fa=Array.prototype.slice,na={depth:-1},sa={};ea.prototype=Object.create(g.prototype);var ua=(1+Math.sqrt(5))/2,ta=function ma(va){function pa(za,qa,Ca,Ka,Oa){ha(va,za,qa,Ca,Ka,Oa)}pa.ratio=function(za){return ma(1<(za=+za)?za:1)};return pa}(ua);ua=function pa(ma){function za(qa,Ca,Ka,Oa,kb){if((mb=qa._squarify)&&
mb.ratio===ma)for(var mb,tb,nb,Ta=-1,fb,ab=mb.length,ra=qa.value;++Ta<ab;){qa=mb[Ta];tb=qa.children;nb=qa.value=0;for(fb=tb.length;nb<fb;++nb)qa.value+=tb[nb].value;qa.dice?Q(qa,Ca,Ka,Oa,Ka+=(kb-Ka)*qa.value/ra):ia(qa,Ca,Ka,Ca+=(Oa-Ca)*qa.value/ra,kb);ra-=qa.value}else qa._squarify=mb=ha(ma,qa,Ca,Ka,Oa,kb),mb.ratio=ma}za.ratio=function(qa){return pa(1<(qa=+qa)?qa:1)};return za}(ua);n.cluster=function(){function ma(Ka){var Oa,kb=0;Ka.eachAfter(function(fb){var ab=fb.children;if(ab){var ra=ab.reduce(p,
0)/ab.length;fb.x=ra;fb.y=1+ab.reduce(h,0)}else fb.x=Oa?kb+=pa(fb,Oa):0,fb.y=0,Oa=fb});var mb=a(Ka),tb=d(Ka),nb=mb.x-pa(mb,tb)/2,Ta=tb.x+pa(tb,mb)/2;return Ka.eachAfter(Ca?function(fb){fb.x=(fb.x-Ka.x)*za;fb.y=(Ka.y-fb.y)*qa}:function(fb){fb.x=(fb.x-nb)/(Ta-nb)*za;fb.y=(1-(Ka.y?fb.y/Ka.y:1))*qa})}var pa=m,za=1,qa=1,Ca=!1;ma.separation=function(Ka){return arguments.length?(pa=Ka,ma):pa};ma.size=function(Ka){return arguments.length?(Ca=!1,za=+Ka[0],qa=+Ka[1],ma):Ca?null:[za,qa]};ma.nodeSize=function(Ka){return arguments.length?
(Ca=!0,za=+Ka[0],qa=+Ka[1],ma):Ca?[za,qa]:null};return ma};n.hierarchy=l;n.pack=function(){function ma(Ka){Ka.x=za/2;Ka.y=qa/2;pa?Ka.eachBefore(N(pa)).eachAfter(H(Ca,.5)).eachBefore(L(1)):Ka.eachBefore(N(K)).eachAfter(H(I,1)).eachAfter(H(Ca,Ka.r/Math.min(za,qa))).eachBefore(L(Math.min(za,qa)/(2*Ka.r)));return Ka}var pa=null,za=1,qa=1,Ca=I;ma.radius=function(Ka){return arguments.length?(pa=null==Ka?null:G(Ka),ma):pa};ma.size=function(Ka){return arguments.length?(za=+Ka[0],qa=+Ka[1],ma):[za,qa]};ma.padding=
function(Ka){return arguments.length?(Ca="function"===typeof Ka?Ka:J(+Ka),ma):Ca};return ma};n.packEnclose=q;n.packSiblings=function(ma){v(ma);return ma};n.partition=function(){function ma(Oa){var kb=Oa.height+1;Oa.x0=Oa.y0=Ca;Oa.x1=za;Oa.y1=qa/kb;Oa.eachBefore(pa(qa,kb));Ka&&Oa.eachBefore(P);return Oa}function pa(Oa,kb){return function(mb){mb.children&&Q(mb,mb.x0,Oa*(mb.depth+1)/kb,mb.x1,Oa*(mb.depth+2)/kb);var tb=mb.x0,nb=mb.y0,Ta=mb.x1-Ca,fb=mb.y1-Ca;Ta<tb&&(tb=Ta=(tb+Ta)/2);fb<nb&&(nb=fb=(nb+
fb)/2);mb.x0=tb;mb.y0=nb;mb.x1=Ta;mb.y1=fb}}var za=1,qa=1,Ca=0,Ka=!1;ma.round=function(Oa){return arguments.length?(Ka=!!Oa,ma):Ka};ma.size=function(Oa){return arguments.length?(za=+Oa[0],qa=+Oa[1],ma):[za,qa]};ma.padding=function(Oa){return arguments.length?(Ca=+Oa,ma):Ca};return ma};n.stratify=function(){function ma(qa){var Ca,Ka=qa.length,Oa=Array(Ka),kb,mb={};for(Ca=0;Ca<Ka;++Ca){var tb=qa[Ca];var nb=Oa[Ca]=new g(tb);null!=(kb=pa(tb,Ca,qa))&&(kb+="")&&(tb="$"+(nb.id=kb),mb[tb]=tb in mb?sa:nb)}for(Ca=
0;Ca<Ka;++Ca)if(nb=Oa[Ca],kb=za(qa[Ca],Ca,qa),null!=kb&&(kb+="")){tb=mb["$"+kb];if(!tb)throw Error("missing: "+kb);if(tb===sa)throw Error("ambiguous: "+kb);tb.children?tb.children.push(nb):tb.children=[nb];nb.parent=tb}else{if(Ta)throw Error("multiple roots");var Ta=nb}if(!Ta)throw Error("no root");Ta.parent=na;Ta.eachBefore(function(fb){fb.depth=fb.parent.depth+1;--Ka}).eachBefore(f);Ta.parent=null;if(0<Ka)throw Error("cycle");return Ta}var pa=S,za=O;ma.id=function(qa){return arguments.length?(pa=
G(qa),ma):pa};ma.parentId=function(qa){return arguments.length?(za=G(qa),ma):za};return ma};n.tree=function(){function ma(mb){var tb=ca(mb);tb.eachAfter(pa);tb.parent.m=-tb.z;tb.eachBefore(za);if(kb)mb.eachBefore(qa);else{var nb=mb,Ta=mb,fb=mb;mb.eachBefore(function(Ia){Ia.x<nb.x&&(nb=Ia);Ia.x>Ta.x&&(Ta=Ia);Ia.depth>fb.depth&&(fb=Ia)});tb=nb===Ta?1:Ca(nb,Ta)/2;var ab=tb-nb.x,ra=Ka/(Ta.x+tb+ab),Ea=Oa/(fb.depth||1);mb.eachBefore(function(Ia){Ia.x=(Ia.x+ab)*ra;Ia.y=Ia.depth*Ea})}return mb}function pa(mb){var tb=
mb.children,nb=mb.parent.children,Ta=mb.i?nb[mb.i-1]:null;if(tb){for(var fb=0,ab=0,ra=mb.children,Ea=ra.length,Ia;0<=--Ea;)Ia=ra[Ea],Ia.z+=fb,Ia.m+=fb,fb+=Ia.s+(ab+=Ia.c);tb=(tb[0].z+tb[tb.length-1].z)/2;Ta?(mb.z=Ta.z+Ca(mb._,Ta._),mb.m=mb.z-tb):mb.z=tb}else Ta&&(mb.z=Ta.z+Ca(mb._,Ta._));tb=mb.parent;nb=mb.parent.A||nb[0];if(Ta){ab=fb=mb;ra=fb.parent.children[0];Ea=fb.m;Ia=ab.m;for(var Va=Ta.m,rb=ra.m,ib;Ta=da(Ta),fb=X(fb),Ta&&fb;){ra=X(ra);ab=da(ab);ab.a=mb;ib=Ta.z+Va-fb.z-Ea+Ca(Ta._,fb._);if(0<
ib){var Na=Ta.a.parent===mb.parent?Ta.a:nb,Za=mb,eb=ib,Ba=eb/(Za.i-Na.i);Za.c-=Ba;Za.s+=eb;Na.c+=Ba;Za.z+=eb;Za.m+=eb;Ea+=ib;Ia+=ib}Va+=Ta.m;Ea+=fb.m;rb+=ra.m;Ia+=ab.m}Ta&&!da(ab)&&(ab.t=Ta,ab.m+=Va-Ia);fb&&!X(ra)&&(ra.t=fb,ra.m+=Ea-rb,nb=mb)}tb.A=nb}function za(mb){mb._.x=mb.z+mb.parent.m;mb.m+=mb.parent.m}function qa(mb){mb.x*=Ka;mb.y=mb.depth*Oa}var Ca=U,Ka=1,Oa=1,kb=null;ma.separation=function(mb){return arguments.length?(Ca=mb,ma):Ca};ma.size=function(mb){return arguments.length?(kb=!1,Ka=+mb[0],
Oa=+mb[1],ma):kb?null:[Ka,Oa]};ma.nodeSize=function(mb){return arguments.length?(kb=!0,Ka=+mb[0],Oa=+mb[1],ma):kb?[Ka,Oa]:null};return ma};n.treemap=function(){function ma(fb){fb.x0=fb.y0=0;fb.x1=Ca;fb.y1=Ka;fb.eachBefore(pa);Oa=[0];qa&&fb.eachBefore(P);return fb}function pa(fb){var ab=Oa[fb.depth],ra=fb.x0+ab,Ea=fb.y0+ab,Ia=fb.x1-ab,Va=fb.y1-ab;Ia<ra&&(ra=Ia=(ra+Ia)/2);Va<Ea&&(Ea=Va=(Ea+Va)/2);fb.x0=ra;fb.y0=Ea;fb.x1=Ia;fb.y1=Va;fb.children&&(ab=Oa[fb.depth+1]=kb(fb)/2,ra+=Ta(fb)-ab,Ea+=mb(fb)-ab,
Ia-=tb(fb)-ab,Va-=nb(fb)-ab,Ia<ra&&(ra=Ia=(ra+Ia)/2),Va<Ea&&(Ea=Va=(Ea+Va)/2),za(fb,ra,Ea,Ia,Va))}var za=ta,qa=!1,Ca=1,Ka=1,Oa=[0],kb=I,mb=I,tb=I,nb=I,Ta=I;ma.round=function(fb){return arguments.length?(qa=!!fb,ma):qa};ma.size=function(fb){return arguments.length?(Ca=+fb[0],Ka=+fb[1],ma):[Ca,Ka]};ma.tile=function(fb){return arguments.length?(za=G(fb),ma):za};ma.padding=function(fb){return arguments.length?ma.paddingInner(fb).paddingOuter(fb):ma.paddingInner()};ma.paddingInner=function(fb){return arguments.length?
(kb="function"===typeof fb?fb:J(+fb),ma):kb};ma.paddingOuter=function(fb){return arguments.length?ma.paddingTop(fb).paddingRight(fb).paddingBottom(fb).paddingLeft(fb):ma.paddingTop()};ma.paddingTop=function(fb){return arguments.length?(mb="function"===typeof fb?fb:J(+fb),ma):mb};ma.paddingRight=function(fb){return arguments.length?(tb="function"===typeof fb?fb:J(+fb),ma):tb};ma.paddingBottom=function(fb){return arguments.length?(nb="function"===typeof fb?fb:J(+fb),ma):nb};ma.paddingLeft=function(fb){return arguments.length?
(Ta="function"===typeof fb?fb:J(+fb),ma):Ta};return ma};n.treemapBinary=function(ma,pa,za,qa,Ca){function Ka(Ta,fb,ab,ra,Ea,Ia,Va){if(Ta>=fb-1)Ta=Oa[Ta],Ta.x0=ra,Ta.y0=Ea,Ta.x1=Ia,Ta.y1=Va;else{for(var rb=nb[Ta],ib=ab/2+rb,Na=Ta+1,Za=fb-1;Na<Za;){var eb=Na+Za>>>1;nb[eb]<ib?Na=eb+1:Za=eb}ib-nb[Na-1]<nb[Na]-ib&&Ta+1<Na&&--Na;rb=nb[Na]-rb;ib=ab-rb;Ia-ra>Va-Ea?(ab=(ra*ib+Ia*rb)/ab,Ka(Ta,Na,rb,ra,Ea,ab,Va),Ka(Na,fb,ib,ab,Ea,Ia,Va)):(ab=(Ea*ib+Va*rb)/ab,Ka(Ta,Na,rb,ra,Ea,Ia,ab),Ka(Na,fb,ib,ra,ab,Ia,Va))}}
var Oa=ma.children,kb,mb=Oa.length,tb,nb=Array(mb+1);for(nb[0]=tb=kb=0;kb<mb;++kb)nb[kb+1]=tb+=Oa[kb].value;Ka(0,mb,ma.value,pa,za,qa,Ca)};n.treemapDice=Q;n.treemapResquarify=ua;n.treemapSlice=ia;n.treemapSliceDice=function(ma,pa,za,qa,Ca){(ma.depth&1?ia:Q)(ma,pa,za,qa,Ca)};n.treemapSquarify=ta;Object.defineProperty(n,"__esModule",{value:!0})})},{}],162:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?m(D,b("d3-color")):(n=n||self,m(n.d3=n.d3||{},n.d3))})(this,function(n,
m){function p(ma,pa,za,qa,Ca){var Ka=ma*ma,Oa=Ka*ma;return((1-3*ma+3*Ka-Oa)*pa+(4-6*Ka+3*Oa)*za+(1+3*ma+3*Ka-3*Oa)*qa+Oa*Ca)/6}function h(ma){var pa=ma.length-1;return function(za){var qa=0>=za?za=0:1<=za?(za=1,pa-1):Math.floor(za*pa),Ca=ma[qa],Ka=ma[qa+1];return p((za-qa/pa)*pa,0<qa?ma[qa-1]:2*Ca-Ka,Ca,Ka,qa<pa-1?ma[qa+2]:2*Ka-Ca)}}function a(ma){var pa=ma.length;return function(za){var qa=Math.floor((0>(za%=1)?++za:za)*pa);return p((za-qa/pa)*pa,ma[(qa+pa-1)%pa],ma[qa%pa],ma[(qa+1)%pa],ma[(qa+2)%
pa])}}function d(ma){return function(){return ma}}function e(ma,pa){return function(za){return ma+za*pa}}function l(ma,pa,za){return ma=Math.pow(ma,za),pa=Math.pow(pa,za)-ma,za=1/za,function(qa){return Math.pow(ma+qa*pa,za)}}function k(ma,pa){var za=pa-ma;return za?e(ma,180<za||-180>za?za-360*Math.round(za/360):za):d(isNaN(ma)?pa:ma)}function c(ma){return 1===(ma=+ma)?f:function(pa,za){return za-pa?l(pa,za,ma):d(isNaN(pa)?za:pa)}}function f(ma,pa){var za=pa-ma;return za?e(ma,za):d(isNaN(ma)?pa:ma)}
function g(ma){return function(pa){var za=pa.length,qa=Array(za),Ca=Array(za),Ka=Array(za),Oa;for(Oa=0;Oa<za;++Oa){var kb=m.rgb(pa[Oa]);qa[Oa]=kb.r||0;Ca[Oa]=kb.g||0;Ka[Oa]=kb.b||0}qa=ma(qa);Ca=ma(Ca);Ka=ma(Ka);kb.opacity=1;return function(mb){kb.r=qa(mb);kb.g=Ca(mb);kb.b=Ka(mb);return kb+""}}}function q(ma,pa){pa||(pa=[]);var za=ma?Math.min(pa.length,ma.length):0,qa=pa.slice(),Ca;return function(Ka){for(Ca=0;Ca<za;++Ca)qa[Ca]=ma[Ca]*(1-Ka)+pa[Ca]*Ka;return qa}}function t(ma){return ArrayBuffer.isView(ma)&&
!(ma instanceof DataView)}function u(ma,pa){var za=pa?pa.length:0,qa=ma?Math.min(za,ma.length):0,Ca=Array(qa),Ka=Array(za),Oa;for(Oa=0;Oa<qa;++Oa)Ca[Oa]=C(ma[Oa],pa[Oa]);for(;Oa<za;++Oa)Ka[Oa]=pa[Oa];return function(kb){for(Oa=0;Oa<qa;++Oa)Ka[Oa]=Ca[Oa](kb);return Ka}}function w(ma,pa){var za=new Date;return ma=+ma,pa=+pa,function(qa){return za.setTime(ma*(1-qa)+pa*qa),za}}function x(ma,pa){return ma=+ma,pa=+pa,function(za){return ma*(1-za)+pa*za}}function E(ma,pa){var za={},qa={},Ca;if(null===ma||
"object"!==typeof ma)ma={};if(null===pa||"object"!==typeof pa)pa={};for(Ca in pa)Ca in ma?za[Ca]=C(ma[Ca],pa[Ca]):qa[Ca]=pa[Ca];return function(Ka){for(Ca in za)qa[Ca]=za[Ca](Ka);return qa}}function F(ma){return function(){return ma}}function z(ma){return function(pa){return ma(pa)+""}}function B(ma,pa){var za=Q.lastIndex=S.lastIndex=0,qa,Ca,Ka,Oa=-1,kb=[],mb=[];ma+="";for(pa+="";(qa=Q.exec(ma))&&(Ca=S.exec(pa));)(Ka=Ca.index)>za&&(Ka=pa.slice(za,Ka),kb[Oa]?kb[Oa]+=Ka:kb[++Oa]=Ka),(qa=qa[0])===(Ca=
Ca[0])?kb[Oa]?kb[Oa]+=Ca:kb[++Oa]=Ca:(kb[++Oa]=null,mb.push({i:Oa,x:x(qa,Ca)})),za=S.lastIndex;za<pa.length&&(Ka=pa.slice(za),kb[Oa]?kb[Oa]+=Ka:kb[++Oa]=Ka);return 2>kb.length?mb[0]?z(mb[0].x):F(pa):(pa=mb.length,function(tb){for(var nb=0,Ta;nb<pa;++nb)kb[(Ta=mb[nb]).i]=Ta.x(tb);return kb.join("")})}function C(ma,pa){var za=typeof pa,qa;return null==pa||"boolean"===za?d(pa):("number"===za?x:"string"===za?(qa=m.color(pa))?(pa=qa,H):B:pa instanceof m.color?H:pa instanceof Date?w:t(pa)?q:Array.isArray(pa)?
u:"function"!==typeof pa.valueOf&&"function"!==typeof pa.toString||isNaN(pa)?E:x)(ma,pa)}function v(ma,pa,za,qa,Ca,Ka){var Oa,kb,mb;if(Oa=Math.sqrt(ma*ma+pa*pa))ma/=Oa,pa/=Oa;if(mb=ma*za+pa*qa)za-=ma*mb,qa-=pa*mb;if(kb=Math.sqrt(za*za+qa*qa))za/=kb,qa/=kb,mb/=kb;ma*qa<pa*za&&(ma=-ma,pa=-pa,mb=-mb,Oa=-Oa);return{translateX:Ca,translateY:Ka,rotate:Math.atan2(pa,ma)*O,skewX:Math.atan(mb)*O,scaleX:Oa,scaleY:kb}}function G(ma,pa,za,qa){function Ca(tb){return tb.length?tb.pop()+" ":""}function Ka(tb,nb,
Ta,fb,ab,ra){tb!==Ta||nb!==fb?(ab=ab.push("translate(",null,pa,null,za),ra.push({i:ab-4,x:x(tb,Ta)},{i:ab-2,x:x(nb,fb)})):(Ta||fb)&&ab.push("translate("+Ta+pa+fb+za)}function Oa(tb,nb,Ta,fb){tb!==nb?(180<tb-nb?nb+=360:180<nb-tb&&(tb+=360),fb.push({i:Ta.push(Ca(Ta)+"rotate(",null,qa)-2,x:x(tb,nb)})):nb&&Ta.push(Ca(Ta)+"rotate("+nb+qa)}function kb(tb,nb,Ta,fb){tb!==nb?fb.push({i:Ta.push(Ca(Ta)+"skewX(",null,qa)-2,x:x(tb,nb)}):nb&&Ta.push(Ca(Ta)+"skewX("+nb+qa)}function mb(tb,nb,Ta,fb,ab,ra){tb!==Ta||
nb!==fb?(ab=ab.push(Ca(ab)+"scale(",null,",",null,")"),ra.push({i:ab-4,x:x(tb,Ta)},{i:ab-2,x:x(nb,fb)})):1===Ta&&1===fb||ab.push(Ca(ab)+"scale("+Ta+","+fb+")")}return function(tb,nb){var Ta=[],fb=[];tb=ma(tb);nb=ma(nb);Ka(tb.translateX,tb.translateY,nb.translateX,nb.translateY,Ta,fb);Oa(tb.rotate,nb.rotate,Ta,fb);kb(tb.skewX,nb.skewX,Ta,fb);mb(tb.scaleX,tb.scaleY,nb.scaleX,nb.scaleY,Ta,fb);tb=nb=null;return function(ab){for(var ra=-1,Ea=fb.length,Ia;++ra<Ea;)Ta[(Ia=fb[ra]).i]=Ia.x(ab);return Ta.join("")}}}
function I(ma){return((ma=Math.exp(ma))+1/ma)/2}function J(ma){return function(pa,za){var qa=ma((pa=m.hsl(pa)).h,(za=m.hsl(za)).h),Ca=f(pa.s,za.s),Ka=f(pa.l,za.l),Oa=f(pa.opacity,za.opacity);return function(kb){pa.h=qa(kb);pa.s=Ca(kb);pa.l=Ka(kb);pa.opacity=Oa(kb);return pa+""}}}function K(ma){return function(pa,za){var qa=ma((pa=m.hcl(pa)).h,(za=m.hcl(za)).h),Ca=f(pa.c,za.c),Ka=f(pa.l,za.l),Oa=f(pa.opacity,za.opacity);return function(kb){pa.h=qa(kb);pa.c=Ca(kb);pa.l=Ka(kb);pa.opacity=Oa(kb);return pa+
""}}}function N(ma){return function qa(za){function Ca(Ka,Oa){var kb=ma((Ka=m.cubehelix(Ka)).h,(Oa=m.cubehelix(Oa)).h),mb=f(Ka.s,Oa.s),tb=f(Ka.l,Oa.l),nb=f(Ka.opacity,Oa.opacity);return function(Ta){Ka.h=kb(Ta);Ka.s=mb(Ta);Ka.l=tb(Math.pow(Ta,za));Ka.opacity=nb(Ta);return Ka+""}}za=+za;Ca.gamma=qa;return Ca}(1)}var H=function za(pa){function qa(Ka,Oa){var kb=Ca((Ka=m.rgb(Ka)).r,(Oa=m.rgb(Oa)).r),mb=Ca(Ka.g,Oa.g),tb=Ca(Ka.b,Oa.b),nb=f(Ka.opacity,Oa.opacity);return function(Ta){Ka.r=kb(Ta);Ka.g=mb(Ta);
Ka.b=tb(Ta);Ka.opacity=nb(Ta);return Ka+""}}var Ca=c(pa);qa.gamma=za;return qa}(1),L=g(h),P=g(a),Q=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,S=new RegExp(Q.source,"g"),O=180/Math.PI,U={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},X,da,ea,ca,ia=G(function(pa){if("none"===pa)return U;X||(X=document.createElement("DIV"),da=document.documentElement,ea=document.defaultView);X.style.transform=pa;pa=ea.getComputedStyle(da.appendChild(X),null).getPropertyValue("transform");da.removeChild(X);
pa=pa.slice(7,-1).split(",");return v(+pa[0],+pa[1],+pa[2],+pa[3],+pa[4],+pa[5])},"px, ","px)","deg)"),ha=G(function(pa){if(null==pa)return U;ca||(ca=document.createElementNS("http://www.w3.org/2000/svg","g"));ca.setAttribute("transform",pa);if(!(pa=ca.transform.baseVal.consolidate()))return U;pa=pa.matrix;return v(pa.a,pa.b,pa.c,pa.d,pa.e,pa.f)},", ",")",")"),fa=Math.SQRT2,na=J(k),sa=J(f),ua=K(k),ta=K(f),oa=N(k),va=N(f);n.interpolate=C;n.interpolateArray=function(pa,za){return(t(za)?q:u)(pa,za)};
n.interpolateBasis=h;n.interpolateBasisClosed=a;n.interpolateCubehelix=oa;n.interpolateCubehelixLong=va;n.interpolateDate=w;n.interpolateDiscrete=function(pa){var za=pa.length;return function(qa){return pa[Math.max(0,Math.min(za-1,Math.floor(qa*za)))]}};n.interpolateHcl=ua;n.interpolateHclLong=ta;n.interpolateHsl=na;n.interpolateHslLong=sa;n.interpolateHue=function(pa,za){var qa=k(+pa,+za);return function(Ca){Ca=qa(Ca);return Ca-360*Math.floor(Ca/360)}};n.interpolateLab=function(pa,za){var qa=f((pa=
m.lab(pa)).l,(za=m.lab(za)).l),Ca=f(pa.a,za.a),Ka=f(pa.b,za.b),Oa=f(pa.opacity,za.opacity);return function(kb){pa.l=qa(kb);pa.a=Ca(kb);pa.b=Ka(kb);pa.opacity=Oa(kb);return pa+""}};n.interpolateNumber=x;n.interpolateNumberArray=q;n.interpolateObject=E;n.interpolateRgb=H;n.interpolateRgbBasis=L;n.interpolateRgbBasisClosed=P;n.interpolateRound=function(pa,za){return pa=+pa,za=+za,function(qa){return Math.round(pa*(1-qa)+za*qa)}};n.interpolateString=B;n.interpolateTransformCss=ia;n.interpolateTransformSvg=
ha;n.interpolateZoom=function(pa,za){var qa=pa[0],Ca=pa[1],Ka=pa[2];pa=za[2];var Oa=za[0]-qa,kb=za[1]-Ca,mb=Oa*Oa+kb*kb;if(1E-12>mb){var tb=Math.log(pa/Ka)/fa;pa=function(fb){return[qa+fb*Oa,Ca+fb*kb,Ka*Math.exp(fa*fb*tb)]}}else{var nb=Math.sqrt(mb);za=(pa*pa-Ka*Ka+4*mb)/(4*Ka*nb);pa=(pa*pa-Ka*Ka-4*mb)/(4*pa*nb);var Ta=Math.log(Math.sqrt(za*za+1)-za);tb=(Math.log(Math.sqrt(pa*pa+1)-pa)-Ta)/fa;pa=function(fb){fb*=tb;var ab=I(Ta),ra=fa*fb+Ta;var Ea=((ra=Math.exp(2*ra))-1)/(ra+1);var Ia=Ta;ra=((Ia=Math.exp(Ia))-
1/Ia)/2;Ea=Ka/(2*nb)*(ab*Ea-ra);return[qa+Ea*Oa,Ca+Ea*kb,Ka*ab/I(fa*fb+Ta)]}}pa.duration=1E3*tb;return pa};n.piecewise=function(pa,za){for(var qa=0,Ca=za.length-1,Ka=za[0],Oa=Array(0>Ca?0:Ca);qa<Ca;)Oa[qa]=pa(Ka,Ka=za[++qa]);return function(kb){var mb=Math.max(0,Math.min(Ca-1,Math.floor(kb*=Ca)));return Oa[mb](kb-mb)}};n.quantize=function(pa,za){for(var qa=Array(za),Ca=0;Ca<za;++Ca)qa[Ca]=pa(Ca/(za-1));return qa};Object.defineProperty(n,"__esModule",{value:!0})})},{"d3-color":158}],163:[function(b,
y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?m(D):(n=n||self,m(n.d3=n.d3||{}))})(this,function(n){function m(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function p(){return new m}var h=Math.PI,a=2*h,d=a-1E-6;m.prototype=p.prototype={constructor:m,moveTo:function(e,l){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+l)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,l){this._+="L"+(this._x1=+e)+","+(this._y1=
+l)},quadraticCurveTo:function(e,l,k,c){this._+="Q"+ +e+","+ +l+","+(this._x1=+k)+","+(this._y1=+c)},bezierCurveTo:function(e,l,k,c,f,g){this._+="C"+ +e+","+ +l+","+ +k+","+ +c+","+(this._x1=+f)+","+(this._y1=+g)},arcTo:function(e,l,k,c,f){e=+e;l=+l;k=+k;c=+c;f=+f;var g=this._x1,q=this._y1,t=k-e,u=c-l,w=g-e,x=q-l,E=w*w+x*x;if(0>f)throw Error("negative radius: "+f);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=l);else if(1E-6<E)if(1E-6<Math.abs(x*t-u*w)&&f){k-=g;c-=q;var F=t*t+u*u;q=Math.sqrt(F);
g=Math.sqrt(E);E=f*Math.tan((h-Math.acos((F+E-(k*k+c*c))/(2*q*g)))/2);g=E/g;E/=q;1E-6<Math.abs(g-1)&&(this._+="L"+(e+g*w)+","+(l+g*x));this._+="A"+f+","+f+",0,0,"+ +(x*k>w*c)+","+(this._x1=e+E*t)+","+(this._y1=l+E*u)}else this._+="L"+(this._x1=e)+","+(this._y1=l)},arc:function(e,l,k,c,f,g){e=+e;l=+l;k=+k;g=!!g;var q=k*Math.cos(c),t=k*Math.sin(c),u=e+q,w=l+t,x=1^g;c=g?c-f:f-c;if(0>k)throw Error("negative radius: "+k);if(null===this._x1)this._+="M"+u+","+w;else if(1E-6<Math.abs(this._x1-u)||1E-6<Math.abs(this._y1-
w))this._+="L"+u+","+w;k&&(0>c&&(c=c%a+a),c>d?this._+="A"+k+","+k+",0,1,"+x+","+(e-q)+","+(l-t)+"A"+k+","+k+",0,1,"+x+","+(this._x1=u)+","+(this._y1=w):1E-6<c&&(this._+="A"+k+","+k+",0,"+ +(c>=h)+","+x+","+(this._x1=e+k*Math.cos(f))+","+(this._y1=l+k*Math.sin(f))))},rect:function(e,l,k,c){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+l)+"h"+ +k+"v"+ +c+"h"+-k+"Z"},toString:function(){return this._}};n.path=p;Object.defineProperty(n,"__esModule",{value:!0})})},{}],164:[function(b,y,D){(function(n,
m){"object"===typeof D&&"undefined"!==typeof y?m(D):(n=n||self,m(n.d3=n.d3||{}))})(this,function(n){function m(c,f,g,q){if(isNaN(f)||isNaN(g))return c;var t,u=c._root;q={data:q};var w=c._x0,x=c._y0,E=c._x1,F=c._y1,z,B,C,v;if(!u)return c._root=q,c;for(;u.length;)if((C=f>=(z=(w+E)/2))?w=z:E=z,(v=g>=(B=(x+F)/2))?x=B:F=B,t=u,!(u=u[C|=v<<1]))return t[C]=q,c;var G=+c._x.call(null,u.data);var I=+c._y.call(null,u.data);if(f===G&&g===I)return q.next=u,t?t[C]=q:c._root=q,c;do t=t?t[C]=Array(4):c._root=Array(4),
(C=f>=(z=(w+E)/2))?w=z:E=z,(v=g>=(B=(x+F)/2))?x=B:F=B;while((C|=v<<1)===(v=(I>=B)<<1|G>=z));return t[v]=u,t[C]=q,c}function p(c,f,g,q,t){this.node=c;this.x0=f;this.y0=g;this.x1=q;this.y1=t}function h(c){return c[0]}function a(c){return c[1]}function d(c,f,g){f=new e(null==f?h:f,null==g?a:g,NaN,NaN,NaN,NaN);return null==c?f:f.addAll(c)}function e(c,f,g,q,t,u){this._x=c;this._y=f;this._x0=g;this._y0=q;this._x1=t;this._y1=u;this._root=void 0}function l(c){for(var f={data:c.data},g=f;c=c.next;)g=g.next=
{data:c.data};return f}var k=d.prototype=e.prototype;k.copy=function(){var c=new e(this._x,this._y,this._x0,this._y0,this._x1,this._y1),f=this._root,g,q;if(!f)return c;if(!f.length)return c._root=l(f),c;for(g=[{source:f,target:c._root=Array(4)}];f=g.pop();)for(var t=0;4>t;++t)if(q=f.source[t])q.length?g.push({source:q,target:f.target[t]=Array(4)}):f.target[t]=l(q);return c};k.add=function(c){var f=+this._x.call(null,c),g=+this._y.call(null,c);return m(this.cover(f,g),f,g,c)};k.addAll=function(c){var f,
g,q=c.length,t,u,w=Array(q),x=Array(q),E=Infinity,F=Infinity,z=-Infinity,B=-Infinity;for(g=0;g<q;++g)isNaN(t=+this._x.call(null,f=c[g]))||isNaN(u=+this._y.call(null,f))||(w[g]=t,x[g]=u,t<E&&(E=t),t>z&&(z=t),u<F&&(F=u),u>B&&(B=u));if(E>z||F>B)return this;this.cover(E,F).cover(z,B);for(g=0;g<q;++g)m(this,w[g],x[g],c[g]);return this};k.cover=function(c,f){if(isNaN(c=+c)||isNaN(f=+f))return this;var g=this._x0,q=this._y0,t=this._x1,u=this._y1;if(isNaN(g))t=(g=Math.floor(c))+1,u=(q=Math.floor(f))+1;else{for(var w=
t-g,x=this._root,E,F;g>c||c>=t||q>f||f>=u;)switch(F=(f<q)<<1|c<g,E=Array(4),E[F]=x,x=E,w*=2,F){case 0:t=g+w;u=q+w;break;case 1:g=t-w;u=q+w;break;case 2:t=g+w;q=u-w;break;case 3:g=t-w,q=u-w}this._root&&this._root.length&&(this._root=x)}this._x0=g;this._y0=q;this._x1=t;this._y1=u;return this};k.data=function(){var c=[];this.visit(function(f){if(!f.length){do c.push(f.data);while(f=f.next)}});return c};k.extent=function(c){return arguments.length?this.cover(+c[0][0],+c[0][1]).cover(+c[1][0],+c[1][1]):
isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};k.find=function(c,f,g){var q=this._x0,t=this._y0,u,w,x,E,F=this._x1,z=this._y1,B=[],C=this._root,v;C&&B.push(new p(C,q,t,F,z));null==g?g=Infinity:(q=c-g,t=f-g,F=c+g,z=f+g,g*=g);for(;v=B.pop();)if(!(!(C=v.node)||(u=v.x0)>F||(w=v.y0)>z||(x=v.x1)<q||(E=v.y1)<t))if(C.length){v=(u+x)/2;var G=(w+E)/2;B.push(new p(C[3],v,G,x,E),new p(C[2],u,G,v,E),new p(C[1],v,w,x,G),new p(C[0],u,w,v,G));if(C=(f>=G)<<1|c>=v)v=B[B.length-1],B[B.length-1]=B[B.length-
1-C],B[B.length-1-C]=v}else if(v=c-+this._x.call(null,C.data),G=f-+this._y.call(null,C.data),v=v*v+G*G,v<g){var I=Math.sqrt(g=v);q=c-I;t=f-I;F=c+I;z=f+I;I=C.data}return I};k.remove=function(c){if(isNaN(E=+this._x.call(null,c))||isNaN(F=+this._y.call(null,c)))return this;var f,g=this._root,q,t=this._x0,u=this._y0,w=this._x1,x=this._y1,E,F,z,B,C,v;if(!g)return this;if(g.length)for(;;){(C=E>=(z=(t+w)/2))?t=z:w=z;(v=F>=(B=(u+x)/2))?u=B:x=B;if(!(f=g,g=g[C|=v<<1]))return this;if(!g.length)break;if(f[C+
1&3]||f[C+2&3]||f[C+3&3]){var G=f;var I=C}}for(;g.data!==c;)if(!(q=g,g=g.next))return this;(c=g.next)&&delete g.next;if(q)return c?q.next=c:delete q.next,this;if(!f)return this._root=c,this;c?f[C]=c:delete f[C];(g=f[0]||f[1]||f[2]||f[3])&&g===(f[3]||f[2]||f[1]||f[0])&&!g.length&&(G?G[I]=g:this._root=g);return this};k.removeAll=function(c){for(var f=0,g=c.length;f<g;++f)this.remove(c[f]);return this};k.root=function(){return this._root};k.size=function(){var c=0;this.visit(function(f){if(!f.length){do++c;
while(f=f.next)}});return c};k.visit=function(c){var f=[],g,q=this._root,t,u,w,x;for(q&&f.push(new p(q,this._x0,this._y0,this._x1,this._y1));g=f.pop();)if(!c(q=g.node,u=g.x0,w=g.y0,x=g.x1,g=g.y1)&&q.length){var E=(u+x)/2,F=(w+g)/2;(t=q[3])&&f.push(new p(t,E,F,x,g));(t=q[2])&&f.push(new p(t,u,F,E,g));(t=q[1])&&f.push(new p(t,E,w,x,F));(t=q[0])&&f.push(new p(t,u,w,E,F))}return this};k.visitAfter=function(c){var f=[],g=[],q;for(this._root&&f.push(new p(this._root,this._x0,this._y0,this._x1,this._y1));q=
f.pop();){var t=q.node;if(t.length){var u,w=q.x0,x=q.y0,E=q.x1,F=q.y1,z=(w+E)/2,B=(x+F)/2;(u=t[0])&&f.push(new p(u,w,x,z,B));(u=t[1])&&f.push(new p(u,z,x,E,B));(u=t[2])&&f.push(new p(u,w,B,z,F));(u=t[3])&&f.push(new p(u,z,B,E,F))}g.push(q)}for(;q=g.pop();)c(q.node,q.x0,q.y0,q.x1,q.y1);return this};k.x=function(c){return arguments.length?(this._x=c,this):this._x};k.y=function(c){return arguments.length?(this._y=c,this):this._y};n.quadtree=d;Object.defineProperty(n,"__esModule",{value:!0})})},{}],165:[function(b,
y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?m(D,b("d3-path")):(n=n||self,m(n.d3=n.d3||{},n.d3))})(this,function(n,m){function p(xb){return function(){return xb}}function h(xb){return 1<=xb?Za:-1>=xb?-Za:Math.asin(xb)}function a(xb){return xb.innerRadius}function d(xb){return xb.outerRadius}function e(xb){return xb.startAngle}function l(xb){return xb.endAngle}function k(xb){return xb&&xb.padAngle}function c(xb,Ab,jc,Bc,Ic,ec,ic){var Gb=xb-jc,yb=Ab-Bc;ic=(ic?ec:-ec)/ib(Gb*Gb+yb*
yb);yb*=ic;Gb*=-ic;var Eb=xb+yb,Lb=Ab+Gb,fc=jc+yb,Oc=Bc+Gb;jc=(Eb+fc)/2;Bc=(Lb+Oc)/2;Ab=fc-Eb;xb=Oc-Lb;ic=Ab*Ab+xb*xb;ec=Ic-ec;Oc=Eb*Oc-fc*Lb;var xc=(0>xb?-1:1)*ib(Ia(0,ec*ec*ic-Oc*Oc));Eb=(Oc*xb-Ab*xc)/ic;Lb=(-Oc*Ab-xb*xc)/ic;fc=(Oc*xb+Ab*xc)/ic;Ab=(-Oc*Ab+xb*xc)/ic;xb=Eb-jc;ic=Lb-Bc;jc=fc-jc;Bc=Ab-Bc;xb*xb+ic*ic>jc*jc+Bc*Bc&&(Eb=fc,Lb=Ab);return{cx:Eb,cy:Lb,x01:-yb,y01:-Gb,x11:Eb*(Ic/ec-1),y11:Lb*(Ic/ec-1)}}function f(xb){this._context=xb}function g(xb){return new f(xb)}function q(xb){return xb[0]}
function t(xb){return xb[1]}function u(){function xb(Gb){var yb,Eb=Gb.length,Lb,fc=!1,Oc;null==Ic&&(ic=ec(Oc=m.path()));for(yb=0;yb<=Eb;++yb)!(yb<Eb&&Bc(Lb=Gb[yb],yb,Gb))===fc&&((fc=!fc)?ic.lineStart():ic.lineEnd()),fc&&ic.point(+Ab(Lb,yb,Gb),+jc(Lb,yb,Gb));if(Oc)return ic=null,Oc+""||null}var Ab=q,jc=t,Bc=p(!0),Ic=null,ec=g,ic=null;xb.x=function(Gb){return arguments.length?(Ab="function"===typeof Gb?Gb:p(+Gb),xb):Ab};xb.y=function(Gb){return arguments.length?(jc="function"===typeof Gb?Gb:p(+Gb),
xb):jc};xb.defined=function(Gb){return arguments.length?(Bc="function"===typeof Gb?Gb:p(!!Gb),xb):Bc};xb.curve=function(Gb){return arguments.length?(ec=Gb,null!=Ic&&(ic=ec(Ic)),xb):ec};xb.context=function(Gb){return arguments.length?(null==Gb?Ic=ic=null:ic=ec(Ic=Gb),xb):Ic};return xb}function w(){function xb(Lb){var fc,Oc,xc=Lb.length,Mc,dd=!1,bd,qd=Array(xc),Bd=Array(xc);null==Gb&&(Eb=yb(bd=m.path()));for(fc=0;fc<=xc;++fc){if(!(fc<xc&&ic(Mc=Lb[fc],fc,Lb))===dd)if(dd=!dd){var md=fc;Eb.areaStart();
Eb.lineStart()}else{Eb.lineEnd();Eb.lineStart();for(Oc=fc-1;Oc>=md;--Oc)Eb.point(qd[Oc],Bd[Oc]);Eb.lineEnd();Eb.areaEnd()}dd&&(qd[fc]=+jc(Mc,fc,Lb),Bd[fc]=+Ic(Mc,fc,Lb),Eb.point(Bc?+Bc(Mc,fc,Lb):qd[fc],ec?+ec(Mc,fc,Lb):Bd[fc]))}if(bd)return Eb=null,bd+""||null}function Ab(){return u().defined(ic).curve(yb).context(Gb)}var jc=q,Bc=null,Ic=p(0),ec=t,ic=p(!0),Gb=null,yb=g,Eb=null;xb.x=function(Lb){return arguments.length?(jc="function"===typeof Lb?Lb:p(+Lb),Bc=null,xb):jc};xb.x0=function(Lb){return arguments.length?
(jc="function"===typeof Lb?Lb:p(+Lb),xb):jc};xb.x1=function(Lb){return arguments.length?(Bc=null==Lb?null:"function"===typeof Lb?Lb:p(+Lb),xb):Bc};xb.y=function(Lb){return arguments.length?(Ic="function"===typeof Lb?Lb:p(+Lb),ec=null,xb):Ic};xb.y0=function(Lb){return arguments.length?(Ic="function"===typeof Lb?Lb:p(+Lb),xb):Ic};xb.y1=function(Lb){return arguments.length?(ec=null==Lb?null:"function"===typeof Lb?Lb:p(+Lb),xb):ec};xb.lineX0=xb.lineY0=function(){return Ab().x(jc).y(Ic)};xb.lineY1=function(){return Ab().x(jc).y(ec)};
xb.lineX1=function(){return Ab().x(Bc).y(Ic)};xb.defined=function(Lb){return arguments.length?(ic="function"===typeof Lb?Lb:p(!!Lb),xb):ic};xb.curve=function(Lb){return arguments.length?(yb=Lb,null!=Gb&&(Eb=yb(Gb)),xb):yb};xb.context=function(Lb){return arguments.length?(null==Lb?Gb=Eb=null:Eb=yb(Gb=Lb),xb):Gb};return xb}function x(xb,Ab){return Ab<xb?-1:Ab>xb?1:Ab>=xb?0:NaN}function E(xb){return xb}function F(xb){this._curve=xb}function z(xb){function Ab(jc){return new F(xb(jc))}Ab._curve=xb;return Ab}
function B(xb){var Ab=xb.curve;xb.angle=xb.x;delete xb.x;xb.radius=xb.y;delete xb.y;xb.curve=function(jc){return arguments.length?Ab(z(jc)):Ab()._curve};return xb}function C(){return B(u().curve(Ba))}function v(){var xb=w().curve(Ba),Ab=xb.curve,jc=xb.lineX0,Bc=xb.lineX1,Ic=xb.lineY0,ec=xb.lineY1;xb.angle=xb.x;delete xb.x;xb.startAngle=xb.x0;delete xb.x0;xb.endAngle=xb.x1;delete xb.x1;xb.radius=xb.y;delete xb.y;xb.innerRadius=xb.y0;delete xb.y0;xb.outerRadius=xb.y1;delete xb.y1;xb.lineStartAngle=
function(){return B(jc())};delete xb.lineX0;xb.lineEndAngle=function(){return B(Bc())};delete xb.lineX1;xb.lineInnerRadius=function(){return B(Ic())};delete xb.lineY0;xb.lineOuterRadius=function(){return B(ec())};delete xb.lineY1;xb.curve=function(ic){return arguments.length?Ab(z(ic)):Ab()._curve};return xb}function G(xb,Ab){return[(Ab=+Ab)*Math.cos(xb-=Math.PI/2),Ab*Math.sin(xb)]}function I(xb){return xb.source}function J(xb){return xb.target}function K(xb){function Ab(){var Gb,yb=Ma.call(arguments),
Eb=jc.apply(this,yb),Lb=Bc.apply(this,yb);ic||(ic=Gb=m.path());xb(ic,+Ic.apply(this,(yb[0]=Eb,yb)),+ec.apply(this,yb),+Ic.apply(this,(yb[0]=Lb,yb)),+ec.apply(this,yb));if(Gb)return ic=null,Gb+""||null}var jc=I,Bc=J,Ic=q,ec=t,ic=null;Ab.source=function(Gb){return arguments.length?(jc=Gb,Ab):jc};Ab.target=function(Gb){return arguments.length?(Bc=Gb,Ab):Bc};Ab.x=function(Gb){return arguments.length?(Ic="function"===typeof Gb?Gb:p(+Gb),Ab):Ic};Ab.y=function(Gb){return arguments.length?(ec="function"===
typeof Gb?Gb:p(+Gb),Ab):ec};Ab.context=function(Gb){return arguments.length?(ic=null==Gb?null:Gb,Ab):ic};return Ab}function N(xb,Ab,jc,Bc,Ic){xb.moveTo(Ab,jc);xb.bezierCurveTo(Ab=(Ab+Bc)/2,jc,Ab,Ic,Bc,Ic)}function H(xb,Ab,jc,Bc,Ic){xb.moveTo(Ab,jc);xb.bezierCurveTo(Ab,jc=(jc+Ic)/2,Bc,jc,Bc,Ic)}function L(xb,Ab,jc,Bc,Ic){var ec=G(Ab,jc);Ab=G(Ab,jc=(jc+Ic)/2);jc=G(Bc,jc);Bc=G(Bc,Ic);xb.moveTo(ec[0],ec[1]);xb.bezierCurveTo(Ab[0],Ab[1],jc[0],jc[1],Bc[0],Bc[1])}function P(){}function Q(xb,Ab,jc){xb._context.bezierCurveTo((2*
xb._x0+xb._x1)/3,(2*xb._y0+xb._y1)/3,(xb._x0+2*xb._x1)/3,(xb._y0+2*xb._y1)/3,(xb._x0+4*xb._x1+Ab)/6,(xb._y0+4*xb._y1+jc)/6)}function S(xb){this._context=xb}function O(xb){this._context=xb}function U(xb){this._context=xb}function X(xb,Ab){this._basis=new S(xb);this._beta=Ab}function da(xb,Ab,jc){xb._context.bezierCurveTo(xb._x1+xb._k*(xb._x2-xb._x0),xb._y1+xb._k*(xb._y2-xb._y0),xb._x2+xb._k*(xb._x1-Ab),xb._y2+xb._k*(xb._y1-jc),xb._x2,xb._y2)}function ea(xb,Ab){this._context=xb;this._k=(1-Ab)/6}function ca(xb,
Ab){this._context=xb;this._k=(1-Ab)/6}function ia(xb,Ab){this._context=xb;this._k=(1-Ab)/6}function ha(xb,Ab,jc){var Bc=xb._x1,Ic=xb._y1,ec=xb._x2,ic=xb._y2;if(1E-12<xb._l01_a){var Gb=2*xb._l01_2a+3*xb._l01_a*xb._l12_a+xb._l12_2a,yb=3*xb._l01_a*(xb._l01_a+xb._l12_a);Bc=(Bc*Gb-xb._x0*xb._l12_2a+xb._x2*xb._l01_2a)/yb;Ic=(Ic*Gb-xb._y0*xb._l12_2a+xb._y2*xb._l01_2a)/yb}1E-12<xb._l23_a&&(Gb=2*xb._l23_2a+3*xb._l23_a*xb._l12_a+xb._l12_2a,yb=3*xb._l23_a*(xb._l23_a+xb._l12_a),ec=(ec*Gb+xb._x1*xb._l23_2a-Ab*
xb._l12_2a)/yb,ic=(ic*Gb+xb._y1*xb._l23_2a-jc*xb._l12_2a)/yb);xb._context.bezierCurveTo(Bc,Ic,ec,ic,xb._x2,xb._y2)}function fa(xb,Ab){this._context=xb;this._alpha=Ab}function na(xb,Ab){this._context=xb;this._alpha=Ab}function sa(xb,Ab){this._context=xb;this._alpha=Ab}function ua(xb){this._context=xb}function ta(xb,Ab,jc){var Bc=xb._x1-xb._x0;Ab-=xb._x1;var Ic=(xb._y1-xb._y0)/(Bc||0>Ab&&-0);xb=(jc-xb._y1)/(Ab||0>Bc&&-0);return((0>Ic?-1:1)+(0>xb?-1:1))*Math.min(Math.abs(Ic),Math.abs(xb),.5*Math.abs((Ic*
Ab+xb*Bc)/(Bc+Ab)))||0}function oa(xb,Ab){var jc=xb._x1-xb._x0;return jc?(3*(xb._y1-xb._y0)/jc-Ab)/2:Ab}function va(xb,Ab,jc){var Bc=xb._x0,Ic=xb._x1,ec=xb._y1,ic=(Ic-Bc)/3;xb._context.bezierCurveTo(Bc+ic,xb._y0+ic*Ab,Ic-ic,ec-ic*jc,Ic,ec)}function ma(xb){this._context=xb}function pa(xb){this._context=new za(xb)}function za(xb){this._context=xb}function qa(xb){this._context=xb}function Ca(xb){var Ab,jc=xb.length-1,Bc=Array(jc),Ic=Array(jc),ec=Array(jc);Bc[0]=0;Ic[0]=2;ec[0]=xb[0]+2*xb[1];for(Ab=1;Ab<
jc-1;++Ab)Bc[Ab]=1,Ic[Ab]=4,ec[Ab]=4*xb[Ab]+2*xb[Ab+1];Bc[jc-1]=2;Ic[jc-1]=7;ec[jc-1]=8*xb[jc-1]+xb[jc];for(Ab=1;Ab<jc;++Ab){var ic=Bc[Ab]/Ic[Ab-1];Ic[Ab]-=ic;ec[Ab]-=ic*ec[Ab-1]}Bc[jc-1]=ec[jc-1]/Ic[jc-1];for(Ab=jc-2;0<=Ab;--Ab)Bc[Ab]=(ec[Ab]-Bc[Ab+1])/Ic[Ab];Ic[jc-1]=(xb[jc]+Bc[jc-1])/2;for(Ab=0;Ab<jc-1;++Ab)Ic[Ab]=2*xb[Ab+1]-Bc[Ab+1];return[Bc,Ic]}function Ka(xb,Ab){this._context=xb;this._t=Ab}function Oa(xb,Ab){if(1<(ic=xb.length))for(var jc=1,Bc,Ic,ec=xb[Ab[0]],ic,Gb=ec.length;jc<ic;++jc)for(Ic=
ec,ec=xb[Ab[jc]],Bc=0;Bc<Gb;++Bc)ec[Bc][1]+=ec[Bc][0]=isNaN(Ic[Bc][1])?Ic[Bc][0]:Ic[Bc][1]}function kb(xb){xb=xb.length;for(var Ab=Array(xb);0<=--xb;)Ab[xb]=xb;return Ab}function mb(xb,Ab){return xb[Ab]}function tb(xb){var Ab=xb.map(nb);return kb(xb).sort(function(jc,Bc){return Ab[jc]-Ab[Bc]})}function nb(xb){for(var Ab=-1,jc=0,Bc=xb.length,Ic,ec=-Infinity;++Ab<Bc;)(Ic=+xb[Ab][1])>ec&&(ec=Ic,jc=Ab);return jc}function Ta(xb){var Ab=xb.map(fb);return kb(xb).sort(function(jc,Bc){return Ab[jc]-Ab[Bc]})}
function fb(xb){for(var Ab=0,jc=-1,Bc=xb.length,Ic;++jc<Bc;)if(Ic=+xb[jc][1])Ab+=Ic;return Ab}var ab=Math.abs,ra=Math.atan2,Ea=Math.cos,Ia=Math.max,Va=Math.min,rb=Math.sin,ib=Math.sqrt,Na=Math.PI,Za=Na/2,eb=2*Na;f.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(xb,Ab){xb=+xb;Ab=+Ab;switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(xb,Ab):this._context.moveTo(xb,Ab);break;case 1:this._point=2;default:this._context.lineTo(xb,Ab)}}};var Ba=z(g);F.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(xb,Ab){this._curve.point(Ab*Math.sin(xb),Ab*-Math.cos(xb))}};var Ma=Array.prototype.slice,$a={draw:function(xb,Ab){Ab=Math.sqrt(Ab/Na);xb.moveTo(Ab,0);
xb.arc(0,0,Ab,0,eb)}},lb={draw:function(xb,Ab){Ab=Math.sqrt(Ab/5)/2;xb.moveTo(-3*Ab,-Ab);xb.lineTo(-Ab,-Ab);xb.lineTo(-Ab,-3*Ab);xb.lineTo(Ab,-3*Ab);xb.lineTo(Ab,-Ab);xb.lineTo(3*Ab,-Ab);xb.lineTo(3*Ab,Ab);xb.lineTo(Ab,Ab);xb.lineTo(Ab,3*Ab);xb.lineTo(-Ab,3*Ab);xb.lineTo(-Ab,Ab);xb.lineTo(-3*Ab,Ab);xb.closePath()}},Ra=Math.sqrt(1/3),jb=2*Ra,Xa={draw:function(xb,Ab){Ab=Math.sqrt(Ab/jb);var jc=Ab*Ra;xb.moveTo(0,-Ab);xb.lineTo(jc,0);xb.lineTo(0,Ab);xb.lineTo(-jc,0);xb.closePath()}},pb=Math.sin(Na/10)/
Math.sin(7*Na/10),vb=Math.sin(eb/10)*pb,zb=-Math.cos(eb/10)*pb;pb={draw:function(xb,Ab){Ab=Math.sqrt(.8908130915292852*Ab);var jc=vb*Ab,Bc=zb*Ab;xb.moveTo(0,-Ab);xb.lineTo(jc,Bc);for(var Ic=1;5>Ic;++Ic){var ec=eb*Ic/5,ic=Math.cos(ec);ec=Math.sin(ec);xb.lineTo(ec*Ab,-ic*Ab);xb.lineTo(ic*jc-ec*Bc,ec*jc+ic*Bc)}xb.closePath()}};var Jb={draw:function(xb,Ab){Ab=Math.sqrt(Ab);var jc=-Ab/2;xb.rect(jc,jc,Ab,Ab)}},Zb=Math.sqrt(3),pc={draw:function(xb,Ab){Ab=-Math.sqrt(Ab/(3*Zb));xb.moveTo(0,2*Ab);xb.lineTo(-Zb*
Ab,-Ab);xb.lineTo(Zb*Ab,-Ab);xb.closePath()}},Ac=Math.sqrt(3)/2,ed=1/Math.sqrt(12),Rc=3*(ed/2+1),id={draw:function(xb,Ab){var jc=Math.sqrt(Ab/Rc);Ab=jc/2;var Bc=jc*ed;jc=jc*ed+jc;var Ic=-Ab;xb.moveTo(Ab,Bc);xb.lineTo(Ab,jc);xb.lineTo(Ic,jc);xb.lineTo(-.5*Ab-Ac*Bc,Ac*Ab+-.5*Bc);xb.lineTo(-.5*Ab-Ac*jc,Ac*Ab+-.5*jc);xb.lineTo(-.5*Ic-Ac*jc,Ac*Ic+-.5*jc);xb.lineTo(-.5*Ab+Ac*Bc,-.5*Bc-Ac*Ab);xb.lineTo(-.5*Ab+Ac*jc,-.5*jc-Ac*Ab);xb.lineTo(-.5*Ic+Ac*jc,-.5*jc-Ac*Ic);xb.closePath()}},Tc=[$a,lb,Xa,Jb,pb,pc,
id];S.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:Q(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(xb,Ab){xb=+xb;Ab=+Ab;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(xb,Ab):this._context.moveTo(xb,
Ab);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Q(this,xb,Ab)}this._x0=this._x1;this._x1=xb;this._y0=this._y1;this._y1=Ab}};O.prototype={areaStart:P,areaEnd:P,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+
2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(xb,Ab){xb=+xb;Ab=+Ab;switch(this._point){case 0:this._point=1;this._x2=xb;this._y2=Ab;break;case 1:this._point=2;this._x3=xb;this._y3=Ab;break;case 2:this._point=3;this._x4=xb;this._y4=Ab;this._context.moveTo((this._x0+4*this._x1+xb)/6,(this._y0+
4*this._y1+Ab)/6);break;default:Q(this,xb,Ab)}this._x0=this._x1;this._x1=xb;this._y0=this._y1;this._y1=Ab}};U.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(xb,Ab){xb=+xb;Ab=+Ab;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=
3;var jc=(this._x0+4*this._x1+xb)/6,Bc=(this._y0+4*this._y1+Ab)/6;this._line?this._context.lineTo(jc,Bc):this._context.moveTo(jc,Bc);break;case 3:this._point=4;default:Q(this,xb,Ab)}this._x0=this._x1;this._x1=xb;this._y0=this._y1;this._y1=Ab}};X.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var xb=this._x,Ab=this._y,jc=xb.length-1;if(0<jc)for(var Bc=xb[0],Ic=Ab[0],ec=xb[jc]-Bc,ic=Ab[jc]-Ic,Gb=-1,yb;++Gb<=jc;)yb=Gb/jc,this._basis.point(this._beta*
xb[Gb]+(1-this._beta)*(Bc+yb*ec),this._beta*Ab[Gb]+(1-this._beta)*(Ic+yb*ic));this._x=this._y=null;this._basis.lineEnd()},point:function(xb,Ab){this._x.push(+xb);this._y.push(+Ab)}};var wd=function jc(Ab){function Bc(Ic){return 1===Ab?new S(Ic):new X(Ic,Ab)}Bc.beta=function(Ic){return jc(+Ic)};return Bc}(.85);ea.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,
this._y2);break;case 3:da(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Ab,jc){Ab=+Ab;jc=+jc;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Ab,jc):this._context.moveTo(Ab,jc);break;case 1:this._point=2;this._x1=Ab;this._y1=jc;break;case 2:this._point=3;default:da(this,Ab,jc)}this._x0=this._x1;this._x1=this._x2;this._x2=Ab;this._y0=this._y1;this._y1=this._y2;this._y2=jc}};var Fb=function Bc(jc){function Ic(ec){return new ea(ec,
jc)}Ic.tension=function(ec){return Bc(+ec)};return Ic}(0);ca.prototype={areaStart:P,areaEnd:P,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),
this.point(this._x5,this._y5)}},point:function(jc,Bc){jc=+jc;Bc=+Bc;switch(this._point){case 0:this._point=1;this._x3=jc;this._y3=Bc;break;case 1:this._point=2;this._context.moveTo(this._x4=jc,this._y4=Bc);break;case 2:this._point=3;this._x5=jc;this._y5=Bc;break;default:da(this,jc,Bc)}this._x0=this._x1;this._x1=this._x2;this._x2=jc;this._y0=this._y1;this._y1=this._y2;this._y2=Bc}};var ac=function Ic(Bc){function ec(ic){return new ca(ic,Bc)}ec.tension=function(ic){return Ic(+ic)};return ec}(0);ia.prototype=
{areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Bc,Ic){Bc=+Bc;Ic=+Ic;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);
break;case 3:this._point=4;default:da(this,Bc,Ic)}this._x0=this._x1;this._x1=this._x2;this._x2=Bc;this._y0=this._y1;this._y1=this._y2;this._y2=Ic}};var Jc=function ec(Ic){function ic(Gb){return new ia(Gb,Ic)}ic.tension=function(Gb){return ec(+Gb)};return ic}(0);fa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=
0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Ic,ec){Ic=+Ic;ec=+ec;if(this._point){var ic=this._x2-Ic,Gb=this._y2-ec;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(ic*ic+Gb*Gb,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Ic,ec):this._context.moveTo(Ic,ec);break;case 1:this._point=
2;break;case 2:this._point=3;default:ha(this,Ic,ec)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Ic;this._y0=this._y1;this._y1=this._y2;this._y2=ec}};var qc=function ic(ec){function Gb(yb){return ec?new fa(yb,ec):new ea(yb,0)}Gb.alpha=function(yb){return ic(+yb)};return Gb}(.5);na.prototype={areaStart:P,areaEnd:P,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=
this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(ec,ic){ec=+ec;ic=+ic;if(this._point){var Gb=this._x2-ec,yb=this._y2-
ic;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Gb*Gb+yb*yb,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=ec;this._y3=ic;break;case 1:this._point=2;this._context.moveTo(this._x4=ec,this._y4=ic);break;case 2:this._point=3;this._x5=ec;this._y5=ic;break;default:ha(this,ec,ic)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=ec;this._y0=this._y1;this._y1=this._y2;this._y2=ic}};var tc=function Gb(ic){function yb(Eb){return ic?
new na(Eb,ic):new ca(Eb,0)}yb.alpha=function(Eb){return Gb(+Eb)};return yb}(.5);sa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(ic,Gb){ic=+ic;Gb=+Gb;if(this._point){var yb=
this._x2-ic,Eb=this._y2-Gb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(yb*yb+Eb*Eb,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ha(this,ic,Gb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=ic;this._y0=this._y1;this._y1=
this._y2;this._y2=Gb}};var vc=function yb(Gb){function Eb(Lb){return Gb?new sa(Lb,Gb):new ia(Lb,0)}Eb.alpha=function(Lb){return yb(+Lb)};return Eb}(.5);ua.prototype={areaStart:P,areaEnd:P,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Gb,yb){Gb=+Gb;yb=+yb;this._point?this._context.lineTo(Gb,yb):(this._point=1,this._context.moveTo(Gb,yb))}};ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:va(this,this._t0,oa(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Gb,yb){var Eb=NaN;Gb=+Gb;yb=+yb;if(Gb!==this._x1||yb!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Gb,yb):this._context.moveTo(Gb,yb);break;case 1:this._point=
2;break;case 2:this._point=3;va(this,oa(this,Eb=ta(this,Gb,yb)),Eb);break;default:va(this,this._t0,Eb=ta(this,Gb,yb))}this._x0=this._x1;this._x1=Gb;this._y0=this._y1;this._y1=yb;this._t0=Eb}}};(pa.prototype=Object.create(ma.prototype)).point=function(Gb,yb){ma.prototype.point.call(this,yb,Gb)};za.prototype={moveTo:function(Gb,yb){this._context.moveTo(yb,Gb)},closePath:function(){this._context.closePath()},lineTo:function(Gb,yb){this._context.lineTo(yb,Gb)},bezierCurveTo:function(Gb,yb,Eb,Lb,fc,Oc){this._context.bezierCurveTo(yb,
Gb,Lb,Eb,Oc,fc)}};qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var Gb=this._x,yb=this._y,Eb=Gb.length;if(Eb)if(this._line?this._context.lineTo(Gb[0],yb[0]):this._context.moveTo(Gb[0],yb[0]),2===Eb)this._context.lineTo(Gb[1],yb[1]);else for(var Lb=Ca(Gb),fc=Ca(yb),Oc=0,xc=1;xc<Eb;++Oc,++xc)this._context.bezierCurveTo(Lb[0][Oc],fc[0][Oc],Lb[1][Oc],fc[1][Oc],Gb[xc],yb[xc]);(this._line||0!==this._line&&
1===Eb)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(Gb,yb){this._x.push(+Gb);this._y.push(+yb)}};Ka.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},
point:function(Gb,yb){Gb=+Gb;yb=+yb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Gb,yb):this._context.moveTo(Gb,yb);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,yb),this._context.lineTo(Gb,yb);else{var Eb=this._x*(1-this._t)+Gb*this._t;this._context.lineTo(Eb,this._y);this._context.lineTo(Eb,yb)}}this._x=Gb;this._y=yb}};n.arc=function(){function Gb(){var bd,qd=+yb.apply(this,arguments),Bd=+Eb.apply(this,arguments),md=Oc.apply(this,arguments)-
Za,Fd=xc.apply(this,arguments)-Za,Od=ab(Fd-md),sd=Fd>md;dd||(dd=bd=m.path());if(Bd<qd){var cd=Bd;Bd=qd;qd=cd}if(1E-12<Bd)if(Od>eb-1E-12)dd.moveTo(Bd*Ea(md),Bd*rb(md)),dd.arc(0,0,Bd,md,Fd,!sd),1E-12<qd&&(dd.moveTo(qd*Ea(Fd),qd*rb(Fd)),dd.arc(0,0,qd,Fd,md,sd));else{var Gd=md,Nd=Fd;cd=md;var Pd=Fd,Ke=Od,Wd=Od,Wc=Mc.apply(this,arguments)/2,rd=1E-12<Wc&&(fc?+fc.apply(this,arguments):ib(qd*qd+Bd*Bd)),Kd=Va(ab(Bd-qd)/2,+Lb.apply(this,arguments)),Rd=Kd,se=Kd;if(1E-12<rd){var Ee=h(rd/qd*rb(Wc));Wc=h(rd/Bd*
rb(Wc));1E-12<(Ke-=2*Ee)?(Ee*=sd?1:-1,cd+=Ee,Pd-=Ee):(Ke=0,cd=Pd=(md+Fd)/2);1E-12<(Wd-=2*Wc)?(Wc*=sd?1:-1,Gd+=Wc,Nd-=Wc):(Wd=0,Gd=Nd=(md+Fd)/2)}md=Bd*Ea(Gd);Fd=Bd*rb(Gd);Ee=qd*Ea(Pd);Wc=qd*rb(Pd);if(1E-12<Kd){var $d=Bd*Ea(Nd),Ud=Bd*rb(Nd),Je=qd*Ea(cd),Fe=qd*rb(cd);if(Od=Od<Na){var ke=Je-md;Od=Fe-Fd;rd=Ee-$d;var Ce=Wc-Ud,sf=Ce*ke-rd*Od;1E-12>sf*sf?ke=void 0:(sf=(rd*(Fd-Ud)-Ce*(md-$d))/sf,ke=[md+sf*ke,Fd+sf*Od]);Od=ke}Od&&(Rd=md-ke[0],se=Fd-ke[1],Od=$d-ke[0],rd=Ud-ke[1],Rd=(Rd*Od+se*rd)/(ib(Rd*Rd+se*
se)*ib(Od*Od+rd*rd)),se=1/rb((1<Rd?0:-1>Rd?Na:Math.acos(Rd))/2),ke=ib(ke[0]*ke[0]+ke[1]*ke[1]),Rd=Va(Kd,(qd-ke)/(se-1)),se=Va(Kd,(Bd-ke)/(se+1)))}1E-12<Wd?1E-12<se?(Gd=c(Je,Fe,md,Fd,Bd,se,sd),Nd=c($d,Ud,Ee,Wc,Bd,se,sd),dd.moveTo(Gd.cx+Gd.x01,Gd.cy+Gd.y01),se<Kd?dd.arc(Gd.cx,Gd.cy,se,ra(Gd.y01,Gd.x01),ra(Nd.y01,Nd.x01),!sd):(dd.arc(Gd.cx,Gd.cy,se,ra(Gd.y01,Gd.x01),ra(Gd.y11,Gd.x11),!sd),dd.arc(0,0,Bd,ra(Gd.cy+Gd.y11,Gd.cx+Gd.x11),ra(Nd.cy+Nd.y11,Nd.cx+Nd.x11),!sd),dd.arc(Nd.cx,Nd.cy,se,ra(Nd.y11,Nd.x11),
ra(Nd.y01,Nd.x01),!sd))):(dd.moveTo(md,Fd),dd.arc(0,0,Bd,Gd,Nd,!sd)):dd.moveTo(md,Fd);1E-12<qd&&1E-12<Ke?1E-12<Rd?(Gd=c(Ee,Wc,$d,Ud,qd,-Rd,sd),Nd=c(md,Fd,Je,Fe,qd,-Rd,sd),dd.lineTo(Gd.cx+Gd.x01,Gd.cy+Gd.y01),Rd<Kd?dd.arc(Gd.cx,Gd.cy,Rd,ra(Gd.y01,Gd.x01),ra(Nd.y01,Nd.x01),!sd):(dd.arc(Gd.cx,Gd.cy,Rd,ra(Gd.y01,Gd.x01),ra(Gd.y11,Gd.x11),!sd),dd.arc(0,0,qd,ra(Gd.cy+Gd.y11,Gd.cx+Gd.x11),ra(Nd.cy+Nd.y11,Nd.cx+Nd.x11),sd),dd.arc(Nd.cx,Nd.cy,Rd,ra(Nd.y11,Nd.x11),ra(Nd.y01,Nd.x01),!sd))):dd.arc(0,0,qd,Pd,
cd,sd):dd.lineTo(Ee,Wc)}else dd.moveTo(0,0);dd.closePath();if(bd)return dd=null,bd+""||null}var yb=a,Eb=d,Lb=p(0),fc=null,Oc=e,xc=l,Mc=k,dd=null;Gb.centroid=function(){var bd=(+yb.apply(this,arguments)+ +Eb.apply(this,arguments))/2,qd=(+Oc.apply(this,arguments)+ +xc.apply(this,arguments))/2-Na/2;return[Ea(qd)*bd,rb(qd)*bd]};Gb.innerRadius=function(bd){return arguments.length?(yb="function"===typeof bd?bd:p(+bd),Gb):yb};Gb.outerRadius=function(bd){return arguments.length?(Eb="function"===typeof bd?
bd:p(+bd),Gb):Eb};Gb.cornerRadius=function(bd){return arguments.length?(Lb="function"===typeof bd?bd:p(+bd),Gb):Lb};Gb.padRadius=function(bd){return arguments.length?(fc=null==bd?null:"function"===typeof bd?bd:p(+bd),Gb):fc};Gb.startAngle=function(bd){return arguments.length?(Oc="function"===typeof bd?bd:p(+bd),Gb):Oc};Gb.endAngle=function(bd){return arguments.length?(xc="function"===typeof bd?bd:p(+bd),Gb):xc};Gb.padAngle=function(bd){return arguments.length?(Mc="function"===typeof bd?bd:p(+bd),
Gb):Mc};Gb.context=function(bd){return arguments.length?(dd=null==bd?null:bd,Gb):dd};return Gb};n.area=w;n.areaRadial=v;n.curveBasis=function(Gb){return new S(Gb)};n.curveBasisClosed=function(Gb){return new O(Gb)};n.curveBasisOpen=function(Gb){return new U(Gb)};n.curveBundle=wd;n.curveCardinal=Fb;n.curveCardinalClosed=ac;n.curveCardinalOpen=Jc;n.curveCatmullRom=qc;n.curveCatmullRomClosed=tc;n.curveCatmullRomOpen=vc;n.curveLinear=g;n.curveLinearClosed=function(Gb){return new ua(Gb)};n.curveMonotoneX=
function(Gb){return new ma(Gb)};n.curveMonotoneY=function(Gb){return new pa(Gb)};n.curveNatural=function(Gb){return new qa(Gb)};n.curveStep=function(Gb){return new Ka(Gb,.5)};n.curveStepAfter=function(Gb){return new Ka(Gb,1)};n.curveStepBefore=function(Gb){return new Ka(Gb,0)};n.line=u;n.lineRadial=C;n.linkHorizontal=function(){return K(N)};n.linkRadial=function(){var Gb=K(L);Gb.angle=Gb.x;delete Gb.x;Gb.radius=Gb.y;delete Gb.y;return Gb};n.linkVertical=function(){return K(H)};n.pie=function(){function Gb(Mc){var dd,
bd=Mc.length;var qd=0;var Bd=Array(bd),md=Array(bd),Fd=+fc.apply(this,arguments);var Od=Math.min(eb,Math.max(-eb,Oc.apply(this,arguments)-Fd));var sd=Math.min(Math.abs(Od)/bd,xc.apply(this,arguments)),cd=sd*(0>Od?-1:1),Gd;for(dd=0;dd<bd;++dd)0<(Gd=md[Bd[dd]=dd]=+yb(Mc[dd],dd,Mc))&&(qd+=Gd);null!=Eb?Bd.sort(function(Pd,Ke){return Eb(md[Pd],md[Ke])}):null!=Lb&&Bd.sort(function(Pd,Ke){return Lb(Mc[Pd],Mc[Ke])});dd=0;for(Od=qd?(Od-bd*cd)/qd:0;dd<bd;++dd,Fd=Nd){qd=Bd[dd];Gd=md[qd];var Nd=Fd+(0<Gd?Gd*Od:
0)+cd;md[qd]={data:Mc[qd],index:dd,value:Gd,startAngle:Fd,endAngle:Nd,padAngle:sd}}return md}var yb=E,Eb=x,Lb=null,fc=p(0),Oc=p(eb),xc=p(0);Gb.value=function(Mc){return arguments.length?(yb="function"===typeof Mc?Mc:p(+Mc),Gb):yb};Gb.sortValues=function(Mc){return arguments.length?(Eb=Mc,Lb=null,Gb):Eb};Gb.sort=function(Mc){return arguments.length?(Lb=Mc,Eb=null,Gb):Lb};Gb.startAngle=function(Mc){return arguments.length?(fc="function"===typeof Mc?Mc:p(+Mc),Gb):fc};Gb.endAngle=function(Mc){return arguments.length?
(Oc="function"===typeof Mc?Mc:p(+Mc),Gb):Oc};Gb.padAngle=function(Mc){return arguments.length?(xc="function"===typeof Mc?Mc:p(+Mc),Gb):xc};return Gb};n.pointRadial=G;n.radialArea=v;n.radialLine=C;n.stack=function(){function Gb(Oc){var xc=yb.apply(this,arguments),Mc,dd=Oc.length,bd=xc.length,qd=Array(bd);for(Mc=0;Mc<bd;++Mc){for(var Bd=xc[Mc],md=qd[Mc]=Array(dd),Fd=0,Od;Fd<dd;++Fd)md[Fd]=Od=[0,+fc(Oc[Fd],Bd,Fd,Oc)],Od.data=Oc[Fd];md.key=Bd}Mc=0;for(xc=Eb(qd);Mc<bd;++Mc)qd[xc[Mc]].index=Mc;Lb(qd,xc);
return qd}var yb=p([]),Eb=kb,Lb=Oa,fc=mb;Gb.keys=function(Oc){return arguments.length?(yb="function"===typeof Oc?Oc:p(Ma.call(Oc)),Gb):yb};Gb.value=function(Oc){return arguments.length?(fc="function"===typeof Oc?Oc:p(+Oc),Gb):fc};Gb.order=function(Oc){return arguments.length?(Eb=null==Oc?kb:"function"===typeof Oc?Oc:p(Ma.call(Oc)),Gb):Eb};Gb.offset=function(Oc){return arguments.length?(Lb=null==Oc?Oa:Oc,Gb):Lb};return Gb};n.stackOffsetDiverging=function(Gb,yb){if(0<(dd=Gb.length))for(var Eb,Lb=0,
fc,Oc,xc,Mc,dd,bd=Gb[yb[0]].length;Lb<bd;++Lb)for(Eb=xc=Mc=0;Eb<dd;++Eb)0<(Oc=(fc=Gb[yb[Eb]][Lb])[1]-fc[0])?(fc[0]=xc,fc[1]=xc+=Oc):0>Oc?(fc[1]=Mc,fc[0]=Mc+=Oc):(fc[0]=0,fc[1]=Oc)};n.stackOffsetExpand=function(Gb,yb){if(0<(Lb=Gb.length)){for(var Eb,Lb,fc=0,Oc=Gb[0].length,xc;fc<Oc;++fc){for(xc=Eb=0;Eb<Lb;++Eb)xc+=Gb[Eb][fc][1]||0;if(xc)for(Eb=0;Eb<Lb;++Eb)Gb[Eb][fc][1]/=xc}Oa(Gb,yb)}};n.stackOffsetNone=Oa;n.stackOffsetSilhouette=function(Gb,yb){if(0<(fc=Gb.length)){for(var Eb=0,Lb=Gb[yb[0]],fc,Oc=
Lb.length;Eb<Oc;++Eb){for(var xc=0,Mc=0;xc<fc;++xc)Mc+=Gb[xc][Eb][1]||0;Lb[Eb][1]+=Lb[Eb][0]=-Mc/2}Oa(Gb,yb)}};n.stackOffsetWiggle=function(Gb,yb){if(0<(xc=Gb.length)&&0<(Oc=(fc=Gb[yb[0]]).length)){for(var Eb=0,Lb=1,fc,Oc,xc;Lb<Oc;++Lb){for(var Mc=0,dd=0,bd=0;Mc<xc;++Mc){var qd=Gb[yb[Mc]],Bd=qd[Lb][1]||0;qd=(Bd-(qd[Lb-1][1]||0))/2;for(var md=0;md<Mc;++md){var Fd=Gb[yb[md]];qd+=(Fd[Lb][1]||0)-(Fd[Lb-1][1]||0)}dd+=Bd;bd+=qd*Bd}fc[Lb-1][1]+=fc[Lb-1][0]=Eb;dd&&(Eb-=bd/dd)}fc[Lb-1][1]+=fc[Lb-1][0]=Eb;
Oa(Gb,yb)}};n.stackOrderAppearance=tb;n.stackOrderAscending=Ta;n.stackOrderDescending=function(Gb){return Ta(Gb).reverse()};n.stackOrderInsideOut=function(Gb){var yb=Gb.length,Eb=Gb.map(fb),Lb=tb(Gb),fc=0,Oc=0,xc=[],Mc=[];for(Gb=0;Gb<yb;++Gb){var dd=Lb[Gb];fc<Oc?(fc+=Eb[dd],xc.push(dd)):(Oc+=Eb[dd],Mc.push(dd))}return Mc.reverse().concat(xc)};n.stackOrderNone=kb;n.stackOrderReverse=function(Gb){return kb(Gb).reverse()};n.symbol=function(){function Gb(){var fc;Lb||(Lb=fc=m.path());yb.apply(this,arguments).draw(Lb,
+Eb.apply(this,arguments));if(fc)return Lb=null,fc+""||null}var yb=p($a),Eb=p(64),Lb=null;Gb.type=function(fc){return arguments.length?(yb="function"===typeof fc?fc:p(fc),Gb):yb};Gb.size=function(fc){return arguments.length?(Eb="function"===typeof fc?fc:p(+fc),Gb):Eb};Gb.context=function(fc){return arguments.length?(Lb=null==fc?null:fc,Gb):Lb};return Gb};n.symbolCircle=$a;n.symbolCross=lb;n.symbolDiamond=Xa;n.symbolSquare=Jb;n.symbolStar=pb;n.symbolTriangle=pc;n.symbolWye=id;n.symbols=Tc;Object.defineProperty(n,
"__esModule",{value:!0})})},{"d3-path":163}],166:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?m(D,b("d3-time")):(n=n||self,m(n.d3=n.d3||{},n.d3))})(this,function(n,m){function p(Xa){if(0<=Xa.y&&100>Xa.y){var pb=new Date(-1,Xa.m,Xa.d,Xa.H,Xa.M,Xa.S,Xa.L);pb.setFullYear(Xa.y);return pb}return new Date(Xa.y,Xa.m,Xa.d,Xa.H,Xa.M,Xa.S,Xa.L)}function h(Xa){if(0<=Xa.y&&100>Xa.y){var pb=new Date(Date.UTC(-1,Xa.m,Xa.d,Xa.H,Xa.M,Xa.S,Xa.L));pb.setUTCFullYear(Xa.y);return pb}return new Date(Date.UTC(Xa.y,
Xa.m,Xa.d,Xa.H,Xa.M,Xa.S,Xa.L))}function a(Xa,pb,vb){return{y:Xa,m:pb,d:vb,H:0,M:0,S:0,L:0}}function d(Xa){function pb(ic,Gb){return function(yb){var Eb=[],Lb=-1,fc=0,Oc=ic.length,xc,Mc;for(yb instanceof Date||(yb=new Date(+yb));++Lb<Oc;)if(37===ic.charCodeAt(Lb)){Eb.push(ic.slice(fc,Lb));null!=(fc=eb[xc=ic.charAt(++Lb)])?xc=ic.charAt(++Lb):fc="e"===xc?" ":"0";if(Mc=Gb[xc])xc=Mc(yb,fc);Eb.push(xc);fc=Lb+1}Eb.push(ic.slice(fc,Lb));return Eb.join("")}}function vb(ic,Gb){return function(yb){var Eb=a(1900,
void 0,1);if(zb(Eb,ic,yb+="",0)!=yb.length)return null;if("Q"in Eb)return new Date(Eb.Q);if("s"in Eb)return new Date(1E3*Eb.s+("L"in Eb?Eb.L:0));!Gb||"Z"in Eb||(Eb.Z=0);"p"in Eb&&(Eb.H=Eb.H%12+12*Eb.p);void 0===Eb.m&&(Eb.m="q"in Eb?Eb.q:0);if("V"in Eb){if(1>Eb.V||53<Eb.V)return null;"w"in Eb||(Eb.w=1);if("Z"in Eb){yb=h(a(Eb.y,0,1));var Lb=yb.getUTCDay();yb=4<Lb||0===Lb?m.utcMonday.ceil(yb):m.utcMonday(yb);yb=m.utcDay.offset(yb,7*(Eb.V-1));Eb.y=yb.getUTCFullYear();Eb.m=yb.getUTCMonth();Eb.d=yb.getUTCDate()+
(Eb.w+6)%7}else yb=p(a(Eb.y,0,1)),Lb=yb.getDay(),yb=4<Lb||0===Lb?m.timeMonday.ceil(yb):m.timeMonday(yb),yb=m.timeDay.offset(yb,7*(Eb.V-1)),Eb.y=yb.getFullYear(),Eb.m=yb.getMonth(),Eb.d=yb.getDate()+(Eb.w+6)%7}else if("W"in Eb||"U"in Eb)"w"in Eb||(Eb.w="u"in Eb?Eb.u%7:"W"in Eb?1:0),Lb="Z"in Eb?h(a(Eb.y,0,1)).getUTCDay():p(a(Eb.y,0,1)).getDay(),Eb.m=0,Eb.d="W"in Eb?(Eb.w+6)%7+7*Eb.W-(Lb+5)%7:Eb.w+7*Eb.U-(Lb+6)%7;return"Z"in Eb?(Eb.H+=Eb.Z/100|0,Eb.M+=Eb.Z%100,h(Eb)):p(Eb)}}function zb(ic,Gb,yb,Eb){for(var Lb=
0,fc=Gb.length,Oc=yb.length,xc;Lb<fc;){if(Eb>=Oc)return-1;xc=Gb.charCodeAt(Lb++);if(37===xc){if(xc=Gb.charAt(Lb++),xc=ec[xc in eb?Gb.charAt(Lb++):xc],!xc||0>(Eb=xc(ic,yb,Eb)))return-1}else if(xc!=yb.charCodeAt(Eb++))return-1}return Eb}var Jb=Xa.dateTime,Zb=Xa.date,pc=Xa.time,Ac=Xa.periods,ed=Xa.days,Rc=Xa.shortDays,id=Xa.months,Tc=Xa.shortMonths,wd=k(Ac),Fb=c(Ac),ac=k(ed),Jc=c(ed),qc=k(Rc),tc=c(Rc),vc=k(id),xb=c(id),Ab=k(Tc),jc=c(Tc),Bc={a:function(ic){return Rc[ic.getDay()]},A:function(ic){return ed[ic.getDay()]},
b:function(ic){return Tc[ic.getMonth()]},B:function(ic){return id[ic.getMonth()]},c:null,d:P,e:P,f:X,H:Q,I:S,j:O,L:U,m:da,M:ea,p:function(ic){return Ac[+(12<=ic.getHours())]},q:function(ic){return 1+~~(ic.getMonth()/3)},Q:Va,s:rb,S:ca,u:ia,U:ha,V:fa,w:na,W:sa,x:null,X:null,y:ua,Y:ta,Z:oa,"%":Ia},Ic={a:function(ic){return Rc[ic.getUTCDay()]},A:function(ic){return ed[ic.getUTCDay()]},b:function(ic){return Tc[ic.getUTCMonth()]},B:function(ic){return id[ic.getUTCMonth()]},c:null,d:va,e:va,f:Ca,H:ma,I:pa,
j:za,L:qa,m:Ka,M:Oa,p:function(ic){return Ac[+(12<=ic.getUTCHours())]},q:function(ic){return 1+~~(ic.getUTCMonth()/3)},Q:Va,s:rb,S:kb,u:mb,U:tb,V:nb,w:Ta,W:fb,x:null,X:null,y:ab,Y:ra,Z:Ea,"%":Ia},ec={a:function(ic,Gb,yb){return(Gb=qc.exec(Gb.slice(yb)))?(ic.w=tc[Gb[0].toLowerCase()],yb+Gb[0].length):-1},A:function(ic,Gb,yb){return(Gb=ac.exec(Gb.slice(yb)))?(ic.w=Jc[Gb[0].toLowerCase()],yb+Gb[0].length):-1},b:function(ic,Gb,yb){return(Gb=Ab.exec(Gb.slice(yb)))?(ic.m=jc[Gb[0].toLowerCase()],yb+Gb[0].length):
-1},B:function(ic,Gb,yb){return(Gb=vc.exec(Gb.slice(yb)))?(ic.m=xb[Gb[0].toLowerCase()],yb+Gb[0].length):-1},c:function(ic,Gb,yb){return zb(ic,Jb,Gb,yb)},d:B,e:B,f:K,H:v,I:v,j:C,L:J,m:z,M:G,p:function(ic,Gb,yb){return(Gb=wd.exec(Gb.slice(yb)))?(ic.p=Fb[Gb[0].toLowerCase()],yb+Gb[0].length):-1},q:F,Q:H,s:L,S:I,u:g,U:q,V:t,w:f,W:u,x:function(ic,Gb,yb){return zb(ic,Zb,Gb,yb)},X:function(ic,Gb,yb){return zb(ic,pc,Gb,yb)},y:x,Y:w,Z:E,"%":N};Bc.x=pb(Zb,Bc);Bc.X=pb(pc,Bc);Bc.c=pb(Jb,Bc);Ic.x=pb(Zb,Ic);Ic.X=
pb(pc,Ic);Ic.c=pb(Jb,Ic);return{format:function(ic){var Gb=pb(ic+="",Bc);Gb.toString=function(){return ic};return Gb},parse:function(ic){var Gb=vb(ic+="",!1);Gb.toString=function(){return ic};return Gb},utcFormat:function(ic){var Gb=pb(ic+="",Ic);Gb.toString=function(){return ic};return Gb},utcParse:function(ic){var Gb=vb(ic+="",!0);Gb.toString=function(){return ic};return Gb}}}function e(Xa,pb,vb){var zb=0>Xa?"-":"";Xa=(zb?-Xa:Xa)+"";var Jb=Xa.length;return zb+(Jb<vb?Array(vb-Jb+1).join(pb)+Xa:Xa)}
function l(Xa){return Xa.replace($a,"\\$\x26")}function k(Xa){return new RegExp("^(?:"+Xa.map(l).join("|")+")","i")}function c(Xa){for(var pb={},vb=-1,zb=Xa.length;++vb<zb;)pb[Xa[vb].toLowerCase()]=vb;return pb}function f(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+1)))?(Xa.w=+pb[0],vb+pb[0].length):-1}function g(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+1)))?(Xa.u=+pb[0],vb+pb[0].length):-1}function q(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+2)))?(Xa.U=+pb[0],vb+pb[0].length):-1}function t(Xa,
pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+2)))?(Xa.V=+pb[0],vb+pb[0].length):-1}function u(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+2)))?(Xa.W=+pb[0],vb+pb[0].length):-1}function w(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+4)))?(Xa.y=+pb[0],vb+pb[0].length):-1}function x(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+2)))?(Xa.y=+pb[0]+(68<+pb[0]?1900:2E3),vb+pb[0].length):-1}function E(Xa,pb,vb){return(pb=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(pb.slice(vb,vb+6)))?(Xa.Z=pb[1]?0:-(pb[2]+(pb[3]||"00")),vb+
pb[0].length):-1}function F(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+1)))?(Xa.q=3*pb[0]-3,vb+pb[0].length):-1}function z(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+2)))?(Xa.m=pb[0]-1,vb+pb[0].length):-1}function B(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+2)))?(Xa.d=+pb[0],vb+pb[0].length):-1}function C(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+3)))?(Xa.m=0,Xa.d=+pb[0],vb+pb[0].length):-1}function v(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+2)))?(Xa.H=+pb[0],vb+pb[0].length):-1}function G(Xa,
pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+2)))?(Xa.M=+pb[0],vb+pb[0].length):-1}function I(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+2)))?(Xa.S=+pb[0],vb+pb[0].length):-1}function J(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+3)))?(Xa.L=+pb[0],vb+pb[0].length):-1}function K(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb,vb+6)))?(Xa.L=Math.floor(pb[0]/1E3),vb+pb[0].length):-1}function N(Xa,pb,vb){return(Xa=Ma.exec(pb.slice(vb,vb+1)))?vb+Xa[0].length:-1}function H(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb)))?
(Xa.Q=+pb[0],vb+pb[0].length):-1}function L(Xa,pb,vb){return(pb=Ba.exec(pb.slice(vb)))?(Xa.s=+pb[0],vb+pb[0].length):-1}function P(Xa,pb){return e(Xa.getDate(),pb,2)}function Q(Xa,pb){return e(Xa.getHours(),pb,2)}function S(Xa,pb){return e(Xa.getHours()%12||12,pb,2)}function O(Xa,pb){return e(1+m.timeDay.count(m.timeYear(Xa),Xa),pb,3)}function U(Xa,pb){return e(Xa.getMilliseconds(),pb,3)}function X(Xa,pb){return U(Xa,pb)+"000"}function da(Xa,pb){return e(Xa.getMonth()+1,pb,2)}function ea(Xa,pb){return e(Xa.getMinutes(),
pb,2)}function ca(Xa,pb){return e(Xa.getSeconds(),pb,2)}function ia(Xa){Xa=Xa.getDay();return 0===Xa?7:Xa}function ha(Xa,pb){return e(m.timeSunday.count(m.timeYear(Xa)-1,Xa),pb,2)}function fa(Xa,pb){var vb=Xa.getDay();Xa=4<=vb||0===vb?m.timeThursday(Xa):m.timeThursday.ceil(Xa);return e(m.timeThursday.count(m.timeYear(Xa),Xa)+(4===m.timeYear(Xa).getDay()),pb,2)}function na(Xa){return Xa.getDay()}function sa(Xa,pb){return e(m.timeMonday.count(m.timeYear(Xa)-1,Xa),pb,2)}function ua(Xa,pb){return e(Xa.getFullYear()%
100,pb,2)}function ta(Xa,pb){return e(Xa.getFullYear()%1E4,pb,4)}function oa(Xa){Xa=Xa.getTimezoneOffset();return(0<Xa?"-":(Xa*=-1,"+"))+e(Xa/60|0,"0",2)+e(Xa%60,"0",2)}function va(Xa,pb){return e(Xa.getUTCDate(),pb,2)}function ma(Xa,pb){return e(Xa.getUTCHours(),pb,2)}function pa(Xa,pb){return e(Xa.getUTCHours()%12||12,pb,2)}function za(Xa,pb){return e(1+m.utcDay.count(m.utcYear(Xa),Xa),pb,3)}function qa(Xa,pb){return e(Xa.getUTCMilliseconds(),pb,3)}function Ca(Xa,pb){return qa(Xa,pb)+"000"}function Ka(Xa,
pb){return e(Xa.getUTCMonth()+1,pb,2)}function Oa(Xa,pb){return e(Xa.getUTCMinutes(),pb,2)}function kb(Xa,pb){return e(Xa.getUTCSeconds(),pb,2)}function mb(Xa){Xa=Xa.getUTCDay();return 0===Xa?7:Xa}function tb(Xa,pb){return e(m.utcSunday.count(m.utcYear(Xa)-1,Xa),pb,2)}function nb(Xa,pb){var vb=Xa.getUTCDay();Xa=4<=vb||0===vb?m.utcThursday(Xa):m.utcThursday.ceil(Xa);return e(m.utcThursday.count(m.utcYear(Xa),Xa)+(4===m.utcYear(Xa).getUTCDay()),pb,2)}function Ta(Xa){return Xa.getUTCDay()}function fb(Xa,
pb){return e(m.utcMonday.count(m.utcYear(Xa)-1,Xa),pb,2)}function ab(Xa,pb){return e(Xa.getUTCFullYear()%100,pb,2)}function ra(Xa,pb){return e(Xa.getUTCFullYear()%1E4,pb,4)}function Ea(){return"+0000"}function Ia(){return"%"}function Va(Xa){return+Xa}function rb(Xa){return Math.floor(+Xa/1E3)}function ib(Xa){lb=d(Xa);n.timeFormat=lb.format;n.timeParse=lb.parse;n.utcFormat=lb.utcFormat;n.utcParse=lb.utcParse;return lb}function Na(Xa){return Xa.toISOString()}function Za(Xa){Xa=new Date(Xa);return isNaN(Xa)?
null:Xa}var eb={"-":"",_:" ",0:"0"},Ba=/^\s*\d+/,Ma=/^%/,$a=/[\\^$*+?|[\]().{}]/g,lb;ib({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});var Ra=Date.prototype.toISOString?
Na:n.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),jb=+new Date("2000-01-01T00:00:00.000Z")?Za:n.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");n.isoFormat=Ra;n.isoParse=jb;n.timeFormatDefaultLocale=ib;n.timeFormatLocale=d;Object.defineProperty(n,"__esModule",{value:!0})})},{"d3-time":167}],167:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?m(D):(n=n||self,m(n.d3=n.d3||{}))})(this,function(n){function m(nb,Ta,fb,ab){function ra(Ea){return nb(Ea=0===arguments.length?new Date:new Date(+Ea)),Ea}
ra.floor=function(Ea){return nb(Ea=new Date(+Ea)),Ea};ra.ceil=function(Ea){return nb(Ea=new Date(Ea-1)),Ta(Ea,1),nb(Ea),Ea};ra.round=function(Ea){var Ia=ra(Ea),Va=ra.ceil(Ea);return Ea-Ia<Va-Ea?Ia:Va};ra.offset=function(Ea,Ia){return Ta(Ea=new Date(+Ea),null==Ia?1:Math.floor(Ia)),Ea};ra.range=function(Ea,Ia,Va){var rb=[],ib;Ea=ra.ceil(Ea);Va=null==Va?1:Math.floor(Va);if(!(Ea<Ia&&0<Va))return rb;do rb.push(ib=new Date(+Ea)),Ta(Ea,Va),nb(Ea);while(ib<Ea&&Ea<Ia);return rb};ra.filter=function(Ea){return m(function(Ia){if(Ia>=
Ia)for(;nb(Ia),!Ea(Ia);)Ia.setTime(Ia-1)},function(Ia,Va){if(Ia>=Ia)if(0>Va)for(;0>=++Va;)for(;Ta(Ia,-1),!Ea(Ia););else for(;0<=--Va;)for(;Ta(Ia,1),!Ea(Ia););})};fb&&(ra.count=function(Ea,Ia){a.setTime(+Ea);d.setTime(+Ia);nb(a);nb(d);return Math.floor(fb(a,d))},ra.every=function(Ea){Ea=Math.floor(Ea);return isFinite(Ea)&&0<Ea?1<Ea?ra.filter(ab?function(Ia){return 0===ab(Ia)%Ea}:function(Ia){return 0===ra.count(0,Ia)%Ea}):ra:null});return ra}function p(nb){return m(function(Ta){Ta.setDate(Ta.getDate()-
(Ta.getDay()+7-nb)%7);Ta.setHours(0,0,0,0)},function(Ta,fb){Ta.setDate(Ta.getDate()+7*fb)},function(Ta,fb){return(fb-Ta-6E4*(fb.getTimezoneOffset()-Ta.getTimezoneOffset()))/6048E5})}function h(nb){return m(function(Ta){Ta.setUTCDate(Ta.getUTCDate()-(Ta.getUTCDay()+7-nb)%7);Ta.setUTCHours(0,0,0,0)},function(Ta,fb){Ta.setUTCDate(Ta.getUTCDate()+7*fb)},function(Ta,fb){return(fb-Ta)/6048E5})}var a=new Date,d=new Date,e=m(function(){},function(nb,Ta){nb.setTime(+nb+Ta)},function(nb,Ta){return Ta-nb});
e.every=function(nb){nb=Math.floor(nb);return isFinite(nb)&&0<nb?1<nb?m(function(Ta){Ta.setTime(Math.floor(Ta/nb)*nb)},function(Ta,fb){Ta.setTime(+Ta+fb*nb)},function(Ta,fb){return(fb-Ta)/nb}):e:null};var l=e.range,k=m(function(nb){nb.setTime(nb-nb.getMilliseconds())},function(nb,Ta){nb.setTime(+nb+1E3*Ta)},function(nb,Ta){return(Ta-nb)/1E3},function(nb){return nb.getUTCSeconds()}),c=k.range,f=m(function(nb){nb.setTime(nb-nb.getMilliseconds()-1E3*nb.getSeconds())},function(nb,Ta){nb.setTime(+nb+6E4*
Ta)},function(nb,Ta){return(Ta-nb)/6E4},function(nb){return nb.getMinutes()}),g=f.range,q=m(function(nb){nb.setTime(nb-nb.getMilliseconds()-1E3*nb.getSeconds()-6E4*nb.getMinutes())},function(nb,Ta){nb.setTime(+nb+36E5*Ta)},function(nb,Ta){return(Ta-nb)/36E5},function(nb){return nb.getHours()}),t=q.range,u=m(function(nb){nb.setHours(0,0,0,0)},function(nb,Ta){nb.setDate(nb.getDate()+Ta)},function(nb,Ta){return(Ta-nb-6E4*(Ta.getTimezoneOffset()-nb.getTimezoneOffset()))/864E5},function(nb){return nb.getDate()-
1}),w=u.range,x=p(0),E=p(1),F=p(2),z=p(3),B=p(4),C=p(5),v=p(6),G=x.range,I=E.range,J=F.range,K=z.range,N=B.range,H=C.range,L=v.range,P=m(function(nb){nb.setDate(1);nb.setHours(0,0,0,0)},function(nb,Ta){nb.setMonth(nb.getMonth()+Ta)},function(nb,Ta){return Ta.getMonth()-nb.getMonth()+12*(Ta.getFullYear()-nb.getFullYear())},function(nb){return nb.getMonth()}),Q=P.range,S=m(function(nb){nb.setMonth(0,1);nb.setHours(0,0,0,0)},function(nb,Ta){nb.setFullYear(nb.getFullYear()+Ta)},function(nb,Ta){return Ta.getFullYear()-
nb.getFullYear()},function(nb){return nb.getFullYear()});S.every=function(nb){return isFinite(nb=Math.floor(nb))&&0<nb?m(function(Ta){Ta.setFullYear(Math.floor(Ta.getFullYear()/nb)*nb);Ta.setMonth(0,1);Ta.setHours(0,0,0,0)},function(Ta,fb){Ta.setFullYear(Ta.getFullYear()+fb*nb)}):null};var O=S.range,U=m(function(nb){nb.setUTCSeconds(0,0)},function(nb,Ta){nb.setTime(+nb+6E4*Ta)},function(nb,Ta){return(Ta-nb)/6E4},function(nb){return nb.getUTCMinutes()}),X=U.range,da=m(function(nb){nb.setUTCMinutes(0,
0,0)},function(nb,Ta){nb.setTime(+nb+36E5*Ta)},function(nb,Ta){return(Ta-nb)/36E5},function(nb){return nb.getUTCHours()}),ea=da.range,ca=m(function(nb){nb.setUTCHours(0,0,0,0)},function(nb,Ta){nb.setUTCDate(nb.getUTCDate()+Ta)},function(nb,Ta){return(Ta-nb)/864E5},function(nb){return nb.getUTCDate()-1}),ia=ca.range,ha=h(0),fa=h(1),na=h(2),sa=h(3),ua=h(4),ta=h(5),oa=h(6),va=ha.range,ma=fa.range,pa=na.range,za=sa.range,qa=ua.range,Ca=ta.range,Ka=oa.range,Oa=m(function(nb){nb.setUTCDate(1);nb.setUTCHours(0,
0,0,0)},function(nb,Ta){nb.setUTCMonth(nb.getUTCMonth()+Ta)},function(nb,Ta){return Ta.getUTCMonth()-nb.getUTCMonth()+12*(Ta.getUTCFullYear()-nb.getUTCFullYear())},function(nb){return nb.getUTCMonth()}),kb=Oa.range,mb=m(function(nb){nb.setUTCMonth(0,1);nb.setUTCHours(0,0,0,0)},function(nb,Ta){nb.setUTCFullYear(nb.getUTCFullYear()+Ta)},function(nb,Ta){return Ta.getUTCFullYear()-nb.getUTCFullYear()},function(nb){return nb.getUTCFullYear()});mb.every=function(nb){return isFinite(nb=Math.floor(nb))&&
0<nb?m(function(Ta){Ta.setUTCFullYear(Math.floor(Ta.getUTCFullYear()/nb)*nb);Ta.setUTCMonth(0,1);Ta.setUTCHours(0,0,0,0)},function(Ta,fb){Ta.setUTCFullYear(Ta.getUTCFullYear()+fb*nb)}):null};var tb=mb.range;n.timeDay=u;n.timeDays=w;n.timeFriday=C;n.timeFridays=H;n.timeHour=q;n.timeHours=t;n.timeInterval=m;n.timeMillisecond=e;n.timeMilliseconds=l;n.timeMinute=f;n.timeMinutes=g;n.timeMonday=E;n.timeMondays=I;n.timeMonth=P;n.timeMonths=Q;n.timeSaturday=v;n.timeSaturdays=L;n.timeSecond=k;n.timeSeconds=
c;n.timeSunday=x;n.timeSundays=G;n.timeThursday=B;n.timeThursdays=N;n.timeTuesday=F;n.timeTuesdays=J;n.timeWednesday=z;n.timeWednesdays=K;n.timeWeek=x;n.timeWeeks=G;n.timeYear=S;n.timeYears=O;n.utcDay=ca;n.utcDays=ia;n.utcFriday=ta;n.utcFridays=Ca;n.utcHour=da;n.utcHours=ea;n.utcMillisecond=e;n.utcMilliseconds=l;n.utcMinute=U;n.utcMinutes=X;n.utcMonday=fa;n.utcMondays=ma;n.utcMonth=Oa;n.utcMonths=kb;n.utcSaturday=oa;n.utcSaturdays=Ka;n.utcSecond=k;n.utcSeconds=c;n.utcSunday=ha;n.utcSundays=va;n.utcThursday=
ua;n.utcThursdays=qa;n.utcTuesday=na;n.utcTuesdays=pa;n.utcWednesday=sa;n.utcWednesdays=za;n.utcWeek=ha;n.utcWeeks=va;n.utcYear=mb;n.utcYears=tb;Object.defineProperty(n,"__esModule",{value:!0})})},{}],168:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?m(D):(n=n||self,m(n.d3=n.d3||{}))})(this,function(n){function m(){return w||(F(p),w=E.now()+x)}function p(){w=0}function h(){this._call=this._time=this._next=null}function a(z,B,C){var v=new h;v.restart(z,B,C);return v}function d(){m();
++c;for(var z=q,B;z;)0<=(B=w-z._time)&&z._call.call(null,B),z=z._next;--c}function e(){w=(u=E.now())+x;c=f=0;try{d()}finally{c=0;for(var z,B=q,C,v=Infinity;B;)B._call?(v>B._time&&(v=B._time),z=B,B=B._next):(C=B._next,B._next=null,B=z?z._next=C:q=C);t=z;k(v);w=0}}function l(){var z=E.now(),B=z-u;1E3<B&&(x-=B,u=z)}function k(z){c||(f&&(f=clearTimeout(f)),24<z-w?(Infinity>z&&(f=setTimeout(e,z-E.now()-x)),g&&(g=clearInterval(g))):(g||(u=E.now(),g=setInterval(l,1E3)),c=1,F(e)))}var c=0,f=0,g=0,q,t,u=0,
w=0,x=0,E="object"===typeof performance&&performance.now?performance:Date,F="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(z){setTimeout(z,17)};h.prototype=a.prototype={constructor:h,restart:function(z,B,C){if("function"!==typeof z)throw new TypeError("callback is not a function");C=(null==C?m():+C)+(null==B?0:+B);this._next||t===this||(t?t._next=this:q=this,t=this);this._call=z;this._time=C;k()},stop:function(){this._call&&(this._call=null,
this._time=Infinity,k())}};n.interval=function(z,B,C){var v=new h,G=B;if(null==B)return v.restart(z,B,C),v;B=+B;C=null==C?m():+C;v.restart(function K(J){J+=G;v.restart(K,G+=B,C);z(J)},B,C);return v};n.now=m;n.timeout=function(z,B,C){var v=new h;B=null==B?0:+B;v.restart(function(G){v.stop();z(G+B)},B,C);return v};n.timer=a;n.timerFlush=d;Object.defineProperty(n,"__esModule",{value:!0})})},{}],169:[function(b,y,D){!function(){function n(T){return T&&(T.ownerDocument&&T.ownerDocument.defaultView||T.document&&
T||T.defaultView)}function m(T,la){return T<la?-1:T>la?1:T>=la?0:NaN}function p(T){return null===T?NaN:+T}function h(T){return!isNaN(T)}function a(T){return{left:function(la,ya,Ga,La){3>arguments.length&&(Ga=0);4>arguments.length&&(La=la.length);for(;Ga<La;){var Pa=Ga+La>>>1;0>T(la[Pa],ya)?Ga=Pa+1:La=Pa}return Ga},right:function(la,ya,Ga,La){3>arguments.length&&(Ga=0);4>arguments.length&&(La=la.length);for(;Ga<La;){var Pa=Ga+La>>>1;0<T(la[Pa],ya)?La=Pa:Ga=Pa+1}return Ga}}}function d(T){return T.length}
function e(T,la){for(var ya in la)Object.defineProperty(T.prototype,ya,{value:la[ya],enumerable:!1})}function l(){this._=Object.create(null)}function k(T){return"__proto__"===(T+="")||"\x00"===T[0]?"\x00"+T:T}function c(T){return"\x00"===(T+="")[0]?T.slice(1):T}function f(T){return k(T)in this._}function g(T){return(T=k(T))in this._&&delete this._[T]}function q(){var T=[],la;for(la in this._)T.push(c(la));return T}function t(){var T=0,la;for(la in this._)++T;return T}function u(){for(var T in this._)return!1;
return!0}function w(){this._=Object.create(null)}function x(T){return T}function E(T,la,ya){return function(){var Ga=ya.apply(la,arguments);return Ga===la?T:Ga}}function F(T,la){if(la in T)return la;la=la.charAt(0).toUpperCase()+la.slice(1);for(var ya=0,Ga=Xd.length;ya<Ga;++ya){var La=Xd[ya]+la;if(La in T)return La}}function z(){}function B(){}function C(T){function la(){for(var La=ya,Pa=-1,cb=La.length,Ya;++Pa<cb;)(Ya=La[Pa].on)&&Ya.apply(this,arguments);return T}var ya=[],Ga=new l;la.on=function(La,
Pa){var cb=Ga.get(La),Ya;if(2>arguments.length)return cb&&cb.on;cb&&(cb.on=null,ya=ya.slice(0,Ya=ya.indexOf(cb)).concat(ya.slice(Ya+1)),Ga.remove(La));Pa&&ya.push(Ga.set(La,{on:Pa}));return T};return la}function v(){Wb.event.preventDefault()}function G(){for(var T=Wb.event,la;la=T.sourceEvent;)T=la;return T}function I(T){for(var la=new B,ya=0,Ga=arguments.length;++ya<Ga;)la[arguments[ya]]=C(la);la.of=function(La,Pa){return function(cb){try{var Ya=cb.sourceEvent=Wb.event;cb.target=T;Wb.event=cb;la[cb.type].apply(La,
Pa)}finally{Wb.event=Ya}}};return la}function J(T){Pe(T,We);return T}function K(T){return"function"===typeof T?T:function(){return Cf(T,this)}}function N(T){return"function"===typeof T?T:function(){return eg(T,this)}}function H(T,la){function ya(){this.removeAttribute(T)}function Ga(){this.removeAttributeNS(T.space,T.local)}function La(){this.setAttribute(T,la)}function Pa(){this.setAttributeNS(T.space,T.local,la)}function cb(){var db=la.apply(this,arguments);null==db?this.removeAttribute(T):this.setAttribute(T,
db)}function Ya(){var db=la.apply(this,arguments);null==db?this.removeAttributeNS(T.space,T.local):this.setAttributeNS(T.space,T.local,db)}T=Wb.ns.qualify(T);return null==la?T.local?Ga:ya:"function"===typeof la?T.local?Ya:cb:T.local?Pa:La}function L(T){return new RegExp("(?:^|\\s+)"+Wb.requote(T)+"(?:\\s+|$)","g")}function P(T,la){function ya(){for(var Pa=-1;++Pa<La;)T[Pa](this,la)}function Ga(){for(var Pa=-1,cb=la.apply(this,arguments);++Pa<La;)T[Pa](this,cb)}T=(T+"").trim().split(/^|\s+/).map(Q);
var La=T.length;return"function"===typeof la?Ga:ya}function Q(T){var la=L(T);return function(ya,Ga){if(La=ya.classList)return Ga?La.add(T):La.remove(T);var La=ya.getAttribute("class")||"";Ga?(la.lastIndex=0,la.test(La)||ya.setAttribute("class",(La+" "+T).trim().replace(/\s+/g," "))):ya.setAttribute("class",La.replace(la," ").trim().replace(/\s+/g," "))}}function S(T,la,ya){function Ga(){this.style.removeProperty(T)}function La(){this.style.setProperty(T,la,ya)}function Pa(){var cb=la.apply(this,arguments);
null==cb?this.style.removeProperty(T):this.style.setProperty(T,cb,ya)}return null==la?Ga:"function"===typeof la?Pa:La}function O(T,la){function ya(){delete this[T]}function Ga(){this[T]=la}function La(){var Pa=la.apply(this,arguments);null==Pa?delete this[T]:this[T]=Pa}return null==la?ya:"function"===typeof la?La:Ga}function U(T){function la(){var Ga=this.ownerDocument,La=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===La&&"http://www.w3.org/1999/xhtml"===Ga.documentElement.namespaceURI?
Ga.createElement(T):Ga.createElementNS(La,T)}function ya(){return this.ownerDocument.createElementNS(T.space,T.local)}return"function"===typeof T?T:(T=Wb.ns.qualify(T)).local?ya:la}function X(){var T=this.parentNode;T&&T.removeChild(this)}function da(T){return function(){return oh(this,T)}}function ea(T){arguments.length||(T=m);return function(la,ya){return la&&ya?T(la.__data__,ya.__data__):!la-!ya}}function ca(T,la){for(var ya=0,Ga=T.length;ya<Ga;ya++)for(var La=T[ya],Pa=0,cb=La.length,Ya;Pa<cb;Pa++)(Ya=
La[Pa])&&la(Ya,Pa,ya);return T}function ia(T){Pe(T,hg);return T}function ha(T){var la,ya;return function(Ga,La,Pa){Ga=T[Pa].update;var cb=Ga.length;Pa!=ya&&(ya=Pa,la=0);for(La>=la&&(la=La+1);!(La=Ga[la])&&++la<cb;);return La}}function fa(T,la,ya){function Ga(){var wb=this[cb];wb&&(this.removeEventListener(T,wb,wb.$),delete this[cb])}function La(){var wb=db(la,Jg(arguments));Ga.call(this);this.addEventListener(T,this[cb]=wb,wb.$=ya);wb._=la}function Pa(){var wb=new RegExp("^__on([^.]+)"+Wb.requote(T)+
"$"),Ib,Nb;for(Nb in this)if(Ib=Nb.match(wb)){var Vb=this[Nb];this.removeEventListener(Ib[1],Vb,Vb.$);delete this[Nb]}}var cb="__on"+T,Ya=T.indexOf("."),db=na;0<Ya&&(T=T.slice(0,Ya));var ob=Yh.get(T);ob&&(T=ob,db=sa);return Ya?la?La:Ga:la?z:Pa}function na(T,la){return function(ya){var Ga=Wb.event;Wb.event=ya;la[0]=this.__data__;try{T.apply(this,la)}finally{Wb.event=Ga}}}function sa(T,la){var ya=na(T,la);return function(Ga){var La=Ga.relatedTarget;La&&(La===this||La.compareDocumentPosition(this)&8)||
ya.call(this,Ga)}}function ua(T){var la=".dragsuppress-"+ ++ng,ya="click"+la,Ga=Wb.select(n(T)).on("touchmove"+la,v).on("dragstart"+la,v).on("selectstart"+la,v);null==Jf&&(Jf="onselectstart"in T?!1:F(T.style,"userSelect"));if(Jf){var La=(T&&(T.ownerDocument||T.document||T).documentElement).style,Pa=La[Jf];La[Jf]="none"}return function(cb){Ga.on(la,null);Jf&&(La[Jf]=Pa);if(cb){var Ya=function(){Ga.on(ya,null)};Ga.on(ya,function(){v();Ya()},!0);setTimeout(Ya,0)}}}function ta(T,la){la.changedTouches&&
(la=la.changedTouches[0]);var ya=T.ownerSVGElement||T;if(ya.createSVGPoint){var Ga=ya.createSVGPoint();if(0>Ug&&(ya=n(T),ya.scrollX||ya.scrollY)){ya=Wb.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var La=ya[0][0].getScreenCTM();Ug=!(La.f||La.e);ya.remove()}Ug?(Ga.x=la.pageX,Ga.y=la.pageY):(Ga.x=la.clientX,Ga.y=la.clientY);Ga=Ga.matrixTransform(T.getScreenCTM().inverse());return[Ga.x,Ga.y]}Ga=T.getBoundingClientRect();return[la.clientX-
Ga.left-T.clientLeft,la.clientY-Ga.top-T.clientTop]}function oa(){return Wb.event.changedTouches[0].identifier}function va(T,la,ya){return(la[0]-T[0])*(ya[1]-T[1])-(la[1]-T[1])*(ya[0]-T[0])}function ma(T){return 1<T?0:-1>T?fe:Math.acos(T)}function pa(T){return 1<T?qf:-1>T?-qf:Math.asin(T)}function za(T){return((T=Math.exp(T))+1/T)/2}function qa(T){return(T=Math.sin(T/2))*T}function Ca(){}function Ka(T,la,ya){return this instanceof Ka?void(this.h=+T,this.s=+la,this.l=+ya):2>arguments.length?T instanceof
Ka?new Ka(T.h,T.s,T.l):rb(""+T,ib,Ka):new Ka(T,la,ya)}function Oa(T,la,ya){function Ga(cb){360<cb?cb-=360:0>cb&&(cb+=360);return 60>cb?Pa+(La-Pa)*cb/60:180>cb?La:240>cb?Pa+(La-Pa)*(240-cb)/60:Pa}T=isNaN(T)?0:0>(T%=360)?T+360:T;la=isNaN(la)?0:0>la?0:1<la?1:la;ya=0>ya?0:1<ya?1:ya;var La=.5>=ya?ya*(1+la):ya+la-ya*la;var Pa=2*ya-La;return new Ea(Math.round(255*Ga(T+120)),Math.round(255*Ga(T)),Math.round(255*Ga(T-120)))}function kb(T,la,ya){return this instanceof kb?void(this.h=+T,this.c=+la,this.l=+ya):
2>arguments.length?T instanceof kb?new kb(T.h,T.c,T.l):T instanceof tb?Ta(T.l,T.a,T.b):Ta((T=Na((T=Wb.rgb(T)).r,T.g,T.b)).l,T.a,T.b):new kb(T,la,ya)}function mb(T,la,ya){isNaN(T)&&(T=0);isNaN(la)&&(la=0);return new tb(ya,Math.cos(T*=ye)*la,Math.sin(T)*la)}function tb(T,la,ya){return this instanceof tb?void(this.l=+T,this.a=+la,this.b=+ya):2>arguments.length?T instanceof tb?new tb(T.l,T.a,T.b):T instanceof kb?mb(T.h,T.c,T.l):Na((T=Ea(T)).r,T.g,T.b):new tb(T,la,ya)}function nb(T,la,ya){T=(T+16)/116;
ya=T-ya/200;la=fb(T+la/500)*rk;T=fb(T)*ae;ya=fb(ya)*Ak;return new Ea(ra(3.2404542*la-1.5371385*T-.4985314*ya),ra(-.969266*la+1.8760108*T+.041556*ya),ra(.0556434*la-.2040259*T+1.0572252*ya))}function Ta(T,la,ya){return 0<T?new kb(Math.atan2(ya,la)*lf,Math.sqrt(la*la+ya*ya),T):new kb(NaN,NaN,T)}function fb(T){return.206893034<T?T*T*T:(T-4/29)/7.787037}function ab(T){return.008856<T?Math.pow(T,1/3):7.787037*T+4/29}function ra(T){return Math.round(255*(.00304>=T?12.92*T:1.055*Math.pow(T,1/2.4)-.055))}
function Ea(T,la,ya){return this instanceof Ea?void(this.r=~~T,this.g=~~la,this.b=~~ya):2>arguments.length?T instanceof Ea?new Ea(T.r,T.g,T.b):rb(""+T,Ea,Oa):new Ea(T,la,ya)}function Ia(T){return new Ea(T>>16,T>>8&255,T&255)+""}function Va(T){return 16>T?"0"+Math.max(0,T).toString(16):Math.min(255,T).toString(16)}function rb(T,la,ya){var Ga=0,La=0,Pa=0,cb;if(cb=/([a-z]+)\((.*)\)/.exec(T=T.toLowerCase())){var Ya=cb[2].split(",");switch(cb[1]){case "hsl":return ya(parseFloat(Ya[0]),parseFloat(Ya[1])/
100,parseFloat(Ya[2])/100);case "rgb":return la(eb(Ya[0]),eb(Ya[1]),eb(Ya[2]))}}if(ya=cj.get(T))return la(ya.r,ya.g,ya.b);null==T||"#"!==T.charAt(0)||isNaN(ya=parseInt(T.slice(1),16))||(4===T.length?(Ga=(ya&3840)>>4,Ga|=Ga>>4,La=ya&240,La|=La>>4,Pa=ya&15,Pa|=Pa<<4):7===T.length&&(Ga=(ya&16711680)>>16,La=(ya&65280)>>8,Pa=ya&255));return la(Ga,La,Pa)}function ib(T,la,ya){var Ga=Math.min(T/=255,la/=255,ya/=255),La=Math.max(T,la,ya),Pa=La-Ga,cb=(La+Ga)/2;Pa?(Ga=.5>cb?Pa/(La+Ga):Pa/(2-La-Ga),T=60*(T==
La?(la-ya)/Pa+(la<ya?6:0):la==La?(ya-T)/Pa+2:(T-la)/Pa+4)):(T=NaN,Ga=0<cb&&1>cb?0:T);return new Ka(T,Ga,cb)}function Na(T,la,ya){T=Za(T);la=Za(la);ya=Za(ya);var Ga=ab((.4124564*T+.3575761*la+.1804375*ya)/rk),La=ab((.2126729*T+.7151522*la+.072175*ya)/ae);T=ab((.0193339*T+.119192*la+.9503041*ya)/Ak);return tb(116*La-16,500*(Ga-La),200*(La-T))}function Za(T){return.04045>=(T/=255)?T/12.92:Math.pow((T+.055)/1.055,2.4)}function eb(T){var la=parseFloat(T);return"%"===T.charAt(T.length-1)?Math.round(2.55*
la):la}function Ba(T){return"function"===typeof T?T:function(){return T}}function Ma(T){return function(la,ya,Ga){2===arguments.length&&"function"===typeof ya&&(Ga=ya,ya=null);return $a(la,ya,T,Ga)}}function $a(T,la,ya,Ga){function La(){var wb=db.status,Ib;if(Ib=!wb)Ib=(Ib=db.responseType)&&"text"!==Ib?db.response:db.responseText;if(Ib||200<=wb&&300>wb||304===wb){try{var Nb=ya.call(Pa,db)}catch(Vb){cb.error.call(Pa,Vb);return}cb.load.call(Pa,Nb)}else cb.error.call(Pa,db)}var Pa={},cb=Wb.dispatch("beforesend",
"progress","load","error"),Ya={},db=new XMLHttpRequest,ob=null;!this.XDomainRequest||"withCredentials"in db||!/^(http(s)?:)?\/\//.test(T)||(db=new XDomainRequest);"onload"in db?db.onload=db.onerror=La:db.onreadystatechange=function(){3<db.readyState&&La()};db.onprogress=function(wb){var Ib=Wb.event;Wb.event=wb;try{cb.progress.call(Pa,db)}finally{Wb.event=Ib}};Pa.header=function(wb,Ib){wb=(wb+"").toLowerCase();if(2>arguments.length)return Ya[wb];null==Ib?delete Ya[wb]:Ya[wb]=Ib+"";return Pa};Pa.mimeType=
function(wb){if(!arguments.length)return la;la=null==wb?null:wb+"";return Pa};Pa.responseType=function(wb){if(!arguments.length)return ob;ob=wb;return Pa};Pa.response=function(wb){ya=wb;return Pa};["get","post"].forEach(function(wb){Pa[wb]=function(){return Pa.send.apply(Pa,[wb].concat(Jg(arguments)))}});Pa.send=function(wb,Ib,Nb){2===arguments.length&&"function"===typeof Ib&&(Nb=Ib,Ib=null);db.open(wb,T,!0);null==la||"accept"in Ya||(Ya.accept=la+",*/*");if(db.setRequestHeader)for(var Vb in Ya)db.setRequestHeader(Vb,
Ya[Vb]);null!=la&&db.overrideMimeType&&db.overrideMimeType(la);null!=ob&&(db.responseType=ob);if(null!=Nb)Pa.on("error",Nb).on("load",function(Xb){Nb(null,Xb)});cb.beforesend.call(Pa,db);db.send(null==Ib?null:Ib);return Pa};Pa.abort=function(){db.abort();return Pa};Wb.rebind(Pa,cb,"on");return null==Ga?Pa:Pa.get(lb(Ga))}function lb(T){return 1===T.length?function(la,ya){T(null==la?ya:null)}:T}function Ra(T,la,ya){var Ga=arguments.length;2>Ga&&(la=0);3>Ga&&(ya=Date.now());Ga={c:T,t:ya+la,n:null};mk?
mk.n=Ga:fk=Ga;mk=Ga;Lg||(mf=clearTimeout(mf),Lg=1,dj(jb));return Ga}function jb(){var T=Xa();T=pb()-T;24<T?(isFinite(T)&&(clearTimeout(mf),mf=setTimeout(jb,T)),Lg=0):(Lg=1,dj(jb))}function Xa(){for(var T=Date.now(),la=fk;la;)T>=la.t&&la.c(T-la.t)&&(la.c=null),la=la.n;return T}function pb(){for(var T,la=fk,ya=Infinity;la;)la.c?(la.t<ya&&(ya=la.t),la=(T=la).n):la=T?T.n=la.n:fk=la.n;mk=T;return ya}function vb(T,la){return la-(T?Math.ceil(Math.log(T)/Math.LN10):1)}function zb(T){var la=T.decimal,ya=T.thousands,
Ga=T.grouping,La=T.currency,Pa=Ga&&ya?function(cb,Ya){for(var db=cb.length,ob=[],wb=0,Ib=Ga[0],Nb=0;0<db&&0<Ib;){Nb+Ib+1>Ya&&(Ib=Math.max(1,Ya-Nb));ob.push(cb.substring(db-=Ib,db+Ib));if((Nb+=Ib+1)>Ya)break;Ib=Ga[wb=(wb+1)%Ga.length]}return ob.reverse().join(ya)}:x;return function(cb){cb=ri.exec(cb);var Ya=cb[1]||" ",db=cb[2]||"\x3e",ob=cb[3]||"-",wb=cb[4]||"",Ib=cb[5],Nb=+cb[6],Vb=cb[7],Xb=cb[8],oc=cb[9],yc=1,Fc="",Xc="",fd=!1,hd=!0;Xb&&(Xb=+Xb.substring(1));if(Ib||"0"===Ya&&"\x3d"===db)Ib=Ya="0",
db="\x3d";switch(oc){case "n":Vb=!0;oc="g";break;case "%":yc=100;Xc="%";oc="f";break;case "p":yc=100;Xc="%";oc="r";break;case "b":case "o":case "x":case "X":"#"===wb&&(Fc="0"+oc.toLowerCase());case "c":hd=!1;case "d":fd=!0;Xb=0;break;case "s":yc=-1,oc="r"}"$"===wb&&(Fc=La[0],Xc=La[1]);"r"!=oc||Xb||(oc="g");if(null!=Xb)if("g"==oc)Xb=Math.max(1,Math.min(21,Xb));else if("e"==oc||"f"==oc)Xb=Math.max(0,Math.min(20,Xb));oc=pk.get(oc)||Jb;var nd=Ib&&Vb;return function(lc){var zc=Xc;if(fd&&lc%1)return"";
var $c=0>lc||0===lc&&0>1/lc?(lc=-lc,"-"):"-"===ob?"":ob;0>yc?(zc=Wb.formatPrefix(lc,Xb),lc=zc.scale(lc),zc=zc.symbol+Xc):lc*=yc;lc=oc(lc,Xb);var ud=lc.lastIndexOf(".");if(0>ud)if(ud=hd?lc.lastIndexOf("e"):-1,0>ud){var vd=lc;lc=""}else vd=lc.substring(0,ud),lc=lc.substring(ud);else vd=lc.substring(0,ud),lc=la+lc.substring(ud+1);!Ib&&Vb&&(vd=Pa(vd,Infinity));ud=Fc.length+vd.length+lc.length+(nd?0:$c.length);var yd=ud<Nb?Array(ud=Nb-ud+1).join(Ya):"";nd&&(vd=Pa(yd+vd,yd.length?Nb-lc.length:Infinity));
$c+=Fc;lc=vd+lc;return("\x3c"===db?$c+lc+yd:"\x3e"===db?yd+$c+lc:"^"===db?yd.substring(0,ud>>=1)+$c+lc+yd.substring(ud):$c+(nd?lc:yd+lc))+zc}}}function Jb(T){return T+""}function Zb(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function pc(T,la,ya){function Ga(db){var ob=T(db),wb=Pa(ob,1);return db-ob<wb-db?ob:wb}function La(db){la(db=T(new dg(db-1)),1);return db}function Pa(db,ob){la(db=new dg(+db),ob);return db}function cb(db,ob,wb){db=La(db);var Ib=[];if(1<wb)for(;db<
ob;)ya(db)%wb||Ib.push(new Date(+db)),la(db,1);else for(;db<ob;)Ib.push(new Date(+db)),la(db,1);return Ib}T.floor=T;T.round=Ga;T.ceil=La;T.offset=Pa;T.range=cb;var Ya=T.utc=Ac(T);Ya.floor=Ya;Ya.round=Ac(Ga);Ya.ceil=Ac(La);Ya.offset=Ac(Pa);Ya.range=function(db,ob,wb){try{dg=Zb;var Ib=new Zb;Ib._=db;return cb(Ib,ob,wb)}finally{dg=Date}};return T}function Ac(T){return function(la,ya){try{dg=Zb;var Ga=new Zb;Ga._=la;return T(Ga,ya)._}finally{dg=Date}}}function ed(T){function la(lc){function zc(ud){for(var vd=
[],yd=-1,ld=0,Yd,ie;++yd<$c;)if(37===lc.charCodeAt(yd)){vd.push(lc.slice(ld,yd));null!=(Yd=Fh[ld=lc.charAt(++yd)])&&(ld=lc.charAt(++yd));if(ie=hd[ld])ld=ie(ud,null==Yd?"e"===ld?" ":"0":Yd);vd.push(ld);ld=yd+1}vd.push(lc.slice(ld,yd));return vd.join("")}var $c=lc.length;zc.parse=function(ud){var vd={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(ya(vd,lc,ud,0)!=ud.length)return null;"p"in vd&&(vd.H=vd.H%12+12*vd.p);ud=null!=vd.Z&&dg!==Zb;var yd=new (ud?Zb:dg);"j"in vd?yd.setFullYear(vd.y,0,vd.j):"W"in vd||
"U"in vd?("w"in vd||(vd.w="W"in vd?1:0),yd.setFullYear(vd.y,0,1),yd.setFullYear(vd.y,0,"W"in vd?(vd.w+6)%7+7*vd.W-(yd.getDay()+5)%7:vd.w+7*vd.U-(yd.getDay()+6)%7)):yd.setFullYear(vd.y,vd.m,vd.d);yd.setHours(vd.H+(vd.Z/100|0),vd.M+vd.Z%100,vd.S,vd.L);return ud?yd._:yd};zc.toString=function(){return lc};return zc}function ya(lc,zc,$c,ud){for(var vd,yd=0,ld=zc.length,Yd=$c.length;yd<ld;){if(ud>=Yd)return-1;vd=zc.charCodeAt(yd++);if(37===vd){if(vd=zc.charAt(yd++),vd=nd[vd in Fh?zc.charAt(yd++):vd],!vd||
0>(ud=vd(lc,$c,ud)))return-1}else if(vd!=$c.charCodeAt(ud++))return-1}return ud}var Ga=T.dateTime,La=T.date,Pa=T.time,cb=T.periods,Ya=T.days,db=T.shortDays,ob=T.months,wb=T.shortMonths;la.utc=function(lc){function zc(ud){try{dg=Zb;var vd=new dg;vd._=ud;return $c(vd)}finally{dg=Date}}var $c=la(lc);zc.parse=function(ud){try{dg=Zb;var vd=$c.parse(ud);return vd&&vd._}finally{dg=Date}};zc.toString=$c.toString;return zc};la.multi=la.utc.multi=yb;var Ib=Wb.map(),Nb=id(Ya),Vb=Tc(Ya),Xb=id(db),oc=Tc(db),yc=
id(ob),Fc=Tc(ob),Xc=id(wb),fd=Tc(wb);cb.forEach(function(lc,zc){Ib.set(lc.toLowerCase(),zc)});var hd={a:function(lc){return db[lc.getDay()]},A:function(lc){return Ya[lc.getDay()]},b:function(lc){return wb[lc.getMonth()]},B:function(lc){return ob[lc.getMonth()]},c:la(Ga),d:function(lc,zc){return Rc(lc.getDate(),zc,2)},e:function(lc,zc){return Rc(lc.getDate(),zc,2)},H:function(lc,zc){return Rc(lc.getHours(),zc,2)},I:function(lc,zc){return Rc(lc.getHours()%12||12,zc,2)},j:function(lc,zc){return Rc(1+
be.dayOfYear(lc),zc,3)},L:function(lc,zc){return Rc(lc.getMilliseconds(),zc,3)},m:function(lc,zc){return Rc(lc.getMonth()+1,zc,2)},M:function(lc,zc){return Rc(lc.getMinutes(),zc,2)},p:function(lc){return cb[+(12<=lc.getHours())]},S:function(lc,zc){return Rc(lc.getSeconds(),zc,2)},U:function(lc,zc){return Rc(be.sundayOfYear(lc),zc,2)},w:function(lc){return lc.getDay()},W:function(lc,zc){return Rc(be.mondayOfYear(lc),zc,2)},x:la(La),X:la(Pa),y:function(lc,zc){return Rc(lc.getFullYear()%100,zc,2)},Y:function(lc,
zc){return Rc(lc.getFullYear()%1E4,zc,4)},Z:ic,"%":function(){return"%"}},nd={a:function(lc,zc,$c){Xb.lastIndex=0;return(zc=Xb.exec(zc.slice($c)))?(lc.w=oc.get(zc[0].toLowerCase()),$c+zc[0].length):-1},A:function(lc,zc,$c){Nb.lastIndex=0;return(zc=Nb.exec(zc.slice($c)))?(lc.w=Vb.get(zc[0].toLowerCase()),$c+zc[0].length):-1},b:function(lc,zc,$c){Xc.lastIndex=0;return(zc=Xc.exec(zc.slice($c)))?(lc.m=fd.get(zc[0].toLowerCase()),$c+zc[0].length):-1},B:function(lc,zc,$c){yc.lastIndex=0;return(zc=yc.exec(zc.slice($c)))?
(lc.m=Fc.get(zc[0].toLowerCase()),$c+zc[0].length):-1},c:function(lc,zc,$c){return ya(lc,hd.c.toString(),zc,$c)},d:xb,e:xb,H:jc,I:jc,j:Ab,L:ec,m:vc,M:Bc,p:function(lc,zc,$c){zc=Ib.get(zc.slice($c,$c+=2).toLowerCase());return null==zc?-1:(lc.p=zc,$c)},S:Ic,U:Fb,w:wd,W:ac,x:function(lc,zc,$c){return ya(lc,hd.x.toString(),zc,$c)},X:function(lc,zc,$c){return ya(lc,hd.X.toString(),zc,$c)},y:qc,Y:Jc,Z:tc,"%":Gb};return la}function Rc(T,la,ya){var Ga=0>T?"-":"";T=(Ga?-T:T)+"";var La=T.length;return Ga+(La<
ya?Array(ya-La+1).join(la)+T:T)}function id(T){return new RegExp("^(?:"+T.map(Wb.requote).join("|")+")","i")}function Tc(T){for(var la=new l,ya=-1,Ga=T.length;++ya<Ga;)la.set(T[ya].toLowerCase(),ya);return la}function wd(T,la,ya){Vd.lastIndex=0;return(la=Vd.exec(la.slice(ya,ya+1)))?(T.w=+la[0],ya+la[0].length):-1}function Fb(T,la,ya){Vd.lastIndex=0;return(la=Vd.exec(la.slice(ya)))?(T.U=+la[0],ya+la[0].length):-1}function ac(T,la,ya){Vd.lastIndex=0;return(la=Vd.exec(la.slice(ya)))?(T.W=+la[0],ya+la[0].length):
-1}function Jc(T,la,ya){Vd.lastIndex=0;return(la=Vd.exec(la.slice(ya,ya+4)))?(T.y=+la[0],ya+la[0].length):-1}function qc(T,la,ya){Vd.lastIndex=0;if(la=Vd.exec(la.slice(ya,ya+2))){var Ga=+la[0];T=(T.y=Ga+(68<Ga?1900:2E3),ya+la[0].length)}else T=-1;return T}function tc(T,la,ya){return/^[+-]\d{4}$/.test(la=la.slice(ya,ya+5))?(T.Z=-la,ya+5):-1}function vc(T,la,ya){Vd.lastIndex=0;return(la=Vd.exec(la.slice(ya,ya+2)))?(T.m=la[0]-1,ya+la[0].length):-1}function xb(T,la,ya){Vd.lastIndex=0;return(la=Vd.exec(la.slice(ya,
ya+2)))?(T.d=+la[0],ya+la[0].length):-1}function Ab(T,la,ya){Vd.lastIndex=0;return(la=Vd.exec(la.slice(ya,ya+3)))?(T.j=+la[0],ya+la[0].length):-1}function jc(T,la,ya){Vd.lastIndex=0;return(la=Vd.exec(la.slice(ya,ya+2)))?(T.H=+la[0],ya+la[0].length):-1}function Bc(T,la,ya){Vd.lastIndex=0;return(la=Vd.exec(la.slice(ya,ya+2)))?(T.M=+la[0],ya+la[0].length):-1}function Ic(T,la,ya){Vd.lastIndex=0;return(la=Vd.exec(la.slice(ya,ya+2)))?(T.S=+la[0],ya+la[0].length):-1}function ec(T,la,ya){Vd.lastIndex=0;return(la=
Vd.exec(la.slice(ya,ya+3)))?(T.L=+la[0],ya+la[0].length):-1}function ic(T){var la=T.getTimezoneOffset();T=0<la?"-":"+";var ya=pd(la)/60|0;la=pd(la)%60;return T+Rc(ya,"0",2)+Rc(la,"0",2)}function Gb(T,la,ya){ve.lastIndex=0;return(T=ve.exec(la.slice(ya,ya+1)))?ya+T[0].length:-1}function yb(T){for(var la=T.length,ya=-1;++ya<la;)T[ya][0]=this(T[ya][0]);return function(Ga){for(var La=0,Pa=T[La];!Pa[1](Ga);)Pa=T[++La];return Pa[0](Ga)}}function Eb(){}function Lb(T,la,ya){var Ga=ya.s=T+la,La=Ga-T;ya.t=T-
(Ga-La)+(la-La)}function fc(T,la){if(T&&ph.hasOwnProperty(T.type))ph[T.type](T,la)}function Oc(T,la,ya){var Ga=-1;ya=T.length-ya;for(la.lineStart();++Ga<ya;){var La=T[Ga];la.point(La[0],La[1],La[2])}la.lineEnd()}function xc(T,la){var ya=-1,Ga=T.length;for(la.polygonStart();++ya<Ga;)Oc(T[ya],la,1);la.polygonEnd()}function Mc(){function T(cb,Ya){cb*=ye;Ya=Ya*ye/2+fe/4;var db=cb-Ga,ob=0<=db?1:-1;db*=ob;var wb=Math.cos(Ya);Ya=Math.sin(Ya);var Ib=Pa*Ya;Fj.add(Math.atan2(Ib*ob*Math.sin(db),La*wb+Ib*Math.cos(db)));
Ga=cb;La=wb;Pa=Ya}var la,ya,Ga,La,Pa;Bg.point=function(cb,Ya){Bg.point=T;Ga=(la=cb)*ye;La=Math.cos(Ya=(ya=Ya)*ye/2+fe/4);Pa=Math.sin(Ya)};Bg.lineEnd=function(){T(la,ya)}}function dd(T){var la=T[0];T=T[1];var ya=Math.cos(T);return[ya*Math.cos(la),ya*Math.sin(la),Math.sin(T)]}function bd(T,la){return T[0]*la[0]+T[1]*la[1]+T[2]*la[2]}function qd(T,la){return[T[1]*la[2]-T[2]*la[1],T[2]*la[0]-T[0]*la[2],T[0]*la[1]-T[1]*la[0]]}function Bd(T,la){T[0]+=la[0];T[1]+=la[1];T[2]+=la[2]}function md(T,la){return[T[0]*
la,T[1]*la,T[2]*la]}function Fd(T){var la=Math.sqrt(T[0]*T[0]+T[1]*T[1]+T[2]*T[2]);T[0]/=la;T[1]/=la;T[2]/=la}function Od(T){return[Math.atan2(T[1],T[0]),pa(T[2])]}function sd(T,la){return 1E-6>pd(T[0]-la[0])&&1E-6>pd(T[1]-la[1])}function cd(T,la){T*=ye;var ya=Math.cos(la*=ye);Gd(ya*Math.cos(T),ya*Math.sin(T),Math.sin(la))}function Gd(T,la,ya){++bf;Ji+=(T-Ji)/bf;Ii+=(la-Ii)/bf;yg+=(ya-yg)/bf}function Nd(){function T(La,Pa){La*=ye;var cb=Math.cos(Pa*=ye),Ya=cb*Math.cos(La);La=cb*Math.sin(La);Pa=Math.sin(Pa);
var db=Math.atan2(Math.sqrt((db=ya*Pa-Ga*La)*db+(db=Ga*Ya-la*Pa)*db+(db=la*La-ya*Ya)*db),la*Ya+ya*La+Ga*Pa);zj+=db;Vg+=db*(la+(la=Ya));fh+=db*(ya+(ya=La));si+=db*(Ga+(Ga=Pa));Gd(la,ya,Ga)}var la,ya,Ga;Mg.point=function(La,Pa){La*=ye;var cb=Math.cos(Pa*=ye);la=cb*Math.cos(La);ya=cb*Math.sin(La);Ga=Math.sin(Pa);Mg.point=T;Gd(la,ya,Ga)}}function Pd(){Mg.point=cd}function Ke(){function T(cb,Ya){cb*=ye;var db=Math.cos(Ya*=ye),ob=db*Math.cos(cb);cb=db*Math.sin(cb);Ya=Math.sin(Ya);db=La*Ya-Pa*cb;var wb=
Pa*ob-Ga*Ya,Ib=Ga*cb-La*ob,Nb=Math.sqrt(db*db+wb*wb+Ib*Ib),Vb=Ga*ob+La*cb+Pa*Ya,Xb=Nb&&-ma(Vb)/Nb;Nb=Math.atan2(Nb,Vb);sj+=Xb*db;fj+=Xb*wb;gh+=Xb*Ib;zj+=Nb;Vg+=Nb*(Ga+(Ga=ob));fh+=Nb*(La+(La=cb));si+=Nb*(Pa+(Pa=Ya));Gd(Ga,La,Pa)}var la,ya,Ga,La,Pa;Mg.point=function(cb,Ya){la=cb;ya=Ya;Mg.point=T;cb*=ye;var db=Math.cos(Ya*=ye);Ga=db*Math.cos(cb);La=db*Math.sin(cb);Pa=Math.sin(Ya);Gd(Ga,La,Pa)};Mg.lineEnd=function(){T(la,ya);Mg.lineEnd=Pd;Mg.point=cd}}function Wd(T,la){function ya(Ga,La){return Ga=T(Ga,
La),la(Ga[0],Ga[1])}T.invert&&la.invert&&(ya.invert=function(Ga,La){return Ga=la.invert(Ga,La),Ga&&T.invert(Ga[0],Ga[1])});return ya}function Wc(){return!0}function rd(T,la,ya,Ga,La){var Pa=[],cb=[];T.forEach(function(Ib){if(!(0>=(Nb=Ib.length-1))){var Nb,Vb=Ib[0],Xb=Ib[Nb];if(sd(Vb,Xb)){La.lineStart();for(Xb=0;Xb<Nb;++Xb)La.point((Vb=Ib[Xb])[0],Vb[1]);La.lineEnd()}else Nb=new Rd(Vb,Ib,null,!0),Vb=new Rd(Vb,null,Nb,!1),Nb.o=Vb,Pa.push(Nb),cb.push(Vb),Nb=new Rd(Xb,Ib,null,!1),Vb=new Rd(Xb,null,Nb,
!0),Nb.o=Vb,Pa.push(Nb),cb.push(Vb)}});cb.sort(la);Kd(Pa);Kd(cb);if(Pa.length){T=0;la=ya;for(ya=cb.length;T<ya;++T)cb[T].e=la=!la;la=Pa[0];for(var Ya,db;;){for(var ob=la,wb=!0;ob.v;)if((ob=ob.n)===la)return;Ya=ob.z;La.lineStart();do{ob.v=ob.o.v=!0;if(ob.e){if(wb)for(T=0,ya=Ya.length;T<ya;++T)La.point((db=Ya[T])[0],db[1]);else Ga(ob.x,ob.n.x,1,La);ob=ob.n}else{if(wb)for(Ya=ob.p.z,T=Ya.length-1;0<=T;--T)La.point((db=Ya[T])[0],db[1]);else Ga(ob.x,ob.p.x,-1,La);ob=ob.p}ob=ob.o;Ya=ob.z;wb=!wb}while(!ob.v);
La.lineEnd()}}}function Kd(T){if(la=T.length){for(var la,ya=0,Ga=T[0],La;++ya<la;)Ga.n=La=T[ya],La.p=Ga,Ga=La;Ga.n=La=T[0];La.p=Ga}}function Rd(T,la,ya,Ga){this.x=T;this.z=la;this.o=ya;this.e=Ga;this.v=!1;this.n=this.p=null}function se(T,la,ya,Ga){return function(La,Pa){function cb(lc,zc){var $c=La(lc,zc);T(lc=$c[0],zc=$c[1])&&Pa.point(lc,zc)}function Ya(lc,zc){lc=La(lc,zc);Vb.point(lc[0],lc[1])}function db(){oc.point=Ya;Vb.lineStart()}function ob(){oc.point=cb;Vb.lineEnd()}function wb(lc,zc){nd.push([lc,
zc]);lc=La(lc,zc);Xc.point(lc[0],lc[1])}function Ib(){Xc.lineStart();nd=[]}function Nb(){wb(nd[0][0],nd[0][1]);Xc.lineEnd();var lc=Xc.clean(),zc=Fc.buffer(),$c=zc.length;nd.pop();hd.push(nd);nd=null;if($c)if(lc&1){lc=zc[0];$c=lc.length-1;zc=-1;var ud;if(0<$c){fd||(Pa.polygonStart(),fd=!0);for(Pa.lineStart();++zc<$c;)Pa.point((ud=lc[zc])[0],ud[1]);Pa.lineEnd()}}else 1<$c&&lc&2&&zc.push(zc.pop().concat(zc.shift())),yc.push(zc.filter(Ee))}var Vb=la(Pa),Xb=La.invert(Ga[0],Ga[1]),oc={point:cb,lineStart:db,
lineEnd:ob,polygonStart:function(){oc.point=wb;oc.lineStart=Ib;oc.lineEnd=Nb;yc=[];hd=[]},polygonEnd:function(){oc.point=cb;oc.lineStart=db;oc.lineEnd=ob;yc=Wb.merge(yc);var lc=Xb;var zc=hd;var $c=lc[0],ud=lc[1],vd=[Math.sin($c),-Math.cos($c),0],yd=0,ld=0;Fj.reset();for(var Yd=0,ie=zc.length;Yd<ie;++Yd){var qe=zc[Yd],Ae=qe.length;if(Ae){var ze=qe[0],Me=ze[0];lc=ze[1]/2+fe/4;for(var oe=Math.sin(lc),bg=Math.cos(lc),Ff=1;;){Ff===Ae&&(Ff=0);lc=qe[Ff];var Be=lc[0],wg=lc[1]/2+fe/4,Te=Math.sin(wg);wg=Math.cos(wg);
var Yf=Be-Me,Xf=0<=Yf?1:-1,nf=Xf*Yf,Ze=nf>fe;oe*=Te;Fj.add(Math.atan2(oe*Xf*Math.sin(nf),bg*wg+oe*Math.cos(nf)));yd+=Ze?Yf+Xf*yf:Yf;Ze^Me>=$c^Be>=$c&&(ze=qd(dd(ze),dd(lc)),Fd(ze),Me=qd(vd,ze),Fd(Me),Me=(Ze^0<=Yf?-1:1)*pa(Me[2]),ud>Me||ud===Me&&(ze[0]||ze[1]))&&(ld+=Ze^0<=Yf?1:-1);if(!Ff++)break;Me=Be;oe=Te;bg=wg;ze=lc}}}zc=(-1E-6>yd||1E-6>yd&&-1E-6>Fj)^ld&1;yc.length?(fd||(Pa.polygonStart(),fd=!0),rd(yc,Ud,zc,ya,Pa)):zc&&(fd||(Pa.polygonStart(),fd=!0),Pa.lineStart(),ya(null,null,1,Pa),Pa.lineEnd());
fd&&(Pa.polygonEnd(),fd=!1);yc=hd=null},sphere:function(){Pa.polygonStart();Pa.lineStart();ya(null,null,1,Pa);Pa.lineEnd();Pa.polygonEnd()}},yc,Fc=$d(),Xc=la(Fc),fd=!1,hd,nd;return oc}}function Ee(T){return 1<T.length}function $d(){var T=[],la;return{lineStart:function(){T.push(la=[])},point:function(ya,Ga){la.push([ya,Ga])},lineEnd:z,buffer:function(){var ya=T;T=[];la=null;return ya},rejoin:function(){1<T.length&&T.push(T.pop().concat(T.shift()))}}}function Ud(T,la){return(0>(T=T.x)[0]?T[1]-qf-1E-6:
qf-T[1])-(0>(la=la.x)[0]?la[1]-qf-1E-6:qf-la[1])}function Je(T){function la(db,ob){return Math.cos(db)*Math.cos(ob)>La}function ya(db,ob,wb){var Ib=dd(db),Nb=dd(ob),Vb=[1,0,0];Nb=qd(Ib,Nb);var Xb=bd(Nb,Nb);Ib=Nb[0];var oc=Xb-Ib*Ib;if(!oc)return!wb&&db;Xb=La*Xb/oc;oc=-La*Ib/oc;Ib=qd(Vb,Nb);Vb=md(Vb,Xb);Nb=md(Nb,oc);Bd(Vb,Nb);Nb=bd(Vb,Ib);Xb=bd(Ib,Ib);oc=Nb*Nb-Xb*(bd(Vb,Vb)-1);if(!(0>oc)){var yc=Math.sqrt(oc);oc=md(Ib,(-Nb-yc)/Xb);Bd(oc,Vb);oc=Od(oc);if(!wb)return oc;wb=db[0];var Fc=ob[0];db=db[1];
ob=ob[1];if(Fc<wb){var Xc=wb;wb=Fc;Fc=Xc}var fd=Fc-wb,hd=1E-6>pd(fd-fe);!hd&&ob<db&&(Xc=db,db=ob,ob=Xc);if(hd||1E-6>fd?hd?0<db+ob^oc[1]<(1E-6>pd(oc[0]-wb)?db:ob):db<=oc[1]&&oc[1]<=ob:fd>fe^(wb<=oc[0]&&oc[0]<=Fc))return ob=md(Ib,(-Nb+yc)/Xb),Bd(ob,Vb),[oc,Od(ob)]}}function Ga(db,ob){var wb=Pa?T:fe-T,Ib=0;db<-wb?Ib|=1:db>wb&&(Ib|=2);ob<-wb?Ib|=4:ob>wb&&(Ib|=8);return Ib}var La=Math.cos(T),Pa=0<La,cb=1E-6<pd(La),Ya=Dc(T,6*ye);return se(la,function(db){var ob,wb,Ib,Nb,Vb;return{lineStart:function(){Nb=
Ib=!1;Vb=1},point:function(Xb,oc){var yc=[Xb,oc],Fc=la(Xb,oc);oc=Pa?Fc?0:Ga(Xb,oc):Fc?Ga(Xb+(0>Xb?fe:-fe),oc):0;!ob&&(Nb=Ib=Fc)&&db.lineStart();Fc!==Ib&&(Xb=ya(ob,yc),sd(ob,Xb)||sd(yc,Xb))&&(yc[0]+=1E-6,yc[1]+=1E-6,Fc=la(yc[0],yc[1]));if(Fc!==Ib)Vb=0,Fc?(db.lineStart(),Xb=ya(yc,ob),db.point(Xb[0],Xb[1])):(Xb=ya(ob,yc),db.point(Xb[0],Xb[1]),db.lineEnd()),ob=Xb;else if(cb&&ob&&Pa^Fc){var Xc;oc&wb||!(Xc=ya(yc,ob,!0))||(Vb=0,Pa?(db.lineStart(),db.point(Xc[0][0],Xc[0][1]),db.point(Xc[1][0],Xc[1][1]),db.lineEnd()):
(db.point(Xc[1][0],Xc[1][1]),db.lineEnd(),db.lineStart(),db.point(Xc[0][0],Xc[0][1])))}!Fc||ob&&sd(ob,yc)||db.point(yc[0],yc[1]);ob=yc;Ib=Fc;wb=oc},lineEnd:function(){Ib&&db.lineEnd();ob=null},clean:function(){return Vb|(Nb&&Ib)<<1}}},Ya,Pa?[0,-T]:[-fe,T-fe])}function Fe(T,la,ya,Ga){return function(La){var Pa=La.a,cb=La.b,Ya=Pa.x;Pa=Pa.y;var db=0,ob=1,wb=cb.x-Ya;cb=cb.y-Pa;var Ib=T-Ya;if(wb||!(0<Ib)){Ib/=wb;if(0>wb){if(Ib<db)return;Ib<ob&&(ob=Ib)}else if(0<wb){if(Ib>ob)return;Ib>db&&(db=Ib)}Ib=ya-
Ya;if(wb||!(0>Ib)){Ib/=wb;if(0>wb){if(Ib>ob)return;Ib>db&&(db=Ib)}else if(0<wb){if(Ib<db)return;Ib<ob&&(ob=Ib)}Ib=la-Pa;if(cb||!(0<Ib)){Ib/=cb;if(0>cb){if(Ib<db)return;Ib<ob&&(ob=Ib)}else if(0<cb){if(Ib>ob)return;Ib>db&&(db=Ib)}Ib=Ga-Pa;if(cb||!(0>Ib)){Ib/=cb;if(0>cb){if(Ib>ob)return;Ib>db&&(db=Ib)}else if(0<cb){if(Ib<db)return;Ib<ob&&(ob=Ib)}0<db&&(La.a={x:Ya+db*wb,y:Pa+db*cb});1>ob&&(La.b={x:Ya+ob*wb,y:Pa+ob*cb});return La}}}}}}function ke(T,la,ya,Ga){function La(Ya,db){return 1E-6>pd(Ya[0]-T)?
0<db?0:3:1E-6>pd(Ya[0]-ya)?0<db?2:1:1E-6>pd(Ya[1]-la)?0<db?1:0:0<db?3:2}function Pa(Ya,db){return cb(Ya.x,db.x)}function cb(Ya,db){var ob=La(Ya,1),wb=La(db,1);return ob!==wb?ob-wb:0===ob?db[1]-Ya[1]:1===ob?Ya[0]-db[0]:2===ob?Ya[1]-db[1]:db[0]-Ya[0]}return function(Ya){function db(vd,yd,ld,Yd){var ie=0,qe=0;if(null==vd||(ie=La(vd,ld))!==(qe=La(yd,ld))||0>cb(vd,yd)^0<ld){do Yd.point(0===ie||3===ie?T:ya,1<ie?Ga:la);while((ie=(ie+ld+4)%4)!==qe)}else Yd.point(yd[0],yd[1])}function ob(vd,yd){T<=vd&&vd<=
ya&&la<=yd&&yd<=Ga&&Ya.point(vd,yd)}function wb(vd,yd){vd=Math.max(-1E9,Math.min(1E9,vd));yd=Math.max(-1E9,Math.min(1E9,yd));var ld=T<=vd&&vd<=ya&&la<=yd&&yd<=Ga;oc&&yc.push([vd,yd]);if($c)Xc=vd,fd=yd,hd=ld,$c=!1,ld&&(Ya.lineStart(),Ya.point(vd,yd));else if(ld&&zc)Ya.point(vd,yd);else{var Yd={a:{x:nd,y:lc},b:{x:vd,y:yd}};Vb(Yd)?(zc||(Ya.lineStart(),Ya.point(Yd.a.x,Yd.a.y)),Ya.point(Yd.b.x,Yd.b.y),ld||Ya.lineEnd(),ud=!1):ld&&(Ya.lineStart(),Ya.point(vd,yd),ud=!1)}nd=vd;lc=yd;zc=ld}var Ib=Ya,Nb=$d(),
Vb=Fe(T,la,ya,Ga),Xb,oc,yc,Fc={point:ob,lineStart:function(){Fc.point=wb;oc&&oc.push(yc=[]);$c=!0;zc=!1;nd=lc=NaN},lineEnd:function(){Xb&&(wb(Xc,fd),hd&&zc&&Nb.rejoin(),Xb.push(Nb.buffer()));Fc.point=ob;zc&&Ya.lineEnd()},polygonStart:function(){Ya=Nb;Xb=[];oc=[];ud=!0},polygonEnd:function(){Ya=Ib;Xb=Wb.merge(Xb);var vd=[T,Ga];for(var yd=0,ld=oc.length,Yd=vd[1],ie=0;ie<ld;++ie)for(var qe=1,Ae=oc[ie],ze=Ae.length,Me=Ae[0],oe;qe<ze;++qe)oe=Ae[qe],Me[1]<=Yd?oe[1]>Yd&&0<va(Me,oe,vd)&&++yd:oe[1]<=Yd&&0>
va(Me,oe,vd)&&--yd,Me=oe;vd=0!==yd;yd=ud&&vd;ld=Xb.length;if(yd||ld)Ya.polygonStart(),yd&&(Ya.lineStart(),db(null,null,1,Ya),Ya.lineEnd()),ld&&rd(Xb,Pa,vd,db,Ya),Ya.polygonEnd();Xb=oc=yc=null}},Xc,fd,hd,nd,lc,zc,$c,ud;return Fc}}function Ce(T){var la=0,ya=fe/3,Ga=Qb(T);T=Ga(la,ya);T.parallels=function(La){return arguments.length?Ga(la=La[0]*fe/180,ya=La[1]*fe/180):[la/fe*180,ya/fe*180]};return T}function sf(T,la){function ya(cb,Ya){Ya=Math.sqrt(La-2*Ga*Math.sin(Ya))/Ga;return[Ya*Math.sin(cb*=Ga),
Pa-Ya*Math.cos(cb)]}T=Math.sin(T);var Ga=(T+Math.sin(la))/2,La=1+T*(2*Ga-T),Pa=Math.sqrt(La)/Ga;ya.invert=function(cb,Ya){Ya=Pa-Ya;return[Math.atan2(cb,Ya)/Ga,pa((La-(cb*cb+Ya*Ya)*Ga*Ga)/(2*Ga))]};return ya}function Ve(){function T(Pa,cb){mj+=La*Pa-Ga*cb;Ga=Pa;La=cb}var la,ya,Ga,La;Ki.point=function(Pa,cb){Ki.point=T;la=Ga=Pa;ya=La=cb};Ki.lineEnd=function(){T(la,ya)}}function tf(){function T(db,ob){cb.push("M",db,",",ob,Pa)}function la(db,ob){cb.push("M",db,",",ob);Ya.point=ya}function ya(db,ob){cb.push("L",
db,",",ob)}function Ga(){Ya.point=T}function La(){cb.push("Z")}var Pa=gf(4.5),cb=[],Ya={point:T,lineStart:function(){Ya.point=la},lineEnd:Ga,polygonStart:function(){Ya.lineEnd=La},polygonEnd:function(){Ya.lineEnd=Ga;Ya.point=T},pointRadius:function(db){Pa=gf(db);return Ya},result:function(){if(cb.length){var db=cb.join("");cb=[];return db}}};return Ya}function gf(T){return"m0,"+T+"a"+T+","+T+" 0 1,1 0,"+-2*T+"a"+T+","+T+" 0 1,1 0,"+2*T+"z"}function Wa(T,la){Ji+=T;Ii+=la;++yg}function Hb(){function T(Ga,
La){var Pa=Ga-la,cb=La-ya;Pa=Math.sqrt(Pa*Pa+cb*cb);Vg+=Pa*(la+Ga)/2;fh+=Pa*(ya+La)/2;si+=Pa;Wa(la=Ga,ya=La)}var la,ya;qh.point=function(Ga,La){qh.point=T;Wa(la=Ga,ya=La)}}function Cb(){qh.point=Wa}function Sb(){function T(Pa,cb){var Ya=Pa-Ga,db=cb-La;Ya=Math.sqrt(Ya*Ya+db*db);Vg+=Ya*(Ga+Pa)/2;fh+=Ya*(La+cb)/2;si+=Ya;Ya=La*Pa-Ga*cb;sj+=Ya*(Ga+Pa);fj+=Ya*(La+cb);gh+=3*Ya;Wa(Ga=Pa,La=cb)}var la,ya,Ga,La;qh.point=function(Pa,cb){qh.point=T;Wa(la=Ga=Pa,ya=La=cb)};qh.lineEnd=function(){T(la,ya)}}function Ec(T){function la(db,
ob){T.moveTo(db+cb,ob);T.arc(db,ob,cb,0,yf)}function ya(db,ob){T.moveTo(db,ob);Ya.point=Ga}function Ga(db,ob){T.lineTo(db,ob)}function La(){Ya.point=la}function Pa(){T.closePath()}var cb=4.5,Ya={point:la,lineStart:function(){Ya.point=ya},lineEnd:La,polygonStart:function(){Ya.lineEnd=Pa},polygonEnd:function(){Ya.lineEnd=La;Ya.point=la},pointRadius:function(db){cb=db;return Ya},result:z};return Ya}function Vc(T){function la(db){return(Ya?Ga:ya)(db)}function ya(db){return jd(db,function(ob,wb){ob=T(ob,
wb);db.point(ob[0],ob[1])})}function Ga(db){function ob(Yd,ie){Yd=T(Yd,ie);db.point(Yd[0],Yd[1])}function wb(){zc=NaN;ld.point=Ib;db.lineStart()}function Ib(Yd,ie){var qe=dd([Yd,ie]);ie=T(Yd,ie);La(zc,$c,lc,ud,vd,yd,zc=ie[0],$c=ie[1],lc=Yd,ud=qe[0],vd=qe[1],yd=qe[2],Ya,db);db.point(zc,$c)}function Nb(){ld.point=ob;db.lineEnd()}function Vb(){wb();ld.point=Xb;ld.lineEnd=oc}function Xb(Yd,ie){Ib(yc=Yd,ie);Fc=zc;Xc=$c;fd=ud;hd=vd;nd=yd;ld.point=Ib}function oc(){La(zc,$c,lc,ud,vd,yd,Fc,Xc,yc,fd,hd,nd,
Ya,db);ld.lineEnd=Nb;Nb()}var yc,Fc,Xc,fd,hd,nd,lc,zc,$c,ud,vd,yd,ld={point:ob,lineStart:wb,lineEnd:Nb,polygonStart:function(){db.polygonStart();ld.lineStart=Vb},polygonEnd:function(){db.polygonEnd();ld.lineStart=wb}};return ld}function La(db,ob,wb,Ib,Nb,Vb,Xb,oc,yc,Fc,Xc,fd,hd,nd){var lc=Xb-db,zc=oc-ob,$c=lc*lc+zc*zc;if($c>4*Pa&&hd--){var ud=Ib+Fc,vd=Nb+Xc,yd=Vb+fd,ld=Math.sqrt(ud*ud+vd*vd+yd*yd),Yd=Math.asin(yd/=ld),ie=1E-6>pd(pd(yd)-1)||1E-6>pd(wb-yc)?(wb+yc)/2:Math.atan2(vd,ud),qe=T(ie,Yd);Yd=
qe[0];qe=qe[1];var Ae=Yd-db,ze=qe-ob,Me=zc*Ae-lc*ze;if(Me*Me/$c>Pa||.3<pd((lc*Ae+zc*ze)/$c-.5)||Ib*Fc+Nb*Xc+Vb*fd<cb)La(db,ob,wb,Ib,Nb,Vb,Yd,qe,ie,ud/=ld,vd/=ld,yd,hd,nd),nd.point(Yd,qe),La(Yd,qe,ie,ud,vd,yd,Xb,oc,yc,Fc,Xc,fd,hd,nd)}}var Pa=.5,cb=Math.cos(30*ye),Ya=16;la.precision=function(db){if(!arguments.length)return Math.sqrt(Pa);Ya=0<(Pa=db*db)&&16;return la};return la}function mc(T){var la=Vc(function(ya,Ga){return T([ya*lf,Ga*lf])});return function(ya){return dc(la(ya))}}function Sc(T){this.stream=
T}function jd(T,la){return{point:la,sphere:function(){T.sphere()},lineStart:function(){T.lineStart()},lineEnd:function(){T.lineEnd()},polygonStart:function(){T.polygonStart()},polygonEnd:function(){T.polygonEnd()}}}function Ad(T){return Qb(function(){return T})()}function Qb(T){function la($c){$c=Ya($c[0]*ye,$c[1]*ye);return[$c[0]*ob+Fc,Xc-$c[1]*ob]}function ya($c){return($c=Ya.invert(($c[0]-Fc)/ob,(Xc-$c[1])/ob))&&[$c[0]*lf,$c[1]*lf]}function Ga(){Ya=Wd(cb=Uc(Xb,oc,yc),Pa);var $c=Pa(Nb,Vb);Fc=wb-
$c[0]*ob;Xc=Ib+$c[1]*ob;return La()}function La(){zc&&(zc.valid=!1,zc=null);return la}var Pa,cb,Ya,db=Vc(function($c,ud){$c=Pa($c,ud);return[$c[0]*ob+Fc,Xc-$c[1]*ob]}),ob=150,wb=480,Ib=250,Nb=0,Vb=0,Xb=0,oc=0,yc=0,Fc,Xc,fd=gk,hd=x,nd=null,lc=null,zc;la.stream=function($c){zc&&(zc.valid=!1);zc=dc(fd(cb,db(hd($c))));zc.valid=!0;return zc};la.clipAngle=function($c){if(!arguments.length)return nd;fd=null==$c?(nd=$c,gk):Je((nd=+$c)*ye);return La()};la.clipExtent=function($c){if(!arguments.length)return lc;
hd=(lc=$c)?ke($c[0][0],$c[0][1],$c[1][0],$c[1][1]):x;return La()};la.scale=function($c){if(!arguments.length)return ob;ob=+$c;return Ga()};la.translate=function($c){if(!arguments.length)return[wb,Ib];wb=+$c[0];Ib=+$c[1];return Ga()};la.center=function($c){if(!arguments.length)return[Nb*lf,Vb*lf];Nb=$c[0]%360*ye;Vb=$c[1]%360*ye;return Ga()};la.rotate=function($c){if(!arguments.length)return[Xb*lf,oc*lf,yc*lf];Xb=$c[0]%360*ye;oc=$c[1]%360*ye;yc=2<$c.length?$c[2]%360*ye:0;return Ga()};Wb.rebind(la,db,
"precision");return function(){Pa=T.apply(this,arguments);la.invert=Pa.invert&&ya;return Ga()}}function dc(T){return jd(T,function(la,ya){T.point(la*ye,ya*ye)})}function Qc(T,la){return[T,la]}function gd(T,la){return[T>fe?T-yf:T<-fe?T+yf:T,la]}function Uc(T,la,ya){return T?la||ya?Wd(Ub(T),sc(la,ya)):Ub(T):la||ya?sc(la,ya):gd}function Zc(T){return function(la,ya){return la+=T,[la>fe?la-yf:la<-fe?la+yf:la,ya]}}function Ub(T){var la=Zc(T);la.invert=Zc(-T);return la}function sc(T,la){function ya(Ya,db){var ob=
Math.cos(db),wb=Math.cos(Ya)*ob;Ya=Math.sin(Ya)*ob;db=Math.sin(db);ob=db*Ga+wb*La;return[Math.atan2(Ya*Pa-ob*cb,wb*Ga-db*La),pa(ob*Pa+Ya*cb)]}var Ga=Math.cos(T),La=Math.sin(T),Pa=Math.cos(la),cb=Math.sin(la);ya.invert=function(Ya,db){var ob=Math.cos(db),wb=Math.cos(Ya)*ob;Ya=Math.sin(Ya)*ob;db=Math.sin(db);ob=db*Pa-Ya*cb;return[Math.atan2(Ya*Pa+db*cb,wb*Ga+ob*La),pa(ob*Ga-wb*La)]};return ya}function Dc(T,la){var ya=Math.cos(T),Ga=Math.sin(T);return function(La,Pa,cb,Ya){var db=cb*la;if(null!=La){if(La=
gc(ya,La),Pa=gc(ya,Pa),0<cb?La<Pa:La>Pa)La+=cb*yf}else La=T+cb*yf,Pa=T-.5*db;for(var ob;0<cb?La>Pa:La<Pa;La-=db)Ya.point((ob=Od([ya,-Ga*Math.cos(La),-Ga*Math.sin(La)]))[0],ob[1])}}function gc(T,la){la=dd(la);la[0]-=T;Fd(la);T=ma(-la[1]);return((0>-la[2]?-T:T)+2*Math.PI-1E-6)%(2*Math.PI)}function wc(T,la,ya){var Ga=Wb.range(T,la-1E-6,ya).concat(la);return function(La){return Ga.map(function(Pa){return[La,Pa]})}}function od(T,la,ya){var Ga=Wb.range(T,la-1E-6,ya).concat(la);return function(La){return Ga.map(function(Pa){return[Pa,
La]})}}function Dd(T){return T.source}function Ld(T){return T.target}function Jd(T,la,ya,Ga){var La=Math.cos(la),Pa=Math.sin(la),cb=Math.cos(Ga),Ya=Math.sin(Ga),db=La*Math.cos(T),ob=La*Math.sin(T),wb=cb*Math.cos(ya),Ib=cb*Math.sin(ya),Nb=2*Math.asin(Math.sqrt(qa(Ga-la)+La*cb*qa(ya-T))),Vb=1/Math.sin(Nb);ya=Nb?function(Xb){var oc=Math.sin(Xb*=Nb)*Vb;Xb=Math.sin(Nb-Xb)*Vb;var yc=Xb*db+oc*wb,Fc=Xb*ob+oc*Ib;return[Math.atan2(Fc,yc)*lf,Math.atan2(Xb*Pa+oc*Ya,Math.sqrt(yc*yc+Fc*Fc))*lf]}:function(){return[T*
lf,la*lf]};ya.distance=Nb;return ya}function Hd(T,la){function ya(Ga,La){var Pa=Math.cos(La),cb=T(Math.cos(Ga)*Pa);return[cb*Pa*Math.sin(Ga),cb*Math.sin(La)]}ya.invert=function(Ga,La){var Pa=Math.sqrt(Ga*Ga+La*La),cb=la(Pa),Ya=Math.sin(cb);return[Math.atan2(Ga*Ya,Pa*Math.cos(cb)),Math.asin(Pa&&La*Ya/Pa)]};return ya}function Ie(T,la){function ya(cb,Ya){0<Pa?Ya<-qf+1E-6&&(Ya=-qf+1E-6):Ya>qf-1E-6&&(Ya=qf-1E-6);Ya=Pa/Math.pow(Math.tan(fe/4+Ya/2),La);return[Ya*Math.sin(La*cb),Pa-Ya*Math.cos(La*cb)]}var Ga=
Math.cos(T),La=T===la?Math.sin(T):Math.log(Ga/Math.cos(la))/Math.log(Math.tan(fe/4+la/2)/Math.tan(fe/4+T/2)),Pa=Ga*Math.pow(Math.tan(fe/4+T/2),La)/La;if(!La)return Se;ya.invert=function(cb,Ya){Ya=Pa-Ya;return[Math.atan2(cb,Ya)/La,2*Math.atan(Math.pow(Pa/((0<La?1:0>La?-1:0)*Math.sqrt(cb*cb+Ya*Ya)),1/La))-qf]};return ya}function Ge(T,la){function ya(cb,Ya){Ya=Pa-Ya;return[Ya*Math.sin(La*cb),Pa-Ya*Math.cos(La*cb)]}var Ga=Math.cos(T),La=T===la?Math.sin(T):(Ga-Math.cos(la))/(la-T),Pa=Ga/La+T;if(1E-6>pd(La))return Qc;
ya.invert=function(cb,Ya){Ya=Pa-Ya;return[Math.atan2(cb,Ya)/La,Pa-(0<La?1:0>La?-1:0)*Math.sqrt(cb*cb+Ya*Ya)]};return ya}function Se(T,la){return[T,Math.log(Math.tan(fe/4+la/2))]}function xe(T){var la=Ad(T),ya=la.scale,Ga=la.translate,La=la.clipExtent,Pa;la.scale=function(){var cb=ya.apply(la,arguments);return cb===la?Pa?la.clipExtent(null):la:cb};la.translate=function(){var cb=Ga.apply(la,arguments);return cb===la?Pa?la.clipExtent(null):la:cb};la.clipExtent=function(cb){var Ya=La.apply(la,arguments);
if(Ya===la){if(Pa=null==cb){var db=fe*ya(),ob=Ga();La([[ob[0]-db,ob[1]-db],[ob[0]+db,ob[1]+db]])}}else Pa&&(Ya=null);return Ya};return la.clipExtent(null)}function Oe(T,la){return[Math.log(Math.tan(fe/4+la/2)),-T]}function hf(T){return T[0]}function Qf(T){return T[1]}function jh(T){for(var la=T.length,ya=[0,1],Ga=2,La=2;La<la;La++){for(;1<Ga&&0>=va(T[ya[Ga-2]],T[ya[Ga-1]],T[La]);)--Ga;ya[Ga++]=La}return ya.slice(0,Ga)}function Pi(T,la){return T[0]-la[0]||T[1]-la[1]}function di(T,la,ya){return(ya[0]-
la[0])*(T[1]-la[1])<(ya[1]-la[1])*(T[0]-la[0])}function Wf(T,la,ya,Ga){var La=T[0],Pa=ya[0],cb=la[0]-La,Ya=Ga[0]-Pa;T=T[1];ya=ya[1];la=la[1]-T;Ga=Ga[1]-ya;Pa=(Ya*(T-ya)-Ga*(La-Pa))/(Ga*cb-Ya*la);return[La+Pa*cb,T+Pa*la]}function zi(T){var la=T[0];T=T[T.length-1];return!(la[0]-T[0]||la[1]-T[1])}function pg(){Dg(this);this.edge=this.site=this.circle=null}function ei(T){var la=Rk.pop()||new pg;la.site=T;return la}function Ih(T){Lh(T);Tj.remove(T);Rk.push(T);Dg(T)}function Og(T,la){var ya=T.site,Ga=ya.x,
La=ya.y,Pa=La-la;if(!Pa)return Ga;T=T.P;if(!T)return-Infinity;ya=T.site;T=ya.x;ya=ya.y;la=ya-la;if(!la)return T;var cb=T-Ga,Ya=1/Pa-1/la,db=cb/la;return Ya?(-db+Math.sqrt(db*db-2*Ya*(cb*cb/(-2*la)-ya+la/2+La-Pa/2)))/Ya+Ga:(Ga+T)/2}function ig(T){this.site=T;this.edges=[]}function Jh(T,la){return la.angle-T.angle}function qg(){Dg(this);this.x=this.y=this.arc=this.site=this.cy=null}function Kh(T){var la=T.P,ya=T.N;if(la&&ya){var Ga=la.site;la=T.site;var La=ya.site;if(Ga!==La){ya=la.x;var Pa=la.y,cb=
Ga.x-ya,Ya=Ga.y-Pa;Ga=La.x-ya;La=La.y-Pa;var db=2*(cb*La-Ya*Ga);if(!(-1E-12<=db)){var ob=cb*cb+Ya*Ya,wb=Ga*Ga+La*La;Ya=(La*ob-Ya*wb)/db;cb=(cb*wb-Ga*ob)/db;La=cb+Pa;Pa=Sk.pop()||new qg;Pa.arc=T;Pa.site=la;Pa.x=Ya+ya;Pa.y=La+Math.sqrt(Ya*Ya+cb*cb);Pa.cy=La;T.circle=Pa;T=null;for(la=hk._;la;)if(Pa.y<la.y||Pa.y===la.y&&Pa.x<=la.x)if(la.L)la=la.L;else{T=la.P;break}else if(la.R)la=la.R;else{T=la;break}hk.insert(T,Pa);T||($f=Pa)}}}}function Lh(T){var la=T.circle;la&&(la.P||($f=la.N),hk.remove(la),Sk.push(la),
Dg(la),T.circle=null)}function fi(T,la){var ya=T.b;if(ya)return!0;var Ga=T.a;ya=la[0][0];var La=la[1][0],Pa=la[0][1];la=la[1][1];var cb=T.l,Ya=T.r,db=cb.x;cb=cb.y;var ob=Ya.x;Ya=Ya.y;var wb=(db+ob)/2;if(Ya===cb){if(wb<ya||wb>=La)return;if(db>ob){if(!Ga)Ga={x:wb,y:Pa};else if(Ga.y>=la)return;ya={x:wb,y:la}}else{if(!Ga)Ga={x:wb,y:la};else if(Ga.y<Pa)return;ya={x:wb,y:Pa}}}else{var Ib=(db-ob)/(Ya-cb);wb=(cb+Ya)/2-Ib*wb;if(-1>Ib||1<Ib)if(db>ob){if(!Ga)Ga={x:(Pa-wb)/Ib,y:Pa};else if(Ga.y>=la)return;ya=
{x:(la-wb)/Ib,y:la}}else{if(!Ga)Ga={x:(la-wb)/Ib,y:la};else if(Ga.y<Pa)return;ya={x:(Pa-wb)/Ib,y:Pa}}else if(cb<Ya){if(!Ga)Ga={x:ya,y:Ib*ya+wb};else if(Ga.x>=La)return;ya={x:La,y:Ib*La+wb}}else{if(!Ga)Ga={x:La,y:Ib*La+wb};else if(Ga.x<ya)return;ya={x:ya,y:Ib*ya+wb}}}T.a=Ga;T.b=ya;return!0}function Mh(T,la){this.l=T;this.r=la;this.a=this.b=null}function gi(T,la,ya,Ga){var La=new Mh(T,la);vi.push(La);ya&&hi(La,T,la,ya);Ga&&hi(La,la,T,Ga);Mi[T.i].edges.push(new ii(La,T,la));Mi[la.i].edges.push(new ii(La,
la,T));return La}function hi(T,la,ya,Ga){T.a||T.b?T.l===ya?T.b=Ga:T.a=Ga:(T.a=Ga,T.l=la,T.r=ya)}function ii(T,la,ya){var Ga=T.a,La=T.b;this.edge=T;this.site=la;this.angle=ya?Math.atan2(ya.y-la.y,ya.x-la.x):T.l===la?Math.atan2(La.x-Ga.x,Ga.y-La.y):Math.atan2(Ga.x-La.x,La.y-Ga.y)}function Ue(){this._=null}function Dg(T){T.U=T.C=T.L=T.R=T.P=T.N=null}function ji(T,la){var ya=la.R,Ga=la.U;Ga?Ga.L===la?Ga.L=ya:Ga.R=ya:T._=ya;ya.U=Ga;la.U=ya;la.R=ya.L;la.R&&(la.R.U=la);ya.L=la}function ki(T,la){var ya=la.L,
Ga=la.U;Ga?Ga.L===la?Ga.L=ya:Ga.R=ya:T._=ya;ya.U=Ga;la.U=ya;la.L=ya.R;la.L&&(la.L.U=la);ya.R=la}function gj(T){for(;T.L;)T=T.L;return T}function li(T,la){var ya=T.sort(Ai).pop(),Ga;vi=[];Mi=Array(T.length);Tj=new Ue;for(hk=new Ue;;){var La=$f;if(ya&&(!La||ya.y<La.y||ya.y===La.y&&ya.x<La.x)){if(ya.x!==Ga||ya.y!==Pa){Mi[ya.i]=new ig(ya);var Pa=Ga=void 0;La=ya;for(var cb=La.x,Ya=La.y,db=Tj._;db;){var ob=Og(db,Ya)-cb;if(1E-6<ob)db=db.L;else{var wb=db;var Ib=Ya;var Nb=wb.N;Nb?Ib=Og(Nb,Ib):(wb=wb.site,
Ib=wb.y===Ib?wb.x:Infinity);Ib=cb-Ib;if(1E-6<Ib){if(!db.R){Pa=db;break}db=db.R}else{-1E-6<ob?(Pa=db.P,Ga=db):-1E-6<Ib?(Pa=db,Ga=db.N):Pa=Ga=db;break}}}ob=ei(La);Tj.insert(Pa,ob);if(Pa||Ga)if(Pa===Ga)Lh(Pa),Ga=ei(Pa.site),Tj.insert(ob,Ga),ob.edge=Ga.edge=gi(Pa.site,ob.site),Kh(Pa),Kh(Ga);else if(Ga){Lh(Pa);Lh(Ga);cb=Pa.site;db=cb.x;Ib=cb.y;wb=La.x-db;Nb=La.y-Ib;Ya=Ga.site;var Vb=Ya.x-db,Xb=Ya.y-Ib,oc=2*(wb*Xb-Nb*Vb),yc=wb*wb+Nb*Nb,Fc=Vb*Vb+Xb*Xb;db={x:(Xb*yc-Nb*Fc)/oc+db,y:(wb*Fc-Vb*yc)/oc+Ib};hi(Ga.edge,
cb,Ya,db);ob.edge=gi(cb,La,null,db);Ga.edge=gi(La,Ya,null,db);Kh(Pa);Kh(Ga)}else ob.edge=gi(Pa.site,ob.site);Ga=ya.x;Pa=ya.y}ya=T.pop()}else if(La){Ya=La.arc;La=Ya.circle;cb=La.x;db=La.cy;La={x:cb,y:db};wb=Ya.P;Ib=Ya.N;ob=[Ya];Ih(Ya);for(Ya=wb;Ya.circle&&1E-6>pd(cb-Ya.circle.x)&&1E-6>pd(db-Ya.circle.cy);)wb=Ya.P,ob.unshift(Ya),Ih(Ya),Ya=wb;ob.unshift(Ya);Lh(Ya);for(wb=Ib;wb.circle&&1E-6>pd(cb-wb.circle.x)&&1E-6>pd(db-wb.circle.cy);)Ib=wb.N,ob.push(wb),Ih(wb),wb=Ib;ob.push(wb);Lh(wb);db=ob.length;
for(cb=1;cb<db;++cb)wb=ob[cb],Ya=ob[cb-1],hi(wb.edge,Ya.site,wb.site,La);Ya=ob[0];wb=ob[db-1];wb.edge=gi(Ya.site,wb.site,null,La);Kh(Ya);Kh(wb)}else break}if(la){T=vi;ya=Fe(la[0][0],la[0][1],la[1][0],la[1][1]);for(Ga=T.length;Ga--;)if(Pa=T[Ga],!fi(Pa,la)||!ya(Pa)||1E-6>pd(Pa.a.x-Pa.b.x)&&1E-6>pd(Pa.a.y-Pa.b.y))Pa.a=Pa.b=null,T.splice(Ga,1);T=la[0][0];ya=la[1][0];Ga=la[0][1];la=la[1][1];Pa=Mi;for(La=Pa.length;La--;)if((ob=Pa[La])&&ob.prepare())for(Ya=ob.edges,db=Ya.length,cb=0;cb<db;)if(yc=Ya[cb].end(),
Xb=yc.x,oc=yc.y,Ib=Ya[++cb%db].start(),Vb=Ib.x,Fc=Ib.y,1E-6<pd(Xb-Vb)||1E-6<pd(oc-Fc))Ib=Ya,wb=Ib.splice,Nb=cb,Vb=1E-6>pd(Xb-T)&&1E-6<la-oc?{x:T,y:1E-6>pd(Vb-T)?Fc:la}:1E-6>pd(oc-la)&&1E-6<ya-Xb?{x:1E-6>pd(Fc-la)?Vb:ya,y:la}:1E-6>pd(Xb-ya)&&1E-6<oc-Ga?{x:ya,y:1E-6>pd(Vb-ya)?Fc:Ga}:1E-6>pd(oc-Ga)&&1E-6<Xb-T?{x:1E-6>pd(Fc-Ga)?Vb:T,y:Ga}:null,Xb=new Mh(ob.site,null),Xb.a=yc,Xb.b=Vb,vi.push(Xb),wb.call(Ib,Nb,0,new ii(Xb,ob.site,null)),++db}la={cells:Mi,edges:vi};Tj=hk=vi=Mi=null;return la}function Ai(T,
la){return la.y-T.y||la.x-T.x}function Kj(T){return T.x}function vf(T){return T.y}function Jj(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Bi(T,la,ya,Ga,La,Pa){if(!T(la,ya,Ga,La,Pa)){var cb=.5*(ya+La),Ya=.5*(Ga+Pa);la=la.nodes;la[0]&&Bi(T,la[0],ya,Ga,cb,Ya);la[1]&&Bi(T,la[1],cb,Ga,La,Ya);la[2]&&Bi(T,la[2],ya,Ya,cb,Pa);la[3]&&Bi(T,la[3],cb,Ya,La,Pa)}}function ak(T,la,ya,Ga,La,Pa,cb){var Ya=Infinity,db;(function oc(wb,Ib,Nb,Vb,Xb){if(!(Ib>Pa||Nb>cb||Vb<Ga||Xb<La)){if(yc=wb.point){var yc,
Fc=la-wb.x,Xc=ya-wb.y;Fc=Fc*Fc+Xc*Xc;Fc<Ya&&(Fc=Math.sqrt(Ya=Fc),Ga=la-Fc,La=ya-Fc,Pa=la+Fc,cb=ya+Fc,db=yc)}yc=wb.nodes;Fc=.5*(Ib+Vb);Xc=.5*(Nb+Xb);for(var fd=(ya>=Xc)<<1|la>=Fc,hd=fd+4;fd<hd;++fd)if(wb=yc[fd&3])switch(fd&3){case 0:oc(wb,Ib,Nb,Fc,Xc);break;case 1:oc(wb,Fc,Nb,Vb,Xc);break;case 2:oc(wb,Ib,Xc,Fc,Xb);break;case 3:oc(wb,Fc,Xc,Vb,Xb)}}})(T,Ga,La,Pa,cb);return db}function mi(T,la){T=Wb.rgb(T);la=Wb.rgb(la);var ya=T.r,Ga=T.g,La=T.b,Pa=la.r-ya,cb=la.g-Ga,Ya=la.b-La;return function(db){return"#"+
Va(Math.round(ya+Pa*db))+Va(Math.round(Ga+cb*db))+Va(Math.round(La+Ya*db))}}function Nh(T,la){var ya={},Ga={},La;for(La in T)La in la?ya[La]=tg(T[La],la[La]):Ga[La]=T[La];for(La in la)La in T||(Ga[La]=la[La]);return function(Pa){for(La in ya)Ga[La]=ya[La](Pa);return Ga}}function Fg(T,la){T=+T;la=+la;return function(ya){return T*(1-ya)+la*ya}}function sg(T,la){var ya=Uj.lastIndex=pj.lastIndex=0,Ga,La,Pa,cb=-1,Ya=[],db=[];T+="";for(la+="";(Ga=Uj.exec(T))&&(La=pj.exec(la));)(Pa=La.index)>ya&&(Pa=la.slice(ya,
Pa),Ya[cb]?Ya[cb]+=Pa:Ya[++cb]=Pa),(Ga=Ga[0])===(La=La[0])?Ya[cb]?Ya[cb]+=La:Ya[++cb]=La:(Ya[++cb]=null,db.push({i:cb,x:Fg(Ga,La)})),ya=pj.lastIndex;ya<la.length&&(Pa=la.slice(ya),Ya[cb]?Ya[cb]+=Pa:Ya[++cb]=Pa);return 2>Ya.length?db[0]?(la=db[0].x,function(ob){return la(ob)+""}):function(){return la}:(la=db.length,function(ob){for(var wb=0,Ib;wb<la;++wb)Ya[(Ib=db[wb]).i]=Ib.x(ob);return Ya.join("")})}function tg(T,la){for(var ya=Wb.interpolators.length,Ga;0<=--ya&&!(Ga=Wb.interpolators[ya](T,la)););
return Ga}function Ci(T,la){var ya=[],Ga=[],La=T.length,Pa=la.length,cb=Math.min(T.length,la.length),Ya;for(Ya=0;Ya<cb;++Ya)ya.push(tg(T[Ya],la[Ya]));for(;Ya<La;++Ya)Ga[Ya]=T[Ya];for(;Ya<Pa;++Ya)Ga[Ya]=la[Ya];return function(db){for(Ya=0;Ya<cb;++Ya)Ga[Ya]=ya[Ya](db);return Ga}}function jf(T){return function(la){return 0>=la?0:1<=la?1:T(la)}}function Oh(T){return function(la){return 1-T(1-la)}}function kh(T){return function(la){return.5*(.5>la?T(2*la):2-T(2-2*la))}}function vg(T){return T*T}function Ye(T){return T*
T*T}function af(T){if(0>=T)return 0;if(1<=T)return 1;var la=T*T,ya=la*T;return 4*(.5>T?ya:3*(T-la)+ya-.75)}function xh(T){return 1-Math.cos(T*qf)}function ni(T){return Math.pow(2,10*(T-1))}function Qi(T){return 1-Math.sqrt(1-T*T)}function hj(T){return T<1/2.75?7.5625*T*T:T<2/2.75?7.5625*(T-=1.5/2.75)*T+.75:T<2.5/2.75?7.5625*(T-=2.25/2.75)*T+.9375:7.5625*(T-=2.625/2.75)*T+.984375}function Gg(T,la){la-=T;return function(ya){return Math.round(T+la*ya)}}function Di(T){var la=[T.a,T.b],ya=[T.c,T.d],Ga=
lh(la),La=la[0]*ya[0]+la[1]*ya[1],Pa=-La;ya[0]+=Pa*la[0];ya[1]+=Pa*la[1];Pa=lh(ya)||0;la[0]*ya[1]<ya[0]*la[1]&&(la[0]*=-1,la[1]*=-1,Ga*=-1,La*=-1);this.rotate=(Ga?Math.atan2(la[1],la[0]):Math.atan2(-ya[0],ya[1]))*lf;this.translate=[T.e,T.f];this.scale=[Ga,Pa];this.skew=Pa?Math.atan2(La,Pa)*lf:0}function lh(T){var la=Math.sqrt(T[0]*T[0]+T[1]*T[1]);la&&(T[0]/=la,T[1]/=la);return la}function Df(T){return T.length?T.pop()+",":""}function Ri(T,la,ya,Ga){T[0]!==la[0]||T[1]!==la[1]?(ya=ya.push("translate(",
null,",",null,")"),Ga.push({i:ya-4,x:Fg(T[0],la[0])},{i:ya-2,x:Fg(T[1],la[1])})):(la[0]||la[1])&&ya.push("translate("+la+")")}function ij(T,la,ya,Ga){T!==la?(180<T-la?la+=360:180<la-T&&(T+=360),Ga.push({i:ya.push(Df(ya)+"rotate(",null,")")-2,x:Fg(T,la)})):la&&ya.push(Df(ya)+"rotate("+la+")")}function Rf(T,la,ya,Ga){T!==la?Ga.push({i:ya.push(Df(ya)+"skewX(",null,")")-2,x:Fg(T,la)}):la&&ya.push(Df(ya)+"skewX("+la+")")}function $g(T,la,ya,Ga){T[0]!==la[0]||T[1]!==la[1]?(ya=ya.push(Df(ya)+"scale(",null,
",",null,")"),Ga.push({i:ya-4,x:Fg(T[0],la[0])},{i:ya-2,x:Fg(T[1],la[1])})):1===la[0]&&1===la[1]||ya.push(Df(ya)+"scale("+la+")")}function jg(T,la){var ya=[],Ga=[];T=Wb.transform(T);la=Wb.transform(la);Ri(T.translate,la.translate,ya,Ga);ij(T.rotate,la.rotate,ya,Ga);Rf(T.skew,la.skew,ya,Ga);$g(T.scale,la.scale,ya,Ga);T=la=null;return function(La){for(var Pa=-1,cb=Ga.length,Ya;++Pa<cb;)ya[(Ya=Ga[Pa]).i]=Ya.x(La);return ya.join("")}}function oi(T,la){la=(la-=T=+T)||1/la;return function(ya){return(ya-
T)/la}}function mh(T,la){la=(la-=T=+T)||1/la;return function(ya){return Math.max(0,Math.min(1,(ya-T)/la))}}function Pg(T){for(var la=[],ya=T.parent;null!=ya;)la.push(T),T=ya,ya=ya.parent;la.push(T);return la}function xg(T){T.fixed|=2}function pi(T){T.fixed&=-7}function qi(T){T.fixed|=4;T.px=T.x;T.py=T.y}function Ti(T){T.fixed&=-5}function kg(T,la,ya){var Ga=0,La=0;T.charge=0;if(!T.leaf)for(var Pa=T.nodes,cb=Pa.length,Ya=-1,db;++Ya<cb;)db=Pa[Ya],null!=db&&(kg(db,la,ya),T.charge+=db.charge,Ga+=db.charge*
db.cx,La+=db.charge*db.cy);T.point&&(T.leaf||(T.point.x+=Math.random()-.5,T.point.y+=Math.random()-.5),la*=ya[T.point.index],T.charge+=T.pointCharge=la,Ga+=la*T.point.x,La+=la*T.point.y);T.cx=Ga/T.charge;T.cy=La/T.charge}function Ef(T,la){Wb.rebind(T,la,"sort","children","value");T.nodes=T;T.links=rg;return T}function Si(T,la){for(var ya=[T];null!=(T=ya.pop());)if(la(T),(La=T.children)&&(Ga=La.length))for(var Ga,La;0<=--Ga;)ya.push(La[Ga])}function lg(T,la){for(var ya=[T],Ga=[];null!=(T=ya.pop());)if(Ga.push(T),
(Pa=T.children)&&(La=Pa.length)){T=-1;for(var La,Pa;++T<La;)ya.push(Pa[T])}for(;null!=(T=Ga.pop());)la(T)}function Sf(T){return T.children}function Ph(T){return T.value}function Kf(T,la){return la.value-T.value}function rg(T){return Wb.merge(T.map(function(la){return(la.children||[]).map(function(ya){return{source:la,target:ya}})}))}function Eg(T){return T.x}function Mf(T){return T.y}function ah(T,la,ya){T.y0=la;T.y=ya}function nh(T){return Wb.range(T.length)}function wf(T){var la=-1;T=T[0].length;
for(var ya=[];++la<T;)ya[la]=0;return ya}function Wi(T){for(var la=1,ya=0,Ga=T[0][1],La,Pa=T.length;la<Pa;++la)(La=T[la][1])>Ga&&(ya=la,Ga=La);return ya}function yj(T){return T.reduce(le,0)}function le(T,la){return T+la[1]}function Mj(T,la){return ch(T,Math.ceil(Math.log(la.length)/Math.LN2+1))}function ch(T,la){var ya=-1,Ga=+T[0];T=(T[1]-Ga)/la;for(var La=[];++ya<=la;)La[ya]=T*ya+Ga;return La}function cg(T){return[Wb.min(T),Wb.max(T)]}function Qh(T,la){return T.value-la.value}function yh(T,la){var ya=
T._pack_next;T._pack_next=la;la._pack_prev=T;la._pack_next=ya;ya._pack_prev=la}function bi(T,la){T._pack_next=la;la._pack_prev=T}function Gh(T,la){var ya=la.x-T.x,Ga=la.y-T.y;T=T.r+la.r;return.999*T*T>ya*ya+Ga*Ga}function bh(T){function la(Fc){Ga=Math.min(Fc.x-Fc.r,Ga);La=Math.max(Fc.x+Fc.r,La);Pa=Math.min(Fc.y-Fc.r,Pa);cb=Math.max(Fc.y+Fc.r,cb)}if((ya=T.children)&&(wb=ya.length)){var ya,Ga=Infinity,La=-Infinity,Pa=Infinity,cb=-Infinity,Ya,db,ob,wb;ya.forEach(Nj);var Ib=ya[0];Ib.x=-Ib.r;Ib.y=0;la(Ib);
if(1<wb){var Nb=ya[1];Nb.x=Nb.r;Nb.y=0;la(Nb);if(2<wb){var Vb=ya[2];Ig(Ib,Nb,Vb);la(Vb);yh(Ib,Vb);Ib._pack_prev=Vb;yh(Vb,Nb);Nb=Ib._pack_next;for(Ya=3;Ya<wb;Ya++){Ig(Ib,Nb,Vb=ya[Ya]);var Xb=0,oc=1,yc=1;for(db=Nb._pack_next;db!==Nb;db=db._pack_next,oc++)if(Gh(db,Vb)){Xb=1;break}if(1==Xb)for(ob=Ib._pack_prev;ob!==db._pack_prev&&!Gh(ob,Vb);ob=ob._pack_prev,yc++);Xb?(oc<yc||oc==yc&&Nb.r<Ib.r?bi(Ib,Nb=db):bi(Ib=ob,Nb),Ya--):(yh(Ib,Vb),Nb=Vb,la(Vb))}}}Ib=(Ga+La)/2;Nb=(Pa+cb)/2;for(Ya=db=0;Ya<wb;Ya++)Vb=
ya[Ya],Vb.x-=Ib,Vb.y-=Nb,db=Math.max(db,Vb.r+Math.sqrt(Vb.x*Vb.x+Vb.y*Vb.y));T.r=db;ya.forEach(Xi)}}function Nj(T){T._pack_next=T._pack_prev=T}function Xi(T){delete T._pack_next;delete T._pack_prev}function Rh(T,la,ya,Ga){var La=T.children;T.x=la+=Ga*T.x;T.y=ya+=Ga*T.y;T.r*=Ga;if(La){T=-1;for(var Pa=La.length;++T<Pa;)Rh(La[T],la,ya,Ga)}}function Ig(T,la,ya){var Ga=T.r+ya.r,La=la.x-T.x,Pa=la.y-T.y;if(Ga&&(La||Pa)){var cb=la.r+ya.r,Ya=La*La+Pa*Pa;cb*=cb;Ga*=Ga;la=.5+(Ga-cb)/(2*Ya);cb=Math.sqrt(Math.max(0,
2*cb*(Ga+Ya)-(Ga-=Ya)*Ga-cb*cb))/(2*Ya);ya.x=T.x+la*La+cb*Pa;ya.y=T.y+la*Pa-cb*La}else ya.x=T.x+Ga,ya.y=T.y}function ef(T,la){return T.parent==la.parent?1:2}function Qg(T){var la=T.children;return la.length?la[0]:T.t}function Th(T){var la=T.children,ya;return(ya=la.length)?la[ya-1]:T.t}function lj(T){return 1+Wb.max(T,function(la){return la.y})}function Zf(T){return T.reduce(function(la,ya){return la+ya.x},0)/T.length}function Sh(T){var la=T.children;return la&&la.length?Sh(la[0]):T}function Ui(T){var la=
T.children,ya;return la&&(ya=la.length)?Ui(la[ya-1]):T}function zh(T){return{x:T.x,y:T.y,dx:T.dx,dy:T.dy}}function dh(T,la){var ya=T.x+la[3],Ga=T.y+la[0],La=T.dx-la[1]-la[3];T=T.dy-la[0]-la[2];0>La&&(ya+=La/2,La=0);0>T&&(Ga+=T/2,T=0);return{x:ya,y:Ga,dx:La,dy:T}}function zf(T){var la=T[0];T=T[T.length-1];return la<T?[la,T]:[T,la]}function ug(T){return T.rangeExtent?T.rangeExtent():zf(T.range())}function ek(T,la,ya,Ga){var La=ya(T[0],T[1]),Pa=Ga(la[0],la[1]);return function(cb){return Pa(La(cb))}}
function hh(T,la){var ya=0,Ga=T.length-1,La=T[ya],Pa=T[Ga];if(Pa<La){var cb=ya;ya=Ga;Ga=cb;cb=La;La=Pa;Pa=cb}T[ya]=la.floor(La);T[Ga]=la.ceil(Pa);return T}function Hh(T){return T?{floor:function(la){return Math.floor(la/T)*T},ceil:function(la){return Math.ceil(la/T)*T}}:$h}function Db(T,la,ya,Ga){var La=[],Pa=[],cb=0,Ya=Math.min(T.length,la.length)-1;T[Ya]<T[0]&&(T=T.slice().reverse(),la=la.slice().reverse());for(;++cb<=Ya;)La.push(ya(T[cb-1],T[cb])),Pa.push(Ga(la[cb-1],la[cb]));return function(db){var ob=
Wb.bisect(T,db,1,Ya)-1;return Pa[ob](La[ob](db))}}function Y(T,la,ya,Ga){function La(){var db=2<Math.min(T.length,la.length)?Db:ek,ob=Ga?mh:oi;cb=db(T,la,ob,ya);Ya=db(la,T,ob,tg);return Pa}function Pa(db){return cb(db)}var cb,Ya;Pa.invert=function(db){return Ya(db)};Pa.domain=function(db){if(!arguments.length)return T;T=db.map(Number);return La()};Pa.range=function(db){if(!arguments.length)return la;la=db;return La()};Pa.rangeRound=function(db){return Pa.range(db).interpolate(Gg)};Pa.clamp=function(db){if(!arguments.length)return Ga;
Ga=db;return La()};Pa.interpolate=function(db){if(!arguments.length)return ya;ya=db;return La()};Pa.ticks=function(db){return Wb.range.apply(Wb,ja(T,db))};Pa.tickFormat=function(db,ob){return Da(T,db,ob)};Pa.nice=function(db){aa(T,db);return La()};Pa.copy=function(){return Y(T,la,ya,Ga)};return La()}function ba(T,la){return Wb.rebind(T,la,"range","rangeRound","interpolate","clamp")}function aa(T,la){hh(T,Hh(ja(T,la)[2]));hh(T,Hh(ja(T,la)[2]));return T}function ja(T,la){null==la&&(la=10);T=zf(T);var ya=
T[1]-T[0],Ga=Math.pow(10,Math.floor(Math.log(ya/la)/Math.LN10));la=la/ya*Ga;.15>=la?Ga*=10:.35>=la?Ga*=5:.75>=la&&(Ga*=2);T[0]=Math.ceil(T[0]/Ga)*Ga;T[1]=Math.floor(T[1]/Ga)*Ga+.5*Ga;T[2]=Ga;return T}function Da(T,la,ya){T=ja(T,la);if(ya){la=ri.exec(ya);la.shift();if("s"===la[8]){var Ga=Wb.formatPrefix(Math.max(pd(T[0]),pd(T[1])));la[7]||(la[7]="."+Sa(Ga.scale(T[2])));la[8]="f";ya=Wb.format(la.join(""));return function(La){return ya(Ga.scale(La))+Ga.symbol}}la[7]||(la[7]="."+gb(la[8],T));ya=la.join("")}else ya=
",."+Sa(T[2])+"f";return Wb.format(ya)}function Sa(T){return-Math.floor(Math.log(T)/Math.LN10+.01)}function gb(T,la){var ya=Sa(la[2]);return T in uj?Math.abs(ya-Sa(Math.max(pd(la[0]),pd(la[1]))))+ +("e"!==T):ya-2*("%"===T)}function sb(T,la,ya,Ga){function La(Ya){return(ya?Math.log(0>Ya?0:Ya):-Math.log(0<Ya?0:-Ya))/Math.log(la)}function Pa(Ya){return ya?Math.pow(la,Ya):-Math.pow(la,-Ya)}function cb(Ya){return T(La(Ya))}cb.invert=function(Ya){return Pa(T.invert(Ya))};cb.domain=function(Ya){if(!arguments.length)return Ga;
ya=0<=Ya[0];T.domain((Ga=Ya.map(Number)).map(La));return cb};cb.base=function(Ya){if(!arguments.length)return la;la=+Ya;T.domain(Ga.map(La));return cb};cb.nice=function(){var Ya=hh(Ga.map(La),ya?Math:Ng);T.domain(Ya);Ga=Ya.map(Pa);return cb};cb.ticks=function(){var Ya=zf(Ga),db=[],ob=Ya[0];Ya=Ya[1];var wb=Math.floor(La(ob)),Ib=Math.ceil(La(Ya)),Nb=la%1?2:la;if(isFinite(Ib-wb)){if(ya){for(;wb<Ib;wb++)for(var Vb=1;Vb<Nb;Vb++)db.push(Pa(wb)*Vb);db.push(Pa(wb))}else for(db.push(Pa(wb));wb++<Ib;)for(Vb=
Nb-1;0<Vb;Vb--)db.push(Pa(wb)*Vb);for(wb=0;db[wb]<ob;wb++);for(Ib=db.length;db[Ib-1]>Ya;Ib--);db=db.slice(wb,Ib)}return db};cb.tickFormat=function(Ya,db){if(!arguments.length)return Yg;2>arguments.length?db=Yg:"function"!==typeof db&&(db=Wb.format(db));var ob=Math.max(1,la*Ya/cb.ticks().length);return function(wb){var Ib=wb/Pa(Math.round(La(wb)));Ib*la<la-.5&&(Ib*=la);return Ib<=ob?db(wb):""}};cb.copy=function(){return sb(T.copy(),la,ya,Ga)};return ba(cb,T)}function Ob(T,la,ya){function Ga(cb){return T(La(cb))}
var La=Yb(la),Pa=Yb(1/la);Ga.invert=function(cb){return Pa(T.invert(cb))};Ga.domain=function(cb){if(!arguments.length)return ya;T.domain((ya=cb.map(Number)).map(La));return Ga};Ga.ticks=function(cb){return Wb.range.apply(Wb,ja(ya,cb))};Ga.tickFormat=function(cb,Ya){return Da(ya,cb,Ya)};Ga.nice=function(cb){return Ga.domain(aa(ya,cb))};Ga.exponent=function(cb){if(!arguments.length)return la;La=Yb(la=cb);Pa=Yb(1/la);T.domain(ya.map(La));return Ga};Ga.copy=function(){return Ob(T.copy(),la,ya)};return ba(Ga,
T)}function Yb(T){return function(la){return 0>la?-Math.pow(-la,T):Math.pow(la,T)}}function cc(T,la){function ya(Ya){return Pa[((La.get(Ya)||("range"===la.t?La.set(Ya,T.push(Ya)):NaN))-1)%Pa.length]}function Ga(Ya,db){return Wb.range(T.length).map(function(ob){return Ya+db*ob})}var La,Pa,cb;ya.domain=function(Ya){if(!arguments.length)return T;T=[];La=new l;for(var db=-1,ob=Ya.length,wb;++db<ob;)La.has(wb=Ya[db])||La.set(wb,T.push(wb));return ya[la.t].apply(ya,la.a)};ya.range=function(Ya){if(!arguments.length)return Pa;
Pa=Ya;cb=0;la={t:"range",a:arguments};return ya};ya.rangePoints=function(Ya,db){2>arguments.length&&(db=0);var ob=Ya[0],wb=Ya[1];wb=2>T.length?(ob=(ob+wb)/2,0):(wb-ob)/(T.length-1+db);Pa=Ga(ob+wb*db/2,wb);cb=0;la={t:"rangePoints",a:arguments};return ya};ya.rangeRoundPoints=function(Ya,db){2>arguments.length&&(db=0);var ob=Ya[0],wb=Ya[1],Ib=2>T.length?(ob=wb=Math.round((ob+wb)/2),0):(wb-ob)/(T.length-1+db)|0;Pa=Ga(ob+Math.round(Ib*db/2+(wb-ob-(T.length-1+db)*Ib)/2),Ib);cb=0;la={t:"rangeRoundPoints",
a:arguments};return ya};ya.rangeBands=function(Ya,db,ob){2>arguments.length&&(db=0);3>arguments.length&&(ob=db);var wb=Ya[1]<Ya[0],Ib=Ya[wb-0],Nb=(Ya[1-wb]-Ib)/(T.length-db+2*ob);Pa=Ga(Ib+Nb*ob,Nb);wb&&Pa.reverse();cb=Nb*(1-db);la={t:"rangeBands",a:arguments};return ya};ya.rangeRoundBands=function(Ya,db,ob){2>arguments.length&&(db=0);3>arguments.length&&(ob=db);var wb=Ya[1]<Ya[0],Ib=Ya[wb-0],Nb=Ya[1-wb],Vb=Math.floor((Nb-Ib)/(T.length-db+2*ob));Pa=Ga(Ib+Math.round((Nb-Ib-(T.length-db)*Vb)/2),Vb);
wb&&Pa.reverse();cb=Math.round(Vb*(1-db));la={t:"rangeRoundBands",a:arguments};return ya};ya.rangeBand=function(){return cb};ya.rangeExtent=function(){return zf(la.a[0])};ya.copy=function(){return cc(T,la)};return ya.domain(T)}function Nc(T,la){function ya(){var Pa=0,cb=la.length;for(La=[];++Pa<cb;)La[Pa-1]=Wb.quantile(T,Pa/cb);return Ga}function Ga(Pa){if(!isNaN(Pa=+Pa))return la[Wb.bisect(La,Pa)]}var La;Ga.domain=function(Pa){if(!arguments.length)return T;T=Pa.map(p).filter(h).sort(m);return ya()};
Ga.range=function(Pa){if(!arguments.length)return la;la=Pa;return ya()};Ga.quantiles=function(){return La};Ga.invertExtent=function(Pa){Pa=la.indexOf(Pa);return 0>Pa?[NaN,NaN]:[0<Pa?La[Pa-1]:T[0],Pa<La.length?La[Pa]:T[T.length-1]]};Ga.copy=function(){return Nc(T,la)};return ya()}function Lc(T,la,ya){function Ga(Ya){return ya[Math.max(0,Math.min(cb,Math.floor(Pa*(Ya-T))))]}function La(){Pa=ya.length/(la-T);cb=ya.length-1;return Ga}var Pa,cb;Ga.domain=function(Ya){if(!arguments.length)return[T,la];
T=+Ya[0];la=+Ya[Ya.length-1];return La()};Ga.range=function(Ya){if(!arguments.length)return ya;ya=Ya;return La()};Ga.invertExtent=function(Ya){Ya=ya.indexOf(Ya);Ya=0>Ya?NaN:Ya/Pa+T;return[Ya,Ya+1/Pa]};Ga.copy=function(){return Lc(T,la,ya)};return La()}function Cc(T,la){function ya(Ga){if(Ga<=Ga)return la[Wb.bisect(T,Ga)]}ya.domain=function(Ga){if(!arguments.length)return T;T=Ga;return ya};ya.range=function(Ga){if(!arguments.length)return la;la=Ga;return ya};ya.invertExtent=function(Ga){Ga=la.indexOf(Ga);
return[T[Ga-1],T[Ga]]};ya.copy=function(){return Cc(T,la)};return ya}function Kc(T){function la(ya){return+ya}la.invert=la;la.domain=la.range=function(ya){if(!arguments.length)return T;T=ya.map(la);return la};la.ticks=function(ya){return Wb.range.apply(Wb,ja(T,ya))};la.tickFormat=function(ya,Ga){return Da(T,ya,Ga)};la.copy=function(){return Kc(T)};return la}function Hc(){return 0}function bc(T){return T.innerRadius}function Aa(T){return T.outerRadius}function Ha(T){return T.startAngle}function Qa(T){return T.endAngle}
function hb(T){return T&&T.padAngle}function ub(T,la,ya,Ga){return 0<(T-ya)*la-(la-Ga)*T?0:1}function Mb(T,la,ya,Ga,La){var Pa=T[0]-la[0],cb=T[1]-la[1];La=(La?Ga:-Ga)/Math.sqrt(Pa*Pa+cb*cb);cb*=La;Pa*=-La;var Ya=T[0]+cb,db=T[1]+Pa,ob=la[0]+cb,wb=la[1]+Pa;T=(Ya+ob)/2;la=(db+wb)/2;La=ob-Ya;var Ib=wb-db,Nb=La*La+Ib*Ib;Ga=ya-Ga;wb=Ya*wb-ob*db;var Vb=(0>Ib?-1:1)*Math.sqrt(Math.max(0,Ga*Ga*Nb-wb*wb));Ya=(wb*Ib-La*Vb)/Nb;db=(-wb*La-Ib*Vb)/Nb;ob=(wb*Ib+La*Vb)/Nb;La=(-wb*La+Ib*Vb)/Nb;Ib=Ya-T;Nb=db-la;T=ob-
T;la=La-la;Ib*Ib+Nb*Nb>T*T+la*la&&(Ya=ob,db=La);return[[Ya-cb,db-Pa],[Ya*ya/Ga,db*ya/Ga]]}function Tb(T){function la(db){function ob(){wb.push("M",Pa(T(Ib),Ya))}for(var wb=[],Ib=[],Nb=-1,Vb=db.length,Xb,oc=Ba(ya),yc=Ba(Ga);++Nb<Vb;)La.call(this,Xb=db[Nb],Nb)?Ib.push([+oc.call(this,Xb,Nb),+yc.call(this,Xb,Nb)]):Ib.length&&(ob(),Ib=[]);Ib.length&&ob();return wb.length?wb.join(""):null}var ya=hf,Ga=Qf,La=Wc,Pa=uc,cb=Pa.key,Ya=.7;la.x=function(db){if(!arguments.length)return ya;ya=db;return la};la.y=
function(db){if(!arguments.length)return Ga;Ga=db;return la};la.defined=function(db){if(!arguments.length)return La;La=db;return la};la.interpolate=function(db){if(!arguments.length)return cb;cb="function"===typeof db?Pa=db:(Pa=Ck.get(db)||uc).key;return la};la.tension=function(db){if(!arguments.length)return Ya;Ya=db;return la};return la}function uc(T){return 1<T.length?T.join("L"):T+"Z"}function kc(T){return T.join("L")+"Z"}function nc(T){for(var la=0,ya=T.length,Ga=T[0],La=[Ga[0],",",Ga[1]];++la<
ya;)La.push("V",(Ga=T[la])[1],"H",Ga[0]);return La.join("")}function ad(T){for(var la=0,ya=T.length,Ga=T[0],La=[Ga[0],",",Ga[1]];++la<ya;)La.push("H",(Ga=T[la])[0],"V",Ga[1]);return La.join("")}function kd(T,la){if(1>la.length||T.length!=la.length&&T.length!=la.length+2)return uc(T);var ya=T.length!=la.length,Ga="",La=T[0],Pa=T[1],cb=la[0],Ya=cb,db=1;ya&&(Ga+="Q"+(Pa[0]-2*cb[0]/3)+","+(Pa[1]-2*cb[1]/3)+","+Pa[0]+","+Pa[1],La=T[1],db=2);if(1<la.length)for(Ya=la[1],Pa=T[db],db++,Ga+="C"+(La[0]+cb[0])+
","+(La[1]+cb[1])+","+(Pa[0]-Ya[0])+","+(Pa[1]-Ya[1])+","+Pa[0]+","+Pa[1],La=2;La<la.length;La++,db++)Pa=T[db],Ya=la[La],Ga+="S"+(Pa[0]-Ya[0])+","+(Pa[1]-Ya[1])+","+Pa[0]+","+Pa[1];ya&&(T=T[db],Ga+="Q"+(Pa[0]+2*Ya[0]/3)+","+(Pa[1]+2*Ya[1]/3)+","+T[0]+","+T[1]);return Ga}function td(T,la){var ya=[];la=(1-la)/2;for(var Ga,La=T[0],Pa=T[1],cb=1,Ya=T.length;++cb<Ya;)Ga=La,La=Pa,Pa=T[cb],ya.push([la*(Pa[0]-Ga[0]),la*(Pa[1]-Ga[1])]);return ya}function Cd(T){if(3>T.length)return uc(T);var la=1,ya=T.length,
Ga=T[0],La=Ga[0],Pa=Ga[1],cb=[La,La,La,(Ga=T[1])[0]],Ya=[Pa,Pa,Pa,Ga[1]];La=[La,",",Pa,"L",Md(xi,cb),",",Md(xi,Ya)];for(T.push(T[ya-1]);++la<=ya;)Ga=T[la],cb.shift(),cb.push(Ga[0]),Ya.shift(),Ya.push(Ga[1]),Ed(La,cb,Ya);T.pop();La.push("L",Ga);return La.join("")}function Md(T,la){return T[0]*la[0]+T[1]*la[1]+T[2]*la[2]+T[3]*la[3]}function Ed(T,la,ya){T.push("C",Md(Ok,la),",",Md(Ok,ya),",",Md(Xg,la),",",Md(Xg,ya),",",Md(xi,la),",",Md(xi,ya))}function Sd(T,la){return(la[1]-T[1])/(la[0]-T[0])}function ee(T){for(var la,
ya=-1,Ga=T.length,La,Pa;++ya<Ga;)la=T[ya],La=la[0],Pa=la[1]-qf,la[0]=La*Math.cos(Pa),la[1]=La*Math.sin(Pa);return T}function Zd(T){function la(Nb){function Vb(){Xb.push("M",Ya(T(yc),Ib),wb,ob(T(oc.reverse()),Ib),"Z")}for(var Xb=[],oc=[],yc=[],Fc=-1,Xc=Nb.length,fd,hd=Ba(ya),nd=Ba(La),lc=ya===Ga?function(){return $c}:Ba(Ga),zc=La===Pa?function(){return ud}:Ba(Pa),$c,ud;++Fc<Xc;)cb.call(this,fd=Nb[Fc],Fc)?(oc.push([$c=+hd.call(this,fd,Fc),ud=+nd.call(this,fd,Fc)]),yc.push([+lc.call(this,fd,Fc),+zc.call(this,
fd,Fc)])):oc.length&&(Vb(),oc=[],yc=[]);oc.length&&Vb();return Xb.length?Xb.join(""):null}var ya=hf,Ga=hf,La=0,Pa=Qf,cb=Wc,Ya=uc,db=Ya.key,ob=Ya,wb="L",Ib=.7;la.x=function(Nb){if(!arguments.length)return Ga;ya=Ga=Nb;return la};la.x0=function(Nb){if(!arguments.length)return ya;ya=Nb;return la};la.x1=function(Nb){if(!arguments.length)return Ga;Ga=Nb;return la};la.y=function(Nb){if(!arguments.length)return Pa;La=Pa=Nb;return la};la.y0=function(Nb){if(!arguments.length)return La;La=Nb;return la};la.y1=
function(Nb){if(!arguments.length)return Pa;Pa=Nb;return la};la.defined=function(Nb){if(!arguments.length)return cb;cb=Nb;return la};la.interpolate=function(Nb){if(!arguments.length)return db;db="function"===typeof Nb?Ya=Nb:(Ya=Ck.get(Nb)||uc).key;ob=Ya.reverse||Ya;wb=Ya.closed?"M":"L";return la};la.tension=function(Nb){if(!arguments.length)return Ib;Ib=Nb;return la};return la}function me(T){return T.radius}function De(T){return[T.x,T.y]}function he(T){return function(){var la=T.apply(this,arguments),
ya=la[0];la=la[1]-qf;return[ya*Math.cos(la),ya*Math.sin(la)]}}function Re(){return 64}function Xe(){return"circle"}function pf(T){T=Math.sqrt(T/fe);return"M0,"+T+"A"+T+","+T+" 0 1,1 0,"+-T+"A"+T+","+T+" 0 1,1 0,"+T+"Z"}function cf(T){return function(){var la,ya,Ga;(la=this[T])&&(Ga=la[ya=la.active])&&(Ga.timer.c=null,Ga.timer.t=NaN,--la.count?delete la[ya]:delete this[T],la.active+=.5,Ga.event&&Ga.event.interrupt.call(this,this.__data__,Ga.index))}}function mg(T,la,ya){Pe(T,Of);T.namespace=la;T.id=
ya;return T}function df(T,la,ya,Ga){var La=T.id,Pa=T.namespace;return ca(T,"function"===typeof ya?function(cb,Ya,db){cb[Pa][La].tween.set(la,Ga(ya.call(cb,cb.__data__,Ya,db)))}:(ya=Ga(ya),function(cb){cb[Pa][La].tween.set(la,ya)}))}function kf(T){null==T&&(T="");return function(){this.textContent=T}}function ce(T){return null==T?"__transition__":"__transition_"+T+"__"}function Le(T,la,ya,Ga,La){function Pa(oc){var yc=ob.delay;Xb.t=yc+Vb;if(yc<=oc)return cb(oc-yc);Xb.c=cb}function cb(oc){var yc=db.active,
Fc=db[yc];Fc&&(Fc.timer.c=null,Fc.timer.t=NaN,--db.count,delete db[yc],Fc.event&&Fc.event.interrupt.call(T,T.__data__,Fc.index));for(var Xc in db)+Xc<Ga&&(yc=db[Xc],yc.timer.c=null,yc.timer.t=NaN,--db.count,delete db[Xc]);Xb.c=Ya;Ra(function(){Xb.c&&Ya(oc||1)&&(Xb.c=null,Xb.t=NaN);return 1},0,Vb);db.active=Ga;ob.event&&ob.event.start.call(T,T.__data__,la);Nb=[];ob.tween.forEach(function(fd,hd){(hd=hd.call(T,T.__data__,la))&&Nb.push(hd)});Ib=ob.ease;wb=ob.duration}function Ya(oc){oc/=wb;for(var yc=
Ib(oc),Fc=Nb.length;0<Fc;)Nb[--Fc].call(T,yc);if(1<=oc)return ob.event&&ob.event.end.call(T,T.__data__,la),--db.count?delete db[Ga]:delete T[ya],1}var db=T[ya]||(T[ya]={active:0,count:0}),ob=db[Ga],wb,Ib,Nb;if(!ob){var Vb=La.time;var Xb=Ra(Pa,0,Vb);ob=db[Ga]={tween:new l,time:Vb,timer:Xb,delay:La.delay,duration:La.duration,ease:La.ease,index:la};La=null;++db.count}}function Bf(T,la,ya){T.attr("transform",function(Ga){var La=la(Ga);return"translate("+(isFinite(La)?La:ya(Ga))+",0)"})}function of(T,
la,ya){T.attr("transform",function(Ga){var La=la(Ga);return"translate(0,"+(isFinite(La)?La:ya(Ga))+")"})}function Pf(T){return T.toISOString()}function ff(T,la,ya){function Ga(Pa){return T(Pa)}function La(Pa,cb){var Ya=(Pa[1]-Pa[0])/cb,db=Wb.bisect(ci,Ya);return db==ci.length?[la.year,ja(Pa.map(function(ob){return ob/31536E6}),cb)[2]]:db?la[Ya/ci[db-1]<ci[db]/Ya?db-1:db]:[ih,ja(Pa,cb)[2]]}Ga.invert=function(Pa){return rf(T.invert(Pa))};Ga.domain=function(Pa){if(!arguments.length)return T.domain().map(rf);
T.domain(Pa);return Ga};Ga.nice=function(Pa,cb){function Ya(wb){return!isNaN(wb)&&!Pa.range(wb,rf(+wb+1),cb).length}var db=Ga.domain(),ob=zf(db);if(ob=null==Pa?La(ob,10):"number"===typeof Pa&&La(ob,Pa))Pa=ob[0],cb=ob[1];return Ga.domain(hh(db,1<cb?{floor:function(wb){for(;Ya(wb=Pa.floor(wb));)wb=rf(wb-1);return wb},ceil:function(wb){for(;Ya(wb=Pa.ceil(wb));)wb=rf(+wb+1);return wb}}:Pa))};Ga.ticks=function(Pa,cb){var Ya=zf(Ga.domain()),db=null==Pa?La(Ya,10):"number"===typeof Pa?La(Ya,Pa):!Pa.range&&
[{range:Pa},cb];db&&(Pa=db[0],cb=db[1]);return Pa.range(Ya[0],rf(+Ya[1]+1),1>cb?1:cb)};Ga.tickFormat=function(){return ya};Ga.copy=function(){return ff(T.copy(),la,ya)};return ba(Ga,T)}function rf(T){return new Date(T)}function ti(T){return JSON.parse(T.responseText)}function Sg(T){var la=If.createRange();la.selectNode(If.body);return la.createContextualFragment(T.responseText)}var Wb={version:"3.5.17"},Xj=[].slice,Jg=function(T){return Xj.call(T)},If=this.document;if(If)try{Jg(If.documentElement.childNodes)[0].nodeType}catch(T){Jg=
function(la){for(var ya=la.length,Ga=Array(ya);ya--;)Ga[ya]=la[ya];return Ga}}Date.now||(Date.now=function(){return+new Date});if(If)try{If.createElement("DIV").style.setProperty("opacity",0,"")}catch(T){var Ch=this.Element.prototype,Lf=Ch.setAttribute,Dh=Ch.setAttributeNS,Eh=this.CSSStyleDeclaration.prototype,Xh=Eh.setProperty;Ch.setAttribute=function(la,ya){Lf.call(this,la,ya+"")};Ch.setAttributeNS=function(la,ya,Ga){Dh.call(this,la,ya,Ga+"")};Eh.setProperty=function(la,ya,Ga){Xh.call(this,la,ya+
"",Ga)}}Wb.ascending=m;Wb.descending=function(T,la){return la<T?-1:la>T?1:la>=T?0:NaN};Wb.min=function(T,la){var ya=-1,Ga=T.length,La;if(1===arguments.length){for(;++ya<Ga;)if(null!=(La=T[ya])&&La>=La){var Pa=La;break}for(;++ya<Ga;)null!=(La=T[ya])&&Pa>La&&(Pa=La)}else{for(;++ya<Ga;)if(null!=(La=la.call(T,T[ya],ya))&&La>=La){Pa=La;break}for(;++ya<Ga;)null!=(La=la.call(T,T[ya],ya))&&Pa>La&&(Pa=La)}return Pa};Wb.max=function(T,la){var ya=-1,Ga=T.length,La;if(1===arguments.length){for(;++ya<Ga;)if(null!=
(La=T[ya])&&La>=La){var Pa=La;break}for(;++ya<Ga;)null!=(La=T[ya])&&La>Pa&&(Pa=La)}else{for(;++ya<Ga;)if(null!=(La=la.call(T,T[ya],ya))&&La>=La){Pa=La;break}for(;++ya<Ga;)null!=(La=la.call(T,T[ya],ya))&&La>Pa&&(Pa=La)}return Pa};Wb.extent=function(T,la){var ya=-1,Ga=T.length,La,Pa;if(1===arguments.length){for(;++ya<Ga;)if(null!=(La=T[ya])&&La>=La){var cb=Pa=La;break}for(;++ya<Ga;)null!=(La=T[ya])&&(cb>La&&(cb=La),Pa<La&&(Pa=La))}else{for(;++ya<Ga;)if(null!=(La=la.call(T,T[ya],ya))&&La>=La){cb=Pa=
La;break}for(;++ya<Ga;)null!=(La=la.call(T,T[ya],ya))&&(cb>La&&(cb=La),Pa<La&&(Pa=La))}return[cb,Pa]};Wb.sum=function(T,la){var ya=0,Ga=T.length,La,Pa=-1;if(1===arguments.length)for(;++Pa<Ga;)isNaN(La=+T[Pa])||(ya+=La);else for(;++Pa<Ga;)isNaN(La=+la.call(T,T[Pa],Pa))||(ya+=La);return ya};Wb.mean=function(T,la){var ya=0,Ga=T.length,La,Pa=-1,cb=Ga;if(1===arguments.length)for(;++Pa<Ga;)isNaN(La=p(T[Pa]))?--cb:ya+=La;else for(;++Pa<Ga;)isNaN(La=p(la.call(T,T[Pa],Pa)))?--cb:ya+=La;if(cb)return ya/cb};
Wb.quantile=function(T,la){var ya=(T.length-1)*la+1;la=Math.floor(ya);var Ga=+T[la-1];return(ya-=la)?Ga+ya*(T[la]-Ga):Ga};Wb.median=function(T,la){var ya=[],Ga=T.length,La,Pa=-1;if(1===arguments.length)for(;++Pa<Ga;)isNaN(La=p(T[Pa]))||ya.push(La);else for(;++Pa<Ga;)isNaN(La=p(la.call(T,T[Pa],Pa)))||ya.push(La);if(ya.length)return Wb.quantile(ya.sort(m),.5)};Wb.variance=function(T,la){var ya=T.length,Ga=0,La,Pa=0,cb=-1,Ya=0;if(1===arguments.length)for(;++cb<ya;){if(!isNaN(La=p(T[cb]))){var db=La-
Ga;Ga+=db/++Ya;Pa+=db*(La-Ga)}}else for(;++cb<ya;)isNaN(La=p(la.call(T,T[cb],cb)))||(db=La-Ga,Ga+=db/++Ya,Pa+=db*(La-Ga));if(1<Ya)return Pa/(Ya-1)};Wb.deviation=function(){var T=Wb.variance.apply(this,arguments);return T?Math.sqrt(T):T};var te=a(m);Wb.bisectLeft=te.left;Wb.bisect=Wb.bisectRight=te.right;Wb.bisector=function(T){return a(1===T.length?function(la,ya){return m(T(la),ya)}:T)};Wb.shuffle=function(T,la,ya){3>(Ga=arguments.length)&&(ya=T.length,2>Ga&&(la=0));for(var Ga=ya-la,La,Pa;Ga;)Pa=
Math.random()*Ga--|0,La=T[Ga+la],T[Ga+la]=T[Pa+la],T[Pa+la]=La;return T};Wb.permute=function(T,la){for(var ya=la.length,Ga=Array(ya);ya--;)Ga[ya]=T[la[ya]];return Ga};Wb.pairs=function(T){for(var la=0,ya=T.length-1,Ga=T[0],La=Array(0>ya?0:ya);la<ya;)La[la]=[Ga,Ga=T[++la]];return La};Wb.transpose=function(T){if(!(Pa=T.length))return[];for(var la=-1,ya=Wb.min(T,d),Ga=Array(ya);++la<ya;)for(var La=-1,Pa,cb=Ga[la]=Array(Pa);++La<Pa;)cb[La]=T[La][la];return Ga};Wb.zip=function(){return Wb.transpose(arguments)};
Wb.keys=function(T){var la=[],ya;for(ya in T)la.push(ya);return la};Wb.values=function(T){var la=[],ya;for(ya in T)la.push(T[ya]);return la};Wb.entries=function(T){var la=[],ya;for(ya in T)la.push({key:ya,value:T[ya]});return la};Wb.merge=function(T){var la=T.length;var ya=-1;for(var Ga=0,La,Pa;++ya<la;)Ga+=T[ya].length;for(La=Array(Ga);0<=--la;)for(Pa=T[la],ya=Pa.length;0<=--ya;)La[--Ga]=Pa[ya];return La};var pd=Math.abs;Wb.range=function(T,la,ya){3>arguments.length&&(ya=1,2>arguments.length&&(la=
T,T=0));if(Infinity===(la-T)/ya)throw Error("infinite range");var Ga=[];var La=pd(ya);for(var Pa=1;La*Pa%1;)Pa*=10;La=Pa;Pa=-1;var cb;T*=La;la*=La;ya*=La;if(0>ya)for(;(cb=T+ya*++Pa)>la;)Ga.push(cb/La);else for(;(cb=T+ya*++Pa)<la;)Ga.push(cb/La);return Ga};Wb.map=function(T,la){var ya=new l;if(T instanceof l)T.forEach(function(cb,Ya){ya.set(cb,Ya)});else if(Array.isArray(T)){var Ga=-1,La=T.length,Pa;if(1===arguments.length)for(;++Ga<La;)ya.set(Ga,T[Ga]);else for(;++Ga<La;)ya.set(la.call(T,Pa=T[Ga],
Ga),Pa)}else for(Ga in T)ya.set(Ga,T[Ga]);return ya};e(l,{has:f,get:function(T){return this._[k(T)]},set:function(T,la){return this._[k(T)]=la},remove:g,keys:q,values:function(){var T=[],la;for(la in this._)T.push(this._[la]);return T},entries:function(){var T=[],la;for(la in this._)T.push({key:c(la),value:this._[la]});return T},size:t,empty:u,forEach:function(T){for(var la in this._)T.call(this,c(la),this._[la])}});Wb.nest=function(){function T(Ya,db,ob){if(ob>=Ga.length)return cb?cb.call(ya,db):
Pa?db.sort(Pa):db;for(var wb=-1,Ib=db.length,Nb=Ga[ob++],Vb,Xb,oc=new l,yc;++wb<Ib;)(yc=oc.get(Vb=Nb(Xb=db[wb])))?yc.push(Xb):oc.set(Vb,[Xb]);Ya?(Xb=Ya(),db=function(Fc,Xc){Xb.set(Fc,T(Ya,Xc,ob))}):(Xb={},db=function(Fc,Xc){Xb[Fc]=T(Ya,Xc,ob)});oc.forEach(db);return Xb}function la(Ya,db){if(db>=Ga.length)return Ya;var ob=[],wb=La[db++];Ya.forEach(function(Ib,Nb){ob.push({key:Ib,values:la(Nb,db)})});return wb?ob.sort(function(Ib,Nb){return wb(Ib.key,Nb.key)}):ob}var ya={},Ga=[],La=[],Pa,cb;ya.map=
function(Ya,db){return T(db,Ya,0)};ya.entries=function(Ya){return la(T(Wb.map,Ya,0),0)};ya.key=function(Ya){Ga.push(Ya);return ya};ya.sortKeys=function(Ya){La[Ga.length-1]=Ya;return ya};ya.sortValues=function(Ya){Pa=Ya;return ya};ya.rollup=function(Ya){cb=Ya;return ya};return ya};Wb.set=function(T){var la=new w;if(T)for(var ya=0,Ga=T.length;ya<Ga;++ya)la.add(T[ya]);return la};e(w,{has:f,add:function(T){this._[k(T+="")]=!0;return T},remove:g,values:q,size:t,empty:u,forEach:function(T){for(var la in this._)T.call(this,
c(la))}});Wb.behavior={};Wb.rebind=function(T,la){for(var ya=1,Ga=arguments.length,La;++ya<Ga;)T[La=arguments[ya]]=E(T,la,la[La]);return T};var Xd="webkit ms moz Moz o O".split(" ");Wb.dispatch=function(){for(var T=new B,la=-1,ya=arguments.length;++la<ya;)T[arguments[la]]=C(T);return T};B.prototype.on=function(T,la){var ya=T.indexOf("."),Ga="";0<=ya&&(Ga=T.slice(ya+1),T=T.slice(0,ya));if(T)return 2>arguments.length?this[T].on(Ga):this[T].on(Ga,la);if(2===arguments.length){if(null==la)for(T in this)if(this.hasOwnProperty(T))this[T].on(Ga,
null);return this}};Wb.event=null;Wb.requote=function(T){return T.replace(He,"\\$\x26")};var He=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Pe={}.__proto__?function(T,la){T.__proto__=la}:function(T,la){for(var ya in la)T[ya]=la[ya]},Cf=function(T,la){return la.querySelector(T)},eg=function(T,la){return la.querySelectorAll(T)},oh=function(T,la){var ya=T.matches||T[F(T,"matchesSelector")];oh=function(Ga,La){return ya.call(Ga,La)};return oh(T,la)};"function"===typeof Sizzle&&(Cf=function(T,la){return Sizzle(T,
la)[0]||null},eg=Sizzle,oh=Sizzle.matchesSelector);Wb.selection=function(){return Wb.select(If.documentElement)};var We=Wb.selection.prototype=[];We.select=function(T){var la=[],ya,Ga,La,Pa;T=K(T);for(var cb=-1,Ya=this.length;++cb<Ya;){la.push(ya=[]);ya.parentNode=(La=this[cb]).parentNode;for(var db=-1,ob=La.length;++db<ob;)(Pa=La[db])?(ya.push(Ga=T.call(Pa,Pa.__data__,db,cb)),Ga&&"__data__"in Pa&&(Ga.__data__=Pa.__data__)):ya.push(null)}return J(la)};We.selectAll=function(T){var la=[],ya,Ga;T=N(T);
for(var La=-1,Pa=this.length;++La<Pa;)for(var cb=this[La],Ya=-1,db=cb.length;++Ya<db;)if(Ga=cb[Ya])la.push(ya=Jg(T.call(Ga,Ga.__data__,Ya,La))),ya.parentNode=Ga;return J(la)};var Gi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Wb.ns={prefix:Gi,qualify:function(T){var la=T.indexOf(":"),ya=T;0<=la&&"xmlns"!==(ya=T.slice(0,la))&&(T=T.slice(la+1));return Gi.hasOwnProperty(ya)?
{space:Gi[ya],local:T}:T}};We.attr=function(T,la){if(2>arguments.length){if("string"===typeof T){var ya=this.node();T=Wb.ns.qualify(T);return T.local?ya.getAttributeNS(T.space,T.local):ya.getAttribute(T)}for(la in T)this.each(H(la,T[la]));return this}return this.each(H(T,la))};We.classed=function(T,la){if(2>arguments.length){if("string"===typeof T){var ya=this.node(),Ga=(T=(T+"").trim().split(/^|\s+/)).length,La=-1;if(la=ya.classList)for(;++La<Ga;){if(!la.contains(T[La]))return!1}else for(la=ya.getAttribute("class");++La<
Ga;)if(!L(T[La]).test(la))return!1;return!0}for(la in T)this.each(P(la,T[la]));return this}return this.each(P(T,la))};We.style=function(T,la,ya){var Ga=arguments.length;if(3>Ga){if("string"!==typeof T){2>Ga&&(la="");for(ya in T)this.each(S(ya,T[ya],la));return this}if(2>Ga)return Ga=this.node(),n(Ga).getComputedStyle(Ga,null).getPropertyValue(T);ya=""}return this.each(S(T,la,ya))};We.property=function(T,la){if(2>arguments.length){if("string"===typeof T)return this.node()[T];for(la in T)this.each(O(la,
T[la]));return this}return this.each(O(T,la))};We.text=function(T){return arguments.length?this.each("function"===typeof T?function(){var la=T.apply(this,arguments);this.textContent=null==la?"":la}:null==T?function(){this.textContent=""}:function(){this.textContent=T}):this.node().textContent};We.html=function(T){return arguments.length?this.each("function"===typeof T?function(){var la=T.apply(this,arguments);this.innerHTML=null==la?"":la}:null==T?function(){this.innerHTML=""}:function(){this.innerHTML=
T}):this.node().innerHTML};We.append=function(T){T=U(T);return this.select(function(){return this.appendChild(T.apply(this,arguments))})};We.insert=function(T,la){T=U(T);la=K(la);return this.select(function(){return this.insertBefore(T.apply(this,arguments),la.apply(this,arguments)||null)})};We.remove=function(){return this.each(X)};We.data=function(T,la){function ya(wb,Ib){var Nb,Vb=wb.length,Xb=Ib.length,oc=Math.min(Vb,Xb),yc=Array(Xb),Fc=Array(Xb),Xc=Array(Vb),fd,hd;if(la){oc=new l;var nd=Array(Vb),
lc;for(Nb=-1;++Nb<Vb;)if(fd=wb[Nb])oc.has(lc=la.call(fd,fd.__data__,Nb))?Xc[Nb]=fd:oc.set(lc,fd),nd[Nb]=lc;for(Nb=-1;++Nb<Xb;)(fd=oc.get(lc=la.call(Ib,hd=Ib[Nb],Nb)))?!0!==fd&&(yc[Nb]=fd,fd.__data__=hd):Fc[Nb]={__data__:hd},oc.set(lc,!0);for(Nb=-1;++Nb<Vb;)Nb in nd&&!0!==oc.get(nd[Nb])&&(Xc[Nb]=wb[Nb])}else{for(Nb=-1;++Nb<oc;)fd=wb[Nb],hd=Ib[Nb],fd?(fd.__data__=hd,yc[Nb]=fd):Fc[Nb]={__data__:hd};for(;Nb<Xb;++Nb)Fc[Nb]={__data__:Ib[Nb]};for(;Nb<Vb;++Nb)Xc[Nb]=wb[Nb]}Fc.update=yc;Fc.parentNode=yc.parentNode=
Xc.parentNode=wb.parentNode;Ya.push(Fc);db.push(yc);ob.push(Xc)}var Ga=-1,La=this.length,Pa,cb;if(!arguments.length){for(T=Array(La=(Pa=this[0]).length);++Ga<La;)if(cb=Pa[Ga])T[Ga]=cb.__data__;return T}var Ya=ia([]),db=J([]),ob=J([]);if("function"===typeof T)for(;++Ga<La;)ya(Pa=this[Ga],T.call(Pa,Pa.parentNode.__data__,Ga));else for(;++Ga<La;)ya(Pa=this[Ga],T);db.enter=function(){return Ya};db.exit=function(){return ob};return db};We.datum=function(T){return arguments.length?this.property("__data__",
T):this.property("__data__")};We.filter=function(T){var la=[],ya,Ga,La;"function"!==typeof T&&(T=da(T));for(var Pa=0,cb=this.length;Pa<cb;Pa++){la.push(ya=[]);ya.parentNode=(Ga=this[Pa]).parentNode;for(var Ya=0,db=Ga.length;Ya<db;Ya++)(La=Ga[Ya])&&T.call(La,La.__data__,Ya,Pa)&&ya.push(La)}return J(la)};We.order=function(){for(var T=-1,la=this.length;++T<la;)for(var ya=this[T],Ga=ya.length-1,La=ya[Ga],Pa;0<=--Ga;)if(Pa=ya[Ga])La&&La!==Pa.nextSibling&&La.parentNode.insertBefore(Pa,La),La=Pa;return this};
We.sort=function(T){T=ea.apply(this,arguments);for(var la=-1,ya=this.length;++la<ya;)this[la].sort(T);return this.order()};We.each=function(T){return ca(this,function(la,ya,Ga){T.call(la,la.__data__,ya,Ga)})};We.call=function(T){var la=Jg(arguments);T.apply(la[0]=this,la);return this};We.empty=function(){return!this.node()};We.node=function(){for(var T=0,la=this.length;T<la;T++)for(var ya=this[T],Ga=0,La=ya.length;Ga<La;Ga++){var Pa=ya[Ga];if(Pa)return Pa}return null};We.size=function(){var T=0;ca(this,
function(){++T});return T};var hg=[];Wb.selection.enter=ia;Wb.selection.enter.prototype=hg;hg.append=We.append;hg.empty=We.empty;hg.node=We.node;hg.call=We.call;hg.size=We.size;hg.select=function(T){for(var la=[],ya,Ga,La,Pa,cb,Ya=-1,db=this.length;++Ya<db;){La=(Pa=this[Ya]).update;la.push(ya=[]);ya.parentNode=Pa.parentNode;for(var ob=-1,wb=Pa.length;++ob<wb;)(cb=Pa[ob])?(ya.push(La[ob]=Ga=T.call(Pa.parentNode,cb.__data__,ob,Ya)),Ga.__data__=cb.__data__):ya.push(null)}return J(la)};hg.insert=function(T,
la){2>arguments.length&&(la=ha(this));return We.insert.call(this,T,la)};Wb.select=function(T){if("string"===typeof T){var la=[Cf(T,If)];la.parentNode=If.documentElement}else la=[T],la.parentNode=T&&(T.ownerDocument||T.document||T).documentElement;return J([la])};Wb.selectAll=function(T){"string"===typeof T?(T=Jg(eg(T,If)),T.parentNode=If.documentElement):(T=Jg(T),T.parentNode=null);return J([T])};We.on=function(T,la,ya){var Ga=arguments.length;if(3>Ga){if("string"!==typeof T){2>Ga&&(la=!1);for(ya in T)this.each(fa(ya,
T[ya],la));return this}if(2>Ga)return(Ga=this.node()["__on"+T])&&Ga._;ya=!1}return this.each(fa(T,la,ya))};var Yh=Wb.map({mouseenter:"mouseover",mouseleave:"mouseout"});If&&Yh.forEach(function(T){"on"+T in If&&Yh.remove(T)});var Jf,ng=0;Wb.mouse=function(T){return ta(T,G())};var Ug=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;Wb.touch=function(T,la,ya){3>arguments.length&&(ya=la,la=G().changedTouches);if(la)for(var Ga=0,La=la.length,Pa;Ga<La;++Ga)if((Pa=la[Ga]).identifier===ya)return ta(T,
Pa)};Wb.behavior.drag=function(){function T(){this.on("mousedown.drag",La).on("touchstart.drag",Pa)}function la(cb,Ya,db,ob,wb){return function(){var Ib=Wb.event.target.correspondingElement||Wb.event.target,Nb=this.parentNode,Vb=ya.of(this,arguments),Xb=0,oc=cb(),yc=".drag"+(null==oc?"":"-"+oc),Fc=Wb.select(db(Ib)).on(ob+yc,function(){var nd=Ya(Nb,oc);if(nd){var lc=nd[0]-fd[0];var zc=nd[1]-fd[1];Xb|=lc|zc;fd=nd;Vb({type:"drag",x:nd[0]+hd[0],y:nd[1]+hd[1],dx:lc,dy:zc})}}).on(wb+yc,function(){Ya(Nb,
oc)&&(Fc.on(ob+yc,null).on(wb+yc,null),Xc(Xb),Vb({type:"dragend"}))}),Xc=ua(Ib),fd=Ya(Nb,oc);if(Ga){var hd=Ga.apply(this,arguments);hd=[hd.x-fd[0],hd.y-fd[1]]}else hd=[0,0];Vb({type:"dragstart"})}}var ya=I(T,"drag","dragstart","dragend"),Ga=null,La=la(z,Wb.mouse,n,"mousemove","mouseup"),Pa=la(oa,Wb.touch,x,"touchmove","touchend");T.origin=function(cb){if(!arguments.length)return Ga;Ga=cb;return T};return Wb.rebind(T,ya,"on")};Wb.touches=function(T,la){2>arguments.length&&(la=G().touches);return la?
Jg(la).map(function(ya){var Ga=ta(T,ya);Ga.identifier=ya.identifier;return Ga}):[]};var fe=Math.PI,yf=2*fe,Tg=yf-1E-6,qf=fe/2,ye=fe/180,lf=180/fe,aj=Math.SQRT2;Wb.interpolateZoom=function(T,la){var ya=T[0],Ga=T[1],La=T[2];T=la[2];var Pa=la[0]-ya,cb=la[1]-Ga,Ya=Pa*Pa+cb*cb;if(1E-12>Ya){var db=Math.log(T/La)/aj;T=function(Ib){return[ya+Ib*Pa,Ga+Ib*cb,La*Math.exp(aj*Ib*db)]}}else{var ob=Math.sqrt(Ya);la=(T*T-La*La+4*Ya)/(4*La*ob);T=(T*T-La*La-4*Ya)/(4*T*ob);var wb=Math.log(Math.sqrt(la*la+1)-la);db=
(Math.log(Math.sqrt(T*T+1)-T)-wb)/aj;T=function(Ib){Ib*=db;var Nb=za(wb),Vb=aj*Ib+wb;var Xb=((Vb=Math.exp(2*Vb))-1)/(Vb+1);var oc=wb;Vb=((oc=Math.exp(oc))-1/oc)/2;Xb=La/(2*ob)*(Nb*Xb-Vb);return[ya+Xb*Pa,Ga+Xb*cb,La*Nb/za(aj*Ib+wb)]}}T.duration=1E3*db;return T};Wb.behavior.zoom=function(){function T(ld){ld.on("mousedown.zoom",ob).on(lk+".zoom",Ib).on("dblclick.zoom",Nb).on("touchstart.zoom",wb)}function la(ld){return[(ld[0]-Vb.x)/Vb.k,(ld[1]-Vb.y)/Vb.k]}function ya(ld){Vb.k=Math.max(Xc[0],Math.min(Xc[1],
ld))}function Ga(ld,Yd){Yd=[Yd[0]*Vb.k+Vb.x,Yd[1]*Vb.k+Vb.y];Vb.x+=ld[0]-Yd[0];Vb.y+=ld[1]-Yd[1]}function La(ld,Yd,ie,qe){ld.__chart__={x:Vb.x,y:Vb.y,k:Vb.k};ya(Math.pow(2,qe));Ga(oc=Yd,ie);ld=Wb.select(ld);0<fd&&(ld=ld.transition().duration(fd));ld.call(T.event)}function Pa(){ud&&ud.domain($c.range().map(function(ld){return(ld-Vb.x)/Vb.k}).map($c.invert));yd&&yd.domain(vd.range().map(function(ld){return(ld-Vb.y)/Vb.k}).map(vd.invert))}function cb(ld){hd++||ld({type:"zoomstart"})}function Ya(ld){Pa();
ld({type:"zoom",scale:Vb.k,translate:[Vb.x,Vb.y]})}function db(ld){--hd||(ld({type:"zoomend"}),oc=null)}function ob(){var ld=this,Yd=zc.of(ld,arguments),ie=0,qe=Wb.select(n(ld)).on("mousemove.zoom",function(){ie=1;Ga(Wb.mouse(ld),Ae);Ya(Yd)}).on("mouseup.zoom",function(){qe.on("mousemove.zoom",null).on("mouseup.zoom",null);ze(ie);db(Yd)}),Ae=la(Wb.mouse(ld)),ze=ua(ld);Vf.call(ld);cb(Yd)}function wb(){function ld(){var nf=Wb.touches(Ae);bg=Vb.k;nf.forEach(function(Ze){Ze.identifier in Me&&(Me[Ze.identifier]=
la(Ze))});return nf}function Yd(){var nf=Wb.event.target;Wb.select(nf).on(Be,ie).on(wg,qe);Te.push(nf);nf=Wb.event.changedTouches;for(var Ze=0,Rg=nf.length;Ze<Rg;++Ze)Me[nf[Ze].identifier]=null;Ze=ld();Rg=Date.now();1===Ze.length?(500>Rg-lc&&(nf=Ze[0],La(Ae,nf,Me[nf.identifier],Math.floor(Math.log(Vb.k)/Math.LN2)+1),v()),lc=Rg):1<Ze.length&&(nf=Ze[0],Rg=Ze[1],Ze=nf[0]-Rg[0],nf=nf[1]-Rg[1],oe=Ze*Ze+nf*nf)}function ie(){var nf=Wb.touches(Ae),Ze;Vf.call(Ae);for(var Rg=0,ck=nf.length;Rg<ck;++Rg,Ze=null){var Ei=
nf[Rg];if(Ze=Me[Ei.identifier]){if(xj)break;var Yi=Ei;var xj=Ze}}if(Ze){var jj=(jj=Ei[0]-Yi[0])*jj+(jj=Ei[1]-Yi[1])*jj;nf=oe&&Math.sqrt(jj/oe);Yi=[(Yi[0]+Ei[0])/2,(Yi[1]+Ei[1])/2];xj=[(xj[0]+Ze[0])/2,(xj[1]+Ze[1])/2];ya(nf*bg)}lc=null;Ga(Yi,xj);Ya(ze)}function qe(){if(Wb.event.touches.length){for(var nf=Wb.event.changedTouches,Ze=0,Rg=nf.length;Ze<Rg;++Ze)delete Me[nf[Ze].identifier];for(var ck in Me)return void ld()}Wb.selectAll(Te).on(Ff,null);Yf.on("mousedown.zoom",ob).on("touchstart.zoom",wb);
Xf();db(ze)}var Ae=this,ze=zc.of(Ae,arguments),Me={},oe=0,bg,Ff=".zoom-"+Wb.event.changedTouches[0].identifier,Be="touchmove"+Ff,wg="touchend"+Ff,Te=[],Yf=Wb.select(Ae),Xf=ua(Ae);Yd();cb(ze);Yf.on("mousedown.zoom",null).on("touchstart.zoom",Yd)}function Ib(){var ld=zc.of(this,arguments);nd?clearTimeout(nd):(Vf.call(this),Xb=la(oc=yc||Wb.mouse(this)),cb(ld));nd=setTimeout(function(){nd=null;db(ld)},50);v();ya(Math.pow(2,.002*yk())*Vb.k);Ga(oc,Xb);Ya(ld)}function Nb(){var ld=Wb.mouse(this),Yd=Math.log(Vb.k)/
Math.LN2;La(this,ld,la(ld),Wb.event.shiftKey?Math.ceil(Yd)-1:Math.floor(Yd)+1)}var Vb={x:0,y:0,k:1},Xb,oc,yc,Fc=[960,500],Xc=xk,fd=250,hd=0,nd,lc,zc=I(T,"zoomstart","zoom","zoomend"),$c,ud,vd,yd;lk||(lk="onwheel"in If?(yk=function(){return-Wb.event.deltaY*(Wb.event.deltaMode?120:1)},"wheel"):"onmousewheel"in If?(yk=function(){return Wb.event.wheelDelta},"mousewheel"):(yk=function(){return-Wb.event.detail},"MozMousePixelScroll"));T.event=function(ld){ld.each(function(){var Yd=zc.of(this,arguments),
ie=Vb;Hg?Wb.select(this).transition().each("start.zoom",function(){Vb=this.__chart__||{x:0,y:0,k:1};cb(Yd)}).tween("zoom:zoom",function(){var qe=Fc[0],Ae=Fc[1],ze=oc?oc[0]:qe/2,Me=oc?oc[1]:Ae/2,oe=Wb.interpolateZoom([(ze-Vb.x)/Vb.k,(Me-Vb.y)/Vb.k,qe/Vb.k],[(ze-ie.x)/ie.k,(Me-ie.y)/ie.k,qe/ie.k]);return function(bg){bg=oe(bg);var Ff=qe/bg[2];this.__chart__=Vb={x:ze-bg[0]*Ff,y:Me-bg[1]*Ff,k:Ff};Ya(Yd)}}).each("interrupt.zoom",function(){db(Yd)}).each("end.zoom",function(){db(Yd)}):(this.__chart__=Vb,
cb(Yd),Ya(Yd),db(Yd))})};T.translate=function(ld){if(!arguments.length)return[Vb.x,Vb.y];Vb={x:+ld[0],y:+ld[1],k:Vb.k};Pa();return T};T.scale=function(ld){if(!arguments.length)return Vb.k;Vb={x:Vb.x,y:Vb.y,k:null};ya(+ld);Pa();return T};T.scaleExtent=function(ld){if(!arguments.length)return Xc;Xc=null==ld?xk:[+ld[0],+ld[1]];return T};T.center=function(ld){if(!arguments.length)return yc;yc=ld&&[+ld[0],+ld[1]];return T};T.size=function(ld){if(!arguments.length)return Fc;Fc=ld&&[+ld[0],+ld[1]];return T};
T.duration=function(ld){if(!arguments.length)return fd;fd=+ld;return T};T.x=function(ld){if(!arguments.length)return ud;ud=ld;$c=ld.copy();Vb={x:0,y:0,k:1};return T};T.y=function(ld){if(!arguments.length)return yd;yd=ld;vd=ld.copy();Vb={x:0,y:0,k:1};return T};return Wb.rebind(T,zc,"on")};var xk=[0,Infinity],yk,lk;Wb.color=Ca;Ca.prototype.toString=function(){return this.rgb()+""};Wb.hsl=Ka;var Dj=Ka.prototype=new Ca;Dj.brighter=function(T){T=Math.pow(.7,arguments.length?T:1);return new Ka(this.h,this.s,
this.l/T)};Dj.darker=function(T){T=Math.pow(.7,arguments.length?T:1);return new Ka(this.h,this.s,T*this.l)};Dj.rgb=function(){return Oa(this.h,this.s,this.l)};Wb.hcl=kb;var bj=kb.prototype=new Ca;bj.brighter=function(T){return new kb(this.h,this.c,Math.min(100,this.l+Oj*(arguments.length?T:1)))};bj.darker=function(T){return new kb(this.h,this.c,Math.max(0,this.l-Oj*(arguments.length?T:1)))};bj.rgb=function(){return mb(this.h,this.c,this.l).rgb()};Wb.lab=tb;var Oj=18,rk=.95047,ae=1,Ak=1.08883,Ag=tb.prototype=
new Ca;Ag.brighter=function(T){return new tb(Math.min(100,this.l+Oj*(arguments.length?T:1)),this.a,this.b)};Ag.darker=function(T){return new tb(Math.max(0,this.l-Oj*(arguments.length?T:1)),this.a,this.b)};Ag.rgb=function(){return nb(this.l,this.a,this.b)};Wb.rgb=Ea;var uh=Ea.prototype=new Ca;uh.brighter=function(T){T=Math.pow(.7,arguments.length?T:1);var la=this.r,ya=this.g,Ga=this.b;if(!la&&!ya&&!Ga)return new Ea(30,30,30);la&&30>la&&(la=30);ya&&30>ya&&(ya=30);Ga&&30>Ga&&(Ga=30);return new Ea(Math.min(255,
la/T),Math.min(255,ya/T),Math.min(255,Ga/T))};uh.darker=function(T){T=Math.pow(.7,arguments.length?T:1);return new Ea(T*this.r,T*this.g,T*this.b)};uh.hsl=function(){return ib(this.r,this.g,this.b)};uh.toString=function(){return"#"+Va(this.r)+Va(this.g)+Va(this.b)};var cj=Wb.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,
chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,
deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,
lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,
mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,
saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});cj.forEach(function(T,la){cj.set(T,new Ea(la>>16,la>>8&255,la&255))});Wb.functor=
Ba;Wb.xhr=Ma(x);Wb.dsv=function(T,la){function ya(ob,wb,Ib){3>arguments.length&&(Ib=wb,wb=null);var Nb=$a(ob,la,null==wb?Ga:La(wb),Ib);Nb.row=function(Vb){return arguments.length?Nb.response(null==(wb=Vb)?Ga:La(Vb)):wb};return Nb}function Ga(ob){return ya.parse(ob.responseText)}function La(ob){return function(wb){return ya.parse(wb.responseText,ob)}}function Pa(ob){return ob.map(cb).join(T)}function cb(ob){return Ya.test(ob)?'"'+ob.replace(/"/g,'""')+'"':ob}var Ya=new RegExp('["'+T+"\n]"),db=T.charCodeAt(0);
ya.parse=function(ob,wb){var Ib;return ya.parseRows(ob,function(Nb,Vb){if(Ib)return Ib(Nb,Vb-1);var Xb=new Function("d","return {"+Nb.map(function(oc,yc){return JSON.stringify(oc)+": d["+yc+"]"}).join(",")+"}");Ib=wb?function(oc,yc){return wb(Xb(oc),yc)}:Xb})};ya.parseRows=function(ob,wb){function Ib(){if(yc>=oc)return Vb;if(fd)return fd=!1,Nb;var nd=yc;if(34===ob.charCodeAt(nd)){for(var lc=nd;lc++<oc;)if(34===ob.charCodeAt(lc)){if(34!==ob.charCodeAt(lc+1))break;++lc}yc=lc+2;var zc=ob.charCodeAt(lc+
1);13===zc?(fd=!0,10===ob.charCodeAt(lc+2)&&++yc):10===zc&&(fd=!0);return ob.slice(nd+1,lc).replace(/""/g,'"')}for(;yc<oc;){zc=ob.charCodeAt(yc++);lc=1;if(10===zc)fd=!0;else if(13===zc)fd=!0,10===ob.charCodeAt(yc)&&(++yc,++lc);else if(zc!==db)continue;return ob.slice(nd,yc-lc)}return ob.slice(nd)}for(var Nb={},Vb={},Xb=[],oc=ob.length,yc=0,Fc=0,Xc,fd;(Xc=Ib())!==Vb;){for(var hd=[];Xc!==Nb&&Xc!==Vb;)hd.push(Xc),Xc=Ib();wb&&null==(hd=wb(hd,Fc++))||Xb.push(hd)}return Xb};ya.format=function(ob){if(Array.isArray(ob[0]))return ya.formatRows(ob);
var wb=new w,Ib=[];ob.forEach(function(Nb){for(var Vb in Nb)wb.has(Vb)||Ib.push(wb.add(Vb))});return[Ib.map(cb).join(T)].concat(ob.map(function(Nb){return Ib.map(function(Vb){return cb(Nb[Vb])}).join(T)})).join("\n")};ya.formatRows=function(ob){return ob.map(Pa).join("\n")};return ya};Wb.csv=Wb.dsv(",","text/csv");Wb.tsv=Wb.dsv("\t","text/tab-separated-values");var fk,mk,Lg,mf,dj=this[F(this,"requestAnimationFrame")]||function(T){setTimeout(T,17)};Wb.timer=function(){Ra.apply(this,arguments)};Wb.timer.flush=
function(){Xa();pb()};Wb.round=function(T,la){return la?Math.round(T*(la=Math.pow(10,la)))/la:Math.round(T)};var Ej="y z a f p n  m  k M G T P E Z Y".split(" ").map(function(T,la){var ya=Math.pow(10,3*pd(8-la));return{scale:8<la?function(Ga){return Ga/ya}:function(Ga){return Ga*ya},symbol:T}});Wb.formatPrefix=function(T,la){var ya=0;if(T=+T)0>T&&(T*=-1),la&&(T=Wb.round(T,vb(T,la))),ya=1+Math.floor(1E-12+Math.log(T)/Math.LN10),ya=Math.max(-24,Math.min(24,3*Math.floor((ya-1)/3)));return Ej[8+ya/3]};
var ri=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,pk=Wb.map({b:function(T){return T.toString(2)},c:function(T){return String.fromCharCode(T)},o:function(T){return T.toString(8)},x:function(T){return T.toString(16)},X:function(T){return T.toString(16).toUpperCase()},g:function(T,la){return T.toPrecision(la)},e:function(T,la){return T.toExponential(la)},f:function(T,la){return T.toFixed(la)},r:function(T,la){return(T=Wb.round(T,vb(T,la))).toFixed(Math.max(0,Math.min(20,
vb(T*(1+1E-15),la))))}}),be=Wb.time={},dg=Date;Zb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},
getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Uf.setUTCDate.apply(this._,arguments)},setDay:function(){Uf.setUTCDay.apply(this._,arguments)},setFullYear:function(){Uf.setUTCFullYear.apply(this._,arguments)},setHours:function(){Uf.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Uf.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Uf.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Uf.setUTCMonth.apply(this._,
arguments)},setSeconds:function(){Uf.setUTCSeconds.apply(this._,arguments)},setTime:function(){Uf.setTime.apply(this._,arguments)}};var Uf=Date.prototype;be.year=pc(function(T){T=be.day(T);T.setMonth(0,1);return T},function(T,la){T.setFullYear(T.getFullYear()+la)},function(T){return T.getFullYear()});be.years=be.year.range;be.years.utc=be.year.utc.range;be.day=pc(function(T){var la=new dg(2E3,0);la.setFullYear(T.getFullYear(),T.getMonth(),T.getDate());return la},function(T,la){T.setDate(T.getDate()+
la)},function(T){return T.getDate()-1});be.days=be.day.range;be.days.utc=be.day.utc.range;be.dayOfYear=function(T){var la=be.year(T);return Math.floor((T-la-6E4*(T.getTimezoneOffset()-la.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(T,la){la=7-la;var ya=be[T]=pc(function(Ga){(Ga=be.day(Ga)).setDate(Ga.getDate()-(Ga.getDay()+la)%7);return Ga},function(Ga,La){Ga.setDate(Ga.getDate()+7*Math.floor(La))},function(Ga){var La=be.year(Ga).getDay();
return Math.floor((be.dayOfYear(Ga)+(La+la)%7)/7)-(La!==la)});be[T+"s"]=ya.range;be[T+"s"].utc=ya.utc.range;be[T+"OfYear"]=function(Ga){var La=be.year(Ga).getDay();return Math.floor((be.dayOfYear(Ga)+(La+la)%7)/7)}});be.week=be.sunday;be.weeks=be.sunday.range;be.weeks.utc=be.sunday.utc.range;be.weekOfYear=be.sundayOfYear;var Fh={"-":"",_:" ",0:"0"},Vd=/^\s*\d+/,ve=/^%/;Wb.locale=function(T){return{numberFormat:zb(T),timeFormat:ed(T)}};var Zh=Wb.locale({decimal:".",thousands:",",grouping:[3],currency:["$",
""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});Wb.format=Zh.numberFormat;Wb.geo={};Eb.prototype={s:0,t:0,add:function(T){Lb(T,this.t,ui);Lb(ui.s,this.s,this);this.s?
this.t+=ui.t:this.s=ui.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ui=new Eb;Wb.geo.stream=function(T,la){if(T&&ej.hasOwnProperty(T.type))ej[T.type](T,la);else fc(T,la)};var ej={Feature:function(T,la){fc(T.geometry,la)},FeatureCollection:function(T,la){T=T.features;for(var ya=-1,Ga=T.length;++ya<Ga;)fc(T[ya].geometry,la)}},ph={Sphere:function(T,la){la.sphere()},Point:function(T,la){T=T.coordinates;la.point(T[0],T[1],T[2])},MultiPoint:function(T,la){for(var ya=T.coordinates,
Ga=-1,La=ya.length;++Ga<La;)T=ya[Ga],la.point(T[0],T[1],T[2])},LineString:function(T,la){Oc(T.coordinates,la,0)},MultiLineString:function(T,la){T=T.coordinates;for(var ya=-1,Ga=T.length;++ya<Ga;)Oc(T[ya],la,0)},Polygon:function(T,la){xc(T.coordinates,la)},MultiPolygon:function(T,la){T=T.coordinates;for(var ya=-1,Ga=T.length;++ya<Ga;)xc(T[ya],la)},GeometryCollection:function(T,la){T=T.geometries;for(var ya=-1,Ga=T.length;++ya<Ga;)fc(T[ya],la)}};Wb.geo.area=function(T){Uh=0;Wb.geo.stream(T,Bg);return Uh};
var Uh,Fj=new Eb,Bg={sphere:function(){Uh+=4*fe},point:z,lineStart:z,lineEnd:z,polygonStart:function(){Fj.reset();Bg.lineStart=Mc},polygonEnd:function(){var T=2*Fj;Uh+=0>T?4*fe+T:T;Bg.lineStart=Bg.lineEnd=Bg.point=z}};Wb.geo.bounds=function(){function T(lc,zc){fd.push(hd=[wb=lc,Nb=lc]);zc<Ib&&(Ib=zc);zc>Vb&&(Vb=zc)}function la(lc,zc){var $c=dd([lc*ye,zc*ye]);if(Fc){var ud=qd(Fc,$c);ud=qd([ud[1],-ud[0],0],ud);Fd(ud);ud=Od(ud);var vd=lc-Xb,yd=0<vd?1:-1,ld=ud[0]*lf*yd;vd=180<pd(vd);vd^(yd*Xb<ld&&ld<
yd*lc)?(zc=ud[1]*lf,zc>Vb&&(Vb=zc)):(ld=(ld+360)%360-180,vd^(yd*Xb<ld&&ld<yd*lc))?(zc=-ud[1]*lf,zc<Ib&&(Ib=zc)):(zc<Ib&&(Ib=zc),zc>Vb&&(Vb=zc));vd?lc<Xb?Ya(wb,lc)>Ya(wb,Nb)&&(Nb=lc):Ya(lc,Nb)>Ya(wb,Nb)&&(wb=lc):Nb>=wb?(lc<wb&&(wb=lc),lc>Nb&&(Nb=lc)):lc>Xb?Ya(wb,lc)>Ya(wb,Nb)&&(Nb=lc):Ya(lc,Nb)>Ya(wb,Nb)&&(wb=lc)}else T(lc,zc);Fc=$c;Xb=lc}function ya(){nd.point=la}function Ga(){hd[0]=wb;hd[1]=Nb;nd.point=T;Fc=null}function La(lc,zc){if(Fc){var $c=lc-Xb;Xc+=180<pd($c)?$c+(0<$c?360:-360):$c}else oc=
lc,yc=zc;Bg.point(lc,zc);la(lc,zc)}function Pa(){Bg.lineStart()}function cb(){La(oc,yc);Bg.lineEnd();1E-6<pd(Xc)&&(wb=-(Nb=180));hd[0]=wb;hd[1]=Nb;Fc=null}function Ya(lc,zc){return 0>(zc-=lc)?zc+360:zc}function db(lc,zc){return lc[0]-zc[0]}function ob(lc,zc){return zc[0]<=zc[1]?zc[0]<=lc&&lc<=zc[1]:lc<zc[0]||zc[1]<lc}var wb,Ib,Nb,Vb,Xb,oc,yc,Fc,Xc,fd,hd,nd={point:T,lineStart:ya,lineEnd:Ga,polygonStart:function(){nd.point=La;nd.lineStart=Pa;nd.lineEnd=cb;Xc=0;Bg.polygonStart()},polygonEnd:function(){Bg.polygonEnd();
nd.point=T;nd.lineStart=ya;nd.lineEnd=Ga;0>Fj?(wb=-(Nb=180),Ib=-(Vb=90)):1E-6<Xc?Vb=90:-1E-6>Xc&&(Ib=-90);hd[0]=wb;hd[1]=Nb}};return function(lc){Vb=Nb=-(wb=Ib=Infinity);fd=[];Wb.geo.stream(lc,nd);if(lc=fd.length){fd.sort(db);for(var zc=1,$c=fd[0],ud,vd=[$c];zc<lc;++zc)ud=fd[zc],ob(ud[0],$c)||ob(ud[1],$c)?(Ya($c[0],ud[1])>Ya($c[0],$c[1])&&($c[1]=ud[1]),Ya(ud[0],$c[1])>Ya($c[0],$c[1])&&($c[0]=ud[0])):vd.push($c=ud);var yd=-Infinity,ld;lc=vd.length-1;zc=0;for($c=vd[lc];zc<=lc;$c=ud,++zc)ud=vd[zc],(ld=
Ya($c[1],ud[0]))>yd&&(yd=ld,wb=ud[0],Nb=$c[1])}fd=hd=null;return Infinity===wb||Infinity===Ib?[[NaN,NaN],[NaN,NaN]]:[[wb,Ib],[Nb,Vb]]}}();Wb.geo.centroid=function(T){bf=zj=Ji=Ii=yg=Vg=fh=si=sj=fj=gh=0;Wb.geo.stream(T,Mg);T=sj;var la=fj,ya=gh,Ga=T*T+la*la+ya*ya;return 1E-12>Ga&&(T=Vg,la=fh,ya=si,1E-6>zj&&(T=Ji,la=Ii,ya=yg),Ga=T*T+la*la+ya*ya,1E-12>Ga)?[NaN,NaN]:[Math.atan2(la,T)*lf,pa(ya/Math.sqrt(Ga))*lf]};var bf,zj,Ji,Ii,yg,Vg,fh,si,sj,fj,gh,Mg={sphere:z,point:cd,lineStart:Nd,lineEnd:Pd,polygonStart:function(){Mg.lineStart=
Ke},polygonEnd:function(){Mg.lineStart=Nd}},gk=se(Wc,function(T){var la=NaN,ya=NaN,Ga=NaN,La;return{lineStart:function(){T.lineStart();La=1},point:function(Pa,cb){var Ya=0<Pa?fe:-fe,db=pd(Pa-la);if(1E-6>pd(db-fe))T.point(la,ya=0<(ya+cb)/2?qf:-qf),T.point(Ga,ya),T.lineEnd(),T.lineStart(),T.point(Ya,ya),T.point(Pa,ya),La=0;else if(Ga!==Ya&&db>=fe){1E-6>pd(la-Ga)&&(la-=1E-6*Ga);1E-6>pd(Pa-Ya)&&(Pa-=1E-6*Ya);db=la;var ob=ya,wb=Pa,Ib,Nb,Vb=Math.sin(db-wb);ya=1E-6<pd(Vb)?Math.atan((Math.sin(ob)*(Nb=Math.cos(cb))*
Math.sin(wb)-Math.sin(cb)*(Ib=Math.cos(ob))*Math.sin(db))/(Ib*Nb*Vb)):(ob+cb)/2;T.point(Ga,ya);T.lineEnd();T.lineStart();T.point(Ya,ya);La=0}T.point(la=Pa,ya=cb);Ga=Ya},lineEnd:function(){T.lineEnd();la=ya=NaN},clean:function(){return 2-La}}},function(T,la,ya,Ga){null==T?(ya*=qf,Ga.point(-fe,ya),Ga.point(0,ya),Ga.point(fe,ya),Ga.point(fe,0),Ga.point(fe,-ya),Ga.point(0,-ya),Ga.point(-fe,-ya),Ga.point(-fe,0),Ga.point(-fe,ya)):1E-6<pd(T[0]-la[0])?(T=T[0]<la[0]?fe:-fe,ya=ya*T/2,Ga.point(-T,ya),Ga.point(0,
ya),Ga.point(T,ya)):Ga.point(la[0],la[1])},[-fe,-fe/2]);Wb.geo.clipExtent=function(){var T,la,ya,Ga,La,Pa,cb={stream:function(Ya){La&&(La.valid=!1);La=Pa(Ya);La.valid=!0;return La},extent:function(Ya){if(!arguments.length)return[[T,la],[ya,Ga]];Pa=ke(T=+Ya[0][0],la=+Ya[0][1],ya=+Ya[1][0],Ga=+Ya[1][1]);La&&(La.valid=!1,La=null);return cb}};return cb.extent([[0,0],[960,500]])};(Wb.geo.conicEqualArea=function(){return Ce(sf)}).raw=sf;Wb.geo.albers=function(){return Wb.geo.conicEqualArea().rotate([96,
0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};Wb.geo.albersUsa=function(){function T(ob){var wb=ob[0];ob=ob[1];La=null;(cb(wb,ob),La)||(Ya(wb,ob),La)||db(wb,ob);return La}var la=Wb.geo.albers(),ya=Wb.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Ga=Wb.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),La,Pa={point:function(ob,wb){La=[ob,wb]}},cb,Ya,db;T.invert=function(ob){var wb=la.scale(),Ib=la.translate(),Nb=(ob[0]-Ib[0])/wb;wb=(ob[1]-
Ib[1])/wb;return(.12<=wb&&.234>wb&&-.425<=Nb&&-.214>Nb?ya:.166<=wb&&.234>wb&&-.214<=Nb&&-.115>Nb?Ga:la).invert(ob)};T.stream=function(ob){var wb=la.stream(ob),Ib=ya.stream(ob),Nb=Ga.stream(ob);return{point:function(Vb,Xb){wb.point(Vb,Xb);Ib.point(Vb,Xb);Nb.point(Vb,Xb)},sphere:function(){wb.sphere();Ib.sphere();Nb.sphere()},lineStart:function(){wb.lineStart();Ib.lineStart();Nb.lineStart()},lineEnd:function(){wb.lineEnd();Ib.lineEnd();Nb.lineEnd()},polygonStart:function(){wb.polygonStart();Ib.polygonStart();
Nb.polygonStart()},polygonEnd:function(){wb.polygonEnd();Ib.polygonEnd();Nb.polygonEnd()}}};T.precision=function(ob){if(!arguments.length)return la.precision();la.precision(ob);ya.precision(ob);Ga.precision(ob);return T};T.scale=function(ob){if(!arguments.length)return la.scale();la.scale(ob);ya.scale(.35*ob);Ga.scale(ob);return T.translate(la.translate())};T.translate=function(ob){if(!arguments.length)return la.translate();var wb=la.scale(),Ib=+ob[0],Nb=+ob[1];cb=la.translate(ob).clipExtent([[Ib-
.455*wb,Nb-.238*wb],[Ib+.455*wb,Nb+.238*wb]]).stream(Pa).point;Ya=ya.translate([Ib-.307*wb,Nb+.201*wb]).clipExtent([[Ib-.425*wb+1E-6,Nb+.12*wb+1E-6],[Ib-.214*wb-1E-6,Nb+.234*wb-1E-6]]).stream(Pa).point;db=Ga.translate([Ib-.205*wb,Nb+.212*wb]).clipExtent([[Ib-.214*wb+1E-6,Nb+.166*wb+1E-6],[Ib-.115*wb-1E-6,Nb+.234*wb-1E-6]]).stream(Pa).point;return T};return T.scale(1070)};var Zi,mj,Ki={point:z,lineStart:z,lineEnd:z,polygonStart:function(){mj=0;Ki.lineStart=Ve},polygonEnd:function(){Ki.lineStart=Ki.lineEnd=
Ki.point=z;Zi+=pd(mj/2)}},Aj,Pj,Qj,nj,Rj={point:function(T,la){T<Aj&&(Aj=T);T>Qj&&(Qj=T);la<Pj&&(Pj=la);la>nj&&(nj=la)},lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z},qh={point:Wa,lineStart:Hb,lineEnd:Cb,polygonStart:function(){qh.lineStart=Sb},polygonEnd:function(){qh.point=Wa;qh.lineStart=Hb;qh.lineEnd=Cb}};Wb.geo.path=function(){function T(db){db&&("function"===typeof ya&&cb.pointRadius(+ya.apply(this,arguments)),Ya&&Ya.valid||(Ya=Pa(cb)),Wb.geo.stream(db,Ya));return cb.result()}function la(){Ya=
null;return T}var ya=4.5,Ga,La,Pa,cb,Ya;T.area=function(db){Zi=0;Wb.geo.stream(db,Pa(Ki));return Zi};T.centroid=function(db){Ji=Ii=yg=Vg=fh=si=sj=fj=gh=0;Wb.geo.stream(db,Pa(qh));return gh?[sj/gh,fj/gh]:si?[Vg/si,fh/si]:yg?[Ji/yg,Ii/yg]:[NaN,NaN]};T.bounds=function(db){Qj=nj=-(Aj=Pj=Infinity);Wb.geo.stream(db,Pa(Rj));return[[Aj,Pj],[Qj,nj]]};T.projection=function(db){if(!arguments.length)return Ga;Pa=(Ga=db)?db.stream||mc(db):x;return la()};T.context=function(db){if(!arguments.length)return La;cb=
null==(La=db)?new tf:new Ec(db);"function"!==typeof ya&&cb.pointRadius(ya);return la()};T.pointRadius=function(db){if(!arguments.length)return ya;ya="function"===typeof db?db:(cb.pointRadius(+db),+db);return T};return T.projection(Wb.geo.albersUsa()).context(null)};Wb.geo.transform=function(T){return{stream:function(la){la=new Sc(la);for(var ya in T)la[ya]=T[ya];return la}}};Sc.prototype={point:function(T,la){this.stream.point(T,la)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},
lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};Wb.geo.projection=Ad;Wb.geo.projectionMutator=Qb;(Wb.geo.equirectangular=function(){return Ad(Qc)}).raw=Qc.invert=Qc;Wb.geo.rotation=function(T){function la(ya){ya=T(ya[0]*ye,ya[1]*ye);return ya[0]*=lf,ya[1]*=lf,ya}T=Uc(T[0]%360*ye,T[1]*ye,2<T.length?T[2]*ye:0);la.invert=function(ya){ya=T.invert(ya[0]*ye,ya[1]*ye);return ya[0]*=lf,ya[1]*=lf,ya};return la};
gd.invert=Qc;Wb.geo.circle=function(){function T(){var Pa="function"===typeof la?la.apply(this,arguments):la,cb=Uc(-Pa[0]*ye,-Pa[1]*ye,0).invert,Ya=[];La(null,null,1,{point:function(db,ob){Ya.push(db=cb(db,ob));db[0]*=lf;db[1]*=lf}});return{type:"Polygon",coordinates:[Ya]}}var la=[0,0],ya,Ga=6,La;T.origin=function(Pa){if(!arguments.length)return la;la=Pa;return T};T.angle=function(Pa){if(!arguments.length)return ya;La=Dc((ya=+Pa)*ye,Ga*ye);return T};T.precision=function(Pa){if(!arguments.length)return Ga;
La=Dc(ya*ye,(Ga=+Pa)*ye);return T};return T.angle(90)};Wb.geo.distance=function(T,la){var ya=(la[0]-T[0])*ye,Ga=T[1]*ye,La=la[1]*ye;la=Math.cos(ya);T=Math.sin(Ga);Ga=Math.cos(Ga);var Pa=Math.sin(La);La=Math.cos(La);var cb;return Math.atan2(Math.sqrt((cb=La*Math.sin(ya))*cb+(cb=Ga*Pa-T*La*la)*cb),T*Pa+Ga*La*la)};Wb.geo.graticule=function(){function T(){return{type:"MultiLineString",coordinates:la()}}function la(){return Wb.range(Math.ceil(Pa/Nb)*Nb,La,Nb).map(yc).concat(Wb.range(Math.ceil(ob/Vb)*Vb,
db,Vb).map(Fc)).concat(Wb.range(Math.ceil(Ga/wb)*wb,ya,wb).filter(function(fd){return 1E-6<pd(fd%Nb)}).map(Xb)).concat(Wb.range(Math.ceil(Ya/Ib)*Ib,cb,Ib).filter(function(fd){return 1E-6<pd(fd%Vb)}).map(oc))}var ya,Ga,La,Pa,cb,Ya,db,ob,wb=10,Ib=wb,Nb=90,Vb=360,Xb,oc,yc,Fc,Xc=2.5;T.lines=function(){return la().map(function(fd){return{type:"LineString",coordinates:fd}})};T.outline=function(){return{type:"Polygon",coordinates:[yc(Pa).concat(Fc(db).slice(1),yc(La).reverse().slice(1),Fc(ob).reverse().slice(1))]}};
T.extent=function(fd){return arguments.length?T.majorExtent(fd).minorExtent(fd):T.minorExtent()};T.majorExtent=function(fd){if(!arguments.length)return[[Pa,ob],[La,db]];Pa=+fd[0][0];La=+fd[1][0];ob=+fd[0][1];db=+fd[1][1];Pa>La&&(fd=Pa,Pa=La,La=fd);ob>db&&(fd=ob,ob=db,db=fd);return T.precision(Xc)};T.minorExtent=function(fd){if(!arguments.length)return[[Ga,Ya],[ya,cb]];Ga=+fd[0][0];ya=+fd[1][0];Ya=+fd[0][1];cb=+fd[1][1];Ga>ya&&(fd=Ga,Ga=ya,ya=fd);Ya>cb&&(fd=Ya,Ya=cb,cb=fd);return T.precision(Xc)};
T.step=function(fd){return arguments.length?T.majorStep(fd).minorStep(fd):T.minorStep()};T.majorStep=function(fd){if(!arguments.length)return[Nb,Vb];Nb=+fd[0];Vb=+fd[1];return T};T.minorStep=function(fd){if(!arguments.length)return[wb,Ib];wb=+fd[0];Ib=+fd[1];return T};T.precision=function(fd){if(!arguments.length)return Xc;Xc=+fd;Xb=wc(Ya,cb,90);oc=od(Ga,ya,Xc);yc=wc(ob,db,90);Fc=od(Pa,La,Xc);return T};return T.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};
Wb.geo.greatArc=function(){function T(){return{type:"LineString",coordinates:[ya||la.apply(this,arguments),La||Ga.apply(this,arguments)]}}var la=Dd,ya,Ga=Ld,La;T.distance=function(){return Wb.geo.distance(ya||la.apply(this,arguments),La||Ga.apply(this,arguments))};T.source=function(Pa){if(!arguments.length)return la;la=Pa;ya="function"===typeof Pa?null:Pa;return T};T.target=function(Pa){if(!arguments.length)return Ga;Ga=Pa;La="function"===typeof Pa?null:Pa;return T};T.precision=function(){return arguments.length?
T:0};return T};Wb.geo.interpolate=function(T,la){return Jd(T[0]*ye,T[1]*ye,la[0]*ye,la[1]*ye)};Wb.geo.length=function(T){oj=0;Wb.geo.stream(T,Sj);return oj};var oj,Sj={sphere:z,point:z,lineStart:function(){function T(La,Pa){var cb=Math.sin(Pa*=ye);Pa=Math.cos(Pa);var Ya=pd((La*=ye)-la),db=Math.cos(Ya);oj+=Math.atan2(Math.sqrt((Ya=Pa*Math.sin(Ya))*Ya+(Ya=Ga*cb-ya*Pa*db)*Ya),ya*cb+Ga*Pa*db);la=La;ya=cb;Ga=Pa}var la,ya,Ga;Sj.point=function(La,Pa){la=La*ye;ya=Math.sin(Pa*=ye);Ga=Math.cos(Pa);Sj.point=
T};Sj.lineEnd=function(){Sj.point=Sj.lineEnd=z}},lineEnd:z,polygonStart:z,polygonEnd:z},Li=Hd(function(T){return Math.sqrt(2/(1+T))},function(T){return 2*Math.asin(T/2)});(Wb.geo.azimuthalEqualArea=function(){return Ad(Li)}).raw=Li;var Mk=Hd(function(T){return(T=Math.acos(T))&&T/Math.sin(T)},x);(Wb.geo.azimuthalEquidistant=function(){return Ad(Mk)}).raw=Mk;(Wb.geo.conicConformal=function(){return Ce(Ie)}).raw=Ie;(Wb.geo.conicEquidistant=function(){return Ce(Ge)}).raw=Ge;var Qk=Hd(function(T){return 1/
T},Math.atan);(Wb.geo.gnomonic=function(){return Ad(Qk)}).raw=Qk;Se.invert=function(T,la){return[T,2*Math.atan(Math.exp(la))-qf]};(Wb.geo.mercator=function(){return xe(Se)}).raw=Se;var Bk=Hd(function(){return 1},Math.asin);(Wb.geo.orthographic=function(){return Ad(Bk)}).raw=Bk;var tj=Hd(function(T){return 1/(1+T)},function(T){return 2*Math.atan(T)});(Wb.geo.stereographic=function(){return Ad(tj)}).raw=tj;Oe.invert=function(T,la){return[-la,2*Math.atan(Math.exp(T))-qf]};(Wb.geo.transverseMercator=
function(){var T=xe(Oe),la=T.center,ya=T.rotate;T.center=function(Ga){return Ga?la([-Ga[1],Ga[0]]):(Ga=la(),[Ga[1],-Ga[0]])};T.rotate=function(Ga){return Ga?ya([Ga[0],Ga[1],2<Ga.length?Ga[2]+90:90]):(Ga=ya(),[Ga[0],Ga[1],Ga[2]-90])};return ya([0,0,90])}).raw=Oe;Wb.geom={};Wb.geom.hull=function(T){function la(La){if(3>La.length)return[];var Pa=Ba(ya),cb=Ba(Ga),Ya,db=La.length,ob=[],wb=[];for(Ya=0;Ya<db;Ya++)ob.push([+Pa.call(this,La[Ya],Ya),+cb.call(this,La[Ya],Ya),Ya]);ob.sort(Pi);for(Ya=0;Ya<db;Ya++)wb.push([ob[Ya][0],
-ob[Ya][1]]);Pa=jh(ob);wb=jh(wb);cb=wb[0]===Pa[0];db=wb[wb.length-1]===Pa[Pa.length-1];var Ib=[];for(Ya=Pa.length-1;0<=Ya;--Ya)Ib.push(La[ob[Pa[Ya]][2]]);for(Ya=+cb;Ya<wb.length-db;++Ya)Ib.push(La[ob[wb[Ya]][2]]);return Ib}var ya=hf,Ga=Qf;if(arguments.length)return la(T);la.x=function(La){return arguments.length?(ya=La,la):ya};la.y=function(La){return arguments.length?(Ga=La,la):Ga};return la};Wb.geom.polygon=function(T){Pe(T,Gj);return T};var Gj=Wb.geom.polygon.prototype=[];Gj.area=function(){for(var T=
-1,la=this.length,ya,Ga=this[la-1],La=0;++T<la;)ya=Ga,Ga=this[T],La+=ya[1]*Ga[0]-ya[0]*Ga[1];return.5*La};Gj.centroid=function(T){var la=-1,ya=this.length,Ga=0,La=0,Pa=this[ya-1];for(arguments.length||(T=-1/(6*this.area()));++la<ya;){var cb=Pa;Pa=this[la];var Ya=cb[0]*Pa[1]-Pa[0]*cb[1];Ga+=(cb[0]+Pa[0])*Ya;La+=(cb[1]+Pa[1])*Ya}return[Ga*T,La*T]};Gj.clip=function(T){for(var la,ya=zi(T),Ga=-1,La=this.length-zi(this),Pa,cb,Ya=this[La-1],db,ob,wb;++Ga<La;){la=T.slice();T.length=0;db=this[Ga];ob=la[(cb=
la.length-ya)-1];for(Pa=-1;++Pa<cb;)wb=la[Pa],di(wb,Ya,db)?(di(ob,Ya,db)||T.push(Wf(ob,wb,Ya,db)),T.push(wb)):di(ob,Ya,db)&&T.push(Wf(ob,wb,Ya,db)),ob=wb;ya&&T.push(T[0]);Ya=db}return T};var vi,Mi,Tj,Rk=[],$f,hk,Sk=[];ig.prototype.prepare=function(){for(var T=this.edges,la=T.length,ya;la--;)ya=T[la].edge,ya.b&&ya.a||T.splice(la,1);T.sort(Jh);return T.length};ii.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:
this.edge.a}};Ue.prototype={insert:function(T,la){var ya;if(T){la.P=T;if(la.N=T.N)T.N.P=la;T.N=la;if(T.R){for(T=T.R;T.L;)T=T.L;T.L=la}else T.R=la;var Ga=T}else this._?(T=gj(this._),la.P=null,la.N=T,T.P=T.L=la,Ga=T):(la.P=la.N=null,this._=la,Ga=null);la.L=la.R=null;la.U=Ga;la.C=!0;for(T=la;Ga&&Ga.C;)la=Ga.U,Ga===la.L?(ya=la.R)&&ya.C?(Ga.C=ya.C=!1,la.C=!0,T=la):(T===Ga.R&&(ji(this,Ga),T=Ga,Ga=T.U),Ga.C=!1,la.C=!0,ki(this,la)):(ya=la.L)&&ya.C?(Ga.C=ya.C=!1,la.C=!0,T=la):(T===Ga.L&&(ki(this,Ga),T=Ga,
Ga=T.U),Ga.C=!1,la.C=!0,ji(this,la)),Ga=T.U;this._.C=!1},remove:function(T){T.N&&(T.N.P=T.P);T.P&&(T.P.N=T.N);T.N=T.P=null;var la=T.U,ya=T.L,Ga=T.R;var La=ya?Ga?gj(Ga):ya:Ga;la?la.L===T?la.L=La:la.R=La:this._=La;if(ya&&Ga){var Pa=La.C;La.C=T.C;La.L=ya;ya.U=La;La!==Ga?(la=La.U,La.U=T.U,T=La.R,la.L=T,La.R=Ga,Ga.U=La):(La.U=la,la=La,T=La.R)}else Pa=T.C,T=La;T&&(T.U=la);if(!Pa)if(T&&T.C)T.C=!1;else{do{if(T===this._)break;if(T===la.L){if(T=la.R,T.C&&(T.C=!1,la.C=!0,ji(this,la),T=la.R),T.L&&T.L.C||T.R&&
T.R.C){T.R&&T.R.C||(T.L.C=!1,T.C=!0,ki(this,T),T=la.R);T.C=la.C;la.C=T.R.C=!1;ji(this,la);T=this._;break}}else if(T=la.L,T.C&&(T.C=!1,la.C=!0,ki(this,la),T=la.L),T.L&&T.L.C||T.R&&T.R.C){T.L&&T.L.C||(T.R.C=!1,T.C=!0,ji(this,T),T=la.L);T.C=la.C;la.C=T.L.C=!1;ki(this,la);T=this._;break}T.C=!0;T=la;la=la.U}while(!T.C);T&&(T.C=!1)}}};Wb.geom.voronoi=function(T){function la(db){var ob=Array(db.length),wb=Ya[0][0],Ib=Ya[0][1],Nb=Ya[1][0],Vb=Ya[1][1];li(ya(db),Ya).cells.forEach(function(Xb,oc){var yc=Xb.edges;
Xb=Xb.site;(ob[oc]=yc.length?yc.map(function(Fc){Fc=Fc.start();return[Fc.x,Fc.y]}):Xb.x>=wb&&Xb.x<=Nb&&Xb.y>=Ib&&Xb.y<=Vb?[[wb,Vb],[Nb,Vb],[Nb,Ib],[wb,Ib]]:[]).point=db[oc]});return ob}function ya(db){return db.map(function(ob,wb){return{x:1E-6*Math.round(Pa(ob,wb)/1E-6),y:1E-6*Math.round(cb(ob,wb)/1E-6),i:wb}})}var Ga=hf,La=Qf,Pa=Ga,cb=La,Ya=Hk;if(T)return la(T);la.links=function(db){return li(ya(db)).edges.filter(function(ob){return ob.l&&ob.r}).map(function(ob){return{source:db[ob.l.i],target:db[ob.r.i]}})};
la.triangles=function(db){var ob=[];li(ya(db)).cells.forEach(function(wb,Ib){var Nb=wb.site;wb=wb.edges.sort(Jh);var Vb=-1,Xb=wb.length,oc=wb[Xb-1].edge;for(oc=oc.l===Nb?oc.r:oc.l;++Vb<Xb;){var yc=oc;oc=wb[Vb].edge;oc=oc.l===Nb?oc.r:oc.l;Ib<yc.i&&Ib<oc.i&&0>(Nb.x-oc.x)*(yc.y-Nb.y)-(Nb.x-yc.x)*(oc.y-Nb.y)&&ob.push([db[Ib],db[yc.i],db[oc.i]])}});return ob};la.x=function(db){return arguments.length?(Pa=Ba(Ga=db),la):Ga};la.y=function(db){return arguments.length?(cb=Ba(La=db),la):La};la.clipExtent=function(db){if(!arguments.length)return Ya===
Hk?null:Ya;Ya=null==db?Hk:db;return la};la.size=function(db){return arguments.length?la.clipExtent(db&&[[0,0],db]):Ya===Hk?null:Ya&&Ya[1]};return la};var Hk=[[-1E6,-1E6],[1E6,1E6]];Wb.geom.delaunay=function(T){return Wb.geom.voronoi().triangles(T)};Wb.geom.quadtree=function(T,la,ya,Ga,La){function Pa(ob){function wb(ud,vd,yd,ld,Yd,ie,qe,Ae){if(!isNaN(yd)&&!isNaN(ld))if(ud.leaf){var ze=ud.x,Me=ud.y;if(null!=ze){if(!(.01>pd(ze-yd)+pd(Me-ld))){var oe=ud.point;ud.x=ud.y=ud.point=null;Ib(ud,oe,ze,Me,Yd,
ie,qe,Ae)}Ib(ud,vd,yd,ld,Yd,ie,qe,Ae)}else ud.x=yd,ud.y=ld,ud.point=vd}else Ib(ud,vd,yd,ld,Yd,ie,qe,Ae)}function Ib(ud,vd,yd,ld,Yd,ie,qe,Ae){var ze=.5*(Yd+qe),Me=.5*(ie+Ae),oe=yd>=ze,bg=ld>=Me,Ff=bg<<1|oe;ud.leaf=!1;ud=ud.nodes[Ff]||(ud.nodes[Ff]=Jj());oe?Yd=ze:qe=ze;bg?ie=Me:Ae=Me;wb(ud,vd,yd,ld,Yd,ie,qe,Ae)}var Nb=Ba(cb),Vb=Ba(Ya),Xb;if(null!=la){var oc=la;var yc=ya;var Fc=Ga;var Xc=La}else{Fc=Xc=-(oc=yc=Infinity);var fd=[];var hd=[];var nd=ob.length;if(db)for(Xb=0;Xb<nd;++Xb){var lc=ob[Xb];lc.x<
oc&&(oc=lc.x);lc.y<yc&&(yc=lc.y);lc.x>Fc&&(Fc=lc.x);lc.y>Xc&&(Xc=lc.y);fd.push(lc.x);hd.push(lc.y)}else for(Xb=0;Xb<nd;++Xb){var zc=+Nb(lc=ob[Xb],Xb);lc=+Vb(lc,Xb);zc<oc&&(oc=zc);lc<yc&&(yc=lc);zc>Fc&&(Fc=zc);lc>Xc&&(Xc=lc);fd.push(zc);hd.push(lc)}}zc=Fc-oc;lc=Xc-yc;zc>lc?Xc=yc+zc:Fc=oc+lc;var $c=Jj();$c.add=function(ud){wb($c,ud,+Nb(ud,++Xb),+Vb(ud,Xb),oc,yc,Fc,Xc)};$c.visit=function(ud){Bi(ud,$c,oc,yc,Fc,Xc)};$c.find=function(ud){return ak($c,ud[0],ud[1],oc,yc,Fc,Xc)};Xb=-1;if(null==la){for(;++Xb<
nd;)wb($c,ob[Xb],fd[Xb],hd[Xb],oc,yc,Fc,Xc);--Xb}else ob.forEach($c.add);fd=hd=ob=lc=null;return $c}var cb=hf,Ya=Qf,db;if(db=arguments.length)return cb=Kj,Ya=vf,3===db&&(La=ya,Ga=la,ya=la=0),Pa(T);Pa.x=function(ob){return arguments.length?(cb=ob,Pa):cb};Pa.y=function(ob){return arguments.length?(Ya=ob,Pa):Ya};Pa.extent=function(ob){if(!arguments.length)return null==la?null:[[la,ya],[Ga,La]];null==ob?la=ya=Ga=La=null:(la=+ob[0][0],ya=+ob[0][1],Ga=+ob[1][0],La=+ob[1][1]);return Pa};Pa.size=function(ob){if(!arguments.length)return null==
la?null:[Ga-la,La-ya];null==ob?la=ya=Ga=La=null:(la=ya=0,Ga=+ob[0],La=+ob[1]);return Pa};return Pa};Wb.interpolateRgb=mi;Wb.interpolateObject=Nh;Wb.interpolateNumber=Fg;Wb.interpolateString=sg;var Uj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pj=new RegExp(Uj.source,"g");Wb.interpolate=tg;Wb.interpolators=[function(T,la){var ya=typeof la;return("string"===ya?cj.has(la.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(la)?mi:sg:la instanceof Ca?mi:Array.isArray(la)?Ci:"object"===ya&&isNaN(la)?Nh:Fg)(T,la)}];
Wb.interpolateArray=Ci;var cl=function(){return x},Vj=Wb.map({linear:cl,poly:function(T){return function(la){return Math.pow(la,T)}},quad:function(){return vg},cubic:function(){return Ye},sin:function(){return xh},exp:function(){return ni},circle:function(){return Qi},elastic:function(T,la){2>arguments.length&&(la=.45);if(arguments.length)var ya=la/yf*Math.asin(1/T);else T=1,ya=la/4;return function(Ga){return 1+T*Math.pow(2,-10*Ga)*Math.sin((Ga-ya)*yf/la)}},back:function(T){T||(T=1.70158);return function(la){return la*
la*((T+1)*la-T)}},bounce:function(){return hj}}),ll=Wb.map({"in":x,out:Oh,"in-out":kh,"out-in":function(T){return kh(Oh(T))}});Wb.ease=function(T){var la=T.indexOf("-"),ya=0<=la?T.slice(0,la):T;la=0<=la?T.slice(la+1):"in";ya=Vj.get(ya)||cl;la=ll.get(la)||x;return jf(la(ya.apply(null,Xj.call(arguments,1))))};Wb.interpolateHcl=function(T,la){T=Wb.hcl(T);la=Wb.hcl(la);var ya=T.h,Ga=T.c,La=T.l,Pa=la.h-ya,cb=la.c-Ga,Ya=la.l-La;isNaN(cb)&&(cb=0,Ga=isNaN(Ga)?la.c:Ga);isNaN(Pa)?(Pa=0,ya=isNaN(ya)?la.h:ya):
180<Pa?Pa-=360:-180>Pa&&(Pa+=360);return function(db){return mb(ya+Pa*db,Ga+cb*db,La+Ya*db)+""}};Wb.interpolateHsl=function(T,la){T=Wb.hsl(T);la=Wb.hsl(la);var ya=T.h,Ga=T.s,La=T.l,Pa=la.h-ya,cb=la.s-Ga,Ya=la.l-La;isNaN(cb)&&(cb=0,Ga=isNaN(Ga)?la.s:Ga);isNaN(Pa)?(Pa=0,ya=isNaN(ya)?la.h:ya):180<Pa?Pa-=360:-180>Pa&&(Pa+=360);return function(db){return Oa(ya+Pa*db,Ga+cb*db,La+Ya*db)+""}};Wb.interpolateLab=function(T,la){T=Wb.lab(T);la=Wb.lab(la);var ya=T.l,Ga=T.a,La=T.b,Pa=la.l-ya,cb=la.a-Ga,Ya=la.b-
La;return function(db){return nb(ya+Pa*db,Ga+cb*db,La+Ya*db)+""}};Wb.interpolateRound=Gg;Wb.transform=function(T){var la=If.createElementNS(Wb.ns.prefix.svg,"g");return(Wb.transform=function(ya){if(null!=ya){la.setAttribute("transform",ya);var Ga=la.transform.baseVal.consolidate()}return new Di(Ga?Ga.matrix:Ik)})(T)};Di.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ik={a:1,b:0,c:0,d:1,e:0,f:0};Wb.interpolateTransform=
jg;Wb.layout={};Wb.layout.bundle=function(){return function(T){for(var la=[],ya=-1,Ga=T.length;++ya<Ga;){var La=la,Pa=La.push,cb=T[ya],Ya=cb.source;cb=cb.target;var db=cb;if(Ya===db)var ob=Ya;else{ob=Pg(Ya);db=Pg(db);for(var wb=ob.pop(),Ib=db.pop(),Nb=null;wb===Ib;)Nb=wb,wb=ob.pop(),Ib=db.pop();ob=Nb}for(db=[Ya];Ya!==ob;)Ya=Ya.parent,db.push(Ya);for(Ya=db.length;cb!==ob;)db.splice(Ya,0,cb),cb=cb.parent;Pa.call(La,db)}return la}};Wb.layout.chord=function(){function T(){var Ib={},Nb=[],Vb=Wb.range(cb),
Xb=[],oc,yc;Ga=[];La=[];var Fc=0;for(oc=-1;++oc<cb;){var Xc=0;for(yc=-1;++yc<cb;)Xc+=Pa[oc][yc];Nb.push(Xc);Xb.push(Wb.range(cb));Fc+=Xc}db&&Vb.sort(function(ud,vd){return db(Nb[ud],Nb[vd])});ob&&Xb.forEach(function(ud,vd){ud.sort(function(yd,ld){return ob(Pa[vd][yd],Pa[vd][ld])})});Fc=(yf-Ya*cb)/Fc;Xc=0;for(oc=-1;++oc<cb;){var fd=Xc;for(yc=-1;++yc<cb;){var hd=Vb[oc],nd=Xb[hd][yc],lc=Pa[hd][nd],zc=Xc,$c=Xc+=lc*Fc;Ib[hd+"-"+nd]={index:hd,subindex:nd,startAngle:zc,endAngle:$c,value:lc}}La[hd]={index:hd,
startAngle:fd,endAngle:Xc,value:Nb[hd]};Xc+=Ya}for(oc=-1;++oc<cb;)for(yc=oc-1;++yc<cb;)Vb=Ib[oc+"-"+yc],Xb=Ib[yc+"-"+oc],(Vb.value||Xb.value)&&Ga.push(Vb.value<Xb.value?{source:Xb,target:Vb}:{source:Vb,target:Xb});wb&&la()}function la(){Ga.sort(function(Ib,Nb){return wb((Ib.source.value+Ib.target.value)/2,(Nb.source.value+Nb.target.value)/2)})}var ya={},Ga,La,Pa,cb,Ya=0,db,ob,wb;ya.matrix=function(Ib){if(!arguments.length)return Pa;cb=(Pa=Ib)&&Pa.length;Ga=La=null;return ya};ya.padding=function(Ib){if(!arguments.length)return Ya;
Ya=Ib;Ga=La=null;return ya};ya.sortGroups=function(Ib){if(!arguments.length)return db;db=Ib;Ga=La=null;return ya};ya.sortSubgroups=function(Ib){if(!arguments.length)return ob;ob=Ib;Ga=null;return ya};ya.sortChords=function(Ib){if(!arguments.length)return wb;wb=Ib;Ga&&la();return ya};ya.chords=function(){Ga||T();return Ga};ya.groups=function(){La||T();return La};return ya};Wb.layout.force=function(){function T(hd){return function(nd,lc,zc,$c){if(nd.point!==hd){zc=nd.cx-hd.x;var ud=nd.cy-hd.y;lc=$c-
lc;$c=zc*zc+ud*ud;if(lc*lc/Xb<$c)return $c<Nb&&(lc=nd.charge/$c,hd.px-=zc*lc,hd.py-=ud*lc),!0;nd.point&&$c&&$c<Nb&&(lc=nd.pointCharge/$c,hd.px-=zc*lc,hd.py-=ud*lc)}return!nd.charge}}function la(hd){hd.px=Wb.event.x;hd.py=Wb.event.y;ya.resume()}var ya={},Ga=Wb.dispatch("start","tick","end"),La,Pa=[1,1],cb,Ya,db=.9,ob=ml,wb=Nk,Ib=-30,Nb=Hj,Vb=.1,Xb=.64,oc=[],yc=[],Fc,Xc,fd;ya.tick=function(){if(.005>(Ya*=.99))return La=null,Ga.end({type:"end",alpha:Ya=0}),!0;var hd=oc.length,nd=yc.length,lc,zc;for(lc=
0;lc<nd;++lc){var $c=yc[lc];var ud=$c.source;var vd=$c.target;var yd=vd.x-ud.x;var ld=vd.y-ud.y;if(zc=yd*yd+ld*ld)zc=Ya*Xc[lc]*((zc=Math.sqrt(zc))-Fc[lc])/zc,yd*=zc,ld*=zc,vd.x-=yd*(zc=ud.weight+vd.weight?ud.weight/(ud.weight+vd.weight):.5),vd.y-=ld*zc,ud.x+=yd*(zc=1-zc),ud.y+=ld*zc}if(zc=Ya*Vb)if(yd=Pa[0]/2,ld=Pa[1]/2,lc=-1,zc)for(;++lc<hd;)$c=oc[lc],$c.x+=(yd-$c.x)*zc,$c.y+=(ld-$c.y)*zc;if(Ib)for(kg(nd=Wb.geom.quadtree(oc),Ya,fd),lc=-1;++lc<hd;)($c=oc[lc]).fixed||nd.visit(T($c));for(lc=-1;++lc<
hd;)$c=oc[lc],$c.fixed?($c.x=$c.px,$c.y=$c.py):($c.x-=($c.px-($c.px=$c.x))*db,$c.y-=($c.py-($c.py=$c.y))*db);Ga.tick({type:"tick",alpha:Ya})};ya.nodes=function(hd){if(!arguments.length)return oc;oc=hd;return ya};ya.links=function(hd){if(!arguments.length)return yc;yc=hd;return ya};ya.size=function(hd){if(!arguments.length)return Pa;Pa=hd;return ya};ya.linkDistance=function(hd){if(!arguments.length)return ob;ob="function"===typeof hd?hd:+hd;return ya};ya.distance=ya.linkDistance;ya.linkStrength=function(hd){if(!arguments.length)return wb;
wb="function"===typeof hd?hd:+hd;return ya};ya.friction=function(hd){if(!arguments.length)return db;db=+hd;return ya};ya.charge=function(hd){if(!arguments.length)return Ib;Ib="function"===typeof hd?hd:+hd;return ya};ya.chargeDistance=function(hd){if(!arguments.length)return Math.sqrt(Nb);Nb=hd*hd;return ya};ya.gravity=function(hd){if(!arguments.length)return Vb;Vb=+hd;return ya};ya.theta=function(hd){if(!arguments.length)return Math.sqrt(Xb);Xb=hd*hd;return ya};ya.alpha=function(hd){if(!arguments.length)return Ya;
hd=+hd;Ya?0<hd?Ya=hd:(La.c=null,La.t=NaN,La=null,Ga.end({type:"end",alpha:Ya=0})):0<hd&&(Ga.start({type:"start",alpha:Ya=hd}),La=Ra(ya.tick));return ya};ya.start=function(){function hd(ld,Yd){if(!vd){vd=Array(lc);for(qe=0;qe<lc;++qe)vd[qe]=[];for(qe=0;qe<zc;++qe){var ie=yc[qe];vd[ie.source.index].push(ie.target);vd[ie.target.index].push(ie.source)}}ie=vd[nd];for(var qe=-1,Ae=ie.length,ze;++qe<Ae;)if(!isNaN(ze=ie[qe][ld]))return ze;return Math.random()*Yd}var nd,lc=oc.length,zc=yc.length,$c=Pa[0],
ud=Pa[1],vd,yd;for(nd=0;nd<lc;++nd)(yd=oc[nd]).index=nd,yd.weight=0;for(nd=0;nd<zc;++nd)yd=yc[nd],"number"==typeof yd.source&&(yd.source=oc[yd.source]),"number"==typeof yd.target&&(yd.target=oc[yd.target]),++yd.source.weight,++yd.target.weight;for(nd=0;nd<lc;++nd)yd=oc[nd],isNaN(yd.x)&&(yd.x=hd("x",$c)),isNaN(yd.y)&&(yd.y=hd("y",ud)),isNaN(yd.px)&&(yd.px=yd.x),isNaN(yd.py)&&(yd.py=yd.y);Fc=[];if("function"===typeof ob)for(nd=0;nd<zc;++nd)Fc[nd]=+ob.call(this,yc[nd],nd);else for(nd=0;nd<zc;++nd)Fc[nd]=
ob;Xc=[];if("function"===typeof wb)for(nd=0;nd<zc;++nd)Xc[nd]=+wb.call(this,yc[nd],nd);else for(nd=0;nd<zc;++nd)Xc[nd]=wb;fd=[];if("function"===typeof Ib)for(nd=0;nd<lc;++nd)fd[nd]=+Ib.call(this,oc[nd],nd);else for(nd=0;nd<lc;++nd)fd[nd]=Ib;return ya.resume()};ya.resume=function(){return ya.alpha(.1)};ya.stop=function(){return ya.alpha(0)};ya.drag=function(){cb||(cb=Wb.behavior.drag().origin(x).on("dragstart.force",xg).on("drag.force",la).on("dragend.force",pi));if(!arguments.length)return cb;this.on("mouseover.force",
qi).on("mouseout.force",Ti).call(cb)};return Wb.rebind(ya,Ga,"on")};var ml=20,Nk=1,Hj=Infinity;Wb.layout.hierarchy=function(){function T(La){var Pa=[La],cb=[],Ya;for(La.depth=0;null!=(Ya=Pa.pop());)if(cb.push(Ya),(ob=ya.call(T,Ya,Ya.depth))&&(db=ob.length)){for(var db,ob,wb;0<=--db;)Pa.push(wb=ob[db]),wb.parent=Ya,wb.depth=Ya.depth+1;Ga&&(Ya.value=0);Ya.children=ob}else Ga&&(Ya.value=+Ga.call(T,Ya,Ya.depth)||0),delete Ya.children;lg(La,function(Ib){var Nb,Vb;la&&(Nb=Ib.children)&&Nb.sort(la);Ga&&
(Vb=Ib.parent)&&(Vb.value+=Ib.value)});return cb}var la=Kf,ya=Sf,Ga=Ph;T.sort=function(La){if(!arguments.length)return la;la=La;return T};T.children=function(La){if(!arguments.length)return ya;ya=La;return T};T.value=function(La){if(!arguments.length)return Ga;Ga=La;return T};T.revalue=function(La){Ga&&(Si(La,function(Pa){Pa.children&&(Pa.value=0)}),lg(La,function(Pa){var cb;Pa.children||(Pa.value=+Ga.call(T,Pa,Pa.depth)||0);if(cb=Pa.parent)cb.value+=Pa.value}));return La};return T};Wb.layout.partition=
function(){function T(Pa,cb,Ya,db){var ob=Pa.children;Pa.x=cb;Pa.y=Pa.depth*db;Pa.dx=Ya;Pa.dy=db;if(ob&&(Ib=ob.length)){var wb=-1,Ib,Nb;for(Ya=Pa.value?Ya/Pa.value:0;++wb<Ib;)T(Nb=ob[wb],cb,Pa=Nb.value*Ya,db),cb+=Pa}}function la(Pa){Pa=Pa.children;var cb=0;if(Pa&&(db=Pa.length))for(var Ya=-1,db;++Ya<db;)cb=Math.max(cb,la(Pa[Ya]));return 1+cb}function ya(Pa,cb){Pa=Ga.call(this,Pa,cb);T(Pa[0],0,La[0],La[1]/la(Pa[0]));return Pa}var Ga=Wb.layout.hierarchy(),La=[1,1];ya.size=function(Pa){if(!arguments.length)return La;
La=Pa;return ya};return Ef(ya,Ga)};Wb.layout.pie=function(){function T(cb){var Ya=cb.length,db=cb.map(function(Fc,Xc){return+la.call(T,Fc,Xc)}),ob=+("function"===typeof Ga?Ga.apply(this,arguments):Ga),wb=("function"===typeof La?La.apply(this,arguments):La)-ob,Ib=Math.min(Math.abs(wb)/Ya,+("function"===typeof Pa?Pa.apply(this,arguments):Pa)),Nb=Ib*(0>wb?-1:1),Vb=Wb.sum(db),Xb=Vb?(wb-Ya*Nb)/Vb:0;Ya=Wb.range(Ya);var oc=[],yc;null!=ya&&Ya.sort(ya===Ni?function(Fc,Xc){return db[Xc]-db[Fc]}:function(Fc,
Xc){return ya(cb[Fc],cb[Xc])});Ya.forEach(function(Fc){oc[Fc]={data:cb[Fc],value:yc=db[Fc],startAngle:ob,endAngle:ob+=yc*Xb+Nb,padAngle:Ib}});return oc}var la=Number,ya=Ni,Ga=0,La=yf,Pa=0;T.value=function(cb){if(!arguments.length)return la;la=cb;return T};T.sort=function(cb){if(!arguments.length)return ya;ya=cb;return T};T.startAngle=function(cb){if(!arguments.length)return Ga;Ga=cb;return T};T.endAngle=function(cb){if(!arguments.length)return La;La=cb;return T};T.padAngle=function(cb){if(!arguments.length)return Pa;
Pa=cb;return T};return T};var Ni={};Wb.layout.stack=function(){function T(Ya,db){if(!(Nb=Ya.length))return Ya;var ob=Ya.map(function(yc,Fc){return la.call(T,yc,Fc)}),wb=ob.map(function(yc){return yc.map(function(Fc,Xc){return[Pa.call(T,Fc,Xc),cb.call(T,Fc,Xc)]})}),Ib=ya.call(T,wb,db);ob=Wb.permute(ob,Ib);wb=Wb.permute(wb,Ib);db=Ga.call(T,wb,db);Ib=ob[0].length;var Nb,Vb,Xb,oc;for(Xb=0;Xb<Ib;++Xb)for(La.call(T,ob[0][Xb],oc=db[Xb],wb[0][Xb][1]),Vb=1;Vb<Nb;++Vb)La.call(T,ob[Vb][Xb],oc+=wb[Vb-1][Xb][1],
wb[Vb][Xb][1]);return Ya}var la=x,ya=nh,Ga=wf,La=ah,Pa=Eg,cb=Mf;T.values=function(Ya){if(!arguments.length)return la;la=Ya;return T};T.order=function(Ya){if(!arguments.length)return ya;ya="function"===typeof Ya?Ya:Wg.get(Ya)||nh;return T};T.offset=function(Ya){if(!arguments.length)return Ga;Ga="function"===typeof Ya?Ya:vh.get(Ya)||wf;return T};T.x=function(Ya){if(!arguments.length)return Pa;Pa=Ya;return T};T.y=function(Ya){if(!arguments.length)return cb;cb=Ya;return T};T.out=function(Ya){if(!arguments.length)return La;
La=Ya;return T};return T};var Wg=Wb.map({"inside-out":function(T){var la=T.length,ya=T.map(Wi),Ga=T.map(yj),La=Wb.range(la).sort(function(wb,Ib){return ya[wb]-ya[Ib]}),Pa=0,cb=0,Ya=[],db=[];for(T=0;T<la;++T){var ob=La[T];Pa<cb?(Pa+=Ga[ob],Ya.push(ob)):(cb+=Ga[ob],db.push(ob))}return db.reverse().concat(Ya)},reverse:function(T){return Wb.range(T.length).reverse()},"default":nh}),vh=Wb.map({silhouette:function(T){var la=T.length,ya=T[0].length,Ga=[],La=0,Pa,cb,Ya,db=[];for(cb=0;cb<ya;++cb){for(Ya=Pa=
0;Pa<la;Pa++)Ya+=T[Pa][cb][1];Ya>La&&(La=Ya);Ga.push(Ya)}for(cb=0;cb<ya;++cb)db[cb]=(La-Ga[cb])/2;return db},wiggle:function(T){var la=T.length,ya=T[0],Ga=ya.length,La,Pa,cb,Ya,db,ob,wb,Ib=[];Ib[0]=ob=wb=0;for(Pa=1;Pa<Ga;++Pa){for(cb=La=0;La<la;++La)cb+=T[La][Pa][1];var Nb=La=0;for(db=ya[Pa][0]-ya[Pa-1][0];La<la;++La){var Vb=0;for(Ya=(T[La][Pa][1]-T[La][Pa-1][1])/(2*db);Vb<La;++Vb)Ya+=(T[Vb][Pa][1]-T[Vb][Pa-1][1])/db;Nb+=Ya*T[La][Pa][1]}Ib[Pa]=ob-=cb?Nb/cb*db:0;ob<wb&&(wb=ob)}for(Pa=0;Pa<Ga;++Pa)Ib[Pa]-=
wb;return Ib},expand:function(T){var la=T.length,ya=T[0].length,Ga=1/la,La,Pa,cb,Ya=[];for(Pa=0;Pa<ya;++Pa){for(cb=La=0;La<la;La++)cb+=T[La][Pa][1];if(cb)for(La=0;La<la;La++)T[La][Pa][1]/=cb;else for(La=0;La<la;La++)T[La][Pa][1]=Ga}for(Pa=0;Pa<ya;++Pa)Ya[Pa]=0;return Ya},zero:wf});Wb.layout.histogram=function(){function T(Pa,cb){var Ya=[],db=Pa.map(ya,this),ob=Ga.call(this,db,cb),wb=La.call(this,ob,db,cb);cb=-1;for(var Ib=db.length,Nb=wb.length-1,Vb=la?1:1/Ib;++cb<Nb;){var Xb=Ya[cb]=[];Xb.dx=wb[cb+
1]-(Xb.x=wb[cb]);Xb.y=0}if(0<Nb)for(cb=-1;++cb<Ib;)Xb=db[cb],Xb>=ob[0]&&Xb<=ob[1]&&(Xb=Ya[Wb.bisect(wb,Xb,1,Nb)-1],Xb.y+=Vb,Xb.push(Pa[cb]));return Ya}var la=!0,ya=Number,Ga=cg,La=Mj;T.value=function(Pa){if(!arguments.length)return ya;ya=Pa;return T};T.range=function(Pa){if(!arguments.length)return Ga;Ga=Ba(Pa);return T};T.bins=function(Pa){if(!arguments.length)return La;La="number"===typeof Pa?function(cb){return ch(cb,Pa)}:Ba(Pa);return T};T.frequency=function(Pa){if(!arguments.length)return la;
la=!!Pa;return T};return T};Wb.layout.pack=function(){function T(Pa,cb){Pa=la.call(this,Pa,cb);cb=Pa[0];var Ya=Ga[0],db=Ga[1],ob=null==La?Math.sqrt:"function"===typeof La?La:function(){return La};cb.x=cb.y=0;lg(cb,function(Ib){Ib.r=+ob(Ib.value)});lg(cb,bh);if(ya){var wb=ya*(La?1:Math.max(2*cb.r/Ya,2*cb.r/db))/2;lg(cb,function(Ib){Ib.r+=wb});lg(cb,bh);lg(cb,function(Ib){Ib.r-=wb})}Rh(cb,Ya/2,db/2,La?1:1/Math.max(2*cb.r/Ya,2*cb.r/db));return Pa}var la=Wb.layout.hierarchy().sort(Qh),ya=0,Ga=[1,1],La;
T.size=function(Pa){if(!arguments.length)return Ga;Ga=Pa;return T};T.radius=function(Pa){if(!arguments.length)return La;La=null==Pa||"function"===typeof Pa?Pa:+Pa;return T};T.padding=function(Pa){if(!arguments.length)return ya;ya=+Pa;return T};return Ef(T,la)};Wb.layout.tree=function(){function T(ob,wb){ob=Pa.call(this,ob,wb);wb=ob[0];var Ib=la(wb);lg(Ib,ya);Ib.parent.m=-Ib.z;Si(Ib,Ga);if(db)Si(wb,La);else{var Nb=wb,Vb=wb,Xb=wb;Si(wb,function(Xc){Xc.x<Nb.x&&(Nb=Xc);Xc.x>Vb.x&&(Vb=Xc);Xc.depth>Xb.depth&&
(Xb=Xc)});var oc=cb(Nb,Vb)/2-Nb.x,yc=Ya[0]/(Vb.x+cb(Vb,Nb)/2+oc),Fc=Ya[1]/(Xb.depth||1);Si(wb,function(Xc){Xc.x=(Xc.x+oc)*yc;Xc.y=Xc.depth*Fc})}return ob}function la(ob){ob={A:null,children:[ob]};for(var wb=[ob],Ib;null!=(Ib=wb.pop());)for(var Nb=Ib.children,Vb,Xb=0,oc=Nb.length;Xb<oc;++Xb)wb.push((Nb[Xb]=Vb={_:Nb[Xb],parent:Ib,children:(Vb=Nb[Xb].children)&&Vb.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Xb}).a=Vb);return ob.children[0]}function ya(ob){var wb=ob.children,Ib=ob.parent.children,
Nb=ob.i?Ib[ob.i-1]:null;if(wb.length){for(var Vb=0,Xb=0,oc=ob.children,yc=oc.length,Fc;0<=--yc;)Fc=oc[yc],Fc.z+=Vb,Fc.m+=Vb,Vb+=Fc.s+(Xb+=Fc.c);wb=(wb[0].z+wb[wb.length-1].z)/2;Nb?(ob.z=Nb.z+cb(ob._,Nb._),ob.m=ob.z-wb):ob.z=wb}else Nb&&(ob.z=Nb.z+cb(ob._,Nb._));wb=ob.parent;Ib=ob.parent.A||Ib[0];if(Nb){Xb=Vb=ob;oc=Vb.parent.children[0];yc=Vb.m;Fc=Xb.m;for(var Xc=Nb.m,fd=oc.m,hd;Nb=Th(Nb),Vb=Qg(Vb),Nb&&Vb;){oc=Qg(oc);Xb=Th(Xb);Xb.a=ob;hd=Nb.z+Xc-Vb.z-yc+cb(Nb._,Vb._);if(0<hd){var nd=Nb.a.parent===
ob.parent?Nb.a:Ib,lc=ob,zc=hd,$c=zc/(lc.i-nd.i);lc.c-=$c;lc.s+=zc;nd.c+=$c;lc.z+=zc;lc.m+=zc;yc+=hd;Fc+=hd}Xc+=Nb.m;yc+=Vb.m;fd+=oc.m;Fc+=Xb.m}Nb&&!Th(Xb)&&(Xb.t=Nb,Xb.m+=Xc-Fc);Vb&&!Qg(oc)&&(oc.t=Vb,oc.m+=yc-fd,Ib=ob)}wb.A=Ib}function Ga(ob){ob._.x=ob.z+ob.parent.m;ob.m+=ob.parent.m}function La(ob){ob.x*=Ya[0];ob.y=ob.depth*Ya[1]}var Pa=Wb.layout.hierarchy().sort(null).value(null),cb=ef,Ya=[1,1],db=null;T.separation=function(ob){if(!arguments.length)return cb;cb=ob;return T};T.size=function(ob){if(!arguments.length)return db?
null:Ya;db=null==(Ya=ob)?La:null;return T};T.nodeSize=function(ob){if(!arguments.length)return db?Ya:null;db=null==(Ya=ob)?null:La;return T};return Ef(T,Pa)};Wb.layout.cluster=function(){function T(Pa,cb){Pa=la.call(this,Pa,cb);var Ya=Pa[0],db,ob=0;lg(Ya,function(Vb){var Xb=Vb.children;Xb&&Xb.length?(Vb.x=Zf(Xb),Vb.y=lj(Xb)):(Vb.x=db?ob+=ya(Vb,db):0,Vb.y=0,db=Vb)});cb=Sh(Ya);var wb=Ui(Ya),Ib=cb.x-ya(cb,wb)/2,Nb=wb.x+ya(wb,cb)/2;lg(Ya,La?function(Vb){Vb.x=(Vb.x-Ya.x)*Ga[0];Vb.y=(Ya.y-Vb.y)*Ga[1]}:
function(Vb){Vb.x=(Vb.x-Ib)/(Nb-Ib)*Ga[0];Vb.y=(1-(Ya.y?Vb.y/Ya.y:1))*Ga[1]});return Pa}var la=Wb.layout.hierarchy().sort(null).value(null),ya=ef,Ga=[1,1],La=!1;T.separation=function(Pa){if(!arguments.length)return ya;ya=Pa;return T};T.size=function(Pa){if(!arguments.length)return La?null:Ga;La=null==(Ga=Pa);return T};T.nodeSize=function(Pa){if(!arguments.length)return La?Ga:null;La=null!=(Ga=Pa);return T};return Ef(T,la)};Wb.layout.treemap=function(){function T(Xb,oc){for(var yc=-1,Fc=Xb.length,
Xc,fd;++yc<Fc;)fd=(Xc=Xb[yc]).value*(0>oc?0:oc),Xc.area=isNaN(fd)||0>=fd?0:fd}function la(Xb){var oc=Xb.children;if(oc&&oc.length){var yc=ob(Xb),Fc=[],Xc=oc.slice(),fd=Infinity,hd,nd="slice"===Nb?yc.dx:"dice"===Nb?yc.dy:"slice-dice"===Nb?Xb.depth&1?yc.dy:yc.dx:Math.min(yc.dx,yc.dy);T(Xc,yc.dx*yc.dy/Xb.value);for(Fc.area=0;0<(Xb=Xc.length);){Fc.push(Xb=Xc[Xb-1]);Fc.area+=Xb.area;if(!(Xb="squarify"!==Nb)){Xb=nd;for(var lc=Fc.area,zc=0,$c=Infinity,ud=-1,vd=Fc.length;++ud<vd;)if(hd=Fc[ud].area)hd<$c&&
($c=hd),hd>zc&&(zc=hd);lc*=lc;Xb*=Xb;Xb=(hd=lc?Math.max(Xb*zc*Vb/lc,lc/(Xb*$c*Vb)):Infinity)<=fd}Xb?(Xc.pop(),fd=hd):(Fc.area-=Fc.pop().area,Ga(Fc,nd,yc,!1),nd=Math.min(yc.dx,yc.dy),Fc.length=Fc.area=0,fd=Infinity)}Fc.length&&(Ga(Fc,nd,yc,!0),Fc.length=Fc.area=0);oc.forEach(la)}}function ya(Xb){var oc=Xb.children;if(oc&&oc.length){var yc=ob(Xb),Fc=oc.slice(),Xc=[];T(Fc,yc.dx*yc.dy/Xb.value);for(Xc.area=0;Xb=Fc.pop();)Xc.push(Xb),Xc.area+=Xb.area,null!=Xb.z&&(Ga(Xc,Xb.z?yc.dx:yc.dy,yc,!Fc.length),
Xc.length=Xc.area=0);oc.forEach(ya)}}function Ga(Xb,oc,yc,Fc){var Xc=-1,fd=Xb.length,hd=yc.x,nd=yc.y,lc=oc?cb(Xb.area/oc):0;if(oc==yc.dx){if(Fc||lc>yc.dy)lc=yc.dy;for(;++Xc<fd;){var zc=Xb[Xc];zc.x=hd;zc.y=nd;zc.dy=lc;hd+=zc.dx=Math.min(yc.x+yc.dx-hd,lc?cb(zc.area/lc):0)}zc.z=!0;zc.dx+=yc.x+yc.dx-hd;yc.y+=lc;yc.dy-=lc}else{if(Fc||lc>yc.dx)lc=yc.dx;for(;++Xc<fd;)zc=Xb[Xc],zc.x=hd,zc.y=nd,zc.dx=lc,nd+=zc.dy=Math.min(yc.y+yc.dy-nd,lc?cb(zc.area/lc):0);zc.z=!1;zc.dy+=yc.y+yc.dy-nd;yc.x+=lc;yc.dx-=lc}}
function La(Xb){Xb=Ib||Pa(Xb);var oc=Xb[0];oc.x=oc.y=0;oc.value?(oc.dx=Ya[0],oc.dy=Ya[1]):oc.dx=oc.dy=0;Ib&&Pa.revalue(oc);T([oc],oc.dx*oc.dy/oc.value);(Ib?ya:la)(oc);wb&&(Ib=Xb);return Xb}var Pa=Wb.layout.hierarchy(),cb=Math.round,Ya=[1,1],db=null,ob=zh,wb=!1,Ib,Nb="squarify",Vb=.5*(1+Math.sqrt(5));La.size=function(Xb){if(!arguments.length)return Ya;Ya=Xb;return La};La.padding=function(Xb){function oc(Xc){var fd=Xb.call(La,Xc,Xc.depth);return null==fd?zh(Xc):dh(Xc,"number"===typeof fd?[fd,fd,fd,
fd]:fd)}function yc(Xc){return dh(Xc,Xb)}if(!arguments.length)return db;var Fc;ob=null==(db=Xb)?zh:"function"===(Fc=typeof Xb)?oc:"number"===Fc?(Xb=[Xb,Xb,Xb,Xb],yc):yc;return La};La.round=function(Xb){if(!arguments.length)return cb!=Number;cb=Xb?Math.round:Number;return La};La.sticky=function(Xb){if(!arguments.length)return wb;wb=Xb;Ib=null;return La};La.ratio=function(Xb){if(!arguments.length)return Vb;Vb=Xb;return La};La.mode=function(Xb){if(!arguments.length)return Nb;Nb=Xb+"";return La};return Ef(La,
Pa)};Wb.random={normal:function(T,la){var ya=arguments.length;2>ya&&(la=1);1>ya&&(T=0);return function(){do{var Ga=2*Math.random()-1;var La=2*Math.random()-1;La=Ga*Ga+La*La}while(!La||1<La);return T+la*Ga*Math.sqrt(-2*Math.log(La)/La)}},logNormal:function(){var T=Wb.random.normal.apply(Wb,arguments);return function(){return Math.exp(T())}},bates:function(T){var la=Wb.random.irwinHall(T);return function(){return la()/T}},irwinHall:function(T){return function(){for(var la=0,ya=0;ya<T;ya++)la+=Math.random();
return la}}};Wb.scale={};var $h={floor:x,ceil:x};Wb.scale.linear=function(){return Y([0,1],[0,1],tg,!1)};var uj={s:1,g:1,p:1,r:1,e:1};Wb.scale.log=function(){return sb(Wb.scale.linear().domain([0,1]),10,!0,[1,10])};var Yg=Wb.format(".0e"),Ng={floor:function(T){return-Math.ceil(-T)},ceil:function(T){return-Math.floor(-T)}};Wb.scale.pow=function(){return Ob(Wb.scale.linear(),1,[0,1])};Wb.scale.sqrt=function(){return Wb.scale.pow().exponent(.5)};Wb.scale.ordinal=function(){return cc([],{t:"range",a:[[]]})};
Wb.scale.category10=function(){return Wb.scale.ordinal().range(Vh)};Wb.scale.category20=function(){return Wb.scale.ordinal().range(rh)};Wb.scale.category20b=function(){return Wb.scale.ordinal().range(ai)};Wb.scale.category20c=function(){return Wb.scale.ordinal().range(wi)};var Vh=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ia),rh=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,
8355711,13092807,12369186,14408589,1556175,10410725].map(Ia),ai=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ia),wi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ia);Wb.scale.quantile=function(){return Nc([],[])};Wb.scale.quantize=function(){return Lc(0,
1,[0,1])};Wb.scale.threshold=function(){return Cc([.5],[0,1])};Wb.scale.identity=function(){return Kc([0,1])};Wb.svg={};Wb.svg.arc=function(){function T(){var ob=Math.max(0,+ya.apply(this,arguments)),wb=Math.max(0,+Ga.apply(this,arguments)),Ib=cb.apply(this,arguments)-qf,Nb=Ya.apply(this,arguments)-qf,Vb=Math.abs(Nb-Ib),Xb=Ib>Nb?0:1;if(wb<ob){var oc=wb;wb=ob;ob=oc}if(Vb>=Tg)return la(wb,Xb)+(ob?la(ob,1-Xb):"")+"Z";var yc,Fc=0,Xc=0,fd=[];if(yc=(+db.apply(this,arguments)||0)/2){var hd=Pa===wh?Math.sqrt(ob*
ob+wb*wb):+Pa.apply(this,arguments);Xb||(Xc*=-1);wb&&(Xc=pa(hd/wb*Math.sin(yc)));ob&&(Fc=pa(hd/ob*Math.sin(yc)))}if(wb){hd=wb*Math.cos(Ib+Xc);yc=wb*Math.sin(Ib+Xc);var nd=wb*Math.cos(Nb-Xc);var lc=wb*Math.sin(Nb-Xc);var zc=Math.abs(Nb-Ib-2*Xc)<=fe?0:1;Xc&&ub(hd,yc,nd,lc)===Xb^zc&&(nd=(Ib+Nb)/2,hd=wb*Math.cos(nd),yc=wb*Math.sin(nd),nd=lc=null)}else hd=yc=0;if(ob){Xc=ob*Math.cos(Nb-Fc);var $c=ob*Math.sin(Nb-Fc);var ud=ob*Math.cos(Ib+Fc);var vd=ob*Math.sin(Ib+Fc);var yd=Math.abs(Ib-Nb+2*Fc)<=fe?0:1;
Fc&&ub(Xc,$c,ud,vd)===1-Xb^yd&&(ud=(Ib+Nb)/2,Xc=ob*Math.cos(ud),$c=ob*Math.sin(ud),ud=vd=null)}else Xc=$c=0;1E-6<Vb&&.001<(oc=Math.min(Math.abs(wb-ob)/2,+La.apply(this,arguments)))?(zc=ob<wb^Xb?0:1,yd=Ib=oc,Vb<fe&&(Vb=null==ud?[Xc,$c]:null==nd?[hd,yc]:Wf([hd,yc],[ud,vd],[nd,lc],[Xc,$c]),yd=hd-Vb[0],Ib=yc-Vb[1],Nb=nd-Vb[0],Fc=lc-Vb[1],Ib=1/Math.sin(Math.acos((yd*Nb+Ib*Fc)/(Math.sqrt(yd*yd+Ib*Ib)*Math.sqrt(Nb*Nb+Fc*Fc)))/2),Vb=Math.sqrt(Vb[0]*Vb[0]+Vb[1]*Vb[1]),yd=Math.min(oc,(ob-Vb)/(Ib-1)),Ib=Math.min(oc,
(wb-Vb)/(Ib+1))),null!=nd?(Vb=Mb(null==ud?[Xc,$c]:[ud,vd],[hd,yc],wb,Ib,Xb),Nb=Mb([nd,lc],[Xc,$c],wb,Ib,Xb),oc===Ib?fd.push("M",Vb[0],"A",Ib,",",Ib," 0 0,",zc," ",Vb[1],"A",wb,",",wb," 0 ",1-Xb^ub(Vb[1][0],Vb[1][1],Nb[1][0],Nb[1][1]),",",Xb," ",Nb[1],"A",Ib,",",Ib," 0 0,",zc," ",Nb[0]):fd.push("M",Vb[0],"A",Ib,",",Ib," 0 1,",zc," ",Nb[0])):fd.push("M",hd,",",yc),null!=ud?(wb=Mb([hd,yc],[ud,vd],ob,-yd,Xb),nd=Mb([Xc,$c],null==nd?[hd,yc]:[nd,lc],ob,-yd,Xb),oc===yd?fd.push("L",nd[0],"A",yd,",",yd," 0 0,",
zc," ",nd[1],"A",ob,",",ob," 0 ",Xb^ub(nd[1][0],nd[1][1],wb[1][0],wb[1][1]),",",1-Xb," ",wb[1],"A",yd,",",yd," 0 0,",zc," ",wb[0]):fd.push("L",nd[0],"A",yd,",",yd," 0 0,",zc," ",wb[0])):fd.push("L",Xc,",",$c)):(fd.push("M",hd,",",yc),null!=nd&&fd.push("A",wb,",",wb," 0 ",zc,",",Xb," ",nd,",",lc),fd.push("L",Xc,",",$c),null!=ud&&fd.push("A",ob,",",ob," 0 ",yd,",",1-Xb," ",ud,",",vd));fd.push("Z");return fd.join("")}function la(ob,wb){return"M0,"+ob+"A"+ob+","+ob+" 0 1,"+wb+" 0,"+-ob+"A"+ob+","+ob+
" 0 1,"+wb+" 0,"+ob}var ya=bc,Ga=Aa,La=Hc,Pa=wh,cb=Ha,Ya=Qa,db=hb;T.innerRadius=function(ob){if(!arguments.length)return ya;ya=Ba(ob);return T};T.outerRadius=function(ob){if(!arguments.length)return Ga;Ga=Ba(ob);return T};T.cornerRadius=function(ob){if(!arguments.length)return La;La=Ba(ob);return T};T.padRadius=function(ob){if(!arguments.length)return Pa;Pa=ob==wh?wh:Ba(ob);return T};T.startAngle=function(ob){if(!arguments.length)return cb;cb=Ba(ob);return T};T.endAngle=function(ob){if(!arguments.length)return Ya;
Ya=Ba(ob);return T};T.padAngle=function(ob){if(!arguments.length)return db;db=Ba(ob);return T};T.centroid=function(){var ob=(+ya.apply(this,arguments)+ +Ga.apply(this,arguments))/2,wb=(+cb.apply(this,arguments)+ +Ya.apply(this,arguments))/2-qf;return[Math.cos(wb)*ob,Math.sin(wb)*ob]};return T};var wh="auto";Wb.svg.line=function(){return Tb(x)};var Ck=Wb.map({linear:uc,"linear-closed":kc,step:function(T){for(var la=0,ya=T.length,Ga=T[0],La=[Ga[0],",",Ga[1]];++la<ya;)La.push("H",(Ga[0]+(Ga=T[la])[0])/
2,"V",Ga[1]);1<ya&&La.push("H",Ga[0]);return La.join("")},"step-before":nc,"step-after":ad,basis:Cd,"basis-open":function(T){if(4>T.length)return uc(T);for(var la=[],ya=-1,Ga=T.length,La,Pa=[0],cb=[0];3>++ya;)La=T[ya],Pa.push(La[0]),cb.push(La[1]);la.push(Md(xi,Pa)+","+Md(xi,cb));for(--ya;++ya<Ga;)La=T[ya],Pa.shift(),Pa.push(La[0]),cb.shift(),cb.push(La[1]),Ed(la,Pa,cb);return la.join("")},"basis-closed":function(T){for(var la,ya=-1,Ga=T.length,La=Ga+4,Pa,cb=[],Ya=[];4>++ya;)Pa=T[ya%Ga],cb.push(Pa[0]),
Ya.push(Pa[1]);la=[Md(xi,cb),",",Md(xi,Ya)];for(--ya;++ya<La;)Pa=T[ya%Ga],cb.shift(),cb.push(Pa[0]),Ya.shift(),Ya.push(Pa[1]),Ed(la,cb,Ya);return la.join("")},bundle:function(T,la){var ya=T.length-1;if(ya)for(var Ga=T[0][0],La=T[0][1],Pa=T[ya][0]-Ga,cb=T[ya][1]-La,Ya=-1,db,ob;++Ya<=ya;)db=T[Ya],ob=Ya/ya,db[0]=la*db[0]+(1-la)*(Ga+ob*Pa),db[1]=la*db[1]+(1-la)*(La+ob*cb);return Cd(T)},cardinal:function(T,la){return 3>T.length?uc(T):T[0]+kd(T,td(T,la))},"cardinal-open":function(T,la){return 4>T.length?
uc(T):T[1]+kd(T.slice(1,-1),td(T,la))},"cardinal-closed":function(T,la){return 3>T.length?kc(T):T[0]+kd((T.push(T[0]),T),td([T[T.length-2]].concat(T,[T[1]]),la))},monotone:function(T){if(3>T.length)T=uc(T);else{var la=T[0],ya=[],Ga;var La=0;var Pa=T.length-1;var cb=[];var Ya=T[1];for(Ga=cb[0]=Sd(T[0],Ya);++La<Pa;)cb[La]=(Ga+(Ga=Sd(Ya,Ya=T[La+1])))/2;cb[La]=Ga;for(var db=-1,ob=T.length-1;++db<ob;)La=Sd(T[db],T[db+1]),1E-6>pd(La)?cb[db]=cb[db+1]=0:(Pa=cb[db]/La,Ya=cb[db+1]/La,Ga=Pa*Pa+Ya*Ya,9<Ga&&(Ga=
3*La/Math.sqrt(Ga),cb[db]=Ga*Pa,cb[db+1]=Ga*Ya));for(db=-1;++db<=ob;)Ga=(T[Math.min(ob,db+1)][0]-T[Math.max(0,db-1)][0])/(6*(1+cb[db]*cb[db])),ya.push([Ga||0,cb[db]*Ga||0]);T=la+kd(T,ya)}return T}});Ck.forEach(function(T,la){la.key=T;la.closed=/-closed$/.test(T)});var Ok=[0,2/3,1/3,0],Xg=[0,1/3,2/3,0],xi=[0,1/6,2/3,1/6];Wb.svg.line.radial=function(){var T=Tb(ee);T.radius=T.x;delete T.x;T.angle=T.y;delete T.y;return T};nc.reverse=ad;ad.reverse=nc;Wb.svg.area=function(){return Zd(x)};Wb.svg.area.radial=
function(){var T=Zd(ee);T.radius=T.x;delete T.x;T.innerRadius=T.x0;delete T.x0;T.outerRadius=T.x1;delete T.x1;T.angle=T.y;delete T.y;T.startAngle=T.y0;delete T.y0;T.endAngle=T.y1;delete T.y1;return T};Wb.svg.chord=function(){function T(db,ob){var wb=la(this,Ga,db,ob);db=la(this,La,db,ob);return"M"+wb.p0+ya(wb.r,wb.p1,wb.a1-wb.a0)+(wb.a0==db.a0&&wb.a1==db.a1?"Q 0,0 "+wb.p0:"Q 0,0 "+db.p0+ya(db.r,db.p1,db.a1-db.a0)+("Q 0,0 "+wb.p0))+"Z"}function la(db,ob,wb,Ib){var Nb=ob.call(db,wb,Ib);ob=Pa.call(db,
Nb,Ib);wb=cb.call(db,Nb,Ib)-qf;db=Ya.call(db,Nb,Ib)-qf;return{r:ob,a0:wb,a1:db,p0:[ob*Math.cos(wb),ob*Math.sin(wb)],p1:[ob*Math.cos(db),ob*Math.sin(db)]}}function ya(db,ob,wb){return"A"+db+","+db+" 0 "+ +(wb>fe)+",1 "+ob}var Ga=Dd,La=Ld,Pa=me,cb=Ha,Ya=Qa;T.radius=function(db){if(!arguments.length)return Pa;Pa=Ba(db);return T};T.source=function(db){if(!arguments.length)return Ga;Ga=Ba(db);return T};T.target=function(db){if(!arguments.length)return La;La=Ba(db);return T};T.startAngle=function(db){if(!arguments.length)return cb;
cb=Ba(db);return T};T.endAngle=function(db){if(!arguments.length)return Ya;Ya=Ba(db);return T};return T};Wb.svg.diagonal=function(){function T(La,Pa){var cb=la.call(this,La,Pa);La=ya.call(this,La,Pa);Pa=(cb.y+La.y)/2;cb=[cb,{x:cb.x,y:Pa},{x:La.x,y:Pa},La];cb=cb.map(Ga);return"M"+cb[0]+"C"+cb[1]+" "+cb[2]+" "+cb[3]}var la=Dd,ya=Ld,Ga=De;T.source=function(La){if(!arguments.length)return la;la=Ba(La);return T};T.target=function(La){if(!arguments.length)return ya;ya=Ba(La);return T};T.projection=function(La){if(!arguments.length)return Ga;
Ga=La;return T};return T};Wb.svg.diagonal.radial=function(){var T=Wb.svg.diagonal(),la=De,ya=T.projection;T.projection=function(Ga){return arguments.length?ya(he(la=Ga)):la};return T};Wb.svg.symbol=function(){function T(Ga,La){return(al.get(la.call(this,Ga,La))||pf)(ya.call(this,Ga,La))}var la=Xe,ya=Re;T.type=function(Ga){if(!arguments.length)return la;la=Ba(Ga);return T};T.size=function(Ga){if(!arguments.length)return ya;ya=Ba(Ga);return T};return T};var al=Wb.map({circle:pf,cross:function(T){T=
Math.sqrt(T/5)/2;return"M"+-3*T+","+-T+"H"+-T+"V"+-3*T+"H"+T+"V"+-T+"H"+3*T+"V"+T+"H"+T+"V"+3*T+"H"+-T+"V"+T+"H"+-3*T+"Z"},diamond:function(T){T=Math.sqrt(T/(2*Zg));var la=T*Zg;return"M0,"+-T+"L"+la+",0 0,"+T+" "+-la+",0Z"},square:function(T){T=Math.sqrt(T)/2;return"M"+-T+","+-T+"L"+T+","+-T+" "+T+","+T+" "+-T+","+T+"Z"},"triangle-down":function(T){T=Math.sqrt(T/qk);var la=T*qk/2;return"M0,"+la+"L"+T+","+-la+" "+-T+","+-la+"Z"},"triangle-up":function(T){T=Math.sqrt(T/qk);var la=T*qk/2;return"M0,"+
-la+"L"+T+","+la+" "+-T+","+la+"Z"}});Wb.svg.symbolTypes=al.keys();var qk=Math.sqrt(3),Zg=Math.tan(30*ye);We.transition=function(T){var la=Hg||++Tk;T=ce(T);for(var ya=[],Ga,La,Pa=Ij||{time:Date.now(),ease:af,delay:0,duration:250},cb=-1,Ya=this.length;++cb<Ya;){ya.push(Ga=[]);for(var db=this[cb],ob=-1,wb=db.length;++ob<wb;)(La=db[ob])&&Le(La,ob,T,la,Pa),Ga.push(La)}return mg(ya,T,la)};We.interrupt=function(T){return this.each(null==T?Vf:cf(ce(T)))};var Vf=cf(ce()),Of=[],Tk=0,Hg,Ij;Of.call=We.call;
Of.empty=We.empty;Of.node=We.node;Of.size=We.size;Wb.transition=function(T,la){return T&&T.transition?Hg?T.transition(la):T:Wb.selection().transition(T)};Wb.transition.prototype=Of;Of.select=function(T){var la=this.id,ya=this.namespace,Ga=[],La,Pa,cb;T=K(T);for(var Ya=-1,db=this.length;++Ya<db;){Ga.push(La=[]);for(var ob=this[Ya],wb=-1,Ib=ob.length;++wb<Ib;)(cb=ob[wb])&&(Pa=T.call(cb,cb.__data__,wb,Ya))?("__data__"in cb&&(Pa.__data__=cb.__data__),Le(Pa,wb,ya,la,cb[ya][la]),La.push(Pa)):La.push(null)}return mg(Ga,
ya,la)};Of.selectAll=function(T){var la=this.id,ya=this.namespace,Ga=[],La,Pa;T=N(T);for(var cb=-1,Ya=this.length;++cb<Ya;)for(var db=this[cb],ob=-1,wb=db.length;++ob<wb;)if(La=db[ob]){var Ib=La[ya][la];var Nb=T.call(La,La.__data__,ob,cb);Ga.push(La=[]);for(var Vb=-1,Xb=Nb.length;++Vb<Xb;)(Pa=Nb[Vb])&&Le(Pa,Vb,ya,la,Ib),La.push(Pa)}return mg(Ga,ya,la)};Of.filter=function(T){var la=[],ya,Ga;"function"!==typeof T&&(T=da(T));for(var La=0,Pa=this.length;La<Pa;La++){la.push(ya=[]);var cb=this[La];for(var Ya=
0,db=cb.length;Ya<db;Ya++)(Ga=cb[Ya])&&T.call(Ga,Ga.__data__,Ya,La)&&ya.push(Ga)}return mg(la,this.namespace,this.id)};Of.tween=function(T,la){var ya=this.id,Ga=this.namespace;return 2>arguments.length?this.node()[Ga][ya].tween.get(T):ca(this,null==la?function(La){La[Ga][ya].tween.remove(T)}:function(La){La[Ga][ya].tween.set(T,la)})};Of.attr=function(T,la){function ya(){this.removeAttribute(Ya)}function Ga(){this.removeAttributeNS(Ya.space,Ya.local)}function La(db){return null==db?ya:(db+="",function(){var ob=
this.getAttribute(Ya),wb;return ob!==db&&(wb=cb(ob,db),function(Ib){this.setAttribute(Ya,wb(Ib))})})}function Pa(db){return null==db?Ga:(db+="",function(){var ob=this.getAttributeNS(Ya.space,Ya.local),wb;return ob!==db&&(wb=cb(ob,db),function(Ib){this.setAttributeNS(Ya.space,Ya.local,wb(Ib))})})}if(2>arguments.length){for(la in T)this.attr(la,T[la]);return this}var cb="transform"==T?jg:tg,Ya=Wb.ns.qualify(T);return df(this,"attr."+T,la,Ya.local?Pa:La)};Of.attrTween=function(T,la){function ya(Pa,cb){var Ya=
la.call(this,Pa,cb,this.getAttribute(La));return Ya&&function(db){this.setAttribute(La,Ya(db))}}function Ga(Pa,cb){var Ya=la.call(this,Pa,cb,this.getAttributeNS(La.space,La.local));return Ya&&function(db){this.setAttributeNS(La.space,La.local,Ya(db))}}var La=Wb.ns.qualify(T);return this.tween("attr."+T,La.local?Ga:ya)};Of.style=function(T,la,ya){function Ga(){this.style.removeProperty(T)}var La=arguments.length;if(3>La){if("string"!==typeof T){2>La&&(la="");for(ya in T)this.style(ya,T[ya],la);return this}ya=
""}return df(this,"style."+T,la,function(Pa){return null==Pa?Ga:(Pa+="",function(){var cb=n(this).getComputedStyle(this,null).getPropertyValue(T),Ya;return cb!==Pa&&(Ya=tg(cb,Pa),function(db){this.style.setProperty(T,Ya(db),ya)})})})};Of.styleTween=function(T,la,ya){3>arguments.length&&(ya="");return this.tween("style."+T,function(Ga,La){var Pa=la.call(this,Ga,La,n(this).getComputedStyle(this,null).getPropertyValue(T));return Pa&&function(cb){this.style.setProperty(T,Pa(cb),ya)}})};Of.text=function(T){return df(this,
"text",T,kf)};Of.remove=function(){var T=this.namespace;return this.each("end.transition",function(){var la;2>this[T].count&&(la=this.parentNode)&&la.removeChild(this)})};Of.ease=function(T){var la=this.id,ya=this.namespace;if(1>arguments.length)return this.node()[ya][la].ease;"function"!==typeof T&&(T=Wb.ease.apply(Wb,arguments));return ca(this,function(Ga){Ga[ya][la].ease=T})};Of.delay=function(T){var la=this.id,ya=this.namespace;return 1>arguments.length?this.node()[ya][la].delay:ca(this,"function"===
typeof T?function(Ga,La,Pa){Ga[ya][la].delay=+T.call(Ga,Ga.__data__,La,Pa)}:(T=+T,function(Ga){Ga[ya][la].delay=T}))};Of.duration=function(T){var la=this.id,ya=this.namespace;return 1>arguments.length?this.node()[ya][la].duration:ca(this,"function"===typeof T?function(Ga,La,Pa){Ga[ya][la].duration=Math.max(1,T.call(Ga,Ga.__data__,La,Pa))}:(T=Math.max(1,T),function(Ga){Ga[ya][la].duration=T}))};Of.each=function(T,la){var ya=this.id,Ga=this.namespace;if(2>arguments.length){var La=Ij,Pa=Hg;try{Hg=ya,
ca(this,function(cb,Ya,db){Ij=cb[Ga][ya];T.call(cb,cb.__data__,Ya,db)})}finally{Ij=La,Hg=Pa}}else ca(this,function(cb){cb=cb[Ga][ya];(cb.event||(cb.event=Wb.dispatch("start","end","interrupt"))).on(T,la)});return this};Of.transition=function(){for(var T=this.id,la=++Tk,ya=this.namespace,Ga=[],La,Pa,cb,Ya,db=0,ob=this.length;db<ob;db++){Ga.push(La=[]);Pa=this[db];for(var wb=0,Ib=Pa.length;wb<Ib;wb++){if(cb=Pa[wb])Ya=cb[ya][T],Le(cb,wb,ya,la,{time:Ya.time,ease:Ya.ease,delay:Ya.delay+Ya.duration,duration:Ya.duration});
La.push(cb)}}return mg(Ga,ya,la)};Wb.svg.axis=function(){function T(ob){ob.each(function(){var wb=Wb.select(this),Ib=this.__chart__||la,Nb=this.__chart__=la.copy(),Vb=null==Ya?Nb.ticks?Nb.ticks.apply(Nb,cb):Nb.domain():Ya,Xb=null==db?Nb.tickFormat?Nb.tickFormat.apply(Nb,cb):x:db,oc=wb.selectAll(".tick").data(Vb,Nb);Vb=oc.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6);var yc=Wb.transition(oc.exit()).style("opacity",1E-6).remove(),Fc=Wb.transition(oc.order()).style("opacity",
1),Xc=Math.max(Ga,0)+Pa,fd=ug(Nb);wb=wb.selectAll(".domain").data([0]);wb=(wb.enter().append("path").attr("class","domain"),Wb.transition(wb));Vb.append("line");Vb.append("text");var hd=Vb.select("line"),nd=Fc.select("line");oc=oc.select("text").text(Xb);var lc=Vb.select("text"),zc=Fc.select("text"),$c="top"===ya||"left"===ya?-1:1;if("bottom"===ya||"top"===ya){Xb=Bf;var ud="x";var vd="y";var yd="x2";var ld="y2";oc.attr("dy",0>$c?"0em":".71em").style("text-anchor","middle");wb.attr("d","M"+fd[0]+","+
$c*La+"V0H"+fd[1]+"V"+$c*La)}else Xb=of,ud="y",vd="x",yd="y2",ld="x2",oc.attr("dy",".32em").style("text-anchor",0>$c?"end":"start"),wb.attr("d","M"+$c*La+","+fd[0]+"H0V"+fd[1]+"H"+$c*La);hd.attr(ld,$c*Ga);lc.attr(vd,$c*Xc);nd.attr(yd,0).attr(ld,$c*Ga);zc.attr(ud,0).attr(vd,$c*Xc);if(Nb.rangeBand){var Yd=Nb,ie=Yd.rangeBand()/2;Ib=Nb=function(qe){return Yd(qe)+ie}}else Ib.rangeBand?Ib=Nb:yc.call(Xb,Nb,Ib);Vb.call(Xb,Ib,Nb);Fc.call(Xb,Nb,Nb)})}var la=Wb.scale.linear(),ya=vj,Ga=6,La=6,Pa=3,cb=[10],Ya=
null,db;T.scale=function(ob){if(!arguments.length)return la;la=ob;return T};T.orient=function(ob){if(!arguments.length)return ya;ya=ob in Cg?ob+"":vj;return T};T.ticks=function(){if(!arguments.length)return cb;cb=Jg(arguments);return T};T.tickValues=function(ob){if(!arguments.length)return Ya;Ya=ob;return T};T.tickFormat=function(ob){if(!arguments.length)return db;db=ob;return T};T.tickSize=function(ob){var wb=arguments.length;if(!wb)return Ga;Ga=+ob;La=+arguments[wb-1];return T};T.innerTickSize=
function(ob){if(!arguments.length)return Ga;Ga=+ob;return T};T.outerTickSize=function(ob){if(!arguments.length)return La;La=+ob;return T};T.tickPadding=function(ob){if(!arguments.length)return Pa;Pa=+ob;return T};T.tickSubdivide=function(){return arguments.length&&T};return T};var vj="bottom",Cg={top:1,right:1,bottom:1,left:1};Wb.svg.brush=function(){function T(oc){oc.each(function(){var yc=Wb.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",
La).on("touchstart.brush",La),Fc=yc.selectAll(".background").data([0]);Fc.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");yc.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Xc=yc.selectAll(".resize").data(Xb,x);Xc.exit().remove();Xc.enter().append("g").attr("class",function(fd){return"resize "+fd}).style("cursor",function(fd){return Yj[fd]}).append("rect").attr("x",function(fd){return/[ew]$/.test(fd)?
-3:null}).attr("y",function(fd){return/^[ns]/.test(fd)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");Xc.style("display",T.empty()?"none":null);yc=Wb.transition(yc);Fc=Wb.transition(Fc);cb&&(Xc=ug(cb),Fc.attr("x",Xc[0]).attr("width",Xc[1]-Xc[0]),ya(yc));Ya&&(Xc=ug(Ya),Fc.attr("y",Xc[0]).attr("height",Xc[1]-Xc[0]),Ga(yc));la(yc)})}function la(oc){oc.selectAll(".resize").attr("transform",function(yc){return"translate("+db[+/e$/.test(yc)]+","+ob[+/^s/.test(yc)]+")"})}function ya(oc){oc.select(".extent").attr("x",
db[0]);oc.selectAll(".extent,.n\x3erect,.s\x3erect").attr("width",db[1]-db[0])}function Ga(oc){oc.select(".extent").attr("y",ob[0]);oc.selectAll(".extent,.e\x3erect,.w\x3erect").attr("height",ob[1]-ob[0])}function La(){function oc(){var Ae=Wb.mouse(Xc),ze=!1;qe&&(Ae[0]+=qe[0],Ae[1]+=qe[1]);ud||(Wb.event.altKey?(yd||(yd=[(db[0]+db[1])/2,(ob[0]+ob[1])/2]),ld[0]=db[+(Ae[0]<yd[0])],ld[1]=ob[+(Ae[1]<yd[1])]):yd=null);zc&&yc(Ae,cb,0)&&(ya(nd),ze=!0);$c&&yc(Ae,Ya,1)&&(Ga(nd),ze=!0);ze&&(la(nd),hd({type:"brush",
mode:ud?"move":"resize"}))}function yc(Ae,ze,Me){var oe=ug(ze);ze=oe[0];var bg=oe[1];oe=ld[Me];var Ff=Me?ob:db,Be=Ff[1]-Ff[0];ud&&(ze-=oe,bg-=Be+oe);Ae=(Me?Vb:Nb)?Math.max(ze,Math.min(bg,Ae[Me])):Ae[Me];ud?ze=(Ae+=oe)+Be:(yd&&(oe=Math.max(ze,Math.min(bg,2*yd[Me]-Ae))),oe<Ae?(ze=Ae,Ae=oe):ze=oe);if(Ff[0]!=Ae||Ff[1]!=ze)return Me?Ib=null:wb=null,Ff[0]=Ae,Ff[1]=ze,!0}function Fc(){oc();nd.style("pointer-events","all").selectAll(".resize").style("display",T.empty()?"none":null);Wb.select("body").style("cursor",
null);Yd.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);vd();hd({type:"brushend"})}var Xc=this,fd=Wb.select(Wb.event.target),hd=Pa.of(Xc,arguments),nd=Wb.select(Xc),lc=fd.datum(),zc=!/^(n|s)$/.test(lc)&&cb,$c=!/^(e|w)$/.test(lc)&&Ya,ud=fd.classed("extent"),vd=ua(Xc),yd,ld=Wb.mouse(Xc),Yd=Wb.select(n(Xc)).on("keydown.brush",function(){32==Wb.event.keyCode&&(ud||(yd=null,ld[0]-=db[1],ld[1]-=ob[1],
ud=2),v())}).on("keyup.brush",function(){32==Wb.event.keyCode&&2==ud&&(ld[0]+=db[1],ld[1]+=ob[1],ud=0,v())});if(Wb.event.changedTouches)Yd.on("touchmove.brush",oc).on("touchend.brush",Fc);else Yd.on("mousemove.brush",oc).on("mouseup.brush",Fc);nd.interrupt().selectAll("*").interrupt();if(ud)ld[0]=db[0]-ld[0],ld[1]=ob[0]-ld[1];else if(lc){var ie=+/w$/.test(lc);lc=+/^n/.test(lc);var qe=[db[1-ie]-ld[0],ob[1-lc]-ld[1]];ld[0]=db[ie];ld[1]=ob[lc]}else Wb.event.altKey&&(yd=ld.slice());nd.style("pointer-events",
"none").selectAll(".resize").style("display",null);Wb.select("body").style("cursor",fd.style("cursor"));hd({type:"brushstart"});oc()}var Pa=I(T,"brushstart","brush","brushend"),cb=null,Ya=null,db=[0,0],ob=[0,0],wb,Ib,Nb=!0,Vb=!0,Xb=Oi[0];T.event=function(oc){oc.each(function(){var yc=Pa.of(this,arguments),Fc={x:db,y:ob,i:wb,j:Ib},Xc=this.__chart__||Fc;this.__chart__=Fc;Hg?Wb.select(this).transition().each("start.brush",function(){wb=Xc.i;Ib=Xc.j;db=Xc.x;ob=Xc.y;yc({type:"brushstart"})}).tween("brush:brush",
function(){var fd=Ci(db,Fc.x),hd=Ci(ob,Fc.y);wb=Ib=null;return function(nd){db=Fc.x=fd(nd);ob=Fc.y=hd(nd);yc({type:"brush",mode:"resize"})}}).each("end.brush",function(){wb=Fc.i;Ib=Fc.j;yc({type:"brush",mode:"resize"});yc({type:"brushend"})}):(yc({type:"brushstart"}),yc({type:"brush",mode:"resize"}),yc({type:"brushend"}))})};T.x=function(oc){if(!arguments.length)return cb;cb=oc;Xb=Oi[!cb<<1|!Ya];return T};T.y=function(oc){if(!arguments.length)return Ya;Ya=oc;Xb=Oi[!cb<<1|!Ya];return T};T.clamp=function(oc){if(!arguments.length)return cb&&
Ya?[Nb,Vb]:cb?Nb:Ya?Vb:null;cb&&Ya?(Nb=!!oc[0],Vb=!!oc[1]):cb?Nb=!!oc:Ya&&(Vb=!!oc);return T};T.extent=function(oc){if(!arguments.length){if(cb)if(wb){var yc=wb[0];var Fc=wb[1]}else if(yc=db[0],Fc=db[1],cb.invert&&(yc=cb.invert(yc),Fc=cb.invert(Fc)),Fc<yc){var Xc=yc;yc=Fc;Fc=Xc}if(Ya)if(Ib){var fd=Ib[0];var hd=Ib[1]}else fd=ob[0],hd=ob[1],Ya.invert&&(fd=Ya.invert(fd),hd=Ya.invert(hd)),hd<fd&&(Xc=fd,fd=hd,hd=Xc);return cb&&Ya?[[yc,fd],[Fc,hd]]:cb?[yc,Fc]:Ya&&[fd,hd]}cb&&(yc=oc[0],Fc=oc[1],Ya&&(yc=
yc[0],Fc=Fc[0]),wb=[yc,Fc],cb.invert&&(yc=cb(yc),Fc=cb(Fc)),Fc<yc&&(Xc=yc,yc=Fc,Fc=Xc),yc!=db[0]||Fc!=db[1])&&(db=[yc,Fc]);Ya&&(fd=oc[0],hd=oc[1],cb&&(fd=fd[1],hd=hd[1]),Ib=[fd,hd],Ya.invert&&(fd=Ya(fd),hd=Ya(hd)),hd<fd&&(Xc=fd,fd=hd,hd=Xc),fd!=ob[0]||hd!=ob[1])&&(ob=[fd,hd]);return T};T.clear=function(){T.empty()||(db=[0,0],ob=[0,0],wb=Ib=null);return T};T.empty=function(){return!!cb&&db[0]==db[1]||!!Ya&&ob[0]==ob[1]};return Wb.rebind(T,Pa,"on")};var Yj={n:"ns-resize",e:"ew-resize",s:"ns-resize",
w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Oi=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Lj=be.format=Zh.timeFormat,Dk=Lj.utc,Zj=Dk("%Y-%m-%dT%H:%M:%S.%LZ");Lj.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Pf:Zj;Pf.parse=function(T){T=new Date(T);return isNaN(T)?null:T};Pf.toString=Zj.toString;be.second=pc(function(T){return new dg(1E3*Math.floor(T/1E3))},function(T,la){T.setTime(T.getTime()+1E3*Math.floor(la))},function(T){return T.getSeconds()});
be.seconds=be.second.range;be.seconds.utc=be.second.utc.range;be.minute=pc(function(T){return new dg(6E4*Math.floor(T/6E4))},function(T,la){T.setTime(T.getTime()+6E4*Math.floor(la))},function(T){return T.getMinutes()});be.minutes=be.minute.range;be.minutes.utc=be.minute.utc.range;be.hour=pc(function(T){var la=T.getTimezoneOffset()/60;return new dg(36E5*(Math.floor(T/36E5-la)+la))},function(T,la){T.setTime(T.getTime()+36E5*Math.floor(la))},function(T){return T.getHours()});be.hours=be.hour.range;be.hours.utc=
be.hour.utc.range;be.month=pc(function(T){T=be.day(T);T.setDate(1);return T},function(T,la){T.setMonth(T.getMonth()+la)},function(T){return T.getMonth()});be.months=be.month.range;be.months.utc=be.month.utc.range;var ci=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],wj=[[be.second,1],[be.second,5],[be.second,15],[be.second,30],[be.minute,1],[be.minute,5],[be.minute,15],[be.minute,30],[be.hour,1],[be.hour,3],[be.hour,6],[be.hour,12],[be.day,1],
[be.day,2],[be.week,1],[be.month,1],[be.month,3],[be.year,1]],ok=Lj.multi([[".%L",function(T){return T.getMilliseconds()}],[":%S",function(T){return T.getSeconds()}],["%I:%M",function(T){return T.getMinutes()}],["%I %p",function(T){return T.getHours()}],["%a %d",function(T){return T.getDay()&&1!=T.getDate()}],["%b %d",function(T){return 1!=T.getDate()}],["%B",function(T){return T.getMonth()}],["%Y",Wc]]),ih={range:function(T,la,ya){return Wb.range(Math.ceil(T/ya)*ya,+la,ya).map(rf)},floor:x,ceil:x};
wj.year=be.year;be.scale=function(){return ff(Wb.scale.linear(),wj,ok)};var yi=wj.map(function(T){return[T[0].utc,T[1]]}),nk=Dk.multi([[".%L",function(T){return T.getUTCMilliseconds()}],[":%S",function(T){return T.getUTCSeconds()}],["%I:%M",function(T){return T.getUTCMinutes()}],["%I %p",function(T){return T.getUTCHours()}],["%a %d",function(T){return T.getUTCDay()&&1!=T.getUTCDate()}],["%b %d",function(T){return 1!=T.getUTCDate()}],["%B",function(T){return T.getUTCMonth()}],["%Y",Wc]]);yi.year=be.year.utc;
be.scale.utc=function(){return ff(Wb.scale.linear(),yi,nk)};Wb.text=Ma(function(T){return T.responseText});Wb.json=function(T,la){return $a(T,"application/json",ti,la)};Wb.html=function(T,la){return $a(T,"text/html",Sg,la)};Wb.xml=Ma(function(T){return T.responseXML});"object"===typeof y&&y.exports?y.exports=Wb:this.d3=Wb}()},{}],170:[function(b,y,D){y.exports=function(){for(var n=0;n<arguments.length;n++)if(void 0!==arguments[n])return arguments[n]}},{}],171:[function(b,y,D){function n(d,e){this.point=
d;this.index=e}function m(d,e){d=d.point;e=e.point;for(var l=d.length,k=0;k<l;++k){var c=e[k]-d[k];if(c)return c}return 0}function p(d,e,l){if(1===d)return l?[[-1,0]]:[];e=e.map(function(f,g){return[f[0],g]});e.sort(function(f,g){return f[0]-g[0]});for(var k=Array(d-1),c=1;c<d;++c)k[c-1]=[e[c-1][1],e[c][1]];l&&k.push([-1,k[0][1]],[k[d-1][1],-1]);return k}var h=b("incremental-convex-hull"),a=b("uniq");y.exports=function(d,e){var l=d.length;if(0===l)return[];var k=d[0].length;if(1>k)return[];if(1===
k)return p(l,d,e);for(var c=Array(l),f=1,g=0;g<l;++g){for(var q=d[g],t=Array(k+1),u=0,w=0;w<k;++w){var x=q[w];t[w]=x;u+=x*x}t[k]=u;c[g]=new n(t,g);f=Math.max(u,f)}a(c,m);l=c.length;d=Array(l+k+1);var E=Array(l+k+1);q=Array(k+1);for(g=0;g<=k;++g)q[g]=0;q[k]=(k+1)*(k+1)*f;d[0]=q.slice();E[0]=-1;for(g=0;g<=k;++g)t=q.slice(),t[g]=1,d[g+1]=t,E[g+1]=-1;for(g=0;g<l;++g)f=c[g],d[g+k+1]=f.point,E[g+k+1]=f.index;l=h(d,!1);l=e?l.filter(function(F){for(var z=0,B=0;B<=k;++B){var C=E[F[B]];if(0>C&&2<=++z)return!1;
F[B]=C}return!0}):l.filter(function(F){for(var z=0;z<=k;++z){var B=E[F[z]];if(0>B)return!1;F[z]=B}return!0});if(k&1)for(g=0;g<l.length;++g)f=l[g],t=f[0],f[0]=f[1],f[1]=t;return l}},{"incremental-convex-hull":433,uniq:569}],172:[function(b,y,D){function n(a,d){Array.isArray(a)&&(a=a.join(", "));var e={},l=16,k=.05;if(d)if(2===d.length&&"number"===typeof d[0])var c=m(d);else Array.isArray(d)?c=d:(d.o?c=m(d.o):d.pairs&&(c=d.pairs),d.fontSize&&(l=d.fontSize),null!=d.threshold&&(k=d.threshold));c||(c=
h);p.font=l+"px "+a;for(a=0;a<c.length;a++){d=c[a];var f=p.measureText(d[0]).width+p.measureText(d[1]).width,g=p.measureText(d).width;Math.abs(f-g)>l*k&&(e[d]=(g-f)/l*1E3)}return e}function m(a){for(var d=[],e=a[0];e<=a[1];e++)for(var l=String.fromCharCode(e),k=a[0];k<a[1];k++){var c=String.fromCharCode(k);d.push(l+c)}return d}y.exports=n;var p=(n.canvas=document.createElement("canvas")).getContext("2d"),h=m([32,126]);n.createPairs=m;n.ascii=h},{}],173:[function(b,y,D){(function(n){var m=!1;if("undefined"!==
typeof Float64Array){var p=new Float64Array(1),h=new Uint32Array(p.buffer);p[0]=1;m=!0;1072693248===h[1]?(y.exports=function(d){p[0]=d;return[h[0],h[1]]},y.exports.pack=function(d,e){h[0]=d;h[1]=e;return p[0]},y.exports.lo=function(d){p[0]=d;return h[0]},y.exports.hi=function(d){p[0]=d;return h[1]}):1072693248===h[0]?(y.exports=function(d){p[0]=d;return[h[1],h[0]]},y.exports.pack=function(d,e){h[1]=d;h[0]=e;return p[0]},y.exports.lo=function(d){p[0]=d;return h[1]},y.exports.hi=function(d){p[0]=d;
return h[0]}):m=!1}if(!m){var a=new n(8);y.exports=function(d){a.writeDoubleLE(d,0,!0);return[a.readUInt32LE(0,!0),a.readUInt32LE(4,!0)]};y.exports.pack=function(d,e){a.writeUInt32LE(d,0,!0);a.writeUInt32LE(e,4,!0);return a.readDoubleLE(0,!0)};y.exports.lo=function(d){a.writeDoubleLE(d,0,!0);return a.readUInt32LE(0,!0)};y.exports.hi=function(d){a.writeDoubleLE(d,0,!0);return a.readUInt32LE(4,!0)}}y.exports.sign=function(d){return y.exports.hi(d)>>>31};y.exports.exponent=function(d){return(y.exports.hi(d)<<
1>>>21)-1023};y.exports.fraction=function(d){var e=y.exports.lo(d);d=y.exports.hi(d);var l=d&1048575;d&2146435072&&(l+=1048576);return[e,l]};y.exports.denormalized=function(d){return!(y.exports.hi(d)&2146435072)}}).call(this,b("buffer").Buffer)},{buffer:111}],174:[function(b,y,D){var n=b("abs-svg-path"),m=b("normalize-svg-path"),p={M:"moveTo",C:"bezierCurveTo"};y.exports=function(h,a){h.beginPath();m(n(a)).forEach(function(d){var e=d[0];d=d.slice(1);h[p[e]].apply(h,d)});h.closePath()}},{"abs-svg-path":65,
"normalize-svg-path":471}],175:[function(b,y,D){y.exports=function(n){switch(n){case "int8":return Int8Array;case "int16":return Int16Array;case "int32":return Int32Array;case "uint8":return Uint8Array;case "uint16":return Uint16Array;case "uint32":return Uint32Array;case "float32":return Float32Array;case "float64":return Float64Array;case "array":return Array;case "uint8_clamped":return Uint8ClampedArray}}},{}],176:[function(b,y,D){function n(m,p,h){var a=m[h]|0;if(0>=a)return[];var d=Array(a),
e;if(h===m.length-1)for(e=0;e<a;++e)d[e]=p;else for(e=0;e<a;++e)d[e]=n(m,p,h+1);return d}y.exports=function(m,p){"undefined"===typeof p&&(p=0);switch(typeof m){case "number":if(0<m){m|=0;var h;var a=Array(m);for(h=0;h<m;++h)a[h]=p;return a}break;case "object":if("number"===typeof m.length)return n(m,p,0)}return[]}},{}],177:[function(b,y,D){function n(B,C,v){v=v||2;var G=C&&C.length,I=G?C[0]*v:B.length,J=m(B,0,I,v,!0),K=[];if(!J||J.next===J.prev)return K;var N;if(G){var H=v;G=[];var L;var P=0;for(L=
C.length;P<L;P++){var Q=C[P]*H;var S=P<L-1?C[P+1]*H:B.length;Q=m(B,Q,S,H,!1);Q===Q.next&&(Q.steiner=!0);S=G;var O=S.push,U=Q,X=Q;do{if(U.x<X.x||U.x===X.x&&U.y<X.y)X=U;U=U.next}while(U!==Q);O.call(S,X)}G.sort(d);for(P=0;P<G.length;P++){H=G[P];C=J;if(C=e(H,C))H=w(C,H),p(C,C.next),p(H,H.next);J=p(J,J.next)}}if(B.length>80*v){var da=N=B[0];var ea=G=B[1];for(H=v;H<I;H+=v)P=B[H],C=B[H+1],P<da&&(da=P),C<ea&&(ea=C),P>N&&(N=P),C>G&&(G=C);N=Math.max(N-da,G-ea);N=0!==N?1/N:0}h(J,K,v,da,ea,N);return K}function m(B,
C,v,G,I){if(I===0<z(B,C,v,G))for(I=C;I<v;I+=G)var J=x(I,B[I],B[I+1],J);else for(I=v-G;I>=C;I-=G)J=x(I,B[I],B[I+1],J);J&&f(J,J.next)&&(E(J),J=J.next);return J}function p(B,C){if(!B)return B;C||(C=B);do{var v=!1;if(B.steiner||!f(B,B.next)&&0!==c(B.prev,B,B.next))B=B.next;else{E(B);B=C=B.prev;if(B===B.next)break;v=!0}}while(v||B!==C);return C}function h(B,C,v,G,I,J,K){if(B){if(!K&&J){var N=B,H=N;do null===H.z&&(H.z=l(H.x,H.y,G,I,J)),H.prevZ=H.prev,H=H.nextZ=H.next;while(H!==N);H.prevZ.nextZ=null;H.prevZ=
null;N=H;var L,P,Q,S,O=1;do{H=N;var U=N=null;for(P=0;H;){P++;var X=H;for(L=Q=0;L<O&&(Q++,X=X.nextZ,X);L++);for(S=O;0<Q||0<S&&X;)0!==Q&&(0===S||!X||H.z<=X.z)?(L=H,H=H.nextZ,Q--):(L=X,X=X.nextZ,S--),U?U.nextZ=L:N=L,L.prevZ=U,U=L;H=X}U.nextZ=null;O*=2}while(1<P)}for(N=B;B.prev!==B.next;){H=B.prev;X=B.next;if(J)U=a(B,G,I,J);else a:if(U=B,P=U.prev,Q=U,O=U.next,0<=c(P,Q,O))U=!1;else{for(L=U.next.next;L!==U.prev;){if(k(P.x,P.y,Q.x,Q.y,O.x,O.y,L.x,L.y)&&0<=c(L.prev,L,L.next)){U=!1;break a}L=L.next}U=!0}if(U)C.push(H.i/
v),C.push(B.i/v),C.push(X.i/v),E(B),N=B=X.next;else if(B=X,B===N){if(!K)h(p(B),C,v,G,I,J,1);else if(1===K){B=p(B);K=C;N=v;H=B;do X=H.prev,U=H.next.next,!f(X,U)&&g(X,H,H.next,U)&&u(X,U)&&u(U,X)&&(K.push(X.i/N),K.push(H.i/N),K.push(U.i/N),E(H),E(H.next),H=B=U),H=H.next;while(H!==B);B=p(H);h(B,C,v,G,I,J,2)}else if(2===K)a:{K=B;do{for(N=K.next.next;N!==K.prev;){if(H=K.i!==N.i){H=K;X=N;if(U=H.next.i!==X.i&&H.prev.i!==X.i){b:{U=H;do{if(U.i!==H.i&&U.next.i!==H.i&&U.i!==X.i&&U.next.i!==X.i&&g(U,U.next,H,
X)){U=!0;break b}U=U.next}while(U!==H);U=!1}U=!U}if(U){if(U=u(H,X)&&u(X,H)){U=H;P=!1;Q=(H.x+X.x)/2;O=(H.y+X.y)/2;do U.y>O!==U.next.y>O&&U.next.y!==U.y&&Q<(U.next.x-U.x)*(O-U.y)/(U.next.y-U.y)+U.x&&(P=!P),U=U.next;while(U!==H);U=P}U=U&&(c(H.prev,H,X.prev)||c(H,X.prev,X))||f(H,X)&&0<c(H.prev,H,H.next)&&0<c(X.prev,X,X.next)}H=U}if(H){B=w(K,N);K=p(K,K.next);B=p(B,B.next);h(K,C,v,G,I,J);h(B,C,v,G,I,J);break a}N=N.next}K=K.next}while(K!==B)}break}}}}function a(B,C,v,G){var I=B.prev,J=B.next;if(0<=c(I,B,
J))return!1;var K=I.x>B.x?I.x>J.x?I.x:J.x:B.x>J.x?B.x:J.x,N=I.y>B.y?I.y>J.y?I.y:J.y:B.y>J.y?B.y:J.y,H=l(I.x<B.x?I.x<J.x?I.x:J.x:B.x<J.x?B.x:J.x,I.y<B.y?I.y<J.y?I.y:J.y:B.y<J.y?B.y:J.y,C,v,G);C=l(K,N,C,v,G);v=B.prevZ;for(G=B.nextZ;v&&v.z>=H&&G&&G.z<=C;){if(v!==B.prev&&v!==B.next&&k(I.x,I.y,B.x,B.y,J.x,J.y,v.x,v.y)&&0<=c(v.prev,v,v.next))return!1;v=v.prevZ;if(G!==B.prev&&G!==B.next&&k(I.x,I.y,B.x,B.y,J.x,J.y,G.x,G.y)&&0<=c(G.prev,G,G.next))return!1;G=G.nextZ}for(;v&&v.z>=H;){if(v!==B.prev&&v!==B.next&&
k(I.x,I.y,B.x,B.y,J.x,J.y,v.x,v.y)&&0<=c(v.prev,v,v.next))return!1;v=v.prevZ}for(;G&&G.z<=C;){if(G!==B.prev&&G!==B.next&&k(I.x,I.y,B.x,B.y,J.x,J.y,G.x,G.y)&&0<=c(G.prev,G,G.next))return!1;G=G.nextZ}return!0}function d(B,C){return B.x-C.x}function e(B,C){var v=C,G=B.x,I=B.y,J=-Infinity;do{if(I<=v.y&&I>=v.next.y&&v.next.y!==v.y){var K=v.x+(I-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(K<=G&&K>J){J=K;if(K===G){if(I===v.y)return v;if(I===v.next.y)return v.next}var N=v.x<v.next.x?v:v.next}}v=v.next}while(v!==
C);if(!N)return null;if(G===J)return N;C=N;K=N.x;var H=N.y,L=Infinity;v=N;do{if(G>=v.x&&v.x>=K&&G!==v.x&&k(I<H?G:J,I,K,H,I<H?J:G,I,v.x,v.y)){var P=Math.abs(I-v.y)/(G-v.x);var Q;if((Q=u(v,B))&&!(Q=P<L)&&(Q=P===L)&&!(Q=v.x>N.x)&&(Q=v.x===N.x)){Q=N;var S=v;Q=0>c(Q.prev,Q,S.prev)&&0>c(S.next,Q,Q.next)}Q&&(N=v,L=P)}v=v.next}while(v!==C);return N}function l(B,C,v,G,I){B=32767*(B-v)*I;C=32767*(C-G)*I;B=(B|B<<8)&16711935;B=(B|B<<4)&252645135;B=(B|B<<2)&858993459;C=(C|C<<8)&16711935;C=(C|C<<4)&252645135;C=
(C|C<<2)&858993459;return(B|B<<1)&1431655765|((C|C<<1)&1431655765)<<1}function k(B,C,v,G,I,J,K,N){return 0<=(I-K)*(C-N)-(B-K)*(J-N)&&0<=(B-K)*(G-N)-(v-K)*(C-N)&&0<=(v-K)*(J-N)-(I-K)*(G-N)}function c(B,C,v){return(C.y-B.y)*(v.x-C.x)-(C.x-B.x)*(v.y-C.y)}function f(B,C){return B.x===C.x&&B.y===C.y}function g(B,C,v,G){var I=t(c(B,C,v)),J=t(c(B,C,G)),K=t(c(v,G,B)),N=t(c(v,G,C));return I!==J&&K!==N||0===I&&q(B,v,C)||0===J&&q(B,G,C)||0===K&&q(v,B,G)||0===N&&q(v,C,G)?!0:!1}function q(B,C,v){return C.x<=Math.max(B.x,
v.x)&&C.x>=Math.min(B.x,v.x)&&C.y<=Math.max(B.y,v.y)&&C.y>=Math.min(B.y,v.y)}function t(B){return 0<B?1:0>B?-1:0}function u(B,C){return 0>c(B.prev,B,B.next)?0<=c(B,C,B.next)&&0<=c(B,B.prev,C):0>c(B,C,B.prev)||0>c(B,B.next,C)}function w(B,C){var v=new F(B.i,B.x,B.y),G=new F(C.i,C.x,C.y),I=B.next,J=C.prev;B.next=C;C.prev=B;v.next=I;I.prev=v;G.next=v;v.prev=G;J.next=G;G.prev=J;return G}function x(B,C,v,G){B=new F(B,C,v);G?(B.next=G.next,B.prev=G,G.next.prev=B,G.next=B):(B.prev=B,B.next=B);return B}function E(B){B.next.prev=
B.prev;B.prev.next=B.next;B.prevZ&&(B.prevZ.nextZ=B.nextZ);B.nextZ&&(B.nextZ.prevZ=B.prevZ)}function F(B,C,v){this.i=B;this.x=C;this.y=v;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function z(B,C,v,G){for(var I=0,J=v-G;C<v;C+=G)I+=(B[J]-B[C])*(B[C+1]+B[J+1]),J=C;return I}y.exports=n;y.exports.default=n;n.deviation=function(B,C,v,G){var I=C&&C.length,J=Math.abs(z(B,0,I?C[0]*v:B.length,v));if(I){I=0;for(var K=C.length;I<K;I++)J-=Math.abs(z(B,C[I]*v,I<K-1?C[I+1]*v:B.length,
v))}for(I=C=0;I<G.length;I+=3){K=G[I]*v;var N=G[I+1]*v,H=G[I+2]*v;C+=Math.abs((B[K]-B[H])*(B[N+1]-B[K+1])-(B[K]-B[N])*(B[H+1]-B[K+1]))}return 0===J&&0===C?0:Math.abs((C-J)/J)};n.flatten=function(B){for(var C=B[0][0].length,v={vertices:[],holes:[],dimensions:C},G=0,I=0;I<B.length;I++){for(var J=0;J<B[I].length;J++)for(var K=0;K<C;K++)v.vertices.push(B[I][J][K]);0<I&&(G+=B[I-1].length,v.holes.push(G))}return v}},{}],178:[function(b,y,D){y.exports=function(m,p){var h=m.length;if("number"!==typeof p){for(var a=
p=0;a<h;++a){var d=m[a];p=Math.max(p,d[0],d[1])}p=(p|0)+1}p|=0;var e=Array(p);for(a=0;a<p;++a)e[a]=[];for(a=0;a<h;++a)d=m[a],e[d[0]].push(d[1]),e[d[1]].push(d[0]);for(m=0;m<p;++m)n(e[m],function(l,k){return l-k});return e};var n=b("uniq")},{uniq:569}],179:[function(b,y,D){var n=b("strongly-connected-components");y.exports=function(m,p){function h(E){c[E]=!1;f.hasOwnProperty(E)&&Object.keys(f[E]).forEach(function(F){delete f[E][F];c[F]&&h(F)})}function a(E){var F=!1;k.push(E);c[E]=!0;var z;for(z=0;z<
g[E].length;z++){var B=g[E][z];B===q?(F=q,F=[].concat(k).concat(F),p?p(a):l.push(F),F=!0):c[B]||(F=a(B))}if(F)h(E);else for(z=0;z<g[E].length;z++){B=g[E][z];var C=f[B];C||(C={},f[B]=C);C[B]=!0}k.pop();return F}function d(E){for(var F=0;F<m.length;F++)F<E&&(m[F]=[]),m[F]=m[F].filter(function(z){return z>=E})}function e(E){d(E);var F=n(m).components.filter(function(G){return 1<G.length});E=Infinity;for(var z,B=0;B<F.length;B++)for(var C=0;C<F[B].length;C++)F[B][C]<E&&(E=F[B][C],z=B);var v=F[z];if(!v)return!1;
z=m.map(function(G,I){return-1===v.indexOf(I)?[]:G.filter(function(J){return-1!==v.indexOf(J)})});return{leastVertex:E,adjList:z}}var l=[],k=[],c=[],f={},g=[];var q=0;for(var t=m.length;q<t;){var u=e(q);q=u.leastVertex;if(g=u.adjList){for(u=0;u<g.length;u++)for(var w=0;w<g[u].length;w++){var x=g[u][w];c[+x]=!1;f[x]={}}a(q);q+=1}else q=t}if(!p)return l}},{"strongly-connected-components":541}],180:[function(b,y,D){var n=b("../../object/valid-value");y.exports=function(){n(this).length=0;return this}},
{"../../object/valid-value":211}],181:[function(b,y,D){y.exports=b("./is-implemented")()?Array.from:b("./shim")},{"./is-implemented":182,"./shim":183}],182:[function(b,y,D){y.exports=function(){var n=Array.from;if("function"!==typeof n)return!1;var m=["raz","dwa"];n=n(m);return!(!n||n===m||"dwa"!==n[1])}},{}],183:[function(b,y,D){var n=b("es6-symbol").iterator,m=b("../../function/is-arguments"),p=b("../../function/is-function"),h=b("../../number/to-pos-integer"),a=b("../../object/valid-callable"),
d=b("../../object/valid-value"),e=b("../../object/is-value"),l=b("../../string/is-string"),k=Array.isArray,c=Function.prototype.call,f={configurable:!0,enumerable:!0,writable:!0,value:null},g=Object.defineProperty;y.exports=function(q,t,u){var w,x;q=Object(d(q));e(t)&&a(t);if(this&&this!==Array&&p(this))var E=this;else{if(!t){if(m(q)){var F=q.length;if(1!==F)return Array.apply(null,q);var z=Array(1);z[0]=q[0];return z}if(k(q)){z=Array(F=q.length);for(w=0;w<F;++w)z[w]=q[w];return z}}z=[]}if(!k(q))if(void 0!==
(w=q[n])){F=a(w).call(q);E&&(z=new E);var B=F.next();for(w=0;!B.done;)B=t?c.call(t,u,B.value,w):B.value,E?(f.value=B,g(z,w,f)):z[w]=B,B=F.next(),++w;F=w}else if(l(q)){F=q.length;E&&(z=new E);for(x=w=0;w<F;++w){B=q[w];if(w+1<F){var C=B.charCodeAt(0);55296<=C&&56319>=C&&(B+=q[++w])}B=t?c.call(t,u,B,x):B;E?(f.value=B,g(z,x,f)):z[x]=B;++x}F=x}if(void 0===F)for(F=h(q.length),E&&(z=new E(F)),w=0;w<F;++w)B=t?c.call(t,u,q[w],w):q[w],E?(f.value=B,g(z,w,f)):z[w]=B;E&&(f.value=null,z.length=F);return z}},{"../../function/is-arguments":184,
"../../function/is-function":185,"../../number/to-pos-integer":191,"../../object/is-value":200,"../../object/valid-callable":209,"../../object/valid-value":211,"../../string/is-string":215,"es6-symbol":225}],184:[function(b,y,D){var n=Object.prototype.toString,m=n.call(function(){return arguments}());y.exports=function(p){return n.call(p)===m}},{}],185:[function(b,y,D){var n=Object.prototype.toString,m=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);y.exports=function(p){return"function"===
typeof p&&m(n.call(p))}},{}],186:[function(b,y,D){y.exports=function(){}},{}],187:[function(b,y,D){y.exports=b("./is-implemented")()?Math.sign:b("./shim")},{"./is-implemented":188,"./shim":189}],188:[function(b,y,D){y.exports=function(){var n=Math.sign;return"function"!==typeof n?!1:1===n(10)&&-1===n(-20)}},{}],189:[function(b,y,D){y.exports=function(n){n=Number(n);return isNaN(n)||0===n?n:0<n?1:-1}},{}],190:[function(b,y,D){var n=b("../math/sign"),m=Math.abs,p=Math.floor;y.exports=function(h){if(isNaN(h))return 0;
h=Number(h);return 0!==h&&isFinite(h)?n(h)*p(m(h)):h}},{"../math/sign":187}],191:[function(b,y,D){var n=b("./to-integer"),m=Math.max;y.exports=function(p){return m(0,n(p))}},{"./to-integer":190}],192:[function(b,y,D){var n=b("./valid-callable"),m=b("./valid-value"),p=Function.prototype.bind,h=Function.prototype.call,a=Object.keys,d=Object.prototype.propertyIsEnumerable;y.exports=function(e,l){return function(k,c,f,g){k=Object(m(k));n(c);var q=a(k);g&&q.sort("function"===typeof g?p.call(g,k):void 0);
"function"!==typeof e&&(e=q[e]);return h.call(e,q,function(t,u){return d.call(k,t)?h.call(c,f,k[t],t,k,u):l})}}},{"./valid-callable":209,"./valid-value":211}],193:[function(b,y,D){y.exports=b("./is-implemented")()?Object.assign:b("./shim")},{"./is-implemented":194,"./shim":195}],194:[function(b,y,D){y.exports=function(){var n=Object.assign;if("function"!==typeof n)return!1;var m={foo:"raz"};n(m,{bar:"dwa"},{trzy:"trzy"});return"razdwatrzy"===m.foo+m.bar+m.trzy}},{}],195:[function(b,y,D){var n=b("../keys"),
m=b("../valid-value"),p=Math.max;y.exports=function(h,a){var d,e,l=p(arguments.length,2);h=Object(m(h));var k=function(c){try{h[c]=a[c]}catch(f){d||(d=f)}};for(e=1;e<l;++e)a=arguments[e],n(a).forEach(k);if(void 0!==d)throw d;return h}},{"../keys":201,"../valid-value":211}],196:[function(b,y,D){var n=b("../array/from"),m=b("./assign"),p=b("./valid-value");y.exports=function(h,a,d){var e=Object(p(h)),l=Object(d);if(e!==h&&!a)return e;var k={};a?n(a,function(c){if(l.ensure||c in h)k[c]=h[c]}):m(k,h);
return k}},{"../array/from":181,"./assign":193,"./valid-value":211}],197:[function(b,y,D){var n=Object.create,m;b("./set-prototype-of/is-implemented")()||(m=b("./set-prototype-of/shim"));y.exports=function(){if(!m||1!==m.level)return n;var p={};var h={};var a={configurable:!1,enumerable:!1,writable:!0,value:void 0};Object.getOwnPropertyNames(Object.prototype).forEach(function(d){h[d]="__proto__"===d?{configurable:!0,enumerable:!1,writable:!0,value:void 0}:a});Object.defineProperties(p,h);Object.defineProperty(m,
"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:p});return function(d,e){return n(null===d?p:d,e)}}()},{"./set-prototype-of/is-implemented":207,"./set-prototype-of/shim":208}],198:[function(b,y,D){y.exports=b("./_iterate")("forEach")},{"./_iterate":192}],199:[function(b,y,D){var n=b("./is-value"),m={function:!0,object:!0};y.exports=function(p){return n(p)&&m[typeof p]||!1}},{"./is-value":200}],200:[function(b,y,D){var n=b("../function/noop")();y.exports=function(m){return m!==n&&null!==
m}},{"../function/noop":186}],201:[function(b,y,D){y.exports=b("./is-implemented")()?Object.keys:b("./shim")},{"./is-implemented":202,"./shim":203}],202:[function(b,y,D){y.exports=function(){try{return Object.keys("primitive"),!0}catch(n){return!1}}},{}],203:[function(b,y,D){var n=b("../is-value"),m=Object.keys;y.exports=function(p){return m(n(p)?Object(p):p)}},{"../is-value":200}],204:[function(b,y,D){var n=b("./valid-callable"),m=b("./for-each"),p=Function.prototype.call;y.exports=function(h,a,
d){var e={};n(a);m(h,function(l,k,c,f){e[k]=p.call(a,d,l,k,c,f)});return e}},{"./for-each":198,"./valid-callable":209}],205:[function(b,y,D){var n=b("./is-value"),m=Array.prototype.forEach,p=Object.create;y.exports=function(h){var a=p(null);m.call(arguments,function(d){if(n(d)){d=Object(d);for(var e in d)a[e]=d[e]}});return a}},{"./is-value":200}],206:[function(b,y,D){y.exports=b("./is-implemented")()?Object.setPrototypeOf:b("./shim")},{"./is-implemented":207,"./shim":208}],207:[function(b,y,D){var n=
Object.create,m=Object.getPrototypeOf,p={};y.exports=function(h){var a=Object.setPrototypeOf;return"function"!==typeof a?!1:m(a((h||n)(null),p))===p}},{}],208:[function(b,y,D){var n=b("../is-object"),m=b("../valid-value"),p=Object.prototype.isPrototypeOf,h=Object.defineProperty,a={configurable:!0,enumerable:!1,writable:!0,value:void 0};var d=function(e,l){m(e);if(null===l||n(l))return e;throw new TypeError("Prototype must be null or an object");};y.exports=function(e){if(!e)return null;if(2===e.level)if(e.set){var l=
e.set;var k=function(c,f){l.call(d(c,f),f);return c}}else k=function(c,f){d(c,f).__proto__=f;return c};else k=function q(f,g){var t;d(f,g);(t=p.call(q.nullPolyfill,f))&&delete q.nullPolyfill.__proto__;null===g&&(g=q.nullPolyfill);f.__proto__=g;t&&h(q.nullPolyfill,"__proto__",a);return f};return Object.defineProperty(k,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})}(function(){var e=Object.create(null),l={},k=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(k){try{var c=
k.set;c.call(e,l)}catch(f){}if(Object.getPrototypeOf(e)===l)return{set:c,level:2}}e.__proto__=l;if(Object.getPrototypeOf(e)===l)return{level:2};e={};e.__proto__=l;return Object.getPrototypeOf(e)===l?{level:1}:!1}());b("../create")},{"../create":197,"../is-object":199,"../valid-value":211}],209:[function(b,y,D){y.exports=function(n){if("function"!==typeof n)throw new TypeError(n+" is not a function");return n}},{}],210:[function(b,y,D){var n=b("./is-object");y.exports=function(m){if(!n(m))throw new TypeError(m+
" is not an Object");return m}},{"./is-object":199}],211:[function(b,y,D){var n=b("./is-value");y.exports=function(m){if(!n(m))throw new TypeError("Cannot use null or undefined");return m}},{"./is-value":200}],212:[function(b,y,D){y.exports=b("./is-implemented")()?String.prototype.contains:b("./shim")},{"./is-implemented":213,"./shim":214}],213:[function(b,y,D){y.exports=function(){return"function"!==typeof"razdwatrzy".contains?!1:!0==="razdwatrzy".contains("dwa")&&!1==="razdwatrzy".contains("foo")}},
{}],214:[function(b,y,D){var n=String.prototype.indexOf;y.exports=function(m,p){return-1<n.call(this,m,p)}},{}],215:[function(b,y,D){var n=Object.prototype.toString,m=n.call("");y.exports=function(p){return"string"===typeof p||p&&"object"===typeof p&&(p instanceof String||n.call(p)===m)||!1}},{}],216:[function(b,y,D){var n=Object.create(null),m=Math.random;y.exports=function(){do var p=m().toString(36).slice(2);while(n[p]);return p}},{}],217:[function(b,y,D){D=b("es5-ext/object/set-prototype-of");
var n=b("es5-ext/string/#/contains"),m=b("d"),p=b("es6-symbol"),h=b("./"),a=Object.defineProperty;var d=y.exports=function(e,l){if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");h.call(this,e);l=l?n.call(l,"key+value")?"key+value":n.call(l,"key")?"key":"value":"value";a(this,"__kind__",m("",l))};D&&D(d,h);delete d.prototype.constructor;d.prototype=Object.create(h.prototype,{_resolve:m(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,
this.__list__[e]]:e})});a(d.prototype,p.toStringTag,m("c","Array Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es5-ext/string/#/contains":212,"es6-symbol":225}],218:[function(b,y,D){var n=b("es5-ext/function/is-arguments"),m=b("es5-ext/object/valid-callable"),p=b("es5-ext/string/is-string"),h=b("./get"),a=Array.isArray,d=Function.prototype.call,e=Array.prototype.some;y.exports=function(l,k,c){var f,g;a(l)||n(l)?f="array":p(l)?f="string":l=h(l);m(k);var q=function(){g=!0};if("array"===
f)e.call(l,function(x){d.call(k,c,x,q);return g});else if("string"===f){var t=l.length;for(f=0;f<t;++f){var u=l[f];if(f+1<t){var w=u.charCodeAt(0);55296<=w&&56319>=w&&(u+=l[++f])}d.call(k,c,u,q);if(g)break}}else for(f=l.next();!f.done;){d.call(k,c,f.value,q);if(g)break;f=l.next()}}},{"./get":219,"es5-ext/function/is-arguments":184,"es5-ext/object/valid-callable":209,"es5-ext/string/is-string":215}],219:[function(b,y,D){var n=b("es5-ext/function/is-arguments"),m=b("es5-ext/string/is-string"),p=b("./array"),
h=b("./string"),a=b("./valid-iterable"),d=b("es6-symbol").iterator;y.exports=function(e){return"function"===typeof a(e)[d]?e[d]():n(e)?new p(e):m(e)?new h(e):new p(e)}},{"./array":217,"./string":222,"./valid-iterable":223,"es5-ext/function/is-arguments":184,"es5-ext/string/is-string":215,"es6-symbol":225}],220:[function(b,y,D){var n=b("es5-ext/array/#/clear");D=b("es5-ext/object/assign");var m=b("es5-ext/object/valid-callable"),p=b("es5-ext/object/valid-value"),h=b("d"),a=b("d/auto-bind"),d=b("es6-symbol"),
e=Object.defineProperty,l=Object.defineProperties,k;y.exports=k=function(c,f){if(!(this instanceof k))throw new TypeError("Constructor requires 'new'");l(this,{__list__:h("w",p(c)),__context__:h("w",f),__nextIndex__:h("w",0)});f&&(m(f.on),f.on("_add",this._onAdd),f.on("_delete",this._onDelete),f.on("_clear",this._onClear))};delete k.prototype.constructor;l(k.prototype,D({_next:h(function(){if(this.__list__){if(this.__redo__){var c=this.__redo__.shift();if(void 0!==c)return c}if(this.__nextIndex__<
this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:h(function(){return this._createResult(this._next())}),_createResult:h(function(c){return void 0===c?{done:!0,value:void 0}:{done:!1,value:this._resolve(c)}}),_resolve:h(function(c){return this.__list__[c]}),_unBind:h(function(){this.__list__=null;delete this.__redo__;this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=
null)}),toString:h(function(){return"[object "+(this[d.toStringTag]||"Object")+"]"})},a({_onAdd:h(function(c){c>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(f,g){f>=c&&(this.__redo__[g]=++f)},this),this.__redo__.push(c)):e(this,"__redo__",h("c",[c])))}),_onDelete:h(function(c){if(!(c>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__)){var f=this.__redo__.indexOf(c);-1!==f&&this.__redo__.splice(f,1);this.__redo__.forEach(function(g,q){g>c&&(this.__redo__[q]=
--g)},this)}}),_onClear:h(function(){this.__redo__&&n.call(this.__redo__);this.__nextIndex__=0})})));e(k.prototype,d.iterator,h(function(){return this}))},{d:155,"d/auto-bind":154,"es5-ext/array/#/clear":180,"es5-ext/object/assign":193,"es5-ext/object/valid-callable":209,"es5-ext/object/valid-value":211,"es6-symbol":225}],221:[function(b,y,D){var n=b("es5-ext/function/is-arguments"),m=b("es5-ext/object/is-value"),p=b("es5-ext/string/is-string"),h=b("es6-symbol").iterator,a=Array.isArray;y.exports=
function(d){return m(d)?a(d)||p(d)||n(d)?!0:"function"===typeof d[h]:!1}},{"es5-ext/function/is-arguments":184,"es5-ext/object/is-value":200,"es5-ext/string/is-string":215,"es6-symbol":225}],222:[function(b,y,D){D=b("es5-ext/object/set-prototype-of");var n=b("d"),m=b("es6-symbol"),p=b("./"),h=Object.defineProperty;var a=y.exports=function(d){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");d=String(d);p.call(this,d);h(this,"__length__",n("",d.length))};D&&D(a,p);delete a.prototype.constructor;
a.prototype=Object.create(p.prototype,{_next:n(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:n(function(d){d=this.__list__[d];if(this.__nextIndex__===this.__length__)return d;var e=d.charCodeAt(0);return 55296<=e&&56319>=e?d+this.__list__[this.__nextIndex__++]:d})});h(a.prototype,m.toStringTag,n("c","String Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es6-symbol":225}],223:[function(b,y,D){var n=b("./is-iterable");
y.exports=function(m){if(!n(m))throw new TypeError(m+" is not iterable");return m}},{"./is-iterable":221}],224:[function(b,y,D){(function(n,m){(function(p,h){"object"===typeof D&&"undefined"!==typeof y?y.exports=h():p.ES6Promise=h()})(this,function(){function p(ua){return"function"===typeof ua}function h(){return function(){return n.nextTick(k)}}function a(){return"undefined"!==typeof L?function(){L(k)}:l()}function d(){var ua=0,ta=new O(k),oa=document.createTextNode("");ta.observe(oa,{characterData:!0});
return function(){oa.data=ua=++ua%2}}function e(){var ua=new MessageChannel;ua.port1.onmessage=k;return function(){return ua.port2.postMessage(0)}}function l(){var ua=setTimeout;return function(){return ua(k,1)}}function k(){for(var ua=0;ua<H;ua+=2)(0,X[ua])(X[ua+1]),X[ua]=void 0,X[ua+1]=void 0;H=0}function c(){try{var ua=Function("return this")().require("vertx");L=ua.runOnLoop||ua.runOnContext;return a()}catch(ta){return l()}}function f(ua,ta){var oa=this,va=new this.constructor(q);void 0===va[ea]&&
J(va);var ma=oa._state;if(ma){var pa=arguments[ma-1];Q(function(){return G(ma,va,pa,oa._result)})}else C(oa,va,ua,ta);return va}function g(ua){if(ua&&"object"===typeof ua&&ua.constructor===this)return ua;var ta=new this(q);E(ta,ua);return ta}function q(){}function t(ua,ta,oa,va){try{ua.call(ta,oa,va)}catch(ma){return ma}}function u(ua,ta,oa){Q(function(va){var ma=!1,pa=t(oa,ta,function(za){ma||(ma=!0,ta!==za?E(va,za):z(va,za))},function(za){ma||(ma=!0,B(va,za))},"Settle: "+(va._label||" unknown promise"));
!ma&&pa&&(ma=!0,B(va,pa))},ua)}function w(ua,ta){ta._state===ia?z(ua,ta._result):ta._state===ha?B(ua,ta._result):C(ta,void 0,function(oa){return E(ua,oa)},function(oa){return B(ua,oa)})}function x(ua,ta,oa){ta.constructor===ua.constructor&&oa===f&&ta.constructor.resolve===g?w(ua,ta):void 0===oa?z(ua,ta):p(oa)?u(ua,ta,oa):z(ua,ta)}function E(ua,ta){if(ua===ta)B(ua,new TypeError("You cannot resolve a promise with itself"));else{var oa=typeof ta;if(null===ta||"object"!==oa&&"function"!==oa)z(ua,ta);
else{oa=void 0;try{oa=ta.then}catch(va){B(ua,va);return}x(ua,ta,oa)}}}function F(ua){ua._onerror&&ua._onerror(ua._result);v(ua)}function z(ua,ta){ua._state===ca&&(ua._result=ta,ua._state=ia,0!==ua._subscribers.length&&Q(v,ua))}function B(ua,ta){ua._state===ca&&(ua._state=ha,ua._result=ta,Q(F,ua))}function C(ua,ta,oa,va){var ma=ua._subscribers,pa=ma.length;ua._onerror=null;ma[pa]=ta;ma[pa+ia]=oa;ma[pa+ha]=va;0===pa&&ua._state&&Q(v,ua)}function v(ua){var ta=ua._subscribers,oa=ua._state;if(0!==ta.length){for(var va,
ma,pa=ua._result,za=0;za<ta.length;za+=3)va=ta[za],ma=ta[za+oa],va?G(oa,va,ma,pa):ma(pa);ua._subscribers.length=0}}function G(ua,ta,oa,va){var ma=p(oa),pa=void 0,za=void 0,qa=!0;if(ma){try{pa=oa(va)}catch(Ca){qa=!1,za=Ca}if(ta===pa){B(ta,new TypeError("A promises callback cannot return that same promise."));return}}else pa=va;ta._state===ca&&(ma&&qa?E(ta,pa):!1===qa?B(ta,za):ua===ia?z(ta,pa):ua===ha&&B(ta,pa))}function I(ua,ta){try{ta(function(oa){E(ua,oa)},function(oa){B(ua,oa)})}catch(oa){B(ua,
oa)}}function J(ua){ua[ea]=fa++;ua._state=void 0;ua._result=void 0;ua._subscribers=[]}var K=void 0,N=K=Array.isArray?Array.isArray:function(ua){return"[object Array]"===Object.prototype.toString.call(ua)},H=0,L=void 0,P=void 0,Q=function(ua,ta){X[H]=ua;X[H+1]=ta;H+=2;2===H&&(P?P(k):da())},S=(K="undefined"!==typeof window?window:void 0)||{},O=S.MutationObserver||S.WebKitMutationObserver;S="undefined"===typeof self&&"undefined"!==typeof n&&"[object process]"==={}.toString.call(n);var U="undefined"!==
typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,X=Array(1E3),da=void 0;da=S?h():O?d():U?e():void 0===K&&"function"===typeof b?c():l();var ea=Math.random().toString(36).substring(2),ca=void 0,ia=1,ha=2,fa=0,na=function(){function ua(ta,oa){this._instanceConstructor=ta;this.promise=new ta(q);this.promise[ea]||J(this.promise);N(oa)?(this._remaining=this.length=oa.length,this._result=Array(this.length),0===this.length?z(this.promise,this._result):(this.length=
this.length||0,this._enumerate(oa),0===this._remaining&&z(this.promise,this._result))):B(this.promise,Error("Array Methods must be provided an Array"))}ua.prototype._enumerate=function(ta){for(var oa=0;this._state===ca&&oa<ta.length;oa++)this._eachEntry(ta[oa],oa)};ua.prototype._eachEntry=function(ta,oa){var va=this._instanceConstructor,ma=va.resolve;if(ma===g){var pa=ma=void 0,za=!1;try{ma=ta.then}catch(qa){za=!0,pa=qa}ma===f&&ta._state!==ca?this._settledAt(ta._state,oa,ta._result):"function"!==
typeof ma?(this._remaining--,this._result[oa]=ta):va===sa?(va=new va(q),za?B(va,pa):x(va,ta,ma),this._willSettleAt(va,oa)):this._willSettleAt(new va(function(qa){return qa(ta)}),oa)}else this._willSettleAt(ma(ta),oa)};ua.prototype._settledAt=function(ta,oa,va){var ma=this.promise;ma._state===ca&&(this._remaining--,ta===ha?B(ma,va):this._result[oa]=va);0===this._remaining&&z(ma,this._result)};ua.prototype._willSettleAt=function(ta,oa){var va=this;C(ta,void 0,function(ma){return va._settledAt(ia,oa,
ma)},function(ma){return va._settledAt(ha,oa,ma)})};return ua}(),sa=function(){function ua(ta){this[ea]=fa++;this._result=this._state=void 0;this._subscribers=[];if(q!==ta){if("function"!==typeof ta)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof ua)I(this,ta);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}ua.prototype.catch=
function(ta){return this.then(null,ta)};ua.prototype.finally=function(ta){var oa=this.constructor;return p(ta)?this.then(function(va){return oa.resolve(ta()).then(function(){return va})},function(va){return oa.resolve(ta()).then(function(){throw va;})}):this.then(ta,ta)};return ua}();sa.prototype.then=f;sa.all=function(ua){return(new na(this,ua)).promise};sa.race=function(ua){var ta=this;return N(ua)?new ta(function(oa,va){for(var ma=ua.length,pa=0;pa<ma;pa++)ta.resolve(ua[pa]).then(oa,va)}):new ta(function(oa,
va){return va(new TypeError("You must pass an array to race."))})};sa.resolve=g;sa.reject=function(ua){var ta=new this(q);B(ta,ua);return ta};sa._setScheduler=function(ua){P=ua};sa._setAsap=function(ua){Q=ua};sa._asap=Q;sa.polyfill=function(){var ua=void 0;if("undefined"!==typeof m)ua=m;else if("undefined"!==typeof self)ua=self;else try{ua=Function("return this")()}catch(va){throw Error("polyfill failed because global object is unavailable in this environment");}var ta=ua.Promise;if(ta){var oa=null;
try{oa=Object.prototype.toString.call(ta.resolve())}catch(va){}if("[object Promise]"===oa&&!ta.cast)return}ua.Promise=sa};return sa.Promise=sa})}).call(this,b("_process"),"undefined"!==typeof xa?xa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{_process:500}],225:[function(b,y,D){y.exports=b("./is-implemented")()?b("ext/global-this").Symbol:b("./polyfill")},{"./is-implemented":226,"./polyfill":231,"ext/global-this":238}],226:[function(b,y,D){var n=b("ext/global-this"),m={object:!0,
symbol:!0};y.exports=function(){var p=n.Symbol;if("function"!==typeof p)return!1;var h=p("test symbol");try{String(h)}catch(a){return!1}return m[typeof p.iterator]&&m[typeof p.toPrimitive]&&m[typeof p.toStringTag]?!0:!1}},{"ext/global-this":238}],227:[function(b,y,D){y.exports=function(n){return n?"symbol"===typeof n?!0:n.constructor&&"Symbol"===n.constructor.name?"Symbol"===n[n.constructor.toStringTag]:!1:!1}},{}],228:[function(b,y,D){var n=b("d");b=Object.create;var m=Object.defineProperty,p=Object.prototype,
h=b(null);y.exports=function(a){for(var d=0,e,l;h[a+(d||"")];)++d;a+=d||"";h[a]=!0;e="@@"+a;m(p,e,n.gs(null,function(k){l||(l=!0,m(this,e,n(k)),l=!1)}));return e}},{d:155}],229:[function(b,y,D){var n=b("d"),m=b("ext/global-this").Symbol;y.exports=function(p){return Object.defineProperties(p,{hasInstance:n("",m&&m.hasInstance||p("hasInstance")),isConcatSpreadable:n("",m&&m.isConcatSpreadable||p("isConcatSpreadable")),iterator:n("",m&&m.iterator||p("iterator")),match:n("",m&&m.match||p("match")),replace:n("",
m&&m.replace||p("replace")),search:n("",m&&m.search||p("search")),species:n("",m&&m.species||p("species")),split:n("",m&&m.split||p("split")),toPrimitive:n("",m&&m.toPrimitive||p("toPrimitive")),toStringTag:n("",m&&m.toStringTag||p("toStringTag")),unscopables:n("",m&&m.unscopables||p("unscopables"))})}},{d:155,"ext/global-this":238}],230:[function(b,y,D){var n=b("d"),m=b("../../../validate-symbol"),p=Object.create(null);y.exports=function(h){return Object.defineProperties(h,{for:n(function(a){return p[a]?
p[a]:p[a]=h(String(a))}),keyFor:n(function(a){var d;m(a);for(d in p)if(p[d]===a)return d})})}},{"../../../validate-symbol":232,d:155}],231:[function(b,y,D){var n=b("d"),m=b("./validate-symbol"),p=b("ext/global-this").Symbol,h=b("./lib/private/generate-name");D=b("./lib/private/setup/standard-symbols");b=b("./lib/private/setup/symbol-registry");var a=Object.create,d=Object.defineProperties,e=Object.defineProperty,l;if("function"===typeof p)try{String(p());var k=!0}catch(f){}else p=null;var c=function(f){if(this instanceof
c)throw new TypeError("Symbol is not a constructor");return l(f)};y.exports=l=function q(g){if(this instanceof q)throw new TypeError("Symbol is not a constructor");if(k)return p(g);var t=a(c.prototype);g=void 0===g?"":String(g);return d(t,{__description__:n("",g),__name__:n("",h(g))})};D(l);b(l);d(c.prototype,{constructor:n(l),toString:n("",function(){return this.__name__})});d(l.prototype,{toString:n(function(){return"Symbol ("+m(this).__description__+")"}),valueOf:n(function(){return m(this)})});
e(l.prototype,l.toPrimitive,n("",function(){var g=m(this);return"symbol"===typeof g?g:g.toString()}));e(l.prototype,l.toStringTag,n("c","Symbol"));e(c.prototype,l.toStringTag,n("c",l.prototype[l.toStringTag]));e(c.prototype,l.toPrimitive,n("c",l.prototype[l.toPrimitive]))},{"./lib/private/generate-name":228,"./lib/private/setup/standard-symbols":229,"./lib/private/setup/symbol-registry":230,"./validate-symbol":232,d:155,"ext/global-this":238}],232:[function(b,y,D){var n=b("./is-symbol");y.exports=
function(m){if(!n(m))throw new TypeError(m+" is not a symbol");return m}},{"./is-symbol":227}],233:[function(b,y,D){y.exports=b("./is-implemented")()?WeakMap:b("./polyfill")},{"./is-implemented":234,"./polyfill":236}],234:[function(b,y,D){y.exports=function(){var n;if("function"!==typeof WeakMap)return!1;try{var m=new WeakMap([[n={},"one"],[{},"two"],[{},"three"]])}catch(p){return!1}return"[object WeakMap]"!==String(m)||"function"!==typeof m.set||m.set({},1)!==m||"function"!==typeof m.delete||"function"!==
typeof m.has||"one"!==m.get(n)?!1:!0}},{}],235:[function(b,y,D){b="function"!==typeof WeakMap?!1:"[object WeakMap]"===Object.prototype.toString.call(new WeakMap);y.exports=b},{}],236:[function(b,y,D){var n=b("es5-ext/object/is-value"),m=b("es5-ext/object/set-prototype-of"),p=b("es5-ext/object/valid-object"),h=b("es5-ext/object/valid-value"),a=b("es5-ext/string/random-uniq"),d=b("d"),e=b("es6-iterator/get"),l=b("es6-iterator/for-of");D=b("es6-symbol").toStringTag;var k=b("./is-native-implemented"),
c=Array.isArray,f=Object.defineProperty,g=Object.prototype.hasOwnProperty,q=Object.getPrototypeOf,t;y.exports=t=function(u){if(!(this instanceof t))throw new TypeError("Constructor requires 'new'");var w=k&&m&&WeakMap!==t?m(new WeakMap,q(this)):this;n(u)&&(c(u)||(u=e(u)));f(w,"__weakMapData__",d("c","$weakMap$"+a()));if(!u)return w;l(u,function(x){h(x);w.set(x[0],x[1])});return w};k&&(m&&m(t,WeakMap),t.prototype=Object.create(WeakMap.prototype,{constructor:d(t)}));Object.defineProperties(t.prototype,
{delete:d(function(u){return g.call(p(u),this.__weakMapData__)?(delete u[this.__weakMapData__],!0):!1}),get:d(function(u){if(g.call(p(u),this.__weakMapData__))return u[this.__weakMapData__]}),has:d(function(u){return g.call(p(u),this.__weakMapData__)}),set:d(function(u,w){f(p(u),this.__weakMapData__,d("c",w));return this}),toString:d(function(){return"[object WeakMap]"})});f(t.prototype,D,d("c","WeakMap"))},{"./is-native-implemented":235,d:155,"es5-ext/object/is-value":200,"es5-ext/object/set-prototype-of":206,
"es5-ext/object/valid-object":210,"es5-ext/object/valid-value":211,"es5-ext/string/random-uniq":216,"es6-iterator/for-of":218,"es6-iterator/get":219,"es6-symbol":225}],237:[function(b,y,D){var n=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw Error("Unable to resolve global `this`");};y.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(m){return n()}try{return __global__?
__global__:n()}finally{delete Object.prototype.__global__}}()},{}],238:[function(b,y,D){y.exports=b("./is-implemented")()?globalThis:b("./implementation")},{"./implementation":237,"./is-implemented":239}],239:[function(b,y,D){y.exports=function(){return"object"===typeof globalThis&&globalThis?globalThis.Array===Array:!1}},{}],240:[function(b,y,D){y.exports=function(n,m,p){m=m||0;p=p||1;return[[n[12]+n[0],n[13]+n[1],n[14]+n[2],n[15]+n[3]],[n[12]-n[0],n[13]-n[1],n[14]-n[2],n[15]-n[3]],[n[12]+n[4],n[13]+
n[5],n[14]+n[6],n[15]+n[7]],[n[12]-n[4],n[13]-n[5],n[14]-n[6],n[15]-n[7]],[m*n[12]+n[8],m*n[13]+n[9],m*n[14]+n[10],m*n[15]+n[11]],[p*n[12]-n[8],p*n[13]-n[9],p*n[14]-n[10],p*n[15]-n[11]]]}},{}],241:[function(b,y,D){var n=b("is-string-blank");y.exports=function(m){var p=typeof m;if("string"===p){if(p=m,m=+m,0===m&&n(p))return!1}else if("number"!==p)return!1;return 1>m-m}},{"is-string-blank":444}],242:[function(b,y,D){function n(d,e,l){return Math.min(e,Math.max(d,l))}function m(d,e,l){this.dimension=
d.length;this.bounds=[Array(this.dimension),Array(this.dimension)];for(var k=0;k<this.dimension;++k)this.bounds[0][k]=-Infinity,this.bounds[1][k]=Infinity;this._state=d.slice().reverse();this._velocity=e.slice().reverse();this._time=[l];this._scratch=[d.slice(),d.slice(),d.slice(),d.slice(),d.slice()]}function p(d){for(var e=Array(d),l=0;l<d;++l)e[l]=0;return e}y.exports=function(d,e,l){switch(arguments.length){case 0:return new m([0],[0],0);case 1:if("number"===typeof d){var k=p(d);return new m(k,
k,0)}return new m(d,p(d.length),0);case 2:if("number"===typeof e)return k=p(d.length),new m(d,k,+e);l=0;case 3:if(d.length!==e.length)throw Error("state and velocity lengths must match");return new m(d,e,l)}};var h=b("cubic-hermite"),a=b("binary-search-bounds");b=m.prototype;b.flush=function(d){d=a.gt(this._time,d)-1;0>=d||(this._time.splice(0,d),this._state.splice(0,d*this.dimension),this._velocity.splice(0,d*this.dimension))};b.curve=function(d){var e=this._time,l=e.length,k=a.le(e,d),c=this._scratch[0],
f=this._state,g=this._velocity,q=this.dimension,t=this.bounds;if(0>k){var u=q-1;for(e=0;e<q;++e,--u)c[e]=f[u]}else if(k>=l-1)for(u=f.length-1,d-=e[l-1],e=0;e<q;++e,--u)c[e]=f[u]+d*g[u];else{u=q*(k+1)-1;l=e[k];k=e[k+1]-l||1;var w=this._scratch[1],x=this._scratch[2],E=this._scratch[3],F=this._scratch[4],z=!0;for(e=0;e<q;++e,--u)w[e]=f[u],E[e]=g[u]*k,x[e]=f[u+q],F[e]=g[u+q]*k,z=z&&w[e]===x[e]&&E[e]===F[e]&&0===E[e];if(z)for(e=0;e<q;++e)c[e]=w[e];else h(w,E,x,F,(d-l)/k,c)}f=t[0];t=t[1];for(e=0;e<q;++e)c[e]=
n(f[e],t[e],c[e]);return c};b.dcurve=function(d){var e=this._time,l=e.length,k=a.le(e,d),c=this._scratch[0],f=this._state,g=this._velocity,q=this.dimension;if(k>=l-1)for(l=f.length-1,e=0;e<q;++e,--l)c[e]=g[l];else{l=q*(k+1)-1;var t=e[k];k=e[k+1]-t||1;var u=this._scratch[1],w=this._scratch[2],x=this._scratch[3],E=this._scratch[4],F=!0;for(e=0;e<q;++e,--l)u[e]=f[l],x[e]=g[l]*k,w[e]=f[l+q],E[e]=g[l+q]*k,F=F&&u[e]===w[e]&&x[e]===E[e]&&0===x[e];if(F)for(e=0;e<q;++e)c[e]=0;else for(h.derivative(u,x,w,E,
(d-t)/k,c),e=0;e<q;++e)c[e]/=k}return c};b.lastT=function(){var d=this._time;return d[d.length-1]};b.stable=function(){for(var d=this._velocity,e=d.length,l=this.dimension-1;0<=l;--l)if(d[--e])return!1;return!0};b.jump=function(d){var e=this.lastT(),l=this.dimension;if(!(d<e||arguments.length!==l+1)){var k=this._state,c=this._velocity,f=k.length-this.dimension,g=this.bounds,q=g[0];g=g[1];this._time.push(e,d);for(e=0;2>e;++e)for(var t=0;t<l;++t)k.push(k[f++]),c.push(0);this._time.push(d);for(t=l;0<
t;--t)k.push(n(q[t-1],g[t-1],arguments[t])),c.push(0)}};b.push=function(d){var e=this.lastT(),l=this.dimension;if(!(d<e||arguments.length!==l+1)){var k=this._state,c=this._velocity,f=k.length-this.dimension,g=d-e,q=this.bounds;e=q[0];q=q[1];g=1E-6<g?1/g:0;for(this._time.push(d);0<l;--l){var t=n(e[l-1],q[l-1],arguments[l]);k.push(t);c.push((t-k[f++])*g)}}};b.set=function(d){var e=this.dimension;if(!(d<this.lastT()||arguments.length!==e+1)){var l=this._state,k=this._velocity,c=this.bounds,f=c[0];c=
c[1];for(this._time.push(d);0<e;--e)l.push(n(f[e-1],c[e-1],arguments[e])),k.push(0)}};b.move=function(d){var e=this.lastT(),l=this.dimension;if(!(d<=e||arguments.length!==l+1)){var k=this._state,c=this._velocity,f=k.length-this.dimension,g=this.bounds,q=g[0];g=g[1];e=d-e;e=1E-6<e?1/e:0;for(this._time.push(d);0<l;--l){var t=arguments[l];k.push(n(q[l-1],g[l-1],k[f++]+t));c.push(t*e)}}};b.idle=function(d){var e=this.lastT();if(!(d<e)){var l=this.dimension,k=this._state,c=this._velocity,f=k.length-l,
g=this.bounds,q=g[0];g=g[1];e=d-e;this._time.push(d);for(d=l-1;0<=d;--d)k.push(n(q[d],g[d],k[f]+e*c[f])),c.push(0),f+=1}}},{"binary-search-bounds":243,"cubic-hermite":150}],243:[function(b,y,D){function n(p,h,a,d,e,l){p=["function ",p,"(a,l,h,",d.join(","),"){",l?"":"var i\x3d",a?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da",e?".get(m)":"[m]"];l?0>h.indexOf("c")?p.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):p.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):
p.push(";if(",h,"){i\x3dm;");a?p.push("l\x3dm+1}else{h\x3dm-1}"):p.push("h\x3dm-1}else{l\x3dm+1}");p.push("}");l?p.push("return -1};"):p.push("return i};");return p.join("")}function m(p,h,a,d){return(new Function([n("A","x"+p+"y",h,["y"],!1,d),n("B","x"+p+"y",h,["y"],!0,d),n("P","c(x,y)"+p+"0",h,["y","c"],!1,d),n("Q","c(x,y)"+p+"0",h,["y","c"],!0,d),"function dispatchBsearch",a,"(a,y,c,l,h){if(a.shape){if(typeof(c)\x3d\x3d\x3d'function'){return Q(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
a].join("")))()}y.exports={ge:m("\x3e\x3d",!1,"GE"),gt:m("\x3e",!1,"GT"),lt:m("\x3c",!0,"LT"),le:m("\x3c\x3d",!0,"LE"),eq:m("-",!0,"EQ",!0)}},{}],244:[function(b,y,D){var n=b("dtype");y.exports=function(m,p,h){if(!m)throw new TypeError("must specify data as first parameter");h=+(h||0)|0;if(Array.isArray(m)&&m[0]&&"number"===typeof m[0][0]){var a=m[0].length,d=m.length*a;p&&"string"!==typeof p||(p=new (n(p||"float32"))(d+h));var e=p.length-h;if(d!==e)throw Error("source length "+d+" ("+a+"x"+m.length+
") does not match destination length "+e);for(d=0;d<m.length;d++)for(e=0;e<a;e++)p[h++]=null===m[d][e]?NaN:m[d][e]}else if(p&&"string"!==typeof p)p.set(m,h);else if(a=n(p||"float32"),Array.isArray(m)||"array"===p)for(p=new a(m.length+h),d=0,a=p.length;h<a;h++,d++)p[h]=null===m[d]?NaN:m[d];else 0===h?p=new a(m):(p=new a(m.length+h),p.set(m,h));return p}},{dtype:175}],245:[function(b,y,D){var n=b("css-font/stringify"),m=[32,126];y.exports=function(p){p=p||{};var h=p.shape?p.shape:p.canvas?[p.canvas.width,
p.canvas.height]:[512,512],a=p.canvas||document.createElement("canvas"),d=p.font,e="number"===typeof p.step?[p.step,p.step]:p.step||[32,32];p=p.chars||m;d&&"string"!==typeof d&&(d=n(d));if(!Array.isArray(p))p=String(p).split("");else if(2===p.length&&"number"===typeof p[0]&&"number"===typeof p[1]){for(var l=[],k=p[0],c=0;k<=p[1];k++)l[c++]=String.fromCharCode(k);p=l}h=h.slice();a.width=h[0];a.height=h[1];l=a.getContext("2d");l.fillStyle="#000";l.fillRect(0,0,a.width,a.height);l.font=d;l.textAlign=
"center";l.textBaseline="middle";l.fillStyle="#fff";d=e[0]/2;c=e[1]/2;for(k=0;k<p.length;k++)l.fillText(p[k],d,c),(d+=e[0])>h[0]-e[0]/2&&(d=e[0]/2,c+=e[1]);return a}},{"css-font/stringify":147}],246:[function(b,y,D){function n(a,d){d||(d={});if("string"===typeof a||Array.isArray(a))d.family=a;var e=Array.isArray(d.family)?d.family.join(", "):d.family;if(!e)throw Error("`family` must be defined");var l=d.size||d.fontSize||d.em||48;a=[d.style||d.fontStyle||"",d.weight||d.fontWeight||"",l].join(" ")+
"px "+e;var k=d.origin||"top";if(n.cache[e]&&l<=n.cache[e].em)return m(n.cache[e],k);var c=d.canvas||n.canvas,f=c.getContext("2d"),g=void 0!==d.upper?d.upper:"H",q=void 0!==d.lower?d.lower:"x",t=void 0!==d.descent?d.descent:"p",u=void 0!==d.ascent?d.ascent:"h",w=void 0!==d.tittle?d.tittle:"i";d=void 0!==d.overshoot?d.overshoot:"O";var x=Math.ceil(1.5*l);c.height=x;c.width=.5*x;f.font=a;a={top:0};f.clearRect(0,0,x,x);f.textBaseline="top";f.fillStyle="black";f.fillText("H",0,0);c=p(f.getImageData(0,
0,x,x));f.clearRect(0,0,x,x);f.textBaseline="bottom";f.fillText("H",0,x);var E=p(f.getImageData(0,0,x,x));a.lineHeight=a.bottom=x-E+c;f.clearRect(0,0,x,x);f.textBaseline="alphabetic";f.fillText("H",0,x);E=p(f.getImageData(0,0,x,x));E=x-E-1+c;a.baseline=a.alphabetic=E;f.clearRect(0,0,x,x);f.textBaseline="middle";f.fillText("H",0,.5*x);var F=p(f.getImageData(0,0,x,x));a.median=a.middle=x-F-1+c-.5*x;f.clearRect(0,0,x,x);f.textBaseline="hanging";f.fillText("H",0,.5*x);F=p(f.getImageData(0,0,x,x));a.hanging=
x-F-1+c-.5*x;f.clearRect(0,0,x,x);f.textBaseline="ideographic";f.fillText("H",0,x);F=p(f.getImageData(0,0,x,x));a.ideographic=x-F-1+c;g&&(f.clearRect(0,0,x,x),f.textBaseline="top",f.fillText(g,0,0),a.upper=p(f.getImageData(0,0,x,x)),a.capHeight=a.baseline-a.upper);q&&(f.clearRect(0,0,x,x),f.textBaseline="top",f.fillText(q,0,0),a.lower=p(f.getImageData(0,0,x,x)),a.xHeight=a.baseline-a.lower);w&&(f.clearRect(0,0,x,x),f.textBaseline="top",f.fillText(w,0,0),a.tittle=p(f.getImageData(0,0,x,x)));u&&(f.clearRect(0,
0,x,x),f.textBaseline="top",f.fillText(u,0,0),a.ascent=p(f.getImageData(0,0,x,x)));t&&(f.clearRect(0,0,x,x),f.textBaseline="top",f.fillText(t,0,0),a.descent=h(f.getImageData(0,0,x,x)));d&&(f.clearRect(0,0,x,x),f.textBaseline="top",f.fillText(d,0,0),f=h(f.getImageData(0,0,x,x)),a.overshoot=f-E);for(var z in a)a[z]/=l;a.em=l;n.cache[e]=a;return m(a,k)}function m(a,d){var e={};"string"===typeof d&&(d=a[d]);for(var l in a)"em"!==l&&(e[l]=a[l]-d);return e}function p(a){var d=a.height;a=a.data;for(var e=
3;e<a.length;e+=4)if(0!==a[e])return Math.floor(.25*(e-3)/d)}function h(a){var d=a.height;a=a.data;for(var e=a.length-1;0<e;e-=4)if(0!==a[e])return Math.floor(.25*(e-3)/d)}y.exports=n;n.canvas=document.createElement("canvas");n.cache={}},{}],247:[function(b,y,D){function n(g,q,t,u,w,x){this._color=g;this.key=q;this.value=t;this.left=u;this.right=w;this._count=x}function m(g){return new n(g._color,g.key,g.value,g.left,g.right,g._count)}function p(g,q){return new n(g,q.key,q.value,q.left,q.right,q._count)}
function h(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function a(g,q){this._compare=g;this.root=q}function d(g,q){if(q.left){var t=d(g,q.left);if(t)return t}if(t=g(q.key,q.value))return t;if(q.right)return d(g,q.right)}function e(g,q,t,u){if(0>=q(g,u.key)){if(u.left){var w=e(g,q,t,u.left);if(w)return w}if(w=t(u.key,u.value))return w}if(u.right)return e(g,q,t,u.right)}function l(g,q,t,u,w){var x=t(g,w.key),E=t(q,w.key);if(0>=x&&(w.left&&(x=l(g,q,t,u,w.left))||0<E&&(x=u(w.key,
w.value))))return x;if(0<E&&w.right)return l(g,q,t,u,w.right)}function k(g,q){this.tree=g;this._stack=q}function c(g,q){g.key=q.key;g.value=q.value;g.left=q.left;g.right=q.right;g._color=q._color;g._count=q._count}function f(g,q){return g<q?-1:g>q?1:0}y.exports=function(g){return new a(g||f,null)};b=a.prototype;Object.defineProperty(b,"keys",{get:function(){var g=[];this.forEach(function(q,t){g.push(q)});return g}});Object.defineProperty(b,"values",{get:function(){var g=[];this.forEach(function(q,
t){g.push(t)});return g}});Object.defineProperty(b,"length",{get:function(){return this.root?this.root._count:0}});b.insert=function(g,q){for(var t=this._compare,u=this.root,w=[],x=[];u;){var E=t(g,u.key);w.push(u);x.push(E);u=0>=E?u.left:u.right}w.push(new n(0,g,q,null,null,1));for(g=w.length-2;0<=g;--g)u=w[g],w[g]=0>=x[g]?new n(u._color,u.key,u.value,w[g+1],u.right,u._count+1):new n(u._color,u.key,u.value,u.left,w[g+1],u._count+1);for(g=w.length-1;1<g;--g){x=w[g-1];u=w[g];if(1===x._color||1===u._color)break;
q=w[g-2];if(q.left===x)if(x.left===u)if((E=q.right)&&0===E._color)x._color=1,q.right=p(1,E),q._color=0,--g;else{q._color=0;q.left=x.right;x._color=1;x.right=q;w[g-2]=x;w[g-1]=u;h(q);h(x);3<=g&&(g=w[g-3],g.left===q?g.left=x:g.right=x);break}else if((E=q.right)&&0===E._color)x._color=1,q.right=p(1,E),q._color=0,--g;else{x.right=u.left;q._color=0;q.left=u.right;u._color=1;u.left=x;u.right=q;w[g-2]=u;w[g-1]=x;h(q);h(x);h(u);3<=g&&(g=w[g-3],g.left===q?g.left=u:g.right=u);break}else if(x.right===u)if((E=
q.left)&&0===E._color)x._color=1,q.left=p(1,E),q._color=0,--g;else{q._color=0;q.right=x.left;x._color=1;x.left=q;w[g-2]=x;w[g-1]=u;h(q);h(x);3<=g&&(g=w[g-3],g.right===q?g.right=x:g.left=x);break}else if((E=q.left)&&0===E._color)x._color=1,q.left=p(1,E),q._color=0,--g;else{x.left=u.right;q._color=0;q.right=u.left;u._color=1;u.right=x;u.left=q;w[g-2]=u;w[g-1]=x;h(q);h(x);h(u);3<=g&&(g=w[g-3],g.right===q?g.right=u:g.left=u);break}}w[0]._color=1;return new a(t,w[0])};b.forEach=function(g,q,t){if(this.root)switch(arguments.length){case 1:return d(g,
this.root);case 2:return e(q,this._compare,g,this.root);case 3:if(!(0<=this._compare(q,t)))return l(q,t,this._compare,g,this.root)}};Object.defineProperty(b,"begin",{get:function(){for(var g=[],q=this.root;q;)g.push(q),q=q.left;return new k(this,g)}});Object.defineProperty(b,"end",{get:function(){for(var g=[],q=this.root;q;)g.push(q),q=q.right;return new k(this,g)}});b.at=function(g){if(0>g)return new k(this,[]);for(var q=this.root,t=[];;){t.push(q);if(q.left){if(g<q.left._count){q=q.left;continue}g-=
q.left._count}if(!g)return new k(this,t);--g;if(q.right){if(g>=q.right._count)break;q=q.right}else break}return new k(this,[])};b.ge=function(g){for(var q=this._compare,t=this.root,u=[],w=0;t;){var x=q(g,t.key);u.push(t);0>=x&&(w=u.length);t=0>=x?t.left:t.right}u.length=w;return new k(this,u)};b.gt=function(g){for(var q=this._compare,t=this.root,u=[],w=0;t;){var x=q(g,t.key);u.push(t);0>x&&(w=u.length);t=0>x?t.left:t.right}u.length=w;return new k(this,u)};b.lt=function(g){for(var q=this._compare,
t=this.root,u=[],w=0;t;){var x=q(g,t.key);u.push(t);0<x&&(w=u.length);t=0>=x?t.left:t.right}u.length=w;return new k(this,u)};b.le=function(g){for(var q=this._compare,t=this.root,u=[],w=0;t;){var x=q(g,t.key);u.push(t);0<=x&&(w=u.length);t=0>x?t.left:t.right}u.length=w;return new k(this,u)};b.find=function(g){for(var q=this._compare,t=this.root,u=[];t;){var w=q(g,t.key);u.push(t);if(0===w)return new k(this,u);t=0>=w?t.left:t.right}return new k(this,[])};b.remove=function(g){return(g=this.find(g))?
g.remove():this};b.get=function(g){for(var q=this._compare,t=this.root;t;){var u=q(g,t.key);if(0===u)return t.value;t=0>=u?t.left:t.right}};b=k.prototype;Object.defineProperty(b,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(b,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});b.clone=function(){return new k(this.tree,this._stack.slice())};b.remove=function(){var g=this._stack;if(0===g.length)return this.tree;var q=
Array(g.length),t=g[g.length-1];q[q.length-1]=new n(t._color,t.key,t.value,t.left,t.right,t._count);for(var u=g.length-2;0<=u;--u)t=g[u],q[u]=t.left===g[u+1]?new n(t._color,t.key,t.value,q[u+1],t.right,t._count):new n(t._color,t.key,t.value,t.left,q[u+1],t._count);t=q[q.length-1];if(t.left&&t.right){g=q.length;for(t=t.left;t.right;)q.push(t),t=t.right;u=q[g-1];q.push(new n(t._color,u.key,u.value,t.left,t.right,t._count));q[g-1].key=t.key;q[g-1].value=t.value;for(u=q.length-2;u>=g;--u)t=q[u],q[u]=
new n(t._color,t.key,t.value,t.left,q[u+1],t._count);q[g-1].left=q[g]}t=q[q.length-1];if(0===t._color)for(u=q[q.length-2],u.left===t?u.left=null:u.right===t&&(u.right=null),q.pop(),u=0;u<q.length;++u)q[u]._count--;else if(t.left||t.right)for(t.left?c(t,t.left):t.right&&c(t,t.right),t._color=1,u=0;u<q.length-1;++u)q[u]._count--;else{if(1===q.length)return new a(this.tree._compare,null);for(u=0;u<q.length;++u)q[u]._count--;u=q[q.length-2];for(var w,x,E,F=q.length-1;0<=F;--F){g=q[F];if(0===F){g._color=
1;break}w=q[F-1];if(w.left===g){x=w.right;if(x.right&&0===x.right._color){x=w.right=m(x);E=x.right=m(x.right);w.right=x.left;x.left=w;x.right=E;x._color=w._color;g._color=1;w._color=1;E._color=1;h(w);h(x);if(1<F){var z=q[F-2];z.left===w?z.left=x:z.right=x}q[F-1]=x;break}else if(x.left&&0===x.left._color){x=w.right=m(x);E=x.left=m(x.left);w.right=E.left;x.left=E.right;E.left=w;E.right=x;E._color=w._color;w._color=1;x._color=1;g._color=1;h(w);h(x);h(E);1<F&&(z=q[F-2],z.left===w?z.left=E:z.right=E);
q[F-1]=E;break}if(1===x._color)if(0===w._color){w._color=1;w.right=p(0,x);break}else w.right=p(0,x);else x=m(x),w.right=x.left,x.left=w,x._color=w._color,w._color=0,h(w),h(x),1<F&&(z=q[F-2],z.left===w?z.left=x:z.right=x),q[F-1]=x,q[F]=w,F+1<q.length?q[F+1]=g:q.push(g),F+=2}else{x=w.left;if(x.left&&0===x.left._color){x=w.left=m(x);E=x.left=m(x.left);w.left=x.right;x.right=w;x.left=E;x._color=w._color;g._color=1;w._color=1;E._color=1;h(w);h(x);1<F&&(z=q[F-2],z.right===w?z.right=x:z.left=x);q[F-1]=x;
break}else if(x.right&&0===x.right._color){x=w.left=m(x);E=x.right=m(x.right);w.left=E.right;x.right=E.left;E.right=w;E.left=x;E._color=w._color;w._color=1;x._color=1;g._color=1;h(w);h(x);h(E);1<F&&(z=q[F-2],z.right===w?z.right=E:z.left=E);q[F-1]=E;break}if(1===x._color)if(0===w._color){w._color=1;w.left=p(0,x);break}else w.left=p(0,x);else x=m(x),w.left=x.right,x.right=w,x._color=w._color,w._color=0,h(w),h(x),1<F&&(z=q[F-2],z.right===w?z.right=x:z.left=x),q[F-1]=x,q[F]=w,F+1<q.length?q[F+1]=g:q.push(g),
F+=2}}u.left===t?u.left=null:u.right=null}return new a(this.tree._compare,q[0])};Object.defineProperty(b,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(b,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(b,"index",{get:function(){var g=0,q=this._stack;if(0===q.length)return(g=this.tree.root)?g._count:0;q[q.length-1].left&&(g=q[q.length-
1].left._count);for(var t=q.length-2;0<=t;--t)q[t+1]===q[t].right&&(++g,q[t].left&&(g+=q[t].left._count));return g},enumerable:!0});b.next=function(){var g=this._stack;if(0!==g.length){var q=g[g.length-1];if(q.right)for(q=q.right;q;)g.push(q),q=q.left;else for(g.pop();0<g.length&&g[g.length-1].right===q;)q=g[g.length-1],g.pop()}};Object.defineProperty(b,"hasNext",{get:function(){var g=this._stack;if(0===g.length)return!1;if(g[g.length-1].right)return!0;for(var q=g.length-1;0<q;--q)if(g[q-1].left===
g[q])return!0;return!1}});b.update=function(g){var q=this._stack;if(0===q.length)throw Error("Can't update empty node!");var t=Array(q.length),u=q[q.length-1];t[t.length-1]=new n(u._color,u.key,g,u.left,u.right,u._count);for(g=q.length-2;0<=g;--g)u=q[g],t[g]=u.left===q[g+1]?new n(u._color,u.key,u.value,t[g+1],u.right,u._count):new n(u._color,u.key,u.value,u.left,t[g+1],u._count);return new a(this.tree._compare,t[0])};b.prev=function(){var g=this._stack;if(0!==g.length){var q=g[g.length-1];if(q.left)for(q=
q.left;q;)g.push(q),q=q.right;else for(g.pop();0<g.length&&g[g.length-1].left===q;)q=g[g.length-1],g.pop()}};Object.defineProperty(b,"hasPrev",{get:function(){var g=this._stack;if(0===g.length)return!1;if(g[g.length-1].left)return!0;for(var q=g.length-1;0<q;--q)if(g[q-1].right===g[q])return!0;return!1}})},{}],248:[function(b,y,D){function n(h){if(0>h)return Number("0/0");for(var a=p[0],d=p.length-1;0<d;--d)a+=p[d]/(h+d);d=h+4.7421875+.5;return.5*Math.log(2*Math.PI)+(h+.5)*Math.log(d)-d+Math.log(a)-
Math.log(h)}var m=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],p=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
y.exports=function d(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*d(1-a));if(100<a)return Math.exp(n(a));--a;for(var e=m[0],l=1;9>l;l++)e+=m[l]/(a+l);l=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(l,a+.5)*Math.exp(-l)*e};y.exports.log=n},{}],249:[function(b,y,D){y.exports=function(n,m){if("string"!==typeof n)throw new TypeError("must specify type string");m=m||{};if("undefined"===typeof document&&!m.canvas)return null;var p=m.canvas||document.createElement("canvas");"number"===typeof m.width&&(p.width=
m.width);"number"===typeof m.height&&(p.height=m.height);var h;try{var a=[n];0===n.indexOf("webgl")&&a.push("experimental-"+n);for(n=0;n<a.length;n++)if(h=p.getContext(a[n],m))return h}catch(d){h=null}return h||null}},{}],250:[function(b,y,D){function n(x,E){x[0]=E[0];x[1]=E[1];x[2]=E[2];return x}function m(x){this.gl=x;this.pixelRatio=1;this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.autoTicks=!0;this.tickSpacing=[1,1,1];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif",
"sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickAlign=["auto","auto","auto"];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[10,10,10];this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]};this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont="sans-serif";this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelAlign=["auto","auto","auto"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[10,10,10];this.lineEnable=[!0,!0,!0];this.lineMirror=
[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[0,0,0];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!1,!1,!1];this.backgroundColor=
[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._firstInit=!0;this._lines=this._text=null;this._background=e(x)}function p(){this.primalOffset=[0,0,0];this.primalMinor=[0,0,0];this.mirrorOffset=[0,0,0];this.mirrorMinor=[0,0,0]}function h(x,E,F,z,B){var C=x.primalOffset,v=x.primalMinor,G=x.mirrorOffset;x=x.mirrorMinor;z=z[E];for(var I=0;3>I;++I)if(E!==I){var J=C,K=G,N=v,H=x;z&1<<I&&(J=G,K=C,N=x,H=v);J[I]=F[0][I];K[I]=F[1][I];0<B[I]?(N[I]=-1,H[I]=0):(N[I]=0,H[I]=1)}}y.exports=function(x,E){x=new m(x);
x.update(E);return x};var a=b("./lib/text.js"),d=b("./lib/lines.js"),e=b("./lib/background.js"),l=b("./lib/cube.js"),k=b("./lib/ticks.js"),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);b=m.prototype;b.update=function(x){function E(H,L,P){if(P in x){var Q=x[P],S=this[P],O;(H?Array.isArray(Q)&&Array.isArray(Q[0]):Array.isArray(Q))?this[P]=O=[L(Q[0]),L(Q[1]),L(Q[2])]:this[P]=O=[L(Q),L(Q),L(Q)];for(H=0;3>H;++H)if(O[H]!==S[H])return!0}return!1}x=x||{};var F=E.bind(this,!1,Number),z=E.bind(this,
!1,Boolean),B=E.bind(this,!1,String),C=E.bind(this,!0,function(H){if(Array.isArray(H)){if(3===H.length)return[+H[0],+H[1],+H[2],1];if(4===H.length)return[+H[0],+H[1],+H[2],+H[3]]}return[0,0,0,1]}),v=!1,G=!1;if("bounds"in x){var I=x.bounds,J=0;for(;2>J;++J)for(var K=0;3>K;++K)I[J][K]!==this.bounds[J][K]&&(G=!0),this.bounds[J][K]=I[J][K]}if("ticks"in x){var N=x.ticks;v=!0;this.autoTicks=!1;for(J=0;3>J;++J)this.tickSpacing[J]=0}else F("tickSpacing")&&(G=this.autoTicks=!0);this._firstInit&&("ticks"in
x||"tickSpacing"in x||(this.autoTicks=!0),v=G=!0,this._firstInit=!1);G&&this.autoTicks&&(N=k.create(this.bounds,this.tickSpacing),v=!0);if(v){for(J=0;3>J;++J)N[J].sort(function(H,L){return H.x-L.x});k.equal(N,this.ticks)?v=!1:this.ticks=N}z("tickEnable");B("tickFont")&&(v=!0);F("tickSize");F("tickAngle");F("tickPad");C("tickColor");N=B("labels");B("labelFont")&&(N=!0);z("labelEnable");F("labelSize");F("labelPad");C("labelColor");z("lineEnable");z("lineMirror");F("lineWidth");C("lineColor");z("lineTickEnable");
z("lineTickMirror");F("lineTickLength");F("lineTickWidth");C("lineTickColor");z("gridEnable");F("gridWidth");C("gridColor");z("zeroEnable");C("zeroLineColor");F("zeroLineWidth");z("backgroundEnable");C("backgroundColor");this._text?this._text&&(N||v)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=a(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont);this._lines&&v&&(this._lines.dispose(),this._lines=null);this._lines||(this._lines=
d(this.gl,this.bounds,this.ticks))};var f=[new p,new p,new p],g=[0,0,0],q={model:c,view:c,projection:c,_ortho:!1};b.isOpaque=function(){return!0};b.isTransparent=function(){return!1};b.drawTransparent=function(x){};var t=[0,0,0],u=[0,0,0],w=[0,0,0];b.draw=function(x){function E(P){L=[0,0,0];L[P]=1}function F(P,Q,S){var O=(P+1)%3;P=(P+2)%3;var U=Q[O];Q=Q[P];var X=S[O];S=S[P];0<U&&0<S?E(O):0<U&&0>S?E(O):0>U&&0<S?E(O):0>U&&0>S?E(O):0<Q&&0<X?E(P):0<Q&&0>X?E(P):0>Q&&0<X?E(P):0>Q&&0>X&&E(P)}x=x||q;var z=
this.gl,B=x.model||c,C=x.view||c,v=x.projection||c,G=this.bounds;x=x._ortho||!1;var I=l(B,C,v,G,x),J=I.cubeEdges;I=I.axis;x=(x?2:1)*this.pixelRatio*(v[3]*C[12]+v[7]*C[13]+v[11]*C[14]+v[15]*C[15])/z.drawingBufferHeight;for(z=0;3>z;++z)this.lastCubeProps.cubeEdges[z]=J[z],this.lastCubeProps.axis[z]=I[z];for(z=0;3>z;++z)h(f[z],z,this.bounds,J,I);z=this.gl;for(z=0;3>z;++z)g[z]=this.backgroundEnable[z]?I[z]:0;this._background.draw(B,C,v,G,g,this.backgroundColor);this._lines.bind(B,C,v,this);for(z=0;3>
z;++z){var K=[0,0,0];K[z]=0<I[z]?G[1][z]:G[0][z];for(J=0;2>J;++J){var N=(z+1+J)%3,H=(z+1+(J^1))%3;this.gridEnable[N]&&this._lines.drawGrid(N,H,this.bounds,K,this.gridColor[N],this.gridWidth[N]*this.pixelRatio)}for(J=0;2>J;++J)N=(z+1+J)%3,H=(z+1+(J^1))%3,this.zeroEnable[H]&&0>=Math.min(G[0][H],G[1][H])&&0<=Math.max(G[0][H],G[1][H])&&this._lines.drawZero(N,H,this.bounds,K,this.zeroLineColor[H],this.zeroLineWidth[H]*this.pixelRatio)}for(z=0;3>z;++z){this.lineEnable[z]&&this._lines.drawAxisLine(z,this.bounds,
f[z].primalOffset,this.lineColor[z],this.lineWidth[z]*this.pixelRatio);this.lineMirror[z]&&this._lines.drawAxisLine(z,this.bounds,f[z].mirrorOffset,this.lineColor[z],this.lineWidth[z]*this.pixelRatio);I=n(t,f[z].primalMinor);K=n(u,f[z].mirrorMinor);N=this.lineTickLength;for(J=0;3>J;++J)H=x/B[5*J],I[J]=I[J]*N[J]*H,K[J]=K[J]*N[J]*H;this.lineTickEnable[z]&&this._lines.drawAxisTicks(z,f[z].primalOffset,I,this.lineTickColor[z],this.lineTickWidth[z]*this.pixelRatio);this.lineTickMirror[z]&&this._lines.drawAxisTicks(z,
f[z].mirrorOffset,K,this.lineTickColor[z],this.lineTickWidth[z]*this.pixelRatio)}this._lines.unbind();this._text.bind(B,C,v,this.pixelRatio);for(z=0;3>z;++z){C=f[z].primalMinor;v=f[z].mirrorMinor;I=n(w,f[z].primalOffset);for(J=0;3>J;++J)this.lineTickEnable[z]&&(I[J]+=x*C[J]*Math.max(this.lineTickLength[J],0)/B[5*J]);K=[0,0,0];K[z]=1;if(this.tickEnable[z]){-3600===this.tickAngle[z]?(this.tickAngle[z]=0,this.tickAlign[z]="auto"):this.tickAlign[z]=-1;J=1;N=[this.tickAlign[z],.5,J];N[0]="auto"===N[0]?
0:parseInt(""+N[0]);var L=[0,0,0];F(z,C,v);for(J=0;3>J;++J)I[J]+=x*C[J]*this.tickPad[J]/B[5*J];this._text.drawTicks(z,this.tickSize[z],this.tickAngle[z],I,this.tickColor[z],K,L,N)}if(this.labelEnable[z]){J=0;L=[0,0,0];4<this.labels[z].length&&(E(z),J=1);N=[this.labelAlign[z],.5,J];N[0]="auto"===N[0]?0:parseInt(""+N[0]);for(J=0;3>J;++J)I[J]+=x*C[J]*this.labelPad[J]/B[5*J];I[z]+=.5*(G[0][z]+G[1][z]);this._text.drawLabel(z,this.labelSize[z],this.labelAngle[z],I,this.labelColor[z],[0,0,0],L,N)}}this._text.unbind()};
b.dispose=function(){this._text.dispose();this._lines.dispose();this._background.dispose();this.gl=this._background=this._text=this._lines=null}},{"./lib/background.js":251,"./lib/cube.js":252,"./lib/lines.js":253,"./lib/text.js":255,"./lib/ticks.js":256}],251:[function(b,y,D){function n(a,d,e,l){this.gl=a;this.buffer=d;this.vao=e;this.shader=l}y.exports=function(a){for(var d=[],e=[],l=0,k=0;3>k;++k)for(var c=(k+1)%3,f=(k+2)%3,g=[0,0,0],q=[0,0,0],t=-1;1>=t;t+=2){e.push(l,l+2,l+1,l+1,l+2,l+3);g[k]=
t;q[k]=t;for(var u=-1;1>=u;u+=2){g[c]=u;for(var w=-1;1>=w;w+=2)g[f]=w,d.push(g[0],g[1],g[2],q[0],q[1],q[2]),l+=1}u=c;c=f;f=u}d=m(a,new Float32Array(d));e=m(a,new Uint16Array(e),a.ELEMENT_ARRAY_BUFFER);e=p(a,[{buffer:d,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:d,type:a.FLOAT,size:3,offset:12,stride:24}],e);l=h(a);l.attributes.position.location=0;l.attributes.normal.location=1;return new n(a,d,e,l)};var m=b("gl-buffer"),p=b("gl-vao"),h=b("./shaders").bg;b=n.prototype;b.draw=function(a,d,e,l,k,
c){for(var f=!1,g=0;3>g;++g)f=f||k[g];f&&(f=this.gl,f.enable(f.POLYGON_OFFSET_FILL),f.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,view:d,projection:e,bounds:l,enable:k,colors:c},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),f.disable(f.POLYGON_OFFSET_FILL))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},{"./shaders":254,"gl-buffer":258,"gl-vao":332}],252:[function(b,y,D){y.exports=function(t,u,w,x,E){m(a,u,t);
m(a,w,a);for(t=u=0;2>t;++t)for(l[2]=x[t][2],w=0;2>w;++w){l[1]=x[w][1];for(var F=0;2>F;++F){l[0]=x[F][0];for(var z=d[u],B=l,C=a,v=0;4>v;++v){z[v]=C[12+v];for(var G=0;3>G;++G)z[v]+=B[G]*C[4*G+v]}u+=1}}x=-1;for(t=0;8>t;++t){u=d[t][3];for(w=0;3>w;++w)e[t][w]=d[t][w]/u;E&&(e[t][2]*=-1);0>u&&(0>x?x=t:e[t][2]<e[x][2]&&(x=t))}if(0>x)for(t=x=0;3>t;++t){u=(t+2)%3;E=(t+1)%3;F=w=-1;for(z=0;2>z;++z)B=z<<t,C=B+(z<<u)+(1-z<<E),v=B+(1-z<<u)+(z<<E),0>h(e[B],e[C],e[v],k)||(z?w=1:F=1);if(!(0>w||0>F))for(z=0;2>z;++z){B=
z<<t;C=B+(z<<u)+(1-z<<E);v=B+(1-z<<u)+(z<<E);a:{B=[d[B],d[C],d[v],d[B+(1<<u)+(1<<E)]];for(v=0;v<c.length;++v)if(B=p.positive(B,c[v]),3>B.length){B=0;break a}v=B[0];C=v[0]/v[3];G=v[1]/v[3];var I=0;for(v=1;v+1<B.length;++v){var J=B[v],K=B[v+1];I+=Math.abs((J[0]/J[3]-C)*(K[1]/K[3]-G)-(J[1]/J[3]-G)*(K[0]/K[3]-C))}B=I}z?w=B:F=B}F>w&&(x|=1<<t)}u=7^x;z=-1;for(t=0;8>t;++t)t!==x&&t!==u&&(0>z?z=t:e[z][1]>e[t][1]&&(z=t));w=-1;for(t=0;3>t;++t)B=z^1<<t,B!==x&&B!==u&&(0>w&&(w=B),E=e[B],E[0]<e[w][0]&&(w=B));F=-1;
for(t=0;3>t;++t)B=z^1<<t,B!==x&&B!==u&&B!==w&&(0>F&&(F=B),E=e[B],E[0]>e[F][0]&&(F=B));E=f;E[0]=E[1]=E[2]=0;E[n.log2(w^z)]=z&w;E[n.log2(z^F)]=z&F;t=F^7;t===x||t===u?(t=w^7,E[n.log2(F^t)]=t&F):E[n.log2(w^t)]=t&w;E=g;for(t=0;3>t;++t)E[t]=x&1<<t?-1:1;return q};var n=b("bit-twiddle"),m=b("gl-mat4/multiply"),p=b("split-polygon"),h=b("robust-orientation"),a=Array(16),d=Array(8),e=Array(8),l=Array(3),k=[0,0,0];(function(){for(var t=0;8>t;++t)d[t]=[1,1,1,1],e[t]=[1,1,1]})();var c=[[0,0,1,0,0],[0,0,-1,1,0],
[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],f=[1,1,1],g=[0,0,0],q={cubeEdges:f,axis:g}},{"bit-twiddle":97,"gl-mat4/multiply":280,"robust-orientation":520,"split-polygon":538}],253:[function(b,y,D){function n(g){g[0]=g[1]=g[2]=0;return g}function m(g,q){g[0]=q[0];g[1]=q[1];g[2]=q[2];return g}function p(g,q,t,u,w,x,E,F){this.gl=g;this.vertBuffer=q;this.vao=t;this.shader=u;this.tickCount=w;this.tickOffset=x;this.gridCount=E;this.gridOffset=F}y.exports=function(g,q,t){var u=[];q=[0,0,0];var w=
[0,0,0],x=[0,0,0],E=[0,0,0];u.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var F=0;3>F;++F){for(var z=u.length/3|0,B=0;B<t[F].length;++B){var C=+t[F][B].x;u.push(C,0,1,C,1,1,C,0,-1,C,0,-1,C,1,1,C,1,-1)}C=u.length/3|0;q[F]=z;w[F]=C-z;z=u.length/3|0;for(B=0;B<t[F].length;++B)C=+t[F][B].x,u.push(C,0,1,C,1,1,C,0,-1,C,0,-1,C,1,1,C,1,-1);C=u.length/3|0;x[F]=z;E[F]=C-z}t=h(g,new Float32Array(u));u=a(g,[{buffer:t,type:g.FLOAT,size:3,stride:0,offset:0}]);F=d(g);F.attributes.position.location=0;return new p(g,
t,u,F,w,q,E,x)};var h=b("gl-buffer"),a=b("gl-vao"),d=b("./shaders").line,e=[0,0,0],l=[0,0,0],k=[0,0,0],c=[0,0,0],f=[1,1];b=p.prototype;b.bind=function(g,q,t){this.shader.bind();this.shader.uniforms.model=g;this.shader.uniforms.view=q;this.shader.uniforms.projection=t;f[0]=this.gl.drawingBufferWidth;f[1]=this.gl.drawingBufferHeight;this.shader.uniforms.screenShape=f;this.vao.bind()};b.unbind=function(){this.vao.unbind()};b.drawAxisLine=function(g,q,t,u,w){var x=n(l);this.shader.uniforms.majorAxis=
l;x[g]=q[1][g]-q[0][g];this.shader.uniforms.minorAxis=x;t=m(c,t);t[g]+=q[0][g];this.shader.uniforms.offset=t;this.shader.uniforms.lineWidth=w;this.shader.uniforms.color=u;q=n(k);q[(g+2)%3]=1;this.shader.uniforms.screenAxis=q;this.vao.draw(this.gl.TRIANGLES,6);q=n(k);q[(g+1)%3]=1;this.shader.uniforms.screenAxis=q;this.vao.draw(this.gl.TRIANGLES,6)};b.drawAxisTicks=function(g,q,t,u,w){if(this.tickCount[g]){var x=n(e);x[g]=1;this.shader.uniforms.majorAxis=x;this.shader.uniforms.offset=q;this.shader.uniforms.minorAxis=
t;this.shader.uniforms.color=u;this.shader.uniforms.lineWidth=w;q=n(k);q[g]=1;this.shader.uniforms.screenAxis=q;this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g])}};b.drawGrid=function(g,q,t,u,w,x){if(this.gridCount[g]){var E=n(l);E[q]=t[1][q]-t[0][q];this.shader.uniforms.minorAxis=E;u=m(c,u);u[q]+=t[0][q];this.shader.uniforms.offset=u;q=n(e);q[g]=1;this.shader.uniforms.majorAxis=q;q=n(k);q[g]=1;this.shader.uniforms.screenAxis=q;this.shader.uniforms.lineWidth=x;this.shader.uniforms.color=
w;this.vao.draw(this.gl.TRIANGLES,this.gridCount[g],this.gridOffset[g])}};b.drawZero=function(g,q,t,u,w,x){var E=n(l);this.shader.uniforms.majorAxis=E;E[g]=t[1][g]-t[0][g];this.shader.uniforms.minorAxis=E;u=m(c,u);u[g]+=t[0][g];this.shader.uniforms.offset=u;g=n(k);g[q]=1;this.shader.uniforms.screenAxis=g;this.shader.uniforms.lineWidth=x;this.shader.uniforms.color=w;this.vao.draw(this.gl.TRIANGLES,6)};b.dispose=function(){this.vao.dispose();this.vertBuffer.dispose();this.shader.dispose()}},{"./shaders":254,
"gl-buffer":258,"gl-vao":332}],254:[function(b,y,D){y=b("glslify");var n=b("gl-shader"),m=y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major \x3d position.x * majorAxis;\n  vec3 minor \x3d position.y * minorAxis;\n\n  vec3 vPosition \x3d major + minor + offset;\n  vec3 pPosition \x3d project(vPosition);\n  vec3 offset \x3d project(vPosition + screenAxis * position.z);\n\n  vec2 screen \x3d normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position \x3d vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),
p=y(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);D.line=function(l){return n(l,m,p,null,[{name:"position",type:"vec3"}])};var h=y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A \x3d project(a);\n  vec3 B \x3d project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI \x3d 3.141592;\nconst float TWO_PI \x3d 2.0 * PI;\nconst float HALF_PI \x3d 0.5 * PI;\nconst float ONE_AND_HALF_PI \x3d 1.5 * PI;\n\nint option \x3d int(floor(alignOpt.x + 0.001));\nfloat hv_ratio \x3d       alignOpt.y;\nbool enableAlign \x3d    (alignOpt.z !\x3d 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a \x3c 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b \x3d positive_angle(a);\n  return ((b \x3e HALF_PI) \x26\x26 (b \x3c\x3d ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b \x3d positive_angle(a);\n\n  return\n    (b \x3c (      ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b \x3c (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b \x3d positive_angle(a);\n  float div \x3d TWO_PI / float(n);\n  float c \x3d roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option \x3e  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option \x3d\x3d 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option \x3d\x3d 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option \x3d\x3d 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option \x3d\x3d-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle \x3d (axis.x \x3d\x3d 0.0) \x26\x26\n                   (axis.y \x3d\x3d 0.0) \x26\x26\n                   (axis.z \x3d\x3d 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance \x3d position.z;\n  vec3 dataPosition \x3d axisDistance * axis + offset;\n\n  float beta \x3d angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle \x3d (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle \x3d computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle +\x3d (sin(axisAngle) \x3c 0.0) ? PI : 0.0;\n    clipAngle +\x3d (sin(clipAngle) \x3c 0.0) ? PI : 0.0;\n\n    flip \x3d (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) \x3e 0.0) ? 1.0 : 0.0;\n\n    beta +\x3d applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord \x3d position.xy * pixelScale;\n\n  mat2 planeXform \x3d scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset \x3d 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition \x3d project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition +\x3d vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position \x3d vec4(clipPosition, 1.0);\n}"]),
a=y(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);D.text=function(l){return n(l,h,a,null,[{name:"position",type:"vec3"}])};var d=y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis \x3d sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal \x3d signAxis * normal;\n\n  if(dot(realNormal, enable) \x3e 0.0) {\n    vec3 minRange \x3d min(bounds[0], bounds[1]);\n    vec3 maxRange \x3d max(bounds[0], bounds[1]);\n    vec3 nPosition \x3d mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position \x3d projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position \x3d vec4(0,0,0,0);\n  }\n\n  colorChannel \x3d abs(realNormal);\n}"]),
e=y(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor \x3d colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);D.bg=function(l){return n(l,d,e,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":312,glslify:413}],255:[function(b,y,D){(function(n){function m(k,c,f,g){this.gl=k;this.shader=c;this.buffer=f;this.vao=
g;this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}y.exports=function(k,c,f,g,q,t){var u=p(k),w=h(k,[{buffer:u,size:3}]),x=d(k);x.attributes.position.location=0;k=new m(k,x,u,w);k.update(c,f,g,q,t);return k};var p=b("gl-buffer"),h=b("gl-vao"),a=b("vectorize-text"),d=b("./shaders").text;n=window||n.global||{};var e=n.__TEXT_CACHE||{};n.__TEXT_CACHE={};n=m.prototype;var l=[0,0];n.bind=function(k,c,f,g){this.vao.bind();this.shader.bind();var q=this.shader.uniforms;q.model=k;q.view=
c;q.projection=f;q.pixelScale=g;l[0]=this.gl.drawingBufferWidth;l[1]=this.gl.drawingBufferHeight;this.shader.uniforms.resolution=l};n.unbind=function(){this.vao.unbind()};n.update=function(k,c,f,g,q){function t(v,G,I,J,K,N){var H=e[I];H||(H=e[I]={});var L=H[G];if(!L){L=H;I={triangles:!0,font:I,textAlign:"center",textBaseline:"middle",lineSpacing:K,styletags:N};try{var P=a(G,I)}catch(Q){console.warn('error vectorizing text:"'+G+'" error:',Q),P={cells:[],positions:[]}}L=L[G]=P}G=(J||12)/12;J=L.positions;
L=L.cells;P=0;for(I=L.length;P<I;++P)for(K=L[P],N=2;0<=N;--N)H=J[K[N]],u.push(G*H[0],-G*H[1],v)}for(var u=[],w=[0,0,0],x=[0,0,0],E=[0,0,0],F=[0,0,0],z={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},B=0;3>B;++B){E[B]=u.length/3|0;t(.5*(k[0][B]+k[1][B]),c[B],f[B],12,1.25,z);F[B]=(u.length/3|0)-E[B];w[B]=u.length/3|0;for(var C=0;C<g[B].length;++C)g[B][C].text&&t(g[B][C].x,g[B][C].text,g[B][C].font||q,g[B][C].fontSize||12,1.25,z);x[B]=(u.length/3|0)-w[B]}this.buffer.update(u);this.tickOffset=
w;this.tickCount=x;this.labelOffset=E;this.labelCount=F};n.drawTicks=function(k,c,f,g,q,t,u,w){this.tickCount[k]&&(this.shader.uniforms.axis=t,this.shader.uniforms.color=q,this.shader.uniforms.angle=f,this.shader.uniforms.scale=c,this.shader.uniforms.offset=g,this.shader.uniforms.alignDir=u,this.shader.uniforms.alignOpt=w,this.vao.draw(this.gl.TRIANGLES,this.tickCount[k],this.tickOffset[k]))};n.drawLabel=function(k,c,f,g,q,t,u,w){this.labelCount[k]&&(this.shader.uniforms.axis=t,this.shader.uniforms.color=
q,this.shader.uniforms.angle=f,this.shader.uniforms.scale=c,this.shader.uniforms.offset=g,this.shader.uniforms.alignDir=u,this.shader.uniforms.alignOpt=w,this.vao.draw(this.gl.TRIANGLES,this.labelCount[k],this.labelOffset[k]))};n.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()}}).call(this,b("_process"))},{"./shaders":254,_process:500,"gl-buffer":258,"gl-vao":332,"vectorize-text":572}],256:[function(b,y,D){function n(m,p){var h=m+"",a=h.indexOf("."),d=0;0<=a&&(d=
h.length-a-1);h=Math.pow(10,d);m=Math.round(m*p*h);p=m+"";if(0<=p.indexOf("e"))return p;p=m/h;h=m%h;0>m?(p=-Math.ceil(p)|0,h=-h|0):(p=Math.floor(p)|0,h|=0);p=""+p;0>m&&(p="-"+p);if(d){for(h=""+h;h.length<d;)h="0"+h;return p+"."+h}return p}D.create=function(m,p){for(var h=[],a=0;3>a;++a){for(var d=[],e=0;e*p[a]<=m[1][a];++e)d.push({x:e*p[a],text:n(p[a],e)});for(e=-1;e*p[a]>=m[0][a];--e)d.push({x:e*p[a],text:n(p[a],e)});h.push(d)}return h};D.equal=function(m,p){for(var h=0;3>h;++h){if(m[h].length!==
p[h].length)return!1;for(var a=0;a<m[h].length;++a){var d=m[h][a],e=p[h][a];if(d.x!==e.x||d.text!==e.text||d.font!==e.font||d.fontColor!==e.fontColor||d.fontSize!==e.fontSize||d.dx!==e.dx||d.dy!==e.dy)return!1}}return!0}},{}],257:[function(b,y,D){function n(t,u,w){this.lo=t;this.hi=u;this.pixelsPerDataUnit=w}y.exports=function(t,u,w,x,E){var F=u.model||l,z=u.view||l,B=u.projection||l;u=u._ortho||!1;t=t.bounds;E=E||h(F,z,B,t,u);E=E.axis;a(k,z,F);a(k,B,k);F=g;for(z=0;3>z;++z)F[z].lo=Infinity,F[z].hi=
-Infinity,F[z].pixelsPerDataUnit=Infinity;B=m(d(k,k));d(k,k);for(var C=0;3>C;++C){var v=(C+1)%3,G=(C+2)%3,I=q;z=0;a:for(;2>z;++z){var J=[];if(0>E[C]!==!!z){I[C]=t[z][C];for(var K=0;2>K;++K){I[v]=t[K^z][v];for(var N=0;2>N;++N)I[G]=t[N^K^z][G],J.push(I.slice())}for(K=N=u?5:4;K===N;++K){if(0===J.length)continue a;J=p.positive(J,B[K])}for(K=0;K<J.length;++K){G=J[K];N=q;var H=k;for(var L=G,P=w,Q=x,S=0;3>S;++S){for(var O=c,U=f,X=0;3>X;++X)U[X]=O[X]=L[X];U[3]=O[3]=1;U[S]+=1;e(U,U,H);0>U[3]&&(N[S]=Infinity);
--O[S];e(O,O,H);0>O[3]&&(N[S]=Infinity);X=(O[0]/O[3]-U[0]/U[3])*P;O=(O[1]/O[3]-U[1]/U[3])*Q;N[S]=.25*Math.sqrt(X*X+O*O)}H=N;for(N=0;3>N;++N)F[N].lo=Math.min(F[N].lo,G[N]),F[N].hi=Math.max(F[N].hi,G[N]),N!==C&&(F[N].pixelsPerDataUnit=Math.min(F[N].pixelsPerDataUnit,Math.abs(H[N])))}}}}return F};var m=b("extract-frustum-planes"),p=b("split-polygon"),h=b("./lib/cube.js"),a=b("gl-mat4/multiply"),d=b("gl-mat4/transpose"),e=b("gl-vec4/transformMat4"),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),
k=new Float32Array(16),c=[0,0,0,1],f=[0,0,0,1],g=[new n(Infinity,-Infinity,Infinity),new n(Infinity,-Infinity,Infinity),new n(Infinity,-Infinity,Infinity)],q=[0,0,0]},{"./lib/cube.js":252,"extract-frustum-planes":240,"gl-mat4/multiply":280,"gl-mat4/transpose":289,"gl-vec4/transformMat4":403,"split-polygon":538}],258:[function(b,y,D){function n(l,k,c,f,g){this.gl=l;this.type=k;this.handle=c;this.length=f;this.usage=g}function m(l,k,c,f,g,q){var t=g.length*g.BYTES_PER_ELEMENT;if(0>q)return l.bufferData(k,
g,f),t;if(t+q>c)throw Error("gl-buffer: If resizing buffer, must not specify offset");l.bufferSubData(k,q,g);return c}function p(l,k){k=h.malloc(l.length,k);for(var c=l.length,f=0;f<c;++f)k[f]=l[f];return k}var h=b("typedarray-pool"),a=b("ndarray-ops"),d=b("ndarray"),e="uint8 uint8_clamped uint16 uint32 int8 int16 int32 float32".split(" ");b=n.prototype;b.bind=function(){this.gl.bindBuffer(this.type,this.handle)};b.unbind=function(){this.gl.bindBuffer(this.type,null)};b.dispose=function(){this.gl.deleteBuffer(this.handle)};
b.update=function(l,k){"number"!==typeof k&&(k=-1);this.bind();if("object"===typeof l&&"undefined"!==typeof l.shape){var c=l.dtype;0>e.indexOf(c)&&(c="float32");this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(c=gl.getExtension("OES_element_index_uint")&&"uint16"!==c?"uint32":"uint16");var f;if(f=c===l.dtype)a:{f=l.stride;for(var g=1,q=f.length-1;0<=q;--q){if(f[q]!==g){f=!1;break a}g*=l.shape[q]}f=!0}f?this.length=0===l.offset&&l.data.length===l.shape[0]?m(this.gl,this.type,this.length,this.usage,l.data,
k):m(this.gl,this.type,this.length,this.usage,l.data.subarray(l.offset,l.shape[0]),k):(c=h.malloc(l.size,c),f=d(c,l.shape),a.assign(f,l),this.length=0>k?m(this.gl,this.type,this.length,this.usage,c,k):m(this.gl,this.type,this.length,this.usage,c.subarray(0,l.size),k),h.free(c))}else if(Array.isArray(l))c=this.type===this.gl.ELEMENT_ARRAY_BUFFER?p(l,"uint16"):p(l,"float32"),this.length=0>k?m(this.gl,this.type,this.length,this.usage,c,k):m(this.gl,this.type,this.length,this.usage,c.subarray(0,l.length),
k),h.free(c);else if("object"===typeof l&&"number"===typeof l.length)this.length=m(this.gl,this.type,this.length,this.usage,l,k);else if("number"===typeof l||void 0===l){if(0<=k)throw Error("gl-buffer: Cannot specify offset when resizing buffer");l|=0;0>=l&&(l=1);this.gl.bufferData(this.type,l|0,this.usage);this.length=l}else throw Error("gl-buffer: Invalid data type");};y.exports=function(l,k,c,f){c=c||l.ARRAY_BUFFER;f=f||l.DYNAMIC_DRAW;if(c!==l.ARRAY_BUFFER&&c!==l.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");
if(f!==l.DYNAMIC_DRAW&&f!==l.STATIC_DRAW&&f!==l.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var g=l.createBuffer();l=new n(l,c,g,0,f);l.update(k);return l}},{ndarray:469,"ndarray-ops":464,"typedarray-pool":567}],259:[function(b,y,D){var n=b("gl-vec3");y.exports=function(p,h){var a=p.positions,d=p.vectors,e={positions:[],vertexIntensity:[],vertexIntensityBounds:p.vertexIntensityBounds,vectors:[],cells:[],coneOffset:p.coneOffset,
colormap:p.colormap};if(0===p.positions.length)return h&&(h[0]=[0,0,0],h[1]=[0,0,0]),e;for(var l=0,k=Infinity,c=-Infinity,f=Infinity,g=-Infinity,q=Infinity,t=-Infinity,u=null,w=null,x=[],E=Infinity,F=!1,z=0;z<a.length;z++){var B=a[z];k=Math.min(B[0],k);c=Math.max(B[0],c);f=Math.min(B[1],f);g=Math.max(B[1],g);q=Math.min(B[2],q);t=Math.max(B[2],t);var C=d[z];n.length(C)>l&&(l=n.length(C));z&&((F=2*n.distance(u,B)/(n.length(w)+n.length(C)))?(E=Math.min(E,F),F=!1):F=!0);F||(u=B,w=C);x.push(C)}z=[k,f,
q];B=[c,g,t];h&&(h[0]=z,h[1]=B);0===l&&(l=1);h=1/l;isFinite(E)||(E=1);e.vectorScale=E;z=p.coneSize||.5;p.absoluteConeSize&&(z=p.absoluteConeSize*h);e.coneScale=z;for(p=z=0;z<a.length;z++)for(B=a[z],E=B[0],l=B[1],B=B[2],c=x[z],g=n.length(c)*h,t=0;8>t;t++)e.positions.push([E,l,B,p++]),e.positions.push([E,l,B,p++]),e.positions.push([E,l,B,p++]),e.positions.push([E,l,B,p++]),e.positions.push([E,l,B,p++]),e.positions.push([E,l,B,p++]),e.vectors.push(c),e.vectors.push(c),e.vectors.push(c),e.vectors.push(c),
e.vectors.push(c),e.vectors.push(c),e.vertexIntensity.push(g,g,g),e.vertexIntensity.push(g,g,g),d=e.positions.length,e.cells.push([d-6,d-5,d-4],[d-3,d-2,d-1]);return e};var m=b("./lib/shaders");y.exports.createMesh=b("./create_mesh");y.exports.createConeMesh=function(p,h){return y.exports.createMesh(p,h,{shaders:m,traceType:"cone"})}},{"./create_mesh":260,"./lib/shaders":261,"gl-vec3":351}],260:[function(b,y,D){function n(f,g,q,t,u,w,x,E,F,z,B){this.gl=f;this.pixelRatio=1;this.cells=[];this.positions=
[];this.intensity=[];this.texture=g;this.dirty=!0;this.triShader=q;this.pickShader=t;this.trianglePositions=u;this.triangleVectors=w;this.triangleColors=E;this.triangleUVs=F;this.triangleIds=x;this.triangleVAO=z;this.triangleCount=0;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=
.5;this.fresnel=1.5;this.opacity=1;this.traceType=B;this.tubeScale=1;this.coneScale=2;this.vectorScale=1;this.coneOffset=.25;this._projection=this._view=this._model=c;this._resolution=[1,1]}var m=b("gl-shader"),p=b("gl-buffer"),h=b("gl-vao"),a=b("gl-texture2d"),d=b("gl-mat4/multiply"),e=b("gl-mat4/invert"),l=b("ndarray"),k=b("colormap"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=n.prototype;b.isOpaque=function(){return 1<=this.opacity};b.isTransparent=function(){return 1>this.opacity};b.pickSlots=1;b.setPickBase=
function(f){this.pickId=f};b.update=function(f){f=f||{};var g=this.gl;this.dirty=!0;"lightPosition"in f&&(this.lightPosition=f.lightPosition);"opacity"in f&&(this.opacity=f.opacity);"ambient"in f&&(this.ambientLight=f.ambient);"diffuse"in f&&(this.diffuseLight=f.diffuse);"specular"in f&&(this.specularLight=f.specular);"roughness"in f&&(this.roughness=f.roughness);"fresnel"in f&&(this.fresnel=f.fresnel);void 0!==f.tubeScale&&(this.tubeScale=f.tubeScale);void 0!==f.vectorScale&&(this.vectorScale=f.vectorScale);
void 0!==f.coneScale&&(this.coneScale=f.coneScale);void 0!==f.coneOffset&&(this.coneOffset=f.coneOffset);if(f.colormap){this.texture.shape=[256,256];this.texture.minFilter=g.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=g.LINEAR;g=this.texture;var q=g.setPixels;var t=k({colormap:f.colormap,nshades:256,format:"rgba"});for(var u=new Uint8Array(1024),w=0;256>w;++w){for(var x=t[w],E=0;3>E;++E)u[4*w+E]=x[E];u[4*w+3]=255*x[3]}t=l(u,[256,256,4],[4,0,1]);q.call(g,t);this.texture.generateMipmap()}g=f.cells;
q=f.positions;t=f.vectors;if(q&&g&&t){u=[];w=[];x=[];E=[];var F=[];this.cells=g;this.positions=q;this.vectors=t;var z=f.meshColor||[1,1,1,1],B=f.vertexIntensity,C=Infinity,v=-Infinity;if(B)if(f.vertexIntensityBounds)C=+f.vertexIntensityBounds[0],v=+f.vertexIntensityBounds[1];else for(f=0;f<B.length;++f){var G=B[f];C=Math.min(C,G);v=Math.max(v,G)}else for(f=0;f<q.length;++f)G=q[f][2],C=Math.min(C,G),v=Math.max(v,G);if(B)this.intensity=B;else{f=q.length;G=Array(f);for(var I=0;I<f;++I)G[I]=q[I][2];this.intensity=
G}this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(f=0;f<q.length;++f){var J=q[f];for(G=0;3>G;++G)!isNaN(J[G])&&isFinite(J[G])&&(this.bounds[0][G]=Math.min(this.bounds[0][G],J[G]),this.bounds[1][G]=Math.max(this.bounds[1][G],J[G]))}f=I=0;a:for(;f<g.length;++f){var K=g[f];switch(K.length){case 3:for(G=0;3>G;++G){var N=K[G];J=q[N];for(N=0;3>N;++N)if(isNaN(J[N])||!isFinite(J[N]))continue a}for(G=0;3>G;++G){N=K[2-G];J=q[N];u.push(J[0],J[1],J[2],J[3]);var H=t[N];w.push(H[0],
H[1],H[2],H[3]||0);H=z;3===H.length?x.push(H[0],H[1],H[2],1):x.push(H[0],H[1],H[2],H[3]);J=B?[(B[N]-C)/(v-C),0]:[(J[2]-C)/(v-C),0];E.push(J[0],J[1]);F.push(f)}I+=1}}this.triangleCount=I;this.trianglePositions.update(u);this.triangleVectors.update(w);this.triangleColors.update(x);this.triangleUVs.update(E);this.triangleIds.update(new Uint32Array(F))}};b.drawTransparent=b.draw=function(f){f=f||{};var g=this.gl,q=f.model||c,t=f.view||c,u=f.projection||c,w=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(f=0;3>f;++f)w[0][f]=
Math.max(w[0][f],this.clipBounds[0][f]),w[1][f]=Math.min(w[1][f],this.clipBounds[1][f]);q={model:q,view:t,projection:u,inverseModel:c.slice(),clipBounds:w,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};q.inverseModel=e(q.inverseModel,q.model);
g.disable(g.CULL_FACE);this.texture.bind(0);t=Array(16);d(t,q.view,q.model);d(t,q.projection,t);e(t,t);for(f=0;3>f;++f)q.eyePosition[f]=t[12+f]/t[15];u=t[15];for(f=0;3>f;++f)u+=this.lightPosition[f]*t[4*f+3];for(f=0;3>f;++f){w=t[12+f];for(var x=0;3>x;++x)w+=t[4*x+f]*this.lightPosition[x];q.lightPosition[f]=w/u}0<this.triangleCount&&(f=this.triShader,f.bind(),f.uniforms=q,this.triangleVAO.bind(),g.drawArrays(g.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.drawPick=function(f){f=f||
{};var g=this.gl,q=f.model||c,t=f.view||c;f=f.projection||c;for(var u=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],w=0;3>w;++w)u[0][w]=Math.max(u[0][w],this.clipBounds[0][w]),u[1][w]=Math.min(u[1][w],this.clipBounds[1][w]);this._model=[].slice.call(q);this._view=[].slice.call(t);this._projection=[].slice.call(f);this._resolution=[g.drawingBufferWidth,g.drawingBufferHeight];q={model:q,view:t,projection:f,clipBounds:u,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,
pickId:this.pickId/255};t=this.pickShader;t.bind();t.uniforms=q;0<this.triangleCount&&(this.triangleVAO.bind(),g.drawArrays(g.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.pick=function(f){if(!f||f.id!==this.pickId)return null;f=f.value[0]+256*f.value[1]+65536*f.value[2];var g=this.cells[f],q=this.positions[g[1]].slice(0,3);q={position:q,dataCoordinate:q,index:Math.floor(g[1]/48)};"cone"===this.traceType?q.index=Math.floor(g[1]/48):"streamtube"===this.traceType&&(q.intensity=this.intensity[g[1]],
q.velocity=this.vectors[g[1]].slice(0,3),q.divergence=this.vectors[g[1]][3],q.index=f);return q};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.pickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleIds.dispose()};y.exports=function(f,g,q){var t=q.shaders;1===arguments.length&&(g=f,f=g.gl);var u=m(f,t.meshShader.vertex,t.meshShader.fragment,null,
t.meshShader.attributes);u.attributes.position.location=0;u.attributes.color.location=2;u.attributes.uv.location=3;u.attributes.vector.location=4;t=m(f,t.pickShader.vertex,t.pickShader.fragment,null,t.pickShader.attributes);t.attributes.position.location=0;t.attributes.id.location=1;t.attributes.vector.location=4;var w=a(f,l(new Uint8Array([255,255,255,255]),[1,1,4]));w.generateMipmap();w.minFilter=f.LINEAR_MIPMAP_LINEAR;w.magFilter=f.LINEAR;var x=p(f),E=p(f),F=p(f),z=p(f),B=p(f),C=h(f,[{buffer:x,
type:f.FLOAT,size:4},{buffer:B,type:f.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:F,type:f.FLOAT,size:4},{buffer:z,type:f.FLOAT,size:2},{buffer:E,type:f.FLOAT,size:4}]);u=new n(f,w,u,t,x,E,B,F,z,C,q.traceType||"cone");u.update(g);return u}},{colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,"gl-shader":312,"gl-texture2d":327,"gl-vao":332,ndarray:469}],261:[function(b,y,D){var n=b("glslify");b=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * conePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(conePosition, 1.0);\n  vec4 t_position  \x3d view * conePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d conePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
y=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var m=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position \x3d projection * view * conePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
n=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
D.meshShader={vertex:b,fragment:y,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]};D.pickShader={vertex:m,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:413}],262:[function(b,y,D){y.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",
516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",
2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",
3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",
6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",
32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",
32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",
33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34E3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",
34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",
34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",
35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",
35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",
36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",
36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",
37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],263:[function(b,y,D){var n=b("./1.0/numbers");y.exports=function(m){return n[m]}},{"./1.0/numbers":262}],264:[function(b,y,D){function n(k,c,f,g){this.gl=k;this.shader=g;this.buffer=c;this.vao=f;this.pixelRatio=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lineWidth=[1,1,1];this.capSize=[10,10,10];this.lineCount=
[0,0,0];this.lineOffset=[0,0,0];this.opacity=1;this.hasAlpha=!1}function m(k,c){for(var f=0;3>f;++f)k[0][f]=Math.min(k[0][f],c[f]),k[1][f]=Math.max(k[1][f],c[f])}function p(k,c,f,g){g=l[g];for(var q=0;q<g.length;++q){var t=g[q];k.push(c[0],c[1],c[2],f[0],f[1],f[2],f[3],t[0],t[1],t[2])}return g.length}y.exports=function(k){var c=k.gl,f=h(c),g=a(c,[{buffer:f,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:f,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:f,type:c.FLOAT,size:3,offset:28,stride:40}]),
q=d(c);q.attributes.position.location=0;q.attributes.color.location=1;q.attributes.offset.location=2;c=new n(c,f,g,q);c.update(k);return c};var h=b("gl-buffer"),a=b("gl-vao"),d=b("./shaders/index"),e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=n.prototype;b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.drawTransparent=b.draw=function(k){var c=this.gl,f=this.shader.uniforms;this.shader.bind();var g=f.view=k.view||e,q=f.projection=k.projection||e;f.model=k.model||
e;f.clipBounds=this.clipBounds;f.opacity=this.opacity;k=(k._ortho?2:1)*this.pixelRatio*(q[3]*g[12]+q[7]*g[13]+q[11]*g[14]+q[15]*g[15])/c.drawingBufferHeight;this.vao.bind();for(g=0;3>g;++g)c.lineWidth(this.lineWidth[g]*this.pixelRatio),f.capSize=this.capSize[g]*k,this.lineCount[g]&&c.drawArrays(c.LINES,this.lineOffset[g],this.lineCount[g]);this.vao.unbind()};var l=function(){for(var k=Array(3),c=0;3>c;++c){for(var f=[],g=1;2>=g;++g)for(var q=-1;1>=q;q+=2){var t=[0,0,0];t[(g+c)%3]=q;f.push(t)}k[c]=
f}return k}();b.update=function(k){k=k||{};"lineWidth"in k&&(this.lineWidth=k.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth]));"capSize"in k&&(this.capSize=k.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize]));this.hasAlpha=!1;"opacity"in k&&(this.opacity=+k.opacity,1>this.opacity&&(this.hasAlpha=!0));var c=k.color||[[0,0,0],[0,0,0],[0,0,0]],f=k.position;k=k.error;Array.isArray(c[0])||(c=[c,c,c]);if(f&&
k){var g=[],q=f.length,t=0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.lineCount=[0,0,0];for(var u=0;3>u;++u){this.lineOffset[u]=t;var w=0;a:for(;w<q;++w){for(var x=f[w],E=0;3>E;++E)if(isNaN(x[E])||!isFinite(x[E]))continue a;E=k[w];var F=c[u];Array.isArray(F[0])&&(F=c[w]);3===F.length?F=[F[0],F[1],F[2],1]:4===F.length&&(F=[F[0],F[1],F[2],F[3]],!this.hasAlpha&&1>F[3]&&(this.hasAlpha=!0));if(!isNaN(E[0][u])&&!isNaN(E[1][u])){if(0>E[0][u]){var z=x.slice();z[u]+=E[0][u];
g.push(x[0],x[1],x[2],F[0],F[1],F[2],F[3],0,0,0,z[0],z[1],z[2],F[0],F[1],F[2],F[3],0,0,0);m(this.bounds,z);t+=2+p(g,z,F,u)}0<E[1][u]&&(z=x.slice(),z[u]+=E[1][u],g.push(x[0],x[1],x[2],F[0],F[1],F[2],F[3],0,0,0,z[0],z[1],z[2],F[0],F[1],F[2],F[3],0,0,0),m(this.bounds,z),t+=2+p(g,z,F,u))}}this.lineCount[u]=t-this.lineOffset[u]}this.buffer.update(g)}};b.dispose=function(){this.shader.dispose();this.buffer.dispose();this.vao.dispose()}},{"./shaders/index":265,"gl-buffer":258,"gl-vao":332}],265:[function(b,
y,D){D=b("glslify");var n=b("gl-shader"),m=D(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  \x3d model * vec4(position, 1.0);\n  worldPosition       \x3d (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         \x3d projection * view * worldPosition;\n  fragColor           \x3d color;\n  fragPosition        \x3d position;\n}"]),
p=D(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  gl_FragColor \x3d opacity * fragColor;\n}"]);
y.exports=function(h){return n(h,m,p,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":312,glslify:413}],266:[function(b,y,D){function n(u){var w=u.getParameter(u.FRAMEBUFFER_BINDING),x=u.getParameter(u.RENDERBUFFER_BINDING);u=u.getParameter(u.TEXTURE_BINDING_2D);return[w,x,u]}function m(u,w){u.bindFramebuffer(u.FRAMEBUFFER,w[0]);u.bindRenderbuffer(u.RENDERBUFFER,w[1]);u.bindTexture(u.TEXTURE_2D,w[2])}function p(u){switch(u){case f:throw Error("gl-fbo: Framebuffer unsupported");
case g:throw Error("gl-fbo: Framebuffer incomplete attachment");case q:throw Error("gl-fbo: Framebuffer incomplete dimensions");case t:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason");}}function h(u,w,x,E,F,z){if(!E)return null;w=k(u,w,x,F,E);w.magFilter=u.NEAREST;w.minFilter=u.NEAREST;w.mipSamples=1;w.bind();u.framebufferTexture2D(u.FRAMEBUFFER,z,u.TEXTURE_2D,w.handle,0);return w}function a(u,w,x,E,F){var z=
u.createRenderbuffer();u.bindRenderbuffer(u.RENDERBUFFER,z);u.renderbufferStorage(u.RENDERBUFFER,E,w,x);u.framebufferRenderbuffer(u.FRAMEBUFFER,F,u.RENDERBUFFER,z);return z}function d(u){var w=n(u.gl),x=u.gl,E=u.handle=x.createFramebuffer(),F=u._shape[0],z=u._shape[1],B=u.color.length,C=u._ext,v=u._useStencil,G=u._useDepth,I=u._colorType;x.bindFramebuffer(x.FRAMEBUFFER,E);for(E=0;E<B;++E)u.color[E]=h(x,F,z,I,x.RGBA,x.COLOR_ATTACHMENT0+E);0===B?(u._color_rb=a(x,F,z,x.RGBA4,x.COLOR_ATTACHMENT0),C&&
C.drawBuffersWEBGL(c[0])):1<B&&C.drawBuffersWEBGL(c[B]);(B=x.getExtension("WEBGL_depth_texture"))?v?u.depth=h(x,F,z,B.UNSIGNED_INT_24_8_WEBGL,x.DEPTH_STENCIL,x.DEPTH_STENCIL_ATTACHMENT):G&&(u.depth=h(x,F,z,x.UNSIGNED_SHORT,x.DEPTH_COMPONENT,x.DEPTH_ATTACHMENT)):G&&v?u._depth_rb=a(x,F,z,x.DEPTH_STENCIL,x.DEPTH_STENCIL_ATTACHMENT):G?u._depth_rb=a(x,F,z,x.DEPTH_COMPONENT16,x.DEPTH_ATTACHMENT):v&&(u._depth_rb=a(x,F,z,x.STENCIL_INDEX,x.STENCIL_ATTACHMENT));F=x.checkFramebufferStatus(x.FRAMEBUFFER);if(F!==
x.FRAMEBUFFER_COMPLETE){u._destroyed=!0;x.bindFramebuffer(x.FRAMEBUFFER,null);x.deleteFramebuffer(u.handle);u.handle=null;u.depth&&(u.depth.dispose(),u.depth=null);u._depth_rb&&(x.deleteRenderbuffer(u._depth_rb),u._depth_rb=null);for(E=0;E<u.color.length;++E)u.color[E].dispose(),u.color[E]=null;u._color_rb&&(x.deleteRenderbuffer(u._color_rb),u._color_rb=null);m(x,w);p(F)}m(x,w)}function e(u,w,x,E,F,z,B,C){this.gl=u;this._shape=[w|0,x|0];this._destroyed=!1;this._ext=C;this.color=Array(F);for(u=0;u<
F;++u)this.color[u]=null;this._depth_rb=this.depth=this._color_rb=null;this._colorType=E;this._useDepth=z;this._useStencil=B;var v=this;w=[w|0,x|0];Object.defineProperties(w,{0:{get:function(){return v._shape[0]},set:function(G){return v.width=G}},1:{get:function(){return v._shape[1]},set:function(G){return v.height=G}}});this._shapeVector=w;d(this)}function l(u,w,x){if(u._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(u._shape[0]!==w||u._shape[1]!==x){var E=u.gl,F=E.getParameter(E.MAX_RENDERBUFFER_SIZE);
if(0>w||w>F||0>x||x>F)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");u._shape[0]=w;u._shape[1]=x;w=n(E);for(x=0;x<u.color.length;++x)u.color[x].shape=u._shape;u._color_rb&&(E.bindRenderbuffer(E.RENDERBUFFER,u._color_rb),E.renderbufferStorage(E.RENDERBUFFER,E.RGBA4,u._shape[0],u._shape[1]));u.depth&&(u.depth.shape=u._shape);u._depth_rb&&(E.bindRenderbuffer(E.RENDERBUFFER,u._depth_rb),u._useDepth&&u._useStencil?E.renderbufferStorage(E.RENDERBUFFER,E.DEPTH_STENCIL,u._shape[0],u._shape[1]):
u._useDepth?E.renderbufferStorage(E.RENDERBUFFER,E.DEPTH_COMPONENT16,u._shape[0],u._shape[1]):u._useStencil&&E.renderbufferStorage(E.RENDERBUFFER,E.STENCIL_INDEX,u._shape[0],u._shape[1]));E.bindFramebuffer(E.FRAMEBUFFER,u.handle);x=E.checkFramebufferStatus(E.FRAMEBUFFER);x!==E.FRAMEBUFFER_COMPLETE&&(u.dispose(),m(E,w),p(x));m(E,w)}}var k=b("gl-texture2d");y.exports=function(u,w,x,E){f||(f=u.FRAMEBUFFER_UNSUPPORTED,g=u.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,q=u.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,t=u.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);
var F=u.getExtension("WEBGL_draw_buffers");if(!c&&F){var z=u.getParameter(F.MAX_COLOR_ATTACHMENTS_WEBGL);c=Array(z+1);for(var B=0;B<=z;++B){for(var C=Array(z),v=0;v<B;++v)C[v]=u.COLOR_ATTACHMENT0+v;for(v=B;v<z;++v)C[v]=u.NONE;c[B]=C}}Array.isArray(w)&&(E=x,x=w[1]|0,w=w[0]|0);if("number"!==typeof w)throw Error("gl-fbo: Missing shape parameter");z=u.getParameter(u.MAX_RENDERBUFFER_SIZE);if(0>w||w>z||0>x||x>z)throw Error("gl-fbo: Parameters are too large for FBO");E=E||{};z=1;if("color"in E){z=Math.max(E.color|
0,0);if(0>z)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(1<z){if(!F)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(z>u.getParameter(F.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+z+" draw buffers");}}B=u.UNSIGNED_BYTE;C=u.getExtension("OES_texture_float");if(E.float&&0<z){if(!C)throw Error("gl-fbo: Context does not support floating point textures");B=u.FLOAT}else E.preferFloat&&0<z&&C&&(B=u.FLOAT);C=!0;"depth"in E&&(C=
!!E.depth);v=!1;"stencil"in E&&(v=!!E.stencil);return new e(u,w,x,B,z,C,v,F)};var c=null,f,g,q,t;b=e.prototype;Object.defineProperties(b,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(u){Array.isArray(u)||(u=[u|0,u|0]);if(2!==u.length)throw Error("gl-fbo: Shape vector must be length 2");var w=u[0]|0;u=u[1]|0;l(this,w,u);return[w,u]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(u){u|=0;l(this,u,this._shape[1]);return u},
enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(u){u|=0;l(this,this._shape[0],u);return u},enumerable:!1}});b.bind=function(){if(!this._destroyed){var u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,this.handle);u.viewport(0,0,this._shape[0],this._shape[1])}};b.dispose=function(){if(!this._destroyed){this._destroyed=!0;var u=this.gl;u.deleteFramebuffer(this.handle);this.handle=null;this.depth&&(this.depth.dispose(),this.depth=null);this._depth_rb&&(u.deleteRenderbuffer(this._depth_rb),
this._depth_rb=null);for(var w=0;w<this.color.length;++w)this.color[w].dispose(),this.color[w]=null;this._color_rb&&(u.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":327}],267:[function(b,y,D){var n=b("sprintf-js").sprintf,m=b("gl-constants/lookup"),p=b("glsl-shader-name"),h=b("add-line-numbers");y.exports=function(a,d,e){var l=p(d)||"of unknown name (see npm glsl-shader-name)",k="unknown type";void 0!==e&&(k=e===m.FRAGMENT_SHADER?"fragment":"vertex");e=n("Error compiling %s shader %s:\n",
k,l);l=n("%s%s",e,a);var c=a.split("\n");a={};for(k=0;k<c.length;k++){var f=c[k];if(""!==f&&"\x00"!==f){var g=parseInt(f.split(":")[2]);if(isNaN(g))throw Error(n("Could not parse error: %s",f));a[g]=f}}d=h(d).split("\n");for(k=0;k<d.length;k++)if(a[k+3]||a[k+2]||a[k+1])e+=d[k]+"\n",a[k+1]&&(c=a[k+1],c=c.substr(c.split(":",3).join(":").length+1).trim(),e+=n("^^^ %s\n\n",c));return{long:e.trim(),short:l.trim()}}},{"add-line-numbers":66,"gl-constants/lookup":263,"glsl-shader-name":405,"sprintf-js":539}],
268:[function(b,y,D){function n(k,c,f,g,q,t,u){this.plot=k;this.shader=c;this.pickShader=f;this.positionBuffer=g;this.weightBuffer=q;this.colorBuffer=t;this.idBuffer=u;this.xData=[];this.yData=[];this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickOffset=0}y.exports=function(k,c){var f=k.gl,g=a(f,e.vertex,e.fragment),q=a(f,e.pickVertex,e.pickFragment),t=d(f),u=d(f),w=d(f);f=d(f);g=new n(k,g,q,t,u,w,f);g.update(c);k.addObject(g);return g};var m=b("binary-search-bounds"),p=
b("iota-array"),h=b("typedarray-pool"),a=b("gl-shader"),d=b("gl-buffer"),e=b("./lib/shaders");b=n.prototype;var l=[0,0,1,0,0,1,1,0,1,1,0,1];b.draw=function(){var k=[1,0,0,0,1,0,0,0,1];return function(){var c=this.plot,f=this.shader,g=this.bounds,q=this.numVertices;if(!(0>=q)){var t=c.gl;c=c.dataBox;var u=g[3]-g[1],w=c[2]-c[0],x=c[3]-c[1];k[0]=2*(g[2]-g[0])/w;k[4]=2*u/x;k[6]=2*(g[0]-c[0])/w-1;k[7]=2*(g[1]-c[1])/x-1;f.bind();g=f.uniforms;g.viewTransform=k;g.shape=this.shape;f=f.attributes;this.positionBuffer.bind();
f.position.pointer();this.weightBuffer.bind();f.weight.pointer(t.UNSIGNED_BYTE,!1);this.colorBuffer.bind();f.color.pointer(t.UNSIGNED_BYTE,!0);t.drawArrays(t.TRIANGLES,0,q)}}}();b.drawPick=function(){var k=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(f){var g=this.plot,q=this.pickShader,t=this.bounds,u=this.numVertices;if(!(0>=u)){var w=g.gl;g=g.dataBox;var x=t[3]-t[1],E=g[2]-g[0],F=g[3]-g[1];k[0]=2*(t[2]-t[0])/E;k[4]=2*x/F;k[6]=2*(t[0]-g[0])/E-1;k[7]=2*(t[1]-g[1])/F-1;for(t=0;4>t;++t)c[t]=f>>
8*t&255;this.pickOffset=f;q.bind();t=q.uniforms;t.viewTransform=k;t.pickOffset=c;t.shape=this.shape;q=q.attributes;this.positionBuffer.bind();q.position.pointer();this.weightBuffer.bind();q.weight.pointer(w.UNSIGNED_BYTE,!1);this.idBuffer.bind();q.pickId.pointer(w.UNSIGNED_BYTE,!1);w.drawArrays(w.TRIANGLES,0,u);return f+this.shape[0]*this.shape[1]}}}();b.pick=function(k,c,f){k=this.pickOffset;c=this.shape[0]*this.shape[1];if(f<k||f>=k+c)return null;f-=k;return{object:this,pointId:f,dataCoord:[this.xData[f%
this.shape[0]],this.yData[f/this.shape[0]|0]]}};b.update=function(k){k=k||{};var c=k.shape||[0,0],f=k.x||p(c[0]),g=k.y||p(c[1]),q=k.z||new Float32Array(c[0]*c[1]),t=!1!==k.zsmooth;this.xData=f;this.yData=g;var u=k.colorLevels||[0];k=k.colorValues||[0,0,0,1];var w=u.length,x=this.bounds;if(t){var E=x[0]=f[0];var F=x[1]=g[0];var z=x[2]=f[f.length-1];x=x[3]=g[g.length-1]}else E=x[0]=f[0]+(f[1]-f[0])/2,F=x[1]=g[0]+(g[1]-g[0])/2,z=x[2]=f[f.length-1]+(f[f.length-1]-f[f.length-2])/2,x=x[3]=g[g.length-1]+
(g[g.length-1]-g[g.length-2])/2;z=1/(z-E);x=1/(x-F);var B=c[0];c=c[1];this.shape=[B,c];var C=(t?(B-1)*(c-1):B*c)*(l.length>>>1);this.numVertices=C;var v=h.mallocUint8(4*C),G=h.mallocFloat32(2*C),I=h.mallocUint8(2*C);C=h.mallocUint32(C);for(var J=0,K=t?B-1:B,N=t?c-1:c,H=0;H<N;++H){if(t){var L=x*(g[H]-F);var P=x*(g[H+1]-F)}else L=H<c-1?x*(g[H]-(g[H+1]-g[H])/2-F):x*(g[H]-(g[H]-g[H-1])/2-F),P=H<c-1?x*(g[H]+(g[H+1]-g[H])/2-F):x*(g[H]+(g[H]-g[H-1])/2-F);for(var Q=0;Q<K;++Q){if(t){var S=z*(f[Q]-E);var O=
z*(f[Q+1]-E)}else S=Q<B-1?z*(f[Q]-(f[Q+1]-f[Q])/2-E):z*(f[Q]-(f[Q]-f[Q-1])/2-E),O=Q<B-1?z*(f[Q]+(f[Q+1]-f[Q])/2-E):z*(f[Q]+(f[Q]-f[Q-1])/2-E);for(var U=0;U<l.length;U+=2){var X=l[U],da=l[U+1],ea=q[t?(H+da)*B+(Q+X):H*B+Q],ca=m.le(u,ea);if(0>ca){ca=k[0];ea=k[1];var ia=k[2];var ha=k[3]}else if(ca===w-1)ca=k[4*w-4],ea=k[4*w-3],ia=k[4*w-2],ha=k[4*w-1];else{ha=(ea-u[ca])/(u[ca+1]-u[ca]);var fa=1-ha,na=4*ca,sa=4*(ca+1);ca=fa*k[na]+ha*k[sa];ea=fa*k[na+1]+ha*k[sa+1];ia=fa*k[na+2]+ha*k[sa+2];ha=fa*k[na+3]+
ha*k[sa+3]}v[4*J]=255*ca;v[4*J+1]=255*ea;v[4*J+2]=255*ia;v[4*J+3]=255*ha;G[2*J]=.5*S+.5*O;G[2*J+1]=.5*L+.5*P;I[2*J]=X;I[2*J+1]=da;C[J]=H*B+Q;J+=1}}}this.positionBuffer.update(G);this.weightBuffer.update(I);this.colorBuffer.update(v);this.idBuffer.update(C);h.free(G);h.free(v);h.free(I);h.free(C)};b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.weightBuffer.dispose();this.colorBuffer.dispose();this.idBuffer.dispose();this.plot.removeObject(this)}},
{"./lib/shaders":269,"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312,"iota-array":437,"typedarray-pool":567}],269:[function(b,y,D){b=b("glslify");y.exports={fragment:b(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor \x3d vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor \x3d color;\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),
pickFragment:b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d \x3d step(.5, vWeight);\n  vec4 id \x3d fragId + pickOffset;\n  id.x +\x3d d.x + d.y*shape.x;\n\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor \x3d id/255.;\n}\n"]),
pickVertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight \x3d weight;\n\n  fragId \x3d pickId;\n\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:413}],270:[function(b,y,D){y=b("glslify");
var n=b("gl-shader"),m=y(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint \x3d project(position);\n  vec4 endPoint   \x3d project(nextPosition);\n\n  vec2 A \x3d startPoint.xy / startPoint.w;\n  vec2 B \x3d   endPoint.xy /   endPoint.w;\n\n  float clipAngle \x3d atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset \x3d 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position \x3d vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition \x3d position;\n  pixelArcLength \x3d arcLength;\n  fragColor \x3d color;\n}\n"]),
p=y(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  float dashWeight \x3d texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight \x3c 0.5) {\n    discard;\n  }\n  gl_FragColor \x3d fragColor * opacity;\n}\n"]),
h=y(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av \x3d abs(v);\n\n  //Handle special cases\n  if(av \x3c FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v \x3e FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v \x3c -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c \x3d vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e \x3d floor(log2(av));\n  float m \x3d av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] \x3d floor(128.0 * m);\n  m -\x3d c[1] / 128.0;\n  c[2] \x3d floor(32768.0 * m);\n  m -\x3d c[2] / 32768.0;\n  c[3] \x3d floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias \x3d e + 127.0;\n  c[0] \x3d floor(ebias / 2.0);\n  ebias -\x3d c[0] * 2.0;\n  c[1] +\x3d floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] +\x3d 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor \x3d vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),
a=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];D.createShader=function(d){return n(d,m,p,null,a)};D.createPickShader=function(d){return n(d,m,h,null,a)}},{"gl-shader":312,glslify:413}],271:[function(b,y,D){function n(t){for(var u=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],w=0;3>w;++w)u[0][w]=Math.max(t[0][w],u[0][w]),u[1][w]=Math.min(t[1][w],u[1][w]);return u}function m(t,u,w,x){this.arcLength=t;
this.position=u;this.index=w;this.dataCoordinate=x}function p(t,u,w,x,E,F){this.gl=t;this.shader=u;this.pickShader=w;this.buffer=x;this.vao=E;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.points=[];this.arcLength=[];this.vertexCount=0;this.bounds=[[0,0,0],[0,0,0]];this.pickId=0;this.lineWidth=1;this.texture=F;this.opacity=this.dashScale=1;this.hasAlpha=!1;this.dirty=!0;this.pixelRatio=1}y.exports=function(t){var u=t.gl||t.scene&&t.scene.gl,w=f(u);w.attributes.position.location=
0;w.attributes.nextPosition.location=1;w.attributes.arcLength.location=2;w.attributes.lineWidth.location=3;w.attributes.color.location=4;var x=g(u);x.attributes.position.location=0;x.attributes.nextPosition.location=1;x.attributes.arcLength.location=2;x.attributes.lineWidth.location=3;x.attributes.color.location=4;for(var E=h(u),F=a(u,[{buffer:E,size:3,offset:0,stride:48},{buffer:E,size:3,offset:12,stride:48},{buffer:E,size:1,offset:24,stride:48},{buffer:E,size:1,offset:28,stride:48},{buffer:E,size:4,
offset:32,stride:48}]),z=c(Array(1024),[256,1,4]),B=0;1024>B;++B)z.data[B]=255;z=d(u,z);z.wrap=u.REPEAT;u=new p(u,w,x,E,F,z);u.update(t);return u};var h=b("gl-buffer"),a=b("gl-vao"),d=b("gl-texture2d"),e=new Uint8Array(4),l=new Float32Array(e.buffer),k=b("binary-search-bounds"),c=b("ndarray");b=b("./lib/shaders");var f=b.createShader,g=b.createPickShader,q=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=p.prototype;b.isTransparent=function(){return this.hasAlpha};b.isOpaque=function(){return!this.hasAlpha};b.pickSlots=
1;b.setPickBase=function(t){this.pickId=t};b.drawTransparent=b.draw=function(t){if(this.vertexCount){var u=this.gl,w=this.shader,x=this.vao;w.bind();w.uniforms={model:t.model||q,view:t.view||q,projection:t.projection||q,clipBounds:n(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[u.drawingBufferWidth,u.drawingBufferHeight],pixelRatio:this.pixelRatio};x.bind();x.draw(u.TRIANGLE_STRIP,this.vertexCount);
x.unbind()}};b.drawPick=function(t){if(this.vertexCount){var u=this.gl,w=this.pickShader,x=this.vao;w.bind();w.uniforms={model:t.model||q,view:t.view||q,projection:t.projection||q,pickId:this.pickId,clipBounds:n(this.clipBounds),screenShape:[u.drawingBufferWidth,u.drawingBufferHeight],pixelRatio:this.pixelRatio};x.bind();x.draw(u.TRIANGLE_STRIP,this.vertexCount);x.unbind()}};b.update=function(t){var u;this.dirty=!0;var w=!!t.connectGaps;"dashScale"in t&&(this.dashScale=t.dashScale);this.hasAlpha=
!1;"opacity"in t&&(this.opacity=+t.opacity,1>this.opacity&&(this.hasAlpha=!0));var x=[],E=[],F=[],z=0,B=0,C=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],v=t.position||t.positions;if(v){var G=t.color||t.colors||[0,0,0,1],I=t.lineWidth||1,J=!1;var K=1;a:for(;K<v.length;++K){var N=v[K-1],H=v[K];E.push(z);F.push(N.slice());for(u=0;3>u;++u){if(isNaN(N[u])||isNaN(H[u])||!isFinite(N[u])||!isFinite(H[u])){if(!w&&0<x.length){for(J=0;24>J;++J)x.push(x[x.length-12]);B+=2;J=!0}continue a}C[0][u]=
Math.min(C[0][u],N[u],H[u]);C[1][u]=Math.max(C[1][u],N[u],H[u])}if(Array.isArray(G[0])){var L=G.length>K-1?G[K-1]:0<G.length?G[G.length-1]:[0,0,0,1];var P=G.length>K?G[K]:0<G.length?G[G.length-1]:[0,0,0,1]}else L=P=G;3===L.length&&(L=[L[0],L[1],L[2],1]);3===P.length&&(P=[P[0],P[1],P[2],1]);!this.hasAlpha&&1>L[3]&&(this.hasAlpha=!0);var Q=Array.isArray(I)?I.length>K-1?I[K-1]:0<I.length?I[I.length-1]:[0,0,0,1]:I;var S=z;u=z;for(var O=z=0;3>O;++O){var U=N[O]-H[O];z+=U*U}z=u+Math.sqrt(z);if(J){for(u=
0;2>u;++u)x.push(N[0],N[1],N[2],H[0],H[1],H[2],S,Q,L[0],L[1],L[2],L[3]);B+=2;J=!1}x.push(N[0],N[1],N[2],H[0],H[1],H[2],S,Q,L[0],L[1],L[2],L[3],N[0],N[1],N[2],H[0],H[1],H[2],S,-Q,L[0],L[1],L[2],L[3],H[0],H[1],H[2],N[0],N[1],N[2],z,-Q,P[0],P[1],P[2],P[3],H[0],H[1],H[2],N[0],N[1],N[2],z,Q,P[0],P[1],P[2],P[3]);B+=4}}this.buffer.update(x);E.push(z);F.push(v[v.length-1].slice());this.bounds=C;this.vertexCount=B;this.points=F;this.arcLength=E;if("dashes"in t){t=t.dashes.slice();t.unshift(0);for(K=1;K<t.length;++K)t[K]=
t[K-1]+t[K];w=c(Array(1024),[256,1,4]);for(K=0;256>K;++K){for(u=0;4>u;++u)w.set(K,0,u,0);k.le(t,t[t.length-1]*K/255)&1?w.set(K,0,0,0):w.set(K,0,0,255)}this.texture.setPixels(w)}};b.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};b.pick=function(t){if(!t||t.id!==this.pickId)return null;var u=t.value[0];var w=t.value[1];t=t.value[2];e[0]=0;e[1]=t;e[2]=w;e[3]=u;u=l[0];t=k.le(this.arcLength,u);if(0>t)return null;if(t===this.arcLength.length-1)return new m(this.arcLength[this.arcLength.length-
1],this.points[this.points.length-1].slice(),t);var x=this.points[t],E=this.points[Math.min(t+1,this.points.length-1)],F=(u-this.arcLength[t])/(this.arcLength[t+1]-this.arcLength[t]),z=1-F;w=[0,0,0];for(var B=0;3>B;++B)w[B]=z*x[B]+F*E[B];t=Math.min(.5>F?t:t+1,this.points.length-1);return new m(u,w,t,this.points[t])}},{"./lib/shaders":270,"binary-search-bounds":96,"gl-buffer":258,"gl-texture2d":327,"gl-vao":332,ndarray:469}],272:[function(b,y,D){y.exports=function(n){var m=new Float32Array(16);m[0]=
n[0];m[1]=n[1];m[2]=n[2];m[3]=n[3];m[4]=n[4];m[5]=n[5];m[6]=n[6];m[7]=n[7];m[8]=n[8];m[9]=n[9];m[10]=n[10];m[11]=n[11];m[12]=n[12];m[13]=n[13];m[14]=n[14];m[15]=n[15];return m}},{}],273:[function(b,y,D){y.exports=function(){var n=new Float32Array(16);n[0]=1;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=1;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=1;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}},{}],274:[function(b,y,D){y.exports=function(n){var m=n[0],p=n[1],h=n[2],a=n[3],d=n[4],e=n[5],l=n[6],k=n[7],c=n[8],f=n[9],
g=n[10],q=n[11],t=n[12],u=n[13],w=n[14];n=n[15];return(m*e-p*d)*(g*n-q*w)-(m*l-h*d)*(f*n-q*u)+(m*k-a*d)*(f*w-g*u)+(p*l-h*e)*(c*n-q*t)-(p*k-a*e)*(c*w-g*t)+(h*k-a*l)*(c*u-f*t)}},{}],275:[function(b,y,D){y.exports=function(n,m){var p=m[0],h=m[1],a=m[2];m=m[3];var d=p+p,e=h+h,l=a+a;p*=d;var k=h*d;h*=e;var c=a*d,f=a*e;a*=l;d*=m;e*=m;m*=l;n[0]=1-h-a;n[1]=k+m;n[2]=c-e;n[3]=0;n[4]=k-m;n[5]=1-p-a;n[6]=f+d;n[7]=0;n[8]=c+e;n[9]=f-d;n[10]=1-p-h;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}},{}],276:[function(b,
y,D){y.exports=function(n,m,p){var h=m[0],a=m[1],d=m[2],e=m[3],l=h+h,k=a+a,c=d+d;m=h*l;var f=h*k;h*=c;var g=a*k;a*=c;d*=c;l*=e;k*=e;e*=c;n[0]=1-(g+d);n[1]=f+e;n[2]=h-k;n[3]=0;n[4]=f-e;n[5]=1-(m+d);n[6]=a+l;n[7]=0;n[8]=h+k;n[9]=a-l;n[10]=1-(m+g);n[11]=0;n[12]=p[0];n[13]=p[1];n[14]=p[2];n[15]=1;return n}},{}],277:[function(b,y,D){y.exports=function(n){n[0]=1;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=1;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=1;n[11]=0;n[12]=0;n[13]=0;n[14]=0;n[15]=1;return n}},{}],278:[function(b,
y,D){y.exports=function(n,m){var p=m[0],h=m[1],a=m[2],d=m[3],e=m[4],l=m[5],k=m[6],c=m[7],f=m[8],g=m[9],q=m[10],t=m[11],u=m[12],w=m[13],x=m[14];m=m[15];var E=p*l-h*e,F=p*k-a*e,z=p*c-d*e,B=h*k-a*l,C=h*c-d*l,v=a*c-d*k,G=f*w-g*u,I=f*x-q*u,J=f*m-t*u,K=g*x-q*w,N=g*m-t*w,H=q*m-t*x,L=E*H-F*N+z*K+B*J-C*I+v*G;if(!L)return null;L=1/L;n[0]=(l*H-k*N+c*K)*L;n[1]=(a*N-h*H-d*K)*L;n[2]=(w*v-x*C+m*B)*L;n[3]=(q*C-g*v-t*B)*L;n[4]=(k*J-e*H-c*I)*L;n[5]=(p*H-a*J+d*I)*L;n[6]=(x*z-u*v-m*F)*L;n[7]=(f*v-q*z+t*F)*L;n[8]=(e*
N-l*J+c*G)*L;n[9]=(h*J-p*N-d*G)*L;n[10]=(u*C-w*z+m*E)*L;n[11]=(g*z-f*C-t*E)*L;n[12]=(l*I-e*K-k*G)*L;n[13]=(p*K-h*I+a*G)*L;n[14]=(w*F-u*B-x*E)*L;n[15]=(f*B-g*F+q*E)*L;return n}},{}],279:[function(b,y,D){var n=b("./identity");y.exports=function(m,p,h,a){var d=p[0],e=p[1];p=p[2];var l=a[0];var k=a[1];var c=a[2];var f=h[0];a=h[1];var g=h[2];if(1E-6>Math.abs(d-f)&&1E-6>Math.abs(e-a)&&1E-6>Math.abs(p-g))return n(m);h=d-f;a=e-a;f=p-g;var q=1/Math.sqrt(h*h+a*a+f*f);h*=q;a*=q;f*=q;g=k*f-c*a;c=c*h-l*f;l=l*
a-k*h;(q=Math.sqrt(g*g+c*c+l*l))?(q=1/q,g*=q,c*=q,l*=q):l=c=g=0;k=a*l-f*c;var t=f*g-h*l;var u=h*c-a*g;(q=Math.sqrt(k*k+t*t+u*u))?(q=1/q,k*=q,t*=q,u*=q):u=t=k=0;m[0]=g;m[1]=k;m[2]=h;m[3]=0;m[4]=c;m[5]=t;m[6]=a;m[7]=0;m[8]=l;m[9]=u;m[10]=f;m[11]=0;m[12]=-(g*d+c*e+l*p);m[13]=-(k*d+t*e+u*p);m[14]=-(h*d+a*e+f*p);m[15]=1;return m}},{"./identity":277}],280:[function(b,y,D){y.exports=function(n,m,p){var h=m[0],a=m[1],d=m[2],e=m[3],l=m[4],k=m[5],c=m[6],f=m[7],g=m[8],q=m[9],t=m[10],u=m[11],w=m[12],x=m[13],
E=m[14];m=m[15];var F=p[0],z=p[1],B=p[2],C=p[3];n[0]=F*h+z*l+B*g+C*w;n[1]=F*a+z*k+B*q+C*x;n[2]=F*d+z*c+B*t+C*E;n[3]=F*e+z*f+B*u+C*m;F=p[4];z=p[5];B=p[6];C=p[7];n[4]=F*h+z*l+B*g+C*w;n[5]=F*a+z*k+B*q+C*x;n[6]=F*d+z*c+B*t+C*E;n[7]=F*e+z*f+B*u+C*m;F=p[8];z=p[9];B=p[10];C=p[11];n[8]=F*h+z*l+B*g+C*w;n[9]=F*a+z*k+B*q+C*x;n[10]=F*d+z*c+B*t+C*E;n[11]=F*e+z*f+B*u+C*m;F=p[12];z=p[13];B=p[14];C=p[15];n[12]=F*h+z*l+B*g+C*w;n[13]=F*a+z*k+B*q+C*x;n[14]=F*d+z*c+B*t+C*E;n[15]=F*e+z*f+B*u+C*m;return n}},{}],281:[function(b,
y,D){y.exports=function(n,m,p,h,a,d,e){var l=1/(m-p),k=1/(h-a),c=1/(d-e);n[0]=-2*l;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=-2*k;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=2*c;n[11]=0;n[12]=(m+p)*l;n[13]=(a+h)*k;n[14]=(e+d)*c;n[15]=1;return n}},{}],282:[function(b,y,D){y.exports=function(n,m,p,h,a){m=1/Math.tan(m/2);var d=1/(h-a);n[0]=m/p;n[1]=0;n[2]=0;n[3]=0;n[4]=0;n[5]=m;n[6]=0;n[7]=0;n[8]=0;n[9]=0;n[10]=(a+h)*d;n[11]=-1;n[12]=0;n[13]=0;n[14]=2*a*h*d;n[15]=0;return n}},{}],283:[function(b,y,D){y.exports=function(n,
m,p,h){var a=h[0],d=h[1];h=h[2];var e=Math.sqrt(a*a+d*d+h*h);if(1E-6>Math.abs(e))return null;e=1/e;a*=e;d*=e;h*=e;var l=Math.sin(p);var k=Math.cos(p);var c=1-k;p=m[0];e=m[1];var f=m[2];var g=m[3];var q=m[4];var t=m[5];var u=m[6];var w=m[7];var x=m[8];var E=m[9];var F=m[10];var z=m[11];var B=a*a*c+k;var C=d*a*c+h*l;var v=h*a*c-d*l;var G=a*d*c-h*l;var I=d*d*c+k;var J=h*d*c+a*l;var K=a*h*c+d*l;a=d*h*c-a*l;d=h*h*c+k;n[0]=p*B+q*C+x*v;n[1]=e*B+t*C+E*v;n[2]=f*B+u*C+F*v;n[3]=g*B+w*C+z*v;n[4]=p*G+q*I+x*J;
n[5]=e*G+t*I+E*J;n[6]=f*G+u*I+F*J;n[7]=g*G+w*I+z*J;n[8]=p*K+q*a+x*d;n[9]=e*K+t*a+E*d;n[10]=f*K+u*a+F*d;n[11]=g*K+w*a+z*d;m!==n&&(n[12]=m[12],n[13]=m[13],n[14]=m[14],n[15]=m[15]);return n}},{}],284:[function(b,y,D){y.exports=function(n,m,p){var h=Math.sin(p);p=Math.cos(p);var a=m[4],d=m[5],e=m[6],l=m[7],k=m[8],c=m[9],f=m[10],g=m[11];m!==n&&(n[0]=m[0],n[1]=m[1],n[2]=m[2],n[3]=m[3],n[12]=m[12],n[13]=m[13],n[14]=m[14],n[15]=m[15]);n[4]=a*p+k*h;n[5]=d*p+c*h;n[6]=e*p+f*h;n[7]=l*p+g*h;n[8]=k*p-a*h;n[9]=
c*p-d*h;n[10]=f*p-e*h;n[11]=g*p-l*h;return n}},{}],285:[function(b,y,D){y.exports=function(n,m,p){var h=Math.sin(p);p=Math.cos(p);var a=m[0],d=m[1],e=m[2],l=m[3],k=m[8],c=m[9],f=m[10],g=m[11];m!==n&&(n[4]=m[4],n[5]=m[5],n[6]=m[6],n[7]=m[7],n[12]=m[12],n[13]=m[13],n[14]=m[14],n[15]=m[15]);n[0]=a*p-k*h;n[1]=d*p-c*h;n[2]=e*p-f*h;n[3]=l*p-g*h;n[8]=a*h+k*p;n[9]=d*h+c*p;n[10]=e*h+f*p;n[11]=l*h+g*p;return n}},{}],286:[function(b,y,D){y.exports=function(n,m,p){var h=Math.sin(p);p=Math.cos(p);var a=m[0],d=
m[1],e=m[2],l=m[3],k=m[4],c=m[5],f=m[6],g=m[7];m!==n&&(n[8]=m[8],n[9]=m[9],n[10]=m[10],n[11]=m[11],n[12]=m[12],n[13]=m[13],n[14]=m[14],n[15]=m[15]);n[0]=a*p+k*h;n[1]=d*p+c*h;n[2]=e*p+f*h;n[3]=l*p+g*h;n[4]=k*p-a*h;n[5]=c*p-d*h;n[6]=f*p-e*h;n[7]=g*p-l*h;return n}},{}],287:[function(b,y,D){y.exports=function(n,m,p){var h=p[0],a=p[1];p=p[2];n[0]=m[0]*h;n[1]=m[1]*h;n[2]=m[2]*h;n[3]=m[3]*h;n[4]=m[4]*a;n[5]=m[5]*a;n[6]=m[6]*a;n[7]=m[7]*a;n[8]=m[8]*p;n[9]=m[9]*p;n[10]=m[10]*p;n[11]=m[11]*p;n[12]=m[12];n[13]=
m[13];n[14]=m[14];n[15]=m[15];return n}},{}],288:[function(b,y,D){y.exports=function(n,m,p){var h=p[0],a=p[1];p=p[2];if(m===n)n[12]=m[0]*h+m[4]*a+m[8]*p+m[12],n[13]=m[1]*h+m[5]*a+m[9]*p+m[13],n[14]=m[2]*h+m[6]*a+m[10]*p+m[14],n[15]=m[3]*h+m[7]*a+m[11]*p+m[15];else{var d=m[0];var e=m[1];var l=m[2];var k=m[3];var c=m[4];var f=m[5];var g=m[6];var q=m[7];var t=m[8];var u=m[9];var w=m[10];var x=m[11];n[0]=d;n[1]=e;n[2]=l;n[3]=k;n[4]=c;n[5]=f;n[6]=g;n[7]=q;n[8]=t;n[9]=u;n[10]=w;n[11]=x;n[12]=d*h+c*a+t*
p+m[12];n[13]=e*h+f*a+u*p+m[13];n[14]=l*h+g*a+w*p+m[14];n[15]=k*h+q*a+x*p+m[15]}return n}},{}],289:[function(b,y,D){y.exports=function(n,m){if(n===m){var p=m[1],h=m[2],a=m[3],d=m[6],e=m[7],l=m[11];n[1]=m[4];n[2]=m[8];n[3]=m[12];n[4]=p;n[6]=m[9];n[7]=m[13];n[8]=h;n[9]=d;n[11]=m[14];n[12]=a;n[13]=e;n[14]=l}else n[0]=m[0],n[1]=m[4],n[2]=m[8],n[3]=m[12],n[4]=m[1],n[5]=m[5],n[6]=m[9],n[7]=m[13],n[8]=m[2],n[9]=m[6],n[10]=m[10],n[11]=m[14],n[12]=m[3],n[13]=m[7],n[14]=m[11],n[15]=m[15];return n}},{}],290:[function(b,
y,D){function n(h,a){for(var d=[0,0,0,0],e=0;4>e;++e)for(var l=0;4>l;++l)d[l]+=h[4*e+l]*a[e];return d}var m=b("barycentric"),p=b("polytope-closest-point/lib/closest_point_2d.js");y.exports=function(h,a,d,e,l,k){if(1===h.length)return[0,h[0].slice()];for(var c=Array(h.length),f=0;f<h.length;++f){var g=f,q=h[f],t=k;q=n(l,n(e,n(d,[q[0],q[1],q[2],1])));for(var u=0;3>u;++u)q[u]/=q[3];c[g]=[.5*t[0]*(1+q[0]),.5*t[1]*(1-q[1])]}d=0;e=Infinity;for(f=0;f<c.length;++f){for(k=l=0;2>k;++k)l+=Math.pow(c[f][k]-a[k],
2);l<e&&(e=l,d=f)}if(2===c.length){for(l=e=f=0;2>l;++l)f+=Math.pow(a[l]-c[0][l],2),e+=Math.pow(a[l]-c[1][l],2);f=Math.sqrt(f);e=Math.sqrt(e);a=1E-6>f+e?[1,0]:[e/(f+e),f/(e+f)]}else 3===c.length?(f=[0,0],p(c[0],c[1],c[2],a,f),a=m(c,f)):a=[];for(f=c=0;3>f;++f){if(-.001>a[f]||1.0001<a[f])return null;c+=a[f]}if(.001<Math.abs(c-1))return null;c=[0,0,0];for(f=0;f<h.length;++f)for(e=h[f],l=a[f],k=0;3>k;++k)c[k]+=l*e[k];return[d,c,a]}},{barycentric:78,"polytope-closest-point/lib/closest_point_2d.js":499}],
291:[function(b,y,D){var n=b("glslify");b=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      \x3d project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * vec4(position , 1.0);\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal  \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          \x3d color;\n  f_data           \x3d position;\n  f_uv             \x3d uv;\n}\n"]);
y=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann \x3d require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular \x3d max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * f_color.a;\n}\n"]);
var m=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_color \x3d color;\n  f_data  \x3d position;\n  f_uv    \x3d uv;\n}"]),p=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),
h=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize \x3d pointSize;\n  f_color \x3d color;\n  f_uv \x3d uv;\n}"]),
a=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR \x3d gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) \x3e 0.25) {\n    discard;\n  }\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),d=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_id        \x3d id;\n  f_position  \x3d position;\n}"]),
e=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]),
l=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  \x3d projection * view * model * vec4(position, 1.0);\n    gl_PointSize \x3d pointSize;\n  }\n  f_id         \x3d id;\n  f_position   \x3d position;\n}"]),
k=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n}"]);n=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor \x3d vec4(contourColor, 1.0);\n}\n"]);D.meshShader={vertex:b,fragment:y,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};
D.wireShader={vertex:m,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};D.pointShader={vertex:h,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]};D.pickShader={vertex:d,fragment:e,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]};D.pointPickShader={vertex:l,fragment:e,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},
{name:"id",type:"vec4"}]};D.contourShader={vertex:k,fragment:n,attributes:[{name:"position",type:"vec3"}]}},{glslify:413}],292:[function(b,y,D){function n(C,v,G,I,J,K,N,H,L,P,Q,S,O,U,X,da,ea,ca,ia,ha,fa,na,sa,ua,ta,oa,va){this.gl=C;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=v;this.dirty=!0;this.triShader=G;this.lineShader=I;this.pointShader=J;this.pickShader=K;this.pointPickShader=N;this.contourShader=H;this.trianglePositions=L;this.triangleColors=Q;this.triangleNormals=
O;this.triangleUVs=S;this.triangleIds=P;this.triangleVAO=U;this.triangleCount=0;this.lineWidth=1;this.edgePositions=X;this.edgeColors=ea;this.edgeUVs=ca;this.edgeIds=da;this.edgeVAO=ia;this.edgeCount=0;this.pointPositions=ha;this.pointColors=na;this.pointUVs=sa;this.pointSizes=ua;this.pointIds=fa;this.pointVAO=ta;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=oa;this.contourVAO=va;this.contourCount=0;this.contourColor=[0,0,0];this.pickVertex=this.contourEnable=!0;this.pickId=1;this.bounds=
[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.opacityscale=this.hasAlpha=!1;this._projection=this._view=this._model=B;this._resolution=[1,1]}function m(C,v){if(!v||!v.length)return 1;for(var G=0;G<v.length&&!(2>v.length);++G){if(v[G][0]===C)return v[G][1];if(v[G][0]>
C&&0<G)return C=(v[G][0]-C)/(v[G][0]-v[G-1][0]),v[G][1]*(1-C)+C*v[G-1][1]}return 1}var p=b("gl-shader"),h=b("gl-buffer"),a=b("gl-vao"),d=b("gl-texture2d"),e=b("normals"),l=b("gl-mat4/multiply"),k=b("gl-mat4/invert"),c=b("ndarray"),f=b("colormap"),g=b("simplicial-complex-contour"),q=b("typedarray-pool");D=b("./lib/shaders");var t=b("./lib/closest-point"),u=D.meshShader,w=D.wireShader,x=D.pointShader,E=D.pickShader,F=D.pointPickShader,z=D.contourShader,B=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=n.prototype;
b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.pickSlots=1;b.setPickBase=function(C){this.pickId=C};b.highlight=function(C){if(C&&this.contourEnable){var v=g(this.cells,this.intensity,C.intensity);C=v.cells;var G=v.vertexIds;v=v.vertexWeights;for(var I=C.length,J=q.mallocFloat32(6*I),K=0,N=0;N<I;++N)for(var H=C[N],L=0;2>L;++L){var P=H[0];2===H.length&&(P=H[L]);var Q=v[P],S=1-Q,O=this.positions[G[P][0]];P=this.positions[G[P][1]];for(var U=0;3>U;++U)J[K++]=
Q*O[U]+S*P[U]}this.contourCount=K/3|0;this.contourPositions.update(J.subarray(0,K));q.free(J)}else this.contourCount=0};b.update=function(C){C=C||{};var v=this.gl;this.dirty=!0;"contourEnable"in C&&(this.contourEnable=C.contourEnable);"contourColor"in C&&(this.contourColor=C.contourColor);"lineWidth"in C&&(this.lineWidth=C.lineWidth);"lightPosition"in C&&(this.lightPosition=C.lightPosition);this.hasAlpha=!1;"opacity"in C&&(this.opacity=C.opacity,1>this.opacity&&(this.hasAlpha=!0));"opacityscale"in
C&&(this.opacityscale=C.opacityscale,this.hasAlpha=!0);"ambient"in C&&(this.ambientLight=C.ambient);"diffuse"in C&&(this.diffuseLight=C.diffuse);"specular"in C&&(this.specularLight=C.specular);"roughness"in C&&(this.roughness=C.roughness);"fresnel"in C&&(this.fresnel=C.fresnel);if(C.texture)this.texture.dispose(),this.texture=d(v,C.texture);else if(C.colormap){this.texture.shape=[256,256];this.texture.minFilter=v.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=v.LINEAR;v=this.texture;var G=v.setPixels;
var I=this.opacityscale;for(var J=f({colormap:C.colormap,nshades:256,format:"rgba"}),K=new Uint8Array(1024),N=0;256>N;++N){for(var H=J[N],L=0;3>L;++L)K[4*N+L]=H[L];K[4*N+3]=I?255*m(N/255,I):255*H[3]}I=c(K,[256,256,4],[4,0,1]);G.call(v,I);this.texture.generateMipmap()}v=C.cells;if((G=C.positions)&&v){I=[];J=[];K=[];N=[];H=[];L=[];var P=[],Q=[],S=[],O=[],U=[],X=[],da=[],ea=[];this.cells=v;this.positions=G;var ca=C.vertexNormals,ia=C.cellNormals,ha=void 0===C.vertexNormalsEpsilon?1E-6:C.vertexNormalsEpsilon,
fa=void 0===C.faceNormalsEpsilon?1E-6:C.faceNormalsEpsilon;C.useFacetNormals&&!ia&&(ia=e.faceNormals(v,G,fa));ia||ca||(ca=e.vertexNormals(v,G,ha));ha=C.vertexColors;fa=C.cellColors;var na=C.meshColor||[1,1,1,1],sa=C.vertexUVs,ua=C.vertexIntensity,ta=C.cellUVs,oa=C.cellIntensity,va=Infinity,ma=-Infinity;if(!sa&&!ta)if(ua)if(C.vertexIntensityBounds)va=+C.vertexIntensityBounds[0],ma=+C.vertexIntensityBounds[1];else for(var pa=0;pa<ua.length;++pa){var za=ua[pa];va=Math.min(va,za);ma=Math.max(ma,za)}else if(oa)if(C.cellIntensityBounds)va=
+C.cellIntensityBounds[0],ma=+C.cellIntensityBounds[1];else for(pa=0;pa<oa.length;++pa)za=oa[pa],va=Math.min(va,za),ma=Math.max(ma,za);else for(pa=0;pa<G.length;++pa)za=G[pa][2],va=Math.min(va,za),ma=Math.max(ma,za);if(ua)this.intensity=ua;else if(oa)this.intensity=oa;else{pa=G.length;za=Array(pa);for(var qa=0;qa<pa;++qa)za[qa]=G[qa][2];this.intensity=za}this.pickVertex=!(oa||fa);za=C.pointSizes;C=C.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(pa=0;pa<
G.length;++pa){var Ca=G[pa];for(qa=0;3>qa;++qa)!isNaN(Ca[qa])&&isFinite(Ca[qa])&&(this.bounds[0][qa]=Math.min(this.bounds[0][qa],Ca[qa]),this.bounds[1][qa]=Math.max(this.bounds[1][qa],Ca[qa]))}var Ka=0,Oa=0,kb=0;pa=0;a:for(;pa<v.length;++pa){var mb=v[pa];switch(mb.length){case 1:var tb=mb[0];Ca=G[tb];for(qa=0;3>qa;++qa)if(isNaN(Ca[qa])||!isFinite(Ca[qa]))continue a;O.push(Ca[0],Ca[1],Ca[2]);var nb=ha?ha[tb]:fa?fa[pa]:na;this.opacityscale&&ua?J.push(nb[0],nb[1],nb[2],this.opacity*m((ua[tb]-va)/(ma-
va),this.opacityscale)):3===nb.length?U.push(nb[0],nb[1],nb[2],this.opacity):(U.push(nb[0],nb[1],nb[2],nb[3]*this.opacity),1>nb[3]&&(this.hasAlpha=!0));Ca=sa?sa[tb]:ua?[(ua[tb]-va)/(ma-va),0]:ta?ta[pa]:oa?[(oa[pa]-va)/(ma-va),0]:[(Ca[2]-va)/(ma-va),0];X.push(Ca[0],Ca[1]);za?da.push(za[tb]):da.push(C);ea.push(pa);kb+=1;break;case 2:for(qa=0;2>qa;++qa)for(tb=mb[qa],Ca=G[tb],tb=0;3>tb;++tb)if(isNaN(Ca[tb])||!isFinite(Ca[tb]))continue a;for(qa=0;2>qa;++qa)tb=mb[qa],Ca=G[tb],L.push(Ca[0],Ca[1],Ca[2]),
nb=ha?ha[tb]:fa?fa[pa]:na,this.opacityscale&&ua?J.push(nb[0],nb[1],nb[2],this.opacity*m((ua[tb]-va)/(ma-va),this.opacityscale)):3===nb.length?P.push(nb[0],nb[1],nb[2],this.opacity):(P.push(nb[0],nb[1],nb[2],nb[3]*this.opacity),1>nb[3]&&(this.hasAlpha=!0)),Ca=sa?sa[tb]:ua?[(ua[tb]-va)/(ma-va),0]:ta?ta[pa]:oa?[(oa[pa]-va)/(ma-va),0]:[(Ca[2]-va)/(ma-va),0],Q.push(Ca[0],Ca[1]),S.push(pa);Oa+=1;break;case 3:for(qa=0;3>qa;++qa)for(tb=mb[qa],Ca=G[tb],tb=0;3>tb;++tb)if(isNaN(Ca[tb])||!isFinite(Ca[tb]))continue a;
for(qa=0;3>qa;++qa)tb=mb[2-qa],Ca=G[tb],I.push(Ca[0],Ca[1],Ca[2]),(nb=ha?ha[tb]:fa?fa[pa]:na)?this.opacityscale&&ua?J.push(nb[0],nb[1],nb[2],this.opacity*m((ua[tb]-va)/(ma-va),this.opacityscale)):3===nb.length?J.push(nb[0],nb[1],nb[2],this.opacity):(J.push(nb[0],nb[1],nb[2],nb[3]*this.opacity),1>nb[3]&&(this.hasAlpha=!0)):J.push(.5,.5,.5,1),Ca=sa?sa[tb]:ua?[(ua[tb]-va)/(ma-va),0]:ta?ta[pa]:oa?[(oa[pa]-va)/(ma-va),0]:[(Ca[2]-va)/(ma-va),0],N.push(Ca[0],Ca[1]),Ca=ca?ca[tb]:ia[pa],K.push(Ca[0],Ca[1],
Ca[2]),H.push(pa);Ka+=1}}this.pointCount=kb;this.edgeCount=Oa;this.triangleCount=Ka;this.pointPositions.update(O);this.pointColors.update(U);this.pointUVs.update(X);this.pointSizes.update(da);this.pointIds.update(new Uint32Array(ea));this.edgePositions.update(L);this.edgeColors.update(P);this.edgeUVs.update(Q);this.edgeIds.update(new Uint32Array(S));this.trianglePositions.update(I);this.triangleColors.update(J);this.triangleUVs.update(N);this.triangleNormals.update(K);this.triangleIds.update(new Uint32Array(H))}};
b.drawTransparent=b.draw=function(C){C=C||{};var v=this.gl,G=C.model||B,I=C.view||B,J=C.projection||B,K=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(C=0;3>C;++C)K[0][C]=Math.max(K[0][C],this.clipBounds[0][C]),K[1][C]=Math.min(K[1][C],this.clipBounds[1][C]);G={model:G,view:I,projection:J,inverseModel:B.slice(),clipBounds:K,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,
texture:0};G.inverseModel=k(G.inverseModel,G.model);v.disable(v.CULL_FACE);this.texture.bind(0);I=Array(16);l(I,G.view,G.model);l(I,G.projection,I);k(I,I);for(C=0;3>C;++C)G.eyePosition[C]=I[12+C]/I[15];J=I[15];for(C=0;3>C;++C)J+=this.lightPosition[C]*I[4*C+3];for(C=0;3>C;++C){K=I[12+C];for(var N=0;3>N;++N)K+=I[4*N+C]*this.lightPosition[N];G.lightPosition[C]=K/J}0<this.triangleCount&&(C=this.triShader,C.bind(),C.uniforms=G,this.triangleVAO.bind(),v.drawArrays(v.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());
0<this.edgeCount&&0<this.lineWidth&&(C=this.lineShader,C.bind(),C.uniforms=G,this.edgeVAO.bind(),v.lineWidth(this.lineWidth*this.pixelRatio),v.drawArrays(v.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(C=this.pointShader,C.bind(),C.uniforms=G,this.pointVAO.bind(),v.drawArrays(v.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&(C=this.contourShader,C.bind(),C.uniforms=G,this.contourVAO.bind(),v.drawArrays(v.LINES,
0,this.contourCount),this.contourVAO.unbind())};b.drawPick=function(C){C=C||{};var v=this.gl,G=C.model||B,I=C.view||B;C=C.projection||B;for(var J=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],K=0;3>K;++K)J[0][K]=Math.max(J[0][K],this.clipBounds[0][K]),J[1][K]=Math.min(J[1][K],this.clipBounds[1][K]);this._model=[].slice.call(G);this._view=[].slice.call(I);this._projection=[].slice.call(C);this._resolution=[v.drawingBufferWidth,v.drawingBufferHeight];G={model:G,view:I,projection:C,clipBounds:J,pickId:this.pickId/
255};I=this.pickShader;I.bind();I.uniforms=G;0<this.triangleCount&&(this.triangleVAO.bind(),v.drawArrays(v.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),v.lineWidth(this.lineWidth*this.pixelRatio),v.drawArrays(v.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(I=this.pointPickShader,I.bind(),I.uniforms=G,this.pointVAO.bind(),v.drawArrays(v.POINTS,0,this.pointCount),this.pointVAO.unbind())};b.pick=function(C){if(!C||C.id!==this.pickId)return null;
for(var v=C.value[0]+256*C.value[1]+65536*C.value[2],G=this.cells[v],I=this.positions,J=Array(G.length),K=0;K<G.length;++K)J[K]=I[G[K]];K=C.coord[0];C=C.coord[1];if(!this.pickVertex){J=this.positions[G[0]];I=this.positions[G[1]];var N=this.positions[G[2]];return{_cellCenter:!0,position:[K,C],index:v,cell:G,cellId:v,intensity:this.intensity[v],dataCoordinate:[(J[0]+I[0]+N[0])/3,(J[1]+I[1]+N[1])/3,(J[2]+I[2]+N[2])/3]}}J=t(J,[K*this.pixelRatio,this._resolution[1]-C*this.pixelRatio],this._model,this._view,
this._projection,this._resolution);if(!J)return null;C=J[2];for(K=I=0;K<G.length;++K)I+=C[K]*this.intensity[G[K]];return{position:J[1],index:G[J[0]],cell:G,cellId:v,intensity:I,dataCoordinate:this.positions[G[J[0]]]}};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.lineShader.dispose();this.pointShader.dispose();this.pickShader.dispose();this.pointPickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();
this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose();this.contourShader.dispose()};y.exports=function(C,v){1===arguments.length&&(v=C,C=v.gl);if(!(C.getExtension("OES_standard_derivatives")||
C.getExtension("MOZ_OES_standard_derivatives")||C.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var G=p(C,u.vertex,u.fragment);G.attributes.position.location=0;G.attributes.color.location=2;G.attributes.uv.location=3;G.attributes.normal.location=4;var I=p(C,w.vertex,w.fragment);I.attributes.position.location=0;I.attributes.color.location=2;I.attributes.uv.location=3;var J=p(C,x.vertex,x.fragment);J.attributes.position.location=0;J.attributes.color.location=
2;J.attributes.uv.location=3;J.attributes.pointSize.location=4;var K=p(C,E.vertex,E.fragment);K.attributes.position.location=0;K.attributes.id.location=1;var N=p(C,F.vertex,F.fragment);N.attributes.position.location=0;N.attributes.id.location=1;N.attributes.pointSize.location=4;var H=p(C,z.vertex,z.fragment);H.attributes.position.location=0;var L=d(C,c(new Uint8Array([255,255,255,255]),[1,1,4]));L.generateMipmap();L.minFilter=C.LINEAR_MIPMAP_LINEAR;L.magFilter=C.LINEAR;var P=h(C),Q=h(C),S=h(C),O=
h(C),U=h(C),X=a(C,[{buffer:P,type:C.FLOAT,size:3},{buffer:U,type:C.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Q,type:C.FLOAT,size:4},{buffer:S,type:C.FLOAT,size:2},{buffer:O,type:C.FLOAT,size:3}]),da=h(C),ea=h(C),ca=h(C),ia=h(C),ha=a(C,[{buffer:da,type:C.FLOAT,size:3},{buffer:ia,type:C.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ea,type:C.FLOAT,size:4},{buffer:ca,type:C.FLOAT,size:2}]),fa=h(C),na=h(C),sa=h(C),ua=h(C),ta=h(C),oa=a(C,[{buffer:fa,type:C.FLOAT,size:3},{buffer:ta,type:C.UNSIGNED_BYTE,
size:4,normalized:!0},{buffer:na,type:C.FLOAT,size:4},{buffer:sa,type:C.FLOAT,size:2},{buffer:ua,type:C.FLOAT,size:1}]),va=h(C),ma=a(C,[{buffer:va,type:C.FLOAT,size:3}]);G=new n(C,L,G,I,J,K,N,H,P,U,Q,S,O,X,da,ia,ea,ca,ha,fa,ta,na,sa,ua,oa,va,ma);G.update(v);return G}},{"./lib/closest-point":290,"./lib/shaders":291,colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,"gl-shader":312,"gl-texture2d":327,"gl-vao":332,ndarray:469,normals:472,"simplicial-complex-contour":528,"typedarray-pool":567}],
293:[function(b,y,D){function n(a,d,e){this.plot=a;this.vbo=d;this.shader=e}y.exports=function(a){var d=a.gl,e=m(d,[0,0,0,1,1,0,1,1]);d=p(d,h.boxVert,h.lineFrag);return new n(a,e,d)};var m=b("gl-buffer"),p=b("gl-shader"),h=b("./shaders");b=n.prototype;b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawBox=function(){var a=[0,0],d=[0,0];return function(e,l,k,c,f){var g=this.shader,q=this.plot.gl;a[0]=e;
a[1]=l;d[0]=k;d[1]=c;g.uniforms.lo=a;g.uniforms.hi=d;g.uniforms.color=f;q.drawArrays(q.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"gl-buffer":258,"gl-shader":312}],294:[function(b,y,D){function n(e,l,k,c){this.plot=e;this.vbo=l;this.shader=k;this.tickShader=c;this.ticks=[[],[]]}function m(e,l){return e-l}y.exports=function(e){var l=e.gl,k=p(l),c=h(l,d.gridVert,d.gridFrag);l=h(l,d.tickVert,d.gridFrag);return new n(e,k,c,l)};var p=b("gl-buffer"),
h=b("gl-shader"),a=b("binary-search-bounds"),d=b("./shaders");b=n.prototype;b.draw=function(){var e=[0,0],l=[0,0],k=[0,0];return function(){var c=this.plot,f=this.vbo,g=this.shader,q=this.ticks,t=c.gl,u=c._tickBounds,w=c.dataBox,x=c.viewBox,E=c.gridLineWidth,F=c.gridLineColor,z=c.gridLineEnable;c=c.pixelRatio;for(var B=0;2>B;++B){var C=u[B],v=.5*(w[B+2]+w[B]),G=w[B+2]-w[B];l[B]=2*(u[B+2]-C)/G;e[B]=2*(C-v)/G}g.bind();f.bind();g.attributes.dataCoord.pointer();g.uniforms.dataShift=e;g.uniforms.dataScale=
l;for(B=f=0;2>B;++B)k[0]=k[1]=0,k[B]=1,g.uniforms.dataAxis=k,g.uniforms.lineWidth=E[B]/(x[B+2]-x[B])*c,g.uniforms.color=F[B],u=6*q[B].length,z[B]&&u&&t.drawArrays(t.TRIANGLES,f,u),f+=u}}();b.drawTickMarks=function(){var e=[0,0],l=[0,0],k=[1,0],c=[0,1],f=[0,0],g=[0,0];return function(){var q=this.plot,t=this.vbo,u=this.tickShader,w=this.ticks,x=q.gl,E=q._tickBounds,F=q.dataBox,z=q.viewBox,B=q.pixelRatio,C=q.screenBox,v=C[2]-C[0];C=C[3]-C[1];for(var G=z[2]-z[0],I=z[3]-z[1],J=0;2>J;++J){var K=E[J],N=
.5*(F[J+2]+F[J]),H=F[J+2]-F[J];l[J]=2*(E[J+2]-K)/H;e[J]=2*(K-N)/H}l[0]*=G/v;e[0]*=G/v;l[1]*=I/C;e[1]*=I/C;u.bind();t.bind();u.attributes.dataCoord.pointer();t=u.uniforms;t.dataShift=e;t.dataScale=l;u=q.tickMarkLength;G=q.tickMarkWidth;q=q.tickMarkColor;J=6*w[0].length;K=Math.min(a.ge(w[0],(F[0]-E[0])/(E[2]-E[0]),m),w[0].length);N=Math.min(a.gt(w[0],(F[2]-E[0])/(E[2]-E[0]),m),w[0].length);I=6*K;K=6*Math.max(0,N-K);N=Math.min(a.ge(w[1],(F[1]-E[1])/(E[3]-E[1]),m),w[1].length);w=Math.min(a.gt(w[1],(F[3]-
E[1])/(E[3]-E[1]),m),w[1].length);E=J+6*N;w=6*Math.max(0,w-N);f[0]=2*(z[0]-u[1])/v-1;f[1]=(z[3]+z[1])/C-1;g[0]=u[1]*B/v;g[1]=G[1]*B/C;w&&(t.color=q[1],t.tickScale=g,t.dataAxis=c,t.screenOffset=f,x.drawArrays(x.TRIANGLES,E,w));f[0]=(z[2]+z[0])/v-1;f[1]=2*(z[1]-u[0])/C-1;g[0]=G[0]*B/v;g[1]=u[0]*B/C;K&&(t.color=q[0],t.tickScale=g,t.dataAxis=k,t.screenOffset=f,x.drawArrays(x.TRIANGLES,I,K));f[0]=2*(z[2]+u[3])/v-1;f[1]=(z[3]+z[1])/C-1;g[0]=u[3]*B/v;g[1]=G[3]*B/C;w&&(t.color=q[3],t.tickScale=g,t.dataAxis=
c,t.screenOffset=f,x.drawArrays(x.TRIANGLES,E,w));f[0]=(z[2]+z[0])/v-1;f[1]=2*(z[3]+u[2])/C-1;g[0]=G[2]*B/v;g[1]=u[2]*B/C;K&&(t.color=q[2],t.tickScale=g,t.dataAxis=k,t.screenOffset=f,x.drawArrays(x.TRIANGLES,I,K))}}();b.update=function(){var e=[1,1,-1,-1,1,-1],l=[1,-1,1,1,-1,-1];return function(k){var c=k.ticks;k=k.bounds;for(var f=new Float32Array(18*(c[0].length+c[1].length)),g=0,q=[[],[]],t=0;2>t;++t)for(var u=q[t],w=c[t],x=k[t],E=k[t+2],F=0;F<w.length;++F){var z=(w[F].x-x)/(E-x);u.push(z);for(var B=
0;6>B;++B)f[g++]=z,f[g++]=e[B],f[g++]=l[B]}this.ticks=q;this.vbo.update(f)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()}},{"./shaders":296,"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312}],295:[function(b,y,D){function n(a,d,e){this.plot=a;this.vbo=d;this.shader=e}y.exports=function(a){var d=a.gl,e=m(d,[-1,-1,-1,1,1,-1,1,1]);d=p(d,h.lineVert,h.lineFrag);return new n(a,e,d)};var m=b("gl-buffer"),p=b("gl-shader"),h=b("./shaders");b=n.prototype;
b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawLine=function(){var a=[0,0],d=[0,0];return function(e,l,k,c,f,g){var q=this.plot,t=this.shader,u=q.gl;a[0]=e;a[1]=l;d[0]=k;d[1]=c;t.uniforms.start=a;t.uniforms.end=d;t.uniforms.width=f*q.pixelRatio;t.uniforms.color=g;u.drawArrays(u.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"gl-buffer":258,
"gl-shader":312}],296:[function(b,y,D){b=b("glslify");D=b(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d vec4(color.xyz * color.w, color.w);\n}\n"]);y.exports={lineVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta \x3d normalize(perp(start - end));\n  vec2 offset \x3d mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position \x3d vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),
lineFrag:D,textVert:b(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  \x3d textCoordinate.z;\n  vec2 glyphOffset  \x3d textCoordinate.xy;\n  mat2 glyphMatrix \x3d mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate \x3d dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position \x3d vec4(screenCoordinate, 0, 1);\n}\n"]),
textFrag:D,gridVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos +\x3d 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position \x3d vec4(pos, 0, 1);\n}\n"]),gridFrag:D,boxVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position \x3d vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),
tickVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position \x3d vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:413}],297:[function(b,y,D){function n(e,l,k){this.plot=e;this.vbo=l;this.shader=k;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=
[0,0]}y.exports=function(e){var l=e.gl,k=m(l);l=p(l,d.textVert,d.textFrag);return new n(e,k,l)};var m=b("gl-buffer"),p=b("gl-shader"),h=b("text-cache"),a=b("binary-search-bounds"),d=b("./shaders");b=n.prototype;b.drawTicks=function(){var e=[0,0],l=[0,0],k=[0,0];return function(c){var f=this.plot,g=this.shader,q=this.tickX[c],t=this.tickOffset[c],u=f.gl,w=f.viewBox,x=f.dataBox,E=f.screenBox,F=f.pixelRatio,z=f.tickEnable,B=f.tickPad,C=f.tickColor,v=f.tickAngle,G=f.labelEnable,I=f.labelPad,J=f.labelColor;
f=f.labelAngle;var K=this.labelOffset[c],N=this.labelCount[c],H=a.lt(q,x[c]);q=a.le(q,x[c+2]);e[0]=e[1]=0;e[c]=1;l[c]=(w[2+c]+w[c])/(E[2+c]-E[c])-1;E=2/E[2+(c^1)]-E[c^1];l[c^1]=E*w[c^1]-1;z[c]&&(l[c^1]-=E*F*B[c],H<q&&t[q]>t[H]&&(g.uniforms.dataAxis=e,g.uniforms.screenOffset=l,g.uniforms.color=C[c],g.uniforms.angle=v[c],u.drawArrays(u.TRIANGLES,t[H],t[q]-t[H])));G[c]&&N&&(l[c^1]-=E*F*I[c],g.uniforms.dataAxis=k,g.uniforms.screenOffset=l,g.uniforms.color=J[c],g.uniforms.angle=f[c],u.drawArrays(u.TRIANGLES,
K,N));l[c^1]=E*w[2+(c^1)]-1;z[c+2]&&(l[c^1]+=E*F*B[c+2],H<q&&t[q]>t[H]&&(g.uniforms.dataAxis=e,g.uniforms.screenOffset=l,g.uniforms.color=C[c+2],g.uniforms.angle=v[c+2],u.drawArrays(u.TRIANGLES,t[H],t[q]-t[H])));G[c+2]&&N&&(l[c^1]+=E*F*I[c+2],g.uniforms.dataAxis=k,g.uniforms.screenOffset=l,g.uniforms.color=J[c+2],g.uniforms.angle=f[c+2],u.drawArrays(u.TRIANGLES,K,N))}}();b.drawTitle=function(){var e=[0,0],l=[0,0];return function(){var k=this.plot,c=this.shader,f=k.gl,g=k.screenBox,q=k.titleCenter,
t=k.titleAngle,u=k.titleColor;k=k.pixelRatio;if(this.titleCount){for(var w=0;2>w;++w)l[w]=2*(q[w]*k-g[w])/(g[2+w]-g[w])-1;c.bind();c.uniforms.dataAxis=e;c.uniforms.screenOffset=l;c.uniforms.angle=t;c.uniforms.color=u;f.drawArrays(f.TRIANGLES,this.titleOffset,this.titleCount)}}}();b.bind=function(){var e=[0,0],l=[0,0],k=[0,0];return function(){var c=this.plot,f=this.shader,g=c._tickBounds,q=c.dataBox,t=c.screenBox,u=c.viewBox;f.bind();for(var w=0;2>w;++w){var x=g[w],E=.5*(q[w+2]+q[w]),F=q[w+2]-q[w],
z=u[w+2]-u[w],B=t[w+2]-t[w];l[w]=2*(g[w+2]-x)/F*z/B;e[w]=2*(x-E)/F*z/B}k[1]=2*c.pixelRatio/(t[3]-t[1]);k[0]=k[1]*(t[3]-t[1])/(t[2]-t[0]);f.uniforms.dataScale=l;f.uniforms.dataShift=e;f.uniforms.textScale=k;this.vbo.bind();f.attributes.textCoordinate.pointer()}}();b.update=function(e){var l=[],k=e.ticks,c=e.bounds,f,g;for(g=0;2>g;++g){var q=[Math.floor(l.length/3)],t=[-Infinity],u=k[g];for(f=0;f<u.length;++f){var w=u[f];var x=w.x;var E=w.text;var F=w.font||"sans-serif";w=w.fontSize||12;for(var z=1/
(c[g+2]-c[g]),B=c[g],C=E.split("\n"),v=0;v<C.length;v++){var G=h(F,C[v]).data;for(E=0;E<G.length;E+=2)l.push(G[E]*w,-G[E+1]*w-v*w*1.2,(x-B)*z)}q.push(Math.floor(l.length/3));t.push(x)}this.tickOffset[g]=q;this.tickX[g]=t}for(g=0;2>g;++g){this.labelOffset[g]=Math.floor(l.length/3);G=h(e.labelFont[g],e.labels[g],{textAlign:"center"}).data;w=e.labelSize[g];for(f=0;f<G.length;f+=2)l.push(G[f]*w,-G[f+1]*w,0);this.labelCount[g]=Math.floor(l.length/3)-this.labelOffset[g]}this.titleOffset=Math.floor(l.length/
3);G=h(e.titleFont,e.title).data;w=e.titleSize;for(f=0;f<G.length;f+=2)l.push(G[f]*w,-G[f+1]*w,0);this.titleCount=Math.floor(l.length/3)-this.titleOffset;this.vbo.update(l)};b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312,"text-cache":547}],298:[function(b,y,D){function n(k,c){this.gl=k;this.pickBuffer=c;this.screenBox=[0,0,k.drawingBufferWidth,k.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,
-10,10,10];this.gridLineEnable=[!0,!0];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[!0,!0,!0,!0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelEnable=[!0,!0,!0,!0];this.labelColor=
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=!0;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[!0,!0,!0,!0];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.box=this.line=this.text=this.grid=null;this.objects=[];this.overlays=[];this._tickBounds=
[Infinity,Infinity,-Infinity,-Infinity];this.pickDirty=this.dirty=this.static=!1;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}function m(k){k=k.slice();for(var c=0;c<k.length;++c)k[c]=k[c].slice();return k}function p(k,c){return k.x-c.x}y.exports=function(k){var c=k.gl,f=h(c,[c.drawingBufferWidth,c.drawingBufferHeight]);c=new n(c,f);c.grid=a(c);c.text=d(c);c.line=e(c);c.box=l(c);c.update(k);return c};var h=b("gl-select-static"),
a=b("./lib/grid"),d=b("./lib/text"),e=b("./lib/line"),l=b("./lib/box");b=n.prototype;b.setDirty=function(){this.dirty=this.pickDirty=!0};b.setOverlayDirty=function(){this.dirty=!0};b.nextDepthValue=function(){return this._depthCounter++/65536};b.draw=function(){return function(){var k=this.gl,c=this.screenBox,f=this.viewBox,g=this.dataBox,q=this.pixelRatio,t=this.grid,u=this.line,w=this.text,x=this.objects;this._depthCounter=0;this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=
!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay));if(this.dirty){this.dirty=!1;k.bindFramebuffer(k.FRAMEBUFFER,null);k.enable(k.SCISSOR_TEST);k.disable(k.DEPTH_TEST);k.depthFunc(k.LESS);k.depthMask(!1);k.enable(k.BLEND);k.blendEquation(k.FUNC_ADD,k.FUNC_ADD);k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA);if(this.borderColor){k.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var E=this.borderColor;k.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]);k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT)}k.scissor(f[0],
f[1],f[2]-f[0],f[3]-f[1]);k.viewport(f[0],f[1],f[2]-f[0],f[3]-f[1]);E=this.backgroundColor;k.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]);k.clear(k.COLOR_BUFFER_BIT);t.draw();E=this.zeroLineEnable;var F=this.zeroLineColor,z=this.zeroLineWidth;if(E[0]||E[1])for(u.bind(),t=0;2>t;++t)if(E[t]&&0>=g[t]&&0<=g[t+2]){var B=c[t]-g[t]*(c[t+2]-c[t])/(g[t+2]-g[t]);0===t?u.drawLine(B,c[1],B,c[3],z[t],F[t]):u.drawLine(c[0],B,c[2],B,z[t],F[t])}for(t=0;t<x.length;++t)x[t].draw();k.viewport(c[0],c[1],c[2]-c[0],
c[3]-c[1]);k.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);this.grid.drawTickMarks();u.bind();c=this.borderLineEnable;g=this.borderLineWidth;x=this.borderLineColor;c[1]&&u.drawLine(f[0],f[1]-.5*g[1]*q,f[0],f[3]+.5*g[3]*q,g[1],x[1]);c[0]&&u.drawLine(f[0]-.5*g[0]*q,f[1],f[2]+.5*g[2]*q,f[1],g[0],x[0]);c[3]&&u.drawLine(f[2],f[1]-.5*g[1]*q,f[2],f[3]+.5*g[3]*q,g[3],x[3]);c[2]&&u.drawLine(f[0]-.5*g[0]*q,f[3],f[2]+.5*g[2]*q,f[3],g[2],x[2]);w.bind();for(t=0;2>t;++t)w.drawTicks(t);this.titleEnable&&w.drawTitle();
f=this.overlays;for(t=0;t<f.length;++t)f[t].draw();k.disable(k.SCISSOR_TEST);k.disable(k.BLEND);k.depthMask(!0)}}}();b.drawPick=function(){return function(){if(!this.static){var k=this.pickBuffer;this._pickTimeout=null;k.begin();for(var c=1,f=this.objects,g=0;g<f.length;++g)c=f[g].drawPick(c);k.end()}}}();b.pick=function(){return function(k,c){if(!this.static){var f=this.pixelRatio,g=this.pickPixelRatio,q=this.viewBox;k=Math.round((k-q[0]/f)*g)|0;c=Math.round((c-q[1]/f)*g)|0;f=this.pickBuffer.query(k,
c,this.pickRadius);if(!f)return null;f=f.id+(f.value[0]<<8)+(f.value[1]<<16)+(f.value[2]<<24);g=this.objects;for(q=0;q<g.length;++q){var t=g[q].pick(k,c,f);if(t)return t}return null}}}();b.setScreenBox=function(k){var c=this.screenBox,f=this.pixelRatio;c[0]=Math.round(k[0]*f)|0;c[1]=Math.round(k[1]*f)|0;c[2]=Math.round(k[2]*f)|0;c[3]=Math.round(k[3]*f)|0;this.setDirty()};b.setDataBox=function(k){var c=this.dataBox;if(c[0]!==k[0]||c[1]!==k[1]||c[2]!==k[2]||c[3]!==k[3])c[0]=k[0],c[1]=k[1],c[2]=k[2],
c[3]=k[3],this.setDirty()};b.setViewBox=function(k){var c=this.pixelRatio,f=this.viewBox;f[0]=Math.round(k[0]*c)|0;f[1]=Math.round(k[1]*c)|0;f[2]=Math.round(k[2]*c)|0;f[3]=Math.round(k[3]*c)|0;c=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((k[2]-k[0])*c)|0,Math.round((k[3]-k[1])*c)|0];this.setDirty()};b.update=function(k){k=k||{};var c=this.gl,f=this.pixelRatio=k.pixelRatio||1;this.pickPixelRatio=Math.max(f,1);this.setScreenBox(k.screenBox||[0,0,c.drawingBufferWidth/f,c.drawingBufferHeight/
f]);this.setViewBox(k.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/f,.125*(this.screenBox[3]-this.screenBox[1])/f,.875*(this.screenBox[2]-this.screenBox[0])/f,.875*(this.screenBox[3]-this.screenBox[1])/f]);c=this.viewBox;var g=(c[2]-c[0])/(c[3]-c[1]);this.setDataBox(k.dataBox||[-10,-10/g,10,10/g]);this.borderColor=!1!==k.borderColor?(k.borderColor||[0,0,0,0]).slice():!1;this.backgroundColor=(k.backgroundColor||[0,0,0,0]).slice();this.gridLineEnable=(k.gridLineEnable||[!0,!0]).slice();this.gridLineWidth=
(k.gridLineWidth||[1,1]).slice();this.gridLineColor=m(k.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(k.zeroLineEnable||[!0,!0]).slice();this.zeroLineWidth=(k.zeroLineWidth||[4,4]).slice();this.zeroLineColor=m(k.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(k.tickMarkLength||[0,0,0,0]).slice();this.tickMarkWidth=(k.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=m(k.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(k.titleCenter||[.5*
(c[0]+c[2])/f,(c[3]+120)/f]).slice();this.titleEnable=!("titleEnable"in k)||!!k.titleEnable;this.titleAngle=k.titleAngle||0;this.titleColor=(k.titleColor||[0,0,0,1]).slice();this.labelPad=(k.labelPad||[15,15,15,15]).slice();this.labelAngle=(k.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=(k.labelEnable||[!0,!0,!0,!0]).slice();this.labelColor=m(k.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.tickPad=(k.tickPad||[15,15,15,15]).slice();this.tickAngle=(k.tickAngle||[0,
0,0,0]).slice();this.tickEnable=(k.tickEnable||[!0,!0,!0,!0]).slice();this.tickColor=m(k.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(k.borderLineEnable||[!0,!0,!0,!0]).slice();this.borderLineWidth=(k.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=m(k.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);f=k.ticks||[[],[]];c=this._tickBounds;c[0]=c[1]=Infinity;c[2]=c[3]=-Infinity;for(g=0;2>g;++g){var q=f[g].slice(0);0!==q.length&&(q.sort(p),c[g]=Math.min(c[g],
q[0].x),c[g+2]=Math.max(c[g+2],q[q.length-1].x))}this.grid.update({bounds:c,ticks:f});this.text.update({bounds:c,ticks:f,labels:k.labels||["x","y"],labelSize:k.labelSize||[12,12],labelFont:k.labelFont||["sans-serif","sans-serif"],title:k.title||"",titleSize:k.titleSize||18,titleFont:k.titleFont||"sans-serif"});this.static=!!k.static;this.setDirty()};b.dispose=function(){this.box.dispose();this.grid.dispose();this.text.dispose();this.line.dispose();for(var k=this.objects.length-1;0<=k;--k)this.objects[k].dispose();
this.objects.length=0;for(k=this.overlays.length-1;0<=k;--k)this.overlays[k].dispose();this.overlays.length=0;this.gl=null};b.addObject=function(k){0>this.objects.indexOf(k)&&(this.objects.push(k),this.setDirty())};b.removeObject=function(k){for(var c=this.objects,f=0;f<c.length;++f)if(c[f]===k){c.splice(f,1);this.setDirty();break}};b.addOverlay=function(k){0>this.overlays.indexOf(k)&&(this.overlays.push(k),this.setOverlayDirty())};b.removeOverlay=function(k){for(var c=this.overlays,f=0;f<c.length;++f)if(c[f]===
k){c.splice(f,1);this.setOverlayDirty();break}}},{"./lib/box":293,"./lib/grid":294,"./lib/line":295,"./lib/text":297,"gl-select-static":311}],299:[function(b,y,D){y.exports=function(e,l){e=e||document.body;l=l||{};var k=[.01,Infinity];"distanceLimits"in l&&(k[0]=l.distanceLimits[0],k[1]=l.distanceLimits[1]);"zoomMin"in l&&(k[0]=l.zoomMin);"zoomMax"in l&&(k[1]=l.zoomMax);var c=m({center:l.center||[0,0,0],up:l.up||[0,1,0],eye:l.eye||[0,0,10],mode:l.mode||"orbit",distanceLimits:k}),f=[0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0],g=0,q=e.clientWidth,t=e.clientHeight,u={keyBindingMode:"rotate",enableWheel:!0,view:c,element:e,delay:l.delay||16,rotateSpeed:l.rotateSpeed||1,zoomSpeed:l.zoomSpeed||1,translateSpeed:l.translateSpeed||1,flipX:!!l.flipX,flipY:!!l.flipY,modes:c.modes,_ortho:l._ortho||l.projection&&"orthographic"===l.projection.type||!1,tick:function(){var w=n(),x=this.delay,E=w-2*x;c.idle(w-x);c.recalcMatrix(E);c.flush(w-(100+2*x));w=!0;x=c.computedMatrix;for(E=0;16>E;++E)w=w&&f[E]===x[E],f[E]=x[E];
x=e.clientWidth===q&&e.clientHeight===t;q=e.clientWidth;t=e.clientHeight;if(w)return!x;g=Math.exp(c.computedRadius[0]);return!0},lookAt:function(w,x,E){c.lookAt(c.lastT(),w,x,E)},rotate:function(w,x,E){c.rotate(c.lastT(),w,x,E)},pan:function(w,x,E){c.pan(c.lastT(),w,x,E)},translate:function(w,x,E){c.translate(c.lastT(),w,x,E)}};Object.defineProperties(u,{matrix:{get:function(){return c.computedMatrix},set:function(w){c.setMatrix(c.lastT(),w);return c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},
set:function(w){var x=c.computedUp.slice(),E=c.computedEye.slice(),F=c.computedCenter.slice();c.setMode(w);"turntable"===w&&(w=n(),c._active.lookAt(w,E,F,x),c._active.lookAt(w+500,E,F,[0,0,1]),c._active.flush(w));return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(w){c.lookAt(c.lastT(),null,w);return c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(w){c.lookAt(c.lastT(),w);return c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},
set:function(w){c.lookAt(c.lastT(),null,null,w);return c.computedUp},enumerable:!0},distance:{get:function(){return g},set:function(w){c.setDistance(c.lastT(),w);return w},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(k)},set:function(w){c.setDistanceLimits(w);return w},enumerable:!0}});e.addEventListener("contextmenu",function(w){w.preventDefault();return!1});u._lastX=-1;u._lastY=-1;u._lastMods={shift:!1,control:!1,alt:!1,meta:!1};u.enableMouseListeners=function(){function w(x,
E,F,z){var B=u.keyBindingMode;if(!1!==B){var C="rotate"===B,v="pan"===B;B="zoom"===B;var G=!!z.control,I=!!z.alt,J=!!z.shift,K=!!(x&1),N=!!(x&2);x=!!(x&4);var H=1/e.clientHeight,L=H*(E-u._lastX),P=H*(F-u._lastY),Q=u.flipX?1:-1,S=u.flipY?1:-1,O=Math.PI*u.rotateSpeed;H=n();-1!==u._lastX&&-1!==u._lastY&&((C&&K&&!G&&!I&&!J||K&&!G&&!I&&J)&&c.rotate(H,Q*O*L,-S*O*P,0),(v&&K&&!G&&!I&&!J||N||K&&G&&!I&&!J)&&c.pan(H,-u.translateSpeed*L*g,u.translateSpeed*P*g,0),B&&K&&!G&&!I&&!J||x||K&&!G&&I&&!J)&&(C=-u.zoomSpeed*
P/window.innerHeight*(H-c.lastT())*100,c.pan(H,0,0,g*(Math.exp(C)-1)));u._lastX=E;u._lastY=F;u._lastMods=z;return!0}}u.mouseListener=p(e,w);e.addEventListener("touchstart",function(x){var E=a(x.changedTouches[0],e);w(0,E[0],E[1],u._lastMods);w(1,E[0],E[1],u._lastMods);x.preventDefault()},d?{passive:!1}:!1);e.addEventListener("touchmove",function(x){var E=a(x.changedTouches[0],e);w(1,E[0],E[1],u._lastMods);x.preventDefault()},d?{passive:!1}:!1);e.addEventListener("touchend",function(x){w(0,u._lastX,
u._lastY,u._lastMods);x.preventDefault()},d?{passive:!1}:!1);u.wheelListener=h(e,function(x,E){if(!1!==u.keyBindingMode&&u.enableWheel){var F=u.flipX?1:-1,z=u.flipY?1:-1,B=n();Math.abs(x)>Math.abs(E)?c.rotate(B,0,0,-x*F*Math.PI*u.rotateSpeed/window.innerWidth):u._ortho||(x=-u.zoomSpeed*z*E/window.innerHeight*(B-c.lastT())/20,c.pan(B,0,0,g*(Math.exp(x)-1)))}},!0)};u.enableMouseListeners();return u};var n=b("right-now"),m=b("3d-view"),p=b("mouse-change"),h=b("mouse-wheel"),a=b("mouse-event-offset"),
d=b("has-passive-events")},{"3d-view":54,"has-passive-events":415,"mouse-change":457,"mouse-event-offset":458,"mouse-wheel":460,"right-now":514}],300:[function(b,y,D){D=b("glslify");var n=b("gl-shader"),m=D(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv \x3d position;\n  gl_Position \x3d vec4(position, 0, 1);\n}"]),p=D(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum \x3d texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor \x3d min(vec4(1,1,1,1), accum);\n}"]);
y.exports=function(h){return n(h,m,p,null,[{name:"position",type:"vec2"}])}},{"gl-shader":312,glslify:413}],301:[function(b,y,D){function n(){this.mouse=[-1,-1];this.screen=null;this.distance=Infinity;this.data=this.object=this.dataPosition=this.dataCoordinate=this.index=null}function m(w,x){var E=null;try{(E=w.getContext("webgl",x))||(E=w.getContext("experimental-webgl",x))}catch(F){return null}return E}function p(w){return"boolean"===typeof w?w:!0}var h=b("./camera.js"),a=b("gl-axes3d"),d=b("gl-axes3d/properties"),
e=b("gl-spikes3d"),l=b("gl-select-static"),k=b("gl-fbo"),c=b("a-big-triangle"),f=b("mouse-change"),g=b("gl-mat4/perspective"),q=b("gl-mat4/ortho"),t=b("./lib/shader"),u=b("is-mobile")({tablet:!0,featureDetect:!0});y.exports={createScene:function(w){function x(){if(!ha._stopped&&ha.autoResize){var ua=C.parentNode;if(ua&&ua!==document.body){var ta=ua.clientWidth;ua=ua.clientHeight}else ta=window.innerWidth,ua=window.innerHeight;var oa=Math.ceil(ta*ha.pixelRatio)|0,va=Math.ceil(ua*ha.pixelRatio)|0;if(oa!==
C.width||va!==C.height)C.width=oa,C.height=va,oa=C.style,oa.position=oa.position||"absolute",oa.left="0px",oa.top="0px",oa.width=ta+"px",oa.height=ua+"px",da=!0}}function E(){for(var ua=S.length,ta=X.length,oa=0;oa<ta;++oa)U[oa]=0;oa=0;a:for(;oa<ua;++oa){var va=S[oa],ma=va.pickSlots;if(ma){for(var pa=0;pa<ta;++pa)if(255>U[pa]+ma){O[oa]=pa;va.setPickBase(U[pa]+1);U[pa]+=ma;continue a}pa=l(v,ia);O[oa]=ta;X.push(pa);U.push(ma);va.setPickBase(1);ta+=1}else O[oa]=-1}for(;0<ta&&0===U[ta-1];)U.pop(),X.pop().dispose()}
function F(){if(ha.contextLost)return!0;if(v.isContextLost()&&(ha.contextLost=!0,ha.mouseListener.enabled=!1,ha.selection.object=null,ha.oncontextloss))ha.oncontextloss()}function z(){if(!F()){x();var ua=ha.camera.tick();ca.view=ha.camera.matrix;da=da||ua;ea=ea||ua;P.pixelRatio=ha.pixelRatio;Q.pixelRatio=ha.pixelRatio;ua=S.length;var ta=na[0],oa=na[1];ta[0]=ta[1]=ta[2]=Infinity;oa[0]=oa[1]=oa[2]=-Infinity;for(var va=0;va<ua;++va){var ma=S[va];ma.pixelRatio=ha.pixelRatio;ma.axes=ha.axes;da=da||!!ma.dirty;
ea=ea||!!ma.dirty;if(ma=ma.bounds){var pa=ma[0],za=ma[1];for(ma=0;3>ma;++ma)ta[ma]=Math.min(ta[ma],pa[ma]),oa[ma]=Math.max(oa[ma],za[ma])}}pa=ha.bounds;if(ha.autoBounds)for(ma=0;3>ma;++ma)oa[ma]<ta[ma]?(ta[ma]=-1,oa[ma]=1):(ta[ma]===oa[ma]&&(--ta[ma],oa[ma]+=1),va=.05*(oa[ma]-ta[ma]),ta[ma]-=va,oa[ma]+=va),pa[0][ma]=ta[ma],pa[1][ma]=oa[ma];ta=!1;for(ma=0;3>ma;++ma)ta=ta||sa[0][ma]!==pa[0][ma]||sa[1][ma]!==pa[1][ma],sa[0][ma]=pa[0][ma],sa[1][ma]=pa[1][ma];ea=ea||ta;if(da=da||ta){if(ta){ta=[0,0,0];
for(va=0;3>va;++va)oa=va,ma=(pa[1][va]-pa[0][va])/10,za=Math.round(Math.log(Math.abs(ma))/Math.log(10)),0>za?(za=Math.round(Math.pow(10,-za)),ma=Math.ceil(ma*za)/za):0<za?(za=Math.round(Math.pow(10,za)),ma=Math.ceil(ma/za)*za):ma=Math.ceil(ma),ta[oa]=ma;P.autoTicks?P.update({bounds:pa,tickSpacing:ta}):P.update({bounds:pa})}ta=v.drawingBufferWidth;oa=v.drawingBufferHeight;ia[0]=ta;ia[1]=oa;fa[0]=Math.max(ta/ha.pixelRatio,1)|0;fa[1]=Math.max(oa/ha.pixelRatio,1)|0;va=ha;ma=va.bounds;var qa=va.cameraParams,
Ca=qa.projection;za=qa.model;var Ka=va.zNear,Oa=va.zFar,kb=va.fovy,mb=va.gl.drawingBufferWidth/va.gl.drawingBufferHeight;N?(q(Ca,-mb,mb,-1,1,Ka,Oa),qa._ortho=!0):(g(Ca,kb,mb,Ka,Oa),qa._ortho=!1);for(qa=0;16>qa;++qa)za[qa]=0;za[15]=1;for(qa=Ca=0;3>qa;++qa)Ca=Math.max(Ca,ma[1][qa]-ma[0][qa]);for(qa=0;3>qa;++qa)za[5*qa]=va.autoScale?va.aspect[qa]/(ma[1][qa]-ma[0][qa]):1/Ca,va.autoCenter&&(za[12+qa]=.5*-za[5*qa]*(ma[0][qa]+ma[1][qa]));for(va=0;va<ua;++va)ma=S[va],ma.axesBounds=pa,ha.clipToBounds&&(ma.clipBounds=
pa);I.object&&(Q.position=ha.snapToData?I.dataCoordinate:I.dataPosition,Q.bounds=pa);if(ea&&(ea=!1,!F()))for(v.colorMask(!0,!0,!0,!0),v.depthMask(!0),v.disable(v.BLEND),v.enable(v.DEPTH_TEST),v.depthFunc(v.LEQUAL),pa=S.length,va=X.length,ma=0;ma<va;++ma){za=X[ma];za.shape=fa;za.begin();for(qa=0;qa<pa;++qa)O[qa]===ma&&(Ca=S[qa],Ca.drawPick&&(Ca.pixelRatio=1,Ca.drawPick(ca)));za.end()}ha.axesPixels=d(ha.axes,ca,ta,oa);if(ha.onrender)ha.onrender();v.bindFramebuffer(v.FRAMEBUFFER,null);v.viewport(0,0,
ta,oa);ha.clearRGBA();v.depthMask(!0);v.colorMask(!0,!0,!0,!0);v.enable(v.DEPTH_TEST);v.depthFunc(v.LEQUAL);v.disable(v.BLEND);v.disable(v.CULL_FACE);pa=!1;P.enable&&(pa=pa||P.isTransparent(),P.draw(ca));Q.axes=P;I.object&&Q.draw(ca);v.disable(v.CULL_FACE);for(va=0;va<ua;++va)ma=S[va],ma.axes=P,ma.pixelRatio=ha.pixelRatio,ma.isOpaque&&ma.isOpaque()&&ma.draw(ca),ma.isTransparent&&ma.isTransparent()&&(pa=!0);if(pa){J.shape=ia;J.bind();v.clear(v.DEPTH_BUFFER_BIT);v.colorMask(!1,!1,!1,!1);v.depthMask(!0);
v.depthFunc(v.LESS);P.enable&&P.isTransparent()&&P.drawTransparent(ca);for(va=0;va<ua;++va)ma=S[va],ma.isOpaque&&ma.isOpaque()&&ma.draw(ca);v.enable(v.BLEND);v.blendEquation(v.FUNC_ADD);v.blendFunc(v.ONE,v.ONE_MINUS_SRC_ALPHA);v.colorMask(!0,!0,!0,!0);v.depthMask(!1);v.clearColor(0,0,0,0);v.clear(v.COLOR_BUFFER_BIT);P.isTransparent()&&P.drawTransparent(ca);for(va=0;va<ua;++va)ma=S[va],ma.isTransparent&&ma.isTransparent()&&ma.drawTransparent(ca);v.bindFramebuffer(v.FRAMEBUFFER,null);v.blendFunc(v.ONE,
v.ONE_MINUS_SRC_ALPHA);v.disable(v.DEPTH_TEST);K.bind();J.color[0].bind(0);K.uniforms.accumBuffer=0;c(v);v.disable(v.BLEND)}da=!1;for(va=0;va<ua;++va)S[va].dirty=!1}}}function B(){ha._stopped||ha.contextLost||(z(),requestAnimationFrame(B))}w=w||{};w.camera=w.camera||{};var C=w.canvas;C||(C=document.createElement("canvas"),w.container?w.container.appendChild(C):document.body.appendChild(C));var v=w.gl;v||(w.glOptions&&(u=!!w.glOptions.preserveDrawingBuffer),v=m(C,w.glOptions||{premultipliedAlpha:!0,
antialias:!0,preserveDrawingBuffer:u}));if(!v)throw Error("webgl not supported");var G=w.bounds||[[-10,-10,-10],[10,10,10]],I=new n,J=k(v,v.drawingBufferWidth,v.drawingBufferHeight,{preferFloat:!u}),K=t(v),N=w.cameraObject&&!0===w.cameraObject._ortho||w.camera.projection&&"orthographic"===w.camera.projection.type||!1,H={eye:w.camera.eye||[2,0,0],center:w.camera.center||[0,0,0],up:w.camera.up||[0,1,0],zoomMin:w.camera.zoomMax||.1,zoomMax:w.camera.zoomMin||100,mode:w.camera.mode||"turntable",_ortho:N},
L=w.axes||{},P=a(v,L);P.enable=!L.disable;var Q=e(v,w.spikes||{}),S=[],O=[],U=[],X=[],da=!0,ea=!0,ca={view:null,projection:Array(16),model:Array(16),_ortho:!1};ea=!0;var ia=[v.drawingBufferWidth,v.drawingBufferHeight];H=w.cameraObject||h(C,H);var ha={gl:v,contextLost:!1,pixelRatio:w.pixelRatio||1,canvas:C,selection:I,camera:H,axes:P,axesPixels:null,spikes:Q,bounds:G,objects:S,shape:ia,aspect:w.aspectRatio||[1,1,1],pickRadius:w.pickRadius||10,zNear:w.zNear||.01,zFar:w.zFar||1E3,fovy:w.fovy||Math.PI/
4,clearColor:w.clearColor||[0,0,0,0],autoResize:p(w.autoResize),autoBounds:p(w.autoBounds),autoScale:!!w.autoScale,autoCenter:p(w.autoCenter),clipToBounds:p(w.clipToBounds),snapToData:!!w.snapToData,onselect:w.onselect||null,onrender:w.onrender||null,onclick:w.onclick||null,cameraParams:ca,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ua){this.aspect[0]=ua.x;this.aspect[1]=ua.y;this.aspect[2]=
ua.z;ea=!0},setBounds:function(ua,ta){this.bounds[0][ua]=ta.min;this.bounds[1][ua]=ta.max},setClearColor:function(ua){this.clearColor=ua},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},fa=[v.drawingBufferWidth/ha.pixelRatio|0,v.drawingBufferHeight/ha.pixelRatio|0];ha.autoResize&&x();window.addEventListener("resize",x);ha.update=function(ua){ha._stopped||(ea=da=!0)};
ha.add=function(ua){ha._stopped||(ua.axes=P,S.push(ua),O.push(-1),ea=da=!0,E())};ha.remove=function(ua){ha._stopped||(ua=S.indexOf(ua),0>ua||(S.splice(ua,1),O.pop(),ea=da=!0,E()))};ha.dispose=function(){if(!ha._stopped&&(ha._stopped=!0,window.removeEventListener("resize",x),C.removeEventListener("webglcontextlost",F),ha.mouseListener.enabled=!1,!ha.contextLost)){P.dispose();Q.dispose();for(var ua=0;ua<S.length;++ua)S[ua].dispose();J.dispose();for(ua=0;ua<X.length;++ua)X[ua].dispose();K.dispose();
Q=P=v=null;S=[]}};ha._mouseRotating=!1;ha._prevButtons=0;ha.enableMouseListeners=function(){ha.mouseListener=f(C,function(ua,ta,oa){if(!ha._stopped){var va=X.length,ma=S.length,pa=I.object;I.distance=Infinity;I.mouse[0]=ta;I.mouse[1]=oa;I.object=null;I.screen=null;I.dataCoordinate=I.dataPosition=null;var za=!1;if(ua&&ha._prevButtons)ha._mouseRotating=!0;else{ha._mouseRotating&&(ea=!0);ha._mouseRotating=!1;for(var qa=0;qa<va;++qa){var Ca=X[qa].query(ta,fa[1]-oa-1,ha.pickRadius);if(Ca&&!(Ca.distance>
I.distance))for(var Ka=0;Ka<ma;++Ka){var Oa=S[Ka];if(O[Ka]===qa){var kb=Oa.pick(Ca);kb&&(I.buttons=ua,I.screen=Ca.coord,I.distance=Ca.distance,I.object=Oa,I.index=kb.distance,I.dataPosition=kb.position,I.dataCoordinate=kb.dataCoordinate,I.data=kb,za=!0)}}}}pa&&pa!==I.object&&(pa.highlight&&pa.highlight(null),da=!0);I.object&&(I.object.highlight&&I.object.highlight(I.data),da=!0);if((za=za||I.object!==pa)&&ha.onselect)ha.onselect(I);if(ua&1&&!(ha._prevButtons&1)&&ha.onclick)ha.onclick(I);ha._prevButtons=
ua}})};C.addEventListener("webglcontextlost",F);var na=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],sa=[na[0].slice(),na[1].slice()];ha.enableMouseListeners();B();ha.redraw=function(){ha._stopped||(da=!0,z())};return ha},createCamera:h}},{"./camera.js":299,"./lib/shader":300,"a-big-triangle":64,"gl-axes3d":250,"gl-axes3d/properties":257,"gl-fbo":266,"gl-mat4/ortho":281,"gl-mat4/perspective":282,"gl-select-static":311,"gl-spikes3d":321,"is-mobile":441,"mouse-change":457}],302:[function(b,
y,D){b=b("glslify");D.pointVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a \x3d 12.9898;\n  highp float b \x3d 78.233;\n  highp float c \x3d 43758.5453;\n  highp float d \x3d dot(co.xy, vec2(a, b));\n  highp float e \x3d mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize \x3d pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *\x3d 0.886;\n  }\n}"]);
D.pointFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    if(centerFraction \x3d\x3d 1.0) {\n      gl_FragColor \x3d color;\n    } else {\n      gl_FragColor \x3d mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius \x3e 1.0) {\n      discard;\n    }\n    baseColor \x3d mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor \x3d vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]);
D.pickVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize \x3d pointSize;\n\n  vec4 id \x3d pickId + pickOffset;\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  fragId \x3d id;\n}\n"]);
D.pickFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius \x3e 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d fragId / 255.0;\n}\n"])},{glslify:413}],303:[function(b,y,D){function n(d,e,l,k,c){this.plot=d;this.offsetBuffer=e;this.pickBuffer=l;this.shader=k;this.pickShader=c;this.sizeMin=.5;this.sizeMinCap=2;this.sizeMax=20;this.areaRatio=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=
[0,0,0,1];this.blend=!1;this.pickOffset=0;this.points=null}var m=b("gl-shader"),p=b("gl-buffer"),h=b("typedarray-pool"),a=b("./lib/shader");y.exports=function(d,e){var l=d.gl,k=p(l),c=p(l),f=m(l,a.pointVertex,a.pointFragment);l=m(l,a.pickVertex,a.pickFragment);k=new n(d,k,c,f,l);k.update(e);d.addObject(k);return k};b=n.prototype;b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();this.pickBuffer.dispose();this.plot.removeObject(this)};b.update=function(d){function e(u,
w){return u in d?d[u]:w}var l;d=d||{};this.sizeMin=e("sizeMin",.5);this.sizeMax=e("sizeMax",20);this.color=e("color",[1,0,0,1]).slice();this.areaRatio=e("areaRatio",1);this.borderColor=e("borderColor",[0,0,0,1]).slice();this.blend=e("blend",!1);var k=d.positions.length>>>1,c=d.positions instanceof Float32Array,f=d.idToIndex instanceof Int32Array&&d.idToIndex.length>=k,g=d.positions,q=c?g:h.mallocFloat32(g.length),t=f?d.idToIndex:h.mallocInt32(k);c||q.set(g);if(!f)for(q.set(g),l=0;l<k;l++)t[l]=l;this.points=
g;this.offsetBuffer.update(q);this.pickBuffer.update(t);c||h.free(q);f||h.free(t);this.pointCount=k;this.pickOffset=0};b.unifiedDraw=function(){var d=[1,0,0,0,1,0,0,0,1],e=[0,0,0,0];return function(l){var k=void 0!==l,c=k?this.pickShader:this.shader,f=this.plot.gl,g=this.plot.dataBox;if(0===this.pointCount)return l;var q=g[2]-g[0],t=g[3]-g[1],u=this.points,w=0,x=u.length>>>1,E;for(E=0;E<x;E++){var F=u[2*E],z=u[2*E+1];F>=g[0]&&F<=g[2]&&z>=g[1]&&z<=g[3]&&w++}u=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,
this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(w,.33333)));d[0]=2/q;d[4]=2/t;d[6]=-2*g[0]/q-1;d[7]=-2*g[1]/t-1;this.offsetBuffer.bind();c.bind();c.attributes.position.pointer();c.uniforms.matrix=d;c.uniforms.color=this.color;c.uniforms.borderColor=this.borderColor;c.uniforms.pointCloud=5>u;c.uniforms.pointSize=u;c.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio)));k&&(e[0]=l&255,e[1]=l>>8&255,e[2]=l>>16&255,e[3]=l>>24&255,this.pickBuffer.bind(),c.attributes.pickId.pointer(f.UNSIGNED_BYTE),
c.uniforms.pickOffset=e,this.pickOffset=l);k=f.getParameter(f.BLEND);c=f.getParameter(f.DITHER);k&&!this.blend&&f.disable(f.BLEND);c&&f.disable(f.DITHER);f.drawArrays(f.POINTS,0,this.pointCount);k&&!this.blend&&f.enable(f.BLEND);c&&f.enable(f.DITHER);return l+this.pointCount}}();b.draw=b.unifiedDraw;b.drawPick=b.unifiedDraw;b.pick=function(d,e,l){d=this.pickOffset;e=this.pointCount;if(l<d||l>=d+e)return null;l-=d;d=this.points;return{object:this,pointId:l,dataCoord:[d[2*l],d[2*l+1]]}}},{"./lib/shader":302,
"gl-buffer":258,"gl-shader":312,"typedarray-pool":567}],304:[function(b,y,D){y.exports=function(n,m,p,h){var a=m[0],d=m[1],e=m[2];m=m[3];var l=p[0],k=p[1],c=p[2];p=p[3];var f=a*l+d*k+e*c+m*p;0>f&&(f=-f,l=-l,k=-k,c=-c,p=-p);if(1E-6<1-f){var g=Math.acos(f);var q=Math.sin(g);f=Math.sin((1-h)*g)/q;h=Math.sin(h*g)/q}else f=1-h;n[0]=f*a+h*l;n[1]=f*d+h*k;n[2]=f*e+h*c;n[3]=f*m+h*p;return n}},{}],305:[function(b,y,D){y.exports=function(n){return n||0===n?n.toString():""}},{}],306:[function(b,y,D){var n=b("vectorize-text");
y.exports=function(p,h,a){var d=m[h];d||(d=m[h]={});if(p in d)return d[p];var e={textAlign:"center",textBaseline:"middle",lineHeight:1,font:h,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0};h=n(p,e);e.triangles=!1;e=n(p,e);var l,k;if(a&&1!==a){for(l=0;l<h.positions.length;++l)for(k=0;k<h.positions[l].length;++k)h.positions[l][k]/=a;for(l=0;l<e.positions.length;++l)for(k=0;k<e.positions[l].length;++k)e.positions[l][k]/=a}a=[[Infinity,Infinity],
[-Infinity,-Infinity]];var c=e.positions.length;for(l=0;l<c;++l){var f=e.positions[l];for(k=0;2>k;++k)a[0][k]=Math.min(a[0][k],f[k]),a[1][k]=Math.max(a[1][k],f[k])}return d[p]=[h,e,a]};var m={}},{"vectorize-text":572}],307:[function(b,y,D){function n(q,t){q=m(q,t);t=q.attributes;t.position.location=0;t.color.location=1;t.glyph.location=2;t.id.location=3;return q}var m=b("gl-shader"),p=b("glslify");b=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d 1.0;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      scale \x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1);\n    vec4 viewPosition \x3d view * worldPosition;\n    viewPosition \x3d viewPosition / viewPosition.w;\n    vec4 clipPosition \x3d projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
y=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) \x3c 0.001) {\n      scale *\x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1.0);\n    vec4 viewPosition \x3d view * worldPosition;\n    vec4 clipPosition \x3d projection * viewPosition;\n    clipPosition /\x3d clipPosition.w;\n\n    gl_Position \x3d clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
var h=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float lscale \x3d pixelRatio * scale;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      lscale *\x3d highlightScale;\n    }\n\n    vec4 clipCenter   \x3d projection * view * model * vec4(position, 1);\n    vec3 dataPosition \x3d position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition \x3d projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d dataPosition;\n  }\n}\n"]),
a=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity \x3d\x3d 0.\n  ) discard;\n  gl_FragColor \x3d interpColor * opacity;\n}\n"]);
p=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor \x3d vec4(pickGroup, pickId.bgr);\n}"]);
var d=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],e={vertex:b,fragment:a,attributes:d},l={vertex:y,fragment:a,attributes:d},k={vertex:h,fragment:a,attributes:d},c={vertex:b,fragment:p,attributes:d},f={vertex:y,fragment:p,attributes:d},g={vertex:h,fragment:p,attributes:d};D.createPerspective=function(q){return n(q,e)};D.createOrtho=function(q){return n(q,l)};D.createProject=function(q){return n(q,k)};D.createPickPerspective=function(q){return n(q,
c)};D.createPickOrtho=function(q){return n(q,f)};D.createPickProject=function(q){return n(q,g)}},{"gl-shader":312,glslify:413}],308:[function(b,y,D){function n(H,L){var P=H[0],Q=H[1],S=H[2],O=H[3];H[0]=L[0]*P+L[4]*Q+L[8]*S+L[12]*O;H[1]=L[1]*P+L[5]*Q+L[9]*S+L[13]*O;H[2]=L[2]*P+L[6]*Q+L[10]*S+L[14]*O;H[3]=L[3]*P+L[7]*Q+L[11]*S+L[15]*O;return H}function m(H,L,P,Q){n(Q,Q,P);n(Q,Q,L);return n(Q,Q,H)}function p(H,L){this.index=H;this.dataCoordinate=this.position=L}function h(H){return!0===H||1<H?1:H}function a(H,
L,P,Q,S,O,U,X,da,ea,ca,ia){this.gl=H;this.pixelRatio=1;this.shader=L;this.orthoShader=P;this.projectShader=Q;this.pointBuffer=S;this.colorBuffer=O;this.glyphBuffer=U;this.idBuffer=X;this.vao=da;this.lineVertexCount=this.vertexCount=0;this.opacity=1;this.hasAlpha=!1;this.lineWidth=0;this.projectScale=[2/3,2/3,2/3];this.projectOpacity=[1,1,1];this.projectHasAlpha=!1;this.pickId=0;this.pickPerspectiveShader=ea;this.pickOrthoShader=ca;this.pickProjectShader=ia;this.points=[];this._selectResult=new p(0,
[0,0,0]);this.useOrtho=!0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.axesProject=[!0,!0,!0];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.highlightId=[1,1,1,1];this.highlightScale=2;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.dirty=!0}function d(H){H[0]=H[1]=H[2]=0;return H}function e(H,L){H[0]=L[0];H[1]=L[1];H[2]=L[2];H[3]=1;return H}function l(H,L,P,Q){H[0]=L[0];H[1]=L[1];H[2]=L[2];
H[P]=Q;return H}function k(H,L,P,Q,S,O,U){var X=P.gl;if(O===P.projectHasAlpha||U){for(var da=P.axesProject,ea=P.gl,ca=L.uniforms,ia=Q.model||F,ha=Q.view||F,fa=Q.projection||F,na=P.axesBounds,sa=P.clipBounds,ua=K,ta=0;2>ta;++ta)for(var oa=0;3>oa;++oa)ua[ta][oa]=Math.max(Math.min(sa[ta][oa],1E8),-1E8);sa=P.axes&&P.axes.lastCubeProps?P.axes.lastCubeProps.axis:[1,1,1];z[0]=2/ea.drawingBufferWidth;z[1]=2/ea.drawingBufferHeight;L.bind();ca.view=ha;ca.projection=fa;ca.screenSize=z;ca.highlightId=P.highlightId;
ca.highlightScale=P.highlightScale;ca.clipBounds=ua;ca.pickGroup=P.pickId/255;ca.pixelRatio=S;for(L=0;3>L;++L)if(da[L]){ca.scale=P.projectScale[L];ca.opacity=P.projectOpacity[L];ta=I;for(var va=0;16>va;++va)ta[va]=0;for(va=0;4>va;++va)ta[5*va]=1;ta[5*L]=0;ta[12+L]=0>sa[L]?na[0][L]:na[1][L];u(ta,ia,ta);ca.model=ta;ta=(L+1)%3;oa=(L+2)%3;var ma=d(B),pa=d(C);ma[ta]=1;pa[oa]=1;va=m(fa,ha,ia,e(v,ma));var za=m(fa,ha,ia,e(G,pa));if(Math.abs(va[1])>Math.abs(za[1])){var qa=va;va=za;za=qa;qa=ma;ma=pa;pa=qa;
qa=ta;ta=oa;oa=qa}0>va[0]&&(ma[ta]=-1);0<za[1]&&(pa[oa]=-1);for(va=qa=za=0;4>va;++va)za+=Math.pow(ia[4*ta+va],2),qa+=Math.pow(ia[4*oa+va],2);ma[ta]/=Math.sqrt(za);pa[oa]/=Math.sqrt(qa);ca.axes[0]=ma;ca.axes[1]=pa;ca.fragClipBounds[0]=l(J,ua[0],L,-1E8);ca.fragClipBounds[1]=l(J,ua[1],L,1E8);P.vao.bind();P.vao.draw(ea.TRIANGLES,P.vertexCount);0<P.lineWidth&&(ea.lineWidth(P.lineWidth*S),P.vao.draw(ea.LINES,P.lineVertexCount,P.vertexCount));P.vao.unbind()}}if(O===P.hasAlpha||U)H.bind(),H=H.uniforms,H.model=
Q.model||F,H.view=Q.view||F,H.projection=Q.projection||F,z[0]=2/X.drawingBufferWidth,z[1]=2/X.drawingBufferHeight,H.screenSize=z,H.highlightId=P.highlightId,H.highlightScale=P.highlightScale,H.fragClipBounds=N,H.clipBounds=P.axes.bounds,H.opacity=P.opacity,H.pickGroup=P.pickId/255,H.pixelRatio=S,P.vao.bind(),P.vao.draw(X.TRIANGLES,P.vertexCount),0<P.lineWidth&&(X.lineWidth(P.lineWidth*S),P.vao.draw(X.LINES,P.lineVertexCount,P.vertexCount)),P.vao.unbind()}function c(H,L,P,Q){L=Array.isArray(H)?L<H.length?
H[L]:void 0:H;L=E(L);H=!0;f(L)&&(L="",H=!1);P=x(L,P,Q);return{mesh:P[0],lines:P[1],bounds:P[2],visible:H}}var f=b("is-string-blank"),g=b("gl-buffer"),q=b("gl-vao"),t=b("typedarray-pool"),u=b("gl-mat4/multiply"),w=b("./lib/shaders"),x=b("./lib/glyphs"),E=b("./lib/get-simple-string"),F=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];y.exports=function(H){var L=H.gl,P=w.createPerspective(L),Q=w.createOrtho(L),S=w.createProject(L),O=w.createPickPerspective(L),U=w.createPickOrtho(L),X=w.createPickProject(L),da=g(L),
ea=g(L),ca=g(L),ia=g(L),ha=q(L,[{buffer:da,size:3,type:L.FLOAT},{buffer:ea,size:4,type:L.FLOAT},{buffer:ca,size:2,type:L.FLOAT},{buffer:ia,size:4,type:L.UNSIGNED_BYTE,normalized:!0}]);L=new a(L,P,Q,S,da,ea,ca,ia,ha,O,U,X);L.update(H);return L};b=a.prototype;b.pickSlots=1;b.setPickBase=function(H){this.pickId=H};b.isTransparent=function(){if(this.hasAlpha)return!0;for(var H=0;3>H;++H)if(this.axesProject[H]&&this.projectHasAlpha)return!0;return!1};b.isOpaque=function(){if(!this.hasAlpha)return!0;for(var H=
0;3>H;++H)if(this.axesProject[H]&&!this.projectHasAlpha)return!0;return!1};var z=[0,0],B=[0,0,0],C=[0,0,0],v=[0,0,0,1],G=[0,0,0,1],I=F.slice(),J=[0,0,0],K=[[0,0,0],[0,0,0]],N=[[-1E8,-1E8,-1E8],[1E8,1E8,1E8]];b.draw=function(H){k(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,H,this.pixelRatio,!1,!1)};b.drawTransparent=function(H){k(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,H,this.pixelRatio,!0,!1)};b.drawPick=function(H){k(this.useOrtho?this.pickOrthoShader:
this.pickPerspectiveShader,this.pickProjectShader,this,H,1,!0,!0)};b.pick=function(H){if(!H||H.id!==this.pickId)return null;var L=H.value[2]+(H.value[1]<<8)+(H.value[0]<<16);if(L>=this.pointCount||0>L)return null;H=this.points[L];var P=this._selectResult;P.index=L;for(L=0;3>L;++L)P.position[L]=P.dataCoordinate[L]=H[L];return P};b.highlight=function(H){H?(H=H.index,this.highlightId=[(H&255)/255,(H>>8&255)/255,(H>>16&255)/255,0]):this.highlightId=[1,1,1,1]};b.update=function(H){H=H||{};"perspective"in
H&&(this.useOrtho=!H.perspective);"orthographic"in H&&(this.useOrtho=!!H.orthographic);"lineWidth"in H&&(this.lineWidth=H.lineWidth);if("project"in H)if(Array.isArray(H.project))this.axesProject=H.project;else{var L=!!H.project;this.axesProject=[L,L,L]}"projectScale"in H&&(Array.isArray(H.projectScale)?this.projectScale=H.projectScale.slice():(L=+H.projectScale,this.projectScale=[L,L,L]));this.projectHasAlpha=!1;if("projectOpacity"in H){Array.isArray(H.projectOpacity)?this.projectOpacity=H.projectOpacity.slice():
(L=+H.projectOpacity,this.projectOpacity=[L,L,L]);for(var P=0;3>P;++P)this.projectOpacity[P]=h(this.projectOpacity[P]),1>this.projectOpacity[P]&&(this.projectHasAlpha=!0)}this.hasAlpha=!1;"opacity"in H&&(this.opacity=h(H.opacity),1>this.opacity&&(this.hasAlpha=!0));this.dirty=!0;L=H.position;var Q=H.font||"normal",S=H.alignment||[0,0];if(2===S.length){var O=S[0];var U=S[1]}else for(O=[],U=[],P=0;P<S.length;++P)O[P]=S[P][0],U[P]=S[P][1];S=[Infinity,Infinity,Infinity];var X=[-Infinity,-Infinity,-Infinity],
da=H.glyph,ea=H.color,ca=H.size,ia=H.angle;H=H.lineColor;var ha=-1,fa=0,na=0,sa=0;if(L.length)a:for(sa=L.length,P=0;P<sa;++P){for(var ua=L[P],ta=0;3>ta;++ta)if(isNaN(ua[ta])||!isFinite(ua[ta]))continue a;var oa=c(da,P,Q,this.pixelRatio),va=oa.mesh,ma=oa.lines;fa+=3*va.cells.length;na+=2*ma.edges.length}P=fa+na;var pa=t.mallocFloat(3*P),za=t.mallocFloat(4*P),qa=t.mallocFloat(2*P),Ca=t.mallocUint32(P);if(0<P){var Ka=0,Oa=fa,kb=[0,0,0,1],mb=[0,0,0,1],tb=Array.isArray(ea)&&Array.isArray(ea[0]),nb=Array.isArray(H)&&
Array.isArray(H[0]);P=0;a:for(;P<sa;++P){ha+=1;ua=L[P];for(ta=0;3>ta;++ta){if(isNaN(ua[ta])||!isFinite(ua[ta]))continue a;X[ta]=Math.max(X[ta],ua[ta]);S[ta]=Math.min(S[ta],ua[ta])}oa=c(da,P,Q,this.pixelRatio);va=oa.mesh;ma=oa.lines;var Ta=oa.bounds;var fb=oa.visible;if(fb)if(Array.isArray(ea))if(oa=tb?P<ea.length?ea[P]:[0,0,0,0]:ea,3===oa.length){for(ta=0;3>ta;++ta)kb[ta]=oa[ta];kb[3]=1}else{if(4===oa.length){for(ta=0;4>ta;++ta)kb[ta]=oa[ta];!this.hasAlpha&&1>oa[3]&&(this.hasAlpha=!0)}}else kb[0]=
kb[1]=kb[2]=0,kb[3]=1;else kb=[1,1,1,0];if(fb)if(Array.isArray(H))if(oa=nb?P<H.length?H[P]:[0,0,0,0]:H,3===oa.length){for(ta=0;3>ta;++ta)mb[ta]=oa[ta];mb[ta]=1}else{if(4===oa.length){for(ta=0;4>ta;++ta)mb[ta]=oa[ta];!this.hasAlpha&&1>oa[3]&&(this.hasAlpha=!0)}}else mb[0]=mb[1]=mb[2]=0,mb[3]=1;else mb=[1,1,1,0];oa=.5;fb?Array.isArray(ca)?oa=P<ca.length?+ca[P]:12:ca?oa=+ca:this.useOrtho&&(oa=12):oa=0;ua=0;Array.isArray(ia)?ua=P<ia.length?+ia[P]:0:ia&&(ua=+ia);fb=Math.cos(ua);var ab=Math.sin(ua);ua=
L[P];for(ta=0;3>ta;++ta)X[ta]=Math.max(X[ta],ua[ta]),S[ta]=Math.min(S[ta],ua[ta]);ta=0;Array.isArray(O)?ta=P<O.length?O[P]:0:O&&(ta=O);var ra=0;Array.isArray(U)?ra=P<U.length?U[P]:0:U&&(ra=U);ta*=0<ta?1-Ta[0][0]:0>ta?1+Ta[1][0]:1;ra*=0<ra?1-Ta[0][1]:0>ra?1+Ta[1][1]:1;Ta=[ta,ra];ra=va.cells||[];va=va.positions||[];for(ta=0;ta<ra.length;++ta)for(var Ea=ra[ta],Ia=0;3>Ia;++Ia){for(var Va=0;3>Va;++Va)pa[3*Ka+Va]=ua[Va];for(Va=0;4>Va;++Va)za[4*Ka+Va]=kb[Va];Ca[Ka]=ha;Va=va[Ea[Ia]];qa[2*Ka]=oa*(fb*Va[0]-
ab*Va[1]+Ta[0]);qa[2*Ka+1]=oa*(ab*Va[0]+fb*Va[1]+Ta[1]);Ka+=1}ra=ma.edges;va=ma.positions;for(ta=0;ta<ra.length;++ta)for(Ea=ra[ta],Ia=0;2>Ia;++Ia){for(Va=0;3>Va;++Va)pa[3*Oa+Va]=ua[Va];for(Va=0;4>Va;++Va)za[4*Oa+Va]=mb[Va];Ca[Oa]=ha;Va=va[Ea[Ia]];qa[2*Oa]=oa*(fb*Va[0]-ab*Va[1]+Ta[0]);qa[2*Oa+1]=oa*(ab*Va[0]+fb*Va[1]+Ta[1]);Oa+=1}}}this.bounds=[S,X];this.points=L;this.pointCount=L.length;this.vertexCount=fa;this.lineVertexCount=na;this.pointBuffer.update(pa);this.colorBuffer.update(za);this.glyphBuffer.update(qa);
this.idBuffer.update(Ca);t.free(pa);t.free(za);t.free(qa);t.free(Ca)};b.dispose=function(){this.shader.dispose();this.orthoShader.dispose();this.pickPerspectiveShader.dispose();this.pickOrthoShader.dispose();this.vao.dispose();this.pointBuffer.dispose();this.colorBuffer.dispose();this.glyphBuffer.dispose();this.idBuffer.dispose()}},{"./lib/get-simple-string":305,"./lib/glyphs":306,"./lib/shaders":307,"gl-buffer":258,"gl-mat4/multiply":280,"gl-vao":332,"is-string-blank":444,"typedarray-pool":567}],
309:[function(b,y,D){b=b("glslify");D.boxVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position \x3d vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]);D.boxFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor \x3d color;\n}\n"])},{glslify:413}],310:[function(b,y,D){function n(a,d,e){this.plot=a;this.boxBuffer=d;this.boxShader=e;this.enabled=!0;this.selectBox=
[Infinity,Infinity,-Infinity,-Infinity];this.borderColor=[0,0,0,1];this.innerFill=!1;this.innerColor=[0,0,0,.25];this.outerFill=!0;this.outerColor=[0,0,0,.5];this.borderWidth=10}var m=b("gl-shader"),p=b("gl-buffer"),h=b("./lib/shaders");y.exports=function(a,d){var e=a.gl,l=p(e,[0,0,0,1,1,0,1,1]);e=m(e,h.boxVertex,h.boxFragment);l=new n(a,l,e);l.update(d);a.addOverlay(l);return l};b=n.prototype;b.draw=function(){if(this.enabled){var a=this.plot,d=this.selectBox,e=this.borderWidth,l=this.innerColor,
k=this.outerColor,c=this.borderColor,f=a.box,g=a.screenBox,q=a.dataBox,t=a.viewBox,u=a.pixelRatio;a=(d[0]-q[0])*(t[2]-t[0])/(q[2]-q[0])+t[0];var w=(d[1]-q[1])*(t[3]-t[1])/(q[3]-q[1])+t[1],x=(d[2]-q[0])*(t[2]-t[0])/(q[2]-q[0])+t[0];d=(d[3]-q[1])*(t[3]-t[1])/(q[3]-q[1])+t[1];a=Math.max(a,t[0]);w=Math.max(w,t[1]);x=Math.min(x,t[2]);d=Math.min(d,t[3]);x<a||d<w||(f.bind(),t=g[2]-g[0],g=g[3]-g[1],this.outerFill&&(f.drawBox(0,0,t,w,k),f.drawBox(0,w,a,d,k),f.drawBox(0,d,t,g,k),f.drawBox(x,w,t,d,k)),this.innerFill&&
f.drawBox(a,w,x,d,l),0<e&&(e*=u,f.drawBox(a-e,w-e,x+e,w+e,c),f.drawBox(a-e,d-e,x+e,d+e,c),f.drawBox(a-e,w-e,a+e,d+e,c),f.drawBox(x-e,w-e,x+e,d+e,c)))}};b.update=function(a){a=a||{};this.innerFill=!!a.innerFill;this.outerFill=!!a.outerFill;this.innerColor=(a.innerColor||[0,0,0,.5]).slice();this.outerColor=(a.outerColor||[0,0,0,.5]).slice();this.borderColor=(a.borderColor||[0,0,0,1]).slice();this.borderWidth=a.borderWidth||0;this.selectBox=(a.selectBox||this.selectBox).slice()};b.dispose=function(){this.boxBuffer.dispose();
this.boxShader.dispose();this.plot.removeOverlay(this)}},{"./lib/shaders":309,"gl-buffer":258,"gl-shader":312}],311:[function(b,y,D){function n(e,l,k,c,f){this.coord=[e,l];this.id=k;this.value=c;this.distance=f}function m(e,l,k){this.gl=e;this.fbo=l;this.buffer=k;this._readTimeout=null;var c=this;this._readCallback=function(){c.gl&&(l.bind(),e.readPixels(0,0,l.shape[0],l.shape[1],e.RGBA,e.UNSIGNED_BYTE,c.buffer),c._readTimeout=null)}}y.exports=function(e,l){var k=l[0],c=l[1];l=p(e,k,c,{});k=h.mallocUint8(k*
c*4);return new m(e,l,k)};var p=b("gl-fbo"),h=b("typedarray-pool"),a=b("ndarray"),d=b("bit-twiddle").nextPow2;b=m.prototype;Object.defineProperty(b,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(e){if(this.gl){this.fbo.shape=e;var l=this.fbo.shape[0],k=this.fbo.shape[1];if(k*l*4>this.buffer.length){h.free(this.buffer);for(var c=this.buffer=h.mallocUint8(d(k*l*4)),f=0;f<k*l*4;++f)c[f]=255}return e}}});b.begin=function(){var e=this.gl;e&&(this.fbo.bind(),e.clearColor(1,
1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT))};b.end=function(){var e=this.gl;e&&(e.bindFramebuffer(e.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))};b.query=function(e,l,k){if(!this.gl)return null;var c=this.fbo.shape.slice();e|=0;l|=0;"number"!==typeof k&&(k=1);var f=Math.min(Math.max(e-k,0),c[0])|0,g=Math.min(Math.max(e+k,0),c[0])|0;e=Math.min(Math.max(l-k,0),c[1])|0;l=Math.min(Math.max(l+k,0),c[1])|0;if(g<=f||l<=
e)return null;l=[g-f,l-e];c=a(this.buffer,[l[0],l[1],4],[4,4*c[0],1],4*(f+c[0]*e));l=c.hi(l[0],l[1],1);g=k;for(var q=1E8,t=-1,u=-1,w=l.shape[0],x=l.shape[1],E=0;E<w;E++)for(var F=0;F<x;F++){var z=l.get(E,F,0),B=l.get(E,F,1),C=l.get(E,F,2),v=l.get(E,F,3);if(255>z||255>B||255>C||255>v)z=g-E,B=k-F,z=z*z+B*B,z<q&&(q=z,t=E,u=F)}l=[t,u,q];g=l[0];k=l[1];if(0>g||Math.pow(this.radius,2)<l[2])return null;q=c.get(g,k,0);t=c.get(g,k,1);u=c.get(g,k,2);c=c.get(g,k,3);return new n(g+f|0,k+e|0,q,[t,u,c],Math.sqrt(l[2]))};
b.dispose=function(){this.gl&&(this.fbo.dispose(),h.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":97,"gl-fbo":266,ndarray:469,"typedarray-pool":567}],312:[function(b,y,D){function n(k){this.gl=k;this.gl.lastAttribCount=0;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function m(k,c){return k.name<c.name?-1:1}var p=b("./lib/create-uniforms"),h=b("./lib/create-attributes"),
a=b("./lib/reflect"),d=b("./lib/shader-cache"),e=b("./lib/runtime-reflect"),l=b("./lib/GLError");b=n.prototype;b.bind=function(){this.program||this._relink();var k,c=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),f=this.gl.lastAttribCount;if(c>f)for(k=f;k<c;k++)this.gl.enableVertexAttribArray(k);else if(f>c)for(k=c;k<f;k++)this.gl.disableVertexAttribArray(k);this.gl.lastAttribCount=c;this.gl.useProgram(this.program)};b.dispose=function(){for(var k=this.gl.lastAttribCount,c=0;c<
k;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=0;this._fref&&this._fref.dispose();this._vref&&this._vref.dispose();this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};b.update=function(k,c,f,g){function q(){u.program=d.program(w,u._vref,u._fref,x,E);for(var I=0;I<f.length;++I)G[I]=w.getUniformLocation(u.program,f[I].name)}if(!c||1===arguments.length){var t=k;k=t.vertex;c=t.fragment;f=t.uniforms;g=t.attributes}var u=this,
w=u.gl;t=u._vref;u._vref=d.shader(w,w.VERTEX_SHADER,k);t&&t.dispose();u.vertShader=u._vref.shader;t=this._fref;u._fref=d.shader(w,w.FRAGMENT_SHADER,c);t&&t.dispose();u.fragShader=u._fref.shader;if(!f||!g){t=w.createProgram();w.attachShader(t,u.fragShader);w.attachShader(t,u.vertShader);w.linkProgram(t);if(!w.getProgramParameter(t,w.LINK_STATUS))throw t=w.getProgramInfoLog(t),new l(t,"Error linking program:"+t);f=f||e.uniforms(w,t);g=g||e.attributes(w,t);w.deleteProgram(t)}g=g.slice();g.sort(m);t=
[];var x=[],E=[],F;for(F=0;F<g.length;++F){var z=g[F];if(0<=z.type.indexOf("mat")){for(var B=z.type.charAt(z.type.length-1)|0,C=Array(B),v=0;v<B;++v)C[v]=E.length,x.push(z.name+"["+v+"]"),"number"===typeof z.location?E.push(z.location+v):Array.isArray(z.location)&&z.location.length===B&&"number"===typeof z.location[v]?E.push(z.location[v]|0):E.push(-1);t.push({name:z.name,type:z.type,locations:C})}else t.push({name:z.name,type:z.type,locations:[E.length]}),x.push(z.name),"number"===typeof z.location?
E.push(z.location|0):E.push(-1)}for(F=z=0;F<E.length;++F)if(0>E[F]){for(;0<=E.indexOf(z);)z+=1;E[F]=z}var G=Array(f.length);q();u._relink=q;u.types={uniforms:a(f),attributes:a(g)};u.attributes=h(w,u,t,E);Object.defineProperty(u,"uniforms",p(w,u,f,G))};y.exports=function(k,c,f,g,q){k=new n(k);k.update(c,f,g,q);return k}},{"./lib/GLError":313,"./lib/create-attributes":314,"./lib/create-uniforms":315,"./lib/reflect":316,"./lib/runtime-reflect":317,"./lib/shader-cache":318}],313:[function(b,y,D){function n(m,
p,h){this.shortMessage=p||"";this.longMessage=h||"";this.rawError=m||"";this.message="gl-shader: "+(p||m||"")+(h?"\n"+h:"");this.stack=Error().stack}n.prototype=Error();n.prototype.name="GLError";n.prototype.constructor=n;y.exports=n},{}],314:[function(b,y,D){function n(a,d,e,l,k,c){this._gl=a;this._wrapper=d;this._index=e;this._locations=l;this._dimension=k;this._constFunc=c}function m(a,d,e,l,k,c,f){for(var g=["gl","v"],q=[],t=0;t<k;++t)g.push("x"+t),q.push("x"+t);g.push("if(x0.length\x3d\x3d\x3dvoid 0){return gl.vertexAttrib"+
k+"f(v,"+q.join()+")}else{return gl.vertexAttrib"+k+"fv(v,x0)}");var u=Function.apply(null,g),w=new n(a,d,e,l,k,u);Object.defineProperty(c,f,{set:function(x){a.disableVertexAttribArray(l[e]);u(a,l[e],x);return x},get:function(){return w},enumerable:!0})}function p(a,d,e,l,k,c,f){for(var g=Array(k),q=Array(k),t=0;t<k;++t)m(a,d,e[t],l,k,g,t),q[t]=g[t];Object.defineProperty(g,"location",{set:function(x){if(Array.isArray(x))for(var E=0;E<k;++E)q[E].location=x[E];else for(E=0;E<k;++E)q[E].location=x+E;
return x},get:function(){for(var x=Array(k),E=0;E<k;++E)x[E]=l[e[E]];return x},enumerable:!0});g.pointer=function(x,E,F,z){x=x||a.FLOAT;E=!!E;F=F||k*k;z=z||0;for(var B=0;B<k;++B){var C=l[e[B]];a.vertexAttribPointer(C,k,x,E,F,z+B*k);a.enableVertexAttribArray(C)}};var u=Array(k),w=a["vertexAttrib"+k+"fv"];Object.defineProperty(c,f,{set:function(x){for(var E=0;E<k;++E){var F=l[e[E]];a.disableVertexAttribArray(F);if(Array.isArray(x[0]))w.call(a,F,x[E]);else{for(var z=0;z<k;++z)u[z]=x[k*E+z];w.call(a,
F,u)}}return x},get:function(){return g},enumerable:!0})}y.exports=function(a,d,e,l){for(var k={},c=0,f=e.length;c<f;++c){var g=e[c],q=g.name,t=g.type;g=g.locations;switch(t){case "bool":case "int":case "float":m(a,d,g[0],l,1,k,q);break;default:if(0<=t.indexOf("vec")){var u=t.charCodeAt(t.length-1)-48;if(2>u||4<u)throw new h("","Invalid data type for attribute "+q+": "+t);m(a,d,g[0],l,u,k,q)}else if(0<=t.indexOf("mat")){u=t.charCodeAt(t.length-1)-48;if(2>u||4<u)throw new h("","Invalid data type for attribute "+
q+": "+t);p(a,d,g,l,u,k,q)}else throw new h("","Unknown data type for attribute "+q+": "+t);}}return k};var h=b("./GLError");b=n.prototype;b.pointer=function(a,d,e,l){var k=this._gl,c=this._locations[this._index];k.vertexAttribPointer(c,this._dimension,a||k.FLOAT,!!d,e||0,l||0);k.enableVertexAttribArray(c)};b.set=function(a,d,e,l){return this._constFunc(this._locations[this._index],a,d,e,l)};Object.defineProperty(b,"location",{get:function(){return this._locations[this._index]},set:function(a){a!==
this._locations[this._index]&&(this._locations[this._index]=a|0,this._wrapper.program=null);return a|0}})},{"./GLError":313}],315:[function(b,y,D){function n(a){return(new Function("y","return function(){return y}"))(a)}function m(a,d){for(var e=Array(a),l=0;l<a;++l)e[l]=d;return e}var p=b("./reflect"),h=b("./GLError");y.exports=function(a,d,e,l){function k(w,x,E){switch(E){case "bool":case "int":case "sampler2D":case "samplerCube":return"gl.uniform1i(locations["+x+"],obj"+w+")";case "float":return"gl.uniform1f(locations["+
x+"],obj"+w+")";default:var F=E.indexOf("vec");if(0<=F&&1>=F&&E.length===4+F){F=E.charCodeAt(E.length-1)-48;if(2>F||4<F)throw new h("","Invalid data type");switch(E.charAt(0)){case "b":case "i":return"gl.uniform"+F+"iv(locations["+x+"],obj"+w+")";case "v":return"gl.uniform"+F+"fv(locations["+x+"],obj"+w+")";default:throw new h("","Unrecognized data type for vector "+name+": "+E);}}else{if(0===E.indexOf("mat")&&4===E.length){F=E.charCodeAt(E.length-1)-48;if(2>F||4<F)throw new h("","Invalid uniform dimension type for matrix "+
name+": "+E);return"gl.uniformMatrix"+F+"fv(locations["+x+"],false,obj"+w+")"}throw new h("","Unknown uniform data type for "+name+": "+E);}}}function c(w,x){if("object"!==typeof x)return[[w,x]];var E=[],F;for(F in x){var z=x[F],B=w;B=parseInt(F)+""===F?B+("["+F+"]"):B+("."+F);"object"===typeof z?E.push.apply(E,c(B,z)):E.push([B,z])}return E}function f(w){var x=["return function updateProperty(obj){"];w=c("",w);for(var E=0;E<w.length;++E){var F=w[E],z=F[0];F=F[1];l[F]&&x.push(k(z,F,e[F].type))}x.push("return obj}");
return(new Function("gl","locations",x.join("\n")))(a,l)}function g(w){switch(w){case "bool":return!1;case "int":case "sampler2D":case "samplerCube":return 0;case "float":return 0;default:var x=w.indexOf("vec");if(0<=x&&1>=x&&w.length===4+x){x=w.charCodeAt(w.length-1)-48;if(2>x||4<x)throw new h("","Invalid data type");return"b"===w.charAt(0)?m(x,!1):m(x,0)}if(0===w.indexOf("mat")&&4===w.length){x=w.charCodeAt(w.length-1)-48;if(2>x||4<x)throw new h("","Invalid uniform dimension type for matrix "+name+
": "+w);return m(x*x,0)}throw new h("","Unknown uniform data type for "+name+": "+w);}}function q(w,x,E){if("object"===typeof E){var F=t(E);Object.defineProperty(w,x,{get:n(F),set:f(E),enumerable:!0,configurable:!1})}else if(l[E]){F=Object;var z=F.defineProperty;var B=(new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+E+"])}"))(a,d,l);z.call(F,w,x,{get:B,set:f(E),enumerable:!0,configurable:!1})}else w[x]=g(e[E].type)}function t(w){if(Array.isArray(w)){var x=
Array(w.length);for(var E=0;E<w.length;++E)q(x,E,w[E])}else for(E in x={},w)q(x,E,w[E]);return x}var u=p(e,!0);return{get:n(t(u)),set:f(u),enumerable:!0,configurable:!0}}},{"./GLError":313,"./reflect":316}],316:[function(b,y,D){y.exports=function(n,m){for(var p={},h=0;h<n.length;++h)for(var a=n[h].name.split("."),d=p,e=0;e<a.length;++e){var l=a[e].split("[");if(1<l.length){l[0]in d||(d[l[0]]=[]);d=d[l[0]];for(var k=1;k<l.length;++k){var c=parseInt(l[k]);k<l.length-1||e<a.length-1?(c in d||(d[c]=k<
l.length-1?[]:{}),d=d[c]):d[c]=m?h:n[h].type}}else e<a.length-1?(l[0]in d||(d[l[0]]={}),d=d[l[0]]):d[l[0]]=m?h:n[h].type}return p}},{}],317:[function(b,y,D){function n(h,a){if(!p){var d=Object.keys(m);p={};for(var e=0;e<d.length;++e){var l=d[e];p[h[l]]=m[l]}}return p[a]}D.uniforms=function(h,a){for(var d=h.getProgramParameter(a,h.ACTIVE_UNIFORMS),e=[],l=0;l<d;++l){var k=h.getActiveUniform(a,l);if(k){var c=n(h,k.type);if(1<k.size)for(var f=0;f<k.size;++f)e.push({name:k.name.replace("[0]","["+f+"]"),
type:c});else e.push({name:k.name,type:c})}}return e};D.attributes=function(h,a){for(var d=h.getProgramParameter(a,h.ACTIVE_ATTRIBUTES),e=[],l=0;l<d;++l){var k=h.getActiveAttrib(a,l);k&&e.push({name:k.name,type:n(h,k.type)})}return e};var m={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",
SAMPLER_CUBE:"samplerCube"},p=null},{}],318:[function(b,y,D){function n(l,k,c,f,g,q,t){this.id=l;this.src=k;this.type=c;this.shader=f;this.count=q;this.programs=[];this.cache=t}function m(l){this.gl=l;this.shaders=[{},{}];this.programs={}}function p(l){var k=d.get(l);k||(k=new m(l),d.set(l,k));return k}D.shader=function(l,k,c){return p(l).getShaderReference(k,c)};D.program=function(l,k,c,f,g){return p(l).getProgram(k,c,f,g)};var h=b("./GLError"),a=b("gl-format-compiler-error"),d=new ("undefined"===
typeof WeakMap?b("weakmap-shim"):WeakMap),e=0;n.prototype.dispose=function(){if(0===--this.count){for(var l=this.cache,k=l.gl,c=this.programs,f=0,g=c.length;f<g;++f){var q=l.programs[c[f]];q&&(delete l.programs[f],k.deleteProgram(q))}k.deleteShader(this.shader);delete l.shaders[this.type===k.FRAGMENT_SHADER|0][this.src]}};b=m.prototype;b.getShaderReference=function(l,k){var c=this.gl,f=this.shaders[l===c.FRAGMENT_SHADER|0],g=f[k];if(g&&c.isShader(g.shader))g.count+=1;else{g=c.createShader(l);c.shaderSource(g,
k);c.compileShader(g);if(!c.getShaderParameter(g,c.COMPILE_STATUS)){c=c.getShaderInfoLog(g);try{var q=a(c,k,l)}catch(t){throw console.warn("Failed to format compiler error: "+t),new h(c,"Error compiling shader:\n"+c);}throw new h(c,q.short,q.long);}g=f[k]=new n(e++,k,l,g,[],1,this)}return g};b.getProgram=function(l,k,c,f){var g=[l.id,k.id,c.join(":"),f.join(":")].join("@"),q=this.programs[g];if(!q||!this.gl.isProgram(q)){q=this.programs;var t=this.gl,u=l.shader,w=k.shader,x=t.createProgram();t.attachShader(x,
u);t.attachShader(x,w);for(u=0;u<c.length;++u)t.bindAttribLocation(x,f[u],c[u]);t.linkProgram(x);if(!t.getProgramParameter(x,t.LINK_STATUS))throw l=t.getProgramInfoLog(x),new h(l,"Error linking program: "+l);q[g]=q=x;l.programs.push(g);k.programs.push(g)}return q}},{"./GLError":313,"gl-format-compiler-error":267,"weakmap-shim":577}],319:[function(b,y,D){function n(m){this.plot=m;this.enable=[!0,!0,!1,!1];this.width=[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=[Infinity,
Infinity]}y.exports=function(m,p){var h=new n(m);h.update(p);m.addOverlay(h);return h};b=n.prototype;b.update=function(m){m=m||{};this.enable=(m.enable||[!0,!0,!1,!1]).slice();this.width=(m.width||[1,1,1,1]).slice();this.color=(m.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(p){return p.slice()});this.center=(m.center||[Infinity,Infinity]).slice();this.plot.setOverlayDirty()};b.draw=function(){var m=this.enable,p=this.width,h=this.color,a=this.center,d=this.plot,e=d.line,l=d.dataBox;
d=d.viewBox;e.bind();if(l[0]<=a[0]&&a[0]<=l[2]&&l[1]<=a[1]&&a[1]<=l[3]){var k=d[0]+(a[0]-l[0])/(l[2]-l[0])*(d[2]-d[0]);a=d[1]+(a[1]-l[1])/(l[3]-l[1])*(d[3]-d[1]);m[0]&&e.drawLine(k,a,d[0],a,p[0],h[0]);m[1]&&e.drawLine(k,a,k,d[1],p[1],h[1]);m[2]&&e.drawLine(k,a,d[2],a,p[2],h[2]);m[3]&&e.drawLine(k,a,k,d[3],p[3],h[3])}};b.dispose=function(){this.plot.removeOverlay(this)}},{}],320:[function(b,y,D){D=b("glslify");var n=b("gl-shader"),m=D(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition \x3d mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos \x3d projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset \x3d (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta \x3d weight * clipOffset * screenShape;\n  vec2 lineOffset \x3d normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   \x3d vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     \x3d color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),
p=D(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor \x3d fragColor;\n}"]);y.exports=function(h){return n(h,m,p,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":312,glslify:413}],321:[function(b,y,D){function n(k,c,f,g){this.gl=k;this.buffer=c;this.vao=f;this.shader=g;this.pixelRatio=1;this.bounds=[[-1E3,-1E3,-1E3],[1E3,1E3,1E3]];this.position=[0,0,0];this.lineWidth=[2,2,2];this.colors=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.enabled=[!0,!0,!0];this.drawSides=[!0,!0,!0];this.axes=null}var m=b("gl-buffer"),p=b("gl-vao"),h=b("./shaders/index");y.exports=function(k,c){function f(w,x,E,F,z,B){w=[w,x,E,0,0,0,1];w[F+3]=1;w[F]=z;g.push.apply(g,w);w[6]=-1;g.push.apply(g,w);w[F]=B;g.push.apply(g,w);g.push.apply(g,w);w[6]=1;g.push.apply(g,w);w[F]=z;g.push.apply(g,w)}var g=[];f(0,0,0,0,0,1);f(0,0,0,1,0,1);f(0,0,0,2,0,1);f(1,0,0,1,-1,1);f(1,0,0,2,-1,1);f(0,1,0,0,-1,1);f(0,1,0,2,-1,1);f(0,0,1,0,
-1,1);f(0,0,1,1,-1,1);var q=m(k,g),t=p(k,[{type:k.FLOAT,buffer:q,size:3,offset:0,stride:28},{type:k.FLOAT,buffer:q,size:3,offset:12,stride:28},{type:k.FLOAT,buffer:q,size:1,offset:24,stride:28}]),u=h(k);u.attributes.position.location=0;u.attributes.color.location=1;u.attributes.weight.location=2;k=new n(k,q,t,u);k.update(c);return k};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=n.prototype;var d=[0,0,0],e=[0,0,0],l=[0,0];b.isTransparent=function(){return!1};b.drawTransparent=function(k){};b.draw=function(k){var c=
this.gl,f=this.vao,g=this.shader;f.bind();g.bind();var q=k.model||a,t=k.view||a;k=k.projection||a;if(this.axes)var u=this.axes.lastCubeProps.axis;for(var w=0;3>w;++w)u&&0>u[w]?(d[w]=this.bounds[0][w],e[w]=this.bounds[1][w]):(d[w]=this.bounds[1][w],e[w]=this.bounds[0][w]);l[0]=c.drawingBufferWidth;l[1]=c.drawingBufferHeight;g.uniforms.model=q;g.uniforms.view=t;g.uniforms.projection=k;g.uniforms.coordinates=[this.position,d,e];g.uniforms.colors=this.colors;g.uniforms.screenShape=l;for(w=0;3>w;++w)g.uniforms.lineWidth=
this.lineWidth[w]*this.pixelRatio,this.enabled[w]&&(f.draw(c.TRIANGLES,6,6*w),this.drawSides[w]&&f.draw(c.TRIANGLES,12,18+12*w));f.unbind()};b.update=function(k){k&&("bounds"in k&&(this.bounds=k.bounds),"position"in k&&(this.position=k.position),"lineWidth"in k&&(this.lineWidth=k.lineWidth),"colors"in k&&(this.colors=k.colors),"enabled"in k&&(this.enabled=k.enabled),"drawSides"in k&&(this.drawSides=k.drawSides))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},
{"./shaders/index":320,"gl-buffer":258,"gl-vao":332}],322:[function(b,y,D){var n=b("glslify");b=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * tubePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(tubePosition, 1.0);\n  vec4 t_position  \x3d view * tubePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d tubePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
y=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var m=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position \x3d projection * view * tubePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
n=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
D.meshShader={vertex:b,fragment:y,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]};D.pickShader={vertex:m,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:413}],323:[function(b,y,D){var n=b("gl-vec3"),m=b("gl-vec4"),p="xyz xzy yxz yzx zxy zyx".split(" "),h=function(f,g,q,t){for(var u=0,w=0;w<f.length;w++)for(var x=f[w].velocities,E=0;E<x.length;E++)u=Math.max(u,
n.length(x[E]));f=f.map(function(K){var N=u,H=K.points,L=K.velocities;K=K.divergences;var P=[],Q=[],S=[],O=[],U=[],X=[],da=0;m.create();for(var ea=m.create(),ca=0;ca<H.length;ca++){var ia=H[ca],ha=L[ca],fa=K[ca];0===q&&(fa=.05*t);var na=n.length(ha)/N;var sa=m.create();n.copy(sa,ha);sa[3]=fa;for(ha=0;8>ha;ha++)U[ha]=[ia[0],ia[1],ia[2],ha];if(0<O.length)for(ha=0;8>ha;ha++)ia=(ha+1)%8,P.push(O[ha],U[ha],U[ia],U[ia],O[ia],O[ha]),S.push(ea,sa,sa,sa,ea,ea),X.push(da,na,na,na,da,da),ia=P.length,Q.push([ia-
6,ia-5,ia-4],[ia-3,ia-2,ia-1]);da=O;O=U;U=da;ea=sa;da=na}return{positions:P,cells:Q,vectors:S,vertexIntensity:X}});x=[];var F=[],z=[],B=[];for(w=0;w<f.length;w++){var C=f[w],v=x.length;x=x.concat(C.positions);z=z.concat(C.vectors);B=B.concat(C.vertexIntensity);for(E=0;E<C.cells.length;E++){var G=C.cells[E],I=[];F.push(I);for(var J=0;J<G.length;J++)I.push(G[J]+v)}}return{positions:x,cells:F,vectors:z,vertexIntensity:B,colormap:g}},a=function(f,g){var q=f.length,t;for(t=0;t<q;t++){var u=f[t];if(u===
g)break;else if(u>g)return t-1}return t},d=function(f,g,q){return f<g?g:f>q?q:f},e=function(f){var g=Infinity;f.sort(function(w,x){return w-x});for(var q=f.length,t=1;t<q;t++){var u=Math.abs(f[t]-f[t-1]);u<g&&(g=u)}return g},l=function(f){for(var g=[],q=[],t=[],u={},w={},x={},E=f.length,F=0;F<E;F++){var z=f[F],B=z[0],C=z[1];z=z[2];u[B]||(g.push(B),u[B]=!0);w[C]||(q.push(C),w[C]=!0);x[z]||(t.push(z),x[z]=!0)}f=e(g);q=e(q);t=e(t);t=Math.min(f,q,t);return isFinite(t)?t:1};y.exports=function(f,g){var q=
f.startingPositions,t=f.maxLength||1E3,u=f.tubeSize||1,w=f.absoluteTubeSize,x=f.gridFill||"+x+y+z",E,F,z;-1!==x.indexOf("-x")&&(E=!0);-1!==x.indexOf("-y")&&(F=!0);-1!==x.indexOf("-z")&&(z=!0);var B=p.indexOf(x.replace(/-/g,"").replace(/\+/g,""));var C=f.getVelocity||function(ua){var ta=f.vectors,oa=f.meshgrid;var va=ua[0];var ma=ua[1],pa=ua[2];ua=oa[0].length;var za=oa[1].length,qa=oa[2].length,Ca=a(oa[0],va),Ka=a(oa[1],ma),Oa=a(oa[2],pa),kb=Ca+1,mb=Ka+1,tb=Oa+1;Ca=d(Ca,0,ua-1);kb=d(kb,0,ua-1);Ka=
d(Ka,0,za-1);mb=d(mb,0,za-1);Oa=d(Oa,0,qa-1);tb=d(tb,0,qa-1);if(0>Ca||0>Ka||0>Oa||kb>ua-1||mb>za-1||tb>qa-1)va=n.create();else{var nb=oa[0][Ca],Ta=oa[1][Ka],fb=oa[2][Oa];va=(va-nb)/(oa[0][kb]-nb);ma=(ma-Ta)/(oa[1][mb]-Ta);oa=(pa-fb)/(oa[2][tb]-fb);isFinite(va)||(va=.5);isFinite(ma)||(ma=.5);isFinite(oa)||(oa=.5);E&&(Ca=ua-1-Ca,kb=ua-1-kb);F&&(Ka=za-1-Ka,mb=za-1-mb);z&&(Oa=qa-1-Oa,tb=qa-1-tb);switch(B){case 5:Ka*=qa;mb*=qa;Ca=Ca*qa*za;kb=kb*qa*za;break;case 4:Ca*=qa;kb*=qa;Ka=Ka*qa*ua;mb=mb*qa*ua;
break;case 3:Oa*=za;tb*=za;Ca=Ca*za*qa;kb=kb*za*qa;break;case 2:Ca*=za;kb*=za;Oa=Oa*za*ua;tb=tb*za*ua;break;case 1:Oa*=ua;tb*=ua;Ka=Ka*ua*qa;mb=mb*ua*qa;break;default:Ka*=ua,mb*=ua,Oa=Oa*ua*za,tb=tb*ua*za}ua=ta[Ca+Ka+Oa];za=ta[Ca+Ka+tb];qa=ta[Ca+mb+Oa];Ca=ta[Ca+mb+tb];pa=ta[kb+Ka+Oa];Ka=ta[kb+Ka+tb];Oa=ta[kb+mb+Oa];fb=ta[kb+mb+tb];ta=n.create();kb=n.create();mb=n.create();tb=n.create();n.lerp(ta,ua,pa,va);n.lerp(kb,za,Ka,va);n.lerp(mb,qa,Oa,va);n.lerp(tb,Ca,fb,va);va=n.create();ua=n.create();n.lerp(va,
ta,mb,ma);n.lerp(ua,kb,tb,ma);ma=n.create();n.lerp(ma,va,ua,oa);va=ma}return va};x=f.getDivergence||function(ua,ta){var oa=n.create();n.add(oa,ua,[1E-4,0,0]);var va=C(oa);n.subtract(va,va,ta);n.scale(va,va,1E4);n.add(oa,ua,[0,1E-4,0]);var ma=C(oa);n.subtract(ma,ma,ta);n.scale(ma,ma,1E4);n.add(oa,ua,[0,0,1E-4]);ua=C(oa);n.subtract(ua,ua,ta);n.scale(ua,ua,1E4);n.add(oa,va,ma);n.add(oa,oa,ua);return oa};var v=[],G=g[0][0],I=g[0][1],J=g[0][2],K=g[1][0],N=g[1][1],H=g[1][2],L=function(ua){var ta=ua[0],
oa=ua[1];ua=ua[2];return!(ta<G||ta>K||oa<I||oa>N||ua<J||ua>H)},P=10*n.distance(g[0],g[1])/t,Q=P*P;g=1;var S=0,O=q.length;1<O&&(g=l(q));for(var U=0;U<O;U++){var X=n.create();n.copy(X,q[U]);var da=[X],ea=[],ca=C(X),ia=X;ea.push(ca);var ha=[],fa=x(X,ca);fa=n.length(fa);isFinite(fa)&&fa>S&&(S=fa);ha.push(fa);v.push({points:da,velocities:ea,divergences:ha});for(var na=0;na<100*t&&da.length<t&&L(X);){na++;var sa=n.clone(ca);ca=n.squaredLength(sa);if(0===ca)break;else ca>Q&&n.scale(sa,sa,P/Math.sqrt(ca));
n.add(sa,sa,X);ca=C(sa);n.squaredDistance(ia,sa)-Q>-1E-4*Q&&(da.push(sa),ia=sa,ea.push(ca),fa=x(sa,ca),fa=n.length(fa),isFinite(fa)&&fa>S&&(S=fa),ha.push(fa));X=sa}}q=h(v,f.colormap,S,g);w?q.tubeScale=w:(0===S&&(S=1),q.tubeScale=.5*u*g/S);return q};var k=b("./lib/shaders"),c=b("gl-cone3d").createMesh;y.exports.createTubeMesh=function(f,g){return c(f,g,{shaders:k,traceType:"streamtube"})}},{"./lib/shaders":322,"gl-cone3d":259,"gl-vec3":351,"gl-vec4":387}],324:[function(b,y,D){var n=b("gl-shader");
b=b("glslify");var m=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate \x3d vec3(uv.zw, f.x);\n  worldCoordinate \x3d objectOffset + localCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  gl_Position \x3d clipPosition;\n  kill \x3d f.y;\n  value \x3d f.z;\n  planeCoordinate \x3d uv.xy;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * worldPosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  \x3d normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),
p=b(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill \x3e 0.0 ||\n    vColor.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N \x3d normalize(surfaceNormal);\n  vec3 V \x3d normalize(eyeDirection);\n  vec3 L \x3d normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor \x3d\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),
h=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate \x3d permutation * vec3(uv.xy, height);\n  worldCoordinate \x3d objectOffset + dataCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  clipPosition.z +\x3d zOffset;\n\n  gl_Position \x3d clipPosition;\n  value \x3d f + objectOffset.z;\n  kill \x3d -1.0;\n  planeCoordinate \x3d uv.zw;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   \x3d vec3(1,0,0);\n  eyeDirection    \x3d vec3(0,1,0);\n  lightDirection  \x3d vec3(0,0,1);\n}\n"]),
a=b(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh \x3d 255.0 * v;\n  float upper \x3d floor(vh);\n  float lower \x3d fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill \x3e 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux \x3d splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy \x3d splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor \x3d vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);
D.createShader=function(d){d=n(d,m,p,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);d.attributes.uv.location=0;d.attributes.f.location=1;d.attributes.normal.location=2;return d};D.createPickShader=function(d){d=n(d,m,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);d.attributes.uv.location=0;d.attributes.f.location=1;d.attributes.normal.location=2;return d};D.createContourShader=function(d){d=n(d,h,p,null,[{name:"uv",type:"vec4"},
{name:"f",type:"float"}]);d.attributes.uv.location=0;d.attributes.f.location=1;return d};D.createPickContourShader=function(d){d=n(d,h,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);d.attributes.uv.location=0;d.attributes.f.location=1;return d}},{"gl-shader":312,glslify:413}],325:[function(b,y,D){function n(ca,ia,ha,fa,na){this.position=ca;this.index=ia;this.uv=ha;this.level=fa;this.dataCoordinate=na}function m(ca,ia){ca=x([u({colormap:ca,nshades:Q,format:"rgba"}).map(function(ha,fa){fa=
ia?h(fa/255,ia):1;return[ha[0],ha[1],ha[2],255*fa]})]);w.divseq(ca,255);return ca}function p(ca,ia,ha,fa,na,sa,ua,ta,oa,va,ma,pa,za,qa,Ca){this.gl=ca;this.shape=ia;this.bounds=ha;this.objectOffset=Ca;this.intensityBounds=[];this._shader=fa;this._pickShader=na;this._coordinateBuffer=sa;this._vao=ua;this._colorMap=ta;this._contourShader=oa;this._contourPickShader=va;this._contourBuffer=ma;this._contourVAO=pa;this._contourOffsets=[[],[],[]];this._contourCounts=[[],[],[]];this._vertexCount=0;this._pickResult=
new n([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]);this._dynamicBuffer=za;this._dynamicVAO=qa;this._dynamicOffsets=[0,0,0];this._dynamicCounts=[0,0,0];this.contourWidth=[1,1,1];this.contourLevels=[[1],[1],[1]];this.contourTint=[0,0,0];this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]];this.showSurface=this.showContour=!0;this.enableHighlight=[!0,!0,!0];this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.highlightTint=[1,1,1];this.highlightLevel=[-1,-1,-1];this.enableDynamic=[!0,!0,!0];this.dynamicLevel=
[NaN,NaN,NaN];this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.dynamicTint=[1,1,1];this.dynamicWidth=[1,1,1];this.axesBounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.surfaceProject=[!1,!1,!1];this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]];this.colorBounds=[!1,!1];this._field=[E(t.mallocFloat(1024),[0,0]),E(t.mallocFloat(1024),[0,0]),E(t.mallocFloat(1024),[0,0])];this.pickId=1;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.snapToData=
!1;this.opacity=this.pixelRatio=1;this.opacityscale=!1;this.lightPosition=[10,1E4,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.vertexColor=0;this.dirty=!0}function h(ca,ia){if(!ia||!ia.length)return 1;for(var ha=0;ha<ia.length&&!(2>ia.length);++ha){if(ia[ha][0]===ca)return ia[ha][1];if(ia[ha][0]>ca&&0<ha)return ca=(ia[ha][0]-ca)/(ia[ha][0]-ia[ha-1][0]),ia[ha][1]*(1-ca)+ca*ia[ha-1][1]}return 1}function a(ca,ia){var ha,fa,na=ia.axes&&ia.axes.lastCubeProps.axis||
S,sa=ia.showSurface,ua=ia.showContour;for(ha=0;3>ha;++ha)for(sa=sa||ia.surfaceProject[ha],fa=0;3>fa;++fa)ua=ua||ia.contourProject[ha][fa];for(ha=0;3>ha;++ha){var ta=O.projections[ha];for(fa=0;16>fa;++fa)ta[fa]=0;for(fa=0;4>fa;++fa)ta[5*fa]=1;ta[5*ha]=0;ta[12+ha]=ia.axesBounds[+(0<na[ha])][ha];z(ta,ca.model,ta);var oa=O.clipBounds[ha];for(ta=0;2>ta;++ta)for(fa=0;3>fa;++fa)oa[ta][fa]=ca.clipBounds[ta][fa];oa[0][ha]=-1E8;oa[1][ha]=1E8}O.showSurface=sa;O.showContour=ua;return O}function d(ca,ia){ca=ca||
{};ia=this.gl;ia.disable(ia.CULL_FACE);this._colorMap.bind(0);var ha=U;ha.model=ca.model||H;ha.view=ca.view||H;ha.projection=ca.projection||H;ha.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]];ha.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]];ha.objectOffset=this.objectOffset;ha.contourColor=this.contourColor[0];ha.inverseModel=B(ha.inverseModel,ha.model);for(ca=0;2>ca;++ca)for(var fa=ha.clipBounds[ca],na=0;3>na;++na)fa[na]=
Math.min(Math.max(this.clipBounds[ca][na],-1E8),1E8);ha.kambient=this.ambientLight;ha.kdiffuse=this.diffuseLight;ha.kspecular=this.specularLight;ha.roughness=this.roughness;ha.fresnel=this.fresnel;ha.opacity=this.opacity;ha.height=0;ha.permutation=da;ha.vertexColor=this.vertexColor;fa=X;z(fa,ha.view,ha.model);z(fa,ha.projection,fa);B(fa,fa);for(ca=0;3>ca;++ca)ha.eyePosition[ca]=fa[12+ca]/fa[15];var sa=fa[15];for(ca=0;3>ca;++ca)sa+=this.lightPosition[ca]*fa[4*ca+3];for(ca=0;3>ca;++ca){var ua=fa[12+
ca];for(na=0;3>na;++na)ua+=fa[4*na+ca]*this.lightPosition[na];ha.lightPosition[ca]=ua/sa}fa=a(ha,this);if(fa.showSurface){this._shader.bind();this._shader.uniforms=ha;this._vao.bind();this.showSurface&&this._vertexCount&&this._vao.draw(ia.TRIANGLES,this._vertexCount);for(ca=0;3>ca;++ca)this.surfaceProject[ca]&&this.vertexCount&&(this._shader.uniforms.model=fa.projections[ca],this._shader.uniforms.clipBounds=fa.clipBounds[ca],this._vao.draw(ia.TRIANGLES,this._vertexCount));this._vao.unbind()}if(fa.showContour){sa=
this._contourShader;ha.kambient=1;ha.kdiffuse=0;ha.kspecular=0;ha.opacity=1;sa.bind();sa.uniforms=ha;ua=this._contourVAO;ua.bind();for(ca=0;3>ca;++ca)for(sa.uniforms.permutation=P[ca],ia.lineWidth(this.contourWidth[ca]*this.pixelRatio),na=0;na<this.contourLevels[ca].length;++na){if(na===this.highlightLevel[ca])sa.uniforms.contourColor=this.highlightColor[ca],sa.uniforms.contourTint=this.highlightTint[ca];else if(0===na||na-1===this.highlightLevel[ca])sa.uniforms.contourColor=this.contourColor[ca],
sa.uniforms.contourTint=this.contourTint[ca];this._contourCounts[ca][na]&&(sa.uniforms.height=this.contourLevels[ca][na],ua.draw(ia.LINES,this._contourCounts[ca][na],this._contourOffsets[ca][na]))}for(ca=0;3>ca;++ca)for(sa.uniforms.model=fa.projections[ca],sa.uniforms.clipBounds=fa.clipBounds[ca],na=0;3>na;++na)if(this.contourProject[ca][na]){sa.uniforms.permutation=P[na];ia.lineWidth(this.contourWidth[na]*this.pixelRatio);for(var ta=0;ta<this.contourLevels[na].length;++ta){if(ta===this.highlightLevel[na])sa.uniforms.contourColor=
this.highlightColor[na],sa.uniforms.contourTint=this.highlightTint[na];else if(0===ta||ta-1===this.highlightLevel[na])sa.uniforms.contourColor=this.contourColor[na],sa.uniforms.contourTint=this.contourTint[na];this._contourCounts[na][ta]&&(sa.uniforms.height=this.contourLevels[na][ta],ua.draw(ia.LINES,this._contourCounts[na][ta],this._contourOffsets[na][ta]))}}ua.unbind();ua=this._dynamicVAO;ua.bind();for(ca=0;3>ca;++ca)if(0!==this._dynamicCounts[ca])for(sa.uniforms.model=ha.model,sa.uniforms.clipBounds=
ha.clipBounds,sa.uniforms.permutation=P[ca],ia.lineWidth(this.dynamicWidth[ca]*this.pixelRatio),sa.uniforms.contourColor=this.dynamicColor[ca],sa.uniforms.contourTint=this.dynamicTint[ca],sa.uniforms.height=this.dynamicLevel[ca],ua.draw(ia.LINES,this._dynamicCounts[ca],this._dynamicOffsets[ca]),na=0;3>na;++na)this.contourProject[na][ca]&&(sa.uniforms.model=fa.projections[na],sa.uniforms.clipBounds=fa.clipBounds[na],ua.draw(ia.LINES,this._dynamicCounts[ca],this._dynamicOffsets[ca]));ua.unbind()}}function e(ca,
ia){return Array.isArray(ca)?[ia(ca[0]),ia(ca[1]),ia(ca[2])]:[ia(ca),ia(ca),ia(ca)]}function l(ca){return Array.isArray(ca)?3===ca.length?[ca[0],ca[1],ca[2],1]:[ca[0],ca[1],ca[2],ca[3]]:[0,0,0,1]}function k(ca){if(Array.isArray(ca)){if(Array.isArray(ca))return[l(ca[0]),l(ca[1]),l(ca[2])];ca=l(ca);return[ca.slice(),ca.slice(),ca.slice()]}}y.exports=function(ca){var ia=ca.gl,ha=G(ia),fa=J(ia),na=I(ia),sa=K(ia),ua=f(ia),ta=g(ia,[{buffer:ua,size:4,stride:N,offset:0},{buffer:ua,size:3,stride:N,offset:16},
{buffer:ua,size:3,stride:N,offset:28}]),oa=f(ia),va=g(ia,[{buffer:oa,size:4,stride:20,offset:0},{buffer:oa,size:1,stride:20,offset:16}]),ma=f(ia),pa=g(ia,[{buffer:ma,size:2,type:ia.FLOAT}]),za=q(ia,1,Q,ia.RGBA,ia.UNSIGNED_BYTE);za.minFilter=ia.LINEAR;za.magFilter=ia.LINEAR;ia=new p(ia,[0,0],[[0,0,0],[0,0,0]],ha,fa,ua,ta,za,na,sa,oa,va,ma,pa,[0,0,0]);ha={levels:[[],[],[]]};for(var qa in ca)ha[qa]=ca[qa];ha.colormap=ha.colormap||"jet";ia.update(ha);return ia};var c=b("bit-twiddle"),f=b("gl-buffer"),
g=b("gl-vao"),q=b("gl-texture2d"),t=b("typedarray-pool"),u=b("colormap"),w=b("ndarray-ops"),x=b("ndarray-pack"),E=b("ndarray"),F=b("surface-nets"),z=b("gl-mat4/multiply"),B=b("gl-mat4/invert"),C=b("binary-search-bounds"),v=b("ndarray-gradient");b=b("./lib/shaders");var G=b.createShader,I=b.createContourShader,J=b.createPickShader,K=b.createPickContourShader,N=40,H=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],P=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,
0]];(function(){for(var ca=0;3>ca;++ca){var ia=P[ca],ha=(ca+2)%3;ia[(ca+1)%3]=1;ia[ha+3]=1;ia[ca+6]=1}})();var Q=256;b=p.prototype;b.isTransparent=function(){return 1>this.opacity||this.opacityscale};b.isOpaque=function(){if(this.opacityscale||1>this.opacity)return!1;if(1<=this.opacity)return!0;for(var ca=0;3>ca;++ca)if(0<this._contourCounts[ca].length)return!0;return!1};b.pickSlots=1;b.setPickBase=function(ca){this.pickId=ca};var S=[0,0,0],O={showSurface:!1,showContour:!1,projections:[H.slice(),
H.slice(),H.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},U={model:H,view:H,projection:H,inverseModel:H.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1E-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1E3,1E3,1E3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},X=H.slice(),da=[1,0,0,0,1,0,0,0,1];b.draw=
function(ca){return d.call(this,ca,!1)};b.drawTransparent=function(ca){return d.call(this,ca,!0)};var ea={model:H,view:H,projection:H,inverseModel:H,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};b.drawPick=function(ca){ca=ca||{};var ia=this.gl;ia.disable(ia.CULL_FACE);ea.model=ca.model||H;ea.view=ca.view||H;ea.projection=ca.projection||H;ea.shape=
this._field[2].shape;ea.pickId=this.pickId/255;ea.lowerBound=this.bounds[0];ea.upperBound=this.bounds[1];ea.objectOffset=this.objectOffset;ea.permutation=da;for(ca=0;2>ca;++ca)for(var ha=ea.clipBounds[ca],fa=0;3>fa;++fa)ha[fa]=Math.min(Math.max(this.clipBounds[ca][fa],-1E8),1E8);ha=a(ea,this);if(ha.showSurface){this._pickShader.bind();this._pickShader.uniforms=ea;this._vao.bind();this._vao.draw(ia.TRIANGLES,this._vertexCount);for(ca=0;3>ca;++ca)this.surfaceProject[ca]&&(this._pickShader.uniforms.model=
ha.projections[ca],this._pickShader.uniforms.clipBounds=ha.clipBounds[ca],this._vao.draw(ia.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ha.showContour){var na=this._contourPickShader;na.bind();na.uniforms=ea;var sa=this._contourVAO;sa.bind();for(fa=0;3>fa;++fa)for(ia.lineWidth(this.contourWidth[fa]*this.pixelRatio),na.uniforms.permutation=P[fa],ca=0;ca<this.contourLevels[fa].length;++ca)this._contourCounts[fa][ca]&&(na.uniforms.height=this.contourLevels[fa][ca],sa.draw(ia.LINES,this._contourCounts[fa][ca],
this._contourOffsets[fa][ca]));for(ca=0;3>ca;++ca)for(na.uniforms.model=ha.projections[ca],na.uniforms.clipBounds=ha.clipBounds[ca],fa=0;3>fa;++fa)if(this.contourProject[ca][fa]){na.uniforms.permutation=P[fa];ia.lineWidth(this.contourWidth[fa]*this.pixelRatio);for(var ua=0;ua<this.contourLevels[fa].length;++ua)this._contourCounts[fa][ua]&&(na.uniforms.height=this.contourLevels[fa][ua],sa.draw(ia.LINES,this._contourCounts[fa][ua],this._contourOffsets[fa][ua]))}sa.unbind()}};b.pick=function(ca){if(!ca||
ca.id!==this.pickId)return null;var ia=this._field[2].shape,ha=this._pickResult,fa=ia[0]*(ca.value[0]+(ca.value[2]>>4)/16)/255,na=Math.floor(fa),sa=fa-na;ca=ia[1]*(ca.value[1]+(ca.value[2]&15)/16)/255;var ua=Math.floor(ca),ta=ca-ua;na+=1;ua+=1;for(var oa=ha.position,va=oa[0]=oa[1]=oa[2]=0;2>va;++va)for(var ma=va?sa:1-sa,pa=0;2>pa;++pa)for(var za=na+va,qa=ua+pa,Ca=ma*(pa?ta:1-ta),Ka=0;3>Ka;++Ka)oa[Ka]+=this._field[Ka].get(za,qa)*Ca;va=this._pickResult.level;for(ma=0;3>ma;++ma)va[ma]=C.le(this.contourLevels[ma],
oa[ma]),0>va[ma]?0<this.contourLevels[ma].length&&(va[ma]=0):va[ma]<this.contourLevels[ma].length-1&&Math.abs(this.contourLevels[ma][va[ma]]-oa[ma])>Math.abs(this.contourLevels[ma][va[ma]+1]-oa[ma])&&(va[ma]+=1);ha.index[0]=.5>sa?na:na+1;ha.index[1]=.5>ta?ua:ua+1;ha.uv[0]=fa/ia[0];ha.uv[1]=ca/ia[1];for(Ka=0;3>Ka;++Ka)ha.dataCoordinate[Ka]=this._field[Ka].get(ha.index[0],ha.index[1]);return ha};b.padField=function(ca,ia){var ha=ia.shape.slice(),fa=ca.shape.slice();w.assign(ca.lo(1,1).hi(ha[0],ha[1]),
ia);w.assign(ca.lo(1).hi(ha[0],1),ia.hi(ha[0],1));w.assign(ca.lo(1,fa[1]-1).hi(ha[0],1),ia.lo(0,ha[1]-1).hi(ha[0],1));w.assign(ca.lo(0,1).hi(1,ha[1]),ia.hi(1));w.assign(ca.lo(fa[0]-1,1).hi(1,ha[1]),ia.lo(ha[0]-1));ca.set(0,0,ia.get(0,0));ca.set(0,fa[1]-1,ia.get(0,ha[1]-1));ca.set(fa[0]-1,0,ia.get(ha[0]-1,0));ca.set(fa[0]-1,fa[1]-1,ia.get(ha[0]-1,ha[1]-1))};b.update=function(ca){ca=ca||{};this.objectOffset=ca.objectOffset||this.objectOffset;this.dirty=!0;"contourWidth"in ca&&(this.contourWidth=e(ca.contourWidth,
Number));"showContour"in ca&&(this.showContour=e(ca.showContour,Boolean));"showSurface"in ca&&(this.showSurface=!!ca.showSurface);"contourTint"in ca&&(this.contourTint=e(ca.contourTint,Boolean));"contourColor"in ca&&(this.contourColor=k(ca.contourColor));"contourProject"in ca&&(this.contourProject=e(ca.contourProject,function(ib){return e(ib,Boolean)}));"surfaceProject"in ca&&(this.surfaceProject=ca.surfaceProject);"dynamicColor"in ca&&(this.dynamicColor=k(ca.dynamicColor));"dynamicTint"in ca&&(this.dynamicTint=
e(ca.dynamicTint,Number));"dynamicWidth"in ca&&(this.dynamicWidth=e(ca.dynamicWidth,Number));"opacity"in ca&&(this.opacity=ca.opacity);"opacityscale"in ca&&(this.opacityscale=ca.opacityscale);"colorBounds"in ca&&(this.colorBounds=ca.colorBounds);"vertexColor"in ca&&(this.vertexColor=ca.vertexColor?1:0);var ia=ca.field||ca.coords&&ca.coords[2]||null,ha=!1;ia||(ia=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,
0));if("field"in ca||"coords"in ca){var fa=(ia.shape[0]+2)*(ia.shape[1]+2);fa>this._field[2].data.length&&(t.freeFloat(this._field[2].data),this._field[2].data=t.mallocFloat(c.nextPow2(fa)));this._field[2]=E(this._field[2].data,[ia.shape[0]+2,ia.shape[1]+2]);this.padField(this._field[2],ia);fa=this.shape=ia.shape.slice();for(ia=0;2>ia;++ia)this._field[2].size>this._field[ia].data.length&&(t.freeFloat(this._field[ia].data),this._field[ia].data=t.mallocFloat(this._field[2].size)),this._field[ia]=E(this._field[ia].data,
[fa[0]+2,fa[1]+2]);if(ca.coords){var na=ca.coords;if(!Array.isArray(na)||3!==na.length)throw Error("gl-surface: invalid coordinates for x/y");for(ia=0;2>ia;++ia){var sa=na[ia];for(ua=0;2>ua;++ua)if(sa.shape[ua]!==fa[ua])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[ia],sa)}}else if(ca.ticks){ua=ca.ticks;if(!Array.isArray(ua)||2!==ua.length)throw Error("gl-surface: invalid ticks");for(ia=0;2>ia;++ia){na=ua[ia];if(Array.isArray(na)||na.length)na=E(na);if(na.shape[0]!==
fa[ia])throw Error("gl-surface: invalid tick length");sa=E(na.data,fa);sa.stride[ia]=na.stride[0];sa.stride[ia^1]=0;this.padField(this._field[ia],sa)}}else{for(ia=0;2>ia;++ia)ua=[0,0],ua[ia]=1,this._field[ia]=E(this._field[ia].data,[fa[0]+2,fa[1]+2],ua,0);this._field[0].set(0,0,0);for(var ua=0;ua<fa[0];++ua)this._field[0].set(ua+1,0,ua);this._field[0].set(fa[0]+1,0,fa[0]-1);this._field[1].set(0,0,0);for(ua=0;ua<fa[1];++ua)this._field[1].set(0,ua+1,ua);this._field[1].set(0,fa[1]+1,fa[1]-1)}ua=this._field;
na=E(t.mallocFloat(6*ua[2].size),[3,fa[0]+2,fa[1]+2,2]);for(ia=0;3>ia;++ia)v(na.pick(ia),ua[ia],"mirror");var ta=E(t.mallocFloat(3*ua[2].size),[fa[0]+2,fa[1]+2,3]);for(ia=0;ia<fa[0]+2;++ia)for(ua=0;ua<fa[1]+2;++ua){sa=na.get(0,ia,ua,0);var oa=na.get(0,ia,ua,1),va=na.get(1,ia,ua,0),ma=na.get(1,ia,ua,1),pa=na.get(2,ia,ua,0),za=na.get(2,ia,ua,1),qa=va*za-ma*pa;pa=pa*oa-za*sa;za=sa*ma-oa*va;sa=Math.sqrt(qa*qa+pa*pa+za*za);1E-8>sa?(sa=Math.max(Math.abs(qa),Math.abs(pa),Math.abs(za)),1E-8>sa?(za=1,pa=qa=
0,sa=1):sa=1/sa):sa=1/Math.sqrt(sa);ta.set(ia,ua,0,qa*sa);ta.set(ia,ua,1,pa*sa);ta.set(ia,ua,2,za*sa)}t.free(na.data);var Ca=[Infinity,Infinity,Infinity],Ka=[-Infinity,-Infinity,-Infinity],Oa=Infinity,kb=-Infinity,mb=t.mallocFloat(c.nextPow2((fa[0]-1)*(fa[1]-1)*60)),tb=0;for(ia=na=0;ia<fa[0]-1;++ia)a:for(ua=0;ua<fa[1]-1;++ua){for(qa=0;2>qa;++qa)for(pa=0;2>pa;++pa)for(sa=0;3>sa;++sa)if(oa=this._field[sa].get(1+ia+qa,1+ua+pa),isNaN(oa)||!isFinite(oa))continue a;for(sa=0;6>sa;++sa){va=ia+L[sa][0];ma=
ua+L[sa][1];var nb=this._field[0].get(va+1,ma+1),Ta=this._field[1].get(va+1,ma+1);oa=this._field[2].get(va+1,ma+1);qa=ta.get(va+1,ma+1,0);pa=ta.get(va+1,ma+1,1);za=ta.get(va+1,ma+1,2);ca.intensity&&(fb=ca.intensity.get(va,ma));var fb=ca.intensity?ca.intensity.get(va,ma):oa+this.objectOffset[2];mb[tb++]=va;mb[tb++]=ma;mb[tb++]=nb;mb[tb++]=Ta;mb[tb++]=oa;mb[tb++]=0;mb[tb++]=fb;mb[tb++]=qa;mb[tb++]=pa;mb[tb++]=za;Ca[0]=Math.min(Ca[0],nb+this.objectOffset[0]);Ca[1]=Math.min(Ca[1],Ta+this.objectOffset[1]);
Ca[2]=Math.min(Ca[2],oa+this.objectOffset[2]);Oa=Math.min(Oa,fb);Ka[0]=Math.max(Ka[0],nb+this.objectOffset[0]);Ka[1]=Math.max(Ka[1],Ta+this.objectOffset[1]);Ka[2]=Math.max(Ka[2],oa+this.objectOffset[2]);kb=Math.max(kb,fb);na+=1}}ca.intensityBounds&&(Oa=+ca.intensityBounds[0],kb=+ca.intensityBounds[1]);for(ia=6;ia<tb;ia+=10)mb[ia]=(mb[ia]-Oa)/(kb-Oa);this._vertexCount=na;this._coordinateBuffer.update(mb.subarray(0,tb));t.freeFloat(mb);t.free(ta.data);this.bounds=[Ca,Ka];this.intensity=ca.intensity||
this._field[2];if(this.intensityBounds[0]!==Oa||this.intensityBounds[1]!==kb)ha=!0;this.intensityBounds=[Oa,kb]}if("levels"in ca){fa=ca.levels;fa=Array.isArray(fa[0])?fa.slice():[[],[],fa];for(ia=0;3>ia;++ia)fa[ia]=fa[ia].slice(),fa[ia].sort(function(ib,Na){return ib-Na});for(ia=0;3>ia;++ia)for(ua=0;ua<fa[ia].length;++ua)fa[ia][ua]-=this.objectOffset[ia];ia=0;a:for(;3>ia;++ia){if(fa[ia].length!==this.contourLevels[ia].length){ha=!0;break}for(ua=0;ua<fa[ia].length;++ua)if(fa[ia][ua]!==this.contourLevels[ia][ua]){ha=
!0;break a}}this.contourLevels=fa}if(ha){ua=this._field;fa=this.shape;ha=[];for(ta=0;3>ta;++ta){za=this.contourLevels[ta];Ca=[];Ka=[];Oa=[0,0,0];for(ia=0;ia<za.length;++ia){kb=F(this._field[ta],za[ia]);Ca.push(ha.length/5|0);ua=na=0;a:for(;ua<kb.cells.length;++ua)for(mb=kb.cells[ua],sa=0;2>sa;++sa){tb=kb.positions[mb[sa]];oa=tb[0];nb=Math.floor(oa)|0;Ta=oa-nb;oa=tb[1];fb=Math.floor(oa)|0;var ab=oa-fb,ra=!1,Ea=0;b:for(;3>Ea;++Ea){Oa[Ea]=0;var Ia=(ta+Ea+1)%3;for(qa=0;2>qa;++qa){var Va=qa?Ta:1-Ta;va=
Math.min(Math.max(nb+qa,0),fa[0])|0;for(pa=0;2>pa;++pa){var rb=pa?ab:1-ab;ma=Math.min(Math.max(fb+pa,0),fa[1])|0;oa=2>Ea?this._field[Ia].get(va,ma):(this.intensity.get(va,ma)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]);if(!isFinite(oa)||isNaN(oa)){ra=!0;break b}Oa[Ea]+=Va*rb*oa}}}if(ra){if(0<sa){for(sa=0;5>sa;++sa)ha.pop();--na}continue a}else ha.push(Oa[0],Oa[1],tb[0],tb[1],Oa[2]),na+=1}Ka.push(na)}this._contourOffsets[ta]=Ca;this._contourCounts[ta]=Ka}fa=t.mallocFloat(ha.length);
for(ia=0;ia<ha.length;++ia)fa[ia]=ha[ia];this._contourBuffer.update(fa);t.freeFloat(fa)}ca.colormap&&this._colorMap.setPixels(m(ca.colormap,this.opacityscale))};b.dispose=function(){this._shader.dispose();this._vao.dispose();this._coordinateBuffer.dispose();this._colorMap.dispose();this._contourBuffer.dispose();this._contourVAO.dispose();this._contourShader.dispose();this._contourPickShader.dispose();this._dynamicBuffer.dispose();this._dynamicVAO.dispose();for(var ca=0;3>ca;++ca)t.freeFloat(this._field[ca].data)};
b.highlight=function(ca){var ia;if(ca){for(ia=0;3>ia;++ia)this.highlightLevel[ia]=this.enableHighlight[ia]?ca.level[ia]:-1;ca=this.snapToData?ca.dataCoordinate:ca.position;for(ia=0;3>ia;++ia)ca[ia]-=this.objectOffset[ia];if(this.enableDynamic[0]&&ca[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ca[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ca[2]!==this.dynamicLevel[2]){for(var ha=0,fa=this.shape,na=t.mallocFloat(12*fa[0]*fa[1]),sa=0;3>sa;++sa)if(this.enableDynamic[sa]){this.dynamicLevel[sa]=
ca[sa];var ua=this._field[(sa+1)%3],ta=this._field[(sa+2)%3];ia=F(this._field[sa],ca[sa]);var oa=ia.cells,va=ia.positions;this._dynamicOffsets[sa]=ha;for(ia=0;ia<oa.length;++ia)for(var ma=oa[ia],pa=0;2>pa;++pa){var za=va[ma[pa]],qa=+za[0],Ca=qa|0,Ka=Math.min(Ca+1,fa[0])|0,Oa=qa-Ca,kb=1-Oa,mb=+za[1];za=mb|0;qa=Math.min(za+1,fa[1])|0;var tb=mb-za,nb=1-tb;mb=kb*nb;kb*=tb;nb*=Oa;tb*=Oa;Oa=mb*ua.get(Ca,za)+kb*ua.get(Ca,qa)+nb*ua.get(Ka,za)+tb*ua.get(Ka,qa);Ca=mb*ta.get(Ca,za)+kb*ta.get(Ca,qa)+nb*ta.get(Ka,
za)+tb*ta.get(Ka,qa);if(isNaN(Oa)||isNaN(Ca)){pa&&--ha;break}na[2*ha]=Oa;na[2*ha+1]=Ca;ha+=1}this._dynamicCounts[sa]=ha-this._dynamicOffsets[sa]}else this.dynamicLevel[sa]=NaN,this._dynamicCounts[sa]=0;this._dynamicBuffer.update(na.subarray(0,2*ha));t.freeFloat(na)}}else this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1]}},{"./lib/shaders":324,"binary-search-bounds":96,"bit-twiddle":97,colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,
"gl-texture2d":327,"gl-vao":332,ndarray:469,"ndarray-gradient":462,"ndarray-ops":464,"ndarray-pack":465,"surface-nets":542,"typedarray-pool":567}],326:[function(b,y,D){var n=b("css-font"),m=b("pick-by-alias"),p=b("regl"),h=b("gl-util/context");D=b("es6-weak-map");var a=b("color-normalize"),d=b("font-atlas"),e=b("typedarray-pool"),l=b("parse-rect"),k=b("is-plain-obj"),c=b("parse-unit"),f=b("to-px"),g=b("detect-kerning"),q=b("object-assign"),t=b("font-measure"),u=b("flatten-vertex-data"),w=b("bit-twiddle").nextPow2,
x=new D,E=!1;document.body&&(b=document.body.appendChild(document.createElement("div")),b.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(b).fontStretch&&(E=!0),document.body.removeChild(b));var F=function(z){"function"===typeof z&&z._gl&&z.prop&&z.texture&&z.buffer?(z={regl:z},this.gl=z.regl._gl):this.gl=h(z);this.regl=(this.shader=x.get(this.gl))?this.shader.regl:z.regl||p({gl:this.gl});this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"});this.sizeBuffer=
this.regl.buffer({type:"float",usage:"stream"});this.shader||(this.shader=this.createShader(),x.set(this.gl,this.shader));this.batch=[];this.fontSize=[];this.font=[];this.fontAtlas=[];this.draw=this.shader.draw.bind(this);this.render=function(){this.regl._refresh();this.draw(this.batch)};this.canvas=this.gl.canvas;this.update(k(z)?z:{})};F.prototype.createShader=function(){var z=this.regl,B=z({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",
dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:z.prop("count"),offset:z.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:z.this("sizeBuffer")},width:{offset:0,stride:8,buffer:z.this("sizeBuffer")},char:z.this("charBuffer"),position:z.this("position")},uniforms:{atlasSize:function(C,v){return[v.atlas.width,v.atlas.height]},atlasDim:function(C,v){return[v.atlas.cols,v.atlas.rows]},atlas:function(C,v){return v.atlas.texture},charStep:function(C,v){return v.atlas.step},em:function(C,
v){return v.atlas.em},color:z.prop("color"),opacity:z.prop("opacity"),viewport:z.this("viewportArray"),scale:z.this("scale"),align:z.prop("align"),baseline:z.prop("baseline"),translate:z.this("translate"),positionOffset:z.prop("positionOffset")},primitive:"points",viewport:z.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+
(F.normalViewport?"":"vec2 positionOffset \x3d vec2(positionOffset.x,- positionOffset.y);")+"\n\n\t\t\t\tvec2 offset \x3d floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position \x3d (position + translate) * scale;\n\t\t\t\tposition +\x3d offset * scale;\n\n\t\t\t\t"+(F.normalViewport?"position.y \x3d 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord \x3d position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position \x3d vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize \x3d charStep;\n\n\t\t\t\tcharId.x \x3d mod(char, atlasDim.x);\n\t\t\t\tcharId.y \x3d floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth \x3d width * em;\n\n\t\t\t\tfontColor \x3d color / 255.;\n\t\t\t}",
frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv \x3d gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep \x3d floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y \x3d charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth \x3d ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) \x3e halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) \x3c halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv +\x3d charId * charStep;\n\t\t\t\tuv \x3d uv / atlasSize;\n\n\t\t\t\tvec4 color \x3d fontColor;\n\t\t\t\tvec4 mask \x3d texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY \x3d lightness(mask);\n\t\t\t\t// float colorY \x3d lightness(color);\n\t\t\t\tcolor.a *\x3d maskY;\n\t\t\t\tcolor.a *\x3d opacity;\n\n\t\t\t\t// color.a +\x3d .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb +\x3d (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor \x3d color;\n\t\t\t}"});
return{regl:z,draw:B,atlas:{}}};F.prototype.update=function(z){var B=this;if("string"===typeof z)z={text:z};else if(!z)return;z=m(z,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",
kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0);null!=z.opacity&&(Array.isArray(z.opacity)?this.opacity=z.opacity.map(function(X){return parseFloat(X)}):this.opacity=parseFloat(z.opacity));null!=z.viewport&&(this.viewport=l(z.viewport),F.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),
this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null!=z.kerning&&(this.kerning=z.kerning);null!=z.offset&&("number"===typeof z.offset&&(z.offset=[z.offset,0]),this.positionOffset=u(z.offset));z.direction&&(this.direction=z.direction);z.range&&(this.range=
z.range,this.scale=[1/(z.range[2]-z.range[0]),1/(z.range[3]-z.range[1])],this.translate=[-z.range[0],-z.range[1]]);z.scale&&(this.scale=z.scale);z.translate&&(this.translate=z.translate);this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]);this.translate||(this.translate=[0,0]);this.font.length||z.font||(z.font=F.baseFontSize+"px sans-serif");var C=!1,v=!1;z.font&&(Array.isArray(z.font)?z.font:[z.font]).forEach(function(X,da){if("string"===typeof X)try{X=n.parse(X)}catch(ha){X=
n.parse(F.baseFontSize+"px "+X)}else X=n.parse(n.stringify(X));var ea=n.stringify({size:F.baseFontSize,family:X.family,stretch:E?X.stretch:void 0,variant:X.variant,weight:X.weight,style:X.style}),ca=c(X.size);ca=Math.round(ca[0]*f(ca[1]));ca!==B.fontSize[da]&&(v=!0,B.fontSize[da]=ca);if(!B.font[da]||ea!=B.font[da].baseString)if(C=!0,B.font[da]=F.fonts[ea],!B.font[da]){ca=X.family.join(", ");var ia=[X.style];X.style!=X.variant&&ia.push(X.variant);X.variant!=X.weight&&ia.push(X.weight);E&&X.weight!=
X.stretch&&ia.push(X.stretch);B.font[da]={baseString:ea,family:ca,weight:X.weight,stretch:X.stretch,style:X.style,variant:X.variant,width:{},kerning:{},metrics:t(ca,{origin:"top",fontSize:F.baseFontSize,fontStyle:ia.join(" ")})};F.fonts[ea]=B.font[da]}});(C||v)&&this.font.forEach(function(X,da){var ea=n.stringify({size:B.fontSize[da],family:X.family,stretch:E?X.stretch:void 0,variant:X.variant,weight:X.weight,style:X.style});B.fontAtlas[da]=B.shader.atlas[ea];B.fontAtlas[da]||(B.shader.atlas[ea]=
B.fontAtlas[da]={fontString:ea,step:2*Math.ceil(B.fontSize[da]*X.metrics.bottom*.5),em:B.fontSize[da],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:B.regl.texture()});null==z.text&&(z.text=B.text)});if("string"===typeof z.text&&z.position&&2<z.position.length){for(var G=Array(.5*z.position.length),I=0;I<G.length;I++)G[I]=z.text;z.text=G}if(null!=z.text||C){this.textOffsets=[0];if(Array.isArray(z.text)){this.count=z.text[0].length;this.counts=[this.count];for(G=1;G<z.text.length;G++)this.textOffsets[G]=
this.textOffsets[G-1]+z.text[G-1].length,this.count+=z.text[G].length,this.counts.push(z.text[G].length);this.text=z.text.join("")}else this.text=z.text,this.count=this.text.length,this.counts=[this.count];var J=[];this.font.forEach(function(X,da){F.atlasContext.font=X.baseString;da=B.fontAtlas[da];for(var ea=0;ea<B.text.length;ea++){var ca=B.text.charAt(ea);null==da.ids[ca]&&(da.ids[ca]=da.chars.length,da.chars.push(ca),J.push(ca));if(null==X.width[ca]&&(X.width[ca]=F.atlasContext.measureText(ca).width/
F.baseFontSize,B.kerning)){var ia=[],ha;for(ha in X.width)ia.push(ha+ca,ca+ha);q(X.kerning,g(X.family,{pairs:ia}))}}})}if(z.position)if(2<z.position.length){G=!z.position[0].length;I=e.mallocFloat(2*this.count);for(var K=0,N=0;K<this.counts.length;K++){var H=this.counts[K];if(G)for(var L=0;L<H;L++)I[N++]=z.position[2*K],I[N++]=z.position[2*K+1];else for(L=0;L<H;L++)I[N++]=z.position[K][0],I[N++]=z.position[K][1]}this.position.call?this.position({type:"float",data:I}):this.position=this.regl.buffer({type:"float",
data:I});e.freeFloat(I)}else this.position.destroy&&this.position.destroy(),this.position={constant:z.position};if(z.text||C){G=e.mallocUint8(this.count);I=e.mallocFloat(2*this.count);this.textWidth=[];for(N=K=0;K<this.counts.length;K++){H=this.counts[K];L=this.font[K]||this.font[0];for(var P=this.fontAtlas[K]||this.fontAtlas[0],Q=0;Q<H;Q++){var S=this.text.charAt(N),O=this.text.charAt(N-1);G[N]=P.ids[S];I[2*N]=L.width[S];if(Q){var U=I[2*N-1]+.5*I[2*N-2]+.5*I[2*N];this.kerning&&(S=L.kerning[O+S])&&
(U+=.001*S);I[2*N+1]=U}else I[2*N+1]=.5*I[2*N];N++}this.textWidth.push(I.length?.5*I[2*N-2]+I[2*N-1]:0)}z.align||(z.align=this.align);this.charBuffer({data:G,type:"uint8",usage:"stream"});this.sizeBuffer({data:I,type:"float",usage:"stream"});e.freeUint8(G);e.freeFloat(I);J.length&&this.font.forEach(function(X,da){X=B.fontAtlas[da];da=X.step;var ea=Math.min(Math.floor(F.maxAtlasSize/da),X.chars.length),ca=Math.ceil(X.chars.length/ea),ia=w(ea*da),ha=w(ca*da);X.width=ia;X.height=ha;X.rows=ca;X.cols=
ea;X.em&&X.texture({data:d({canvas:F.atlasCanvas,font:X.fontString,chars:X.chars,shape:[ia,ha],step:[da,da]})})})}z.align&&(this.align=z.align,this.alignOffset=this.textWidth.map(function(X,da){da=Array.isArray(B.align)?1<B.align.length?B.align[da]:B.align[0]:B.align;if("number"===typeof da)return da;switch(da){case "right":case "end":return-X;case "center":case "centre":case "middle":return.5*-X}return 0}));null==this.baseline&&null==z.baseline&&(z.baseline=0);null!=z.baseline&&(this.baseline=z.baseline,
Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(X,da){da=(B.font[da]||B.font[0]).metrics;var ea=.5*da.bottom;ea="number"===typeof X?ea+(X-da.baseline):ea+-da[X];F.normalViewport||(ea*=-1);return ea}));if(null!=z.color)if(z.color||(z.color="transparent"),"string"!==typeof z.color&&isNaN(z.color)){if("number"===typeof z.color[0]&&z.color.length>this.counts.length)for(I=z.color.length,G=e.mallocUint8(I),K=(z.color.subarray||z.color.slice).bind(z.color),
N=0;N<I;N+=4)G.set(a(K(N,N+4),"uint8"),N);else for(I=z.color.length,G=e.mallocUint8(4*I),K=0;K<I;K++)G.set(a(z.color[K]||0,"uint8"),4*K);this.color=G}else this.color=a(z.color,"uint8");if(z.position||z.text||z.color||z.baseline||z.align||z.font||z.offset||z.opacity)if(4<this.color.length||1<this.baselineOffset.length||this.align&&1<this.align.length||1<this.fontAtlas.length||2<this.positionOffset.length)for(this.batch=Array(Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||
0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0)),G=0;G<this.batch.length;G++)this.batch[G]={count:1<this.counts.length?this.counts[G]:this.counts[0],offset:1<this.textOffsets.length?this.textOffsets[G]:this.textOffsets[0],color:this.color?4>=this.color.length?this.color:this.color.subarray(4*G,4*G+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[G]:this.opacity,baseline:null!=this.baselineOffset[G]?this.baselineOffset[G]:this.baselineOffset[0],
align:this.align?null!=this.alignOffset[G]?this.alignOffset[G]:this.alignOffset[0]:0,atlas:this.fontAtlas[G]||this.fontAtlas[0],positionOffset:2<this.positionOffset.length?this.positionOffset.subarray(2*G,2*G+2):this.positionOffset};else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:
[]};F.prototype.destroy=function(){};F.prototype.kerning=!0;F.prototype.position={constant:new Float32Array(2)};F.prototype.translate=null;F.prototype.scale=null;F.prototype.font=null;F.prototype.text="";F.prototype.positionOffset=[0,0];F.prototype.opacity=1;F.prototype.color=new Uint8Array([0,0,0,255]);F.prototype.alignOffset=[0,0];F.normalViewport=!1;F.maxAtlasSize=1024;F.atlasCanvas=document.createElement("canvas");F.atlasContext=F.atlasCanvas.getContext("2d",{alpha:!1});F.baseFontSize=64;F.fonts=
{};y.exports=F},{"bit-twiddle":97,"color-normalize":125,"css-font":144,"detect-kerning":172,"es6-weak-map":233,"flatten-vertex-data":244,"font-atlas":245,"font-measure":246,"gl-util/context":328,"is-plain-obj":443,"object-assign":473,"parse-rect":478,"parse-unit":480,"pick-by-alias":485,regl:512,"to-px":550,"typedarray-pool":567}],327:[function(b,y,D){function n(q){return"undefined"!=typeof HTMLCanvasElement&&q instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&q instanceof HTMLImageElement||
"undefined"!=typeof HTMLVideoElement&&q instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&q instanceof ImageData}function m(q,t,u){var w=q.gl,x=w.getParameter(w.MAX_TEXTURE_SIZE);if(0>t||t>x||0>u||u>x)throw Error("gl-texture2d: Invalid texture size");q._shape=[t,u];q.bind();w.texImage2D(w.TEXTURE_2D,0,q.format,t,u,0,q.format,q.type,null);q._mipLevels=[0];return q}function p(q,t,u,w,x,E){this.gl=q;this.handle=t;this.format=x;this.type=E;this._shape=[u,w];this._mipLevels=[0];this._minFilter=
this._magFilter=q.NEAREST;this._wrapT=this._wrapS=q.CLAMP_TO_EDGE;this._anisoSamples=1;var F=this;q=[this._wrapS,this._wrapT];Object.defineProperties(q,[{get:function(){return F._wrapS},set:function(z){return F.wrapS=z}},{get:function(){return F._wrapT},set:function(z){return F.wrapT=z}}]);this._wrapVector=q;q=[this._shape[0],this._shape[1]];Object.defineProperties(q,[{get:function(){return F._shape[0]},set:function(z){return F.width=z}},{get:function(){return F._shape[1]},set:function(z){return F.height=
z}}]);this._shapeVector=q}function h(q,t){return 3===q.length?1===t[2]&&t[1]===q[0]*q[2]&&t[0]===q[2]:1===t[0]&&t[1]===q[0]}function a(q){var t=q.createTexture();q.bindTexture(q.TEXTURE_2D,t);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE);return t}function d(q,t,u,w,x){var E=q.getParameter(q.MAX_TEXTURE_SIZE);
if(0>t||t>E||0>u||u>E)throw Error("gl-texture2d: Invalid texture shape");if(x===q.FLOAT&&!q.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");E=a(q);q.texImage2D(q.TEXTURE_2D,0,w,t,u,0,w,x,null);return new p(q,E,t,u,w,x)}var e=b("ndarray"),l=b("ndarray-ops"),k=b("typedarray-pool");y.exports=function(q){if(1>=arguments.length)throw Error("gl-texture2d: Missing arguments for texture2d constructor");c||(c=[q.LINEAR,q.NEAREST_MIPMAP_LINEAR,
q.LINEAR_MIPMAP_NEAREST,q.LINEAR_MIPMAP_NEAREST],f=[q.NEAREST,q.LINEAR,q.NEAREST_MIPMAP_NEAREST,q.NEAREST_MIPMAP_LINEAR,q.LINEAR_MIPMAP_NEAREST,q.LINEAR_MIPMAP_LINEAR],g=[q.REPEAT,q.CLAMP_TO_EDGE,q.MIRRORED_REPEAT]);if("number"===typeof arguments[1])return d(q,arguments[1],arguments[2],arguments[3]||q.RGBA,arguments[4]||q.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return d(q,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||q.RGBA,arguments[3]||q.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var t=
arguments[1],u=n(t)?t:t.raw;if(u){var w=t.width|0;t=t.height|0;var x=arguments[2]||q.RGBA,E=arguments[3]||q.UNSIGNED_BYTE,F=a(q);q.texImage2D(q.TEXTURE_2D,0,x,x,E,u);return new p(q,F,w,t,x,E)}if(t.shape&&t.data&&t.stride){F=t;var z=F.dtype;u=F.shape.slice();t=q.getParameter(q.MAX_TEXTURE_SIZE);if(0>u[0]||u[0]>t||0>u[1]||u[1]>t)throw Error("gl-texture2d: Invalid texture size");t=h(u,F.stride.slice());"float32"===z?x=q.FLOAT:"float64"===z?(x=q.FLOAT,t=!1,z="float32"):"uint8"===z?x=q.UNSIGNED_BYTE:(x=
q.UNSIGNED_BYTE,t=!1,z="uint8");if(2===u.length)E=q.LUMINANCE,u=[u[0],u[1],1],F=e(F.data,u,[F.stride[0],F.stride[1],1],F.offset);else if(3===u.length)if(1===u[2])E=q.ALPHA;else if(2===u[2])E=q.LUMINANCE_ALPHA;else if(3===u[2])E=q.RGB;else if(4===u[2])E=q.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");x!==q.FLOAT||q.getExtension("OES_texture_float")||(x=q.UNSIGNED_BYTE,t=!1);var B=F.size;if(t)F=0===F.offset&&F.data.length===
B?F.data:F.data.subarray(F.offset,F.offset+B);else{var C=[u[2],u[2]*u[0],1];w=k.malloc(B,z);C=e(w,u,C,0);"float32"!==z&&"float64"!==z||x!==q.UNSIGNED_BYTE?l.assign(C,F):l.muls(C,F,255);F=w.subarray(0,B)}z=a(q);q.texImage2D(q.TEXTURE_2D,0,E,u[0],u[1],0,E,x,F);t||k.free(w);return new p(q,z,u[0],u[1],E,x)}}throw Error("gl-texture2d: Invalid arguments for texture2d constructor");};var c=null,f=null,g=null;b=p.prototype;Object.defineProperties(b,{minFilter:{get:function(){return this._minFilter},set:function(q){this.bind();
var t=this.gl;this.type===t.FLOAT&&0<=c.indexOf(q)&&!t.getExtension("OES_texture_float_linear")&&(q=t.NEAREST);if(0>f.indexOf(q))throw Error("gl-texture2d: Unknown filter mode "+q);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,q);return this._minFilter=q}},magFilter:{get:function(){return this._magFilter},set:function(q){this.bind();var t=this.gl;this.type===t.FLOAT&&0<=c.indexOf(q)&&!t.getExtension("OES_texture_float_linear")&&(q=t.NEAREST);if(0>f.indexOf(q))throw Error("gl-texture2d: Unknown filter mode "+
q);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,q);return this._magFilter=q}},mipSamples:{get:function(){return this._anisoSamples},set:function(q){var t=this._anisoSamples;this._anisoSamples=Math.max(q,1)|0;t!==this._anisoSamples&&(q=this.gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,q.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples);return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(q){this.bind();if(0>g.indexOf(q))throw Error("gl-texture2d: Unknown wrap mode "+
q);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,q);return this._wrapS=q}},wrapT:{get:function(){return this._wrapT},set:function(q){this.bind();if(0>g.indexOf(q))throw Error("gl-texture2d: Unknown wrap mode "+q);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,q);return this._wrapT=q}},wrap:{get:function(){return this._wrapVector},set:function(q){Array.isArray(q)||(q=[q,q]);if(2!==q.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=
0;2>t;++t)if(0>g.indexOf(q[t]))throw Error("gl-texture2d: Unknown wrap mode "+q);this._wrapS=q[0];this._wrapT=q[1];t=this.gl;this.bind();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this._wrapS);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this._wrapT);return q}},shape:{get:function(){return this._shapeVector},set:function(q){if(!Array.isArray(q))q=[q|0,q|0];else if(2!==q.length)throw Error("gl-texture2d: Invalid texture shape");m(this,q[0]|0,q[1]|0);return[q[0]|0,q[1]|0]}},width:{get:function(){return this._shape[0]},
set:function(q){q|=0;m(this,q,this._shape[1]);return q}},height:{get:function(){return this._shape[1]},set:function(q){q|=0;m(this,this._shape[0],q);return q}}});b.bind=function(q){var t=this.gl;void 0!==q&&t.activeTexture(t.TEXTURE0+(q|0));t.bindTexture(t.TEXTURE_2D,this.handle);return void 0!==q?q|0:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0};b.dispose=function(){this.gl.deleteTexture(this.handle)};b.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var q=Math.min(this._shape[0],
this._shape[1]),t=0;0<q;++t,q>>>=1)0>this._mipLevels.indexOf(t)&&this._mipLevels.push(t)};b.setPixels=function(q,t,u,w){var x=this.gl;this.bind();Array.isArray(t)?(w=u,u=t[1]|0,t=t[0]|0):(t=t||0,u=u||0);w=w||0;var E=n(q)?q:q.raw;if(E)0>this._mipLevels.indexOf(w)?(x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,this.type,E),this._mipLevels.push(w)):x.texSubImage2D(x.TEXTURE_2D,w,t,u,this.format,this.type,E);else if(q.shape&&q.stride&&q.data){if(2>q.shape.length||t+q.shape[1]>this._shape[1]>>>w||
u+q.shape[0]>this._shape[0]>>>w||0>t||0>u)throw Error("gl-texture2d: Texture dimensions are out of bounds");E=this.format;var F=this.type,z=this._mipLevels,B=q.dtype,C=q.shape.slice();if(2>C.length||3<C.length)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var v=h(C,q.stride.slice());"float32"===B?B=x.FLOAT:"float64"===B?(B=x.FLOAT,v=!1):"uint8"===B?B=x.UNSIGNED_BYTE:(B=x.UNSIGNED_BYTE,v=!1);if(2===C.length){var G=x.LUMINANCE;C=[C[0],C[1],1];q=e(q.data,C,[q.stride[0],q.stride[1],1],
q.offset)}else if(3===C.length)if(1===C[2])G=x.ALPHA;else if(2===C[2])G=x.LUMINANCE_ALPHA;else if(3===C[2])G=x.RGB;else if(4===C[2])G=x.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");G!==x.LUMINANCE&&G!==x.ALPHA||E!==x.LUMINANCE&&E!==x.ALPHA||(G=E);if(G!==E)throw Error("gl-texture2d: Incompatible texture format for setPixels");G=q.size;var I=0>z.indexOf(w);I&&z.push(w);B===F&&v?0===q.offset&&q.data.length===G?I?x.texImage2D(x.TEXTURE_2D,
w,E,C[0],C[1],0,E,F,q.data):x.texSubImage2D(x.TEXTURE_2D,w,t,u,C[0],C[1],E,F,q.data):I?x.texImage2D(x.TEXTURE_2D,w,E,C[0],C[1],0,E,F,q.data.subarray(q.offset,q.offset+G)):x.texSubImage2D(x.TEXTURE_2D,w,t,u,C[0],C[1],E,F,q.data.subarray(q.offset,q.offset+G)):(z=F===x.FLOAT?k.mallocFloat32(G):k.mallocUint8(G),v=e(z,C,[C[2],C[2]*C[0],1]),B===x.FLOAT&&F===x.UNSIGNED_BYTE?l.muls(v,q,255):l.assign(v,q),I?x.texImage2D(x.TEXTURE_2D,w,E,C[0],C[1],0,E,F,z.subarray(0,G)):x.texSubImage2D(x.TEXTURE_2D,w,t,u,C[0],
C[1],E,F,z.subarray(0,G)),F===x.FLOAT?k.freeFloat32(z):k.freeUint8(z))}else throw Error("gl-texture2d: Unsupported data type");}},{ndarray:469,"ndarray-ops":464,"typedarray-pool":567}],328:[function(b,y,D){(function(n){function m(d){if(d.container)if(d.container==document.body)document.body.style.width||(d.canvas.width=d.width||d.pixelRatio*n.innerWidth),document.body.style.height||(d.canvas.height=d.height||d.pixelRatio*n.innerHeight);else{var e=d.container.getBoundingClientRect();d.canvas.width=
d.width||e.right-e.left;d.canvas.height=d.height||e.bottom-e.top}}function p(d){return"function"===typeof d.getContext&&"width"in d&&"height"in d}function h(){var d=document.createElement("canvas");d.style.position="absolute";d.style.top=0;d.style.left=0;return d}var a=b("pick-by-alias");y.exports=function(d){d?"string"===typeof d&&(d={container:d}):d={};d=p(d)?{container:d}:"string"===typeof d.nodeName&&"function"===typeof d.appendChild&&"function"===typeof d.getBoundingClientRect?{container:d}:
"function"===typeof d.drawArrays||"function"===typeof d.drawElements?{gl:d}:a(d,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0);d.pixelRatio||(d.pixelRatio=n.pixelRatio||1);if(d.gl)return d.gl;d.canvas&&(d.container=d.canvas.parentNode);if(d.container){if("string"===typeof d.container){var e=
document.querySelector(d.container);if(!e)throw Error("Element "+d.container+" is not found");d.container=e}p(d.container)?(d.canvas=d.container,d.container=d.canvas.parentNode):d.canvas||(d.canvas=h(),d.container.appendChild(d.canvas),m(d))}else if(!d.canvas)if("undefined"!==typeof document)d.container=document.body||document.documentElement,d.canvas=h(),d.container.appendChild(d.canvas),m(d);else throw Error("Not DOM environment. Use headless-gl.");if(!d.gl)try{d.gl=d.canvas.getContext("webgl",
d.attrs)}catch(l){try{d.gl=d.canvas.getContext("experimental-webgl",d.attrs)}catch(k){d.gl=d.canvas.getContext("webgl-experimental",d.attrs)}}return d.gl}}).call(this,"undefined"!==typeof xa?xa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"pick-by-alias":485}],329:[function(b,y,D){y.exports=function(n,m,p){m?m.bind():n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);m=n.getParameter(n.MAX_VERTEX_ATTRIBS)|0;if(p){if(p.length>m)throw Error("gl-vao: Too many vertex attributes");for(var h=
0;h<p.length;++h){var a=p[h];if(a.buffer){var d=a.size||4,e=a.type||n.FLOAT,l=!!a.normalized,k=a.stride||0,c=a.offset||0;a.buffer.bind();n.enableVertexAttribArray(h);n.vertexAttribPointer(h,d,e,l,k,c)}else{if("number"===typeof a)n.vertexAttrib1f(h,a);else if(1===a.length)n.vertexAttrib1f(h,a[0]);else if(2===a.length)n.vertexAttrib2f(h,a[0],a[1]);else if(3===a.length)n.vertexAttrib3f(h,a[0],a[1],a[2]);else if(4===a.length)n.vertexAttrib4f(h,a[0],a[1],a[2],a[3]);else throw Error("gl-vao: Invalid vertex attribute");
n.disableVertexAttribArray(h)}}}else n.bindBuffer(n.ARRAY_BUFFER,null),h=0;for(;h<m;++h)n.disableVertexAttribArray(h)}},{}],330:[function(b,y,D){function n(p){this.gl=p;this._attributes=this._elements=null;this._elementsType=p.UNSIGNED_SHORT}var m=b("./do-bind.js");n.prototype.bind=function(){m(this.gl,this._elements,this._attributes)};n.prototype.update=function(p,h,a){this._elements=h;this._attributes=p;this._elementsType=a||this.gl.UNSIGNED_SHORT};n.prototype.dispose=function(){};n.prototype.unbind=
function(){};n.prototype.draw=function(p,h,a){a=a||0;var d=this.gl;this._elements?d.drawElements(p,h,this._elementsType,a):d.drawArrays(p,a,h)};y.exports=function(p){return new n(p)}},{"./do-bind.js":329}],331:[function(b,y,D){function n(h,a,d,e,l,k){this.location=h;this.dimension=a;this.a=d;this.b=e;this.c=l;this.d=k}function m(h,a,d){this.gl=h;this._ext=a;this.handle=d;this._attribs=[];this._useElements=!1;this._elementsType=h.UNSIGNED_SHORT}var p=b("./do-bind.js");n.prototype.bind=function(h){switch(this.dimension){case 1:h.vertexAttrib1f(this.location,
this.a);break;case 2:h.vertexAttrib2f(this.location,this.a,this.b);break;case 3:h.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:h.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}};m.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var h=0;h<this._attribs.length;++h)this._attribs[h].bind(this.gl)};m.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};m.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};m.prototype.update=
function(h,a,d){this.bind();p(this.gl,a,h);this.unbind();this._attribs.length=0;if(h)for(var e=0;e<h.length;++e){var l=h[e];"number"===typeof l?this._attribs.push(new n(e,1,l)):Array.isArray(l)&&this._attribs.push(new n(e,l.length,l[0],l[1],l[2],l[3]))}this._useElements=!!a;this._elementsType=d||this.gl.UNSIGNED_SHORT};m.prototype.draw=function(h,a,d){d=d||0;var e=this.gl;this._useElements?e.drawElements(h,a,this._elementsType,d):e.drawArrays(h,d,a)};y.exports=function(h,a){return new m(h,a,a.createVertexArrayOES())}},
{"./do-bind.js":329}],332:[function(b,y,D){function n(h){this.bindVertexArrayOES=h.bindVertexArray.bind(h);this.createVertexArrayOES=h.createVertexArray.bind(h);this.deleteVertexArrayOES=h.deleteVertexArray.bind(h)}var m=b("./lib/vao-native.js"),p=b("./lib/vao-emulated.js");y.exports=function(h,a,d,e){var l=h.createVertexArray?new n(h):h.getExtension("OES_vertex_array_object");h=l?m(h,l):p(h);h.update(a,d,e);return h}},{"./lib/vao-emulated.js":330,"./lib/vao-native.js":331}],333:[function(b,y,D){y.exports=
function(n,m,p){n[0]=m[0]+p[0];n[1]=m[1]+p[1];n[2]=m[2]+p[2];return n}},{}],334:[function(b,y,D){y.exports=function(h,a){h=n(h[0],h[1],h[2]);a=n(a[0],a[1],a[2]);m(h,h);m(a,a);a=p(h,a);return 1<a?0:Math.acos(a)};var n=b("./fromValues"),m=b("./normalize"),p=b("./dot")},{"./dot":344,"./fromValues":350,"./normalize":361}],335:[function(b,y,D){y.exports=function(n,m){n[0]=Math.ceil(m[0]);n[1]=Math.ceil(m[1]);n[2]=Math.ceil(m[2]);return n}},{}],336:[function(b,y,D){y.exports=function(n){var m=new Float32Array(3);
m[0]=n[0];m[1]=n[1];m[2]=n[2];return m}},{}],337:[function(b,y,D){y.exports=function(n,m){n[0]=m[0];n[1]=m[1];n[2]=m[2];return n}},{}],338:[function(b,y,D){y.exports=function(){var n=new Float32Array(3);n[0]=0;n[1]=0;n[2]=0;return n}},{}],339:[function(b,y,D){y.exports=function(n,m,p){var h=m[0],a=m[1];m=m[2];var d=p[0],e=p[1];p=p[2];n[0]=a*p-m*e;n[1]=m*d-h*p;n[2]=h*e-a*d;return n}},{}],340:[function(b,y,D){y.exports=b("./distance")},{"./distance":341}],341:[function(b,y,D){y.exports=function(n,m){var p=
m[0]-n[0],h=m[1]-n[1];n=m[2]-n[2];return Math.sqrt(p*p+h*h+n*n)}},{}],342:[function(b,y,D){y.exports=b("./divide")},{"./divide":343}],343:[function(b,y,D){y.exports=function(n,m,p){n[0]=m[0]/p[0];n[1]=m[1]/p[1];n[2]=m[2]/p[2];return n}},{}],344:[function(b,y,D){y.exports=function(n,m){return n[0]*m[0]+n[1]*m[1]+n[2]*m[2]}},{}],345:[function(b,y,D){y.exports=1E-6},{}],346:[function(b,y,D){y.exports=function(m,p){var h=m[0],a=m[1];m=m[2];var d=p[0],e=p[1];p=p[2];return Math.abs(h-d)<=n*Math.max(1,Math.abs(h),
Math.abs(d))&&Math.abs(a-e)<=n*Math.max(1,Math.abs(a),Math.abs(e))&&Math.abs(m-p)<=n*Math.max(1,Math.abs(m),Math.abs(p))};var n=b("./epsilon")},{"./epsilon":345}],347:[function(b,y,D){y.exports=function(n,m){return n[0]===m[0]&&n[1]===m[1]&&n[2]===m[2]}},{}],348:[function(b,y,D){y.exports=function(n,m){n[0]=Math.floor(m[0]);n[1]=Math.floor(m[1]);n[2]=Math.floor(m[2]);return n}},{}],349:[function(b,y,D){y.exports=function(m,p,h,a,d,e){p||(p=3);h||(h=0);for(a=a?Math.min(a*p+h,m.length):m.length;h<a;h+=
p)n[0]=m[h],n[1]=m[h+1],n[2]=m[h+2],d(n,n,e),m[h]=n[0],m[h+1]=n[1],m[h+2]=n[2];return m};var n=b("./create")()},{"./create":338}],350:[function(b,y,D){y.exports=function(n,m,p){var h=new Float32Array(3);h[0]=n;h[1]=m;h[2]=p;return h}},{}],351:[function(b,y,D){y.exports={EPSILON:b("./epsilon"),create:b("./create"),clone:b("./clone"),angle:b("./angle"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),equals:b("./equals"),exactEquals:b("./exactEquals"),add:b("./add"),subtract:b("./subtract"),
sub:b("./sub"),multiply:b("./multiply"),mul:b("./mul"),divide:b("./divide"),div:b("./div"),min:b("./min"),max:b("./max"),floor:b("./floor"),ceil:b("./ceil"),round:b("./round"),scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),dist:b("./dist"),squaredDistance:b("./squaredDistance"),sqrDist:b("./sqrDist"),length:b("./length"),len:b("./len"),squaredLength:b("./squaredLength"),sqrLen:b("./sqrLen"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),
cross:b("./cross"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformMat3:b("./transformMat3"),transformQuat:b("./transformQuat"),rotateX:b("./rotateX"),rotateY:b("./rotateY"),rotateZ:b("./rotateZ"),forEach:b("./forEach")}},{"./add":333,"./angle":334,"./ceil":335,"./clone":336,"./copy":337,"./create":338,"./cross":339,"./dist":340,"./distance":341,"./div":342,"./divide":343,"./dot":344,"./epsilon":345,"./equals":346,"./exactEquals":347,"./floor":348,"./forEach":349,
"./fromValues":350,"./inverse":352,"./len":353,"./length":354,"./lerp":355,"./max":356,"./min":357,"./mul":358,"./multiply":359,"./negate":360,"./normalize":361,"./random":362,"./rotateX":363,"./rotateY":364,"./rotateZ":365,"./round":366,"./scale":367,"./scaleAndAdd":368,"./set":369,"./sqrDist":370,"./sqrLen":371,"./squaredDistance":372,"./squaredLength":373,"./sub":374,"./subtract":375,"./transformMat3":376,"./transformMat4":377,"./transformQuat":378}],352:[function(b,y,D){y.exports=function(n,m){n[0]=
1/m[0];n[1]=1/m[1];n[2]=1/m[2];return n}},{}],353:[function(b,y,D){y.exports=b("./length")},{"./length":354}],354:[function(b,y,D){y.exports=function(n){var m=n[0],p=n[1];n=n[2];return Math.sqrt(m*m+p*p+n*n)}},{}],355:[function(b,y,D){y.exports=function(n,m,p,h){var a=m[0],d=m[1];m=m[2];n[0]=a+h*(p[0]-a);n[1]=d+h*(p[1]-d);n[2]=m+h*(p[2]-m);return n}},{}],356:[function(b,y,D){y.exports=function(n,m,p){n[0]=Math.max(m[0],p[0]);n[1]=Math.max(m[1],p[1]);n[2]=Math.max(m[2],p[2]);return n}},{}],357:[function(b,
y,D){y.exports=function(n,m,p){n[0]=Math.min(m[0],p[0]);n[1]=Math.min(m[1],p[1]);n[2]=Math.min(m[2],p[2]);return n}},{}],358:[function(b,y,D){y.exports=b("./multiply")},{"./multiply":359}],359:[function(b,y,D){y.exports=function(n,m,p){n[0]=m[0]*p[0];n[1]=m[1]*p[1];n[2]=m[2]*p[2];return n}},{}],360:[function(b,y,D){y.exports=function(n,m){n[0]=-m[0];n[1]=-m[1];n[2]=-m[2];return n}},{}],361:[function(b,y,D){y.exports=function(n,m){var p=m[0],h=m[1],a=m[2];p=p*p+h*h+a*a;0<p&&(p=1/Math.sqrt(p),n[0]=
m[0]*p,n[1]=m[1]*p,n[2]=m[2]*p);return n}},{}],362:[function(b,y,D){y.exports=function(n,m){m=m||1;var p=2*Math.random()*Math.PI,h=2*Math.random()-1,a=Math.sqrt(1-h*h)*m;n[0]=Math.cos(p)*a;n[1]=Math.sin(p)*a;n[2]=h*m;return n}},{}],363:[function(b,y,D){y.exports=function(n,m,p,h){var a=p[1];p=p[2];var d=m[1]-a,e=m[2]-p,l=Math.sin(h);h=Math.cos(h);n[0]=m[0];n[1]=a+d*h-e*l;n[2]=p+d*l+e*h;return n}},{}],364:[function(b,y,D){y.exports=function(n,m,p,h){var a=p[0];p=p[2];var d=m[0]-a,e=m[2]-p,l=Math.sin(h);
h=Math.cos(h);n[0]=a+e*l+d*h;n[1]=m[1];n[2]=p+e*h-d*l;return n}},{}],365:[function(b,y,D){y.exports=function(n,m,p,h){var a=p[0];p=p[1];var d=m[0]-a,e=m[1]-p,l=Math.sin(h);h=Math.cos(h);n[0]=a+d*h-e*l;n[1]=p+d*l+e*h;n[2]=m[2];return n}},{}],366:[function(b,y,D){y.exports=function(n,m){n[0]=Math.round(m[0]);n[1]=Math.round(m[1]);n[2]=Math.round(m[2]);return n}},{}],367:[function(b,y,D){y.exports=function(n,m,p){n[0]=m[0]*p;n[1]=m[1]*p;n[2]=m[2]*p;return n}},{}],368:[function(b,y,D){y.exports=function(n,
m,p,h){n[0]=m[0]+p[0]*h;n[1]=m[1]+p[1]*h;n[2]=m[2]+p[2]*h;return n}},{}],369:[function(b,y,D){y.exports=function(n,m,p,h){n[0]=m;n[1]=p;n[2]=h;return n}},{}],370:[function(b,y,D){y.exports=b("./squaredDistance")},{"./squaredDistance":372}],371:[function(b,y,D){y.exports=b("./squaredLength")},{"./squaredLength":373}],372:[function(b,y,D){y.exports=function(n,m){var p=m[0]-n[0],h=m[1]-n[1];n=m[2]-n[2];return p*p+h*h+n*n}},{}],373:[function(b,y,D){y.exports=function(n){var m=n[0],p=n[1];n=n[2];return m*
m+p*p+n*n}},{}],374:[function(b,y,D){y.exports=b("./subtract")},{"./subtract":375}],375:[function(b,y,D){y.exports=function(n,m,p){n[0]=m[0]-p[0];n[1]=m[1]-p[1];n[2]=m[2]-p[2];return n}},{}],376:[function(b,y,D){y.exports=function(n,m,p){var h=m[0],a=m[1];m=m[2];n[0]=h*p[0]+a*p[3]+m*p[6];n[1]=h*p[1]+a*p[4]+m*p[7];n[2]=h*p[2]+a*p[5]+m*p[8];return n}},{}],377:[function(b,y,D){y.exports=function(n,m,p){var h=m[0],a=m[1];m=m[2];var d=p[3]*h+p[7]*a+p[11]*m+p[15];d=d||1;n[0]=(p[0]*h+p[4]*a+p[8]*m+p[12])/
d;n[1]=(p[1]*h+p[5]*a+p[9]*m+p[13])/d;n[2]=(p[2]*h+p[6]*a+p[10]*m+p[14])/d;return n}},{}],378:[function(b,y,D){y.exports=function(n,m,p){var h=m[0],a=m[1],d=m[2];m=p[0];var e=p[1],l=p[2];p=p[3];var k=p*h+e*d-l*a,c=p*a+l*h-m*d,f=p*d+m*a-e*h;h=-m*h-e*a-l*d;n[0]=k*p+h*-m+c*-l-f*-e;n[1]=c*p+h*-e+f*-m-k*-l;n[2]=f*p+h*-l+k*-e-c*-m;return n}},{}],379:[function(b,y,D){y.exports=function(n,m,p){n[0]=m[0]+p[0];n[1]=m[1]+p[1];n[2]=m[2]+p[2];n[3]=m[3]+p[3];return n}},{}],380:[function(b,y,D){y.exports=function(n){var m=
new Float32Array(4);m[0]=n[0];m[1]=n[1];m[2]=n[2];m[3]=n[3];return m}},{}],381:[function(b,y,D){y.exports=function(n,m){n[0]=m[0];n[1]=m[1];n[2]=m[2];n[3]=m[3];return n}},{}],382:[function(b,y,D){y.exports=function(){var n=new Float32Array(4);n[0]=0;n[1]=0;n[2]=0;n[3]=0;return n}},{}],383:[function(b,y,D){y.exports=function(n,m){var p=m[0]-n[0],h=m[1]-n[1],a=m[2]-n[2];n=m[3]-n[3];return Math.sqrt(p*p+h*h+a*a+n*n)}},{}],384:[function(b,y,D){y.exports=function(n,m,p){n[0]=m[0]/p[0];n[1]=m[1]/p[1];n[2]=
m[2]/p[2];n[3]=m[3]/p[3];return n}},{}],385:[function(b,y,D){y.exports=function(n,m){return n[0]*m[0]+n[1]*m[1]+n[2]*m[2]+n[3]*m[3]}},{}],386:[function(b,y,D){y.exports=function(n,m,p,h){var a=new Float32Array(4);a[0]=n;a[1]=m;a[2]=p;a[3]=h;return a}},{}],387:[function(b,y,D){y.exports={create:b("./create"),clone:b("./clone"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),add:b("./add"),subtract:b("./subtract"),multiply:b("./multiply"),divide:b("./divide"),min:b("./min"),max:b("./max"),
scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),squaredDistance:b("./squaredDistance"),length:b("./length"),squaredLength:b("./squaredLength"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformQuat:b("./transformQuat")}},{"./add":379,"./clone":380,"./copy":381,"./create":382,"./distance":383,"./divide":384,"./dot":385,"./fromValues":386,"./inverse":388,"./length":389,
"./lerp":390,"./max":391,"./min":392,"./multiply":393,"./negate":394,"./normalize":395,"./random":396,"./scale":397,"./scaleAndAdd":398,"./set":399,"./squaredDistance":400,"./squaredLength":401,"./subtract":402,"./transformMat4":403,"./transformQuat":404}],388:[function(b,y,D){y.exports=function(n,m){n[0]=1/m[0];n[1]=1/m[1];n[2]=1/m[2];n[3]=1/m[3];return n}},{}],389:[function(b,y,D){y.exports=function(n){var m=n[0],p=n[1],h=n[2];n=n[3];return Math.sqrt(m*m+p*p+h*h+n*n)}},{}],390:[function(b,y,D){y.exports=
function(n,m,p,h){var a=m[0],d=m[1],e=m[2];m=m[3];n[0]=a+h*(p[0]-a);n[1]=d+h*(p[1]-d);n[2]=e+h*(p[2]-e);n[3]=m+h*(p[3]-m);return n}},{}],391:[function(b,y,D){y.exports=function(n,m,p){n[0]=Math.max(m[0],p[0]);n[1]=Math.max(m[1],p[1]);n[2]=Math.max(m[2],p[2]);n[3]=Math.max(m[3],p[3]);return n}},{}],392:[function(b,y,D){y.exports=function(n,m,p){n[0]=Math.min(m[0],p[0]);n[1]=Math.min(m[1],p[1]);n[2]=Math.min(m[2],p[2]);n[3]=Math.min(m[3],p[3]);return n}},{}],393:[function(b,y,D){y.exports=function(n,
m,p){n[0]=m[0]*p[0];n[1]=m[1]*p[1];n[2]=m[2]*p[2];n[3]=m[3]*p[3];return n}},{}],394:[function(b,y,D){y.exports=function(n,m){n[0]=-m[0];n[1]=-m[1];n[2]=-m[2];n[3]=-m[3];return n}},{}],395:[function(b,y,D){y.exports=function(n,m){var p=m[0],h=m[1],a=m[2];m=m[3];var d=p*p+h*h+a*a+m*m;0<d&&(d=1/Math.sqrt(d),n[0]=p*d,n[1]=h*d,n[2]=a*d,n[3]=m*d);return n}},{}],396:[function(b,y,D){var n=b("./normalize"),m=b("./scale");y.exports=function(p,h){h=h||1;p[0]=Math.random();p[1]=Math.random();p[2]=Math.random();
p[3]=Math.random();n(p,p);m(p,p,h);return p}},{"./normalize":395,"./scale":397}],397:[function(b,y,D){y.exports=function(n,m,p){n[0]=m[0]*p;n[1]=m[1]*p;n[2]=m[2]*p;n[3]=m[3]*p;return n}},{}],398:[function(b,y,D){y.exports=function(n,m,p,h){n[0]=m[0]+p[0]*h;n[1]=m[1]+p[1]*h;n[2]=m[2]+p[2]*h;n[3]=m[3]+p[3]*h;return n}},{}],399:[function(b,y,D){y.exports=function(n,m,p,h,a){n[0]=m;n[1]=p;n[2]=h;n[3]=a;return n}},{}],400:[function(b,y,D){y.exports=function(n,m){var p=m[0]-n[0],h=m[1]-n[1],a=m[2]-n[2];
n=m[3]-n[3];return p*p+h*h+a*a+n*n}},{}],401:[function(b,y,D){y.exports=function(n){var m=n[0],p=n[1],h=n[2];n=n[3];return m*m+p*p+h*h+n*n}},{}],402:[function(b,y,D){y.exports=function(n,m,p){n[0]=m[0]-p[0];n[1]=m[1]-p[1];n[2]=m[2]-p[2];n[3]=m[3]-p[3];return n}},{}],403:[function(b,y,D){y.exports=function(n,m,p){var h=m[0],a=m[1],d=m[2];m=m[3];n[0]=p[0]*h+p[4]*a+p[8]*d+p[12]*m;n[1]=p[1]*h+p[5]*a+p[9]*d+p[13]*m;n[2]=p[2]*h+p[6]*a+p[10]*d+p[14]*m;n[3]=p[3]*h+p[7]*a+p[11]*d+p[15]*m;return n}},{}],404:[function(b,
y,D){y.exports=function(n,m,p){var h=m[0],a=m[1],d=m[2],e=p[0],l=p[1],k=p[2];p=p[3];var c=p*h+l*d-k*a,f=p*a+k*h-e*d,g=p*d+e*a-l*h;h=-e*h-l*a-k*d;n[0]=c*p+h*-e+f*-k-g*-l;n[1]=f*p+h*-l+g*-e-c*-k;n[2]=g*p+h*-k+c*-l-f*-e;n[3]=m[3];return n}},{}],405:[function(b,y,D){var n=b("glsl-tokenizer"),m=b("atob-lite");y.exports=function(p){p=Array.isArray(p)?p:n(p);for(var h=0;h<p.length;h++){var a=p[h];if("preprocessor"===a.type&&(a=a.data.match(/#define\s+SHADER_NAME(_B64)?\s+(.+)$/))&&a[2])return p=a[2],(a[1]?
m(p):p).trim()}}},{"atob-lite":77,"glsl-tokenizer":412}],406:[function(b,y,D){y.exports=function(B){function C(oa){oa.length&&U.push({type:z[P],data:oa,position:ea,line:X,column:da})}function v(){O=O.length?[]:O;if("/"===S&&"*"===Q)return ea=L+H-1,P=l,S=Q,H+1;if("/"===S&&"/"===Q)return ea=L+H-1,P=k,S=Q,H+1;if("#"===Q)return P=c,ea=L+H,H;if(/\s/.test(Q))return P=x,ea=L+H,H;ca=/\d/.test(Q);ia=/[^\w_]/.test(Q);ea=L+H;P=ca?g:ia?f:e;return H}function G(){if(("\r"===Q||"\n"===Q)&&"\\"!==S)return C(O.join("")),
P=d,H;O.push(Q);S=Q;return H+1}function I(){if("."===S&&/\d/.test(Q))return P=q,H;if("/"===S&&"*"===Q)return P=l,H;if("/"===S&&"/"===Q)return P=k,H;if("."===Q&&O.length){for(;J(O););P=q;return H}if(";"===Q||")"===Q||"("===Q){if(O.length)for(;J(O););C(Q);P=d;return H+1}var oa=2===O.length&&"\x3d"!==Q;if(/[\w_\d\s]/.test(Q)||oa){for(;J(O););P=d;return H}O.push(Q);S=Q;return H+1}function J(oa){var va=0;do{var ma=m.indexOf(oa.slice(0,oa.length+va).join(""));var pa=m[ma];if(-1===ma){if(0<va--+oa.length)continue;
pa=oa.slice(0,1).join("")}C(pa);ea+=pa.length;O=O.slice(pa.length);return O.length}while(1)}function K(){if("."===Q||/[eE]/.test(Q))return O.push(Q),P=q,S=Q,H+1;if("x"===Q&&1===O.length&&"0"===O[0])return P=F,O.push(Q),S=Q,H+1;if(/[^\d]/.test(Q))return C(O.join("")),P=d,H;O.push(Q);S=Q;return H+1}function N(){"f"===Q&&(O.push(Q),S=Q,H+=1);if(/[eE]/.test(Q)||("-"===Q||"+"===Q)&&/[eE]/.test(S))return O.push(Q),S=Q,H+1;if(/[^\d]/.test(Q))return C(O.join("")),P=d,H;O.push(Q);S=Q;return H+1}var H=0,L=
0,P=d,Q,S,O=[],U=[],X=1,da=0,ea=0,ca=!1,ia=!1,ha="",fa;B=B||{};var na=p,sa=n;"300 es"===B.version&&(na=a,sa=h);var ua={},ta={};for(H=0;H<na.length;H++)ua[na[H]]=!0;for(H=0;H<sa.length;H++)ta[sa[H]]=!0;return function(oa){U=[];if(null!==oa){H=0;oa.toString&&(oa=oa.toString());ha+=oa.replace(/\r\n/g,"\n");for(fa=ha.length;Q=ha[H],H<fa;){oa=H;switch(P){case l:"/"===Q&&"*"===S?(O.push(Q),C(O.join("")),P=d):(O.push(Q),S=Q);H+=1;break;case k:H=G();break;case c:H=G();break;case f:H=I();break;case g:H=K();
break;case F:/[^a-fA-F0-9]/.test(Q)?(C(O.join("")),P=d):(O.push(Q),S=Q,H+=1);break;case q:H=N();break;case e:if(/[^\d\w_]/.test(Q)){var va=O.join("");P=ta[va]?w:ua[va]?u:t;C(O.join(""));P=d}else O.push(Q),S=Q,H+=1;break;case x:/[^\s]/g.test(Q)?(C(O.join("")),P=d):(O.push(Q),S=Q,H+=1);break;case d:H=v()}if(oa!==H)switch(ha[oa]){case "\n":da=0;++X;break;default:++da}}L+=H;ha=ha.slice(H);return U}O.length&&C(O.join(""));P=E;C("(eof)");return U}};var n=b("./lib/literals"),m=b("./lib/operators"),p=b("./lib/builtins"),
h=b("./lib/literals-300es"),a=b("./lib/builtins-300es"),d=999,e=9999,l=0,k=1,c=2,f=3,g=4,q=5,t=6,u=7,w=8,x=9,E=10,F=11,z="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ")},{"./lib/builtins":408,"./lib/builtins-300es":407,"./lib/literals":410,"./lib/literals-300es":409,"./lib/operators":411}],407:[function(b,y,D){b=b("./builtins");b=b.slice().filter(function(n){return!/^(gl_|texture)/.test(n)});y.exports=b.concat("gl_VertexID gl_InstanceID gl_Position gl_PointSize gl_FragCoord gl_FrontFacing gl_FragDepth gl_PointCoord gl_MaxVertexAttribs gl_MaxVertexUniformVectors gl_MaxVertexOutputVectors gl_MaxFragmentInputVectors gl_MaxVertexTextureImageUnits gl_MaxCombinedTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformVectors gl_MaxDrawBuffers gl_MinProgramTexelOffset gl_MaxProgramTexelOffset gl_DepthRangeParameters gl_DepthRange trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" "))},
{"./builtins":408}],408:[function(b,y,D){y.exports="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")},
{}],409:[function(b,y,D){b=b("./literals");y.exports=b.slice().concat("layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray".split(" "))},
{"./literals":410}],410:[function(b,y,D){y.exports="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int uint void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")},
{}],411:[function(b,y,D){y.exports="\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")},{}],412:[function(b,y,D){var n=b("./index");y.exports=function(m,p){p=n(p);var h=[];h=h.concat(p(m));return h=h.concat(p(null))}},{"./index":406}],413:[function(b,y,D){y.exports=function(n){"string"===typeof n&&(n=[n]);for(var m=[].slice.call(arguments,
1),p=[],h=0;h<n.length-1;h++)p.push(n[h],m[h]||"");p.push(n[h]);return p.join("")}},{}],414:[function(b,y,D){D="undefined"!==typeof xa?xa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};b=b("is-browser");b="function"===typeof D.matchMedia?!D.matchMedia("(hover: none)").matches:b;y.exports=b},{"is-browser":438}],415:[function(b,y,D){function n(){var m=!1;try{var p=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,p);window.removeEventListener("test",
null,p)}catch(h){m=!1}return m}b=b("is-browser");y.exports=b&&n()},{"is-browser":438}],416:[function(b,y,D){D.read=function(n,m,p,h,a){var d=8*a-h-1;var e=(1<<d)-1,l=e>>1,k=-7;a=p?a-1:0;var c=p?-1:1,f=n[m+a];a+=c;p=f&(1<<-k)-1;f>>=-k;for(k+=d;0<k;p=256*p+n[m+a],a+=c,k-=8);d=p&(1<<-k)-1;p>>=-k;for(k+=h;0<k;d=256*d+n[m+a],a+=c,k-=8);if(0===p)p=1-l;else{if(p===e)return d?NaN:Infinity*(f?-1:1);d+=Math.pow(2,h);p-=l}return(f?-1:1)*d*Math.pow(2,p-h)};D.write=function(n,m,p,h,a,d){var e,l=8*d-a-1,k=(1<<
l)-1,c=k>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0;d=h?0:d-1;var g=h?1:-1,q=0>m||0===m&&0>1/m?1:0;m=Math.abs(m);isNaN(m)||Infinity===m?(m=isNaN(m)?1:0,h=k):(h=Math.floor(Math.log(m)/Math.LN2),1>m*(e=Math.pow(2,-h))&&(h--,e*=2),m=1<=h+c?m+f/e:m+f*Math.pow(2,1-c),2<=m*e&&(h++,e/=2),h+c>=k?(m=0,h=k):1<=h+c?(m=(m*e-1)*Math.pow(2,a),h+=c):(m=m*Math.pow(2,c-1)*Math.pow(2,a),h=0));for(;8<=a;n[p+d]=m&255,d+=g,m/=256,a-=8);h=h<<a|m;for(l+=a;0<l;n[p+d]=h&255,d+=g,h/=256,l-=8);n[p+d-g]|=128*q}},{}],417:[function(b,
y,D){var n=b("./types");y.exports=function(m,p){var h,a;for(h in n)if(a=n[h].detect(m,p))return h}},{"./types":420}],418:[function(b,y,D){(function(n){function m(k,c){var f=l(k,c);if(f in e&&(k=e[f].calculate(k,c),!1!==k))return k.type=f,k;throw new TypeError("unsupported file type: "+f+" (file: "+c+")");}function p(k,c){a.open(k,"r",function(f,g){if(f)return c(f);a.fstat(g,function(q,t){if(q)return c(q);q=t.size;if(0>=q)return c(Error("File size is not greater than 0  "+k));q=Math.min(q,524288);
var u=n.alloc(q);a.read(g,u,0,q,0,function(w){if(w)return c(w);a.close(g,function(x){c(x,u)})})})})}function h(k){k=a.openSync(k,"r");var c=a.fstatSync(k).size;c=Math.min(c,524288);var f=n.alloc(c);a.readSync(k,f,0,c,0);a.closeSync(k);return f}var a=b("fs"),d=b("path"),e=b("./types"),l=b("./detector");y.exports=function(k,c){if(n.isBuffer(k))return m(k);if("string"!==typeof k)throw new TypeError("invalid invocation");var f=d.resolve(k);if("function"===typeof c)p(f,function(g,q){if(g)return c(g);try{var t=
m(q,f)}catch(u){g=u}c(g,t)});else return k=h(f),m(k,f)};y.exports.types=Object.keys(e)}).call(this,b("buffer").Buffer)},{"./detector":417,"./types":420,buffer:111,fs:109,path:481}],419:[function(b,y,D){y.exports=function(n,m,p,h){return n["readUInt"+m+(h?"BE":"LE")].call(n,p||0)}},{}],420:[function(b,y,D){b={bmp:b("./types/bmp"),cur:b("./types/cur"),dds:b("./types/dds"),gif:b("./types/gif"),icns:b("./types/icns"),ico:b("./types/ico"),jpg:b("./types/jpg"),png:b("./types/png"),psd:b("./types/psd"),
svg:b("./types/svg"),tiff:b("./types/tiff"),webp:b("./types/webp")};y.exports=b},{"./types/bmp":421,"./types/cur":422,"./types/dds":423,"./types/gif":424,"./types/icns":425,"./types/ico":426,"./types/jpg":427,"./types/png":428,"./types/psd":429,"./types/svg":430,"./types/tiff":431,"./types/webp":432}],421:[function(b,y,D){y.exports={detect:function(n){return"BM"===n.toString("ascii",0,2)},calculate:function(n){return{width:n.readUInt32LE(18),height:Math.abs(n.readInt32LE(22))}}}},{}],422:[function(b,
y,D){y.exports={detect:function(n){return 0!==n.readUInt16LE(0)?!1:2===n.readUInt16LE(2)},calculate:b("./ico").calculate}},{"./ico":426}],423:[function(b,y,D){y.exports={detect:function(n){return 542327876===n.readUInt32LE(0)},calculate:function(n){return{height:n.readUInt32LE(12),width:n.readUInt32LE(16)}}}},{}],424:[function(b,y,D){var n=/^GIF8[79]a/;y.exports={detect:function(m){m=m.toString("ascii",0,6);return n.test(m)},calculate:function(m){return{width:m.readUInt16LE(6),height:m.readUInt16LE(8)}}}},
{}],425:[function(b,y,D){function n(h,a){var d=a+4;return[h.toString("ascii",a,d),h.readUInt32BE(d)]}function m(h){var a=p[h];return{width:a,height:a,type:h}}var p={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};y.exports={detect:function(h){return"icns"===h.toString("ascii",0,4)},calculate:function(h){var a=
h.length,d=8,e=h.readUInt32BE(4),l;var k=n(h,d);var c=m(k[0]);d+=k[1];if(d===e)return c;for(l={width:c.width,height:c.height,images:[c]};d<e&&d<a;)k=n(h,d),c=m(k[0]),d+=k[1],l.images.push(c);return l}}},{}],426:[function(b,y,D){function n(p,h){p=p.readUInt8(h);return 0===p?256:p}function m(p,h){h=6+16*h;return{width:n(p,h),height:n(p,h+1)}}y.exports={detect:function(p){return 0!==p.readUInt16LE(0)?!1:1===p.readUInt16LE(2)},calculate:function(p){var h=p.readUInt16LE(4),a=m(p,0),d;if(1===h)return a;
a.images=[{width:a.width,height:a.height}];for(d=1;d<h;d+=1)a.images.push(m(p,d));return a}}},{}],427:[function(b,y,D){var n=b("../readUInt");y.exports={detect:function(m){return"ffd8"===m.toString("hex",0,2)},calculate:function(m){m=m.slice(4);for(var p,h,a;m.length;){h=m.readUInt16BE(0);if("45786966"===m.toString("hex",2,6)){p=m.slice(2,h);var d=p.toString("hex",6,8);a="4d4d"===d;d="4949"===d;if(a||d)b:{d=n(p,16,14,a);for(var e=0;e<d;e++){var l=16+12*e;var k=l+12;if(l>p.length)break;k=p.slice(l,
k);if(274===n(k,16,0,a)){if(3!==n(k,16,2,a))break;if(1!==n(k,32,4,a))break;p=n(k,16,8,a);break b}}p=void 0}else p=void 0}a=m;d=h;if(d>a.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==a[d])throw new TypeError("Invalid JPG, marker table corrupted");a=m[h+1];if(192===a||193===a||194===a)return h+=5,h={height:m.readUInt16BE(h),width:m.readUInt16BE(h+2)},p?{width:h.width,height:h.height,orientation:p}:h;m=m.slice(h+2)}throw new TypeError("Invalid JPG, no size found");}}},{"../readUInt":419}],
428:[function(b,y,D){y.exports={detect:function(n){if("PNG\r\n\n"===n.toString("ascii",1,8)){var m=n.toString("ascii",12,16);"CgBI"===m&&(m=n.toString("ascii",28,32));if("IHDR"!==m)throw new TypeError("invalid png");return!0}},calculate:function(n){return"CgBI"===n.toString("ascii",12,16)?{width:n.readUInt32BE(32),height:n.readUInt32BE(36)}:{width:n.readUInt32BE(16),height:n.readUInt32BE(20)}}}},{}],429:[function(b,y,D){y.exports={detect:function(n){return"8BPS"===n.toString("ascii",0,4)},calculate:function(n){return{width:n.readUInt32BE(18),
height:n.readUInt32BE(14)}}}},{}],430:[function(b,y,D){function n(e){if(e=/([0-9.]+)([a-z]*)/.exec(e))return Math.round(parseFloat(e[1])*(d[e[2]]||1))}var m=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,p=/\swidth=(['"])([^%]+?)\1/,h=/\sheight=(['"])([^%]+?)\1/,a=/\sviewBox=(['"])(.+?)\1/,d={cm:96/2.54,mm:96/2.54/10,m:96/2.54*100,pt:96/72,pc:96/72/12,em:16,ex:8};y.exports={detect:function(e){return m.test(e)},calculate:function(e){if(e=e.toString("utf8").match(m)){var l=e[0];e=l.match(p);var k=l.match(h);l=
l.match(a);e=e&&n(e[2]);k=k&&n(k[2]);var c;if(c=l)l=l[2].split(" "),c={width:n(l[2]),height:n(l[3])};l=c;if(e&&k)return{width:e,height:k};if(l)return c=l.width/l.height,e=e?{width:e,height:Math.floor(e/c)}:k?{width:Math.floor(k*c),height:k}:{width:l.width,height:l.height},e}throw new TypeError("invalid svg");}}},{}],431:[function(b,y,D){(function(n){var m=b("fs"),p=b("../readUInt");y.exports={detect:function(h){h=h.toString("hex",0,4);return"49492a00"===h||"4d4d002a"===h},calculate:function(h,a){if(!a)throw new TypeError("Tiff doesn't support buffer");
var d=h.toString("ascii",0,2);d="BE"===("II"===d?"LE":"MM"===d?"BE":void 0);h=p(h,32,4,d);var e=1024,l=m.statSync(a).size;h+e>l&&(e=l-h-10);l=n.alloc(e);a=m.openSync(a,"r");m.readSync(a,l,0,e,h);h=l.slice(2);a={};for(var k;h&&h.length&&(e=p(h,16,0,d),l=p(h,16,2,d),k=p(h,32,4,d),0!==e);){if(1===k&&(3===l||4===l)){l=h;k=d;var c=p(l,16,8,k);l=(p(l,16,10,k)<<16)+c;a[e]=l}h=24<h.length?h.slice(12):void 0}d=a[256];a=a[257];if(!d||!a)throw new TypeError("Invalid Tiff, missing tags");return{width:d,height:a}}}}).call(this,
b("buffer").Buffer)},{"../readUInt":419,buffer:111,fs:109}],432:[function(b,y,D){y.exports={detect:function(n){var m="RIFF"===n.toString("ascii",0,4),p="WEBP"===n.toString("ascii",8,12);n="VP8"===n.toString("ascii",12,15);return m&&p&&n},calculate:function(n){var m=n.toString("ascii",12,16);n=n.slice(20,30);if("VP8X"===m)return m=n[0],0===(m&192)&&0===(m&1)?{width:1+n.readUIntLE(4,3),height:1+n.readUIntLE(7,3)}:!1;if("VP8 "===m&&47!==n[0])return{width:n.readInt16LE(6)&16383,height:n.readInt16LE(8)&
16383};var p=n.toString("hex",3,6);return"VP8L"===m&&"9d012a"!==p?{width:1+((n[2]&63)<<8|n[1]),height:1+((n[4]&15)<<10|n[3]<<2|(n[2]&192)>>6)}:!1}}},{}],433:[function(b,y,D){function n(k,c,f){this.vertices=k;this.adjacent=c;this.boundary=f;this.lastVisited=-1}function m(k,c,f){this.vertices=k;this.cell=c;this.index=f}function p(k,c){return e(k.vertices,c.vertices)}function h(k){for(var c=["function orient(){var tuple\x3dthis.tuple;return test("],f=0;f<=k;++f)0<f&&c.push(","),c.push("tuple[",f,"]");
c.push(")}return orient");c=new Function("test",c.join(""));(k=d[k+1])||(k=d);return c(k)}function a(k,c,f){this.dimension=k;this.vertices=c;this.simplices=f;this.interior=f.filter(function(g){return!g.boundary});this.tuple=Array(k+1);for(c=0;c<=k;++c)this.tuple[c]=this.vertices[c];(c=l[k])||(c=l[k]=h(k));this.orient=c}y.exports=function(k,c){var f=k.length;if(0===f)throw Error("Must have at least d+1 points");var g=k[0].length;if(f<=g)throw Error("Must input at least d+1 points");var q=k.slice(0,
g+1),t=d.apply(void 0,q);if(0===t)throw Error("Input not in general position");for(var u=Array(g+1),w=0;w<=g;++w)u[w]=w;0>t&&(u[0]=1,u[1]=0);t=new n(u,Array(g+1),!1);var x=t.adjacent,E=Array(g+2);for(w=0;w<=g;++w){for(var F=u.slice(),z=0;z<=g;++z)z===w&&(F[z]=-1);z=F[0];F[0]=F[1];F[1]=z;F=new n(F,Array(g+1),!0);x[w]=F;E[w]=F}E[g+1]=t;for(w=0;w<=g;++w)for(F=x[w].vertices,u=x[w].adjacent,z=0;z<=g;++z){var B=F[z];if(0>B)u[z]=t;else for(var C=0;C<=g;++C)0>x[C].vertices.indexOf(B)&&(u[z]=x[C])}q=new a(g,
q,E);c=!!c;for(w=g+1;w<f;++w)q.insert(k[w],c);return q.boundary()};var d=b("robust-orientation"),e=b("simplicial-complex").compareCells;n.prototype.flip=function(){var k=this.vertices[0];this.vertices[0]=this.vertices[1];this.vertices[1]=k;k=this.adjacent[0];this.adjacent[0]=this.adjacent[1];this.adjacent[1]=k};var l=[];b=a.prototype;b.handleBoundaryDegeneracy=function(k,c){var f=this.dimension,g=this.vertices.length-1,q=this.tuple,t=this.vertices,u=[k];for(k.lastVisited=-g;0<u.length;){k=u.pop();
k=k.adjacent;for(var w=0;w<=f;++w){var x=k[w];if(x.boundary&&!(x.lastVisited<=-g)){for(var E=x.vertices,F=0;F<=f;++F){var z=E[F];q[F]=0>z?c:t[z]}E=this.orient();if(0<E)return x;x.lastVisited=-g;0===E&&u.push(x)}}}return null};b.walk=function(k,c){var f=this.vertices.length-1,g=this.dimension,q=this.vertices,t=this.tuple,u=this.interior[c?this.interior.length*Math.random()|0:this.interior.length-1];a:for(;!u.boundary;){var w=u.vertices;c=u.adjacent;for(var x=0;x<=g;++x)t[x]=q[w[x]];u.lastVisited=f;
for(x=0;x<=g;++x)if(u=c[x],!(u.lastVisited>=f)){w=t[x];t[x]=k;var E=this.orient();t[x]=w;if(0>E)continue a;else u.lastVisited=u.boundary?-f:f}return}return u};b.addPeaks=function(k,c){var f=this.vertices.length-1,g=this.dimension,q=this.vertices,t=this.tuple,u=this.interior,w=this.simplices,x=[c];c.lastVisited=f;c.vertices[c.vertices.indexOf(-1)]=f;c.boundary=!1;u.push(c);for(var E=[];0<x.length;){c=x.pop();var F=c.vertices,z=c.adjacent,B=F.indexOf(f);if(!(0>B))for(var C=0;C<=g;++C)if(C!==B){var v=
z[C];if(v.boundary&&!(v.lastVisited>=f)){var G=v.vertices;if(v.lastVisited!==-f){for(var I=0,J=0;J<=g;++J)0>G[J]?(I=J,t[J]=k):t[J]=q[G[J]];if(0<this.orient()){G[I]=f;v.boundary=!1;u.push(v);x.push(v);v.lastVisited=f;continue}else v.lastVisited=-f}J=v.adjacent;G=F.slice();var K=z.slice();I=new n(G,K,!0);w.push(I);var N=J.indexOf(c);if(!(0>N))for(J[N]=I,K[B]=v,G[C]=-1,K[C]=c,z[C]=I,I.flip(),J=0;J<=g;++J)if(v=G[J],!(0>v||v===f)){v=Array(g-1);for(N=K=0;N<=g;++N){var H=G[N];0>H||N===J||(v[K++]=H)}E.push(new m(v,
I,J))}}}}E.sort(p);for(C=0;C+1<E.length;C+=2)k=E[C],c=E[C+1],f=c.index,0>k.index||0>f||(k.cell.adjacent[k.index]=c.cell,c.cell.adjacent[c.index]=k.cell)};b.insert=function(k,c){var f=this.vertices;f.push(k);if(c=this.walk(k,c)){for(var g=this.dimension,q=this.tuple,t=0;t<=g;++t){var u=c.vertices[t];q[t]=0>u?k:f[u]}f=this.orient(q);if(!(0>f)){if(0===f&&(c=this.handleBoundaryDegeneracy(c,k),!c))return;this.addPeaks(k,c)}}};b.boundary=function(){for(var k=this.dimension,c=[],f=this.simplices,g=f.length,
q=0;q<g;++q){var t=f[q];if(t.boundary){var u=Array(k);t=t.vertices;for(var w=0,x=0,E=0;E<=k;++E)0<=t[E]?u[w++]=t[E]:x=E&1;x===(k&1)&&(t=u[0],u[0]=u[1],u[1]=t);c.push(u)}}return c}},{"robust-orientation":520,"simplicial-complex":530}],434:[function(b,y,D){function n(t,u,w,x,E){this.mid=t;this.left=u;this.right=w;this.leftPoints=x;this.rightPoints=E;this.count=(u?u.count:0)+(w?w.count:0)+x.length}function m(t,u){t.mid=u.mid;t.left=u.left;t.right=u.right;t.leftPoints=u.leftPoints;t.rightPoints=u.rightPoints;
t.count=u.count}function p(t,u){u=f(u);t.mid=u.mid;t.left=u.left;t.right=u.right;t.leftPoints=u.leftPoints;t.rightPoints=u.rightPoints;t.count=u.count}function h(t,u){var w=t.intervals([]);u=w.indexOf(u);if(0>u)return 0;w.splice(u,1);p(t,w);return 1}function a(t,u,w){for(var x=0;x<t.length&&t[x][0]<=u;++x){var E=w(t[x]);if(E)return E}}function d(t,u,w){for(var x=t.length-1;0<=x&&t[x][1]>=u;--x){var E=w(t[x]);if(E)return E}}function e(t,u){for(var w=0;w<t.length;++w){var x=u(t[w]);if(x)return x}}function l(t,
u){return t-u}function k(t,u){var w=t[0]-u[0];return w?w:t[1]-u[1]}function c(t,u){var w=t[1]-u[1];return w?w:t[0]-u[0]}function f(t){if(0===t.length)return null;for(var u=[],w=0;w<t.length;++w)u.push(t[w][0],t[w][1]);u.sort(l);u=u[u.length>>1];var x=[],E=[],F=[];for(w=0;w<t.length;++w){var z=t[w];z[1]<u?x.push(z):u<z[0]?E.push(z):F.push(z)}t=F.slice();F.sort(k);t.sort(c);return new n(u,f(x),f(E),F,t)}function g(t){this.root=t}var q=b("binary-search-bounds");y.exports=function(t){return t&&0!==t.length?
new g(f(t)):new g(null)};b=n.prototype;b.intervals=function(t){t.push.apply(t,this.leftPoints);this.left&&this.left.intervals(t);this.right&&this.right.intervals(t);return t};b.insert=function(t){var u=this.count-this.leftPoints.length;this.count+=1;if(t[1]<this.mid)this.left?4*(this.left.count+1)>3*(u+1)?(u=this.intervals([]),u.push(t),p(this,u)):this.left.insert(t):this.left=f([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(u+1)?(u=this.intervals([]),u.push(t),p(this,u)):this.right.insert(t):
this.right=f([t]);else{u=q.ge(this.leftPoints,t,k);var w=q.ge(this.rightPoints,t,c);this.leftPoints.splice(u,0,t);this.rightPoints.splice(w,0,t)}};b.remove=function(t){var u=this.count-this.leftPoints;if(t[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(u-1))return h(this,t);u=this.left.remove(t);if(2===u)return this.left=null,--this.count,1;1===u&&--this.count;return u}if(t[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(u-1))return h(this,t);
u=this.right.remove(t);if(2===u)return this.right=null,--this.count,1;1===u&&--this.count;return u}if(1===this.count)return this.leftPoints[0]===t?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){t=this;for(var w=this.left;w.right;)t=w,w=w.right;if(t===this)w.right=this.right;else{var x=this.left;u=this.right;t.count-=w.count;t.right=w.left;w.left=x;w.right=u}m(this,w);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
m(this,this.left):m(this,this.right);return 1}for(x=q.ge(this.leftPoints,t,k);x<this.leftPoints.length&&this.leftPoints[x][0]===t[0];++x)if(this.leftPoints[x]===t)for(--this.count,this.leftPoints.splice(x,1),u=q.ge(this.rightPoints,t,c);u<this.rightPoints.length&&this.rightPoints[u][1]===t[1];++u)if(this.rightPoints[u]===t)return this.rightPoints.splice(u,1),1;return 0};b.queryPoint=function(t,u){if(t<this.mid){if(this.left){var w=this.left.queryPoint(t,u);if(w)return w}return a(this.leftPoints,t,
u)}return t>this.mid?this.right&&(w=this.right.queryPoint(t,u))?w:d(this.rightPoints,t,u):e(this.leftPoints,u)};b.queryInterval=function(t,u,w){if(t<this.mid&&this.left){var x=this.left.queryInterval(t,u,w);if(x)return x}return u>this.mid&&this.right&&(x=this.right.queryInterval(t,u,w))?x:u<this.mid?a(this.leftPoints,u,w):t>this.mid?d(this.rightPoints,t,w):e(this.leftPoints,w)};b=g.prototype;b.insert=function(t){this.root?this.root.insert(t):this.root=new n(t[0],null,null,[t],[t])};b.remove=function(t){return this.root?
(t=this.root.remove(t),2===t&&(this.root=null),0!==t):!1};b.queryPoint=function(t,u){if(this.root)return this.root.queryPoint(t,u)};b.queryInterval=function(t,u,w){if(t<=u&&this.root)return this.root.queryInterval(t,u,w)};Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":435}],435:[function(b,y,D){arguments[4][243][0].apply(D,arguments)},{dup:243}],
436:[function(b,y,D){y.exports=function(n,m){m=m||Array(n.length);for(var p=0;p<n.length;++p)m[n[p]]=p;return m}},{}],437:[function(b,y,D){y.exports=function(n){for(var m=Array(n),p=0;p<n;++p)m[p]=p;return m}},{}],438:[function(b,y,D){y.exports=!0},{}],439:[function(b,y,D){function n(m){return!!m.constructor&&"function"===typeof m.constructor.isBuffer&&m.constructor.isBuffer(m)}y.exports=function(m){return null!=m&&(n(m)||"function"===typeof m.readFloatLE&&"function"===typeof m.slice&&n(m.slice(0,
0))||!!m._isBuffer)}},{}],440:[function(b,y,D){y.exports="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],441:[function(b,y,D){function n(h){h||(h={});var a=h.ua;a||"undefined"===typeof navigator||(a=navigator.userAgent);a&&a.headers&&"string"===typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]);if("string"!==typeof a)return!1;var d=h.tablet?p.test(a):m.test(a);!d&&h.tablet&&h.featureDetect&&navigator&&1<navigator.maxTouchPoints&&
-1!==a.indexOf("Macintosh")&&-1!==a.indexOf("Safari")&&(d=!0);return d}y.exports=n;y.exports.isMobile=n;y.exports.default=n;var m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,p=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i},
{}],442:[function(b,y,D){y.exports=function(n){var m=typeof n;return null!==n&&("object"===m||"function"===m)}},{}],443:[function(b,y,D){var n=Object.prototype.toString;y.exports=function(m){var p;return"[object Object]"===n.call(m)&&(p=Object.getPrototypeOf(m),null===p||p===Object.getPrototypeOf({}))}},{}],444:[function(b,y,D){y.exports=function(n){for(var m=n.length,p,h=0;h<m;h++)if(p=n.charCodeAt(h),(9>p||13<p)&&32!==p&&133!==p&&160!==p&&5760!==p&&6158!==p&&(8192>p||8205<p)&&8232!==p&&8233!==p&&
8239!==p&&8287!==p&&8288!==p&&12288!==p&&65279!==p)return!1;return!0}},{}],445:[function(b,y,D){y.exports=function(n){if("string"!==typeof n)return!1;n=n.trim();return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(n)&&/[\dz]$/i.test(n)&&4<n.length?!0:!1}},{}],446:[function(b,y,D){y.exports=function(n,m,p){return n*(1-p)+m*p}},{}],447:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?y.exports=m():(n=n||self,n.mapboxgl=m())})(this,function(){function n(a,d){if(m)if(p){a="var sharedChunk \x3d {}; ("+
m+")(sharedChunk); ("+p+")(sharedChunk);";var e={};m(e);h=d(e);h.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else p=d;else m=d}var m,p,h;n(["exports"],function(a){function d(r,A){return r(A={exports:{}},A.exports),A.exports}function e(r,A,M,W){this.cx=3*r;this.bx=3*(M-r)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*A;this.by=3*(W-A)-this.cy;this.ay=1-this.cy-this.by;this.p1x=r;this.p1y=W;this.p2x=M;this.p2y=W}function l(r,A){this.x=r;this.y=A}function k(r,A,M,W){var ka=
new yj(r,A,M,W);return function(wa){return ka.solve(wa)}}function c(r,A,M){return Math.min(M,Math.max(A,r))}function f(r,A,M){var W=M-A;r=((r-A)%W+W)%W+A;return r===A?M:r}function g(r){for(var A=[],M=arguments.length-1;0<M--;)A[M]=arguments[M+1];for(M=0;M<A.length;M+=1){var W=A[M],ka;for(ka in W)r[ka]=W[ka]}return r}function q(){return function M(A){return A?(A^16*Math.random()>>A/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,M)}()}function t(r){return!!r&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(r)}
function u(r,A){r.forEach(function(M){A[M]&&(A[M]=A[M].bind(A))})}function w(r,A){return-1!==r.indexOf(A,r.length-A.length)}function x(r,A,M){var W={},ka;for(ka in r)W[ka]=A.call(M||this,r[ka],ka,r);return W}function E(r,A,M){var W={},ka;for(ka in r)A.call(M||this,r[ka],ka,r)&&(W[ka]=r[ka]);return W}function F(r){return Array.isArray(r)?r.map(F):"object"==typeof r&&r?x(r,F):r}function z(r){cg[r]||("undefined"!=typeof console&&console.warn(r),cg[r]=!0)}function B(r,A,M){return(M.y-r.y)*(A.x-r.x)>(A.y-
r.y)*(M.x-r.x)}function C(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function v(r){var A={};if(r.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,function(M,W,ka,wa){M=ka||wa;return A[W]=!M||M.toLowerCase(),""}),A["max-age"])r=parseInt(A["max-age"],10),isNaN(r)?delete A["max-age"]:A["max-age"]=r;return A}function G(r){if(null==Qh){var A=
r.navigator?r.navigator.userAgent:null;Qh=!!r.safari||!(!A||!(/\b(iPad|iPhone|iPod)\b/.test(A)||A.match("Safari")&&!A.match("Chrome")))}return Qh}function I(r){try{var A=self[r];return A.setItem("_mapbox_test_",1),A.removeItem("_mapbox_test_"),!0}catch(M){return!1}}function J(r){var A=r.createTexture();r.bindTexture(r.TEXTURE_2D,A);try{if(r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,bh),r.isContextLost())return;Qg.supported=!0}catch(M){}r.deleteTexture(A);Th=!0}function K(r){return 0===
r.indexOf("mapbox:")}function N(r){r=r.match(Ui);if(!r)throw Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("\x26"):[]}}function H(r){var A=r.params.length?"?"+r.params.join("\x26"):"";return r.protocol+"://"+r.authority+r.path+A}function L(r){if(!r)return null;r=r.split(".");if(!r||3!==r.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(r[1]).split("").map(function(A){return"%"+("00"+A.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(A){return null}}
function P(){self.caches&&!dh&&(dh=self.caches.open("mapbox-tiles"))}function Q(r){var A=r.indexOf("?");return 0>A?r:r.slice(0,A)}function S(){return null==aa&&(aa=self.OffscreenCanvas&&(new self.OffscreenCanvas(1,1)).getContext("2d")&&"function"==typeof self.createImageBitmap),aa}function O(r,A,M){M[r]&&-1!==M[r].indexOf(A)||(M[r]=M[r]||[],M[r].push(A))}function U(r,A,M){M&&M[r]&&(A=M[r].indexOf(A),-1!==A&&M[r].splice(A,1))}function X(r){var A=r.value;return A?[new Aa(r.key,A,"constants have been deprecated as of v8")]:
[]}function da(r){for(var A=[],M=arguments.length-1;0<M--;)A[M]=arguments[M+1];for(M=0;M<A.length;M+=1){var W=A[M],ka;for(ka in W)r[ka]=W[ka]}return r}function ea(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function ca(r){if(Array.isArray(r))return r.map(ca);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){var A={},M;for(M in r)A[M]=ca(r[M]);return A}return ea(r)}function ia(r,A){return{kind:"array",itemType:r,N:A}}
function ha(r){if("array"===r.kind){var A=ha(r.itemType);return"number"==typeof r.N?"array\x3c"+A+", "+r.N+"\x3e":"value"===r.itemType.kind?"array":"array\x3c"+A+"\x3e"}return r.kind}function fa(r,A){if("error"===A.kind)return null;if("array"===r.kind){if("array"===A.kind&&(0===A.N&&"value"===A.itemType.kind||!fa(r.itemType,A.itemType))&&("number"!=typeof r.N||r.N===A.N))return null}else{if(r.kind===A.kind)return null;if("value"===r.kind)for(var M=0,W=Cd;M<W.length;M+=1)if(!fa(W[M],A))return null}return"Expected "+
ha(r)+" but found "+ha(A)+" instead."}function na(r,A){return A.some(function(M){return M.kind===r.kind})}function sa(r,A){return A.some(function(M){return"null"===M?null===r:"array"===M?Array.isArray(r):"object"===M?r&&!Array.isArray(r)&&"object"==typeof r:M===typeof r})}function ua(r,A,M,W){return"number"==typeof r&&0<=r&&255>=r&&"number"==typeof A&&0<=A&&255>=A&&"number"==typeof M&&0<=M&&255>=M?void 0===W||"number"==typeof W&&0<=W&&1>=W?null:"Invalid rgba value ["+[r,A,M,W].join(", ")+"]: 'a' must be between 0 and 1.":
"Invalid rgba value ["+("number"==typeof W?[r,A,M,W]:[r,A,M]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ta(r){if(null===r||"string"==typeof r||"boolean"==typeof r||"number"==typeof r||r instanceof Ed||r instanceof Sd||r instanceof Zd||r instanceof me)return!0;if(Array.isArray(r)){for(var A=0;A<r.length;A+=1)if(!ta(r[A]))return!1;return!0}if("object"==typeof r){for(A in r)if(!ta(r[A]))return!1;return!0}return!1}function oa(r){if(null===r)return hb;if("string"==typeof r)return Mb;
if("boolean"==typeof r)return Tb;if("number"==typeof r)return ub;if(r instanceof Ed)return uc;if(r instanceof Sd)return ad;if(r instanceof Zd)return kd;if(r instanceof me)return td;if(Array.isArray(r)){for(var A,M=r.length,W=0;W<r.length;W+=1){var ka=oa(r[W]);if(A){if(A===ka)continue;A=nc;break}A=ka}return ia(A||nc,M)}return kc}function va(r){var A=typeof r;return null===r?"":"string"===A||"number"===A||"boolean"===A?String(r):r instanceof Ed||r instanceof Zd||r instanceof me?r.toString():JSON.stringify(r)}
function ma(r,A){r[0]=Math.min(r[0],A[0]);r[1]=Math.min(r[1],A[1]);r[2]=Math.max(r[2],A[0]);r[3]=Math.max(r[3],A[1])}function pa(r,A){return!(r[0]<=A[0]||r[2]>=A[2]||r[1]<=A[1]||r[3]>=A[3])}function za(r,A){for(var M,W,ka,wa,Fa,Ua,bb,qb=!1,Bb=0,Rb=A.length;Bb<Rb;Bb++)for(var $b=A[Bb],hc=0,rc=$b.length;hc<rc-1;hc++){if(0==(wa=(M=r)[0]-(W=$b[hc])[0])*(bb=M[1]-(ka=$b[hc+1])[1])-(Ua=M[0]-ka[0])*(Fa=M[1]-W[1])&&0>=wa*Ua&&0>=Fa*bb)return!1;var Kb=$b[hc],Pb=$b[hc+1];Kb[1]>r[1]!=Pb[1]>r[1]&&r[0]<(Pb[0]-Kb[0])*
(r[1]-Kb[1])/(Pb[1]-Kb[1])+Kb[0]&&(qb=!qb)}return qb}function qa(r,A,M,W){var ka=W[0]-M[0];W=W[1]-M[1];r=(r[0]-M[0])*W-ka*(r[1]-M[1]);A=(A[0]-M[0])*W-ka*(A[1]-M[1]);return 0<r&&0>A||0>r&&0<A}function Ca(r,A){for(var M=0;M<r.length;++M)if(!za(r[M],A))return!1;for(M=0;M<r.length-1;++M){var W;a:{for(var ka=W=void 0,wa=void 0,Fa=void 0,Ua=void 0,bb=void 0,qb=r[M],Bb=r[M+1],Rb=0,$b=A;Rb<$b.length;Rb+=1)for(var hc=$b[Rb],rc=0;rc<hc.length-1;++rc)if(0!=(ka=[(wa=hc[rc+1])[0]-(Fa=hc[rc])[0],wa[1]-Fa[1]])[0]*
(W=[(Ua=Bb)[0]-(bb=qb)[0],Ua[1]-bb[1]])[1]-ka[1]*W[0]&&qa(bb,Ua,Fa,wa)&&qa(Fa,wa,bb,Ua)){W=!0;break a}W=!1}if(W)return!1}return!0}function Ka(r,A,M){for(var W=[],ka=0;ka<r.length;ka++){for(var wa=[],Fa=0;Fa<r[ka].length;Fa++){var Ua=r[ka][Fa];var bb=Math.pow(2,M.z);Ua=[Math.round((180+Ua[0])/360*bb*8192),Math.round((180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Ua[1]*Math.PI/360)))/360*bb*8192)];ma(A,Ua);wa.push(Ua)}W.push(wa)}return W}function Oa(r,A,M){for(var W=[],ka=0;ka<r.length;ka++){var wa=Ka(r[ka],
A,M);W.push(wa)}return W}function kb(r,A,M,W){if(r[0]<M[0]||r[0]>M[2]){var ka=.5*W,wa=r[0]-M[0]>ka?-W:M[0]-r[0]>ka?W:0;0===wa&&(wa=r[0]-M[2]>ka?-W:M[2]-r[0]>ka?W:0);r[0]+=wa}ma(A,r)}function mb(r,A,M,W){var ka=8192*Math.pow(2,W.z);W=[8192*W.x,8192*W.y];for(var wa=[],Fa=0;Fa<r.length;Fa+=1)for(var Ua=0,bb=r[Fa];Ua<bb.length;Ua+=1){var qb=bb[Ua];qb=[qb.x+W[0],qb.y+W[1]];kb(qb,A,M,ka);wa.push(qb)}return wa}function tb(r,A,M,W){var ka=8192*Math.pow(2,W.z),wa=[8192*W.x,8192*W.y];W=[];for(var Fa=0;Fa<r.length;Fa+=
1){for(var Ua=[],bb=0,qb=r[Fa];bb<qb.length;bb+=1){var Bb=qb[bb];Bb=[Bb.x+wa[0],Bb.y+wa[1]];ma(A,Bb);Ua.push(Bb)}W.push(Ua)}if(A[2]-A[0]<=ka/2)for(A[0]=A[1]=1/0,A[2]=A[3]=-1/0,r=0;r<W.length;r+=1)for(wa=0,Fa=W[r];wa<Fa.length;wa+=1)kb(Fa[wa],A,M,ka);return W}function nb(r){if(r instanceof Le&&("get"===r.name&&1===r.args.length||"feature-state"===r.name||"has"===r.name&&1===r.args.length||"properties"===r.name||"geometry-type"===r.name||"id"===r.name||/^filter-/.test(r.name))||r instanceof of)return!1;
var A=!0;return r.eachChild(function(M){A&&!nb(M)&&(A=!1)}),A}function Ta(r){if(r instanceof Le&&"feature-state"===r.name)return!1;var A=!0;return r.eachChild(function(M){A&&!Ta(M)&&(A=!1)}),A}function fb(r,A){if(r instanceof Le&&0<=A.indexOf(r.name))return!1;var M=!0;return r.eachChild(function(W){M&&!fb(W,A)&&(M=!1)}),M}function ab(r,A){for(var M,W=r.length-1,ka=0,wa=W,Fa;ka<=wa;)if((M=r[Fa=Math.floor((ka+wa)/2)])<=A){if(Fa===W||A<r[Fa+1])return Fa;ka=Fa+1}else{if(!(M>A))throw new he("Input is not a number.");
wa=Fa-1}return 0}function ra(r,A,M){return r*(1-M)+A*M}function Ea(r){return.008856451679035631<r?Math.pow(r,1/3):r/Sg+4/29}function Ia(r){return r>6/29?r*r*r:Sg*(r-4/29)}function Va(r){return 255*(.0031308>=r?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function rb(r){return.04045>=(r/=255)?r/12.92:Math.pow((r+.055)/1.055,2.4)}function ib(r){var A=rb(r.r),M=rb(r.g),W=rb(r.b),ka=Ea((.4124564*A+.3575761*M+.1804375*W)/.95047),wa=Ea(.2126729*A+.7151522*M+.072175*W);return{l:116*wa-16,a:500*(ka-wa),b:200*(wa-
Ea((.0193339*A+.119192*M+.9503041*W)/1.08883)),alpha:r.a}}function Na(r){var A=(r.l+16)/116,M=isNaN(r.a)?A:A+r.a/500,W=isNaN(r.b)?A:A-r.b/200;return A=1*Ia(A),M=.95047*Ia(M),W=1.08883*Ia(W),new Ed(Va(3.2404542*M-1.5371385*A-.4985314*W),Va(-.969266*M+1.8760108*A+.041556*W),Va(.0556434*M-.2040259*A+1.0572252*W),r.alpha)}function Za(r,A,M,W){W-=M;r-=M;return 0===W?0:1===A?r/W:(Math.pow(A,r)-1)/(Math.pow(A,W)-1)}function eb(r,A){return"\x3d\x3d"===r||"!\x3d"===r?"boolean"===A.kind||"string"===A.kind||
"number"===A.kind||"null"===A.kind||"value"===A.kind:"string"===A.kind||"number"===A.kind||"value"===A.kind}function Ba(r,A,M,W){return 0===W.compare(A,M)}function Ma(r,A,M){var W="\x3d\x3d"!==r&&"!\x3d"!==r;return function(){function ka(wa,Fa,Ua){this.type=Tb;this.lhs=wa;this.rhs=Fa;this.collator=Ua;this.hasUntypedArgument="value"===wa.type.kind||"value"===Fa.type.kind}return ka.parse=function(wa,Fa){if(3!==wa.length&&4!==wa.length)return Fa.error("Expected two or three arguments.");var Ua=wa[0],
bb=Fa.parse(wa[1],1,nc);if(!bb)return null;if(!eb(Ua,bb.type))return Fa.concat(1).error('"'+Ua+"\" comparisons are not supported for type '"+ha(bb.type)+"'.");var qb=Fa.parse(wa[2],2,nc);if(!qb)return null;if(!eb(Ua,qb.type))return Fa.concat(2).error('"'+Ua+"\" comparisons are not supported for type '"+ha(qb.type)+"'.");if(bb.type.kind!==qb.type.kind&&"value"!==bb.type.kind&&"value"!==qb.type.kind)return Fa.error("Cannot compare types '"+ha(bb.type)+"' and '"+ha(qb.type)+"'.");W&&("value"===bb.type.kind&&
"value"!==qb.type.kind?bb=new Xe(qb.type,[bb]):"value"!==bb.type.kind&&"value"===qb.type.kind&&(qb=new Xe(bb.type,[qb])));Ua=null;if(4===wa.length){if("string"!==bb.type.kind&&"string"!==qb.type.kind&&"value"!==bb.type.kind&&"value"!==qb.type.kind)return Fa.error("Cannot use collator to compare non-string types.");if(!(Ua=Fa.parse(wa[3],3,ad)))return null}return new ka(bb,qb,Ua)},ka.prototype.evaluate=function(wa){var Fa=this.lhs.evaluate(wa),Ua=this.rhs.evaluate(wa);if(W&&this.hasUntypedArgument){var bb=
oa(Fa),qb=oa(Ua);if(bb.kind!==qb.kind||"string"!==bb.kind&&"number"!==bb.kind)throw new he('Expected arguments for "'+r+'" to be (string, string) or (number, number), but found ('+bb.kind+", "+qb.kind+") instead.");}return this.collator&&!W&&this.hasUntypedArgument&&(bb=oa(Fa),qb=oa(Ua),"string"!==bb.kind||"string"!==qb.kind)?A(wa,Fa,Ua):this.collator?M(wa,Fa,Ua,this.collator.evaluate(wa)):A(wa,Fa,Ua)},ka.prototype.eachChild=function(wa){wa(this.lhs);wa(this.rhs);this.collator&&wa(this.collator)},
ka.prototype.outputDefined=function(){return!0},ka.prototype.serialize=function(){var wa=[r];return this.eachChild(function(Fa){wa.push(Fa.serialize())}),wa},ka}()}function $a(r,A){var M=A[0],W=A[1],ka=A[2];A=A[3];M=M.evaluate(r);W=W.evaluate(r);ka=ka.evaluate(r);r=A?A.evaluate(r):1;if(A=ua(M,W,ka,r))throw new he(A);return new Ed(M/255*r,W/255*r,ka/255*r,r)}function lb(r,A){r=A[r];return void 0===r?null:r}function Ra(r){return{result:"error",value:r}}function jb(r){return"data-driven"===r["property-type"]||
"cross-faded-data-driven"===r["property-type"]}function Xa(r){return!!r.expression&&-1<r.expression.parameters.indexOf("zoom")}function pb(r){return!!r.expression&&r.expression.interpolated}function vb(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":null===r?"null":typeof r}function zb(r){return"object"==typeof r&&null!==r&&!Array.isArray(r)}function Jb(r){return r}function Zb(r,A,M){return void 0!==r?r:void 0!==A?A:void 0!==
M?M:void 0}function pc(r,A,M,W,ka){return Zb(typeof M===ka?W[M]:void 0,r.default,A.default)}function Ac(r,A,M){if("number"!==vb(M))return Zb(r.default,A.default);A=r.stops.length;if(1===A||M<=r.stops[0][0])return r.stops[0][1];if(M>=r.stops[A-1][0])return r.stops[A-1][1];M=ab(r.stops.map(function(W){return W[0]}),M);return r.stops[M][1]}function ed(r,A,M){var W=void 0!==r.base?r.base:1;if("number"!==vb(M))return Zb(r.default,A.default);var ka=r.stops.length;if(1===ka||M<=r.stops[0][0])return r.stops[0][1];
if(M>=r.stops[ka-1][0])return r.stops[ka-1][1];ka=ab(r.stops.map(function(Bb){return Bb[0]}),M);var wa=function(Bb,Rb,$b,hc){hc-=$b;Bb-=$b;return 0===hc?0:1===Rb?Bb/hc:(Math.pow(Rb,Bb)-1)/(Math.pow(Rb,hc)-1)}(M,W,r.stops[ka][0],r.stops[ka+1][0]),Fa=r.stops[ka][1],Ua=r.stops[ka+1][1],bb=ti[A.type]||Jb;if(r.colorSpace&&"rgb"!==r.colorSpace){var qb=Ch[r.colorSpace];bb=function(Bb,Rb){return qb.reverse(qb.interpolate(qb.forward(Bb),qb.forward(Rb),wa))}}return"function"==typeof Fa.evaluate?{evaluate:function(){for(var Bb=
[],Rb=arguments.length;Rb--;)Bb[Rb]=arguments[Rb];Rb=Fa.evaluate.apply(void 0,Bb);Bb=Ua.evaluate.apply(void 0,Bb);if(void 0!==Rb&&void 0!==Bb)return bb(Rb,Bb,wa)}}:bb(Fa,Ua,wa)}function Rc(r,A,M){return"color"===A.type?M=Ed.parse(M):"formatted"===A.type?M=Zd.fromString(M.toString()):"resolvedImage"===A.type?M=me.fromString(M.toString()):vb(M)===A.type||"enum"===A.type&&A.values[M]||(M=void 0),Zb(M,r.default,A.default)}function id(r){return Array.isArray(r)&&0<r.length&&"string"==typeof r[0]&&r[0]in
ng}function Tc(r,A){var M=ff;if(A){var W={color:uc,string:Mb,number:ub,enum:Mb,boolean:Tb,formatted:kd,resolvedImage:td};W="array"===A.type?ia(W[A.value]||nc,A.length):W[A.type]}else W=void 0;M=new M(ng,[],W);return(r=M.parse(r,void 0,void 0,void 0,A&&"string"===A.type?{typeAnnotation:"coerce"}:void 0))?{result:"success",value:new Ug(r,A)}:Ra(M.errors)}function wd(r,A){if("error"===(r=Tc(r,A)).result)return r;var M=r.value.expression,W=nb(M);if(!W&&!jb(A))return Ra([new Ha("","data expressions not supported")]);
var ka=fb(M,["zoom"]);return ka||Xa(A)?(M=function Ua(Fa){var bb=null;if(Fa instanceof Eh)bb=Ua(Fa.result);else if(Fa instanceof Dh)for(var qb=0,Bb=Fa.args;qb<Bb.length&&!(bb=Ua(Bb[qb]));qb+=1);else(Fa instanceof rf||Fa instanceof Lf)&&Fa.input instanceof Le&&"zoom"===Fa.input.name&&(bb=Fa);return bb instanceof Ha||Fa.eachChild(function(Rb){Rb=Ua(Rb);Rb instanceof Ha?bb=Rb:!bb&&Rb?bb=new Ha("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):bb&&Rb&&
bb!==Rb&&(bb=new Ha("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),bb}(M))||ka?M instanceof Ha?Ra([M]):M instanceof Lf&&!pb(A)?Ra([new Ha("",'"interpolate" expressions cannot be used with this property')]):{result:"success",value:M?new yf(W?"camera":"composite",r.value,M.labels,M instanceof Lf?M.interpolation:void 0):new fe(W?"constant":"source",r.value)}:Ra([new Ha("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):
Ra([new Ha("","zoom expressions not supported")])}function Fb(r){var A=r.key,M=r.value,W=r.valueSpec||{},ka=r.objectElementValidators||{},wa=r.style;r=r.styleSpec;var Fa=[],Ua=vb(M);if("object"!==Ua)return[new Aa(A,M,"object expected, "+Ua+" found")];for(var bb in M){var qb=bb.split(".")[0];Ua=W[qb]||W["*"];if(ka[qb])qb=ka[qb];else if(W[qb])qb=bd;else if(ka["*"])qb=ka["*"];else{if(!W["*"]){Fa.push(new Aa(A,M[bb],'unknown property "'+bb+'"'));continue}qb=bd}Fa=Fa.concat(qb({key:(A?A+".":A)+bb,value:M[bb],
valueSpec:Ua,style:wa,styleSpec:r,object:M,objectKey:bb},M))}for(var Bb in W)ka[Bb]||W[Bb].required&&void 0===W[Bb].default&&void 0===M[Bb]&&Fa.push(new Aa(A,M,'missing required property "'+Bb+'"'));return Fa}function ac(r){var A=r.value,M=r.valueSpec,W=r.style,ka=r.styleSpec,wa=r.key;r=r.arrayElementValidator||bd;if("array"!==vb(A))return[new Aa(wa,A,"array expected, "+vb(A)+" found")];if(M.length&&A.length!==M.length)return[new Aa(wa,A,"array length "+M.length+" expected, length "+A.length+" found")];
if(M["min-length"]&&A.length<M["min-length"])return[new Aa(wa,A,"array length at least "+M["min-length"]+" expected, length "+A.length+" found")];var Fa={type:M.value,values:M.values};7>ka.$version&&(Fa.function=M.function);"object"===vb(M.value)&&(Fa=M.value);M=[];for(var Ua=0;Ua<A.length;Ua++)M=M.concat(r({array:A,arrayIndex:Ua,value:A[Ua],valueSpec:Fa,style:W,styleSpec:ka,key:wa+"["+Ua+"]"}));return M}function Jc(r){var A=r.key,M=r.value;r=r.valueSpec;var W=vb(M);return"number"===W&&M!=M&&(W="NaN"),
"number"!==W?[new Aa(A,M,"number expected, "+W+" found")]:"minimum"in r&&M<r.minimum?[new Aa(A,M,M+" is less than the minimum value "+r.minimum)]:"maximum"in r&&M>r.maximum?[new Aa(A,M,M+" is greater than the maximum value "+r.maximum)]:[]}function qc(r){function A(hc){var rc=[],Kb=hc.value,Pb=hc.key;if("array"!==vb(Kb))return[new Aa(Pb,Kb,"array expected, "+vb(Kb)+" found")];if(2!==Kb.length)return[new Aa(Pb,Kb,"array length 2 expected, length "+Kb.length+" found")];if(Rb){if("object"!==vb(Kb[0]))return[new Aa(Pb,
Kb,"object expected, "+vb(Kb[0])+" found")];if(void 0===Kb[0].zoom)return[new Aa(Pb,Kb,"object stop key must have zoom")];if(void 0===Kb[0].value)return[new Aa(Pb,Kb,"object stop key must have value")];if(wa&&wa>ea(Kb[0].zoom))return[new Aa(Pb,Kb[0].zoom,"stop zoom values must appear in ascending order")];ea(Kb[0].zoom)!==wa&&(wa=ea(Kb[0].zoom),ka=void 0,bb={});rc=rc.concat(Fb({key:Pb+"[0]",value:Kb[0],valueSpec:{zoom:{}},style:hc.style,styleSpec:hc.styleSpec,objectElementValidators:{zoom:Jc,value:M}}))}else rc=
rc.concat(M({key:Pb+"[0]",value:Kb[0],valueSpec:{},style:hc.style,styleSpec:hc.styleSpec},Kb));return id(ca(Kb[1]))?rc.concat([new Aa(Pb+"[1]",Kb[1],"expressions are not allowed in function stops.")]):rc.concat(bd({key:Pb+"[1]",value:Kb[1],valueSpec:Fa,style:hc.style,styleSpec:hc.styleSpec}))}function M(hc,rc){var Kb=vb(hc.value),Pb=ea(hc.value);rc=null!==hc.value?hc.value:rc;if(W){if(Kb!==W)return[new Aa(hc.key,rc,Kb+" stop domain type must match previous stop domain type "+W)]}else W=Kb;return"number"!==
Kb&&"string"!==Kb&&"boolean"!==Kb?[new Aa(hc.key,rc,"stop domain value must be a number, string, or boolean")]:"number"!==Kb&&"categorical"!==Ua?(Kb="number expected, "+Kb+" found",jb(Fa)&&void 0===Ua&&(Kb+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Aa(hc.key,rc,Kb)]):"categorical"!==Ua||"number"!==Kb||isFinite(Pb)&&Math.floor(Pb)===Pb?"categorical"!==Ua&&"number"===Kb&&void 0!==ka&&Pb<ka?[new Aa(hc.key,rc,"stop domain values must appear in ascending order")]:
(ka=Pb,"categorical"===Ua&&Pb in bb?[new Aa(hc.key,rc,"stop domain values must be unique")]:(bb[Pb]=!0,[])):[new Aa(hc.key,rc,"integer expected, found "+Pb)]}var W,ka,wa,Fa=r.valueSpec,Ua=ea(r.value.type),bb={},qb="categorical"!==Ua&&void 0===r.value.property,Bb=!qb,Rb="array"===vb(r.value.stops)&&"array"===vb(r.value.stops[0])&&"object"===vb(r.value.stops[0][0]),$b=Fb({key:r.key,value:r.value,valueSpec:r.styleSpec.function,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(hc){if("identity"===
Ua)return[new Aa(hc.key,hc.value,'identity function may not have a "stops" property')];var rc=[],Kb=hc.value;return rc=rc.concat(ac({key:hc.key,value:Kb,valueSpec:hc.valueSpec,style:hc.style,styleSpec:hc.styleSpec,arrayElementValidator:A})),"array"===vb(Kb)&&0===Kb.length&&rc.push(new Aa(hc.key,Kb,"array must have at least one stop")),rc},default:function(hc){return bd({key:hc.key,value:hc.value,valueSpec:Fa,style:hc.style,styleSpec:hc.styleSpec})}}});return"identity"===Ua&&qb&&$b.push(new Aa(r.key,
r.value,'missing required property "property"')),"identity"===Ua||r.value.stops||$b.push(new Aa(r.key,r.value,'missing required property "stops"')),"exponential"===Ua&&r.valueSpec.expression&&!pb(r.valueSpec)&&$b.push(new Aa(r.key,r.value,"exponential functions not supported")),8<=r.styleSpec.$version&&(Bb&&!jb(r.valueSpec)?$b.push(new Aa(r.key,r.value,"property functions not supported")):qb&&!Xa(r.valueSpec)&&$b.push(new Aa(r.key,r.value,"zoom functions not supported"))),"categorical"!==Ua&&!Rb||
void 0!==r.value.property||$b.push(new Aa(r.key,r.value,'"property" property is required')),$b}function tc(r){var A=("property"===r.expressionContext?wd:Tc)(ca(r.value),r.valueSpec);if("error"===A.result)return A.value.map(function(M){return new Aa(""+r.key+M.key,r.value,M.message)});A=A.value.expression||A.value._styleExpression.expression;if("property"===r.expressionContext&&"text-font"===r.propertyKey&&!A.outputDefined())return[new Aa(r.key,r.value,'Invalid data expression for "'+r.propertyKey+
'". Output values must be contained as literals within the expression.')];if("property"===r.expressionContext&&"layout"===r.propertyType&&!Ta(A))return[new Aa(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===r.expressionContext&&!Ta(A))return[new Aa(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&0===r.expressionContext.indexOf("cluster")){if(!fb(A,["zoom","feature-state"]))return[new Aa(r.key,
r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===r.expressionContext&&!nb(A))return[new Aa(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function vc(r){var A=r.key,M=r.value;r=r.valueSpec;var W=[];return Array.isArray(r.values)?-1===r.values.indexOf(ea(M))&&W.push(new Aa(A,M,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(M)+" found")):-1===Object.keys(r.values).indexOf(ea(M))&&
W.push(new Aa(A,M,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(M)+" found")),W}function xb(r){if(!0===r||!1===r)return!0;if(!Array.isArray(r)||0===r.length)return!1;switch(r[0]){case "has":return 2<=r.length&&"$id"!==r[1]&&"$type"!==r[1];case "in":return 3<=r.length&&("string"!=typeof r[1]||Array.isArray(r[2]));case "!in":case "!has":case "none":return!1;case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3e\x3d":case "\x3c":case "\x3c\x3d":return 3!==r.length||Array.isArray(r[1])||
Array.isArray(r[2]);case "any":case "all":var A=0;for(r=r.slice(1);A<r.length;A+=1){var M=r[A];if(!xb(M)&&"boolean"!=typeof M)return!1}return!0;default:return!0}}function Ab(r){if(null==r)return{filter:function(){return!0},needGeometry:!1};xb(r)||(r=Bc(r));var A=Tc(r,qf);if("error"===A.result)throw Error(A.value.map(function(M){return M.key+": "+M.message}).join(", "));return{filter:function(M,W,ka){return A.value.evaluate(M,W,{},ka)},needGeometry:function ka(W){if(!Array.isArray(W))return!1;if("within"===
W[0])return!0;for(var wa=1;wa<W.length;wa++)if(ka(W[wa]))return!0;return!1}(r)}}function jc(r,A){return r<A?-1:r>A?1:0}function Bc(r){if(!r)return!0;var A,M=r[0];return 1>=r.length?"any"!==M:"\x3d\x3d"===M?Ic(r[1],r[2],"\x3d\x3d"):"!\x3d"===M?Gb(Ic(r[1],r[2],"\x3d\x3d")):"\x3c"===M||"\x3e"===M||"\x3c\x3d"===M||"\x3e\x3d"===M?Ic(r[1],r[2],M):"any"===M?(A=r.slice(1),["any"].concat(A.map(Bc))):"all"===M?["all"].concat(r.slice(1).map(Bc)):"none"===M?["all"].concat(r.slice(1).map(Bc).map(Gb)):"in"===M?
ec(r[1],r.slice(2)):"!in"===M?Gb(ec(r[1],r.slice(2))):"has"===M?ic(r[1]):"!has"===M?Gb(ic(r[1])):"within"!==M||r}function Ic(r,A,M){switch(r){case "$type":return["filter-type-"+M,A];case "$id":return["filter-id-"+M,A];default:return["filter-"+M,r,A]}}function ec(r,A){if(0===A.length)return!1;switch(r){case "$type":return["filter-type-in",["literal",A]];case "$id":return["filter-id-in",["literal",A]];default:return 200<A.length&&!A.some(function(M){return typeof M!=typeof A[0]})?["filter-in-large",
r,["literal",A.sort(jc)]]:["filter-in-small",r,["literal",A]]}}function ic(r){switch(r){case "$type":return!0;case "$id":return["filter-has-id"];default:return["filter-has",r]}}function Gb(r){return["!",r]}function yb(r){return xb(ca(r.value))?tc(da({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function W(M){var ka=M.value,wa=M.key;if("array"!==vb(ka))return[new Aa(wa,ka,"array expected, "+vb(ka)+" found")];var Fa,Ua=M.styleSpec,bb=[];if(1>ka.length)return[new Aa(wa,ka,"filter array must have at least 1 element")];
switch(bb=bb.concat(vc({key:wa+"[0]",value:ka[0],valueSpec:Ua.filter_operator,style:M.style,styleSpec:M.styleSpec})),ea(ka[0])){case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":2<=ka.length&&"$type"===ea(ka[1])&&bb.push(new Aa(wa,ka,'"$type" cannot be use with operator "'+ka[0]+'"'));case "\x3d\x3d":case "!\x3d":3!==ka.length&&bb.push(new Aa(wa,ka,'filter array for operator "'+ka[0]+'" must have 3 elements'));case "in":case "!in":2<=ka.length&&"string"!==(Fa=vb(ka[1]))&&bb.push(new Aa(wa+"[1]",
ka[1],"string expected, "+Fa+" found"));for(var qb=2;qb<ka.length;qb++)Fa=vb(ka[qb]),"$type"===ea(ka[1])?bb=bb.concat(vc({key:wa+"["+qb+"]",value:ka[qb],valueSpec:Ua.geometry_type,style:M.style,styleSpec:M.styleSpec})):"string"!==Fa&&"number"!==Fa&&"boolean"!==Fa&&bb.push(new Aa(wa+"["+qb+"]",ka[qb],"string, number, or boolean expected, "+Fa+" found"));break;case "any":case "all":case "none":for(Fa=1;Fa<ka.length;Fa++)bb=bb.concat(W({key:wa+"["+Fa+"]",value:ka[Fa],style:M.style,styleSpec:M.styleSpec}));
break;case "has":case "!has":Fa=vb(ka[1]);2!==ka.length?bb.push(new Aa(wa,ka,'filter array for "'+ka[0]+'" operator must have 2 elements')):"string"!==Fa&&bb.push(new Aa(wa+"[1]",ka[1],"string expected, "+Fa+" found"));break;case "within":Fa=vb(ka[1]),2!==ka.length?bb.push(new Aa(wa,ka,'filter array for "'+ka[0]+'" operator must have 2 elements')):"object"!==Fa&&bb.push(new Aa(wa+"[1]",ka[1],"object expected, "+Fa+" found"))}return bb}(r)}function Eb(r,A){var M=r.key,W=r.style,ka=r.styleSpec,wa=r.value,
Fa=r.objectKey,Ua=ka[A+"_"+r.layerType];if(!Ua)return[];var bb=Fa.match(/^(.*)-transition$/);if("paint"===A&&bb&&Ua[bb[1]]&&Ua[bb[1]].transition)return bd({key:M,value:wa,valueSpec:ka.transition,style:W,styleSpec:ka});var qb;Ua=r.valueSpec||Ua[Fa];if(!Ua)return[new Aa(M,wa,'unknown property "'+Fa+'"')];if("string"===vb(wa)&&jb(Ua)&&!Ua.tokens&&(qb=/^{([^}]+)}$/.exec(wa)))return[new Aa(M,wa,'"'+Fa+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+
JSON.stringify(qb[1])+" }`.")];qb=[];return"symbol"===r.layerType&&("text-field"===Fa&&W&&!W.glyphs&&qb.push(new Aa(M,wa,'use of "text-field" requires a style "glyphs" property')),"text-font"===Fa&&zb(ca(wa))&&"identity"===ea(wa.type)&&qb.push(new Aa(M,wa,'"text-font" does not support identity functions'))),qb.concat(bd({key:r.key,value:wa,valueSpec:Ua,style:W,styleSpec:ka,expressionContext:"property",propertyType:A,propertyKey:Fa}))}function Lb(r){return Eb(r,"paint")}function fc(r){return Eb(r,
"layout")}function Oc(r){var A=[],M=r.value,W=r.key,ka=r.style,wa=r.styleSpec;M.type||M.ref||A.push(new Aa(W,M,'either "type" or "ref" is required'));var Fa,Ua=ea(M.type),bb=ea(M.ref);if(M.id)for(var qb=ea(M.id),Bb=0;Bb<r.arrayIndex;Bb++){var Rb=ka.layers[Bb];ea(Rb.id)===qb&&A.push(new Aa(W,M.id,'duplicate layer id "'+M.id+'", previously used at line '+Rb.id.__line__))}"ref"in M?(["type","source","source-layer","filter","layout"].forEach(function($b){$b in M&&A.push(new Aa(W,M[$b],'"'+$b+'" is prohibited for ref layers'))}),
ka.layers.forEach(function($b){ea($b.id)===bb&&(Fa=$b)}),Fa?Fa.ref?A.push(new Aa(W,M.ref,"ref cannot reference another ref layer")):Ua=ea(Fa.type):A.push(new Aa(W,M.ref,'ref layer "'+bb+'" not found'))):"background"!==Ua&&(M.source?(qb=(ka=ka.sources&&ka.sources[M.source])&&ea(ka.type),ka?"vector"===qb&&"raster"===Ua?A.push(new Aa(W,M.source,'layer "'+M.id+'" requires a raster source')):"raster"===qb&&"raster"!==Ua?A.push(new Aa(W,M.source,'layer "'+M.id+'" requires a vector source')):"vector"!==
qb||M["source-layer"]?"raster-dem"===qb&&"hillshade"!==Ua?A.push(new Aa(W,M.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ua||!M.paint||!M.paint["line-gradient"]||"geojson"===qb&&ka.lineMetrics||A.push(new Aa(W,M,'layer "'+M.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):A.push(new Aa(W,M,'layer "'+M.id+'" must specify a "source-layer"')):A.push(new Aa(W,M.source,'source "'+M.source+'" not found'))):A.push(new Aa(W,
M,'missing required property "source"')));return A=A.concat(Fb({key:W,value:M,valueSpec:wa.layer,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return bd({key:W+".type",value:M.type,valueSpec:wa.layer.type,style:r.style,styleSpec:r.styleSpec,object:M,objectKey:"type"})},filter:yb,layout:function($b){return Fb({layer:M,key:$b.key,value:$b.value,style:$b.style,styleSpec:$b.styleSpec,objectElementValidators:{"*":function(hc){return fc(da({layerType:Ua},
hc))}}})},paint:function($b){return Fb({layer:M,key:$b.key,value:$b.value,style:$b.style,styleSpec:$b.styleSpec,objectElementValidators:{"*":function(hc){return Lb(da({layerType:Ua},hc))}}})}}}))}function xc(r){var A=r.value;r=r.key;var M=vb(A);return"string"!==M?[new Aa(r,A,"string expected, "+M+" found")]:[]}function Mc(r){var A=r.value,M=r.key,W=r.styleSpec,ka=r.style;if(!A.type)return[new Aa(M,A,'"type" is required')];var wa=ea(A.type);switch(wa){case "vector":case "raster":case "raster-dem":return Fb({key:M,
value:A,valueSpec:W["source_"+wa.replace("-","_")],style:r.style,styleSpec:W,objectElementValidators:ye});case "geojson":if(r=Fb({key:M,value:A,valueSpec:W.source_geojson,style:ka,styleSpec:W,objectElementValidators:ye}),A.cluster)for(var Fa in A.clusterProperties)W=A.clusterProperties[Fa],ka=W[0],ka="string"==typeof ka?[ka,["accumulated"],["get",Fa]]:ka,r.push.apply(r,tc({key:M+"."+Fa+".map",value:W[1],expressionContext:"cluster-map"})),r.push.apply(r,tc({key:M+"."+Fa+".reduce",value:ka,expressionContext:"cluster-reduce"}));
return r;case "video":return Fb({key:M,value:A,valueSpec:W.source_video,style:ka,styleSpec:W});case "image":return Fb({key:M,value:A,valueSpec:W.source_image,style:ka,styleSpec:W});case "canvas":return[new Aa(M,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return vc({key:M+".type",value:A.type,valueSpec:{values:"vector raster raster-dem geojson video image".split(" ")},style:ka,styleSpec:W})}}function dd(r){var A=r.value,
M=r.styleSpec,W=M.light;r=r.style;var ka=[],wa=vb(A);if(void 0===A)return ka;if("object"!==wa)return ka.concat([new Aa("light",A,"object expected, "+wa+" found")]);for(var Fa in A)wa=Fa.match(/^(.*)-transition$/),ka=ka.concat(wa&&W[wa[1]]&&W[wa[1]].transition?bd({key:Fa,value:A[Fa],valueSpec:M.transition,style:r,styleSpec:M}):W[Fa]?bd({key:Fa,value:A[Fa],valueSpec:W[Fa],style:r,styleSpec:M}):[new Aa(Fa,A[Fa],'unknown property "'+Fa+'"')]);return ka}function bd(r){var A=r.value,M=r.valueSpec,W=r.styleSpec;
return M.expression&&zb(ea(A))?qc(r):M.expression&&id(ca(A))?tc(r):M.type&&lf[M.type]?lf[M.type](r):Fb(da({},r,{valueSpec:M.type?W[M.type]:M}))}function qd(r){var A=r.value,M=r.key;r=xc(r);return r.length||(-1===A.indexOf("{fontstack}")&&r.push(new Aa(M,A,'"glyphs" url must include a "{fontstack}" token')),-1===A.indexOf("{range}")&&r.push(new Aa(M,A,'"glyphs" url must include a "{range}" token'))),r}function Bd(r,A){void 0===A&&(A=bc);var M=[];return M=M.concat(bd({key:"",value:r,valueSpec:A.$root,
styleSpec:A,style:r,objectElementValidators:{glyphs:qd,"*":function(){return[]}}})),r.constants&&(M=M.concat(X({key:"constants",value:r.constants,style:r,styleSpec:A}))),md(M)}function md(r){return[].concat(r).sort(function(A,M){return A.line-M.line})}function Fd(r){return function(){for(var A=[],M=arguments.length;M--;)A[M]=arguments[M];return md(r.apply(this,A))}}function Od(r,A){var M=!1;if(A&&A.length)for(var W=0;W<A.length;W+=1)r.fire(new Kc(Error(A[W].message))),M=!0;return M}function sd(r,
A,M){var W=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;var ka=new Int32Array(this.arrayBuffer);r=ka[0];this.d=(A=ka[1])+2*(M=ka[2]);for(var wa=0;wa<this.d*this.d;wa++){var Fa=ka[3+wa],Ua=ka[3+wa+1];W.push(Fa===Ua?null:ka.subarray(Fa,Ua))}wa=ka[3+W.length+1];this.keys=ka.subarray(ka[3+W.length],wa);this.bboxes=ka.subarray(wa);this.insert=this._insertReadonly}else{this.d=A+2*M;for(ka=0;ka<this.d*this.d;ka++)W.push([]);this.keys=[];this.bboxes=[]}this.n=A;this.extent=r;this.padding=
M;this.scale=A/r;this.uid=0;A=M/A*r;this.min=-A;this.max=r+A}function cd(r,A,M){void 0===M&&(M={});Object.defineProperty(A,"_classRegistryKey",{value:r,writeable:!1});bj[r]={klass:A,omit:M.omit||[],shallow:M.shallow||[]}}function Gd(r){return r&&"undefined"!=typeof ArrayBuffer&&(r instanceof ArrayBuffer||r.constructor&&"ArrayBuffer"===r.constructor.name)}function Nd(r,A){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof
String||r instanceof Date||r instanceof RegExp)return r;if(Gd(r)||Dj&&r instanceof Dj)return A&&A.push(r),r;if(ArrayBuffer.isView(r))return A&&A.push(r.buffer),r;if(r instanceof lk)return A&&A.push(r.data.buffer),r;if(Array.isArray(r)){for(var M=[],W=0;W<r.length;W+=1)M.push(Nd(r[W],A));return M}if("object"==typeof r){var ka=r.constructor;M=ka._classRegistryKey;if(!M)throw Error("can't serialize object of unregistered class");W=ka.serialize?ka.serialize(r,A):{};if(!ka.serialize){for(var wa in r)!r.hasOwnProperty(wa)||
0<=bj[M].omit.indexOf(wa)||(ka=r[wa],W[wa]=0<=bj[M].shallow.indexOf(wa)?ka:Nd(ka,A));r instanceof Error&&(W.message=r.message)}if(W.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==M&&(W.$name=M),W}throw Error("can't serialize object of type "+typeof r);}function Pd(r){if(null==r||"boolean"==typeof r||"number"==typeof r||"string"==typeof r||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||Gd(r)||
Dj&&r instanceof Dj||ArrayBuffer.isView(r)||r instanceof lk)return r;if(Array.isArray(r))return r.map(Pd);if("object"==typeof r){var A=r.$name||"Object",M=bj[A].klass;if(!M)throw Error("can't deserialize unregistered class "+A);if(M.deserialize)return M.deserialize(r);M=Object.create(M.prototype);for(var W=0,ka=Object.keys(r);W<ka.length;W+=1){var wa=ka[W];if("$name"!==wa){var Fa=r[wa];M[wa]=0<=bj[A].shallow.indexOf(wa)?Fa:Pd(Fa)}}return M}throw Error("can't deserialize object of type "+typeof r);
}function Ke(r){for(var A=0;A<r.length;A+=1)if(Wd(r[A].charCodeAt(0)))return!0;return!1}function Wd(r){return!(746!==r&&747!==r&&(4352>r||!(ae["Bopomofo Extended"](r)||ae.Bopomofo(r)||ae["CJK Compatibility Forms"](r)&&!(65097<=r&&65103>=r)||ae["CJK Compatibility Ideographs"](r)||ae["CJK Compatibility"](r)||ae["CJK Radicals Supplement"](r)||ae["CJK Strokes"](r)||!(!ae["CJK Symbols and Punctuation"](r)||12296<=r&&12305>=r||12308<=r&&12319>=r||12336===r)||ae["CJK Unified Ideographs Extension A"](r)||
ae["CJK Unified Ideographs"](r)||ae["Enclosed CJK Letters and Months"](r)||ae["Hangul Compatibility Jamo"](r)||ae["Hangul Jamo Extended-A"](r)||ae["Hangul Jamo Extended-B"](r)||ae["Hangul Jamo"](r)||ae["Hangul Syllables"](r)||ae.Hiragana(r)||ae["Ideographic Description Characters"](r)||ae.Kanbun(r)||ae["Kangxi Radicals"](r)||ae["Katakana Phonetic Extensions"](r)||ae.Katakana(r)&&12540!==r||!(!ae["Halfwidth and Fullwidth Forms"](r)||65288===r||65289===r||65293===r||65306<=r&&65310>=r||65339===r||65341===
r||65343===r||65371<=r&&65503>=r||65507===r||65512<=r&&65519>=r)||!(!ae["Small Form Variants"](r)||65112<=r&&65118>=r||65123<=r&&65126>=r)||ae["Unified Canadian Aboriginal Syllabics"](r)||ae["Unified Canadian Aboriginal Syllabics Extended"](r)||ae["Vertical Forms"](r)||ae["Yijing Hexagram Symbols"](r)||ae["Yi Syllables"](r)||ae["Yi Radicals"](r))))}function Wc(r){var A;(A=Wd(r))||(A=!!(ae["Latin-1 Supplement"](r)&&(167===r||169===r||174===r||177===r||188===r||189===r||190===r||215===r||247===r)||
ae["General Punctuation"](r)&&(8214===r||8224===r||8225===r||8240===r||8241===r||8251===r||8252===r||8258===r||8263===r||8264===r||8265===r||8273===r)||ae["Letterlike Symbols"](r)||ae["Number Forms"](r)||ae["Miscellaneous Technical"](r)&&(8960<=r&&8967>=r||8972<=r&&8991>=r||8996<=r&&9E3>=r||9003===r||9085<=r&&9114>=r||9150<=r&&9165>=r||9167===r||9169<=r&&9179>=r||9186<=r&&9215>=r)||ae["Control Pictures"](r)&&9251!==r||ae["Optical Character Recognition"](r)||ae["Enclosed Alphanumerics"](r)||ae["Geometric Shapes"](r)||
ae["Miscellaneous Symbols"](r)&&!(9754<=r&&9759>=r)||ae["Miscellaneous Symbols and Arrows"](r)&&(11026<=r&&11055>=r||11088<=r&&11097>=r||11192<=r&&11243>=r)||ae["CJK Symbols and Punctuation"](r)||ae.Katakana(r)||ae["Private Use Area"](r)||ae["CJK Compatibility Forms"](r)||ae["Small Form Variants"](r)||ae["Halfwidth and Fullwidth Forms"](r)||8734===r||8756===r||8757===r||9984<=r&&10087>=r||10102<=r&&10131>=r||65532===r||65533===r));return!A}function rd(r){return 1424<=r&&2303>=r||ae["Arabic Presentation Forms-A"](r)||
ae["Arabic Presentation Forms-B"](r)}function Kd(){fk.fire(new Cc("pluginStateChange",{pluginStatus:Ag,pluginURL:uh}))}function Rd(r,A){void 0===A&&(A=1);var M=0,W=0;return{members:r.map(function(ka){var wa=Fj[ka.type].BYTES_PER_ELEMENT,Fa=M=se(M,Math.max(A,wa)),Ua=ka.components||1;return W=Math.max(W,wa),M+=wa*Ua,{name:ka.name,type:ka.type,components:Ua,offset:Fa}}),size:se(M,Math.max(W,A)),alignment:A}}function se(r,A){return Math.ceil(r/A)*A}function Ee(r,A){return 256*c(Math.floor(r),0,255)+c(Math.floor(A),
0,255)}function $d(r){var A=+r;return!isNaN(A)&&A<=cl?A:Uj(String(r))}function Ud(r,A,M){var W=r[A];r[A]=r[M];r[M]=W}function Je(r){return[Ee(255*r.r,255*r.g),Ee(255*r.b,255*r.a)]}function Fe(r,A,M){var W={color:{source:qh,composite:oj},number:{source:Aj,composite:qh}};return(r={"line-pattern":{source:Vg,composite:Vg},"fill-pattern":{source:Vg,composite:Vg},"fill-extrusion-pattern":{source:Vg,composite:Vg}}[r])&&r[M]||W[A][M]}function ke(r){var A=8192/r.extent;r=r.loadGeometry();for(var M=0;M<r.length;M++)for(var W=
r[M],ka=0;ka<W.length;ka++){var wa=W[ka];wa.x=Math.round(wa.x*A);wa.y=Math.round(wa.y*A);(wa.x<wi.min||wa.x>wi.max||wa.y<wi.min||wa.y>wi.max)&&(z("Geometry exceeds allowed extent, reduce your vector tile buffer size"),wa.x=c(wa.x,wi.min,wi.max),wa.y=c(wa.y,wi.min,wi.max))}return r}function Ce(r,A,M,W,ka){r.emplaceBack(2*A+(W+1)/2,2*M+(ka+1)/2)}function sf(r,A){for(var M=0;M<r.length;M++)if(Sb(A,r[M]))return!0;for(M=0;M<A.length;M++)if(Sb(r,A[M]))return!0;return!!gf(r,A)}function Ve(r,A,M){return!!Sb(r,
A)||!!Wa(A,r,M)}function tf(r,A){if(1===r.length)return Cb(A,r[0]);for(var M=0;M<A.length;M++)for(var W=A[M],ka=0;ka<W.length;ka++)if(Sb(r,W[ka]))return!0;for(M=0;M<r.length;M++)if(Cb(A,r[M]))return!0;for(M=0;M<A.length;M++)if(gf(r,A[M]))return!0;return!1}function gf(r,A){if(0===r.length||0===A.length)return!1;for(var M=0;M<r.length-1;M++)for(var W=r[M],ka=r[M+1],wa=0;wa<A.length-1;wa++){var Fa=W,Ua=ka,bb=A[wa],qb=A[wa+1];if(B(Fa,bb,qb)!==B(Ua,bb,qb)&&B(Fa,Ua,bb)!==B(Fa,Ua,qb))return!0}return!1}function Wa(r,
A,M){M*=M;if(1===A.length)return r.distSqr(A[0])<M;for(var W=1;W<A.length;W++)if(Hb(r,A[W-1],A[W])<M)return!0;return!1}function Hb(r,A,M){var W=A.distSqr(M);if(0===W)return r.distSqr(A);W=((r.x-A.x)*(M.x-A.x)+(r.y-A.y)*(M.y-A.y))/W;return r.distSqr(0>W?A:1<W?M:M.sub(A)._mult(W)._add(A))}function Cb(r,A){for(var M,W,ka,wa=!1,Fa=0;Fa<r.length;Fa++)for(var Ua=0,bb=(M=r[Fa]).length-1;Ua<M.length;bb=Ua++)(W=M[Ua]).y>A.y!=(ka=M[bb]).y>A.y&&A.x<(ka.x-W.x)*(A.y-W.y)/(ka.y-W.y)+W.x&&(wa=!wa);return wa}function Sb(r,
A){for(var M=!1,W=0,ka=r.length-1;W<r.length;ka=W++){var wa=r[W];ka=r[ka];wa.y>A.y!=ka.y>A.y&&A.x<(ka.x-wa.x)*(A.y-wa.y)/(ka.y-wa.y)+wa.x&&(M=!M)}return M}function Ec(r,A,M){var W=A.paint.get(r).value;return"constant"===W.kind?W.value:M.programConfigurations.get(A.id).getMaxValue(r)}function Vc(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function mc(r,A,M,W,ka){if(!A[0]&&!A[1])return r;A=le.convert(A)._mult(ka);"viewport"===M&&A._rotate(-W);M=[];for(W=0;W<r.length;W++)M.push(r[W].sub(A));return M}function Sc(r){return r[0]=
1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function jd(r,A,M){var W=A[0],ka=A[1],wa=A[2],Fa=A[3],Ua=A[4],bb=A[5],qb=A[6],Bb=A[7],Rb=A[8],$b=A[9],hc=A[10],rc=A[11],Kb=A[12],Pb=A[13],Gc=A[14];A=A[15];var Yc=M[0],Pc=M[1],xd=M[2],zd=M[3];return r[0]=Yc*W+Pc*Ua+xd*Rb+zd*Kb,r[1]=Yc*ka+Pc*bb+xd*$b+zd*Pb,r[2]=Yc*wa+Pc*qb+xd*hc+zd*Gc,r[3]=Yc*Fa+Pc*Bb+xd*rc+zd*A,r[4]=(Yc=M[4])*W+(Pc=M[5])*Ua+(xd=M[6])*Rb+(zd=M[7])*Kb,r[5]=Yc*ka+Pc*bb+xd*
$b+zd*Pb,r[6]=Yc*wa+Pc*qb+xd*hc+zd*Gc,r[7]=Yc*Fa+Pc*Bb+xd*rc+zd*A,r[8]=(Yc=M[8])*W+(Pc=M[9])*Ua+(xd=M[10])*Rb+(zd=M[11])*Kb,r[9]=Yc*ka+Pc*bb+xd*$b+zd*Pb,r[10]=Yc*wa+Pc*qb+xd*hc+zd*Gc,r[11]=Yc*Fa+Pc*Bb+xd*rc+zd*A,r[12]=(Yc=M[12])*W+(Pc=M[13])*Ua+(xd=M[14])*Rb+(zd=M[15])*Kb,r[13]=Yc*ka+Pc*bb+xd*$b+zd*Pb,r[14]=Yc*wa+Pc*qb+xd*hc+zd*Gc,r[15]=Yc*Fa+Pc*Bb+xd*rc+zd*A,r}function Ad(r,A,M){var W=A[0],ka=A[1],wa=A[2];A=A[3];return r[0]=M[0]*W+M[4]*ka+M[8]*wa+M[12]*A,r[1]=M[1]*W+M[5]*ka+M[9]*wa+M[13]*A,r[2]=
M[2]*W+M[6]*ka+M[10]*wa+M[14]*A,r[3]=M[3]*W+M[7]*ka+M[11]*wa+M[15]*A,r}function Qb(r,A){r=Ad([],[r.x,r.y,0,1],A);return new le(r[0]/r[3],r[1]/r[3])}function dc(r,A,M,W){var ka=A.width;A=A.height;if(W)if(W instanceof Uint8ClampedArray)W=new Uint8Array(W.buffer);else{if(W.length!==ka*A*M)throw new RangeError("mismatched image size");}else W=new Uint8Array(ka*A*M);return r.width=ka,r.height=A,r.data=W,r}function Qc(r,A,M){var W=A.width;A=A.height;if(W!==r.width||A!==r.height){var ka=dc({},{width:W,height:A},
M);gd(r,ka,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,W),height:Math.min(r.height,A)},M);r.width=W;r.height=A;r.data=ka.data}}function gd(r,A,M,W,ka,wa){if(0===ka.width||0===ka.height)return A;if(ka.width>r.width||ka.height>r.height||M.x>r.width-ka.width||M.y>r.height-ka.height)throw new RangeError("out of range source coordinates for image copy");if(ka.width>A.width||ka.height>A.height||W.x>A.width-ka.width||W.y>A.height-ka.height)throw new RangeError("out of range destination coordinates for image copy");
for(var Fa=r.data,Ua=A.data,bb=0;bb<ka.height;bb++)for(var qb=((M.y+bb)*r.width+M.x)*wa,Bb=((W.y+bb)*A.width+W.x)*wa,Rb=0;Rb<ka.width*wa;Rb++)Ua[Bb+Rb]=Fa[qb+Rb];return A}function Uc(r,A){for(var M=new Uint8Array(1024),W={},ka=0,wa=0;256>ka;ka++,wa+=4){W[A]=ka/255;var Fa=r.evaluate(W);M[wa+0]=Math.floor(255*Fa.r/Fa.a);M[wa+1]=Math.floor(255*Fa.g/Fa.a);M[wa+2]=Math.floor(255*Fa.b/Fa.a);M[wa+3]=Math.floor(255*Fa.a)}return new Vf({width:256,height:1},M)}function Zc(r,A,M){M=M||2;var W,ka,wa,Fa=A&&A.length,
Ua=Fa?A[0]*M:r.length,bb=Ub(r,0,Ua,M,!0),qb=[];if(!bb||bb.next===bb.prev)return qb;if(Fa){Fa=M;var Bb,Rb=[];var $b=0;for(Bb=A.length;$b<Bb;$b++){(W=Ub(r,A[$b]*Fa,$b<Bb-1?A[$b+1]*Fa:r.length,Fa,!1))===W.next&&(W.steiner=!0);var hc=Rb,rc=hc.push,Kb=W,Pb=W;do(Kb.x<Pb.x||Kb.x===Pb.x&&Kb.y<Pb.y)&&(Pb=Kb),Kb=Kb.next;while(Kb!==W);rc.call(hc,Pb)}Rb.sort(gc);for($b=0;$b<Rb.length;$b++)wc(Rb[$b],bb),bb=sc(bb,bb.next)}if(r.length>80*M){var Gc=A=r[0];var Yc=W=r[1];for(Fa=M;Fa<Ua;Fa+=M)(ka=r[Fa])<Gc&&(Gc=ka),
(wa=r[Fa+1])<Yc&&(Yc=wa),ka>A&&(A=ka),wa>W&&(W=wa);var Pc=0!==(Pc=Math.max(A-Gc,W-Yc))?1/Pc:0}return Dc(bb,qb,M,Gc,Yc,Pc),qb}function Ub(r,A,M,W,ka){if(ka===0<Pi(r,A,M,W))for(ka=A;ka<M;ka+=W)var wa=hf(ka,r[ka],r[ka+1],wa);else for(ka=M-W;ka>=A;ka-=W)wa=hf(ka,r[ka],r[ka+1],wa);return wa&&Hd(wa,wa.next)&&(Qf(wa),wa=wa.next),wa}function sc(r,A){if(!r)return r;A||(A=r);var M=r;do if(r=!1,M.steiner||!Hd(M,M.next)&&0!==Jd(M.prev,M,M.next))M=M.next;else{if(Qf(M),(M=A=M.prev)===M.next)break;r=!0}while(r||
M!==A);return A}function Dc(r,A,M,W,ka,wa,Fa){if(r){if(!Fa&&wa){var Ua=r,bb=Ua;do null===bb.z&&(bb.z=od(bb.x,bb.y,W,ka,wa)),bb.prevZ=bb.prev,bb=bb.nextZ=bb.next;while(bb!==Ua);bb.prevZ.nextZ=null;bb.prevZ=null;Ua=bb;var qb,Bb,Rb,$b,hc=1;do{bb=Ua;var rc=Ua=null;for(Rb=0;bb;){Rb++;var Kb=bb;for(qb=$b=0;qb<hc&&($b++,Kb=Kb.nextZ);qb++);for(qb=hc;0<$b||0<qb&&Kb;)0!==$b&&(0===qb||!Kb||bb.z<=Kb.z)?(Bb=bb,bb=bb.nextZ,$b--):(Bb=Kb,Kb=Kb.nextZ,qb--),rc?rc.nextZ=Bb:Ua=Bb,Bb.prevZ=rc,rc=Bb;bb=Kb}rc.nextZ=null;
hc*=2}while(1<Rb)}for(bb=r;r.prev!==r.next;){Bb=r.prev;Ua=r.next;if(wa)a:{Kb=r;hc=W;qb=ka;var Pb=wa;rc=Kb.prev;Rb=Kb.next;if(0<=Jd(rc,Kb,Rb))Kb=!1;else{var Gc=rc.x>Kb.x?rc.x>Rb.x?rc.x:Rb.x:Kb.x>Rb.x?Kb.x:Rb.x,Yc=rc.y>Kb.y?rc.y>Rb.y?rc.y:Rb.y:Kb.y>Rb.y?Kb.y:Rb.y;$b=od(rc.x<Kb.x?rc.x<Rb.x?rc.x:Rb.x:Kb.x<Rb.x?Kb.x:Rb.x,rc.y<Kb.y?rc.y<Rb.y?rc.y:Rb.y:Kb.y<Rb.y?Kb.y:Rb.y,hc,qb,Pb);hc=od(Gc,Yc,hc,qb,Pb);qb=Kb.prevZ;for(Pb=Kb.nextZ;qb&&qb.z>=$b&&Pb&&Pb.z<=hc;){if(qb!==Kb.prev&&qb!==Kb.next&&Dd(rc.x,rc.y,
Kb.x,Kb.y,Rb.x,Rb.y,qb.x,qb.y)&&0<=Jd(qb.prev,qb,qb.next)||(qb=qb.prevZ,Pb!==Kb.prev&&Pb!==Kb.next&&Dd(rc.x,rc.y,Kb.x,Kb.y,Rb.x,Rb.y,Pb.x,Pb.y)&&0<=Jd(Pb.prev,Pb,Pb.next))){Kb=!1;break a}Pb=Pb.nextZ}for(;qb&&qb.z>=$b;){if(qb!==Kb.prev&&qb!==Kb.next&&Dd(rc.x,rc.y,Kb.x,Kb.y,Rb.x,Rb.y,qb.x,qb.y)&&0<=Jd(qb.prev,qb,qb.next)){Kb=!1;break a}qb=qb.prevZ}for(;Pb&&Pb.z<=hc;){if(Pb!==Kb.prev&&Pb!==Kb.next&&Dd(rc.x,rc.y,Kb.x,Kb.y,Rb.x,Rb.y,Pb.x,Pb.y)&&0<=Jd(Pb.prev,Pb,Pb.next)){Kb=!1;break a}Pb=Pb.nextZ}Kb=!0}}else a:if(Kb=
r,rc=Kb.prev,Rb=Kb.next,0<=Jd(rc,Kb,Rb))Kb=!1;else{for($b=Kb.next.next;$b!==Kb.prev;){if(Dd(rc.x,rc.y,Kb.x,Kb.y,Rb.x,Rb.y,$b.x,$b.y)&&0<=Jd($b.prev,$b,$b.next)){Kb=!1;break a}$b=$b.next}Kb=!0}if(Kb)A.push(Bb.i/M),A.push(r.i/M),A.push(Ua.i/M),Qf(r),bb=r=Ua.next;else if((r=Ua)===bb){if(Fa)if(1===Fa){r=sc(r);Fa=A;Bb=M;Ua=r;do bb=Ua.prev,Kb=Ua.next.next,!Hd(bb,Kb)&&Ie(bb,Ua,Ua.next,Kb)&&xe(bb,Kb)&&xe(Kb,bb)&&(Fa.push(bb.i/Bb),Fa.push(Ua.i/Bb),Fa.push(Kb.i/Bb),Qf(Ua),Qf(Ua.next),Ua=r=Kb),Ua=Ua.next;while(Ua!==
r);r=sc(Ua);Dc(r,A,M,W,ka,wa,2)}else{if(2===Fa)a:{Fa=r;do{for(Bb=Fa.next.next;Bb!==Fa.prev;){if(Fa.i!==Bb.i&&Ld(Fa,Bb)){r=Oe(Fa,Bb);Fa=sc(Fa,Fa.next);r=sc(r,r.next);Dc(Fa,A,M,W,ka,wa);Dc(r,A,M,W,ka,wa);break a}Bb=Bb.next}Fa=Fa.next}while(Fa!==r)}}else Dc(sc(r),A,M,W,ka,wa,1);break}}}}function gc(r,A){return r.x-A.x}function wc(r,A){if(A=function(M,W){var ka=W,wa=M.x,Fa=M.y,Ua=-1/0;do{if(Fa<=ka.y&&Fa>=ka.next.y&&ka.next.y!==ka.y){var bb=ka.x+(Fa-ka.y)*(ka.next.x-ka.x)/(ka.next.y-ka.y);if(bb<=wa&&bb>
Ua){if(Ua=bb,bb===wa){if(Fa===ka.y)return ka;if(Fa===ka.next.y)return ka.next}var qb=ka.x<ka.next.x?ka:ka.next}}ka=ka.next}while(ka!==W);if(!qb)return null;if(wa===Ua)return qb;bb=qb;var Bb=qb.x,Rb=qb.y,$b=1/0;ka=qb;do{if(wa>=ka.x&&ka.x>=Bb&&wa!==ka.x&&Dd(Fa<Rb?wa:Ua,Fa,Bb,Rb,Fa<Rb?Ua:wa,Fa,ka.x,ka.y)){W=Math.abs(Fa-ka.y)/(wa-ka.x);var hc;if((hc=xe(ka,M))&&!(hc=W<$b)&&(hc=W===$b)&&!(hc=ka.x>qb.x)&&(hc=ka.x===qb.x)){hc=qb;var rc=ka;hc=0>Jd(hc.prev,hc,rc.prev)&&0>Jd(rc.next,hc,hc.next)}hc&&(qb=ka,$b=
W)}ka=ka.next}while(ka!==bb);return qb}(r,A))r=Oe(A,r),sc(A,A.next),sc(r,r.next)}function od(r,A,M,W,ka){return 1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-M)*ka)|r<<8))|r<<4))|r<<2))|r<<1)|(1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-W)*ka)|A<<8))|A<<4))|A<<2))|A<<1))<<1}function Dd(r,A,M,W,ka,wa,Fa,Ua){return 0<=(ka-Fa)*(A-Ua)-(r-Fa)*(wa-Ua)&&0<=(r-Fa)*(W-Ua)-(M-Fa)*(A-Ua)&&0<=(M-Fa)*(wa-Ua)-(ka-Fa)*(W-Ua)}function Ld(r,A){return r.next.i!==A.i&&r.prev.i!==
A.i&&!function(M,W){var ka=M;do{if(ka.i!==M.i&&ka.next.i!==M.i&&ka.i!==W.i&&ka.next.i!==W.i&&Ie(ka,ka.next,M,W))return!0;ka=ka.next}while(ka!==M);return!1}(r,A)&&(xe(r,A)&&xe(A,r)&&function(M,W){var ka=M,wa=!1,Fa=(M.x+W.x)/2;W=(M.y+W.y)/2;do ka.y>W!=ka.next.y>W&&ka.next.y!==ka.y&&Fa<(ka.next.x-ka.x)*(W-ka.y)/(ka.next.y-ka.y)+ka.x&&(wa=!wa),ka=ka.next;while(ka!==M);return wa}(r,A)&&(Jd(r.prev,r,A.prev)||Jd(r,A.prev,A))||Hd(r,A)&&0<Jd(r.prev,r,r.next)&&0<Jd(A.prev,A,A.next))}function Jd(r,A,M){return(A.y-
r.y)*(M.x-A.x)-(A.x-r.x)*(M.y-A.y)}function Hd(r,A){return r.x===A.x&&r.y===A.y}function Ie(r,A,M,W){var ka=Se(Jd(r,A,M)),wa=Se(Jd(r,A,W)),Fa=Se(Jd(M,W,r)),Ua=Se(Jd(M,W,A));return ka!==wa&&Fa!==Ua||!(0!==ka||!Ge(r,M,A))||!(0!==wa||!Ge(r,W,A))||!(0!==Fa||!Ge(M,r,W))||!(0!==Ua||!Ge(M,A,W))}function Ge(r,A,M){return A.x<=Math.max(r.x,M.x)&&A.x>=Math.min(r.x,M.x)&&A.y<=Math.max(r.y,M.y)&&A.y>=Math.min(r.y,M.y)}function Se(r){return 0<r?1:0>r?-1:0}function xe(r,A){return 0>Jd(r.prev,r,r.next)?0<=Jd(r,
A,r.next)&&0<=Jd(r,r.prev,A):0>Jd(r,A,r.prev)||0>Jd(r,r.next,A)}function Oe(r,A){var M=new jh(r.i,r.x,r.y),W=new jh(A.i,A.x,A.y),ka=r.next,wa=A.prev;return r.next=A,A.prev=r,M.next=ka,ka.prev=M,W.next=M,M.prev=W,wa.next=W,W.prev=wa,W}function hf(r,A,M,W){r=new jh(r,A,M);return W?(r.next=W.next,r.prev=W,W.next.prev=r,W.next=r):(r.prev=r,r.next=r),r}function Qf(r){r.next.prev=r.prev;r.prev.next=r.next;r.prevZ&&(r.prevZ.nextZ=r.nextZ);r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function jh(r,A,M){this.i=r;this.x=
A;this.y=M;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function Pi(r,A,M,W){for(var ka=0,wa=M-W;A<M;A+=W)ka+=(r[wa]-r[A])*(r[A+1]+r[wa+1]),wa=A;return ka}function di(r,A,M,W,ka){!function Rb(Fa,Ua,bb,qb,Bb){for(;qb>bb;){if(600<qb-bb){var $b=qb-bb+1,hc=Ua-bb+1,rc=Math.log($b),Kb=.5*Math.exp(2*rc/3);rc=.5*Math.sqrt(rc*Kb*($b-Kb)/$b)*(0>hc-$b/2?-1:1);Rb(Fa,Ua,Math.max(bb,Math.floor(Ua-hc*Kb/$b+rc)),Math.min(qb,Math.floor(Ua+($b-hc)*Kb/$b+rc)),Bb)}$b=Fa[Ua];hc=bb;Kb=qb;Wf(Fa,
bb,Ua);for(0<Bb(Fa[qb],$b)&&Wf(Fa,bb,qb);hc<Kb;){Wf(Fa,hc,Kb);hc++;for(Kb--;0>Bb(Fa[hc],$b);)hc++;for(;0<Bb(Fa[Kb],$b);)Kb--}0===Bb(Fa[bb],$b)?Wf(Fa,bb,Kb):Wf(Fa,++Kb,qb);Kb<=Ua&&(bb=Kb+1);Ua<=Kb&&(qb=Kb-1)}}(r,A,M||0,W||r.length-1,ka||zi)}function Wf(r,A,M){var W=r[A];r[A]=r[M];r[M]=W}function zi(r,A){return r<A?-1:r>A?1:0}function pg(r,A){var M=r.length;if(1>=M)return[r];for(var W,ka,wa=[],Fa=0;Fa<M;Fa++){var Ua=r[Fa];for(var bb=0,qb=0,Bb=Ua.length,Rb=Bb-1,$b=void 0,hc=void 0;qb<Bb;Rb=qb++)bb+=
((hc=Ua[Rb]).x-($b=Ua[qb]).x)*($b.y+hc.y);Ua=bb;0!==Ua&&(r[Fa].area=Math.abs(Ua),void 0===ka&&(ka=0>Ua),ka===0>Ua?(W&&wa.push(W),W=[r[Fa]]):W.push(r[Fa]))}if(W&&wa.push(W),1<A)for(r=0;r<wa.length;r++)wa[r].length<=A||(di(wa[r],A,1,wa[r].length-1,ei),wa[r]=wa[r].slice(0,A));return wa}function ei(r,A){return A.area-r.area}function Ih(r,A,M){M=M.patternDependencies;for(var W=!1,ka=0;ka<A.length;ka+=1){var wa=A[ka].paint.get(r+"-pattern");wa.isConstant()||(W=!0);(wa=wa.constantOr(null))&&(W=!0,M[wa.to]=
!0,M[wa.from]=!0)}return W}function Og(r,A,M,W,ka){for(var wa=ka.patternDependencies,Fa=0;Fa<A.length;Fa+=1){var Ua=A[Fa],bb=Ua.paint.get(r+"-pattern").value;if("constant"!==bb.kind){var qb=bb.evaluate({zoom:W-1},M,{},ka.availableImages),Bb=bb.evaluate({zoom:W},M,{},ka.availableImages);bb=bb.evaluate({zoom:W+1},M,{},ka.availableImages);Bb=Bb&&Bb.name?Bb.name:Bb;bb=bb&&bb.name?bb.name:bb;wa[qb=qb&&qb.name?qb.name:qb]=!0;wa[Bb]=!0;wa[bb]=!0;M.patterns[Ua.id]={min:qb,mid:Bb,max:bb}}}return M}function ig(r,
A,M,W,ka){this.properties={};this.extent=M;this.type=0;this._pbf=r;this._geometry=-1;this._keys=W;this._values=ka;r.readFields(Jh,this,A)}function Jh(r,A,M){if(1==r)A.id=M.readVarint();else if(2==r)for(r=M.readVarint()+M.pos;M.pos<r;){var W=A._keys[M.readVarint()],ka=A._values[M.readVarint()];A.properties[W]=ka}else 3==r?A.type=M.readVarint():4==r&&(A._geometry=M.pos)}function qg(r,A){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=r;this._keys=[];this._values=[];this._features=
[];r.readFields(Kh,this,A);this.length=this._features.length}function Kh(r,A,M){if(15===r)A.version=M.readVarint();else if(1===r)A.name=M.readString();else if(5===r)A.extent=M.readVarint();else if(2===r)A._features.push(M.pos);else if(3===r)A._keys.push(M.readString());else if(4===r){r=A._values;A=r.push;for(var W=null,ka=M.readVarint()+M.pos;M.pos<ka;)W=M.readVarint()>>3,W=1===W?M.readString():2===W?M.readFloat():3===W?M.readDouble():4===W?M.readVarint64():5===W?M.readVarint():6===W?M.readSVarint():
7===W?M.readBoolean():null;A.call(r,W)}}function Lh(r,A,M){3===r&&(r=new Zj(M,M.readVarint()+M.pos),r.length&&(A[r.name]=r))}function fi(r,A,M,W,ka,wa,Fa,Ua){r.emplaceBack(A,M,2*Math.floor(W*ok)+Fa,ka*ok*2,wa*ok*2,Math.round(Ua))}function Mh(r,A){return r.x*A.x+r.y*A.y}function gi(r,A){if(1===r.length){for(var M,W=0,ka=A[W++];!M||ka.equals(M);)if(!(M=A[W++]))return 1/0;for(;W<A.length;W++){var wa=A[W],Fa=r[0],Ua=M.sub(ka),bb=wa.sub(ka),qb=Fa.sub(ka);Fa=Mh(Ua,Ua);var Bb=Mh(Ua,bb),Rb=Mh(bb,bb);Ua=Mh(qb,
Ua);bb=Mh(qb,bb);qb=Fa*Rb-Bb*Bb;Rb=(Rb*Ua-Bb*bb)/qb;Fa=(Fa*bb-Bb*Ua)/qb;wa=ka.z*(1-Rb-Fa)+M.z*Rb+wa.z*Fa;if(isFinite(wa))return wa}return 1/0}r=1/0;for(M=0;M<A.length;M+=1)r=Math.min(r,A[M].z);return r}function hi(r,A){return 0<A?A+2*r:r}function ii(r,A,M){return r.sections.forEach(function(W){var ka=W.text;var wa=A.layout.get("text-transform").evaluate(M,{});wa=("uppercase"===wa?ka=ka.toLocaleUpperCase():"lowercase"===wa&&(ka=ka.toLocaleLowerCase()),Lg.applyArabicShaping&&(ka=Lg.applyArabicShaping(ka)),
ka);W.text=wa}),r}function Ue(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0);this.type=this.pos=0;this.length=this.buf.length}function Dg(r){return r.type===Ue.Bytes?r.readVarint()+r.pos:r.pos+1}function ji(r,A,M){A=16383>=A?1:2097151>=A?2:268435455>=A?3:Math.floor(Math.log(A)/(7*Math.LN2));M.realloc(A);for(var W=M.pos-1;W>=r;W--)M.buf[W+A]=M.buf[W]}function ki(r,A){for(var M=0;M<r.length;M++)A.writeVarint(r[M])}function gj(r,A){for(var M=0;M<r.length;M++)A.writeSVarint(r[M])}
function li(r,A){for(var M=0;M<r.length;M++)A.writeFloat(r[M])}function Ai(r,A){for(var M=0;M<r.length;M++)A.writeDouble(r[M])}function Kj(r,A){for(var M=0;M<r.length;M++)A.writeBoolean(r[M])}function vf(r,A){for(var M=0;M<r.length;M++)A.writeFixed32(r[M])}function Jj(r,A){for(var M=0;M<r.length;M++)A.writeSFixed32(r[M])}function Bi(r,A){for(var M=0;M<r.length;M++)A.writeFixed64(r[M])}function ak(r,A){for(var M=0;M<r.length;M++)A.writeSFixed64(r[M])}function mi(r,A){return(r[A]|r[A+1]<<8|r[A+2]<<
16)+16777216*r[A+3]}function Nh(r,A,M){r[M]=A;r[M+1]=A>>>8;r[M+2]=A>>>16;r[M+3]=A>>>24}function Fg(r,A){return(r[A]|r[A+1]<<8|r[A+2]<<16)+(r[A+3]<<24)}function sg(r,A,M){1===r&&M.readMessage(tg,A)}function tg(r,A,M){if(3===r){r=M.readMessage(Ci,{});M=r.width;var W=r.height,ka=r.left,wa=r.top,Fa=r.advance;A.push({id:r.id,bitmap:new Zg({width:M+6,height:W+6},r.bitmap),metrics:{width:M,height:W,left:ka,top:wa,advance:Fa}})}}function Ci(r,A,M){1===r?A.id=M.readVarint():2===r?A.bitmap=M.readBytes():3===
r?A.width=M.readVarint():4===r?A.height=M.readVarint():5===r?A.left=M.readSVarint():6===r?A.top=M.readSVarint():7===r&&(A.advance=M.readVarint())}function jf(r){for(var A=0,M=0,W=0;W<r.length;W+=1){var ka=r[W];A+=ka.w*ka.h;M=Math.max(M,ka.w)}r.sort(function(qb,Bb){return Bb.h-qb.h});M=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(A/.95)),M),h:1/0}];for(var wa=ka=W=0;wa<r.length;wa+=1)for(var Fa=r[wa],Ua=M.length-1;0<=Ua;Ua--){var bb=M[Ua];if(!(Fa.w>bb.w||Fa.h>bb.h)){(Fa.x=bb.x,Fa.y=bb.y,ka=Math.max(ka,
Fa.y+Fa.h),W=Math.max(W,Fa.x+Fa.w),Fa.w===bb.w&&Fa.h===bb.h)?(Fa=M.pop(),Ua<M.length&&(M[Ua]=Fa)):Fa.h===bb.h?(bb.x+=Fa.w,bb.w-=Fa.w):Fa.w===bb.w?(bb.y+=Fa.h,bb.h-=Fa.h):(M.push({x:bb.x+Fa.w,y:bb.y,w:bb.w-Fa.w,h:Fa.h}),bb.y+=Fa.h,bb.h-=Fa.h);break}}return{w:W,h:ka,fill:A/(W*ka)||0}}function Oh(r,A,M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb,$b,hc,rc,Kb){ka=zc.fromFeature(r,ka);Rb===nd.vertical&&ka.verticalizePunctuation();var Pb=Lg.processBidirectionalText,Gc=Lg.processStyledBidirectionalText;if(Pb&&1===ka.sections.length){r=
[];var Yc=0;for(wa=Pb(ka.toString(),xh(ka,qb,wa,A,W,hc,rc));Yc<wa.length;Yc+=1){hc=wa[Yc];rc=new zc;rc.text=hc;rc.sections=ka.sections;for(Pb=0;Pb<hc.length;Pb++)rc.sectionIndex.push(0);r.push(rc)}}else if(Gc)for(r=[],Yc=0,wa=Gc(ka.text,ka.sectionIndex,xh(ka,qb,wa,A,W,hc,rc));Yc<wa.length;Yc+=1)hc=wa[Yc],rc=new zc,rc.text=hc[0],rc.sectionIndex=hc[1],rc.sections=ka.sections,r.push(rc);else r=function(Pc,xd){for(var zd=[],Id=Pc.text,Td=0,Qd=0;Qd<xd.length;Qd+=1){var ne=xd[Qd];zd.push(Pc.substring(Td,
ne));Td=ne}return Td<Id.length&&zd.push(Pc.substring(Td,Id.length)),zd}(ka,xh(ka,qb,wa,A,W,hc,rc));wa=[];Bb={positionedLines:wa,text:ka.toString(),top:Bb[1],bottom:Bb[1],left:Bb[0],right:Bb[0],writingMode:Rb,iconsInText:!1,verticalizable:!1};return function(Pc,xd,zd,Id,Td,Qd,ne,we,pe,ue,Ne,ge){var de=0,je=-17,$e=0,Gf=0;we="right"===we?1:"left"===we?0:.5;for(var sh=0,zg=0;zg<Td.length;zg+=1){var Hf=Td[zg];Hf.trim();var Qe=Hf.getMaxScale(),ag=24*(Qe-1),Kg={positionedGlyphs:[],lineOffset:0};Pc.positionedLines[sh]=
Kg;var eh=Kg.positionedGlyphs,Uk=0;if(Hf.length()){for(var qj=0;qj<Hf.length();qj++){var Nf=Hf.getSection(qj),Ah=Hf.getSectionIndex(qj),sk=Hf.getCharCode(qj),Jk,Vk=null,th=null,tk=24,fg=!(pe===nd.horizontal||!Ne&&!Wd(sk)||Ne&&($c[sk]||(Bh=sk,ae.Arabic(Bh)||ae["Arabic Supplement"](Bh)||ae["Arabic Extended-A"](Bh)||ae["Arabic Presentation Forms-A"](Bh)||ae["Arabic Presentation Forms-B"](Bh))));if(Nf.imageName){tk=Id[Nf.imageName];if(!tk)continue;th=Nf.imageName;Pc.iconsInText=Pc.iconsInText||!0;Vk=
tk.paddedRect;var Hi=tk.displaySize;Nf.scale=24*Nf.scale/ge;var xf=ag+(24-Hi[1]*Nf.scale);tk=(Jk={width:Hi[0],height:Hi[1],left:1,top:-3,advance:fg?Hi[1]:Hi[0]}).advance;Hi=fg?Hi[0]*Nf.scale-24*Qe:Hi[1]*Nf.scale-24*Qe;0<Hi&&Hi>Uk&&(Uk=Hi)}else{if((xf=(xf=zd[Nf.fontStack])&&xf[sk])&&xf.rect)Vk=xf.rect,Jk=xf.metrics;else{xf=(xf=xd[Nf.fontStack])&&xf[sk];if(!xf)continue;Jk=xf.metrics}xf=24*(Qe-Nf.scale)}fg?(Pc.verticalizable=!0,eh.push({glyph:sk,imageName:th,x:de,y:je+xf,vertical:fg,scale:Nf.scale,fontStack:Nf.fontStack,
sectionIndex:Ah,metrics:Jk,rect:Vk}),de+=tk*Nf.scale+ue):(eh.push({glyph:sk,imageName:th,x:de,y:je+xf,vertical:fg,scale:Nf.scale,fontStack:Nf.fontStack,sectionIndex:Ah,metrics:Jk,rect:Vk}),de+=Jk.advance*Nf.scale+ue)}if(0!==eh.length&&($e=Math.max(de-ue,$e),de=eh,eh=eh.length-1,Hf=Uk,we||Hf))for(qj=de[eh],qj=(de[eh].x+qj.metrics.advance*qj.scale)*we,Nf=0;Nf<=eh;Nf++)de[Nf].x-=qj,de[Nf].y+=Hf;de=0;Qe=Qd*Qe+Uk;Kg.lineOffset=Math.max(Uk,ag);je+=Qe;Gf=Math.max(Qe,Gf)}else je+=Qd;++sh}var Bh;xd=je- -17;
zd=ni(ne);ne=zd.horizontalAlign;zd=zd.verticalAlign;we=(we-ne)*$e;Td=Gf!==Qd?-xd*zd- -17:(-zd*Td.length+.5)*Qd;Qd=0;for(Gf=Pc.positionedLines;Qd<Gf.length;Qd+=1)for(Id=0,pe=Gf[Qd].positionedGlyphs;Id<pe.length;Id+=1)ue=pe[Id],ue.x+=we,ue.y+=Td;Pc.top+=-zd*xd;Pc.bottom=Pc.top+xd;Pc.left+=-ne*$e;Pc.right=Pc.left+$e}(Bb,A,M,W,r,Fa,Ua,bb,Rb,qb,$b,Kb),!function(Pc){for(var xd=0;xd<Pc.length;xd+=1)if(0!==Pc[xd].positionedGlyphs.length)return!1;return!0}(wa)&&Bb}function kh(r,A,M,W,ka,wa){return A.imageName?
(r=W[A.imageName])?r.displaySize[0]*A.scale*24/wa+ka:0:(r=(wa=M[A.fontStack])&&wa[r])?r.metrics.advance*A.scale+ka:0}function vg(r,A,M,W){var ka=Math.pow(r-A,2);return W?r<A?ka/2:2*ka:ka+Math.abs(M)*M}function Ye(r,A,M){var W=0;return 10===r&&(W-=1E4),M&&(W+=150),40!==r&&65288!==r||(W+=50),41!==A&&65289!==A||(W+=50),W}function af(r,A,M,W,ka,wa){for(var Fa=null,Ua=vg(A,M,ka,wa),bb=0;bb<W.length;bb+=1){var qb=W[bb],Bb=vg(A-qb.x,M,ka,wa)+qb.badness;Bb<=Ua&&(Fa=qb,Ua=Bb)}return{index:r,x:A,priorBreak:Fa,
badness:Ua}}function xh(r,A,M,W,ka,wa,Fa){if("point"!==wa||!r)return[];var Ua;wa=[];M=function(rc,Kb,Pb,Gc,Yc,Pc){for(var xd=0,zd=0;zd<rc.length();zd++){var Id=rc.getSection(zd);xd+=kh(rc.getCharCode(zd),Id,Gc,Yc,Kb,Pc)}return xd/Math.max(1,Math.ceil(xd/Pb))}(r,A,M,W,ka,Fa);for(var bb=0<=r.text.indexOf(""),qb=0,Bb=0;Bb<r.length();Bb++){var Rb=r.getSection(Bb),$b=r.getCharCode(Bb);if($c[$b]||(qb+=kh($b,Rb,W,ka,A,Fa)),Bb<r.length()-1){var hc=!(11904>(Ua=$b)||!(ae["Bopomofo Extended"](Ua)||ae.Bopomofo(Ua)||
ae["CJK Compatibility Forms"](Ua)||ae["CJK Compatibility Ideographs"](Ua)||ae["CJK Compatibility"](Ua)||ae["CJK Radicals Supplement"](Ua)||ae["CJK Strokes"](Ua)||ae["CJK Symbols and Punctuation"](Ua)||ae["CJK Unified Ideographs Extension A"](Ua)||ae["CJK Unified Ideographs"](Ua)||ae["Enclosed CJK Letters and Months"](Ua)||ae["Halfwidth and Fullwidth Forms"](Ua)||ae.Hiragana(Ua)||ae["Ideographic Description Characters"](Ua)||ae["Kangxi Radicals"](Ua)||ae["Katakana Phonetic Extensions"](Ua)||ae.Katakana(Ua)||
ae["Vertical Forms"](Ua)||ae["Yi Radicals"](Ua)||ae["Yi Syllables"](Ua)));(ud[$b]||hc||Rb.imageName)&&wa.push(af(Bb+1,qb,M,wa,Ye($b,r.getCharCode(Bb+1),hc&&bb),!1))}}return function Pb(Kb){return Kb?Pb(Kb.priorBreak).concat(Kb.index):[]}(af(r.length(),qb,M,wa,0,!0))}function ni(r){var A=.5,M=.5;switch(r){case "right":case "top-right":case "bottom-right":A=1;break;case "left":case "top-left":case "bottom-left":A=0}switch(r){case "bottom":case "bottom-right":case "bottom-left":M=1;break;case "top":case "top-right":case "top-left":M=
0}return{horizontalAlign:A,verticalAlign:M}}function Qi(r,A,M,W,ka,wa){r=r.image;if(r.content){var Fa=r.content;var Ua=r.pixelRatio||1;Fa=[Fa[0]/Ua,Fa[1]/Ua,r.displaySize[0]-Fa[2]/Ua,r.displaySize[1]-Fa[3]/Ua]}var bb,qb,Bb,Rb;Ua=A.left*wa;var $b=A.right*wa;"width"===M||"both"===M?(Rb=ka[0]+Ua-W[3],qb=ka[0]+$b+W[1]):qb=(Rb=ka[0]+(Ua+$b-r.displaySize[0])/2)+r.displaySize[0];Ua=A.top*wa;A=A.bottom*wa;return"height"===M||"both"===M?(bb=ka[1]+Ua-W[0],Bb=ka[1]+A+W[2]):Bb=(bb=ka[1]+(Ua+A-r.displaySize[1])/
2)+r.displaySize[1],{image:r,top:bb,right:qb,bottom:Bb,left:Rb,collisionPadding:Fa}}function hj(r,A){A=A.expression;if("constant"===A.kind)return{kind:"constant",layoutSize:A.evaluate(new mf(r+1))};if("source"===A.kind)return{kind:"source"};for(var M=A.zoomStops,W=A.interpolationType,ka=0;ka<M.length&&M[ka]<=r;)ka++;for(var wa=ka=Math.max(0,ka-1);wa<M.length&&M[wa]<r+1;)wa++;wa=Math.min(M.length-1,wa);r=M[ka];M=M[wa];return"composite"===A.kind?{kind:"composite",minZoom:r,maxZoom:M,interpolationType:W}:
{kind:"camera",minZoom:r,maxZoom:M,minSize:A.evaluate(new mf(r)),maxSize:A.evaluate(new mf(M)),interpolationType:W}}function Gg(r,A,M){var W=A.uSize,ka=M.lowerSize;return"source"===r.kind?ka/128:"composite"===r.kind?ra(ka/128,M.upperSize/128,A.uSizeT):W}function Di(r,A){var M=0,W=0;if("constant"===r.kind)W=r.layoutSize;else if("source"!==r.kind){var ka=r.interpolationType;A=ka?c(Lf.interpolationFactor(ka,A,r.minZoom,r.maxZoom),0,1):0;"camera"===r.kind?W=ra(r.minSize,r.maxSize,A):M=A}return{uSizeT:M,
uSize:W}}function lh(r,A,M,W,ka){if(void 0===A.segment)return!0;var wa=A;A=A.segment+1;for(var Fa=0;Fa>-M/2;){if(0>--A)return!1;Fa-=r[A].dist(wa);wa=r[A]}Fa+=r[A].dist(r[A+1]);A++;wa=[];for(var Ua=0;Fa<M/2;){var bb=r[A],qb=r[A+1];if(!qb)return!1;var Bb=r[A-1].angleTo(bb)-bb.angleTo(qb);Bb=Math.abs((Bb+3*Math.PI)%(2*Math.PI)-Math.PI);wa.push({distance:Fa,angleDelta:Bb});for(Ua+=Bb;Fa-wa[0].distance>W;)Ua-=wa.shift().angleDelta;if(Ua>ka)return!1;A++;Fa+=bb.dist(qb)}return!0}function Df(r){for(var A=
0,M=0;M<r.length-1;M++)A+=r[M].dist(r[M+1]);return A}function Ri(r,A,M,W,ka,wa){ka=M?.6*ka*wa:0;M=Math.max(M?M.right-M.left:0,W?W.right-W.left:0)*wa;var Fa=0,Ua=Df(r)/2;for(W=0;W<r.length-1;W++){wa=r[W];var bb=r[W+1],qb=wa.dist(bb);if(Fa+qb>Ua)return Ua=(Ua-Fa)/qb,Fa=ra(wa.x,bb.x,Ua),Ua=ra(wa.y,bb.y,Ua),W=new vd(Fa,Ua,bb.angleTo(wa),W),W._round(),!ka||lh(r,W,M,ka,A)?W:void 0;Fa+=qb}}function ij(r,A,M,W,ka,wa,Fa,Ua,bb){ka=Math.max(W?W.right-W.left:0,ka?ka.right-ka.left:0);var qb=ka*Fa,Bb=0===r[0].x||
r[0].x===bb||0===r[0].y||r[0].y===bb;return A-qb<A/4&&(A=qb+A/4),function zd($b,hc,rc,Kb,Pb,Gc,Yc,Pc,xd){var Id=Gc/2,Td=Df($b),Qd=0;hc-=rc;for(var ne=[],we=0;we<$b.length-1;we++){for(var pe=$b[we],ue=$b[we+1],Ne=pe.dist(ue),ge=ue.angleTo(pe);hc+rc<Qd+Ne;){var de=((hc+=rc)-Qd)/Ne,je=ra(pe.x,ue.x,de);de=ra(pe.y,ue.y,de);0<=je&&je<xd&&0<=de&&de<xd&&0<=hc-Id&&hc+Id<=Td&&(je=new vd(je,de,ge,we),je._round(),Kb&&!lh($b,je,Gc,Kb,Pb)||ne.push(je))}Qd+=Ne}return Pc||ne.length||Yc||(ne=zd($b,Qd/2,rc,Kb,Pb,Gc,
Yc,!0,xd)),ne}(r,Bb?A/2*Ua%A:(ka/2+2*wa)*Fa*Ua%A,A,W?.6*wa*Fa:0,M,qb,Bb,!1,bb)}function Rf(r,A,M,W,ka){for(var wa=[],Fa=0;Fa<r.length;Fa++)for(var Ua=r[Fa],bb=void 0,qb=0;qb<Ua.length-1;qb++){var Bb=Ua[qb],Rb=Ua[qb+1];Bb.x<A&&Rb.x<A||(Bb.x<A?Bb=(new le(A,Bb.y+(A-Bb.x)/(Rb.x-Bb.x)*(Rb.y-Bb.y)))._round():Rb.x<A&&(Rb=(new le(A,Bb.y+(A-Bb.x)/(Rb.x-Bb.x)*(Rb.y-Bb.y)))._round()),Bb.y<M&&Rb.y<M||(Bb.y<M?Bb=(new le(Bb.x+(M-Bb.y)/(Rb.y-Bb.y)*(Rb.x-Bb.x),M))._round():Rb.y<M&&(Rb=(new le(Bb.x+(M-Bb.y)/(Rb.y-
Bb.y)*(Rb.x-Bb.x),M))._round()),Bb.x>=W&&Rb.x>=W||(Bb.x>=W?Bb=(new le(W,Bb.y+(W-Bb.x)/(Rb.x-Bb.x)*(Rb.y-Bb.y)))._round():Rb.x>=W&&(Rb=(new le(W,Bb.y+(W-Bb.x)/(Rb.x-Bb.x)*(Rb.y-Bb.y)))._round()),Bb.y>=ka&&Rb.y>=ka||(Bb.y>=ka?Bb=(new le(Bb.x+(ka-Bb.y)/(Rb.y-Bb.y)*(Rb.x-Bb.x),ka))._round():Rb.y>=ka&&(Rb=(new le(Bb.x+(ka-Bb.y)/(Rb.y-Bb.y)*(Rb.x-Bb.x),ka))._round()),bb&&Bb.equals(bb[bb.length-1])||wa.push(bb=[Bb]),bb.push(Rb)))))}return wa}function $g(r,A,M,W){var ka=[],wa=r.image,Fa=wa.pixelRatio,Ua=
wa.paddedRect.w-2,bb=wa.paddedRect.h-2,qb=r.right-r.left,Bb=r.bottom-r.top,Rb=wa.stretchX||[[0,Ua]],$b=wa.stretchY||[[0,bb]],hc=function(we,pe){return we+pe[1]-pe[0]},rc=Rb.reduce(hc,0),Kb=$b.reduce(hc,0),Pb=Ua-rc,Gc=bb-Kb,Yc=0,Pc=rc,xd=0,zd=Kb,Id=0,Td=Pb,Qd=0,ne=Gc;wa.content&&W&&(hc=wa.content,Yc=jg(Rb,0,hc[0]),xd=jg($b,0,hc[1]),Pc=jg(Rb,hc[0],hc[2]),zd=jg($b,hc[1],hc[3]),Id=hc[0]-Yc,Qd=hc[1]-xd,Td=hc[2]-hc[0]-Pc,ne=hc[3]-hc[1]-zd);hc=function(we,pe,ue,Ne){var ge=(we.stretch-Yc)/Pc*qb+r.left,de=
we.fixed-Id-Td*we.stretch/rc,je=(pe.stretch-xd)/zd*Bb+r.top,$e=pe.fixed-Qd-ne*pe.stretch/Kb,Gf=(ue.stretch-Yc)/Pc*qb+r.left,sh=ue.fixed-Id-Td*ue.stretch/rc,zg=(Ne.stretch-xd)/zd*Bb+r.top,Hf=Ne.fixed-Qd-ne*Ne.stretch/Kb,Qe=new le(ge,je);je=new le(Gf,je);Gf=new le(Gf,zg);ge=new le(ge,zg);de=new le(de/Fa,$e/Fa);sh=new le(sh/Fa,Hf/Fa);if($e=A*Math.PI/180)Hf=Math.sin($e),$e=Math.cos($e),Hf=[$e,-Hf,Hf,$e],Qe._matMult(Hf),je._matMult(Hf),ge._matMult(Hf),Gf._matMult(Hf);we=we.stretch+we.fixed;pe=pe.stretch+
pe.fixed;return{tl:Qe,tr:je,bl:ge,br:Gf,tex:{x:wa.paddedRect.x+1+we,y:wa.paddedRect.y+1+pe,w:ue.stretch+ue.fixed-we,h:Ne.stretch+Ne.fixed-pe},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:de,pixelOffsetBR:sh,minFontScaleX:Td/Fa/qb,minFontScaleY:ne/Fa/Bb,isSDF:M}};if(W&&(wa.stretchX||wa.stretchY))for(W=oi(Rb,Pb,rc),$b=oi($b,Gc,Kb),Ua=0;Ua<W.length-1;Ua++)for(bb=W[Ua],Rb=W[Ua+1],Gc=0;Gc<$b.length-1;Gc++)ka.push(hc(bb,$b[Gc],Rb,$b[Gc+1]));else ka.push(hc({fixed:0,stretch:-1},{fixed:0,
stretch:-1},{fixed:0,stretch:Ua+1},{fixed:0,stretch:bb+1}));return ka}function jg(r,A,M){for(var W=0,ka=0;ka<r.length;ka+=1){var wa=r[ka];W+=Math.max(A,Math.min(M,wa[1]))-Math.max(A,Math.min(M,wa[0]))}return W}function oi(r,A,M){for(var W=[{fixed:-1,stretch:0}],ka=0;ka<r.length;ka+=1){var wa=r[ka],Fa=wa[0];wa=wa[1];var Ua=W[W.length-1];W.push({fixed:Fa-Ua.stretch,stretch:Ua.stretch});W.push({fixed:Fa-Ua.stretch,stretch:Ua.stretch+(wa-Fa)})}return W.push({fixed:A+1,stretch:M}),W}function mh(r,A){return r<
A?-1:r>A?1:0}function Pg(r,A,M){void 0===A&&(A=1);void 0===M&&(M=!1);for(var W=1/0,ka=1/0,wa=-1/0,Fa=-1/0,Ua=r[0],bb=0;bb<Ua.length;bb++){var qb=Ua[bb];(!bb||qb.x<W)&&(W=qb.x);(!bb||qb.y<ka)&&(ka=qb.y);(!bb||qb.x>wa)&&(wa=qb.x);(!bb||qb.y>Fa)&&(Fa=qb.y)}qb=Math.min(wa-W,Fa-ka);Ua=qb/2;bb=new Yd([],xg);if(0===qb)return new le(W,ka);for(;W<wa;W+=qb)for(var Bb=ka;Bb<Fa;Bb+=qb)bb.push(new pi(W+Ua,Bb+Ua,Ua,r));Fa=wa=ka=0;W=r[0];qb=0;Bb=W.length;for(var Rb=Bb-1;qb<Bb;Rb=qb++){var $b=W[qb];Rb=W[Rb];var hc=
$b.x*Rb.y-Rb.x*$b.y;wa+=($b.x+Rb.x)*hc;Fa+=($b.y+Rb.y)*hc;ka+=3*hc}ka=new pi(wa/ka,Fa/ka,0,r);for(wa=bb.length;bb.length;)Fa=bb.pop(),(Fa.d>ka.d||!ka.d)&&(ka=Fa,M&&console.log("found best %d after %d probes",Math.round(1E4*Fa.d)/1E4,wa)),Fa.max-ka.d<=A||(bb.push(new pi(Fa.p.x-(Ua=Fa.h/2),Fa.p.y-Ua,Ua,r)),bb.push(new pi(Fa.p.x+Ua,Fa.p.y-Ua,Ua,r)),bb.push(new pi(Fa.p.x-Ua,Fa.p.y+Ua,Ua,r)),bb.push(new pi(Fa.p.x+Ua,Fa.p.y+Ua,Ua,r)),wa+=4);return M&&(console.log("num probes: "+wa),console.log("best distance: "+
ka.d)),ka.p}function xg(r,A){return A.max-r.max}function pi(r,A,M,W){this.p=new le(r,A);this.h=M;r=this.p;A=!1;M=1/0;for(var ka=0;ka<W.length;ka++)for(var wa=W[ka],Fa=0,Ua=wa.length,bb=Ua-1;Fa<Ua;bb=Fa++){var qb=wa[Fa];bb=wa[bb];qb.y>r.y!=bb.y>r.y&&r.x<(bb.x-qb.x)*(r.y-qb.y)/(bb.y-qb.y)+qb.x&&(A=!A);M=Math.min(M,Hb(r,qb,bb))}this.d=(A?1:-1)*Math.sqrt(M);this.max=this.d+this.h*Math.SQRT2}function qi(r,A){return A[1]!==ie?function(M,W,ka){var wa=0,Fa=0;switch(W=Math.abs(W),ka=Math.abs(ka),M){case "top-right":case "top-left":case "top":Fa=
ka-7;break;case "bottom-right":case "bottom-left":case "bottom":Fa=7-ka}switch(M){case "top-right":case "bottom-right":case "right":wa=-W;break;case "top-left":case "bottom-left":case "left":wa=W}return[wa,Fa]}(r,A[0],A[1]):function(M,W){var ka=0,wa=0;0>W&&(W=0);var Fa=W/Math.sqrt(2);switch(M){case "top-right":case "top-left":wa=Fa-7;break;case "bottom-right":case "bottom-left":wa=7-Fa;break;case "bottom":wa=7-W;break;case "top":wa=W-7}switch(M){case "top-right":case "bottom-right":ka=-Fa;break;case "top-left":case "bottom-left":ka=
Fa;break;case "left":ka=W;break;case "right":ka=-W}return[ka,wa]}(r,A[0])}function Ti(r){switch(r){case "right":case "top-right":case "bottom-right":return"right";case "left":case "top-left":case "bottom-left":return"left"}return"center"}function kg(r,A,M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb,$b,hc,rc){for(var Kb=r.allowVerticalPlacement,Pb=ka.layout.get("text-rotate").evaluate(Fa,{})*Math.PI/180,Gc=[],Yc=0,Pc=M.positionedLines;Yc<Pc.length;Yc+=1)for(var xd=Pc[Yc],zd=0,Id=xd.positionedGlyphs;zd<Id.length;zd+=
1){var Td=Id[zd];if(Td.rect){var Qd=Td.rect||{},ne=4,we=!0,pe=1,ue=0,Ne=(wa||Kb)&&Td.vertical,ge=Td.metrics.advance*Td.scale/2;if(Kb&&M.verticalizable&&(ue=xd.lineOffset/2-(Td.imageName?-(24-Td.metrics.width*Td.scale)/2:24*(Td.scale-1))),Td.imageName){var de=W[Td.imageName];we=de.sdf;ne=1/(pe=de.pixelRatio)}de=wa?[Td.x+ge,Td.y]:[0,0];var je=wa?[0,0]:[Td.x+ge+Ua[0],Td.y+Ua[1]-ue],$e=[0,0];Ne&&($e=je,je=[0,0]);ue=(Td.metrics.left-ne)*Td.scale-ge+je[0];ne=(-Td.metrics.top-ne)*Td.scale+je[1];je=ue+Qd.w*
Td.scale/pe;var Gf=ne+Qd.h*Td.scale/pe;pe=new le(ue,ne);ne=new le(je,ne);ue=new le(ue,Gf);je=new le(je,Gf);Ne&&(Ne=new le(-ge,ge- -17),Gf=-Math.PI/2,ge=12-ge,ge=new le(22-ge,-(Td.imageName?ge:0)),$e=new (Function.prototype.bind.apply(le,[null].concat($e))),pe._rotateAround(Gf,Ne)._add(ge)._add($e),ne._rotateAround(Gf,Ne)._add(ge)._add($e),ue._rotateAround(Gf,Ne)._add(ge)._add($e),je._rotateAround(Gf,Ne)._add(ge)._add($e));Pb&&(ge=Math.sin(Pb),$e=Math.cos(Pb),ge=[$e,-ge,ge,$e],pe._matMult(ge),ne._matMult(ge),
ue._matMult(ge),je._matMult(ge));ge=new le(0,0);$e=new le(0,0);Gc.push({tl:pe,tr:ne,bl:ue,br:je,tex:Qd,writingMode:M.writingMode,glyphOffset:de,sectionIndex:Td.sectionIndex,isSDF:we,pixelOffsetTL:ge,pixelOffsetBR:$e,minFontScaleX:0,minFontScaleY:0})}}M=r.textSizeData;W=null;"source"===M.kind?32640<(W=[128*ka.layout.get("text-size").evaluate(Fa,{})])[0]&&z(r.layerIds[0]+': Value for "text-size" is \x3e\x3d 255. Reduce your "text-size".'):"composite"===M.kind&&(32640<(W=[128*hc.compositeTextSizes[0].evaluate(Fa,
{},rc),128*hc.compositeTextSizes[1].evaluate(Fa,{},rc)])[0]||32640<W[1])&&z(r.layerIds[0]+': Value for "text-size" is \x3e\x3d 255. Reduce your "text-size".');r.addSymbols(r.text,Gc,W,Ua,wa,Fa,qb,A,bb.lineStartIndex,bb.lineLength,$b,rc);for(A=0;A<Bb.length;A+=1)Rb[Bb[A]]=r.text.placedSymbolArray.length-1;return 4*Gc.length}function Ef(r){for(var A in r)return r[A];return null}function Si(r,A,M,W){r=r.compareText;if(A in r)for(var ka=r[A],wa=ka.length-1;0<=wa;wa--){if(W.dist(ka[wa])<M)return!0}else r[A]=
[];return r[A].push(W),!1}function lg(r,A,M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb,$b){r.emplaceBack(A,M,Math.round(32*W),Math.round(32*ka),wa,Fa,((Ua?Math.min(32640,Math.round(Ua[0])):0)<<1)+(bb?1:0),Ua?Math.min(32640,Math.round(Ua[1])):0,16*qb,16*Bb,256*Rb,256*$b)}function Sf(r,A,M){r.emplaceBack(A.x,A.y,M);r.emplaceBack(A.x,A.y,M);r.emplaceBack(A.x,A.y,M);r.emplaceBack(A.x,A.y,M)}function Ph(r){var A=0;for(r=r.sections;A<r.length;A+=1){a:{var M=0;for(var W=r[A].text;M<W.length;M+=1)if(rd(W[M].charCodeAt(0))){M=
!0;break a}M=!1}if(M)return!0}return!1}function Kf(r,A,M){M=12756274*Math.PI/256/Math.pow(2,M);return[r*M-12756274*Math.PI/2,A*M-12756274*Math.PI/2]}function rg(r){return(180+r)/360}function Eg(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function Mf(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}function ah(r,A,M,W,ka){0>(r*=2)&&(r=-1*r-1);var wa=1<<M;return(wa*wa*r+wa*ka+W).toString(36)+M.toString(36)+A.toString(36)}function nh(r,A,M,W,ka){return x(r,
function(wa,Fa){return(wa=A instanceof Fh?A.get(Fa):null)&&wa.evaluate?wa.evaluate(M,W,ka):wa})}function wf(r){for(var A=1/0,M=1/0,W=-1/0,ka=-1/0,wa=0;wa<r.length;wa+=1){var Fa=r[wa];A=Math.min(A,Fa.x);M=Math.min(M,Fa.y);W=Math.max(W,Fa.x);ka=Math.max(ka,Fa.y)}return{minX:A,minY:M,maxX:W,maxY:ka}}function Wi(r,A){return A-r}var yj=e;e.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r};e.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r};e.prototype.sampleCurveDerivativeX=
function(r){return(3*this.ax*r+2*this.bx)*r+this.cx};e.prototype.solveCurveX=function(r,A){var M,W;void 0===A&&(A=1E-6);var ka=r;for(M=0;8>M;M++){if(W=this.sampleCurveX(ka)-r,Math.abs(W)<A)return ka;var wa=this.sampleCurveDerivativeX(ka);if(1E-6>Math.abs(wa))break;ka-=W/wa}if((ka=r)<(M=0))return M;if(ka>(wa=1))return wa;for(;M<wa&&!(W=this.sampleCurveX(ka),Math.abs(W-r)<A);)r>W?M=ka:wa=ka,ka=.5*(wa-M)+M;return ka};e.prototype.solve=function(r,A){return this.sampleCurveY(this.solveCurveX(r,A))};var le=
l;l.prototype={clone:function(){return new l(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,A){return this.clone()._rotateAround(r,A)},matMult:function(r){return this.clone()._matMult(r)},
unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var A=r.x-this.x;r=r.y-this.y;return A*A+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,
r.y)},angleWithSep:function(r,A){return Math.atan2(this.x*A-this.y*r,this.x*r+this.y*A)},_matMult:function(r){var A=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=A,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=
r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var A=Math.cos(r);r=Math.sin(r);var M=r*this.x+A*this.y;return this.x=A*this.x-r*this.y,this.y=M,this},_rotateAround:function(r,A){var M=Math.cos(r);r=Math.sin(r);var W=A.y+r*(this.x-A.x)+M*(this.y-A.y);return this.x=A.x+M*(this.x-A.x)-r*(this.y-A.y),this.y=W,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),
this}};l.convert=function(r){return r instanceof l?r:Array.isArray(r)?new l(r[0],r[1]):r};var Mj=k(.25,.1,.25,1),ch=1,cg={},Qh=null,yh,bi,Gh,bh,Nj=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Xi=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,Rh=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Ig={now:Nj,
frame:function(r){var A=Xi(r);return{cancel:function(){return Rh(A)}}},getImageData:function(r,A){void 0===A&&(A=0);var M=self.document.createElement("canvas"),W=M.getContext("2d");if(!W)throw Error("failed to create canvas 2d context");return M.width=r.width,M.height=r.height,W.drawImage(r,0,0,r.width,r.height),W.getImageData(-A,-A,r.width+2*A,r.height+2*A)},resolveURL:function(r){return yh||(yh=self.document.createElement("a")),yh.href=r,yh.href},hardwareConcurrency:self.navigator.hardwareConcurrency||
4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==bi&&(bi=self.matchMedia("(prefers-reduced-motion: reduce)")),bi.matches)}},ef={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,
ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Qg={supported:!1,testSupport:function(r){!Th&&bh&&(lj?J(r):Gh=r)}},Th=!1,lj=!1;self.document&&((bh=self.document.createElement("img")).onload=function(){Gh&&J(Gh);Gh=null;lj=!0},bh.onerror=function(){Th=!0;Gh=null},bh.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA\x3d");var Zf=function(r,A){this._transformRequestFn=r;this._customAccessToken=A;this._createSkuToken()};Zf.prototype._createSkuToken=function(){var r;var A=
"";for(r=0;10>r;r++)A+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];A=["101",A].join("");r=Date.now()+432E5;this._skuToken=A;this._skuTokenExpiresAt=r};Zf.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt};Zf.prototype.transformRequest=function(r,A){return this._transformRequestFn&&this._transformRequestFn(r,A)||{url:r}};Zf.prototype.normalizeStyleURL=function(r,A){if(!K(r))return r;r=N(r);return r.path="/styles/v1"+
r.path,this._makeAPIURL(r,this._customAccessToken||A)};Zf.prototype.normalizeGlyphsURL=function(r,A){if(!K(r))return r;r=N(r);return r.path="/fonts/v1"+r.path,this._makeAPIURL(r,this._customAccessToken||A)};Zf.prototype.normalizeSourceURL=function(r,A){if(!K(r))return r;r=N(r);return r.path="/v4/"+r.authority+".json",r.params.push("secure"),this._makeAPIURL(r,this._customAccessToken||A)};Zf.prototype.normalizeSpriteURL=function(r,A,M,W){var ka=N(r);return K(r)?(ka.path="/styles/v1"+ka.path+"/sprite"+
A+M,this._makeAPIURL(ka,this._customAccessToken||W)):(ka.path+=""+A+M,H(ka))};Zf.prototype.normalizeTileURL=function(r,A){if(this._isSkuTokenExpired()&&this._createSkuToken(),r&&!K(r))return r;r=N(r);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=Ig.devicePixelRatio||512===A?"@2x":"")+(Qg.supported?".webp":"$1"));r.path=r.path.replace(/^.+\/v4\//,"/");r.path="/v4"+r.path;if(!(A=this._customAccessToken))a:{A=0;for(var M=r.params;A<M.length;A+=1){var W=M[A].match(/^access_token=(.*)$/);if(W){A=W[1];
break a}}A=null}A=A||ef.ACCESS_TOKEN;return ef.REQUIRE_ACCESS_TOKEN&&A&&this._skuToken&&r.params.push("sku\x3d"+this._skuToken),this._makeAPIURL(r,A)};Zf.prototype.canonicalizeTileURL=function(r,A){var M=N(r);if(!M.path.match(/(^\/v4\/)/)||!M.path.match(/\.[\w]+$/))return r;r="mapbox://tiles/"+M.path.replace("/v4/","");M=M.params;return A&&(M=M.filter(function(W){return!W.match(/^access_token=/)})),M.length&&(r+="?"+M.join("\x26")),r};Zf.prototype.canonicalizeTileset=function(r,A){A=!!A&&K(A);var M=
[],W=0;for(r=r.tiles||[];W<r.length;W+=1){var ka=r[W];Sh.test(ka)?M.push(this.canonicalizeTileURL(ka,A)):M.push(ka)}return M};Zf.prototype._makeAPIURL=function(r,A){var M=N(ef.API_URL);if(r.protocol=M.protocol,r.authority=M.authority,"/"!==M.path&&(r.path=""+M.path+r.path),!ef.REQUIRE_ACCESS_TOKEN)return H(r);if(!(A=A||ef.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");if("s"===A[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");
return r.params=r.params.filter(function(W){return-1===W.indexOf("access_token")}),r.params.push("access_token\x3d"+A),H(r)};var Sh=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,Ui=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,zh=function(r){this.type=r;this.anonId=null;this.eventData={};this.queue=[];this.pendingRequest=null};zh.prototype.getStorageKey=function(r){var A,M=L(ef.ACCESS_TOKEN);return A=M&&M.u?self.btoa(encodeURIComponent(M.u).replace(/%([0-9A-F]{2})/g,function(W,ka){return String.fromCharCode(Number("0x"+
ka))})):ef.ACCESS_TOKEN||"",r?"mapbox.eventData."+r+":"+A:"mapbox.eventData:"+A};zh.prototype.fetchEventData=function(){var r=I("localStorage"),A=this.getStorageKey(),M=this.getStorageKey("uuid");if(r)try{var W=self.localStorage.getItem(A);W&&(this.eventData=JSON.parse(W));var ka=self.localStorage.getItem(M);ka&&(this.anonId=ka)}catch(wa){z("Unable to read from LocalStorage")}};zh.prototype.saveEventData=function(){var r=I("localStorage"),A=this.getStorageKey(),M=this.getStorageKey("uuid");if(r)try{self.localStorage.setItem(M,
this.anonId),1<=Object.keys(this.eventData).length&&self.localStorage.setItem(A,JSON.stringify(this.eventData))}catch(W){z("Unable to write to LocalStorage")}};zh.prototype.processRequests=function(r){};zh.prototype.postEvent=function(r,A,M,W){var ka=this;if(ef.EVENTS_URL){var wa=N(ef.EVENTS_URL);wa.params.push("access_token\x3d"+(W||ef.ACCESS_TOKEN||""));r={event:this.type,created:(new Date(r)).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:"01",userId:this.anonId};A=A?g(r,
A):r;wa={url:H(wa),headers:{"Content-Type":"text/plain"},body:JSON.stringify([A])};this.pendingRequest=Yb(wa,function(Fa){ka.pendingRequest=null;M(Fa);ka.saveEventData();ka.processRequests(W)})}};zh.prototype.queueRequest=function(r,A){this.queue.push(r);this.processRequests(A)};var dh,zf,ug=function(r){function A(){r.call(this,"map.load");this.success={};this.skuToken=""}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.postMapLoadEvent=function(M,W,
ka,wa){this.skuToken=ka;(ef.EVENTS_URL&&wa||ef.ACCESS_TOKEN&&Array.isArray(M)&&M.some(function(Fa){return K(Fa)||Sh.test(Fa)}))&&this.queueRequest({id:W,timestamp:Date.now()},wa)},A.prototype.processRequests=function(M){var W=this;if(!this.pendingRequest&&0!==this.queue.length){var ka=this.queue.shift(),wa=ka.id;ka=ka.timestamp;wa&&this.success[wa]||(this.anonId||this.fetchEventData(),t(this.anonId)||(this.anonId=q()),this.postEvent(ka,{skuToken:this.skuToken},function(Fa){Fa||wa&&(W.success[wa]=
!0)},M))}},A}(zh),ek=new (function(r){function A(M){r.call(this,"appUserTurnstile");this._customAccessToken=M}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.postTurnstileEvent=function(M,W){ef.EVENTS_URL&&ef.ACCESS_TOKEN&&Array.isArray(M)&&M.some(function(ka){return K(ka)||Sh.test(ka)})&&this.queueRequest(Date.now(),W)},A.prototype.processRequests=function(M){var W=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&
this.eventData.tokenU||this.fetchEventData();var ka=L(ef.ACCESS_TOKEN),wa=ka?ka.u:ef.ACCESS_TOKEN;ka=wa!==this.eventData.tokenU;t(this.anonId)||(this.anonId=q(),ka=!0);var Fa=this.queue.shift();if(this.eventData.lastSuccess){var Ua=new Date(this.eventData.lastSuccess),bb=new Date(Fa),qb=(Fa-this.eventData.lastSuccess)/864E5;ka=ka||1<=qb||-1>qb||Ua.getDate()!==bb.getDate()}else ka=!0;if(!ka)return this.processRequests();this.postEvent(Fa,{"enabled.telemetry":!1},function(Bb){Bb||(W.eventData.lastSuccess=
Fa,W.eventData.tokenU=wa)},M)}},A}(zh)),hh=ek.postTurnstileEvent.bind(ek),Hh=new ug,Db=Hh.postMapLoadEvent.bind(Hh),Y=500,ba=50,aa,ja=1/0,Da={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Da);var Sa=function(r){function A(M,W,ka){401===W&&Sh.test(ka)&&(M+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");
r.call(this,M);this.status=W;this.url=ka;this.name=this.constructor.name;this.message=M}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},A}(Error),gb=C()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},sb=function(r,A){if(!(/^file:/.test(M=r.url)||/^file:/.test(gb())&&!/^\w+:/.test(M))){if(self.fetch&&
self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(W,ka){var wa,Fa=new self.AbortController,Ua=new self.Request(W.url,{method:W.method||"GET",body:W.body,credentials:W.credentials,headers:W.headers,referrer:gb(),signal:Fa.signal}),bb=!1,qb=!1,Bb=0<(wa=Ua.url).indexOf("sku\x3d")&&Sh.test(wa);"json"===W.type&&Ua.headers.set("Accept","application/json");wa=function($b,hc,rc){if(!qb){if($b&&"SecurityError"!==$b.message&&z($b),hc&&rc)return Rb(hc);var Kb=
Date.now();self.fetch(Ua).then(function(Pb){if(Pb.ok){var Gc=Bb?Pb.clone():null;return Rb(Pb,Gc,Kb)}return ka(new Sa(Pb.statusText,Pb.status,W.url))}).catch(function(Pb){20!==Pb.code&&ka(Error(Pb.message))})}};var Rb=function($b,hc,rc){("arrayBuffer"===W.type?$b.arrayBuffer():"json"===W.type?$b.json():$b.text()).then(function(Kb){qb||(hc&&rc&&function(Pb,Gc,Yc){if(P(),dh){var Pc={status:Gc.status,statusText:Gc.statusText,headers:new self.Headers};Gc.headers.forEach(function(zd,Id){return Pc.headers.set(Id,
zd)});var xd=v(Gc.headers.get("Cache-Control")||"");xd["no-store"]||(xd["max-age"]&&Pc.headers.set("Expires",(new Date(Yc+1E3*xd["max-age"])).toUTCString()),42E4>(new Date(Pc.headers.get("Expires"))).getTime()-Yc||function(zd,Id){if(void 0===zf)try{new Response(new ReadableStream),zf=!0}catch(Td){zf=!1}zf?Id(zd.body):zd.blob().then(Id)}(Gc,function(zd){var Id=new self.Response(zd,Pc);P();dh&&dh.then(function(Td){return Td.put(Q(Pb.url),Id)}).catch(function(Td){return z(Td.message)})}))}}(Ua,hc,rc),
bb=!0,ka(null,Kb,$b.headers.get("Cache-Control"),$b.headers.get("Expires")))}).catch(function(Kb){qb||ka(Error(Kb.message))})};return Bb?function($b,hc){if(P(),!dh)return hc(null);var rc=Q($b.url);dh.then(function(Kb){Kb.match(rc).then(function(Pb){if(Pb){var Gc=new Date(Pb.headers.get("Expires")||0);var Yc=v(Pb.headers.get("Cache-Control")||"");Gc=Gc>Date.now()&&!Yc["no-cache"]}else Gc=!1;Kb.delete(rc);Gc&&Kb.put(rc,Pb.clone());hc(null,Pb,Gc)}).catch(hc)}).catch(hc)}(Ua,wa):wa(null,null),{cancel:function(){qb=
!0;bb||Fa.abort()}}}(r,A);if(C()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",r,A,void 0,!0)}var M;return function(W,ka){var wa=new self.XMLHttpRequest,Fa;for(Fa in wa.open(W.method||"GET",W.url,!0),"arrayBuffer"===W.type&&(wa.responseType="arraybuffer"),W.headers)wa.setRequestHeader(Fa,W.headers[Fa]);return"json"===W.type&&(wa.responseType="text",wa.setRequestHeader("Accept","application/json")),wa.withCredentials="include"===W.credentials,wa.onerror=function(){ka(Error(wa.statusText))},
wa.onload=function(){if((200<=wa.status&&300>wa.status||0===wa.status)&&null!==wa.response){var Ua=wa.response;if("json"===W.type)try{Ua=JSON.parse(wa.response)}catch(bb){return ka(bb)}ka(null,Ua,wa.getResponseHeader("Cache-Control"),wa.getResponseHeader("Expires"))}else ka(new Sa(wa.statusText,wa.status,W.url))},wa.send(W.body),{cancel:function(){return wa.abort()}}}(r,A)},Ob=function(r,A){return sb(g(r,{type:"arrayBuffer"}),A)},Yb=function(r,A){return sb(g(r,{method:"POST"}),A)};var cc=[];var Nc=
0;var Lc=function(r,A){if(Qg.supported&&(r.headers||(r.headers={}),r.headers.accept="image/webp,*/*"),Nc>=ef.MAX_PARALLEL_IMAGE_REQUESTS)return r={requestParameters:r,callback:A,cancelled:!1,cancel:function(){this.cancelled=!0}},cc.push(r),r;Nc++;var M=!1,W=function(){if(!M)for(M=!0,Nc--;cc.length&&Nc<ef.MAX_PARALLEL_IMAGE_REQUESTS;){var wa=cc.shift();wa.cancelled||(wa.cancel=Lc(wa.requestParameters,wa.callback).cancel)}},ka=Ob(r,function(wa,Fa,Ua,bb){W();wa?A(wa):Fa&&(S()?function(qb,Bb){qb=new self.Blob([new Uint8Array(qb)],
{type:"image/png"});self.createImageBitmap(qb).then(function(Rb){Bb(null,Rb)}).catch(function(Rb){Bb(Error("Could not load image because of "+Rb.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Fa,A):function(qb,Bb,Rb,$b){var hc=new self.Image,rc=self.URL;hc.onload=function(){Bb(null,hc);rc.revokeObjectURL(hc.src)};hc.onerror=function(){return Bb(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};
var Kb=new self.Blob([new Uint8Array(qb)],{type:"image/png"});hc.cacheControl=Rb;hc.expires=$b;hc.src=qb.byteLength?rc.createObjectURL(Kb):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII\x3d"}(Fa,A,Ua,bb))});return{cancel:function(){ka.cancel();W()}}},Cc=function(r,A){void 0===A&&(A={});g(this,A);this.type=r},Kc=function(r){function A(M,W){void 0===W&&(W={});r.call(this,"error",g({error:M},W))}return r&&(A.__proto__=r),(A.prototype=
Object.create(r&&r.prototype)).constructor=A,A}(Cc),Hc=function(){};Hc.prototype.on=function(r,A){return this._listeners=this._listeners||{},O(r,A,this._listeners),this};Hc.prototype.off=function(r,A){return U(r,A,this._listeners),U(r,A,this._oneTimeListeners),this};Hc.prototype.once=function(r,A){return this._oneTimeListeners=this._oneTimeListeners||{},O(r,A,this._oneTimeListeners),this};Hc.prototype.fire=function(r,A){"string"==typeof r&&(r=new Cc(r,A||{}));A=r.type;if(this.listens(A)){r.target=
this;for(var M=0,W=this._listeners&&this._listeners[A]?this._listeners[A].slice():[];M<W.length;M+=1)W[M].call(this,r);M=0;for(W=this._oneTimeListeners&&this._oneTimeListeners[A]?this._oneTimeListeners[A].slice():[];M<W.length;M+=1){var ka=W[M];U(A,ka,this._oneTimeListeners);ka.call(this,r)}(A=this._eventedParent)&&(g(r,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),A.fire(r))}else r instanceof Kc&&console.error(r.error);return this};Hc.prototype.listens=
function(r){return this._listeners&&this._listeners[r]&&0<this._listeners[r].length||this._oneTimeListeners&&this._oneTimeListeners[r]&&0<this._oneTimeListeners[r].length||this._eventedParent&&this._eventedParent.listens(r)};Hc.prototype.setEventedParent=function(r,A){return this._eventedParent=r,this._eventedParentData=A,this};var bc={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",
default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:"source_vector source_raster source_raster_dem source_geojson source_video source_image".split(" "),source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",
value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},
minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},
tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},
clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",
length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:"layout_fill layout_line layout_circle layout_heatmap layout_fill-extrusion layout_symbol layout_raster layout_hillshade layout_background".split(" "),
layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",
values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",
values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,
parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},
"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,
requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",
requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,
parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",
length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],
expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",
default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",
default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",
values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},
requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",
{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},
"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],
expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",
default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",
values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"\x3d\x3d":{},"!\x3d":{},"\x3e":{},"\x3e\x3d":{},"\x3c":{},"\x3c\x3d":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",
default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},
in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},
format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},
"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},
distance:{group:"Math"},"\x3d\x3d":{group:"Decision"},"!\x3d":{group:"Decision"},"\x3e":{group:"Decision"},"\x3c":{group:"Decision"},"\x3e\x3d":{group:"Decision"},"\x3c\x3d":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},
"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,
parameters:["zoom"]},transition:!0}},paint:"paint_fill paint_line paint_circle paint_heatmap paint_fill-extrusion paint_symbol paint_raster paint_hillshade paint_background".split(" "),paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",
expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,
maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,
maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature",
"feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],
expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",
default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",
default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",
.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",
values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",
default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],
expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,
expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,
expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},
"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Aa=function(r,A,M,W){this.message=(r?r+": ":"")+M;W&&(this.identifier=W);null!=A&&A.__line__&&(this.line=A.__line__)},Ha=function(r){function A(M,W){r.call(this,W);this.message=W;this.key=M}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,
A}(Error),Qa=function(r,A){void 0===A&&(A=[]);this.parent=r;this.bindings={};for(r=0;r<A.length;r+=1){var M=A[r];this.bindings[M[0]]=M[1]}};Qa.prototype.concat=function(r){return new Qa(this,r)};Qa.prototype.get=function(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw Error(r+" not found in scope.");};Qa.prototype.has=function(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)};var hb={kind:"null"},ub={kind:"number"},Mb={kind:"string"},Tb=
{kind:"boolean"},uc={kind:"color"},kc={kind:"object"},nc={kind:"value"},ad={kind:"collator"},kd={kind:"formatted"},td={kind:"resolvedImage"},Cd=[hb,ub,Mb,Tb,uc,kd,kc,ia(nc),td],Md=d(function(r,A){function M(Ua){return 0>(Ua=Math.round(Ua))?0:255<Ua?255:Ua}function W(Ua){return M("%"===Ua[Ua.length-1]?parseFloat(Ua)/100*255:parseInt(Ua))}function ka(Ua){return 0>(bb="%"===Ua[Ua.length-1]?parseFloat(Ua)/100:parseFloat(Ua))?0:1<bb?1:bb;var bb}function wa(Ua,bb,qb){return 0>qb?qb+=1:1<qb&&--qb,1>6*qb?
Ua+(bb-Ua)*qb*6:1>2*qb?bb:2>3*qb?Ua+(bb-Ua)*(2/3-qb)*6:Ua}var Fa={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,
149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,
79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,
105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,
206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,
1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,
160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,
180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{A.parseCSSColor=function(Ua){var bb;Ua=Ua.replace(/ /g,"").toLowerCase();if(Ua in Fa)return Fa[Ua].slice();if("#"===Ua[0])return 4===Ua.length?0<=(bb=parseInt(Ua.substr(1),16))&&4095>=bb?[(3840&bb)>>4|(3840&bb)>>8,240&bb|(240&bb)>>4,15&bb|(15&bb)<<4,1]:null:
7===Ua.length&&0<=(bb=parseInt(Ua.substr(1),16))&&16777215>=bb?[(16711680&bb)>>16,(65280&bb)>>8,255&bb,1]:null;var qb=Ua.indexOf("("),Bb=Ua.indexOf(")");if(-1!==qb&&Bb+1===Ua.length)switch(bb=Ua.substr(0,qb),qb=Ua.substr(qb+1,Bb-(qb+1)).split(","),Ua=1,bb){case "rgba":if(4!==qb.length)break;Ua=ka(qb.pop());case "rgb":return 3!==qb.length?null:[W(qb[0]),W(qb[1]),W(qb[2]),Ua];case "hsla":if(4!==qb.length)break;Ua=ka(qb.pop());case "hsl":if(3===qb.length)return bb=(parseFloat(qb[0])%360+360)%360/360,
Bb=ka(qb[1]),qb=ka(qb[2]),Bb=.5>=qb?qb*(Bb+1):qb+Bb-qb*Bb,qb=2*qb-Bb,[M(255*wa(qb,Bb,bb+1/3)),M(255*wa(qb,Bb,bb)),M(255*wa(qb,Bb,bb-1/3)),Ua]}return null}}catch(Ua){}}).parseCSSColor,Ed=function(r,A,M,W){void 0===W&&(W=1);this.r=r;this.g=A;this.b=M;this.a=W};Ed.parse=function(r){if(r){if(r instanceof Ed)return r;if("string"==typeof r&&(r=Md(r)))return new Ed(r[0]/255*r[3],r[1]/255*r[3],r[2]/255*r[3],r[3])}};Ed.prototype.toString=function(){var r=this.toArray();return"rgba("+Math.round(r[0])+","+Math.round(r[1])+
","+Math.round(r[2])+","+r[3]+")"};Ed.prototype.toArray=function(){var r=this.a;return 0===r?[0,0,0,0]:[255*this.r/r,255*this.g/r,255*this.b/r,r]};Ed.black=new Ed(0,0,0,1);Ed.white=new Ed(1,1,1,1);Ed.transparent=new Ed(0,0,0,0);Ed.red=new Ed(1,0,0,1);var Sd=function(r,A,M){this.sensitivity=r?A?"variant":"case":A?"accent":"base";this.locale=M;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Sd.prototype.compare=function(r,A){return this.collator.compare(r,
A)};Sd.prototype.resolvedLocale=function(){return(new Intl.Collator(this.locale?this.locale:[])).resolvedOptions().locale};var ee=function(r,A,M,W,ka){this.text=r;this.image=A;this.scale=M;this.fontStack=W;this.textColor=ka},Zd=function(r){this.sections=r};Zd.fromString=function(r){return new Zd([new ee(r,null,null,null,null)])};Zd.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(r){return 0!==r.text.length||r.image&&0!==r.image.name.length})};Zd.factory=
function(r){return r instanceof Zd?r:Zd.fromString(r)};Zd.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(r){return r.text}).join("")};Zd.prototype.serialize=function(){for(var r=["format"],A=0,M=this.sections;A<M.length;A+=1){var W=M[A];if(W.image)r.push(["image",W.image.name]);else{r.push(W.text);var ka={};W.fontStack&&(ka["text-font"]=["literal",W.fontStack.split(",")]);W.scale&&(ka["font-scale"]=W.scale);W.textColor&&(ka["text-color"]=["rgba"].concat(W.textColor.toArray()));
r.push(ka)}}return r};var me=function(r){this.name=r.name;this.available=r.available};me.prototype.toString=function(){return this.name};me.fromString=function(r){return r?new me({name:r,available:!1}):null};me.prototype.serialize=function(){return["image",this.name]};var De=function(r,A){this.type=r;this.value=A};De.parse=function(r,A){if(2!==r.length)return A.error("'literal' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(!ta(r[1]))return A.error("invalid value");
r=r[1];var M=oa(r);A=A.expectedType;return"array"!==M.kind||0!==M.N||!A||"array"!==A.kind||"number"==typeof A.N&&0!==A.N||(M=A),new De(M,r)};De.prototype.evaluate=function(){return this.value};De.prototype.eachChild=function(){};De.prototype.outputDefined=function(){return!0};De.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ed?["rgba"].concat(this.value.toArray()):this.value instanceof Zd?this.value.serialize():
this.value};var he=function(r){this.name="ExpressionEvaluationError";this.message=r};he.prototype.toJSON=function(){return this.message};var Re={string:Mb,number:ub,boolean:Tb,object:kc},Xe=function(r,A){this.type=r;this.args=A};Xe.parse=function(r,A){if(2>r.length)return A.error("Expected at least one argument.");var M=1,W=r[0];if("array"===W){if(2<r.length){W=r[1];if("string"!=typeof W||!(W in Re)||"object"===W)return A.error('The item type argument of "array" must be one of string, number, boolean',
1);W=Re[W];M++}else W=nc;if(3<r.length){if(null!==r[2]&&("number"!=typeof r[2]||0>r[2]||r[2]!==Math.floor(r[2])))return A.error('The length argument to "array" must be a positive integer literal',2);var ka=r[2];M++}ka=ia(W,ka)}else ka=Re[W];for(W=[];M<r.length;M++){var wa=A.parse(r[M],M,nc);if(!wa)return null;W.push(wa)}return new Xe(ka,W)};Xe.prototype.evaluate=function(r){for(var A=0;A<this.args.length;A++){var M=this.args[A].evaluate(r);if(!fa(this.type,oa(M)))return M;if(A===this.args.length-
1)throw new he("Expected value to be of type "+ha(this.type)+", but found "+ha(oa(M))+" instead.");}return null};Xe.prototype.eachChild=function(r){this.args.forEach(r)};Xe.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})};Xe.prototype.serialize=function(){var r=this.type,A=[r.kind];if("array"===r.kind){var M=r.itemType;if("string"===M.kind||"number"===M.kind||"boolean"===M.kind)A.push(M.kind),r=r.N,("number"==typeof r||1<this.args.length)&&A.push(r)}return A.concat(this.args.map(function(W){return W.serialize()}))};
var pf=function(r){this.type=kd;this.sections=r};pf.parse=function(r,A){if(2>r.length)return A.error("Expected at least one argument.");var M=r[1];if(!Array.isArray(M)&&"object"==typeof M)return A.error("First argument must be an image or text section.");M=[];for(var W=!1,ka=1;ka<=r.length-1;++ka){var wa=r[ka];if(W&&"object"==typeof wa&&!Array.isArray(wa)){W=!1;var Fa=null;if(wa["font-scale"]&&!(Fa=A.parse(wa["font-scale"],1,ub)))return null;var Ua=null;if(wa["text-font"]&&!(Ua=A.parse(wa["text-font"],
1,ia(Mb))))return null;var bb=null;if(wa["text-color"]&&!(bb=A.parse(wa["text-color"],1,uc)))return null;wa=M[M.length-1];wa.scale=Fa;wa.font=Ua;wa.textColor=bb}else{Fa=A.parse(r[ka],1,nc);if(!Fa)return null;W=Fa.type.kind;if("string"!==W&&"value"!==W&&"null"!==W&&"resolvedImage"!==W)return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");W=!0;M.push({content:Fa,scale:null,font:null,textColor:null})}}return new pf(M)};pf.prototype.evaluate=function(r){return new Zd(this.sections.map(function(A){var M=
A.content.evaluate(r);return oa(M)===td?new ee("",M,null,null,null):new ee(va(M),null,A.scale?A.scale.evaluate(r):null,A.font?A.font.evaluate(r).join(","):null,A.textColor?A.textColor.evaluate(r):null)}))};pf.prototype.eachChild=function(r){for(var A=0,M=this.sections;A<M.length;A+=1){var W=M[A];r(W.content);W.scale&&r(W.scale);W.font&&r(W.font);W.textColor&&r(W.textColor)}};pf.prototype.outputDefined=function(){return!1};pf.prototype.serialize=function(){for(var r=["format"],A=0,M=this.sections;A<
M.length;A+=1){var W=M[A];r.push(W.content.serialize());var ka={};W.scale&&(ka["font-scale"]=W.scale.serialize());W.font&&(ka["text-font"]=W.font.serialize());W.textColor&&(ka["text-color"]=W.textColor.serialize());r.push(ka)}return r};var cf=function(r){this.type=td;this.input=r};cf.parse=function(r,A){return 2!==r.length?A.error("Expected two arguments."):(r=A.parse(r[1],1,Mb))?new cf(r):A.error("No image name provided.")};cf.prototype.evaluate=function(r){var A=this.input.evaluate(r),M=me.fromString(A);
return M&&r.availableImages&&(M.available=-1<r.availableImages.indexOf(A)),M};cf.prototype.eachChild=function(r){r(this.input)};cf.prototype.outputDefined=function(){return!1};cf.prototype.serialize=function(){return["image",this.input.serialize()]};var mg={"to-boolean":Tb,"to-color":uc,"to-number":ub,"to-string":Mb},df=function(r,A){this.type=r;this.args=A};df.parse=function(r,A){if(2>r.length)return A.error("Expected at least one argument.");var M=r[0];if(("to-boolean"===M||"to-string"===M)&&2!==
r.length)return A.error("Expected one argument.");M=mg[M];for(var W=[],ka=1;ka<r.length;ka++){var wa=A.parse(r[ka],ka,nc);if(!wa)return null;W.push(wa)}return new df(M,W)};df.prototype.evaluate=function(r){if("boolean"===this.type.kind)return!!this.args[0].evaluate(r);if("color"===this.type.kind){for(var A,M,W=0,ka=this.args;W<ka.length;W+=1){if(M=null,(A=ka[W].evaluate(r))instanceof Ed)return A;if("string"==typeof A){var wa=r.parseColor(A);if(wa)return wa}else if(Array.isArray(A)&&!(M=3>A.length||
4<A.length?"Invalid rbga value "+JSON.stringify(A)+": expected an array containing either three or four numeric values.":ua(A[0],A[1],A[2],A[3])))return new Ed(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new he(M||"Could not parse color from value '"+("string"==typeof A?A:String(JSON.stringify(A)))+"'");}if("number"===this.type.kind){A=null;M=0;for(W=this.args;M<W.length;M+=1){if(null===(A=W[M].evaluate(r)))return 0;ka=Number(A);if(!isNaN(ka))return ka}throw new he("Could not convert "+JSON.stringify(A)+
" to number.");}return"formatted"===this.type.kind?Zd.fromString(va(this.args[0].evaluate(r))):"resolvedImage"===this.type.kind?me.fromString(va(this.args[0].evaluate(r))):va(this.args[0].evaluate(r))};df.prototype.eachChild=function(r){this.args.forEach(r)};df.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})};df.prototype.serialize=function(){if("formatted"===this.type.kind)return(new pf([{content:this.args[0],scale:null,font:null,textColor:null}])).serialize();
if("resolvedImage"===this.type.kind)return(new cf(this.args[0])).serialize();var r=["to-"+this.type.kind];return this.eachChild(function(A){r.push(A.serialize())}),r};var kf=["Unknown","Point","LineString","Polygon"],ce=function(){this.formattedSection=this.featureState=this.feature=this.globals=null;this._parseColorCache={};this.canonical=this.availableImages=null};ce.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null};ce.prototype.geometryType=function(){return this.feature?
"number"==typeof this.feature.type?kf[this.feature.type]:this.feature.type:null};ce.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null};ce.prototype.canonicalID=function(){return this.canonical};ce.prototype.properties=function(){return this.feature&&this.feature.properties||{}};ce.prototype.parseColor=function(r){var A=this._parseColorCache[r];return A||(A=this._parseColorCache[r]=Ed.parse(r)),A};var Le=function(r,A,M,W){this.name=r;this.type=
A;this._evaluate=M;this.args=W};Le.prototype.evaluate=function(r){return this._evaluate(r,this.args)};Le.prototype.eachChild=function(r){this.args.forEach(r)};Le.prototype.outputDefined=function(){return!1};Le.prototype.serialize=function(){return[this.name].concat(this.args.map(function(r){return r.serialize()}))};Le.parse=function(r,A){var M,W=r[0],ka=Le.definitions[W];if(!ka)return A.error('Unknown expression "'+W+'". If you wanted a literal array, use ["literal", [...]].',0);var wa=Array.isArray(ka)?
ka[0]:ka.type;ka=Array.isArray(ka)?[[ka[1],ka[2]]]:ka.overloads;for(var Fa=ka.filter(function(Pb){Pb=Pb[0];return!Array.isArray(Pb)||Pb.length===r.length-1}),Ua=null,bb=0;bb<Fa.length;bb+=1){Ua=Fa[bb];var qb=Ua[0],Bb=Ua[1];Ua=new ff(A.registry,A.path,null,A.scope);for(var Rb=[],$b=!1,hc=1;hc<r.length;hc++){var rc=r[hc],Kb=Array.isArray(qb)?qb[hc-1]:qb.type;rc=Ua.parse(rc,1+Rb.length,Kb);if(!rc){$b=!0;break}Rb.push(rc)}if(!$b)if(Array.isArray(qb)&&qb.length!==Rb.length)Ua.error("Expected "+qb.length+
" arguments, but found "+Rb.length+" instead.");else{for($b=0;$b<Rb.length;$b++)hc=Array.isArray(qb)?qb[$b]:qb.type,rc=Rb[$b],Ua.concat($b+1).checkSubtype(hc,rc.type);if(0===Ua.errors.length)return new Le(W,wa,Bb,Rb)}}if(1===Fa.length)(M=A.errors).push.apply(M,Ua.errors);else{M=(Fa.length?Fa:ka).map(function(Pb){var Gc;return Gc=Pb[0],Array.isArray(Gc)?"("+Gc.map(ha).join(", ")+")":"("+ha(Gc.type)+"...)"}).join(" | ");W=[];for(wa=1;wa<r.length;wa++){ka=A.parse(r[wa],1+W.length);if(!ka)return null;
W.push(ha(ka.type))}A.error("Expected arguments of type "+M+", but found ("+W.join(", ")+") instead.")}return null};Le.register=function(r,A){for(var M in Le.definitions=A,A)r[M]=Le};var Bf=function(r,A,M){this.type=ad;this.locale=M;this.caseSensitive=r;this.diacriticSensitive=A};Bf.parse=function(r,A){if(2!==r.length)return A.error("Expected one argument.");r=r[1];if("object"!=typeof r||Array.isArray(r))return A.error("Collator options argument must be an object.");var M=A.parse(void 0!==r["case-sensitive"]&&
r["case-sensitive"],1,Tb);if(!M)return null;var W=A.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,Tb);if(!W)return null;var ka=null;return r.locale&&!(ka=A.parse(r.locale,1,Mb))?null:new Bf(M,W,ka)};Bf.prototype.evaluate=function(r){return new Sd(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)};Bf.prototype.eachChild=function(r){r(this.caseSensitive);r(this.diacriticSensitive);this.locale&&r(this.locale)};Bf.prototype.outputDefined=
function(){return!1};Bf.prototype.serialize=function(){var r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]};var of=function(r,A){this.type=Tb;this.geojson=r;this.geometries=A};of.parse=function(r,A){if(2!==r.length)return A.error("'within' expression requires exactly one argument, but found "+(r.length-1)+" instead.");if(ta(r[1]))if(r=r[1],"FeatureCollection"===
r.type)for(var M=0;M<r.features.length;++M){var W=r.features[M].geometry.type;if("Polygon"===W||"MultiPolygon"===W)return new of(r,r.features[M].geometry)}else if("Feature"===r.type){if(M=r.geometry.type,"Polygon"===M||"MultiPolygon"===M)return new of(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new of(r,r);return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")};of.prototype.evaluate=function(r){if(null!=r.geometry()&&null!=
r.canonicalID()){if("Point"===r.geometryType())return function(A,M){var W=[1/0,1/0,-1/0,-1/0],ka=[1/0,1/0,-1/0,-1/0],wa=A.canonicalID();if("Polygon"===M.type){var Fa=Ka(M.coordinates,ka,wa),Ua=mb(A.geometry(),W,ka,wa);if(!pa(W,ka))return!1;for(var bb=0;bb<Ua.length;bb+=1)if(!za(Ua[bb],Fa))return!1}if("MultiPolygon"===M.type){M=Oa(M.coordinates,ka,wa);A=mb(A.geometry(),W,ka,wa);if(!pa(W,ka))return!1;for(W=0;W<A.length;W+=1){a:{ka=A[W];wa=M;for(Fa=0;Fa<wa.length;Fa++)if(za(ka,wa[Fa])){ka=!0;break a}ka=
!1}if(!ka)return!1}}return!0}(r,this.geometries);if("LineString"===r.geometryType())return function(A,M){var W=[1/0,1/0,-1/0,-1/0],ka=[1/0,1/0,-1/0,-1/0],wa=A.canonicalID();if("Polygon"===M.type){var Fa=Ka(M.coordinates,ka,wa),Ua=tb(A.geometry(),W,ka,wa);if(!pa(W,ka))return!1;for(var bb=0;bb<Ua.length;bb+=1)if(!Ca(Ua[bb],Fa))return!1}if("MultiPolygon"===M.type){M=Oa(M.coordinates,ka,wa);A=tb(A.geometry(),W,ka,wa);if(!pa(W,ka))return!1;for(W=0;W<A.length;W+=1){a:{ka=A[W];wa=M;for(Fa=0;Fa<wa.length;Fa++)if(Ca(ka,
wa[Fa])){ka=!0;break a}ka=!1}if(!ka)return!1}}return!0}(r,this.geometries)}return!1};of.prototype.eachChild=function(){};of.prototype.outputDefined=function(){return!0};of.prototype.serialize=function(){return["within",this.geojson]};var Pf=function(r,A){this.type=A.type;this.name=r;this.boundExpression=A};Pf.parse=function(r,A){if(2!==r.length||"string"!=typeof r[1])return A.error("'var' expression requires exactly one string literal argument.");r=r[1];return A.scope.has(r)?new Pf(r,A.scope.get(r)):
A.error('Unknown variable "'+r+'". Make sure "'+r+'" has been bound in an enclosing "let" expression before using it.',1)};Pf.prototype.evaluate=function(r){return this.boundExpression.evaluate(r)};Pf.prototype.eachChild=function(){};Pf.prototype.outputDefined=function(){return!1};Pf.prototype.serialize=function(){return["var",this.name]};var ff=function(r,A,M,W,ka){void 0===A&&(A=[]);void 0===W&&(W=new Qa);void 0===ka&&(ka=[]);this.registry=r;this.path=A;this.key=A.map(function(wa){return"["+wa+
"]"}).join("");this.scope=W;this.errors=ka;this.expectedType=M};ff.prototype.parse=function(r,A,M,W,ka){return void 0===ka&&(ka={}),A?this.concat(A,M,W)._parse(r,ka):this._parse(r,ka)};ff.prototype._parse=function(r,A){function M(wa,Fa,Ua){return"assert"===Ua?new Xe(Fa,[wa]):"coerce"===Ua?new df(Fa,[wa]):wa}if(null!==r&&"string"!=typeof r&&"boolean"!=typeof r&&"number"!=typeof r||(r=["literal",r]),Array.isArray(r)){if(0===r.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');
var W=r[0];if("string"!=typeof W)return this.error("Expression name must be a string, but found "+typeof W+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var ka=this.registry[W];if(ka){r=ka.parse(r,this);if(!r)return null;if(this.expectedType)if(W=this.expectedType,ka=r.type,"string"!==W.kind&&"number"!==W.kind&&"boolean"!==W.kind&&"object"!==W.kind&&"array"!==W.kind||"value"!==ka.kind)if("color"!==W.kind&&"formatted"!==W.kind&&"resolvedImage"!==W.kind||"value"!==ka.kind&&
"string"!==ka.kind){if(this.checkSubtype(W,ka))return null}else r=M(r,W,A.typeAnnotation||"coerce");else r=M(r,W,A.typeAnnotation||"assert");if(!(r instanceof De)&&"resolvedImage"!==r.type.kind&&function Ua(Fa){if(Fa instanceof Pf)return Ua(Fa.boundExpression);if(Fa instanceof Le&&"error"===Fa.name||Fa instanceof Bf||Fa instanceof of)return!1;var bb=Fa instanceof df||Fa instanceof Xe,qb=!0;return Fa.eachChild(function(Bb){qb=bb?qb&&Ua(Bb):qb&&Bb instanceof De}),!!qb&&nb(Fa)&&fb(Fa,["zoom","heatmap-density",
"line-progress","accumulated","is-supported-script"])}(r)){A=new ce;try{r=new De(r.type,r.evaluate(A))}catch(Fa){return this.error(Fa.message),null}}return r}return this.error('Unknown expression "'+W+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===r?"'undefined' value invalid. Use null instead.":"object"==typeof r?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof r+" instead.")};ff.prototype.concat=function(r,
A,M){r="number"==typeof r?this.path.concat(r):this.path;M=M?this.scope.concat(M):this.scope;return new ff(this.registry,r,A||null,M,this.errors)};ff.prototype.error=function(r){for(var A=[],M=arguments.length-1;0<M--;)A[M]=arguments[M+1];A=""+this.key+A.map(function(W){return"["+W+"]"}).join("");this.errors.push(new Ha(A,r))};ff.prototype.checkSubtype=function(r,A){r=fa(r,A);return r&&this.error(r),r};var rf=function(r,A,M){this.type=r;this.input=A;this.labels=[];this.outputs=[];for(r=0;r<M.length;r+=
1){A=M[r];var W=A[1];this.labels.push(A[0]);this.outputs.push(W)}};rf.parse=function(r,A){if(4>r.length-1)return A.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if(0!=(r.length-1)%2)return A.error("Expected an even number of arguments.");var M=A.parse(r[1],1,ub);if(!M)return null;var W=[],ka=null;A.expectedType&&"value"!==A.expectedType.kind&&(ka=A.expectedType);for(var wa=1;wa<r.length;wa+=2){var Fa=1===wa?-1/0:r[wa],Ua=r[wa+1],bb=wa,qb=wa+1;if("number"!=typeof Fa)return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',
bb);if(W.length&&W[W.length-1][0]>=Fa)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',bb);Ua=A.parse(Ua,qb,ka);if(!Ua)return null;ka=ka||Ua.type;W.push([Fa,Ua])}return new rf(ka,M,W)};rf.prototype.evaluate=function(r){var A=this.labels,M=this.outputs;if(1===A.length)return M[0].evaluate(r);var W=this.input.evaluate(r);if(W<=A[0])return M[0].evaluate(r);var ka=A.length;return W>=A[ka-1]?M[ka-1].evaluate(r):M[ab(A,W)].evaluate(r)};
rf.prototype.eachChild=function(r){r(this.input);for(var A=0,M=this.outputs;A<M.length;A+=1)r(M[A])};rf.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})};rf.prototype.serialize=function(){for(var r=["step",this.input.serialize()],A=0;A<this.labels.length;A++)0<A&&r.push(this.labels[A]),r.push(this.outputs[A].serialize());return r};var ti=Object.freeze({__proto__:null,number:ra,color:function(r,A,M){return new Ed(ra(r.r,A.r,M),ra(r.g,A.g,M),ra(r.b,
A.b,M),ra(r.a,A.a,M))},array:function(r,A,M){return r.map(function(W,ka){return ra(W,A[ka],M)})}}),Sg=6/29*3*(6/29),Wb=Math.PI/180,Xj=180/Math.PI,Jg={forward:ib,reverse:Na,interpolate:function(r,A,M){return{l:ra(r.l,A.l,M),a:ra(r.a,A.a,M),b:ra(r.b,A.b,M),alpha:ra(r.alpha,A.alpha,M)}}},If={forward:function(r){var A=ib(r),M=A.a,W=A.b,ka=Math.atan2(W,M)*Xj;return{h:0>ka?ka+360:ka,c:Math.sqrt(M*M+W*W),l:A.l,alpha:r.a}},reverse:function(r){var A=r.h*Wb,M=r.c;return Na({l:r.l,a:Math.cos(A)*M,b:Math.sin(A)*
M,alpha:r.alpha})},interpolate:function(r,A,M){var W=r.h,ka=A.h-W;return{h:W+M*(180<ka||-180>ka?ka-360*Math.round(ka/360):ka),c:ra(r.c,A.c,M),l:ra(r.l,A.l,M),alpha:ra(r.alpha,A.alpha,M)}}},Ch=Object.freeze({__proto__:null,lab:Jg,hcl:If}),Lf=function(r,A,M,W,ka){this.type=r;this.operator=A;this.interpolation=M;this.input=W;this.labels=[];this.outputs=[];for(r=0;r<ka.length;r+=1)A=ka[r],M=A[1],this.labels.push(A[0]),this.outputs.push(M)};Lf.interpolationFactor=function(r,A,M,W){var ka=0;"exponential"===
r.name?ka=Za(A,r.base,M,W):"linear"===r.name?ka=Za(A,1,M,W):"cubic-bezier"===r.name&&(r=r.controlPoints,ka=(new yj(r[0],r[1],r[2],r[3])).solve(Za(A,1,M,W)));return ka};Lf.parse=function(r,A){var M=r[0],W=r[1],ka=r[2],wa=r.slice(3);if(!Array.isArray(W)||0===W.length)return A.error("Expected an interpolation type expression.",1);if("linear"===W[0])W={name:"linear"};else if("exponential"===W[0]){W=W[1];if("number"!=typeof W)return A.error("Exponential interpolation requires a numeric base.",1,1);W={name:"exponential",
base:W}}else{if("cubic-bezier"!==W[0])return A.error("Unknown interpolation type "+String(W[0]),1,0);W=W.slice(1);if(4!==W.length||W.some(function($b){return"number"!=typeof $b||0>$b||1<$b}))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);W={name:"cubic-bezier",controlPoints:W}}if(4>r.length-1)return A.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if(0!=(r.length-1)%2)return A.error("Expected an even number of arguments.");
if(!(ka=A.parse(ka,2,ub)))return null;r=[];var Fa=null;"interpolate-hcl"===M||"interpolate-lab"===M?Fa=uc:A.expectedType&&"value"!==A.expectedType.kind&&(Fa=A.expectedType);for(var Ua=0;Ua<wa.length;Ua+=2){var bb=wa[Ua],qb=wa[Ua+1],Bb=Ua+3,Rb=Ua+4;if("number"!=typeof bb)return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Bb);if(r.length&&r[r.length-1][0]>=bb)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',
Bb);qb=A.parse(qb,Rb,Fa);if(!qb)return null;Fa=Fa||qb.type;r.push([bb,qb])}return"number"===Fa.kind||"color"===Fa.kind||"array"===Fa.kind&&"number"===Fa.itemType.kind&&"number"==typeof Fa.N?new Lf(Fa,M,W,ka,r):A.error("Type "+ha(Fa)+" is not interpolatable.")};Lf.prototype.evaluate=function(r){var A=this.labels,M=this.outputs;if(1===A.length)return M[0].evaluate(r);var W=this.input.evaluate(r);if(W<=A[0])return M[0].evaluate(r);var ka=A.length;if(W>=A[ka-1])return M[ka-1].evaluate(r);ka=ab(A,W);A=
Lf.interpolationFactor(this.interpolation,W,A[ka],A[ka+1]);W=M[ka].evaluate(r);r=M[ka+1].evaluate(r);return"interpolate"===this.operator?ti[this.type.kind.toLowerCase()](W,r,A):"interpolate-hcl"===this.operator?If.reverse(If.interpolate(If.forward(W),If.forward(r),A)):Jg.reverse(Jg.interpolate(Jg.forward(W),Jg.forward(r),A))};Lf.prototype.eachChild=function(r){r(this.input);for(var A=0,M=this.outputs;A<M.length;A+=1)r(M[A])};Lf.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})};
Lf.prototype.serialize=function(){var r="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);r=[this.operator,r,this.input.serialize()];for(var A=0;A<this.labels.length;A++)r.push(this.labels[A],this.outputs[A].serialize());return r};var Dh=function(r,A){this.type=r;this.args=A};Dh.parse=function(r,A){if(2>r.length)return A.error("Expectected at least one argument.");
var M=null,W=A.expectedType;W&&"value"!==W.kind&&(M=W);var ka=[],wa=0;for(r=r.slice(1);wa<r.length;wa+=1){var Fa=A.parse(r[wa],1+ka.length,M,void 0,{typeAnnotation:"omit"});if(!Fa)return null;M=M||Fa.type;ka.push(Fa)}A=W&&ka.some(function(Ua){return fa(W,Ua.type)});return new Dh(A?nc:M,ka)};Dh.prototype.evaluate=function(r){for(var A,M=null,W=0,ka=0,wa=this.args;ka<wa.length&&(W++,(M=wa[ka].evaluate(r))&&M instanceof me&&!M.available&&(A||(A=M.name),M=null,W===this.args.length&&(M=A)),null===M);ka+=
1);return M};Dh.prototype.eachChild=function(r){this.args.forEach(r)};Dh.prototype.outputDefined=function(){return this.args.every(function(r){return r.outputDefined()})};Dh.prototype.serialize=function(){var r=["coalesce"];return this.eachChild(function(A){r.push(A.serialize())}),r};var Eh=function(r,A){this.type=A.type;this.bindings=[].concat(r);this.result=A};Eh.prototype.evaluate=function(r){return this.result.evaluate(r)};Eh.prototype.eachChild=function(r){for(var A=0,M=this.bindings;A<M.length;A+=
1)r(M[A][1]);r(this.result)};Eh.parse=function(r,A){if(4>r.length)return A.error("Expected at least 3 arguments, but found "+(r.length-1)+" instead.");for(var M=[],W=1;W<r.length-1;W+=2){var ka=r[W];if("string"!=typeof ka)return A.error("Expected string, but found "+typeof ka+" instead.",W);if(/[^a-zA-Z0-9_]/.test(ka))return A.error("Variable names must contain only alphanumeric characters or '_'.",W);var wa=A.parse(r[W+1],W+1);if(!wa)return null;M.push([ka,wa])}return(r=A.parse(r[r.length-1],r.length-
1,A.expectedType,M))?new Eh(M,r):null};Eh.prototype.outputDefined=function(){return this.result.outputDefined()};Eh.prototype.serialize=function(){for(var r=["let"],A=0,M=this.bindings;A<M.length;A+=1){var W=M[A];r.push(W[0],W[1].serialize())}return r.push(this.result.serialize()),r};var Xh=function(r,A,M){this.type=r;this.index=A;this.input=M};Xh.parse=function(r,A){if(3!==r.length)return A.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var M=A.parse(r[1],1,ub);r=A.parse(r[2],
2,ia(A.expectedType||nc));return M&&r?new Xh(r.type.itemType,M,r):null};Xh.prototype.evaluate=function(r){var A=this.index.evaluate(r);r=this.input.evaluate(r);if(0>A)throw new he("Array index out of bounds: "+A+" \x3c 0.");if(A>=r.length)throw new he("Array index out of bounds: "+A+" \x3e "+(r.length-1)+".");if(A!==Math.floor(A))throw new he("Array index must be an integer, but found "+A+" instead.");return r[A]};Xh.prototype.eachChild=function(r){r(this.index);r(this.input)};Xh.prototype.outputDefined=
function(){return!1};Xh.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var te=function(r,A){this.type=Tb;this.needle=r;this.haystack=A};te.parse=function(r,A){if(3!==r.length)return A.error("Expected 2 arguments, but found "+(r.length-1)+" instead.");var M=A.parse(r[1],1,nc);r=A.parse(r[2],2,nc);return M&&r?na(M.type,[Tb,Mb,ub,hb,nc])?new te(M,r):A.error("Expected first argument to be of type boolean, string, number or null, but found "+ha(M.type)+" instead"):
null};te.prototype.evaluate=function(r){var A=this.needle.evaluate(r);r=this.haystack.evaluate(r);if(!r)return!1;if(!sa(A,["boolean","string","number","null"]))throw new he("Expected first argument to be of type boolean, string, number or null, but found "+ha(oa(A))+" instead.");if(!sa(r,["string","array"]))throw new he("Expected second argument to be of type array or string, but found "+ha(oa(r))+" instead.");return 0<=r.indexOf(A)};te.prototype.eachChild=function(r){r(this.needle);r(this.haystack)};
te.prototype.outputDefined=function(){return!0};te.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var pd=function(r,A,M){this.type=ub;this.needle=r;this.haystack=A;this.fromIndex=M};pd.parse=function(r,A){if(2>=r.length||5<=r.length)return A.error("Expected 3 or 4 arguments, but found "+(r.length-1)+" instead.");var M=A.parse(r[1],1,nc),W=A.parse(r[2],2,nc);return M&&W?na(M.type,[Tb,Mb,ub,hb,nc])?4===r.length?(r=A.parse(r[3],3,ub))?new pd(M,W,r):null:
new pd(M,W):A.error("Expected first argument to be of type boolean, string, number or null, but found "+ha(M.type)+" instead"):null};pd.prototype.evaluate=function(r){var A=this.needle.evaluate(r),M=this.haystack.evaluate(r);if(!sa(A,["boolean","string","number","null"]))throw new he("Expected first argument to be of type boolean, string, number or null, but found "+ha(oa(A))+" instead.");if(!sa(M,["string","array"]))throw new he("Expected second argument to be of type array or string, but found "+
ha(oa(M))+" instead.");return this.fromIndex?(r=this.fromIndex.evaluate(r),M.indexOf(A,r)):M.indexOf(A)};pd.prototype.eachChild=function(r){r(this.needle);r(this.haystack);this.fromIndex&&r(this.fromIndex)};pd.prototype.outputDefined=function(){return!1};pd.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};
var Xd=function(r,A,M,W,ka,wa){this.inputType=r;this.type=A;this.input=M;this.cases=W;this.outputs=ka;this.otherwise=wa};Xd.parse=function(r,A){if(5>r.length)return A.error("Expected at least 4 arguments, but found only "+(r.length-1)+".");if(1!=r.length%2)return A.error("Expected an even number of arguments.");var M;A.expectedType&&"value"!==A.expectedType.kind&&(M=A.expectedType);for(var W={},ka=[],wa=2;wa<r.length-1;wa+=2){var Fa=r[wa],Ua=r[wa+1];Array.isArray(Fa)||(Fa=[Fa]);var bb=A.concat(wa);
if(0===Fa.length)return bb.error("Expected at least one branch label.");for(var qb=0;qb<Fa.length;qb+=1){var Bb=Fa[qb];if("number"!=typeof Bb&&"string"!=typeof Bb)return bb.error("Branch labels must be numbers or strings.");if("number"==typeof Bb&&Math.abs(Bb)>Number.MAX_SAFE_INTEGER)return bb.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof Bb&&Math.floor(Bb)!==Bb)return bb.error("Numeric branch labels must be integer values.");if(Rb){if(bb.checkSubtype(Rb,
oa(Bb)))return null}else var Rb=oa(Bb);if(void 0!==W[String(Bb)])return bb.error("Branch labels must be unique.");W[String(Bb)]=ka.length}Ua=A.parse(Ua,wa,M);if(!Ua)return null;M=M||Ua.type;ka.push(Ua)}wa=A.parse(r[1],1,nc);return wa?(r=A.parse(r[r.length-1],r.length-1,M))?"value"!==wa.type.kind&&A.concat(1).checkSubtype(Rb,wa.type)?null:new Xd(Rb,M,wa,W,ka,r):null:null};Xd.prototype.evaluate=function(r){var A=this.input.evaluate(r);return(oa(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(r)};
Xd.prototype.eachChild=function(r){r(this.input);this.outputs.forEach(r);r(this.otherwise)};Xd.prototype.outputDefined=function(){return this.outputs.every(function(r){return r.outputDefined()})&&this.otherwise.outputDefined()};Xd.prototype.serialize=function(){for(var r=this,A=["match",this.input.serialize()],M=[],W={},ka=0,wa=Object.keys(this.cases).sort();ka<wa.length;ka+=1){var Fa=wa[ka];void 0===(Ua=W[this.cases[Fa]])?(W[this.cases[Fa]]=M.length,M.push([this.cases[Fa],[Fa]])):M[Ua][1].push(Fa)}W=
function(bb){return"number"===r.inputType.kind?Number(bb):bb};for(ka=0;ka<M.length;ka+=1){wa=M[ka];var Ua=wa[0];Ua=wa[1];A.push(1===Ua.length?W(Ua[0]):Ua.map(W));A.push(this.outputs[outputIndex$1].serialize())}return A.push(this.otherwise.serialize()),A};var He=function(r,A,M){this.type=r;this.branches=A;this.otherwise=M};He.parse=function(r,A){if(4>r.length)return A.error("Expected at least 3 arguments, but found only "+(r.length-1)+".");if(0!=r.length%2)return A.error("Expected an odd number of arguments.");
var M;A.expectedType&&"value"!==A.expectedType.kind&&(M=A.expectedType);for(var W=[],ka=1;ka<r.length-1;ka+=2){var wa=A.parse(r[ka],ka,Tb);if(!wa)return null;var Fa=A.parse(r[ka+1],ka+1,M);if(!Fa)return null;W.push([wa,Fa]);M=M||Fa.type}return(r=A.parse(r[r.length-1],r.length-1,M))?new He(M,W,r):null};He.prototype.evaluate=function(r){for(var A=0,M=this.branches;A<M.length;A+=1){var W=M[A],ka=W[1];if(W[0].evaluate(r))return ka.evaluate(r)}return this.otherwise.evaluate(r)};He.prototype.eachChild=
function(r){for(var A=0,M=this.branches;A<M.length;A+=1){var W=M[A],ka=W[1];r(W[0]);r(ka)}r(this.otherwise)};He.prototype.outputDefined=function(){return this.branches.every(function(r){return r[1].outputDefined()})&&this.otherwise.outputDefined()};He.prototype.serialize=function(){var r=["case"];return this.eachChild(function(A){r.push(A.serialize())}),r};var Pe=function(r,A,M,W){this.type=r;this.input=A;this.beginIndex=M;this.endIndex=W};Pe.parse=function(r,A){if(2>=r.length||5<=r.length)return A.error("Expected 3 or 4 arguments, but found "+
(r.length-1)+" instead.");var M=A.parse(r[1],1,nc),W=A.parse(r[2],2,ub);return M&&W?na(M.type,[ia(nc),Mb,nc])?4===r.length?(r=A.parse(r[3],3,ub))?new Pe(M.type,M,W,r):null:new Pe(M.type,M,W):A.error("Expected first argument to be of type array or string, but found "+ha(M.type)+" instead"):null};Pe.prototype.evaluate=function(r){var A=this.input.evaluate(r),M=this.beginIndex.evaluate(r);if(!sa(A,["string","array"]))throw new he("Expected first argument to be of type array or string, but found "+ha(oa(A))+
" instead.");return this.endIndex?(r=this.endIndex.evaluate(r),A.slice(M,r)):A.slice(M)};Pe.prototype.eachChild=function(r){r(this.input);r(this.beginIndex);this.endIndex&&r(this.endIndex)};Pe.prototype.outputDefined=function(){return!1};Pe.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Cf=Ma("\x3d\x3d",
function(r,A,M){return A===M},Ba),eg=Ma("!\x3d",function(r,A,M){return A!==M},function(r,A,M,W){return!Ba(0,A,M,W)}),oh=Ma("\x3c",function(r,A,M){return A<M},function(r,A,M,W){return 0>W.compare(A,M)}),We=Ma("\x3e",function(r,A,M){return A>M},function(r,A,M,W){return 0<W.compare(A,M)}),Gi=Ma("\x3c\x3d",function(r,A,M){return A<=M},function(r,A,M,W){return 0>=W.compare(A,M)}),hg=Ma("\x3e\x3d",function(r,A,M){return A>=M},function(r,A,M,W){return 0<=W.compare(A,M)}),Yh=function(r,A,M,W,ka){this.type=
Mb;this.number=r;this.locale=A;this.currency=M;this.minFractionDigits=W;this.maxFractionDigits=ka};Yh.parse=function(r,A){if(3!==r.length)return A.error("Expected two arguments.");var M=A.parse(r[1],1,ub);if(!M)return null;r=r[2];if("object"!=typeof r||Array.isArray(r))return A.error("NumberFormat options argument must be an object.");var W=null;if(r.locale&&!(W=A.parse(r.locale,1,Mb)))return null;var ka=null;if(r.currency&&!(ka=A.parse(r.currency,1,Mb)))return null;var wa=null;if(r["min-fraction-digits"]&&
!(wa=A.parse(r["min-fraction-digits"],1,ub)))return null;var Fa=null;return r["max-fraction-digits"]&&!(Fa=A.parse(r["max-fraction-digits"],1,ub))?null:new Yh(M,W,ka,wa,Fa)};Yh.prototype.evaluate=function(r){return(new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?
this.maxFractionDigits.evaluate(r):void 0})).format(this.number.evaluate(r))};Yh.prototype.eachChild=function(r){r(this.number);this.locale&&r(this.locale);this.currency&&r(this.currency);this.minFractionDigits&&r(this.minFractionDigits);this.maxFractionDigits&&r(this.maxFractionDigits)};Yh.prototype.outputDefined=function(){return!1};Yh.prototype.serialize=function(){var r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.minFractionDigits&&
(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]};var Jf=function(r){this.type=ub;this.input=r};Jf.parse=function(r,A){return 2!==r.length?A.error("Expected 1 argument, but found "+(r.length-1)+" instead."):(r=A.parse(r[1],1))?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?A.error("Expected argument of type string or array, but found "+
ha(r.type)+" instead."):new Jf(r):null};Jf.prototype.evaluate=function(r){r=this.input.evaluate(r);if("string"==typeof r||Array.isArray(r))return r.length;throw new he("Expected value to be of type string or array, but found "+ha(oa(r))+" instead.");};Jf.prototype.eachChild=function(r){r(this.input)};Jf.prototype.outputDefined=function(){return!1};Jf.prototype.serialize=function(){var r=["length"];return this.eachChild(function(A){r.push(A.serialize())}),r};var ng={"\x3d\x3d":Cf,"!\x3d":eg,"\x3e":We,
"\x3c":oh,"\x3e\x3d":hg,"\x3c\x3d":Gi,array:Xe,at:Xh,boolean:Xe,case:He,coalesce:Dh,collator:Bf,format:pf,image:cf,in:te,"index-of":pd,interpolate:Lf,"interpolate-hcl":Lf,"interpolate-lab":Lf,length:Jf,let:Eh,literal:De,match:Xd,number:Xe,"number-format":Yh,object:Xe,slice:Pe,step:rf,string:Xe,"to-boolean":df,"to-color":df,"to-number":df,"to-string":df,var:Pf,within:of};Le.register(ng,{error:[{kind:"error"},[Mb],function(r,A){throw new he(A[0].evaluate(r));}],typeof:[Mb,[nc],function(r,A){return ha(oa(A[0].evaluate(r)))}],
"to-rgba":[ia(ub,4),[uc],function(r,A){return A[0].evaluate(r).toArray()}],rgb:[uc,[ub,ub,ub],$a],rgba:[uc,[ub,ub,ub,ub],$a],has:{type:Tb,overloads:[[[Mb],function(r,A){A=A[0].evaluate(r);r=r.properties();return A in r}],[[Mb,kc],function(r,A){var M=A[1];A=A[0].evaluate(r);r=M.evaluate(r);return A in r}]]},get:{type:nc,overloads:[[[Mb],function(r,A){return lb(A[0].evaluate(r),r.properties())}],[[Mb,kc],function(r,A){var M=A[1];return lb(A[0].evaluate(r),M.evaluate(r))}]]},"feature-state":[nc,[Mb],
function(r,A){return lb(A[0].evaluate(r),r.featureState||{})}],properties:[kc,[],function(r){return r.properties()}],"geometry-type":[Mb,[],function(r){return r.geometryType()}],id:[nc,[],function(r){return r.id()}],zoom:[ub,[],function(r){return r.globals.zoom}],"heatmap-density":[ub,[],function(r){return r.globals.heatmapDensity||0}],"line-progress":[ub,[],function(r){return r.globals.lineProgress||0}],accumulated:[nc,[],function(r){return void 0===r.globals.accumulated?null:r.globals.accumulated}],
"+":[ub,{type:ub},function(r,A){for(var M=0,W=0;W<A.length;W+=1)M+=A[W].evaluate(r);return M}],"*":[ub,{type:ub},function(r,A){for(var M=1,W=0;W<A.length;W+=1)M*=A[W].evaluate(r);return M}],"-":{type:ub,overloads:[[[ub,ub],function(r,A){var M=A[1];return A[0].evaluate(r)-M.evaluate(r)}],[[ub],function(r,A){return-A[0].evaluate(r)}]]},"/":[ub,[ub,ub],function(r,A){var M=A[1];return A[0].evaluate(r)/M.evaluate(r)}],"%":[ub,[ub,ub],function(r,A){var M=A[1];return A[0].evaluate(r)%M.evaluate(r)}],ln2:[ub,
[],function(){return Math.LN2}],pi:[ub,[],function(){return Math.PI}],e:[ub,[],function(){return Math.E}],"^":[ub,[ub,ub],function(r,A){var M=A[1];return Math.pow(A[0].evaluate(r),M.evaluate(r))}],sqrt:[ub,[ub],function(r,A){return Math.sqrt(A[0].evaluate(r))}],log10:[ub,[ub],function(r,A){return Math.log(A[0].evaluate(r))/Math.LN10}],ln:[ub,[ub],function(r,A){return Math.log(A[0].evaluate(r))}],log2:[ub,[ub],function(r,A){return Math.log(A[0].evaluate(r))/Math.LN2}],sin:[ub,[ub],function(r,A){return Math.sin(A[0].evaluate(r))}],
cos:[ub,[ub],function(r,A){return Math.cos(A[0].evaluate(r))}],tan:[ub,[ub],function(r,A){return Math.tan(A[0].evaluate(r))}],asin:[ub,[ub],function(r,A){return Math.asin(A[0].evaluate(r))}],acos:[ub,[ub],function(r,A){return Math.acos(A[0].evaluate(r))}],atan:[ub,[ub],function(r,A){return Math.atan(A[0].evaluate(r))}],min:[ub,{type:ub},function(r,A){return Math.min.apply(Math,A.map(function(M){return M.evaluate(r)}))}],max:[ub,{type:ub},function(r,A){return Math.max.apply(Math,A.map(function(M){return M.evaluate(r)}))}],
abs:[ub,[ub],function(r,A){return Math.abs(A[0].evaluate(r))}],round:[ub,[ub],function(r,A){r=A[0].evaluate(r);return 0>r?-Math.round(-r):Math.round(r)}],floor:[ub,[ub],function(r,A){return Math.floor(A[0].evaluate(r))}],ceil:[ub,[ub],function(r,A){return Math.ceil(A[0].evaluate(r))}],"filter-\x3d\x3d":[Tb,[Mb,nc],function(r,A){var M=A[0];A=A[1];return r.properties()[M.value]===A.value}],"filter-id-\x3d\x3d":[Tb,[nc],function(r,A){A=A[0];return r.id()===A.value}],"filter-type-\x3d\x3d":[Tb,[Mb],function(r,
A){A=A[0];return r.geometryType()===A.value}],"filter-\x3c":[Tb,[Mb,nc],function(r,A){var M=A[0];A=A[1];r=r.properties()[M.value];M=A.value;return typeof r==typeof M&&r<M}],"filter-id-\x3c":[Tb,[nc],function(r,A){A=A[0];r=r.id();A=A.value;return typeof r==typeof A&&r<A}],"filter-\x3e":[Tb,[Mb,nc],function(r,A){var M=A[0];A=A[1];r=r.properties()[M.value];M=A.value;return typeof r==typeof M&&r>M}],"filter-id-\x3e":[Tb,[nc],function(r,A){A=A[0];r=r.id();A=A.value;return typeof r==typeof A&&r>A}],"filter-\x3c\x3d":[Tb,
[Mb,nc],function(r,A){var M=A[0];A=A[1];r=r.properties()[M.value];M=A.value;return typeof r==typeof M&&r<=M}],"filter-id-\x3c\x3d":[Tb,[nc],function(r,A){A=A[0];r=r.id();A=A.value;return typeof r==typeof A&&r<=A}],"filter-\x3e\x3d":[Tb,[Mb,nc],function(r,A){var M=A[0];A=A[1];r=r.properties()[M.value];M=A.value;return typeof r==typeof M&&r>=M}],"filter-id-\x3e\x3d":[Tb,[nc],function(r,A){A=A[0];r=r.id();A=A.value;return typeof r==typeof A&&r>=A}],"filter-has":[Tb,[nc],function(r,A){return A[0].value in
r.properties()}],"filter-has-id":[Tb,[],function(r){return null!==r.id()&&void 0!==r.id()}],"filter-type-in":[Tb,[ia(Mb)],function(r,A){return 0<=A[0].value.indexOf(r.geometryType())}],"filter-id-in":[Tb,[ia(nc)],function(r,A){return 0<=A[0].value.indexOf(r.id())}],"filter-in-small":[Tb,[Mb,ia(nc)],function(r,A){var M=A[0];return 0<=A[1].value.indexOf(r.properties()[M.value])}],"filter-in-large":[Tb,[Mb,ia(nc)],function(r,A){var M=A[0];A=A[1];a:{r=r.properties()[M.value];M=A.value;var W=0;for(A=A.value.length-
1;W<=A;){var ka=W+A>>1;if(M[ka]===r){A=!0;break a}M[ka]>r?A=ka-1:W=ka+1}A=!1}return A}],all:{type:Tb,overloads:[[[Tb,Tb],function(r,A){var M=A[1];return A[0].evaluate(r)&&M.evaluate(r)}],[{type:Tb},function(r,A){for(var M=0;M<A.length;M+=1)if(!A[M].evaluate(r))return!1;return!0}]]},any:{type:Tb,overloads:[[[Tb,Tb],function(r,A){var M=A[1];return A[0].evaluate(r)||M.evaluate(r)}],[{type:Tb},function(r,A){for(var M=0;M<A.length;M+=1)if(A[M].evaluate(r))return!0;return!1}]]},"!":[Tb,[Tb],function(r,
A){return!A[0].evaluate(r)}],"is-supported-script":[Tb,[Mb],function(r,A){var M=r.globals&&r.globals.isSupportedScript;return!M||M(A[0].evaluate(r))}],upcase:[Mb,[Mb],function(r,A){return A[0].evaluate(r).toUpperCase()}],downcase:[Mb,[Mb],function(r,A){return A[0].evaluate(r).toLowerCase()}],concat:[Mb,{type:nc},function(r,A){return A.map(function(M){return va(M.evaluate(r))}).join("")}],"resolved-locale":[Mb,[ad],function(r,A){return A[0].evaluate(r).resolvedLocale()}]});var Ug=function(r,A){this.expression=
r;this._warningHistory={};this._evaluator=new ce;this._defaultValue=A?"color"===A.type&&zb(A.default)?new Ed(0,0,0,0):"color"===A.type?Ed.parse(A.default)||null:void 0===A.default?null:A.default:null;this._enumValues=A&&"enum"===A.type?A.values:null};Ug.prototype.evaluateWithoutErrorHandling=function(r,A,M,W,ka,wa){return this._evaluator.globals=r,this._evaluator.feature=A,this._evaluator.featureState=M,this._evaluator.canonical=W,this._evaluator.availableImages=ka||null,this._evaluator.formattedSection=
wa,this.expression.evaluate(this._evaluator)};Ug.prototype.evaluate=function(r,A,M,W,ka,wa){this._evaluator.globals=r;this._evaluator.feature=A||null;this._evaluator.featureState=M||null;this._evaluator.canonical=W;this._evaluator.availableImages=ka||null;this._evaluator.formattedSection=wa||null;try{var Fa=this.expression.evaluate(this._evaluator);if(null==Fa||"number"==typeof Fa&&Fa!=Fa)return this._defaultValue;if(this._enumValues&&!(Fa in this._enumValues))throw new he("Expected value to be one of "+
Object.keys(this._enumValues).map(function(Ua){return JSON.stringify(Ua)}).join(", ")+", but found "+JSON.stringify(Fa)+" instead.");return Fa}catch(Ua){return this._warningHistory[Ua.message]||(this._warningHistory[Ua.message]=!0,"undefined"!=typeof console&&console.warn(Ua.message)),this._defaultValue}};var fe=function(r,A){this.kind=r;this._styleExpression=A;this.isStateDependent="constant"!==r&&!Ta(A.expression)};fe.prototype.evaluateWithoutErrorHandling=function(r,A,M,W,ka,wa){return this._styleExpression.evaluateWithoutErrorHandling(r,
A,M,W,ka,wa)};fe.prototype.evaluate=function(r,A,M,W,ka,wa){return this._styleExpression.evaluate(r,A,M,W,ka,wa)};var yf=function(r,A,M,W){this.kind=r;this.zoomStops=M;this._styleExpression=A;this.isStateDependent="camera"!==r&&!Ta(A.expression);this.interpolationType=W};yf.prototype.evaluateWithoutErrorHandling=function(r,A,M,W,ka,wa){return this._styleExpression.evaluateWithoutErrorHandling(r,A,M,W,ka,wa)};yf.prototype.evaluate=function(r,A,M,W,ka,wa){return this._styleExpression.evaluate(r,A,M,
W,ka,wa)};yf.prototype.interpolationFactor=function(r,A,M){return this.interpolationType?Lf.interpolationFactor(this.interpolationType,r,A,M):0};var Tg=function(r,A){this._parameters=r;this._specification=A;da(this,function wa(W,ka){var Fa="color"===ka.type,Ua=W.stops&&"object"==typeof W.stops[0][0],bb=Ua||!(Ua||void 0!==W.property),qb=W.type||(pb(ka)?"exponential":"interval");if(Fa&&((W=da({},W)).stops&&(W.stops=W.stops.map(function(Pb){return[Pb[0],Ed.parse(Pb[1])]})),W.default=Ed.parse(W.default?
W.default:ka.default)),W.colorSpace&&"rgb"!==W.colorSpace&&!Ch[W.colorSpace])throw Error("Unknown color space: "+W.colorSpace);if("exponential"===qb)var Bb=ed;else if("interval"===qb)Bb=Ac;else if("categorical"===qb){Bb=pc;var Rb=Object.create(null);Fa=0;for(var $b=W.stops;Fa<$b.length;Fa+=1){var hc=$b[Fa];Rb[hc[0]]=hc[1]}var rc=typeof W.stops[0][0]}else{if("identity"!==qb)throw Error('Unknown function type "'+qb+'"');Bb=Rc}if(Ua){Ua={};bb=[];for(qb=0;qb<W.stops.length;qb++)Fa=W.stops[qb],$b=Fa[0].zoom,
void 0===Ua[$b]&&(Ua[$b]={zoom:$b,type:W.type,property:W.property,default:W.default,stops:[]},bb.push($b)),Ua[$b].stops.push([Fa[0].value,Fa[1]]);var Kb=[];for(qb=0;qb<bb.length;qb+=1)Fa=bb[qb],Kb.push([Ua[Fa].zoom,wa(Ua[Fa],ka)]);Ua={name:"linear"};return{kind:"composite",interpolationType:Ua,interpolationFactor:Lf.interpolationFactor.bind(void 0,Ua),zoomStops:Kb.map(function(Pb){return Pb[0]}),evaluate:function(Pb,Gc){Pb=Pb.zoom;return ed({stops:Kb,base:W.base},ka,Pb).evaluate(Pb,Gc)}}}return bb?
(Ua="exponential"===qb?{name:"exponential",base:void 0!==W.base?W.base:1}:null,{kind:"camera",interpolationType:Ua,interpolationFactor:Lf.interpolationFactor.bind(void 0,Ua),zoomStops:W.stops.map(function(Pb){return Pb[0]}),evaluate:function(Pb){return Bb(W,ka,Pb.zoom,Rb,rc)}}):{kind:"source",evaluate:function(Pb,Gc){Pb=Gc&&Gc.properties?Gc.properties[W.property]:void 0;return void 0===Pb?Zb(W.default,ka.default):Bb(W,ka,Pb,Rb,rc)}}}(this._parameters,this._specification))};Tg.deserialize=function(r){return new Tg(r._parameters,
r._specification)};Tg.serialize=function(r){return{_parameters:r._parameters,_specification:r._specification}};var qf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},ye={promoteId:function(r){var A=r.key;r=r.value;if("string"===vb(r))return xc({key:A,value:r});var M=[],W;for(W in r)M.push.apply(M,xc({key:A+"."+W,value:r[W]}));return M}},lf={"*":function(){return[]},array:ac,boolean:function(r){var A=r.value;r=r.key;
var M=vb(A);return"boolean"!==M?[new Aa(r,A,"boolean expected, "+M+" found")]:[]},number:Jc,color:function(r){var A=r.key;r=r.value;var M=vb(r);return"string"!==M?[new Aa(A,r,"color expected, "+M+" found")]:null===Md(r)?[new Aa(A,r,'color expected, "'+r+'" found')]:[]},constants:X,enum:vc,filter:yb,function:qc,layer:Oc,object:Fb,source:Mc,light:dd,string:xc,formatted:function(r){return 0===xc(r).length?[]:tc(r)},resolvedImage:function(r){return 0===xc(r).length?[]:tc(r)}};Bd.source=Fd(Mc);Bd.light=
Fd(dd);Bd.layer=Fd(Oc);Bd.filter=Fd(yb);Bd.paintProperty=Fd(Lb);Bd.layoutProperty=Fd(fc);var aj=Bd.light,xk=Bd.paintProperty,yk=Bd.layoutProperty;sd.prototype.insert=function(r,A,M,W,ka){this._forEachCell(A,M,W,ka,this._insertCell,this.uid++);this.keys.push(r);this.bboxes.push(A);this.bboxes.push(M);this.bboxes.push(W);this.bboxes.push(ka)};sd.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";};sd.prototype._insertCell=function(r,A,M,W,ka,wa){this.cells[ka].push(wa)};
sd.prototype.query=function(r,A,M,W,ka){var wa=this.min,Fa=this.max;if(r<=wa&&A<=wa&&Fa<=M&&Fa<=W&&!ka)return Array.prototype.slice.call(this.keys);wa=[];return this._forEachCell(r,A,M,W,this._queryCell,wa,{},ka),wa};sd.prototype._queryCell=function(r,A,M,W,ka,wa,Fa,Ua){ka=this.cells[ka];if(null!==ka)for(var bb=this.keys,qb=this.bboxes,Bb=0;Bb<ka.length;Bb++){var Rb=ka[Bb];if(void 0===Fa[Rb]){var $b=4*Rb;(Ua?Ua(qb[$b+0],qb[$b+1],qb[$b+2],qb[$b+3]):r<=qb[$b+2]&&A<=qb[$b+3]&&M>=qb[$b+0]&&W>=qb[$b+1])?
(Fa[Rb]=!0,wa.push(bb[Rb])):Fa[Rb]=!1}}};sd.prototype._forEachCell=function(r,A,M,W,ka,wa,Fa,Ua){for(var bb=this._convertToCellCoord(r),qb=this._convertToCellCoord(A),Bb=this._convertToCellCoord(M),Rb=this._convertToCellCoord(W);bb<=Bb;bb++)for(var $b=qb;$b<=Rb;$b++){var hc=this.d*$b+bb;if((!Ua||Ua(this._convertFromCellCoord(bb),this._convertFromCellCoord($b),this._convertFromCellCoord(bb+1),this._convertFromCellCoord($b+1)))&&ka.call(this,r,A,M,W,hc,wa,Fa,Ua))return}};sd.prototype._convertFromCellCoord=
function(r){return(r-this.padding)/this.scale};sd.prototype._convertToCellCoord=function(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))};sd.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var r=this.cells,A=3+this.cells.length+1+1,M=0,W=0;W<this.cells.length;W++)M+=this.cells[W].length;M=new Int32Array(A+M+this.keys.length+this.bboxes.length);M[0]=this.extent;M[1]=this.n;M[2]=this.padding;for(W=0;W<r.length;W++){var ka=r[W];M[3+W]=
A;M.set(ka,A);A+=ka.length}return M[3+r.length]=A,M.set(this.keys,A),M[3+r.length+1]=A+=this.keys.length,M.set(this.bboxes,A),M.buffer};var lk=self.ImageData,Dj=self.ImageBitmap,bj={},Oj;for(Oj in cd("Object",Object),sd.serialize=function(r,A){r=r.toArrayBuffer();return A&&A.push(r),{buffer:r}},sd.deserialize=function(r){return new sd(r.buffer)},cd("Grid",sd),cd("Color",Ed),cd("Error",Error),cd("ResolvedImage",me),cd("StylePropertyFunction",Tg),cd("StyleExpression",Ug,{omit:["_evaluator"]}),cd("ZoomDependentExpression",
yf),cd("ZoomConstantExpression",fe),cd("CompoundExpression",Le,{omit:["_evaluate"]}),ng)ng[Oj]._classRegistryKey||cd("Expression_"+Oj,ng[Oj]);var rk=function(){this.first=!0};rk.prototype.update=function(r,A){var M=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=M,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=M,!0):(this.lastFloorZoom>M?(this.lastIntegerZoom=M+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<M&&(this.lastIntegerZoom=M,this.lastIntegerZoomTime=A),
r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=M,!0))};var ae={"Latin-1 Supplement":function(r){return 128<=r&&255>=r},Arabic:function(r){return 1536<=r&&1791>=r},"Arabic Supplement":function(r){return 1872<=r&&1919>=r},"Arabic Extended-A":function(r){return 2208<=r&&2303>=r},"Hangul Jamo":function(r){return 4352<=r&&4607>=r},"Unified Canadian Aboriginal Syllabics":function(r){return 5120<=r&&5759>=r},Khmer:function(r){return 6016<=r&&6143>=r},"Unified Canadian Aboriginal Syllabics Extended":function(r){return 6320<=
r&&6399>=r},"General Punctuation":function(r){return 8192<=r&&8303>=r},"Letterlike Symbols":function(r){return 8448<=r&&8527>=r},"Number Forms":function(r){return 8528<=r&&8591>=r},"Miscellaneous Technical":function(r){return 8960<=r&&9215>=r},"Control Pictures":function(r){return 9216<=r&&9279>=r},"Optical Character Recognition":function(r){return 9280<=r&&9311>=r},"Enclosed Alphanumerics":function(r){return 9312<=r&&9471>=r},"Geometric Shapes":function(r){return 9632<=r&&9727>=r},"Miscellaneous Symbols":function(r){return 9728<=
r&&9983>=r},"Miscellaneous Symbols and Arrows":function(r){return 11008<=r&&11263>=r},"CJK Radicals Supplement":function(r){return 11904<=r&&12031>=r},"Kangxi Radicals":function(r){return 12032<=r&&12255>=r},"Ideographic Description Characters":function(r){return 12272<=r&&12287>=r},"CJK Symbols and Punctuation":function(r){return 12288<=r&&12351>=r},Hiragana:function(r){return 12352<=r&&12447>=r},Katakana:function(r){return 12448<=r&&12543>=r},Bopomofo:function(r){return 12544<=r&&12591>=r},"Hangul Compatibility Jamo":function(r){return 12592<=
r&&12687>=r},Kanbun:function(r){return 12688<=r&&12703>=r},"Bopomofo Extended":function(r){return 12704<=r&&12735>=r},"CJK Strokes":function(r){return 12736<=r&&12783>=r},"Katakana Phonetic Extensions":function(r){return 12784<=r&&12799>=r},"Enclosed CJK Letters and Months":function(r){return 12800<=r&&13055>=r},"CJK Compatibility":function(r){return 13056<=r&&13311>=r},"CJK Unified Ideographs Extension A":function(r){return 13312<=r&&19903>=r},"Yijing Hexagram Symbols":function(r){return 19904<=
r&&19967>=r},"CJK Unified Ideographs":function(r){return 19968<=r&&40959>=r},"Yi Syllables":function(r){return 40960<=r&&42127>=r},"Yi Radicals":function(r){return 42128<=r&&42191>=r},"Hangul Jamo Extended-A":function(r){return 43360<=r&&43391>=r},"Hangul Syllables":function(r){return 44032<=r&&55215>=r},"Hangul Jamo Extended-B":function(r){return 55216<=r&&55295>=r},"Private Use Area":function(r){return 57344<=r&&63743>=r},"CJK Compatibility Ideographs":function(r){return 63744<=r&&64255>=r},"Arabic Presentation Forms-A":function(r){return 64336<=
r&&65023>=r},"Vertical Forms":function(r){return 65040<=r&&65055>=r},"CJK Compatibility Forms":function(r){return 65072<=r&&65103>=r},"Small Form Variants":function(r){return 65104<=r&&65135>=r},"Arabic Presentation Forms-B":function(r){return 65136<=r&&65279>=r},"Halfwidth and Fullwidth Forms":function(r){return 65280<=r&&65519>=r}},Ak=null,Ag="unavailable",uh=null,cj=function(r){r&&"string"==typeof r&&-1<r.indexOf("NetworkError")&&(Ag="error");Ak&&Ak(r)},fk=new Hc,mk=function(){if("deferred"!==
Ag||!uh)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ag="loading";Kd();uh&&Ob({url:uh},function(r){r?cj(r):(Ag="loaded",Kd())})},Lg={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Ag||null!=Lg.applyArabicShaping},isLoading:function(){return"loading"===Ag},setState:function(r){Ag=r.pluginStatus;uh=r.pluginURL},isParsed:function(){return null!=Lg.applyArabicShaping&&null!=Lg.processBidirectionalText&&
null!=Lg.processStyledBidirectionalText},getPluginURL:function(){return uh}},mf=function(r,A){this.zoom=r;A?(this.now=A.now,this.fadeDuration=A.fadeDuration,this.zoomHistory=A.zoomHistory,this.transition=A.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new rk,this.transition={})};mf.prototype.isSupportedScript=function(r){a:{for(var A=Lg.isLoaded(),M=0;M<r.length;M+=1){var W=r[M].charCodeAt(0);if(!A&&rd(W)||2304<=W&&3583>=W||3840<=W&&4255>=W||ae.Khmer(W)){r=!1;break a}}r=!0}return r};
mf.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};mf.prototype.getCrossfadeParameters=function(){var r=this.zoom,A=r-Math.floor(r),M=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*M}:{fromScale:.5,toScale:1,t:1-(1-M)*A}};var dj=function(r,A){this.property=r;this.value=A;this.expression=function(M,W){if(zb(M))return new Tg(M,W);if(id(M)){M=wd(M,
W);if("error"===M.result)throw Error(M.value.map(function(wa){return wa.key+": "+wa.message}).join(", "));return M.value}var ka=M;return"string"==typeof M&&"color"===W.type&&(ka=Ed.parse(M)),{kind:"constant",evaluate:function(){return ka}}}(void 0===A?r.specification.default:A,r.specification)};dj.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind};dj.prototype.possiblyEvaluate=function(r,A,M){return this.property.possiblyEvaluate(this,r,A,
M)};var Ej=function(r){this.property=r;this.value=new dj(r,void 0)};Ej.prototype.transitioned=function(r,A){return new pk(this.property,this.value,A,g({},r.transition,this.transition),r.now)};Ej.prototype.untransitioned=function(){return new pk(this.property,this.value,null,{},0)};var ri=function(r){this._properties=r;this._values=Object.create(r.defaultTransitionablePropertyValues)};ri.prototype.getValue=function(r){return F(this._values[r].value.value)};ri.prototype.setValue=function(r,A){this._values.hasOwnProperty(r)||
(this._values[r]=new Ej(this._values[r].property));this._values[r].value=new dj(this._values[r].property,null===A?void 0:F(A))};ri.prototype.getTransition=function(r){return F(this._values[r].transition)};ri.prototype.setTransition=function(r,A){this._values.hasOwnProperty(r)||(this._values[r]=new Ej(this._values[r].property));this._values[r].transition=F(A)||void 0};ri.prototype.serialize=function(){for(var r={},A=0,M=Object.keys(this._values);A<M.length;A+=1){var W=M[A],ka=this.getValue(W);void 0!==
ka&&(r[W]=ka);ka=this.getTransition(W);void 0!==ka&&(r[W+"-transition"]=ka)}return r};ri.prototype.transitioned=function(r,A){for(var M=new be(this._properties),W=0,ka=Object.keys(this._values);W<ka.length;W+=1){var wa=ka[W];M._values[wa]=this._values[wa].transitioned(r,A._values[wa])}return M};ri.prototype.untransitioned=function(){for(var r=new be(this._properties),A=0,M=Object.keys(this._values);A<M.length;A+=1){var W=M[A];r._values[W]=this._values[W].untransitioned()}return r};var pk=function(r,
A,M,W,ka){this.property=r;this.value=A;this.begin=ka+W.delay||0;this.end=this.begin+W.duration||0;r.specification.transition&&(W.delay||W.duration)&&(this.prior=M)};pk.prototype.possiblyEvaluate=function(r,A,M){var W=r.now||0,ka=this.value.possiblyEvaluate(r,A,M),wa=this.prior;if(wa){if(W>this.end||this.value.isDataDriven())return this.prior=null,ka;if(W<this.begin)return wa.possiblyEvaluate(r,A,M);var Fa=(W-this.begin)/(this.end-this.begin);W=this.property;var Ua=W.interpolate;r=wa.possiblyEvaluate(r,
A,M);0>=Fa?Fa=0:1<=Fa?Fa=1:(A=Fa*Fa,M=A*Fa,Fa=4*(.5>Fa?M:3*(Fa-A)+M-.75));return Ua.call(W,r,ka,Fa)}return ka};var be=function(r){this._properties=r;this._values=Object.create(r.defaultTransitioningPropertyValues)};be.prototype.possiblyEvaluate=function(r,A,M){for(var W=new Fh(this._properties),ka=0,wa=Object.keys(this._values);ka<wa.length;ka+=1){var Fa=wa[ka];W._values[Fa]=this._values[Fa].possiblyEvaluate(r,A,M)}return W};be.prototype.hasTransition=function(){for(var r=0,A=Object.keys(this._values);r<
A.length;r+=1)if(this._values[A[r]].prior)return!0;return!1};var dg=function(r){this._properties=r;this._values=Object.create(r.defaultPropertyValues)};dg.prototype.getValue=function(r){return F(this._values[r].value)};dg.prototype.setValue=function(r,A){this._values[r]=new dj(this._values[r].property,null===A?void 0:F(A))};dg.prototype.serialize=function(){for(var r={},A=0,M=Object.keys(this._values);A<M.length;A+=1){var W=M[A],ka=this.getValue(W);void 0!==ka&&(r[W]=ka)}return r};dg.prototype.possiblyEvaluate=
function(r,A,M){for(var W=new Fh(this._properties),ka=0,wa=Object.keys(this._values);ka<wa.length;ka+=1){var Fa=wa[ka];W._values[Fa]=this._values[Fa].possiblyEvaluate(r,A,M)}return W};var Uf=function(r,A,M){this.property=r;this.value=A;this.parameters=M};Uf.prototype.isConstant=function(){return"constant"===this.value.kind};Uf.prototype.constantOr=function(r){return"constant"===this.value.kind?this.value.value:r};Uf.prototype.evaluate=function(r,A,M,W){return this.property.evaluate(this.value,this.parameters,
r,A,M,W)};var Fh=function(r){this._properties=r;this._values=Object.create(r.defaultPossiblyEvaluatedValues)};Fh.prototype.get=function(r){return this._values[r]};var Vd=function(r){this.specification=r};Vd.prototype.possiblyEvaluate=function(r,A){return r.expression.evaluate(A)};Vd.prototype.interpolate=function(r,A,M){var W=ti[this.specification.type];return W?W(r,A,M):r};var ve=function(r,A){this.specification=r;this.overrides=A};ve.prototype.possiblyEvaluate=function(r,A,M,W){return new Uf(this,
"constant"===r.expression.kind||"camera"===r.expression.kind?{kind:"constant",value:r.expression.evaluate(A,null,{},M,W)}:r.expression,A)};ve.prototype.interpolate=function(r,A,M){if("constant"!==r.value.kind||"constant"!==A.value.kind)return r;if(void 0===r.value.value||void 0===A.value.value)return new Uf(this,{kind:"constant",value:void 0},r.parameters);var W=ti[this.specification.type];return W?new Uf(this,{kind:"constant",value:W(r.value.value,A.value.value,M)},r.parameters):r};ve.prototype.evaluate=
function(r,A,M,W,ka,wa){return"constant"===r.kind?r.value:r.evaluate(A,M,W,ka,wa)};var Zh=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.possiblyEvaluate=function(M,W,ka,wa){return void 0===M.value?new Uf(this,{kind:"constant",value:void 0},W):"constant"===M.expression.kind?(ka=M.expression.evaluate(W,null,{},ka,wa),M="resolvedImage"===M.property.specification.type&&"string"!=typeof ka?ka.name:ka,M=this._calculate(M,
M,M,W),new Uf(this,{kind:"constant",value:M},W)):"camera"===M.expression.kind?(M=this._calculate(M.expression.evaluate({zoom:W.zoom-1}),M.expression.evaluate({zoom:W.zoom}),M.expression.evaluate({zoom:W.zoom+1}),W),new Uf(this,{kind:"constant",value:M},W)):new Uf(this,M.expression,W)},A.prototype.evaluate=function(M,W,ka,wa,Fa,Ua){return"source"===M.kind?(M=M.evaluate(W,ka,wa,Fa,Ua),this._calculate(M,M,M,W)):"composite"===M.kind?this._calculate(M.evaluate({zoom:Math.floor(W.zoom)-1},ka,wa),M.evaluate({zoom:Math.floor(W.zoom)},
ka,wa),M.evaluate({zoom:Math.floor(W.zoom)+1},ka,wa),W):M.value},A.prototype._calculate=function(M,W,ka,wa){return wa.zoom>wa.zoomHistory.lastIntegerZoom?{from:M,to:W}:{from:ka,to:W}},A.prototype.interpolate=function(M){return M},A}(ve),ui=function(r){this.specification=r};ui.prototype.possiblyEvaluate=function(r,A,M,W){if(void 0!==r.value)return"constant"===r.expression.kind?(r=r.expression.evaluate(A,null,{},M,W),this._calculate(r,r,r,A)):this._calculate(r.expression.evaluate(new mf(Math.floor(A.zoom-
1),A)),r.expression.evaluate(new mf(Math.floor(A.zoom),A)),r.expression.evaluate(new mf(Math.floor(A.zoom+1),A)),A)};ui.prototype._calculate=function(r,A,M,W){return W.zoom>W.zoomHistory.lastIntegerZoom?{from:r,to:A}:{from:M,to:A}};ui.prototype.interpolate=function(r){return r};var ej=function(r){this.specification=r};ej.prototype.possiblyEvaluate=function(r,A,M,W){return!!r.expression.evaluate(A,null,{},M,W)};ej.prototype.interpolate=function(){return!1};var ph=function(r){for(var A in this.properties=
r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],r){var M=r[A];M.specification.overridable&&this.overridableProperties.push(A);var W=this.defaultPropertyValues[A]=new dj(M,void 0);M=this.defaultTransitionablePropertyValues[A]=new Ej(M);this.defaultTransitioningPropertyValues[A]=M.untransitioned();this.defaultPossiblyEvaluatedValues[A]=W.possiblyEvaluate({})}};
cd("DataDrivenProperty",ve);cd("DataConstantProperty",Vd);cd("CrossFadedDataDrivenProperty",Zh);cd("CrossFadedProperty",ui);cd("ColorRampProperty",ej);var Uh=function(r){function A(M,W){if(r.call(this),this.id=M.id,this.type=M.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==M.type&&(this.metadata=M.metadata,this.minzoom=M.minzoom,this.maxzoom=M.maxzoom,"background"!==M.type&&(this.source=M.source,this.sourceLayer=M["source-layer"],this.filter=M.filter),W.layout&&
(this._unevaluatedLayout=new dg(W.layout)),W.paint)){for(var ka in this._transitionablePaint=new ri(W.paint),M.paint)this.setPaintProperty(ka,M.paint[ka],{validate:!1});for(var wa in M.layout)this.setLayoutProperty(wa,M.layout[wa],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned();this.paint=new Fh(W.paint)}}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},
A.prototype.getLayoutProperty=function(M){return"visibility"===M?this.visibility:this._unevaluatedLayout.getValue(M)},A.prototype.setLayoutProperty=function(M,W,ka){void 0===ka&&(ka={});null!=W&&this._validate(yk,"layers."+this.id+".layout."+M,M,W,ka)||("visibility"!==M?this._unevaluatedLayout.setValue(M,W):this.visibility=W)},A.prototype.getPaintProperty=function(M){return w(M,"-transition")?this._transitionablePaint.getTransition(M.slice(0,-11)):this._transitionablePaint.getValue(M)},A.prototype.setPaintProperty=
function(M,W,ka){if(void 0===ka&&(ka={}),null!=W&&this._validate(xk,"layers."+this.id+".paint."+M,M,W,ka))return!1;if(w(M,"-transition"))return this._transitionablePaint.setTransition(M.slice(0,-11),W||void 0),!1;var wa=this._transitionablePaint._values[M];ka="cross-faded-data-driven"===wa.property.specification["property-type"];var Fa=wa.value.isDataDriven();wa=wa.value;this._transitionablePaint.setValue(M,W);this._handleSpecialPaintPropertyUpdate(M);W=this._transitionablePaint._values[M].value;
return W.isDataDriven()||Fa||ka||this._handleOverridablePaintPropertyUpdate(M,wa,W)},A.prototype._handleSpecialPaintPropertyUpdate=function(M){},A.prototype._handleOverridablePaintPropertyUpdate=function(M,W,ka){return!1},A.prototype.isHidden=function(M){return!!(this.minzoom&&M<this.minzoom)||!!(this.maxzoom&&M>=this.maxzoom)||"none"===this.visibility},A.prototype.updateTransitions=function(M){this._transitioningPaint=this._transitionablePaint.transitioned(M,this._transitioningPaint)},A.prototype.hasTransition=
function(){return this._transitioningPaint.hasTransition()},A.prototype.recalculate=function(M,W){M.getCrossfadeParameters&&(this._crossfadeParameters=M.getCrossfadeParameters());this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(M,void 0,W));this.paint=this._transitioningPaint.possiblyEvaluate(M,void 0,W)},A.prototype.serialize=function(){var M={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,
filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(M.layout=M.layout||{},M.layout.visibility=this.visibility),E(M,function(W,ka){return!(void 0===W||"layout"===ka&&!Object.keys(W).length||"paint"===ka&&!Object.keys(W).length)})},A.prototype._validate=function(M,W,ka,wa,Fa){return void 0===Fa&&(Fa={}),(!Fa||!1!==Fa.validate)&&Od(this,M.call(Bd,{key:W,layerType:this.type,
objectKey:ka,value:wa,styleSpec:bc,style:{glyphs:!0,sprite:!0}}))},A.prototype.is3D=function(){return!1},A.prototype.isTileClipped=function(){return!1},A.prototype.hasOffscreenPass=function(){return!1},A.prototype.resize=function(){},A.prototype.isStateDependent=function(){for(var M in this.paint._values){var W=this.paint.get(M);if(W instanceof Uf&&jb(W.property.specification)&&("source"===W.value.kind||"composite"===W.value.kind)&&W.value.isStateDependent)return!0}return!1},A}(Hc),Fj={Int8:Int8Array,
Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Bg=function(r,A){this._structArray=r;this._pos1=A*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},bf=function(){this.isTransferred=!1;this.capacity=-1;this.resize(0)};bf.serialize=function(r,A){return r._trim(),A&&(r.isTransferred=!0,A.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}};bf.deserialize=function(r){var A=Object.create(this.prototype);
return A.arrayBuffer=r.arrayBuffer,A.length=r.length,A.capacity=r.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A};bf.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())};bf.prototype.clear=function(){this.length=0};bf.prototype.resize=function(r){this.reserve(r);this.length=r};bf.prototype.reserve=function(r){r>this.capacity&&(this.capacity=Math.max(r,Math.floor(5*
this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),r=this.uint8,this._refreshViews(),r&&this.uint8.set(r))};bf.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");};var zj=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=
new Int16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W){var ka=this.length;return this.resize(ka+1),this.emplace(ka,M,W)},A.prototype.emplace=function(M,W,ka){var wa=2*M;return this.int16[wa+0]=W,this.int16[wa+1]=ka,M},A}(bf);zj.prototype.bytesPerElement=4;cd("StructArrayLayout2i4",zj);var Ji=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);
this.int16=new Int16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W,ka,wa){var Fa=this.length;return this.resize(Fa+1),this.emplace(Fa,M,W,ka,wa)},A.prototype.emplace=function(M,W,ka,wa,Fa){var Ua=4*M;return this.int16[Ua+0]=W,this.int16[Ua+1]=ka,this.int16[Ua+2]=wa,this.int16[Ua+3]=Fa,M},A}(bf);Ji.prototype.bytesPerElement=8;cd("StructArrayLayout4i8",Ji);var Ii=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=
A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W,ka,wa,Fa,Ua){var bb=this.length;return this.resize(bb+1),this.emplace(bb,M,W,ka,wa,Fa,Ua)},A.prototype.emplace=function(M,W,ka,wa,Fa,Ua,bb){var qb=6*M;return this.int16[qb+0]=W,this.int16[qb+1]=ka,this.int16[qb+2]=wa,this.int16[qb+3]=Fa,this.int16[qb+4]=Ua,this.int16[qb+5]=bb,M},A}(bf);Ii.prototype.bytesPerElement=12;cd("StructArrayLayout2i4i12",
Ii);var yg=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W,ka,wa,Fa,Ua){var bb=this.length;return this.resize(bb+1),this.emplace(bb,M,W,ka,wa,Fa,Ua)},A.prototype.emplace=function(M,W,ka,wa,Fa,Ua,bb){var qb=4*M,Bb=8*M;return this.int16[qb+0]=W,this.int16[qb+
1]=ka,this.uint8[Bb+4]=wa,this.uint8[Bb+5]=Fa,this.uint8[Bb+6]=Ua,this.uint8[Bb+7]=bb,M},A}(bf);yg.prototype.bytesPerElement=8;cd("StructArrayLayout2i4ub8",yg);var Vg=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb){var $b=this.length;
return this.resize($b+1),this.emplace($b,M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb)},A.prototype.emplace=function(M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb,$b){var hc=9*M,rc=18*M;return this.uint16[hc+0]=W,this.uint16[hc+1]=ka,this.uint16[hc+2]=wa,this.uint16[hc+3]=Fa,this.uint16[hc+4]=Ua,this.uint16[hc+5]=bb,this.uint16[hc+6]=qb,this.uint16[hc+7]=Bb,this.uint8[rc+16]=Rb,this.uint8[rc+17]=$b,M},A}(bf);Vg.prototype.bytesPerElement=18;cd("StructArrayLayout8ui2ub18",Vg);var fh=function(r){function A(){r.apply(this,arguments)}return r&&
(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb,$b,hc){var rc=this.length;return this.resize(rc+1),this.emplace(rc,M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb,$b,hc)},A.prototype.emplace=function(M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb,$b,hc,rc){var Kb=12*M;return this.int16[Kb+
0]=W,this.int16[Kb+1]=ka,this.int16[Kb+2]=wa,this.int16[Kb+3]=Fa,this.uint16[Kb+4]=Ua,this.uint16[Kb+5]=bb,this.uint16[Kb+6]=qb,this.uint16[Kb+7]=Bb,this.int16[Kb+8]=Rb,this.int16[Kb+9]=$b,this.int16[Kb+10]=hc,this.int16[Kb+11]=rc,M},A}(bf);fh.prototype.bytesPerElement=24;cd("StructArrayLayout4i4ui4i24",fh);var si=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);
this.float32=new Float32Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W,ka){var wa=this.length;return this.resize(wa+1),this.emplace(wa,M,W,ka)},A.prototype.emplace=function(M,W,ka,wa){var Fa=3*M;return this.float32[Fa+0]=W,this.float32[Fa+1]=ka,this.float32[Fa+2]=wa,M},A}(bf);si.prototype.bytesPerElement=12;cd("StructArrayLayout3f12",si);var sj=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=
function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M){var W=this.length;return this.resize(W+1),this.emplace(W,M)},A.prototype.emplace=function(M,W){return this.uint32[1*M]=W,M},A}(bf);sj.prototype.bytesPerElement=4;cd("StructArrayLayout1ul4",sj);var fj=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=
new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W,ka,wa,Fa,Ua,bb,qb,Bb){var Rb=this.length;return this.resize(Rb+1),this.emplace(Rb,M,W,ka,wa,Fa,Ua,bb,qb,Bb)},A.prototype.emplace=function(M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb){var $b=10*M;return this.int16[$b+0]=W,this.int16[$b+1]=ka,this.int16[$b+2]=wa,this.int16[$b+3]=Fa,this.int16[$b+4]=Ua,this.int16[$b+
5]=bb,this.uint32[5*M+3]=qb,this.uint16[$b+8]=Bb,this.uint16[$b+9]=Rb,M},A}(bf);fj.prototype.bytesPerElement=20;cd("StructArrayLayout6i1ul2ui20",fj);var gh=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W,ka,wa,Fa,Ua){var bb=this.length;return this.resize(bb+
1),this.emplace(bb,M,W,ka,wa,Fa,Ua)},A.prototype.emplace=function(M,W,ka,wa,Fa,Ua,bb){var qb=6*M;return this.int16[qb+0]=W,this.int16[qb+1]=ka,this.int16[qb+2]=wa,this.int16[qb+3]=Fa,this.int16[qb+4]=Ua,this.int16[qb+5]=bb,M},A}(bf);gh.prototype.bytesPerElement=12;cd("StructArrayLayout2i2i2i12",gh);var Mg=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);
this.float32=new Float32Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W,ka,wa,Fa){var Ua=this.length;return this.resize(Ua+1),this.emplace(Ua,M,W,ka,wa,Fa)},A.prototype.emplace=function(M,W,ka,wa,Fa,Ua){var bb=4*M,qb=8*M;return this.float32[bb+0]=W,this.float32[bb+1]=ka,this.float32[bb+2]=wa,this.int16[qb+6]=Fa,this.int16[qb+7]=Ua,M},A}(bf);Mg.prototype.bytesPerElement=16;cd("StructArrayLayout2f1f2i16",Mg);var gk=function(r){function A(){r.apply(this,
arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W,ka,wa){var Fa=this.length;return this.resize(Fa+1),this.emplace(Fa,M,W,ka,wa)},A.prototype.emplace=function(M,W,ka,wa,Fa){var Ua=12*M,bb=3*M;return this.uint8[Ua+0]=W,this.uint8[Ua+1]=ka,this.float32[bb+1]=wa,this.float32[bb+2]=Fa,M},A}(bf);
gk.prototype.bytesPerElement=12;cd("StructArrayLayout2ub2f12",gk);var Zi=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W,ka){var wa=this.length;return this.resize(wa+1),this.emplace(wa,M,W,ka)},A.prototype.emplace=function(M,W,ka,wa){var Fa=3*M;return this.uint16[Fa+
0]=W,this.uint16[Fa+1]=ka,this.uint16[Fa+2]=wa,M},A}(bf);Zi.prototype.bytesPerElement=6;cd("StructArrayLayout3ui6",Zi);var mj=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},
A.prototype.emplaceBack=function(M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb,$b,hc,rc,Kb,Pb,Gc,Yc){var Pc=this.length;return this.resize(Pc+1),this.emplace(Pc,M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb,$b,hc,rc,Kb,Pb,Gc,Yc)},A.prototype.emplace=function(M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb,$b,hc,rc,Kb,Pb,Gc,Yc,Pc){var xd=24*M,zd=12*M,Id=48*M;return this.int16[xd+0]=W,this.int16[xd+1]=ka,this.uint16[xd+2]=wa,this.uint16[xd+3]=Fa,this.uint32[zd+2]=Ua,this.uint32[zd+3]=bb,this.uint32[zd+4]=qb,this.uint16[xd+10]=Bb,this.uint16[xd+11]=Rb,this.uint16[xd+
12]=$b,this.float32[zd+7]=hc,this.float32[zd+8]=rc,this.uint8[Id+36]=Kb,this.uint8[Id+37]=Pb,this.uint8[Id+38]=Gc,this.uint32[zd+10]=Yc,this.int16[xd+22]=Pc,M},A}(bf);mj.prototype.bytesPerElement=48;cd("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",mj);var Ki=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb,$b,hc,rc,Kb,Pb,Gc,Yc,Pc,xd,zd,Id,Td,Qd,ne,we,pe,ue,Ne){var ge=this.length;return this.resize(ge+1),this.emplace(ge,M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb,$b,hc,rc,Kb,Pb,Gc,Yc,Pc,xd,zd,Id,Td,Qd,ne,we,pe,ue,Ne)},A.prototype.emplace=function(M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb,$b,hc,rc,Kb,Pb,Gc,Yc,Pc,xd,zd,Id,Td,Qd,ne,we,
pe,ue,Ne,ge){var de=34*M,je=17*M;return this.int16[de+0]=W,this.int16[de+1]=ka,this.int16[de+2]=wa,this.int16[de+3]=Fa,this.int16[de+4]=Ua,this.int16[de+5]=bb,this.int16[de+6]=qb,this.int16[de+7]=Bb,this.uint16[de+8]=Rb,this.uint16[de+9]=$b,this.uint16[de+10]=hc,this.uint16[de+11]=rc,this.uint16[de+12]=Kb,this.uint16[de+13]=Pb,this.uint16[de+14]=Gc,this.uint16[de+15]=Yc,this.uint16[de+16]=Pc,this.uint16[de+17]=xd,this.uint16[de+18]=zd,this.uint16[de+19]=Id,this.uint16[de+20]=Td,this.uint16[de+21]=
Qd,this.uint16[de+22]=ne,this.uint32[je+12]=we,this.float32[je+13]=pe,this.float32[je+14]=ue,this.float32[je+15]=Ne,this.float32[je+16]=ge,M},A}(bf);Ki.prototype.bytesPerElement=68;cd("StructArrayLayout8i15ui1ul4f68",Ki);var Aj=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},A.prototype.emplaceBack=
function(M){var W=this.length;return this.resize(W+1),this.emplace(W,M)},A.prototype.emplace=function(M,W){return this.float32[1*M]=W,M},A}(bf);Aj.prototype.bytesPerElement=4;cd("StructArrayLayout1f4",Aj);var Pj=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,
W,ka){var wa=this.length;return this.resize(wa+1),this.emplace(wa,M,W,ka)},A.prototype.emplace=function(M,W,ka,wa){var Fa=3*M;return this.int16[Fa+0]=W,this.int16[Fa+1]=ka,this.int16[Fa+2]=wa,M},A}(bf);Pj.prototype.bytesPerElement=6;cd("StructArrayLayout3i6",Pj);var Qj=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W,ka){var wa=this.length;return this.resize(wa+1),this.emplace(wa,M,W,ka)},A.prototype.emplace=function(M,W,ka,wa){var Fa=4*M;return this.uint32[2*M]=W,this.uint16[Fa+2]=ka,this.uint16[Fa+3]=wa,M},A}(bf);Qj.prototype.bytesPerElement=8;cd("StructArrayLayout1ul2ui8",Qj);var nj=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=
function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W){var ka=this.length;return this.resize(ka+1),this.emplace(ka,M,W)},A.prototype.emplace=function(M,W,ka){var wa=2*M;return this.uint16[wa+0]=W,this.uint16[wa+1]=ka,M},A}(bf);nj.prototype.bytesPerElement=4;cd("StructArrayLayout2ui4",nj);var Rj=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=
A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M){var W=this.length;return this.resize(W+1),this.emplace(W,M)},A.prototype.emplace=function(M,W){return this.uint16[1*M]=W,M},A}(bf);Rj.prototype.bytesPerElement=2;cd("StructArrayLayout1ui2",Rj);var qh=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype._refreshViews=
function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W){var ka=this.length;return this.resize(ka+1),this.emplace(ka,M,W)},A.prototype.emplace=function(M,W,ka){var wa=2*M;return this.float32[wa+0]=W,this.float32[wa+1]=ka,M},A}(bf);qh.prototype.bytesPerElement=8;cd("StructArrayLayout2f8",qh);var oj=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=
A,A.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},A.prototype.emplaceBack=function(M,W,ka,wa){var Fa=this.length;return this.resize(Fa+1),this.emplace(Fa,M,W,ka,wa)},A.prototype.emplace=function(M,W,ka,wa,Fa){var Ua=4*M;return this.float32[Ua+0]=W,this.float32[Ua+1]=ka,this.float32[Ua+2]=wa,this.float32[Ua+3]=Fa,M},A}(bf);oj.prototype.bytesPerElement=16;cd("StructArrayLayout4f16",oj);var Sj=function(r){function A(){r.apply(this,
arguments)}r&&(A.__proto__=r);(A.prototype=Object.create(r&&r.prototype)).constructor=A;var M={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return M.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},M.anchorPointY.get=function(){return this._structArray.int16[this._pos2+
1]},M.x1.get=function(){return this._structArray.int16[this._pos2+2]},M.y1.get=function(){return this._structArray.int16[this._pos2+3]},M.x2.get=function(){return this._structArray.int16[this._pos2+4]},M.y2.get=function(){return this._structArray.int16[this._pos2+5]},M.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},M.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},M.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},
M.anchorPoint.get=function(){return new le(this.anchorPointX,this.anchorPointY)},Object.defineProperties(A.prototype,M),A}(Bg);Sj.prototype.size=20;var Li=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.get=function(M){return new Sj(this,M)},A}(fj);cd("CollisionBoxArray",Li);var Mk=function(r){function A(){r.apply(this,arguments)}r&&(A.__proto__=r);(A.prototype=Object.create(r&&r.prototype)).constructor=
A;var M={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};
return M.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},M.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},M.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},M.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},M.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},M.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},M.lineLength.get=function(){return this._structArray.uint32[this._pos4+
4]},M.segment.get=function(){return this._structArray.uint16[this._pos2+10]},M.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},M.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},M.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},M.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},M.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},M.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+
37]},M.placedOrientation.set=function(W){this._structArray.uint8[this._pos1+37]=W},M.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},M.hidden.set=function(W){this._structArray.uint8[this._pos1+38]=W},M.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},M.crossTileID.set=function(W){this._structArray.uint32[this._pos4+10]=W},M.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(A.prototype,M),A}(Bg);
Mk.prototype.size=48;var Qk=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.get=function(M){return new Mk(this,M)},A}(mj);cd("PlacedSymbolArray",Qk);var Bk=function(r){function A(){r.apply(this,arguments)}r&&(A.__proto__=r);(A.prototype=Object.create(r&&r.prototype)).constructor=A;var M={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},
leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},
featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return M.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},M.anchorY.get=function(){return this._structArray.int16[this._pos2+
1]},M.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},M.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},M.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},M.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},M.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},M.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+
7]},M.key.get=function(){return this._structArray.uint16[this._pos2+8]},M.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},M.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},M.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},M.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},M.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},M.iconBoxEndIndex.get=
function(){return this._structArray.uint16[this._pos2+14]},M.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},M.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},M.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},M.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},M.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},M.numIconVertices.get=
function(){return this._structArray.uint16[this._pos2+20]},M.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},M.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},M.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},M.crossTileID.set=function(W){this._structArray.uint32[this._pos4+12]=W},M.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},M.textOffset0.get=function(){return this._structArray.float32[this._pos4+
14]},M.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},M.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(A.prototype,M),A}(Bg);Bk.prototype.size=68;var tj=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.get=function(M){return new Bk(this,M)},A}(Ki);cd("SymbolInstanceArray",tj);var Gj=function(r){function A(){r.apply(this,
arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.getoffsetX=function(M){return this.float32[1*M]},A}(Aj);cd("GlyphOffsetArray",Gj);var vi=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.getx=function(M){return this.int16[3*M]},A.prototype.gety=function(M){return this.int16[3*M+1]},A.prototype.gettileUnitDistanceFromAnchor=function(M){return this.int16[3*
M+2]},A}(Pj);cd("SymbolLineVertexArray",vi);var Mi=function(r){function A(){r.apply(this,arguments)}r&&(A.__proto__=r);(A.prototype=Object.create(r&&r.prototype)).constructor=A;var M={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return M.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},M.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},M.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+
3]},Object.defineProperties(A.prototype,M),A}(Bg);Mi.prototype.size=8;var Tj=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.get=function(M){return new Mi(this,M)},A}(Qj);cd("FeatureIndexArray",Tj);var Rk=Rd([{name:"a_pos",components:2,type:"Int16"}],4).members,$f=function(r){void 0===r&&(r=[]);this.segments=r};$f.prototype.prepareSegment=function(r,A,M,W){var ka=this.segments[this.segments.length-1];
return r>$f.MAX_VERTEX_ARRAY_LENGTH&&z("Max vertices per segment is "+$f.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+r),(!ka||ka.vertexLength+r>$f.MAX_VERTEX_ARRAY_LENGTH||ka.sortKey!==W)&&(ka={vertexOffset:A.length,primitiveOffset:M.length,vertexLength:0,primitiveLength:0},void 0!==W&&(ka.sortKey=W),this.segments.push(ka)),ka};$f.prototype.get=function(){return this.segments};$f.prototype.destroy=function(){for(var r=0,A=this.segments;r<A.length;r+=1){var M=A[r],W;for(W in M.vaos)M.vaos[W].destroy()}};
$f.simpleSegment=function(r,A,M,W){return new $f([{vertexOffset:r,primitiveOffset:A,vertexLength:M,primitiveLength:W,vaos:{},sortKey:0}])};$f.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;cd("SegmentVector",$f);var hk=Rd([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),Sk=d(function(r){r.exports=function(A,M){var W,ka,wa;var Fa=A.length-(W=3&A.length);
for(wa=0;wa<Fa;){var Ua=255&A.charCodeAt(wa)|(255&A.charCodeAt(++wa))<<8|(255&A.charCodeAt(++wa))<<16|(255&A.charCodeAt(++wa))<<24;++wa;M=27492+(65535&(ka=5*(65535&(M=(M^=461845907*(65535&(Ua=(Ua=3432918353*(65535&Ua)+((3432918353*(Ua>>>16)&65535)<<16)&4294967295)<<15|Ua>>>17))+((461845907*(Ua>>>16)&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(ka>>>16)&65535)<<16)}switch(Ua=0,W){case 3:Ua^=(255&A.charCodeAt(wa+2))<<16;case 2:Ua^=(255&A.charCodeAt(wa+1))<<8;case 1:M^=
461845907*(65535&(Ua=(Ua=3432918353*(65535&(Ua^=255&A.charCodeAt(wa)))+((3432918353*(Ua>>>16)&65535)<<16)&4294967295)<<15|Ua>>>17))+((461845907*(Ua>>>16)&65535)<<16)&4294967295}return M^=A.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^M>>>16)>>>0}}),Hk=d(function(r){r.exports=function(A,M){var W=A.length;M^=W;for(var ka=0;4<=W;){var wa=1540483477*(65535&(wa=255&A.charCodeAt(ka)|
(255&A.charCodeAt(++ka))<<8|(255&A.charCodeAt(++ka))<<16|(255&A.charCodeAt(++ka))<<24))+((1540483477*(wa>>>16)&65535)<<16);M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(wa=1540483477*(65535&(wa^=wa>>>24))+((1540483477*(wa>>>16)&65535)<<16));W-=4;++ka}switch(W){case 3:M^=(255&A.charCodeAt(ka+2))<<16;case 2:M^=(255&A.charCodeAt(ka+1))<<8;case 1:M=1540483477*(65535&(M^=255&A.charCodeAt(ka)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<
16),(M^M>>>15)>>>0}}),Uj=Sk;Uj.murmur3=Sk;Uj.murmur2=Hk;var pj=function(){this.ids=[];this.positions=[];this.indexed=!1};pj.prototype.add=function(r,A,M,W){this.ids.push($d(r));this.positions.push(A,M,W)};pj.prototype.getPositions=function(r){r=$d(r);for(var A=0,M=this.ids.length-1;A<M;){var W=A+M>>1;this.ids[W]>=r?M=W:A=W+1}for(M=[];this.ids[A]===r;)M.push({index:this.positions[3*A],start:this.positions[3*A+1],end:this.positions[3*A+2]}),A++;return M};pj.serialize=function(r,A){var M=new Float64Array(r.ids);
r=new Uint32Array(r.positions);return function bb(ka,wa,Fa,Ua){for(;Fa<Ua;){for(var qb=ka[Fa+Ua>>1],Bb=Fa-1,Rb=Ua+1;;){do Bb++;while(ka[Bb]<qb);do Rb--;while(ka[Rb]>qb);if(Bb>=Rb)break;Ud(ka,Bb,Rb);Ud(wa,3*Bb,3*Rb);Ud(wa,3*Bb+1,3*Rb+1);Ud(wa,3*Bb+2,3*Rb+2)}Rb-Fa<Ua-Rb?(bb(ka,wa,Fa,Rb),Fa=Rb+1):(bb(ka,wa,Rb+1,Ua),Ua=Rb)}}(M,r,0,M.length-1),A&&A.push(M.buffer,r.buffer),{ids:M,positions:r}};pj.deserialize=function(r){var A=new pj;return A.ids=r.ids,A.positions=r.positions,A.indexed=!0,A};var cl=Math.pow(2,
53)-1;cd("FeaturePositionMap",pj);var Vj=function(r,A){this.gl=r.gl;this.location=A},ll=function(r){function A(M,W){r.call(this,M,W);this.current=0}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.set=function(M){this.current!==M&&(this.current=M,this.gl.uniform1i(this.location,M))},A}(Vj),Ik=function(r){function A(M,W){r.call(this,M,W);this.current=0}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.set=
function(M){this.current!==M&&(this.current=M,this.gl.uniform1f(this.location,M))},A}(Vj),ml=function(r){function A(M,W){r.call(this,M,W);this.current=[0,0]}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.set=function(M){M[0]===this.current[0]&&M[1]===this.current[1]||(this.current=M,this.gl.uniform2f(this.location,M[0],M[1]))},A}(Vj),Nk=function(r){function A(M,W){r.call(this,M,W);this.current=[0,0,0]}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&
r.prototype)).constructor=A,A.prototype.set=function(M){M[0]===this.current[0]&&M[1]===this.current[1]&&M[2]===this.current[2]||(this.current=M,this.gl.uniform3f(this.location,M[0],M[1],M[2]))},A}(Vj),Hj=function(r){function A(M,W){r.call(this,M,W);this.current=[0,0,0,0]}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.set=function(M){M[0]===this.current[0]&&M[1]===this.current[1]&&M[2]===this.current[2]&&M[3]===this.current[3]||(this.current=M,this.gl.uniform4f(this.location,
M[0],M[1],M[2],M[3]))},A}(Vj),Ni=function(r){function A(M,W){r.call(this,M,W);this.current=Ed.transparent}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.set=function(M){M.r===this.current.r&&M.g===this.current.g&&M.b===this.current.b&&M.a===this.current.a||(this.current=M,this.gl.uniform4f(this.location,M.r,M.g,M.b,M.a))},A}(Vj),Wg=new Float32Array(16),vh=function(r){function A(M,W){r.call(this,M,W);this.current=Wg}return r&&(A.__proto__=r),(A.prototype=
Object.create(r&&r.prototype)).constructor=A,A.prototype.set=function(M){if(M[12]!==this.current[12]||M[0]!==this.current[0])return this.current=M,void this.gl.uniformMatrix4fv(this.location,!1,M);for(var W=1;16>W;W++)if(M[W]!==this.current[W]){this.current=M;this.gl.uniformMatrix4fv(this.location,!1,M);break}},A}(Vj),$h=function(r,A,M){this.value=r;this.uniformNames=A.map(function(W){return"u_"+W});this.type=M};$h.prototype.setUniform=function(r,A,M){r.set(M.constantOr(this.value))};$h.prototype.getBinding=
function(r,A,M){return"color"===this.type?new Ni(r,A):new Ik(r,A)};var uj=function(r,A){this.uniformNames=A.map(function(M){return"u_"+M});this.patternTo=this.patternFrom=null;this.pixelRatioTo=this.pixelRatioFrom=1};uj.prototype.setConstantPatternPositions=function(r,A){this.pixelRatioFrom=A.pixelRatio;this.pixelRatioTo=r.pixelRatio;this.patternFrom=A.tlbr;this.patternTo=r.tlbr};uj.prototype.setUniform=function(r,A,M,W){(A="u_pattern_to"===W?this.patternTo:"u_pattern_from"===W?this.patternFrom:"u_pixel_ratio_to"===
W?this.pixelRatioTo:"u_pixel_ratio_from"===W?this.pixelRatioFrom:null)&&r.set(A)};uj.prototype.getBinding=function(r,A,M){return"u_pattern"===M.substr(0,9)?new Hj(r,A):new Ik(r,A)};var Yg=function(r,A,M,W){this.expression=r;this.type=M;this.maxValue=0;this.paintVertexAttributes=A.map(function(ka){return{name:"a_"+ka,type:"Float32",components:"color"===M?2:1,offset:0}});this.paintVertexArray=new W};Yg.prototype.populatePaintArray=function(r,A,M,W,ka){M=this.paintVertexArray.length;A=this.expression.evaluate(new mf(0),
A,{},W,[],ka);this.paintVertexArray.resize(r);this._setPaintValue(M,r,A)};Yg.prototype.updatePaintArray=function(r,A,M,W){M=this.expression.evaluate({zoom:0},M,W);this._setPaintValue(r,A,M)};Yg.prototype._setPaintValue=function(r,A,M){if("color"===this.type)for(M=Je(M);r<A;r++)this.paintVertexArray.emplace(r,M[0],M[1]);else{for(;r<A;r++)this.paintVertexArray.emplace(r,M);this.maxValue=Math.max(this.maxValue,Math.abs(M))}};Yg.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&
(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};Yg.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ng=function(r,A,M,W,ka,wa){this.expression=r;this.uniformNames=A.map(function(Fa){return"u_"+Fa+"_t"});this.type=M;this.useIntegerZoom=W;this.zoom=ka;this.maxValue=0;
this.paintVertexAttributes=A.map(function(Fa){return{name:"a_"+Fa,type:"Float32",components:"color"===M?4:2,offset:0}});this.paintVertexArray=new wa};Ng.prototype.populatePaintArray=function(r,A,M,W,ka){M=this.expression.evaluate(new mf(this.zoom),A,{},W,[],ka);A=this.expression.evaluate(new mf(this.zoom+1),A,{},W,[],ka);W=this.paintVertexArray.length;this.paintVertexArray.resize(r);this._setPaintValue(W,r,M,A)};Ng.prototype.updatePaintArray=function(r,A,M,W){var ka=this.expression.evaluate({zoom:this.zoom},
M,W);M=this.expression.evaluate({zoom:this.zoom+1},M,W);this._setPaintValue(r,A,ka,M)};Ng.prototype._setPaintValue=function(r,A,M,W){if("color"===this.type)for(M=Je(M),W=Je(W);r<A;r++)this.paintVertexArray.emplace(r,M[0],M[1],W[0],W[1]);else{for(;r<A;r++)this.paintVertexArray.emplace(r,M,W);this.maxValue=Math.max(this.maxValue,Math.abs(M),Math.abs(W))}};Ng.prototype.upload=function(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?
this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};Ng.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};Ng.prototype.setUniform=function(r,A){A=c(this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(A.zoom):A.zoom,this.zoom,this.zoom+1),0,1);r.set(A)};Ng.prototype.getBinding=function(r,A,M){return new Ik(r,A)};var Vh=
function(r,A,M,W,ka,wa){this.expression=r;this.type=A;this.useIntegerZoom=M;this.zoom=W;this.layerId=wa;this.zoomInPaintVertexArray=new ka;this.zoomOutPaintVertexArray=new ka};Vh.prototype.populatePaintArray=function(r,A,M){var W=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r);this.zoomOutPaintVertexArray.resize(r);this._setPaintValues(W,r,A.patterns&&A.patterns[this.layerId],M)};Vh.prototype.updatePaintArray=function(r,A,M,W,ka){this._setPaintValues(r,A,M.patterns&&M.patterns[this.layerId],
ka)};Vh.prototype._setPaintValues=function(r,A,M,W){if(W&&M){var ka=W[M.min],wa=W[M.mid];M=W[M.max];if(ka&&wa&&M)for(;r<A;r++)this.zoomInPaintVertexArray.emplace(r,wa.tl[0],wa.tl[1],wa.br[0],wa.br[1],ka.tl[0],ka.tl[1],ka.br[0],ka.br[1],wa.pixelRatio,ka.pixelRatio),this.zoomOutPaintVertexArray.emplace(r,wa.tl[0],wa.tl[1],wa.br[0],wa.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],wa.pixelRatio,M.pixelRatio)}};Vh.prototype.upload=function(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&
this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,hk.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,hk.members,this.expression.isStateDependent))};Vh.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy();this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var rh=
function(r,A,M,W){this.binders={};this.layoutAttributes=W;this._buffers=[];W=[];for(var ka in r.paint._values)if(M(ka)){var wa=r.paint.get(ka);if(wa instanceof Uf&&jb(wa.property.specification)){var Fa={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],
"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[ka]||[ka.replace(r.type+"-","").replace(/-/g,"_")],Ua=wa.value,bb=wa.property.specification.type,qb=wa.property.useIntegerZoom;wa=wa.property.specification["property-type"];wa="cross-faded"===wa||"cross-faded-data-driven"===
wa;if("constant"===Ua.kind)this.binders[ka]=wa?new uj(Ua.value,Fa):new $h(Ua.value,Fa,bb),W.push("/u_"+ka);else if("source"===Ua.kind||wa){var Bb=Fe(ka,bb,"source");this.binders[ka]=wa?new Vh(Ua,bb,qb,A,Bb,r.id):new Yg(Ua,Fa,bb,Bb);W.push("/a_"+ka)}else wa=Fe(ka,bb,"composite"),this.binders[ka]=new Ng(Ua,Fa,bb,qb,A,wa),W.push("/z_"+ka)}}this.cacheKey=W.sort().join("")};rh.prototype.getMaxValue=function(r){r=this.binders[r];return r instanceof Yg||r instanceof Ng?r.maxValue:0};rh.prototype.populatePaintArrays=
function(r,A,M,W,ka){for(var wa in this.binders){var Fa=this.binders[wa];(Fa instanceof Yg||Fa instanceof Ng||Fa instanceof Vh)&&Fa.populatePaintArray(r,A,M,W,ka)}};rh.prototype.setConstantPatternPositions=function(r,A){for(var M in this.binders){var W=this.binders[M];W instanceof uj&&W.setConstantPatternPositions(r,A)}};rh.prototype.updatePaintArrays=function(r,A,M,W,ka){var wa=!1,Fa;for(Fa in r)for(var Ua=0,bb=A.getPositions(Fa);Ua<bb.length;Ua+=1){var qb=bb[Ua],Bb=M.feature(qb.index),Rb;for(Rb in this.binders){var $b=
this.binders[Rb];($b instanceof Yg||$b instanceof Ng||$b instanceof Vh)&&!0===$b.expression.isStateDependent&&(wa=W.paint.get(Rb),$b.expression=wa.value,$b.updatePaintArray(qb.start,qb.end,Bb,r[Fa],ka),wa=!0)}}return wa};rh.prototype.defines=function(){var r=[],A;for(A in this.binders){var M=this.binders[A];(M instanceof $h||M instanceof uj)&&r.push.apply(r,M.uniformNames.map(function(W){return"#define HAS_UNIFORM_"+W}))}return r};rh.prototype.getPaintVertexBuffers=function(){return this._buffers};
rh.prototype.getUniforms=function(r,A){var M=[],W;for(W in this.binders){var ka=this.binders[W];if(ka instanceof $h||ka instanceof uj||ka instanceof Ng)for(var wa=0,Fa=ka.uniformNames;wa<Fa.length;wa+=1){var Ua=Fa[wa];if(A[Ua]){var bb=ka.getBinding(r,A[Ua],Ua);M.push({name:Ua,property:W,binding:bb})}}}return M};rh.prototype.setUniforms=function(r,A,M,W){for(r=0;r<A.length;r+=1){var ka=A[r],wa=ka.name,Fa=ka.property;this.binders[Fa].setUniform(ka.binding,W,M.get(Fa),wa)}};rh.prototype.updatePaintBuffers=
function(r){for(var A in this._buffers=[],this.binders){var M=this.binders[A];r&&M instanceof Vh?(M=2===r.fromScale?M.zoomInPaintVertexBuffer:M.zoomOutPaintVertexBuffer)&&this._buffers.push(M):(M instanceof Yg||M instanceof Ng)&&M.paintVertexBuffer&&this._buffers.push(M.paintVertexBuffer)}};rh.prototype.upload=function(r){for(var A in this.binders){var M=this.binders[A];(M instanceof Yg||M instanceof Ng||M instanceof Vh)&&M.upload(r)}this.updatePaintBuffers()};rh.prototype.destroy=function(){for(var r in this.binders){var A=
this.binders[r];(A instanceof Yg||A instanceof Ng||A instanceof Vh)&&A.destroy()}};var ai=function(r,A,M,W){void 0===W&&(W=function(){return!0});this.programConfigurations={};for(var ka=0;ka<A.length;ka+=1){var wa=A[ka];this.programConfigurations[wa.id]=new rh(wa,M,W,r)}this.needsUpload=!1;this._featureMap=new pj;this._bufferOffset=0};ai.prototype.populatePaintArrays=function(r,A,M,W,ka,wa){for(var Fa in this.programConfigurations)this.programConfigurations[Fa].populatePaintArrays(r,A,W,ka,wa);void 0!==
A.id&&this._featureMap.add(A.id,M,this._bufferOffset,r);this._bufferOffset=r;this.needsUpload=!0};ai.prototype.updatePaintArrays=function(r,A,M,W){for(var ka=0;ka<M.length;ka+=1){var wa=M[ka];this.needsUpload=this.programConfigurations[wa.id].updatePaintArrays(r,this._featureMap,A,wa,W)||this.needsUpload}};ai.prototype.get=function(r){return this.programConfigurations[r]};ai.prototype.upload=function(r){if(this.needsUpload){for(var A in this.programConfigurations)this.programConfigurations[A].upload(r);
this.needsUpload=!1}};ai.prototype.destroy=function(){for(var r in this.programConfigurations)this.programConfigurations[r].destroy()};cd("ConstantBinder",$h);cd("CrossFadedConstantBinder",uj);cd("SourceExpressionBinder",Yg);cd("CrossFadedCompositeBinder",Vh);cd("CompositeExpressionBinder",Ng);cd("ProgramConfiguration",rh,{omit:["_buffers"]});cd("ProgramConfigurationSet",ai);var wi={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1},wh=function(r){this.zoom=r.zoom;this.overscaling=r.overscaling;this.layers=
r.layers;this.layerIds=this.layers.map(function(A){return A.id});this.index=r.index;this.hasPattern=!1;this.layoutVertexArray=new zj;this.indexArray=new Zi;this.segments=new $f;this.programConfigurations=new ai(Rk,r.layers,r.zoom);this.stateDependentLayerIds=this.layers.filter(function(A){return A.isStateDependent()}).map(function(A){return A.id})};wh.prototype.populate=function(r,A,M){var W=this.layers[0],ka=[],wa=null;"circle"===W.type&&(wa=W.layout.get("circle-sort-key"));for(W=0;W<r.length;W+=
1){var Fa=r[W],Ua=Fa.feature,bb=Fa.id,qb=Fa.index;Fa=Fa.sourceLayerIndex;var Bb=this.layers[0]._featureFilter.needGeometry,Rb={type:Ua.type,id:bb,properties:Ua.properties,geometry:Bb?ke(Ua):[]};this.layers[0]._featureFilter.filter(new mf(this.zoom),Rb,M)&&(Bb||(Rb.geometry=ke(Ua)),Bb=wa?wa.evaluate(Rb,{},M):void 0,ka.push({id:bb,properties:Ua.properties,type:Ua.type,sourceLayerIndex:Fa,index:qb,geometry:Rb.geometry,patterns:{},sortKey:Bb}))}wa&&ka.sort(function($b,hc){return $b.sortKey-hc.sortKey});
for(wa=0;wa<ka.length;wa+=1)W=ka[wa],Ua=W.geometry,bb=W.index,qb=W.sourceLayerIndex,Fa=r[bb].feature,this.addFeature(W,Ua,bb,M),A.featureIndex.insert(Fa,Ua,bb,qb,this.index)};wh.prototype.update=function(r,A,M){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,M)};wh.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};wh.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};wh.prototype.upload=
function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Rk),this.indexBuffer=r.createIndexBuffer(this.indexArray));this.programConfigurations.upload(r);this.uploaded=!0};wh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};wh.prototype.addFeature=function(r,A,M,W){for(var ka=0;ka<A.length;ka+=1)for(var wa=0,Fa=A[ka];wa<Fa.length;wa+=
1){var Ua=Fa[wa],bb=Ua.x;Ua=Ua.y;if(!(0>bb||8192<=bb||0>Ua||8192<=Ua)){var qb=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),Bb=qb.vertexLength;Ce(this.layoutVertexArray,bb,Ua,-1,-1);Ce(this.layoutVertexArray,bb,Ua,1,-1);Ce(this.layoutVertexArray,bb,Ua,1,1);Ce(this.layoutVertexArray,bb,Ua,-1,1);this.indexArray.emplaceBack(Bb,Bb+1,Bb+2);this.indexArray.emplaceBack(Bb,Bb+3,Bb+2);qb.vertexLength+=4;qb.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,
r,M,{},W)};cd("CircleBucket",wh,{omit:["layers"]});var Ck=new ph({"circle-sort-key":new ve(bc.layout_circle["circle-sort-key"])}),Ok={paint:new ph({"circle-radius":new ve(bc.paint_circle["circle-radius"]),"circle-color":new ve(bc.paint_circle["circle-color"]),"circle-blur":new ve(bc.paint_circle["circle-blur"]),"circle-opacity":new ve(bc.paint_circle["circle-opacity"]),"circle-translate":new Vd(bc.paint_circle["circle-translate"]),"circle-translate-anchor":new Vd(bc.paint_circle["circle-translate-anchor"]),
"circle-pitch-scale":new Vd(bc.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Vd(bc.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ve(bc.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ve(bc.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ve(bc.paint_circle["circle-stroke-opacity"])}),layout:Ck},Xg="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=arguments,A=0,M=arguments.length;M--;)A+=
r[M]*r[M];return Math.sqrt(A)});var xi=new Xg(3);Xg!=Float32Array&&(xi[0]=0,xi[1]=0,xi[2]=0);(function(){var r=new Xg(4);Xg!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0)})();var al=(function(){var r=new Xg(2);Xg!=Float32Array&&(r[0]=0,r[1]=0)}(),function(r){function A(M){r.call(this,M,Ok)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.createBucket=function(M){return new wh(M)},A.prototype.queryRadius=function(M){return Ec("circle-radius",this,M)+Ec("circle-stroke-width",
this,M)+Vc(this.paint.get("circle-translate"))},A.prototype.queryIntersectsFeature=function(M,W,ka,wa,Fa,Ua,bb,qb){M=mc(M,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ua.angle,bb);Fa=this.paint.get("circle-radius").evaluate(W,ka)+this.paint.get("circle-stroke-width").evaluate(W,ka);ka=(W="map"===this.paint.get("circle-pitch-alignment"))?M:function(rc,Kb){return rc.map(function(Pb){return Qb(Pb,Kb)})}(M,qb);bb=W?Fa*bb:Fa;for(M=0;M<wa.length;M+=1){Fa=0;for(var Bb=wa[M];Fa<
Bb.length;Fa+=1){var Rb=Bb[Fa],$b=W?Rb:Qb(Rb,qb),hc=bb;Rb=Ad([],[Rb.x,Rb.y,0,1],qb);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?hc*=Rb[3]/Ua.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(hc*=Ua.cameraToCenterDistance/Rb[3]),Ve(ka,$b,hc))return!0}}return!1},A}(Uh)),qk=function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&
r.prototype)).constructor=A,A}(wh);cd("HeatmapBucket",qk,{omit:["layers"]});var Zg=function(r,A){dc(this,r,1,A)};Zg.prototype.resize=function(r){Qc(this,r,1)};Zg.prototype.clone=function(){return new Zg({width:this.width,height:this.height},new Uint8Array(this.data))};Zg.copy=function(r,A,M,W,ka){gd(r,A,M,W,ka,1)};var Vf=function(r,A){dc(this,r,4,A)};Vf.prototype.resize=function(r){Qc(this,r,4)};Vf.prototype.replace=function(r,A){A?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):
r};Vf.prototype.clone=function(){return new Vf({width:this.width,height:this.height},new Uint8Array(this.data))};Vf.copy=function(r,A,M,W,ka){gd(r,A,M,W,ka,4)};cd("AlphaImage",Zg);cd("RGBAImage",Vf);var Of={paint:new ph({"heatmap-radius":new ve(bc.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ve(bc.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Vd(bc.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ej(bc.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Vd(bc.paint_heatmap["heatmap-opacity"])})},
Tk=function(r){function A(M){r.call(this,M,Of);this._updateColorRamp()}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.createBucket=function(M){return new qk(M)},A.prototype._handleSpecialPaintPropertyUpdate=function(M){"heatmap-color"===M&&this._updateColorRamp()},A.prototype._updateColorRamp=function(){this.colorRamp=Uc(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity");this.colorRampTexture=null},A.prototype.resize=
function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},A.prototype.queryRadius=function(){return 0},A.prototype.queryIntersectsFeature=function(){return!1},A.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},A}(Uh),Hg={paint:new ph({"hillshade-illumination-direction":new Vd(bc.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Vd(bc.paint_hillshade["hillshade-illumination-anchor"]),
"hillshade-exaggeration":new Vd(bc.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Vd(bc.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Vd(bc.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Vd(bc.paint_hillshade["hillshade-accent-color"])})},Ij=function(r){function A(M){r.call(this,M,Hg)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.hasOffscreenPass=function(){return 0!==
this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},A}(Uh),vj=Rd([{name:"a_pos",components:2,type:"Int16"}],4).members;Zc.deviation=function(r,A,M,W){var ka=A&&A.length,wa=Math.abs(Pi(r,0,ka?A[0]*M:r.length,M));if(ka){ka=0;for(var Fa=A.length;ka<Fa;ka++)wa-=Math.abs(Pi(r,A[ka]*M,ka<Fa-1?A[ka+1]*M:r.length,M))}for(ka=A=0;ka<W.length;ka+=3){Fa=W[ka]*M;var Ua=W[ka+1]*M,bb=W[ka+2]*M;A+=Math.abs((r[Fa]-r[bb])*(r[Ua+1]-r[Fa+1])-(r[Fa]-r[Ua])*(r[bb+1]-r[Fa+1]))}return 0===wa&&0===A?0:Math.abs((A-
wa)/wa)};Zc.flatten=function(r){for(var A=r[0][0].length,M={vertices:[],holes:[],dimensions:A},W=0,ka=0;ka<r.length;ka++){for(var wa=0;wa<r[ka].length;wa++)for(var Fa=0;Fa<A;Fa++)M.vertices.push(r[ka][wa][Fa]);0<ka&&M.holes.push(W+=r[ka-1].length)}return M};Zc.default=Zc;var Cg=function(r){this.zoom=r.zoom;this.overscaling=r.overscaling;this.layers=r.layers;this.layerIds=this.layers.map(function(A){return A.id});this.index=r.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=
new zj;this.indexArray=new Zi;this.indexArray2=new nj;this.programConfigurations=new ai(vj,r.layers,r.zoom);this.segments=new $f;this.segments2=new $f;this.stateDependentLayerIds=this.layers.filter(function(A){return A.isStateDependent()}).map(function(A){return A.id})};Cg.prototype.populate=function(r,A,M){this.hasPattern=Ih("fill",this.layers,A);for(var W=this.layers[0].layout.get("fill-sort-key"),ka=[],wa=0;wa<r.length;wa+=1){var Fa=r[wa],Ua=Fa.feature,bb=Fa.id,qb=Fa.index;Fa=Fa.sourceLayerIndex;
var Bb=this.layers[0]._featureFilter.needGeometry,Rb={type:Ua.type,id:bb,properties:Ua.properties,geometry:Bb?ke(Ua):[]};this.layers[0]._featureFilter.filter(new mf(this.zoom),Rb,M)&&(Bb||(Rb.geometry=ke(Ua)),Bb=W?W.evaluate(Rb,{},M,A.availableImages):void 0,ka.push({id:bb,properties:Ua.properties,type:Ua.type,sourceLayerIndex:Fa,index:qb,geometry:Rb.geometry,patterns:{},sortKey:Bb}))}W&&ka.sort(function($b,hc){return $b.sortKey-hc.sortKey});for(W=0;W<ka.length;W+=1)qb=ka[W],wa=qb.geometry,Ua=qb.index,
bb=qb.sourceLayerIndex,this.hasPattern?(qb=Og("fill",this.layers,qb,this.zoom,A),this.patternFeatures.push(qb)):this.addFeature(qb,wa,Ua,M,{}),A.featureIndex.insert(r[Ua].feature,wa,Ua,bb,this.index)};Cg.prototype.update=function(r,A,M){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,M)};Cg.prototype.addFeatures=function(r,A,M){r=0;for(var W=this.patternFeatures;r<W.length;r+=1){var ka=W[r];this.addFeature(ka,ka.geometry,ka.index,A,M)}};
Cg.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Cg.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Cg.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,vj),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2));this.programConfigurations.upload(r);this.uploaded=!0};Cg.prototype.destroy=function(){this.layoutVertexBuffer&&
(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())};Cg.prototype.addFeature=function(r,A,M,W,ka){var wa=0;for(A=pg(A,500);wa<A.length;wa+=1){for(var Fa=A[wa],Ua=0,bb=0,qb=Fa;bb<qb.length;bb+=1)Ua+=qb[bb].length;bb=this.segments.prepareSegment(Ua,this.layoutVertexArray,this.indexArray);qb=bb.vertexLength;for(var Bb=[],Rb=[],$b=0,hc=Fa;$b<hc.length;$b+=1){var rc=hc[$b];if(0!==
rc.length){rc!==Fa[0]&&Rb.push(Bb.length/2);var Kb=this.segments2.prepareSegment(rc.length,this.layoutVertexArray,this.indexArray2),Pb=Kb.vertexLength;this.layoutVertexArray.emplaceBack(rc[0].x,rc[0].y);this.indexArray2.emplaceBack(Pb+rc.length-1,Pb);Bb.push(rc[0].x);Bb.push(rc[0].y);for(var Gc=1;Gc<rc.length;Gc++)this.layoutVertexArray.emplaceBack(rc[Gc].x,rc[Gc].y),this.indexArray2.emplaceBack(Pb+Gc-1,Pb+Gc),Bb.push(rc[Gc].x),Bb.push(rc[Gc].y);Kb.vertexLength+=rc.length;Kb.primitiveLength+=rc.length}}Fa=
Zc(Bb,Rb);for(Bb=0;Bb<Fa.length;Bb+=3)this.indexArray.emplaceBack(qb+Fa[Bb],qb+Fa[Bb+1],qb+Fa[Bb+2]);bb.vertexLength+=Ua;bb.primitiveLength+=Fa.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,M,ka,W)};cd("FillBucket",Cg,{omit:["layers","patternFeatures"]});var Yj=new ph({"fill-sort-key":new ve(bc.layout_fill["fill-sort-key"])}),Oi={paint:new ph({"fill-antialias":new Vd(bc.paint_fill["fill-antialias"]),"fill-opacity":new ve(bc.paint_fill["fill-opacity"]),"fill-color":new ve(bc.paint_fill["fill-color"]),
"fill-outline-color":new ve(bc.paint_fill["fill-outline-color"]),"fill-translate":new Vd(bc.paint_fill["fill-translate"]),"fill-translate-anchor":new Vd(bc.paint_fill["fill-translate-anchor"]),"fill-pattern":new Zh(bc.paint_fill["fill-pattern"])}),layout:Yj},Lj=function(r){function A(M){r.call(this,M,Oi)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.recalculate=function(M,W){r.prototype.recalculate.call(this,M,W);M=this.paint._values["fill-outline-color"];
"constant"===M.value.kind&&void 0===M.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},A.prototype.createBucket=function(M){return new Cg(M)},A.prototype.queryRadius=function(){return Vc(this.paint.get("fill-translate"))},A.prototype.queryIntersectsFeature=function(M,W,ka,wa,Fa,Ua,bb){return tf(mc(M,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ua.angle,bb),wa)},A.prototype.isTileClipped=function(){return!0},A}(Uh),Dk=Rd([{name:"a_pos",
components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members;ig.types=["Unknown","Point","LineString","Polygon"];ig.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var A,M=r.readVarint()+r.pos,W=1,ka=0,wa=0,Fa=0,Ua=[];r.pos<M;)if(0>=ka&&(ka=r.readVarint(),W=7&ka,ka>>=3),ka--,1===W||2===W)wa+=r.readSVarint(),Fa+=r.readSVarint(),1===W&&(A&&Ua.push(A),A=[]),A.push(new le(wa,Fa));else{if(7!==W)throw Error("unknown command "+W);A&&A.push(A[0].clone())}return A&&
Ua.push(A),Ua};ig.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var A=r.readVarint()+r.pos,M=1,W=0,ka=0,wa=0,Fa=1/0,Ua=-1/0,bb=1/0,qb=-1/0;r.pos<A;)if(0>=W&&(W=r.readVarint(),M=7&W,W>>=3),W--,1===M||2===M)(ka+=r.readSVarint())<Fa&&(Fa=ka),ka>Ua&&(Ua=ka),(wa+=r.readSVarint())<bb&&(bb=wa),wa>qb&&(qb=wa);else if(7!==M)throw Error("unknown command "+M);return[Fa,bb,Ua,qb]};ig.prototype.toGeoJSON=function(r,A,M){function W(bb){for(var qb=0;qb<bb.length;qb++){var Bb=bb[qb];bb[qb]=[360*
(Bb.x+wa)/ka-180,360/Math.PI*Math.atan(Math.exp((180-360*(Bb.y+Fa)/ka)*Math.PI/180))-90]}}var ka=this.extent*Math.pow(2,M),wa=this.extent*r,Fa=this.extent*A;A=this.loadGeometry();M=ig.types[this.type];switch(this.type){case 1:var Ua=[];for(r=0;r<A.length;r++)Ua[r]=A[r][0];W(A=Ua);break;case 2:for(r=0;r<A.length;r++)W(A[r]);break;case 3:for(A=function(bb){var qb=bb.length;if(1>=qb)return[bb];for(var Bb,Rb,$b=[],hc=0;hc<qb;hc++){for(var rc,Kb=rc=void 0,Pb=bb[hc],Gc=0,Yc=0,Pc=Pb.length,xd=Pc-1;Yc<Pc;xd=
Yc++)Gc+=((rc=Pb[xd]).x-(Kb=Pb[Yc]).x)*(Kb.y+rc.y);rc=Gc;0!==rc&&(void 0===Rb&&(Rb=0>rc),Rb===0>rc?(Bb&&$b.push(Bb),Bb=[bb[hc]]):Bb.push(bb[hc]))}return Bb&&$b.push(Bb),$b}(A),r=0;r<A.length;r++)for(Ua=0;Ua<A[r].length;Ua++)W(A[r][Ua])}1===A.length?A=A[0]:M="Multi"+M;r={type:"Feature",geometry:{type:M,coordinates:A},properties:this.properties};return"id"in this&&(r.id=this.id),r};var Zj=qg;qg.prototype.feature=function(r){if(0>r||r>=this._features.length)throw Error("feature index out of bounds");
this._pbf.pos=this._features[r];r=this._pbf.readVarint()+this._pbf.pos;return new ig(this._pbf,r,this.extent,this._keys,this._values)};var ci={VectorTile:function(r,A){this.layers=r.readFields(Lh,{},A)},VectorTileFeature:ig,VectorTileLayer:Zj},wj=ci.VectorTileFeature.types,ok=Math.pow(2,13),ih=function(r){this.zoom=r.zoom;this.overscaling=r.overscaling;this.layers=r.layers;this.layerIds=this.layers.map(function(A){return A.id});this.index=r.index;this.hasPattern=!1;this.layoutVertexArray=new Ii;this.indexArray=
new Zi;this.programConfigurations=new ai(Dk,r.layers,r.zoom);this.segments=new $f;this.stateDependentLayerIds=this.layers.filter(function(A){return A.isStateDependent()}).map(function(A){return A.id})};ih.prototype.populate=function(r,A,M){this.features=[];this.hasPattern=Ih("fill-extrusion",this.layers,A);for(var W=0;W<r.length;W+=1){var ka=r[W],wa=ka.feature,Fa=ka.id,Ua=ka.index;ka=ka.sourceLayerIndex;var bb=this.layers[0]._featureFilter.needGeometry,qb={type:wa.type,id:Fa,properties:wa.properties,
geometry:bb?ke(wa):[]};this.layers[0]._featureFilter.filter(new mf(this.zoom),qb,M)&&(Fa={id:Fa,sourceLayerIndex:ka,index:Ua,geometry:bb?qb.geometry:ke(wa),properties:wa.properties,type:wa.type,patterns:{}},void 0!==wa.id&&(Fa.id=wa.id),this.hasPattern?this.features.push(Og("fill-extrusion",this.layers,Fa,this.zoom,A)):this.addFeature(Fa,Fa.geometry,Ua,M,{}),A.featureIndex.insert(wa,Fa.geometry,Ua,ka,this.index,!0))}};ih.prototype.addFeatures=function(r,A,M){r=0;for(var W=this.features;r<W.length;r+=
1){var ka=W[r];this.addFeature(ka,ka.geometry,ka.index,A,M)}};ih.prototype.update=function(r,A,M){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,M)};ih.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};ih.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};ih.prototype.upload=function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,
Dk),this.indexBuffer=r.createIndexBuffer(this.indexArray));this.programConfigurations.upload(r);this.uploaded=!0};ih.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};ih.prototype.addFeature=function(r,A,M,W,ka){var wa=0;for(A=pg(A,500);wa<A.length;wa+=1){for(var Fa=A[wa],Ua=0,bb=0,qb=Fa;bb<qb.length;bb+=1)Ua+=qb[bb].length;bb=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray);qb=0;for(var Bb=Fa;qb<Bb.length;qb+=1){var Rb=Bb[qb];if(0!==Rb.length&&!((Yc=Rb).every(function(Pc){return 0>Pc.x})||Yc.every(function(Pc){return 8192<Pc.x})||Yc.every(function(Pc){return 0>Pc.y})||Yc.every(function(Pc){return 8192<Pc.y})))for(var $b=0,hc=0;hc<Rb.length;hc++){var rc=Rb[hc];if(1<=hc){var Kb=Rb[hc-1];if(!(rc.x===Kb.x&&(0>rc.x||8192<rc.x)||rc.y===Kb.y&&(0>rc.y||8192<rc.y))){bb.vertexLength+4>$f.MAX_VERTEX_ARRAY_LENGTH&&(bb=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray));var Pb=rc.sub(Kb)._perp()._unit(),Gc=Kb.dist(rc);32768<$b+Gc&&($b=0);fi(this.layoutVertexArray,rc.x,rc.y,Pb.x,Pb.y,0,0,$b);fi(this.layoutVertexArray,rc.x,rc.y,Pb.x,Pb.y,0,1,$b);fi(this.layoutVertexArray,Kb.x,Kb.y,Pb.x,Pb.y,0,0,$b+=Gc);fi(this.layoutVertexArray,Kb.x,Kb.y,Pb.x,Pb.y,0,1,$b);rc=bb.vertexLength;this.indexArray.emplaceBack(rc,rc+2,rc+1);this.indexArray.emplaceBack(rc+1,rc+2,rc+3);bb.vertexLength+=4;bb.primitiveLength+=2}}}}if(bb.vertexLength+Ua>$f.MAX_VERTEX_ARRAY_LENGTH&&
(bb=this.segments.prepareSegment(Ua,this.layoutVertexArray,this.indexArray)),"Polygon"===wj[r.type]){Bb=[];Rb=[];qb=bb.vertexLength;$b=0;for(hc=Fa;$b<hc.length;$b+=1)if(rc=hc[$b],0!==rc.length)for(rc!==Fa[0]&&Rb.push(Bb.length/2),Kb=0;Kb<rc.length;Kb++)Pb=rc[Kb],fi(this.layoutVertexArray,Pb.x,Pb.y,0,0,1,1,0),Bb.push(Pb.x),Bb.push(Pb.y);Fa=Zc(Bb,Rb);for(Bb=0;Bb<Fa.length;Bb+=3)this.indexArray.emplaceBack(qb+Fa[Bb],qb+Fa[Bb+2],qb+Fa[Bb+1]);bb.primitiveLength+=Fa.length/3;bb.vertexLength+=Ua}}var Yc;
this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,M,ka,W)};cd("FillExtrusionBucket",ih,{omit:["layers","features"]});var yi={paint:new ph({"fill-extrusion-opacity":new Vd(bc["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ve(bc["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Vd(bc["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Vd(bc["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),
"fill-extrusion-pattern":new Zh(bc["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ve(bc["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ve(bc["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Vd(bc["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},nk=function(r){function A(M){r.call(this,M,yi)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.createBucket=
function(M){return new ih(M)},A.prototype.queryRadius=function(){return Vc(this.paint.get("fill-extrusion-translate"))},A.prototype.is3D=function(){return!0},A.prototype.queryIntersectsFeature=function(M,W,ka,wa,Fa,Ua,bb,qb){Fa=mc(M,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ua.angle,bb);M=this.paint.get("fill-extrusion-height").evaluate(W,ka);W=this.paint.get("fill-extrusion-base").evaluate(W,ka);ka=function(Bb,Rb,$b,hc){$b=[];for(hc=0;hc<Bb.length;hc+=
1){var rc=Bb[hc];rc=[rc.x,rc.y,0,1];Ad(rc,rc,Rb);$b.push(new le(rc[0]/rc[3],rc[1]/rc[3]))}return $b}(Fa,qb);wa=function(Bb,Rb,$b,hc){var rc=[],Kb=[],Pb=hc[8]*Rb,Gc=hc[9]*Rb,Yc=hc[10]*Rb;Rb*=hc[11];var Pc=hc[8]*$b,xd=hc[9]*$b,zd=hc[10]*$b;$b*=hc[11];for(var Id=0;Id<Bb.length;Id+=1){for(var Td=[],Qd=[],ne=0,we=Bb[Id];ne<we.length;ne+=1){var pe=we[ne],ue=pe.x,Ne=pe.y;pe=hc[0]*ue+hc[4]*Ne+hc[12];var ge=hc[1]*ue+hc[5]*Ne+hc[13],de=hc[2]*ue+hc[6]*Ne+hc[14],je=hc[3]*ue+hc[7]*Ne+hc[15];ue=de+Yc;Ne=je+Rb;
var $e=pe+Pc,Gf=ge+xd;de+=zd;je+=$b;pe=new le((pe+Pb)/Ne,(ge+Gc)/Ne);pe.z=ue/Ne;Td.push(pe);pe=new le($e/je,Gf/je);pe.z=de/je;Qd.push(pe)}rc.push(Td);Kb.push(Qd)}return[rc,Kb]}(wa,W,M,qb);return function(Bb,Rb,$b){var hc=1/0;tf($b,Rb)&&(hc=gi($b,Rb[0]));for(var rc=0;rc<Rb.length;rc++)for(var Kb=Rb[rc],Pb=Bb[rc],Gc=0;Gc<Kb.length-1;Gc++){var Yc=Kb[Gc];Yc=[Yc,Kb[Gc+1],Pb[Gc+1],Pb[Gc],Yc];sf($b,Yc)&&(hc=Math.min(hc,gi($b,Yc)))}return hc!==1/0&&hc}(wa[0],wa[1],ka)},A}(Uh),T=Rd([{name:"a_pos_normal",components:2,
type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,la=ci.VectorTileFeature.types,ya=Math.cos(Math.PI/180*37.5),Ga=Math.pow(2,14)/.5,La=function(r){this.zoom=r.zoom;this.overscaling=r.overscaling;this.layers=r.layers;this.layerIds=this.layers.map(function(A){return A.id});this.index=r.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=new yg;this.indexArray=new Zi;this.programConfigurations=new ai(T,r.layers,r.zoom);this.segments=new $f;this.stateDependentLayerIds=
this.layers.filter(function(A){return A.isStateDependent()}).map(function(A){return A.id})};La.prototype.populate=function(r,A,M){this.hasPattern=Ih("line",this.layers,A);for(var W=this.layers[0].layout.get("line-sort-key"),ka=[],wa=0;wa<r.length;wa+=1){var Fa=r[wa],Ua=Fa.feature,bb=Fa.id,qb=Fa.index;Fa=Fa.sourceLayerIndex;var Bb=this.layers[0]._featureFilter.needGeometry,Rb={type:Ua.type,id:bb,properties:Ua.properties,geometry:Bb?ke(Ua):[]};this.layers[0]._featureFilter.filter(new mf(this.zoom),
Rb,M)&&(Bb||(Rb.geometry=ke(Ua)),Bb=W?W.evaluate(Rb,{},M):void 0,ka.push({id:bb,properties:Ua.properties,type:Ua.type,sourceLayerIndex:Fa,index:qb,geometry:Rb.geometry,patterns:{},sortKey:Bb}))}W&&ka.sort(function($b,hc){return $b.sortKey-hc.sortKey});for(W=0;W<ka.length;W+=1)qb=ka[W],wa=qb.geometry,Ua=qb.index,bb=qb.sourceLayerIndex,this.hasPattern?(qb=Og("line",this.layers,qb,this.zoom,A),this.patternFeatures.push(qb)):this.addFeature(qb,wa,Ua,M,{}),A.featureIndex.insert(r[Ua].feature,wa,Ua,bb,
this.index)};La.prototype.update=function(r,A,M){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,A,this.stateDependentLayers,M)};La.prototype.addFeatures=function(r,A,M){r=0;for(var W=this.patternFeatures;r<W.length;r+=1){var ka=W[r];this.addFeature(ka,ka.geometry,ka.index,A,M)}};La.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};La.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};La.prototype.upload=
function(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,T),this.indexBuffer=r.createIndexBuffer(this.indexArray));this.programConfigurations.upload(r);this.uploaded=!0};La.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};La.prototype.addFeature=function(r,A,M,W,ka){var wa=this.layers[0].layout,Fa=wa.get("line-join").evaluate(r,{}),
Ua=wa.get("line-cap"),bb=wa.get("line-miter-limit");wa=wa.get("line-round-limit");for(var qb=0;qb<A.length;qb+=1)this.addLine(A[qb],r,Fa,Ua,bb,wa);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,M,ka,W)};La.prototype.addLine=function(r,A,M,W,ka,wa){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,A.properties&&A.properties.hasOwnProperty("mapbox_clip_start")&&A.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+A.properties.mapbox_clip_start;
this.clipEnd=+A.properties.mapbox_clip_end;for(var Fa=0;Fa<r.length-1;Fa++)this.totalDistance+=r[Fa].dist(r[Fa+1]);this.updateScaledDistance()}A="Polygon"===la[A.type];for(Fa=r.length;2<=Fa&&r[Fa-1].equals(r[Fa-2]);)Fa--;for(var Ua=0;Ua<Fa-1&&r[Ua].equals(r[Ua+1]);)Ua++;if(!(Fa<(A?3:2))){"bevel"===M&&(ka=1.05);var bb,qb=16>=this.overscaling?122880/(512*this.overscaling):0,Bb=this.segments.prepareSegment(10*Fa,this.layoutVertexArray,this.indexArray),Rb=void 0,$b=void 0,hc=void 0,rc=void 0;this.e1=
this.e2=-1;A&&(rc=r[Ua].sub(bb=r[Fa-2])._unit()._perp());for(var Kb=Ua;Kb<Fa;Kb++)if(!($b=Kb===Fa-1?A?r[Ua+1]:void 0:r[Kb+1])||!r[Kb].equals($b)){rc&&(hc=rc);bb&&(Rb=bb);bb=r[Kb];rc=$b?$b.sub(bb)._unit()._perp():hc;var Pb=(hc=hc||rc).add(rc);0===Pb.x&&0===Pb.y||Pb._unit();var Gc=hc.x*rc.x+hc.y*rc.y,Yc=Pb.x*rc.x+Pb.y*rc.y,Pc=0!==Yc?1/Yc:1/0,xd=2*Math.sqrt(2-2*Yc);Yc=Yc<ya&&Rb&&$b;var zd=0<hc.x*rc.y-hc.y*rc.x;if(Yc&&Kb>Ua){var Id=bb.dist(Rb);Id>2*qb&&(Id=bb.sub(bb.sub(Rb)._mult(qb/Id)._round()),this.updateDistance(Rb,
Id),this.addCurrentVertex(Id,hc,0,0,Bb),Rb=Id)}var Td=Rb&&$b;Id=Td?M:A?"butt":W;if(Td&&"round"===Id&&(Pc<wa?Id="miter":2>=Pc&&(Id="fakeround")),"miter"===Id&&Pc>ka&&(Id="bevel"),"bevel"===Id&&(2<Pc&&(Id="flipbevel"),Pc<ka&&(Id="miter")),Rb&&this.updateDistance(Rb,bb),"miter"===Id)Pb._mult(Pc),this.addCurrentVertex(bb,Pb,0,0,Bb);else if("flipbevel"===Id)100<Pc?Pb=rc.mult(-1):(Gc=Pc*hc.add(rc).mag()/hc.sub(rc).mag(),Pb._perp()._mult(Gc*(zd?-1:1))),this.addCurrentVertex(bb,Pb,0,0,Bb),this.addCurrentVertex(bb,
Pb.mult(-1),0,0,Bb);else if("bevel"===Id||"fakeround"===Id){Pc=-Math.sqrt(Pc*Pc-1);Pb=zd?Pc:0;Pc=zd?0:Pc;if(Rb&&this.addCurrentVertex(bb,hc,Pb,Pc,Bb),"fakeround"===Id)for(xd=Math.round(180*xd/Math.PI/20),Id=1;Id<xd;Id++){Td=Id/xd;if(.5!==Td){var Qd=Td-.5;Td+=Td*Qd*(Td-1)*((1.0904+Gc*(Gc*(3.55645-1.43519*Gc)-3.2452))*Qd*Qd+(.848013+Gc*(.215638*Gc-1.06021)))}Td=rc.sub(hc)._mult(Td)._add(hc)._unit()._mult(zd?-1:1);this.addHalfVertex(bb,Td.x,Td.y,!1,zd,0,Bb)}$b&&this.addCurrentVertex(bb,rc,-Pb,-Pc,Bb)}else"butt"===
Id?this.addCurrentVertex(bb,Pb,0,0,Bb):"square"===Id?(Gc=Rb?1:-1,this.addCurrentVertex(bb,Pb,Gc,Gc,Bb)):"round"===Id&&(Rb&&(this.addCurrentVertex(bb,hc,0,0,Bb),this.addCurrentVertex(bb,hc,1,1,Bb,!0)),$b&&(this.addCurrentVertex(bb,rc,-1,-1,Bb,!0),this.addCurrentVertex(bb,rc,0,0,Bb)));Yc&&Kb<Fa-1&&(Yc=bb.dist($b),Yc>2*qb&&(Yc=bb.add($b.sub(bb)._mult(qb/Yc)._round()),this.updateDistance(bb,Yc),this.addCurrentVertex(Yc,rc,0,0,Bb),bb=Yc))}}};La.prototype.addCurrentVertex=function(r,A,M,W,ka,wa){void 0===
wa&&(wa=!1);var Fa=A.y*W-A.x,Ua=-A.y-A.x*W;this.addHalfVertex(r,A.x+A.y*M,A.y-A.x*M,wa,!1,M,ka);this.addHalfVertex(r,Fa,Ua,wa,!0,-W,ka);this.distance>Ga/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(r,A,M,W,ka,wa))};La.prototype.addHalfVertex=function(r,A,M,W,ka,wa,Fa){var Ua=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((r.x<<1)+(W?1:0),(r.y<<1)+(ka?1:0),Math.round(63*A)+128,Math.round(63*M)+128,1+(0===wa?0:0>wa?-1:1)|(63&Ua)<<2,Ua>>6);r=Fa.vertexLength++;0<=this.e1&&
0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,r),Fa.primitiveLength++);ka?this.e2=r:this.e1=r};La.prototype.updateScaledDistance=function(){this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Ga-1):this.distance};La.prototype.updateDistance=function(r,A){this.distance+=r.dist(A);this.updateScaledDistance()};cd("LineBucket",La,{omit:["layers","patternFeatures"]});var Pa=new ph({"line-cap":new Vd(bc.layout_line["line-cap"]),
"line-join":new ve(bc.layout_line["line-join"]),"line-miter-limit":new Vd(bc.layout_line["line-miter-limit"]),"line-round-limit":new Vd(bc.layout_line["line-round-limit"]),"line-sort-key":new ve(bc.layout_line["line-sort-key"])}),cb={paint:new ph({"line-opacity":new ve(bc.paint_line["line-opacity"]),"line-color":new ve(bc.paint_line["line-color"]),"line-translate":new Vd(bc.paint_line["line-translate"]),"line-translate-anchor":new Vd(bc.paint_line["line-translate-anchor"]),"line-width":new ve(bc.paint_line["line-width"]),
"line-gap-width":new ve(bc.paint_line["line-gap-width"]),"line-offset":new ve(bc.paint_line["line-offset"]),"line-blur":new ve(bc.paint_line["line-blur"]),"line-dasharray":new ui(bc.paint_line["line-dasharray"]),"line-pattern":new Zh(bc.paint_line["line-pattern"]),"line-gradient":new ej(bc.paint_line["line-gradient"])}),layout:Pa},Ya=new (function(r){function A(){r.apply(this,arguments)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.possiblyEvaluate=
function(M,W){return W=new mf(Math.floor(W.zoom),{now:W.now,fadeDuration:W.fadeDuration,zoomHistory:W.zoomHistory,transition:W.transition}),r.prototype.possiblyEvaluate.call(this,M,W)},A.prototype.evaluate=function(M,W,ka,wa){return W=g({},W,{zoom:Math.floor(W.zoom)}),r.prototype.evaluate.call(this,M,W,ka,wa)},A}(ve))(cb.paint.properties["line-width"].specification);Ya.useIntegerZoom=!0;var db=function(r){function A(M){r.call(this,M,cb)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=
A,A.prototype._handleSpecialPaintPropertyUpdate=function(M){"line-gradient"===M&&this._updateGradient()},A.prototype._updateGradient=function(){this.gradient=Uc(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress");this.gradientTexture=null},A.prototype.recalculate=function(M,W){r.prototype.recalculate.call(this,M,W);this.paint._values["line-floorwidth"]=Ya.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,M)},A.prototype.createBucket=function(M){return new La(M)},
A.prototype.queryRadius=function(M){var W=hi(Ec("line-width",this,M),Ec("line-gap-width",this,M));M=Ec("line-offset",this,M);return W/2+Math.abs(M)+Vc(this.paint.get("line-translate"))},A.prototype.queryIntersectsFeature=function(M,W,ka,wa,Fa,Ua,bb){M=mc(M,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ua.angle,bb);Fa=bb/2*hi(this.paint.get("line-width").evaluate(W,ka),this.paint.get("line-gap-width").evaluate(W,ka));W=this.paint.get("line-offset").evaluate(W,ka);return W&&
(wa=function(qb,Bb){for(var Rb=[],$b=new le(0,0),hc=0;hc<qb.length;hc++){for(var rc=qb[hc],Kb=[],Pb=0;Pb<rc.length;Pb++){var Gc=rc[Pb],Yc=rc[Pb+1],Pc=0===Pb?$b:Gc.sub(rc[Pb-1])._unit()._perp();Yc=Pb===rc.length-1?$b:Yc.sub(Gc)._unit()._perp();Pc=Pc._add(Yc)._unit();Pc._mult(1/(Pc.x*Yc.x+Pc.y*Yc.y));Kb.push(Pc._mult(Bb)._add(Gc))}Rb.push(Kb)}return Rb}(wa,W*bb)),function(qb,Bb,Rb){for(var $b=0;$b<Bb.length;$b++){var hc=Bb[$b];if(3<=qb.length)for(var rc=0;rc<hc.length;rc++)if(Sb(qb,hc[rc]))return!0;
a:{rc=qb;var Kb=Rb;if(1<rc.length){if(gf(rc,hc)){rc=!0;break a}for(var Pb=0;Pb<hc.length;Pb++)if(Wa(hc[Pb],rc,Kb)){rc=!0;break a}}for(Pb=0;Pb<rc.length;Pb++)if(Wa(rc[Pb],hc,Kb)){rc=!0;break a}rc=!1}if(rc)return!0}return!1}(M,wa,Fa)},A.prototype.isTileClipped=function(){return!0},A}(Uh),ob=Rd([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),wb=Rd([{name:"a_projected_pos",components:3,type:"Float32"}],4),
Ib=(Rd([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Rd([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Nb=(Rd([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Rd([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",
components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Vb=Rd([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Rd([{name:"triangle",components:3,type:"Uint16"}]);Rd([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},
{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]);Rd([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},
{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},
{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]);Rd([{type:"Float32",
name:"offsetX"}]);Rd([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Xb={"!":"","#":"",$:"","%":"","\x26":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","\x3c":"","\x3d":"","\x3e":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"",
"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},oc=function(r,A,M,W,ka){var wa=8*ka-W-1;var Fa=(1<<wa)-1,Ua=Fa>>1,bb=-7;ka=M?ka-1:0;var qb=M?-1:1,Bb=r[A+ka];ka+=qb;M=Bb&(1<<-bb)-1;Bb>>=-bb;for(bb+=wa;0<bb;M=256*M+r[A+ka],ka+=qb,bb-=8);wa=M&(1<<-bb)-1;M>>=
-bb;for(bb+=W;0<bb;wa=256*wa+r[A+ka],ka+=qb,bb-=8);if(0===M)M=1-Ua;else{if(M===Fa)return wa?NaN:1/0*(Bb?-1:1);wa+=Math.pow(2,W);M-=Ua}return(Bb?-1:1)*wa*Math.pow(2,M-W)},yc=function(r,A,M,W,ka,wa){var Fa,Ua,bb,qb=8*wa-ka-1,Bb=(1<<qb)-1,Rb=Bb>>1,$b=23===ka?Math.pow(2,-24)-Math.pow(2,-77):0;wa=W?0:wa-1;W=W?1:-1;var hc=0>A||0===A&&0>1/A?1:0;A=Math.abs(A);for(isNaN(A)||A===1/0?(Ua=isNaN(A)?1:0,Fa=Bb):(Fa=Math.floor(Math.log(A)/Math.LN2),1>A*(bb=Math.pow(2,-Fa))&&(Fa--,bb*=2),2<=(A+=1<=Fa+Rb?$b/bb:$b*
Math.pow(2,1-Rb))*bb&&(Fa++,bb/=2),Fa+Rb>=Bb?(Ua=0,Fa=Bb):1<=Fa+Rb?(Ua=(A*bb-1)*Math.pow(2,ka),Fa+=Rb):(Ua=A*Math.pow(2,Rb-1)*Math.pow(2,ka),Fa=0));8<=ka;r[M+wa]=255&Ua,wa+=W,Ua/=256,ka-=8);Fa=Fa<<ka|Ua;for(qb+=ka;0<qb;r[M+wa]=255&Fa,wa+=W,Fa/=256,qb-=8);r[M+wa-W]|=128*hc};Ue.Varint=0;Ue.Fixed64=1;Ue.Bytes=2;Ue.Fixed32=5;var Fc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");Ue.prototype={destroy:function(){this.buf=null},readFields:function(r,A,M){for(M=M||this.length;this.pos<M;){var W=
this.readVarint(),ka=W>>3,wa=this.pos;this.type=7&W;r(ka,A,this);this.pos===wa&&this.skip(W)}return A},readMessage:function(r,A){return this.readFields(r,A,this.readVarint()+this.pos)},readFixed32:function(){var r=mi(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=Fg(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=mi(this.buf,this.pos)+4294967296*mi(this.buf,this.pos+4);return this.pos+=8,r},readSFixed64:function(){var r=mi(this.buf,this.pos)+4294967296*
Fg(this.buf,this.pos+4);return this.pos+=8,r},readFloat:function(){var r=oc(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=oc(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var A,M=this.buf;var W=127&(A=M[this.pos++]);if(128>A)r=W;else if(W|=(127&(A=M[this.pos++]))<<7,128>A)r=W;else if(W|=(127&(A=M[this.pos++]))<<14,128>A)r=W;else if(W|=(127&(A=M[this.pos++]))<<21,128>A)r=W;else{W|=(15&M[this.pos])<<28;var ka,wa;A=this.buf;if((ka=(112&(wa=A[this.pos++]))>>
4,128>wa)||(ka|=(127&(wa=A[this.pos++]))<<3,128>wa)||(ka|=(127&(wa=A[this.pos++]))<<10,128>wa)||(ka|=(127&(wa=A[this.pos++]))<<17,128>wa)||(ka|=(127&(wa=A[this.pos++]))<<24,128>wa)||(ka|=(1&(wa=A[this.pos++]))<<31,128>wa))r=r?4294967296*ka+(W>>>0):4294967296*(ka>>>0)+(W>>>0);else throw Error("Expected varint not more than 10 bytes");}return r},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return 1==r%2?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},
readString:function(){var r=this.readVarint()+this.pos,A=this.pos;this.pos=r;if(12<=r-A&&Fc)r=Fc.decode(this.buf.subarray(A,r));else{for(var M=this.buf,W="";A<r;){var ka,wa,Fa,Ua=M[A],bb=null,qb=239<Ua?4:223<Ua?3:191<Ua?2:1;if(A+qb>r)break;1===qb?128>Ua&&(bb=Ua):2===qb?128==(192&(ka=M[A+1]))&&127>=(bb=(31&Ua)<<6|63&ka)&&(bb=null):3===qb?(wa=M[A+2],128==(192&(ka=M[A+1]))&&128==(192&wa)&&(2047>=(bb=(15&Ua)<<12|(63&ka)<<6|63&wa)||55296<=bb&&57343>=bb)&&(bb=null)):4===qb&&(wa=M[A+2],Fa=M[A+3],128==(192&
(ka=M[A+1]))&&128==(192&wa)&&128==(192&Fa)&&(65535>=(bb=(15&Ua)<<18|(63&ka)<<12|(63&wa)<<6|63&Fa)||1114112<=bb)&&(bb=null));null===bb?(bb=65533,qb=1):65535<bb&&(bb-=65536,W+=String.fromCharCode(bb>>>10&1023|55296),bb=56320|1023&bb);W+=String.fromCharCode(bb);A+=qb}r=W}return r},readBytes:function(){var r=this.readVarint()+this.pos,A=this.buf.subarray(this.pos,r);return this.pos=r,A},readPackedVarint:function(r,A){if(this.type!==Ue.Bytes)return r.push(this.readVarint(A));var M=Dg(this);for(r=r||[];this.pos<
M;)r.push(this.readVarint(A));return r},readPackedSVarint:function(r){if(this.type!==Ue.Bytes)return r.push(this.readSVarint());var A=Dg(this);for(r=r||[];this.pos<A;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Ue.Bytes)return r.push(this.readBoolean());var A=Dg(this);for(r=r||[];this.pos<A;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Ue.Bytes)return r.push(this.readFloat());var A=Dg(this);for(r=r||[];this.pos<A;)r.push(this.readFloat());
return r},readPackedDouble:function(r){if(this.type!==Ue.Bytes)return r.push(this.readDouble());var A=Dg(this);for(r=r||[];this.pos<A;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Ue.Bytes)return r.push(this.readFixed32());var A=Dg(this);for(r=r||[];this.pos<A;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Ue.Bytes)return r.push(this.readSFixed32());var A=Dg(this);for(r=r||[];this.pos<A;)r.push(this.readSFixed32());return r},
readPackedFixed64:function(r){if(this.type!==Ue.Bytes)return r.push(this.readFixed64());var A=Dg(this);for(r=r||[];this.pos<A;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Ue.Bytes)return r.push(this.readSFixed64());var A=Dg(this);for(r=r||[];this.pos<A;)r.push(this.readSFixed64());return r},skip:function(r){r&=7;if(r===Ue.Varint)for(;127<this.buf[this.pos++];);else if(r===Ue.Bytes)this.pos=this.readVarint()+this.pos;else if(r===Ue.Fixed32)this.pos+=4;else{if(r!==
Ue.Fixed64)throw Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(r,A){this.writeVarint(r<<3|A)},realloc:function(r){for(var A=this.length||16;A<this.pos+r;)A*=2;A!==this.length&&(r=new Uint8Array(A),r.set(this.buf),this.buf=r,this.length=A)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4);Nh(this.buf,r,this.pos);this.pos+=4},writeSFixed32:function(r){this.realloc(4);Nh(this.buf,r,this.pos);this.pos+=
4},writeFixed64:function(r){this.realloc(8);Nh(this.buf,-1&r,this.pos);Nh(this.buf,Math.floor(1/4294967296*r),this.pos+4);this.pos+=8},writeSFixed64:function(r){this.realloc(8);Nh(this.buf,-1&r,this.pos);Nh(this.buf,Math.floor(1/4294967296*r),this.pos+4);this.pos+=8},writeVarint:function(r){268435455<(r=+r||0)||0>r?function(A,M){var W,ka;if(0<=A?(W=A%4294967296|0,ka=A/4294967296|0):(ka=~(-A/4294967296),4294967295^(W=~(-A%4294967296))?W=W+1|0:(W=0,ka=ka+1|0)),1.8446744073709552E19<=A||-1.8446744073709552E19>
A)throw Error("Given varint doesn't fit into 10 bytes");M.realloc(10);(function(wa,Fa,Ua){Ua.buf[Ua.pos++]=127&wa|128;wa>>>=7;Ua.buf[Ua.pos++]=127&wa|128;wa>>>=7;Ua.buf[Ua.pos++]=127&wa|128;wa>>>=7;Ua.buf[Ua.pos++]=127&wa|128;Ua.buf[Ua.pos]=127&wa>>>7})(W,0,M);(function(wa,Fa){Fa.buf[Fa.pos++]|=(7&wa)<<4|((wa>>>=3)?128:0);wa&&(Fa.buf[Fa.pos++]=127&wa|((wa>>>=7)?128:0),wa&&(Fa.buf[Fa.pos++]=127&wa|((wa>>>=7)?128:0),wa&&(Fa.buf[Fa.pos++]=127&wa|((wa>>>=7)?128:0),wa&&(Fa.buf[Fa.pos++]=127&wa|((wa>>>=
7)?128:0),wa&&(Fa.buf[Fa.pos++]=127&wa)))))})(ka,M)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(127<r?128:0),127>=r||(this.buf[this.pos++]=127&(r>>>=7)|(127<r?128:0),127>=r||(this.buf[this.pos++]=127&(r>>>=7)|(127<r?128:0),127>=r||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(0>r?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r);this.realloc(4*r.length);this.pos++;for(var A=this.pos,M=this.buf,W=this.pos,ka,
wa,Fa=0;Fa<r.length;Fa++){if(55295<(ka=r.charCodeAt(Fa))&&57344>ka){if(!wa){56319<ka||Fa+1===r.length?(M[W++]=239,M[W++]=191,M[W++]=189):wa=ka;continue}if(56320>ka){M[W++]=239;M[W++]=191;M[W++]=189;wa=ka;continue}ka=wa-55296<<10|ka-56320|65536;wa=null}else wa&&(M[W++]=239,M[W++]=191,M[W++]=189,wa=null);128>ka?M[W++]=ka:(2048>ka?M[W++]=ka>>6|192:(65536>ka?M[W++]=ka>>12|224:(M[W++]=ka>>18|240,M[W++]=ka>>12&63|128),M[W++]=ka>>6&63|128),M[W++]=63&ka|128)}this.pos=W;M=this.pos-A;128<=M&&ji(A,M,this);this.pos=
A-1;this.writeVarint(M);this.pos+=M},writeFloat:function(r){this.realloc(4);yc(this.buf,r,this.pos,!0,23,4);this.pos+=4},writeDouble:function(r){this.realloc(8);yc(this.buf,r,this.pos,!0,52,8);this.pos+=8},writeBytes:function(r){var A=r.length;this.writeVarint(A);this.realloc(A);for(var M=0;M<A;M++)this.buf[this.pos++]=r[M]},writeRawMessage:function(r,A){this.pos++;var M=this.pos;r(A,this);r=this.pos-M;128<=r&&ji(M,r,this);this.pos=M-1;this.writeVarint(r);this.pos+=r},writeMessage:function(r,A,M){this.writeTag(r,
Ue.Bytes);this.writeRawMessage(A,M)},writePackedVarint:function(r,A){A.length&&this.writeMessage(r,ki,A)},writePackedSVarint:function(r,A){A.length&&this.writeMessage(r,gj,A)},writePackedBoolean:function(r,A){A.length&&this.writeMessage(r,Kj,A)},writePackedFloat:function(r,A){A.length&&this.writeMessage(r,li,A)},writePackedDouble:function(r,A){A.length&&this.writeMessage(r,Ai,A)},writePackedFixed32:function(r,A){A.length&&this.writeMessage(r,vf,A)},writePackedSFixed32:function(r,A){A.length&&this.writeMessage(r,
Jj,A)},writePackedFixed64:function(r,A){A.length&&this.writeMessage(r,Bi,A)},writePackedSFixed64:function(r,A){A.length&&this.writeMessage(r,ak,A)},writeBytesField:function(r,A){this.writeTag(r,Ue.Bytes);this.writeBytes(A)},writeFixed32Field:function(r,A){this.writeTag(r,Ue.Fixed32);this.writeFixed32(A)},writeSFixed32Field:function(r,A){this.writeTag(r,Ue.Fixed32);this.writeSFixed32(A)},writeFixed64Field:function(r,A){this.writeTag(r,Ue.Fixed64);this.writeFixed64(A)},writeSFixed64Field:function(r,
A){this.writeTag(r,Ue.Fixed64);this.writeSFixed64(A)},writeVarintField:function(r,A){this.writeTag(r,Ue.Varint);this.writeVarint(A)},writeSVarintField:function(r,A){this.writeTag(r,Ue.Varint);this.writeSVarint(A)},writeStringField:function(r,A){this.writeTag(r,Ue.Bytes);this.writeString(A)},writeFloatField:function(r,A){this.writeTag(r,Ue.Fixed32);this.writeFloat(A)},writeDoubleField:function(r,A){this.writeTag(r,Ue.Fixed64);this.writeDouble(A)},writeBooleanField:function(r,A){this.writeVarintField(r,
!!A)}};var Xc=function(r,A){var M=A.pixelRatio,W=A.version,ka=A.stretchX,wa=A.stretchY;A=A.content;this.paddedRect=r;this.pixelRatio=M;this.stretchX=ka;this.stretchY=wa;this.content=A;this.version=W},fd={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};fd.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]};fd.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]};fd.tlbr.get=function(){return this.tl.concat(this.br)};
fd.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]};Object.defineProperties(Xc.prototype,fd);var hd=function(r,A){var M={},W={};this.haveRenderCallbacks=[];var ka=[];this.addImages(r,M,ka);this.addImages(A,W,ka);ka=jf(ka);ka=new Vf({width:ka.w||1,height:ka.h||1});for(var wa in r){var Fa=r[wa],Ua=M[wa].paddedRect;Vf.copy(Fa.data,ka,{x:0,y:0},{x:Ua.x+1,y:Ua.y+1},Fa.data)}for(var bb in A){r=A[bb];Fa=W[bb].paddedRect;wa=Fa.x+1;Fa=Fa.y+1;Ua=
r.data.width;var qb=r.data.height;Vf.copy(r.data,ka,{x:0,y:0},{x:wa,y:Fa},r.data);Vf.copy(r.data,ka,{x:0,y:qb-1},{x:wa,y:Fa-1},{width:Ua,height:1});Vf.copy(r.data,ka,{x:0,y:0},{x:wa,y:Fa+qb},{width:Ua,height:1});Vf.copy(r.data,ka,{x:Ua-1,y:0},{x:wa-1,y:Fa},{width:1,height:qb});Vf.copy(r.data,ka,{x:0,y:0},{x:wa+Ua,y:Fa},{width:1,height:qb})}this.image=ka;this.iconPositions=M;this.patternPositions=W};hd.prototype.addImages=function(r,A,M){for(var W in r){var ka=r[W],wa={x:0,y:0,w:ka.data.width+2,h:ka.data.height+
2};M.push(wa);A[W]=new Xc(wa,ka);ka.hasRenderCallback&&this.haveRenderCallbacks.push(W)}};hd.prototype.patchUpdatedImages=function(r,A){for(var M in r.dispatchRenderCallbacks(this.haveRenderCallbacks),r.updatedImages)this.patchUpdatedImage(this.iconPositions[M],r.getImage(M),A),this.patchUpdatedImage(this.patternPositions[M],r.getImage(M),A)};hd.prototype.patchUpdatedImage=function(r,A,M){r&&A&&r.version!==A.version&&(r.version=A.version,r=r.tl,M.update(A.data,void 0,{x:r[0],y:r[1]}))};cd("ImagePosition",
Xc);cd("ImageAtlas",hd);var nd={horizontal:1,vertical:2,horizontalOnly:3},lc=function(){this.scale=1;this.fontStack="";this.imageName=null};lc.forText=function(r,A){var M=new lc;return M.scale=r||1,M.fontStack=A,M};lc.forImage=function(r){var A=new lc;return A.imageName=r,A};var zc=function(){this.text="";this.sectionIndex=[];this.sections=[];this.imageSectionID=null};zc.fromFeature=function(r,A){for(var M=new zc,W=0;W<r.sections.length;W++){var ka=r.sections[W];ka.image?M.addImageSection(ka):M.addTextSection(ka,
A)}return M};zc.prototype.length=function(){return this.text.length};zc.prototype.getSection=function(r){return this.sections[this.sectionIndex[r]]};zc.prototype.getSectionIndex=function(r){return this.sectionIndex[r]};zc.prototype.getCharCode=function(r){return this.text.charCodeAt(r)};zc.prototype.verticalizePunctuation=function(){for(var r=this.text,A="",M=0;M<r.length;M++){var W=r.charCodeAt(M+1)||null,ka=r.charCodeAt(M-1)||null;A+=W&&Wc(W)&&!Xb[r[M+1]]||ka&&Wc(ka)&&!Xb[r[M-1]]||!Xb[r[M]]?r[M]:
Xb[r[M]]}this.text=A};zc.prototype.trim=function(){for(var r=0,A=0;A<this.text.length&&$c[this.text.charCodeAt(A)];A++)r++;A=this.text.length;for(var M=this.text.length-1;0<=M&&M>=r&&$c[this.text.charCodeAt(M)];M--)A--;this.text=this.text.substring(r,A);this.sectionIndex=this.sectionIndex.slice(r,A)};zc.prototype.substring=function(r,A){var M=new zc;return M.text=this.text.substring(r,A),M.sectionIndex=this.sectionIndex.slice(r,A),M.sections=this.sections,M};zc.prototype.toString=function(){return this.text};
zc.prototype.getMaxScale=function(){var r=this;return this.sectionIndex.reduce(function(A,M){return Math.max(A,r.sections[M].scale)},0)};zc.prototype.addTextSection=function(r,A){this.text+=r.text;this.sections.push(lc.forText(r.scale,r.fontStack||A));A=this.sections.length-1;for(var M=0;M<r.text.length;++M)this.sectionIndex.push(A)};zc.prototype.addImageSection=function(r){r=r.image?r.image.name:"";if(0!==r.length){var A=this.getNextImageSectionCharCode();A?(this.text+=String.fromCharCode(A),this.sections.push(lc.forImage(r)),
this.sectionIndex.push(this.sections.length-1)):z("Reached maximum number of images 6401")}else z("Can't add FormattedSection with an empty image.")};zc.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var $c={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ud={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},vd=function(r){function A(M,
W,ka,wa){r.call(this,M,W);this.angle=ka;void 0!==wa&&(this.segment=wa)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.clone=function(){return new A(this.x,this.y,this.angle,this.segment)},A}(le);cd("Anchor",vd);var yd=Object.freeze({__proto__:null,getSizeData:hj,evaluateSizeForFeature:Gg,evaluateSizeForZoom:Di,SIZE_PACK_FACTOR:128}),ld=function(r,A,M,W,ka,wa,Fa,Ua,bb,qb){if(this.boxStartIndex=r.length,bb)A=wa.top,M=wa.bottom,(W=wa.collisionPadding)&&
(A-=W[1],M+=W[3]),A=M-A,0<A&&(A=Math.max(10,A),this.circleDiameter=A);else{bb=wa.top*Fa-Ua;var Bb=wa.bottom*Fa+Ua,Rb=wa.left*Fa-Ua;Ua=wa.right*Fa+Ua;wa=wa.collisionPadding;if(wa&&(Rb-=wa[0]*Fa,bb-=wa[1]*Fa,Ua+=wa[2]*Fa,Bb+=wa[3]*Fa),qb){wa=new le(Rb,bb);Fa=new le(Ua,bb);var $b=new le(Rb,Bb);Bb=new le(Ua,Bb);qb=qb*Math.PI/180;wa._rotate(qb);Fa._rotate(qb);$b._rotate(qb);Bb._rotate(qb);Rb=Math.min(wa.x,Fa.x,$b.x,Bb.x);Ua=Math.max(wa.x,Fa.x,$b.x,Bb.x);bb=Math.min(wa.y,Fa.y,$b.y,Bb.y);Bb=Math.max(wa.y,
Fa.y,$b.y,Bb.y)}r.emplaceBack(A.x,A.y,Rb,bb,Ua,Bb,M,W,ka)}this.boxEndIndex=r.length},Yd=function(r,A){if(void 0===r&&(r=[]),void 0===A&&(A=mh),this.data=r,this.length=this.data.length,this.compare=A,0<this.length)for(r=(this.length>>1)-1;0<=r;r--)this._down(r)};Yd.prototype.push=function(r){this.data.push(r);this.length++;this._up(this.length-1)};Yd.prototype.pop=function(){if(0!==this.length){var r=this.data[0],A=this.data.pop();return this.length--,0<this.length&&(this.data[0]=A,this._down(0)),
r}};Yd.prototype.peek=function(){return this.data[0]};Yd.prototype._up=function(r){for(var A=this.data,M=this.compare,W=A[r];0<r;){var ka=r-1>>1,wa=A[ka];if(0<=M(W,wa))break;A[r]=wa;r=ka}A[r]=W};Yd.prototype._down=function(r){for(var A=this.data,M=this.compare,W=this.length>>1,ka=A[r];r<W;){var wa=1+(r<<1),Fa=A[wa],Ua=wa+1;if(Ua<this.length&&0>M(A[Ua],Fa)&&(wa=Ua,Fa=A[Ua]),0<=M(Fa,ka))break;A[r]=Fa;r=wa}A[r]=ka};var ie=Number.POSITIVE_INFINITY,qe=ci.VectorTileFeature.types,Ae=[{name:"a_fade_opacity",
components:1,type:"Uint8",offset:0}],ze=function(r){this.layoutVertexArray=new fh;this.indexArray=new Zi;this.programConfigurations=r;this.segments=new $f;this.dynamicLayoutVertexArray=new si;this.opacityVertexArray=new sj;this.placedSymbolArray=new Qk};ze.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length};ze.prototype.upload=function(r,A,M,W){this.isEmpty()||(M&&(this.layoutVertexBuffer=
r.createVertexBuffer(this.layoutVertexArray,ob.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,wb.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,Ae,!0),this.opacityVertexBuffer.itemSize=1),(M||W)&&this.programConfigurations.upload(r))};ze.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),
this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())};cd("SymbolBuffers",ze);var Me=function(r,A,M){this.layoutVertexArray=new r;this.layoutAttributes=A;this.indexArray=new M;this.segments=new $f;this.collisionVertexArray=new gk};Me.prototype.upload=function(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes);this.indexBuffer=r.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,
Ib.members,!0)};Me.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())};cd("CollisionBuffers",Me);var oe=function(r){this.collisionBoxArray=r.collisionBoxArray;this.zoom=r.zoom;this.overscaling=r.overscaling;this.layers=r.layers;this.layerIds=this.layers.map(function(ka){return ka.id});this.index=r.index;this.pixelRatio=r.pixelRatio;this.sourceLayerIndex=r.sourceLayerIndex;
this.hasRTLText=this.hasPattern=!1;this.sortKeyRanges=[];this.collisionCircleArray=[];this.placementInvProjMatrix=Sc([]);this.placementViewportMatrix=Sc([]);var A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=hj(this.zoom,A["text-size"]);this.iconSizeData=hj(this.zoom,A["icon-size"]);A=this.layers[0].layout;var M=A.get("symbol-sort-key"),W=A.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==W&&void 0!==M.constantOr(1);this.sortFeaturesByY=("viewport-y"===W||"auto"===W&&!this.sortFeaturesByKey)&&
(A.get("text-allow-overlap")||A.get("icon-allow-overlap")||A.get("text-ignore-placement")||A.get("icon-ignore-placement"));"point"===A.get("symbol-placement")&&(this.writingModes=A.get("text-writing-mode").map(function(ka){return nd[ka]}));this.stateDependentLayerIds=this.layers.filter(function(ka){return ka.isStateDependent()}).map(function(ka){return ka.id});this.sourceID=r.sourceID};oe.prototype.createArrays=function(){this.text=new ze(new ai(ob.members,this.layers,this.zoom,function(r){return/^text/.test(r)}));
this.icon=new ze(new ai(ob.members,this.layers,this.zoom,function(r){return/^icon/.test(r)}));this.glyphOffsetArray=new Gj;this.lineVertexArray=new vi;this.symbolInstances=new tj};oe.prototype.calculateGlyphDependencies=function(r,A,M,W,ka){for(var wa=0;wa<r.length;wa++)if(A[r.charCodeAt(wa)]=!0,(M||W)&&ka){var Fa=Xb[r.charAt(wa)];Fa&&(A[Fa.charCodeAt(0)]=!0)}};oe.prototype.populate=function(r,A,M){var W=this.layers[0],ka=W.layout,wa=ka.get("text-font"),Fa=ka.get("text-field"),Ua=ka.get("icon-image");
Fa=("constant"!==Fa.value.kind||Fa.value.value instanceof Zd&&!Fa.value.value.isEmpty()||0<Fa.value.value.toString().length)&&("constant"!==wa.value.kind||0<wa.value.value.length);Ua="constant"!==Ua.value.kind||!!Ua.value.value||0<Object.keys(Ua.parameters).length;var bb=ka.get("symbol-sort-key");if(this.features=[],Fa||Ua){var qb=A.iconDependencies,Bb=A.glyphDependencies;A=A.availableImages;for(var Rb=new mf(this.zoom),$b=0;$b<r.length;$b+=1){var hc=r[$b],rc=hc.feature,Kb=hc.id,Pb=hc.index,Gc=hc.sourceLayerIndex;
hc=W._featureFilter.needGeometry;var Yc={type:rc.type,id:Kb,properties:rc.properties,geometry:hc?ke(rc):[]};if(W._featureFilter.filter(Rb,Yc,M)){hc||(Yc.geometry=ke(rc));hc=void 0;if(Fa){var Pc=W.getValueAndResolveTokens("text-field",Yc,M,A);Pc=Zd.factory(Pc);Ph(Pc)&&(this.hasRTLText=!0);(!this.hasRTLText||"unavailable"===Ag||this.hasRTLText&&Lg.isParsed())&&(hc=ii(Pc,W,Yc))}Pc=void 0;Ua&&(Pc=W.getValueAndResolveTokens("icon-image",Yc,M,A),Pc=Pc instanceof me?Pc:me.fromString(Pc));if(hc||Pc){var xd=
this.sortFeaturesByKey?bb.evaluate(Yc,{},M):void 0;rc={id:Kb,text:hc,icon:Pc,index:Pb,sourceLayerIndex:Gc,geometry:ke(rc),properties:rc.properties,type:qe[rc.type],sortKey:xd};if(this.features.push(rc),Pc&&(qb[Pc.name]=!0),hc)for(rc=wa.evaluate(Yc,{},M).join(","),Kb="map"===ka.get("text-rotation-alignment")&&"point"!==ka.get("symbol-placement"),this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(nd.vertical),Pb=0,Yc=hc.sections;Pb<Yc.length;Pb+=1)Gc=Yc[Pb],Gc.image?qb[Gc.image.name]=
!0:(Pc=Ke(hc.toString()),xd=Gc.fontStack||rc,xd=Bb[xd]=Bb[xd]||{},this.calculateGlyphDependencies(Gc.text,xd,Kb,this.allowVerticalPlacement,Pc))}}}"line"===ka.get("symbol-placement")&&(this.features=function(zd){function Id(sh,zg,Hf){var Qe=we[sh];return delete we[sh],we[zg]=Qe,pe[Qe].geometry[0].pop(),pe[Qe].geometry[0]=pe[Qe].geometry[0].concat(Hf[0]),Qe}function Td(sh,zg,Hf){var Qe=ne[zg];return delete ne[zg],ne[sh]=Qe,pe[Qe].geometry[0].shift(),pe[Qe].geometry[0]=Hf[0].concat(pe[Qe].geometry[0]),
Qe}function Qd(sh,zg,Hf){zg=Hf?zg[0][zg[0].length-1]:zg[0][0];return sh+":"+zg.x+":"+zg.y}for(var ne={},we={},pe=[],ue=0,Ne=0;Ne<zd.length;Ne++){var ge=zd[Ne],de=ge.geometry;if(ge=ge.text?ge.text.toString():null){var je=Qd(ge,de),$e=Qd(ge,de,!0);if(je in we&&$e in ne&&we[je]!==ne[$e]){de=Td(je,$e,de);var Gf=Id(je,$e,pe[de].geometry);delete ne[je];delete we[$e];we[Qd(ge,pe[Gf].geometry,!0)]=Gf;pe[de].geometry=null}else je in we?Id(je,$e,de):$e in ne?Td(je,$e,de):(pe.push(zd[Ne]),ue++,ne[je]=ue-1,we[$e]=
ue-1)}else pe.push(zd[Ne]),ue++}return pe.filter(function(sh){return sh.geometry})}(this.features));this.sortFeaturesByKey&&this.features.sort(function(zd,Id){return zd.sortKey-Id.sortKey})}};oe.prototype.update=function(r,A,M){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,A,this.layers,M),this.icon.programConfigurations.updatePaintArrays(r,A,this.layers,M))};oe.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText};oe.prototype.uploadPending=
function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload};oe.prototype.upload=function(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r));this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload);this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload);this.uploaded=!0};oe.prototype.destroyDebugData=
function(){this.textCollisionBox.destroy();this.iconCollisionBox.destroy()};oe.prototype.destroy=function(){this.text.destroy();this.icon.destroy();this.hasDebugData()&&this.destroyDebugData()};oe.prototype.addToLineVertexArray=function(r,A){var M=this.lineVertexArray.length;if(void 0!==r.segment){for(var W=r.dist(A[r.segment+1]),ka=r.dist(A[r.segment]),wa={},Fa=r.segment+1;Fa<A.length;Fa++)wa[Fa]={x:A[Fa].x,y:A[Fa].y,tileUnitDistanceFromAnchor:W},Fa<A.length-1&&(W+=A[Fa+1].dist(A[Fa]));for(r=r.segment||
0;0<=r;r--)wa[r]={x:A[r].x,y:A[r].y,tileUnitDistanceFromAnchor:ka},0<r&&(ka+=A[r-1].dist(A[r]));for(ka=0;ka<A.length;ka++)r=wa[ka],this.lineVertexArray.emplaceBack(r.x,r.y,r.tileUnitDistanceFromAnchor)}return{lineStartIndex:M,lineLength:this.lineVertexArray.length-M}};oe.prototype.addSymbols=function(r,A,M,W,ka,wa,Fa,Ua,bb,qb,Bb,Rb){ka=r.indexArray;for(var $b=r.layoutVertexArray,hc=r.segments.prepareSegment(4*A.length,$b,ka,wa.sortKey),rc=this.glyphOffsetArray.length,Kb=hc.vertexLength,Pb=this.allowVerticalPlacement&&
Fa===nd.vertical?Math.PI/2:0,Gc=wa.text&&wa.text.sections,Yc=0;Yc<A.length;Yc++){var Pc=A[Yc],xd=Pc.tl,zd=Pc.tr,Id=Pc.bl,Td=Pc.br,Qd=Pc.tex,ne=Pc.pixelOffsetTL,we=Pc.pixelOffsetBR,pe=Pc.minFontScaleX,ue=Pc.minFontScaleY,Ne=Pc.glyphOffset,ge=Pc.isSDF;Pc=Pc.sectionIndex;var de=hc.vertexLength,je=Ne[1];lg($b,Ua.x,Ua.y,xd.x,je+xd.y,Qd.x,Qd.y,M,ge,ne.x,ne.y,pe,ue);lg($b,Ua.x,Ua.y,zd.x,je+zd.y,Qd.x+Qd.w,Qd.y,M,ge,we.x,ne.y,pe,ue);lg($b,Ua.x,Ua.y,Id.x,je+Id.y,Qd.x,Qd.y+Qd.h,M,ge,ne.x,we.y,pe,ue);lg($b,Ua.x,
Ua.y,Td.x,je+Td.y,Qd.x+Qd.w,Qd.y+Qd.h,M,ge,we.x,we.y,pe,ue);Sf(r.dynamicLayoutVertexArray,Ua,Pb);ka.emplaceBack(de,de+1,de+2);ka.emplaceBack(de+1,de+2,de+3);hc.vertexLength+=4;hc.primitiveLength+=2;this.glyphOffsetArray.emplaceBack(Ne[0]);Yc!==A.length-1&&Pc===A[Yc+1].sectionIndex||r.programConfigurations.populatePaintArrays($b.length,wa,wa.index,{},Rb,Gc&&Gc[Pc])}r.placedSymbolArray.emplaceBack(Ua.x,Ua.y,rc,this.glyphOffsetArray.length-rc,Kb,bb,qb,Ua.segment,M?M[0]:0,M?M[1]:0,W[0],W[1],Fa,0,!1,0,
Bb)};oe.prototype._addCollisionDebugVertex=function(r,A,M,W,ka,wa){return A.emplaceBack(0,0),r.emplaceBack(M.x,M.y,W,ka,Math.round(wa.x),Math.round(wa.y))};oe.prototype.addCollisionDebugVertices=function(r,A,M,W,ka,wa,Fa){var Ua=ka.segments.prepareSegment(4,ka.layoutVertexArray,ka.indexArray),bb=Ua.vertexLength,qb=ka.layoutVertexArray,Bb=ka.collisionVertexArray,Rb=Fa.anchorX;Fa=Fa.anchorY;this._addCollisionDebugVertex(qb,Bb,wa,Rb,Fa,new le(r,A));this._addCollisionDebugVertex(qb,Bb,wa,Rb,Fa,new le(M,
A));this._addCollisionDebugVertex(qb,Bb,wa,Rb,Fa,new le(M,W));this._addCollisionDebugVertex(qb,Bb,wa,Rb,Fa,new le(r,W));Ua.vertexLength+=4;r=ka.indexArray;r.emplaceBack(bb,bb+1);r.emplaceBack(bb+1,bb+2);r.emplaceBack(bb+2,bb+3);r.emplaceBack(bb+3,bb);Ua.primitiveLength+=4};oe.prototype.addDebugCollisionBoxes=function(r,A,M,W){for(;r<A;r++){var ka=this.collisionBoxArray.get(r);this.addCollisionDebugVertices(ka.x1,ka.y1,ka.x2,ka.y2,W?this.textCollisionBox:this.iconCollisionBox,ka.anchorPoint,M)}};oe.prototype.generateCollisionDebugBuffers=
function(){this.hasDebugData()&&this.destroyDebugData();this.textCollisionBox=new Me(gh,Nb.members,nj);this.iconCollisionBox=new Me(gh,Nb.members,nj);for(var r=0;r<this.symbolInstances.length;r++){var A=this.symbolInstances.get(r);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0);this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0);this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1);this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,
A.verticalIconBoxEndIndex,A,!1)}};oe.prototype._deserializeCollisionBoxesForSymbol=function(r,A,M,W,ka,wa,Fa,Ua,bb){for(var qb={};A<M;){A=r.get(A);qb.textBox={x1:A.x1,y1:A.y1,x2:A.x2,y2:A.y2,anchorPointX:A.anchorPointX,anchorPointY:A.anchorPointY};qb.textFeatureIndex=A.featureIndex;break}for(;W<ka;){W=r.get(W);qb.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY};qb.verticalTextFeatureIndex=W.featureIndex;break}for(;wa<Fa;){wa=r.get(wa);qb.iconBox=
{x1:wa.x1,y1:wa.y1,x2:wa.x2,y2:wa.y2,anchorPointX:wa.anchorPointX,anchorPointY:wa.anchorPointY};qb.iconFeatureIndex=wa.featureIndex;break}for(;Ua<bb;){r=r.get(Ua);qb.verticalIconBox={x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2,anchorPointX:r.anchorPointX,anchorPointY:r.anchorPointY};qb.verticalIconFeatureIndex=r.featureIndex;break}return qb};oe.prototype.deserializeCollisionBoxes=function(r){this.collisionArrays=[];for(var A=0;A<this.symbolInstances.length;A++){var M=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,
M.textBoxStartIndex,M.textBoxEndIndex,M.verticalTextBoxStartIndex,M.verticalTextBoxEndIndex,M.iconBoxStartIndex,M.iconBoxEndIndex,M.verticalIconBoxStartIndex,M.verticalIconBoxEndIndex))}};oe.prototype.hasTextData=function(){return 0<this.text.segments.get().length};oe.prototype.hasIconData=function(){return 0<this.icon.segments.get().length};oe.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox};oe.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&
0<this.textCollisionBox.segments.get().length};oe.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length};oe.prototype.addIndicesForPlacedSymbol=function(r,A){var M=r.placedSymbolArray.get(A);A=M.vertexStartIndex+4*M.numGlyphs;for(M=M.vertexStartIndex;M<A;M+=4)r.indexArray.emplaceBack(M,M+1,M+2),r.indexArray.emplaceBack(M+1,M+2,M+3)};oe.prototype.getSortedSymbolIndexes=function(r){if(this.sortedAngle===r&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;
var A=Math.sin(r);r=Math.cos(r);for(var M=[],W=[],ka=[],wa=0;wa<this.symbolInstances.length;++wa){ka.push(wa);var Fa=this.symbolInstances.get(wa);M.push(0|Math.round(A*Fa.anchorX+r*Fa.anchorY));W.push(Fa.featureIndex)}return ka.sort(function(Ua,bb){return M[Ua]-M[bb]||W[bb]-W[Ua]}),ka};oe.prototype.addToSortKeyRanges=function(r,A){var M=this.sortKeyRanges[this.sortKeyRanges.length-1];M&&M.sortKey===A?M.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:r,symbolInstanceEnd:r+
1})};oe.prototype.sortFeatures=function(r){var A=this;if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r);this.sortedAngle=r;this.text.indexArray.clear();this.icon.indexArray.clear();this.featureSortOrder=[];r=0;for(var M=this.symbolInstanceIndexes;r<M.length;r+=1){var W=this.symbolInstances.get(M[r]);this.featureSortOrder.push(W.featureIndex);[W.rightJustifiedTextSymbolIndex,
W.centerJustifiedTextSymbolIndex,W.leftJustifiedTextSymbolIndex].forEach(function(ka,wa,Fa){0<=ka&&Fa.indexOf(ka)===wa&&A.addIndicesForPlacedSymbol(A.text,ka)});0<=W.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,W.verticalPlacedTextSymbolIndex);0<=W.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,W.placedIconSymbolIndex);0<=W.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,W.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray);
this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}};cd("SymbolBucket",oe,{omit:["layers","collisionBoxArray","features","compareText"]});oe.MAX_GLYPHS=65535;oe.addDynamicAttributes=Sf;var bg=new ph({"symbol-placement":new Vd(bc.layout_symbol["symbol-placement"]),"symbol-spacing":new Vd(bc.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Vd(bc.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ve(bc.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Vd(bc.layout_symbol["symbol-z-order"]),
"icon-allow-overlap":new Vd(bc.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Vd(bc.layout_symbol["icon-ignore-placement"]),"icon-optional":new Vd(bc.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Vd(bc.layout_symbol["icon-rotation-alignment"]),"icon-size":new ve(bc.layout_symbol["icon-size"]),"icon-text-fit":new Vd(bc.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Vd(bc.layout_symbol["icon-text-fit-padding"]),"icon-image":new ve(bc.layout_symbol["icon-image"]),
"icon-rotate":new ve(bc.layout_symbol["icon-rotate"]),"icon-padding":new Vd(bc.layout_symbol["icon-padding"]),"icon-keep-upright":new Vd(bc.layout_symbol["icon-keep-upright"]),"icon-offset":new ve(bc.layout_symbol["icon-offset"]),"icon-anchor":new ve(bc.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Vd(bc.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Vd(bc.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Vd(bc.layout_symbol["text-rotation-alignment"]),
"text-field":new ve(bc.layout_symbol["text-field"]),"text-font":new ve(bc.layout_symbol["text-font"]),"text-size":new ve(bc.layout_symbol["text-size"]),"text-max-width":new ve(bc.layout_symbol["text-max-width"]),"text-line-height":new Vd(bc.layout_symbol["text-line-height"]),"text-letter-spacing":new ve(bc.layout_symbol["text-letter-spacing"]),"text-justify":new ve(bc.layout_symbol["text-justify"]),"text-radial-offset":new ve(bc.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Vd(bc.layout_symbol["text-variable-anchor"]),
"text-anchor":new ve(bc.layout_symbol["text-anchor"]),"text-max-angle":new Vd(bc.layout_symbol["text-max-angle"]),"text-writing-mode":new Vd(bc.layout_symbol["text-writing-mode"]),"text-rotate":new ve(bc.layout_symbol["text-rotate"]),"text-padding":new Vd(bc.layout_symbol["text-padding"]),"text-keep-upright":new Vd(bc.layout_symbol["text-keep-upright"]),"text-transform":new ve(bc.layout_symbol["text-transform"]),"text-offset":new ve(bc.layout_symbol["text-offset"]),"text-allow-overlap":new Vd(bc.layout_symbol["text-allow-overlap"]),
"text-ignore-placement":new Vd(bc.layout_symbol["text-ignore-placement"]),"text-optional":new Vd(bc.layout_symbol["text-optional"])}),Ff={paint:new ph({"icon-opacity":new ve(bc.paint_symbol["icon-opacity"]),"icon-color":new ve(bc.paint_symbol["icon-color"]),"icon-halo-color":new ve(bc.paint_symbol["icon-halo-color"]),"icon-halo-width":new ve(bc.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ve(bc.paint_symbol["icon-halo-blur"]),"icon-translate":new Vd(bc.paint_symbol["icon-translate"]),"icon-translate-anchor":new Vd(bc.paint_symbol["icon-translate-anchor"]),
"text-opacity":new ve(bc.paint_symbol["text-opacity"]),"text-color":new ve(bc.paint_symbol["text-color"],{runtimeType:uc,getOverride:function(r){return r.textColor},hasOverride:function(r){return!!r.textColor}}),"text-halo-color":new ve(bc.paint_symbol["text-halo-color"]),"text-halo-width":new ve(bc.paint_symbol["text-halo-width"]),"text-halo-blur":new ve(bc.paint_symbol["text-halo-blur"]),"text-translate":new Vd(bc.paint_symbol["text-translate"]),"text-translate-anchor":new Vd(bc.paint_symbol["text-translate-anchor"])}),
layout:bg},Be=function(r){this.type=r.property.overrides?r.property.overrides.runtimeType:hb;this.defaultValue=r};Be.prototype.evaluate=function(r){if(r.formattedSection){var A=this.defaultValue.property.overrides;if(A&&A.hasOverride(r.formattedSection))return A.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default};Be.prototype.eachChild=function(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)};
Be.prototype.outputDefined=function(){return!1};Be.prototype.serialize=function(){return null};cd("FormatSectionOverride",Be,{omit:["defaultValue"]});var wg=function(r){function A(M){r.call(this,M,Ff)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.recalculate=function(M,W){if(r.prototype.recalculate.call(this,M,W),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?
"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement"))if(M=
this.layout.get("text-writing-mode")){W=[];for(var ka=0;ka<M.length;ka+=1){var wa=M[ka];0>W.indexOf(wa)&&W.push(wa)}this.layout._values["text-writing-mode"]=W}else this.layout._values["text-writing-mode"]=["horizontal"];this._setPaintOverrides()},A.prototype.getValueAndResolveTokens=function(M,W,ka,wa){ka=this.layout.get(M).evaluate(W,{},ka,wa);M=this._unevaluatedLayout._values[M];return M.isDataDriven()||id(M.value)||!ka?ka:function(Fa,Ua){return Ua.replace(/{([^{}]+)}/g,function(bb,qb){return qb in
Fa?String(Fa[qb]):""})}(W.properties,ka)},A.prototype.createBucket=function(M){return new oe(M)},A.prototype.queryRadius=function(){return 0},A.prototype.queryIntersectsFeature=function(){return!1},A.prototype._setPaintOverrides=function(){for(var M=0,W=Ff.paint.overridableProperties;M<W.length;M+=1){var ka=W[M];if(A.hasPaintOverride(this.layout,ka)){var wa=this.paint.get(ka);var Fa=new Be(wa);Fa=new Ug(Fa,wa.property.specification);Fa="constant"===wa.value.kind||"source"===wa.value.kind?new fe("source",
Fa):new yf("composite",Fa,wa.value.zoomStops,wa.value._interpolationType);this.paint._values[ka]=new Uf(wa.property,Fa,wa.parameters)}}},A.prototype._handleOverridablePaintPropertyUpdate=function(M,W,ka){return!(!this.layout||W.isDataDriven()||ka.isDataDriven())&&A.hasPaintOverride(this.layout,M)},A.hasPaintOverride=function(M,W){M=M.get("text-field");var ka=Ff.paint.properties[W],wa=!1,Fa=function(bb){for(var qb=0;qb<bb.length;qb+=1)if(ka.overrides&&ka.overrides.hasOverride(bb[qb]))return void(wa=
!0)};if("constant"===M.value.kind&&M.value.value instanceof Zd)Fa(M.value.value.sections);else if("source"===M.value.kind){var Ua=function(bb){wa||(bb instanceof De&&oa(bb.value)===kd?Fa(bb.value.sections):bb instanceof pf?Fa(bb.sections):bb.eachChild(Ua))};W=M.value;W._styleExpression&&Ua(W._styleExpression.expression)}return wa},A}(Uh),Te={paint:new ph({"background-color":new Vd(bc.paint_background["background-color"]),"background-pattern":new ui(bc.paint_background["background-pattern"]),"background-opacity":new Vd(bc.paint_background["background-opacity"])})},
Yf=function(r){function A(M){r.call(this,M,Te)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A}(Uh),Xf={paint:new ph({"raster-opacity":new Vd(bc.paint_raster["raster-opacity"]),"raster-hue-rotate":new Vd(bc.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Vd(bc.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Vd(bc.paint_raster["raster-brightness-max"]),"raster-saturation":new Vd(bc.paint_raster["raster-saturation"]),"raster-contrast":new Vd(bc.paint_raster["raster-contrast"]),
"raster-resampling":new Vd(bc.paint_raster["raster-resampling"]),"raster-fade-duration":new Vd(bc.paint_raster["raster-fade-duration"])})},nf=function(r){function A(M){r.call(this,M,Xf)}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A}(Uh),Ze=function(r){function A(M){r.call(this,M,{});this.implementation=M}return r&&(A.__proto__=r),(A.prototype=Object.create(r&&r.prototype)).constructor=A,A.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},
A.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},A.prototype.recalculate=function(){},A.prototype.updateTransitions=function(){},A.prototype.hasTransition=function(){},A.prototype.serialize=function(){},A.prototype.onAdd=function(M){this.implementation.onAdd&&this.implementation.onAdd(M,M.painter.context.gl)},A.prototype.onRemove=function(M){this.implementation.onRemove&&this.implementation.onRemove(M,M.painter.context.gl)},A}(Uh),Rg={circle:al,heatmap:Tk,hillshade:Ij,
fill:Lj,"fill-extrusion":nk,line:db,symbol:wg,background:Yf,raster:nf},ck=self.HTMLImageElement,Ei=self.HTMLCanvasElement,Yi=self.HTMLVideoElement,xj=self.ImageData,jj=self.ImageBitmap,re=function(r,A,M,W){this.context=r;this.format=M;this.texture=r.gl.createTexture();this.update(A,W)};re.prototype.update=function(r,A,M){var W=r.width,ka=r.height,wa=!(this.size&&this.size[0]===W&&this.size[1]===ka||M),Fa=this.context,Ua=Fa.gl;(this.useMipmap=!(!A||!A.useMipmap),Ua.bindTexture(Ua.TEXTURE_2D,this.texture),
Fa.pixelStoreUnpackFlipY.set(!1),Fa.pixelStoreUnpack.set(1),Fa.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ua.RGBA&&(!A||!1!==A.premultiply)),wa)?(this.size=[W,ka],r instanceof ck||r instanceof Ei||r instanceof Yi||r instanceof xj||jj&&r instanceof jj?Ua.texImage2D(Ua.TEXTURE_2D,0,this.format,this.format,Ua.UNSIGNED_BYTE,r):Ua.texImage2D(Ua.TEXTURE_2D,0,this.format,W,ka,0,this.format,Ua.UNSIGNED_BYTE,r.data)):(M=M||{x:0,y:0},A=M.x,M=M.y,r instanceof ck||r instanceof Ei||r instanceof Yi||r instanceof
xj||jj&&r instanceof jj?Ua.texSubImage2D(Ua.TEXTURE_2D,0,A,M,Ua.RGBA,Ua.UNSIGNED_BYTE,r):Ua.texSubImage2D(Ua.TEXTURE_2D,0,A,M,W,ka,Ua.RGBA,Ua.UNSIGNED_BYTE,r.data));this.useMipmap&&this.isSizePowerOfTwo()&&Ua.generateMipmap(Ua.TEXTURE_2D)};re.prototype.bind=function(r,A,M){var W=this.context.gl;W.bindTexture(W.TEXTURE_2D,this.texture);M!==W.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(M=W.LINEAR);r!==this.filter&&(W.texParameteri(W.TEXTURE_2D,W.TEXTURE_MAG_FILTER,r),W.texParameteri(W.TEXTURE_2D,
W.TEXTURE_MIN_FILTER,M||r),this.filter=r);A!==this.wrap&&(W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_S,A),W.texParameteri(W.TEXTURE_2D,W.TEXTURE_WRAP_T,A),this.wrap=A)};re.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0==Math.log(this.size[0])/Math.LN2%1};re.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture);this.texture=null};var Ek=function(r){var A=this;this._callback=r;this._triggered=!1;"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,
this._channel.port2.onmessage=function(){A._triggered=!1;A._callback()})};Ek.prototype.trigger=function(){var r=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){r._triggered=!1;r._callback()},0))};Ek.prototype.remove=function(){delete this._channel;this._callback=function(){}};var bk=function(r,A,M){this.target=r;this.parent=A;this.mapId=M;this.callbacks={};this.tasks={};this.taskQueue=[];this.cancelCallbacks={};u(["receive","process"],
this);this.invoker=new Ek(this.process);this.target.addEventListener("message",this.receive,!1);this.globalScope=C()?r:self};bk.prototype.send=function(r,A,M,W,ka){var wa=this;void 0===ka&&(ka=!1);var Fa=Math.round(1E18*Math.random()).toString(36).substring(0,10);M&&(this.callbacks[Fa]=M);var Ua=G(this.globalScope)?void 0:[];return this.target.postMessage({id:Fa,type:r,hasCallback:!!M,targetMapId:W,mustQueue:ka,sourceMapId:this.mapId,data:Nd(A,Ua)},Ua),{cancel:function(){M&&delete wa.callbacks[Fa];
wa.target.postMessage({id:Fa,type:"\x3ccancel\x3e",targetMapId:W,sourceMapId:wa.mapId})}}};bk.prototype.receive=function(r){var A=r.data;!(r=A.id)||A.targetMapId&&this.mapId!==A.targetMapId||("\x3ccancel\x3e"===A.type?(delete this.tasks[r],A=this.cancelCallbacks[r],delete this.cancelCallbacks[r],A&&A()):C()||A.mustQueue?(this.tasks[r]=A,this.taskQueue.push(r),this.invoker.trigger()):this.processTask(r,A))};bk.prototype.process=function(){if(this.taskQueue.length){var r=this.taskQueue.shift(),A=this.tasks[r];
delete this.tasks[r];this.taskQueue.length&&this.invoker.trigger();A&&this.processTask(r,A)}};bk.prototype.processTask=function(r,A){var M=this;if("\x3cresponse\x3e"===A.type){var W=this.callbacks[r];delete this.callbacks[r];W&&(A.error?W(Pd(A.error)):W(null,Pd(A.data)))}else{var ka=!1,wa=G(this.globalScope)?void 0:[];W=A.hasCallback?function(bb,qb){ka=!0;delete M.cancelCallbacks[r];M.target.postMessage({id:r,type:"\x3cresponse\x3e",sourceMapId:M.mapId,error:bb?Nd(bb):null,data:Nd(qb,wa)},wa)}:function(bb){ka=
!0};var Fa=null,Ua=Pd(A.data);this.parent[A.type]?Fa=this.parent[A.type](A.sourceMapId,Ua,W):this.parent.getWorkerSource?(Fa=A.type.split("."),Fa=this.parent.getWorkerSource(A.sourceMapId,Fa[0],Ua.source)[Fa[1]](Ua,W)):W(Error("Could not find function "+A.type));!ka&&Fa&&Fa.cancel&&(this.cancelCallbacks[r]=Fa.cancel)}};bk.prototype.remove=function(){this.invoker.remove();this.target.removeEventListener("message",this.receive,!1)};var Af=function(r,A){r&&(A?this.setSouthWest(r).setNorthEast(A):4===
r.length?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))};Af.prototype.setNorthEast=function(r){return this._ne=r instanceof uf?new uf(r.lng,r.lat):uf.convert(r),this};Af.prototype.setSouthWest=function(r){return this._sw=r instanceof uf?new uf(r.lng,r.lat):uf.convert(r),this};Af.prototype.extend=function(r){var A,M=this._sw,W=this._ne;if(r instanceof uf)var ka=A=r;else{if(!(r instanceof Af))return Array.isArray(r)?4===r.length||r.every(Array.isArray)?
this.extend(Af.convert(r)):this.extend(uf.convert(r)):this;if(ka=r._ne,!(A=r._sw)||!ka)return this}return M||W?(M.lng=Math.min(A.lng,M.lng),M.lat=Math.min(A.lat,M.lat),W.lng=Math.max(ka.lng,W.lng),W.lat=Math.max(ka.lat,W.lat)):(this._sw=new uf(A.lng,A.lat),this._ne=new uf(ka.lng,ka.lat)),this};Af.prototype.getCenter=function(){return new uf((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};Af.prototype.getSouthWest=function(){return this._sw};Af.prototype.getNorthEast=function(){return this._ne};
Af.prototype.getNorthWest=function(){return new uf(this.getWest(),this.getNorth())};Af.prototype.getSouthEast=function(){return new uf(this.getEast(),this.getSouth())};Af.prototype.getWest=function(){return this._sw.lng};Af.prototype.getSouth=function(){return this._sw.lat};Af.prototype.getEast=function(){return this._ne.lng};Af.prototype.getNorth=function(){return this._ne.lat};Af.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};Af.prototype.toString=function(){return"LngLatBounds("+
this._sw.toString()+", "+this._ne.toString()+")"};Af.prototype.isEmpty=function(){return!(this._sw&&this._ne)};Af.prototype.contains=function(r){var A=uf.convert(r);r=A.lng;A=A.lat;var M=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(M=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=A&&A<=this._ne.lat&&M};Af.convert=function(r){return!r||r instanceof Af?r:new Af(r)};var uf=function(r,A){if(isNaN(r)||isNaN(A))throw Error("Invalid LngLat object: ("+r+", "+A+")");if(this.lng=+r,
this.lat=+A,90<this.lat||-90>this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};uf.prototype.wrap=function(){return new uf(f(this.lng,-180,180),this.lat)};uf.prototype.toArray=function(){return[this.lng,this.lat]};uf.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"};uf.prototype.distanceTo=function(r){var A=Math.PI/180,M=this.lat*A,W=r.lat*A;return 6371008.8*Math.acos(Math.min(Math.sin(M)*Math.sin(W)+Math.cos(M)*Math.cos(W)*Math.cos((r.lng-
this.lng)*A),1))};uf.prototype.toBounds=function(r){void 0===r&&(r=0);r=360*r/40075017;var A=r/Math.cos(Math.PI/180*this.lat);return new Af(new uf(this.lng-A,this.lat-r),new uf(this.lng+A,this.lat+r))};uf.convert=function(r){if(r instanceof uf)return r;if(Array.isArray(r)&&(2===r.length||3===r.length))return new uf(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&"object"==typeof r&&null!==r)return new uf(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: \x3clng\x3e, lat: \x3clat\x3e}, an object {lon: \x3clng\x3e, lat: \x3clat\x3e}, or an array of [\x3clng\x3e, \x3clat\x3e]");
};var dk=1.27420176E7*Math.PI,kj=function(r,A,M){void 0===M&&(M=0);this.x=+r;this.y=+A;this.z=+M};kj.fromLngLat=function(r,A){void 0===A&&(A=0);r=uf.convert(r);return new kj(rg(r.lng),Eg(r.lat),A/(dk*Math.cos(r.lat*Math.PI/180)))};kj.prototype.toLngLat=function(){return new uf(360*this.x-180,Mf(this.y))};kj.prototype.toAltitude=function(){return this.z*dk*Math.cos(Mf(this.y)*Math.PI/180)};kj.prototype.meterInMercatorCoordinateUnits=function(){return 1/dk*(r=Mf(this.y),1/Math.cos(r*Math.PI/180));var r};
var Fi=function(r,A,M){this.z=r;this.x=A;this.y=M;this.key=ah(0,r,r,A,M)};Fi.prototype.equals=function(r){return this.z===r.z&&this.x===r.x&&this.y===r.y};Fi.prototype.url=function(r,A){var M,W,ka,wa,Fa,Ua=(W=this.y,ka=this.z,wa=Kf(256*(M=this.x),256*(W=Math.pow(2,ka)-W-1),ka),Fa=Kf(256*(M+1),256*(W+1),ka),wa[0]+","+wa[1]+","+Fa[0]+","+Fa[1]),bb;M="";for(W=this.z;0<W;W--)M+=(this.x&(bb=1<<W-1)?1:0)+(this.y&bb?2:0);bb=M;return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+
(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===A?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",bb).replace("{bbox-epsg-3857}",Ua)};Fi.prototype.getTilePoint=function(r){var A=Math.pow(2,this.z);return new le(8192*(r.x*A-this.x),8192*(r.y*A-this.y))};Fi.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Fk=function(r,A){this.wrap=r;this.canonical=A;this.key=ah(r,A.z,A.z,A.x,A.y)},Tf=function(r,A,M,W,
ka){this.overscaledZ=r;this.wrap=A;this.canonical=new Fi(M,+W,+ka);this.key=ah(A,r,M,W,ka)};Tf.prototype.equals=function(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)};Tf.prototype.scaledTo=function(r){var A=this.canonical.z-r;return r>this.canonical.z?new Tf(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Tf(r,this.wrap,r,this.canonical.x>>A,this.canonical.y>>A)};Tf.prototype.calculateScaledKey=function(r,A){var M=this.canonical.z-
r;return r>this.canonical.z?ah(this.wrap*+A,r,this.canonical.z,this.canonical.x,this.canonical.y):ah(this.wrap*+A,r,r,this.canonical.x>>M,this.canonical.y>>M)};Tf.prototype.isChildOf=function(r){if(r.wrap!==this.wrap)return!1;var A=this.canonical.z-r.canonical.z;return 0===r.overscaledZ||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>A&&r.canonical.y===this.canonical.y>>A};Tf.prototype.children=function(r){if(this.overscaledZ>=r)return[new Tf(this.overscaledZ+1,this.wrap,this.canonical.z,
this.canonical.x,this.canonical.y)];r=this.canonical.z+1;var A=2*this.canonical.x,M=2*this.canonical.y;return[new Tf(r,this.wrap,r,A,M),new Tf(r,this.wrap,r,A+1,M),new Tf(r,this.wrap,r,A,M+1),new Tf(r,this.wrap,r,A+1,M+1)]};Tf.prototype.isLessThan=function(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))};Tf.prototype.wrapped=function(){return new Tf(this.overscaledZ,
0,this.canonical.z,this.canonical.x,this.canonical.y)};Tf.prototype.unwrapTo=function(r){return new Tf(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)};Tf.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)};Tf.prototype.toUnwrapped=function(){return new Fk(this.wrap,this.canonical)};Tf.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y};Tf.prototype.getTilePoint=function(r){return this.canonical.getTilePoint(new kj(r.x-
this.wrap,r.y))};cd("CanonicalTileID",Fi);cd("OverscaledTileID",Tf,{omit:["posMatrix"]});var Vi=function(r,A,M){if(this.uid=r,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(M&&"mapbox"!==M&&"terrarium"!==M)return z('"'+M+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=A.height;r=this.dim=A.height-2;this.data=new Uint32Array(A.data.buffer);this.encoding=M||"mapbox";for(A=0;A<r;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,
A)],this.data[this._idx(r,A)]=this.data[this._idx(r-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,r)]=this.data[this._idx(A,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)];this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)];this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)];this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};Vi.prototype.get=function(r,A){var M=new Uint8Array(this.data.buffer);r=4*this._idx(r,A);return("terrarium"===this.encoding?
this._unpackTerrarium:this._unpackMapbox)(M[r],M[r+1],M[r+2])};Vi.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1E4]};Vi.prototype._idx=function(r,A){if(-1>r||r>=this.dim+1||-1>A||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(r+1)};Vi.prototype._unpackMapbox=function(r,A,M){return(65536*r+256*A+M)/10-1E4};Vi.prototype._unpackTerrarium=function(r,A,M){return 256*r+A+M/256-32768};
Vi.prototype.getPixels=function(){return new Vf({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))};Vi.prototype.backfillBorder=function(r,A,M){if(this.dim!==r.dim)throw Error("dem dimension mismatch");var W=A*this.dim,ka=A*this.dim+this.dim,wa=M*this.dim,Fa=M*this.dim+this.dim;switch(A){case -1:W=ka-1;break;case 1:ka=W+1}switch(M){case -1:wa=Fa-1;break;case 1:Fa=wa+1}A=-A*this.dim;for(M=-M*this.dim;wa<Fa;wa++)for(var Ua=W;Ua<ka;Ua++)this.data[this._idx(Ua,wa)]=r.data[this._idx(Ua+
A,wa+M)]};cd("DEMData",Vi);var bl=function(r){this._stringToNumber={};this._numberToString=[];for(var A=0;A<r.length;A++){var M=r[A];this._stringToNumber[M]=A;this._numberToString[A]=M}};bl.prototype.encode=function(r){return this._stringToNumber[r]};bl.prototype.decode=function(r){return this._numberToString[r]};var Gk=function(r,A,M,W,ka){this.type="Feature";this._vectorTileFeature=r;r._z=A;r._x=M;r._y=W;this.properties=r.properties;this.id=ka},Pk={geometry:{configurable:!0}};Pk.geometry.get=function(){return void 0===
this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry};Pk.geometry.set=function(r){this._geometry=r};Gk.prototype.toJSON=function(){var r={geometry:this.geometry},A;for(A in this)"_geometry"!==A&&"_vectorTileFeature"!==A&&(r[A]=this[A]);return r};Object.defineProperties(Gk.prototype,Pk);var zk=function(){this.state={};this.stateChanges={};this.deletedStates={}};zk.prototype.updateState=
function(r,A,M){A=String(A);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][A]=this.stateChanges[r][A]||{},g(this.stateChanges[r][A],M),null===this.deletedStates[r])for(var W in this.deletedStates[r]={},this.state[r])W!==A&&(this.deletedStates[r][W]=null);else if(this.deletedStates[r]&&null===this.deletedStates[r][A])for(var ka in this.deletedStates[r][A]={},this.state[r][A])M[ka]||(this.deletedStates[r][A][ka]=null);else for(var wa in M)this.deletedStates[r]&&this.deletedStates[r][A]&&
null===this.deletedStates[r][A][wa]&&delete this.deletedStates[r][A][wa]};zk.prototype.removeFeatureState=function(r,A,M){if(null!==this.deletedStates[r]){var W=String(A);if(this.deletedStates[r]=this.deletedStates[r]||{},M&&void 0!==A)null!==this.deletedStates[r][W]&&(this.deletedStates[r][W]=this.deletedStates[r][W]||{},this.deletedStates[r][W][M]=null);else if(void 0!==A)if(this.stateChanges[r]&&this.stateChanges[r][W])for(M in this.deletedStates[r][W]={},this.stateChanges[r][W])this.deletedStates[r][W][M]=
null;else this.deletedStates[r][W]=null;else this.deletedStates[r]=null}};zk.prototype.getState=function(r,A){var M=String(A);M=g({},(this.state[r]||{})[M],(this.stateChanges[r]||{})[M]);if(null===this.deletedStates[r])return{};if(this.deletedStates[r]){r=this.deletedStates[r][A];if(null===r)return{};for(var W in r)delete M[W]}return M};zk.prototype.initializeTileState=function(r,A){r.setFeatureState(this.state,A)};zk.prototype.coalesceChanges=function(r,A){var M={};for(Fa in this.stateChanges){this.state[Fa]=
this.state[Fa]||{};var W={},ka;for(ka in this.stateChanges[Fa])this.state[Fa][ka]||(this.state[Fa][ka]={}),g(this.state[Fa][ka],this.stateChanges[Fa][ka]),W[ka]=this.state[Fa][ka];M[Fa]=W}for(var wa in this.deletedStates){this.state[wa]=this.state[wa]||{};var Fa={};if(null===this.deletedStates[wa])for(var Ua in this.state[wa])Fa[Ua]={},this.state[wa][Ua]={};else for(var bb in this.deletedStates[wa]){if(null===this.deletedStates[wa][bb])this.state[wa][bb]={};else for(W=0,ka=Object.keys(this.deletedStates[wa][bb]);W<
ka.length;W+=1)delete this.state[wa][bb][ka[W]];Fa[bb]=this.state[wa][bb]}M[wa]=M[wa]||{};g(M[wa],Fa)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(M).length)for(var qb in r)r[qb].setFeatureState(M,A)};var rj=function(r,A){this.tileID=r;this.x=r.canonical.x;this.y=r.canonical.y;this.z=r.canonical.z;this.grid=new sd(8192,16,0);this.grid3D=new sd(8192,16,0);this.featureIndexArray=new Tj;this.promoteId=A};rj.prototype.insert=function(r,A,M,W,ka,wa){r=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(M,
W,ka);M=wa?this.grid3D:this.grid;for(W=0;W<A.length;W++){ka=A[W];wa=[1/0,1/0,-1/0,-1/0];for(var Fa=0;Fa<ka.length;Fa++){var Ua=ka[Fa];wa[0]=Math.min(wa[0],Ua.x);wa[1]=Math.min(wa[1],Ua.y);wa[2]=Math.max(wa[2],Ua.x);wa[3]=Math.max(wa[3],Ua.y)}8192>wa[0]&&8192>wa[1]&&0<=wa[2]&&0<=wa[3]&&M.insert(r,wa[0],wa[1],wa[2],wa[3])}};rj.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=(new ci.VectorTile(new Ue(this.rawTileData))).layers,this.sourceLayerCoder=new bl(this.vtLayers?Object.keys(this.vtLayers).sort():
["_geojsonTileLayer"])),this.vtLayers};rj.prototype.query=function(r,A,M,W){var ka=this;this.loadVTLayers();var wa=r.params||{},Fa=8192/r.tileSize/r.scale,Ua=Ab(wa.filter),bb=r.queryGeometry,qb=r.queryPadding*Fa,Bb=wf(bb),Rb=this.grid.query(Bb.minX-qb,Bb.minY-qb,Bb.maxX+qb,Bb.maxY+qb),$b=wf(r.cameraQueryGeometry);Bb=0;for($b=this.grid3D.query($b.minX-qb,$b.minY-qb,$b.maxX+qb,$b.maxY+qb,function(Kb,Pb,Gc,Yc){a:{var Pc=r.cameraQueryGeometry;Kb-=qb;Pb-=qb;Gc+=qb;Yc+=qb;for(var xd=0;xd<Pc.length;xd+=
1){var zd=Pc[xd];if(Kb<=zd.x&&Pb<=zd.y&&Gc>=zd.x&&Yc>=zd.y){Pc=!0;break a}}Kb=[new le(Kb,Pb),new le(Kb,Yc),new le(Gc,Yc),new le(Gc,Pb)];if(2<Pc.length)for(Pb=0;Pb<Kb.length;Pb+=1)if(Sb(Pc,Kb[Pb])){Pc=!0;break a}for(Pb=0;Pb<Pc.length-1;Pb++){Yc=Pc[Pb];Gc=Pc[Pb+1];xd=Kb;zd=xd[0];var Id=xd[2];Yc.x<zd.x&&Gc.x<zd.x||Yc.x>Id.x&&Gc.x>Id.x||Yc.y<zd.y&&Gc.y<zd.y||Yc.y>Id.y&&Gc.y>Id.y?Yc=!1:(zd=B(Yc,Gc,xd[0]),Yc=zd!==B(Yc,Gc,xd[1])||zd!==B(Yc,Gc,xd[2])||zd!==B(Yc,Gc,xd[3]));if(Yc){Pc=!0;break a}}Pc=!1}return Pc});Bb<
$b.length;Bb+=1)Rb.push($b[Bb]);Rb.sort(Wi);var hc,rc={};Bb=function(Kb){Kb=Rb[Kb];if(Kb!==hc){hc=Kb;Kb=ka.featureIndexArray.get(Kb);var Pb=null;ka.loadMatchingFeature(rc,Kb.bucketIndex,Kb.sourceLayerIndex,Kb.featureIndex,Ua,wa.layers,wa.availableImages,A,M,W,function(Gc,Yc,Pc){return Pb||(Pb=ke(Gc)),Yc.queryIntersectsFeature(bb,Gc,Pc,Pb,ka.z,r.transform,Fa,r.pixelPosMatrix)})}};for($b=0;$b<Rb.length;$b++)Bb($b);return rc};rj.prototype.loadMatchingFeature=function(r,A,M,W,ka,wa,Fa,Ua,bb,qb,Bb){A=
this.bucketLayerIDs[A];var Rb;if(!(Rb=!wa))a:{for(Rb=0;Rb<wa.length;Rb++)if(0<=A.indexOf(wa[Rb])){Rb=!0;break a}Rb=!1}if(Rb&&(Rb=this.sourceLayerCoder.decode(M),M=this.vtLayers[Rb].feature(W),ka.filter(new mf(this.tileID.overscaledZ),M)))for(ka=this.getId(M,Rb),Rb=0;Rb<A.length;Rb++){var $b=A[Rb];if(!(wa&&0>wa.indexOf($b))){var hc=Ua[$b];if(hc){var rc={};void 0!==ka&&qb&&(rc=qb.getState(hc.sourceLayer||"_geojsonTileLayer",ka));var Kb=bb[$b];Kb.paint=nh(Kb.paint,hc.paint,M,rc,Fa);Kb.layout=nh(Kb.layout,
hc.layout,M,rc,Fa);if(hc=!Bb||Bb(M,hc,rc))rc=new Gk(M,this.z,this.x,this.y,ka),rc.layer=Kb,Kb=r[$b],void 0===Kb&&(Kb=r[$b]=[]),Kb.push({featureIndex:W,feature:rc,intersectionZ:hc})}}}};rj.prototype.lookupSymbolFeatures=function(r,A,M,W,ka,wa,Fa,Ua){var bb={};this.loadVTLayers();ka=Ab(ka);for(var qb=0;qb<r.length;qb+=1)this.loadMatchingFeature(bb,M,W,r[qb],ka,wa,Fa,Ua,A);return bb};rj.prototype.hasLayer=function(r){for(var A=0,M=this.bucketLayerIDs;A<M.length;A+=1)for(var W=0,ka=M[A];W<ka.length;W+=
1)if(r===ka[W])return!0;return!1};rj.prototype.getId=function(r,A){var M=r.id;return this.promoteId&&"boolean"==typeof(M=r.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[A]])&&(M=Number(M)),M};cd("FeatureIndex",rj,{omit:["rawTileData","sourceLayerCoder"]});var og=function(r,A){this.tileID=r;this.uid=ch++;this.uses=0;this.tileSize=A;this.buckets={};this.expirationTime=null;this.queryPadding=0;this.hasRTLText=this.hasSymbolBuckets=!1;this.dependencies={};this.expiredRequestCount=
0;this.state="loading"};og.prototype.registerFadeDuration=function(r){r+=this.timeAdded;r<Ig.now()||this.fadeEndTime&&r<this.fadeEndTime||(this.fadeEndTime=r)};og.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state};og.prototype.loadVectorData=function(r,A,M){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){for(var W in r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,
this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(Ua,bb){var qb={};if(!bb)return qb;for(var Bb=function(){var hc=$b[Rb],rc=hc.layerIds.map(function(Pb){return bb.getLayer(Pb)}).filter(Boolean);if(0!==rc.length){hc.layers=rc;hc.stateDependentLayerIds&&(hc.stateDependentLayers=hc.stateDependentLayerIds.map(function(Pb){return rc.filter(function(Gc){return Gc.id===
Pb})[0]}));for(var Kb=0;Kb<rc.length;Kb+=1)qb[rc[Kb].id]=hc}},Rb=0,$b=Ua;Rb<$b.length;Rb+=1)Bb();return qb}(r.buckets,A.style),this.hasSymbolBuckets=!1,this.buckets){var ka=this.buckets[W];if(ka instanceof oe){if(this.hasSymbolBuckets=!0,!M)break;ka.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var wa in this.buckets)if(M=this.buckets[wa],M instanceof oe&&M.hasRTLText){this.hasRTLText=!0;Lg.isLoading()||Lg.isLoaded()||"deferred"!==Ag||mk();break}for(var Fa in this.queryPadding=
0,this.buckets)wa=this.buckets[Fa],this.queryPadding=Math.max(this.queryPadding,A.style.getLayer(Fa).queryRadius(wa));r.imageAtlas&&(this.imageAtlas=r.imageAtlas);r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new Li};og.prototype.unloadVectorData=function(){for(var r in this.buckets)this.buckets[r].destroy();this.buckets={};this.imageAtlasTexture&&this.imageAtlasTexture.destroy();this.imageAtlas&&(this.imageAtlas=null);this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy();
this.latestFeatureIndex=null;this.state="unloaded"};og.prototype.getBucket=function(r){return this.buckets[r.id]};og.prototype.upload=function(r){for(var A in this.buckets){var M=this.buckets[A];M.uploadPending()&&M.upload(r)}A=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new re(r,this.imageAtlas.image,A.RGBA),this.imageAtlas.uploaded=!0);this.glyphAtlasImage&&(this.glyphAtlasTexture=new re(r,this.glyphAtlasImage,A.ALPHA),this.glyphAtlasImage=null)};og.prototype.prepare=
function(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)};og.prototype.queryRenderedFeatures=function(r,A,M,W,ka,wa,Fa,Ua,bb,qb){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:W,cameraQueryGeometry:ka,scale:wa,tileSize:this.tileSize,pixelPosMatrix:qb,transform:Ua,params:Fa,queryPadding:this.queryPadding*bb},r,A,M):{}};og.prototype.querySourceFeatures=function(r,A){var M=this.latestFeatureIndex;if(M&&
M.rawTileData){var W=M.loadVTLayers(),ka=A?A.sourceLayer:"";if(W=W._geojsonTileLayer||W[ka]){A=Ab(A&&A.filter);var wa=this.tileID.canonical,Fa=wa.z,Ua=wa.x;wa=wa.y;for(var bb={z:Fa,x:Ua,y:wa},qb=0;qb<W.length;qb++){var Bb=W.feature(qb);if(A.filter(new mf(this.tileID.overscaledZ),Bb)){var Rb=M.getId(Bb,ka);Bb=new Gk(Bb,Fa,Ua,wa,Rb);Bb.tile=bb;r.push(Bb)}}}}};og.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};og.prototype.patternsLoaded=function(){return this.imageAtlas&&
!!Object.keys(this.imageAtlas.patternPositions).length};og.prototype.setExpiryData=function(r){var A=this.expirationTime;r.cacheControl?(r=v(r.cacheControl),r["max-age"]&&(this.expirationTime=Date.now()+1E3*r["max-age"])):r.expires&&(this.expirationTime=(new Date(r.expires)).getTime());if(this.expirationTime){r=Date.now();var M=!1;this.expirationTime>r?M=!1:A?this.expirationTime<A?M=!0:(A=this.expirationTime-A)?this.expirationTime=r+Math.max(A,3E4):M=!0:M=!0;M?(this.expiredRequestCount++,this.state=
"expired"):this.expiredRequestCount=0}};og.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};og.prototype.setFeatureState=function(r,A){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(r).length){var M=this.latestFeatureIndex.loadVTLayers(),W;for(W in this.buckets)if(A.style.hasLayer(W)){var ka=this.buckets[W],
wa=ka.layers[0].sourceLayer||"_geojsonTileLayer",Fa=M[wa];wa=r[wa];Fa&&wa&&0!==Object.keys(wa).length&&(ka.update(wa,Fa,this.imageAtlas&&this.imageAtlas.patternPositions||{}),(Fa=A&&A.style&&A.style.getLayer(W))&&(this.queryPadding=Math.max(this.queryPadding,Fa.queryRadius(ka))))}}};og.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil};og.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ig.now()};og.prototype.clearFadeHold=
function(){this.symbolFadeHoldUntil=void 0};og.prototype.setHoldDuration=function(r){this.symbolFadeHoldUntil=Ig.now()+r};og.prototype.setDependencies=function(r,A){for(var M={},W=0;W<A.length;W+=1)M[A[W]]=!0;this.dependencies[r]=M};og.prototype.hasDependency=function(r,A){for(var M=0;M<r.length;M+=1){var W=this.dependencies[r[M]];if(W)for(var ka=0,wa=A;ka<wa.length;ka+=1)if(W[wa[ka]])return!0}return!1};var ik=self.performance,Z=function(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,
"end"].join("#"),measure:r.url.toString()};ik.mark(this._marks.start)};Z.prototype.finish=function(){ik.mark(this._marks.end);var r=ik.getEntriesByName(this._marks.measure);return 0===r.length&&(ik.measure(this._marks.measure,this._marks.start,this._marks.end),r=ik.getEntriesByName(this._marks.measure),ik.clearMarks(this._marks.start),ik.clearMarks(this._marks.end),ik.clearMeasures(this._marks.measure)),r};a.Actor=bk;a.AlphaImage=Zg;a.CanonicalTileID=Fi;a.CollisionBoxArray=Li;a.Color=Ed;a.DEMData=
Vi;a.DataConstantProperty=Vd;a.DictionaryCoder=bl;a.EXTENT=8192;a.ErrorEvent=Kc;a.EvaluationParameters=mf;a.Event=Cc;a.Evented=Hc;a.FeatureIndex=rj;a.FillBucket=Cg;a.FillExtrusionBucket=ih;a.ImageAtlas=hd;a.ImagePosition=Xc;a.LineBucket=La;a.LngLat=uf;a.LngLatBounds=Af;a.MercatorCoordinate=kj;a.ONE_EM=24;a.OverscaledTileID=Tf;a.Point=le;a.Point$1=le;a.Properties=ph;a.Protobuf=Ue;a.RGBAImage=Vf;a.RequestManager=Zf;a.RequestPerformance=Z;a.ResourceType=Da;a.SegmentVector=$f;a.SourceFeatureState=zk;
a.StructArrayLayout1ui2=Rj;a.StructArrayLayout2f1f2i16=Mg;a.StructArrayLayout2i4=zj;a.StructArrayLayout3ui6=Zi;a.StructArrayLayout4i8=Ji;a.SymbolBucket=oe;a.Texture=re;a.Tile=og;a.Transitionable=ri;a.Uniform1f=Ik;a.Uniform1i=ll;a.Uniform2f=ml;a.Uniform3f=Nk;a.Uniform4f=Hj;a.UniformColor=Ni;a.UniformMatrix4f=vh;a.UnwrappedTileID=Fk;a.ValidationError=Aa;a.WritingMode=nd;a.ZoomHistory=rk;a.add=function(r,A,M){return r[0]=A[0]+M[0],r[1]=A[1]+M[1],r[2]=A[2]+M[2],r};a.addDynamicAttributes=Sf;a.asyncAll=
function(r,A,M){if(!r.length)return M(null,[]);var W=r.length,ka=Array(r.length),wa=null;r.forEach(function(Fa,Ua){A(Fa,function(bb,qb){bb&&(wa=bb);ka[Ua]=qb;0==--W&&M(wa,ka)})})};a.bezier=k;a.bindAll=u;a.browser=Ig;a.cacheEntryPossiblyAdded=function(r){++ja>ba&&(r.getActor().send("enforceCacheSizeLimit",Y),ja=0)};a.clamp=c;a.clearTileCache=function(r){var A=self.caches.delete("mapbox-tiles");r&&A.catch(r).then(function(){return r()})};a.clipLine=Rf;a.clone=function(r){var A=new Xg(16);return A[0]=
r[0],A[1]=r[1],A[2]=r[2],A[3]=r[3],A[4]=r[4],A[5]=r[5],A[6]=r[6],A[7]=r[7],A[8]=r[8],A[9]=r[9],A[10]=r[10],A[11]=r[11],A[12]=r[12],A[13]=r[13],A[14]=r[14],A[15]=r[15],A};a.clone$1=F;a.clone$2=function(r){var A=new Xg(3);return A[0]=r[0],A[1]=r[1],A[2]=r[2],A};a.collisionCircleLayout=Vb;a.config=ef;a.create=function(){var r=new Xg(16);return Xg!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r};a.create$1=function(){var r=
new Xg(9);return Xg!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r};a.create$2=function(){var r=new Xg(4);return Xg!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r};a.createCommonjsModule=d;a.createExpression=Tc;a.createLayout=Rd;a.createStyleLayer=function(r){return"custom"===r.type?new Ze(r):new Rg[r.type](r)};a.cross=function(r,A,M){var W=A[0],ka=A[1];A=A[2];var wa=M[0],Fa=M[1];M=M[2];return r[0]=ka*M-A*Fa,r[1]=A*wa-W*M,r[2]=W*Fa-ka*wa,r};a.deepEqual=function W(A,
M){if(Array.isArray(A)){if(!Array.isArray(M)||A.length!==M.length)return!1;for(var ka=0;ka<A.length;ka++)if(!W(A[ka],M[ka]))return!1;return!0}if("object"==typeof A&&null!==A&&null!==M){if("object"!=typeof M||Object.keys(A).length!==Object.keys(M).length)return!1;for(ka in A)if(!W(A[ka],M[ka]))return!1;return!0}return A===M};a.dot=function(A,M){return A[0]*M[0]+A[1]*M[1]+A[2]*M[2]};a.dot$1=function(A,M){return A[0]*M[0]+A[1]*M[1]+A[2]*M[2]+A[3]*M[3]};a.ease=Mj;a.emitValidationErrors=Od;a.endsWith=
w;a.enforceCacheSizeLimit=function(A){P();dh&&dh.then(function(M){M.keys().then(function(W){for(var ka=0;ka<W.length-A;ka++)M.delete(W[ka])})})};a.evaluateSizeForFeature=Gg;a.evaluateSizeForZoom=Di;a.evaluateVariableOffset=qi;a.evented=fk;a.extend=g;a.featureFilter=Ab;a.filterObject=E;a.fromRotation=function(A,M){var W=Math.sin(M);M=Math.cos(M);return A[0]=M,A[1]=W,A[2]=0,A[3]=-W,A[4]=M,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A};a.getAnchorAlignment=ni;a.getAnchorJustification=Ti;a.getArrayBuffer=Ob;a.getImage=
Lc;a.getJSON=function(A,M){return sb(g(A,{type:"json"}),M)};a.getRTLTextPluginStatus=function(){return Ag};a.getReferrer=gb;a.getVideo=function(A,M){var W=self.document.createElement("video");W.muted=!0;W.onloadstart=function(){M(null,W)};for(var ka=0;ka<A.length;ka++){var wa=self.document.createElement("source");var Fa=A[ka];var Ua=void 0;(Ua=self.document.createElement("a")).href=Fa;Ua.protocol===self.document.location.protocol&&Ua.host===self.document.location.host||(W.crossOrigin="Anonymous");
wa.src=A[ka];W.appendChild(wa)}return{cancel:function(){}}};a.identity=Sc;a.invert=function(A,M){var W=M[0],ka=M[1],wa=M[2],Fa=M[3],Ua=M[4],bb=M[5],qb=M[6],Bb=M[7],Rb=M[8],$b=M[9],hc=M[10],rc=M[11],Kb=M[12],Pb=M[13],Gc=M[14];M=M[15];var Yc=W*bb-ka*Ua,Pc=W*qb-wa*Ua,xd=W*Bb-Fa*Ua,zd=ka*qb-wa*bb,Id=ka*Bb-Fa*bb,Td=wa*Bb-Fa*qb,Qd=Rb*Pb-$b*Kb,ne=Rb*Gc-hc*Kb,we=Rb*M-rc*Kb,pe=$b*Gc-hc*Pb,ue=$b*M-rc*Pb,Ne=hc*M-rc*Gc,ge=Yc*Ne-Pc*ue+xd*pe+zd*we-Id*ne+Td*Qd;return ge?(A[0]=(bb*Ne-qb*ue+Bb*pe)*(ge=1/ge),A[1]=
(wa*ue-ka*Ne-Fa*pe)*ge,A[2]=(Pb*Td-Gc*Id+M*zd)*ge,A[3]=(hc*Id-$b*Td-rc*zd)*ge,A[4]=(qb*we-Ua*Ne-Bb*ne)*ge,A[5]=(W*Ne-wa*we+Fa*ne)*ge,A[6]=(Gc*xd-Kb*Td-M*Pc)*ge,A[7]=(Rb*Td-hc*xd+rc*Pc)*ge,A[8]=(Ua*ue-bb*we+Bb*Qd)*ge,A[9]=(ka*we-W*ue-Fa*Qd)*ge,A[10]=(Kb*Id-Pb*xd+M*Yc)*ge,A[11]=($b*xd-Rb*Id-rc*Yc)*ge,A[12]=(bb*ne-Ua*pe-qb*Qd)*ge,A[13]=(W*pe-ka*ne+wa*Qd)*ge,A[14]=(Pb*Pc-Kb*zd-Gc*Yc)*ge,A[15]=(Rb*zd-$b*Pc+hc*Yc)*ge,A):null};a.isChar=ae;a.isMapboxURL=K;a.keysDifference=function(A,M){var W=[],ka;for(ka in A)ka in
M||W.push(ka);return W};a.makeRequest=sb;a.mapObject=x;a.mercatorXfromLng=rg;a.mercatorYfromLat=Eg;a.mercatorZfromAltitude=function(A,M){return A/(dk*Math.cos(M*Math.PI/180))};a.mul=jd;a.multiply=jd;a.mvt=ci;a.normalize=function(A,M){var W=M[0],ka=M[1],wa=M[2];W=W*W+ka*ka+wa*wa;return 0<W&&(W=1/Math.sqrt(W)),A[0]=M[0]*W,A[1]=M[1]*W,A[2]=M[2]*W,A};a.number=ra;a.offscreenCanvasSupported=S;a.ortho=function(A,M,W,ka,wa,Fa,Ua){var bb=1/(M-W),qb=1/(ka-wa),Bb=1/(Fa-Ua);return A[0]=-2*bb,A[1]=0,A[2]=0,A[3]=
0,A[4]=0,A[5]=-2*qb,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*Bb,A[11]=0,A[12]=(M+W)*bb,A[13]=(wa+ka)*qb,A[14]=(Ua+Fa)*Bb,A[15]=1,A};a.parseGlyphPBF=function(A){return(new Ue(A)).readFields(sg,[])};a.pbf=Ue;a.performSymbolLayout=function(A,M,W,ka,wa,Fa,Ua){A.createArrays();A.tilePixelRatio=8192/(512*A.overscaling);A.compareText={};A.iconsNeedLinear=!1;var bb=A.layers[0].layout,qb=A.layers[0]._unevaluatedLayout._values,Bb={};if("composite"===A.textSizeData.kind){var Rb=A.textSizeData,$b=Rb.maxZoom;Bb.compositeTextSizes=
[qb["text-size"].possiblyEvaluate(new mf(Rb.minZoom),Ua),qb["text-size"].possiblyEvaluate(new mf($b),Ua)]}"composite"===A.iconSizeData.kind&&(Rb=A.iconSizeData,$b=Rb.maxZoom,Bb.compositeIconSizes=[qb["icon-size"].possiblyEvaluate(new mf(Rb.minZoom),Ua),qb["icon-size"].possiblyEvaluate(new mf($b),Ua)]);Bb.layoutTextSize=qb["text-size"].possiblyEvaluate(new mf(A.zoom+1),Ua);Bb.layoutIconSize=qb["icon-size"].possiblyEvaluate(new mf(A.zoom+1),Ua);Bb.textMaxSize=qb["text-size"].possiblyEvaluate(new mf(18));
var hc=24*bb.get("text-line-height"),rc="map"===bb.get("text-rotation-alignment")&&"point"!==bb.get("symbol-placement"),Kb=bb.get("text-keep-upright"),Pb=bb.get("text-size");qb=function(){var Pc=Yc[Gc],xd=bb.get("text-font").evaluate(Pc,{},Ua).join(","),zd=Pb.evaluate(Pc,{},Ua),Id=Bb.layoutTextSize.evaluate(Pc,{},Ua),Td=Bb.layoutIconSize.evaluate(Pc,{},Ua),Qd={horizontal:{},vertical:void 0},ne=Pc.text,we=[0,0];if(ne){var pe=ne.toString(),ue=24*bb.get("text-letter-spacing").evaluate(Pc,{},Ua),Ne=function(Qe){for(var ag=
0;ag<Qe.length;ag+=1)if(Kg=Qe[ag].charCodeAt(0),ae.Arabic(Kg)||ae["Arabic Supplement"](Kg)||ae["Arabic Extended-A"](Kg)||ae["Arabic Presentation Forms-A"](Kg)||ae["Arabic Presentation Forms-B"](Kg))return!1;var Kg;return!0}(pe)?ue:0,ge=bb.get("text-anchor").evaluate(Pc,{},Ua),de=bb.get("text-variable-anchor");de||(we=(ue=bb.get("text-radial-offset").evaluate(Pc,{},Ua))?qi(ge,[24*ue,ie]):bb.get("text-offset").evaluate(Pc,{},Ua).map(function(Qe){return 24*Qe}));var je=rc?"center":bb.get("text-justify").evaluate(Pc,
{},Ua),$e=bb.get("symbol-placement"),Gf="point"===$e?24*bb.get("text-max-width").evaluate(Pc,{},Ua):0;ue=function(){A.allowVerticalPlacement&&Ke(pe)&&(Qd.vertical=Oh(ne,M,W,wa,xd,Gf,hc,ge,"left",Ne,we,nd.vertical,!0,$e,Id,zd))};if(!rc&&de){de="auto"===je?de.map(function(Qe){return Ti(Qe)}):[je];je=!1;for(var sh=0;sh<de.length;sh++){var zg=de[sh];if(!Qd.horizontal[zg])if(je)Qd.horizontal[zg]=Qd.horizontal[0];else{var Hf=Oh(ne,M,W,wa,xd,Gf,hc,"center",zg,Ne,we,nd.horizontal,!1,$e,Id,zd);Hf&&(Qd.horizontal[zg]=
Hf,je=1===Hf.positionedLines.length)}}ue()}else"auto"===je&&(je=Ti(ge)),(de=Oh(ne,M,W,wa,xd,Gf,hc,ge,je,Ne,we,nd.horizontal,!1,$e,Id,zd))&&(Qd.horizontal[je]=de),ue(),Ke(pe)&&rc&&Kb&&(Qd.vertical=Oh(ne,M,W,wa,xd,Gf,hc,ge,je,Ne,we,nd.vertical,!1,$e,Id,zd))}ue=void 0;de=!1;Pc.icon&&Pc.icon.name&&(je=ka[Pc.icon.name])&&(ue=function(Qe,ag,Kg){var eh=ni(Kg);Kg=ag[0]-Qe.displaySize[0]*eh.horizontalAlign;ag=ag[1]-Qe.displaySize[1]*eh.verticalAlign;return{image:Qe,top:ag,bottom:ag+Qe.displaySize[1],left:Kg,
right:Kg+Qe.displaySize[0]}}(wa[Pc.icon.name],bb.get("icon-offset").evaluate(Pc,{},Ua),bb.get("icon-anchor").evaluate(Pc,{},Ua)),de=je.sdf,void 0===A.sdfIcons?A.sdfIcons=je.sdf:A.sdfIcons!==je.sdf&&z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(je.pixelRatio!==A.pixelRatio||0!==bb.get("icon-rotate").constantOr(1))&&(A.iconsNeedLinear=!0));je=Ef(Qd.horizontal)||Qd.vertical;A.iconsInText=!!je&&je.iconsInText;(je||ue)&&function(Qe,ag,Kg,eh,Uk,qj,Nf,Ah,sk,Jk,Vk){var th=qj.textMaxSize.evaluate(ag,
{});void 0===th&&(th=Nf);var tk,fg=Qe.layers[0].layout,Hi=fg.get("icon-offset").evaluate(ag,{},Vk),xf=Ef(Kg.horizontal),Bh=Nf/24,Ml=Qe.tilePixelRatio*Bh;th=Qe.tilePixelRatio*th/24;var Nl=Qe.tilePixelRatio*Ah,Bj=Qe.tilePixelRatio*fg.get("symbol-spacing"),Ol=fg.get("text-padding")*Qe.tilePixelRatio,Pl=fg.get("icon-padding")*Qe.tilePixelRatio;Ah=fg.get("text-max-angle")/180*Math.PI;var Ql="map"===fg.get("text-rotation-alignment")&&"point"!==fg.get("symbol-placement"),Rl="map"===fg.get("icon-rotation-alignment")&&
"point"!==fg.get("symbol-placement"),Wk=fg.get("symbol-placement"),Kk=Bj/2,dl=fg.get("icon-text-fit");eh&&"none"!==dl&&(Qe.allowVerticalPlacement&&Kg.vertical&&(tk=Qi(eh,Kg.vertical,dl,fg.get("icon-text-fit-padding"),Hi,Bh)),xf&&(eh=Qi(eh,xf,dl,fg.get("icon-text-fit-padding"),Hi,Bh)));fg=function(Sl,nl){0>nl.x||8192<=nl.x||0>nl.y||8192<=nl.y||function(gg,Wj,ul,jk,uk,vl,Lk,Cj,el,ol,fl,hl,yl,wl,Xk,Yk,pl,Dl,Zk,ql,$i,xl,El,kk,Tl){var rl,il,jl=gg.addToLineVertexArray(Wj,ul),sl=0,Fl=ul=0,Gl=0,kl=-1,zl=
-1,vk={},Hl=Uj(""),Al=0,Bl=0;if(void 0===Cj._unevaluatedLayout.getValue("text-radial-offset")?(Al=(rl=Cj.layout.get("text-offset").evaluate($i,{},kk).map(function(tl){return 24*tl}))[0],Bl=rl[1]):(Al=24*Cj.layout.get("text-radial-offset").evaluate($i,{},kk),Bl=ie),gg.allowVerticalPlacement&&jk.vertical){rl=Cj.layout.get("text-rotate").evaluate($i,{},kk)+90;var $k=new ld(el,Wj,ol,fl,hl,jk.vertical,yl,wl,Xk,rl);Lk&&(il=new ld(el,Wj,ol,fl,hl,Lk,pl,Dl,Xk,rl))}if(uk){var wk=Cj.layout.get("icon-rotate").evaluate($i,
{});sl="none"!==Cj.layout.get("icon-text-fit");kl=$g(uk,wk,El,sl);Lk=Lk?$g(Lk,wk,El,sl):void 0;wk=new ld(el,Wj,ol,fl,hl,uk,pl,Dl,!1,wk);sl=4*kl.length;pl=gg.iconSizeData;uk=null;"source"===pl.kind?32640<(uk=[128*Cj.layout.get("icon-size").evaluate($i,{})])[0]&&z(gg.layerIds[0]+': Value for "icon-size" is \x3e\x3d 255. Reduce your "icon-size".'):"composite"===pl.kind&&(32640<(uk=[128*xl.compositeIconSizes[0].evaluate($i,{},kk),128*xl.compositeIconSizes[1].evaluate($i,{},kk)])[0]||32640<uk[1])&&z(gg.layerIds[0]+
': Value for "icon-size" is \x3e\x3d 255. Reduce your "icon-size".');gg.addSymbols(gg.icon,kl,uk,ql,Zk,$i,!1,Wj,jl.lineStartIndex,jl.lineLength,-1,kk);kl=gg.icon.placedSymbolArray.length-1;Lk&&(ul=4*Lk.length,gg.addSymbols(gg.icon,Lk,uk,ql,Zk,$i,nd.vertical,Wj,jl.lineStartIndex,jl.lineLength,-1,kk),zl=gg.icon.placedSymbolArray.length-1)}for(var Il in jk.horizontal){Zk=jk.horizontal[Il];if(!Wh){Hl=Uj(Zk.text);var Wh=Cj.layout.get("text-rotate").evaluate($i,{},kk);Wh=new ld(el,Wj,ol,fl,hl,Zk,yl,wl,
Xk,Wh)}ql=1===Zk.positionedLines.length;if(Fl+=kg(gg,Wj,Zk,vl,Cj,Xk,$i,Yk,jl,jk.vertical?nd.horizontal:nd.horizontalOnly,ql?Object.keys(jk.horizontal):[Il],vk,kl,xl,kk),ql)break}jk.vertical&&(Gl+=kg(gg,Wj,jk.vertical,vl,Cj,Xk,$i,Yk,jl,nd.vertical,["vertical"],vk,zl,xl,kk));jk=Wh?Wh.boxStartIndex:gg.collisionBoxArray.length;vl=Wh?Wh.boxEndIndex:gg.collisionBoxArray.length;Cj=$k?$k.boxStartIndex:gg.collisionBoxArray.length;el=$k?$k.boxEndIndex:gg.collisionBoxArray.length;fl=wk?wk.boxStartIndex:gg.collisionBoxArray.length;
hl=wk?wk.boxEndIndex:gg.collisionBoxArray.length;wl=il?il.boxStartIndex:gg.collisionBoxArray.length;Xk=il?il.boxEndIndex:gg.collisionBoxArray.length;Yk=function(tl,Jl){return tl&&tl.circleDiameter?Math.max(tl.circleDiameter,Jl):Jl};Wh=Yk(Wh,-1);Wh=Yk($k,Wh);Wh=Yk(wk,Wh);($k=-1<(Wh=Yk(il,Wh))?1:0)&&(Wh*=Tl/24);gg.glyphOffsetArray.length>=oe.MAX_GLYPHS&&z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");void 0!==$i.sortKey&&gg.addToSortKeyRanges(gg.symbolInstances.length,
$i.sortKey);gg.symbolInstances.emplaceBack(Wj.x,Wj.y,0<=vk.right?vk.right:-1,0<=vk.center?vk.center:-1,0<=vk.left?vk.left:-1,vk.vertical||-1,kl,zl,Hl,jk,vl,Cj,el,fl,hl,wl,Xk,ol,Fl,Gl,sl,ul,$k,0,yl,Al,Bl,Wh)}(Qe,nl,Sl,Kg,eh,Uk,tk,Qe.layers[0],Qe.collisionBoxArray,ag.index,ag.sourceLayerIndex,Qe.index,Ml,Ol,Ql,sk,Nl,Pl,Rl,Hi,ag,qj,Jk,Vk,Nf)};if("line"===Wk)for(Bh=0,Wk=Rf(ag.geometry,0,0,8192,8192);Bh<Wk.length;Bh+=1){dl=Wk[Bh];for(var Cl=0,Kl=ij(dl,Bj,Ah,Kg.vertical||xf,eh,24,th,Qe.overscaling,8192);Cl<
Kl.length;Cl+=1){var Ll=Kl[Cl];xf&&Si(Qe,xf.text,Kk,Ll)||fg(dl,Ll)}}else if("line-center"===Wk)for(Bj=0,Kk=ag.geometry;Bj<Kk.length;Bj+=1)Bh=Kk[Bj],1<Bh.length&&(Wk=Ri(Bh,Ah,Kg.vertical||xf,eh,24,th))&&fg(Bh,Wk);else if("Polygon"===ag.type)for(xf=0,th=pg(ag.geometry,0);xf<th.length;xf+=1)Ah=th[xf],Bj=Pg(Ah,16),fg(Ah[0],new vd(Bj.x,Bj.y,0));else if("LineString"===ag.type)for(xf=0,th=ag.geometry;xf<th.length;xf+=1)Ah=th[xf],fg(Ah,new vd(Ah[0].x,Ah[0].y,0));else if("Point"===ag.type)for(xf=0,th=ag.geometry;xf<
th.length;xf+=1)for(Ah=0,Bj=th[xf];Ah<Bj.length;Ah+=1)Kk=Bj[Ah],fg([Kk],new vd(Kk.x,Kk.y,0))}(A,Pc,Qd,ue,ka,Bb,Id,Td,we,de,Ua)};for(var Gc=0,Yc=A.features;Gc<Yc.length;Gc+=1)qb();Fa&&A.generateCollisionDebugBuffers()};a.perspective=function(A,M,W,ka,wa){var Fa;M=1/Math.tan(M/2);return A[0]=M/W,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=M,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,null!=wa&&wa!==1/0?(A[10]=(wa+ka)*(Fa=1/(ka-wa)),A[14]=2*wa*ka*Fa):(A[10]=-1,A[14]=-2*ka),A};a.pick=function(A,
M){for(var W={},ka=0;ka<M.length;ka++){var wa=M[ka];wa in A&&(W[wa]=A[wa])}return W};a.plugin=Lg;a.polygonIntersectsPolygon=sf;a.postMapLoadEvent=Db;a.postTurnstileEvent=hh;a.potpack=jf;a.refProperties="type source source-layer minzoom maxzoom filter layout".split(" ");a.register=cd;a.registerForPluginStateChange=function(A){return A({pluginStatus:Ag,pluginURL:uh}),fk.on("pluginStateChange",A),A};a.rotate=function(A,M,W){var ka=M[0],wa=M[1],Fa=M[2];M=M[3];var Ua=Math.sin(W);W=Math.cos(W);return A[0]=
ka*W+Fa*Ua,A[1]=wa*W+M*Ua,A[2]=ka*-Ua+Fa*W,A[3]=wa*-Ua+M*W,A};a.rotateX=function(A,M,W){var ka=Math.sin(W);W=Math.cos(W);var wa=M[4],Fa=M[5],Ua=M[6],bb=M[7],qb=M[8],Bb=M[9],Rb=M[10],$b=M[11];return M!==A&&(A[0]=M[0],A[1]=M[1],A[2]=M[2],A[3]=M[3],A[12]=M[12],A[13]=M[13],A[14]=M[14],A[15]=M[15]),A[4]=wa*W+qb*ka,A[5]=Fa*W+Bb*ka,A[6]=Ua*W+Rb*ka,A[7]=bb*W+$b*ka,A[8]=qb*W-wa*ka,A[9]=Bb*W-Fa*ka,A[10]=Rb*W-Ua*ka,A[11]=$b*W-bb*ka,A};a.rotateZ=function(A,M,W){var ka=Math.sin(W);W=Math.cos(W);var wa=M[0],Fa=
M[1],Ua=M[2],bb=M[3],qb=M[4],Bb=M[5],Rb=M[6],$b=M[7];return M!==A&&(A[8]=M[8],A[9]=M[9],A[10]=M[10],A[11]=M[11],A[12]=M[12],A[13]=M[13],A[14]=M[14],A[15]=M[15]),A[0]=wa*W+qb*ka,A[1]=Fa*W+Bb*ka,A[2]=Ua*W+Rb*ka,A[3]=bb*W+$b*ka,A[4]=qb*W-wa*ka,A[5]=Bb*W-Fa*ka,A[6]=Rb*W-Ua*ka,A[7]=$b*W-bb*ka,A};a.scale=function(A,M,W){var ka=W[0],wa=W[1];W=W[2];return A[0]=M[0]*ka,A[1]=M[1]*ka,A[2]=M[2]*ka,A[3]=M[3]*ka,A[4]=M[4]*wa,A[5]=M[5]*wa,A[6]=M[6]*wa,A[7]=M[7]*wa,A[8]=M[8]*W,A[9]=M[9]*W,A[10]=M[10]*W,A[11]=M[11]*
W,A[12]=M[12],A[13]=M[13],A[14]=M[14],A[15]=M[15],A};a.scale$1=function(A,M,W){return A[0]=M[0]*W,A[1]=M[1]*W,A[2]=M[2]*W,A[3]=M[3]*W,A};a.scale$2=function(A,M,W){return A[0]=M[0]*W,A[1]=M[1]*W,A[2]=M[2]*W,A};a.setCacheLimits=function(A,M){Y=A;ba=M};a.setRTLTextPlugin=function(A,M,W){if(void 0===W&&(W=!1),"deferred"===Ag||"loading"===Ag||"loaded"===Ag)throw Error("setRTLTextPlugin cannot be called multiple times.");uh=Ig.resolveURL(A);Ag="deferred";Ak=M;Kd();W||mk()};a.sphericalToCartesian=function(A){var M=
A[0],W=A[1];A=A[2];return W+=90,W*=Math.PI/180,A*=Math.PI/180,{x:M*Math.cos(W)*Math.sin(A),y:M*Math.sin(W)*Math.sin(A),z:M*Math.cos(A)}};a.sqrLen=function(A){var M=A[0];A=A[1];return M*M+A*A};a.styleSpec=bc;a.sub=function(A,M,W){return A[0]=M[0]-W[0],A[1]=M[1]-W[1],A[2]=M[2]-W[2],A};a.symbolSize=yd;a.transformMat3=function(A,M,W){var ka=M[0],wa=M[1];M=M[2];return A[0]=ka*W[0]+wa*W[3]+M*W[6],A[1]=ka*W[1]+wa*W[4]+M*W[7],A[2]=ka*W[2]+wa*W[5]+M*W[8],A};a.transformMat4=Ad;a.translate=function(A,M,W){var ka,
wa,Fa,Ua,bb,qb,Bb,Rb,$b,hc,rc,Kb,Pb=W[0],Gc=W[1];W=W[2];return M===A?(A[12]=M[0]*Pb+M[4]*Gc+M[8]*W+M[12],A[13]=M[1]*Pb+M[5]*Gc+M[9]*W+M[13],A[14]=M[2]*Pb+M[6]*Gc+M[10]*W+M[14],A[15]=M[3]*Pb+M[7]*Gc+M[11]*W+M[15]):(wa=M[1],Fa=M[2],Ua=M[3],bb=M[4],qb=M[5],Bb=M[6],Rb=M[7],$b=M[8],hc=M[9],rc=M[10],Kb=M[11],A[0]=ka=M[0],A[1]=wa,A[2]=Fa,A[3]=Ua,A[4]=bb,A[5]=qb,A[6]=Bb,A[7]=Rb,A[8]=$b,A[9]=hc,A[10]=rc,A[11]=Kb,A[12]=ka*Pb+bb*Gc+$b*W+M[12],A[13]=wa*Pb+qb*Gc+hc*W+M[13],A[14]=Fa*Pb+Bb*Gc+rc*W+M[14],A[15]=Ua*
Pb+Rb*Gc+Kb*W+M[15]),A};a.triggerPluginCompletionEvent=cj;a.uniqueId=function(){return ch++};a.validateCustomStyleLayer=function(A){var M=[],W=A.id;return void 0===W&&M.push({message:"layers."+W+': missing required property "id"'}),void 0===A.render&&M.push({message:"layers."+W+': missing required method "render"'}),A.renderingMode&&"2d"!==A.renderingMode&&"3d"!==A.renderingMode&&M.push({message:"layers."+W+': property "renderingMode" must be either "2d" or "3d"'}),M};a.validateLight=aj;a.validateStyle=
Bd;a.values=function(A){var M=[],W;for(W in A)M.push(A[W]);return M};a.vectorTile=ci;a.version="1.10.1";a.warnOnce=z;a.webpSupported=Qg;a.window=self;a.wrap=f});n(["./shared"],function(a){function d(ra){var Ea=typeof ra;if("number"===Ea||"boolean"===Ea||"string"===Ea||null==ra)return JSON.stringify(ra);if(Array.isArray(ra)){Ea="[";for(var Ia=0;Ia<ra.length;Ia+=1)Ea+=d(ra[Ia])+",";return Ea+"]"}Ea=Object.keys(ra).sort();Ia="{";for(var Va=0;Va<Ea.length;Va++)Ia+=JSON.stringify(Ea[Va])+":"+d(ra[Ea[Va]])+
",";return Ia+"}"}function e(ra,Ea,Ia){Ea=new a.EvaluationParameters(Ea);for(var Va=0;Va<ra.length;Va+=1)ra[Va].recalculate(Ea,Ia)}function l(ra,Ea){var Ia=a.getArrayBuffer(ra.request,function(Va,rb,ib,Na){Va?Ea(Va):rb&&Ea(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(rb)),rawData:rb,cacheControl:ib,expires:Na})});return function(){Ia.cancel();Ea()}}function k(ra,Ea){if(0!==ra.length){c(ra[0],Ea);for(var Ia=1;Ia<ra.length;Ia++)c(ra[Ia],!Ea)}}function c(ra,Ea){for(var Ia=0,Va=0,rb=ra.length,
ib=rb-1;Va<rb;ib=Va++)Ia+=(ra[Va][0]-ra[ib][0])*(ra[ib][1]+ra[Va][1]);0<=Ia!=!!Ea&&ra.reverse()}function f(ra,Ea){this.options=Ea||{};this.features=ra;this.length=ra.length}function g(ra,Ea){this.id="number"==typeof ra.id?ra.id:void 0;this.type=ra.type;this.rawGeometry=1===ra.type?[ra.geometry]:ra.geometry;this.properties=ra.tags;this.extent=Ea||4096}function q(ra){var Ea=new a.pbf,Ia;for(Ia in ra.layers)Ea.writeMessage(3,t,ra.layers[Ia]);return Ea.finish()}function t(ra,Ea){var Ia;Ea.writeVarintField(15,
ra.version||1);Ea.writeStringField(1,ra.name||"");Ea.writeVarintField(5,ra.extent||4096);var Va={keys:[],values:[],keycache:{},valuecache:{}};for(Ia=0;Ia<ra.length;Ia++)Va.feature=ra.feature(Ia),Ea.writeMessage(2,u,Va);ra=Va.keys;for(Ia=0;Ia<ra.length;Ia++)Ea.writeStringField(3,ra[Ia]);Va=Va.values;for(Ia=0;Ia<Va.length;Ia++)Ea.writeMessage(4,E,Va[Ia])}function u(ra,Ea){var Ia=ra.feature;void 0!==Ia.id&&Ea.writeVarintField(1,Ia.id);Ea.writeMessage(2,w,ra);Ea.writeVarintField(3,Ia.type);Ea.writeMessage(4,
x,Ia)}function w(ra,Ea){var Ia=ra.feature,Va=ra.keys,rb=ra.values,ib=ra.keycache;ra=ra.valuecache;for(var Na in Ia.properties){var Za=ib[Na];void 0===Za&&(Va.push(Na),ib[Na]=Za=Va.length-1);Ea.writeVarint(Za);Za=Ia.properties[Na];var eb=typeof Za;"string"!==eb&&"boolean"!==eb&&"number"!==eb&&(Za=JSON.stringify(Za));eb=eb+":"+Za;var Ba=ra[eb];void 0===Ba&&(rb.push(Za),ra[eb]=Ba=rb.length-1);Ea.writeVarint(Ba)}}function x(ra,Ea){var Ia=ra.loadGeometry();ra=ra.type;for(var Va=0,rb=0,ib=Ia.length,Na=
0;Na<ib;Na++){var Za=Ia[Na],eb=1;1===ra&&(eb=Za.length);Ea.writeVarint((eb<<3)+1);eb=3===ra?Za.length-1:Za.length;for(var Ba=0;Ba<eb;Ba++){1===Ba&&1!==ra&&Ea.writeVarint((eb-1<<3)+2);var Ma=Za[Ba].x-Va,$a=Za[Ba].y-rb;Ea.writeVarint(Ma<<1^Ma>>31);Ea.writeVarint($a<<1^$a>>31);Va+=Ma;rb+=$a}3===ra&&Ea.writeVarint(15)}}function E(ra,Ea){var Ia=typeof ra;"string"===Ia?Ea.writeStringField(1,ra):"boolean"===Ia?Ea.writeBooleanField(7,ra):"number"===Ia&&(0!=ra%1?Ea.writeDoubleField(3,ra):0>ra?Ea.writeSVarintField(6,
ra):Ea.writeVarintField(5,ra))}function F(ra,Ea,Ia,Va){z(ra,Ia,Va);z(Ea,2*Ia,2*Va);z(Ea,2*Ia+1,2*Va+1)}function z(ra,Ea,Ia){var Va=ra[Ea];ra[Ea]=ra[Ia];ra[Ia]=Va}function B(ra){return{type:"Feature",id:ra.id,properties:C(ra),geometry:{type:"Point",coordinates:[(Va=ra.x,360*(Va-.5)),(Ea=ra.y,Ia=(180-360*Ea)*Math.PI/180,360*Math.atan(Math.exp(Ia))/Math.PI-90)]}};var Ea,Ia,Va}function C(ra){var Ea=ra.numPoints,Ia=1E4<=Ea?Math.round(Ea/1E3)+"k":1E3<=Ea?Math.round(Ea/100)/10+"k":Ea;return G(G({},ra.properties),
{cluster:!0,cluster_id:ra.id,point_count:Ea,point_count_abbreviated:Ia})}function v(ra){ra=Math.sin(ra*Math.PI/180);ra=.5-.25*Math.log((1+ra)/(1-ra))/Math.PI;return 0>ra?0:1<ra?1:ra}function G(ra,Ea){for(var Ia in Ea)ra[Ia]=Ea[Ia];return ra}function I(ra){return ra.x}function J(ra){return ra.y}function K(ra,Ea,Ia,Va){ra={id:void 0===ra?null:ra,type:Ea,geometry:Ia,tags:Va,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};Ea=ra.geometry;Ia=ra.type;if("Point"===Ia||"MultiPoint"===Ia||"LineString"===Ia)N(ra,Ea);
else if("Polygon"===Ia||"MultiLineString"===Ia)for(Ia=0;Ia<Ea.length;Ia++)N(ra,Ea[Ia]);else if("MultiPolygon"===Ia)for(Ia=0;Ia<Ea.length;Ia++)for(Va=0;Va<Ea[Ia].length;Va++)N(ra,Ea[Ia][Va]);return ra}function N(ra,Ea){for(var Ia=0;Ia<Ea.length;Ia+=3)ra.minX=Math.min(ra.minX,Ea[Ia]),ra.minY=Math.min(ra.minY,Ea[Ia+1]),ra.maxX=Math.max(ra.maxX,Ea[Ia]),ra.maxY=Math.max(ra.maxY,Ea[Ia+1])}function H(ra,Ea,Ia,Va){if(Ea.geometry){var rb=Ea.geometry.coordinates,ib=Ea.geometry.type,Na=Math.pow(Ia.tolerance/
((1<<Ia.maxZoom)*Ia.extent),2),Za=[],eb=Ea.id;if(Ia.promoteId?eb=Ea.properties[Ia.promoteId]:Ia.generateId&&(eb=Va||0),"Point"===ib)L(rb,Za);else if("MultiPoint"===ib)for(var Ba=0;Ba<rb.length;Ba++)L(rb[Ba],Za);else if("LineString"===ib)P(rb,Za,Na,!1);else if("MultiLineString"===ib){if(Ia.lineMetrics){for(Ba=0;Ba<rb.length;Ba++)P(rb[Ba],Za=[],Na,!1),ra.push(K(eb,"LineString",Za,Ea.properties));return}Q(rb,Za,Na,!1)}else if("Polygon"===ib)Q(rb,Za,Na,!0);else{if("MultiPolygon"!==ib){if("GeometryCollection"===
ib){for(Ba=0;Ba<Ea.geometry.geometries.length;Ba++)H(ra,{id:eb,geometry:Ea.geometry.geometries[Ba],properties:Ea.properties},Ia,Va);return}throw Error("Input data is not a valid GeoJSON object.");}for(Ba=0;Ba<rb.length;Ba++)Ia=[],Q(rb[Ba],Ia,Na,!0),Za.push(Ia)}ra.push(K(eb,ib,Za,Ea.properties))}}function L(ra,Ea){Ea.push(ra[0]/360+.5);Ea.push(S(ra[1]));Ea.push(0)}function P(ra,Ea,Ia,Va){for(var rb,ib,Na=0,Za=0;Za<ra.length;Za++){var eb=ra[Za][0]/360+.5,Ba=S(ra[Za][1]);Ea.push(eb);Ea.push(Ba);Ea.push(0);
0<Za&&(Na+=Va?(rb*Ba-eb*ib)/2:Math.sqrt(Math.pow(eb-rb,2)+Math.pow(Ba-ib,2)));rb=eb;ib=Ba}ra=Ea.length-3;Ea[2]=1;(function Xa($a,lb,Ra,jb){for(var pb,vb=jb,zb=Ra-lb>>1,Jb=Ra-lb,Zb=$a[lb],pc=$a[lb+1],Ac=$a[Ra],ed=$a[Ra+1],Rc=lb+3;Rc<Ra;Rc+=3){var id=$a[Rc];var Tc=$a[Rc+1],wd=Zb,Fb=pc,ac=Ac-wd,Jc=ed-Fb;if(0!==ac||0!==Jc){var qc=((id-wd)*ac+(Tc-Fb)*Jc)/(ac*ac+Jc*Jc);1<qc?(wd=Ac,Fb=ed):0<qc&&(wd+=ac*qc,Fb+=Jc*qc)}id=(ac=id-wd)*ac+(Jc=Tc-Fb)*Jc;id>vb?(pb=Rc,vb=id):id===vb&&(ac=Math.abs(Rc-zb),ac<Jb&&(pb=
Rc,Jb=ac))}vb>jb&&(3<pb-lb&&Xa($a,lb,pb,jb),$a[pb+2]=vb,3<Ra-pb&&Xa($a,pb,Ra,jb))})(Ea,0,ra,Ia);Ea[ra+2]=1;Ea.size=Math.abs(Na);Ea.start=0;Ea.end=Ea.size}function Q(ra,Ea,Ia,Va){for(var rb=0;rb<ra.length;rb++){var ib=[];P(ra[rb],ib,Ia,Va);Ea.push(ib)}}function S(ra){ra=Math.sin(ra*Math.PI/180);ra=.5-.25*Math.log((1+ra)/(1-ra))/Math.PI;return 0>ra?0:1<ra?1:ra}function O(ra,Ea,Ia,Va,rb,ib,Na,Za){if(Va/=Ea,ib>=(Ia/=Ea)&&Na<Va)return ra;if(Na<Ia||ib>=Va)return null;Ea=[];for(ib=0;ib<ra.length;ib++){Na=
ra[ib];var eb=Na.geometry,Ba=Na.type,Ma=0===rb?Na.minX:Na.minY,$a=0===rb?Na.maxX:Na.maxY;if(Ma>=Ia&&$a<Va)Ea.push(Na);else if(!($a<Ia||Ma>=Va)){Ma=[];if("Point"===Ba||"MultiPoint"===Ba){$a=Ma;for(var lb=Ia,Ra=Va,jb=rb,Xa=0;Xa<eb.length;Xa+=3){var pb=eb[Xa+jb];pb>=lb&&pb<=Ra&&($a.push(eb[Xa]),$a.push(eb[Xa+1]),$a.push(eb[Xa+2]))}}else if("LineString"===Ba)U(eb,Ma,Ia,Va,rb,!1,Za.lineMetrics);else if("MultiLineString"===Ba)da(eb,Ma,Ia,Va,rb,!1);else if("Polygon"===Ba)da(eb,Ma,Ia,Va,rb,!0);else if("MultiPolygon"===
Ba)for($a=0;$a<eb.length;$a++)lb=[],da(eb[$a],lb,Ia,Va,rb,!0),lb.length&&Ma.push(lb);if(Ma.length)if(Za.lineMetrics&&"LineString"===Ba)for($a=0;$a<Ma.length;$a++)Ea.push(K(Na.id,Ba,Ma[$a],Na.tags));else"LineString"!==Ba&&"MultiLineString"!==Ba||(1===Ma.length?(Ba="LineString",Ma=Ma[0]):Ba="MultiLineString"),"Point"!==Ba&&"MultiPoint"!==Ba||(Ba=3===Ma.length?"Point":"MultiPoint"),Ea.push(K(Na.id,Ba,Ma,Na.tags))}}return Ea.length?Ea:null}function U(ra,Ea,Ia,Va,rb,ib,Na){for(var Za,eb,Ba=X(ra),Ma=0===
rb?ea:ca,$a=ra.start,lb=0;lb<ra.length-3;lb+=3){var Ra=ra[lb],jb=ra[lb+1],Xa=ra[lb+2],pb=ra[lb+3],vb=ra[lb+4],zb=0===rb?Ra:jb,Jb=0===rb?pb:vb,Zb=!1;Na&&(Za=Math.sqrt(Math.pow(Ra-pb,2)+Math.pow(jb-vb,2)));if(zb<Ia)Jb>Ia&&(eb=Ma(Ba,Ra,jb,pb,vb,Ia),Na&&(Ba.start=$a+Za*eb));else if(zb>Va)Jb<Va&&(eb=Ma(Ba,Ra,jb,pb,vb,Va),Na&&(Ba.start=$a+Za*eb));else{var pc=Ba,Ac=jb;pc.push(Ra);pc.push(Ac);pc.push(Xa)}Jb<Ia&&zb>=Ia&&(eb=Ma(Ba,Ra,jb,pb,vb,Ia),Zb=!0);Jb>Va&&zb<=Va&&(eb=Ma(Ba,Ra,jb,pb,vb,Va),Zb=!0);!ib&&
Zb&&(Na&&(Ba.end=$a+Za*eb),Ea.push(Ba),Ba=X(ra));Na&&($a+=Za)}Xa=ra.length-3;Ra=ra[Xa];jb=ra[Xa+1];Xa=ra[Xa+2];(zb=0===rb?Ra:jb)>=Ia&&zb<=Va&&(ra=Ba,Ia=Xa,ra.push(Ra),ra.push(jb),ra.push(Ia));Xa=Ba.length-3;ib&&3<=Xa&&(Ba[Xa]!==Ba[0]||Ba[Xa+1]!==Ba[1])&&(ib=Ba,Ra=Ba[1],jb=Ba[2],ib.push(Ba[0]),ib.push(Ra),ib.push(jb));Ba.length&&Ea.push(Ba)}function X(ra){var Ea=[];return Ea.size=ra.size,Ea.start=ra.start,Ea.end=ra.end,Ea}function da(ra,Ea,Ia,Va,rb,ib){for(var Na=0;Na<ra.length;Na++)U(ra[Na],Ea,Ia,
Va,rb,ib,!1)}function ea(ra,Ea,Ia,Va,rb,ib){Ea=(ib-Ea)/(Va-Ea);return ra.push(ib),ra.push(Ia+(rb-Ia)*Ea),ra.push(1),Ea}function ca(ra,Ea,Ia,Va,rb,ib){Ia=(ib-Ia)/(rb-Ia);return ra.push(Ea+(Va-Ea)*Ia),ra.push(ib),ra.push(1),Ia}function ia(ra,Ea){for(var Ia=[],Va=0;Va<ra.length;Va++){var rb=ra[Va],ib=rb.type;if("Point"===ib||"MultiPoint"===ib||"LineString"===ib)var Na=ha(rb.geometry,Ea);else if("MultiLineString"===ib||"Polygon"===ib){Na=[];for(var Za=0;Za<rb.geometry.length;Za++)Na.push(ha(rb.geometry[Za],
Ea))}else if("MultiPolygon"===ib)for(Na=[],Za=0;Za<rb.geometry.length;Za++){for(var eb=[],Ba=0;Ba<rb.geometry[Za].length;Ba++)eb.push(ha(rb.geometry[Za][Ba],Ea));Na.push(eb)}Ia.push(K(rb.id,ib,Na,rb.tags))}return Ia}function ha(ra,Ea){var Ia=[];Ia.size=ra.size;void 0!==ra.start&&(Ia.start=ra.start,Ia.end=ra.end);for(var Va=0;Va<ra.length;Va+=3)Ia.push(ra[Va]+Ea,ra[Va+1],ra[Va+2]);return Ia}function fa(ra,Ea){if(ra.transformed)return ra;var Ia,Va,rb=1<<ra.z,ib=ra.x,Na=ra.y;for(Ia=0;Ia<ra.features.length;Ia++){var Za=
ra.features[Ia],eb=Za.geometry;var Ba=Za.type;if(Za.geometry=[],1===Ba)for(Ba=0;Ba<eb.length;Ba+=2)Za.geometry.push([Math.round(Ea*(eb[Ba]*rb-ib)),Math.round(Ea*(eb[Ba+1]*rb-Na))]);else for(Ba=0;Ba<eb.length;Ba++){var Ma=[];for(Va=0;Va<eb[Ba].length;Va+=2)Ma.push([Math.round(Ea*(eb[Ba][Va]*rb-ib)),Math.round(Ea*(eb[Ba][Va+1]*rb-Na))]);Za.geometry.push(Ma)}}return ra.transformed=!0,ra}function na(ra,Ea,Ia,Va,rb,ib){var Na=Va*Va;if(0<Va&&Ea.size<(rb?Na:Va))Ia.numPoints+=Ea.length/3;else{for(var Za=
[],eb=0;eb<Ea.length;eb+=3)(0===Va||Ea[eb+2]>Na)&&(Ia.numSimplified++,Za.push(Ea[eb]),Za.push(Ea[eb+1])),Ia.numPoints++;if(rb){Ea=Va=0;Ia=Za.length;for(rb=Ia-2;Ea<Ia;rb=Ea,Ea+=2)Va+=(Za[Ea]-Za[rb])*(Za[Ea+1]+Za[rb+1]);if(0<Va===ib)for(Ea=0,Ia=Za.length;Ea<Ia/2;Ea+=2)ib=Za[Ea],Va=Za[Ea+1],Za[Ea]=Za[Ia-2-Ea],Za[Ea+1]=Za[Ia-1-Ea],Za[Ia-2-Ea]=ib,Za[Ia-1-Ea]=Va}ra.push(Za)}}function sa(ra,Ea){var Ia=(Ea=this.options=function(Va,rb){for(var ib in rb)Va[ib]=rb[ib];return Va}(Object.create(this.options),
Ea)).debug;if(Ia&&console.time("preprocess data"),0>Ea.maxZoom||24<Ea.maxZoom)throw Error("maxZoom should be in the 0-24 range");if(Ea.promoteId&&Ea.generateId)throw Error("promoteId and generateId cannot be used together.");ra=function(Va,rb){var ib=[];if("FeatureCollection"===Va.type)for(var Na=0;Na<Va.features.length;Na++)H(ib,Va.features[Na],rb,Na);else H(ib,"Feature"===Va.type?Va:{geometry:Va},rb);return ib}(ra,Ea);this.tiles={};this.tileCoords=[];Ia&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",
Ea.indexMaxZoom,Ea.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);(ra=function(Va,rb){var ib=rb.buffer/rb.extent,Na=Va,Za=O(Va,1,-1-ib,ib,0,-1,2,rb),eb=O(Va,1,1-ib,2+ib,0,-1,2,rb);return(Za||eb)&&(Na=O(Va,1,-ib,1+ib,0,-1,2,rb)||[],Za&&(Na=ia(Za,1).concat(Na)),eb&&(Na=Na.concat(ia(eb,-1)))),Na}(ra,Ea)).length&&this.splitTile(ra,0,0,0);Ia&&(ra.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),
console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ua(ra,Ea){ra=ra.tileID.canonical;if(!this._geoJSONIndex)return Ea(null,null);ra=this._geoJSONIndex.getTile(ra.z,ra.x,ra.y);if(!ra)return Ea(null,null);ra=new Ka(ra.features);var Ia=kb(ra);0===Ia.byteOffset&&Ia.byteLength===Ia.buffer.byteLength||(Ia=new Uint8Array(Ia));Ea(null,{vectorTile:ra,rawData:Ia.buffer})}var ta=function(ra){this.keyCache={};ra&&this.replace(ra)};ta.prototype.replace=function(ra){this._layerConfigs=
{};this._layers={};this.update(ra,[])};ta.prototype.update=function(ra,Ea){for(var Ia=this,Va=0;Va<ra.length;Va+=1){var rb=ra[Va];this._layerConfigs[rb.id]=rb;var ib=this._layers[rb.id]=a.createStyleLayer(rb);ib._featureFilter=a.featureFilter(ib.filter);this.keyCache[rb.id]&&delete this.keyCache[rb.id]}for(ra=0;ra<Ea.length;ra+=1)Va=Ea[ra],delete this.keyCache[Va],delete this._layerConfigs[Va],delete this._layers[Va];this.familiesBySource={};Ea=0;for(ra=function(Za,eb){for(var Ba={},Ma=0;Ma<Za.length;Ma++){var $a;
if(!($a=eb&&eb[Za[Ma].id])){$a=Za[Ma];for(var lb="",Ra=0,jb=a.refProperties;Ra<jb.length;Ra+=1)lb+="/"+d($a[jb[Ra]]);$a=lb}eb&&(eb[Za[Ma].id]=$a);(lb=Ba[$a])||(lb=Ba[$a]=[]);lb.push(Za[Ma])}Za=[];for(var Xa in Ba)Za.push(Ba[Xa]);return Za}(a.values(this._layerConfigs),this.keyCache);Ea<ra.length;Ea+=1)if(Va=ra[Ea].map(function(Za){return Ia._layers[Za.id]}),ib=Va[0],"none"!==ib.visibility){var Na=ib.source||"";(rb=this.familiesBySource[Na])||(rb=this.familiesBySource[Na]={});ib=ib.sourceLayer||"_geojsonTileLayer";
(Na=rb[ib])||(Na=rb[ib]=[]);Na.push(Va)}};var oa=function(ra){var Ea={},Ia=[];for(Ba in ra){var Va=ra[Ba],rb=Ea[Ba]={},ib;for(ib in Va){var Na=Va[+ib];if(Na&&0!==Na.bitmap.width&&0!==Na.bitmap.height){var Za={x:0,y:0,w:Na.bitmap.width+2,h:Na.bitmap.height+2};Ia.push(Za);rb[ib]={rect:Za,metrics:Na.metrics}}}}Ia=a.potpack(Ia);Ia=new a.AlphaImage({width:Ia.w||1,height:Ia.h||1});for(var eb in ra){var Ba=ra[eb];for(var Ma in Ba)(Va=Ba[+Ma])&&0!==Va.bitmap.width&&0!==Va.bitmap.height&&(rb=Ea[eb][Ma].rect,
a.AlphaImage.copy(Va.bitmap,Ia,{x:0,y:0},{x:rb.x+1,y:rb.y+1},Va.bitmap))}this.image=Ia;this.positions=Ea};a.register("GlyphAtlas",oa);var va=function(ra){this.tileID=new a.OverscaledTileID(ra.tileID.overscaledZ,ra.tileID.wrap,ra.tileID.canonical.z,ra.tileID.canonical.x,ra.tileID.canonical.y);this.uid=ra.uid;this.zoom=ra.zoom;this.pixelRatio=ra.pixelRatio;this.tileSize=ra.tileSize;this.source=ra.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=ra.showCollisionBoxes;this.collectResourceTiming=
!!ra.collectResourceTiming;this.returnDependencies=!!ra.returnDependencies;this.promoteId=ra.promoteId};va.prototype.parse=function(ra,Ea,Ia,Va,rb){function ib(){if(Ba)return rb(Ba);if(Ma&&$a&&lb){var Ac=new oa(Ma),ed=new a.ImageAtlas($a,lb),Rc;for(Rc in Ra){var id=Ra[Rc];id instanceof a.SymbolBucket?(e(id.layers,this.zoom,Ia),a.performSymbolLayout(id,Ma,Ac.positions,$a,ed.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):id.hasPattern&&(id instanceof a.LineBucket||id instanceof a.FillBucket||
id instanceof a.FillExtrusionBucket)&&(e(id.layers,this.zoom,Ia),id.addFeatures(jb,this.tileID.canonical,ed.patternPositions))}this.status="done";rb(null,{buckets:a.values(Ra).filter(function(Tc){return!Tc.isEmpty()}),featureIndex:eb,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ac.image,imageAtlas:ed,glyphMap:this.returnDependencies?Ma:null,iconMap:this.returnDependencies?$a:null,glyphPositions:this.returnDependencies?Ac.positions:null})}}var Na=this;this.status="parsing";this.data=ra;
this.collisionBoxArray=new a.CollisionBoxArray;var Za=new a.DictionaryCoder(Object.keys(ra.layers).sort()),eb=new a.FeatureIndex(this.tileID,this.promoteId);eb.bucketLayerIDs=[];var Ba,Ma,$a,lb,Ra={},jb={featureIndex:eb,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ia};Ea=Ea.familiesBySource[this.source];for(var Xa in Ea){var pb=ra.layers[Xa];if(pb){1===pb.version&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+Xa+'" does not use vector tile spec v2 and therefore may have some rendering errors.');
for(var vb=Za.encode(Xa),zb=[],Jb=0;Jb<pb.length;Jb++){var Zb=pb.feature(Jb),pc=eb.getId(Zb,Xa);zb.push({feature:Zb,id:pc,index:Jb,sourceLayerIndex:vb})}pb=0;for(Jb=Ea[Xa];pb<Jb.length;pb+=1)Zb=Jb[pb],pc=Zb[0],pc.minzoom&&this.zoom<Math.floor(pc.minzoom)||pc.maxzoom&&this.zoom>=pc.maxzoom||"none"!==pc.visibility&&(e(Zb,this.zoom,Ia),(Ra[pc.id]=pc.createBucket({index:eb.bucketLayerIDs.length,layers:Zb,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,
sourceLayerIndex:vb,sourceID:this.source})).populate(zb,jb,this.tileID.canonical),eb.bucketLayerIDs.push(Zb.map(function(Ac){return Ac.id})))}}ra=a.mapObject(jb.glyphDependencies,function(Ac){return Object.keys(Ac).map(Number)});Object.keys(ra).length?Va.send("getGlyphs",{uid:this.uid,stacks:ra},function(Ac,ed){Ba||(Ba=Ac,Ma=ed,ib.call(Na))}):Ma={};ra=Object.keys(jb.iconDependencies);ra.length?Va.send("getImages",{icons:ra,source:this.source,tileID:this.tileID,type:"icons"},function(Ac,ed){Ba||(Ba=
Ac,$a=ed,ib.call(Na))}):$a={};ra=Object.keys(jb.patternDependencies);ra.length?Va.send("getImages",{icons:ra,source:this.source,tileID:this.tileID,type:"patterns"},function(Ac,ed){Ba||(Ba=Ac,lb=ed,ib.call(Na))}):lb={};ib.call(this)};var ma=function(ra,Ea,Ia,Va){this.actor=ra;this.layerIndex=Ea;this.availableImages=Ia;this.loadVectorData=Va||l;this.loading={};this.loaded={}};ma.prototype.loadTile=function(ra,Ea){var Ia=this,Va=ra.uid;this.loading||(this.loading={});var rb=!!(ra&&ra.request&&ra.request.collectResourceTiming)&&
new a.RequestPerformance(ra.request),ib=this.loading[Va]=new va(ra);ib.abort=this.loadVectorData(ra,function(Na,Za){if(delete Ia.loading[Va],Na||!Za)return ib.status="done",Ia.loaded[Va]=ib,Ea(Na);var eb=Za.rawData,Ba={};Za.expires&&(Ba.expires=Za.expires);Za.cacheControl&&(Ba.cacheControl=Za.cacheControl);var Ma={};rb&&(Na=rb.finish())&&(Ma.resourceTiming=JSON.parse(JSON.stringify(Na)));ib.vectorTile=Za.vectorTile;ib.parse(Za.vectorTile,Ia.layerIndex,Ia.availableImages,Ia.actor,function($a,lb){if($a||
!lb)return Ea($a);Ea(null,a.extend({rawTileData:eb.slice(0)},lb,Ba,Ma))});Ia.loaded=Ia.loaded||{};Ia.loaded[Va]=ib})};ma.prototype.reloadTile=function(ra,Ea){var Ia=this,Va=this.loaded,rb=ra.uid,ib=this;if(Va&&Va[rb]){var Na=Va[rb];Na.showCollisionBoxes=ra.showCollisionBoxes;ra=function(Za,eb){var Ba=Na.reloadCallback;Ba&&(delete Na.reloadCallback,Na.parse(Na.vectorTile,ib.layerIndex,Ia.availableImages,ib.actor,Ba));Ea(Za,eb)};"parsing"===Na.status?Na.reloadCallback=ra:"done"===Na.status&&(Na.vectorTile?
Na.parse(Na.vectorTile,this.layerIndex,this.availableImages,this.actor,ra):ra())}};ma.prototype.abortTile=function(ra,Ea){var Ia=this.loading;ra=ra.uid;Ia&&Ia[ra]&&Ia[ra].abort&&(Ia[ra].abort(),delete Ia[ra]);Ea()};ma.prototype.removeTile=function(ra,Ea){var Ia=this.loaded;ra=ra.uid;Ia&&Ia[ra]&&delete Ia[ra];Ea()};var pa=a.window.ImageBitmap,za=function(){this.loaded={}};za.prototype.loadTile=function(ra,Ea){var Ia=ra.uid,Va=ra.encoding;ra=ra.rawImageData;ra=pa&&ra instanceof pa?this.getImageData(ra):
ra;Va=new a.DEMData(Ia,ra,Va);this.loaded=this.loaded||{};this.loaded[Ia]=Va;Ea(null,Va)};za.prototype.getImageData=function(ra){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ra.width,ra.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d"));this.offscreenCanvas.width=ra.width;this.offscreenCanvas.height=ra.height;this.offscreenCanvasContext.drawImage(ra,0,0,ra.width,ra.height);ra=this.offscreenCanvasContext.getImageData(-1,-1,ra.width+
2,ra.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:ra.width,height:ra.height},ra.data)};za.prototype.removeTile=function(ra){var Ea=this.loaded;ra=ra.uid;Ea&&Ea[ra]&&delete Ea[ra]};var qa=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,Ca=function(ra){this._feature=ra;this.extent=a.EXTENT;this.type=ra.type;this.properties=ra.tags;"id"in ra&&!isNaN(ra.id)&&(this.id=parseInt(ra.id,10))};Ca.prototype.loadGeometry=
function(){if(1===this._feature.type){for(var ra=[],Ea=0,Ia=this._feature.geometry;Ea<Ia.length;Ea+=1){var Va=Ia[Ea];ra.push([new a.Point$1(Va[0],Va[1])])}return ra}ra=[];Ea=0;for(Ia=this._feature.geometry;Ea<Ia.length;Ea+=1){Va=[];for(var rb=0,ib=Ia[Ea];rb<ib.length;rb+=1){var Na=ib[rb];Va.push(new a.Point$1(Na[0],Na[1]))}ra.push(Va)}return ra};Ca.prototype.toGeoJSON=function(ra,Ea,Ia){return qa.call(this,ra,Ea,Ia)};var Ka=function(ra){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";
this.extent=a.EXTENT;this.length=ra.length;this._features=ra};Ka.prototype.feature=function(ra){return new Ca(this._features[ra])};var Oa=a.vectorTile.VectorTileFeature;f.prototype.feature=function(ra){return new g(this.features[ra],this.options.extent)};g.prototype.loadGeometry=function(){var ra=this.rawGeometry;this.geometry=[];for(var Ea=0;Ea<ra.length;Ea++){for(var Ia=ra[Ea],Va=[],rb=0;rb<Ia.length;rb++)Va.push(new a.Point$1(Ia[rb][0],Ia[rb][1]));this.geometry.push(Va)}return this.geometry};g.prototype.bbox=
function(){this.geometry||this.loadGeometry();for(var ra=this.geometry,Ea=1/0,Ia=-1/0,Va=1/0,rb=-1/0,ib=0;ib<ra.length;ib++)for(var Na=ra[ib],Za=0;Za<Na.length;Za++){var eb=Na[Za];Ea=Math.min(Ea,eb.x);Ia=Math.max(Ia,eb.x);Va=Math.min(Va,eb.y);rb=Math.max(rb,eb.y)}return[Ea,Va,Ia,rb]};g.prototype.toGeoJSON=Oa.prototype.toGeoJSON;var kb=q;kb.fromVectorTileJs=q;kb.fromGeojsonVt=function(ra,Ea){Ea=Ea||{};var Ia={},Va;for(Va in ra)Ia[Va]=new f(ra[Va].features,Ea),Ia[Va].name=Va,Ia[Va].version=Ea.version,
Ia[Va].extent=Ea.extent;return q({layers:Ia})};kb.GeoJSONWrapper=f;var mb=function(ra){return ra[0]},tb=function(ra){return ra[1]},nb=function(ra,Ea,Ia,Va,rb){void 0===Ea&&(Ea=mb);void 0===Ia&&(Ia=tb);void 0===Va&&(Va=64);void 0===rb&&(rb=Float64Array);this.nodeSize=Va;this.points=ra;var ib=this.ids=new (65536>ra.length?Uint16Array:Uint32Array)(ra.length);rb=this.coords=new rb(2*ra.length);for(var Na=0;Na<ra.length;Na++)ib[Na]=Na,rb[2*Na]=Ea(ra[Na]),rb[2*Na+1]=Ia(ra[Na]);!function jb(eb,Ba,Ma,$a,
lb,Ra){if(!(lb-$a<=Ma)){var Xa=$a+lb>>1;!function ed(vb,zb,Jb,Zb,pc,Ac){for(;pc>Zb;){if(600<pc-Zb){var Rc=pc-Zb+1,id=Jb-Zb+1,Tc=Math.log(Rc),wd=.5*Math.exp(2*Tc/3);Tc=.5*Math.sqrt(Tc*wd*(Rc-wd)/Rc)*(0>id-Rc/2?-1:1);ed(vb,zb,Jb,Math.max(Zb,Math.floor(Jb-id*wd/Rc+Tc)),Math.min(pc,Math.floor(Jb+(Rc-id)*wd/Rc+Tc)),Ac)}Rc=zb[2*Jb+Ac];id=Zb;wd=pc;F(vb,zb,Zb,Jb);for(zb[2*pc+Ac]>Rc&&F(vb,zb,Zb,pc);id<wd;){F(vb,zb,id,wd);id++;for(wd--;zb[2*id+Ac]<Rc;)id++;for(;zb[2*wd+Ac]>Rc;)wd--}zb[2*Zb+Ac]===Rc?F(vb,zb,
Zb,wd):F(vb,zb,++wd,pc);wd<=Jb&&(Zb=wd+1);Jb<=wd&&(pc=wd-1)}}(eb,Ba,Xa,$a,lb,Ra%2);jb(eb,Ba,Ma,$a,Xa-1,Ra+1);jb(eb,Ba,Ma,Xa+1,lb,Ra+1)}}(ib,rb,Va,0,ib.length-1,0)};nb.prototype.range=function(ra,Ea,Ia,Va){for(var rb=this.ids,ib=this.coords,Na=this.nodeSize,Za,eb,Ba=[0,rb.length-1,0],Ma=[];Ba.length;){var $a=Ba.pop(),lb=Ba.pop(),Ra=Ba.pop();if(lb-Ra<=Na)for($a=Ra;$a<=lb;$a++)eb=ib[2*$a+1],(Za=ib[2*$a])>=ra&&Za<=Ia&&eb>=Ea&&eb<=Va&&Ma.push(rb[$a]);else{var jb=Math.floor((Ra+lb)/2);eb=ib[2*jb+1];(Za=
ib[2*jb])>=ra&&Za<=Ia&&eb>=Ea&&eb<=Va&&Ma.push(rb[jb]);var Xa=($a+1)%2;(0===$a?ra<=Za:Ea<=eb)&&(Ba.push(Ra),Ba.push(jb-1),Ba.push(Xa));(0===$a?Ia>=Za:Va>=eb)&&(Ba.push(jb+1),Ba.push(lb),Ba.push(Xa))}}return Ma};nb.prototype.within=function(ra,Ea,Ia){for(var Va=this.ids,rb=this.coords,ib=this.nodeSize,Na=[0,Va.length-1,0],Za=[],eb=Ia*Ia;Na.length;){var Ba=Na.pop(),Ma=Na.pop(),$a=Na.pop();if(Ma-$a<=ib)for(Ba=$a;Ba<=Ma;Ba++){$a=rb[2*Ba]-ra;var lb=rb[2*Ba+1]-Ea;$a*$a+lb*lb<=eb&&Za.push(Va[Ba])}else{lb=
Math.floor(($a+Ma)/2);var Ra=rb[2*lb],jb=rb[2*lb+1],Xa=Ra-ra,pb=jb-Ea;Xa*Xa+pb*pb<=eb&&Za.push(Va[lb]);Xa=(Ba+1)%2;(0===Ba?ra-Ia<=Ra:Ea-Ia<=jb)&&(Na.push($a),Na.push(lb-1),Na.push(Xa));(0===Ba?ra+Ia>=Ra:Ea+Ia>=jb)&&(Na.push(lb+1),Na.push(Ma),Na.push(Xa))}}return Za};var Ta={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ra){return ra}},fb=function(ra){this.options=G(Object.create(Ta),ra);this.trees=Array(this.options.maxZoom+1)};fb.prototype.load=
function(ra){var Ea=this.options,Ia=Ea.log,Va=Ea.minZoom,rb=Ea.maxZoom;Ea=Ea.nodeSize;Ia&&console.time("total time");var ib="prepare "+ra.length+" points";Ia&&console.time(ib);this.points=ra;for(var Na=[],Za=0;Za<ra.length;Za++)if(ra[Za].geometry){var eb=Na,Ba=eb.push;var Ma=Za;var $a=ra[Za].geometry.coordinates;Ma={x:$a[0]/360+.5,y:v($a[1]),zoom:1/0,index:Ma,parentId:-1};Ba.call(eb,Ma)}this.trees[rb+1]=new nb(Na,I,J,Ea,Float32Array);Ia&&console.timeEnd(ib);for(ra=rb;ra>=Va;ra--)rb=+Date.now(),Na=
this._cluster(Na,ra),this.trees[ra]=new nb(Na,I,J,Ea,Float32Array),Ia&&console.log("z%d: %d clusters in %dms",ra,Na.length,+Date.now()-rb);return Ia&&console.timeEnd("total time"),this};fb.prototype.getClusters=function(ra,Ea){var Ia=((ra[0]+180)%360+360)%360-180,Va=Math.max(-90,Math.min(90,ra[1])),rb=180===ra[2]?180:((ra[2]+180)%360+360)%360-180,ib=Math.max(-90,Math.min(90,ra[3]));if(360<=ra[2]-ra[0])Ia=-180,rb=180;else if(Ia>rb)return Ia=this.getClusters([Ia,Va,180,ib],Ea),Va=this.getClusters([-180,
Va,rb,ib],Ea),Ia.concat(Va);Ea=this.trees[this._limitZoom(Ea)];ra=[];var Na=0;for(Va=Ea.range(Ia/360+.5,v(ib),rb/360+.5,v(Va));Na<Va.length;Na+=1)rb=Ea.points[Va[Na]],ra.push(rb.numPoints?B(rb):this.points[rb.index]);return ra};fb.prototype.getChildren=function(ra){var Ea=this._getOriginId(ra),Ia=this._getOriginZoom(ra),Va=this.trees[Ia];if(!Va)throw Error("No cluster with the specified id.");var rb=Va.points[Ea];if(!rb)throw Error("No cluster with the specified id.");Ea=[];var ib=0;for(Ia=Va.within(rb.x,
rb.y,this.options.radius/(this.options.extent*Math.pow(2,Ia-1)));ib<Ia.length;ib+=1)rb=Va.points[Ia[ib]],rb.parentId===ra&&Ea.push(rb.numPoints?B(rb):this.points[rb.index]);if(0===Ea.length)throw Error("No cluster with the specified id.");return Ea};fb.prototype.getLeaves=function(ra,Ea,Ia){var Va=[];return this._appendLeaves(Va,ra,Ea||10,Ia||0,0),Va};fb.prototype.getTile=function(ra,Ea,Ia){var Va=this.trees[this._limitZoom(ra)];ra=Math.pow(2,ra);var rb=this.options;rb=rb.radius/rb.extent;var ib=
(Ia-rb)/ra,Na=(Ia+1+rb)/ra,Za={features:[]};return this._addTileFeatures(Va.range((Ea-rb)/ra,ib,(Ea+1+rb)/ra,Na),Va.points,Ea,Ia,ra,Za),0===Ea&&this._addTileFeatures(Va.range(1-rb/ra,ib,1,Na),Va.points,ra,Ia,ra,Za),Ea===ra-1&&this._addTileFeatures(Va.range(0,ib,rb/ra,Na),Va.points,-1,Ia,ra,Za),Za.features.length?Za:null};fb.prototype.getClusterExpansionZoom=function(ra){for(var Ea=this._getOriginZoom(ra)-1;Ea<=this.options.maxZoom;){ra=this.getChildren(ra);if(Ea++,1!==ra.length)break;ra=ra[0].properties.cluster_id}return Ea};
fb.prototype._appendLeaves=function(ra,Ea,Ia,Va,rb){var ib=0;for(Ea=this.getChildren(Ea);ib<Ea.length;ib+=1){var Na=Ea[ib],Za=Na.properties;if(Za&&Za.cluster?rb+Za.point_count<=Va?rb+=Za.point_count:rb=this._appendLeaves(ra,Za.cluster_id,Ia,Va,rb):rb<Va?rb++:ra.push(Na),ra.length===Ia)break}return rb};fb.prototype._addTileFeatures=function(ra,Ea,Ia,Va,rb,ib){for(var Na=0;Na<ra.length;Na+=1){var Za=Ea[ra[Na]],eb=Za.numPoints,Ba={type:1,geometry:[[Math.round(this.options.extent*(Za.x*rb-Ia)),Math.round(this.options.extent*
(Za.y*rb-Va))]],tags:eb?C(Za):this.points[Za.index].properties},Ma=void 0;eb?Ma=Za.id:this.options.generateId?Ma=Za.index:this.points[Za.index].id&&(Ma=this.points[Za.index].id);void 0!==Ma&&(Ba.id=Ma);ib.features.push(Ba)}};fb.prototype._limitZoom=function(ra){return Math.max(this.options.minZoom,Math.min(ra,this.options.maxZoom+1))};fb.prototype._cluster=function(ra,Ea){var Ia=[],Va=this.options,rb=Va.reduce;Va=Va.radius/(Va.extent*Math.pow(2,Ea));for(var ib=0;ib<ra.length;ib++){var Na=ra[ib];if(!(Na.zoom<=
Ea)){Na.zoom=Ea;for(var Za=this.trees[Ea+1],eb=Za.within(Na.x,Na.y,Va),Ba=Na.numPoints||1,Ma=Na.x*Ba,$a=Na.y*Ba,lb=rb&&1<Ba?this._map(Na,!0):null,Ra=(ib<<5)+(Ea+1)+this.points.length,jb=0;jb<eb.length;jb+=1){var Xa=Za.points[eb[jb]];if(!(Xa.zoom<=Ea)){Xa.zoom=Ea;var pb=Xa.numPoints||1;Ma+=Xa.x*pb;$a+=Xa.y*pb;Ba+=pb;Xa.parentId=Ra;rb&&(lb||(lb=this._map(Na,!0)),rb(lb,this._map(Xa)))}}1===Ba?Ia.push(Na):(Na.parentId=Ra,Ia.push({x:Ma/Ba,y:$a/Ba,zoom:1/0,id:Ra,parentId:-1,numPoints:Ba,properties:lb}))}}return Ia};
fb.prototype._getOriginId=function(ra){return ra-this.points.length>>5};fb.prototype._getOriginZoom=function(ra){return(ra-this.points.length)%32};fb.prototype._map=function(ra,Ea){if(ra.numPoints)return Ea?G({},ra.properties):ra.properties;ra=this.points[ra.index].properties;var Ia=this.options.map(ra);return Ea&&Ia===ra?G({},Ia):Ia};sa.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};sa.prototype.splitTile=
function(ra,Ea,Ia,Va,rb,ib,Na){for(var Za=[ra,Ea,Ia,Va],eb=this.options,Ba=eb.debug;Za.length;){Va=Za.pop();Ia=Za.pop();Ea=Za.pop();ra=Za.pop();var Ma=1<<Ea,$a=32*((1<<Ea)*Va+Ia)+Ea,lb=this.tiles[$a],Ra;if(Ra=!lb){1<Ba&&console.time("creation");lb=this.tiles;Ra=ra;for(var jb=eb,Xa=Ea===jb.maxZoom?0:jb.tolerance/((1<<Ea)*jb.extent),pb={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ia,y:Va,z:Ea,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},vb=0;vb<Ra.length;vb++){pb.numFeatures++;
var zb=void 0,Jb=pb,Zb=Ra[vb],pc=Xa,Ac=jb,ed=Zb.geometry,Rc=Zb.type,id=[];if("Point"===Rc||"MultiPoint"===Rc)for(var Tc=0;Tc<ed.length;Tc+=3)id.push(ed[Tc]),id.push(ed[Tc+1]),Jb.numPoints++,Jb.numSimplified++;else if("LineString"===Rc)na(id,ed,Jb,pc,!1,!1);else if("MultiLineString"===Rc||"Polygon"===Rc)for(Tc=0;Tc<ed.length;Tc++)na(id,ed[Tc],Jb,pc,"Polygon"===Rc,0===Tc);else if("MultiPolygon"===Rc)for(var wd=0;wd<ed.length;wd++){var Fb=ed[wd];for(Tc=0;Tc<Fb.length;Tc++)na(id,Fb[Tc],Jb,pc,!0,0===Tc)}if(id.length){pc=
Zb.tags||null;if("LineString"===Rc&&Ac.lineMetrics){for(zb in pc={},Zb.tags)pc[zb]=Zb.tags[zb];pc.mapbox_clip_start=ed.start/ed.size;pc.mapbox_clip_end=ed.end/ed.size}zb={geometry:id,type:"Polygon"===Rc||"MultiPolygon"===Rc?3:"LineString"===Rc||"MultiLineString"===Rc?2:1,tags:pc};null!==Zb.id&&(zb.id=Zb.id);Jb.features.push(zb)}Jb=Ra[vb].minX;Zb=Ra[vb].minY;zb=Ra[vb].maxX;Ac=Ra[vb].maxY;Jb<pb.minX&&(pb.minX=Jb);Zb<pb.minY&&(pb.minY=Zb);zb>pb.maxX&&(pb.maxX=zb);Ac>pb.maxY&&(pb.maxY=Ac)}Ra=(lb=lb[$a]=
pb,this.tileCoords.push({z:Ea,x:Ia,y:Va}),Ba)}Ra&&(1<Ba&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ea,Ia,Va,lb.numFeatures,lb.numPoints,lb.numSimplified),console.timeEnd("creation")),$a="z"+Ea,this.stats[$a]=(this.stats[$a]||0)+1,this.total++);if(lb.source=ra,rb){if(Ea===eb.maxZoom||Ea===rb)continue;$a=1<<rb-Ea;if(Ia!==Math.floor(ib/$a)||Va!==Math.floor(Na/$a))continue}else if(Ea===eb.indexMaxZoom||lb.numPoints<=eb.indexMaxPoints)continue;if(lb.source=null,0!==ra.length)1<
Ba&&console.time("clipping"),vb=.5*eb.buffer/eb.extent,Jb=.5-vb,Zb=.5+vb,zb=1+vb,$a=Ra=jb=Xa=null,pb=O(ra,Ma,Ia-vb,Ia+Zb,0,lb.minX,lb.maxX,eb),ra=O(ra,Ma,Ia+Jb,Ia+zb,0,lb.minX,lb.maxX,eb),pb&&($a=O(pb,Ma,Va-vb,Va+Zb,1,lb.minY,lb.maxY,eb),Ra=O(pb,Ma,Va+Jb,Va+zb,1,lb.minY,lb.maxY,eb)),ra&&(jb=O(ra,Ma,Va-vb,Va+Zb,1,lb.minY,lb.maxY,eb),Xa=O(ra,Ma,Va+Jb,Va+zb,1,lb.minY,lb.maxY,eb)),1<Ba&&console.timeEnd("clipping"),Za.push($a||[],Ea+1,2*Ia,2*Va),Za.push(Ra||[],Ea+1,2*Ia,2*Va+1),Za.push(jb||[],Ea+1,2*Ia+
1,2*Va),Za.push(Xa||[],Ea+1,2*Ia+1,2*Va+1)}};sa.prototype.getTile=function(ra,Ea,Ia){var Va=this.options,rb=Va.extent;Va=Va.debug;if(0>ra||24<ra)return null;var ib=1<<ra;ib=Ea=(Ea%ib+ib)%ib;ib=32*((1<<ra)*Ia+ib)+ra;if(this.tiles[ib])return fa(this.tiles[ib],rb);1<Va&&console.log("drilling down to z%d-%d-%d",ra,Ea,Ia);for(var Na,Za=ra,eb=Ea,Ba=Ia;!Na&&0<Za;)Za--,eb=Math.floor(eb/2),Ba=Math.floor(Ba/2),Na=this.tiles[32*((1<<Za)*Ba+eb)+Za];return Na&&Na.source?(1<Va&&console.log("found parent tile z%d-%d-%d",
Za,eb,Ba),1<Va&&console.time("drilling down"),this.splitTile(Na.source,Za,eb,Ba,ra,Ea,Ia),1<Va&&console.timeEnd("drilling down"),this.tiles[ib]?fa(this.tiles[ib],rb):null):null};var ab=function(ra){function Ea(Ia,Va,rb,ib){ra.call(this,Ia,Va,rb,ua);ib&&(this.loadGeoJSON=ib)}return ra&&(Ea.__proto__=ra),(Ea.prototype=Object.create(ra&&ra.prototype)).constructor=Ea,Ea.prototype.loadData=function(Ia,Va){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});this._pendingCallback=Va;this._pendingLoadDataParams=
Ia;this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ea.prototype._loadData=function(){var Ia=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Va=this._pendingCallback,rb=this._pendingLoadDataParams;delete this._pendingCallback;delete this._pendingLoadDataParams;var ib=!!(rb&&rb.request&&rb.request.collectResourceTiming)&&new a.RequestPerformance(rb.request);this.loadGeoJSON(rb,function(Na,Za){if(Na||!Za)return Va(Na);if("object"!=
typeof Za)return Va(Error("Input data given to '"+rb.source+"' is not a valid GeoJSON object."));!function $a(Ba,Ma){var lb=Ba&&Ba.type;if("FeatureCollection"===lb)for(lb=0;lb<Ba.features.length;lb++)$a(Ba.features[lb],Ma);else if("GeometryCollection"===lb)for(lb=0;lb<Ba.geometries.length;lb++)$a(Ba.geometries[lb],Ma);else if("Feature"===lb)$a(Ba.geometry,Ma);else if("Polygon"===lb)k(Ba.coordinates,Ma);else if("MultiPolygon"===lb)for(lb=0;lb<Ba.coordinates.length;lb++)k(Ba.coordinates[lb],Ma);return Ba}(Za,
!0);try{Ia._geoJSONIndex=rb.cluster?(new fb(function(Ba){var Ma=Ba.superclusterOptions;Ba=Ba.clusterProperties;if(!Ba||!Ma)return Ma;for(var $a={},lb={},Ra={accumulated:null,zoom:0},jb={properties:null},Xa=Object.keys(Ba),pb=0;pb<Xa.length;pb+=1){var vb=Xa[pb],zb=Ba[vb],Jb=zb[0];zb=a.createExpression(zb[1]);Jb=a.createExpression("string"==typeof Jb?[Jb,["accumulated"],["get",vb]]:Jb);$a[vb]=zb.value;lb[vb]=Jb.value}return Ma.map=function(Zb){jb.properties=Zb;Zb={};for(var pc=0;pc<Xa.length;pc+=1){var Ac=
Xa[pc];Zb[Ac]=$a[Ac].evaluate(Ra,jb)}return Zb},Ma.reduce=function(Zb,pc){jb.properties=pc;for(pc=0;pc<Xa.length;pc+=1){var Ac=Xa[pc];Ra.accumulated=Zb[Ac];Zb[Ac]=lb[Ac].evaluate(Ra,jb)}},Ma}(rb))).load(Za.features):new sa(Za,rb.geojsonVtOptions)}catch(Ba){return Va(Ba)}Ia.loaded={};Na={};ib&&(Za=ib.finish())&&(Na.resourceTiming={},Na.resourceTiming[rb.source]=JSON.parse(JSON.stringify(Za)));Va(null,Na)})}},Ea.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===
this._state&&(this._state="Coalescing",this._loadData())},Ea.prototype.reloadTile=function(Ia,Va){var rb=this.loaded;return rb&&rb[Ia.uid]?ra.prototype.reloadTile.call(this,Ia,Va):this.loadTile(Ia,Va)},Ea.prototype.loadGeoJSON=function(Ia,Va){if(Ia.request)a.getJSON(Ia.request,Va);else{if("string"!=typeof Ia.data)return Va(Error("Input data given to '"+Ia.source+"' is not a valid GeoJSON object."));try{return Va(null,JSON.parse(Ia.data))}catch(rb){return Va(Error("Input data given to '"+Ia.source+
"' is not a valid GeoJSON object."))}}},Ea.prototype.removeSource=function(Ia,Va){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});Va()},Ea.prototype.getClusterExpansionZoom=function(Ia,Va){try{Va(null,this._geoJSONIndex.getClusterExpansionZoom(Ia.clusterId))}catch(rb){Va(rb)}},Ea.prototype.getClusterChildren=function(Ia,Va){try{Va(null,this._geoJSONIndex.getChildren(Ia.clusterId))}catch(rb){Va(rb)}},Ea.prototype.getClusterLeaves=function(Ia,Va){try{Va(null,this._geoJSONIndex.getLeaves(Ia.clusterId,
Ia.limit,Ia.offset))}catch(rb){Va(rb)}},Ea}(ma);Oa=function(ra){var Ea=this;this.self=ra;this.actor=new a.Actor(ra,this);this.layerIndexes={};this.availableImages={};this.workerSourceTypes={vector:ma,geojson:ab};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=function(Ia,Va){if(Ea.workerSourceTypes[Ia])throw Error('Worker source with name "'+Ia+'" already registered.');Ea.workerSourceTypes[Ia]=Va};this.self.registerRTLTextPlugin=function(Ia){if(a.plugin.isParsed())throw Error("RTL text plugin already registered.");
a.plugin.applyArabicShaping=Ia.applyArabicShaping;a.plugin.processBidirectionalText=Ia.processBidirectionalText;a.plugin.processStyledBidirectionalText=Ia.processStyledBidirectionalText}};return Oa.prototype.setReferrer=function(ra,Ea){this.referrer=Ea},Oa.prototype.setImages=function(ra,Ea,Ia){for(var Va in this.availableImages[ra]=Ea,this.workerSources[ra]){var rb=this.workerSources[ra][Va],ib;for(ib in rb)rb[ib].availableImages=Ea}Ia()},Oa.prototype.setLayers=function(ra,Ea,Ia){this.getLayerIndex(ra).replace(Ea);
Ia()},Oa.prototype.updateLayers=function(ra,Ea,Ia){this.getLayerIndex(ra).update(Ea.layers,Ea.removedIds);Ia()},Oa.prototype.loadTile=function(ra,Ea,Ia){this.getWorkerSource(ra,Ea.type,Ea.source).loadTile(Ea,Ia)},Oa.prototype.loadDEMTile=function(ra,Ea,Ia){this.getDEMWorkerSource(ra,Ea.source).loadTile(Ea,Ia)},Oa.prototype.reloadTile=function(ra,Ea,Ia){this.getWorkerSource(ra,Ea.type,Ea.source).reloadTile(Ea,Ia)},Oa.prototype.abortTile=function(ra,Ea,Ia){this.getWorkerSource(ra,Ea.type,Ea.source).abortTile(Ea,
Ia)},Oa.prototype.removeTile=function(ra,Ea,Ia){this.getWorkerSource(ra,Ea.type,Ea.source).removeTile(Ea,Ia)},Oa.prototype.removeDEMTile=function(ra,Ea){this.getDEMWorkerSource(ra,Ea.source).removeTile(Ea)},Oa.prototype.removeSource=function(ra,Ea,Ia){if(this.workerSources[ra]&&this.workerSources[ra][Ea.type]&&this.workerSources[ra][Ea.type][Ea.source]){var Va=this.workerSources[ra][Ea.type][Ea.source];delete this.workerSources[ra][Ea.type][Ea.source];void 0!==Va.removeSource?Va.removeSource(Ea,Ia):
Ia()}},Oa.prototype.loadWorkerSource=function(ra,Ea,Ia){try{this.self.importScripts(Ea.url),Ia()}catch(Va){Ia(Va.toString())}},Oa.prototype.syncRTLPluginState=function(ra,Ea,Ia){try{a.plugin.setState(Ea);var Va=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&null!=Va){this.self.importScripts(Va);var rb=a.plugin.isParsed();Ia(rb?void 0:Error("RTL Text Plugin failed to import scripts from "+Va),rb)}}catch(ib){Ia(ib.toString())}},Oa.prototype.getAvailableImages=function(ra){ra=
this.availableImages[ra];return ra||(ra=[]),ra},Oa.prototype.getLayerIndex=function(ra){var Ea=this.layerIndexes[ra];return Ea||(Ea=this.layerIndexes[ra]=new ta),Ea},Oa.prototype.getWorkerSource=function(ra,Ea,Ia){var Va=this;return this.workerSources[ra]||(this.workerSources[ra]={}),this.workerSources[ra][Ea]||(this.workerSources[ra][Ea]={}),this.workerSources[ra][Ea][Ia]||(this.workerSources[ra][Ea][Ia]=new this.workerSourceTypes[Ea]({send:function(rb,ib,Na){Va.actor.send(rb,ib,Na,ra)}},this.getLayerIndex(ra),
this.getAvailableImages(ra))),this.workerSources[ra][Ea][Ia]},Oa.prototype.getDEMWorkerSource=function(ra,Ea){return this.demWorkerSources[ra]||(this.demWorkerSources[ra]={}),this.demWorkerSources[ra][Ea]||(this.demWorkerSources[ra][Ea]=new za),this.demWorkerSources[ra][Ea]},Oa.prototype.enforceCacheSizeLimit=function(ra,Ea){a.enforceCacheSizeLimit(Ea)},"undefined"!=typeof WorkerGlobalScope&&void 0!==a.window&&a.window instanceof WorkerGlobalScope&&(a.window.worker=new Oa(a.window)),Oa});n(["./shared"],
function(a){function d(Db){if(!fb)return Db[0];for(var Y=0;Y<Db.length;Y++)if(Db[Y]in fb)return Db[Y];return Db[0]}function e(Db,Y,ba,aa,ja,Da){this.fontSize=Db||24;this.buffer=void 0===Y?3:Y;this.cutoff=aa||.25;this.fontFamily=ja||"sans-serif";this.fontWeight=Da||"normal";this.radius=ba||8;Db=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=Db;this.ctx=this.canvas.getContext("2d");this.ctx.font=this.fontWeight+" "+this.fontSize+
"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(Db*Db);this.gridInner=new Float64Array(Db*Db);this.f=new Float64Array(Db);this.d=new Float64Array(Db);this.z=new Float64Array(Db+1);this.v=new Int16Array(Db);this.middle=Math.round(Db/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function l(Db,Y,ba,aa,ja,Da,Sa){for(var gb=0;gb<Y;gb++){for(var sb=0;sb<ba;sb++)aa[sb]=Db[sb*Y+gb];k(aa,ja,Da,Sa,ba);for(sb=0;sb<ba;sb++)Db[sb*Y+gb]=ja[sb]}for(sb=
0;sb<ba;sb++){for(gb=0;gb<Y;gb++)aa[gb]=Db[sb*Y+gb];k(aa,ja,Da,Sa,Y);for(gb=0;gb<Y;gb++)Db[sb*Y+gb]=Math.sqrt(ja[gb])}}function k(Db,Y,ba,aa,ja){ba[0]=0;aa[0]=-1E20;aa[1]=1E20;for(var Da=1,Sa=0;Da<ja;Da++){for(var gb=(Db[Da]+Da*Da-(Db[ba[Sa]]+ba[Sa]*ba[Sa]))/(2*Da-2*ba[Sa]);gb<=aa[Sa];)Sa--,gb=(Db[Da]+Da*Da-(Db[ba[Sa]]+ba[Sa]*ba[Sa]))/(2*Da-2*ba[Sa]);ba[++Sa]=Da;aa[Sa]=gb;aa[Sa+1]=1E20}for(Sa=Da=0;Da<ja;Da++){for(;aa[Sa+1]<Da;)Sa++;Y[Da]=(Da-ba[Sa])*(Da-ba[Sa])+Db[ba[Sa]]}}function c(Db,Y,ba){var aa=
function(ja,Da){if(ja)return ba(ja);Da&&(ja=a.pick(a.extend(Da,Db),"tiles minzoom maxzoom attribution mapbox_logo bounds scheme tileSize encoding".split(" ")),Da.vector_layers&&(ja.vectorLayers=Da.vector_layers,ja.vectorLayerIds=ja.vectorLayers.map(function(Sa){return Sa.id})),ja.tiles=Y.canonicalizeTileset(ja,Db.url),ba(null,ja))};return Db.url?a.getJSON(Y.transformRequest(Y.normalizeSourceURL(Db.url),a.ResourceType.Source),aa):a.browser.frame(function(){return aa(null,Db)})}function f(Db,Y){var ba=
a.identity([]);return a.translate(ba,ba,[1,1,0]),a.scale(ba,ba,[.5*Db.width,.5*Db.height,1]),a.multiply(ba,ba,Db.calculatePosMatrix(Y.toUnwrapped()))}function g(Db,Y,ba,aa,ja,Da){var Sa=function(cc,Nc,Lc){if(cc)for(var Cc=0;Cc<cc.length;Cc+=1){var Kc=Nc[cc[Cc]];if(Kc&&Kc.source===Lc&&"fill-extrusion"===Kc.type)return!0}else for(Cc in Nc)if(cc=Nc[Cc],cc.source===Lc&&"fill-extrusion"===cc.type)return!0;return!1}(ja&&ja.layers,Y,Db.id),gb=Da.maxPitchScaleFactor();aa=Db.tilesIn(aa,gb,Sa);aa.sort(q);Sa=
[];for(var sb=0;sb<aa.length;sb+=1){var Ob=aa[sb];Sa.push({wrappedTileID:Ob.tileID.wrapped().key,queryResults:Ob.tile.queryRenderedFeatures(Y,ba,Db._state,Ob.queryGeometry,Ob.cameraQueryGeometry,Ob.scale,ja,Da,gb,f(Db.transform,Ob.tileID))})}Y=function(cc){for(var Nc={},Lc={},Cc=0;Cc<cc.length;Cc+=1){var Kc=cc[Cc],Hc=Kc.queryResults;Kc=Kc.wrappedTileID;Kc=Lc[Kc]=Lc[Kc]||{};for(var bc in Hc)for(var Aa=Hc[bc],Ha=Kc[bc]=Kc[bc]||{},Qa=Nc[bc]=Nc[bc]||[],hb=0;hb<Aa.length;hb+=1){var ub=Aa[hb];Ha[ub.featureIndex]||
(Ha[ub.featureIndex]=!0,Qa.push(ub))}}return Nc}(Sa);for(var Yb in Y)Y[Yb].forEach(function(cc){cc=cc.feature;var Nc=Db.getFeatureState(cc.layer["source-layer"],cc.id);cc.source=cc.layer.source;cc.layer["source-layer"]&&(cc.sourceLayer=cc.layer["source-layer"]);cc.state=Nc});return Y}function q(Db,Y){Db=Db.tileID;Y=Y.tileID;return Db.overscaledZ-Y.overscaledZ||Db.canonical.y-Y.canonical.y||Db.wrap-Y.wrap||Db.canonical.x-Y.canonical.x}function t(Db,Y){var ba=Math.abs(2*Db.wrap)-+(0>Db.wrap),aa=Math.abs(2*
Y.wrap)-+(0>Y.wrap);return Db.overscaledZ-Y.overscaledZ||aa-ba||Y.canonical.y-Db.canonical.y||Y.canonical.x-Db.canonical.x}function u(Db){return"raster"===Db||"image"===Db||"video"===Db}function w(){return new a.window.Worker(Hh.workerUrl)}function x(Db,Y){var ba={},aa;for(aa in Db)"ref"!==aa&&(ba[aa]=Db[aa]);return a.refProperties.forEach(function(ja){ja in Y&&(ba[ja]=Y[ja])}),ba}function E(Db){Db=Db.slice();for(var Y=Object.create(null),ba=0;ba<Db.length;ba++)Y[Db[ba].id]=Db[ba];for(ba=0;ba<Db.length;ba++)"ref"in
Db[ba]&&(Db[ba]=x(Db[ba],Y[Db[ba].ref]));return Db}function F(Db,Y,ba,aa,ja,Da){for(var Sa in Y=Y||{},Db=Db||{})Db.hasOwnProperty(Sa)&&(a.deepEqual(Db[Sa],Y[Sa])||ba.push({command:Da,args:[aa,Sa,Y[Sa],ja]}));for(Sa in Y)Y.hasOwnProperty(Sa)&&!Db.hasOwnProperty(Sa)&&(a.deepEqual(Db[Sa],Y[Sa])||ba.push({command:Da,args:[aa,Sa,Y[Sa],ja]}))}function z(Db){return Db.id}function B(Db,Y){return Db[Y.id]=Y,Db}function C(Db,Y,ba,aa,ja){var Da=a.create();return Y?(a.scale(Da,Da,[1/ja,1/ja,1]),ba||a.rotateZ(Da,
Da,aa.angle)):a.multiply(Da,aa.labelPlaneMatrix,Db),Da}function v(Db,Y,ba,aa,ja){return Y?(Db=a.clone(Db),a.scale(Db,Db,[ja,ja,1]),ba||a.rotateZ(Db,Db,-aa.angle),Db):aa.glCoordMatrix}function G(Db,Y){Db=[Db.x,Db.y,0,1];Q(Db,Db,Y);Y=Db[3];return{point:new a.Point(Db[0]/Y,Db[1]/Y),signedDistanceFromCamera:Y}}function I(Db,Y,ba,aa,ja,Da,Sa,gb){var sb=aa?Db.textSizeData:Db.iconSizeData,Ob=a.evaluateSizeForZoom(sb,ba.transform.zoom),Yb=[256/ba.width*2+1,256/ba.height*2+1],cc=aa?Db.text.dynamicLayoutVertexArray:
Db.icon.dynamicLayoutVertexArray;cc.clear();for(var Nc=Db.lineVertexArray,Lc=aa?Db.text.placedSymbolArray:Db.icon.placedSymbolArray,Cc=ba.transform.width/ba.transform.height,Kc=!1,Hc=0;Hc<Lc.length;Hc++){var bc=Lc.get(Hc);if(bc.hidden||bc.writingMode===a.WritingMode.vertical&&!Kc)P(bc.numGlyphs,cc);else{Kc=!1;var Aa=[bc.anchorX,bc.anchorY,0,1];a.transformMat4(Aa,Aa,Y);var Ha=Aa[0]/Aa[3],Qa=Aa[1]/Aa[3];if(Ha>=-Yb[0]&&Ha<=Yb[0]&&Qa>=-Yb[1]&&Qa<=Yb[1]){Kc=.5+ba.transform.cameraToCenterDistance/Aa[3]*
.5;Aa=a.evaluateSizeForFeature(sb,Ob,bc);Aa=Sa?Aa/Kc:Aa*Kc;Ha=new a.Point(bc.anchorX,bc.anchorY);Qa=G(Ha,ja).point;var hb={},ub=N(bc,Aa,!1,gb,Y,ja,Da,Db.glyphOffsetArray,Nc,cc,Qa,Ha,hb,Cc);Kc=ub.useVertical;(ub.notEnoughRoom||Kc||ub.needsFlipping&&N(bc,Aa,!0,gb,Y,ja,Da,Db.glyphOffsetArray,Nc,cc,Qa,Ha,hb,Cc).notEnoughRoom)&&P(bc.numGlyphs,cc)}else P(bc.numGlyphs,cc)}}aa?Db.text.dynamicLayoutVertexBuffer.updateData(cc):Db.icon.dynamicLayoutVertexBuffer.updateData(cc)}function J(Db,Y,ba,aa,ja,Da,Sa,
gb,sb,Ob,Yb){var cc=gb.glyphStartIndex+gb.numGlyphs,Nc=gb.lineStartIndex,Lc=gb.lineStartIndex+gb.lineLength,Cc=Y.getoffsetX(gb.glyphStartIndex);Y=Y.getoffsetX(cc-1);Cc=L(Db*Cc,ba,aa,ja,Da,Sa,gb.segment,Nc,Lc,sb,Ob,Yb);return Cc?(Db=L(Db*Y,ba,aa,ja,Da,Sa,gb.segment,Nc,Lc,sb,Ob,Yb))?{first:Cc,last:Db}:null:null}function K(Db,Y,ba,aa){return Db===a.WritingMode.horizontal&&Math.abs(ba.y-Y.y)>Math.abs(ba.x-Y.x)*aa?{useVertical:!0}:(Db===a.WritingMode.vertical?Y.y<ba.y:Y.x>ba.x)?{needsFlipping:!0}:null}
function N(Db,Y,ba,aa,ja,Da,Sa,gb,sb,Ob,Yb,cc,Nc,Lc){Y/=24;var Cc=Db.lineOffsetX*Y,Kc=Db.lineOffsetY*Y;if(1<Db.numGlyphs){ja=Db.glyphStartIndex+Db.numGlyphs;var Hc=Db.lineStartIndex,bc=Db.lineStartIndex+Db.lineLength,Aa=J(Y,gb,Cc,Kc,ba,Yb,cc,Db,sb,Da,Nc);if(!Aa)return{notEnoughRoom:!0};var Ha=G(Aa.first.point,Sa).point;Sa=G(Aa.last.point,Sa).point;if(aa&&!ba&&(Lc=K(Db.writingMode,Ha,Sa,Lc)))return Lc;Lc=[Aa.first];for(aa=Db.glyphStartIndex+1;aa<ja-1;aa++)Lc.push(L(Y*gb.getoffsetX(aa),Cc,Kc,ba,Yb,
cc,Db.segment,Hc,bc,sb,Da,Nc));Lc.push(Aa.last)}else{if(aa&&!ba&&(Hc=G(cc,ja).point,bc=Db.lineStartIndex+Db.segment+1,bc=new a.Point(sb.getx(bc),sb.gety(bc)),Aa=G(bc,ja),ja=0<Aa.signedDistanceFromCamera?Aa.point:H(cc,bc,Hc,1,ja),Lc=K(Db.writingMode,Hc,ja,Lc)))return Lc;Db=L(Y*gb.getoffsetX(Db.glyphStartIndex),Cc,Kc,ba,Yb,cc,Db.segment,Db.lineStartIndex,Db.lineStartIndex+Db.lineLength,sb,Da,Nc);if(!Db)return{notEnoughRoom:!0};Lc=[Db]}Db=0;for(ba=Lc;Db<ba.length;Db+=1)Da=ba[Db],a.addDynamicAttributes(Ob,
Da.point,Da.angle);return{}}function H(Db,Y,ba,aa,ja){Db=G(Db.add(Db.sub(Y)._unit()),ja).point;Db=ba.sub(Db);return ba.add(Db._mult(aa/Db.mag()))}function L(Db,Y,ba,aa,ja,Da,Sa,gb,sb,Ob,Yb,cc){var Nc=aa?Db-Y:Db+Y;Db=0<Nc?1:-1;Y=0;aa&&(Db*=-1,Y=Math.PI);0>Db&&(Y+=Math.PI);aa=0<Db?gb+Sa:gb+Sa+1;Sa=ja;var Lc=0,Cc=0,Kc=Math.abs(Nc);for(Nc=[];Lc+Cc<=Kc;){if((aa+=Db)<gb||aa>=sb)return null;if(ja=Sa,Nc.push(Sa),void 0===(Sa=cc[aa])){Sa=new a.Point(Ob.getx(aa),Ob.gety(aa));var Hc=G(Sa,Yb);0<Hc.signedDistanceFromCamera?
Sa=cc[aa]=Hc.point:(Hc=aa-Db,Sa=H(0===Lc?Da:new a.Point(Ob.getx(Hc),Ob.gety(Hc)),Sa,ja,Kc-Lc+1,Yb))}Lc+=Cc;Cc=ja.dist(Sa)}gb=(Kc-Lc)/Cc;Da=Sa.sub(ja);gb=Da.mult(gb)._add(ja);gb._add(Da._unit()._perp()._mult(ba*Db));ba=Y+Math.atan2(Sa.y-ja.y,Sa.x-ja.x);return Nc.push(gb),{point:gb,angle:ba,path:Nc}}function P(Db,Y){for(var ba=0;ba<Db;ba++){var aa=Y.length;Y.resize(aa+4);Y.float32.set(ke,3*aa)}}function Q(Db,Y,ba){var aa=Y[0];Y=Y[1];return Db[0]=ba[0]*aa+ba[4]*Y+ba[12],Db[1]=ba[1]*aa+ba[5]*Y+ba[13],
Db[3]=ba[3]*aa+ba[7]*Y+ba[15],Db}function S(Db,Y,ba){return a.EXTENT/(Db.tileSize*Math.pow(2,ba-Db.tileID.overscaledZ))*Y}function O(Db,Y,ba,aa,ja){var Da=a.getAnchorAlignment(Db);Y*=-(Da.horizontalAlign-.5);ba*=-(Da.verticalAlign-.5);Db=a.evaluateVariableOffset(Db,aa);return new a.Point(Y+Db[0]*ja,ba+Db[1]*ja)}function U(Db,Y,ba,aa,ja,Da){var Sa=Db.x1,gb=Db.x2,sb=Db.y1,Ob=Db.y2,Yb=Db.anchorPointX;Db=Db.anchorPointY;Y=new a.Point(Y,ba);return aa&&Y._rotate(ja?Da:-Da),{x1:Sa+Y.x,y1:sb+Y.y,x2:gb+Y.x,
y2:Ob+Y.y,anchorPointX:Yb,anchorPointY:Db}}function X(Db,Y,ba,aa,ja){Db.emplaceBack(Y?1:0,ba?1:0,aa||0,ja||0);Db.emplaceBack(Y?1:0,ba?1:0,aa||0,ja||0);Db.emplaceBack(Y?1:0,ba?1:0,aa||0,ja||0);Db.emplaceBack(Y?1:0,ba?1:0,aa||0,ja||0)}function da(Db){if(0===Db.opacity&&!Db.placed)return 0;if(1===Db.opacity&&Db.placed)return 4294967295;var Y=Db.placed?1:0;Db=Math.floor(127*Db.opacity);return Db*Sb+Y*Ec+Db*Vc+Y*mc+Db*Sc+Y*jd+Db*Ad+Y}function ea(Db,Y){var ba=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,
aa={};return{fragmentSource:Db=Db.replace(ba,function(ja,Da,Sa,gb,sb){return aa[sb]=!0,"define"===Da?"\n#ifndef HAS_UNIFORM_u_"+sb+"\nvarying "+Sa+" "+gb+" "+sb+";\n#else\nuniform "+Sa+" "+gb+" u_"+sb+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+sb+"\n    "+Sa+" "+gb+" "+sb+" \x3d u_"+sb+";\n#endif\n"}),vertexSource:Y=Y.replace(ba,function(ja,Da,Sa,gb,sb){ja="float"===gb?"vec2":"vec4";var Ob=sb.match(/color/)?"color":ja;return aa[sb]?"define"===Da?"\n#ifndef HAS_UNIFORM_u_"+sb+"\nuniform lowp float u_"+
sb+"_t;\nattribute "+Sa+" "+ja+" a_"+sb+";\nvarying "+Sa+" "+gb+" "+sb+";\n#else\nuniform "+Sa+" "+gb+" u_"+sb+";\n#endif\n":"vec4"===Ob?"\n#ifndef HAS_UNIFORM_u_"+sb+"\n    "+sb+" \x3d a_"+sb+";\n#else\n    "+Sa+" "+gb+" "+sb+" \x3d u_"+sb+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+sb+"\n    "+sb+" \x3d unpack_mix_"+Ob+"(a_"+sb+", u_"+sb+"_t);\n#else\n    "+Sa+" "+gb+" "+sb+" \x3d u_"+sb+";\n#endif\n":"define"===Da?"\n#ifndef HAS_UNIFORM_u_"+sb+"\nuniform lowp float u_"+sb+"_t;\nattribute "+Sa+" "+
ja+" a_"+sb+";\n#else\nuniform "+Sa+" "+gb+" u_"+sb+";\n#endif\n":"vec4"===Ob?"\n#ifndef HAS_UNIFORM_u_"+sb+"\n    "+Sa+" "+gb+" "+sb+" \x3d a_"+sb+";\n#else\n    "+Sa+" "+gb+" "+sb+" \x3d u_"+sb+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+sb+"\n    "+Sa+" "+gb+" "+sb+" \x3d unpack_mix_"+Ob+"(a_"+sb+", u_"+sb+"_t);\n#else\n    "+Sa+" "+gb+" "+sb+" \x3d u_"+sb+";\n#endif\n"})}}function ca(Db,Y,ba){var aa=1/S(ba,1,Y.transform.tileZoom),ja=Math.pow(2,ba.tileID.overscaledZ);Y=ba.tileSize*Math.pow(2,Y.transform.tileZoom)/
ja;ja=Y*(ba.tileID.canonical.x+ba.tileID.wrap*ja);Y*=ba.tileID.canonical.y;return{u_image:0,u_texsize:ba.imageAtlasTexture.size,u_scale:[aa,Db.fromScale,Db.toScale],u_fade:Db.t,u_pixel_coord_upper:[ja>>16,Y>>16],u_pixel_coord_lower:[65535&ja,65535&Y]}}function ia(Db,Y,ba){return Db.translatePosMatrix(Y.tileID.posMatrix,Y,ba.paint.get("line-translate"),ba.paint.get("line-translate-anchor"))}function ha(Db,Y,ba,aa,ja,Da,Sa){for(var gb=Db.context,sb=gb.gl,Ob=Db.useProgram("collisionBox"),Yb=[],cc=0,
Nc=0,Lc=0;Lc<aa.length;Lc++){var Cc=aa[Lc],Kc=Y.getTile(Cc),Hc=Kc.getBucket(ba);if(Hc){var bc=Cc.posMatrix;0===ja[0]&&0===ja[1]||(bc=Db.translatePosMatrix(Cc.posMatrix,Kc,ja,Da));Cc=Sa?Hc.textCollisionBox:Hc.iconCollisionBox;var Aa=Hc.collisionCircleArray;if(0<Aa.length){var Ha=a.create(),Qa=bc;a.mul(Ha,Hc.placementInvProjMatrix,Db.transform.glCoordMatrix);a.mul(Ha,Ha,Hc.placementViewportMatrix);Yb.push({circleArray:Aa,circleOffset:Nc,transform:Qa,invTransform:Ha});Nc=cc+=Aa.length/4}if(Cc){Hc=Ob;
Aa=Hc.draw;Ha=sb.LINES;Qa=Wd.disabled;var hb=Wc.disabled,ub=Db.colorModeForRenderPass(),Mb=Kd.disabled,Tb=Db.transform,uc=Kc;Kc=S(uc,1,Tb.zoom);var kc=Math.pow(2,Tb.zoom-uc.tileID.overscaledZ);uc=uc.tileID.overscaleFactor();Aa.call(Hc,gb,Ha,Qa,hb,ub,Mb,{u_matrix:bc,u_camera_to_center_distance:Tb.cameraToCenterDistance,u_pixels_to_tile_units:Kc,u_extrude_scale:[Tb.pixelsToGLUnits[0]/(Kc*kc),Tb.pixelsToGLUnits[1]/(Kc*kc)],u_overscale_factor:uc},ba.id,Cc.layoutVertexBuffer,Cc.indexBuffer,Cc.segments,
null,Db.transform.zoom,null,null,Cc.collisionVertexBuffer)}}}if(Sa&&Yb.length){Y=Db.useProgram("collisionCircle");aa=new a.StructArrayLayout2f1f2i16;aa.resize(4*cc);aa._trim();for(Da=ja=0;Da<Yb.length;Da+=1)for(Sa=Yb[Da],Ob=0;Ob<Sa.circleArray.length/4;Ob++)Kc=4*Ob,Nc=Sa.circleArray[Kc+0],Lc=Sa.circleArray[Kc+1],Cc=Sa.circleArray[Kc+2],Kc=Sa.circleArray[Kc+3],aa.emplace(ja++,Nc,Lc,Cc,Kc,0),aa.emplace(ja++,Nc,Lc,Cc,Kc,1),aa.emplace(ja++,Nc,Lc,Cc,Kc,2),aa.emplace(ja++,Nc,Lc,Cc,Kc,3);if(!Ai||Ai.length<
2*cc){cc*=2;ja=new a.StructArrayLayout3ui6;ja.resize(cc);ja._trim();for(Da=0;Da<cc;Da++)Sa=6*Da,ja.uint16[Sa+0]=4*Da,ja.uint16[Sa+1]=4*Da+1,ja.uint16[Sa+2]=4*Da+2,ja.uint16[Sa+3]=4*Da+2,ja.uint16[Sa+4]=4*Da+3,ja.uint16[Sa+5]=4*Da;Ai=ja}cc=gb.createIndexBuffer(Ai,!0);aa=gb.createVertexBuffer(aa,a.collisionCircleLayout.members,!0);for(ja=0;ja<Yb.length;ja+=1)Da=Yb[ja],Sa=Db.transform,Sa={u_matrix:Da.transform,u_inv_matrix:Da.invTransform,u_camera_to_center_distance:Sa.cameraToCenterDistance,u_viewport_size:[Sa.width,
Sa.height]},Y.draw(gb,sb.TRIANGLES,Wd.disabled,Wc.disabled,Db.colorModeForRenderPass(),Kd.disabled,Sa,ba.id,aa,cc,a.SegmentVector.simpleSegment(0,2*Da.circleOffset,Da.circleArray.length,Da.circleArray.length/2),null,Db.transform.zoom,null,null,null);aa.destroy();cc.destroy()}}function fa(Db,Y,ba,aa,ja,Da,Sa,gb,sb,Ob,Yb,cc){var Nc=Db.context,Lc=Nc.gl,Cc=Db.transform,Kc="map"===gb,Hc="map"===sb,bc=Kc&&"point"!==ba.layout.get("symbol-placement"),Aa=Kc&&!Hc&&!bc,Ha=void 0!==ba.layout.get("symbol-sort-key").constantOr(1);
sb=Db.depthModeForSublayer(0,Wd.ReadOnly);var Qa=ba.layout.get("text-variable-anchor");gb=[];for(var hb=0;hb<aa.length;hb+=1){var ub=aa[hb],Mb=Y.getTile(ub),Tb=Mb.getBucket(ba);if(Tb){var uc=ja?Tb.text:Tb.icon;if(uc&&uc.segments.get().length){var kc=uc.programConfigurations.get(ba.id),nc=ja||Tb.sdfIcons,ad=ja?Tb.textSizeData:Tb.iconSizeData,kd=Hc||0!==Cc.pitch;kc=Db.useProgram(Tb.iconsInText&&ja?"symbolTextAndIcon":nc?"symbolSDF":"symbolIcon",kc);var td=a.evaluateSizeForZoom(ad,Cc.zoom),Cd=void 0,
Md=[0,0],Ed=void 0,Sd=void 0,ee=null,Zd=void 0;ja?(Ed=Mb.glyphAtlasTexture,Sd=Lc.LINEAR,Cd=Mb.glyphAtlasTexture.size,Tb.iconsInText&&(Md=Mb.imageAtlasTexture.size,ee=Mb.imageAtlasTexture,Zd=kd||Db.options.rotating||Db.options.zooming||"composite"===ad.kind||"camera"===ad.kind?Lc.LINEAR:Lc.NEAREST)):(Cd=1!==ba.layout.get("icon-size").constantOr(0)||Tb.iconsNeedLinear,Ed=Mb.imageAtlasTexture,Sd=nc||Db.options.rotating||Db.options.zooming||Cd||kd?Lc.LINEAR:Lc.NEAREST,Cd=Mb.imageAtlasTexture.size);var me=
S(Mb,1,Db.transform.zoom);kd=C(ub.posMatrix,Hc,Kc,Db.transform,me);me=v(ub.posMatrix,Hc,Kc,Db.transform,me);var De=Qa&&Tb.hasTextData();De="none"!==ba.layout.get("icon-text-fit")&&De&&Tb.hasIconData();bc&&I(Tb,ub.posMatrix,Db,ja,kd,me,Hc,Ob);ub=Db.translatePosMatrix(ub.posMatrix,Mb,Da,Sa);kd=bc||ja&&Qa||De?ak:kd;Mb=Db.translatePosMatrix(me,Mb,Da,Sa,!0);me=nc&&0!==ba.paint.get(ja?"text-halo-width":"icon-halo-width").constantOr(1);Tb={program:kc,buffers:uc,uniformValues:nc?Tb.iconsInText?Jj(ad.kind,
td,Aa,Hc,Db,ub,kd,Mb,Cd,Md):vf(ad.kind,td,Aa,Hc,Db,ub,kd,Mb,ja,Cd,!0):Kj(ad.kind,td,Aa,Hc,Db,ub,kd,Mb,ja,Cd),atlasTexture:Ed,atlasTextureIcon:ee,atlasInterpolation:Sd,atlasInterpolationIcon:Zd,isSDF:nc,hasHalo:me};if(Ha)for(nc=0,uc=uc.segments.get();nc<uc.length;nc+=1)ad=uc[nc],gb.push({segments:new a.SegmentVector([ad]),sortKey:ad.sortKey,state:Tb});else gb.push({segments:uc.segments,sortKey:0,state:Tb})}}}Ha&&gb.sort(function(he,Re){return he.sortKey-Re.sortKey});for(Y=0;Y<gb.length;Y+=1){aa=gb[Y];
ja=aa.state;if(Nc.activeTexture.set(Lc.TEXTURE0),ja.atlasTexture.bind(ja.atlasInterpolation,Lc.CLAMP_TO_EDGE),ja.atlasTextureIcon&&(Nc.activeTexture.set(Lc.TEXTURE1),ja.atlasTextureIcon&&ja.atlasTextureIcon.bind(ja.atlasInterpolationIcon,Lc.CLAMP_TO_EDGE)),ja.isSDF)Da=ja.uniformValues,ja.hasHalo&&(Da.u_is_halo=1,na(ja.buffers,aa.segments,ba,Db,ja.program,sb,Yb,cc,Da)),Da.u_is_halo=0;na(ja.buffers,aa.segments,ba,Db,ja.program,sb,Yb,cc,ja.uniformValues)}}function na(Db,Y,ba,aa,ja,Da,Sa,gb,sb){var Ob=
aa.context;ja.draw(Ob,Ob.gl.TRIANGLES,Da,Sa,gb,Kd.disabled,sb,ba.id,Db.layoutVertexBuffer,Db.indexBuffer,Y,ba.paint,aa.transform.zoom,Db.programConfigurations.get(ba.id),Db.dynamicLayoutVertexBuffer,Db.opacityVertexBuffer)}function sa(Db,Y,ba,aa,ja,Da,Sa){var gb,sb,Ob,Yb=Db.context.gl,cc=ba.paint.get("fill-pattern"),Nc=cc&&cc.constantOr(1),Lc=ba.getCrossfadeParameters();Sa?(sb=Nc&&!ba.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",gb=Yb.LINES):(sb=Nc?"fillPattern":"fill",
gb=Yb.TRIANGLES);for(var Cc=0;Cc<aa.length;Cc+=1){var Kc=aa[Cc];var Hc=Y.getTile(Kc);if(!Nc||Hc.patternsLoaded()){var bc=Hc.getBucket(ba);if(bc){var Aa=bc.programConfigurations.get(ba.id),Ha=Db.useProgram(sb,Aa);Nc&&(Db.context.activeTexture.set(Yb.TEXTURE0),Hc.imageAtlasTexture.bind(Yb.LINEAR,Yb.CLAMP_TO_EDGE),Aa.updatePaintBuffers(Lc));if((Ob=cc.constantOr(null))&&Hc.imageAtlas){var Qa=Hc.imageAtlas;var hb=Qa.patternPositions[Ob.to.toString()];Ob=Qa.patternPositions[Ob.from.toString()];hb&&Ob&&
Aa.setConstantPatternPositions(hb,Ob)}Qa=Db.translatePosMatrix(Kc.posMatrix,Hc,ba.paint.get("fill-translate"),ba.paint.get("fill-translate-anchor"));if(Sa){hb=bc.indexBuffer2;Ob=bc.segments2;var ub=[Yb.drawingBufferWidth,Yb.drawingBufferHeight];if("fillOutlinePattern"===sb&&Nc){var Mb=a,Tb=Mb.extend;Hc=a.extend({u_matrix:Qa},ca(Lc,Db,Hc));Hc=Tb.call(Mb,Hc,{u_world:ub})}else Hc={u_matrix:Qa,u_world:ub}}else hb=bc.indexBuffer,Ob=bc.segments,Hc=Nc?a.extend({u_matrix:Qa},ca(Lc,Db,Hc)):{u_matrix:Qa};Ha.draw(Db.context,
gb,ja,Db.stencilModeForClipping(Kc),Da,Kd.disabled,Hc,ba.id,bc.layoutVertexBuffer,hb,Ob,ba.paint,Db.transform.zoom,Aa)}}}}function ua(Db,Y,ba,aa,ja,Da,Sa){for(var gb=Db.context,sb=gb.gl,Ob=ba.paint.get("fill-extrusion-pattern"),Yb=Ob.constantOr(1),cc=ba.getCrossfadeParameters(),Nc=ba.paint.get("fill-extrusion-opacity"),Lc=0;Lc<aa.length;Lc+=1){var Cc=aa[Lc],Kc=Y.getTile(Cc),Hc=Kc.getBucket(ba);if(Hc){var bc=Hc.programConfigurations.get(ba.id),Aa=Db.useProgram(Yb?"fillExtrusionPattern":"fillExtrusion",
bc);Yb&&(Db.context.activeTexture.set(sb.TEXTURE0),Kc.imageAtlasTexture.bind(sb.LINEAR,sb.CLAMP_TO_EDGE),bc.updatePaintBuffers(cc));var Ha=Ob.constantOr(null);if(Ha&&Kc.imageAtlas){var Qa=Kc.imageAtlas,hb=Qa.patternPositions[Ha.to.toString()];Ha=Qa.patternPositions[Ha.from.toString()];hb&&Ha&&bc.setConstantPatternPositions(hb,Ha)}hb=Db.translatePosMatrix(Cc.posMatrix,Kc,ba.paint.get("fill-extrusion-translate"),ba.paint.get("fill-extrusion-translate-anchor"));Ha=ba.paint.get("fill-extrusion-vertical-gradient");
if(Yb){Qa=Db;var ub=cc;Kc=a.extend(Dg(hb,Qa,Ha,Nc),ca(ub,Qa,Kc),{u_height_factor:-Math.pow(2,Cc.overscaledZ)/Kc.tileSize/8})}else Kc=Dg(hb,Db,Ha,Nc);Aa.draw(gb,gb.gl.TRIANGLES,ja,Da,Sa,Kd.backCCW,Kc,ba.id,Hc.layoutVertexBuffer,Hc.indexBuffer,Hc.segments,ba.paint,Db.transform.zoom,bc)}}}function ta(Db,Y,ba,aa,ja,Da){Db=Db.context;var Sa=Db.gl;Sa.enable(Sa.SCISSOR_TEST);Sa.scissor(Y*a.browser.devicePixelRatio,ba*a.browser.devicePixelRatio,aa*a.browser.devicePixelRatio,ja*a.browser.devicePixelRatio);
Db.clear({color:Da});Sa.disable(Sa.SCISSOR_TEST)}function oa(Db,Y){(!Db.duration||Db.duration<Y.duration)&&(Db.duration=Y.duration,Db.easing=Y.easing)}function va(Db,Y,ba){var aa=ba.maxSpeed,ja=ba.linearity,Da=ba.deceleration;Db=a.clamp(Db*ja/(Y/1E3),-aa,aa);ja=Math.abs(Db)/(Da*ja);return{easing:ba.easing,duration:1E3*ja,amount:ja/2*Db}}function ma(Db,Y){for(var ba={},aa=0;aa<Db.length;aa++)ba[Db[aa].identifier]=Y[aa];return ba}function pa(Db,Y,ba){for(var aa=0;aa<Db.length;aa++)if(Db[aa].identifier===
ba)return Y[aa]}function za(Db){return Math.abs(Db.y)>Math.abs(Db.x)}function qa(Db){return Db*(2-Db)}function Ca(Db){return Db.panDelta&&Db.panDelta.mag()||Db.zoomDelta||Db.bearingDelta||Db.pitchDelta}function Ka(Db){Db.parentNode&&Db.parentNode.removeChild(Db)}function Oa(Db,Y,ba){if(Db=new a.LngLat(Db.lng,Db.lat),Y){var aa=new a.LngLat(Db.lng-360,Db.lat),ja=new a.LngLat(Db.lng+360,Db.lat),Da=ba.locationPoint(Db).distSqr(Y);ba.locationPoint(aa).distSqr(Y)<Da?Db=aa:ba.locationPoint(ja).distSqr(Y)<
Da&&(Db=ja)}for(;180<Math.abs(Db.lng-ba.center.lng);){Y=ba.locationPoint(Db);if(0<=Y.x&&0<=Y.y&&Y.x<=ba.width&&Y.y<=ba.height)break;Db.lng>ba.center.lng?Db.lng-=360:Db.lng+=360}return Db}function kb(Db,Y,ba){Db=Db.classList;for(var aa in Qg)Db.remove("mapboxgl-"+ba+"-anchor-"+aa);Db.add("mapboxgl-"+ba+"-anchor-"+Y)}function mb(Db,Y,ba){var aa=ba&&ba.maxWidth||100,ja=Db._container.clientHeight/2,Da=Db.unproject([0,ja]);ja=Db.unproject([aa,ja]);Da=Da.distanceTo(ja);ba&&"imperial"===ba.unit?(ba=3.2808*
Da,5280<ba?tb(Y,aa,ba/5280,Db._getUIString("ScaleControl.Miles")):tb(Y,aa,ba,Db._getUIString("ScaleControl.Feet"))):ba&&"nautical"===ba.unit?tb(Y,aa,Da/1852,Db._getUIString("ScaleControl.NauticalMiles")):1E3<=Da?tb(Y,aa,Da/1E3,Db._getUIString("ScaleControl.Kilometers")):tb(Y,aa,Da,Db._getUIString("ScaleControl.Meters"))}function tb(Db,Y,ba,aa){var ja,Da=ja=Math.pow(10,(""+Math.floor(ba)).length-1);if(10<=(ja=ba/ja))ja=10;else if(5<=ja)ja=5;else if(3<=ja)ja=3;else if(2<=ja)ja=2;else if(1<=ja)ja=1;
else{var Sa=Math.pow(10,Math.ceil(-Math.log(ja)/Math.LN10));ja=Math.round(ja*Sa)/Sa}Da*=ja;Db.style.width=Da/ba*Y+"px";Db.innerHTML=Da+"\x26nbsp;"+aa}var nb=a.createCommonjsModule(function(Db){function Y(ja){return!ba(ja)}function ba(ja){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&
Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;
var Sa=new Blob([""],{type:"text/javascript"});Sa=URL.createObjectURL(Sa);try{var gb=new Worker(Sa);var sb=!0}catch(Ob){sb=!1}return gb&&gb.terminate(),URL.revokeObjectURL(Sa),sb}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Sa=document.createElement("canvas");Sa.width=Sa.height=1;var gb=Sa.getContext("2d");return gb?(gb=gb.getImageData(0,0,1,1))&&gb.width===Sa.width:!1}()?(void 0===aa[Da=ja&&ja.failIfMajorPerformanceCaveat]&&(aa[Da]=function(Sa){var gb=document.createElement("canvas"),
sb=Object.create(Y.webGLContextAttributes);Sa=(sb.failIfMajorPerformanceCaveat=Sa,gb.probablySupportsContext?gb.probablySupportsContext("webgl",sb)||gb.probablySupportsContext("experimental-webgl",sb):gb.supportsContext?gb.supportsContext("webgl",sb)||gb.supportsContext("experimental-webgl",sb):gb.getContext("webgl",sb)||gb.getContext("experimental-webgl",sb));if(!Sa)return!1;gb=Sa.createShader(Sa.VERTEX_SHADER);return!(!gb||Sa.isContextLost())&&(Sa.shaderSource(gb,"void main() {}"),Sa.compileShader(gb),
!0===Sa.getShaderParameter(gb,Sa.COMPILE_STATUS))}(Da)),aa[Da]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var Da}Db.exports?Db.exports=Y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Y,window.mapboxgl.notSupportedReason=
ba);var aa={};Y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),Ta={create:function(Db,Y,ba){Db=a.window.document.createElement(Db);return void 0!==Y&&(Db.className=Y),ba&&ba.appendChild(Db),Db},createNS:function(Db,Y){return a.window.document.createElementNS(Db,Y)}},fb=a.window.document.documentElement.style,ab,ra=d(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);Ta.disableDrag=function(){fb&&ra&&(ab=fb[ra],fb[ra]="none")};Ta.enableDrag=function(){fb&&ra&&(fb[ra]=
ab)};var Ea=d(["transform","WebkitTransform"]);Ta.setTransform=function(Db,Y){Db.style[Ea]=Y};var Ia=!1;try{var Va=Object.defineProperty({},"passive",{get:function(){Ia=!0}});a.window.addEventListener("test",Va,Va);a.window.removeEventListener("test",Va,Va)}catch(Db){Ia=!1}Ta.addEventListener=function(Db,Y,ba,aa){void 0===aa&&(aa={});Db.addEventListener(Y,ba,"passive"in aa&&Ia?aa:aa.capture)};Ta.removeEventListener=function(Db,Y,ba,aa){void 0===aa&&(aa={});Db.removeEventListener(Y,ba,"passive"in aa&&
Ia?aa:aa.capture)};var rb=function(Db){Db.preventDefault();Db.stopPropagation();a.window.removeEventListener("click",rb,!0)};Ta.suppressClick=function(){a.window.addEventListener("click",rb,!0);a.window.setTimeout(function(){a.window.removeEventListener("click",rb,!0)},0)};Ta.mousePos=function(Db,Y){var ba=Db.getBoundingClientRect();return new a.Point(Y.clientX-ba.left-Db.clientLeft,Y.clientY-ba.top-Db.clientTop)};Ta.touchPos=function(Db,Y){for(var ba=Db.getBoundingClientRect(),aa=[],ja=0;ja<Y.length;ja++)aa.push(new a.Point(Y[ja].clientX-
ba.left-Db.clientLeft,Y[ja].clientY-ba.top-Db.clientTop));return aa};Ta.mouseButton=function(Db){return void 0!==a.window.InstallTrigger&&2===Db.button&&Db.ctrlKey&&0<=a.window.navigator.platform.toUpperCase().indexOf("MAC")?0:Db.button};Ta.remove=function(Db){Db.parentNode&&Db.parentNode.removeChild(Db)};var ib=function(Db){function Y(){Db.call(this);this.images={};this.updatedImages={};this.callbackDispatchedThisFrame={};this.loaded=!1;this.requestors=[];this.patterns={};this.atlasImage=new a.RGBAImage({width:1,
height:1});this.dirty=!0}return Db&&(Y.__proto__=Db),(Y.prototype=Object.create(Db&&Db.prototype)).constructor=Y,Y.prototype.isLoaded=function(){return this.loaded},Y.prototype.setLoaded=function(ba){if(this.loaded!==ba&&(this.loaded=ba,ba)){ba=0;for(var aa=this.requestors;ba<aa.length;ba+=1){var ja=aa[ba];this._notify(ja.ids,ja.callback)}this.requestors=[]}},Y.prototype.getImage=function(ba){return this.images[ba]},Y.prototype.addImage=function(ba,aa){this._validate(ba,aa)&&(this.images[ba]=aa)},
Y.prototype._validate=function(ba,aa){var ja=!0;return this._validateStretch(aa.stretchX,aa.data&&aa.data.width)||(this.fire(new a.ErrorEvent(Error('Image "'+ba+'" has invalid "stretchX" value'))),ja=!1),this._validateStretch(aa.stretchY,aa.data&&aa.data.height)||(this.fire(new a.ErrorEvent(Error('Image "'+ba+'" has invalid "stretchY" value'))),ja=!1),this._validateContent(aa.content,aa)||(this.fire(new a.ErrorEvent(Error('Image "'+ba+'" has invalid "content" value'))),ja=!1),ja},Y.prototype._validateStretch=
function(ba,aa){if(!ba)return!0;for(var ja=0,Da=0;Da<ba.length;Da+=1){var Sa=ba[Da];if(Sa[0]<ja||Sa[1]<Sa[0]||aa<Sa[1])return!1;ja=Sa[1]}return!0},Y.prototype._validateContent=function(ba,aa){return!(ba&&(4!==ba.length||0>ba[0]||aa.data.width<ba[0]||0>ba[1]||aa.data.height<ba[1]||0>ba[2]||aa.data.width<ba[2]||0>ba[3]||aa.data.height<ba[3]||ba[2]<ba[0]||ba[3]<ba[1]))},Y.prototype.updateImage=function(ba,aa){aa.version=this.images[ba].version+1;this.images[ba]=aa;this.updatedImages[ba]=!0},Y.prototype.removeImage=
function(ba){var aa=this.images[ba];delete this.images[ba];delete this.patterns[ba];aa.userImage&&aa.userImage.onRemove&&aa.userImage.onRemove()},Y.prototype.listImages=function(){return Object.keys(this.images)},Y.prototype.getImages=function(ba,aa){var ja=!0;if(!this.isLoaded())for(var Da=0;Da<ba.length;Da+=1)this.images[ba[Da]]||(ja=!1);this.isLoaded()||ja?this._notify(ba,aa):this.requestors.push({ids:ba,callback:aa})},Y.prototype._notify=function(ba,aa){for(var ja={},Da=0;Da<ba.length;Da+=1){var Sa=
ba[Da];this.images[Sa]||this.fire(new a.Event("styleimagemissing",{id:Sa}));var gb=this.images[Sa];gb?ja[Sa]={data:gb.data.clone(),pixelRatio:gb.pixelRatio,sdf:gb.sdf,version:gb.version,stretchX:gb.stretchX,stretchY:gb.stretchY,content:gb.content,hasRenderCallback:!(!gb.userImage||!gb.userImage.render)}:a.warnOnce('Image "'+Sa+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}aa(null,
ja)},Y.prototype.getPixelSize=function(){var ba=this.atlasImage;return{width:ba.width,height:ba.height}},Y.prototype.getPattern=function(ba){var aa=this.patterns[ba],ja=this.getImage(ba);if(!ja)return null;if(aa&&aa.position.version===ja.version)return aa.position;aa?aa.position.version=ja.version:(aa={w:ja.data.width+2,h:ja.data.height+2,x:0,y:0},ja=new a.ImagePosition(aa,ja),this.patterns[ba]={bin:aa,position:ja});return this._updatePatternAtlas(),this.patterns[ba].position},Y.prototype.bind=function(ba){var aa=
ba.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(ba,this.atlasImage,aa.RGBA);this.atlasTexture.bind(aa.LINEAR,aa.CLAMP_TO_EDGE)},Y.prototype._updatePatternAtlas=function(){var ba=[];for(aa in this.patterns)ba.push(this.patterns[aa].bin);ba=a.potpack(ba);var aa=ba.w;var ja=ba.h;ba=this.atlasImage;for(var Da in ba.resize({width:aa||1,height:ja||1}),this.patterns){ja=this.patterns[Da].bin;aa=ja.x+1;ja=ja.y+1;var Sa=this.images[Da].data,
gb=Sa.width,sb=Sa.height;a.RGBAImage.copy(Sa,ba,{x:0,y:0},{x:aa,y:ja},{width:gb,height:sb});a.RGBAImage.copy(Sa,ba,{x:0,y:sb-1},{x:aa,y:ja-1},{width:gb,height:1});a.RGBAImage.copy(Sa,ba,{x:0,y:0},{x:aa,y:ja+sb},{width:gb,height:1});a.RGBAImage.copy(Sa,ba,{x:gb-1,y:0},{x:aa-1,y:ja},{width:1,height:sb});a.RGBAImage.copy(Sa,ba,{x:0,y:0},{x:aa+gb,y:ja},{width:1,height:sb})}this.dirty=!0},Y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Y.prototype.dispatchRenderCallbacks=function(ba){for(var aa=
0;aa<ba.length;aa+=1){var ja=ba[aa];if(!this.callbackDispatchedThisFrame[ja]){this.callbackDispatchedThisFrame[ja]=!0;var Da=this.images[ja],Sa=Da,gb=Sa.userImage;gb&&gb.render&&gb.render()&&(Sa.data.replace(new Uint8Array(gb.data.buffer)),!0)&&this.updateImage(ja,Da)}}},Y}(a.Evented);e.prototype.draw=function(Db){this.ctx.clearRect(0,0,this.size,this.size);this.ctx.fillText(Db,this.buffer,this.middle);Db=this.ctx.getImageData(0,0,this.size,this.size);for(var Y=new Uint8ClampedArray(this.size*this.size),
ba=0;ba<this.size*this.size;ba++){var aa=Db.data[4*ba+3]/255;this.gridOuter[ba]=1===aa?0:0===aa?1E20:Math.pow(Math.max(0,.5-aa),2);this.gridInner[ba]=1===aa?1E20:0===aa?0:Math.pow(Math.max(0,aa-.5),2)}l(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z);l(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(ba=0;ba<this.size*this.size;ba++)Y[ba]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[ba]-this.gridInner[ba])/this.radius+this.cutoff))));return Y};e.default=
e;var Na=function(Db,Y){this.requestManager=Db;this.localIdeographFontFamily=Y;this.entries={}};Na.prototype.setURL=function(Db){this.url=Db};Na.prototype.getGlyphs=function(Db,Y){var ba=this,aa=[],ja;for(ja in Db)for(var Da=0,Sa=Db[ja];Da<Sa.length;Da+=1)aa.push({stack:ja,id:Sa[Da]});a.asyncAll(aa,function(gb,sb){var Ob=gb.stack,Yb=gb.id,cc=ba.entries[Ob];cc||(cc=ba.entries[Ob]={glyphs:{},requests:{},ranges:{}});gb=cc.glyphs[Yb];if(void 0===gb){if(gb=ba._tinySDF(cc,Ob,Yb))return cc.glyphs[Yb]=gb,
void sb(null,{stack:Ob,id:Yb,glyph:gb});var Nc=Math.floor(Yb/256);if(65535<256*Nc)sb(Error("glyphs \x3e 65535 not supported"));else if(cc.ranges[Nc])sb(null,{stack:Ob,id:Yb,glyph:gb});else{var Lc=cc.requests[Nc];Lc||(Lc=cc.requests[Nc]=[],Na.loadGlyphRange(Ob,Nc,ba.url,ba.requestManager,function(Cc,Kc){if(Kc){for(var Hc in Kc)ba._doesCharSupportLocalGlyph(+Hc)||(cc.glyphs[+Hc]=Kc[+Hc]);cc.ranges[Nc]=!0}Hc=0;for(var bc=Lc;Hc<bc.length;Hc+=1)(0,bc[Hc])(Cc,Kc);delete cc.requests[Nc]}));Lc.push(function(Cc,
Kc){Cc?sb(Cc):Kc&&sb(null,{stack:Ob,id:Yb,glyph:Kc[Yb]||null})})}}else sb(null,{stack:Ob,id:Yb,glyph:gb})},function(gb,sb){if(gb)Y(gb);else if(sb){gb={};for(var Ob=0;Ob<sb.length;Ob+=1){var Yb=sb[Ob],cc=Yb.stack,Nc=Yb.id;Yb=Yb.glyph;(gb[cc]||(gb[cc]={}))[Nc]=Yb&&{id:Yb.id,bitmap:Yb.bitmap.clone(),metrics:Yb.metrics}}Y(null,gb)}})};Na.prototype._doesCharSupportLocalGlyph=function(Db){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](Db)||a.isChar["Hangul Syllables"](Db)||a.isChar.Hiragana(Db)||
a.isChar.Katakana(Db))};Na.prototype._tinySDF=function(Db,Y,ba){var aa=this.localIdeographFontFamily;if(aa&&this._doesCharSupportLocalGlyph(ba)){var ja=Db.tinySDF;ja||(ja="400",/bold/i.test(Y)?ja="900":/medium/i.test(Y)?ja="500":/light/i.test(Y)&&(ja="200"),ja=Db.tinySDF=new Na.TinySDF(24,3,8,.25,aa,ja));return{id:ba,bitmap:new a.AlphaImage({width:30,height:30},ja.draw(String.fromCharCode(ba))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}};Na.loadGlyphRange=function(Db,Y,ba,aa,ja){Y*=256;
var Da=Y+255;Db=aa.transformRequest(aa.normalizeGlyphsURL(ba).replace("{fontstack}",Db).replace("{range}",Y+"-"+Da),a.ResourceType.Glyphs);a.getArrayBuffer(Db,function(Sa,gb){if(Sa)ja(Sa);else if(gb){Sa={};var sb=0;for(gb=a.parseGlyphPBF(gb);sb<gb.length;sb+=1){var Ob=gb[sb];Sa[Ob.id]=Ob}ja(null,Sa)}})};Na.TinySDF=e;var Za=function(){this.specification=a.styleSpec.light.position};Za.prototype.possiblyEvaluate=function(Db,Y){return a.sphericalToCartesian(Db.expression.evaluate(Y))};Za.prototype.interpolate=
function(Db,Y,ba){return{x:a.number(Db.x,Y.x,ba),y:a.number(Db.y,Y.y,ba),z:a.number(Db.z,Y.z,ba)}};var eb=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new Za,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),Ba=function(Db){function Y(ba){Db.call(this);this._transitionable=new a.Transitionable(eb);this.setLight(ba);this._transitioning=this._transitionable.untransitioned()}return Db&&
(Y.__proto__=Db),(Y.prototype=Object.create(Db&&Db.prototype)).constructor=Y,Y.prototype.getLight=function(){return this._transitionable.serialize()},Y.prototype.setLight=function(ba,aa){if(void 0===aa&&(aa={}),!this._validate(a.validateLight,ba,aa))for(var ja in ba)aa=ba[ja],a.endsWith(ja,"-transition")?this._transitionable.setTransition(ja.slice(0,-11),aa):this._transitionable.setValue(ja,aa)},Y.prototype.updateTransitions=function(ba){this._transitioning=this._transitionable.transitioned(ba,this._transitioning)},
Y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Y.prototype.recalculate=function(ba){this.properties=this._transitioning.possiblyEvaluate(ba)},Y.prototype._validate=function(ba,aa,ja){return(!ja||!1!==ja.validate)&&a.emitValidationErrors(this,ba.call(a.validateStyle,a.extend({value:aa,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},Y}(a.Evented),Ma=function(Db,Y){this.width=Db;this.height=Y;this.nextRow=0;this.data=new Uint8Array(this.width*this.height);this.dashEntry=
{}};Ma.prototype.getDash=function(Db,Y){var ba=Db.join(",")+String(Y);return this.dashEntry[ba]||(this.dashEntry[ba]=this.addDash(Db,Y)),this.dashEntry[ba]};Ma.prototype.getDashRanges=function(Db,Y,ba){Y=[];var aa=!0;Y.push({left:1==Db.length%2?-Db[Db.length-1]*ba:0,right:Db[0]*ba,isDash:aa,zeroLength:0===Db[0]});for(var ja=Db[0],Da=1;Da<Db.length;Da++){var Sa=Db[Da];Y.push({left:ja*ba,right:(ja+=Sa)*ba,isDash:aa=!aa,zeroLength:0===Sa})}return Y};Ma.prototype.addRoundDash=function(Db,Y,ba){Y/=2;for(var aa=
-ba;aa<=ba;aa++)for(var ja=this.width*(this.nextRow+ba+aa),Da=0,Sa=Db[Da],gb=0;gb<this.width;gb++){1<gb/Sa.right&&(Sa=Db[++Da]);var sb=Math.min(Math.abs(gb-Sa.left),Math.abs(gb-Sa.right)),Ob=aa/ba*(Y+1);Sa.isDash?(Ob=Y-Math.abs(Ob),sb=Math.sqrt(sb*sb+Ob*Ob)):sb=Y-Math.sqrt(sb*sb+Ob*Ob);this.data[ja+gb]=Math.max(0,Math.min(255,sb+128))}};Ma.prototype.addRegularDash=function(Db){for(var Y=Db.length-1;0<=Y;--Y){var ba=Db[Y],aa=Db[Y+1];ba.zeroLength?Db.splice(Y,1):aa&&aa.isDash===ba.isDash&&(aa.left=
ba.left,Db.splice(Y,1))}Y=Db[0];ba=Db[Db.length-1];Y.isDash===ba.isDash&&(Y.left=ba.left-this.width,ba.right=Y.right+this.width);Y=this.width*this.nextRow;ba=0;aa=Db[ba];for(var ja=0;ja<this.width;ja++){1<ja/aa.right&&(aa=Db[++ba]);var Da=Math.min(Math.abs(ja-aa.left),Math.abs(ja-aa.right));this.data[Y+ja]=Math.max(0,Math.min(255,(aa.isDash?Da:-Da)+128))}};Ma.prototype.addDash=function(Db,Y){var ba=Y?7:0,aa=2*ba+1;if(this.nextRow+aa>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var ja=
0,Da=0;Da<Db.length;Da++)ja+=Db[Da];0!==ja&&(Da=this.width/ja,Db=this.getDashRanges(Db,this.width,Da),Y?this.addRoundDash(Db,Da,ba):this.addRegularDash(Db));Y={y:(this.nextRow+ba+.5)/this.height,height:2*ba/this.height,width:ja};return this.nextRow+=aa,this.dirty=!0,Y};Ma.prototype.bind=function(Db){Db=Db.gl;this.texture?(Db.bindTexture(Db.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,Db.texSubImage2D(Db.TEXTURE_2D,0,0,0,this.width,this.height,Db.ALPHA,Db.UNSIGNED_BYTE,this.data))):(this.texture=
Db.createTexture(),Db.bindTexture(Db.TEXTURE_2D,this.texture),Db.texParameteri(Db.TEXTURE_2D,Db.TEXTURE_WRAP_S,Db.REPEAT),Db.texParameteri(Db.TEXTURE_2D,Db.TEXTURE_WRAP_T,Db.REPEAT),Db.texParameteri(Db.TEXTURE_2D,Db.TEXTURE_MIN_FILTER,Db.LINEAR),Db.texParameteri(Db.TEXTURE_2D,Db.TEXTURE_MAG_FILTER,Db.LINEAR),Db.texImage2D(Db.TEXTURE_2D,0,Db.ALPHA,this.width,this.height,0,Db.ALPHA,Db.UNSIGNED_BYTE,this.data))};var $a=function aa(Y,ba){this.workerPool=Y;this.actors=[];this.currentActor=0;this.id=a.uniqueId();
Y=this.workerPool.acquire(this.id);for(var ja=0;ja<Y.length;ja++){var Da=new aa.Actor(Y[ja],ba,this.id);Da.name="Worker "+ja;this.actors.push(Da)}};$a.prototype.broadcast=function(Y,ba,aa){a.asyncAll(this.actors,function(ja,Da){ja.send(Y,ba,Da)},aa=aa||function(){})};$a.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]};$a.prototype.remove=function(){this.actors.forEach(function(Y){Y.remove()});this.actors=[];this.workerPool.release(this.id)};
$a.Actor=a.Actor;var lb=function(Y,ba,aa){this.bounds=a.LngLatBounds.convert(this.validateBounds(Y));this.minzoom=ba||0;this.maxzoom=aa||24};lb.prototype.validateBounds=function(Y){return Array.isArray(Y)&&4===Y.length?[Math.max(-180,Y[0]),Math.max(-90,Y[1]),Math.min(180,Y[2]),Math.min(90,Y[3])]:[-180,-90,180,90]};lb.prototype.contains=function(Y){var ba=Math.pow(2,Y.z),aa=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*ba),ja=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*ba),Da=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*
ba);ba=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*ba);return Y.x>=aa&&Y.x<Da&&Y.y>=ja&&Y.y<ba};var Ra=function(Y){function ba(aa,ja,Da,Sa){if(Y.call(this),this.id=aa,this.dispatcher=Da,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(ja,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},ja),this._collectResourceTiming=ja.collectResourceTiming,
512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Sa)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.load=function(){var aa=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=c(this._options,this.map._requestManager,function(ja,Da){aa._tileJSONRequest=null;aa._loaded=!0;ja?aa.fire(new a.ErrorEvent(ja)):Da&&(a.extend(aa,Da),Da.bounds&&(aa.tileBounds=
new lb(Da.bounds,aa.minzoom,aa.maxzoom)),a.postTurnstileEvent(Da.tiles,aa.map._requestManager._customAccessToken),a.postMapLoadEvent(Da.tiles,aa.map._getMapId(),aa.map._requestManager._skuToken,aa.map._requestManager._customAccessToken),aa.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),aa.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},ba.prototype.loaded=function(){return this._loaded},ba.prototype.hasTile=function(aa){return!this.tileBounds||this.tileBounds.contains(aa.canonical)},
ba.prototype.onAdd=function(aa){this.map=aa;this.load()},ba.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},ba.prototype.serialize=function(){return a.extend({},this._options)},ba.prototype.loadTile=function(aa,ja){function Da(gb,sb){return delete aa.request,aa.aborted?ja(null):gb&&404!==gb.status?ja(gb):(sb&&sb.resourceTiming&&(aa.resourceTiming=sb.resourceTiming),this.map._refreshExpiredTiles&&sb&&aa.setExpiryData(sb),aa.loadVectorData(sb,
this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),ja(null),void(aa.reloadCallback&&(this.loadTile(aa,aa.reloadCallback),aa.reloadCallback=null)))}var Sa=this.map._requestManager.normalizeTileURL(aa.tileID.canonical.url(this.tiles,this.scheme));Sa={request:this.map._requestManager.transformRequest(Sa,a.ResourceType.Tile),uid:aa.uid,tileID:aa.tileID,zoom:aa.tileID.overscaledZ,tileSize:this.tileSize*aa.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,
showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Sa.request.collectResourceTiming=this._collectResourceTiming;aa.actor&&"expired"!==aa.state?"loading"===aa.state?aa.reloadCallback=ja:aa.request=aa.actor.send("reloadTile",Sa,Da.bind(this)):(aa.actor=this.dispatcher.getActor(),aa.request=aa.actor.send("loadTile",Sa,Da.bind(this)))},ba.prototype.abortTile=function(aa){aa.request&&(aa.request.cancel(),delete aa.request);aa.actor&&aa.actor.send("abortTile",{uid:aa.uid,type:this.type,
source:this.id},void 0)},ba.prototype.unloadTile=function(aa){aa.unloadVectorData();aa.actor&&aa.actor.send("removeTile",{uid:aa.uid,type:this.type,source:this.id},void 0)},ba.prototype.hasTransition=function(){return!1},ba}(a.Evented),jb=function(Y){function ba(aa,ja,Da,Sa){Y.call(this);this.id=aa;this.dispatcher=Da;this.setEventedParent(Sa);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this._options=a.extend({type:"raster"},
ja);a.extend(this,a.pick(ja,["url","scheme","tileSize"]))}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.load=function(){var aa=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=c(this._options,this.map._requestManager,function(ja,Da){aa._tileJSONRequest=null;aa._loaded=!0;ja?aa.fire(new a.ErrorEvent(ja)):Da&&(a.extend(aa,Da),Da.bounds&&(aa.tileBounds=new lb(Da.bounds,aa.minzoom,aa.maxzoom)),a.postTurnstileEvent(Da.tiles),
a.postMapLoadEvent(Da.tiles,aa.map._getMapId(),aa.map._requestManager._skuToken),aa.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),aa.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},ba.prototype.loaded=function(){return this._loaded},ba.prototype.onAdd=function(aa){this.map=aa;this.load()},ba.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},ba.prototype.serialize=function(){return a.extend({},
this._options)},ba.prototype.hasTile=function(aa){return!this.tileBounds||this.tileBounds.contains(aa.canonical)},ba.prototype.loadTile=function(aa,ja){var Da=this,Sa=this.map._requestManager.normalizeTileURL(aa.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);aa.request=a.getImage(this.map._requestManager.transformRequest(Sa,a.ResourceType.Tile),function(gb,sb){if(delete aa.request,aa.aborted)aa.state="unloaded",ja(null);else if(gb)aa.state="errored",ja(gb);else if(sb){Da.map._refreshExpiredTiles&&
aa.setExpiryData(sb);delete sb.cacheControl;delete sb.expires;gb=Da.map.painter.context;var Ob=gb.gl;aa.texture=Da.map.painter.getTileTexture(sb.width);aa.texture?aa.texture.update(sb,{useMipmap:!0}):(aa.texture=new a.Texture(gb,sb,Ob.RGBA,{useMipmap:!0}),aa.texture.bind(Ob.LINEAR,Ob.CLAMP_TO_EDGE,Ob.LINEAR_MIPMAP_NEAREST),gb.extTextureFilterAnisotropic&&Ob.texParameterf(Ob.TEXTURE_2D,gb.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,gb.extTextureFilterAnisotropicMax));aa.state="loaded";a.cacheEntryPossiblyAdded(Da.dispatcher);
ja(null)}})},ba.prototype.abortTile=function(aa,ja){aa.request&&(aa.request.cancel(),delete aa.request);ja()},ba.prototype.unloadTile=function(aa,ja){aa.texture&&this.map.painter.saveTileTexture(aa.texture);ja()},ba.prototype.hasTransition=function(){return!1},ba}(a.Evented),Xa=function(Y){function ba(aa,ja,Da,Sa){Y.call(this,aa,ja,Da,Sa);this.type="raster-dem";this.maxzoom=22;this._options=a.extend({type:"raster-dem"},ja);this.encoding=ja.encoding||"mapbox"}return Y&&(ba.__proto__=Y),(ba.prototype=
Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},ba.prototype.loadTile=function(aa,ja){function Da(gb,sb){gb&&(aa.state="errored",ja(gb));sb&&(aa.dem=sb,aa.needsHillshadePrepare=!0,aa.state="loaded",ja(null))}var Sa=this.map._requestManager.normalizeTileURL(aa.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);aa.request=a.getImage(this.map._requestManager.transformRequest(Sa,
a.ResourceType.Tile),function(gb,sb){(delete aa.request,aa.aborted)?(aa.state="unloaded",ja(null)):gb?(aa.state="errored",ja(gb)):sb&&(this.map._refreshExpiredTiles&&aa.setExpiryData(sb),delete sb.cacheControl,delete sb.expires,gb=a.window.ImageBitmap&&sb instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?sb:a.browser.getImageData(sb,1),gb={uid:aa.uid,coord:aa.tileID,source:this.id,rawImageData:gb,encoding:this.encoding},aa.actor&&"expired"!==aa.state||(aa.actor=this.dispatcher.getActor(),
aa.actor.send("loadDEMTile",gb,Da.bind(this))))}.bind(this));aa.neighboringTiles=this._getNeighboringTiles(aa.tileID)},ba.prototype._getNeighboringTiles=function(aa){var ja=aa.canonical,Da=Math.pow(2,ja.z),Sa=(ja.x-1+Da)%Da,gb=0===ja.x?aa.wrap-1:aa.wrap,sb=(ja.x+1+Da)%Da,Ob=ja.x+1===Da?aa.wrap+1:aa.wrap,Yb={};return Yb[(new a.OverscaledTileID(aa.overscaledZ,gb,ja.z,Sa,ja.y)).key]={backfilled:!1},Yb[(new a.OverscaledTileID(aa.overscaledZ,Ob,ja.z,sb,ja.y)).key]={backfilled:!1},0<ja.y&&(Yb[(new a.OverscaledTileID(aa.overscaledZ,
gb,ja.z,Sa,ja.y-1)).key]={backfilled:!1},Yb[(new a.OverscaledTileID(aa.overscaledZ,aa.wrap,ja.z,ja.x,ja.y-1)).key]={backfilled:!1},Yb[(new a.OverscaledTileID(aa.overscaledZ,Ob,ja.z,sb,ja.y-1)).key]={backfilled:!1}),ja.y+1<Da&&(Yb[(new a.OverscaledTileID(aa.overscaledZ,gb,ja.z,Sa,ja.y+1)).key]={backfilled:!1},Yb[(new a.OverscaledTileID(aa.overscaledZ,aa.wrap,ja.z,ja.x,ja.y+1)).key]={backfilled:!1},Yb[(new a.OverscaledTileID(aa.overscaledZ,Ob,ja.z,sb,ja.y+1)).key]={backfilled:!1}),Yb},ba.prototype.unloadTile=
function(aa){aa.demTexture&&this.map.painter.saveTileTexture(aa.demTexture);aa.fbo&&(aa.fbo.destroy(),delete aa.fbo);aa.dem&&delete aa.dem;delete aa.neighboringTiles;aa.state="unloaded";aa.actor&&aa.actor.send("removeDEMTile",{uid:aa.uid,source:this.id})},ba}(jb),pb=function(Y){function ba(aa,ja,Da,Sa){Y.call(this);this.id=aa;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this._loaded=this._removed=!1;this.actor=Da.getActor();this.setEventedParent(Sa);
this._data=ja.data;this._options=a.extend({},ja);this._collectResourceTiming=ja.collectResourceTiming;this._resourceTiming=[];void 0!==ja.maxzoom&&(this.maxzoom=ja.maxzoom);ja.type&&(this.type=ja.type);ja.attribution&&(this.attribution=ja.attribution);this.promoteId=ja.promoteId;aa=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:ja.cluster||!1,geojsonVtOptions:{buffer:(void 0!==ja.buffer?ja.buffer:128)*aa,tolerance:(void 0!==ja.tolerance?ja.tolerance:.375)*aa,extent:a.EXTENT,
maxZoom:this.maxzoom,lineMetrics:ja.lineMetrics||!1,generateId:ja.generateId||!1},superclusterOptions:{maxZoom:void 0!==ja.clusterMaxZoom?Math.min(ja.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:a.EXTENT,radius:(ja.clusterRadius||50)*aa,log:!1,generateId:ja.generateId||!1},clusterProperties:ja.clusterProperties},ja.workerOptions)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.load=function(){var aa=this;this.fire(new a.Event("dataloading",
{dataType:"source"}));this._updateWorkerData(function(ja){ja?aa.fire(new a.ErrorEvent(ja)):(ja={dataType:"source",sourceDataType:"metadata"},aa._collectResourceTiming&&aa._resourceTiming&&0<aa._resourceTiming.length&&(ja.resourceTiming=aa._resourceTiming,aa._resourceTiming=[]),aa.fire(new a.Event("data",ja)))})},ba.prototype.onAdd=function(aa){this.map=aa;this.load()},ba.prototype.setData=function(aa){var ja=this;return this._data=aa,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Da){Da?
ja.fire(new a.ErrorEvent(Da)):(Da={dataType:"source",sourceDataType:"content"},ja._collectResourceTiming&&ja._resourceTiming&&0<ja._resourceTiming.length&&(Da.resourceTiming=ja._resourceTiming,ja._resourceTiming=[]),ja.fire(new a.Event("data",Da)))}),this},ba.prototype.getClusterExpansionZoom=function(aa,ja){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:aa,source:this.id},ja),this},ba.prototype.getClusterChildren=function(aa,ja){return this.actor.send("geojson.getClusterChildren",
{clusterId:aa,source:this.id},ja),this},ba.prototype.getClusterLeaves=function(aa,ja,Da,Sa){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:aa,limit:ja,offset:Da},Sa),this},ba.prototype._updateWorkerData=function(aa){var ja=this;this._loaded=!1;var Da=a.extend({},this.workerOptions),Sa=this._data;"string"==typeof Sa?(Da.request=this.map._requestManager.transformRequest(a.browser.resolveURL(Sa),a.ResourceType.Source),Da.request.collectResourceTiming=this._collectResourceTiming):
Da.data=JSON.stringify(Sa);this.actor.send(this.type+".loadData",Da,function(gb,sb){ja._removed||sb&&sb.abandoned||(ja._loaded=!0,sb&&sb.resourceTiming&&sb.resourceTiming[ja.id]&&(ja._resourceTiming=sb.resourceTiming[ja.id].slice(0)),ja.actor.send(ja.type+".coalesce",{source:Da.source},null),aa(gb))})},ba.prototype.loaded=function(){return this._loaded},ba.prototype.loadTile=function(aa,ja){var Da=this,Sa=aa.actor?"reloadTile":"loadTile";aa.actor=this.actor;aa.request=this.actor.send(Sa,{type:this.type,
uid:aa.uid,tileID:aa.tileID,zoom:aa.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(gb,sb){return delete aa.request,aa.unloadVectorData(),aa.aborted?ja(null):gb?ja(gb):(aa.loadVectorData(sb,Da.map.painter,"reloadTile"===Sa),ja(null))})},ba.prototype.abortTile=function(aa){aa.request&&(aa.request.cancel(),delete aa.request);aa.aborted=!0},ba.prototype.unloadTile=
function(aa){aa.unloadVectorData();this.actor.send("removeTile",{uid:aa.uid,type:this.type,source:this.id})},ba.prototype.onRemove=function(){this._removed=!0;this.actor.send("removeSource",{type:this.type,source:this.id})},ba.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},ba.prototype.hasTransition=function(){return!1},ba}(a.Evented),vb=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),zb=
function(Y){function ba(aa,ja,Da,Sa){Y.call(this);this.id=aa;this.dispatcher=Da;this.coordinates=ja.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=512;this.tiles={};this._loaded=!1;this.setEventedParent(Sa);this.options=ja}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.load=function(aa,ja){var Da=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this.url=this.options.url;a.getImage(this.map._requestManager.transformRequest(this.url,
a.ResourceType.Image),function(Sa,gb){Da._loaded=!0;Sa?Da.fire(new a.ErrorEvent(Sa)):gb&&(Da.image=gb,aa&&(Da.coordinates=aa),ja&&ja(),Da._finishLoading())})},ba.prototype.loaded=function(){return this._loaded},ba.prototype.updateImage=function(aa){var ja=this;return this.image&&aa.url?(this.options.url=aa.url,this.load(aa.coordinates,function(){ja.texture=null}),this):this},ba.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",
sourceDataType:"metadata"})))},ba.prototype.onAdd=function(aa){this.map=aa;this.load()},ba.prototype.setCoordinates=function(aa){var ja=this;this.coordinates=aa;aa=aa.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(Da){for(var Sa=1/0,gb=1/0,sb=-1/0,Ob=-1/0,Yb=0;Yb<Da.length;Yb+=1){var cc=Da[Yb];Sa=Math.min(Sa,cc.x);gb=Math.min(gb,cc.y);sb=Math.max(sb,cc.x);Ob=Math.max(Ob,cc.y)}Da=Math.max(0,Math.floor(-Math.log(Math.max(sb-Sa,Ob-gb))/Math.LN2));Yb=Math.pow(2,Da);return new a.CanonicalTileID(Da,
Math.floor((Sa+sb)/2*Yb),Math.floor((gb+Ob)/2*Yb))}(aa);this.minzoom=this.maxzoom=this.tileID.z;aa=aa.map(function(Da){return ja.tileID.getTilePoint(Da)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(aa[0].x,aa[0].y,0,0),this._boundsArray.emplaceBack(aa[1].x,aa[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(aa[3].x,aa[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(aa[2].x,aa[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),
this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},ba.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var aa=this.map.painter.context,ja=aa.gl,Da;for(Da in this.boundsBuffer||(this.boundsBuffer=aa.createVertexBuffer(this._boundsArray,vb.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(aa,this.image,ja.RGBA),this.texture.bind(ja.LINEAR,ja.CLAMP_TO_EDGE)),
this.tiles)aa=this.tiles[Da],"loaded"!==aa.state&&(aa.state="loaded",aa.texture=this.texture)}},ba.prototype.loadTile=function(aa,ja){this.tileID&&this.tileID.equals(aa.tileID.canonical)?(this.tiles[String(aa.tileID.wrap)]=aa,aa.buckets={},ja(null)):(aa.state="errored",ja(null))},ba.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},ba.prototype.hasTransition=function(){return!1},ba}(a.Evented),Jb=function(Y){function ba(aa,ja,Da,Sa){Y.call(this,
aa,ja,Da,Sa);this.roundZoom=!0;this.type="video";this.options=ja}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.load=function(){var aa=this;this._loaded=!1;var ja=this.options;this.urls=[];var Da=0;for(ja=ja.urls;Da<ja.length;Da+=1)this.urls.push(this.map._requestManager.transformRequest(ja[Da],a.ResourceType.Source).url);a.getVideo(this.urls,function(Sa,gb){aa._loaded=!0;Sa?aa.fire(new a.ErrorEvent(Sa)):gb&&(aa.video=gb,aa.video.loop=!0,aa.video.addEventListener("playing",
function(){aa.map.triggerRepaint()}),aa.map&&aa.video.play(),aa._finishLoading())})},ba.prototype.pause=function(){this.video&&this.video.pause()},ba.prototype.play=function(){this.video&&this.video.play()},ba.prototype.seek=function(aa){if(this.video){var ja=this.video.seekable;aa<ja.start(0)||aa>ja.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ja.start(0)+" and "+ja.end(0)+"-second mark."))):this.video.currentTime=
aa}},ba.prototype.getVideo=function(){return this.video},ba.prototype.onAdd=function(aa){this.map||(this.map=aa,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},ba.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var aa=this.map.painter.context,ja=aa.gl,Da;for(Da in this.boundsBuffer||(this.boundsBuffer=aa.createVertexBuffer(this._boundsArray,vb.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,
0,4,2)),this.texture?this.video.paused||(this.texture.bind(ja.LINEAR,ja.CLAMP_TO_EDGE),ja.texSubImage2D(ja.TEXTURE_2D,0,0,0,ja.RGBA,ja.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(aa,this.video,ja.RGBA),this.texture.bind(ja.LINEAR,ja.CLAMP_TO_EDGE)),this.tiles)aa=this.tiles[Da],"loaded"!==aa.state&&(aa.state="loaded",aa.texture=this.texture)}},ba.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},ba.prototype.hasTransition=function(){return this.video&&
!this.video.paused},ba}(zb),Zb=function(Y){function ba(aa,ja,Da,Sa){Y.call(this,aa,ja,Da,Sa);ja.coordinates?Array.isArray(ja.coordinates)&&4===ja.coordinates.length&&!ja.coordinates.some(function(gb){return!Array.isArray(gb)||2!==gb.length||gb.some(function(sb){return"number"!=typeof sb})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+aa,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+
aa,null,'missing required property "coordinates"')));ja.animate&&"boolean"!=typeof ja.animate&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+aa,null,'optional "animate" property must be a boolean value')));ja.canvas?"string"==typeof ja.canvas||ja.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+aa,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):
this.fire(new a.ErrorEvent(new a.ValidationError("sources."+aa,null,'missing required property "canvas"')));this.options=ja;this.animate=void 0===ja.animate||ja.animate}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.load=function(){this._loaded=!0;this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas));this.width=this.canvas.width;this.height=
this.canvas.height;this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0;this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},ba.prototype.getCanvas=function(){return this.canvas},ba.prototype.onAdd=function(aa){this.map=aa;this.load();this.canvas&&this.animate&&this.play()},ba.prototype.onRemove=function(){this.pause()},
ba.prototype.prepare=function(){var aa=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,aa=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,aa=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var ja=this.map.painter.context,Da=ja.gl,Sa;for(Sa in this.boundsBuffer||(this.boundsBuffer=ja.createVertexBuffer(this._boundsArray,vb.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(aa||this._playing)&&
this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(ja,this.canvas,Da.RGBA,{premultiply:!0}),this.tiles)aa=this.tiles[Sa],"loaded"!==aa.state&&(aa.state="loaded",aa.texture=this.texture)}},ba.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},ba.prototype.hasTransition=function(){return this._playing},ba.prototype._hasInvalidDimensions=function(){for(var aa=0,ja=[this.canvas.width,this.canvas.height];aa<ja.length;aa+=1){var Da=ja[aa];if(isNaN(Da)||
0>=Da)return!0}return!1},ba}(zb),pc={vector:Ra,raster:jb,"raster-dem":Xa,geojson:pb,video:Jb,image:zb,canvas:Zb},Ac=function(Y,ba){this.max=Y;this.onRemove=ba;this.reset()};Ac.prototype.reset=function(){for(var Y in this.data)for(var ba=0,aa=this.data[Y];ba<aa.length;ba+=1){var ja=aa[ba];ja.timeout&&clearTimeout(ja.timeout);this.onRemove(ja.value)}return this.data={},this.order=[],this};Ac.prototype.add=function(Y,ba,aa){var ja=this,Da=Y.wrapped().key;void 0===this.data[Da]&&(this.data[Da]=[]);var Sa=
{value:ba,timeout:void 0};(void 0!==aa&&(Sa.timeout=setTimeout(function(){ja.remove(Y,Sa)},aa)),this.data[Da].push(Sa),this.order.push(Da),this.order.length>this.max)&&(ba=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(ba);return this};Ac.prototype.has=function(Y){return Y.wrapped().key in this.data};Ac.prototype.getAndRemove=function(Y){return this.has(Y)?this._getAndRemoveByKey(Y.wrapped().key):null};Ac.prototype._getAndRemoveByKey=function(Y){var ba=this.data[Y].shift();return ba.timeout&&
clearTimeout(ba.timeout),0===this.data[Y].length&&delete this.data[Y],this.order.splice(this.order.indexOf(Y),1),ba.value};Ac.prototype.getByKey=function(Y){return(Y=this.data[Y])?Y[0].value:null};Ac.prototype.get=function(Y){return this.has(Y)?this.data[Y.wrapped().key][0].value:null};Ac.prototype.remove=function(Y,ba){if(!this.has(Y))return this;Y=Y.wrapped().key;ba=void 0===ba?0:this.data[Y].indexOf(ba);var aa=this.data[Y][ba];return this.data[Y].splice(ba,1),aa.timeout&&clearTimeout(aa.timeout),
0===this.data[Y].length&&delete this.data[Y],this.onRemove(aa.value),this.order.splice(this.order.indexOf(Y),1),this};Ac.prototype.setMaxSize=function(Y){for(this.max=Y;this.order.length>this.max;)(Y=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(Y);return this};Ac.prototype.filter=function(Y){var ba=[];for(Sa in this.data)for(var aa=0,ja=this.data[Sa];aa<ja.length;aa+=1){var Da=ja[aa];Y(Da.value)||ba.push(Da)}for(Y=0;Y<ba.length;Y+=1){var Sa=ba[Y];this.remove(Sa.value.tileID,Sa)}};var ed=
function(Y,ba,aa){this.context=Y;var ja=Y.gl;this.buffer=ja.createBuffer();this.dynamicDraw=!!aa;this.context.unbindVAO();Y.bindElementBuffer.set(this.buffer);ja.bufferData(ja.ELEMENT_ARRAY_BUFFER,ba.arrayBuffer,this.dynamicDraw?ja.DYNAMIC_DRAW:ja.STATIC_DRAW);this.dynamicDraw||delete ba.arrayBuffer};ed.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)};ed.prototype.updateData=function(Y){var ba=this.context.gl;this.context.unbindVAO();this.bind();ba.bufferSubData(ba.ELEMENT_ARRAY_BUFFER,
0,Y.arrayBuffer)};ed.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Rc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},id=function(Y,ba,aa,ja){this.length=ba.length;this.attributes=aa;this.itemSize=ba.bytesPerElement;this.dynamicDraw=ja;this.context=Y;aa=Y.gl;this.buffer=aa.createBuffer();Y.bindVertexBuffer.set(this.buffer);aa.bufferData(aa.ARRAY_BUFFER,ba.arrayBuffer,
this.dynamicDraw?aa.DYNAMIC_DRAW:aa.STATIC_DRAW);this.dynamicDraw||delete ba.arrayBuffer};id.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)};id.prototype.updateData=function(Y){var ba=this.context.gl;this.bind();ba.bufferSubData(ba.ARRAY_BUFFER,0,Y.arrayBuffer)};id.prototype.enableAttributes=function(Y,ba){for(var aa=0;aa<this.attributes.length;aa++){var ja=ba.attributes[this.attributes[aa].name];void 0!==ja&&Y.enableVertexAttribArray(ja)}};id.prototype.setVertexAttribPointers=
function(Y,ba,aa){for(var ja=0;ja<this.attributes.length;ja++){var Da=this.attributes[ja],Sa=ba.attributes[Da.name];void 0!==Sa&&Y.vertexAttribPointer(Sa,Da.components,Y[Rc[Da.type]],!1,this.itemSize,Da.offset+this.itemSize*(aa||0))}};id.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Tc=function(Y){this.gl=Y.gl;this.current=this.default=this.getDefault();this.dirty=!1};Tc.prototype.get=function(){return this.current};Tc.prototype.set=
function(Y){};Tc.prototype.getDefault=function(){return this.default};Tc.prototype.setDefault=function(){this.set(this.default)};var wd=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return a.Color.transparent},ba.prototype.set=function(aa){var ja=this.current;(aa.r!==ja.r||aa.g!==ja.g||aa.b!==ja.b||aa.a!==ja.a||this.dirty)&&(this.gl.clearColor(aa.r,aa.g,aa.b,aa.a),this.current=
aa,this.dirty=!1)},ba}(Tc),Fb=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return 1},ba.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.clearDepth(aa),this.current=aa,this.dirty=!1)},ba}(Tc),ac=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=
function(){return 0},ba.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.clearStencil(aa),this.current=aa,this.dirty=!1)},ba}(Tc),Jc=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return[!0,!0,!0,!0]},ba.prototype.set=function(aa){var ja=this.current;(aa[0]!==ja[0]||aa[1]!==ja[1]||aa[2]!==ja[2]||aa[3]!==ja[3]||this.dirty)&&(this.gl.colorMask(aa[0],aa[1],
aa[2],aa[3]),this.current=aa,this.dirty=!1)},ba}(Tc),qc=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return!0},ba.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.depthMask(aa),this.current=aa,this.dirty=!1)},ba}(Tc),tc=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=
ba,ba.prototype.getDefault=function(){return 255},ba.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.stencilMask(aa),this.current=aa,this.dirty=!1)},ba}(Tc),vc=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},ba.prototype.set=function(aa){var ja=this.current;(aa.func!==ja.func||aa.ref!==ja.ref||aa.mask!==ja.mask||
this.dirty)&&(this.gl.stencilFunc(aa.func,aa.ref,aa.mask),this.current=aa,this.dirty=!1)},ba}(Tc),xb=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){var aa=this.gl;return[aa.KEEP,aa.KEEP,aa.KEEP]},ba.prototype.set=function(aa){var ja=this.current;(aa[0]!==ja[0]||aa[1]!==ja[1]||aa[2]!==ja[2]||this.dirty)&&(this.gl.stencilOp(aa[0],aa[1],aa[2]),this.current=aa,this.dirty=!1)},ba}(Tc),
Ab=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return!1},ba.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;aa?ja.enable(ja.STENCIL_TEST):ja.disable(ja.STENCIL_TEST);this.current=aa;this.dirty=!1}},ba}(Tc),jc=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,
ba.prototype.getDefault=function(){return[0,1]},ba.prototype.set=function(aa){var ja=this.current;(aa[0]!==ja[0]||aa[1]!==ja[1]||this.dirty)&&(this.gl.depthRange(aa[0],aa[1]),this.current=aa,this.dirty=!1)},ba}(Tc),Bc=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return!1},ba.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;aa?ja.enable(ja.DEPTH_TEST):
ja.disable(ja.DEPTH_TEST);this.current=aa;this.dirty=!1}},ba}(Tc),Ic=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return this.gl.LESS},ba.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.depthFunc(aa),this.current=aa,this.dirty=!1)},ba}(Tc),ec=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=
ba,ba.prototype.getDefault=function(){return!1},ba.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;aa?ja.enable(ja.BLEND):ja.disable(ja.BLEND);this.current=aa;this.dirty=!1}},ba}(Tc),ic=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){var aa=this.gl;return[aa.ONE,aa.ZERO]},ba.prototype.set=function(aa){var ja=this.current;(aa[0]!==ja[0]||aa[1]!==ja[1]||
this.dirty)&&(this.gl.blendFunc(aa[0],aa[1]),this.current=aa,this.dirty=!1)},ba}(Tc),Gb=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return a.Color.transparent},ba.prototype.set=function(aa){var ja=this.current;(aa.r!==ja.r||aa.g!==ja.g||aa.b!==ja.b||aa.a!==ja.a||this.dirty)&&(this.gl.blendColor(aa.r,aa.g,aa.b,aa.a),this.current=aa,this.dirty=!1)},ba}(Tc),yb=function(Y){function ba(){Y.apply(this,
arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return this.gl.FUNC_ADD},ba.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.blendEquation(aa),this.current=aa,this.dirty=!1)},ba}(Tc),Eb=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return!1},ba.prototype.set=function(aa){if(aa!==
this.current||this.dirty){var ja=this.gl;aa?ja.enable(ja.CULL_FACE):ja.disable(ja.CULL_FACE);this.current=aa;this.dirty=!1}},ba}(Tc),Lb=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return this.gl.BACK},ba.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.cullFace(aa),this.current=aa,this.dirty=!1)},ba}(Tc),fc=function(Y){function ba(){Y.apply(this,arguments)}
return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return this.gl.CCW},ba.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.frontFace(aa),this.current=aa,this.dirty=!1)},ba}(Tc),Oc=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return null},ba.prototype.set=function(aa){(aa!==this.current||
this.dirty)&&(this.gl.useProgram(aa),this.current=aa,this.dirty=!1)},ba}(Tc),xc=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return this.gl.TEXTURE0},ba.prototype.set=function(aa){(aa!==this.current||this.dirty)&&(this.gl.activeTexture(aa),this.current=aa,this.dirty=!1)},ba}(Tc),Mc=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=
Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){var aa=this.gl;return[0,0,aa.drawingBufferWidth,aa.drawingBufferHeight]},ba.prototype.set=function(aa){var ja=this.current;(aa[0]!==ja[0]||aa[1]!==ja[1]||aa[2]!==ja[2]||aa[3]!==ja[3]||this.dirty)&&(this.gl.viewport(aa[0],aa[1],aa[2],aa[3]),this.current=aa,this.dirty=!1)},ba}(Tc),dd=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,
ba.prototype.getDefault=function(){return null},ba.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;ja.bindFramebuffer(ja.FRAMEBUFFER,aa);this.current=aa;this.dirty=!1}},ba}(Tc),bd=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return null},ba.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;ja.bindRenderbuffer(ja.RENDERBUFFER,
aa);this.current=aa;this.dirty=!1}},ba}(Tc),qd=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return null},ba.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;ja.bindTexture(ja.TEXTURE_2D,aa);this.current=aa;this.dirty=!1}},ba}(Tc),Bd=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=
ba,ba.prototype.getDefault=function(){return null},ba.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;ja.bindBuffer(ja.ARRAY_BUFFER,aa);this.current=aa;this.dirty=!1}},ba}(Tc),md=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return null},ba.prototype.set=function(aa){var ja=this.gl;ja.bindBuffer(ja.ELEMENT_ARRAY_BUFFER,aa);this.current=aa;this.dirty=
!1},ba}(Tc),Fd=function(Y){function ba(aa){Y.call(this,aa);this.vao=aa.extVertexArrayObject}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return null},ba.prototype.set=function(aa){this.vao&&(aa!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(aa),this.current=aa,this.dirty=!1)},ba}(Tc),Od=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=
ba,ba.prototype.getDefault=function(){return 4},ba.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;ja.pixelStorei(ja.UNPACK_ALIGNMENT,aa);this.current=aa;this.dirty=!1}},ba}(Tc),sd=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return!1},ba.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;ja.pixelStorei(ja.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
aa);this.current=aa;this.dirty=!1}},ba}(Tc),cd=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return!1},ba.prototype.set=function(aa){if(aa!==this.current||this.dirty){var ja=this.gl;ja.pixelStorei(ja.UNPACK_FLIP_Y_WEBGL,aa);this.current=aa;this.dirty=!1}},ba}(Tc),Gd=function(Y){function ba(aa,ja){Y.call(this,aa);this.context=aa;this.parent=ja}return Y&&(ba.__proto__=Y),(ba.prototype=
Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getDefault=function(){return null},ba}(Tc),Nd=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.setDirty=function(){this.dirty=!0},ba.prototype.set=function(aa){if(aa!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ja=this.gl;ja.framebufferTexture2D(ja.FRAMEBUFFER,ja.COLOR_ATTACHMENT0,ja.TEXTURE_2D,aa,0);this.current=
aa;this.dirty=!1}},ba}(Gd),Pd=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.set=function(aa){if(aa!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var ja=this.gl;ja.framebufferRenderbuffer(ja.FRAMEBUFFER,ja.DEPTH_ATTACHMENT,ja.RENDERBUFFER,aa);this.current=aa;this.dirty=!1}},ba}(Gd),Ke=function(Y,ba,aa,ja){this.context=Y;this.width=ba;this.height=aa;ba=this.framebuffer=
Y.gl.createFramebuffer();this.colorAttachment=new Nd(Y,ba);ja&&(this.depthAttachment=new Pd(Y,ba))};Ke.prototype.destroy=function(){var Y=this.context.gl,ba=this.colorAttachment.get();(ba&&Y.deleteTexture(ba),this.depthAttachment)&&(ba=this.depthAttachment.get())&&Y.deleteRenderbuffer(ba);Y.deleteFramebuffer(this.framebuffer)};var Wd=function(Y,ba,aa){this.func=Y;this.mask=ba;this.range=aa};Wd.ReadOnly=!1;Wd.ReadWrite=!0;Wd.disabled=new Wd(519,Wd.ReadOnly,[0,1]);var Wc=function(Y,ba,aa,ja,Da,Sa){this.test=
Y;this.ref=ba;this.mask=aa;this.fail=ja;this.depthFail=Da;this.pass=Sa};Wc.disabled=new Wc({func:519,mask:0},0,0,7680,7680,7680);var rd=function(Y,ba,aa){this.blendFunction=Y;this.blendColor=ba;this.mask=aa};rd.disabled=new rd(rd.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]);rd.unblended=new rd(rd.Replace,a.Color.transparent,[!0,!0,!0,!0]);rd.alphaBlended=new rd([1,771],a.Color.transparent,[!0,!0,!0,!0]);var Kd=function(Y,ba,aa){this.enable=Y;this.mode=ba;this.frontFace=aa};Kd.disabled=new Kd(!1,
1029,2305);Kd.backCCW=new Kd(!0,1029,2305);var Rd=function(Y){this.gl=Y;this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object");this.clearColor=new wd(this);this.clearDepth=new Fb(this);this.clearStencil=new ac(this);this.colorMask=new Jc(this);this.depthMask=new qc(this);this.stencilMask=new tc(this);this.stencilFunc=new vc(this);this.stencilOp=new xb(this);this.stencilTest=new Ab(this);this.depthRange=new jc(this);this.depthTest=new Bc(this);this.depthFunc=new Ic(this);this.blend=
new ec(this);this.blendFunc=new ic(this);this.blendColor=new Gb(this);this.blendEquation=new yb(this);this.cullFace=new Eb(this);this.cullFaceSide=new Lb(this);this.frontFace=new fc(this);this.program=new Oc(this);this.activeTexture=new xc(this);this.viewport=new Mc(this);this.bindFramebuffer=new dd(this);this.bindRenderbuffer=new bd(this);this.bindTexture=new qd(this);this.bindVertexBuffer=new Bd(this);this.bindElementBuffer=new md(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new Fd(this);
this.pixelStoreUnpack=new Od(this);this.pixelStoreUnpackPremultiplyAlpha=new sd(this);this.pixelStoreUnpackFlipY=new cd(this);(this.extTextureFilterAnisotropic=Y.getExtension("EXT_texture_filter_anisotropic")||Y.getExtension("MOZ_EXT_texture_filter_anisotropic")||Y.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))&&(this.extTextureFilterAnisotropicMax=Y.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT));(this.extTextureHalfFloat=Y.getExtension("OES_texture_half_float"))&&
(Y.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=Y.getExtension("EXT_color_buffer_half_float"));this.extTimerQuery=Y.getExtension("EXT_disjoint_timer_query")};Rd.prototype.setDefault=function(){this.unbindVAO();this.clearColor.setDefault();this.clearDepth.setDefault();this.clearStencil.setDefault();this.colorMask.setDefault();this.depthMask.setDefault();this.stencilMask.setDefault();this.stencilFunc.setDefault();this.stencilOp.setDefault();this.stencilTest.setDefault();
this.depthRange.setDefault();this.depthTest.setDefault();this.depthFunc.setDefault();this.blend.setDefault();this.blendFunc.setDefault();this.blendColor.setDefault();this.blendEquation.setDefault();this.cullFace.setDefault();this.cullFaceSide.setDefault();this.frontFace.setDefault();this.program.setDefault();this.activeTexture.setDefault();this.bindFramebuffer.setDefault();this.pixelStoreUnpack.setDefault();this.pixelStoreUnpackPremultiplyAlpha.setDefault();this.pixelStoreUnpackFlipY.setDefault()};
Rd.prototype.setDirty=function(){this.clearColor.dirty=!0;this.clearDepth.dirty=!0;this.clearStencil.dirty=!0;this.colorMask.dirty=!0;this.depthMask.dirty=!0;this.stencilMask.dirty=!0;this.stencilFunc.dirty=!0;this.stencilOp.dirty=!0;this.stencilTest.dirty=!0;this.depthRange.dirty=!0;this.depthTest.dirty=!0;this.depthFunc.dirty=!0;this.blend.dirty=!0;this.blendFunc.dirty=!0;this.blendColor.dirty=!0;this.blendEquation.dirty=!0;this.cullFace.dirty=!0;this.cullFaceSide.dirty=!0;this.frontFace.dirty=
!0;this.program.dirty=!0;this.activeTexture.dirty=!0;this.viewport.dirty=!0;this.bindFramebuffer.dirty=!0;this.bindRenderbuffer.dirty=!0;this.bindTexture.dirty=!0;this.bindVertexBuffer.dirty=!0;this.bindElementBuffer.dirty=!0;this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0);this.pixelStoreUnpack.dirty=!0;this.pixelStoreUnpackPremultiplyAlpha.dirty=!0;this.pixelStoreUnpackFlipY.dirty=!0};Rd.prototype.createIndexBuffer=function(Y,ba){return new ed(this,Y,ba)};Rd.prototype.createVertexBuffer=
function(Y,ba,aa){return new id(this,Y,ba,aa)};Rd.prototype.createRenderbuffer=function(Y,ba,aa){var ja=this.gl,Da=ja.createRenderbuffer();return this.bindRenderbuffer.set(Da),ja.renderbufferStorage(ja.RENDERBUFFER,Y,ba,aa),this.bindRenderbuffer.set(null),Da};Rd.prototype.createFramebuffer=function(Y,ba,aa){return new Ke(this,Y,ba,aa)};Rd.prototype.clear=function(Y){var ba=Y.color;Y=Y.depth;var aa=this.gl,ja=0;ba&&(ja|=aa.COLOR_BUFFER_BIT,this.clearColor.set(ba),this.colorMask.set([!0,!0,!0,!0]));
void 0!==Y&&(ja|=aa.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(Y),this.depthMask.set(!0));aa.clear(ja)};Rd.prototype.setCullFace=function(Y){!1===Y.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(Y.mode),this.frontFace.set(Y.frontFace))};Rd.prototype.setDepthMode=function(Y){Y.func!==this.gl.ALWAYS||Y.mask?(this.depthTest.set(!0),this.depthFunc.set(Y.func),this.depthMask.set(Y.mask),this.depthRange.set(Y.range)):this.depthTest.set(!1)};Rd.prototype.setStencilMode=
function(Y){Y.test.func!==this.gl.ALWAYS||Y.mask?(this.stencilTest.set(!0),this.stencilMask.set(Y.mask),this.stencilOp.set([Y.fail,Y.depthFail,Y.pass]),this.stencilFunc.set({func:Y.test.func,ref:Y.ref,mask:Y.test.mask})):this.stencilTest.set(!1)};Rd.prototype.setColorMode=function(Y){a.deepEqual(Y.blendFunction,rd.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(Y.blendFunction),this.blendColor.set(Y.blendColor));this.colorMask.set(Y.mask)};Rd.prototype.unbindVAO=function(){this.extVertexArrayObject&&
this.bindVertexArrayOES.set(null)};var se=function(Y){function ba(aa,ja,Da){var Sa=this;Y.call(this);this.id=aa;this.dispatcher=Da;this.on("data",function(gb){"source"===gb.dataType&&"metadata"===gb.sourceDataType&&(Sa._sourceLoaded=!0);Sa._sourceLoaded&&!Sa._paused&&"source"===gb.dataType&&"content"===gb.sourceDataType&&(Sa.reload(),Sa.transform&&Sa.update(Sa.transform))});this.on("error",function(){Sa._sourceErrored=!0});this._source=function(gb,sb,Ob,Yb){sb=new pc[sb.type](gb,sb,Ob,Yb);if(sb.id!==
gb)throw Error("Expected Source id to be "+gb+" instead of "+sb.id);return a.bindAll(["load","abort","unload","serialize","prepare"],sb),sb}(aa,ja,Da,this);this._tiles={};this._cache=new Ac(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._loadedParentTiles={};this._coveredTiles={};this._state=new a.SourceFeatureState}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.onAdd=function(aa){this._maxTileCacheSize=
(this.map=aa)?aa._maxTileCacheSize:null;this._source&&this._source.onAdd&&this._source.onAdd(aa)},ba.prototype.onRemove=function(aa){this._source&&this._source.onRemove&&this._source.onRemove(aa)},ba.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var aa in this._tiles){var ja=this._tiles[aa];if("loaded"!==ja.state&&"errored"!==ja.state)return!1}return!0},ba.prototype.getSource=function(){return this._source},ba.prototype.pause=
function(){this._paused=!0},ba.prototype.resume=function(){if(this._paused){var aa=this._shouldReloadOnResume;this._shouldReloadOnResume=this._paused=!1;aa&&this.reload();this.transform&&this.update(this.transform)}},ba.prototype._loadTile=function(aa,ja){return this._source.loadTile(aa,ja)},ba.prototype._unloadTile=function(aa){if(this._source.unloadTile)return this._source.unloadTile(aa,function(){})},ba.prototype._abortTile=function(aa){if(this._source.abortTile)return this._source.abortTile(aa,
function(){})},ba.prototype.serialize=function(){return this._source.serialize()},ba.prototype.prepare=function(aa){for(var ja in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var Da=this._tiles[ja];Da.upload(aa);Da.prepare(this.map.style.imageManager)}},ba.prototype.getIds=function(){return a.values(this._tiles).map(function(aa){return aa.tileID}).sort(t).map(function(aa){return aa.key})},ba.prototype.getRenderableIds=
function(aa){var ja=this,Da=[],Sa;for(Sa in this._tiles)this._isIdRenderable(Sa,aa)&&Da.push(this._tiles[Sa]);return aa?Da.sort(function(gb,sb){gb=gb.tileID;sb=sb.tileID;var Ob=(new a.Point(gb.canonical.x,gb.canonical.y))._rotate(ja.transform.angle),Yb=(new a.Point(sb.canonical.x,sb.canonical.y))._rotate(ja.transform.angle);return gb.overscaledZ-sb.overscaledZ||Yb.y-Ob.y||Yb.x-Ob.x}).map(function(gb){return gb.tileID.key}):Da.map(function(gb){return gb.tileID}).sort(t).map(function(gb){return gb.key})},
ba.prototype.hasRenderableParent=function(aa){aa=this.findLoadedParent(aa,0);return!!aa&&this._isIdRenderable(aa.tileID.key)},ba.prototype._isIdRenderable=function(aa,ja){return this._tiles[aa]&&this._tiles[aa].hasData()&&!this._coveredTiles[aa]&&(ja||!this._tiles[aa].holdingForFade())},ba.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var aa in this._cache.reset(),this._tiles)"errored"!==this._tiles[aa].state&&this._reloadTile(aa,"reloading")},ba.prototype._reloadTile=
function(aa,ja){var Da=this._tiles[aa];Da&&("loading"!==Da.state&&(Da.state=ja),this._loadTile(Da,this._tileLoaded.bind(this,Da,aa,ja)))},ba.prototype._tileLoaded=function(aa,ja,Da,Sa){if(Sa)return aa.state="errored",void(404!==Sa.status?this._source.fire(new a.ErrorEvent(Sa,{tile:aa})):this.update(this.transform));aa.timeAdded=a.browser.now();"expired"===Da&&(aa.refreshedUponExpiration=!0);this._setTileReloadTimer(ja,aa);"raster-dem"===this.getSource().type&&aa.dem&&this._backfillDEM(aa);this._state.initializeTileState(aa,
this.map?this.map.painter:null);this._source.fire(new a.Event("data",{dataType:"source",tile:aa,coord:aa.tileID}))},ba.prototype._backfillDEM=function(aa){function ja(sb,Ob){sb.needsHillshadePrepare=!0;var Yb=Ob.tileID.canonical.x-sb.tileID.canonical.x,cc=Ob.tileID.canonical.y-sb.tileID.canonical.y,Nc=Math.pow(2,sb.tileID.canonical.z),Lc=Ob.tileID.key;0===Yb&&0===cc||1<Math.abs(cc)||(1<Math.abs(Yb)&&(1===Math.abs(Yb+Nc)?Yb+=Nc:1===Math.abs(Yb-Nc)&&(Yb-=Nc)),Ob.dem&&sb.dem&&(sb.dem.backfillBorder(Ob.dem,
Yb,cc),sb.neighboringTiles&&sb.neighboringTiles[Lc]&&(sb.neighboringTiles[Lc].backfilled=!0)))}for(var Da=this.getRenderableIds(),Sa=0;Sa<Da.length;Sa++){var gb=Da[Sa];aa.neighboringTiles&&aa.neighboringTiles[gb]&&(gb=this.getTileByID(gb),ja(aa,gb),ja(gb,aa))}},ba.prototype.getTile=function(aa){return this.getTileByID(aa.key)},ba.prototype.getTileByID=function(aa){return this._tiles[aa]},ba.prototype._retainLoadedChildren=function(aa,ja,Da,Sa){for(var gb in this._tiles){var sb=this._tiles[gb];if(!(Sa[gb]||
!sb.hasData()||sb.tileID.overscaledZ<=ja||sb.tileID.overscaledZ>Da)){for(var Ob=sb.tileID;sb&&sb.tileID.overscaledZ>ja+1;){var Yb=sb.tileID.scaledTo(sb.tileID.overscaledZ-1);(sb=this._tiles[Yb.key])&&sb.hasData()&&(Ob=Yb)}for(sb=Ob;sb.overscaledZ>ja;)if(aa[(sb=sb.scaledTo(sb.overscaledZ-1)).key]){Sa[Ob.key]=Ob;break}}}},ba.prototype.findLoadedParent=function(aa,ja){if(aa.key in this._loadedParentTiles)return(aa=this._loadedParentTiles[aa.key])&&aa.tileID.overscaledZ>=ja?aa:null;for(var Da=aa.overscaledZ-
1;Da>=ja;Da--){var Sa=aa.scaledTo(Da);if(Sa=this._getLoadedTile(Sa))return Sa}},ba.prototype._getLoadedTile=function(aa){var ja=this._tiles[aa.key];return ja&&ja.hasData()?ja:this._cache.getByKey(aa.wrapped().key)},ba.prototype.updateCacheSize=function(aa){aa=Math.floor((Math.ceil(aa.width/this._source.tileSize)+1)*(Math.ceil(aa.height/this._source.tileSize)+1)*5);this._cache.setMaxSize("number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,aa):aa)},ba.prototype.handleWrapJump=function(aa){var ja=
Math.round((aa-(void 0===this._prevLng?aa:this._prevLng))/360);if(this._prevLng=aa,ja){aa={};for(var Da in this._tiles){var Sa=this._tiles[Da];Sa.tileID=Sa.tileID.unwrapTo(Sa.tileID.wrap+ja);aa[Sa.tileID.key]=Sa}for(var gb in this._tiles=aa,this._timers)clearTimeout(this._timers[gb]),delete this._timers[gb];for(var sb in this._tiles)this._setTileReloadTimer(sb,this._tiles[sb])}},ba.prototype.update=function(aa){var ja=this;if(this.transform=aa,this._sourceLoaded&&!this._paused){var Da;this.updateCacheSize(aa);
this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};this.used?this._source.tileID?Da=aa.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(bc){return new a.OverscaledTileID(bc.canonical.z,bc.wrap,bc.canonical.z,bc.canonical.x,bc.canonical.y)}):(Da=aa.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Da=Da.filter(function(bc){return ja._source.hasTile(bc)}))):
Da=[];aa=aa.coveringZoomLevel(this._source);var Sa=Math.max(aa-ba.maxOverzooming,this._source.minzoom),gb=Math.max(aa+ba.maxUnderzooming,this._source.minzoom);Da=this._updateRetainedTiles(Da,aa);if(u(this._source.type)){for(var sb={},Ob={},Yb=0,cc=Object.keys(Da);Yb<cc.length;Yb+=1){var Nc=cc[Yb],Lc=Da[Nc],Cc=this._tiles[Nc];!Cc||Cc.fadeEndTime&&Cc.fadeEndTime<=a.browser.now()||((Cc=this.findLoadedParent(Lc,Sa))&&(this._addTile(Cc.tileID),sb[Cc.tileID.key]=Cc.tileID),Ob[Nc]=Lc)}for(var Kc in this._retainLoadedChildren(Ob,
aa,gb,Da),sb)Da[Kc]||(this._coveredTiles[Kc]=!0,Da[Kc]=sb[Kc])}for(var Hc in Da)this._tiles[Hc].clearFadeHold();Kc=0;for(Hc=a.keysDifference(this._tiles,Da);Kc<Hc.length;Kc+=1)aa=Hc[Kc],Sa=this._tiles[aa],Sa.hasSymbolBuckets&&!Sa.holdingForFade()?Sa.setHoldDuration(this.map._fadeDuration):Sa.hasSymbolBuckets&&!Sa.symbolFadeFinished()||this._removeTile(aa);this._updateLoadedParentTileCache()}},ba.prototype.releaseSymbolFadeTiles=function(){for(var aa in this._tiles)this._tiles[aa].holdingForFade()&&
this._removeTile(aa)},ba.prototype._updateRetainedTiles=function(aa,ja){for(var Da={},Sa={},gb=Math.max(ja-ba.maxOverzooming,this._source.minzoom),sb=Math.max(ja+ba.maxUnderzooming,this._source.minzoom),Ob={},Yb=0;Yb<aa.length;Yb+=1){var cc=aa[Yb],Nc=this._addTile(cc);Da[cc.key]=cc;Nc.hasData()||ja<this._source.maxzoom&&(Ob[cc.key]=cc)}this._retainLoadedChildren(Ob,ja,sb,Da);for(sb=0;sb<aa.length;sb+=1)if(Ob=aa[sb],Yb=this._tiles[Ob.key],!Yb.hasData()){if(ja+1>this._source.maxzoom){if(cc=Ob.children(this._source.maxzoom)[0],
(Nc=this.getTile(cc))&&Nc.hasData()){Da[cc.key]=cc;continue}}else if(cc=Ob.children(this._source.maxzoom),Da[cc[0].key]&&Da[cc[1].key]&&Da[cc[2].key]&&Da[cc[3].key])continue;cc=Yb.wasRequested();for(Nc=Ob.overscaledZ-1;Nc>=gb;--Nc){var Lc=Ob.scaledTo(Nc);if(Sa[Lc.key])break;if(Sa[Lc.key]=!0,!(Yb=this.getTile(Lc))&&cc&&(Yb=this._addTile(Lc)),Yb&&(Da[Lc.key]=Lc,cc=Yb.wasRequested(),Yb.hasData()))break}}return Da},ba.prototype._updateLoadedParentTileCache=function(){for(var aa in this._loadedParentTiles=
{},this._tiles){for(var ja=[],Da=void 0,Sa=this._tiles[aa].tileID;0<Sa.overscaledZ;){if(Sa.key in this._loadedParentTiles){Da=this._loadedParentTiles[Sa.key];break}ja.push(Sa.key);Sa=Sa.scaledTo(Sa.overscaledZ-1);if(Da=this._getLoadedTile(Sa))break}for(Sa=0;Sa<ja.length;Sa+=1)this._loadedParentTiles[ja[Sa]]=Da}},ba.prototype._addTile=function(aa){var ja=this._tiles[aa.key];if(ja)return ja;(ja=this._cache.getAndRemove(aa))&&(this._setTileReloadTimer(aa.key,ja),ja.tileID=aa,this._state.initializeTileState(ja,
this.map?this.map.painter:null),this._cacheTimers[aa.key]&&(clearTimeout(this._cacheTimers[aa.key]),delete this._cacheTimers[aa.key],this._setTileReloadTimer(aa.key,ja)));var Da=!!ja;return Da||(ja=new a.Tile(aa,this._source.tileSize*aa.overscaleFactor()),this._loadTile(ja,this._tileLoaded.bind(this,ja,aa.key,ja.state))),ja?(ja.uses++,this._tiles[aa.key]=ja,Da||this._source.fire(new a.Event("dataloading",{tile:ja,coord:ja.tileID,dataType:"source"})),ja):null},ba.prototype._setTileReloadTimer=function(aa,
ja){var Da=this;aa in this._timers&&(clearTimeout(this._timers[aa]),delete this._timers[aa]);(ja=ja.getExpiryTimeout())&&(this._timers[aa]=setTimeout(function(){Da._reloadTile(aa,"expired");delete Da._timers[aa]},ja))},ba.prototype._removeTile=function(aa){var ja=this._tiles[aa];ja&&(ja.uses--,delete this._tiles[aa],this._timers[aa]&&(clearTimeout(this._timers[aa]),delete this._timers[aa]),0<ja.uses||(ja.hasData()&&"reloading"!==ja.state?this._cache.add(ja.tileID,ja,ja.getExpiryTimeout()):(ja.aborted=
!0,this._abortTile(ja),this._unloadTile(ja))))},ba.prototype.clearTiles=function(){for(var aa in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(aa);this._cache.reset()},ba.prototype.tilesIn=function(aa,ja,Da){var Sa=this,gb=[],sb=this.transform;if(!sb)return gb;Da=Da?sb.getCameraQueryGeometry(aa):aa;var Ob=aa.map(function(Hc){return sb.pointCoordinate(Hc)}),Yb=Da.map(function(Hc){return sb.pointCoordinate(Hc)}),cc=this.getIds(),Nc=1/0,Lc=1/0,Cc=-1/0,Kc=-1/0;for(aa=0;aa<
Yb.length;aa+=1)Da=Yb[aa],Nc=Math.min(Nc,Da.x),Lc=Math.min(Lc,Da.y),Cc=Math.max(Cc,Da.x),Kc=Math.max(Kc,Da.y);aa=function(Hc){Hc=Sa._tiles[cc[Hc]];if(!Hc.holdingForFade()){var bc=Hc.tileID,Aa=Math.pow(2,sb.zoom-Hc.tileID.overscaledZ),Ha=ja*Hc.queryPadding*a.EXTENT/Hc.tileSize/Aa,Qa=[bc.getTilePoint(new a.MercatorCoordinate(Nc,Lc)),bc.getTilePoint(new a.MercatorCoordinate(Cc,Kc))];Qa[0].x-Ha<a.EXTENT&&Qa[0].y-Ha<a.EXTENT&&0<=Qa[1].x+Ha&&0<=Qa[1].y+Ha&&(Ha=Ob.map(function(hb){return bc.getTilePoint(hb)}),
Qa=Yb.map(function(hb){return bc.getTilePoint(hb)}),gb.push({tile:Hc,tileID:bc,queryGeometry:Ha,cameraQueryGeometry:Qa,scale:Aa}))}};for(Da=0;Da<cc.length;Da++)aa(Da);return gb},ba.prototype.getVisibleCoordinates=function(aa){var ja=this;aa=this.getRenderableIds(aa).map(function(gb){return ja._tiles[gb].tileID});for(var Da=0;Da<aa.length;Da+=1){var Sa=aa[Da];Sa.posMatrix=this.transform.calculatePosMatrix(Sa.toUnwrapped())}return aa},ba.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;
if(u(this._source.type))for(var aa in this._tiles){var ja=this._tiles[aa];if(void 0!==ja.fadeEndTime&&ja.fadeEndTime>=a.browser.now())return!0}return!1},ba.prototype.setFeatureState=function(aa,ja,Da){this._state.updateState(aa||"_geojsonTileLayer",ja,Da)},ba.prototype.removeFeatureState=function(aa,ja,Da){this._state.removeFeatureState(aa||"_geojsonTileLayer",ja,Da)},ba.prototype.getFeatureState=function(aa,ja){return this._state.getState(aa||"_geojsonTileLayer",ja)},ba.prototype.setDependencies=
function(aa,ja,Da){(aa=this._tiles[aa])&&aa.setDependencies(ja,Da)},ba.prototype.reloadTilesForDependencies=function(aa,ja){for(var Da in this._tiles)this._tiles[Da].hasDependency(aa,ja)&&this._reloadTile(Da,"reloading");this._cache.filter(function(Sa){return!Sa.hasDependency(aa,ja)})},ba}(a.Evented);se.maxOverzooming=10;se.maxUnderzooming=3;var Ee=function(){this.active={}};Ee.prototype.acquire=function(Y){if(!this.workers)for(this.workers=[];this.workers.length<Ee.workerCount;)this.workers.push(new w);
return this.active[Y]=!0,this.workers.slice()};Ee.prototype.release=function(Y){delete this.active[Y];0===this.numActive()&&(this.workers.forEach(function(ba){ba.terminate()}),this.workers=null)};Ee.prototype.isPreloaded=function(){return!!this.active.mapboxgl_preloaded_worker_pool};Ee.prototype.numActive=function(){return Object.keys(this.active).length};var $d;Ee.workerCount=Math.max(Math.min(Math.floor(a.browser.hardwareConcurrency/2),6),1);var Ud={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",
setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},Je=function(Y,ba){this.reset(Y,ba)};Je.prototype.reset=function(Y,
ba){this.points=Y||[];this._distances=[0];for(Y=1;Y<this.points.length;Y++)this._distances[Y]=this._distances[Y-1]+this.points[Y].dist(this.points[Y-1]);this.length=this._distances[this._distances.length-1];this.padding=Math.min(ba||0,.5*this.length);this.paddedLength=this.length-2*this.padding};Je.prototype.lerp=function(Y){if(1===this.points.length)return this.points[0];Y=a.clamp(Y,0,1);for(var ba=1,aa=this._distances[ba],ja=Y*this.paddedLength+this.padding;aa<ja&&ba<this._distances.length;)aa=
this._distances[++ba];Y=ba-1;var Da=this._distances[Y];aa-=Da;aa=0<aa?(ja-Da)/aa:0;return this.points[Y].mult(1-aa).add(this.points[ba].mult(aa))};var Fe=function(Y,ba,aa){var ja=this.boxCells=[],Da=this.circleCells=[];this.xCellCount=Math.ceil(Y/aa);this.yCellCount=Math.ceil(ba/aa);for(aa=0;aa<this.xCellCount*this.yCellCount;aa++)ja.push([]),Da.push([]);this.circleKeys=[];this.boxKeys=[];this.bboxes=[];this.circles=[];this.width=Y;this.height=ba;this.xScale=this.xCellCount/Y;this.yScale=this.yCellCount/
ba;this.circleUid=this.boxUid=0};Fe.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length};Fe.prototype.insert=function(Y,ba,aa,ja,Da){this._forEachCell(ba,aa,ja,Da,this._insertBoxCell,this.boxUid++);this.boxKeys.push(Y);this.bboxes.push(ba);this.bboxes.push(aa);this.bboxes.push(ja);this.bboxes.push(Da)};Fe.prototype.insertCircle=function(Y,ba,aa,ja){this._forEachCell(ba-ja,aa-ja,ba+ja,aa+ja,this._insertCircleCell,this.circleUid++);this.circleKeys.push(Y);this.circles.push(ba);
this.circles.push(aa);this.circles.push(ja)};Fe.prototype._insertBoxCell=function(Y,ba,aa,ja,Da,Sa){this.boxCells[Da].push(Sa)};Fe.prototype._insertCircleCell=function(Y,ba,aa,ja,Da,Sa){this.circleCells[Da].push(Sa)};Fe.prototype._query=function(Y,ba,aa,ja,Da,Sa){if(0>aa||Y>this.width||0>ja||ba>this.height)return!Da&&[];var gb=[];if(0>=Y&&0>=ba&&this.width<=aa&&this.height<=ja){if(Da)return!0;for(Y=0;Y<this.boxKeys.length;Y++)gb.push({key:this.boxKeys[Y],x1:this.bboxes[4*Y],y1:this.bboxes[4*Y+1],
x2:this.bboxes[4*Y+2],y2:this.bboxes[4*Y+3]});for(Y=0;Y<this.circleKeys.length;Y++)ba=this.circles[3*Y],aa=this.circles[3*Y+1],ja=this.circles[3*Y+2],gb.push({key:this.circleKeys[Y],x1:ba-ja,y1:aa-ja,x2:ba+ja,y2:aa+ja});return Sa?gb.filter(Sa):gb}return this._forEachCell(Y,ba,aa,ja,this._queryCell,gb,{hitTest:Da,seenUids:{box:{},circle:{}}},Sa),Da?0<gb.length:gb};Fe.prototype._queryCircle=function(Y,ba,aa,ja,Da){var Sa=Y-aa,gb=Y+aa,sb=ba-aa,Ob=ba+aa;if(0>gb||Sa>this.width||0>Ob||sb>this.height)return!ja&&
[];var Yb=[];return this._forEachCell(Sa,sb,gb,Ob,this._queryCellCircle,Yb,{hitTest:ja,circle:{x:Y,y:ba,radius:aa},seenUids:{box:{},circle:{}}},Da),ja?0<Yb.length:Yb};Fe.prototype.query=function(Y,ba,aa,ja,Da){return this._query(Y,ba,aa,ja,!1,Da)};Fe.prototype.hitTest=function(Y,ba,aa,ja,Da){return this._query(Y,ba,aa,ja,!0,Da)};Fe.prototype.hitTestCircle=function(Y,ba,aa,ja){return this._queryCircle(Y,ba,aa,!0,ja)};Fe.prototype._queryCell=function(Y,ba,aa,ja,Da,Sa,gb,sb){var Ob=gb.seenUids,Yb=this.boxCells[Da];
if(null!==Yb)for(var cc=this.bboxes,Nc=0;Nc<Yb.length;Nc+=1){var Lc=Yb[Nc];if(!Ob.box[Lc]){Ob.box[Lc]=!0;var Cc=4*Lc;if(Y<=cc[Cc+2]&&ba<=cc[Cc+3]&&aa>=cc[Cc+0]&&ja>=cc[Cc+1]&&(!sb||sb(this.boxKeys[Lc]))){if(gb.hitTest)return Sa.push(!0),!0;Sa.push({key:this.boxKeys[Lc],x1:cc[Cc],y1:cc[Cc+1],x2:cc[Cc+2],y2:cc[Cc+3]})}}}Da=this.circleCells[Da];if(null!==Da)for(Yb=this.circles,cc=0;cc<Da.length;cc+=1)if(Nc=Da[cc],!Ob.circle[Nc]){Ob.circle[Nc]=!0;var Kc=3*Nc;if(this._circleAndRectCollide(Yb[Kc],Yb[Kc+
1],Yb[Kc+2],Y,ba,aa,ja)&&(!sb||sb(this.circleKeys[Nc]))){if(gb.hitTest)return Sa.push(!0),!0;Lc=Yb[Kc];Cc=Yb[Kc+1];Kc=Yb[Kc+2];Sa.push({key:this.circleKeys[Nc],x1:Lc-Kc,y1:Cc-Kc,x2:Lc+Kc,y2:Cc+Kc})}}};Fe.prototype._queryCellCircle=function(Y,ba,aa,ja,Da,Sa,gb,sb){Y=gb.circle;gb=gb.seenUids;ba=this.boxCells[Da];if(null!==ba)for(aa=this.bboxes,ja=0;ja<ba.length;ja+=1){var Ob=ba[ja];if(!gb.box[Ob]){gb.box[Ob]=!0;var Yb=4*Ob;if(this._circleAndRectCollide(Y.x,Y.y,Y.radius,aa[Yb+0],aa[Yb+1],aa[Yb+2],aa[Yb+
3])&&(!sb||sb(this.boxKeys[Ob])))return Sa.push(!0),!0}}Da=this.circleCells[Da];if(null!==Da)for(ba=this.circles,aa=0;aa<Da.length;aa+=1)if(ja=Da[aa],!gb.circle[ja]&&(gb.circle[ja]=!0,Ob=3*ja,this._circlesCollide(ba[Ob],ba[Ob+1],ba[Ob+2],Y.x,Y.y,Y.radius)&&(!sb||sb(this.circleKeys[ja]))))return Sa.push(!0),!0};Fe.prototype._forEachCell=function(Y,ba,aa,ja,Da,Sa,gb,sb){for(var Ob=this._convertToXCellCoord(Y),Yb=this._convertToYCellCoord(ba),cc=this._convertToXCellCoord(aa),Nc=this._convertToYCellCoord(ja);Ob<=
cc;Ob++)for(var Lc=Yb;Lc<=Nc;Lc++)if(Da.call(this,Y,ba,aa,ja,this.xCellCount*Lc+Ob,Sa,gb,sb))return};Fe.prototype._convertToXCellCoord=function(Y){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(Y*this.xScale)))};Fe.prototype._convertToYCellCoord=function(Y){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(Y*this.yScale)))};Fe.prototype._circlesCollide=function(Y,ba,aa,ja,Da,Sa){Y=ja-Y;ba=Da-ba;aa+=Sa;return aa*aa>Y*Y+ba*ba};Fe.prototype._circleAndRectCollide=function(Y,ba,aa,ja,Da,
Sa,gb){Sa=(Sa-ja)/2;Y=Math.abs(Y-(ja+Sa));if(Y>Sa+aa)return!1;gb=(gb-Da)/2;ba=Math.abs(ba-(Da+gb));if(ba>gb+aa)return!1;if(Y<=Sa||ba<=gb)return!0;Da=Y-Sa;ba-=gb;return Da*Da+ba*ba<=aa*aa};var ke=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),Ce=function(Y,ba,aa){void 0===ba&&(ba=new Fe(Y.width+200,Y.height+200,25));void 0===aa&&(aa=new Fe(Y.width+200,Y.height+200,25));this.transform=Y;this.grid=ba;this.ignoredGrid=aa;this.pitchfactor=Math.cos(Y._pitch)*Y.cameraToCenterDistance;
this.screenRightBoundary=Y.width+100;this.screenBottomBoundary=Y.height+100;this.gridRightBoundary=Y.width+200;this.gridBottomBoundary=Y.height+200};Ce.prototype.placeCollisionBox=function(Y,ba,aa,ja,Da){ja=this.projectAndGetPerspectiveRatio(ja,Y.anchorPointX,Y.anchorPointY);var Sa=aa*ja.perspectiveRatio;aa=Y.x1*Sa+ja.point.x;var gb=Y.y1*Sa+ja.point.y,sb=Y.x2*Sa+ja.point.x;Y=Y.y2*Sa+ja.point.y;return!this.isInsideGrid(aa,gb,sb,Y)||!ba&&this.grid.hitTest(aa,gb,sb,Y,Da)?{box:[],offscreen:!1}:{box:[aa,
gb,sb,Y],offscreen:this.isOffscreen(aa,gb,sb,Y)}};Ce.prototype.placeCollisionCircles=function(Y,ba,aa,ja,Da,Sa,gb,sb,Ob,Yb,cc,Nc,Lc){var Cc=[],Kc=new a.Point(ba.anchorX,ba.anchorY);Sa=G(Kc,Sa);Sa=.5+this.transform.cameraToCenterDistance/Sa.signedDistanceFromCamera*.5;Da=(Yb?Da/Sa:Da*Sa)/a.ONE_EM;Yb=G(Kc,gb).point;Da=J(Da,ja,ba.lineOffsetX*Da,ba.lineOffsetY*Da,!1,Yb,Kc,ba,aa,gb,{});aa=ba=!1;ja=!0;if(Da){Nc=.5*Nc*Sa+Lc;gb=new a.Point(-100,-100);Kc=new a.Point(this.screenRightBoundary,this.screenBottomBoundary);
Lc=new Je;Sa=Da.first;Yb=Da.last;Da=[];for(var Hc=Sa.path.length-1;1<=Hc;Hc--)Da.push(Sa.path[Hc]);for(Sa=1;Sa<Yb.path.length;Sa++)Da.push(Yb.path[Sa]);Sa=2.5*Nc;sb&&(Da=Da.map(function(ub){return G(ub,sb)}),Da=Da.some(function(ub){return 0>=ub.signedDistanceFromCamera})?[]:Da.map(function(ub){return ub.point}));Yb=[];if(0<Da.length){Yb=Da[0].clone();Hc=Da[0].clone();for(var bc=1;bc<Da.length;bc++)Yb.x=Math.min(Yb.x,Da[bc].x),Yb.y=Math.min(Yb.y,Da[bc].y),Hc.x=Math.max(Hc.x,Da[bc].x),Hc.y=Math.max(Hc.y,
Da[bc].y);Yb=Yb.x>=gb.x&&Hc.x<=Kc.x&&Yb.y>=gb.y&&Hc.y<=Kc.y?[Da]:Hc.x<gb.x||Yb.x>Kc.x||Hc.y<gb.y||Yb.y>Kc.y?[]:a.clipLine([Da],gb.x,gb.y,Kc.x,Kc.y)}gb=0;for(Kc=Yb;gb<Kc.length;gb+=1)for(Lc.reset(Kc[gb],.25*Nc),Da=Lc.length<=.5*Nc?1:Math.ceil(Lc.paddedLength/Sa)+1,Yb=0;Yb<Da;Yb++){bc=Lc.lerp(Yb/Math.max(Da-1,1));Hc=bc.x+100;bc=bc.y+100;Cc.push(Hc,bc,Nc,0);var Aa=Hc-Nc,Ha=bc-Nc,Qa=Hc+Nc,hb=bc+Nc;if(ja=ja&&this.isOffscreen(Aa,Ha,Qa,hb),aa=aa||this.isInsideGrid(Aa,Ha,Qa,hb),!Y&&this.grid.hitTestCircle(Hc,
bc,Nc,cc)&&(ba=!0,!Ob))return{circles:[],offscreen:!1,collisionDetected:ba}}}return{circles:!Ob&&ba||!aa?[]:Cc,offscreen:ja,collisionDetected:ba}};Ce.prototype.queryRenderedSymbols=function(Y){if(0===Y.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var ba=[],aa=1/0,ja=1/0,Da=-1/0,Sa=-1/0,gb=0;gb<Y.length;gb+=1){var sb=Y[gb];sb=new a.Point(sb.x+100,sb.y+100);aa=Math.min(aa,sb.x);ja=Math.min(ja,sb.y);Da=Math.max(Da,sb.x);Sa=Math.max(Sa,sb.y);ba.push(sb)}Y={};gb={};
sb=0;for(aa=this.grid.query(aa,ja,Da,Sa).concat(this.ignoredGrid.query(aa,ja,Da,Sa));sb<aa.length;sb+=1)Da=aa[sb],ja=Da.key,(void 0===Y[ja.bucketInstanceId]&&(Y[ja.bucketInstanceId]={}),Y[ja.bucketInstanceId][ja.featureIndex])||(Da=[new a.Point(Da.x1,Da.y1),new a.Point(Da.x2,Da.y1),new a.Point(Da.x2,Da.y2),new a.Point(Da.x1,Da.y2)],a.polygonIntersectsPolygon(ba,Da)&&(Y[ja.bucketInstanceId][ja.featureIndex]=!0,void 0===gb[ja.bucketInstanceId]&&(gb[ja.bucketInstanceId]=[]),gb[ja.bucketInstanceId].push(ja.featureIndex)));
return gb};Ce.prototype.insertCollisionBox=function(Y,ba,aa,ja,Da){(ba?this.ignoredGrid:this.grid).insert({bucketInstanceId:aa,featureIndex:ja,collisionGroupID:Da},Y[0],Y[1],Y[2],Y[3])};Ce.prototype.insertCollisionCircles=function(Y,ba,aa,ja,Da){ba=ba?this.ignoredGrid:this.grid;aa={bucketInstanceId:aa,featureIndex:ja,collisionGroupID:Da};for(ja=0;ja<Y.length;ja+=4)ba.insertCircle(aa,Y[ja],Y[ja+1],Y[ja+2])};Ce.prototype.projectAndGetPerspectiveRatio=function(Y,ba,aa){ba=[ba,aa,0,1];return Q(ba,ba,
Y),{point:new a.Point((ba[0]/ba[3]+1)/2*this.transform.width+100,(-ba[1]/ba[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/ba[3]*.5}};Ce.prototype.isOffscreen=function(Y,ba,aa,ja){return 100>aa||Y>=this.screenRightBoundary||100>ja||ba>this.screenBottomBoundary};Ce.prototype.isInsideGrid=function(Y,ba,aa,ja){return 0<=aa&&Y<this.gridRightBoundary&&0<=ja&&ba<this.gridBottomBoundary};Ce.prototype.getViewportMatrix=function(){var Y=a.identity([]);return a.translate(Y,
Y,[-100,-100,0]),Y};var sf=function(Y,ba,aa,ja){this.opacity=Y?Math.max(0,Math.min(1,Y.opacity+(Y.placed?ba:-ba))):ja&&aa?1:0;this.placed=aa};sf.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Ve=function(Y,ba,aa,ja,Da){this.text=new sf(Y?Y.text:null,ba,aa,Da);this.icon=new sf(Y?Y.icon:null,ba,ja,Da)};Ve.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var tf=function(Y,ba,aa){this.text=Y;this.icon=ba;this.skipFade=aa},gf=function(){this.invProjMatrix=
a.create();this.viewportMatrix=a.create();this.circles=[]},Wa=function(Y,ba,aa,ja,Da){this.bucketInstanceId=Y;this.featureIndex=ba;this.sourceLayerIndex=aa;this.bucketIndex=ja;this.tileID=Da},Hb=function(Y){this.crossSourceCollisions=Y;this.maxGroupID=0;this.collisionGroups={}};Hb.prototype.get=function(Y){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[Y]){var ba=++this.maxGroupID;this.collisionGroups[Y]={ID:ba,predicate:function(aa){return aa.collisionGroupID===
ba}}}return this.collisionGroups[Y]};var Cb=function(Y,ba,aa,ja){this.transform=Y.clone();this.collisionIndex=new Ce(this.transform);this.placements={};this.opacities={};this.variableOffsets={};this.stale=!1;this.commitTime=0;this.fadeDuration=ba;this.retainedQueryData={};this.collisionGroups=new Hb(aa);this.collisionCircleArrays={};(this.prevPlacement=ja)&&(ja.prevPlacement=void 0);this.placedOrientations={}};Cb.prototype.getBucketParts=function(Y,ba,aa,ja){var Da=aa.getBucket(ba),Sa=aa.latestFeatureIndex;
if(Da&&Sa&&ba.id===Da.layerIds[0]){ba=aa.collisionBoxArray;var gb=Da.layers[0].layout,sb=Math.pow(2,this.transform.zoom-aa.tileID.overscaledZ),Ob=aa.tileSize/a.EXTENT,Yb=this.transform.calculatePosMatrix(aa.tileID.toUnwrapped()),cc="map"===gb.get("text-pitch-alignment"),Nc="map"===gb.get("text-rotation-alignment"),Lc=S(aa,1,this.transform.zoom),Cc=C(Yb,cc,Nc,this.transform,Lc),Kc=null;cc&&(cc=v(Yb,cc,Nc,this.transform,Lc),Kc=a.multiply([],this.transform.labelPlaneMatrix,cc));this.retainedQueryData[Da.bucketInstanceId]=
new Wa(Da.bucketInstanceId,Sa,Da.sourceLayerIndex,Da.index,aa.tileID);aa={bucket:Da,layout:gb,posMatrix:Yb,textLabelPlaneMatrix:Cc,labelToScreenMatrix:Kc,scale:sb,textPixelRatio:Ob,holdingForFade:aa.holdingForFade(),collisionBoxArray:ba,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(Da.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Da.sourceID)};if(ja)for(ja=0,Da=Da.sortKeyRanges;ja<Da.length;ja+=1)Sa=Da[ja],Y.push({sortKey:Sa.sortKey,symbolInstanceStart:Sa.symbolInstanceStart,
symbolInstanceEnd:Sa.symbolInstanceEnd,parameters:aa});else Y.push({symbolInstanceStart:0,symbolInstanceEnd:Da.symbolInstances.length,parameters:aa})}};Cb.prototype.attemptAnchorPlacement=function(Y,ba,aa,ja,Da,Sa,gb,sb,Ob,Yb,cc,Nc,Lc,Cc,Kc){var Hc,bc=[Nc.textOffset0,Nc.textOffset1],Aa=O(Y,aa,ja,bc,Da);ba=this.collisionIndex.placeCollisionBox(U(ba,Aa.x,Aa.y,Sa,gb,this.transform.angle),cc,sb,Ob,Yb.predicate);if(!Kc||0!==this.collisionIndex.placeCollisionBox(U(Kc,Aa.x,Aa.y,Sa,gb,this.transform.angle),
cc,sb,Ob,Yb.predicate).box.length)return 0<ba.box.length?(this.prevPlacement&&this.prevPlacement.variableOffsets[Nc.crossTileID]&&this.prevPlacement.placements[Nc.crossTileID]&&this.prevPlacement.placements[Nc.crossTileID].text&&(Hc=this.prevPlacement.variableOffsets[Nc.crossTileID].anchor),this.variableOffsets[Nc.crossTileID]={textOffset:bc,width:aa,height:ja,anchor:Y,textBoxScale:Da,prevAnchor:Hc},this.markUsedJustification(Lc,Y,Nc,Cc),Lc.allowVerticalPlacement&&(this.markUsedOrientation(Lc,Cc,
Nc),this.placedOrientations[Nc.crossTileID]=Cc),{shift:Aa,placedGlyphBoxes:ba}):void 0};Cb.prototype.placeLayerBucketPart=function(Y,ba,aa){var ja=this,Da=Y.parameters,Sa=Da.bucket,gb=Da.layout,sb=Da.posMatrix,Ob=Da.textLabelPlaneMatrix,Yb=Da.labelToScreenMatrix,cc=Da.textPixelRatio,Nc=Da.holdingForFade,Lc=Da.collisionBoxArray,Cc=Da.partiallyEvaluatedTextSize,Kc=Da.collisionGroup,Hc=gb.get("text-optional"),bc=gb.get("icon-optional"),Aa=gb.get("text-allow-overlap"),Ha=gb.get("icon-allow-overlap"),
Qa="map"===gb.get("text-rotation-alignment"),hb="map"===gb.get("text-pitch-alignment"),ub="none"!==gb.get("icon-text-fit");Da="viewport-y"===gb.get("symbol-z-order");var Mb=Aa&&(Ha||!Sa.hasIconData()||bc),Tb=Ha&&(Aa||!Sa.hasTextData()||Hc);!Sa.collisionArrays&&Lc&&Sa.deserializeCollisionBoxes(Lc);Lc=function(kc,nc){if(!ba[kc.crossTileID])if(Nc)ja.placements[kc.crossTileID]=new tf(!1,!1,!1);else{var ad,kd=!1,td=!1,Cd=!0,Md=null,Ed={box:null,offscreen:null},Sd={box:null,offscreen:null},ee=null,Zd=null,
me=0,De=0,he=0;nc.textFeatureIndex?me=nc.textFeatureIndex:kc.useRuntimeCollisionCircles&&(me=kc.featureIndex);nc.verticalTextFeatureIndex&&(De=nc.verticalTextFeatureIndex);var Re=nc.textBox;if(Re){var Xe=function(ce){var Le=a.WritingMode.horizontal;Sa.allowVerticalPlacement&&!ce&&ja.prevPlacement&&(ce=ja.prevPlacement.placedOrientations[kc.crossTileID])&&(ja.placedOrientations[kc.crossTileID]=ce,ja.markUsedOrientation(Sa,Le=ce,kc));return Le};Cd=function(ce,Le){if(Sa.allowVerticalPlacement&&0<kc.numVerticalGlyphVertices&&
nc.verticalTextBox)for(var Bf=0,of=Sa.writingModes;Bf<of.length&&(of[Bf]===a.WritingMode.vertical?(Ed=Le(),Sd=Ed):Ed=ce(),!(Ed&&Ed.box&&Ed.box.length));Bf+=1);else Ed=ce()};if(gb.get("text-variable-anchor")){var pf=gb.get("text-variable-anchor");if(ja.prevPlacement&&ja.prevPlacement.variableOffsets[kc.crossTileID]){var cf=ja.prevPlacement.variableOffsets[kc.crossTileID];0<pf.indexOf(cf.anchor)&&(pf=pf.filter(function(ce){return ce!==cf.anchor})).unshift(cf.anchor)}var mg=function(ce,Le,Bf){var of=
ce.x2-ce.x1,Pf=ce.y2-ce.y1,ff=kc.textBoxScale;Le=ub&&!Ha?Le:null;for(var rf={box:[],offscreen:!1},ti=Aa?2*pf.length:pf.length,Sg=0;Sg<ti;++Sg){var Wb=ja.attemptAnchorPlacement(pf[Sg%pf.length],ce,of,Pf,ff,Qa,hb,cc,sb,Kc,Sg>=pf.length,kc,Sa,Bf,Le);if(Wb&&(rf=Wb.placedGlyphBoxes)&&rf.box&&rf.box.length){kd=!0;Md=Wb.shift;break}}return rf};Cd(function(){return mg(Re,nc.iconBox,a.WritingMode.horizontal)},function(){var ce=nc.verticalTextBox;return Sa.allowVerticalPlacement&&!(Ed&&Ed.box&&Ed.box.length)&&
0<kc.numVerticalGlyphVertices&&ce?mg(ce,nc.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}});Ed&&(kd=Ed.box,Cd=Ed.offscreen);Cd=Xe(Ed&&Ed.box);!kd&&ja.prevPlacement&&(Xe=ja.prevPlacement.variableOffsets[kc.crossTileID])&&(ja.variableOffsets[kc.crossTileID]=Xe,ja.markUsedJustification(Sa,Xe.anchor,kc,Cd))}else{var df=function(ce,Le){ce=ja.collisionIndex.placeCollisionBox(ce,Aa,cc,sb,Kc.predicate);return ce&&ce.box&&ce.box.length&&(ja.markUsedOrientation(Sa,Le,kc),ja.placedOrientations[kc.crossTileID]=
Le),ce};Cd(function(){return df(Re,a.WritingMode.horizontal)},function(){var ce=nc.verticalTextBox;return Sa.allowVerticalPlacement&&0<kc.numVerticalGlyphVertices&&ce?df(ce,a.WritingMode.vertical):{box:null,offscreen:null}});Xe(Ed&&Ed.box&&Ed.box.length)}}if(kd=(ad=Ed)&&ad.box&&0<ad.box.length,Cd=ad&&ad.offscreen,kc.useRuntimeCollisionCircles){ee=Sa.text.placedSymbolArray.get(kc.centerJustifiedTextSymbolIndex);Xe=a.evaluateSizeForFeature(Sa.textSizeData,Cc,ee);var kf=gb.get("text-padding");ee=ja.collisionIndex.placeCollisionCircles(Aa,
ee,Sa.lineVertexArray,Sa.glyphOffsetArray,Xe,sb,Ob,Yb,aa,hb,Kc.predicate,kc.collisionCircleDiameter,kf);kd=Aa||0<ee.circles.length&&!ee.collisionDetected;Cd=Cd&&ee.offscreen}if(nc.iconFeatureIndex&&(he=nc.iconFeatureIndex),nc.iconBox)td=function(ce){ce=ub&&Md?U(ce,Md.x,Md.y,Qa,hb,ja.transform.angle):ce;return ja.collisionIndex.placeCollisionBox(ce,Ha,cc,sb,Kc.predicate)},td=Sd&&Sd.box&&Sd.box.length&&nc.verticalIconBox?0<(Zd=td(nc.verticalIconBox)).box.length:0<(Zd=td(nc.iconBox)).box.length,Cd=Cd&&
Zd.offscreen;Xe=Hc||0===kc.numHorizontalGlyphVertices&&0===kc.numVerticalGlyphVertices;kf=bc||0===kc.numIconVertices;if(Xe||kf?kf?Xe||(td=td&&kd):kd=td&&kd:td=kd=td&&kd,kd&&ad&&ad.box&&ja.collisionIndex.insertCollisionBox(ad.box,gb.get("text-ignore-placement"),Sa.bucketInstanceId,Sd&&Sd.box&&De?De:me,Kc.ID),td&&Zd&&ja.collisionIndex.insertCollisionBox(Zd.box,gb.get("icon-ignore-placement"),Sa.bucketInstanceId,he,Kc.ID),ee&&(kd&&ja.collisionIndex.insertCollisionCircles(ee.circles,gb.get("text-ignore-placement"),
Sa.bucketInstanceId,me,Kc.ID),aa))for(Zd=Sa.bucketInstanceId,ad=ja.collisionCircleArrays[Zd],void 0===ad&&(ad=ja.collisionCircleArrays[Zd]=new gf),Zd=0;Zd<ee.circles.length;Zd+=4)ad.circles.push(ee.circles[Zd+0]),ad.circles.push(ee.circles[Zd+1]),ad.circles.push(ee.circles[Zd+2]),ad.circles.push(ee.collisionDetected?1:0);ja.placements[kc.crossTileID]=new tf(kd||Mb,td||Tb,Cd||Sa.justReloaded);ba[kc.crossTileID]=!0}};if(Da)for(Y=Sa.getSortedSymbolIndexes(this.transform.angle),Da=Y.length-1;0<=Da;--Da){var uc=
Y[Da];Lc(Sa.symbolInstances.get(uc),Sa.collisionArrays[uc])}else for(Da=Y.symbolInstanceStart;Da<Y.symbolInstanceEnd;Da++)Lc(Sa.symbolInstances.get(Da),Sa.collisionArrays[Da]);aa&&Sa.bucketInstanceId in this.collisionCircleArrays&&(Lc=this.collisionCircleArrays[Sa.bucketInstanceId],a.invert(Lc.invProjMatrix,sb),Lc.viewportMatrix=this.collisionIndex.getViewportMatrix());Sa.justReloaded=!1};Cb.prototype.markUsedJustification=function(Y,ba,aa,ja){ba=ja===a.WritingMode.vertical?aa.verticalPlacedTextSymbolIndex:
{left:aa.leftJustifiedTextSymbolIndex,center:aa.centerJustifiedTextSymbolIndex,right:aa.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(ba)];ja=0;for(var Da=[aa.leftJustifiedTextSymbolIndex,aa.centerJustifiedTextSymbolIndex,aa.rightJustifiedTextSymbolIndex,aa.verticalPlacedTextSymbolIndex];ja<Da.length;ja+=1){var Sa=Da[ja];0<=Sa&&(Y.text.placedSymbolArray.get(Sa).crossTileID=0<=ba&&Sa!==ba?0:aa.crossTileID)}};Cb.prototype.markUsedOrientation=function(Y,ba,aa){var ja=ba===a.WritingMode.horizontal||
ba===a.WritingMode.horizontalOnly?ba:0;ba=ba===a.WritingMode.vertical?ba:0;for(var Da=0,Sa=[aa.leftJustifiedTextSymbolIndex,aa.centerJustifiedTextSymbolIndex,aa.rightJustifiedTextSymbolIndex];Da<Sa.length;Da+=1)Y.text.placedSymbolArray.get(Sa[Da]).placedOrientation=ja;aa.verticalPlacedTextSymbolIndex&&(Y.text.placedSymbolArray.get(aa.verticalPlacedTextSymbolIndex).placedOrientation=ba)};Cb.prototype.commit=function(Y){this.commitTime=Y;this.zoomAtLastRecencyCheck=this.transform.zoom;var ba=this.prevPlacement,
aa=!1;this.prevZoomAdjustment=ba?ba.zoomAdjustment(this.transform.zoom):0;var ja=ba?ba.symbolFadeChange(Y):1,Da=ba?ba.opacities:{},Sa=ba?ba.variableOffsets:{},gb=ba?ba.placedOrientations:{};for(cc in this.placements){var sb=this.placements[cc],Ob=Da[cc];Ob?(this.opacities[cc]=new Ve(Ob,ja,sb.text,sb.icon),aa=aa||sb.text!==Ob.text.placed||sb.icon!==Ob.icon.placed):(this.opacities[cc]=new Ve(null,ja,sb.text,sb.icon,sb.skipFade),aa=aa||sb.text||sb.icon)}for(var Yb in Da){var cc=Da[Yb];this.opacities[Yb]||
(sb=new Ve(cc,ja,!1,!1),sb.isHidden()||(this.opacities[Yb]=sb,aa=aa||cc.text.placed||cc.icon.placed))}for(var Nc in Sa)this.variableOffsets[Nc]||!this.opacities[Nc]||this.opacities[Nc].isHidden()||(this.variableOffsets[Nc]=Sa[Nc]);for(var Lc in gb)this.placedOrientations[Lc]||!this.opacities[Lc]||this.opacities[Lc].isHidden()||(this.placedOrientations[Lc]=gb[Lc]);aa?this.lastPlacementChangeTime=Y:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=ba?ba.lastPlacementChangeTime:
Y)};Cb.prototype.updateLayerOpacities=function(Y,ba){for(var aa={},ja=0;ja<ba.length;ja+=1){var Da=ba[ja],Sa=Da.getBucket(Y);Sa&&Da.latestFeatureIndex&&Y.id===Sa.layerIds[0]&&this.updateBucketOpacities(Sa,aa,Da.collisionBoxArray)}};Cb.prototype.updateBucketOpacities=function(Y,ba,aa){var ja=this;Y.hasTextData()&&Y.text.opacityVertexArray.clear();Y.hasIconData()&&Y.icon.opacityVertexArray.clear();Y.hasIconCollisionBoxData()&&Y.iconCollisionBox.collisionVertexArray.clear();Y.hasTextCollisionBoxData()&&
Y.textCollisionBox.collisionVertexArray.clear();var Da=Y.layers[0].layout,Sa=new Ve(null,0,!1,!1,!0),gb=Da.get("text-allow-overlap"),sb=Da.get("icon-allow-overlap"),Ob=Da.get("text-variable-anchor"),Yb="map"===Da.get("text-rotation-alignment"),cc="map"===Da.get("text-pitch-alignment"),Nc="none"!==Da.get("icon-text-fit"),Lc=new Ve(null,0,gb&&(sb||!Y.hasIconData()||Da.get("icon-optional")),sb&&(gb||!Y.hasTextData()||Da.get("text-optional")),!0);!Y.collisionArrays&&aa&&(Y.hasIconCollisionBoxData()||
Y.hasTextCollisionBoxData())&&Y.deserializeCollisionBoxes(aa);var Cc=function(Kc,Hc,bc){for(var Aa=0;Aa<Hc/4;Aa++)Kc.opacityVertexArray.emplaceBack(bc)};aa=function(Kc){var Hc=Y.symbolInstances.get(Kc),bc=Hc.numHorizontalGlyphVertices,Aa=Hc.numVerticalGlyphVertices,Ha=Hc.crossTileID,Qa=ja.opacities[Ha];ba[Ha]?Qa=Sa:Qa||(ja.opacities[Ha]=Qa=Lc);ba[Ha]=!0;var hb=0<Hc.numIconVertices,ub=ja.placedOrientations[Hc.crossTileID],Mb=ub===a.WritingMode.vertical,Tb=ub===a.WritingMode.horizontal||ub===a.WritingMode.horizontalOnly;
if(0<bc||0<Aa){var uc=da(Qa.text);Cc(Y.text,bc,Mb?Qb:uc);Cc(Y.text,Aa,Tb?Qb:uc);var kc=Qa.text.isHidden();[Hc.rightJustifiedTextSymbolIndex,Hc.centerJustifiedTextSymbolIndex,Hc.leftJustifiedTextSymbolIndex].forEach(function(nc){0<=nc&&(Y.text.placedSymbolArray.get(nc).hidden=kc||Mb?1:0)});0<=Hc.verticalPlacedTextSymbolIndex&&(Y.text.placedSymbolArray.get(Hc.verticalPlacedTextSymbolIndex).hidden=kc||Tb?1:0);(bc=ja.variableOffsets[Hc.crossTileID])&&ja.markUsedJustification(Y,bc.anchor,Hc,ub);(ub=ja.placedOrientations[Hc.crossTileID])&&
(ja.markUsedJustification(Y,"left",Hc,ub),ja.markUsedOrientation(Y,ub,Hc))}hb&&(hb=da(Qa.icon),ub=!(Nc&&Hc.verticalPlacedIconSymbolIndex&&Mb),0<=Hc.placedIconSymbolIndex&&(Cc(Y.icon,Hc.numIconVertices,ub?hb:Qb),Y.icon.placedSymbolArray.get(Hc.placedIconSymbolIndex).hidden=Qa.icon.isHidden()),0<=Hc.verticalPlacedIconSymbolIndex&&(Cc(Y.icon,Hc.numVerticalIconVertices,ub?Qb:hb),Y.icon.placedSymbolArray.get(Hc.verticalPlacedIconSymbolIndex).hidden=Qa.icon.isHidden()));if(Y.hasIconCollisionBoxData()||
Y.hasTextCollisionBoxData())if(Kc=Y.collisionArrays[Kc]){Hc=new a.Point(0,0);if(Kc.textBox||Kc.verticalTextBox)hb=!0,Ob&&((Ha=ja.variableOffsets[Ha])?(Hc=O(Ha.anchor,Ha.width,Ha.height,Ha.textOffset,Ha.textBoxScale),Yb&&Hc._rotate(cc?ja.transform.angle:-ja.transform.angle)):hb=!1),Kc.textBox&&X(Y.textCollisionBox.collisionVertexArray,Qa.text.placed,!hb||Mb,Hc.x,Hc.y),Kc.verticalTextBox&&X(Y.textCollisionBox.collisionVertexArray,Qa.text.placed,!hb||Tb,Hc.x,Hc.y);Tb=!(Tb||!Kc.verticalIconBox);Kc.iconBox&&
X(Y.iconCollisionBox.collisionVertexArray,Qa.icon.placed,Tb,Nc?Hc.x:0,Nc?Hc.y:0);Kc.verticalIconBox&&X(Y.iconCollisionBox.collisionVertexArray,Qa.icon.placed,!Tb,Nc?Hc.x:0,Nc?Hc.y:0)}};for(Da=0;Da<Y.symbolInstances.length;Da++)aa(Da);if(Y.sortFeatures(this.transform.angle),this.retainedQueryData[Y.bucketInstanceId]&&(this.retainedQueryData[Y.bucketInstanceId].featureSortOrder=Y.featureSortOrder),Y.hasTextData()&&Y.text.opacityVertexBuffer&&Y.text.opacityVertexBuffer.updateData(Y.text.opacityVertexArray),
Y.hasIconData()&&Y.icon.opacityVertexBuffer&&Y.icon.opacityVertexBuffer.updateData(Y.icon.opacityVertexArray),Y.hasIconCollisionBoxData()&&Y.iconCollisionBox.collisionVertexBuffer&&Y.iconCollisionBox.collisionVertexBuffer.updateData(Y.iconCollisionBox.collisionVertexArray),Y.hasTextCollisionBoxData()&&Y.textCollisionBox.collisionVertexBuffer&&Y.textCollisionBox.collisionVertexBuffer.updateData(Y.textCollisionBox.collisionVertexArray),Y.bucketInstanceId in this.collisionCircleArrays)aa=this.collisionCircleArrays[Y.bucketInstanceId],
Y.placementInvProjMatrix=aa.invProjMatrix,Y.placementViewportMatrix=aa.viewportMatrix,Y.collisionCircleArray=aa.circles,delete this.collisionCircleArrays[Y.bucketInstanceId]};Cb.prototype.symbolFadeChange=function(Y){return 0===this.fadeDuration?1:(Y-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment};Cb.prototype.zoomAdjustment=function(Y){return Math.max(0,(this.transform.zoom-Y)/1.5)};Cb.prototype.hasTransitions=function(Y){return this.stale||Y-this.lastPlacementChangeTime<this.fadeDuration};
Cb.prototype.stillRecent=function(Y,ba){var aa=this.zoomAtLastRecencyCheck===ba?1-this.zoomAdjustment(ba):1;return this.zoomAtLastRecencyCheck=ba,this.commitTime+this.fadeDuration*aa>Y};Cb.prototype.setStale=function(){this.stale=!0};var Sb=Math.pow(2,25),Ec=Math.pow(2,24),Vc=Math.pow(2,17),mc=Math.pow(2,16),Sc=Math.pow(2,9),jd=Math.pow(2,8),Ad=Math.pow(2,1),Qb=0,dc=function(Y){this._sortAcrossTiles="viewport-y"!==Y.layout.get("symbol-z-order")&&void 0!==Y.layout.get("symbol-sort-key").constantOr(1);
this._currentPartIndex=this._currentTileIndex=0;this._seenCrossTileIDs={};this._bucketParts=[]};dc.prototype.continuePlacement=function(Y,ba,aa,ja,Da){for(var Sa=this._bucketParts;this._currentTileIndex<Y.length;)if(ba.getBucketParts(Sa,ja,Y[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Da())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Sa.sort(function(gb,sb){return gb.sortKey-sb.sortKey}));this._currentPartIndex<Sa.length;)if(ba.placeLayerBucketPart(Sa[this._currentPartIndex],
this._seenCrossTileIDs,aa),this._currentPartIndex++,Da())return!0;return!1};var Qc=function(Y,ba,aa,ja,Da,Sa,gb){this.placement=new Cb(Y,Da,Sa,gb);this._currentPlacementIndex=ba.length-1;this._forceFullPlacement=aa;this._showCollisionBoxes=ja;this._done=!1};Qc.prototype.isDone=function(){return this._done};Qc.prototype.continuePlacement=function(Y,ba,aa){for(var ja=this,Da=a.browser.now(),Sa=function(){var Ob=a.browser.now()-Da;return!ja._forceFullPlacement&&2<Ob};0<=this._currentPlacementIndex;){var gb=
ba[Y[this._currentPlacementIndex]],sb=this.placement.collisionIndex.transform.zoom;if("symbol"===gb.type&&(!gb.minzoom||gb.minzoom<=sb)&&(!gb.maxzoom||gb.maxzoom>sb)){if(this._inProgressLayer||(this._inProgressLayer=new dc(gb)),this._inProgressLayer.continuePlacement(aa[gb.source],this.placement,this._showCollisionBoxes,gb,Sa))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0};Qc.prototype.commit=function(Y){return this.placement.commit(Y),this.placement};var gd=512/
a.EXTENT/2,Uc=function(Y,ba,aa){this.tileID=Y;this.indexedSymbolInstances={};this.bucketInstanceId=aa;for(aa=0;aa<ba.length;aa++){var ja=ba.get(aa),Da=ja.key;this.indexedSymbolInstances[Da]||(this.indexedSymbolInstances[Da]=[]);this.indexedSymbolInstances[Da].push({crossTileID:ja.crossTileID,coord:this.getScaledCoordinates(ja,Y)})}};Uc.prototype.getScaledCoordinates=function(Y,ba){var aa=gd/Math.pow(2,ba.canonical.z-this.tileID.canonical.z);return{x:Math.floor((ba.canonical.x*a.EXTENT+Y.anchorX)*
aa),y:Math.floor((ba.canonical.y*a.EXTENT+Y.anchorY)*aa)}};Uc.prototype.findMatches=function(Y,ba,aa){for(var ja=this.tileID.canonical.z<ba.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ba.canonical.z),Da=0;Da<Y.length;Da++){var Sa=Y.get(Da);if(!Sa.crossTileID){var gb=this.indexedSymbolInstances[Sa.key];if(gb)for(var sb=this.getScaledCoordinates(Sa,ba),Ob=0;Ob<gb.length;Ob+=1){var Yb=gb[Ob];if(Math.abs(Yb.coord.x-sb.x)<=ja&&Math.abs(Yb.coord.y-sb.y)<=ja&&!aa[Yb.crossTileID]){aa[Yb.crossTileID]=
!0;Sa.crossTileID=Yb.crossTileID;break}}}}};var Zc=function(){this.maxCrossTileID=0};Zc.prototype.generate=function(){return++this.maxCrossTileID};var Ub=function(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};Ub.prototype.handleWrapJump=function(Y){var ba=Math.round((Y-this.lng)/360);if(0!==ba)for(var aa in this.indexes){var ja=this.indexes[aa],Da={},Sa;for(Sa in ja){var gb=ja[Sa];gb.tileID=gb.tileID.unwrapTo(gb.tileID.wrap+ba);Da[gb.tileID.key]=gb}this.indexes[aa]=Da}this.lng=Y};Ub.prototype.addBucket=
function(Y,ba,aa){if(this.indexes[Y.overscaledZ]&&this.indexes[Y.overscaledZ][Y.key]){if(this.indexes[Y.overscaledZ][Y.key].bucketInstanceId===ba.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(Y.overscaledZ,this.indexes[Y.overscaledZ][Y.key])}for(var ja=0;ja<ba.symbolInstances.length;ja++)ba.symbolInstances.get(ja).crossTileID=0;this.usedCrossTileIDs[Y.overscaledZ]||(this.usedCrossTileIDs[Y.overscaledZ]={});ja=this.usedCrossTileIDs[Y.overscaledZ];for(var Da in this.indexes){var Sa=this.indexes[Da];
if(Number(Da)>Y.overscaledZ)for(var gb in Sa){var sb=Sa[gb];sb.tileID.isChildOf(Y)&&sb.findMatches(ba.symbolInstances,Y,ja)}else(Sa=Sa[Y.scaledTo(Number(Da)).key])&&Sa.findMatches(ba.symbolInstances,Y,ja)}for(Da=0;Da<ba.symbolInstances.length;Da++)gb=ba.symbolInstances.get(Da),gb.crossTileID||(gb.crossTileID=aa.generate(),ja[gb.crossTileID]=!0);return void 0===this.indexes[Y.overscaledZ]&&(this.indexes[Y.overscaledZ]={}),this.indexes[Y.overscaledZ][Y.key]=new Uc(Y,ba.symbolInstances,ba.bucketInstanceId),
!0};Ub.prototype.removeBucketCrossTileIDs=function(Y,ba){for(var aa in ba.indexedSymbolInstances)for(var ja=0,Da=ba.indexedSymbolInstances[aa];ja<Da.length;ja+=1)delete this.usedCrossTileIDs[Y][Da[ja].crossTileID]};Ub.prototype.removeStaleBuckets=function(Y){var ba=!1,aa;for(aa in this.indexes){var ja=this.indexes[aa],Da;for(Da in ja)Y[ja[Da].bucketInstanceId]||(this.removeBucketCrossTileIDs(aa,ja[Da]),delete ja[Da],ba=!0)}return ba};var sc=function(){this.layerIndexes={};this.crossTileIDs=new Zc;
this.maxBucketInstanceId=0;this.bucketsInCurrentPlacement={}};sc.prototype.addLayer=function(Y,ba,aa){var ja=this.layerIndexes[Y.id];void 0===ja&&(ja=this.layerIndexes[Y.id]=new Ub);var Da=!1,Sa={};ja.handleWrapJump(aa);for(aa=0;aa<ba.length;aa+=1){var gb=ba[aa],sb=gb.getBucket(Y);sb&&Y.id===sb.layerIds[0]&&(sb.bucketInstanceId||(sb.bucketInstanceId=++this.maxBucketInstanceId),ja.addBucket(gb.tileID,sb,this.crossTileIDs)&&(Da=!0),Sa[sb.bucketInstanceId]=!0)}return ja.removeStaleBuckets(Sa)&&(Da=!0),
Da};sc.prototype.pruneUnusedLayers=function(Y){var ba={},aa;for(aa in Y.forEach(function(ja){ba[ja]=!0}),this.layerIndexes)ba[aa]||delete this.layerIndexes[aa]};var Dc=function(Y,ba){return a.emitValidationErrors(Y,ba&&ba.filter(function(aa){return"source.canvas"!==aa.identifier}))},gc=a.pick(Ud,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition setGeoJSONSourceData".split(" ")),wc=a.pick(Ud,["setCenter","setZoom","setBearing",
"setPitch"]),od=function(){var Y={},ba=a.styleSpec.$version,aa;for(aa in a.styleSpec.$root){var ja,Da=a.styleSpec.$root[aa];Da.required&&null!=(ja="version"===aa?ba:"array"===Da.type?[]:{})&&(Y[aa]=ja)}return Y}(),Dd=function(Y){function ba(aa,ja){var Da=this;void 0===ja&&(ja={});Y.call(this);this.map=aa;this.dispatcher=new $a(($d||($d=new Ee),$d),this);this.imageManager=new ib;this.imageManager.setEventedParent(this);this.glyphManager=new Na(aa._requestManager,ja.localIdeographFontFamily);this.lineAtlas=
new Ma(256,512);this.crossTileSymbolIndex=new sc;this._layers={};this._serializedLayers={};this._order=[];this.sourceCaches={};this.zoomHistory=new a.ZoomHistory;this._loaded=!1;this._availableImages=[];this._resetUpdates();this.dispatcher.broadcast("setReferrer",a.getReferrer());var Sa=this;this._rtlTextPluginCallback=ba.registerForPluginStateChange(function(gb){Sa.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:gb.pluginStatus,pluginURL:gb.pluginURL},function(sb,Ob){if(a.triggerPluginCompletionEvent(sb),
Ob&&Ob.every(function(cc){return cc}))for(var Yb in Sa.sourceCaches)Sa.sourceCaches[Yb].reload()})});this.on("data",function(gb){if("source"===gb.dataType&&"metadata"===gb.sourceDataType&&(gb=Da.sourceCaches[gb.sourceId])&&(gb=gb.getSource())&&gb.vectorLayerIds)for(var sb in Da._layers){var Ob=Da._layers[sb];Ob.source===gb.id&&Da._validateLayer(Ob)}})}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.loadURL=function(aa,ja){var Da=this;void 0===ja&&
(ja={});this.fire(new a.Event("dataloading",{dataType:"style"}));var Sa="boolean"==typeof ja.validate?ja.validate:!a.isMapboxURL(aa);aa=this.map._requestManager.normalizeStyleURL(aa,ja.accessToken);aa=this.map._requestManager.transformRequest(aa,a.ResourceType.Style);this._request=a.getJSON(aa,function(gb,sb){Da._request=null;gb?Da.fire(new a.ErrorEvent(gb)):sb&&Da._load(sb,Sa)})},ba.prototype.loadJSON=function(aa,ja){var Da=this;void 0===ja&&(ja={});this.fire(new a.Event("dataloading",{dataType:"style"}));
this._request=a.browser.frame(function(){Da._request=null;Da._load(aa,!1!==ja.validate)})},ba.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"}));this._load(od,!1)},ba.prototype._load=function(aa,ja){if(!ja||!Dc(this,a.validateStyle(aa))){for(var Da in this._loaded=!0,this.stylesheet=aa,aa.sources)this.addSource(Da,aa.sources[Da],{validate:!1});aa.sprite?this._loadSprite(aa.sprite):this.imageManager.setLoaded(!0);this.glyphManager.setURL(aa.glyphs);aa=E(this.stylesheet.layers);
this._order=aa.map(function(Sa){return Sa.id});this._layers={};this._serializedLayers={};for(ja=0;ja<aa.length;ja+=1)Da=aa[ja],(Da=a.createStyleLayer(Da)).setEventedParent(this,{layer:{id:Da.id}}),this._layers[Da.id]=Da,this._serializedLayers[Da.id]=Da.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new Ba(this.stylesheet.light);this.fire(new a.Event("data",{dataType:"style"}));this.fire(new a.Event("style.load"))}},ba.prototype._loadSprite=function(aa){var ja=
this;this._spriteRequest=function(Da,Sa,gb){function sb(){if(cc)gb(cc);else if(Ob&&Yb){var Kc=a.browser.getImageData(Yb),Hc={},bc;for(bc in Ob){var Aa=Ob[bc],Ha=Aa.width,Qa=Aa.height,hb=Aa.x,ub=Aa.y,Mb=Aa.sdf,Tb=Aa.pixelRatio,uc=Aa.stretchX,kc=Aa.stretchY;Aa=Aa.content;var nc=new a.RGBAImage({width:Ha,height:Qa});a.RGBAImage.copy(Kc,nc,{x:hb,y:ub},{x:0,y:0},{width:Ha,height:Qa});Hc[bc]={data:nc,pixelRatio:Tb,sdf:Mb,stretchX:uc,stretchY:kc,content:Aa}}gb(null,Hc)}}var Ob,Yb,cc,Nc=1<a.browser.devicePixelRatio?
"@2x":"",Lc=a.getJSON(Sa.transformRequest(Sa.normalizeSpriteURL(Da,Nc,".json"),a.ResourceType.SpriteJSON),function(Kc,Hc){Lc=null;cc||(cc=Kc,Ob=Hc,sb())}),Cc=a.getImage(Sa.transformRequest(Sa.normalizeSpriteURL(Da,Nc,".png"),a.ResourceType.SpriteImage),function(Kc,Hc){Cc=null;cc||(cc=Kc,Yb=Hc,sb())});return{cancel:function(){Lc&&(Lc.cancel(),Lc=null);Cc&&(Cc.cancel(),Cc=null)}}}(aa,this.map._requestManager,function(Da,Sa){if(ja._spriteRequest=null,Da)ja.fire(new a.ErrorEvent(Da));else if(Sa)for(var gb in Sa)ja.imageManager.addImage(gb,
Sa[gb]);ja.imageManager.setLoaded(!0);ja._availableImages=ja.imageManager.listImages();ja.dispatcher.broadcast("setImages",ja._availableImages);ja.fire(new a.Event("data",{dataType:"style"}))})},ba.prototype._validateLayer=function(aa){var ja=this.sourceCaches[aa.source];if(ja){var Da=aa.sourceLayer;Da&&(ja=ja.getSource(),("geojson"===ja.type||ja.vectorLayerIds&&-1===ja.vectorLayerIds.indexOf(Da))&&this.fire(new a.ErrorEvent(Error('Source layer "'+Da+'" does not exist on source "'+ja.id+'" as specified by style layer "'+
aa.id+'"'))))}},ba.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var aa in this.sourceCaches)if(!this.sourceCaches[aa].loaded())return!1;return!!this.imageManager.isLoaded()},ba.prototype._serializeLayers=function(aa){for(var ja=[],Da=0;Da<aa.length;Da+=1){var Sa=this._layers[aa[Da]];"custom"!==Sa.type&&ja.push(Sa.serialize())}return ja},ba.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var aa in this.sourceCaches)if(this.sourceCaches[aa].hasTransition())return!0;
for(var ja in this._layers)if(this._layers[ja].hasTransition())return!0;return!1},ba.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");},ba.prototype.update=function(aa){if(this._loaded){var ja=this._changed;if(this._changed){var Da=Object.keys(this._updatedLayers),Sa=Object.keys(this._removedLayers);for(Ob in(Da.length||Sa.length)&&this._updateWorkerLayers(Da,Sa),this._updatedSources)Da=this._updatedSources[Ob],"reload"===Da?this._reloadSource(Ob):"clear"===
Da&&this._clearSource(Ob);for(var gb in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[gb].updateTransitions(aa);this.light.updateTransitions(aa);this._resetUpdates()}for(var sb in this.sourceCaches)this.sourceCaches[sb].used=!1;var Ob=0;for(gb=this._order;Ob<gb.length;Ob+=1)sb=this._layers[gb[Ob]],sb.recalculate(aa,this._availableImages),!sb.isHidden(aa.zoom)&&sb.source&&(this.sourceCaches[sb.source].used=!0);this.light.recalculate(aa);this.z=aa.zoom;ja&&this.fire(new a.Event("data",
{dataType:"style"}))}},ba.prototype._updateTilesForChangedImages=function(){var aa=Object.keys(this._changedImages);if(aa.length){for(var ja in this.sourceCaches)this.sourceCaches[ja].reloadTilesForDependencies(["icons","patterns"],aa);this._changedImages={}}},ba.prototype._updateWorkerLayers=function(aa,ja){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(aa),removedIds:ja})},ba.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};
this._updatedSources={};this._updatedPaintProps={};this._changedImages={}},ba.prototype.setState=function(aa){var ja=this;if(this._checkLoaded(),Dc(this,a.validateStyle(aa)))return!1;(aa=a.clone$1(aa)).layers=E(aa.layers);var Da=function(gb,sb){if(!gb)return[{command:Ud.setStyle,args:[sb]}];var Ob=[];try{if(!a.deepEqual(gb.version,sb.version))return[{command:Ud.setStyle,args:[sb]}];a.deepEqual(gb.center,sb.center)||Ob.push({command:Ud.setCenter,args:[sb.center]});a.deepEqual(gb.zoom,sb.zoom)||Ob.push({command:Ud.setZoom,
args:[sb.zoom]});a.deepEqual(gb.bearing,sb.bearing)||Ob.push({command:Ud.setBearing,args:[sb.bearing]});a.deepEqual(gb.pitch,sb.pitch)||Ob.push({command:Ud.setPitch,args:[sb.pitch]});a.deepEqual(gb.sprite,sb.sprite)||Ob.push({command:Ud.setSprite,args:[sb.sprite]});a.deepEqual(gb.glyphs,sb.glyphs)||Ob.push({command:Ud.setGlyphs,args:[sb.glyphs]});a.deepEqual(gb.transition,sb.transition)||Ob.push({command:Ud.setTransition,args:[sb.transition]});a.deepEqual(gb.light,sb.light)||Ob.push({command:Ud.setLight,
args:[sb.light]});var Yb={},cc=[];!function(Lc,Cc,Kc,Hc){for(var bc in Cc=Cc||{},Lc=Lc||{})if(Lc.hasOwnProperty(bc)&&!Cc.hasOwnProperty(bc)){var Aa=bc,Ha=Hc;Kc.push({command:Ud.removeSource,args:[Aa]});Ha[Aa]=!0}for(bc in Cc)if(Cc.hasOwnProperty(bc))if(Lc.hasOwnProperty(bc)){if(!a.deepEqual(Lc[bc],Cc[bc])){if(Aa="geojson"===Lc[bc].type&&"geojson"===Cc[bc].type)a:{Aa=void 0;Ha=Lc;var Qa=Cc,hb=bc;for(Aa in Ha[hb])if(Ha[hb].hasOwnProperty(Aa)&&"data"!==Aa&&!a.deepEqual(Ha[hb][Aa],Qa[hb][Aa])){Aa=!1;
break a}for(Aa in Qa[hb])if(Qa[hb].hasOwnProperty(Aa)&&"data"!==Aa&&!a.deepEqual(Ha[hb][Aa],Qa[hb][Aa])){Aa=!1;break a}Aa=!0}if(Aa)Kc.push({command:Ud.setGeoJSONSourceData,args:[bc,Cc[bc].data]});else{Aa=bc;Ha=Cc;Qa=Kc;hb=Aa;var ub=Hc;Qa.push({command:Ud.removeSource,args:[hb]});ub[hb]=!0;Qa.push({command:Ud.addSource,args:[Aa,Ha[Aa]]})}}}else Kc.push({command:Ud.addSource,args:[bc,Cc[bc]]})}(gb.sources,sb.sources,cc,Yb);var Nc=[];gb.layers&&gb.layers.forEach(function(Lc){Yb[Lc.source]?Ob.push({command:Ud.removeLayer,
args:[Lc.id]}):Nc.push(Lc)});Ob=Ob.concat(cc);(function(Lc,Cc,Kc){Cc=Cc||[];var Hc,bc,Aa,Ha,Qa;var hb=(Lc=Lc||[]).map(z);var ub=Cc.map(z);Lc=Lc.reduce(B,{});var Mb=Cc.reduce(B,{}),Tb=hb.slice(),uc=Object.create(null);for(Hc=Cc=0;Cc<hb.length;Cc++)Mb.hasOwnProperty(bc=hb[Cc])?Hc++:(Kc.push({command:Ud.removeLayer,args:[bc]}),Tb.splice(Tb.indexOf(bc,Hc),1));for(Hc=Cc=0;Cc<ub.length;Cc++)Tb[Tb.length-1-Cc]!==(bc=ub[ub.length-1-Cc])&&(Lc.hasOwnProperty(bc)?(Kc.push({command:Ud.removeLayer,args:[bc]}),
Tb.splice(Tb.lastIndexOf(bc,Tb.length-Hc),1)):Hc++,Kc.push({command:Ud.addLayer,args:[Mb[bc],Tb[Tb.length-Cc]]}),Tb.splice(Tb.length-Cc,0,bc),uc[bc]=!0);for(Cc=0;Cc<ub.length;Cc++)if(Aa=Lc[bc=ub[Cc]],Ha=Mb[bc],!uc[bc]&&!a.deepEqual(Aa,Ha))if(a.deepEqual(Aa.source,Ha.source)&&a.deepEqual(Aa["source-layer"],Ha["source-layer"])&&a.deepEqual(Aa.type,Ha.type)){for(Qa in F(Aa.layout,Ha.layout,Kc,bc,null,Ud.setLayoutProperty),F(Aa.paint,Ha.paint,Kc,bc,null,Ud.setPaintProperty),a.deepEqual(Aa.filter,Ha.filter)||
Kc.push({command:Ud.setFilter,args:[bc,Ha.filter]}),a.deepEqual(Aa.minzoom,Ha.minzoom)&&a.deepEqual(Aa.maxzoom,Ha.maxzoom)||Kc.push({command:Ud.setLayerZoomRange,args:[bc,Ha.minzoom,Ha.maxzoom]}),Aa)Aa.hasOwnProperty(Qa)&&"layout"!==Qa&&"paint"!==Qa&&"filter"!==Qa&&"metadata"!==Qa&&"minzoom"!==Qa&&"maxzoom"!==Qa&&(0===Qa.indexOf("paint.")?F(Aa[Qa],Ha[Qa],Kc,bc,Qa.slice(6),Ud.setPaintProperty):a.deepEqual(Aa[Qa],Ha[Qa])||Kc.push({command:Ud.setLayerProperty,args:[bc,Qa,Ha[Qa]]}));for(Qa in Ha)Ha.hasOwnProperty(Qa)&&
!Aa.hasOwnProperty(Qa)&&"layout"!==Qa&&"paint"!==Qa&&"filter"!==Qa&&"metadata"!==Qa&&"minzoom"!==Qa&&"maxzoom"!==Qa&&(0===Qa.indexOf("paint.")?F(Aa[Qa],Ha[Qa],Kc,bc,Qa.slice(6),Ud.setPaintProperty):a.deepEqual(Aa[Qa],Ha[Qa])||Kc.push({command:Ud.setLayerProperty,args:[bc,Qa,Ha[Qa]]}))}else Kc.push({command:Ud.removeLayer,args:[bc]}),hb=Tb[Tb.lastIndexOf(bc)+1],Kc.push({command:Ud.addLayer,args:[Ha,hb]})})(Nc,sb.layers,Ob)}catch(Lc){console.warn("Unable to compute style diff:",Lc),Ob=[{command:Ud.setStyle,
args:[sb]}]}return Ob}(this.serialize(),aa).filter(function(gb){return!(gb.command in wc)});if(0===Da.length)return!1;var Sa=Da.filter(function(gb){return!(gb.command in gc)});if(0<Sa.length)throw Error("Unimplemented: "+Sa.map(function(gb){return gb.command}).join(", ")+".");return Da.forEach(function(gb){"setTransition"!==gb.command&&ja[gb.command].apply(ja,gb.args)}),this.stylesheet=aa,!0},ba.prototype.addImage=function(aa,ja){if(this.getImage(aa))return this.fire(new a.ErrorEvent(Error("An image with this name already exists.")));
this.imageManager.addImage(aa,ja);this._availableImages=this.imageManager.listImages();this._changed=this._changedImages[aa]=!0;this.fire(new a.Event("data",{dataType:"style"}))},ba.prototype.updateImage=function(aa,ja){this.imageManager.updateImage(aa,ja)},ba.prototype.getImage=function(aa){return this.imageManager.getImage(aa)},ba.prototype.removeImage=function(aa){if(!this.getImage(aa))return this.fire(new a.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(aa);
this._availableImages=this.imageManager.listImages();this._changed=this._changedImages[aa]=!0;this.fire(new a.Event("data",{dataType:"style"}))},ba.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},ba.prototype.addSource=function(aa,ja,Da){var Sa=this;if(void 0===Da&&(Da={}),this._checkLoaded(),void 0!==this.sourceCaches[aa])throw Error("There is already a source with this ID");if(!ja.type)throw Error("The type property must be defined, but the only the following properties were given: "+
Object.keys(ja).join(", ")+".");if(!(0<=["vector","raster","geojson","video","image"].indexOf(ja.type)&&this._validate(a.validateStyle.source,"sources."+aa,ja,null,Da))){this.map&&this.map._collectResourceTiming&&(ja.collectResourceTiming=!0);var gb=this.sourceCaches[aa]=new se(aa,ja,this.dispatcher);gb.style=this;gb.setEventedParent(this,function(){return{isSourceLoaded:Sa.loaded(),source:gb.serialize(),sourceId:aa}});gb.onAdd(this.map);this._changed=!0}},ba.prototype.removeSource=function(aa){if(this._checkLoaded(),
void 0===this.sourceCaches[aa])throw Error("There is no source with this ID");for(var ja in this._layers)if(this._layers[ja].source===aa)return this.fire(new a.ErrorEvent(Error('Source "'+aa+'" cannot be removed while layer "'+ja+'" is using it.')));ja=this.sourceCaches[aa];delete this.sourceCaches[aa];delete this._updatedSources[aa];ja.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:aa}));ja.setEventedParent(null);ja.clearTiles();ja.onRemove&&ja.onRemove(this.map);this._changed=
!0},ba.prototype.setGeoJSONSourceData=function(aa,ja){this._checkLoaded();this.sourceCaches[aa].getSource().setData(ja);this._changed=!0},ba.prototype.getSource=function(aa){return this.sourceCaches[aa]&&this.sourceCaches[aa].getSource()},ba.prototype.addLayer=function(aa,ja,Da){void 0===Da&&(Da={});this._checkLoaded();var Sa=aa.id;if(this.getLayer(Sa))this.fire(new a.ErrorEvent(Error('Layer with id "'+Sa+'" already exists on this map')));else{if("custom"===aa.type){if(Dc(this,a.validateCustomStyleLayer(aa)))return;
aa=a.createStyleLayer(aa)}else{if("object"==typeof aa.source&&(this.addSource(Sa,aa.source),aa=a.clone$1(aa),aa=a.extend(aa,{source:Sa})),this._validate(a.validateStyle.layer,"layers."+Sa,aa,{arrayIndex:-1},Da))return;aa=a.createStyleLayer(aa);this._validateLayer(aa);aa.setEventedParent(this,{layer:{id:Sa}});this._serializedLayers[aa.id]=aa.serialize()}Da=ja?this._order.indexOf(ja):this._order.length;if(ja&&-1===Da)this.fire(new a.ErrorEvent(Error('Layer with id "'+ja+'" does not exist on this map.')));
else{if(this._order.splice(Da,0,Sa),this._layerOrderChanged=!0,this._layers[Sa]=aa,this._removedLayers[Sa]&&aa.source&&"custom"!==aa.type)ja=this._removedLayers[Sa],delete this._removedLayers[Sa],ja.type!==aa.type?this._updatedSources[aa.source]="clear":(this._updatedSources[aa.source]="reload",this.sourceCaches[aa.source].pause());this._updateLayer(aa);aa.onAdd&&aa.onAdd(this.map)}}},ba.prototype.moveLayer=function(aa,ja){if(this._checkLoaded(),this._changed=!0,this._layers[aa]){if(aa!==ja){var Da=
this._order.indexOf(aa);this._order.splice(Da,1);Da=ja?this._order.indexOf(ja):this._order.length;ja&&-1===Da?this.fire(new a.ErrorEvent(Error('Layer with id "'+ja+'" does not exist on this map.'))):(this._order.splice(Da,0,aa),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(Error("The layer '"+aa+"' does not exist in the map's style and cannot be moved.")))},ba.prototype.removeLayer=function(aa){this._checkLoaded();var ja=this._layers[aa];if(ja){ja.setEventedParent(null);var Da=this._order.indexOf(aa);
this._order.splice(Da,1);this._changed=this._layerOrderChanged=!0;this._removedLayers[aa]=ja;delete this._layers[aa];delete this._serializedLayers[aa];delete this._updatedLayers[aa];delete this._updatedPaintProps[aa];ja.onRemove&&ja.onRemove(this.map)}else this.fire(new a.ErrorEvent(Error("The layer '"+aa+"' does not exist in the map's style and cannot be removed.")))},ba.prototype.getLayer=function(aa){return this._layers[aa]},ba.prototype.hasLayer=function(aa){return aa in this._layers},ba.prototype.setLayerZoomRange=
function(aa,ja,Da){this._checkLoaded();var Sa=this.getLayer(aa);Sa?Sa.minzoom===ja&&Sa.maxzoom===Da||(null!=ja&&(Sa.minzoom=ja),null!=Da&&(Sa.maxzoom=Da),this._updateLayer(Sa)):this.fire(new a.ErrorEvent(Error("The layer '"+aa+"' does not exist in the map's style and cannot have zoom extent.")))},ba.prototype.setFilter=function(aa,ja,Da){void 0===Da&&(Da={});this._checkLoaded();var Sa=this.getLayer(aa);if(Sa){if(!a.deepEqual(Sa.filter,ja))return null==ja?(Sa.filter=void 0,void this._updateLayer(Sa)):
void(this._validate(a.validateStyle.filter,"layers."+Sa.id+".filter",ja,null,Da)||(Sa.filter=a.clone$1(ja),this._updateLayer(Sa)))}else this.fire(new a.ErrorEvent(Error("The layer '"+aa+"' does not exist in the map's style and cannot be filtered.")))},ba.prototype.getFilter=function(aa){return a.clone$1(this.getLayer(aa).filter)},ba.prototype.setLayoutProperty=function(aa,ja,Da,Sa){void 0===Sa&&(Sa={});this._checkLoaded();var gb=this.getLayer(aa);gb?a.deepEqual(gb.getLayoutProperty(ja),Da)||(gb.setLayoutProperty(ja,
Da,Sa),this._updateLayer(gb)):this.fire(new a.ErrorEvent(Error("The layer '"+aa+"' does not exist in the map's style and cannot be styled.")))},ba.prototype.getLayoutProperty=function(aa,ja){var Da=this.getLayer(aa);if(Da)return Da.getLayoutProperty(ja);this.fire(new a.ErrorEvent(Error("The layer '"+aa+"' does not exist in the map's style.")))},ba.prototype.setPaintProperty=function(aa,ja,Da,Sa){void 0===Sa&&(Sa={});this._checkLoaded();var gb=this.getLayer(aa);gb?a.deepEqual(gb.getPaintProperty(ja),
Da)||(gb.setPaintProperty(ja,Da,Sa)&&this._updateLayer(gb),this._changed=!0,this._updatedPaintProps[aa]=!0):this.fire(new a.ErrorEvent(Error("The layer '"+aa+"' does not exist in the map's style and cannot be styled.")))},ba.prototype.getPaintProperty=function(aa,ja){return this.getLayer(aa).getPaintProperty(ja)},ba.prototype.setFeatureState=function(aa,ja){this._checkLoaded();var Da=aa.source,Sa=aa.sourceLayer,gb=this.sourceCaches[Da];void 0!==gb?(Da=gb.getSource().type,"geojson"===Da&&Sa?this.fire(new a.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter."))):
"vector"!==Da||Sa?(void 0===aa.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),gb.setFeatureState(Sa,aa.id,ja)):this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))):this.fire(new a.ErrorEvent(Error("The source '"+Da+"' does not exist in the map's style.")))},ba.prototype.removeFeatureState=function(aa,ja){this._checkLoaded();var Da=aa.source,Sa=this.sourceCaches[Da];if(void 0!==Sa){Da=Sa.getSource().type;var gb=
"vector"===Da?aa.sourceLayer:void 0;"vector"!==Da||gb?ja&&"string"!=typeof aa.id&&"number"!=typeof aa.id?this.fire(new a.ErrorEvent(Error("A feature id is requred to remove its specific state property."))):Sa.removeFeatureState(gb,aa.id,ja):this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(Error("The source '"+Da+"' does not exist in the map's style.")))},ba.prototype.getFeatureState=function(aa){this._checkLoaded();
var ja=aa.source,Da=aa.sourceLayer,Sa=this.sourceCaches[ja];if(void 0!==Sa){if("vector"!==Sa.getSource().type||Da)return void 0===aa.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),Sa.getFeatureState(Da,aa.id);this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(Error("The source '"+ja+"' does not exist in the map's style.")))},ba.prototype.getTransition=function(){return a.extend({duration:300,
delay:0},this.stylesheet&&this.stylesheet.transition)},ba.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(aa){return aa.serialize()}),
layers:this._serializeLayers(this._order)},function(aa){return void 0!==aa})},ba.prototype._updateLayer=function(aa){this._updatedLayers[aa.id]=!0;aa.source&&!this._updatedSources[aa.source]&&"raster"!==this.sourceCaches[aa.source].getSource().type&&(this._updatedSources[aa.source]="reload",this.sourceCaches[aa.source].pause());this._changed=!0},ba.prototype._flattenAndSortRenderedFeatures=function(aa){for(var ja={},Da=[],Sa=this._order.length-1;0<=Sa;Sa--){var gb=this._order[Sa];if("fill-extrusion"===
this._layers[gb].type){ja[gb]=Sa;for(var sb=0,Ob=aa;sb<Ob.length;sb+=1){var Yb=Ob[sb][gb];if(Yb)for(var cc=0;cc<Yb.length;cc+=1)Da.push(Yb[cc])}}}Da.sort(function(Lc,Cc){return Cc.intersectionZ-Lc.intersectionZ});Sa=[];for(gb=this._order.length-1;0<=gb;gb--)if(sb=this._order[gb],"fill-extrusion"===this._layers[sb].type)for(sb=Da.length-1;0<=sb;sb--){Ob=Da[sb].feature;if(ja[Ob.layer.id]<gb)break;Sa.push(Ob);Da.pop()}else for(Ob=0,cc=aa;Ob<cc.length;Ob+=1){var Nc=cc[Ob][sb];if(Nc)for(Yb=0;Yb<Nc.length;Yb+=
1)Sa.push(Nc[Yb].feature)}return Sa},ba.prototype.queryRenderedFeatures=function(aa,ja,Da){ja&&ja.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",ja.filter,null,ja);var Sa={};if(ja&&ja.layers){if(!Array.isArray(ja.layers))return this.fire(new a.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var gb=0,sb=ja.layers;gb<sb.length;gb+=1){var Ob=sb[gb],Yb=this._layers[Ob];if(!Yb)return this.fire(new a.ErrorEvent(Error("The layer '"+Ob+"' does not exist in the map's style and cannot be queried for features."))),
[];Sa[Yb.source]=!0}}gb=[];for(var cc in ja.availableImages=this._availableImages,this.sourceCaches)ja.layers&&!Sa[cc]||gb.push(g(this.sourceCaches[cc],this._layers,this._serializedLayers,aa,ja,Da));return this.placement&&gb.push(function(Nc,Lc,Cc,Kc,Hc,bc,Aa){var Ha={},Qa=bc.queryRenderedSymbols(Kc);Kc=[];bc=0;for(var hb=Object.keys(Qa).map(Number);bc<hb.length;bc+=1)Kc.push(Aa[hb[bc]]);Kc.sort(q);Aa=function(){var uc=Mb[ub],kc=uc.featureIndex.lookupSymbolFeatures(Qa[uc.bucketInstanceId],Lc,uc.bucketIndex,
uc.sourceLayerIndex,Hc.filter,Hc.layers,Hc.availableImages,Nc),nc;for(nc in kc){var ad=Ha[nc]=Ha[nc]||[],kd=kc[nc];kd.sort(function(Cd,Md){var Ed=uc.featureSortOrder;return Ed?(Cd=Ed.indexOf(Cd.featureIndex),Ed.indexOf(Md.featureIndex)-Cd):Md.featureIndex-Cd.featureIndex});for(var td=0;td<kd.length;td+=1)ad.push(kd[td])}};for(var ub=0,Mb=Kc;ub<Mb.length;ub+=1)Aa();Aa=function(uc){Ha[uc].forEach(function(kc){kc=kc.feature;var nc=Cc[Nc[uc].source].getFeatureState(kc.layer["source-layer"],kc.id);kc.source=
kc.layer.source;kc.layer["source-layer"]&&(kc.sourceLayer=kc.layer["source-layer"]);kc.state=nc})};for(var Tb in Ha)Aa(Tb);return Ha}(this._layers,this._serializedLayers,this.sourceCaches,aa,ja,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(gb)},ba.prototype.querySourceFeatures=function(aa,ja){ja&&ja.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",ja.filter,null,ja);return(aa=this.sourceCaches[aa])?function(Da,Sa){for(var gb=
Da.getRenderableIds().map(function(Lc){return Da.getTileByID(Lc)}),sb=[],Ob={},Yb=0;Yb<gb.length;Yb++){var cc=gb[Yb],Nc=cc.tileID.canonical.key;Ob[Nc]||(Ob[Nc]=!0,cc.querySourceFeatures(sb,Sa))}return sb}(aa,ja):[]},ba.prototype.addSourceType=function(aa,ja,Da){return ba.getSourceType(aa)?Da(Error('A source type called "'+aa+'" already exists.')):(ba.setSourceType(aa,ja),ja.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:aa,url:ja.workerSourceURL},Da):Da(null,null))},ba.prototype.getLight=
function(){return this.light.getLight()},ba.prototype.setLight=function(aa,ja){void 0===ja&&(ja={});this._checkLoaded();var Da=this.light.getLight(),Sa=!1,gb;for(gb in aa)if(!a.deepEqual(aa[gb],Da[gb])){Sa=!0;break}Sa&&(Da={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(aa,ja),this.light.updateTransitions(Da))},ba.prototype._validate=function(aa,ja,Da,Sa,gb){return void 0===gb&&(gb={}),(!gb||!1!==gb.validate)&&Dc(this,aa.call(a.validateStyle,
a.extend({key:ja,style:this.serialize(),value:Da,styleSpec:a.styleSpec},Sa)))},ba.prototype._remove=function(){for(var aa in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[aa].setEventedParent(null);for(var ja in this.sourceCaches)this.sourceCaches[ja].clearTiles(),this.sourceCaches[ja].setEventedParent(null);this.imageManager.setEventedParent(null);
this.setEventedParent(null);this.dispatcher.remove()},ba.prototype._clearSource=function(aa){this.sourceCaches[aa].clearTiles()},ba.prototype._reloadSource=function(aa){this.sourceCaches[aa].resume();this.sourceCaches[aa].reload()},ba.prototype._updateSources=function(aa){for(var ja in this.sourceCaches)this.sourceCaches[ja].update(aa)},ba.prototype._generateCollisionBoxes=function(){for(var aa in this.sourceCaches)this._reloadSource(aa)},ba.prototype._updatePlacement=function(aa,ja,Da,Sa,gb){void 0===
gb&&(gb=!1);for(var sb=!1,Ob=!1,Yb={},cc=0,Nc=this._order;cc<Nc.length;cc+=1){var Lc=this._layers[Nc[cc]];if("symbol"===Lc.type){if(!Yb[Lc.source]){var Cc=this.sourceCaches[Lc.source];Yb[Lc.source]=Cc.getRenderableIds(!0).map(function(Kc){return Cc.getTileByID(Kc)}).sort(function(Kc,Hc){return Hc.tileID.overscaledZ-Kc.tileID.overscaledZ||(Kc.tileID.isLessThan(Hc.tileID)?-1:1)})}Lc=this.crossTileSymbolIndex.addLayer(Lc,Yb[Lc.source],aa.center.lng);sb=sb||Lc}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),
((gb=gb||this._layerOrderChanged||0===Da)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),aa.zoom))&&(this.pauseablePlacement=new Qc(aa,this._order,gb,ja,Da,Sa,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Yb),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),Ob=!0),sb&&
this.pauseablePlacement.placement.setStale()),Ob||sb)for(aa=0,ja=this._order;aa<ja.length;aa+=1)Da=this._layers[ja[aa]],"symbol"===Da.type&&this.placement.updateLayerOpacities(Da,Yb[Da.source]);return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},ba.prototype._releaseSymbolFadeTiles=function(){for(var aa in this.sourceCaches)this.sourceCaches[aa].releaseSymbolFadeTiles()},ba.prototype.getImages=function(aa,ja,Da){this.imageManager.getImages(ja.icons,Da);this._updateTilesForChangedImages();
(aa=this.sourceCaches[ja.source])&&aa.setDependencies(ja.tileID.key,ja.type,ja.icons)},ba.prototype.getGlyphs=function(aa,ja,Da){this.glyphManager.getGlyphs(ja.stacks,Da)},ba.prototype.getResource=function(aa,ja,Da){return a.makeRequest(ja,Da)},ba}(a.Evented);Dd.getSourceType=function(Y){return pc[Y]};Dd.setSourceType=function(Y,ba){pc[Y]=ba};Dd.registerForPluginStateChange=a.registerForPluginStateChange;var Ld=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Jd=ea("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif",
"#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue\x3dint(packedValue);int v0\x3dpackedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity\x3dint(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor\x3ddecode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor\x3ddecode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset\x3dmod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),
Hd=ea("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor\x3du_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),Ie=ea("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),
Ge=ea("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dv_data.xy;float extrude_length\x3dlength(extrude);lowp float antialiasblur\x3dv_data.z;float antialiased_blur\x3d-max(blur,antialiasblur);float opacity_t\x3dsmoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t\x3dstroke_width \x3c 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor\x3dopacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center\x3dfloor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position\x3dcircle_center;if (u_scale_with_map) {corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center\x3du_matrix*vec4(circle_center,0,1);corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position\x3du_matrix*vec4(corner_position,0,1);} else {gl_Position\x3du_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur\x3d1.0/u_device_pixel_ratio/(radius+stroke_width);v_data\x3dvec3(extrude.x,extrude.y,antialiasblur);}"),
Se=ea("void main() {gl_FragColor\x3dvec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),xe=ea("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d\x3d-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val\x3dweight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor\x3dvec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO\x3d1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);float S\x3dsqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude\x3dS*unscaled_extrude;vec2 extrude\x3dv_extrude*radius*u_extrude_scale;vec4 pos\x3dvec4(floor(a_pos*0.5)+extrude,0,1);gl_Position\x3du_matrix*pos;}"),
Oe=ea("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t\x3dtexture2D(u_image,v_pos).r;vec4 color\x3dtexture2D(u_color_ramp,vec2(t,0.5));gl_FragColor\x3dcolor*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos*u_world,0,1);v_pos.x\x3da_pos.x;v_pos.y\x3d1.0-a_pos.y;}"),hf=
ea("varying float v_placed;varying float v_notUsed;void main() {float alpha\x3d0.5;gl_FragColor\x3dvec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed \x3e 0.5) {gl_FragColor\x3dvec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed \x3e 0.5) {gl_FragColor*\x3d.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint\x3du_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position\x3du_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+\x3d(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed\x3da_placed.x;v_notUsed\x3da_placed.y;}"),
Qf=ea("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha\x3d0.5*min(v_perspective_ratio,1.0);float stroke_radius\x3d0.9*max(v_perspective_ratio,1.0);float distance_to_center\x3dlength(v_extrude);float distance_to_edge\x3dabs(distance_to_center-v_radius);float opacity_t\x3dsmoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color\x3dmix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor\x3dcolor*alpha*opacity_t;}",
"attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart\x3du_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  \x3du_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/\x3drayStart.w;rayEnd.xyz  /\x3drayEnd.w;highp float t\x3d(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos\x3da_pos;float radius\x3da_radius;float collision\x3da_flags.x;float vertexIdx\x3da_flags.y;vec2 quadVertexOffset\x3dvec2(mix(-1.0,1.0,float(vertexIdx \x3e\x3d2.0)),mix(-1.0,1.0,float(vertexIdx \x3e\x3d1.0 \x26\x26 vertexIdx \x3c\x3d2.0)));vec2 quadVertexExtent\x3dquadVertexOffset*radius;vec3 tilePos\x3dtoTilePosition(quadCenterPos);vec4 clipPos\x3du_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance\x3dclipPos.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor\x3d1.2;v_radius\x3dradius;v_extrude\x3dquadVertexExtent*padding_factor;v_perspective_ratio\x3dcollision_perspective_ratio;v_collision\x3dcollision;gl_Position\x3dvec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),
jh=ea("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color\x3dtexture2D(u_overlay,v_uv);gl_FragColor\x3dmix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv\x3da_pos/8192.0;gl_Position\x3du_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Pi=ea("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor\x3dcolor*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);}"),di=ea("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3doutline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Wf=ea("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);float dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3dmix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;gl_Position\x3du_matrix*vec4(a_pos,0,1);vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),
zi=ea("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),
pg=ea("varying vec4 v_color;void main() {gl_FragColor\x3dv_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal\x3da_normal_ed.xyz;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);gl_Position\x3du_matrix*vec4(a_pos,t \x3e 0.0 ? height : base,1);float colorvalue\x3dcolor.r*0.2126+color.g*0.7152+color.b*0.0722;v_color\x3dvec4(0.0,0.0,0.0,1.0);vec4 ambientlight\x3dvec4(0.03,0.03,0.03,1.0);color+\x3dambientlight;float directional\x3dclamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+\x3dclamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+\x3dclamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+\x3dclamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*\x3du_opacity;}"),
ei=ea("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);vec4 mixedColor\x3dmix(color1,color2,u_fade);gl_FragColor\x3dmixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec3 normal\x3da_normal_ed.xyz;float edgedistance\x3da_normal_ed.w;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);float z\x3dt \x3e 0.0 ? height : base;gl_Position\x3du_matrix*vec4(a_pos,z,1);vec2 pos\x3dnormal.x\x3d\x3d1.0 \x26\x26 normal.y\x3d\x3d0.0 \x26\x26 normal.z\x3d\x3d16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting\x3dvec4(0.0,0.0,0.0,1.0);float directional\x3dclamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+\x3dclamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*\x3du_opacity;}"),
Ih=ea("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data\x3dtexture2D(u_image,coord)*255.0;data.a\x3d-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon\x3d1.0/u_dimension;float a\x3dgetElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b\x3dgetElevation(v_pos+vec2(0,-epsilon.y),0.0);float c\x3dgetElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d\x3dgetElevation(v_pos+vec2(-epsilon.x,0),0.0);float e\x3dgetElevation(v_pos,0.0);float f\x3dgetElevation(v_pos+vec2(epsilon.x,0),0.0);float g\x3dgetElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h\x3dgetElevation(v_pos+vec2(0,epsilon.y),0.0);float i\x3dgetElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration\x3du_zoom \x3c 2.0 ? 0.4 : u_zoom \x3c 4.5 ? 0.35 : 0.3;vec2 deriv\x3dvec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor\x3dclamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);highp vec2 epsilon\x3d1.0/u_dimension;float scale\x3d(u_dimension.x-2.0)/u_dimension.x;v_pos\x3d(a_texture_pos/8192.0)*scale+epsilon;}"),Og=ea("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel\x3dtexture2D(u_image,v_pos);vec2 deriv\x3d((pixel.rg*2.0)-1.0);float scaleFactor\x3dcos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope\x3datan(1.25*length(deriv)/scaleFactor);float aspect\x3dderiv.x !\x3d0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y \x3e 0.0 ? 1.0 :-1.0);float intensity\x3du_light.x;float azimuth\x3du_light.y+PI;float base\x3d1.875-intensity*1.75;float maxValue\x3d0.5*PI;float scaledSlope\x3dintensity !\x3d0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent\x3dcos(scaledSlope);vec4 accent_color\x3d(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade\x3dabs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color\x3dmix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor\x3daccent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3da_texture_pos/8192.0;}"),ig=ea("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
Jh=ea("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color\x3dtexture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_lineprogress\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
qg=ea("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a\x3dvec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b\x3dvec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a\x3ddisplay_size_a.y/v_width;float aspect_b\x3ddisplay_size_b.y/v_width;float dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a\x3dmod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b\x3dmod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y\x3d0.5*v_normal.y+0.5;vec2 texel_size\x3d1.0/u_texsize;vec2 pos_a\x3dmix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b\x3dmix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color\x3dmix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor\x3dcolor*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_linesofar\x3da_linesofar;v_width2\x3dvec2(outset,inset);v_width\x3dfloorwidth;}"),
Kh=ea("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a\x3dtexture2D(u_image,v_tex_a).a;float sdfdist_b\x3dtexture2D(u_image,v_tex_b).a;float sdfdist\x3dmix(sdfdist_a,sdfdist_b,u_mix);alpha*\x3dsmoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_tex_a\x3dvec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b\x3dvec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2\x3dvec2(outset,inset);}"),
Lh=ea("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0\x3dtexture2D(u_image0,v_pos0);vec4 color1\x3dtexture2D(u_image1,v_pos1);if (color0.a \x3e 0.0) {color0.rgb\x3dcolor0.rgb/color0.a;}if (color1.a \x3e 0.0) {color1.rgb\x3dcolor1.rgb/color1.a;}vec4 color\x3dmix(color0,color1,u_fade_t);color.a*\x3du_opacity;vec3 rgb\x3dcolor.rgb;rgb\x3dvec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average\x3d(color.r+color.g+color.b)/3.0;rgb+\x3d(average-rgb)*u_saturation_factor;rgb\x3d(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec\x3dvec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec\x3dvec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor\x3dvec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos0\x3d(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1\x3d(v_pos0*u_scale_parent)+u_tl_parent;}"),fi=ea("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha\x3dopacity*v_fade_opacity;gl_FragColor\x3dtexture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;vec2 a_minFontScale\x3da_pixeloffset.zw/256.0;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex\x3da_tex/u_texsize;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));}"),
Mh=ea("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;vec2 tex\x3dv_data0.xy;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fade_opacity\x3dv_data1[2];float fontScale\x3du_is_text ? size/24.0 : size;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0\x3da_tex/u_texsize;v_data1\x3dvec3(gamma_scale,size,interpolated_fade_opacity);}"),
gi=ea("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity\x3dv_data1[2];if (v_data1.w\x3d\x3dICON) {vec2 tex_icon\x3dv_data0.zw;lowp float alpha\x3dopacity*fade_opacity;gl_FragColor\x3dtexture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\nreturn;}vec2 tex\x3dv_data0.xy;float EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fontScale\x3dsize/24.0;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);float is_sdf\x3da_size[0]-2.0*a_size_min;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3dsize/24.0;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy\x3da_tex/u_texsize;v_data0.zw\x3da_tex/u_texsize_icon;v_data1\x3dvec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),
hi=Object.freeze({__proto__:null,prelude:Jd,background:Hd,backgroundPattern:Ie,circle:Ge,clippingMask:Se,heatmap:xe,heatmapTexture:Oe,collisionBox:hf,collisionCircle:Qf,debug:jh,fill:Pi,fillOutline:di,fillOutlinePattern:Wf,fillPattern:zi,fillExtrusion:pg,fillExtrusionPattern:ei,hillshadePrepare:Ih,hillshade:Og,line:ig,lineGradient:Jh,linePattern:qg,lineSDF:Kh,raster:Lh,symbolIcon:fi,symbolSDF:Mh,symbolTextAndIcon:gi}),ii=function(){this.boundLayoutVertexBuffer=this.boundProgram=null;this.boundPaintVertexBuffers=
[];this.vao=this.boundDynamicVertexBuffer=this.boundVertexOffset=this.boundIndexBuffer=null};ii.prototype.bind=function(Y,ba,aa,ja,Da,Sa,gb,sb){this.context=Y;for(var Ob=this.boundPaintVertexBuffers.length!==ja.length,Yb=0;!Ob&&Yb<ja.length;Yb++)this.boundPaintVertexBuffers[Yb]!==ja[Yb]&&(Ob=!0);Y.extVertexArrayObject&&this.vao&&this.boundProgram===ba&&this.boundLayoutVertexBuffer===aa&&!Ob&&this.boundIndexBuffer===Da&&this.boundVertexOffset===Sa&&this.boundDynamicVertexBuffer===gb&&this.boundDynamicVertexBuffer2===
sb?(Y.bindVertexArrayOES.set(this.vao),gb&&gb.bind(),Da&&Da.dynamicDraw&&Da.bind(),sb&&sb.bind()):this.freshBind(ba,aa,ja,Da,Sa,gb,sb)};ii.prototype.freshBind=function(Y,ba,aa,ja,Da,Sa,gb){var sb=Y.numAttributes,Ob=this.context,Yb=Ob.gl;if(Ob.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ob.extVertexArrayObject.createVertexArrayOES(),Ob.bindVertexArrayOES.set(this.vao),this.boundProgram=Y,this.boundLayoutVertexBuffer=ba,this.boundPaintVertexBuffers=aa,this.boundIndexBuffer=ja,this.boundVertexOffset=
Da,this.boundDynamicVertexBuffer=Sa,this.boundDynamicVertexBuffer2=gb;else{var cc=Ob.currentNumAttributes||0;for(var Nc=sb;Nc<cc;Nc++)Yb.disableVertexAttribArray(Nc)}ba.enableAttributes(Yb,Y);for(cc=0;cc<aa.length;cc+=1)aa[cc].enableAttributes(Yb,Y);Sa&&Sa.enableAttributes(Yb,Y);gb&&gb.enableAttributes(Yb,Y);ba.bind();ba.setVertexAttribPointers(Yb,Y,Da);for(ba=0;ba<aa.length;ba+=1)cc=aa[ba],cc.bind(),cc.setVertexAttribPointers(Yb,Y,Da);Sa&&(Sa.bind(),Sa.setVertexAttribPointers(Yb,Y,Da));ja&&ja.bind();
gb&&(gb.bind(),gb.setVertexAttribPointers(Yb,Y,Da));Ob.currentNumAttributes=sb};ii.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ue=function(Y,ba,aa,ja,Da){var Sa=Y.gl;this.program=Sa.createProgram();var gb=aa?aa.defines():[];Da&&gb.push("#define OVERDRAW_INSPECTOR;");Da=gb.concat(Jd.fragmentSource,ba.fragmentSource).join("\n");gb=gb.concat(Jd.vertexSource,ba.vertexSource).join("\n");ba=Sa.createShader(Sa.FRAGMENT_SHADER);
if(Sa.isContextLost())this.failedToCreate=!0;else if(Sa.shaderSource(ba,Da),Sa.compileShader(ba),Sa.attachShader(this.program,ba),Da=Sa.createShader(Sa.VERTEX_SHADER),Sa.isContextLost())this.failedToCreate=!0;else{Sa.shaderSource(Da,gb);Sa.compileShader(Da);Sa.attachShader(this.program,Da);gb=aa?aa.layoutAttributes:[];for(var sb=0;sb<gb.length;sb++)Sa.bindAttribLocation(this.program,sb,gb[sb].name);Sa.linkProgram(this.program);Sa.deleteShader(Da);Sa.deleteShader(ba);this.numAttributes=Sa.getProgramParameter(this.program,
Sa.ACTIVE_ATTRIBUTES);this.attributes={};ba={};for(Da=0;Da<this.numAttributes;Da++)(gb=Sa.getActiveAttrib(this.program,Da))&&(this.attributes[gb.name]=Sa.getAttribLocation(this.program,gb.name));Da=Sa.getProgramParameter(this.program,Sa.ACTIVE_UNIFORMS);for(gb=0;gb<Da;gb++)(sb=Sa.getActiveUniform(this.program,gb))&&(ba[sb.name]=Sa.getUniformLocation(this.program,sb.name));this.fixedUniforms=ja(Y,ba);this.binderUniforms=aa?aa.getUniforms(Y,ba):[]}};Ue.prototype.draw=function(Y,ba,aa,ja,Da,Sa,gb,sb,
Ob,Yb,cc,Nc,Lc,Cc,Kc,Hc){var bc,Aa=Y.gl;if(!this.failedToCreate){for(var Ha in Y.program.set(this.program),Y.setDepthMode(aa),Y.setStencilMode(ja),Y.setColorMode(Da),Y.setCullFace(Sa),this.fixedUniforms)this.fixedUniforms[Ha].set(gb[Ha]);Cc&&Cc.setUniforms(Y,this.binderUniforms,Nc,{zoom:Lc});aa=(bc={},bc[Aa.LINES]=2,bc[Aa.TRIANGLES]=3,bc[Aa.LINE_STRIP]=1,bc)[ba];bc=0;for(cc=cc.get();bc<cc.length;bc+=1)ja=cc[bc],Da=ja.vaos||(ja.vaos={}),(Da[sb]||(Da[sb]=new ii)).bind(Y,this,Ob,Cc?Cc.getPaintVertexBuffers():
[],Yb,ja.vertexOffset,Kc,Hc),Aa.drawElements(ba,ja.primitiveLength*aa,Aa.UNSIGNED_SHORT,ja.primitiveOffset*aa*2)}};var Dg=function(Y,ba,aa,ja){var Da=ba.style.light,Sa=Da.properties.get("position");Sa=[Sa.x,Sa.y,Sa.z];var gb=a.create$1();"viewport"===Da.properties.get("anchor")&&a.fromRotation(gb,-ba.transform.angle);a.transformMat3(Sa,Sa,gb);ba=Da.properties.get("color");return{u_matrix:Y,u_lightpos:Sa,u_lightintensity:Da.properties.get("intensity"),u_lightcolor:[ba.r,ba.g,ba.b],u_vertical_gradient:+aa,
u_opacity:ja}},ji=function(Y,ba,aa,ja){var Da=Y.transform;if("map"===ja.paint.get("circle-pitch-alignment")){var Sa=S(aa,1,Da.zoom);var gb=!0;Sa=[Sa,Sa]}else gb=!1,Sa=Da.pixelsToGLUnits;return{u_camera_to_center_distance:Da.cameraToCenterDistance,u_scale_with_map:+("map"===ja.paint.get("circle-pitch-scale")),u_matrix:Y.translatePosMatrix(ba.posMatrix,aa,ja.paint.get("circle-translate"),ja.paint.get("circle-translate-anchor")),u_pitch_with_map:+gb,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:Sa}},
ki=function(Y,ba,aa){return void 0===aa&&(aa=1),{u_matrix:Y,u_color:ba,u_overlay:0,u_overlay_scale:aa}},gj=function(Y,ba,aa,ja){return{u_matrix:Y,u_extrude_scale:S(ba,1,aa),u_intensity:ja}},li=function(Y,ba,aa){var ja=Y.transform;return{u_matrix:ia(Y,ba,aa),u_ratio:1/S(ba,1,ja.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/ja.pixelsToGLUnits[0],1/ja.pixelsToGLUnits[1]]}},Ai,Kj=function(Y,ba,aa,ja,Da,Sa,gb,sb,Ob,Yb){var cc=Da.transform;return{u_is_size_zoom_constant:+("constant"===
Y||"source"===Y),u_is_size_feature_constant:+("constant"===Y||"camera"===Y),u_size_t:ba?ba.uSizeT:0,u_size:ba?ba.uSize:0,u_camera_to_center_distance:cc.cameraToCenterDistance,u_pitch:cc.pitch/360*2*Math.PI,u_rotate_symbol:+aa,u_aspect_ratio:cc.width/cc.height,u_fade_change:Da.options.fadeDuration?Da.symbolFadeChange:1,u_matrix:Sa,u_label_plane_matrix:gb,u_coord_matrix:sb,u_is_text:+Ob,u_pitch_with_map:+ja,u_texsize:Yb,u_texture:0}},vf=function(Y,ba,aa,ja,Da,Sa,gb,sb,Ob,Yb,cc){var Nc=Da.transform;
return a.extend(Kj(Y,ba,aa,ja,Da,Sa,gb,sb,Ob,Yb),{u_gamma_scale:ja?Math.cos(Nc._pitch)*Nc.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:+cc})},Jj=function(Y,ba,aa,ja,Da,Sa,gb,sb,Ob,Yb){return a.extend(vf(Y,ba,aa,ja,Da,Sa,gb,sb,!0,Ob,!0),{u_texsize_icon:Yb,u_texture_icon:1})},Bi={fillExtrusion:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_lightpos:new a.Uniform3f(Y,ba.u_lightpos),u_lightintensity:new a.Uniform1f(Y,ba.u_lightintensity),u_lightcolor:new a.Uniform3f(Y,
ba.u_lightcolor),u_vertical_gradient:new a.Uniform1f(Y,ba.u_vertical_gradient),u_opacity:new a.Uniform1f(Y,ba.u_opacity)}},fillExtrusionPattern:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_lightpos:new a.Uniform3f(Y,ba.u_lightpos),u_lightintensity:new a.Uniform1f(Y,ba.u_lightintensity),u_lightcolor:new a.Uniform3f(Y,ba.u_lightcolor),u_vertical_gradient:new a.Uniform1f(Y,ba.u_vertical_gradient),u_height_factor:new a.Uniform1f(Y,ba.u_height_factor),u_image:new a.Uniform1i(Y,
ba.u_image),u_texsize:new a.Uniform2f(Y,ba.u_texsize),u_pixel_coord_upper:new a.Uniform2f(Y,ba.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(Y,ba.u_pixel_coord_lower),u_scale:new a.Uniform3f(Y,ba.u_scale),u_fade:new a.Uniform1f(Y,ba.u_fade),u_opacity:new a.Uniform1f(Y,ba.u_opacity)}},fill:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix)}},fillPattern:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_image:new a.Uniform1i(Y,ba.u_image),u_texsize:new a.Uniform2f(Y,
ba.u_texsize),u_pixel_coord_upper:new a.Uniform2f(Y,ba.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(Y,ba.u_pixel_coord_lower),u_scale:new a.Uniform3f(Y,ba.u_scale),u_fade:new a.Uniform1f(Y,ba.u_fade)}},fillOutline:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_world:new a.Uniform2f(Y,ba.u_world)}},fillOutlinePattern:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_world:new a.Uniform2f(Y,ba.u_world),u_image:new a.Uniform1i(Y,ba.u_image),u_texsize:new a.Uniform2f(Y,
ba.u_texsize),u_pixel_coord_upper:new a.Uniform2f(Y,ba.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(Y,ba.u_pixel_coord_lower),u_scale:new a.Uniform3f(Y,ba.u_scale),u_fade:new a.Uniform1f(Y,ba.u_fade)}},circle:function(Y,ba){return{u_camera_to_center_distance:new a.Uniform1f(Y,ba.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(Y,ba.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(Y,ba.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(Y,ba.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(Y,
ba.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix)}},collisionBox:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_camera_to_center_distance:new a.Uniform1f(Y,ba.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(Y,ba.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(Y,ba.u_extrude_scale),u_overscale_factor:new a.Uniform1f(Y,ba.u_overscale_factor)}},collisionCircle:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_inv_matrix:new a.UniformMatrix4f(Y,
ba.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(Y,ba.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(Y,ba.u_viewport_size)}},debug:function(Y,ba){return{u_color:new a.UniformColor(Y,ba.u_color),u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_overlay:new a.Uniform1i(Y,ba.u_overlay),u_overlay_scale:new a.Uniform1f(Y,ba.u_overlay_scale)}},clippingMask:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix)}},heatmap:function(Y,ba){return{u_extrude_scale:new a.Uniform1f(Y,
ba.u_extrude_scale),u_intensity:new a.Uniform1f(Y,ba.u_intensity),u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix)}},heatmapTexture:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_world:new a.Uniform2f(Y,ba.u_world),u_image:new a.Uniform1i(Y,ba.u_image),u_color_ramp:new a.Uniform1i(Y,ba.u_color_ramp),u_opacity:new a.Uniform1f(Y,ba.u_opacity)}},hillshade:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_image:new a.Uniform1i(Y,ba.u_image),u_latrange:new a.Uniform2f(Y,
ba.u_latrange),u_light:new a.Uniform2f(Y,ba.u_light),u_shadow:new a.UniformColor(Y,ba.u_shadow),u_highlight:new a.UniformColor(Y,ba.u_highlight),u_accent:new a.UniformColor(Y,ba.u_accent)}},hillshadePrepare:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_image:new a.Uniform1i(Y,ba.u_image),u_dimension:new a.Uniform2f(Y,ba.u_dimension),u_zoom:new a.Uniform1f(Y,ba.u_zoom),u_maxzoom:new a.Uniform1f(Y,ba.u_maxzoom),u_unpack:new a.Uniform4f(Y,ba.u_unpack)}},line:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,
ba.u_matrix),u_ratio:new a.Uniform1f(Y,ba.u_ratio),u_device_pixel_ratio:new a.Uniform1f(Y,ba.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(Y,ba.u_units_to_pixels)}},lineGradient:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_ratio:new a.Uniform1f(Y,ba.u_ratio),u_device_pixel_ratio:new a.Uniform1f(Y,ba.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(Y,ba.u_units_to_pixels),u_image:new a.Uniform1i(Y,ba.u_image)}},linePattern:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,
ba.u_matrix),u_texsize:new a.Uniform2f(Y,ba.u_texsize),u_ratio:new a.Uniform1f(Y,ba.u_ratio),u_device_pixel_ratio:new a.Uniform1f(Y,ba.u_device_pixel_ratio),u_image:new a.Uniform1i(Y,ba.u_image),u_units_to_pixels:new a.Uniform2f(Y,ba.u_units_to_pixels),u_scale:new a.Uniform3f(Y,ba.u_scale),u_fade:new a.Uniform1f(Y,ba.u_fade)}},lineSDF:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_ratio:new a.Uniform1f(Y,ba.u_ratio),u_device_pixel_ratio:new a.Uniform1f(Y,ba.u_device_pixel_ratio),
u_units_to_pixels:new a.Uniform2f(Y,ba.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(Y,ba.u_patternscale_a),u_patternscale_b:new a.Uniform2f(Y,ba.u_patternscale_b),u_sdfgamma:new a.Uniform1f(Y,ba.u_sdfgamma),u_image:new a.Uniform1i(Y,ba.u_image),u_tex_y_a:new a.Uniform1f(Y,ba.u_tex_y_a),u_tex_y_b:new a.Uniform1f(Y,ba.u_tex_y_b),u_mix:new a.Uniform1f(Y,ba.u_mix)}},raster:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_tl_parent:new a.Uniform2f(Y,ba.u_tl_parent),u_scale_parent:new a.Uniform1f(Y,
ba.u_scale_parent),u_buffer_scale:new a.Uniform1f(Y,ba.u_buffer_scale),u_fade_t:new a.Uniform1f(Y,ba.u_fade_t),u_opacity:new a.Uniform1f(Y,ba.u_opacity),u_image0:new a.Uniform1i(Y,ba.u_image0),u_image1:new a.Uniform1i(Y,ba.u_image1),u_brightness_low:new a.Uniform1f(Y,ba.u_brightness_low),u_brightness_high:new a.Uniform1f(Y,ba.u_brightness_high),u_saturation_factor:new a.Uniform1f(Y,ba.u_saturation_factor),u_contrast_factor:new a.Uniform1f(Y,ba.u_contrast_factor),u_spin_weights:new a.Uniform3f(Y,ba.u_spin_weights)}},
symbolIcon:function(Y,ba){return{u_is_size_zoom_constant:new a.Uniform1i(Y,ba.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(Y,ba.u_is_size_feature_constant),u_size_t:new a.Uniform1f(Y,ba.u_size_t),u_size:new a.Uniform1f(Y,ba.u_size),u_camera_to_center_distance:new a.Uniform1f(Y,ba.u_camera_to_center_distance),u_pitch:new a.Uniform1f(Y,ba.u_pitch),u_rotate_symbol:new a.Uniform1i(Y,ba.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(Y,ba.u_aspect_ratio),u_fade_change:new a.Uniform1f(Y,
ba.u_fade_change),u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(Y,ba.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(Y,ba.u_coord_matrix),u_is_text:new a.Uniform1i(Y,ba.u_is_text),u_pitch_with_map:new a.Uniform1i(Y,ba.u_pitch_with_map),u_texsize:new a.Uniform2f(Y,ba.u_texsize),u_texture:new a.Uniform1i(Y,ba.u_texture)}},symbolSDF:function(Y,ba){return{u_is_size_zoom_constant:new a.Uniform1i(Y,ba.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(Y,
ba.u_is_size_feature_constant),u_size_t:new a.Uniform1f(Y,ba.u_size_t),u_size:new a.Uniform1f(Y,ba.u_size),u_camera_to_center_distance:new a.Uniform1f(Y,ba.u_camera_to_center_distance),u_pitch:new a.Uniform1f(Y,ba.u_pitch),u_rotate_symbol:new a.Uniform1i(Y,ba.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(Y,ba.u_aspect_ratio),u_fade_change:new a.Uniform1f(Y,ba.u_fade_change),u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(Y,ba.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(Y,
ba.u_coord_matrix),u_is_text:new a.Uniform1i(Y,ba.u_is_text),u_pitch_with_map:new a.Uniform1i(Y,ba.u_pitch_with_map),u_texsize:new a.Uniform2f(Y,ba.u_texsize),u_texture:new a.Uniform1i(Y,ba.u_texture),u_gamma_scale:new a.Uniform1f(Y,ba.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(Y,ba.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(Y,ba.u_is_halo)}},symbolTextAndIcon:function(Y,ba){return{u_is_size_zoom_constant:new a.Uniform1i(Y,ba.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(Y,
ba.u_is_size_feature_constant),u_size_t:new a.Uniform1f(Y,ba.u_size_t),u_size:new a.Uniform1f(Y,ba.u_size),u_camera_to_center_distance:new a.Uniform1f(Y,ba.u_camera_to_center_distance),u_pitch:new a.Uniform1f(Y,ba.u_pitch),u_rotate_symbol:new a.Uniform1i(Y,ba.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(Y,ba.u_aspect_ratio),u_fade_change:new a.Uniform1f(Y,ba.u_fade_change),u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(Y,ba.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(Y,
ba.u_coord_matrix),u_is_text:new a.Uniform1i(Y,ba.u_is_text),u_pitch_with_map:new a.Uniform1i(Y,ba.u_pitch_with_map),u_texsize:new a.Uniform2f(Y,ba.u_texsize),u_texsize_icon:new a.Uniform2f(Y,ba.u_texsize_icon),u_texture:new a.Uniform1i(Y,ba.u_texture),u_texture_icon:new a.Uniform1i(Y,ba.u_texture_icon),u_gamma_scale:new a.Uniform1f(Y,ba.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(Y,ba.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(Y,ba.u_is_halo)}},background:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,
ba.u_matrix),u_opacity:new a.Uniform1f(Y,ba.u_opacity),u_color:new a.UniformColor(Y,ba.u_color)}},backgroundPattern:function(Y,ba){return{u_matrix:new a.UniformMatrix4f(Y,ba.u_matrix),u_opacity:new a.Uniform1f(Y,ba.u_opacity),u_image:new a.Uniform1i(Y,ba.u_image),u_pattern_tl_a:new a.Uniform2f(Y,ba.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(Y,ba.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(Y,ba.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(Y,ba.u_pattern_br_b),u_texsize:new a.Uniform2f(Y,ba.u_texsize),
u_mix:new a.Uniform1f(Y,ba.u_mix),u_pattern_size_a:new a.Uniform2f(Y,ba.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(Y,ba.u_pattern_size_b),u_scale_a:new a.Uniform1f(Y,ba.u_scale_a),u_scale_b:new a.Uniform1f(Y,ba.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(Y,ba.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(Y,ba.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(Y,ba.u_tile_units_to_pixels)}}},ak=a.identity(new Float32Array(16)),mi=new a.Color(1,0,0,1),Nh=new a.Color(0,
1,0,1),Fg=new a.Color(0,0,1,1),sg=new a.Color(1,0,1,1),tg=new a.Color(0,1,1,1),Ci={symbol:function(Y,ba,aa,ja,Da){if("translucent"===Y.renderPass){var Sa=Wc.disabled,gb=Y.colorModeForRenderPass();if(aa.layout.get("text-variable-anchor")){var sb=aa.layout.get("text-rotation-alignment"),Ob=aa.layout.get("text-pitch-alignment"),Yb=Y.transform;sb="map"===sb;Ob="map"===Ob;for(var cc=0;cc<ja.length;cc+=1){var Nc=ja[cc],Lc=ba.getTile(Nc),Cc=Lc.getBucket(aa);if(Cc&&Cc.text&&Cc.text.segments.get().length){var Kc=
a.evaluateSizeForZoom(Cc.textSizeData,Yb.zoom),Hc=S(Lc,1,Y.transform.zoom),bc=C(Nc.posMatrix,Ob,sb,Y.transform,Hc),Aa="none"!==aa.layout.get("icon-text-fit")&&Cc.hasIconData();if(Kc){Hc=sb;var Ha=Ob,Qa=Da,hb=a.symbolSize,ub=Yb;Nc=Nc.posMatrix;var Mb=Math.pow(2,Yb.zoom-Lc.tileID.overscaledZ),Tb=Kc,uc=Aa,kc=Cc.text.placedSymbolArray;Kc=Cc.text.dynamicLayoutVertexArray;Aa=Cc.icon.dynamicLayoutVertexArray;Lc={};Kc.clear();for(var nc=0;nc<kc.length;nc++){var ad=kc.get(nc),kd=ad.hidden||!ad.crossTileID||
Cc.allowVerticalPlacement&&!ad.placedOrientation?null:Qa[ad.crossTileID];if(kd){var td=new a.Point(ad.anchorX,ad.anchorY),Cd=G(td,Ha?Nc:bc),Md=.5+ub.cameraToCenterDistance/Cd.signedDistanceFromCamera*.5,Ed=hb.evaluateSizeForFeature(Cc.textSizeData,Tb,ad)*Md/a.ONE_EM;Ha&&(Ed*=Cc.tilePixelRatio/Mb);Md=kd.anchor;var Sd=kd.width,ee=kd.height,Zd=kd.textOffset;kd=kd.textBoxScale;var me=a.getAnchorAlignment(Md);Sd*=-(me.horizontalAlign-.5);ee*=-(me.verticalAlign-.5);Md=a.evaluateVariableOffset(Md,Zd);Md=
new a.Point((Sd/kd+Md[0])*Ed,(ee/kd+Md[1])*Ed);td=Ha?G(td.add(Md),bc).point:Cd.point.add(Hc?Md.rotate(-ub.angle):Md);Cd=Cc.allowVerticalPlacement&&ad.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(Md=0;Md<ad.numGlyphs;Md++)a.addDynamicAttributes(Kc,td,Cd);uc&&0<=ad.associatedIconIndex&&(Lc[ad.associatedIconIndex]={shiftedAnchor:td,angle:Cd})}else P(ad.numGlyphs,Kc)}if(uc){Aa.clear();Hc=Cc.icon.placedSymbolArray;for(Ha=0;Ha<Hc.length;Ha++)if(Qa=Hc.get(Ha),Qa.hidden)P(Qa.numGlyphs,Aa);else if(hb=
Lc[Ha])for(ub=0;ub<Qa.numGlyphs;ub++)a.addDynamicAttributes(Aa,hb.shiftedAnchor,hb.angle);else P(Qa.numGlyphs,Aa);Cc.icon.dynamicLayoutVertexBuffer.updateData(Aa)}Cc.text.dynamicLayoutVertexBuffer.updateData(Kc)}}}}0!==aa.paint.get("icon-opacity").constantOr(1)&&fa(Y,ba,aa,ja,!1,aa.paint.get("icon-translate"),aa.paint.get("icon-translate-anchor"),aa.layout.get("icon-rotation-alignment"),aa.layout.get("icon-pitch-alignment"),aa.layout.get("icon-keep-upright"),Sa,gb);0!==aa.paint.get("text-opacity").constantOr(1)&&
fa(Y,ba,aa,ja,!0,aa.paint.get("text-translate"),aa.paint.get("text-translate-anchor"),aa.layout.get("text-rotation-alignment"),aa.layout.get("text-pitch-alignment"),aa.layout.get("text-keep-upright"),Sa,gb);ba.map.showCollisionBoxes&&(ha(Y,ba,aa,ja,aa.paint.get("text-translate"),aa.paint.get("text-translate-anchor"),!0),ha(Y,ba,aa,ja,aa.paint.get("icon-translate"),aa.paint.get("icon-translate-anchor"),!1))}},circle:function(Y,ba,aa,ja){if("translucent"===Y.renderPass){var Da=aa.paint.get("circle-opacity"),
Sa=aa.paint.get("circle-stroke-width"),gb=aa.paint.get("circle-stroke-opacity"),sb=void 0!==aa.layout.get("circle-sort-key").constantOr(1);if(0!==Da.constantOr(1)||0!==Sa.constantOr(1)&&0!==gb.constantOr(1)){Da=Y.context;Sa=Da.gl;gb=Y.depthModeForSublayer(0,Wd.ReadOnly);for(var Ob=Wc.disabled,Yb=Y.colorModeForRenderPass(),cc=[],Nc=0;Nc<ja.length;Nc++){var Lc=ja[Nc],Cc=ba.getTile(Lc),Kc=Cc.getBucket(aa);if(Kc){var Hc=Kc.programConfigurations.get(aa.id);Lc={programConfiguration:Hc,program:Y.useProgram("circle",
Hc),layoutVertexBuffer:Kc.layoutVertexBuffer,indexBuffer:Kc.indexBuffer,uniformValues:ji(Y,Lc,Cc,aa)};if(sb)for(Cc=0,Kc=Kc.segments.get();Cc<Kc.length;Cc+=1)Hc=Kc[Cc],cc.push({segments:new a.SegmentVector([Hc]),sortKey:Hc.sortKey,state:Lc});else cc.push({segments:Kc.segments,sortKey:0,state:Lc})}}sb&&cc.sort(function(bc,Aa){return bc.sortKey-Aa.sortKey});for(ba=0;ba<cc.length;ba+=1)ja=cc[ba],sb=ja.state,sb.program.draw(Da,Sa.TRIANGLES,gb,Ob,Yb,Kd.disabled,sb.uniformValues,aa.id,sb.layoutVertexBuffer,
sb.indexBuffer,ja.segments,aa.paint,Y.transform.zoom,sb.programConfiguration)}}},heatmap:function(Y,ba,aa,ja){if(0!==aa.paint.get("heatmap-opacity"))if("offscreen"===Y.renderPass){var Da=Y.context,Sa=Da.gl,gb=Wc.disabled,sb=new rd([Sa.ONE,Sa.ONE],a.Color.transparent,[!0,!0,!0,!0]);!function(Cc,Kc,Hc){var bc=Cc.gl;Cc.activeTexture.set(bc.TEXTURE1);Cc.viewport.set([0,0,Kc.width/4,Kc.height/4]);var Aa=Hc.heatmapFbo;if(Aa)bc.bindTexture(bc.TEXTURE_2D,Aa.colorAttachment.get()),Cc.bindFramebuffer.set(Aa.framebuffer);
else{var Ha=bc.createTexture();bc.bindTexture(bc.TEXTURE_2D,Ha);bc.texParameteri(bc.TEXTURE_2D,bc.TEXTURE_WRAP_S,bc.CLAMP_TO_EDGE);bc.texParameteri(bc.TEXTURE_2D,bc.TEXTURE_WRAP_T,bc.CLAMP_TO_EDGE);bc.texParameteri(bc.TEXTURE_2D,bc.TEXTURE_MIN_FILTER,bc.LINEAR);bc.texParameteri(bc.TEXTURE_2D,bc.TEXTURE_MAG_FILTER,bc.LINEAR);Hc=Aa=Hc.heatmapFbo=Cc.createFramebuffer(Kc.width/4,Kc.height/4,!1);bc=Cc.gl;bc.texImage2D(bc.TEXTURE_2D,0,bc.RGBA,Kc.width/4,Kc.height/4,0,bc.RGBA,Cc.extRenderToTextureHalfFloat?
Cc.extTextureHalfFloat.HALF_FLOAT_OES:bc.UNSIGNED_BYTE,null);Hc.colorAttachment.set(Ha)}}(Da,Y,aa);Da.clear({color:a.Color.transparent});for(var Ob=0;Ob<ja.length;Ob++){var Yb=ja[Ob];if(!ba.hasRenderableParent(Yb)){var cc=ba.getTile(Yb),Nc=cc.getBucket(aa);if(Nc){var Lc=Nc.programConfigurations.get(aa.id);Y.useProgram("heatmap",Lc).draw(Da,Sa.TRIANGLES,Wd.disabled,gb,sb,Kd.disabled,gj(Yb.posMatrix,cc,Y.transform.zoom,aa.paint.get("heatmap-intensity")),aa.id,Nc.layoutVertexBuffer,Nc.indexBuffer,Nc.segments,
aa.paint,Y.transform.zoom,Lc)}}}Da.viewport.set([0,0,Y.width,Y.height])}else"translucent"===Y.renderPass&&(Y.context.setColorMode(Y.colorModeForRenderPass()),function(Cc,Kc){var Hc=Cc.context,bc=Hc.gl,Aa=Kc.heatmapFbo;if(Aa){Hc.activeTexture.set(bc.TEXTURE0);bc.bindTexture(bc.TEXTURE_2D,Aa.colorAttachment.get());Hc.activeTexture.set(bc.TEXTURE1);(Aa=Kc.colorRampTexture)||(Aa=Kc.colorRampTexture=new a.Texture(Hc,Kc.colorRamp,bc.RGBA));Aa.bind(bc.LINEAR,bc.CLAMP_TO_EDGE);Aa=Cc.useProgram("heatmapTexture");
var Ha=Aa.draw;bc=bc.TRIANGLES;var Qa=Wd.disabled,hb=Wc.disabled,ub=Cc.colorModeForRenderPass(),Mb=Kd.disabled;var Tb=a.create();a.ortho(Tb,0,Cc.width,Cc.height,0,0,1);var uc=Cc.context.gl;Tb={u_matrix:Tb,u_world:[uc.drawingBufferWidth,uc.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Kc.paint.get("heatmap-opacity")};Ha.call(Aa,Hc,bc,Qa,hb,ub,Mb,Tb,Kc.id,Cc.viewportBuffer,Cc.quadTriangleIndexBuffer,Cc.viewportSegments,Kc.paint,Cc.transform.zoom)}}(Y,aa))},line:function(Y,ba,aa,ja){if("translucent"===
Y.renderPass){var Da=aa.paint.get("line-opacity"),Sa=aa.paint.get("line-width");if(0!==Da.constantOr(1)&&0!==Sa.constantOr(1)){Da=Y.depthModeForSublayer(0,Wd.ReadOnly);Sa=Y.colorModeForRenderPass();var gb=aa.paint.get("line-dasharray"),sb=aa.paint.get("line-pattern"),Ob=sb.constantOr(1),Yb=aa.paint.get("line-gradient"),cc=aa.getCrossfadeParameters(),Nc=Ob?"linePattern":gb?"lineSDF":Yb?"lineGradient":"line",Lc=Y.context,Cc=Lc.gl,Kc=!0;if(Yb){Lc.activeTexture.set(Cc.TEXTURE0);var Hc=aa.gradientTexture;
if(!aa.gradient)return;Hc||(Hc=aa.gradientTexture=new a.Texture(Lc,aa.gradient,Cc.RGBA));Hc.bind(Cc.LINEAR,Cc.CLAMP_TO_EDGE)}for(Hc=0;Hc<ja.length;Hc+=1){var bc=ja[Hc],Aa=ba.getTile(bc);if(!Ob||Aa.patternsLoaded()){var Ha=Aa.getBucket(aa);if(Ha){var Qa=Ha.programConfigurations.get(aa.id),hb=Y.context.program.get(),ub=Y.useProgram(Nc,Qa);Kc=Kc||ub.program!==hb;var Mb=sb.constantOr(null);if(Mb&&Aa.imageAtlas){var Tb=Aa.imageAtlas;hb=Tb.patternPositions[Mb.to.toString()];Mb=Tb.patternPositions[Mb.from.toString()];
hb&&Mb&&Qa.setConstantPatternPositions(hb,Mb)}if(Ob){hb=Y;Mb=Aa;Tb=aa;var uc=cc,kc=hb.transform,nc=1/S(Mb,1,kc.tileZoom);hb={u_matrix:ia(hb,Mb,Tb),u_texsize:Mb.imageAtlasTexture.size,u_ratio:1/S(Mb,1,kc.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[nc,uc.fromScale,uc.toScale],u_fade:uc.t,u_units_to_pixels:[1/kc.pixelsToGLUnits[0],1/kc.pixelsToGLUnits[1]]}}else if(gb){hb=Y;Mb=Aa;Tb=aa;var ad=gb;uc=cc;kc=hb.lineAtlas;nc=1/S(Mb,1,hb.transform.tileZoom);var kd="round"===Tb.layout.get("line-cap"),
td=kc.getDash(ad.from,kd);ad=kc.getDash(ad.to,kd);kd=td.width*uc.fromScale;var Cd=ad.width*uc.toScale;hb=a.extend(li(hb,Mb,Tb),{u_patternscale_a:[nc/kd,-td.height/2],u_patternscale_b:[nc/Cd,-ad.height/2],u_sdfgamma:kc.width/(256*Math.min(kd,Cd)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:td.y,u_tex_y_b:ad.y,u_mix:uc.t})}else hb=Yb?a.extend(li(Y,Aa,aa),{u_image:0}):li(Y,Aa,aa);Ob?(Lc.activeTexture.set(Cc.TEXTURE0),Aa.imageAtlasTexture.bind(Cc.LINEAR,Cc.CLAMP_TO_EDGE),Qa.updatePaintBuffers(cc)):
gb&&(Kc||Y.lineAtlas.dirty)&&(Lc.activeTexture.set(Cc.TEXTURE0),Y.lineAtlas.bind(Lc));ub.draw(Lc,Cc.TRIANGLES,Da,Y.stencilModeForClipping(bc),Sa,Kd.disabled,hb,aa.id,Ha.layoutVertexBuffer,Ha.indexBuffer,Ha.segments,aa.paint,Y.transform.zoom,Qa);Kc=!1}}}}}},fill:function(Y,ba,aa,ja){var Da=aa.paint.get("fill-color"),Sa=aa.paint.get("fill-opacity");if(0!==Sa.constantOr(1)){var gb=Y.colorModeForRenderPass(),sb=aa.paint.get("fill-pattern");Da=Y.opaquePassEnabledForLayer()&&!sb.constantOr(1)&&1===Da.constantOr(a.Color.transparent).a&&
1===Sa.constantOr(0)?"opaque":"translucent";Y.renderPass===Da&&(Da=Y.depthModeForSublayer(1,"opaque"===Y.renderPass?Wd.ReadWrite:Wd.ReadOnly),sa(Y,ba,aa,ja,Da,gb,!1));"translucent"===Y.renderPass&&aa.paint.get("fill-antialias")&&(Da=Y.depthModeForSublayer(aa.getPaintProperty("fill-outline-color")?2:0,Wd.ReadOnly),sa(Y,ba,aa,ja,Da,gb,!0))}},"fill-extrusion":function(Y,ba,aa,ja){var Da=aa.paint.get("fill-extrusion-opacity");if(0!==Da&&"translucent"===Y.renderPass){var Sa=new Wd(Y.context.gl.LEQUAL,
Wd.ReadWrite,Y.depthRangeFor3D);1!==Da||aa.paint.get("fill-extrusion-pattern").constantOr(1)?(ua(Y,ba,aa,ja,Sa,Wc.disabled,rd.disabled),ua(Y,ba,aa,ja,Sa,Y.stencilModeFor3D(),Y.colorModeForRenderPass())):(Da=Y.colorModeForRenderPass(),ua(Y,ba,aa,ja,Sa,Wc.disabled,Da))}},hillshade:function(Y,ba,aa,ja){if("offscreen"===Y.renderPass||"translucent"===Y.renderPass){var Da=Y.context,Sa=ba.getSource().maxzoom,gb=Y.depthModeForSublayer(0,Wd.ReadOnly),sb=Y.colorModeForRenderPass(),Ob="translucent"===Y.renderPass?
Y.stencilConfigForOverlap(ja):[{},ja];ja=Ob[0];var Yb=0;for(Ob=Ob[1];Yb<Ob.length;Yb+=1){var cc=Ob[Yb],Nc=ba.getTile(cc);if(Nc.needsHillshadePrepare&&"offscreen"===Y.renderPass){var Lc=Y,Cc=Nc,Kc=aa;cc=Sa;var Hc=gb;Nc=Wc.disabled;var bc=sb,Aa=Lc.context,Ha=Aa.gl,Qa=Cc.dem;if(Qa&&Qa.data){var hb=Qa.dim,ub=Qa.stride,Mb=Qa.getPixels();(Aa.activeTexture.set(Ha.TEXTURE1),Aa.pixelStoreUnpackPremultiplyAlpha.set(!1),Cc.demTexture=Cc.demTexture||Lc.getTileTexture(ub),Cc.demTexture)?(ub=Cc.demTexture,ub.update(Mb,
{premultiply:!1}),ub.bind(Ha.NEAREST,Ha.CLAMP_TO_EDGE)):(Cc.demTexture=new a.Texture(Aa,Mb,Ha.RGBA,{premultiply:!1}),Cc.demTexture.bind(Ha.NEAREST,Ha.CLAMP_TO_EDGE));Aa.activeTexture.set(Ha.TEXTURE0);Mb=Cc.fbo;Mb||(ub=new a.Texture(Aa,{width:hb,height:hb,data:null},Ha.RGBA),ub.bind(Ha.LINEAR,Ha.CLAMP_TO_EDGE),(Mb=Cc.fbo=Aa.createFramebuffer(hb,hb,!0)).colorAttachment.set(ub.texture));Aa.bindFramebuffer.set(Mb.framebuffer);Aa.viewport.set([0,0,hb,hb]);hb=Lc.useProgram("hillshadePrepare");Mb=hb.draw;
Ha=Ha.TRIANGLES;ub=Kd.disabled;var Tb=Cc.tileID,uc=Qa.stride,kc=a.create();cc=(a.ortho(kc,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(kc,kc,[0,-a.EXTENT,0]),{u_matrix:kc,u_image:1,u_dimension:[uc,uc],u_zoom:Tb.overscaledZ,u_maxzoom:cc,u_unpack:Qa.getUnpackVector()});Mb.call(hb,Aa,Ha,Hc,Nc,bc,ub,cc,Kc.id,Lc.rasterBoundsBuffer,Lc.quadTriangleIndexBuffer,Lc.rasterBoundsSegments);Cc.needsHillshadePrepare=!1}}else if("translucent"===Y.renderPass&&(Kc=Cc=Lc=void 0,Hc=Y,Aa=Nc,Nc=aa,bc=gb,cc=ja[cc.overscaledZ],
Qa=sb,Ha=Hc.context,hb=Ha.gl,ub=Aa.fbo)){Mb=Hc.useProgram("hillshade");Ha.activeTexture.set(hb.TEXTURE0);hb.bindTexture(hb.TEXTURE_2D,ub.colorAttachment.get());ub=Nc.paint.get("hillshade-shadow-color");Tb=Nc.paint.get("hillshade-highlight-color");uc=Nc.paint.get("hillshade-accent-color");kc=Nc.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Nc.paint.get("hillshade-illumination-anchor")&&(kc-=Hc.transform.angle);var nc=!Hc.options.moving;Aa={u_matrix:Hc.transform.calculatePosMatrix(Aa.tileID.toUnwrapped(),
nc),u_image:0,u_latrange:(Kc=Aa.tileID,Cc=Math.pow(2,Kc.canonical.z),Lc=Kc.canonical.y,[(new a.MercatorCoordinate(0,Lc/Cc)).toLngLat().lat,(new a.MercatorCoordinate(0,(Lc+1)/Cc)).toLngLat().lat]),u_light:[Nc.paint.get("hillshade-exaggeration"),kc],u_shadow:ub,u_highlight:Tb,u_accent:uc};Mb.draw(Ha,hb.TRIANGLES,bc,cc,Qa,Kd.disabled,Aa,Nc.id,Hc.rasterBoundsBuffer,Hc.quadTriangleIndexBuffer,Hc.rasterBoundsSegments)}}Da.viewport.set([0,0,Y.width,Y.height])}},raster:function(Y,ba,aa,ja){if("translucent"===
Y.renderPass&&0!==aa.paint.get("raster-opacity")&&ja.length){var Da=Y.context,Sa=Da.gl,gb=ba.getSource(),sb=Y.useProgram("raster"),Ob=Y.colorModeForRenderPass(),Yb=gb instanceof zb?[{},ja]:Y.stencilConfigForOverlap(ja);ja=Yb[0];Yb=Yb[1];for(var cc=Yb[Yb.length-1].overscaledZ,Nc=!Y.options.moving,Lc=0;Lc<Yb.length;Lc+=1){var Cc=Yb[Lc],Kc=Y.depthModeForSublayer(Cc.overscaledZ-cc,1===aa.paint.get("raster-opacity")?Wd.ReadWrite:Wd.ReadOnly,Sa.LESS),Hc=ba.getTile(Cc),bc=Y.transform.calculatePosMatrix(Cc.toUnwrapped(),
Nc);Hc.registerFadeDuration(aa.paint.get("raster-fade-duration"));var Aa=ba.findLoadedParent(Cc,0);var Ha=Hc,Qa=Aa,hb=ba,ub=Y.transform;var Mb=aa.paint.get("raster-fade-duration");if(0<Mb){var Tb=a.browser.now(),uc=(Tb-Ha.timeAdded)/Mb;Mb=Qa?(Tb-Qa.timeAdded)/Mb:-1;hb=hb.getSource();ub=ub.coveringZoomLevel({tileSize:hb.tileSize,roundZoom:hb.roundZoom});ub=(ub=!Qa||Math.abs(Qa.tileID.overscaledZ-ub)>Math.abs(Ha.tileID.overscaledZ-ub))&&Ha.refreshedUponExpiration?1:a.clamp(ub?uc:1-Mb,0,1);Mb=(Ha.refreshedUponExpiration&&
1<=uc&&(Ha.refreshedUponExpiration=!1),Qa?{opacity:1,mix:1-ub}:{opacity:ub,mix:0})}else Mb={opacity:1,mix:0};uc=Qa=void 0;Ha="nearest"===aa.paint.get("raster-resampling")?Sa.NEAREST:Sa.LINEAR;Da.activeTexture.set(Sa.TEXTURE0);Hc.texture.bind(Ha,Sa.CLAMP_TO_EDGE,Sa.LINEAR_MIPMAP_NEAREST);Da.activeTexture.set(Sa.TEXTURE1);Aa?(Aa.texture.bind(Ha,Sa.CLAMP_TO_EDGE,Sa.LINEAR_MIPMAP_NEAREST),Qa=Math.pow(2,Aa.tileID.overscaledZ-Hc.tileID.overscaledZ),uc=[Hc.tileID.canonical.x*Qa%1,Hc.tileID.canonical.y*Qa%
1]):Hc.texture.bind(Ha,Sa.CLAMP_TO_EDGE,Sa.LINEAR_MIPMAP_NEAREST);Aa=ub=void 0;Ha=aa;Hc=uc||[0,0];Qa=Qa||1;uc=Mb.mix;Mb=Mb.opacity*Ha.paint.get("raster-opacity");hb=Ha.paint.get("raster-brightness-min");Tb=Ha.paint.get("raster-brightness-max");var kc=(ub=Ha.paint.get("raster-saturation"),0<ub?1-1/(1.001-ub):-ub);ub=(Aa=Ha.paint.get("raster-contrast"),0<Aa?1/(1-Aa):1+Aa);Ha=Ha.paint.get("raster-hue-rotate");Ha*=Math.PI/180;Aa=Math.sin(Ha);Ha=Math.cos(Ha);bc={u_matrix:bc,u_tl_parent:Hc,u_scale_parent:Qa,
u_buffer_scale:1,u_fade_t:uc,u_opacity:Mb,u_image0:0,u_image1:1,u_brightness_low:hb,u_brightness_high:Tb,u_saturation_factor:kc,u_contrast_factor:ub,u_spin_weights:[(2*Ha+1)/3,(-Math.sqrt(3)*Aa-Ha+1)/3,(Math.sqrt(3)*Aa-Ha+1)/3]};gb instanceof zb?sb.draw(Da,Sa.TRIANGLES,Kc,Wc.disabled,Ob,Kd.disabled,bc,aa.id,gb.boundsBuffer,Y.quadTriangleIndexBuffer,gb.boundsSegments):sb.draw(Da,Sa.TRIANGLES,Kc,ja[Cc.overscaledZ],Ob,Kd.disabled,bc,aa.id,Y.rasterBoundsBuffer,Y.quadTriangleIndexBuffer,Y.rasterBoundsSegments)}}},
background:function(Y,ba,aa){ba=aa.paint.get("background-color");var ja=aa.paint.get("background-opacity");if(0!==ja){var Da=Y.context,Sa=Da.gl,gb=Y.transform,sb=gb.tileSize,Ob=aa.paint.get("background-pattern");if(!Y.isPatternMissing(Ob)){var Yb=!Ob&&1===ba.a&&1===ja&&Y.opaquePassEnabledForLayer()?"opaque":"translucent";if(Y.renderPass===Yb){var cc=Wc.disabled;Yb=Y.depthModeForSublayer(0,"opaque"===Yb?Wd.ReadWrite:Wd.ReadOnly);var Nc=Y.colorModeForRenderPass(),Lc=Y.useProgram(Ob?"backgroundPattern":
"background");gb=gb.coveringTiles({tileSize:sb});Ob&&(Da.activeTexture.set(Sa.TEXTURE0),Y.imageManager.bind(Y.context));for(var Cc=aa.getCrossfadeParameters(),Kc=0;Kc<gb.length;Kc+=1){var Hc=gb[Kc],bc=Y.transform.calculatePosMatrix(Hc.toUnwrapped());if(Ob){var Aa=ja;var Ha=Y;var Qa=Ob,hb={tileID:Hc,tileSize:sb},ub=Cc;Hc=a;var Mb=Hc.extend,Tb=Ha.imageManager.getPattern(Qa.from.toString());Qa=Ha.imageManager.getPattern(Qa.to.toString());var uc=Ha.imageManager.getPixelSize(),kc=Math.pow(2,hb.tileID.overscaledZ),
nc=hb.tileSize*Math.pow(2,Ha.transform.tileZoom)/kc;kc=nc*(hb.tileID.canonical.x+hb.tileID.wrap*kc);nc*=hb.tileID.canonical.y;Ha={u_image:0,u_pattern_tl_a:Tb.tl,u_pattern_br_a:Tb.br,u_pattern_tl_b:Qa.tl,u_pattern_br_b:Qa.br,u_texsize:[uc.width,uc.height],u_mix:ub.t,u_pattern_size_a:Tb.displaySize,u_pattern_size_b:Qa.displaySize,u_scale_a:ub.fromScale,u_scale_b:ub.toScale,u_tile_units_to_pixels:1/S(hb,1,Ha.transform.tileZoom),u_pixel_coord_upper:[kc>>16,nc>>16],u_pixel_coord_lower:[65535&kc,65535&
nc]};bc=Mb.call(Hc,Ha,{u_matrix:bc,u_opacity:Aa})}else bc={u_matrix:bc,u_opacity:ja,u_color:ba};Lc.draw(Da,Sa.TRIANGLES,Yb,cc,Nc,Kd.disabled,bc,aa.id,Y.tileExtentBuffer,Y.quadTriangleIndexBuffer,Y.tileExtentSegments)}}}}},debug:function(Y,ba,aa){for(var ja=0;ja<aa.length;ja++){var Da=Y,Sa=ba,gb=aa[ja],sb=Da.context,Ob=sb.gl,Yb=gb.posMatrix,cc=Da.useProgram("debug"),Nc=Wd.disabled,Lc=Wc.disabled,Cc=Da.colorModeForRenderPass();sb.activeTexture.set(Ob.TEXTURE0);Da.emptyTexture.bind(Ob.LINEAR,Ob.CLAMP_TO_EDGE);
cc.draw(sb,Ob.LINE_STRIP,Nc,Lc,Cc,Kd.disabled,ki(Yb,a.Color.red),"$debug",Da.debugBuffer,Da.tileBorderIndexBuffer,Da.debugSegments);Cc=Sa.getTileByID(gb.key).latestRawTileData;Cc=Math.floor((Cc&&Cc.byteLength||0)/1024);Sa=Sa.getTile(gb).tileSize;Sa=512/Math.min(Sa,512)*(gb.overscaledZ/Da.transform.zoom)*.5;var Kc=gb.canonical.toString();gb.overscaledZ!==gb.canonical.z&&(Kc+=" \x3d\x3e "+gb.overscaledZ);gb=Kc+" "+Cc+"kb";Da.initDebugOverlayCanvas();Cc=Da.debugOverlayCanvas;Kc=Da.context.gl;var Hc=
Da.debugOverlayCanvas.getContext("2d");Hc.clearRect(0,0,Cc.width,Cc.height);Hc.shadowColor="white";Hc.shadowBlur=2;Hc.lineWidth=1.5;Hc.strokeStyle="white";Hc.textBaseline="top";Hc.font="bold 36px Open Sans, sans-serif";Hc.fillText(gb,5,5);Hc.strokeText(gb,5,5);Da.debugOverlayTexture.update(Cc);Da.debugOverlayTexture.bind(Kc.LINEAR,Kc.CLAMP_TO_EDGE);cc.draw(sb,Ob.TRIANGLES,Nc,Lc,rd.alphaBlended,Kd.disabled,ki(Yb,a.Color.transparent,Sa),"$debug",Da.debugBuffer,Da.quadTriangleIndexBuffer,Da.debugSegments)}},
custom:function(Y,ba,aa){ba=Y.context;aa=aa.implementation;if("offscreen"===Y.renderPass){var ja=aa.prerender;ja&&(Y.setCustomLayerDefaults(),ba.setColorMode(Y.colorModeForRenderPass()),ja.call(aa,ba.gl,Y.transform.customLayerMatrix()),ba.setDirty(),Y.setBaseState())}else"translucent"===Y.renderPass&&(Y.setCustomLayerDefaults(),ba.setColorMode(Y.colorModeForRenderPass()),ba.setStencilMode(Wc.disabled),ja="3d"===aa.renderingMode?new Wd(Y.context.gl.LEQUAL,Wd.ReadWrite,Y.depthRangeFor3D):Y.depthModeForSublayer(0,
Wd.ReadOnly),ba.setDepthMode(ja),aa.render(ba.gl,Y.transform.customLayerMatrix()),ba.setDirty(),Y.setBaseState(),ba.bindFramebuffer.set(null))}},jf=function(Y,ba){this.context=new Rd(Y);this.transform=ba;this._tileTextures={};this.setup();this.numSublayers=se.maxUnderzooming+se.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.crossTileSymbolIndex=new sc;this.gpuTimers={}};jf.prototype.resize=function(Y,ba){if(this.width=Y*a.browser.devicePixelRatio,this.height=ba*a.browser.devicePixelRatio,
this.context.viewport.set([0,0,this.width,this.height]),this.style)for(Y=0,ba=this.style._order;Y<ba.length;Y+=1)this.style._layers[ba[Y]].resize()};jf.prototype.setup=function(){var Y=this.context,ba=new a.StructArrayLayout2i4;ba.emplaceBack(0,0);ba.emplaceBack(a.EXTENT,0);ba.emplaceBack(0,a.EXTENT);ba.emplaceBack(a.EXTENT,a.EXTENT);this.tileExtentBuffer=Y.createVertexBuffer(ba,Ld.members);this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);ba=new a.StructArrayLayout2i4;ba.emplaceBack(0,
0);ba.emplaceBack(a.EXTENT,0);ba.emplaceBack(0,a.EXTENT);ba.emplaceBack(a.EXTENT,a.EXTENT);this.debugBuffer=Y.createVertexBuffer(ba,Ld.members);this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);ba=new a.StructArrayLayout4i8;ba.emplaceBack(0,0,0,0);ba.emplaceBack(a.EXTENT,0,a.EXTENT,0);ba.emplaceBack(0,a.EXTENT,0,a.EXTENT);ba.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT);this.rasterBoundsBuffer=Y.createVertexBuffer(ba,vb.members);this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,
0,4,2);ba=new a.StructArrayLayout2i4;ba.emplaceBack(0,0);ba.emplaceBack(1,0);ba.emplaceBack(0,1);ba.emplaceBack(1,1);this.viewportBuffer=Y.createVertexBuffer(ba,Ld.members);this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);ba=new a.StructArrayLayout1ui2;ba.emplaceBack(0);ba.emplaceBack(1);ba.emplaceBack(3);ba.emplaceBack(2);ba.emplaceBack(0);this.tileBorderIndexBuffer=Y.createIndexBuffer(ba);ba=new a.StructArrayLayout3ui6;ba.emplaceBack(0,1,2);ba.emplaceBack(2,1,3);this.quadTriangleIndexBuffer=
Y.createIndexBuffer(ba);this.emptyTexture=new a.Texture(Y,{width:1,height:1,data:new Uint8Array([0,0,0,0])},Y.gl.RGBA);Y=this.context.gl;this.stencilClearMode=new Wc({func:Y.ALWAYS,mask:0},0,255,Y.ZERO,Y.ZERO,Y.ZERO)};jf.prototype.clearStencil=function(){var Y=this.context,ba=Y.gl;this.nextStencilID=1;this.currentStencilSource=void 0;var aa=a.create();a.ortho(aa,0,this.width,this.height,0,0,1);a.scale(aa,aa,[ba.drawingBufferWidth,ba.drawingBufferHeight,0]);this.useProgram("clippingMask").draw(Y,ba.TRIANGLES,
Wd.disabled,this.stencilClearMode,rd.disabled,Kd.disabled,{u_matrix:aa},"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)};jf.prototype._renderTileClippingMasks=function(Y,ba){if(this.currentStencilSource!==Y.source&&Y.isTileClipped()&&ba&&ba.length){this.currentStencilSource=Y.source;Y=this.context;var aa=Y.gl;256<this.nextStencilID+ba.length&&this.clearStencil();Y.setColorMode(rd.disabled);Y.setDepthMode(Wd.disabled);var ja=this.useProgram("clippingMask");this._tileClippingMaskIDs=
{};for(var Da=0;Da<ba.length;Da+=1){var Sa=ba[Da],gb=this._tileClippingMaskIDs[Sa.key]=this.nextStencilID++;ja.draw(Y,aa.TRIANGLES,Wd.disabled,new Wc({func:aa.ALWAYS,mask:0},gb,255,aa.KEEP,aa.KEEP,aa.REPLACE),rd.disabled,Kd.disabled,{u_matrix:Sa.posMatrix},"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}};jf.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0;256<this.nextStencilID+1&&this.clearStencil();var Y=this.nextStencilID++,ba=this.context.gl;
return new Wc({func:ba.NOTEQUAL,mask:255},Y,255,ba.KEEP,ba.KEEP,ba.REPLACE)};jf.prototype.stencilModeForClipping=function(Y){var ba=this.context.gl;return new Wc({func:ba.EQUAL,mask:255},this._tileClippingMaskIDs[Y.key],0,ba.KEEP,ba.KEEP,ba.REPLACE)};jf.prototype.stencilConfigForOverlap=function(Y){var ba=this.context.gl;Y=Y.sort(function(gb,sb){return sb.overscaledZ-gb.overscaledZ});var aa=Y[Y.length-1].overscaledZ,ja=Y[0].overscaledZ-aa+1;if(1<ja){this.currentStencilSource=void 0;256<this.nextStencilID+
ja&&this.clearStencil();var Da={};for(var Sa=0;Sa<ja;Sa++)Da[Sa+aa]=new Wc({func:ba.GEQUAL,mask:255},Sa+this.nextStencilID,255,ba.KEEP,ba.KEEP,ba.REPLACE);return this.nextStencilID+=ja,[Da,Y]}return[(Da={},Da[aa]=Wc.disabled,Da),Y]};jf.prototype.colorModeForRenderPass=function(){var Y=this.context.gl;return this._showOverdrawInspector?new rd([Y.CONSTANT_COLOR,Y.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?rd.unblended:rd.alphaBlended};jf.prototype.depthModeForSublayer=
function(Y,ba,aa){if(!this.opaquePassEnabledForLayer())return Wd.disabled;Y=1-((1+this.currentLayer)*this.numSublayers+Y)*this.depthEpsilon;return new Wd(aa||this.context.gl.LEQUAL,ba,[Y,Y])};jf.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff};jf.prototype.render=function(Y,ba){var aa=this;this.style=Y;this.options=ba;this.lineAtlas=Y.lineAtlas;this.imageManager=Y.imageManager;this.glyphManager=Y.glyphManager;this.symbolFadeChange=Y.placement.symbolFadeChange(a.browser.now());
this.imageManager.beginFrame();var ja=this.style._order,Da=this.style.sourceCaches;for(Ob in Da){var Sa=Da[Ob];Sa.used&&Sa.prepare(this.context)}var gb,sb;var Ob={};Sa={};var Yb={},cc;for(cc in Da){var Nc=Da[cc];Ob[cc]=Nc.getVisibleCoordinates();Sa[cc]=Ob[cc].slice().reverse();Yb[cc]=Nc.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(cc=0;cc<ja.length;cc++)if(this.style._layers[ja[cc]].is3D()){this.opaquePassCutoff=cc;break}this.renderPass="offscreen";for(cc=0;cc<ja.length;cc+=1)if(Nc=
this.style._layers[ja[cc]],Nc.hasOffscreenPass()&&!Nc.isHidden(this.transform.zoom)){var Lc=Sa[Nc.source];("custom"===Nc.type||Lc.length)&&this.renderLayer(this,Da[Nc.source],Nc,Lc)}this.context.bindFramebuffer.set(null);this.context.clear({color:ba.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1});this.clearStencil();this._showOverdrawInspector=ba.showOverdrawInspector;this.depthRangeFor3D=[0,1-(Y._order.length+2)*this.numSublayers*this.depthEpsilon];this.renderPass="opaque";for(this.currentLayer=
ja.length-1;0<=this.currentLayer;this.currentLayer--)Y=this.style._layers[ja[this.currentLayer]],ba=Da[Y.source],cc=Ob[Y.source],this._renderTileClippingMasks(Y,cc),this.renderLayer(this,ba,Y,cc);this.renderPass="translucent";for(this.currentLayer=0;this.currentLayer<ja.length;this.currentLayer++)Y=this.style._layers[ja[this.currentLayer]],ba=Da[Y.source],cc=("symbol"===Y.type?Yb:Sa)[Y.source],this._renderTileClippingMasks(Y,Ob[Y.source]),this.renderLayer(this,ba,Y,cc);this.options.showTileBoundaries&&
(a.values(this.style._layers).forEach(function(Cc){Cc.source&&!Cc.isHidden(aa.transform.zoom)&&(Cc.source!==(sb&&sb.id)&&(sb=aa.style.sourceCaches[Cc.source]),(!gb||gb.getSource().maxzoom<sb.getSource().maxzoom)&&(gb=sb))}),gb&&Ci.debug(this,gb,gb.getVisibleCoordinates()));this.options.showPadding&&function(Cc){var Kc=Cc.transform.padding;ta(Cc,0,Cc.transform.height-(Kc.top||0)+1.5,Cc.transform.width,3,mi);ta(Cc,0,(Kc.bottom||0)+1.5,Cc.transform.width,3,Nh);ta(Cc,(Kc.left||0)-1.5,0,3,Cc.transform.height,
Fg);ta(Cc,Cc.transform.width-(Kc.right||0)-1.5,0,3,Cc.transform.height,sg);var Hc=Cc.transform.centerPoint;Kc=Hc.x;Hc=Cc.transform.height-Hc.y;ta(Cc,Kc-1,Hc-10,2,20,tg);ta(Cc,Kc-10,Hc-1,20,2,tg);!0}(this);this.context.setDefault()};jf.prototype.renderLayer=function(Y,ba,aa,ja){aa.isHidden(this.transform.zoom)||("background"===aa.type||"custom"===aa.type||ja.length)&&(this.id=aa.id,this.gpuTimingStart(aa),Ci[aa.type](Y,ba,aa,ja,this.style.placement.variableOffsets),this.gpuTimingEnd())};jf.prototype.gpuTimingStart=
function(Y){if(this.options.gpuTiming){var ba=this.context.extTimerQuery,aa=this.gpuTimers[Y.id];aa||(aa=this.gpuTimers[Y.id]={calls:0,cpuTime:0,query:ba.createQueryEXT()});aa.calls++;ba.beginQueryEXT(ba.TIME_ELAPSED_EXT,aa.query)}};jf.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var Y=this.context.extTimerQuery;Y.endQueryEXT(Y.TIME_ELAPSED_EXT)}};jf.prototype.collectGpuTimers=function(){var Y=this.gpuTimers;return this.gpuTimers={},Y};jf.prototype.queryGpuTimers=function(Y){var ba=
{},aa;for(aa in Y){var ja=Y[aa],Da=this.context.extTimerQuery,Sa=Da.getQueryObjectEXT(ja.query,Da.QUERY_RESULT_EXT)/1E6;Da.deleteQueryEXT(ja.query);ba[aa]=Sa}return ba};jf.prototype.translatePosMatrix=function(Y,ba,aa,ja,Da){if(!aa[0]&&!aa[1])return Y;var Sa=Da?"map"===ja?this.transform.angle:0:"viewport"===ja?-this.transform.angle:0;Sa&&(ja=Math.sin(Sa),Sa=Math.cos(Sa),aa=[aa[0]*Sa-aa[1]*ja,aa[0]*ja+aa[1]*Sa]);ba=[Da?aa[0]:S(ba,aa[0],this.transform.zoom),Da?aa[1]:S(ba,aa[1],this.transform.zoom),
0];aa=new Float32Array(16);return a.translate(aa,Y,ba),aa};jf.prototype.saveTileTexture=function(Y){var ba=this._tileTextures[Y.size[0]];ba?ba.push(Y):this._tileTextures[Y.size[0]]=[Y]};jf.prototype.getTileTexture=function(Y){return(Y=this._tileTextures[Y])&&0<Y.length?Y.pop():null};jf.prototype.isPatternMissing=function(Y){if(!Y)return!1;if(!Y.from||!Y.to)return!0;var ba=this.imageManager.getPattern(Y.from.toString());Y=this.imageManager.getPattern(Y.to.toString());return!ba||!Y};jf.prototype.useProgram=
function(Y,ba){this.cache=this.cache||{};var aa=""+Y+(ba?ba.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[aa]||(this.cache[aa]=new Ue(this.context,hi[Y],ba,Bi[Y],this._showOverdrawInspector)),this.cache[aa]};jf.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO();this.context.cullFace.setDefault();this.context.activeTexture.setDefault();this.context.pixelStoreUnpack.setDefault();this.context.pixelStoreUnpackPremultiplyAlpha.setDefault();this.context.pixelStoreUnpackFlipY.setDefault()};
jf.prototype.setBaseState=function(){var Y=this.context.gl;this.context.cullFace.set(!1);this.context.viewport.set([0,0,this.width,this.height]);this.context.blendEquation.set(Y.FUNC_ADD)};jf.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))};
jf.prototype.destroy=function(){this.emptyTexture.destroy();this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Oh=function(Y,ba){this.points=Y;this.planes=ba};Oh.fromInvProjectionMatrix=function(Y,ba,aa){var ja=Math.pow(2,aa),Da=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Sa){return a.transformMat4([],Sa,Y)}).map(function(Sa){return a.scale$1([],Sa,1/Sa[3]/ba*ja)});aa=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Sa){var gb=
a.sub([],Da[Sa[0]],Da[Sa[1]]),sb=a.sub([],Da[Sa[2]],Da[Sa[1]]);gb=a.normalize([],a.cross([],gb,sb));Sa=-a.dot(gb,Da[Sa[1]]);return gb.concat(Sa)});return new Oh(Da,aa)};var kh=function(Y,ba){this.min=Y;this.max=ba;this.center=a.scale$2([],a.add([],this.min,this.max),.5)};kh.prototype.quadrant=function(Y){Y=[0==Y%2,2>Y];for(var ba=a.clone$2(this.min),aa=a.clone$2(this.max),ja=0;ja<Y.length;ja++)ba[ja]=Y[ja]?this.min[ja]:this.center[ja],aa[ja]=Y[ja]?this.center[ja]:this.max[ja];return aa[2]=this.max[2],
new kh(ba,aa)};kh.prototype.distanceX=function(Y){return Math.max(Math.min(this.max[0],Y[0]),this.min[0])-Y[0]};kh.prototype.distanceY=function(Y){return Math.max(Math.min(this.max[1],Y[1]),this.min[1])-Y[1]};kh.prototype.intersects=function(Y){for(var ba=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],aa=!0,ja=0;ja<Y.planes.length;ja++){for(var Da=Y.planes[ja],Sa=0,gb=0;gb<ba.length;gb++)Sa+=0<=a.dot$1(Da,ba[gb]);if(0===Sa)return 0;
Sa!==ba.length&&(aa=!1)}if(aa)return 2;for(ba=0;3>ba;ba++){aa=Number.MAX_VALUE;ja=-Number.MAX_VALUE;for(Da=0;Da<Y.points.length;Da++)Sa=Y.points[Da][ba]-this.min[ba],aa=Math.min(aa,Sa),ja=Math.max(ja,Sa);if(0>ja||aa>this.max[ba]-this.min[ba])return 0}return 1};var vg=function(Y,ba,aa,ja){if(void 0===Y&&(Y=0),void 0===ba&&(ba=0),void 0===aa&&(aa=0),void 0===ja&&(ja=0),isNaN(Y)||0>Y||isNaN(ba)||0>ba||isNaN(aa)||0>aa||isNaN(ja)||0>ja)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");
this.top=Y;this.bottom=ba;this.left=aa;this.right=ja};vg.prototype.interpolate=function(Y,ba,aa){return null!=ba.top&&null!=Y.top&&(this.top=a.number(Y.top,ba.top,aa)),null!=ba.bottom&&null!=Y.bottom&&(this.bottom=a.number(Y.bottom,ba.bottom,aa)),null!=ba.left&&null!=Y.left&&(this.left=a.number(Y.left,ba.left,aa)),null!=ba.right&&null!=Y.right&&(this.right=a.number(Y.right,ba.right,aa)),this};vg.prototype.getCenter=function(Y,ba){Y=a.clamp((this.left+Y-this.right)/2,0,Y);ba=a.clamp((this.top+ba-this.bottom)/
2,0,ba);return new a.Point(Y,ba)};vg.prototype.equals=function(Y){return this.top===Y.top&&this.bottom===Y.bottom&&this.left===Y.left&&this.right===Y.right};vg.prototype.clone=function(){return new vg(this.top,this.bottom,this.left,this.right)};vg.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Ye=function(Y,ba,aa,ja,Da){this.tileSize=512;this.maxValidLatitude=85.051129;this._renderWorldCopies=void 0===Da||Da;this._minZoom=Y||0;this._maxZoom=
ba||22;this._minPitch=null==aa?0:aa;this._maxPitch=null==ja?60:ja;this.setMaxBounds();this.height=this.width=0;this._center=new a.LngLat(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0;this._edgeInsets=new vg;this._posMatrixCache={};this._alignedPosMatrixCache={}},af={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},
size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Ye.prototype.clone=function(){var Y=new Ye(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return Y.tileSize=this.tileSize,Y.latRange=this.latRange,Y.width=this.width,Y.height=this.height,Y._center=this._center,Y.zoom=
this.zoom,Y.angle=this.angle,Y._fov=this._fov,Y._pitch=this._pitch,Y._unmodified=this._unmodified,Y._edgeInsets=this._edgeInsets.clone(),Y._calcMatrices(),Y};af.minZoom.get=function(){return this._minZoom};af.minZoom.set=function(Y){this._minZoom!==Y&&(this._minZoom=Y,this.zoom=Math.max(this.zoom,Y))};af.maxZoom.get=function(){return this._maxZoom};af.maxZoom.set=function(Y){this._maxZoom!==Y&&(this._maxZoom=Y,this.zoom=Math.min(this.zoom,Y))};af.minPitch.get=function(){return this._minPitch};af.minPitch.set=
function(Y){this._minPitch!==Y&&(this._minPitch=Y,this.pitch=Math.max(this.pitch,Y))};af.maxPitch.get=function(){return this._maxPitch};af.maxPitch.set=function(Y){this._maxPitch!==Y&&(this._maxPitch=Y,this.pitch=Math.min(this.pitch,Y))};af.renderWorldCopies.get=function(){return this._renderWorldCopies};af.renderWorldCopies.set=function(Y){void 0===Y?Y=!0:null===Y&&(Y=!1);this._renderWorldCopies=Y};af.worldSize.get=function(){return this.tileSize*this.scale};af.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))};
af.size.get=function(){return new a.Point(this.width,this.height)};af.bearing.get=function(){return-this.angle/Math.PI*180};af.bearing.set=function(Y){Y=-a.wrap(Y,-180,180)*Math.PI/180;this.angle!==Y&&(this._unmodified=!1,this.angle=Y,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};af.pitch.get=function(){return this._pitch/Math.PI*180};af.pitch.set=function(Y){Y=a.clamp(Y,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Y&&
(this._unmodified=!1,this._pitch=Y,this._calcMatrices())};af.fov.get=function(){return this._fov/Math.PI*180};af.fov.set=function(Y){Y=Math.max(.01,Math.min(60,Y));this._fov!==Y&&(this._unmodified=!1,this._fov=Y/180*Math.PI,this._calcMatrices())};af.zoom.get=function(){return this._zoom};af.zoom.set=function(Y){Y=Math.min(Math.max(Y,this.minZoom),this.maxZoom);this._zoom!==Y&&(this._unmodified=!1,this._zoom=Y,this.scale=this.zoomScale(Y),this.tileZoom=Math.floor(Y),this.zoomFraction=Y-this.tileZoom,
this._constrain(),this._calcMatrices())};af.center.get=function(){return this._center};af.center.set=function(Y){Y.lat===this._center.lat&&Y.lng===this._center.lng||(this._unmodified=!1,this._center=Y,this._constrain(),this._calcMatrices())};af.padding.get=function(){return this._edgeInsets.toJSON()};af.padding.set=function(Y){this._edgeInsets.equals(Y)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,Y,1),this._calcMatrices())};af.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,
this.height)};Ye.prototype.isPaddingEqual=function(Y){return this._edgeInsets.equals(Y)};Ye.prototype.interpolatePadding=function(Y,ba,aa){this._unmodified=!1;this._edgeInsets.interpolate(Y,ba,aa);this._constrain();this._calcMatrices()};Ye.prototype.coveringZoomLevel=function(Y){Y=(Y.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/Y.tileSize));return Math.max(0,Y)};Ye.prototype.getVisibleUnwrappedCoordinates=function(Y){var ba=[new a.UnwrappedTileID(0,Y)];if(this._renderWorldCopies){var aa=
this.pointCoordinate(new a.Point(0,0)),ja=this.pointCoordinate(new a.Point(this.width,0)),Da=this.pointCoordinate(new a.Point(this.width,this.height)),Sa=this.pointCoordinate(new a.Point(0,this.height)),gb=Math.floor(Math.max(aa.x,ja.x,Da.x,Sa.x));for(aa=Math.floor(Math.min(aa.x,ja.x,Da.x,Sa.x))-1;aa<=gb+1;aa++)0!==aa&&ba.push(new a.UnwrappedTileID(aa,Y))}return ba};Ye.prototype.coveringTiles=function(Y){var ba=this.coveringZoomLevel(Y),aa=ba;if(void 0!==Y.minzoom&&ba<Y.minzoom)return[];void 0!==
Y.maxzoom&&ba>Y.maxzoom&&(ba=Y.maxzoom);var ja=a.MercatorCoordinate.fromLngLat(this.center),Da=Math.pow(2,ba);ja=[Da*ja.x,Da*ja.y,0];var Sa=Oh.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ba),gb=Y.minzoom||0;60>=this.pitch&&.1>this._edgeInsets.top&&(gb=ba);var sb=function(Hc){return{aabb:new kh([Hc*Da,0,0],[(Hc+1)*Da,Da,0]),zoom:0,x:0,y:0,wrap:Hc,fullyVisible:!1}},Ob=[],Yb=[],cc=ba;Y=Y.reparseOverscaled?aa:ba;if(this._renderWorldCopies)for(ba=1;3>=ba;ba++)Ob.push(sb(-ba)),Ob.push(sb(ba));
for(Ob.push(sb(0));0<Ob.length;){sb=Ob.pop();ba=sb.x;aa=sb.y;var Nc=sb.fullyVisible;if(!Nc){Nc=sb.aabb.intersects(Sa);if(0===Nc)continue;Nc=2===Nc}var Lc=sb.aabb.distanceX(ja),Cc=sb.aabb.distanceY(ja);Lc=Math.max(Math.abs(Lc),Math.abs(Cc));if(sb.zoom===cc||Lc>3+(1<<cc-sb.zoom)-2&&sb.zoom>=gb)Yb.push({tileID:new a.OverscaledTileID(sb.zoom===cc?Y:sb.zoom,sb.wrap,sb.zoom,ba,aa),distanceSq:a.sqrLen([ja[0]-.5-ba,ja[1]-.5-aa])});else for(Lc=0;4>Lc;Lc++){Cc=(ba<<1)+Lc%2;var Kc=(aa<<1)+(Lc>>1);Ob.push({aabb:sb.aabb.quadrant(Lc),
zoom:sb.zoom+1,x:Cc,y:Kc,wrap:sb.wrap,fullyVisible:Nc})}}return Yb.sort(function(Hc,bc){return Hc.distanceSq-bc.distanceSq}).map(function(Hc){return Hc.tileID})};Ye.prototype.resize=function(Y,ba){this.width=Y;this.height=ba;this.pixelsToGLUnits=[2/Y,-2/ba];this._constrain();this._calcMatrices()};af.unmodified.get=function(){return this._unmodified};Ye.prototype.zoomScale=function(Y){return Math.pow(2,Y)};Ye.prototype.scaleZoom=function(Y){return Math.log(Y)/Math.LN2};Ye.prototype.project=function(Y){var ba=
a.clamp(Y.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(Y.lng)*this.worldSize,a.mercatorYfromLat(ba)*this.worldSize)};Ye.prototype.unproject=function(Y){return(new a.MercatorCoordinate(Y.x/this.worldSize,Y.y/this.worldSize)).toLngLat()};af.point.get=function(){return this.project(this.center)};Ye.prototype.setLocationAtPoint=function(Y,ba){ba=this.pointCoordinate(ba);var aa=this.pointCoordinate(this.centerPoint);Y=this.locationCoordinate(Y);Y=new a.MercatorCoordinate(Y.x-
(ba.x-aa.x),Y.y-(ba.y-aa.y));this.center=this.coordinateLocation(Y);this._renderWorldCopies&&(this.center=this.center.wrap())};Ye.prototype.locationPoint=function(Y){return this.coordinatePoint(this.locationCoordinate(Y))};Ye.prototype.pointLocation=function(Y){return this.coordinateLocation(this.pointCoordinate(Y))};Ye.prototype.locationCoordinate=function(Y){return a.MercatorCoordinate.fromLngLat(Y)};Ye.prototype.coordinateLocation=function(Y){return Y.toLngLat()};Ye.prototype.pointCoordinate=function(Y){var ba=
[Y.x,Y.y,0,1];Y=[Y.x,Y.y,1,1];a.transformMat4(ba,ba,this.pixelMatrixInverse);a.transformMat4(Y,Y,this.pixelMatrixInverse);var aa=ba[3],ja=Y[3],Da=ba[1]/aa,Sa=Y[1]/ja,gb=ba[2]/aa,sb=Y[2]/ja;gb=gb===sb?0:(0-gb)/(sb-gb);return new a.MercatorCoordinate(a.number(ba[0]/aa,Y[0]/ja,gb)/this.worldSize,a.number(Da,Sa,gb)/this.worldSize)};Ye.prototype.coordinatePoint=function(Y){Y=[Y.x*this.worldSize,Y.y*this.worldSize,0,1];return a.transformMat4(Y,Y,this.pixelMatrix),new a.Point(Y[0]/Y[3],Y[1]/Y[3])};Ye.prototype.getBounds=
function(){return(new a.LngLatBounds).extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))};Ye.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null};Ye.prototype.setMaxBounds=
function(Y){Y?(this.lngRange=[Y.getWest(),Y.getEast()],this.latRange=[Y.getSouth(),Y.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])};Ye.prototype.calculatePosMatrix=function(Y,ba){void 0===ba&&(ba=!1);var aa=Y.key,ja=ba?this._alignedPosMatrixCache:this._posMatrixCache;if(ja[aa])return ja[aa];var Da=Y.canonical,Sa=this.worldSize/this.zoomScale(Da.z);Y=Da.x+Math.pow(2,Da.z)*Y.wrap;var gb=a.identity(new Float64Array(16));return a.translate(gb,
gb,[Y*Sa,Da.y*Sa,0]),a.scale(gb,gb,[Sa/a.EXTENT,Sa/a.EXTENT,1]),a.multiply(gb,ba?this.alignedProjMatrix:this.projMatrix,gb),ja[aa]=new Float32Array(gb),ja[aa]};Ye.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()};Ye.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var Y,ba,aa=-90,ja=90,Da=-180,Sa=180,gb=this.size,sb=this._unmodified;if(this.latRange){var Ob=this.latRange;aa=a.mercatorYfromLat(Ob[1])*this.worldSize;
var Yb=(ja=a.mercatorYfromLat(Ob[0])*this.worldSize)-aa<gb.y?gb.y/(ja-aa):0}if(this.lngRange){Ob=this.lngRange;Da=a.mercatorXfromLng(Ob[0])*this.worldSize;var cc=(Sa=a.mercatorXfromLng(Ob[1])*this.worldSize)-Da<gb.x?gb.x/(Sa-Da):0}Ob=this.point;var Nc=Math.max(cc||0,Yb||0);if(Nc)return this.center=this.unproject(new a.Point(cc?(Sa+Da)/2:Ob.x,Yb?(ja+aa)/2:Ob.y)),this.zoom+=this.scaleZoom(Nc),this._unmodified=sb,void(this._constraining=!1);this.latRange&&(Yb=Ob.y,cc=gb.y/2,Yb-cc<aa&&(ba=aa+cc),Yb+cc>
ja&&(ba=ja-cc));this.lngRange&&(aa=Ob.x,gb=gb.x/2,aa-gb<Da&&(Y=Da+gb),aa+gb>Sa&&(Y=Sa-gb));void 0===Y&&void 0===ba||(this.center=this.unproject(new a.Point(void 0!==Y?Y:Ob.x,void 0!==ba?ba:Ob.y)));this._unmodified=sb;this._constraining=!1}};Ye.prototype._calcMatrices=function(){if(this.height){var Y=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var ba=this._fov*(.5+Y.y/this.height);ba=Math.sin(ba)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-(Math.PI/2+
this._pitch)-ba,.01,Math.PI-.01));var aa=this.point,ja=aa.x;aa=aa.y;var Da=1.01*(Math.cos(Math.PI/2-this._pitch)*ba+this.cameraToCenterDistance),Sa=this.height/50;ba=new Float64Array(16);a.perspective(ba,this._fov,this.width/this.height,Sa,Da);ba[8]=2*-Y.x/this.width;ba[9]=2*Y.y/this.height;a.scale(ba,ba,[1,-1,1]);a.translate(ba,ba,[0,0,-this.cameraToCenterDistance]);a.rotateX(ba,ba,this._pitch);a.rotateZ(ba,ba,this.angle);a.translate(ba,ba,[-ja,-aa,0]);this.mercatorMatrix=a.scale([],ba,[this.worldSize,
this.worldSize,this.worldSize]);a.scale(ba,ba,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]);this.projMatrix=ba;this.invProjMatrix=a.invert([],this.projMatrix);Y=this.width%2/2;Da=this.height%2/2;Sa=Math.cos(this.angle);var gb=Math.sin(this.angle);ja=ja-Math.round(ja)+Sa*Y+gb*Da;aa=aa-Math.round(aa)+Sa*Da+gb*Y;Y=new Float64Array(ba);if(a.translate(Y,Y,[.5<ja?ja-1:ja,.5<aa?aa-1:aa,0]),this.alignedProjMatrix=Y,ba=a.create(),a.scale(ba,ba,[this.width/2,-this.height/2,1]),a.translate(ba,
ba,[1,-1,0]),this.labelPlaneMatrix=ba,ba=a.create(),a.scale(ba,ba,[1,-1,1]),a.translate(ba,ba,[-1,-1,0]),a.scale(ba,ba,[2/this.width,2/this.height,1]),this.glCoordMatrix=ba,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(ba=a.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=ba;this._posMatrixCache={};this._alignedPosMatrixCache={}}};Ye.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;
var Y=this.pointCoordinate(new a.Point(0,0));Y=[Y.x*this.worldSize,Y.y*this.worldSize,0,1];return a.transformMat4(Y,Y,this.pixelMatrix)[3]/this.cameraToCenterDistance};Ye.prototype.getCameraPoint=function(){return this.centerPoint.add(new a.Point(0,Math.tan(this._pitch)*(this.cameraToCenterDistance||1)))};Ye.prototype.getCameraQueryGeometry=function(Y){var ba=this.getCameraPoint();if(1===Y.length)return[Y[0],ba];var aa=ba.x,ja=ba.y,Da=ba.x;ba=ba.y;for(var Sa=0;Sa<Y.length;Sa+=1){var gb=Y[Sa];aa=Math.min(aa,
gb.x);ja=Math.min(ja,gb.y);Da=Math.max(Da,gb.x);ba=Math.max(ba,gb.y)}return[new a.Point(aa,ja),new a.Point(Da,ja),new a.Point(Da,ba),new a.Point(aa,ba),new a.Point(aa,ja)]};Object.defineProperties(Ye.prototype,af);var xh=function(Y){var ba,aa,ja,Da;this._hashName=Y&&encodeURIComponent(Y);a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this);this._updateHash=(ba=this._updateHashUnthrottled.bind(this),aa=!1,ja=null,Da=function(){ja=null;aa&&(ba(),ja=setTimeout(Da,300),aa=!1)},function(){return aa=
!0,ja||Da(),ja})};xh.prototype.addTo=function(Y){return this._map=Y,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this};xh.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this};xh.prototype.getHashString=function(Y){var ba=this._map.getCenter(),aa=Math.round(100*this._map.getZoom())/100,ja=Math.pow(10,
Math.ceil((aa*Math.LN2+Math.log(512/360/.5))/Math.LN10)),Da=Math.round(ba.lng*ja)/ja;ba=Math.round(ba.lat*ja)/ja;ja=this._map.getBearing();var Sa=this._map.getPitch(),gb="";if(gb+=Y?"/"+Da+"/"+ba+"/"+aa:aa+"/"+ba+"/"+Da,(ja||Sa)&&(gb+="/"+Math.round(10*ja)/10),Sa&&(gb+="/"+Math.round(Sa)),this._hashName){var sb=this._hashName,Ob=!1;Y=a.window.location.hash.slice(1).split("\x26").map(function(Yb){var cc=Yb.split("\x3d")[0];return cc===sb?(Ob=!0,cc+"\x3d"+gb):Yb}).filter(function(Yb){return Yb});return Ob||
Y.push(sb+"\x3d"+gb),"#"+Y.join("\x26")}return"#"+gb};xh.prototype._getCurrentHash=function(){var Y,ba=this,aa=a.window.location.hash.replace("#","");return this._hashName?(aa.split("\x26").map(function(ja){return ja.split("\x3d")}).forEach(function(ja){ja[0]===ba._hashName&&(Y=ja)}),(Y&&Y[1]||"").split("/")):aa.split("/")};xh.prototype._onHashChange=function(){var Y=this._getCurrentHash();if(3<=Y.length&&!Y.some(function(aa){return isNaN(aa)})){var ba=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?
+(Y[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+Y[2],+Y[1]],zoom:+Y[0],bearing:ba,pitch:+(Y[4]||0)}),!0}return!1};xh.prototype._updateHashUnthrottled=function(){var Y=this.getHashString();try{a.window.history.replaceState(a.window.history.state,"",Y)}catch(ba){}};var ni={linearity:.3,easing:a.bezier(0,0,.3,1)},Qi=a.extend({deceleration:2500,maxSpeed:1400},ni),hj=a.extend({deceleration:20,maxSpeed:1400},ni),Gg=a.extend({deceleration:1E3,maxSpeed:360},ni),Di=a.extend({deceleration:1E3,
maxSpeed:90},ni),lh=function(Y){this._map=Y;this.clear()};lh.prototype.clear=function(){this._inertiaBuffer=[]};lh.prototype.record=function(Y){this._drainInertiaBuffer();this._inertiaBuffer.push({time:a.browser.now(),settings:Y})};lh.prototype._drainInertiaBuffer=function(){for(var Y=this._inertiaBuffer,ba=a.browser.now();0<Y.length&&160<ba-Y[0].time;)Y.shift()};lh.prototype._onMoveEnd=function(Y){if(this._drainInertiaBuffer(),!(2>this._inertiaBuffer.length)){for(var ba=0,aa=0,ja=0,Da=new a.Point(0,
0),Sa=void 0,gb=void 0,sb=0,Ob=this._inertiaBuffer;sb<Ob.length;sb+=1){var Yb=Ob[sb].settings;ba+=Yb.zoomDelta||0;aa+=Yb.bearingDelta||0;ja+=Yb.pitchDelta||0;Yb.panDelta&&Da._add(Yb.panDelta);Yb.around&&(gb=Yb.around);Yb.pinchAround&&(Sa=Yb.pinchAround)}Ob=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time;sb={};Da.mag()&&(Y=va(Da.mag(),Ob,a.extend({},Qi,Y||{})),sb.offset=Da.mult(Y.amount/Da.mag()),sb.center=this._map.transform.center,oa(sb,Y));ba&&(ba=va(ba,Ob,hj),
sb.zoom=this._map.transform.zoom+ba.amount,oa(sb,ba));aa&&(aa=va(aa,Ob,Gg),sb.bearing=this._map.transform.bearing+a.clamp(aa.amount,-179,179),oa(sb,aa));ja&&(ja=va(ja,Ob,Di),sb.pitch=this._map.transform.pitch+ja.amount,oa(sb,ja));if(sb.zoom||sb.bearing)Sa=void 0===Sa?gb:Sa,sb.around=Sa?this._map.unproject(Sa):this._map.getCenter();return this.clear(),a.extend(sb,{noMoveStart:!0})}};var Df=function(Y){function ba(ja,Da,Sa,gb){void 0===gb&&(gb={});var sb=Ta.mousePos(Da.getCanvasContainer(),Sa),Ob=Da.unproject(sb);
Y.call(this,ja,a.extend({point:sb,lngLat:Ob,originalEvent:Sa},gb));this._defaultPrevented=!1;this.target=Da}Y&&(ba.__proto__=Y);(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba;var aa={defaultPrevented:{configurable:!0}};return ba.prototype.preventDefault=function(){this._defaultPrevented=!0},aa.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(ba.prototype,aa),ba}(a.Event),Ri=function(Y){function ba(ja,Da,Sa){var gb="touchend"===ja?Sa.changedTouches:
Sa.touches;gb=Ta.touchPos(Da.getCanvasContainer(),gb);var sb=gb.map(function(cc){return Da.unproject(cc)}),Ob=gb.reduce(function(cc,Nc,Lc,Cc){return cc.add(Nc.div(Cc.length))},new a.Point(0,0)),Yb=Da.unproject(Ob);Y.call(this,ja,{points:gb,point:Ob,lngLats:sb,lngLat:Yb,originalEvent:Sa});this._defaultPrevented=!1}Y&&(ba.__proto__=Y);(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba;var aa={defaultPrevented:{configurable:!0}};return ba.prototype.preventDefault=function(){this._defaultPrevented=
!0},aa.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(ba.prototype,aa),ba}(a.Event),ij=function(Y){function ba(ja,Da,Sa){Y.call(this,ja,{originalEvent:Sa});this._defaultPrevented=!1}Y&&(ba.__proto__=Y);(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba;var aa={defaultPrevented:{configurable:!0}};return ba.prototype.preventDefault=function(){this._defaultPrevented=!0},aa.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(ba.prototype,
aa),ba}(a.Event),Rf=function(Y,ba){this._map=Y;this._clickTolerance=ba.clickTolerance};Rf.prototype.reset=function(){delete this._mousedownPos};Rf.prototype.wheel=function(Y){return this._firePreventable(new ij(Y.type,this._map,Y))};Rf.prototype.mousedown=function(Y,ba){return this._mousedownPos=ba,this._firePreventable(new Df(Y.type,this._map,Y))};Rf.prototype.mouseup=function(Y){this._map.fire(new Df(Y.type,this._map,Y))};Rf.prototype.click=function(Y,ba){this._mousedownPos&&this._mousedownPos.dist(ba)>=
this._clickTolerance||this._map.fire(new Df(Y.type,this._map,Y))};Rf.prototype.dblclick=function(Y){return this._firePreventable(new Df(Y.type,this._map,Y))};Rf.prototype.mouseover=function(Y){this._map.fire(new Df(Y.type,this._map,Y))};Rf.prototype.mouseout=function(Y){this._map.fire(new Df(Y.type,this._map,Y))};Rf.prototype.touchstart=function(Y){return this._firePreventable(new Ri(Y.type,this._map,Y))};Rf.prototype.touchmove=function(Y){this._map.fire(new Ri(Y.type,this._map,Y))};Rf.prototype.touchend=
function(Y){this._map.fire(new Ri(Y.type,this._map,Y))};Rf.prototype.touchcancel=function(Y){this._map.fire(new Ri(Y.type,this._map,Y))};Rf.prototype._firePreventable=function(Y){if(this._map.fire(Y),Y.defaultPrevented)return{}};Rf.prototype.isEnabled=function(){return!0};Rf.prototype.isActive=function(){return!1};Rf.prototype.enable=function(){};Rf.prototype.disable=function(){};var $g=function(Y){this._map=Y};$g.prototype.reset=function(){this._delayContextMenu=!1;delete this._contextMenuEvent};
$g.prototype.mousemove=function(Y){this._map.fire(new Df(Y.type,this._map,Y))};$g.prototype.mousedown=function(){this._delayContextMenu=!0};$g.prototype.mouseup=function(){this._delayContextMenu=!1;this._contextMenuEvent&&(this._map.fire(new Df("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)};$g.prototype.contextmenu=function(Y){this._delayContextMenu?this._contextMenuEvent=Y:this._map.fire(new Df(Y.type,this._map,Y));this._map.listens("contextmenu")&&Y.preventDefault()};
$g.prototype.isEnabled=function(){return!0};$g.prototype.isActive=function(){return!1};$g.prototype.enable=function(){};$g.prototype.disable=function(){};var jg=function(Y,ba){this._map=Y;this._el=Y.getCanvasContainer();this._container=Y.getContainer();this._clickTolerance=ba.clickTolerance||1};jg.prototype.isEnabled=function(){return!!this._enabled};jg.prototype.isActive=function(){return!!this._active};jg.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};jg.prototype.disable=function(){this.isEnabled()&&
(this._enabled=!1)};jg.prototype.mousedown=function(Y,ba){this.isEnabled()&&Y.shiftKey&&0===Y.button&&(Ta.disableDrag(),this._startPos=this._lastPos=ba,this._active=!0)};jg.prototype.mousemoveWindow=function(Y,ba){if(this._active&&!(this._lastPos.equals(ba)||!this._box&&ba.dist(this._startPos)<this._clickTolerance)){var aa=this._startPos;this._lastPos=ba;this._box||(this._box=Ta.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",
Y));Y=Math.min(aa.x,ba.x);var ja=Math.max(aa.x,ba.x),Da=Math.min(aa.y,ba.y);ba=Math.max(aa.y,ba.y);Ta.setTransform(this._box,"translate("+Y+"px,"+Da+"px)");this._box.style.width=ja-Y+"px";this._box.style.height=ba-Da+"px"}};jg.prototype.mouseupWindow=function(Y,ba){var aa=this;if(this._active&&0===Y.button){var ja=this._startPos;if(this.reset(),Ta.suppressClick(),ja.x!==ba.x||ja.y!==ba.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:Y})),{cameraAnimation:function(Da){return Da.fitScreenCoordinates(ja,
ba,aa._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",Y)}};jg.prototype.keydown=function(Y){this._active&&27===Y.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",Y))};jg.prototype.reset=function(){this._active=!1;this._container.classList.remove("mapboxgl-crosshair");this._box&&(Ta.remove(this._box),this._box=null);Ta.enableDrag();delete this._startPos;delete this._lastPos};jg.prototype._fireEvent=function(Y,ba){return this._map.fire(new a.Event(Y,{originalEvent:ba}))};var oi=
function(Y){this.reset();this.numTouches=Y.numTouches};oi.prototype.reset=function(){delete this.centroid;delete this.startTime;delete this.touches;this.aborted=!1};oi.prototype.touchstart=function(Y,ba,aa){(this.centroid||aa.length>this.numTouches)&&(this.aborted=!0);if(!this.aborted&&(void 0===this.startTime&&(this.startTime=Y.timeStamp),aa.length===this.numTouches)){Y=new a.Point(0,0);for(var ja=0;ja<ba.length;ja+=1)Y._add(ba[ja]);this.centroid=Y.div(ba.length);this.touches=ma(aa,ba)}};oi.prototype.touchmove=
function(Y,ba,aa){if(!this.aborted&&this.centroid){Y=ma(aa,ba);for(var ja in this.touches)ba=Y[ja],(!ba||30<ba.dist(this.touches[ja]))&&(this.aborted=!0)}};oi.prototype.touchend=function(Y,ba,aa){if((!this.centroid||500<Y.timeStamp-this.startTime)&&(this.aborted=!0),0===aa.length)if(Y=!this.aborted&&this.centroid,this.reset(),Y)return Y};var mh=function(Y){this.singleTap=new oi(Y);this.numTaps=Y.numTaps;this.reset()};mh.prototype.reset=function(){this.lastTime=1/0;delete this.lastTap;this.count=0;
this.singleTap.reset()};mh.prototype.touchstart=function(Y,ba,aa){this.singleTap.touchstart(Y,ba,aa)};mh.prototype.touchmove=function(Y,ba,aa){this.singleTap.touchmove(Y,ba,aa)};mh.prototype.touchend=function(Y,ba,aa){if(ba=this.singleTap.touchend(Y,ba,aa)){aa=500>Y.timeStamp-this.lastTime;var ja=!this.lastTap||30>this.lastTap.dist(ba);if(aa&&ja||this.reset(),this.count++,this.lastTime=Y.timeStamp,this.lastTap=ba,this.count===this.numTaps)return this.reset(),ba}};var Pg=function(){this._zoomIn=new mh({numTouches:1,
numTaps:2});this._zoomOut=new mh({numTouches:2,numTaps:1});this.reset()};Pg.prototype.reset=function(){this._active=!1;this._zoomIn.reset();this._zoomOut.reset()};Pg.prototype.touchstart=function(Y,ba,aa){this._zoomIn.touchstart(Y,ba,aa);this._zoomOut.touchstart(Y,ba,aa)};Pg.prototype.touchmove=function(Y,ba,aa){this._zoomIn.touchmove(Y,ba,aa);this._zoomOut.touchmove(Y,ba,aa)};Pg.prototype.touchend=function(Y,ba,aa){var ja=this,Da=this._zoomIn.touchend(Y,ba,aa),Sa=this._zoomOut.touchend(Y,ba,aa);
return Da?(this._active=!0,Y.preventDefault(),setTimeout(function(){return ja.reset()},0),{cameraAnimation:function(gb){return gb.easeTo({duration:300,zoom:gb.getZoom()+1,around:gb.unproject(Da)},{originalEvent:Y})}}):Sa?(this._active=!0,Y.preventDefault(),setTimeout(function(){return ja.reset()},0),{cameraAnimation:function(gb){return gb.easeTo({duration:300,zoom:gb.getZoom()-1,around:gb.unproject(Sa)},{originalEvent:Y})}}):void 0};Pg.prototype.touchcancel=function(){this.reset()};Pg.prototype.enable=
function(){this._enabled=!0};Pg.prototype.disable=function(){this._enabled=!1;this.reset()};Pg.prototype.isEnabled=function(){return this._enabled};Pg.prototype.isActive=function(){return this._active};var xg=function(Y){this.reset();this._clickTolerance=Y.clickTolerance||1};xg.prototype.reset=function(){this._moved=this._active=!1;delete this._lastPoint;delete this._eventButton};xg.prototype._correctButton=function(Y,ba){return!1};xg.prototype._move=function(Y,ba){return{}};xg.prototype.mousedown=
function(Y,ba){if(!this._lastPoint){var aa=Ta.mouseButton(Y);this._correctButton(Y,aa)&&(this._lastPoint=ba,this._eventButton=aa)}};xg.prototype.mousemoveWindow=function(Y,ba){var aa=this._lastPoint;if(aa&&(Y.preventDefault(),this._moved||!(ba.dist(aa)<this._clickTolerance)))return this._moved=!0,this._lastPoint=ba,this._move(aa,ba)};xg.prototype.mouseupWindow=function(Y){Ta.mouseButton(Y)===this._eventButton&&(this._moved&&Ta.suppressClick(),this.reset())};xg.prototype.enable=function(){this._enabled=
!0};xg.prototype.disable=function(){this._enabled=!1;this.reset()};xg.prototype.isEnabled=function(){return this._enabled};xg.prototype.isActive=function(){return this._active};var pi=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.mousedown=function(aa,ja){Y.prototype.mousedown.call(this,aa,ja);this._lastPoint&&(this._active=!0)},ba.prototype._correctButton=function(aa,ja){return 0===ja&&!aa.ctrlKey},
ba.prototype._move=function(aa,ja){return{around:ja,panDelta:ja.sub(aa)}},ba}(xg),qi=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype._correctButton=function(aa,ja){return 0===ja&&aa.ctrlKey||2===ja},ba.prototype._move=function(aa,ja){if(aa=.8*(ja.x-aa.x))return this._active=!0,{bearingDelta:aa}},ba.prototype.contextmenu=function(aa){aa.preventDefault()},ba}(xg),Ti=function(Y){function ba(){Y.apply(this,
arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype._correctButton=function(aa,ja){return 0===ja&&aa.ctrlKey||2===ja},ba.prototype._move=function(aa,ja){if(aa=-.5*(ja.y-aa.y))return this._active=!0,{pitchDelta:aa}},ba.prototype.contextmenu=function(aa){aa.preventDefault()},ba}(xg),kg=function(Y){this._minTouches=1;this._clickTolerance=Y.clickTolerance||1;this.reset()};kg.prototype.reset=function(){this._active=!1;this._touches={};this._sum=
new a.Point(0,0)};kg.prototype.touchstart=function(Y,ba,aa){return this._calculateTransform(Y,ba,aa)};kg.prototype.touchmove=function(Y,ba,aa){if(this._active)return Y.preventDefault(),this._calculateTransform(Y,ba,aa)};kg.prototype.touchend=function(Y,ba,aa){this._calculateTransform(Y,ba,aa);this._active&&aa.length<this._minTouches&&this.reset()};kg.prototype.touchcancel=function(){this.reset()};kg.prototype._calculateTransform=function(Y,ba,aa){0<aa.length&&(this._active=!0);aa=ma(aa,ba);Y=new a.Point(0,
0);var ja=new a.Point(0,0);ba=0;for(var Da in aa){var Sa=aa[Da],gb=this._touches[Da];gb&&(Y._add(Sa),ja._add(Sa.sub(gb)),ba++,aa[Da]=Sa)}if(this._touches=aa,!(ba<this._minTouches)&&ja.mag())if(Da=ja.div(ba),this._sum._add(Da),!(this._sum.mag()<this._clickTolerance))return{around:Y.div(ba),panDelta:Da}};kg.prototype.enable=function(){this._enabled=!0};kg.prototype.disable=function(){this._enabled=!1;this.reset()};kg.prototype.isEnabled=function(){return this._enabled};kg.prototype.isActive=function(){return this._active};
var Ef=function(){this.reset()};Ef.prototype.reset=function(){this._active=!1;delete this._firstTwoTouches};Ef.prototype._start=function(Y){};Ef.prototype._move=function(Y,ba,aa){return{}};Ef.prototype.touchstart=function(Y,ba,aa){this._firstTwoTouches||2>aa.length||(this._firstTwoTouches=[aa[0].identifier,aa[1].identifier],this._start([ba[0],ba[1]]))};Ef.prototype.touchmove=function(Y,ba,aa){if(this._firstTwoTouches){Y.preventDefault();var ja=this._firstTwoTouches,Da=ja[1];ja=pa(aa,ba,ja[0]);ba=
pa(aa,ba,Da);if(ja&&ba)return aa=this._aroundCenter?null:ja.add(ba).div(2),this._move([ja,ba],aa,Y)}};Ef.prototype.touchend=function(Y,ba,aa){if(this._firstTwoTouches){var ja=this._firstTwoTouches;Y=ja[1];ja=pa(aa,ba,ja[0]);ba=pa(aa,ba,Y);ja&&ba||(this._active&&Ta.suppressClick(),this.reset())}};Ef.prototype.touchcancel=function(){this.reset()};Ef.prototype.enable=function(Y){this._enabled=!0;this._aroundCenter=!!Y&&"center"===Y.around};Ef.prototype.disable=function(){this._enabled=!1;this.reset()};
Ef.prototype.isEnabled=function(){return this._enabled};Ef.prototype.isActive=function(){return this._active};var Si=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.reset=function(){Y.prototype.reset.call(this);delete this._distance;delete this._startDistance},ba.prototype._start=function(aa){this._startDistance=this._distance=aa[0].dist(aa[1])},ba.prototype._move=function(aa,ja){var Da=this._distance;
if(this._distance=aa[0].dist(aa[1]),this._active||!(.1>Math.abs(Math.log(this._distance/this._startDistance)/Math.LN2)))return this._active=!0,{zoomDelta:Math.log(this._distance/Da)/Math.LN2,pinchAround:ja}},ba}(Ef),lg=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.reset=function(){Y.prototype.reset.call(this);delete this._minDiameter;delete this._startVector;delete this._vector},ba.prototype._start=
function(aa){this._startVector=this._vector=aa[0].sub(aa[1]);this._minDiameter=aa[0].dist(aa[1])},ba.prototype._move=function(aa,ja){var Da=this._vector;if(this._vector=aa[0].sub(aa[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:180*this._vector.angleWith(Da)/Math.PI,pinchAround:ja}},ba.prototype._isBelowThreshold=function(aa){this._minDiameter=Math.min(this._minDiameter,aa.mag());var ja=25/(Math.PI*this._minDiameter)*360;aa=180*aa.angleWith(this._startVector)/
Math.PI;return Math.abs(aa)<ja},ba}(Ef),Sf=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.reset=function(){Y.prototype.reset.call(this);this._valid=void 0;delete this._firstMove;delete this._lastPoints},ba.prototype._start=function(aa){this._lastPoints=aa;za(aa[0].sub(aa[1]))&&(this._valid=!1)},ba.prototype._move=function(aa,ja,Da){ja=aa[0].sub(this._lastPoints[0]);var Sa=aa[1].sub(this._lastPoints[1]);
if(this._valid=this.gestureBeginsVertically(ja,Sa,Da.timeStamp),this._valid)return this._lastPoints=aa,this._active=!0,{pitchDelta:(ja.y+Sa.y)/2*-.5}},ba.prototype.gestureBeginsVertically=function(aa,ja,Da){if(void 0!==this._valid)return this._valid;var Sa=2<=aa.mag(),gb=2<=ja.mag();if(Sa||gb){if(!Sa||!gb)return void 0===this._firstMove&&(this._firstMove=Da),100>Da-this._firstMove&&void 0;Da=0<aa.y==0<ja.y;return za(aa)&&za(ja)&&Da}},ba}(Ef),Ph=function(){this._panStep=100;this._bearingStep=15;this._pitchStep=
10};Ph.prototype.reset=function(){this._active=!1};Ph.prototype.keydown=function(Y){var ba=this;if(!(Y.altKey||Y.ctrlKey||Y.metaKey)){var aa=0,ja=0,Da=0,Sa=0,gb=0;switch(Y.keyCode){case 61:case 107:case 171:case 187:aa=1;break;case 189:case 109:case 173:aa=-1;break;case 37:Y.shiftKey?ja=-1:(Y.preventDefault(),Sa=-1);break;case 39:Y.shiftKey?ja=1:(Y.preventDefault(),Sa=1);break;case 38:Y.shiftKey?Da=1:(Y.preventDefault(),gb=-1);break;case 40:Y.shiftKey?Da=-1:(Y.preventDefault(),gb=1);break;default:return}return{cameraAnimation:function(sb){var Ob=
sb.getZoom();sb.easeTo({duration:300,easeId:"keyboardHandler",easing:qa,zoom:aa?Math.round(Ob)+aa*(Y.shiftKey?2:1):Ob,bearing:sb.getBearing()+ja*ba._bearingStep,pitch:sb.getPitch()+Da*ba._pitchStep,offset:[-Sa*ba._panStep,-gb*ba._panStep],center:sb.getCenter()},{originalEvent:Y})}}}};Ph.prototype.enable=function(){this._enabled=!0};Ph.prototype.disable=function(){this._enabled=!1;this.reset()};Ph.prototype.isEnabled=function(){return this._enabled};Ph.prototype.isActive=function(){return this._active};
var Kf=function(Y,ba){this._map=Y;this._el=Y.getCanvasContainer();this._handler=ba;this._delta=0;this._defaultZoomRate=.01;this._wheelZoomRate=1/450;a.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Kf.prototype.setZoomRate=function(Y){this._defaultZoomRate=Y};Kf.prototype.setWheelZoomRate=function(Y){this._wheelZoomRate=Y};Kf.prototype.isEnabled=function(){return!!this._enabled};Kf.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout};Kf.prototype.isZooming=
function(){return!!this._zooming};Kf.prototype.enable=function(Y){this.isEnabled()||(this._enabled=!0,this._aroundCenter=Y&&"center"===Y.around)};Kf.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};Kf.prototype.wheel=function(Y){if(this.isEnabled()){var ba=Y.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*Y.deltaY:Y.deltaY,aa=a.browser.now(),ja=aa-(this._lastWheelEventTime||0);this._lastWheelEventTime=aa;0!==ba&&0==ba%4.000244140625?this._type="wheel":0!==ba&&4>Math.abs(ba)?this._type=
"trackpad":400<ja?(this._type=null,this._lastValue=ba,this._timeout=setTimeout(this._onTimeout,40,Y)):this._type||(this._type=200>Math.abs(ja*ba)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ba+=this._lastValue));Y.shiftKey&&ba&&(ba/=4);this._type&&(this._lastWheelEvent=Y,this._delta-=ba,this._active||this._start(Y));Y.preventDefault()}};Kf.prototype._onTimeout=function(Y){this._type="wheel";this._delta-=this._lastValue;this._active||this._start(Y)};Kf.prototype._start=
function(Y){this._delta&&(this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),Y=Ta.mousePos(this._el,Y),this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(Y)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame()))};Kf.prototype.renderFrame=function(){return this._onScrollFrame()};
Kf.prototype._onScrollFrame=function(){var Y=this;if(this._frameId&&(this._frameId=null,this.isActive())){var ba=this._map.transform;if(0!==this._delta){var aa=2/(1+Math.exp(-Math.abs(this._delta*("wheel"===this._type&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate))));0>this._delta&&0!==aa&&(aa=1/aa);var ja="number"==typeof this._targetZoom?ba.zoomScale(this._targetZoom):ba.scale;this._targetZoom=Math.min(ba.maxZoom,Math.max(ba.minZoom,ba.scaleZoom(ja*aa)));"wheel"===
this._type&&(this._startZoom=ba.zoom,this._easing=this._smoothOutEasing(200));this._delta=0}var Da="number"==typeof this._targetZoom?this._targetZoom:ba.zoom;var Sa=this._startZoom,gb=this._easing;aa=!1;"wheel"===this._type&&Sa&&gb?(ja=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),gb=gb(ja),Da=a.number(Sa,Da,gb),1>ja?this._frameId||(this._frameId=!0):aa=!0):aa=!0;return this._active=!0,aa&&(this._active=!1,this._finishTimeout=setTimeout(function(){Y._zooming=!1;Y._handler._triggerRenderFrame();
delete Y._targetZoom;delete Y._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!aa,zoomDelta:Da-ba.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}};Kf.prototype._smoothOutEasing=function(Y){var ba=a.ease;if(this._prevEase){ba=this._prevEase;var aa=(a.browser.now()-ba.start)/ba.duration;ba=ba.easing(aa+.01)-ba.easing(aa);ba=.27/Math.sqrt(ba*ba+1E-4)*.01;ba=a.bezier(ba,Math.sqrt(.0729-ba*ba),.25,1)}return this._prevEase={start:a.browser.now(),duration:Y,easing:ba},ba};Kf.prototype.reset=
function(){this._active=!1};var rg=function(Y,ba){this._clickZoom=Y;this._tapZoom=ba};rg.prototype.enable=function(){this._clickZoom.enable();this._tapZoom.enable()};rg.prototype.disable=function(){this._clickZoom.disable();this._tapZoom.disable()};rg.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()};rg.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Eg=function(){this.reset()};Eg.prototype.reset=function(){this._active=
!1};Eg.prototype.dblclick=function(Y,ba){return Y.preventDefault(),{cameraAnimation:function(aa){aa.easeTo({duration:300,zoom:aa.getZoom()+(Y.shiftKey?-1:1),around:aa.unproject(ba)},{originalEvent:Y})}}};Eg.prototype.enable=function(){this._enabled=!0};Eg.prototype.disable=function(){this._enabled=!1;this.reset()};Eg.prototype.isEnabled=function(){return this._enabled};Eg.prototype.isActive=function(){return this._active};var Mf=function(){this._tap=new mh({numTouches:1,numTaps:1});this.reset()};
Mf.prototype.reset=function(){this._active=!1;delete this._swipePoint;delete this._swipeTouch;delete this._tapTime;this._tap.reset()};Mf.prototype.touchstart=function(Y,ba,aa){this._swipePoint||(this._tapTime&&500<Y.timeStamp-this._tapTime&&this.reset(),this._tapTime?0<aa.length&&(this._swipePoint=ba[0],this._swipeTouch=aa[0].identifier):this._tap.touchstart(Y,ba,aa))};Mf.prototype.touchmove=function(Y,ba,aa){if(this._tapTime){if(this._swipePoint&&aa[0].identifier===this._swipeTouch)return ba=ba[0],
aa=ba.y-this._swipePoint.y,this._swipePoint=ba,Y.preventDefault(),this._active=!0,{zoomDelta:aa/128}}else this._tap.touchmove(Y,ba,aa)};Mf.prototype.touchend=function(Y,ba,aa){this._tapTime?this._swipePoint&&0===aa.length&&this.reset():this._tap.touchend(Y,ba,aa)&&(this._tapTime=Y.timeStamp)};Mf.prototype.touchcancel=function(){this.reset()};Mf.prototype.enable=function(){this._enabled=!0};Mf.prototype.disable=function(){this._enabled=!1;this.reset()};Mf.prototype.isEnabled=function(){return this._enabled};
Mf.prototype.isActive=function(){return this._active};var ah=function(Y,ba,aa){this._el=Y;this._mousePan=ba;this._touchPan=aa};ah.prototype.enable=function(Y){this._inertiaOptions=Y||{};this._mousePan.enable();this._touchPan.enable();this._el.classList.add("mapboxgl-touch-drag-pan")};ah.prototype.disable=function(){this._mousePan.disable();this._touchPan.disable();this._el.classList.remove("mapboxgl-touch-drag-pan")};ah.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()};
ah.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var nh=function(Y,ba,aa){this._pitchWithRotate=Y.pitchWithRotate;this._mouseRotate=ba;this._mousePitch=aa};nh.prototype.enable=function(){this._mouseRotate.enable();this._pitchWithRotate&&this._mousePitch.enable()};nh.prototype.disable=function(){this._mouseRotate.disable();this._mousePitch.disable()};nh.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())};
nh.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var wf=function(Y,ba,aa,ja){this._el=Y;this._touchZoom=ba;this._touchRotate=aa;this._tapDragZoom=ja;this._rotationDisabled=!1;this._enabled=!0};wf.prototype.enable=function(Y){this._touchZoom.enable(Y);this._rotationDisabled||this._touchRotate.enable(Y);this._tapDragZoom.enable();this._el.classList.add("mapboxgl-touch-zoom-rotate")};wf.prototype.disable=function(){this._touchZoom.disable();this._touchRotate.disable();
this._tapDragZoom.disable();this._el.classList.remove("mapboxgl-touch-zoom-rotate")};wf.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()};wf.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()};wf.prototype.disableRotation=function(){this._rotationDisabled=!0;this._touchRotate.disable()};wf.prototype.enableRotation=function(){this._rotationDisabled=
!1;this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Wi=function(Y){return Y.zoom||Y.drag||Y.pitch||Y.rotate},yj=function(Y){function ba(){Y.apply(this,arguments)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba}(a.Event),le=function(Y,ba){this._map=Y;this._el=this._map.getCanvasContainer();this._handlers=[];this._handlersById={};this._changes=[];this._inertia=new lh(Y);this._bearingSnap=ba.bearingSnap;this._previousActiveHandlers={};this._eventsInProgress=
{};this._addDefaultHandlers(ba);a.bindAll(["handleEvent","handleWindowEvent"],this);Y=this._el;this._listeners=[[Y,"touchstart",{passive:!1}],[Y,"touchmove",{passive:!1}],[Y,"touchend",void 0],[Y,"touchcancel",void 0],[Y,"mousedown",void 0],[Y,"mousemove",void 0],[Y,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[Y,"mouseover",void 0],[Y,"mouseout",void 0],[Y,"dblclick",void 0],[Y,"click",void 0],[Y,"keydown",{capture:!1}],[Y,"keyup",void 0],[Y,
"wheel",{passive:!1}],[Y,"contextmenu",void 0],[a.window,"blur",void 0]];Y=0;for(ba=this._listeners;Y<ba.length;Y+=1){var aa=ba[Y],ja=aa[0];Ta.addEventListener(ja,aa[1],ja===a.window.document?this.handleWindowEvent:this.handleEvent,aa[2])}};le.prototype.destroy=function(){for(var Y=0,ba=this._listeners;Y<ba.length;Y+=1){var aa=ba[Y],ja=aa[0];Ta.removeEventListener(ja,aa[1],ja===a.window.document?this.handleWindowEvent:this.handleEvent,aa[2])}};le.prototype._addDefaultHandlers=function(Y){var ba=this._map,
aa=ba.getCanvasContainer();this._add("mapEvent",new Rf(ba,Y));var ja=ba.boxZoom=new jg(ba,Y);this._add("boxZoom",ja);ja=new Pg;var Da=new Eg;ba.doubleClickZoom=new rg(Da,ja);this._add("tapZoom",ja);this._add("clickZoom",Da);ja=new Mf;this._add("tapDragZoom",ja);Da=ba.touchPitch=new Sf;this._add("touchPitch",Da);Da=new qi(Y);var Sa=new Ti(Y);ba.dragRotate=new nh(Y,Da,Sa);this._add("mouseRotate",Da,["mousePitch"]);this._add("mousePitch",Sa,["mouseRotate"]);Da=new pi(Y);Sa=new kg(Y);ba.dragPan=new ah(aa,
Da,Sa);this._add("mousePan",Da);this._add("touchPan",Sa,["touchZoom","touchRotate"]);Da=new lg;Sa=new Si;ba.touchZoomRotate=new wf(aa,Sa,Da,ja);this._add("touchRotate",Da,["touchPan","touchZoom"]);this._add("touchZoom",Sa,["touchPan","touchRotate"]);aa=ba.scrollZoom=new Kf(ba,this);this._add("scrollZoom",aa,["mousePan"]);aa=ba.keyboard=new Ph;this._add("keyboard",aa);this._add("blockableMapEvent",new $g(ba));aa=0;for(ja="boxZoom doubleClickZoom tapDragZoom touchPitch dragRotate dragPan touchZoomRotate scrollZoom keyboard".split(" ");aa<
ja.length;aa+=1)Da=ja[aa],Y.interactive&&Y[Da]&&ba[Da].enable(Y[Da])};le.prototype._add=function(Y,ba,aa){this._handlers.push({handlerName:Y,handler:ba,allowed:aa});this._handlersById[Y]=ba};le.prototype.stop=function(){if(!this._updatingCamera){for(var Y=0,ba=this._handlers;Y<ba.length;Y+=1)ba[Y].handler.reset();this._inertia.clear();this._fireEvents({},{});this._changes=[]}};le.prototype.isActive=function(){for(var Y=0,ba=this._handlers;Y<ba.length;Y+=1)if(ba[Y].handler.isActive())return!0;return!1};
le.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()};le.prototype.isRotating=function(){return!!this._eventsInProgress.rotate};le.prototype.isMoving=function(){return!!Wi(this._eventsInProgress)||this.isZooming()};le.prototype._blockedByActive=function(Y,ba,aa){for(var ja in Y)if(ja!==aa&&(!ba||0>ba.indexOf(ja)))return!0;return!1};le.prototype.handleWindowEvent=function(Y){this.handleEvent(Y,Y.type+"Window")};le.prototype._getMapTouches=function(Y){for(var ba=
[],aa=0;aa<Y.length;aa+=1){var ja=Y[aa];this._el.contains(ja.target)&&ba.push(ja)}return ba};le.prototype.handleEvent=function(Y,ba){if("blur"!==Y.type){this._updatingCamera=!0;for(var aa="renderFrame"===Y.type?void 0:Y,ja={needsRenderFrame:!1},Da={},Sa={},gb=Y.touches?this._getMapTouches(Y.touches):void 0,sb=gb?Ta.touchPos(this._el,gb):Ta.mousePos(this._el,Y),Ob=0,Yb=this._handlers;Ob<Yb.length;Ob+=1){var cc=Yb[Ob],Nc=cc.handlerName,Lc=cc.handler;cc=cc.allowed;if(Lc.isEnabled()){var Cc=void 0;this._blockedByActive(Sa,
cc,Nc)?Lc.reset():Lc[ba||Y.type]&&(Cc=Lc[ba||Y.type](Y,sb,gb),this.mergeHandlerResult(ja,Da,Cc,Nc,aa),Cc&&Cc.needsRenderFrame&&this._triggerRenderFrame());(Cc||Lc.isActive())&&(Sa[Nc]=Lc)}}Y={};for(var Kc in this._previousActiveHandlers)Sa[Kc]||(Y[Kc]=aa);this._previousActiveHandlers=Sa;(Object.keys(Y).length||Ca(ja))&&(this._changes.push([ja,Da,Y]),this._triggerRenderFrame());(Object.keys(Sa).length||Ca(ja))&&this._map._stop(!0);this._updatingCamera=!1;(aa=ja.cameraAnimation)&&(this._inertia.clear(),
this._fireEvents({},{}),this._changes=[],aa(this._map))}else this.stop()};le.prototype.mergeHandlerResult=function(Y,ba,aa,ja,Da){aa&&(a.extend(Y,aa),Y={handlerName:ja,originalEvent:aa.originalEvent||Da},void 0!==aa.zoomDelta&&(ba.zoom=Y),void 0!==aa.panDelta&&(ba.drag=Y),void 0!==aa.pitchDelta&&(ba.pitch=Y),void 0!==aa.bearingDelta&&(ba.rotate=Y))};le.prototype._applyChanges=function(){for(var Y={},ba={},aa={},ja=0,Da=this._changes;ja<Da.length;ja+=1){var Sa=Da[ja],gb=Sa[0],sb=Sa[1];Sa=Sa[2];gb.panDelta&&
(Y.panDelta=(Y.panDelta||new a.Point(0,0))._add(gb.panDelta));gb.zoomDelta&&(Y.zoomDelta=(Y.zoomDelta||0)+gb.zoomDelta);gb.bearingDelta&&(Y.bearingDelta=(Y.bearingDelta||0)+gb.bearingDelta);gb.pitchDelta&&(Y.pitchDelta=(Y.pitchDelta||0)+gb.pitchDelta);void 0!==gb.around&&(Y.around=gb.around);void 0!==gb.pinchAround&&(Y.pinchAround=gb.pinchAround);gb.noInertia&&(Y.noInertia=gb.noInertia);a.extend(ba,sb);a.extend(aa,Sa)}this._updateMapTransform(Y,ba,aa);this._changes=[]};le.prototype._updateMapTransform=
function(Y,ba,aa){var ja=this._map,Da=ja.transform;if(!Ca(Y))return this._fireEvents(ba,aa);var Sa=Y.panDelta,gb=Y.zoomDelta,sb=Y.bearingDelta,Ob=Y.pitchDelta,Yb=Y.around,cc=Y.pinchAround;void 0!==cc&&(Yb=cc);ja._stop(!0);Yb=Yb||ja.transform.centerPoint;ja=Da.pointLocation(Sa?Yb.sub(Sa):Yb);sb&&(Da.bearing+=sb);Ob&&(Da.pitch+=Ob);gb&&(Da.zoom+=gb);Da.setLocationAtPoint(ja,Yb);this._map._update();Y.noInertia||this._inertia.record(Y);this._fireEvents(ba,aa)};le.prototype._fireEvents=function(Y,ba){var aa=
this,ja=Wi(this._eventsInProgress),Da=Wi(Y),Sa={};for(cc in Y)this._eventsInProgress[cc]||(Sa[cc+"start"]=Y[cc].originalEvent),this._eventsInProgress[cc]=Y[cc];for(var gb in!ja&&Da&&this._fireEvent("movestart",Da.originalEvent),Sa)this._fireEvent(gb,Sa[gb]);for(var sb in Y.rotate&&(this._bearingChanged=!0),Da&&this._fireEvent("move",Da.originalEvent),Y)this._fireEvent(sb,Y[sb].originalEvent);var Ob;Y={};for(var Yb in this._eventsInProgress){var cc=this._eventsInProgress[Yb];Sa=cc.handlerName;cc=cc.originalEvent;
this._handlersById[Sa].isActive()||(delete this._eventsInProgress[Yb],Y[Yb+"end"]=Ob=ba[Sa]||cc)}for(var Nc in Y)this._fireEvent(Nc,Y[Nc]);ba=Wi(this._eventsInProgress);!ja&&!Da||ba||(this._updatingCamera=!0,ja=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Da=function(Lc){return 0!==Lc&&-aa._bearingSnap<Lc&&Lc<aa._bearingSnap},ja?(Da(ja.bearing||this._map.getBearing())&&(ja.bearing=0),this._map.easeTo(ja,{originalEvent:Ob})):(this._map.fire(new a.Event("moveend",{originalEvent:Ob})),
Da(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=this._bearingChanged=!1)};le.prototype._fireEvent=function(Y,ba){this._map.fire(new a.Event(Y,ba?{originalEvent:ba}:{}))};le.prototype._triggerRenderFrame=function(){var Y=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(ba){delete Y._frameId;Y.handleEvent(new yj("renderFrame",{timeStamp:ba}));Y._applyChanges()}))};var Mj=function(Y){function ba(aa,ja){Y.call(this);this._zooming=this._moving=
!1;this.transform=aa;this._bearingSnap=ja.bearingSnap;a.bindAll(["_renderFrameCallback"],this)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},ba.prototype.setCenter=function(aa,ja){return this.jumpTo({center:aa},ja)},ba.prototype.panBy=function(aa,ja,Da){return aa=a.Point.convert(aa).mult(-1),this.panTo(this.transform.center,a.extend({offset:aa},ja),Da)},
ba.prototype.panTo=function(aa,ja,Da){return this.easeTo(a.extend({center:aa},ja),Da)},ba.prototype.getZoom=function(){return this.transform.zoom},ba.prototype.setZoom=function(aa,ja){return this.jumpTo({zoom:aa},ja),this},ba.prototype.zoomTo=function(aa,ja,Da){return this.easeTo(a.extend({zoom:aa},ja),Da)},ba.prototype.zoomIn=function(aa,ja){return this.zoomTo(this.getZoom()+1,aa,ja),this},ba.prototype.zoomOut=function(aa,ja){return this.zoomTo(this.getZoom()-1,aa,ja),this},ba.prototype.getBearing=
function(){return this.transform.bearing},ba.prototype.setBearing=function(aa,ja){return this.jumpTo({bearing:aa},ja),this},ba.prototype.getPadding=function(){return this.transform.padding},ba.prototype.setPadding=function(aa,ja){return this.jumpTo({padding:aa},ja),this},ba.prototype.rotateTo=function(aa,ja,Da){return this.easeTo(a.extend({bearing:aa},ja),Da)},ba.prototype.resetNorth=function(aa,ja){return this.rotateTo(0,a.extend({duration:1E3},aa),ja),this},ba.prototype.resetNorthPitch=function(aa,
ja){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1E3},aa),ja),this},ba.prototype.snapToNorth=function(aa,ja){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(aa,ja):this},ba.prototype.getPitch=function(){return this.transform.pitch},ba.prototype.setPitch=function(aa,ja){return this.jumpTo({pitch:aa},ja),this},ba.prototype.cameraForBounds=function(aa,ja){return aa=a.LngLatBounds.convert(aa),this._cameraForBoxAndBearing(aa.getNorthWest(),aa.getSouthEast(),0,ja)},ba.prototype._cameraForBoxAndBearing=
function(aa,ja,Da,Sa){var gb={top:0,bottom:0,right:0,left:0};if("number"==typeof(Sa=a.extend({padding:gb,offset:[0,0],maxZoom:this.transform.maxZoom},Sa)).padding){var sb=Sa.padding;Sa.padding={top:sb,bottom:sb,right:sb,left:sb}}Sa.padding=a.extend(gb,Sa.padding);gb=this.transform;sb=gb.padding;aa=gb.project(a.LngLat.convert(aa));ja=gb.project(a.LngLat.convert(ja));var Ob=aa.rotate(-Da*Math.PI/180),Yb=ja.rotate(-Da*Math.PI/180),cc=new a.Point(Math.max(Ob.x,Yb.x),Math.max(Ob.y,Yb.y));Ob=new a.Point(Math.min(Ob.x,
Yb.x),Math.min(Ob.y,Yb.y));Ob=cc.sub(Ob);cc=(gb.width-(sb.left+sb.right+Sa.padding.left+Sa.padding.right))/Ob.x;sb=(gb.height-(sb.top+sb.bottom+Sa.padding.top+Sa.padding.bottom))/Ob.y;if(!(0>sb||0>cc))return sb=Math.min(gb.scaleZoom(gb.scale*Math.min(cc,sb)),Sa.maxZoom),cc=a.Point.convert(Sa.offset),Sa=(new a.Point(cc.x+(Sa.padding.left-Sa.padding.right)/2,cc.y+(Sa.padding.top-Sa.padding.bottom)/2)).mult(gb.scale/gb.zoomScale(sb)),{center:gb.unproject(aa.add(ja).div(2).sub(Sa)),zoom:sb,bearing:Da};
a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},ba.prototype.fitBounds=function(aa,ja,Da){return this._fitInternal(this.cameraForBounds(aa,ja),ja,Da)},ba.prototype.fitScreenCoordinates=function(aa,ja,Da,Sa,gb){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(aa)),this.transform.pointLocation(a.Point.convert(ja)),Da,Sa),Sa,gb)},ba.prototype._fitInternal=function(aa,ja,Da){return aa?(delete (ja=a.extend(aa,
ja)).padding,ja.linear?this.easeTo(ja,Da):this.flyTo(ja,Da)):this},ba.prototype.jumpTo=function(aa,ja){this.stop();var Da=this.transform,Sa=!1,gb=!1,sb=!1;return"zoom"in aa&&Da.zoom!==+aa.zoom&&(Sa=!0,Da.zoom=+aa.zoom),void 0!==aa.center&&(Da.center=a.LngLat.convert(aa.center)),"bearing"in aa&&Da.bearing!==+aa.bearing&&(gb=!0,Da.bearing=+aa.bearing),"pitch"in aa&&Da.pitch!==+aa.pitch&&(sb=!0,Da.pitch=+aa.pitch),null==aa.padding||Da.isPaddingEqual(aa.padding)||(Da.padding=aa.padding),this.fire(new a.Event("movestart",
ja)).fire(new a.Event("move",ja)),Sa&&this.fire(new a.Event("zoomstart",ja)).fire(new a.Event("zoom",ja)).fire(new a.Event("zoomend",ja)),gb&&this.fire(new a.Event("rotatestart",ja)).fire(new a.Event("rotate",ja)).fire(new a.Event("rotateend",ja)),sb&&this.fire(new a.Event("pitchstart",ja)).fire(new a.Event("pitch",ja)).fire(new a.Event("pitchend",ja)),this.fire(new a.Event("moveend",ja))},ba.prototype.easeTo=function(aa,ja){var Da=this;this._stop(!1,aa.easeId);(!1===(aa=a.extend({offset:[0,0],duration:500,
easing:a.ease},aa)).animate||!aa.essential&&a.browser.prefersReducedMotion)&&(aa.duration=0);var Sa=this.transform,gb=this.getZoom(),sb=this.getBearing(),Ob=this.getPitch(),Yb=this.getPadding(),cc="zoom"in aa?+aa.zoom:gb,Nc="bearing"in aa?this._normalizeBearing(aa.bearing,sb):sb,Lc="pitch"in aa?+aa.pitch:Ob,Cc="padding"in aa?aa.padding:Sa.padding,Kc=a.Point.convert(aa.offset),Hc=Sa.centerPoint.add(Kc),bc=Sa.pointLocation(Hc),Aa=a.LngLat.convert(aa.center||bc);this._normalizeCenter(Aa);var Ha,Qa,hb=
Sa.project(bc),ub=Sa.project(Aa).sub(hb),Mb=Sa.zoomScale(cc-gb);aa.around&&(Ha=a.LngLat.convert(aa.around),Qa=Sa.locationPoint(Ha));bc={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||cc!==gb,this._rotating=this._rotating||sb!==Nc,this._pitching=this._pitching||Lc!==Ob,this._padding=!Sa.isPaddingEqual(Cc),this._easeId=aa.easeId,this._prepareEase(ja,aa.noMoveStart,bc),clearTimeout(this._easeEndTimeoutID),this._ease(function(Tb){if(Da._zooming&&
(Sa.zoom=a.number(gb,cc,Tb)),Da._rotating&&(Sa.bearing=a.number(sb,Nc,Tb)),Da._pitching&&(Sa.pitch=a.number(Ob,Lc,Tb)),Da._padding&&(Sa.interpolatePadding(Yb,Cc,Tb),Hc=Sa.centerPoint.add(Kc)),Ha)Sa.setLocationAtPoint(Ha,Qa);else{var uc=Sa.zoomScale(Sa.zoom-gb);Tb=Sa.unproject(hb.add(ub.mult(Tb*Math.pow(cc>gb?Math.min(2,Mb):Math.max(.5,Mb),1-Tb))).mult(uc));Sa.setLocationAtPoint(Sa.renderWorldCopies?Tb.wrap():Tb,Hc)}Da._fireMoveEvents(ja)},function(Tb){Da._afterEase(ja,Tb)},aa),this},ba.prototype._prepareEase=
function(aa,ja,Da){void 0===Da&&(Da={});this._moving=!0;ja||Da.moving||this.fire(new a.Event("movestart",aa));this._zooming&&!Da.zooming&&this.fire(new a.Event("zoomstart",aa));this._rotating&&!Da.rotating&&this.fire(new a.Event("rotatestart",aa));this._pitching&&!Da.pitching&&this.fire(new a.Event("pitchstart",aa))},ba.prototype._fireMoveEvents=function(aa){this.fire(new a.Event("move",aa));this._zooming&&this.fire(new a.Event("zoom",aa));this._rotating&&this.fire(new a.Event("rotate",aa));this._pitching&&
this.fire(new a.Event("pitch",aa))},ba.prototype._afterEase=function(aa,ja){if(!this._easeId||!ja||this._easeId!==ja){delete this._easeId;ja=this._zooming;var Da=this._rotating,Sa=this._pitching;this._padding=this._pitching=this._rotating=this._zooming=this._moving=!1;ja&&this.fire(new a.Event("zoomend",aa));Da&&this.fire(new a.Event("rotateend",aa));Sa&&this.fire(new a.Event("pitchend",aa));this.fire(new a.Event("moveend",aa))}},ba.prototype.flyTo=function(aa,ja){function Da(Sd){Sd=(kc*kc-uc*uc+
(Sd?-1:1)*ad*ad*nc*nc)/(2*(Sd?kc:uc)*ad*nc);return Math.log(Math.sqrt(Sd*Sd+1)-Sd)}function Sa(Sd){return(Math.exp(Sd)+Math.exp(-Sd))/2}var gb=this;if(!aa.essential&&a.browser.prefersReducedMotion)return aa=a.pick(aa,["center","zoom","bearing","pitch","around"]),this.jumpTo(aa,ja);this.stop();aa=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},aa);var sb=this.transform,Ob=this.getZoom(),Yb=this.getBearing(),cc=this.getPitch(),Nc=this.getPadding(),Lc="zoom"in aa?a.clamp(+aa.zoom,sb.minZoom,
sb.maxZoom):Ob,Cc="bearing"in aa?this._normalizeBearing(aa.bearing,Yb):Yb,Kc="pitch"in aa?+aa.pitch:cc,Hc="padding"in aa?aa.padding:sb.padding,bc=sb.zoomScale(Lc-Ob),Aa=a.Point.convert(aa.offset),Ha=sb.centerPoint.add(Aa),Qa=sb.pointLocation(Ha),hb=a.LngLat.convert(aa.center||Qa);this._normalizeCenter(hb);var ub=sb.project(Qa),Mb=sb.project(hb).sub(ub),Tb=aa.curve,uc=Math.max(sb.width,sb.height),kc=uc/bc,nc=Mb.mag();"minZoom"in aa&&(bc=a.clamp(Math.min(aa.minZoom,Ob,Lc),sb.minZoom,sb.maxZoom),bc=
uc/sb.zoomScale(bc-Ob),Tb=Math.sqrt(bc/nc*2));var ad=Tb*Tb,kd=Da(0),td=function(Sd){return Sa(kd)/Sa(kd+Tb*Sd)},Cd=function(Sd){var ee=Sa(kd);Sd=Zd=kd+Tb*Sd;return uc*((ee*((Math.exp(Sd)-Math.exp(-Sd))/2/Sa(Zd))-(Math.exp(kd)-Math.exp(-kd))/2)/ad)/nc;var Zd},Md=(Da(1)-kd)/Tb;if(1E-6>Math.abs(nc)||!isFinite(Md)){if(1E-6>Math.abs(uc-kc))return this.easeTo(aa,ja);var Ed=kc<uc?-1:1;Md=Math.abs(Math.log(kc/uc))/Tb;Cd=function(){return 0};td=function(Sd){return Math.exp(Ed*Tb*Sd)}}return aa.duration="duration"in
aa?+aa.duration:1E3*Md/("screenSpeed"in aa?+aa.screenSpeed/Tb:+aa.speed),aa.maxDuration&&aa.duration>aa.maxDuration&&(aa.duration=0),this._zooming=!0,this._rotating=Yb!==Cc,this._pitching=Kc!==cc,this._padding=!sb.isPaddingEqual(Hc),this._prepareEase(ja,!1),this._ease(function(Sd){var ee=Sd*Md,Zd=1/td(ee);sb.zoom=1===Sd?Lc:Ob+sb.scaleZoom(Zd);gb._rotating&&(sb.bearing=a.number(Yb,Cc,Sd));gb._pitching&&(sb.pitch=a.number(cc,Kc,Sd));gb._padding&&(sb.interpolatePadding(Nc,Hc,Sd),Ha=sb.centerPoint.add(Aa));
Sd=1===Sd?hb:sb.unproject(ub.add(Mb.mult(Cd(ee))).mult(Zd));sb.setLocationAtPoint(sb.renderWorldCopies?Sd.wrap():Sd,Ha);gb._fireMoveEvents(ja)},function(){return gb._afterEase(ja)},aa),this},ba.prototype.isEasing=function(){return!!this._easeFrameId},ba.prototype.stop=function(){return this._stop()},ba.prototype._stop=function(aa,ja){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Da=this._onEaseEnd;delete this._onEaseEnd;
Da.call(this,ja)}aa||(aa=this.handlers)&&aa.stop();return this},ba.prototype._ease=function(aa,ja,Da){!1===Da.animate||0===Da.duration?(aa(1),ja()):(this._easeStart=a.browser.now(),this._easeOptions=Da,this._onEaseFrame=aa,this._onEaseEnd=ja,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},ba.prototype._renderFrameCallback=function(){var aa=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(aa));1>aa?this._easeFrameId=
this._requestRenderFrame(this._renderFrameCallback):this.stop()},ba.prototype._normalizeBearing=function(aa,ja){aa=a.wrap(aa,-180,180);var Da=Math.abs(aa-ja);return Math.abs(aa-360-ja)<Da&&(aa-=360),Math.abs(aa+360-ja)<Da&&(aa+=360),aa},ba.prototype._normalizeCenter=function(aa){var ja=this.transform;ja.renderWorldCopies&&!ja.lngRange&&(ja=aa.lng-ja.center.lng,aa.lng+=180<ja?-360:-180>ja?360:0)},ba}(a.Evented),ch=function(Y){void 0===Y&&(Y={});this.options=Y;a.bindAll(["_updateEditLink","_updateData",
"_updateCompact"],this)};ch.prototype.getDefaultPosition=function(){return"bottom-right"};ch.prototype.onAdd=function(Y){var ba=this.options&&this.options.compact;return this._map=Y,this._container=Ta.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=Ta.create("div","mapboxgl-ctrl-attrib-inner",this._container),ba&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",
this._updateData),this._map.on("moveend",this._updateEditLink),void 0===ba&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container};ch.prototype.onRemove=function(){Ta.remove(this._container);this._map.off("styledata",this._updateData);this._map.off("sourcedata",this._updateData);this._map.off("moveend",this._updateEditLink);this._map.off("resize",this._updateCompact);this._attribHTML=this._map=void 0};ch.prototype._updateEditLink=function(){var Y=this._editLink;Y||(Y=
this._editLink=this._container.querySelector(".mapbox-improve-map"));var ba=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(Y){var aa=ba.reduce(function(ja,Da,Sa){return Da.value&&(ja+=Da.key+"\x3d"+Da.value+(Sa<ba.length-1?"\x26":"")),ja},"?");Y.href=a.config.FEEDBACK_URL+"/"+aa+(this._map._hash?this._map._hash.getHashString(!0):"");Y.rel="noopener nofollow"}};ch.prototype._updateData=
function(Y){!Y||"metadata"!==Y.sourceDataType&&"style"!==Y.dataType||(this._updateAttributions(),this._updateEditLink())};ch.prototype._updateAttributions=function(){if(this._map.style){var Y=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?Y=Y.concat(this.options.customAttribution.map(function(Da){return"string"!=typeof Da?"":Da})):"string"==typeof this.options.customAttribution&&Y.push(this.options.customAttribution)),this._map.style.stylesheet){var ba=this._map.style.stylesheet;
this.styleOwner=ba.owner;this.styleId=ba.id}ba=this._map.style.sourceCaches;for(var aa in ba){var ja=ba[aa];ja.used&&(ja=ja.getSource(),ja.attribution&&0>Y.indexOf(ja.attribution)&&Y.push(ja.attribution))}Y.sort(function(Da,Sa){return Da.length-Sa.length});aa=(Y=Y.filter(function(Da,Sa){for(Sa+=1;Sa<Y.length;Sa++)if(0<=Y[Sa].indexOf(Da))return!1;return!0})).join(" | ");aa!==this._attribHTML&&(this._attribHTML=aa,Y.length?(this._innerContainer.innerHTML=aa,this._container.classList.remove("mapboxgl-attrib-empty")):
this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}};ch.prototype._updateCompact=function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var cg=function(){a.bindAll(["_updateLogo"],this);a.bindAll(["_updateCompact"],this)};cg.prototype.onAdd=function(Y){this._map=Y;this._container=Ta.create("div","mapboxgl-ctrl");Y=Ta.create("a","mapboxgl-ctrl-logo");return Y.target=
"_blank",Y.rel="noopener nofollow",Y.href="https://www.mapbox.com/",Y.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),Y.setAttribute("rel","noopener nofollow"),this._container.appendChild(Y),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container};cg.prototype.onRemove=function(){Ta.remove(this._container);this._map.off("sourcedata",this._updateLogo);
this._map.off("resize",this._updateCompact)};cg.prototype.getDefaultPosition=function(){return"bottom-left"};cg.prototype._updateLogo=function(Y){Y&&"metadata"!==Y.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")};cg.prototype._logoRequired=function(){if(this._map.style){var Y=this._map.style.sourceCaches,ba;for(ba in Y)if(Y[ba].getSource().mapbox_logo)return!0;return!1}};cg.prototype._updateCompact=function(){var Y=this._container.children;Y.length&&(Y=Y[0],250>
this._map.getCanvasContainer().offsetWidth?Y.classList.add("mapboxgl-compact"):Y.classList.remove("mapboxgl-compact"))};var Qh=function(){this._queue=[];this._id=0;this._currentlyRunning=this._cleared=!1};Qh.prototype.add=function(Y){var ba=++this._id;return this._queue.push({callback:Y,id:ba,cancelled:!1}),ba};Qh.prototype.remove=function(Y){var ba=this._currentlyRunning,aa=0;for(ba=ba?this._queue.concat(ba):this._queue;aa<ba.length;aa+=1){var ja=ba[aa];if(ja.id===Y)return void(ja.cancelled=!0)}};
Qh.prototype.run=function(Y){void 0===Y&&(Y=0);var ba=this._currentlyRunning=this._queue;this._queue=[];for(var aa=0;aa<ba.length;aa+=1){var ja=ba[aa];if(!ja.cancelled&&(ja.callback(Y),this._cleared))break}this._currentlyRunning=this._cleared=!1};Qh.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0);this._queue=[]};var yh={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available",
"LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},bi=a.window.HTMLImageElement,Gh=a.window.HTMLElement,bh=a.window.ImageBitmap,Nj={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,
boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Xi=function(Y){function ba(ja){var Da=this;if(null!=(ja=a.extend({},
Nj,ja)).minZoom&&null!=ja.maxZoom&&ja.minZoom>ja.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=ja.minPitch&&null!=ja.maxPitch&&ja.minPitch>ja.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=ja.minPitch&&0>ja.minPitch)throw Error("minPitch must be greater than or equal to 0");if(null!=ja.maxPitch&&60<ja.maxPitch)throw Error("maxPitch must be less than or equal to 60");var Sa=new Ye(ja.minZoom,ja.maxZoom,ja.minPitch,ja.maxPitch,
ja.renderWorldCopies);if(Y.call(this,Sa,ja),this._interactive=ja.interactive,this._maxTileCacheSize=ja.maxTileCacheSize,this._failIfMajorPerformanceCaveat=ja.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=ja.preserveDrawingBuffer,this._antialias=ja.antialias,this._trackResize=ja.trackResize,this._bearingSnap=ja.bearingSnap,this._refreshExpiredTiles=ja.refreshExpiredTiles,this._fadeDuration=ja.fadeDuration,this._crossSourceCollisions=ja.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=
ja.collectResourceTiming,this._renderTaskQueue=new Qh,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},yh,ja.locale),this._requestManager=new a.RequestManager(ja.transformRequest,ja.accessToken),"string"==typeof ja.container){if(this._container=a.window.document.getElementById(ja.container),!this._container)throw Error("Container '"+ja.container+"' not found.");}else{if(!(ja.container instanceof Gh))throw Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=
ja.container}if(ja.maxBounds&&this.setMaxBounds(ja.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return Da._update(!1)});this.on("moveend",function(){return Da._update(!1)});this.on("zoom",function(){return Da._update(!0)});void 0!==a.window&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",
this._onWindowResize,!1));this.handlers=new le(this,ja);(this._hash=ja.hash&&(new xh("string"==typeof ja.hash&&ja.hash||void 0)).addTo(this))&&this._hash._onHashChange()||(this.jumpTo({center:ja.center,zoom:ja.zoom,bearing:ja.bearing,pitch:ja.pitch}),ja.bounds&&(this.resize(),this.fitBounds(ja.bounds,a.extend({},ja.fitBoundsOptions,{duration:0}))));this.resize();this._localIdeographFontFamily=ja.localIdeographFontFamily;ja.style&&this.setStyle(ja.style,{localIdeographFontFamily:ja.localIdeographFontFamily});
ja.attributionControl&&this.addControl(new ch({customAttribution:ja.customAttribution}));this.addControl(new cg,ja.logoPosition);this.on("style.load",function(){Da.transform.unmodified&&Da.jumpTo(Da.style.stylesheet)});this.on("data",function(gb){Da._update("style"===gb.dataType);Da.fire(new a.Event(gb.dataType+"data",gb))});this.on("dataloading",function(gb){Da.fire(new a.Event(gb.dataType+"dataloading",gb))})}Y&&(ba.__proto__=Y);(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba;var aa=
{showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return ba.prototype._getMapId=function(){return this._mapId},ba.prototype.addControl=function(ja,Da){if(void 0===Da&&ja.getDefaultPosition&&(Da=ja.getDefaultPosition()),void 0===Da&&(Da="top-right"),!ja||!ja.onAdd)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));
var Sa=ja.onAdd(this);this._controls.push(ja);ja=this._controlPositions[Da];return-1!==Da.indexOf("bottom")?ja.insertBefore(Sa,ja.firstChild):ja.appendChild(Sa),this},ba.prototype.removeControl=function(ja){if(!ja||!ja.onRemove)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Da=this._controls.indexOf(ja);return-1<Da&&this._controls.splice(Da,1),ja.onRemove(this),this},ba.prototype.resize=function(ja){var Da=
this._containerDimensions(),Sa=Da[0];Da=Da[1];this._resizeCanvas(Sa,Da);this.transform.resize(Sa,Da);this.painter.resize(Sa,Da);Sa=!this._moving;return Sa&&(this.stop(),this.fire(new a.Event("movestart",ja)).fire(new a.Event("move",ja))),this.fire(new a.Event("resize",ja)),Sa&&this.fire(new a.Event("moveend",ja)),this},ba.prototype.getBounds=function(){return this.transform.getBounds()},ba.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},ba.prototype.setMaxBounds=function(ja){return this.transform.setMaxBounds(a.LngLatBounds.convert(ja)),
this._update()},ba.prototype.setMinZoom=function(ja){if(-2<=(ja=null==ja?-2:ja)&&ja<=this.transform.maxZoom)return this.transform.minZoom=ja,this._update(),this.getZoom()<ja&&this.setZoom(ja),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive");},ba.prototype.getMinZoom=function(){return this.transform.minZoom},ba.prototype.setMaxZoom=function(ja){if((ja=null==ja?22:ja)>=this.transform.minZoom)return this.transform.maxZoom=ja,this._update(),this.getZoom()>ja&&this.setZoom(ja),
this;throw Error("maxZoom must be greater than the current minZoom");},ba.prototype.getMaxZoom=function(){return this.transform.maxZoom},ba.prototype.setMinPitch=function(ja){if(0>(ja=null==ja?0:ja))throw Error("minPitch must be greater than or equal to 0");if(0<=ja&&ja<=this.transform.maxPitch)return this.transform.minPitch=ja,this._update(),this.getPitch()<ja&&this.setPitch(ja),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive");},ba.prototype.getMinPitch=function(){return this.transform.minPitch},
ba.prototype.setMaxPitch=function(ja){if(60<(ja=null==ja?60:ja))throw Error("maxPitch must be less than or equal to 60");if(ja>=this.transform.minPitch)return this.transform.maxPitch=ja,this._update(),this.getPitch()>ja&&this.setPitch(ja),this;throw Error("maxPitch must be greater than the current minPitch");},ba.prototype.getMaxPitch=function(){return this.transform.maxPitch},ba.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},ba.prototype.setRenderWorldCopies=function(ja){return this.transform.renderWorldCopies=
ja,this._update()},ba.prototype.project=function(ja){return this.transform.locationPoint(a.LngLat.convert(ja))},ba.prototype.unproject=function(ja){return this.transform.pointLocation(a.Point.convert(ja))},ba.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},ba.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},ba.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},ba.prototype._createDelegatedListener=function(ja,
Da,Sa){var gb,sb=this;if("mouseenter"===ja||"mouseover"===ja){var Ob=!1;return{layer:Da,listener:Sa,delegates:{mousemove:function(cc){var Nc=sb.getLayer(Da)?sb.queryRenderedFeatures(cc.point,{layers:[Da]}):[];Nc.length?Ob||(Ob=!0,Sa.call(sb,new Df(ja,sb,cc.originalEvent,{features:Nc}))):Ob=!1},mouseout:function(){Ob=!1}}}}if("mouseleave"===ja||"mouseout"===ja){var Yb=!1;return{layer:Da,listener:Sa,delegates:{mousemove:function(cc){(sb.getLayer(Da)?sb.queryRenderedFeatures(cc.point,{layers:[Da]}):
[]).length?Yb=!0:Yb&&(Yb=!1,Sa.call(sb,new Df(ja,sb,cc.originalEvent)))},mouseout:function(cc){Yb&&(Yb=!1,Sa.call(sb,new Df(ja,sb,cc.originalEvent)))}}}}return{layer:Da,listener:Sa,delegates:(gb={},gb[ja]=function(cc){var Nc=sb.getLayer(Da)?sb.queryRenderedFeatures(cc.point,{layers:[Da]}):[];Nc.length&&(cc.features=Nc,Sa.call(sb,cc),delete cc.features)},gb)}},ba.prototype.on=function(ja,Da,Sa){if(void 0===Sa)return Y.prototype.on.call(this,ja,Da);Da=this._createDelegatedListener(ja,Da,Sa);for(var gb in this._delegatedListeners=
this._delegatedListeners||{},this._delegatedListeners[ja]=this._delegatedListeners[ja]||[],this._delegatedListeners[ja].push(Da),Da.delegates)this.on(gb,Da.delegates[gb]);return this},ba.prototype.once=function(ja,Da,Sa){if(void 0===Sa)return Y.prototype.once.call(this,ja,Da);ja=this._createDelegatedListener(ja,Da,Sa);for(var gb in ja.delegates)this.once(gb,ja.delegates[gb]);return this},ba.prototype.off=function(ja,Da,Sa){if(void 0===Sa)Da=Y.prototype.off.call(this,ja,Da);else{if(this._delegatedListeners&&
this._delegatedListeners[ja])a:{ja=this._delegatedListeners[ja];for(var gb=0;gb<ja.length;gb++){var sb=ja[gb];if(sb.layer===Da&&sb.listener===Sa){for(var Ob in sb.delegates)this.off(Ob,sb.delegates[Ob]);ja.splice(gb,1);break a}}}Da=this}return Da},ba.prototype.queryRenderedFeatures=function(ja,Da){if(!this.style)return[];if(void 0!==Da||void 0===ja||ja instanceof a.Point||Array.isArray(ja)||(Da=ja,ja=void 0),Da=Da||{},(ja=ja||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||
"number"==typeof ja[0])var Sa=[a.Point.convert(ja)];else Sa=a.Point.convert(ja[0]),ja=a.Point.convert(ja[1]),Sa=[Sa,new a.Point(ja.x,Sa.y),ja,new a.Point(Sa.x,ja.y),Sa];return this.style.queryRenderedFeatures(Sa,Da,this.transform)},ba.prototype.querySourceFeatures=function(ja,Da){return this.style.querySourceFeatures(ja,Da)},ba.prototype.setStyle=function(ja,Da){return!1!==(Da=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Da)).diff&&Da.localIdeographFontFamily===this._localIdeographFontFamily&&
this.style&&ja?(this._diffStyle(ja,Da),this):(this._localIdeographFontFamily=Da.localIdeographFontFamily,this._updateStyle(ja,Da))},ba.prototype._getUIString=function(ja){var Da=this._locale[ja];if(null==Da)throw Error("Missing UI string '"+ja+"'");return Da},ba.prototype._updateStyle=function(ja,Da){return this.style&&(this.style.setEventedParent(null),this.style._remove()),ja?(this.style=new Dd(this,Da||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof ja?this.style.loadURL(ja):
this.style.loadJSON(ja),this):(delete this.style,this)},ba.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Dd(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},ba.prototype._diffStyle=function(ja,Da){var Sa=this;"string"==typeof ja?(ja=this._requestManager.normalizeStyleURL(ja),ja=this._requestManager.transformRequest(ja,a.ResourceType.Style),a.getJSON(ja,function(gb,sb){gb?Sa.fire(new a.ErrorEvent(gb)):sb&&Sa._updateDiff(sb,Da)})):"object"==
typeof ja&&this._updateDiff(ja,Da)},ba.prototype._updateDiff=function(ja,Da){try{this.style.setState(ja)&&this._update(!0)}catch(Sa){a.warnOnce("Unable to perform style diff: "+(Sa.message||Sa.error||Sa)+".  Rebuilding the style from scratch."),this._updateStyle(ja,Da)}},ba.prototype.getStyle=function(){if(this.style)return this.style.serialize()},ba.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},ba.prototype.addSource=function(ja,
Da){return this._lazyInitEmptyStyle(),this.style.addSource(ja,Da),this._update(!0)},ba.prototype.isSourceLoaded=function(ja){var Da=this.style&&this.style.sourceCaches[ja];if(void 0!==Da)return Da.loaded();this.fire(new a.ErrorEvent(Error("There is no source with ID '"+ja+"'")))},ba.prototype.areTilesLoaded=function(){var ja=this.style&&this.style.sourceCaches,Da;for(Da in ja){var Sa=ja[Da]._tiles,gb;for(gb in Sa){var sb=Sa[gb];if("loaded"!==sb.state&&"errored"!==sb.state)return!1}}return!0},ba.prototype.addSourceType=
function(ja,Da,Sa){return this._lazyInitEmptyStyle(),this.style.addSourceType(ja,Da,Sa)},ba.prototype.removeSource=function(ja){return this.style.removeSource(ja),this._update(!0)},ba.prototype.getSource=function(ja){return this.style.getSource(ja)},ba.prototype.addImage=function(ja,Da,Sa){void 0===Sa&&(Sa={});var gb=Sa.pixelRatio;void 0===gb&&(gb=1);var sb=Sa.sdf;void 0===sb&&(sb=!1);var Ob=Sa.stretchX,Yb=Sa.stretchY;Sa=Sa.content;if(this._lazyInitEmptyStyle(),Da instanceof bi||bh&&Da instanceof
bh)Da=a.browser.getImageData(Da),this.style.addImage(ja,{data:new a.RGBAImage({width:Da.width,height:Da.height},Da.data),pixelRatio:gb,stretchX:Ob,stretchY:Yb,content:Sa,sdf:sb,version:0});else{if(void 0===Da.width||void 0===Da.height)return this.fire(new a.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));this.style.addImage(ja,
{data:new a.RGBAImage({width:Da.width,height:Da.height},new Uint8Array(Da.data)),pixelRatio:gb,stretchX:Ob,stretchY:Yb,content:Sa,sdf:sb,version:0,userImage:Da});Da.onAdd&&Da.onAdd(this,ja)}},ba.prototype.updateImage=function(ja,Da){var Sa=this.style.getImage(ja);if(!Sa)return this.fire(new a.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var gb=Da instanceof bi||bh&&Da instanceof bh?a.browser.getImageData(Da):Da,sb=gb.width,
Ob=gb.height;gb=gb.data;return void 0===sb||void 0===Ob?this.fire(new a.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):sb!==Sa.data.width||Ob!==Sa.data.height?this.fire(new a.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image"))):(Sa.data.replace(gb,!(Da instanceof
bi||bh&&Da instanceof bh)),void this.style.updateImage(ja,Sa))},ba.prototype.hasImage=function(ja){return ja?!!this.style.getImage(ja):(this.fire(new a.ErrorEvent(Error("Missing required image id"))),!1)},ba.prototype.removeImage=function(ja){this.style.removeImage(ja)},ba.prototype.loadImage=function(ja,Da){a.getImage(this._requestManager.transformRequest(ja,a.ResourceType.Image),Da)},ba.prototype.listImages=function(){return this.style.listImages()},ba.prototype.addLayer=function(ja,Da){return this._lazyInitEmptyStyle(),
this.style.addLayer(ja,Da),this._update(!0)},ba.prototype.moveLayer=function(ja,Da){return this.style.moveLayer(ja,Da),this._update(!0)},ba.prototype.removeLayer=function(ja){return this.style.removeLayer(ja),this._update(!0)},ba.prototype.getLayer=function(ja){return this.style.getLayer(ja)},ba.prototype.setLayerZoomRange=function(ja,Da,Sa){return this.style.setLayerZoomRange(ja,Da,Sa),this._update(!0)},ba.prototype.setFilter=function(ja,Da,Sa){return void 0===Sa&&(Sa={}),this.style.setFilter(ja,
Da,Sa),this._update(!0)},ba.prototype.getFilter=function(ja){return this.style.getFilter(ja)},ba.prototype.setPaintProperty=function(ja,Da,Sa,gb){return void 0===gb&&(gb={}),this.style.setPaintProperty(ja,Da,Sa,gb),this._update(!0)},ba.prototype.getPaintProperty=function(ja,Da){return this.style.getPaintProperty(ja,Da)},ba.prototype.setLayoutProperty=function(ja,Da,Sa,gb){return void 0===gb&&(gb={}),this.style.setLayoutProperty(ja,Da,Sa,gb),this._update(!0)},ba.prototype.getLayoutProperty=function(ja,
Da){return this.style.getLayoutProperty(ja,Da)},ba.prototype.setLight=function(ja,Da){return void 0===Da&&(Da={}),this._lazyInitEmptyStyle(),this.style.setLight(ja,Da),this._update(!0)},ba.prototype.getLight=function(){return this.style.getLight()},ba.prototype.setFeatureState=function(ja,Da){return this.style.setFeatureState(ja,Da),this._update()},ba.prototype.removeFeatureState=function(ja,Da){return this.style.removeFeatureState(ja,Da),this._update()},ba.prototype.getFeatureState=function(ja){return this.style.getFeatureState(ja)},
ba.prototype.getContainer=function(){return this._container},ba.prototype.getCanvasContainer=function(){return this._canvasContainer},ba.prototype.getCanvas=function(){return this._canvas},ba.prototype._containerDimensions=function(){var ja=0,Da=0;return this._container&&(ja=this._container.clientWidth||400,Da=this._container.clientHeight||300),[ja,Da]},ba.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&
a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},ba.prototype._setupContainer=function(){var ja=this._container;ja.classList.add("mapboxgl-map");(this._missingCSSCanary=Ta.create("div","mapboxgl-canary",ja)).style.visibility="hidden";this._detectMissingCSS();var Da=this._canvasContainer=Ta.create("div","mapboxgl-canvas-container",
ja);this._interactive&&Da.classList.add("mapboxgl-interactive");this._canvas=Ta.create("canvas","mapboxgl-canvas",Da);this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");Da=this._containerDimensions();this._resizeCanvas(Da[0],Da[1]);var Sa=this._controlContainer=Ta.create("div","mapboxgl-control-container",ja),gb=
this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(sb){gb[sb]=Ta.create("div","mapboxgl-ctrl-"+sb,Sa)})},ba.prototype._resizeCanvas=function(ja,Da){var Sa=a.browser.devicePixelRatio||1;this._canvas.width=Sa*ja;this._canvas.height=Sa*Da;this._canvas.style.width=ja+"px";this._canvas.style.height=Da+"px"},ba.prototype._setupPainter=function(){var ja=a.extend({},nb.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,
antialias:this._antialias||!1});(ja=this._canvas.getContext("webgl",ja)||this._canvas.getContext("experimental-webgl",ja))?(this.painter=new jf(ja,this.transform),a.webpSupported.testSupport(ja)):this.fire(new a.ErrorEvent(Error("Failed to initialize WebGL")))},ba.prototype._contextLost=function(ja){ja.preventDefault();this._frame&&(this._frame.cancel(),this._frame=null);this.fire(new a.Event("webglcontextlost",{originalEvent:ja}))},ba.prototype._contextRestored=function(ja){this._setupPainter();
this.resize();this._update();this.fire(new a.Event("webglcontextrestored",{originalEvent:ja}))},ba.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},ba.prototype._update=function(ja){return this.style?(this._styleDirty=this._styleDirty||ja,this._sourcesDirty=!0,this.triggerRepaint(),this):this},ba.prototype._requestRenderFrame=function(ja){return this._update(),this._renderTaskQueue.add(ja)},ba.prototype._cancelRenderFrame=function(ja){this._renderTaskQueue.remove(ja)},
ba.prototype._render=function(ja){var Da,Sa=this,gb=0,sb=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Da=sb.createQueryEXT(),sb.beginQueryEXT(sb.TIME_ELAPSED_EXT,Da),gb=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ja),!this._removed){ja=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ob=this.transform.zoom,Yb=a.browser.now();this.style.zoomHistory.update(Ob,Yb);Ob=new a.EvaluationParameters(Ob,{now:Yb,
fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()});Yb=Ob.crossFadingFactor();1===Yb&&Yb===this._crossFadingFactor||(ja=!0,this._crossFadingFactor=Yb);this.style.update(Ob)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,
{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||ja)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),
this.listens("gpu-timing-frame")){var cc=a.browser.now()-gb;sb.endQueryEXT(sb.TIME_ELAPSED_EXT,Da);setTimeout(function(){var Lc=sb.getQueryObjectEXT(Da,sb.QUERY_RESULT_EXT)/1E6;sb.deleteQueryEXT(Da);Sa.fire(new a.Event("gpu-timing-frame",{cpuTime:cc,gpuTime:Lc}))},50)}if(this.listens("gpu-timing-layer")){var Nc=this.painter.collectGpuTimers();setTimeout(function(){var Lc=Sa.painter.queryGpuTimers(Nc);Sa.fire(new a.Event("gpu-timing-layer",{layerTimes:Lc}))},50)}return this._sourcesDirty||this._styleDirty||
this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new a.Event("idle"))),this}},ba.prototype.remove=function(){this._hash&&this._hash.remove();for(var ja=0,Da=this._controls;ja<Da.length;ja+=1)Da[ja].onRemove(this);this._controls=[];this._frame&&(this._frame.cancel(),this._frame=null);this._renderTaskQueue.clear();this.painter.destroy();this.handlers.destroy();delete this.handlers;this.setStyle(null);void 0!==
a.window&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));(ja=this.painter.context.gl.getExtension("WEBGL_lose_context"))&&ja.loseContext();Ka(this._canvasContainer);Ka(this._controlContainer);Ka(this._missingCSSCanary);this._container.classList.remove("mapboxgl-map");this._removed=!0;this.fire(new a.Event("remove"))},ba.prototype.triggerRepaint=function(){var ja=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(Da){ja._frame=
null;ja._render(Da)}))},ba.prototype._onWindowOnline=function(){this._update()},ba.prototype._onWindowResize=function(ja){this._trackResize&&this.resize({originalEvent:ja})._update()},aa.showTileBoundaries.get=function(){return!!this._showTileBoundaries},aa.showTileBoundaries.set=function(ja){this._showTileBoundaries!==ja&&(this._showTileBoundaries=ja,this._update())},aa.showPadding.get=function(){return!!this._showPadding},aa.showPadding.set=function(ja){this._showPadding!==ja&&(this._showPadding=
ja,this._update())},aa.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},aa.showCollisionBoxes.set=function(ja){this._showCollisionBoxes!==ja&&(this._showCollisionBoxes=ja,ja?this.style._generateCollisionBoxes():this._update())},aa.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},aa.showOverdrawInspector.set=function(ja){this._showOverdrawInspector!==ja&&(this._showOverdrawInspector=ja,this._update())},aa.repaint.get=function(){return!!this._repaint},aa.repaint.set=
function(ja){this._repaint!==ja&&(this._repaint=ja,this.triggerRepaint())},aa.vertices.get=function(){return!!this._vertices},aa.vertices.set=function(ja){this._vertices=ja;this._update()},ba.prototype._setCacheLimits=function(ja,Da){a.setCacheLimits(ja,Da)},aa.version.get=function(){return a.version},Object.defineProperties(ba.prototype,aa),ba}(Mj),Rh={showCompass:!0,showZoom:!0,visualizePitch:!1},Ig=function(Y){var ba=this;this.options=a.extend({},Rh,Y);this._container=Ta.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");
this._container.addEventListener("contextmenu",function(aa){return aa.preventDefault()});this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(aa){return ba._map.zoomIn({},{originalEvent:aa})}),Ta.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(aa){return ba._map.zoomOut({},{originalEvent:aa})}),
Ta.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0));this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(aa){ba.options.visualizePitch?ba._map.resetNorthPitch({},{originalEvent:aa}):ba._map.resetNorth({},{originalEvent:aa})}),this._compassIcon=Ta.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ig.prototype._updateZoomButtons=function(){var Y=
this._map.getZoom();this._zoomInButton.disabled=Y===this._map.getMaxZoom();this._zoomOutButton.disabled=Y===this._map.getMinZoom()};Ig.prototype._rotateCompassArrow=function(){this._compassIcon.style.transform=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(Math.PI/180*this._map.transform.pitch),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+180/Math.PI*this._map.transform.angle+"deg)":"rotate("+180/Math.PI*this._map.transform.angle+"deg)"};Ig.prototype.onAdd=function(Y){return this._map=
Y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ef(this._map,this._compass,this.options.visualizePitch)),
this._container};Ig.prototype.onRemove=function(){Ta.remove(this._container);this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons);this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler);delete this._map};Ig.prototype._createButton=function(Y,ba){Y=Ta.create("button",Y,this._container);return Y.type="button",Y.addEventListener("click",ba),Y};Ig.prototype._setButtonTitle=
function(Y,ba){ba=this._map._getUIString("NavigationControl."+ba);Y.title=ba;Y.setAttribute("aria-label",ba)};var ef=function(Y,ba,aa){void 0===aa&&(aa=!1);this._clickTolerance=10;this.element=ba;this.mouseRotate=new qi({clickTolerance:Y.dragRotate._mouseRotate._clickTolerance});this.map=Y;aa&&(this.mousePitch=new Ti({clickTolerance:Y.dragRotate._mousePitch._clickTolerance}));a.bindAll("mousedown mousemove mouseup touchstart touchmove touchend reset".split(" "),this);Ta.addEventListener(ba,"mousedown",
this.mousedown);Ta.addEventListener(ba,"touchstart",this.touchstart,{passive:!1});Ta.addEventListener(ba,"touchmove",this.touchmove);Ta.addEventListener(ba,"touchend",this.touchend);Ta.addEventListener(ba,"touchcancel",this.reset)};ef.prototype.down=function(Y,ba){this.mouseRotate.mousedown(Y,ba);this.mousePitch&&this.mousePitch.mousedown(Y,ba);Ta.disableDrag()};ef.prototype.move=function(Y,ba){var aa=this.map,ja=this.mouseRotate.mousemoveWindow(Y,ba);(ja&&ja.bearingDelta&&aa.setBearing(aa.getBearing()+
ja.bearingDelta),this.mousePitch)&&(Y=this.mousePitch.mousemoveWindow(Y,ba))&&Y.pitchDelta&&aa.setPitch(aa.getPitch()+Y.pitchDelta)};ef.prototype.off=function(){var Y=this.element;Ta.removeEventListener(Y,"mousedown",this.mousedown);Ta.removeEventListener(Y,"touchstart",this.touchstart,{passive:!1});Ta.removeEventListener(Y,"touchmove",this.touchmove);Ta.removeEventListener(Y,"touchend",this.touchend);Ta.removeEventListener(Y,"touchcancel",this.reset);this.offTemp()};ef.prototype.offTemp=function(){Ta.enableDrag();
Ta.removeEventListener(a.window,"mousemove",this.mousemove);Ta.removeEventListener(a.window,"mouseup",this.mouseup)};ef.prototype.mousedown=function(Y){this.down(a.extend({},Y,{ctrlKey:!0,preventDefault:function(){return Y.preventDefault()}}),Ta.mousePos(this.element,Y));Ta.addEventListener(a.window,"mousemove",this.mousemove);Ta.addEventListener(a.window,"mouseup",this.mouseup)};ef.prototype.mousemove=function(Y){this.move(Y,Ta.mousePos(this.element,Y))};ef.prototype.mouseup=function(Y){this.mouseRotate.mouseupWindow(Y);
this.mousePitch&&this.mousePitch.mouseupWindow(Y);this.offTemp()};ef.prototype.touchstart=function(Y){1!==Y.targetTouches.length?this.reset():(this._startPos=this._lastPos=Ta.touchPos(this.element,Y.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return Y.preventDefault()}},this._startPos))};ef.prototype.touchmove=function(Y){1!==Y.targetTouches.length?this.reset():(this._lastPos=Ta.touchPos(this.element,Y.targetTouches)[0],this.move({preventDefault:function(){return Y.preventDefault()}},
this._lastPos))};ef.prototype.touchend=function(Y){0===Y.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click();this.reset()};ef.prototype.reset=function(){this.mouseRotate.reset();this.mousePitch&&this.mousePitch.reset();delete this._startPos;delete this._lastPos;this.offTemp()};var Qg={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)",
"bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},Th,lj=function(Y){function ba(aa,ja){var Da=this;if(Y.call(this),(aa instanceof a.window.HTMLElement||ja)&&(aa=a.extend({element:aa},ja)),a.bindAll("_update _onMove _onUp _addDragHandler _onMapClick _onKeyPress".split(" "),this),this._anchor=aa&&aa.anchor||"center",this._color=aa&&aa.color||"#3FB1CE",this._draggable=aa&&aa.draggable||!1,this._state="inactive",this._rotation=
aa&&aa.rotation||0,this._rotationAlignment=aa&&aa.rotationAlignment||"auto",this._pitchAlignment=aa&&aa.pitchAlignment&&"auto"!==aa.pitchAlignment?aa.pitchAlignment:this._rotationAlignment,aa&&aa.element)this._element=aa.element,this._offset=a.Point.convert(aa&&aa.offset||[0,0]);else{this._defaultMarker=!0;this._element=Ta.create("div");this._element.setAttribute("aria-label","Map marker");ja=Ta.createNS("http://www.w3.org/2000/svg","svg");ja.setAttributeNS(null,"display","block");ja.setAttributeNS(null,
"height","41px");ja.setAttributeNS(null,"width","27px");ja.setAttributeNS(null,"viewBox","0 0 27 41");var Sa=Ta.createNS("http://www.w3.org/2000/svg","g");Sa.setAttributeNS(null,"stroke","none");Sa.setAttributeNS(null,"stroke-width","1");Sa.setAttributeNS(null,"fill","none");Sa.setAttributeNS(null,"fill-rule","evenodd");Sa=Ta.createNS("http://www.w3.org/2000/svg","g");Sa.setAttributeNS(null,"fill-rule","nonzero");var gb=Ta.createNS("http://www.w3.org/2000/svg","g");gb.setAttributeNS(null,"transform",
"translate(3.0, 29.0)");gb.setAttributeNS(null,"fill","#000000");for(var sb=0,Ob=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];sb<Ob.length;sb+=1){var Yb=Ob[sb],cc=Ta.createNS("http://www.w3.org/2000/svg","ellipse");cc.setAttributeNS(null,"opacity","0.04");cc.setAttributeNS(null,"cx","10.5");cc.setAttributeNS(null,"cy","5.80029008");
cc.setAttributeNS(null,"rx",Yb.rx);cc.setAttributeNS(null,"ry",Yb.ry);gb.appendChild(cc)}sb=Ta.createNS("http://www.w3.org/2000/svg","g");sb.setAttributeNS(null,"fill",this._color);Ob=Ta.createNS("http://www.w3.org/2000/svg","path");Ob.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");sb.appendChild(Ob);
Ob=Ta.createNS("http://www.w3.org/2000/svg","g");Ob.setAttributeNS(null,"opacity","0.25");Ob.setAttributeNS(null,"fill","#000000");Yb=Ta.createNS("http://www.w3.org/2000/svg","path");Yb.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");
Ob.appendChild(Yb);Yb=Ta.createNS("http://www.w3.org/2000/svg","g");Yb.setAttributeNS(null,"transform","translate(6.0, 7.0)");Yb.setAttributeNS(null,"fill","#FFFFFF");cc=Ta.createNS("http://www.w3.org/2000/svg","g");cc.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Nc=Ta.createNS("http://www.w3.org/2000/svg","circle");Nc.setAttributeNS(null,"fill","#000000");Nc.setAttributeNS(null,"opacity","0.25");Nc.setAttributeNS(null,"cx","5.5");Nc.setAttributeNS(null,"cy","5.5");Nc.setAttributeNS(null,
"r","5.4999962");var Lc=Ta.createNS("http://www.w3.org/2000/svg","circle");Lc.setAttributeNS(null,"fill","#FFFFFF");Lc.setAttributeNS(null,"cx","5.5");Lc.setAttributeNS(null,"cy","5.5");Lc.setAttributeNS(null,"r","5.4999962");cc.appendChild(Nc);cc.appendChild(Lc);Sa.appendChild(gb);Sa.appendChild(sb);Sa.appendChild(Ob);Sa.appendChild(Yb);Sa.appendChild(cc);ja.appendChild(Sa);this._element.appendChild(ja);this._offset=a.Point.convert(aa&&aa.offset||[0,-14])}this._element.classList.add("mapboxgl-marker");
this._element.addEventListener("dragstart",function(Cc){Cc.preventDefault()});this._element.addEventListener("mousedown",function(Cc){Cc.preventDefault()});this._element.addEventListener("focus",function(){var Cc=Da._map.getContainer();Cc.scrollTop=0;Cc.scrollLeft=0});kb(this._element,this._anchor,"marker");this._popup=null}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.addTo=function(aa){return this.remove(),this._map=aa,aa.getCanvasContainer().appendChild(this._element),
aa.on("move",this._update),aa.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},ba.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",
this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Ta.remove(this._element),this._popup&&this._popup.remove(),this},ba.prototype.getLngLat=function(){return this._lngLat},ba.prototype.setLngLat=function(aa){return this._lngLat=a.LngLat.convert(aa),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},ba.prototype.getElement=function(){return this._element},ba.prototype.setPopup=function(aa){if(this._popup&&(this._popup.remove(),this._popup=null,
this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),aa){if(!("offset"in aa.options)){var ja=Math.sqrt(Math.pow(13.5,2)/2);aa.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[ja,-1*(24.6+ja)],"bottom-right":[-ja,-1*(24.6+ja)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=aa;this._lngLat&&this._popup.setLngLat(this._lngLat);(this._originalTabIndex=
this._element.getAttribute("tabindex"))||this._element.setAttribute("tabindex","0");this._element.addEventListener("keypress",this._onKeyPress)}return this},ba.prototype._onKeyPress=function(aa){var ja=aa.code;aa=aa.charCode||aa.keyCode;"Space"!==ja&&"Enter"!==ja&&32!==aa&&13!==aa||this.togglePopup()},ba.prototype._onMapClick=function(aa){aa=aa.originalEvent.target;var ja=this._element;this._popup&&(aa===ja||ja.contains(aa))&&this.togglePopup()},ba.prototype.getPopup=function(){return this._popup},
ba.prototype.togglePopup=function(){var aa=this._popup;return aa?(aa.isOpen()?aa.remove():aa.addTo(this._map),this):this},ba.prototype._update=function(aa){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Oa(this._lngLat,this._pos,this._map.transform));this._pos=this._map.project(this._lngLat)._add(this._offset);var ja="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?ja="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(ja="rotateZ("+(this._rotation-
this._map.getBearing())+"deg)");var Da="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?Da="rotateX(0deg)":"map"===this._pitchAlignment&&(Da="rotateX("+this._map.getPitch()+"deg)");aa&&"moveend"!==aa.type||(this._pos=this._pos.round());Ta.setTransform(this._element,Qg[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Da+" "+ja)}},ba.prototype.getOffset=function(){return this._offset},ba.prototype.setOffset=function(aa){return this._offset=a.Point.convert(aa),this._update(),
this},ba.prototype._onMove=function(aa){this._pos=aa.point.sub(this._positionDelta);this._lngLat=this._map.unproject(this._pos);this.setLngLat(this._lngLat);this._element.style.pointerEvents="none";"pending"===this._state&&(this._state="active",this.fire(new a.Event("dragstart")));this.fire(new a.Event("drag"))},ba.prototype._onUp=function(){this._element.style.pointerEvents="auto";this._positionDelta=null;this._map.off("mousemove",this._onMove);this._map.off("touchmove",this._onMove);"active"===
this._state&&this.fire(new a.Event("dragend"));this._state="inactive"},ba.prototype._addDragHandler=function(aa){this._element.contains(aa.originalEvent.target)&&(aa.preventDefault(),this._positionDelta=aa.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},ba.prototype.setDraggable=function(aa){return this._draggable=!!aa,this._map&&(aa?
(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},ba.prototype.isDraggable=function(){return this._draggable},ba.prototype.setRotation=function(aa){return this._rotation=aa||0,this._update(),this},ba.prototype.getRotation=function(){return this._rotation},ba.prototype.setRotationAlignment=function(aa){return this._rotationAlignment=aa||"auto",this._update(),
this},ba.prototype.getRotationAlignment=function(){return this._rotationAlignment},ba.prototype.setPitchAlignment=function(aa){return this._pitchAlignment=aa&&"auto"!==aa?aa:this._rotationAlignment,this._update(),this},ba.prototype.getPitchAlignment=function(){return this._pitchAlignment},ba}(a.Evented),Zf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6E3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Sh=0,Ui=!1,zh=function(Y){function ba(aa){Y.call(this);
this.options=a.extend({},Zf,aa);a.bindAll("_onSuccess _onError _onZoom _finish _setupUI _updateCamera _updateMarker".split(" "),this)}return Y&&(ba.__proto__=Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.onAdd=function(aa){var ja;return this._map=aa,this._container=Ta.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),ja=this._setupUI,void 0!==Th?ja(Th):void 0!==a.window.navigator.permissions?a.window.navigator.permissions.query({name:"geolocation"}).then(function(Da){ja(Th=
"denied"!==Da.state)}):ja(Th=!!a.window.navigator.geolocation),this._container},ba.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0);this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove();this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove();Ta.remove(this._container);this._map.off("zoom",this._onZoom);
this._map=void 0;Sh=0;Ui=!1},ba.prototype._isOutOfMapMaxBounds=function(aa){var ja=this._map.getMaxBounds();aa=aa.coords;return ja&&(aa.longitude<ja.getWest()||aa.longitude>ja.getEast()||aa.latitude<ja.getSouth()||aa.latitude>ja.getNorth())},ba.prototype._setErrorState=function(){switch(this._watchState){case "WAITING_ACTIVE":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");
break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},
ba.prototype._onSuccess=function(aa){if(this._map){if(this._isOutOfMapMaxBounds(aa))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",aa)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=aa,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(aa);this.options.trackUserLocation&&"ACTIVE_LOCK"!==
this._watchState||this._updateCamera(aa);this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale");this.fire(new a.Event("geolocate",aa));this._finish()}},ba.prototype._updateCamera=function(aa){var ja=new a.LngLat(aa.coords.longitude,aa.coords.latitude);aa=aa.coords.accuracy;var Da=this._map.getBearing();Da=a.extend({bearing:Da},this.options.fitBoundsOptions);this._map.fitBounds(ja.toBounds(aa),Da,{geolocateSource:!0})},ba.prototype._updateMarker=function(aa){if(aa){var ja=
new a.LngLat(aa.coords.longitude,aa.coords.latitude);this._accuracyCircleMarker.setLngLat(ja).addTo(this._map);this._userLocationDotMarker.setLngLat(ja).addTo(this._map);this._accuracy=aa.coords.accuracy;this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},ba.prototype._updateCircleRadius=function(){var aa=this._map._container.clientHeight/2,ja=this._map.unproject([0,aa]);aa=this._map.unproject([1,
aa]);ja=ja.distanceTo(aa);ja=Math.ceil(2*this._accuracy/ja);this._circleElement.style.width=ja+"px";this._circleElement.style.height=ja+"px"},ba.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},ba.prototype._onError=function(aa){if(this._map){if(this.options.trackUserLocation)if(1===aa.code){this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this._geolocateButton.disabled=!0;var ja=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ja;this._geolocateButton.setAttribute("aria-label",ja);void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===aa.code&&
Ui)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale");this.fire(new a.Event("error",aa));this._finish()}},ba.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0},ba.prototype._setupUI=function(aa){var ja=this;(this._container.addEventListener("contextmenu",function(Da){return Da.preventDefault()}),this._geolocateButton=Ta.create("button","mapboxgl-ctrl-geolocate",
this._container),Ta.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===aa)?(a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),aa=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=!0,this._geolocateButton.title=aa,this._geolocateButton.setAttribute("aria-label",aa)):(aa=this._map._getUIString("GeolocateControl.FindMyLocation"),this._geolocateButton.title=
aa,this._geolocateButton.setAttribute("aria-label",aa));this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF");this.options.showUserLocation&&(this._dotElement=Ta.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new lj(this._dotElement),this._circleElement=Ta.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new lj({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&
(this._watchState="OFF"),this._map.on("zoom",this._onZoom));this._geolocateButton.addEventListener("click",this.trigger.bind(this));this._setup=!0;this.options.trackUserLocation&&this._map.on("movestart",function(Da){Da.geolocateSource||"ACTIVE_LOCK"!==ja._watchState||Da.originalEvent&&"resize"===Da.originalEvent.type||(ja._watchState="BACKGROUND",ja._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ja._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ja.fire(new a.Event("trackuserlocationend")))})},
ba.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState="WAITING_ACTIVE";this.fire(new a.Event("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":Sh--;Ui=!1;this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");
this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this.fire(new a.Event("trackuserlocationend"));break;case "BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case "BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var aa;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","true");1<++Sh?(aa={maximumAge:6E5,timeout:0},Ui=!0):(aa=this.options.positionOptions,Ui=!1);this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,
this._onError,aa)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1E4);return!0},ba.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID);this._geolocationWatchID=void 0;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","false");this.options.showUserLocation&&this._updateMarker(null)},
ba}(a.Evented),dh={maxWidth:100,unit:"metric"},zf=function(Y){this.options=a.extend({},dh,Y);a.bindAll(["_onMove","setUnit"],this)};zf.prototype.getDefaultPosition=function(){return"bottom-left"};zf.prototype._onMove=function(){mb(this._map,this._container,this.options)};zf.prototype.onAdd=function(Y){return this._map=Y,this._container=Ta.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",Y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container};zf.prototype.onRemove=function(){Ta.remove(this._container);
this._map.off("move",this._onMove);this._map=void 0};zf.prototype.setUnit=function(Y){this.options.unit=Y;mb(this._map,this._container,this.options)};var ug=function(Y){this._fullscreen=!1;Y&&Y.container&&(Y.container instanceof a.window.HTMLElement?this._container=Y.container:a.warnOnce("Full screen control 'container' must be a DOM element."));a.bindAll(["_onClickFullscreen","_changeIcon"],this);"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in
a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};ug.prototype.onAdd=function(Y){return this._map=Y,this._container||(this._container=this._map.getContainer()),this._controlContainer=Ta.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display=
"none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer};ug.prototype.onRemove=function(){Ta.remove(this._controlContainer);this._map=null;a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)};ug.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)};ug.prototype._setupUI=function(){var Y=
this._fullscreenButton=Ta.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);Ta.create("span","mapboxgl-ctrl-icon",Y).setAttribute("aria-hidden",!0);Y.type="button";this._updateTitle();this._fullscreenButton.addEventListener("click",this._onClickFullscreen);a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)};ug.prototype._updateTitle=function(){var Y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",Y);this._fullscreenButton.title=Y};ug.prototype._getTitle=
function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")};ug.prototype._isFullscreen=function(){return this._fullscreen};ug.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),
this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())};ug.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():
this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var ek={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},hh=function(Y){function ba(aa){Y.call(this);this.options=a.extend(Object.create(ek),aa);a.bindAll("_update _onClose remove _onMouseMove _onMouseUp _onDrag".split(" "),this)}return Y&&(ba.__proto__=
Y),(ba.prototype=Object.create(Y&&Y.prototype)).constructor=ba,ba.prototype.addTo=function(aa){return this._map&&this.remove(),this._map=aa,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):
this._map.on("move",this._update),this.fire(new a.Event("open")),this},ba.prototype.isOpen=function(){return!!this._map},ba.prototype.remove=function(){return this._content&&Ta.remove(this._content),this._container&&(Ta.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),
this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},ba.prototype.getLngLat=function(){return this._lngLat},ba.prototype.setLngLat=function(aa){return this._lngLat=a.LngLat.convert(aa),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),
this},ba.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},ba.prototype.getElement=function(){return this._container},ba.prototype.setText=function(aa){return this.setDOMContent(a.window.document.createTextNode(aa))},
ba.prototype.setHTML=function(aa){var ja=a.window.document.createDocumentFragment(),Da=a.window.document.createElement("body");for(Da.innerHTML=aa;aa=Da.firstChild;)ja.appendChild(aa);return this.setDOMContent(ja)},ba.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},ba.prototype.setMaxWidth=function(aa){return this.options.maxWidth=aa,this._update(),this},ba.prototype.setDOMContent=function(aa){return this._createContent(),this._content.appendChild(aa),this._update(),
this},ba.prototype.addClassName=function(aa){this._container&&this._container.classList.add(aa)},ba.prototype.removeClassName=function(aa){this._container&&this._container.classList.remove(aa)},ba.prototype.toggleClassName=function(aa){if(this._container)return this._container.classList.toggle(aa)},ba.prototype._createContent=function(){this._content&&Ta.remove(this._content);this._content=Ta.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&(this._closeButton=Ta.create("button",
"mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="\x26#215;",this._closeButton.addEventListener("click",this._onClose))},ba.prototype._onMouseUp=function(aa){this._update(aa.point)},ba.prototype._onMouseMove=function(aa){this._update(aa.point)},ba.prototype._onDrag=function(aa){this._update(aa.point)},ba.prototype._update=function(aa){var ja=this;if(this._map&&(this._lngLat||this._trackPointer)&&
this._content&&(this._container||(this._container=Ta.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=Ta.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(sb){return ja._container.classList.add(sb)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=
this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Oa(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||aa)){aa=this._pos=this._trackPointer&&aa?aa:this._map.project(this._lngLat);var Da=this.options.anchor,Sa=function Yb(Ob){if(Ob){if("number"==typeof Ob){var cc=Math.round(Math.sqrt(.5*Math.pow(Ob,2)));return{center:new a.Point(0,0),top:new a.Point(0,Ob),"top-left":new a.Point(cc,cc),"top-right":new a.Point(-cc,cc),bottom:new a.Point(0,
-Ob),"bottom-left":new a.Point(cc,-cc),"bottom-right":new a.Point(-cc,-cc),left:new a.Point(Ob,0),right:new a.Point(-Ob,0)}}return Ob instanceof a.Point||Array.isArray(Ob)?(Ob=a.Point.convert(Ob),{center:Ob,top:Ob,"top-left":Ob,"top-right":Ob,bottom:Ob,"bottom-left":Ob,"bottom-right":Ob,left:Ob,right:Ob}):{center:a.Point.convert(Ob.center||[0,0]),top:a.Point.convert(Ob.top||[0,0]),"top-left":a.Point.convert(Ob["top-left"]||[0,0]),"top-right":a.Point.convert(Ob["top-right"]||[0,0]),bottom:a.Point.convert(Ob.bottom||
[0,0]),"bottom-left":a.Point.convert(Ob["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(Ob["bottom-right"]||[0,0]),left:a.Point.convert(Ob.left||[0,0]),right:a.Point.convert(Ob.right||[0,0])}}return Yb(new a.Point(0,0))}(this.options.offset);if(!Da){Da=this._container.offsetWidth;var gb=this._container.offsetHeight;gb=aa.y+Sa.bottom.y<gb?["top"]:aa.y>this._map.transform.height-gb?["bottom"]:[];aa.x<Da/2?gb.push("left"):aa.x>this._map.transform.width-Da/2&&gb.push("right");Da=0===gb.length?"bottom":
gb.join("-")}aa=aa.add(Sa[Da]).round();Ta.setTransform(this._container,Qg[Da]+" translate("+aa.x+"px,"+aa.y+"px)");kb(this._container,Da,"popup")}},ba.prototype._onClose=function(){this.remove()},ba}(a.Evented),Hh={version:a.version,supported:nb,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:Xi,NavigationControl:Ig,GeolocateControl:zh,AttributionControl:ch,ScaleControl:zf,FullscreenControl:ug,Popup:hh,Marker:lj,Style:Dd,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,
Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){($d||($d=new Ee),$d).acquire("mapboxgl_preloaded_worker_pool")},clearPrewarmedResources:function(){var Y=$d;Y&&(Y.isPreloaded()&&1===Y.numActive()?(Y.release("mapboxgl_preloaded_worker_pool"),$d=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},
get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(Y){a.config.ACCESS_TOKEN=Y},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(Y){a.config.API_URL=Y},get workerCount(){return Ee.workerCount},set workerCount(Y){Ee.workerCount=Y},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(Y){a.config.MAX_PARALLEL_IMAGE_REQUESTS=Y},clearStorage:function(Y){a.clearTileCache(Y)},workerUrl:""};return Hh});return h})},{}],448:[function(b,
y,D){function n(p,h,a){for(var d=Array(p),e=0;e<p;++e)d[e]=0,e===h&&(d[e]+=.5),e===a&&(d[e]+=.5);return d}y.exports=function(p){for(var h=1<<p+1,a=Array(h),d=0;d<h;++d){var e=d;var l=p,k=d;if(0===k||k===(1<<l+1)-1)var c=[];else{var f=[];c=[];for(var g=0;g<=l;++g)if(k&1<<g){f.push(n(l,g-1,g-1));c.push(null);for(var q=0;q<=l;++q)~k&1<<q&&(f.push(n(l,g-1,q-1)),c.push([g,q]))}l=m(f);k=[];g=0;b:for(;g<l.length;++g){f=l[g];var t=[];for(q=0;q<f.length;++q){if(!c[f[q]])continue b;t.push(c[f[q]].slice())}k.push(t)}c=
k}a[e]=c}return a};var m=b("convex-hull")},{"convex-hull":135}],449:[function(b,y,D){function n(q,t,u,w,x){q[0]=t[0]*w+u[0]*x;q[1]=t[1]*w+u[1]*x;q[2]=t[2]*w+u[2]*x}var m=b("./normalize");D=b("gl-mat4/create");var p=b("gl-mat4/clone"),h=b("gl-mat4/determinant"),a=b("gl-mat4/invert"),d=b("gl-mat4/transpose"),e={length:b("gl-vec3/length"),normalize:b("gl-vec3/normalize"),dot:b("gl-vec3/dot"),cross:b("gl-vec3/cross")},l=D(),k=D(),c=[0,0,0,0],f=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];y.exports=function(q,
t,u,w,x,E){t||(t=[0,0,0]);u||(u=[0,0,0]);w||(w=[0,0,0]);x||(x=[0,0,0,1]);E||(E=[0,0,0,1]);if(!m(l,q))return!1;p(k,l);k[3]=0;k[7]=0;k[11]=0;k[15]=1;if(Math.abs(1E-8>h(k)))return!1;var F=l[3],z=l[7],B=l[11];q=l[12];var C=l[13],v=l[14],G=l[15];if(0!==F||0!==z||0!==B){c[0]=F;c[1]=z;c[2]=B;c[3]=G;if(!a(k,k))return!1;d(k,k);F=c[0];z=c[1];B=c[2];G=c[3];x[0]=k[0]*F+k[4]*z+k[8]*B+k[12]*G;x[1]=k[1]*F+k[5]*z+k[9]*B+k[13]*G;x[2]=k[2]*F+k[6]*z+k[10]*B+k[14]*G;x[3]=k[3]*F+k[7]*z+k[11]*B+k[15]*G}else x[0]=x[1]=
x[2]=0,x[3]=1;t[0]=q;t[1]=C;t[2]=v;f[0][0]=l[0];f[0][1]=l[1];f[0][2]=l[2];f[1][0]=l[4];f[1][1]=l[5];f[1][2]=l[6];f[2][0]=l[8];f[2][1]=l[9];f[2][2]=l[10];u[0]=e.length(f[0]);e.normalize(f[0],f[0]);w[0]=e.dot(f[0],f[1]);n(f[1],f[1],f[0],1,-w[0]);u[1]=e.length(f[1]);e.normalize(f[1],f[1]);w[0]/=u[1];w[1]=e.dot(f[0],f[2]);n(f[2],f[2],f[0],1,-w[1]);w[2]=e.dot(f[1],f[2]);n(f[2],f[2],f[1],1,-w[2]);u[2]=e.length(f[2]);e.normalize(f[2],f[2]);w[1]/=u[2];w[2]/=u[2];e.cross(g,f[1],f[2]);if(0>e.dot(f[0],g))for(t=
0;3>t;t++)u[t]*=-1,f[t][0]*=-1,f[t][1]*=-1,f[t][2]*=-1;E[0]=.5*Math.sqrt(Math.max(1+f[0][0]-f[1][1]-f[2][2],0));E[1]=.5*Math.sqrt(Math.max(1-f[0][0]+f[1][1]-f[2][2],0));E[2]=.5*Math.sqrt(Math.max(1-f[0][0]-f[1][1]+f[2][2],0));E[3]=.5*Math.sqrt(Math.max(1+f[0][0]+f[1][1]+f[2][2],0));f[2][1]>f[1][2]&&(E[0]=-E[0]);f[0][2]>f[2][0]&&(E[1]=-E[1]);f[1][0]>f[0][1]&&(E[2]=-E[2]);return!0}},{"./normalize":450,"gl-mat4/clone":272,"gl-mat4/create":273,"gl-mat4/determinant":274,"gl-mat4/invert":278,"gl-mat4/transpose":289,
"gl-vec3/cross":339,"gl-vec3/dot":344,"gl-vec3/length":354,"gl-vec3/normalize":361}],450:[function(b,y,D){y.exports=function(n,m){var p=m[15];if(0===p)return!1;p=1/p;for(var h=0;16>h;h++)n[h]=m[h]*p;return!0}},{}],451:[function(b,y,D){function n(){return{translate:[0,0,0],scale:[1,1,1],skew:[0,0,0],perspective:[0,0,0,1],quaternion:[0,0,0,1]}}var m=b("gl-vec3/lerp"),p=b("mat4-recompose"),h=b("mat4-decompose"),a=b("gl-mat4/determinant"),d=b("quat-slerp"),e=n(),l=n(),k=n();y.exports=function(c,f,g,q){if(0===
a(f)||0===a(g))return!1;f=h(f,e.translate,e.scale,e.skew,e.perspective,e.quaternion);g=h(g,l.translate,l.scale,l.skew,l.perspective,l.quaternion);if(!f||!g)return!1;m(k.translate,e.translate,l.translate,q);m(k.skew,e.skew,l.skew,q);m(k.scale,e.scale,l.scale,q);m(k.perspective,e.perspective,l.perspective,q);d(k.quaternion,e.quaternion,l.quaternion,q);p(c,k.translate,k.scale,k.skew,k.perspective,k.quaternion);return!0}},{"gl-mat4/determinant":274,"gl-vec3/lerp":355,"mat4-decompose":449,"mat4-recompose":452,
"quat-slerp":501}],452:[function(b,y,D){var n={identity:b("gl-mat4/identity"),translate:b("gl-mat4/translate"),multiply:b("gl-mat4/multiply"),create:b("gl-mat4/create"),scale:b("gl-mat4/scale"),fromRotationTranslation:b("gl-mat4/fromRotationTranslation")};n.create();var m=n.create();y.exports=function(p,h,a,d,e,l){n.identity(p);n.fromRotationTranslation(p,l,h);p[3]=e[0];p[7]=e[1];p[11]=e[2];p[15]=e[3];n.identity(m);0!==d[2]&&(m[9]=d[2],n.multiply(p,p,m));0!==d[1]&&(m[9]=0,m[8]=d[1],n.multiply(p,p,
m));0!==d[0]&&(m[8]=0,m[4]=d[0],n.multiply(p,p,m));n.scale(p,p,a);return p}},{"gl-mat4/create":273,"gl-mat4/fromRotationTranslation":276,"gl-mat4/identity":277,"gl-mat4/multiply":280,"gl-mat4/scale":287,"gl-mat4/translate":288}],453:[function(b,y,D){y.exports=Math.log2||function(n){return Math.log(n)*Math.LOG2E}},{}],454:[function(b,y,D){function n(q){this._components=q.slice();this._time=[0];this.prevMatrix=q.slice();this.nextMatrix=q.slice();this.computedMatrix=q.slice();this.computedInverse=q.slice();
this.computedEye=[0,0,0];this.computedUp=[0,0,0];this.computedCenter=[0,0,0];this.computedRadius=[0];this._limits=[-Infinity,Infinity]}var m=b("binary-search-bounds"),p=b("mat4-interpolate"),h=b("gl-mat4/invert"),a=b("gl-mat4/rotateX"),d=b("gl-mat4/rotateY"),e=b("gl-mat4/rotateZ"),l=b("gl-mat4/lookAt"),k=b("gl-mat4/translate");b("gl-mat4/scale");var c=b("gl-vec3/normalize"),f=[0,0,0];y.exports=function(q){q=q||{};return new n(q.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};b=n.prototype;b.recalcMatrix=
function(q){var t=this._time,u=m.le(t,q),w=this.computedMatrix;if(!(0>u)){var x=this._components;if(u===t.length-1)for(var E=16*u,F=0;16>F;++F)w[F]=x[E++];else{var z=t[u+1]-t[u];E=16*u;var B=this.prevMatrix,C=!0;for(F=0;16>F;++F)B[F]=x[E++];var v=this.nextMatrix;for(F=0;16>F;++F)v[F]=x[E++],C=C&&B[F]===v[F];if(1E-6>z||C)for(F=0;16>F;++F)w[F]=B[F];else p(w,B,v,(q-t[u])/z)}F=this.computedUp;F[0]=w[1];F[1]=w[5];F[2]=w[9];c(F,F);F=this.computedInverse;h(F,w);q=this.computedEye;t=F[15];q[0]=F[12]/t;q[1]=
F[13]/t;q[2]=F[14]/t;t=this.computedCenter;u=Math.exp(this.computedRadius[0]);for(F=0;3>F;++F)t[F]=q[F]-w[2+4*F]*u}};b.idle=function(q){if(!(q<this.lastT())){for(var t=this._components,u=t.length-16,w=0;16>w;++w)t.push(t[u++]);this._time.push(q)}};b.flush=function(q){q=m.gt(this._time,q)-2;0>q||(this._time.splice(0,q),this._components.splice(0,16*q))};b.lastT=function(){return this._time[this._time.length-1]};b.lookAt=function(q,t,u,w){this.recalcMatrix(q);t=t||this.computedEye;u=u||f;w=w||this.computedUp;
this.setMatrix(q,l(this.computedMatrix,t,u,w));for(w=q=0;3>w;++w)q+=Math.pow(u[w]-t[w],2);q=Math.log(Math.sqrt(q));this.computedRadius[0]=q};b.rotate=function(q,t,u,w){this.recalcMatrix(q);var x=this.computedInverse;t&&d(x,x,t);u&&a(x,x,u);w&&e(x,x,w);this.setMatrix(q,h(this.computedMatrix,x))};var g=[0,0,0];b.pan=function(q,t,u,w){g[0]=-(t||0);g[1]=-(u||0);g[2]=-(w||0);this.recalcMatrix(q);t=this.computedInverse;k(t,t,g);this.setMatrix(q,h(t,t))};b.translate=function(q,t,u,w){g[0]=t||0;g[1]=u||0;
g[2]=w||0;this.recalcMatrix(q);t=this.computedMatrix;k(t,t,g);this.setMatrix(q,t)};b.setMatrix=function(q,t){if(!(q<this.lastT()))for(this._time.push(q),q=0;16>q;++q)this._components.push(t[q])};b.setDistance=function(q,t){this.computedRadius[0]=t};b.setDistanceLimits=function(q,t){var u=this._limits;u[0]=q;u[1]=t};b.getDistanceLimits=function(q){var t=this._limits;return q?(q[0]=t[0],q[1]=t[1],q):t}},{"binary-search-bounds":455,"gl-mat4/invert":278,"gl-mat4/lookAt":279,"gl-mat4/rotateX":284,"gl-mat4/rotateY":285,
"gl-mat4/rotateZ":286,"gl-mat4/scale":287,"gl-mat4/translate":288,"gl-vec3/normalize":361,"mat4-interpolate":451}],455:[function(b,y,D){arguments[4][243][0].apply(D,arguments)},{dup:243}],456:[function(b,y,D){y.exports=function(m){var p=m.length;if(3>p){for(var h=Array(p),a=0;a<p;++a)h[a]=a;return 2===p&&m[0][0]===m[1][0]&&m[0][1]===m[1][1]?[0]:h}h=Array(p);for(a=0;a<p;++a)h[a]=a;h.sort(function(f,g){var q=m[f][0]-m[g][0];return q?q:m[f][1]-m[g][1]});var d=[h[0],h[1]],e=[h[0],h[1]];for(a=2;a<p;++a){for(var l=
h[a],k=m[l],c=d.length;1<c&&0>=n(m[d[c-2]],m[d[c-1]],k);)--c,d.pop();d.push(l);for(c=e.length;1<c&&0<=n(m[e[c-2]],m[e[c-1]],k);)--c,e.pop();e.push(l)}h=Array(e.length+d.length-2);a=p=0;for(l=d.length;a<l;++a)h[p++]=d[a];for(a=e.length-2;0<a;--a)h[p++]=e[a];return h};var n=b("robust-orientation")[3]},{"robust-orientation":520}],457:[function(b,y,D){y.exports=function(m,p){function h(F){var z=!1;"altKey"in F&&(z=z||F.altKey!==w.alt,w.alt=!!F.altKey);"shiftKey"in F&&(z=z||F.shiftKey!==w.shift,w.shift=
!!F.shiftKey);"ctrlKey"in F&&(z=z||F.ctrlKey!==w.control,w.control=!!F.ctrlKey);"metaKey"in F&&(z=z||F.metaKey!==w.meta,w.meta=!!F.metaKey);return z}function a(F,z){var B=n.x(z),C=n.y(z);"buttons"in z&&(F=z.buttons|0);if(F!==q||B!==t||C!==u||h(z))q=F|0,t=B||0,u=C||0,p&&p(q,t,u,w)}function d(F){a(0,F)}function e(){if(q||t||u||w.shift||w.alt||w.meta||w.control)q=t=u=0,w.shift=w.alt=w.control=w.meta=!1,p&&p(0,0,0,w)}function l(F){h(F)&&p&&p(q,t,u,w)}function k(F){0===n.buttons(F)?a(0,F):a(q,F)}function c(F){a(q|
n.buttons(F),F)}function f(F){a(q&~n.buttons(F),F)}function g(){x||(x=!0,m.addEventListener("mousemove",k),m.addEventListener("mousedown",c),m.addEventListener("mouseup",f),m.addEventListener("mouseleave",d),m.addEventListener("mouseenter",d),m.addEventListener("mouseout",d),m.addEventListener("mouseover",d),m.addEventListener("blur",e),m.addEventListener("keyup",l),m.addEventListener("keydown",l),m.addEventListener("keypress",l),m!==window&&(window.addEventListener("blur",e),window.addEventListener("keyup",
l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}p||(p=m,m=window);var q=0,t=0,u=0,w={shift:!1,alt:!1,control:!1,meta:!1},x=!1;g();var E={element:m};Object.defineProperties(E,{enabled:{get:function(){return x},set:function(F){F?g():x&&(x=!1,m.removeEventListener("mousemove",k),m.removeEventListener("mousedown",c),m.removeEventListener("mouseup",f),m.removeEventListener("mouseleave",d),m.removeEventListener("mouseenter",d),m.removeEventListener("mouseout",d),m.removeEventListener("mouseover",
d),m.removeEventListener("blur",e),m.removeEventListener("keyup",l),m.removeEventListener("keydown",l),m.removeEventListener("keypress",l),m!==window&&(window.removeEventListener("blur",e),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},buttons:{get:function(){return q},enumerable:!0},x:{get:function(){return t},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return w},enumerable:!0}});
return E};var n=b("mouse-event")},{"mouse-event":459}],458:[function(b,y,D){var n={left:0,top:0};y.exports=function(m,p,h){p=p||m.currentTarget||m.srcElement;Array.isArray(h)||(h=[0,0]);var a=m.clientX||0;m=m.clientY||0;p=p===window||p===document||p===document.body?n:p.getBoundingClientRect();h[0]=a-p.left;h[1]=m-p.top;return h}},{}],459:[function(b,y,D){function n(m){return m.target||m.srcElement||window}D.buttons=function(m){if("object"===typeof m){if("buttons"in m)return m.buttons;if("which"in
m){m=m.which;if(2===m)return 4;if(3===m)return 2;if(0<m)return 1<<m-1}else if("button"in m){m=m.button;if(1===m)return 4;if(2===m)return 2;if(0<=m)return 1<<m}}return 0};D.element=n;D.x=function(m){if("object"===typeof m){if("offsetX"in m)return m.offsetX;var p=n(m).getBoundingClientRect();return m.clientX-p.left}return 0};D.y=function(m){if("object"===typeof m){if("offsetY"in m)return m.offsetY;var p=n(m).getBoundingClientRect();return m.clientY-p.top}return 0}},{}],460:[function(b,y,D){var n=b("to-px");
y.exports=function(m,p,h){"function"===typeof m&&(h=!!p,p=m,m=window);var a=n("ex",m),d=function(e){h&&e.preventDefault();var l=e.deltaX||0,k=e.deltaY||0,c=e.deltaZ||0,f=1;switch(e.deltaMode){case 1:f=a;break;case 2:f=window.innerHeight}l*=f;k*=f;c*=f;if(l||k||c)return p(l,k,c,e)};m.addEventListener("wheel",d);return d}},{"to-px":550}],461:[function(b,y,D){function n(c,f,g){for(var q=0,t=0;t<c;++t)f&1<<t&&(q|=1<<g[t]);return q}function m(c,f,g,q,t,u){function w(L,P){v.push("for(","i"+t[L],"\x3d",
P,";","i"+t[L],"\x3c","s"+t[L],";","++","i"+t[L],"){")}function x(L){for(var P=0;P<z;++P)v.push("p"+P,"+\x3d","u"+P+"_"+t[L],";");v.push("}")}function E(){for(var L=1;L<1<<B;++L)v.push(k,"\x3d","e"+L,";","e"+L,"\x3d","y"+L,";","y"+L,"\x3d",k,";")}function F(L,P){if(0>L){for(var Q=0;Q<z;++Q)u[Q]?v.push("c"+Q+"_0","\x3d","d"+Q,".get(","p"+Q,");"):v.push("c"+Q+"_0","\x3d","d"+Q,"[","p"+Q,"];");L=[];for(Q=0;Q<z;++Q)L.push("c"+Q+"_0");for(Q=0;Q<q;++Q)L.push("x"+Q);v.push("b0","\x3d",a,"[",l,"]\x3dphase(",
L.join(),");");for(L=1;L<1<<B;++L)v.push("b"+L,"\x3d",a,"[",l,"+","e"+L,"];");Q=[];for(L=1;L<1<<B;++L)Q.push("(b0!\x3d\x3db"+L+")");v.push("if(",Q.join("||"),"){");var S=[];for(Q=0;Q<B;++Q)S.push("i"+Q);for(Q=0;Q<z;++Q)for(S.push("c"+Q+"_0"),L=1;L<1<<B;++L)u[Q]?v.push("c"+Q+"_"+L,"\x3d","d"+Q,".get(","p"+Q,"+","d"+Q+"_"+L,");"):v.push("c"+Q+"_"+L,"\x3d","d"+Q,"[","p"+Q,"+","d"+Q+"_"+L,"];"),S.push("c"+Q+"_"+L);for(Q=0;Q<1<<B;++Q)S.push("b"+Q);for(Q=0;Q<q;++Q)S.push("x"+Q);v.push("vertex(",S.join(),
");","v0","\x3d",h,"[",l,"]\x3d",d,"++;");Q=(1<<B)-1;S="b"+Q;for(L=0;L<B;++L)if(0===(P&~(1<<L))){for(var O=Q^1<<L,U="b"+O,X=[],da=O;0<da;da=da-1&O)X.push(h+"["+l+"+e"+da+"]");X.push("v0");for(da=0;da<z;++da)L&1?X.push("c"+da+"_"+Q,"c"+da+"_"+O):X.push("c"+da+"_"+O,"c"+da+"_"+Q);L&1?X.push(S,U):X.push(U,S);for(da=0;da<q;++da)X.push("x"+da);v.push("if(",S,"!\x3d\x3d",U,"){","face(",X.join(),")}")}v.push("}",l,"+\x3d1;")}else{for(Q=L-1;0<=Q;--Q)w(Q,0);S=[];for(Q=0;Q<z;++Q)u[Q]?S.push("d"+Q+".get(p"+
Q+")"):S.push("d"+Q+"[p"+Q+"]");for(Q=0;Q<q;++Q)S.push("x"+Q);v.push(a,"[",l,"++]\x3dphase(",S.join(),");");for(Q=0;Q<L;++Q)x(Q);for(Q=0;Q<z;++Q)v.push("p"+Q,"+\x3d","u"+Q+"_"+t[L],";");v.push("if(","s"+t[L],"\x3e0){","i"+t[L],"\x3d1;");F(L-1,P|1<<t[L]);for(Q=0;Q<z;++Q)v.push("p"+Q,"+\x3d","u"+Q+"_"+t[L],";");L===B-1&&(v.push(l,"\x3d0;"),E());w(L,2);F(L-1,P);L===B-1&&(v.push("if(","i"+t[B-1],"\x261){",l,"\x3d0;}"),E());x(L);v.push("}")}}var z=u.length,B=t.length;if(2>B)throw Error("ndarray-extract-contour: Dimension must be at least 2");
for(var C="extractContour"+t.join("_"),v=[],G=[],I=[],J=0;J<z;++J)I.push("a"+J);for(J=0;J<q;++J)I.push("x"+J);for(J=0;J<B;++J)G.push("s"+J+"\x3da0.shape["+J+"]|0");for(J=0;J<z;++J){G.push("d"+J+"\x3da"+J+".data","o"+J+"\x3da"+J+".offset|0");for(var K=0;K<B;++K)G.push("t"+J+"_"+K+"\x3da"+J+".stride["+K+"]|0")}for(J=0;J<z;++J)for(G.push("p"+J+"\x3do"+J),G.push("c"+J+"_0"),K=1;K<1<<B;++K){for(var N=[],H=0;H<B;++H)K&1<<H&&N.push("-t"+(J+"_"+H));G.push("d"+J+"_"+K+"\x3d("+N.join("")+")|0");G.push("c"+
J+"_"+K+"\x3d0")}for(J=0;J<z;++J)for(K=0;K<B;++K)H=["t"+J+"_"+t[K]],0<K&&H.push("t"+J+"_"+t[K-1]+"*s"+t[K-1]),G.push("u"+J+"_"+t[K]+"\x3d("+H.join("-")+")|0");for(J=0;J<B;++J)G.push("i"+J+"\x3d0");G.push(d+"\x3d0");K=["2"];for(J=B-2;0<=J;--J)K.push("s"+t[J]);G.push(e+"\x3d("+K.join("*")+")|0",a+"\x3dmallocUint32("+e+")",h+"\x3dmallocUint32("+e+")",l+"\x3d0");G.push("b0\x3d0");for(K=1;K<1<<B;++K){J=[];N=[];for(H=0;H<B;++H)K&1<<H&&(0===N.length?J.push("1"):J.unshift(N.join("*"))),N.push("s"+t[H]);H=
"";0>J[0].indexOf("s"+t[B-2])&&(H="-");N=n(B,K,t);G.push("e"+N+"\x3d(-"+J.join("-")+")|0","y"+N+"\x3d("+H+J.join("-")+")|0","b"+N+"\x3d0")}G.push("v0\x3d0",k+"\x3d0");F(B-1,0);v.push("freeUint32(",h,");freeUint32(",a,");");C=["'use strict';function ",C,"(",I.join(),"){var ",G.join(),";",v.join(""),"}return ",C].join("");return(new Function("vertex","face","phase","mallocUint32","freeUint32",C))(c,f,g,p.mallocUint32,p.freeUint32)}var p=b("typedarray-pool");y.exports=function(c){function f(E){throw Error("ndarray-extract-contour: "+
E);}"object"!==typeof c&&f("Must specify arguments");var g=c.order;Array.isArray(g)||f("Must specify order");var q=c.arrayArguments||1;1>q&&f("Must have at least one array argument");var t=c.scalarArguments||0;0>t&&f("Scalar arg count must be \x3e 0");"function"!==typeof c.vertex&&f("Must specify vertex creation function");"function"!==typeof c.cell&&f("Must specify cell creation function");"function"!==typeof c.phase&&f("Must specify phase function");for(var u=c.getters||[],w=Array(q),x=0;x<q;++x)0<=
u.indexOf(x)?w[x]=!0:w[x]=!1;return m(c.vertex,c.cell,c.phase,t,g,w)};var h="V",a="P",d="N",e="Q",l="X",k="T"},{"typedarray-pool":567}],462:[function(b,y,D){function n(k){if(k in h)return h[k];for(var c=[],f=0;f<k;++f)c.push("out",f,"s\x3d0.5*(inp",f,"l-inp",f,"r);");var g=["array"],q=["junk"];for(f=0;f<k;++f){g.push("array");q.push("out"+f+"s");var t=m(k);t[f]=-1;g.push({array:0,offset:t.slice()});t[f]=1;g.push({array:0,offset:t.slice()});q.push("inp"+f+"l","inp"+f+"r")}return h[k]=p({args:g,pre:d,
post:d,body:{body:c.join(""),args:q.map(function(u){return{name:u,lvalue:0===u.indexOf("out"),rvalue:0===u.indexOf("inp"),count:"junk"!==u|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+k})}y.exports=function(k,c,f){if(Array.isArray(f)){if(f.length!==c.dimension)throw Error("ndarray-gradient: invalid boundary conditions");}else f="string"===typeof f?m(c.dimension,f):m(c.dimension,"clamp");if(k.dimension!==c.dimension+1)throw Error("ndarray-gradient: output dimension must be +1 input dimension");
if(k.shape[c.dimension]!==c.dimension)throw Error("ndarray-gradient: output shape must match input shape");for(var g=0;g<c.dimension;++g)if(k.shape[g]!==c.shape[g])throw Error("ndarray-gradient: shape mismatch");if(0===c.size)return k;if(0>=c.dimension)return k.set(0),k;var q=f;f=q.join();g=a[f];if(!g){g=q.length;for(var t=["function gradient(dst,src){var s\x3dsrc.shape.slice();"],u=0;u<1<<g;++u){for(var w=[],x=0;x<g;++x)u&1<<x&&w.push(x+1);for(var E=0;E<1<<w.length;++E){var F=w.slice();for(x=0;x<
w.length;++x)E&1<<x&&(F[x]=-F[x]);x=F;F=g-x.length;for(var z=[],B=[],C=[],v=0;v<g;++v)0<=x.indexOf(v+1)?C.push("0"):0<=x.indexOf(-(v+1))?C.push("s["+v+"]-1"):(C.push("-1"),z.push("1"),B.push("s["+v+"]-2"));B=".lo("+z.join()+").hi("+B.join()+")";0===z.length&&(B="");if(0<F){t.push("if(1");for(v=0;v<g;++v)0<=x.indexOf(v+1)||0<=x.indexOf(-(v+1))||t.push("\x26\x26s[",v,"]\x3e2");t.push("){grad",F,"(src.pick(",C.join(),")",B);for(v=0;v<g;++v)0<=x.indexOf(v+1)||0<=x.indexOf(-(v+1))||t.push(",dst.pick(",
C.join(),",",v,")",B);t.push(");")}for(v=0;v<x.length;++v){z=Math.abs(x[v])-1;var G="dst.pick("+C.join()+","+z+")"+B;switch(q[z]){case "clamp":var I=C.slice(),J=C.slice();0>x[v]?I[z]="s["+z+"]-2":J[z]="1";0===F?t.push("if(s[",z,"]\x3e1){dst.set(",C.join(),",",z,",0.5*(src.get(",I.join(),")-src.get(",J.join(),")))}else{dst.set(",C.join(),",",z,",0)};"):t.push("if(s[",z,"]\x3e1){diff(",G,",src.pick(",I.join(),")",B,",src.pick(",J.join(),")",B,");}else{zero(",G,");};");break;case "mirror":0===F?t.push("dst.set(",
C.join(),",",z,",0);"):t.push("zero(",G,");");break;case "wrap":I=C.slice();J=C.slice();0>x[v]?(I[z]="s["+z+"]-2",J[z]="0"):(I[z]="s["+z+"]-1",J[z]="1");0===F?t.push("if(s[",z,"]\x3e2){dst.set(",C.join(),",",z,",0.5*(src.get(",I.join(),")-src.get(",J.join(),")))}else{dst.set(",C.join(),",",z,",0)};"):t.push("if(s[",z,"]\x3e2){diff(",G,",src.pick(",I.join(),")",B,",src.pick(",J.join(),")",B,");}else{zero(",G,");};");break;default:throw Error("ndarray-gradient: Invalid boundary condition");}}0<F&&t.push("};")}}t.push("return dst;};return gradient");
q=["diff","zero"];w=[e,l];for(u=1;u<=g;++u)q.push("grad"+u),w.push(n(u));q.push(t.join(""));g=Function.apply(void 0,q).apply(void 0,w);h[f]=g}return g(k,c)};var m=b("dup"),p=b("cwise-compiler"),h={},a={},d={body:"",args:[],thisVars:[],localVars:[]},e=p({args:["array","array","array"],pre:d,post:d,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out\x3d0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),
l=p({args:["array"],pre:d,post:d,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out\x3d0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":151,dup:176}],463:[function(b,y,D){function n(a,d){var e=Math.floor(d);d-=e;var l=0<=e+1&&e+1<a.shape[0],k=0<=e&&e<a.shape[0]?+a.get(e):0;a=l?+a.get(e+1):0;return(1-d)*k+d*a}function m(a,d,e){var l=Math.floor(d);d-=l;var k=0<=l&&l<a.shape[0],c=0<=l+1&&l+1<a.shape[0],f=Math.floor(e);e-=f;var g=0<=f&&f<a.shape[1],q=0<=f+1&&f+1<a.shape[1],
t=k&&g?a.get(l,f):0;k=k&&q?a.get(l,f+1):0;g=c&&g?a.get(l+1,f):0;a=c&&q?a.get(l+1,f+1):0;return(1-e)*((1-d)*t+d*g)+e*((1-d)*k+d*a)}function p(a,d,e,l){var k=Math.floor(d);d-=k;var c=0<=k&&k<a.shape[0],f=0<=k+1&&k+1<a.shape[0],g=Math.floor(e);e-=g;var q=0<=g&&g<a.shape[1],t=0<=g+1&&g+1<a.shape[1],u=Math.floor(l);l-=u;var w=0<=u&&u<a.shape[2],x=0<=u+1&&u+1<a.shape[2],E=c&&q&&w?a.get(k,g,u):0,F=c&&t&&w?a.get(k,g+1,u):0,z=f&&q&&w?a.get(k+1,g,u):0;w=f&&t&&w?a.get(k+1,g+1,u):0;var B=c&&q&&x?a.get(k,g,u+
1):0;c=c&&t&&x?a.get(k,g+1,u+1):0;q=f&&q&&x?a.get(k+1,g,u+1):0;a=f&&t&&x?a.get(k+1,g+1,u+1):0;return(1-l)*((1-e)*((1-d)*E+d*z)+e*((1-d)*F+d*w))+l*((1-e)*((1-d)*B+d*q)+e*((1-d)*c+d*a))}function h(a){var d=a.shape.length|0,e=Array(d),l=Array(d),k=Array(d),c=Array(d),f;for(f=0;f<d;++f){var g=+arguments[f+1];e[f]=Math.floor(g);l[f]=g-e[f];k[f]=0<=e[f]&&e[f]<a.shape[f];c[f]=0<=e[f]+1&&e[f]+1<a.shape[f]}g=0;var q;f=0;a:for(;f<1<<d;++f){var t=1;var u=a.offset;for(q=0;q<d;++q)if(f&1<<q){if(!c[q])continue a;
t*=l[q];u+=a.stride[q]*(e[q]+1)}else{if(!k[q])continue a;t*=1-l[q];u+=a.stride[q]*e[q]}g+=t*a.data[u]}return g}y.exports=function(a,d,e,l){switch(a.shape.length){case 0:return 0;case 1:return n(a,d);case 2:return m(a,d,e);case 3:return p(a,d,e,l);default:return h.apply(void 0,arguments)}};y.exports.d1=n;y.exports.d2=m;y.exports.d3=p},{}],464:[function(b,y,D){function n(f){if(!f)return h;for(var g=0;g<f.args.length;++g){var q=f.args[g];f.args[g]=0===g?{name:q,lvalue:!0,rvalue:!!f.rvalue,count:f.count||
1}:{name:q,lvalue:!1,rvalue:!0,count:1}}f.thisVars||(f.thisVars=[]);f.localVars||(f.localVars=[]);return f}function m(f){for(var g=[],q=0;q<f.args.length;++q)g.push("a"+q);g=new Function("P",["return function ",f.funcName,"_ndarrayops(",g.join(","),") {P(",g.join(","),");return a0}"].join(""));f=p({args:f.args,pre:n(f.pre),body:n(f.body),post:n(f.proc),funcName:f.funcName});return g(f)}var p=b("cwise-compiler"),h={body:"",args:[],thisVars:[],localVars:[]},a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",
band:"\x26",bor:"|",bxor:"^",lshift:"\x3c\x3c",rshift:"\x3e\x3e",rrshift:"\x3e\x3e\x3e"};(function(){for(var f in a){var g=a[f];D[f]=m({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+g+"c"},funcName:f});D[f+"eq"]=m({args:["array","array"],body:{args:["a","b"],body:"a"+g+"\x3db"},rvalue:!0,funcName:f+"eq"});D[f+"s"]=m({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+g+"s"},funcName:f+"s"});D[f+"seq"]=m({args:["array","scalar"],body:{args:["a","s"],body:"a"+
g+"\x3ds"},rvalue:!0,funcName:f+"seq"})}})();var d={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var f in d){var g=d[f];D[f]=m({args:["array","array"],body:{args:["a","b"],body:"a\x3d"+g+"b"},funcName:f});D[f+"eq"]=m({args:["array"],body:{args:["a"],body:"a\x3d"+g+"a"},rvalue:!0,count:2,funcName:f+"eq"})}})();var e={and:"\x26\x26",or:"||",eq:"\x3d\x3d\x3d",neq:"!\x3d\x3d",lt:"\x3c",gt:"\x3e",leq:"\x3c\x3d",geq:"\x3e\x3d"};(function(){for(var f in e){var g=e[f];D[f]=m({args:["array","array",
"array"],body:{args:["a","b","c"],body:"a\x3db"+g+"c"},funcName:f});D[f+"s"]=m({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+g+"s"},funcName:f+"s"});D[f+"eq"]=m({args:["array","array"],body:{args:["a","b"],body:"a\x3da"+g+"b"},rvalue:!0,count:2,funcName:f+"eq"});D[f+"seq"]=m({args:["array","scalar"],body:{args:["a","s"],body:"a\x3da"+g+"s"},rvalue:!0,count:2,funcName:f+"seq"})}})();var l="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var f=
0;f<l.length;++f){var g=l[f];D[g]=m({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b)",thisVars:["this_f"]},funcName:g});D[g+"eq"]=m({args:["array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"})}})();var k=["max","min","atan2","pow"];(function(){for(var f=0;f<k.length;++f){var g=k[f];D[g]=m({args:["array","array","array"],
pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:g});D[g+"s"]=m({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:g+"s"});D[g+"eq"]=m({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,
count:2,funcName:g+"eq"});D[g+"seq"]=m({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"seq"})}})();var c=["atan2","pow"];(function(){for(var f=0;f<c.length;++f){var g=c[f];D[g+"op"]=m({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:g+"op"});D[g+"ops"]=
m({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:g+"ops"});D[g+"opeq"]=m({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opeq"});D[g+"opseq"]=m({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b"],
body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opseq"})}})();D.any=p({args:["array"],pre:h,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});D.all=p({args:["array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});
D.sum=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});D.prod=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],
thisVars:["this_s"],body:"return this_s"},funcName:"prod"});D.norm2squared=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});D.norm2=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],
body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});D.norminf=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a\x3ethis_s){this_s\x3d-a}else if(a\x3ethis_s){this_s\x3da}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});D.norm1=
p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+\x3da\x3c0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});D.sup=p({args:["array"],pre:{body:"this_h\x3d-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3ethis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,
count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});D.inf=p({args:["array"],pre:{body:"this_h\x3dInfinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3cthis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});D.argmin=p({args:["index","array","shape"],pre:{body:"{this_v\x3dInfinity;this_i\x3d_inline_0_arg2_.slice(0)}",
args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3cthis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,
rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});D.argmax=p({args:["index","array","shape"],pre:{body:"{this_v\x3d-Infinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3ethis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});D.random=m({args:["array"],pre:{args:[],body:"this_f\x3dMath.random",thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f()",thisVars:["this_f"]},funcName:"random"});D.assign=m({args:["array","array"],body:{args:["a","b"],body:"a\x3db"},funcName:"assign"});
D.assigns=m({args:["array","scalar"],body:{args:["a","b"],body:"a\x3db"},funcName:"assigns"});D.equals=p({args:["array","array"],pre:h,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!\x3d\x3dy){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":151}],465:[function(b,y,D){var n=b("ndarray"),m=b("./doConvert.js");y.exports=function(p,h){for(var a=[],d=p,e=1;Array.isArray(d);)a.push(d.length),
e*=d.length,d=d[0];if(0===a.length)return n();h||(h=n(new Float64Array(e),a));m(h,p);return h}},{"./doConvert.js":466,ndarray:469}],466:[function(b,y,D){y.exports=b("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v\x3d_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i\x3d0;_inline_1_i\x3c_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v\x3d_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_\x3d_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",
args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":151}],467:[function(b,y,D){function n(d){switch(d){case "uint8":return[a.mallocUint8,a.freeUint8];case "uint16":return[a.mallocUint16,a.freeUint16];case "uint32":return[a.mallocUint32,
a.freeUint32];case "int8":return[a.mallocInt8,a.freeInt8];case "int16":return[a.mallocInt16,a.freeInt16];case "int32":return[a.mallocInt32,a.freeInt32];case "float32":return[a.mallocFloat,a.freeFloat];case "float64":return[a.mallocDouble,a.freeDouble];default:return null}}function m(d){for(var e=[],l=0;l<d;++l)e.push("s"+l);for(l=0;l<d;++l)e.push("n"+l);for(l=1;l<d;++l)e.push("d"+l);for(l=1;l<d;++l)e.push("e"+l);for(l=1;l<d;++l)e.push("f"+l);return e}function p(d,e){function l(x){return"generic"===
e?["data.get(",x,")"].join(""):["data[",x,"]"].join("")}function k(x,E){return"generic"===e?["data.set(",x,",",E,")"].join(""):["data[",x,"]\x3d",E].join("")}var c=["'use strict'"],f=["ndarrayInsertionSort",d.join("d"),e].join(""),g=["left","right","data","offset"].concat(m(d.length)),q=n(e),t=["i,j,cptr,ptr\x3dleft*s0+offset"];if(1<d.length){for(var u=[],w=1;w<d.length;++w)t.push("i"+w),u.push("n"+w);q?t.push("scratch\x3dmalloc("+u.join("*")+")"):t.push("scratch\x3dnew Array("+u.join("*")+")");t.push("dptr",
"sptr","a","b")}else t.push("scratch");c.push(["function ",f,"(",g.join(","),"){var ",t.join(",")].join(""),"for(i\x3dleft+1;i\x3c\x3dright;++i){","j\x3di;ptr+\x3ds0","cptr\x3dptr");if(1<d.length){c.push("dptr\x3d0;sptr\x3dptr");for(w=d.length-1;0<=w;--w)g=d[w],0!==g&&c.push(["for(i",g,"\x3d0;i",g,"\x3cn",g,";++i",g,"){"].join(""));c.push("scratch[dptr++]\x3d",l("sptr"));for(w=0;w<d.length;++w)g=d[w],0!==g&&c.push("sptr+\x3dd"+g,"}");c.push("__g:while(j--\x3eleft){","dptr\x3d0","sptr\x3dcptr-s0");
for(w=1;w<d.length;++w)1===w&&c.push("__l:"),c.push(["for(i",w,"\x3d0;i",w,"\x3cn",w,";++i",w,"){"].join(""));c.push(["a\x3d",l("sptr"),"\nb\x3dscratch[dptr]\nif(a\x3cb){break __g}\nif(a\x3eb){break __l}"].join(""));for(w=d.length-1;1<=w;--w)c.push("sptr+\x3de"+w,"dptr+\x3df"+w,"}");c.push("dptr\x3dcptr;sptr\x3dcptr-s0");for(w=d.length-1;0<=w;--w)g=d[w],0!==g&&c.push(["for(i",g,"\x3d0;i",g,"\x3cn",g,";++i",g,"){"].join(""));c.push(k("dptr",l("sptr")));for(w=0;w<d.length;++w)g=d[w],0!==g&&c.push(["dptr+\x3dd",
g,";sptr+\x3dd",g].join(""),"}");c.push("cptr-\x3ds0\n}");c.push("dptr\x3dcptr;sptr\x3d0");for(w=d.length-1;0<=w;--w)g=d[w],0!==g&&c.push(["for(i",g,"\x3d0;i",g,"\x3cn",g,";++i",g,"){"].join(""));c.push(k("dptr","scratch[sptr++]"));for(w=0;w<d.length;++w)g=d[w],0!==g&&c.push("dptr+\x3dd"+g,"}")}else c.push("scratch\x3d"+l("ptr"),"while((j--\x3eleft)\x26\x26("+l("cptr-s0")+"\x3escratch)){",k("cptr",l("cptr-s0")),"cptr-\x3ds0","}",k("cptr","scratch"));c.push("}");1<d.length&&q&&c.push("free(scratch)");
c.push("} return "+f);if(q)return d=new Function("malloc","free",c.join("\n")),d(q[0],q[1]);d=new Function(c.join("\n"));return d()}function h(d,e,l){function k(P){return["(offset+",P,"*s0)"].join("")}function c(P){return"generic"===e?["data.get(",P,")"].join(""):["data[",P,"]"].join("")}function f(P,Q){return"generic"===e?["data.set(",P,",",Q,")"].join(""):["data[",P,"]\x3d",Q].join("")}function g(P,Q,S){if(1===P.length)G.push("ptr0\x3d"+k(P[0]));else for(var O=0;O<P.length;++O)G.push(["b_ptr",O,
"\x3ds0*",P[O]].join(""));Q&&G.push("pivot_ptr\x3d0");G.push("ptr_shift\x3doffset");for(O=d.length-1;0<=O;--O){var U=d[O];0!==U&&G.push(["for(i",U,"\x3d0;i",U,"\x3cn",U,";++i",U,"){"].join(""))}if(1<P.length)for(O=0;O<P.length;++O)G.push(["ptr",O,"\x3db_ptr",O,"+ptr_shift"].join(""));G.push(S);Q&&G.push("++pivot_ptr");for(O=0;O<d.length;++O)U=d[O],0!==U&&(1<P.length?G.push("ptr_shift+\x3dd"+U):G.push("ptr0+\x3dd"+U),G.push("}"))}function q(P,Q,S,O){if(1===Q.length)G.push("ptr0\x3d"+k(Q[0]));else{for(var U=
0;U<Q.length;++U)G.push(["b_ptr",U,"\x3ds0*",Q[U]].join(""));G.push("ptr_shift\x3doffset")}S&&G.push("pivot_ptr\x3d0");P&&G.push(P+":");for(U=1;U<d.length;++U)G.push(["for(i",U,"\x3d0;i",U,"\x3cn",U,";++i",U,"){"].join(""));if(1<Q.length)for(U=0;U<Q.length;++U)G.push(["ptr",U,"\x3db_ptr",U,"+ptr_shift"].join(""));G.push(O);for(U=d.length-1;1<=U;--U)S&&G.push("pivot_ptr+\x3df"+U),1<Q.length?G.push("ptr_shift+\x3de"+U):G.push("ptr0+\x3de"+U),G.push("}")}function t(){1<d.length&&K&&G.push("free(pivot1)",
"free(pivot2)")}function u(P,Q){P="el"+P;Q="el"+Q;if(1<d.length){var S="__l"+ ++N;q(S,[P,Q],!1,["comp\x3d",c("ptr0"),"-",c("ptr1"),"\nif(comp\x3e0){tmp0\x3d",P,";",P,"\x3d",Q,";",Q,"\x3dtmp0;break ",S,"}\nif(comp\x3c0){break ",S,"}"].join(""))}else G.push(["if(",c(k(P)),"\x3e",c(k(Q)),"){tmp0\x3d",P,";",P,"\x3d",Q,";",Q,"\x3dtmp0}"].join(""))}function w(P,Q){1<d.length?g([P,Q],!1,f("ptr0",c("ptr1"))):G.push(f(k(P),c(k(Q))))}function x(P,Q,S){if(1<d.length){var O="__l"+ ++N;q(O,[Q],!0,[P,"\x3d",c("ptr0"),
"-pivot",S,"[pivot_ptr]\nif(",P,"!\x3d\x3d0){break ",O,"}"].join(""))}else G.push([P,"\x3d",c(k(Q)),"-pivot",S].join(""))}function E(P,Q){1<d.length?g([P,Q],!1,["tmp\x3d",c("ptr0"),"\n",f("ptr0",c("ptr1")),"\n",f("ptr1","tmp")].join("")):G.push(["ptr0\x3d",k(P),"\nptr1\x3d",k(Q),"\ntmp\x3d",c("ptr0"),"\n",f("ptr0",c("ptr1")),"\n",f("ptr1","tmp")].join(""))}function F(P,Q,S){1<d.length?(g([P,Q,S],!1,["tmp\x3d",c("ptr0"),"\n",f("ptr0",c("ptr1")),"\n",f("ptr1",c("ptr2")),"\n",f("ptr2","tmp")].join("")),
G.push("++"+Q,"--"+S)):G.push(["ptr0\x3d",k(P),"\nptr1\x3d",k(Q),"\nptr2\x3d",k(S),"\n++",Q,"\n--",S,"\ntmp\x3d",c("ptr0"),"\n",f("ptr0",c("ptr1")),"\n",f("ptr1",c("ptr2")),"\n",f("ptr2","tmp")].join(""))}function z(P,Q){E(P,Q);G.push("--"+Q)}function B(P,Q,S){1<d.length?g([P,Q],!0,[f("ptr0",c("ptr1")),"\n",f("ptr1",["pivot",S,"[pivot_ptr]"].join(""))].join("")):G.push(f(k(P),c(k(Q))),f(k(Q),"pivot"+S))}function C(P,Q){G.push(["if((",Q,"-",P,")\x3c\x3d32){\ninsertionSort(",P,",",Q,",data,offset,",
m(d.length).join(","),")\n}else{\n",I,"(",P,",",Q,",data,offset,",m(d.length).join(","),")\n}"].join(""))}function v(P,Q,S){1<d.length?(G.push(["__l",++N,":while(true){"].join("")),g([P],!0,["if(",c("ptr0"),"!\x3d\x3dpivot",Q,"[pivot_ptr]){break __l",N,"}"].join("")),G.push(S,"}")):G.push(["while(",c(k(P)),"\x3d\x3d\x3dpivot",Q,"){",S,"}"].join(""))}var G=["'use strict'"],I=["ndarrayQuickSort",d.join("d"),e].join(""),J=["left","right","data","offset"].concat(m(d.length)),K=n(e),N=0;G.push(["function ",
I,"(",J.join(","),"){"].join(""));J="sixth\x3d((right-left+1)/6)|0 index1\x3dleft+sixth index5\x3dright-sixth index3\x3d(left+right)\x3e\x3e1 index2\x3dindex3-sixth index4\x3dindex3+sixth el1\x3dindex1 el2\x3dindex2 el3\x3dindex3 el4\x3dindex4 el5\x3dindex5 less\x3dleft+1 great\x3dright-1 pivots_are_equal\x3dtrue tmp tmp0 x y z k ptr0 ptr1 ptr2 comp_pivot1\x3d0 comp_pivot2\x3d0 comp\x3d0".split(" ");if(1<d.length){for(var H=[],L=1;L<d.length;++L)H.push("n"+L),J.push("i"+L);for(L=0;8>L;++L)J.push("b_ptr"+
L);J.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize\x3d"+H.join("*"));K?J.push("pivot1\x3dmalloc(elementSize)","pivot2\x3dmalloc(elementSize)"):J.push("pivot1\x3dnew Array(elementSize),pivot2\x3dnew Array(elementSize)")}else J.push("pivot1","pivot2");G.push("var "+J.join(","));u(1,2);u(4,5);u(1,3);u(2,3);u(1,4);u(3,4);u(2,5);u(2,3);u(4,5);1<d.length?g("el1 el2 el3 el4 el5 index1 index3 index5".split(" "),!0,["pivot1[pivot_ptr]\x3d",c("ptr1"),"\npivot2[pivot_ptr]\x3d",
c("ptr3"),"\npivots_are_equal\x3dpivots_are_equal\x26\x26(pivot1[pivot_ptr]\x3d\x3d\x3dpivot2[pivot_ptr])\nx\x3d",c("ptr0"),"\ny\x3d",c("ptr2"),"\nz\x3d",c("ptr4"),"\n",f("ptr5","x"),"\n",f("ptr6","y"),"\n",f("ptr7","z")].join("")):G.push(["pivot1\x3d",c(k("el2")),"\npivot2\x3d",c(k("el4")),"\npivots_are_equal\x3dpivot1\x3d\x3d\x3dpivot2\nx\x3d",c(k("el1")),"\ny\x3d",c(k("el3")),"\nz\x3d",c(k("el5")),"\n",f(k("index1"),"x"),"\n",f(k("index3"),"y"),"\n",f(k("index5"),"z")].join(""));w("index2","left");
w("index4","right");G.push("if(pivots_are_equal){");G.push("for(k\x3dless;k\x3c\x3dgreat;++k){");x("comp","k",1);G.push("if(comp\x3d\x3d\x3d0){continue}");G.push("if(comp\x3c0){");G.push("if(k!\x3d\x3dless){");E("k","less");G.push("}");G.push("++less");G.push("}else{");G.push("while(true){");x("comp","great",1);G.push("if(comp\x3e0){");G.push("great--");G.push("}else if(comp\x3c0){");F("k","less","great");G.push("break");G.push("}else{");z("k","great");G.push("break");G.push("}");G.push("}");G.push("}");
G.push("}");G.push("}else{");G.push("for(k\x3dless;k\x3c\x3dgreat;++k){");x("comp_pivot1","k",1);G.push("if(comp_pivot1\x3c0){");G.push("if(k!\x3d\x3dless){");E("k","less");G.push("}");G.push("++less");G.push("}else{");x("comp_pivot2","k",2);G.push("if(comp_pivot2\x3e0){");G.push("while(true){");x("comp","great",2);G.push("if(comp\x3e0){");G.push("if(--great\x3ck){break}");G.push("continue");G.push("}else{");x("comp","great",1);G.push("if(comp\x3c0){");F("k","less","great");G.push("}else{");z("k",
"great");G.push("}");G.push("break");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");B("left","(less-1)",1);B("right","(great+1)",2);C("left","(less-2)");C("(great+2)","right");G.push("if(pivots_are_equal){");t();G.push("return");G.push("}");G.push("if(less\x3cindex1\x26\x26great\x3eindex5){");v("less",1,"++less");v("great",2,"--great");G.push("for(k\x3dless;k\x3c\x3dgreat;++k){");x("comp_pivot1","k",1);G.push("if(comp_pivot1\x3d\x3d\x3d0){");G.push("if(k!\x3d\x3dless){");
E("k","less");G.push("}");G.push("++less");G.push("}else{");x("comp_pivot2","k",2);G.push("if(comp_pivot2\x3d\x3d\x3d0){");G.push("while(true){");x("comp","great",2);G.push("if(comp\x3d\x3d\x3d0){");G.push("if(--great\x3ck){break}");G.push("continue");G.push("}else{");x("comp","great",1);G.push("if(comp\x3c0){");F("k","less","great");G.push("}else{");z("k","great");G.push("}");G.push("break");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");G.push("}");t();C("less","great");G.push("}return "+
I);if(1<d.length&&K)return J=new Function("insertionSort","malloc","free",G.join("\n")),J(l,K[0],K[1]);J=new Function("insertionSort",G.join("\n"));return J(l)}var a=b("typedarray-pool");y.exports=function(d,e){var l=["'use strict'"],k=["ndarraySortWrapper",d.join("d"),e].join("");l.push(["function ",k,"(array){"].join(""));for(var c=["data\x3darray.data,offset\x3darray.offset|0,shape\x3darray.shape,stride\x3darray.stride"],f=0;f<d.length;++f)c.push(["s",f,"\x3dstride[",f,"]|0,n",f,"\x3dshape[",f,
"]|0"].join(""));var g=Array(d.length),q=[];for(f=0;f<d.length;++f){var t=d[f];0!==t&&(g[t]=0===q.length?"1":q.join("*"),q.push("n"+t))}var u=q=-1;for(f=0;f<d.length;++f)t=d[f],0!==t&&(0<q?c.push(["d",t,"\x3ds",t,"-d",q,"*n",q].join("")):c.push(["d",t,"\x3ds",t].join("")),q=t),t=d.length-1-f,0!==t&&(0<u?c.push(["e",t,"\x3ds",t,"-e",u,"*n",u,",f",t,"\x3d",g[t],"-f",u,"*n",u].join("")):c.push(["e",t,"\x3ds",t,",f",t,"\x3d",g[t]].join("")),u=t);l.push("var "+c.join(","));c=["0","n0-1","data","offset"].concat(m(d.length));
l.push(["if(n0\x3c\x3d32){insertionSort(",c.join(","),")}else{quickSort(",c.join(","),")}"].join(""));l.push("}return "+k);l=new Function("insertionSort","quickSort",l.join("\n"));k=p(d,e);d=h(d,e,k);return l(k,d)}},{"typedarray-pool":567}],468:[function(b,y,D){var n=b("./lib/compile_sort.js"),m={};y.exports=function(p){var h=p.order,a=p.dtype,d=[h,a].join(":"),e=m[d];e||(m[d]=e=n(h,a));e(p);return p}},{"./lib/compile_sort.js":467}],469:[function(b,y,D){function n(k,c){return k[0]-c[0]}function m(){var k=
this.stride,c=Array(k.length),f;for(f=0;f<c.length;++f)c[f]=[Math.abs(k[f]),f];c.sort(n);k=Array(c.length);for(f=0;f<k.length;++f)k[f]=c[f][1];return k}function p(k,c){var f=["View",c,"d",k].join("");0>c&&(f="View_Nil"+k);var g="generic"===k;if(-1===c)return c=new Function("function "+f+"(a){this.data\x3da;};var proto\x3d"+f+".prototype;proto.dtype\x3d'"+k+"';proto.index\x3dfunction(){return -1};proto.size\x3d0;proto.dimension\x3d-1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction(){return new "+
f+"(this.data);};proto.get\x3dproto.set\x3dfunction(){};proto.pick\x3dfunction(){return null};return function construct_"+f+"(a){return new "+f+"(a);}"),c();if(0===c)return c=new Function("TrivialArray","function "+f+"(a,d) {this.data \x3d a;this.offset \x3d d};var proto\x3d"+f+".prototype;proto.dtype\x3d'"+k+"';proto.index\x3dfunction(){return this.offset};proto.dimension\x3d0;proto.size\x3d1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction "+
f+"_copy() {return new "+f+"(this.data,this.offset)};proto.pick\x3dfunction "+f+"_pick(){return TrivialArray(this.data);};proto.valueOf\x3dproto.get\x3dfunction "+f+"_get(){return "+(g?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set\x3dfunction "+f+"_set(v){return "+(g?"this.data.set(this.offset,v)":"this.data[this.offset]\x3dv")+"};return function construct_"+f+"(a,b,c,d){return new "+f+"(a,d)}"),c(l[k][0]);var q=["'use strict'"];var t=a(c),u=t.map(function(F){return"i"+F}),w=
"this.offset+"+t.map(function(F){return"this.stride["+F+"]*i"+F}).join("+"),x=t.map(function(F){return"b"+F}).join(","),E=t.map(function(F){return"c"+F}).join(",");q.push("function "+f+"(a,"+x+","+E+",d){this.data\x3da","this.shape\x3d["+x+"]","this.stride\x3d["+E+"]","this.offset\x3dd|0}","var proto\x3d"+f+".prototype","proto.dtype\x3d'"+k+"'","proto.dimension\x3d"+c);q.push("Object.defineProperty(proto,'size',{get:function "+f+"_size(){return "+t.map(function(F){return"this.shape["+F+"]"}).join("*"),
"}})");1===c?q.push("proto.order\x3d[0]"):(q.push("Object.defineProperty(proto,'order',{get:"),4>c?(q.push("function "+f+"_order(){"),2===c?q.push("return (Math.abs(this.stride[0])\x3eMath.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===c&&q.push("var s0\x3dMath.abs(this.stride[0]),s1\x3dMath.abs(this.stride[1]),s2\x3dMath.abs(this.stride[2]);if(s0\x3es1){if(s1\x3es2){return [2,1,0];}else if(s0\x3es2){return [1,2,0];}else{return [1,0,2];}}else if(s0\x3es2){return [2,0,1];}else if(s2\x3es1){return [0,1,2];}else{return [0,2,1];}}})")):
q.push("ORDER})"));q.push("proto.set\x3dfunction "+f+"_set("+u.join(",")+",v){");g?q.push("return this.data.set("+w+",v)}"):q.push("return this.data["+w+"]\x3dv}");q.push("proto.get\x3dfunction "+f+"_get("+u.join(",")+"){");g?q.push("return this.data.get("+w+")}"):q.push("return this.data["+w+"]}");q.push("proto.index\x3dfunction "+f+"_index(",u.join(),"){return "+w+"}");q.push("proto.hi\x3dfunction "+f+"_hi("+u.join(",")+"){return new "+f+"(this.data,"+t.map(function(F){return["(typeof i",F,"!\x3d\x3d'number'||i",
F,"\x3c0)?this.shape[",F,"]:i",F,"|0"].join("")}).join(",")+","+t.map(function(F){return"this.stride["+F+"]"}).join(",")+",this.offset)}");g=t.map(function(F){return"a"+F+"\x3dthis.shape["+F+"]"});w=t.map(function(F){return"c"+F+"\x3dthis.stride["+F+"]"});q.push("proto.lo\x3dfunction "+f+"_lo("+u.join(",")+"){var b\x3dthis.offset,d\x3d0,"+g.join(",")+","+w.join(","));for(g=0;g<c;++g)q.push("if(typeof i"+g+"\x3d\x3d\x3d'number'\x26\x26i"+g+"\x3e\x3d0){d\x3di"+g+"|0;b+\x3dc"+g+"*d;a"+g+"-\x3dd}");q.push("return new "+
f+"(this.data,"+t.map(function(F){return"a"+F}).join(",")+","+t.map(function(F){return"c"+F}).join(",")+",b)}");q.push("proto.step\x3dfunction "+f+"_step("+u.join(",")+"){var "+t.map(function(F){return"a"+F+"\x3dthis.shape["+F+"]"}).join(",")+","+t.map(function(F){return"b"+F+"\x3dthis.stride["+F+"]"}).join(",")+",c\x3dthis.offset,d\x3d0,ceil\x3dMath.ceil");for(g=0;g<c;++g)q.push("if(typeof i"+g+"\x3d\x3d\x3d'number'){d\x3di"+g+"|0;if(d\x3c0){c+\x3db"+g+"*(a"+g+"-1);a"+g+"\x3dceil(-a"+g+"/d)}else{a"+
g+"\x3dceil(a"+g+"/d)}b"+g+"*\x3dd}");q.push("return new "+f+"(this.data,"+t.map(function(F){return"a"+F}).join(",")+","+t.map(function(F){return"b"+F}).join(",")+",c)}");w=Array(c);x=Array(c);for(g=0;g<c;++g)w[g]="a[i"+g+"]",x[g]="b[i"+g+"]";q.push("proto.transpose\x3dfunction "+f+"_transpose("+u+"){"+u.map(function(F,z){return F+"\x3d("+F+"\x3d\x3d\x3dundefined?"+z+":"+F+"|0)"}).join(";"),"var a\x3dthis.shape,b\x3dthis.stride;return new "+f+"(this.data,"+w.join(",")+","+x.join(",")+",this.offset)}");
q.push("proto.pick\x3dfunction "+f+"_pick("+u+"){var a\x3d[],b\x3d[],c\x3dthis.offset");for(g=0;g<c;++g)q.push("if(typeof i"+g+"\x3d\x3d\x3d'number'\x26\x26i"+g+"\x3e\x3d0){c\x3d(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");q.push("var ctor\x3dCTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");q.push("return function construct_"+f+"(data,shape,stride,offset){return new "+f+"(data,"+t.map(function(F){return"shape["+F+"]"}).join(",")+","+t.map(function(F){return"stride["+
F+"]"}).join(",")+",offset)}");c=new Function("CTOR_LIST","ORDER",q.join("\n"));return c(l[k],m)}function h(k){if(d(k))return"buffer";if(e)switch(Object.prototype.toString.call(k)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";
case "[object Uint8ClampedArray]":return"uint8_clamped";case "[object BigInt64Array]":return"bigint64";case "[object BigUint64Array]":return"biguint64"}return Array.isArray(k)?"array":"generic"}var a=b("iota-array"),d=b("is-buffer"),e="undefined"!==typeof Float64Array,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};(function(){for(var k in l)l[k].push(p(k,-1))});y.exports=function(k,c,f,g){if(void 0===
k){var q=l.array[0];return q([])}"number"===typeof k&&(k=[k]);void 0===c&&(c=[k.length]);q=c.length;if(void 0===f){f=Array(q);for(var t=q-1,u=1;0<=t;--t)f[t]=u,u*=c[t]}if(void 0===g)for(t=g=0;t<q;++t)0>f[t]&&(g-=(c[t]-1)*f[t]);t=h(k);for(u=l[t];u.length<=q+1;)u.push(p(t,u.length-1));q=u[q+1];return q(k,c,f,g)}},{"iota-array":437,"is-buffer":439}],470:[function(b,y,D){var n=b("double-bits"),m=Math.pow(2,-1074);y.exports=function(p,h){if(isNaN(p)||isNaN(h))return NaN;if(p===h)return p;if(0===p)return 0>
h?-m:m;var a=n.hi(p),d=n.lo(p);h>p===0<p?4294967295===d?(a+=1,d=0):d+=1:0===d?(d=4294967295,--a):--d;return n.pack(d,a)}},{"double-bits":173}],471:[function(b,y,D){function n(e,l,k,c){return["C",e,l,k,c,k,c]}function m(e,l,k,c,f,g){return["C",e/3+2/3*k,l/3+2/3*c,f/3+2/3*k,g/3+2/3*c,f,g]}function p(e,l,k,c,f,g,q,t,u,w){if(w)z=w[0],g=w[1],E=w[2],F=w[3];else{z=h(e,l,-f);e=z.x;l=z.y;z=h(t,u,-f);t=z.x;u=z.y;z=(e-t)/2;E=(l-u)/2;F=z*z/(k*k)+E*E/(c*c);1<F&&(F=Math.sqrt(F),k*=F,c*=F);F=k*k;var x=c*c;g=(g==
q?-1:1)*Math.sqrt(Math.abs((F*x-F*E*E-x*z*z)/(F*E*E+x*z*z)));Infinity==g&&(g=1);var E=g*k*E/c+(e+t)/2,F=g*-c*z/k+(l+u)/2,z=Math.asin(((l-F)/c).toFixed(9));g=Math.asin(((u-F)/c).toFixed(9));z=e<E?a-z:z;g=t<E?a-g:g;0>z&&(z=2*a+z);0>g&&(g=2*a+g);q&&z>g&&(z-=2*a);!q&&g>z&&(g-=2*a)}if(Math.abs(g-z)>d){var B=g;x=t;var C=u;g=z+d*(q&&g>z?1:-1);t=E+k*Math.cos(g);u=F+c*Math.sin(g);B=p(t,u,k,c,f,0,q,x,C,[g,B,E,F])}q=Math.tan((g-z)/4);k=4/3*k*q;c=4/3*c*q;e=[2*e-(e+k*Math.sin(z)),2*l-(l-c*Math.cos(z)),t+k*Math.sin(g),
u-c*Math.cos(g),t,u];if(w)return e;B&&(e=e.concat(B));for(w=0;w<e.length;)l=h(e[w],e[w+1],f),e[w++]=l.x,e[w++]=l.y;return e}function h(e,l,k){return{x:e*Math.cos(k)-l*Math.sin(k),y:e*Math.sin(k)+l*Math.cos(k)}}var a=Math.PI,d=a/180*120;y.exports=function(e){for(var l,k=[],c=0,f=0,g=0,q=0,t=null,u=null,w=0,x=0,E=0,F=e.length;E<F;E++){var z=e[E],B=z[0];switch(B){case "M":g=z[1];q=z[2];break;case "A":z=p(w,x,z[1],z[2],a/180*z[3],z[4],z[5],z[6],z[7]);z.unshift("C");7<z.length&&(k.push(z.splice(0,7)),
z.unshift("C"));break;case "S":if("C"==l||"S"==l)w+=w-c,x+=x-f;z=["C",w,x,z[1],z[2],z[3],z[4]];break;case "T":"Q"==l||"T"==l?(t=2*w-t,u=2*x-u):(t=w,u=x);z=m(w,x,t,u,z[1],z[2]);break;case "Q":t=z[1];u=z[2];z=m(w,x,z[1],z[2],z[3],z[4]);break;case "L":z=n(w,x,z[1],z[2]);break;case "H":z=n(w,x,z[1],x);break;case "V":z=n(w,x,w,z[1]);break;case "Z":z=n(w,x,g,q)}l=B;w=z[z.length-2];x=z[z.length-1];4<z.length?(c=z[z.length-4],f=z[z.length-3]):(c=w,f=x);k.push(z)}return k}},{}],472:[function(b,y,D){D.vertexNormals=
function(n,m,p){var h=m.length,a=Array(h);p=void 0===p?1E-6:p;for(var d=0;d<h;++d)a[d]=[0,0,0];for(d=0;d<n.length;++d)for(var e=n[d],l,k=e[e.length-1],c=e[0],f=0;f<e.length;++f){l=k;k=c;c=e[(f+1)%e.length];var g=m[l],q=m[k],t=m[c],u=Array(3),w=0,x=Array(3),E=0;for(l=0;3>l;++l)u[l]=g[l]-q[l],w+=u[l]*u[l],x[l]=t[l]-q[l],E+=x[l]*x[l];if(w*E>p)for(g=a[k],w=1/Math.sqrt(w*E),l=0;3>l;++l)E=(l+1)%3,q=(l+2)%3,g[l]+=w*(x[E]*u[q]-x[q]*u[E])}for(d=0;d<h;++d){g=a[d];for(l=n=0;3>l;++l)n+=g[l]*g[l];if(n>p)for(w=
1/Math.sqrt(n),l=0;3>l;++l)g[l]*=w;else for(l=0;3>l;++l)g[l]=0}return a};D.faceNormals=function(n,m,p){var h=n.length,a=Array(h);p=void 0===p?1E-6:p;for(var d=0;d<h;++d){for(var e=n[d],l=Array(3),k=0;3>k;++k)l[k]=m[e[k]];e=Array(3);var c=Array(3);for(k=0;3>k;++k)e[k]=l[1][k]-l[0][k],c[k]=l[2][k]-l[0][k];l=Array(3);var f=0;for(k=0;3>k;++k){var g=(k+1)%3,q=(k+2)%3;l[k]=e[g]*c[q]-e[q]*c[g];f+=l[k]*l[k]}f=f>p?1/Math.sqrt(f):0;for(k=0;3>k;++k)l[k]*=f;a[d]=l}return a}},{}],473:[function(b,y,D){var n=Object.getOwnPropertySymbols,
m=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;y.exports=function(){try{if(!Object.assign)return!1;var h=new String("abc");h[5]="de";if("5"===Object.getOwnPropertyNames(h)[0])return!1;var a={};for(h=0;10>h;h++)a["_"+String.fromCharCode(h)]=h;if("0123456789"!==Object.getOwnPropertyNames(a).map(function(e){return a[e]}).join(""))return!1;var d={};"abcdefghijklmnopqrst".split("").forEach(function(e){d[e]=e});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},d)).join("")?
!1:!0}catch(e){return!1}}()?Object.assign:function(h,a){if(null===h||void 0===h)throw new TypeError("Object.assign cannot be called with null or undefined");var d=Object(h);for(var e,l=1;l<arguments.length;l++){var k=Object(arguments[l]);for(var c in k)m.call(k,c)&&(d[c]=k[c]);if(n){e=n(k);for(var f=0;f<e.length;f++)p.call(k,e[f])&&(d[e[f]]=k[e[f]])}}return d}},{}],474:[function(b,y,D){y.exports=function(n,m,p,h,a,d,e,l,k,c){var f=m+d+c;if(0<g){var g=Math.sqrt(f+1);n[0]=.5*(e-k)/g;n[1]=.5*(l-h)/g;
n[2]=.5*(p-d)/g;n[3]=.5*g}else c=Math.max(m,d,c),g=Math.sqrt(2*c-f+1),m>=c?(n[0]=.5*g,n[1]=.5*(a+p)/g,n[2]=.5*(l+h)/g,n[3]=.5*(e-k)/g):d>=c?(n[0]=.5*(p+a)/g,n[1]=.5*g,n[2]=.5*(k+e)/g,n[3]=.5*(l-h)/g):(n[0]=.5*(h+l)/g,n[1]=.5*(e+k)/g,n[2]=.5*g,n[3]=.5*(p-a)/g);return n}},{}],475:[function(b,y,D){function n(c,f,g){return Math.sqrt(Math.pow(c,2)+Math.pow(f,2)+Math.pow(g,2))}function m(c,f,g,q){return Math.sqrt(Math.pow(c,2)+Math.pow(f,2)+Math.pow(g,2)+Math.pow(q,2))}function p(c,f){var g=f[0],q=f[1],
t=f[2];f=f[3];var u=m(g,q,t,f);1E-6<u?(c[0]=g/u,c[1]=q/u,c[2]=t/u,c[3]=f/u):(c[0]=c[1]=c[2]=0,c[3]=1)}function h(c,f,g){this.radius=a([g]);this.center=a(f);this.rotation=a(c);this.computedRadius=this.radius.curve(0);this.computedCenter=this.center.curve(0);this.computedRotation=this.rotation.curve(0);this.computedUp=[.1,0,0];this.computedEye=[.1,0,0];this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.recalcMatrix(0)}y.exports=function(c){c=c||{};var f=c.center||[0,0,0],g=c.rotation||[0,0,
0,1],q=c.radius||1;f=[].slice.call(f,0,3);g=[].slice.call(g,0,4);p(g,g);f=new h(g,f,Math.log(q));f.setDistanceLimits(c.zoomMin,c.zoomMax);("eye"in c||"up"in c)&&f.lookAt(0,c.eye,c.center,c.up);return f};var a=b("filtered-vector"),d=b("gl-mat4/lookAt"),e=b("gl-mat4/fromQuat"),l=b("gl-mat4/invert"),k=b("./lib/quatFromFrame");b=h.prototype;b.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())};b.recalcMatrix=function(c){this.radius.curve(c);this.center.curve(c);
this.rotation.curve(c);var f=this.computedRotation;p(f,f);c=this.computedMatrix;e(c,f);var g=this.computedCenter;f=this.computedEye;var q=this.computedUp,t=Math.exp(this.computedRadius[0]);f[0]=g[0]+t*c[2];f[1]=g[1]+t*c[6];f[2]=g[2]+t*c[10];q[0]=c[1];q[1]=c[5];q[2]=c[9];for(g=0;3>g;++g){for(t=q=0;3>t;++t)q+=c[g+4*t]*f[t];c[12+g]=-q}};b.getMatrix=function(c,f){this.recalcMatrix(c);c=this.computedMatrix;if(f){for(var g=0;16>g;++g)f[g]=c[g];return f}return c};b.idle=function(c){this.center.idle(c);this.radius.idle(c);
this.rotation.idle(c)};b.flush=function(c){this.center.flush(c);this.radius.flush(c);this.rotation.flush(c)};b.pan=function(c,f,g,q){f=f||0;g=g||0;q=q||0;this.recalcMatrix(c);var t=this.computedMatrix,u=t[1],w=t[5],x=t[9],E=n(u,w,x);u/=E;w/=E;x/=E;E=t[0];var F=t[4],z=t[8],B=E*u+F*w+z*x;E-=u*B;F-=w*B;z-=x*B;B=n(E,F,z);E/=B;F/=B;z/=B;B=t[2];var C=t[6];t=t[10];var v=B*u+C*w+t*x,G=B*E+C*F+t*z;n(B-(v*u+G*E),C-(v*w+G*F),t-(v*x+G*z));this.center.move(c,E*f+u*g,F*f+w*g,z*f+x*g);f=Math.exp(this.computedRadius[0]);
f=Math.max(1E-4,f+q);this.radius.set(c,Math.log(f))};b.rotate=function(c,f,g,q){this.recalcMatrix(c);f=f||0;g=g||0;var t=this.computedMatrix,u=t[2],w=t[6],x=t[10],E=f*t[0]+g*t[1],F=f*t[4]+g*t[5];t=f*t[8]+g*t[9];g=-(w*t-x*F);t=-(x*E-u*t);E=-(u*F-w*E);F=Math.sqrt(Math.max(0,1-Math.pow(g,2)-Math.pow(t,2)-Math.pow(E,2)));var z=m(g,t,E,F);1E-6<z?(g/=z,t/=z,E/=z,F/=z):(g=t=E=0,F=1);z=this.computedRotation;var B=z[0],C=z[1],v=z[2],G=z[3];z=B*F+G*g+C*E-v*t;var I=C*F+G*t+v*g-B*E,J=v*F+G*E+B*t-C*g;B=G*F-B*
g-C*t-v*E;q&&(g=u,t=w,E=x,q=Math.sin(q)/n(g,t,E),g*=q,t*=q,E*=q,F=Math.cos(f),z=z*F+B*g+I*E-J*t,I=I*F+B*t+J*g-z*E,J=J*F+B*E+z*t-I*g,B=B*F-z*g-I*t-J*E);f=m(z,I,J,B);1E-6<f?(z/=f,I/=f,J/=f,B/=f):(z=I=J=0,B=1);this.rotation.set(c,z,I,J,B)};b.lookAt=function(c,f,g,q){this.recalcMatrix(c);g=g||this.computedCenter;f=f||this.computedEye;q=q||this.computedUp;var t=this.computedMatrix;d(t,f,g,q);q=this.computedRotation;k(q,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]);p(q,q);this.rotation.set(c,q[0],q[1],
q[2],q[3]);for(q=t=0;3>q;++q)t+=Math.pow(g[q]-f[q],2);this.radius.set(c,.5*Math.log(Math.max(t,1E-6)));this.center.set(c,g[0],g[1],g[2])};b.translate=function(c,f,g,q){this.center.move(c,f||0,g||0,q||0)};b.setMatrix=function(c,f){var g=this.computedRotation;k(g,f[0],f[1],f[2],f[4],f[5],f[6],f[8],f[9],f[10]);p(g,g);this.rotation.set(c,g[0],g[1],g[2],g[3]);g=this.computedMatrix;l(g,f);var q=g[15];if(1E-6<Math.abs(q)){f=g[12]/q;var t=g[13]/q;q=g[14]/q;this.recalcMatrix(c);var u=Math.exp(this.computedRadius[0]);
this.center.set(c,f-g[2]*u,t-g[6]*u,q-g[10]*u)}else this.center.idle(c);this.radius.idle(c)};b.setDistance=function(c,f){0<f&&this.radius.set(c,Math.log(f))};b.setDistanceLimits=function(c,f){c=0<c?Math.log(c):-Infinity;f=0<f?Math.log(f):Infinity;f=Math.max(f,c);this.radius.bounds[0][0]=c;this.radius.bounds[1][0]=f};b.getDistanceLimits=function(c){var f=this.radius.bounds;return c?(c[0]=Math.exp(f[0][0]),c[1]=Math.exp(f[1][0]),c):[Math.exp(f[0][0]),Math.exp(f[1][0])]};b.toJSON=function(){this.recalcMatrix(this.lastT());
return{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}};b.fromJSON=function(c){var f=this.lastT(),g=c.center;g&&this.center.set(f,g[0],g[1],g[2]);(g=c.rotation)&&this.rotation.set(f,g[0],g[1],g[2],g[3]);(g=c.distance)&&0<g&&this.radius.set(f,Math.log(g));this.setDistanceLimits(c.zoomMin,c.zoomMax)}},{"./lib/quatFromFrame":474,"filtered-vector":242,"gl-mat4/fromQuat":275,
"gl-mat4/invert":278,"gl-mat4/lookAt":279}],476:[function(b,y,D){var n=b("repeat-string");y.exports=function(m,p,h){return n("undefined"!==typeof h?h+"":" ",p)+m}},{"repeat-string":513}],477:[function(b,y,D){function n(h,a){function d(c,f,g){g=[];for(var q,t=0;q=k.exec(c);){if(1E4<t++)throw Error("Circular references in parenthesis");g.push(c.slice(0,q.index));g.push(d(f[q[1]],f));c=c.slice(q.index+q[0].length)}g.push(c);return g}if("string"!==typeof h)return[h];var e=[h];"string"===typeof a||Array.isArray(a)?
a={brackets:a}:a||(a={});h=a.brackets?Array.isArray(a.brackets)?a.brackets:[a.brackets]:["{}","[]","()"];var l=a.escape||"___";a=!!a.flat;h.forEach(function(c){function f(t,u,w){t=e.push(t.slice(c[0].length,-c[1].length))-1;q.push(t);return l+t+l}var g=new RegExp(["\\",c[0],"[^\\",c[0],"\\",c[1],"]*\\",c[1]].join("")),q=[];e.forEach(function(t,u){for(var w,x=0;t!=w;)if(w=t,t=t.replace(g,f),1E4<x++)throw Error("References have circular dependency. Please, check them.");e[u]=t});q=q.reverse();e=e.map(function(t){q.forEach(function(u){t=
t.replace(new RegExp("(\\"+l+u+"\\"+l+")","g"),c[0]+"$1"+c[1])});return t})});var k=new RegExp("\\"+l+"([0-9]+)\\"+l);return a?e:d(e[0],e)}function m(h,a){function d(c,f){if(null==h[f])throw Error("Reference "+f+"is undefined");return h[f]}if(a&&a.flat){var e=a&&a.escape||"___";a=h[0];if(!a)return"";e=new RegExp("\\"+e+"([0-9]+)\\"+e);for(var l=0;a!=k;){if(1E4<l++)throw Error("Circular references in "+h);var k=a;a=a.replace(e,d)}return a}return h.reduce(function q(f,g){Array.isArray(g)&&(g=g.reduce(q,
""));return f+g},"")}function p(h,a){return Array.isArray(h)?m(h,a):n(h,a)}p.parse=n;p.stringify=m;y.exports=p},{}],478:[function(b,y,D){var n=b("pick-by-alias");y.exports=function(m){1<arguments.length&&(m=arguments);"string"===typeof m?m=m.split(/\s/).map(parseFloat):"number"===typeof m&&(m=[m]);if(m.length&&"number"===typeof m[0])var p=1===m.length?{width:m[0],height:m[0],x:0,y:0}:2===m.length?{width:m[0],height:m[1],x:0,y:0}:{x:m[0],y:m[1],width:m[2]-m[0]||0,height:m[3]-m[1]||0};else m&&(m=n(m,
{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),p={x:m.left||0,y:m.top||0},p.width=null==m.width?m.right?m.right-p.x:0:m.width,p.height=null==m.height?m.bottom?m.bottom-p.y:0:m.height);return p}},{"pick-by-alias":485}],479:[function(b,y,D){y.exports=function(h){var a=[];h.replace(m,function(d,e,l){d=e.toLowerCase();l=(l=l.match(p))?l.map(Number):[];"m"==d&&2<l.length&&(a.push([e].concat(l.splice(0,2))),d="l",
e="m"==e?"l":"L");for(;;){if(l.length==n[d])return l.unshift(e),a.push(l);if(l.length<n[d])throw Error("malformed path data");a.push([e].concat(l.splice(0,n[d])))}});return a};var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},m=/([astvzqmhlc])([^astvzqmhlc]*)/ig,p=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},{}],480:[function(b,y,D){y.exports=function(n,m){m||(m=[0,""]);n=String(n);var p=parseFloat(n,10);m[0]=p;m[1]=n.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return m}},{}],481:[function(b,y,D){(function(n){function m(a,
d){for(var e=0,l=a.length-1;0<=l;l--){var k=a[l];"."===k?a.splice(l,1):".."===k?(a.splice(l,1),e++):e&&(a.splice(l,1),e--)}if(d)for(;e--;e)a.unshift("..");return a}function p(a,d){if(a.filter)return a.filter(d);for(var e=[],l=0;l<a.length;l++)d(a[l],l,a)&&e.push(a[l]);return e}D.resolve=function(){for(var a="",d=!1,e=arguments.length-1;-1<=e&&!d;e--){var l=0<=e?arguments[e]:n.cwd();if("string"!==typeof l)throw new TypeError("Arguments to path.resolve must be strings");l&&(a=l+"/"+a,d="/"===l.charAt(0))}a=
m(p(a.split("/"),function(k){return!!k}),!d).join("/");return(d?"/":"")+a||"."};D.normalize=function(a){var d=D.isAbsolute(a),e="/"===h(a,-1);(a=m(p(a.split("/"),function(l){return!!l}),!d).join("/"))||d||(a=".");a&&e&&(a+="/");return(d?"/":"")+a};D.isAbsolute=function(a){return"/"===a.charAt(0)};D.join=function(){var a=Array.prototype.slice.call(arguments,0);return D.normalize(p(a,function(d,e){if("string"!==typeof d)throw new TypeError("Arguments to path.join must be strings");return d}).join("/"))};
D.relative=function(a,d){function e(f){for(var g=0;g<f.length&&""===f[g];g++);for(var q=f.length-1;0<=q&&""===f[q];q--);return g>q?[]:f.slice(g,q-g+1)}a=D.resolve(a).substr(1);d=D.resolve(d).substr(1);a=e(a.split("/"));d=e(d.split("/"));for(var l=Math.min(a.length,d.length),k=l,c=0;c<l;c++)if(a[c]!==d[c]){k=c;break}l=[];for(c=k;c<a.length;c++)l.push("..");l=l.concat(d.slice(k));return l.join("/")};D.sep="/";D.delimiter=":";D.dirname=function(a){"string"!==typeof a&&(a+="");if(0===a.length)return".";
for(var d=a.charCodeAt(0),e=47===d,l=-1,k=!0,c=a.length-1;1<=c;--c)if(d=a.charCodeAt(c),47===d){if(!k){l=c;break}}else k=!1;return-1===l?e?"/":".":e&&1===l?"/":a.slice(0,l)};D.basename=function(a,d){"string"!==typeof a&&(a+="");var e=0,l=-1,k=!0,c;for(c=a.length-1;0<=c;--c)if(47===a.charCodeAt(c)){if(!k){e=c+1;break}}else-1===l&&(k=!1,l=c+1);a=-1===l?"":a.slice(e,l);d&&a.substr(-1*d.length)===d&&(a=a.substr(0,a.length-d.length));return a};D.extname=function(a){"string"!==typeof a&&(a+="");for(var d=
-1,e=0,l=-1,k=!0,c=0,f=a.length-1;0<=f;--f){var g=a.charCodeAt(f);if(47===g){if(!k){e=f+1;break}}else-1===l&&(k=!1,l=f+1),46===g?-1===d?d=f:1!==c&&(c=1):-1!==d&&(c=-1)}return-1===d||-1===l||0===c||1===c&&d===l-1&&d===e+1?"":a.slice(d,l)};var h="b"==="ab".substr(-1)?function(a,d,e){return a.substr(d,e)}:function(a,d,e){0>d&&(d=a.length+d);return a.substr(d,e)}}).call(this,b("_process"))},{_process:500}],482:[function(b,y,D){(function(n){(function(){if("undefined"!==typeof performance&&null!==performance&&
performance.now)y.exports=function(){return performance.now()};else if("undefined"!==typeof n&&null!==n&&n.hrtime){y.exports=function(){return(p()-d)/1E6};var m=n.hrtime;var p=function(){var l=m();return 1E9*l[0]+l[1]};var h=p();var a=1E9*n.uptime();var d=h-a}else if(Date.now){y.exports=function(){return Date.now()-e};var e=Date.now()}else y.exports=function(){return(new Date).getTime()-e},e=(new Date).getTime()}).call(this)}).call(this,b("_process"))},{_process:500}],483:[function(b,y,D){y.exports=
function(p){var h=p.length;if(h<n)for(var a=1,d=0;d<h;++d)for(var e=0;e<d;++e)if(p[d]<p[e])a=-a;else{if(p[d]===p[e])return 0}else{var l=m.mallocUint8(h);for(d=0;d<h;++d)l[d]=0;a=1;for(d=0;d<h;++d)if(!l[d]){var k=1;l[d]=1;for(e=p[d];e!==d;e=p[e]){if(l[e])return m.freeUint8(l),0;k+=1;l[e]=1}k&1||(a=-a)}m.freeUint8(l)}return a};var n=32,m=b("typedarray-pool")},{"typedarray-pool":567}],484:[function(b,y,D){var n=b("typedarray-pool"),m=b("invert-permutation");D.rank=function(p){var h=p.length;switch(h){case 0:case 1:return 0;
case 2:return p[1]}var a=n.mallocUint32(h),d=n.mallocUint32(h),e=0,l;m(p,d);for(l=0;l<h;++l)a[l]=p[l];for(l=h-1;0<l;--l)h=d[l],p=a[l],a[l]=a[h],a[h]=p,d[l]=d[p],d[p]=h,e=(e+p)*l;n.freeUint32(d);n.freeUint32(a);return e};D.unrank=function(p,h,a){switch(p){case 0:return a?a:[];case 1:return a?(a[0]=0,a):[0];case 2:return a?(h?(a[0]=0,a[1]=1):(a[0]=1,a[1]=0),a):h?[0,1]:[1,0]}a=a||Array(p);var d,e=1;a[0]=0;for(d=1;d<p;++d)a[d]=d,e=e*d|0;for(d=p-1;0<d;--d){p=h/e|0;h=h-p*e|0;e=e/d|0;var l=a[d]|0;a[d]=a[p]|
0;a[p]=l|0}return a}},{"invert-permutation":436,"typedarray-pool":567}],485:[function(b,y,D){function n(p){if(m[p])return m[p];"string"===typeof p&&(p=m[p]=p.split(/\s*,\s*|\s+/));return p}y.exports=function(p,h,a){var d={},e,l;"string"===typeof h&&(h=n(h));if(Array.isArray(h)){var k={};for(l=0;l<h.length;l++)k[h[l]]=!0;h=k}for(e in h)h[e]=n(h[e]);k={};for(e in h){var c=h[e];if(Array.isArray(c))for(l=0;l<c.length;l++){var f=c[l];a&&(k[f]=!0);if(f in p){d[e]=p[f];if(a)for(;l<c.length;l++)k[c[l]]=!0;
break}}else e in p&&(h[e]&&(d[e]=p[e]),a&&(k[e]=!0))}if(a)for(e in p)k[e]||(d[e]=p[e]);return d};var m={}},{}],486:[function(b,y,D){y.exports=function(m,p){function h(q,t){t=k[t][q[t]];t.splice(t.indexOf(q),1)}function a(q,t,u){var w;for(w=0;2>w;++w)if(0<k[w][t].length){var x=k[w][t][0];var E=w;break}w=x[E^1];for(var F=0;2>F;++F)for(var z=k[F][t],B=0;B<z.length;++B){var C=z[B],v=C[F^1];0<n(p[q],p[t],p[w],p[v])&&(x=C,w=v,E=F)}if(u)return w;x&&h(x,E);return w}function d(q,t){var u=k[t][q][0],w=[q];
h(u,t);for(t=u[t^1];;){for(;t!==q;)w.push(t),t=a(w[w.length-2],t,!1);if(0===k[0][q].length+k[1][q].length)break;t=w[w.length-1];u=q;var x=w[1],E=a(t,u,!0);if(0>n(p[t],p[u],p[x],p[E]))break;w.push(q);t=a(t,u)}return w}for(var e=p.length|0,l=m.length,k=[Array(e),Array(e)],c=0;c<e;++c)k[0][c]=[],k[1][c]=[];for(c=0;c<l;++c){var f=m[c];k[0][f[0]].push(f);k[1][f[1]].push(f)}m=[];for(c=0;c<e;++c)0===k[0][c].length+k[1][c].length&&m.push([c]);for(c=0;c<e;++c)for(l=0;2>l;++l){for(f=[];0<k[l][c].length;){var g=
d(c,l);g[1]===g[g.length-1]?f.push.apply(f,g):(0<f.length&&m.push(f),f=g)}0<f.length&&m.push(f)}return m};var n=b("compare-angle")},{"compare-angle":132}],487:[function(b,y,D){y.exports=function(m,p){for(var h=n(m,p.length),a=Array(p.length),d=Array(p.length),e=[],l=0;l<p.length;++l){var k=h[l].length;d[l]=k;a[l]=!0;1>=k&&e.push(l)}for(;0<e.length;)for(k=e.pop(),a[k]=!1,k=h[k],l=0;l<k.length;++l){var c=k[l];0===--d[c]&&e.push(c)}h=Array(p.length);d=[];for(l=0;l<p.length;++l)a[l]?(k=d.length,h[l]=
k,d.push(p[l])):h[l]=-1;p=[];for(l=0;l<m.length;++l)e=m[l],a[e[0]]&&a[e[1]]&&p.push([h[e[0]],h[e[1]]]);return[p,d]};var n=b("edges-to-adjacency-list")},{"edges-to-adjacency-list":178}],488:[function(b,y,D){function n(c,f){for(var g=Array(c),q=0;q<c;++q)g[q]=f;return g}function m(c){for(var f=Array(c),g=0;g<c;++g)f[g]=[];return f}y.exports=function(c,f){function g(N){for(var H=N.length,L=0;L<H;++L)if(!J[N[L]])return!1;return!0}var q=k(c,f);c=q[0];f=q[1];for(var t=f.length,u=p(c,f.length),w=0;w<t;++w)if(1===
u[w].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");c=h(c,f);c=c.filter(function(N){for(var H=N.length,L=[0],P=0;P<H;++P){var Q=f[N[P]],S=f[N[(P+1)%H]],O=d(-Q[0],Q[1]),U=d(-Q[0],S[1]);Q=d(S[0],Q[1]);S=d(S[0],S[1]);L=e(L,e(e(O,U),e(Q,S)))}return 0<L[L.length-1]});q=c.length;var x=Array(q),E=Array(q);for(w=0;w<q;++w){x[w]=w;var F=Array(q);u=c[w].map(function(N){return f[N]});var z=a([u]),B=0,C=0;a:for(;C<q;++C)if(F[C]=0,w!==C){u=c[C];for(var v=u.length,G=0;G<v;++G){var I=z(f[u[G]]);
if(0!==I){0>I&&(F[C]=1,B+=1);continue a}}F[C]=1;B+=1}E[w]=[B,w,F]}E.sort(function(N,H){return H[0]-N[0]});for(w=0;w<q;++w)for(F=E[w],u=F[1],v=F[2],C=0;C<q;++C)v[C]&&(x[C]=u);E=m(q);for(w=0;w<q;++w)E[w].push(x[w]),E[x[w]].push(w);F={};var J=n(t,!1);for(w=0;w<q;++w)for(u=c[w],v=u.length,C=0;C<v;++C)t=u[C],z=u[(C+1)%v],B=Math.min(t,z)+":"+Math.max(t,z),B in F?(B=F[B],E[B].push(w),E[w].push(B),J[t]=J[z]=!0):F[B]=w;C=[];t=n(q,-1);for(w=0;w<q;++w)x[w]!==w||g(c[w])?t[w]=-1:(C.push(w),t[w]=0);for(q=[];0<
C.length;){w=C.pop();x=E[w];l(x,function(N,H){return N-H});v=x.length;F=t[w];if(0===F){u=c[w];var K=[u]}for(w=0;w<v;++w)u=x[w],0<=t[u]||(t[u]=F^1,C.push(u),0===F&&(u=c[u],g(u)||(u.reverse(),K.push(u))));0===F&&q.push(K)}return q};var p=b("edges-to-adjacency-list"),h=b("planar-dual"),a=b("point-in-big-polygon"),d=b("two-product"),e=b("robust-sum"),l=b("uniq"),k=b("./lib/trim-leaves")},{"./lib/trim-leaves":487,"edges-to-adjacency-list":178,"planar-dual":486,"point-in-big-polygon":490,"robust-sum":525,
"two-product":554,uniq:569}],489:[function(b,y,D){arguments[4][243][0].apply(D,arguments)},{dup:243}],490:[function(b,y,D){function n(){return!0}function m(g){return function(q,t){return(q=g[q])?!!q.queryPoint(t,n):!1}}function p(g){for(var q={},t=0;t<g.length;++t){var u=g[t],w=u[0][0],x=u[0][1];u=u[1][1];x=[Math.min(x,u),Math.max(x,u)];w in q?q[w].push(x):q[w]=[x]}g={};w=Object.keys(q);for(t=0;t<w.length;++t)g[w[t]]=c(q[w[t]]);return m(g)}function h(g,q){return function(t){var u=f.le(q,t[0]);if(0>
u)return 1;var w=g[u];if(!w)if(0<u&&q[u]===t[0])w=g[u-1];else return 1;for(u=1;w;){var x=w.key,E=l(t,x[0],x[1]);if(x[0][0]<x[1][0])if(0>E)w=w.left;else if(0<E)u=-1,w=w.right;else return 0;else if(0<E)w=w.left;else if(0>E)u=1,w=w.right;else return 0}return u}}function a(g){return 1}function d(g){return function(q){return g(q[0],q[1])?0:1}}function e(g,q){return function(t){return g(t[0],t[1])?0:q(t)}}y.exports=function(g){for(var q=g.length,t=[],u=[],w=0;w<q;++w)for(var x=g[w],E=x.length,F=E-1,z=0;z<
E;F=z++){F=x[F];var B=x[z];F[0]===B[0]?u.push([F,B]):t.push([F,B])}if(0===t.length)return 0===u.length?a:d(p(u));g=k(t);g=h(g.slabs,g.coordinates);return 0===u.length?g:e(p(u),g)};var l=b("robust-orientation")[3],k=b("slab-decomposition"),c=b("interval-tree-1d"),f=b("binary-search-bounds")},{"binary-search-bounds":489,"interval-tree-1d":434,"robust-orientation":520,"slab-decomposition":537}],491:[function(b,y,D){function n(c,f,g){c=k.segments(c);f=k.segments(f);f=k.combine(c,f);g=g(f);return k.polygon(g)}
var m=b("./lib/build-log");D=b("./lib/epsilon");var p=b("./lib/intersecter"),h=b("./lib/segment-chainer"),a=b("./lib/segment-selector"),d=b("./lib/geojson"),e=!1,l=D();var k={buildLog:function(c){!0===c?e=m():!1===c&&(e=!1);return!1===e?!1:e.list},epsilon:function(c){return l.epsilon(c)},segments:function(c){var f=p(!0,l,e);c.regions.forEach(f.addRegion);return{segments:f.calculate(c.inverted),inverted:c.inverted}},combine:function(c,f){return{combined:p(!1,l,e).calculate(c.segments,c.inverted,f.segments,
f.inverted),inverted1:c.inverted,inverted2:f.inverted}},selectUnion:function(c){return{segments:a.union(c.combined,e),inverted:c.inverted1||c.inverted2}},selectIntersect:function(c){return{segments:a.intersect(c.combined,e),inverted:c.inverted1&&c.inverted2}},selectDifference:function(c){return{segments:a.difference(c.combined,e),inverted:c.inverted1&&!c.inverted2}},selectDifferenceRev:function(c){return{segments:a.differenceRev(c.combined,e),inverted:!c.inverted1&&c.inverted2}},selectXor:function(c){return{segments:a.xor(c.combined,
e),inverted:c.inverted1!==c.inverted2}},polygon:function(c){return{regions:h(c.segments,l,e),inverted:c.inverted}},polygonFromGeoJSON:function(c){return d.toPolygon(k,c)},polygonToGeoJSON:function(c){return d.fromPolygon(k,l,c)},union:function(c,f){return n(c,f,k.selectUnion)},intersect:function(c,f){return n(c,f,k.selectIntersect)},difference:function(c,f){return n(c,f,k.selectDifference)},differenceRev:function(c,f){return n(c,f,k.selectDifferenceRev)},xor:function(c,f){return n(c,f,k.selectXor)}};
"object"===typeof window&&(window.PolyBool=k);y.exports=k},{"./lib/build-log":492,"./lib/epsilon":493,"./lib/geojson":494,"./lib/intersecter":495,"./lib/segment-chainer":497,"./lib/segment-selector":498}],492:[function(b,y,D){y.exports=function(){function n(a,d){m.list.push({type:a,data:d?JSON.parse(JSON.stringify(d)):void 0});return m}var m,p=0,h=!1;return m={list:[],segmentId:function(){return p++},checkIntersection:function(a,d){return n("check",{seg1:a,seg2:d})},segmentChop:function(a,d){n("div_seg",
{seg:a,pt:d});return n("chop",{seg:a,pt:d})},statusRemove:function(a){return n("pop_seg",{seg:a})},segmentUpdate:function(a){return n("seg_update",{seg:a})},segmentNew:function(a,d){return n("new_seg",{seg:a,primary:d})},segmentRemove:function(a){return n("rem_seg",{seg:a})},tempStatus:function(a,d,e){return n("temp_status",{seg:a,above:d,below:e})},rewind:function(a){return n("rewind",{seg:a})},status:function(a,d,e){return n("status",{seg:a,above:d,below:e})},vert:function(a){if(a===h)return m;
h=a;return n("vert",{x:a})},log:function(a){"string"!==typeof a&&(a=JSON.stringify(a,!1,"  "));return n("log",{txt:a})},reset:function(){return n("reset")},selected:function(a){return n("selected",{segs:a})},chainStart:function(a){return n("chain_start",{seg:a})},chainRemoveHead:function(a,d){return n("chain_rem_head",{index:a,pt:d})},chainRemoveTail:function(a,d){return n("chain_rem_tail",{index:a,pt:d})},chainNew:function(a,d){return n("chain_new",{pt1:a,pt2:d})},chainMatch:function(a){return n("chain_match",
{index:a})},chainClose:function(a){return n("chain_close",{index:a})},chainAddHead:function(a,d){return n("chain_add_head",{index:a,pt:d})},chainAddTail:function(a,d){return n("chain_add_tail",{index:a,pt:d})},chainConnect:function(a,d){return n("chain_con",{index1:a,index2:d})},chainReverse:function(a){return n("chain_rev",{index:a})},chainJoin:function(a,d){return n("chain_join",{index1:a,index2:d})},done:function(){return n("done")}}}},{}],493:[function(b,y,D){y.exports=function(n){"number"!==
typeof n&&(n=1E-10);var m={epsilon:function(p){"number"===typeof p&&(n=p);return n},pointAboveOrOnLine:function(p,h,a){var d=h[0];h=h[1];return(a[0]-d)*(p[1]-h)-(a[1]-h)*(p[0]-d)>=-n},pointBetween:function(p,h,a){var d=a[0]-h[0];a=a[1]-h[1];p=(p[0]-h[0])*d+(p[1]-h[1])*a;return p<n||p-(d*d+a*a)>-n?!1:!0},pointsSameX:function(p,h){return Math.abs(p[0]-h[0])<n},pointsSameY:function(p,h){return Math.abs(p[1]-h[1])<n},pointsSame:function(p,h){return m.pointsSameX(p,h)&&m.pointsSameY(p,h)},pointsCompare:function(p,
h){return m.pointsSameX(p,h)?m.pointsSameY(p,h)?0:p[1]<h[1]?-1:1:p[0]<h[0]?-1:1},pointsCollinear:function(p,h,a){return Math.abs((p[0]-h[0])*(h[1]-a[1])-(h[0]-a[0])*(p[1]-h[1]))<n},linesIntersect:function(p,h,a,d){var e=h[0]-p[0];h=h[1]-p[1];var l=d[0]-a[0],k=d[1]-a[1];d=e*k-h*l;if(Math.abs(d)<n)return!1;var c=p[0]-a[0];a=p[1]-a[1];l=(l*a-k*c)/d;a=(e*a-h*c)/d;p={alongA:0,alongB:0,pt:[p[0]+l*e,p[1]+l*h]};p.alongA=l<=-n?-2:l<n?-1:l-1<=-n?0:l-1<n?1:2;p.alongB=a<=-n?-2:a<n?-1:a-1<=-n?0:a-1<n?1:2;return p},
pointInsideRegion:function(p,h){var a=p[0];p=p[1];for(var d=h[h.length-1][0],e=h[h.length-1][1],l=!1,k=0;k<h.length;k++){var c=h[k][0],f=h[k][1];f-p>n!=e-p>n&&(d-c)*(p-f)/(e-f)+c-a>n&&(l=!l);d=c;e=f}return l}};return m}},{}],494:[function(b,y,D){y.exports={toPolygon:function(n,m){function p(d){function e(c){c=c.slice(0,c.length-1);return n.segments({inverted:!1,regions:[c]})}if(0>=d.length)return n.segments({inverted:!1,regions:[]});for(var l=e(d[0]),k=1;k<d.length;k++)l=n.selectDifference(n.combine(l,
e(d[k])));return l}if("Polygon"===m.type)return n.polygon(p(m.coordinates));if("MultiPolygon"===m.type){for(var h=n.segments({inverted:!1,regions:[]}),a=0;a<m.coordinates.length;a++)h=n.selectUnion(n.combine(h,p(m.coordinates[a])));return n.polygon(h)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");},fromPolygon:function(n,m,p){function h(f,g){return m.pointInsideRegion([.5*(f[0][0]+f[1][0]),.5*(f[0][1]+f[1][1])],g)}function a(f,g){for(var q=0;q<f.children.length;q++){var t=
f.children[q];if(h(g,t.region)){a(t,g);return}}var u={region:g,children:[]};for(q=0;q<f.children.length;q++)t=f.children[q],h(t.region,g)&&(u.children.push(t),f.children.splice(q,1),q--);f.children.push(u)}function d(f,g){for(var q=0,t=f[f.length-1][0],u=f[f.length-1][1],w=[],x=0;x<f.length;x++){var E=f[x][0],F=f[x][1];w.push([E,F]);q+=F*t-E*u;t=E;u=F}0>q!==g&&w.reverse();w.push([w[0][0],w[0][1]]);return w}function e(f){var g=[d(f.region,!1)];c.push(g);for(var q=0;q<f.children.length;q++){var t=g,
u=t.push;var w=f.children[q];for(var x=0;x<w.children.length;x++)e(w.children[x]);w=d(w.region,!0);u.call(t,w)}}p=n.polygon(n.segments(p));n={region:null,children:[]};for(var l=0;l<p.regions.length;l++){var k=p.regions[l];3>k.length||a(n,k)}var c=[];for(l=0;l<n.children.length;l++)e(n.children[l]);return 0>=c.length?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}}},{}],495:[function(b,y,D){var n=b("./linked-list");y.exports=function(m,
p,h){function a(f,g,q){return{id:h?h.segmentId():-1,start:f,end:g,myFill:{above:q.myFill.above,below:q.myFill.below},otherFill:null}}function d(f,g){c.insertBefore(f,function(q){var t=f.isStart;var u=q.isStart,w=q.pt;q=q.other.pt;var x=p.pointsCompare(f.pt,w);t=0!==x?x:p.pointsSame(g,q)?0:t!==u?t?1:-1:p.pointAboveOrOnLine(g,u?w:q,u?q:w)?1:-1;return 0>t})}function e(f,g){var q=n.node({isStart:!0,pt:f.start,seg:f,primary:g,other:null,status:null});d(q,f.end);f=n.node({isStart:!1,pt:f.end,seg:f,primary:g,
other:q,status:null});q.other=f;d(f,q.pt);return q}function l(f,g){var q=a(g,f.seg.end,f.seg);h&&h.segmentChop(f.seg,g);f.other.remove();f.seg.end=g;f.other.pt=g;d(f.other,f.pt);return e(q,f.primary)}function k(f,g){function q(v){return u.findTransition(function(G){var I=G.ev;G=v.seg.start;var J=v.seg.end,K=I.seg.start;I=I.seg.end;G=p.pointsCollinear(G,K,I)?p.pointsCollinear(J,K,I)?1:p.pointAboveOrOnLine(J,K,I)?1:-1:p.pointAboveOrOnLine(G,K,I)?1:-1;return 0<G})}function t(v,G){var I=v.seg,J=G.seg,
K=I.start,N=I.end,H=J.start,L=J.end;h&&h.checkIntersection(I,J);I=p.linesIntersect(K,N,H,L);if(!1===I){if(!p.pointsCollinear(K,N,H)||p.pointsSame(K,L)||p.pointsSame(N,H))return!1;I=p.pointsSame(K,H);J=p.pointsSame(N,L);if(I&&J)return G;var P=!I&&p.pointBetween(K,H,L);H=!J&&p.pointBetween(N,H,L);if(I)return H?l(G,N):l(v,L),G;P&&(J||(H?l(G,N):l(v,L)),l(G,K))}else 0===I.alongA&&(-1===I.alongB?l(v,H):0===I.alongB?l(v,I.pt):1===I.alongB&&l(v,L)),0===I.alongB&&(-1===I.alongA?l(G,K):0===I.alongA?l(G,I.pt):
1===I.alongA&&l(G,N));return!1}for(var u=n.create(),w=[];!c.isEmpty();){var x=c.getHead();h&&h.vert(x.pt[0]);if(x.isStart){h&&h.segmentNew(x.seg,x.primary);var E=q(x),F=E.before?E.before.ev:null,z=E.after?E.after.ev:null;h&&h.tempStatus(x.seg,F?F.seg:!1,z?z.seg:!1);var B=function(){if(F){var v=t(x,F);if(v)return v}return z?t(x,z):!1}();if(B){if(m){var C;if(C=null===x.seg.myFill.below?!0:x.seg.myFill.above!==x.seg.myFill.below)B.seg.myFill.above=!B.seg.myFill.above}else B.seg.otherFill=x.seg.myFill;
h&&h.segmentUpdate(B.seg);x.other.remove();x.remove()}if(c.getHead()!==x){h&&h.rewind(x.seg);continue}m?(C=null===x.seg.myFill.below?!0:x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=z?z.seg.myFill.above:f,x.seg.myFill.above=C?!x.seg.myFill.below:x.seg.myFill.below):null===x.seg.otherFill&&(B=z?x.primary===z.primary?z.seg.otherFill.above:z.seg.myFill.above:x.primary?g:f,x.seg.otherFill={above:B,below:B});h&&h.status(x.seg,F?F.seg:!1,z?z.seg:!1);x.other.status=E.insert(n.node({ev:x}))}else{E=
x.status;if(null===E)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");u.exists(E.prev)&&u.exists(E.next)&&t(E.prev.ev,E.next.ev);h&&h.statusRemove(E.ev.seg);E.remove();x.primary||(E=x.seg.myFill,x.seg.myFill=x.seg.otherFill,x.seg.otherFill=E);w.push(x.seg)}c.getHead().remove()}h&&h.done();return w}var c=n.create();return m?{addRegion:function(f){for(var g,q=f[f.length-1],t=0;t<f.length;t++){g=q;q=f[t];var u=p.pointsCompare(g,q);if(0!==u){var w=
0>u?g:q;g=0>u?q:g;w={id:h?h.segmentId():-1,start:w,end:g,myFill:{above:null,below:null},otherFill:null};e(w,!0)}}},calculate:function(f){return k(f,!1)}}:{calculate:function(f,g,q,t){f.forEach(function(u){e(a(u.start,u.end,u),!0)});q.forEach(function(u){e(a(u.start,u.end,u),!1)});return k(g,t)}}}},{"./linked-list":496}],496:[function(b,y,D){y.exports={create:function(){var n={root:{root:!0,next:null},exists:function(m){return null===m||m===n.root?!1:!0},isEmpty:function(){return null===n.root.next},
getHead:function(){return n.root.next},insertBefore:function(m,p){for(var h=n.root,a=n.root.next;null!==a;){if(p(a)){m.prev=a.prev;m.next=a;a.prev.next=m;a.prev=m;return}h=a;a=a.next}h.next=m;m.prev=h;m.next=null},findTransition:function(m){for(var p=n.root,h=n.root.next;null!==h&&!m(h);)p=h,h=h.next;return{before:p===n.root?null:p,after:h,insert:function(a){a.prev=p;a.next=h;p.next=a;null!==h&&(h.prev=a);return a}}}};return n},node:function(n){n.prev=null;n.next=null;n.remove=function(){if(n.prev.next=
n.next)n.next.prev=n.prev;n.prev=null;n.next=null};return n}}},{}],497:[function(b,y,D){y.exports=function(n,m,p){var h=[],a=[];n.forEach(function(d){function e(z,B,C){t.index=z;t.matches_head=B;t.matches_pt1=C;if(t===g)return t=q,!1;t=null;return!0}function l(z){p&&p.chainReverse(z);h[z].reverse()}function k(z,B){var C=h[z],v=h[B],G=C[C.length-1],I=C[C.length-2],J=v[0],K=v[1];m.pointsCollinear(I,G,J)&&(p&&p.chainRemoveTail(z,G),C.pop(),G=I);m.pointsCollinear(G,J,K)&&(p&&p.chainRemoveHead(B,J),v.shift());
p&&p.chainJoin(z,B);h[z]=C.concat(v);h.splice(B,1)}var c=d.start,f=d.end;if(m.pointsSame(c,f))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{p&&p.chainStart(d);for(var g={index:0,matches_head:!1,matches_pt1:!1},q={index:0,matches_head:!1,matches_pt1:!1},t=g,u=0;u<h.length;u++){d=h[u];var w=d[0];d=d[d.length-1];if(m.pointsSame(w,c)){if(e(u,!0,!0))break}else if(m.pointsSame(w,f)){if(e(u,!0,!1))break}else if(m.pointsSame(d,c)){if(e(u,
!1,!0))break}else if(m.pointsSame(d,f)&&e(u,!1,!1))break}if(t===g)h.push([c,f]),p&&p.chainNew(c,f);else if(t===q){p&&p.chainMatch(g.index);u=g.index;c=g.matches_pt1?f:c;f=g.matches_head;d=h[u];w=f?d[0]:d[d.length-1];var x=f?d[1]:d[d.length-2],E=f?d[d.length-1]:d[0],F=f?d[d.length-2]:d[1];m.pointsCollinear(x,w,c)&&(f?(p&&p.chainRemoveHead(g.index,c),d.shift()):(p&&p.chainRemoveTail(g.index,c),d.pop()),w=x);m.pointsSame(E,c)?(h.splice(u,1),m.pointsCollinear(F,E,w)&&(f?(p&&p.chainRemoveTail(g.index,
w),d.pop()):(p&&p.chainRemoveHead(g.index,w),d.shift())),p&&p.chainClose(g.index),a.push(d)):f?(p&&p.chainAddHead(g.index,c),d.unshift(c)):(p&&p.chainAddTail(g.index,c),d.push(c))}else d=g.index,u=q.index,p&&p.chainConnect(d,u),c=h[d].length<h[u].length,g.matches_head?q.matches_head?c?(l(d),k(d,u)):(l(u),k(u,d)):k(u,d):q.matches_head?k(d,u):c?(l(d),k(u,d)):(l(u),k(d,u))}});return a}},{}],498:[function(b,y,D){function n(m,p,h){var a=[];m.forEach(function(d){var e=(d.myFill.above?8:0)+(d.myFill.below?
4:0)+(d.otherFill&&d.otherFill.above?2:0)+(d.otherFill&&d.otherFill.below?1:0);0!==p[e]&&a.push({id:h?h.segmentId():-1,start:d.start,end:d.end,myFill:{above:1===p[e],below:2===p[e]},otherFill:null})});h&&h.selected(a);return a}y.exports={union:function(m,p){return n(m,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],p)},intersect:function(m,p){return n(m,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],p)},difference:function(m,p){return n(m,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],p)},differenceRev:function(m,p){return n(m,[0,2,1,0,
0,0,1,1,0,2,0,2,0,0,0,0],p)},xor:function(m,p){return n(m,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],p)}}},{}],499:[function(b,y,D){var n=new Float64Array(4),m=new Float64Array(4),p=new Float64Array(4);y.exports=function(h,a,d,e,l){n.length<e.length&&(n=new Float64Array(e.length),m=new Float64Array(e.length),p=new Float64Array(e.length));for(var k=0;k<e.length;++k)n[k]=h[k]-e[k],m[k]=a[k]-h[k],p[k]=d[k]-h[k];var c=0,f=0,g=0,q=0,t=0,u=0;for(k=0;k<e.length;++k){var w=m[k],x=p[k],E=n[k];c+=w*w;f+=w*x;g+=x*x;
q+=E*w;t+=E*x;u+=E*E}k=Math.abs(c*g-f*f);w=f*t-g*q;x=f*q-c*t;w+x<=k?0>w?0>x?0>q?(x=0,-q>=c?(w=1,c=c+2*q+u):(w=-q/c,c=q*w+u)):(w=0,0<=t?(x=0,c=u):-t>=g?(x=1,c=g+2*t+u):(x=-t/g,c=t*x+u)):(w=0,0<=t?(x=0,c=u):-t>=g?(x=1,c=g+2*t+u):(x=-t/g,c=t*x+u)):0>x?(x=0,0<=q?(w=0,c=u):-q>=c?(w=1,c=c+2*q+u):(w=-q/c,c=q*w+u)):(k=1/k,w*=k,x*=k,c=w*(c*w+f*x+2*q)+x*(f*w+g*x+2*t)+u):0>w?(w=f+q,k=g+t,k>w?(k-=w,w=c-2*f+g,k>=w?(w=1,x=0,c=c+2*q+u):(w=k/w,x=1-w,c=w*(c*w+f*x+2*q)+x*(f*w+g*x+2*t)+u)):(w=0,0>=k?(x=1,c=g+2*t+u):
0<=t?(x=0,c=u):(x=-t/g,c=t*x+u))):0>x?(w=f+t,k=c+q,k>w?(k-=w,w=c-2*f+g,k>=w?(x=1,w=0,c=g+2*t+u):(x=k/w,w=1-x,c=w*(c*w+f*x+2*q)+x*(f*w+g*x+2*t)+u)):(x=0,0>=k?(w=1,c=c+2*q+u):0<=q?(w=0,c=u):(w=-q/c,c=q*w+u))):(k=g+t-f-q,0>=k?(w=0,x=1,c=g+2*t+u):(w=c-2*f+g,k>=w?(w=1,x=0,c=c+2*q+u):(w=k/w,x=1-w,c=w*(c*w+f*x+2*q)+x*(f*w+g*x+2*t)+u)));f=1-w-x;for(k=0;k<e.length;++k)l[k]=f*h[k]+w*a[k]+x*d[k];return 0>c?0:c}},{}],500:[function(b,y,D){function n(){throw Error("setTimeout has not been defined");}function m(){throw Error("clearTimeout has not been defined");
}function p(u){if(k===setTimeout)return setTimeout(u,0);if((k===n||!k)&&setTimeout)return k=setTimeout,setTimeout(u,0);try{return k(u,0)}catch(w){try{return k.call(null,u,0)}catch(x){return k.call(this,u,0)}}}function h(u){if(c===clearTimeout)return clearTimeout(u);if((c===m||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(u);try{return c(u)}catch(w){try{return c.call(null,u)}catch(x){return c.call(this,u)}}}function a(){g&&q&&(g=!1,q.length?f=q.concat(f):t=-1,f.length&&d())}function d(){if(!g){var u=
p(a);g=!0;for(var w=f.length;w;){q=f;for(f=[];++t<w;)q&&q[t].run();t=-1;w=f.length}q=null;g=!1;h(u)}}function e(u,w){this.fun=u;this.array=w}function l(){}b=y.exports={};try{var k="function"===typeof setTimeout?setTimeout:n}catch(u){k=n}try{var c="function"===typeof clearTimeout?clearTimeout:m}catch(u){c=m}var f=[],g=!1,q,t=-1;b.nextTick=function(u){var w=Array(arguments.length-1);if(1<arguments.length)for(var x=1;x<arguments.length;x++)w[x-1]=arguments[x];f.push(new e(u,w));1!==f.length||g||p(d)};
e.prototype.run=function(){this.fun.apply(null,this.array)};b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions={};b.on=l;b.addListener=l;b.once=l;b.off=l;b.removeListener=l;b.removeAllListeners=l;b.emit=l;b.prependListener=l;b.prependOnceListener=l;b.listeners=function(u){return[]};b.binding=function(u){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(u){throw Error("process.chdir is not supported");};b.umask=function(){return 0}},
{}],501:[function(b,y,D){y.exports=b("gl-quat/slerp")},{"gl-quat/slerp":304}],502:[function(b,y,D){(function(n){var m=b("performance-now"),p="undefined"===typeof window?n:window;n=["moz","webkit"];for(var h=p.requestAnimationFrame,a=p.cancelAnimationFrame||p.cancelRequestAnimationFrame,d=0;!h&&d<n.length;d++)h=p[n[d]+"RequestAnimationFrame"],a=p[n[d]+"CancelAnimationFrame"]||p[n[d]+"CancelRequestAnimationFrame"];if(!h||!a){var e=0,l=0,k=[],c=1E3/60;h=function(f){if(0===k.length){var g=m(),q=Math.max(0,
c-(g-e));e=q+g;setTimeout(function(){for(var t=k.slice(0),u=k.length=0;u<t.length;u++)if(!t[u].cancelled)try{t[u].callback(e)}catch(w){setTimeout(function(){throw w;},0)}},Math.round(q))}k.push({handle:++l,callback:f,cancelled:!1});return l};a=function(f){for(var g=0;g<k.length;g++)k[g].handle===f&&(k[g].cancelled=!0)}}y.exports=function(f){return h.call(p,f)};y.exports.cancel=function(){a.apply(p,arguments)};y.exports.polyfill=function(f){f||(f=p);f.requestAnimationFrame=h;f.cancelAnimationFrame=
a}}).call(this,"undefined"!==typeof xa?xa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"performance-now":482}],503:[function(b,y,D){var n=b("big-rat/add");y.exports=function(m,p){for(var h=m.length,a=Array(h),d=0;d<h;++d)a[d]=n(m[d],p[d]);return a}},{"big-rat/add":80}],504:[function(b,y,D){y.exports=function(m){for(var p=Array(m.length),h=0;h<m.length;++h)p[h]=n(m[h]);return p};var n=b("big-rat")},{"big-rat":83}],505:[function(b,y,D){var n=b("big-rat"),m=b("big-rat/mul");
y.exports=function(p,h){h=n(h);for(var a=p.length,d=Array(a),e=0;e<a;++e)d[e]=m(p[e],h);return d}},{"big-rat":83,"big-rat/mul":92}],506:[function(b,y,D){var n=b("big-rat/sub");y.exports=function(m,p){for(var h=m.length,a=Array(h),d=0;d<h;++d)a[d]=n(m[d],p[d]);return a}},{"big-rat/sub":94}],507:[function(b,y,D){var n=b("compare-cell"),m=b("compare-oriented-cell"),p=b("cell-orientation");y.exports=function(h){h.sort(m);for(var a=h.length,d=0,e=0;e<a;++e){var l=h[e],k=p(l);if(0!==k){if(0<d){var c=h[d-
1];if(0===n(l,c)&&p(c)!==k){--d;continue}}h[d++]=l}}h.length=d;return h}},{"cell-orientation":117,"compare-cell":133,"compare-oriented-cell":134}],508:[function(b,y,D){var n=b("array-bounds"),m=b("color-normalize"),p=b("update-diff"),h=b("pick-by-alias"),a=b("object-assign"),d=b("flatten-vertex-data");b=b("to-float32");var e=b.float32,l=b.fract32;y.exports=function(c,f){function g(J){J?u(J):null===J&&w();q()}function q(J){if("number"===typeof J)return t(J);J&&!Array.isArray(J)&&(J=[J]);c._refresh();
F.forEach(function(K,N){K&&(J&&(K.draw=J[N]?!0:!1),K.draw?t(N):K.draw=!0)})}function t(J){"number"===typeof J&&(J=F[J]);null!=J&&J&&J.count&&J.color&&J.opacity&&J.positions&&1<J.positions.length&&(J.scaleRatio=[J.scale[0]*J.viewport.width,J.scale[1]*J.viewport.height],I(J),J.after&&J.after(J))}function u(J){if(J){null!=J.length?"number"===typeof J[0]&&(J=[{positions:J}]):Array.isArray(J)||(J=[J]);var K=0,N=0;g.groups=F=J.map(function(Q,S){var O=F[S];if(Q)"function"===typeof Q?Q={after:Q}:"number"===
typeof Q[0]&&(Q={positions:Q});else return O;Q=h(Q,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"});O||(F[S]=O={id:S,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},Q=a({},E,Q));p(O,Q,[{lineWidth:function(U){return.5*+U},capSize:function(U){return.5*+U},opacity:parseFloat,
errors:function(U){U=d(U);N+=U.length;return U},positions:function(U,X){U=d(U,"float64");X.count=Math.floor(U.length/2);X.bounds=n(U,2);X.offset=K;K+=X.count;return U}},{color:function(U,X){X=X.count;U||(U="transparent");if(!Array.isArray(U)||"number"===typeof U[0]){var da=U;U=Array(X);for(var ea=0;ea<X;ea++)U[ea]=da}if(U.length<X)throw Error("Not enough colors");da=new Uint8Array(4*X);for(ea=0;ea<X;ea++){var ca=m(U[ea],"uint8");da.set(ca,4*ea)}return da},range:function(U,X,da){da=X.bounds;U||(U=
da);X.scale=[1/(U[2]-U[0]),1/(U[3]-U[1])];X.translate=[-U[0],-U[1]];X.scaleFract=l(X.scale);X.translateFract=l(X.translate);return U},viewport:function(U){if(Array.isArray(U))var X={x:U[0],y:U[1],width:U[2]-U[0],height:U[3]-U[1]};else U?(X={x:U.x||U.left||0,y:U.y||U.top||0},X.width=U.right?U.right-X.x:U.w||U.width||0,X.height=U.bottom?U.bottom-X.y:U.h||U.height||0):X={x:0,y:0,width:x.drawingBufferWidth,height:x.drawingBufferHeight};return X}}]);return O});if(K||N){J=F.reduce(function(Q,S,O){return Q+
(S?S.count:0)},0);var H=new Float64Array(2*J),L=new Uint8Array(4*J),P=new Float32Array(4*J);F.forEach(function(Q,S){if(Q){S=Q.positions;var O=Q.offset,U=Q.errors;Q.count&&(L.set(Q.color,4*O),P.set(U,4*O),H.set(S,2*O))}});B(e(H));C(l(H));z(L);v(P)}}}function w(){B.destroy();C.destroy();z.destroy();v.destroy();G.destroy()}"function"===typeof c?(f||(f={}),f.regl=c):f=c;f.length&&(f.positions=f);c=f.regl;if(!c.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");
var x=c._gl,E={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},F=[];var z=c.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)});var B=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var C=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var v=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var G=c.buffer({usage:"static",type:"float",data:k});u(f);var I=c({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor \x3d color / 255.;\n\n\t\t\tvec2 pixelOffset \x3d lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy \x3d -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position \x3d position + dxy;\n\n\t\t\tvec2 pos \x3d (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos +\x3d pixelOffset / viewport.zw;\n\n\t\t\tgl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",
frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor \x3d fragColor;\n\t\t\tgl_FragColor.a *\x3d opacity;\n\t\t}\n\t\t",uniforms:{range:c.prop("range"),lineWidth:c.prop("lineWidth"),capSize:c.prop("capSize"),opacity:c.prop("opacity"),scale:c.prop("scale"),translate:c.prop("translate"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),viewport:function(J,K){return[K.viewport.x,K.viewport.y,J.viewportWidth,
J.viewportHeight]}},attributes:{color:{buffer:z,offset:function(J,K){return 4*K.offset},divisor:1},position:{buffer:B,offset:function(J,K){return 8*K.offset},divisor:1},positionFract:{buffer:C,offset:function(J,K){return 8*K.offset},divisor:1},error:{buffer:v,offset:function(J,K){return 16*K.offset},divisor:1},direction:{buffer:G,stride:24,offset:0},lineOffset:{buffer:G,stride:24,offset:8},capOffset:{buffer:G,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",
alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport"),stencil:!1,instances:c.prop("count"),count:k.length});a(g,{update:u,draw:q,destroy:w,regl:c,gl:x,canvas:x.canvas,groups:F});return g};var k=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,
1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":70,"color-normalize":125,"flatten-vertex-data":244,"object-assign":473,"pick-by-alias":485,
"to-float32":549,"update-diff":571}],509:[function(b,y,D){function n(q,t){if(!(this instanceof n))return new n(q,t);"function"===typeof q?(t||(t={}),t.regl=q):t=q;t.length&&(t.positions=t);q=t.regl;if(!q.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=q._gl;this.regl=q;this.passes=[];this.shaders=n.shaders.has(q)?n.shaders.get(q):n.shaders.set(q,n.createShaders(q)).get(q);this.update(t)}var m=b("color-normalize"),p=b("array-bounds"),
h=b("object-assign"),a=b("glslify"),d=b("pick-by-alias"),e=b("flatten-vertex-data"),l=b("earcut"),k=b("array-normalize");D=b("to-float32");var c=D.float32,f=D.fract32;D=b("es6-weak-map");var g=b("parse-rect");y.exports=n;n.dashMult=2;n.maxPatternLength=256;n.precisionThreshold=3E6;n.maxPoints=1E4;n.maxLines=2048;n.shaders=new D;n.createShaders=function(q){var t=q.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),u={primitive:"triangle strip",instances:q.prop("count"),count:4,offset:0,uniforms:{miterMode:function(E,
F){return"round"===F.join?2:1},miterLimit:q.prop("miterLimit"),scale:q.prop("scale"),scaleFract:q.prop("scaleFract"),translateFract:q.prop("translateFract"),translate:q.prop("translate"),thickness:q.prop("thickness"),dashPattern:q.prop("dashTexture"),opacity:q.prop("opacity"),pixelRatio:q.context("pixelRatio"),id:q.prop("id"),dashSize:q.prop("dashLength"),viewport:function(E,F){return[F.viewport.x,F.viewport.y,E.viewportWidth,E.viewportHeight]},depth:q.prop("depth")},blend:{enable:!0,color:[0,0,0,
0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(E,F){return!F.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:q.prop("viewport")},viewport:q.prop("viewport")},w=q(h({vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineOffset \x3d lineTop * 2. - 1.;\n\n\tvec2 diff \x3d (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent \x3d normalize(diff * scale * viewport.zw);\n\tvec2 normal \x3d vec2(-tangent.y, tangent.x);\n\n\tvec2 position \x3d project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha \x3d 1.;\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:t,divisor:0,
stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:q.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:q.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:q.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},u));try{var x=q(h({cull:{enable:!0,face:"back"},vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD \x3d -.875;\nconst float MIN_DIFF \x3d 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord \x3d aCoord, bCoord \x3d bCoord, prevCoord \x3d prevCoord, nextCoord \x3d nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x \x3d (abs(scale.x) \x3c MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y \x3d (abs(scale.y) \x3c MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio \x3d adjustedScale * viewport.zw;\n\tvec2 normalWidth \x3d thickness / scaleRatio;\n\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineBot \x3d 1. - lineTop;\n\n\tfragColor \x3d (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord \x3d\x3d prevCoord) prevCoord \x3d aCoord + normalize(bCoord - aCoord);\n\tif (bCoord \x3d\x3d nextCoord) nextCoord \x3d bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff \x3d aCoord - prevCoord;\n\tvec2 currDiff \x3d bCoord - aCoord;\n\tvec2 nextDiff \x3d nextCoord - bCoord;\n\n\tvec2 prevTangent \x3d normalize(prevDiff * scaleRatio);\n\tvec2 currTangent \x3d normalize(currDiff * scaleRatio);\n\tvec2 nextTangent \x3d normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal \x3d vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal \x3d vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal \x3d vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection \x3d normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection \x3d normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff \x3d abs(prevTangent - currTangent);\n\tvec2 nextTanDiff \x3d abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) \x3c MIN_DIFF) {\n\t\tstartJoinDirection \x3d currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) \x3c MIN_DIFF) {\n\t\tendJoinDirection \x3d currNormal;\n\t}\n\tif (aCoord \x3d\x3d bCoord) {\n\t\tendJoinDirection \x3d startJoinDirection;\n\t\tcurrNormal \x3d prevNormal;\n\t\tcurrTangent \x3d prevTangent;\n\t}\n\n\ttangent \x3d currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift \x3d dot(currNormal, startJoinDirection);\n\tfloat endJoinShift \x3d dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio \x3d abs(1. / startJoinShift);\n\tfloat endMiterRatio \x3d abs(1. / endJoinShift);\n\n\tvec2 startJoin \x3d startJoinDirection * startMiterRatio;\n\tvec2 endJoin \x3d endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin \x3d sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin \x3d -startTopJoin;\n\n\tendTopJoin \x3d sign(endJoinShift) * endJoin * .5;\n\tendBotJoin \x3d -endTopJoin;\n\n\tvec2 aTopCoord \x3d aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord \x3d bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord \x3d aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord \x3d bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping \x3d distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping \x3d distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse \x3d dot(currTangent, prevTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\tbool nextReverse \x3d dot(currTangent, nextTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord \x3d aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord \x3d aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse \x26\x26 baClipping \x3e 0. \x26\x26 baClipping \x3c length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -\x3d normalWidth * endTopJoin;\n\t\tbTopCoord +\x3d normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord \x3d bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord \x3d bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse \x26\x26 abClipping \x3e 0. \x26\x26 abClipping \x3c length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -\x3d normalWidth * startBotJoin;\n\t\taBotCoord +\x3d normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition \x3d (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition \x3d (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition \x3d (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition \x3d (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position \x3d (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord \x3d aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord \x3d bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position \x3d vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter \x3d step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter \x3d step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha \x3d 1., distToStart, distToEnd;\n\tfloat cutoff \x3d thickness * .5;\n\n\t//bevel miter\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),
attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aColor:{buffer:q.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:q.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:q.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:q.prop("positionBuffer"),stride:8,
offset:24,divisor:1}}},u))}catch(E){x=w}return{fill:q({primitive:"triangle",elements:function(E,F){return F.triangles},offset:0,vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES \x3d 256.;\n\nvoid main() {\n\tfloat depth \x3d (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position \x3d position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n\tfragColor.a *\x3d opacity;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor \x3d fragColor;\n}\n"]),uniforms:{scale:q.prop("scale"),color:q.prop("fill"),scaleFract:q.prop("scaleFract"),translateFract:q.prop("translateFract"),translate:q.prop("translate"),opacity:q.prop("opacity"),pixelRatio:q.context("pixelRatio"),id:q.prop("id"),viewport:function(E,F){return[F.viewport.x,F.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{position:{buffer:q.prop("positionBuffer"),
stride:8,offset:8},positionFract:{buffer:q.prop("positionFractBuffer"),stride:8,offset:8}},blend:u.blend,depth:{enable:!1},scissor:u.scissor,stencil:u.stencil,viewport:u.viewport}),rect:w,miter:x}};n.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};n.prototype.render=function(){for(var q=[],t=arguments.length;t--;)q[t]=arguments[t];q.length&&this.update.apply(this,q);this.draw()};n.prototype.draw=
function(){for(var q=this,t=[],u=arguments.length;u--;)t[u]=arguments[u];(t.length?t:this.passes).forEach(function(w,x){if(w&&Array.isArray(w))return q.draw.apply(q,w);"number"===typeof w&&(w=q.passes[w]);w&&1<w.count&&w.opacity&&(q.regl._refresh(),w.fill&&w.triangles&&2<w.triangles.length&&q.shaders.fill(w),w.thickness&&(w.scale[0]*w.viewport.width>n.precisionThreshold||w.scale[1]*w.viewport.height>n.precisionThreshold?q.shaders.rect(w):"rect"===w.join||!w.join&&(2>=w.thickness||w.count>=n.maxPoints)?
q.shaders.rect(w):q.shaders.miter(w)))});return this};n.prototype.update=function(q){var t=this;if(q){null!=q.length?"number"===typeof q[0]&&(q=[{positions:q}]):Array.isArray(q)||(q=[q]);var u=this.regl,w=this.gl;q.forEach(function(F,z){var B=t.passes[z];if(void 0!==F)if(null===F)t.passes[z]=null;else{"number"===typeof F[0]&&(F={positions:F});F=d(F,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",
miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"});B||(t.passes[z]=B={id:z,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:u.texture({channels:1,
data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:u.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},F=h({},n.defaults,F));null!=F.thickness&&(B.thickness=parseFloat(F.thickness));null!=F.opacity&&(B.opacity=parseFloat(F.opacity));null!=F.miterLimit&&(B.miterLimit=parseFloat(F.miterLimit));null!=F.overlay&&
(B.overlay=!!F.overlay,z<n.maxLines&&(B.depth=2*(n.maxLines-1-z%n.maxLines)/n.maxLines-1));null!=F.join&&(B.join=F.join);null!=F.hole&&(B.hole=F.hole);null!=F.fill&&(B.fill=F.fill?m(F.fill,"uint8"):null);null!=F.viewport&&(B.viewport=g(F.viewport));B.viewport||(B.viewport=g([w.drawingBufferWidth,w.drawingBufferHeight]));null!=F.close&&(B.close=F.close);null===F.positions&&(F.positions=[]);if(F.positions){if(F.positions.x&&F.positions.y){var C=F.positions.x,v=F.positions.y;var G=B.count=Math.max(C.length,
v.length);z=new Float64Array(2*G);for(var I=0;I<G;I++)z[2*I]=C[I],z[2*I+1]=v[I]}else z=e(F.positions,"float64"),G=B.count=Math.floor(z.length/2);C=B.bounds=p(z,2);if(B.fill){I=[];v={};for(var J=0,K=0,N=0,H=B.count;K<H;K++){var L=z[2*K],P=z[2*K+1];isNaN(L)||isNaN(P)||null==L||null==P?(L=z[2*J],P=z[2*J+1],v[K]=J):J=K;I[N++]=L;I[N++]=P}I=l(I,B.hole||[]);J=0;for(K=I.length;J<K;J++)null!=v[I[J]]&&(I[J]=v[I[J]]);B.triangles=I}v=new Float64Array(z);k(v,2,C);C=new Float64Array(2*G+6);B.close?z[0]===z[2*G-
2]&&z[1]===z[2*G-1]?(C[0]=v[2*G-4],C[1]=v[2*G-3]):(C[0]=v[2*G-2],C[1]=v[2*G-1]):(C[0]=v[0],C[1]=v[1]);C.set(v,2);B.close?z[0]===z[2*G-2]&&z[1]===z[2*G-1]?(C[2*G+2]=v[2],C[2*G+3]=v[3],--B.count):(C[2*G+2]=v[0],C[2*G+3]=v[1],C[2*G+4]=v[2],C[2*G+5]=v[3]):(C[2*G+2]=v[2*G-2],C[2*G+3]=v[2*G-1],C[2*G+4]=v[2*G-2],C[2*G+5]=v[2*G-1]);B.positionBuffer(c(C));B.positionFractBuffer(f(C))}F.range?B.range=F.range:B.range||(B.range=B.bounds);(F.range||F.positions)&&B.count&&(z=B.bounds,G=B.range[2]-B.range[0],C=B.range[3]-
B.range[1],B.scale=[(z[2]-z[0])/G,(z[3]-z[1])/C],B.translate=[-B.range[0]/G+z[0]/G||0,-B.range[1]/C+z[1]/C||0],B.scaleFract=f(B.scale),B.translateFract=f(B.translate));if(F.dashes){if(!F.dashes||2>F.dashes.length)z=1,G=new Uint8Array([255,255,255,255,255,255,255,255]);else{for(G=z=0;G<F.dashes.length;++G)z+=F.dashes[G];G=new Uint8Array(z*n.dashMult);C=0;v=255;for(I=0;2>I;I++)for(J=0;J<F.dashes.length;++J){K=0;for(N=F.dashes[J]*n.dashMult*.5;K<N;++K)G[C++]=v;v^=255}}B.dashLength=z;B.dashTexture({channels:1,
data:G,width:G.length,height:1,mag:"linear",min:"linear"},0,0)}if(F.color){z=B.count;(G=F.color)||(G="transparent");F=new Uint8Array(4*z+4);if(Array.isArray(G)&&"number"!==typeof G[0]){for(C=0;C<z;C++)v=m(G[C],"uint8"),F.set(v,4*C);F.set(m(G[0],"uint8"),4*z)}else for(G=m(G,"uint8"),C=0;C<z+1;C++)F.set(G,4*C);B.colorBuffer({usage:"dynamic",type:"uint8",data:F})}}});if(q.length<this.passes.length){for(var x=q.length;x<this.passes.length;x++){var E=this.passes[x];E&&(E.colorBuffer.destroy(),E.positionBuffer.destroy(),
E.dashTexture.destroy())}this.passes.length=q.length}q=[];for(x=0;x<this.passes.length;x++)null!==this.passes[x]&&q.push(this.passes[x]);this.passes=q;return this}};n.prototype.destroy=function(){this.passes.forEach(function(q){q.colorBuffer.destroy();q.positionBuffer.destroy();q.dashTexture.destroy()});this.passes.length=0;return this}},{"array-bounds":70,"array-normalize":71,"color-normalize":125,earcut:177,"es6-weak-map":233,"flatten-vertex-data":244,glslify:413,"object-assign":473,"parse-rect":478,
"pick-by-alias":485,"to-float32":549}],510:[function(b,y,D){function n(x,E){if(x){if("string"===typeof x)return m(x,E);var F=Object.prototype.toString.call(x).slice(8,-1);"Object"===F&&x.constructor&&(F=x.constructor.name);if("Map"===F||"Set"===F)return Array.from(x);if("Arguments"===F||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F))return m(x,E)}}function m(x,E){if(null==E||E>x.length)E=x.length;for(var F=0,z=Array(E);F<E;F++)z[F]=x[F];return z}function p(x,E){var F=this;if(!(this instanceof
p))return new p(x,E);"function"===typeof x?(E||(E={}),E.regl=x):(E=x,x=null);E&&E.length&&(E.positions=E);x=E.regl;var z=x._gl,B=[];this.tooManyColors=q;var C=x.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"});l(this,{regl:x,gl:z,groups:[],markerCache:[null],markerTextures:[null],palette:B,paletteIds:{},paletteTexture:C,maxColors:255,maxSize:100,canvas:z.canvas});this.update(E);z={uniforms:{constPointSize:!!E.constPointSize,
pixelRatio:x.context("pixelRatio"),palette:C,paletteSize:function(v,G){return[F.tooManyColors?0:255,C.height]},scale:x.prop("scale"),scaleFract:x.prop("scaleFract"),translate:x.prop("translate"),translateFract:x.prop("translateFract"),opacity:x.prop("opacity"),marker:x.prop("markerTexture")},attributes:{x:function(v,G){return G.xAttr||{buffer:G.positionBuffer,stride:8,offset:0}},y:function(v,G){return G.yAttr||{buffer:G.positionBuffer,stride:8,offset:4}},xFract:function(v,G){return G.xAttr?{constant:[0,
0]}:{buffer:G.positionFractBuffer,stride:8,offset:0}},yFract:function(v,G){return G.yAttr?{constant:[0,0]}:{buffer:G.positionFractBuffer,stride:8,offset:4}},size:function(v,G){return G.size.length?{buffer:G.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*G.size/F.maxSize)]}},borderSize:function(v,G){return G.borderSize.length?{buffer:G.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*G.borderSize/F.maxSize)]}},colorId:function(v,G){return G.color.length?{buffer:G.colorBuffer,stride:F.tooManyColors?
8:4,offset:0}:{constant:F.tooManyColors?B.slice(4*G.color,4*G.color+4):[G.color]}},borderColorId:function(v,G){return G.borderColor.length?{buffer:G.colorBuffer,stride:F.tooManyColors?8:4,offset:F.tooManyColors?4:2}:{constant:F.tooManyColors?B.slice(4*G.borderColor,4*G.borderColor+4):[G.borderColor]}},isActive:function(v,G){return!0===G.activation?{constant:[1]}:G.activation?G.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",
dstAlpha:"one"}},scissor:{enable:!0,box:x.prop("viewport")},viewport:x.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:x.prop("elements"),count:x.prop("count"),offset:x.prop("offset"),primitive:"points"};E=l({},z);E.frag=k(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist \x3d texture2D(marker, gl_PointCoord).r, delta \x3d fragWidth;\n\n  // max-distance alpha\n  if (dist \x3c 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel \x3d\x3d fragColorLevel || fragBorderColor.a \x3d\x3d 0.) {\n    float colorAmt \x3d smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor \x3d vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt \x3d smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt \x3d smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color \x3d fragBorderColor;\n    color.a *\x3d borderColorAmt;\n    color \x3d mix(color, fragColor, colorAmt);\n    color.a *\x3d opacity;\n\n    gl_FragColor \x3d color;\n  }\n\n}\n"]);
E.vert=k(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\n\nconst float maxSize \x3d 100.;\nconst float borderLevel \x3d .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d 2. * size * pointSizeScale;\n  fragPointSize \x3d size * pixelRatio;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n\n  fragBorderColorLevel \x3d clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel \x3d clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]);
this.drawMarker=x(E);z=l({},z);z.frag=k(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt \x3d clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha \x3d 1.0, delta \x3d fragWidth;\n\n\tradius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius \x3e 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -\x3d smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius \x3d fragBorderRadius;\n\tfloat ratio \x3d smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color \x3d mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *\x3d alpha * opacity;\n\tgl_FragColor \x3d color;\n}\n"]);
z.vert=k(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize \x3d 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d (size + borderSize) * pointSizeScale;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius \x3d 1. - 2. * borderSize / (size + borderSize);\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor.a \x3d\x3d 0. || borderSize \x3d\x3d 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n}\n"]);
q&&(z.frag=z.frag.replace("smoothstep","smoothStep"),E.frag=E.frag.replace("smoothstep","smoothStep"));this.drawCircle=x(z)}var h=b("color-normalize"),a=b("array-bounds"),d=b("color-id"),e=b("@plotly/point-cluster"),l=b("object-assign"),k=b("glslify"),c=b("pick-by-alias"),f=b("update-diff"),g=b("flatten-vertex-data"),q=b("is-iexplorer"),t=b("to-float32"),u=b("parse-rect");p.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,
count:0,offset:0,bounds:null,positions:[],snap:1E4};p.prototype.render=function(){arguments.length&&this.update.apply(this,arguments);this.draw();return this};p.prototype.draw=function(){for(var x=this,E=arguments.length,F=Array(E),z=0;z<E;z++)F[z]=arguments[z];E=this.groups;1===F.length&&Array.isArray(F[0])&&(null===F[0][0]||Array.isArray(F[0][0]))&&(F=F[0]);this.regl._refresh();if(F.length)for(E=0;E<F.length;E++)this.drawItem(E,F[E]);else E.forEach(function(B,C){x.drawItem(C)});return this};p.prototype.drawItem=
function(x,E){var F=this.groups;x=F[x];"number"===typeof E&&(x=F[E],E=null);if(x&&x.count&&x.opacity){x.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,x,E));F=[];for(var z=1;z<x.activation.length;z++)if(x.activation[z]&&(!0===x.activation[z]||x.activation[z].data.length)){var B=F.push,C=B.apply,v=this.getMarkerDrawOptions(z,x,E);var G=v;G=Array.isArray(G)?m(G):void 0;G||(G="undefined"!==typeof Symbol&&Symbol.iterator in Object(v)?Array.from(v):void 0);if(!(v=G||n(v)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
C.call(B,F,v)}F.length&&this.drawMarker(F)}};p.prototype.getMarkerDrawOptions=function(x,E,F){var z=E.range,B=E.tree,C=E.viewport,v=E.activation,G=E.selectionBuffer,I=E.count;if(!B)return F?[l({},E,{markerTexture:this.markerTextures[x],activation:v[x],count:F.length,elements:F,offset:0})]:[l({},E,{markerTexture:this.markerTextures[x],activation:v[x],offset:0})];var J=[];z=B.range(z,{lod:!0,px:[(z[2]-z[0])/C.width,(z[3]-z[1])/C.height]});if(F){B=v[x].data;I=new Uint8Array(I);for(C=0;C<F.length;C++){var K=
F[C];I[K]=B?B[K]:1}G.subdata(I)}for(I=z.length;I--;){B=z[I];C=B;C=Array.isArray(C)?C:void 0;if(!C)if(C=void 0,"undefined"!==typeof Symbol&&Symbol.iterator in Object(B)){K=[];var N=!0,H=!1,L=void 0;try{for(var P=B[Symbol.iterator]();!(N=(C=P.next()).done)&&(K.push(C.value),2!==K.length);N=!0);}catch(Q){H=!0,L=Q}finally{try{if(!N&&null!=P["return"])P["return"]()}finally{if(H)throw L;}}C=K}else C=void 0;if(!(B=C||n(B,2)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
C=B[0];J.push(l({},E,{markerTexture:this.markerTextures[x],activation:F?G:v[x],offset:C,count:B[1]-C}))}return J};p.prototype.update=function(){for(var x=this,E=arguments.length,F=Array(E),z=0;z<E;z++)F[z]=arguments[z];if(F.length){1===F.length&&Array.isArray(F[0])&&(F=F[0]);var B=this.groups,C=this.gl,v=this.regl,G=this.maxSize,I=this.maxColors,J=this.palette;this.groups=B=F.map(function(K,N){var H=B[N];if(void 0===K)return H;null===K?K={positions:null}:"function"===typeof K?K={ondraw:K}:"number"===
typeof K[0]&&(K={positions:K});K=c(K,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",
opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"});null===K.positions&&(K.positions=[]);null!=K.tooManyColors&&(x.tooManyColors=K.tooManyColors);H||(B[N]=H={id:N,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:v.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:v.buffer({data:new Uint8Array(0),
usage:"dynamic",type:"uint8"}),positionBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:v.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},K=l({},p.defaults,K));!K.positions||"marker"in K||(K.marker=H.marker,delete H.marker);!K.marker||"positions"in K||(K.positions=H.positions,delete H.positions);var L=0,P=0;f(H,K,[{snap:!0,size:function(da,ea){null==da&&(da=p.defaults.size);L+=da&&da.length?1:0;return da},borderSize:function(da,ea){null==da&&
(da=p.defaults.borderSize);L+=da&&da.length?1:0;return da},opacity:parseFloat,color:function(da,ea){null==da&&(da=p.defaults.color);da=x.updateColor(da);P++;return da},borderColor:function(da,ea){null==da&&(da=p.defaults.borderColor);da=x.updateColor(da);P++;return da},bounds:function(da,ea,ca){"range"in ca||(ca.range=null);return da},positions:function(da,ea,ca){var ia=ea.snap,ha=ea.positionBuffer,fa=ea.positionFractBuffer,na=ea.selectionBuffer;if(da.x||da.y)return ea.xAttr=da.x.length?{buffer:v.buffer(da.x),
offset:0,stride:4,count:da.x.length}:{buffer:da.x.buffer,offset:4*da.x.offset||0,stride:4*(da.x.stride||1),count:da.x.count},ea.yAttr=da.y.length?{buffer:v.buffer(da.y),offset:0,stride:4,count:da.y.length}:{buffer:da.y.buffer,offset:4*da.y.offset||0,stride:4*(da.y.stride||1),count:da.y.count},ea.count=Math.max(ea.xAttr.count,ea.yAttr.count),da;da=g(da,"float64");var sa=ea.count=Math.floor(da.length/2),ua=ea.bounds=sa?a(da,2):null;ca.range||ea.range||(delete ea.range,ca.range=ua);ca.marker||ea.marker||
(delete ea.marker,ca.marker=null);ia&&(!0===ia||sa>ia)?ea.tree=e(da,{bounds:ua}):ia&&ia.length&&(ea.tree=ia);ea.tree&&(ca={primitive:"points",usage:"static",data:ea.tree,type:"uint32"},ea.elements?ea.elements(ca):ea.elements=v.elements(ca));ha({data:t.float(da),usage:"dynamic"});fa({data:t.fract(da),usage:"dynamic"});na({data:new Uint8Array(sa),type:"uint8",usage:"stream"});return da}},{marker:function(da,ea,ca){ca=ea.activation;ca.forEach(function(sa){return sa&&sa.destroy&&sa.destroy()});ca.length=
0;if(da&&"number"!==typeof da[0]){for(var ia=[],ha=0,fa=Math.min(da.length,ea.count);ha<fa;ha++){var na=x.addMarker(da[ha]);ia[na]||(ia[na]=new Uint8Array(ea.count));ia[na][ha]=1}for(ea=0;ea<ia.length;ea++)if(ia[ea]){ha={data:ia[ea],type:"uint8",usage:"static"};if(ca[ea])ca[ea](ha);else ca[ea]=v.buffer(ha);ca[ea].data=ia[ea]}}else ia=x.addMarker(da),ca[ia]=!0;return da},range:function(da,ea,ca){if(ca=ea.bounds)return da||(da=ca),ea.scale=[1/(da[2]-da[0]),1/(da[3]-da[1])],ea.translate=[-da[0],-da[1]],
ea.scaleFract=t.fract(ea.scale),ea.translateFract=t.fract(ea.translate),da},viewport:function(da){return u(da||[C.drawingBufferWidth,C.drawingBufferHeight])}}]);if(L){var Q=H;K=Q.count;N=Q.size;var S=Q.borderSize;Q=Q.sizeBuffer;var O=new Uint8Array(2*K);if(N.length||S.length)for(var U=0;U<K;U++)O[2*U]=Math.round(255*(null==N[U]?N:N[U])/G),O[2*U+1]=Math.round(255*(null==S[U]?S:S[U])/G);Q({data:O,usage:"dynamic"})}if(P){Q=H;K=Q.count;N=Q.color;S=Q.borderColor;Q=Q.colorBuffer;if(x.tooManyColors){if(N.length||
S.length){var X=new Uint8Array(8*K);for(O=0;O<K;O++)U=N[O],X[8*O]=J[4*U],X[8*O+1]=J[4*U+1],X[8*O+2]=J[4*U+2],X[8*O+3]=J[4*U+3],U=S[O],X[8*O+4]=J[4*U],X[8*O+5]=J[4*U+1],X[8*O+6]=J[4*U+2],X[8*O+7]=J[4*U+3]}}else if(N.length||S.length)for(X=new Uint8Array(4*K+2),O=0;O<K;O++)null!=N[O]&&(X[4*O]=N[O]%I,X[4*O+1]=Math.floor(N[O]/I)),null!=S[O]&&(X[4*O+2]=S[O]%I,X[4*O+3]=Math.floor(S[O]/I));Q({data:X||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return H})}};p.prototype.addMarker=function(x){var E=this.markerTextures,
F=this.regl,z=this.markerCache,B=null==x?0:z.indexOf(x);if(0<=B)return B;if(x instanceof Uint8Array||x instanceof Uint8ClampedArray)var C=x;else{C=new Uint8Array(x.length);B=0;for(var v=x.length;B<v;B++)C[B]=255*x[B]}v=Math.floor(Math.sqrt(C.length));B=E.length;z.push(x);E.push(F.texture({channels:1,data:C,radius:v,mag:"linear",min:"linear"}));return B};p.prototype.updateColor=function(x){var E=this.paletteIds,F=this.palette,z=this.maxColors;Array.isArray(x)||(x=[x]);var B=[];if("number"===typeof x[0]){var C=
[];if(Array.isArray(x))for(var v=0;v<x.length;v+=4)C.push(x.slice(v,v+4));else for(v=0;v<x.length;v+=4)C.push(x.subarray(v,v+4));x=C}for(C=0;C<x.length;C++){v=x[C];v=h(v,"uint8");var G=d(v,!1);if(null==E[G]){var I=F.length;E[G]=Math.floor(I/4);F[I]=v[0];F[I+1]=v[1];F[I+2]=v[2];F[I+3]=v[3]}B[C]=E[G]}!this.tooManyColors&&F.length>4*z&&(this.tooManyColors=!0);this.updatePalette(F);return 1===B.length?B[0]:B};p.prototype.updatePalette=function(x){if(!this.tooManyColors){var E=this.maxColors,F=this.paletteTexture,
z=Math.ceil(.25*x.length/E);if(1<z){x=x.slice();for(var B=.25*x.length%E;B<z*E;B++)x.push(0,0,0,0)}F.height<z&&F.resize(E,z);F.subimage({width:Math.min(.25*x.length,E),height:z,data:x},0,0)}};p.prototype.destroy=function(){this.groups.forEach(function(x){x.sizeBuffer.destroy();x.positionBuffer.destroy();x.positionFractBuffer.destroy();x.colorBuffer.destroy();x.activation.forEach(function(E){return E&&E.destroy&&E.destroy()});x.selectionBuffer.destroy();x.elements&&x.elements.destroy()});this.groups.length=
0;this.paletteTexture.destroy();this.markerTextures.forEach(function(x){return x&&x.destroy&&x.destroy()});return this};var w=b("object-assign");y.exports=function(x,E){x=new p(x,E);E=x.render.bind(x);w(E,{render:E,update:x.update.bind(x),draw:x.draw.bind(x),destroy:x.destroy.bind(x),regl:x.regl,gl:x.gl,canvas:x.gl.canvas,groups:x.groups,markers:x.markerCache,palette:x.palette});return E}},{"@plotly/point-cluster":57,"array-bounds":70,"color-id":123,"color-normalize":125,"flatten-vertex-data":244,
glslify:413,"is-iexplorer":440,"object-assign":473,"parse-rect":478,"pick-by-alias":485,"to-float32":549,"update-diff":571}],511:[function(b,y,D){function n(f,g){if(!(this instanceof n))return new n(f,g);this.traces=[];this.passes={};this.regl=f;this.scatter=h(f);this.canvas=this.scatter.canvas}function m(f,g,q){g=f[g];var t=f[q];2<g.length?(f=g[1],g=g[3]):g.length?(f=g[0],g=g[1]):(f=g.y,g=g.y+g.height);2<t.length?(q=t[0],t=t[2]):t.length?(q=t[0],t=t[1]):(q=t.x,t=t.x+t.width);return[q,f,t,g]}function p(f){if("number"===
typeof f)return[f,f,f,f];if(2===f.length)return[f[0],f[1],f[0],f[1]];f=k(f);return[f.x,f.y,f.x+f.width,f.y+f.height]}var h=b("regl-scatter2d"),a=b("pick-by-alias"),d=b("array-bounds"),e=b("raf"),l=b("array-range"),k=b("parse-rect"),c=b("flatten-vertex-data");y.exports=n;n.prototype.render=function(){for(var f=this,g=[],q=arguments.length;q--;)g[q]=arguments[q];g.length&&this.update.apply(this,g);if(this.regl.attributes.preserveDrawingBuffer)return this.draw();this.dirty?null==this.planned&&(this.planned=
e(function(){f.draw();f.dirty=!0;f.planned=null})):(this.draw(),this.dirty=!0,e(function(){f.dirty=!1}));return this};n.prototype.update=function(){for(var f,g=[],q=arguments.length;q--;)g[q]=arguments[q];if(g.length){for(q=0;q<g.length;q++)this.updateItem(q,g[q]);this.traces=this.traces.filter(Boolean);g=[];for(var t=q=0;t<this.traces.length;t++){for(var u=this.traces[t],w=this.traces[t].passes,x=0;x<w.length;x++)g.push(this.passes[w[x]]);u.passOffset=q;q+=u.passes.length}(f=this.scatter).update.apply(f,
g);return this}};n.prototype.updateItem=function(f,g){var q=this.regl;if(null===g)return this.traces[f]=null,this;if(!g)return this;g=a(g,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",
marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"});f=this.traces[f]||(this.traces[f]={id:f,buffer:q.buffer({usage:"dynamic",type:"float",
data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:k([q._gl.drawingBufferWidth,q._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});null!=g.color&&(f.color=g.color);null!=g.size&&(f.size=g.size);null!=g.marker&&(f.marker=g.marker);null!=g.borderColor&&(f.borderColor=g.borderColor);null!=g.borderSize&&(f.borderSize=g.borderSize);null!=g.opacity&&(f.opacity=g.opacity);g.viewport&&(f.viewport=k(g.viewport));null!=
g.diagonal&&(f.diagonal=g.diagonal);null!=g.upper&&(f.upper=g.upper);null!=g.lower&&(f.lower=g.lower);if(g.data)for(f.buffer(c(g.data)),f.columns=g.data.length,f.count=g.data[0].length,f.bounds=[],q=0;q<f.columns;q++)f.bounds[q]=d(g.data[q],1);if(g.range){f.range=g.range;var t=f.range&&"number"!==typeof f.range[0]}g.domain&&(f.domain=g.domain);q=!1;null!=g.padding&&(Array.isArray(g.padding)&&g.padding.length===f.columns&&"number"===typeof g.padding[g.padding.length-1]?(f.padding=g.padding.map(p),
q=!0):f.padding=p(g.padding));var u=f.columns,w=f.count,x=f.viewport.width,E=f.viewport.height,F=f.viewport.x,z=f.viewport.y,B=x/u,C=E/u;f.passes=[];for(var v=0;v<u;v++)for(var G=0;G<u;G++)if(f.diagonal||G!==v)if(f.upper||!(v>G))if(f.lower||!(v<G)){var I=f.id;I=(null!=I.id?I.id:I)<<16|(v&255)<<8|G&255;var J=this.passes[I]||(this.passes[I]={});g.data&&(J.positions=g.transpose?{x:{buffer:f.buffer,offset:G,count:w,stride:u},y:{buffer:f.buffer,offset:v,count:w,stride:u}}:{x:{buffer:f.buffer,offset:G*
w,count:w},y:{buffer:f.buffer,offset:v*w,count:w}},J.bounds=m(f.bounds,v,G));if(g.domain||g.viewport||g.data){var K=q?m(f.padding,v,G):f.padding;if(f.domain){var N=m(f.domain,v,G);J.viewport=[F+N[0]*x+K[0],z+N[1]*E+K[1],F+N[2]*x-K[2],z+N[3]*E-K[3]]}else J.viewport=[F+G*B+B*K[0],z+v*C+C*K[1],F+(G+1)*B-B*K[2],z+(v+1)*C-C*K[3]]}g.color&&(J.color=f.color);g.size&&(J.size=f.size);g.marker&&(J.marker=f.marker);g.borderSize&&(J.borderSize=f.borderSize);g.borderColor&&(J.borderColor=f.borderColor);g.opacity&&
(J.opacity=f.opacity);g.range&&(J.range=t?m(f.range,v,G):f.range||J.bounds);f.passes.push(I)}return this};n.prototype.draw=function(){for(var f,g=[],q=arguments.length;q--;)g[q]=arguments[q];if(g.length){var t=[];for(q=0;q<g.length;q++)if("number"===typeof g[q]){var u=this.traces[g[q]],w=u.passOffset;t.push.apply(t,l(w,w+u.passes.length))}else if(g[q].length){var x=g[q];u=this.traces[q];w=u.passes;var E=u.passOffset;w=w.map(function(F,z){t[E+z]=x})}(f=this.scatter).draw.apply(f,t)}else this.scatter.draw();
return this};n.prototype.destroy=function(){this.traces.forEach(function(f){f.buffer&&f.buffer.destroy&&f.buffer.destroy()});this.passes=this.traces=null;this.scatter.destroy();return this}},{"array-bounds":70,"array-range":72,"flatten-vertex-data":244,"parse-rect":478,"pick-by-alias":485,raf:502,"regl-scatter2d":510}],512:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?y.exports=m():n.createREGL=m()})(this,function(){function n(Fb,ac){this.id=ma++;this.type=Fb;this.data=
ac}function m(Fb){if(0===Fb.length)return[];var ac=Fb.charAt(0),Jc=Fb.charAt(Fb.length-1);if(1<Fb.length&&ac===Jc&&('"'===ac||"'"===ac))return['"'+Fb.substr(1,Fb.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(ac=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Fb))return m(Fb.substr(0,ac.index)).concat(m(ac[1])).concat(m(Fb.substr(ac.index+ac[0].length)));ac=Fb.split(".");if(1===ac.length)return['"'+Fb.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];Fb=[];for(Jc=0;Jc<ac.length;++Jc)Fb=
Fb.concat(m(ac[Jc]));return Fb}function p(Fb){return"["+m(Fb).join("][")+"]"}function h(){var Fb={"":0},ac=[""];return{id:function(Jc){var qc=Fb[Jc];if(qc)return qc;qc=Fb[Jc]=ac.length;ac.push(Jc);return qc},str:function(Jc){return ac[Jc]}}}function a(Fb,ac,Jc){function qc(){var xb=window.innerWidth,Ab=window.innerHeight;Fb!==document.body&&(Ab=Fb.getBoundingClientRect(),xb=Ab.right-Ab.left,Ab=Ab.bottom-Ab.top);tc.width=Jc*xb;tc.height=Jc*Ab;va(tc.style,{width:xb+"px",height:Ab+"px"})}var tc=document.createElement("canvas");
va(tc.style,{border:0,margin:0,padding:0,top:0,left:0});Fb.appendChild(tc);Fb===document.body&&(tc.style.position="absolute",va(Fb.style,{margin:0,padding:0}));var vc;Fb!==document.body&&"function"===typeof ResizeObserver?(vc=new ResizeObserver(function(){setTimeout(qc)}),vc.observe(Fb)):window.addEventListener("resize",qc,!1);qc();return{canvas:tc,onDestroy:function(){vc?vc.disconnect():window.removeEventListener("resize",qc);Fb.removeChild(tc)}}}function d(Fb,ac){function Jc(qc){try{return Fb.getContext(qc,
ac)}catch(tc){return null}}return Jc("webgl")||Jc("experimental-webgl")||Jc("webgl-experimental")}function e(Fb){return"string"===typeof Fb?Fb.split():Fb}function l(Fb){return"string"===typeof Fb?document.querySelector(Fb):Fb}function k(Fb){var ac=Fb||{},Jc,qc,tc,vc;Fb={};var xb=[],Ab=[],jc="undefined"===typeof window?1:window.devicePixelRatio,Bc=!1,Ic=function(ic){},ec=function(){};"string"===typeof ac?Jc=document.querySelector(ac):"object"===typeof ac&&("string"===typeof ac.nodeName&&"function"===
typeof ac.appendChild&&"function"===typeof ac.getBoundingClientRect?Jc=ac:"function"===typeof ac.drawArrays||"function"===typeof ac.drawElements?(vc=ac,tc=vc.canvas):("gl"in ac?vc=ac.gl:"canvas"in ac?tc=l(ac.canvas):"container"in ac&&(qc=l(ac.container)),"attributes"in ac&&(Fb=ac.attributes),"extensions"in ac&&(xb=e(ac.extensions)),"optionalExtensions"in ac&&(Ab=e(ac.optionalExtensions)),"onDone"in ac&&(Ic=ac.onDone),"profile"in ac&&(Bc=!!ac.profile),"pixelRatio"in ac&&(jc=+ac.pixelRatio)));Jc&&("canvas"===
Jc.nodeName.toLowerCase()?tc=Jc:qc=Jc);if(!vc){if(!tc){Jc=a(qc||document.body,Ic,jc);if(!Jc)return null;tc=Jc.canvas;ec=Jc.onDestroy}void 0===Fb.premultipliedAlpha&&(Fb.premultipliedAlpha=!0);vc=d(tc,Fb)}return vc?{gl:vc,canvas:tc,container:qc,extensions:xb,optionalExtensions:Ab,pixelRatio:jc,profile:Bc,onDone:Ic,onDestroy:ec}:(ec(),Ic("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function c(Fb,ac){function Jc(xb){xb=xb.toLowerCase();try{var Ab=
qc[xb]=Fb.getExtension(xb)}catch(jc){}return!!Ab}for(var qc={},tc=0;tc<ac.extensions.length;++tc){var vc=ac.extensions[tc];if(!Jc(vc))return ac.onDestroy(),ac.onDone('"'+vc+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}ac.optionalExtensions.forEach(Jc);return{extensions:qc,restore:function(){Object.keys(qc).forEach(function(xb){if(qc[xb]&&!Jc(xb))throw Error("(regl): error restoring extension "+xb);})}}}function f(Fb,ac){for(var Jc=
Array(Fb),qc=0;qc<Fb;++qc)Jc[qc]=ac(qc);return Jc}function g(Fb){var ac=(65535<Fb)<<4;Fb>>>=ac;var Jc=(255<Fb)<<3;Fb>>>=Jc;ac|=Jc;Jc=(15<Fb)<<2;Fb>>>=Jc;ac|=Jc;Jc=(3<Fb)<<1;return ac|Jc|Fb>>>Jc>>1}function q(){function Fb(qc){a:{for(var tc=16;268435456>=tc;tc*=16)if(qc<=tc){qc=tc;break a}qc=0}tc=Jc[g(qc)>>2];return 0<tc.length?tc.pop():new ArrayBuffer(qc)}function ac(qc){Jc[g(qc.byteLength)>>2].push(qc)}var Jc=f(8,function(){return[]});return{alloc:Fb,free:ac,allocType:function(qc,tc){switch(qc){case 5120:qc=
new Int8Array(Fb(tc),0,tc);break;case 5121:qc=new Uint8Array(Fb(tc),0,tc);break;case 5122:qc=new Int16Array(Fb(2*tc),0,tc);break;case 5123:qc=new Uint16Array(Fb(2*tc),0,tc);break;case 5124:qc=new Int32Array(Fb(4*tc),0,tc);break;case 5125:qc=new Uint32Array(Fb(4*tc),0,tc);break;case 5126:qc=new Float32Array(Fb(4*tc),0,tc);break;default:return null}return qc.length!==tc?qc.subarray(0,tc):qc},freeType:function(qc){ac(qc.buffer)}}}function t(Fb){return!!Fb&&"object"===typeof Fb&&Array.isArray(Fb.shape)&&
Array.isArray(Fb.stride)&&"number"===typeof Fb.offset&&Fb.shape.length===Fb.stride.length&&(Array.isArray(Fb.data)||Oa(Fb.data))}function u(Fb,ac,Jc,qc,tc,vc){for(var xb=0;xb<ac;++xb)for(var Ab=Fb[xb],jc=0;jc<Jc;++jc)for(var Bc=Ab[jc],Ic=0;Ic<qc;++Ic)tc[vc++]=Bc[Ic]}function w(Fb,ac,Jc,qc,tc){for(var vc=1,xb=Jc+1;xb<ac.length;++xb)vc*=ac[xb];var Ab=ac[Jc];if(4===ac.length-Jc){var jc=ac[Jc+1],Bc=ac[Jc+2];ac=ac[Jc+3];for(xb=0;xb<Ab;++xb)u(Fb[xb],jc,Bc,ac,qc,tc),tc+=vc}else for(xb=0;xb<Ab;++xb)w(Fb[xb],
ac,Jc+1,qc,tc),tc+=vc}function x(Fb){return tb[Object.prototype.toString.call(Fb)]|0}function E(Fb,ac){for(var Jc=0;Jc<ac.length;++Jc)Fb[Jc]=ac[Jc]}function F(Fb,ac,Jc,qc,tc,vc,xb){for(var Ab=0,jc=0;jc<Jc;++jc)for(var Bc=0;Bc<qc;++Bc)Fb[Ab++]=ac[tc*jc+vc*Bc+xb]}function z(Fb,ac,Jc,qc){function tc(ec){this.id=jc++;this.buffer=Fb.createBuffer();this.type=ec;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;Jc.profile&&(this.stats={size:0})}function vc(ec,ic,
Gb){ec.byteLength=ic.byteLength;Fb.bufferData(ec.type,ic,Gb)}function xb(ec,ic,Gb,yb,Eb,Lb){ec.usage=Gb;if(Array.isArray(ic)){if(ec.dtype=yb||5126,0<ic.length)if(Array.isArray(ic[0])){Eb=ab(ic);for(var fc=yb=1;fc<Eb.length;++fc)yb*=Eb[fc];ec.dimension=yb;ic=fb(ic,Eb,ec.dtype);vc(ec,ic,Gb);Lb?ec.persistentData=ic:Ca.freeType(ic)}else"number"===typeof ic[0]?(ec.dimension=Eb,Eb=Ca.allocType(ec.dtype,ic.length),E(Eb,ic),vc(ec,Eb,Gb),Lb?ec.persistentData=Eb:Ca.freeType(Eb)):Oa(ic[0])&&(ec.dimension=ic[0].length,
ec.dtype=yb||x(ic[0])||5126,ic=fb(ic,[ic.length,ic[0].length],ec.dtype),vc(ec,ic,Gb),Lb?ec.persistentData=ic:Ca.freeType(ic))}else if(Oa(ic))ec.dtype=yb||x(ic),ec.dimension=Eb,vc(ec,ic,Gb),Lb&&(ec.persistentData=new Uint8Array(new Uint8Array(ic.buffer)));else if(t(ic)){Eb=ic.shape;var Oc=ic.stride;fc=ic.offset;var xc=0,Mc=0,dd=0,bd=0;1===Eb.length?(xc=Eb[0],Mc=1,dd=Oc[0],bd=0):2===Eb.length&&(xc=Eb[0],Mc=Eb[1],dd=Oc[0],bd=Oc[1]);ec.dtype=yb||x(ic.data)||5126;ec.dimension=Mc;Eb=Ca.allocType(ec.dtype,
xc*Mc);F(Eb,ic.data,xc,Mc,dd,bd,fc);vc(ec,Eb,Gb);Lb?ec.persistentData=Eb:Ca.freeType(Eb)}else ic instanceof ArrayBuffer&&(ec.dtype=5121,ec.dimension=Eb,vc(ec,ic,Gb),Lb&&(ec.persistentData=new Uint8Array(new Uint8Array(ic))))}function Ab(ec){ac.bufferCount--;qc(ec);Fb.deleteBuffer(ec.buffer);ec.buffer=null;delete Bc[ec.id]}var jc=0,Bc={};tc.prototype.bind=function(){Fb.bindBuffer(this.type,this.buffer)};tc.prototype.destroy=function(){Ab(this)};var Ic=[];Jc.profile&&(ac.getTotalBufferSize=function(){var ec=
0;Object.keys(Bc).forEach(function(ic){ec+=Bc[ic].stats.size});return ec});return{create:function(ec,ic,Gb,yb){function Eb(fc){var Oc=35044,xc=null,Mc=0,dd=0,bd=1;Array.isArray(fc)||Oa(fc)||t(fc)||fc instanceof ArrayBuffer?xc=fc:"number"===typeof fc?Mc=fc|0:fc&&("data"in fc&&(xc=fc.data),"usage"in fc&&(Oc=Ta[fc.usage]),"type"in fc&&(dd=nb[fc.type]),"dimension"in fc&&(bd=fc.dimension|0),"length"in fc&&(Mc=fc.length|0));Lb.bind();xc?xb(Lb,xc,Oc,dd,bd,yb):(Mc&&Fb.bufferData(Lb.type,Mc,Oc),Lb.dtype=dd||
5121,Lb.usage=Oc,Lb.dimension=bd,Lb.byteLength=Mc);Jc.profile&&(Lb.stats.size=Lb.byteLength*ra[Lb.dtype]);return Eb}ac.bufferCount++;var Lb=new tc(ic);Bc[Lb.id]=Lb;Gb||Eb(ec);Eb._reglType="buffer";Eb._buffer=Lb;Eb.subdata=function(fc,Oc){Oc=(Oc||0)|0;Lb.bind();if(Oa(fc)||fc instanceof ArrayBuffer)Fb.bufferSubData(Lb.type,Oc,fc);else if(Array.isArray(fc)){if(0<fc.length)if("number"===typeof fc[0]){var xc=Ca.allocType(Lb.dtype,fc.length);E(xc,fc);Fb.bufferSubData(Lb.type,Oc,xc);Ca.freeType(xc)}else if(Array.isArray(fc[0])||
Oa(fc[0])){var Mc=ab(fc);xc=fb(fc,Mc,Lb.dtype);Fb.bufferSubData(Lb.type,Oc,xc);Ca.freeType(xc)}}else if(t(fc)){Mc=fc.shape;var dd=fc.stride,bd=xc=0,qd=0,Bd=0;1===Mc.length?(xc=Mc[0],bd=1,qd=dd[0],Bd=0):2===Mc.length&&(xc=Mc[0],bd=Mc[1],qd=dd[0],Bd=dd[1]);Mc=Array.isArray(fc.data)?Lb.dtype:x(fc.data);Mc=Ca.allocType(Mc,xc*bd);F(Mc,fc.data,xc,bd,qd,Bd,fc.offset);Fb.bufferSubData(Lb.type,Oc,Mc);Ca.freeType(Mc)}return Eb};Jc.profile&&(Eb.stats=Lb.stats);Eb.destroy=function(){Ab(Lb)};return Eb},createStream:function(ec,
ic){var Gb=Ic.pop();Gb||(Gb=new tc(ec));Gb.bind();xb(Gb,ic,35040,0,1,!1);return Gb},destroyStream:function(ec){Ic.push(ec)},clear:function(){kb(Bc).forEach(Ab);Ic.forEach(Ab)},getBuffer:function(ec){return ec&&ec._buffer instanceof tc?ec._buffer:null},restore:function(){kb(Bc).forEach(function(ec){ec.buffer=Fb.createBuffer();Fb.bindBuffer(ec.type,ec.buffer);Fb.bufferData(ec.type,ec.persistentData||ec.byteLength,ec.usage)})},_initBuffer:xb}}function B(Fb,ac,Jc,qc){function tc(ec){this.id=jc++;Ab[this.id]=
this;this.buffer=ec;this.primType=4;this.type=this.vertCount=0}function vc(ec,ic,Gb,yb,Eb,Lb,fc){ec.buffer.bind();var Oc;ic?((Oc=fc)||Oa(ic)&&(!t(ic)||Oa(ic.data))||(Oc=ac.oes_element_index_uint?5125:5123),Jc._initBuffer(ec.buffer,ic,Gb,Oc,3)):(Fb.bufferData(34963,Lb,Gb),ec.buffer.dtype=Oc||5121,ec.buffer.usage=Gb,ec.buffer.dimension=3,ec.buffer.byteLength=Lb);Oc=fc;if(!fc){switch(ec.buffer.dtype){case 5121:case 5120:Oc=5121;break;case 5123:case 5122:Oc=5123;break;case 5125:case 5124:Oc=5125}ec.buffer.dtype=
Oc}ec.type=Oc;ic=Eb;0>ic&&(ic=ec.buffer.byteLength,5123===Oc?ic>>=1:5125===Oc&&(ic>>=2));ec.vertCount=ic;ic=yb;0>yb&&(ic=4,yb=ec.buffer.dimension,1===yb&&(ic=0),2===yb&&(ic=1),3===yb&&(ic=4));ec.primType=ic}function xb(ec){qc.elementsCount--;delete Ab[ec.id];ec.buffer.destroy();ec.buffer=null}var Ab={},jc=0,Bc={uint8:5121,uint16:5123};ac.oes_element_index_uint&&(Bc.uint32=5125);tc.prototype.bind=function(){this.buffer.bind()};var Ic=[];return{create:function(ec,ic){function Gb(Lb){if(Lb)if("number"===
typeof Lb)yb(Lb),Eb.primType=4,Eb.vertCount=Lb|0,Eb.type=5121;else{var fc=null,Oc=35044,xc=-1,Mc=-1,dd=0,bd=0;if(Array.isArray(Lb)||Oa(Lb)||t(Lb))fc=Lb;else if("data"in Lb&&(fc=Lb.data),"usage"in Lb&&(Oc=Ta[Lb.usage]),"primitive"in Lb&&(xc=Ea[Lb.primitive]),"count"in Lb&&(Mc=Lb.count|0),"type"in Lb&&(bd=Bc[Lb.type]),"length"in Lb)dd=Lb.length|0;else if(dd=Mc,5123===bd||5122===bd)dd*=2;else if(5125===bd||5124===bd)dd*=4;vc(Eb,fc,Oc,xc,Mc,dd,bd)}else yb(),Eb.primType=4,Eb.vertCount=0,Eb.type=5121;return Gb}
var yb=Jc.create(null,34963,!0),Eb=new tc(yb._buffer);qc.elementsCount++;Gb(ec);Gb._reglType="elements";Gb._elements=Eb;Gb.subdata=function(Lb,fc){yb.subdata(Lb,fc);return Gb};Gb.destroy=function(){xb(Eb)};return Gb},createStream:function(ec){var ic=Ic.pop();ic||(ic=new tc(Jc.create(null,34963,!0,!1)._buffer));vc(ic,ec,35040,-1,-1,0,0);return ic},destroyStream:function(ec){Ic.push(ec)},getElements:function(ec){return"function"===typeof ec&&ec._elements instanceof tc?ec._elements:null},clear:function(){kb(Ab).forEach(xb)}}}
function C(Fb){for(var ac=Ca.allocType(5123,Fb.length),Jc=0;Jc<Fb.length;++Jc)if(isNaN(Fb[Jc]))ac[Jc]=65535;else if(Infinity===Fb[Jc])ac[Jc]=31744;else if(-Infinity===Fb[Jc])ac[Jc]=64512;else{Ia[0]=Fb[Jc];var qc=Va[0],tc=qc>>>31<<15,vc=(qc<<1>>>24)-127;qc=qc>>13&1023;ac[Jc]=-24>vc?tc:-14>vc?tc+(qc+1024>>-14-vc):15<vc?tc+31744:tc+(vc+15<<10)+qc}return ac}function v(Fb){return Array.isArray(Fb)||Oa(Fb)}function G(Fb){return"[object "+Fb+"]"}function I(Fb){return Array.isArray(Fb)&&(0===Fb.length||"number"===
typeof Fb[0])}function J(Fb){return Array.isArray(Fb)&&0!==Fb.length&&v(Fb[0])?!0:!1}function K(Fb){return Object.prototype.toString.call(Fb)}function N(Fb){if(!Fb)return!1;var ac=K(Fb);return 0<=Ra.indexOf(ac)?!0:I(Fb)||J(Fb)||t(Fb)}function H(Fb,ac){36193===Fb.type?(Fb.data=C(ac),Ca.freeType(ac)):Fb.data=ac}function L(Fb,ac,Jc,qc,tc,vc){Fb="undefined"!==typeof Xa[Fb]?Xa[Fb]:Na[Fb]*jb[ac];vc&&(Fb*=6);if(tc){for(qc=0;1<=Jc;)qc+=Fb*Jc*Jc,Jc/=2;return qc}return Fb*Jc*qc}function P(Fb,ac,Jc,qc,tc,vc,
xb){function Ab(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function jc(Wa,Hb){Wa.internalformat=Hb.internalformat;Wa.format=Hb.format;Wa.type=Hb.type;Wa.compressed=Hb.compressed;Wa.premultiplyAlpha=Hb.premultiplyAlpha;Wa.flipY=Hb.flipY;Wa.unpackAlignment=Hb.unpackAlignment;Wa.colorSpace=Hb.colorSpace;Wa.width=Hb.width;Wa.height=Hb.height;Wa.channels=Hb.channels}
function Bc(Wa,Hb){if("object"===typeof Hb&&Hb){"premultiplyAlpha"in Hb&&(Wa.premultiplyAlpha=Hb.premultiplyAlpha);"flipY"in Hb&&(Wa.flipY=Hb.flipY);"alignment"in Hb&&(Wa.unpackAlignment=Hb.alignment);"colorSpace"in Hb&&(Wa.colorSpace=Ke[Hb.colorSpace]);"type"in Hb&&(Wa.type=Wd[Hb.type]);var Cb=Wa.width,Sb=Wa.height,Ec=Wa.channels,Vc=!1;"shape"in Hb?(Cb=Hb.shape[0],Sb=Hb.shape[1],3===Hb.shape.length&&(Ec=Hb.shape[2],Vc=!0)):("radius"in Hb&&(Cb=Sb=Hb.radius),"width"in Hb&&(Cb=Hb.width),"height"in Hb&&
(Sb=Hb.height),"channels"in Hb&&(Ec=Hb.channels,Vc=!0));Wa.width=Cb|0;Wa.height=Sb|0;Wa.channels=Ec|0;Cb=!1;"format"in Hb&&(Cb=Hb.format,Sb=Wa.internalformat=Wc[Cb],Wa.format=Fe[Sb],Cb in Wd&&!("type"in Hb)&&(Wa.type=Wd[Cb]),Cb in rd&&(Wa.compressed=!0),Cb=!0);!Vc&&Cb?Wa.channels=Na[Wa.format]:Vc&&!Cb&&Wa.channels!==ib[Wa.format]&&(Wa.format=Wa.internalformat=ib[Wa.channels])}}function Ic(Wa){Fb.pixelStorei(37440,Wa.flipY);Fb.pixelStorei(37441,Wa.premultiplyAlpha);Fb.pixelStorei(37443,Wa.colorSpace);
Fb.pixelStorei(3317,Wa.unpackAlignment)}function ec(){Ab.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function ic(Wa,Hb){var Cb=null;N(Hb)?Cb=Hb:Hb&&(Bc(Wa,Hb),"x"in Hb&&(Wa.xOffset=Hb.x|0),"y"in Hb&&(Wa.yOffset=Hb.y|0),N(Hb.data)&&(Cb=Hb.data));if(Hb.copy){Hb=tc.viewportWidth;var Sb=tc.viewportHeight;Wa.width=Wa.width||Hb-Wa.xOffset;Wa.height=Wa.height||Sb-Wa.yOffset;Wa.needsCopy=!0}else if(!Cb)Wa.width=Wa.width||1,Wa.height=Wa.height||
1,Wa.channels=Wa.channels||4;else if(Oa(Cb))Wa.channels=Wa.channels||4,Wa.data=Cb,"type"in Hb||5121!==Wa.type||(Wa.type=tb[Object.prototype.toString.call(Cb)]|0);else if(I(Cb)){Wa.channels=Wa.channels||4;Hb=Cb;Sb=Hb.length;switch(Wa.type){case 5121:case 5123:case 5125:case 5126:Sb=Ca.allocType(Wa.type,Sb);Sb.set(Hb);Wa.data=Sb;break;case 36193:Wa.data=C(Hb)}Wa.alignment=1;Wa.needsFree=!0}else if(t(Cb)){Hb=Cb.data;Array.isArray(Hb)||5121!==Wa.type||(Wa.type=tb[Object.prototype.toString.call(Hb)]|0);
Sb=Cb.shape;var Ec=Cb.stride,Vc,mc;3===Sb.length?(Vc=Sb[2],mc=Ec[2]):mc=Vc=1;var Sc=Sb[0];var jd=Sb[1];Sb=Ec[0];Ec=Ec[1];Wa.alignment=1;Wa.width=Sc;Wa.height=jd;Wa.channels=Vc;Wa.format=Wa.internalformat=ib[Vc];Wa.needsFree=!0;Sc=mc;Cb=Cb.offset;Vc=Wa.width;mc=Wa.height;jd=Wa.channels;for(var Ad=Ca.allocType(36193===Wa.type?5126:Wa.type,Vc*mc*jd),Qb=0,dc=0;dc<mc;++dc)for(var Qc=0;Qc<Vc;++Qc)for(var gd=0;gd<jd;++gd)Ad[Qb++]=Hb[Sb*Qc+Ec*dc+Sc*gd+Cb];H(Wa,Ad)}else if(K(Cb)===Za||K(Cb)===eb||K(Cb)===
Ba)K(Cb)===Za||K(Cb)===eb?Wa.element=Cb:Wa.element=Cb.canvas,Wa.width=Wa.element.width,Wa.height=Wa.element.height,Wa.channels=4;else if(K(Cb)===Ma)Wa.element=Cb,Wa.width=Cb.width,Wa.height=Cb.height,Wa.channels=4;else if(K(Cb)===$a)Wa.element=Cb,Wa.width=Cb.naturalWidth,Wa.height=Cb.naturalHeight,Wa.channels=4;else if(K(Cb)===lb)Wa.element=Cb,Wa.width=Cb.videoWidth,Wa.height=Cb.videoHeight,Wa.channels=4;else if(J(Cb)){Hb=Wa.width||Cb[0].length;Sb=Wa.height||Cb.length;Ec=Wa.channels;Ec=v(Cb[0][0])?
Ec||Cb[0][0].length:Ec||1;Sc=mb.shape(Cb);Vc=1;for(mc=0;mc<Sc.length;++mc)Vc*=Sc[mc];Vc=Ca.allocType(36193===Wa.type?5126:Wa.type,Vc);mb.flatten(Cb,Sc,"",Vc);H(Wa,Vc);Wa.alignment=1;Wa.width=Hb;Wa.height=Sb;Wa.channels=Ec;Wa.format=Wa.internalformat=ib[Ec];Wa.needsFree=!0}}function Gb(Wa,Hb,Cb,Sb,Ec){var Vc=Wa.element,mc=Wa.data,Sc=Wa.internalformat,jd=Wa.format,Ad=Wa.type,Qb=Wa.width,dc=Wa.height;Ic(Wa);Vc?Fb.texSubImage2D(Hb,Ec,Cb,Sb,jd,Ad,Vc):Wa.compressed?Fb.compressedTexSubImage2D(Hb,Ec,Cb,Sb,
Sc,Qb,dc,mc):Wa.needsCopy?(qc(),Fb.copyTexSubImage2D(Hb,Ec,Cb,Sb,Wa.xOffset,Wa.yOffset,Qb,dc)):Fb.texSubImage2D(Hb,Ec,Cb,Sb,Qb,dc,jd,Ad,mc)}function yb(){return ke.pop()||new ec}function Eb(Wa){Wa.needsFree&&Ca.freeType(Wa.data);ec.call(Wa);ke.push(Wa)}function Lb(){Ab.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function fc(Wa,Hb,Cb){var Sb=Wa.images[0]=yb();Wa.mipmask=1;Sb.width=Wa.width=Hb;Sb.height=Wa.height=Cb;Sb.channels=Wa.channels=4}function Oc(Wa,
Hb){if(N(Hb)){var Cb=Wa.images[0]=yb();jc(Cb,Wa);ic(Cb,Hb);Wa.mipmask=1}else if(Bc(Wa,Hb),Array.isArray(Hb.mipmap)){Hb=Hb.mipmap;for(var Sb=0;Sb<Hb.length;++Sb)Cb=Wa.images[Sb]=yb(),jc(Cb,Wa),Cb.width>>=Sb,Cb.height>>=Sb,ic(Cb,Hb[Sb]),Wa.mipmask|=1<<Sb}else Cb=Wa.images[0]=yb(),jc(Cb,Wa),ic(Cb,Hb),Wa.mipmask=1;jc(Wa,Wa.images[0])}function xc(Wa,Hb){Wa=Wa.images;for(var Cb=0;Cb<Wa.length&&Wa[Cb];++Cb){var Sb=Wa[Cb],Ec=Hb,Vc=Cb,mc=Sb.element,Sc=Sb.data,jd=Sb.internalformat,Ad=Sb.format,Qb=Sb.type,dc=
Sb.width,Qc=Sb.height;Ic(Sb);mc?Fb.texImage2D(Ec,Vc,Ad,Ad,Qb,mc):Sb.compressed?Fb.compressedTexImage2D(Ec,Vc,jd,dc,Qc,0,Sc):Sb.needsCopy?(qc(),Fb.copyTexImage2D(Ec,Vc,Ad,Sb.xOffset,Sb.yOffset,dc,Qc,0)):Fb.texImage2D(Ec,Vc,Ad,dc,Qc,0,Ad,Qb,Sc||null)}}function Mc(){var Wa=Ce.pop()||new Lb;Ab.call(Wa);for(var Hb=Wa.mipmask=0;16>Hb;++Hb)Wa.images[Hb]=null;return Wa}function dd(Wa){for(var Hb=Wa.images,Cb=0;Cb<Hb.length;++Cb)Hb[Cb]&&Eb(Hb[Cb]),Hb[Cb]=null;Ce.push(Wa)}function bd(){this.magFilter=this.minFilter=
9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function qd(Wa,Hb){"min"in Hb&&(Wa.minFilter=Pd[Hb.min],0<=rb.indexOf(Wa.minFilter)&&!("faces"in Hb)&&(Wa.genMipmaps=!0));"mag"in Hb&&(Wa.magFilter=Nd[Hb.mag]);var Cb=Wa.wrapS,Sb=Wa.wrapT;if("wrap"in Hb){var Ec=Hb.wrap;"string"===typeof Ec?Cb=Sb=Gd[Ec]:Array.isArray(Ec)&&(Cb=Gd[Ec[0]],Sb=Gd[Ec[1]])}else"wrapS"in Hb&&(Cb=Gd[Hb.wrapS]),"wrapT"in Hb&&(Sb=Gd[Hb.wrapT]);Wa.wrapS=Cb;Wa.wrapT=Sb;"anisotropic"in Hb&&
(Wa.anisotropic=Hb.anisotropic);if("mipmap"in Hb){Cb=!1;switch(typeof Hb.mipmap){case "string":Wa.mipmapHint=cd[Hb.mipmap];Cb=Wa.genMipmaps=!0;break;case "boolean":Cb=Wa.genMipmaps=Hb.mipmap;break;case "object":Wa.genMipmaps=!1,Cb=!0}!Cb||"min"in Hb||(Wa.minFilter=9984)}}function Bd(Wa,Hb){Fb.texParameteri(Hb,10241,Wa.minFilter);Fb.texParameteri(Hb,10240,Wa.magFilter);Fb.texParameteri(Hb,10242,Wa.wrapS);Fb.texParameteri(Hb,10243,Wa.wrapT);ac.ext_texture_filter_anisotropic&&Fb.texParameteri(Hb,34046,
Wa.anisotropic);Wa.genMipmaps&&(Fb.hint(33170,Wa.mipmapHint),Fb.generateMipmap(Hb))}function md(Wa){Ab.call(this);this.mipmask=0;this.internalformat=6408;this.id=sf++;this.refCount=1;this.target=Wa;this.texture=Fb.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new bd;xb.profile&&(this.stats={size:0})}function Fd(Wa){Fb.activeTexture(33984);Fb.bindTexture(Wa.target,Wa.texture)}function Od(){var Wa=gf[0];Wa?Fb.bindTexture(Wa.target,Wa.texture):Fb.bindTexture(3553,null)}function sd(Wa){var Hb=
Wa.texture,Cb=Wa.unit,Sb=Wa.target;0<=Cb&&(Fb.activeTexture(33984+Cb),Fb.bindTexture(Sb,null),gf[Cb]=null);Fb.deleteTexture(Hb);Wa.texture=null;Wa.params=null;Wa.pixels=null;Wa.refCount=0;delete Ve[Wa.id];vc.textureCount--}var cd={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Gd={repeat:10497,clamp:33071,mirror:33648},Nd={nearest:9728,linear:9729},Pd=va({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Nd),Ke=
{none:0,browser:37444},Wd={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Wc={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},rd={};ac.ext_srgb&&(Wc.srgb=35904,Wc.srgba=35906);ac.oes_texture_float&&(Wd.float32=Wd["float"]=5126);ac.oes_texture_half_float&&(Wd.float16=Wd["half float"]=36193);ac.webgl_depth_texture&&(va(Wc,{depth:6402,"depth stencil":34041}),va(Wd,{uint16:5123,uint32:5125,"depth stencil":34042}));ac.webgl_compressed_texture_s3tc&&
va(rd,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});ac.webgl_compressed_texture_atc&&va(rd,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});ac.webgl_compressed_texture_pvrtc&&va(rd,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});ac.webgl_compressed_texture_etc1&&(rd["rgb etc1"]=36196);var Kd=Array.prototype.slice.call(Fb.getParameter(34467));Object.keys(rd).forEach(function(Wa){var Hb=
rd[Wa];0<=Kd.indexOf(Hb)&&(Wc[Wa]=Hb)});var Rd=Object.keys(Wc);Jc.textureFormats=Rd;var se=[];Object.keys(Wc).forEach(function(Wa){se[Wc[Wa]]=Wa});var Ee=[];Object.keys(Wd).forEach(function(Wa){Ee[Wd[Wa]]=Wa});var $d=[];Object.keys(Nd).forEach(function(Wa){$d[Nd[Wa]]=Wa});var Ud=[];Object.keys(Pd).forEach(function(Wa){Ud[Pd[Wa]]=Wa});var Je=[];Object.keys(Gd).forEach(function(Wa){Je[Gd[Wa]]=Wa});var Fe=Rd.reduce(function(Wa,Hb){var Cb=Wc[Hb];6409===Cb||6406===Cb||6409===Cb||6410===Cb||6402===Cb||
34041===Cb||ac.ext_srgb&&(35904===Cb||35906===Cb)?Wa[Cb]=Cb:32855===Cb||0<=Hb.indexOf("rgba")?Wa[Cb]=6408:Wa[Cb]=6407;return Wa},{}),ke=[],Ce=[],sf=0,Ve={},tf=Jc.maxTextureUnits,gf=Array(tf).map(function(){return null});va(md.prototype,{bind:function(){this.bindCount+=1;var Wa=this.unit;if(0>Wa){for(var Hb=0;Hb<tf;++Hb){var Cb=gf[Hb];if(Cb){if(0<Cb.bindCount)continue;Cb.unit=-1}gf[Hb]=this;Wa=Hb;break}xb.profile&&vc.maxTextureUnits<Wa+1&&(vc.maxTextureUnits=Wa+1);this.unit=Wa;Fb.activeTexture(33984+
Wa);Fb.bindTexture(this.target,this.texture)}return Wa},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&sd(this)}});xb.profile&&(vc.getTotalTextureSize=function(){var Wa=0;Object.keys(Ve).forEach(function(Hb){Wa+=Ve[Hb].stats.size});return Wa});return{create2D:function(Wa,Hb){function Cb(Ec,Vc){var mc=Sb.texInfo;bd.call(mc);var Sc=Mc();"number"===typeof Ec?"number"===typeof Vc?fc(Sc,Ec|0,Vc|0):fc(Sc,Ec|0,Ec|0):Ec?(qd(mc,Ec),Oc(Sc,Ec)):fc(Sc,1,1);mc.genMipmaps&&(Sc.mipmask=
(Sc.width<<1)-1);Sb.mipmask=Sc.mipmask;jc(Sb,Sc);Sb.internalformat=Sc.internalformat;Cb.width=Sc.width;Cb.height=Sc.height;Fd(Sb);xc(Sc,3553);Bd(mc,3553);Od();dd(Sc);xb.profile&&(Sb.stats.size=L(Sb.internalformat,Sb.type,Sc.width,Sc.height,mc.genMipmaps,!1));Cb.format=se[Sb.internalformat];Cb.type=Ee[Sb.type];Cb.mag=$d[mc.magFilter];Cb.min=Ud[mc.minFilter];Cb.wrapS=Je[mc.wrapS];Cb.wrapT=Je[mc.wrapT];return Cb}var Sb=new md(3553);Ve[Sb.id]=Sb;vc.textureCount++;Cb(Wa,Hb);Cb.subimage=function(Ec,Vc,
mc,Sc){Vc|=0;mc|=0;Sc|=0;var jd=yb();jc(jd,Sb);jd.width=0;jd.height=0;ic(jd,Ec);jd.width=jd.width||(Sb.width>>Sc)-Vc;jd.height=jd.height||(Sb.height>>Sc)-mc;Fd(Sb);Gb(jd,3553,Vc,mc,Sc);Od();Eb(jd);return Cb};Cb.resize=function(Ec,Vc){Ec|=0;Vc=Vc|0||Ec;if(Ec===Sb.width&&Vc===Sb.height)return Cb;Cb.width=Sb.width=Ec;Cb.height=Sb.height=Vc;Fd(Sb);for(var mc=0;Sb.mipmask>>mc;++mc){var Sc=Ec>>mc,jd=Vc>>mc;if(!Sc||!jd)break;Fb.texImage2D(3553,mc,Sb.format,Sc,jd,0,Sb.format,Sb.type,null)}Od();xb.profile&&
(Sb.stats.size=L(Sb.internalformat,Sb.type,Ec,Vc,!1,!1));return Cb};Cb._reglType="texture2d";Cb._texture=Sb;xb.profile&&(Cb.stats=Sb.stats);Cb.destroy=function(){Sb.decRef()};return Cb},createCube:function(Wa,Hb,Cb,Sb,Ec,Vc){function mc(Ad,Qb,dc,Qc,gd,Uc){var Zc,Ub=Sc.texInfo;bd.call(Ub);for(Zc=0;6>Zc;++Zc)jd[Zc]=Mc();if("number"===typeof Ad||!Ad)for(Ad=Ad|0||1,Zc=0;6>Zc;++Zc)fc(jd[Zc],Ad,Ad);else if("object"===typeof Ad)if(Qb)Oc(jd[0],Ad),Oc(jd[1],Qb),Oc(jd[2],dc),Oc(jd[3],Qc),Oc(jd[4],gd),Oc(jd[5],
Uc);else if(qd(Ub,Ad),Bc(Sc,Ad),"faces"in Ad)for(Ad=Ad.faces,Zc=0;6>Zc;++Zc)jc(jd[Zc],Sc),Oc(jd[Zc],Ad[Zc]);else for(Zc=0;6>Zc;++Zc)Oc(jd[Zc],Ad);jc(Sc,jd[0]);Sc.mipmask=Ub.genMipmaps?(jd[0].width<<1)-1:jd[0].mipmask;Sc.internalformat=jd[0].internalformat;mc.width=jd[0].width;mc.height=jd[0].height;Fd(Sc);for(Zc=0;6>Zc;++Zc)xc(jd[Zc],34069+Zc);Bd(Ub,34067);Od();xb.profile&&(Sc.stats.size=L(Sc.internalformat,Sc.type,mc.width,mc.height,Ub.genMipmaps,!0));mc.format=se[Sc.internalformat];mc.type=Ee[Sc.type];
mc.mag=$d[Ub.magFilter];mc.min=Ud[Ub.minFilter];mc.wrapS=Je[Ub.wrapS];mc.wrapT=Je[Ub.wrapT];for(Zc=0;6>Zc;++Zc)dd(jd[Zc]);return mc}var Sc=new md(34067);Ve[Sc.id]=Sc;vc.cubeCount++;var jd=Array(6);mc(Wa,Hb,Cb,Sb,Ec,Vc);mc.subimage=function(Ad,Qb,dc,Qc,gd){dc|=0;Qc|=0;gd|=0;var Uc=yb();jc(Uc,Sc);Uc.width=0;Uc.height=0;ic(Uc,Qb);Uc.width=Uc.width||(Sc.width>>gd)-dc;Uc.height=Uc.height||(Sc.height>>gd)-Qc;Fd(Sc);Gb(Uc,34069+Ad,dc,Qc,gd);Od();Eb(Uc);return mc};mc.resize=function(Ad){Ad|=0;if(Ad!==Sc.width){mc.width=
Sc.width=Ad;mc.height=Sc.height=Ad;Fd(Sc);for(var Qb=0;6>Qb;++Qb)for(var dc=0;Sc.mipmask>>dc;++dc)Fb.texImage2D(34069+Qb,dc,Sc.format,Ad>>dc,Ad>>dc,0,Sc.format,Sc.type,null);Od();xb.profile&&(Sc.stats.size=L(Sc.internalformat,Sc.type,mc.width,mc.height,!1,!0));return mc}};mc._reglType="textureCube";mc._texture=Sc;xb.profile&&(mc.stats=Sc.stats);mc.destroy=function(){Sc.decRef()};return mc},clear:function(){for(var Wa=0;Wa<tf;++Wa)Fb.activeTexture(33984+Wa),Fb.bindTexture(3553,null),gf[Wa]=null;kb(Ve).forEach(sd);
vc.cubeCount=0;vc.textureCount=0},getTexture:function(Wa){return null},restore:function(){for(var Wa=0;Wa<tf;++Wa){var Hb=gf[Wa];Hb&&(Hb.bindCount=0,Hb.unit=-1,gf[Wa]=null)}kb(Ve).forEach(function(Cb){Cb.texture=Fb.createTexture();Fb.bindTexture(Cb.target,Cb.texture);for(var Sb=0;32>Sb;++Sb)if(0!==(Cb.mipmask&1<<Sb))if(3553===Cb.target)Fb.texImage2D(3553,Sb,Cb.internalformat,Cb.width>>Sb,Cb.height>>Sb,0,Cb.internalformat,Cb.type,null);else for(var Ec=0;6>Ec;++Ec)Fb.texImage2D(34069+Ec,Sb,Cb.internalformat,
Cb.width>>Sb,Cb.height>>Sb,0,Cb.internalformat,Cb.type,null);Bd(Cb.texInfo,Cb.target)})}}}function Q(Fb,ac,Jc,qc,tc,vc){function xb(md,Fd,Od){this.target=md;this.texture=Fd;this.renderbuffer=Od;var sd=md=0;Fd?(md=Fd.width,sd=Fd.height):Od&&(md=Od.width,sd=Od.height);this.width=md;this.height=sd}function Ab(md){md&&(md.texture&&md.texture._texture.decRef(),md.renderbuffer&&md.renderbuffer._renderbuffer.decRef())}function jc(md,Fd,Od){md&&(md.texture?md.texture._texture.refCount+=1:md.renderbuffer._renderbuffer.refCount+=
1)}function Bc(md,Fd){Fd&&(Fd.texture?Fb.framebufferTexture2D(36160,md,Fd.target,Fd.texture._texture.texture,0):Fb.framebufferRenderbuffer(36160,md,36161,Fd.renderbuffer._renderbuffer.renderbuffer))}function Ic(md){var Fd=3553,Od=null,sd=null,cd=md;"object"===typeof md&&(cd=md.data,"target"in md&&(Fd=md.target|0));md=cd._reglType;"texture2d"===md?Od=cd:"textureCube"===md?Od=cd:"renderbuffer"===md&&(sd=cd,Fd=36161);return new xb(Fd,Od,sd)}function ec(md,Fd,Od,sd,cd){if(Od)return md=qc.create2D({width:md,
height:Fd,format:sd,type:cd}),md._texture.refCount=0,new xb(3553,md,null);md=tc.create({width:md,height:Fd,format:sd});md._renderbuffer.refCount=0;return new xb(36161,null,md)}function ic(md){return md&&(md.texture||md.renderbuffer)}function Gb(md,Fd,Od){md&&(md.texture?md.texture.resize(Fd,Od):md.renderbuffer&&md.renderbuffer.resize(Fd,Od),md.width=Fd,md.height=Od)}function yb(){this.id=qd++;Bd[this.id]=this;this.framebuffer=Fb.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];
this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Eb(md){md.colorAttachments.forEach(Ab);Ab(md.depthAttachment);Ab(md.stencilAttachment);Ab(md.depthStencilAttachment)}function Lb(md){Fb.deleteFramebuffer(md.framebuffer);md.framebuffer=null;vc.framebufferCount--;delete Bd[md.id]}function fc(md){var Fd;Fb.bindFramebuffer(36160,md.framebuffer);var Od=md.colorAttachments;for(Fd=0;Fd<Od.length;++Fd)Bc(36064+Fd,Od[Fd]);for(Fd=Od.length;Fd<Jc.maxColorAttachments;++Fd)Fb.framebufferTexture2D(36160,
36064+Fd,3553,null,0);Fb.framebufferTexture2D(36160,33306,3553,null,0);Fb.framebufferTexture2D(36160,36096,3553,null,0);Fb.framebufferTexture2D(36160,36128,3553,null,0);Bc(36096,md.depthAttachment);Bc(36128,md.stencilAttachment);Bc(33306,md.depthStencilAttachment);Fb.checkFramebufferStatus(36160);Fb.isContextLost();Fb.bindFramebuffer(36160,xc.next?xc.next.framebuffer:null);xc.cur=xc.next;Fb.getError()}function Oc(md,Fd){function Od(cd,Gd){var Nd=0,Pd=0,Ke=!0,Wd=!0;var Wc=null;var rd=!0,Kd="rgba",
Rd="uint8",se=1,Ee=null,$d=null,Ud=null,Je=!1;if("number"===typeof cd)Nd=cd|0,Pd=Gd|0||Nd;else if(cd){"shape"in cd?(Pd=cd.shape,Nd=Pd[0],Pd=Pd[1]):("radius"in cd&&(Nd=Pd=cd.radius),"width"in cd&&(Nd=cd.width),"height"in cd&&(Pd=cd.height));if("color"in cd||"colors"in cd)Wc=cd.color||cd.colors,Array.isArray(Wc);if(!Wc){"colorCount"in cd&&(se=cd.colorCount|0);"colorTexture"in cd&&(rd=!!cd.colorTexture,Kd="rgba4");if("colorType"in cd&&(Rd=cd.colorType,!rd))if("half float"===Rd||"float16"===Rd)Kd="rgba16f";
else if("float"===Rd||"float32"===Rd)Kd="rgba32f";"colorFormat"in cd&&(Kd=cd.colorFormat,0<=Mc.indexOf(Kd)?rd=!0:0<=dd.indexOf(Kd)&&(rd=!1))}if("depthTexture"in cd||"depthStencilTexture"in cd)Je=!(!cd.depthTexture&&!cd.depthStencilTexture);"depth"in cd&&("boolean"===typeof cd.depth?Ke=cd.depth:(Ee=cd.depth,Wd=!1));"stencil"in cd&&("boolean"===typeof cd.stencil?Wd=cd.stencil:($d=cd.stencil,Ke=!1));"depthStencil"in cd&&("boolean"===typeof cd.depthStencil?Ke=Wd=cd.depthStencil:(Ud=cd.depthStencil,Wd=
Ke=!1))}else Nd=Pd=1;var Fe=Gd=null,ke=null;if(Array.isArray(Wc))cd=Wc.map(Ic);else if(Wc)cd=[Ic(Wc)];else for(cd=Array(se),Wc=0;Wc<se;++Wc)cd[Wc]=ec(Nd,Pd,rd,Kd,Rd);Nd=Nd||cd[0].width;Pd=Pd||cd[0].height;Ee?Gd=Ic(Ee):Ke&&!Wd&&(Gd=ec(Nd,Pd,Je,"depth","uint32"));$d?Fe=Ic($d):Wd&&!Ke&&(Fe=ec(Nd,Pd,!1,"stencil","uint8"));Ud?ke=Ic(Ud):!Ee&&!$d&&Wd&&Ke&&(ke=ec(Nd,Pd,Je,"depth stencil","depth stencil"));Ke=null;for(Wc=0;Wc<cd.length;++Wc)jc(cd[Wc],Nd,Pd),cd[Wc]&&cd[Wc].texture&&(Wd=zb[cd[Wc].texture._texture.format]*
Jb[cd[Wc].texture._texture.type],null===Ke&&(Ke=Wd));jc(Gd,Nd,Pd);jc(Fe,Nd,Pd);jc(ke,Nd,Pd);Eb(sd);sd.width=Nd;sd.height=Pd;sd.colorAttachments=cd;sd.depthAttachment=Gd;sd.stencilAttachment=Fe;sd.depthStencilAttachment=ke;Od.color=cd.map(ic);Od.depth=ic(Gd);Od.stencil=ic(Fe);Od.depthStencil=ic(ke);Od.width=sd.width;Od.height=sd.height;fc(sd);return Od}var sd=new yb;vc.framebufferCount++;Od(md,Fd);return va(Od,{resize:function(cd,Gd){cd=Math.max(cd|0,1);Gd=Math.max(Gd|0||cd,1);if(cd===sd.width&&Gd===
sd.height)return Od;for(var Nd=sd.colorAttachments,Pd=0;Pd<Nd.length;++Pd)Gb(Nd[Pd],cd,Gd);Gb(sd.depthAttachment,cd,Gd);Gb(sd.stencilAttachment,cd,Gd);Gb(sd.depthStencilAttachment,cd,Gd);sd.width=Od.width=cd;sd.height=Od.height=Gd;fc(sd);return Od},_reglType:"framebuffer",_framebuffer:sd,destroy:function(){Lb(sd);Eb(sd)},use:function(cd){xc.setFBO({framebuffer:Od},cd)}})}var xc={cur:null,next:null,dirty:!1,setFBO:null},Mc=["rgba"],dd=["rgba4","rgb565","rgb5 a1"];ac.ext_srgb&&dd.push("srgba");ac.ext_color_buffer_half_float&&
dd.push("rgba16f","rgb16f");ac.webgl_color_buffer_float&&dd.push("rgba32f");var bd=["uint8"];ac.oes_texture_half_float&&bd.push("half float","float16");ac.oes_texture_float&&bd.push("float","float32");var qd=0,Bd={};return va(xc,{getFramebuffer:function(md){return"function"===typeof md&&"framebuffer"===md._reglType&&(md=md._framebuffer,md instanceof yb)?md:null},create:Oc,createCube:function(md){function Fd(sd){var cd={color:null},Gd=0,Nd=null;var Pd="rgba";var Ke="uint8",Wd=1;if("number"===typeof sd)Gd=
sd|0;else if(sd){"shape"in sd?Gd=sd.shape[0]:("radius"in sd&&(Gd=sd.radius|0),"width"in sd?Gd=sd.width|0:"height"in sd&&(Gd=sd.height|0));if("color"in sd||"colors"in sd)Nd=sd.color||sd.colors,Array.isArray(Nd);Nd||("colorCount"in sd&&(Wd=sd.colorCount|0),"colorType"in sd&&(Ke=sd.colorType),"colorFormat"in sd&&(Pd=sd.colorFormat));"depth"in sd&&(cd.depth=sd.depth);"stencil"in sd&&(cd.stencil=sd.stencil);"depthStencil"in sd&&(cd.depthStencil=sd.depthStencil)}else Gd=1;if(Nd)if(Array.isArray(Nd))for(sd=
[],Pd=0;Pd<Nd.length;++Pd)sd[Pd]=Nd[Pd];else sd=[Nd];else for(sd=Array(Wd),Nd={radius:Gd,format:Pd,type:Ke},Pd=0;Pd<Wd;++Pd)sd[Pd]=qc.createCube(Nd);cd.color=Array(sd.length);for(Pd=0;Pd<sd.length;++Pd)Wd=sd[Pd],Gd=Gd||Wd.width,cd.color[Pd]={target:34069,data:sd[Pd]};for(Pd=0;6>Pd;++Pd){for(Wd=0;Wd<sd.length;++Wd)cd.color[Wd].target=34069+Pd;0<Pd&&(cd.depth=Od[0].depth,cd.stencil=Od[0].stencil,cd.depthStencil=Od[0].depthStencil);if(Od[Pd])Od[Pd](cd);else Od[Pd]=Oc(cd)}return va(Fd,{width:Gd,height:Gd,
color:sd})}var Od=Array(6);Fd(md);return va(Fd,{faces:Od,resize:function(sd){var cd=sd|0;if(cd===Fd.width)return Fd;var Gd=Fd.color;for(sd=0;sd<Gd.length;++sd)Gd[sd].resize(cd);for(sd=0;6>sd;++sd)Od[sd].resize(cd);Fd.width=Fd.height=cd;return Fd},_reglType:"framebufferCube",destroy:function(){Od.forEach(function(sd){sd.destroy()})}})},clear:function(){kb(Bd).forEach(Lb)},restore:function(){xc.cur=null;xc.next=null;xc.dirty=!0;kb(Bd).forEach(function(md){md.framebuffer=Fb.createFramebuffer();fc(md)})}})}
function S(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function O(Fb,ac,Jc,qc,tc){function vc(Eb){if(Eb!==yb.currentVAO){var Lb=ac.oes_vertex_array_object;Eb?Lb.bindVertexArrayOES(Eb.vao):Lb.bindVertexArrayOES(null);yb.currentVAO=Eb}}function xb(Eb){if(Eb!==yb.currentVAO){if(Eb)Eb.bindAttrs();else for(var Lb=ac.angle_instanced_arrays,fc=0;fc<ec.length;++fc){var Oc=ec[fc];Oc.buffer?(Fb.enableVertexAttribArray(fc),
Fb.vertexAttribPointer(fc,Oc.size,Oc.type,Oc.normalized,Oc.stride,Oc.offfset),Lb&&Lb.vertexAttribDivisorANGLE(fc,Oc.divisor)):(Fb.disableVertexAttribArray(fc),Fb.vertexAttrib4f(fc,Oc.x,Oc.y,Oc.z,Oc.w))}yb.currentVAO=Eb}}function Ab(){kb(Gb).forEach(function(Eb){Eb.destroy()})}function jc(){this.id=++ic;this.attributes=[];var Eb=ac.oes_vertex_array_object;this.vao=Eb?Eb.createVertexArrayOES():null;Gb[this.id]=this;this.buffers=[]}function Bc(){ac.oes_vertex_array_object&&kb(Gb).forEach(function(Eb){Eb.refresh()})}
var Ic=Jc.maxAttributes,ec=Array(Ic);for(Jc=0;Jc<Ic;++Jc)ec[Jc]=new S;var ic=0,Gb={},yb={Record:S,scope:{},state:ec,currentVAO:null,targetVAO:null,restore:ac.oes_vertex_array_object?Bc:function(){},createVAO:function(Eb){function Lb(Oc){for(var xc=0;xc<fc.buffers.length;++xc)fc.buffers[xc].destroy();fc.buffers.length=0;xc=fc.attributes;xc.length=Oc.length;for(var Mc=0;Mc<Oc.length;++Mc){var dd=Oc[Mc],bd=xc[Mc]=new S;Array.isArray(dd)||Oa(dd)||t(dd)?(dd=tc.create(dd,34962,!1,!0),bd.buffer=tc.getBuffer(dd),
bd.size=bd.buffer.dimension|0,bd.normalized=!1,bd.type=bd.buffer.dtype,bd.offset=0,bd.stride=0,bd.divisor=0,bd.state=1,fc.buffers.push(dd)):tc.getBuffer(dd)?(bd.buffer=tc.getBuffer(dd),bd.size=bd.buffer.dimension|0,bd.normalized=!1,bd.type=bd.buffer.dtype,bd.offset=0,bd.stride=0,bd.divisor=0,bd.state=1):tc.getBuffer(dd.buffer)?(bd.buffer=tc.getBuffer(dd.buffer),bd.size=(+dd.size||bd.buffer.dimension)|0,bd.normalized=!!dd.normalized||!1,bd.type="type"in dd?nb[dd.type]:bd.buffer.dtype,bd.offset=(dd.offset||
0)|0,bd.stride=(dd.stride||0)|0,bd.divisor=(dd.divisor||0)|0,bd.state=1):"x"in dd&&(bd.x=+dd.x||0,bd.y=+dd.y||0,bd.z=+dd.z||0,bd.w=+dd.w||0,bd.state=2)}fc.refresh();return Lb}var fc=new jc;qc.vaoCount+=1;Lb.destroy=function(){fc.destroy()};Lb._vao=fc;Lb._reglType="vao";return Lb(Eb)},getVAO:function(Eb){return"function"===typeof Eb&&Eb._vao?Eb._vao:null},destroyBuffer:function(Eb){for(var Lb=0;Lb<ec.length;++Lb){var fc=ec[Lb];fc.buffer===Eb&&(Fb.disableVertexAttribArray(Lb),fc.buffer=null)}},setVAO:ac.oes_vertex_array_object?
vc:xb,clear:ac.oes_vertex_array_object?Ab:function(){}};jc.prototype.bindAttrs=function(){for(var Eb=ac.angle_instanced_arrays,Lb=this.attributes,fc=0;fc<Lb.length;++fc){var Oc=Lb[fc];Oc.buffer?(Fb.enableVertexAttribArray(fc),Fb.bindBuffer(34962,Oc.buffer.buffer),Fb.vertexAttribPointer(fc,Oc.size,Oc.type,Oc.normalized,Oc.stride,Oc.offset),Eb&&Eb.vertexAttribDivisorANGLE(fc,Oc.divisor)):(Fb.disableVertexAttribArray(fc),Fb.vertexAttrib4f(fc,Oc.x,Oc.y,Oc.z,Oc.w))}for(Eb=Lb.length;Eb<Ic;++Eb)Fb.disableVertexAttribArray(Eb)};
jc.prototype.refresh=function(){var Eb=ac.oes_vertex_array_object;Eb&&(Eb.bindVertexArrayOES(this.vao),this.bindAttrs(),yb.currentVAO=this)};jc.prototype.destroy=function(){if(this.vao){var Eb=ac.oes_vertex_array_object;this===yb.currentVAO&&(yb.currentVAO=null,Eb.bindVertexArrayOES(null));Eb.deleteVertexArrayOES(this.vao);this.vao=null}Gb[this.id]&&(delete Gb[this.id],--qc.vaoCount)};return yb}function U(Fb,ac,Jc,qc){function tc(yb,Eb,Lb,fc){this.name=yb;this.id=Eb;this.location=Lb;this.info=fc}
function vc(yb,Eb){for(var Lb=0;Lb<yb.length;++Lb)if(yb[Lb].id===Eb.id){yb[Lb].location=Eb.location;return}yb.push(Eb)}function xb(yb,Eb,Lb){Lb=35632===yb?Bc:Ic;var fc=Lb[Eb];if(!fc){var Oc=ac.str(Eb);fc=Fb.createShader(yb);Fb.shaderSource(fc,Oc);Fb.compileShader(fc);Lb[Eb]=fc}return fc}function Ab(yb,Eb){this.id=Gb++;this.fragId=yb;this.vertId=Eb;this.program=null;this.uniforms=[];this.attributes=[];qc.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function jc(yb,Eb,Lb){var fc=xb(35632,
yb.fragId);var Oc=xb(35633,yb.vertId);Eb=yb.program=Fb.createProgram();Fb.attachShader(Eb,fc);Fb.attachShader(Eb,Oc);if(Lb)for(fc=0;fc<Lb.length;++fc)Oc=Lb[fc],Fb.bindAttribLocation(Eb,Oc[0],Oc[1]);Fb.linkProgram(Eb);Oc=Fb.getProgramParameter(Eb,35718);qc.profile&&(yb.stats.uniformsCount=Oc);var xc=yb.uniforms;for(fc=0;fc<Oc;++fc)if(Lb=Fb.getActiveUniform(Eb,fc))if(1<Lb.size)for(var Mc=0;Mc<Lb.size;++Mc){var dd=Lb.name.replace("[0]","["+Mc+"]");vc(xc,new tc(dd,ac.id(dd),Fb.getUniformLocation(Eb,dd),
Lb))}else vc(xc,new tc(Lb.name,ac.id(Lb.name),Fb.getUniformLocation(Eb,Lb.name),Lb));Oc=Fb.getProgramParameter(Eb,35721);qc.profile&&(yb.stats.attributesCount=Oc);yb=yb.attributes;for(fc=0;fc<Oc;++fc)(Lb=Fb.getActiveAttrib(Eb,fc))&&vc(yb,new tc(Lb.name,ac.id(Lb.name),Fb.getAttribLocation(Eb,Lb.name),Lb))}var Bc={},Ic={},ec={},ic=[],Gb=0;qc.profile&&(Jc.getMaxUniformsCount=function(){var yb=0;ic.forEach(function(Eb){Eb.stats.uniformsCount>yb&&(yb=Eb.stats.uniformsCount)});return yb},Jc.getMaxAttributesCount=
function(){var yb=0;ic.forEach(function(Eb){Eb.stats.attributesCount>yb&&(yb=Eb.stats.attributesCount)});return yb});return{clear:function(){var yb=Fb.deleteShader.bind(Fb);kb(Bc).forEach(yb);Bc={};kb(Ic).forEach(yb);Ic={};ic.forEach(function(Eb){Fb.deleteProgram(Eb.program)});ic.length=0;ec={};Jc.shaderCount=0},program:function(yb,Eb,Lb,fc){var Oc=ec[Eb];Oc||(Oc=ec[Eb]={});var xc=Oc[yb];if(xc&&!fc)return xc;Eb=new Ab(Eb,yb);Jc.shaderCount++;jc(Eb,Lb,fc);xc||(Oc[yb]=Eb);ic.push(Eb);return Eb},restore:function(){Bc=
{};Ic={};for(var yb=0;yb<ic.length;++yb)jc(ic[yb],null,ic[yb].attributes.map(function(Eb){return[Eb.location,Eb.name]}))},shader:xb,frag:-1,vert:-1}}function X(Fb,ac,Jc,qc,tc,vc,xb){function Ab(Bc){var Ic=null===ac.next?5121:ac.next.colorAttachments[0].texture._texture.type;var ec=0,ic=0,Gb=qc.framebufferWidth,yb=qc.framebufferHeight,Eb=null;Oa(Bc)?Eb=Bc:Bc&&(ec=Bc.x|0,ic=Bc.y|0,Gb=(Bc.width||qc.framebufferWidth-ec)|0,yb=(Bc.height||qc.framebufferHeight-ic)|0,Eb=Bc.data||null);Jc();Bc=Gb*yb*4;Eb||
(5121===Ic?Eb=new Uint8Array(Bc):5126===Ic&&(Eb=Eb||new Float32Array(Bc)));Fb.pixelStorei(3333,4);Fb.readPixels(ec,ic,Gb,yb,6408,Ic,Eb);return Eb}function jc(Bc){var Ic;ac.setFBO({framebuffer:Bc.framebuffer},function(){Ic=Ab(Bc)});return Ic}return function(Bc){return Bc&&"framebuffer"in Bc?jc(Bc):Ab(Bc)}}function da(Fb){return Array.prototype.slice.call(Fb)}function ea(Fb){return da(Fb).join("")}function ca(){function Fb(){var Ab=[],jc=[];return va(function(){Ab.push.apply(Ab,da(arguments))},{def:function(){var Bc=
"v"+Jc++;jc.push(Bc);0<arguments.length&&(Ab.push(Bc,"\x3d"),Ab.push.apply(Ab,da(arguments)),Ab.push(";"));return Bc},toString:function(){return ea([0<jc.length?"var "+jc.join(",")+";":"",ea(Ab)])}})}function ac(){function Ab(ic,Gb){Bc(ic,Gb,"\x3d",jc.def(ic,Gb),";")}var jc=Fb(),Bc=Fb(),Ic=jc.toString,ec=Bc.toString;return va(function(){jc.apply(jc,da(arguments))},{def:jc.def,entry:jc,exit:Bc,save:Ab,set:function(ic,Gb,yb){Ab(ic,Gb);jc(ic,Gb,"\x3d",yb,";")},toString:function(){return Ic()+ec()}})}
var Jc=0,qc=[],tc=[],vc=Fb(),xb={};return{global:vc,link:function(Ab){for(var jc=0;jc<tc.length;++jc)if(tc[jc]===Ab)return qc[jc];jc="g"+Jc++;qc.push(jc);tc.push(Ab);return jc},block:Fb,proc:function(Ab,jc){function Bc(){var Gb="a"+Ic.length;Ic.push(Gb);return Gb}var Ic=[];jc=jc||0;for(var ec=0;ec<jc;++ec)Bc();ec=ac();var ic=ec.toString;return xb[Ab]=va(ec,{arg:Bc,toString:function(){return ea(["function(",Ic.join(),"){",ic(),"}"])}})},scope:ac,cond:function(){var Ab=ea(arguments),jc=ac(),Bc=ac(),
Ic=jc.toString,ec=Bc.toString;return va(jc,{then:function(){jc.apply(jc,da(arguments));return this},"else":function(){Bc.apply(Bc,da(arguments));return this},toString:function(){var ic=ec();ic&&(ic="else{"+ic+"}");return ea(["if(",Ab,"){",Ic(),"}",ic])}})},compile:function(){var Ab=['"use strict";',vc,"return {"];Object.keys(xb).forEach(function(Bc){Ab.push('"',Bc,'":',xb[Bc].toString(),",")});Ab.push("}");var jc=ea(Ab).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,
qc.concat(jc)).apply(null,tc)}}}function ia(Fb){return Array.isArray(Fb)||Oa(Fb)||t(Fb)}function ha(Fb){return Fb.sort(function(ac,Jc){return"viewport"===ac?-1:"viewport"===Jc?1:ac<Jc?-1:1})}function fa(Fb,ac,Jc,qc){this.thisDep=Fb;this.contextDep=ac;this.propDep=Jc;this.append=qc}function na(Fb){return Fb&&!(Fb.thisDep||Fb.contextDep||Fb.propDep)}function sa(Fb){return new fa(!1,!1,!1,Fb)}function ua(Fb,ac){var Jc=Fb.type;return 0===Jc?(Jc=Fb.data.length,new fa(!0,1<=Jc,2<=Jc,ac)):4===Jc?(Jc=Fb.data,
new fa(Jc.thisDep,Jc.contextDep,Jc.propDep,ac)):new fa(3===Jc,2===Jc,1===Jc,ac)}function ta(Fb,ac,Jc,qc,tc,vc,xb,Ab,jc,Bc,Ic,ec,ic,Gb,yb){function Eb(Qb){return Qb.replace(".","_")}function Lb(Qb,dc,Qc){var gd=Eb(Qb);Ec.push(Qb);Sb[gd]=Cb[gd]=!!Qc;Vc[gd]=dc}function fc(Qb,dc,Qc){var gd=Eb(Qb);Ec.push(Qb);Array.isArray(Qc)?(Cb[gd]=Qc.slice(),Sb[gd]=Qc.slice()):Cb[gd]=Sb[gd]=Qc;mc[gd]=dc}function Oc(){var Qb=ca(),dc=Qb.link,Qc=Qb.global;Qb.id=Ad++;Qb.batchId="0";var gd=dc(Sc),Uc=Qb.shared={props:"a0"};
Object.keys(Sc).forEach(function(gc){Uc[gc]=Qc.def(gd,".",gc)});var Zc=Qb.next={},Ub=Qb.current={};Object.keys(mc).forEach(function(gc){Array.isArray(Cb[gc])&&(Zc[gc]=Qc.def(Uc.next,".",gc),Ub[gc]=Qc.def(Uc.current,".",gc))});var sc=Qb.constants={};Object.keys(jd).forEach(function(gc){sc[gc]=Qc.def(JSON.stringify(jd[gc]))});Qb.invoke=function(gc,wc){switch(wc.type){case 0:var od=["this",Uc.context,Uc.props,Qb.batchId];return gc.def(dc(wc.data),".call(",od.slice(0,Math.max(wc.data.length+1,4)),")");
case 1:return gc.def(Uc.props,wc.data);case 2:return gc.def(Uc.context,wc.data);case 3:return gc.def("this",wc.data);case 4:return wc.data.append(Qb,gc),wc.data.ref}};Qb.attribCache={};var Dc={};Qb.scopeAttrib=function(gc){gc=ac.id(gc);if(gc in Dc)return Dc[gc];var wc=Bc.scope[gc];wc||(wc=Bc.scope[gc]=new tf);return Dc[gc]=dc(wc)};return Qb}function xc(Qb){var dc=Qb["static"];Qb=Qb.dynamic;if("profile"in dc){var Qc=!!dc.profile;var gd=sa(function(Zc,Ub){return Qc});gd.enable=Qc}else if("profile"in
Qb){var Uc=Qb.profile;gd=ua(Uc,function(Zc,Ub){return Zc.invoke(Ub,Uc)})}return gd}function Mc(Qb,dc){dc=Qb["static"];Qb=Qb.dynamic;if("framebuffer"in dc){var Qc=dc.framebuffer;return Qc?(Qc=Ab.getFramebuffer(Qc),sa(function(Uc,Zc){var Ub=Uc.link(Qc);Uc=Uc.shared;Zc.set(Uc.framebuffer,".next",Ub);Uc=Uc.context;Zc.set(Uc,".framebufferWidth",Ub+".width");Zc.set(Uc,".framebufferHeight",Ub+".height");return Ub})):sa(function(Uc,Zc){Uc=Uc.shared;Zc.set(Uc.framebuffer,".next","null");Uc=Uc.context;Zc.set(Uc,
".framebufferWidth",Uc+".drawingBufferWidth");Zc.set(Uc,".framebufferHeight",Uc+".drawingBufferHeight");return"null"})}if("framebuffer"in Qb){var gd=Qb.framebuffer;return ua(gd,function(Uc,Zc){var Ub=Uc.invoke(Zc,gd);Uc=Uc.shared;var sc=Uc.framebuffer;Ub=Zc.def(sc,".getFramebuffer(",Ub,")");Zc.set(sc,".next",Ub);Uc=Uc.context;Zc.set(Uc,".framebufferWidth",Ub+"?"+Ub+".width:"+Uc+".drawingBufferWidth");Zc.set(Uc,".framebufferHeight",Ub+"?"+Ub+".height:"+Uc+".drawingBufferHeight");return Ub})}return null}
function dd(Qb,dc,Qc){function gd(sc){if(sc in Uc){var Dc=Uc[sc];sc=!0;var gc=Dc.x|0,wc=Dc.y|0,od,Dd;"width"in Dc?od=Dc.width|0:sc=!1;"height"in Dc?Dd=Dc.height|0:sc=!1;return new fa(!sc&&dc&&dc.thisDep,!sc&&dc&&dc.contextDep,!sc&&dc&&dc.propDep,function(Jd,Hd){Jd=Jd.shared.context;var Ie=od;"width"in Dc||(Ie=Hd.def(Jd,".","framebufferWidth","-",gc));var Ge=Dd;"height"in Dc||(Ge=Hd.def(Jd,".","framebufferHeight","-",wc));return[gc,wc,Ie,Ge]})}if(sc in Zc){var Ld=Zc[sc];sc=ua(Ld,function(Jd,Hd){var Ie=
Jd.invoke(Hd,Ld);Jd=Jd.shared.context;var Ge=Hd.def(Ie,".x|0"),Se=Hd.def(Ie,".y|0"),xe=Hd.def('"width" in ',Ie,"?",Ie,".width|0:","(",Jd,".","framebufferWidth","-",Ge,")");Ie=Hd.def('"height" in ',Ie,"?",Ie,".height|0:","(",Jd,".","framebufferHeight","-",Se,")");return[Ge,Se,xe,Ie]});dc&&(sc.thisDep=sc.thisDep||dc.thisDep,sc.contextDep=sc.contextDep||dc.contextDep,sc.propDep=sc.propDep||dc.propDep);return sc}return dc?new fa(dc.thisDep,dc.contextDep,dc.propDep,function(Jd,Hd){Jd=Jd.shared.context;
return[0,0,Hd.def(Jd,".","framebufferWidth"),Hd.def(Jd,".","framebufferHeight")]}):null}var Uc=Qb["static"],Zc=Qb.dynamic;if(Qb=gd("viewport")){var Ub=Qb;Qb=new fa(Qb.thisDep,Qb.contextDep,Qb.propDep,function(sc,Dc){var gc=Ub.append(sc,Dc);sc=sc.shared.context;Dc.set(sc,".viewportWidth",gc[2]);Dc.set(sc,".viewportHeight",gc[3]);return gc})}return{viewport:Qb,scissor_box:gd("scissor.box")}}function bd(Qb,dc){Qb=Qb["static"];if("string"===typeof Qb.frag&&"string"===typeof Qb.vert){if(0<Object.keys(dc.dynamic).length)return null;
Qb=dc["static"];dc=Object.keys(Qb);if(0<dc.length&&"number"===typeof Qb[dc[0]]){for(var Qc=[],gd=0;gd<dc.length;++gd)Qc.push([Qb[dc[gd]]|0,dc[gd]]);return Qc}}return null}function qd(Qb,dc,Qc){function gd(gc){if(gc in Uc){var wc=ac.id(Uc[gc]);gc=sa(function(){return wc});gc.id=wc;return gc}if(gc in Zc){var od=Zc[gc];return ua(od,function(Dd,Ld){var Jd=Dd.invoke(Ld,od);return Ld.def(Dd.shared.strings,".id(",Jd,")")})}return null}var Uc=Qb["static"],Zc=Qb.dynamic,Ub=gd("frag"),sc=gd("vert"),Dc=null;
na(Ub)&&na(sc)?(Dc=Ic.program(sc.id,Ub.id,null,Qc),Qb=sa(function(gc,wc){return gc.link(Dc)})):Qb=new fa(Ub&&Ub.thisDep||sc&&sc.thisDep,Ub&&Ub.contextDep||sc&&sc.contextDep,Ub&&Ub.propDep||sc&&sc.propDep,function(gc,wc){var od=gc.shared.shader;var Dd=Ub?Ub.append(gc,wc):wc.def(od,".","frag");gc=sc?sc.append(gc,wc):wc.def(od,".","vert");return wc.def(od+".program("+gc+","+Dd+")")});return{frag:Ub,vert:sc,progVar:Qb,program:Dc}}function Bd(Qb,dc){function Qc(sc,Dc){if(sc in gd){var gc=gd[sc]|0;return sa(function(od,
Dd){Dc&&(od.OFFSET=gc);return gc})}if(sc in Uc){var wc=Uc[sc];return ua(wc,function(od,Dd){Dd=od.invoke(Dd,wc);Dc&&(od.OFFSET=Dd);return Dd})}return Dc&&Zc?sa(function(od,Dd){od.OFFSET="0";return 0}):null}var gd=Qb["static"],Uc=Qb.dynamic,Zc=function(){if("elements"in gd){var sc=gd.elements;ia(sc)?sc=vc.getElements(vc.create(sc,!0)):sc&&(sc=vc.getElements(sc));var Dc=sa(function(wc,od){return sc?(od=wc.link(sc),wc.ELEMENTS=od):wc.ELEMENTS=null});Dc.value=sc;return Dc}if("elements"in Uc){var gc=Uc.elements;
return ua(gc,function(wc,od){var Dd=wc.shared,Ld=Dd.isBufferArgs;Dd=Dd.elements;var Jd=wc.invoke(od,gc),Hd=od.def("null");Ld=od.def(Ld,"(",Jd,")");Jd=wc.cond(Ld).then(Hd,"\x3d",Dd,".createStream(",Jd,");")["else"](Hd,"\x3d",Dd,".getElements(",Jd,");");od.entry(Jd);od.exit(wc.cond(Ld).then(Dd,".destroyStream(",Hd,");"));return wc.ELEMENTS=Hd})}return null}(),Ub=Qc("offset",!0);return{elements:Zc,primitive:function(){if("primitive"in gd){var sc=gd.primitive;return sa(function(gc,wc){return Ea[sc]})}if("primitive"in
Uc){var Dc=Uc.primitive;return ua(Dc,function(gc,wc){var od=gc.constants.primTypes;gc=gc.invoke(wc,Dc);return wc.def(od,"[",gc,"]")})}return Zc?na(Zc)?Zc.value?sa(function(gc,wc){return wc.def(gc.ELEMENTS,".primType")}):sa(function(){return 4}):new fa(Zc.thisDep,Zc.contextDep,Zc.propDep,function(gc,wc){gc=gc.ELEMENTS;return wc.def(gc,"?",gc,".primType:",4)}):null}(),count:function(){if("count"in gd){var sc=gd.count|0;return sa(function(){return sc})}if("count"in Uc){var Dc=Uc.count;return ua(Dc,function(gc,
wc){return gc.invoke(wc,Dc)})}return Zc?na(Zc)?Zc?Ub?new fa(Ub.thisDep,Ub.contextDep,Ub.propDep,function(gc,wc){return wc.def(gc.ELEMENTS,".vertCount-",gc.OFFSET)}):sa(function(gc,wc){return wc.def(gc.ELEMENTS,".vertCount")}):sa(function(){return-1}):new fa(Zc.thisDep||Ub.thisDep,Zc.contextDep||Ub.contextDep,Zc.propDep||Ub.propDep,function(gc,wc){var od=gc.ELEMENTS;return gc.OFFSET?wc.def(od,"?",od,".vertCount-",gc.OFFSET,":-1"):wc.def(od,"?",od,".vertCount:-1")}):null}(),instances:Qc("instances",
!1),offset:Ub}}function md(Qb,dc){var Qc=Qb["static"],gd=Qb.dynamic,Uc={};Ec.forEach(function(Zc){function Ub(Dc,gc){if(Zc in Qc){var wc=Dc(Qc[Zc]);Uc[sc]=sa(function(){return wc})}else if(Zc in gd){var od=gd[Zc];Uc[sc]=ua(od,function(Dd,Ld){return gc(Dd,Ld,Dd.invoke(Ld,od))})}}var sc=Eb(Zc);switch(Zc){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return Ub(function(Dc){return Dc},
function(Dc,gc,wc){return wc});case "depth.func":return Ub(function(Dc){return ed[Dc]},function(Dc,gc,wc){return gc.def(Dc.constants.compareFuncs,"[",wc,"]")});case "depth.range":return Ub(function(Dc){return Dc},function(Dc,gc,wc){Dc=gc.def("+",wc,"[0]");gc=gc.def("+",wc,"[1]");return[Dc,gc]});case "blend.func":return Ub(function(Dc){return[Ac["srcRGB"in Dc?Dc.srcRGB:Dc.src],Ac["dstRGB"in Dc?Dc.dstRGB:Dc.dst],Ac["srcAlpha"in Dc?Dc.srcAlpha:Dc.src],Ac["dstAlpha"in Dc?Dc.dstAlpha:Dc.dst]]},function(Dc,
gc,wc){function od(Hd,Ie){return gc.def('"',Hd,Ie,'" in ',wc,"?",wc,".",Hd,Ie,":",wc,".",Hd)}Dc=Dc.constants.blendFuncs;var Dd=od("src","RGB"),Ld=od("dst","RGB");Dd=gc.def(Dc,"[",Dd,"]");var Jd=gc.def(Dc,"[",od("src","Alpha"),"]");Ld=gc.def(Dc,"[",Ld,"]");Dc=gc.def(Dc,"[",od("dst","Alpha"),"]");return[Dd,Ld,Jd,Dc]});case "blend.equation":return Ub(function(Dc){if("string"===typeof Dc)return[gf[Dc],gf[Dc]];if("object"===typeof Dc)return[gf[Dc.rgb],gf[Dc.alpha]]},function(Dc,gc,wc){var od=Dc.constants.blendEquations,
Dd=gc.def(),Ld=gc.def();Dc=Dc.cond("typeof ",wc,'\x3d\x3d\x3d"string"');Dc.then(Dd,"\x3d",Ld,"\x3d",od,"[",wc,"];");Dc["else"](Dd,"\x3d",od,"[",wc,".rgb];",Ld,"\x3d",od,"[",wc,".alpha];");gc(Dc);return[Dd,Ld]});case "blend.color":return Ub(function(Dc){return f(4,function(gc){return+Dc[gc]})},function(Dc,gc,wc){return f(4,function(od){return gc.def("+",wc,"[",od,"]")})});case "stencil.mask":return Ub(function(Dc){return Dc|0},function(Dc,gc,wc){return gc.def(wc,"|0")});case "stencil.func":return Ub(function(Dc){return[ed[Dc.cmp||
"keep"],Dc.ref||0,"mask"in Dc?Dc.mask:-1]},function(Dc,gc,wc){Dc=gc.def('"cmp" in ',wc,"?",Dc.constants.compareFuncs,"[",wc,".cmp]",":",7680);var od=gc.def(wc,".ref|0");gc=gc.def('"mask" in ',wc,"?",wc,".mask|0:-1");return[Dc,od,gc]});case "stencil.opFront":case "stencil.opBack":return Ub(function(Dc){return["stencil.opBack"===Zc?1029:1028,Rc[Dc.fail||"keep"],Rc[Dc.zfail||"keep"],Rc[Dc.zpass||"keep"]]},function(Dc,gc,wc){function od(Ld){return gc.def('"',Ld,'" in ',wc,"?",Dd,"[",wc,".",Ld,"]:",7680)}
var Dd=Dc.constants.stencilOps;return["stencil.opBack"===Zc?1029:1028,od("fail"),od("zfail"),od("zpass")]});case "polygonOffset.offset":return Ub(function(Dc){return[Dc.factor|0,Dc.units|0]},function(Dc,gc,wc){Dc=gc.def(wc,".factor|0");gc=gc.def(wc,".units|0");return[Dc,gc]});case "cull.face":return Ub(function(Dc){var gc=0;"front"===Dc?gc=1028:"back"===Dc&&(gc=1029);return gc},function(Dc,gc,wc){return gc.def(wc,'\x3d\x3d\x3d"front"?',1028,":",1029)});case "lineWidth":return Ub(function(Dc){return Dc},
function(Dc,gc,wc){return wc});case "frontFace":return Ub(function(Dc){return id[Dc]},function(Dc,gc,wc){return gc.def(wc+'\x3d\x3d\x3d"cw"?2304:2305')});case "colorMask":return Ub(function(Dc){return Dc.map(function(gc){return!!gc})},function(Dc,gc,wc){return f(4,function(od){return"!!"+wc+"["+od+"]"})});case "sample.coverage":return Ub(function(Dc){return["value"in Dc?Dc.value:1,!!Dc.invert]},function(Dc,gc,wc){Dc=gc.def('"value" in ',wc,"?+",wc,".value:1");gc=gc.def("!!",wc,".invert");return[Dc,
gc]})}});return Uc}function Fd(Qb,dc){var Qc=Qb["static"],gd=Qb.dynamic,Uc={};Object.keys(Qc).forEach(function(Zc){var Ub=Qc[Zc];if("number"===typeof Ub||"boolean"===typeof Ub)var sc=sa(function(){return Ub});else if("function"===typeof Ub){var Dc=Ub._reglType;if("texture2d"===Dc||"textureCube"===Dc)sc=sa(function(gc){return gc.link(Ub)});else if("framebuffer"===Dc||"framebufferCube"===Dc)sc=sa(function(gc){return gc.link(Ub.color[0])})}else v(Ub)&&(sc=sa(function(gc){return gc.global.def("[",f(Ub.length,
function(wc){return Ub[wc]}),"]")}));sc.value=Ub;Uc[Zc]=sc});Object.keys(gd).forEach(function(Zc){var Ub=gd[Zc];Uc[Zc]=ua(Ub,function(sc,Dc){return sc.invoke(Dc,Ub)})});return Uc}function Od(Qb,dc){var Qc=Qb["static"],gd=Qb.dynamic,Uc={};Object.keys(Qc).forEach(function(Zc){var Ub=Qc[Zc],sc=ac.id(Zc),Dc=new tf;if(ia(Ub))Dc.state=1,Dc.buffer=tc.getBuffer(tc.create(Ub,34962,!1,!0)),Dc.type=0;else{var gc=tc.getBuffer(Ub);if(gc)Dc.state=1,Dc.buffer=gc,Dc.type=0;else if("constant"in Ub){var wc=Ub.constant;
Dc.buffer="null";Dc.state=2;"number"===typeof wc?Dc.x=wc:Zb.forEach(function(Ie,Ge){Ge<wc.length&&(Dc[Ie]=wc[Ge])})}else{gc=ia(Ub.buffer)?tc.getBuffer(tc.create(Ub.buffer,34962,!1,!0)):tc.getBuffer(Ub.buffer);var od=Ub.offset|0,Dd=Ub.stride|0,Ld=Ub.size|0,Jd=!!Ub.normalized,Hd=0;"type"in Ub&&(Hd=nb[Ub.type]);Ub=Ub.divisor|0;Dc.buffer=gc;Dc.state=1;Dc.size=Ld;Dc.normalized=Jd;Dc.type=Hd||gc.dtype;Dc.offset=od;Dc.stride=Dd;Dc.divisor=Ub}}Uc[Zc]=sa(function(Ie,Ge){Ge=Ie.attribCache;if(sc in Ge)return Ge[sc];
var Se={isStream:!1};Object.keys(Dc).forEach(function(xe){Se[xe]=Dc[xe]});Dc.buffer&&(Se.buffer=Ie.link(Dc.buffer),Se.type=Se.type||Se.buffer+".dtype");return Ge[sc]=Se})});Object.keys(gd).forEach(function(Zc){var Ub=gd[Zc];Uc[Zc]=ua(Ub,function(sc,Dc){function gc(Ge){Dc(Ld[Ge],"\x3d",wc,".",Ge,"|0;")}var wc=sc.invoke(Dc,Ub),od=sc.shared;sc=sc.constants;var Dd=od.isBufferArgs;od=od.buffer;var Ld={isStream:Dc.def(!1)},Jd=new tf;Jd.state=1;Object.keys(Jd).forEach(function(Ge){Ld[Ge]=Dc.def(""+Jd[Ge])});
var Hd=Ld.buffer,Ie=Ld.type;Dc("if(",Dd,"(",wc,")){",Ld.isStream,"\x3dtrue;",Hd,"\x3d",od,".createStream(",34962,",",wc,");",Ie,"\x3d",Hd,".dtype;","}else{",Hd,"\x3d",od,".getBuffer(",wc,");","if(",Hd,"){",Ie,"\x3d",Hd,".dtype;",'}else if("constant" in ',wc,"){",Ld.state,"\x3d",2,";","if(typeof "+wc+'.constant \x3d\x3d\x3d "number"){',Ld[Zb[0]],"\x3d",wc,".constant;",Zb.slice(1).map(function(Ge){return Ld[Ge]}).join("\x3d"),"\x3d0;","}else{",Zb.map(function(Ge,Se){return Ld[Ge]+"\x3d"+wc+".constant.length\x3e"+
Se+"?"+wc+".constant["+Se+"]:0;"}).join(""),"}}else{","if(",Dd,"(",wc,".buffer)){",Hd,"\x3d",od,".createStream(",34962,",",wc,".buffer);","}else{",Hd,"\x3d",od,".getBuffer(",wc,".buffer);","}",Ie,'\x3d"type" in ',wc,"?",sc.glTypes,"[",wc,".type]:",Hd,".dtype;",Ld.normalized,"\x3d!!",wc,".normalized;");gc("size");gc("offset");gc("stride");gc("divisor");Dc("}}");Dc.exit("if(",Ld.isStream,"){",od,".destroyStream(",Hd,");","}");return Ld})});return Uc}function sd(Qb,dc){dc=Qb["static"];Qb=Qb.dynamic;
if("vao"in dc){var Qc=dc.vao;null!==Qc&&null===Bc.getVAO(Qc)&&(Qc=Bc.createVAO(Qc));return sa(function(Uc){return Uc.link(Bc.getVAO(Qc))})}if("vao"in Qb){var gd=Qb.vao;return ua(gd,function(Uc,Zc){var Ub=Uc.invoke(Zc,gd);return Zc.def(Uc.shared.vao+".getVAO("+Ub+")")})}return null}function cd(Qb){var dc=Qb["static"],Qc=Qb.dynamic,gd={};Object.keys(dc).forEach(function(Uc){var Zc=dc[Uc];gd[Uc]=sa(function(Ub,sc){return"number"===typeof Zc||"boolean"===typeof Zc?""+Zc:Ub.link(Zc)})});Object.keys(Qc).forEach(function(Uc){var Zc=
Qc[Uc];gd[Uc]=ua(Zc,function(Ub,sc){return Ub.invoke(sc,Zc)})});return gd}function Gd(Qb,dc,Qc,gd,Uc){function Zc(Hd){var Ie=Dc[Hd];Ie&&(wc[Hd]=Ie)}var Ub=bd(Qb,dc),sc=Mc(Qb,Uc),Dc=dd(Qb,sc,Uc),gc=Bd(Qb,Uc),wc=md(Qb,Uc),od=qd(Qb,Uc,Ub);Zc("viewport");Zc(Eb("scissor.box"));var Dd=0<Object.keys(wc).length;sc={framebuffer:sc,draw:gc,shader:od,state:wc,dirty:Dd,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};sc.profile=xc(Qb,Uc);sc.uniforms=Fd(Qc,Uc);sc.drawVAO=sc.scopeVAO=sd(Qb,Uc);if(!sc.drawVAO&&
od.program&&!Ub&&Jc.angle_instanced_arrays){var Ld=!0;Qb=od.program.attributes.map(function(Hd){Hd=dc["static"][Hd];Ld=Ld&&!!Hd;return Hd});if(Ld&&0<Qb.length){var Jd=Bc.getVAO(Bc.createVAO(Qb));sc.drawVAO=new fa(null,null,null,function(Hd,Ie){return Hd.link(Jd)});sc.useVAO=!0}}Ub?sc.useVAO=!0:sc.attributes=Od(dc,Uc);sc.context=cd(gd,Uc);return sc}function Nd(Qb,dc,Qc){var gd=Qb.shared.context,Uc=Qb.scope();Object.keys(Qc).forEach(function(Zc){dc.save(gd,"."+Zc);Uc(gd,".",Zc,"\x3d",Qc[Zc].append(Qb,
dc),";")});dc(Uc)}function Pd(Qb,dc,Qc,gd){var Uc=Qb.shared,Zc=Uc.gl,Ub=Uc.framebuffer,sc;Hb&&(sc=dc.def(Uc.extensions,".webgl_draw_buffers"));var Dc=Qb.constants;Uc=Dc.drawBuffer;Dc=Dc.backBuffer;Qb=Qc?Qc.append(Qb,dc):dc.def(Ub,".next");gd||dc("if(",Qb,"!\x3d\x3d",Ub,".cur){");dc("if(",Qb,"){",Zc,".bindFramebuffer(",36160,",",Qb,".framebuffer);");Hb&&dc(sc,".drawBuffersWEBGL(",Uc,"[",Qb,".colorAttachments.length]);");dc("}else{",Zc,".bindFramebuffer(",36160,",null);");Hb&&dc(sc,".drawBuffersWEBGL(",
Dc,");");dc("}",Ub,".cur\x3d",Qb,";");gd||dc("}")}function Ke(Qb,dc,Qc){var gd=Qb.shared,Uc=gd.gl,Zc=Qb.current,Ub=Qb.next,sc=gd.current,Dc=gd.next,gc=Qb.cond(sc,".dirty");Ec.forEach(function(wc){wc=Eb(wc);if(!(wc in Qc.state))if(wc in Ub){var od=Ub[wc];var Dd=Zc[wc];var Ld=f(Cb[wc].length,function(Jd){return gc.def(od,"[",Jd,"]")});gc(Qb.cond(Ld.map(function(Jd,Hd){return Jd+"!\x3d\x3d"+Dd+"["+Hd+"]"}).join("||")).then(Uc,".",mc[wc],"(",Ld,");",Ld.map(function(Jd,Hd){return Dd+"["+Hd+"]\x3d"+Jd}).join(";"),
";"))}else od=gc.def(Dc,".",wc),Ld=Qb.cond(od,"!\x3d\x3d",sc,".",wc),gc(Ld),wc in Vc?Ld(Qb.cond(od).then(Uc,".enable(",Vc[wc],");")["else"](Uc,".disable(",Vc[wc],");"),sc,".",wc,"\x3d",od,";"):Ld(Uc,".",mc[wc],"(",od,");",sc,".",wc,"\x3d",od,";")});0===Object.keys(Qc.state).length&&gc(sc,".dirty\x3dfalse;");dc(gc)}function Wd(Qb,dc,Qc,gd){var Uc=Qb.shared,Zc=Qb.current,Ub=Uc.current,sc=Uc.gl;ha(Object.keys(Qc)).forEach(function(Dc){var gc=Qc[Dc];if(!gd||gd(gc)){var wc=gc.append(Qb,dc);if(Vc[Dc]){var od=
Vc[Dc];na(gc)?wc?dc(sc,".enable(",od,");"):dc(sc,".disable(",od,");"):dc(Qb.cond(wc).then(sc,".enable(",od,");")["else"](sc,".disable(",od,");"));dc(Ub,".",Dc,"\x3d",wc,";")}else if(v(wc)){var Dd=Zc[Dc];dc(sc,".",mc[Dc],"(",wc,");",wc.map(function(Ld,Jd){return Dd+"["+Jd+"]\x3d"+Ld}).join(";"),";")}else dc(sc,".",mc[Dc],"(",wc,");",Ub,".",Dc,"\x3d",wc,";")}})}function Wc(Qb,dc){Wa&&(Qb.instancing=dc.def(Qb.shared.extensions,".angle_instanced_arrays"))}function rd(Qb,dc,Qc,gd,Uc){function Zc(){return"undefined"===
typeof performance?"Date.now()":"performance.now()"}function Ub(Hd){Ld=dc.def();Hd(Ld,"\x3d",Zc(),";");"string"===typeof Uc?Hd(wc,".count+\x3d",Uc,";"):Hd(wc,".count++;");Gb&&(gd?(Jd=dc.def(),Hd(Jd,"\x3d",Dd,".getNumPendingQueries();")):Hd(Dd,".beginQuery(",wc,");"))}function sc(Hd){Hd(wc,".cpuTime+\x3d",Zc(),"-",Ld,";");Gb&&(gd?Hd(Dd,".pushScopeStats(",Jd,",",Dd,".getNumPendingQueries(),",wc,");"):Hd(Dd,".endQuery();"))}function Dc(Hd){var Ie=dc.def(od,".profile");dc(od,".profile\x3d",Hd,";");dc.exit(od,
".profile\x3d",Ie,";")}var gc=Qb.shared,wc=Qb.stats,od=gc.current,Dd=gc.timer;Qc=Qc.profile;var Ld,Jd;if(Qc){if(na(Qc)){Qc.enable?(Ub(dc),sc(dc.exit),Dc("true")):Dc("false");return}Qc=Qc.append(Qb,dc);Dc(Qc)}else Qc=dc.def(od,".profile");gc=Qb.block();Ub(gc);dc("if(",Qc,"){",gc,"}");Qb=Qb.block();sc(Qb);dc.exit("if(",Qc,"){",Qb,"}")}function Kd(Qb,dc,Qc,gd,Uc){function Zc(Dc){switch(Dc){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;
default:return 1}}function Ub(Dc,gc,wc){function od(){dc("if(!",Hd,".buffer){",Ld,".enableVertexAttribArray(",Jd,");}");var xe=wc.type;var Oe=wc.size?dc.def(wc.size,"||",gc):gc;dc("if(",Hd,".type!\x3d\x3d",xe,"||",Hd,".size!\x3d\x3d",Oe,"||",Se.map(function(hf){return Hd+"."+hf+"!\x3d\x3d"+wc[hf]}).join("||"),"){",Ld,".bindBuffer(",34962,",",Ie,".buffer);",Ld,".vertexAttribPointer(",[Jd,Oe,xe,wc.normalized,wc.stride,wc.offset],");",Hd,".type\x3d",xe,";",Hd,".size\x3d",Oe,";",Se.map(function(hf){return Hd+
"."+hf+"\x3d"+wc[hf]+";"}).join(""),"}");Wa&&(xe=wc.divisor,dc("if(",Hd,".divisor!\x3d\x3d",xe,"){",Qb.instancing,".vertexAttribDivisorANGLE(",[Jd,xe],");",Hd,".divisor\x3d",xe,";}"))}function Dd(){dc("if(",Hd,".buffer){",Ld,".disableVertexAttribArray(",Jd,");",Hd,".buffer\x3dnull;","}if(",Zb.map(function(xe,Oe){return Hd+"."+xe+"!\x3d\x3d"+Ge[Oe]}).join("||"),"){",Ld,".vertexAttrib4f(",Jd,",",Ge,");",Zb.map(function(xe,Oe){return Hd+"."+xe+"\x3d"+Ge[Oe]+";"}).join(""),"}")}var Ld=sc.gl,Jd=dc.def(Dc,
".location"),Hd=dc.def(sc.attributes,"[",Jd,"]");Dc=wc.state;var Ie=wc.buffer,Ge=[wc.x,wc.y,wc.z,wc.w],Se=["buffer","normalized","offset","stride"];1===Dc?od():2===Dc?Dd():(dc("if(",Dc,"\x3d\x3d\x3d",1,"){"),od(),dc("}else{"),Dd(),dc("}"))}var sc=Qb.shared;gd.forEach(function(Dc){var gc=Dc.name,wc=Qc.attributes[gc];if(wc){if(!Uc(wc))return;var od=wc.append(Qb,dc)}else{if(!Uc(Tc))return;var Dd=Qb.scopeAttrib(gc);od={};Object.keys(new tf).forEach(function(Ld){od[Ld]=dc.def(Dd,".",Ld)})}Ub(Qb.link(Dc),
Zc(Dc.info.type),od)})}function Rd(Qb,dc,Qc,gd,Uc){for(var Zc=Qb.shared,Ub=Zc.gl,sc,Dc=0;Dc<gd.length;++Dc){var gc=gd[Dc],wc=gc.name,od=gc.info.type,Dd=Qc.uniforms[wc];gc=Qb.link(gc)+".location";if(Dd){if(!Uc(Dd))continue;if(na(Dd)){wc=Dd.value;if(35678===od||35680===od)od=Qb.link(wc._texture||wc.color[0]._texture),dc(Ub,".uniform1i(",gc,",",od+".bind());"),dc.exit(od,".unbind();");else if(35674===od||35675===od||35676===od)wc=Qb.global.def("new Float32Array(["+Array.prototype.slice.call(wc)+"])"),
Dd=2,35675===od?Dd=3:35676===od&&(Dd=4),dc(Ub,".uniformMatrix",Dd,"fv(",gc,",false,",wc,");");else{switch(od){case 5126:sc="1f";break;case 35664:sc="2f";break;case 35665:sc="3f";break;case 35666:sc="4f";break;case 35670:sc="1i";break;case 5124:sc="1i";break;case 35671:sc="2i";break;case 35667:sc="2i";break;case 35672:sc="3i";break;case 35668:sc="3i";break;case 35673:sc="4i";break;case 35669:sc="4i"}dc(Ub,".uniform",sc,"(",gc,",",v(wc)?Array.prototype.slice.call(wc):wc,");")}continue}else var Ld=Dd.append(Qb,
dc)}else{if(!Uc(Tc))continue;Ld=dc.def(Zc.uniforms,"[",ac.id(wc),"]")}35678===od?dc("if(",Ld,"\x26\x26",Ld,'._reglType\x3d\x3d\x3d"framebuffer"){',Ld,"\x3d",Ld,".color[0];","}"):35680===od&&dc("if(",Ld,"\x26\x26",Ld,'._reglType\x3d\x3d\x3d"framebufferCube"){',Ld,"\x3d",Ld,".color[0];","}");wc=1;switch(od){case 35678:case 35680:od=dc.def(Ld,"._texture");dc(Ub,".uniform1i(",gc,",",od,".bind());");dc.exit(od,".unbind();");continue;case 5124:case 35670:sc="1i";break;case 35667:case 35671:sc="2i";wc=2;
break;case 35668:case 35672:sc="3i";wc=3;break;case 35669:case 35673:sc="4i";wc=4;break;case 5126:sc="1f";break;case 35664:sc="2f";wc=2;break;case 35665:sc="3f";wc=3;break;case 35666:sc="4f";wc=4;break;case 35674:sc="Matrix2fv";break;case 35675:sc="Matrix3fv";break;case 35676:sc="Matrix4fv"}dc(Ub,".uniform",sc,"(",gc,",");if("M"===sc.charAt(0)){gc=Math.pow(od-35674+2,2);var Jd=Qb.global.def("new Float32Array(",gc,")");dc("false,(Array.isArray(",Ld,")||",Ld," instanceof Float32Array)?",Ld,":(",f(gc,
function(Hd){return Jd+"["+Hd+"]\x3d"+Ld+"["+Hd+"]"}),",",Jd,")")}else 1<wc?dc(f(wc,function(Hd){return Ld+"["+Hd+"]"})):dc(Ld);dc(");")}}function se(Qb,dc,Qc,gd){function Uc(xe){var Oe=wc[xe];return Oe?Oe.contextDep&&gd.contextDynamic||Oe.propDep?Oe.append(Qb,Qc):Oe.append(Qb,dc):dc.def(gc,".",xe)}function Zc(){function xe(){Qc(Ie,".drawElementsInstancedANGLE(",[Dd,Jd,Ge,Ld+"\x3c\x3c(("+Ge+"-5121)\x3e\x3e1)",Hd],");")}function Oe(){Qc(Ie,".drawArraysInstancedANGLE(",[Dd,Ld,Jd,Hd],");")}od?Se?xe():
(Qc("if(",od,"){"),xe(),Qc("}else{"),Oe(),Qc("}")):Oe()}function Ub(){function xe(){Qc(Dc+".drawElements("+[Dd,Jd,Ge,Ld+"\x3c\x3c(("+Ge+"-5121)\x3e\x3e1)"]+");")}function Oe(){Qc(Dc+".drawArrays("+[Dd,Ld,Jd]+");")}od?Se?xe():(Qc("if(",od,"){"),xe(),Qc("}else{"),Oe(),Qc("}")):Oe()}var sc=Qb.shared,Dc=sc.gl,gc=sc.draw,wc=gd.draw,od=function(){var xe=wc.elements,Oe=dc;if(xe){if(xe.contextDep&&gd.contextDynamic||xe.propDep)Oe=Qc;xe=xe.append(Qb,Oe)}else xe=Oe.def(gc,".","elements");xe&&Oe("if("+xe+")"+
Dc+".bindBuffer(34963,"+xe+".buffer.buffer);");return xe}(),Dd=Uc("primitive"),Ld=Uc("offset"),Jd=function(){var xe=wc.count,Oe=dc;if(xe){if(xe.contextDep&&gd.contextDynamic||xe.propDep)Oe=Qc;xe=xe.append(Qb,Oe)}else xe=Oe.def(gc,".","count");return xe}();if("number"===typeof Jd){if(0===Jd)return}else Qc("if(",Jd,"){"),Qc.exit("}");var Hd,Ie;Wa&&(Hd=Uc("instances"),Ie=Qb.instancing);var Ge=od+".type",Se=wc.elements&&na(wc.elements);Wa&&("number"!==typeof Hd||0<=Hd)?"string"===typeof Hd?(Qc("if(",
Hd,"\x3e0){"),Zc(),Qc("}else if(",Hd,"\x3c0){"),Ub(),Qc("}")):Zc():Ub()}function Ee(Qb,dc,Qc,gd,Uc){dc=Oc();Uc=dc.proc("body",Uc);Wa&&(dc.instancing=Uc.def(dc.shared.extensions,".angle_instanced_arrays"));Qb(dc,Uc,Qc,gd);return dc.compile().body}function $d(Qb,dc,Qc,gd){Wc(Qb,dc);Qc.useVAO?Qc.drawVAO?dc(Qb.shared.vao,".setVAO(",Qc.drawVAO.append(Qb,dc),");"):dc(Qb.shared.vao,".setVAO(",Qb.shared.vao,".targetVAO);"):(dc(Qb.shared.vao,".setVAO(null);"),Kd(Qb,dc,Qc,gd.attributes,function(){return!0}));
Rd(Qb,dc,Qc,gd.uniforms,function(){return!0});se(Qb,dc,dc,Qc)}function Ud(Qb,dc){var Qc=Qb.proc("draw",1);Wc(Qb,Qc);Nd(Qb,Qc,dc.context);Pd(Qb,Qc,dc.framebuffer);Ke(Qb,Qc,dc);Wd(Qb,Qc,dc.state);rd(Qb,Qc,dc,!1,!0);var gd=dc.shader.progVar.append(Qb,Qc);Qc(Qb.shared.gl,".useProgram(",gd,".program);");if(dc.shader.program)$d(Qb,Qc,dc,dc.shader.program);else{Qc(Qb.shared.vao,".setVAO(null);");var Uc=Qb.global.def("{}"),Zc=Qc.def(gd,".id"),Ub=Qc.def(Uc,"[",Zc,"]");Qc(Qb.cond(Ub).then(Ub,".call(this,a0);")["else"](Ub,
"\x3d",Uc,"[",Zc,"]\x3d",Qb.link(function(sc){return Ee($d,Qb,dc,sc,1)}),"(",gd,");",Ub,".call(this,a0);"))}0<Object.keys(dc.state).length&&Qc(Qb.shared.current,".dirty\x3dtrue;")}function Je(Qb,dc,Qc,gd){function Uc(){return!0}Qb.batchId="a1";Wc(Qb,dc);Kd(Qb,dc,Qc,gd.attributes,Uc);Rd(Qb,dc,Qc,gd.uniforms,Uc);se(Qb,dc,dc,Qc)}function Fe(Qb,dc,Qc,gd){function Uc(od){return od.contextDep&&Ub||od.propDep}function Zc(od){return!Uc(od)}Wc(Qb,dc);var Ub=Qc.contextDep,sc=dc.def(),Dc=dc.def();Qb.shared.props=
Dc;Qb.batchId=sc;var gc=Qb.scope(),wc=Qb.scope();dc(gc.entry,"for(",sc,"\x3d0;",sc,"\x3c","a1",";++",sc,"){",Dc,"\x3d","a0","[",sc,"];",wc,"}",gc.exit);Qc.needsContext&&Nd(Qb,wc,Qc.context);Qc.needsFramebuffer&&Pd(Qb,wc,Qc.framebuffer);Wd(Qb,wc,Qc.state,Uc);Qc.profile&&Uc(Qc.profile)&&rd(Qb,wc,Qc,!1,!0);gd?(Qc.useVAO?Qc.drawVAO?Uc(Qc.drawVAO)?wc(Qb.shared.vao,".setVAO(",Qc.drawVAO.append(Qb,wc),");"):gc(Qb.shared.vao,".setVAO(",Qc.drawVAO.append(Qb,gc),");"):gc(Qb.shared.vao,".setVAO(",Qb.shared.vao,
".targetVAO);"):(gc(Qb.shared.vao,".setVAO(null);"),Kd(Qb,gc,Qc,gd.attributes,Zc),Kd(Qb,wc,Qc,gd.attributes,Uc)),Rd(Qb,gc,Qc,gd.uniforms,Zc),Rd(Qb,wc,Qc,gd.uniforms,Uc),se(Qb,gc,wc,Qc)):(dc=Qb.global.def("{}"),gd=Qc.shader.progVar.append(Qb,wc),Dc=wc.def(gd,".id"),gc=wc.def(dc,"[",Dc,"]"),wc(Qb.shared.gl,".useProgram(",gd,".program);","if(!",gc,"){",gc,"\x3d",dc,"[",Dc,"]\x3d",Qb.link(function(od){return Ee(Je,Qb,Qc,od,2)}),"(",gd,");}",gc,".call(this,a0[",sc,"],",sc,");"))}function ke(Qb,dc){function Qc(gc){return gc.contextDep&&
Uc||gc.propDep}var gd=Qb.proc("batch",2);Qb.batchId="0";Wc(Qb,gd);var Uc=!1,Zc=!0;Object.keys(dc.context).forEach(function(gc){Uc=Uc||dc.context[gc].propDep});Uc||(Nd(Qb,gd,dc.context),Zc=!1);var Ub=dc.framebuffer,sc=!1;Ub?(Ub.propDep?Uc=sc=!0:Ub.contextDep&&Uc&&(sc=!0),sc||Pd(Qb,gd,Ub)):Pd(Qb,gd,null);dc.state.viewport&&dc.state.viewport.propDep&&(Uc=!0);Ke(Qb,gd,dc);Wd(Qb,gd,dc.state,function(gc){return!Qc(gc)});dc.profile&&Qc(dc.profile)||rd(Qb,gd,dc,!1,"a1");dc.contextDep=Uc;dc.needsContext=Zc;
dc.needsFramebuffer=sc;Zc=dc.shader.progVar;if(Zc.contextDep&&Uc||Zc.propDep)Fe(Qb,gd,dc,null);else if(Zc=Zc.append(Qb,gd),gd(Qb.shared.gl,".useProgram(",Zc,".program);"),dc.shader.program)Fe(Qb,gd,dc,dc.shader.program);else{gd(Qb.shared.vao,".setVAO(null);");Ub=Qb.global.def("{}");sc=gd.def(Zc,".id");var Dc=gd.def(Ub,"[",sc,"]");gd(Qb.cond(Dc).then(Dc,".call(this,a0,a1);")["else"](Dc,"\x3d",Ub,"[",sc,"]\x3d",Qb.link(function(gc){return Ee(Fe,Qb,dc,gc,2)}),"(",Zc,");",Dc,".call(this,a0,a1);"))}0<
Object.keys(dc.state).length&&gd(Qb.shared.current,".dirty\x3dtrue;")}function Ce(Qb,dc){function Qc(Ub){var sc=dc.shader[Ub];sc&&gd.set(Uc.shader,"."+Ub,sc.append(Qb,gd))}var gd=Qb.proc("scope",3);Qb.batchId="a2";var Uc=Qb.shared,Zc=Uc.current;Nd(Qb,gd,dc.context);dc.framebuffer&&dc.framebuffer.append(Qb,gd);ha(Object.keys(dc.state)).forEach(function(Ub){var sc=dc.state[Ub].append(Qb,gd);v(sc)?sc.forEach(function(Dc,gc){gd.set(Qb.next[Ub],"["+gc+"]",Dc)}):gd.set(Uc.next,"."+Ub,sc)});rd(Qb,gd,dc,
!0,!0);["elements","offset","count","instances","primitive"].forEach(function(Ub){var sc=dc.draw[Ub];sc&&gd.set(Uc.draw,"."+Ub,""+sc.append(Qb,gd))});Object.keys(dc.uniforms).forEach(function(Ub){gd.set(Uc.uniforms,"["+ac.id(Ub)+"]",dc.uniforms[Ub].append(Qb,gd))});Object.keys(dc.attributes).forEach(function(Ub){var sc=dc.attributes[Ub].append(Qb,gd),Dc=Qb.scopeAttrib(Ub);Object.keys(new tf).forEach(function(gc){gd.set(Dc,"."+gc,sc[gc])})});dc.scopeVAO&&gd.set(Uc.vao,".targetVAO",dc.scopeVAO.append(Qb,
gd));Qc("vert");Qc("frag");0<Object.keys(dc.state).length&&(gd(Zc,".dirty\x3dtrue;"),gd.exit(Zc,".dirty\x3dtrue;"));gd("a1(",Qb.shared.context,",a0,",Qb.batchId,");")}function sf(Qb){if("object"===typeof Qb&&!v(Qb)){for(var dc=Object.keys(Qb),Qc=0;Qc<dc.length;++Qc)if(pa.isDynamic(Qb[dc[Qc]]))return!0;return!1}}function Ve(Qb,dc,Qc){function gd(od,Dd){Ub.forEach(function(Ld){var Jd=Uc[Ld];pa.isDynamic(Jd)&&(Jd=od.invoke(Dd,Jd),Dd(wc,".",Ld,"\x3d",Jd,";"))})}var Uc=dc["static"][Qc];if(Uc&&sf(Uc)){var Zc=
Qb.global,Ub=Object.keys(Uc),sc=!1,Dc=!1,gc=!1,wc=Qb.global.def("{}");Ub.forEach(function(od){var Dd=Uc[od];if(pa.isDynamic(Dd))"function"===typeof Dd&&(Dd=Uc[od]=pa.unbox(Dd)),od=ua(Dd,null),sc=sc||od.thisDep,gc=gc||od.propDep,Dc=Dc||od.contextDep;else{Zc(wc,".",od,"\x3d");switch(typeof Dd){case "number":Zc(Dd);break;case "string":Zc('"',Dd,'"');break;case "object":Array.isArray(Dd)&&Zc("[",Dd.join(),"]");break;default:Zc(Qb.link(Dd))}Zc(";")}});dc.dynamic[Qc]=new pa.DynamicVariable(4,{thisDep:sc,
contextDep:Dc,propDep:gc,ref:wc,append:gd});delete dc["static"][Qc]}}var tf=Bc.Record,gf={add:32774,subtract:32778,"reverse subtract":32779};Jc.ext_blend_minmax&&(gf.min=32775,gf.max=32776);var Wa=Jc.angle_instanced_arrays,Hb=Jc.webgl_draw_buffers,Cb={dirty:!0,profile:yb.profile},Sb={},Ec=[],Vc={},mc={};Lb("dither",3024);Lb("blend.enable",3042);fc("blend.color","blendColor",[0,0,0,0]);fc("blend.equation","blendEquationSeparate",[32774,32774]);fc("blend.func","blendFuncSeparate",[1,0,1,0]);Lb("depth.enable",
2929,!0);fc("depth.func","depthFunc",513);fc("depth.range","depthRange",[0,1]);fc("depth.mask","depthMask",!0);fc("colorMask","colorMask",[!0,!0,!0,!0]);Lb("cull.enable",2884);fc("cull.face","cullFace",1029);fc("frontFace","frontFace",2305);fc("lineWidth","lineWidth",1);Lb("polygonOffset.enable",32823);fc("polygonOffset.offset","polygonOffset",[0,0]);Lb("sample.alpha",32926);Lb("sample.enable",32928);fc("sample.coverage","sampleCoverage",[1,!1]);Lb("stencil.enable",2960);fc("stencil.mask","stencilMask",
-1);fc("stencil.func","stencilFunc",[519,0,-1]);fc("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);fc("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);Lb("scissor.enable",3089);fc("scissor.box","scissor",[0,0,Fb.drawingBufferWidth,Fb.drawingBufferHeight]);fc("viewport","viewport",[0,0,Fb.drawingBufferWidth,Fb.drawingBufferHeight]);var Sc={gl:Fb,context:ic,strings:ac,next:Sb,current:Cb,draw:ec,elements:vc,buffer:tc,shader:Ic,attributes:Bc.state,vao:Bc,uniforms:jc,framebuffer:Ab,
extensions:Jc,timer:Gb,isBufferArgs:ia},jd={primTypes:Ea,compareFuncs:ed,blendFuncs:Ac,blendEquations:gf,stencilOps:Rc,glTypes:nb,orientationType:id};Hb&&(jd.backBuffer=[1029],jd.drawBuffer=f(qc.maxDrawbuffers,function(Qb){return 0===Qb?[0]:f(Qb,function(dc){return 36064+dc})}));var Ad=0;return{next:Sb,current:Cb,procs:function(){var Qb=Oc(),dc=Qb.proc("poll"),Qc=Qb.proc("refresh"),gd=Qb.block();dc(gd);Qc(gd);var Uc=Qb.shared,Zc=Uc.gl,Ub=Uc.next,sc=Uc.current;gd(sc,".dirty\x3dfalse;");Pd(Qb,dc);Pd(Qb,
Qc,null,!0);var Dc;Wa&&(Dc=Qb.link(Wa));Jc.oes_vertex_array_object&&Qc(Qb.link(Jc.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var gc=0;gc<qc.maxAttributes;++gc){var wc=Qc.def(Uc.attributes,"[",gc,"]"),od=Qb.cond(wc,".buffer");od.then(Zc,".enableVertexAttribArray(",gc,");",Zc,".bindBuffer(",34962,",",wc,".buffer.buffer);",Zc,".vertexAttribPointer(",gc,",",wc,".size,",wc,".type,",wc,".normalized,",wc,".stride,",wc,".offset);")["else"](Zc,".disableVertexAttribArray(",gc,");",Zc,".vertexAttrib4f(",
gc,",",wc,".x,",wc,".y,",wc,".z,",wc,".w);",wc,".buffer\x3dnull;");Qc(od);Wa&&Qc(Dc,".vertexAttribDivisorANGLE(",gc,",",wc,".divisor);")}Qc(Qb.shared.vao,".currentVAO\x3dnull;",Qb.shared.vao,".setVAO(",Qb.shared.vao,".targetVAO);");Object.keys(Vc).forEach(function(Dd){var Ld=Vc[Dd],Jd=gd.def(Ub,".",Dd),Hd=Qb.block();Hd("if(",Jd,"){",Zc,".enable(",Ld,")}else{",Zc,".disable(",Ld,")}",sc,".",Dd,"\x3d",Jd,";");Qc(Hd);dc("if(",Jd,"!\x3d\x3d",sc,".",Dd,"){",Hd,"}")});Object.keys(mc).forEach(function(Dd){var Ld=
mc[Dd],Jd=Cb[Dd],Hd,Ie,Ge=Qb.block();Ge(Zc,".",Ld,"(");v(Jd)?(Ld=Jd.length,Hd=Qb.global.def(Ub,".",Dd),Ie=Qb.global.def(sc,".",Dd),Ge(f(Ld,function(Se){return Hd+"["+Se+"]"}),");",f(Ld,function(Se){return Ie+"["+Se+"]\x3d"+Hd+"["+Se+"];"}).join("")),dc("if(",f(Ld,function(Se){return Hd+"["+Se+"]!\x3d\x3d"+Ie+"["+Se+"]"}).join("||"),"){",Ge,"}")):(Hd=gd.def(Ub,".",Dd),Ie=gd.def(sc,".",Dd),Ge(Hd,");",sc,".",Dd,"\x3d",Hd,";"),dc("if(",Hd,"!\x3d\x3d",Ie,"){",Ge,"}"));Qc(Ge)});return Qb.compile()}(),compile:function(Qb,
dc,Qc,gd,Uc){var Zc=Oc();Zc.stats=Zc.link(Uc);Object.keys(dc["static"]).forEach(function(Ub){Ve(Zc,dc,Ub)});pc.forEach(function(Ub){Ve(Zc,Qb,Ub)});Qc=Gd(Qb,dc,Qc,gd,Zc);Ud(Zc,Qc);Ce(Zc,Qc);ke(Zc,Qc);return Zc.compile()}}}function oa(Fb,ac){for(var Jc=0;Jc<Fb.length;++Jc)if(Fb[Jc]===ac)return Jc;return-1}var va=function(Fb,ac){for(var Jc=Object.keys(ac),qc=0;qc<Jc.length;++qc)Fb[Jc[qc]]=ac[Jc[qc]];return Fb},ma=0,pa={DynamicVariable:n,define:function(Fb,ac){return new n(Fb,p(ac+""))},isDynamic:function(Fb){return"function"===
typeof Fb&&!Fb._reglType||Fb instanceof n},unbox:function(Fb,ac){return"function"===typeof Fb?new n(0,Fb):Fb},accessor:p},za={next:"function"===typeof requestAnimationFrame?function(Fb){return requestAnimationFrame(Fb)}:function(Fb){return setTimeout(Fb,16)},cancel:"function"===typeof cancelAnimationFrame?function(Fb){return cancelAnimationFrame(Fb)}:clearTimeout},qa="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Ca=q();Ca.zero=q();
var Ka=function(Fb,ac){var Jc=1;ac.ext_texture_filter_anisotropic&&(Jc=Fb.getParameter(34047));var qc=1,tc=1;ac.webgl_draw_buffers&&(qc=Fb.getParameter(34852),tc=Fb.getParameter(36063));var vc=!!ac.oes_texture_float;if(vc){vc=Fb.createTexture();Fb.bindTexture(3553,vc);Fb.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var xb=Fb.createFramebuffer();Fb.bindFramebuffer(36160,xb);Fb.framebufferTexture2D(36160,36064,3553,vc,0);Fb.bindTexture(3553,null);if(36053!==Fb.checkFramebufferStatus(36160))vc=!1;else{Fb.viewport(0,
0,1,1);Fb.clearColor(1,0,0,1);Fb.clear(16384);var Ab=Ca.allocType(5126,4);Fb.readPixels(0,0,1,1,6408,5126,Ab);Fb.getError()?vc=!1:(Fb.deleteFramebuffer(xb),Fb.deleteTexture(vc),vc=1===Ab[0]);Ca.freeType(Ab)}}Ab=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Ab=Fb.createTexture(),xb=Ca.allocType(5121,36),Fb.activeTexture(33984),Fb.bindTexture(34067,Ab),Fb.texImage2D(34069,0,6408,3,3,0,6408,5121,xb),Ca.freeType(xb),
Fb.bindTexture(34067,null),Fb.deleteTexture(Ab),Ab=!Fb.getError());return{colorBits:[Fb.getParameter(3410),Fb.getParameter(3411),Fb.getParameter(3412),Fb.getParameter(3413)],depthBits:Fb.getParameter(3414),stencilBits:Fb.getParameter(3415),subpixelBits:Fb.getParameter(3408),extensions:Object.keys(ac).filter(function(jc){return!!ac[jc]}),maxAnisotropic:Jc,maxDrawbuffers:qc,maxColorAttachments:tc,pointSizeDims:Fb.getParameter(33901),lineWidthDims:Fb.getParameter(33902),maxViewportDims:Fb.getParameter(3386),
maxCombinedTextureUnits:Fb.getParameter(35661),maxCubeMapSize:Fb.getParameter(34076),maxRenderbufferSize:Fb.getParameter(34024),maxTextureUnits:Fb.getParameter(34930),maxTextureSize:Fb.getParameter(3379),maxAttributes:Fb.getParameter(34921),maxVertexUniforms:Fb.getParameter(36347),maxVertexTextureUnits:Fb.getParameter(35660),maxVaryingVectors:Fb.getParameter(36348),maxFragmentUniforms:Fb.getParameter(36349),glsl:Fb.getParameter(35724),renderer:Fb.getParameter(7937),vendor:Fb.getParameter(7936),version:Fb.getParameter(7938),
readFloat:vc,npotTextureCube:Ab}},Oa=function(Fb){return Fb instanceof Uint8Array||Fb instanceof Uint16Array||Fb instanceof Uint32Array||Fb instanceof Int8Array||Fb instanceof Int16Array||Fb instanceof Int32Array||Fb instanceof Float32Array||Fb instanceof Float64Array||Fb instanceof Uint8ClampedArray},kb=function(Fb){return Object.keys(Fb).map(function(ac){return Fb[ac]})},mb={shape:function(Fb){for(var ac=[];Fb.length;Fb=Fb[0])ac.push(Fb.length);return ac},flatten:function(Fb,ac,Jc,qc){var tc=1;
if(ac.length)for(var vc=0;vc<ac.length;++vc)tc*=ac[vc];else tc=0;Jc=qc||Ca.allocType(Jc,tc);switch(ac.length){case 0:break;case 1:qc=ac[0];for(ac=0;ac<qc;++ac)Jc[ac]=Fb[ac];break;case 2:qc=ac[0];ac=ac[1];for(vc=tc=0;vc<qc;++vc)for(var xb=Fb[vc],Ab=0;Ab<ac;++Ab)Jc[tc++]=xb[Ab];break;case 3:u(Fb,ac[0],ac[1],ac[2],Jc,0);break;default:w(Fb,ac,0,Jc,0)}return Jc}},tb={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,
"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},nb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},Ta={dynamic:35048,stream:35040,"static":35044},fb=mb.flatten,ab=mb.shape,ra=[];ra[5120]=1;ra[5122]=2;ra[5124]=4;ra[5121]=1;ra[5123]=2;ra[5125]=4;ra[5126]=4;var Ea={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,
"triangle fan":6},Ia=new Float32Array(1),Va=new Uint32Array(Ia.buffer),rb=[9984,9986,9985,9987],ib=[0,6409,6410,6407,6408],Na={};Na[6409]=Na[6406]=Na[6402]=1;Na[34041]=Na[6410]=2;Na[6407]=Na[35904]=3;Na[6408]=Na[35906]=4;var Za=G("HTMLCanvasElement"),eb=G("OffscreenCanvas"),Ba=G("CanvasRenderingContext2D"),Ma=G("ImageBitmap"),$a=G("HTMLImageElement"),lb=G("HTMLVideoElement"),Ra=Object.keys(tb).concat([Za,eb,Ba,Ma,$a,lb]),jb=[];jb[5121]=1;jb[5126]=4;jb[36193]=2;jb[5123]=2;jb[5125]=4;var Xa=[];Xa[32854]=
2;Xa[32855]=2;Xa[36194]=2;Xa[34041]=4;Xa[33776]=.5;Xa[33777]=.5;Xa[33778]=1;Xa[33779]=1;Xa[35986]=.5;Xa[35987]=1;Xa[34798]=1;Xa[35840]=.5;Xa[35841]=.25;Xa[35842]=.5;Xa[35843]=.25;Xa[36196]=.5;var pb=[];pb[32854]=2;pb[32855]=2;pb[36194]=2;pb[33189]=2;pb[36168]=1;pb[34041]=4;pb[35907]=4;pb[34836]=16;pb[34842]=8;pb[34843]=6;var vb=function(Fb,ac,Jc,qc,tc){function vc(ec){this.id=Bc++;this.refCount=1;this.renderbuffer=ec;this.format=32854;this.height=this.width=0;tc.profile&&(this.stats={size:0})}function xb(ec){var ic=
ec.renderbuffer;Fb.bindRenderbuffer(36161,null);Fb.deleteRenderbuffer(ic);ec.renderbuffer=null;ec.refCount=0;delete Ic[ec.id];qc.renderbufferCount--}var Ab={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};ac.ext_srgb&&(Ab.srgba=35907);ac.ext_color_buffer_half_float&&(Ab.rgba16f=34842,Ab.rgb16f=34843);ac.webgl_color_buffer_float&&(Ab.rgba32f=34836);var jc=[];Object.keys(Ab).forEach(function(ec){jc[Ab[ec]]=ec});var Bc=0,Ic={};vc.prototype.decRef=function(){0>=
--this.refCount&&xb(this)};tc.profile&&(qc.getTotalRenderbufferSize=function(){var ec=0;Object.keys(Ic).forEach(function(ic){ec+=Ic[ic].stats.size});return ec});return{create:function(ec,ic){function Gb(Eb,Lb){var fc=0,Oc=0,xc=32854;"object"===typeof Eb&&Eb?("shape"in Eb?(Oc=Eb.shape,fc=Oc[0]|0,Oc=Oc[1]|0):("radius"in Eb&&(fc=Oc=Eb.radius|0),"width"in Eb&&(fc=Eb.width|0),"height"in Eb&&(Oc=Eb.height|0)),"format"in Eb&&(xc=Ab[Eb.format])):"number"===typeof Eb?(fc=Eb|0,Oc="number"===typeof Lb?Lb|0:
fc):Eb||(fc=Oc=1);if(fc!==yb.width||Oc!==yb.height||xc!==yb.format)return Gb.width=yb.width=fc,Gb.height=yb.height=Oc,yb.format=xc,Fb.bindRenderbuffer(36161,yb.renderbuffer),Fb.renderbufferStorage(36161,xc,fc,Oc),tc.profile&&(yb.stats.size=pb[yb.format]*yb.width*yb.height),Gb.format=jc[yb.format],Gb}var yb=new vc(Fb.createRenderbuffer());Ic[yb.id]=yb;qc.renderbufferCount++;Gb(ec,ic);Gb.resize=function(Eb,Lb){Eb|=0;Lb=Lb|0||Eb;if(Eb===yb.width&&Lb===yb.height)return Gb;Gb.width=yb.width=Eb;Gb.height=
yb.height=Lb;Fb.bindRenderbuffer(36161,yb.renderbuffer);Fb.renderbufferStorage(36161,yb.format,Eb,Lb);tc.profile&&(yb.stats.size=pb[yb.format]*yb.width*yb.height);return Gb};Gb._reglType="renderbuffer";Gb._renderbuffer=yb;tc.profile&&(Gb.stats=yb.stats);Gb.destroy=function(){yb.decRef()};return Gb},clear:function(){kb(Ic).forEach(xb)},restore:function(){kb(Ic).forEach(function(ec){ec.renderbuffer=Fb.createRenderbuffer();Fb.bindRenderbuffer(36161,ec.renderbuffer);Fb.renderbufferStorage(36161,ec.format,
ec.width,ec.height)});Fb.bindRenderbuffer(36161,null)}}},zb=[];zb[6408]=4;zb[6407]=3;var Jb=[];Jb[5121]=1;Jb[5126]=4;Jb[36193]=2;var Zb=["x","y","z","w"],pc="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ac={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ed={never:512,less:513,"\x3c":513,equal:514,"\x3d":514,"\x3d\x3d":514,"\x3d\x3d\x3d":514,lequal:515,"\x3c\x3d":515,greater:516,"\x3e":516,notequal:517,"!\x3d":517,"!\x3d\x3d":517,gequal:518,"\x3e\x3d":518,always:519},Rc={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},id={cw:2304,ccw:2305},Tc=new fa(!1,!1,!1,function(){}),
wd=function(Fb,ac){function Jc(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function qc(Ic,ec,ic){var Gb=xb.pop()||new Jc;Gb.startQueryIndex=Ic;Gb.endQueryIndex=ec;Gb.sum=0;Gb.stats=ic;Ab.push(Gb)}if(!ac.ext_disjoint_timer_query)return null;var tc=[],vc=[],xb=[],Ab=[],jc=[],Bc=[];return{beginQuery:function(Ic){var ec=tc.pop()||ac.ext_disjoint_timer_query.createQueryEXT();ac.ext_disjoint_timer_query.beginQueryEXT(35007,ec);vc.push(ec);qc(vc.length-1,vc.length,Ic)},endQuery:function(){ac.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:qc,update:function(){var Ic;var ec=vc.length;if(0!==ec){Bc.length=Math.max(Bc.length,ec+1);jc.length=Math.max(jc.length,ec+1);jc[0]=0;var ic=Bc[0]=0;for(Ic=ec=0;Ic<vc.length;++Ic){var Gb=vc[Ic];ac.ext_disjoint_timer_query.getQueryObjectEXT(Gb,34919)?(ic+=ac.ext_disjoint_timer_query.getQueryObjectEXT(Gb,34918),tc.push(Gb)):vc[ec++]=Gb;jc[Ic+1]=ic;Bc[Ic+1]=ec}vc.length=ec;for(Ic=ec=0;Ic<Ab.length;++Ic){ic=Ab[Ic];var yb=ic.startQueryIndex;Gb=ic.endQueryIndex;ic.sum+=jc[Gb]-jc[yb];yb=Bc[yb];
Gb=Bc[Gb];Gb===yb?(ic.stats.gpuTime+=ic.sum/1E6,xb.push(ic)):(ic.startQueryIndex=yb,ic.endQueryIndex=Gb,Ab[ec++]=ic)}Ab.length=ec}},getNumPendingQueries:function(){return vc.length},clear:function(){tc.push.apply(tc,vc);for(var Ic=0;Ic<tc.length;Ic++)ac.ext_disjoint_timer_query.deleteQueryEXT(tc[Ic]);vc.length=0;tc.length=0},restore:function(){vc.length=0;tc.length=0}}};return function(Fb){function ac(){if(0===Wc.length)xc&&xc.update(),se=null;else{se=za.next(ac);Ic();for(var $d=Wc.length-1;0<=$d;--$d){var Ud=
Wc[$d];Ud&&Ud(qd,null,0)}Gb.flush();xc&&xc.update()}}function Jc(){!se&&0<Wc.length&&(se=za.next(ac))}function qc(){se&&(za.cancel(ac),se=null)}function tc($d){$d.preventDefault();qc();rd.forEach(function(Ud){Ud()})}function vc($d){Gb.getError();Eb.restore();sd.restore();md.restore();cd.restore();Gd.restore();Nd.restore();Fd.restore();xc&&xc.restore();Pd.procs.refresh();Jc();Kd.forEach(function(Ud){Ud()})}function xb($d){function Ud(Wa){var Hb={},Cb={};Object.keys(Wa).forEach(function(Sb){var Ec=
Wa[Sb];pa.isDynamic(Ec)?Cb[Sb]=pa.unbox(Ec,Sb):Hb[Sb]=Ec});return{dynamic:Cb,"static":Hb}}var Je=Ud($d.context||{}),Fe=Ud($d.uniforms||{}),ke=Ud($d.attributes||{}),Ce=Ud(function(Wa){function Hb(Sb){if(Sb in Cb){var Ec=Cb[Sb];delete Cb[Sb];Object.keys(Ec).forEach(function(Vc){Cb[Sb+"."+Vc]=Ec[Vc]})}}var Cb=va({},Wa);delete Cb.uniforms;delete Cb.attributes;delete Cb.context;delete Cb.vao;"stencil"in Cb&&Cb.stencil.op&&(Cb.stencil.opBack=Cb.stencil.opFront=Cb.stencil.op,delete Cb.stencil.op);Hb("blend");
Hb("depth");Hb("cull");Hb("stencil");Hb("polygonOffset");Hb("scissor");Hb("sample");"vao"in Wa&&(Cb.vao=Wa.vao);return Cb}($d));$d={gpuTime:0,cpuTime:0,count:0};Je=Pd.compile(Ce,ke,Fe,Je,$d);var sf=Je.draw,Ve=Je.batch,tf=Je.scope,gf=[];return va(function(Wa,Hb){var Cb;if("function"===typeof Wa)return tf.call(this,null,Wa,0);if("function"===typeof Hb)if("number"===typeof Wa)for(Cb=0;Cb<Wa;++Cb)tf.call(this,null,Hb,Cb);else if(Array.isArray(Wa))for(Cb=0;Cb<Wa.length;++Cb)tf.call(this,Wa[Cb],Hb,Cb);
else return tf.call(this,Wa,Hb,0);else if("number"===typeof Wa){if(0<Wa){Hb=Ve.call;for(Cb=Wa|0;gf.length<Cb;)gf.push(null);return Hb.call(Ve,this,gf,Wa|0)}}else if(Array.isArray(Wa)){if(Wa.length)return Ve.call(this,Wa,Wa.length)}else return sf.call(this,Wa)},{stats:$d})}function Ab($d,Ud){$d=0;Pd.procs.poll();var Je=Ud.color;Je&&(Gb.clearColor(+Je[0]||0,+Je[1]||0,+Je[2]||0,+Je[3]||0),$d|=16384);"depth"in Ud&&(Gb.clearDepth(+Ud.depth),$d|=256);"stencil"in Ud&&(Gb.clearStencil(Ud.stencil|0),$d|=1024);
Gb.clear($d)}function jc($d){Wc.push($d);Jc();return{cancel:function(){function Ud(){var Fe=oa(Wc,Ud);Wc[Fe]=Wc[Wc.length-1];--Wc.length;0>=Wc.length&&qc()}var Je=oa(Wc,$d);Wc[Je]=Ud}}}function Bc(){var $d=Ke.viewport,Ud=Ke.scissor_box;$d[0]=$d[1]=Ud[0]=Ud[1]=0;qd.viewportWidth=qd.framebufferWidth=qd.drawingBufferWidth=$d[2]=Ud[2]=Gb.drawingBufferWidth;qd.viewportHeight=qd.framebufferHeight=qd.drawingBufferHeight=$d[3]=Ud[3]=Gb.drawingBufferHeight}function Ic(){qd.tick+=1;qd.time=ic();Bc();Pd.procs.poll()}
function ec(){Bc();Pd.procs.refresh();xc&&xc.update()}function ic(){return(qa()-Mc)/1E3}Fb=k(Fb);if(!Fb)return null;var Gb=Fb.gl,yb=Gb.getContextAttributes();Gb.isContextLost();var Eb=c(Gb,Fb);if(!Eb)return null;var Lb=h(),fc={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Oc=Eb.extensions,xc=wd(Gb,Oc),Mc=qa(),dd=Gb.drawingBufferWidth,bd=Gb.drawingBufferHeight,qd={tick:0,time:0,viewportWidth:dd,viewportHeight:bd,
framebufferWidth:dd,framebufferHeight:bd,drawingBufferWidth:dd,drawingBufferHeight:bd,pixelRatio:Fb.pixelRatio},Bd=Ka(Gb,Oc),md=z(Gb,fc,Fb,function($d){return Fd.destroyBuffer($d)}),Fd=O(Gb,Oc,Bd,fc,md),Od=B(Gb,Oc,md,fc),sd=U(Gb,Lb,fc,Fb),cd=P(Gb,Oc,Bd,function(){Pd.procs.poll()},qd,fc,Fb),Gd=vb(Gb,Oc,Bd,fc,Fb),Nd=Q(Gb,Oc,Bd,cd,Gd,fc),Pd=ta(Gb,Lb,Oc,Bd,md,Od,cd,Nd,{},Fd,sd,{elements:null,primitive:4,count:-1,offset:0,instances:-1},qd,xc,Fb);Lb=X(Gb,Nd,Pd.procs.poll,qd,yb,Oc,Bd);var Ke=Pd.next,Wd=
Gb.canvas,Wc=[],rd=[],Kd=[],Rd=[Fb.onDestroy],se=null;Wd&&(Wd.addEventListener("webglcontextlost",tc,!1),Wd.addEventListener("webglcontextrestored",vc,!1));var Ee=Nd.setFBO=xb({framebuffer:pa.define.call(null,1,"framebuffer")});ec();yb=va(xb,{clear:function($d){if("framebuffer"in $d)if($d.framebuffer&&"framebufferCube"===$d.framebuffer_reglType)for(var Ud=0;6>Ud;++Ud)Ee(va({framebuffer:$d.framebuffer.faces[Ud]},$d),Ab);else Ee($d,Ab);else Ab(null,$d)},prop:pa.define.bind(null,1),context:pa.define.bind(null,
2),"this":pa.define.bind(null,3),draw:xb({}),buffer:function($d){return md.create($d,34962,!1,!1)},elements:function($d){return Od.create($d,!1)},texture:cd.create2D,cube:cd.createCube,renderbuffer:Gd.create,framebuffer:Nd.create,framebufferCube:Nd.createCube,vao:Fd.createVAO,attributes:yb,frame:jc,on:function($d,Ud){switch($d){case "frame":return jc(Ud);case "lost":var Je=rd;break;case "restore":Je=Kd;break;case "destroy":Je=Rd}Je.push(Ud);return{cancel:function(){for(var Fe=0;Fe<Je.length;++Fe)if(Je[Fe]===
Ud){Je[Fe]=Je[Je.length-1];Je.pop();break}}}},limits:Bd,hasExtension:function($d){return 0<=Bd.extensions.indexOf($d.toLowerCase())},read:Lb,destroy:function(){Wc.length=0;qc();Wd&&(Wd.removeEventListener("webglcontextlost",tc),Wd.removeEventListener("webglcontextrestored",vc));sd.clear();Nd.clear();Gd.clear();cd.clear();Od.clear();md.clear();Fd.clear();xc&&xc.clear();Rd.forEach(function($d){$d()})},_gl:Gb,_refresh:ec,poll:function(){Ic();xc&&xc.update()},now:ic,stats:fc});Fb.onDone(null,yb);return yb}})},
{}],513:[function(b,y,D){var n="",m;y.exports=function(p,h){if("string"!==typeof p)throw new TypeError("expected a string");if(1===h)return p;if(2===h)return p+p;var a=p.length*h;if(m!==p||"undefined"===typeof m)m=p,n="";else if(n.length>=a)return n.substr(0,a);for(;a>n.length&&1<h;)h&1&&(n+=p),h>>=1,p+=p;n+=p;return n=n.substr(0,a)}},{}],514:[function(b,y,D){(function(n){y.exports=n.performance&&n.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,
"undefined"!==typeof xa?xa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],515:[function(b,y,D){y.exports=function(n){for(var m=n.length,p=n[n.length-1],h=m,a=m-2;0<=a;--a){var d=p,e=n[a];p=d+e;d=p-d;if(e-=d)n[--h]=p,p=e}var l=0;for(a=h;a<m;++a)d=n[a],e=p,p=d+e,d=p-d,(e-=d)&&(n[l++]=e);n[l++]=p;n.length=l;return n}},{}],516:[function(b,y,D){function n(k){if(1===k.length)return k[0];if(2===k.length)return["sum(",k[0],",",k[1],")"].join("");var c=k.length>>1;return["sum(",
n(k.slice(0,c)),",",n(k.slice(c)),")"].join("")}function m(k){if(2===k.length)return["sum(prod(",k[0][0],",",k[1][1],"),prod(-",k[0][1],",",k[1][0],"))"].join("");for(var c=[],f=0;f<k.length;++f){for(var g=c,q=g.push,t=k,u=f,w=Array(t.length-1),x=1;x<t.length;++x)for(var E=w[x-1]=Array(t.length-1),F=0,z=0;F<t.length;++F)F!==u&&(E[z++]=t[x][F]);t=m(w);u=f&1?"-":"";q.call(g,["scale(",t,",",u,k[0][f],")"].join(""))}return n(c)}function p(k){for(var c=Function,f=Array(k),g=0;g<k;++g){f[g]=Array(k);for(var q=
0;q<k;++q)f[g][q]=["m[",g,"][",q,"]"].join("")}return(new c("sum","scale","prod","compress",["function robustDeterminant",k,"(m){return compress(",m(f),")};return robustDeterminant",k].join("")))(a,d,h,e)}var h=b("two-product"),a=b("robust-sum"),d=b("robust-scale"),e=b("robust-compress"),l=[function(){return[0]},function(k){return[k[0][0]]}];(function(){for(;6>l.length;)l.push(p(l.length));for(var k=[],c=["function robustDeterminant(m){switch(m.length){"],f=0;6>f;++f)k.push("det"+f),c.push("case ",
f,":return det",f,"(m);");c.push("}var det\x3dCACHE[m.length];if(!det)det\x3dCACHE[m.length]\x3dgen(m.length);return det(m);}return robustDeterminant");k.push("CACHE","gen",c.join(""));k=Function.apply(void 0,k);y.exports=k.apply(void 0,l.concat([l,p]));for(f=0;f<l.length;++f)y.exports[f]=l[f]})()},{"robust-compress":515,"robust-scale":522,"robust-sum":525,"two-product":554}],517:[function(b,y,D){var n=b("two-product"),m=b("robust-sum");y.exports=function(p,h){for(var a=n(p[0],h[0]),d=1;d<p.length;++d)a=
m(a,n(p[d],h[d]));return a}},{"robust-sum":525,"two-product":554}],518:[function(b,y,D){function n(g,q){for(var t=Array(g.length-1),u=1;u<g.length;++u)for(var w=t[u-1]=Array(g.length-1),x=0,E=0;x<g.length;++x)x!==q&&(w[E++]=g[u][x]);return t}function m(g){if(1===g.length)return g[0];if(2===g.length)return["sum(",g[0],",",g[1],")"].join("");var q=g.length>>1;return["sum(",m(g.slice(0,q)),",",m(g.slice(q)),")"].join("")}function p(g,q){return"m"===g.charAt(0)?"w"===q.charAt(0)?(g=g.split("["),["w",
q.substr(1),"m",g[0].substr(1)].join("")):["prod(",g,",",q,")"].join(""):p(q,g)}function h(g){if(2===g.length)return[["diff(",p(g[0][0],g[1][1]),",",p(g[1][0],g[0][1]),")"].join("")];for(var q=[],t=0;t<g.length;++t){var u=q,w=u.push,x=m(h(n(g,t)));var E=t&1?"-":"";w.call(u,["scale(",x,",",E,g[0][t],")"].join(""))}return q}function a(g){for(var q=[],t=[],u=Array(g),w=0;w<g;++w){u[w]=Array(g);for(var x=0;x<g;++x)u[w][x]=["m",x,"[",g-w-2,"]"].join("")}for(w=0;w<g;++w)u[0][w]="1",u[g-1][w]="w"+w;for(w=
0;w<g;++w)0===(w&1)?q.push.apply(q,h(n(u,w))):t.push.apply(t,h(n(u,w)));q=m(q);t=m(t);u="exactInSphere"+g;x=[];for(w=0;w<g;++w)x.push("m"+w);x=["function ",u,"(",x.join(),"){"];for(w=0;w<g;++w){var E=x,F=E.push,z=w;var B=w;for(var C=g,v=[],G=0;G<C-2;++G)v.push(["prod(m",B,"[",G,"],m",B,"[",G,"])"].join(""));B=m(v);F.call(E,"var w",z,"\x3d",B,";");for(E=0;E<g;++E)E!==w&&x.push("var w",w,"m",E,"\x3dscale(w",w,",m",E,"[0]);")}x.push("var p\x3d",q,",n\x3d",t,",d\x3ddiff(p,n);return d[d.length-1];}return ",
u);return(new Function("sum","diff","prod","scale",x.join("")))(l,k,e,c)}function d(g){var q=f[g.length];q||(q=f[g.length]=a(g.length));return q.apply(void 0,g)}var e=b("two-product"),l=b("robust-sum"),k=b("robust-subtract"),c=b("robust-scale"),f=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=f.length;)f.push(a(f.length));for(var g=[],q=["slow"],t=0;6>=t;++t)g.push("a"+t),q.push("o"+t);var u=["function testInSphere(",g.join(),"){switch(arguments.length){case 0:case 1:return 0;"];
for(t=2;6>=t;++t)u.push("case ",t,":return o",t,"(",g.slice(0,t).join(),");");u.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return testInSphere");q.push(u.join(""));g=Function.apply(void 0,q);y.exports=g.apply(void 0,[d].concat(f));for(t=0;6>=t;++t)y.exports[t]=f[t]})()},{"robust-scale":522,"robust-subtract":524,"robust-sum":525,"two-product":554}],519:[function(b,y,D){function n(h){for(var a="robustLinearSolve"+h+"d",
d=["function ",a,"(A,b){return ["],e=0;e<h;++e){d.push("det([");for(var l=0;l<h;++l){0<l&&d.push(",");d.push("[");for(var k=0;k<h;++k)0<k&&d.push(","),k===e?d.push("+b[",l,"]"):d.push("+A[",l,"][",k,"]");d.push("]")}d.push("]),")}d.push("det(A)]}return ",a);a=new Function("det",d.join(""));return 6>h?a(m[h]):a(m)}var m=b("robust-determinant"),p=[function(){return[0]},function(h,a){return[[a[0]],[h[0][0]]]}];(function(){for(;6>p.length;)p.push(n(p.length));for(var h=[],a=["function dispatchLinearSolve(A,b){switch(A.length){"],
d=0;6>d;++d)h.push("s"+d),a.push("case ",d,":return s",d,"(A,b);");a.push("}var s\x3dCACHE[A.length];if(!s)s\x3dCACHE[A.length]\x3dg(A.length);return s(A,b)}return dispatchLinearSolve");h.push("CACHE","g",a.join(""));h=Function.apply(void 0,h);y.exports=h.apply(void 0,p.concat([p,n]));for(d=0;6>d;++d)y.exports[d]=p[d]})()},{"robust-determinant":516}],520:[function(b,y,D){function n(q,t){for(var u=Array(q.length-1),w=1;w<q.length;++w)for(var x=u[w-1]=Array(q.length-1),E=0,F=0;E<q.length;++E)E!==t&&
(x[F++]=q[w][E]);return u}function m(q){if(1===q.length)return q[0];if(2===q.length)return["sum(",q[0],",",q[1],")"].join("");var t=q.length>>1;return["sum(",m(q.slice(0,t)),",",m(q.slice(t)),")"].join("")}function p(q){if(2===q.length)return[["sum(prod(",q[0][0],",",q[1][1],"),prod(-",q[0][1],",",q[1][0],"))"].join("")];for(var t=[],u=0;u<q.length;++u){var w=t,x=w.push,E=m(p(n(q,u)));var F=u&1?"-":"";x.call(w,["scale(",E,",",F,q[0][u],")"].join(""))}return t}function h(q){for(var t=[],u=[],w=Array(q),
x=0;x<q;++x){w[x]=Array(q);for(var E=0;E<q;++E)w[x][E]=["m",E,"[",q-x-1,"]"].join("")}x=[];for(E=0;E<q;++E)0===(E&1)?t.push.apply(t,p(n(w,E))):u.push.apply(u,p(n(w,E))),x.push("m"+E);t=m(t);u=m(u);q="orientation"+q+"Exact";q=["function ",q,"(",x.join(),"){var p\x3d",t,",n\x3d",u,",d\x3dsub(p,n);return d[d.length-1];};return ",q].join("");return(new Function("sum","prod","scale","sub",q))(e,d,l,k)}function a(q){var t=g[q.length];t||(t=g[q.length]=h(q.length));return t.apply(void 0,q)}var d=b("two-product"),
e=b("robust-sum"),l=b("robust-scale"),k=b("robust-subtract"),c=h(3),f=h(4),g=[function(){return 0},function(){return 0},function(q,t){return t[0]-q[0]},function(q,t,u){var w=(q[1]-u[1])*(t[0]-u[0]),x=(q[0]-u[0])*(t[1]-u[1]),E=w-x;if(0<w){if(0>=x)return E;w+=x}else if(0>w){if(0<=x)return E;w=-(w+x)}else return E;w*=3.3306690738754716E-16;return E>=w||E<=-w?E:c(q,t,u)},function(q,t,u,w){var x=q[0]-w[0],E=t[0]-w[0],F=u[0]-w[0],z=q[1]-w[1],B=t[1]-w[1],C=u[1]-w[1],v=q[2]-w[2],G=t[2]-w[2],I=u[2]-w[2],J=
E*C,K=F*B;F*=z;C*=x;x*=B;z*=E;E=v*(J-K)+G*(F-C)+I*(x-z);v=7.771561172376103E-16*((Math.abs(J)+Math.abs(K))*Math.abs(v)+(Math.abs(F)+Math.abs(C))*Math.abs(G)+(Math.abs(x)+Math.abs(z))*Math.abs(I));return E>v||-E>v?E:f(q,t,u,w)}];(function(){for(;5>=g.length;)g.push(h(g.length));for(var q=[],t=["slow"],u=0;5>=u;++u)q.push("a"+u),t.push("o"+u);var w=["function getOrientation(",q.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(u=2;5>=u;++u)w.push("case ",u,":return o",u,"(",q.slice(0,
u).join(),");");w.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return getOrientation");t.push(w.join(""));q=Function.apply(void 0,t);y.exports=q.apply(void 0,[a].concat(g));for(u=0;5>=u;++u)y.exports[u]=g[u]})()},{"robust-scale":522,"robust-subtract":524,"robust-sum":525,"two-product":554}],521:[function(b,y,D){var n=b("robust-sum"),m=b("robust-scale");y.exports=function(p,h){if(1===p.length)return m(h,p[0]);if(1===h.length)return m(p,
h[0]);if(0===p.length||0===h.length)return[0];var a=[0];if(p.length<h.length)for(var d=0;d<p.length;++d)a=n(a,m(h,p[d]));else for(d=0;d<h.length;++d)a=n(a,m(p,h[d]));return a}},{"robust-scale":522,"robust-sum":525}],522:[function(b,y,D){var n=b("two-product"),m=b("two-sum");y.exports=function(p,h){var a=p.length;if(1===a)return p=n(p[0],h),p[0]?p:[p[1]];var d=Array(2*a),e=[.1,.1],l=[.1,.1],k=0;n(p[0],h,e);e[0]&&(d[k++]=e[0]);for(var c=1;c<a;++c){n(p[c],h,l);m(e[1],l[0],e);e[0]&&(d[k++]=e[0]);var f=
l[1],g=e[1],q=f+g;f=g-(q-f);e[1]=q;f&&(d[k++]=f)}e[1]&&(d[k++]=e[1]);0===k&&(d[k++]=0);d.length=k;return d}},{"two-product":554,"two-sum":555}],523:[function(b,y,D){y.exports=function(m,p,h,a){var d=n(m,h,a),e=n(p,h,a);if(0<d&&0<e||0>d&&0>e)return!1;var l=n(h,m,p),k=n(a,m,p);if(0<l&&0<k||0>l&&0>k)return!1;if(0===d&&0===e&&0===l&&0===k){a:{for(d=0;2>d;++d){e=m[d];l=p[d];k=Math.max(e,l);var c=h[d],f=a[d],g=Math.min(c,f);if(Math.max(c,f)<Math.min(e,l)||k<g){m=!1;break a}}m=!0}return m}return!0};var n=
b("robust-orientation")[3]},{"robust-orientation":520}],524:[function(b,y,D){y.exports=function(n,m){var p=n.length|0,h=m.length|0;if(1===p&&1===h)return n=n[0],p=-m[0],m=n+p,h=m-n,m=(n=n-(m-h)+(p-h))?[n,m]:[m],m;var a=Array(p+h),d=0,e=0,l=0,k=Math.abs,c=n[e],f=k(c),g=-m[l],q=k(g);if(f<q){var t=c;e+=1;e<p&&(c=n[e],f=k(c))}else t=g,l+=1,l<h&&(g=-m[l],q=k(g));if(e<p&&f<q||l>=h){var u=c;e+=1;e<p&&(c=n[e],f=k(c))}else u=g,l+=1,l<h&&(g=-m[l],q=k(g));var w=u+t;t-=w-u;for(var x=w,E;e<p&&l<h;)f<q?(u=c,e+=
1,e<p&&(c=n[e],f=k(c))):(u=g,l+=1,l<h&&(g=-m[l],q=k(g))),w=u+t,u=w-u,(u=t-u)&&(a[d++]=u),u=x+w,E=u-x,t=u-E,w-=E,x-=t,t=x+w,x=u;for(;e<p;)u=c,w=u+t,u=w-u,(u=t-u)&&(a[d++]=u),u=x+w,E=u-x,t=u-E,w-=E,x-=t,t=x+w,x=u,e+=1,e<p&&(c=n[e]);for(;l<h;)u=g,w=u+t,u=w-u,(u=t-u)&&(a[d++]=u),u=x+w,E=u-x,t=u-E,w-=E,x-=t,t=x+w,x=u,l+=1,l<h&&(g=-m[l]);t&&(a[d++]=t);x&&(a[d++]=x);d||(a[d++]=0);a.length=d;return a}},{}],525:[function(b,y,D){y.exports=function(n,m){var p=n.length|0,h=m.length|0;if(1===p&&1===h)return n=
n[0],p=m[0],m=n+p,h=m-n,m=(n=n-(m-h)+(p-h))?[n,m]:[m],m;var a=Array(p+h),d=0,e=0,l=0,k=Math.abs,c=n[e],f=k(c),g=m[l],q=k(g);if(f<q){var t=c;e+=1;e<p&&(c=n[e],f=k(c))}else t=g,l+=1,l<h&&(g=m[l],q=k(g));if(e<p&&f<q||l>=h){var u=c;e+=1;e<p&&(c=n[e],f=k(c))}else u=g,l+=1,l<h&&(g=m[l],q=k(g));var w=u+t;t-=w-u;for(var x=w,E;e<p&&l<h;)f<q?(u=c,e+=1,e<p&&(c=n[e],f=k(c))):(u=g,l+=1,l<h&&(g=m[l],q=k(g))),w=u+t,u=w-u,(u=t-u)&&(a[d++]=u),u=x+w,E=u-x,t=u-E,w-=E,x-=t,t=x+w,x=u;for(;e<p;)u=c,w=u+t,u=w-u,(u=t-u)&&
(a[d++]=u),u=x+w,E=u-x,t=u-E,w-=E,x-=t,t=x+w,x=u,e+=1,e<p&&(c=n[e]);for(;l<h;)u=g,w=u+t,u=w-u,(u=t-u)&&(a[d++]=u),u=x+w,E=u-x,t=u-E,w-=E,x-=t,t=x+w,x=u,l+=1,l<h&&(g=m[l]);t&&(a[d++]=t);x&&(a[d++]=x);d||(a[d++]=0);a.length=d;return a}},{}],526:[function(b,y,D){y.exports=function(n){return 0>n?-1:0<n?1:0}},{}],527:[function(b,y,D){y.exports=function(p){return m(n(p))};var n=b("boundary-cells"),m=b("reduce-simplicial-complex")},{"boundary-cells":100,"reduce-simplicial-complex":507}],528:[function(b,
y,D){y.exports=function(a,d,e,l){e=e||0;if("undefined"===typeof l){for(var k=a.length,c=l=0;c<k;++c)l=Math.max(l,a[c].length)|0;--l}if(0===a.length||1>l)return{cells:[],vertexIds:[],vertexWeights:[]};c=+e;var f=d.length;k=m.mallocUint8(f);for(var g=0;g<f;++g)k[g]=d[g]<c|0;var q=l,t=a.length;c=m.mallocUint32(2*(q*(q+1)/2*t|0));for(g=f=0;g<t;++g){var u=a[g];q=u.length;for(var w=0;w<q;++w)for(var x=0;x<w;++x){var E=u[x],F=u[w];c[f++]=Math.min(E,F)|0;c[f++]=Math.max(E,F)|0}}p(n(c,[f/2|0,2]));for(g=q=
2;g<f;g+=2)if(c[g-2]!==c[g]||c[g-1]!==c[g+1])c[q++]=c[g],c[q++]=c[g+1];c=n(c,[q/2|0,2]);e=+e;f=c.data;g=c.shape[0];q=m.mallocDouble(g);for(u=t=0;u<g;++u)w=f[2*u],x=f[2*u+1],k[w]!==k[x]&&(E=d[w],F=d[x],f[2*t]=w,f[2*t+1]=x,q[t++]=(F-e)/(F-E));c.shape[0]=t;e=n(q,[t]);f=d.length|0;d=m.mallocInt32(2*f);g=c.shape[0];q=c.data;for(u=t=d[0]=0;u<g;++u)if(w=q[2*u],w!==t){for(d[2*t+1]=u;++t<w;)d[2*t]=u,d[2*t+1]=u;d[2*t]=u}for(d[2*t+1]=g;++t<f;)d[2*t]=d[2*t+1]=g;a=h(l)(a,c.data,d,k);f=c.shape[0]|0;g=c.data;l=
Array(f);for(q=0;q<f;++q)l[q]=[g[2*q],g[2*q+1]];f=[].slice.call(e.data,0,e.shape[0]);m.free(k);m.free(c.data);m.free(e.data);m.free(d);return{cells:a,vertexIds:l,vertexWeights:f}};var n=b("ndarray"),m=b("typedarray-pool"),p=b("ndarray-sort"),h=b("./lib/codegen")},{"./lib/codegen":529,ndarray:469,"ndarray-sort":468,"typedarray-pool":567}],529:[function(b,y,D){y.exports=function(h){var a=p[h];if(!a){a=p;var d=Array(h+1);d[0]=[[]];for(var e=1;e<=h;++e)for(var l=d[e]=m(e),k=0;k<l.length;++k);var c=["function B(C,E,i,j){",
"var a\x3dMath.min(i,j)|0,b\x3dMath.max(i,j)|0,l\x3dC[2*a],h\x3dC[2*a+1];","while(l\x3ch){","var m\x3d(l+h)\x3e\x3e1,v\x3dE[2*m+1];","if(v\x3d\x3d\x3db){return m}","if(b\x3cv){h\x3dm}else{l\x3dm+1}","}","return l;","};","function getContour",h,"d(F,E,C,S){","var n\x3dF.length,R\x3d[];","for(var i\x3d0;i\x3cn;++i){var c\x3dF[i],l\x3dc.length;"];for(e=h+1;1<e;--e){e<h+1&&c.push("else ");c.push("if(l\x3d\x3d\x3d",e,"){");l=[];for(k=0;k<e;++k)l.push("(S[c["+k+"]]\x3c\x3c"+k+")");c.push("var M\x3d",l.join("+"),
";if(M\x3d\x3d\x3d0||M\x3d\x3d\x3d",(1<<e)-1,"){continue}switch(M){");l=d[e-1];for(k=0;k<l.length;++k){c.push("case ",k,":");var f=l[k];if(!(0>=f.length)){c.push("R.push(");for(var g=0;g<f.length;++g){var q=f[g];0<g&&c.push(",");c.push("[");for(var t=0;t<q.length;++t){var u=q[t];0<t&&c.push(",");c.push("B(C,E,c[",u[0],"],c[",u[1],"])")}c.push("]")}c.push(");")}c.push("break;")}c.push("}}")}c.push("}return R;};return getContour",h,"d");d=(new Function("pool",c.join("")))(n);a=a[h]=d}return a};var n=
b("typedarray-pool"),m=b("marching-simplex-table"),p={}},{"marching-simplex-table":448,"typedarray-pool":567}],530:[function(b,y,D){function n(c,f){var g=c.length,q=c.length-f.length,t=Math.min;if(q)return q;switch(g){case 0:return 0;case 1:return c[0]-f[0];case 2:return(g=c[0]+c[1]-f[0]-f[1])?g:t(c[0],c[1])-t(f[0],f[1]);case 3:q=c[0]+c[1];var u=f[0]+f[1];if(g=q+c[2]-(u+f[2]))return g;var w=t(c[0],c[1]),x=t(f[0],f[1]);return(g=t(w,c[2])-t(x,f[2]))?g:t(w+c[2],q)-t(x+f[2],u);default:c=c.slice(0);c.sort();
f=f.slice(0);f.sort();for(t=0;t<g;++t)if(q=c[t]-f[t])return q;return 0}}function m(c,f){return n(c[0],f[0])}function p(c,f){if(f){for(var g=c.length,q=Array(g),t=0;t<g;++t)q[t]=[c[t],f[t]];q.sort(m);for(t=0;t<g;++t)c[t]=q[t][0],f[t]=q[t][1]}else c.sort(n);return c}function h(c){if(0===c.length)return[];for(var f=1,g=c.length,q=1;q<g;++q){var t=c[q];n(t,c[q-1])&&(q===f?f++:c[f++]=t)}c.length=f;return c}function a(c,f){for(var g=0,q=c.length-1,t=-1;g<=q;){var u=g+q>>1,w=n(c[u],f);0>=w?(0===w&&(t=u),
g=u+1):0<w&&(q=u-1)}return t}function d(c,f){for(var g=Array(c.length),q=0,t=g.length;q<t;++q)g[q]=[];t=[];q=0;for(var u=f.length;q<u;++q)for(var w=f[q],x=w.length,E=1,F=1<<x;E<F;++E){t.length=l.popCount(E);for(var z=0,B=0;B<x;++B)E&1<<B&&(t[z++]=w[B]);z=a(c,t);if(!(0>z))for(;!(g[z++].push(q),z>=c.length||0!==n(c[z],t)););}return g}function e(c,f){if(0>f)return[];for(var g=[],q=(1<<f+1)-1,t=0;t<c.length;++t)for(var u=c[t],w=q;w<1<<u.length;w=l.nextCombination(w)){for(var x=Array(f+1),E=0,F=0;F<u.length;++F)w&
1<<F&&(x[E++]=u[F]);g.push(x)}return p(g)}"use restrict";var l=b("bit-twiddle"),k=b("union-find");D.dimension=function(c){for(var f=0,g=Math.max,q=0,t=c.length;q<t;++q)f=g(f,c[q].length);return f-1};D.countVertices=function(c){for(var f=-1,g=Math.max,q=0,t=c.length;q<t;++q)for(var u=c[q],w=0,x=u.length;w<x;++w)f=g(f,u[w]);return f+1};D.cloneCells=function(c){for(var f=Array(c.length),g=0,q=c.length;g<q;++g)f[g]=c[g].slice(0);return f};D.compareCells=n;D.normalize=p;D.unique=h;D.findCell=a;D.incidence=
d;D.dual=function(c,f){if(!f)return d(h(e(c,0)),c,0);for(var g=Array(f),q=0;q<f;++q)g[q]=[];q=0;for(f=c.length;q<f;++q)for(var t=c[q],u=0,w=t.length;u<w;++u)g[t[u]].push(q);return g};D.explode=function(c){for(var f=[],g=0,q=c.length;g<q;++g)for(var t=c[g],u=t.length|0,w=1,x=1<<u;w<x;++w){for(var E=[],F=0;F<u;++F)w>>>F&1&&E.push(t[F]);f.push(E)}return p(f)};D.skeleton=e;D.boundary=function(c){for(var f=[],g=0,q=c.length;g<q;++g)for(var t=c[g],u=0,w=t.length;u<w;++u){for(var x=Array(t.length-1),E=0,
F=0;E<w;++E)E!==u&&(x[F++]=t[E]);f.push(x)}return p(f)};D.connectedComponents=function(c,f){if(f){f=new k(f);for(var g=0;g<c.length;++g)for(var q=c[g],t=0;t<q.length;++t)for(var u=t+1;u<q.length;++u)f.link(q[t],q[u]);q=[];t=f.ranks;for(g=0;g<t.length;++g)t[g]=-1;for(g=0;g<c.length;++g)u=f.find(c[g][0]),0>t[u]?(t[u]=q.length,q.push([c[g].slice(0)])):q[t[u]].push(c[g].slice(0));return q}f=h(p(e(c,0)));g=new k(f.length);for(q=0;q<c.length;++q)for(t=c[q],u=0;u<t.length;++u)for(var w=a(f,[t[u]]),x=u+1;x<
t.length;++x)g.link(w,a(f,[t[x]]));t=[];u=g.ranks;for(q=0;q<u.length;++q)u[q]=-1;for(q=0;q<c.length;++q)w=g.find(a(f,[c[q][0]])),0>u[w]?(u[w]=t.length,t.push([c[q].slice(0)])):t[u[w]].push(c[q].slice(0));return t}},{"bit-twiddle":97,"union-find":568}],531:[function(b,y,D){arguments[4][97][0].apply(D,arguments)},{dup:97}],532:[function(b,y,D){arguments[4][530][0].apply(D,arguments)},{"bit-twiddle":531,dup:530,"union-find":533}],533:[function(b,y,D){function n(m){this.roots=Array(m);this.ranks=Array(m);
for(var p=0;p<m;++p)this.roots[p]=p,this.ranks[p]=0}"use restrict";y.exports=n;n.prototype.length=function(){return this.roots.length};n.prototype.makeSet=function(){var m=this.roots.length;this.roots.push(m);this.ranks.push(0);return m};n.prototype.find=function(m){for(var p=this.roots;p[m]!==m;){var h=p[m];p[m]=p[h];m=h}return m};n.prototype.link=function(m,p){m=this.find(m);p=this.find(p);if(m!==p){var h=this.ranks,a=this.roots,d=h[m],e=h[p];d<e?a[m]=p:e<d?a[p]=m:(a[p]=m,++h[m])}}},{}],534:[function(b,
y,D){y.exports=function(p,h,a){function d(K){if(F[K])return Infinity;var N=w[K],H=x[K];if(0>N||0>H)return Infinity;N=h[N];H=h[H];return Math.abs(n(h[K],N,H))/Math.sqrt(Math.pow(N[0]-H[0],2)+Math.pow(N[1]-H[1],2))}function e(K,N){var H=v[K],L=v[N];v[K]=L;v[N]=H;G[H]=N;G[L]=K}function l(K){for(var N=E[v[K]];;){var H=N,L=2*K+1,P=2*(K+1),Q=K;if(L<I){var S=E[v[L]];S<H&&(Q=L,H=S)}P<I&&E[v[P]]<H&&(Q=P);if(Q===K)return K;e(K,Q);K=Q}}function k(K){for(var N=E[v[K]];0<K;){var H=K&1?K-1>>1:(K>>1)-1;if(0<=H&&
N<E[v[H]])e(K,H),K=H;else return K}}function c(){if(0<I){var K=v[0];e(0,I-1);--I;l(0);return K}return-1}function f(K,N){var H=v[K];if(E[H]===N)return K;E[H]=-Infinity;k(K);c();E[H]=N;I+=1;return k(I-1)}function g(K){if(!F[K]){F[K]=!0;var N=w[K];K=x[K];0<=w[K]&&(w[K]=N);0<=x[N]&&(x[N]=K);0<=G[N]&&f(G[N],d(N));0<=G[K]&&f(G[K],d(K))}}function q(K,N){if(0>K[N])return N;var H=N,L=N;do{var P=K[L];if(!F[L]||0>P||P===L)break;L=P;P=K[L];if(!F[L]||0>P||P===L)break;L=P;H=K[H]}while(H!==L);for(;N!==L;N=K[N])K[N]=
L;return L}for(var t=h.length,u=p.length,w=Array(t),x=Array(t),E=Array(t),F=Array(t),z=0;z<t;++z)w[z]=x[z]=-1,E[z]=Infinity,F[z]=!1;for(z=0;z<u;++z){var B=p[z];if(2!==B.length)throw Error("Input must be a graph");var C=B[1];B=B[0];x[B]=-1!==x[B]?-2:C;w[C]=-1!==w[C]?-2:B}var v=[],G=Array(t);for(z=0;z<t;++z)Infinity>(E[z]=d(z))?(G[z]=v.length,v.push(z)):G[z]=-1;var I=v.length;for(z=I>>1;0<=z;--z)l(z);for(;;){z=c();if(0>z||E[z]>a)break;g(z)}a=[];for(z=0;z<t;++z)F[z]||(G[z]=a.length,a.push(h[z].slice()));
var J=[];p.forEach(function(K){var N=q(w,K[0]);K=q(x,K[1]);0<=N&&0<=K&&N!==K&&(N=G[N],K=G[K],N!==K&&J.push([N,K]))});m.unique(m.normalize(J));return{positions:a,edges:J}};var n=b("robust-orientation"),m=b("simplicial-complex")},{"robust-orientation":520,"simplicial-complex":532}],535:[function(b,y,D){function n(p,h){if(h[0][0]<h[1][0]){var a=h[0];h=h[1]}else if(h[0][0]>h[1][0])a=h[1],h=h[0];else{a=Math.min(p[0][1],p[1][1]);p=Math.max(p[0][1],p[1][1]);var d=Math.min(h[0][1],h[1][1]);h=Math.max(h[0][1],
h[1][1]);return p<d?p-d:a>h?a-h:p-h}p[0][1]<p[1][1]?(d=p[0],p=p[1]):(d=p[1],p=p[0]);return(d=m(h,a,d))?d:(d=m(h,a,p))?d:p-h}y.exports=function(p,h){if(h[0][0]<h[1][0]){var a=h[0];var d=h[1]}else if(h[0][0]>h[1][0])a=h[1],d=h[0];else return n(h,p);if(p[0][0]<p[1][0])h=p[0],p=p[1];else if(p[0][0]>p[1][0])h=p[1],p=p[0];else return-n(p,h);var e=m(a,d,p),l=m(a,d,h);if(0>e){if(0>=l)return e}else if(0<e){if(0<=l)return e}else if(l)return l;e=m(p,h,d);l=m(p,h,a);if(0>e){if(0>=l)return e}else if(0<e){if(0<=
l)return e}else if(l)return l;return d[0]-p[0]};var m=b("robust-orientation")},{"robust-orientation":520}],536:[function(b,y,D){arguments[4][243][0].apply(D,arguments)},{dup:243}],537:[function(b,y,D){function n(c,f,g){this.slabs=c;this.coordinates=f;this.horizontal=g}function m(c,f){return c.y-f}function p(c,f){for(var g=null;c;){var q=c.key;if(q[0][0]<q[1][0]){var t=q[0];var u=q[1]}else t=q[1],u=q[0];t=l(t,u,f);if(0>t)c=c.left;else if(0<t)if(f[0]!==q[1][0])g=c,c=c.right;else{if(q=p(c.right,f))return q;
c=c.left}else{if(f[0]!==q[1][0])return c;if(q=p(c.right,f))return q;c=c.left}}return g}function h(c,f,g,q){this.y=c;this.index=f;this.start=g;this.closed=q}function a(c,f,g,q){this.x=c;this.segment=f;this.create=g;this.index=q}y.exports=function(c){for(var f=c.length,g=2*f,q=Array(g),t=0;t<f;++t){var u=c[t],w=u[0][0]<u[1][0];q[2*t]=new a(u[0][0],u,w,t);q[2*t+1]=new a(u[1][0],u,!w,t)}q.sort(function(z,B){var C=z.x-B.x;return C?C:(C=z.create-B.create)?C:Math.min(z.segment[0][1],z.segment[1][1])-Math.min(B.segment[0][1],
B.segment[1][1])});c=e(k);f=[];u=[];w=[];for(t=0;t<g;){for(var x=q[t].x,E=[];t<g;){var F=q[t];if(F.x!==x)break;t+=1;F.segment[0][0]===F.x&&F.segment[1][0]===F.x?F.create&&(F.segment[0][1]<F.segment[1][1]?(E.push(new h(F.segment[0][1],F.index,!0,!0)),E.push(new h(F.segment[1][1],F.index,!1,!1))):(E.push(new h(F.segment[1][1],F.index,!0,!1)),E.push(new h(F.segment[0][1],F.index,!1,!0)))):c=F.create?c.insert(F.segment,F.index):c.remove(F.segment)}f.push(c.root);u.push(x);w.push(E)}return new n(f,u,w)};
var d=b("binary-search-bounds"),e=b("functional-red-black-tree"),l=b("robust-orientation"),k=b("./lib/order-segments");n.prototype.castUp=function(c){var f=d.le(this.coordinates,c[0]);if(0>f)return-1;var g=p(this.slabs[f],c),q=-1;g&&(q=g.value);if(this.coordinates[f]===c[0]){var t=null;g&&(t=g.key);0<f&&(g=p(this.slabs[f-1],c))&&(t?0<k(g.key,t)&&(t=g.key,q=g.value):(q=g.value,t=g.key));g=this.horizontal[f];if(0<g.length){var u=d.ge(g,c[1],m);if(u<g.length){f=g[u];if(c[1]===f.y){if(f.closed)return f.index;
for(;u<g.length-1&&g[u+1].y===c[1];)if(u+=1,f=g[u],f.closed)return f.index;if(f.y===c[1]&&!f.start){u+=1;if(u>=g.length)return q;f=g[u]}}f.start?t?(c=l(t[0],t[1],[c[0],f.y]),t[0][0]>t[1][0]&&(c=-c),0<c&&(q=f.index)):q=f.index:f.y!==c[1]&&(q=f.index)}}}return q}},{"./lib/order-segments":535,"binary-search-bounds":536,"functional-red-black-tree":247,"robust-orientation":520}],538:[function(b,y,D){function n(a,d){a=h(p(a,d),[d[d.length-1]]);return a[a.length-1]}function m(a,d,e,l){d=-d/(l-d);0>d?d=0:
1<d&&(d=1);l=1-d;for(var k=a.length,c=Array(k),f=0;f<k;++f)c[f]=d*a[f]+l*e[f];return c}var p=b("robust-dot-product"),h=b("robust-sum");y.exports=function(a,d){for(var e=[],l=[],k=n(a[a.length-1],d),c=a[a.length-1],f,g=0;g<a.length;++g,c=f){f=a[g];var q=n(f,d);if(0>k&&0<q||0<k&&0>q)k=m(c,q,f,k),e.push(k),l.push(k.slice());0>q?l.push(f.slice()):0<q?e.push(f.slice()):(e.push(f.slice()),l.push(f.slice()));k=q}return{positive:e,negative:l}};y.exports.positive=function(a,d){for(var e=[],l=n(a[a.length-
1],d),k=a[a.length-1],c,f=0;f<a.length;++f,k=c){c=a[f];var g=n(c,d);(0>l&&0<g||0<l&&0>g)&&e.push(m(k,g,c,l));0<=g&&e.push(c.slice());l=g}return e};y.exports.negative=function(a,d){for(var e=[],l=n(a[a.length-1],d),k=a[a.length-1],c,f=0;f<a.length;++f,k=c){c=a[f];var g=n(c,d);(0>l&&0<g||0<l&&0>g)&&e.push(m(k,g,c,l));0>=g&&e.push(c.slice());l=g}return e}},{"robust-dot-product":517,"robust-sum":525}],539:[function(b,y,D){!function(){function n(a){var d=a;if(h[d])d=h[d];else{for(var e=d,l,k=[],c=0;e;){if(null!==
(l=p.text.exec(e)))k.push(l[0]);else if(null!==(l=p.modulo.exec(e)))k.push("%");else if(null!==(l=p.placeholder.exec(e))){if(l[2]){c|=1;var f=[],g=l[2],q;if(null!==(q=p.key.exec(g)))for(f.push(q[1]);""!==(g=g.substring(q[0].length));)if(null!==(q=p.key_access.exec(g)))f.push(q[1]);else if(null!==(q=p.index_access.exec(g)))f.push(q[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");l[2]=f}else c|=
2;if(3===c)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");k.push({placeholder:l[0],param_no:l[1],keys:l[2],sign:l[3],pad_char:l[4],align:l[5],width:l[6],precision:l[7],type:l[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");e=e.substring(l[0].length)}d=h[d]=k}e=arguments;l=1;k=d.length;f="";var t,u;for(g=0;g<k;g++)if("string"===typeof d[g])f+=d[g];else if("object"===typeof d[g]){q=d[g];if(q.keys)for(c=e[l],t=0;t<q.keys.length;t++){if(void 0==
c)throw Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',q.keys[t],q.keys[t-1]));c=c[q.keys[t]]}else c=q.param_no?e[q.param_no]:e[l++];p.not_type.test(q.type)&&p.not_primitive.test(q.type)&&c instanceof Function&&(c=c());if(p.numeric_arg.test(q.type)&&"number"!==typeof c&&isNaN(c))throw new TypeError(n("[sprintf] expecting number but found %T",c));p.number.test(q.type)&&(u=0<=c);switch(q.type){case "b":c=parseInt(c,10).toString(2);break;case "c":c=String.fromCharCode(parseInt(c,
10));break;case "d":case "i":c=parseInt(c,10);break;case "j":c=JSON.stringify(c,null,q.width?parseInt(q.width):0);break;case "e":c=q.precision?parseFloat(c).toExponential(q.precision):parseFloat(c).toExponential();break;case "f":c=q.precision?parseFloat(c).toFixed(q.precision):parseFloat(c);break;case "g":c=q.precision?String(Number(c.toPrecision(q.precision))):parseFloat(c);break;case "o":c=(parseInt(c,10)>>>0).toString(8);break;case "s":c=String(c);c=q.precision?c.substring(0,q.precision):c;break;
case "t":c=String(!!c);c=q.precision?c.substring(0,q.precision):c;break;case "T":c=Object.prototype.toString.call(c).slice(8,-1).toLowerCase();c=q.precision?c.substring(0,q.precision):c;break;case "u":c=parseInt(c,10)>>>0;break;case "v":c=c.valueOf();c=q.precision?c.substring(0,q.precision):c;break;case "x":c=(parseInt(c,10)>>>0).toString(16);break;case "X":c=(parseInt(c,10)>>>0).toString(16).toUpperCase()}if(p.json.test(q.type))f+=c;else{if(!p.number.test(q.type)||u&&!q.sign)var w="";else w=u?"+":
"-",c=c.toString().replace(p.sign,"");t=q.pad_char?"0"===q.pad_char?"0":q.pad_char.charAt(1):" ";var x=q.width-(w+c).length;x=q.width?0<x?t.repeat(x):"":"";f+=q.align?w+c+x:"0"===t?w+x+c:x+w+c}}return f}function m(a,d){return n.apply(null,[a].concat(d||[]))}var p={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,
key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},h=Object.create(null);"undefined"!==typeof D&&(D.sprintf=n,D.vsprintf=m);"undefined"!==typeof window&&(window.sprintf=n,window.vsprintf=m)}()},{}],540:[function(b,y,D){var n=b("parenthesis");y.exports=function(m,p,h){if(null==m)throw Error("First argument should be a string");if(null==p)throw Error("Separator should be a string or a RegExp");if(!h)h={};else if("string"===typeof h||Array.isArray(h))h=
{ignore:h};null==h.escape&&(h.escape=!0);null==h.ignore?h.ignore="[] () {} \x3c\x3e \"\" '' ``  ".split(" "):("string"===typeof h.ignore&&(h.ignore=[h.ignore]),h.ignore=h.ignore.map(function(k){1===k.length&&(k+=k);return k}));m=n.parse(m,{flat:!0,brackets:h.ignore});var a=m[0].split(p);if(h.escape){h=[];for(var d=0;d<a.length;d++){var e=a[d],l=a[d+1];"\\"===e[e.length-1]&&"\\"!==e[e.length-2]?(h.push(e+p+l),d++):h.push(e)}a=h}for(d=0;d<a.length;d++)m[0]=a[d],a[d]=n.stringify(m,{flat:!0});return a}},
{parenthesis:477}],541:[function(b,y,D){y.exports=function(n){function m(w){var x=[w],E=[w];h[w]=a[w]=f;d[w]=!0;for(f+=1;0<E.length;){w=E[E.length-1];var F=n[w];if(e[w]<F.length){for(var z=e[w];z<F.length;++z){var B=F[z];if(0>h[B]){h[B]=a[B]=f;d[B]=!0;f+=1;x.push(B);E.push(B);break}else d[B]&&(a[w]=Math.min(a[w],a[B])|0);0<=l[B]&&k[w].push(l[B])}e[w]=z}else{if(a[w]===h[w]){var C=[];F=[];B=0;for(z=x.length-1;0<=z;--z){var v=x[z];d[v]=!1;C.push(v);F.push(k[v]);B+=k[v].length;l[v]=g.length;if(v===w){x.length=
z;break}}g.push(C);w=Array(B);for(z=0;z<F.length;z++)for(C=0;C<F[z].length;C++)w[--B]=F[z][C];q.push(w)}E.pop()}}}for(var p=n.length,h=Array(p),a=Array(p),d=Array(p),e=Array(p),l=Array(p),k=Array(p),c=0;c<p;++c)h[c]=-1,a[c]=0,d[c]=!1,e[c]=0,l[c]=-1,k[c]=[];var f=0,g=[],q=[];for(c=0;c<p;++c)0>h[c]&&m(c);for(c=0;c<q.length;c++){var t=q[c];if(0!==t.length){t.sort(function(w,x){return w-x});p=[t[0]];for(var u=1;u<t.length;u++)t[u]!==t[u-1]&&p.push(t[u]);q[c]=p}}return{components:g,adjacencyList:q}}},
{}],542:[function(b,y,D){function n(d,e){var l=d.length,k=["'use strict';"],c="surfaceNets"+d.join("_")+"d"+e;k.push("var contour\x3dgenContour({","order:[",d.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p \x3e c)|0 },");"generic"===e&&k.push("getters:[0],");var f=[];e=[];for(d=0;d<l;++d)f.push("d"+d),e.push("d"+d);for(d=0;d<1<<l;++d)f.push("v"+d),e.push("v"+d);for(d=0;d<1<<l;++d)f.push("p"+d),e.push("p"+d);f.push("a","b","c");e.push("a","c");k.push("vertex:function vertexFunc(",
f.join(),"){");f=[];for(d=0;d<1<<l;++d)f.push("(p"+d+"\x3c\x3c"+d+")");k.push("var m\x3d(",f.join("+"),")|0;if(m\x3d\x3d\x3d0||m\x3d\x3d\x3d",(1<<(1<<l))-1,"){return}");f=[];var g=[];128>=1<<(1<<l)?(k.push("switch(m){"),g=k):k.push("switch(m\x3e\x3e\x3e7){");for(d=0;d<1<<(1<<l);++d){128<1<<(1<<l)&&0===d%128&&(0<f.length&&g.push("}}"),g="vExtra"+f.length,k.push("case ",d>>>7,":",g,"(m\x260x7f,",e.join(),");break;"),g=["function ",g,"(m,",e.join(),"){switch(m){"],f.push(g));g.push("case ",d&127,":");
for(var q=Array(l),t=Array(l),u=Array(l),w=Array(l),x=0,E=0;E<l;++E)q[E]=[],t[E]=[],u[E]=0,w[E]=0;for(E=0;E<1<<l;++E)for(var F=0;F<l;++F){var z=E^1<<F;if(!(z>E)&&!(d&1<<z)!==!(d&1<<E)){var B=1;d&1<<z?t[F].push("v"+z+"-v"+E):(t[F].push("v"+E+"-v"+z),B=-B);0>B?(q[F].push("-v"+E+"-v"+z),u[F]+=2):(q[F].push("v"+E+"+v"+z),u[F]-=2);x+=1;for(B=0;B<l;++B)B!==F&&(z&1<<B?w[B]+=1:--w[B])}}E=[];for(F=0;F<l;++F)0===q[F].length?E.push("d"+F+"-0.5"):(z="",0>u[F]?z=u[F]+"*c":0<u[F]&&(z="+"+u[F]+"*c"),E.push("d"+
F+"-"+(.5+w[F]/x*.5)+"-"+q[F].length/x*.5+"*("+q[F].join("+")+z+")/("+t[F].join("+")+")"));g.push("a.push([",E.join(),"]);","break;")}k.push("}},");0<f.length&&g.push("}}");e=[];for(d=0;d<1<<l-1;++d)e.push("v"+d);e.push("c0","c1","p0","p1","a","b","c");k.push("cell:function cellFunc(",e.join(),"){");l=p(l-1);k.push("if(p0){b.push(",l.map(function(C){return"["+C.map(function(v){return"v"+v})+"]"}).join(),")}else{b.push(",l.map(function(C){C=C.slice();C.reverse();return"["+C.map(function(v){return"v"+
v})+"]"}).join(),")}}});function ",c,"(array,level){var verts\x3d[],cells\x3d[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",c,";");for(d=0;d<f.length;++d)k.push(f[d].join(""));return(new Function("genContour",k.join("")))(m)}y.exports=function(d,e){if(0>=d.dimension)return{positions:[],cells:[]};if(1===d.dimension){d=h(d,e);e=d.length;for(var l=Array(e),k=Array(e),c=0;c<e;++c)l[c]=[d[c]],k[c]=[c];return{positions:l,cells:k}}l=d.order.join()+"-"+d.dtype;k=a[l];
e=+e||0;k||(k=a[l]=n(d.order,d.dtype));return k(d,e)};var m=b("ndarray-extract-contour"),p=b("triangulate-hypercube"),h=b("zero-crossings"),a={}},{"ndarray-extract-contour":461,"triangulate-hypercube":552,"zero-crossings":596}],543:[function(b,y,D){Object.defineProperty(D,"__esModule",{value:!0});var n=function(){return function(e,l){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var k=[],c=!0,f=!1,g=void 0;try{for(var q=e[Symbol.iterator](),t;!(c=(t=q.next()).done)&&(k.push(t.value),
!l||k.length!==l);c=!0);}catch(u){f=!0,g=u}finally{try{if(!c&&q["return"])q["return"]()}finally{if(f)throw g;}}return k}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),m=2*Math.PI,p=function(e,l,k,c,f,g,q){var t=e.x;e=e.y;t*=l;e*=k;return{x:c*t-f*e+g,y:f*t+c*e+q}},h=function(e,l){var k=1.5707963267948966===l?.551915024494:-1.5707963267948966===l?-.551915024494:4/3*Math.tan(l/4),c=Math.cos(e),f=Math.sin(e),g=Math.cos(e+l);e=Math.sin(e+l);return[{x:c-f*k,y:f+c*k},{x:g+
e*k,y:e-g*k},{x:g,y:e}]},a=function(e,l,k,c){var f=e*k+l*c;1<f&&(f=1);-1>f&&(f=-1);return(0>e*c-l*k?-1:1)*Math.acos(f)},d=function(e,l,k,c,f,g,q,t,u,w,x,E){var F=Math.pow(f,2),z=Math.pow(g,2),B=Math.pow(x,2),C=Math.pow(E,2),v=F*z-F*C-z*B;0>v&&(v=0);v=Math.sqrt(v/(F*C+z*B))*(q===t?-1:1);q=v*f/g*E;v=v*-g/f*x;e=w*q-u*v+(e+k)/2;l=u*q+w*v+(l+c)/2;c=(x-q)/f;u=(E-v)/g;f=(-x-q)/f;E=(-E-v)/g;g=a(1,0,c,u);E=a(c,u,f,E);0===t&&0<E&&(E-=m);1===t&&0>E&&(E+=m);return[e,l,g,E]};D.default=function(e){var l=e.px,k=
e.py,c=e.cx,f=e.cy,g=e.rx,q=e.ry,t=e.xAxisRotation,u=void 0===t?0:t;t=e.largeArcFlag;var w=e.sweepFlag;e=[];if(0===g||0===q)return[];var x=Math.sin(u*m/360),E=Math.cos(u*m/360);u=E*(l-c)/2+x*(k-f)/2;var F=-x*(l-c)/2+E*(k-f)/2;if(0===u&&0===F)return[];g=Math.abs(g);q=Math.abs(q);var z=Math.pow(u,2)/Math.pow(g,2)+Math.pow(F,2)/Math.pow(q,2);1<z&&(g*=Math.sqrt(z),q*=Math.sqrt(z));l=d(l,k,c,f,g,q,void 0===t?0:t,void 0===w?0:w,x,E,u,F);k=n(l,4);var B=k[0],C=k[1];l=k[2];k=k[3];c=Math.abs(k)/(m/4);1E-7>
Math.abs(1-c)&&(c=1);c=Math.max(Math.ceil(c),1);k/=c;for(f=0;f<c;f++)e.push(h(l,k)),l+=k;return e.map(function(v){var G=p(v[0],g,q,E,x,B,C),I=G.x;G=G.y;var J=p(v[1],g,q,E,x,B,C),K=J.x;J=J.y;v=p(v[2],g,q,E,x,B,C);return{x1:I,y1:G,x2:K,y2:J,x:v.x,y:v.y}})};y.exports=D.default},{}],544:[function(b,y,D){var n=b("parse-svg-path"),m=b("abs-svg-path"),p=b("normalize-svg-path"),h=b("is-svg-path"),a=b("assert");y.exports=function(d){Array.isArray(d)&&1===d.length&&"string"===typeof d[0]&&(d=d[0]);"string"===
typeof d&&(a(h(d),"String is not an SVG path."),d=n(d));a(Array.isArray(d),"Argument should be a string or an array of path segments.");d=m(d);d=p(d);if(!d.length)return[0,0,0,0];for(var e=[Infinity,Infinity,-Infinity,-Infinity],l=0,k=d.length;l<k;l++)for(var c=d[l].slice(1),f=0;f<c.length;f+=2)c[f+0]<e[0]&&(e[0]=c[f+0]),c[f+1]<e[1]&&(e[1]=c[f+1]),c[f+0]>e[2]&&(e[2]=c[f+0]),c[f+1]>e[3]&&(e[3]=c[f+1]);return e}},{"abs-svg-path":65,assert:73,"is-svg-path":445,"normalize-svg-path":545,"parse-svg-path":479}],
545:[function(b,y,D){function n(h,a,d,e){return["C",h,a,d,e,d,e]}function m(h,a,d,e,l,k){return["C",h/3+2/3*d,a/3+2/3*e,l/3+2/3*d,k/3+2/3*e,l,k]}y.exports=function(h){for(var a,d=[],e=0,l=0,k=0,c=0,f=null,g=null,q=0,t=0,u=0,w=h.length;u<w;u++){var x=h[u],E=x[0];switch(E){case "M":k=x[1];c=x[2];break;case "A":var F=p({px:q,py:t,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!F.length)continue;for(a=0;a<F.length;a++)x=F[a],x=["C",x.x1,x.y1,x.x2,x.y2,x.x,x.y],
a<F.length-1&&d.push(x);break;case "S":F=q;if("C"==a||"S"==a)F+=F-e,t+=t-l;x=["C",F,t,x[1],x[2],x[3],x[4]];break;case "T":"Q"==a||"T"==a?(f=2*q-f,g=2*t-g):(f=q,g=t);x=m(q,t,f,g,x[1],x[2]);break;case "Q":f=x[1];g=x[2];x=m(q,t,x[1],x[2],x[3],x[4]);break;case "L":x=n(q,t,x[1],x[2]);break;case "H":x=n(q,t,x[1],t);break;case "V":x=n(q,t,q,x[1]);break;case "Z":x=n(q,t,k,c)}a=E;q=x[x.length-2];t=x[x.length-1];4<x.length?(e=x[x.length-4],l=x[x.length-3]):(e=q,l=t);d.push(x)}return d};var p=b("svg-arc-to-cubic-bezier")},
{"svg-arc-to-cubic-bezier":543}],546:[function(b,y,D){function n(){if(null!=k)return k;var c=document.createElement("canvas").getContext("2d");c.canvas.width=c.canvas.height=1;if(!window.Path2D)return k=!1;var f=new Path2D("M0,0h1v1h-1v-1Z");c.fillStyle="black";c.fill(f);return k=(c=c.getImageData(0,0,1,1))&&c.data&&255===c.data[3]}var m=b("svg-path-bounds"),p=b("parse-svg-path"),h=b("draw-svg-path"),a=b("is-svg-path"),d=b("bitmap-sdf"),e=document.createElement("canvas"),l=e.getContext("2d");y.exports=
function(c,f){if(!a(c))throw Error("Argument should be valid svg path string");f||(f={});if(f.shape){var g=f.shape[0];var q=f.shape[1]}else g=e.width=f.w||f.width||200,q=e.height=f.h||f.height||200;var t=Math.min(g,q),u=f.stroke||0,w=f.viewbox||f.viewBox||m(c);w=[g/(w[2]-w[0]),q/(w[3]-w[1])];w=Math.min(w[0]||0,w[1]||0)/2;l.fillStyle="black";l.fillRect(0,0,g,q);l.fillStyle="white";u&&("number"!=typeof u&&(u=1),l.strokeStyle=0<u?"white":"black",l.lineWidth=Math.abs(u));l.translate(.5*g,.5*q);l.scale(w,
w);n()?(c=new Path2D(c),l.fill(c),u&&l.stroke(c)):(c=p(c),h(l,c),l.fill(),u&&l.stroke());l.setTransform(1,0,0,1,0,0);return d(l,{cutoff:null!=f.cutoff?f.cutoff:.5,radius:null!=f.radius?f.radius:.5*t})};var k},{"bitmap-sdf":98,"draw-svg-path":174,"is-svg-path":445,"parse-svg-path":479,"svg-path-bounds":544}],547:[function(b,y,D){(function(n){function m(a,d,e){e=e||{};var l=h[a];l||(l=h[a]={" ":{data:new Float32Array(0),shape:.2}});var k=l[d];if(!k)if(1>=d.length||!/\d/.test(d)){k=p(d,{triangles:!0,
font:a,textAlign:e.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}});e=k.cells;k=k.positions;for(var c=new Float32Array(6*e.length),f=a=0,g=0;g<e.length;++g)for(var q=e[g],t=0;3>t;++t){var u=k[q[t]];c[a++]=u[0];c[a++]=u[1]+1.4;f=Math.max(u[0],f)}k=l[d]={data:c,shape:f}}else{f=d.split(/(\d|\s)/);e=Array(f.length);for(c=k=g=0;c<f.length;++c)e[c]=m(a,f[c]),g+=e[c].data.length,k+=e[c].shape,0<c&&(k+=.02);a=new Float32Array(g);f=0;
g=-.5*k;for(c=0;c<e.length;++c){q=e[c].data;for(t=0;t<q.length;t+=2)a[f++]=q[t]+g,a[f++]=q[t+1];g+=e[c].shape+.02}k=l[d]={data:a,shape:k}}return k}y.exports=m;var p=b("vectorize-text");n=window||n.global||{};var h=n.__TEXT_CACHE||{};n.__TEXT_CACHE={}}).call(this,b("_process"))},{_process:500,"vectorize-text":572}],548:[function(b,y,D){(function(n){function m(X,da){var ea,ca;X=X?X:"";da=da||{};if(X instanceof m)return X;if(!(this instanceof m))return new m(X,da);var ia=X;var ha={r:0,g:0,b:0};var fa=
1;var na=ea=!1;if("string"==typeof ia)a:{ia=ia.replace(J,"").replace(K,"").toLowerCase();var sa=!1;if(S[ia])ia=S[ia],sa=!0;else if("transparent"==ia){ia={r:0,g:0,b:0,a:0,format:"name"};break a}ia=(ca=U.rgb.exec(ia))?{r:ca[1],g:ca[2],b:ca[3]}:(ca=U.rgba.exec(ia))?{r:ca[1],g:ca[2],b:ca[3],a:ca[4]}:(ca=U.hsl.exec(ia))?{h:ca[1],s:ca[2],l:ca[3]}:(ca=U.hsla.exec(ia))?{h:ca[1],s:ca[2],l:ca[3],a:ca[4]}:(ca=U.hsv.exec(ia))?{h:ca[1],s:ca[2],v:ca[3]}:(ca=U.hsva.exec(ia))?{h:ca[1],s:ca[2],v:ca[3],a:ca[4]}:(ca=
U.hex8.exec(ia))?{r:parseInt(ca[1],16),g:parseInt(ca[2],16),b:parseInt(ca[3],16),a:parseInt(ca[4],16)/255,format:sa?"name":"hex8"}:(ca=U.hex6.exec(ia))?{r:parseInt(ca[1],16),g:parseInt(ca[2],16),b:parseInt(ca[3],16),format:sa?"name":"hex"}:(ca=U.hex4.exec(ia))?{r:parseInt(ca[1]+""+ca[1],16),g:parseInt(ca[2]+""+ca[2],16),b:parseInt(ca[3]+""+ca[3],16),a:parseInt(ca[4]+""+ca[4],16)/255,format:sa?"name":"hex8"}:(ca=U.hex3.exec(ia))?{r:parseInt(ca[1]+""+ca[1],16),g:parseInt(ca[2]+""+ca[2],16),b:parseInt(ca[3]+
""+ca[3],16),format:sa?"name":"hex"}:!1}if("object"==typeof ia){if(I(ia.r)&&I(ia.g)&&I(ia.b))ha=ia.g,ea=ia.b,ha={r:255*C(ia.r,255),g:255*C(ha,255),b:255*C(ea,255)},ea=!0,na="%"===String(ia.r).substr(-1)?"prgb":"rgb";else if(I(ia.h)&&I(ia.s)&&I(ia.v)){ha=G(ia.s);na=G(ia.v);ca=ia.h;ea=ha;ha=na;ca=6*C(ca,360);ea=C(ea,100);ha=C(ha,100);na=n.floor(ca);var ua=ca-na;ca=ha*(1-ea);sa=ha*(1-ua*ea);ea=ha*(1-(1-ua)*ea);na%=6;ha={r:255*[ha,sa,ca,ca,ea,ha][na],g:255*[ea,ha,ha,sa,ca,ca][na],b:255*[ca,ca,ea,ha,ha,
sa][na]};ea=!0;na="hsv"}else I(ia.h)&&I(ia.s)&&I(ia.l)&&(ha=G(ia.s),ea=G(ia.l),ha=h(ia.h,ha,ea),ea=!0,na="hsl");ia.hasOwnProperty("a")&&(fa=ia.a)}fa=B(fa);ia=ia.format||na;na=L(255,P(ha.r,0));ca=L(255,P(ha.g,0));ha=L(255,P(ha.b,0));this._originalInput=X;this._r=na;this._g=ca;this._b=ha;this._a=fa;this._roundA=H(100*this._a)/100;this._format=da.format||ia;this._gradientType=da.gradientType;1>this._r&&(this._r=H(this._r));1>this._g&&(this._g=H(this._g));1>this._b&&(this._b=H(this._b));this._ok=ea;this._tc_id=
N++}function p(X,da,ea){X=C(X,255);da=C(da,255);ea=C(ea,255);var ca=P(X,da,ea),ia=L(X,da,ea),ha=(ca+ia)/2;if(ca==ia)var fa=ia=0;else{var na=ca-ia;ia=.5<ha?na/(2-ca-ia):na/(ca+ia);switch(ca){case X:fa=(da-ea)/na+(da<ea?6:0);break;case da:fa=(ea-X)/na+2;break;case ea:fa=(X-da)/na+4}fa/=6}return{h:fa,s:ia,l:ha}}function h(X,da,ea){function ca(fa,na,sa){0>sa&&(sa+=1);1<sa&&--sa;return sa<1/6?fa+6*(na-fa)*sa:.5>sa?na:sa<2/3?fa+(na-fa)*(2/3-sa)*6:fa}X=C(X,360);da=C(da,100);ea=C(ea,100);if(0===da)ea=da=
X=ea;else{var ia=.5>ea?ea*(1+da):ea+da-ea*da,ha=2*ea-ia;ea=ca(ha,ia,X+1/3);da=ca(ha,ia,X);X=ca(ha,ia,X-1/3)}return{r:255*ea,g:255*da,b:255*X}}function a(X,da,ea){X=C(X,255);da=C(da,255);ea=C(ea,255);var ca=P(X,da,ea),ia=L(X,da,ea),ha=ca-ia;if(ca==ia)var fa=0;else{switch(ca){case X:fa=(da-ea)/ha+(da<ea?6:0);break;case da:fa=(ea-X)/ha+2;break;case ea:fa=(X-da)/ha+4}fa/=6}return{h:fa,s:0===ca?0:ha/ca,v:ca}}function d(X,da,ea,ca){X=[v(H(X).toString(16)),v(H(da).toString(16)),v(H(ea).toString(16))];return ca&&
X[0].charAt(0)==X[0].charAt(1)&&X[1].charAt(0)==X[1].charAt(1)&&X[2].charAt(0)==X[2].charAt(1)?X[0].charAt(0)+X[1].charAt(0)+X[2].charAt(0):X.join("")}function e(X,da,ea,ca){return[v(n.round(255*parseFloat(ca)).toString(16)),v(H(X).toString(16)),v(H(da).toString(16)),v(H(ea).toString(16))].join("")}function l(X,da){da=0===da?0:da||10;X=m(X).toHsl();X.s-=da/100;X.s=L(1,P(0,X.s));return m(X)}function k(X,da){da=0===da?0:da||10;X=m(X).toHsl();X.s+=da/100;X.s=L(1,P(0,X.s));return m(X)}function c(X){return m(X).desaturate(100)}
function f(X,da){da=0===da?0:da||10;X=m(X).toHsl();X.l+=da/100;X.l=L(1,P(0,X.l));return m(X)}function g(X,da){da=0===da?0:da||10;X=m(X).toRgb();X.r=P(0,L(255,X.r-H(255*-(da/100))));X.g=P(0,L(255,X.g-H(255*-(da/100))));X.b=P(0,L(255,X.b-H(255*-(da/100))));return m(X)}function q(X,da){da=0===da?0:da||10;X=m(X).toHsl();X.l-=da/100;X.l=L(1,P(0,X.l));return m(X)}function t(X,da){X=m(X).toHsl();da=(X.h+da)%360;X.h=0>da?360+da:da;return m(X)}function u(X){X=m(X).toHsl();X.h=(X.h+180)%360;return m(X)}function w(X){var da=
m(X).toHsl(),ea=da.h;return[m(X),m({h:(ea+120)%360,s:da.s,l:da.l}),m({h:(ea+240)%360,s:da.s,l:da.l})]}function x(X){var da=m(X).toHsl(),ea=da.h;return[m(X),m({h:(ea+90)%360,s:da.s,l:da.l}),m({h:(ea+180)%360,s:da.s,l:da.l}),m({h:(ea+270)%360,s:da.s,l:da.l})]}function E(X){var da=m(X).toHsl(),ea=da.h;return[m(X),m({h:(ea+72)%360,s:da.s,l:da.l}),m({h:(ea+216)%360,s:da.s,l:da.l})]}function F(X,da,ea){da=da||6;ea=ea||30;var ca=m(X).toHsl();ea=360/ea;X=[m(X)];for(ca.h=(ca.h-(ea*da>>1)+720)%360;--da;)ca.h=
(ca.h+ea)%360,X.push(m(ca));return X}function z(X,da){da=da||6;var ea=m(X).toHsv();X=ea.h;var ca=ea.s;ea=ea.v;for(var ia=[],ha=1/da;da--;)ia.push(m({h:X,s:ca,v:ea})),ea=(ea+ha)%1;return ia}function B(X){X=parseFloat(X);if(isNaN(X)||0>X||1<X)X=1;return X}function C(X,da){var ea=X;"string"==typeof ea&&-1!=ea.indexOf(".")&&1===parseFloat(ea)&&(X="100%");ea="string"===typeof X&&-1!=X.indexOf("%");X=L(da,P(0,parseFloat(X)));ea&&(X=parseInt(X*da,10)/100);return 1E-6>n.abs(X-da)?1:X%da/parseFloat(da)}function v(X){return 1==
X.length?"0"+X:""+X}function G(X){1>=X&&(X=100*X+"%");return X}function I(X){return!!U.CSS_UNIT.exec(X)}var J=/^\s+/,K=/\s+$/,N=0,H=n.round,L=n.min,P=n.max,Q=n.random;m.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var X=this.toRgb();return(299*X.r+
587*X.g+114*X.b)/1E3},getLuminance:function(){var X=this.toRgb();var da=X.r/255;var ea=X.g/255;X=X.b/255;da=.03928>=da?da/12.92:n.pow((da+.055)/1.055,2.4);ea=.03928>=ea?ea/12.92:n.pow((ea+.055)/1.055,2.4);X=.03928>=X?X/12.92:n.pow((X+.055)/1.055,2.4);return.2126*da+.7152*ea+.0722*X},setAlpha:function(X){this._a=B(X);this._roundA=H(100*this._a)/100;return this},toHsv:function(){var X=a(this._r,this._g,this._b);return{h:360*X.h,s:X.s,v:X.v,a:this._a}},toHsvString:function(){var X=a(this._r,this._g,
this._b),da=H(360*X.h),ea=H(100*X.s);X=H(100*X.v);return 1==this._a?"hsv("+da+", "+ea+"%, "+X+"%)":"hsva("+da+", "+ea+"%, "+X+"%, "+this._roundA+")"},toHsl:function(){var X=p(this._r,this._g,this._b);return{h:360*X.h,s:X.s,l:X.l,a:this._a}},toHslString:function(){var X=p(this._r,this._g,this._b),da=H(360*X.h),ea=H(100*X.s);X=H(100*X.l);return 1==this._a?"hsl("+da+", "+ea+"%, "+X+"%)":"hsla("+da+", "+ea+"%, "+X+"%, "+this._roundA+")"},toHex:function(X){return d(this._r,this._g,this._b,X)},toHexString:function(X){return"#"+
this.toHex(X)},toHex8:function(X){var da=this._g,ea=this._b,ca=this._a;da=[v(H(this._r).toString(16)),v(H(da).toString(16)),v(H(ea).toString(16)),v(n.round(255*parseFloat(ca)).toString(16))];X=X&&da[0].charAt(0)==da[0].charAt(1)&&da[1].charAt(0)==da[1].charAt(1)&&da[2].charAt(0)==da[2].charAt(1)&&da[3].charAt(0)==da[3].charAt(1)?da[0].charAt(0)+da[1].charAt(0)+da[2].charAt(0)+da[3].charAt(0):da.join("");return X},toHex8String:function(X){return"#"+this.toHex8(X)},toRgb:function(){return{r:H(this._r),
g:H(this._g),b:H(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+H(this._r)+", "+H(this._g)+", "+H(this._b)+")":"rgba("+H(this._r)+", "+H(this._g)+", "+H(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:H(100*C(this._r,255))+"%",g:H(100*C(this._g,255))+"%",b:H(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+H(100*C(this._r,255))+"%, "+H(100*C(this._g,255))+"%, "+H(100*C(this._b,255))+"%)":"rgba("+H(100*C(this._r,
255))+"%, "+H(100*C(this._g,255))+"%, "+H(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:O[d(this._r,this._g,this._b,!0)]||!1},toFilter:function(X){var da="#"+e(this._r,this._g,this._b,this._a),ea=da,ca=this._gradientType?"GradientType \x3d 1, ":"";X&&(X=m(X),ea="#"+e(X._r,X._g,X._b,X._a));return"progid:DXImageTransform.Microsoft.gradient("+ca+"startColorstr\x3d"+da+",endColorstr\x3d"+ea+")"},toString:function(X){var da=!!X;X=X||this._format;
var ea=!1,ca=1>this._a&&0<=this._a;if(!da&&ca&&("hex"===X||"hex6"===X||"hex3"===X||"hex4"===X||"hex8"===X||"name"===X))return"name"===X&&0===this._a?this.toName():this.toRgbString();"rgb"===X&&(ea=this.toRgbString());"prgb"===X&&(ea=this.toPercentageRgbString());if("hex"===X||"hex6"===X)ea=this.toHexString();"hex3"===X&&(ea=this.toHexString(!0));"hex4"===X&&(ea=this.toHex8String(!0));"hex8"===X&&(ea=this.toHex8String());"name"===X&&(ea=this.toName());"hsl"===X&&(ea=this.toHslString());"hsv"===X&&
(ea=this.toHsvString());return ea||this.toHexString()},clone:function(){return m(this.toString())},_applyModification:function(X,da){X=X.apply(null,[this].concat([].slice.call(da)));this._r=X._r;this._g=X._g;this._b=X._b;this.setAlpha(X._a);return this},lighten:function(){return this._applyModification(f,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(q,arguments)},desaturate:function(){return this._applyModification(l,
arguments)},saturate:function(){return this._applyModification(k,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(t,arguments)},_applyCombination:function(X,da){return X.apply(null,[this].concat([].slice.call(da)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(u,arguments)},monochromatic:function(){return this._applyCombination(z,arguments)},splitcomplement:function(){return this._applyCombination(E,
arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(x,arguments)}};m.fromRatio=function(X,da){if("object"==typeof X){var ea={},ca;for(ca in X)X.hasOwnProperty(ca)&&(ea[ca]="a"===ca?X[ca]:G(X[ca]));X=ea}return m(X,da)};m.equals=function(X,da){return X&&da?m(X).toRgbString()==m(da).toRgbString():!1};m.random=function(){return m.fromRatio({r:Q(),g:Q(),b:Q()})};m.mix=function(X,da,ea){ea=0===ea?0:ea||50;X=m(X).toRgb();da=m(da).toRgb();
ea/=100;return m({r:(da.r-X.r)*ea+X.r,g:(da.g-X.g)*ea+X.g,b:(da.b-X.b)*ea+X.b,a:(da.a-X.a)*ea+X.a})};m.readability=function(X,da){X=m(X);da=m(da);return(n.max(X.getLuminance(),da.getLuminance())+.05)/(n.min(X.getLuminance(),da.getLuminance())+.05)};m.isReadable=function(X,da,ea){X=m.readability(X,da);da=!1;var ca=ea||{level:"AA",size:"small"};ea=(ca.level||"AA").toUpperCase();ca=(ca.size||"small").toLowerCase();"AA"!==ea&&"AAA"!==ea&&(ea="AA");"small"!==ca&&"large"!==ca&&(ca="small");switch(ea+ca){case "AAsmall":case "AAAlarge":da=
4.5<=X;break;case "AAlarge":da=3<=X;break;case "AAAsmall":da=7<=X}return da};m.mostReadable=function(X,da,ea){var ca=null,ia=0;ea=ea||{};var ha=ea.includeFallbackColors;var fa=ea.level;var na=ea.size;for(var sa=0;sa<da.length;sa++){var ua=m.readability(X,da[sa]);ua>ia&&(ia=ua,ca=m(da[sa]))}if(m.isReadable(X,ca,{level:fa,size:na})||!ha)return ca;ea.includeFallbackColors=!1;return m.mostReadable(X,["#fff","#000"],ea)};var S=m.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",
azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",
darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",
hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",
linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",
paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",
thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=m.hexNames=function(X){var da={},ea;for(ea in X)X.hasOwnProperty(ea)&&(da[X[ea]]=ea);return da}(S),U={CSS_UNIT:/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof y&&y.exports?
y.exports=m:window.tinycolor=m})(Math)},{}],549:[function(b,y,D){function n(p){if(p.length){if(p instanceof Float32Array)return p;var h=new Float32Array(p);h.set(p);return h}m[0]=p;return m[0]}y.exports=n;y.exports.float32=y.exports.float=n;y.exports.fract32=y.exports.fract=function(p){if(p.length){for(var h=n(p),a=0,d=h.length;a<d;a++)h[a]=p[a]-h[a];return h}return n(p-n(p))};var m=new Float32Array(1)},{}],550:[function(b,y,D){function n(a,d){d=p(getComputedStyle(a).getPropertyValue(d));return d[0]*
m(d[1],a)}function m(a,d){d=d||document.body;a=(a||"px").trim().toLowerCase();if(d===window||d===document)d=document.body;switch(a){case "%":return d.clientHeight/100;case "ch":case "ex":var e=document.createElement("div");e.style["font-size"]="128"+a;d.appendChild(e);a=n(e,"font-size")/128;d.removeChild(e);return a;case "em":return n(d,"font-size");case "rem":return n(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,
window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return h;case "cm":return h/2.54;case "mm":return h/25.4;case "pt":return h/72;case "pc":return h/6}return 1}var p=b("parse-unit");y.exports=m;var h=96},{"parse-unit":480}],551:[function(b,y,D){(function(n,m){"object"===typeof D&&"undefined"!==typeof y?m(D):(n=n||self,m(n.topojson=n.topojson||{}))})(this,function(n){function m(q){return q}function p(q){if(null==q)return m;var t,u,w=q.scale[0],x=
q.scale[1],E=q.translate[0],F=q.translate[1];return function(z,B){B||(t=u=0);B=2;var C=z.length,v=Array(C);v[0]=(t+=z[0])*w+E;for(v[1]=(u+=z[1])*x+F;B<C;)v[B]=z[B],++B;return v}}function h(q){function t(C){C=w(C);C[0]<E&&(E=C[0]);C[0]>z&&(z=C[0]);C[1]<F&&(F=C[1]);C[1]>B&&(B=C[1])}function u(C){switch(C.type){case "GeometryCollection":C.geometries.forEach(u);break;case "Point":t(C.coordinates);break;case "MultiPoint":C.coordinates.forEach(t)}}var w=p(q.transform),x,E=Infinity,F=E,z=-E,B=-E;q.arcs.forEach(function(C){for(var v=
-1,G=C.length,I;++v<G;)I=w(C[v],v),I[0]<E&&(E=I[0]),I[0]>z&&(z=I[0]),I[1]<F&&(F=I[1]),I[1]>B&&(B=I[1])});for(x in q.objects)u(q.objects[x]);return[E,F,z,B]}function a(q,t){var u=t.id,w=t.bbox,x=null==t.properties?{}:t.properties;q=d(q,t);return null==u&&null==w?{type:"Feature",properties:x,geometry:q}:null==w?{type:"Feature",id:u,properties:x,geometry:q}:{type:"Feature",id:u,bbox:w,properties:x,geometry:q}}function d(q,t){function u(C){return z(C)}function w(C){for(var v=[],G=0,I=C.length;G<I;++G){var J=
C[G],K=v;K.length&&K.pop();for(var N=B[0>J?~J:J],H=0,L=N.length;H<L;++H)K.push(z(N[H],H));if(0>J)for(J=K,K=J.length,N=K-L;N<--K;)L=J[N],J[N++]=J[K],J[K]=L}2>v.length&&v.push(v[0]);return v}function x(C){for(C=w(C);4>C.length;)C.push(C[0]);return C}function E(C){return C.map(x)}function F(C){var v=C.type;switch(v){case "GeometryCollection":return{type:v,geometries:C.geometries.map(F)};case "Point":C=z(C.coordinates);break;case "MultiPoint":C=C.coordinates.map(u);break;case "LineString":C=w(C.arcs);
break;case "MultiLineString":C=C.arcs.map(w);break;case "Polygon":C=E(C.arcs);break;case "MultiPolygon":C=C.arcs.map(E);break;default:return null}return{type:v,coordinates:C}}var z=p(q.transform),B=q.arcs;return F(t)}function e(q,t){function u(C){var v=q.arcs[0>C?~C:C],G=v[0];if(q.transform){var I=[0,0];v.forEach(function(J){I[0]+=J[0];I[1]+=J[1]})}else I=v[v.length-1];return 0>C?[I,G]:[G,I]}function w(C,v){for(var G in C){var I=C[G];delete v[I.start];delete I.start;delete I.end;I.forEach(function(J){x[0>
J?~J:J]=1});z.push(I)}}var x={},E={},F={},z=[],B=-1;t.forEach(function(C,v){var G=q.arcs[0>C?~C:C];3>G.length&&!G[1][0]&&!G[1][1]&&(G=t[++B],t[B]=C,t[v]=G)});t.forEach(function(C){var v=u(C),G=v[0],I=v[1];(v=F[G])?(delete F[v.end],v.push(C),v.end=I,(C=E[I])?(delete E[C.start],G=C===v?v:v.concat(C),E[G.start=v.start]=F[G.end=C.end]=G):E[v.start]=F[v.end]=v):(v=E[I])?(delete E[v.start],v.unshift(C),v.start=G,(C=F[G])?(delete F[C.end],G=C===v?v:C.concat(v),E[G.start=C.start]=F[G.end=v.end]=G):E[v.start]=
F[v.end]=v):(v=[C],E[v.start=G]=F[v.end=I]=v)});w(F,E);w(E,F);t.forEach(function(C){x[0>C?~C:C]||z.push([C])});return z}function l(q,t,u){var w;if(1<arguments.length)var x=k(q,t,u);else{var E=0;for(x=Array(w=q.arcs.length);E<w;++E)x[E]=E}return{type:"MultiLineString",arcs:e(q,x)}}function k(q,t,u){function w(v){var G=0>v?~v:v;(B[G]||(B[G]=[])).push({i:v,g:C})}function x(v){v.forEach(w)}function E(v){v.forEach(x)}function F(v){switch(C=v,v.type){case "GeometryCollection":v.geometries.forEach(F);break;
case "LineString":x(v.arcs);break;case "MultiLineString":case "Polygon":E(v.arcs);break;case "MultiPolygon":v.arcs.forEach(E)}}var z=[],B=[],C;F(t);B.forEach(null==u?function(v){z.push(v[0].i)}:function(v){u(v[0].g,v[v.length-1].g)&&z.push(v[0].i)});return z}function c(q,t){function u(B){switch(B.type){case "GeometryCollection":B.geometries.forEach(u);break;case "Polygon":w(B.arcs);break;case "MultiPolygon":B.arcs.forEach(w)}}function w(B){B.forEach(function(C){C.forEach(function(v){(E[v=0>v?~v:v]||
(E[v]=[])).push(B)})});F.push(B)}function x(B){B=d(q,{type:"Polygon",arcs:[B]}).coordinates[0];for(var C=-1,v=B.length,G,I=B[v-1],J=0;++C<v;)G=I,I=B[C],J+=G[0]*I[1]-G[1]*I[0];return Math.abs(J)}var E={},F=[],z=[];t.forEach(u);F.forEach(function(B){if(!B._){var C=[],v=[B];B._=1;for(z.push(C);B=v.pop();)C.push(B),B.forEach(function(G){G.forEach(function(I){E[0>I?~I:I].forEach(function(J){J._||(J._=1,v.push(J))})})})}});F.forEach(function(B){delete B._});return{type:"MultiPolygon",arcs:z.map(function(B){var C=
[];B.forEach(function(J){J.forEach(function(K){K.forEach(function(N){2>E[0>N?~N:N].length&&C.push(N)})})});C=e(q,C);if(1<(B=C.length))for(var v=1,G=x(C[0]),I;v<B;++v)(I=x(C[v]))>G&&(G=C[0],C[0]=C[v],C[v]=G,G=I);return C}).filter(function(B){return 0<B.length})}}function f(q,t){for(var u=0,w=q.length;u<w;){var x=u+w>>>1;q[x]<t?u=x+1:w=x}return u}function g(q){if(null==q)return m;var t,u,w=q.scale[0],x=q.scale[1],E=q.translate[0],F=q.translate[1];return function(z,B){B||(t=u=0);B=2;var C=z.length,v=
Array(C),G=Math.round((z[0]-E)/w),I=Math.round((z[1]-F)/x);v[0]=G-t;t=G;v[1]=I-u;for(u=I;B<C;)v[B]=z[B],++B;return v}}n.bbox=h;n.feature=function(q,t){"string"===typeof t&&(t=q.objects[t]);return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(u){return a(q,u)})}:a(q,t)};n.merge=function(q){return d(q,c.apply(this,arguments))};n.mergeArcs=c;n.mesh=function(q){return d(q,l.apply(this,arguments))};n.meshArcs=l;n.neighbors=function(q){function t(K,N){K.forEach(function(H){0>
H&&(H=~H);var L=x[H];L?L.push(N):x[H]=[N]})}function u(K,N){K.forEach(function(H){t(H,N)})}function w(K,N){if("GeometryCollection"===K.type)K.geometries.forEach(function(H){w(H,N)});else if(K.type in F)F[K.type](K.arcs,N)}var x={},E=q.map(function(){return[]}),F={LineString:t,MultiLineString:u,Polygon:u,MultiPolygon:function(K,N){K.forEach(function(H){u(H,N)})}};q.forEach(w);for(var z in x){q=x[z];for(var B=q.length,C=0;C<B;++C)for(var v=C+1;v<B;++v){var G=q[C],I=q[v],J;(J=E[G])[z=f(J,I)]!==I&&J.splice(z,
0,I);(J=E[I])[z=f(J,G)]!==G&&J.splice(z,0,G)}}return E};n.quantize=function(q,t){function u(G){return C(G)}function w(G){switch(G.type){case "GeometryCollection":var I={type:"GeometryCollection",geometries:G.geometries.map(w)};break;case "Point":I={type:"Point",coordinates:C(G.coordinates)};break;case "MultiPoint":I={type:"MultiPoint",coordinates:G.coordinates.map(u)};break;default:return G}null!=G.id&&(I.id=G.id);null!=G.bbox&&(I.bbox=G.bbox);null!=G.properties&&(I.properties=G.properties);return I}
if(q.transform)throw Error("already quantized");if(t&&t.scale)var x=q.bbox;else{if(!(2<=(B=Math.floor(t))))throw Error("n must be 2");x=q.bbox||h(q);t=x[0];var E=x[1],F=x[2],z=x[3],B;t={scale:[F-t?(F-t)/(B-1):1,z-E?(z-E)/(B-1):1],translate:[t,E]}}var C=g(t),v;E=q.objects;F={};for(v in E)F[v]=w(E[v]);return{type:"Topology",bbox:x,transform:t,objects:F,arcs:q.arcs.map(function(G){var I=0,J=1,K=G.length,N,H=Array(K);for(H[0]=C(G[0],0);++I<K;)if((N=C(G[I],I))[0]||N[1])H[J++]=N;1===J&&(H[J++]=[0,0]);
H.length=J;return H})}};n.transform=p;n.untransform=g;Object.defineProperty(n,"__esModule",{value:!0})})},{}],552:[function(b,y,D){y.exports=function(h){if(0>h)return[];if(0===h)return[[0]];for(var a=Math.round(p(h+1))|0,d=[],e=0;e<a;++e){for(var l=n.unrank(h,e),k=[0],c=0,f=0;f<l.length;++f)c+=1<<l[f],k.push(c);1>m(l)&&(k[0]=c,k[h]=0);d.push(k)}return d};var n=b("permutation-rank"),m=b("permutation-parity"),p=b("gamma")},{gamma:248,"permutation-parity":483,"permutation-rank":484}],553:[function(b,
y,D){function n(f,g,q){return Math.sqrt(Math.pow(f,2)+Math.pow(g,2)+Math.pow(q,2))}function m(f){var g=Math.abs(f[0]),q=Math.abs(f[1]),t=Math.abs(f[2]),u=[0,0,0];g>Math.max(q,t)?u[2]=1:q>Math.max(g,t)?u[0]=1:u[1]=1;for(t=q=g=0;3>t;++t)g+=f[t]*f[t],q+=u[t]*f[t];for(t=0;3>t;++t)u[t]-=q/g*f[t];l(u,u);return u}function p(f,g,q,t,u,w,x,E){this.center=h(q);this.up=h(t);this.right=h(u);this.radius=h([w]);this.angle=h([x,E]);this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]];this.setDistanceLimits(f,
g);this.computedCenter=this.center.curve(0);this.computedUp=this.up.curve(0);this.computedRight=this.right.curve(0);this.computedRadius=this.radius.curve(0);this.computedAngle=this.angle.curve(0);this.computedToward=[0,0,0];this.computedEye=[0,0,0];this.computedMatrix=Array(16);for(f=0;16>f;++f)this.computedMatrix[f]=.5;this.recalcMatrix(0)}y.exports=function(f){f=f||{};var g=f.center||[0,0,0],q=f.up||[0,1,0],t=f.right||m(q),u=f.radius||1,w=f.theta||0,x=f.phi||0;g=[].slice.call(g,0,3);q=[].slice.call(q,
0,3);l(q,q);t=[].slice.call(t,0,3);l(t,t);"eye"in f&&(u=f.eye,w=[u[0]-g[0],u[1]-g[1],u[2]-g[2]],e(t,w,q),1E-6>n(t[0],t[1],t[2])?t=m(q):l(t,t),u=n(w[0],w[1],w[2]),x=k(q,w)/u,w=k(t,w)/u,x=Math.acos(x),w=Math.acos(w));u=Math.log(u);return new p(f.zoomMin,f.zoomMax,g,q,t,u,w,x)};var h=b("filtered-vector"),a=b("gl-mat4/invert"),d=b("gl-mat4/rotate"),e=b("gl-vec3/cross"),l=b("gl-vec3/normalize"),k=b("gl-vec3/dot");b=p.prototype;b.setDistanceLimits=function(f,g){f=0<f?Math.log(f):-Infinity;g=0<g?Math.log(g):
Infinity;g=Math.max(g,f);this.radius.bounds[0][0]=f;this.radius.bounds[1][0]=g};b.getDistanceLimits=function(f){var g=this.radius.bounds[0];return f?(f[0]=Math.exp(g[0][0]),f[1]=Math.exp(g[1][0]),f):[Math.exp(g[0][0]),Math.exp(g[1][0])]};b.recalcMatrix=function(f){this.center.curve(f);this.up.curve(f);this.right.curve(f);this.radius.curve(f);this.angle.curve(f);for(var g=this.computedUp,q=this.computedRight,t=0,u=0,w=0;3>w;++w)u+=g[w]*q[w],t+=g[w]*g[w];var x=Math.sqrt(t);for(w=f=0;3>w;++w)q[w]-=g[w]*
u/t,f+=q[w]*q[w],g[w]/=x;f=Math.sqrt(f);for(w=0;3>w;++w)q[w]/=f;var E=this.computedToward;e(E,g,q);l(E,E);f=Math.exp(this.computedRadius[0]);x=this.computedAngle[0];t=this.computedAngle[1];u=Math.cos(x);x=Math.sin(x);var F=Math.cos(t),z=Math.sin(t);t=this.computedCenter;var B=u*F,C=x*F,v=-u*z,G=-x*z;u=this.computedEye;x=this.computedMatrix;for(w=0;3>w;++w){var I=B*q[w]+C*E[w]+z*g[w];x[4*w+1]=v*q[w]+G*E[w]+F*g[w];x[4*w+2]=I;x[4*w+3]=0}q=x[1];w=x[5];z=x[9];E=x[2];F=x[6];B=x[10];g=w*B-z*F;z=z*E-q*B;
q=q*F-w*E;w=n(g,z,q);x[0]=g/w;x[4]=z/w;x[8]=q/w;for(w=0;3>w;++w)u[w]=t[w]+x[2+4*w]*f;for(w=0;3>w;++w){for(t=f=0;3>t;++t)f+=x[w+4*t]*u[t];x[12+w]=-f}x[15]=1};b.getMatrix=function(f,g){this.recalcMatrix(f);f=this.computedMatrix;if(g){for(var q=0;16>q;++q)g[q]=f[q];return g}return f};var c=[0,0,0];b.rotate=function(f,g,q,t){this.angle.move(f,g,q);if(t){this.recalcMatrix(f);g=this.computedMatrix;c[0]=g[2];c[1]=g[6];c[2]=g[10];q=this.computedUp;for(var u=this.computedRight,w=this.computedToward,x=0;3>
x;++x)g[4*x]=q[x],g[4*x+1]=u[x],g[4*x+2]=w[x];d(g,g,t,c);for(x=0;3>x;++x)q[x]=g[4*x],u[x]=g[4*x+1];this.up.set(f,q[0],q[1],q[2]);this.right.set(f,u[0],u[1],u[2])}};b.pan=function(f,g,q,t){g=g||0;q=q||0;t=t||0;this.recalcMatrix(f);var u=this.computedMatrix,w=u[1],x=u[5],E=u[9],F=n(w,x,E);w/=F;x/=F;E/=F;F=u[0];var z=u[4];u=u[8];var B=F*w+z*x+u*E;F-=w*B;z-=x*B;u-=E*B;B=n(F,z,u);this.center.move(f,F/B*g+w*q,z/B*g+x*q,u/B*g+E*q);g=Math.exp(this.computedRadius[0]);g=Math.max(1E-4,g+t);this.radius.set(f,
Math.log(g))};b.translate=function(f,g,q,t){this.center.move(f,g||0,q||0,t||0)};b.setMatrix=function(f,g,q,t){var u=1;"number"===typeof q&&(u=q|0);if(0>u||3<u)u=1;var w=(u+2)%3;g||(this.recalcMatrix(f),g=this.computedMatrix);q=g[u];var x=g[u+4],E=g[u+8];if(t){t=Math.abs(q);var F=Math.abs(E),z=Math.max(t,Math.abs(x),F);t===z?(q=0>q?-1:1,x=E=0):F===z?(E=0>E?-1:1,q=x=0):(x=0>x?-1:1,q=E=0)}else t=n(q,x,E),q/=t,x/=t,E/=t;t=g[w];F=g[w+4];w=g[w+8];z=t*q+F*x+w*E;t-=q*z;F-=x*z;w-=E*z;z=n(t,F,w);t/=z;F/=z;
w/=z;z=x*w-E*F;var B=E*t-q*w,C=q*F-x*t,v=n(z,B,C);z/=v;B/=v;C/=v;this.center.jump(f,I,J,K);this.radius.idle(f);this.up.jump(f,q,x,E);this.right.jump(f,t,F,w);if(2===u)J=g[1],K=g[5],q=g[9],I=0>G?-Math.PI/2:Math.PI/2,J=Math.atan2(J*z+K*B+q*C,J*t+K*F+q*w);else{J=g[2];K=g[6];var G=g[10];I=Math.asin(Math.min(1,Math.max(-1,J*q+K*x+G*E)));J=Math.atan2(J*z+K*B+G*C,J*t+K*F+G*w)}this.angle.jump(f,J,I);this.recalcMatrix(f);G=g[2];q=g[6];x=g[10];K=this.computedMatrix;a(K,g);g=K[15];var I=K[12]/g,J=K[13]/g,K=
K[14]/g;g=Math.exp(this.computedRadius[0]);this.center.jump(f,I-G*g,J-q*g,K-x*g)};b.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())};b.idle=function(f){this.center.idle(f);this.up.idle(f);this.right.idle(f);this.radius.idle(f);this.angle.idle(f)};b.flush=function(f){this.center.flush(f);this.up.flush(f);this.right.flush(f);this.radius.flush(f);this.angle.flush(f)};b.setDistance=function(f,g){0<g&&this.radius.set(f,Math.log(g))};
b.lookAt=function(f,g,q,t){this.recalcMatrix(f);g=g||this.computedEye;q=q||this.computedCenter;t=t||this.computedUp;var u=t[0],w=t[1];t=t[2];var x=n(u,w,t);if(!(1E-6>x)){u/=x;w/=x;t/=x;x=g[0]-q[0];var E=g[1]-q[1];g=g[2]-q[2];var F=n(x,E,g);if(!(1E-6>F)){x/=F;E/=F;g/=F;var z=this.computedRight,B=z[0],C=z[1];z=z[2];var v=u*B+w*C+t*z;B-=v*u;C-=v*w;z-=v*t;v=n(B,C,z);if(.01>v&&(B=w*g-t*E,C=t*x-u*g,z=u*E-w*x,v=n(B,C,z),1E-6>v))return;B/=v;C/=v;z/=v;this.up.set(f,u,w,t);this.right.set(f,B,C,z);this.center.set(f,
q[0],q[1],q[2]);this.radius.set(f,Math.log(F));q=w*z-t*C;F=t*B-u*z;v=u*C-w*B;var G=n(q,F,v);u=Math.asin(Math.min(1,Math.max(-1,u*x+w*E+t*g)));w=Math.atan2(q/G*x+F/G*E+v/G*g,B*x+C*E+z*g);x=this.angle._state;t=x[x.length-1];x=x[x.length-2];t%=2*Math.PI;E=Math.abs(t-w);g=Math.abs(t-2*Math.PI-w);Math.abs(t+2*Math.PI-w)<E&&(t+=2*Math.PI);g<E&&(t-=2*Math.PI);this.angle.jump(this.angle.lastT(),t,x);this.angle.set(f,w,u)}}}},{"filtered-vector":242,"gl-mat4/invert":278,"gl-mat4/rotate":283,"gl-vec3/cross":339,
"gl-vec3/dot":344,"gl-vec3/normalize":361}],554:[function(b,y,D){y.exports=function(m,p,h){var a=m*p,d=n*m;d-=d-m;m-=d;var e=n*p;e-=e-p;p-=e;p=m*p-(a-d*e-m*e-d*p);return h?(h[0]=p,h[1]=a,h):[p,a]};var n=+(Math.pow(2,27)+1)},{}],555:[function(b,y,D){y.exports=function(n,m,p){var h=n+m,a=h-n;m-=a;n-=h-a;return p?(p[0]=n+m,p[1]=h,p):[n+m,h]}},{}],556:[function(b,y,D){var n=b("../prototype/is");y.exports=function(m){if("function"!==typeof m||!hasOwnProperty.call(m,"length"))return!1;try{if("number"!==
typeof m.length||"function"!==typeof m.call||"function"!==typeof m.apply)return!1}catch(p){return!1}return!n(m)}},{"../prototype/is":563}],557:[function(b,y,D){var n=b("../value/is"),m=b("../object/is"),p=b("../string/coerce"),h=b("./to-short-string");y.exports=function(a,d,e){if(!m(e))throw new TypeError(d.replace("%v",h(a)));if(!n(a)){if("default"in e)return e["default"];if(e.isOptional)return null}e=p(e.errorMessage);n(e)||(e=d);throw new TypeError(e.replace("%v",h(a)));}},{"../object/is":560,
"../string/coerce":564,"../value/is":566,"./to-short-string":559}],558:[function(b,y,D){y.exports=function(n){try{return n.toString()}catch(m){try{return String(n)}catch(p){return null}}}},{}],559:[function(b,y,D){var n=b("./safe-to-string"),m=/[\n\r\u2028\u2029]/g;y.exports=function(p){p=n(p);if(null===p)return"\x3cNon-coercible to string value\x3e";100<p.length&&(p=p.slice(0,99)+"");return p=p.replace(m,function(h){switch(h){case "\n":return"\\n";case "\r":return"\\r";case "\u2028":return"\\u2028";
case "\u2029":return"\\u2029";default:throw Error("Unexpected character");}})}},{"./safe-to-string":558}],560:[function(b,y,D){var n=b("../value/is"),m={object:!0,"function":!0,undefined:!0};y.exports=function(p){return n(p)?hasOwnProperty.call(m,typeof p):!1}},{"../value/is":566}],561:[function(b,y,D){var n=b("../lib/resolve-exception"),m=b("./is");y.exports=function(p,h){return m(p)?p:n(p,"%v is not a plain function",h)}},{"../lib/resolve-exception":557,"./is":562}],562:[function(b,y,D){var n=b("../function/is"),
m=/^\s*class[\s{/}]/,p=Function.prototype.toString;y.exports=function(h){return!n(h)||m.test(p.call(h))?!1:!0}},{"../function/is":556}],563:[function(b,y,D){var n=b("../object/is");y.exports=function(m){if(!n(m))return!1;try{return m.constructor?m.constructor.prototype===m:!1}catch(p){return!1}}},{"../object/is":560}],564:[function(b,y,D){var n=b("../value/is"),m=b("../object/is"),p=Object.prototype.toString;y.exports=function(h){if(!n(h))return null;if(m(h)){var a=h.toString;if("function"!==typeof a||
a===p)return null}return""+h}},{"../object/is":560,"../value/is":566}],565:[function(b,y,D){var n=b("../lib/resolve-exception"),m=b("./is");y.exports=function(p,h){return m(p)?p:n(p,"Cannot use %v",h)}},{"../lib/resolve-exception":557,"./is":566}],566:[function(b,y,D){y.exports=function(n){return void 0!==n&&null!==n}},{}],567:[function(b,y,D){(function(n){function m(J){if(J){var K=x.log2(J.length||J.byteLength);G[K].push(J)}}function p(J){J=x.nextPow2(J);var K=x.log2(J);K=G[K];return 0<K.length?
K.pop():new ArrayBuffer(J)}function h(J){return new Uint8Array(p(J),0,J)}function a(J){return new Uint16Array(p(2*J),0,J)}function d(J){return new Uint32Array(p(4*J),0,J)}function e(J){return new Int8Array(p(J),0,J)}function l(J){return new Int16Array(p(2*J),0,J)}function k(J){return new Int32Array(p(4*J),0,J)}function c(J){return new Float32Array(p(4*J),0,J)}function f(J){return new Float64Array(p(8*J),0,J)}function g(J){return z?new Uint8ClampedArray(p(J),0,J):h(J)}function q(J){return B?new BigUint64Array(p(8*
J),0,J):null}function t(J){return C?new BigInt64Array(p(8*J),0,J):null}function u(J){return new DataView(p(J),0,J)}function w(J){J=x.nextPow2(J);var K=x.log2(J);K=I[K];return 0<K.length?K.pop():new F(J)}var x=b("bit-twiddle"),E=b("dup"),F=b("buffer").Buffer;n.__TYPEDARRAY_POOL||(n.__TYPEDARRAY_POOL={UINT8:E([32,0]),UINT16:E([32,0]),UINT32:E([32,0]),BIGUINT64:E([32,0]),INT8:E([32,0]),INT16:E([32,0]),INT32:E([32,0]),BIGINT64:E([32,0]),FLOAT:E([32,0]),DOUBLE:E([32,0]),DATA:E([32,0]),UINT8C:E([32,0]),
BUFFER:E([32,0])});var z="undefined"!==typeof Uint8ClampedArray,B="undefined"!==typeof BigUint64Array,C="undefined"!==typeof BigInt64Array,v=n.__TYPEDARRAY_POOL;v.UINT8C||(v.UINT8C=E([32,0]));v.BIGUINT64||(v.BIGUINT64=E([32,0]));v.BIGINT64||(v.BIGINT64=E([32,0]));v.BUFFER||(v.BUFFER=E([32,0]));var G=v.DATA,I=v.BUFFER;D.free=function(J){if(F.isBuffer(J))I[x.log2(J.length)].push(J);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(J)&&(J=J.buffer),J){var K=x.log2(J.length||J.byteLength)|
0;G[K].push(J)}};D.freeUint8=D.freeUint16=D.freeUint32=D.freeBigUint64=D.freeInt8=D.freeInt16=D.freeInt32=D.freeBigInt64=D.freeFloat32=D.freeFloat=D.freeFloat64=D.freeDouble=D.freeUint8Clamped=D.freeDataView=function(J){m(J.buffer)};D.freeArrayBuffer=m;D.freeBuffer=function(J){I[x.log2(J.length)].push(J)};D.malloc=function(J,K){if(void 0===K||"arraybuffer"===K)return p(J);switch(K){case "uint8":return h(J);case "uint16":return a(J);case "uint32":return d(J);case "int8":return e(J);case "int16":return l(J);
case "int32":return k(J);case "float":case "float32":return c(J);case "double":case "float64":return f(J);case "uint8_clamped":return g(J);case "bigint64":return t(J);case "biguint64":return q(J);case "buffer":return w(J);case "data":case "dataview":return u(J)}return null};D.mallocArrayBuffer=p;D.mallocUint8=h;D.mallocUint16=a;D.mallocUint32=d;D.mallocInt8=e;D.mallocInt16=l;D.mallocInt32=k;D.mallocFloat32=D.mallocFloat=c;D.mallocFloat64=D.mallocDouble=f;D.mallocUint8Clamped=g;D.mallocBigUint64=q;
D.mallocBigInt64=t;D.mallocDataView=u;D.mallocBuffer=w;D.clearCache=function(){for(var J=0;32>J;++J)v.UINT8[J].length=0,v.UINT16[J].length=0,v.UINT32[J].length=0,v.INT8[J].length=0,v.INT16[J].length=0,v.INT32[J].length=0,v.FLOAT[J].length=0,v.DOUBLE[J].length=0,v.BIGUINT64[J].length=0,v.BIGINT64[J].length=0,v.UINT8C[J].length=0,G[J].length=0,I[J].length=0}}).call(this,"undefined"!==typeof xa?xa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"bit-twiddle":97,buffer:111,dup:176}],
568:[function(b,y,D){function n(m){this.roots=Array(m);this.ranks=Array(m);for(var p=0;p<m;++p)this.roots[p]=p,this.ranks[p]=0}"use restrict";y.exports=n;b=n.prototype;Object.defineProperty(b,"length",{get:function(){return this.roots.length}});b.makeSet=function(){var m=this.roots.length;this.roots.push(m);this.ranks.push(0);return m};b.find=function(m){for(var p=m,h=this.roots;h[m]!==m;)m=h[m];for(;h[p]!==m;){var a=h[p];h[p]=m;p=a}return m};b.link=function(m,p){m=this.find(m);p=this.find(p);if(m!==
p){var h=this.ranks,a=this.roots,d=h[m],e=h[p];d<e?a[m]=p:e<d?a[p]=m:(a[p]=m,++h[m])}}},{}],569:[function(b,y,D){y.exports=function(n,m,p){if(0===n.length)return n;if(m){p||n.sort(m);p=1;for(var h=n.length,a=n[0],d,e=1;e<h;++e)d=a,a=n[e],m(a,d)&&(e===p?p++:n[p++]=a);n.length=p;return n}p||n.sort();m=1;p=n.length;h=n[0];for(d=1;d<p;++d)a=h,h=n[d],h!==a&&(d===m?m++:n[m++]=h);n.length=m;return n}},{}],570:[function(b,y,D){var n=/['"]/;y.exports=function(m){if(!m)return"";n.test(m.charAt(0))&&(m=m.substr(1));
n.test(m.charAt(m.length-1))&&(m=m.substr(0,m.length-1));return m}},{}],571:[function(b,y,D){y.exports=function(n,m,p){Array.isArray(p)||(p=[].slice.call(arguments,2));for(var h=0,a=p.length;h<a;h++){var d=p[h],e;for(e in d)if((void 0===m[e]||Array.isArray(m[e])||n[e]!==m[e])&&e in m){if(!0===d[e])var l=m[e];else if(!1===d[e])continue;else if("function"===typeof d[e]&&(l=d[e](m[e],n,m),void 0===l))continue;n[e]=l}}return n}},{}],572:[function(b,y,D){y.exports=function(h,a){if("object"!==typeof a||
null===a)a={};return n(h,a.canvas||m,a.context||p,a)};var n=b("./lib/vtext"),m=null,p=null;"undefined"!==typeof document&&(m=document.createElement("canvas"),m.width=8192,m.height=1024,p=m.getContext("2d"))},{"./lib/vtext":573}],573:[function(b,y,D){function n(C,v,G,I){var J="\x3c"+C+"\x3e";C="\x3c/"+C+"\x3e";for(var K=J.length,N=C.length,H=v[0]===x||v[0]===z,L=0,P;-1<L;){L=G.indexOf(J,L);if(-1===L)break;P=G.indexOf(C,L+K);if(-1===P)break;if(P<=L)break;for(var Q=L;Q<P+N;++Q)if(Q<L+K||Q>=P)I[Q]=null,
G=G.substr(0,Q)+" "+G.substr(Q+1);else if(null!==I[Q]){var S=I[Q].indexOf(v[0]);-1===S?I[Q]+=v:H&&(I[Q]=I[Q].substr(0,S+1)+(1+parseInt(I[Q][S+1]))+I[Q].substr(S+2))}L+=K;L=G.substr(L,P-L).indexOf(J);L=-1!==L?L:P+N}return I}function m(C,v,G){for(var I=v.textAlign||"start",J=v.textBaseline||"alphabetic",K=[1073741824,1073741824],N=[0,0],H=C.length,L=0;L<H;++L)for(var P=C[L],Q=0;2>Q;++Q)K[Q]=Math.min(K[Q],P[Q])|0,N[Q]=Math.max(N[Q],P[Q])|0;var S=0;switch(I){case "center":S=-.5*(K[0]+N[0]);break;case "right":case "end":S=
-N[0];break;case "left":case "start":S=-K[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+I+"'");}var O=0;switch(J){case "hanging":case "top":O=-K[1];break;case "middle":O=-.5*(K[1]+N[1]);break;case "alphabetic":case "ideographic":O=-3*G;break;case "bottom":O=-N[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+J+"'");}var U=1/G;"lineHeight"in v?U*=+v.lineHeight:"width"in v?U=v.width/(N[0]-K[0]):"height"in v&&(U=v.height/(N[1]-K[1]));return C.map(function(X){return[U*
(X[0]+S),U*(X[1]+O)]})}function p(C,v,G,I,J,K){function N(){if(""!==ca){var ua=v.measureText(ca).width;v.fillText(ca,X+ha,da+fa);ha+=ua}}function H(){return""+Math.round(na)+"px "}function L(ua,ta){var oa=""+v.font;if(!0===K.subscripts){var va=ua.indexOf(z),ma=ta.indexOf(z);va=-1<va?parseInt(ua[1+va]):0;ma=-1<ma?parseInt(ta[1+ma]):0;va!==ma&&(oa=oa.replace(H(),"?px "),na*=Math.pow(.75,ma-va),oa=oa.replace("?px ",H()));fa+=.25*U*(ma-va)}!0===K.superscripts&&(va=ua.indexOf(x),ma=ta.indexOf(x),va=-1<
va?parseInt(ua[1+va]):0,ma=-1<ma?parseInt(ta[1+ma]):0,va!==ma&&(oa=oa.replace(H(),"?px "),na*=Math.pow(.75,ma-va),oa=oa.replace("?px ",H())),fa-=.25*U*(ma-va));!0===K.bolds&&(ma=-1<ua.indexOf(q),va=-1<ta.indexOf(q),!ma&&va&&(oa=pa?oa.replace("italic ","italic bold "):"bold "+oa),ma&&!va&&(oa=oa.replace("bold ","")));if(!0===K.italics){var pa=-1<ua.indexOf(u);ua=-1<ta.indexOf(u);!pa&&ua&&(oa="italic "+oa);pa&&!ua&&(oa=oa.replace("italic ",""))}v.font=oa}G=G.replace(/\n/g,"");G=!0===K.breaklines?G.replace(/<br>/g,
"\n"):G.replace(/<br>/g," ");var P="",Q=[];for(ea=0;ea<G.length;++ea)Q[ea]=P;!0===K.bolds&&(Q=n(g,q,G,Q));!0===K.italics&&(Q=n(t,u,G,Q));!0===K.superscripts&&(Q=n(w,E,G,Q));!0===K.subscripts&&(Q=n(F,B,G,Q));var S=[],O="";for(ea=0;ea<G.length;++ea)null!==Q[ea]&&(O+=G[ea],S.push(Q[ea]));Q=O.split("\n");G=Q.length;var U=Math.round(J*I),X=I,da=2*I;J=0;ea=G*U+da;C.height<ea&&(C.height=ea);v.fillStyle="#000";v.fillRect(0,0,C.width,C.height);v.fillStyle="#fff";var ea;O=0;var ca="";for(C=0;C<G;++C){var ia=
Q[C]+"\n";var ha=0;var fa=C*U;var na=I;ca="";for(ea=0;ea<ia.length;++ea){var sa=ea+O<S.length?S[ea+O]:S[S.length-1];P===sa?ca+=ia[ea]:(N(),ca=ia[ea],void 0!==sa&&(L(P,sa),P=sa))}N();O+=ia.length;ea=Math.round(ha+2*X)|0;J<ea&&(J=ea)}I=J;P=da+U*G;return e(v.getImageData(0,0,I,P).data,[P,I,4]).pick(-1,-1,0).transpose(1,0)}function h(C,v,G,I){C=d(C,128);I=I?l(C.cells,C.positions,.25):{edges:C.cells,positions:C.positions};G=m(I.positions,v,G);C=I.edges;I="ccw"===v.orientation;k(G,C);if(v.polygons||v.polygon||
v.polyline){v=f(C,G);C=Array(v.length);for(var J=0;J<v.length;++J){for(var K=v[J],N=Array(K.length),H=0;H<K.length;++H){for(var L=K[H],P=Array(L.length),Q=0;Q<L.length;++Q)P[Q]=G[L[Q]].slice();I&&P.reverse();N[H]=P}C[J]=N}return C}return v.triangles||v.triangulate||v.triangle?{cells:c(G,C,{delaunay:!1,exterior:!1,interior:!0}),positions:G}:{edges:C,positions:G}}function a(C,v,G){try{return h(C,v,G,!0)}catch(I){}try{return h(C,v,G,!1)}catch(I){}return v.polygons||v.polyline||v.polygon?[]:v.triangles||
v.triangulate||v.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}y.exports=function(C,v,G,I){var J=64,K=1.25,N={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};I&&(I.size&&0<I.size&&(J=I.size),I.lineSpacing&&0<I.lineSpacing&&(K=I.lineSpacing),I.styletags&&I.styletags.breaklines&&(N.breaklines=I.styletags.breaklines?!0:!1),I.styletags&&I.styletags.bolds&&(N.bolds=I.styletags.bolds?!0:!1),I.styletags&&I.styletags.italics&&(N.italics=I.styletags.italics?!0:!1),I.styletags&&
I.styletags.subscripts&&(N.subscripts=I.styletags.subscripts?!0:!1),I.styletags&&I.styletags.superscripts&&(N.superscripts=I.styletags.superscripts?!0:!1));G.font=[I.fontStyle,I.fontVariant,I.fontWeight,J+"px",I.font].filter(function(H){return H}).join(" ");G.textAlign="start";G.textBaseline="alphabetic";G.direction="ltr";C=p(v,G,C,J,K,N);return a(C,I,J)};y.exports.processPixels=a;var d=b("surface-nets"),e=b("ndarray"),l=b("simplify-planar-graph"),k=b("clean-pslg"),c=b("cdt2d"),f=b("planar-graph-to-polyline"),
g="b",q="b|",t="i",u="i|",w="sup",x="+",E="+1",F="sub",z="-",B="-1"},{cdt2d:112,"clean-pslg":121,ndarray:469,"planar-graph-to-polyline":488,"simplify-planar-graph":534,"surface-nets":542}],574:[function(b,y,D){(function(){function n(E){E.permitHostObjects___&&E.permitHostObjects___(n)}function m(E){return!("weakmap:"==E.substr(0,8)&&"___"===E.substr(E.length-3))}function p(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var F=E[q];if(F&&F.key===E)return F;if(g(E)){F={key:E};try{return f(E,
q,{value:F,writable:!1,enumerable:!1,configurable:!1}),F}catch(z){}}}function h(E){E.prototype=null;return Object.freeze(E)}function a(){u||"undefined"===typeof console||(u=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"===typeof ses||!ses.ok||ses.ok()){"undefined"!==typeof ses&&(ses.weakMapPermitHostObjects=n);var d=!1;if("function"===typeof WeakMap){var e=WeakMap;if("undefined"===typeof navigator||!/Firefox/.test(navigator.userAgent)){var l=
new e,k=Object.freeze({});l.set(k,1);if(1!==l.get(k))d=!0;else{y.exports=WeakMap;return}}}var c=Object.getOwnPropertyNames,f=Object.defineProperty,g=Object.isExtensible,q="weakmap:ident:"+Math.random()+"___";"undefined"!==typeof crypto&&"function"===typeof crypto.getRandomValues&&"function"===typeof ArrayBuffer&&"function"===typeof Uint8Array&&(l=new ArrayBuffer(25),l=new Uint8Array(l),crypto.getRandomValues(l),q="weakmap:rand:"+Array.prototype.map.call(l,function(E){return(E%36).toString(36)}).join("")+
"___");f(Object,"getOwnPropertyNames",{value:function(E){return c(E).filter(m)}});if("getPropertyNames"in Object){var t=Object.getPropertyNames;f(Object,"getPropertyNames",{value:function(E){return t(E).filter(m)}})}(function(){var E=Object.freeze;f(Object,"freeze",{value:function(B){p(B);return E(B)}});var F=Object.seal;f(Object,"seal",{value:function(B){p(B);return F(B)}});var z=Object.preventExtensions;f(Object,"preventExtensions",{value:function(B){p(B);return z(B)}})})();var u=!1,w=0,x=function(){this instanceof
x||a();var E=[],F=[],z=w++;return Object.create(x.prototype,{get___:{value:h(function(B,C){var v=p(B);if(v)return z in v?v[z]:C;B=E.indexOf(B);return 0<=B?F[B]:C})},has___:{value:h(function(B){var C=p(B);return C?z in C:0<=E.indexOf(B)})},set___:{value:h(function(B,C){var v;(v=p(B))?v[z]=C:(v=E.indexOf(B),0<=v?F[v]=C:(v=E.length,F[v]=C,E[v]=B));return this})},delete___:{value:h(function(B){var C=p(B);if(C)return z in C&&delete C[z];B=E.indexOf(B);if(0>B)return!1;C=E.length-1;E[B]=void 0;F[B]=F[C];
E[B]=E[C];E.length=C;F.length=C;return!0})}})};x.prototype=Object.create(Object.prototype,{get:{value:function(E,F){return this.get___(E,F)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,F){return this.set___(E,F)},writable:!0,configurable:!0},"delete":{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}});"function"===typeof e?function(){function E(){this instanceof x||a();var F=new e,z=void 0,B=
!1;var C=d?function(v,G){F.set(v,G);F.has(v)||(z||(z=new x),z.set(v,G));return this}:function(v,G){if(B)try{F.set(v,G)}catch(I){z||(z=new x),z.set___(v,G)}else F.set(v,G);return this};return Object.create(x.prototype,{get___:{value:h(function(v,G){return z?F.has(v)?F.get(v):z.get___(v,G):F.get(v,G)})},has___:{value:h(function(v){return F.has(v)||(z?z.has___(v):!1)})},set___:{value:h(C)},delete___:{value:h(function(v){var G=!!F["delete"](v);return z?z.delete___(v)||G:G})},permitHostObjects___:{value:h(function(v){if(v===
n)B=!0;else throw Error("bogus call to permitHostObjects___");})}})}d&&"undefined"!==typeof Proxy&&(Proxy=void 0);E.prototype=x.prototype;y.exports=E;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!==typeof Proxy&&(Proxy=void 0),y.exports=x)}})()},{}],575:[function(b,y,D){var n=b("./hidden-store.js");y.exports=function(){var m={};return function(p){if(("object"!==typeof p||null===p)&&"function"!==typeof p)throw Error("Weakmap-shim: Key must be object");
var h=p.valueOf(m);return h&&h.identity===m?h:n(p,m)}}},{"./hidden-store.js":576}],576:[function(b,y,D){y.exports=function(n,m){var p={identity:m},h=n.valueOf;Object.defineProperty(n,"valueOf",{value:function(a){return a!==m?h.apply(this,arguments):p},writable:!0});return p}},{}],577:[function(b,y,D){var n=b("./create-store.js");y.exports=function(){var m=n();return{get:function(p,h){p=m(p);return p.hasOwnProperty("value")?p.value:h},set:function(p,h){m(p).value=h;return this},has:function(p){return"value"in
m(p)},"delete":function(p){return delete m(p).value}}}},{"./create-store.js":575}],578:[function(b,y,D){var n=b("get-canvas-context");y.exports=function(m){return n("webgl",m)}},{"get-canvas-context":249}],579:[function(b,y,D){function n(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");var p=m.instance();n.prototype=new m.baseCalendar;b(n.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",
epochs:["BEC","EC"],monthNumbers:function(c,f){if("string"===typeof c)return(f=c.match(a))?f[0]:"";var g=this._validateYear(c);c=c.month();var q=""+this.toChineseMonth(g,c);f&&2>q.length&&(q="0"+q);this.isIntercalaryMonth(g,c)&&(q+="i");return q},monthNames:function(c){if("string"===typeof c){var f=c.match(d);return f?f[0]:""}f=this._validateYear(c);c=c.month();var g="           ".split(" ")[this.toChineseMonth(f,c)-1];this.isIntercalaryMonth(f,c)&&(g=""+g);return g},monthNamesShort:function(c){if("string"===
typeof c){var f=c.match(e);return f?f[0]:""}f=this._validateYear(c);c=c.month();var g="           ".split(" ")[this.toChineseMonth(f,c)-1];this.isIntercalaryMonth(f,c)&&(g=""+g);return g},parseMonth:function(c,f){c=this._validateYear(c);var g=parseInt(f);if(isNaN(g)){if(""===f[0]){var q=!0;f=f.substring(1)}""===f[f.length-1]&&(f=f.substring(0,f.length-1));g=1+"           ".split(" ").indexOf(f)}else f=f[f.length-1],q="i"===f||"I"===f;return this.toMonthIndex(c,g,q)},
dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(c,f){c.year&&(c=c.year());if("number"!==typeof c||1888>c||2111<c)throw f.replace(/\{0\}/,this.local.name);return c},toMonthIndex:function(c,f,g){c=this.intercalaryMonth(c);if(g&&f!==c||1>f||12<f)throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);
return c?!g&&f<=c?f-1:f:f-1},toChineseMonth:function(c,f){c.year&&(c=c.year(),f=c.month());c=this.intercalaryMonth(c);if(0>f||f>(c?12:11))throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?f<c?f+1:f:f+1},intercalaryMonth:function(c){c=this._validateYear(c);return l[c-l[0]]>>13},isIntercalaryMonth:function(c,f){c.year&&(c=c.year(),f=c.month());c=this.intercalaryMonth(c);return!!c&&c===f},leapYear:function(c){return 0!==this.intercalaryMonth(c)},weekOfYear:function(c,f,g){var q=this._validateYear(c,
m.local.invalidyear);q=k[q-k[0]];q=p.newDate(q>>9&4095,q>>5&15,q&31);q.add(4-(q.dayOfWeek()||7),"d");c=this.toJD(c,f,g)-q.toJD();return 1+Math.floor(c/7)},monthsInYear:function(c){return this.leapYear(c)?13:12},daysInMonth:function(c,f){c.year&&(f=c.month(),c=c.year());c=this._validateYear(c);c=l[c-l[0]];if(f>(c>>13?12:11))throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return c&1<<12-f?30:29},weekDay:function(c,f,g){return 6>(this.dayOfWeek(c,f,g)||7)},toJD:function(c,f,g){t=this._validate(c,
t,g,m.local.invalidDate);c=this._validateYear(t.year());f=t.month();g=t.day();var q=this.isIntercalaryMonth(c,f),t=this.toChineseMonth(c,f);if("object"===typeof c)f=t||{};else{if(!("number"===typeof c&&1888<=c&&2111>=c))throw Error("Lunar year outside range 1888-2111");if(!("number"===typeof t&&1<=t&&12>=t))throw Error("Lunar month outside range 1 - 12");if(!("number"===typeof g&&1<=g&&30>=g))throw Error("Lunar day outside range 1 - 30");if("object"===typeof q){var u=!1;f=q}else u=!!q,f={};c={year:c,
month:t,day:g,isIntercalary:u}}t=c.day-1;g=l[c.year-l[0]];q=(q=g>>13)?c.month>q?c.month:c.isIntercalary?c.month:c.month-1:c.month-1;for(u=0;u<q;u++)t+=g&1<<12-u?30:29;c=k[c.year-k[0]];c=new Date(c>>9&4095,(c>>5&15)-1,(c&31)+t);f.year=c.getFullYear();f.month=1+c.getMonth();f.day=c.getDate();return p.toJD(f.year,f.month,f.day)},fromJD:function(c){var f=p.fromJD(c),g=f.year();c=f.month();f=f.day();if("object"===typeof g)c=c||{};else{if(!("number"===typeof g&&1888<=g&&2111>=g))throw Error("Solar year outside range 1888-2111");
if(!("number"===typeof c&&1<=c&&12>=c))throw Error("Solar month outside range 1 - 12");if(!("number"===typeof f&&1<=f&&31>=f))throw Error("Solar day outside range 1 - 31");g={year:g,month:c,day:f};c={}}f=k[g.year-k[0]];c.year=(g.year<<9|g.month<<5|g.day)>=f?g.year:g.year-1;f=k[c.year-k[0]];g=Math.round((new Date(g.year,g.month-1,g.day)-new Date(f>>9&4095,(f>>5&15)-1,f&31))/864E5);var q=l[c.year-l[0]];for(f=0;13>f;f++){var t=q&1<<12-f?30:29;if(g<t)break;g-=t}q>>=13;!q||f<q?(c.isIntercalary=!1,c.month=
1+f):(c.isIntercalary=f===q?!0:!1,c.month=f);c.day=1+g;g=this.toMonthIndex(c.year,c.month,c.isIntercalary);return this.newDate(c.year,g,c.day)},fromString:function(c){c=c.match(h);var f=this._validateYear(+c[1]),g=this.toMonthIndex(f,+c[2],!!c[3]);return this.newDate(f,g,+c[4])},add:function(c,f,g){var q=c.year(),t=c.month(),u=this.isIntercalaryMonth(q,t);q=this.toChineseMonth(q,t);c=Object.getPrototypeOf(n.prototype).add.call(this,c,f,g);"y"===g&&(f=c.year(),g=c.month(),t=this.isIntercalaryMonth(f,
q),u=u&&t?this.toMonthIndex(f,q,!0):this.toMonthIndex(f,q,!1),u!==g&&c.month(u));return c}});var h=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,d=/^??[]?/m,e=/^??[]?/m;m.calendars.chinese=n;var l=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,
1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,
6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],k=[1887,966732,967231,967733,968265,968766,969297,969798,
970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,
1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,
1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,
1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":593,"object-assign":473}],580:[function(b,y,D){function n(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");n.prototype=new m.baseCalendar;b(n.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,
firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:"Thout;Paopi;Hathor;Koiak;Tobi;Meshir;Paremhat;Paremoude;Pashons;Paoni;Epip;Mesori;Pi Kogi Enavot".split(";"),monthNamesShort:"Tho Pao Hath Koi Tob Mesh Pat Pad Pash Pao Epi Meso PiK".split(" "),dayNames:"Tkyriaka Pesnau Pshoment Peftoou Ptiou Psoou Psabbaton".split(" "),dayNamesShort:"Tky Pes Psh Pef Pti Pso Psa".split(" "),dayNamesMin:"Tk Pes Psh Pef Pt Pso Psa".split(" "),digits:null,dateFormat:"dd/mm/yyyy",
firstDay:0,isRTL:!1}},leapYear:function(p){p=this._validate(p,this.minMonth,this.minDay,m.local.invalidYear);p=p.year()+(0>p.year()?1:0);return 3===p%4||-1===p%4},monthsInYear:function(p){this._validate(p,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear);return 13},weekOfYear:function(p,h,a){p=this.newDate(p,h,a);p.add(-p.dayOfWeek(),"d");return Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(p,h){p=this._validate(p,h,this.minDay,m.local.invalidMonth);return this.daysPerMonth[p.month()-
1]+(13===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(p,h,a){return 6>(this.dayOfWeek(p,h,a)||7)},toJD:function(p,h,a){h=this._validate(p,h,a,m.local.invalidDate);p=h.year();0>p&&p++;return h.day()+30*(h.month()-1)+365*(p-1)+Math.floor(p/4)+this.jdEpoch-1},fromJD:function(p){var h=Math.floor(p)+.5-this.jdEpoch,a=Math.floor((h-Math.floor((h+366)/1461))/365)+1;0>=a&&a--;h=Math.floor(p)+.5-this.newDate(a,1,1).toJD();p=Math.floor(h/30)+1;return this.newDate(a,p,h-30*(p-1)+1)}});m.calendars.coptic=
n},{"../main":593,"object-assign":473}],581:[function(b,y,D){function n(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");n.prototype=new m.baseCalendar;b(n.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:"Ick Offle February March April May June Grune August Spune Sektober Ember December".split(" "),
monthNamesShort:"Ick Off Feb Mar Apr May Jun Gru Aug Spu Sek Emb Dec".split(" "),dayNames:"Sunday Octeday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Oct Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Oc Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(h){this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);return!1},monthsInYear:function(h){this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);
return 13},daysInYear:function(h){this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);return 400},weekOfYear:function(h,a,d){h=this.newDate(h,a,d);h.add(-h.dayOfWeek(),"d");return Math.floor((h.dayOfYear()-1)/8)+1},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[h.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(h,a,d){return(this._validate(h,a,d,m.local.invalidDate).day()+1)%8},weekDay:function(h,a,d){h=this.dayOfWeek(h,
a,d);return 2<=h&&6>=h},extraInfo:function(h,a,d){h=this._validate(h,a,d,m.local.invalidDate);return{century:p[Math.floor((h.year()-1)/100)+1]||""}},toJD:function(h,a,d){d=this._validate(h,a,d,m.local.invalidDate);h=d.year()+(0>d.year()?1:0);a=d.month();d=d.day();return d+(1<a?16:0)+(2<a?32*(a-2):0)+400*(h-1)+this.jdEpoch-1},fromJD:function(h){h=Math.floor(h+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(h/400)+1;h-=400*(a-1);h+=15<h?16:0;var d=Math.floor(h/32)+1;return this.newDate(0>=a?a-1:a,d,
h-32*(d-1)+1)}});var p={20:"Fruitbat",21:"Anchovy"};m.calendars.discworld=n},{"../main":593,"object-assign":473}],582:[function(b,y,D){function n(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");n.prototype=new m.baseCalendar;b(n.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:"Meskerem Tikemet Hidar Tahesas Tir Yekatit Megabit Miazia Genbot Sene Hamle Nehase Pagume".split(" "),
monthNamesShort:"Mes Tik Hid Tah Tir Yek Meg Mia Gen Sen Ham Neh Pag".split(" "),dayNames:"Ehud Segno Maksegno Irob Hamus Arb Kidame".split(" "),dayNamesShort:"Ehu Seg Mak Iro Ham Arb Kid".split(" "),dayNamesMin:"Eh Se Ma Ir Ha Ar Ki".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){p=this._validate(p,this.minMonth,this.minDay,m.local.invalidYear);p=p.year()+(0>p.year()?1:0);return 3===p%4||-1===p%4},monthsInYear:function(p){this._validate(p,this.minMonth,
this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear);return 13},weekOfYear:function(p,h,a){p=this.newDate(p,h,a);p.add(-p.dayOfWeek(),"d");return Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(p,h){p=this._validate(p,h,this.minDay,m.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(13===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(p,h,a){return 6>(this.dayOfWeek(p,h,a)||7)},toJD:function(p,h,a){h=this._validate(p,h,a,m.local.invalidDate);p=h.year();0>
p&&p++;return h.day()+30*(h.month()-1)+365*(p-1)+Math.floor(p/4)+this.jdEpoch-1},fromJD:function(p){var h=Math.floor(p)+.5-this.jdEpoch,a=Math.floor((h-Math.floor((h+366)/1461))/365)+1;0>=a&&a--;h=Math.floor(p)+.5-this.newDate(a,1,1).toJD();p=Math.floor(h/30)+1;return this.newDate(a,p,h-30*(p-1)+1)}});m.calendars.ethiopian=n},{"../main":593,"object-assign":473}],583:[function(b,y,D){function n(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}function m(h,a){return h-a*Math.floor(h/
a)}var p=b("../main");b=b("object-assign");n.prototype=new p.baseCalendar;b(n.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:"Nisan;Iyar;Sivan;Tammuz;Av;Elul;Tishrei;Cheshvan;Kislev;Tevet;Shevat;Adar;Adar II".split(";"),monthNamesShort:"Nis Iya Siv Tam Av Elu Tis Che Kis Tev She Ada Ad2".split(" "),dayNames:"Yom Rishon;Yom Sheni;Yom Shlishi;Yom Revi'i;Yom Chamishi;Yom Shishi;Yom Shabbat".split(";"),
dayNamesShort:"Ris She Shl Rev Cha Shi Sha".split(" "),dayNamesMin:"Ri She Shl Re Ch Shi Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,p.local.invalidYear);return this._leapYear(h.year())},_leapYear:function(h){return 7>m(7*(0>h?h+1:h)+1,19)},monthsInYear:function(h){this._validate(h,this.minMonth,this.minDay,p.local.invalidYear);return this._leapYear(h.year?h.year():h)?13:12},weekOfYear:function(h,a,d){h=
this.newDate(h,a,d);h.add(-h.dayOfWeek(),"d");return Math.floor((h.dayOfYear()-1)/7)+1},daysInYear:function(h){h=this._validate(h,this.minMonth,this.minDay,p.local.invalidYear).year();return this.toJD(-1===h?1:h+1,7,1)-this.toJD(h,7,1)},daysInMonth:function(h,a){h.year&&(a=h.month(),h=h.year());this._validate(h,a,this.minDay,p.local.invalidMonth);return 12===a&&this.leapYear(h)?30:8===a&&5===m(this.daysInYear(h),10)?30:9===a&&3===m(this.daysInYear(h),10)?29:this.daysPerMonth[a-1]},weekDay:function(h,
a,d){return 6!==this.dayOfWeek(h,a,d)},extraInfo:function(h,a,d){h=this._validate(h,a,d,p.local.invalidDate);return{yearType:(this.leapYear(h)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(h)%10-3]}},toJD:function(h,a,d){d=this._validate(h,a,d,p.local.invalidDate);h=d.year();a=d.month();d=d.day();var e=0>=h?h+1:h;d=this.jdEpoch+this._delay1(e)+this._delay2(e)+d+1;if(7>a){for(e=7;e<=this.monthsInYear(h);e++)d+=this.daysInMonth(h,e);e=1}else e=7;for(;e<a;e++)d+=this.daysInMonth(h,
e);return d},_delay1:function(h){h=Math.floor((235*h-234)/19);h=29*h+Math.floor((12084+13753*h)/25920);3>m(3*(h+1),7)&&h++;return h},_delay2:function(h){var a=this._delay1(h-1),d=this._delay1(h);return 356===this._delay1(h+1)-d?2:382===d-a?1:0},fromJD:function(h){h=Math.floor(h)+.5;for(var a=Math.floor(98496*(h-this.jdEpoch)/35975351)-1;h>=this.toJD(-1===a?1:a+1,7,1);)a++;for(var d=h<this.toJD(a,1,1)?7:1;h>this.toJD(a,d,this.daysInMonth(a,d));)d++;h=h-this.toJD(a,d,1)+1;return this.newDate(a,d,h)}});
p.calendars.hebrew=n},{"../main":593,"object-assign":473}],584:[function(b,y,D){function n(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");n.prototype=new m.baseCalendar;b(n.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:"Muharram;Safar;Rabi' al-awwal;Rabi' al-thani;Jumada al-awwal;Jumada al-thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),
monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),dayNames:"Yawm al-ahad;Yawm al-ithnayn;Yawm ath-thulaathaa';Yawm al-arbi'aa';Yawm al-khams;Yawm al-jum'a;Yawm as-sabt".split(";"),dayNamesShort:"Aha Ith Thu Arb Kha Jum Sab".split(" "),dayNamesMin:"Ah It Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(p){return 11>(11*this._validate(p,this.minMonth,this.minDay,m.local.invalidYear).year()+14)%30},weekOfYear:function(p,
h,a){p=this.newDate(p,h,a);p.add(-p.dayOfWeek(),"d");return Math.floor((p.dayOfYear()-1)/7)+1},daysInYear:function(p){return this.leapYear(p)?355:354},daysInMonth:function(p,h){p=this._validate(p,h,this.minDay,m.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(12===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(p,h,a){return 5!==this.dayOfWeek(p,h,a)},toJD:function(p,h,a){a=this._validate(p,h,a,m.local.invalidDate);p=a.year();h=a.month();a=a.day();p=0>=p?p+1:p;return a+Math.ceil(29.5*
(h-1))+354*(p-1)+Math.floor((3+11*p)/30)+this.jdEpoch-1},fromJD:function(p){p=Math.floor(p)+.5;var h=Math.floor((30*(p-this.jdEpoch)+10646)/10631);h=0>=h?h-1:h;var a=Math.min(12,Math.ceil((p-29-this.toJD(h,1,1))/29.5)+1);p=p-this.toJD(h,a,1)+1;return this.newDate(h,a,p)}});m.calendars.islamic=n},{"../main":593,"object-assign":473}],585:[function(b,y,D){function n(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");n.prototype=new m.baseCalendar;
b(n.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){p=this._validate(p,this.minMonth,this.minDay,m.local.invalidYear);p=0>p.year()?p.year()+1:p.year();return 0===p%4},weekOfYear:function(p,h,a){p=this.newDate(p,h,a);p.add(4-(p.dayOfWeek()||7),"d");return Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(p,h){p=this._validate(p,h,this.minDay,m.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(2===p.month()&&this.leapYear(p.year())?
1:0)},weekDay:function(p,h,a){return 6>(this.dayOfWeek(p,h,a)||7)},toJD:function(p,h,a){a=this._validate(p,h,a,m.local.invalidDate);p=a.year();h=a.month();a=a.day();0>p&&p++;2>=h&&(p--,h+=12);return Math.floor(365.25*(p+4716))+Math.floor(30.6001*(h+1))+a-1524.5},fromJD:function(p){var h=Math.floor(p+.5)+1524,a=Math.floor((h-122.1)/365.25),d=Math.floor(365.25*a),e=Math.floor((h-d)/30.6001);p=e-Math.floor(14>e?1:13);a-=Math.floor(2<p?4716:4715);h=h-d-Math.floor(30.6001*e);0>=a&&a--;return this.newDate(a,
p,h)}});m.calendars.julian=n},{"../main":593,"object-assign":473}],586:[function(b,y,D){function n(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}function m(h,a){return h-a*Math.floor(h/a)}var p=b("../main");b=b("object-assign");n.prototype=new p.baseCalendar;b(n.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),monthNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),
dayNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesMin:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:"Pop Uo Zip Zotz Tzec Xul Yaxkin Mol Chen Yax Zac Ceh Mac Kankin Muan Pax Kayab Cumku Uayeb".split(" "),tzolkinMonths:"Imix Ik Akbal Kan Chicchan Cimi Manik Lamat Muluc Oc Chuen Eb Ben Ix Men Cib Caban Etznab Cauac Ahau".split(" ")}},
leapYear:function(h){this._validate(h,this.minMonth,this.minDay,p.local.invalidYear);return!1},formatYear:function(h){h=this._validate(h,this.minMonth,this.minDay,p.local.invalidYear).year();var a=Math.floor(h/400);h%=400;h+=0>h?400:0;return a+"."+Math.floor(h/20)+"."+h%20},forYear:function(h){h=h.split(".");if(3>h.length)throw"Invalid Mayan year";for(var a=0,d=0;d<h.length;d++){var e=parseInt(h[d],10);if(19<Math.abs(e)||0<d&&0>e)throw"Invalid Mayan year";a=20*a+e}return a},monthsInYear:function(h){this._validate(h,
this.minMonth,this.minDay,p.local.invalidYear);return 18},weekOfYear:function(h,a,d){this._validate(h,a,d,p.local.invalidDate);return 0},daysInYear:function(h){this._validate(h,this.minMonth,this.minDay,p.local.invalidYear);return 360},daysInMonth:function(h,a){this._validate(h,a,this.minDay,p.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(h,a,d){return this._validate(h,a,d,p.local.invalidDate).day()},weekDay:function(h,a,d){this._validate(h,a,d,p.local.invalidDate);
return!0},extraInfo:function(h,a,d){a=this._validate(h,a,d,p.local.invalidDate).toJD();h=this._toHaab(a);a=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[h[0]-1],haabMonth:h[0],haabDay:h[1],tzolkinDayName:this.local.tzolkinMonths[a[0]-1],tzolkinDay:a[0],tzolkinTrecena:a[1]}},_toHaab:function(h){h-=this.jdEpoch;h=m(h+8+340,365);return[Math.floor(h/20)+1,m(h,20)]},_toTzolkin:function(h){h-=this.jdEpoch;return[m(h+20-1,20)+1,m(h+4-1,13)+1]},toJD:function(h,a,d){h=this._validate(h,a,d,
p.local.invalidDate);return h.day()+20*h.month()+360*h.year()+this.jdEpoch},fromJD:function(h){h=Math.floor(h)+.5-this.jdEpoch;var a=Math.floor(h/360);h%=360;h+=0>h?360:0;return this.newDate(a,Math.floor(h/20),h%20)}});p.calendars.mayan=n},{"../main":593,"object-assign":473}],587:[function(b,y,D){function n(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");n.prototype=new m.baseCalendar;var p=m.instance("gregorian");b(n.prototype,{name:"Nanakshahi",
jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:"Chet Vaisakh Jeth Harh Sawan Bhadon Assu Katak Maghar Poh Magh Phagun".split(" "),monthNamesShort:"Che Vai Jet Har Saw Bha Ass Kat Mgr Poh Mgh Pha".split(" "),dayNames:"Somvaar Mangalvar Budhvaar Veervaar Shukarvaar Sanicharvaar Etvaar".split(" "),dayNamesShort:"Som Mangal Budh Veer Shukar Sanichar Et".split(" "),
dayNamesMin:"So Ma Bu Ve Sh Sa Et".split(" "),digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear);return p.leapYear(h.year()+(1>h.year()?1:0)+1469)},weekOfYear:function(h,a,d){h=this.newDate(h,a,d);h.add(1-(h.dayOfWeek()||7),"d");return Math.floor((h.dayOfYear()-1)/7)+1},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[h.month()-
1]+(12===h.month()&&this.leapYear(h.year())?1:0)},weekDay:function(h,a,d){return 6>(this.dayOfWeek(h,a,d)||7)},toJD:function(h,a,d){a=this._validate(h,a,d,m.local.invalidMonth);h=a.year();0>h&&h++;d=a.day();for(var e=1;e<a.month();e++)d+=this.daysPerMonth[e-1];return d+p.toJD(h+1468,3,13)},fromJD:function(h){h=Math.floor(h+.5);for(var a=Math.floor((h-(this.jdEpoch-1))/366);h>=this.toJD(a+1,1,1);)a++;h=h-Math.floor(this.toJD(a,1,1)+.5)+1;for(var d=1;h>this.daysInMonth(a,d);)h-=this.daysInMonth(a,d),
d++;return this.newDate(a,d,h)}});m.calendars.nanakshahi=n},{"../main":593,"object-assign":473}],588:[function(b,y,D){function n(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");n.prototype=new m.baseCalendar;b(n.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:"Baisakh Jestha Ashadh Shrawan Bhadra Ashwin Kartik Mangsir Paush Mangh Falgun Chaitra".split(" "),
monthNamesShort:"Bai Je As Shra Bha Ash Kar Mang Pau Ma Fal Chai".split(" "),dayNames:"Aaitabaar Sombaar Manglbaar Budhabaar Bihibaar Shukrabaar Shanibaar".split(" "),dayNamesShort:"Aaita Som Mangl Budha Bihi Shukra Shani".split(" "),dayNamesMin:"Aai So Man Bu Bi Shu Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(p){return this.daysInYear(p)!==this.daysPerYear},weekOfYear:function(p,h,a){p=this.newDate(p,h,a);p.add(-p.dayOfWeek(),"d");return Math.floor((p.dayOfYear()-
1)/7)+1},daysInYear:function(p){p=this._validate(p,this.minMonth,this.minDay,m.local.invalidYear).year();if("undefined"===typeof this.NEPALI_CALENDAR_DATA[p])return this.daysPerYear;for(var h=0,a=this.minMonth;12>=a;a++)h+=this.NEPALI_CALENDAR_DATA[p][a];return h},daysInMonth:function(p,h){p.year&&(h=p.month(),p=p.year());this._validate(p,h,this.minDay,m.local.invalidMonth);return"undefined"===typeof this.NEPALI_CALENDAR_DATA[p]?this.daysPerMonth[h-1]:this.NEPALI_CALENDAR_DATA[p][h]},weekDay:function(p,
h,a){return 6!==this.dayOfWeek(p,h,a)},toJD:function(p,h,a){a=this._validate(p,h,a,m.local.invalidDate);p=a.year();h=a.month();a=a.day();var d=m.instance(),e=0,l=h,k=p;this._createMissingCalendarData(p);p-=9<l||9===l&&a>=this.NEPALI_CALENDAR_DATA[k][0]?56:57;9!==h&&(e=a,l--);for(;9!==l;)0>=l&&(l=12,k--),e+=this.NEPALI_CALENDAR_DATA[k][l],l--;9===h?(e+=a-this.NEPALI_CALENDAR_DATA[k][0],0>e&&(e+=d.daysInYear(p))):e+=this.NEPALI_CALENDAR_DATA[k][9]-this.NEPALI_CALENDAR_DATA[k][0];return d.newDate(p,
1,1).add(e,"d").toJD()},fromJD:function(p){p=m.instance().fromJD(p);var h=p.year();p=p.dayOfYear();h+=56;this._createMissingCalendarData(h);for(var a=9,d=this.NEPALI_CALENDAR_DATA[h][a]-this.NEPALI_CALENDAR_DATA[h][0]+1;p>d;)a++,12<a&&(a=1,h++),d+=this.NEPALI_CALENDAR_DATA[h][a];return this.newDate(h,a,this.NEPALI_CALENDAR_DATA[h][a]-(d-p))},_createMissingCalendarData:function(p){var h=this.daysPerMonth.slice(0);h.unshift(17);for(var a=p-1;a<p+2;a++)"undefined"===typeof this.NEPALI_CALENDAR_DATA[a]&&
(this.NEPALI_CALENDAR_DATA[a]=h)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,
30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,
29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2E3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,
30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,
31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,
31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,
32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,
31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,
31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,
31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,
31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,
31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,
31,32,31,32,30,31,30,29,30,29,30,30]}});m.calendars.nepali=n},{"../main":593,"object-assign":473}],589:[function(b,y,D){function n(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");n.prototype=new m.baseCalendar;b(n.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:"Farvardin Ordibehesht Khordad Tir Mordad Shahrivar Mehr Aban Azar Day Bahman Esfand".split(" "),
monthNamesShort:"Far Ord Kho Tir Mor Sha Meh Aba Aza Day Bah Esf".split(" "),dayNames:"Yekshambe Doshambe Seshambe Chharshambe Panjshambe Jom'e Shambe".split(" "),dayNamesShort:"Yek Do Se Ch Panj Jom Sha".split(" "),dayNamesMin:"Ye Do Se Ch Pa Jo Sh".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(p){p=this._validate(p,this.minMonth,this.minDay,m.local.invalidYear);return 682>682*((p.year()-(0<p.year()?474:473))%2820+512)%2816},weekOfYear:function(p,h,a){p=
this.newDate(p,h,a);p.add(-((p.dayOfWeek()+1)%7),"d");return Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(p,h){p=this._validate(p,h,this.minDay,m.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(12===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(p,h,a){return 5!==this.dayOfWeek(p,h,a)},toJD:function(p,h,a){a=this._validate(p,h,a,m.local.invalidDate);p=a.year();h=a.month();a=a.day();p-=0<=p?474:473;var d=474+(p-2820*Math.floor(p/2820));return a+(7>=h?31*(h-1):30*(h-
1)+6)+Math.floor((682*d-110)/2816)+365*(d-1)+1029983*Math.floor(p/2820)+this.jdEpoch-1},fromJD:function(p){p=Math.floor(p)+.5;var h=p-this.toJD(475,1,1),a=Math.floor(h/1029983);h-=1029983*Math.floor(h/1029983);var d=2820;1029982!==h&&(d=Math.floor(h/366),d=Math.floor((2134*d+2816*(h-366*Math.floor(h/366))+2815)/1028522)+d+1);a=d+2820*a+474;a=0>=a?a-1:a;h=p-this.toJD(a,1,1)+1;h=186>=h?Math.ceil(h/31):Math.ceil((h-6)/30);p=p-this.toJD(a,h,1)+1;return this.newDate(a,h,p)}});m.calendars.persian=n;m.calendars.jalali=
n},{"../main":593,"object-assign":473}],590:[function(b,y,D){function n(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");var p=m.instance();n.prototype=new m.baseCalendar;b(n.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);h=this._t2gYear(h.year());return p.leapYear(h)},weekOfYear:function(h,a,d){a=this._validate(h,this.minMonth,
this.minDay,m.local.invalidYear);h=this._t2gYear(a.year());return p.weekOfYear(h,a.month(),a.day())},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(2===h.month()&&this.leapYear(h.year())?1:0)},weekDay:function(h,a,d){return 6>(this.dayOfWeek(h,a,d)||7)},toJD:function(h,a,d){a=this._validate(h,a,d,m.local.invalidDate);h=this._t2gYear(a.year());return p.toJD(h,a.month(),a.day())},fromJD:function(h){h=p.fromJD(h);var a=this._g2tYear(h.year());
return this.newDate(a,h.month(),h.day())},_t2gYear:function(h){return h+this.yearsOffset+(h>=-this.yearsOffset&&-1>=h?1:0)},_g2tYear:function(h){return h-this.yearsOffset-(1<=h&&h<=this.yearsOffset?1:0)}});m.calendars.taiwan=n},{"../main":593,"object-assign":473}],591:[function(b,y,D){function n(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");var p=m.instance();n.prototype=new m.baseCalendar;b(n.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,
daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);h=this._t2gYear(h.year());return p.leapYear(h)},weekOfYear:function(h,a,d){a=this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);h=this._t2gYear(a.year());return p.weekOfYear(h,a.month(),a.day())},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[h.month()-1]+(2===h.month()&&this.leapYear(h.year())?
1:0)},weekDay:function(h,a,d){return 6>(this.dayOfWeek(h,a,d)||7)},toJD:function(h,a,d){a=this._validate(h,a,d,m.local.invalidDate);h=this._t2gYear(a.year());return p.toJD(h,a.month(),a.day())},fromJD:function(h){h=p.fromJD(h);var a=this._g2tYear(h.year());return this.newDate(a,h.month(),h.day())},_t2gYear:function(h){return h-this.yearsOffset-(1<=h&&h<=this.yearsOffset?1:0)},_g2tYear:function(h){return h+this.yearsOffset+(h>=-this.yearsOffset&&-1>=h?1:0)}});m.calendars.thai=n},{"../main":593,"object-assign":473}],
592:[function(b,y,D){function n(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}var m=b("../main");b=b("object-assign");n.prototype=new m.baseCalendar;b(n.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:"Al-Muharram;Safar;Rabi' al-awwal;Rabi' Al-Thani;Jumada Al-Awwal;Jumada Al-Thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),
dayNames:"Yawm al-Ahad;Yawm al-Ithnain;Yawm al-Thalth;Yawm al-Arba;Yawm al-Khams;Yawm al-Juma;Yawm al-Sabt".split(";"),dayNamesMin:"Ah Ith Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(h){h=this._validate(h,this.minMonth,this.minDay,m.local.invalidYear);return 355===this.daysInYear(h.year())},weekOfYear:function(h,a,d){h=this.newDate(h,a,d);h.add(-h.dayOfWeek(),"d");return Math.floor((h.dayOfYear()-1)/7)+1},daysInYear:function(h){for(var a=
0,d=1;12>=d;d++)a+=this.daysInMonth(h,d);return a},daysInMonth:function(h,a){h=this._validate(h,a,this.minDay,m.local.invalidMonth).toJD()-24E5+.5;for(var d=a=0;d<p.length;d++){if(p[d]>h)return p[a]-p[a-1];a++}return 30},weekDay:function(h,a,d){return 5!==this.dayOfWeek(h,a,d)},toJD:function(h,a,d){h=this._validate(h,a,d,m.local.invalidDate);a=12*(h.year()-1)+h.month()-15292;return h.day()+p[a-1]-1+24E5-.5},fromJD:function(h){h=h-24E5+.5;for(var a=0,d=0;d<p.length&&!(p[d]>h);d++)a++;d=a+15292;var e=
Math.floor((d-1)/12);return this.newDate(e+1,d-12*e,h-p[a-1]+1)},isValid:function(h,a,d){var e=m.baseCalendar.prototype.isValid.apply(this,arguments);e&&(h=null!=h.year?h.year:h,e=1276<=h&&1500>=h);return e},_validate:function(h,a,d,e){var l=m.baseCalendar.prototype._validate.apply(this,arguments);if(1276>l.year||1500<l.year)throw e.replace(/\{0\}/,this.local.name);return l}});m.calendars.ummalqura=n;var p=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,
729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,
3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,
6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,
9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,
12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,
14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,
17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,
19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,
22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,
24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,
27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,
29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,
32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,
34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,
37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,
39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,
42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,
44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,
46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,
49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,
51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,
54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,
56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,
59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,
61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,
64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,
66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68E3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,
69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,
71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,
74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,
76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,
79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":593,"object-assign":473}],593:[function(b,y,D){function n(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];
this.calendars={};this._localCals={}}function m(e,l,k,c){this._calendar=e;this._year=l;this._month=k;this._day=c;if(0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(d.local.invalidDate||d.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);}function p(e,l){e=""+e;return"000000".substring(0,l-e.length)+e}function h(){this.shortYearCutoff="+10"}function a(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}b=b("object-assign");
b(n.prototype,{instance:function(e,l){e=(e||"gregorian").toLowerCase();l=l||"";var k=this._localCals[e+"-"+l];!k&&this.calendars[e]&&(k=new this.calendars[e](l),this._localCals[e+"-"+l]=k);if(!k)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return k},newDate:function(e,l,k,c,f){c=(null!=e&&e.year?e.calendar():"string"===typeof c?this.instance(c,f):c)||this.instance();return c.newDate(e,l,k)},substituteDigits:function(e){return function(l){return(l+
"").replace(/[0-9]/g,function(k){return e[k]})}},substituteChineseDigits:function(e,l){return function(k){for(var c="",f=0;0<k;){var g=k%10;c=(0===g?"":e[g]+l[f])+c;f++;k=Math.floor(k/10)}0===c.indexOf(e[1]+l[1])&&(c=c.substr(1));return c||e[0]}}});b(m.prototype,{newDate:function(e,l,k){return this._calendar.newDate(null==e?this:e,l,k)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===
arguments.length?this._day:this.set(e,"d")},date:function(e,l,k){if(!this._calendar.isValid(e,l,k))throw(d.local.invalidDate||d.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);this._year=e;this._month=l;this._day=k;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},
daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,l){return this._calendar.add(this,e,l)},set:function(e,l){return this._calendar.set(this,e,l)},compareTo:function(e){if(this._calendar.name!==
e._calendar.name)throw(d.local.differentCalendars||d.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);e=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0===e?0:0>e?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},
fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(0>this.year()?"-":"")+p(Math.abs(this.year()),4)+"-"+p(this.month(),2)+"-"+p(this.day(),2)}});b(h.prototype,{_validateLevel:0,newDate:function(e,l,k){if(null==e)return this.today();e.year&&(this._validate(e,l,k,d.local.invalidDate||d.regionalOptions[""].invalidDate),k=e.day(),l=e.month(),e=e.year());return new m(this,e,l,k)},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return 0>this._validate(e,
this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return(0>e.year()?"-":"")+p(Math.abs(e.year()),4)},monthsInYear:function(e){this._validate(e,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return 12},monthOfYear:function(e,l){e=this._validate(e,l,this.minDay,
d.local.invalidMonth||d.regionalOptions[""].invalidMonth);return(e.month()+this.monthsInYear(e)-this.firstMonth)%this.monthsInYear(e)+this.minMonth},fromMonthOfYear:function(e,l){l=(l+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;this._validate(e,l,this.minDay,d.local.invalidMonth||d.regionalOptions[""].invalidMonth);return l},daysInYear:function(e){e=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return this.leapYear(e)?366:
365},dayOfYear:function(e,l,k){e=this._validate(e,l,k,d.local.invalidDate||d.regionalOptions[""].invalidDate);return e.toJD()-this.newDate(e.year(),this.fromMonthOfYear(e.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,l,k){e=this._validate(e,l,k,d.local.invalidDate||d.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(e))+2)%this.daysInWeek()},extraInfo:function(e,l,k){this._validate(e,l,k,d.local.invalidDate||d.regionalOptions[""].invalidDate);
return{}},add:function(e,l,k){this._validate(e,this.minMonth,this.minDay,d.local.invalidDate||d.regionalOptions[""].invalidDate);return this._correctAdd(e,this._add(e,l,k),l,k)},_add:function(e,l,k){this._validateLevel++;if("d"===k||"w"===k){l=e.toJD()+l*("w"===k?this.daysInWeek():1);var c=e.calendar().fromJD(l);this._validateLevel--;return[c.year(),c.month(),c.day()]}try{var f=e.year()+("y"===k?l:0),g=e.monthOfYear()+("m"===k?l:0);c=e.day();if("y"===k)e.month()!==this.fromMonthOfYear(f,g)&&(g=this.newDate(f,
e.month(),this.minDay).monthOfYear()),g=Math.min(g,this.monthsInYear(f)),c=Math.min(c,this.daysInMonth(f,this.fromMonthOfYear(f,g)));else if("m"===k){for(;g<this.minMonth;)f--,g+=this.monthsInYear(f);for(var q=this.monthsInYear(f);g>q-1+this.minMonth;)f++,g-=q,q=this.monthsInYear(f);c=Math.min(c,this.daysInMonth(f,this.fromMonthOfYear(f,g)))}var t=[f,this.fromMonthOfYear(f,g),c];this._validateLevel--;return t}catch(u){throw this._validateLevel--,u;}},_correctAdd:function(e,l,k,c){this.hasYearZero||
"y"!==c&&"m"!==c||0!==l[0]&&0<e.year()===0<l[0]||(l={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[c],l=this._add(e,k*l[0]+(0>k?-1:1)*l[1],l[2]));return e.date(l[0],l[1],l[2])},set:function(e,l,k){this._validate(e,this.minMonth,this.minDay,d.local.invalidDate||d.regionalOptions[""].invalidDate);var c="y"===k?l:e.year(),f="m"===k?l:e.month();l="d"===k?l:e.day();if("y"===k||"m"===k)l=Math.min(l,this.daysInMonth(c,f));return e.date(c,
f,l)},isValid:function(e,l,k){this._validateLevel++;var c=this.hasYearZero||0!==e;c&&(e=this.newDate(e,l,this.minDay),c=l>=this.minMonth&&l-this.minMonth<this.monthsInYear(e)&&k>=this.minDay&&k-this.minDay<this.daysInMonth(e));this._validateLevel--;return c},toJSDate:function(e,l,k){e=this._validate(e,l,k,d.local.invalidDate||d.regionalOptions[""].invalidDate);return d.instance().fromJD(this.toJD(e)).toJSDate()},fromJSDate:function(e){return this.fromJD(d.instance().fromJSDate(e).toJD())},_validate:function(e,
l,k,c){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(d.local.differentCalendars||d.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{this._validateLevel++;if(1===this._validateLevel&&!this.isValid(e,l,k))throw c.replace(/\{0\}/,this.local.name);var f=this.newDate(e,l,k);this._validateLevel--;return f}catch(g){throw this._validateLevel--,g;}}});a.prototype=new h;b(a.prototype,{name:"Gregorian",
jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){e=this._validate(e,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);e=e.year()+(0>e.year()?1:0);return 0===e%4&&(0!==e%100||0===e%400)},weekOfYear:function(e,l,k){e=this.newDate(e,l,k);e.add(4-(e.dayOfWeek()||7),"d");return Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(e,l){e=this._validate(e,l,this.minDay,d.local.invalidMonth||d.regionalOptions[""].invalidMonth);return this.daysPerMonth[e.month()-
1]+(2===e.month()&&this.leapYear(e.year())?1:0)},weekDay:function(e,l,k){return 6>(this.dayOfWeek(e,l,k)||7)},toJD:function(e,l,k){k=this._validate(e,l,k,d.local.invalidDate||d.regionalOptions[""].invalidDate);e=k.year();l=k.month();k=k.day();0>e&&e++;3>l&&(l+=12,e--);var c=Math.floor(e/100);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(l+1))+k+(2-c+Math.floor(c/4))-1524.5},fromJD:function(e){e=Math.floor(e+.5);var l=Math.floor((e-1867216.25)/36524.25);l=e+1+l-Math.floor(l/4);var k=l+1524;
e=Math.floor((k-122.1)/365.25);var c=Math.floor(365.25*e);l=Math.floor((k-c)/30.6001);k=k-c-Math.floor(30.6001*l);l-=13.5<l?13:1;e-=2.5<l?4716:4715;0>=e&&e--;return this.newDate(e,l,k)},toJSDate:function(e,l,k){e=this._validate(e,l,k,d.local.invalidDate||d.regionalOptions[""].invalidDate);e=new Date(e.year(),e.month()-1,e.day());e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);e.setHours(12<e.getHours()?e.getHours()+2:0);return e},fromJSDate:function(e){return this.newDate(e.getFullYear(),
e.getMonth()+1,e.getDate())}});var d=y.exports=new n;d.cdate=m;d.baseCalendar=h;d.calendars.gregorian=a},{"object-assign":473}],594:[function(b,y,D){y=b("object-assign");var n=b("./main");y(n.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});
n.local=n.regionalOptions[""];y(n.cdate.prototype,{formatDate:function(m,p){"string"!==typeof m&&(p=m,m="");return this._calendar.formatDate(m||"",this,p)}});y(n.baseCalendar.prototype,{UNIX_EPOCH:n.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:n.instance().jdEpoch,TICKS_PER_DAY:864E9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",
RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(m,p,h){"string"!==typeof m&&(h=p,p=m,m="");if(!p)return"";if(p.calendar()!==this)throw n.local.invalidFormat||n.regionalOptions[""].invalidFormat;m=m||this.local.dateFormat;h=h||{};for(var a=h.dayNamesShort||this.local.dayNamesShort,d=h.dayNames||this.local.dayNames,e=h.monthNumbers||this.local.monthNumbers,l=h.monthNamesShort||this.local.monthNamesShort,k=h.monthNames||this.local.monthNames,c=function(B,C){for(var v=1;z+
v<m.length&&m.charAt(z+v)===B;)v++;z+=v-1;return 1<Math.floor(v/(C||1))},f=function(B,C,v,G){C=""+C;if(c(B,G))for(;C.length<v;)C="0"+C;return C},g=function(B,C,v,G){return c(B)?G[C]:v[C]},q=this,t=function(B){return"function"===typeof e?e.call(q,B,c("m")):x(f("m",B.month(),2))},u=function(B,C){return C?"function"===typeof k?k.call(q,B):k[B.month()-q.minMonth]:"function"===typeof l?l.call(q,B):l[B.month()-q.minMonth]},w=this.local.digits,x=function(B){return h.localNumbers&&w?w(B):B},E="",F=!1,z=0;z<
m.length;z++)if(F)"'"!==m.charAt(z)||c("'")?E+=m.charAt(z):F=!1;else switch(m.charAt(z)){case "d":E+=x(f("d",p.day(),2));break;case "D":E+=g("D",p.dayOfWeek(),a,d);break;case "o":E+=f("o",p.dayOfYear(),3);break;case "w":E+=f("w",p.weekOfYear(),2);break;case "m":E+=t(p);break;case "M":E+=u(p,c("M"));break;case "y":E+=c("y",2)?p.year():(10>p.year()%100?"0":"")+p.year()%100;break;case "Y":c("Y",2);E+=p.formatYear();break;case "J":E+=p.toJD();break;case "@":E+=(p.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;
break;case "!":E+=(p.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case "'":c("'")?E+="'":F=!0;break;default:E+=m.charAt(z)}return E},parseDate:function(m,p,h){if(null==p)throw n.local.invalidArguments||n.regionalOptions[""].invalidArguments;p="object"===typeof p?p.toString():p+"";if(""===p)return null;m=m||this.local.dateFormat;h=h||{};var a=h.shortYearCutoff||this.shortYearCutoff;a="string"!==typeof a?a:this.today().year()%100+parseInt(a,10);for(var d=h.dayNamesShort||this.local.dayNamesShort,
e=h.dayNames||this.local.dayNames,l=h.parseMonth||this.local.parseMonth,k=h.monthNumbers||this.local.monthNumbers,c=h.monthNamesShort||this.local.monthNamesShort,f=h.monthNames||this.local.monthNames,g=h=-1,q=-1,t=-1,u=-1,w=!1,x=!1,E=function(K,N){for(var H=1;J+H<m.length&&m.charAt(J+H)===K;)H++;J+=H-1;return 1<Math.floor(H/(N||1))},F=function(K,N){N=E(K,N);K=[2,3,N?4:2,N?4:2,10,11,20]["oyYJ@!".indexOf(K)+1];K=new RegExp("^-?\\d{1,"+K+"}");K=p.substring(I).match(K);if(!K)throw(n.local.missingNumberAt||
n.regionalOptions[""].missingNumberAt).replace(/\{0\}/,I);I+=K[0].length;return parseInt(K[0],10)},z=this,B=function(){if("function"===typeof k){E("m");var K=k.call(z,p.substring(I));I+=K.length;return K}return F("m")},C=function(K,N,H,L){K=E(K,L)?H:N;for(N=0;N<K.length;N++)if(p.substr(I,K[N].length).toLowerCase()===K[N].toLowerCase())return I+=K[N].length,N+z.minMonth;throw(n.local.unknownNameAt||n.regionalOptions[""].unknownNameAt).replace(/\{0\}/,I);},v=function(){if("function"===typeof f){var K=
E("M")?f.call(z,p.substring(I)):c.call(z,p.substring(I));I+=K.length;return K}return C("M",c,f)},G=function(){if(p.charAt(I)!==m.charAt(J))throw(n.local.unexpectedLiteralAt||n.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,I);I++},I=0,J=0;J<m.length;J++)if(x)"'"!==m.charAt(J)||E("'")?G():x=!1;else switch(m.charAt(J)){case "d":t=F("d");break;case "D":C("D",d,e);break;case "o":u=F("o");break;case "w":F("w");break;case "m":q=B();break;case "M":q=v();break;case "y":g=J;w=!E("y",2);J=g;g=F("y",
2);break;case "Y":g=F("Y",2);break;case "J":h=F("J")+.5;"."===p.charAt(I)&&(I++,F("J"));break;case "@":h=F("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case "!":h=F("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case "*":I=p.length;break;case "'":E("'")?G():x=!0;break;default:G()}if(I<p.length)throw n.local.unexpectedText||n.regionalOptions[""].unexpectedText;-1===g?g=this.today().year():100>g&&w&&(g+=-1===a?1900:this.today().year()-this.today().year()%100-(g<=a?0:100));"string"===typeof q&&(q=l.call(this,
g,q));if(-1<u)for(q=1,t=u,a=this.daysInMonth(g,q);t>a;a=this.daysInMonth(g,q))q++,t-=a;return-1<h?this.fromJD(h):this.newDate(g,q,t)},determineDate:function(m,p,h,a,d){h&&"object"!==typeof h&&(d=a,a=h,h=null);"string"!==typeof a&&(d=a,a="");p=p?p.newDate():null;if(null==m)m=p;else{if("string"===typeof m)a:{try{var e=this.parseDate(a,m,d);break a}catch(l){}m=m.toLowerCase();h=(m.match(/^c/)&&h?h.newDate():null)||this.today();a=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;for(d=a.exec(m);d;)h.add(parseInt(d[1],10),
d[2]||"d"),d=a.exec(m);e=h}else e="number"===typeof m?isNaN(m)||Infinity===m||-Infinity===m?p:this.today().add(m,"d"):this.newDate(m);m=e}return m}})},{"./main":593,"object-assign":473}],595:[function(b,y,D){y.exports=b("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da \x3d _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db \x3d _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da \x3e\x3d 0) !\x3d\x3d (_inline_1_db \x3e\x3d 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":151}],596:[function(b,y,D){y.exports=function(m,p){var h=[];p=+p||0;n(m.hi(m.shape[0]-1),h,p);return h};var n=b("./lib/zc-core")},
{"./lib/zc-core":595}],597:[function(b,y,D){y.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],598:[function(b,y,D){D=
b("./arrow_paths");var n=b("../../plots/font_attributes"),m=b("../../plots/cartesian/constants");b=b("../../plot_api/plot_template").templatedArray;y.exports=b("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:n({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",
min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},
borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:D.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:D.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},
startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",m.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",
values:["pixel",m.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",
values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:n({editType:"arraydraw"}),
editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803,"../../plots/font_attributes":825,"./arrow_paths":597}],599:[function(b,y,D){function n(d){p.filterVisible(d._fullLayout.annotations).forEach(function(e){var l=h.getFromId(d,e.xref),k=h.getFromId(d,e.yref);e._extremes={};l&&m(e,l);k&&m(e,k)})}function m(d,e){var l=e._id,k=l.charAt(0),
c=d[k],f=d["a"+k],g=d["_"+k+"padplus"],q=d["_"+k+"padminus"],t={x:1,y:-1}[k]*d[k+"shift"],u=3*d.arrowsize*d.arrowwidth||0,w=u+t,x=u-t,E=3*d.startarrowsize*d.arrowwidth||0;u=E+t;t=E-t;d["a"+k+"ref"]===d[k+"ref"]?(k=h.findExtremes(e,[e.r2c(c)],{ppadplus:w,ppadminus:x}),e=h.findExtremes(e,[e.r2c(f)],{ppadplus:Math.max(g,u),ppadminus:Math.max(q,t)}),e={min:[k.min[0],e.min[0]],max:[k.max[0],e.max[0]]}):(u=f?u+f:u,t=f?t-f:t,e=h.findExtremes(e,[e.r2c(c)],{ppadplus:Math.max(g,w,u),ppadminus:Math.max(q,x,
t)}));d._extremes[l]=e}var p=b("../../lib"),h=b("../../plots/cartesian/axes"),a=b("./draw").draw;y.exports=function(d){if(p.filterVisible(d._fullLayout.annotations).length&&d._fullData.length)return p.syncOrAsync([a,n],d)}},{"../../lib":749,"../../plots/cartesian/axes":797,"./draw":604}],600:[function(b,y,D){function n(d,e){d=d._fullLayout.annotations;var l=[],k=[],c=[],f=(e||[]).length,g,q,t;for(g=0;g<d.length;g++){var u=d[g];if(t=u.clicktoshow){for(q=0;q<f;q++){var w=e[q];var x=w.xaxis;var E=w.yaxis;
if(x._id===u.xref&&E._id===u.yref&&x.d2r(w.x)===m(u._xclick,x)&&E.d2r(w.y)===m(u._yclick,E)){w=u.visible?"onout"===t?k:c:l;w.push(g);break}}q===f&&u.visible&&"onout"===t&&k.push(g)}}return{on:l,off:k,explicitOff:c}}function m(d,e){return"log"===e.type?e.l2r(d):e.d2r(d)}var p=b("../../lib"),h=b("../../registry"),a=b("../../plot_api/plot_template").arrayEditor;y.exports={hasClickToShow:function(d,e){d=n(d,e);return 0<d.on.length||0<d.explicitOff.length},onClick:function(d,e){var l=n(d,e);e=l.on;l=l.off.concat(l.explicitOff);
var k={},c=d._fullLayout.annotations,f;if(e.length||l.length){for(f=0;f<e.length;f++){var g=a(d.layout,"annotations",c[e[f]]);g.modifyItem("visible",!0);p.extendFlat(k,g.getUpdateObj())}for(f=0;f<l.length;f++)g=a(d.layout,"annotations",c[l[f]]),g.modifyItem("visible",!1),p.extendFlat(k,g.getUpdateObj());return h.call("update",d,{},k)}}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../registry":880}],601:[function(b,y,D){var n=b("../../lib"),m=b("../color");y.exports=function(p,h,a,d){d("opacity");
p=d("bgcolor");var e=d("bordercolor");e=m.opacity(e);d("borderpad");var l=d("borderwidth"),k=d("showarrow");d("text",k?" ":a._dfltTitle.annotation);d("textangle");n.coerceFont(d,"font",a.font);d("width");d("align");d("height")&&d("valign");if(k){k=d("arrowside");if(-1!==k.indexOf("end")){var c=d("arrowhead");var f=d("arrowsize")}-1!==k.indexOf("start")&&(d("startarrowhead",c),d("startarrowsize",f));d("arrowcolor",e?h.bordercolor:m.defaultLine);d("arrowwidth",2*(e&&l||1));d("standoff");d("startstandoff")}h=
d("hovertext");a=a.hoverlabel||{};h&&(p=d("hoverlabel.bgcolor",a.bgcolor||(m.opacity(p)?m.rgb(p):m.defaultLine)),p=d("hoverlabel.bordercolor",a.bordercolor||m.contrast(p)),n.coerceFont(d,"hoverlabel.font",{family:a.font.family,size:a.font.size,color:a.font.color||p}));d("captureevents",!!h)}},{"../../lib":749,"../color":615}],602:[function(b,y,D){var n=b("fast-isnumeric"),m=b("../../lib/to_log_range");y.exports=function(p,h,a,d){function e(g){var q=k[g];q=l?m(q,h.range):Math.pow(10,q);n(q)||(q=null);
d(c+g,q)}h=h||{};var l="log"===a&&"linear"===h.type;a="linear"===a&&"log"===h.type;if(l||a){p=p._fullLayout.annotations;a=h._id.charAt(0);for(var k,c,f=0;f<p.length;f++)k=p[f],c="annotations["+f+"].",k[a+"ref"]===h._id&&e(a),k["a"+a+"ref"]===h._id&&e("a"+a)}}},{"../../lib/to_log_range":775,"fast-isnumeric":241}],603:[function(b,y,D){function n(e,l,k){function c(z,B){return m.coerce(e,l,d,z,B)}var f=c("visible"),g=c("clicktoshow");if(f||g){a(e,l,k,c);f=l.showarrow;var q=["x","y"],t=[-10,-30];k={_fullLayout:k};
for(var u=0;2>u;u++){var w=q[u],x=p.coerceRef(e,l,k,w,"","paper");"paper"!==x&&p.getFromId(k,x)._annIndices.push(l._index);p.coercePosition(l,k,c,x,w,.5);if(f){var E="a"+w,F=p.coerceRef(e,l,k,E,"pixel");"pixel"!==F&&F!==x&&(F=l[E]="pixel");p.coercePosition(l,k,c,F,E,"pixel"===F?t[u]:.4)}c(w+"anchor");c(w+"shift")}m.noneOrAll(e,l,["x","y"]);f&&m.noneOrAll(e,l,["ax","ay"]);g&&(g=c("xclick"),f=c("yclick"),l._xclick=void 0===g?l.x:p.cleanPosition(g,k,l.xref),l._yclick=void 0===f?l.y:p.cleanPosition(f,
k,l.yref))}}var m=b("../../lib"),p=b("../../plots/cartesian/axes"),h=b("../../plots/array_container_defaults"),a=b("./common_defaults"),d=b("./attributes");y.exports=function(e,l){h(e,l,{name:"annotations",handleItemDefaults:n})}},{"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"./attributes":598,"./common_defaults":601}],604:[function(b,y,D){function n(w,x){var E=w._fullLayout.annotations[x]||{},F=e.getFromId(w,E.xref),z=e.getFromId(w,E.yref);F&&F.setScale();
z&&z.setScale();m(w,E,x,!1,F,z)}function m(w,x,E,F,z,B){function C(oa){oa={index:E,annotation:x._input,fullAnnotation:x,event:oa};F&&(oa.subplotId=F);return oa}function v(oa){oa.call(k.font,ua).attr({"text-anchor":{left:"start",right:"end"}[x.align]||"middle"});f.convertToTspans(oa,w,G);return oa}function G(){function oa($a,lb){"auto"===lb&&(lb=$a<1/3?"left":$a>2/3?"right":"center");return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[lb]}var va=ta.selectAll("a");1===va.size()&&va.text()===
ta.text()&&ca.insert("a",":first-child").attr({"xlink:xlink:href":va.attr("xlink:href"),"xlink:xlink:show":va.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(fa.node());va=ca.select(".annotation-text-math-group");for(var ma=!va.empty(),pa=k.bBox((ma?va:ta).node()),za=pa.width,qa=pa.height,Ca=x.width||za,Ka=x.height||qa,Oa=Math.round(Ca+2*ha),kb=Math.round(Ka+2*ha),mb=!1,tb=["x","y"],nb=0;nb<tb.length;nb++){var Ta=tb[nb],fb=x[Ta+"ref"]||Ta,ab=x["a"+Ta+"ref"],ra={x:z,y:B}[Ta],Ea=(U+
("x"===Ta?0:-90))*Math.PI/180,Ia=Oa*Math.cos(Ea),Va=kb*Math.sin(Ea);Ea=Math.abs(Ia)+Math.abs(Va);var rb=x[Ta+"anchor"],ib=x[Ta+"shift"]*("x"===Ta?1:-1),Na=O[Ta];if(ra){var Za=ra.r2fraction(x[Ta]);if(0>Za||1<Za)if(ab===fb){if(Za=ra.r2fraction(x["a"+Ta]),0>Za||1<Za)mb=!0}else mb=!0;Za=ra._offset+ra.r2p(x[Ta]);var eb=.5}else"x"===Ta?(eb=x[Ta],Za=J.l+J.w*eb):(eb=1-x[Ta],Za=J.t+J.h*eb),eb=x.showarrow?.5:eb;x.showarrow?(Na.head=Za,rb=x["a"+Ta],Ia=Ia*oa(.5,x.xanchor)-Va*oa(.5,x.yanchor),ab===fb?(Na.tail=
ra._offset+ra.r2p(rb),ra=Ia):(Na.tail=Za+rb,ra=Ia+rb),Na.text=Na.tail+Ia,Za=I["x"===Ta?"width":"height"],"paper"===fb&&(Na.head=d.constrain(Na.head,1,Za-1)),"pixel"===ab&&(fb=-Math.max(Na.tail-3,Na.text),ab=Math.min(Na.tail+3,Na.text)-Za,0<fb?(Na.tail+=fb,Na.text+=fb):0<ab&&(Na.tail-=ab,Na.text-=ab)),Na.tail+=ib,Na.head+=ib):(ra=Ia=Ea*oa(eb,rb),Na.text=Za+Ia);Na.text+=ib;Ia+=ib;ra+=ib;x["_"+Ta+"padplus"]=Ea/2+ra;x["_"+Ta+"padminus"]=Ea/2-ra;x["_"+Ta+"size"]=Ea;x["_"+Ta+"shift"]=Ia}if(mb)ca.remove();
else{tb=mb=0;"left"!==x.align&&(mb=(Ca-za)*("center"===x.align?.5:1));"top"!==x.valign&&(tb=(Ka-qa)*("middle"===x.valign?.5:1));ma?va.select("svg").attr({x:ha+mb-1,y:ha+tb}).call(k.setClipUrl,na?S:null,w):ta.call(f.positionText,ha+mb-pa.left,ha+tb-pa.top).call(k.setClipUrl,na?S:null,w);sa.select("rect").call(k.setRect,ha,ha,Ca,Ka);fa.call(k.setRect,ia/2,ia/2,Oa-ia,kb-ia);ca.call(k.setTranslate,Math.round(O.x.text-Oa/2),Math.round(O.y.text-kb/2));da.attr({transform:"rotate("+U+","+O.x.text+","+O.y.text+
")"});var Ba=function($a,lb){X.selectAll(".annotation-arrow-g").remove();var Ra=O.x.head,jb=O.y.head,Xa=O.x.tail+$a,pb=O.y.tail+lb,vb=O.x.text+$a;$a=O.y.text+lb;lb=d.rotationXYMatrix(U,vb,$a);var zb=d.apply2DTransform(lb);lb=d.apply2DTransform2(lb);var Jb=+fa.attr("width"),Zb=+fa.attr("height");vb-=.5*Jb;Jb=vb+Jb;$a-=.5*Zb;Zb=$a+Zb;lb=[[vb,$a,vb,Zb],[vb,Zb,Jb,Zb],[Jb,Zb,Jb,$a],[Jb,$a,vb,$a]].map(lb);if(!lb.reduce(function(Rc,id){return Rc^!!d.segmentsIntersect(Ra,jb,Ra+1E6,jb+1E6,id[0],id[1],id[2],
id[3])},!1)){lb.forEach(function(Rc){if(Rc=d.segmentsIntersect(Xa,pb,Ra,jb,Rc[0],Rc[1],Rc[2],Rc[3]))Xa=Rc.x,pb=Rc.y});lb=x.arrowwidth;Zb=x.arrowcolor;$a=x.arrowside;var pc=X.append("g").style({opacity:l.opacity(Zb)}).classed("annotation-arrow-g",!0);Zb=pc.append("path").attr("d","M"+Xa+","+pb+"L"+Ra+","+jb).style("stroke-width",lb+"px").call(l.stroke,l.rgb(Zb));u(Zb,$a,x);if(K.annotationPosition&&Zb.node().parentNode&&!F){$a=Ra;Zb=jb;x.standoff&&(vb=Math.sqrt(Math.pow(Ra-Xa,2)+Math.pow(jb-pb,2)),
$a+=x.standoff*(Xa-Ra)/vb,Zb+=x.standoff*(pb-jb)/vb);lb=pc.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Xa-$a)+","+(pb-Zb),transform:"translate("+$a+","+Zb+")"}).style("stroke-width",lb+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");var Ac,ed;q.init({element:lb.node(),gd:w,prepFn:function(){var Rc=k.getTranslate(ca);Ac=Rc.x;ed=Rc.y;z&&z.autorange&&L(z._name+".autorange",!0);B&&B.autorange&&L(B._name+
".autorange",!0)},moveFn:function(Rc,id){var Tc=zb(Ac,ed),wd=Tc[0]+Rc;Tc=Tc[1]+id;ca.call(k.setTranslate,wd,Tc);P("x",z?z.p2r(z.r2p(x.x)+Rc):x.x+Rc/J.w);P("y",B?B.p2r(B.r2p(x.y)+id):x.y-id/J.h);x.axref===x.xref&&P("ax",z.p2r(z.r2p(x.ax)+Rc));x.ayref===x.yref&&P("ay",B.p2r(B.r2p(x.ay)+id));pc.attr("transform","translate("+Rc+","+id+")");da.attr({transform:"rotate("+U+","+wd+","+Tc+")"})},doneFn:function(){h.call("_guiRelayout",w,Q());var Rc=document.querySelector(".js-notes-box-panel");Rc&&Rc.redraw(Rc.selectedObj)}})}}};
x.showarrow&&Ba(0,0);if(ea){var Ma;q.init({element:ca.node(),gd:w,prepFn:function(){Ma=da.attr("transform")},moveFn:function($a,lb){var Ra="pointer";if(x.showarrow)x.axref===x.xref?P("ax",z.p2r(z.r2p(x.ax)+$a)):P("ax",x.ax+$a),x.ayref===x.yref?P("ay",B.p2r(B.r2p(x.ay)+lb)):P("ay",x.ay+lb),Ba($a,lb);else{if(F)return;if(z)var jb=z.p2r(z.r2p(x.x)+$a);else jb=x._xsize/J.w,jb=q.align(x.x+(x._xshift-x.xshift)/J.w-jb/2+$a/J.w,jb,0,1,x.xanchor);if(B)var Xa=B.p2r(B.r2p(x.y)+lb);else Xa=x._ysize/J.h,Xa=q.align(x.y-
(x._yshift+x.yshift)/J.h-Xa/2-lb/J.h,Xa,0,1,x.yanchor);P("x",jb);P("y",Xa);z&&B||(Ra=q.getCursor(z?.5:jb,B?.5:Xa,x.xanchor,x.yanchor))}da.attr({transform:"translate("+$a+","+lb+")"+Ma});g(ca,Ra)},clickFn:function($a,lb){x.captureevents&&w.emit("plotly_clickannotation",C(lb))},doneFn:function(){g(ca);h.call("_guiRelayout",w,Q());var $a=document.querySelector(".js-notes-box-panel");$a&&$a.redraw($a.selectedObj)}})}}}var I=w._fullLayout,J=w._fullLayout._size,K=w._context.edits;if(F){var N="annotation-"+
F;var H=F+".annotations"}else N="annotation",H="annotations";H=t(w.layout,H,x);var L=H.modifyBase,P=H.modifyItem,Q=H.getUpdateObj;I._infolayer.selectAll("."+N+'[data-index\x3d"'+E+'"]').remove();var S="clip"+I._uid+"_ann"+E;if(x._input&&!1!==x.visible){var O={x:{},y:{}},U=+x.textangle||0,X=I._infolayer.append("g").classed(N,!0).attr("data-index",String(E)).style("opacity",x.opacity),da=X.append("g").classed("annotation-text-g",!0),ea=K[x.showarrow?"annotationTail":"annotationPosition"];N=x.captureevents||
K.annotationText||ea;var ca=da.append("g").style("pointer-events",N?"all":null).call(g,"pointer").on("click",function(){w._dragging=!1;w.emit("plotly_clickannotation",C(p.event))});if(x.hovertext)ca.on("mouseover",function(){var oa=x.hoverlabel,va=oa.font,ma=this.getBoundingClientRect(),pa=w.getBoundingClientRect();c.loneHover({x0:ma.left-pa.left,x1:ma.right-pa.left,y:(ma.top+ma.bottom)/2-pa.top,text:x.hovertext,color:oa.bgcolor,borderColor:oa.bordercolor,fontFamily:va.family,fontSize:va.size,fontColor:va.color},
{container:I._hoverlayer.node(),outerContainer:I._paper.node(),gd:w})}).on("mouseout",function(){c.loneUnhover(I._hoverlayer.node())});var ia=x.borderwidth,ha=ia+x.borderpad,fa=ca.append("rect").attr("class","bg").style("stroke-width",ia+"px").call(l.stroke,x.bordercolor).call(l.fill,x.bgcolor),na=x.width||x.height,sa=I._topclips.selectAll("#"+S).data(na?[0]:[]);sa.enter().append("clipPath").classed("annclip",!0).attr("id",S).append("rect");sa.exit().remove();var ua=x.font;N=I._meta?d.templateString(x.text,
I._meta):x.text;var ta=ca.append("text").classed("annotation-text",!0).text(N);if(K.annotationText)ta.call(f.makeEditable,{delegate:ca,gd:w}).call(v).on("edit",function(oa){x.text=oa;this.call(v);P("text",oa);z&&z.autorange&&L(z._name+".autorange",!0);B&&B.autorange&&L(B._name+".autorange",!0);h.call("_guiRelayout",w,Q())});else ta.call(v)}else p.selectAll("#"+S).remove()}var p=b("d3"),h=b("../../registry"),a=b("../../plots/plots"),d=b("../../lib"),e=b("../../plots/cartesian/axes"),l=b("../color"),
k=b("../drawing"),c=b("../fx"),f=b("../../lib/svg_text_utils"),g=b("../../lib/setcursor"),q=b("../dragelement"),t=b("../../plot_api/plot_template").arrayEditor,u=b("./draw_arrow_head");y.exports={draw:function(w){var x=w._fullLayout;x._infolayer.selectAll(".annotation").remove();for(var E=0;E<x.annotations.length;E++)x.annotations[E].visible&&n(w,E);return a.previousPromises(w)},drawOne:n,drawRaw:m}},{"../../lib":749,"../../lib/setcursor":769,"../../lib/svg_text_utils":773,"../../plot_api/plot_template":787,
"../../plots/cartesian/axes":797,"../../plots/plots":860,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"../fx":655,"./draw_arrow_head":605,d3:169}],605:[function(b,y,D){var n=b("d3"),m=b("../color"),p=b("./arrow_paths");y.exports=function(h,a,d){function e(){h.style("stroke-dasharray","0px,100px")}function l(G,I,J,K){G.path&&(G.noRotate&&(J=0),n.select(k.parentNode).append("path").attr({"class":h.attr("class"),d:G.path,transform:"translate("+I.x+","+I.y+")"+(J?"rotate("+
180*J/Math.PI+")":"")+"scale("+K+")"}).style({fill:m.rgb(d.arrowcolor),"stroke-width":0}))}var k=h.node(),c=p[d.arrowhead||0],f=p[d.startarrowhead||0],g=(d.arrowwidth||1)*(d.arrowsize||1),q=(d.arrowwidth||1)*(d.startarrowsize||1),t=0<=a.indexOf("start");a=0<=a.indexOf("end");var u=c.backoff*g+d.standoff,w=f.backoff*q+d.startstandoff;if("line"===k.nodeName){var x={x:+h.attr("x1"),y:+h.attr("y1")};var E={x:+h.attr("x2"),y:+h.attr("y2")};var F=x.x-E.x,z=x.y-E.y;var B=Math.atan2(z,F);var C=B+Math.PI;
if(u&&w&&u+w>Math.sqrt(F*F+z*z)){e();return}if(u){if(u*u>F*F+z*z){e();return}var v=u*Math.sin(B);E.x+=u*Math.cos(B);E.y+=v;h.attr({x2:E.x,y2:E.y})}if(w){if(w*w>F*F+z*z){e();return}u=w*Math.sin(B);x.x-=w*Math.cos(B);x.y-=u;h.attr({x1:x.x,y1:x.y})}}else if("path"===k.nodeName){F=k.getTotalLength();z="";if(F<u+w){e();return}x=k.getPointAtLength(0);B=k.getPointAtLength(.1);B=Math.atan2(x.y-B.y,x.x-B.x);x=k.getPointAtLength(Math.min(w,F));z="0px,"+w+"px,";E=k.getPointAtLength(F);C=k.getPointAtLength(F-
.1);C=Math.atan2(E.y-C.y,E.x-C.x);E=k.getPointAtLength(Math.max(0,F-u));h.style("stroke-dasharray",z+(F-(z?w+u:u)+"px,"+F+"px"))}t&&l(f,x,B,q);a&&l(c,E,C,g)}},{"../color":615,"./arrow_paths":597,d3:169}],606:[function(b,y,D){D=b("./draw");var n=b("./click");y.exports={moduleType:"component",name:"annotations",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("annotations"),calcAutorange:b("./calc_autorange"),draw:D.draw,
drawOne:D.drawOne,drawRaw:D.drawRaw,hasClickToShow:n.hasClickToShow,onClick:n.onClick,convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":809,"./attributes":598,"./calc_autorange":599,"./click":600,"./convert_coords":602,"./defaults":603,"./draw":604}],607:[function(b,y,D){D=b("../annotations/attributes");var n=b("../../plot_api/edit_types").overrideAll;b=b("../../plot_api/plot_template").templatedArray;y.exports=n(b("annotation",{visible:D.visible,x:{valType:"any"},
y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:D.xanchor,xshift:D.xshift,yanchor:D.yanchor,yshift:D.yshift,text:D.text,textangle:D.textangle,font:D.font,width:D.width,height:D.height,opacity:D.opacity,align:D.align,valign:D.valign,bgcolor:D.bgcolor,bordercolor:D.bordercolor,borderpad:D.borderpad,borderwidth:D.borderwidth,showarrow:D.showarrow,arrowcolor:D.arrowcolor,arrowhead:D.arrowhead,startarrowhead:D.startarrowhead,arrowside:D.arrowside,arrowsize:D.arrowsize,
startarrowsize:D.startarrowsize,arrowwidth:D.arrowwidth,standoff:D.standoff,startstandoff:D.startstandoff,hovertext:D.hovertext,hoverlabel:D.hoverlabel,captureevents:D.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../annotations/attributes":598}],608:[function(b,y,D){function n(h,a){var d=a.fullSceneLayout.domain,e=a.fullLayout._size;a={pdata:null,type:"linear",autorange:!1,range:[-Infinity,Infinity]};h._xa={};m.extendFlat(h._xa,a);p.setConvert(h._xa);
h._xa._offset=e.l+d.x[0]*e.w;h._xa.l2p=function(){return.5*(1+h._pdata[0]/h._pdata[3])*e.w*(d.x[1]-d.x[0])};h._ya={};m.extendFlat(h._ya,a);p.setConvert(h._ya);h._ya._offset=e.t+(1-d.y[1])*e.h;h._ya.l2p=function(){return.5*(1-h._pdata[1]/h._pdata[3])*e.h*(d.y[1]-d.y[0])}}var m=b("../../lib"),p=b("../../plots/cartesian/axes");y.exports=function(h){for(var a=h.fullSceneLayout.annotations,d=0;d<a.length;d++)n(a[d],h);h.fullLayout._infolayer.selectAll(".annotation-"+h.id).remove()}},{"../../lib":749,"../../plots/cartesian/axes":797}],
609:[function(b,y,D){function n(e,l,k,c){function f(q,t){return m.coerce(e,l,d,q,t)}function g(q){var t=q+"axis",u={_fullLayout:{}};u._fullLayout[t]=k[t];return p.coercePosition(l,u,f,q,q,.5)}f("visible")&&(a(e,l,c.fullLayout,f),g("x"),g("y"),g("z"),m.noneOrAll(e,l,["x","y","z"]),l.xref="x",l.yref="y",l.zref="z",f("xanchor"),f("yanchor"),f("xshift"),f("yshift"),l.showarrow&&(l.axref="pixel",l.ayref="pixel",f("ax",-10),f("ay",-30),m.noneOrAll(e,l,["ax","ay"])))}var m=b("../../lib"),p=b("../../plots/cartesian/axes"),
h=b("../../plots/array_container_defaults"),a=b("../annotations/common_defaults"),d=b("./attributes");y.exports=function(e,l,k){h(e,l,{name:"annotations",handleItemDefaults:n,fullLayout:k.fullLayout})}},{"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"../annotations/common_defaults":601,"./attributes":607}],610:[function(b,y,D){var n=b("../annotations/draw").drawRaw,m=b("../../plots/gl3d/project"),p=["x","y","z"];y.exports=function(h){for(var a=h.fullSceneLayout,
d=h.dataScale,e=a.annotations,l=0;l<e.length;l++){for(var k=e[l],c=!1,f=0;3>f;f++){var g=p[f];g=a[g+"axis"].r2fraction(k[g]);if(0>g||1<g){c=!0;break}}c?h.fullLayout._infolayer.select(".annotation-"+h.id+'[data-index\x3d"'+l+'"]').remove():(k._pdata=m(h.glplot.cameraParams,[a.xaxis.r2l(k.x)*d[0],a.yaxis.r2l(k.y)*d[1],a.zaxis.r2l(k.z)*d[2]]),n(h.graphDiv,k,l,h.id,k._xa,k._ya))}}},{"../../plots/gl3d/project":848,"../annotations/draw":604}],611:[function(b,y,D){var n=b("../../registry"),m=b("../../lib");
y.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:b("./attributes")}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),includeBasePlot:function(p,h){var a=n.subplotsRegistry.gl3d;if(a)for(var d=a.attrRegex,e=Object.keys(p),l=0;l<e.length;l++){var k=e[l];d.test(k)&&(p[k].annotations||[]).length&&(m.pushUnique(h._basePlotModules,a),m.pushUnique(h._subplots.gl3d,k))}},convert:b("./convert"),draw:b("./draw")}},{"../../lib":749,"../../registry":880,
"./attributes":607,"./convert":608,"./defaults":609,"./draw":610}],612:[function(b,y,D){y.exports=b("world-calendars/dist/main");b("world-calendars/dist/plus");b("world-calendars/dist/calendars/chinese");b("world-calendars/dist/calendars/coptic");b("world-calendars/dist/calendars/discworld");b("world-calendars/dist/calendars/ethiopian");b("world-calendars/dist/calendars/hebrew");b("world-calendars/dist/calendars/islamic");b("world-calendars/dist/calendars/julian");b("world-calendars/dist/calendars/mayan");
b("world-calendars/dist/calendars/nanakshahi");b("world-calendars/dist/calendars/nepali");b("world-calendars/dist/calendars/persian");b("world-calendars/dist/calendars/taiwan");b("world-calendars/dist/calendars/thai");b("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":579,"world-calendars/dist/calendars/coptic":580,"world-calendars/dist/calendars/discworld":581,"world-calendars/dist/calendars/ethiopian":582,"world-calendars/dist/calendars/hebrew":583,"world-calendars/dist/calendars/islamic":584,
"world-calendars/dist/calendars/julian":585,"world-calendars/dist/calendars/mayan":586,"world-calendars/dist/calendars/nanakshahi":587,"world-calendars/dist/calendars/nepali":588,"world-calendars/dist/calendars/persian":589,"world-calendars/dist/calendars/taiwan":590,"world-calendars/dist/calendars/thai":591,"world-calendars/dist/calendars/ummalqura":592,"world-calendars/dist/main":593,"world-calendars/dist/plus":594}],613:[function(b,y,D){function n(t){var u=f[t];return u?u:u=f[t]=h.instance(t)}
function m(t){return a.extendFlat({},l,{description:t})}function p(t){return"Sets the calendar system to use with `"+t+"` date data."}var h=b("./calendars"),a=b("../../lib");b=b("../../constants/numerical");var d=b.EPOCHJD,e=b.ONEDAY,l={valType:"enumerated",values:Object.keys(h.calendars),editType:"calc",dflt:"gregorian"},k=function(t,u,w,x){var E={};E[w]=l;return a.coerce(t,u,E,w,x)},c={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},
m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},f={};b={xcalendar:m(p("x"))};D=a.extendFlat({},b,{ycalendar:m(p("y"))});var g=a.extendFlat({},D,{zcalendar:m(p("z"))}),q=m("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");
y.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:D,bar:D,box:D,heatmap:D,contour:D,histogram:D,histogram2d:D,histogram2dcontour:D,scatter3d:g,surface:g,mesh3d:g,scattergl:D,ohlc:b,candlestick:b},layout:{calendar:m("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:q},yaxis:{calendar:q},scene:{xaxis:{calendar:q},yaxis:{calendar:q},zaxis:{calendar:q}},polar:{radialaxis:{calendar:q}}},transforms:{filter:{valuecalendar:m("Sets the calendar system to use for `value`, if it is a date."),
targetcalendar:m("Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:l,handleDefaults:k,handleTraceDefaults:function(t,u,w,x){for(var E=0;E<w.length;E++)k(t,u,w[E]+"calendar",x.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",
islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",
ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],
thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:n,worldCalFmt:function(t,u,w){u=Math.floor((u+.05)/e)+d;w=n(w).fromJD(u);u=0;for(var x,E,F;-1!==(u=t.indexOf("%",u));)x=t.charAt(u+1),"0"===x||"-"===x||"_"===x?(F=3,E=t.charAt(u+2),"_"===x&&(x="-")):(E=x,x="0",F=2),(E=c[E])?(x="##"===E?"##":w.formatDate(E[x]),t=t.substr(0,u)+x+t.substr(u+F),u+=x.length):u+=F;return t}}},{"../../constants/numerical":724,"../../lib":749,"./calendars":612}],614:[function(b,y,D){D.defaults=
"#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");D.defaultLine="#444";D.lightLine="#eee";D.background="#fff";D.borderLine="#BEC8D9";D.lightFraction=1E3/11},{}],615:[function(b,y,D){function n(e){if(p(e)||"string"!==typeof e)return e;var l=e.trim();if("rgb"!==l.substr(0,3))return e;var k=l.match(/^rgba?\s*\(([^()]*)\)$/);if(!k)return e;k=k[1].trim().split(/\s*[\s,]\s*/);l="a"===l.charAt(3)&&4===k.length;if(!l&&3!==k.length)return e;for(var c=0;c<k.length;c++){if(!k[c].length)return e;
k[c]=Number(k[c]);if(!(0<=k[c]))return e;if(3===c)1<k[c]&&(k[c]=1);else if(1<=k[c])return e}e=Math.round(255*k[0])+", "+Math.round(255*k[1])+", "+Math.round(255*k[2]);return l?"rgba("+e+", "+k[3]+")":"rgb("+e+")"}var m=b("tinycolor2"),p=b("fast-isnumeric"),h=y.exports={};b=b("./attributes");h.defaults=b.defaults;var a=h.defaultLine=b.defaultLine;h.lightLine=b.lightLine;var d=h.background=b.background;h.tinyRGB=function(e){e=e.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+
")"};h.rgb=function(e){return h.tinyRGB(m(e))};h.opacity=function(e){return e?m(e).getAlpha():0};h.addOpacity=function(e,l){e=m(e).toRgb();return"rgba("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+", "+l+")"};h.combine=function(e,l){var k=m(e).toRgb();if(1===k.a)return m(e).toRgbString();e=m(l||d).toRgb();e=1===e.a?e:{r:255*(1-e.a)+e.r*e.a,g:255*(1-e.a)+e.g*e.a,b:255*(1-e.a)+e.b*e.a};return m({r:e.r*(1-k.a)+k.r*k.a,g:e.g*(1-k.a)+k.g*k.a,b:e.b*(1-k.a)+k.b*k.a}).toRgbString()};h.contrast=
function(e,l,k){var c=m(e);1!==c.getAlpha()&&(c=m(h.combine(e,d)));return(c.isDark()?l?c.lighten(l):d:k?c.darken(k):a).toString()};h.stroke=function(e,l){l=m(l);e.style({stroke:h.tinyRGB(l),"stroke-opacity":l.getAlpha()})};h.fill=function(e,l){l=m(l);e.style({fill:h.tinyRGB(l),"fill-opacity":l.getAlpha()})};h.clean=function(e){if(e&&"object"===typeof e){var l=Object.keys(e),k;for(k=0;k<l.length;k++){var c=l[k];var f=e[c];if("color"===c.substr(c.length-5))if(Array.isArray(f))for(c=0;c<f.length;c++)f[c]=
n(f[c]);else e[c]=n(f);else if("colorscale"===c.substr(c.length-10)&&Array.isArray(f))for(c=0;c<f.length;c++)Array.isArray(f[c])&&(f[c][1]=n(f[c][1]));else if(Array.isArray(f)){if(c=f[0],!Array.isArray(c)&&c&&"object"===typeof c)for(c=0;c<f.length;c++)h.clean(f[c])}else f&&"object"===typeof f&&h.clean(f)}}}},{"./attributes":614,"fast-isnumeric":241,tinycolor2:548}],616:[function(b,y,D){D=b("../../plots/cartesian/layout_attributes");var n=b("../../plots/font_attributes"),m=b("../../lib/extend").extendFlat;
b=b("../../plot_api/edit_types").overrideAll;y.exports=b({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:D.linecolor,outlinewidth:D.linewidth,bordercolor:D.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:D.tickmode,nticks:D.nticks,tick0:D.tick0,dtick:D.dtick,tickvals:D.tickvals,ticktext:D.ticktext,ticks:m({},D.ticks,{dflt:""}),ticklen:D.ticklen,tickwidth:D.tickwidth,tickcolor:D.tickcolor,showticklabels:D.showticklabels,tickfont:n({}),tickangle:D.tickangle,
tickformat:D.tickformat,tickformatstops:D.tickformatstops,tickprefix:D.tickprefix,showtickprefix:D.showtickprefix,ticksuffix:D.ticksuffix,showticksuffix:D.showticksuffix,separatethousands:D.separatethousands,exponentformat:D.exponentformat,showexponent:D.showexponent,title:{text:{valType:"string"},font:n({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:n({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},
"colorbars","from-root")},{"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/cartesian/layout_attributes":811,"../../plots/font_attributes":825}],617:[function(b,y,D){y.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],618:[function(b,y,D){var n=b("../../lib"),m=b("../../plot_api/plot_template"),
p=b("../../plots/cartesian/tick_value_defaults"),h=b("../../plots/cartesian/tick_mark_defaults"),a=b("../../plots/cartesian/tick_label_defaults"),d=b("./attributes");y.exports=function(e,l,k){function c(q,t){return n.coerce(g,f,d,q,t)}var f=m.newContainer(l,"colorbar"),g=e.colorbar||{};e=c("thicknessmode");c("thickness","fraction"===e?30/(k.width-k.margin.l-k.margin.r):30);e=c("lenmode");c("len","fraction"===e?1:k.height-k.margin.t-k.margin.b);c("x");c("xanchor");c("xpad");c("y");c("yanchor");c("ypad");
n.noneOrAll(g,f,["x","y"]);c("outlinecolor");c("outlinewidth");c("bordercolor");c("borderwidth");c("bgcolor");p(g,f,c,"linear");e={outerTicks:!1,font:k.font};a(g,f,c,"linear",e);h(g,f,c,"linear",e);c("title.text",k._dfltTitle.colorbar);n.coerceFont(c,"title.font",k.font);c("title.side")}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/cartesian/tick_label_defaults":818,"../../plots/cartesian/tick_mark_defaults":819,"../../plots/cartesian/tick_value_defaults":820,"./attributes":616}],
619:[function(b,y,D){function n(K){function N(na){return q(na,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function H(){"function"===typeof X.calc?X.calc(K,U,S):(S._fillgradient=O.reversescale?F(O.colorscale):O.colorscale,S._zrange=[O[X.min],O[X.max]])}for(var L=K._fullLayout,P=K.calcdata,Q=[],S,O,U,X,da=0;da<P.length;da++){U=P[da][0].trace;var ea=U._module.colorbar;if(!0===U.visible&&ea){var ca=
Array.isArray(ea);ea=ca?ea:[ea];for(var ia=0;ia<ea.length;ia++){X=ea[ia];var ha=X.container;(O=ha?U[ha]:U)&&O.showscale&&(S=N(O.colorbar),S._id="cb"+U.uid+(ca&&ha?"-"+ha:""),S._traceIndex=U.index,S._propPrefix=(ha?ha+".":"")+"colorbar.",S._meta=U._meta,H(),Q.push(S))}}}for(var fa in L._colorAxes)O=L[fa],O.showscale&&(P=L._colorAxes[fa],S=N(O.colorbar),S._id="cb"+fa,S._propPrefix=fa+".colorbar.",S._meta=L._meta,X={min:"cmin",max:"cmax"},"heatmap"!==P[0]&&(U=P[1],X.calc=U._module.colorbar.calc),H(),
Q.push(S));return Q}function m(K,N,H){function L(Ta,fb){var ab={propContainer:Oa,propName:N._propPrefix+"title",traceIndex:N._traceIndex,_meta:N._meta,placeholder:P._dfltTitle.colorbar,containerGroup:K.select("."+J.cbtitle)},ra="h"===Ta.charAt(0)?Ta.substr(1):"h"+Ta;K.selectAll("."+ra+",."+ra+"-math-group").remove();x.draw(H,Ta,q(ab,fb||{}))}var P=H._fullLayout,Q=P._size,S=N._fillcolor,O=N._line,U=N.title,X=U.side,da=N._zrange||d.extent(("function"===typeof S?S:O.color).domain()),ea="function"===
typeof O.color?O.color:function(){return O.color},ca="function"===typeof S?S:function(){return S},ia=N._levels,ha=h(H,N,da),fa=ha.fill,na=ha.line,sa=Math.round(N.thickness*("fraction"===N.thicknessmode?Q.w:1));ha=sa/Q.w;var ua=Math.round(N.len*("fraction"===N.lenmode?Q.h:1)),ta=ua/Q.h,oa=N.xpad/Q.w,va=(N.borderwidth+N.outlinewidth)/2,ma=N.ypad/Q.h,pa=Math.round(N.x*Q.w+N.xpad),za=N.x-ha*({middle:.5,right:1}[N.xanchor]||0),qa=N.y+ta*(({top:-.5,bottom:.5}[N.yanchor]||0)-.5),Ca=Math.round(Q.h*(1-qa)),
Ka=Ca-ua;N._lenFrac=ta;N._thickFrac=ha;N._xLeftFrac=za;N._yBottomFrac=qa;var Oa=N._axis=a(H,N,da);Oa.position=N.x+oa+ha;-1!==["top","bottom"].indexOf(X)&&(Oa.title.side=X,Oa.titlex=N.x+oa,Oa.titley=qa+("top"===U.side?ta-ma:ma));O.color&&"auto"===N.tickmode&&(Oa.tickmode="linear",Oa.tick0=ia.start,U=ia.size,ha=g.constrain((Ca-Ka)/50,4,15)+1,ha=(da[1]-da[0])/((N.nticks||ha)*U),1<ha&&(ua=Math.pow(10,Math.floor(Math.log(ha)/Math.LN10)),U*=ua*g.roundUp(ha/ua,[2,5,10]),2E-6>(Math.abs(ia.start)/ia.size+
1E-6)%1&&(Oa.tick0=0)),Oa.dtick=U);Oa.domain=[qa+ma,qa+ta-ma];Oa.setScale();K.attr("transform","translate("+Math.round(Q.l)+","+Math.round(Q.t)+")");var kb=K.select("."+J.cbtitleunshift).attr("transform","translate(-"+Math.round(Q.l)+",-"+Math.round(Q.t)+")"),mb=K.select("."+J.cbaxis),tb,nb=0;return g.syncOrAsync([l.previousPromises,function(){if(-1!==["top","bottom"].indexOf(X)){var Ta=Oa.title.font.size;L(Oa._id+"title",{attributes:{x:Q.l+(N.x+oa)*Q.w,y:"top"===X?(1-(qa+ta-ma))*Q.h+Q.t+3+.75*Ta:
(1-(qa+ma))*Q.h+Q.t-3-.25*Ta,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(X)){var Ta=K.select("."+J.cbtitle),fb=Ta.select("text"),ab=[-N.outlinewidth/2,N.outlinewidth/2],ra=Ta.select(".h"+Oa._id+"title-math-group").node(),Ea=15.6;fb.node()&&(Ea=parseInt(fb.node().style.fontSize,10)*v);ra?(nb=u.bBox(ra).height,nb>Ea&&(ab[1]-=(nb-Ea)/2)):fb.node()&&!fb.classed(J.jsPlaceholder)&&(nb=u.bBox(fb.node()).height);nb&&(nb+=5,"top"===X?(Oa.domain[1]-=nb/Q.h,ab[1]*=-1):(Oa.domain[0]+=
nb/Q.h,fb=E.lineCount(fb),ab[1]+=(1-fb)*Ea),Ta.attr("transform","translate("+ab+")"),Oa.setScale())}K.selectAll("."+J.cbfills+",."+J.cblines).attr("transform","translate(0,"+Math.round(Q.h*(1-Oa.domain[1]))+")");mb.attr("transform","translate(0,"+Math.round(-Q.t)+")");Ta=K.select("."+J.cbfills).selectAll("rect."+J.cbfill).data(fa);Ta.enter().append("rect").classed(J.cbfill,!0).style("stroke","none");Ta.exit().remove();var Ia=da.map(Oa.c2p).map(Math.round).sort(function(Va,rb){return Va-rb});Ta.each(function(Va,
rb){rb=[0===rb?da[0]:(fa[rb]+fa[rb-1])/2,rb===fa.length-1?da[1]:(fa[rb]+fa[rb+1])/2].map(Oa.c2p).map(Math.round);rb[1]=g.constrain(rb[1]+(rb[1]>rb[0])?1:-1,Ia[0],Ia[1]);rb=d.select(this).attr({x:pa,width:Math.max(sa,2),y:d.min(rb),height:Math.max(d.max(rb)-d.min(rb),2)});N._fillgradient?u.gradient(rb,H,N._id,"vertical",N._fillgradient,"fill"):(Va=ca(Va).replace("e-",""),rb.attr("fill",e(Va).toHexString()))});Ta=K.select("."+J.cblines).selectAll("path."+J.cbline).data(O.color&&O.width?na:[]);Ta.enter().append("path").classed(J.cbline,
!0);Ta.exit().remove();Ta.each(function(Va){d.select(this).attr("d","M"+pa+","+(Math.round(Oa.c2p(Va))+O.width/2%1)+"h"+sa).call(u.lineGroupStyle,O.width,ea(Va),O.dash)});mb.selectAll("g."+Oa._id+"tick,path").remove();Ta=pa+sa+(N.outlinewidth||0)/2-("outside"===N.ticks?1:0);ab=c.calcTicks(Oa);Ea=c.makeTransFn(Oa);fb=c.getTickSigns(Oa)[2];c.drawTicks(H,Oa,{vals:"inside"===Oa.ticks?c.clipEnds(Oa,ab):ab,layer:mb,path:c.makeTickPath(Oa,Ta,fb),transFn:Ea});return c.drawLabels(H,Oa,{vals:ab,layer:mb,transFn:Ea,
labelFns:c.makeLabelFns(Oa,Ta)})},function(){if(-1===["top","bottom"].indexOf(X)){var Ta=Oa.title.font.size,fb=Oa._offset+Oa._length/2;Ta=Q.l+(Oa.position||0)*Q.w+("right"===Oa.side?10+Ta*(Oa.showticklabels?1:.5):-10-Ta*(Oa.showticklabels?.5:0));L("h"+Oa._id+"title",{avoid:{selection:d.select(H).selectAll("g."+Oa._id+"tick"),side:X,offsetLeft:Q.l,offsetTop:0,maxShift:P.width},attributes:{x:Ta,y:fb,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},l.previousPromises,function(){var Ta=sa+
N.outlinewidth/2+u.bBox(mb.node()).width;tb=kb.select("text");if(tb.node()&&!tb.classed(J.jsPlaceholder)){var fb=kb.select(".h"+Oa._id+"title-math-group").node();fb=fb&&-1!==["top","bottom"].indexOf(X)?u.bBox(fb).width:u.bBox(kb.node()).right-pa-Q.l;Ta=Math.max(Ta,fb)}fb=2*N.xpad+Ta+N.borderwidth+N.outlinewidth/2;var ab=Ca-Ka;K.select("."+J.cbbg).attr({x:pa-N.xpad-(N.borderwidth+N.outlinewidth)/2,y:Ka-va,width:Math.max(fb,2),height:Math.max(ab+2*va,2)}).call(w.fill,N.bgcolor).call(w.stroke,N.bordercolor).style("stroke-width",
N.borderwidth);K.selectAll("."+J.cboutline).attr({x:pa,y:Ka+N.ypad+("top"===X?nb:0),width:Math.max(sa,2),height:Math.max(ab-2*N.ypad-nb,2)}).call(w.stroke,N.outlinecolor).style({fill:"none","stroke-width":N.outlinewidth});K.attr("transform","translate("+(Q.l-({center:.5,right:1}[N.xanchor]||0)*fb)+","+Q.t+")");Ta={};var ra=G[N.yanchor],Ea=I[N.yanchor];"pixels"===N.lenmode?(Ta.y=N.y,Ta.t=ab*ra,Ta.b=ab*Ea):(Ta.t=Ta.b=0,Ta.yt=N.y+N.len*ra,Ta.yb=N.y-N.len*Ea);ab=G[N.xanchor];ra=I[N.xanchor];"pixels"===
N.thicknessmode?(Ta.x=N.x,Ta.l=fb*ab,Ta.r=fb*ra):(fb-=sa,Ta.l=fb*ab,Ta.r=fb*ra,Ta.xl=N.x-N.thickness*ab,Ta.xr=N.x+N.thickness*ra);l.autoMargin(H,N._id,Ta)}],H)}function p(K,N,H){var L=H._fullLayout._size,P,Q,S;f.init({element:K.node(),gd:H,prepFn:function(){P=K.attr("transform");t(K)},moveFn:function(O,U){K.attr("transform",P+" translate("+O+","+U+")");Q=f.align(N._xLeftFrac+O/L.w,N._thickFrac,0,1,N.xanchor);S=f.align(N._yBottomFrac-U/L.h,N._lenFrac,0,1,N.yanchor);O=f.getCursor(Q,S,N.xanchor,N.yanchor);
t(K,O)},doneFn:function(){t(K);if(void 0!==Q&&void 0!==S){var O={};O[N._propPrefix+"x"]=Q;O[N._propPrefix+"y"]=S;void 0!==N._traceIndex?k.call("_guiRestyle",H,O,N._traceIndex):k.call("_guiRelayout",H,O)}}})}function h(K,N,H){var L=N._levels;K=[];var P=[],Q,S=L.end+L.size/100,O=L.size,U=1.001*H[0]-.001*H[1],X=1.001*H[1]-.001*H[0];for(Q=0;1E5>Q;Q++){var da=L.start+Q*O;if(0<O?da>=S:da<=S)break;da>U&&da<X&&K.push(da)}if(N._fillgradient)P=[0];else if("function"===typeof N._fillcolor)if(N=N._filllevels)for(S=
N.end+N.size/100,O=N.size,Q=0;1E5>Q;Q++){da=N.start+Q*O;if(0<O?da>=S:da<=S)break;da>H[0]&&da<H[1]&&P.push(da)}else P=K.map(function(ea){return ea-L.size/2}),P.push(P[P.length-1]+L.size);else N._fillcolor&&"string"===typeof N._fillcolor&&(P=[0]);0>L.size&&(K.reverse(),P.reverse());return{line:K,fill:P}}function a(K,N,H){function L(S,O){return g.coerce(P,Q,C,S,O)}K=K._fullLayout;var P={type:"linear",range:H,tickmode:N.tickmode,nticks:N.nticks,tick0:N.tick0,dtick:N.dtick,tickvals:N.tickvals,ticktext:N.ticktext,
ticks:N.ticks,ticklen:N.ticklen,tickwidth:N.tickwidth,tickcolor:N.tickcolor,showticklabels:N.showticklabels,tickfont:N.tickfont,tickangle:N.tickangle,tickformat:N.tickformat,exponentformat:N.exponentformat,separatethousands:N.separatethousands,showexponent:N.showexponent,showtickprefix:N.showtickprefix,tickprefix:N.tickprefix,showticksuffix:N.showticksuffix,ticksuffix:N.ticksuffix,title:N.title,showline:!0,anchor:"free",side:"right",position:1},Q={type:"linear",_id:"y"+N._id};N={letter:"y",font:K.font,
noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:K.calendar};z(P,Q,L,N,K);B(P,Q,L,N);return Q}var d=b("d3"),e=b("tinycolor2"),l=b("../../plots/plots"),k=b("../../registry"),c=b("../../plots/cartesian/axes"),f=b("../dragelement"),g=b("../../lib"),q=b("../../lib/extend").extendFlat,t=b("../../lib/setcursor"),u=b("../drawing"),w=b("../color"),x=b("../titles"),E=b("../../lib/svg_text_utils"),F=b("../colorscale/helpers").flipScale,z=b("../../plots/cartesian/axis_defaults"),B=b("../../plots/cartesian/position_defaults"),
C=b("../../plots/cartesian/layout_attributes");D=b("../../constants/alignment");var v=D.LINE_SPACING,G=D.FROM_TL,I=D.FROM_BR,J=b("./constants").cn;y.exports={draw:function(K){var N=K._fullLayout._infolayer.selectAll("g."+J.colorbar).data(n(K),function(H){return H._id});N.enter().append("g").attr("class",function(H){return H._id}).classed(J.colorbar,!0);N.each(function(H){var L=d.select(this);g.ensureSingle(L,"rect",J.cbbg);g.ensureSingle(L,"g",J.cbfills);g.ensureSingle(L,"g",J.cblines);g.ensureSingle(L,
"g",J.cbaxis,function(Q){Q.classed(J.crisp,!0)});g.ensureSingle(L,"g",J.cbtitleunshift,function(Q){Q.append("g").classed(J.cbtitle,!0)});g.ensureSingle(L,"rect",J.cboutline);var P=m(L,H,K);P&&P.then&&(K._promises||[]).push(P);K._context.edits.colorbarPosition&&p(L,H,K)});N.exit().each(function(H){l.autoMargin(K,H._id)}).remove();N.order()}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/extend":739,"../../lib/setcursor":769,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,
"../../plots/cartesian/axis_defaults":799,"../../plots/cartesian/layout_attributes":811,"../../plots/cartesian/position_defaults":814,"../../plots/plots":860,"../../registry":880,"../color":615,"../colorscale/helpers":626,"../dragelement":634,"../drawing":637,"../titles":710,"./constants":617,d3:169,tinycolor2:548}],620:[function(b,y,D){var n=b("../../lib");y.exports=function(m){return n.isPlainObject(m.colorbar)}},{"../../lib":749}],621:[function(b,y,D){y.exports={moduleType:"component",name:"colorbar",
attributes:b("./attributes"),supplyDefaults:b("./defaults"),draw:b("./draw").draw,hasColorbar:b("./has_colorbar")}},{"./attributes":616,"./defaults":618,"./draw":619,"./has_colorbar":620}],622:[function(b,y,D){var n=b("../colorbar/attributes"),m=b("../../lib/regex").counter,p=b("./scales.js").scales;Object.keys(p);y.exports=function(h,a){a=a||{};var d=a.cLetter||"c";h="noScale"in a?a.noScale:"marker.line"===(h||"");var e="showScaleDflt"in a?a.showScaleDflt:"z"===d,l="string"===typeof a.colorscaleDflt?
p[a.colorscaleDflt]:null,k=a.editTypeOverride||"";var c="colorAttr"in a?a.colorAttr:{z:"z",c:"color"}[d];var f=d+"auto",g=d+"min",q=d+"max",t={};t[g]=t[q]=void 0;var u={};u[f]=!1;var w={};"color"===c&&(w.color={valType:"color",arrayOk:!0,editType:k||"style"},a.anim&&(w.color.anim=!0));w[f]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:t};w[g]={valType:"number",dflt:null,editType:k||"plot",impliedEdits:u};w[q]={valType:"number",dflt:null,editType:k||"plot",impliedEdits:u};w[d+"mid"]={valType:"number",
dflt:null,editType:"calc",impliedEdits:t};w.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1}};w.autocolorscale={valType:"boolean",dflt:!1===a.autoColorDflt?!1:!0,editType:"calc",impliedEdits:{colorscale:void 0}};w.reversescale={valType:"boolean",dflt:!1,editType:"plot"};h||(w.showscale={valType:"boolean",dflt:e,editType:"calc"},w.colorbar=n);a.noColorAxis||(w.coloraxis={valType:"subplotid",regex:m("coloraxis"),dflt:null,editType:"calc"});return w}},{"../../lib/regex":765,
"../colorbar/attributes":616,"./scales.js":630}],623:[function(b,y,D){var n=b("fast-isnumeric"),m=b("../../lib"),p=b("./helpers").extractOpts;y.exports=function(h,a,d){h=h._fullLayout;var e=d.vals;a=(d=d.containerStr)?m.nestedProperty(a,d).get():a;d=p(a);var l=!1!==d.auto,k=d.min,c=d.max,f=d.mid;void 0===k?k=m.aggNums(Math.min,null,e):l&&(k=a._colorAx&&n(k)?Math.min(k,m.aggNums(Math.min,null,e)):m.aggNums(Math.min,null,e));void 0===c?c=m.aggNums(Math.max,null,e):l&&(c=a._colorAx&&n(c)?Math.max(c,
m.aggNums(Math.max,null,e)):m.aggNums(Math.max,null,e));l&&void 0!==f&&(c-f>f-k?k=f-(c-f):c-f<f-k&&(c=f+(f-k)));k===c&&(k-=.5,c+=.5);d._sync("min",k);d._sync("max",c);d.autocolorscale&&d._sync("colorscale",0>k*c?h.colorscale.diverging:0<=k?h.colorscale.sequential:h.colorscale.sequentialminus)}},{"../../lib":749,"./helpers":626,"fast-isnumeric":241}],624:[function(b,y,D){var n=b("../../lib"),m=b("./helpers").hasColorscale,p=b("./helpers").extractOpts;y.exports=function(h,a){function d(q,t){var u=q["_"+
t];void 0!==u&&(q[t]=u)}function e(q,t){if(q=t.container?n.nestedProperty(q,t.container).get():q)if(q.coloraxis)q._colorAx=a[q.coloraxis];else{var u=p(q),w=u.auto;(w||void 0===u.min)&&d(q,t.min);(w||void 0===u.max)&&d(q,t.max);u.autocolorscale&&d(q,"colorscale")}}for(var l=0;l<h.length;l++){var k=h[l],c=k._module.colorbar;if(c)if(Array.isArray(c))for(var f=0;f<c.length;f++)e(k,c[f]);else e(k,c);m(k,"marker.line")&&e(k,{container:"marker.line",min:"cmin",max:"cmax"})}for(var g in a._colorAxes)e(a[g],
{min:"cmin",max:"cmax"})}},{"../../lib":749,"./helpers":626}],625:[function(b,y,D){function n(l,k){var c=k.slice(0,k.length-1);return k?p.nestedProperty(l,c).get()||{}:l}var m=b("fast-isnumeric"),p=b("../../lib"),h=b("../colorbar/has_colorbar"),a=b("../colorbar/defaults"),d=b("./scales").isValid,e=b("../../registry").traceIs;y.exports=function t(k,c,f,g,q){var u=q.prefix,w=q.cLetter,x="_module"in c,E=n(k,u),F=n(c,u),z=n(c._template||{},u)||{},B=function(){delete k.coloraxis;delete c.coloraxis;return t(k,
c,f,g,q)};if(x){var C=f._colorAxes||{},v=g(u+"coloraxis");if(v){u=e(c,"contour")&&p.nestedProperty(c,"contours.coloring").get()||"heatmap";(x=C[v])?(x[2].push(B),x[0]!==u&&(x[0]=!1,p.warn(["Ignoring coloraxis:",v,"setting as it is linked to incompatible colorscales."].join(" ")))):C[v]=[u,c,[B]];return}}B=E[w+"min"];C=E[w+"max"];B=m(B)&&m(C)&&B<C;g(u+w+"auto",!B)?g(u+w+"mid"):(g(u+w+"min"),g(u+w+"max"));w=E.colorscale;B=z.colorscale;var G;void 0!==w&&(G=!d(w));void 0!==B&&(G=!d(B));g(u+"autocolorscale",
G);g(u+"colorscale");g(u+"reversescale");if("marker.line."!==u){var I;u&&x&&(I=h(E));g(u+"showscale",I)&&(u&&z&&(F._template=z),a(E,F,f))}}},{"../../lib":749,"../../registry":880,"../colorbar/defaults":618,"../colorbar/has_colorbar":620,"./scales":630,"fast-isnumeric":241}],626:[function(b,y,D){function n(t){var u=t._colorAx,w=u?u:t;t={};var x;for(x=0;x<g.length;x++){var E=g[x];t[E]=w[E]}if(u){var F="c";for(x=0;x<q.length;x++)E=q[x],t[E]=w["c"+E]}else{for(x=0;x<q.length;x++){E=q[x];var z="c"+E;z in
w?t[E]=w[z]:(z="z"+E,z in w&&(t[E]=w[z]))}F=z.charAt(0)}t._sync=function(B,C){B=-1!==q.indexOf(B)?F+B:B;w[B]=w["_"+B]=C};return t}function m(t){var u=n(t);t=u.min;var w=u.max;u=u.reversescale?p(u.colorscale):u.colorscale;for(var x=u.length,E=Array(x),F=Array(x),z=0;z<x;z++){var B=u[z];E[z]=t+B[0]*(w-t);F[z]=B[1]}return{domain:E,range:F}}function p(t){var u=t.length,w=Array(u);--u;for(var x=0;0<=u;u--,x++){var E=t[u];w[x]=[1-E[0],E[1]]}return w}function h(t,u){u=u||{};var w=t.domain,x=t.range;t=x.length;
for(var E=Array(t),F=0;F<t;F++){var z=e(x[F]).toRgb();E[F]=[z.r,z.g,z.b,z.a]}var B=d.scale.linear().domain(w).range(E).clamp(!0);w=u.noNumericCheck;u=u.returnArray;u=w&&u?B:w?function(C){return a(B(C))}:u?function(C){return l(C)?B(C):e(C).isValid()?C:c.defaultLine}:function(C){return l(C)?a(B(C)):e(C).isValid()?C:c.defaultLine};u.domain=B.domain;u.range=function(){return x};return u}function a(t){return e({r:t[0],g:t[1],b:t[2],a:t[3]}).toRgbString()}var d=b("d3"),e=b("tinycolor2"),l=b("fast-isnumeric"),
k=b("../../lib"),c=b("../color"),f=b("./scales").isValid,g=["showscale","autocolorscale","colorscale","reversescale","colorbar"],q=["min","max","mid","auto"];y.exports={hasColorscale:function(t,u,w){t=u?k.nestedProperty(t,u).get()||{}:t;w=t[w||"color"];u=!1;if(k.isArrayOrTypedArray(w))for(var x=0;x<w.length;x++)if(l(w[x])){u=!0;break}return k.isPlainObject(t)&&(u||!0===t.showscale||l(t.cmin)&&l(t.cmax)||f(t.colorscale)||k.isPlainObject(t.colorbar))},extractOpts:n,extractScale:m,flipScale:p,makeColorScaleFunc:h,
makeColorScaleFuncFromTrace:function(t,u){return h(m(t),u)}}},{"../../lib":749,"../color":615,"./scales":630,d3:169,"fast-isnumeric":241,tinycolor2:548}],627:[function(b,y,D){D=b("./scales");var n=b("./helpers");y.exports={moduleType:"component",name:"colorscale",attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),handleDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc"),scales:D.scales,defaultScale:D.defaultScale,
getScale:D.get,isValidScale:D.isValid,hasColorscale:n.hasColorscale,extractOpts:n.extractOpts,extractScale:n.extractScale,flipScale:n.flipScale,makeColorScaleFunc:n.makeColorScaleFunc,makeColorScaleFuncFromTrace:n.makeColorScaleFuncFromTrace}},{"./attributes":622,"./calc":623,"./cross_trace_defaults":624,"./defaults":625,"./helpers":626,"./layout_attributes":628,"./layout_defaults":629,"./scales":630}],628:[function(b,y,D){D=b("../../lib/extend").extendFlat;var n=b("./attributes");b=b("./scales").scales;
y.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:D({_isSubplotObj:!0,editType:"calc"},n("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":739,"./attributes":622,"./scales":630}],629:[function(b,y,D){var n=b("../../lib"),m=b("../../plot_api/plot_template"),
p=b("./layout_attributes"),h=b("./defaults");y.exports=function(a,d){function e(t,u){return n.coerce(f,g,p.coloraxis,t,u)}n.coerce(a,d,p,"colorscale.sequential",void 0);n.coerce(a,d,p,"colorscale.sequentialminus",void 0);n.coerce(a,d,p,"colorscale.diverging",void 0);var l=d._colorAxes,k;for(k in l){var c=l[k];if(c[0]){var f=a[k]||{};var g=m.newContainer(d,k,"coloraxis");g._name=k;h(f,g,d,e,{prefix:"",cLetter:"c"})}else{for(var q=0;q<c[2].length;q++)c[2][q]();delete d._colorAxes[k]}}}},{"../../lib":749,
"../../plot_api/plot_template":787,"./defaults":625,"./layout_attributes":628}],630:[function(b,y,D){function n(a){var d=0;if(!Array.isArray(a)||2>a.length||!a[0]||!a[a.length-1]||0!==+a[0][0]||1!==+a[a.length-1][0])return!1;for(var e=0;e<a.length;e++){var l=a[e];if(2!==l.length||+l[0]<d||!m(l[1]).isValid())return!1;d=+l[0]}return!0}var m=b("tinycolor2"),p={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],
[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],
[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],
[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],
[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],
[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],
[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,
"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},h=p.RdBu;y.exports={scales:p,defaultScale:h,get:function(a,d){function e(){try{a=p[a]||JSON.parse(a)}catch(l){a=d}}d||(d=h);if(!a)return d;"string"===typeof a&&(e(),"string"===typeof a&&e());return n(a)?a:d},isValid:function(a){return void 0!==p[a]?!0:n(a)}}},{tinycolor2:548}],631:[function(b,y,D){y.exports=function(n,m,p,h,a){n=(n-p)/(h-p);
m=n+m/(h-p);p=(n+m)/2;return"left"===a||"bottom"===a?n:"center"===a||"middle"===a?p:"right"===a||"top"===a?m:n<2/3-p?n:m>4/3-p?m:p}},{}],632:[function(b,y,D){var n=b("../../lib"),m=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];y.exports=function(p,h,a,d){p="left"===a?0:"center"===a?1:"right"===a?2:n.constrain(Math.floor(3*p),0,2);h="bottom"===d?0:"middle"===d?1:"top"===d?2:n.constrain(Math.floor(3*h),0,2);return m[h][p]}},{"../../lib":749}],
633:[function(b,y,D){D.selectMode=function(n){return"lasso"===n||"select"===n};D.drawMode=function(n){return"drawclosedpath"===n||"drawopenpath"===n||"drawline"===n||"drawrect"===n||"drawcircle"===n};D.openMode=function(n){return"drawline"===n||"drawopenpath"===n};D.rectMode=function(n){return"select"===n||"drawline"===n||"drawrect"===n||"drawcircle"===n};D.freeMode=function(n){return"lasso"===n||"drawclosedpath"===n||"drawopenpath"===n};D.selectingOrDrawing=function(n){return D.freeMode(n)||D.rectMode(n)}},
{}],634:[function(b,y,D){function n(){var k=document.createElement("div");k.className="dragcover";var c=k.style;c.position="fixed";c.left=0;c.right=0;c.top=0;c.bottom=0;c.zIndex=999999999;c.background="none";document.body.appendChild(k);return k}function m(k){return p(k.changedTouches?k.changedTouches[0]:k,document.body)}var p=b("mouse-event-offset"),h=b("has-hover"),a=b("has-passive-events"),d=b("../../lib").removeElement,e=b("../../plots/cartesian/constants"),l=y.exports={};l.align=b("./align");
l.getCursor=b("./cursor");b=b("./unhover");l.unhover=b.wrapped;l.unhoverRaw=b.raw;l.init=function(k){function c(K,N,H){Math.abs(K)<H&&(K=0);Math.abs(N)<H&&(N=0);return[K,N]}function f(K){t._dragged=!1;t._dragging=!0;var N=m(K);E=N[0];F=N[1];G=K.target;v=K;I=2===K.buttons||K.ctrlKey;"undefined"===typeof K.clientX&&"undefined"===typeof K.clientY&&(K.clientX=E,K.clientY=F);z=(new Date).getTime();z-t._mouseDownTime<w?u+=1:(u=1,t._mouseDownTime=z);k.prepFn&&k.prepFn(K,E,F);h&&!I?(C=n(),C.style.cursor=
window.getComputedStyle(x).cursor):h||(C=document,B=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(x).cursor);document.addEventListener("mouseup",q);document.addEventListener("touchend",q);!1!==k.dragmode&&(K.preventDefault(),document.addEventListener("mousemove",g),document.addEventListener("touchmove",g,{passive:!1}))}function g(K){K.preventDefault();K=m(K);var N=J(K[0]-E,K[1]-F,k.minDrag||e.MINDRAG);K=N[0];N=N[1];if(K||N)t._dragged=
!0,l.unhover(t);t._dragged&&k.moveFn&&!I&&(t._dragdata={element:x,dx:K,dy:N},k.moveFn(K,N))}function q(K){delete t._dragdata;!1!==k.dragmode&&(K.preventDefault(),document.removeEventListener("mousemove",g),document.removeEventListener("touchmove",g));document.removeEventListener("mouseup",q);document.removeEventListener("touchend",q);h?d(C):B&&(C.documentElement.style.cursor=B,B=null);if(t._dragging){t._dragging=!1;(new Date).getTime()-t._mouseDownTime>w&&(u=Math.max(u-1,1));if(t._dragged)k.doneFn&&
k.doneFn();else if(k.clickFn&&k.clickFn(u,v),!I){try{var N=new MouseEvent("click",K)}catch(L){var H=m(K);N=document.createEvent("MouseEvents");N.initMouseEvent("click",K.bubbles,K.cancelable,K.view,K.detail,K.screenX,K.screenY,H[0],H[1],K.ctrlKey,K.altKey,K.shiftKey,K.metaKey,K.button,K.relatedTarget)}G.dispatchEvent(N)}t._dragging=!1}t._dragged=!1}var t=k.gd,u=1,w=t._context.doubleClickDelay,x=k.element,E,F,z,B,C,v,G,I;t._mouseDownTime||(t._mouseDownTime=0);x.style.pointerEvents="all";x.onmousedown=
f;a?(x._ontouchstart&&x.removeEventListener("touchstart",x._ontouchstart),x._ontouchstart=f,x.addEventListener("touchstart",f,{passive:!1})):x.ontouchstart=f;var J=k.clampFn||c};l.coverSlip=n},{"../../lib":749,"../../plots/cartesian/constants":803,"./align":631,"./cursor":632,"./unhover":635,"has-hover":414,"has-passive-events":415,"mouse-event-offset":458}],635:[function(b,y,D){var n=b("../../lib/events"),m=b("../../lib/throttle"),p=b("../../lib/dom").getGraphDiv,h=b("../fx/constants"),a=y.exports=
{};a.wrapped=function(d,e,l){d=p(d);d._fullLayout&&m.clear(d._fullLayout._uid+h.HOVERID);a.raw(d,e,l)};a.raw=function(d,e){var l=d._fullLayout,k=d._hoverdata;e||(e={});e.target&&!1===n.triggerHandler(d,"plotly_beforehover",e)||(l._hoverlayer.selectAll("g").remove(),l._hoverlayer.selectAll("line").remove(),l._hoverlayer.selectAll("circle").remove(),d._hoverdata=void 0,e.target&&k&&d.emit("plotly_unhover",{event:e,points:k}))}},{"../../lib/dom":737,"../../lib/events":738,"../../lib/throttle":774,"../fx/constants":649}],
636:[function(b,y,D){D.dash={valType:"string",values:"solid dot dash longdash dashdot longdashdot".split(" "),dflt:"solid",editType:"style"}},{}],637:[function(b,y,D){function n(Q,S){return B.symbolFuncs[Q%100](S)+(200<=Q?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}function m(Q,S,O,U){var X=e.select(Q.node().parentNode),da=-1!==S.indexOf("top")?"top":-1!==S.indexOf("bottom")?"bottom":"middle";S=-1!==S.indexOf("left")?"end":-1!==S.indexOf("right")?"start":"middle";var ea=U?U/.8+1:0,ca=(t.lineCount(Q)-1)*w+1;
U=J[S]*ea;O=.75*O+J[da]*ea+(J[da]-1)*ca*O/2;Q.attr("text-anchor",S);X.attr("transform","translate("+U+","+O+")")}function p(Q,S){Q=Q.ts||S.textfont.size;return l(Q)&&0<Q?Q:0}function h(Q,S,O,U){var X=Q[0]-S[0],da=Q[1]-S[1],ea=O[0]-S[0],ca=O[1]-S[1];O=Math.pow(X*X+da*da,.25);Q=Math.pow(ea*ea+ca*ca,.25);X=(Q*Q*X-O*O*ea)*U;U*=Q*Q*da-O*O*ca;da=3*Q*(O+Q);O=3*O*(O+Q);return[[e.round(S[0]+(da&&X/da),2),e.round(S[1]+(da&&U/da),2)],[e.round(S[0]-(O&&X/O),2),e.round(S[1]-(O&&U/O),2)]]}function a(Q){var S=Q.getAttribute("data-unformatted");
if(null!==S)return S+Q.getAttribute("data-math")+Q.getAttribute("text-anchor")+Q.getAttribute("style")}function d(Q,S){if(!Q)return null;S=S._context;return"url('"+(S._exportedPlot?"":S._baseUrl||"")+"#"+Q+"')"}var e=b("d3"),l=b("fast-isnumeric"),k=b("tinycolor2"),c=b("../../registry"),f=b("../color"),g=b("../colorscale"),q=b("../../lib"),t=b("../../lib/svg_text_utils"),u=b("../../constants/xmlns_namespaces"),w=b("../../constants/alignment").LINE_SPACING,x=b("../../constants/interactions").DESELECTDIM,
E=b("../../traces/scatter/subtypes"),F=b("../../traces/scatter/make_bubble_size_func"),z=b("../../components/fx/helpers").appendArrayPointValue,B=y.exports={};B.font=function(Q,S,O,U){q.isPlainObject(S)&&(U=S.color,O=S.size,S=S.family);S&&Q.style("font-family",S);O+1&&Q.style("font-size",O+"px");U&&Q.call(f.fill,U)};B.setPosition=function(Q,S,O){Q.attr("x",S).attr("y",O)};B.setSize=function(Q,S,O){Q.attr("width",S).attr("height",O)};B.setRect=function(Q,S,O,U,X){Q.call(B.setPosition,S,O).call(B.setSize,
U,X)};B.translatePoint=function(Q,S,O,U){O=O.c2p(Q.x);Q=U.c2p(Q.y);if(l(O)&&l(Q)&&S.node())"text"===S.node().nodeName?S.attr("x",O).attr("y",Q):S.attr("transform","translate("+O+","+Q+")");else return!1;return!0};B.translatePoints=function(Q,S,O){Q.each(function(U){var X=e.select(this);B.translatePoint(U,X,S,O)})};B.hideOutsideRangePoint=function(Q,S,O,U,X,da){S.attr("display",O.isPtWithinRange(Q,X)&&U.isPtWithinRange(Q,da)?null:"none")};B.hideOutsideRangePoints=function(Q,S){if(S._hasClipOnAxisFalse){var O=
S.xaxis,U=S.yaxis;Q.each(function(X){X=X[0].trace;var da=X.xcalendar,ea=X.ycalendar;X=c.traceIs(X,"bar-like")?".bartext":".point,.textpoint";Q.selectAll(X).each(function(ca){B.hideOutsideRangePoint(ca,e.select(this),O,U,da,ea)})})}};B.crispRound=function(Q,S,O){return S&&l(S)?Q._context.staticPlot?S:1>S?1:Math.round(S):O||0};B.singleLineStyle=function(Q,S,O,U,X){S.style("fill","none");Q=(((Q||[])[0]||{}).trace||{}).line||{};O=O||Q.width||0;X=X||Q.dash||"";f.stroke(S,U||Q.color);B.dashLine(S,X,O)};
B.lineGroupStyle=function(Q,S,O,U){Q.style("fill","none").each(function(X){X=(((X||[])[0]||{}).trace||{}).line||{};var da=S||X.width||0,ea=U||X.dash||"";e.select(this).call(f.stroke,O||X.color).call(B.dashLine,ea,da)})};B.dashLine=function(Q,S,O){O=+O||0;S=B.dashStyle(S,O);Q.style({"stroke-dasharray":S,"stroke-width":O+"px"})};B.dashStyle=function(Q,S){S=Math.max(+S||1,3);"solid"===Q?Q="":"dot"===Q?Q=S+"px,"+S+"px":"dash"===Q?Q=3*S+"px,"+3*S+"px":"longdash"===Q?Q=5*S+"px,"+5*S+"px":"dashdot"===Q?
Q=3*S+"px,"+S+"px,"+S+"px,"+S+"px":"longdashdot"===Q&&(Q=5*S+"px,"+2*S+"px,"+S+"px,"+2*S+"px");return Q};B.singleFillStyle=function(Q){var S=(((e.select(Q.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;S&&Q.call(f.fill,S)};B.fillGroupStyle=function(Q){Q.style("stroke-width",0).each(function(S){var O=e.select(this);S[0].trace&&O.call(f.fill,S[0].trace.fillcolor)})};var C=b("./symbol_defs");B.symbolNames=[];B.symbolFuncs=[];B.symbolNeedLines={};B.symbolNoDot={};B.symbolNoFill={};B.symbolList=[];
Object.keys(C).forEach(function(Q){var S=C[Q],O=S.n;B.symbolList.push(O,String(O),Q,O+100,String(O+100),Q+"-open");B.symbolNames[O]=Q;B.symbolFuncs[O]=S.f;S.needLine&&(B.symbolNeedLines[O]=!0);S.noDot?B.symbolNoDot[O]=!0:B.symbolList.push(O+200,String(O+200),Q+"-dot",O+300,String(O+300),Q+"-open-dot");S.noFill&&(B.symbolNoFill[O]=!0)});var v=B.symbolNames.length;B.symbolNumber=function(Q){if(l(Q))Q=+Q;else if("string"===typeof Q){var S=0;0<Q.indexOf("-open")&&(S=100,Q=Q.replace("-open",""));0<Q.indexOf("-dot")&&
(S+=200,Q=Q.replace("-dot",""));Q=B.symbolNames.indexOf(Q);0<=Q&&(Q+=S)}return Q%100>=v||400<=Q?0:Math.floor(Math.max(Q,0))};b={x1:1,x2:0,y1:0,y2:0};y={x1:0,x2:0,y1:1,y2:0};var G=e.format("~.1f"),I={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:y},verticalreversed:{node:"linearGradient",attrs:y,reversed:!0}};B.gradient=
function(Q,S,O,U,X,da){for(var ea=X.length,ca=I[U],ia=Array(ea),ha=0;ha<ea;ha++)ca.reversed?ia[ea-1-ha]=[G(100*(1-X[ha][0])),X[ha][1]]:ia[ha]=[G(100*X[ha][0]),X[ha][1]];X=S._fullLayout;var fa="g"+X._uid+"-"+O;O=X._defs.select(".gradients").selectAll("#"+fa).data([U+ia.join(";")],q.identity);O.exit().remove();O.enter().append(ca.node).each(function(){var na=e.select(this);ca.attrs&&na.attr(ca.attrs);na.attr("id",fa);na=na.selectAll("stop").data(ia);na.exit().remove();na.enter().append("stop");na.each(function(sa){var ua=
k(sa[1]);e.select(this).attr({offset:sa[0]+"%","stop-color":f.tinyRGB(ua),"stop-opacity":ua.getAlpha()})})});Q.style(da,d(fa,S)).style(da+"-opacity",null);Q="."+e.select(Q.node().parentNode).attr("class").replace(/\s/g,".")+"\x3e."+Q.attr("class").replace(/\s/g,".");X._gradientUrlQueryParts[Q]=1};B.initGradients=function(Q){Q=Q._fullLayout;q.ensureSingle(Q._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove();Q._gradientUrlQueryParts={}};B.pointStyle=function(Q,S,O){if(Q.size()){var U=
B.makePointStyleFns(S);Q.each(function(X){B.singlePointStyle(X,e.select(this),S,U,O)})}};B.singlePointStyle=function(Q,S,O,U,X){var da=O.marker,ea=da.line;S.style("opacity",U.selectedOpacityFn?U.selectedOpacityFn(Q):void 0===Q.mo?da.opacity:Q.mo);if(U.ms2mrc){var ca="various"===Q.ms||"various"===da.size?3:U.ms2mrc(Q.ms);Q.mrc=ca;U.selectedSizeFn&&(ca=Q.mrc=U.selectedSizeFn(Q));var ia=B.symbolNumber(Q.mx||da.symbol)||0;Q.om=100<=ia%200;S.attr("d",n(ia,ca))}ca=!1;if(Q.so){ia=ea.outlierwidth;var ha=
ea.outliercolor;ea=da.outliercolor}else ia=(ea||{}).width,ia=(Q.mlw+1||ia+1||(Q.trace?(Q.trace.marker.line||{}).width:0)+1)-1||0,ha="mlc"in Q?Q.mlcc=U.lineScale(Q.mlc):q.isArrayOrTypedArray(ea.color)?f.defaultLine:ea.color,q.isArrayOrTypedArray(da.color)&&(ca=!0),ea="mc"in Q?Q.mcc=U.markerScale(Q.mc):da.color||"rgba(0,0,0,0)",U.selectedColorFn&&(ea=U.selectedColorFn(Q));if(Q.om)S.call(f.stroke,ea).style({"stroke-width":(ia||1)+"px",fill:"none"});else{S.style("stroke-width",(Q.isBlank?0:ia)+"px");
var fa=da.gradient;(U=Q.mgt)?ca=!0:U=fa&&fa.type;Array.isArray(U)&&(U=U[0],I[U]||(U=0));U&&"none"!==U?((da=Q.mgc)?ca=!0:da=fa.color,O=O.uid,ca&&(O+="-"+Q.i),B.gradient(S,X,O,U,[[0,da],[1,ea]],"fill")):f.fill(S,ea);ia&&f.stroke(S,ha)}};B.makePointStyleFns=function(Q){var S={},O=Q.marker;S.markerScale=B.tryColorscale(O,"");S.lineScale=B.tryColorscale(O,"line");c.traceIs(Q,"symbols")&&(S.ms2mrc=E.isBubble(Q)?F(Q):function(){return(O.size||6)/2});Q.selectedpoints&&q.extendFlat(S,B.makeSelectedPointStyleFns(Q));
return S};B.makeSelectedPointStyleFns=function(Q){var S={},O=Q.marker||{},U=(Q.selected||{}).marker||{},X=(Q.unselected||{}).marker||{},da=U.opacity,ea=X.opacity,ca=void 0!==da,ia=void 0!==ea;if(q.isArrayOrTypedArray(O.opacity)||ca||ia)S.selectedOpacityFn=function(ma){var pa=void 0===ma.mo?O.opacity:ma.mo;return ma.selected?ca?da:pa:ia?ea:x*pa};var ha=O.color,fa=U.color,na=X.color;if(fa||na)S.selectedColorFn=function(ma){var pa=ma.mcc||ha;return ma.selected?fa||pa:na||pa};var sa=O.size,ua=U.size,
ta=X.size,oa=void 0!==ua,va=void 0!==ta;c.traceIs(Q,"symbols")&&(oa||va)&&(S.selectedSizeFn=function(ma){var pa=ma.mrc||sa/2;return ma.selected?oa?ua/2:pa:va?ta/2:pa});return S};B.makeSelectedTextStyleFns=function(Q){var S={},O=(Q.textfont||{}).color,U=((Q.selected||{}).textfont||{}).color,X=((Q.unselected||{}).textfont||{}).color;S.selectedTextColorFn=function(da){var ea=da.tc||O;return da.selected?U||ea:X?X:U?ea:f.addOpacity(ea,x)};return S};B.selectedPointStyle=function(Q,S){if(Q.size()&&S.selectedpoints){var O=
B.makeSelectedPointStyleFns(S),U=S.marker||{},X=[];O.selectedOpacityFn&&X.push(function(da,ea){da.style("opacity",O.selectedOpacityFn(ea))});O.selectedColorFn&&X.push(function(da,ea){f.fill(da,O.selectedColorFn(ea))});O.selectedSizeFn&&X.push(function(da,ea){var ca=ea.mx||U.symbol||0,ia=O.selectedSizeFn(ea);da.attr("d",n(B.symbolNumber(ca),ia));ea.mrc2=ia});X.length&&Q.each(function(da){for(var ea=e.select(this),ca=0;ca<X.length;ca++)X[ca](ea,da)})}};B.tryColorscale=function(Q,S){if(Q=S?q.nestedProperty(Q,
S).get():Q)if(S=Q.color,(Q.colorscale||Q._colorAx)&&q.isArrayOrTypedArray(S))return g.makeColorScaleFuncFromTrace(Q);return q.identity};var J={start:1,end:-1,middle:0,bottom:1,top:-1};B.textPointStyle=function(Q,S,O){if(Q.size()){if(S.selectedpoints)var U=B.makeSelectedTextStyleFns(S).selectedTextColorFn;var X=S.texttemplate,da=O._fullLayout;Q.each(function(ea){var ca=e.select(this),ia=X?q.extractOption(ea,S,"txt","texttemplate"):q.extractOption(ea,S,"tx","text");if(ia||0===ia){if(X){var ha=S._module.formatLabels?
S._module.formatLabels(ea,S,da):{},fa={};z(fa,S,ea.i);ia=q.texttemplateString(ia,ha,da._d3locale,fa,ea,S._meta||{})}ha=ea.tp||S.textposition;fa=p(ea,S);var na=U?U(ea):ea.tc||S.textfont.color;ca.call(B.font,ea.tf||S.textfont.family,fa,na).text(ia).call(t.convertToTspans,O).call(m,ha,fa,ea.mrc)}else ca.remove()})}};B.selectedTextStyle=function(Q,S){if(Q.size()&&S.selectedpoints){var O=B.makeSelectedTextStyleFns(S);Q.each(function(U){var X=e.select(this),da=O.selectedTextColorFn(U),ea=U.tp||S.textposition,
ca=p(U,S);f.fill(X,da);m(X,ea,ca,U.mrc2||U.mrc)})}};B.smoothopen=function(Q,S){if(3>Q.length)return"M"+Q.join("L");var O="M"+Q[0],U=[],X;for(X=1;X<Q.length-1;X++)U.push(h(Q[X-1],Q[X],Q[X+1],S));O+="Q"+U[0][0]+" "+Q[1];for(X=2;X<Q.length-1;X++)O+="C"+U[X-2][1]+" "+U[X-1][0]+" "+Q[X];return O+="Q"+U[Q.length-3][1]+" "+Q[Q.length-1]};B.smoothclosed=function(Q,S){if(3>Q.length)return"M"+Q.join("L")+"Z";var O="M"+Q[0],U=Q.length-1,X=[h(Q[U],Q[0],Q[1],S)],da;for(da=1;da<U;da++)X.push(h(Q[da-1],Q[da],Q[da+
1],S));X.push(h(Q[U-1],Q[U],Q[0],S));for(da=1;da<=U;da++)O+="C"+X[da-1][1]+" "+X[da][0]+" "+Q[da];return O+="C"+X[U][1]+" "+X[0][0]+" "+Q[0]+"Z"};var K={hv:function(Q,S){return"H"+e.round(S[0],2)+"V"+e.round(S[1],2)},vh:function(Q,S){return"V"+e.round(S[1],2)+"H"+e.round(S[0],2)},hvh:function(Q,S){return"H"+e.round((Q[0]+S[0])/2,2)+"V"+e.round(S[1],2)+"H"+e.round(S[0],2)},vhv:function(Q,S){return"V"+e.round((Q[1]+S[1])/2,2)+"H"+e.round(S[0],2)+"V"+e.round(S[1],2)}},N=function(Q,S){return"L"+e.round(S[0],
2)+","+e.round(S[1],2)};B.steps=function(Q){var S=K[Q]||N;return function(O){for(var U="M"+e.round(O[0][0],2)+","+e.round(O[0][1],2),X=1;X<O.length;X++)U+=S(O[X-1],O[X]);return U}};B.makeTester=function(){var Q=q.ensureSingleById(e.select("body"),"svg","js-plotly-tester",function(O){O.attr(u.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),S=q.ensureSingle(Q,"path","js-reference-point",function(O){O.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,
fill:"black"})});B.tester=Q;B.testref=S};B.savedBBoxes={};var H=0;B.bBox=function(Q,S,O){O||(O=a(Q));var U;if(O){if(U=B.savedBBoxes[O])return q.extendFlat({},U)}else if(1===Q.childNodes.length){var X=Q.childNodes[0];if(O=a(X)){U=+X.getAttribute("x")||0;var da=+X.getAttribute("y")||0,ea=X.getAttribute("transform");if(!ea)return O=B.bBox(X,!1,O),U&&(O.left+=U,O.right+=U),da&&(O.top+=da,O.bottom+=da),O;O+="~"+U+"~"+da+"~"+ea;if(U=B.savedBBoxes[O])return q.extendFlat({},U)}}if(!S){var ca=B.tester.node();
Q=Q.cloneNode(!0);ca.appendChild(Q)}e.select(Q).attr("transform",null).call(t.positionText,0,0);U=Q.getBoundingClientRect();da=B.testref.node().getBoundingClientRect();S||ca.removeChild(Q);S={height:U.height,width:U.width,left:U.left-da.left,top:U.top-da.top,right:U.right-da.left,bottom:U.bottom-da.top};1E4<=H&&(B.savedBBoxes={},H=0);O&&(B.savedBBoxes[O]=S);H++;return q.extendFlat({},S)};B.setClipUrl=function(Q,S,O){Q.attr("clip-path",d(S,O))};B.getTranslate=function(Q){Q=(Q[Q.attr?"attr":"getAttribute"]("transform")||
"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(S,O,U){return[O,U].join(" ")}).split(" ");return{x:+Q[0]||0,y:+Q[1]||0}};B.setTranslate=function(Q,S,O){var U=Q.attr?"attr":"setAttribute",X=Q[Q.attr?"attr":"getAttribute"]("transform")||"";S=S||0;O=O||0;X=X.replace(/(\btranslate\(.*?\);?)/,"").trim();X=(X+(" translate("+S+", "+O+")")).trim();Q[U]("transform",X);return X};B.getScale=function(Q){Q=(Q[Q.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,
function(S,O,U){return[O,U].join(" ")}).split(" ");return{x:+Q[0]||1,y:+Q[1]||1}};B.setScale=function(Q,S,O){var U=Q.attr?"attr":"setAttribute",X=Q[Q.attr?"attr":"getAttribute"]("transform")||"";S=S||1;O=O||1;X=X.replace(/(\bscale\(.*?\);?)/,"").trim();X=(X+(" scale("+S+", "+O+")")).trim();Q[U]("transform",X);return X};var L=/\s*sc.*/;B.setPointGroupScale=function(Q,S,O){S=S||1;O=O||1;if(Q){var U=1===S&&1===O?"":" scale("+S+","+O+")";Q.each(function(){var X=(this.getAttribute("transform")||"").replace(L,
"");X+=U;X=X.trim();this.setAttribute("transform",X)})}};var P=/translate\([^)]*\)\s*$/;B.setTextPointsScale=function(Q,S,O){Q&&Q.each(function(){var U=e.select(this),X=U.select("text");if(X.node()){var da=parseFloat(X.attr("x")||0);var ea=parseFloat(X.attr("y")||0);X=(U.attr("transform")||"").match(P);da=1===S&&1===O?[]:["translate("+da+","+ea+")","scale("+S+","+O+")","translate("+-da+","+-ea+")"];X&&da.push(X);U.attr("transform",da.join(" "))}})}},{"../../components/fx/helpers":651,"../../constants/alignment":717,
"../../constants/interactions":723,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../lib/svg_text_utils":773,"../../registry":880,"../../traces/scatter/make_bubble_size_func":1172,"../../traces/scatter/subtypes":1179,"../color":615,"../colorscale":627,"./symbol_defs":638,d3:169,"fast-isnumeric":241,tinycolor2:548}],638:[function(b,y,D){var n=b("d3");y.exports={circle:{n:0,f:function(m){m=n.round(m,2);return"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"}},square:{n:1,
f:function(m){m=n.round(m,2);return"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"}},diamond:{n:2,f:function(m){m=n.round(1.3*m,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"Z"}},cross:{n:3,f:function(m){var p=n.round(.4*m,2);m=n.round(1.2*m,2);return"M"+m+","+p+"H"+p+"V"+m+"H-"+p+"V"+p+"H-"+m+"V-"+p+"H-"+p+"V-"+m+"H"+p+"V-"+p+"H"+m+"Z"}},x:{n:4,f:function(m){m=n.round(.8*m/Math.sqrt(2),2);var p="l"+m+","+m,h="l"+m+",-"+m,a="l-"+m+",-"+m,d="l-"+m+","+m;return"M0,"+m+p+h+a+h+a+d+a+d+p+d+p+"Z"}},"triangle-up":{n:5,
f:function(m){var p=n.round(2*m/Math.sqrt(3),2),h=n.round(m/2,2);m=n.round(m,2);return"M-"+p+","+h+"H"+p+"L0,-"+m+"Z"}},"triangle-down":{n:6,f:function(m){var p=n.round(2*m/Math.sqrt(3),2),h=n.round(m/2,2);m=n.round(m,2);return"M-"+p+",-"+h+"H"+p+"L0,"+m+"Z"}},"triangle-left":{n:7,f:function(m){var p=n.round(2*m/Math.sqrt(3),2),h=n.round(m/2,2);m=n.round(m,2);return"M"+h+",-"+p+"V"+p+"L-"+m+",0Z"}},"triangle-right":{n:8,f:function(m){var p=n.round(2*m/Math.sqrt(3),2),h=n.round(m/2,2);m=n.round(m,
2);return"M-"+h+",-"+p+"V"+p+"L"+m+",0Z"}},"triangle-ne":{n:9,f:function(m){var p=n.round(.6*m,2);m=n.round(1.2*m,2);return"M-"+m+",-"+p+"H"+p+"V"+m+"Z"}},"triangle-se":{n:10,f:function(m){var p=n.round(.6*m,2);m=n.round(1.2*m,2);return"M"+p+",-"+m+"V"+p+"H-"+m+"Z"}},"triangle-sw":{n:11,f:function(m){var p=n.round(.6*m,2);m=n.round(1.2*m,2);return"M"+m+","+p+"H-"+p+"V-"+m+"Z"}},"triangle-nw":{n:12,f:function(m){var p=n.round(.6*m,2);m=n.round(1.2*m,2);return"M-"+p+","+m+"V-"+p+"H"+m+"Z"}},pentagon:{n:13,
f:function(m){var p=n.round(.951*m,2),h=n.round(.588*m,2),a=n.round(-m,2),d=n.round(-.309*m,2);m=n.round(.809*m,2);return"M"+p+","+d+"L"+h+","+m+"H-"+h+"L-"+p+","+d+"L0,"+a+"Z"}},hexagon:{n:14,f:function(m){var p=n.round(m,2),h=n.round(m/2,2);m=n.round(m*Math.sqrt(3)/2,2);return"M"+m+",-"+h+"V"+h+"L0,"+p+"L-"+m+","+h+"V-"+h+"L0,-"+p+"Z"}},hexagon2:{n:15,f:function(m){var p=n.round(m,2),h=n.round(m/2,2);m=n.round(m*Math.sqrt(3)/2,2);return"M-"+h+","+m+"H"+h+"L"+p+",0L"+h+",-"+m+"H-"+h+"L-"+p+",0Z"}},
octagon:{n:16,f:function(m){var p=n.round(.924*m,2);m=n.round(.383*m,2);return"M-"+m+",-"+p+"H"+m+"L"+p+",-"+m+"V"+m+"L"+m+","+p+"H-"+m+"L-"+p+","+m+"V-"+m+"Z"}},star:{n:17,f:function(m){var p=1.4*m;m=n.round(.225*p,2);var h=n.round(.951*p,2),a=n.round(.363*p,2),d=n.round(.588*p,2),e=n.round(-p,2),l=n.round(-.309*p,2),k=n.round(.118*p,2),c=n.round(.809*p,2);p=n.round(.382*p,2);return"M"+m+","+l+"H"+h+"L"+a+","+k+"L"+d+","+c+"L0,"+p+"L-"+d+","+c+"L-"+a+","+k+"L-"+h+","+l+"H-"+m+"L0,"+e+"Z"}},hexagram:{n:18,
f:function(m){var p=n.round(.66*m,2),h=n.round(.38*m,2);m=n.round(.76*m,2);return"M-"+m+",0l-"+h+",-"+p+"h"+m+"l"+h+",-"+p+"l"+h+","+p+"h"+m+"l-"+h+","+p+"l"+h+","+p+"h-"+m+"l-"+h+","+p+"l-"+h+",-"+p+"h-"+m+"Z"}},"star-triangle-up":{n:19,f:function(m){var p=n.round(m*Math.sqrt(3)*.8,2),h=n.round(.8*m,2),a=n.round(1.6*m,2);m=n.round(4*m,2);m="A "+m+","+m+" 0 0 1 ";return"M-"+p+","+h+m+p+","+h+m+"0,-"+a+m+"-"+p+","+h+"Z"}},"star-triangle-down":{n:20,f:function(m){var p=n.round(m*Math.sqrt(3)*.8,2),
h=n.round(.8*m,2),a=n.round(1.6*m,2);m=n.round(4*m,2);m="A "+m+","+m+" 0 0 1 ";return"M"+p+",-"+h+m+"-"+p+",-"+h+m+"0,"+a+m+p+",-"+h+"Z"}},"star-square":{n:21,f:function(m){var p=n.round(1.1*m,2);m=n.round(2*m,2);m="A "+m+","+m+" 0 0 1 ";return"M-"+p+",-"+p+m+"-"+p+","+p+m+p+","+p+m+p+",-"+p+m+"-"+p+",-"+p+"Z"}},"star-diamond":{n:22,f:function(m){var p=n.round(1.4*m,2);m=n.round(1.9*m,2);m="A "+m+","+m+" 0 0 1 ";return"M-"+p+",0"+m+"0,"+p+m+p+",0"+m+"0,-"+p+m+"-"+p+",0Z"}},"diamond-tall":{n:23,f:function(m){var p=
n.round(.7*m,2);m=n.round(1.4*m,2);return"M0,"+m+"L"+p+",0L0,-"+m+"L-"+p+",0Z"}},"diamond-wide":{n:24,f:function(m){var p=n.round(1.4*m,2);m=n.round(.7*m,2);return"M0,"+m+"L"+p+",0L0,-"+m+"L-"+p+",0Z"}},hourglass:{n:25,f:function(m){m=n.round(m,2);return"M"+m+","+m+"H-"+m+"L"+m+",-"+m+"H-"+m+"Z"},noDot:!0},bowtie:{n:26,f:function(m){m=n.round(m,2);return"M"+m+","+m+"V-"+m+"L-"+m+","+m+"V-"+m+"Z"},noDot:!0},"circle-cross":{n:27,f:function(m){m=n.round(m,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+
",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(m){var p=n.round(m,2);m=n.round(m/Math.sqrt(2),2);return"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m+"M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(m){m=n.round(m,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(m){m=n.round(m,2);return"M"+
m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(m){m=n.round(1.3*m,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM0,-"+m+"V"+m+"M-"+m+",0H"+m},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(m){var p=n.round(1.3*m,2);m=n.round(.65*m,2);return"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"ZM-"+m+",-"+m+"L"+m+","+m+"M-"+m+","+m+"L"+m+",-"+m},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(m){m=n.round(1.4*m,2);return"M0,"+
m+"V-"+m+"M"+m+",0H-"+m},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(m){m=n.round(m,2);return"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(m){var p=n.round(1.2*m,2);m=n.round(.85*m,2);return"M0,"+p+"V-"+p+"M"+p+",0H-"+p+"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(m){var p=n.round(m/2,2);m=n.round(m,2);return"M"+p+","+m+"V-"+m+"m-"+m+",0V"+m+"M"+m+","+p+"H-"+
m+"m0,-"+m+"H"+m},needLine:!0,noFill:!0},"y-up":{n:37,f:function(m){var p=n.round(1.2*m,2),h=n.round(1.6*m,2);m=n.round(.8*m,2);return"M-"+p+","+m+"L0,0M"+p+","+m+"L0,0M0,-"+h+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(m){var p=n.round(1.2*m,2),h=n.round(1.6*m,2);m=n.round(.8*m,2);return"M-"+p+",-"+m+"L0,0M"+p+",-"+m+"L0,0M0,"+h+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(m){var p=n.round(1.2*m,2),h=n.round(1.6*m,2);m=n.round(.8*m,2);return"M"+m+","+p+
"L0,0M"+m+",-"+p+"L0,0M-"+h+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(m){var p=n.round(1.2*m,2),h=n.round(1.6*m,2);m=n.round(.8*m,2);return"M-"+m+","+p+"L0,0M-"+m+",-"+p+"L0,0M"+h+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(m){m=n.round(1.4*m,2);return"M"+m+",0H-"+m},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(m){m=n.round(1.4*m,2);return"M0,"+m+"V-"+m},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(m){m=n.round(m,2);return"M"+
m+",-"+m+"L-"+m+","+m},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(m){m=n.round(m,2);return"M"+m+","+m+"L-"+m+",-"+m},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(m){var p=n.round(m,2);m=n.round(2*m,2);return"M0,0L-"+p+","+m+"H"+p+"Z"},noDot:!0},"arrow-down":{n:46,f:function(m){var p=n.round(m,2);m=n.round(2*m,2);return"M0,0L-"+p+",-"+m+"H"+p+"Z"},noDot:!0},"arrow-left":{n:47,f:function(m){var p=n.round(2*m,2);m=n.round(m,2);return"M0,0L"+p+",-"+m+"V"+m+"Z"},noDot:!0},
"arrow-right":{n:48,f:function(m){var p=n.round(2*m,2);m=n.round(m,2);return"M0,0L-"+p+",-"+m+"V"+m+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(m){var p=n.round(m,2);m=n.round(2*m,2);return"M-"+p+",0H"+p+"M0,0L-"+p+","+m+"H"+p+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(m){var p=n.round(m,2);m=n.round(2*m,2);return"M-"+p+",0H"+p+"M0,0L-"+p+",-"+m+"H"+p+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(m){var p=n.round(2*m,2);m=n.round(m,2);return"M0,-"+m+"V"+m+"M0,0L"+
p+",-"+m+"V"+m+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(m){var p=n.round(2*m,2);m=n.round(m,2);return"M0,-"+m+"V"+m+"M0,0L-"+p+",-"+m+"V"+m+"Z"},needLine:!0,noDot:!0}}},{d3:169}],639:[function(b,y,D){y.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},
value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",
editType:"style"}}}},{}],640:[function(b,y,D){function n(e,l,k,c){var f=l["error_"+c]||{},g=[];if(f.visible&&-1!==["linear","log"].indexOf(k.type)){f=d(f);for(var q=0;q<e.length;q++){var t=e[q],u=t.i;if(void 0===u)u=q;else if(null===u)continue;var w=t[c];if(m(k.c2l(w))){var x=f(w,u);m(x[0])&&m(x[1])&&(u=t[c+"s"]=w-x[0],t=t[c+"h"]=w+x[1],g.push(u,t))}}e=l._extremes[k._id];k=h.findExtremes(k,g,a.extendFlat({tozero:e.opts.tozero},{padded:!0}));e.min=e.min.concat(k.min);e.max=e.max.concat(k.max)}}var m=
b("fast-isnumeric"),p=b("../../registry"),h=b("../../plots/cartesian/axes"),a=b("../../lib"),d=b("./compute_error");y.exports=function(e){for(var l=e.calcdata,k=0;k<l.length;k++){var c=l[k],f=c[0].trace;if(!0===f.visible&&p.traceIs(f,"errorBarsOK")){var g=h.getFromId(e,f.xaxis),q=h.getFromId(e,f.yaxis);n(c,f,g,"x");n(c,f,q,"y")}}}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"./compute_error":641,"fast-isnumeric":241}],641:[function(b,y,D){function n(m,p){if("percent"===
m)return function(h){return Math.abs(h*p/100)};if("constant"===m)return function(){return Math.abs(p)};if("sqrt"===m)return function(h){return Math.sqrt(Math.abs(h))}}y.exports=function(m){var p=m.type,h=m.symmetric;if("data"===p){var a=m.array||[];if(h)return function(k,c){k=+a[c];return[k,k]};var d=m.arrayminus||[];return function(k,c){k=+a[c];c=+d[c];return isNaN(k)&&isNaN(c)?[NaN,NaN]:[c||0,k||0]}}var e=n(p,m.value),l=n(p,m.valueminus);return h||void 0===m.valueminus?function(k){k=e(k);return[k,
k]}:function(k){return[l(k),e(k)]}}},{}],642:[function(b,y,D){var n=b("fast-isnumeric"),m=b("../../registry"),p=b("../../lib"),h=b("../../plot_api/plot_template"),a=b("./attributes");y.exports=function(d,e,l,k){function c(t,u){return p.coerce(q,g,a,t,u)}var f="error_"+k.axis,g=h.newContainer(e,f),q=d[f]||{};if(!1!==c("visible",void 0!==q.array||void 0!==q.value||"sqrt"===q.type)){d=c("type","array"in q?"data":"percent");f=!0;"sqrt"!==d&&(f=c("symmetric",!(("data"===d?"arrayminus":"valueminus")in q)));
if("data"===d)c("array"),c("traceref"),f||(c("arrayminus"),c("tracerefminus"));else if("percent"===d||"constant"===d)c("value"),f||c("valueminus");d="copy_"+k.inherit+"style";k.inherit&&(e["error_"+k.inherit]||{}).visible&&c(d,!(q.color||n(q.thickness)||n(q.width)));k.inherit&&g[d]||(c("color",l),c("thickness"),c("width",m.traceIs(e,"gl3d")?0:4))}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../registry":880,"./attributes":639,"fast-isnumeric":241}],643:[function(b,y,D){var n=b("../../lib");
D=b("../../plot_api/edit_types").overrideAll;var m=b("./attributes"),p={error_x:n.extendFlat({},m),error_y:n.extendFlat({},m)};delete p.error_x.copy_zstyle;delete p.error_y.copy_zstyle;delete p.error_y.copy_ystyle;n={error_x:n.extendFlat({},m),error_y:n.extendFlat({},m),error_z:n.extendFlat({},m)};delete n.error_x.copy_ystyle;delete n.error_y.copy_ystyle;delete n.error_z.copy_ystyle;delete n.error_z.copy_zstyle;y.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:p,bar:p,histogram:p,
scatter3d:D(n,"calc","nested"),scattergl:D(p,"calc","nested")}},supplyDefaults:b("./defaults"),calc:b("./calc"),makeComputeError:b("./compute_error"),plot:b("./plot"),style:b("./style"),hoverInfo:function(h,a,d){(a.error_y||{}).visible&&(d.yerr=h.yh-h.y,a.error_y.symmetric||(d.yerrneg=h.y-h.ys));(a.error_x||{}).visible&&(d.xerr=h.xh-h.x,a.error_x.symmetric||(d.xerrneg=h.x-h.xs))}}},{"../../lib":749,"../../plot_api/edit_types":780,"./attributes":639,"./calc":640,"./compute_error":641,"./defaults":642,
"./plot":644,"./style":645}],644:[function(b,y,D){var n=b("d3"),m=b("fast-isnumeric"),p=b("../drawing"),h=b("../../traces/scatter/subtypes");y.exports=function(a,d,e,l){var k,c=e.xaxis,f=e.yaxis,g=l&&0<l.duration;d.each(function(q){var t=q[0].trace,u=t.error_x||{},w=t.error_y||{},x;t.ids&&(x=function(F){return F.id});var E=h.hasMarkers(t)&&0<t.marker.maxdisplayed;w.visible||u.visible||(q=[]);t=n.select(this).selectAll("g.errorbar").data(q,x);t.exit().remove();q.length&&(u.visible||t.selectAll("path.xerror").remove(),
w.visible||t.selectAll("path.yerror").remove(),t.style("opacity",1),q=t.enter().append("g").classed("errorbar",!0),g&&q.style("opacity",0).transition().duration(l.duration).style("opacity",1),p.setClipUrl(t,e.layerClipId,a),t.each(function(F){var z=n.select(this),B=c.c2p(F.x),C=f.c2p(F.y);if(void 0!==F.yh){var v=f.c2p(F.yh);var G=f.c2p(F.ys);if(!m(G)){var I=!0;G=f.c2p(F.ys,!0)}}if(void 0!==F.xh){var J=c.c2p(F.xh);var K=c.c2p(F.xs);if(!m(K)){var N=!0;K=c.c2p(F.xs,!0)}}if(!E||F.vis){F=z.select("path.yerror");
if(w.visible&&m(B)&&m(v)&&m(G)){var H=w.width;B="M"+(B-H)+","+v+"h"+2*H+"m-"+H+",0V"+G;I||(B+="m-"+H+",0h"+2*H);(k=!F.size())?F=z.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):g&&(F=F.transition().duration(l.duration).ease(l.easing));F.attr("d",B)}else F.remove();I=z.select("path.xerror");u.visible&&m(C)&&m(J)&&m(K)?(v=(u.copy_ystyle?w:u).width,B="M"+J+","+(C-v)+"v"+2*v+"m0,-"+v+"H"+K,N||(B+="m0,-"+v+"v"+2*v),(k=!I.size())?I=z.append("path").style("vector-effect",
"non-scaling-stroke").classed("xerror",!0):g&&(I=I.transition().duration(l.duration).ease(l.easing)),I.attr("d",B)):I.remove()}}))})}},{"../../traces/scatter/subtypes":1179,"../drawing":637,d3:169,"fast-isnumeric":241}],645:[function(b,y,D){var n=b("d3"),m=b("../color");y.exports=function(p){p.each(function(h){var a=h[0].trace;h=a.error_y||{};a=a.error_x||{};var d=n.select(this);d.selectAll("path.yerror").style("stroke-width",h.thickness+"px").call(m.stroke,h.color);a.copy_ystyle&&(a=h);d.selectAll("path.xerror").style("stroke-width",
a.thickness+"px").call(m.stroke,a.color)})}},{"../color":615,d3:169}],646:[function(b,y,D){D=b("../../plots/font_attributes");var n=b("./layout_attributes").hoverlabel;b=b("../../lib/extend").extendFlat;y.exports={hoverlabel:{bgcolor:b({},n.bgcolor,{arrayOk:!0}),bordercolor:b({},n.bordercolor,{arrayOk:!0}),font:D({arrayOk:!0,editType:"none"}),align:b({},n.align,{arrayOk:!0}),namelength:b({},n.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":739,"../../plots/font_attributes":825,"./layout_attributes":656}],
647:[function(b,y,D){function n(h,a,d,e){e=e||m.identity;Array.isArray(h)&&(a[0][d]=e(h))}var m=b("../../lib"),p=b("../../registry");y.exports=function(h){function a(f){return function(g){return m.coerceHoverinfo({hoverinfo:g},{_module:f._module},e)}}var d=h.calcdata,e=h._fullLayout;for(h=0;h<d.length;h++){var l=d[h],k=l[0].trace;if(!p.traceIs(k,"pie-like")){var c=p.traceIs(k,"2dMap")?n:m.fillArray;c(k.hoverinfo,l,"hi",a(k));k.hovertemplate&&c(k.hovertemplate,l,"ht");k.hoverlabel&&(c(k.hoverlabel.bgcolor,
l,"hbg"),c(k.hoverlabel.bordercolor,l,"hbc"),c(k.hoverlabel.font.size,l,"hts"),c(k.hoverlabel.font.color,l,"htc"),c(k.hoverlabel.font.family,l,"htf"),c(k.hoverlabel.namelength,l,"hnl"),c(k.hoverlabel.align,l,"hta"))}}}},{"../../lib":749,"../../registry":880}],648:[function(b,y,D){var n=b("../../registry"),m=b("./hover").hover;y.exports=function(p,h,a){function d(){p.emit("plotly_click",{points:p._hoverdata,event:h})}var e=n.getComponentMethod("annotations","onClick")(p,p._hoverdata);void 0!==a&&m(p,
h,a,!0);p._hoverdata&&h&&h.target&&(e&&e.then?e.then(d):d(),h.stopImmediatePropagation&&h.stopImmediatePropagation())}},{"../../registry":880,"./hover":652}],649:[function(b,y,D){y.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],650:[function(b,y,D){var n=b("../../lib"),m=b("./attributes"),p=b("./hoverlabel_defaults");y.exports=function(h,a,d,e){d=n.extendFlat({},e.hoverlabel);a.hovertemplate&&(d.namelength=-1);
p(h,a,function(l,k){return n.coerce(h,a,m,l,k)},d)}},{"../../lib":749,"./attributes":646,"./hoverlabel_defaults":653}],651:[function(b,y,D){function n(d,e){if(Array.isArray(e)){if(Array.isArray(d)&&Array.isArray(d[e[0]]))return d[e[0]][e[1]]}else return d[e]}var m=b("../../lib");D.getSubplot=function(d){return d.subplot||d.xaxis+d.yaxis||d.geo};D.isTraceInSubplots=function(d,e){if("splom"===d.type){var l=d.xaxes||[];d=d.yaxes||[];for(var k=0;k<l.length;k++)for(var c=0;c<d.length;c++)if(-1!==e.indexOf(l[k]+
d[c]))return!0;return!1}return-1!==e.indexOf(D.getSubplot(d))};D.flat=function(d,e){for(var l=Array(d.length),k=0;k<d.length;k++)l[k]=e;return l};D.p2c=function(d,e){for(var l=Array(d.length),k=0;k<d.length;k++)l[k]=d[k].p2c(e);return l};D.getDistanceFunction=function(d,e,l,k){return"closest"===d?k||D.quadrature(e,l):"x"===d.charAt(0)?e:l};D.getClosest=function(d,e,l){if(!1!==l.index)0<=l.index&&l.index<d.length?l.distance=0:l.index=!1;else for(var k=0;k<d.length;k++){var c=e(d[k]);c<=l.distance&&
(l.index=k,l.distance=c)}return l};D.inbox=function(d,e,l){return 0>d*e||0===d?l:Infinity};D.quadrature=function(d,e){return function(l){var k=d(l);l=e(l);return Math.sqrt(k*k+l*l)}};D.makeEventData=function(d,e,l){var k="index"in d?d.index:d.pointNumber,c={data:e._input,fullData:e,curveNumber:e.index,pointNumber:k};if(e._indexToPoints){var f=e._indexToPoints[k];1===f.length?c.pointIndex=f[0]:c.pointIndices=f}else c.pointIndex=k;e._module.eventData?c=e._module.eventData(c,d,e,l,k):("xVal"in d?c.x=
d.xVal:"x"in d&&(c.x=d.x),"yVal"in d?c.y=d.yVal:"y"in d&&(c.y=d.y),d.xa&&(c.xaxis=d.xa),d.ya&&(c.yaxis=d.ya),void 0!==d.zLabelVal&&(c.z=d.zLabelVal));D.appendArrayPointValue(c,e,k);return c};D.appendArrayPointValue=function(d,e,l){var k=e._arrayAttrs;if(k)for(var c=0;c<k.length;c++){var f=k[c],g=p[f]||f;void 0===d[g]&&(f=m.nestedProperty(e,f).get(),f=n(f,l),void 0!==f&&(d[g]=f))}};D.appendArrayMultiPointValues=function(d,e,l){var k=e._arrayAttrs;if(k)for(var c=0;c<k.length;c++){var f=k[c],g=p[f]||
f;if(void 0===d[g]){f=m.nestedProperty(e,f).get();for(var q=Array(l.length),t=0;t<l.length;t++)q[t]=n(f,l[t]);d[g]=q}}};var p={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"},h={x:!0,y:!0},a={"x unified":!0,"y unified":!0};D.isUnifiedHover=function(d){return"string"!==typeof d?!1:!!a[d]};D.isXYhover=function(d){return"string"!==typeof d?!1:!!h[d]}},{"../../lib":749}],652:[function(b,y,D){function n(O,U,X,da){function ea(Ba,Ma){for(Oa=0;Oa<Ka.length;Oa++)if((kb=
Ka[Oa])&&kb[0]&&kb[0].trace&&(Ia=kb[0].trace,!0===Ia.visible&&0!==Ia._length&&-1===["carpet","contourcarpet"].indexOf(Ia._module.name))){"splom"===Ia.type?(tb=0,mb=ha[tb]):(mb=v.getSubplot(Ia),tb=ha.indexOf(mb));nb=pa;v.isUnifiedHover(nb)&&(nb=nb.charAt(0));ab={cd:kb,trace:Ia,xa:ua[tb],ya:ta[tb],maxHoverDistance:za,maxSpikeDistance:qa,index:!1,distance:Math.min(ib,za),spikeDistance:Infinity,xSpike:void 0,ySpike:void 0,color:F.defaultLine,name:Ia.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,
yLabelVal:void 0,zLabelVal:void 0,text:void 0};fa[mb]&&(ab.subplot=fa[mb]._subplot);fa._splomScenes&&fa._splomScenes[Ia.uid]&&(ab.scene=fa._splomScenes[Ia.uid]);ra=Ca.length;if("array"===nb){var $a=U[Oa];"pointNumber"in $a?(ab.index=$a.pointNumber,nb="closest"):(nb="","xval"in $a&&(Ta=$a.xval,nb="x"),"yval"in $a&&(fb=$a.yval,nb=nb?"closest":"y"))}else void 0!==Ba&&void 0!==Ma?(Ta=Ba,fb=Ma):(Ta=Va[tb],fb=rb[tb]);if(0!==za)if(Ia._module&&Ia._module.hoverPoints){if($a=Ia._module.hoverPoints(ab,Ta,fb,
nb,fa._hoverlayer))for(var lb,Ra=0;Ra<$a.length;Ra++)lb=$a[Ra],g(lb.x0)&&g(lb.y0)&&Ca.push(e(lb,pa))}else t.log("Unrecognized trace type in hover:",Ia);"closest"===pa&&Ca.length>ra&&(Ca.splice(0,ra),ib=Ca[0].distance);sa&&0!==qa&&0===Ca.length&&(ab.distance=qa,ab.index=!1,($a=Ia._module.hoverPoints(ab,Ta,fb,"closest",fa._hoverlayer))&&($a=$a.filter(function(jb){return jb.spikeDistance<=qa})),$a&&$a.length)&&(lb=$a.filter(function(jb){return jb.xa.showspikes&&"hovered data"!==jb.xa.spikesnap}),lb.length&&
(lb=lb[0],g(lb.x0)&&g(lb.y0)&&(lb=ia(lb),!Ea.vLinePoint||Ea.vLinePoint.spikeDistance>lb.spikeDistance))&&(Ea.vLinePoint=lb),$a=$a.filter(function(jb){return jb.ya.showspikes&&"hovered data"!==jb.ya.spikesnap}),$a.length&&($a=$a[0],g($a.x0)&&g($a.y0)&&(lb=ia($a),!Ea.hLinePoint||Ea.hLinePoint.spikeDistance>lb.spikeDistance))&&(Ea.hLinePoint=lb))}}function ca(Ba,Ma){for(var $a=null,lb=Infinity,Ra,jb=0;jb<Ba.length;jb++)Ra=Ba[jb].spikeDistance,Ra<=lb&&Ra<=Ma&&($a=Ba[jb],lb=Ra);return $a}function ia(Ba){return Ba?
{xa:Ba.xa,ya:Ba.ya,x:void 0!==Ba.xSpike?Ba.xSpike:(Ba.x0+Ba.x1)/2,y:void 0!==Ba.ySpike?Ba.ySpike:(Ba.y0+Ba.y1)/2,distance:Ba.distance,spikeDistance:Ba.spikeDistance,curveNumber:Ba.trace.index,color:Ba.color,pointNumber:Ba.index}:null}X||(X="xy");var ha=Array.isArray(X)?X:[X],fa=O._fullLayout,na=fa._plots||[];X=na[X];var sa=fa._has("cartesian");X&&(X=X.overlays.map(function(Ba){return Ba.id}),ha=ha.concat(X));X=ha.length;for(var ua=Array(X),ta=Array(X),oa=!1,va=0;va<X;va++){var ma=ha[va];if(na[ma])oa=
!0,ua[va]=na[ma].xaxis,ta[va]=na[ma].yaxis;else if(fa[ma]&&fa[ma]._subplot)ma=fa[ma]._subplot,ua[va]=ma.xaxis,ta[va]=ma.yaxis;else{t.warn("Unrecognized subplot: "+ma);return}}var pa=U.hovermode||fa.hovermode;pa&&!oa&&(pa="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(pa)||!O.calcdata||O.querySelector(".zoombox")||O._dragging)return z.unhoverRaw(O,U);var za=-1===fa.hoverdistance?Infinity:fa.hoverdistance,qa=-1===fa.spikedistance?Infinity:fa.spikedistance,Ca=[],Ka=[],Oa,kb,mb,
tb,nb,Ta,fb,ab,ra,Ea={hLinePoint:null,vLinePoint:null};na=!1;if(Array.isArray(U))for(pa="array",va=0;va<U.length;va++){if(kb=O.calcdata[U[va].curveNumber||0]){var Ia=kb[0].trace;"skip"!==kb[0].trace.hoverinfo&&(Ka.push(kb),"h"===Ia.orientation&&(na=!0))}}else{for(Oa=0;Oa<O.calcdata.length;Oa++)kb=O.calcdata[Oa],Ia=kb[0].trace,"skip"!==Ia.hoverinfo&&v.isTraceInSubplots(Ia,ha)&&(Ka.push(kb),"h"===Ia.orientation&&(na=!0));if(U.target){if(!1===u.triggerHandler(O,"plotly_beforehover",U))return;oa=U.target.getBoundingClientRect();
X=U.clientX-oa.left;oa=U.clientY-oa.top;if(0>X||X>ua[0]._length||0>oa||oa>ta[0]._length)return z.unhoverRaw(O,U)}else X="xpx"in U?U.xpx:ua[0]._length/2,oa="ypx"in U?U.ypx:ta[0]._length/2;U.pointerX=X+ua[0]._offset;U.pointerY=oa+ta[0]._offset;var Va="xval"in U?v.flat(ha,U.xval):v.p2c(ua,X);var rb="yval"in U?v.flat(ha,U.yval):v.p2c(ta,oa);if(!g(Va[0])||!g(rb[0]))return t.warn("Fx.hover failed",U,O),z.unhoverRaw(O,U)}var ib=Infinity;ea();X={fullLayout:fa,container:fa._hoverlayer,outerContainer:fa._paperdiv,
event:U};O._spikepoints={vLinePoint:Ea.vLinePoint,hLinePoint:Ea.hLinePoint};sa&&0!==qa&&0!==Ca.length&&(oa=Ca.filter(function(Ba){return Ba.ya.showspikes}),oa=ca(oa,qa),Ea.hLinePoint=ia(oa),oa=Ca.filter(function(Ba){return Ba.xa.showspikes}),oa=ca(oa,qa),Ea.vLinePoint=ia(oa));if(0===Ca.length)return da=z.unhoverRaw(O,U),!sa||null===Ea.hLinePoint&&null===Ea.vLinePoint||l(O,Ea,X),da;sa&&l(O,Ea,X);Ca.sort(function(Ba,Ma){return Ba.distance-Ma.distance});if(v.isXYhover(nb)&&0!==Ca[0].length&&"splom"!==
Ca[0].trace.type){X=Ca[0];oa=X.cd[X.index];va="group"===fa.boxmode||"group"===fa.violinmode;ma=X.xVal;var Na=X.xa;"category"===Na.type&&(ma=Na._categoriesMap[ma]);"date"===Na.type&&(ma=Na.d2c(ma));oa&&oa.t&&oa.t.posLetter===Na._id&&va&&(ma+=oa.t.dPos);var Za=X.yVal;Na=X.ya;"category"===Na.type&&(Za=Na._categoriesMap[Za]);"date"===Na.type&&(Za=Na.d2c(Za));oa&&oa.t&&oa.t.posLetter===Na._id&&va&&(Za+=oa.t.dPos);ea(ma,Za);var eb={};Ca=Ca.filter(function(Ba){Ba=m(Ba);if(!eb[Ba])return eb[Ba]=!0,eb[Ba]})}X=
O._hoverdata;oa=[];for(va=0;va<Ca.length;va++)ma=Ca[va],Na=v.makeEventData(ma,ma.trace,ma.cd),!1!==ma.hovertemplate&&(Za=!1,ma.cd[ma.index]&&ma.cd[ma.index].ht&&(Za=ma.cd[ma.index].ht),ma.hovertemplate=Za||ma.trace.hovertemplate||!1),ma.eventData=[Na],oa.push(Na);O._hoverdata=oa;na="y"===pa&&(1<Ka.length||1<Ca.length)||"closest"===pa&&na&&1<Ca.length;va=F.combine(fa.plot_bgcolor||F.background,fa.paper_bgcolor);va=p(Ca,{hovermode:pa,rotateLabels:na,bgColor:va,container:fa._hoverlayer,outerContainer:fa._paperdiv,
commonLabelOpts:fa.hoverlabel,hoverdistance:fa.hoverdistance},O);v.isUnifiedHover(pa)||(a(va,na?"xa":"ya",fa),d(va,na));U.target&&U.target.tagName&&(na=C.getComponentMethod("annotations","hasClickToShow")(O,oa),x(f.select(U.target),na?"pointer":""));U.target&&!da&&k(O,U,X)&&(X&&O.emit("plotly_unhover",{event:U,points:X}),O.emit("plotly_hover",{event:U,points:O._hoverdata,xaxes:ua,yaxes:ta,xvals:Va,yvals:rb}))}function m(O){return[O.trace.index,O.index,O.x0,O.y0,O.name,O.attr,O.xa,O.ya||""].join()}
function p(O,U,X){function da(Ta){return Ta.filter(function(fb){return void 0!==fb.zLabelVal||(fb[pa]||"").split(" ")[0]===qa})}var ea=X._fullLayout,ca=U.hovermode,ia=U.rotateLabels,ha=U.bgColor,fa=U.container,na=U.outerContainer,sa=U.commonLabelOpts||{},ua=U.fontFamily||G.HOVERFONT,ta=U.fontSize||G.HOVERFONTSIZE,oa=O[0],va=oa.xa,ma=oa.ya,pa="y"===ca.charAt(0)?"yLabel":"xLabel",za=oa[pa],qa=(String(za)||"").split(" ")[0];na=na.node().getBoundingClientRect();var Ca=na.top,Ka=na.width,Oa=na.height,
kb=void 0!==za&&oa.distance<=U.hoverdistance&&("x"===ca||"y"===ca);if(kb){na=!0;var mb,tb;for(mb=0;mb<O.length;mb++)if(na&&void 0===O[mb].zLabel&&(na=!1),tb=O[mb].hoverinfo||O[mb].trace.hoverinfo)if(tb=Array.isArray(tb)?tb:tb.split("+"),-1===tb.indexOf("all")&&-1===tb.indexOf(ca)){kb=!1;break}na&&(kb=!1)}na=fa.selectAll("g.axistext").data(kb?[0]:[]);na.enter().append("g").classed("axistext",!0);na.exit().remove();na.each(function(){var Ta=f.select(this),fb=t.ensureSingle(Ta,"path","",function(Ba){Ba.style({"stroke-width":"1px"})}),
ab=t.ensureSingle(Ta,"text","",function(Ba){Ba.attr("data-notex",1)}),ra=sa.bgcolor||F.defaultLine,Ea=sa.bordercolor||F.contrast(ra),Ia=F.contrast(ra),Va={family:sa.font.family||ua,size:sa.font.size||ta,color:sa.font.color||Ia};fb.style({fill:ra,stroke:Ea});ab.text(za).call(E.font,Va).call(w.positionText,0,0).call(w.convertToTspans,X);Ta.attr("transform","");var rb=ab.node().getBoundingClientRect();if("x"===ca)Ia="top"===va.side?"-":"",ab.attr("text-anchor","middle").call(w.positionText,0,"top"===
va.side?Ca-rb.bottom-P-Q:Ca-rb.top+P+Q),ra=va._offset+(oa.x0+oa.x1)/2,Ea=ma._offset+("top"===va.side?0:ma._length),ab=rb.width/2+Q,ra<ab?(ra=ab,fb.attr("d","M-"+(ab-P)+",0L-"+(ab-2*P)+","+Ia+P+"H"+(Q+rb.width/2)+"v"+Ia+(2*Q+rb.height)+"H-"+ab+"V"+Ia+P+"Z")):ra>ea.width-ab?(ra=ea.width-ab,fb.attr("d","M"+(ab-P)+",0L"+ab+","+Ia+P+"v"+Ia+(2*Q+rb.height)+"H-"+ab+"V"+Ia+P+"H"+(ab-2*P)+"Z")):fb.attr("d","M0,0L"+P+","+Ia+P+"H"+(Q+rb.width/2)+"v"+Ia+(2*Q+rb.height)+"H-"+(Q+rb.width/2)+"V"+Ia+P+"H-"+P+"Z");
else{if("right"===ma.side){Ia="start";var ib=1;var Na="";ra=va._offset+va._length}else Ia="end",ib=-1,Na="-",ra=va._offset;Ea=ma._offset+(oa.y0+oa.y1)/2;ab.attr("text-anchor",Ia);fb.attr("d","M0,0L"+Na+P+","+P+"V"+(Q+rb.height/2)+"h"+Na+(2*Q+rb.width)+"V-"+(Q+rb.height/2)+"H"+Na+P+"V-"+P+"Z");var Za=rb.height/2;Na=Ca-rb.top-Za;fb="clip"+ea._uid+"commonlabel"+ma._id;if(ra<rb.width+2*Q+P){ib="M-"+(P+Q)+"-"+Za+"h-"+(rb.width-Q)+"V"+Za+"h"+(rb.width-Q)+"Z";var eb=rb.width-ra+Q;w.positionText(ab,eb,Na);
"end"===Ia&&ab.selectAll("tspan").each(function(){var Ba=f.select(this),Ma=E.tester.append("text").text(Ba.text()).call(E.font,Va),$a=Ma.node().getBoundingClientRect();Math.round($a.width)<Math.round(rb.width)&&Ba.attr("x",eb-$a.width);Ma.remove()})}else w.positionText(ab,ib*(Q+P),Na),ib=null;Ia=ea._topclips.selectAll("#"+fb).data(ib?[0]:[]);Ia.enter().append("clipPath").attr("id",fb).append("path");Ia.exit().remove();Ia.select("path").attr("d",ib);E.setClipUrl(ab,ib?fb:null,X)}Ta.attr("transform",
"translate("+ra+","+Ea+")");O=da(O)});if(v.isUnifiedHover(ca)){fa.selectAll("g.hovertext").remove();void 0!==za&&oa.distance<=U.hoverdistance&&(O=da(O));if(0===O.length)return;U={};I({showlegend:!0,legend:{title:{text:za,font:ea.hoverlabel.font},font:ea.hoverlabel.font,bgcolor:ea.hoverlabel.bgcolor,bordercolor:ea.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ea.legend?ea.legend.traceorder:void 0,orientation:"v"}},U,X._fullData);U=U.legend;U.entries=[];for(na=0;na<O.length;na++){tb=
h(O[na],!0,ca,ea,za);mb=tb[0];var nb=tb[1];tb=O[na];tb.name=nb;tb.text=""!==nb?nb+" : "+mb:mb;if(mb=tb.cd[tb.index])mb.mc&&(tb.mc=mb.mc),mb.mcc&&(tb.mc=mb.mcc),mb.mlc&&(tb.mlc=mb.mlc),mb.mlcc&&(tb.mlc=mb.mlcc),mb.mlw&&(tb.mlw=mb.mlw),mb.mrc&&(tb.mrc=mb.mrc),mb.dir&&(tb.dir=mb.dir);tb._distinct=!0;U.entries.push([tb])}U.entries.sort(function(Ta,fb){return Ta[0].trace.index-fb[0].trace.index});U.layer=fa;J(X,U);U=t.mean(O.map(function(Ta){return(Ta.y0+Ta.y1)/2}));na=t.mean(O.map(function(Ta){return(Ta.x0+
Ta.x1)/2}));fa=fa.select("g.legend");mb=fa.node().getBoundingClientRect();na+=va._offset;U+=ma._offset-mb.height/2;tb=mb.width+2*Q;na=!(na+tb<=Ka)&&0<=na-tb?na-tb:na+2*Q;mb=mb.height+2*Q;tb=U+mb>=Oa;mb<=Oa&&(U<=Ca?U=ma._offset+2*Q:tb&&(U=Oa-mb));fa.attr("transform","translate("+na+","+U+")");return fa}fa=fa.selectAll("g.hovertext").data(O,function(Ta){return m(Ta)});fa.enter().append("g").classed("hovertext",!0).each(function(){var Ta=f.select(this);Ta.append("rect").call(F.fill,F.addOpacity(ha,.8));
Ta.append("text").classed("name",!0);Ta.append("path").style("stroke-width","1px");Ta.append("text").classed("nums",!0).call(E.font,ua,ta)});fa.exit().remove();fa.each(function(Ta){var fb=f.select(this).attr("transform",""),ab=Ta.bgcolor||Ta.color,ra=F.combine(F.opacity(ab)?ab:F.defaultLine,ha),Ea=F.combine(F.opacity(Ta.color)?Ta.color:F.defaultLine,ha),Ia=Ta.borderColor||F.contrast(ra);ab=h(Ta,kb,ca,ea,za,fb);var Va=ab[0],rb=ab[1];ab=fb.select("text.nums").call(E.font,Ta.fontFamily||ua,Ta.fontSize||
ta,Ta.fontColor||Ia).text(Va).attr("data-notex",1).call(w.positionText,0,0).call(w.convertToTspans,X);var ib=fb.select("text.name"),Na=0,Za=0;rb&&rb!==Va?(ib.call(E.font,Ta.fontFamily||ua,Ta.fontSize||ta,Ea).text(rb).attr("data-notex",1).call(w.positionText,0,0).call(w.convertToTspans,X),Za=ib.node().getBoundingClientRect(),Na=Za.width+2*Q,Za=Za.height+2*Q):(ib.remove(),fb.select("rect").remove());fb.select("path").style({fill:ra,stroke:Ia});var eb=ab.node().getBoundingClientRect();ra=Ta.xa._offset+
(Ta.x0+Ta.x1)/2;Ia=Ta.ya._offset+(Ta.y0+Ta.y1)/2;Ea=Math.abs(Ta.x1-Ta.x0);Va=Math.abs(Ta.y1-Ta.y0);rb=eb.width+P+Q+Na;Ta.ty0=Ca-eb.top;Ta.bx=eb.width+2*Q;Ta.by=Math.max(eb.height+2*Q,Za);Ta.anchor="start";Ta.txwidth=eb.width;Ta.tx2width=Na;Ta.offset=0;ia?(Ta.pos=ra,Za=Ia+Va/2+rb<=Oa,("top"===Ta.idealAlign||!Za)&&0<=Ia-Va/2-rb?(Ia-=Va/2,Ta.anchor="end"):Za?(Ia+=Va/2,Ta.anchor="start"):Ta.anchor="middle"):(Ta.pos=Ia,Za=ra+Ea/2+rb<=Ka,("left"===Ta.idealAlign||!Za)&&0<=ra-Ea/2-rb?(ra-=Ea/2,Ta.anchor=
"end"):Za?(ra+=Ea/2,Ta.anchor="start"):(Ta.anchor="middle",Ea=rb/2,Za=ra+Ea-Ka,Ea=ra-Ea,0<Za&&(ra-=Za),0>Ea&&(ra+=-Ea)));ab.attr("text-anchor",Ta.anchor);Na&&ib.attr("text-anchor",Ta.anchor);fb.attr("transform","translate("+ra+","+Ia+")"+(ia?"rotate("+K+")":""))});return fa}function h(O,U,X,da,ea,ca){var ia="",ha="";void 0!==O.nameOverride&&(O.name=O.nameOverride);O.name&&(O.trace._meta&&(O.name=t.templateString(O.name,O.trace._meta)),ia=c(O.name,O.nameLength));void 0!==O.zLabel?(void 0!==O.xLabel&&
(ha+="x: "+O.xLabel+"\x3cbr\x3e"),void 0!==O.yLabel&&(ha+="y: "+O.yLabel+"\x3cbr\x3e"),"choropleth"!==O.trace.type&&"choroplethmapbox"!==O.trace.type&&(ha+=(ha?"z: ":"")+O.zLabel)):U&&O[X.charAt(0)+"Label"]===ea?ha=O[("x"===X.charAt(0)?"y":"x")+"Label"]||"":void 0===O.xLabel?void 0!==O.yLabel&&"scattercarpet"!==O.trace.type&&(ha=O.yLabel):ha=void 0===O.yLabel?O.xLabel:"("+O.xLabel+", "+O.yLabel+")";!O.text&&0!==O.text||Array.isArray(O.text)||(ha+=(ha?"\x3cbr\x3e":"")+O.text);void 0!==O.extraText&&
(ha+=(ha?"\x3cbr\x3e":"")+O.extraText);ca&&""===ha&&!O.hovertemplate&&(""===ia&&ca.remove(),ha=ia);U=da._d3locale;X=O.hovertemplate||!1;da=O.hovertemplateLabels||O;ea=O.eventData[0]||{};X&&(ha=t.hovertemplateString(X,da,U,ea,O.trace._meta),ha=ha.replace(S,function(fa,na){ia=c(na,O.nameLength);return""}));return[ha,ia]}function a(O,U,X){function da(qa){var Ca=qa[0],Ka=qa[qa.length-1];sa=Ca.pmin-Ca.pos-Ca.dp+Ca.size;ua=Ka.pos+Ka.dp+Ka.size-Ca.pmax;if(.01<sa){for(oa=qa.length-1;0<=oa;oa--)qa[oa].dp+=
sa;na=!1}if(!(.01>ua)){if(-.01>sa){for(oa=qa.length-1;0<=oa;oa--)qa[oa].dp-=ua;na=!1}if(na){for(ta=Ka=0;ta<qa.length;ta++)va=qa[ta],va.pos+va.dp+va.size>Ca.pmax&&Ka++;for(ta=qa.length-1;0<=ta&&!(0>=Ka);ta--)va=qa[ta],va.pos>Ca.pmax-1&&(va.del=!0,Ka--);for(ta=0;ta<qa.length&&!(0>=Ka);ta++)if(va=qa[ta],va.pos<Ca.pmin+1)for(va.del=!0,Ka--,ua=2*va.size,oa=qa.length-1;0<=oa;oa--)qa[oa].dp-=ua;for(ta=qa.length-1;0<=ta&&!(0>=Ka);ta--)va=qa[ta],va.pos+va.dp+va.size>Ca.pmax&&(va.del=!0,Ka--)}}}var ea=0,ca=
1,ia=O.size(),ha=Array(ia),fa=0;O.each(function(qa){var Ca=qa[U],Ka="x"===Ca._id.charAt(0);Ca=Ca.range;0===fa&&Ca&&Ca[0]>Ca[1]!==Ka&&(ca=-1);ha[fa++]=[{datum:qa,traceIndex:qa.trace.index,dp:0,pos:qa.pos,posref:qa.posref,size:qa.by*(Ka?N:1)/2,pmin:0,pmax:Ka?X.width:X.height}]});ha.sort(function(qa,Ca){return qa[0].posref-Ca[0].posref||ca*(Ca[0].traceIndex-qa[0].traceIndex)});for(var na,sa,ua,ta,oa,va,ma;!na&&ea<=ia;){ea++;na=!0;for(ta=0;ta<ha.length-1;){O=ha[ta];ma=ha[ta+1];var pa=O[O.length-1],za=
ma[0];sa=pa.pos+pa.dp+pa.size-za.pos-za.dp+za.size;if(.01<sa&&pa.pmin===za.pmin&&pa.pmax===za.pmax){for(oa=ma.length-1;0<=oa;oa--)ma[oa].dp+=sa;O.push.apply(O,ma);ha.splice(ta+1,1);ma=0;for(oa=O.length-1;0<=oa;oa--)ma+=O[oa].dp;ua=ma/O.length;for(oa=O.length-1;0<=oa;oa--)O[oa].dp-=ua;na=!1}else ta++}ha.forEach(da)}for(ta=ha.length-1;0<=ta;ta--)for(ea=ha[ta],oa=ea.length-1;0<=oa;oa--)ia=ea[oa],O=ia.datum,O.offset=ia.dp,O.del=ia.del}function d(O,U){O.each(function(X){var da=f.select(this);if(X.del)return da.remove();
var ea=da.select("text.nums"),ca=X.anchor,ia="end"===ca?-1:1,ha={start:1,end:-1,middle:0}[ca],fa=ha*(P+Q),na=fa+ha*(X.txwidth+Q),sa=0,ua=X.offset;"middle"===ca&&(fa-=X.tx2width/2,na+=X.txwidth/2+Q);U&&(ua*=-L,sa=X.offset*H);da.select("path").attr("d","middle"===ca?"M-"+(X.bx/2+X.tx2width/2)+","+(ua-X.by/2)+"h"+X.bx+"v"+X.by+"h-"+X.bx+"Z":"M0,0L"+(ia*P+sa)+","+(P+ua)+"v"+(X.by/2-P)+"h"+ia*X.bx+"v-"+X.by+"H"+(ia*P+sa)+"V"+(ua-P)+"Z");ia=fa+sa;fa=ua+X.ty0-X.by/2+Q;var ta=X.textAlign||"auto";"auto"!==
ta&&("left"===ta&&"start"!==ca?(ea.attr("text-anchor","start"),ia="middle"===ca?-X.bx/2-X.tx2width/2+Q:-X.bx-Q):"right"===ta&&"end"!==ca&&(ea.attr("text-anchor","end"),ia="middle"===ca?X.bx/2-X.tx2width/2-Q:X.bx+Q));ea.call(w.positionText,ia,fa);X.tx2width&&(da.select("text.name").call(w.positionText,na+ha*Q+sa,ua+X.ty0-X.by/2+Q),da.select("rect").call(E.setRect,na+(ha-1)*X.tx2width/2+sa,ua-X.by/2-1,X.tx2width,X.by+2))})}function e(O,U){function X(sa){return sa||g(sa)&&0===sa}function da(sa,ua,ta){ua=
fa(ua,ta);X(ua)&&(O[sa]=ua)}var ea=O.index,ca=O.trace||{},ia=O.cd[0],ha=O.cd[ea]||{},fa=Array.isArray(ea)?function(sa,ua){sa=t.castOption(ia,ea,sa);return X(sa)?sa:t.extractOption({},ca,"",ua)}:function(sa,ua){return t.extractOption(ha,ca,sa,ua)};da("hoverinfo","hi","hoverinfo");da("bgcolor","hbg","hoverlabel.bgcolor");da("borderColor","hbc","hoverlabel.bordercolor");da("fontFamily","htf","hoverlabel.font.family");da("fontSize","hts","hoverlabel.font.size");da("fontColor","htc","hoverlabel.font.color");
da("nameLength","hnl","hoverlabel.namelength");da("textAlign","hta","hoverlabel.align");O.posref="y"===U||"closest"===U&&"h"===ca.orientation?O.xa._offset+(O.x0+O.x1)/2:O.ya._offset+(O.y0+O.y1)/2;O.x0=t.constrain(O.x0,0,O.xa._length);O.x1=t.constrain(O.x1,0,O.xa._length);O.y0=t.constrain(O.y0,0,O.ya._length);O.y1=t.constrain(O.y1,0,O.ya._length);void 0!==O.xLabelVal&&(O.xLabel="xLabel"in O?O.xLabel:B.hoverLabelText(O.xa,O.xLabelVal),O.xVal=O.xa.c2d(O.xLabelVal));void 0!==O.yLabelVal&&(O.yLabel="yLabel"in
O?O.yLabel:B.hoverLabelText(O.ya,O.yLabelVal),O.yVal=O.ya.c2d(O.yLabelVal));void 0!==O.zLabelVal&&void 0===O.zLabel&&(O.zLabel=String(O.zLabelVal));if(!(isNaN(O.xerr)||"log"===O.xa.type&&0>=O.xerr)){var na=B.tickText(O.xa,O.xa.c2l(O.xerr),"hover").text;O.xLabel=void 0!==O.xerrneg?O.xLabel+(" +"+na+" / -"+B.tickText(O.xa,O.xa.c2l(O.xerrneg),"hover").text):O.xLabel+("  "+na);"x"===U&&(O.distance+=1)}isNaN(O.yerr)||"log"===O.ya.type&&0>=O.yerr||(na=B.tickText(O.ya,O.ya.c2l(O.yerr),"hover").text,O.yLabel=
void 0!==O.yerrneg?O.yLabel+(" +"+na+" / -"+B.tickText(O.ya,O.ya.c2l(O.yerrneg),"hover").text):O.yLabel+("  "+na),"y"===U&&(O.distance+=1));(U=O.hoverinfo||O.trace.hoverinfo)&&"all"!==U&&(U=Array.isArray(U)?U:U.split("+"),-1===U.indexOf("x")&&(O.xLabel=void 0),-1===U.indexOf("y")&&(O.yLabel=void 0),-1===U.indexOf("z")&&(O.zLabel=void 0),-1===U.indexOf("text")&&(O.text=void 0),-1===U.indexOf("name")&&(O.name=void 0));return O}function l(O,U,X){var da=X.container,ea=X.fullLayout,ca=ea._size;X=X.event;
var ia=!!U.hLinePoint,ha=!!U.vLinePoint;da.selectAll(".spikeline").remove();if(ha||ia){ea=F.combine(ea.plot_bgcolor,ea.paper_bgcolor);if(ia){var fa=U.hLinePoint;var na=fa&&fa.xa;ia=fa&&fa.ya;if("cursor"===ia.spikesnap){var sa=X.pointerX;na=X.pointerY}else sa=na._offset+fa.x,na=ia._offset+fa.y;var ua=1.5>q.readability(fa.color,ea)?F.contrast(ea):fa.color;fa=ia.spikemode;var ta=ia.spikethickness;ua=ia.spikecolor||ua;var oa=B.getPxPosition(O,ia);if(-1!==fa.indexOf("toaxis")||-1!==fa.indexOf("across")){if(-1!==
fa.indexOf("toaxis")){var va=oa;var ma=sa}-1!==fa.indexOf("across")&&(va=ia._counterDomainMin,ma=ia._counterDomainMax,"free"===ia.anchor&&(va=Math.min(va,ia.position),ma=Math.max(ma,ia.position)),va=ca.l+va*ca.w,ma=ca.l+ma*ca.w);da.insert("line",":first-child").attr({x1:va,x2:ma,y1:na,y2:na,"stroke-width":ta,stroke:ua,"stroke-dasharray":E.dashStyle(ia.spikedash,ta)}).classed("spikeline",!0).classed("crisp",!0);da.insert("line",":first-child").attr({x1:va,x2:ma,y1:na,y2:na,"stroke-width":ta+2,stroke:ea}).classed("spikeline",
!0).classed("crisp",!0)}-1!==fa.indexOf("marker")&&da.insert("circle",":first-child").attr({cx:oa+("right"!==ia.side?ta:-ta),cy:na,r:ta,fill:ua}).classed("spikeline",!0)}if(ha){na=(ha=U.vLinePoint)&&ha.xa;ia=ha&&ha.ya;"cursor"===na.spikesnap?(U=X.pointerX,ia=X.pointerY):(U=na._offset+ha.x,ia=ia._offset+ha.y);va=1.5>q.readability(ha.color,ea)?F.contrast(ea):ha.color;X=na.spikemode;ha=na.spikethickness;va=na.spikecolor||va;O=B.getPxPosition(O,na);if(-1!==X.indexOf("toaxis")||-1!==X.indexOf("across")){if(-1!==
X.indexOf("toaxis")){var pa=O;var za=ia}-1!==X.indexOf("across")&&(za=na._counterDomainMin,pa=na._counterDomainMax,"free"===na.anchor&&(za=Math.min(za,na.position),pa=Math.max(pa,na.position)),pa=ca.t+(1-pa)*ca.h,za=ca.t+(1-za)*ca.h);da.insert("line",":first-child").attr({x1:U,x2:U,y1:pa,y2:za,"stroke-width":ha,stroke:va,"stroke-dasharray":E.dashStyle(na.spikedash,ha)}).classed("spikeline",!0).classed("crisp",!0);da.insert("line",":first-child").attr({x1:U,x2:U,y1:pa,y2:za,"stroke-width":ha+2,stroke:ea}).classed("spikeline",
!0).classed("crisp",!0)}-1!==X.indexOf("marker")&&da.insert("circle",":first-child").attr({cx:U,cy:O-("top"!==na.side?ha:-ha),r:ha,fill:va}).classed("spikeline",!0)}}}function k(O,U,X){if(!X||X.length!==O._hoverdata.length)return!0;for(U=X.length-1;0<=U;U--){var da=X[U],ea=O._hoverdata[U];if(da.curveNumber!==ea.curveNumber||String(da.pointNumber)!==String(ea.pointNumber)||String(da.pointNumbers)!==String(ea.pointNumbers))return!0}return!1}function c(O,U){return w.plainText(O||"",{len:U,allowedTags:"br sub sup b i em".split(" ")})}
var f=b("d3"),g=b("fast-isnumeric"),q=b("tinycolor2"),t=b("../../lib"),u=b("../../lib/events"),w=b("../../lib/svg_text_utils"),x=b("../../lib/override_cursor"),E=b("../drawing"),F=b("../color"),z=b("../dragelement"),B=b("../../plots/cartesian/axes"),C=b("../../registry"),v=b("./helpers"),G=b("./constants"),I=b("../legend/defaults"),J=b("../legend/draw"),K=G.YANGLE;b=Math.PI*K/180;var N=1/Math.sin(b),H=Math.cos(b),L=Math.sin(b),P=G.HOVERARROWSIZE,Q=G.HOVERTEXTPAD;D.hover=function(O,U,X,da){O=t.getGraphDiv(O);
t.throttle(O._fullLayout._uid+G.HOVERID,G.HOVERMINTIME,function(){n(O,U,X,da)})};D.loneHover=function(O,U){var X=!0;Array.isArray(O)||(X=!1,O=[O]);O=O.map(function(ha){return{color:ha.color||F.defaultLine,x0:ha.x0||ha.x||0,x1:ha.x1||ha.x||0,y0:ha.y0||ha.y||0,y1:ha.y1||ha.y||0,xLabel:ha.xLabel,yLabel:ha.yLabel,zLabel:ha.zLabel,text:ha.text,name:ha.name,idealAlign:ha.idealAlign,borderColor:ha.borderColor,fontFamily:ha.fontFamily,fontSize:ha.fontSize,fontColor:ha.fontColor,nameLength:ha.nameLength,textAlign:ha.textAlign,
trace:ha.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ha.hovertemplate||!1,eventData:ha.eventData||!1,hovertemplateLabels:ha.hovertemplateLabels||!1}});var da=f.select(U.container),ea=U.outerContainer?f.select(U.outerContainer):da;da={hovermode:"closest",rotateLabels:!1,bgColor:U.bgColor||F.background,container:da,outerContainer:ea};O=p(O,da,U.gd);var ca=0,ia=0;O.sort(function(ha,fa){return ha.y0-fa.y0}).each(function(ha,fa){var na=ha.y0-ha.by/2;ha.offset=na-5<
ca?ca-na+5:0;ca=na+ha.by+ha.offset;fa===U.anchorIndex&&(ia=ha.offset)}).each(function(ha){ha.offset-=ia});d(O,da.rotateLabels);return X?O:O.node()};var S=/<extra>([\s\S]*)<\/extra>/},{"../../lib":749,"../../lib/events":738,"../../lib/override_cursor":760,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"../legend/defaults":667,"../legend/draw":668,"./constants":649,"./helpers":651,d3:169,"fast-isnumeric":241,
tinycolor2:548}],653:[function(b,y,D){var n=b("../../lib"),m=b("../color"),p=b("./helpers").isUnifiedHover;y.exports=function(h,a,d,e){function l(k){e.font[k]||(e.font[k]=a.legend?a.legend.font[k]:a.font[k])}e=e||{};a&&p(a.hovermode)&&(e.font||(e.font={}),l("size"),l("family"),l("color"),a.legend?(e.bgcolor||(e.bgcolor=m.combine(a.legend.bgcolor,a.paper_bgcolor)),e.bordercolor||(e.bordercolor=a.legend.bordercolor)):e.bgcolor||(e.bgcolor=a.paper_bgcolor));d("hoverlabel.bgcolor",e.bgcolor);d("hoverlabel.bordercolor",
e.bordercolor);d("hoverlabel.namelength",e.namelength);n.coerceFont(d,"hoverlabel.font",e.font);d("hoverlabel.align",e.align)}},{"../../lib":749,"../color":615,"./helpers":651}],654:[function(b,y,D){function n(h,a){a=a._scatterStackOpts||{};for(var d=0;d<h.length;d++){var e=h[d],l=(a[e.xaxis+e.yaxis]||{})[e.stackgroup]||{};if("h"!==e.orientation&&"h"!==l.orientation)return!1}return!0}var m=b("../../lib"),p=b("./layout_attributes");y.exports=function(h,a,d){function e(k,c){return void 0!==a[k]?a[k]:
m.coerce(h,a,p,k,c)}var l=e("clickmode");a._has("cartesian")?-1<l.indexOf("select")?d="closest":(a._isHoriz=n(d,a),d=a._isHoriz?"y":"x"):d="closest";return e("hovermode",d)}},{"../../lib":749,"./layout_attributes":656}],655:[function(b,y,D){var n=b("d3"),m=b("../../lib");D=b("../dragelement");var p=b("./helpers"),h=b("./layout_attributes"),a=b("./hover");y.exports={moduleType:"component",name:"fx",constants:b("./constants"),schema:{layout:h},attributes:b("./attributes"),layoutAttributes:h,supplyLayoutGlobalDefaults:b("./layout_global_defaults"),
supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),getDistanceFunction:p.getDistanceFunction,getClosest:p.getClosest,inbox:p.inbox,quadrature:p.quadrature,appendArrayPointValue:p.appendArrayPointValue,castHoverOption:function(d,e,l){return m.castOption(d,e,"hoverlabel."+l)},castHoverinfo:function(d,e,l){return m.castOption(d,l,"hoverinfo",function(k){return m.coerceHoverinfo({hoverinfo:k},{_module:d._module},e)})},hover:a.hover,unhover:D.unhover,loneHover:a.loneHover,
loneUnhover:function(d){d=m.isD3Selection(d)?d:n.select(d);d.selectAll("g.hovertext").remove();d.selectAll(".spikeline").remove()},click:b("./click")}},{"../../lib":749,"../dragelement":634,"./attributes":646,"./calc":647,"./click":648,"./constants":649,"./defaults":650,"./helpers":651,"./hover":652,"./layout_attributes":656,"./layout_defaults":657,"./layout_global_defaults":658,d3:169}],656:[function(b,y,D){D=b("./constants");b=b("../../plots/font_attributes")({editType:"none"});b.family.dflt=D.HOVERFONT;
b.size.dflt=D.HOVERFONTSIZE;y.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},
spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:b,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":825,"./constants":649}],657:[function(b,
y,D){var n=b("../../lib"),m=b("./helpers").isUnifiedHover,p=b("./layout_attributes"),h=b("./hovermode_defaults"),a=b("./hoverlabel_defaults");y.exports=function(d,e,l){function k(g,q){return n.coerce(d,e,p,g,q)}if(l=h(d,e,l))k("hoverdistance"),k("spikedistance",m(l)?-1:void 0);"select"===k("dragmode")&&k("selectdirection");l=e._has("mapbox");var c=e._has("geo"),f=e._basePlotModules.length;"zoom"===e.dragmode&&((l||c)&&1===f||l&&c&&2===f)&&(e.dragmode="pan");a(d,e,k)}},{"../../lib":749,"./helpers":651,
"./hoverlabel_defaults":653,"./hovermode_defaults":654,"./layout_attributes":656}],658:[function(b,y,D){var n=b("../../lib"),m=b("./hoverlabel_defaults"),p=b("./layout_attributes");y.exports=function(h,a){m(h,a,function(d,e){return n.coerce(h,a,p,d,e)})}},{"../../lib":749,"./hoverlabel_defaults":653,"./layout_attributes":656}],659:[function(b,y,D){function n(k,c,f){c=c[f+"axes"];k=Object.keys((k._splomAxes||{})[f]||{});if(Array.isArray(c))return c;if(k.length)return k}function m(k,c,f,g,q,t){f=c(k+
"gap",f);var u=c("domain."+k);c(k+"side",g);k=Array(q);c=u[0];u=(u[1]-c)/(q-f);f=u*(1-f);for(g=0;g<q;g++){var w=c+u*g;k[t?q-1-g:g]=[w,w+f]}return k}function p(k,c,f,g,q){function t(x,E){-1!==c.indexOf(E)&&void 0===g[E]?(u[x]=E,g[E]=x):u[x]=""}var u=Array(f),w;if(Array.isArray(k))for(w=0;w<f;w++)t(w,k[w]);else for(t(0,q),w=1;w<f;w++)t(w,q+(w+1));return u}var h=b("../../lib");D=b("../../lib/regex").counter;var a=b("../../plots/domain").attributes,d=b("../../plots/cartesian/constants").idRegex,e=b("../../plot_api/plot_template"),
l={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[D("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[d.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",
freeLength:!0,items:{valType:"enumerated",values:[d.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left",
"left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};y.exports={moduleType:"component",name:"grid",schema:{layout:{grid:l}},layoutAttributes:l,sizeDefaults:function(k,c){function f(v,G){return h.coerce(g,z,l,v,G)}var g=k.grid||{},q=n(c,g,"x"),t=n(c,g,"y");if(k.grid||q||t){k=Array.isArray(g.subplots)&&Array.isArray(g.subplots[0]);var u=Array.isArray(q),w=Array.isArray(t),x=u&&q!==g.xaxes&&w&&t!==g.yaxes;if(k){var E=g.subplots.length;var F=g.subplots[0].length}else w&&
(E=t.length),u&&(F=q.length);var z=e.newContainer(c,"grid");q=f("rows",E);F=f("columns",F);if(1<q*F){k||u||w||"independent"===f("pattern")&&(k=!0);z._hasSubplotGrid=k;u="top to bottom"===f("roworder");w=k?.3:.1;if(x&&c._splomGridDflt){var B=c._splomGridDflt.xside;var C=c._splomGridDflt.yside}z._domains={x:m("x",f,k?.2:.1,B,F),y:m("y",f,w,C,q,u)}}else delete c.grid}},contentDefaults:function(k,c){var f=c.grid;if(f&&f._domains){var g=k.grid||{};k=c._subplots;var q=f._hasSubplotGrid,t=f.rows,u=f.columns,
w="independent"===f.pattern,x,E=f._axisMap={};if(q){var F=g.subplots||[];var z=f.subplots=Array(t);var B=1;for(c=0;c<t;c++){var C=z[c]=Array(u),v=F[c]||[];for(x=0;x<u;x++)if(w?(g=1===B?"xy":"x"+B+"y"+B,B++):g=v[x],C[x]="",-1!==k.cartesian.indexOf(g)){var G=g.indexOf("y");var I=g.slice(0,G);G=g.slice(G);void 0!==E[I]&&E[I]!==x||void 0!==E[G]&&E[G]!==c||(C[x]=g,E[I]=x,E[G]=c)}}}else G=n(c,g,"x"),c=n(c,g,"y"),f.xaxes=p(G,k.xaxis,u,E,"x"),f.yaxes=p(c,k.yaxis,t,E,"y");w=f._anchors={};x="top to bottom"===
f.roworder;for(var J in E)if(c=J.charAt(0),g=f[c+"side"],8>g.length)w[J]="free";else if("x"===c)if("t"===g.charAt(0)===x?(c=0,F=1,B=t):(c=t-1,B=F=-1),q)for(I=E[J];c!==B;c+=F){if(g=z[c][I])if(G=g.indexOf("y"),g.slice(0,G)===J){w[J]=g.slice(G);break}}else for(;c!==B;c+=F){if(G=f.yaxes[c],-1!==k.cartesian.indexOf(J+G)){w[J]=G;break}}else if("l"===g.charAt(0)?(c=0,F=1,B=u):(c=u-1,B=F=-1),q)for(I=E[J];c!==B;c+=F){if(g=z[I][c])if(G=g.indexOf("y"),g.slice(G)===J){w[J]=g.slice(0,G);break}}else for(;c!==B;c+=
F)if(I=f.xaxes[c],-1!==k.cartesian.indexOf(I+J)){w[J]=I;break}}}}},{"../../lib":749,"../../lib/regex":765,"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803,"../../plots/domain":824}],660:[function(b,y,D){D=b("../../plots/cartesian/constants");b=b("../../plot_api/plot_template").templatedArray;y.exports=b("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",
editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",D.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",D.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803}],661:[function(b,y,D){var n=b("fast-isnumeric"),m=b("../../lib/to_log_range");y.exports=function(p,h,a,d){h=h||{};var e="log"===a&&"linear"===
h.type;a="linear"===a&&"log"===h.type;if(e||a){p=p._fullLayout.images;a=h._id.charAt(0);for(var l,k,c=0;c<p.length;c++)if(l=p[c],k="images["+c+"].",l[a+"ref"]===h._id){var f=l[a];l=l["size"+a];e?(f=m(f,h.range),l=l/Math.pow(10,f)/2,l=2*Math.log(l+Math.sqrt(1+l*l))/Math.LN10):(f=Math.pow(10,f),l=f*(Math.pow(10,l/2)-Math.pow(10,-l/2)));n(f)?n(l)||(l=null):l=f=null;d(k+a,f);d(k+"size"+a,l)}}}},{"../../lib/to_log_range":775,"fast-isnumeric":241}],662:[function(b,y,D){function n(d,e,l){function k(t,u){return m.coerce(d,
e,a,t,u)}var c=k("source");if(!k("visible",!!c))return e;k("layer");k("xanchor");k("yanchor");k("sizex");k("sizey");k("sizing");k("opacity");l={_fullLayout:l};c=["x","y"];for(var f=0;2>f;f++){var g=c[f],q=p.coerceRef(d,e,l,g,"paper");"paper"!==q&&p.getFromId(l,q)._imgIndices.push(e._index);p.coercePosition(e,l,k,q,g,0)}return e}var m=b("../../lib"),p=b("../../plots/cartesian/axes"),h=b("../../plots/array_container_defaults"),a=b("./attributes");y.exports=function(d,e){h(d,e,{name:"images",handleItemDefaults:n})}},
{"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"./attributes":660}],663:[function(b,y,D){var n=b("d3"),m=b("../drawing"),p=b("../../plots/cartesian/axes"),h=b("../../constants/xmlns_namespaces");y.exports=function(a){function d(x){var E=n.select(this);if(this._imgSrc!==x.source)if(E.attr("xmlns",h.svg),x.source&&"data:"===x.source.slice(0,5))E.attr("xlink:href",x.source),this._imgSrc=x.source;else{var F=new Promise(function(z){function B(){E.remove();
z()}var C=new Image;this.img=C;C.setAttribute("crossOrigin","anonymous");C.onerror=B;C.onload=function(){var v=document.createElement("canvas");v.width=this.width;v.height=this.height;v.getContext("2d").drawImage(this,0,0);v=v.toDataURL("image/png");E.attr("xlink:href",v);z()};E.on("error",B);this._imgSrc=C.src=x.source}.bind(this));a._promises.push(F)}}function e(x){var E=n.select(this),F=p.getFromId(a,x.xref),z=p.getFromId(a,x.yref),B=l._size,C=F?Math.abs(F.l2p(x.sizex)-F.l2p(0)):x.sizex*B.w,v=
z?Math.abs(z.l2p(x.sizey)-z.l2p(0)):x.sizey*B.h,G=C*w.x[x.xanchor].offset,I=v*w.y[x.yanchor].offset,J=w.x[x.xanchor].sizing+w.y[x.yanchor].sizing;G=(F?F.r2p(x.x)+F._offset:x.x*B.w+B.l)+G;B=(z?z.r2p(x.y)+z._offset:B.h-x.y*B.h+B.t)+I;switch(x.sizing){case "fill":J+=" slice";break;case "stretch":J="none"}E.attr({x:G,y:B,width:C,height:v,preserveAspectRatio:J,opacity:x.opacity});x=(F?F._id:"")+(z?z._id:"");m.setClipUrl(E,x?"clip"+l._uid+x:null,a)}var l=a._fullLayout,k=[],c={},f=[],g;for(g=0;g<l.images.length;g++){var q=
l.images[g];if(q.visible)if("below"===q.layer&&"paper"!==q.xref&&"paper"!==q.yref){var t=q.xref+q.yref;var u=l._plots[t];u?(u.mainplot&&(t=u.mainplot.id),c[t]||(c[t]=[]),c[t].push(q)):f.push(q)}else"above"===q.layer?k.push(q):f.push(q)}var w={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};g=l._imageLowerLayer.selectAll("image").data(f);t=l._imageUpperLayer.selectAll("image").data(k);
g.enter().append("image");t.enter().append("image");g.exit().remove();t.exit().remove();g.each(function(x){d.bind(this)(x);e.bind(this)(x)});t.each(function(x){d.bind(this)(x);e.bind(this)(x)});k=Object.keys(l._plots);for(g=0;g<k.length;g++)t=k[g],f=l._plots[t],f.imagelayer&&(t=f.imagelayer.selectAll("image").data(c[t]||[]),t.enter().append("image"),t.exit().remove(),t.each(function(x){d.bind(this)(x);e.bind(this)(x)}))}},{"../../constants/xmlns_namespaces":725,"../../plots/cartesian/axes":797,"../drawing":637,
d3:169}],664:[function(b,y,D){y.exports={moduleType:"component",name:"images",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("images"),draw:b("./draw"),convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":809,"./attributes":660,"./convert_coords":661,"./defaults":662,"./draw":663}],665:[function(b,y,D){D=b("../../plots/font_attributes");b=b("../color/attributes");y.exports={bgcolor:{valType:"color",
editType:"legend"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:D({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},
itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},
uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:D({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":825,"../color/attributes":614}],666:[function(b,y,D){y.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,
scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,textGap:40,itemGap:5}},{}],667:[function(b,y,D){var n=b("../../registry"),m=b("../../lib"),p=b("../../plot_api/plot_template"),h=b("./attributes"),a=b("../../plots/layout_attributes"),d=b("./helpers");y.exports=function(e,l,k){function c(E,F){return m.coerce(f,x,h,E,F)}for(var f=e.legend||{},g=0,q=!1,t="normal",u=0;u<k.length;u++){var w=k[u];if(w.visible){if(w.showlegend||w._dfltShowLegend&&!(w._module&&w._module.attributes&&w._module.attributes.showlegend&&
!1===w._module.attributes.showlegend.dflt))g++,w.showlegend&&(q=!0,(n.traceIs(w,"pie-like")||!0===w._input.showlegend)&&g++);if(n.traceIs(w,"bar")&&"stack"===l.barmode||-1!==["tonextx","tonexty"].indexOf(w.fill))t=d.isGrouped({traceorder:t})?"grouped+reversed":"reversed";void 0!==w.legendgroup&&""!==w.legendgroup&&(t=d.isReversed({traceorder:t})?"reversed+grouped":"grouped")}}k=m.coerce(e,l,a,"showlegend",q&&1<g);if(!1!==k||f.uirevision){var x=p.newContainer(l,"legend");c("uirevision",l.uirevision);
!1!==k&&(c("bgcolor",l.paper_bgcolor),c("bordercolor"),c("borderwidth"),m.coerceFont(c,"font",l.font),k=c("orientation"),"h"===k?(g=0,n.getComponentMethod("rangeslider","isVisible")(e.xaxis)?(e=1.1,q="bottom"):(e=-.1,q="top")):(g=1.02,e=1,q="auto"),c("traceorder",t),d.isGrouped(l.legend)&&c("tracegroupgap"),c("itemsizing"),c("itemclick"),c("itemdoubleclick"),c("x",g),c("xanchor"),c("y",e),c("yanchor",q),c("valign"),m.noneOrAll(f,x,["x","y"]),c("title.text")&&(c("title.side","h"===k?"left":"top"),
m.coerceFont(c,"title.font",l.font)))}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/layout_attributes":851,"../../registry":880,"./attributes":665,"./helpers":671}],668:[function(b,y,D){function n(N,H,L,P,Q){var S=L.data()[0][0].trace;Q={event:Q,node:L.node(),curveNumber:S.index,expandedIndex:S._expandedIndex,data:N.data,layout:N.layout,frames:N._transitionData._frames,config:N._context,fullData:N._fullData,fullLayout:N._fullLayout};S._group&&(Q.group=S._group);t.traceIs(S,"pie-like")&&
(Q.label=L.datum()[0].label);!1!==u.triggerHandler(N,"plotly_legendclick",Q)&&(1===P?H._clickTimeout=setTimeout(function(){z(L,N,P)},N._context.doubleClickDelay):2===P&&(H._clickTimeout&&clearTimeout(H._clickTimeout),N._legendMouseDownTime=0,!1!==u.triggerHandler(N,"plotly_legenddoubleclick",Q)&&z(L,N,P)))}function m(N,H,L){var P=N.data()[0][0],Q=P.trace,S=t.traceIs(Q,"pie-like"),O=Q.index,U=L._main&&H._context.edits.legendText&&!S,X=L._maxNameLength;L.entries?S=P.text:(S=S?P.label:Q.name,Q._meta&&
(S=g.templateString(S,Q._meta)));Q=g.ensureSingle(N,"text","legendtext");Q.attr("text-anchor","start").classed("user-select-none",!0).call(x.font,L.font).text(U?p(S,X):S);F.positionText(Q,B.textGap,0);if(U)Q.call(F.makeEditable,{gd:H,text:S}).call(a,N,H,L).on("edit",function(da){this.text(p(da,X)).call(a,N,H,L);var ea=P.trace._fullInput||{},ca={};t.hasTransform(ea,"groupby")?(ca=t.getTransformIndices(ea,"groupby"),ea=g.keyedContainer(ea,"transforms["+ca[ca.length-1]+"].styles","target","value.name"),
ea.set(P.trace._group,da),ca=ea.constructUpdate()):ca.name=da;return t.call("_guiRestyle",H,ca,O)});else a(Q,N,H,L)}function p(N,H){H=Math.max(4,H);if(N&&N.trim().length>=H/2)return N;N=N||"";for(H-=N.length;0<H;H--)N+=" ";return N}function h(N,H){var L=H._context.doubleClickDelay,P,Q=1,S=g.ensureSingle(N,"rect","legendtoggle",function(O){O.style("cursor","pointer").attr("pointer-events","all").call(E.fill,"rgba(0,0,0,0)")});S.on("mousedown",function(){P=(new Date).getTime();P-H._legendMouseDownTime<
L?Q+=1:(Q=1,H._legendMouseDownTime=P)});S.on("mouseup",function(){if(!H._dragged&&!H._editing){var O=H._fullLayout.legend;(new Date).getTime()-H._legendMouseDownTime>L&&(Q=Math.max(Q-1,1));n(H,O,N,Q,f.event)}})}function a(N,H,L,P){P._main||N.attr("data-notex",!0);F.convertToTspans(N,L,function(){var Q=P,S=H.data()[0][0];if(Q._main&&S&&!S.trace.showlegend)H.remove();else{var O=H.select("g[class*\x3dmath-group]"),U=O.node();Q||(Q=L._fullLayout.legend);var X=Q.borderwidth,da=(S?Q:Q.title).font.size*
C;if(U){var ea=x.bBox(U);U=ea.height;ea=ea.width;S?x.setTranslate(O,0,.25*U):x.setTranslate(O,X,.75*U+X)}else{O=H.select(S?".legendtext":".legendtitletext");var ca=F.lineCount(O);ea=O.node();U=da*ca;ea=ea?x.bBox(ea).width:0;S?F.positionText(O,B.textGap,-(da*((ca-1)/2-.3))):F.positionText(O,B.titlePad+X,da+X)}S?(S.lineHeight=da,S.height=Math.max(U,16)+3,S.width=ea):(Q._titleWidth=ea,Q._titleHeight=U)}})}function d(N){var H=0,L=0,P=N.title.side;P&&(-1!==P.indexOf("left")&&(H=N._titleWidth),-1!==P.indexOf("top")&&
(L=N._titleHeight));return[H,L]}function e(N,H,L,P){var Q=N._fullLayout;P||(P=Q.legend);var S=Q._size,O=K.isVertical(P),U=K.isGrouped(P),X=P.borderwidth,da=2*X,ea=B.textGap,ca=B.itemGap,ia=2*(X+ca),ha=c(P),fa=0>P.y||0===P.y&&"top"===ha,na=1<P.y||1===P.y&&"bottom"===ha;P._maxHeight=Math.max(fa||na?Q.height/2:S.h,30);var sa=0;P._width=0;P._height=0;var ua=d(P);if(O)L.each(function(nb){var Ta=nb[0].height;x.setTranslate(this,X+ua[0],X+ua[1]+P._height+Ta/2+ca);P._height+=Ta;P._width=Math.max(P._width,
nb[0].width)}),sa=ea+P._width,P._width+=ca+ea+da,P._height+=ia,U&&(H.each(function(nb,Ta){x.setTranslate(this,0,Ta*P.tracegroupgap)}),P._height+=(P._lgroupsLength-1)*P.tracegroupgap);else{ha=k(P);var ta=1<P.x||1===P.x&&"left"===ha;fa=na||fa;Q=Q.width/2;P._maxWidth=Math.max(0>P.x||0===P.x&&"right"===ha?fa&&"left"===ha?S.l+S.w:Q:ta?fa&&"right"===ha?S.r+S.w:Q:S.w,2*ea);var oa=0,va=0;L.each(function(nb){nb=nb[0].width+ea;oa=Math.max(oa,nb);va+=nb});sa=null;var ma=0;if(U){var pa=0,za=0,qa=0;H.each(function(){var nb=
0,Ta=0;f.select(this).selectAll("g.traces").each(function(ab){var ra=ab[0].height;x.setTranslate(this,ua[0],ua[1]+X+ca+ra/2+Ta);Ta+=ra;nb=Math.max(nb,ea+ab[0].width)});pa=Math.max(pa,Ta);var fb=nb+ca;fb+X+za>P._maxWidth&&(ma=Math.max(ma,za),za=0,qa+=pa+P.tracegroupgap,pa=Ta);x.setTranslate(this,za,qa);za+=fb});P._width=Math.max(ma,za)+X;P._height=qa+pa+ia}else{H=L.size();var Ca=va+da+(H-1)*ca<P._maxWidth,Ka=0,Oa=0,kb=0,mb=0;L.each(function(nb){var Ta=nb[0].height;nb=ea+nb[0].width;var fb=(Ca?nb:oa)+
ca;fb+X+Oa>P._maxWidth&&(ma=Math.max(ma,mb),Oa=0,kb+=Ka,P._height+=Ka,Ka=0);x.setTranslate(this,ua[0]+X+Oa,ua[1]+X+kb+Ta/2+ca);mb=Oa+nb+ca;Oa+=fb;Ka=Math.max(Ka,Ta)});Ca?(P._width=Oa+da,P._height=Ka+ia):(P._width=Math.max(ma,mb)+da,P._height+=Ka+ia)}}P._width=Math.ceil(Math.max(P._width+ua[0],P._titleWidth+2*(X+B.titlePad)));P._height=Math.ceil(Math.max(P._height+ua[1],P._titleHeight+2*(X+B.itemGap)));P._effHeight=Math.min(P._height,P._maxHeight);N=N._context.edits;var tb=N.legendText||N.legendPosition;
L.each(function(nb){var Ta=f.select(this).select(".legendtoggle"),fb=nb[0].height;nb=tb?ea:sa||ea+nb[0].width;O||(nb+=ca/2);x.setRect(Ta,0,-fb/2,nb,fb)})}function l(N){var H=N._fullLayout.legend,L=k(H),P=c(H);return q.autoMargin(N,"legend",{x:H.x,y:H.y,l:H._width*v[L],r:H._width*G[L],b:H._effHeight*G[P],t:H._effHeight*v[P]})}function k(N){return g.isRightAnchor(N)?"right":g.isCenterAnchor(N)?"center":"left"}function c(N){return g.isBottomAnchor(N)?"bottom":g.isMiddleAnchor(N)?"middle":"top"}var f=
b("d3"),g=b("../../lib"),q=b("../../plots/plots"),t=b("../../registry"),u=b("../../lib/events"),w=b("../dragelement"),x=b("../drawing"),E=b("../color"),F=b("../../lib/svg_text_utils"),z=b("./handle_click"),B=b("./constants");D=b("../../constants/alignment");var C=D.LINE_SPACING,v=D.FROM_TL,G=D.FROM_BR,I=b("./get_legend_data"),J=b("./style"),K=b("./helpers");y.exports=function(N,H){var L=N._fullLayout,P="legend"+L._uid;if(H){var Q=H.layer;P+="-hover"}else H=L.legend||{},H._main=!0,Q=L._infolayer;if(Q){N._legendMouseDownTime||
(N._legendMouseDownTime=0);if(H._main){if(!N.calcdata)return;var S=L.showlegend&&I(N.calcdata,H)}else{if(!H.entries)return;S=I(H.entries,H)}var O=L.hiddenlabels||[];if(H._main&&(!L.showlegend||!S.length))return Q.selectAll(".legend").remove(),L._topdefs.select("#"+P).remove(),q.autoMargin(N,"legend");var U=g.ensureSingle(Q,"g","legend",function(sa){H._main&&sa.attr("pointer-events","all")}),X=g.ensureSingleById(L._topdefs,"clipPath",P,function(sa){sa.append("rect")}),da=g.ensureSingle(U,"rect","bg",
function(sa){sa.attr("shape-rendering","crispEdges")});da.call(E.stroke,H.bordercolor).call(E.fill,H.bgcolor).style("stroke-width",H.borderwidth+"px");var ea=g.ensureSingle(U,"g","scrollbox"),ca=H.title;H._titleWidth=0;H._titleHeight=0;if(ca.text){var ia=g.ensureSingle(ea,"text","legendtitletext");ia.attr("text-anchor","start").classed("user-select-none",!0).call(x.font,ca.font).text(ca.text);a(ia,ea,N,H)}else ea.selectAll(".legendtitletext").remove();var ha=g.ensureSingle(U,"rect","scrollbar",function(sa){sa.attr(B.scrollBarEnterAttrs).call(E.fill,
B.scrollBarColor)}),fa=ea.selectAll("g.groups").data(S);fa.enter().append("g").attr("class","groups");fa.exit().remove();var na=fa.selectAll("g.traces").data(g.identity);na.enter().append("g").attr("class","traces");na.exit().remove();na.style("opacity",function(sa){var ua=sa[0].trace;return t.traceIs(ua,"pie-like")?-1!==O.indexOf(sa[0].label)?.5:1:"legendonly"===ua.visible?.5:1}).each(function(){f.select(this).call(m,N,H)}).call(J,N,H).each(function(){H._main&&f.select(this).call(h,N)});g.syncOrAsync([q.previousPromises,
function(){return e(N,fa,na,H)},function(){function sa(ra,Ea,Ia){H._scrollY=N._fullLayout.legend._scrollY=ra;x.setTranslate(ea,0,-ra);x.setRect(ha,H._width,B.scrollBarMargin+ra*Ia,B.scrollBarWidth,Ea);X.select("rect").attr("y",ta+ra)}if(!H._main||!l(N)){var ua=L._size,ta=H.borderwidth,oa=ua.l+ua.w*H.x-v[k(H)]*H._width,va=ua.t+ua.h*(1-H.y)-v[c(H)]*H._effHeight;if(H._main&&L.margin.autoexpand){var ma=oa,pa=va;oa=g.constrain(oa,0,L.width-H._width);va=g.constrain(va,0,L.height-H._effHeight);oa!==ma&&
g.log("Constrain legend.x to make legend fit inside graph");va!==pa&&g.log("Constrain legend.y to make legend fit inside graph")}H._main&&x.setTranslate(U,oa,va);ha.on(".drag",null);U.on("wheel",null);if(!H._main||H._height<=H._maxHeight||N._context.staticPlot)oa=H._effHeight,H._main||(oa=H._height),da.attr({width:H._width-ta,height:oa-ta,x:ta/2,y:ta/2}),x.setTranslate(ea,0,0),X.select("rect").attr({width:H._width-2*ta,height:oa-2*ta,x:ta,y:ta}),x.setClipUrl(ea,P,N),x.setRect(ha,0,0,0,0),delete H._scrollY;
else{var za=Math.max(B.scrollBarMinHeight,H._effHeight*H._effHeight/H._height),qa=H._effHeight-za-2*B.scrollBarMargin,Ca=H._height-H._effHeight,Ka=qa/Ca,Oa=Math.min(H._scrollY||0,Ca);da.attr({width:H._width-2*ta+B.scrollBarWidth+B.scrollBarMargin,height:H._effHeight-ta,x:ta/2,y:ta/2});X.select("rect").attr({width:H._width-2*ta+B.scrollBarWidth+B.scrollBarMargin,height:H._effHeight-2*ta,x:ta,y:ta+Oa});x.setClipUrl(ea,P,N);sa(Oa,za,Ka);U.on("wheel",function(){Oa=g.constrain(H._scrollY+f.event.deltaY/
qa*Ca,0,Ca);sa(Oa,za,Ka);0!==Oa&&Oa!==Ca&&f.event.preventDefault()});var kb,mb,tb;oa=f.behavior.drag().on("dragstart",function(){var ra=f.event.sourceEvent;kb="touchstart"===ra.type?ra.changedTouches[0].clientY:ra.clientY;tb=Oa}).on("drag",function(){var ra=f.event.sourceEvent;2===ra.buttons||ra.ctrlKey||(mb="touchmove"===ra.type?ra.changedTouches[0].clientY:ra.clientY,Oa=g.constrain((mb-kb)/Ka+tb,0,Ca),sa(Oa,za,Ka))});ha.call(oa);oa=f.behavior.drag().on("dragstart",function(){var ra=f.event.sourceEvent;
"touchstart"===ra.type&&(kb=ra.changedTouches[0].clientY,tb=Oa)}).on("drag",function(){var ra=f.event.sourceEvent;"touchmove"===ra.type&&(mb=ra.changedTouches[0].clientY,Oa=g.constrain((kb-mb)/Ka+tb,0,Ca),sa(Oa,za,Ka))});ea.call(oa)}if(N._context.edits.legendPosition){var nb,Ta,fb,ab;U.classed("cursor-move",!0);w.init({element:U.node(),gd:N,prepFn:function(){var ra=x.getTranslate(U);fb=ra.x;ab=ra.y},moveFn:function(ra,Ea){ra=fb+ra;Ea=ab+Ea;x.setTranslate(U,ra,Ea);nb=w.align(ra,0,ua.l,ua.l+ua.w,H.xanchor);
Ta=w.align(Ea,0,ua.t+ua.h,ua.t,H.yanchor)},doneFn:function(){void 0!==nb&&void 0!==Ta&&t.call("_guiRelayout",N,{"legend.x":nb,"legend.y":Ta})},clickFn:function(ra,Ea){var Ia=Q.selectAll("g.traces").filter(function(){var Va=this.getBoundingClientRect();return Ea.clientX>=Va.left&&Ea.clientX<=Va.right&&Ea.clientY>=Va.top&&Ea.clientY<=Va.bottom});0<Ia.size()&&n(N,U,Ia,ra,Ea)}})}}}],N)}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/events":738,"../../lib/svg_text_utils":773,"../../plots/plots":860,
"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"./constants":666,"./get_legend_data":669,"./handle_click":670,"./helpers":671,"./style":673,d3:169}],669:[function(b,y,D){var n=b("../../registry"),m=b("./helpers");y.exports=function(p,h){function a(F,z){""!==F&&m.isGrouped(h)?-1===e.indexOf(F)?(e.push(F),l=!0,d[F]=[[z]]):d[F].push([z]):(F="~~i"+c,e.push(F),d[F]=[[z]],c++)}var d={},e=[],l=!1,k={},c=0,f=0,g,q=h._main;for(g=0;g<p.length;g++){var t=p[g];var u=t[0];var w=u.trace,
x=w.legendgroup;if(!q||w.visible&&w.showlegend)if(n.traceIs(w,"pie-like"))for(k[x]||(k[x]={}),u=0;u<t.length;u++){var E=t[u].label;k[x][E]||(a(x,{label:E,color:t[u].color,i:t[u].i,trace:w,pts:t[u].pts}),k[x][E]=!0,f=Math.max(f,(E||"").length))}else a(x,u),f=Math.max(f,(w.name||"").length)}if(!e.length)return[];p=e.length;if(l&&m.isGrouped(h))for(q=Array(p),g=0;g<p;g++)k=d[e[g]],q[g]=m.isReversed(h)?k.reverse():k;else{q=[Array(p)];for(g=0;g<p;g++)k=d[e[g]][0],q[0][m.isReversed(h)?p-g-1:g]=k;p=1}h._lgroupsLength=
p;h._maxNameLength=f;return q}},{"../../registry":880,"./helpers":671}],670:[function(b,y,D){var n=b("../../lib"),m=b("../../registry"),p=!0;y.exports=function(h,a,d){function e(C,v,G){var I=u.indexOf(C),J=t[v];J||(J=t[v]=[]);-1===u.indexOf(C)&&(u.push(C),I=u.length-1);J[I]=G;return I}function l(C,v){var G=C._fullInput;if(m.hasTransform(G,"groupby")){var I=w[G.index];I||(I=m.getTransformIndices(G,"groupby"),I=n.keyedContainer(G,"transforms["+I[I.length-1]+"].styles","target","value.visible"),w[G.index]=
I);var J=I.get(C._group);void 0===J&&(J=!0);!1!==J&&I.set(C._group,v);x[G.index]=e(G.index,"visible",!1===G.visible?!1:!0)}else e(G.index,"visible",!1===G.visible?!1:v)}var k=a._fullLayout;if(!a._dragged&&!a._editing){var c=k.legend.itemclick,f=k.legend.itemdoubleclick;1===d&&"toggle"===c&&"toggleothers"===f&&p&&a.data&&a._context.showTips&&n.notifier(n._(a,"Double-click on legend to isolate one trace"),"long");p=!1;var g;1===d?g=c:2===d&&(g=f);if(g){var q=k.hiddenlabels?k.hiddenlabels.slice():[];
h=h.data()[0][0];d=a._fullData;k=h.trace;c=k.legendgroup;var t={},u=[],w=[],x=[];if(m.traceIs(k,"pie-like")){var E=h.label;h=q.indexOf(E);"toggle"===g?-1===h?q.push(E):q.splice(h,1):"toggleothers"===g&&(q=[],a.calcdata[0].forEach(function(C){E!==C.label&&q.push(C.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===q.length&&-1===h&&(q=[]));m.call("_guiRelayout",a,"hiddenlabels",q)}else{f=c&&c.length;var F=[];if(f)for(h=0;h<d.length;h++){var z=d[h];z.visible&&z.legendgroup===c&&
F.push(h)}if("toggle"===g){switch(k.visible){case !0:var B="legendonly";break;case !1:B=!1;break;case "legendonly":B=!0}if(f)for(h=0;h<d.length;h++)!1!==d[h].visible&&d[h].legendgroup===c&&l(d[h],B);else l(k,B)}else if("toggleothers"===g){F=!0;for(h=0;h<d.length;h++)if(z=d[h]===k,g=!0!==d[h].showlegend,!(z||g||(z=f&&d[h].legendgroup===c,z||!0!==d[h].visible||m.traceIs(d[h],"notLegendIsolatable")))){F=!1;break}for(h=0;h<d.length;h++)if(!1!==d[h].visible&&!m.traceIs(d[h],"notLegendIsolatable"))switch(k.visible){case "legendonly":l(d[h],
!0);break;case !0:B=F?!0:"legendonly",z=d[h]===k,g=!0!==d[h].showlegend&&!d[h].legendgroup,z=z||f&&d[h].legendgroup===c,l(d[h],z||g?!0:B)}}for(h=0;h<w.length;h++)if(g=w[h])for(c=g.constructUpdate(),B=Object.keys(c),g=0;g<B.length;g++)d=B[g],k=t[d]=t[d]||[],k[x[h]]=c[d];k=Object.keys(t);for(h=0;h<k.length;h++)for(d=k[h],g=0;g<u.length;g++)t[d].hasOwnProperty(g)||(t[d][g]=void 0);m.call("_guiRestyle",a,t,u)}}}}},{"../../lib":749,"../../registry":880}],671:[function(b,y,D){D.isGrouped=function(n){return-1!==
(n.traceorder||"").indexOf("grouped")};D.isVertical=function(n){return"h"!==n.orientation};D.isReversed=function(n){return-1!==(n.traceorder||"").indexOf("reversed")}},{}],672:[function(b,y,D){y.exports={moduleType:"component",name:"legend",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw"),style:b("./style")}},{"./attributes":665,"./defaults":667,"./draw":668,"./style":673}],673:[function(b,y,D){function n(f,g){return(g?"radial":"horizontal")+(f?"":"reversed")}
var m=b("d3"),p=b("../../registry"),h=b("../../lib"),a=b("../drawing"),d=b("../color"),e=b("../colorscale/helpers").extractOpts,l=b("../../traces/scatter/subtypes"),k=b("../../traces/pie/style_one"),c=b("../../traces/pie/helpers").castOption;y.exports=function(f,g,q){function t(F,z,B){var C=F[0].trace,v=C.marker||{},G=v.line||{};C=B?C.visible&&C.type===B:p.traceIs(C,"bar");F=m.select(z).select("g.legendpoints").selectAll("path.legend"+B).data(C?[F]:[]);F.enter().append("path").classed("legend"+B,
!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");F.exit().remove();F.each(function(I){var J=m.select(this);I=I[0];var K=E(I.mlw,v.line,5,2);J.style("stroke-width",K+"px").call(d.fill,I.mc||v.color);K&&d.stroke(J,I.mlc||G.color)})}function u(F,z,B){var C=F[0],v=C.trace,G=B?v.visible&&v.type===B:p.traceIs(v,B);F=m.select(z).select("g.legendpoints").selectAll("path.legend"+B).data(G?[F]:[]);F.enter().append("path").classed("legend"+B,!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");
F.exit().remove();F.size()&&(B=(v.marker||{}).line,z=E(c(B.width,C.pts),B,5,2),v=h.minExtend(v,{marker:{line:{width:z}}}),v.marker.line.color=B.color,C=h.minExtend(C,{trace:v}),k(F,C,v))}var w=g._fullLayout;q||(q=w.legend);var x="constant"===q.itemsizing,E=function(F,z,B,C){if(!(F+1))if(z&&0<z.width)F=z.width;else return 0;return x?C:Math.min(F,B)};f.each(function(F){var z=m.select(this);z=h.ensureSingle(z,"g","layers");z.style("opacity",F[0].trace.opacity);var B=q.valign,C=F[0].lineHeight,v=F[0].height;
"middle"!==B&&C&&v?z.attr("transform","translate(0,"+.5*{top:1,bottom:-1}[B]*(C-v+3)+")"):z.attr("transform",null);z.selectAll("g.legendfill").data([F]).enter().append("g").classed("legendfill",!0);z.selectAll("g.legendlines").data([F]).enter().append("g").classed("legendlines",!0);z=z.selectAll("g.legendsymbols").data([F]);z.enter().append("g").classed("legendsymbols",!0);z.selectAll("g.legendpoints").data([F]).enter().append("g").classed("legendpoints",!0)}).each(function(F){var z=F[0].trace;F=
[];if(z.visible)switch(z.type){case "histogram2d":case "heatmap":F=[["M-15,-2V4H15V-2Z"]];var B=!0;break;case "choropleth":case "choroplethmapbox":F=[["M-6,-6V6H6V-6Z"]];B=!0;break;case "densitymapbox":F=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];B="radial";break;case "cone":F=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];B=!1;break;case "streamtube":F=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],
["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];B=!1;break;case "surface":F=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];B=!0;break;case "mesh3d":F=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];B=!1;break;case "volume":F=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];B=!0;break;case "isosurface":F=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],B=!1}F=m.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(F);
F.enter().append("path").classed("legend3dandfriends",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1);F.exit().remove();F.each(function(C,v){var G=m.select(this),I=e(z),J=I.colorscale,K=I.reversescale;I=function(H){H.size()&&a.gradient(H,g,"legendfill-"+z.uid,n(K,"radial"===B),J,"fill")};if(J)B||(N=J.length,N=0===v?J[K?N-1:0][1]:1===v?J[K?0:N-1][1]:J[Math.floor((N-1)/2)][1]);else{var N=z.vertexcolor||z.facecolor||z.color;N=h.isArrayOrTypedArray(N)?N[v]||N[0]:N}G.attr("d",C[0]);
N?G.call(d.fill,N):G.call(I)})}).each(function(F){var z=F[0].trace,B="waterfall"===z.type;if(F[0]._distinct&&B)return B=F[0].trace[F[0].dir].marker,F[0].mc=B.color,F[0].mlw=B.line.width,F[0].mlc=B.line.color,t(F,this,"waterfall");var C=[];z.visible&&B&&(C=F[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);F=m.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(C);
F.enter().append("path").classed("legendwaterfall",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1);F.exit().remove();F.each(function(v){var G=m.select(this),I=z[v[0]].marker,J=E(void 0,I.line,5,2);G.attr("d",v[1]).style("stroke-width",J+"px").call(d.fill,I.color);J&&G.call(d.stroke,I.line.color)})}).each(function(F){t(F,this,"funnel")}).each(function(F){t(F,this)}).each(function(F){var z=F[0].trace,B=m.select(this).select("g.legendpoints").selectAll("path.legendbox").data(z.visible&&
p.traceIs(z,"box-violin")?[F]:[]);B.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");B.exit().remove();B.each(function(){var C=m.select(this);if("all"!==z.boxpoints&&"all"!==z.points||0!==d.opacity(z.fillcolor)||0!==d.opacity((z.line||{}).color)){var v=E(void 0,z.line,5,2);C.style("stroke-width",v+"px").call(d.fill,z.fillcolor);v&&d.stroke(C,z.line.color)}else C=h.minExtend(z,{marker:{size:x?12:h.constrain(z.marker.size,2,16),sizeref:1,sizemin:1,
sizemode:"diameter"}}),B.call(a.pointStyle,C,g)})}).each(function(F){u(F,this,"funnelarea")}).each(function(F){u(F,this,"pie")}).each(function(F){var z=F[0],B=z.trace,C=B.visible&&B.fill&&"none"!==B.fill,v=l.hasLines(B),G=B.contours,I=!1,J=!1,K=e(B),N=K.colorscale,H=K.reversescale,L=function(S){S.size()&&a.gradient(S,g,"legendfill-"+B.uid,n(H),N,"fill")};K=function(S){if(S.size()){var O="legendline-"+B.uid;a.lineGroupStyle(S);a.gradient(S,g,O,n(H),N,"stroke")}};if(G){var P=G.coloring;"lines"===P?
I=!0:v="none"===P||"heatmap"===P||G.showlines;if("constraint"===G.type)C="\x3d"!==G._operation;else if("fill"===P||"heatmap"===P)J=!0}G=l.hasMarkers(B)||l.hasText(B)||!C&&!J?"M5,0":v||I?"M5,-2":"M5,-3";P=m.select(this);F=P.select(".legendfill").selectAll("path").data(C||J?[F]:[]);F.enter().append("path").classed("js-fill",!0);F.exit().remove();F.attr("d",G+"h30v6h-30z").call(C?a.fillGroupStyle:L);if(v||I){C=E(void 0,B.line,10,5);C=h.minExtend(B,{line:{width:C}});var Q=[h.minExtend(z,{trace:C})]}z=
P.select(".legendlines").selectAll("path").data(v||I?[Q]:[]);z.enter().append("path").classed("js-line",!0);z.exit().remove();z.attr("d",G+(I?"l30,0.0001":"h30")).call(v?a.lineGroupStyle:K)}).each(function(F){function z(H,L,P,Q){H=h.nestedProperty(v,H).get();L=h.isArrayOrTypedArray(H)&&L?L(H):H;x&&L&&void 0!==Q&&(L=Q);if(P){if(L<P[0])return P[0];if(L>P[1])return P[1]}return L}function B(H){return C._distinct&&C.index&&H[C.index]?H[C.index]:H[0]}var C=F[0],v=C.trace;F=l.hasMarkers(v);var G=l.hasText(v),
I=l.hasLines(v);if(F||G||I){var J={};var K={};if(F){J.mc=z("marker.color",B);J.mx=z("marker.symbol",B);J.mo=z("marker.opacity",h.mean,[.2,1]);J.mlc=z("marker.line.color",B);J.mlw=z("marker.line.width",h.mean,[0,5],2);K.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var N=z("marker.size",h.mean,[2,16],12);J.ms=N;K.marker.size=N}I&&(K.line={width:z("line.width",B,[0,10],5)});G&&(J.tx="Aa",J.tp=z("textposition",B),J.ts=10,J.tc=z("textfont.color",B),J.tf=z("textfont.family",B));J=[h.minExtend(C,J)];
K=h.minExtend(v,K);K.selectedpoints=null;K.texttemplate=null}I=m.select(this).select("g.legendpoints");N=I.selectAll("path.scatterpts").data(F?J:[]);N.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform","translate(20,0)");N.exit().remove();N.call(a.pointStyle,K,g);F&&(J[0].mrc=3);F=I.selectAll("g.pointtext").data(G?J:[]);F.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)");F.exit().remove();F.selectAll("text").call(a.textPointStyle,
K,g)}).each(function(F){var z=F[0].trace;F=m.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(z.visible&&"candlestick"===z.type?[F,F]:[]);F.enter().append("path").classed("legendcandle",!0).attr("d",function(B,C){return C?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);F.exit().remove();F.each(function(B,C){B=m.select(this);C=z[C?"increasing":"decreasing"];var v=E(void 0,C.line,5,2);B.style("stroke-width",v+"px").call(d.fill,
C.fillcolor);v&&d.stroke(B,C.line.color)})}).each(function(F){var z=F[0].trace;F=m.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(z.visible&&"ohlc"===z.type?[F,F]:[]);F.enter().append("path").classed("legendohlc",!0).attr("d",function(B,C){return C?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1);F.exit().remove();F.each(function(B,C){B=m.select(this);C=z[C?"increasing":"decreasing"];var v=E(void 0,C.line,5,2);B.style("fill",
"none").call(a.dashLine,C.line.dash,v);v&&d.stroke(B,C.line.color)})})}},{"../../lib":749,"../../registry":880,"../../traces/pie/helpers":1134,"../../traces/pie/style_one":1140,"../../traces/scatter/subtypes":1179,"../color":615,"../colorscale/helpers":626,"../drawing":637,d3:169}],674:[function(b,y,D){function n(w,x){var E=x.currentTarget,F=E.getAttribute("data-attr");x=E.getAttribute("data-val")||!0;var z=w._fullLayout,B={},C=g.list(w,null,!0),v=z._cartesianSpikesEnabled,G;if("zoom"===F){F="in"===
x?.5:2;E=(1+F)/2;var I=(1-F)/2;for(G=0;G<C.length;G++)if(F=C[G],!F.fixedrange){var J=F._name;if("auto"===x)B[J+".autorange"]=!0;else if("reset"===x){if(void 0===F._rangeInitial)B[J+".autorange"]=!0;else{var K=F._rangeInitial.slice();B[J+".range[0]"]=K[0];B[J+".range[1]"]=K[1]}void 0!==F._showSpikeInitial&&(B[J+".showspikes"]=F._showSpikeInitial,"on"!==v||F._showSpikeInitial||(v="off"))}else K=[F.r2l(F.range[0]),F.r2l(F.range[1])],K=[E*K[0]+I*K[1],E*K[1]+I*K[0]],B[J+".range[0]"]=F.l2r(K[0]),B[J+".range[1]"]=
F.l2r(K[1])}}else"hovermode"!==F||"x"!==x&&"y"!==x||(x=z._isHoriz?"y":"x",E.setAttribute("data-val",x)),B[F]=x;z._cartesianSpikesEnabled=v;c.call("_guiRelayout",w,B)}function m(w,x){x=x.currentTarget;var E=x.getAttribute("data-attr");x=x.getAttribute("data-val")||!0;var F=w._fullLayout._subplots.gl3d||[],z={};E=E.split(".");for(var B=0;B<F.length;B++)z[F[B]+"."+E[1]]=x;z.dragmode="pan"===x?x:"zoom";c.call("_guiRelayout",w,z)}function p(w,x){var E=x.currentTarget.getAttribute("data-attr");x="resetLastSave"===
E;E="resetDefault"===E;for(var F=w._fullLayout,z=F._subplots.gl3d||[],B={},C=0;C<z.length;C++){var v=z[C],G=v+".camera",I=v+".aspectratio",J=v+".aspectmode";v=F[v]._scene;if(x){B[G+".up"]=v.viewInitial.up;B[G+".eye"]=v.viewInitial.eye;B[G+".center"]=v.viewInitial.center;var K=!0}else E&&(B[G+".up"]=null,B[G+".eye"]=null,B[G+".center"]=null,K=!0);K&&(B[I+".x"]=v.viewInitial.aspectratio.x,B[I+".y"]=v.viewInitial.aspectratio.y,B[I+".z"]=v.viewInitial.aspectratio.z,B[J]=v.viewInitial.aspectmode)}c.call("_guiRelayout",
w,B)}function h(w,x){x=x.currentTarget;var E=x._previousVal;w=w._fullLayout;var F=w._subplots.gl3d||[],z=["xaxis","yaxis","zaxis"],B={},C={};if(E)C=E,x._previousVal=null;else{for(E=0;E<F.length;E++){var v=F[E],G=w[v],I=v+".hovermode";B[I]=G.hovermode;C[I]=!1;for(I=0;3>I;I++){var J=z[I],K=v+"."+J+".showspikes";C[K]=!1;B[K]=G[J].showspikes}}x._previousVal=B}return C}function a(w,x){var E=x.currentTarget;x=E.getAttribute("data-attr");E=E.getAttribute("data-val")||!0;for(var F=w._fullLayout,z=F._subplots.geo||
[],B=0;B<z.length;B++){var C=z[B],v=F[C];"zoom"===x&&(v=v.projection.scale,c.call("_guiRelayout",w,C+".projection.scale","in"===E?2*v:.5*v))}"reset"===x&&k(w,"geo")}function d(w){w=w._fullLayout;return w.hovermode?!1:w._has("cartesian")?w._isHoriz?"y":"x":"closest"}function e(w){var x=d(w);c.call("_guiRelayout",w,"hovermode",x)}function l(w,x){x=x.currentTarget.getAttribute("data-val");for(var E=w._fullLayout,F=E._subplots.mapbox||[],z={},B=0;B<F.length;B++){var C=F[B],v=E[C].zoom;z[C+".zoom"]="in"===
x?1.05*v:v/1.05}c.call("_guiRelayout",w,z)}function k(w,x){var E=w._fullLayout;x=E._subplots[x]||[];for(var F={},z=0;z<x.length;z++)for(var B=x[z],C=E[B]._subplot.viewInitial,v=Object.keys(C),G=0;G<v.length;G++){var I=v[G];F[B+"."+I]=C[I]}c.call("_guiRelayout",w,F)}var c=b("../../registry"),f=b("../../plots/plots"),g=b("../../plots/cartesian/axis_ids");D=b("../../fonts/ploticon");var q=b("../shapes/draw").eraseActiveShape,t=b("../../lib"),u=t._;b=y.exports={};b.toImage={name:"toImage",title:function(w){return"png"===
((w._context.toImageButtonOptions||{}).format||"png")?u(w,"Download plot as a png"):u(w,"Download plot")},icon:D.camera,click:function(w){var x=w._context.toImageButtonOptions,E={format:x.format||"png"};t.notifier(u(w,"Taking snapshot - this may take a few seconds"),"long");"svg"!==E.format&&t.isIE()&&(t.notifier(u(w,"IE only supports svg.  Changing format to svg."),"long"),E.format="svg");["filename","width","height","scale"].forEach(function(F){F in x&&(E[F]=x[F])});c.call("downloadImage",w,E).then(function(F){t.notifier(u(w,
"Snapshot succeeded")+" - "+F,"long")}).catch(function(){t.notifier(u(w,"Sorry, there was a problem downloading your snapshot!"),"long")})}};b.sendDataToCloud={name:"sendDataToCloud",title:function(w){return u(w,"Edit in Chart Studio")},icon:D.disk,click:function(w){f.sendDataToCloud(w)}};b.editInChartStudio={name:"editInChartStudio",title:function(w){return u(w,"Edit in Chart Studio")},icon:D.pencil,click:function(w){f.sendDataToCloud(w)}};b.zoom2d={name:"zoom2d",title:function(w){return u(w,"Zoom")},
attr:"dragmode",val:"zoom",icon:D.zoombox,click:n};b.pan2d={name:"pan2d",title:function(w){return u(w,"Pan")},attr:"dragmode",val:"pan",icon:D.pan,click:n};b.select2d={name:"select2d",title:function(w){return u(w,"Box Select")},attr:"dragmode",val:"select",icon:D.selectbox,click:n};b.lasso2d={name:"lasso2d",title:function(w){return u(w,"Lasso Select")},attr:"dragmode",val:"lasso",icon:D.lasso,click:n};b.drawclosedpath={name:"drawclosedpath",title:function(w){return u(w,"Draw closed freeform")},attr:"dragmode",
val:"drawclosedpath",icon:D.drawclosedpath,click:n};b.drawopenpath={name:"drawopenpath",title:function(w){return u(w,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:D.drawopenpath,click:n};b.drawline={name:"drawline",title:function(w){return u(w,"Draw line")},attr:"dragmode",val:"drawline",icon:D.drawline,click:n};b.drawrect={name:"drawrect",title:function(w){return u(w,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:D.drawrect,click:n};b.drawcircle={name:"drawcircle",title:function(w){return u(w,
"Draw circle")},attr:"dragmode",val:"drawcircle",icon:D.drawcircle,click:n};b.eraseshape={name:"eraseshape",title:function(w){return u(w,"Erase active shape")},icon:D.eraseshape,click:q};b.zoomIn2d={name:"zoomIn2d",title:function(w){return u(w,"Zoom in")},attr:"zoom",val:"in",icon:D.zoom_plus,click:n};b.zoomOut2d={name:"zoomOut2d",title:function(w){return u(w,"Zoom out")},attr:"zoom",val:"out",icon:D.zoom_minus,click:n};b.autoScale2d={name:"autoScale2d",title:function(w){return u(w,"Autoscale")},
attr:"zoom",val:"auto",icon:D.autoscale,click:n};b.resetScale2d={name:"resetScale2d",title:function(w){return u(w,"Reset axes")},attr:"zoom",val:"reset",icon:D.home,click:n};b.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(w){return u(w,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:D.tooltip_basic,gravity:"ne",click:n};b.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(w){return u(w,"Compare data on hover")},attr:"hovermode",val:function(w){return w._fullLayout._isHoriz?
"y":"x"},icon:D.tooltip_compare,gravity:"ne",click:n};b.zoom3d={name:"zoom3d",title:function(w){return u(w,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:D.zoombox,click:m};b.pan3d={name:"pan3d",title:function(w){return u(w,"Pan")},attr:"scene.dragmode",val:"pan",icon:D.pan,click:m};b.orbitRotation={name:"orbitRotation",title:function(w){return u(w,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:D["3d_rotate"],click:m};b.tableRotation={name:"tableRotation",title:function(w){return u(w,
"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:D["z-axis"],click:m};b.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(w){return u(w,"Reset camera to default")},attr:"resetDefault",icon:D.home,click:p};b.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(w){return u(w,"Reset camera to last save")},attr:"resetLastSave",icon:D.movie,click:p};b.hoverClosest3d={name:"hoverClosest3d",title:function(w){return u(w,"Toggle show closest data on hover")},attr:"hovermode",
val:null,toggle:!0,icon:D.tooltip_basic,gravity:"ne",click:function(w,x){x=h(w,x);c.call("_guiRelayout",w,x)}};b.zoomInGeo={name:"zoomInGeo",title:function(w){return u(w,"Zoom in")},attr:"zoom",val:"in",icon:D.zoom_plus,click:a};b.zoomOutGeo={name:"zoomOutGeo",title:function(w){return u(w,"Zoom out")},attr:"zoom",val:"out",icon:D.zoom_minus,click:a};b.resetGeo={name:"resetGeo",title:function(w){return u(w,"Reset")},attr:"reset",val:null,icon:D.autoscale,click:a};b.hoverClosestGeo={name:"hoverClosestGeo",
title:function(w){return u(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:D.tooltip_basic,gravity:"ne",click:e};b.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(w){return u(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:D.tooltip_basic,gravity:"ne",click:e};b.hoverClosestPie={name:"hoverClosestPie",title:function(w){return u(w,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:D.tooltip_basic,gravity:"ne",
click:e};b.resetViewSankey={name:"resetSankeyGroup",title:function(w){return u(w,"Reset view")},icon:D.home,click:function(w){for(var x={"node.groups":[],"node.x":[],"node.y":[]},E=0;E<w._fullData.length;E++){var F=w._fullData[E]._viewInitial;x["node.groups"].push(F.node.groups.slice());x["node.x"].push(F.node.x.slice());x["node.y"].push(F.node.y.slice())}c.call("restyle",w,x)}};b.toggleHover={name:"toggleHover",title:function(w){return u(w,"Toggle show closest data on hover")},attr:"hovermode",val:null,
toggle:!0,icon:D.tooltip_basic,gravity:"ne",click:function(w,x){x=h(w,x);x.hovermode=d(w);c.call("_guiRelayout",w,x)}};b.resetViews={name:"resetViews",title:function(w){return u(w,"Reset views")},icon:D.home,click:function(w,x){var E=x.currentTarget;E.setAttribute("data-attr","zoom");E.setAttribute("data-val","reset");n(w,x);E.setAttribute("data-attr","resetLastSave");p(w,x);k(w,"geo");k(w,"mapbox")}};b.toggleSpikelines={name:"toggleSpikelines",title:function(w){return u(w,"Toggle Spike Lines")},
icon:D.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(w){var x=w._fullLayout;x._cartesianSpikesEnabled="on"===x._cartesianSpikesEnabled?"off":"on";x=c;for(var E=x.call,F="on"===w._fullLayout._cartesianSpikesEnabled,z=g.list(w,null,!0),B={},C=0;C<z.length;C++){var v=z[C];B[v._name+".showspikes"]=F?!0:v._showSpikeInitial}E.call(x,"_guiRelayout",w,B)}};b.resetViewMapbox={name:"resetViewMapbox",title:function(w){return u(w,"Reset view")},attr:"reset",icon:D.home,click:function(w){k(w,
"mapbox")}};b.zoomInMapbox={name:"zoomInMapbox",title:function(w){return u(w,"Zoom in")},attr:"zoom",val:"in",icon:D.zoom_plus,click:l};b.zoomOutMapbox={name:"zoomOutMapbox",title:function(w){return u(w,"Zoom out")},attr:"zoom",val:"out",icon:D.zoom_minus,click:l}},{"../../fonts/ploticon":728,"../../lib":749,"../../plots/cartesian/axis_ids":800,"../../plots/plots":860,"../../registry":880,"../shapes/draw":696}],675:[function(b,y,D){D.manage=b("./manage")},{"./manage":676}],676:[function(b,y,D){function n(q){function t(U){if(U.length){for(var X=
[],da=0;da<U.length;da++){var ea=U[da];-1===E.indexOf(ea)&&X.push(f[ea])}P.push(X)}}var u=q._fullLayout,w=q._fullData,x=q._context,E=x.modeBarButtonsToRemove;q=x.modeBarButtonsToAdd;var F=u._has("cartesian"),z=u._has("gl3d"),B=u._has("geo"),C=u._has("pie"),v=u._has("funnelarea"),G=u._has("gl2d"),I=u._has("ternary"),J=u._has("mapbox"),K=u._has("polar"),N=u._has("sankey"),H=m(u),L=k(u.hovermode),P=[],Q=["toImage"];x.showEditInChartStudio?Q.push("editInChartStudio"):x.showSendToCloud&&Q.push("sendDataToCloud");
t(Q);x=[];Q=[];var S=[],O=[];1<(F||G||C||v||I)+B+z+J+K?(Q=["toggleHover"],S=["resetViews"]):B?(x=["zoomInGeo","zoomOutGeo"],Q=["hoverClosestGeo"],S=["resetGeo"]):z?(Q=["hoverClosest3d"],S=["resetCameraDefault3d","resetCameraLastSave3d"]):J?(x=["zoomInMapbox","zoomOutMapbox"],Q=["toggleHover"],S=["resetViewMapbox"]):G?Q=["hoverClosestGl2d"]:C?Q=["hoverClosestPie"]:N?(Q=["hoverClosestCartesian","hoverCompareCartesian"],S=["resetViewSankey"]):Q=["toggleHover"];F&&(Q=["toggleSpikelines","hoverClosestCartesian",
"hoverCompareCartesian"]);if(h(w)||L)Q=[];!F&&!G||H||(x=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==S[0]&&(S=["resetScale2d"]));z?O=["zoom3d","pan3d","orbitRotation","tableRotation"]:(F||G)&&!H||I?O=["zoom2d","pan2d"]:J||B?O=["pan2d"]:K&&(O=["zoom2d"]);p(w)&&O.push("select2d","lasso2d");if(Array.isArray(q)){w=[];for(F=0;F<q.length;F++)z=q[F],"string"===typeof z?-1!==g.indexOf(z)&&(u._has("mapbox")||u._has("cartesian"))&&O.push(z):w.push(z);q=w}t(O);t(x.concat(S));t(Q);return a(P,q)}function m(q){q=
d.list({_fullLayout:q},null,!0);for(var t=0;t<q.length;t++)if(!q[t].fixedrange)return!1;return!0}function p(q){for(var t=!1,u=0;u<q.length&&!t;u++){var w=q[u];if(w._module&&w._module.selectPoints)if(l.traceIs(w,"scatter-like")){if(e.hasMarkers(w)||e.hasText(w))t=!0}else if(l.traceIs(w,"box-violin")){if("all"===w.boxpoints||"all"===w.points)t=!0}else t=!0}return t}function h(q){for(var t=0;t<q.length;t++)if(!l.traceIs(q[t],"noHover"))return!1;return!0}function a(q,t){if(t.length)if(Array.isArray(t[0]))for(var u=
0;u<t.length;u++)q.push(t[u]);else q.push(t);return q}var d=b("../../plots/cartesian/axis_ids"),e=b("../../traces/scatter/subtypes"),l=b("../../registry"),k=b("../fx/helpers").isUnifiedHover,c=b("./modebar"),f=b("./buttons");y.exports=function(q){var t=q._fullLayout,u=q._context,w=t._modeBar;if(u.displayModeBar||u.watermark){if(!Array.isArray(u.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(u.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");
var x=u.modeBarButtons;if(Array.isArray(x)&&x.length)for(u=0;u<x.length;u++)for(var E=x[u],F=0;F<E.length;F++){var z=E[F];if("string"===typeof z)if(void 0!==f[z])x[u][F]=f[z];else throw Error("*modeBarButtons* configuration options invalid button name");}else x=!u.displayModeBar&&u.watermark?[]:n(q);w?w.update(q,x):t._modeBar=c(q,x)}else w&&(w.destroy(),delete t._modeBar)};var g="drawline drawopenpath drawclosedpath drawcircle drawrect eraseshape".split(" ")},{"../../plots/cartesian/axis_ids":800,
"../../registry":880,"../../traces/scatter/subtypes":1179,"../fx/helpers":651,"./buttons":674,"./modebar":677}],677:[function(b,y,D){function n(e){this.container=e.container;this.element=document.createElement("div");this.update(e.graphInfo,e.buttons);this.container.appendChild(this.element)}var m=b("d3"),p=b("fast-isnumeric"),h=b("../../lib"),a=b("../../fonts/ploticon"),d=new DOMParser;b=n.prototype;b.update=function(e,l){this.graphInfo=e;e=this.graphInfo._context;var k=this.graphInfo._fullLayout,
c="modebar-"+k._uid;this.element.setAttribute("id",c);this._uid=c;this.element.className="modebar";"hover"===e.displayModeBar&&(this.element.className+=" modebar--hover ease-bg");"v"===k.modebar.orientation&&(this.element.className+=" vertical",l=l.reverse());var f=k.modebar,g="hover"===e.displayModeBar?".js-plotly-plot .plotly:hover ":"";h.deleteRelatedStyleRule(c);h.addRelatedStyleRule(c,g+"#"+c+" .modebar-group","background-color: "+f.bgcolor);h.addRelatedStyleRule(c,"#"+c+" .modebar-btn .icon path",
"fill: "+f.color);h.addRelatedStyleRule(c,"#"+c+" .modebar-btn:hover .icon path","fill: "+f.activecolor);h.addRelatedStyleRule(c,"#"+c+" .modebar-btn.active .icon path","fill: "+f.activecolor);c=!this.hasButtons(l);f=this.hasLogo!==e.displaylogo;g=this.locale!==e.locale;this.locale=e.locale;if(c||f||g)if(this.removeAllButtons(),this.updateButtons(l),e.watermark||e.displaylogo)l=this.getLogo(),e.watermark&&(l.className+=" watermark"),"v"===k.modebar.orientation?this.element.insertBefore(l,this.element.childNodes[0]):
this.element.appendChild(l),this.hasLogo=!0;this.updateActiveButton()};b.updateButtons=function(e){var l=this;this.buttons=e;this.buttonElements=[];this.buttonsNames=[];this.buttons.forEach(function(k){var c=l.createGroup();k.forEach(function(f){var g=f.name;if(!g)throw Error("must provide button 'name' in button config");if(-1!==l.buttonsNames.indexOf(g))throw Error("button name '"+g+"' is taken");l.buttonsNames.push(g);f=l.createButton(f);l.buttonElements.push(f);c.appendChild(f)});l.element.appendChild(c)})};
b.createGroup=function(){var e=document.createElement("div");e.className="modebar-group";return e};b.createButton=function(e){var l=this,k=document.createElement("a");k.setAttribute("rel","tooltip");k.className="modebar-btn";var c=e.title;void 0===c?c=e.name:"function"===typeof c&&(c=c(this.graphInfo));(c||0===c)&&k.setAttribute("data-title",c);void 0!==e.attr&&k.setAttribute("data-attr",e.attr);c=e.val;void 0!==c&&("function"===typeof c&&(c=c(this.graphInfo)),k.setAttribute("data-val",c));if("function"!==
typeof e.click)throw Error("must provide button 'click' function in button config");k.addEventListener("click",function(f){e.click(l.graphInfo,f);l.updateActiveButton(f.currentTarget)});k.setAttribute("data-toggle",e.toggle||!1);e.toggle&&m.select(k).classed("active",!0);c=e.icon;"function"===typeof c?k.appendChild(c()):k.appendChild(this.createIcon(c||a.question));k.setAttribute("data-gravity",e.gravity||"n");return k};b.createIcon=function(e){var l=p(e.height)?Number(e.height):e.ascent-e.descent;
if(e.path){var k=document.createElementNS("http://www.w3.org/2000/svg","svg");k.setAttribute("viewBox",[0,0,e.width,l].join(" "));k.setAttribute("class","icon");l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("d",e.path);e.transform?l.setAttribute("transform",e.transform):void 0!==e.ascent&&l.setAttribute("transform","matrix(1 0 0 -1 0 "+e.ascent+")");k.appendChild(l)}e.svg&&(k=d.parseFromString(e.svg,"application/xml").childNodes[0]);k.setAttribute("height","1em");
k.setAttribute("width","1em");return k};b.updateActiveButton=function(e){var l=this.graphInfo._fullLayout,k=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(c){var f=c.getAttribute("data-val")||!0,g=c.getAttribute("data-attr"),q="true"===c.getAttribute("data-toggle");c=m.select(c);q?g===k&&c.classed("active",!c.classed("active")):(g=null===g?g:h.nestedProperty(l,g).get(),c.classed("active",g===f))})};b.hasButtons=function(e){var l=this.buttons;if(!l||e.length!==l.length)return!1;
for(var k=0;k<e.length;++k){if(e[k].length!==l[k].length)return!1;for(var c=0;c<e[k].length;c++)if(e[k][c].name!==l[k][c].name)return!1}return!0};b.getLogo=function(){var e=this.createGroup(),l=document.createElement("a");l.href="https://plotly.com/";l.target="_blank";l.setAttribute("data-title",h._(this.graphInfo,"Produced with Plotly"));l.className="modebar-btn plotlyjsicon modebar-btn--logo";l.appendChild(this.createIcon(a.newplotlylogo));e.appendChild(l);return e};b.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);
this.hasLogo=!1};b.destroy=function(){h.removeElement(this.container.querySelector(".modebar"));h.deleteRelatedStyleRule(this._uid)};y.exports=function(e,l){var k=e._fullLayout;e=new n({graphInfo:e,container:k._modebardiv.node(),buttons:l});k._privateplot&&m.select(e.element).append("span").classed("badge-private float--left",!0).text("PRIVATE");return e}},{"../../fonts/ploticon":728,"../../lib":749,d3:169,"fast-isnumeric":241}],678:[function(b,y,D){D=b("../../plots/font_attributes");var n=b("../color/attributes");
b=b("../../plot_api/plot_template").templatedArray;b=b("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:"month year day hour minute second all".split(" "),dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});y.exports={visible:{valType:"boolean",editType:"plot"},buttons:b,
x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:D({editType:"plot"}),bgcolor:{valType:"color",dflt:n.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"plot"},borderwidth:{valType:"number",
min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":787,"../../plots/font_attributes":825,"../color/attributes":614}],679:[function(b,y,D){y.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],680:[function(b,y,D){function n(k,c,f,g){function q(t,u){return p.coerce(k,c,e.buttons,t,u)}f=g.calendar;q("visible")&&(g=q("step"),"all"!==g&&(!f||"gregorian"===f||"month"!==g&&"year"!==g?q("stepmode"):c.stepmode="backward",q("count")),q("label"))}function m(k,
c,f){f=f.filter(function(u){return c[u].anchor===k._id});for(var g=0,q=0;q<f.length;q++){var t=c[f[q]].domain;t&&(g=Math.max(t[1],g))}return[k.domain[0],g+l.yPad]}var p=b("../../lib"),h=b("../color"),a=b("../../plot_api/plot_template"),d=b("../../plots/array_container_defaults"),e=b("./attributes"),l=b("./constants");y.exports=function(k,c,f,g,q){function t(x,E){return p.coerce(u,w,e,x,E)}var u=k.rangeselector||{},w=a.newContainer(c,"rangeselector");q=d(u,w,{name:"buttons",handleItemDefaults:n,calendar:q});
t("visible",0<q.length)&&(g=m(c,f,g),t("x",g[0]),t("y",g[1]),p.noneOrAll(k,c,["x","y"]),t("xanchor"),t("yanchor"),p.coerceFont(t,"font",f.font),k=t("bgcolor"),t("activecolor",h.contrast(k,l.lightAmount,l.darkAmount)),t("bordercolor"),t("borderwidth"))}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/array_container_defaults":793,"../color":615,"./attributes":678,"./constants":679}],681:[function(b,y,D){function n(B){B=u.list(B,"x",!0);for(var C=[],v=0;v<B.length;v++){var G=B[v];
G.rangeselector&&G.rangeselector.visible&&C.push(G)}return C}function m(B){return B._id}function p(B,C,v){if("all"===C.step)return!0===B.autorange;C=Object.keys(v);return B.range[0]===v[C[0]]&&B.range[1]===v[C[1]]}function h(B,C,v){B=q.ensureSingle(B,"rect","selector-rect",function(G){G.attr("shape-rendering","crispEdges")});B.attr({rx:F.rx,ry:F.ry});B.call(f.stroke,C.bordercolor).call(f.fill,v._isActive||v._isHovered?C.activecolor:C.bgcolor).style("stroke-width",C.borderwidth+"px")}function a(B,
C,v,G){q.ensureSingle(B,"text","selector-text",function(I){I.classed("user-select-none",!0).attr("text-anchor","middle")}).call(g.font,C.font).text(d(v,G._fullLayout._meta)).call(function(I){t.convertToTspans(I,G)})}function d(B,C){return B.label?C?q.templateString(B.label,C):B.label:"all"===B.step?"all":B.count+B.step.charAt(0)}function e(B,C,v,G,I){var J=0,K=0,N=v.borderwidth;C.each(function(){var Q=l.select(this).select(".selector-text");Q=Math.max(v.font.size*w*t.lineCount(Q),16)+3;K=Math.max(K,
Q)});C.each(function(){var Q=l.select(this),S=Q.select(".selector-rect"),O=Q.select(".selector-text"),U=O.node()&&g.bBox(O.node()).width,X=v.font.size*w,da=t.lineCount(O);U=Math.max(U+10,F.minButtonWidth);Q.attr("transform","translate("+(N+J)+","+N+")");S.attr({x:0,y:0,width:U,height:K});t.positionText(O,U/2,K/2-(da-1)*X/2+3);J+=U+5});var H=B._fullLayout._size;C=H.l+H.w*v.x;H=H.t+H.h*(1-v.y);var L="left";q.isRightAnchor(v)&&(C-=J,L="right");q.isCenterAnchor(v)&&(C-=J/2,L="center");var P="top";q.isBottomAnchor(v)&&
(H-=K,P="bottom");q.isMiddleAnchor(v)&&(H-=K/2,P="middle");J=Math.ceil(J);K=Math.ceil(K);C=Math.round(C);H=Math.round(H);c.autoMargin(B,G+"-range-selector",{x:v.x,y:v.y,l:J*x[L],r:J*E[L],b:K*E[P],t:K*x[P]});I.attr("transform","translate("+C+","+H+")")}var l=b("d3"),k=b("../../registry"),c=b("../../plots/plots"),f=b("../color"),g=b("../drawing"),q=b("../../lib"),t=b("../../lib/svg_text_utils"),u=b("../../plots/cartesian/axis_ids");D=b("../../constants/alignment");var w=D.LINE_SPACING,x=D.FROM_TL,E=
D.FROM_BR,F=b("./constants"),z=b("./get_update_object");y.exports=function(B){var C=B._fullLayout._infolayer.selectAll(".rangeselector").data(n(B),m);C.enter().append("g").classed("rangeselector",!0);C.exit().remove();C.style({cursor:"pointer","pointer-events":"all"});C.each(function(v){var G=l.select(this),I=v.rangeselector,J=G.selectAll("g.button").data(q.filterVisible(I.buttons));J.enter().append("g").classed("button",!0);J.exit().remove();J.each(function(K){var N=l.select(this),H=z(v,K);K._isActive=
p(v,K,H);N.call(h,I,K);N.call(a,I,K,B);N.on("click",function(){B._dragged||k.call("_guiRelayout",B,H)});N.on("mouseover",function(){K._isHovered=!0;N.call(h,I,K)});N.on("mouseout",function(){K._isHovered=!1;N.call(h,I,K)})});e(B,J,I,v._name,G)})}},{"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axis_ids":800,"../../plots/plots":860,"../../registry":880,"../color":615,"../drawing":637,"./constants":679,"./get_update_object":682,d3:169}],682:[function(b,
y,D){var n=b("d3");y.exports=function(m,p){var h=m._name,a={};if("all"===p.step)a[h+".autorange"]=!0;else{var d=m.range,e=new Date(m.r2l(d[1])),l=p.step,k=p.count;switch(p.stepmode){case "backward":var c=m.l2r(+n.time[l].utc.offset(e,-k));break;case "todate":p=n.time[l].utc.offset(e,-k),c=m.l2r(+n.time[l].utc.ceil(p))}m=[c,d[1]];a[h+".range[0]"]=m[0];a[h+".range[1]"]=m[1]}return a}},{d3:169}],683:[function(b,y,D){y.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:b("./attributes")}}},
layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":678,"./defaults":680,"./draw":681}],684:[function(b,y,D){b=b("../color/attributes");y.exports={bgcolor:{valType:"color",dflt:b.background,editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",
items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":614}],685:[function(b,y,D){var n=b("../../plots/cartesian/axis_ids").list,m=b("../../plots/cartesian/autorange").getAutoRange,p=b("./constants");y.exports=function(h){for(var a=
n(h,"x",!0),d=0;d<a.length;d++){var e=a[d],l=e[p.name];l&&l.visible&&l.autorange&&(l._input.autorange=!0,l._input.range=l.range=m(h,e))}}},{"../../plots/cartesian/autorange":796,"../../plots/cartesian/axis_ids":800,"./constants":686}],686:[function(b,y,D){y.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",
grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",
grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],687:[function(b,y,D){var n=b("../../lib"),m=b("../../plot_api/plot_template"),p=b("../../plots/cartesian/axis_ids"),h=b("./attributes"),a=b("./oppaxis_attributes");y.exports=function(d,e,l){function k(E,F){return n.coerce(g,q,h,E,F)}function c(E,F){return n.coerce(u,w,a,E,F)}d=d[l];var f=e[l];if(d.rangeslider||e._requestRangeslider[f._id]){n.isPlainObject(d.rangeslider)||
(d.rangeslider={});var g=d.rangeslider,q=m.newContainer(f,"rangeslider");if(k("visible")){k("bgcolor",e.plot_bgcolor);k("bordercolor");k("borderwidth");k("thickness");k("autorange",!f.isValidRange(g.range));k("range");if(d=e._subplots)for(d=d.cartesian.filter(function(E){return E.substr(0,E.indexOf("y"))===p.name2id(l)}).map(function(E){return E.substr(E.indexOf("y"),E.length)}),d=n.simpleMap(d,p.id2name),f=0;f<d.length;f++){var t=d[f];var u=g[t]||{};var w=m.newContainer(q,t,"yaxis");t=e[t];var x;
u.range&&t.isValidRange(u.range)&&(x="fixed");"match"!==c("rangemode",x)&&c("range",t.range.slice())}q._input=g}}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/cartesian/axis_ids":800,"./attributes":684,"./oppaxis_attributes":691}],688:[function(b,y,D){function n(C,v,G,I){function J(){function L(ca){var ia=+(ca.clientX||ca.touches[0].clientX)-O;switch(S){case K:var ha="ew-resize";ca=X+ia;ia=da+ia;break;case N:ha="col-resize";ca=X+ia;ia=da;break;case H:ha="col-resize";ca=X;ia=
da+ia;break;default:ha="ew-resize",ca=U,ia=U+ia}if(ia<ca){var fa=ia;ia=ca;ca=fa}I._pixelMin=ca;I._pixelMax=ia;z(c.select(ea),ha);m(C,v,G,I)}function P(){ea.removeEventListener("mousemove",L);ea.removeEventListener("mouseup",P);this.removeEventListener("touchmove",L);this.removeEventListener("touchend",P);q.removeElement(ea)}var Q=c.event,S=Q.target,O=Q.clientX||Q.touches[0].clientX,U=O-C.node().getBoundingClientRect().left,X=I.d2p(G._rl[0]),da=I.d2p(G._rl[1]),ea=F.coverSlip();this.addEventListener("touchmove",
L);this.addEventListener("touchend",P);ea.addEventListener("mousemove",L);ea.addEventListener("mouseup",P)}var K=C.select("rect."+B.slideBoxClassName).node(),N=C.select("rect."+B.grabAreaMinClassName).node(),H=C.select("rect."+B.grabAreaMaxClassName).node();C.on("mousedown",J);C.on("touchstart",J)}function m(C,v,G,I){var J=G.l2r(q.constrain(I.p2d(I._pixelMin),I._rl[0],I._rl[1])),K=G.l2r(q.constrain(I.p2d(I._pixelMax),I._rl[0],I._rl[1]));window.requestAnimationFrame(function(){f.call("_guiRelayout",
v,G._name+".range",[J,K])})}function p(C,v,G,I,J,K){v=B.handleWidth/2;var N=q.constrain(I.d2p(G._rl[0]),0,I._width);G=q.constrain(I.d2p(G._rl[1]),0,I._width);C.select("rect."+B.slideBoxClassName).attr("x",N).attr("width",G-N);C.select("rect."+B.maskMinClassName).attr("width",N);C.select("rect."+B.maskMaxClassName).attr("x",G).attr("width",I._width-G);"match"!==K.rangemode&&(K=I._height-q.constrain(I.d2pOppAxis(J._rl[1]),0,I._height),J=I._height-q.constrain(I.d2pOppAxis(J._rl[0]),0,I._height),C.select("rect."+
B.maskMinOppAxisClassName).attr("x",N).attr("height",K).attr("width",G-N),C.select("rect."+B.maskMaxOppAxisClassName).attr("x",N).attr("y",J).attr("height",I._height-J).attr("width",G-N),C.select("rect."+B.slideBoxClassName).attr("y",K).attr("height",J-K));J=Math.round(q.constrain(N-v,-v,I._width+v))-.5;I=Math.round(q.constrain(G-v,-v,I._width+v))+.5;C.select("g."+B.grabberMinClassName).attr("transform","translate("+J+",0.5)");C.select("g."+B.grabberMaxClassName).attr("transform","translate("+I+",0.5)")}
function h(C,v,G,I){C=q.ensureSingle(C,"rect",B.bgClassName,function(K){K.attr({x:0,y:0,"shape-rendering":"crispEdges"})});G=0===I.borderwidth%2?I.borderwidth:I.borderwidth-1;var J=-I._offsetShift;v=t.crispRound(v,I.borderwidth);C.attr({width:I._width+G,height:I._height+G,transform:"translate("+J+","+J+")",fill:I.bgcolor,stroke:I.bordercolor,"stroke-width":v})}function a(C,v,G,I){q.ensureSingleById(v._fullLayout._topdefs,"clipPath",I._clipId,function(J){J.append("rect").attr({x:0,y:0})}).select("rect").attr({width:I._width,
height:I._height})}function d(C,v,G,I){var J=v.calcdata;C=C.selectAll("g."+B.rangePlotClassName).data(G._subplotsWith,q.identity);C.enter().append("g").attr("class",function(N){return B.rangePlotClassName+" "+N}).call(t.setClipUrl,I._clipId,v);C.order();C.exit().remove();var K;C.each(function(N,H){var L=c.select(this);H=0===H;var P=E.getFromId(v,N,"y"),Q=P._name,S=I[Q],O={data:[],layout:{xaxis:{type:G.type,domain:[0,1],range:I.range.slice(),calendar:G.calendar},width:I._width,height:I._height,margin:{t:0,
b:0,l:0,r:0}},_context:v._context};G.rangebreaks&&(O.layout.xaxis.rangebreaks=G.rangebreaks);O.layout[Q]={type:P.type,domain:[0,1],range:"match"!==S.rangemode?S.range.slice():P.range.slice(),calendar:P.calendar};P.rangebreaks&&(O.layout[Q].rangebreaks=P.rangebreaks);g.supplyDefaults(O);P=O._fullLayout.xaxis;Q=O._fullLayout[Q];P.clearCalc();P.setScale();Q.clearCalc();Q.setScale();L={id:N,plotgroup:L,xaxis:P,yaxis:Q,isRangePlot:!0};H?K=L:(L.mainplot="xy",L.mainplotinfo=K);H=x;Q=H.rangePlot;O=[];for(P=
0;P<J.length;P++){S=J[P];var U=S[0].trace;U.xaxis+U.yaxis===N&&O.push(S)}Q.call(H,v,L,O)})}function e(C,v,G,I,J){q.ensureSingle(C,"rect",B.maskMinClassName,function(K){K.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",I._height).call(u.fill,B.maskColor);q.ensureSingle(C,"rect",B.maskMaxClassName,function(K){K.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",I._height).call(u.fill,B.maskColor);"match"!==J.rangemode&&(q.ensureSingle(C,"rect",B.maskMinOppAxisClassName,function(K){K.attr({y:0,
"shape-rendering":"crispEdges"})}).attr("width",I._width).call(u.fill,B.maskOppAxisColor),q.ensureSingle(C,"rect",B.maskMaxOppAxisClassName,function(K){K.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",I._width).style("border-top",B.maskOppBorder).call(u.fill,B.maskOppAxisColor))}function l(C,v,G,I){v._context.staticPlot||q.ensureSingle(C,"rect",B.slideBoxClassName,function(J){J.attr({y:0,cursor:B.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:I._height,fill:B.slideBoxFill})}
function k(C,v,G,I){G=q.ensureSingle(C,"g",B.grabberMinClassName);C=q.ensureSingle(C,"g",B.grabberMaxClassName);var J={x:0,width:B.handleWidth,rx:B.handleRadius,fill:u.background,stroke:u.defaultLine,"stroke-width":B.handleStrokeWidth,"shape-rendering":"crispEdges"},K={y:Math.round(I._height/4),height:Math.round(I._height/2)};q.ensureSingle(G,"rect",B.handleMinClassName,function(H){H.attr(J)}).attr(K);q.ensureSingle(C,"rect",B.handleMaxClassName,function(H){H.attr(J)}).attr(K);if(!v._context.staticPlot){var N=
{width:B.grabAreaWidth,x:0,y:0,fill:B.grabAreaFill,cursor:B.grabAreaCursor};q.ensureSingle(G,"rect",B.grabAreaMinClassName,function(H){H.attr(N)}).attr("height",I._height);q.ensureSingle(C,"rect",B.grabAreaMaxClassName,function(H){H.attr(N)}).attr("height",I._height)}}var c=b("d3"),f=b("../../registry"),g=b("../../plots/plots"),q=b("../../lib"),t=b("../drawing"),u=b("../color"),w=b("../titles"),x=b("../../plots/cartesian"),E=b("../../plots/cartesian/axis_ids"),F=b("../dragelement"),z=b("../../lib/setcursor"),
B=b("./constants");y.exports=function(C){for(var v=C._fullLayout,G=v._rangeSliderData,I=0;I<G.length;I++){var J=G[I][B.name];J._clipId=J._id+"-"+v._uid}I=v._infolayer.selectAll("g."+B.containerClassName).data(G,function(K){return K._name});I.exit().each(function(K){v._topdefs.select("#"+K[B.name]._clipId).remove()}).remove();0!==G.length&&(I.enter().append("g").classed(B.containerClassName,!0).attr("pointer-events","all"),I.each(function(K){var N=c.select(this),H=K[B.name],L=v[E.id2name(K.anchor)],
P=H[E.id2name(K.anchor)];if(H.range){var Q=q.simpleMap(H.range,K.r2l),S=q.simpleMap(K.range,K.r2l);H.range=H._input.range=q.simpleMap(S[0]<S[1]?[Math.min(Q[0],S[0]),Math.max(Q[1],S[1])]:[Math.max(Q[0],S[0]),Math.min(Q[1],S[1])],K.l2r)}K.cleanRange("rangeslider.range");S=v._size;var O=K.domain;H._width=S.w*(O[1]-O[0]);Q=Math.round(S.t+S.h*(1-K._counterDomainMin)+("bottom"===K.side?K._depth:0)+H._offsetShift+B.extraPad);N.attr("transform","translate("+Math.round(S.l+S.w*O[0])+","+Q+")");H._rl=q.simpleMap(H.range,
K.r2l);var U=H._rl[0];S=H._rl[1];var X=S-U;H.p2d=function(sa){return sa/H._width*X+U};H.d2p=function(sa){return(sa-U)/X*H._width};if(K.rangebreaks){var da=K.locateBreaks(U,S);if(da.length){var ea=0;for(O=0;O<da.length;O++){var ca=da[O];ea+=ca.max-ca.min}var ia=H._width/(S-U-ea),ha=[-ia*U];for(O=0;O<da.length;O++)ca=da[O],ha.push(ha[ha.length-1]-ia*(ca.max-ca.min));H.d2p=function(sa){for(var ua=ha[0],ta=0;ta<da.length;ta++){var oa=da[ta];if(sa>=oa.max)ua=ha[ta+1];else if(sa<oa.min)break}return ua+
ia*sa};for(O=0;O<da.length;O++)ca=da[O],ca.pmin=H.d2p(ca.min),ca.pmax=H.d2p(ca.max);H.p2d=function(sa){for(var ua=ha[0],ta=0;ta<da.length;ta++){var oa=da[ta];if(sa>=oa.pmax)ua=ha[ta+1];else if(sa<oa.pmin)break}return(sa-ua)/ia}}}if("match"!==P.rangemode){var fa=L.r2l(P.range[0]),na=L.r2l(P.range[1])-fa;H.d2pOppAxis=function(sa){return(sa-fa)/na*H._height}}N.call(h,C,K,H).call(a,C,K,H).call(d,C,K,H).call(e,C,K,H,P).call(l,C,K,H).call(k,C,K,H);n(N,C,K,H);p(N,C,K,H,L,P);"bottom"===K.side&&w.draw(C,K._id+
"title",{propContainer:K,propName:K._name+".title",placeholder:v._dfltTitle.x,attributes:{x:K._offset+K._length/2,y:Q+H._height+H._offsetShift+10+1.5*K.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":749,"../../lib/setcursor":769,"../../plots/cartesian":810,"../../plots/cartesian/axis_ids":800,"../../plots/plots":860,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"../titles":710,"./constants":686,d3:169}],689:[function(b,y,D){function n(e){return(e=e&&e[d])&&
e.visible}var m=b("../../plots/cartesian/axis_ids"),p=b("../../lib/svg_text_utils"),h=b("./constants"),a=b("../../constants/alignment").LINE_SPACING,d=h.name;D.isVisible=n;D.makeData=function(e){var l=m.list({_fullLayout:e},"x",!0),k=e.margin,c=[];if(!e._has("gl2d"))for(var f=0;f<l.length;f++){var g=l[f];if(n(g)){c.push(g);var q=g[d];q._id=d+g._id;q._height=(e.height-k.b-k.t)*q.thickness;q._offsetShift=Math.floor(q.borderwidth/2)}}e._rangeSliderData=c};D.autoMarginOpts=function(e,l){e=e._fullLayout;
var k=l[d],c=l._id.charAt(0),f=0,g=0;"bottom"===l.side&&(f=l._depth,l.title.text!==e._dfltTitle[c]&&(g=1.5*l.title.font.size+10+k._offsetShift,c=(l.title.text.match(p.BR_TAG_ALL)||[]).length,g+=c*l.title.font.size*a));return{x:0,y:l._counterDomainMin,l:0,r:0,t:0,b:k._height+f+Math.max(e.margin.b,g),pad:h.extraPad+2*k._offsetShift}}},{"../../constants/alignment":717,"../../lib/svg_text_utils":773,"../../plots/cartesian/axis_ids":800,"./constants":686}],690:[function(b,y,D){D=b("../../lib");var n=b("./attributes"),
m=b("./oppaxis_attributes"),p=b("./helpers");y.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:D.extendFlat({},n,{yaxis:m})}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),calcAutorange:b("./calc_autorange"),draw:b("./draw"),isVisible:p.isVisible,makeData:p.makeData,autoMarginOpts:p.autoMarginOpts}},{"../../lib":749,"./attributes":684,"./calc_autorange":685,"./defaults":687,"./draw":688,"./helpers":689,"./oppaxis_attributes":691}],691:[function(b,
y,D){y.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],692:[function(b,y,D){D=b("../annotations/attributes");var n=b("../../traces/scatter/attributes").line,m=b("../drawing/attributes").dash,p=b("../../lib/extend").extendFlat;b=b("../../plot_api/plot_template").templatedArray;y.exports=b("shape",
{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:p({},D.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},
yref:p({},D.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:p({},n.color,{editType:"arraydraw"}),width:p({},n.width,{editType:"calc+arraydraw"}),dash:p({},m,{editType:"arraydraw"}),
editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../lib/extend":739,"../../plot_api/plot_template":787,"../../traces/scatter/attributes":1155,"../annotations/attributes":598,"../drawing/attributes":636}],693:[function(b,y,D){function n(e,l,k,c,f,g){e/=2;return"pixel"===
l?(k=f?d.extractPathCoords(f,g?a.paramIsY:a.paramIsX):[k,c],l=p.aggNums(Math.max,null,k),k=p.aggNums(Math.min,null,k),k=0>k?Math.abs(k)+e:e,l=0<l?l+e:e,{ppad:e,ppadplus:g?k:l,ppadminus:g?l:k}):{ppad:e}}function m(e,l,k,c,f){var g="category"===e.type||"multicategory"===e.type?e.r2c:e.d2c;if(void 0!==l)return[g(l),g(k)];if(c){l=Infinity;k=-Infinity;c=c.match(a.segmentRE);var q;"date"===e.type&&(g=d.decodeDate(g));for(e=0;e<c.length;e++){var t=c[e];t=f[t.charAt(0)].drawn;void 0!==t&&(!(q=c[e].substr(1).match(a.paramRE))||
q.length<t||(t=g(q[t]),t<l&&(l=t),t>k&&(k=t)))}if(k>=l)return[l,k]}}var p=b("../../lib"),h=b("../../plots/cartesian/axes"),a=b("./constants"),d=b("./helpers");y.exports=function(e){var l=p.filterVisible(e._fullLayout.shapes);if(l.length&&e._fullData.length)for(var k=0;k<l.length;k++){var c=l[k];c._extremes={};if("paper"!==c.xref){var f="pixel"===c.xsizemode?c.xanchor:c.x0;var g="pixel"===c.xsizemode?c.xanchor:c.x1;var q=h.getFromId(e,c.xref);(f=m(q,f,g,c.path,a.paramIsX))&&(c._extremes[q._id]=h.findExtremes(q,
f,n(c.line.width,c.xsizemode,c.x0,c.x1,c.path,!1)))}"paper"!==c.yref&&(f="pixel"===c.ysizemode?c.yanchor:c.y0,g="pixel"===c.ysizemode?c.yanchor:c.y1,q=h.getFromId(e,c.yref),(f=m(q,f,g,c.path,a.paramIsY))&&(c._extremes[q._id]=h.findExtremes(q,f,n(c.line.width,c.ysizemode,c.y0,c.y1,c.path,!0))))}}},{"../../lib":749,"../../plots/cartesian/axes":797,"./constants":694,"./helpers":703}],694:[function(b,y,D){y.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,
drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],695:[function(b,y,D){function n(e,l,k){function c(J,K){return m.coerce(e,l,a,J,K)}if(c("visible")){var f=c("path");f=c("type",f?"path":"rect");"path"!==l.type&&delete l.path;
c("editable");c("layer");c("opacity");c("fillcolor");c("fillrule");c("line.width")&&(c("line.color"),c("line.dash"));for(var g=c("xsizemode"),q=c("ysizemode"),t=["x","y"],u=0;2>u;u++){var w=t[u],x=w+"anchor",E="x"===w?g:q,F={_fullLayout:k},z=p.coerceRef(e,l,F,w,"","paper");if("paper"!==z){var B=p.getFromId(F,z);B._shapeIndices.push(l._index);var C=d.rangeToShapePosition(B);B=d.shapePositionToRange(B)}else B=C=m.identity;if("path"!==f){var v=w+"0";w+="1";var G=e[v],I=e[w];e[v]=B(e[v],!0);e[w]=B(e[w],
!0);"pixel"===E?(c(v,0),c(w,10)):(p.coercePosition(l,F,c,z,v,.25),p.coercePosition(l,F,c,z,w,.75));l[v]=C(l[v]);l[w]=C(l[w]);e[v]=G;e[w]=I}"pixel"===E&&(E=e[x],e[x]=B(e[x],!0),p.coercePosition(l,F,c,z,x,.25),l[x]=C(l[x]),e[x]=E)}"path"===f?c("path"):m.noneOrAll(e,l,["x0","x1","y0","y1"])}}var m=b("../../lib"),p=b("../../plots/cartesian/axes"),h=b("../../plots/array_container_defaults"),a=b("./attributes"),d=b("./helpers");y.exports=function(e,l){h(e,l,{name:"shapes",handleItemDefaults:n})}},{"../../lib":749,
"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"./attributes":692,"./helpers":703}],696:[function(b,y,D){function n(C){var v=C._fullLayout;v._shapeUpperLayer.selectAll("path").remove();v._shapeLowerLayer.selectAll("path").remove();for(var G in v._plots){var I=v._plots[G].shapelayer;I&&I.selectAll("path").remove()}for(G=0;G<v.shapes.length;G++)v.shapes[G].visible&&m(C,G)}function m(C,v){function G(N){var H=a(C,J),L={"data-index":v,"fill-rule":J.fillrule,d:H},P=J.opacity,
Q=J.fillcolor,S=J.line.width?J.line.color:"rgba(0,0,0,0)",O=J.line.width,U=J.line.dash;O||!0!==J.editable||(O=5,U="solid");var X="Z"!==H[H.length-1],da=!C._context.edits.shapePosition&&J.editable&&C._fullLayout._activeShapeIndex===v;da&&(Q=X?"rgba(0,0,0,0)":C._fullLayout.activeshape.fillcolor,P=C._fullLayout.activeshape.opacity);var ea=N.append("path").attr(L).style("opacity",P).call(u.stroke,S).call(u.fill,Q).call(w.dashLine,U,O);p(ea,C,J);if(da||C._context.edits.shapePosition)var ca=x(C.layout,
"shapes",J);da?(ea.style({cursor:"move"}),N={element:ea.node(),plotinfo:K,gd:C,editHelpers:ca,isActiveShape:!0},H=g(H,C),q(H,ea,N)):C._context.edits.shapePosition?h(C,ea,J,v,N,ca):!0===J.editable&&ea.style("pointer-events",X||.5>=u.opacity(Q)*P?"stroke":"all");ea.node().addEventListener("click",function(){a:{if(!C._context.edits.shapePosition){var ia=+ea.node().getAttribute("data-index");if(0<=ia){if(ia===C._fullLayout._activeShapeIndex){l(C);ia=void 0;break a}C._fullLayout._activeShapeIndex=ia;C._fullLayout._deactivateShape=
l;n(C)}}ia=void 0}return ia})}C._fullLayout._paperdiv.selectAll('.shapelayer [data-index\x3d"'+v+'"]').remove();var I=B.makeOptionsAndPlotinfo(C,v),J=I.options,K=I.plotinfo;J._input&&!1!==J.visible&&("below"!==J.layer?G(C._fullLayout._shapeUpperLayer):"paper"===J.xref||"paper"===J.yref?G(C._fullLayout._shapeLowerLayer):K._hadPlotinfo?G((K.mainplotinfo||K).shapelayer):G(C._fullLayout._shapeLowerLayer))}function p(C,v,G){G=(G.xref+G.yref).replace(/paper/g,"");w.setClipUrl(C,G?"clip"+v._fullLayout._uid+
G:null,v)}function h(C,v,G,I,J,K){function N(){var ab=Math.max(G.line.width,10),ra=J.append("g").attr("data-index",I);ra.append("path").attr("d",v.attr("d")).style({cursor:"move","stroke-width":ab,"stroke-opacity":"0"});var Ea={"fill-opacity":"0"};ab=Math.max(ab/2,10);ra.append("circle").attr({"data-line-point":"start-point",cx:S?Oa(G.xanchor)+G.x0:Oa(G.x0),cy:O?kb(G.yanchor)-G.y0:kb(G.y0),r:ab}).style(Ea).classed("cursor-grab",!0);ra.append("circle").attr({"data-line-point":"end-point",cx:S?Oa(G.xanchor)+
G.x1:Oa(G.x1),cy:O?kb(G.yanchor)-G.y1:kb(G.y1),r:ab}).style(Ea).classed("cursor-grab",!0);return ra}function H(ab){if(C._fullLayout._drawing)fb=null;else if(U)fb="path"===ab.target.tagName?"move":"start-point"===ab.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var ra=Ta.element.getBoundingClientRect(),Ea=ra.right-ra.left,Ia=ra.bottom-ra.top,Va=ab.clientX-ra.left;ra=ab.clientY-ra.top;ab=!X&&10<Ea&&10<Ia&&!ab.shiftKey?E.getCursor(Va/Ea,1-ra/Ia):"move";
F(v,ab);fb=ab.split("-")[0]}}function L(ab,ra){if("path"===G.type){var Ea=function(Va){return Va},Ia=Ea;S?da("xanchor",G.xanchor=mb(fa+ab)):(Ia=function(Va){return mb(Oa(Va)+ab)},Ca&&"date"===Ca.type&&(Ia=B.encodeDate(Ia)));O?da("yanchor",G.yanchor=tb(na+ra)):(Ea=function(Va){return tb(kb(Va)+ra)},Ka&&"date"===Ka.type&&(Ea=B.encodeDate(Ea)));da("path",G.path=e(qa,Ia,Ea))}else S?da("xanchor",G.xanchor=mb(fa+ab)):(da("x0",G.x0=mb(ea+ab)),da("x1",G.x1=mb(ia+ab))),O?da("yanchor",G.yanchor=tb(na+ra)):
(da("y0",G.y0=tb(ca+ra)),da("y1",G.y1=tb(ha+ra)));v.attr("d",a(C,G));Q(J,G)}function P(ab,ra){if(X){var Ea=function(Za){return Za},Ia=Ea;S?da("xanchor",G.xanchor=mb(fa+ab)):(Ia=function(Za){return mb(Oa(Za)+ab)},Ca&&"date"===Ca.type&&(Ia=B.encodeDate(Ia)));O?da("yanchor",G.yanchor=tb(na+ra)):(Ea=function(Za){return tb(kb(Za)+ra)},Ka&&"date"===Ka.type&&(Ea=B.encodeDate(Ea)));da("path",G.path=e(qa,Ia,Ea))}else if(U)"resize-over-start-point"===fb?(Ia=ea+ab,Ea=O?ca-ra:ca+ra,da("x0",G.x0=S?Ia:mb(Ia)),
da("y0",G.y0=O?Ea:tb(Ea))):"resize-over-end-point"===fb&&(Ia=ia+ab,Ea=O?ha-ra:ha+ra,da("x1",G.x1=S?Ia:mb(Ia)),da("y1",G.y1=O?Ea:tb(Ea)));else{Ia=-1!==fb.indexOf("n");Ea=-1!==fb.indexOf("s");var Va=-1!==fb.indexOf("w"),rb=-1!==fb.indexOf("e"),ib=Ia?sa+ra:sa,Na=Ea?ua+ra:ua;Va=Va?ta+ab:ta;rb=rb?oa+ab:oa;O&&(Ia&&(ib=sa-ra),Ea&&(Na=ua-ra));if(!O&&10<Na-ib||O&&10<ib-Na)da(va,G[va]=O?ib:tb(ib)),da(ma,G[ma]=O?Na:tb(Na));10<rb-Va&&(da(pa,G[pa]=S?Va:mb(Va)),da(za,G[za]=S?rb:mb(rb)))}v.attr("d",a(C,G));Q(J,
G)}function Q(ab,ra){if(S||O){var Ea="path"!==ra.type;ab=ab.selectAll(".visual-cue").data([0]);ab.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ia=Oa(S?ra.xanchor:c.midRange(Ea?[ra.x0,ra.x1]:B.extractPathCoords(ra.path,z.paramIsX)));ra=kb(O?ra.yanchor:c.midRange(Ea?[ra.y0,ra.y1]:B.extractPathCoords(ra.path,z.paramIsY)));Ia=B.roundPositionForSharpStrokeRendering(Ia,1);ra=B.roundPositionForSharpStrokeRendering(ra,1);S&&O?
ab.attr("d","M"+(Ia-1-1)+","+(ra-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z"):S?ab.attr("d","M"+(Ia-1-1)+","+(ra-9-1)+"v18 h2 v-18 Z"):ab.attr("d","M"+(Ia-9-1)+","+(ra-1-1)+"h18 v2 h-18 Z")}}var S="pixel"===G.xsizemode,O="pixel"===G.ysizemode,U="line"===G.type,X="path"===G.type,da=K.modifyItem,ea,ca,ia,ha,fa,na,sa,ua,ta,oa,va,ma,pa,za,qa,Ca=f.getFromId(C,G.xref),Ka=f.getFromId(C,G.yref),Oa=B.getDataToPixel(C,Ca),kb=B.getDataToPixel(C,Ka,!0),mb=B.getPixelToData(C,Ca),tb=B.getPixelToData(C,Ka,!0),nb=U?
N():v,Ta={element:nb.node(),gd:C,prepFn:function(ab){if(!C._fullLayout._drawing){S&&(fa=Oa(G.xanchor));O&&(na=kb(G.yanchor));"path"===G.type?qa=G.path:(ea=S?G.x0:Oa(G.x0),ca=O?G.y0:kb(G.y0),ia=S?G.x1:Oa(G.x1),ha=O?G.y1:kb(G.y1));ea<ia?(ta=ea,pa="x0",oa=ia,za="x1"):(ta=ia,pa="x1",oa=ea,za="x0");!O&&ca<ha||O&&ca>ha?(sa=ca,va="y0",ua=ha,ma="y1"):(sa=ha,va="y1",ua=ca,ma="y0");H(ab);Q(J,G);var ra=G.xref,Ea=G.yref,Ia=f.getFromId(C,ra),Va=f.getFromId(C,Ea),rb="";"paper"===ra||Ia.autorange||(rb+=ra);"paper"===
Ea||Va.autorange||(rb+=Ea);w.setClipUrl(v,rb?"clip"+C._fullLayout._uid+rb:null,C);Ta.moveFn="move"===fb?L:P;Ta.altKey=ab.altKey}},doneFn:function(){C._fullLayout._drawing||(F(v),J.selectAll(".visual-cue").remove(),p(v,C,G),k.call("_guiRelayout",C,K.getUpdateObj()))},clickFn:function(){C._fullLayout._drawing||J.selectAll(".visual-cue").remove()}},fb;E.init(Ta);nb.node().onmousemove=H}function a(C,v){var G=v.type,I=f.getFromId(C,v.xref),J=f.getFromId(C,v.yref),K=C._fullLayout._size;if(I){var N=B.shapePositionToRange(I);
var H=function(S){return I._offset+I.r2p(N(S,!0))}}else H=function(S){return K.l+K.w*S};if(J){var L=B.shapePositionToRange(J);var P=function(S){return J._offset+J.r2p(L(S,!0))}}else P=function(S){return K.t+K.h*(1-S)};if("path"===G)return I&&"date"===I.type&&(H=B.decodeDate(H)),J&&"date"===J.type&&(P=B.decodeDate(P)),d(v,H,P);if("pixel"===v.xsizemode){H=H(v.xanchor);C=H+v.x0;var Q=H+v.x1}else C=H(v.x0),Q=H(v.x1);"pixel"===v.ysizemode?(P=P(v.yanchor),H=P-v.y0,v=P-v.y1):(H=P(v.y0),v=P(v.y1));if("line"===
G)return"M"+C+","+H+"L"+Q+","+v;if("rect"===G)return"M"+C+","+H+"H"+Q+"V"+v+"H"+C+"Z";G=(C+Q)/2;v=(H+v)/2;C=Math.abs(G-C);H=Math.abs(v-H);P="A"+C+","+H;C=G+C+","+v;return"M"+C+P+" 0 1,1 "+(G+","+(v-H))+P+" 0 0,1 "+C+"Z"}function d(C,v,G){var I=C.xsizemode,J=C.ysizemode,K=C.xanchor,N=C.yanchor;return C.path.replace(z.segmentRE,function(H){var L=0,P=H.charAt(0),Q=z.paramIsX[P],S=z.paramIsY[P],O=z.numParams[P],U=H.substr(1).replace(z.paramRE,function(X){Q[L]?X="pixel"===I?v(K)+Number(X):v(X):S[L]&&(X=
"pixel"===J?G(N)-Number(X):G(X));L++;L>O&&(X="X");return X});L>O&&(U=U.replace(/[\s,]*X.*/,""),c.log("Ignoring extra params in segment "+H));return P+U})}function e(C,v,G){return C.replace(z.segmentRE,function(I){var J=0,K=I.charAt(0),N=z.paramIsX[K],H=z.paramIsY[K],L=z.numParams[K];I=I.substr(1).replace(z.paramRE,function(P){if(J>=L)return P;N[J]?P=v(P):H[J]&&(P=G(P));J++;return P});return K+I})}function l(C){!C._context.edits.shapePosition&&0<=C._fullLayout._activeShapeIndex&&(t(C),delete C._fullLayout._activeShapeIndex,
n(C))}var k=b("../../registry"),c=b("../../lib"),f=b("../../plots/cartesian/axes"),g=b("./draw_newshape/helpers").readPaths,q=b("./draw_newshape/display_outlines"),t=b("../../plots/cartesian/handle_outline").clearOutlineControllers,u=b("../color"),w=b("../drawing"),x=b("../../plot_api/plot_template").arrayEditor,E=b("../dragelement"),F=b("../../lib/setcursor"),z=b("./constants"),B=b("./helpers");y.exports={draw:n,drawOne:m,eraseActiveShape:function(C){if(!C._context.edits.shapePosition){t(C);var v=
C._fullLayout._activeShapeIndex,G=(C.layout||{}).shapes||[];if(v<G.length){for(var I=[],J=0;J<G.length;J++)J!==v&&I.push(G[J]);delete C._fullLayout._activeShapeIndex;k.call("_guiRelayout",C,{shapes:I})}}}}},{"../../lib":749,"../../lib/setcursor":769,"../../plot_api/plot_template":787,"../../plots/cartesian/axes":797,"../../plots/cartesian/handle_outline":807,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"./constants":694,"./draw_newshape/display_outlines":700,"./draw_newshape/helpers":701,
"./helpers":703}],697:[function(b,y,D){D=b("../../drawing/attributes").dash;b=b("../../../lib/extend").extendFlat;y.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:b({},D,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},
layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":739,"../../drawing/attributes":636}],698:[function(b,y,D){y.exports={CIRCLE_SIDES:32,i000:0,i090:8,
i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],699:[function(b,y,D){var n=b("../../color");y.exports=function(m,p,h){h("newshape.drawdirection");h("newshape.layer");h("newshape.fillcolor");h("newshape.fillrule");h("newshape.opacity");h("newshape.line.width")&&(h("newshape.line.color",n.contrast((m||{}).plot_bgcolor||"#FFF")),h("newshape.line.dash"));h("activeshape.fillcolor");h("activeshape.opacity")}},{"../../color":615}],700:[function(b,y,D){function n(t,
u){for(var w=0;w<u.length;w++){var x=u[w];t[w]=[];for(var E=0;E<x.length;E++){t[w][E]=[];for(var F=0;F<x[E].length;F++)t[w][E][F]=x[E][F]}}return t}var m=b("../../dragelement"),p=b("../../dragelement/helpers").drawMode,h=b("../../../registry");D=b("./constants");var a=D.i000,d=D.i090,e=D.i180,l=D.i270,k=b("../../../plots/cartesian/handle_outline").clearOutlineControllers;D=b("./helpers");var c=D.pointsShapeRectangle,f=D.pointsShapeEllipse,g=D.writePaths,q=b("./newshapes");y.exports=function F(u,w,
x,E){function z(){F(u,w,x,E++);f(u[0])&&B({redrawing:!0})}function B(ea){x.isActiveShape=!1;var ca=q(w,x);Object.keys(ca).length&&h.call((ea||{}).redrawing?"relayout":"_guiRelayout",L,ca)}function C(ea){O=+ea.srcElement.getAttribute("data-i");U=+ea.srcElement.getAttribute("data-j");S[O][U].moveFn=v}function v(ea,ca){if(u.length){var ia=X[O][U][1],ha=X[O][U][2],fa=u[O],na=fa.length;if(c(fa)){for(var sa=0;sa<na;sa++)if(sa!==U){var ua=fa[sa];ua[1]===fa[U][1]&&(ua[1]=ia+ea);ua[2]===fa[U][2]&&(ua[2]=ha+
ca)}fa[U][1]=ia+ea;fa[U][2]=ha+ca;if(!c(fa))for(ea=0;ea<na;ea++)for(ca=0;ca<fa[ea].length;ca++)fa[ea][ca]=X[O][ea][ca]}else fa[U][1]=ia+ea,fa[U][2]=ha+ca;z()}}function G(){B()}function I(ea,ca){if(2===ea&&(O=+ca.srcElement.getAttribute("data-i"),U=+ca.srcElement.getAttribute("data-j"),ea=u[O],!c(ea)&&!f(ea)&&u.length&&u[O]&&u[O].length)){ea=[];for(ca=0;ca<u[O].length;ca++)ca!==U&&ea.push(u[O][ca]);1<ea.length&&(2!==ea.length||"Z"!==ea[1][0])&&(0===U&&(ea[0][0]="M"),u[O]=ea,z(),B())}}function J(ea){S=
[];for(var ca=0;ca<u.length;ca++){var ia=u[ca],ha=!c(ia)&&f(ia);S[ca]=[];for(var fa=0;fa<ia.length;fa++)if("Z"!==ia[fa][0]&&(!ha||fa===a||fa===d||fa===e||fa===l)){var na=ia[fa][1],sa=ia[fa][2];na=ea.append("circle").classed("cursor-grab",!0).attr("data-i",ca).attr("data-j",fa).attr("cx",na).attr("cy",sa).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});S[ca][fa]={element:na.node(),gd:L,prepFn:C,doneFn:G,clickFn:I};m.init(S[ca][fa])}}}function K(ea,ca){if(u.length)for(var ia=
0;ia<u.length;ia++)for(var ha=0;ha<u[ia].length;ha++)for(var fa=0;fa+2<u[ia][ha].length;fa+=2)u[ia][ha][fa+1]=X[ia][ha][fa+1]+ea,u[ia][ha][fa+2]=X[ia][ha][fa+2]+ca;z()}function N(ea){(O=+ea.srcElement.getAttribute("data-i"))||(O=0);da[O].moveFn=K}function H(){B()}E||(E=0);var L=x.gd,P=x.isActiveShape,Q=L._fullLayout._zoomlayer;p(x.dragmode)?L._fullLayout._drawing=!0:0<=L._fullLayout._activeShapeIndex&&k(L);w.attr("d",g(u));var S,O,U;if(P&&!E){var X=n([],u);P=Q.append("g").attr("class","outline-controllers");
J(P);var da=[];u.length&&(da[0]={element:w[0][0],gd:L,prepFn:N,doneFn:H},m.init(da[0]))}}},{"../../../plots/cartesian/handle_outline":807,"../../../registry":880,"../../dragelement":634,"../../dragelement/helpers":633,"./constants":698,"./helpers":701,"./newshapes":702}],701:[function(b,y,D){function n(c,f){return 1E-6>=Math.abs(c-f)}function m(c,f){var g=f[1]-c[1];c=f[2]-c[2];return Math.sqrt(g*g+c*c)}var p=b("parse-svg-path");y=b("./constants");var h=y.CIRCLE_SIDES,a=y.SQRT2;b=b("../../../plots/cartesian/helpers");
var d=b.p2r,e=b.r2p,l=[0,3,4,5,6,1,2],k=[0,3,4,1,2];D.writePaths=function(c){var f=c.length;if(!f)return"M0,0Z";for(var g="",q=0;q<f;q++)for(var t=c[q].length,u=0;u<t;u++){var w=c[q][u][0];if("Z"===w)g+="Z";else for(var x=c[q][u].length,E=0;E<x;E++){var F=E;"Q"===w||"S"===w?F=k[E]:"C"===w&&(F=l[E]);g+=c[q][u][F];0<E&&E<x-1&&(g+=",")}}return g};D.readPaths=function(c,f,g,q){c=p(c);var t=[],u=-1,w,x=0,E=0;var F=x;var z=E;for(var B=0;B<c.length;B++){var C=[],v=w=c[B][0];switch(w){case "M":u++;t[u]=[];
x=+c[B][1];E=+c[B][2];C.push([v,x,E]);F=x;z=E;break;case "Q":case "S":w=+c[B][1];var G=+c[B][2];x=+c[B][3];E=+c[B][4];C.push([v,x,E,w,G]);break;case "C":w=+c[B][1];G=+c[B][2];var I=+c[B][3];var J=+c[B][4];x=+c[B][5];E=+c[B][6];C.push([v,x,E,w,G,I,J]);break;case "T":case "L":x=+c[B][1];E=+c[B][2];C.push([v,x,E]);break;case "H":v="L";x=+c[B][1];C.push([v,x,E]);break;case "V":v="L";E=+c[B][1];C.push([v,x,E]);break;case "A":v="L";I=+c[B][1];G=+c[B][2];+c[B][4]||(I=-I,G=-G);J=x-I;var K=E;for(w=1;w<=h/
2;w++){var N=2*Math.PI*w/h;C.push([v,J+I*Math.cos(N),K+G*Math.sin(N)])}break;case "Z":if(x!==F||E!==z)x=F,E=z,C.push([v,x,E])}v=(g||{}).domain;I=f._fullLayout._size;G=g&&"pixel"===g.xsizemode;J=g&&"pixel"===g.ysizemode;K=!1===q;for(N=0;N<C.length;N++){for(w=0;7>w+2;w+=2){var H=C[N][w+1],L=C[N][w+2];void 0!==H&&void 0!==L&&(x=H,E=L,g&&(g.xaxis&&g.xaxis.p2r?(K&&(H-=g.xaxis._offset),H=G?e(g.xaxis,g.xanchor)+H:d(g.xaxis,H)):(K&&(H-=I.l),H=v?v.x[0]+H/I.w:H/I.w),g.yaxis&&g.yaxis.p2r?(K&&(L-=g.yaxis._offset),
L=J?e(g.yaxis,g.yanchor)-L:d(g.yaxis,L)):(K&&(L-=I.t),L=v?v.y[1]-L/I.h:1-L/I.h)),C[N][w+1]=H,C[N][w+2]=L)}t[u].push(C[N].slice())}}return t};D.pointsShapeRectangle=function(c){if(5!==c.length)return!1;for(var f=1;3>f;f++)if(!n(c[0][f]-c[1][f],c[3][f]-c[2][f])||!n(c[0][f]-c[3][f],c[1][f]-c[2][f]))return!1;return n(c[0][1],c[1][1])||n(c[0][1],c[3][1])?!!(m(c[0],c[1])*m(c[0],c[3])):!1};D.pointsShapeEllipse=function(c){var f=c.length;if(f!==h+1)return!1;f=h;for(var g=0;g<f;g++){var q=(2*f-g)%f,t=(f/2+
q)%f;if(!n(m(c[g],c[(f/2+g)%f]),m(c[q],c[t])))return!1}return!0};D.handleEllipse=function(c,f,g){if(!c)return[f,g];var q=D.ellipseOver({x0:f[0],y0:f[1],x1:g[0],y1:g[1]});c=(q.x1+q.x0)/2;f=(q.y1+q.y0)/2;g=(q.x1-q.x0)/2;q=(q.y1-q.y0)/2;g||(g=q/=a);q||(q=g/=a);for(var t=[],u=0;u<h;u++){var w=2*u*Math.PI/h;t.push([c+g*Math.cos(w),f+q*Math.sin(w)])}return t};D.ellipseOver=function(c){var f=c.x0,g=c.y0,q=c.x1,t=c.y1;c=q-f;var u=t-g;f=(f-c+q)/2;g=(g-u+t)/2;c*=a;u*=a;return{x0:f-c,y0:g-u,x1:f+c,y1:g+u}}},
{"../../../plots/cartesian/helpers":808,"./constants":698,"parse-svg-path":479}],702:[function(b,y,D){D=b("../../dragelement/helpers");var n=D.drawMode,m=D.openMode;D=b("./constants");var p=D.i000,h=D.i090,a=D.i180,d=D.i270,e=D.cos45,l=D.sin45;D=b("../../../plots/cartesian/helpers");var k=D.p2r,c=D.r2p,f=b("../../../plots/cartesian/handle_outline").clearSelect;b=b("./helpers");var g=b.readPaths,q=b.writePaths,t=b.ellipseOver;y.exports=function(u,w){if(u.length&&(u=u[0][0])){var x=u.getAttribute("d");
u=w.gd;var E=u._fullLayout.newshape,F=w.plotinfo,z=F.xaxis,B=F.yaxis,C=!!F.domain||!F.xaxis,v=!!F.domain||!F.yaxis,G=w.isActiveShape,I=w.dragmode,J=(u.layout||{}).shapes||[];if(!n(I)&&void 0!==G){var K=u._fullLayout._activeShapeIndex;if(K<J.length)switch(u._fullLayout.shapes[K].type){case "rect":I="drawrect";break;case "circle":I="drawcircle";break;case "line":I="drawline";break;case "path":I=J[K].path||"",I="Z"===I[I.length-1]?"drawclosedpath":"drawopenpath"}}K=m(I);x=g(x,u,F,G);C={editable:!0,xref:C?
"paper":z._id,yref:v?"paper":B._id,layer:E.layer,opacity:E.opacity,line:{color:E.line.color,width:E.line.width,dash:E.line.dash}};K||(C.fillcolor=E.fillcolor,C.fillrule=E.fillrule);var N;1===x.length&&(N=x[0]);if(N&&"drawrect"===I)C.type="rect",C.x0=N[0][1],C.y0=N[0][2],C.x1=N[2][1],C.y1=N[2][2];else if(N&&"drawline"===I)C.type="line",C.x0=N[0][1],C.y0=N[0][2],C.x1=N[1][1],C.y1=N[1][2];else if(N&&"drawcircle"===I){C.type="circle";x=N[p][1];B=N[h][1];E=N[a][1];z=N[d][1];v=N[p][2];I=N[h][2];K=N[a][2];
var H=N[d][2];N=F.xaxis&&("date"===F.xaxis.type||"log"===F.xaxis.type);var L=F.yaxis&&("date"===F.yaxis.type||"log"===F.yaxis.type);N&&(x=c(F.xaxis,x),B=c(F.xaxis,B),E=c(F.xaxis,E),z=c(F.xaxis,z));L&&(v=c(F.yaxis,v),I=c(F.yaxis,I),K=c(F.yaxis,K),H=c(F.yaxis,H));var P=(B+z)/2,Q=(v+K)/2;x=t({x0:P,y0:Q,x1:P+(z-B+E-x)/2*e,y1:Q+(H-I+K-v)/2*l});N&&(x.x0=k(F.xaxis,x.x0),x.x1=k(F.xaxis,x.x1));L&&(x.y0=k(F.yaxis,x.y0),x.y1=k(F.yaxis,x.y1));C.x0=x.x0;C.y0=x.y0;C.x1=x.x1;C.y1=x.y1}else{C.type="path";if(z&&B&&
(F="date"===z.type,N="date"===B.type,F||N))for(B=0;B<x.length;B++)for(E=0;E<x[B].length;E++)for(z=0;z+2<x[B][E].length;z+=2)F&&(x[B][E][z+1]=x[B][E][z+1].replace(" ","_")),N&&(x[B][E][z+2]=x[B][E][z+2].replace(" ","_"));C.path=q(x)}f(u);w=w.editHelpers;F=(w||{}).modifyItem;N=[];for(x=0;x<J.length;x++)if(B=u._fullLayout.shapes[x],N[x]=B._input,void 0!==G&&x===u._fullLayout._activeShapeIndex)switch(E=C,B.type){case "line":case "rect":case "circle":F("x0",E.x0);F("x1",E.x1);F("y0",E.y0);F("y1",E.y1);
break;case "path":F("path",E.path)}return void 0===G?(N.push(C),N):w?w.getUpdateObj():{}}}},{"../../../plots/cartesian/handle_outline":807,"../../../plots/cartesian/helpers":808,"../../dragelement/helpers":633,"./constants":698,"./helpers":701}],703:[function(b,y,D){var n=b("./constants"),m=b("../../lib");D.rangeToShapePosition=function(p){return"log"===p.type?p.r2d:function(h){return h}};D.shapePositionToRange=function(p){return"log"===p.type?p.d2r:function(h){return h}};D.decodeDate=function(p){return function(h){h.replace&&
(h=h.replace("_"," "));return p(h)}};D.encodeDate=function(p){return function(h){return p(h).replace(" ","_")}};D.extractPathCoords=function(p,h){var a=[];p.match(n.segmentRE).forEach(function(d){var e=h[d.charAt(0)].drawn;void 0!==e&&(d=d.substr(1).match(n.paramRE),!d||d.length<e||a.push(m.cleanNumber(d[e])))});return a};D.getDataToPixel=function(p,h,a){var d=p._fullLayout._size;if(h){var e=D.shapePositionToRange(h);p=function(l){return h._offset+h.r2p(e(l,!0))};"date"===h.type&&(p=D.decodeDate(p))}else p=
a?function(l){return d.t+d.h*(1-l)}:function(l){return d.l+d.w*l};return p};D.getPixelToData=function(p,h,a){var d=p._fullLayout._size;if(h){var e=D.rangeToShapePosition(h);p=function(l){return e(h.p2r(l-h._offset))}}else p=a?function(l){return 1-(l-d.t)/d.h}:function(l){return(l-d.l)/d.w};return p};D.roundPositionForSharpStrokeRendering=function(p,h){p=Math.round(p);return 1===Math.round(h%2)?p+.5:p};D.makeOptionsAndPlotinfo=function(p,h){h=p._fullLayout.shapes[h]||{};var a=p._fullLayout._plots[h.xref+
h.yref];a?a._hadPlotinfo=!0:(a={},h.xref&&"paper"!==h.xref&&(a.xaxis=p._fullLayout[h.xref+"axis"]),h.yref&&"paper"!==h.yref&&(a.yaxis=p._fullLayout[h.yref+"axis"]));a.xsizemode=h.xsizemode;a.ysizemode=h.ysizemode;a.xanchor=h.xanchor;a.yanchor=h.yanchor;return{options:h,plotinfo:a}}},{"../../lib":749,"./constants":694}],704:[function(b,y,D){D=b("./draw");y.exports={moduleType:"component",name:"shapes",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),supplyDrawNewShapeDefaults:b("./draw_newshape/defaults"),
includeBasePlot:b("../../plots/cartesian/include_components")("shapes"),calcAutorange:b("./calc_autorange"),draw:D.draw,drawOne:D.drawOne}},{"../../plots/cartesian/include_components":809,"./attributes":692,"./calc_autorange":693,"./defaults":695,"./draw":696,"./draw_newshape/defaults":699}],705:[function(b,y,D){D=b("../../plots/font_attributes");var n=b("../../plots/pad_attributes"),m=b("../../lib/extend").extendDeepAll,p=b("../../plot_api/edit_types").overrideAll,h=b("../../plots/animation_attributes"),
a=b("../../plot_api/plot_template").templatedArray;b=b("./constants");var d=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});y.exports=p(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},
steps:d,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:m(n({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",
values:h.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:D({})},font:D({}),activebgcolor:{valType:"color",dflt:b.gripBgActiveColor},bgcolor:{valType:"color",dflt:b.railBgColor},bordercolor:{valType:"color",dflt:b.railBorderColor},borderwidth:{valType:"number",min:0,dflt:b.railBorderWidth},
ticklen:{valType:"number",min:0,dflt:b.tickLength},tickcolor:{valType:"color",dflt:b.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:b.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/animation_attributes":792,"../../plots/font_attributes":825,"../../plots/pad_attributes":859,"./constants":706}],706:[function(b,y,D){y.exports={name:"sliders",containerClassName:"slider-container",
groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,
railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],707:[function(b,y,D){function n(l,
k,c){function f(u,w){return p.coerce(l,k,a,u,w)}for(var g=h(l,k,{name:"steps",handleItemDefaults:m}),q=0,t=0;t<g.length;t++)g[t].visible&&q++;if(2>q?k.visible=!1:f("visible"))k._stepCount=q,q=k._visibleSteps=p.filterVisible(g),t=f("active"),(g[t]||{}).visible||(k.active=q[0]._index),f("x"),f("y"),p.noneOrAll(l,k,["x","y"]),f("xanchor"),f("yanchor"),f("len"),f("lenmode"),f("pad.t"),f("pad.r"),f("pad.b"),f("pad.l"),p.coerceFont(f,"font",c.font),f("currentvalue.visible")&&(f("currentvalue.xanchor"),
f("currentvalue.prefix"),f("currentvalue.suffix"),f("currentvalue.offset"),p.coerceFont(f,"currentvalue.font",k.font)),f("transition.duration"),f("transition.easing"),f("bgcolor"),f("activebgcolor"),f("bordercolor"),f("borderwidth"),f("ticklen"),f("tickwidth"),f("tickcolor"),f("minorticklen")}function m(l,k){function c(g,q){return p.coerce(l,k,e,g,q)}if("skip"===l.method||Array.isArray(l.args)?c("visible"):k.visible=!1){c("method");c("args");var f=c("label","step-"+k._index);c("value",f);c("execute")}}
var p=b("../../lib"),h=b("../../plots/array_container_defaults"),a=b("./attributes"),d=b("./constants").name,e=a.steps;y.exports=function(l,k){h(l,k,{name:d,handleItemDefaults:n})}},{"../../lib":749,"../../plots/array_container_defaults":793,"./attributes":705,"./constants":706}],708:[function(b,y,D){function n(L,P){L=L[J.name];for(var Q=[],S=0;S<L.length;S++){var O=L[S];O.visible&&(O._gd=P,Q.push(O))}return Q}function m(L){return L._index}function p(L,P){var Q=C.tester.selectAll("g."+J.labelGroupClass).data(P._visibleSteps);
Q.enter().append("g").classed(J.labelGroupClass,!0);var S=0,O=0;Q.each(function(ea){var ca=F.select(this);if(ea=e(ca,{step:ea},P).node())ea=C.bBox(ea),O=Math.max(O,ea.height),S=Math.max(S,ea.width)});Q.remove();var U=P._dims={};U.inputAreaWidth=Math.max(J.railWidth,J.gripHeight);var X=L._fullLayout._size;U.lx=X.l+X.w*P.x;U.ly=X.t+X.h*(1-P.y);U.outerLength="fraction"===P.lenmode?Math.round(X.w*P.len):P.len;U.inputAreaStart=0;U.inputAreaLength=Math.round(U.outerLength-P.pad.l-P.pad.r);U.labelStride=
Math.max(1,Math.ceil((S+J.labelPadding)/((U.inputAreaLength-2*J.stepInset)/(P._stepCount-1))));U.labelHeight=O;U.currentValueMaxWidth=0;U.currentValueHeight=0;U.currentValueTotalHeight=0;U.currentValueMaxLines=1;if(P.currentvalue.visible){var da=C.tester.append("g");Q.each(function(ea){var ca=a(da,P,ea.label);ea=ca.node()&&C.bBox(ca.node())||{width:0,height:0};ca=G.lineCount(ca);U.currentValueMaxWidth=Math.max(U.currentValueMaxWidth,Math.ceil(ea.width));U.currentValueHeight=Math.max(U.currentValueHeight,
Math.ceil(ea.height));U.currentValueMaxLines=Math.max(U.currentValueMaxLines,ca)});U.currentValueTotalHeight=U.currentValueHeight+P.currentvalue.offset;da.remove()}U.height=U.currentValueTotalHeight+J.tickOffset+P.ticklen+J.labelOffset+U.labelHeight+P.pad.t+P.pad.b;Q="left";v.isRightAnchor(P)&&(U.lx-=U.outerLength,Q="right");v.isCenterAnchor(P)&&(U.lx-=U.outerLength/2,Q="center");X="top";v.isBottomAnchor(P)&&(U.ly-=U.height,X="bottom");v.isMiddleAnchor(P)&&(U.ly-=U.height/2,X="middle");U.outerLength=
Math.ceil(U.outerLength);U.height=Math.ceil(U.height);U.lx=Math.round(U.lx);U.ly=Math.round(U.ly);X={y:P.y,b:U.height*H[X],t:U.height*N[X]};"fraction"===P.lenmode?(X.l=0,X.xl=P.x-P.len*N[Q],X.r=0,X.xr=P.x+P.len*H[Q]):(X.x=P.x,X.l=U.outerLength*N[Q],X.r=U.outerLength*H[Q]);z.autoMargin(L,J.autoMarginIdRoot+P._index,X)}function h(L,P,Q){(Q.steps[Q.active]||{}).visible||(Q.active=Q._visibleSteps[0]._index);P.call(a,Q).call(E,Q).call(l,Q).call(g,Q).call(x,L,Q).call(d,L,Q);L=Q._dims;C.setTranslate(P,L.lx+
Q.pad.l,L.ly+Q.pad.t);P.call(t,Q,!1);P.call(a,Q)}function a(L,P,Q){if(P.currentvalue.visible){var S=P._dims;switch(P.currentvalue.xanchor){case "right":var O=S.inputAreaLength-J.currentValueInset-S.currentValueMaxWidth;var U="left";break;case "center":O=.5*S.inputAreaLength;U="middle";break;default:O=J.currentValueInset,U="left"}L=v.ensureSingle(L,"text",J.labelClass,function(ea){ea.classed("user-select-none",!0).attr({"text-anchor":U,"data-notex":1})});var X=P.currentvalue.prefix?P.currentvalue.prefix:
"";if("string"===typeof Q)X+=Q;else{Q=P.steps[P.active].label;var da=P._gd._fullLayout._meta;da&&(Q=v.templateString(Q,da));X+=Q}P.currentvalue.suffix&&(X+=P.currentvalue.suffix);L.call(C.font,P.currentvalue.font).text(X).call(G.convertToTspans,P._gd);X=G.lineCount(L);G.positionText(L,O,(S.currentValueMaxLines+1-X)*P.currentvalue.font.size*K);return L}}function d(L,P,Q){v.ensureSingle(L,"rect",J.gripRectClass,function(S){S.call(f,P,L,Q).style("pointer-events","all")}).attr({width:J.gripWidth,height:J.gripHeight,
rx:J.gripRadius,ry:J.gripRadius}).call(B.stroke,Q.bordercolor).call(B.fill,Q.bgcolor).style("stroke-width",Q.borderwidth+"px")}function e(L,P,Q){L=v.ensureSingle(L,"text",J.labelClass,function(O){O.classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1})});P=P.step.label;var S=Q._gd._fullLayout._meta;S&&(P=v.templateString(P,S));L.call(C.font,Q.font).text(P).call(G.convertToTspans,Q._gd);return L}function l(L,P){L=v.ensureSingle(L,"g",J.labelsClass);var Q=P._dims;L=L.selectAll("g."+
J.labelGroupClass).data(Q.labelSteps);L.enter().append("g").classed(J.labelGroupClass,!0);L.exit().remove();L.each(function(S){var O=F.select(this);O.call(e,S,P);C.setTranslate(O,u(P,S.fraction),J.tickOffset+P.ticklen+P.font.size*K+J.labelOffset+Q.currentValueTotalHeight)})}function k(L,P,Q,S,O){S=Q._visibleSteps[Math.round(S*(Q._stepCount-1))]._index;S!==Q.active&&c(L,P,Q,S,!0,O)}function c(L,P,Q,S,O,U){var X=Q.active;Q.active=S;I(L.layout,J.name,Q).applyUpdate("active",S);S=Q.steps[Q.active];P.call(t,
Q,U);P.call(a,Q);L.emit("plotly_sliderchange",{slider:Q,step:Q.steps[Q.active],interaction:O,previousActive:X});S&&S.method&&O&&(P._nextMethod?(P._nextMethod.step=S,P._nextMethod.doCallback=O,P._nextMethod.doTransition=U):(P._nextMethod={step:S,doCallback:O,doTransition:U},P._nextMethodRaf=window.requestAnimationFrame(function(){var da=P._nextMethod.step;da.method&&(da.execute&&z.executeAPICommand(L,da.method,da.args),P._nextMethod=null,P._nextMethodRaf=null)})))}function f(L,P,Q){var S=Q.node(),
O=F.select(P);L.on("mousedown",function(){var U=Q.data()[0];P.emit("plotly_sliderstart",{slider:U});var X=Q.select("."+J.gripRectClass);F.event.stopPropagation();F.event.preventDefault();X.call(B.fill,U.activebgcolor);var da=w(U,F.mouse(S)[0]);k(P,Q,U,da,!0);U._dragging=!0;O.on("mousemove",function(){var ea=Q.data()[0],ca=w(ea,F.mouse(S)[0]);k(P,Q,ea,ca,!1)});O.on("mouseup",function(){var ea=Q.data()[0];ea._dragging=!1;X.call(B.fill,ea.bgcolor);O.on("mouseup",null);O.on("mousemove",null);P.emit("plotly_sliderend",
{slider:ea,step:ea.steps[ea.active]})})})}function g(L,P){L=L.selectAll("rect."+J.tickRectClass).data(P._visibleSteps);var Q=P._dims;L.enter().append("rect").classed(J.tickRectClass,!0);L.exit().remove();L.attr({width:P.tickwidth+"px","shape-rendering":"crispEdges"});L.each(function(S,O){S=0===O%Q.labelStride;var U=F.select(this);U.attr({height:S?P.ticklen:P.minorticklen}).call(B.fill,P.tickcolor);C.setTranslate(U,u(P,O/(P._stepCount-1))-.5*P.tickwidth,(S?J.tickOffset:J.minorTickOffset)+Q.currentValueTotalHeight)})}
function q(L){var P=L._dims;P.labelSteps=[];for(var Q=L._stepCount,S=0;S<Q;S+=P.labelStride)P.labelSteps.push({fraction:S/(Q-1),step:L._visibleSteps[S]})}function t(L,P,Q){L=L.select("rect."+J.gripRectClass);for(var S=0,O=0;O<P._stepCount;O++)if(P._visibleSteps[O]._index===P.active){S=O;break}S=u(P,S/(P._stepCount-1));P._invokingCommand||(Q&&0<P.transition.duration&&(L=L.transition().duration(P.transition.duration).ease(P.transition.easing)),L.attr("transform","translate("+(S-.5*J.gripWidth)+","+
P._dims.currentValueTotalHeight+")"))}function u(L,P){L=L._dims;return L.inputAreaStart+J.stepInset+(L.inputAreaLength-2*J.stepInset)*Math.min(1,Math.max(0,P))}function w(L,P){L=L._dims;return Math.min(1,Math.max(0,(P-J.stepInset-L.inputAreaStart)/(L.inputAreaLength-2*J.stepInset-2*L.inputAreaStart)))}function x(L,P,Q){var S=Q._dims,O=v.ensureSingle(L,"rect",J.railTouchRectClass,function(U){U.call(f,P,L,Q).style("pointer-events","all")});O.attr({width:S.inputAreaLength,height:Math.max(S.inputAreaWidth,
J.tickOffset+Q.ticklen+S.labelHeight)}).call(B.fill,Q.bgcolor).attr("opacity",0);C.setTranslate(O,0,S.currentValueTotalHeight)}function E(L,P){var Q=P._dims,S=Q.inputAreaLength-2*J.railInset;L=v.ensureSingle(L,"rect",J.railRectClass);L.attr({width:S,height:J.railWidth,rx:J.railRadius,ry:J.railRadius,"shape-rendering":"crispEdges"}).call(B.stroke,P.bordercolor).call(B.fill,P.bgcolor).style("stroke-width",P.borderwidth+"px");C.setTranslate(L,J.railInset,.5*(Q.inputAreaWidth-J.railWidth)+Q.currentValueTotalHeight)}
var F=b("d3"),z=b("../../plots/plots"),B=b("../color"),C=b("../drawing"),v=b("../../lib"),G=b("../../lib/svg_text_utils"),I=b("../../plot_api/plot_template").arrayEditor,J=b("./constants");b=b("../../constants/alignment");var K=b.LINE_SPACING,N=b.FROM_TL,H=b.FROM_BR;y.exports=function(L){function P(U){U._commandObserver&&(U._commandObserver.remove(),delete U._commandObserver);z.autoMargin(L,J.autoMarginIdRoot+U._index)}var Q=L._fullLayout,S=n(Q,L);Q=Q._infolayer.selectAll("g."+J.containerClassName).data(0<
S.length?[0]:[]);Q.enter().append("g").classed(J.containerClassName,!0).style("cursor","ew-resize");Q.exit().each(function(){F.select(this).selectAll("g."+J.groupClassName).each(P)}).remove();if(0!==S.length){Q=Q.selectAll("g."+J.groupClassName).data(S,m);Q.enter().append("g").classed(J.groupClassName,!0);Q.exit().each(P).remove();for(var O=0;O<S.length;O++)p(L,S[O]);Q.each(function(U){var X=F.select(this);q(U);z.manageCommandObserver(L,U,U._visibleSteps,function(da){var ea=X.data()[0];ea.active!==
da.index&&(ea._dragging||c(L,X,ea,da.index,!1,!0))});h(L,F.select(this),U)})}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plot_api/plot_template":787,"../../plots/plots":860,"../color":615,"../drawing":637,"./constants":706,d3:169}],709:[function(b,y,D){D=b("./constants");y.exports={moduleType:"component",name:D.name,layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":705,"./constants":706,"./defaults":707,
"./draw":708}],710:[function(b,y,D){var n=b("d3"),m=b("fast-isnumeric"),p=b("../../plots/plots"),h=b("../../registry"),a=b("../../lib"),d=b("../drawing"),e=b("../color"),l=b("../../lib/svg_text_utils"),k=b("../../constants/interactions"),c=b("../../constants/alignment").OPPOSITE_SIDE,f=/ [XY][0-9]* /;y.exports={draw:function(g,q,t){function u(X){a.syncOrAsync([w,x],X)}function w(X){if(G){var da="";G.rotate&&(da+="rotate("+[G.rotate,v.x,v.y]+")");G.offset&&(da+="translate(0, "+G.offset+")")}else da=
null;X.attr("transform",da);X.style({"font-family":P,"font-size":n.round(Q,2)+"px",fill:e.rgb(S),opacity:K*e.opacity(S),"font-weight":p.fontWeight}).attr(v).call(l.convertToTspans,g);return p.previousPromises(g)}function x(X){X=n.select(X.node().parentNode);if(C&&C.selection&&C.side&&L){X.attr("transform",null);var da=c[C.side],ea="left"===C.side||"top"===C.side?-1:1,ca=m(C.pad)?C.pad:2,ia=d.bBox(X.node()),ha={left:0,top:0,right:J.width,bottom:J.height};ha=C.maxShift||ea*(ha[C.side]-ia[C.side]);var fa=
0;if(0>ha)fa=ha;else{var na=C.offsetLeft||0,sa=C.offsetTop||0;ia.left-=na;ia.right-=na;ia.top-=sa;ia.bottom-=sa;C.selection.each(function(){var ua=d.bBox(this);a.bBoxIntersect(ia,ua,ca)&&(fa=Math.max(fa,ea*(ua[C.side]-ia[da])+ca))});fa=Math.min(ha,fa)}(0<fa||0>ha)&&X.attr("transform","translate("+{left:[-fa,0],right:[fa,0],top:[0,-fa],bottom:[0,fa]}[C.side]+")")}}function E(){K=0;N=!0;U.text(z).on("mouseover.opacity",function(){n.select(this).transition().duration(k.SHOW_PLACEHOLDER).style("opacity",
1)}).on("mouseout.opacity",function(){n.select(this).transition().duration(k.HIDE_PLACEHOLDER).style("opacity",0)})}var F=t.propName,z=t.placeholder,B=t.traceIndex,C=t.avoid||{},v=t.attributes,G=t.transform,I=t.containerGroup,J=g._fullLayout,K=1,N=!1,H=t.propContainer.title,L=(H&&H.text?H.text:"").trim();H=H&&H.font?H.font:{};var P=H.family,Q=H.size,S=H.color,O;"title.text"===F?O="titleText":-1!==F.indexOf("axis")?O="axisTitleText":F.indexOf(!0)&&(O="colorbarTitleText");O=g._context.edits[O];""===
L?K=0:L.replace(f," % ")===z.replace(f," % ")&&(K=.2,N=!0,O||(L=""));t._meta?L=a.templateString(L,t._meta):J._meta&&(L=a.templateString(L,J._meta));t=L||O;I||(I=a.ensureSingle(J._infolayer,"g","g-"+q));var U=I.selectAll("text").data(t?[0]:[]);U.enter().append("text");U.text(L).attr("class",q);U.exit().remove();if(!t)return I;U.call(u);if(O){if(L)U.on(".opacity",null);else E();U.call(l.makeEditable,{gd:g}).on("edit",function(X){void 0!==B?h.call("_guiRestyle",g,F,X,B):h.call("_guiRelayout",g,F,X)}).on("cancel",
function(){this.text(this.attr("data-unformatted")).call(u)}).on("input",function(X){this.text(X||" ").call(l.positionText,v.x,v.y)})}U.classed("js-placeholder",N);return I}}},{"../../constants/alignment":717,"../../constants/interactions":723,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/plots":860,"../../registry":880,"../color":615,"../drawing":637,d3:169,"fast-isnumeric":241}],711:[function(b,y,D){D=b("../../plots/font_attributes");var n=b("../color/attributes"),m=b("../../lib/extend").extendFlat,
p=b("../../plot_api/edit_types").overrideAll,h=b("../../plots/pad_attributes");b=b("../../plot_api/plot_template").templatedArray;var a=b("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},
execute:{valType:"boolean",dflt:!0}});y.exports=p(b("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center",
"right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:m(h({editType:"arraydraw"}),{}),font:D({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:n.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/font_attributes":825,"../../plots/pad_attributes":859,
"../color/attributes":614}],712:[function(b,y,D){y.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",
autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},{}],713:[function(b,y,D){function n(l,k,c){function f(q,t){return p.coerce(l,k,a,q,t)}var g=h(l,k,{name:"buttons",handleItemDefaults:m});f("visible",0<g.length)&&(f("active"),f("direction"),f("type"),f("showactive"),
f("x"),f("y"),p.noneOrAll(l,k,["x","y"]),f("xanchor"),f("yanchor"),f("pad.t"),f("pad.r"),f("pad.b"),f("pad.l"),p.coerceFont(f,"font",c.font),f("bgcolor",c.paper_bgcolor),f("bordercolor"),f("borderwidth"))}function m(l,k){function c(f,g){return p.coerce(l,k,e,f,g)}c("visible","skip"===l.method||Array.isArray(l.args))&&(c("method"),c("args"),c("args2"),c("label"),c("execute"))}var p=b("../../lib"),h=b("../../plots/array_container_defaults"),a=b("./attributes"),d=b("./constants").name,e=a.buttons;y.exports=
function(l,k){h(l,k,{name:d,handleItemDefaults:n})}},{"../../lib":749,"../../plots/array_container_defaults":793,"./attributes":711,"./constants":712}],714:[function(b,y,D){function n(K){return K._index}function m(K,N){return+K.attr(I.menuIndexAttrName)===N._index}function p(K,N,H,L,P,Q,S,O){N.active=S;v(K.layout,I.name,N).applyUpdate("active",S);"buttons"===N.type?a(K,L,null,null,N):"dropdown"===N.type&&(P.attr(I.menuIndexAttrName,"-1"),h(K,L,P,Q,N),O||a(K,L,P,Q,N))}function h(K,N,H,L,P){var Q=B.ensureSingle(N,
"g",I.headerClassName,function(X){X.style("pointer-events","all")}),S=P._dims,O={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},U={width:S.headerWidth,height:S.headerHeight};Q.call(l,P,P.buttons[P.active]||I.blankHeaderOpts,K).call(u,P,O,U);B.ensureSingle(N,"text",I.headerArrowClassName,function(X){X.classed("user-select-none",!0).attr("text-anchor","end").call(z.font,P.font).text(I.arrowSymbol[P.direction])}).attr({x:S.headerWidth-I.arrowOffsetX+P.pad.l,y:S.headerHeight/2+I.textOffsetY+P.pad.t});Q.on("click",
function(){H.call(w,String(m(H,P)?-1:P._index));a(K,N,H,L,P)});Q.on("mouseover",function(){Q.call(g)});Q.on("mouseout",function(){Q.call(q,P)});z.setTranslate(N,S.lx,S.ly)}function a(K,N,H,L,P){H||(H=N,H.attr("pointer-events","all"));var Q=-1!==+H.attr(I.menuIndexAttrName)||"buttons"===P.type?P.buttons:[],S="dropdown"===P.type?I.dropdownButtonClassName:I.buttonClassName,O=H.selectAll("g."+S).data(B.filterVisible(Q));Q=O.enter().append("g").classed(S,!0);S=O.exit();"dropdown"===P.type?(Q.attr("opacity",
"0").transition().attr("opacity","1"),S.transition().attr("opacity","0").remove()):S.remove();var U=0,X=0;Q=P._dims;S=-1!==["up","down"].indexOf(P.direction);"dropdown"===P.type&&(S?X=Q.headerHeight+I.gapButtonHeader:U=Q.headerWidth+I.gapButtonHeader);"dropdown"===P.type&&"up"===P.direction&&(X=-I.gapButtonHeader+I.gapButton-Q.openHeight);"dropdown"===P.type&&"left"===P.direction&&(U=-I.gapButtonHeader+I.gapButton-Q.openWidth);var da={x:Q.lx+U+P.pad.l,y:Q.ly+X+P.pad.t,yPad:I.gapButton,xPad:I.gapButton,
index:0};U={l:da.x+P.borderwidth,t:da.y+P.borderwidth};O.each(function(ea,ca){var ia=x.select(this);ia.call(l,P,ea,K).call(u,P,da);ia.on("click",function(){x.event.defaultPrevented||(ea.execute&&(ea.args2&&P.active===ca?(p(K,P,ea,N,H,L,-1),E.executeAPICommand(K,ea.method,ea.args2)):(p(K,P,ea,N,H,L,ca),E.executeAPICommand(K,ea.method,ea.args))),K.emit("plotly_buttonclicked",{menu:P,button:ea,active:P.active}))});ia.on("mouseover",function(){ia.call(g)});ia.on("mouseout",function(){ia.call(q,P);O.call(f,
P)})});O.call(f,P);S?(U.w=Math.max(Q.openWidth,Q.headerWidth),U.h=da.y-U.t):(U.w=da.x-U.l,U.h=Math.max(Q.openHeight,Q.headerHeight));U.direction=P.direction;L&&(O.size()?d(K,N,H,L,P,U):e(L))}function d(K,N,H,L,P,Q){N=P.direction;K=P._dims;P=P.active;var S,O;if("up"===N||"down"===N)for(N=O=0;N<P;N++)O+=K.heights[N]+I.gapButton;else for(N=S=0;N<P;N++)S+=K.widths[N]+I.gapButton;L.enable(Q,S,O);L.hbar&&L.hbar.attr("opacity","0").transition().attr("opacity","1");L.vbar&&L.vbar.attr("opacity","0").transition().attr("opacity",
"1")}function e(K){var N=!!K.hbar,H=!!K.vbar;N&&K.hbar.transition().attr("opacity","0").each("end",function(){N=!1;H||K.disable()});H&&K.vbar.transition().attr("opacity","0").each("end",function(){H=!1;N||K.disable()})}function l(K,N,H,L){K.call(k,N).call(c,N,H,L)}function k(K,N){B.ensureSingle(K,"rect",I.itemRectClassName,function(H){H.attr({rx:I.rx,ry:I.ry,"shape-rendering":"crispEdges"})}).call(F.stroke,N.bordercolor).call(F.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px")}function c(K,
N,H,L){K=B.ensureSingle(K,"text",I.itemTextClassName,function(Q){Q.classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1})});H=H.label;var P=L._fullLayout._meta;P&&(H=B.templateString(H,P));K.call(z.font,N.font).text(H).call(C.convertToTspans,L)}function f(K,N){var H=N.active;K.each(function(L,P){L=x.select(this);P===H&&N.showactive&&L.select("rect."+I.itemRectClassName).call(F.fill,I.activeColor)})}function g(K){K.select("rect."+I.itemRectClassName).call(F.fill,I.hoverColor)}
function q(K,N){K.select("rect."+I.itemRectClassName).call(F.fill,N.bgcolor)}function t(K,N){var H=N._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},L=z.tester.selectAll("g."+I.dropdownButtonClassName).data(B.filterVisible(N.buttons));L.enter().append("g").classed(I.dropdownButtonClassName,!0);var P=-1!==["up","down"].indexOf(N.direction);L.each(function(U,X){var da=x.select(this);da.call(l,N,U,K);da=da.select("."+I.itemTextClassName);
U=da.node()&&z.bBox(da.node()).width;U=Math.max(U+I.textPadX,I.minWidth);var ea=N.font.size*G;da=C.lineCount(da);da=Math.max(ea*da,I.minHeight)+I.textOffsetY;da=Math.ceil(da);U=Math.ceil(U);H.widths[X]=U;H.heights[X]=da;H.height1=Math.max(H.height1,da);H.width1=Math.max(H.width1,U);P?(H.totalWidth=Math.max(H.totalWidth,U),H.openWidth=H.totalWidth,H.totalHeight+=da+I.gapButton,H.openHeight+=da+I.gapButton):(H.totalWidth+=U+I.gapButton,H.openWidth+=U+I.gapButton,H.totalHeight=Math.max(H.totalHeight,
da),H.openHeight=H.totalHeight)});P?H.totalHeight-=I.gapButton:H.totalWidth-=I.gapButton;H.headerWidth=H.width1+I.arrowPadX;H.headerHeight=H.height1;"dropdown"===N.type&&(P?(H.width1+=I.arrowPadX,H.totalHeight=H.height1):H.totalWidth=H.width1,H.totalWidth+=I.arrowPadX);L.remove();L=H.totalWidth+N.pad.l+N.pad.r;var Q=H.totalHeight+N.pad.t+N.pad.b,S=K._fullLayout._size;H.lx=S.l+S.w*N.x;H.ly=S.t+S.h*(1-N.y);S="left";B.isRightAnchor(N)&&(H.lx-=L,S="right");B.isCenterAnchor(N)&&(H.lx-=L/2,S="center");
var O="top";B.isBottomAnchor(N)&&(H.ly-=Q,O="bottom");B.isMiddleAnchor(N)&&(H.ly-=Q/2,O="middle");H.totalWidth=Math.ceil(H.totalWidth);H.totalHeight=Math.ceil(H.totalHeight);H.lx=Math.round(H.lx);H.ly=Math.round(H.ly);E.autoMargin(K,I.autoMarginIdRoot+N._index,{x:N.x,y:N.y,l:L*({right:1,center:.5}[S]||0),r:L*({left:1,center:.5}[S]||0),b:Q*({top:1,middle:.5}[O]||0),t:Q*({bottom:1,middle:.5}[O]||0)})}function u(K,N,H,L){L=L||{};var P=K.select("."+I.itemRectClassName),Q=K.select("."+I.itemTextClassName),
S=N.borderwidth,O=H.index,U=N._dims;z.setTranslate(K,S+H.x,S+H.y);K=-1!==["up","down"].indexOf(N.direction);S=L.height||(K?U.heights[O]:U.height1);P.attr({x:0,y:0,width:L.width||(K?U.width1:U.widths[O]),height:S});N=N.font.size*G;L=C.lineCount(Q);C.positionText(Q,I.textOffsetX,S/2-(L-1)*N/2+I.textOffsetY);K?H.y+=U.heights[O]+H.yPad:H.x+=U.widths[O]+H.xPad;H.index++}function w(K,N){K.attr(I.menuIndexAttrName,N||"-1").selectAll("g."+I.dropdownButtonClassName).remove()}var x=b("d3"),E=b("../../plots/plots"),
F=b("../color"),z=b("../drawing"),B=b("../../lib"),C=b("../../lib/svg_text_utils"),v=b("../../plot_api/plot_template").arrayEditor,G=b("../../constants/alignment").LINE_SPACING,I=b("./constants"),J=b("./scrollbox");y.exports=function(K){function N(U){E.autoMargin(K,I.autoMarginIdRoot+U._index)}var H=K._fullLayout,L=B.filterVisible(H[I.name]),P=H._menulayer.selectAll("g."+I.containerClassName).data(0<L.length?[0]:[]);P.enter().append("g").classed(I.containerClassName,!0).style("cursor","pointer");
P.exit().each(function(){x.select(this).selectAll("g."+I.headerGroupClassName).each(N)}).remove();if(0!==L.length){var Q=P.selectAll("g."+I.headerGroupClassName).data(L,n);Q.enter().append("g").classed(I.headerGroupClassName,!0);var S=B.ensureSingle(P,"g",I.dropdownButtonGroupClassName,function(U){U.style("pointer-events","all")});for(P=0;P<L.length;P++)t(K,L[P]);var O=new J(K,S,"updatemenus"+H._uid);Q.enter().size()&&(S.node().parentNode.appendChild(S.node()),S.call(w));Q.exit().each(function(U){S.call(w);
N(U)}).remove();Q.each(function(U){var X=x.select(this),da="dropdown"===U.type?S:null;E.manageCommandObserver(K,U,U.buttons,function(ea){p(K,U,U.buttons[ea.index],X,da,O,ea.index,!0)});"dropdown"===U.type?(h(K,X,S,O,U),m(S,U)&&a(K,X,S,O,U)):a(K,X,null,null,U)})}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plot_api/plot_template":787,"../../plots/plots":860,"../color":615,"../drawing":637,"./constants":712,"./scrollbox":716,d3:169}],715:[function(b,y,D){arguments[4][709][0].apply(D,
arguments)},{"./attributes":711,"./constants":712,"./defaults":713,"./draw":714,dup:709}],716:[function(b,y,D){function n(d,e,l){this.gd=d;this.container=e;this.id=l;this.vbar=this.hbar=this.translateY=this.translateX=this.position=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}y.exports=n;
var m=b("d3"),p=b("../color"),h=b("../drawing"),a=b("../../lib");n.barWidth=2;n.barLength=20;n.barRadius=2;n.barPad=1;n.barColor="#808BA4";n.prototype.enable=function(d,e,l){var k=this.gd._fullLayout,c=k.width,f=k.height;this.position=d;d=this.position.l;var g=this.position.w,q=this.position.t,t=this.position.h,u=this.position.direction,w="down"===u,x="left"===u,E="up"===u,F=g,z=t;w||x||"right"===u||E||(this.position.direction="down",w=!0);if(w||E){var B=d;var C=B+F;w?(E=q,u=Math.min(E+z,f)):(u=q+
z,E=Math.max(u-z,0));z=u-E}else E=q,u=E+z,x?(C=d+F,B=Math.max(C-F,0)):(B=d,C=Math.min(B+F,c)),F=C-B;this._box={l:B,t:E,w:F,h:z};w=g>F;var v=n.barLength+2*n.barPad;x=n.barWidth+2*n.barPad;var G=q+t;G+x>f&&(G=f-x);f=this.container.selectAll("rect.scrollbar-horizontal").data(w?[0]:[]);f.exit().on(".drag",null).remove();f.enter().append("rect").classed("scrollbar-horizontal",!0).call(p.fill,n.barColor);w?(this.hbar=f.attr({rx:n.barRadius,ry:n.barRadius,x:d,y:G,width:v,height:x}),this._hbarXMin=d+v/2,
this._hbarTranslateMax=F-v):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);f=t>z;F=n.barWidth+2*n.barPad;v=n.barLength+2*n.barPad;G=d+g;G+F>c&&(G=c-F);c=this.container.selectAll("rect.scrollbar-vertical").data(f?[0]:[]);c.exit().on(".drag",null).remove();c.enter().append("rect").classed("scrollbar-vertical",!0).call(p.fill,n.barColor);f?(this.vbar=c.attr({rx:n.barRadius,ry:n.barRadius,x:G,y:q,width:F,height:v}),this._vbarYMin=q+v/2,this._vbarTranslateMax=z-v):(delete this.vbar,
delete this._vbarYMin,delete this._vbarTranslateMax);c=this.id;z=B-.5;C=f?C+F+.5:C+.5;E-=.5;u=w?u+x+.5:u+.5;k=k._topdefs.selectAll("#"+c).data(w||f?[0]:[]);k.exit().remove();k.enter().append("clipPath").attr("id",c).append("rect");w||f?(this._clipRect=k.select("rect").attr({x:Math.floor(z),y:Math.floor(E),width:Math.ceil(C)-Math.floor(z),height:Math.ceil(u)-Math.floor(E)}),this.container.call(h.setClipUrl,c,this.gd),this.bg.attr({x:d,y:q,width:g,height:t})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",
null).on(".drag",null).call(h.setClipUrl,null),delete this._clipRect);if(w||f)k=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(k),k=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault();m.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this)),w&&this.hbar.on(".drag",null).call(k),f&&this.vbar.on(".drag",
null).call(k);this.setTranslate(e,l)};n.prototype.disable=function(){if(this.hbar||this.vbar)this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(h.setClipUrl,null),delete this._clipRect;this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)};n.prototype._onBoxDrag=
function(){var d=this.translateX,e=this.translateY;this.hbar&&(d-=m.event.dx);this.vbar&&(e-=m.event.dy);this.setTranslate(d,e)};n.prototype._onBoxWheel=function(){var d=this.translateX,e=this.translateY;this.hbar&&(d+=m.event.deltaY);this.vbar&&(e+=m.event.deltaY);this.setTranslate(d,e)};n.prototype._onBarDrag=function(){var d=this.translateX,e=this.translateY;if(this.hbar){d+=this._hbarXMin;var l=d+this._hbarTranslateMax;d=(a.constrain(m.event.x,d,l)-d)/(l-d)*(this.position.w-this._box.w)}this.vbar&&
(e+=this._vbarYMin,l=e+this._vbarTranslateMax,e=(a.constrain(m.event.y,e,l)-e)/(l-e)*(this.position.h-this._box.h));this.setTranslate(d,e)};n.prototype.setTranslate=function(d,e){var l=this.position.w-this._box.w,k=this.position.h-this._box.h;d=a.constrain(d||0,0,l);e=a.constrain(e||0,0,k);this.translateX=d;this.translateY=e;this.container.call(h.setTranslate,this._box.l-this.position.l-d,this._box.t-this.position.t-e);this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+d-.5),y:Math.floor(this.position.t+
e-.5)});this.hbar&&this.hbar.call(h.setTranslate,d+d/l*this._hbarTranslateMax,e);this.vbar&&this.vbar.call(h.setTranslate,d,e+e/k*this._vbarTranslateMax)}},{"../../lib":749,"../color":615,"../drawing":637,d3:169}],717:[function(b,y,D){y.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",
top:"bottom",bottom:"top"}}},{}],718:[function(b,y,D){y.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},{}],719:[function(b,y,D){y.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],720:[function(b,y,D){y.exports={COMPARISON_OPS:"\x3d !\x3d \x3c \x3e\x3d \x3e \x3c\x3d".split(" "),COMPARISON_OPS2:["\x3d","\x3c","\x3e\x3d","\x3e","\x3c\x3d"],
INTERVAL_OPS:"[] () [) (] ][ )( ]( )[".split(" "),SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"\x3d":"\x3d","\x3c":"\x3c","\x3c\x3d":"\x3c","\x3e":"\x3e","\x3e\x3d":"\x3e","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],721:[function(b,y,D){y.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],722:[function(b,y,D){y.exports={circle:"","circle-open":"",square:"","square-open":"",
diamond:"","diamond-open":"",cross:"+",x:""}},{}],723:[function(b,y,D){y.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1E3,DESELECTDIM:.2}},{}],724:[function(b,y,D){y.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1E4,ONEMAXYEAR:316224E5,ONEAVGYEAR:315576E5,ONEMINYEAR:31536E6,ONEMAXQUARTER:79488E5,ONEAVGQUARTER:78894E5,ONEMINQUARTER:76896E5,ONEMAXMONTH:26784E5,ONEAVGMONTH:26298E5,ONEMINMONTH:24192E5,ONEWEEK:6048E5,ONEDAY:864E5,ONEHOUR:36E5,ONEMIN:6E4,ONESEC:1E3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,
LOG_CLIP:10,MINUS_SIGN:""}},{}],725:[function(b,y,D){D.xmlns="http://www.w3.org/2000/xmlns/";D.svg="http://www.w3.org/2000/svg";D.xlink="http://www.w3.org/1999/xlink";D.svgAttrs={xmlns:D.svg,"xmlns:xlink":D.xlink}},{}],726:[function(b,y,D){D.version=b("./version").version;b("es6-promise").polyfill();b("../build/plotcss");b("./fonts/mathjax_config")();y=b("./registry");y=D.register=y.register;for(var n=b("./plot_api"),m=Object.keys(n),p=0;p<m.length;p++){var h=m[p];"_"!==h.charAt(0)&&(D[h]=n[h]);
y({moduleType:"apiMethod",name:h,fn:n[h]})}y(b("./traces/scatter"));y([b("./components/legend"),b("./components/fx"),b("./components/annotations"),b("./components/annotations3d"),b("./components/shapes"),b("./components/images"),b("./components/updatemenus"),b("./components/sliders"),b("./components/rangeslider"),b("./components/rangeselector"),b("./components/grid"),b("./components/errorbars"),b("./components/colorscale"),b("./components/colorbar")]);y([b("./locale-en"),b("./locale-en-us")]);window.PlotlyLocales&&
Array.isArray(window.PlotlyLocales)&&(y(window.PlotlyLocales),delete window.PlotlyLocales);D.Icons=b("./fonts/ploticon");D.Plots=b("./plots/plots");D.Fx=b("./components/fx");D.Snapshot=b("./snapshot");D.PlotSchema=b("./plot_api/plot_schema");D.Queue=b("./lib/queue");D.d3=b("d3")},{"../build/plotcss":1,"./components/annotations":606,"./components/annotations3d":611,"./components/colorbar":621,"./components/colorscale":627,"./components/errorbars":643,"./components/fx":655,"./components/grid":659,"./components/images":664,
"./components/legend":672,"./components/rangeselector":683,"./components/rangeslider":690,"./components/shapes":704,"./components/sliders":709,"./components/updatemenus":715,"./fonts/mathjax_config":727,"./fonts/ploticon":728,"./lib/queue":764,"./locale-en":778,"./locale-en-us":777,"./plot_api":782,"./plot_api/plot_schema":786,"./plots/plots":860,"./registry":880,"./snapshot":885,"./traces/scatter":1167,"./version":1337,d3:169,"es6-promise":224}],727:[function(b,y,D){y.exports=function(){"undefined"!==
typeof MathJax&&"local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}},{}],728:[function(b,y,D){y.exports={undo:{width:857.1,height:1E3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",
transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1E3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1E3,height:1E3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",
transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1E3,height:1E3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1E3,height:1E3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",
transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1E3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1E3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1E3,height:1E3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",
transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1E3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1E3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1E3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",
transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1E3,height:1E3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",
transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1E3,height:1E3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",
transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1E3,height:1E3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",
transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1E3,height:1E3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",
transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1E3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",
transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1E3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},
drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},
lasso:{width:1031,height:1E3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",
transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1E3,height:1E3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},
drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},
eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1E3,height:1E3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",
transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' viewBox\x3d'0 0 132 132'\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}\x3c/style\x3e\x3c/defs\x3e\x3ctitle\x3eplotly-logomark\x3c/title\x3e\x3cg id\x3d'symbol'\x3e\x3crect class\x3d'cls-1' width\x3d'132' height\x3d'132' rx\x3d'6' ry\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'54' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'102' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'54' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'54' r\x3d'6'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/\x3e\x3c/g\x3e\x3c/svg\x3e"}}},
{}],729:[function(b,y,D){D.isLeftAnchor=function(n){return"left"===n.xanchor||"auto"===n.xanchor&&n.x<=1/3};D.isCenterAnchor=function(n){return"center"===n.xanchor||"auto"===n.xanchor&&n.x>1/3&&n.x<2/3};D.isRightAnchor=function(n){return"right"===n.xanchor||"auto"===n.xanchor&&n.x>=2/3};D.isTopAnchor=function(n){return"top"===n.yanchor||"auto"===n.yanchor&&n.y>=2/3};D.isMiddleAnchor=function(n){return"middle"===n.yanchor||"auto"===n.yanchor&&n.y>1/3&&n.y<2/3};D.isBottomAnchor=function(n){return"bottom"===
n.yanchor||"auto"===n.yanchor&&n.y<=1/3}},{}],730:[function(b,y,D){function n(k){return Math.abs(k[1]-k[0])>l-1E-14}function m(k,c){return d(c-k,l)}function p(k,c){if(n(c))return!0;if(c[0]<c[1]){var f=c[0];c=c[1]}else f=c[1],c=c[0];f=a(f,l);c=a(c,l);f>c&&(c+=l);k=a(k,l);var g=k+l;return k>=f&&k<=c||g>=f&&g<=c}function h(k,c,f,g,q,t,u){function w(C,v){return[C*Math.cos(v)+q,t-C*Math.sin(v)]}function x(C,v,G){return"A"+[C,C]+" "+[0,B,G]+" "+w(C,v)}q=q||0;t=t||0;var E=n([f,g]);if(E){var F=0;var z=e;
f=l}else f<g?(F=f,f=g):F=g;k<c?(g=k,k=c):g=c;var B=Math.abs(f-F)<=e?0:1;E?E=null===g?"M"+w(k,F)+x(k,z,0)+x(k,f,0)+"Z":"M"+w(g,F)+x(g,z,0)+x(g,f,0)+"ZM"+w(k,F)+x(k,z,1)+x(k,f,1)+"Z":null===g?(E="M"+w(k,F)+x(k,f,0),u&&(E+="L0,0Z")):E="M"+w(g,F)+"L"+w(k,F)+x(k,f,0)+"L"+w(g,f)+x(g,F,1)+"Z";return E}b=b("./mod");var a=b.mod,d=b.modHalf,e=Math.PI,l=2*e;y.exports={deg2rad:function(k){return k/180*e},rad2deg:function(k){return k/e*180},angleDelta:m,angleDist:function(k,c){return Math.abs(m(k,c))},isFullCircle:n,
isAngleInsideSector:p,isPtInsideSector:function(k,c,f,g){if(!p(c,g))return!1;f[0]<f[1]?(c=f[0],f=f[1]):(c=f[1],f=f[0]);return k>=c&&k<=f},pathArc:function(k,c,f,g,q){return h(null,k,c,f,g,q,0)},pathSector:function(k,c,f,g,q){return h(null,k,c,f,g,q,1)},pathAnnulus:function(k,c,f,g,q,t){return h(k,c,f,g,q,t,1)}}},{"./mod":756}],731:[function(b,y,D){function n(e){return a.isView(e)&&!(e instanceof d)}function m(e){return h(e)||n(e)}function p(e,l,k){if(m(e)){if(m(e[0])){for(var c=0;c<e.length;c++)k=
l(k,e[c].length);return k}return e.length}return 0}var h=Array.isArray,a="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},d="undefined"===typeof DataView?function(){}:DataView;D.isTypedArray=n;D.isArrayOrTypedArray=m;D.isArray1D=function(e){return!m(e[0])};D.ensureArray=function(e,l){h(e)||(e=[]);e.length=l;return e};D.concat=function(){var e=[],l=!0,k=0,c,f;for(c=0;c<arguments.length;c++){var g=arguments[c];if(f=g.length){if(q)e.push(g);else{var q=g;
var t=f}if(h(g))var u=!1;else l=!1,k?u!==g.constructor&&(u=!1):u=g.constructor;k+=f}}if(!k)return[];if(!e.length)return q;if(l)return q.concat.apply(q,e);if(u){l=new u(k);l.set(q);for(c=0;c<e.length;c++)g=e[c],l.set(g,t),t+=g.length;return l}l=Array(k);for(k=0;k<q.length;k++)l[k]=q[k];for(c=0;c<e.length;c++){g=e[c];for(k=0;k<g.length;k++)l[t+k]=g[k];t+=k}return l};D.maxRowLength=function(e){return p(e,Math.max,0)};D.minRowLength=function(e){return p(e,Math.min,Infinity)}},{}],732:[function(b,y,D){var n=
b("fast-isnumeric"),m=b("../constants/numerical").BADNUM,p=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;y.exports=function(h){"string"===typeof h&&(h=h.replace(p,""));return n(h)?Number(h):m}},{"../constants/numerical":724,"fast-isnumeric":241}],733:[function(b,y,D){y.exports=function(n){n=n._fullLayout;n._glcanvas&&n._glcanvas.size()&&n._glcanvas.each(function(m){m.regl&&m.regl.clear({color:!0,depth:!0})})}},{}],734:[function(b,y,D){y.exports=function(n){n._responsiveChartHandler&&(window.removeEventListener("resize",
n._responsiveChartHandler),delete n._responsiveChartHandler)}},{}],735:[function(b,y,D){function n(f,g){var q=D.valObjectMeta[g.valType];if(g.arrayOk&&c(f))return!0;if(q.validateFunction)return q.validateFunction(f,g);var t={},u=t;q.coerceFunction(f,{set:function(w){u=w}},t,g);return u!==t}var m=b("fast-isnumeric"),p=b("tinycolor2"),h=b("../plots/attributes"),a=b("../components/colorscale/scales"),d=b("../constants/interactions").DESELECTDIM,e=b("./nested_property"),l=b("./regex").counter,k=b("./mod").modHalf,
c=b("./array").isArrayOrTypedArray;D.valObjectMeta={data_array:{coerceFunction:function(f,g,q){c(f)?g.set(f):void 0!==q&&g.set(q)}},enumerated:{coerceFunction:function(f,g,q,t){t.coerceNumber&&(f=+f);-1===t.values.indexOf(f)?g.set(q):g.set(f)},validateFunction:function(f,g){g.coerceNumber&&(f=+f);g=g.values;for(var q=0;q<g.length;q++){var t=String(g[q]);if("/"===t.charAt(0)&&"/"===t.charAt(t.length-1)){if((new RegExp(t.substr(1,t.length-2))).test(f))return!0}else if(f===g[q])return!0}return!1}},"boolean":{coerceFunction:function(f,
g,q){!0===f||!1===f?g.set(f):g.set(q)}},number:{coerceFunction:function(f,g,q,t){!m(f)||void 0!==t.min&&f<t.min||void 0!==t.max&&f>t.max?g.set(q):g.set(+f)}},integer:{coerceFunction:function(f,g,q,t){f%1||!m(f)||void 0!==t.min&&f<t.min||void 0!==t.max&&f>t.max?g.set(q):g.set(+f)}},string:{coerceFunction:function(f,g,q,t){"string"!==typeof f?!0===t.strict||"number"!==typeof f?g.set(q):g.set(String(f)):t.noBlank&&!f?g.set(q):g.set(f)}},color:{coerceFunction:function(f,g,q){p(f).isValid()?g.set(f):g.set(q)}},
colorlist:{coerceFunction:function(f,g,q){function t(u){return p(u).isValid()}Array.isArray(f)&&f.length?f.every(t)?g.set(f):g.set(q):g.set(q)}},colorscale:{coerceFunction:function(f,g,q){g.set(a.get(f,q))}},angle:{coerceFunction:function(f,g,q){"auto"===f?g.set("auto"):m(f)?g.set(k(+f,360)):g.set(q)}},subplotid:{coerceFunction:function(f,g,q,t){t=t.regex||l(q);"string"===typeof f&&t.test(f)?g.set(f):g.set(q)},validateFunction:function(f,g){g=g.dflt;return f===g?!0:"string"!==typeof f?!1:l(g).test(f)?
!0:!1}},flaglist:{coerceFunction:function(f,g,q,t){if("string"!==typeof f)g.set(q);else if(-1!==(t.extras||[]).indexOf(f))g.set(f);else{f=f.split("+");for(var u=0;u<f.length;){var w=f[u];-1===t.flags.indexOf(w)||f.indexOf(w)<u?f.splice(u,1):u++}f.length?g.set(f.join("+")):g.set(q)}}},any:{coerceFunction:function(f,g,q){void 0===f?g.set(q):g.set(f)}},info_array:{coerceFunction:function(f,g,q,t){function u(I,J,K){var N;void 0===K&&(K=J.dflt);D.valObjectMeta[J.valType].coerceFunction(I,{set:function(H){N=
H}},K,J);return N}var w=2===t.dimensions||"1-2"===t.dimensions&&Array.isArray(f)&&Array.isArray(f[0]);if(Array.isArray(f)){t=t.items;var x=[],E=Array.isArray(t),F=E&&w&&Array.isArray(t[0]);F=w&&E&&!F;var z=E&&!F?t.length:f.length,B;q=Array.isArray(q)?q:[];if(w)for(w=0;w<z;w++){x[w]=[];var C=Array.isArray(f[w])?f[w]:[];var v=F?t.length:E?t[w].length:C.length;for(B=0;B<v;B++){var G=F?t[B]:E?t[w][B]:t;G=u(C[B],G,(q[w]||[])[B]);void 0!==G&&(x[w][B]=G)}}else for(w=0;w<z;w++)G=u(f[w],E?t[w]:t,q[w]),void 0!==
G&&(x[w]=G);g.set(x)}else g.set(q)},validateFunction:function(f,g){if(!Array.isArray(f))return!1;var q=g.items,t=Array.isArray(q),u=2===g.dimensions;if(!g.freeLength&&f.length!==q.length)return!1;for(var w=0;w<f.length;w++)if(u){if(!Array.isArray(f[w])||!g.freeLength&&f[w].length!==q[w].length)return!1;for(var x=0;x<f[w].length;x++)if(!n(f[w][x],t?q[w][x]:q))return!1}else if(!n(f[w],t?q[w]:q))return!1;return!0}}};D.coerce=function(f,g,q,t,u){q=e(q,t).get();var w=e(f,t);f=e(g,t);w=w.get();g=g._template;
void 0===w&&g&&(w=e(g,t).get(),g=0);void 0===u&&(u=q.dflt);if(q.arrayOk&&c(w))return f.set(w),w;var x=D.valObjectMeta[q.valType].coerceFunction;x(w,f,u,q);var E=f.get();g&&E===u&&!n(w,q)&&(w=e(g,t).get(),x(w,f,u,q),E=f.get());return E};D.coerce2=function(f,g,q,t,u){var w=e(f,t);f=D.coerce(f,g,q,t,u);w=w.get();return void 0!==w&&null!==w?f:!1};D.coerceFont=function(f,g,q){var t={};q=q||{};t.family=f(g+".family",q.family);t.size=f(g+".size",q.size);t.color=f(g+".color",q.color);return t};D.coerceHoverinfo=
function(f,g,q){var t=g._module.attributes;t=t.hoverinfo?t:h;var u=t.hoverinfo;if(1===q._dataLength){q="all"===u.dflt?u.flags.slice():u.dflt.split("+");q.splice(q.indexOf("name"),1);var w=q.join("+")}return D.coerce(f,g,t,"hoverinfo",w)};D.coerceSelectionMarkerOpacity=function(f,g){if(f.marker){var q=f.marker.opacity;if(void 0!==q){if(!c(q)&&!f.selected&&!f.unselected){var t=q;var u=d*q}g("selected.marker.opacity",t);g("unselected.marker.opacity",u)}}};D.validate=n},{"../components/colorscale/scales":630,
"../constants/interactions":723,"../plots/attributes":794,"./array":731,"./mod":756,"./nested_property":757,"./regex":765,"fast-isnumeric":241,tinycolor2:548}],736:[function(b,y,D){function n(N){return N&&u.componentsRegistry.calendars&&"string"===typeof N&&"gregorian"!==N}function m(N,H){return String(N+Math.pow(10,H)).substr(1)}function p(N,H,L,P,Q){if(H||L||P||Q)if(N+=" "+m(H,2)+":"+m(L,2),P||Q)if(N+=":"+m(P,2),Q){for(H=4;0===Q%10;)--H,Q/=10;N+="."+m(Q,H)}return N}function h(N,H,L,P){N=N.replace(I,
function(S){S=Math.min(+S.charAt(1)||6,6);return(H/1E3%1+2).toFixed(S).substr(2).replace(/0+$/,"")||"0"});var Q=new Date(Math.floor(H+.05));if(n(P))try{N=u.getComponentMethod("calendars","worldCalFmt")(N,H,P)}catch(S){return"Invalid"}return L(N)(Q)}var a=b("d3-time-format").timeFormat,d=b("fast-isnumeric"),e=b("./loggers"),l=b("./mod").mod;y=b("../constants/numerical");var k=y.BADNUM,c=y.ONEDAY,f=y.ONEHOUR,g=y.ONEMIN,q=y.ONESEC,t=y.EPOCHJD,u=b("../registry"),w=b("d3-time-format").utcFormat,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,
E=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,F=(new Date).getFullYear()-70;D.dateTick0=function(N,H){return n(N)?H?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[N]:u.getComponentMethod("calendars","CANONICAL_TICK")[N]:H?"2000-01-02":"2000-01-01"};D.dfltRange=function(N){return n(N)?u.getComponentMethod("calendars","DFLTRANGE")[N]:["2000-01-01","2001-01-01"]};D.isJSDate=function(N){return"object"===
typeof N&&null!==N&&"function"===typeof N.getTime};D.dateTime2ms=function(N,H){if(D.isJSDate(N)){H=N.getTimezoneOffset()*g;var L=(N.getUTCMinutes()-N.getMinutes())*g+(N.getUTCSeconds()-N.getSeconds())*q+(N.getUTCMilliseconds()-N.getMilliseconds());if(L){var P=3*g;H=H-P/2+l(L-H+P/2,P)}N=Number(N)-H;return N>=z&&N<=B?N:k}if("string"!==typeof N&&"number"!==typeof N)return k;N=String(N);L=n(H);var Q=N.charAt(0);!L||"G"!==Q&&"g"!==Q||(N=N.substr(1),H="");Q=L&&"chinese"===H.substr(0,7);var S=N.match(Q?
E:x);if(!S)return k;N=S[1];var O=S[3]||"1",U=Number(S[5]||1),X=Number(S[7]||0),da=Number(S[9]||0);S=Number(S[11]||0);if(L){if(2===N.length)return k;N=Number(N);try{var ea=u.getComponentMethod("calendars","getCal")(H);if(Q){var ca="i"===O.charAt(O.length-1);O=parseInt(O,10);P=ea.newDate(N,ea.toMonthIndex(N,O,ca),U)}else P=ea.newDate(N,Number(O),U)}catch(ia){return k}return P?(P.toJD()-t)*c+X*f+da*g+S*q:k}N=2===N.length?(Number(N)+2E3-F)%100+F:Number(N);--O;H=new Date(Date.UTC(2E3,O,U,X,da));H.setUTCFullYear(N);
return H.getUTCMonth()!==O||H.getUTCDate()!==U?k:H.getTime()+S*q};var z=D.MIN_MS=D.dateTime2ms("-9999");var B=D.MAX_MS=D.dateTime2ms("9999-12-31 23:59:59.9999");D.isDateTime=function(N,H){return D.dateTime2ms(N,H)!==k};var C=90*c,v=3*f,G=5*g;D.ms2DateTime=function(N,H,L){if("number"!==typeof N||!(N>=z&&N<=B))return k;H||(H=0);var P=Math.floor(10*l(N+.05,1)),Q=Math.round(N-P/10);if(n(L)){var S=Math.floor(Q/c)+t;N=Math.floor(l(N,c));try{var O=u.getComponentMethod("calendars","getCal")(L).fromJD(S).formatDate("yyyy-mm-dd")}catch(U){O=
w("G%Y-%m-%d")(new Date(Q))}if("-"===O.charAt(0))for(;11>O.length;)O="-0"+O.substr(1);else for(;10>O.length;)O="0"+O;L=H<C?Math.floor(N/f):0;Q=H<C?Math.floor(N%f/g):0;S=H<v?Math.floor(N%g/q):0;H=H<G?N%q*10+P:0}else N=new Date(Q),O=w("%Y-%m-%d")(N),L=H<C?N.getUTCHours():0,Q=H<C?N.getUTCMinutes():0,S=H<v?N.getUTCSeconds():0,H=H<G?10*N.getUTCMilliseconds()+P:0;return p(O,L,Q,S,H)};D.ms2DateTimeLocal=function(N){if(!(N>=z+c&&N<=B-c))return k;var H=Math.floor(10*l(N+.05,1)),L=new Date(Math.round(N-H/10));
N=a("%Y-%m-%d")(L);var P=L.getHours(),Q=L.getMinutes(),S=L.getSeconds();H=10*L.getUTCMilliseconds()+H;return p(N,P,Q,S,H)};D.cleanDate=function(N,H,L){if(N===k)return H;if(D.isJSDate(N)||"number"===typeof N&&isFinite(N)){if(n(L))return e.error("JS Dates and milliseconds are incompatible with world calendars",N),H;N=D.ms2DateTimeLocal(+N);if(!N&&void 0!==H)return H}else if(!D.isDateTime(N,L))return e.error("unrecognized date",N),H;return N};var I=/%\d?f/g,J=[59,59.9,59.99,59.999,59.9999];D.formatDate=
function(N,H,L,P,Q,S){Q=n(Q)&&Q;if(!H)if("y"===L)H=S.year;else if("m"===L)H=S.month;else if("d"===L)H=S.dayMonth+"\n"+S.year;else{H=L;L=l(N+.05,c);L=m(Math.floor(L/f),2)+":"+m(l(Math.floor(L/g),60),2);if("M"!==H){d(H)||(H=0);var O=(100+Math.min(l(N/q,60),J[H])).toFixed(H).substr(1);0<H&&(O=O.replace(/0+$/,"").replace(/[\.]$/,""));L+=":"+O}return L+"\n"+h(S.dayMonthYear,N,P,Q)}return h(H,N,P,Q)};var K=3*c;D.incrementMonth=function(N,H,L){L=n(L)&&L;var P=l(N,c);N=Math.round(N-P);if(L)try{var Q=Math.round(N/
c)+t,S=u.getComponentMethod("calendars","getCal")(L),O=S.fromJD(Q);H%12?S.add(O,H,"m"):S.add(O,H/12,"y");return(O.toJD()-t)*c+P}catch(U){e.error("invalid ms "+N+" in calendar "+L)}N=new Date(N+K);return N.setUTCMonth(N.getUTCMonth()+H)+P-K};D.findExactDates=function(N,H){for(var L=0,P=0,Q=0,S=0,O,U=n(H)&&u.getComponentMethod("calendars","getCal")(H),X=0;X<N.length;X++)if(H=N[X],!d(H))S++;else if(!(H%c))if(U)try{O=U.fromJD(H/c+t),1===O.day()?1===O.month()?L++:P++:Q++}catch(da){}else O=new Date(H),
1===O.getUTCDate()?0===O.getUTCMonth()?L++:P++:Q++;P+=L;N=N.length-S;return{exactYears:L/N,exactMonths:P/N,exactDays:(Q+P)/N}}},{"../constants/numerical":724,"../registry":880,"./loggers":753,"./mod":756,"d3-time-format":166,"fast-isnumeric":241}],737:[function(b,y,D){function n(a){var d=a&&a.parentNode;d&&d.removeChild(a)}function m(a,d,e){a="plotly.js-style-"+a;var l=document.getElementById(a);l||(l=document.createElement("style"),l.setAttribute("id",a),l.appendChild(document.createTextNode("")),
document.head.appendChild(l));a=l.sheet;a.insertRule?a.insertRule(d+"{"+e+"}",0):a.addRule?a.addRule(d,e,0):h.warn("addStyleRule failed")}var p=b("d3"),h=b("./loggers");y.exports={getGraphDiv:function(a){if("string"===typeof a){var d=document.getElementById(a);if(null===d)throw Error("No DOM element with id '"+a+"' exists on the page.");return d}if(null===a||void 0===a)throw Error("DOM element provided is null or undefined");return a},isPlotDiv:function(a){a=p.select(a);return a.node()instanceof HTMLElement&&
a.size()&&a.classed("js-plotly-plot")},removeElement:n,addStyleRule:function(a,d){m("global",a,d)},addRelatedStyleRule:m,deleteRelatedStyleRule:function(a){(a=document.getElementById("plotly.js-style-"+a))&&n(a)}}},{"./loggers":753,d3:169}],738:[function(b,y,D){var n=b("events").EventEmitter;y.exports={init:function(m){if(m._ev instanceof n)return m;var p=new n,h=new n;m._ev=p;m._internalEv=h;m.on=p.on.bind(p);m.once=p.once.bind(p);m.removeListener=p.removeListener.bind(p);m.removeAllListeners=p.removeAllListeners.bind(p);
m._internalOn=h.on.bind(h);m._internalOnce=h.once.bind(h);m._removeInternalListener=h.removeListener.bind(h);m._removeAllInternalListeners=h.removeAllListeners.bind(h);m.emit=function(a,d){"undefined"!==typeof jQuery&&jQuery(m).trigger(a,d);p.emit(a,d);h.emit(a,d)};return m},triggerHandler:function(m,p,h){function a(k){if(k.listener){if(e.removeListener(p,k.listener),!k.fired)return k.fired=!0,k.listener.apply(e,[h])}else return k.apply(e,[h])}var d;"undefined"!==typeof jQuery&&(d=jQuery(m).triggerHandler(p,
h));var e=m._ev;if(!e)return d;m=e._events[p];if(!m)return d;m=Array.isArray(m)?m:[m];var l;for(l=0;l<m.length-1;l++)a(m[l]);m=a(m[l]);return void 0!==d?d:m},purge:function(m){delete m._ev;delete m.on;delete m.once;delete m.removeListener;delete m.removeAllListeners;delete m.emit;delete m._ev;delete m._internalEv;delete m._internalOn;delete m._internalOnce;delete m._removeInternalListener;delete m._removeAllInternalListeners;return m}}},{events:110}],739:[function(b,y,D){function n(h,a,d,e){var l=
h[0],k=h.length,c,f,g;if(2===k&&p(l)&&p(h[1])&&0===l.length){a:{var q=h[1];for(f=0;f<q.length;f++){var t=q[f];if(null!==t&&"object"===typeof t){q=!1;break a}void 0!==t&&(l[f]=t)}q=!0}if(q)return l;l.splice(0,l.length)}for(t=1;t<k;t++)for(c in q=h[t],q){var u=l[c];f=q[c];if(e&&p(f))l[c]=f;else if(a&&f&&(m(f)||(g=p(f))))g?(g=!1,u=u&&p(u)?u:[]):u=u&&m(u)?u:{},l[c]=n([u,f],a,d,e);else if("undefined"!==typeof f||d)l[c]=f}return l}var m=b("./is_plain_object.js"),p=Array.isArray;D.extendFlat=function(){return n(arguments,
!1,!1,!1)};D.extendDeep=function(){return n(arguments,!0,!1,!1)};D.extendDeepAll=function(){return n(arguments,!0,!0,!1)};D.extendDeepNoArrays=function(){return n(arguments,!0,!1,!0)}},{"./is_plain_object.js":750}],740:[function(b,y,D){y.exports=function(n){for(var m={},p=[],h=0,a=0;a<n.length;a++){var d=n[a];1!==m[d]&&(m[d]=1,p[h++]=d)}return p}},{}],741:[function(b,y,D){function n(p){return!0===p.visible}function m(p){p=p[0].trace;return!0===p.visible&&0!==p._length}y.exports=function(p){for(var h=
Array.isArray(p)&&Array.isArray(p[0])&&p[0][0]&&p[0][0].trace?m:n,a=[],d=0;d<p.length;d++){var e=p[d];h(e)&&a.push(e)}return a}},{}],742:[function(b,y,D){function n(q){q=q.geojson;var t=window.PlotlyGeoAssets||{};t="string"===typeof q?t[q]:q;return l(t)?t:(e.error("Oops ... something went wrong when fetching "+q),!1)}var m=b("d3"),p=b("country-regex"),h=b("@turf/area"),a=b("@turf/centroid"),d=b("@turf/bbox");D=b("./identity");var e=b("./loggers"),l=b("./is_plain_object"),k=b("./nested_property"),
c=b("./polygon"),f=Object.keys(p),g={"ISO-3":D,"USA-states":D,"country names":function(q){for(var t=0;t<f.length;t++){var u=f[t];if((new RegExp(p[u])).test(q.trim().toLowerCase()))return u}e.log("Unrecognized country name: "+q+".");return!1}};y.exports={locationToFeature:function(q,t,u){if(!t||"string"!==typeof t)return!1;t=g[q](t);var w;if(t){if("USA-states"===q)for(q=[],w=0;w<u.length;w++){var x=u[w];x.properties&&x.properties.gu&&"USA"===x.properties.gu&&q.push(x)}else q=u;for(w=0;w<q.length;w++)if(x=
q[w],x.id===t)return x;e.log(["Location with id",t,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(q){function t(z){for(var B=0;B<z.length-1;B++)if(0<z[B][0]&&0>z[B+1][0])return B;return null}var u=q.geometry,w=u.coordinates;q=q.id;var x=[],E,F;q="RUS"===q||"FJI"===q?function(z){if(null===t(z))var B=z;else for(B=Array(z.length),F=0;F<z.length;F++)B[F]=[0>z[F][0]?z[F][0]+360:z[F][0],z[F][1]];x.push(c.tester(B))}:"ATA"===q?function(z){var B=
t(z);if(null===B)return x.push(c.tester(z));var C=Array(z.length+1),v=0;for(F=0;F<z.length;F++)F>B?C[v++]=[z[F][0]+360,z[F][1]]:F===B?(C[v++]=z[F],C[v++]=[z[F][0],-90]):C[v++]=z[F];z=c.tester(C);z.pts.pop();x.push(z)}:function(z){x.push(c.tester(z))};switch(u.type){case "MultiPolygon":for(u=0;u<w.length;u++)for(E=0;E<w[u].length;E++)q(w[u][E]);break;case "Polygon":for(u=0;u<w.length;u++)q(w[u])}return x},getTraceGeojson:n,extractTraceFeature:function(q){function t(C){var v=k(C,u.featureidkey||"id").get(),
G=x[v];if(G){var I=C.geometry;if("Polygon"===I.type||"MultiPolygon"===I.type){I={type:"Feature",id:v,geometry:I,properties:{}};var J=I.properties,K=I.geometry;if("MultiPolygon"===K.type){K=K.coordinates;for(var N=0,H=0;H<K.length;H++){var L={type:"Polygon",coordinates:K[H]},P=h.default(L);if(P>N){N=P;var Q=L}}}else Q=K;Q=a.default(Q).geometry.coordinates;J.ct=Q;G.fIn=C;G.fOut=I;E.push(I)}else e.log(["Location",G.loc,"does not have a valid GeoJSON geometry. Traces with locationmode *geojson-id* only support *Polygon* and *MultiPolygon* geometries."].join(" "))}delete x[v]}
var u=q[0].trace,w=n(u);if(!w)return!1;var x={},E=[],F;for(F=0;F<u._length;F++){var z=q[F];if(z.loc||0===z.loc)x[z.loc]=z}switch(w.type){case "FeatureCollection":q=w.features;for(F=0;F<q.length;F++)t(q[F]);break;case "Feature":t(w);break;default:return e.warn(["Invalid GeoJSON type",(w.type||"none")+".","Traces with locationmode *geojson-id* only support *FeatureCollection* and *Feature* types."].join(" ")),!1}for(var B in x)e.log(["Location *"+B+"*","does not have a matching feature with id-key",
"*"+u.featureidkey+"*."].join(" "));return E},fetchTraceGeoData:function(q){function t(z){return new Promise(function(B,C){m.json(z,function(v,G){if(v)return delete w[z],C(Error(404===v.status?'GeoJSON at URL "'+z+'" does not exist.':"Unexpected error while fetching from "+z));w[z]=G;return B(G)})})}function u(z){return new Promise(function(B,C){var v=0,G=setInterval(function(){if(w[z]&&"pending"!==w[z])return clearInterval(G),B(w[z]);if(100<v)return clearInterval(G),C("Unexpected error while fetching from "+
z);v++},50)})}for(var w=window.PlotlyGeoAssets||{},x=[],E=0;E<q.length;E++){var F=q[E][0].trace.geojson;"string"===typeof F&&(w[F]?"pending"===w[F]&&x.push(u(F)):(w[F]="pending",x.push(t(F))))}return x},computeBbox:function(q){return d.default(q)}}},{"./identity":747,"./is_plain_object":750,"./loggers":753,"./nested_property":757,"./polygon":761,"@turf/area":59,"@turf/bbox":60,"@turf/centroid":61,"country-regex":139,d3:169}],743:[function(b,y,D){var n=b("../constants/numerical").BADNUM;D.calcTraceToLineCoords=
function(m){for(var p=m[0].trace.connectgaps,h=[],a=[],d=0;d<m.length;d++){var e=m[d].lonlat;e[0]!==n?a.push(e):!p&&0<a.length&&(h.push(a),a=[])}0<a.length&&h.push(a);return h};D.makeLine=function(m){return 1===m.length?{type:"LineString",coordinates:m[0]}:{type:"MultiLineString",coordinates:m}};D.makePolygon=function(m){if(1===m.length)return{type:"Polygon",coordinates:m};for(var p=Array(m.length),h=0;h<m.length;h++)p[h]=[m[h]];return{type:"MultiPolygon",coordinates:p}};D.makeBlank=function(){return{type:"Point",
coordinates:[]}}},{"../constants/numerical":724}],744:[function(b,y,D){function n(e,l,k,c,f,g,q,t){k-=e;var u=f-e;f=q-f;c-=l;q=g-l;t-=g;g=k*t-f*c;if(0===g)return null;t=(u*t-f*q)/g;u=(u*c-k*q)/g;return 0>u||1<u||0>t||1<t?null:{x:e+k*t,y:l+c*t}}function m(e,l,k,c,f){var g=c*e+f*l;if(0>g)return c*c+f*f;if(g>k)return k=c-e,l=f-l,k*k+l*l;l=c*l-f*e;return l*l/k}var p=b("./mod").mod;D.segmentsIntersect=n;D.segmentDistance=function(e,l,k,c,f,g,q,t){if(n(e,l,k,c,f,g,q,t))return 0;var u=k-e,w=c-l,x=q-f,E=
t-g,F=u*u+w*w,z=x*x+E*E;e=Math.min(m(u,w,F,f-e,g-l),m(u,w,F,q-e,t-l),m(x,E,z,e-f,l-g),m(x,E,z,k-f,c-g));return Math.sqrt(e)};var h,a,d;D.getTextLocation=function(e,l,k,c){if(e!==a||c!==d)h={},a=e,d=c;if(h[k])return h[k];var f=e.getPointAtLength(p(k-c/2,l));c=e.getPointAtLength(p(k+c/2,l));var g=Math.atan((c.y-f.y)/(c.x-f.x));e=e.getPointAtLength(p(k,l));f={x:(4*e.x+f.x+c.x)/6,y:(4*e.y+f.y+c.y)/6,theta:g};return h[k]=f};D.clearLocationCache=function(){a=null};D.getVisibleSegment=function(e,l,k){function c(z){var B=
e.getPointAtLength(z);0===z?x=B:z===u&&(E=B);z=B.x<f?f-B.x:B.x>g?B.x-g:0;B=B.y<q?q-B.y:B.y>t?B.y-t:0;return Math.sqrt(z*z+B*B)}var f=l.left,g=l.right,q=l.top,t=l.bottom;l=0;for(var u=e.getTotalLength(),w=u,x,E,F=c(l);F;){l+=F+k;if(l>w)return;F=c(l)}for(F=c(w);F;){w-=F+k;if(l>w)return;F=c(w)}return{min:l,max:w,len:w-l,total:u,isClosed:0===l&&w===u&&.1>Math.abs(x.x-E.x)&&.1>Math.abs(x.y-E.y)}};D.findPointOnPath=function(e,l,k,c){c=c||{};var f=c.pathLength||e.getTotalLength(),g=c.tolerance||.001;c=c.iterationLimit||
30;for(var q=e.getPointAtLength(0)[k]>e.getPointAtLength(f)[k]?-1:1,t=0,u=0,w,x,E;t<c&&!(w=(u+f)/2,x=e.getPointAtLength(w),E=x[k]-l,Math.abs(E)<g);)0<q*E?f=w:u=w,t++;return x}},{"./mod":756}],745:[function(b,y,D){function n(c,f){c[3]*=f;return c}function m(c){if(h(c))return k;c=d(c);return c.length?c:k}function p(c){return h(c)?c:1}var h=b("fast-isnumeric"),a=b("tinycolor2"),d=b("color-normalize"),e=b("../components/colorscale");D=b("../components/color/attributes").defaultLine;var l=b("./array").isArrayOrTypedArray,
k=d(D);y.exports={formatColor:function(c,f,g){var q=c.color,t=l(q),u=l(f),w=[];var x=void 0!==e.extractOpts(c).colorscale?e.makeColorScaleFuncFromTrace(c):m;c=t?function(z,B){return void 0===z[B]?k:d(x(z[B]))}:m;var E=u?function(z,B){return void 0===z[B]?1:p(z[B])}:p;if(t||u)for(var F=0;F<g;F++)t=c(q,F),u=E(f,F),w[F]=n(t,u);else w=n(d(q),f);return w},parseColorScale:function(c,f){void 0===f&&(f=1);c=e.extractOpts(c);return(c.reversescale?e.flipScale(c.colorscale):c.colorscale).map(function(g){var q=
g[0];g=a(g[1]).toRgb();return{index:q,rgb:[g.r,g.g,g.b,f]}})}}},{"../components/color/attributes":614,"../components/colorscale":627,"./array":731,"color-normalize":125,"fast-isnumeric":241,tinycolor2:548}],746:[function(b,y,D){function n(m){return[m]}b=b("./identity");y.exports={keyFun:function(m){return m.key},repeat:n,descend:b,wrap:n,unwrap:function(m){return m[0]}}},{"./identity":747}],747:[function(b,y,D){y.exports=function(n){return n}},{}],748:[function(b,y,D){y.exports=function(n,m){if(!m)return n;
var p=1/Math.abs(m);p=1<p?(p*n+p*m)/p:n+m;var h=String(p).length;16<h&&h>=String(n).length+String(m).length&&(n=parseFloat(p).toPrecision(12),-1===n.indexOf("e+")&&(p=+n));return p}},{}],749:[function(b,y,D){function n(F){var z={},B;for(B in F)for(var C=F[B],v=0;v<C.length;v++)z[C[v]]=+B;return z}function m(F,z,B){var C=this,v=arguments;z||(z={});var G={};return F.replace(l.TEMPLATE_STRING_REGEX,function(I,J,K){var N,H;for(H=3;H<v.length;H++)if(N=v[H]){if(N.hasOwnProperty(J)){var L=N[J];break}t.test(J)||
(L=G[J]||l.nestedProperty(N,J).get())&&(G[J]=L);if(void 0!==L)break}if(void 0===L&&C)return C.count<C.max&&l.warn("Variable '"+J+"' in "+C.name+" could not be found!"),C.count===C.max&&l.warn("Too many "+C.name+" warnings - additional warnings will be suppressed"),C.count++,I;K?(":"===K[0]&&(I=B?B.numberFormat:p.format,L=I(K.replace(x,""))(L)),"|"===K[0]&&(I=B?B.timeFormat:h,L=l.dateTime2ms(L),L=l.formatDate(L,K.replace(x,""),!1,I))):z.hasOwnProperty(J+"Label")&&(L=z[J+"Label"]);return L})}var p=
b("d3"),h=b("d3-time-format").utcFormat,a=b("fast-isnumeric");D=b("../constants/numerical");var d=D.FP_SAFE,e=D.BADNUM,l=y.exports={};l.nestedProperty=b("./nested_property");l.keyedContainer=b("./keyed_container");l.relativeAttr=b("./relative_attr");l.isPlainObject=b("./is_plain_object");l.toLogRange=b("./to_log_range");l.relinkPrivateKeys=b("./relink_private");y=b("./array");l.isTypedArray=y.isTypedArray;l.isArrayOrTypedArray=y.isArrayOrTypedArray;l.isArray1D=y.isArray1D;l.ensureArray=y.ensureArray;
l.concat=y.concat;l.maxRowLength=y.maxRowLength;l.minRowLength=y.minRowLength;y=b("./mod");l.mod=y.mod;l.modHalf=y.modHalf;y=b("./coerce");l.valObjectMeta=y.valObjectMeta;l.coerce=y.coerce;l.coerce2=y.coerce2;l.coerceFont=y.coerceFont;l.coerceHoverinfo=y.coerceHoverinfo;l.coerceSelectionMarkerOpacity=y.coerceSelectionMarkerOpacity;l.validate=y.validate;y=b("./dates");l.dateTime2ms=y.dateTime2ms;l.isDateTime=y.isDateTime;l.ms2DateTime=y.ms2DateTime;l.ms2DateTimeLocal=y.ms2DateTimeLocal;l.cleanDate=
y.cleanDate;l.isJSDate=y.isJSDate;l.formatDate=y.formatDate;l.incrementMonth=y.incrementMonth;l.dateTick0=y.dateTick0;l.dfltRange=y.dfltRange;l.findExactDates=y.findExactDates;l.MIN_MS=y.MIN_MS;l.MAX_MS=y.MAX_MS;y=b("./search");l.findBin=y.findBin;l.sorterAsc=y.sorterAsc;l.sorterDes=y.sorterDes;l.distinctVals=y.distinctVals;l.roundUp=y.roundUp;l.sort=y.sort;l.findIndexOfMin=y.findIndexOfMin;y=b("./stats");l.aggNums=y.aggNums;l.len=y.len;l.mean=y.mean;l.median=y.median;l.midRange=y.midRange;l.variance=
y.variance;l.stdev=y.stdev;l.interp=y.interp;y=b("./matrix");l.init2dArray=y.init2dArray;l.transposeRagged=y.transposeRagged;l.dot=y.dot;l.translationMatrix=y.translationMatrix;l.rotationMatrix=y.rotationMatrix;l.rotationXYMatrix=y.rotationXYMatrix;l.apply2DTransform=y.apply2DTransform;l.apply2DTransform2=y.apply2DTransform2;y=b("./angles");l.deg2rad=y.deg2rad;l.rad2deg=y.rad2deg;l.angleDelta=y.angleDelta;l.angleDist=y.angleDist;l.isFullCircle=y.isFullCircle;l.isAngleInsideSector=y.isAngleInsideSector;
l.isPtInsideSector=y.isPtInsideSector;l.pathArc=y.pathArc;l.pathSector=y.pathSector;l.pathAnnulus=y.pathAnnulus;y=b("./anchor_utils");l.isLeftAnchor=y.isLeftAnchor;l.isCenterAnchor=y.isCenterAnchor;l.isRightAnchor=y.isRightAnchor;l.isTopAnchor=y.isTopAnchor;l.isMiddleAnchor=y.isMiddleAnchor;l.isBottomAnchor=y.isBottomAnchor;y=b("./geometry2d");l.segmentsIntersect=y.segmentsIntersect;l.segmentDistance=y.segmentDistance;l.getTextLocation=y.getTextLocation;l.clearLocationCache=y.clearLocationCache;l.getVisibleSegment=
y.getVisibleSegment;l.findPointOnPath=y.findPointOnPath;y=b("./extend");l.extendFlat=y.extendFlat;l.extendDeep=y.extendDeep;l.extendDeepAll=y.extendDeepAll;l.extendDeepNoArrays=y.extendDeepNoArrays;y=b("./loggers");l.log=y.log;l.warn=y.warn;l.error=y.error;y=b("./regex");l.counterRegex=y.counter;y=b("./throttle");l.throttle=y.throttle;l.throttleDone=y.done;l.clearThrottle=y.clear;y=b("./dom");l.getGraphDiv=y.getGraphDiv;l.isPlotDiv=y.isPlotDiv;l.removeElement=y.removeElement;l.addStyleRule=y.addStyleRule;
l.addRelatedStyleRule=y.addRelatedStyleRule;l.deleteRelatedStyleRule=y.deleteRelatedStyleRule;l.clearResponsive=b("./clear_responsive");l.makeTraceGroups=b("./make_trace_groups");l._=b("./localize");l.notifier=b("./notifier");l.filterUnique=b("./filter_unique");l.filterVisible=b("./filter_visible");l.pushUnique=b("./push_unique");l.increment=b("./increment");l.cleanNumber=b("./clean_number");l.ensureNumber=function(F){if(!a(F))return e;F=Number(F);return F<-d||F>d?e:a(F)?Number(F):e};l.isIndex=function(F,
z){return void 0!==z&&F>=z?!1:a(F)&&0<=F&&0===F%1};l.noop=b("./noop");l.identity=b("./identity");l.repeat=function(F,z){for(var B=Array(z),C=0;C<z;C++)B[C]=F;return B};l.swapAttrs=function(F,z,B,C){B||(B="x");C||(C="y");for(var v=0;v<z.length;v++){var G=z[v],I=l.nestedProperty(F,G.replace("?",B));G=l.nestedProperty(F,G.replace("?",C));var J=I.get();I.set(G.get());G.set(J)}};l.raiseToTop=function(F){F.parentNode.appendChild(F)};l.cancelTransition=function(F){return F.transition().duration(0)};l.constrain=
function(F,z,B){return z>B?Math.max(B,Math.min(z,F)):Math.max(z,Math.min(B,F))};l.bBoxIntersect=function(F,z,B){B=B||0;return F.left<=z.right+B&&z.left<=F.right+B&&F.top<=z.bottom+B&&z.top<=F.bottom+B};l.simpleMap=function(F,z,B,C,v){for(var G=F.length,I=Array(G),J=0;J<G;J++)I[J]=z(F[J],B,C,v);return I};l.randstr=function G(z,B,C,v){C||(C=16);void 0===B&&(B=24);if(0>=B)return"0";var I=Math.log(Math.pow(2,B))/Math.log(C),J="",K;for(K=2;Infinity===I;K*=2)I=Math.log(Math.pow(2,B/K))/Math.log(C)*K;var N=
I-Math.floor(I);for(K=0;K<Math.floor(I);K++){var H=Math.floor(Math.random()*C).toString(C);J=H+J}N&&(I=Math.pow(C,N),H=Math.floor(Math.random()*I).toString(C),J=H+J);I=parseInt(J,C);return z&&z[J]||Infinity!==I&&I>=Math.pow(2,B)?10<v?(l.warn("randstr failed uniqueness"),J):G(z,B,C,(v||0)+1):J};l.OptionControl=function(z,B){z||(z={});B||(B="opt");var C={optionList:[],_newoption:function(v){v[B]=z;C[v.name]=v;C.optionList.push(v)}};C["_"+B]=z;return C};l.smooth=function(z,B){B=Math.round(B)||0;if(2>
B)return z;var C=z.length,v=2*C,G=2*B-1,I=Array(G),J=Array(C),K,N,H;for(K=0;K<G;K++)I[K]=(1-Math.cos(Math.PI*(K+1)/B))/(2*B);for(K=0;K<C;K++){for(N=H=0;N<G;N++){var L=K+N+1-B;L<-C?L-=v*Math.round(L/v):L>=v&&(L-=v*Math.floor(L/v));0>L?L=-1-L:L>=C&&(L=v-1-L);H+=z[L]*I[N]}J[K]=H}return J};l.syncOrAsync=function(z,B,C){function v(){return l.syncOrAsync(z,B,C)}for(var G;z.length;)if(G=z.splice(0,1)[0],(G=G(B))&&G.then)return G.then(v).then(void 0,l.promiseError);return C&&C(B)};l.stripTrailingSlash=function(z){return"/"===
z.substr(-1)?z.substr(0,z.length-1):z};l.noneOrAll=function(z,B,C){if(z){var v=!1,G=!0,I;for(I=0;I<C.length;I++){var J=z[C[I]];void 0!==J&&null!==J?v=!0:G=!1}if(v&&!G)for(I=0;I<C.length;I++)z[C[I]]=B[C[I]]}};l.mergeArray=function(z,B,C,v){var G="function"===typeof v;if(l.isArrayOrTypedArray(z))for(var I=Math.min(z.length,B.length),J=0;J<I;J++){var K=z[J];B[J][C]=G?v(K):K}};l.mergeArrayCastPositive=function(z,B,C){return l.mergeArray(z,B,C,function(v){v=+v;return isFinite(v)?0<v?v:0:0})};l.fillArray=
function(z,B,C,v){v=v||l.identity;if(l.isArrayOrTypedArray(z))for(var G=0;G<B.length;G++)B[G][C]=v(z[G])};l.castOption=function(z,B,C,v){v=v||l.identity;z=l.nestedProperty(z,C).get();return l.isArrayOrTypedArray(z)?Array.isArray(B)&&l.isArrayOrTypedArray(z[B[0]])?v(z[B[0]][B[1]]):v(z[B]):z};l.extractOption=function(z,B,C,v){if(C in z)return z[C];z=l.nestedProperty(B,v).get();if(!Array.isArray(z))return z};l.tagSelected=function(z,B,C){var v=B.selectedpoints;B=B._indexToPoints;var G;B&&(G=n(B));for(B=
0;B<v.length;B++){var I=v[B];if(l.isIndex(I)||l.isArrayOrTypedArray(I)&&l.isIndex(I[0])&&l.isIndex(I[1]))I=G?G[I]:I,I=C?C[I]:I,void 0!==I&&I<z.length&&(z[I].selected=1)}};l.selIndices2selPoints=function(z){var B=z.selectedpoints;if(z=z._indexToPoints){z=n(z);for(var C=[],v=0;v<B.length;v++){var G=B[v];l.isIndex(G)&&(G=z[G],l.isIndex(G)&&C.push(G))}return C}return B};l.getTargetArray=function(z,B){B=B.target;return"string"===typeof B&&B?(z=l.nestedProperty(z,B).get(),Array.isArray(z)?z:!1):Array.isArray(B)?
B:!1};l.minExtend=function(z,B){var C={};"object"!==typeof B&&(B={});var v=Object.keys(z),G;for(G=0;G<v.length;G++){var I=v[G];var J=z[I];"_"!==I.charAt(0)&&"function"!==typeof J&&("module"===I?C[I]=J:Array.isArray(J)?C[I]="colorscale"===I?J.slice():J.slice(0,3):l.isTypedArray(J)?C[I]=J.subarray(0,3):C[I]=J&&"object"===typeof J?l.minExtend(z[I],B[I]):J)}v=Object.keys(B);for(G=0;G<v.length;G++)I=v[G],J=B[I],"object"===typeof J&&I in C&&"object"===typeof C[I]||(C[I]=J);return C};l.titleCase=function(z){return z.charAt(0).toUpperCase()+
z.substr(1)};l.containsAny=function(z,B){for(var C=0;C<B.length;C++)if(-1!==z.indexOf(B[C]))return!0;return!1};l.isIE=function(){return"undefined"!==typeof window.navigator.msSaveBlob};var k=/MSIE [1-9]\./;l.isIE9orBelow=function(){return l.isIE()&&k.test(window.navigator.userAgent)};var c=/Version\/[\d\.]+.*Safari/;l.isSafari=function(){return c.test(window.navigator.userAgent)};var f=/iPad|iPhone|iPod/;l.isIOS=function(){return f.test(window.navigator.userAgent)};l.isD3Selection=function(z){return z&&
"function"===typeof z.classed};l.ensureSingle=function(z,B,C,v){var G=z.select(B+(C?"."+C:""));if(G.size())return G;z=z.append(B);C&&z.classed(C,!0);v&&z.call(v);return z};l.ensureSingleById=function(z,B,C,v){var G=z.select(B+"#"+C);if(G.size())return G;z=z.append(B).attr("id",C);v&&z.call(v);return z};l.objectFromPath=function(z,B){z=z.split(".");for(var C,v=C={},G=0;G<z.length;G++){var I=z[G],J;(J=z[G].match(/(.*)\[([0-9]+)\]/))?(I=J[1],J=J[2],C=C[I]=[],C[J]=G===z.length-1?B:{},C=C[J]):(C[I]=G===
z.length-1?B:{},C=C[I])}return v};var g=/^([^\[\.]+)\.(.+)?/,q=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;l.expandObjectPaths=function(z){var B,C;if("object"===typeof z&&!Array.isArray(z))for(C in z)if(z.hasOwnProperty(C))if(B=C.match(g)){var v=z[C];var G=B[1];delete z[C];z[G]=l.extendDeepNoArrays(z[G]||{},l.objectFromPath(C,l.expandObjectPaths(v))[G])}else if(B=C.match(q)){v=z[C];G=B[1];var I=parseInt(B[2]);delete z[C];z[G]=z[G]||[];"."===B[3]?(B=B[4],G=z[G][I]=z[G][I]||{},l.extendDeepNoArrays(G,l.objectFromPath(B,
l.expandObjectPaths(v)))):z[G][I]=l.expandObjectPaths(v)}else z[C]=l.expandObjectPaths(z[C]);return z};l.numSeparate=function(z,B,C){C||(C=!1);if("string"!==typeof B||0===B.length)throw Error("Separator string required for formatting!");"number"===typeof z&&(z=String(z));var v=/(\d+)(\d{3})/,G=B.charAt(0);B=B.charAt(1);z=z.split(".");var I=z[0];G=1<z.length?G+z[1]:"";if(B&&(1<z.length||4<I.length||C))for(;v.test(I);)I=I.replace(v,"$1"+B+"$2");return I+G};l.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;
var t=/^\w*$/;l.templateString=function(z,B){var C={};return z.replace(l.TEMPLATE_STRING_REGEX,function(v,G){t.test(G)?v=B[G]:(C[G]=C[G]||l.nestedProperty(B,G).get,v=C[G]());return l.isValidTextValue(v)?v:""})};var u={max:10,count:0,name:"hovertemplate"};l.hovertemplateString=function(){return m.apply(u,arguments)};var w={max:10,count:0,name:"texttemplate"};l.texttemplateString=function(){return m.apply(w,arguments)};var x=/^[:|\|]/;l.subplotSort=function(z,B){for(var C=Math.min(z.length,B.length)+
1,v=0,G=0,I=0;I<C;I++){var J=z.charCodeAt(I)||0,K=B.charCodeAt(I)||0,N=48<=J&&57>=J,H=48<=K&&57>=K;N&&(v=10*v+J-48);H&&(G=10*G+K-48);if(!N||!H){if(v!==G)return v-G;if(J!==K)return J-K}}return G-v};var E=2E9;l.seedPseudoRandom=function(){E=2E9};l.pseudoRandom=function(){var z=E;E=(69069*E+1)%4294967296;return 429496729>Math.abs(E-z)?l.pseudoRandom():E/4294967296};l.fillText=function(z,B,C){var v=Array.isArray(C)?function(I){C.push(I)}:function(I){C.text=I},G=l.extractOption(z,B,"htx","hovertext");
if(l.isValidTextValue(G))return v(G);z=l.extractOption(z,B,"tx","text");if(l.isValidTextValue(z))return v(z)};l.isValidTextValue=function(z){return z||0===z};l.formatPercent=function(z,B){B=B||0;z=(Math.round(100*z*Math.pow(10,B))*Math.pow(.1,B)).toFixed(B)+"%";for(var C=0;C<B;C++)-1!==z.indexOf(".")&&(z=z.replace("0%","%"),z=z.replace(".%","%"));return z};l.isHidden=function(z){z=window.getComputedStyle(z).display;return!z||"none"===z};l.getTextTransform=function(z){var B=z.noCenter,C=z.textX,v=
z.textY,G=z.targetX,I=z.targetY,J=z.anchorX||0,K=z.anchorY||0,N=z.rotate;(z=z.scale)?1<z&&(z=1):z=0;return"translate("+(G-z*(C+J))+","+(I-z*(v+K))+")"+(1>z?"scale("+z+")":"")+(N?"rotate("+N+(B?"":" "+C+" "+v)+")":"")};l.ensureUniformFontSize=function(z,B){var C=l.extendFlat({},B);C.size=Math.max(B.size,z._fullLayout.uniformtext.minsize||0);return C}},{"../constants/numerical":724,"./anchor_utils":729,"./angles":730,"./array":731,"./clean_number":732,"./clear_responsive":734,"./coerce":735,"./dates":736,
"./dom":737,"./extend":739,"./filter_unique":740,"./filter_visible":741,"./geometry2d":744,"./identity":747,"./increment":748,"./is_plain_object":750,"./keyed_container":751,"./localize":752,"./loggers":753,"./make_trace_groups":754,"./matrix":755,"./mod":756,"./nested_property":757,"./noop":758,"./notifier":759,"./push_unique":763,"./regex":765,"./relative_attr":766,"./relink_private":767,"./search":768,"./stats":771,"./throttle":774,"./to_log_range":775,d3:169,"d3-time-format":166,"fast-isnumeric":241}],
750:[function(b,y,D){y.exports=function(n){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(n):"[object Object]"===Object.prototype.toString.call(n)&&Object.getPrototypeOf(n)===Object.prototype}},{}],751:[function(b,y,D){var n=b("./nested_property"),m=/^\w*$/;y.exports=function(p,h,a,d){a=a||"name";d=d||"value";var e,l={};if(h&&h.length){var k=n(p,h);var c=k.get()}else c=p;h=h||"";var f={};if(c)for(e=0;e<c.length;e++)f[c[e][a]]=e;var g=m.test(d),
q={set:function(t,u){var w=null===u?4:0;if(!c){if(!k||4===w)return;c=[];k.set(c)}var x=f[t];if(void 0===x){if(4===w)return;w|=3;x=c.length;f[t]=x}else u!==(g?c[x][d]:n(c[x],d).get())&&(w|=2);var E=c[x]=c[x]||{};E[a]=t;g?E[d]=u:n(E,d).set(u);null!==u&&(w&=-5);l[x]|=w;return q},get:function(t){if(c&&(t=f[t],void 0!==t))return g?c[t][d]:n(c[t],d).get()},rename:function(t,u){var w=f[t];if(void 0===w)return q;l[w]|=1;f[u]=w;delete f[t];c[w][a]=u;return q},remove:function(t){var u=f[t];if(void 0===u)return q;
var w=c[u];if(2<Object.keys(w).length)return l[u]|=2,q.set(t,null);if(g){for(e=u;e<c.length;e++)l[e]|=3;for(e=u;e<c.length;e++)f[c[e][a]]--;c.splice(u,1);delete f[t]}else n(w,d).set(null),l[u]|=6;return q},constructUpdate:function(){for(var t,u,w={},x=Object.keys(l),E=0;E<x.length;E++)u=x[E],t=h+"["+u+"]",c[u]?(l[u]&1&&(w[t+"."+a]=c[u][a]),l[u]&2&&(w[t+"."+d]=g?l[u]&4?null:c[u][d]:l[u]&4?null:n(c[u],d).get())):w[t]=null;return w}};return q}},{"./nested_property":757}],752:[function(b,y,D){var n=b("../registry");
y.exports=function(m,p){for(var h=m._context.locale,a=0;2>a;a++){for(var d=m._context.locales,e=0;2>e;e++){if(d=(d[h]||{}).dictionary)if(d=d[p])return d;d=n.localeRegistry}e=h.split("-")[0];if(e===h)break;h=e}return p}},{"../registry":880}],753:[function(b,y,D){function n(h,a){if(h&&h.apply)try{h.apply(console,a);return}catch(e){}for(var d=0;d<a.length;d++)try{h(a[d])}catch(e){console.log(a[d])}}var m=b("../plot_api/plot_config").dfltConfig,p=b("./notifier");b=y.exports={};b.log=function(){var h;
if(1<m.logging){var a=["LOG:"];for(h=0;h<arguments.length;h++)a.push(arguments[h]);n(console.trace||console.log,a)}if(1<m.notifyOnLogging){a=[];for(h=0;h<arguments.length;h++)a.push(arguments[h]);p(a.join("\x3cbr\x3e"),"long")}};b.warn=function(){var h;if(0<m.logging){var a=["WARN:"];for(h=0;h<arguments.length;h++)a.push(arguments[h]);n(console.trace||console.log,a)}if(0<m.notifyOnLogging){a=[];for(h=0;h<arguments.length;h++)a.push(arguments[h]);p(a.join("\x3cbr\x3e"),"stick")}};b.error=function(){var h;
if(0<m.logging){var a=["ERROR:"];for(h=0;h<arguments.length;h++)a.push(arguments[h]);n(console.error,a)}if(0<m.notifyOnLogging){a=[];for(h=0;h<arguments.length;h++)a.push(arguments[h]);p(a.join("\x3cbr\x3e"),"stick")}}},{"../plot_api/plot_config":785,"./notifier":759}],754:[function(b,y,D){var n=b("d3");y.exports=function(m,p,h){p=m.selectAll("g."+h.replace(/\s/g,".")).data(p,function(d){return d[0].trace.uid});p.exit().remove();p.enter().append("g").attr("class",h);p.order();var a=m.classed("rangeplot")?
"nodeRangePlot3":"node3";p.each(function(d){d[0][a]=n.select(this)});return p}},{d3:169}],755:[function(b,y,D){D.init2dArray=function(n,m){for(var p=Array(n),h=0;h<n;h++)p[h]=Array(m);return p};D.transposeRagged=function(n){var m=0,p=n.length,h,a;for(h=0;h<p;h++)m=Math.max(m,n[h].length);var d=Array(m);for(h=0;h<m;h++)for(d[h]=Array(p),a=0;a<p;a++)d[h][a]=n[a][h];return d};D.dot=function(n,m){if(!n.length||!m.length||n.length!==m.length)return null;var p=n.length,h;if(n[0].length){var a=Array(p);
for(h=0;h<p;h++)a[h]=D.dot(n[h],m)}else if(m[0].length)for(m=D.transposeRagged(m),a=Array(m.length),h=0;h<m.length;h++)a[h]=D.dot(n,m[h]);else for(h=a=0;h<p;h++)a+=n[h]*m[h];return a};D.translationMatrix=function(n,m){return[[1,0,n],[0,1,m],[0,0,1]]};D.rotationMatrix=function(n){n=n*Math.PI/180;return[[Math.cos(n),-Math.sin(n),0],[Math.sin(n),Math.cos(n),0],[0,0,1]]};D.rotationXYMatrix=function(n,m,p){return D.dot(D.dot(D.translationMatrix(m,p),D.rotationMatrix(n)),D.translationMatrix(-m,-p))};D.apply2DTransform=
function(n){return function(){var m=arguments;3===m.length&&(m=m[0]);m=1===arguments.length?m[0]:[m[0],m[1]];return D.dot(n,[m[0],m[1],1]).slice(0,2)}};D.apply2DTransform2=function(n){var m=D.apply2DTransform(n);return function(p){return m(p.slice(0,2)).concat(m(p.slice(2,4)))}}},{}],756:[function(b,y,D){y.exports={mod:function(n,m){n%=m;return 0>n?n+m:n},modHalf:function(n,m){return Math.abs(n)>m/2?n-Math.round(n/m)*m:n}}},{}],757:[function(b,y,D){function n(k,c){return function(){var f=k,g,q;for(g=
0;g<c.length-1;g++){var t=c[g];if(-1===t){t=!0;var u=[];for(q=0;q<f.length;q++)u[q]=n(f[q],c.slice(g+1))(),u[q]!==u[0]&&(t=!1);return t?u[0]:u}if("number"===typeof t&&!e(f))return;f=f[t];if("object"!==typeof f||null===f)return}if("object"===typeof f&&null!==f&&(u=f[c[g]],null!==u))return u}}function m(k,c){return void 0===k||null===k&&!c.match(l)}function p(k,c,f){return function(g){var q=k,t="",u=[[k,t]],w=m(g,f),x;for(x=0;x<c.length-1;x++){var E=c[x];if("number"===typeof E&&!e(q))throw"array index but container is not an array";
if(-1===E){w=q;t=c.slice(x+1);E=g;var F=f,z=e(E),B=!0,C=E,v=F.replace("-1",0),G=z?!1:m(E,v),I=t[0];for(u=0;u<w.length;u++)v=F.replace("-1",u),z&&(C=E[u%E.length],G=m(C,v)),G&&(B=!1),h(w,u,I,G)&&p(w[u],t,F.replace("-1",u))(C);if(w=!B)break;else return}if(!h(q,E,c[x+1],w))break;q=q[E];if("object"!==typeof q||null===q)throw"container is not an object";F=E;d(E)?F="["+E+"]":t&&(F="."+E);t+=F;u.push([q,t])}if(w){if(x===c.length-1&&(delete q[c[x]],Array.isArray(q)&&+c[x]===q.length-1))for(;q.length&&void 0===
q[q.length-1];)q.pop()}else q[c[x]]=g}}function h(k,c,f,g){if(void 0===k[c]){if(g)return!1;k[c]="number"===typeof f?[]:{}}return!0}function a(k,c,f){return{set:function(){throw"bad container";},get:function(){},astr:c,parts:f,obj:k}}var d=b("fast-isnumeric"),e=b("./array").isArrayOrTypedArray;y.exports=function(k,c){if(d(c))c=String(c);else if("string"!==typeof c||"[-1]"===c.substr(c.length-4))throw"bad property string";for(var f=0,g=c.split("."),q,t;f<g.length;){if(q=String(g[f]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(q[1])g[f]=
q[1];else if(0===f)g.splice(0,1);else throw"bad property string";q=q[2].substr(1,q[2].length-2).split("][");for(t=0;t<q.length;t++)f++,g.splice(f,0,Number(q[t]))}f++}return"object"!==typeof k?a(k,c,g):{set:p(k,g,c),get:n(k,g),astr:c,parts:g,obj:k}};var l=/(^|\.)args\[/},{"./array":731,"fast-isnumeric":241}],758:[function(b,y,D){y.exports=function(){}},{}],759:[function(b,y,D){var n=b("d3"),m=b("fast-isnumeric"),p=[];y.exports=function(h,a){function d(l){l.duration(700).style("opacity",0).each("end",
function(k){k=p.indexOf(k);-1!==k&&p.splice(k,1);n.select(this).remove()})}if(-1===p.indexOf(h)){p.push(h);var e=1E3;m(a)?e=a:"long"===a&&(e=3E3);h=n.select("body").selectAll(".plotly-notifier").data([0]);h.enter().append("div").classed("plotly-notifier",!0);h.selectAll(".notifier-note").data(p).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(l){var k=n.select(this);k.append("button").classed("notifier-close",!0).html("\x26times;").on("click",function(){k.transition().call(d)});
var c=k.append("p");l=l.split(/<br\s*\/?>/g);for(var f=0;f<l.length;f++)f&&c.append("br"),c.append("span").text(l[f]);"stick"===a?k.transition().duration(350).style("opacity",1):k.transition().duration(700).style("opacity",1).transition().delay(e).call(d)})}}},{d3:169,"fast-isnumeric":241}],760:[function(b,y,D){var n=b("./setcursor");y.exports=function(m,p){var h=m.attr("data-savedcursor");if(p){if(!h){h=(m.attr("class")||"").split(" ");for(var a=0;a<h.length;a++){var d=h[a];0===d.indexOf("cursor-")&&
m.attr("data-savedcursor",d.substr(7)).classed(d,!1)}m.attr("data-savedcursor")||m.attr("data-savedcursor","!!")}n(m,p)}else h&&(m.attr("data-savedcursor",null),"!!"===h?n(m):n(m,h))}},{"./setcursor":769}],761:[function(b,y,D){var n=b("./matrix").dot,m=b("../constants/numerical").BADNUM,p=y.exports={};p.tester=function(h){function a(w,x){var E=w[0],F=w[1];return E===m||E<l||E>k||F===m||F<c||F>f||x&&q(w)?!1:!0}function d(w,x){var E=w[0];w=w[1];if(E===m||E<l||E>k||w===m||w<c||w>f)return!1;var F=e.length,
z=e[0][0],B=e[0][1],C=0,v;for(v=1;v<F;v++){var G=z;var I=B;z=e[v][0];B=e[v][1];var J=Math.min(G,z);if(!(E<J||E>Math.max(G,z)||w>Math.max(I,B)))if(w<Math.min(I,B))E!==J&&C++;else{G=z===G?w:I+(E-G)*(B-I)/(z-G);if(w===G)return 1===v&&x?!1:!0;w<=G&&E!==J&&C++}}return 1===C%2}var e=h.slice(),l=e[0][0],k=l,c=e[0][1],f=c;e.push(e[0]);for(h=1;h<e.length;h++)l=Math.min(l,e[h][0]),k=Math.max(k,e[h][0]),c=Math.min(c,e[h][1]),f=Math.max(f,e[h][1]);var g=!1;if(5===e.length)if(e[0][0]===e[1][0]){if(e[2][0]===e[3][0]&&
e[0][1]===e[3][1]&&e[1][1]===e[2][1]){g=!0;var q=function(w){return w[0]===e[0][0]}}}else e[0][1]===e[1][1]&&e[2][1]===e[3][1]&&e[0][0]===e[3][0]&&e[1][0]===e[2][0]&&(g=!0,q=function(w){return w[1]===e[0][1]});var t=!0,u=e[0];for(h=1;h<e.length;h++)if(u[0]!==e[h][0]||u[1]!==e[h][1]){t=!1;break}return{xmin:l,xmax:k,ymin:c,ymax:f,pts:e,contains:g?a:d,isRect:g,degenerate:t}};p.isSegmentBent=function(h,a,d,e){var l=h[a],k=[h[d][0]-l[0],h[d][1]-l[1]],c=n(k,k),f=Math.sqrt(c);f=[-k[1]/f,k[0]/f];for(a+=1;a<
d;a++){var g=[h[a][0]-l[0],h[a][1]-l[1]];var q=n(g,k);if(0>q||q>c||Math.abs(n(g,f))>e)return!0}return!1};p.filter=function(h,a){function d(f){h.push(f);f=e.length;var g=l;e.splice(k+1);for(var q=g+1;q<h.length;q++)if(q===h.length-1||p.isSegmentBent(h,g,q+1,a))e.push(h[q]),e.length<f-2&&(l=q,k=e.length-1),g=q}var e=[h[0]],l=0,k=0;if(1<h.length){var c=h.pop();d(c)}return{addPt:d,raw:h,filtered:e}}},{"../constants/numerical":724,"./matrix":755}],762:[function(b,y,D){(function(n){var m=b("./show_no_webgl_msg"),
p=b("regl");y.exports=function(h,a){var d=h._fullLayout,e=!0;d._glcanvas.each(function(l){if(!l.regl&&(!l.pick||d._has("parcoords"))){try{l.regl=p({canvas:this,attributes:{antialias:!l.pick,preserveDrawingBuffer:!0},pixelRatio:h._context.plotGlPixelRatio||n.devicePixelRatio,extensions:a||[]})}catch(k){e=!1}l.regl||(e=!1);e&&this.addEventListener("webglcontextlost",function(k){h&&h.emit&&h.emit("plotly_webglcontextlost",{event:k,layer:l.key})},!1)}});e||m({container:d._glcontainer.node()});return e}}).call(this,
"undefined"!==typeof xa?xa:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./show_no_webgl_msg":770,regl:512}],763:[function(b,y,D){y.exports=function(n,m){if(m instanceof RegExp){for(var p=m.toString(),h=0;h<n.length;h++)if(n[h]instanceof RegExp&&n[h].toString()===p)return n;n.push(m)}else!m&&0!==m||-1!==n.indexOf(m)||n.push(m);return n}},{}],764:[function(b,y,D){var n=b("../lib"),m=b("../plot_api/plot_config").dfltConfig,p={add:function(h,a,d,e,l){h.undoQueue=h.undoQueue||
{index:0,queue:[],sequence:!1};var k=h.undoQueue.index;if(h.autoplay)h.undoQueue.inSequence||(h.autoplay=!1);else{if(!h.undoQueue.sequence||h.undoQueue.beginSequence){var c={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};h.undoQueue.queue.splice(k,h.undoQueue.queue.length-k,c);h.undoQueue.index+=1}else c=h.undoQueue.queue[k-1];h.undoQueue.beginSequence=!1;c&&(c.undo.calls.unshift(a),c.undo.args.unshift(d),c.redo.calls.push(e),c.redo.args.push(l));h.undoQueue.queue.length>m.queueLength&&(h.undoQueue.queue.shift(),
h.undoQueue.index--)}},startSequence:function(h){h.undoQueue=h.undoQueue||{index:0,queue:[],sequence:!1};h.undoQueue.sequence=!0;h.undoQueue.beginSequence=!0},stopSequence:function(h){h.undoQueue=h.undoQueue||{index:0,queue:[],sequence:!1};h.undoQueue.sequence=!1;h.undoQueue.beginSequence=!1},undo:function(h){var a;if(h.framework&&h.framework.isPolar)h.framework.undo();else if(!(void 0===h.undoQueue||isNaN(h.undoQueue.index)||0>=h.undoQueue.index)){h.undoQueue.index--;var d=h.undoQueue.queue[h.undoQueue.index];
h.undoQueue.inSequence=!0;for(a=0;a<d.undo.calls.length;a++)p.plotDo(h,d.undo.calls[a],d.undo.args[a]);h.undoQueue.inSequence=!1;h.autoplay=!1}},redo:function(h){var a;if(h.framework&&h.framework.isPolar)h.framework.redo();else if(!(void 0===h.undoQueue||isNaN(h.undoQueue.index)||h.undoQueue.index>=h.undoQueue.queue.length)){var d=h.undoQueue.queue[h.undoQueue.index];h.undoQueue.inSequence=!0;for(a=0;a<d.redo.calls.length;a++)p.plotDo(h,d.redo.calls[a],d.redo.args[a]);h.undoQueue.inSequence=!1;h.autoplay=
!1;h.undoQueue.index++}},plotDo:function(h,a,d){h.autoplay=!0;for(var e=[],l,k=0;k<d.length;k++)l=d[k],e[k]=l===h?l:"object"===typeof l?Array.isArray(l)?n.extendDeep([],l):n.extendDeepAll({},l):l;a.apply(null,e)}};y.exports=p},{"../lib":749,"../plot_api/plot_config":785}],765:[function(b,y,D){D.counter=function(n,m,p,h){m=(m||"")+(p?"":"$");h=!1===h?"":"^";return"xy"===n?new RegExp(h+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+m):new RegExp(h+n+"([2-9]|[1-9][0-9]+)?"+m)}},{}],766:[function(b,y,D){var n=
/^(.*)(\.[^\.\[\]]+|\[\d\])$/,m=/^[^\.\[\]]+$/;y.exports=function(p,h){for(;h;){var a=p.match(n);if(a)p=a[1];else if(p.match(m))p="";else throw Error("bad relativeAttr call:"+[p,h]);if("^"===h.charAt(0))h=h.slice(1);else break}return p&&"["!==h.charAt(0)?p+"."+h:p+h}},{}],767:[function(b,y,D){var n=b("./array").isArrayOrTypedArray,m=b("./is_plain_object");y.exports=function d(h,a){for(var e in a){var l=a[e],k=h[e];if(k!==l)if("_"===e.charAt(0)||"function"===typeof l)e in h||(h[e]=l);else if(n(l)&&
n(k)&&m(l[0])){if("customdata"!==e&&"ids"!==e)for(var c=Math.min(l.length,k.length),f=0;f<c;f++)k[f]!==l[f]&&m(l[f])&&m(k[f])&&d(k[f],l[f])}else m(l)&&m(k)&&(d(k,l),Object.keys(k).length||delete h[e])}}},{"./array":731,"./is_plain_object":750}],768:[function(b,y,D){function n(k,c){return k<c}function m(k,c){return k<=c}function p(k,c){return k>c}function h(k,c){return k>=c}var a=b("fast-isnumeric"),d=b("./loggers"),e=b("./identity"),l=b("../constants/numerical").BADNUM;D.findBin=function(k,c,f){if(a(c.start))return f?
Math.ceil((k-c.start)/c.size-1E-9)-1:Math.floor((k-c.start)/c.size+1E-9);var g=0,q=c.length,t=0,u=1<q?(c[q-1]-c[0])/(q-1):1;var w=0<=u?f?n:m:f?h:p;for(k+=1E-9*u*(f?-1:1)*(0<=u?1:-1);g<q&&100>t++;)f=Math.floor((g+q)/2),w(c[f],k)?g=f+1:q=f;90<t&&d.log("Long binary search...");return g-1};D.sorterAsc=function(k,c){return k-c};D.sorterDes=function(k,c){return c-k};D.distinctVals=function(k,c){var f=(c||{}).unitMinDiff;k=k.slice();k.sort(D.sorterAsc);for(c=k.length-1;-1<c&&k[c]===l;c--);var g=1;f||(g=
k[c]-k[0]||1);f=g/(c||1)/1E4;for(var q=[],t,u=0;u<=c;u++){var w=k[u],x=w-t;void 0===t?(q.push(w),t=w):x>f&&(g=Math.min(g,x),q.push(w),t=w)}return{vals:q,minDiff:g}};D.roundUp=function(k,c,f){for(var g=0,q=c.length-1,t=0,u=f?0:1,w=f?1:0,x=f?Math.ceil:Math.floor;g<q&&100>t++;)f=x((g+q)/2),c[f]<=k?g=f+u:q=f-w;return c[g]};D.sort=function(k,c){for(var f=0,g=0,q=1;q<k.length;q++){var t=c(k[q],k[q-1]);0>t?f=1:0<t&&(g=1);if(f&&g)return k.sort(c)}return g?k:k.reverse()};D.findIndexOfMin=function(k,c){c=c||
e;for(var f=Infinity,g,q=0;q<k.length;q++){var t=c(k[q]);t<f&&(f=t,g=q)}return g}},{"../constants/numerical":724,"./identity":747,"./loggers":753,"fast-isnumeric":241}],769:[function(b,y,D){y.exports=function(n,m){(n.attr("class")||"").split(" ").forEach(function(p){0===p.indexOf("cursor-")&&n.classed(p,!1)});m&&n.classed("cursor-"+m,!0)}},{}],770:[function(b,y,D){var n=b("../components/color"),m=function(){};y.exports=function(p){for(var h in p)"function"===typeof p[h]&&(p[h]=m);p.destroy=function(){p.container.parentNode.removeChild(p.container)};
h=document.createElement("div");h.className="no-webgl";h.style.cursor="pointer";h.style.fontSize="24px";h.style.color=n.defaults[0];h.style.position="absolute";h.style.left=h.style.top="0px";h.style.width=h.style.height="100%";h.style["background-color"]=n.lightLine;h.style["z-index"]=30;var a=document.createElement("p");a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info";a.style.position="relative";a.style.top="50%";a.style.left="50%";a.style.height=
"30%";a.style.width="50%";a.style.margin="-15% 0 0 -25%";h.appendChild(a);p.container.appendChild(h);p.container.style.background="#FFFFFF";p.container.onclick=function(){window.open("https://get.webgl.org")};return!1}},{"../components/color":615}],771:[function(b,y,D){var n=b("fast-isnumeric"),m=b("./array").isArrayOrTypedArray;D.aggNums=function(p,h,a,d){var e;if(!d||d>a.length)d=a.length;n(h)||(h=!1);if(m(a[0])){var l=Array(d);for(e=0;e<d;e++)l[e]=D.aggNums(p,h,a[e]);a=l}for(e=0;e<d;e++)n(h)?n(a[e])&&
(h=p(+h,+a[e])):h=a[e];return h};D.len=function(p){return D.aggNums(function(h){return h+1},0,p)};D.mean=function(p,h){h||(h=D.len(p));return D.aggNums(function(a,d){return a+d},0,p)/h};D.midRange=function(p){if(void 0!==p&&0!==p.length)return(D.aggNums(Math.max,null,p)+D.aggNums(Math.min,null,p))/2};D.variance=function(p,h,a){h||(h=D.len(p));n(a)||(a=D.mean(p,h));return D.aggNums(function(d,e){return d+Math.pow(e-a,2)},0,p)/h};D.stdev=function(p,h,a){return Math.sqrt(D.variance(p,h,a))};D.median=
function(p){p=p.slice().sort();return D.interp(p,.5)};D.interp=function(p,h){if(!n(h))throw"n should be a finite number";h=h*p.length-.5;if(0>h)return p[0];if(h>p.length-1)return p[p.length-1];var a=h%1;return a*p[Math.ceil(h)]+(1-a)*p[Math.floor(h)]}},{"./array":731,"fast-isnumeric":241}],772:[function(b,y,D){var n=b("color-normalize");y.exports=function(m){return m?n(m):[0,0,0,1]}},{"color-normalize":125}],773:[function(b,y,D){function n(H,L,P){var Q,S,O,U;MathJax.Hub.Queue(function(){S=e.extendDeepAll({},
MathJax.Hub.config);O=MathJax.Hub.processSectionDelay;void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0);return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){Q=MathJax.Hub.config.menuSettings.renderer;if("SVG"!==Q)return MathJax.Hub.setRenderer("SVG")},function(){var X="math-output-"+e.randstr({},64);U=d.select("body").append("div").attr({id:X}).style({visibility:"hidden",position:"absolute"}).style({"font-size":L.fontSize+
"px"}).text(H.replace(f,"\\lt ").replace(g,"\\gt "));return MathJax.Hub.Typeset(U.node())},function(){var X=d.select("body").select("#MathJax_SVG_glyphs");if(U.select(".MathJax_SVG").empty()||!U.select("svg").node())e.log("There was an error in the tex syntax.",H),P();else{var da=U.select("svg").node().getBoundingClientRect();P(U.select(".MathJax_SVG"),X,da)}U.remove();if("SVG"!==Q)return MathJax.Hub.setRenderer(Q)},function(){void 0!==O&&(MathJax.Hub.processSectionDelay=O);return MathJax.Hub.Config(S)})}
function m(H,L){return H?(H=(H=H.match(L))&&(H[3]||H[4]))&&p(H):null}function p(H){return H.replace(N,function(L,P){if("#"===P.charAt(0))if(P="x"===P.charAt(1)?parseInt(P.substr(2),16):parseInt(P.substr(1),10),1114111<P)P=void 0;else{var Q=String.fromCodePoint;Q?P=Q(P):(Q=String.fromCharCode,P=65535>=P?Q(P):Q((P>>10)+55232,P%1024+56320))}else P=K[P];return P||L})}function h(H,L){function P(){da++;var ta=document.createElementNS(l.svg,"tspan");d.select(ta).attr({class:"line",dy:da*k+"em"});H.appendChild(ta);
ea=ta;var oa=X;X=[{node:ta}];if(1<oa.length)for(ta=1;ta<oa.length;ta++)Q(oa[ta])}function Q(ta){var oa=ta.type,va={};if("a"===oa){var ma="a";var pa=ta.target,za=ta.href,qa=ta.popup;za&&(va={"xlink:xlink:show":"_blank"===pa||"_"!==pa.charAt(0)?"new":"replace",target:pa,"xlink:xlink:href":za},qa&&(va.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+qa+'");return false;'))}else ma="tspan";ta.style&&(va.style=ta.style);ma=document.createElementNS(l.svg,ma);"sup"===oa||"sub"===oa?(S(ea,w),
ea.appendChild(ma),pa=document.createElementNS(l.svg,"tspan"),S(pa,w),d.select(pa).attr("dy",u[oa]),va.dy=t[oa],ea.appendChild(ma),ea.appendChild(pa)):ea.appendChild(ma);d.select(ma).attr(va);ea=ta.node=ma;X.push(ta)}function S(ta,oa){ta.appendChild(document.createTextNode(oa))}function O(ta){if(1===X.length)e.log("Ignoring unexpected end tag \x3c/"+ta+"\x3e.",L);else{var oa=X.pop();ta!==oa.type&&e.log("Start tag \x3c"+oa.type+"\x3e doesnt match end tag \x3c"+ta+"\x3e. Pretending it did match.",L);
ea=X[X.length-1].node}}L=L.replace(E," ");var U=!1,X=[],da=-1;if(B.test(L))P();else{var ea=H;X=[{node:H}]}for(var ca=L.split(F),ia=0;ia<ca.length;ia++){var ha=ca[ia],fa=ha.match(z),na=fa&&fa[2].toLowerCase(),sa=q[na];if("br"===na)P();else if(void 0===sa)S(ea,p(ha));else if(fa[1])O(na);else{ha=fa[4];fa={type:na};var ua=m(ha,C);ua?(ua=ua.replace(J,"$1 fill:"),sa&&(ua+=";"+sa)):sa&&(ua=sa);ua&&(fa.style=ua);"a"===na&&(U=!0,na=m(ha,v))&&(sa=document.createElement("a"),sa.href=na,-1!==x.indexOf(sa.protocol)&&
(fa.href=encodeURI(decodeURI(na)),fa.target=m(ha,G)||"_blank",fa.popup=m(ha,I)));Q(fa)}}return U}function a(H,L,P){var Q=P.horizontalAlign;P=P.verticalAlign||"top";var S=H.node().getBoundingClientRect(),O=L.node().getBoundingClientRect(),U;var X="bottom"===P?function(){return S.bottom-U.height}:"middle"===P?function(){return S.top+(S.height-U.height)/2}:function(){return S.top};var da="right"===Q?function(){return S.right-U.width}:"center"===Q?function(){return S.left+(S.width-U.width)/2}:function(){return S.left};
return function(){U=this.node().getBoundingClientRect();this.style({top:X()-O.top+"px",left:da()-O.left+"px","z-index":1E3});return this}}var d=b("d3"),e=b("../lib"),l=b("../constants/xmlns_namespaces"),k=b("../constants/alignment").LINE_SPACING,c=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;D.convertToTspans=function(H,L,P){function Q(){U.empty()||(X=H.attr("class")+"-math",U.select("svg."+X).remove());H.text("").style("white-space","pre");h(H.node(),S)&&H.style("pointer-events","all");D.positionText(H);P&&P.call(H)}
var S=H.text(),O=!H.attr("data-notex")&&"undefined"!==typeof MathJax&&S.match(c),U=d.select(H.node().parentNode);if(!U.empty()){var X=H.attr("class")?H.attr("class").split(" ")[0]:"text";X+="-math";U.selectAll("svg."+X).remove();U.selectAll("g."+X+"-group").remove();H.style("display",null).attr({"data-unformatted":S,"data-math":"N"});O?(L&&L._promises||[]).push(new Promise(function(da){H.style("display","none");var ea=parseInt(H.node().style.fontSize,10);n(O[2],{fontSize:ea},function(ca,ia,ha){U.selectAll("svg."+
X).remove();U.selectAll("g."+X+"-group").remove();if((ca=ca&&ca.select("svg"))&&ca.node()){var fa=U.append("g").classed(X+"-group",!0).attr({"pointer-events":"none","data-unformatted":S,"data-math":"Y"});fa.node().appendChild(ca.node());ia&&ia.node()&&ca.node().insertBefore(ia.node().cloneNode(!0),ca.node().firstChild);ca.attr({"class":X,height:ha.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});ia=H.node().style.fill||"black";ha=ca.select("g");ha.attr({fill:ia,
stroke:ia});ia=ha.node().getBoundingClientRect().width;ha=ha.node().getBoundingClientRect().height;var na=+H.attr("x")-ia*{start:0,middle:.5,end:1}[H.attr("text-anchor")||"start"],sa=-(ea||H.node().getBoundingClientRect().height)/4;"y"===X[0]?(fa.attr({transform:"rotate("+[-90,+H.attr("x"),+H.attr("y")]+") translate("+[-ia/2,sa-ha/2]+")"}),ca.attr({x:+H.attr("x"),y:+H.attr("y")})):"l"===X[0]?ca.attr({x:H.attr("x"),y:sa-ha/2}):"a"===X[0]&&0!==X.indexOf("atitle")?ca.attr({x:0,y:sa}):ca.attr({x:na,y:+H.attr("y")+
sa-ha/2});P&&P.call(H,fa);da(fa)}else Q(),da()})})):Q();return H}};var f=/(<|&lt;|&#60;)/g,g=/(>|&gt;|&#62;)/g,q={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},t={sub:"0.3em",sup:"-0.6em"},u={sub:"-0.21em",sup:"0.42em"},w="",x=["http:","https:","mailto:","",void 0,":"],E=D.NEWLINES=/(\r\n?|\n)/g,F=/(<[^<>]*>)/,z=/<(\/?)([^ >]*)(\s+(.*))?>/i,B=/<br(\s+.*)?>/i;D.BR_TAG_ALL=/<br(\s+.*)?>/gi;var C=
/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,v=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,G=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,I=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,J=/(^|;)\s*color:/;D.plainText=function(H,L){L=L||{};var P=void 0!==L.len&&-1!==L.len?L.len:Infinity;L=void 0!==L.allowedTags?L.allowedTags:["br"];var Q=H.split(F);H=[];for(var S="",O=0,U=0;U<Q.length;U++){var X=Q[U],da=X.match(z);if(da=da&&da[2].toLowerCase())-1!==L.indexOf(da)&&(H.push(X),S=da);
else{da=X.length;if(O+da<P)H.push(X),O+=da;else if(O<P){L=P-O;S&&("br"!==S||3>=L||3>=da)&&H.pop();3<P?H.push(X.substr(0,L-3)+"..."):H.push(X.substr(0,L));break}S=""}}return H.join("")};var K={mu:"",amp:"\x26",lt:"\x3c",gt:"\x3e",nbsp:"",times:"",plusmn:"",deg:""},N=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;D.convertEntities=p;D.sanitizeHTML=function(H){H=H.replace(E," ");var L=document.createElement("p"),P=L,Q=[];H=H.split(F);for(var S=0;S<H.length;S++){var O=H[S],U=O.match(z),X=U&&U[2].toLowerCase();
if(X in q)if(U[1])Q.length&&(P=Q.pop());else{U=U[4];O=(O=m(U,C))?{style:O}:{};if("a"===X){var da=m(U,v);if(da){var ea=document.createElement("a");ea.href=da;-1!==x.indexOf(ea.protocol)&&(O.href=encodeURI(decodeURI(da)),U=m(U,G))&&(O.target=U)}}X=document.createElement(X);P.appendChild(X);d.select(X).attr(O);P=X;Q.push(X)}else P.appendChild(document.createTextNode(p(O)))}return L.innerHTML};D.lineCount=function(H){return H.selectAll("tspan.line").size()||1};D.positionText=function(H,L,P){return H.each(function(){function Q(X,
da){void 0===da?(da=S.attr(X),null===da&&(S.attr(X,0),da=0)):S.attr(X,da);return da}var S=d.select(this),O=Q("x",L),U=Q("y",P);"text"===this.nodeName&&S.selectAll("tspan.line").attr({x:O,y:U})})};D.makeEditable=function(H,L){function P(){S();H.style({opacity:0});var ea=da.attr("class");(ea=ea?"."+ea.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&d.select(H.node().parentNode).select(ea).style({opacity:0})}function Q(ea){ea=ea.node();var ca=document.createRange();ca.selectNodeContents(ea);
var ia=window.getSelection();ia.removeAllRanges();ia.addRange(ca);ea.focus()}function S(){var ea=d.select(O).select(".svg-container"),ca=ea.append("div"),ia=H.node().style,ha=parseFloat(ia.fontSize||12),fa=L.text;void 0===fa&&(fa=H.attr("data-unformatted"));ca.classed("plugin-editable editable",!0).style({position:"absolute","font-family":ia.fontFamily||"Arial","font-size":ha,color:L.fill||ia.fill||"black",opacity:1,"background-color":L.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ha/
8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(fa).call(a(H,ea,L)).on("blur",function(){O._editing=!1;H.text(this.textContent).style({opacity:1});var na=d.select(this).attr("class");(na=na?"."+na.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&d.select(H.node().parentNode).select(na).style({opacity:0});na=this.textContent;d.select(this).transition().duration(0).remove();d.select(document).on("mouseup",null);X.edit.call(H,na)}).on("focus",
function(){var na=this;O._editing=!0;d.select(document).on("mouseup",function(){if(d.event.target===na)return!1;document.activeElement===ca.node()&&ca.node().blur()})}).on("keyup",function(){27===d.event.which?(O._editing=!1,H.style({opacity:1}),d.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),X.cancel.call(H,this.textContent)):(X.input.call(H,this.textContent),d.select(this).call(a(H,ea,L)))}).on("keydown",function(){13===d.event.which&&this.blur()}).call(Q)}
var O=L.gd,U=L.delegate,X=d.dispatch("edit","input","cancel"),da=U||H;H.style({"pointer-events":U?"none":"all"});if(1!==H.size())throw Error("boo");if(L.immediate)P();else da.on("click",P);return d.rebind(H,X,"on")}},{"../constants/alignment":717,"../constants/xmlns_namespaces":725,"../lib":749,d3:169}],774:[function(b,y,D){function n(p){p&&null!==p.timer&&(clearTimeout(p.timer),p.timer=null)}var m={};D.throttle=function(p,h,a){function d(){a();e.ts=Date.now();e.onDone&&(e.onDone(),e.onDone=null)}
var e=m[p],l=Date.now();if(!e){for(var k in m)m[k].ts<l-6E4&&delete m[k];e=m[p]={ts:0,timer:null}}n(e);l>e.ts+h?d():e.timer=setTimeout(function(){d();e.timer=null},h)};D.done=function(p){var h=m[p];return h&&h.timer?new Promise(function(a){var d=h.onDone;h.onDone=function(){d&&d();a();h.onDone=null}}):Promise.resolve()};D.clear=function(p){if(p)n(m[p]),delete m[p];else for(var h in m)D.clear(h)}},{}],775:[function(b,y,D){var n=b("fast-isnumeric");y.exports=function(m,p){if(0<m)return Math.log(m)/
Math.LN10;m=Math.log(Math.min(p[0],p[1]))/Math.LN10;n(m)||(m=Math.log(Math.max(p[0],p[1]))/Math.LN10-6);return m}},{"fast-isnumeric":241}],776:[function(b,y,D){y=y.exports={};var n=b("../plots/geo/constants").locationmodeToLayer,m=b("topojson-client").feature;y.getTopojsonName=function(p){return[p.scope.replace(/ /g,"-"),"_",p.resolution.toString(),"m"].join("")};y.getTopojsonPath=function(p,h){return p+h+".json"};y.getTopojsonFeatures=function(p,h){return m(h,h.objects[n[p.locationmode]]).features}},
{"../plots/geo/constants":827,"topojson-client":551}],777:[function(b,y,D){y.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],778:[function(b,y,D){y.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],779:[function(b,y,D){var n=b("../registry");y.exports=function(m){for(var p=n.layoutArrayContainers,h=n.layoutArrayRegexes,
a=m.split("[")[0],d,e,l=0;l<h.length;l++)if((e=m.match(h[l]))&&0===e.index){d=e[0];break}d||(d=p[p.indexOf(a)]);if(!d)return!1;m=m.substr(d.length);return m?(e=m.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))?{array:d,index:Number(e[1]),property:e[3]||""}:!1:{array:d,index:"",property:""}}},{"../registry":880}],780:[function(b,y,D){function n(l){for(var k={},c=0;c<l.length;c++)k[l[c]]=!1;return k}function m(l,k,c){l=h({},l);for(var f in l){var g=l[f];a(g)&&(l[f]=p(g,k,c,f))}"from-root"===c&&(l.editType=
k);return l}function p(l,k,c,f){if(l.valType){c=h({},l);c.editType=k;if(Array.isArray(l.items))for(c.items=Array(l.items.length),f=0;f<l.items.length;f++)c.items[f]=p(l.items[f],k,"from-root");return c}return m(l,k,"_"===f.charAt(0)?"nested":"from-root")}b=b("../lib");var h=b.extendFlat,a=b.isPlainObject;b={valType:"flaglist",extras:["none"],flags:"calc clearAxisTypes plot style markerSize colorbars".split(" ")};D={valType:"flaglist",extras:["none"],flags:"calc plot legend ticks axrange layoutstyle modebar camera arraydraw colorbars".split(" ")};
var d=b.flags.slice().concat(["fullReplot"]),e=D.flags.slice().concat("layoutReplot");y.exports={traces:b,layout:D,traceFlags:function(){return n(d)},layoutFlags:function(){return n(e)},update:function(l,k){if((k=k.editType)&&"none"!==k){k=k.split("+");for(var c=0;c<k.length;c++)l[k[c]]=!0}},overrideAll:m}},{"../lib":749}],781:[function(b,y,D){function n(E,F){var z=E[F],B=F.charAt(0);z&&"paper"!==z&&(E[F]=q(z,B))}function m(E){function F(z,B){var C=E.title&&E.title[B];E[z]&&!C&&(E.title||(E.title=
{}),E.title[B]=E[z],delete E[z])}if(E){if("string"===typeof E.title||"number"===typeof E.title)E.title={text:E.title};F("titlefont","font");F("titleposition","position");F("titleside","side");F("titleoffset","offset")}}function p(E){if(!c.isPlainObject(E))return!1;var F=E.name;delete E.name;delete E.showlegend;return("string"===typeof F||"number"===typeof F)&&String(F)}function h(E){var F="middle",z="center";"string"===typeof E&&(-1!==E.indexOf("top")?F="top":-1!==E.indexOf("bottom")&&(F="bottom"),
-1!==E.indexOf("left")?z="left":-1!==E.indexOf("right")&&(z="right"));return F+" "+z}function a(E,F){return F in E&&"object"===typeof E[F]&&0===Object.keys(E[F]).length}function d(E){var F=E.search(w);if(0<F)return E.substr(0,F)}var e=b("fast-isnumeric"),l=b("gl-mat4/fromQuat"),k=b("../registry"),c=b("../lib"),f=b("../plots/plots");y=b("../plots/cartesian/axis_ids");var g=b("../components/color"),q=y.cleanId,t=y.getFromTrace,u=k.traceIs;D.clearPromiseQueue=function(E){Array.isArray(E._promises)&&
0<E._promises.length&&c.log("Clearing previous rejected promises from queue.");E._promises=[]};D.cleanLayout=function(E){var F;E||(E={});E.xaxis1&&(E.xaxis||(E.xaxis=E.xaxis1),delete E.xaxis1);E.yaxis1&&(E.yaxis||(E.yaxis=E.yaxis1),delete E.yaxis1);E.scene1&&(E.scene||(E.scene=E.scene1),delete E.scene1);var z=(f.subplotsRegistry.cartesian||{}).attrRegex,B=(f.subplotsRegistry.polar||{}).attrRegex,C=(f.subplotsRegistry.ternary||{}).attrRegex,v=(f.subplotsRegistry.gl3d||{}).attrRegex,G=Object.keys(E);
for(F=0;F<G.length;F++){var I=G[F];if(z&&z.test(I)){I=E[I];I.anchor&&"free"!==I.anchor&&(I.anchor=q(I.anchor));I.overlaying&&(I.overlaying=q(I.overlaying));I.type||(I.isdate?I.type="date":I.islog?I.type="log":!1===I.isdate&&!1===I.islog&&(I.type="linear"));if("withzero"===I.autorange||"tozero"===I.autorange)I.autorange=!0,I.rangemode="tozero";delete I.islog;delete I.isdate;delete I.categories;a(I,"domain")&&delete I.domain;void 0!==I.autotick&&(void 0===I.tickmode&&(I.tickmode=I.autotick?"auto":"linear"),
delete I.autotick);m(I)}else if(B&&B.test(I))m(E[I].radialaxis);else if(C&&C.test(I))I=E[I],m(I.aaxis),m(I.baxis),m(I.caxis);else if(v&&v.test(I)){I=E[I];var J=I.cameraposition;if(Array.isArray(J)&&4===J[0].length){var K=J[1],N=J[2],H=l([],J[0]),L=[];for(J=0;3>J;++J)L[J]=K[J]+N*H[2+4*J];I.camera={eye:{x:L[0],y:L[1],z:L[2]},center:{x:K[0],y:K[1],z:K[2]},up:{x:0,y:0,z:1}};delete I.cameraposition}m(I.xaxis);m(I.yaxis);m(I.zaxis)}}z=Array.isArray(E.annotations)?E.annotations.length:0;for(F=0;F<z;F++)B=
E.annotations[F],c.isPlainObject(B)&&(B.ref&&("paper"===B.ref?(B.xref="paper",B.yref="paper"):"data"===B.ref&&(B.xref="x",B.yref="y"),delete B.ref),n(B,"xref"),n(B,"yref"));z=Array.isArray(E.shapes)?E.shapes.length:0;for(F=0;F<z;F++)B=E.shapes[F],c.isPlainObject(B)&&(n(B,"xref"),n(B,"yref"));if(F=E.legend)3<F.x?(F.x=1.02,F.xanchor="left"):-2>F.x&&(F.x=-.02,F.xanchor="right"),3<F.y?(F.y=1.02,F.yanchor="bottom"):-2>F.y&&(F.y=-.02,F.yanchor="top");m(E);"rotate"===E.dragmode&&(E.dragmode="orbit");g.clean(E);
E.template&&E.template.layout&&D.cleanLayout(E.template.layout);return E};D.cleanData=function(E){for(var F=0;F<E.length;F++){var z=E[F];"histogramy"===z.type&&"xbins"in z&&!("ybins"in z)&&(z.ybins=z.xbins,delete z.xbins);if(z.error_y&&"opacity"in z.error_y){var B=g.defaults;B=z.error_y.color||(u(z,"bar")?g.defaultLine:B[F%B.length]);z.error_y.color=g.addOpacity(g.rgb(B),g.opacity(B)*z.error_y.opacity);delete z.error_y.opacity}"bardir"in z&&("h"!==z.bardir||!u(z,"bar")&&"histogram"!==z.type.substr(0,
9)||(z.orientation="h",D.swapXYData(z)),delete z.bardir);"histogramy"===z.type&&D.swapXYData(z);if("histogramx"===z.type||"histogramy"===z.type)z.type="histogram";"scl"in z&&!("colorscale"in z)&&(z.colorscale=z.scl,delete z.scl);"reversescl"in z&&!("reversescale"in z)&&(z.reversescale=z.reversescl,delete z.reversescl);z.xaxis&&(z.xaxis=q(z.xaxis,"x"));z.yaxis&&(z.yaxis=q(z.yaxis,"y"));u(z,"gl3d")&&z.scene&&(z.scene=f.subplotsRegistry.gl3d.cleanId(z.scene));if(!u(z,"pie-like")&&!u(z,"bar-like"))if(Array.isArray(z.textposition))for(B=
0;B<z.textposition.length;B++)z.textposition[B]=h(z.textposition[B]);else z.textposition&&(z.textposition=h(z.textposition));(B=k.getModule(z))&&B.colorbar&&(B=(B=B.colorbar.container)?z[B]:z)&&B.colorscale&&("YIGnBu"===B.colorscale&&(B.colorscale="YlGnBu"),"YIOrRd"===B.colorscale&&(B.colorscale="YlOrRd"));if("surface"===z.type&&c.isPlainObject(z.contours)){var C=["x","y","z"];for(B=0;B<C.length;B++){var v=z.contours[C[B]];c.isPlainObject(v)&&(v.highlightColor&&(v.highlightcolor=v.highlightColor,
delete v.highlightColor),v.highlightWidth&&(v.highlightwidth=v.highlightWidth,delete v.highlightWidth))}}if("candlestick"===z.type||"ohlc"===z.type){C=!1!==(z.increasing||{}).showlegend;v=!1!==(z.decreasing||{}).showlegend;B=p(z.increasing);var G=p(z.decreasing);if(!1!==B&&!1!==G){if(!C||v)if(v&&!C)B=G;else if(B.trim()){if(G.trim()){v=Math.min(B.length,G.length);for(C=0;C<v&&B.charAt(C)===G.charAt(C);C++);B=B.substr(0,C).trim()}}else B=G;B&&(z.name=B)}else!B&&!G||z.name||(z.name=B||G)}if(Array.isArray(z.transforms))for(C=
z.transforms,B=0;B<C.length;B++)if(v=C[B],c.isPlainObject(v))switch(v.type){case "filter":v.filtersrc&&(v.target=v.filtersrc,delete v.filtersrc);v.calendar&&(v.valuecalendar||(v.valuecalendar=v.calendar),delete v.calendar);break;case "groupby":if(v.styles=v.styles||v.style,v.styles&&!Array.isArray(v.styles)){G=v.styles;var I=Object.keys(G);v.styles=[];for(var J=0;J<I.length;J++)v.styles.push({target:I[J],value:G[I[J]]})}}a(z,"line")&&delete z.line;"marker"in z&&(a(z.marker,"line")&&delete z.marker.line,
a(z,"marker")&&delete z.marker);g.clean(z);z.autobinx&&(delete z.autobinx,delete z.xbins);z.autobiny&&(delete z.autobiny,delete z.ybins);m(z);z.colorbar&&m(z.colorbar);z.marker&&z.marker.colorbar&&m(z.marker.colorbar);z.line&&z.line.colorbar&&m(z.line.colorbar);z.aaxis&&m(z.aaxis);z.baxis&&m(z.baxis)}};D.swapXYData=function(E){c.swapAttrs(E,"? ?0 d? ?bins nbins? autobin? ?src error_?".split(" "));Array.isArray(E.z)&&Array.isArray(E.z[0])&&(E.transpose?delete E.transpose:E.transpose=!0);if(E.error_x&&
E.error_y){var F=E.error_y;F="copy_ystyle"in F?F.copy_ystyle:!(F.color||F.thickness||F.width);c.swapAttrs(E,["error_?.copy_ystyle"]);F&&c.swapAttrs(E,["error_?.color","error_?.thickness","error_?.width"])}if("string"===typeof E.hoverinfo){var z=E.hoverinfo.split("+");for(F=0;F<z.length;F++)"x"===z[F]?z[F]="y":"y"===z[F]&&(z[F]="x");E.hoverinfo=z.join("+")}};D.coerceTraceIndices=function(E,F){if(e(F))return[F];if(!Array.isArray(F)||!F.length)return E.data.map(function(C,v){return v});if(Array.isArray(F)){for(var z=
[],B=0;B<F.length;B++)c.isIndex(F[B],E.data.length)?z.push(F[B]):c.warn("trace index (",F[B],") is not a number or is out of bounds");return z}return F};D.manageArrayContainers=function(E,F,z){var B=E.obj,C=E.parts,v=C.length,G=C[v-1],I=e(G);I&&null===F?(E=C.slice(0,v-1).join("."),c.nestedProperty(B,E).get().splice(G,1)):(I&&void 0===E.get()&&void 0===E.get()&&(z[E.astr]=null),E.set(F))};var w=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;D.hasParent=function(E,F){for(F=d(F);F;){if(F in E)return!0;F=d(F)}return!1};
var x=["x","y","z"];D.clearAxisTypes=function(E,F,z){for(var B=0;B<F.length;B++)for(var C=E._fullData[B],v=0;3>v;v++){var G=t(E,C,x[v]);if(G&&"log"!==G.type){var I=G._name;G=G._id.substr(1);if("scene"===G.substr(0,5)){if(void 0!==z[G])continue;I=G+"."+I}G=I+".type";void 0===z[I]&&void 0===z[G]&&c.nestedProperty(E.layout,G).set(null)}}}},{"../components/color":615,"../lib":749,"../plots/cartesian/axis_ids":800,"../plots/plots":860,"../registry":880,"fast-isnumeric":241,"gl-mat4/fromQuat":275}],782:[function(b,
y,D){y=b("./plot_api");D.plot=y.plot;D.newPlot=y.newPlot;D.restyle=y.restyle;D.relayout=y.relayout;D.redraw=y.redraw;D.update=y.update;D._guiRestyle=y._guiRestyle;D._guiRelayout=y._guiRelayout;D._guiUpdate=y._guiUpdate;D._storeDirectGUIEdit=y._storeDirectGUIEdit;D.react=y.react;D.extendTraces=y.extendTraces;D.prependTraces=y.prependTraces;D.addTraces=y.addTraces;D.deleteTraces=y.deleteTraces;D.moveTraces=y.moveTraces;D.purge=y.purge;D.addFrames=y.addFrames;D.deleteFrames=y.deleteFrames;D.animate=
y.animate;D.setPlotConfig=y.setPlotConfig;D.toImage=b("./to_image");D.validate=b("./validate");D.downloadImage=b("../snapshot/download");b=b("./template_api");D.makeTemplate=b.makeTemplate;D.validateTemplate=b.validateTemplate},{"../snapshot/download":882,"./plot_api":784,"./template_api":789,"./to_image":790,"./validate":791}],783:[function(b,y,D){var n=b("../lib/is_plain_object"),m=b("../lib/noop"),p=b("../lib/loggers"),h=b("../lib/search").sorterAsc,a=b("../registry");D.containerArrayMatch=b("./container_array_match");
var d=D.isAddVal=function(l){return"add"===l||n(l)},e=D.isRemoveVal=function(l){return null===l||"remove"===l};D.applyContainerArrayChanges=function(l,k,c,f,g){var q=k.astr,t=a.getComponentMethod(q,"supplyLayoutDefaults"),u=a.getComponentMethod(q,"draw"),w=a.getComponentMethod(q,"drawOne");f=f.replot||f.recalc||t===m||u===m;var x=l.layout,E=l._fullLayout;if(c[""]){1<Object.keys(c).length&&p.warn("Full array edits are incompatible with other edits",q);w=c[""][""];if(e(w))k.set(null);else if(Array.isArray(w))k.set(w);
else return p.warn("Unrecognized full array edit value",q,w),!0;if(f)return!1;t(x,E);u(l);return!0}var F=Object.keys(c).map(Number).sort(h),z=k.get(),B=z||[],C=g(E,q).get(),v=[],G=-1,I=B.length,J;for(J=0;J<F.length;J++){var K=F[J];var N=c[K];var H=Object.keys(N);var L=N[""];var P=d(L);if(0>K||K>B.length-(P?0:1))p.warn("index out of range",q,K);else if(void 0!==L)1<H.length&&p.warn("Insertion \x26 removal are incompatible with edits to the same index.",q,K),e(L)?v.push(K):P?("add"===L&&(L={}),B.splice(K,
0,L),C&&C.splice(K,0,{})):p.warn("Unrecognized full object edit value",q,K,L),-1===G&&(G=K);else for(L=0;L<H.length;L++)P=q+"["+K+"].",g(B[K],H[L],P).set(N[H[L]])}for(J=v.length-1;0<=J;J--)B.splice(v[J],1),C&&C.splice(v[J],1);B.length?z||k.set(B):k.set(null);if(f)return!1;t(x,E);if(w!==m){if(-1===G)k=F;else{I=Math.max(B.length,I);k=[];for(J=0;J<F.length;J++){K=F[J];if(K>=G)break;k.push(K)}for(J=G;J<I;J++)k.push(J)}for(J=0;J<k.length;J++)w(l,k[J])}else u(l);return!0}},{"../lib/is_plain_object":750,
"../lib/loggers":753,"../lib/noop":758,"../lib/search":768,"../registry":880,"./container_array_match":779}],784:[function(b,y,D){function n(Na){var Za=Na._fullLayout;Za._redrawFromAutoMarginCount?Za._redrawFromAutoMarginCount--:Na.emit("plotly_afterplot")}function m(Na,Za){try{Na._fullLayout._paper.style("background",Za)}catch(eb){fa.error(eb)}}function p(Na,Za){Za=qa.combine(Za,"white");m(Na,Za)}function h(Na,Za){if(!Na._context){Na._context=fa.extendDeep({},mb);var eb=ca.select("base");Na._context._baseUrl=
eb.size()&&eb.attr("href")?window.location.href.split("#")[0]:""}var Ba=Na._context;if(Za){var Ma=Object.keys(Za);for(eb=0;eb<Ma.length;eb++){var $a=Ma[eb];"editable"!==$a&&"edits"!==$a&&$a in Ba&&(Ba[$a]="setBackground"===$a&&"opaque"===Za[$a]?p:Za[$a])}Za.plot3dPixelRatio&&!Ba.plotGlPixelRatio&&(Ba.plotGlPixelRatio=Ba.plot3dPixelRatio);$a=Za.editable;if(void 0!==$a)for(Ba.editable=$a,Ma=Object.keys(Ba.edits),eb=0;eb<Ma.length;eb++)Ba.edits[Ma[eb]]=$a;if(Za.edits)for(Ma=Object.keys(Za.edits),eb=
0;eb<Ma.length;eb++)$a=Ma[eb],$a in Ba.edits&&(Ba.edits[$a]=Za.edits[$a]);Ba._exportedPlot=Za._exportedPlot}Ba.staticPlot&&(Ba.editable=!1,Ba.edits={},Ba.autosizable=!1,Ba.scrollZoom=!1,Ba.doubleClick=!1,Ba.showTips=!1,Ba.showLink=!1,Ba.displayModeBar=!1);"hover"!==Ba.displayModeBar||ha||(Ba.displayModeBar=!0);if("transparent"===Ba.setBackground||"function"!==typeof Ba.setBackground)Ba.setBackground=m;Ba._hasZeroHeight=Ba._hasZeroHeight||0===Na.clientHeight;Ba._hasZeroWidth=Ba._hasZeroWidth||0===
Na.clientWidth;eb=Ba.scrollZoom;Na=Ba._scrollZoom={};if(!0===eb)Na.cartesian=1,Na.gl3d=1,Na.geo=1,Na.mapbox=1;else if("string"===typeof eb)for(Za=eb.split("+"),eb=0;eb<Za.length;eb++)Na[Za[eb]]=1;else!1!==eb&&(Na.gl3d=1,Na.geo=1,Na.mapbox=1)}function a(Na,Za,eb){var Ba=ca.select(Na).selectAll(".plot-container").data([0]);Ba.enter().insert("div",":first-child").classed("plot-container plotly",!0);Ba=Ba.selectAll(".svg-container").data([0]);Ba.enter().append("div").classed("svg-container",!0).style("position",
"relative");Ba.html("");Za&&(Na.data=Za);eb&&(Na.layout=eb);ma.manager.fillLayout(Na);Ba.style({width:Na._fullLayout.width+"px",height:Na._fullLayout.height+"px"});Na.framework=ma.manager.framework(Na);Na.framework({data:Na.data,layout:Na.layout},Ba.node());Na.framework.setUndoPoint();Ba=Na.framework.svg();Za=1;eb=Na._fullLayout.title?Na._fullLayout.title.text:"";""!==eb&&eb||(Za=0);var Ma=function(){this.call(Oa.convertToTspans,Na)};Ba=Ba.select(".title-group text").call(Ma);if(Na._context.edits.titleText){var $a=
fa._(Na,"Click to enter Plot title");eb&&eb!==$a||(Za=.2,Ba.attr({"data-unformatted":$a}).text($a).style({opacity:Za}).on("mouseover.opacity",function(){ca.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){ca.select(this).transition().duration(1E3).style("opacity",0)}));var lb=function(){this.call(Oa.makeEditable,{gd:Na}).on("edit",function(Ra){Na.framework({layout:{title:{text:Ra}}});this.text(Ra).call(Ma);this.call(lb)}).on("cancel",function(){var Ra=
this.attr("data-unformatted");this.text(Ra).call(Ma)})};Ba.call(lb)}Na._context.setBackground(Na,Na._fullLayout.paper_bgcolor);va.addLinks(Na);return Promise.resolve()}function d(Na,Za){Za+=1;var eb=[],Ba;for(Ba=0;Ba<Na.length;Ba++){var Ma=Na[Ba];0>Ma?eb.push(Za+Ma):eb.push(Ma)}return eb}function e(Na,Za,eb){var Ba;for(Ba=0;Ba<Za.length;Ba++){var Ma=Za[Ba];if(Ma!==parseInt(Ma,10))throw Error("all values in "+eb+" must be integers");if(Ma>=Na.data.length||Ma<-Na.data.length)throw Error(eb+" must be valid indices for gd.data.");
if(-1<Za.indexOf(Ma,Ba+1)||0<=Ma&&-1<Za.indexOf(-Na.data.length+Ma)||0>Ma&&-1<Za.indexOf(Na.data.length+Ma))throw Error("each index in "+eb+" must be unique.");}}function l(Na,Za,eb){if(!Array.isArray(Na.data))throw Error("gd.data must be an array.");if("undefined"===typeof Za)throw Error("currentIndices is a required argument.");Array.isArray(Za)||(Za=[Za]);e(Na,Za,"currentIndices");"undefined"===typeof eb||Array.isArray(eb)||(eb=[eb]);"undefined"!==typeof eb&&e(Na,eb,"newIndices");if("undefined"!==
typeof eb&&Za.length!==eb.length)throw Error("current and new indices must be of equal length.");}function k(Na,Za,eb){if(!Array.isArray(Na.data))throw Error("gd.data must be an array.");if("undefined"===typeof Za)throw Error("traces must be defined.");Array.isArray(Za)||(Za=[Za]);for(Na=0;Na<Za.length;Na++){var Ba=Za[Na];if("object"!==typeof Ba||Array.isArray(Ba)||null===Ba)throw Error("all values in traces array must be non-array objects");}"undefined"===typeof eb||Array.isArray(eb)||(eb=[eb]);
if("undefined"!==typeof eb&&eb.length!==Za.length)throw Error("if indices is specified, traces.length must equal indices.length");}function c(Na,Za,eb,Ba,Ma){var $a=fa.isPlainObject(Ba);if(!Array.isArray(Na.data))throw Error("gd.data must be an array");if(!fa.isPlainObject(Za))throw Error("update must be a key:value object");if("undefined"===typeof eb)throw Error("indices must be an integer or array of integers");e(Na,eb,"indices");for(var lb in Za){if(!Array.isArray(Za[lb])||Za[lb].length!==eb.length)throw Error("attribute "+
lb+" must be an array of length equal to indices array length");if($a&&!(lb in Ba&&Array.isArray(Ba[lb])&&Ba[lb].length===Za[lb].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object");}$a=eb;lb=fa.isPlainObject(Ba);eb=[];Array.isArray($a)||($a=[$a]);$a=d($a,Na.data.length-1);for(var Ra in Za)for(var jb=0;jb<$a.length;jb++){var Xa=Na.data[$a[jb]];var pb=na(Xa,Ra);Xa=pb.get();var vb=Za[Ra][jb];if(!fa.isArrayOrTypedArray(vb))throw Error("attribute: "+
Ra+" index: "+jb+" must be an array");if(!fa.isArrayOrTypedArray(Xa))throw Error("cannot extend missing or non-array attribute: "+Ra);if(Xa.constructor!==vb.constructor)throw Error("cannot extend array with an array of a different type: "+Ra);var zb=lb?Ba[Ra][jb]:Ba;ia(zb)||(zb=-1);eb.push({prop:pb,target:Xa,insert:vb,maxp:Math.floor(zb)})}Na={};Za={};for(Ba=0;Ba<eb.length;Ba++)Ra=eb[Ba].prop,$a=Ma(eb[Ba].target,eb[Ba].insert,eb[Ba].maxp),Ra.set($a[0]),Array.isArray(Na[Ra.astr])||(Na[Ra.astr]=[]),
Na[Ra.astr].push($a[1]),Array.isArray(Za[Ra.astr])||(Za[Ra.astr]=[]),Za[Ra.astr].push(eb[Ba].target.length);return{update:Na,maxPoints:Za}}function f(Na,Za){var eb=new Na.constructor(Na.length+Za.length);eb.set(Na);eb.set(Za,Na.length);return eb}function g(Na,Za,eb,Ba){Na=fa.getGraphDiv(Na);var Ma=c(Na,Za,eb,Ba,function(lb,Ra,jb){if(fa.isTypedArray(lb))if(0>jb){var Xa=new lb.constructor(0);lb=f(lb,Ra);if(0>jb)var pb=lb;else pb=Xa,Xa=lb}else if(pb=new lb.constructor(jb),Xa=new lb.constructor(lb.length+
Ra.length-jb),jb===Ra.length)pb.set(Ra),Xa.set(lb);else if(jb<Ra.length)jb=Ra.length-jb,pb.set(Ra.subarray(jb)),Xa.set(lb),Xa.set(Ra.subarray(0,jb),lb.length);else{jb-=Ra.length;var vb=lb.length-jb;pb.set(lb.subarray(vb));pb.set(Ra,jb);Xa.set(lb.subarray(0,vb))}else pb=lb.concat(Ra),Xa=0<=jb&&jb<pb.length?pb.splice(0,pb.length-jb):[];return[pb,Xa]}),$a=D.redraw(Na);ua.add(Na,D.prependTraces,[Na,Ma.update,eb,Ma.maxPoints],g,arguments);return $a}function q(Na,Za,eb,Ba){Na=fa.getGraphDiv(Na);var Ma=
c(Na,Za,eb,Ba,function(lb,Ra,jb){if(fa.isTypedArray(lb))if(0>=jb){var Xa=new lb.constructor(0);lb=f(Ra,lb);if(0>jb)var pb=lb;else pb=Xa,Xa=lb}else pb=new lb.constructor(jb),Xa=new lb.constructor(lb.length+Ra.length-jb),jb===Ra.length?(pb.set(Ra),Xa.set(lb)):jb<Ra.length?(jb=Ra.length-jb,pb.set(Ra.subarray(0,jb)),Xa.set(Ra.subarray(jb)),Xa.set(lb,jb)):(jb-=Ra.length,pb.set(Ra),pb.set(lb.subarray(0,jb),Ra.length),Xa.set(lb.subarray(jb)));else pb=Ra.concat(lb),Xa=0<=jb&&jb<pb.length?pb.splice(jb,pb.length):
[];return[pb,Xa]}),$a=D.redraw(Na);ua.add(Na,D.extendTraces,[Na,Ma.update,eb,Ma.maxPoints],q,arguments);return $a}function t(Na,Za,eb){Na=fa.getGraphDiv(Na);var Ba=[],Ma=D.deleteTraces,$a=[Na,Ba],lb=[Na,Za],Ra;k(Na,Za,eb);Array.isArray(Za)||(Za=[Za]);Za=Za.map(function(jb){return fa.extendFlat({},jb)});nb.cleanData(Za);for(Ra=0;Ra<Za.length;Ra++)Na.data.push(Za[Ra]);for(Ra=0;Ra<Za.length;Ra++)Ba.push(-Za.length+Ra);if("undefined"===typeof eb)return Za=D.redraw(Na),ua.add(Na,Ma,$a,t,lb),Za;Array.isArray(eb)||
(eb=[eb]);try{l(Na,Ba,eb)}catch(jb){throw Na.data.splice(Na.data.length-Za.length,Za.length),jb;}ua.startSequence(Na);ua.add(Na,Ma,$a,t,lb);Za=D.moveTraces(Na,Ba,eb);ua.stopSequence(Na);return Za}function u(Na,Za){Na=fa.getGraphDiv(Na);var eb=[],Ba=D.addTraces,Ma=[Na,eb,Za],$a=[Na,Za],lb;if("undefined"===typeof Za)throw Error("indices must be an integer or array of integers.");Array.isArray(Za)||(Za=[Za]);e(Na,Za,"indices");Za=d(Za,Na.data.length-1);Za.sort(fa.sorterDes);for(lb=0;lb<Za.length;lb+=
1){var Ra=Na.data.splice(Za[lb],1)[0];eb.push(Ra)}Za=D.redraw(Na);ua.add(Na,Ba,Ma,u,$a);return Za}function w(Na,Za,eb){Na=fa.getGraphDiv(Na);var Ba=[],Ma=[],$a=[Na,eb,Za],lb=[Na,Za,eb],Ra;l(Na,Za,eb);Za=Array.isArray(Za)?Za:[Za];if("undefined"===typeof eb)for(eb=[],Ra=0;Ra<Za.length;Ra++)eb.push(-Za.length+Ra);eb=Array.isArray(eb)?eb:[eb];Za=d(Za,Na.data.length-1);eb=d(eb,Na.data.length-1);for(Ra=0;Ra<Na.data.length;Ra++)-1===Za.indexOf(Ra)&&Ba.push(Na.data[Ra]);for(Ra=0;Ra<Za.length;Ra++)Ma.push({newIndex:eb[Ra],
trace:Na.data[Za[Ra]]});Ma.sort(function(jb,Xa){return jb.newIndex-Xa.newIndex});for(Ra=0;Ra<Ma.length;Ra+=1)Ba.splice(Ma[Ra].newIndex,0,Ma[Ra].trace);Na.data=Ba;Za=D.redraw(Na);ua.add(Na,w,$a,w,lb);return Za}function x(Na,Za,eb,Ba){Na=fa.getGraphDiv(Na);nb.clearPromiseQueue(Na);var Ma={};if("string"===typeof Za)Ma[Za]=eb;else if(fa.isPlainObject(Za))Ma=fa.extendFlat({},Za),void 0===Ba&&(Ba=eb);else return fa.warn("Restyle fail.",Za,eb,Ba),Promise.reject();Object.keys(Ma).length&&(Na.changed=!0);
Za=nb.coerceTraceIndices(Na,Ba);var $a=B(Na,Ma,Za);Ma=$a.flags;Ma.calc&&(Na.calcdata=void 0);Ma.clearAxisTypes&&nb.clearAxisTypes(Na,Za,{});Za=[];Ma.fullReplot?Za.push(D.plot):(Za.push(va.previousPromises),va.supplyDefaults(Na),Ma.markerSize&&(va.doCalcdata(Na),I(Za)),Ma.style&&Za.push(Ta.doTraceStyle),Ma.colorbars&&Za.push(Ta.doColorBars),Za.push(n));Za.push(va.rehover,va.redrag);ua.add(Na,x,[Na,$a.undoit,$a.traces],x,[Na,$a.redoit,$a.traces]);(Ma=fa.syncOrAsync(Za,Na))&&Ma.then||(Ma=Promise.resolve());
return Ma.then(function(){Na.emit("plotly_restyle",$a.eventData);return Na})}function E(Na){return void 0===Na?null:Na}function F(Na,Za){return Za?function(eb,Ba,Ma){var $a=na(eb,Ba),lb=$a.set;$a.set=function(Ra){z((Ma||"")+Ba,$a.get(),Ra,Na);lb(Ra)};return $a}:na}function z(Na,Za,eb,Ba){if(Array.isArray(Za)||Array.isArray(eb)){var Ma=Array.isArray(Za)?Za:[];eb=Array.isArray(eb)?eb:[];Za=Math.max(Ma.length,eb.length);for(var $a=0;$a<Za;$a++)z(Na+"["+$a+"]",Ma[$a],eb[$a],Ba)}else if(fa.isPlainObject(Za)||
fa.isPlainObject(eb))for(Ma in Za=fa.isPlainObject(Za)?Za:{},eb=fa.isPlainObject(eb)?eb:{},$a=fa.extendFlat({},Za,eb),$a)z(Na+"."+Ma,Za[Ma],eb[Ma],Ba);else void 0===Ba[Na]&&(Ba[Na]=E(Za))}function B(Na,Za,eb){function Ba(){return eb.map(function(){})}function Ma(yb){yb=pa.id2name(yb);-1===Gb.indexOf(yb)&&Gb.push(yb)}function $a(yb){return"LAYOUT"+yb+".autorange"}function lb(yb){return"LAYOUT"+yb+".range"}function Ra(yb){for(var Eb=yb;Eb<zb.length;Eb++)if(zb[Eb]._input===Jb[yb])return zb[Eb]}function jb(yb,
Eb,Lb){if(Array.isArray(yb))yb.forEach(function(xc){jb(xc,Eb,Lb)});else if(!(yb in Za||nb.hasParent(Za,yb))){if("LAYOUT"===yb.substr(0,6))var fc=pc(Na.layout,yb.replace("LAYOUT",""));else{fc=eb[Lb];var Oc=vb._tracePreGUI[Ra(fc)._fullInput.uid];fc=F(Oc,Zb)(Jb[fc],yb)}yb in Tc||(Tc[yb]=Ba());void 0===Tc[yb][Lb]&&(Tc[yb][Lb]=E(fc.get()));void 0!==Eb&&fc.set(Eb)}}function Xa(yb){return function(Eb){return zb[Eb][yb]}}function pb(yb){return function(Eb,Lb){return!1===Eb?zb[eb[Lb]][yb]:null}}var vb=Na._fullLayout,
zb=Na._fullData,Jb=Na.data,Zb=vb._guiEditing,pc=F(vb._preGUI,Zb),Ac=fa.extendDeepAll({},Za),ed;C(Za);var Rc=fb.traceFlags(),id={},Tc={};for(ac in Za){if(nb.hasParent(Za,ac))throw Error("cannot set "+ac+" and a parent attribute simultaneously");var wd=Za[ac],Fb;if("autobinx"===ac||"autobiny"===ac){var ac=ac.charAt(ac.length-1)+"bins";wd=Array.isArray(wd)?wd.map(pb(ac)):!1===wd?eb.map(Xa(ac)):null}id[ac]=wd;if("LAYOUT"===ac.substr(0,6)){var Jc=pc(Na.layout,ac.replace("LAYOUT",""));Tc[ac]=[E(Jc.get())];
Jc.set(Array.isArray(wd)?wd[0]:wd);Rc.calc=!0}else{Tc[ac]=Ba();for(ed=0;ed<eb.length;ed++){var qc=Jb[eb[ed]];var tc=Ra(eb[ed]);Jc=F(vb._tracePreGUI[tc._fullInput.uid],Zb)(qc,ac);var vc=Jc.get();var xb=Array.isArray(wd)?wd[ed%wd.length]:wd;if(void 0!==xb){var Ab=Jc.parts[Jc.parts.length-1],jc=(Fb=ac.substr(0,ac.length-Ab.length-1))?Fb+".":"",Bc=Fb?na(tc,Fb).get():tc;if((Fb=oa.getTraceValObject(tc,Jc.parts))&&Fb.impliedEdits&&null!==xb)for(var Ic in Fb.impliedEdits)jb(fa.relativeAttr(ac,Ic),Fb.impliedEdits[Ic],
ed);else if("thicknessmode"!==Ab&&"lenmode"!==Ab||vc===xb||"fraction"!==xb&&"pixels"!==xb||!Bc)"type"!==ac||"pie"===xb===("pie"===vc)&&"funnelarea"===xb===("funnelarea"===vc)||(jc="x",Bc="y","bar"!==xb&&"bar"!==vc||"h"!==qc.orientation||(jc="y",Bc="x"),fa.swapAttrs(qc,["?","?src"],"labels",jc),fa.swapAttrs(qc,["d?","?0"],"label",jc),fa.swapAttrs(qc,["?","?src"],"values",Bc),"pie"===vc||"funnelarea"===vc?(na(qc,"marker.color").set(na(qc,"marker.colors").get()),vb._pielayer.selectAll("g.trace").remove()):
ta.traceIs(qc,"cartesian")&&na(qc,"marker.colors").set(na(qc,"marker.color").get()));else{var ec=vb._size,ic=Bc.orient;ic="top"===ic||"bottom"===ic;"thicknessmode"===Ab?(Ab=ic?ec.h:ec.w,jb(jc+"thickness",Bc.thickness*("fraction"===xb?1/Ab:Ab),ed)):(Ab=ic?ec.w:ec.h,jb(jc+"len",Bc.len*("fraction"===xb?1/Ab:Ab),ed))}Tc[ac][ed]=E(vc);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(ac)){if("orientation"===ac){if(Jc.set(xb),vc=qc.x&&!qc.y?"h":"v",(Jc.get()||vc)===tc.orientation)continue}else"orientationaxes"===
ac&&(qc.orientation={v:"h",h:"v"}[tc.orientation]);nb.swapXYData(qc);Rc.calc=Rc.clearAxisTypes=!0}else-1!==va.dataArrayContainers.indexOf(Jc.parts[0])?(nb.manageArrayContainers(Jc,xb,Tc),Rc.calc=!0):(Fb?Fb.arrayOk&&!ta.traceIs(tc,"regl")&&(fa.isArrayOrTypedArray(xb)||fa.isArrayOrTypedArray(vc))?Rc.calc=!0:fb.update(Rc,Fb):Rc.calc=!0,Jc.set(xb))}}-1!==["swapxyaxes","orientationaxes"].indexOf(ac)&&pa.swap(Na,eb);"orientationaxes"===ac&&(ed=na(Na.layout,"hovermode"),wd=ed.get(),"x"===wd?ed.set("y"):
"y"===wd?ed.set("x"):"x unified"===wd?ed.set("y unified"):"y unified"===wd&&ed.set("x unified"));if(-1!==["orientation","type"].indexOf(ac)){var Gb=[];for(ed=0;ed<eb.length;ed++)wd=Jb[eb[ed]],ta.traceIs(wd,"cartesian")&&(Ma(wd.xaxis||"x"),Ma(wd.yaxis||"y"));jb(Gb.map($a),!0,0);jb(Gb.map(lb),[0,1],0)}}}if(Rc.calc||Rc.plot)Rc.fullReplot=!0;return{flags:Rc,undoit:Tc,redoit:id,traces:eb,eventData:fa.extendDeepNoArrays([],[Ac,eb])}}function C(Na){function Za(jb,Xa){Na[Xa]=Na[jb];delete Na[jb]}var eb=fa.counterRegex("axis",
".title",!1,!1),Ba=/colorbar\.title$/,Ma=Object.keys(Na),$a;for($a=0;$a<Ma.length;$a++){var lb=Ma[$a];var Ra=Na[lb];"title"!==lb&&!eb.test(lb)&&!Ba.test(lb)||"string"!==typeof Ra&&"number"!==typeof Ra?-1<lb.indexOf("titlefont")?Za(lb,lb.replace("titlefont","title.font")):-1<lb.indexOf("titleposition")?Za(lb,lb.replace("titleposition","title.position")):-1<lb.indexOf("titleside")?Za(lb,lb.replace("titleside","title.side")):-1<lb.indexOf("titleoffset")&&Za(lb,lb.replace("titleoffset","title.offset")):
Za(lb,lb.replace("title","title.text"))}}function v(Na,Za,eb){Na=fa.getGraphDiv(Na);nb.clearPromiseQueue(Na);if(Na.framework&&Na.framework.isPolar)return Promise.resolve(Na);var Ba={};if("string"===typeof Za)Ba[Za]=eb;else if(fa.isPlainObject(Za))Ba=fa.extendFlat({},Za);else return fa.warn("Relayout fail.",Za,eb),Promise.reject();Object.keys(Ba).length&&(Na.changed=!0);var Ma=J(Na,Ba);Za=Ma.flags;Za.calc&&(Na.calcdata=void 0);eb=[va.previousPromises];Za.layoutReplot?eb.push(Ta.layoutReplot):Object.keys(Ba).length&&
(G(Na,Za,Ma)||va.supplyDefaults(Na),Za.legend&&eb.push(Ta.doLegend),Za.layoutstyle&&eb.push(Ta.layoutStyles),Za.axrange&&I(eb,Ma.rangesAltered),Za.ticks&&eb.push(Ta.doTicksRelayout),Za.modebar&&eb.push(Ta.doModeBar),Za.camera&&eb.push(Ta.doCamera),Za.colorbars&&eb.push(Ta.doColorBars),eb.push(n));eb.push(va.rehover,va.redrag);ua.add(Na,v,[Na,Ma.undoit],v,[Na,Ma.redoit]);(Ba=fa.syncOrAsync(eb,Na))&&Ba.then||(Ba=Promise.resolve(Na));return Ba.then(function(){Na.emit("plotly_relayout",Ma.eventData);
return Na})}function G(Na,Za,eb){var Ba=Na._fullLayout;if(!Za.axrange)return!1;for(var Ma in Za)if("axrange"!==Ma&&Za[Ma])return!1;for(var $a in eb.rangesAltered)if(eb=pa.id2name($a),Za=Na.layout[eb],eb=Ba[eb],eb.autorange=Za.autorange,eb.range=Za.range.slice(),eb.cleanRange(),eb._matchGroup)for(var lb in eb._matchGroup)lb!==$a&&(Za=Ba[pa.id2name(lb)],Za.autorange=eb.autorange,Za.range=eb.range.slice(),Za._input.range=eb.range.slice());return!0}function I(Na,Za){Na.push(kb,Ta.doAutoRangeAndConstraints,
Za?function(eb){var Ba=[],Ma=!0,$a;for($a in Za){var lb=pa.getFromId(eb,$a);Ba.push($a);if(lb._matchGroup)for(var Ra in lb._matchGroup)Za[Ra]||Ba.push(Ra);lb.automargin&&(Ma=!1)}return pa.draw(eb,Ba,{skipTitle:Ma})}:function(eb){return pa.draw(eb,"redraw")},Ta.drawData,Ta.finalDraw)}function J(Na,Za){function eb(Ab,jc){if(Array.isArray(Ab))Ab.forEach(function(Ic){eb(Ic,jc)});else if(!(Ab in Za||nb.hasParent(Za,Ab))){var Bc=lb(Ma,Ab);Ab in Zb||(Zb[Ab]=E(Bc.get()));void 0!==jc&&Bc.set(jc)}}function Ba(Ab){Ab=
pa.name2id(Ab.split(".")[0]);pc[Ab]=1;return Ab}var Ma=Na.layout,$a=Na._fullLayout,lb=F($a._preGUI,$a._guiEditing),Ra=Object.keys(Za),jb=pa.list(Na),Xa=fa.extendDeepAll({},Za),pb={},vb,zb;C(Za);Ra=Object.keys(Za);for(vb=0;vb<Ra.length;vb++)if(0===Ra[vb].indexOf("allaxes")){for(zb=0;zb<jb.length;zb++){var Jb=jb[zb]._id.substr(1);Jb=-1!==Jb.indexOf("scene")?Jb+".":"";Jb=Ra[vb].replace("allaxes",Jb+jb[zb]._name);Za[Jb]||(Za[Jb]=Za[Ra[vb]])}delete Za[Ra[vb]]}Ra=fb.layoutFlags();jb={};var Zb={},pc={},
Ac,ed;for(ed in Za){if(nb.hasParent(Za,ed))throw Error("cannot set "+ed+" and a parent attribute simultaneously");vb=lb(Ma,ed);zb=Za[ed];for(Jb=vb.parts.length-1;0<Jb&&"string"!==typeof vb.parts[Jb];)Jb--;var Rc=vb.parts[Jb],id=vb.parts[Jb-1]+"."+Rc,Tc=vb.parts.slice(0,Jb).join("."),wd=na(Na.layout,Tc).get(),Fb=na($a,Tc).get(),ac=vb.get();if(void 0!==zb){jb[ed]=zb;Zb[ed]="reverse"===Rc?zb:E(ac);if((Jb=oa.getLayoutValObject($a,vb.parts))&&Jb.impliedEdits&&null!==zb)for(var Jc in Jb.impliedEdits)eb(fa.relativeAttr(ed,
Jc),Jb.impliedEdits[Jc]);-1!==["width","height"].indexOf(ed)?zb?(eb("autosize",null),id="height"===ed?"width":"height",eb(id,$a[id])):$a[ed]=Na._initialAutoSize[ed]:"autosize"===ed?(eb("width",zb?null:$a.width),eb("height",zb?null:$a.height)):id.match(Ea)?(Ba(id),na($a,Tc+"._inputRange").set(null)):id.match(Ia)?(Ba(id),na($a,Tc+"._inputRange").set(null),id=na($a,Tc).get(),id._inputDomain&&(id._input.domain=id._inputDomain.slice())):id.match(Va)&&na($a,Tc+"._inputDomain").set(null);if("type"===Rc){var qc=
wd;id="linear"===Fb.type&&"log"===zb;var tc="log"===Fb.type&&"linear"===zb;id||tc?(qc&&qc.range?Fb.autorange?id&&(qc.range=qc.range[1]>qc.range[0]?[1,2]:[2,1]):(tc=qc.range[0],qc=qc.range[1],id?(0>=tc&&0>=qc&&eb(Tc+".autorange",!0),0>=tc?tc=qc/1E6:0>=qc&&(qc=tc/1E6),eb(Tc+".range[0]",Math.log(tc)/Math.LN10),eb(Tc+".range[1]",Math.log(qc)/Math.LN10)):(eb(Tc+".range[0]",Math.pow(10,tc)),eb(Tc+".range[1]",Math.pow(10,qc)))):eb(Tc+".autorange",!0),Array.isArray($a._subplots.polar)&&$a._subplots.polar.length&&
$a[vb.parts[0]]&&"radialaxis"===vb.parts[1]&&delete $a[vb.parts[0]]._subplot.viewInitial["radialaxis.range"],ta.getComponentMethod("annotations","convertCoords")(Na,Fb,zb,eb),ta.getComponentMethod("images","convertCoords")(Na,Fb,zb,eb)):(eb(Tc+".autorange",!0),eb(Tc+".range",null));na($a,Tc+"._inputRange").set(null)}else Rc.match(ab)&&(id=na($a,ed).get(),(qc=(zb||{}).type)&&"-"!==qc||(qc="linear"),ta.getComponentMethod("annotations","convertCoords")(Na,id,qc,eb),ta.getComponentMethod("images","convertCoords")(Na,
id,qc,eb));if(id=tb.containerArrayMatch(ed)){var vc=id.array;vb=id.index;Rc=id.property;Jb=Jb||{editType:"calc"};""!==vb&&""===Rc&&(tb.isAddVal(zb)?Zb[ed]=null:tb.isRemoveVal(zb)?Zb[ed]=(na(Ma,vc).get()||[])[vb]:fa.warn("unrecognized full object value",Za));fb.update(Ra,Jb);pb[vc]||(pb[vc]={});(Jb=pb[vc][vb])||(Jb=pb[vc][vb]={});Jb[Rc]=zb;delete Za[ed]}else"reverse"===Rc?(wd.range?wd.range.reverse():(eb(Tc+".autorange",!0),wd.range=[1,0]),Fb.autorange?Ra.calc=!0:Ra.plot=!0):($a._has("scatter-like")&&
$a._has("regl")&&"dragmode"===ed&&("lasso"===zb||"select"===zb)&&"lasso"!==ac&&"select"!==ac?Ra.plot=!0:$a._has("gl2d")?Ra.plot=!0:Jb?fb.update(Ra,Jb):Ra.calc=!0,vb.set(zb))}}for(vc in pb)tb.applyContainerArrayChanges(Na,lb(Ma,vc),pb[vc],Ra,lb)||(Ra.plot=!0);$a=$a._axisConstraintGroups||[];for(Ac in pc)for(vb=0;vb<$a.length;vb++)if(pb=$a[vb],pb[Ac]){Ra.calc=!0;for(var xb in pb)pc[xb]||(pa.getFromId(Na,xb)._constraintShrinkable=!0)}if(K(Na)||Za.height||Za.width)Ra.plot=!0;if(Ra.plot||Ra.calc)Ra.layoutReplot=
!0;return{flags:Ra,rangesAltered:pc,undoit:Zb,redoit:jb,eventData:Xa}}function K(Na){var Za=Na._fullLayout,eb=Za.width,Ba=Za.height;Na.layout.autosize&&va.plotAutoSize(Na,Na.layout,Za);return Za.width!==eb||Za.height!==Ba}function N(Na,Za,eb,Ba){Na=fa.getGraphDiv(Na);nb.clearPromiseQueue(Na);if(Na.framework&&Na.framework.isPolar)return Promise.resolve(Na);fa.isPlainObject(Za)||(Za={});fa.isPlainObject(eb)||(eb={});Object.keys(Za).length&&(Na.changed=!0);Object.keys(eb).length&&(Na.changed=!0);Ba=
nb.coerceTraceIndices(Na,Ba);var Ma=B(Na,fa.extendFlat({},Za),Ba);Za=Ma.flags;var $a=J(Na,fa.extendFlat({},eb)),lb=$a.flags;if(Za.calc||lb.calc)Na.calcdata=void 0;Za.clearAxisTypes&&nb.clearAxisTypes(Na,Ba,eb);eb=[];lb.layoutReplot?eb.push(Ta.layoutReplot):Za.fullReplot?eb.push(D.plot):(eb.push(va.previousPromises),G(Na,lb,$a)||va.supplyDefaults(Na),Za.style&&eb.push(Ta.doTraceStyle),(Za.colorbars||lb.colorbars)&&eb.push(Ta.doColorBars),lb.legend&&eb.push(Ta.doLegend),lb.layoutstyle&&eb.push(Ta.layoutStyles),
lb.axrange&&I(eb,$a.rangesAltered),lb.ticks&&eb.push(Ta.doTicksRelayout),lb.modebar&&eb.push(Ta.doModeBar),lb.camera&&eb.push(Ta.doCamera),eb.push(n));eb.push(va.rehover,va.redrag);ua.add(Na,N,[Na,Ma.undoit,$a.undoit,Ma.traces],N,[Na,Ma.redoit,$a.redoit,Ma.traces]);(eb=fa.syncOrAsync(eb,Na))&&eb.then||(eb=Promise.resolve(Na));return eb.then(function(){Na.emit("plotly_update",{data:Ma.eventData,layout:$a.eventData});return Na})}function H(Na){return function(Za){Za._fullLayout._guiEditing=!0;var eb=
Na.apply(null,arguments);Za._fullLayout._guiEditing=!1;return eb}}function L(Na,Za){for(var eb=0;eb<Za.length;eb++){var Ba=Za[eb],Ma=Na.match(Ba.pattern);if(Ma)return{head:Ma[1],attr:Ba.attr}}}function P(Na,Za){var eb=na(Za,Na).get();if(void 0!==eb)return eb;Na=Na.split(".");for(Na.pop();1<Na.length;)if(Na.pop(),eb=na(Za,Na.join(".")+".uirevision").get(),void 0!==eb)return eb;return Za.uirevision}function Q(Na,Za){var eb=fa.isPlainObject(Na),Ba=Array.isArray(Na);return eb||Ba?(eb&&fa.isPlainObject(Za)||
Ba&&Array.isArray(Za))&&JSON.stringify(Na)===JSON.stringify(Za):Na===Za}function S(Na,Za,eb,Ba){var Ma=Ba._preGUI,$a,lb,Ra,jb=[],Xa={};for($a in Ma){if(lb=L($a,rb)){if(lb=lb.attr||lb.head+".uirevision",(lb=(Ra=na(Ba,lb).get())&&P(lb,Za))&&lb===Ra){Ra=Ma[$a];null===Ra&&(Ra=void 0);lb=na(Za,$a);var pb=lb.get();if(Q(pb,Ra)){void 0===pb&&"autorange"===$a.substr($a.length-9)&&jb.push($a.substr(0,$a.length-10));lb.set(E(na(Ba,$a).get()));continue}}}else fa.warn("unrecognized GUI edit: "+$a);delete Ma[$a];
"range["===$a.substr($a.length-8,6)&&(Xa[$a.substr(0,$a.length-9)]=1)}for(Ma=0;Ma<jb.length;Ma++)Ra=jb[Ma],Xa[Ra]&&(Ra=na(Za,Ra).get())&&delete Ra.autorange;jb=Ba._tracePreGUI;for(var vb in jb)for($a in Xa=jb[vb],Ma=null,Xa){if(!Ma){a:{for(Ma=0;Ma<eb.length;Ma++)if(eb[Ma]._fullInput.uid===vb)break a;Ma=-1}if(0>Ma){delete jb[vb];break}var zb=eb[Ma]._fullInput;a:{Ma=zb.index;for(Ra=0;Ra<Na.length;Ra++)if(Na[Ra].uid===vb){Ma=Ra;break a}Ma=!Na[Ma]||Na[Ma].uid?-1:Ma}if(0>Ma){delete jb[vb];break}Ma=Na[Ma]}if(lb=
L($a,ib)){if(lb.attr?lb=(Ra=na(Ba,lb.attr).get())&&P(lb.attr,Za):(Ra=zb.uirevision,lb=Ma.uirevision,void 0===lb&&(lb=Za.uirevision)),lb&&lb===Ra&&(Ra=Xa[$a],null===Ra&&(Ra=void 0),lb=na(Ma,$a),pb=lb.get(),Q(pb,Ra))){lb.set(E(na(zb,$a).get()));continue}}else fa.warn("unrecognized GUI edit: "+$a+" in trace uid "+vb);delete Xa[$a]}}function O(Na,Za,eb,Ba,Ma,$a){var lb=Za.length===eb.length;if(!Ma&&!lb)return{fullReplot:!0,calc:!0};var Ra=fb.traceFlags();Ra.arrays={};Ra.nChanges=0;Ra.nChangesAnim=0;Ba=
{getValObject:function(Xa){Xa=oa.getTraceValObject(jb,Xa);!jb._module.animatable&&Xa.anim&&(Xa.anim=!1);return Xa},flags:Ra,immutable:Ba,transition:Ma,newDataRevision:$a,gd:Na};$a={};for(Na=0;Na<Za.length;Na++)if(eb[Na]){var jb=eb[Na]._fullInput;va.hasMakesDataTransform(jb)&&(jb=eb[Na]);$a[jb.uid]||($a[jb.uid]=1,X(Za[Na]._fullInput,jb,[],Ba))}if(Ra.calc||Ra.plot)Ra.fullReplot=!0;Ma&&Ra.nChanges&&Ra.nChangesAnim&&(Ra.anim=Ra.nChanges===Ra.nChangesAnim&&lb?"all":"some");return Ra}function U(Na,Za,eb,
Ba,Ma){var $a=fb.layoutFlags();$a.arrays={};$a.rangesAltered={};$a.nChanges=0;$a.nChangesAnim=0;X(Za,eb,[],{getValObject:function(lb){return oa.getLayoutValObject(eb,lb)},flags:$a,immutable:Ba,transition:Ma,gd:Na});if($a.plot||$a.calc)$a.layoutReplot=!0;Ma&&$a.nChanges&&$a.nChangesAnim&&($a.anim=$a.nChanges===$a.nChangesAnim?"all":"some");return $a}function X(Na,Za,eb,Ba){function Ma(){var Fb=$a.editType;if(pb&&-1!==Fb.indexOf("arraydraw"))fa.pushUnique(jb.arrays[pb],vb);else{fb.update(jb,$a);"none"!==
Fb&&jb.nChanges++;Ba.transition&&$a.anim&&jb.nChangesAnim++;if(Ea.test(pc)||Ia.test(pc))jb.rangesAltered[eb[0]]=1;Va.test(pc)&&na(Za,"_inputDomain").set(null);"datarevision"===lb&&(jb.newDataRevision=1)}}var $a,lb,Ra=Ba.getValObject,jb=Ba.flags,Xa=Ba.immutable,pb=Ba.inArray,vb=Ba.arrayIndex;for(lb in Na){if(jb.calc&&!Ba.transition)return;var zb=Na[lb],Jb=Za[lb],Zb=eb.concat(lb);var pc=Zb.join(".");if("_"!==lb.charAt(0)&&"function"!==typeof zb&&zb!==Jb){if(("tick0"===lb||"dtick"===lb)&&"geo"!==eb[0]){var Ac=
Za.tickmode;if("auto"===Ac||"array"===Ac||!Ac)continue}if(!("range"===lb&&Za.autorange||("zmin"===lb||"zmax"===lb)&&"contourcarpet"===Za.type||!($a=Ra(Zb))||$a._compareAsJSON&&JSON.stringify(zb)===JSON.stringify(Jb))){Ac=$a.valType;var ed="data_array"===$a.valType||$a.arrayOk,Rc=Array.isArray(zb),id=Array.isArray(Jb);if(Rc&&id){var Tc="_input_"+lb,wd=Na[Tc];Tc=Za[Tc];if(Array.isArray(wd)&&wd===Tc)continue}if(void 0===Jb)ed&&Rc?jb.calc=!0:Ma();else if($a._isLinkedToArray){ed=[];Rc=!1;pb||(jb.arrays[lb]=
ed);id=Math.min(zb.length,Jb.length);wd=Math.max(zb.length,Jb.length);if(id!==wd)if("arraydraw"===$a.editType)Rc=!0;else{Ma();continue}for(Ac=0;Ac<id;Ac++)X(zb[Ac],Jb[Ac],Zb.concat(Ac),fa.extendFlat({inArray:lb,arrayIndex:Ac},Ba));if(Rc)for(Ac=id;Ac<wd;Ac++)ed.push(Ac)}else!Ac&&fa.isPlainObject(zb)?X(zb,Jb,Zb,Ba):ed?Rc&&id?(Xa&&(jb.calc=!0),(Xa||Ba.newDataRevision)&&Ma()):Rc!==id?jb.calc=!0:Ma():Rc&&id?(zb.length!==Jb.length||String(zb)!==String(Jb))&&Ma():Ma()}}}for(lb in Za)if(!(lb in Na||"_"===
lb.charAt(0)||"function"===typeof Za[lb]))if($a=Ra(eb.concat(lb)),("data_array"===$a.valType||$a.arrayOk)&&Array.isArray(Za[lb])){jb.calc=!0;break}else Ma()}function da(Na,Za){for(var eb in Na)if("_"!==eb.charAt(0)){var Ba=Na[eb],Ma=Za[eb];if(Ba!==Ma)if(fa.isPlainObject(Ba)&&fa.isPlainObject(Ma)){if(da(Ba,Ma))return!0}else if(Array.isArray(Ba)&&Array.isArray(Ma)){if(Ba.length!==Ma.length)return!0;for(var $a=0;$a<Ba.length;$a++)if(Ba[$a]!==Ma[$a])if(fa.isPlainObject(Ba[$a])&&fa.isPlainObject(Ma[$a])){if(da(Ba[$a],
Ma[$a]))return!0}else return!0}else return!0}}function ea(Na){var Za=ca.select(Na),eb=Na._fullLayout;eb._container=Za.selectAll(".plot-container").data([0]);eb._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0);eb._paperdiv=eb._container.selectAll(".svg-container").data([0]);eb._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative");eb._glcontainer=eb._paperdiv.selectAll(".gl-container").data([{}]);eb._glcontainer.enter().append("div").classed("gl-container",
!0);eb._paperdiv.selectAll(".main-svg").remove();eb._paperdiv.select(".modebar-container").remove();eb._paper=eb._paperdiv.insert("svg",":first-child").classed("main-svg",!0);eb._toppaper=eb._paperdiv.append("svg").classed("main-svg",!0);eb._modebardiv=eb._paperdiv.append("div");eb._hoverpaper=eb._paperdiv.append("svg").classed("main-svg",!0);if(!eb._uid){var Ba={};ca.selectAll("defs").each(function(){this.id&&(Ba[this.id.split("-")[1]]=1)});eb._uid=fa.randstr(Ba)}eb._paperdiv.selectAll(".main-svg").attr(Ka.svgAttrs);
eb._defs=eb._paper.append("defs").attr("id","defs-"+eb._uid);eb._clips=eb._defs.append("g").classed("clips",!0);eb._topdefs=eb._toppaper.append("defs").attr("id","topdefs-"+eb._uid);eb._topclips=eb._topdefs.append("g").classed("clips",!0);eb._bgLayer=eb._paper.append("g").classed("bglayer",!0);eb._draggers=eb._paper.append("g").classed("draglayer",!0);Za=eb._paper.append("g").classed("layer-below",!0);eb._imageLowerLayer=Za.append("g").classed("imagelayer",!0);eb._shapeLowerLayer=Za.append("g").classed("shapelayer",
!0);eb._cartesianlayer=eb._paper.append("g").classed("cartesianlayer",!0);eb._polarlayer=eb._paper.append("g").classed("polarlayer",!0);eb._ternarylayer=eb._paper.append("g").classed("ternarylayer",!0);eb._geolayer=eb._paper.append("g").classed("geolayer",!0);eb._funnelarealayer=eb._paper.append("g").classed("funnelarealayer",!0);eb._pielayer=eb._paper.append("g").classed("pielayer",!0);eb._treemaplayer=eb._paper.append("g").classed("treemaplayer",!0);eb._sunburstlayer=eb._paper.append("g").classed("sunburstlayer",
!0);eb._indicatorlayer=eb._toppaper.append("g").classed("indicatorlayer",!0);eb._glimages=eb._paper.append("g").classed("glimages",!0);Za=eb._toppaper.append("g").classed("layer-above",!0);eb._imageUpperLayer=Za.append("g").classed("imagelayer",!0);eb._shapeUpperLayer=Za.append("g").classed("shapelayer",!0);eb._infolayer=eb._toppaper.append("g").classed("infolayer",!0);eb._menulayer=eb._toppaper.append("g").classed("menulayer",!0);eb._zoomlayer=eb._toppaper.append("g").classed("zoomlayer",!0);eb._hoverlayer=
eb._hoverpaper.append("g").classed("hoverlayer",!0);eb._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px");Na.emit("plotly_framework")}var ca=b("d3"),ia=b("fast-isnumeric"),ha=b("has-hover"),fa=b("../lib"),na=fa.nestedProperty,sa=b("../lib/events"),ua=b("../lib/queue"),ta=b("../registry"),oa=b("./plot_schema"),va=b("../plots/plots"),ma=b("../plots/polar/legacy"),pa=b("../plots/cartesian/axes"),za=b("../components/drawing"),qa=b("../components/color"),
Ca=b("../plots/cartesian/graph_interact").initInteractions,Ka=b("../constants/xmlns_namespaces"),Oa=b("../lib/svg_text_utils"),kb=b("../plots/cartesian/select").clearSelect,mb=b("./plot_config").dfltConfig,tb=b("./manage_arrays"),nb=b("./helpers"),Ta=b("./subroutines"),fb=b("./edit_types"),ab=b("../plots/cartesian/constants").AX_NAME_PATTERN,ra=0,Ea=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Ia=/^[xyz]axis[0-9]*\.autorange$/,Va=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/,rb=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},
{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,
attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],ib=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];D.animate=function(Na,Za,eb){function Ba(Ra,jb){var Xa=
0;return function(){if(Ra&&++Xa===jb)return Ra()}}Na=fa.getGraphDiv(Na);if(!fa.isPlotDiv(Na))throw Error("This element is not a Plotly plot: "+Na+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ma=Na._transitionData;Ma._frameQueue||(Ma._frameQueue=[]);eb=va.supplyAnimationDefaults(eb);var $a=eb.transition,lb=eb.frame;void 0===Ma._frameWaitingCnt&&(Ma._frameWaitingCnt=0);return new Promise(function(Ra,jb){function Xa(){if(0!==
Ma._frameQueue.length){for(;Ma._frameQueue.length;){var Tc=Ma._frameQueue.pop();if(Tc.onInterrupt)Tc.onInterrupt()}Na.emit("plotly_animationinterrupted",[])}}function pb(Tc){if(0!==Tc.length){for(var wd=0;wd<Tc.length;wd++){var Fb="byname"===Tc[wd].type?va.computeFrame(Na,Tc[wd].name):Tc[wd].data;var ac=wd;ac=Array.isArray(lb)?ac>=lb.length?lb[0]:lb[ac]:lb;var Jc=wd;Jc=Array.isArray($a)?Jc>=$a.length?$a[0]:$a[Jc]:$a;Jc.duration=Math.min(Jc.duration,ac.duration);Fb={frame:Fb,name:Tc[wd].name,frameOpts:ac,
transitionOpts:Jc};wd===Tc.length-1&&(Fb.onComplete=Ba(Ra,2),Fb.onInterrupt=jb);Ma._frameQueue.push(Fb)}"immediate"===eb.mode&&(Ma._lastFrameAt=-Infinity);Ma._animationRaf||zb()}}function vb(){if(Ma._currentFrame&&Ma._currentFrame.onComplete)Ma._currentFrame.onComplete();var Tc=Ma._currentFrame=Ma._frameQueue.shift();if(Tc){var wd=Tc.name?Tc.name.toString():null;Na._fullLayout._currentFrame=wd;Ma._lastFrameAt=Date.now();Ma._timeToNext=Tc.frameOpts.duration;va.transition(Na,Tc.frame.data,Tc.frame.layout,
nb.coerceTraceIndices(Na,Tc.frame.traces),Tc.frameOpts,Tc.transitionOpts).then(function(){if(Tc.onComplete)Tc.onComplete()});Na.emit("plotly_animatingframe",{name:wd,frame:Tc.frame,animation:{frame:Tc.frameOpts,transition:Tc.transitionOpts}})}else Na.emit("plotly_animated"),window.cancelAnimationFrame(Ma._animationRaf),Ma._animationRaf=null}function zb(){Na.emit("plotly_animating");Ma._lastFrameAt=-Infinity;Ma._timeToNext=0;Ma._runningTransitions=0;Ma._currentFrame=null;var Tc=function(){Ma._animationRaf=
window.requestAnimationFrame(Tc);Date.now()-Ma._lastFrameAt>Ma._timeToNext&&vb()};Tc()}function Jb(Tc){Array.isArray($a)?Tc.transitionOpts=Zb>=$a.length?$a[Zb]:$a[0]:Tc.transitionOpts=$a;Zb++;return Tc}var Zb=0,pc,Ac=[],ed=void 0===Za||null===Za;var Rc=Array.isArray(Za);if(!ed&&!Rc&&fa.isPlainObject(Za))Ac.push({type:"object",data:Jb(fa.extendFlat({},Za))});else if(ed||-1!==["string","number"].indexOf(typeof Za))for(Rc=0;Rc<Ma._frames.length;Rc++)(pc=Ma._frames[Rc])&&(ed||String(pc.group)===String(Za))&&
Ac.push({type:"byname",name:String(pc.name),data:Jb({name:pc.name})});else if(Rc)for(Rc=0;Rc<Za.length;Rc++)pc=Za[Rc],-1!==["number","string"].indexOf(typeof pc)?(pc=String(pc),Ac.push({type:"byname",name:pc,data:Jb({name:pc})})):fa.isPlainObject(pc)&&Ac.push({type:"object",data:Jb(fa.extendFlat({},pc))});for(Rc=0;Rc<Ac.length;Rc++)if(pc=Ac[Rc],"byname"===pc.type&&!Ma._frameHash[pc.data.name]){fa.warn('animate failure: frame not found: "'+pc.data.name+'"');jb();return}-1!==["next","immediate"].indexOf(eb.mode)&&
Xa();"reverse"===eb.direction&&Ac.reverse();var id=Na._fullLayout._currentFrame;if(id&&eb.fromcurrent){ed=-1;for(Rc=0;Rc<Ac.length;Rc++)if(pc=Ac[Rc],"byname"===pc.type&&pc.name===id){ed=Rc;break}if(0<ed&&ed<Ac.length-1){id=[];for(Rc=0;Rc<Ac.length;Rc++)pc=Ac[Rc],("byname"!==Ac[Rc].type||Rc>ed)&&id.push(pc);Ac=id}}0<Ac.length?pb(Ac):(Na.emit("plotly_animated"),Ra())})};D.addFrames=function(Na,Za,eb){Na=fa.getGraphDiv(Na);if(null===Za||void 0===Za)return Promise.resolve();if(!fa.isPlotDiv(Na))throw Error("This element is not a Plotly plot: "+
Na+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Ba,Ma=Na._transitionData._frames,$a=Na._transitionData._frameHash;if(!Array.isArray(Za))throw Error("addFrames failure: frameList must be an Array of frame definitions"+Za);var lb=Ma.length+2*Za.length;var Ra=[],jb={};for(Ba=Za.length-1;0<=Ba;Ba--)if(fa.isPlainObject(Za[Ba])){var Xa=Za[Ba].name;var pb=($a[Xa]||jb[Xa]||{}).name,vb=Za[Ba].name,zb=$a[pb]||
jb[pb];pb&&vb&&"number"===typeof vb&&zb&&5>ra&&(ra++,fa.warn('addFrames: overwriting frame "'+($a[pb]||jb[pb]).name+'" with a frame whose name of type "number" also equates to "'+pb+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===ra&&fa.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed."));jb[Xa]={name:Xa};
Ra.push({frame:va.supplyFrameDefaults(Za[Ba]),index:eb&&void 0!==eb[Ba]&&null!==eb[Ba]?eb[Ba]:lb+Ba})}Ra.sort(function(Jb,Zb){return Jb.index>Zb.index?-1:Jb.index<Zb.index?1:0});Za=[];eb=[];jb=Ma.length;for(Ba=Ra.length-1;0<=Ba;Ba--){lb=Ra[Ba].frame;"number"===typeof lb.name&&fa.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings");if(!lb.name)for(;$a[lb.name="frame "+Na._transitionData._counter++];);if($a[lb.name]){for(Xa=0;Xa<Ma.length&&(Ma[Xa]||
{}).name!==lb.name;Xa++);Za.push({type:"replace",index:Xa,value:lb});eb.unshift({type:"replace",index:Xa,value:Ma[Xa]})}else Xa=Math.max(0,Math.min(Ra[Ba].index,jb)),Za.push({type:"insert",index:Xa,value:lb}),eb.unshift({type:"delete",index:Xa}),jb++}Ma=Ba=va.modifyFrames;$a=[Na,eb];Ra=[Na,Za];ua&&ua.add(Na,Ba,$a,Ma,Ra);return va.modifyFrames(Na,Za)};D.deleteFrames=function(Na,Za){Na=fa.getGraphDiv(Na);if(!fa.isPlotDiv(Na))throw Error("This element is not a Plotly plot: "+Na);var eb,Ba=Na._transitionData._frames,
Ma=[],$a=[];if(!Za)for(Za=[],eb=0;eb<Ba.length;eb++)Za.push(eb);Za=Za.slice();Za.sort();for(eb=Za.length-1;0<=eb;eb--){var lb=Za[eb];Ma.push({type:"delete",index:lb});$a.unshift({type:"insert",index:lb,value:Ba[lb]})}eb=Za=va.modifyFrames;$a=[Na,$a];lb=[Na,Ma];ua&&ua.add(Na,Za,$a,eb,lb);return va.modifyFrames(Na,Ma)};D.addTraces=t;D.deleteTraces=u;D.extendTraces=g;D.moveTraces=w;D.prependTraces=q;D.newPlot=function(Na,Za,eb,Ba){Na=fa.getGraphDiv(Na);va.cleanPlot([],{},Na._fullData||[],Na._fullLayout||
{});va.purge(Na);return D.plot(Na,Za,eb,Ba)};D.plot=function(Na,Za,eb,Ba){function Ma(){for(var Ac=zb._basePlotModules,ed=0;ed<Ac.length;ed++)Ac[ed].drawFramework&&Ac[ed].drawFramework(Na);!zb._glcanvas&&zb._has("gl")&&(zb._glcanvas=zb._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Rc){return Rc.key}),zb._glcanvas.enter().append("canvas").attr("class",function(Rc){return"gl-canvas gl-canvas-"+
Rc.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));if(zb._glcanvas&&(zb._glcanvas.attr("width",zb.width).attr("height",zb.height),(Ac=zb._glcanvas.data()[0].regl)&&(Math.floor(zb.width)!==Ac._gl.drawingBufferWidth||Math.floor(zb.height)!==Ac._gl.drawingBufferHeight)))if(pc)fa.error("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.");else return fa.log("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug. Clearing graph and plotting again."),
va.cleanPlot([],{},Na._fullData,zb),va.supplyDefaults(Na),zb=Na._fullLayout,va.doCalcdata(Na),pc++,Ma();"h"===zb.modebar.orientation?zb._modebardiv.style("height",null).style("width","100%"):zb._modebardiv.style("width",null).style("height",zb.height+"px");return va.previousPromises(Na)}function $a(){va.clearAutoMarginIds(Na);Ta.drawMarginPushers(Na);pa.allowAutoMargin(Na);if(zb._has("pie"))for(var Ac=Na._fullData,ed=0;ed<Ac.length;ed++){var Rc=Ac[ed];"pie"===Rc.type&&Rc.automargin&&va.allowAutoMargin(Na,
"pie."+Rc.uid+".automargin")}va.doAutoMargin(Na);return va.previousPromises(Na)}function lb(){if(Jb)return fa.syncOrAsync([ta.getComponentMethod("shapes","calcAutorange"),ta.getComponentMethod("annotations","calcAutorange"),Ra],Na);Ra()}function Ra(){Na._transitioning||(Ta.doAutoRangeAndConstraints(Na),vb&&pa.saveRangeInitial(Na),ta.getComponentMethod("rangeslider","calcAutorange")(Na))}function jb(){return pa.draw(Na,vb?"":"redraw")}Na=fa.getGraphDiv(Na);sa.init(Na);if(fa.isPlainObject(Za)){var Xa=
Za;Za=Xa.data;eb=Xa.layout;Ba=Xa.config;var pb=Xa.frames}if(!1===sa.triggerHandler(Na,"plotly_beforeplot",[Za,eb,Ba]))return Promise.reject();Za||eb||fa.isPlotDiv(Na)||fa.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",Na);h(Na,Ba);eb||(eb={});ca.select(Na).classed("js-plotly-plot",!0);za.makeTester();Array.isArray(Na._promises)||(Na._promises=[]);var vb=0===(Na.data||[]).length&&Array.isArray(Za);Array.isArray(Za)&&(nb.cleanData(Za),vb?Na.data=Za:Na.data.push.apply(Na.data,
Za),Na.empty=!1);if(!Na.layout||vb)Na.layout=nb.cleanLayout(eb);va.supplyDefaults(Na);var zb=Na._fullLayout;Ba=zb._has("cartesian");if(!zb._has("polar")&&Za&&Za[0]&&Za[0].r)return fa.log("Legacy polar charts are deprecated!"),a(Na,Za,eb);zb._replotting=!0;if(vb||zb._shouldCreateBgLayer)ea(Na),zb._shouldCreateBgLayer&&delete zb._shouldCreateBgLayer;Na.framework!==ea&&(Na.framework=ea,ea(Na));za.initGradients(Na);vb&&pa.saveShowSpikeInitial(Na);var Jb=!Na.calcdata||Na.calcdata.length!==(Na._fullData||
[]).length;Jb&&va.doCalcdata(Na);for(Za=0;Za<Na.calcdata.length;Za++)Na.calcdata[Za][0].trace=Na._fullData[Za];Na._context.responsive?Na._responsiveChartHandler||(Na._responsiveChartHandler=function(){fa.isHidden(Na)||va.resize(Na)},window.addEventListener("resize",Na._responsiveChartHandler)):fa.clearResponsive(Na);var Zb=fa.extendFlat({},zb._size),pc=0;Za=[va.previousPromises,function(){if(pb)return D.addFrames(Na,pb)},Ma,$a,function(){if(va.didMarginChange(Zb,zb._size))return fa.syncOrAsync([$a,
Ta.layoutStyles],Na)}];Ba&&Za.push(lb);Za.push(Ta.layoutStyles);Ba&&Za.push(jb);Za.push(Ta.drawData,Ta.finalDraw,Ca,va.addLinks,va.rehover,va.redrag,va.doAutoMargin,va.previousPromises);(Za=fa.syncOrAsync(Za,Na))&&Za.then||(Za=Promise.resolve());return Za.then(function(){n(Na);return Na})};D.purge=function(Na){Na=fa.getGraphDiv(Na);var Za=Na._fullLayout||{};va.cleanPlot([],{},Na._fullData||[],Za);va.purge(Na);sa.purge(Na);Za._container&&Za._container.remove();delete Na._context;return Na};D.react=
function(Na,Za,eb,Ba){function Ma(){return D.addFrames(Na,Xa)}var $a;Na=fa.getGraphDiv(Na);nb.clearPromiseQueue(Na);var lb=Na._fullData,Ra=Na._fullLayout;if(fa.isPlotDiv(Na)&&lb&&Ra){if(fa.isPlainObject(Za)){var jb=Za;Za=jb.data;eb=jb.layout;Ba=jb.config;var Xa=jb.frames}jb=!1;Ba&&(jb=fa.extendDeep({},Na._context),Na._context=void 0,h(Na,Ba),jb=da(jb,Na._context));Na.data=Za||[];nb.cleanData(Na.data);Na.layout=eb||{};nb.cleanLayout(Na.layout);S(Na.data,Na.layout,lb,Ra);Ba=Object.getOwnPropertyNames(Ra);
for(var pb=0;pb<Ba.length;pb++){var vb=Ba[pb],zb=vb.substring(0,5);("xaxis"===zb||"yaxis"===zb)&&(vb=Ra[vb]._emptyCategories)&&vb()}va.supplyDefaults(Na,{skipUpdateCalc:!0});pb=Na._fullData;Ba=Na._fullLayout;vb=void 0===Ba.datarevision;zb=Ba.transition;var Jb=U(Na,Ra,Ba,vb,zb),Zb=O(Na,lb,pb,vb,zb,Jb.newDataRevision);K(Na)&&(Jb.layoutReplot=!0);Zb.calc||Jb.calc?Na.calcdata=void 0:va.supplyDefaultsUpdateCalc(Na.calcdata,pb);lb=[];Xa&&(Na._transitionData={},va.createTransitionData(Na),lb.push(Ma));if(Ba.transition&&
!jb&&(Zb.anim||Jb.anim))Jb.ticks&&lb.push(Ta.doTicksRelayout),va.doCalcdata(Na),Ta.doAutoRangeAndConstraints(Na),lb.push(function(){return va.transitionFromReact(Na,Zb,Jb,Ra)});else if(Zb.fullReplot||Jb.layoutReplot||jb)Na._fullLayout._skipDefaults=!0,lb.push(D.plot);else{for($a in Jb.arrays)if(jb=Jb.arrays[$a],jb.length)if(Ba=ta.getComponentMethod($a,"drawOne"),Ba!==fa.noop)for(pb=0;pb<jb.length;pb++)Ba(Na,jb[pb]);else{jb=ta.getComponentMethod($a,"draw");if(jb===fa.noop)throw Error("cannot draw components: "+
$a);jb(Na)}lb.push(va.previousPromises);Zb.style&&lb.push(Ta.doTraceStyle);(Zb.colorbars||Jb.colorbars)&&lb.push(Ta.doColorBars);Jb.legend&&lb.push(Ta.doLegend);Jb.layoutstyle&&lb.push(Ta.layoutStyles);Jb.axrange&&I(lb);Jb.ticks&&lb.push(Ta.doTicksRelayout);Jb.modebar&&lb.push(Ta.doModeBar);Jb.camera&&lb.push(Ta.doCamera);lb.push(n)}lb.push(va.rehover,va.redrag);($a=fa.syncOrAsync(lb,Na))&&$a.then||($a=Promise.resolve(Na))}else $a=D.newPlot(Na,Za,eb,Ba);return $a.then(function(){Na.emit("plotly_react",
{data:Za,layout:eb});return Na})};D.redraw=function(Na){Na=fa.getGraphDiv(Na);if(!fa.isPlotDiv(Na))throw Error("This element is not a Plotly plot: "+Na);nb.cleanData(Na.data);nb.cleanLayout(Na.layout);Na.calcdata=void 0;return D.plot(Na).then(function(){Na.emit("plotly_redraw");return Na})};D.relayout=v;D.restyle=x;D.setPlotConfig=function(Na){return fa.extendFlat(mb,Na)};D.update=N;D._guiRelayout=H(v);D._guiRestyle=H(x);D._guiUpdate=H(N);D._storeDirectGUIEdit=function(Na,Za,eb){for(var Ba in eb){var Ma=
na(Na,Ba);z(Ba,Ma.get(),eb[Ba],Za)}}},{"../components/color":615,"../components/drawing":637,"../constants/xmlns_namespaces":725,"../lib":749,"../lib/events":738,"../lib/queue":764,"../lib/svg_text_utils":773,"../plots/cartesian/axes":797,"../plots/cartesian/constants":803,"../plots/cartesian/graph_interact":806,"../plots/cartesian/select":816,"../plots/plots":860,"../plots/polar/legacy":868,"../registry":880,"./edit_types":780,"./helpers":781,"./manage_arrays":783,"./plot_config":785,"./plot_schema":786,
"./subroutines":788,d3:169,"fast-isnumeric":241,"has-hover":414}],785:[function(b,y,D){function n(m,p){for(var h in m){var a=m[h];a.valType?p[h]=a.dflt:(p[h]||(p[h]={}),n(a,p[h]))}}b={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",
dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",
values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",
dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",
dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};D={};n(b,D);y.exports={configAttributes:b,dfltConfig:D}},{}],786:[function(b,y,D){function n(H,L){var P,Q,S=H._basePlotModules;if(S){for(P=0;P<S.length;P++){var O=S[P];if(O.attrRegex&&O.attrRegex.test(L)){if(O.layoutAttrOverrides)return O.layoutAttrOverrides;
if(!U&&O.layoutAttributes)var U=O.layoutAttributes}if((O=O.baseLayoutAttrOverrides)&&L in O)return O[L]}if(U)return U}if(S=H._modules)for(P=0;P<S.length;P++)if((H=S[P].layoutAttributes)&&L in H)return H[L];for(Q in q.componentsRegistry){O=q.componentsRegistry[Q];if("colorscale"===O.name&&0===L.indexOf("coloraxis"))return O.layoutAttributes[L];if(!O.schema&&L===O.name)return O.layoutAttributes}return L in u?u[L]:"radialaxis"===L||"angularaxis"===L?z[L]:z.layout[L]||!1}function m(H,L,P){if(!H)return!1;
if(H._isLinkedToArray)if(p(L[P]))P++;else if(P<L.length)return!1;for(;P<L.length;P++){var Q=H[L[P]];if(G(Q))H=Q;else break;if(P===L.length-1)break;if(H._isLinkedToArray){if(P++,!p(L[P]))return!1}else if("info_array"===H.valType){P++;Q=L[P];if(!p(Q))return!1;var S=H.items;if(Array.isArray(S)){if(Q>=S.length)return!1;if(2===H.dimensions){P++;if(L.length===P)break;H=L[P];if(!p(H))return!1;H=S[Q][H]}else H=S[Q]}else H=S}}return H}function p(H){return H===Math.round(H)&&0<=H}function h(H){if("area"===
H){var L={attributes:F};var P={}}else L=q.modules[H]._module,P=L.basePlotModule;var Q={type:null},S=v({},t),O=v({},L.attributes);D.crawl(O,function(U,X,da,ea,ca){J(S,ca).set(void 0);void 0===U&&J(O,ca).set(void 0)});v(Q,S);q.traceIs(H,"noOpacity")&&delete Q.opacity;q.traceIs(H,"showLegend")||(delete Q.showlegend,delete Q.legendgroup);q.traceIs(H,"noHover")&&(delete Q.hoverinfo,delete Q.hoverlabel);L.selectPoints||delete Q.selectedpoints;v(Q,O);P.attributes&&v(Q,P.attributes);Q.type=H;H={meta:L.meta||
{},categories:L.categories||{},animatable:!!L.animatable,type:H,attributes:l(Q)};L.layoutAttributes&&(P={},v(P,L.layoutAttributes),H.layoutAttributes=l(P));L.animatable||D.crawl(H,function(U){D.isValObject(U)&&"anim"in U&&delete U.anim});return H}function a(){var H={},L;v(H,u);for(L in q.subplotsRegistry){var P=q.subplotsRegistry[L];if(P.layoutAttributes)if(Array.isArray(P.attr))for(var Q=0;Q<P.attr.length;Q++)g(H,P,P.attr[Q]);else g(H,P,"subplot"===P.attr?P.name:P.attr)}C(H,{radialaxis:z.radialaxis,
angularaxis:z.angularaxis});C(H,z.layout);for(L in q.componentsRegistry)if(P=q.componentsRegistry[L],(Q=P.schema)&&(Q.subplots||Q.layout)){if((P=Q.subplots)&&P.xaxis&&!P.yaxis)for(var S in P.xaxis)delete H.yaxis[S]}else"colorscale"===P.name?v(H,P.layoutAttributes):P.layoutAttributes&&(Q=P.layoutAttributes,P=J(H,P.name),P.set(v(P.get()||{},Q)));return{layoutAttributes:l(H)}}function d(H){var L=v({},q.transformsRegistry[H].attributes);Object.keys(q.componentsRegistry).forEach(function(P){var Q=q.componentsRegistry[P];
Q.schema&&Q.schema.transforms&&Q.schema.transforms[H]&&Object.keys(Q.schema.transforms[H]).forEach(function(S){var O=Q.schema.transforms[H][S];S=J(L,S);S.set(v(S.get()||{},O))})});return{attributes:l(L)}}function e(){var H={frames:v({},w)};l(H);return H.frames}function l(H){k(H);c(H);f(H);return H}function k(H){D.crawl(H,function(L,P,Q){D.isValObject(L)?"data_array"===L.valType?(L.role="data",Q[P+"src"]={valType:"string",editType:"none"}):!0===L.arrayOk&&(Q[P+"src"]={valType:"string",editType:"none"}):
G(L)&&(L.role="object")})}function c(H){D.crawl(H,function(L,P,Q){if(L){var S=L._isLinkedToArray;S&&(delete L._isLinkedToArray,Q[P]={items:{}},Q[P].items[S]=L,Q[P].role="object")}})}function f(H){function L(P){for(var Q in P)if(G(P[Q]))L(P[Q]);else if(Array.isArray(P[Q]))for(var S=0;S<P[Q].length;S++)L(P[Q][S]);else P[Q]instanceof RegExp&&(P[Q]=P[Q].toString())}L(H)}function g(H,L,P){H=J(H,P);L=v({},L.layoutAttributes);L._isSubplotObj=!0;H.set(L)}var q=b("../registry");y=b("../lib");var t=b("../plots/attributes"),
u=b("../plots/layout_attributes"),w=b("../plots/frame_attributes"),x=b("../plots/animation_attributes"),E=b("./plot_config").configAttributes,F=b("../plots/polar/legacy/area_attributes"),z=b("../plots/polar/legacy/axis_attributes"),B=b("./edit_types"),C=y.extendFlat,v=y.extendDeepAll,G=y.isPlainObject,I=y.isArrayOrTypedArray,J=y.nestedProperty,K=y.valObjectMeta,N=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];D.IS_SUBPLOT_OBJ="_isSubplotObj";D.IS_LINKED_TO_ARRAY="_isLinkedToArray";
D.DEPRECATED="_deprecated";D.UNDERSCORE_ATTRS=N;D.get=function(){var H={};q.allTypes.concat("area").forEach(function(P){H[P]=h(P)});var L={};Object.keys(q.transformsRegistry).forEach(function(P){L[P]=d(P)});return{defs:{valObjects:K,metaKeys:N.concat(["description","role","editType","impliedEdits"]),editType:{traces:B.traces,layout:B.layout},impliedEdits:{}},traces:H,layout:a(),transforms:L,frames:e(),animation:l(x),config:l(E)}};D.crawl=function(H,L,P,Q){var S=P||0;Q=Q||"";Object.keys(H).forEach(function(O){var U=
H[O];if(-1===N.indexOf(O)){var X=(Q?Q+".":"")+O;L(U,O,H,S,X);D.isValObject(U)||G(U)&&"impliedEdits"!==O&&D.crawl(U,L,S+1,X)}})};D.isValObject=function(H){return H&&void 0!==H.valType};D.findArrayAttributes=function(H){function L(ia,ha,fa,na){S=S.slice(0,na).concat([ha]);O=O.slice(0,na).concat([ia&&ia._isLinkedToArray]);!ia||"data_array"!==ia.valType&&!0!==ia.arrayOk||"colorbar"===S[na-1]&&("ticktext"===ha||"tickvals"===ha)||P(U,0,"")}function P(ia,ha,fa){ia=ia[S[ha]];fa+=S[ha];if(ha===S.length-1)I(ia)&&
Q.push(X+fa);else if(O[ha]){if(Array.isArray(ia))for(var na=0;na<ia.length;na++)G(ia[na])&&P(ia[na],ha+1,fa+"["+na+"].")}else G(ia)&&P(ia,ha+1,fa+".")}var Q=[],S=[],O=[];var U=H;var X="";D.crawl(t,L);H._module&&H._module.attributes&&D.crawl(H._module.attributes,L);if(H=H.transforms)for(var da=0;da<H.length;da++){var ea=H[da],ca=ea._module;ca&&(X="transforms["+da+"].",U=ea,D.crawl(ca.attributes,L))}return Q};D.getTraceValObject=function(H,L){var P=L[0],Q=1;if("transforms"===P){if(1===L.length)return t.transforms;
P=H.transforms;if(!Array.isArray(P)||!P.length)return!1;Q=L[1];if(!p(Q)||Q>=P.length)return!1;H=(H=(q.transformsRegistry[P[Q].type]||{}).attributes)&&H[L[2]];Q=3}else if("area"===H.type)H=F[P];else{var S=H._module;S||(S=(q.modules[H.type||t.type.dflt]||{})._module);if(!S)return!1;H=(H=S.attributes)&&H[P];H||(S=S.basePlotModule)&&S.attributes&&(H=S.attributes[P]);H||(H=t[P])}return m(H,L,Q)};D.getLayoutValObject=function(H,L){H=n(H,L[0]);return m(H,L,1)}},{"../lib":749,"../plots/animation_attributes":792,
"../plots/attributes":794,"../plots/frame_attributes":826,"../plots/layout_attributes":851,"../plots/polar/legacy/area_attributes":866,"../plots/polar/legacy/axis_attributes":867,"../registry":880,"./edit_types":780,"./plot_config":785}],787:[function(b,y,D){function n(a){"s"!==a.charAt(a.length-1)&&m.warn("bad argument to arrayDefaultKey: "+a);return a.substr(0,a.length-1)+"defaults"}var m=b("../lib"),p=b("../plots/attributes"),h={name:{valType:"string",editType:"none"},templateitemname:{valType:"string",
editType:"calc"}};D.templatedArray=function(a,d){d._isLinkedToArray=a;d.name=h.name;d.templateitemname=h.templateitemname;return d};D.traceTemplater=function(a){var d={},e;for(e in a){var l=a[e];Array.isArray(l)&&l.length&&(d[e]=0)}return{newTrace:function(k){e=m.coerce(k,{},p,"type");k={type:e,_template:null};if(e in d){l=a[e];var c=d[e]%l.length;d[e]++;k._template=l[c]}return k}}};D.newContainer=function(a,d,e){var l=a._template;e=l&&(l[d]||e&&l[e]);m.isPlainObject(e)||(e=null);return a[d]={_template:e}};
D.arrayTemplater=function(a,d,e){var l=(a=a._template)&&a[n(d)],k=a&&a[d];Array.isArray(k)&&k.length||(k=[]);var c={};return{newItem:function(f){var g={name:f.name,_input:f},q=g.templateitemname=f.templateitemname;if(!q||"string"!==typeof q)return g._template=l,g;for(var t=0;t<k.length;t++){var u=k[t];if(u.name===q)return c[q]=1,g._template=u,g}g[e]=f[e]||!1;g._template=!1;return g},defaultItems:function(){for(var f=[],g=0;g<k.length;g++){var q=k[g],t=q.name;if(t&&"string"===typeof t&&!c[t]){var u=
{_template:q,name:t,_input:{_templateitemname:t}};u.templateitemname=q.templateitemname;f.push(u);c[t]=1}}return f}}};D.arrayDefaultKey=n;D.arrayEditor=function(a,d,e){function l(){u={};q&&(u[t]={},u[t].templateitemname=q)}function k(w,x){q?m.nestedProperty(u[t],w).set(x):u[t+"."+w]=x}function c(){var w=u;l();return w}var f=(m.nestedProperty(a,d).get()||[]).length,g=e._index,q=g>=f&&(e._input||{})._templateitemname;q&&(g=f);var t=d+"["+g+"]",u;l();return{modifyBase:function(w,x){u[w]=x},modifyItem:k,
getUpdateObj:c,applyUpdate:function(w,x){w&&k(w,x);w=c();for(var E in w)m.nestedProperty(a,E).set(w[E])}}}},{"../lib":749,"../plots/attributes":794}],788:[function(b,y,D){function n(z,B,C){for(var v=0;v<C.length;v++){var G=C[v][0],I=C[v][1];if(!(G[0]>=z[1]||G[1]<=z[0])&&I[0]<B[1]&&I[1]>B[0])return!0}return!1}function m(z){function B(ta,oa,va){var ma=ta._lw/2;return"x"===ta._id.charAt(0)?oa?"top"===va?oa._offset-H-ma:oa._offset+oa._length+H+ma:N.t+N.h*(1-(ta.position||0))+ma%1:oa?"right"===va?oa._offset+
oa._length+H+ma:oa._offset-H-ma:N.l+N.w*(ta.position||0)+ma%1}function C(ta){return"M"+fa+","+ta+"H"+na}function v(ta){return"M"+ia._offset+","+ta+"h"+ia._length}function G(ta){return"M"+ta+","+ua+"V"+sa}function I(ta){return"M"+ta+","+ha._offset+"v"+ha._length}function J(ta,oa,va){if(!ta.showline||Q!==ta._mainSubplot)return"";if(!ta._anchorAxis)return va(ta._mainLinePosition);va=oa(ta._mainLinePosition);ta.mirror&&(va+=oa(ta._mainMirrorPosition));return va}var K=z._fullLayout,N=K._size,H=N.p,L=u.list(z,
"",!0),P,Q;K._paperdiv.style({width:z._context.responsive&&K.autosize&&!z._context._hasZeroWidth&&!z.layout.width?"100%":K.width+"px",height:z._context.responsive&&K.autosize&&!z._context._hasZeroHeight&&!z.layout.height?"100%":K.height+"px"}).selectAll(".main-svg").call(g.setSize,K.width,K.height);z._context.setBackground(z,K.paper_bgcolor);D.drawMainTitle(z);t.manage(z);if(!K._has("cartesian"))return l.previousPromises(z);for(P=0;P<L.length;P++){var S=L[P];var O=S._anchorAxis;S._linepositions={};
S._lw=g.crispRound(z,S.linewidth,1);S._mainLinePosition=B(S,O,S.side);S._mainMirrorPosition=S.mirror&&O?B(S,O,w.OPPOSITE_SIDE[S.side]):null}P=[];O=[];var U=[],X=1===f.opacity(K.paper_bgcolor)&&1===f.opacity(K.plot_bgcolor)&&K.paper_bgcolor===K.plot_bgcolor;for(Q in K._plots)if(S=K._plots[Q],S.mainplot)S.bg&&S.bg.remove(),S.bg=void 0;else{var da=S.xaxis.domain,ea=S.yaxis.domain,ca=S.plotgroup;n(da,ea,U)?(da=ca.node(),S=S.bg=k.ensureSingle(ca,"rect","bg"),da.insertBefore(S.node(),da.childNodes[0]),
O.push(Q)):(ca.select("rect.bg").remove(),U.push([da,ea]),X||(P.push(Q),O.push(Q)))}S=K._bgLayer.selectAll(".bg").data(P);S.enter().append("rect").classed("bg",!0);S.exit().remove();S.each(function(ta){K._plots[ta].bg=d.select(this)});for(P=0;P<O.length;P++){S=K._plots[O[P]];var ia=S.xaxis;var ha=S.yaxis;S.bg&&S.bg.call(g.setRect,ia._offset-H,ha._offset-H,ia._length+2*H,ha._length+2*H).call(f.fill,K.plot_bgcolor).style("stroke-width",0)}if(!K._hasOnlyLargeSploms)for(Q in K._plots)S=K._plots[Q],ia=
S.xaxis,ha=S.yaxis,O=S.clipId="clip"+K._uid+Q+"plot",P=k.ensureSingleById(K._clips,"clipPath",O,function(ta){ta.classed("plotclip",!0).append("rect")}),S.clipRect=P.select("rect").attr({width:ia._length,height:ha._length}),g.setTranslate(S.plot,ia._offset,ha._offset),S._hasClipOnAxisFalse?P=null:(P=O,O=null),g.setClipUrl(S.plot,P,z),S.layerClipId=O;for(Q in K._plots){S=K._plots[Q];ia=S.xaxis;ha=S.yaxis;X="M0,0";if(p(ia,Q)){O=a(ia,"left",ha,L);var fa=ia._offset-(O?H+O:0);O=a(ia,"right",ha,L);var na=
ia._offset+ia._length+(O?H+O:0);P=B(ia,ha,"bottom");U=B(ia,ha,"top");O=!ia._anchorAxis||Q!==ia._mainSubplot;!O||"allticks"!==ia.mirror&&"all"!==ia.mirror||(ia._linepositions[Q]=[P,U]);X=J(ia,C,v);O&&ia.showline&&("all"===ia.mirror||"allticks"===ia.mirror)&&(X+=C(P)+C(U));S.xlines.style("stroke-width",ia._lw+"px").call(f.stroke,ia.showline?ia.linecolor:"rgba(0,0,0,0)")}S.xlines.attr("d",X);X="M0,0";if(p(ha,Q)){O=a(ha,"bottom",ia,L);var sa=ha._offset+ha._length+(O?H:0);O=a(ha,"top",ia,L);var ua=ha._offset-
(O?H:0);P=B(ha,ia,"left");U=B(ha,ia,"right");O=!ha._anchorAxis||Q!==ha._mainSubplot;!O||"allticks"!==ha.mirror&&"all"!==ha.mirror||(ha._linepositions[Q]=[P,U]);X=J(ha,G,I);O&&ha.showline&&("all"===ha.mirror||"allticks"===ha.mirror)&&(X+=G(P)+G(U));S.ylines.style("stroke-width",ha._lw+"px").call(f.stroke,ha.showline?ha.linecolor:"rgba(0,0,0,0)")}S.ylines.attr("d",X)}u.makeClipPaths(z);return l.previousPromises(z)}function p(z,B){return(z.ticks||z.showline)&&(B===z._mainSubplot||"all"===z.mirror||"allticks"===
z.mirror)}function h(z,B,C){if(!C.showline||!C._lw)return!1;if("all"===C.mirror||"allticks"===C.mirror)return!0;var v=C._anchorAxis;if(!v)return!1;var G=w.FROM_BL[B];return C.side===B?v.domain[G]===z.domain[G]:C.mirror&&v.domain[1-G]===z.domain[1-G]}function a(z,B,C,v){if(h(z,B,C))return C._lw;for(var G=0;G<v.length;G++){var I=v[G];if(I._mainAxis===C._mainAxis&&h(z,B,I))return I._lw}return 0}var d=b("d3"),e=b("../registry"),l=b("../plots/plots"),k=b("../lib"),c=b("../lib/clear_gl_canvases"),f=b("../components/color"),
g=b("../components/drawing"),q=b("../components/titles"),t=b("../components/modebar"),u=b("../plots/cartesian/axes"),w=b("../constants/alignment");y=b("../plots/cartesian/constraints");var x=y.enforce,E=y.clean,F=b("../plots/cartesian/autorange").doAutoRange;D.layoutStyles=function(z){return k.syncOrAsync([l.doAutoMargin,m],z)};D.drawMainTitle=function(z){var B=z._fullLayout;var C=B.title;var v="middle";k.isRightAnchor(C)?v="end":k.isLeftAnchor(C)&&(v="start");C=v;v=B.title;var G="0em";k.isTopAnchor(v)?
G=w.CAP_SHIFT+"em":k.isMiddleAnchor(v)&&(G=w.MID_SHIFT+"em");v=G;G=q.draw;var I=B._dfltTitle.plot;a:{var J=B.title;var K=B._size,N=0;"start"===C?N=J.pad.l:"end"===C&&(N=-J.pad.r);switch(J.xref){case "paper":J=K.l+K.w*J.x+N;break a;default:J=B.width*J.x+N}}a:{K=B.title;N=B._size;var H=0;"0em"!==v&&v?v===w.CAP_SHIFT+"em"&&(H=K.pad.t):H=-K.pad.b;if("auto"===K.y)K=N.t/2;else switch(K.yref){case "paper":K=N.t+N.h-N.h*K.y+H;break a;default:K=B.height-B.height*K.y+H}}G.call(q,z,"gtitle",{propContainer:B,
propName:"title.text",placeholder:I,attributes:{x:J,y:K,"text-anchor":C,dy:v}})};D.doTraceStyle=function(z){var B=z.calcdata,C=[],v;for(v=0;v<B.length;v++){var G=B[v],I=G[0]||{},J=I.trace||{},K=J._module||{},N=K.arraysToCalcdata;N&&N(G,J);(G=K.editStyle)&&C.push({fn:G,cd0:I})}if(C.length){for(v=0;v<C.length;v++)B=C[v],B.fn(z,B.cd0);c(z);D.redrawReglTraces(z)}l.style(z);e.getComponentMethod("legend","draw")(z);return l.previousPromises(z)};D.doColorBars=function(z){e.getComponentMethod("colorbar",
"draw")(z);return l.previousPromises(z)};D.layoutReplot=function(z){var B=z.layout;z.layout=void 0;return e.call("plot",z,"",B)};D.doLegend=function(z){e.getComponentMethod("legend","draw")(z);return l.previousPromises(z)};D.doTicksRelayout=function(z){u.draw(z,"redraw");z._fullLayout._hasOnlyLargeSploms&&(e.subplotsRegistry.splom.updateGrid(z),c(z),D.redrawReglTraces(z));D.drawMainTitle(z);return l.previousPromises(z)};D.doModeBar=function(z){var B=z._fullLayout;t.manage(z);for(var C=0;C<B._basePlotModules.length;C++){var v=
B._basePlotModules[C].updateFx;v&&v(z)}return l.previousPromises(z)};D.doCamera=function(z){z=z._fullLayout;for(var B=z._subplots.gl3d,C=0;C<B.length;C++){var v=z[B[C]];v._scene.setViewport(v)}};D.drawData=function(z){var B=z._fullLayout;c(z);for(var C=B._basePlotModules,v=0;v<C.length;v++)C[v].plot(z);D.redrawReglTraces(z);l.style(z);e.getComponentMethod("shapes","draw")(z);e.getComponentMethod("annotations","draw")(z);e.getComponentMethod("images","draw")(z);B._replotting=!1;return l.previousPromises(z)};
D.redrawReglTraces=function(z){var B=z._fullLayout;if(B._has("regl")){var C=z._fullData;z=[];var v=[],G;B._hasOnlyLargeSploms&&B._splomGrid.draw();for(G=0;G<C.length;G++){var I=C[G];!0===I.visible&&0!==I._length&&("splom"===I.type?B._splomScenes[I.uid].draw():"scattergl"===I.type?k.pushUnique(z,I.xaxis+I.yaxis):"scatterpolargl"===I.type&&k.pushUnique(v,I.subplot))}for(G=0;G<z.length;G++)C=B._plots[z[G]],C._scene&&C._scene.draw();for(G=0;G<v.length;G++)C=B[v[G]]._subplot,C._scene&&C._scene.draw()}};
D.doAutoRangeAndConstraints=function(z){var B=z._fullLayout,C=u.list(z,"",!0);B=B._axisMatchGroups||[];for(var v={},G,I=0;I<C.length;I++)G=C[I],E(z,G),F(z,G),v[G._id]=1;x(z);C=0;a:for(;C<B.length;C++){I=B[C];var J=null,K;for(K in I)if(G=u.getFromId(z,K),v[G._id]){if(!1===G.autorange)continue a;G=k.simpleMap(G.range,G.r2l);J?J[0]<J[1]?(J[0]=Math.min(J[0],G[0]),J[1]=Math.max(J[1],G[1])):(J[0]=Math.max(J[0],G[0]),J[1]=Math.min(J[1],G[1])):J=G}for(K in I)G=u.getFromId(z,K),G.range=k.simpleMap(J,G.l2r),
G._input.range=G.range.slice(),G.setScale()}};D.finalDraw=function(z){e.getComponentMethod("rangeslider","draw")(z);e.getComponentMethod("rangeselector","draw")(z)};D.drawMarginPushers=function(z){e.getComponentMethod("legend","draw")(z);e.getComponentMethod("rangeselector","draw")(z);e.getComponentMethod("sliders","draw")(z);e.getComponentMethod("updatemenus","draw")(z);e.getComponentMethod("colorbar","draw")(z)}},{"../components/color":615,"../components/drawing":637,"../components/modebar":675,
"../components/titles":710,"../constants/alignment":717,"../lib":749,"../lib/clear_gl_canvases":733,"../plots/cartesian/autorange":796,"../plots/cartesian/axes":797,"../plots/cartesian/constraints":804,"../plots/plots":860,"../registry":880,d3:169}],789:[function(b,y,D){function n(u,w){function x(I,J,K){if(k(J)&&k(I))n(I,J);else if(Array.isArray(J)&&Array.isArray(I)){I=q.arrayTemplater({_template:u},K);for(z=0;z<J.length;z++){K=J[z];var N=I.newItem(K)._template;N&&n(N,K)}I=I.defaultItems();for(z=
0;z<I.length;z++)J.push(I[z]._template);for(z=0;z<J.length;z++)delete J[z].templateitemname}}u=l.extendDeep({},u);var E=Object.keys(u).sort(),F,z;for(F=0;F<E.length;F++){var B=E[F],C=u[B];B in w?x(C,w[B],B):w[B]=C;if(m(B)===B)for(var v in w){var G=m(v);v===G||G!==B||v in u||x(C,w[v],B)}}}function m(u){return u.replace(/[0-9]+$/,"")}function p(u,w,x,E,F){var z=F&&x(F),B;for(B in u){var C=u[B],v=d(u,B,E),G=d(u,B,F),I=x(G);if(!I){var J=m(B);J!==B&&(G=d(u,J,F),I=x(G))}if(!(z&&z===I||!I||I._noTemplating||
"data_array"===I.valType||I.arrayOk&&Array.isArray(C)))if(!I.valType&&k(C))p(C,w,x,v,G);else if(I._isLinkedToArray&&Array.isArray(C)){var K=!1;I=0;J={};for(var N=0;N<C.length;N++){var H=C[N];if(k(H)){var L=H.name;L?J[L]||(p(H,w,x,d(C,I,v),d(C,I,G)),I++,J[L]=1):K||(K=q.arrayDefaultKey(B),K=d(u,K,E),L=d(C,I,v),p(H,w,x,L,d(C,I,G)),H=l.nestedProperty(w,L),l.nestedProperty(w,K).set(H.get()),H.set(null),K=!0)}}}else l.nestedProperty(w,v).set(C)}}function h(u,w){return c.getLayoutValObject(u,l.nestedProperty({},
w).parts)}function a(u,w){return c.getTraceValObject(u,l.nestedProperty({},w).parts)}function d(u,w,x){return x?Array.isArray(u)?x+"["+w+"]":x+"."+w:w}function e(u){switch(u.code){case "data":var w="The template has no key data.";break;case "layout":w="The template has no key layout.";break;case "missing":w=u.path?"There are no templates for item "+u.path+" with name "+u.templateitemname:"There are no templates for trace "+u.index+", of type "+u.traceType+".";break;case "unused":w=u.path?"The template item at "+
u.path+" was not used in constructing the plot.":u.dataCount?"Some of the templates of type "+u.traceType+" were not used. The template has "+u.templateCount+" traces, the data only has "+u.dataCount+" of this type.":"The template has "+u.templateCount+" traces of type "+u.traceType+" but there are none in the data.";break;case "reused":w="Some of the templates of type "+u.traceType+" were used more than once. The template has "+u.templateCount+" traces, the data has "+u.dataCount+" of this type."}u.msg=
w;return u}var l=b("../lib"),k=l.isPlainObject,c=b("./plot_schema"),f=b("../plots/plots"),g=b("../plots/attributes"),q=b("./plot_template"),t=b("./plot_config").dfltConfig;D.makeTemplate=function(u){u=l.isPlainObject(u)?u:l.getGraphDiv(u);u=l.extendDeep({_context:t},{data:u.data,layout:u.layout});f.supplyDefaults(u);var w=u.data||[],x=u.layout||{};x._basePlotModules=u._fullLayout._basePlotModules;x._modules=u._fullLayout._modules;var E={data:{},layout:{}};w.forEach(function(v){var G={};p(v,G,a.bind(null,
v));v=l.coerce(v,{},g,"type");var I=E.data[v];I||(I=E.data[v]=[]);I.push(G)});p(x,E.layout,h.bind(null,x));delete E.layout.template;u=x.template;if(k(u)){w=u.layout;var F;k(w)&&n(w,E.layout);var z=u.data;if(k(z)){for(F in E.data)if(w=z[F],Array.isArray(w)){var B=E.data[F];var C=B.length;x=w.length;for(u=0;u<C;u++)n(w[u%x],B[u]);for(u=C;u<x;u++)B.push(l.extendDeep({},w[u]))}for(F in z)F in E.data||(E.data[F]=l.extendDeep([],z[F]))}}return E};D.validateTemplate=function(u,w){function x(K,N){for(var H in K)if("_"!==
H.charAt(0)&&k(K[H])){var L=m(H),P=[],Q;for(Q=0;Q<N.length;Q++)P.push(d(K,H,N[Q])),L!==H&&P.push(d(K,L,N[Q]));for(Q=0;Q<P.length;Q++)G[P[Q]]=1;x(K[H],P)}}function E(K,N){for(var H in K)if(-1===H.indexOf("defaults")&&k(K[H])){var L=d(K,H,N);G[L]?E(K[H],L):v.push({code:"unused",path:L})}}function F(K,N){for(var H in K)if("_"!==H.charAt(0)){var L=K[H],P=d(K,H,N);if(k(L))Array.isArray(K)&&!1===L._template&&L.templateitemname&&v.push({code:"missing",path:P,templateitemname:L.templateitemname}),F(L,P);
else{var Q;if(Q=Array.isArray(L))a:{Q=L;for(var S=0;S<Q.length;S++)if(k(Q[S])){Q=!0;break a}Q=void 0}Q&&F(L,P)}}}var z=l.extendDeep({},{_context:t,data:u.data,layout:u.layout}),B=z.layout||{};k(w)||(w=B.template||{});var C=w.layout;u=w.data;var v=[];z.layout=B;z.layout.template=w;f.supplyDefaults(z);w=z._fullLayout;z=z._fullData;var G={};k(C)?(x(w,["layout"]),E(C,"layout")):v.push({code:"layout"});if(k(u)){C={};for(B=0;B<z.length;B++){var I=z[B];var J=I.type;C[J]=(C[J]||0)+1;I._fullInput._template||
v.push({code:"missing",index:I._fullInput.index,traceType:J})}for(J in u)B=u[J].length,I=C[J]||0,B>I?v.push({code:"unused",traceType:J,templateCount:B,dataCount:I}):I>B&&v.push({code:"reused",traceType:J,templateCount:B,dataCount:I})}else v.push({code:"data"});F({data:z,layout:w},"");if(v.length)return v.map(e)}},{"../lib":749,"../plots/attributes":794,"../plots/plots":860,"./plot_config":785,"./plot_schema":786,"./plot_template":787}],790:[function(b,y,D){var n=b("fast-isnumeric"),m=b("./plot_api"),
p=b("../plots/plots"),h=b("../lib"),a=b("../snapshot/helpers"),d=b("../snapshot/tosvg"),e=b("../snapshot/svgtoimg"),l=b("../version").version,k={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};y.exports=function(c,f){function g(L){return!(L in f)||h.validate(f[L],k[L])}function q(L,
P){return h.coerce(f,F,k,L,P)}function t(){return new Promise(function(L){setTimeout(L,a.getDelay(J._fullLayout))})}function u(){return new Promise(function(L,P){var Q=d(J,z,v),S=J._fullLayout.width,O=J._fullLayout.height;if("full-json"===z)return P=p.graphJson(J,!1,"keepdata","object",!0,!0),P.version=l,P=JSON.stringify(P),m.purge(J),document.body.removeChild(J),I?L(P):L(a.encodeJSON(P));m.purge(J);document.body.removeChild(J);if("svg"===z)return I?L(Q):L(a.encodeSVG(Q));var U=document.createElement("canvas");
U.id=h.randstr();e({format:z,width:S,height:O,scale:v,canvas:U,svg:Q,promise:!0}).then(L).catch(P)})}f=f||{};if(h.isPlainObject(c)){var w=c.data||[];var x=c.layout||{};var E=c.config||{};c={}}else c=h.getGraphDiv(c),w=h.extendDeep([],c.data),x=h.extendDeep({},c.layout),E=c._context,c=c._fullLayout||{};if(!g("width")&&null!==f.width||!g("height")&&null!==f.height)throw Error("Height and width should be pixel values.");if(!g("format"))throw Error("Image format is not jpeg, png, svg or webp.");var F=
{},z=q("format"),B=q("width"),C=q("height"),v=q("scale"),G=q("setBackground"),I=q("imageDataOnly"),J=document.createElement("div");J.style.position="absolute";J.style.left="-5000px";document.body.appendChild(J);var K=h.extendFlat({},x);B?K.width=B:null===f.width&&n(c.width)&&(K.width=c.width);C?K.height=C:null===f.height&&n(c.height)&&(K.height=c.height);var N=h.extendFlat({},E,{_exportedPlot:!0,staticPlot:!0,setBackground:G}),H=a.getRedrawFunc(J);return new Promise(function(L,P){m.plot(J,w,K,N).then(H).then(t).then(u).then(function(Q){Q=
I?Q.replace(a.IMAGE_URL_PREFIX,""):Q;L(Q)}).catch(function(Q){P(Q)})})}},{"../lib":749,"../plots/plots":860,"../snapshot/helpers":884,"../snapshot/svgtoimg":886,"../snapshot/tosvg":888,"../version":1337,"./plot_api":784,"fast-isnumeric":241}],791:[function(b,y,D){function n(t,u,w,x,E,F){F=F||[];for(var z=Object.keys(t),B=0;B<z.length;B++){var C=z[B];if("transforms"!==C){var v=F.slice();v.push(C);var G=t[C],I=u[C];var J=w;if(C in J)var K=J[C];else K=h(C),K=J[K.keyMinusId];var N=(K||{}).valType,H="info_array"===
N,L="colorscale"===N;J=(K||{}).items;var P=w;var Q=C,S=h(Q),O=S.keyMinusId;S=S.id;P=O in P&&P[O]._isSubplotObj&&S?!0:Q in P;if(P)if(k(G)&&k(I)&&"any"!==N)n(G,I,K,x,E,v);else if(H&&c(G))if(G.length>I.length&&x.push(p("unused",E,v.concat(I.length))),C=I.length,(N=Array.isArray(J))&&(C=Math.min(C,J.length)),2===K.dimensions)for(H=0;H<C;H++)if(c(G[H]))for(G[H].length>I[H].length&&x.push(p("unused",E,v.concat(H,I[H].length))),O=I[H].length,K=0;K<(N?Math.min(O,J[H].length):O);K++)L=N?J[H][K]:J,P=G[H][K],
Q=I[H][K],a.validate(P,L)?Q!==P&&Q!==+P&&x.push(p("dynamic",E,v.concat(H,K),P,Q)):x.push(p("value",E,v.concat(H,K),P));else x.push(p("array",E,v.concat(H),G[H]));else for(H=0;H<C;H++)L=N?J[H]:J,P=G[H],Q=I[H],a.validate(P,L)?Q!==P&&Q!==+P&&x.push(p("dynamic",E,v.concat(H),P,Q)):x.push(p("value",E,v.concat(H),P));else if(K.items&&!H&&c(G)){J=J[Object.keys(J)[0]];C=[];for(K=0;K<I.length;K++)H=I[K]._index||K,N=v.slice(),N.push(H),k(G[H])&&k(I[K])&&(C.push(H),H=G[H],L=I[K],k(H)&&!1!==H.visible&&!1===L.visible?
x.push(p("invisible",E,N)):n(H,L,J,x,E,N));for(K=0;K<G.length;K++)N=v.slice(),N.push(K),k(G[K])?-1===C.indexOf(K)&&x.push(p("unused",E,N)):x.push(p("object",E,N,G[K]))}else!k(G)&&k(I)?x.push(p("object",E,v,G)):f(G)||!f(I)||H||L?C in u?a.validate(G,K)?"enumerated"===K.valType&&(K.coerceNumber&&G!==+I||G!==I)&&x.push(p("dynamic",E,v,G,I)):x.push(p("value",E,v,G)):x.push(p("unused",E,v,G)):x.push(p("array",E,v,G));else x.push(p("schema",E,v))}}return x}function m(t){return c(t)?"In data trace "+t[1]+
", ":"In "+t+", "}function p(t,u,w,x,E){w=w||"";if(c(u)){var F=u[0];var z=u[1]}else F=u,z=null;var B=w;if(c(B)){for(var C="",v=0;v<B.length;v++){var G=B[v];C="number"===typeof G?C.substr(0,C.length-1)+"["+G+"]":C+G;v<B.length-1&&(C+=".")}B=C}else B=String(B);u=g[t](u,B,x,E);a.log(u);return{code:t,container:F,trace:z,path:w,astr:B,msg:u}}function h(t){t=t.match(q);return{keyMinusId:t&&t[1],id:t&&t[2]}}var a=b("../lib"),d=b("../plots/plots"),e=b("./plot_schema"),l=b("./plot_config").dfltConfig,k=a.isPlainObject,
c=Array.isArray,f=a.isArrayOrTypedArray;y.exports=function(t,u){void 0===t&&(t=[]);void 0===u&&(u={});var w=e.get(),x=[],E={_context:a.extendFlat({},l)};if(c(t)){E.data=a.extendDeep([],t);var F=t}else E.data=[],F=[],x.push(p("array","data"));if(k(u)){E.layout=a.extendDeep({},u);var z=u}else E.layout={},z={},1<arguments.length&&x.push(p("object","layout"));d.supplyDefaults(E);for(var B=E._fullData,C=F.length,v=0;v<C;v++){var G=F[v],I=["data",v];if(k(G)){var J=B[v],K=J.type,N=w.traces[K].attributes;
N.type={valType:"enumerated",values:[K]};!1===J.visible&&!1!==G.visible&&x.push(p("invisible",I));n(G,J,N,x,I);G=G.transforms;J=J.transforms;if(G)for(c(G)||x.push(p("array",I,["transforms"])),I.push("transforms"),K=0;K<G.length;K++){N=["transforms",K];var H=G[K].type;k(G[K])?(H=w.transforms[H]?w.transforms[H].attributes:{},H.type={valType:"enumerated",values:Object.keys(w.transforms)},n(G[K],J[K],H,x,I,N)):x.push(p("object",I,N))}}else x.push(p("object",I))}E=E._fullLayout;F=w.layout.layoutAttributes;
for(C=0;C<B.length;C++)v=B[C],I=w.traces[v.type],(G=I.layoutAttributes)&&(v.subplot?a.extendFlat(F[I.attributes.subplot.dflt],G):a.extendFlat(F,G));n(z,E,F,x,"layout");return 0===x.length?void 0:x};var g={object:function(t,u){return("layout"===t&&""===u?"The layout argument":"data"===t[0]&&""===u?"Trace "+t[1]+" in the data argument":m(t)+"key "+u)+" must be linked to an object container"},array:function(t,u){return("data"===t?"The data argument":m(t)+"key "+u)+" must be linked to an array container"},
schema:function(t,u){return m(t)+"key "+u+" is not part of the schema"},unused:function(t,u,w){w=k(w)?"container":"key";return m(t)+w+" "+u+" did not get coerced"},dynamic:function(t,u,w,x){return[m(t)+"key",u,"(set to '"+w+"')","got reset to","'"+x+"'","during defaults."].join(" ")},invisible:function(t,u){return(u?m(t)+"item "+u:"Trace "+t[1])+" got defaulted to be not visible"},value:function(t,u,w){return[m(t)+"key "+u,"is set to an invalid value ("+w+")"].join(" ")}},q=a.counterRegex("([a-z]+)")},
{"../lib":749,"../plots/plots":860,"./plot_config":785,"./plot_schema":786}],792:[function(b,y,D){y.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",
values:"linear quad cubic sin exp circle elastic back bounce linear-in quad-in cubic-in sin-in exp-in circle-in elastic-in back-in bounce-in linear-out quad-out cubic-out sin-out exp-out circle-out elastic-out back-out bounce-out linear-in-out quad-in-out cubic-in-out sin-in-out exp-in-out circle-in-out elastic-in-out back-in-out bounce-in-out".split(" "),editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],793:[function(b,
y,D){var n=b("../lib"),m=b("../plot_api/plot_template");y.exports=function(p,h,a){var d=a.name,e=a.inclusionAttr||"visible",l=h[d],k=n.isArrayOrTypedArray(p[d])?p[d]:[];p=h[d]=[];var c=m.arrayTemplater(h,d,e);for(d=0;d<k.length;d++){var f=k[d];if(n.isPlainObject(f))var g=c.newItem(f);else g=c.newItem({}),g[e]=!1;g._index=d;!1!==g[e]&&a.handleItemDefaults(f,g,h,a);p.push(g)}e=c.defaultItems();for(d=0;d<e.length;d++)g=e[d],g._index=p.length,a.handleItemDefaults({},g,h,a,{}),p.push(g);if(n.isArrayOrTypedArray(l))for(h=
Math.min(l.length,p.length),d=0;d<h;d++)n.relinkPrivateKeys(p[d],l[d]);return p}},{"../lib":749,"../plot_api/plot_template":787}],794:[function(b,y,D){b=b("../components/fx/attributes");y.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",
min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:b.hoverlabel,stream:{token:{valType:"string",
noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1E4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":646}],795:[function(b,y,D){y.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],796:[function(b,y,D){function n(g,q){function t(O,U){return Math.max(O,
E(U))}var u,w,x=[],E=m(q);x=p(g,q);var F=x.min,z=x.max;if(0===F.length||0===z.length)return k.simpleMap(q.range,q.r2l);x=F[0].val;var B=z[0].val;for(u=1;u<F.length&&x===B;u++)x=Math.min(x,F[u].val);for(u=1;u<z.length&&x===B;u++)B=Math.max(B,z[u].val);g=!1;q.range&&(g=k.simpleMap(q.range,q.r2l),g=g[1]<g[0]);"reversed"===q.autorange&&(g=!0,q.autorange=!0);var C=q.rangemode,v="tozero"===C,G="nonnegative"===C;C=q._length;var I=C/10,J=function(O,U){var X=0;if(q.rangebreaks)for(O=q.locateBreaks(O,U),U=
0;U<O.length;U++){var da=O[U];X+=da.max-da.min}return X},K=0;for(u=0;u<F.length;u++){var N=F[u];for(w=0;w<z.length;w++){var H=z[w];var L=H.val-N.val-J(N.val,H.val);if(0<L){var P=C-E(N)-E(H);if(P>I){if(L/P>K){var Q=N;var S=H;K=L/P}}else L/C>K&&(Q={val:N.val,pad:0},S={val:H.val,pad:0},K=L/C)}}}x===B?(N=x-1,H=x+1,v?0===x?x=[0,1]:(F=(0<x?z:F).reduce(t,0),F=x/(1-Math.min(.5,F/C)),x=0<x?[0,F]:[F,0]):x=G?[Math.max(0,N),Math.max(1,H)]:[N,H]):(v?(0<=Q.val&&(Q={val:0,pad:0}),0>=S.val&&(S={val:0,pad:0})):G&&
(0>Q.val-K*E(Q)&&(Q={val:0,pad:0}),0>=S.val&&(S={val:1,pad:0})),K=(S.val-Q.val-J(N.val,H.val))/(C-E(Q)-E(S)),x=[Q.val-K*E(Q),S.val+K*E(S)]);g&&x.reverse();return k.simpleMap(x,q.l2r||Number)}function m(g){var q=g._length/20;"domain"===g.constrain&&g._inputDomain&&(q*=(g._inputDomain[1]-g._inputDomain[0])/(g.domain[1]-g.domain[0]));return function(t){return t.pad+(t.extrapad?q:0)}}function p(g,q){function t(C,v){for(F=0;F<v.length;F++){var G=C[v[F]],I=(G._extremes||{})[u];if(!0===G.visible&&I){for(z=
0;z<I.min.length;z++)B=I.min[z],h(x,B.val,B.pad,{extrapad:B.extrapad},d);for(z=0;z<I.max.length;z++)B=I.max[z],h(E,B.val,B.pad,{extrapad:B.extrapad},e)}}}var u=q._id,w=g._fullLayout,x=[],E=[],F,z,B;t(g._fullData,q._traceIndices);t(w.annotations||[],q._annIndices||[]);t(w.shapes||[],q._shapeIndices||[]);return{min:x,max:E}}function h(g,q,t,u,w){var x=u.tozero;u=u.extrapad;for(var E=!0,F=0;F<g.length&&E;F++){var z=g[F];if(w(z.val,q)&&z.pad>=t&&(z.extrapad||!u)){E=!1;break}else w(q,z.val)&&z.pad<=t&&
(u||!z.extrapad)&&(g.splice(F,1),F--)}E&&(w=x&&0===q,g.push({val:q,pad:w?0:t,extrapad:w?!1:u}))}function a(g){return l(g)&&Math.abs(g)<c}function d(g,q){return g<=q}function e(g,q){return g>=q}var l=b("fast-isnumeric"),k=b("../../lib"),c=b("../../constants/numerical").FP_SAFE,f=b("../../registry");y.exports={getAutoRange:n,makePadFn:m,doAutoRange:function(g,q){q.setScale();if(q.autorange){q.range=n(g,q);q._r=q.range.slice();q._rl=k.simpleMap(q._r,q.r2l);var t=q._input,u={};u[q._attr+".range"]=q.range;
u[q._attr+".autorange"]=q.autorange;f.call("_storeDirectGUIEdit",g.layout,g._fullLayout._preGUI,u);t.range=q.range.slice();t.autorange=q.autorange}(t=q._anchorAxis)&&t.rangeslider&&((u=t.rangeslider[q._name])&&"auto"===u.rangemode&&(u.range=n(g,q)),t._input.rangeslider[q._name]=k.extendFlat({},u))},findExtremes:function(g,q,t){function u(ca){if(Array.isArray(ca))return v=!0,function(ha){return Math.max(Number(ca[ha]||0),0)};var ia=Math.max(Number(ca||0),0);return function(){return ia}}function w(ca){J=
q[ca];l(J)&&(H=P(ca),L=Q(ca),G?(K=g.c2l(J)-O(ca),N=g.c2l(J)+S(ca)):(U=J-O(ca),X=J+S(ca),C&&U<X/10&&(U=X/10),K=g.c2l(U),N=g.c2l(X)),B&&(K=Math.min(0,K),N=Math.max(0,N)),a(K)&&h(x,K,L,ea,d),a(N)&&h(E,N,H,ea,e))}t||(t={});g._m||g.setScale();var x=[],E=[],F=q.length,z=t.padded||!1,B=t.tozero&&("linear"===g.type||"-"===g.type),C="log"===g.type,v=!1,G=t.vpadLinearized||!1,I,J,K,N,H,L,P=u((0<g._m?t.ppadplus:t.ppadminus)||t.ppad||0),Q=u((0<g._m?t.ppadminus:t.ppadplus)||t.ppad||0),S=u(t.vpadplus||t.vpad),
O=u(t.vpadminus||t.vpad);if(!v){var U=Infinity;var X=-Infinity;if(C)for(I=0;I<F;I++){var da=q[I];da<U&&0<da&&(U=da);da>X&&da<c&&(X=da)}else for(I=0;I<F;I++)da=q[I],da<U&&da>-c&&(U=da),da>X&&da<c&&(X=da);q=[U,X];F=2}var ea={tozero:B,extrapad:z};z=Math.min(6,F);for(I=0;I<z;I++)w(I);for(I=F-1;I>=z;I--)w(I);return{min:x,max:E,opts:t}},concatExtremes:p}},{"../../constants/numerical":724,"../../lib":749,"../../registry":880,"fast-isnumeric":241}],797:[function(b,y,D){function n(Ba){var Ma=1E-4*(Ba[1]-Ba[0]);
return[Ba[0]-Ma,Ba[1]+Ma]}function m(Ba){return+Ba}function p(Ba){return String(Ba)}function h(Ba,Ma,$a,lb,Ra){function jb(Zb){return 2>(1+100*(Zb-Ba)/$a.dtick)%100}for(var Xa=0,pb=0,vb=0,zb=0,Jb=0;Jb<Ma.length;Jb++)0===Ma[Jb]%1?vb++:H(Ma[Jb])||zb++,jb(Ma[Jb])&&Xa++,jb(Ma[Jb]+$a.dtick/2)&&pb++;Ma=Ma.length-zb;vb===Ma&&"date"!==$a.type?1>$a.dtick?Ba=lb-.5*$a.dtick:(Ba-=.5,Ba+$a.dtick<lb&&(Ba+=$a.dtick)):pb<.1*Ma&&(Xa>.3*Ma||jb(lb)||jb(Ra))&&(Ra=$a.dtick/2,Ba+=Ba+Ra<lb?Ra:-Ra);return Ba}function a(Ba){var Ma=
Ba.tickvals,$a=Ba.ticktext,lb=Array(Ma.length),Ra=Q.simpleMap(Ba.range,Ba.r2l),jb=n(Ra);Ra=Math.min(jb[0],jb[1]);jb=Math.max(jb[0],jb[1]);var Xa=0;Array.isArray($a)||($a=[]);var pb="category"===Ba.type?Ba.d2l_noadd:Ba.d2l;"log"===Ba.type&&"L"!==String(Ba.dtick).charAt(0)&&(Ba.dtick="L"+Math.pow(10,Math.floor(Math.min(Ba.range[0],Ba.range[1]))-1));for(var vb=0;vb<Ma.length;vb++){var zb=pb(Ma[vb]);zb>Ra&&zb<jb&&(lb[Xa]=void 0===$a[vb]?Ta.tickText(Ba,zb):l(Ba,zb,String($a[vb])),Xa++)}Xa<Ma.length&&lb.splice(Xa,
Ma.length-Xa);Ba.rangebreaks&&(lb=lb.filter(function(Jb){return Ba.maskBreaks(Jb.x)!==Oa}));return lb}function d(Ba,Ma,$a){return Ma*Q.roundUp(Ba/Ma,$a)}function e(Ba){var Ma=Ba.dtick;Ba._tickexponent=0;H(Ma)||"string"===typeof Ma||(Ma=1);if("category"===Ba.type||"multicategory"===Ba.type)Ba._tickround=null;if("date"===Ba.type){var $a=Ba.r2l(Ba.tick0),lb=Ba.l2r($a).replace(/(^-|i)/g,""),Ra=lb.length;"M"===String(Ma).charAt(0)?10<Ra||"01-01"!==lb.substr(5)?Ba._tickround="d":Ba._tickround=0===+Ma.substr(1)%
12?"y":"m":Ma>=ma&&10>=Ra||Ma>=15*ma?Ba._tickround="d":Ma>=qa&&16>=Ra||Ma>=za?Ba._tickround="M":Ma>=Ca&&19>=Ra||Ma>=qa?Ba._tickround="S":(Ma=Ba.l2r($a+Ma).replace(/^-/,"").length,Ba._tickround=Math.max(Ra,Ma)-20,0>Ba._tickround&&(Ba._tickround=4))}else H(Ma)||"L"===Ma.charAt(0)?(Ra=Ba.range.map(Ba.r2d||Number),H(Ma)||(Ma=Number(Ma.substr(1))),Ba._tickround=2-Math.floor(Math.log(Ma)/Math.LN10+.01),Ma=Math.floor(Math.log(Math.max(Math.abs(Ra[0]),Math.abs(Ra[1])))/Math.LN10+.01),3<Math.abs(Ma)&&(!w(Ba.exponentformat)||
14<Ma||-15>Ma?Ba._tickexponent=Ma:Ba._tickexponent=3*Math.round((Ma-1)/3))):Ba._tickround=null}function l(Ba,Ma,$a){Ba=Ba.tickfont||{};return{x:Ma,dx:0,dy:0,text:$a||"",fontSize:Ba.size,font:Ba.family,fontColor:Ba.color}}function k(Ba,Ma,$a,lb){var Ra=Ba._tickround,jb=$a&&Ba.hoverformat||Ta.getTickFormat(Ba);lb&&(Ra=H(Ra)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Ra]);jb=Q.formatDate(Ma.x,jb,Ra,Ba._dateFormat,Ba.calendar,Ba._extraFormat);var Xa=jb.indexOf("\n");if(-1!==Xa){var pb=jb.substr(Xa+1);jb=jb.substr(0,
Xa)}lb&&("00:00:00"===jb||"00:00"===jb?(jb=pb,pb=""):8===jb.length&&(jb=jb.replace(/:00$/,"")));pb&&($a?jb="d"===Ra?jb+(", "+pb):pb+(jb?", "+jb:""):Ba._inCalcTicks&&pb===Ba._prevDateHead||(jb+="\x3cbr\x3e"+pb,Ba._prevDateHead=pb));Ma.text=jb}function c(Ba,Ma,$a,lb,Ra){var jb=Ba.dtick;$a=Ma.x;var Xa=Ba.tickformat,pb="string"===typeof jb&&jb.charAt(0);"never"===Ra&&(Ra="");lb&&"L"!==pb&&(jb="L3",pb="L");if(Xa||"L"===pb)Ma.text=x(Math.pow(10,$a),Ba,Ra,lb);else if(H(jb)||"D"===pb&&.1>Q.mod($a+.01,1))lb=
Math.round($a),Ra=Math.abs(lb),Xa=Ba.exponentformat,"power"===Xa||w(Xa)&&(14<lb||-15>lb)?(Ma.text=0===lb?1:1===lb?"10":"10\x3csup\x3e"+(1<lb?"":Ka)+Ra+"\x3c/sup\x3e",Ma.fontSize*=1.25):("e"===Xa||"E"===Xa)&&2<Ra?Ma.text="1"+Xa+(0<lb?"+":Ka)+Ra:(Ma.text=x(Math.pow(10,$a),Ba,"","fakehover"),"D1"===jb&&"y"===Ba._id.charAt(0)&&(Ma.dy-=Ma.fontSize/6));else if("D"===pb)Ma.text=String(Math.round(Math.pow(10,Q.mod($a,1)))),Ma.fontSize*=.75;else throw"unrecognized dtick "+String(jb);"D1"===Ba.dtick&&(jb=String(Ma.text).charAt(0),
"0"===jb||"1"===jb)&&("y"===Ba._id.charAt(0)?Ma.dx-=Ma.fontSize/4:(Ma.dy+=Ma.fontSize/2,Ma.dx+=(Ba.range[1]>Ba.range[0]?1:-1)*Ma.fontSize*(0>$a?.5:.25)))}function f(Ba,Ma){Ba=Ba._categories[Math.round(Ma.x)];void 0===Ba&&(Ba="");Ma.text=String(Ba)}function g(Ba,Ma,$a){var lb=Ba._categories[Math.round(Ma.x)]||[];Ba=void 0===lb[1]?"":String(lb[1]);lb=void 0===lb[0]?"":String(lb[0]);$a?Ma.text=lb+" - "+Ba:(Ma.text=Ba,Ma.text2=lb)}function q(Ba,Ma,$a,lb,Ra){"never"===Ra?Ra="":"all"===Ba.showexponent&&
1E-6>Math.abs(Ma.x/Ba.dtick)&&(Ra="hide");Ma.text=x(Ma.x,Ba,Ra,lb)}function t(Ba,Ma,$a,lb,Ra){"radians"!==Ba.thetaunit||$a?Ma.text=x(Ma.x,Ba,Ra,lb):($a=Ma.x/180,0===$a?Ma.text="0":($a=u($a),100<=$a[1]?Ma.text=x(Q.deg2rad(Ma.x),Ba,Ra,lb):(Ba=0>Ma.x,Ma.text=1===$a[1]?1===$a[0]?"":$a[0]+"":["\x3csup\x3e",$a[0],"\x3c/sup\x3e\x3csub\x3e",$a[1],"\x3c/sub\x3e"].join(""),Ba&&(Ma.text=Ka+Ma.text))))}function u(Ba){function Ma(Ra,jb){return 1E-6>=Math.abs(jb-0)?Ra:Ma(jb,Ra%jb)}var $a=function(Ra){for(var jb=
1;!(1E-6>=Math.abs(Math.round(Ra*jb)/jb-Ra));)jb*=10;return jb}(Ba);Ba*=$a;var lb=Math.abs(Ma(Ba,$a));return[Math.round(Ba/lb),Math.round($a/lb)]}function w(Ba){return"SI"===Ba||"B"===Ba}function x(Ba,Ma,$a,lb){var Ra=0>Ba,jb=Ma._tickround;$a=$a||Ma.exponentformat||"B";var Xa=Ma._tickexponent,pb=Ta.getTickFormat(Ma),vb=Ma.separatethousands;lb&&(Xa={exponentformat:$a,dtick:"none"===Ma.showexponent?Ma.dtick:H(Ba)?Math.abs(Ba)||1:1,range:"none"===Ma.showexponent?Ma.range.map(Ma.r2d):[0,Ba||1]},e(Xa),
jb=(Number(Xa._tickround)||0)+4,Xa=Xa._tickexponent,Ma.hoverformat&&(pb=Ma.hoverformat));if(pb)return Ma._numFormat(pb)(Ba).replace(/-/g,Ka);lb=Math.pow(10,-jb)/2;"none"===$a&&(Xa=0);Ba=Math.abs(Ba);if(Ba<lb)Ba="0",Ra=!1;else{Ba+=lb;Xa&&(Ba*=Math.pow(10,-Xa),jb+=Xa);if(0===jb)Ba=String(Math.floor(Ba));else if(0>jb)for(Ba=String(Math.round(Ba)),Ba=Ba.substr(0,Ba.length+jb);0>jb;jb++)Ba+="0";else Ba=String(Ba),(lb=Ba.indexOf(".")+1)&&(Ba=Ba.substr(0,lb+jb).replace(/\.?0+$/,""));Ba=Q.numSeparate(Ba,
Ma._separators,vb)}Xa&&"hide"!==$a&&(w($a)&&(14<Xa||-15>Xa)&&($a="power"),Ma=0>Xa?Ka+-Xa:"power"!==$a?"+"+Xa:String(Xa),"e"===$a||"E"===$a?Ba+=$a+Ma:"power"===$a?Ba+="10\x3csup\x3e"+Ma+"\x3c/sup\x3e":"B"===$a&&9===Xa?Ba+="B":w($a)&&(Ba+=eb[Xa/3+5]));return Ra?Ka+Ba:Ba}function E(Ba,Ma){var $a=[],lb=function(Ra,jb){jb=Ra.xbnd[jb];null!==jb&&$a.push(Q.extendFlat({},Ra,{x:jb}))};if(Ma.length){for(Ba=0;Ba<Ma.length;Ba++)lb(Ma[Ba],0);lb(Ma[Ba-1],1)}return $a}function F(Ba,Ma){var $a=[],lb=Ma.length&&
Ma[Ma.length-1].x<Ma[0].x,Ra=function(pb,vb){vb=pb.xbnd[vb];null!==vb&&$a.push(Q.extendFlat({},pb,{x:vb}))};if(Ba.showdividers&&Ma.length){for(Ba=0;Ba<Ma.length;Ba++){var jb=Ma[Ba];jb.text2!==Xa&&Ra(jb,lb?1:0);var Xa=jb.text2}Ra(Ma[Ba-1],lb?0:1)}return $a}function z(Ba,Ma){if(Ba._selections[Ma].size()){var $a=Infinity;var lb=-Infinity;var Ra=Infinity;var jb=-Infinity;Ba._selections[Ma].each(function(){var Xa=I(this);Xa=X.bBox(Xa.node().parentNode);$a=Math.min($a,Xa.top);lb=Math.max(lb,Xa.bottom);
Ra=Math.min(Ra,Xa.left);jb=Math.max(jb,Xa.right)})}else jb=Ra=lb=$a=0;return{top:$a,bottom:lb,left:Ra,right:jb,height:lb-$a,width:jb-Ra}}function B(Ba){return[Ba.text,Ba.x,Ba.axInfo,Ba.font,Ba.fontSize,Ba.fontColor].join("_")}function C(Ba){var Ma=Ba.title.font.size,$a=(Ba.title.text.match(S.BR_TAG_ALL)||[]).length;return Ba.title.hasOwnProperty("standoff")?$a?Ma*(mb+$a*tb):Ma*mb:$a?Ma*($a+1)*tb:Ma}function v(Ba,Ma){Ma=Ba.l2p(Ma);return 1<Ma&&Ma<Ba._length-1}function G(Ba,Ma,$a,lb){function Ra(Jb){function Zb(ed){return"number"===
typeof ed&&Math.abs(ed-zb)<pc}if(!Jb.showline||!Jb.linewidth)return!1;var pc=Math.max((Jb.linewidth+Ma.zerolinewidth)/2,1);if(Zb(Jb._mainLinePosition)||Zb(Jb._mainMirrorPosition))return!0;Jb=Jb._linepositions||{};for(var Ac in Jb)if(Zb(Jb[Ac][0])||Zb(Jb[Ac][1]))return!0}var jb=$a._mainAxis;if(jb){var Xa=Ba._fullLayout,pb=Ma._id.charAt(0),vb=Ta.counterLetter(Ma._id),zb=Ma._offset+(Math.abs(lb[0])<Math.abs(lb[1])===("x"===pb)?0:Ma._length);lb=Xa._plots[$a._mainSubplot];if(!(lb.mainplotinfo||lb).overlays.length)return Ra($a,
zb);Ba=Ta.list(Ba,vb);for($a=0;$a<Ba.length;$a++)if(vb=Ba[$a],vb._mainAxis===jb&&Ra(vb,zb))return!0}}function I(Ba){Ba=N.select(Ba);var Ma=Ba.select(".text-math-group");return Ma.empty()?Ba.select("text"):Ma}function J(Ba){return Ba._id+".automargin"}function K(Ba,Ma){for(var $a=0;$a<Ma.length;$a++)-1===Ba.indexOf(Ma[$a])&&Ba.push(Ma[$a])}var N=b("d3"),H=b("fast-isnumeric"),L=b("../../plots/plots"),P=b("../../registry"),Q=b("../../lib"),S=b("../../lib/svg_text_utils"),O=b("../../components/titles"),
U=b("../../components/color"),X=b("../../components/drawing"),da=b("./layout_attributes"),ea=b("./clean_ticks");D=b("../../constants/numerical");var ca=D.ONEMAXYEAR,ia=D.ONEAVGYEAR,ha=D.ONEMINYEAR,fa=D.ONEMAXQUARTER,na=D.ONEAVGQUARTER,sa=D.ONEMINQUARTER,ua=D.ONEMAXMONTH,ta=D.ONEAVGMONTH,oa=D.ONEMINMONTH,va=D.ONEWEEK,ma=D.ONEDAY,pa=ma/2,za=D.ONEHOUR,qa=D.ONEMIN,Ca=D.ONESEC,Ka=D.MINUS_SIGN,Oa=D.BADNUM;D=b("../../constants/alignment");var kb=D.MID_SHIFT,mb=D.CAP_SHIFT,tb=D.LINE_SPACING,nb=D.OPPOSITE_SIDE,
Ta=y.exports={};Ta.setConvert=b("./set_convert");var fb=b("./axis_autotype"),ab=b("./axis_ids");Ta.id2name=ab.id2name;Ta.name2id=ab.name2id;Ta.cleanId=ab.cleanId;Ta.list=ab.list;Ta.listIds=ab.listIds;Ta.getFromId=ab.getFromId;Ta.getFromTrace=ab.getFromTrace;b=b("./autorange");Ta.getAutoRange=b.getAutoRange;Ta.findExtremes=b.findExtremes;Ta.coerceRef=function(Ba,Ma,$a,lb,Ra,jb){var Xa=lb.charAt(lb.length-1);$a=$a._fullLayout._subplots[Xa+"axis"];lb+="ref";Xa={};Ra||(Ra=$a[0]||jb);jb||(jb=Ra);Xa[lb]=
{valType:"enumerated",values:$a.concat(jb?[jb]:[]),dflt:Ra};return Q.coerce(Ba,Ma,Xa,lb)};Ta.coercePosition=function(Ba,Ma,$a,lb,Ra,jb){"paper"===lb||"pixel"===lb?(Ma=Q.ensureNumber,$a=$a(Ra,jb)):(Ma=Ta.getFromId(Ma,lb),jb=Ma.fraction2r(jb),$a=$a(Ra,jb),Ma=Ma.cleanPos);Ba[Ra]=Ma($a)};Ta.cleanPosition=function(Ba,Ma,$a){return("paper"===$a||"pixel"===$a?Q.ensureNumber:Ta.getFromId(Ma,$a).cleanPos)(Ba)};Ta.redrawComponents=function(Ba,Ma){function $a(Ra,jb,Xa,pb){Ra=P.getComponentMethod(Ra,jb);jb={};
for(var vb=0;vb<Ma.length;vb++)for(var zb=lb[Ta.id2name(Ma[vb])][Xa],Jb=0;Jb<zb.length;Jb++){var Zb=zb[Jb];if(!jb[Zb]&&(Ra(Ba,Zb),jb[Zb]=1,pb))return}}Ma=Ma?Ma:Ta.listIds(Ba);var lb=Ba._fullLayout;$a("annotations","drawOne","_annIndices");$a("shapes","drawOne","_shapeIndices");$a("images","draw","_imgIndices",!0)};var ra=Ta.getDataConversions=function(Ba,Ma,$a,lb){$a="x"===$a||"y"===$a||"z"===$a?$a:lb;if(Array.isArray($a)){if(Ba={type:fb(lb),_categories:[]},Ta.setConvert(Ba),"category"===Ba.type)for(Ma=
0;Ma<lb.length;Ma++)Ba.d2c(lb[Ma])}else Ba=Ta.getFromTrace(Ba,Ma,$a);return Ba?{d2c:Ba.d2c,c2d:Ba.c2d}:"ids"===$a?{d2c:p,c2d:p}:{d2c:m,c2d:m}};Ta.getDataToCoordFunc=function(Ba,Ma,$a,lb){return ra(Ba,Ma,$a,lb).d2c};Ta.counterLetter=function(Ba){Ba=Ba.charAt(0);if("x"===Ba)return"y";if("y"===Ba)return"x"};Ta.minDtick=function(Ba,Ma,$a,lb){if(-1!==["log","category","multicategory"].indexOf(Ba.type)||!lb)Ba._minDtick=0;else if(void 0===Ba._minDtick)Ba._minDtick=Ma,Ba._forceTick0=$a;else if(Ba._minDtick)if(2E-6>
(Ba._minDtick/Ma+1E-6)%1&&2E-6>(($a-Ba._forceTick0)/Ma%1+1.000001)%1)Ba._minDtick=Ma,Ba._forceTick0=$a;else if(2E-6<(Ma/Ba._minDtick+1E-6)%1||2E-6<(($a-Ba._forceTick0)/Ba._minDtick%1+1.000001)%1)Ba._minDtick=0};Ta.saveRangeInitial=function(Ba,Ma){Ba=Ta.list(Ba,"",!0);for(var $a=!1,lb=0;lb<Ba.length;lb++){var Ra=Ba[lb],jb=void 0===Ra._rangeInitial,Xa=jb||!(Ra.range[0]===Ra._rangeInitial[0]&&Ra.range[1]===Ra._rangeInitial[1]);if(jb&&!1===Ra.autorange||Ma&&Xa)Ra._rangeInitial=Ra.range.slice(),$a=!0}return $a};
Ta.saveShowSpikeInitial=function(Ba,Ma){for(var $a=Ta.list(Ba,"",!0),lb=!1,Ra="on",jb=0;jb<$a.length;jb++){var Xa=$a[jb],pb=void 0===Xa._showSpikeInitial,vb=pb||Xa.showspikes!==Xa._showspikes;if(pb||Ma&&vb)Xa._showSpikeInitial=Xa.showspikes,lb=!0;"on"!==Ra||Xa.showspikes||(Ra="off")}Ba._fullLayout._cartesianSpikesEnabled=Ra;return lb};Ta.autoBin=function(Ba,Ma,$a,lb,Ra,jb){var Xa=Q.aggNums(Math.min,null,Ba),pb=Q.aggNums(Math.max,null,Ba);if("category"===Ma.type||"multicategory"===Ma.type)return{start:Xa-
.5,end:pb+.5,size:Math.max(1,Math.round(jb)||1),_dataSpan:pb-Xa};Ra||(Ra=Ma.calendar);var vb="log"===Ma.type?{type:"linear",range:[Xa,pb]}:{type:Ma.type,range:Q.simpleMap([Xa,pb],Ma.c2r,0,Ra),calendar:Ra};Ta.setConvert(vb);(jb=jb&&ea.dtick(jb,vb.type))?(vb.dtick=jb,vb.tick0=ea.tick0(void 0,vb.type,Ra)):($a?lb=(pb-Xa)/$a:($a=Q.distinctVals(Ba),jb=Math.pow(10,Math.floor(Math.log($a.minDiff)/Math.LN10)),$a=jb*Q.roundUp($a.minDiff/jb,[.9,1.9,4.9,9.9],!0),lb=Math.max($a,2*Q.stdev(Ba)/Math.pow(Ba.length,
lb?.25:.4)),H(lb)||(lb=1)),Ta.autoTicks(vb,lb));lb=vb.dtick;$a=Ta.tickIncrement(Ta.tickFirst(vb),lb,"reverse",Ra);if("number"===typeof lb)$a=h($a,Ba,vb,Xa,pb),vb=1+Math.floor((pb-$a)/lb),Ba=$a+vb*lb;else{if("M"===vb.dtick.charAt(0))a:{vb=$a;Ba=Q.findExactDates(Ba,Ra);if(.8<Ba.exactDays&&($a=Number(lb.substr(1)),vb=.8<Ba.exactYears&&0===$a%12?Ta.tickIncrement(vb,"M6","reverse")+1.5*ma:.8<Ba.exactMonths?Ta.tickIncrement(vb,"M1","reverse")+15.5*ma:vb-pa,Ba=Ta.tickIncrement(vb,lb),Ba<=Xa)){$a=Ba;break a}$a=
vb}Ba=$a;for(vb=0;Ba<=pb;)Ba=Ta.tickIncrement(Ba,lb,!1,Ra),vb++}return{start:Ma.c2r($a,0,Ra),end:Ma.c2r(Ba,0,Ra),size:lb,_dataSpan:pb-Xa}};Ta.prepTicks=function(Ba,Ma){Ma=Q.simpleMap(Ba.range,Ba.r2l,void 0,void 0,Ma);if("auto"===Ba.tickmode||!Ba.dtick){var $a=Ba.nticks;$a||("category"===Ba.type||"multicategory"===Ba.type?($a=Ba.tickfont?1.2*(Ba.tickfont.size||12):15,$a=Ba._length/$a):($a="y"===Ba._id.charAt(0)?40:80,$a=Q.constrain(Ba._length/$a,4,9)+1),"radialaxis"===Ba._name&&($a*=2));"array"===
Ba.tickmode&&($a*=100);Ba._roughDTick=(Math.abs(Ma[1]-Ma[0])-(Ba._lBreaks||0))/$a;Ta.autoTicks(Ba,Ba._roughDTick);0<Ba._minDtick&&Ba.dtick<2*Ba._minDtick&&(Ba.dtick=Ba._minDtick,Ba.tick0=Ba.l2r(Ba._forceTick0))}Ba.tick0||(Ba.tick0="date"===Ba.type?"2000-01-01":0);"date"===Ba.type&&.1>Ba.dtick&&(Ba.dtick=.1);e(Ba)};Ta.calcTicks=function(Ba,Ma){Ta.prepTicks(Ba,Ma);var $a=Q.simpleMap(Ba.range,Ba.r2l,void 0,void 0,Ma);if("array"===Ba.tickmode)return a(Ba);Ba._tmin=Ta.tickFirst(Ba,Ma);Ma=n($a);var lb=
Ma[1],Ra=$a[1]<$a[0];if(Ba._tmin<Ma[0]!==Ra)return[];if("category"===Ba.type||"multicategory"===Ba.type)lb=Ra?Math.max(-.5,lb):Math.min(Ba._categories.length-.5,lb);var jb="log"===Ba.type&&!(H(Ba.dtick)||"L"===Ba.dtick.charAt(0)),Xa=null,pb=Math.max(1E3,Ba._length||0);Ma=[];for(var vb=Ba._tmin;(Ra?vb>=lb:vb<=lb)&&!(Ma.length>pb||vb===Xa);vb=Ta.tickIncrement(vb,Ba.dtick,Ra,Ba.calendar)){Xa=vb;var zb=!1;jb&&vb!==(vb|0)&&(zb=!0);Ma.push({minor:zb,value:vb})}(lb="period"===Ba.ticklabelmode)&&Ma.unshift({minor:!1,
value:Ta.tickIncrement(Ma[0].value,Ba.dtick,!Ra,Ba.caldendar)});if(Ba.rangebreaks&&(zb=Ma.length)){jb=0;"auto"===Ba.tickmode&&(jb=("y"===Ba._id.charAt(0)?2:6)*(Ba.tickfont?Ba.tickfont.size:12));Xa=[];pb=Ra?1:-1;vb=Ra?zb-1:0;for(Ra=Ra?0:zb-1;pb*Ra<=pb*vb;Ra+=pb){zb=Ma[Ra];if(Ba.maskBreaks(zb.value)===Oa){var Jb=zb;a:{var Zb=zb.value;for(var pc=Ba._rangebreaks.length,Ac=0;Ac<pc;Ac++){var ed=Ba._rangebreaks[Ac];if(Zb>=ed.min&&Zb<ed.max){Zb=ed.max;break a}}}Jb.value=Zb;if(Ba._rl&&(Ba._rl[0]===zb.value||
Ba._rl[1]===zb.value))continue}Jb=Ba.c2p(zb.value);if(Jb===Rc)Xa[Xa.length-1].value<zb.value&&(Xa[Xa.length-1]=zb);else if(void 0===Rc||Math.abs(Jb-Rc)>jb){var Rc=Jb;Xa.push(zb)}}Ma=Xa.reverse()}"angularaxis"===Ba._id&&360===Math.abs($a[1]-$a[0])&&Ma.pop();Ba._tmax=(Ma[Ma.length-1]||{}).value;Ba._prevDateHead="";Ba._inCalcTicks=!0;Rc=Math.min($a[0],$a[1]);$a=Math.max($a[0],$a[1]);var id;jb=Ta.getTickFormat(Ba);lb&&jb&&(/%[fLQsSMX]/.test(jb)||(/%[HI]/.test(jb)?id=za:/%p/.test(jb)?id=pa:/%[Aadejuwx]/.test(jb)?
id=ma:/%[UVW]/.test(jb)?id=va:/%[Bbm]/.test(jb)?id=ta:/%[q]/.test(jb)?id=na:/%[Yy]/.test(jb)&&(id=ia)));jb=[];for(Xa=0;Xa<Ma.length;Xa++)if(pb=Ta.tickText(Ba,Ma[Xa].value,!1,Ma[Xa].minor),!lb||Tc!==pb.text){var Tc=pb.text;jb.push(pb)}if(lb){Tc=!1;for(Xa=0;Xa<jb.length;Xa++){Ma=jb[Xa].x;Xa<jb.length-1?(lb=Xa,pb=Xa+1):(lb=0<Xa?Xa-1:Xa,pb=Xa);lb=jb[lb].x;pb=jb[pb].x;vb=Math.abs(pb-lb);zb=id||vb;Ra=0;zb>=ha?Ra=vb>=ha&&vb<=ca?vb:ia:id===na&&zb>=sa?Ra=vb>=sa&&vb<=fa?vb:na:zb>=oa?Ra=vb>=oa&&vb<=ua?vb:ta:
id===va&&zb>=va?Ra=va:zb>=ma?Ra=ma:id===pa&&zb>=pa?Ra=pa:id===za&&zb>=za&&(Ra=za);if(Ra&&Ba.rangebreaks){for(Zb=Jb=zb=0;42>Zb;Zb++)pc=Zb/42,Ba.maskBreaks(lb*(1-pc)+pb*pc)!==Oa&&(.5>pc?zb++:Jb++);Jb&&(Ra*=(zb+Jb)/42)}Ra<=vb&&(Ma+=Ra/2);jb[Xa].periodX=Ma;if(Ma>$a||Ma<Rc)jb[Xa].text=" ",Tc=!0}if(Tc)for(Xa=0;Xa<jb.length;Xa++)if(jb[Xa].periodX<=$a&&jb[Xa].periodX>=Rc){Ba._prevDateHead="";jb[Xa].text=Ta.tickText(Ba,jb[Xa].x).text;break}}Ba._inCalcTicks=!1;return jb};var Ea=[2,5,10],Ia=[1,2,3,6,12],Va=
[1,2,5,10,15,30],rb=[1,2,3,7,14],ib=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Na=[-.301,0,.301,.699,1],Za=[15,30,45,90,180];Ta.autoTicks=function(Ba,Ma){function $a(jb){return Math.pow(jb,Math.floor(Math.log(Ma)/Math.LN10))}if("date"===Ba.type){Ba.tick0=Q.dateTick0(Ba.calendar);var lb=2*Ma;if(lb>ia)Ma/=ia,lb=$a(10),Ba.dtick="M"+12*d(Ma,lb,Ea);else if(lb>ta)Ma/=ta,Ba.dtick="M"+d(Ma,1,Ia);else if(lb>ma){if(Ba.dtick=d(Ma,ma,Ba._hasDayOfWeekBreaks?[1,2,7,14]:rb),Ba.tick0=Q.dateTick0(Ba.calendar,
!0),lb=Ta.getTickFormat(Ba),/%[uVW]/.test(lb)){lb=Ba.tick0.length;var Ra=+Ba.tick0[lb-1];Ba.tick0=Ba.tick0.substring(0,lb-2)+String(Ra+1)}}else lb>za?Ba.dtick=d(Ma,za,Ia):lb>qa?Ba.dtick=d(Ma,qa,Va):lb>Ca?Ba.dtick=d(Ma,Ca,Va):(lb=$a(10),Ba.dtick=d(Ma,lb,Ea))}else"log"===Ba.type?(Ba.tick0=0,lb=Q.simpleMap(Ba.range,Ba.r2l),.7<Ma?Ba.dtick=Math.ceil(Ma):1>Math.abs(lb[1]-lb[0])?(Ma=Math.abs(Math.pow(10,lb[1])-Math.pow(10,lb[0]))/(1.5*Math.abs((lb[1]-lb[0])/Ma)),lb=$a(10),Ba.dtick="L"+d(Ma,lb,Ea)):Ba.dtick=
.3<Ma?"D2":"D1"):"category"===Ba.type||"multicategory"===Ba.type?(Ba.tick0=0,Ba.dtick=Math.ceil(Math.max(Ma,1))):"angularaxis"===Ba._id?(Ba.tick0=0,Ba.dtick=d(Ma,1,Za)):(Ba.tick0=0,lb=$a(10),Ba.dtick=d(Ma,lb,Ea));0===Ba.dtick&&(Ba.dtick=1);if(!H(Ba.dtick)&&"string"!==typeof Ba.dtick)throw lb=Ba.dtick,Ba.dtick=1,"ax.dtick error: "+String(lb);};Ta.tickIncrement=function(Ba,Ma,$a,lb){var Ra=$a?-1:1;if(H(Ma))return Q.increment(Ba,Ra*Ma);var jb=Ma.charAt(0),Xa=Ra*Number(Ma.substr(1));if("M"===jb)return Q.incrementMonth(Ba,
Xa,lb);if("L"===jb)return Math.log(Math.pow(10,Ba)+Xa)/Math.LN10;if("D"===jb)return Ma="D2"===Ma?Na:ib,Ba+=.01*Ra,$a=Q.roundUp(Q.mod(Ba,1),Ma,$a),Math.floor(Ba)+Math.log(N.round(Math.pow(10,$a),1))/Math.LN10;throw"unrecognized dtick "+String(Ma);};Ta.tickFirst=function(Ba,Ma){var $a=Ba.r2l||Number,lb=Q.simpleMap(Ba.range,$a,void 0,void 0,Ma),Ra=(Ma=lb[1]<lb[0])?Math.floor:Math.ceil;lb=n(lb)[0];var jb=Ba.dtick,Xa=$a(Ba.tick0);if(H(jb)){Ma=Ra((lb-Xa)/jb)*jb+Xa;if("category"===Ba.type||"multicategory"===
Ba.type)Ma=Q.constrain(Ma,0,Ba._categories.length-1);return Ma}$a=jb.charAt(0);var pb=Number(jb.substr(1));if("M"===$a){Ra=0;for(var vb,zb;10>Ra;){vb=Ta.tickIncrement(Xa,jb,Ma,Ba.calendar);if(0>=(vb-lb)*(Xa-lb))return Ma?Math.min(Xa,vb):Math.max(Xa,vb);vb=(lb-(Xa+vb)/2)/(vb-Xa);zb=$a+(Math.abs(Math.round(vb))||1)*pb;Xa=Ta.tickIncrement(Xa,zb,0>vb?!Ma:Ma,Ba.calendar);Ra++}Q.error("tickFirst did not converge",Ba);return Xa}if("L"===$a)return Math.log(Ra((Math.pow(10,lb)-Xa)/pb)*pb+Xa)/Math.LN10;if("D"===
$a)return Ba="D2"===jb?Na:ib,Ba=Q.roundUp(Q.mod(lb,1),Ba,Ma),Math.floor(lb)+Math.log(N.round(Math.pow(10,Ba),1))/Math.LN10;throw"unrecognized dtick "+String(jb);};Ta.tickText=function(Ba,Ma,$a,lb){function Ra(Zb){if(void 0===Zb)return!0;if($a)return"none"===Zb;var pc={first:Ba._tmin,last:Ba._tmax}[Zb];return"all"!==Zb&&Ma!==pc}var jb=l(Ba,Ma),Xa="array"===Ba.tickmode,pb=$a||Xa,vb=Ba.type,zb="category"===vb?Ba.d2l_noadd:Ba.d2l;if(Xa&&Array.isArray(Ba.ticktext)){Xa=Q.simpleMap(Ba.range,Ba.r2l);var Jb=
(Math.abs(Xa[1]-Xa[0])-(Ba._lBreaks||0))/1E4;for(Xa=0;Xa<Ba.ticktext.length&&!(Math.abs(Ma-zb(Ba.tickvals[Xa]))<Jb);Xa++);if(Xa<Ba.ticktext.length)return jb.text=String(Ba.ticktext[Xa]),jb}zb=$a?"never":"none"!==Ba.exponentformat&&Ra(Ba.showexponent)?"hide":"";"date"===vb?k(Ba,jb,$a,pb):"log"===vb?c(Ba,jb,$a,pb,zb):"category"===vb?f(Ba,jb):"multicategory"===vb?g(Ba,jb,$a):"angularaxis"===Ba._id?t(Ba,jb,$a,pb,zb):q(Ba,jb,$a,pb,zb);lb||(Ba.tickprefix&&!Ra(Ba.showtickprefix)&&(jb.text=Ba.tickprefix+
jb.text),Ba.ticksuffix&&!Ra(Ba.showticksuffix)&&(jb.text+=Ba.ticksuffix));if("boundaries"===Ba.tickson||Ba.showdividers)lb=function(Zb){var pc=Ba.l2p(Zb);return 0<=pc&&pc<=Ba._length?Zb:null},jb.xbnd=[lb(jb.x-.5),lb(jb.x+Ba.dtick-.5)];return jb};Ta.hoverLabelText=function(Ba,Ma,$a){if($a!==Oa&&$a!==Ma)return Ta.hoverLabelText(Ba,Ma)+" - "+Ta.hoverLabelText(Ba,$a);$a="log"===Ba.type&&0>=Ma;Ba=Ta.tickText(Ba,Ba.c2l($a?-Ma:Ma),"hover").text;return $a?0===Ma?"0":Ka+Ba:Ba};var eb="f p n  m  k M G T".split(" ");
Ta.getTickFormat=function(Ba){function Ma(vb){return"string"!==typeof vb?vb:Number(vb.replace("M",""))*ta}function $a(vb,zb){var Jb=["L","D"];if(typeof vb===typeof zb){if("number"===typeof vb)return vb-zb;var Zb=Jb.indexOf(vb.charAt(0));Jb=Jb.indexOf(zb.charAt(0));return Zb===Jb?Number(vb.replace(/(L|D)/g,""))-Number(zb.replace(/(L|D)/g,"")):Zb-Jb}return"number"===typeof vb?1:-1}function lb(vb,zb,Jb){Jb=Jb||function(pc){return pc};var Zb=zb[0];zb=zb[1];return(!Zb&&"number"!==typeof Zb||Jb(Zb)<=Jb(vb))&&
(!zb&&"number"!==typeof zb||Jb(zb)>=Jb(vb))}function Ra(vb,zb){var Jb=null===zb[0],Zb=null===zb[1],pc=0<=$a(vb,zb[0]);vb=0>=$a(vb,zb[1]);return(Jb||pc)&&(Zb||vb)}var jb;if(Ba.tickformatstops&&0<Ba.tickformatstops.length)switch(Ba.type){case "date":case "linear":for(jb=0;jb<Ba.tickformatstops.length;jb++){var Xa=Ba.tickformatstops[jb];if(Xa.enabled&&lb(Ba.dtick,Xa.dtickrange,Ma)){var pb=Xa;break}}break;case "log":for(jb=0;jb<Ba.tickformatstops.length;jb++)if(Xa=Ba.tickformatstops[jb],Xa.enabled&&Ra(Ba.dtick,
Xa.dtickrange)){pb=Xa;break}}return pb?pb.value:Ba.tickformat};Ta.getSubplots=function(Ba,Ma){Ba=Ba._fullLayout._subplots;Ba=Ba.cartesian.concat(Ba.gl2d||[]);Ma=Ma?Ta.findSubplotsWithAxis(Ba,Ma):Ba;Ma.sort(function($a,lb){$a=$a.substr(1).split("y");lb=lb.substr(1).split("y");return $a[0]===lb[0]?+$a[1]-+lb[1]:+$a[0]-+lb[0]});return Ma};Ta.findSubplotsWithAxis=function(Ba,Ma){Ma=new RegExp("x"===Ma._id.charAt(0)?"^"+Ma._id+"y":Ma._id+"$");for(var $a=[],lb=0;lb<Ba.length;lb++){var Ra=Ba[lb];Ma.test(Ra)&&
$a.push(Ra)}return $a};Ta.makeClipPaths=function(Ba){var Ma=Ba._fullLayout;if(!Ma._hasOnlyLargeSploms){var $a={_offset:0,_length:Ma.width,_id:""},lb={_offset:0,_length:Ma.height,_id:""},Ra=Ta.list(Ba,"x",!0);Ba=Ta.list(Ba,"y",!0);var jb=[],Xa,pb;for(Xa=0;Xa<Ra.length;Xa++)for(jb.push({x:Ra[Xa],y:lb}),pb=0;pb<Ba.length;pb++)0===Xa&&jb.push({x:$a,y:Ba[pb]}),jb.push({x:Ra[Xa],y:Ba[pb]});$a=Ma._clips.selectAll(".axesclip").data(jb,function(vb){return vb.x._id+vb.y._id});$a.enter().append("clipPath").classed("axesclip",
!0).attr("id",function(vb){return"clip"+Ma._uid+vb.x._id+vb.y._id}).append("rect");$a.exit().remove();$a.each(function(vb){N.select(this).select("rect").attr({x:vb.x._offset||0,y:vb.y._offset||0,width:vb.x._length||1,height:vb.y._length||1})})}};Ta.draw=function(Ba,Ma,$a){var lb=Ba._fullLayout;"redraw"===Ma&&lb._paper.selectAll("g.subplot").each(function(Ra){Ra=lb._plots[Ra[0]];var jb=Ra.xaxis,Xa=Ra.yaxis;Ra.xaxislayer.selectAll("."+jb._id+"tick").remove();Ra.yaxislayer.selectAll("."+Xa._id+"tick").remove();
Ra.xaxislayer.selectAll("."+jb._id+"tick2").remove();Ra.yaxislayer.selectAll("."+Xa._id+"tick2").remove();Ra.xaxislayer.selectAll("."+jb._id+"divider").remove();Ra.yaxislayer.selectAll("."+Xa._id+"divider").remove();Ra.gridlayer&&Ra.gridlayer.selectAll("path").remove();Ra.zerolinelayer&&Ra.zerolinelayer.selectAll("path").remove();lb._infolayer.select(".g-"+jb._id+"title").remove();lb._infolayer.select(".g-"+Xa._id+"title").remove()});Ma=Ma&&"redraw"!==Ma?Ma:Ta.listIds(Ba);return Q.syncOrAsync(Ma.map(function(Ra){return function(){if(Ra){var jb=
Ta.getFromId(Ba,Ra),Xa=Ta.drawOne(Ba,jb,$a);jb._r=jb.range.slice();jb._rl=Q.simpleMap(jb._r,jb.r2l);return Xa}}}))};Ta.drawOne=function(Ba,Ma,$a){function lb(ec){ec=Xa+(ec||"tick");ed[ec]||(ed[ec]=z(Ma,ec));return ed[ec]}$a=$a||{};var Ra;Ma.setScale();var jb=Ba._fullLayout,Xa=Ma._id,pb=Xa.charAt(0),vb=Ta.counterLetter(Xa),zb=jb._plots[Ma._mainSubplot];if(zb){var Jb=zb[pb+"axislayer"],Zb=Ma._mainLinePosition,pc=Ma._mainMirrorPosition,Ac=Ma._vals=Ta.calcTicks(Ma);zb=[Ma.mirror,Zb,pc].join("_");for(Ra=
0;Ra<Ac.length;Ra++)Ac[Ra].axInfo=zb;Ma._selections={};Ma._tickAngles&&(Ma._prevTickAngles=Ma._tickAngles);Ma._tickAngles={};Ma._depth=null;var ed={};if(Ma.visible){var Rc=Ta.makeTransFn(Ma),id="period"===Ma.ticklabelmode?Ta.makeTransPeriodFn(Ma):Ta.makeTransFn(Ma);"boundaries"===Ma.tickson?(zb=E(Ma,Ac),Ra=Ta.clipEnds(Ma,zb),zb="inside"===Ma.ticks?Ra:zb):(Ra=Ta.clipEnds(Ma,Ac),zb="inside"===Ma.ticks?Ra:Ac);var Tc=Ma._gridVals=Ra,wd=F(Ma,Ac);if(!jb._hasOnlyLargeSploms){var Fb=Ma._subplotsWith,ac={};
for(Ra=0;Ra<Fb.length;Ra++){var Jc=Fb[Ra];var qc=jb._plots[Jc];Jc=qc[vb+"axis"];var tc=Jc._mainAxis._id;ac[tc]||(ac[tc]=1,tc="x"===pb?"M0,"+Jc._offset+"v"+Jc._length:"M"+Jc._offset+",0h"+Jc._length,Ta.drawGrid(Ba,Ma,{vals:Tc,counterAxis:Jc,layer:qc.gridlayer.select("."+Xa),path:tc,transFn:Rc}),Ta.drawZeroLine(Ba,Ma,{counterAxis:Jc,layer:qc.zerolinelayer,path:tc,transFn:Rc}))}}var vc=Ta.getTickSigns(Ma);Tc=[];if(Ma.ticks){Ra=Ta.makeTickPath(Ma,Zb,vc[2]);if(Ma._anchorAxis&&Ma.mirror&&!0!==Ma.mirror){var xb=
Ta.makeTickPath(Ma,pc,vc[3]);var Ab=Ra+xb}else xb="",Ab=Ra;if(Ma.showdividers&&"outside"===Ma.ticks&&"boundaries"===Ma.tickson){var jc={};for(Ra=0;Ra<wd.length;Ra++)jc[wd[Ra].x]=1;pc=function(ec){return jc[ec.x]?xb:Ab}}else pc=Ab;Ta.drawTicks(Ba,Ma,{vals:zb,layer:Jb,path:pc,transFn:Rc});"allticks"===Ma.mirror&&(Tc=Object.keys(Ma._linepositions||{}))}for(Ra=0;Ra<Tc.length;Ra++)Jc=Tc[Ra],qc=jb._plots[Jc],pc=Ma._linepositions[Jc]||[],pc=Ta.makeTickPath(Ma,pc[0],vc[0])+Ta.makeTickPath(Ma,pc[1],vc[1]),
Ta.drawTicks(Ba,Ma,{vals:zb,layer:qc[pb+"axislayer"],path:pc,transFn:Rc});zb=[];zb.push(function(){return Ta.drawLabels(Ba,Ma,{vals:Ac,layer:Jb,transFn:id,labelFns:Ta.makeLabelFns(Ma,Zb)})});if("multicategory"===Ma.type){var Bc={x:2,y:10}[pb];zb.push(function(){var ec={x:"height",y:"width"}[pb];ec=lb()[ec]+Bc+(Ma._tickAngles[Xa+"tick"]?Ma.tickfont.size*tb:0);for(var ic=Ta,Gb=ic.drawLabels,yb=[],Eb={},Lb=0;Lb<Ac.length;Lb++){var fc=Ac[Lb];Eb[fc.text2]?Eb[fc.text2].push(fc.x):Eb[fc.text2]=[fc.x]}for(var Oc in Eb)yb.push(l(Ma,
Q.interp(Eb[Oc],.5),Oc));return Gb.call(ic,Ba,Ma,{vals:yb,layer:Jb,cls:Xa+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Rc,labelFns:Ta.makeLabelFns(Ma,Zb+ec*vc[4])})});zb.push(function(){Ma._depth=vc[4]*(lb("tick2")[Ma.side]-Zb);var ec=Ta.makeTickPath(Ma,Zb,vc[4],Ma._depth),ic=Ma._id+"divider",Gb=Jb.selectAll("path."+ic).data(wd,B);Gb.exit().remove();Gb.enter().insert("path",":first-child").classed(ic,1).classed("crisp",1).call(U.stroke,Ma.dividercolor).style("stroke-width",X.crispRound(Ba,Ma.dividerwidth,
1)+"px");Gb.attr("transform",Rc).attr("d",ec)})}else Ma.title.hasOwnProperty("standoff")&&zb.push(function(){Ma._depth=vc[4]*(lb()[Ma.side]-Zb)});var Ic=P.getComponentMethod("rangeslider","isVisible")(Ma);zb.push(function(){var ec=Ma.side.charAt(0),ic=nb[Ma.side].charAt(0),Gb=Ta.getPxPosition(Ba,Ma),yb="outside"===Ma.ticks?Ma.ticklen:0,Eb;if(Ma.automargin||Ic)if("multicategory"===Ma.type)var Lb=lb("tick2");else Lb=lb(),"x"===pb&&"b"===ec&&(Ma._depth=Math.max(0<Lb.width?Lb.bottom-Gb:0,yb));if(Ma.automargin){var fc=
{x:0,y:0,r:0,l:0,t:0,b:0};var Oc=[0,1];"x"===pb?("b"===ec?fc[ec]=Ma._depth:(fc[ec]=Ma._depth=Math.max(0<Lb.width?Gb-Lb.top:0,yb),Oc.reverse()),0<Lb.width&&(Gb=Lb.right-(Ma._offset+Ma._length),0<Gb&&(fc.xr=1,fc.r=Gb),Lb=Ma._offset-Lb.left,0<Lb&&(fc.xl=0,fc.l=Lb))):("l"===ec?fc[ec]=Ma._depth=Math.max(0<Lb.height?Gb-Lb.left:0,yb):(fc[ec]=Ma._depth=Math.max(0<Lb.height?Lb.right-Gb:0,yb),Oc.reverse()),0<Lb.height&&(Gb=Lb.bottom-(Ma._offset+Ma._length),0<Gb&&(fc.yb=0,fc.b=Gb),Lb=Ma._offset-Lb.top,0<Lb&&
(fc.yt=1,fc.t=Lb)));fc[vb]="free"===Ma.anchor?Ma.position:Ma._anchorAxis.domain[Oc[0]];Ma.title.text!==jb._dfltTitle[pb]&&(fc[ec]+=C(Ma)+(Ma.title.standoff||0));if(Ma.mirror&&"free"!==Ma.anchor){var xc={x:0,y:0,r:0,l:0,t:0,b:0};xc[ic]=Ma.linewidth;Ma.mirror&&!0!==Ma.mirror&&(xc[ic]+=yb);if(!0===Ma.mirror||"ticks"===Ma.mirror)xc[vb]=Ma._anchorAxis.domain[Oc[1]];else if("all"===Ma.mirror||"allticks"===Ma.mirror)xc[vb]=[Ma._counterDomainMin,Ma._counterDomainMax][Oc[1]]}}Ic&&(Eb=P.getComponentMethod("rangeslider",
"autoMarginOpts")(Ba,Ma));L.autoMargin(Ba,J(Ma),fc);L.autoMargin(Ba,J(Ma)+".mirror",xc);L.autoMargin(Ba,Ma._id+".rangeslider",Eb)});$a.skipTitle||Ic&&"bottom"===Ma.side||zb.push(function(){var ec=Ba._fullLayout,ic=Ma._id,Gb=ic.charAt(0),yb=Ma.title.font.size;if(Ma.title.hasOwnProperty("standoff"))var Eb=Ma._depth+Ma.title.standoff+C(Ma);else Eb="multicategory"===Ma.type?Ma._depth:10+1.5*yb+(Ma.linewidth?Ma.linewidth-1:0),Eb="x"===Gb?Eb+("top"===Ma.side?yb*(Ma.showticklabels?1:0):yb*(Ma.showticklabels?
1.5:.5)):Eb+("right"===Ma.side?yb*(Ma.showticklabels?1:.5):yb*(Ma.showticklabels?.5:0));var Lb=Ta.getPxPosition(Ba,Ma);if("x"===Gb){yb=Ma._offset+Ma._length/2;var fc="top"===Ma.side?Lb-Eb:Lb+Eb}else{fc=Ma._offset+Ma._length/2;yb="right"===Ma.side?Lb+Eb:Lb-Eb;var Oc={rotate:"-90",offset:0}}if("multicategory"!==Ma.type){Eb=Ma._selections[Ma._id+"tick"];var xc={selection:Eb,side:Ma.side};Eb&&Eb.node()&&Eb.node().parentNode&&(Eb=X.getTranslate(Eb.node().parentNode),xc.offsetLeft=Eb.x,xc.offsetTop=Eb.y);
Ma.title.hasOwnProperty("standoff")&&(xc.pad=0)}return O.draw(Ba,ic+"title",{propContainer:Ma,propName:Ma._name+".title.text",placeholder:ec._dfltTitle[Gb],avoid:xc,transform:Oc,attributes:{x:yb,y:fc,"text-anchor":"middle"}})});return Q.syncOrAsync(zb)}}};Ta.getTickSigns=function(Ba){var Ma=Ba._id.charAt(0),$a=Ba.side==={x:"top",y:"right"}[Ma]?1:-1;$a=[-1,1,$a,-$a];"inside"!==Ba.ticks===("x"===Ma)&&($a=$a.map(function(lb){return-lb}));Ba.side&&$a.push({l:-1,t:-1,r:1,b:1}[Ba.side.charAt(0)]);return $a};
Ta.makeTransFn=function(Ba){var Ma=Ba._id.charAt(0),$a=Ba._offset;return"x"===Ma?function(lb){return"translate("+($a+Ba.l2p(lb.x))+",0)"}:function(lb){return"translate(0,"+($a+Ba.l2p(lb.x))+")"}};Ta.makeTransPeriodFn=function(Ba){var Ma=Ba._id.charAt(0),$a=Ba._offset;return"x"===Ma?function(lb){return"translate("+($a+Ba.l2p(lb.periodX))+",0)"}:function(lb){return"translate(0,"+($a+Ba.l2p(lb.periodX))+")"}};Ta.makeTickPath=function(Ba,Ma,$a,lb){lb=void 0!==lb?lb:Ba.ticklen;var Ra=Ba._id.charAt(0);
Ba=(Ba.linewidth||1)/2;return"x"===Ra?"M0,"+(Ma+Ba*$a)+"v"+lb*$a:"M"+(Ma+Ba*$a)+",0h"+lb*$a};Ta.makeLabelFns=function(Ba,Ma,$a){var lb=Ba._id.charAt(0),Ra="boundaries"!==Ba.tickson&&"outside"===Ba.ticks,jb=0,Xa=0;Ra&&(jb+=Ba.ticklen);$a&&"outside"===Ba.ticks&&(Xa=Q.deg2rad($a),jb=Ba.ticklen*Math.cos(Xa)+1,Xa=Ba.ticklen*Math.sin(Xa));Ba.showticklabels&&(Ra||Ba.showline)&&(jb+=.2*Ba.tickfont.size);jb+=(Ba.linewidth||1)/2;Ra={labelStandoff:jb,labelShift:Xa};if("x"===lb){var pb="bottom"===Ba.side?1:-1;
var vb=Xa*pb;var zb=Ma+jb*pb;var Jb="bottom"===Ba.side?1:-.2;Ra.xFn=function(Zb){return Zb.dx+vb};Ra.yFn=function(Zb){return Zb.dy+zb+Zb.fontSize*Jb};Ra.anchorFn=function(Zb,pc){return H(pc)&&0!==pc&&180!==pc?0>pc*pb?"end":"start":"middle"};Ra.heightFn=function(Zb,pc,Ac){return-60>pc||60<pc?-.5*Ac:"top"===Ba.side?-Ac:0}}else"y"===lb&&(pb="right"===Ba.side?1:-1,vb=jb,zb=-Xa*pb,Jb=90===Math.abs(Ba.tickangle)?.5:0,Ra.xFn=function(Zb){return Zb.dx+Ma+(vb+Zb.fontSize*Jb)*pb},Ra.yFn=function(Zb){return Zb.dy+
zb+Zb.fontSize*kb},Ra.anchorFn=function(Zb,pc){return H(pc)&&90===Math.abs(pc)?"middle":"right"===Ba.side?"start":"end"},Ra.heightFn=function(Zb,pc,Ac){pc*="left"===Ba.side?1:-1;return-30>pc?-Ac:30>pc?-.5*Ac:0});return Ra};Ta.drawTicks=function(Ba,Ma,$a){$a=$a||{};var lb=Ma._id+"tick",Ra=$a.vals;"period"===Ma.ticklabelmode&&(Ra=Ra.slice(),Ra.shift());Ra=$a.layer.selectAll("path."+lb).data(Ma.ticks?Ra:[],B);Ra.exit().remove();Ra.enter().append("path").classed(lb,1).classed("ticks",1).classed("crisp",
!1!==$a.crisp).call(U.stroke,Ma.tickcolor).style("stroke-width",X.crispRound(Ba,Ma.tickwidth,1)+"px").attr("d",$a.path);Ra.attr("transform",$a.transFn)};Ta.drawGrid=function(Ba,Ma,$a){$a=$a||{};var lb=Ma._id+"grid",Ra=$a.vals,jb=$a.counterAxis;if(!1===Ma.showgrid)Ra=[];else if(jb&&Ta.shouldShowZeroLine(Ba,Ma,jb)){jb="array"===Ma.tickmode;for(var Xa=0;Xa<Ra.length;Xa++){var pb=Ra[Xa].x;if(jb?!pb:Math.abs(pb)<Ma.dtick/100)if(Ra=Ra.slice(0,Xa).concat(Ra.slice(Xa+1)),jb)Xa--;else break}}Ra=$a.layer.selectAll("path."+
lb).data(Ra,B);Ra.exit().remove();Ra.enter().append("path").classed(lb,1).classed("crisp",!1!==$a.crisp);Ma._gw=X.crispRound(Ba,Ma.gridwidth,1);Ra.attr("transform",$a.transFn).attr("d",$a.path).call(U.stroke,Ma.gridcolor||"#ddd").style("stroke-width",Ma._gw+"px");"function"===typeof $a.path&&Ra.attr("d",$a.path)};Ta.drawZeroLine=function(Ba,Ma,$a){$a=$a||$a;var lb=Ma._id+"zl",Ra=Ta.shouldShowZeroLine(Ba,Ma,$a.counterAxis);Ra=$a.layer.selectAll("path."+lb).data(Ra?[{x:0,id:Ma._id}]:[]);Ra.exit().remove();
Ra.enter().append("path").classed(lb,1).classed("zl",1).classed("crisp",!1!==$a.crisp).each(function(){$a.layer.selectAll("path").sort(function(jb,Xa){return ab.idSort(jb.id,Xa.id)})});Ra.attr("transform",$a.transFn).attr("d",$a.path).call(U.stroke,Ma.zerolinecolor||U.defaultLine).style("stroke-width",X.crispRound(Ba,Ma.zerolinewidth,Ma._gw||1)+"px")};Ta.drawLabels=function(Ba,Ma,$a){function lb(id,Tc){id.each(function(wd){var Fb=N.select(this),ac=Fb.select(".text-math-group"),Jc=Jb.anchorFn(wd,Tc),
qc=$a.transFn.call(Fb.node(),wd)+(H(Tc)&&0!==+Tc?" rotate("+Tc+","+Jb.xFn(wd)+","+(Jb.yFn(wd)-wd.fontSize/2)+")":""),tc=S.lineCount(Fb),vc=tb*wd.fontSize;(wd=Jb.heightFn(wd,H(Tc)?+Tc:0,(tc-1)*vc))&&(qc+=" translate(0, "+wd+")");ac.empty()?Fb.select("text").attr({transform:qc,"text-anchor":Jc}):(Fb=X.bBox(ac.node()).width*{end:-.5,start:.5}[Jc],ac.attr("transform",qc+(Fb?"translate("+Fb+",0)":"")))})}function Ra(){lb(Ac,Zb);if(zb.length&&"x"===pb&&!H(Zb)&&("log"!==Ma.type||"D"!==String(Ma.dtick).charAt(0))){var id=
Rc=0,Tc=[];Ac.each(function(qc){id=Math.max(id,qc.fontSize);qc=Ma.l2p(qc.x);var tc=I(this);tc=X.bBox(tc.node());Tc.push({top:0,bottom:10,height:10,left:qc-tc.width/2,right:qc+tc.width/2+2,width:tc.width+2})});if("boundaries"!==Ma.tickson&&!Ma.showdividers||$a.secondary){var wd=zb.length;var Fb=Math.abs((zb[wd-1].x-zb[0].x)*Ma._m)/(wd-1)<2.5*id||"multicategory"===Ma.type;for(wd=0;wd<Tc.length-1;wd++)if(Q.bBoxIntersect(Tc[wd],Tc[wd+1])){Rc=Fb?90:30;break}}else for(Fb=2,Ma.ticks&&(Fb+=Ma.tickwidth/2),
wd=0;wd<Tc.length;wd++){var ac=zb[wd].xbnd,Jc=Tc[wd];if(null!==ac[0]&&Jc.left-Ma.l2p(ac[0])<Fb||null!==ac[1]&&Ma.l2p(ac[1])-Jc.right<Fb){Rc=90;break}}Rc&&lb(Ac,Rc)}}$a=$a||{};var jb=Ba._fullLayout,Xa=Ma._id,pb=Xa.charAt(0),vb=$a.cls||Xa+"tick",zb=$a.vals,Jb=$a.labelFns,Zb=$a.secondary?0:Ma.tickangle,pc=(Ma._prevTickAngles||{})[vb],Ac=$a.layer.selectAll("g."+vb).data(Ma.showticklabels?zb:[],B),ed=[];Ac.enter().append("g").classed(vb,1).append("text").attr("text-anchor","middle").each(function(id){var Tc=
N.select(this),wd=Ba._promises.length;Tc.call(S.positionText,Jb.xFn(id),Jb.yFn(id)).call(X.font,id.font,id.fontSize,id.fontColor).text(id.text).call(S.convertToTspans,Ba);Ba._promises[wd]?ed.push(Ba._promises.pop().then(function(){lb(Tc,Zb)})):lb(Tc,Zb)});Ac.exit().remove();$a.repositionOnUpdate&&Ac.each(function(id){N.select(this).select("text").call(S.positionText,Jb.xFn(id),Jb.yFn(id))});lb(Ac,pc+1?pc:Zb);var Rc=null;Ma._selections&&(Ma._selections[vb]=Ac);Xa=[function(){return ed.length&&Promise.all(ed)}];
Ma.automargin&&jb._redrawFromAutoMarginCount&&90===pc?(Rc=90,Xa.push(function(){lb(Ac,pc)})):Xa.push(Ra);Ma._tickAngles&&Xa.push(function(){Ma._tickAngles[vb]=null===Rc?H(Zb)?Zb:0:Rc});(jb=Q.syncOrAsync(Xa))&&jb.then&&Ba._promises.push(jb);return jb};Ta.getPxPosition=function(Ba,Ma){Ba=Ba._fullLayout._size;var $a=Ma._id.charAt(0),lb=Ma.side,Ra;"free"!==Ma.anchor?Ra=Ma._anchorAxis:"x"===$a?Ra={_offset:Ba.t+(1-(Ma.position||0))*Ba.h,_length:0}:"y"===$a&&(Ra={_offset:Ba.l+(Ma.position||0)*Ba.w,_length:0});
if("top"===lb||"left"===lb)return Ra._offset;if("bottom"===lb||"right"===lb)return Ra._offset+Ra._length};Ta.shouldShowZeroLine=function(Ba,Ma,$a){var lb=Q.simpleMap(Ma.range,Ma.r2l),Ra;if(Ra=0>=lb[0]*lb[1]&&Ma.zeroline&&("linear"===Ma.type||"-"===Ma.type)&&!(Ma.rangebreaks&&Ma.maskBreaks(0)===Oa)){if(!($a=v(Ma,0)||!G(Ba,Ma,$a,lb)))a:{Ba=Ba._fullData;$a=Ma._mainSubplot;Ma=Ma._id.charAt(0);for(lb=0;lb<Ba.length;lb++)if(Ra=Ba[lb],!0===Ra.visible&&Ra.xaxis+Ra.yaxis===$a){if(P.traceIs(Ra,"bar-like")&&
Ra.orientation==={x:"h",y:"v"}[Ma]){$a=!0;break a}if(Ra.fill&&Ra.fill.charAt(Ra.fill.length-1)===Ma){$a=!0;break a}}$a=!1}Ra=$a}return Ra};Ta.clipEnds=function(Ba,Ma){return Ma.filter(function($a){return v(Ba,$a.x)})};Ta.allowAutoMargin=function(Ba){for(var Ma=Ta.list(Ba,"",!0),$a=0;$a<Ma.length;$a++){var lb=Ma[$a];lb.automargin&&(L.allowAutoMargin(Ba,J(lb)),lb.mirror&&L.allowAutoMargin(Ba,J(lb)+".mirror"));P.getComponentMethod("rangeslider","isVisible")(lb)&&L.allowAutoMargin(Ba,lb._id+".rangeslider")}};
Ta.swap=function(Ba,Ma){var $a=[],lb,Ra;for(lb=0;lb<Ma.length;lb++){var jb=[],Xa=Ba._fullData[Ma[lb]].xaxis,pb=Ba._fullData[Ma[lb]].yaxis;if(Xa&&pb){for(Ra=0;Ra<$a.length;Ra++)-1===$a[Ra].x.indexOf(Xa)&&-1===$a[Ra].y.indexOf(pb)||jb.push(Ra);if(jb.length){var vb=$a[jb[0]];if(1<jb.length)for(Ra=1;Ra<jb.length;Ra++){var zb=$a[jb[Ra]];K(vb.x,zb.x);K(vb.y,zb.y)}K(vb.x,[Xa]);K(vb.y,[pb])}else $a.push({x:[Xa],y:[pb]})}}for(Ma=0;Ma<$a.length;Ma++){var Jb;Ra=Ba;jb=$a[Ma].x;Xa=$a[Ma].y;vb=[];zb=[];pb=Ra.layout;
for(lb=0;lb<jb.length;lb++)vb.push(Ta.getFromId(Ra,jb[lb]));for(lb=0;lb<Xa.length;lb++)zb.push(Ta.getFromId(Ra,Xa[lb]));var Zb=Object.keys(da),pc="anchor domain overlaying position side tickangle editType".split(" "),Ac=["linear","log"];for(lb=0;lb<Zb.length;lb++){var ed=Zb[lb],Rc=vb[0][ed],id=zb[0][ed],Tc=!0,wd=!1,Fb=!1;if("_"!==ed.charAt(0)&&"function"!==typeof Rc&&-1===pc.indexOf(ed)){for(Jb=1;Jb<vb.length&&Tc;Jb++){var ac=vb[Jb][ed];"type"===ed&&-1!==Ac.indexOf(Rc)&&-1!==Ac.indexOf(ac)&&Rc!==
ac?wd=!0:ac!==Rc&&(Tc=!1)}for(Jb=1;Jb<zb.length&&Tc;Jb++)Rc=zb[Jb][ed],"type"===ed&&-1!==Ac.indexOf(id)&&-1!==Ac.indexOf(Rc)&&id!==Rc?Fb=!0:zb[Jb][ed]!==id&&(Tc=!1);if(Tc){wd&&(pb[vb[0]._name].type="linear");Fb&&(pb[zb[0]._name].type="linear");Jb=pb;id=vb;Tc=zb;ac=Ra._fullLayout._dfltTitle;wd=Q.nestedProperty;Fb=wd(Jb[id[0]._name],ed).get();Rc=wd(Jb[Tc[0]._name],ed).get();"title"===ed&&(Fb&&Fb.text===ac.x&&(Fb.text=ac.y),Rc&&Rc.text===ac.y&&(Rc.text=ac.x));for(ac=0;ac<id.length;ac++)wd(Jb,id[ac]._name+
"."+ed).set(Rc);for(ac=0;ac<Tc.length;ac++)wd(Jb,Tc[ac]._name+"."+ed).set(Fb)}}}for(lb=0;lb<Ra._fullLayout.annotations.length;lb++)vb=Ra._fullLayout.annotations[lb],-1!==jb.indexOf(vb.xref)&&-1!==Xa.indexOf(vb.yref)&&Q.swapAttrs(pb.annotations[lb],["?"])}}},{"../../components/color":615,"../../components/drawing":637,"../../components/titles":710,"../../constants/alignment":717,"../../constants/numerical":724,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/plots":860,"../../registry":880,
"./autorange":796,"./axis_autotype":798,"./axis_ids":800,"./clean_ticks":802,"./layout_attributes":811,"./set_convert":817,d3:169,"fast-isnumeric":241}],798:[function(b,y,D){var n=b("fast-isnumeric"),m=b("../../lib"),p=b("../../constants/numerical").BADNUM;y.exports=function(h,a,d){d=d||{};if(d=!d.noMultiCategory)d=m.isArrayOrTypedArray(h[0])&&m.isArrayOrTypedArray(h[1]);if(d)return"multicategory";d=Math.max(1,(h.length-1)/1E3);for(var e=0,l=0,k={},c=0;c<h.length;c+=d){var f=h[Math.round(c)],g=String(f);
k[g]||(k[g]=1,m.isDateTime(f,a)&&(e+=1),n(f)&&(l+=1))}if(e>2*l)return"date";a=Math.max(1,(h.length-1)/1E3);e=d=0;l={};for(k=0;k<h.length;k+=a)c=h[Math.round(k)],f=String(c),l[f]||(l[f]=1,"boolean"===typeof c?e++:m.cleanNumber(c)!==p?d++:"string"===typeof c&&e++);if(e>2*d)return"category";a:{if(h)for(a=0;a<h.length;a++)if(n(h[a])){h=!0;break a}h=!1}return h?"linear":"-"}},{"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],799:[function(b,y,D){function n(x,E,F){function z(I,J){return a.coerce(x,
E,e.rangebreaks,I,J)}if(z("enabled")){var B=z("bounds");if(B&&2<=B.length){var C="",v,G;if(2===B.length)for(v=0;2>v;v++)if(G=m(B[v])){C=t;break}C=z("pattern",C);if(C===t)for(v=0;2>v;v++)(G=m(B[v]))&&(E.bounds[v]=B[v]=G-1);if(C)for(v=0;2>v;v++)switch(G=B[v],C){case t:if(!p(G)){E.enabled=!1;return}G=+G;if(G!==Math.floor(G)||0>G||7<=G){E.enabled=!1;return}E.bounds[v]=B[v]=G;break;case u:if(!p(G)){E.enabled=!1;return}G=+G;if(0>G||24<G){E.enabled=!1;return}E.bounds[v]=B[v]=G}!1===F.autorange&&(F=F.range,
F[0]<F[1]?B[0]<F[0]&&B[1]>F[1]&&(E.enabled=!1):B[0]>F[0]&&B[1]<F[1]&&(E.enabled=!1))}else(B=z("values"))&&B.length?z("dvalue"):E.enabled=!1}}function m(x){if("string"===typeof x)return w[x.substr(0,3).toLowerCase()]}var p=b("fast-isnumeric"),h=b("../../registry"),a=b("../../lib"),d=b("../array_container_defaults"),e=b("./layout_attributes"),l=b("./tick_value_defaults"),k=b("./tick_mark_defaults"),c=b("./tick_label_defaults"),f=b("./category_order_defaults"),g=b("./line_grid_defaults"),q=b("./set_convert"),
t=b("./constants").WEEKDAY_PATTERN,u=b("./constants").HOUR_PATTERN;y.exports=function(x,E,F,z,B){var C=z.letter,v=z.font||{},G=z.splomStash||{},I=F("visible",!z.visibleDflt),J=E._template||{};J=E.type||J.type||"-";"date"===J&&h.getComponentMethod("calendars","handleDefaults")(x,E,"calendar",z.calendar);q(E,B);var K=!E.isValidRange(x.range);K&&z.reverseDflt&&(K="reversed");!F("autorange",K)||"linear"!==J&&"-"!==J||F("rangemode");F("range");E.cleanRange();f(x,E,F,z);"category"===J||z.noHover||F("hoverformat");
K=F("color");var N=K!==e.color.dflt?K:v.color;C=G.label||B._dfltTitle[C];c(x,E,F,J,z,{pass:1});if(!I)return E;F("title.text",C);a.coerceFont(F,"title.font",{family:v.family,size:Math.round(1.2*v.size),color:N});l(x,E,F,J);c(x,E,F,J,z,{pass:2});k(x,E,F,z);g(x,E,F,{dfltColor:K,bgColor:z.bgColor,showGrid:z.showGrid,attributes:e});(E.showline||E.ticks)&&F("mirror");z.automargin&&F("automargin");v="multicategory"===J;if(!z.noTickson&&("category"===J||v)&&(E.ticks||E.showgrid)){var H;v&&(H="boundaries");
F("tickson",H)}v&&F("showdividers")&&(F("dividercolor"),F("dividerwidth"));if("date"===J)if(z.noTicklabelmode||F("ticklabelmode"),d(x,E,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:n}),E.rangebreaks.length){for(x=0;x<E.rangebreaks.length;x++)if(E.rangebreaks[x].pattern===t){E._hasDayOfWeekBreaks=!0;break}q(E,B);if(B._has("scattergl")||B._has("splom"))for(B=0;B<z.data.length;B++)if(x=z.data[B],"scattergl"===x.type||"splom"===x.type)x.visible=!1,a.warn(x.type+" traces do not work on axes with rangebreaks. Setting trace "+
x.index+" to `visible: false`.")}else delete E.rangebreaks;return E};var w={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7}},{"../../lib":749,"../../registry":880,"../array_container_defaults":793,"./category_order_defaults":801,"./constants":803,"./layout_attributes":811,"./line_grid_defaults":813,"./set_convert":817,"./tick_label_defaults":818,"./tick_mark_defaults":819,"./tick_value_defaults":820,"fast-isnumeric":241}],800:[function(b,y,D){var n=b("../../registry"),m=b("./constants");D.id2name=function(p){if("string"===
typeof p&&p.match(m.AX_ID_PATTERN)){var h=p.substr(1);"1"===h&&(h="");return p.charAt(0)+"axis"+h}};D.name2id=function(p){if(p.match(m.AX_NAME_PATTERN)){var h=p.substr(5);"1"===h&&(h="");return p.charAt(0)+h}};D.cleanId=function(p,h){if("string"===typeof p&&p.match(m.AX_ID_PATTERN)&&(!h||p.charAt(0)===h))return h=p.substr(1).replace(/^0+/,""),"1"===h&&(h=""),p.charAt(0)+h};D.list=function(p,h,a){var d=p._fullLayout;if(!d)return[];var e=D.listIds(p,h);p=Array(e.length);var l;for(l=0;l<e.length;l++){var k=
e[l];p[l]=d[k.charAt(0)+"axis"+k.substr(1)]}if(!a)for(a=d._subplots.gl3d||[],l=0;l<a.length;l++)e=d[a[l]],h?p.push(e[h+"axis"]):p.push(e.xaxis,e.yaxis,e.zaxis);return p};D.listIds=function(p,h){p=p._fullLayout;if(!p)return[];p=p._subplots;return h?p[h+"axis"]:p.xaxis.concat(p.yaxis)};D.getFromId=function(p,h,a){p=p._fullLayout;"x"===a?h=h.replace(/y[0-9]*/,""):"y"===a&&(h=h.replace(/x[0-9]*/,""));return p[D.id2name(h)]};D.getFromTrace=function(p,h,a){var d=p._fullLayout,e=null;n.traceIs(h,"gl3d")?
(p=h.scene,"scene"===p.substr(0,5)&&(e=d[p][a+"axis"])):e=D.getFromId(p,h[a+"axis"]||a);return e};D.idSort=function(p,h){var a=p.charAt(0),d=h.charAt(0);return a!==d?a>d?1:-1:+(p.substr(1)||1)-+(h.substr(1)||1)};D.getAxisGroup=function(p,h){p=p._axisMatchGroups;for(var a=0;a<p.length;a++)if(p[a][h])return"g"+a;return h}},{"../../registry":880,"./constants":803}],801:[function(b,y,D){y.exports=function(n,m,p,h){if("category"===m.type){n=n.categoryarray;n=Array.isArray(n)&&0<n.length;var a;n&&(a="array");
a=p("categoryorder",a);var d;"array"===a&&(d=p("categoryarray"));n||"array"!==a||(a=m.categoryorder="trace");if("trace"===a)m._initialCategories=[];else if("array"===a)m._initialCategories=d.slice();else{p=h.dataAttr||m._id.charAt(0);d={};var e;if(h.axData)n=h.axData;else for(n=[],e=0;e<h.data.length;e++){var l=h.data[e];l[p+"axis"]===m._id&&n.push(l)}for(e=0;e<n.length;e++)for(l=n[e][p],h=0;h<l.length;h++){var k=l[h];null!==k&&void 0!==k&&(d[k]=1)}d=Object.keys(d).sort();"category ascending"===a?
m._initialCategories=d:"category descending"===a&&(m._initialCategories=d.reverse())}}}},{}],802:[function(b,y,D){var n=b("fast-isnumeric"),m=b("../../lib"),p=b("../../constants/numerical").ONEDAY;D.dtick=function(h,a){var d="log"===a,e="date"===a,l="category"===a;a=e?p:1;if(!h)return a;if(n(h))return h=Number(h),0>=h?a:l?Math.max(1,Math.round(h)):e?Math.max(.1,h):h;if("string"!==typeof h||!e&&!d)return a;l=h.charAt(0);var k=h.substr(1);k=n(k)?Number(k):0;return 0>=k||!(e&&"M"===l&&k===Math.round(k)||
d&&"L"===l||d&&"D"===l&&(1===k||2===k))?a:h};D.tick0=function(h,a,d,e){if("date"===a)return m.cleanDate(h,m.dateTick0(d));if("D1"!==e&&"D2"!==e)return n(h)?Number(h):0}},{"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],803:[function(b,y,D){b=b("../../lib/regex").counter;y.exports={idRegex:{x:b("x"),y:b("y")},attrRegex:b("[xy]axis"),xAxisMatch:b("xaxis"),yAxisMatch:b("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,
HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:"imagelayer heatmaplayer contourcarpetlayer contourlayer funnellayer waterfalllayer barlayer carpetlayer violinlayer boxlayer ohlclayer scattercarpetlayer scatterlayer".split(" "),clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above",
"below traces":"below"}}},{"../../lib/regex":765}],804:[function(b,y,D){function n(f,g,q,t,u){var w="range"!==u,x=t[a(g)].type,E;u=[];for(E=0;E<q.length;E++){var F=q[E];if(F!==g){var z=t[a(F)];z.type===x&&(z.fixedrange?w&&z.anchor&&t[a(z.anchor)].fixedrange&&u.push(F):u.push(F))}}for(E=0;E<f.length;E++)if(f[E][g]){f=f[E];g=[];for(E=0;E<u.length;E++)F=u[E],f[F]||g.push(F);return{linkableAxes:g,thisGroup:f}}return{linkableAxes:u,thisGroup:null}}function m(f,g,q,t,u){var w;if(null===g){g={};g[q]=1;var x=
f.length;f.push(g)}else x=f.indexOf(g);var E=Object.keys(g);for(w=0;w<f.length;w++)if(q=f[w],w!==x&&q[t]){var F=q[t];for(w=0;w<E.length;w++)t=E[w],q[t]=F*u*g[t];f.splice(x,1);return}if(1!==u)for(w=0;w<E.length;w++)g[E[w]]*=u;g[t]=1}function p(f,g){var q=f._inputDomain,t=q[0]+(q[1]-q[0])*c[f.constraintoward];f.domain=f._input.domain=[t+(q[0]-t)/g,t+(q[1]-t)/g];f.setScale()}var h=b("../../lib"),a=b("./axis_ids").id2name,d=b("./scale_zoom"),e=b("./autorange").makePadFn,l=b("./autorange").concatExtremes,
k=b("../../constants/numerical").ALMOST_EQUAL,c=b("../../constants/alignment").FROM_BL;D.handleConstraintDefaults=function(f,g,q,t){var u=t.allAxisIds,w=t.layoutOut,x=t.scaleanchorDflt,E=t.constrainDflt;t=w._axisConstraintGroups;var F=w._axisMatchGroups,z=g._id,B=z.charAt(0);B=((w._splomAxes||{})[B]||{})[z]||{};z=g._id;var C=z.charAt(0);E=q("constrain",E);h.coerce(f,g,{constraintoward:{valType:"enumerated",values:"x"===C?["left","center","right"]:["bottom","middle","top"],dflt:"x"===C?"center":"middle"}},
"constraintoward");if((f.matches||B.matches)&&!g.fixedrange){var v=n(F,z,u,w);var G=h.coerce(f,g,{matches:{valType:"enumerated",values:v.linkableAxes||[],dflt:B.matches}},"matches")}if(!(G||g.fixedrange&&"domain"!==E)&&(f.scaleanchor||x)){var I=n(t,z,u,w,E);var J=h.coerce(f,g,{scaleanchor:{valType:"enumerated",values:I.linkableAxes||[]}},"scaleanchor",x)}G?(delete g.constrain,m(F,v.thisGroup,z,G,1)):-1!==u.indexOf(f.matches)&&h.warn("ignored "+g._name+'.matches: "'+f.matches+'" to avoid either an infinite loop or because the target axis has fixed range.');
J?(f=q("scaleratio"),f||(f=g.scaleratio=1),m(t,I.thisGroup,z,J,f)):-1!==u.indexOf(f.scaleanchor)&&h.warn("ignored "+g._name+'.scaleanchor: "'+f.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the target axis has fixed range or this axis declares a *matches* constraint.')};D.enforce=function(f){var g=f._fullLayout,q=g._axisConstraintGroups||[],t,u,w,x;for(t=0;t<q.length;t++){var E=q[t],F=Object.keys(E),z=Infinity,B=0,C=Infinity,v={},G={},I=!1;for(u=
0;u<F.length;u++){var J=F[u];G[J]=w=g[a(J)];w._inputDomain?w.domain=w._inputDomain.slice():w._inputDomain=w.domain.slice();w._inputRange||(w._inputRange=w.range.slice());w.setScale();v[J]=x=Math.abs(w._m)/E[J];z=Math.min(z,x);"domain"!==w.constrain&&w._constraintShrinkable||(C=Math.min(C,x));delete w._constraintShrinkable;B=Math.max(B,x);"domain"===w.constrain&&(I=!0)}if(!(z>k*B)||I)for(u=0;u<F.length;u++)if(J=F[u],x=v[J],w=G[J],J=w.constrain,x!==C||"domain"===J)if(x/=C,"range"===J)d(w,x);else if(J=
w._inputDomain,E=(w.domain[1]-w.domain[0])/(J[1]-J[0]),z=(w.r2l(w.range[1])-w.r2l(w.range[0]))/(w.r2l(w._inputRange[1])-w.r2l(w._inputRange[0])),x/=E,1>x*z)w.domain=w._input.domain=J.slice(),d(w,x);else{1>z&&(w.range=w._input.range=w._inputRange.slice(),x*=z);if(w.autorange){J=w.r2l(w.range[0]);E=w.r2l(w.range[1]);var K=(J+E)/2;B=z=K;I=Math.abs(E-K);var N=K-I*x*1.0001;K+=I*x*1.0001;var H=e(w);p(w,x);var L=Math.abs(w._m),P=l(f,w),Q=P.min;P=P.max;var S;for(S=0;S<Q.length;S++){var O=Q[S].val-H(Q[S])/
L;O>N&&O<z&&(z=O)}for(S=0;S<P.length;S++)O=P[S].val+H(P[S])/L,O<K&&O>B&&(B=O);x/=(B-z)/(2*I);z=w.l2r(z);B=w.l2r(B);w.range=w._input.range=J<E?[z,B]:[B,z]}p(w,x)}}};D.clean=function(f,g){if(g._inputDomain){var q=!1,t=g._id;f=f._fullLayout._axisConstraintGroups;for(var u=0;u<f.length;u++)if(f[u][t]){q=!0;break}q&&"domain"===g.constrain||(g._input.domain=g.domain=g._inputDomain,delete g._inputDomain)}}},{"../../constants/alignment":717,"../../constants/numerical":724,"../../lib":749,"./autorange":796,
"./axis_ids":800,"./scale_zoom":815}],805:[function(b,y,D){function n(ua,ta,oa,va){ta=C.ensureSingle(ua.draglayer,ta,oa,function(ma){ma.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ua.id)});ta.call(N,va);return ta.node()}function m(ua,ta,oa,va,ma,pa,za){ua=n(ua,"rect",ta,oa);E.select(ua).call(I.setRect,va,ma,pa,za);return ua}function p(ua,ta){for(var oa=0;oa<ua.length;oa++)if(!ua[oa].fixedrange)return ta;return""}function h(ua,ta){var oa=ua.range[ta];ta=Math.abs(oa-
ua.range[1-ta]);if("date"===ua.type)return oa;if("log"===ua.type)return ua=Math.ceil(Math.max(0,-Math.log(ta)/Math.LN10))+3,E.format("."+ua+"g")(Math.pow(10,oa));ua=Math.floor(Math.log(Math.abs(oa))/Math.LN10)-Math.floor(Math.log(ta)/Math.LN10)+4;return E.format("."+String(ua)+"g")(oa)}function a(ua,ta,oa,va,ma){for(var pa=0;pa<ua.length;pa++){var za=ua[pa];if(!za.fixedrange)if(za.rangebreaks){var qa="y"===za._id.charAt(0),Ca=qa?1-oa:oa;va[za._name+".range[0]"]=za.l2r(za.p2l((qa?1-ta:ta)*za._length));
va[za._name+".range[1]"]=za.l2r(za.p2l(Ca*za._length))}else qa=za._rl[0],Ca=za._rl[1]-qa,va[za._name+".range[0]"]=za.l2r(qa+Ca*ta),va[za._name+".range[1]"]=za.l2r(qa+Ca*oa)}ma&&ma.length&&(ua=(ta+(1-oa))/2,a(ma,ua,1-ua,va,[]))}function d(ua,ta){for(var oa=0;oa<ua.length;oa++){var va=ua[oa];if(!va.fixedrange)if(va.rangebreaks){var ma=va._length,pa=va.p2l(0+ta)-va.p2l(0);ma=va.p2l(ma+ta)-va.p2l(ma);pa=(pa+ma)/2;va.range=[va.l2r(va._rl[0]-pa),va.l2r(va._rl[1]-pa)]}else va.range=[va.l2r(va._rl[0]-ta/
va._m),va.l2r(va._rl[1]-ta/va._m)]}}function e(ua,ta,oa){return ua?"nsew"===ua?oa?"":"pan"===ta?"move":"crosshair":ua.toLowerCase()+"-resize":"pointer"}function l(ua,ta,oa,va,ma){return ua.append("path").attr("class","zoombox").style({fill:.2<ta?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+oa+", "+va+")").attr("d",ma+"Z")}function k(ua,ta,oa){return ua.append("path").attr("class","zoombox-corners").style({fill:G.background,stroke:G.defaultLine,"stroke-width":1,
opacity:0}).attr("transform","translate("+ta+", "+oa+")").attr("d","M0,0Z")}function c(ua,ta,oa,va,ma,pa){ua.attr("d",va+"M"+oa.l+","+oa.t+"v"+oa.h+"h"+oa.w+"v-"+oa.h+"h-"+oa.w+"Z");f(ua,ta,ma,pa)}function f(ua,ta,oa,va){oa||(ua.transition().style("fill",.2<va?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ta.transition().style("opacity",1).duration(200))}function g(ua){E.select(ua).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function q(ua){sa&&
ua.data&&ua._context.showTips&&(C.notifier(C._(ua,"Double-click to zoom back out"),"long"),sa=!1)}function t(ua){var ta=Math.floor(Math.min(ua.b-ua.t,ua.r-ua.l,na)/2);return"M"+(ua.l-3.5)+","+(ua.t-.5+ta)+"h3v"+-ta+"h"+ta+"v-3h-"+(ta+3)+"ZM"+(ua.r+3.5)+","+(ua.t-.5+ta)+"h-3v"+-ta+"h"+-ta+"v-3h"+(ta+3)+"ZM"+(ua.r+3.5)+","+(ua.b+.5-ta)+"h-3v"+ta+"h"+-ta+"v3h"+(ta+3)+"ZM"+(ua.l-3.5)+","+(ua.b+.5-ta)+"h3v"+ta+"h"+ta+"v3h-"+(ta+3)+"Z"}function u(ua,ta,oa,va){for(var ma=!1,pa={},za={},qa,Ca,Ka,Oa,kb=0;kb<
ta.length;kb++){var mb=ta[kb];for(qa in oa)if(mb[qa]){for(Ka in mb)("x"===Ka.charAt(0)?oa:va)[Ka]||(pa[Ka]=qa);for(Ca in va)mb[Ca]&&(ma=!0)}for(Ca in va)if(mb[Ca])for(Oa in mb)("x"===Oa.charAt(0)?oa:va)[Oa]||(za[Oa]=Ca)}ma&&(C.extendFlat(pa,za),za={});ta={};oa=[];for(Ka in pa)va=X(ua,Ka),oa.push(va),ta[va._id]=va;Ka={};va=[];for(Oa in za)qa=X(ua,Oa),va.push(qa),Ka[qa._id]=qa;return{xaHash:ta,yaHash:Ka,xaxes:oa,yaxes:va,xLinks:pa,yLinks:za,isSubplotConstrained:ma}}function w(ua,ta){if(z){var oa=void 0!==
ua.onwheel?"wheel":"mousewheel";ua._onwheel&&ua.removeEventListener(oa,ua._onwheel);ua._onwheel=ta;ua.addEventListener(oa,ta,{passive:!1})}else void 0!==ua.onwheel?ua.onwheel=ta:void 0!==ua.onmousewheel?ua.onmousewheel=ta:ua.isAddedWheelEvent||(ua.isAddedWheelEvent=!0,ua.addEventListener("wheel",ta,{passive:!1}))}function x(ua){var ta=[],oa;for(oa in ua)ta.push(ua[oa]);return ta}var E=b("d3"),F=b("tinycolor2"),z=b("has-passive-events"),B=b("../../registry"),C=b("../../lib"),v=b("../../lib/svg_text_utils"),
G=b("../../components/color"),I=b("../../components/drawing"),J=b("../../components/fx"),K=b("./axes"),N=b("../../lib/setcursor"),H=b("../../components/dragelement");D=b("../../components/dragelement/helpers");var L=D.selectingOrDrawing,P=D.freeMode,Q=b("../../constants/alignment").FROM_TL,S=b("../../lib/clear_gl_canvases"),O=b("../../plot_api/subroutines").redrawReglTraces,U=b("../plots"),X=b("./axis_ids").getFromId,da=b("./select").prepSelect,ea=b("./select").clearSelect,ca=b("./select").selectOnClick,
ia=b("./scale_zoom"),ha=b("./constants"),fa=ha.MINDRAG,na=ha.MINZOOM,sa=!0;y.exports={makeDragBox:function(ua,ta,oa,va,ma,pa,za,qa){function Ca(){Ba=ta.xaxis;Ma=ta.yaxis;vb=Ba._length;zb=Ma._length;Xa=Ba._offset;pb=Ma._offset;$a={};$a[Ba._id]=Ba;lb={};lb[Ma._id]=Ma;if(za&&qa)for(var xc=ta.overlays,Mc=0;Mc<xc.length;Mc++){var dd=xc[Mc].xaxis;$a[dd._id]=dd;dd=xc[Mc].yaxis;lb[dd._id]=dd}Ra=x($a);jb=x(lb);pc=p(Ra,qa);Ac=p(jb,za);ed=!Ac&&!pc;Jb=u(ua,ua._fullLayout._axisConstraintGroups,$a,lb);Zb=u(ua,
ua._fullLayout._axisMatchGroups,$a,lb);Rc=qa||Jb.isSubplotConstrained||Zb.isSubplotConstrained;id=za||Jb.isSubplotConstrained||Zb.isSubplotConstrained;xc=ua._fullLayout;Tc=xc._has("scattergl");wd=xc._has("splom");Fb=xc._has("svg")}function Ka(xc,Mc){var dd=tc.gd;if(0<=dd._fullLayout._activeShapeIndex)dd._fullLayout._deactivateShape(dd);else{var bd=dd._fullLayout.clickmode;g(dd);2!==xc||eb||ra();if(Za)-1<bd.indexOf("select")&&ca(Mc,dd,Ra,jb,ta.id,tc),-1<bd.indexOf("event")&&J.click(dd,Mc,ta.id);else if(1===
xc&&eb){var qd=za?Ma:Ba;xc="s"===za||"w"===qa?0:1;var Bd=qd._name+".range["+xc+"]";xc=h(qd,xc);Mc="left";bd="middle";if(!qd.fixedrange&&(za?(bd="n"===za?"top":"bottom","right"===qd.side&&(Mc="right")):"e"===qa&&(Mc="right"),dd._context.showAxisRangeEntryBoxes))E.select(qc).call(v.makeEditable,{gd:dd,immediate:!0,background:dd._fullLayout.paper_bgcolor,text:String(xc),fill:qd.tickfont?qd.tickfont.color:"#444",horizontalAlign:Mc,verticalAlign:bd}).on("edit",function(md){md=qd.d2r(md);void 0!==md&&B.call("_guiRelayout",
dd,Bd,md)})}}}function Oa(xc,Mc,dd){xc=qc.getBoundingClientRect();vc=Mc-xc.left;xb=dd-xc.top;Ab={l:vc,r:vc,w:0,t:xb,b:xb,h:0};jc=ua._hmpixcount?ua._hmlumcount/ua._hmpixcount:F(ua._fullLayout.plot_bgcolor).getLuminance();Bc="M0,0H"+vb+"V"+zb+"H0V0";Ic=!1;ec="xy";yb=!1;ic=l(Na,jc,Xa,pb,Bc);Gb=k(Na,Xa,pb)}function kb(xc,Mc){function dd(){ec="";Ab.r=Ab.l;Ab.t=Ab.b;Gb.attr("d","M0,0Z")}if(ua._transitioningWithDuration)return!1;xc=Math.max(0,Math.min(vb,xc+vc));Mc=Math.max(0,Math.min(zb,Mc+xb));var bd=
Math.abs(xc-vc),qd=Math.abs(Mc-xb);Ab.l=Math.min(vc,xc);Ab.r=Math.max(vc,xc);Ab.t=Math.min(xb,Mc);Ab.b=Math.max(xb,Mc);Jb.isSubplotConstrained?bd>na||qd>na?(ec="xy",bd/vb>qd/zb?(qd=bd*zb/vb,xb>Mc?Ab.t=xb-qd:Ab.b=xb+qd):(bd=qd*vb/zb,vc>xc?Ab.l=vc-bd:Ab.r=vc+bd),Gb.attr("d",t(Ab))):dd():Zb.isSubplotConstrained?bd>na||qd>na?(ec="xy",xc=Math.min(Ab.l/vb,(zb-Ab.b)/zb),Mc=Math.max(Ab.r/vb,(zb-Ab.t)/zb),Ab.l=xc*vb,Ab.r=Mc*vb,Ab.b=(1-xc)*zb,Ab.t=(1-Mc)*zb,Gb.attr("d",t(Ab))):dd():!Ac||qd<Math.min(Math.max(.6*
bd,fa),na)?bd<fa||!pc?dd():(Ab.t=0,Ab.b=zb,ec="x",Gb.attr("d","M"+(Ab.l-.5)+","+(xb-na-.5)+"h-3v"+(2*na+1)+"h3ZM"+(Ab.r+.5)+","+(xb-na-.5)+"h3v"+(2*na+1)+"h-3Z")):!pc||bd<Math.min(.6*qd,na)?(Ab.l=0,Ab.r=vb,ec="y",Gb.attr("d","M"+(vc-na-.5)+","+(Ab.t-.5)+"v-3h"+(2*na+1)+"v3ZM"+(vc-na-.5)+","+(Ab.b+.5)+"v3h"+(2*na+1)+"v-3Z")):(ec="xy",Gb.attr("d",t(Ab)));Ab.w=Ab.r-Ab.l;Ab.h=Ab.b-Ab.t;ec&&(yb=!0);ua._dragged=yb;c(ic,Gb,Ab,Bc,Ic,jc);mb();ua.emit("plotly_relayouting",ac);Ic=!0}function mb(){ac={};if("xy"===
ec||"x"===ec)a(Ra,Ab.l/vb,Ab.r/vb,ac,Jb.xaxes),fb("x",ac);if("xy"===ec||"y"===ec)a(jb,(zb-Ab.b)/zb,(zb-Ab.t)/zb,ac,Jb.yaxes),fb("y",ac)}function tb(){mb();g(ua);Ea();q(ua)}function nb(xc){function Mc(md,Fd,Od){if(!md.fixedrange){var sd=C.simpleMap(md.range,md.r2l),cd=sd[0]+(sd[1]-sd[0])*Fd;md.range=sd.map(function(Gd){return md.l2r(cd+(Gd-cd)*Od)})}}if(ua._context._scrollZoom.cartesian||ua._fullLayout._enablescrollzoom)if(tc.plotinfo.selection=!1,ea(ua),ua._transitioningWithDuration)xc.preventDefault(),
xc.stopPropagation();else{Ca();clearTimeout(Lb);var dd=-xc.deltaY;isFinite(dd)||(dd=xc.wheelDelta/10);if(isFinite(dd)){dd=Math.exp(-Math.min(Math.max(dd,-20),20)/200);var bd=Oc.draglayer.select(".nsewdrag").node().getBoundingClientRect(),qd=(xc.clientX-bd.left)/bd.width;bd=(bd.bottom-xc.clientY)/bd.height;var Bd;if(Rc){qa||(qd=.5);for(Bd=0;Bd<Ra.length;Bd++)Mc(Ra[Bd],qd,dd);fb("x");Eb[2]*=dd;Eb[0]+=Eb[2]*qd*(1/dd-1)}if(id){za||(bd=.5);for(Bd=0;Bd<jb.length;Bd++)Mc(jb[Bd],bd,dd);fb("y");Eb[3]*=dd;
Eb[1]+=Eb[3]*(1-bd)*(1/dd-1)}Ia(Eb);ab();ua.emit("plotly_relayouting",ac);Lb=setTimeout(function(){Eb=[0,0,vb,zb];Ea()},fc);xc.preventDefault()}else C.log("Did not find wheel motion attributes: ",xc)}}function Ta(xc,Mc){function dd(md,Fd,Od){for(var sd=1-Fd,cd,Gd,Nd=0;Nd<md.length;Nd++){var Pd=md[Nd];if(!Pd.fixedrange){cd=Pd;Gd=Od/Pd._length;Gd=Pd._rl[sd]+(Pd._rl[Fd]-Pd._rl[sd])/(1-(0<=Gd?Math.min(Gd,.9):1/(1/Math.max(Gd,-.3)+3.222)));var Ke=Pd.l2r(Gd);!1!==Ke&&void 0!==Ke&&(Pd.range[Fd]=Ke)}}return cd._length*
(cd._rl[Fd]-Gd)/(cd._rl[Fd]-cd._rl[sd])}if(!ua._transitioningWithDuration){ua._fullLayout._replotting=!0;if("ew"===pc||"ns"===Ac)pc&&(d(Ra,xc),fb("x")),Ac&&(d(jb,Mc),fb("y")),Ia([pc?-xc:0,Ac?-Mc:0,vb,zb]);else{if(Jb.isSubplotConstrained&&pc&&Ac){var bd="w"===pc===("n"===Ac)?1:-1;Mc=(xc/vb+bd*Mc/zb)/2;xc=Mc*vb;Mc=bd*Mc*zb}"w"===pc?xc=dd(Ra,0,xc):"e"===pc?xc=dd(Ra,1,-xc):pc||(xc=0);"n"===Ac?Mc=dd(jb,1,Mc):"s"===Ac?Mc=dd(jb,0,-Mc):Ac||(Mc=0);bd="w"===pc?xc:0;var qd="n"===Ac?Mc:0;if(Jb.isSubplotConstrained){var Bd;
if(!pc&&1===Ac.length){for(Bd=0;Bd<Ra.length;Bd++)Ra[Bd].range=Ra[Bd]._r.slice(),ia(Ra[Bd],1-Mc/zb);xc=Mc*vb/zb;bd=xc/2}if(!Ac&&1===pc.length){for(Bd=0;Bd<jb.length;Bd++)jb[Bd].range=jb[Bd]._r.slice(),ia(jb[Bd],1-xc/vb);Mc=xc*zb/vb;qd=Mc/2}}fb("x");fb("y");Ia([bd,qd,vb-xc,zb-Mc])}ab();ua.emit("plotly_relayouting",ac)}}function fb(xc,Mc){var dd=Zb.isSubplotConstrained?{x:jb,y:Ra}[xc]:Zb[xc+"axes"];xc=Zb.isSubplotConstrained?{x:Ra,y:jb}[xc]:[];for(var bd=0;bd<dd.length;bd++){var qd=dd[bd],Bd=qd._id;
Bd=Zb.xLinks[Bd]||Zb.yLinks[Bd];if(Bd=xc[0]||$a[Bd]||lb[Bd])Mc?(Mc[qd._name+".range[0]"]=Mc[Bd._name+".range[0]"],Mc[qd._name+".range[1]"]=Mc[Bd._name+".range[1]"]):qd.range=Bd.range.slice()}}function ab(){function xc(qd){for(dd=0;dd<qd.length;dd++)qd[dd].fixedrange||Mc.push(qd[dd]._id)}var Mc=[],dd;Rc&&(xc(Ra),xc(Jb.xaxes),xc(Zb.xaxes));id&&(xc(jb),xc(Jb.yaxes),xc(Zb.yaxes));ac={};for(dd=0;dd<Mc.length;dd++){var bd=X(ua,Mc[dd]);K.drawOne(ua,bd,{skipTitle:!0});ac[bd._name+".range[0]"]=bd.range[0];
ac[bd._name+".range[1]"]=bd.range[1]}K.redrawComponents(ua,Mc)}function ra(){if(!ua._transitioningWithDuration){var xc=ua._context.doubleClick,Mc=[];pc&&(Mc=Mc.concat(Ra));Ac&&(Mc=Mc.concat(jb));Zb.xaxes&&(Mc=Mc.concat(Zb.xaxes));Zb.yaxes&&(Mc=Mc.concat(Zb.yaxes));var dd={},bd;if("reset+autosize"===xc)for(xc="autosize",bd=0;bd<Mc.length;bd++){var qd=Mc[bd];if(qd._rangeInitial&&(qd.range[0]!==qd._rangeInitial[0]||qd.range[1]!==qd._rangeInitial[1])||!qd._rangeInitial&&!qd.autorange){xc="reset";break}}if("autosize"===
xc)for(bd=0;bd<Mc.length;bd++)qd=Mc[bd],qd.fixedrange||(dd[qd._name+".autorange"]=!0);else if("reset"===xc){if(pc||Jb.isSubplotConstrained)Mc=Mc.concat(Jb.xaxes);Ac&&!Jb.isSubplotConstrained&&(Mc=Mc.concat(Jb.yaxes));Jb.isSubplotConstrained&&(pc?Ac||(Mc=Mc.concat(jb)):Mc=Mc.concat(Ra));for(bd=0;bd<Mc.length;bd++)qd=Mc[bd],qd.fixedrange||(qd._rangeInitial?(xc=qd._rangeInitial,dd[qd._name+".range[0]"]=xc[0],dd[qd._name+".range[1]"]=xc[1]):dd[qd._name+".autorange"]=!0)}ua.emit("plotly_doubleclick",null);
B.call("_guiRelayout",ua,dd)}}function Ea(){Ia([0,0,vb,zb]);C.syncOrAsync([U.previousPromises,function(){ua._fullLayout._replotting=!1;B.call("_guiRelayout",ua,ac)}],ua)}function Ia(xc){var Mc=ua._fullLayout,dd=Mc._plots;Mc=Mc._subplots.cartesian;var bd;wd&&B.subplotsRegistry.splom.drag(ua);if(Tc)for(bd=0;bd<Mc.length;bd++){var qd=dd[Mc[bd]];var Bd=qd.xaxis;var md=qd.yaxis;if(qd._scene){var Fd=C.simpleMap(Bd.range,Bd.r2l);md=C.simpleMap(md.range,md.r2l);qd._scene.update({range:[Fd[0],md[0],Fd[1],
md[1]]})}}if(wd||Tc)S(ua),O(ua);if(Fb){Fd=xc[2]/Ba._length;var Od=xc[3]/Ma._length;for(bd=0;bd<Mc.length;bd++){qd=dd[Mc[bd]];Bd=qd.xaxis;md=qd.yaxis;var sd=id&&!md.fixedrange&&lb[md._id];if(Rc&&!Bd.fixedrange&&$a[Bd._id]){var cd=Fd;var Gd=qa?xc[0]:ib(Bd,cd)}else Zb.xaHash[Bd._id]?(cd=Fd,Gd=xc[0]*Bd._length/Ba._length):Zb.yaHash[Bd._id]?(cd=Od,Gd="ns"===Ac?-xc[1]*Bd._length/Ma._length:ib(Bd,cd,{n:"top",s:"bottom"}[Ac])):(cd=Va(Bd,Fd,Od),Gd=rb(Bd,cd));if(sd){sd=Od;var Nd=za?xc[1]:ib(md,sd)}else Zb.yaHash[md._id]?
(sd=Od,Nd=xc[1]*md._length/Ma._length):Zb.xaHash[md._id]?(sd=Fd,Nd="ew"===pc?-xc[0]*md._length/Ba._length:ib(md,sd,{e:"right",w:"left"}[pc])):(sd=Va(md,Fd,Od),Nd=rb(md,sd));if(cd||sd){cd||(cd=1);sd||(sd=1);Bd=Bd._offset-Gd/cd;md=md._offset-Nd/sd;qd.clipRect.call(I.setTranslate,Gd,Nd).call(I.setScale,cd,sd);qd.plot.call(I.setTranslate,Bd,md).call(I.setScale,1/cd,1/sd);if(cd!==qd.xScaleFactor||sd!==qd.yScaleFactor)I.setPointGroupScale(qd.zoomScalePts,cd,sd),I.setTextPointsScale(qd.zoomScaleTxt,cd,sd);
I.hideOutsideRangePoints(qd.clipOnAxisFalseTraces,qd);qd.xScaleFactor=cd;qd.yScaleFactor=sd}}}}function Va(xc,Mc,dd){return xc.fixedrange?0:Rc&&Jb.xaHash[xc._id]?Mc:id&&(Jb.isSubplotConstrained?Jb.xaHash:Jb.yaHash)[xc._id]?dd:0}function rb(xc,Mc){return Mc?(xc.range=xc._r.slice(),ia(xc,Mc),ib(xc,Mc)):0}function ib(xc,Mc,dd){return xc._length*(1-Mc)*Q[dd||xc.constraintoward||"middle"]}var Na=ua._fullLayout._zoomlayer,Za="nsew"===za+qa,eb=1===(za+qa).length,Ba,Ma,$a,lb,Ra,jb,Xa,pb,vb,zb,Jb,Zb,pc,Ac,
ed,Rc,id,Tc,wd,Fb,ac;Ca();var Jc=e(Ac+pc,ua._fullLayout.dragmode,Za),qc=m(ta,za+qa+"drag",Jc,oa,va,ma,pa);if(ed&&!Za)return qc.onmousedown=null,qc.style.pointerEvents="none",qc;var tc={element:qc,gd:ua,plotinfo:ta,prepFn:function(xc,Mc,dd){var bd=tc.dragmode,qd=ua._fullLayout.dragmode;qd!==bd&&(tc.dragmode=qd);Ca();ed||(Za?xc.shiftKey?"pan"===qd?qd="zoom":L(qd)||(qd="pan"):xc.ctrlKey&&(qd="pan"):qd="pan");P(qd)?tc.minDrag=1:tc.minDrag=void 0;L(qd)?(tc.xaxes=Ra,tc.yaxes=jb,da(xc,Mc,dd,tc,qd)):(tc.clickFn=
Ka,L(bd)&&(tc.plotinfo.selection=!1,ea(ua)),ed||("zoom"===qd?(tc.moveFn=kb,tc.doneFn=tb,tc.minDrag=1,Oa(xc,Mc,dd)):"pan"===qd&&(tc.moveFn=Ta,tc.doneFn=Ea)));ua._fullLayout._redrag=function(){var Bd=ua._dragdata;Bd&&Bd.element===qc&&!L(ua._fullLayout.dragmode)&&(Ca(),Ia([0,0,vb,zb]),tc.moveFn(Bd.dx,Bd.dy))}}};H.init(tc);var vc,xb,Ab,jc,Bc,Ic,ec,ic,Gb,yb,Eb=[0,0,vb,zb],Lb=null,fc=ha.REDRAWDELAY,Oc=ta.mainplot?ua._fullLayout._plots[ta.mainplot]:ta;1!==za.length*qa.length&&w(qc,nb);return qc},makeDragger:n,
makeRectDragger:m,makeZoombox:l,makeCorners:k,updateZoombox:c,xyCorners:t,transitionZoombox:f,removeZoombox:g,showDoubleClickNotifier:q,attachWheelEventHandler:w}},{"../../components/color":615,"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/drawing":637,"../../components/fx":655,"../../constants/alignment":717,"../../lib":749,"../../lib/clear_gl_canvases":733,"../../lib/setcursor":769,"../../lib/svg_text_utils":773,"../../plot_api/subroutines":788,
"../../registry":880,"../plots":860,"./axes":797,"./axis_ids":800,"./constants":803,"./scale_zoom":815,"./select":816,d3:169,"has-passive-events":415,tinycolor2:548}],806:[function(b,y,D){var n=b("d3"),m=b("../../components/fx"),p=b("../../components/dragelement"),h=b("../../lib/setcursor"),a=b("./dragbox").makeDragBox,d=b("./constants").DRAGGERSIZE;D.initInteractions=function(e){var l=e._fullLayout;if(e._context.staticPlot)n.select(e).selectAll(".drag").remove();else if(l._has("cartesian")||l._has("splom")){Object.keys(l._plots||
{}).sort(function(c,f){return(l._plots[c].mainplot&&!0)===(l._plots[f].mainplot&&!0)?(c=c.split("y"),f=f.split("y"),c[0]===f[0]?Number(c[1]||1)-Number(f[1]||1):Number(c[0]||1)-Number(f[0]||1)):l._plots[c].mainplot?1:-1}).forEach(function(c){var f=l._plots[c],g=f.xaxis,q=f.yaxis;if(!f.mainplot){var t=a(e,f,g._offset,q._offset,g._length,q._length,"ns","ew");t.onmousemove=function(w){e._fullLayout._rehover=function(){e._fullLayout._hoversubplot===c&&e._fullLayout._plots[c]&&m.hover(e,w,c)};m.hover(e,
w,c);e._fullLayout._lasthover=t;e._fullLayout._hoversubplot=c};t.onmouseout=function(w){e._dragging||(e._fullLayout._hoversubplot=null,p.unhover(e,w))};e._context.showAxisDragHandles&&(a(e,f,g._offset-d,q._offset-d,d,d,"n","w"),a(e,f,g._offset+g._length,q._offset-d,d,d,"n","e"),a(e,f,g._offset-d,q._offset+q._length,d,d,"s","w"),a(e,f,g._offset+g._length,q._offset+q._length,d,d,"s","e"))}if(e._context.showAxisDragHandles){if(c===g._mainSubplot){var u=g._mainLinePosition;"top"===g.side&&(u-=d);a(e,
f,g._offset+.1*g._length,u,.8*g._length,d,"","ew");a(e,f,g._offset,u,.1*g._length,d,"","w");a(e,f,g._offset+.9*g._length,u,.1*g._length,d,"","e")}c===q._mainSubplot&&(g=q._mainLinePosition,"right"!==q.side&&(g-=d),a(e,f,g,q._offset+.1*q._length,d,.8*q._length,"ns",""),a(e,f,g,q._offset+.9*q._length,d,.1*q._length,"s",""),a(e,f,g,q._offset,d,.1*q._length,"n",""))}});var k=l._hoverlayer.node();k.onmousemove=function(c){c.target=e._fullLayout._lasthover;m.hover(e,c,l._hoversubplot)};k.onclick=function(c){c.target=
e._fullLayout._lasthover;m.click(e,c)};k.onmousedown=function(c){e._fullLayout._lasthover.onmousedown(c)};D.updateFx(e)}};D.updateFx=function(e){e=e._fullLayout;h(e._draggers,"pan"===e.dragmode?"move":"crosshair")}},{"../../components/dragelement":634,"../../components/fx":655,"../../lib/setcursor":769,"./constants":803,"./dragbox":805,d3:169}],807:[function(b,y,D){y.exports={clearOutlineControllers:function(n){(n=n._fullLayout._zoomlayer)&&n.selectAll(".outline-controllers").remove()},clearSelect:function(n){var m=
n._fullLayout._zoomlayer;m&&m.selectAll(".select-outline").remove();n._fullLayout._drawing=!1}}},{}],808:[function(b,y,D){function n(m,p){switch(m.type){case "log":return m.p2d(p);case "date":return m.p2r(p,0,m.calendar);default:return m.p2r(p)}}y.exports={p2r:n,r2p:function(m,p){switch(m.type){case "log":return m.d2p(p);case "date":return m.r2p(p,0,m.calendar);default:return m.r2p(p)}},axValue:function(m){var p="y"===m._id.charAt(0)?1:0;return function(h){return n(m,h[p])}},getTransform:function(m){return"translate("+
m.xaxis._offset+","+m.yaxis._offset+")"}}},{}],809:[function(b,y,D){var n=b("../../registry"),m=b("../../lib");y.exports=function(p){return function(h,a){h=h[p];if(Array.isArray(h)){var d=n.subplotsRegistry.cartesian,e=d.idRegex,l=a._subplots,k=l.xaxis,c=l.yaxis;l=l.cartesian;for(var f=a._has("cartesian")||a._has("gl2d"),g=0;g<h.length;g++){var q=h[g];if(m.isPlainObject(q)){var t=q.xref;q=q.yref;var u=e.x.test(t),w=e.y.test(q);if(u||w){f||m.pushUnique(a._basePlotModules,d);var x=!1;u&&-1===k.indexOf(t)&&
(k.push(t),x=!0);w&&-1===c.indexOf(q)&&(c.push(q),x=!0);x&&u&&w&&l.push(t+q)}}}}}}},{"../../lib":749,"../../registry":880}],810:[function(b,y,D){function n(x,E,F){return k.ensureSingle(x,E,F,function(z){z.datum(F)})}function m(x,E,F,z,B){for(var C=t.traceLayerClasses,v=x._fullLayout,G=v._modules,I,J,K=[],N=[],H=0;H<G.length;H++){I=G[H];J=I.name;var L=l.modules[J].categories;if(L.svg){var P=I.layerName||J+"layer";I=I.plot;F=g(F,I);J=F[0];F=F[1];J.length&&K.push({i:C.indexOf(P),className:P,plotMethod:I,
cdModule:J});L.zoomScale&&N.push("."+P)}}K.sort(function(Q,S){return Q.i-S.i});C=E.plot.selectAll("g.mlayer").data(K,function(Q){return Q.className});C.enter().append("g").attr("class",function(Q){return Q.className}).classed("mlayer",!0).classed("rangeplot",E.isRangePlot);C.exit().remove();C.order();C.each(function(Q){var S=e.select(this),O=Q.className;Q.plotMethod(x,E,Q.cdModule,S,z,B);-1===t.clipOnAxisFalseQuery.indexOf("."+O)&&f.setClipUrl(S,E.layerClipId,x)});v._has("scattergl")&&(I=l.getModule("scattergl"),
J=g(F,I)[0],I.plot(x,E,J));x._context.staticPlot||(E._hasClipOnAxisFalse&&(E.clipOnAxisFalseTraces=E.plot.selectAll(t.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),N.length&&(v=E.plot.selectAll(N.join(",")).selectAll(".trace"),E.zoomScalePts=v.selectAll("path.point"),E.zoomScaleTxt=v.selectAll(".textpoint")))}function p(x){x=x._fullLayout;var E=x._subplots.cartesian,F=E.length,z,B=[],C=[];for(z=0;z<F;z++){var v=E[z];var G=x._plots[v];var I=G.xaxis;var J=G.yaxis;I=I._mainAxis._id+J._mainAxis._id;
J=x._plots[I];G.overlays=[];I!==v&&J?(G.mainplot=I,G.mainplotinfo=J,C.push(v)):(G.mainplot=void 0,G.mainplotinfo=void 0,B.push(v))}for(z=0;z<C.length;z++)v=C[z],G=x._plots[v],G.mainplotinfo.overlays.push(G);E=B.concat(C);B=Array(F);for(z=0;z<F;z++){v=E[z];G=x._plots[v];I=G.xaxis;J=G.yaxis;I=[v,I.layer,J.layer,I.overlaying||"",J.overlaying||""];for(v=0;v<G.overlays.length;v++)I.push(G.overlays[v].id);B[z]=I}return B}function h(x,E){var F=E.plotgroup,z=E.id,B=t.layerValue2layerClass[E.xaxis.layer],
C=t.layerValue2layerClass[E.yaxis.layer];x=x._fullLayout._hasOnlyLargeSploms;if(E.mainplot){F=E.mainplotinfo;var v=F.plotgroup,G=z+"-x",I=z+"-y";E.gridlayer=F.gridlayer;E.zerolinelayer=F.zerolinelayer;w(F.overlinesBelow,"path",G);w(F.overlinesBelow,"path",I);w(F.overaxesBelow,"g",G);w(F.overaxesBelow,"g",I);E.plot=w(F.overplot,"g",z);w(F.overlinesAbove,"path",G);w(F.overlinesAbove,"path",I);w(F.overaxesAbove,"g",G);w(F.overaxesAbove,"g",I);E.xlines=v.select(".overlines-"+B).select("."+G);E.ylines=
v.select(".overlines-"+C).select("."+I);E.xaxislayer=v.select(".overaxes-"+B).select("."+G);E.yaxislayer=v.select(".overaxes-"+C).select("."+I)}else x?(E.xlines=w(F,"path","xlines-above"),E.ylines=w(F,"path","ylines-above"),E.xaxislayer=w(F,"g","xaxislayer-above"),E.yaxislayer=w(F,"g","yaxislayer-above")):(z=w(F,"g","layer-subplot"),E.shapelayer=w(z,"g","shapelayer"),E.imagelayer=w(z,"g","imagelayer"),E.gridlayer=w(F,"g","gridlayer"),E.zerolinelayer=w(F,"g","zerolinelayer"),w(F,"path","xlines-below"),
w(F,"path","ylines-below"),E.overlinesBelow=w(F,"g","overlines-below"),w(F,"g","xaxislayer-below"),w(F,"g","yaxislayer-below"),E.overaxesBelow=w(F,"g","overaxes-below"),E.plot=w(F,"g","plot"),E.overplot=w(F,"g","overplot"),E.xlines=w(F,"path","xlines-above"),E.ylines=w(F,"path","ylines-above"),E.overlinesAbove=w(F,"g","overlines-above"),w(F,"g","xaxislayer-above"),w(F,"g","yaxislayer-above"),E.overaxesAbove=w(F,"g","overaxes-above"),E.xlines=F.select(".xlines-"+B),E.ylines=F.select(".ylines-"+C),
E.xaxislayer=F.select(".xaxislayer-"+B),E.yaxislayer=F.select(".yaxislayer-"+C));x||(n(E.gridlayer,"g",E.xaxis._id),n(E.gridlayer,"g",E.yaxis._id),E.gridlayer.selectAll("g").map(function(J){return J[0]}).sort(q.idSort));E.xlines.style("fill","none").classed("crisp",!0);E.ylines.style("fill","none").classed("crisp",!0)}function a(x,E){if(x){var F={};x.each(function(v){v=v[0];e.select(this).remove();d(v,E);F[v]=!0});for(var z in E._plots){x=E._plots[z].overlays||[];for(var B=0;B<x.length;B++){var C=
x[B];F[C.id]&&C.plot.selectAll(".trace").remove()}}}}function d(x,E){E._draggers.selectAll("g."+x).remove();E._defs.select("#clip"+E._uid+x+"plot").remove()}var e=b("d3"),l=b("../../registry"),k=b("../../lib"),c=b("../plots"),f=b("../../components/drawing"),g=b("../get_data").getModuleCalcData,q=b("./axis_ids"),t=b("./constants"),u=b("../../constants/xmlns_namespaces"),w=k.ensureSingle;D.name="cartesian";D.attr=["xaxis","yaxis"];D.idRoot=["x","y"];D.idRegex=t.idRegex;D.attrRegex=t.attrRegex;D.attributes=
b("./attributes");D.layoutAttributes=b("./layout_attributes");D.supplyLayoutDefaults=b("./layout_defaults");D.transitionAxes=b("./transition_axes");D.finalizeSubplots=function(x,E){var F=E._subplots;E=F.xaxis;var z=F.yaxis,B=F.cartesian;F=B.concat(F.gl2d||[]);var C={},v={},G;for(G=0;G<F.length;G++){var I=F[G].split("y");C[I[0]]=1;v["y"+I[1]]=1}for(G=0;G<E.length;G++)if(I=E[G],!C[I]){var J=(x[q.id2name(I)]||{}).anchor;t.idRegex.y.test(J)||(J="y");B.push(I+J);F.push(I+J);v[J]||(v[J]=1,k.pushUnique(z,
J))}for(G=0;G<z.length;G++)J=z[G],v[J]||(I=(x[q.id2name(J)]||{}).anchor,t.idRegex.x.test(I)||(I="x"),B.push(I+J),F.push(I+J),C[I]||(C[I]=1,k.pushUnique(E,I)));if(!F.length){J=I="";for(var K in x)if(t.attrRegex.test(K))if("x"===K.charAt(0)){if(!I||+K.substr(5)<+I.substr(5))I=K}else if(!J||+K.substr(5)<+J.substr(5))J=K;I=I?q.name2id(I):"x";J=J?q.name2id(J):"y";E.push(I);z.push(J);B.push(I+J)}};D.plot=function(x,E,F,z){var B=x._fullLayout,C=B._subplots.cartesian,v=x.calcdata,G;if(!Array.isArray(E))for(E=
[],G=0;G<v.length;G++)E.push(G);for(G=0;G<C.length;G++){for(var I=C[G],J=B._plots[I],K=[],N,H=0;H<v.length;H++){var L=v[H],P=L[0].trace;if(P.xaxis+P.yaxis===I){if(-1!==E.indexOf(P.index)||P.carpet)N&&N[0].trace.xaxis+N[0].trace.yaxis===I&&-1!==["tonextx","tonexty","tonext"].indexOf(P.fill)&&-1===K.indexOf(N)&&K.push(N),K.push(L);N=L}}m(x,J,K,F,z)}};D.clean=function(x,E,F,z){var B=z._plots||{};x=E._plots||{};F=z._subplots||{};var C;if(z._hasOnlyLargeSploms&&!E._hasOnlyLargeSploms)for(C in B){var v=
B[C];v.plotgroup&&v.plotgroup.remove()}v=z._has&&z._has("gl");var G=E._has&&E._has("gl");if(v&&!G)for(C in B)v=B[C],v._scene&&v._scene.destroy();if(F.xaxis&&F.yaxis)for(B=q.listIds({_fullLayout:z}),C=0;C<B.length;C++)v=B[C],E[q.id2name(v)]||z._infolayer.selectAll(".g-"+v+"title").remove();C=z._has&&z._has("cartesian");E=E._has&&E._has("cartesian");if(C&&!E)a(z._cartesianlayer.selectAll(".subplot"),z),z._defs.selectAll(".axesclip").remove(),delete z._axisConstraintGroups;else if(F.cartesian)for(C=
0;C<F.cartesian.length;C++)E=F.cartesian[C],x[E]||(z._cartesianlayer.selectAll("."+E+",."+E+"-x,."+E+"-y").remove(),d(E,z))};D.drawFramework=function(x){var E=x._fullLayout,F=p(x);F=E._cartesianlayer.selectAll(".subplot").data(F,String);F.enter().append("g").attr("class",function(z){return"subplot "+z[0]});F.order();F.exit().call(a,E);F.each(function(z){z=z[0];var B=E._plots[z];B.plotgroup=e.select(this);h(x,B);B.draglayer=w(E._draggers,"g",z)})};D.rangePlot=function(x,E,F){h(x,E);m(x,E,F);c.style(x)};
D.toSVG=function(x){var E=x._fullLayout._glimages,F=e.select(x).selectAll(".svg-container");F.filter(function(z,B){return B===F.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var z=this.toDataURL("image/png");E.append("svg:image").attr({xmlns:u.svg,"xlink:href":z,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})};D.updateFx=b("./graph_interact").updateFx},{"../../components/drawing":637,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../registry":880,
"../get_data":834,"../plots":860,"./attributes":795,"./axis_ids":800,"./constants":803,"./graph_interact":806,"./layout_attributes":811,"./layout_defaults":812,"./transition_axes":821,d3:169}],811:[function(b,y,D){D=b("../font_attributes");var n=b("../../components/color/attributes"),m=b("../../components/drawing/attributes").dash,p=b("../../lib/extend").extendFlat,h=b("../../plot_api/plot_template").templatedArray;b("../../constants/docs");b("../../constants/docs");var a=b("../../constants/numerical").ONEDAY;
b=b("./constants");var d=b.HOUR_PATTERN,e=b.WEEKDAY_PATTERN;y.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:n.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:D({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:"- linear log date category multicategory".split(" "),dflt:"-",editType:"calc",_noTemplating:!0},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],
dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",
values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:"left center right top middle bottom".split(" "),editType:"plot"},matches:{valType:"enumerated",values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"calc"},rangebreaks:h("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},
bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[e,d,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:a},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",
min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],
dflt:"instant",editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",
dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:p({},m,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"data",editType:"none"},tickfont:D({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",
values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",
dflt:"",editType:"ticks"},tickformatstops:h("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:n.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",
min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:n.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:n.defaultLine,editType:"ticks"},
dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",
min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:"trace;category ascending;category descending;array;total ascending;total descending;min ascending;min descending;max ascending;max descending;sum ascending;sum descending;mean ascending;mean descending;median ascending;median descending".split(";"),dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",
editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:D({editType:"ticks"})}}},{"../../components/color/attributes":614,"../../components/drawing/attributes":636,"../../constants/docs":719,"../../constants/numerical":724,"../../lib/extend":739,"../../plot_api/plot_template":787,"../font_attributes":825,"./constants":803}],812:[function(b,y,D){function n(E,F,z){Array.isArray(E[F])?
E[F].push(z):E[F]=[z]}var m=b("../../lib"),p=b("../../components/color"),h=b("../../components/fx/helpers").isUnifiedHover,a=b("../../components/fx/hovermode_defaults"),d=b("../../plot_api/plot_template"),e=b("../layout_attributes"),l=b("./layout_attributes"),k=b("./type_defaults"),c=b("./axis_defaults"),f=b("./constraints").handleConstraintDefaults,g=b("./position_defaults");D=b("./axis_ids");var q=D.id2name,t=D.name2id,u=b("./constants").AX_ID_PATTERN;b=b("../../registry");var w=b.traceIs,x=b.getComponentMethod;
y.exports=function(E,F,z){function B(){pa._traceIndices=(J[oa]||[]).map(function(tb){return tb._expandedIndex});pa._annIndices=[];pa._shapeIndices=[];pa._imgIndices=[];pa._subplotsWith=[];pa._counterAxes=[];pa._name=pa._attr=oa;pa._id=va}function C(tb,nb){return m.coerce(ma,pa,l,tb,nb)}function v(tb,nb){return m.coerce2(ma,pa,l,tb,nb)}function G(tb,nb){tb="x"===tb?ha:fa;for(var Ta=[],fb=0;fb<tb.length;fb++){var ab=tb[fb];ab===nb||(E[ab]||{}).overlaying||Ta.push(t(ab))}return Ta}function I(){var tb=
ma.matches;u.test(tb)&&-1===na.indexOf(tb)&&(sa[tb]=ma.type,ua=Object.keys(sa))}var J={},K={},N={},H={},L={},P={},Q={},S={},O={},U={},X,da;for(X=0;X<z.length;X++){var ea=z[X];if(w(ea,"cartesian")||w(ea,"gl2d")){if(ea.xaxis){var ca=q(ea.xaxis);n(J,ca,ea)}else if(ea.xaxes)for(da=0;da<ea.xaxes.length;da++)n(J,q(ea.xaxes[da]),ea);if(ea.yaxis){var ia=q(ea.yaxis);n(J,ia,ea)}else if(ea.yaxes)for(da=0;da<ea.yaxes.length;da++)n(J,q(ea.yaxes[da]),ea);"funnel"===ea.type?"h"===ea.orientation?(ca&&(K[ca]=!0),
ia&&(Q[ia]=!0)):ia&&(N[ia]=!0):"image"===ea.type?(ia&&(S[ia]=!0),ca&&(S[ca]=!0)):(ia&&(L[ia]=!0,P[ia]=!0),(!w(ea,"carpet")||"carpet"===ea.type&&!ea._cheater)&&ca&&(H[ca]=!0));"carpet"===ea.type&&ea._cheater&&ca&&(K[ca]=!0);w(ea,"2dMap")&&(O[ca]=!0,O[ia]=!0);w(ea,"oriented")&&(U["h"===ea.orientation?ia:ca]=!0)}}da=F._subplots;X=da.xaxis;ca=da.yaxis;var ha=m.simpleMap(X,q),fa=m.simpleMap(ca,q);da=ha.concat(fa);ea=p.background;X.length&&ca.length&&(ea=m.coerce(E,F,e,"plot_bgcolor"));ea=p.combine(ea,
F.paper_bgcolor);ca={x:ca,y:X};var na=ca.x.concat(ca.y),sa={},ua=[];ia=a(E,F,z);var ta=h(ia);for(X=0;X<da.length;X++){var oa=da[X];var va=t(oa);z=oa.charAt(0);m.isPlainObject(E[oa])||(E[oa]={});var ma=E[oa];var pa=d.newContainer(F,oa,z+"axis");B();var za={letter:z,font:F.font,outerTicks:O[oa],showGrid:!U[oa],data:J[oa]||[],bgColor:ea,calendar:F.calendar,automargin:!0,visibleDflt:"x"===z&&!H[oa]&&K[oa]||"y"===z&&!L[oa]&&N[oa],reverseDflt:"y"===z&&(!P[oa]&&Q[oa]||S[oa]),splomStash:((F._splomAxes||{})[z]||
{})[va]};C("uirevision",F.uirevision);k(ma,pa,C,za);c(ma,pa,C,za,F);za=ta&&z===ia.charAt(0);var qa=v("spikecolor",ta?pa.color:void 0),Ca=v("spikethickness",ta?1.5:void 0),Ka=v("spikedash",ta?"dot":void 0),Oa=v("spikemode",ta?"across":void 0),kb=v("spikesnap",ta?"hovered data":void 0);C("showspikes",!!za||!!qa||!!Ca||!!Ka||!!Oa||!!kb)||(delete pa.spikecolor,delete pa.spikethickness,delete pa.spikedash,delete pa.spikemode,delete pa.spikesnap);g(ma,pa,C,{letter:z,counterAxes:ca[z],overlayableAxes:G(z,
oa),grid:F.grid});C("title.standoff");I();pa._input=ma}for(X=0;X<ua.length;)va=ua[X++],oa=q(va),z=oa.charAt(0),m.isPlainObject(E[oa])||(E[oa]={}),ma=E[oa],pa=d.newContainer(F,oa,z+"axis"),B(),K={letter:z,font:F.font,outerTicks:O[oa],showGrid:!U[oa],data:[],bgColor:ea,calendar:F.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,splomStash:((F._splomAxes||{})[z]||{})[va]},C("uirevision",F.uirevision),pa.type=sa[va]||"linear",c(ma,pa,C,K,F),g(ma,pa,C,{letter:z,counterAxes:ca[z],overlayableAxes:G(z,
oa),grid:F.grid}),C("fixedrange"),I(),pa._input=ma;O=x("rangeslider","handleDefaults");U=x("rangeselector","handleDefaults");for(X=0;X<ha.length;X++)oa=ha[X],ma=E[oa],pa=F[oa],O(E,F,oa),"date"===pa.type&&U(ma,pa,F,fa,pa.calendar),C("fixedrange");for(X=0;X<fa.length;X++)oa=fa[X],ma=E[oa],pa=F[oa],O=F[q(pa.anchor)],O=x("rangeslider","isVisible")(O),C("fixedrange",O);O=F._axisConstraintGroups=[];U=F._axisMatchGroups=[];K=na.concat(ua);da=da.concat(m.simpleMap(ua,q));for(X=0;X<da.length;X++)oa=da[X],
z=oa.charAt(0),ma=E[oa],pa=F[oa],N="y"===z&&!ma.hasOwnProperty("scaleanchor")&&S[oa]?pa.anchor:void 0,H=!ma.hasOwnProperty("constrain")&&S[oa]?"domain":void 0,f(ma,pa,C,{allAxisIds:K,layoutOut:F,scaleanchorDflt:N,constrainDflt:H});for(X=0;X<U.length;X++){S=U[X];K=da=null;for(va in S)pa=F[q(va)],pa.matches||(da=pa.range,K=pa.autorange);if(null===da||null===K)for(va in S){pa=F[q(va)];da=pa.range;K=pa.autorange;break}for(va in S)pa=F[q(va)],pa.matches&&(pa.range=da.slice(),pa.autorange=K),pa._matchGroup=
S;if(O.length)for(va in S)for(da=0;da<O.length;da++){S=O[da];for(var mb in S)va===mb&&(m.warn("Axis "+mb+" is set with both a *scaleanchor* and *matches* constraint; ignoring the scale constraint."),delete S[mb],2>Object.keys(S).length&&O.splice(da,1))}}}},{"../../components/color":615,"../../components/fx/helpers":651,"../../components/fx/hovermode_defaults":654,"../../lib":749,"../../plot_api/plot_template":787,"../../registry":880,"../layout_attributes":851,"./axis_defaults":799,"./axis_ids":800,
"./constants":803,"./constraints":804,"./layout_attributes":811,"./position_defaults":814,"./type_defaults":822}],813:[function(b,y,D){var n=b("tinycolor2").mix,m=b("../../components/color/attributes").lightFraction,p=b("../../lib");y.exports=function(h,a,d,e){function l(g,q){return p.coerce2(h,a,e.attributes,g,q)}e=e||{};var k=e.dfltColor,c=l("linecolor",k),f=l("linewidth");d("showline",e.showLine||!!c||!!f)||(delete a.linecolor,delete a.linewidth);c=n(k,e.bgColor,e.blend||m).toRgbString();c=l("gridcolor",
c);f=l("gridwidth");d("showgrid",e.showGrid||!!c||!!f)||(delete a.gridcolor,delete a.gridwidth);e.noZeroLine||(k=l("zerolinecolor",k),c=l("zerolinewidth"),d("zeroline",e.showGrid||!!k||!!c)||(delete a.zerolinecolor,delete a.zerolinewidth))}},{"../../components/color/attributes":614,"../../lib":749,tinycolor2:548}],814:[function(b,y,D){var n=b("fast-isnumeric"),m=b("../../lib");y.exports=function(p,h,a,d){var e=d.counterAxes||[],l=d.overlayableAxes||[],k=d.letter;d=d.grid;if(d){var c=d._domains[k][d._axisMap[h._id]];
var f=d._anchors[h._id];if(c){var g=d[k+"side"].split(" ")[0];var q=d.domain[k]["right"===g||"top"===g?1:0]}}c=c||[0,1];f=f||(n(p.position)?"free":e[0]||"free");g=g||("x"===k?"bottom":"left");q=q||0;"free"===m.coerce(p,h,{anchor:{valType:"enumerated",values:["free"].concat(e),dflt:f}},"anchor")&&a("position",q);m.coerce(p,h,{side:{valType:"enumerated",values:"x"===k?["bottom","top"]:["left","right"],dflt:g}},"side");e=!1;l.length&&(e=m.coerce(p,h,{overlaying:{valType:"enumerated",values:[!1].concat(l),
dflt:!1}},"overlaying"));e||(l=a("domain",c),l[0]>l[1]-1/4096&&(h.domain=c),m.noneOrAll(p.domain,h.domain,c));a("layer");return h}},{"../../lib":749,"fast-isnumeric":241}],815:[function(b,y,D){var n=b("../../constants/alignment").FROM_BL;y.exports=function(m,p,h){void 0===h&&(h=n[m.constraintoward||"center"]);var a=[m.r2l(m.range[0]),m.r2l(m.range[1])];h=a[0]+(a[1]-a[0])*h;m.range=m._input.range=[m.l2r(h+(a[0]-h)*p),m.l2r(h+(a[1]-h)*p)]}},{"../../constants/alignment":717}],816:[function(b,y,D){function n(ha,
fa,na,sa,ua,ta,oa){var va=fa._hoverdata,ma=-1<fa._fullLayout.clickmode.indexOf("event"),pa=[],za;if(va&&Array.isArray(va)&&!0!==va[0].hoverOnBox){a(ha,fa,ta);na=e(fa,na,sa,ua);va=va[0];sa=-1;ua=[];var qa;for(qa=0;qa<na.length;qa++){var Ca=na[qa];if(va.fullData._expandedIndex===Ca.cd[0].trace._expandedIndex){if(!0===va.hoverOnBox)break;void 0!==va.pointNumber?sa=va.pointNumber:void 0!==va.binNumber&&(sa=va.binNumber,ua=va.pointNumbers);break}}Ca={pointNumber:sa,pointNumbers:ua,searchInfo:Ca};if(0<
Ca.pointNumbers.length)a:{sa=[];for(va=0;va<na.length;va++)ua=na[va],ua.cd[0].trace.selectedpoints&&0<ua.cd[0].trace.selectedpoints.length&&sa.push(ua);if(1===sa.length&&(va=sa[0]===Ca.searchInfo)&&(sa=Ca.searchInfo.cd[0].trace,sa.selectedpoints.length===Ca.pointNumbers.length)){for(va=0;va<Ca.pointNumbers.length;va++)if(0>sa.selectedpoints.indexOf(Ca.pointNumbers[va])){va=!1;break a}va=!0;break a}va=!1}else{a:{for(sa=va=0;sa<na.length;sa++)if(ua=na[sa],ua=ua.cd[0].trace,ua.selectedpoints){if(1<ua.selectedpoints.length){va=
!1;break a}va+=ua.selectedpoints.length;if(1<va){va=!1;break a}}va=1===va}va=va&&(za=l(Ca))}if(va){oa&&oa.remove();for(za=0;za<na.length;za++)oa=na[za],oa._module.selectPoints(oa,!1);k(fa,na);d(ta);ma&&fa.emit("plotly_deselect",null)}else{ha=ha.shiftKey&&(void 0!==za?za:l(Ca));ha={pointNumber:Ca.pointNumber,searchInfo:Ca.searchInfo,subtract:ha};za=ta.selectionDefs.concat([ha]);Ca=h(za);for(za=0;za<na.length;za++)if(va=na[za]._module.selectPoints(na[za],Ca),va=f(va,na[za]),pa.length)for(sa=0;sa<va.length;sa++)pa.push(va[sa]);
else pa=va;pa={points:pa};k(fa,na,pa);ha&&ta&&ta.selectionDefs.push(ha);oa&&(na=ta.mergedPolygons,ha=C(ta.dragmode),G(g(na,ha),oa,ta));ma&&fa.emit("plotly_selected",pa)}}}function m(ha){return"pointNumber"in ha&&"searchInfo"in ha}function p(ha){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(fa,na,sa,ua){return ua.cd[0].trace._expandedIndex===ha.searchInfo.cd[0].trace._expandedIndex&&sa===ha.pointNumber},isRect:!1,degenerate:!1,subtract:ha.subtract}}function h(ha){for(var fa=[],na=m(ha[0])?
0:ha[0][0][0],sa=na,ua=m(ha[0])?0:ha[0][0][1],ta=ua,oa=0;oa<ha.length;oa++)if(m(ha[oa]))fa.push(p(ha[oa]));else{var va=N.tester(ha[oa]);va.subtract=ha[oa].subtract;fa.push(va);na=Math.min(na,va.xmin);sa=Math.max(sa,va.xmax);ua=Math.min(ua,va.ymin);ta=Math.max(ta,va.ymax)}return{xmin:na,xmax:sa,ymin:ua,ymax:ta,pts:[],contains:function(ma,pa,za,qa){for(var Ca=!1,Ka=0;Ka<fa.length;Ka++)fa[Ka].contains(ma,pa,za,qa)&&(Ca=!1===fa[Ka].subtract);return Ca},isRect:!1,degenerate:!1}}function a(ha,fa,na){fa._fullLayout._drawing=
!1;var sa=fa._fullLayout,ua=na.plotinfo,ta=na.dragmode,oa=sa._lastSelectedSubplot&&sa._lastSelectedSubplot===ua.id;ha=(ha.shiftKey||ha.altKey)&&!(B(ta)&&C(ta));oa&&ha&&ua.selection&&ua.selection.selectionDefs&&!na.selectionDefs?(na.selectionDefs=ua.selection.selectionDefs,na.mergedPolygons=ua.selection.mergedPolygons):ha&&ua.selection||d(na);oa||(da(fa),sa._lastSelectedSubplot=ua.id)}function d(ha){var fa=ha.dragmode,na=ha.plotinfo,sa=ha.gd;0<=sa._fullLayout._activeShapeIndex&&sa._fullLayout._deactivateShape(sa);
B(fa)&&(fa=sa._fullLayout._zoomlayer.selectAll(".select-outline-"+na.id))&&sa._fullLayout._drawing&&((fa=J(fa,ha))&&t.call("_guiRelayout",sa,{shapes:fa}),sa._fullLayout._drawing=!1);na.selection={};na.selection.selectionDefs=ha.selectionDefs=[];na.selection.mergedPolygons=ha.mergedPolygons=[]}function e(ha,fa,na,sa){function ua(qa,Ca,Ka,Oa){return{_module:qa,cd:Ca,xaxis:Ka,yaxis:Oa}}var ta=[],oa=fa.map(function(qa){return qa._id}),va=na.map(function(qa){return qa._id}),ma;for(ma=0;ma<ha.calcdata.length;ma++){var pa=
ha.calcdata[ma];var za=pa[0].trace;!0===za.visible&&za._module&&za._module.selectPoints&&(!sa||za.subplot!==sa&&za.geo!==sa?"splom"===za.type&&za._xaxes[oa[0]]&&za._yaxes[va[0]]?(pa=ua(za._module,pa,fa[0],na[0]),pa.scene=ha._fullLayout._splomScenes[za.uid],ta.push(pa)):"sankey"===za.type?(za=ua(za._module,pa,fa[0],na[0]),ta.push(za)):-1!==oa.indexOf(za.xaxis)&&-1!==va.indexOf(za.yaxis)&&ta.push(ua(za._module,pa,L(ha,za.xaxis),L(ha,za.yaxis))):ta.push(ua(za._module,pa,fa[0],na[0])))}return ta}function l(ha){var fa=
ha.searchInfo.cd[0].trace,na=ha.pointNumber;ha=ha.pointNumbers;na=0<ha.length?ha[0]:na;return fa.selectedpoints?-1<fa.selectedpoints.indexOf(na):!1}function k(ha,fa,na){var sa;for(sa=0;sa<fa.length;sa++){var ua=fa[sa].cd[0].trace._fullInput;var ta=ha._fullLayout._tracePreGUI[ua.uid]||{};void 0===ta.selectedpoints&&(ta.selectedpoints=ua._input.selectedpoints||null)}if(na){na=na.points||[];for(sa=0;sa<fa.length;sa++){var oa=fa[sa].cd[0].trace;oa._input.selectedpoints=oa._fullInput.selectedpoints=[];
oa._fullInput!==oa&&(oa.selectedpoints=[])}for(sa=0;sa<na.length;sa++){ua=na[sa];ta=ua.data;var va=ua.fullData;ua.pointIndices?([].push.apply(ta.selectedpoints,ua.pointIndices),oa._fullInput!==oa&&[].push.apply(va.selectedpoints,ua.pointIndices)):(ta.selectedpoints.push(ua.pointIndex),oa._fullInput!==oa&&va.selectedpoints.push(ua.pointIndex))}}else for(sa=0;sa<fa.length;sa++)oa=fa[sa].cd[0].trace,delete oa.selectedpoints,delete oa._input.selectedpoints,oa._fullInput!==oa&&delete oa._fullInput.selectedpoints;
ua=!1;for(sa=0;sa<fa.length;sa++)if(ta=fa[sa],na=ta.cd,oa=na[0].trace,t.traceIs(oa,"regl")&&(ua=!0),oa=ta._module,oa=oa.styleOnSelect||oa.style)oa(ha,na,na[0].node3),na[0].nodeRangePlot3&&oa(ha,na,na[0].nodeRangePlot3);ua&&(P(ha),Q(ha))}function c(ha,fa,na){if(na)return ha=q.difference({regions:ha,inverted:!1},{regions:[fa],inverted:!1}),ha.regions;ha=q.union({regions:ha,inverted:!1},{regions:[fa],inverted:!1});return ha.regions}function f(ha,fa){if(Array.isArray(ha)){var na=fa.cd;fa=fa.cd[0].trace;
for(var sa=0;sa<ha.length;sa++)ha[sa]=E(ha[sa],fa,na)}return ha}function g(ha,fa){for(var na=[],sa=0;sa<ha.length;sa++){na[sa]=[];for(var ua=0;ua<ha[sa].length;ua++){na[sa][ua]=[];na[sa][ua][0]=ua?"L":"M";for(var ta=0;ta<ha[sa][ua].length;ta++)na[sa][ua].push(ha[sa][ua][ta])}fa||na[sa].push(["Z",na[sa][0][1],na[sa][0][2]])}return na}var q=b("polybooljs"),t=b("../../registry"),u=b("../../components/drawing").dashStyle,w=b("../../components/color"),x=b("../../components/fx"),E=b("../../components/fx/helpers").makeEventData;
D=b("../../components/dragelement/helpers");var F=D.freeMode,z=D.rectMode,B=D.drawMode,C=D.openMode,v=D.selectMode,G=b("../../components/shapes/draw_newshape/display_outlines"),I=b("../../components/shapes/draw_newshape/helpers").handleEllipse,J=b("../../components/shapes/draw_newshape/newshapes"),K=b("../../lib"),N=b("../../lib/polygon"),H=b("../../lib/throttle"),L=b("./axis_ids").getFromId,P=b("../../lib/clear_gl_canvases"),Q=b("../../plot_api/subroutines").redrawReglTraces,S=b("./constants"),O=
S.MINSELECT,U=N.filter,X=N.tester,da=b("./handle_outline").clearSelect;b=b("./helpers");var ea=b.p2r,ca=b.axValue,ia=b.getTransform;y.exports={prepSelect:function(ha,fa,na,sa,ua){function ta(zb,Jb){return zb-Jb}var oa=F(ua),va=z(ua),ma=C(ua),pa=B(ua),za=v(ua),qa="drawcircle"===ua,Ca="drawline"===ua||qa,Ka=sa.gd,Oa=Ka._fullLayout,kb=Oa._zoomlayer,mb=sa.element.getBoundingClientRect(),tb=sa.plotinfo,nb=ia(tb),Ta=fa-mb.left,fb=na-mb.top,ab=Ta,ra=fb;fa="M"+Ta+","+fb;var Ea=sa.xaxes[0]._length,Ia=sa.yaxes[0]._length,
Va=sa.xaxes.concat(sa.yaxes),rb=ha.altKey&&!(B(ua)&&ma),ib,Na,Za,eb,Ba,Ma,$a;a(ha,Ka,sa);oa&&(ib=U([[Ta,fb]],S.BENDPX));var lb=kb.selectAll("path.select-outline-"+tb.id).data(pa?[0]:[1,2]);ha=Oa.newshape;lb.enter().append("path").attr("class",function(zb){return"select-outline select-outline-"+zb+" select-outline-"+tb.id}).style(pa?{opacity:ha.opacity/2,fill:ma?void 0:ha.fillcolor,stroke:ha.line.color,"stroke-dasharray":u(ha.line.dash,ha.line.width),"stroke-width":ha.line.width+"px"}:{}).attr("fill-rule",
ha.fillrule).classed("cursor-move",pa?!0:!1).attr("transform",nb).attr("d",fa+"Z");var Ra=kb.append("path").attr("class","zoombox-corners").style({fill:w.background,stroke:w.defaultLine,"stroke-width":1}).attr("transform",nb).attr("d","M0,0Z"),jb=Oa._uid+S.SELECTID,Xa=[],pb=e(Ka,sa.xaxes,sa.yaxes,sa.subplot);var vb=tb.fillRangeItems?tb.fillRangeItems:va?function(zb,Jb){zb=zb.range={};for(Ba=0;Ba<Va.length;Ba++){var Zb=Va[Ba],pc=Zb._id.charAt(0);zb[Zb._id]=[ea(Zb,Jb[pc+"min"]),ea(Zb,Jb[pc+"max"])].sort(ta)}}:
function(zb,Jb,Zb){zb=zb.lassoPoints={};for(Ba=0;Ba<Va.length;Ba++)Jb=Va[Ba],zb[Jb._id]=Zb.filtered.map(ca(Jb))};sa.moveFn=function(zb,Jb){ab=Math.max(0,Math.min(Ea,zb+Ta));ra=Math.max(0,Math.min(Ia,Jb+fb));zb=Math.abs(ab-Ta);Jb=Math.abs(ra-fb);if(va){if(za){var Zb=Oa.selectdirection;Zb="any"===Zb?Jb<Math.min(.6*zb,O)?"h":zb<Math.min(.6*Jb,O)?"v":"d":Zb;switch(Zb){case "h":var pc=qa?Ia/2:0;var Ac=Ia;break;case "v":pc=qa?Ea/2:0,Ac=Ea}}if(pa)switch(Oa.newshape.drawdirection){case "vertical":Zb="h";
pc=qa?Ia/2:0;Ac=Ia;break;case "horizontal":Zb="v";pc=qa?Ea/2:0;Ac=Ea;break;case "ortho":zb<Jb?(Zb="h",pc=fb,Ac=ra):(Zb="v",pc=Ta,Ac=ab);break;default:Zb="d"}"h"===Zb?(eb=Ca?I(qa,[ab,pc],[ab,Ac]):[[Ta,pc],[Ta,Ac],[ab,Ac],[ab,pc]],eb.xmin=Ca?ab:Math.min(Ta,ab),eb.xmax=Ca?ab:Math.max(Ta,ab),eb.ymin=Math.min(pc,Ac),eb.ymax=Math.max(pc,Ac),Ra.attr("d","M"+eb.xmin+","+(fb-O)+"h-4v"+2*O+"h4ZM"+(eb.xmax-1)+","+(fb-O)+"h4v"+2*O+"h-4Z")):"v"===Zb?(eb=Ca?I(qa,[pc,ra],[Ac,ra]):[[pc,fb],[pc,ra],[Ac,ra],[Ac,fb]],
eb.xmin=Math.min(pc,Ac),eb.xmax=Math.max(pc,Ac),eb.ymin=Ca?ra:Math.min(fb,ra),eb.ymax=Ca?ra:Math.max(fb,ra),Ra.attr("d","M"+(Ta-O)+","+eb.ymin+"v-4h"+2*O+"v4ZM"+(Ta-O)+","+(eb.ymax-1)+"v4h"+2*O+"v-4Z")):"d"===Zb&&(eb=Ca?I(qa,[Ta,fb],[ab,ra]):[[Ta,fb],[Ta,ra],[ab,ra],[ab,fb]],eb.xmin=Math.min(Ta,ab),eb.xmax=Math.max(Ta,ab),eb.ymin=Math.min(fb,ra),eb.ymax=Math.max(fb,ra),Ra.attr("d","M0,0Z"))}else oa&&(ib.addPt([ab,ra]),eb=ib.filtered);sa.selectionDefs&&sa.selectionDefs.length?(Za=c(sa.mergedPolygons,
eb,rb),eb.subtract=rb,Na=h(sa.selectionDefs.concat([eb]))):(Za=[eb],Na=X(eb));G(g(Za,ma),lb,sa);za&&H.throttle(jb,S.SELECTDELAY,function(){Xa=[];var ed=[];for(Ba=0;Ba<pb.length;Ba++){Ma=pb[Ba];var Rc=Ma._module.selectPoints(Ma,Na);ed.push(Rc);Rc=f(Rc,Ma);if(Xa.length)for(var id=0;id<Rc.length;id++)Xa.push(Rc[id]);else Xa=Rc}$a={points:Xa};k(Ka,pb,$a);vb($a,eb,ib);sa.gd.emit("plotly_selecting",$a)})};sa.clickFn=function(zb,Jb){Ra.remove();if(0<=Ka._fullLayout._activeShapeIndex)Ka._fullLayout._deactivateShape(Ka);
else if(!pa){var Zb=Oa.clickmode;H.done(jb).then(function(){H.clear(jb);if(2===zb){lb.remove();for(Ba=0;Ba<pb.length;Ba++)Ma=pb[Ba],Ma._module.selectPoints(Ma,!1);k(Ka,pb);d(sa);Ka.emit("plotly_deselect",null)}else-1<Zb.indexOf("select")&&n(Jb,Ka,sa.xaxes,sa.yaxes,sa.subplot,sa,lb),"event"===Zb&&Ka.emit("plotly_selected",void 0);x.click(Ka,Jb)}).catch(K.error)}};sa.doneFn=function(){Ra.remove();H.done(jb).then(function(){H.clear(jb);sa.gd.emit("plotly_selected",$a);eb&&sa.selectionDefs&&(eb.subtract=
rb,sa.selectionDefs.push(eb),sa.mergedPolygons.length=0,[].push.apply(sa.mergedPolygons,Za));sa.doneFnCompleted&&sa.doneFnCompleted(Xa)}).catch(K.error);pa&&d(sa)}},clearSelect:da,clearSelectionsCache:d,selectOnClick:n}},{"../../components/color":615,"../../components/dragelement/helpers":633,"../../components/drawing":637,"../../components/fx":655,"../../components/fx/helpers":651,"../../components/shapes/draw_newshape/display_outlines":700,"../../components/shapes/draw_newshape/helpers":701,"../../components/shapes/draw_newshape/newshapes":702,
"../../lib":749,"../../lib/clear_gl_canvases":733,"../../lib/polygon":761,"../../lib/throttle":774,"../../plot_api/subroutines":788,"../../registry":880,"./axis_ids":800,"./constants":803,"./handle_outline":807,"./helpers":808,polybooljs:491}],817:[function(b,y,D){function n(v){return Math.pow(10,v)}var m=b("d3"),p=b("d3-time-format").utcFormat,h=b("fast-isnumeric"),a=b("../../lib"),d=a.cleanNumber,e=a.ms2DateTime,l=a.dateTime2ms,k=a.ensureNumber,c=a.isArrayOrTypedArray;D=b("../../constants/numerical");
var f=D.FP_SAFE,g=D.BADNUM,q=D.LOG_CLIP,t=D.ONEWEEK,u=D.ONEDAY,w=D.ONEHOUR,x=D.ONEMIN,E=D.ONESEC,F=b("./axis_ids"),z=b("./constants"),B=z.HOUR_PATTERN,C=z.WEEKDAY_PATTERN;y.exports=function(v,G){function I(ea,ca){return 0<ea?Math.log(ea)/Math.LN10:0>=ea&&ca&&v.range&&2===v.range.length?(ea=v.range[0],ca=v.range[1],.5*(ea+ca-2*q*Math.abs(ea-ca))):g}function J(ea,ca,ia,ha){if((ha||{}).msUTC&&h(ea))return+ea;ca=l(ea,ia||v.calendar);if(ca===g)if(h(ea))ea=+ea,ca=Math.floor(10*a.mod(ea+.05,1)),ca=l(new Date(Math.round(ea-
ca/10)))+ca/10;else return g;return ca}function K(ea,ca,ia){return e(ea,ca,ia||v.calendar)}function N(ea){return v._categories[Math.round(ea)]}function H(ea){if(null!==ea&&void 0!==ea){void 0===v._categoriesMap&&(v._categoriesMap={});if(void 0!==v._categoriesMap[ea])return v._categoriesMap[ea];v._categories.push("number"===typeof ea?String(ea):ea);var ca=v._categories.length-1;return v._categoriesMap[ea]=ca}return g}function L(ea){if(v._categoriesMap)return v._categoriesMap[ea]}function P(ea){var ca=
L(ea);if(void 0!==ca)return ca;if(h(ea))return+ea}G=G||{};var Q=v._id||"x",S=Q.charAt(0),O=function(ea){return h(ea)?m.round(v._b+v._m*ea,2):g},U=function(ea){return(ea-v._b)/v._m};if(v.rangebreaks){var X="y"===S;O=function(ea){if(!h(ea))return g;var ca=v._rangebreaks.length;if(!ca)return m.round(v._b+v._m*ea,2);var ia=X;v.range[0]>v.range[1]&&(ia=!ia);ia=ia?-1:1;for(var ha=ia*ea,fa=0,na=0;na<ca;na++){var sa=ia*v._rangebreaks[na].min,ua=ia*v._rangebreaks[na].max;if(ha<sa)break;if(ha>ua)fa=na+1;else{fa=
ha<(sa+ua)/2?na:na+1;break}}ca=v._B[fa]||0;return isFinite(ca)?m.round(ca+v._m2*ea,2):0};U=function(ea){var ca=v._rangebreaks.length;if(!ca)return(ea-v._b)/v._m;for(var ia=0,ha=0;ha<ca&&!(ea<v._rangebreaks[ha].pmin);ha++)ea>v._rangebreaks[ha].pmax&&(ia=ha+1);return(ea-v._B[ia])/v._m2}}v.c2l="log"===v.type?I:k;v.l2c="log"===v.type?n:k;v.l2p=O;v.p2l=U;v.c2p="log"===v.type?function(ea,ca){return O(I(ea,ca))}:O;v.p2c="log"===v.type?function(ea){return n(U(ea))}:U;-1!==["linear","-"].indexOf(v.type)?(v.d2r=
v.r2d=v.d2c=v.r2c=v.d2l=v.r2l=d,v.c2d=v.c2r=v.l2d=v.l2r=k,v.d2p=v.r2p=function(ea){return v.l2p(d(ea))},v.p2d=v.p2r=U,v.cleanPos=k):"log"===v.type?(v.d2r=v.d2l=function(ea,ca){return I(d(ea),ca)},v.r2d=v.r2c=function(ea){return n(d(ea))},v.d2c=v.r2l=d,v.c2d=v.l2r=k,v.c2r=I,v.l2d=n,v.d2p=function(ea,ca){return v.l2p(v.d2r(ea,ca))},v.p2d=function(ea){return n(U(ea))},v.r2p=function(ea){return v.l2p(d(ea))},v.p2r=U,v.cleanPos=k):"date"===v.type?(v.d2r=v.r2d=a.identity,v.d2c=v.r2c=v.d2l=v.r2l=J,v.c2d=
v.c2r=v.l2d=v.l2r=K,v.d2p=v.r2p=function(ea,ca,ia){return v.l2p(J(ea,0,ia))},v.p2d=v.p2r=function(ea,ca,ia){return K(U(ea),ca,ia)},v.cleanPos=function(ea){return a.cleanDate(ea,g,v.calendar)}):"category"===v.type?(v.d2c=v.d2l=H,v.r2d=v.c2d=v.l2d=N,v.d2r=v.d2l_noadd=P,v.r2c=function(ea){ea=P(ea);return void 0!==ea?ea:v.fraction2r(.5)},v.l2r=v.c2r=k,v.r2l=P,v.d2p=function(ea){return v.l2p(v.r2c(ea))},v.p2d=function(ea){return N(U(ea))},v.r2p=v.d2p,v.p2r=U,v.cleanPos=function(ea){return"string"===typeof ea&&
""!==ea?ea:k(ea)}):"multicategory"===v.type&&(v.r2d=v.c2d=v.l2d=N,v.d2r=v.d2l_noadd=P,v.r2c=function(ea){ea=P(ea);return void 0!==ea?ea:v.fraction2r(.5)},v.r2c_just_indices=L,v.l2r=v.c2r=k,v.r2l=P,v.d2p=function(ea){return v.l2p(v.r2c(ea))},v.p2d=function(ea){return N(U(ea))},v.r2p=v.d2p,v.p2r=U,v.cleanPos=function(ea){return Array.isArray(ea)||"string"===typeof ea&&""!==ea?ea:k(ea)},v.setupMultiCategory=function(ea){var ca=v._traceIndices,ia,ha=G._axisMatchGroups;if(ha&&ha.length&&0===v._categories.length)for(ia=
0;ia<ha.length;ia++){var fa=ha[ia];if(fa[Q])for(var na in fa)na!==Q&&(fa=G[F.id2name(na)],ca=ca.concat(fa._traceIndices))}var sa=[[0,{}],[0,{}]];ha=[];for(ia=0;ia<ca.length;ia++)if(fa=ea[ca[ia]],S in fa){na=fa[S];var ua=fa._length||a.minRowLength(na);if(c(na[0])&&c(na[1]))for(fa=0;fa<ua;fa++){var ta=na[0][fa],oa=na[1][fa];null!==ta&&void 0!==ta&&null!==oa&&void 0!==oa&&(ha.push([ta,oa]),ta in sa[0][1]||(sa[0][1][ta]=sa[0][0]++),oa in sa[1][1]||(sa[1][1][oa]=sa[1][0]++))}}ha.sort(function(va,ma){var pa=
sa[0][1];if(pa=pa[va[0]]-pa[ma[0]])return pa;pa=sa[1][1];return pa[va[1]]-pa[ma[1]]});for(ia=0;ia<ha.length;ia++)H(ha[ia])});v.fraction2r=function(ea){var ca=v.r2l(v.range[0]),ia=v.r2l(v.range[1]);return v.l2r(ca+ea*(ia-ca))};v.r2fraction=function(ea){var ca=v.r2l(v.range[0]),ia=v.r2l(v.range[1]);return(v.r2l(ea)-ca)/(ia-ca)};v.cleanRange=function(ea,ca){ca||(ca={});ea||(ea="range");var ia=a.nestedProperty(v,ea).get();var ha="date"===v.type?a.dfltRange(v.calendar):"y"===S?z.DFLTRANGEY:ca.dfltRange||
z.DFLTRANGEX;ha=ha.slice();if("tozero"===v.rangemode||"nonnegative"===v.rangemode)ha[0]=0;if(ia&&2===ia.length)for("date"!==v.type||v.autorange||(ia[0]=a.cleanDate(ia[0],g,v.calendar),ia[1]=a.cleanDate(ia[1],g,v.calendar)),ca=0;2>ca;ca++)if("date"===v.type){if(!a.isDateTime(ia[ca],v.calendar)){v[ea]=ha;break}if(v.r2l(ia[0])===v.r2l(ia[1])){ea=a.constrain(v.r2l(ia[0]),a.MIN_MS+1E3,a.MAX_MS-1E3);ia[0]=v.l2r(ea-1E3);ia[1]=v.l2r(ea+1E3);break}}else{if(!h(ia[ca]))if(h(ia[1-ca]))ia[ca]=ia[1-ca]*(ca?10:
.1);else{v[ea]=ha;break}ia[ca]<-f?ia[ca]=-f:ia[ca]>f&&(ia[ca]=f);if(ia[0]===ia[1]){var fa=Math.max(1,Math.abs(1E-6*ia[0]));ia[0]-=fa;ia[1]+=fa}}else a.nestedProperty(v,ea).set(ha)};v.setScale=function(ea){var ca=G._size;if(v.overlaying){var ia=F.getFromId({_fullLayout:G},v.overlaying);v.domain=ia.domain}ia=ea&&v._r?"_r":"range";var ha=v.calendar;v.cleanRange(ia);ea=v.r2l(v[ia][0],ha);ia=v.r2l(v[ia][1],ha);(ha="y"===S)?(v._offset=ca.t+(1-v.domain[1])*ca.h,v._length=ca.h*(v.domain[1]-v.domain[0]),v._m=
v._length/(ea-ia),v._b=-v._m*ia):(v._offset=ca.l+v.domain[0]*ca.w,v._length=ca.w*(v.domain[1]-v.domain[0]),v._m=v._length/(ia-ea),v._b=-v._m*ea);v._rangebreaks=[];v._lBreaks=0;v._m2=0;v._B=[];if(v.rangebreaks&&(v._rangebreaks=v.locateBreaks(Math.min(ea,ia),Math.max(ea,ia)),v._rangebreaks.length)){for(ca=0;ca<v._rangebreaks.length;ca++){var fa=v._rangebreaks[ca];v._lBreaks+=Math.abs(fa.max-fa.min)}ca=ha;ea>ia&&(ca=!ca);ca&&v._rangebreaks.reverse();var na=ca?-1:1;v._m2=na*v._length/(Math.abs(ia-ea)-
v._lBreaks);v._B.push(-v._m2*(ha?ia:ea));for(ca=0;ca<v._rangebreaks.length;ca++)fa=v._rangebreaks[ca],v._B.push(v._B[v._B.length-1]-na*v._m2*(fa.max-fa.min));for(ca=0;ca<v._rangebreaks.length;ca++)fa=v._rangebreaks[ca],fa.pmin=O(fa.min),fa.pmax=O(fa.max)}if(!isFinite(v._m)||!isFinite(v._b)||0>v._length)throw G._replotting=!1,Error("Something went wrong with axis scaling");};v.maskBreaks=function(ea){for(var ca=v.rangebreaks||[],ia,ha,fa,na,sa=0;sa<ca.length;sa++){var ua=ca[sa];if(ua.enabled)if(ua.bounds){var ta=
ua.pattern;ia=a.simpleMap(ua.bounds,ta?d:v.d2c);ha=ia[0];ia=ia[1];switch(ta){case C:na=new Date(ea);fa=na.getUTCDay();ha>ia&&(ia+=7,fa<ha&&(fa+=7));break;case B:na=new Date(ea);fa=na.getUTCHours();ua=na.getUTCMinutes();ta=na.getUTCSeconds();na=na.getUTCMilliseconds();fa+=ua/60+ta/3600+na/36E5;ha>ia&&(ia+=24,fa<ha&&(fa+=24));break;case "":fa=ea}if(fa>=ha&&fa<ia)return g}else for(ta=a.simpleMap(ua.values,v.d2c).sort(a.sorterAsc),na=0;na<ta.length;na++)if(ha=ta[na],ia=ha+ua.dvalue,ea>=ha&&ea<ia)return g}return ea};
v.locateBreaks=function(ea,ca){var ia,ha=[];if(!v.rangebreaks)return ha;var fa=v.rangebreaks.slice().sort(function(za,qa){return za.pattern===C&&qa.pattern===B?-1:qa.pattern===C&&za.pattern===B?1:0}),na=function(za,qa){za=a.constrain(za,ea,ca);qa=a.constrain(qa,ea,ca);if(za!==qa){for(var Ca=!0,Ka=0;Ka<ha.length;Ka++){var Oa=ha[Ka];za<Oa.max&&qa>=Oa.min&&(za<Oa.min&&(Oa.min=za),qa>Oa.max&&(Oa.max=qa),Ca=!1)}Ca&&ha.push({min:za,max:qa})}};for(ia=0;ia<fa.length;ia++){var sa=fa[ia];if(sa.enabled)if(sa.bounds){var ua=
ea,ta=ca;sa.pattern&&(ua=Math.floor(ua));var oa=a.simpleMap(sa.bounds,sa.pattern?d:v.r2l);var va=oa[0];var ma=oa[1];var pa=new Date(ua);switch(sa.pattern){case C:sa=t;ma=((ma<va?7:0)+(ma-va))*u;ua+=va*u-(pa.getUTCDay()*u+pa.getUTCHours()*w+pa.getUTCMinutes()*x+pa.getUTCSeconds()*E+pa.getUTCMilliseconds());break;case B:sa=u;ma=((ma<va?24:0)+(ma-va))*w;ua+=va*w-(pa.getUTCHours()*w+pa.getUTCMinutes()*x+pa.getUTCSeconds()*E+pa.getUTCMilliseconds());break;default:ua=Math.min(oa[0],oa[1]),ta=Math.max(oa[0],
oa[1]),ma=sa=ta-ua}for(va=ua;va<ta;va+=sa)na(va,va+ma)}else for(ta=a.simpleMap(sa.values,v.d2c),ua=0;ua<ta.length;ua++)va=ta[ua],ma=va+sa.dvalue,na(va,ma)}ha.sort(function(za,qa){return za.min-qa.min});return ha};v.makeCalcdata=function(ea,ca,ia){var ha;var fa=v.type;var na="date"===fa&&ea[ca+"calendar"];if(ca in ea){ca=ea[ca];ea=ea._length||a.minRowLength(ca);if(a.isTypedArray(ca)&&("linear"===fa||"log"===fa)){if(ea===ca.length)return ca;if(ca.subarray)return ca.subarray(0,ea)}if("multicategory"===
fa){ia=Array(ea);for(na=0;na<ea;na++)ia[na]=L([(ca[0]||[])[na],(ca[1]||[])[na]]);return ia}fa=Array(ea);for(ha=0;ha<ea;ha++)fa[ha]=v.d2c(ca[ha],0,na,ia)}else for(ia=(ca+"0"in ea)?v.d2c(ea[ca+"0"],0,na):0,na=ea["d"+ca]?Number(ea["d"+ca]):1,ca=ea[{x:"y",y:"x"}[ca]],ea=ea._length||ca.length,fa=Array(ea),ha=0;ha<ea;ha++)fa[ha]=ia+ha*na;if(v.rangebreaks)for(ha=0;ha<ea;ha++)fa[ha]=v.maskBreaks(fa[ha]);return fa};v.isValidRange=function(ea){return Array.isArray(ea)&&2===ea.length&&h(v.r2l(ea[0]))&&h(v.r2l(ea[1]))};
v.isPtWithinRange=function(ea,ca){ea=v.c2l(ea[S],null,ca);ca=v.r2l(v.range[0]);var ia=v.r2l(v.range[1]);return ca<ia?ca<=ea&&ea<=ia:ia<=ea&&ea<=ca};v._emptyCategories=function(){v._categories=[];v._categoriesMap={}};v.clearCalc=function(){var ea=G._axisMatchGroups;if(ea&&ea.length){for(var ca=!1,ia=0;ia<ea.length;ia++){var ha=ea[ia];if(ha[Q]){ca=!0;ia=ea=null;for(var fa in ha)if(ha=G[F.id2name(fa)],ha._categories){ea=ha._categories;ia=ha._categoriesMap;break}ea&&ia?(v._categories=ea,v._categoriesMap=
ia):v._emptyCategories();break}}ca||v._emptyCategories()}else v._emptyCategories();if(v._initialCategories)for(ca=0;ca<v._initialCategories.length;ca++)H(v._initialCategories[ca])};v.sortByInitialCategories=function(){var ea=[];v._emptyCategories();if(v._initialCategories)for(var ca=0;ca<v._initialCategories.length;ca++)H(v._initialCategories[ca]);ea=ea.concat(v._traceIndices);ca=v._matchGroup;for(var ia in ca)Q!==ia&&(ca=G[F.id2name(ia)],ca._categories=v._categories,ca._categoriesMap=v._categoriesMap,
ea=ea.concat(ca._traceIndices));return ea};var da=G._d3locale;"date"===v.type&&(v._dateFormat=da?da.timeFormat:p,v._extraFormat=G._extraFormat);v._separators=G.separators;v._numFormat=da?da.numberFormat:m.format;delete v._minDtick;delete v._forceTick0}},{"../../constants/numerical":724,"../../lib":749,"./axis_ids":800,"./constants":803,d3:169,"d3-time-format":166,"fast-isnumeric":241}],818:[function(b,y,D){function n(d){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(l){return void 0!==
d[l]});if(e.every(function(l){return d[l]===d[e[0]]})||1===e.length)return d[e[0]]}function m(d,e){p.coerce(d,e,h.tickformatstops,"enabled",void 0)&&(p.coerce(d,e,h.tickformatstops,"dtickrange",void 0),p.coerce(d,e,h.tickformatstops,"value",void 0))}var p=b("../../lib"),h=b("./layout_attributes"),a=b("../array_container_defaults");y.exports=function(d,e,l,k,c,f){if(!f||1===f.pass){var g=n(d);l("tickprefix")&&l("showtickprefix",g);l("ticksuffix",c.tickSuffixDflt)&&l("showticksuffix",g)}f&&2!==f.pass||
(f=n(d),l("tickprefix")&&l("showtickprefix",f),l("ticksuffix",c.tickSuffixDflt)&&l("showticksuffix",f),l("showticklabels")&&(c=c.font||{},g=e.color,p.coerceFont(l,"tickfont",{family:c.family,size:c.size,color:g&&g!==h.color.dflt?g:c.color}),l("tickangle"),"category"!==k&&(c=l("tickformat"),a(d,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:m}),e.tickformatstops.length||delete e.tickformatstops,c||"date"===k||(l("showexponent",f),l("exponentformat"),l("separatethousands")))))}},
{"../../lib":749,"../array_container_defaults":793,"./layout_attributes":811}],819:[function(b,y,D){var n=b("../../lib"),m=b("./layout_attributes");y.exports=function(p,h,a,d){var e=n.coerce2(p,h,m,"ticklen"),l=n.coerce2(p,h,m,"tickwidth");p=n.coerce2(p,h,m,"tickcolor",h.color);a("ticks",d.outerTicks||e||l||p?"outside":"")||(delete h.ticklen,delete h.tickwidth,delete h.tickcolor)}},{"../../lib":749,"./layout_attributes":811}],820:[function(b,y,D){var n=b("./clean_ticks"),m=b("../../lib").isArrayOrTypedArray;
y.exports=function(p,h,a,d){function e(f){var g=p[f];return void 0!==g?g:(h._template||{})[f]}var l=e("tick0"),k=e("dtick"),c=e("tickvals");c=m(c)?"array":k?"linear":"auto";c=a("tickmode",c);"auto"===c?a("nticks"):"linear"===c?(a=h.dtick=n.dtick(k,d),h.tick0=n.tick0(l,d,h.calendar,a)):"multicategory"!==d&&(void 0===a("tickvals")?h.tickmode="auto":a("ticktext"))}},{"../../lib":749,"./clean_ticks":802}],821:[function(b,y,D){var n=b("d3"),m=b("../../registry"),p=b("../../lib"),h=b("../../components/drawing"),
a=b("./axes");y.exports=function(d,e,l,k){function c(z){var B=z.xaxis,C=z.yaxis;t._defs.select("#"+z.clipId+"\x3e rect").call(h.setTranslate,0,0).call(h.setScale,1,1);z.plot.call(h.setTranslate,B._offset,C._offset).call(h.setScale,1,1);B=z.plot.selectAll(".scatterlayer .trace");B.selectAll(".point").call(h.setPointGroupScale,1,1);B.selectAll(".textpoint").call(h.setTextPointsScale,1,1);B.call(h.hideOutsideRangePoints,z)}function f(){for(var z={},B=0;B<e.length;B++){var C=e[B],v=C.plotinfo.xaxis,G=
C.plotinfo.yaxis;C.xr1&&(z[v._name+".range"]=C.xr1.slice());C.yr1&&(z[G._name+".range"]=C.yr1.slice())}u&&u();return m.call("relayout",d,z).then(function(){for(var I=0;I<e.length;I++)c(e[I].plotinfo)})}function g(){for(var z={},B=0;B<e.length;B++){var C=e[B],v=C.plotinfo.xaxis,G=C.plotinfo.yaxis;C.xr0&&(z[v._name+".range"]=C.xr0.slice());C.yr0&&(z[G._name+".range"]=C.yr0.slice())}return m.call("relayout",d,z).then(function(){for(var I=0;I<e.length;I++)c(e[I].plotinfo)})}function q(){w=Date.now();
for(var z=x(Math.min(1,(w-E)/l.duration)),B=0;B<e.length;B++){var C=e[B],v=z,G=C.plotinfo,I=G.xaxis,J=G.yaxis,K=I._length,N=J._length,H=!!C.xr1,L=!!C.yr1,P=[];if(H){var Q=p.simpleMap(C.xr0,I.r2l),S=p.simpleMap(C.xr1,I.r2l),O=Q[1]-Q[0],U=S[1]-S[0];P[0]=(Q[0]*(1-v)+v*S[0]-Q[0])/(Q[1]-Q[0])*K;P[2]=K*(1-v+v*U/O);I.range[0]=I.l2r(Q[0]*(1-v)+v*S[0]);I.range[1]=I.l2r(Q[1]*(1-v)+v*S[1])}else P[0]=0,P[2]=K;L?(Q=p.simpleMap(C.yr0,J.r2l),C=p.simpleMap(C.yr1,J.r2l),S=Q[1]-Q[0],O=C[1]-C[0],P[1]=(Q[1]*(1-v)+v*
C[1]-Q[1])/(Q[0]-Q[1])*N,P[3]=N*(1-v+v*O/S),J.range[0]=I.l2r(Q[0]*(1-v)+v*C[0]),J.range[1]=J.l2r(Q[1]*(1-v)+v*C[1])):(P[1]=0,P[3]=N);a.drawOne(d,I,{skipTitle:!0});a.drawOne(d,J,{skipTitle:!0});a.redrawComponents(d,[I._id,J._id]);v=H?K/P[2]:1;C=L?N/P[3]:1;I=I._offset-(H?P[0]/P[2]*K:0);J=J._offset-(L?P[1]/P[3]*N:0);G.clipRect.call(h.setTranslate,H?P[0]:0,L?P[1]:0).call(h.setScale,1/v,1/C);G.plot.call(h.setTranslate,I,J).call(h.setScale,v,C);h.setPointGroupScale(G.zoomScalePts,1/v,1/C);h.setTextPointsScale(G.zoomScaleTxt,
1/v,1/C)}w-E>l.duration?(f(),F=window.cancelAnimationFrame(q)):F=window.requestAnimationFrame(q)}var t=d._fullLayout;if(0===e.length)a.redrawComponents(d);else{var u;k&&(u=k());var w,x=n.ease(l.easing);d._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(F);F=null;return g()});var E=Date.now();var F=window.requestAnimationFrame(q);return Promise.resolve()}}},{"../../components/drawing":637,"../../lib":749,"../../registry":880,"./axes":797,d3:169}],822:[function(b,y,D){function n(h,
a){var d={v:"x",h:"y"}[h.orientation||"v"],e=m(h,"box-violin"),l=m(h._fullInput||{},"candlestick");return e&&!l&&a===d&&void 0===h[d]&&void 0===h[d+"0"]}var m=b("../../registry").traceIs,p=b("./axis_autotype");y.exports=function(h,a,d,e){if("-"===d("type",(e.splomStash||{}).type)){d=e.data;if("-"===a.type){e=a._id;var l=e.charAt(0);-1!==e.indexOf("scene")&&(e=l);b:{for(var k=e,c=0;c<d.length;c++){var f=d[c];if("splom"===f.type&&0<f._length&&(f["_"+l+"axes"]||{})[k]||(f[l+"axis"]||l)===k&&(n(f,l)||
(f[l]||[]).length||f[l+"0"])){var g=f;break b}}g=void 0}if(g)if("histogram"===g.type&&l==={v:"y",h:"x"}[g.orientation||"v"])a.type="linear";else if(f=l+"calendar",k=g[f],c={noMultiCategory:!m(g,"cartesian")||m(g,"noMultiCategory")},"box"===g.type&&g._hasPreCompStats&&l==={h:"x",v:"y"}[g.orientation||"v"]&&(c.noMultiCategory=!0),n(g,l)){var q={v:"x",h:"y"}[g.orientation||"v"],t=[];for(g=0;g<d.length;g++){var u=d[g];m(u,"box-violin")&&(u[l+"axis"]||l)===e&&(void 0!==u[q]?t.push(u[q][0]):void 0!==u.name?
t.push(u.name):t.push("text"),u[f]!==k&&(k=void 0))}a.type=p(t,k,c)}else"splom"===g.type?(d=g.dimensions[g._axesDim[e]],d.visible&&(a.type=p(d.values,k,c))):a.type=p(g[l]||[g[l+"0"]],k,c)}"-"===a.type?a.type="linear":h.type=a.type}}},{"../../registry":880,"./axis_autotype":798}],823:[function(b,y,D){function n(e,l,k){var c=!1;if("data"===l.type)e=e._fullData[null!==l.traces?l.traces[0]:0];else if("layout"===l.type)e=e._fullLayout;else return!1;e=d.nestedProperty(e,l.prop).get();k=k[l.type]=k[l.type]||
{};k.hasOwnProperty(l.prop)&&k[l.prop]!==e&&(c=!0);k[l.prop]=e;return{changed:c,value:e}}function m(e,l){var k=[];e=l[0];var c={};if("string"===typeof e)c[e]=l[1];else if(d.isPlainObject(e))c=e;else return k;h(c,function(f,g,q){k.push({type:"layout",prop:f,value:q})},"",0);return k}function p(e,l){var k=[];var c=l[0];var f=l[1];var g=l[2];l={};if("string"===typeof c)l[c]=f;else if(d.isPlainObject(c))l=c,void 0===g&&(g=f);else return k;void 0===g&&(g=null);h(l,function(q,t,u){if(Array.isArray(u)){u=
u.slice();var w=Math.min(u.length,e.data.length);g&&(w=Math.min(w,g.length));t=[];for(var x=0;x<w;x++)t[x]=g?g[x]:x}else t=g?g.slice():null;if(null===t)Array.isArray(u)&&(u=u[0]);else if(Array.isArray(t)){if(!Array.isArray(u))for(w=u,u=[],x=0;x<t.length;x++)u[x]=w;u.length=Math.min(t.length,u.length)}k.push({type:"data",prop:q,traces:t,value:u})},"",0);return k}function h(e,l,k,c){Object.keys(e).forEach(function(f){var g=e[f];if("_"!==f[0]){var q=k+(0<c?".":"")+f;d.isPlainObject(g)?h(g,l,q,c+1):l(q,
f,g)}})}var a=b("../registry"),d=b("../lib");D.manageCommandObserver=function(e,l,k,c){var f={},g=!0;l&&l._commandObserver&&(f=l._commandObserver);f.cache||(f.cache={});f.lookupTable={};var q=D.hasSimpleAPICommandBindings(e,k,f.lookupTable);if(l&&l._commandObserver){if(q)return f;if(l._commandObserver.remove)return l._commandObserver.remove(),l._commandObserver=null,f}if(q){n(e,q,f.cache);f.check=function(){if(g){var u=n(e,q,f.cache);u.changed&&c&&void 0!==f.lookupTable[u.value]&&(f.disable(),Promise.resolve(c({value:u.value,
type:q.type,prop:q.prop,traces:q.traces,index:f.lookupTable[u.value]})).then(f.enable,f.enable));return u.changed}};var t="plotly_relayout plotly_redraw plotly_restyle plotly_update plotly_animatingframe plotly_afterplot".split(" ");for(k=0;k<t.length;k++)e._internalOn(t[k],f.check);f.remove=function(){for(var u=0;u<t.length;u++)e._removeInternalListener(t[u],f.check)}}else d.log("Unable to automatically bind plot updates to API command"),f.lookupTable={},f.remove=function(){};f.disable=function(){g=
!1};f.enable=function(){g=!0};l&&(l._commandObserver=f);return f};D.hasSimpleAPICommandBindings=function(e,l,k){var c,f=l.length;for(c=0;c<f;c++){var g=l[c];var q=g.method;g=g.args;Array.isArray(g)||(g=[]);if(!q)return!1;g=D.computeAPICommandBindings(e,q,g);if(1!==g.length)return!1;if(u){q=g[0];if(q.type!==u.type||q.prop!==u.prop)return!1;if(Array.isArray(u.traces))if(Array.isArray(q.traces)){q.traces.sort();for(var t=0;t<u.traces.length;t++)if(u.traces[t]!==q.traces[t])return!1}else return!1;else if(q.prop!==
u.prop)return!1}else{var u=g[0];Array.isArray(u.traces)&&u.traces.sort()}q=g[0];q=q.value;if(Array.isArray(q))if(1===q.length)q=q[0];else return!1;k&&(k[q]=c)}return u};D.executeAPICommand=function(e,l,k){if("skip"===l)return Promise.resolve();var c=a.apiMethodRegistry[l];e=[e];Array.isArray(k)||(k=[]);for(var f=0;f<k.length;f++)e.push(k[f]);return c.apply(null,e).catch(function(g){d.warn("API call to Plotly."+l+" rejected.",g);return Promise.reject(g)})};D.computeAPICommandBindings=function(e,l,
k){Array.isArray(k)||(k=[]);switch(l){case "restyle":e=p(e,k);break;case "relayout":e=m(e,k);break;case "update":e=p(e,[k[0],k[2]]).concat(m(e,[k[1]]));break;case "animate":e=k;e=Array.isArray(e[0])&&1===e[0].length&&-1!==["string","number"].indexOf(typeof e[0][0])?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[];break;default:e=[]}return e}},{"../lib":749,"../registry":880}],824:[function(b,y,D){var n=b("../lib/extend").extendFlat;D.attributes=function(m,p){m=m||{};p={valType:"info_array",
editType:m.editType,items:[{valType:"number",min:0,max:1,editType:m.editType},{valType:"number",min:0,max:1,editType:m.editType}],dflt:[0,1]};p={x:n({},p,{}),y:n({},p,{}),editType:m.editType};m.noGridCell||(p.row={valType:"integer",min:0,dflt:0,editType:m.editType},p.column={valType:"integer",min:0,dflt:0,editType:m.editType});return p};D.defaults=function(m,p,h,a){var d=a&&a.x||[0,1];a=a&&a.y||[0,1];if(p=p.grid){var e=h("domain.column");void 0!==e&&(e<p.columns?d=p._domains.x[e]:delete m.domain.column);
e=h("domain.row");void 0!==e&&(e<p.rows?a=p._domains.y[e]:delete m.domain.row)}p=h("domain.x",d);h=h("domain.y",a);p[0]<p[1]||(m.domain.x=d.slice());h[0]<h[1]||(m.domain.y=a.slice())}},{"../lib/extend":739}],825:[function(b,y,D){y.exports=function(n){var m=n.editType,p=n.colorEditType;void 0===p&&(p=m);m={family:{valType:"string",noBlank:!0,strict:!0,editType:m},size:{valType:"number",min:1,editType:m},color:{valType:"color",editType:p},editType:m};n.arrayOk&&(m.family.arrayOk=!0,m.size.arrayOk=!0,
m.color.arrayOk=!0);return m}},{}],826:[function(b,y,D){y.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],827:[function(b,y,D){D.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea",
"azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"};D.axesNames=["lonaxis","lataxis"];D.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,
"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};D.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};D.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,
55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};D.clipPad=.001;D.precision=.1;D.landColor="#F0DC82";D.waterColor="#3399FF";D.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits",
"country names":"countries"};D.sphereSVG={type:"Sphere"};D.fillLayers={ocean:1,land:1,lakes:1};D.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};D.layers="bg ocean land lakes subunits countries coastlines rivers lataxis lonaxis frame backplot frontplot".split(" ");D.layersForChoropleth="bg ocean land subunits countries coastlines lataxis lonaxis frame backplot rivers lakes frontplot".split(" ");D.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",
coastlines:"coastline",rivers:"river",frame:"frame"}},{}],828:[function(b,y,D){function n(v){this.id=v.id;this.graphDiv=v.graphDiv;this.container=v.container;this.topojsonURL=v.topojsonURL;this.isStatic=v.staticPlot;this.midPt=this.bounds=this.fitScale=this.viewInitial=this.scope=this.projection=this.topojson=this.topojsonName=null;this.hasChoropleth=!1;this.traceHash={};this.layers={};this.basePaths={};this.dataPaths={};this.dataPoints={};this.bgRect=this.clipRect=this.clipDef=null;this.makeFramework()}
function m(v){var G=v.projection.type,I=a.geo[F.projNames[G]](),J=v._isClipped?F.lonaxisSpan[G]/2:null;v=["center","rotate","parallels","clipExtent"];G=function(H){return H?I:[]};for(var K=0;K<v.length;K++){var N=v[K];"function"!==typeof I[N]&&(I[N]=G)}I.isLonLatOverEdges=function(H){if(null===I(H))return!0;if(J){var L=I.rotate();return a.geo.distance(H,[-L[0],-L[1]])>J*Math.PI/180}return!1};I.getPath=function(){return a.geo.path().projection(I)};I.getBounds=function(H){return I.getPath().bounds(H)};
I.fitExtent=function(H,L){var P=H[1][0]-H[0][0],Q=H[1][1]-H[0][1],S=I.clipExtent&&I.clipExtent();I.scale(150).translate([0,0]);S&&I.clipExtent(null);var O=I.getBounds(L);L=Math.min(P/(O[1][0]-O[0][0]),Q/(O[1][1]-O[0][1]));P=+H[0][0]+(P-L*(O[1][0]+O[0][0]))/2;H=+H[0][1]+(Q-L*(O[1][1]+O[0][1]))/2;S&&I.clipExtent(S);return I.scale(150*L).translate([P,H])};I.precision(F.precision);J&&I.clipAngle(J-F.clipPad);return I}function p(v,G,I){var J=G[v],K=F.scopeDefaults[G.scope];if("lonaxis"===v){var N=K.lonaxisRange;
var H=K.lataxisRange;var L=function(Q,S){return[Q,S]}}else"lataxis"===v&&(N=K.lataxisRange,H=K.lonaxisRange,L=function(Q,S){return[S,Q]});J={type:"linear",range:[N[0],N[1]-1E-6],tick0:J.tick0,dtick:J.dtick};g.setConvert(J,I);I=g.calcTicks(J);G.isScoped||"lonaxis"!==v||I.pop();v=I.length;G=Array(v);for(J=0;J<v;J++){K=I[J].x;N=G[J]=[];for(var P=H[0];P<H[1]+2.5;P+=2.5)N.push(L(K,P))}return{type:"MultiLineString",coordinates:G}}function h(v,G){var I=F.clipPad,J=v[0]+I;v=v[1]-I;var K=G[0]+I;G=G[1]-I;0<
J&&0>v&&(v+=360);I=(v-J)/4;return{type:"Polygon",coordinates:[[[J,K],[J,G],[J+I,G],[J+2*I,G],[J+3*I,G],[v,G],[v,K],[v-I,K],[v-2*I,K],[v-3*I,K],[J,K]]]}}var a=b("d3"),d=b("../../registry"),e=b("../../lib"),l=b("../../components/color"),k=b("../../components/drawing"),c=b("../../components/fx"),f=b("../plots"),g=b("../cartesian/axes"),q=b("../cartesian/autorange").getAutoRange,t=b("../../components/dragelement"),u=b("../cartesian/select").prepSelect,w=b("../cartesian/select").clearSelect,x=b("../cartesian/select").selectOnClick,
E=b("./zoom"),F=b("./constants"),z=b("../../lib/geo_location_utils"),B=b("../../lib/topojson_utils"),C=b("topojson-client").feature;b("./projections")(a);b=n.prototype;y.exports=function(v){return new n(v)};b.plot=function(v,G,I){var J=this,K=G[this.id],N=[],H=!1,L;for(L in F.layerNameToAdjective)if("frame"!==L&&K["show"+L]){H=!0;break}for(L=0;L<v.length;L++)if(v[0][0].trace.locationmode){H=!0;break}H&&(K=B.getTopojsonName(K),null===J.topojson||K!==J.topojsonName)&&(J.topojsonName=K,void 0===PlotlyGeoAssets.topojson[J.topojsonName]&&
N.push(J.fetchTopojson()));N=N.concat(z.fetchTraceGeoData(v));I.push(new Promise(function(P,Q){Promise.all(N).then(function(){J.topojson=PlotlyGeoAssets.topojson[J.topojsonName];J.update(v,G);P()}).catch(Q)}))};b.fetchTopojson=function(){var v=this,G=B.getTopojsonPath(v.topojsonURL,v.topojsonName);return new Promise(function(I,J){a.json(G,function(K,N){if(K)return 404===K.status?J(Error(["plotly.js could not find topojson file at",G,". Make sure the *topojsonURL* plot config option is set properly."].join(" "))):
J(Error(["unexpected error while fetching topojson file at",G].join(" ")));PlotlyGeoAssets.topojson[v.topojsonName]=N;I()})})};b.update=function(v,G){var I=G[this.id];this.hasChoropleth=!1;for(var J=0;J<v.length;J++){var K=v[J],N=K[0].trace;"choropleth"===N.type&&(this.hasChoropleth=!0);!0===N.visible&&0<N._length&&N._module.calcGeoJSON(K,G)}this.updateProjection(v,G)||(this.viewInitial&&this.scope===I.scope||this.saveViewInitial(I),this.scope=I.scope,this.updateBaseLayers(G,I),this.updateDims(G,
I),this.updateFx(G,I),f.generalUpdatePerTraceModule(this.graphDiv,this,v,I),v=this.layers.frontplot.select(".scatterlayer"),this.dataPoints.point=v.selectAll(".point"),this.dataPoints.text=v.selectAll("text"),this.dataPaths.line=v.selectAll(".js-line"),v=this.layers.backplot.select(".choroplethlayer"),this.dataPaths.choropleth=v.selectAll("path"),this.render())};b.updateProjection=function(v,G){v=this.graphDiv;var I=G[this.id],J=G._size,K=I.domain,N=I.projection,H=I.lonaxis,L=I.lataxis,P=H._ax,Q=
L._ax;G=this.projection=m(I);K=[[J.l+J.w*K.x[0],J.t+J.h*(1-K.y[1])],[J.l+J.w*K.x[1],J.t+J.h*(1-K.y[0])]];J=I.center||{};var S=N.rotation||{},O=H.range||[],U=L.range||[];I.fitbounds&&(P._length=K[1][0]-K[0][0],Q._length=K[1][1]-K[0][1],P.range=q(v,P),Q.range=q(v,Q),L=(P.range[0]+P.range[1])/2,H=(Q.range[0]+Q.range[1])/2,I._isScoped?J={lon:L,lat:H}:I._isClipped?(J={lon:L,lat:H},S={lon:L,lat:H,roll:S.roll},U=N.type,O=F.lonaxisSpan[U]/2||180,U=F.lataxisSpan[U]/2||90,O=[L-O,L+O],U=[H-U,H+U]):(J={lon:L,
lat:H},S={lon:L,lat:S.lat,roll:S.roll}));G.center([J.lon-S.lon,J.lat-S.lat]).rotate([-S.lon,-S.lat,S.roll]).parallels(N.parallels);S=h(O,U);G.fitExtent(K,S);K=this.bounds=G.getBounds(S);L=this.fitScale=G.scale();S=G.translate();if(!(isFinite(K[0][0])&&isFinite(K[0][1])&&isFinite(K[1][0])&&isFinite(K[1][1]))||isNaN(S[0])||isNaN(S[0])){G=["fitbounds","projection.rotation","center","lonaxis.range","lataxis.range"];I={};for(J=0;J<G.length;J++)I[this.id+"."+G[J]]=null;this.viewInitial=null;e.warn("Invalid geo settings, relayout'ing to default view.");
v._promises.push(d.call("relayout",v,I));return"Invalid geo settings, relayout'ing to default view."}I.fitbounds?(v=G.getBounds(h(P.range,Q.range)),v=Math.min((K[1][0]-K[0][0])/(v[1][0]-v[0][0]),(K[1][1]-K[0][1])/(v[1][1]-v[0][1])),isFinite(v)?G.scale(v*L):e.warn("Something went wrong during"+this.id+"fitbounds computations.")):G.scale(N.scale*L);v=this.midPt=[(K[0][0]+K[1][0])/2,(K[0][1]+K[1][1])/2];G.translate([S[0]+(v[0]-S[0]),S[1]+(v[1]-S[1])]).clipExtent(K);I._isAlbersUsa&&(v=G([J.lon,J.lat]),
I=G.translate(),G.translate([I[0]-(v[0]-I[0]),I[1]-(v[1]-I[1])]))};b.updateBaseLayers=function(v,G){function I(P){return"lonaxis"===P||"lataxis"===P}var J=this,K=J.topojson,N=J.layers,H=J.basePaths,L=(this.hasChoropleth?F.layersForChoropleth:F.layers).filter(function(P){return F.lineLayers[P]||F.fillLayers[P]?G["show"+P]:I(P)?G[P].showgrid:!0});L=J.framework.selectAll(".layer").data(L,String);L.exit().each(function(P){delete N[P];delete H[P];a.select(this).remove()});L.enter().append("g").attr("class",
function(P){return"layer "+P}).each(function(P){var Q=N[P]=a.select(this);"bg"===P?J.bgRect=Q.append("rect").style("pointer-events","all"):I(P)?H[P]=Q.append("path").style("fill","none"):"backplot"===P?Q.append("g").classed("choroplethlayer",!0):"frontplot"===P?Q.append("g").classed("scatterlayer",!0):F.lineLayers[P]?H[P]=Q.append("path").style("fill","none").style("stroke-miterlimit",2):F.fillLayers[P]&&(H[P]=Q.append("path").style("stroke","none"))});L.order();L.each(function(P){var Q=H[P],S=F.layerNameToAdjective[P];
"frame"===P?Q.datum(F.sphereSVG):F.lineLayers[P]||F.fillLayers[P]?Q.datum(C(K,K.objects[P])):I(P)&&Q.datum(p(P,G,v)).call(l.stroke,G[P].gridcolor).call(k.dashLine,"",G[P].gridwidth);F.lineLayers[P]?Q.call(l.stroke,G[S+"color"]).call(k.dashLine,"",G[S+"width"]):F.fillLayers[P]&&Q.call(l.fill,G[S+"color"])})};b.updateDims=function(v,G){var I=this.bounds,J=(G.framewidth||0)/2;v=I[0][0]-J;var K=I[0][1]-J,N=I[1][0]-v+J;I=I[1][1]-K+J;k.setRect(this.clipRect,v,K,N,I);this.bgRect.call(k.setRect,v,K,N,I).call(l.fill,
G.bgcolor);this.xaxis._offset=v;this.xaxis._length=N;this.yaxis._offset=K;this.yaxis._length=I};b.updateFx=function(v,G){function I(){var O=K.viewInitial,U={},X;for(X in O)U[K.id+"."+X]=O[X];d.call("_guiRelayout",N,U);N.emit("plotly_doubleclick",null)}function J(O){return K.projection.invert([O[0]+K.xaxis._offset,O[1]+K.yaxis._offset])}var K=this,N=K.graphDiv,H=K.bgRect,L=v.dragmode,P=v.clickmode;if(!K.isStatic){var Q;"select"===L?Q=function(O,U){(O.range={})[K.id]=[J([U.xmin,U.ymin]),J([U.xmax,U.ymax])]}:
"lasso"===L&&(Q=function(O,U,X){(O.lassoPoints={})[K.id]=X.filtered.map(J)});var S={element:K.bgRect.node(),gd:N,plotinfo:{id:K.id,xaxis:K.xaxis,yaxis:K.yaxis,fillRangeItems:Q},xaxes:[K.xaxis],yaxes:[K.yaxis],subplot:K.id,clickFn:function(O){2===O&&w(N)}};if("pan"===L){if(H.node().onmousedown=null,H.call(E(K,G)),H.on("dblclick.zoom",I),!N._context._scrollZoom.geo)H.on("wheel.zoom",null)}else if("select"===L||"lasso"===L)H.on(".zoom",null),S.prepFn=function(O,U,X){u(O,U,X,S,L)},t.init(S);H.on("mousemove",
function(){var O=K.projection.invert(a.mouse(this));if(!O||isNaN(O[0])||isNaN(O[1]))return t.unhover(N,a.event);K.xaxis.p2c=function(){return O[0]};K.yaxis.p2c=function(){return O[1]};c.hover(N,a.event,K.id)});H.on("mouseout",function(){N._dragging||t.unhover(N,a.event)});H.on("click",function(){"select"!==L&&"lasso"!==L&&(-1<P.indexOf("select")&&x(a.event,N,[K.xaxis],[K.yaxis],K.id,S),-1<P.indexOf("event")&&c.click(N,a.event))})}};b.makeFramework=function(){var v=this,G=v.graphDiv,I=G._fullLayout,
J="clip"+I._uid+v.id;v.clipDef=I._clips.append("clipPath").attr("id",J);v.clipRect=v.clipDef.append("rect");v.framework=a.select(v.container).append("g").attr("class","geo "+v.id).call(k.setClipUrl,J,G);v.project=function(K){return(K=v.projection(K))?[K[0]-v.xaxis._offset,K[1]-v.yaxis._offset]:[null,null]};v.xaxis={_id:"x",c2p:function(K){return v.project(K)[0]}};v.yaxis={_id:"y",c2p:function(K){return v.project(K)[1]}};v.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};g.setConvert(v.mockAxis,
I)};b.saveViewInitial=function(v){var G=v.center||{},I=v.projection,J=I.rotation||{};this.viewInitial={fitbounds:v.fitbounds,"projection.scale":I.scale};e.extendFlat(this.viewInitial,v._isScoped?{"center.lon":G.lon,"center.lat":G.lat}:v._isClipped?{"projection.rotation.lon":J.lon,"projection.rotation.lat":J.lat}:{"center.lon":G.lon,"center.lat":G.lat,"projection.rotation.lon":J.lon})};b.render=function(){function v(N){return(N=I(N.lonlat))?"translate("+N[0]+","+N[1]+")":null}function G(N){return I.isLonLatOverEdges(N.lonlat)?
"none":null}var I=this.projection,J=I.getPath(),K;for(K in this.basePaths)this.basePaths[K].attr("d",J);for(K in this.dataPaths)this.dataPaths[K].attr("d",function(N){return J(N.geojson)});for(K in this.dataPoints)this.dataPoints[K].attr("display",G).attr("transform",v)}},{"../../components/color":615,"../../components/dragelement":634,"../../components/drawing":637,"../../components/fx":655,"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/topojson_utils":776,"../../registry":880,"../cartesian/autorange":796,
"../cartesian/axes":797,"../cartesian/select":816,"../plots":860,"./constants":827,"./projections":832,"./zoom":833,d3:169,"topojson-client":551}],829:[function(b,y,D){var n=b("../../plots/get_data").getSubplotCalcData;D=b("../../lib").counterRegex;var m=b("./geo");D=D("geo");y.exports={attr:"geo",name:"geo",idRoot:"geo",idRegex:D,attrRegex:D,attributes:{geo:{valType:"subplotid",dflt:"geo",editType:"calc"}},layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(p){for(var h=
p._fullLayout,a=p.calcdata,d=h._subplots.geo,e=0;e<d.length;e++){var l=d[e],k=n(a,"geo",l),c=h[l]._subplot;c||(c=m({id:l,graphDiv:p,container:h._geolayer.node(),topojsonURL:p._context.topojsonURL,staticPlot:p._context.staticPlot}),h[l]._subplot=c);c.plot(k,h,p._promises)}},updateFx:function(p){p=p._fullLayout;for(var h=p._subplots.geo,a=0;a<h.length;a++){var d=p[h[a]];d._subplot.updateFx(p,d)}},clean:function(p,h,a,d){p=d._subplots.geo||[];for(a=0;a<p.length;a++){var e=p[a],l=d[e]._subplot;!h[e]&&
l&&(l.framework.remove(),l.clipDef.remove())}}}},{"../../lib":749,"../../plots/get_data":834,"./geo":828,"./layout_attributes":830,"./layout_defaults":831}],830:[function(b,y,D){D=b("../../components/color/attributes");var n=b("../domain").attributes,m=b("./constants");b=b("../../plot_api/edit_types").overrideAll;var p={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",
dflt:D.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(y.exports=b({domain:n({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(m.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(m.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",
items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:D.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:m.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:m.waterColor},showlakes:{valType:"boolean",
dflt:!1},lakecolor:{valType:"color",dflt:m.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:m.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:D.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:D.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:D.defaultLine},
framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:D.background},lonaxis:p,lataxis:p},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":614,"../../plot_api/edit_types":780,"../domain":824,"./constants":827}],831:[function(b,y,D){function n(l,k,c,f){var g=h(f.fullData,"geo",f.id).map(function(J){return J._expandedIndex});f=c("resolution");var q=c("scope"),t=a.scopeDefaults[q],u=c("projection.type",t.projType),w=k._isAlbersUsa=
"albers usa"===u;w&&(q=k.scope="usa");var x=k._isScoped="world"!==q,E=k._isConic=-1!==u.indexOf("conic"),F=k._isClipped=!!a.lonaxisSpan[u];!1===l.visible&&(l=m.extendDeep({},k._template),l.showcoastlines=!1,l.showcountries=!1,l.showframe=!1,l.showlakes=!1,l.showland=!1,l.showocean=!1,l.showrivers=!1,l.showsubunits=!1,l.lonaxis&&(l.lonaxis.showgrid=!1),l.lataxis&&(l.lataxis.showgrid=!1),k._template=l);l=c("visible");for(var z,B=0;B<e.length;B++){var C=e[B];z=[30,10][B];if(x)var v=t[C+"Range"];else{v=
a[C+"Span"];v=(v[u]||v["*"])/2;var G=c("projection.rotation."+C.substr(0,3),t.projRotate[B]);v=[G-v,G+v]}v=c(C+".range",v);c(C+".tick0");c(C+".dtick",z);if(z=c(C+".showgrid",l?void 0:!1))c(C+".gridcolor"),c(C+".gridwidth");k[C]._ax={type:"linear",_id:C.slice(0,3),_traceIndices:g,setScale:m.identity,c2l:m.identity,r2l:m.identity,autorange:!0,range:v.slice(),_m:1,_input:{}}}B=k.lonaxis.range;g=k.lataxis.range;u=B[0];B=B[1];0<u&&0>B&&(B+=360);u=(u+B)/2;if(!w){B=x?t.projRotate:[u,0,0];var I=c("projection.rotation.lon",
B[0]);c("projection.rotation.lat",B[1]);c("projection.rotation.roll",B[2]);if(z=c("showcoastlines",!x&&l))c("coastlinecolor"),c("coastlinewidth");(z=c("showocean",l?void 0:!1))&&c("oceancolor")}w?(I=-96.6,w=38.7):(I=x?u:I,w=(g[0]+g[1])/2);c("center.lon",I);c("center.lat",w);E&&c("projection.parallels",t.projParallels||[0,60]);c("projection.scale");(z=c("showland",l?void 0:!1))&&c("landcolor");(z=c("showlakes",l?void 0:!1))&&c("lakecolor");if(z=c("showrivers",l?void 0:!1))c("rivercolor"),c("riverwidth");
if(z=c("showcountries",x&&"usa"!==q&&l))c("countrycolor"),c("countrywidth");if("usa"===q||"north america"===q&&50===f)c("showsubunits",l),c("subunitcolor"),c("subunitwidth");!x&&(z=c("showframe",l))&&(c("framecolor"),c("framewidth"));c("bgcolor");c("fitbounds")&&(delete k.projection.scale,x?(delete k.center.lon,delete k.center.lat):F?(delete k.center.lon,delete k.center.lat,delete k.projection.rotation.lon,delete k.projection.rotation.lat,delete k.lonaxis.range,delete k.lataxis.range):(delete k.center.lon,
delete k.center.lat,delete k.projection.rotation.lon))}var m=b("../../lib"),p=b("../subplot_defaults"),h=b("../get_data").getSubplotData,a=b("./constants"),d=b("./layout_attributes"),e=a.axesNames;y.exports=function(l,k,c){p(l,k,c,{type:"geo",attributes:d,handleDefaults:n,fullData:c,partition:"y"})}},{"../../lib":749,"../get_data":834,"../subplot_defaults":874,"./constants":827,"./layout_attributes":830}],832:[function(b,y,D){y.exports=function(n){function m(O,U){return{type:"Feature",id:O.id,properties:O.properties,
geometry:p(O.geometry,U)}}function p(O,U){if(!O)return null;if("GeometryCollection"===O.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(da){return p(da,U)})};if(!G.hasOwnProperty(O.type))return null;var X=G[O.type];n.geo.stream(O,U(X));return X.result()}function h(){}function a(O){return 1<O?J:-1>O?-J:Math.asin(O)}function d(O){return 1<O?0:-1>O?I:Math.acos(O)}function e(O,U){var X=(2+J)*Math.sin(U);U/=2;for(var da=0,ea=Infinity;10>da&&1E-6<Math.abs(ea);da++)ea=Math.cos(U),
U-=ea=(U+Math.sin(U)*(ea+2)-X)/(2*ea*(1+ea));return[2/Math.sqrt(I*(4+I))*O*(1+Math.cos(U)),2*Math.sqrt(I/(4+I))*Math.sin(U)]}function l(O,U){function X(da,ea){da=P(da/U,ea);da[0]*=O;return da}2>arguments.length&&(U=O);if(1===U)return P;if(Infinity===U)return k;X.invert=function(da,ea){da=P.invert(da/O,ea);da[0]*=U;return da};return X}function k(O,U){return[O*Math.cos(U)/Math.cos(U/=2),2*Math.sin(U)]}function c(O,U){return[3*O/(2*I)*Math.sqrt(I*I/3-U*U),U]}function f(O,U){return[O,1.25*Math.log(Math.tan(I/
4+.4*U))]}function g(O){return function(U){var X=O*Math.sin(U),da=30,ea;do U-=ea=(U+Math.sin(U)-X)/(1+Math.cos(U));while(1E-6<Math.abs(ea)&&0<--da);return U/2}}function q(O,U){var X=U*U,da=X*X;return[O*(.8707-.131979*X+da*(-.013791+da*(.003971*X-.001529*da))),U*(1.007226+X*(.015085+da*(-.044475+.028874*X-.005916*da)))]}function t(O,U){var X=Math.min(18,36*Math.abs(U)/I),da=Math.floor(X);X-=da;var ea=(fa=S[da])[0],ca=fa[1],ia=(fa=S[++da])[0],ha=fa[1];da=(fa=S[Math.min(19,++da)])[0];fa=fa[1];var fa;
return[O*(ia+X*(da-ea)/2+X*X*(da-2*ia+ea)/2),(0<U?J:-J)*(ha+X*(fa-ca)/2+X*X*(fa-2*ha+ca)/2)]}function u(O,U){return[O*Math.cos(U),U]}function w(O,U){var X=Math.cos(U);var da=(da=d(X*Math.cos(O/=2)))?da/Math.sin(da):1;return[2*X*Math.sin(O)*da,Math.sin(U)*da]}function x(O,U){var X=w(O,U);return[(X[0]+O/J)/2,(X[1]+U)/2]}n.geo.project=function(O,U){U=U.stream;if(!U)throw Error("not yet supported");return(O&&E.hasOwnProperty(O.type)?E[O.type]:p)(O,U)};var E={Feature:m,FeatureCollection:function(O,U){return{type:"FeatureCollection",
features:O.features.map(function(X){return m(X,U)})}}},F=[],z=[],B={point:function(O,U){F.push([O,U])},result:function(){var O=F.length?2>F.length?{type:"Point",coordinates:F[0]}:{type:"MultiPoint",coordinates:F}:null;F=[];return O}},C={lineStart:h,point:function(O,U){F.push([O,U])},lineEnd:function(){F.length&&(z.push(F),F=[])},result:function(){var O=z.length?2>z.length?{type:"LineString",coordinates:z[0]}:{type:"MultiLineString",coordinates:z}:null;z=[];return O}},v={polygonStart:h,lineStart:h,
point:function(O,U){F.push([O,U])},lineEnd:function(){var O=F.length;if(O){do F.push(F[0].slice());while(4>++O);z.push(F);F=[]}},polygonEnd:h,result:function(){if(!z.length)return null;var O=[],U=[];z.forEach(function(X){if(4>(ea=X.length))var da=!1;else{da=0;for(var ea,ca=X[ea-1][1]*X[0][0]-X[ea-1][0]*X[0][1];++da<ea;)ca+=X[da-1][1]*X[da][0]-X[da-1][0]*X[da][1];da=0>=ca}da?O.push([X]):U.push(X)});U.forEach(function(X){var da=X[0];O.some(function(ea){for(var ca=ea[0],ia=da[0],ha=da[1],fa=!1,na=0,
sa=ca.length,ua=sa-1;na<sa;ua=na++){var ta=ca[na],oa=ta[0];ta=ta[1];var va=ca[ua];ua=va[0];va=va[1];ta>ha^va>ha&&ia<(ua-oa)*(ha-ta)/(va-ta)+oa&&(fa=!fa)}if(fa)return ea.push(X),!0})||O.push([X])});z=[];return O.length?1<O.length?{type:"MultiPolygon",coordinates:O}:{type:"Polygon",coordinates:O[0]}:null}},G={Point:B,MultiPoint:B,LineString:C,MultiLineString:C,Polygon:v,MultiPolygon:v,Sphere:v},I=Math.PI,J=I/2,K=I/180,N=180/I,H=n.geo.projection,L=n.geo.projectionMutator;n.geo.interrupt=function(O){function U(fa,
na){for(var sa=0>na?-1:1,ua=ea[+(0>na)],ta=0,oa=ua.length-1;ta<oa&&fa>ua[ta][2][0];++ta);fa=O(fa-ua[ta][1][0],na);fa[0]+=O(ua[ta][1][0],sa*na>sa*ua[ta][0][1]?ua[ta][0][1]:na)[0];return fa}function X(){ca=ea.map(function(fa){return fa.map(function(na){var sa=O(na[0][0],na[0][1])[0],ua=O(na[2][0],na[2][1])[0],ta=O(na[1][0],na[0][1])[1];na=O(na[1][0],na[1][1])[1];if(ta>na){var oa=ta;ta=na;na=oa}return[[sa,ta],[ua,na]]})})}function da(fa,na){for(var sa=-1,ua=fa.length,ta=fa[0],oa,va,ma,pa=[];++sa<ua;){oa=
fa[sa];va=(oa[0]-ta[0])/na;ma=(oa[1]-ta[1])/na;for(var za=0;za<na;++za)pa.push([ta[0]+za*va,ta[1]+za*ma]);ta=oa}pa.push(oa);return pa}var ea=[[[[-I,0],[0,J],[I,0]]],[[[-I,0],[0,-J],[I,0]]]],ca;O.invert&&(U.invert=function(fa,na){for(var sa=ca[+(0>na)],ua=ea[+(0>na)],ta=0,oa=sa.length;ta<oa;++ta){var va=sa[ta];if(va[0][0]<=fa&&fa<va[1][0]&&va[0][1]<=na&&na<va[1][1])return sa=O.invert(fa-O(ua[ta][1][0],0)[0],na),sa[0]+=ua[ta][1][0],ua=U(sa[0],sa[1]),fa=[fa,na],1E-6>Math.abs(ua[0]-fa[0])&&1E-6>Math.abs(ua[1]-
fa[1])?sa:null}});var ia=n.geo.projection(U),ha=ia.stream;ia.stream=function(fa){var na=ia.rotate(),sa=ha(fa),ua=(ia.rotate([0,0]),ha(fa));ia.rotate(na);sa.sphere=function(){var ta=n.geo,oa=ta.stream;var va=[];for(var ma=0,pa=ea[0].length;ma<pa;++ma){var za=ea[0][ma],qa=180*za[0][0]/I,Ca=180*za[0][1]/I,Ka=180*za[1][1]/I,Oa=180*za[2][0]/I;za=180*za[2][1]/I;va.push(da([[qa+1E-6,Ca+1E-6],[qa+1E-6,Ka-1E-6],[Oa-1E-6,Ka-1E-6],[Oa-1E-6,za+1E-6]],30))}for(ma=ea[1].length-1;0<=ma;--ma)za=ea[1][ma],qa=180*
za[0][0]/I,Ca=180*za[0][1]/I,Ka=180*za[1][1]/I,Oa=180*za[2][0]/I,za=180*za[2][1]/I,va.push(da([[Oa-1E-6,za-1E-6],[Oa-1E-6,Ka+1E-6],[qa+1E-6,Ka+1E-6],[qa+1E-6,Ca-1E-6]],30));va={type:"Polygon",coordinates:[n.merge(va)]};oa.call(ta,va,ua)};return sa};ia.lobes=function(fa){if(!arguments.length)return ea.map(function(na){return na.map(function(sa){return[[180*sa[0][0]/I,180*sa[0][1]/I],[180*sa[1][0]/I,180*sa[1][1]/I],[180*sa[2][0]/I,180*sa[2][1]/I]]})});ea=fa.map(function(na){return na.map(function(sa){return[[sa[0][0]*
I/180,sa[0][1]*I/180],[sa[1][0]*I/180,sa[1][1]*I/180],[sa[2][0]*I/180,sa[2][1]*I/180]]})});X();return ia};return ia};e.invert=function(O,U){U=.5*U*Math.sqrt((4+I)/I);var X=a(U),da=Math.cos(X);return[O/(2/Math.sqrt(I*(4+I))*(1+da)),a((X+U*(da+2))/(2+J))]};(n.geo.eckert4=function(){return H(e)}).raw=e;var P=n.geo.azimuthalEqualArea.raw;k.invert=function(O,U){U=2*a(U/2);return[O*Math.cos(U/2)/Math.cos(U),U]};(n.geo.hammer=function(){var O=2,U=L(l),X=U(O);X.coefficient=function(da){return arguments.length?
U(O=+da):O};return X}).raw=l;c.invert=function(O,U){return[2/3*I*O/Math.sqrt(I*I/3-U*U),U]};(n.geo.kavrayskiy7=function(){return H(c)}).raw=c;f.invert=function(O,U){return[O,2.5*Math.atan(Math.exp(.8*U))-.625*I]};(n.geo.miller=function(){return H(f)}).raw=f;g(I);var Q=function(O,U,X){function da(ca,ia){return[O*ca*Math.cos(ia=ea(ia)),U*Math.sin(ia)]}var ea=g(X);da.invert=function(ca,ia){ia=a(ia/U);return[ca/(O*Math.cos(ia)),a((2*ia+Math.sin(2*ia))/X)]};return da}(Math.SQRT2/J,Math.SQRT2,I);(n.geo.mollweide=
function(){return H(Q)}).raw=Q;q.invert=function(O,U){var X=U,da=25;do{var ea=X*X;var ca=ea*ea;X-=ca=(X*(1.007226+ea*(.015085+ca*(-.044475+.028874*ea-.005916*ca)))-U)/(1.007226+ea*(.045255+ca*(-.311325+.259866*ea-.005916*11*ca)))}while(1E-6<Math.abs(ca)&&0<--da);return[O/(.8707+(ea=X*X)*(-.131979+ea*(-.013791+ea*ea*ea*(.003971-.001529*ea)))),X]};(n.geo.naturalEarth=function(){return H(q)}).raw=q;var S=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,
.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];S.forEach(function(O){O[1]*=1.0144});t.invert=function(O,U){var X=U/J,da=90*X,ea=Math.min(18,Math.abs(da/5)),ca=Math.max(0,Math.floor(ea));do{var ia=S[ca][1],ha=S[ca+1][1],fa=S[Math.min(19,ca+2)][1],na=fa-ia,sa=2*(Math.abs(X)-ha)/na;ia=(fa-2*ha+ia)/na;sa*=1-ia*sa*(1-2*ia*sa);if(0<=sa||1===ca){da=(0<=U?5:-5)*(sa+ea);X=50;do ea=Math.min(18,Math.abs(da)/
5),ca=Math.floor(ea),sa=ea-ca,ia=S[ca][1],ha=S[ca+1][1],fa=S[Math.min(19,ca+2)][1],da-=(ea=(0<=U?J:-J)*(ha+sa*(fa-ia)/2+sa*sa*(fa-2*ha+ia)/2)-U)*N;while(1E-12<Math.abs(ea)&&0<--X);break}}while(0<=--ca);U=S[ca][0];ea=S[ca+1][0];ca=S[Math.min(19,ca+2)][0];return[O/(ea+sa*(ca-U)/2+sa*sa*(ca-2*ea+U)/2),da*K]};(n.geo.robinson=function(){return H(t)}).raw=t;u.invert=function(O,U){return[O/Math.cos(U),U]};(n.geo.sinusoidal=function(){return H(u)}).raw=u;w.invert=function(O,U){if(!(O*O+4*U*U>I*I+1E-6)){var X=
O,da=U,ea=25;do{var ca=Math.sin(X),ia=Math.sin(X/2),ha=Math.cos(X/2),fa=Math.sin(da),na=Math.cos(da),sa=Math.sin(2*da),ua=fa*fa,ta=na*na,oa=ia*ia,va=1-ta*ha*ha,ma=va?d(na*ha)*Math.sqrt(pa=1/va):pa=0,pa;va=2*ma*na*ia-O;var za=ma*fa-U,qa=pa*(ta*oa+ma*na*ha*ua),Ca=pa*(.5*ca*sa-2*ma*fa*ia);ca=.25*pa*(sa*ia-ma*fa*ta*ca);na=pa*(ua*ha+ma*oa*na);ha=Ca*ca-na*qa;if(!ha)break;Ca=(za*Ca-va*na)/ha;va=(va*ca-za*qa)/ha;X-=Ca;da-=va}while((1E-6<Math.abs(Ca)||1E-6<Math.abs(va))&&0<--ea);return[X,da]}};(n.geo.aitoff=
function(){return H(w)}).raw=w;x.invert=function(O,U){var X=O,da=U,ea=25;do{var ca=Math.cos(da),ia=Math.sin(da),ha=Math.sin(2*da),fa=ia*ia,na=ca*ca,sa=Math.sin(X),ua=Math.cos(X/2),ta=Math.sin(X/2),oa=ta*ta,va=1-na*ua*ua,ma=va?d(ca*ua)*Math.sqrt(pa=1/va):pa=0,pa;va=.5*(2*ma*ca*ta+X/J)-O;var za=.5*(ma*ia+da)-U,qa=.5*pa*(na*oa+ma*ca*ua*fa)+.5/J,Ca=pa*(sa*ha/4-ma*ia*ta);ia=.125*pa*(ha*ta-ma*ia*na*sa);fa=.5*pa*(fa*ua+ma*oa*ca)+.5;ca=Ca*ia-fa*qa;Ca=(za*Ca-va*fa)/ca;va=(va*ia-za*qa)/ca;X-=Ca;da-=va}while((1E-6<
Math.abs(Ca)||1E-6<Math.abs(va))&&0<--ea);return[X,da]};(n.geo.winkel3=function(){return H(x)}).raw=x}},{}],833:[function(b,y,D){function n(F,z){return g.behavior.zoom().translate(z.translate()).scale(z.scale())}function m(F,z,B){function C(P,Q){H[v+"."+P]=q.nestedProperty(J,P).get();t.call("_storeDirectGUIEdit",I,K._preGUI,H);var S=q.nestedProperty(N,P);S.get()!==Q&&(S.set(Q),q.nestedProperty(J,P).set(Q),L[v+"."+P]=Q)}var v=F.id,G=F.graphDiv,I=G.layout,J=I[v],K=G._fullLayout,N=K[v],H={},L={};B(C);
C("projection.scale",z.scale()/F.fitScale);C("fitbounds",!1);G.emit("plotly_relayout",L)}function p(F,z){function B(v){var G=z.invert(F.midPt);v("center.lon",G[0]);v("center.lat",G[1])}var C=n(F,z);C.on("zoomstart",function(){g.select(this).style(x)}).on("zoom",function(){z.scale(g.event.scale).translate(g.event.translate);F.render();var v=z.invert(F.midPt);F.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":z.scale()/F.fitScale,"geo.center.lon":v[0],"geo.center.lat":v[1]})}).on("zoomend",
function(){g.select(this).style(E);m(F,z,B)});return C}function h(F,z){function B(Q){var S=z.rotate(),O=z.invert(F.midPt);Q("projection.rotation.lon",-S[0]);Q("center.lon",O[0]);Q("center.lat",O[1])}var C=n(F,z),v,G,I,J,K,N,H,L,P;C.on("zoomstart",function(){g.select(this).style(x);v=g.mouse(this);G=z.rotate();I=z.translate();J=G;K=z.invert(v)}).on("zoom",function(){N=g.mouse(this);var Q=v;var S=z.invert(Q);S?(S=z(S),Q=2<Math.abs(S[0]-Q[0])||2<Math.abs(S[1]-Q[1])):Q=!0;Q?(C.scale(z.scale()),C.translate(z.translate())):
(z.scale(g.event.scale),z.translate([I[0],g.event.translate[1]]),K?z.invert(N)&&(L=z.invert(N),H=[J[0]+(L[0]-K[0]),G[1],G[2]],z.rotate(H),J=H):(v=N,K=z.invert(v)),P=!0,F.render(),Q=z.rotate(),S=z.invert(F.midPt),F.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":z.scale()/F.fitScale,"geo.center.lon":S[0],"geo.center.lat":S[1],"geo.projection.rotation.lon":-Q[0]}))}).on("zoomend",function(){g.select(this).style(E);P&&m(F,z,B)});return C}function a(F,z){function B(N){I++||N({type:"zoomstart"})}
function C(N){var H=z.rotate();N("projection.rotation.lon",-H[0]);N("projection.rotation.lat",-H[1])}z.rotate();z.scale();var v=n(F,z),G=f(v,"zoomstart","zoom","zoomend"),I=0,J=v.on,K;v.on("zoomstart",function(){g.select(this).style(x);var N=g.mouse(this),H=z.rotate(),L=H,P=z.translate(),Q=e(H);K=d(z,N);J.call(v,"zoom",function(){var S=g.mouse(this);z.scale(g.event.scale);if(!K)N=S,K=d(z,N);else if(d(z,S)){z.rotate(H).translate(P);var O=d(z,S);var U=K;if(U&&O){S=[U[1]*O[2]-U[2]*O[1],U[2]*O[0]-U[0]*
O[2],U[0]*O[1]-U[1]*O[0]];var X=Math.sqrt(c(S,S));O=.5*Math.acos(Math.max(-1,Math.min(1,c(U,O))));U=Math.sin(O)/X;var da=X&&[Math.cos(O),S[2]*U,-S[1]*U,S[0]*U]}else da=void 0;S=Q[0];X=Q[1];O=Q[2];U=Q[3];var ea=da[0],ca=da[1],ia=da[2];da=da[3];S=[S*ea-X*ca-O*ia-U*da,S*ca+X*ea+O*da-U*ia,S*ia-X*da+O*ea+U*ca,S*da+X*ia-O*ca+U*ea];O=[Math.atan2(2*(S[0]*S[1]+S[2]*S[3]),1-2*(S[1]*S[1]+S[2]*S[2]))*w,Math.asin(Math.max(-1,Math.min(1,2*(S[0]*S[2]-S[3]*S[1]))))*w,Math.atan2(2*(S[0]*S[3]+S[1]*S[2]),1-2*(S[2]*
S[2]+S[3]*S[3]))*w];X=K;S=L;ea=k(X,2,O[0]);ea=k(ea,1,O[1]);ea=k(ea,0,O[2]-S[2]);U=X[0];da=X[1];X=X[2];O=ea[0];ca=ea[1];ea=ea[2];ia=Math.atan2(da,U)*w;da=Math.sqrt(U*U+da*da);Math.abs(ca)>da?(U=(0<ca?90:-90)-ia,da=0):(U=Math.asin(ca/da)*w-ia,da=Math.sqrt(da*da-ca*ca));ca=180-U-2*ia;ia=(Math.atan2(ea,O)-Math.atan2(X,da))*w;X=(Math.atan2(ea,O)-Math.atan2(X,-da))*w;O=l(S[0],S[1],U,ia);ea=l(S[0],S[1],ca,X);S=O<=ea?[U,ia,S[2]]:[ca,X,S[2]];isFinite(S[0])&&isFinite(S[1])&&isFinite(S[2])||(S=L);z.rotate(S);
L=S}G.of(this,arguments)({type:"zoom"})});B(G.of(this,arguments))}).on("zoomend",function(){g.select(this).style(E);J.call(v,"zoom",null);var N=G.of(this,arguments);--I||N({type:"zoomend"});m(F,z,C)}).on("zoom.redraw",function(){F.render();var N=z.rotate();F.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":z.scale()/F.fitScale,"geo.projection.rotation.lon":-N[0],"geo.projection.rotation.lat":-N[1]})});return g.rebind(v,G,"on")}function d(F,z){if(F=(z=F.invert(z))&&isFinite(z[0])&&isFinite(z[1])){F=
z[0]*u;z=z[1]*u;var B=Math.cos(z);F=[B*Math.cos(F),B*Math.sin(F),Math.sin(z)]}return F}function e(F){var z=.5*F[0]*u,B=.5*F[1]*u,C=.5*F[2]*u;F=Math.sin(z);z=Math.cos(z);var v=Math.sin(B);B=Math.cos(B);var G=Math.sin(C);C=Math.cos(C);return[z*B*C+F*v*G,F*B*C-z*v*G,z*v*C+F*B*G,z*B*G-F*v*C]}function l(F,z,B,C){F=((B-F)%360+540)%360-180;z=((C-z)%360+540)%360-180;return Math.sqrt(F*F+z*z)}function k(F,z,B){var C=B*u;B=F.slice();var v=0===z?1:0;z=2===z?1:2;var G=Math.cos(C);C=Math.sin(C);B[v]=F[v]*G-F[z]*
C;B[z]=F[z]*G+F[v]*C;return B}function c(F,z){for(var B=0,C=0,v=F.length;C<v;++C)B+=F[C]*z[C];return B}function f(F){for(var z=0,B=arguments.length,C=[];++z<B;)C.push(arguments[z]);var v=g.dispatch.apply(null,C);v.of=function(G,I){return function(J){try{var K=J.sourceEvent=g.event;J.target=F;g.event=J;v[J.type].apply(G,I)}finally{g.event=K}}};return v}var g=b("d3"),q=b("../../lib"),t=b("../../registry"),u=Math.PI/180,w=180/Math.PI,x={cursor:"pointer"},E={cursor:"auto"};y.exports=function(F,z){return(z._isScoped?
p:z._isClipped?a:h)(F,F.projection)}},{"../../lib":749,"../../registry":880,d3:169}],834:[function(b,y,D){var n=b("../registry"),m=b("./cartesian/constants").SUBPLOT_PATTERN;D.getSubplotCalcData=function(p,h,a){h=n.subplotsRegistry[h];if(!h)return[];h=h.attr;for(var d=[],e=0;e<p.length;e++){var l=p[e];l[0].trace[h]===a&&d.push(l)}return d};D.getModuleCalcData=function(p,h){var a=[],d=[];h="string"===typeof h?n.getModule(h).plot:"function"===typeof h?h:h.plot;if(!h)return[a,p];for(var e=0;e<p.length;e++){var l=
p[e],k=l[0].trace;!0===k.visible&&0!==k._length&&(k._module.plot===h?a.push(l):d.push(l))}return[a,d]};D.getSubplotData=function(p,h,a){if(!n.subplotsRegistry[h])return[];var d=n.subplotsRegistry[h].attr,e=[];if("gl2d"===h){var l=a.match(m);var k="x"+l[1];var c="y"+l[2]}for(var f=0;f<p.length;f++)l=p[f],"gl2d"===h&&n.traceIs(l,"gl2d")?l[d[0]]===k&&l[d[1]]===c&&e.push(l):l[d]===a&&e.push(l);return e}},{"../registry":880,"./cartesian/constants":803}],835:[function(b,y,D){function n(e,l){this.element=
e;this.plot=l;this.wheelListener=this.mouseListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxInited=this.boxEnabled=!1;this.boxStart=[0,0];this.boxEnd=[0,0];this.dragStart=[0,0]}var m=b("mouse-change"),p=b("mouse-wheel"),h=b("mouse-event-offset"),a=b("../cartesian/constants"),d=b("has-passive-events");y.exports=function(e){function l(){for(var q=e.graphDiv._fullLayout._axisConstraintGroups,t=e.xaxis._id,u=e.yaxis._id,w=0;w<q.length;w++)if(-1!==q[w][t]){if(-1!==q[w][u])return!0;
break}return!1}function k(q,t,u){function w(v,G,I){var J=Math.min(G,I);G=Math.max(G,I);J!==G?(x[v]=J,x[v+2]=G,g.dataBox=x,e.setRanges(x)):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}var x=e.calcDataBox(),E=f.viewBox,F=g.lastPos[0],z=g.lastPos[1],B=a.MINDRAG*f.pixelRatio,C=a.MINZOOM*f.pixelRatio;t*=f.pixelRatio;u*=f.pixelRatio;u=E[3]-E[1]-u;switch(e.fullLayout.dragmode){case "zoom":q?(z=t/(E[2]-E[0])*(x[2]-x[0])+x[0],E=u/(E[3]-E[1])*(x[3]-x[1])+x[1],g.boxInited||(g.boxStart[0]=z,g.boxStart[1]=
E,g.dragStart[0]=t,g.dragStart[1]=u),g.boxEnd[0]=z,g.boxEnd[1]=E,g.boxInited=!0,g.boxEnabled||g.boxStart[0]===g.boxEnd[0]&&g.boxStart[1]===g.boxEnd[1]||(g.boxEnabled=!0),E=Math.abs(g.dragStart[0]-t)<C,C=Math.abs(g.dragStart[1]-u)<C,!l()||E&&C?(E&&(g.boxEnd[0]=g.boxStart[0]),C&&(g.boxEnd[1]=g.boxStart[1])):(C=g.boxEnd[0]-g.boxStart[0],E=g.boxEnd[1]-g.boxStart[1],z=(x[3]-x[1])/(x[2]-x[0]),Math.abs(C*z)>Math.abs(E)?(g.boxEnd[1]=g.boxStart[1]+Math.abs(C)*z*(0<=E?1:-1),g.boxEnd[1]<x[1]?(g.boxEnd[1]=x[1],
g.boxEnd[0]=g.boxStart[0]+(x[1]-g.boxStart[1])/Math.abs(z)):g.boxEnd[1]>x[3]&&(g.boxEnd[1]=x[3],g.boxEnd[0]=g.boxStart[0]+(x[3]-g.boxStart[1])/Math.abs(z))):(g.boxEnd[0]=g.boxStart[0]+Math.abs(E)/z*(0<=C?1:-1),g.boxEnd[0]<x[0]?(g.boxEnd[0]=x[0],g.boxEnd[1]=g.boxStart[1]+(x[0]-g.boxStart[0])*Math.abs(z)):g.boxEnd[0]>x[2]&&(g.boxEnd[0]=x[2],g.boxEnd[1]=g.boxStart[1]+(x[2]-g.boxStart[0])*Math.abs(z))))):g.boxEnabled?(C=g.boxStart[0]!==g.boxEnd[0],E=g.boxStart[1]!==g.boxEnd[1],C||E?(C&&(w(0,g.boxStart[0],
g.boxEnd[0]),e.xaxis.autorange=!1),E&&(w(1,g.boxStart[1],g.boxEnd[1]),e.yaxis.autorange=!1),e.relayoutCallback()):e.glplot.setDirty(),g.boxEnabled=!1,g.boxInited=!1):g.boxInited&&(g.boxInited=!1);break;case "pan":g.boxEnabled=!1,g.boxInited=!1,q?(g.panning||(g.dragStart[0]=t,g.dragStart[1]=u),Math.abs(g.dragStart[0]-t)<B&&(t=g.dragStart[0]),Math.abs(g.dragStart[1]-u)<B&&(u=g.dragStart[1]),C=(F-t)*(x[2]-x[0])/(f.viewBox[2]-f.viewBox[0]),E=(z-u)*(x[3]-x[1])/(f.viewBox[3]-f.viewBox[1]),x[0]+=C,x[2]+=
C,x[1]+=E,x[3]+=E,e.setRanges(x),g.panning=!0,g.lastInputTime=Date.now(),e.xaxis.autorange=!1,e.yaxis.autorange=!1,e.cameraChanged(),e.handleAnnotations()):g.panning&&(g.panning=!1,e.relayoutCallback())}g.lastPos[0]=t;g.lastPos[1]=u}var c=e.mouseContainer,f=e.glplot,g=new n(c,f);g.mouseListener=m(c,k);c.addEventListener("touchstart",function(q){var t=h(q.changedTouches[0],c);k(0,t[0],t[1]);k(1,t[0],t[1]);q.preventDefault()},d?{passive:!1}:!1);c.addEventListener("touchmove",function(q){q.preventDefault();
var t=h(q.changedTouches[0],c);k(1,t[0],t[1]);q.preventDefault()},d?{passive:!1}:!1);c.addEventListener("touchend",function(q){k(0,g.lastPos[0],g.lastPos[1]);q.preventDefault()},d?{passive:!1}:!1);g.wheelListener=p(c,function(q,t){if(!e.scrollZoom)return!1;q=e.calcDataBox();var u=f.viewBox;t=Math.exp(5*t/(u[3]-u[1]));var w=g.lastPos[0]/(u[2]-u[0])*(q[2]-q[0])+q[0];u=g.lastPos[1]/(u[3]-u[1])*(q[3]-q[1])+q[1];q[0]=(q[0]-w)*t+w;q[2]=(q[2]-w)*t+w;q[1]=(q[1]-u)*t+u;q[3]=(q[3]-u)*t+u;e.setRanges(q);g.lastInputTime=
Date.now();e.xaxis.autorange=!1;e.yaxis.autorange=!1;e.cameraChanged();e.handleAnnotations();e.relayoutCallback();return!0},!0);return g}},{"../cartesian/constants":803,"has-passive-events":415,"mouse-change":457,"mouse-event-offset":458,"mouse-wheel":460}],836:[function(b,y,D){function n(a){this.scene=a;this.gl=a.gl;this.pixelRatio=a.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=[0,0,1,1];this.dataBox=[-1,-1,1,1];this.borderLineEnable=[!1,!1,!1,!1];this.borderLineWidth=[1,1,1,1];this.borderLineColor=
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[!0,!0,!1,!1];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[!0,!0,!1,!1];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=[12,12];this.labelFont=["sans-serif","sans-serif"];
this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=!0;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[!0,!0];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.static=this.scene.staticPlot}var m=b("../cartesian/axes"),
p=b("../../lib/str2rgbarray");b=n.prototype;var h=["xaxis","yaxis"];b.merge=function(a){this.titleEnable=!1;this.backgroundColor=p(a.plot_bgcolor);var d,e;for(e=0;2>e;++e){var l=h[e];var k=l.charAt(0);var c=a[this.scene[l]._name];k=c.title.text===this.scene.fullLayout._dfltTitle[k]?"":c.title.text;for(d=0;2>=d;d+=2)this.labelEnable[e+d]=!1,this.labels[e+d]=k,this.labelColor[e+d]=p(c.title.font.color),this.labelFont[e+d]=c.title.font.family,this.labelSize[e+d]=c.title.font.size,this.labelPad[e+d]=
this.getLabelPad(l,c),this.tickEnable[e+d]=!1,this.tickColor[e+d]=p((c.tickfont||{}).color),this.tickAngle[e+d]="auto"===c.tickangle?0:Math.PI*-c.tickangle/180,this.tickPad[e+d]=this.getTickPad(c),this.tickMarkLength[e+d]=0,this.tickMarkWidth[e+d]=c.tickwidth||0,this.tickMarkColor[e+d]=p(c.tickcolor),this.borderLineEnable[e+d]=!1,this.borderLineColor[e+d]=p(c.linecolor),this.borderLineWidth[e+d]=c.linewidth||0;d=this.hasSharedAxis(c);k=this.hasAxisInDfltPos(l,c)&&!d;l=this.hasAxisInAltrPos(l,c)&&
!d;var f=c.mirror||!1;var g=d?-1!==String(f).indexOf("all"):!!f;d=d?"allticks"===f:-1!==String(f).indexOf("ticks");k?this.labelEnable[e]=!0:l&&(this.labelEnable[e+2]=!0);k?this.tickEnable[e]=c.showticklabels:l&&(this.tickEnable[e+2]=c.showticklabels);if(k||g)this.borderLineEnable[e]=c.showline;if(l||g)this.borderLineEnable[e+2]=c.showline;if(k||d)this.tickMarkLength[e]=this.getTickMarkLength(c);if(l||d)this.tickMarkLength[e+2]=this.getTickMarkLength(c);this.gridLineEnable[e]=c.showgrid;this.gridLineColor[e]=
p(c.gridcolor);this.gridLineWidth[e]=c.gridwidth;this.zeroLineEnable[e]=c.zeroline;this.zeroLineColor[e]=p(c.zerolinecolor);this.zeroLineWidth[e]=c.zerolinewidth}};b.hasSharedAxis=function(a){var d=this.scene;return 0!==m.findSubplotsWithAxis(d.fullLayout._subplots.gl2d,a).indexOf(d.id)};b.hasAxisInDfltPos=function(a,d){d=d.side;if("xaxis"===a)return"bottom"===d;if("yaxis"===a)return"left"===d};b.hasAxisInAltrPos=function(a,d){d=d.side;if("xaxis"===a)return"top"===d;if("yaxis"===a)return"right"===
d};b.getLabelPad=function(a,d){var e=d.title.font.size,l=d.showticklabels;if("xaxis"===a)return"top"===d.side?-10+e*(1.5+(l?1:0)):-10+e*(1.5+(l?.5:0));if("yaxis"===a)return"right"===d.side?10+e*(1.5+(l?1:.5)):10+e*(1.5+(l?.5:0))};b.getTickPad=function(a){return"outside"===a.ticks?10+a.ticklen:15};b.getTickMarkLength=function(a){if(!a.ticks)return 0;var d=a.ticklen;return"inside"===a.ticks?-d:d};y.exports=function(a){return new n(a)}},{"../../lib/str2rgbarray":772,"../cartesian/axes":797}],837:[function(b,
y,D){y=b("../../plot_api/edit_types").overrideAll;var n=b("./scene2d"),m=b("../layout_attributes"),p=b("../../constants/xmlns_namespaces"),h=b("../cartesian/constants"),a=b("../cartesian"),d=b("../../components/fx/layout_attributes"),e=b("../get_data").getSubplotData;D.name="gl2d";D.attr=["xaxis","yaxis"];D.idRoot=["x","y"];D.idRegex=h.idRegex;D.attrRegex=h.attrRegex;D.attributes=b("../cartesian/attributes");D.supplyLayoutDefaults=function(l,k,c){k._has("cartesian")||a.supplyLayoutDefaults(l,k,c)};
D.layoutAttrOverrides=y(a.layoutAttributes,"plot","from-root");D.baseLayoutAttrOverrides=y({plot_bgcolor:m.plot_bgcolor,hoverlabel:d.hoverlabel},"plot","nested");D.plot=function(l){for(var k=l._fullLayout,c=l._fullData,f=k._subplots.gl2d,g=0;g<f.length;g++){var q=f[g],t=k._plots[q],u=e(c,"gl2d",q),w=t._scene2d;void 0===w&&(w=new n({id:q,graphDiv:l,container:l.querySelector(".gl-container"),staticPlot:l._context.staticPlot,plotGlPixelRatio:l._context.plotGlPixelRatio},k),t._scene2d=w);w.plot(u,l.calcdata,
k,l.layout)}};D.clean=function(l,k,c,f){for(var g=f._subplots.gl2d||[],q=0;q<g.length;q++){var t=g[q],u=f._plots[t];u._scene2d&&0===e(l,"gl2d",t).length&&(u._scene2d.destroy(),delete f._plots[t])}a.clean.apply(this,arguments)};D.drawFramework=function(l){l._context.staticPlot||a.drawFramework(l)};D.toSVG=function(l){l=l._fullLayout;for(var k=l._subplots.gl2d,c=0;c<k.length;c++){var f=l._plots[k[c]]._scene2d,g=f.toImage("png");l._glimages.append("svg:image").attr({xmlns:p.svg,"xlink:href":g,x:0,y:0,
width:"100%",height:"100%",preserveAspectRatio:"none"});f.destroy()}};D.updateFx=function(l){l=l._fullLayout;for(var k=l._subplots.gl2d,c=0;c<k.length;c++)l._plots[k[c]]._scene2d.updateFx(l.dragmode)}},{"../../components/fx/layout_attributes":656,"../../constants/xmlns_namespaces":725,"../../plot_api/edit_types":780,"../cartesian":810,"../cartesian/attributes":795,"../cartesian/constants":803,"../get_data":834,"../layout_attributes":851,"./scene2d":838}],838:[function(b,y,D){function n(B,C){this.container=
B.container;this.graphDiv=B.graphDiv;this.pixelRatio=B.plotGlPixelRatio||window.devicePixelRatio;this.id=B.id;this.staticPlot=!!B.staticPlot;this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian;this.fullData=null;this.updateRefs(C);this.makeFramework();this.stopped||(this.glplotOptions=k(this),this.glplotOptions.merge(C),this.glplot=a(this.glplotOptions),this.camera=c(this),this.traces={},this.spikes=d(this.glplot),this.selectBox=e(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=
0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}var m=b("../../registry"),p=b("../../plots/cartesian/axes"),h=b("../../components/fx"),a=b("gl-plot2d"),d=b("gl-spikes2d"),e=b("gl-select-box"),l=b("webgl-context"),k=b("./convert"),c=b("./camera"),f=b("../../lib/show_no_webgl_msg");D=b("../cartesian/constraints");var g=D.enforce,q=D.clean,t=b("../cartesian/autorange").doAutoRange;D=b("../../components/dragelement/helpers");var u=D.drawMode,
w=D.selectMode,x=["xaxis","yaxis"],E,F,z=b("../cartesian/constants").SUBPLOT_PATTERN;y.exports=n;b=n.prototype;b.makeFramework=function(){if(this.staticPlot){if(!F&&(E=document.createElement("canvas"),F=l({canvas:E,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!F))throw Error("Error creating static canvas/context for image server");this.canvas=E;this.gl=F}else{var B=this.container.querySelector(".gl-canvas-focus"),C=l({canvas:B,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!C){f(this);
this.stopped=!0;return}this.canvas=B;this.gl=C}B=this.canvas;B.style.width="100%";B.style.height="100%";B.style.position="absolute";B.style.top="0px";B.style.left="0px";B.style["pointer-events"]="none";this.updateSize(B);B.className+=" user-select-none";B=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");B.style.position="absolute";B.style.top=B.style.left="0px";B.style.width=B.style.height="100%";B.style["z-index"]=20;B.style["pointer-events"]="none";C=this.mouseContainer=
document.createElement("div");C.style.position="absolute";C.style["pointer-events"]="auto";this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var v=this.container;v.appendChild(B);v.appendChild(C);var G=this;C.addEventListener("mouseout",function(){G.isMouseOver=!1;G.unhover()});C.addEventListener("mouseover",function(){G.isMouseOver=!0})};b.toImage=function(B){B||(B="png");this.stopped=!0;this.staticPlot&&this.container.appendChild(E);this.updateSize(this.canvas);var C=this.glplot.gl,
v=C.drawingBufferWidth,G=C.drawingBufferHeight;C.clearColor(1,1,1,0);C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT);this.glplot.setDirty();this.glplot.draw();C.bindFramebuffer(C.FRAMEBUFFER,null);var I=new Uint8Array(v*G*4);C.readPixels(0,0,v,G,C.RGBA,C.UNSIGNED_BYTE,I);C=0;for(var J=G-1;C<J;++C,--J)for(var K=0;K<v;++K)for(var N=0;4>N;++N){var H=I[4*(v*C+K)+N];I[4*(v*C+K)+N]=I[4*(v*J+K)+N];I[4*(v*J+K)+N]=H}C=document.createElement("canvas");C.width=v;C.height=G;J=C.getContext("2d");v=J.createImageData(v,
G);v.data.set(I);J.putImageData(v,0,0);switch(B){case "jpeg":B=C.toDataURL("image/jpeg");break;case "webp":B=C.toDataURL("image/webp");break;default:B=C.toDataURL("image/png")}this.staticPlot&&this.container.removeChild(E);return B};b.updateSize=function(B){B||(B=this.canvas);var C=this.pixelRatio,v=this.fullLayout,G=Math.ceil(C*v.width)|0;C=Math.ceil(C*v.height)|0;if(B.width!==G||B.height!==C)B.width=G,B.height=C;return B};b.computeTickMarks=function(){this.xaxis.setScale();this.yaxis.setScale();
for(var B=[p.calcTicks(this.xaxis),p.calcTicks(this.yaxis)],C=0;2>C;++C)for(var v=0;v<B[C].length;++v)B[C][v].text+="";return B};b.updateRefs=function(B){this.fullLayout=B;B=this.id.match(z);var C="yaxis"+B[2];this.xaxis=this.fullLayout["xaxis"+B[1]];this.yaxis=this.fullLayout[C]};b.relayoutCallback=function(){var B=this.graphDiv,C=this.xaxis,v=this.yaxis,G=B.layout,I={},J=I[C._name+".range"]=C.range.slice(),K=I[v._name+".range"]=v.range.slice();I[C._name+".autorange"]=C.autorange;I[v._name+".autorange"]=
v.autorange;m.call("_storeDirectGUIEdit",B.layout,B._fullLayout._preGUI,I);var N=G[C._name];N.range=J;N.autorange=C.autorange;C=G[v._name];C.range=K;C.autorange=v.autorange;I.lastInputTime=this.camera.lastInputTime;B.emit("plotly_relayout",I)};b.cameraChanged=function(){var B=this.camera;this.glplot.setDataBox(this.calcDataBox());var C=this.computeTickMarks(),v=this.glplotOptions.ticks;a:{for(var G=0;2>G;++G){var I=C[G],J=v[G];if(I.length!==J.length){v=!0;break a}for(var K=0;K<I.length;++K)if(I[K].x!==
J[K].x){v=!0;break a}}v=!1}v&&(this.glplotOptions.ticks=C,this.glplotOptions.dataBox=B.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())};b.handleAnnotations=function(){for(var B=this.graphDiv,C=this.fullLayout.annotations,v=0;v<C.length;v++){var G=C[v];G.xref===this.xaxis._id&&G.yref===this.yaxis._id&&m.getComponentMethod("annotations","drawOne")(B,v)}};b.destroy=function(){if(this.glplot){var B=this.traces;B&&Object.keys(B).map(function(C){B[C].dispose();delete B[C]});this.glplot.dispose();
this.container.removeChild(this.svgContainer);this.container.removeChild(this.mouseContainer);this.glplot=this.fullData=null;this.stopped=!0;this.camera.mouseListener.enabled=!1;this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener);this.camera=null}};b.plot=function(B,C,v){var G=this.glplot;this.updateRefs(v);this.xaxis.clearCalc();this.yaxis.clearCalc();this.updateTraces(B,C);this.updateFx(v.dragmode);var I=v.width,J=v.height;this.updateSize(this.canvas);B=this.glplotOptions;
B.merge(v);B.screenBox=[0,0,I,J];C={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis}};q(C,this.xaxis);q(C,this.yaxis);var K=v._size,N=this.xaxis.domain,H=this.yaxis.domain;B.viewBox=[K.l+N[0]*K.w,K.b+H[0]*K.h,I-K.r-(1-N[1])*K.w,J-K.t-(1-H[1])*K.h];this.mouseContainer.style.width=K.w*(N[1]-N[0])+"px";this.mouseContainer.style.height=K.h*(H[1]-H[0])+"px";this.mouseContainer.height=K.h*(H[1]-H[0]);this.mouseContainer.style.left=K.l+
N[0]*K.w+"px";this.mouseContainer.style.top=K.t+(1-H[1])*K.h+"px";for(J=0;2>J;++J)I=this[x[J]],I._length=B.viewBox[J+2]-B.viewBox[J],t(this.graphDiv,I),I.setScale();g(C);B.ticks=this.computeTickMarks();B.dataBox=this.calcDataBox();B.merge(v);G.update(B);this.glplot.draw()};b.calcDataBox=function(){var B=this.xaxis,C=this.yaxis,v=B.range,G=C.range;B=B.r2l;C=C.r2l;return[B(v[0]),C(G[0]),B(v[1]),C(G[1])]};b.setRanges=function(B){var C=this.xaxis,v=this.yaxis,G=C.l2r,I=v.l2r;C.range=[G(B[0]),G(B[2])];
v.range=[I(B[1]),I(B[3])]};b.updateTraces=function(B,C){var v=Object.keys(this.traces),G;this.fullData=B;var I=0;a:for(;I<v.length;I++){var J=v[I],K=this.traces[J];for(G=0;G<B.length;G++){var N=B[G];if(N.uid===J&&N.type===K.type)continue a}K.dispose();delete this.traces[J]}for(I=0;I<B.length;I++)N=B[I],v=C[I],(G=this.traces[N.uid])?G.update(N,v):(G=N._module.plot(this,N,v),this.traces[N.uid]=G);this.glplot.objects.sort(function(H,L){return H._trace.index-L._trace.index})};b.updateFx=function(B){w(B)||
u(B)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto");this.mouseContainer.style.cursor="pan"===B?"move":"zoom"===B?"crosshair":null};b.emitPointAction=function(B,C){for(var v=B.trace.uid,G=B.pointIndex,I,J=0;J<this.fullData.length;J++)this.fullData[J].uid===v&&(I=this.fullData[J]);B={x:B.traceCoord[0],y:B.traceCoord[1],curveNumber:I.index,pointNumber:G,
data:I._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};h.appendArrayPointValue(B,I,G);this.graphDiv.emit(C,{points:[B]})};b.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var B=this.glplot,C=this.camera,v=C.mouseListener,G=1===this.lastButtonState&&0===v.buttons,I=this.fullLayout;this.lastButtonState=v.buttons;this.cameraChanged();var J=v.x*B.pixelRatio;v=this.canvas.height-B.pixelRatio*v.y;if(C.boxEnabled&&"zoom"===I.dragmode){this.selectBox.enabled=!0;I=this.selectBox.selectBox=
[Math.min(C.boxStart[0],C.boxEnd[0]),Math.min(C.boxStart[1],C.boxEnd[1]),Math.max(C.boxStart[0],C.boxEnd[0]),Math.max(C.boxStart[1],C.boxEnd[1])];for(G=0;2>G;G++)C.boxStart[G]===C.boxEnd[G]&&(I[G]=B.dataBox[G],I[G+2]=B.dataBox[G+2]);B.setDirty()}else if(!C.panning&&this.isMouseOver){this.selectBox.enabled=!1;var K=I._size;(C=(K=B.pick(J/B.pixelRatio+K.l+this.xaxis.domain[0]*K.w,v/B.pixelRatio-(K.t+(1-this.yaxis.domain[1])*K.h)))&&K.object._trace.handlePick(K))&&G&&this.emitPointAction(C,"plotly_click");
K&&"skip"!==K.object._trace.hoverinfo&&I.hovermode&&C&&(!this.lastPickResult||this.lastPickResult.traceUid!==C.trace.uid||this.lastPickResult.dataCoord[0]!==C.dataCoord[0]||this.lastPickResult.dataCoord[1]!==C.dataCoord[1])&&(this.lastPickResult={traceUid:C.trace?C.trace.uid:null,dataCoord:C.dataCoord.slice()},this.spikes.update({center:K.dataCoord}),C.screenCoord=[((B.viewBox[2]-B.viewBox[0])*(K.dataCoord[0]-B.dataBox[0])/(B.dataBox[2]-B.dataBox[0])+B.viewBox[0])/B.pixelRatio,(this.canvas.height-
(B.viewBox[3]-B.viewBox[1])*(K.dataCoord[1]-B.dataBox[1])/(B.dataBox[3]-B.dataBox[1])-B.viewBox[1])/B.pixelRatio],this.emitPointAction(C,"plotly_hover"),G=this.fullData[C.trace.index]||{},J=C.pointIndex,(I=h.castHoverinfo(G,I,J))&&"all"!==I&&(I=I.split("+"),-1===I.indexOf("x")&&(C.traceCoord[0]=void 0),-1===I.indexOf("y")&&(C.traceCoord[1]=void 0),-1===I.indexOf("z")&&(C.traceCoord[2]=void 0),-1===I.indexOf("text")&&(C.textLabel=void 0),-1===I.indexOf("name")&&(C.name=void 0)),h.loneHover({x:C.screenCoord[0],
y:C.screenCoord[1],xLabel:this.hoverFormatter("xaxis",C.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",C.traceCoord[1]),zLabel:C.traceCoord[2],text:C.textLabel,name:C.name,color:h.castHoverOption(G,J,"bgcolor")||C.color,borderColor:h.castHoverOption(G,J,"bordercolor"),fontFamily:h.castHoverOption(G,J,"font.family"),fontSize:h.castHoverOption(G,J,"font.size"),fontColor:h.castHoverOption(G,J,"font.color"),nameLength:h.castHoverOption(G,J,"namelength"),textAlign:h.castHoverOption(G,J,"align")},{container:this.svgContainer,
gd:this.graphDiv}))}K||this.unhover();B.draw()}};b.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),h.loneUnhover(this.svgContainer))};b.hoverFormatter=function(B,C){if(void 0!==C)return B=this[B],p.tickText(B,B.c2l(C),"hover").text}},{"../../components/dragelement/helpers":633,"../../components/fx":655,"../../lib/show_no_webgl_msg":770,"../../plots/cartesian/axes":797,"../../registry":880,"../cartesian/autorange":796,"../cartesian/constants":803,
"../cartesian/constraints":804,"./camera":835,"./convert":836,"gl-plot2d":298,"gl-select-box":310,"gl-spikes2d":319,"webgl-context":578}],839:[function(b,y,D){y=b("../../plot_api/edit_types").overrideAll;var n=b("../../components/fx/layout_attributes"),m=b("./scene"),p=b("../get_data").getSubplotData,h=b("../../lib"),a=b("../../constants/xmlns_namespaces");D.name="gl3d";D.attr="scene";D.idRoot="scene";D.idRegex=D.attrRegex=h.counterRegex("scene");D.attributes=b("./layout/attributes");D.layoutAttributes=
b("./layout/layout_attributes");D.baseLayoutAttrOverrides=y({hoverlabel:n.hoverlabel},"plot","nested");D.supplyLayoutDefaults=b("./layout/defaults");D.plot=function(d){for(var e=d._fullLayout,l=d._fullData,k=e._subplots.gl3d,c=0;c<k.length;c++){var f=k[c],g=p(l,"gl3d",f),q=e[f],t=q.camera,u=q._scene;u||(u=new m({id:f,graphDiv:d,container:d.querySelector(".gl-container"),staticPlot:d._context.staticPlot,plotGlPixelRatio:d._context.plotGlPixelRatio,camera:t},e),q._scene=u);u.viewInitial||(u.viewInitial=
{up:{x:t.up.x,y:t.up.y,z:t.up.z},eye:{x:t.eye.x,y:t.eye.y,z:t.eye.z},center:{x:t.center.x,y:t.center.y,z:t.center.z}});u.plot(g,e,d.layout)}};D.clean=function(d,e,l,k){d=k._subplots.gl3d||[];for(l=0;l<d.length;l++){var c=d[l];!e[c]&&k[c]._scene&&(k[c]._scene.destroy(),k._infolayer&&k._infolayer.selectAll(".annotation-"+c).remove())}};D.toSVG=function(d){d=d._fullLayout;for(var e=d._subplots.gl3d,l=d._size,k=0;k<e.length;k++){var c=d[e[k]],f=c.domain;c=c._scene;var g=c.toImage("png");d._glimages.append("svg:image").attr({xmlns:a.svg,
"xlink:href":g,x:l.l+l.w*f.x[0],y:l.t+l.h*(1-f.y[1]),width:l.w*(f.x[1]-f.x[0]),height:l.h*(f.y[1]-f.y[0]),preserveAspectRatio:"none"});c.destroy()}};D.cleanId=function(d){if(d.match(/^scene[0-9]*$/))return d=d.substr(5),"1"===d&&(d=""),"scene"+d};D.updateFx=function(d){d=d._fullLayout;for(var e=d._subplots.gl3d,l=0;l<e.length;l++)d[e[l]]._scene.updateFx(d.dragmode,d.hovermode)}},{"../../components/fx/layout_attributes":656,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../plot_api/edit_types":780,
"../get_data":834,"./layout/attributes":840,"./layout/defaults":844,"./layout/layout_attributes":845,"./scene":849}],840:[function(b,y,D){y.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],841:[function(b,y,D){D=b("../../../components/color");var n=b("../../cartesian/layout_attributes"),m=b("../../../lib/extend").extendFlat;b=b("../../../plot_api/edit_types").overrideAll;y.exports=b({visible:n.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",
dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:D.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:n.color,categoryorder:n.categoryorder,categoryarray:n.categoryarray,title:{text:n.title.text,font:n.title.font},type:m({},n.type,{values:["-","linear","log","date","category"]}),autorange:n.autorange,rangemode:n.rangemode,range:m({},n.range,
{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,mirror:n.mirror,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:n.tickfont,tickangle:n.tickangle,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,
showexponent:n.showexponent,exponentformat:n.exponentformat,separatethousands:n.separatethousands,tickformat:n.tickformat,tickformatstops:n.tickformatstops,hoverformat:n.hoverformat,showline:n.showline,linecolor:n.linecolor,linewidth:n.linewidth,showgrid:n.showgrid,gridcolor:m({},n.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:n.gridwidth,zeroline:n.zeroline,zerolinecolor:n.zerolinecolor,zerolinewidth:n.zerolinewidth,_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}},"plot",
"from-root")},{"../../../components/color":615,"../../../lib/extend":739,"../../../plot_api/edit_types":780,"../../cartesian/layout_attributes":811}],842:[function(b,y,D){var n=b("tinycolor2").mix,m=b("../../../lib"),p=b("../../../plot_api/plot_template"),h=b("./axis_attributes"),a=b("../../cartesian/type_defaults"),d=b("../../cartesian/axis_defaults"),e=["xaxis","yaxis","zaxis"],l=13600/187;y.exports=function(k,c,f){function g(x,E){return m.coerce(q,t,h,x,E)}for(var q,t,u=0;u<e.length;u++){var w=
e[u];q=k[w]||{};t=p.newContainer(c,w);t._id=w[0]+f.scene;t._name=w;a(q,t,g,f);d(q,t,g,{font:f.font,letter:w[0],data:f.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,bgColor:f.bgColor,calendar:f.calendar},f.fullLayout);g("gridcolor",n(t.color,f.bgColor,l).toRgbString());g("title.text",w[0]);t.setScale=m.noop;g("showspikes")&&(g("spikesides"),g("spikethickness"),g("spikecolor",t.color));g("showaxeslabels");g("showbackground")&&g("backgroundcolor")}}},{"../../../lib":749,"../../../plot_api/plot_template":787,
"../../cartesian/axis_defaults":799,"../../cartesian/type_defaults":822,"./axis_attributes":841,tinycolor2:548}],843:[function(b,y,D){function n(){this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[18,18,18];this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont=["Open Sans","Open Sans",
"Open Sans"];this.labelSize=[20,20,20];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[30,30,30];this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[10,10,10];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];
this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!0,!0,!0];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._defaultTickPad=this.tickPad.slice();this._defaultLabelPad=this.labelPad.slice();this._defaultLineTickLength=this.lineTickLength.slice()}var m=b("../../../lib/str2rgbarray"),p=b("../../../lib"),h=["xaxis","yaxis","zaxis"];n.prototype.merge=function(a,d){for(var e=0;3>e;++e){var l=d[h[e]];l.visible?
(this.labels[e]=a._meta?p.templateString(l.title.text,a._meta):l.title.text,"font"in l.title&&(l.title.font.color&&(this.labelColor[e]=m(l.title.font.color)),l.title.font.family&&(this.labelFont[e]=l.title.font.family),l.title.font.size&&(this.labelSize[e]=l.title.font.size)),"showline"in l&&(this.lineEnable[e]=l.showline),"linecolor"in l&&(this.lineColor[e]=m(l.linecolor)),"linewidth"in l&&(this.lineWidth[e]=l.linewidth),"showgrid"in l&&(this.gridEnable[e]=l.showgrid),"gridcolor"in l&&(this.gridColor[e]=
m(l.gridcolor)),"gridwidth"in l&&(this.gridWidth[e]=l.gridwidth),"log"===l.type?this.zeroEnable[e]=!1:"zeroline"in l&&(this.zeroEnable[e]=l.zeroline),"zerolinecolor"in l&&(this.zeroLineColor[e]=m(l.zerolinecolor)),"zerolinewidth"in l&&(this.zeroLineWidth[e]=l.zerolinewidth),this.lineTickEnable[e]="ticks"in l&&l.ticks?!0:!1,"ticklen"in l&&(this.lineTickLength[e]=this._defaultLineTickLength[e]=l.ticklen),"tickcolor"in l&&(this.lineTickColor[e]=m(l.tickcolor)),"tickwidth"in l&&(this.lineTickWidth[e]=
l.tickwidth),"tickangle"in l&&(this.tickAngle[e]="auto"===l.tickangle?-3600:Math.PI*-l.tickangle/180),"showticklabels"in l&&(this.tickEnable[e]=l.showticklabels),"tickfont"in l&&(l.tickfont.color&&(this.tickColor[e]=m(l.tickfont.color)),l.tickfont.family&&(this.tickFont[e]=l.tickfont.family),l.tickfont.size&&(this.tickSize[e]=l.tickfont.size)),"mirror"in l?-1!==["ticks","all","allticks"].indexOf(l.mirror)?(this.lineTickMirror[e]=!0,this.lineMirror[e]=!0):!0===l.mirror?(this.lineTickMirror[e]=!1,this.lineMirror[e]=
!0):(this.lineTickMirror[e]=!1,this.lineMirror[e]=!1):this.lineMirror[e]=!1,"showbackground"in l&&!1!==l.showbackground?(this.backgroundEnable[e]=!0,this.backgroundColor[e]=m(l.backgroundcolor)):this.backgroundEnable[e]=!1):(this.tickEnable[e]=!1,this.labelEnable[e]=!1,this.lineEnable[e]=!1,this.lineTickEnable[e]=!1,this.gridEnable[e]=!1,this.zeroEnable[e]=!1,this.backgroundEnable[e]=!1)}};y.exports=function(a,d){var e=new n;e.merge(a,d);return e}},{"../../../lib":749,"../../../lib/str2rgbarray":772}],
844:[function(b,y,D){function n(k,c,f,g){var q=f("bgcolor");q=p.combine(q,g.paper_bgcolor);for(var t=["up","center","eye"],u=0;u<t.length;u++)f("camera."+t[u]+".x"),f("camera."+t[u]+".y"),f("camera."+t[u]+".z");f("camera.projection.type");t=!!f("aspectratio.x")&&!!f("aspectratio.y")&&!!f("aspectratio.z");u=f("aspectmode",t?"manual":"auto");t||(k.aspectratio=c.aspectratio={x:1,y:1,z:1},"manual"===u&&(c.aspectmode="auto"),k.aspectmode=c.aspectmode);t=l(g.fullData,"gl3d",g.id);d(k,c,{font:g.font,scene:g.id,
data:t,bgColor:q,calendar:g.calendar,fullLayout:g.fullLayout});h.getComponentMethod("annotations3d","handleDefaults")(k,c,g);c=g.getDfltFromLayout("dragmode");!1===c||c||(c="orbit",k.camera&&k.camera.up?(q=k.camera.up.x,t=k.camera.up.y,k=k.camera.up.z,0!==k&&(q&&t&&k?.999<k/Math.sqrt(q*q+t*t+k*k)&&(c="turntable"):c="turntable")):c="turntable");f("dragmode",c);f("hovermode",g.getDfltFromLayout("hovermode"))}var m=b("../../../lib"),p=b("../../../components/color"),h=b("../../../registry"),a=b("../../subplot_defaults"),
d=b("./axis_defaults"),e=b("./layout_attributes"),l=b("../../get_data").getSubplotData;y.exports=function(k,c,f){var g=1<c._basePlotModules.length;a(k,c,f,{type:"gl3d",attributes:e,handleDefaults:n,fullLayout:c,font:c.font,fullData:f,getDfltFromLayout:function(q){if(!g&&m.validate(k[q],e[q]))return k[q]},paper_bgcolor:c.paper_bgcolor,calendar:c.calendar})}},{"../../../components/color":615,"../../../lib":749,"../../../registry":880,"../../get_data":834,"../../subplot_defaults":874,"./axis_defaults":842,
"./layout_attributes":845}],845:[function(b,y,D){function n(h,a,d){return{x:{valType:"number",dflt:h,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:d,editType:"camera"},editType:"camera"}}D=b("./axis_attributes");var m=b("../../domain").attributes,p=b("../../../lib/extend").extendFlat;b=b("../../../lib").counterRegex;y.exports={_arrayAttrRegexps:[b("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:p(n(0,
0,1),{}),center:p(n(0,0,0),{}),eye:p(n(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:m({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},
y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:D,yaxis:D,zaxis:D,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",
editType:"camera"}}}},{"../../../lib":749,"../../../lib/extend":739,"../../domain":824,"./axis_attributes":841}],846:[function(b,y,D){function n(){this.enabled=[!0,!0,!0];this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.drawSides=[!0,!0,!0];this.lineWidth=[1,1,1]}var m=b("../../../lib/str2rgbarray"),p=["xaxis","yaxis","zaxis"];n.prototype.merge=function(h){for(var a=0;3>a;++a){var d=h[p[a]];d.visible?(this.enabled[a]=d.showspikes,this.colors[a]=m(d.spikecolor),this.drawSides[a]=d.spikesides,this.lineWidth[a]=
d.spikethickness):(this.enabled[a]=!1,this.drawSides[a]=!1)}};y.exports=function(h){var a=new n;a.merge(h);return a}},{"../../../lib/str2rgbarray":772}],847:[function(b,y,D){y.exports=function(h){for(var a=h.axesOptions,d=h.glplot.axesPixels,e=h.fullSceneLayout,l=[[],[],[]],k=0;3>k;++k){var c=e[p[k]];c._length=(d[k].hi-d[k].lo)*d[k].pixelsPerDataUnit/h.dataScale[k];if(Infinity===Math.abs(c._length)||isNaN(c._length))l[k]=[];else{c._input_range=c.range.slice();c.range[0]=d[k].lo/h.dataScale[k];c.range[1]=
d[k].hi/h.dataScale[k];c._m=1/(h.dataScale[k]*d[k].pixelsPerDataUnit);c.range[0]===c.range[1]&&(--c.range[0],c.range[1]+=1);var f=c.tickmode;if("auto"===c.tickmode){c.tickmode="linear";var g=c.nticks||m.constrain(c._length/40,4,9);n.autoTicks(c,Math.abs(c.range[1]-c.range[0])/g)}g=n.calcTicks(c,{msUTC:!0});for(var q=0;q<g.length;++q)g[q].x*=h.dataScale[k],"date"===c.type&&(g[q].text=g[q].text.replace(/<br>/g," "));l[k]=g;c.tickmode=f}}a.ticks=l;for(k=0;3>k;++k)for(q=0;2>q;++q)a.bounds[q][k]=h.glplot.bounds[q][k];
a=Array(3);for(d=0;3>d;++d){e=l[d];k=Array(e.length);for(c=0;c<e.length;++c)k[c]=e[c].x;a[d]=k}h.contourLevels=a};var n=b("../../cartesian/axes"),m=b("../../../lib"),p=["xaxis","yaxis","zaxis"]},{"../../../lib":749,"../../cartesian/axes":797}],848:[function(b,y,D){function n(m,p){var h=[0,0,0,0],a,d;for(a=0;4>a;++a)for(d=0;4>d;++d)h[d]+=m[4*a+d]*p[a];return h}y.exports=function(m,p){return n(m.projection,n(m.view,n(m.model,[p[0],p[1],p[2],1])))}},{}],849:[function(b,y,D){function n(C,v){var G=document.createElement("div"),
I=C.container;this.graphDiv=C.graphDiv;var J=document.createElementNS("http://www.w3.org/2000/svg","svg");J.style.position="absolute";J.style.top=J.style.left="0px";J.style.width=J.style.height="100%";J.style["z-index"]=20;J.style["pointer-events"]="none";G.appendChild(J);this.svgContainer=J;G.id=C.id;G.style.position="absolute";G.style.top=G.style.left="0px";G.style.width=G.style.height="100%";I.appendChild(G);this.fullLayout=v;this.id=C.id||"scene";this.fullSceneLayout=v[this.id];this.plotArgs=
[[],{},{}];this.axesOptions=u(v,v[this.id]);this.spikeOptions=w(v[this.id]);this.container=G;this.staticMode=!!C.staticPlot;this.pixelRatio=this.pixelRatio||C.plotGlPixelRatio||2;this.dataScale=[1,1,1];this.contourLevels=[[],[],[]];this.convertAnnotations=l.getComponentMethod("annotations3d","convert");this.drawAnnotations=l.getComponentMethod("annotations3d","draw");this.initializeGLPlot()}function m(C,v,G){C=C.fullSceneLayout;for(var I=0;3>I;I++){var J=B[I],K=J.charAt(0);J=C[J];var N=v[K],H=v[K+
"calendar"];K=v["_"+K+"length"];if(k.isArrayOrTypedArray(N))for(var L,P=0;P<(K||N.length);P++)if(k.isArrayOrTypedArray(N[P]))for(var Q=0;Q<N[P].length;++Q)L=J.d2l(N[P][Q],0,H),!isNaN(L)&&isFinite(L)&&(G[0][I]=Math.min(G[0][I],L),G[1][I]=Math.max(G[1][I],L));else L=J.d2l(N[P],0,H),!isNaN(L)&&isFinite(L)&&(G[0][I]=Math.min(G[0][I],L),G[1][I]=Math.max(G[1][I],L));else G[0][I]=Math.min(G[0][I],0),G[1][I]=Math.max(G[1][I],K-1)}}function p(C,v){C=C.fullSceneLayout;for(var G=C.annotations||[],I=0;3>I;I++){var J=
B[I],K=J.charAt(0);J=C[J];for(var N=0;N<G.length;N++){var H=G[N];H.visible&&(H=J.r2l(H[K]),!isNaN(H)&&isFinite(H)&&(v[0][I]=Math.min(v[0][I],H),v[1][I]=Math.max(v[1][I],H)))}}}D=b("gl-plot3d");var h=D.createCamera,a=D.createScene,d=b("webgl-context"),e=b("has-passive-events"),l=b("../../registry"),k=b("../../lib"),c=b("../../plots/cartesian/axes"),f=b("../../components/fx"),g=b("../../lib/str2rgbarray"),q=b("../../lib/show_no_webgl_msg"),t=b("./project"),u=b("./layout/convert"),w=b("./layout/spikes"),
x=b("./layout/tick_marks"),E=b("is-mobile")({tablet:!0,featureDetect:!0}),F,z;b=n.prototype;b.prepareOptions=function(){var C={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:E,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!z&&(F=document.createElement("canvas"),z=d({canvas:F,preserveDrawingBuffer:!0,
premultipliedAlpha:!0,antialias:!0}),!z))throw Error("error creating static canvas/context for image server");C.gl=z;C.canvas=F}return C};b.tryCreatePlot=function(){var C=this.prepareOptions(),v=!0;try{this.glplot=a(C)}catch(G){if(this.staticMode)v=!1;else try{k.warn(["webgl setup failed possibly due to",E?"disabling":"enabling","preserveDrawingBuffer config. The device may not be supported by is-mobile module! Inverting preserveDrawingBuffer option in second attempt to create webgl scene."].join(" ")),
E=C.glOptions.preserveDrawingBuffer=!C.glOptions.preserveDrawingBuffer,this.glplot=a(C)}catch(I){v=!1}}return v};b.initializeGLCamera=function(){var C=this.fullSceneLayout.camera;this.camera=h(this.container,{center:[C.center.x,C.center.y,C.center.z],eye:[C.eye.x,C.eye.y,C.eye.z],up:[C.up.x,C.up.y,C.up.z],_ortho:"orthographic"===C.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})};b.initializeGLPlot=function(){var C=this;C.initializeGLCamera();if(!C.tryCreatePlot())return q(C);C.traces={};C.make4thDimension();
var v=C.graphDiv,G=v.layout,I=function(){var K={};C.isCameraChanged(G)&&(K[C.id+".camera"]=C.getCamera());C.isAspectChanged(G)&&(K[C.id+".aspectratio"]=C.glplot.getAspectratio(),"manual"!==G[C.id].aspectmode&&(C.fullSceneLayout.aspectmode=G[C.id].aspectmode=K[C.id+".aspectmode"]="manual"));return K},J=function(K){if(!1!==K.fullSceneLayout.dragmode){var N=I();K.saveLayout(G);K.graphDiv.emit("plotly_relayout",N)}};C.glplot.canvas.addEventListener("mouseup",function(){J(C)});C.glplot.canvas.addEventListener("wheel",
function(K){if(v._context._scrollZoom.gl3d){if(C.camera._ortho){K=K.deltaX>K.deltaY?1.1:1/1.1;var N=C.glplot.getAspectratio();C.glplot.setAspectratio({x:K*N.x,y:K*N.y,z:K*N.z})}J(C)}},e?{passive:!1}:!1);C.glplot.canvas.addEventListener("mousemove",function(){if(!1!==C.fullSceneLayout.dragmode&&0!==C.camera.mouseListener.buttons){var K=I();C.graphDiv.emit("plotly_relayouting",K)}});C.staticMode||C.glplot.canvas.addEventListener("webglcontextlost",function(K){v&&v.emit&&v.emit("plotly_webglcontextlost",
{event:K,layer:C.id})},!1);C.glplot.oncontextloss=function(){C.recoverContext()};C.glplot.onrender=function(){C.render()};return!0};b.render=function(){function C(ea,ca){ea=v.fullSceneLayout[ea];return c.tickText(ea,ea.d2l(ca),"hover").text}var v=this,G=v.graphDiv,I=v.svgContainer,J=v.container.getBoundingClientRect(),K=J.width;J=J.height;I.setAttributeNS(null,"viewBox","0 0 "+K+" "+J);I.setAttributeNS(null,"width",K);I.setAttributeNS(null,"height",J);x(v);v.glplot.axes.update(v.axesOptions);for(var N=
Object.keys(v.traces),H=null,L=v.glplot.selection,P=0;P<N.length;++P){var Q=v.traces[N[P]];"skip"!==Q.data.hoverinfo&&Q.handlePick(L)&&(H=Q);Q.setContourLevels&&Q.setContourLevels()}if(null!==H){var S=t(v.glplot.cameraParams,L.dataCoordinate);Q=H.data;N=G._fullData[Q.index];P=L.index;var O={xLabel:C("xaxis",L.traceCoordinate[0]),yLabel:C("yaxis",L.traceCoordinate[1]),zLabel:C("zaxis",L.traceCoordinate[2])},U=f.castHoverinfo(N,v.fullLayout,P),X=(U||"").split("+");U=U&&"all"===U;N.hovertemplate||U||
(-1===X.indexOf("x")&&(O.xLabel=void 0),-1===X.indexOf("y")&&(O.yLabel=void 0),-1===X.indexOf("z")&&(O.zLabel=void 0),-1===X.indexOf("text")&&(L.textLabel=void 0),-1===X.indexOf("name")&&(H.name=void 0));var da=[];"cone"===Q.type||"streamtube"===Q.type?(O.uLabel=C("xaxis",L.traceCoordinate[3]),(U||-1!==X.indexOf("u"))&&da.push("u: "+O.uLabel),O.vLabel=C("yaxis",L.traceCoordinate[4]),(U||-1!==X.indexOf("v"))&&da.push("v: "+O.vLabel),O.wLabel=C("zaxis",L.traceCoordinate[5]),(U||-1!==X.indexOf("w"))&&
da.push("w: "+O.wLabel),O.normLabel=L.traceCoordinate[6].toPrecision(3),(U||-1!==X.indexOf("norm"))&&da.push("norm: "+O.normLabel),"streamtube"===Q.type&&(O.divergenceLabel=L.traceCoordinate[7].toPrecision(3),(U||-1!==X.indexOf("divergence"))&&da.push("divergence: "+O.divergenceLabel)),L.textLabel&&da.push(L.textLabel),X=da.join("\x3cbr\x3e")):"isosurface"===Q.type||"volume"===Q.type?(O.valueLabel=c.tickText(v._mockAxis,v._mockAxis.d2l(L.traceCoordinate[3]),"hover").text,da.push("value: "+O.valueLabel),
L.textLabel&&da.push(L.textLabel),X=da.join("\x3cbr\x3e")):X=L.textLabel;U={x:L.traceCoordinate[0],y:L.traceCoordinate[1],z:L.traceCoordinate[2],data:N._input,fullData:N,curveNumber:N.index,pointNumber:P};f.appendArrayPointValue(U,N,P);Q._module.eventData&&(U=N._module.eventData(U,L,N,{},P));Q={points:[U]};v.fullSceneLayout.hovermode&&f.loneHover({trace:N,x:(.5+.5*S[0]/S[3])*K,y:(.5-.5*S[1]/S[3])*J,xLabel:O.xLabel,yLabel:O.yLabel,zLabel:O.zLabel,text:X,name:H.name,color:f.castHoverOption(N,P,"bgcolor")||
H.color,borderColor:f.castHoverOption(N,P,"bordercolor"),fontFamily:f.castHoverOption(N,P,"font.family"),fontSize:f.castHoverOption(N,P,"font.size"),fontColor:f.castHoverOption(N,P,"font.color"),nameLength:f.castHoverOption(N,P,"namelength"),textAlign:f.castHoverOption(N,P,"align"),hovertemplate:k.castOption(N,P,"hovertemplate"),hovertemplateLabels:k.extendFlat({},U,O),eventData:[U]},{container:I,gd:G});L.buttons&&5>L.distance?G.emit("plotly_click",Q):G.emit("plotly_hover",Q);S=Q}else f.loneUnhover(I),
G.emit("plotly_unhover",S);v.drawAnnotations(v)};b.recoverContext=function(){var C=this;C.glplot.dispose();var v=function(){C.glplot.gl.isContextLost()?requestAnimationFrame(v):C.initializeGLPlot()?C.plot.apply(C,C.plotArgs):k.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(v)};var B=["xaxis","yaxis","zaxis"];b.plot=function(C,v,G){this.plotArgs=[C,v,G];if(!this.glplot.contextLost){var I,J,K=v[this.id];G=G[this.id];this.fullLayout=v;this.fullSceneLayout=K;
this.axesOptions.merge(v,K);this.spikeOptions.merge(K);this.setViewport(K);this.updateFx(K.dragmode,K.hovermode);this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d;this.glplot.setClearColor(g(K.bgcolor));this.setConvert(H);C?Array.isArray(C)||(C=[C]):C=[];var N=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(I=0;I<C.length;++I){var H=C[I];!0===H.visible&&0!==H._length&&m(this,H,N)}p(this,N);var L=[1,1,1];for(J=0;3>J;++J)L[J]=N[1][J]===N[0][J]?1:1/(N[1][J]-N[0][J]);
this.dataScale=L;this.convertAnnotations(this);for(I=0;I<C.length;++I)H=C[I],!0===H.visible&&0!==H._length&&((N=this.traces[H.uid])?N.data.type===H.type?N.update(H):(N.dispose(),N=H._module.plot(this,H),this.traces[H.uid]=N):(N=H._module.plot(this,H),this.traces[H.uid]=N),N.name=H.name);H=Object.keys(this.traces);I=0;a:for(;I<H.length;++I){for(J=0;J<C.length;++J)if(C[J].uid===H[I]&&!0===C[J].visible&&0!==C[J]._length)continue a;N=this.traces[H[I]];N.dispose();delete this.traces[H[I]]}this.glplot.objects.sort(function(da,
ea){return da._trace.data.index-ea._trace.data.index});N=[[0,0,0],[0,0,0]];C={};for(I=0;3>I;++I){H=K[B[I]];J=H.type;J in C?(C[J].acc*=L[I],C[J].count+=1):C[J]={acc:L[I],count:1};if(H.autorange){N[0][I]=Infinity;N[1][I]=-Infinity;var P=this.glplot.objects,Q=this.fullSceneLayout.annotations||[],S=H._name.charAt(0);for(J=0;J<P.length;J++){var O=P[J],U=O.bounds,X=O._trace.data._pad||0;N[0][I]="ErrorBars"===O.constructor.name&&H._lowerLogErrorBound?Math.min(N[0][I],H._lowerLogErrorBound):Math.min(N[0][I],
U[0][I]/L[I]-X);N[1][I]=Math.max(N[1][I],U[1][I]/L[I]+X)}for(J=0;J<Q.length;J++)P=Q[J],P.visible&&(P=H.r2l(P[S]),N[0][I]=Math.min(N[0][I],P),N[1][I]=Math.max(N[1][I],P));"rangemode"in H&&"tozero"===H.rangemode&&(N[0][I]=Math.min(N[0][I],0),N[1][I]=Math.max(N[1][I],0));N[0][I]>N[1][I]?(N[0][I]=-1,N[1][I]=1):(J=N[1][I]-N[0][I],N[0][I]-=J/32,N[1][I]+=J/32);"reversed"===H.autorange&&(H=N[0][I],N[0][I]=N[1][I],N[1][I]=H)}else J=H.range,N[0][I]=H.r2l(J[0]),N[1][I]=H.r2l(J[1]);N[0][I]===N[1][I]&&(--N[0][I],
N[1][I]+=1);this.glplot.setBounds(I,{min:N[0][I]*L[I],max:N[1][I]*L[I]})}N=K.aspectmode;if("cube"===N)I=[1,1,1];else if("manual"===N)I=K.aspectratio,I=[I.x,I.y,I.z];else if("auto"===N||"data"===N){Q=[1,1,1];for(I=0;3>I;++I)H=K[B[I]],J=H.type,H=C[J],Q[I]=Math.pow(H.acc,1/H.count)/L[I];I="data"===N?Q:4>=Math.max.apply(null,Q)/Math.min.apply(null,Q)?Q:[1,1,1]}else throw Error("scene.js aspectRatio was not one of the enumerated types");K.aspectratio.x=G.aspectratio.x=I[0];K.aspectratio.y=G.aspectratio.y=
I[1];K.aspectratio.z=G.aspectratio.z=I[2];this.glplot.setAspectratio(K.aspectratio);this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:K.aspectratio.x,y:K.aspectratio.y,z:K.aspectratio.z});this.viewInitial.aspectmode||(this.viewInitial.aspectmode=K.aspectmode);K=K.domain||null;v=v._size||null;K&&v&&(G=this.container.style,G.position="absolute",G.left=v.l+K.x[0]*v.w+"px",G.top=v.t+(1-K.y[1])*v.h+"px",G.width=v.w*(K.x[1]-K.x[0])+"px",G.height=v.h*(K.y[1]-K.y[0])+"px");this.glplot.redraw()}};
b.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)};b.getCamera=function(){this.camera.view.recalcMatrix(this.camera.view.lastT());var C=this.camera;return{up:{x:C.up[0],y:C.up[1],z:C.up[2]},center:{x:C.center[0],y:C.center[1],z:C.center[2]},eye:{x:C.eye[0],y:C.eye[1],z:C.eye[2]},projection:{type:!0===
C._ortho?"orthographic":"perspective"}}};b.setViewport=function(C){var v=C.camera;this.camera.lookAt.apply(this,[[v.eye.x,v.eye.y,v.eye.z],[v.center.x,v.center.y,v.center.z],[v.up.x,v.up.y,v.up.z]]);this.glplot.setAspectratio(C.aspectratio);"orthographic"===v.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())};b.isCameraChanged=function(C){var v=this.getCamera();C=k.nestedProperty(C,this.id+".camera").get();var G=!1;if(void 0===
C)G=!0;else{for(var I=0;3>I;I++)for(var J=0;3>J;J++){var K=["up","center","eye"],N=["x","y","z"];if(!C[K[I]]||v[K[I]][N[J]]!==C[K[I]][N[J]]){G=!0;break}}if(!C.projection||v.projection&&v.projection.type!==C.projection.type)G=!0}return G};b.isAspectChanged=function(C){var v=this.glplot.getAspectratio();C=k.nestedProperty(C,this.id+".aspectratio").get();return void 0===C||C.x!==v.x||C.y!==v.y||C.z!==v.z};b.saveLayout=function(C){var v=this.fullLayout,G=this.isCameraChanged(C),I=this.isAspectChanged(C),
J=G||I;if(J){var K={};if(G){var N=this.getCamera();var H=k.nestedProperty(C,this.id+".camera");var L=H.get();K[this.id+".camera"]=L}if(I){var P=this.glplot.getAspectratio();var Q=k.nestedProperty(C,this.id+".aspectratio");L=Q.get();K[this.id+".aspectratio"]=L}l.call("_storeDirectGUIEdit",C,v._preGUI,K);G&&(H.set(N),k.nestedProperty(v,this.id+".camera").set(N));I&&(Q.set(P),k.nestedProperty(v,this.id+".aspectratio").set(P),this.glplot.redraw())}return J};b.updateFx=function(C,v){var G=this.camera;
if(G)if("orbit"===C)G.mode="orbit",G.keyBindingMode="rotate";else if("turntable"===C){G.up=[0,0,1];G.mode="turntable";G.keyBindingMode="rotate";var I=this.graphDiv;C=I._fullLayout;G=this.fullSceneLayout.camera;var J=G.up.x,K=G.up.y,N=G.up.z;.999>N/Math.sqrt(J*J+K*K+N*N)&&(J=this.id+".camera.up",K={x:0,y:0,z:1},N={},N[J]=K,I=I.layout,l.call("_storeDirectGUIEdit",I,C._preGUI,N),G.up=K,k.nestedProperty(I,J).set(K))}else G.keyBindingMode=C;this.fullSceneLayout.hovermode=v};b.toImage=function(C){C||(C=
"png");this.staticMode&&this.container.appendChild(F);this.glplot.redraw();var v=this.glplot.gl,G=v.drawingBufferWidth,I=v.drawingBufferHeight;v.bindFramebuffer(v.FRAMEBUFFER,null);var J=new Uint8Array(G*I*4);v.readPixels(0,0,G,I,v.RGBA,v.UNSIGNED_BYTE,J);v=0;for(var K=I-1;v<K;++v,--K)for(var N=0;N<G;++N)for(var H=0;4>H;++H){var L=4*(G*v+N)+H,P=4*(G*K+N)+H,Q=J[L];J[L]=J[P];J[P]=Q}for(v=0;v<I;++v)for(K=0;K<G;++K)if(N=4*(G*v+K),H=J[N+3],0<H)for(H=255/H,L=0;3>L;++L)J[N+L]=Math.min(H*J[N+L],255);v=document.createElement("canvas");
v.width=G;v.height=I;K=v.getContext("2d");G=K.createImageData(G,I);G.data.set(J);K.putImageData(G,0,0);switch(C){case "jpeg":C=v.toDataURL("image/jpeg");break;case "webp":C=v.toDataURL("image/webp");break;default:C=v.toDataURL("image/png")}this.staticMode&&this.container.removeChild(F);return C};b.setConvert=function(){for(var C=0;3>C;C++){var v=this.fullSceneLayout[B[C]];c.setConvert(v,this.fullLayout);v.setScale=k.noop}};b.make4thDimension=function(){var C=this.graphDiv._fullLayout;this._mockAxis=
{type:"linear",showexponent:"all",exponentformat:"B"};c.setConvert(this._mockAxis,C)};y.exports=n},{"../../components/fx":655,"../../lib":749,"../../lib/show_no_webgl_msg":770,"../../lib/str2rgbarray":772,"../../plots/cartesian/axes":797,"../../registry":880,"./layout/convert":843,"./layout/spikes":846,"./layout/tick_marks":847,"./project":848,"gl-plot3d":301,"has-passive-events":415,"is-mobile":441,"webgl-context":578}],850:[function(b,y,D){y.exports=function(n,m,p,h){h=h||n.length;for(var a=Array(h),
d=0;d<h;d++)a[d]=[n[d],m[d],p[d]];return a}},{}],851:[function(b,y,D){D=b("./font_attributes");var n=b("./animation_attributes"),m=b("../components/color/attributes"),p=b("../components/shapes/draw_newshape/attributes"),h=b("./pad_attributes");b=b("../lib/extend").extendFlat;var a=D({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif';a.size.dflt=12;a.color.dflt=m.defaultLine;y.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:D({editType:"layoutstyle"}),
xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle",
"bottom"],editType:"layoutstyle"},pad:b(h({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",
min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:m.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:m.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",
editType:"legend"},colorway:{valType:"colorlist",dflt:m.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",
editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},newshape:p.newshape,activeshape:p.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:b({},n.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:D({editType:"layoutstyle"})}}},{"../components/color/attributes":614,"../components/shapes/draw_newshape/attributes":697,"../lib/extend":739,"./animation_attributes":792,"./font_attributes":825,"./pad_attributes":859}],
852:[function(b,y,D){b={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:'\x3ca href\x3d"http://www.openstreetmap.org/about/" target\x3d"_blank"\x3e OpenStreetMap\x3c/a\x3e',tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",
type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:'\x3ca href\x3d"https://carto.com/" target\x3d"_blank"\x3e CARTO\x3c/a\x3e',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",
version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:'\x3ca href\x3d"https://carto.com/" target\x3d"_blank"\x3e CARTO\x3c/a\x3e',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by-sa/3.0"\x3eCC BY SA\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}};D=Object.keys(b);y.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:"basic streets outdoors light dark satellite satellite-streets".split(" "),styleValueDflt:"basic",stylesNonMapbox:b,styleValuesNonMapbox:D,traceLayerPrefix:"plotly-trace-layer-",
layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:"Your custom plotly.js bundle is not using the correct mapbox-gl version\nPlease install mapbox-gl@1.10.1.",noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",
D.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:"Set multiple mapbox access token across different mapbox subplot,\nusing first token found as mapbox-gl does not allow multipleaccess tokens on the same page.",mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",
path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",
polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;",
"ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3Csvg viewBox\x3d"0 0 20 20" xmlns\x3d"http://www.w3.org/2000/svg"%3E %3Cpath fill\x3d"%23333333" fill-rule\x3d"evenodd" d\x3d"M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',
"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px",
"ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3C?xml version\x3d"1.0" encoding\x3d"utf-8"?%3E %3Csvg version\x3d"1.1" id\x3d"Layer_1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" x\x3d"0px" y\x3d"0px" viewBox\x3d"0 0 21 21" style\x3d"enable-background:new 0 0 21 21;" xml:space\x3d"preserve"%3E%3Cg transform\x3d"translate(0,0.01)"%3E%3Cpath d\x3d"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3Cpath d\x3d"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpath d\x3d"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpolygon points\x3d"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},
{}],853:[function(b,y,D){var n=b("../../lib");y.exports=function(m,p){var h=m.split(" ");m=h[0];h=h[1];var a=n.isArrayOrTypedArray(p)?n.mean(p):p;p=.5+a/100;a=1.5+a/100;var d=["",""],e=[0,0];switch(m){case "top":d[0]="top";e[1]=-a;break;case "bottom":d[0]="bottom",e[1]=a}switch(h){case "left":d[1]="right";e[0]=-p;break;case "right":d[1]="left",e[0]=p}return{anchor:d[0]&&d[1]?d.join("-"):d[0]?d[0]:d[1]?d[1]:"center",offset:e}}},{"../../lib":749}],854:[function(b,y,D){function n(f){return"string"===
typeof f&&(-1!==c.styleValuesMapbox.indexOf(f)||0===f.indexOf("mapbox://"))}var m=b("mapbox-gl"),p=b("../../lib"),h=b("../../plots/get_data").getSubplotCalcData,a=b("../../constants/xmlns_namespaces"),d=b("d3"),e=b("../../components/drawing"),l=b("../../lib/svg_text_utils"),k=b("./mapbox"),c=D.constants=b("./constants");D.name="mapbox";D.attr="subplot";D.idRoot="mapbox";D.idRegex=D.attrRegex=p.counterRegex("mapbox");D.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};D.layoutAttributes=
b("./layout_attributes");D.supplyLayoutDefaults=b("./layout_defaults");D.plot=function(f){var g=f._fullLayout,q=f.calcdata,t=g._subplots.mapbox;if(m.version!==c.requiredVersion)throw Error(c.wrongVersionErrorMsg);var u=f._fullLayout;if(""===f._context.mapboxAccessToken)u="";else{for(var w=[],x=[],E=!1,F=!1,z=0;z<t.length;z++){var B=u[t[z]],C=B.accesstoken;n(B.style)&&(C?p.pushUnique(w,C):(n(B._input.style)&&(p.error("Uses Mapbox map style, but did not set an access token."),E=!0),F=!0));C&&p.pushUnique(x,
C)}if(F)throw f=E?c.noAccessTokenErrorMsg:c.missingStyleErrorMsg,p.error(f),Error(f);w.length?(1<w.length&&p.warn(c.multipleTokensErrorMsg),u=w[0]):(x.length&&p.log(["Listed mapbox access token(s)",x.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),u="")}m.accessToken=u;for(u=0;u<t.length;u++)w=t[u],x=h(q,"mapbox",w),E=g[w],F=E._subplot,F||(F=new k(f,w),g[w]._subplot=F),F.viewInitial||(F.viewInitial={center:p.extendFlat({},E.center),zoom:E.zoom,bearing:E.bearing,pitch:E.pitch}),
F.plot(x,g,f._promises)};D.clean=function(f,g,q,t){f=t._subplots.mapbox||[];for(q=0;q<f.length;q++){var u=f[q];!g[u]&&t[u]._subplot&&t[u]._subplot.destroy()}};D.toSVG=function(f){for(var g=f._fullLayout,q=g._subplots.mapbox,t=g._size,u=0;u<q.length;u++){var w=g[q[u]],x=w.domain,E=w._subplot.toImage("png");g._glimages.append("svg:image").attr({xmlns:a.svg,"xlink:href":E,x:t.l+t.w*x.x[0],y:t.t+t.h*(1-x.y[1]),width:t.w*(x.x[1]-x.x[0]),height:t.h*(x.y[1]-x.y[0]),preserveAspectRatio:"none"});w=d.select(w._subplot.div);
null!==w.select(".mapboxgl-ctrl-logo").node().offsetParent&&(E=g._glimages.append("g"),E.attr("transform","translate("+(t.l+t.w*x.x[0]+10)+", "+(t.t+t.h*(1-x.y[0])-31)+")"),E.append("path").attr("d",c.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),E.append("path").attr("d",c.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),E.append("path").attr("d",c.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),E.append("polygon").attr("points",
c.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"}));var F=w.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map","");w=g._glimages.append("g");var z=w.append("text");z.text(F).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":F});var B=e.bBox(z.node());E=t.w*(x.x[1]-x.x[0]);B.width>E/2&&(B=F.split("|").join("\x3cbr\x3e"),z.text(B).attr("data-unformatted",B).call(l.convertToTspans,
f),B=e.bBox(z.node()));z.attr("transform","translate(-3, "+(-B.height+8)+")");w.insert("rect",".static-attribution").attr({x:-B.width-6,y:-B.height-3,width:B.width+6,height:B.height+3,fill:"rgba(255, 255, 255, 0.75)"});z=1;B.width+6>E&&(z=E/(B.width+6));x=[t.l+t.w*x.x[1],t.t+t.h*(1-x.y[0])];w.attr("transform","translate("+x[0]+","+x[1]+") scale("+z+")")}};D.updateFx=function(f){f=f._fullLayout;for(var g=f._subplots.mapbox,q=0;q<g.length;q++)f[g[q]]._subplot.updateFx(f)}},{"../../components/drawing":637,
"../../constants/xmlns_namespaces":725,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/get_data":834,"./constants":852,"./layout_attributes":856,"./layout_defaults":857,"./mapbox":858,d3:169,"mapbox-gl":447}],855:[function(b,y,D){function n(l,k){this.subplot=l;this.uid=l.uid+"-"+k;this.index=k;this.idSource="source-"+this.uid;this.idLayer=e.layoutLayerPrefix+this.uid;this.below=this.layerType=this.source=this.sourceType=null;this.visible=!1}function m(l){if(!l.visible)return!1;l=l.source;
if(Array.isArray(l)&&0<l.length){for(var k=0;k<l.length;k++)if("string"!==typeof l[k]||0===l[k].length)return!1;return!0}return h.isPlainObject(l)||"string"===typeof l&&0<l.length}function p(l){var k={},c={};switch(l.type){case "circle":h.extendFlat(c,{"circle-radius":l.circle.radius,"circle-color":l.color,"circle-opacity":l.opacity});break;case "line":h.extendFlat(c,{"line-width":l.line.width,"line-color":l.color,"line-opacity":l.opacity,"line-dasharray":l.line.dash});break;case "fill":h.extendFlat(c,
{"fill-color":l.color,"fill-outline-color":l.fill.outlinecolor,"fill-opacity":l.opacity});break;case "symbol":var f=l.symbol,g=d(f.textposition,f.iconsize);h.extendFlat(k,{"icon-image":f.icon+"-15","icon-size":f.iconsize/10,"text-field":f.text,"text-size":f.textfont.size,"text-anchor":g.anchor,"text-offset":g.offset,"symbol-placement":f.placement});h.extendFlat(c,{"icon-color":l.color,"text-color":f.textfont.color,"text-opacity":l.opacity});break;case "raster":h.extendFlat(c,{"raster-fade-duration":0,
"raster-opacity":l.opacity})}return{layout:k,paint:c}}var h=b("../../lib"),a=b("../../lib/svg_text_utils").sanitizeHTML,d=b("./convert_text_opts"),e=b("./constants");b=n.prototype;b.update=function(l){this.visible?this.needsNewImage(l)?this.updateImage(l):this.needsNewSource(l)?(this.removeLayer(),this.updateSource(l),this.updateLayer(l)):this.needsNewLayer(l)?this.updateLayer(l):this.updateStyle(l):(this.updateSource(l),this.updateLayer(l));this.visible=m(l)};b.needsNewImage=function(l){return this.subplot.map.getSource(this.idSource)&&
"image"===this.sourceType&&"image"===l.sourcetype&&(this.source!==l.source||JSON.stringify(this.coordinates)!==JSON.stringify(l.coordinates))};b.needsNewSource=function(l){return this.sourceType!==l.sourcetype||this.source!==l.source||this.layerType!==l.type};b.needsNewLayer=function(l){return this.layerType!==l.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};b.updateImage=function(l){this.subplot.map.getSource(this.idSource).updateImage({url:l.source,coordinates:l.coordinates})};
b.updateSource=function(l){var k=this.subplot.map;k.getSource(this.idSource)&&k.removeSource(this.idSource);this.sourceType=l.sourcetype;this.source=l.source;if(m(l)){var c=l.sourcetype,f=l.source,g={type:c};if("geojson"===c)var q="data";else"vector"===c?q="string"===typeof f?"url":"tiles":"raster"===c?(q="tiles",g.tileSize=256):"image"===c&&(q="url",g.coordinates=l.coordinates);g[q]=f;l.sourceattribution&&(g.attribution=a(l.sourceattribution));k.addSource(this.idSource,g)}};b.updateLayer=function(l){var k=
this.subplot,c=p(l),f=this.subplot.belowLookup["layout-"+this.index];if("traces"===f)for(var g=k.getMapLayers(),q=0;q<g.length;q++){var t=g[q].id;if("string"===typeof t&&0===t.indexOf(e.traceLayerPrefix)){var u=t;break}}else u=f;this.removeLayer();m(l)&&k.addLayer({id:this.idLayer,source:this.idSource,"source-layer":l.sourcelayer||"",type:l.type,minzoom:l.minzoom,maxzoom:l.maxzoom,layout:c.layout,paint:c.paint},u);this.layerType=l.type;this.below=f};b.updateStyle=function(l){m(l)&&(l=p(l),this.subplot.setOptions(this.idLayer,
"setLayoutProperty",l.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",l.paint))};b.removeLayer=function(){var l=this.subplot.map;l.getLayer(this.idLayer)&&l.removeLayer(this.idLayer)};b.dispose=function(){var l=this.subplot.map;l.getLayer(this.idLayer)&&l.removeLayer(this.idLayer);l.getSource(this.idSource)&&l.removeSource(this.idSource)};y.exports=function(l,k,c){l=new n(l,k);l.update(c);return l}},{"../../lib":749,"../../lib/svg_text_utils":773,"./constants":852,"./convert_text_opts":853}],
856:[function(b,y,D){D=b("../../lib");var n=b("../../components/color").defaultLine,m=b("../domain").attributes,p=b("../font_attributes"),h=b("../../traces/scatter/attributes").textposition,a=b("../../plot_api/edit_types").overrideAll,d=b("../../plot_api/plot_template").templatedArray;b=b("./constants");p=p({});p.family.dflt="Open Sans Regular, Arial Unicode MS Regular";(y.exports=a({_arrayAttrRegexps:[D.counterRegex("mapbox",".layers",!0)],domain:m({name:"mapbox"}),accesstoken:{valType:"string",
noBlank:!0,strict:!0},style:{valType:"any",values:b.styleValuesMapbox.concat(b.styleValuesNonMapbox),dflt:b.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:d("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},
type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:n},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:n}},symbol:{icon:{valType:"string",
dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:p,textposition:D.extendFlat({},h,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":615,"../../lib":749,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../traces/scatter/attributes":1155,"../domain":824,"../font_attributes":825,"./constants":852}],
857:[function(b,y,D){function n(e,l,k,c){k("accesstoken",c.accessToken);k("style");k("center.lon");k("center.lat");k("zoom");k("bearing");k("pitch");a(e,l,{name:"layers",handleItemDefaults:m});l._input=e}function m(e,l){function k(q,t){return p.coerce(e,l,d.layers,q,t)}if(k("visible")){var c=k("sourcetype"),f="raster"===c||"image"===c;k("source");k("sourceattribution");"vector"===c&&k("sourcelayer");"image"===c&&k("coordinates");var g;f&&(g="raster");c=k("type",g);f&&"raster"!==c&&(c=l.type="raster",
p.log("Source types *raster* and *image* must drawn *raster* layer type."));k("below");k("color");k("opacity");k("minzoom");k("maxzoom");"circle"===c&&k("circle.radius");"line"===c&&(k("line.width"),k("line.dash"));"fill"===c&&k("fill.outlinecolor");"symbol"===c&&(k("symbol.icon"),k("symbol.iconsize"),k("symbol.text"),p.coerceFont(k,"symbol.textfont"),k("symbol.textposition"),k("symbol.placement"))}}var p=b("../../lib"),h=b("../subplot_defaults"),a=b("../array_container_defaults"),d=b("./layout_attributes");
y.exports=function(e,l,k){h(e,l,k,{type:"mapbox",attributes:d,handleDefaults:n,partition:"y",accessToken:l._mapboxAccessToken})}},{"../../lib":749,"../array_container_defaults":793,"../subplot_defaults":874,"./layout_attributes":856}],858:[function(b,y,D){function n(B,C){this.id=C;this.gd=B;C=B._fullLayout;B=B._context;this.container=C._glcontainer.node();this.isStatic=B.staticPlot;this.uid=C._uid+"-"+this.id;this.yaxis=this.xaxis=this.div=null;this.createFramework(C);this.styleObj=this.accessToken=
this.map=null;this.traceHash={};this.layerList=[];this.belowLookup={};this.wheeling=this.dragging=!1}function m(B){var C={};a.isPlainObject(B)?(C.id=B.id,C.style=B):"string"===typeof B?(C.id=B,-1!==E.styleValuesMapbox.indexOf(B)?C.style=E.styleUrlPrefix+B+"-"+E.styleUrlSuffix:C.style=E.stylesNonMapbox[B]?E.stylesNonMapbox[B]:B):(C.id=E.styleValueDflt,C.style=E.styleUrlPrefix+E.styleValueDflt+"-"+E.styleUrlSuffix);C.transition={duration:0,delay:0};return C}function p(B){return[B.lon,B.lat]}var h=b("mapbox-gl"),
a=b("../../lib"),d=b("../../lib/geo_location_utils"),e=b("../../registry"),l=b("../cartesian/axes"),k=b("../../components/dragelement"),c=b("../../components/fx");D=b("../../components/dragelement/helpers");var f=D.rectMode,g=D.drawMode,q=D.selectMode,t=b("../cartesian/select").prepSelect,u=b("../cartesian/select").clearSelect,w=b("../cartesian/select").clearSelectionsCache,x=b("../cartesian/select").selectOnClick,E=b("./constants"),F=b("./layers");b=n.prototype;b.plot=function(B,C,v){var G=this,
I=C[G.id];G.map&&I.accesstoken!==G.accessToken&&(G.map.remove(),G.map=null,G.styleObj=null,G.traceHash={},G.layerList=[]);I=G.map?new Promise(function(J,K){G.updateMap(B,C,J,K)}):new Promise(function(J,K){G.createMap(B,C,J,K)});v.push(I)};b.createMap=function(B,C,v,G){var I=this,J=C[I.id],K=I.styleObj=m(J.style);I.accessToken=J.accesstoken;var N=I.map=(new h.Map({container:I.div,style:K.style,center:p(J.center),zoom:J.zoom,bearing:J.bearing,pitch:J.pitch,interactive:!I.isStatic,preserveDrawingBuffer:I.isStatic,
doubleClickZoom:!1,boxZoom:!1,attributionControl:!1})).addControl(new h.AttributionControl({compact:!0}));N._canvas.style.left="0px";N._canvas.style.top="0px";I.rejectOnError(G);I.isStatic||I.initFx(B,C);J=[];J.push(new Promise(function(H){N.once("load",H)}));J=J.concat(d.fetchTraceGeoData(B));Promise.all(J).then(function(){I.fillBelowLookup(B,C);I.updateData(B);I.updateLayout(C);I.resolveOnRender(v)}).catch(G)};b.updateMap=function(B,C,v,G){var I=this,J=I.map,K=C[this.id];I.rejectOnError(G);var N=
[];K=m(K.style);JSON.stringify(I.styleObj)!==JSON.stringify(K)&&(I.styleObj=K,J.setStyle(K.style),I.traceHash={},N.push(new Promise(function(H){J.once("styledata",H)})));N=N.concat(d.fetchTraceGeoData(B));Promise.all(N).then(function(){I.fillBelowLookup(B,C);I.updateData(B);I.updateLayout(C);I.resolveOnRender(v)}).catch(G)};b.fillBelowLookup=function(B,C){var v=C[this.id].layers,G,I=this.belowLookup={},J=!1;for(C=0;C<B.length;C++){var K=B[C][0].trace,N=K._module;"string"===typeof K.below?G=K.below:
N.getBelow&&(G=N.getBelow(K,this));""===G&&(J=!0);I["trace-"+K.uid]=G||""}for(C=0;C<v.length;C++)G=v[C],G="string"===typeof G.below?G.below:J?"traces":"",I["layout-"+C]=G;B={};for(var H in I)G=I[H],B[G]?B[G].push(H):B[G]=[H];for(G in B)if(I=B[G],1<I.length)for(C=0;C<I.length;C++)H=I[C],0===H.indexOf("trace-")?(H=H.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):0===H.indexOf("layout-")&&(H=H.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))};var z={choroplethmapbox:0,
densitymapbox:1,scattermapbox:2};b.updateData=function(B){var C=this.traceHash,v,G=B.slice().sort(function(H,L){return z[H[0].trace.type]-z[L[0].trace.type]});for(v=0;v<G.length;v++){var I=G[v];var J=I[0].trace;var K=C[J.uid];var N=!1;K&&(K.type===J.type?(K.update(I),N=!0):K.dispose());!N&&J._module&&(C[J.uid]=J._module.plot(this,I))}G=Object.keys(C);v=0;a:for(;v<G.length;v++){I=G[v];for(K=0;K<B.length;K++)if(J=B[K][0].trace,I===J.uid)continue a;K=C[I];K.dispose();delete C[I]}};b.updateLayout=function(B){var C=
this.map,v=B[this.id];this.dragging||this.wheeling||(C.setCenter(p(v.center)),C.setZoom(v.zoom),C.setBearing(v.bearing),C.setPitch(v.pitch));this.updateLayers(B);this.updateFramework(B);this.updateFx(B);this.map.resize();this.gd._context._scrollZoom.mapbox?C.scrollZoom.enable():C.scrollZoom.disable()};b.resolveOnRender=function(B){var C=this.map;C.on("render",function G(){C.loaded()&&(C.off("render",G),setTimeout(B,10))})};b.rejectOnError=function(B){function C(){B(Error(E.mapOnErrorMsg))}var v=this.map;
v.once("error",C);v.once("style.error",C);v.once("source.error",C);v.once("tile.error",C);v.once("layer.error",C)};b.createFramework=function(B){var C=this,v=C.div=document.createElement("div");v.id=C.uid;v.style.position="absolute";C.container.appendChild(v);C.xaxis={_id:"x",c2p:function(G){return C.project(G).x}};C.yaxis={_id:"y",c2p:function(G){return C.project(G).y}};C.updateFramework(B);C.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};l.setConvert(C.mockAxis,B)};b.initFx=function(B,
C){function v(){c.loneUnhover(C._hoverlayer)}function G(){var N=I.getView();J.emit("plotly_relayouting",I.getViewEditsWithDerived(N))}var I=this,J=I.gd,K=I.map;K.on("moveend",function(N){if(I.map){var H=J._fullLayout;if(N.originalEvent||I.wheeling){var L=H[I.id];e.call("_storeDirectGUIEdit",J.layout,H._preGUI,I.getViewEdits(L));var P=I.getView();L._input.center=L.center=P.center;L._input.zoom=L.zoom=P.zoom;L._input.bearing=L.bearing=P.bearing;L._input.pitch=L.pitch=P.pitch;J.emit("plotly_relayout",
I.getViewEditsWithDerived(P))}N.originalEvent&&"mouseup"===N.originalEvent.type?I.dragging=!1:I.wheeling&&(I.wheeling=!1);H._rehover&&H._rehover()}});K.on("wheel",function(){I.wheeling=!0});K.on("mousemove",function(N){var H=I.div.getBoundingClientRect();N.clientX=N.point.x+H.left;N.clientY=N.point.y+H.top;N.target.getBoundingClientRect=function(){return H};I.xaxis.p2c=function(){return N.lngLat.lng};I.yaxis.p2c=function(){return N.lngLat.lat};J._fullLayout._rehover=function(){J._fullLayout._hoversubplot===
I.id&&J._fullLayout[I.id]&&c.hover(J,N,I.id)};c.hover(J,N,I.id);J._fullLayout._hoversubplot=I.id});K.on("dragstart",function(){I.dragging=!0;v()});K.on("zoomstart",v);K.on("mouseout",function(){J._fullLayout._hoversubplot=null});K.on("drag",G);K.on("zoom",G);K.on("dblclick",function(){var N=J._fullLayout[I.id];e.call("_storeDirectGUIEdit",J.layout,J._fullLayout._preGUI,I.getViewEdits(N));var H=I.viewInitial;K.setCenter(p(H.center));K.setZoom(H.zoom);K.setBearing(H.bearing);K.setPitch(H.pitch);H=I.getView();
N._input.center=N.center=H.center;N._input.zoom=N.zoom=H.zoom;N._input.bearing=N.bearing=H.bearing;N._input.pitch=N.pitch=H.pitch;J.emit("plotly_doubleclick",null);J.emit("plotly_relayout",I.getViewEditsWithDerived(H))});I.clearSelect=function(){w(I.dragOptions);u(I.dragOptions.gd)};I.onClickInPanFn=function(N){return function(H){var L=J._fullLayout.clickmode;-1<L.indexOf("select")&&x(H.originalEvent,J,[I.xaxis],[I.yaxis],I.id,N);-1<L.indexOf("event")&&c.click(J,H.originalEvent)}}};b.updateFx=function(B){function C(N){N=
v.map.unproject(N);return[N.lng,N.lat]}var v=this,G=v.map,I=v.gd;if(!v.isStatic){var J=B.dragmode;var K=f(J)?function(N,H){(N.range={})[v.id]=[C([H.xmin,H.ymin]),C([H.xmax,H.ymax])]}:function(N,H,L){(N.lassoPoints={})[v.id]=L.filtered.map(C)};v.dragOptions=a.extendDeep(v.dragOptions||{},{dragmode:B.dragmode,element:v.div,gd:I,plotinfo:{id:v.id,domain:B[v.id].domain,xaxis:v.xaxis,yaxis:v.yaxis,fillRangeItems:K},xaxes:[v.xaxis],yaxes:[v.yaxis],subplot:v.id});G.off("click",v.onClickInPanHandler);q(J)||
g(J)?(G.dragPan.disable(),G.on("zoomstart",v.clearSelect),v.dragOptions.prepFn=function(N,H,L){t(N,H,L,v.dragOptions,J)},k.init(v.dragOptions)):(G.dragPan.enable(),G.off("zoomstart",v.clearSelect),v.div.onmousedown=null,v.onClickInPanHandler=v.onClickInPanFn(v.dragOptions),G.on("click",v.onClickInPanHandler))}};b.updateFramework=function(B){var C=B[this.id].domain;B=B._size;var v=this.div.style;v.width=B.w*(C.x[1]-C.x[0])+"px";v.height=B.h*(C.y[1]-C.y[0])+"px";v.left=B.l+C.x[0]*B.w+"px";v.top=B.t+
(1-C.y[1])*B.h+"px";this.xaxis._offset=B.l+C.x[0]*B.w;this.xaxis._length=B.w*(C.x[1]-C.x[0]);this.yaxis._offset=B.t+(1-C.y[1])*B.h;this.yaxis._length=B.h*(C.y[1]-C.y[0])};b.updateLayers=function(B){B=B[this.id].layers;var C=this.layerList,v;if(B.length!==C.length){for(v=0;v<C.length;v++)C[v].dispose();C=this.layerList=[];for(v=0;v<B.length;v++)C.push(F(this,v,B[v]))}else for(v=0;v<B.length;v++)C[v].update(B[v])};b.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};
b.toImage=function(){this.map.stop();return this.map.getCanvas().toDataURL()};b.setOptions=function(B,C,v){for(var G in v)this.map[C](B,G,v[G])};b.getMapLayers=function(){return this.map.getStyle().layers};b.addLayer=function(B,C){var v=this.map;if("string"===typeof C){if(""===C){v.addLayer(B,C);return}for(var G=this.getMapLayers(),I=0;I<G.length;I++)if(C===G[I].id){v.addLayer(B,C);return}a.warn(["Trying to add layer with *below* value",C,"referencing a layer that does not exist or that does not yet exist."].join(" "))}v.addLayer(B)};
b.project=function(B){return this.map.project(new h.LngLat(B[0],B[1]))};b.getView=function(){var B=this.map,C=B.getCenter();C={lon:C.lng,lat:C.lat};var v=B.getCanvas(),G=v.width;v=v.height;return{center:C,zoom:B.getZoom(),bearing:B.getBearing(),pitch:B.getPitch(),_derived:{coordinates:[B.unproject([0,0]).toArray(),B.unproject([G,0]).toArray(),B.unproject([G,v]).toArray(),B.unproject([0,v]).toArray()]}}};b.getViewEdits=function(B){for(var C=this.id,v=["center","zoom","bearing","pitch"],G={},I=0;I<
v.length;I++){var J=v[I];G[C+"."+J]=B[J]}return G};b.getViewEditsWithDerived=function(B){var C=this.id,v=this.getViewEdits(B);v[C+"._derived"]=B._derived;return v};y.exports=n},{"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/fx":655,"../../lib":749,"../../lib/geo_location_utils":742,"../../registry":880,"../cartesian/axes":797,"../cartesian/select":816,"./constants":852,"./layers":855,"mapbox-gl":447}],859:[function(b,y,D){y.exports=function(n){n=n.editType;
return{t:{valType:"number",dflt:0,editType:n},r:{valType:"number",dflt:0,editType:n},b:{valType:"number",dflt:0,editType:n},l:{valType:"number",dflt:0,editType:n},editType:n}}},{}],860:[function(b,y,D){function n(O,U){U.text("");U=U.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(O._context.linkText+" "+String.fromCharCode(187));if(O._context.sendData)U.on("click",function(){N.sendDataToCloud(O)});else{var X=window.location.pathname.split("/"),
da=window.location.search;U.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+X[2].split(".")[0]+"/"+X[1]+da})}}function m(O,U){function X(ua,ta){na[ta]=ua;sa[ua]=1}function da(ua,ta){if(ua&&"string"===typeof ua&&!sa[ua])return X(ua,ta),!0}var ea=U.length,ca=[],ia;for(ia=0;ia<O.length;ia++){var ha=O[ia]._fullInput;ha!==fa&&ca.push(ha);var fa=ha}O=ca.length;var na=Array(ea),sa={};for(ia=0;ia<ea;ia++)fa=U[ia].uid,"number"===typeof fa&&(fa=String(fa)),da(fa,ia)||ia<O&&da(ca[ia].uid,ia)||X(E.randstr(sa),
ia);return na}function p(O,U){function X(na){for(var sa=!0,ua=0;ua<U.length;ua++){var ta=U[ua];ca[ta]||(na[ta]?ca[ta]=na[ta]:sa=!1)}sa&&(ea=!0)}var da=O._context.locale;da||"en-US"===da;for(var ea=!1,ca={},ia=0;2>ia;ia++){for(var ha=O._context.locales,fa=0;2>fa;fa++){if(ha=(ha[da]||{}).format)if(X(ha),ea)break;ha=u.localeRegistry}fa=da.split("-")[0];if(ea||fa===da)break;da=fa}ea||X(u.localeRegistry.en.format);return ca}function h(O){O=O.transforms;if(Array.isArray(O)&&O.length)for(var U=0;U<O.length;U++){var X=
O[U];if((X=X._module||H[X.type])&&X.makesData)return!0}return!1}function a(O,U,X,da){for(var ea=O.transforms,ca=[O],ia=0;ia<ea.length;ia++){var ha=ea[ia],fa=H[ha.type];fa&&fa.transform&&(ca=fa.transform(ca,{transform:ha,fullTrace:O,fullData:U,layout:X,fullLayout:da,transformIndex:ia}))}return ca}function d(O){return"string"===typeof O&&"px"===O.substr(O.length-2)&&parseFloat(O)}function e(O){var U=O.margin;O._size||(U=O._size={l:Math.round(U.l),r:Math.round(U.r),t:Math.round(U.t),b:Math.round(U.b),
p:Math.round(U.pad)},U.w=Math.round(O.width)-U.l-U.r,U.h=Math.round(O.height)-U.t-U.b);O._pushmargin||(O._pushmargin={});O._pushmarginIds||(O._pushmarginIds={})}function l(O,U,X){function da(ha){if(ha)for(;ha.length;)ha.shift()}function ea(ha){if(O._transitionData)return da(O._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(X.redraw)return u.call("redraw",O)}).then(function(){O._transitioning=!1;O._transitioningWithDuration=!1;O.emit("plotly_transitioned",[])}).then(ha)}var ca=
!1,ia=E.syncOrAsync([N.previousPromises,function(){if(O._transitionData){O._transitioning=!1;var ha=O._transitionData._interruptCallbacks,fa=Promise.resolve();if(ha)for(;ha.length;)fa=fa.then(ha.shift());return fa}},X.prepareFn,N.rehover,function(){O.emit("plotly_transitioning",[]);return new Promise(function(ha){function fa(){na++;return function(){sa++;ca||sa!==na||ea(ha)}}O._transitioning=!0;0<U.duration&&(O._transitioningWithDuration=!0);O._transitionData._interruptCallbacks.push(function(){ca=
!0});X.redraw&&O._transitionData._interruptCallbacks.push(function(){return u.call("redraw",O)});O._transitionData._interruptCallbacks.push(function(){O.emit("plotly_transitioninterrupted",[])});var na=0,sa=0;X.runFn(fa);setTimeout(fa())})}],O);ia&&ia.then||(ia=Promise.resolve());return ia.then(function(){return O})}function k(O,U){function X(tb,nb,Ta){var fb=nb._id.charAt(0);if("histogram2dcontour"===tb){tb=nb._counterAxes[0];nb=B.getFromId(U,tb);var ab="x"===fb||"x"===tb&&"category"===nb.type,ra=
"y"===fb||"y"===tb&&"category"===nb.type;return function(Ea,Ia){return 0===Ea||0===Ia||ab&&Ea===Ta[Ia].length-1||ra&&Ia===Ta.length-1?-1:("y"===fb?Ia:Ea)-1}}return function(Ea,Ia){return"y"===fb?Ia:Ea}}var da=[],ea,ca,ia,ha,fa={min:function(tb){return E.aggNums(Math.min,null,tb)},max:function(tb){return E.aggNums(Math.max,null,tb)},sum:function(tb){return E.aggNums(function(nb,Ta){return nb+Ta},null,tb)},total:function(tb){return E.aggNums(function(nb,Ta){return nb+Ta},null,tb)},mean:function(tb){return E.mean(tb)},
median:function(tb){return E.median(tb)}};for(ea=0;ea<O.length;ea++){var na=O[ea];if("category"===na.type&&(ca=na.categoryorder.match(S))){var sa=ca[1],ua=ca[2],ta=[];for(ca=0;ca<na._categories.length;ca++)ta.push([na._categories[ca],[]]);for(ca=0;ca<na._traceIndices.length;ca++){var oa=na._traceIndices[ca];var va=U._fullData[oa],ma=na._id.charAt(0);if(!0===va.visible){var pa=va.type;u.traceIs(va,"histogram")&&(delete va._xautoBinFinished,delete va._yautoBinFinished);var za=U.calcdata[oa];for(oa=
0;oa<za.length;oa++){var qa=za[oa];if("splom"===pa){var Ca=va._axesDim[na._id];"y"===ma&&(ia=va._diag[Ca][0])&&(na=U._fullLayout[B.id2name(ia)]);var Ka=qa.trace.dimensions[Ca].values;for(ia=0;ia<Ka.length;ia++){var Oa=Ka[ia];var kb=na._categoriesMap[Oa];for(ha=0;ha<qa.trace.dimensions.length;ha++)ha!==Ca&&ta[kb][1].push(qa.trace.dimensions[ha].values[ia])}}else if("scattergl"===pa){for(ia=0;ia<qa.t.x.length;ia++){if("x"===ma){kb=Oa=qa.t.x[ia];var mb=qa.t.y[ia]}"y"===ma&&(kb=Oa=qa.t.y[ia],mb=qa.t.x[ia]);
ta[kb][1].push(mb)}qa.t&&qa.t._scene&&delete qa.t._scene.dirty}else if(qa.hasOwnProperty("z"))for(mb=qa.z,qa=X(va.type,na,mb),ia=0;ia<mb.length;ia++)for(ha=0;ha<mb[ia].length;ha++)kb=qa(ha,ia),kb+1&&ta[kb][1].push(mb[ia][ha]);else for("x"===ma?(Oa=qa.p+1?qa.p:qa.x,mb=qa.s||qa.v||qa.y):"y"===ma&&(Oa=qa.p+1?qa.p:qa.y,mb=qa.s||qa.v||qa.x),Array.isArray(mb)||(mb=[mb]),ia=0;ia<mb.length;ia++)ta[Oa][1].push(mb[ia])}}}na._categoriesValue=ta;va=[];for(ca=0;ca<ta.length;ca++)va.push([ta[ca][0],fa[sa](ta[ca][1])]);
va.sort(function(tb,nb){return tb[1]-nb[1]});na._categoriesAggregatedValue=va;na._initialCategories=va.map(function(tb){return tb[0]});"descending"===ua&&na._initialCategories.reverse();da=da.concat(na.sortByInitialCategories())}}return da}function c(O,U,X){var da={},ea;for(ea=0;ea<O.length;ea++){var ca=O[ea];var ia=ca._id;ca.clearCalc();"multicategory"===ca.type&&ca.setupMultiCategory(U);da[ca._id]=1}O=X._axisMatchGroups||[];for(ea=0;ea<O.length;ea++)for(ia in O[ea])da[ia]||(ca=X[B.id2name(ia)],
ca.clearCalc())}function f(O){var U=O._fullLayout,X=U._visibleModules,da={},ea,ca;for(ea=0;ea<X.length;ea++){var ia=X[ea],ha=ia.crossTraceCalc;ha&&(ia=ia.basePlotModule.name,da[ia]?E.pushUnique(da[ia],ha):da[ia]=[ha])}for(ca in da)if(ha=da[ca],ia=U._subplots[ca],Array.isArray(ia))for(X=0;X<ia.length;X++){var fa=ia[X],na="cartesian"===ca?U._plots[fa]:U[fa];for(ea=0;ea<ha.length;ea++)ha[ea](O,na,fa)}else for(ea=0;ea<ha.length;ea++)ha[ea](O)}var g=b("d3"),q=b("d3-time-format").timeFormatLocale,t=b("fast-isnumeric"),
u=b("../registry"),w=b("../plot_api/plot_schema"),x=b("../plot_api/plot_template"),E=b("../lib"),F=b("../components/color"),z=b("../constants/numerical").BADNUM,B=b("./cartesian/axis_ids"),C=b("./cartesian/handle_outline").clearSelect,v=b("./animation_attributes"),G=b("./frame_attributes"),I=b("../plots/get_data").getModuleCalcData,J=E.relinkPrivateKeys,K=E._,N=y.exports={};E.extendFlat(N,u);N.attributes=b("./attributes");N.attributes.type.values=N.allTypes;N.fontAttrs=b("./font_attributes");N.layoutAttributes=
b("./layout_attributes");N.fontWeight="normal";var H=N.transformsRegistry;b=b("./command");N.executeAPICommand=b.executeAPICommand;N.computeAPICommandBindings=b.computeAPICommandBindings;N.manageCommandObserver=b.manageCommandObserver;N.hasSimpleAPICommandBindings=b.hasSimpleAPICommandBindings;N.redrawText=function(O){O=E.getGraphDiv(O);var U=O._fullLayout||{};if(U._has&&U._has("polar")||!O.data||!O.data[0]||!O.data[0].r)return new Promise(function(X){setTimeout(function(){u.getComponentMethod("annotations",
"draw")(O);u.getComponentMethod("legend","draw")(O);u.getComponentMethod("colorbar","draw")(O);X(N.previousPromises(O))},300)})};N.resize=function(O){O=E.getGraphDiv(O);var U,X=new Promise(function(da,ea){O&&!E.isHidden(O)||ea(Error("Resize must be passed a displayed plot div element."));O._redrawTimer&&clearTimeout(O._redrawTimer);O._resolveResize&&(U=O._resolveResize);O._resolveResize=da;O._redrawTimer=setTimeout(function(){if(!O.layout||O.layout.width&&O.layout.height||E.isHidden(O))da(O);else{delete O.layout.width;
delete O.layout.height;var ca=O.changed;O.autoplay=!0;u.call("relayout",O,{autosize:!0}).then(function(){O.changed=ca;O._resolveResize===da&&(delete O._resolveResize,da(O))})}},100)});U&&U(X);return X};N.previousPromises=function(O){if((O._promises||[]).length)return Promise.all(O._promises).then(function(){O._promises=[]})};N.addLinks=function(O){if(O._context.showLink||O._context.showSources){var U=O._fullLayout,X=E.ensureSingle(U._paper,"text","js-plot-link-container",function(ca){ca.style({"font-family":'"Open Sans", Arial, sans-serif',
"font-size":"12px",fill:F.defaultLine,"pointer-events":"all"}).each(function(){var ia=g.select(this);ia.append("tspan").classed("js-link-to-tool",!0);ia.append("tspan").classed("js-link-spacer",!0);ia.append("tspan").classed("js-sourcelinks",!0)})}),da=X.node(),ea={y:U._paper.attr("height")-9};document.body.contains(da)&&da.getComputedTextLength()>=U.width-20?(ea["text-anchor"]="start",ea.x=5):(ea["text-anchor"]="end",ea.x=U._paper.attr("width")-7);X.attr(ea);U=X.select(".js-link-to-tool");da=X.select(".js-link-spacer");
X=X.select(".js-sourcelinks");O._context.showSources&&O._context.showSources(O);O._context.showLink&&n(O,U);da.text(U.text()&&X.text()?" - ":"")}};N.sendDataToCloud=function(O){var U=(window.PLOTLYENV||{}).BASE_URL||O._context.plotlyServerURL;if(U){O.emit("plotly_beforeexport");var X=g.select(O).append("div").attr("id","hiddenform").style("display","none");U=X.append("form").attr({action:U+"/external",method:"post",target:"_blank"});U.append("input").attr({type:"text",name:"data"}).node().value=N.graphJson(O,
!1,"keepdata");U.node().submit();X.remove();O.emit("plotly_afterexport");return!1}};var L="days shortDays months shortMonths periods dateTime date time decimal thousands grouping currency".split(" "),P=["year","month","dayMonth","dayMonthYear"];N.supplyDefaults=function(O,U){U=U&&U.skipUpdateCalc;var X=O._fullLayout||{};if(X._skipDefaults)delete X._skipDefaults;else{var da=O._fullLayout={},ea=O.layout||{},ca=O._fullData||[],ia=O._fullData=[],ha=O.data||[],fa=O.calcdata||[],na=O._context||{};O._transitionData||
N.createTransitionData(O);da._dfltTitle={plot:K(O,"Click to enter Plot title"),x:K(O,"Click to enter X axis title"),y:K(O,"Click to enter Y axis title"),colorbar:K(O,"Click to enter Colorscale title"),annotation:K(O,"new text")};da._traceWord=K(O,"trace");var sa=p(O,L);da._mapboxAccessToken=na.mapboxAccessToken;if(X._initialAutoSizeIsDone){var ua=X.width,ta=X.height;N.supplyLayoutGlobalDefaults(ea,da,sa);ea.width||(da.width=ua);ea.height||(da.height=ta);N.sanitizeMargins(da)}else N.supplyLayoutGlobalDefaults(ea,
da,sa),ua=!ea.width||!ea.height,ta=da.autosize,na=na.autosizable,ua&&(ta||na)?N.plotAutoSize(O,ea,da):ua&&N.sanitizeMargins(da),!ta&&ua&&(ea.width=da.width,ea.height=da.height);ua=da.separators;sa.decimal=ua.charAt(0);sa.thousands=ua.charAt(1);sa={numberFormat:g.locale(sa).numberFormat,timeFormat:q(sa).utcFormat};da._d3locale=sa;da._extraFormat=p(O,P);da._initialAutoSizeIsDone=!0;da._dataLength=ha.length;da._modules=[];da._visibleModules=[];da._basePlotModules=[];sa=u.collectableSubplotTypes;ua={};
var oa;if(!sa)for(oa in sa=[],na=u.subplotsRegistry,na){var va=na[oa].attr;if(va&&(sa.push(oa),Array.isArray(va)))for(ta=0;ta<va.length;ta++)E.pushUnique(sa,va[ta])}for(oa=0;oa<sa.length;oa++)ua[sa[oa]]=[];ua=da._subplots=ua;sa=da._splomAxes={x:{},y:{}};ta=da._splomSubplots={};da._splomGridDflt={};da._scatterStackOpts={};da._firstScatter={};da._alignmentOpts={};da._colorAxes={};da._requestRangeslider={};da._traceUids=m(ca,ha);da._globalTransforms=(O._context||{}).globalTransforms;N.supplyDataDefaults(ha,
ia,ea,da);oa=Object.keys(sa.x);sa=Object.keys(sa.y);if(1<oa.length&&1<sa.length){u.getComponentMethod("grid","sizeDefaults")(ea,da);for(ha=0;ha<oa.length;ha++)E.pushUnique(ua.xaxis,oa[ha]);for(ha=0;ha<sa.length;ha++)E.pushUnique(ua.yaxis,sa[ha]);for(var ma in ta)E.pushUnique(ua.cartesian,ma)}da._has=N._hasPlotType.bind(da);if(ca.length===ia.length)for(ha=0;ha<ia.length;ha++)J(ia[ha],ca[ha]);N.supplyLayoutModuleDefaults(ea,da,ia,O._transitionData);ma=da._visibleModules;ea=[];for(ha=0;ha<ma.length;ha++)(ua=
ma[ha].crossTraceDefaults)&&E.pushUnique(ea,ua);for(ha=0;ha<ea.length;ha++)ea[ha](ia,da);da._hasOnlyLargeSploms=1===da._basePlotModules.length&&"splom"===da._basePlotModules[0].name&&15<oa.length&&15<sa.length&&0===da.shapes.length&&0===da.images.length;da._hasCartesian=da._has("cartesian");da._hasGeo=da._has("geo");da._hasGL3D=da._has("gl3d");da._hasGL2D=da._has("gl2d");da._hasTernary=da._has("ternary");da._hasPie=da._has("pie");N.linkSubplots(ia,da,ca,X);N.cleanPlot(ia,da,ca,X);ea=!(!X._has||!X._has("gl2d"));
ca=!(!da._has||!da._has("gl2d"));ha=!(!X._has||!X._has("cartesian"));ma=!(!da._has||!da._has("cartesian"));ea=ha||ea;ca=ma||ca;ea&&!ca?X._bgLayer.remove():ca&&!ea&&(da._shouldCreateBgLayer=!0);X._zoomlayer&&!O._dragging&&C({_fullLayout:X});O=[];if(da.meta)var pa=da._meta={meta:da.meta,layout:{meta:da.meta}};for(ca=0;ca<ia.length;ca++)ma=ia[ca],ma.meta?O[ma.index]=ma._meta={meta:ma.meta}:da.meta&&(ma._meta={meta:da.meta}),da.meta&&(ma._meta.layout={meta:da.meta});O.length&&(pa||(pa=da._meta={}),pa.data=
O);J(da,X);u.getComponentMethod("colorscale","crossTraceDefaults")(ia,da);da._preGUI||(da._preGUI={});da._tracePreGUI||(da._tracePreGUI={});pa=da._tracePreGUI;X={};for(var za in pa)X[za]="old";for(ha=0;ha<ia.length;ha++)za=ia[ha]._fullInput.uid,X[za]||(pa[za]={}),X[za]="new";for(za in X)"old"===X[za]&&delete pa[za];e(da);u.getComponentMethod("rangeslider","makeData")(da);U||fa.length!==ia.length||N.supplyDefaultsUpdateCalc(fa,ia)}};N.supplyDefaultsUpdateCalc=function(O,U){for(var X=0;X<U.length;X++){var da=
U[X],ea=(O[X]||[])[0];if(ea&&ea.trace){var ca=ea.trace;if(ca._hasCalcTransform){var ia=ca._arrayAttrs,ha;for(ha=0;ha<ia.length;ha++){var fa=ia[ha];var na=E.nestedProperty(ca,fa).get().slice();E.nestedProperty(da,fa).set(na)}}ea.trace=da}}};N.createTransitionData=function(O){O._transitionData||(O._transitionData={});O._transitionData._frames||(O._transitionData._frames=[]);O._transitionData._frameHash||(O._transitionData._frameHash={});O._transitionData._counter||(O._transitionData._counter=0);O._transitionData._interruptCallbacks||
(O._transitionData._interruptCallbacks=[])};N._hasPlotType=function(O){var U,X=this._basePlotModules||[];for(U=0;U<X.length;U++)if(X[U].name===O)return!0;X=this._modules||[];for(U=0;U<X.length;U++){var da=X[U].name;if(da===O||(da=u.modules[da])&&da.categories[O])return!0}return!1};N.cleanPlot=function(O,U,X,da){var ea,ca=da._basePlotModules||[];for(ea=0;ea<ca.length;ea++){var ia=ca[ea];ia.clean&&ia.clean(O,U,X,da)}ea=da._has&&da._has("gl");U=U._has&&U._has("gl");ea&&!U&&void 0!==da._glcontainer&&
(da._glcontainer.selectAll(".gl-canvas").remove(),da._glcontainer.selectAll(".no-webgl").remove(),da._glcanvas=null);ca=!!da._infolayer;ea=0;a:for(;ea<X.length;ea++){ia=X[ea].uid;for(U=0;U<O.length;U++)if(ia===O[U].uid)continue a;ca&&da._infolayer.select(".cb"+ia).remove()}};N.linkSubplots=function(O,U,X,da){var ea=da._plots||{},ca=U._plots={};da=U._subplots;X={_fullData:O,_fullLayout:U};var ia=da.cartesian.concat(da.gl2d||[]);for(da=0;da<ia.length;da++){var ha=ia[da];var fa=ea[ha],na=B.getFromId(X,
ha,"x"),sa=B.getFromId(X,ha,"y");fa?fa=ca[ha]=fa:(fa=ca[ha]={},fa.id=ha);na._counterAxes.push(sa._id);sa._counterAxes.push(na._id);na._subplotsWith.push(ha);sa._subplotsWith.push(ha);fa.xaxis=na;fa.yaxis=sa;fa._hasClipOnAxisFalse=!1;for(ha=0;ha<O.length;ha++)if(na=O[ha],na.xaxis===fa.xaxis._id&&na.yaxis===fa.yaxis._id&&!1===na.cliponaxis){fa._hasClipOnAxisFalse=!0;break}}O=B.list(X,null,!0);for(da=0;da<O.length;da++)ea=O[da],ha=null,ea.overlaying&&(ha=B.getFromId(X,ea.overlaying))&&ha.overlaying&&
(ea.overlaying=!1,ha=null),ea._mainAxis=ha||ea,ha&&(ea.domain=ha.domain.slice()),ea._anchorAxis="free"===ea.anchor?null:B.getFromId(X,ea.anchor);for(da=0;da<O.length;da++){ea=O[da];ea._counterAxes.sort(B.idSort);ea._subplotsWith.sort(E.subplotSort);ca=ha=ea;var ua=U;ia={_fullLayout:ua};fa="x"===ca._id.charAt(0);var ta=ca._mainAxis._anchorAxis,oa=sa=na="";ta&&(oa=ta._mainAxis._id,na=fa?ca._id+oa:oa+ca._id);if(!na||!ua._plots[na])for(na="",ua=ca._counterAxes,ta=0;ta<ua.length;ta++){var va=ua[ta],ma=
fa?ca._id+va:va+ca._id;sa||(sa=ma);va=B.getFromId(ia,va);if(oa&&va.overlaying===oa){na=ma;break}}ha._mainSubplot=na||sa;if(ea._counterAxes.length&&(ea.spikemode&&-1!==ea.spikemode.indexOf("across")||ea.automargin&&ea.mirror&&"free"!==ea.anchor||u.getComponentMethod("rangeslider","isVisible")(ea))){ca=1;for(ha=ia=0;ha<ea._counterAxes.length;ha++)fa=B.getFromId(X,ea._counterAxes[ha]),ca=Math.min(ca,fa.domain[0]),ia=Math.max(ia,fa.domain[1]);ca<ia&&(ea._counterDomainMin=ca,ea._counterDomainMax=ia)}}};
N.clearExpandedTraceDefaultColors=function(O){function U(ca,ia,ha,fa){da[fa]=ia;da.length=fa+1;"color"===ca.valType&&void 0===ca.dflt&&ea.push(da.join("."))}var X;var da=[];var ea=O._module._colorAttrs;ea||(O._module._colorAttrs=ea=[],w.crawl(O._module.attributes,U));for(X=0;X<ea.length;X++)E.nestedProperty(O,"_input."+ea[X]).get()||E.nestedProperty(O,ea[X]).set(null)};N.supplyDataDefaults=function(O,U,X,da){function ea(Oa){U.push(Oa);var kb=Oa._module;kb&&(E.pushUnique(ca,kb),!0===Oa.visible&&E.pushUnique(ia,
kb),E.pushUnique(ha,Oa._module.basePlotModule),fa++,!1!==Oa._input.visible&&na++)}var ca=da._modules,ia=da._visibleModules,ha=da._basePlotModules,fa=0,na=0,sa;da._transformModules=[];var ua={},ta=[],oa=x.traceTemplater((X.template||{}).data||{});for(sa=0;sa<O.length;sa++){var va=O[sa];var ma=oa.newTrace(va);ma.uid=da._traceUids[sa];N.supplyTraceDefaults(va,ma,na,da,sa);ma.index=sa;ma._input=va;ma._expandedIndex=fa;if(ma.transforms&&ma.transforms.length)for(var pa=!1!==va.visible&&!1===ma.visible,
za=a(ma,U,X,da),qa=0;qa<za.length;qa++){var Ca=za[qa],Ka={_template:ma._template,type:ma.type,uid:ma.uid+qa};pa&&!1===Ca.visible&&delete Ca.visible;N.supplyTraceDefaults(Ca,Ka,fa,da,sa);J(Ka,Ca);Ka.index=sa;Ka._input=va;Ka._fullInput=ma;Ka._expandedIndex=fa;Ka._expandedInput=Ca;ea(Ka)}else ma._fullInput=ma,ma._expandedInput=ma,ea(ma);u.traceIs(ma,"carpetAxis")&&(ua[ma.carpet]=ma);u.traceIs(ma,"carpetDependent")&&ta.push(sa)}for(sa=0;sa<ta.length;sa++)ma=U[ta[sa]],ma.visible&&(O=ua[ma.carpet],(ma._carpet=
O)&&O.visible?(ma.xaxis=O.xaxis,ma.yaxis=O.yaxis):ma.visible=!1)};N.supplyAnimationDefaults=function(O){O=O||{};var U,X={};E.coerce(O||{},X,v,"mode",void 0);E.coerce(O||{},X,v,"direction",void 0);E.coerce(O||{},X,v,"fromcurrent",void 0);if(Array.isArray(O.frame))for(X.frame=[],U=0;U<O.frame.length;U++)X.frame[U]=N.supplyAnimationFrameDefaults(O.frame[U]||{});else X.frame=N.supplyAnimationFrameDefaults(O.frame||{});if(Array.isArray(O.transition))for(X.transition=[],U=0;U<O.transition.length;U++)X.transition[U]=
N.supplyAnimationTransitionDefaults(O.transition[U]||{});else X.transition=N.supplyAnimationTransitionDefaults(O.transition||{});return X};N.supplyAnimationFrameDefaults=function(O){var U={};E.coerce(O||{},U,v.frame,"duration",void 0);E.coerce(O||{},U,v.frame,"redraw",void 0);return U};N.supplyAnimationTransitionDefaults=function(O){var U={};E.coerce(O||{},U,v.transition,"duration",void 0);E.coerce(O||{},U,v.transition,"easing",void 0);return U};N.supplyFrameDefaults=function(O){function U(da,ea){return E.coerce(O,
X,G,da,ea)}var X={};U("group");U("name");U("traces");U("baseframe");U("data");U("layout");return X};N.supplyTraceDefaults=function(O,U,X,da,ea){function ca(ma,pa){return E.coerce(O,U,N.attributes,ma,pa)}var ia=da.colorway||F.defaults;X=ia[X%ia.length];ia=ca("visible");ca("type");ca("name",da._traceWord+" "+ea);ca("uirevision",da.uirevision);var ha=N.getModule(U);if(U._module=ha){var fa=ha.basePlotModule,na=fa.attr,sa=fa.attributes;if(na&&sa){var ua=da._subplots,ta="";if(ia||"gl2d"!==fa.name){if(Array.isArray(na))for(ea=
0;ea<na.length;ea++){var oa=na[ea],va=E.coerce(O,U,sa,oa);ua[oa]&&E.pushUnique(ua[oa],va);ta+=va}else ta=E.coerce(O,U,sa,na);ua[fa.name]&&E.pushUnique(ua[fa.name],ta)}}}ia&&(ca("customdata"),ca("ids"),ca("meta"),u.traceIs(U,"showLegend")?(E.coerce(O,U,ha.attributes.showlegend?ha.attributes:N.attributes,"showlegend"),ca("legendgroup"),U._dfltShowLegend=!0):U._dfltShowLegend=!1,ha&&ha.supplyDefaults(O,U,X,da),u.traceIs(U,"noOpacity")||ca("opacity"),u.traceIs(U,"notLegendIsolatable")&&(U.visible=!!U.visible),
u.traceIs(U,"noHover")||(U.hovertemplate||E.coerceHoverinfo(O,U,da),"parcats"!==U.type&&u.getComponentMethod("fx","supplyDefaults")(O,U,X,da)),ha&&ha.selectPoints&&ca("selectedpoints"),N.supplyTransformDefaults(O,U,da));return U};N.hasMakesDataTransform=h;N.supplyTransformDefaults=function(O,U,X){if(U._length||h(O)){var da=X._globalTransforms||[],ea=X._transformModules||[];if(Array.isArray(O.transforms)||0!==da.length){da=da.concat(O.transforms||[]);for(var ca=U.transforms=[],ia=0;ia<da.length;ia++){var ha=
da[ia],fa=ha.type,na=H[fa],sa=!(ha._module&&ha._module===na),ua=na&&"function"===typeof na.transform;na||E.warn("Unrecognized transform type "+fa+".");na&&na.supplyDefaults&&(sa||ua)?(ha=na.supplyDefaults(ha,U,X,O),ha.type=fa,ha._module=na,E.pushUnique(ea,na)):ha=E.extendFlat({},ha);ca.push(ha)}}}};N.supplyLayoutGlobalDefaults=function(O,U,X){function da(ca,ia){return E.coerce(O,U,N.layoutAttributes,ca,ia)}var ea=O.template;E.isPlainObject(ea)&&(U.template=ea,U._template=ea.layout,U._dataTemplate=
ea.data);ea=E.coerceFont(da,"font");da("title.text",U._dfltTitle.plot);E.coerceFont(da,"title.font",{family:ea.family,size:Math.round(1.4*ea.size),color:ea.color});da("title.xref");da("title.yref");da("title.x");da("title.y");da("title.xanchor");da("title.yanchor");da("title.pad.t");da("title.pad.r");da("title.pad.b");da("title.pad.l");da("uniformtext.mode")&&da("uniformtext.minsize");da("autosize",!(O.width&&O.height));da("width");da("height");da("margin.l");da("margin.r");da("margin.t");da("margin.b");
da("margin.pad");da("margin.autoexpand");O.width&&O.height&&N.sanitizeMargins(U);u.getComponentMethod("grid","sizeDefaults")(O,U);da("paper_bgcolor");da("separators",X.decimal+X.thousands);da("hidesources");da("colorway");da("datarevision");X=da("uirevision");da("editrevision",X);da("selectionrevision",X);da("modebar.orientation");da("modebar.bgcolor",F.addOpacity(U.paper_bgcolor,.5));ea=F.contrast(F.rgb(U.modebar.bgcolor));da("modebar.color",F.addOpacity(ea,.3));da("modebar.activecolor",F.addOpacity(ea,
.7));da("modebar.uirevision",X);u.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(O,U,da);da("meta");E.isPlainObject(O.transition)&&(da("transition.duration"),da("transition.easing"),da("transition.ordering"));u.getComponentMethod("calendars","handleDefaults")(O,U,"calendar");u.getComponentMethod("fx","supplyLayoutGlobalDefaults")(O,U,da)};N.plotAutoSize=function(O,U,X){var da=O._context||{},ea=da.frameMargins,ca;(ca=E.isPlotDiv(O))&&O.emit("plotly_autosize");da.fillFrame?(da=window.innerWidth,
ca=window.innerHeight,document.body.style.overflow="hidden"):(ca=ca?window.getComputedStyle(O):{},da=d(ca.width)||d(ca.maxWidth)||X.width,ca=d(ca.height)||d(ca.maxHeight)||X.height,t(ea)&&0<ea&&(ea=1-2*ea,da=Math.round(ea*da),ca=Math.round(ea*ca)));ea=N.layoutAttributes.width.min;var ia=N.layoutAttributes.height.min;da<ea&&(da=ea);ca<ia&&(ca=ia);ea=!U.width&&1<Math.abs(X.width-da);if((U=!U.height&&1<Math.abs(X.height-ca))||ea)ea&&(X.width=da),U&&(X.height=ca);O._initialAutoSize||(O._initialAutoSize=
{width:da,height:ca});N.sanitizeMargins(X)};N.supplyLayoutModuleDefaults=function(O,U,X,da){var ea=u.componentsRegistry,ca=U._basePlotModules,ia;var ha=u.subplotsRegistry.cartesian;for(ia in ea){var fa=ea[ia];fa.includeBasePlot&&fa.includeBasePlot(O,U)}ca.length||ca.push(ha);U._has("cartesian")&&(u.getComponentMethod("grid","contentDefaults")(O,U),ha.finalizeSubplots(O,U));for(var na in U._subplots)U._subplots[na].sort(E.subplotSort);for(ha=0;ha<ca.length;ha++)fa=ca[ha],fa.supplyLayoutDefaults&&fa.supplyLayoutDefaults(O,
U,X);ca=U._modules;for(ha=0;ha<ca.length;ha++)fa=ca[ha],fa.supplyLayoutDefaults&&fa.supplyLayoutDefaults(O,U,X);ca=U._transformModules;for(ha=0;ha<ca.length;ha++)fa=ca[ha],fa.supplyLayoutDefaults&&fa.supplyLayoutDefaults(O,U,X,da);for(ia in ea)fa=ea[ia],fa.supplyLayoutDefaults&&fa.supplyLayoutDefaults(O,U,X)};N.purge=function(O){var U=O._fullLayout||{};void 0!==U._glcontainer&&(U._glcontainer.selectAll(".gl-canvas").remove(),U._glcontainer.remove(),U._glcanvas=null);U._modeBar&&U._modeBar.destroy();
O._transitionData&&(O._transitionData._interruptCallbacks&&(O._transitionData._interruptCallbacks.length=0),O._transitionData._animationRaf&&window.cancelAnimationFrame(O._transitionData._animationRaf));E.clearThrottle();E.clearResponsive(O);delete O.data;delete O.layout;delete O._fullData;delete O._fullLayout;delete O.calcdata;delete O.framework;delete O.empty;delete O.fid;delete O.undoqueue;delete O.undonum;delete O.autoplay;delete O.changed;delete O._promises;delete O._redrawTimer;delete O._hmlumcount;
delete O._hmpixcount;delete O._transitionData;delete O._transitioning;delete O._initialAutoSize;delete O._transitioningWithDuration;delete O._dragging;delete O._dragged;delete O._dragdata;delete O._hoverdata;delete O._snapshotInProgress;delete O._editing;delete O._mouseDownTime;delete O._legendMouseDownTime;O.removeAllListeners&&O.removeAllListeners()};N.style=function(O){var U=O._fullLayout._visibleModules,X=[],da;for(da=0;da<U.length;da++){var ea=U[da];ea.style&&E.pushUnique(X,ea.style)}for(da=
0;da<X.length;da++)X[da](O)};N.sanitizeMargins=function(O){if(O&&O.margin){var U=O.width,X=O.height;O=O.margin;var da=X-(O.t+O.b);0>U-(O.l+O.r)&&(U=(U-1)/(O.l+O.r),O.l=Math.floor(U*O.l),O.r=Math.floor(U*O.r));0>da&&(U=(X-1)/(O.t+O.b),O.t=Math.floor(U*O.t),O.b=Math.floor(U*O.b))}};N.clearAutoMarginIds=function(O){O._fullLayout._pushmarginIds={}};N.allowAutoMargin=function(O,U){O._fullLayout._pushmarginIds[U]=1};N.autoMargin=function(O,U,X){var da=O._fullLayout,ea=da._pushmargin,ca=da._pushmarginIds;
if(!1!==da.margin.autoexpand){if(X){var ia=X.pad;void 0===ia&&(ia=da.margin,ia=Math.min(12,ia.l,ia.r,ia.t,ia.b));X.l+X.r>.5*da.width&&(E.log("Margin push",U,"is too big in x, dropping"),X.l=X.r=0);X.b+X.t>.5*da.height&&(E.log("Margin push",U,"is too big in y, dropping"),X.b=X.t=0);ea[U]={l:{val:void 0!==X.xl?X.xl:X.x,size:X.l+ia},r:{val:void 0!==X.xr?X.xr:X.x,size:X.r+ia},b:{val:void 0!==X.yb?X.yb:X.y,size:X.b+ia},t:{val:void 0!==X.yt?X.yt:X.y,size:X.t+ia}};ca[U]=1}else delete ea[U],delete ca[U];
if(!da._replotting)return N.doAutoMargin(O)}};N.doAutoMargin=function(O){var U=O._fullLayout;U._size||(U._size={});e(U);var X=U._size,da=U.margin,ea=E.extendFlat({},X),ca=da.l,ia=da.r,ha=da.t,fa=da.b,na=U.width,sa=U.height,ua=U._pushmargin,ta=U._pushmarginIds;if(!1!==U.margin.autoexpand){for(var oa in ua)ta[oa]||delete ua[oa];ua.base={l:{val:0,size:ca},r:{val:1,size:ia},t:{val:1,size:ha},b:{val:0,size:fa}};for(var va in ua){var ma=ua[va].l||{},pa=ua[va].b||{};oa=ma.val;ma=ma.size;var za=pa.val;pa=
pa.size;for(var qa in ua){if(t(ma)&&ua[qa].r){var Ca=ua[qa].r.val,Ka=ua[qa].r.size;if(Ca>oa){var Oa=(ma*Ca+(Ka-na)*oa)/(Ca-oa);Ca=(Ka*(1-oa)+(ma-na)*(1-Ca))/(Ca-oa);0<=Oa&&0<=Ca&&0<na-(Oa+Ca)&&Oa+Ca>ca+ia&&(ca=Oa,ia=Ca)}}t(pa)&&ua[qa].t&&(Ca=ua[qa].t.val,Ka=ua[qa].t.size,Ca>za&&(Oa=(pa*Ca+(Ka-sa)*za)/(Ca-za),Ca=(Ka*(1-za)+(pa-sa)*(1-Ca))/(Ca-za),0<=Oa&&0<=Ca&&0<sa-(Ca+Oa)&&Oa+Ca>fa+ha&&(fa=Oa,ha=Ca)))}}}X.l=Math.round(ca);X.r=Math.round(ia);X.t=Math.round(ha);X.b=Math.round(fa);X.p=Math.round(da.pad);
X.w=Math.round(na)-X.l-X.r;X.h=Math.round(sa)-X.t-X.b;if(!U._replotting&&N.didMarginChange(ea,X)){"_redrawFromAutoMarginCount"in U?U._redrawFromAutoMarginCount++:U._redrawFromAutoMarginCount=1;X=3*(1+Object.keys(ta).length);if(U._redrawFromAutoMarginCount<X)return u.call("plot",O);E.warn("Too many auto-margin redraws.")}};var Q="lrtbpwh".split("");N.didMarginChange=function(O,U){for(var X=0;X<Q.length;X++){var da=Q[X],ea=O[da];da=U[da];if(!t(ea)||1<Math.abs(da-ea))return!0}return!1};N.graphJson=function(O,
U,X,da,ea,ca){function ia(na,sa){if("function"===typeof na)return sa?"_function_":null;if(E.isPlainObject(na)){var ua={},ta;Object.keys(na).sort().forEach(function(oa){if(-1===["_","["].indexOf(oa.charAt(0)))if("function"===typeof na[oa])sa&&(ua[oa]="_function");else{if("keepdata"===X){if("src"===oa.substr(oa.length-3))return}else if("keepstream"===X){if(ta=na[oa+"src"],"string"===typeof ta&&0<ta.indexOf(":")&&!E.isPlainObject(na.stream))return}else if("keepall"!==X&&(ta=na[oa+"src"],"string"===typeof ta&&
0<ta.indexOf(":")))return;ua[oa]=ia(na[oa],sa)}});return ua}return Array.isArray(na)?na.map(function(oa){return ia(oa,sa)}):E.isTypedArray(na)?E.simpleMap(na,E.identity):E.isJSDate(na)?E.ms2DateTimeLocal(+na):na}(ea&&U&&!O._fullData||ea&&!U&&!O._fullLayout)&&N.supplyDefaults(O);var ha=ea?O._fullLayout:O.layout,fa=(O._transitionData||{})._frames;ea={data:((ea?O._fullData:O.data)||[]).map(function(na){na=ia(na);U&&delete na.fit;return na})};U||(ea.layout=ia(ha));O.framework&&O.framework.isPolar&&(ea=
O.framework.getConfig());fa&&(ea.frames=ia(fa));ca&&(ea.config=ia(O._context,!0));return"object"===da?ea:JSON.stringify(ea)};N.modifyFrames=function(O,U){var X=O._transitionData._frames,da=O._transitionData._frameHash;for(O=0;O<U.length;O++){var ea=U[O];switch(ea.type){case "replace":var ca=ea.value;var ia=(X[ea.index]||{}).name,ha=ca.name;X[ea.index]=da[ha]=ca;ha!==ia&&(delete da[ia],da[ha]=ca);break;case "insert":ca=ea.value;da[ca.name]=ca;X.splice(ea.index,0,ca);break;case "delete":ca=X[ea.index],
delete da[ca.name],X.splice(ea.index,1)}}return Promise.resolve()};N.computeFrame=function(O,U){var X=O._transitionData._frameHash,da;if(!U)throw Error("computeFrame must be given a string frame name");U=X[U.toString()];if(!U)return!1;O=[U];for(da=[U.name];U.baseframe&&(U=X[U.baseframe.toString()])&&-1===da.indexOf(U.name);)O.push(U),da.push(U.name);for(var ea={};U=O.pop();)if(U.layout&&(ea.layout=N.extendLayout(ea.layout,U.layout)),U.data){ea.data||(ea.data=[]);da=U.traces;if(!da)for(da=[],X=0;X<
U.data.length;X++)da[X]=X;ea.traces||(ea.traces=[]);for(X=0;X<U.data.length;X++){var ca=da[X];if(void 0!==ca&&null!==ca){var ia=ea.traces.indexOf(ca);-1===ia&&(ia=ea.data.length,ea.traces[ia]=ca);ea.data[ia]=N.extendTrace(ea.data[ia],U.data[X])}}}return ea};N.recomputeFrameHash=function(O){var U=O._transitionData._frameHash={};O=O._transitionData._frames;for(var X=0;X<O.length;X++){var da=O[X];da&&da.name&&(U[da.name]=da)}};N.extendObjectWithContainers=function(O,U,X){U=E.extendDeepNoArrays({},U||
{});var da=E.expandObjectPaths(U);var ea={};if(X&&X.length)for(U=0;U<X.length;U++){var ca=E.nestedProperty(da,X[U]);var ia=ca.get();void 0===ia?E.nestedProperty(ea,X[U]).set(null):(ca.set(null),E.nestedProperty(ea,X[U]).set(ia))}O=E.extendDeepNoArrays(O||{},da);if(X&&X.length)for(U=0;U<X.length;U++)if(ca=E.nestedProperty(ea,X[U]),da=ca.get()){ia=E.nestedProperty(O,X[U]);var ha=ia.get();Array.isArray(ha)||(ha=[],ia.set(ha));for(ca=0;ca<da.length;ca++){var fa=da[ca];ha[ca]=null===fa?null:N.extendObjectWithContainers(ha[ca],
fa)}ia.set(ha)}return O};N.dataArrayContainers=["transforms","dimensions"];N.layoutArrayContainers=u.layoutArrayContainers;N.extendTrace=function(O,U){return N.extendObjectWithContainers(O,U,N.dataArrayContainers)};N.extendLayout=function(O,U){return N.extendObjectWithContainers(O,U,N.layoutArrayContainers)};N.transition=function(O,U,X,da,ea,ca){ea={redraw:ea.redraw};var ia={},ha=[];ea.prepareFn=function(){var fa=Array.isArray(U)?U.length:0;fa=da.slice(0,fa);for(var na=0;na<fa.length;na++){var sa=
fa[na],ua=O._fullData[sa]._module;ua&&(ua.animatable&&(ua=ua.basePlotModule.name,ia[ua]||(ia[ua]=[]),ia[ua].push(sa)),O.data[fa[na]]=N.extendTrace(O.data[fa[na]],U[na]))}fa=E.expandObjectPaths(E.extendDeepNoArrays({},X));na=/^[xy]axis[0-9]*$/;for(var ta in fa)na.test(ta)&&delete fa[ta].range;N.extendLayout(O.layout,fa);delete O.calcdata;N.supplyDefaults(O);N.doCalcdata(O);if(ta=E.expandObjectPaths(X)){fa=O._fullLayout._plots;for(var oa in fa){na=fa[oa];sa=na.xaxis;ua=na.yaxis;var va=sa.range.slice(),
ma=ua.range.slice(),pa=null,za=null,qa=null,Ca=null;Array.isArray(ta[sa._name+".range"])?pa=ta[sa._name+".range"].slice():Array.isArray((ta[sa._name]||{}).range)&&(pa=ta[sa._name].range.slice());Array.isArray(ta[ua._name+".range"])?za=ta[ua._name+".range"].slice():Array.isArray((ta[ua._name]||{}).range)&&(za=ta[ua._name].range.slice());va&&pa&&(sa.r2l(va[0])!==sa.r2l(pa[0])||sa.r2l(va[1])!==sa.r2l(pa[1]))&&(qa={xr0:va,xr1:pa});ma&&za&&(ua.r2l(ma[0])!==ua.r2l(za[0])||ua.r2l(ma[1])!==ua.r2l(za[1]))&&
(Ca={yr0:ma,yr1:za});(qa||Ca)&&ha.push(E.extendFlat({plotinfo:na},qa,Ca))}}return Promise.resolve()};ea.runFn=function(fa){var na=O._fullLayout._basePlotModules;var sa=ha.length,ua;if(X)for(ua=0;ua<na.length;ua++)na[ua].transitionAxes&&na[ua].transitionAxes(O,ha,ca,fa);sa?(na=E.extendFlat({},ca),na.duration=0,delete ia.cartesian):na=ca;for(var ta in ia)sa=ia[ta],O._fullData[sa[0]]._module.basePlotModule.plot(O,sa,na,fa)};return l(O,ca,ea)};N.transitionFromReact=function(O,U,X,da){var ea=O._fullLayout,
ca=ea.transition,ia={},ha=[];ia.prepareFn=function(){var fa=ea._plots;ia.redraw=!1;"some"===U.anim&&(ia.redraw=!0);"some"===X.anim&&(ia.redraw=!0);for(var na in fa){var sa=fa[na],ua=sa.xaxis,ta=sa.yaxis,oa=da[ua._name].range.slice(),va=da[ta._name].range.slice(),ma=ua.range.slice(),pa=ta.range.slice();ua.setScale();ta.setScale();var za=null,qa=null;if(ua.r2l(oa[0])!==ua.r2l(ma[0])||ua.r2l(oa[1])!==ua.r2l(ma[1]))za={xr0:oa,xr1:ma};if(ta.r2l(va[0])!==ta.r2l(pa[0])||ta.r2l(va[1])!==ta.r2l(pa[1]))qa=
{yr0:va,yr1:pa};(za||qa)&&ha.push(E.extendFlat({plotinfo:sa},za,qa))}return Promise.resolve()};ia.runFn=function(fa){function na(){for(var qa=0;qa<ta.length;qa++)ta[qa].transitionAxes&&ta[qa].transitionAxes(O,ha,oa,fa)}function sa(){for(var qa=0;qa<ta.length;qa++)ta[qa].plot(O,ma,va,fa)}for(var ua=O._fullData,ta=O._fullLayout._basePlotModules,oa,va,ma,pa=[],za=0;za<ua.length;za++)pa.push(za);ha.length&&U.anim?"traces first"===ca.ordering?(oa=E.extendFlat({},ca,{duration:0}),ma=pa,va=ca,setTimeout(na,
ca.duration),sa()):(oa=ca,ma=null,va=E.extendFlat({},ca,{duration:0}),setTimeout(sa,oa.duration),na()):ha.length?(oa=ca,na()):U.anim&&(ma=pa,va=ca,sa())};return l(O,ca,ia)};N.doCalcdata=function(O,U){function X(ma){ta=ca[ma];ha=ta._module;if(!0===ta.visible&&ta.transforms)for(ha&&ha.calc&&(ma=ha.calc(O,ta),ma[0]&&ma[0].t&&ma[0].t._scene&&delete ma[0].t._scene.dirty),na=0;na<ta.transforms.length;na++)ma=ta.transforms[na],(ha=H[ma.type])&&ha.calcTransform&&(va=ta._hasCalcTransform=!0,ha.calcTransform(O,
ta,ma))}function da(ma,pa){ta=ca[ma];ha=ta._module;if(!!ha.isContainer===pa){pa=[];if(!0===ta.visible&&0!==ta._length){delete ta._indexToPoints;var za=ta.transforms||[];for(na=za.length-1;0<=na;na--)if(za[na].enabled){ta._indexToPoints=za[na]._indexToPoints;break}ha&&ha.calc&&(pa=ha.calc(O,ta))}Array.isArray(pa)&&pa[0]||(pa=[{x:z,y:z}]);pa[0].t||(pa[0].t={});pa[0].trace=ta;sa[ma]=pa}}var ea=B.list(O),ca=O._fullData,ia=O._fullLayout,ha,fa,na,sa=Array(ca.length),ua=(O.calcdata||[]).slice();O.calcdata=
sa;ia._numBoxes=0;ia._numViolins=0;ia._violinScaleGroupStats={};O._hmpixcount=0;O._hmlumcount=0;ia._piecolormap={};ia._sunburstcolormap={};ia._treemapcolormap={};ia._funnelareacolormap={};for(fa=0;fa<ca.length;fa++)Array.isArray(U)&&-1===U.indexOf(fa)&&(sa[fa]=ua[fa]);for(fa=0;fa<ca.length;fa++){var ta=ca[fa];ta._arrayAttrs=w.findArrayAttributes(ta);ta._extremes={}}U=ia._subplots.polar||[];for(fa=0;fa<U.length;fa++)ea.push(ia[U[fa]].radialaxis,ia[U[fa]].angularaxis);for(var oa in ia._colorAxes)fa=
ia[oa],!1!==fa.cauto&&(delete fa.cmin,delete fa.cmax);var va=!1;c(ea,ca,ia);for(fa=0;fa<ca.length;fa++)da(fa,!0);for(fa=0;fa<ca.length;fa++)X(fa);va&&c(ea,ca,ia);for(fa=0;fa<ca.length;fa++)da(fa,!0);for(fa=0;fa<ca.length;fa++)da(fa,!1);f(O);ea=k(ea,O);if(ea.length){ia._numBoxes=0;for(fa=ia._numViolins=0;fa<ea.length;fa++)da(ea[fa],!0);for(fa=0;fa<ea.length;fa++)da(ea[fa],!1);f(O)}u.getComponentMethod("fx","calc")(O);u.getComponentMethod("errorbars","calc")(O)};var S=/(total|sum|min|max|mean|median) (ascending|descending)/;
N.rehover=function(O){O._fullLayout._rehover&&O._fullLayout._rehover()};N.redrag=function(O){O._fullLayout._redrag&&O._fullLayout._redrag()};N.generalUpdatePerTraceModule=function(O,U,X,da){var ea=U.traceHash,ca={},ia;for(ia=0;ia<X.length;ia++){var ha=X[ia],fa=ha[0].trace;fa.visible&&(ca[fa.type]=ca[fa.type]||[],ca[fa.type].push(ha))}for(var na in ea)ca[na]||(X=ea[na][0],X[0].trace.visible=!1,ca[na]=[X]);for(var sa in ca)ea=ca[sa],ea[0][0].trace._module.plot(O,U,E.filterVisible(ea),da);U.traceHash=
ca};N.plotBasePlot=function(O,U,X,da,ea){O=u.getModule(O);X=I(U.calcdata,O)[0];O.plot(U,X,da,ea)};N.cleanBasePlot=function(O,U,X,da,ea){U=ea._has&&ea._has(O);X=X._has&&X._has(O);U&&!X&&ea["_"+O+"layer"].selectAll("g.trace").remove()}},{"../components/color":615,"../constants/numerical":724,"../lib":749,"../plot_api/plot_schema":786,"../plot_api/plot_template":787,"../plots/get_data":834,"../registry":880,"./animation_attributes":792,"./attributes":794,"./cartesian/axis_ids":800,"./cartesian/handle_outline":807,
"./command":823,"./font_attributes":825,"./frame_attributes":826,"./layout_attributes":851,d3:169,"d3-time-format":166,"fast-isnumeric":241}],861:[function(b,y,D){y.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:"draglayer plotbg backplot angular-grid radial-grid frontplot angular-line radial-line angular-axis radial-axis".split(" "),radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,
MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],862:[function(b,y,D){function n(g,q,t,u){var w=u[0];u=u[1];var x=h(Math.sin(q)-Math.sin(g));g=h(Math.cos(q)-Math.cos(g));t=Math.tan(t);var E=h(1/t),F=x/g;q=u-F*w;E?x&&g?(x=q/(t-F),w=t*x):g?(x=u*E,w=u):(x=w,w*=t):x&&g?(x=0,w=q):g?(x=0,w=u):x=w=NaN;return[x,w]}function m(g,q,t,u){function w(C,v,G){return n(C,v,G,[g*Math.cos(C),g*Math.sin(C)])}var x=u.length,E=[];var F=l(u,function(C){return k(C,[q,t])?f(C,q):Infinity});var z=w(u[F],u[d.mod(F-1,x)],q);E.push(z);
for(z=0;z<x;F++,z++){var B=u[d.mod(F,x)];if(!k(B,[q,t]))break;E.push([g*Math.cos(B),g*Math.sin(B)])}F=l(u,function(C){return k(C,[q,t])?f(C,t):Infinity});u=w(u[F],u[d.mod(F+1,x)],t);E.push(u);E.push([0,0]);E.push(E[0].slice());return E}function p(g,q,t,u){if(d.isFullCircle([q,t])){q=u.length;t=Array(q+1);var w;for(w=0;w<q;w++){var x=u[w];t[w]=[g*Math.cos(x),g*Math.sin(x)]}t[w]=t[0].slice();g=t}else g=m(g,q,t,u);return g}function h(g){return 1E-10<Math.abs(g)?g:0}function a(g,q,t){q=q||0;t=t||0;for(var u=
g.length,w=Array(u),x=0;x<u;x++){var E=g[x];w[x]=[q+E[0],t-E[1]]}return w}var d=b("../../lib"),e=b("../../lib/polygon").tester,l=d.findIndexOfMin,k=d.isAngleInsideSector,c=d.angleDelta,f=d.angleDist;y.exports={isPtInsidePolygon:function(g,q,t,u,w){if(!k(q,u))return!1;if(t[0]<t[1]){var x=t[0];t=t[1]}else x=t[1],t=t[0];x=e(p(x,u[0],u[1],w));u=e(p(t,u[0],u[1],w));g=[g*Math.cos(q),g*Math.sin(q)];return u.contains(g)&&!x.contains(g)},findPolygonOffset:function(g,q,t,u){var w=Infinity,x=Infinity;g=p(g,
q,t,u);for(q=0;q<g.length;q++)t=g[q],w=Math.min(w,t[0]),x=Math.min(x,-t[1]);return[w,x]},findEnclosingVertexAngles:function(g,q){var t=l(q,function(w){w=c(w,g);return 0<w?w:Infinity}),u=d.mod(t+1,q.length);return[q[t],q[u]]},findIntersectionXY:n,findXYatLength:function(g,q,t,u){var w=-q*t,x=q*q+1,E=2*(q*w-t);t=Math.sqrt(E*E-4*x*(w*w+t*t-g*g));g=(-E+t)/(2*x);x=(-E-t)/(2*x);return[[g,q*g+w+u],[x,q*x+w+u]]},clampTiny:h,pathPolygon:function(g,q,t,u,w,x){g=p(g,q,t,u);return"M"+a(g,w,x).join("L")},pathPolygonAnnulus:function(g,
q,t,u,w,x,E){if(g<q){var F=g;g=q}else F=q;F=a(p(F,t,u,w),x,E);return"M"+a(p(g,t,u,w),x,E).reverse().join("L")+"M"+F.join("L")}}},{"../../lib":749,"../../lib/polygon":761}],863:[function(b,y,D){var n=b("../get_data").getSubplotCalcData,m=b("../../lib").counterRegex,p=b("./polar"),h=b("./constants");D=h.attr;var a=h.name;m=m(a);h={};h[D]={valType:"subplotid",dflt:a,editType:"calc"};y.exports={attr:D,name:a,idRoot:a,idRegex:m,attrRegex:m,attributes:h,layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),
plot:function(d){for(var e=d._fullLayout,l=d.calcdata,k=e._subplots[a],c=0;c<k.length;c++){var f=k[c],g=n(l,a,f),q=e[f]._subplot;q||(q=p(d,f),e[f]._subplot=q);q.plot(g,e,d._promises)}},clean:function(d,e,l,k){d=k._subplots[a]||[];l=k._has&&k._has("gl");var c=e._has&&e._has("gl");l=l&&!c;for(c=0;c<d.length;c++){var f=d[c],g=k[f]._subplot;if(!e[f]&&g){g.framework.remove();g.layers["radial-axis-title"].remove();for(var q in g.clipPaths)g.clipPaths[q].remove()}l&&g._scene&&(g._scene.destroy(),g._scene=
null)}},toSVG:b("../cartesian").toSVG}},{"../../lib":749,"../cartesian":810,"../get_data":834,"./constants":861,"./layout_attributes":864,"./layout_defaults":865,"./polar":872}],864:[function(b,y,D){D=b("../../components/color/attributes");var n=b("../cartesian/layout_attributes"),m=b("../domain").attributes,p=b("../../lib").extendFlat,h=b("../../plot_api/edit_types").overrideAll;b=h({color:n.color,showline:p({},n.showline,{dflt:!0}),linecolor:n.linecolor,linewidth:n.linewidth,showgrid:p({},n.showgrid,
{dflt:!0}),gridcolor:n.gridcolor,gridwidth:n.gridwidth},"plot","from-root");h=h({tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,showexponent:n.showexponent,exponentformat:n.exponentformat,separatethousands:n.separatethousands,
tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,layer:n.layer},"plot","from-root");var a={visible:p({},n.visible,{dflt:!0}),type:p({},n.type,{values:["-","linear","log","date","category"]}),autorange:p({},n.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:p({},n.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",
impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:n.categoryorder,categoryarray:n.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:p({},n.title.text,{editType:"plot",dflt:""}),font:p({},n.title.font,{editType:"plot"}),editType:"plot"},hoverformat:n.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}};
p(a,b,h);n={visible:p({},n.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},categoryorder:n.categoryorder,categoryarray:n.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},
hoverformat:n.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};p(n,b,h);y.exports={domain:m({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:D.background},radialaxis:a,angularaxis:n,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",
editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":614,"../../lib":749,"../../plot_api/edit_types":780,"../cartesian/layout_attributes":811,"../domain":824}],865:[function(b,y,D){function n(E,F,z,B){function C(U,X){return z(J+"."+U,X)}var v=z("bgcolor");B.bgColor=h.combine(v,B.paper_bgcolor);v=z("sector");z("hole");for(var G=e(B.fullData,w.name,B.id),I=B.layoutOut,J,K=0;K<x.length;K++){J=x[K];p.isPlainObject(E[J])||(E[J]={});var N=E[J],
H=a.newContainer(F,J);H._id=H._name=J;H._attr=B.id+"."+J;H._traceIndices=G.map(function(U){return U._expandedIndex});var L=w.axisName2dataArray[J],P=m(N,H,C,G,L);f(N,H,C,{axData:G,dataAttr:L});L=C("visible");u(H,F,I);C("uirevision",F.uirevision);if(L){var Q=C("color");var S=Q===N.color?Q:B.font.color}H._m=1;switch(J){case "radialaxis":var O=C("autorange",!H.isValidRange(N.range));N.autorange=O;!O||"linear"!==P&&"-"!==P||C("rangemode");"reversed"===O&&(H._m=-1);C("range");H.cleanRange("range",{dfltRange:[0,
1]});L&&(C("side"),C("angle",v[0]),C("title.text"),p.coerceFont(C,"title.font",{family:B.font.family,size:Math.round(1.2*B.font.size),color:S}));break;case "angularaxis":if("date"===P){p.log("Polar plots do not support date angular axes yet.");for(P=0;P<G.length;P++)G[P].visible=!1;P=N.type=H.type="linear"}"linear"===P?C("thetaunit"):C("period");O=C("direction");C("rotation",{counterclockwise:0,clockwise:90}[O])}L&&(l(N,H,C,H.type),c(N,H,C,H.type,{tickSuffixDflt:"degrees"===H.thetaunit?"":void 0}),
k(N,H,C,{outerTicks:!0}),C("showticklabels")&&(p.coerceFont(C,"tickfont",{family:B.font.family,size:B.font.size,color:S}),C("tickangle"),C("tickformat")),g(N,H,C,{dfltColor:Q,bgColor:B.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:t[J]}),C("layer"));"category"!==P&&C("hoverformat");H._input=N}"category"===F.angularaxis.type&&z("gridshape")}function m(E,F,z,B,C){if("-"===z("type")){for(z=0;z<B.length;z++)if(B[z].visible){var v=B[z];break}v&&v[C]&&(F.type=q(v[C],"gregorian"));"-"===
F.type?F.type="linear":E.type=F.type}return F.type}var p=b("../../lib"),h=b("../../components/color"),a=b("../../plot_api/plot_template"),d=b("../subplot_defaults"),e=b("../get_data").getSubplotData,l=b("../cartesian/tick_value_defaults"),k=b("../cartesian/tick_mark_defaults"),c=b("../cartesian/tick_label_defaults"),f=b("../cartesian/category_order_defaults"),g=b("../cartesian/line_grid_defaults"),q=b("../cartesian/axis_autotype"),t=b("./layout_attributes"),u=b("./set_convert"),w=b("./constants"),
x=w.axisNames;y.exports=function(E,F,z){d(E,F,z,{type:w.name,attributes:t,handleDefaults:n,font:F.font,paper_bgcolor:F.paper_bgcolor,fullData:z,layoutOut:F})}},{"../../components/color":615,"../../lib":749,"../../plot_api/plot_template":787,"../cartesian/axis_autotype":798,"../cartesian/category_order_defaults":801,"../cartesian/line_grid_defaults":813,"../cartesian/tick_label_defaults":818,"../cartesian/tick_mark_defaults":819,"../cartesian/tick_value_defaults":820,"../get_data":834,"../subplot_defaults":874,
"./constants":861,"./layout_attributes":864,"./set_convert":873}],866:[function(b,y,D){D=b("../../../traces/scatter/attributes");var n=D.marker;b=b("../../../lib/extend").extendFlat;y.exports={r:b({},D.r,{}),t:b({},D.t,{}),marker:{color:b({},n.color,{}),size:b({},n.size,{}),symbol:b({},n.symbol,{}),opacity:b({},n.opacity,{}),editType:"calc"}}},{"../../../lib/extend":739,"../../../traces/scatter/attributes":1155}],867:[function(b,y,D){function n(p,h){return m({},h,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},
tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:"Legacy polar charts are deprecated! Please switch to *polar* subplots."},visible:{valType:"boolean"}})}D=b("../../cartesian/layout_attributes");var m=b("../../../lib/extend").extendFlat;b=b("../../../plot_api/edit_types").overrideAll;D=m({},D.domain,{});y.exports=b({radialaxis:n("radial",{range:{valType:"info_array",
items:[{valType:"number"},{valType:"number"}]},domain:D,orientation:{valType:"number"}}),angularaxis:n("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:D}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":739,"../../../plot_api/edit_types":780,"../../cartesian/layout_attributes":811}],868:[function(b,y,D){(y.exports=b("./micropolar")).manager=
b("./micropolar_manager")},{"./micropolar":869,"./micropolar_manager":870}],869:[function(b,y,D){var n=b("d3"),m=b("../../../lib").extendDeepAll,p=b("../../../constants/alignment").MID_SHIFT,h=y.exports={version:"0.2.2"};h.Axis=function(){function a(u){c=u||c;u=d.data;var w=d.layout;if("string"==typeof c||c.nodeName)c=n.select(c);c.datum(u).each(function(x,E){x=x.slice();l={data:h.util.cloneJson(x),layout:h.util.cloneJson(w)};var F=0;x.forEach(function(ta,oa){ta.color||(ta.color=w.defaultColorRange[F],
F=(F+1)%w.defaultColorRange.length);ta.strokeColor||(ta.strokeColor="LinePlot"===ta.geometry?ta.color:n.rgb(ta.color).darker().toString());l.data[oa].color=ta.color;l.data[oa].strokeColor=ta.strokeColor;l.data[oa].strokeDash=ta.strokeDash;l.data[oa].strokeSize=ta.strokeSize});x=x.filter(function(ta,oa){ta=ta.visible;return"undefined"===typeof ta||!0===ta});var z=!1;E=x.map(function(ta,oa){z=z||"undefined"!==typeof ta.groupId;return ta});if(z){var B=[];x=n.nest().key(function(ta,oa){return"undefined"!=
typeof ta.groupId?ta.groupId:"unstacked"}).entries(E).map(function(ta,oa){if("unstacked"!==ta.key){var va=ta.values[0].r.map(function(ma,pa){return 0});ta.values.forEach(function(ma,pa,za){ma.yStack=[va];B.push(va);va=h.util.sumArrays(ma.r,va)})}return ta.values});x=n.merge(x)}x.forEach(function(ta,oa){ta.t=Array.isArray(ta.t[0])?ta.t:[ta.t];ta.r=Array.isArray(ta.r[0])?ta.r:[ta.r]});var C=Math.min(w.width-w.margin.left-w.margin.right,w.height-w.margin.top-w.margin.bottom)/2;C=Math.max(10,C);var v=
[w.margin.left+C,w.margin.top+C];E=z?[0,n.max(h.util.sumArrays(h.util.arrayLast(x).r[0],h.util.arrayLast(B)))]:n.extent(h.util.flattenArray(x.map(function(ta,oa){return ta.r})));w.radialAxis.domain!=h.DATAEXTENT&&(E[0]=0);g=n.scale.linear().domain(w.radialAxis.domain!=h.DATAEXTENT&&w.radialAxis.domain?w.radialAxis.domain:E).range([0,C]);l.layout.radialAxis.domain=g.domain();var G=h.util.flattenArray(x.map(function(ta,oa){return ta.t})),I="string"===typeof G[0];if(I){G=h.util.deduplicate(G);var J=
G.slice();G=n.range(G.length);x=x.map(function(ta,oa){ta.t=[G];z&&(ta.yStack=ta.yStack);return ta})}var K=x.filter(function(ta,oa){return"LinePlot"===ta.geometry||"DotPlot"===ta.geometry}).length===x.length;E=null===w.needsEndSpacing?I||!K:w.needsEndSpacing;var N=w.angularAxis.domain&&w.angularAxis.domain!=h.DATAEXTENT&&!I&&0<=w.angularAxis.domain[0]?w.angularAxis.domain:n.extent(G),H=Math.abs(G[1]-G[0]);K&&!I&&(H=0);N=N.slice();E&&I&&(N[1]+=H);K=w.angularAxis.ticksCount||4;8<K&&(K=K/(K/8)+K%8);w.angularAxis.ticksStep&&
(K=(N[1]-N[0])/K);K=w.angularAxis.ticksStep||(N[1]-N[0])/(K*(w.minorTicks+1));J&&(K=Math.max(Math.round(K),1));N[2]||(N[2]=K);K=n.range.apply(this,N);K=K.map(function(ta,oa){return parseFloat(ta.toPrecision(12))});q=n.scale.linear().domain(N.slice(0,2)).range("clockwise"===w.direction?[0,360]:[360,0]);l.layout.angularAxis.domain=q.domain();l.layout.angularAxis.endPadding=E?H:0;k=n.select(this).select("svg.chart-root");if("undefined"===typeof k||k.empty())E=(new DOMParser).parseFromString("\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' class\x3d'chart-root'\x3e' + '\x3cg class\x3d'outer-group'\x3e' + '\x3cg class\x3d'chart-group'\x3e' + '\x3ccircle class\x3d'background-circle'\x3e\x3c/circle\x3e' + '\x3cg class\x3d'geometry-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'radial axis-group'\x3e' + '\x3ccircle class\x3d'outside-circle'\x3e\x3c/circle\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'angular axis-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'guides-group'\x3e\x3cline\x3e\x3c/line\x3e\x3ccircle r\x3d'0'\x3e\x3c/circle\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'legend-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'tooltips-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'title-group'\x3e\x3ctext\x3e\x3c/text\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3c/svg\x3e",
"application/xml"),E=this.appendChild(this.ownerDocument.importNode(E.documentElement,!0)),k=n.select(E);k.select(".guides-group").style({"pointer-events":"none"});k.select(".angular.axis-group").style({"pointer-events":"none"});k.select(".radial.axis-group").style({"pointer-events":"none"});E=k.select(".chart-group");N={fill:"none",stroke:w.tickColor};var L={"font-size":w.font.size,"font-family":w.font.family,fill:w.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(ta,
oa){return" "+ta+" 0 "+w.font.outlineColor}).join(",")};if(w.showLegend){H=k.select(".legend-group").attr({transform:"translate("+[C,w.margin.top]+")"}).style({display:"block"});var P=x.map(function(ta,oa){oa=h.util.cloneJson(ta);oa.symbol="DotPlot"===ta.geometry?ta.dotType||"circle":"LinePlot"!=ta.geometry?"square":"line";oa.visibleInLegend="undefined"===typeof ta.visibleInLegend||ta.visibleInLegend;oa.color="LinePlot"===ta.geometry?ta.strokeColor:ta.color;return oa});h.Legend().config({data:x.map(function(ta,
oa){return ta.name||"Element"+oa}),legendConfig:m({},h.Legend.defaultConfig().legendConfig,{container:H,elements:P,reverseOrder:w.legend.reverseOrder})})();P=H.node().getBBox();C=Math.min(w.width-P.width-w.margin.left-w.margin.right,w.height-w.margin.top-w.margin.bottom)/2;C=Math.max(10,C);v=[w.margin.left+C,w.margin.top+C];g.range([0,C]);l.layout.radialAxis.domain=g.domain();H.attr("transform","translate("+[v[0]+C,v[1]-C]+")")}else H=k.select(".legend-group").style({display:"none"});k.attr({width:w.width,
height:w.height}).style({opacity:w.opacity});E.attr("transform","translate("+v+")").style({cursor:"crosshair"});var Q=[(w.width-(w.margin.left+w.margin.right+2*C+(P?P.width:0)))/2,(w.height-(w.margin.top+w.margin.bottom+2*C))/2];Q[0]=Math.max(0,Q[0]);Q[1]=Math.max(0,Q[1]);k.select(".outer-group").attr("transform","translate("+Q+")");if(w.title&&w.title.text){P=k.select("g.title-group text").style(L).text(w.title.text);var S=P.node().getBBox();P.attr({x:v[0]-S.width/2,y:v[1]-C-20})}P=k.select(".radial.axis-group");
w.radialAxis.gridLinesVisible&&(S=P.selectAll("circle.grid-circle").data(g.ticks(5)),S.enter().append("circle").attr({"class":"grid-circle"}).style(N),S.attr("r",g),S.exit().remove());P.select("circle.outside-circle").attr({r:C}).style(N);var O=k.select("circle.background-circle").attr({r:C}).style({fill:w.backgroundColor,stroke:w.stroke});w.radialAxis.visible&&(S=n.svg.axis().scale(g).ticks(5).tickSize(5),P.call(S).attr({transform:"rotate("+w.radialAxis.orientation+")"}),P.selectAll(".domain").style(N),
P.selectAll("g\x3etext").text(function(ta,oa){return this.textContent+w.radialAxis.ticksSuffix}).style(L).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(ta,oa){return"horizontal"===w.radialAxis.tickOrientation?"rotate("+-w.radialAxis.orientation+") translate("+[0,L["font-size"]]+")":"translate("+[0,L["font-size"]]+")"}}),P.selectAll("g\x3eline").style({stroke:"black"}));P=k.select(".angular.axis-group").selectAll("g.angular-tick").data(K);K=P.enter().append("g").classed("angular-tick",
!0);P.attr({transform:function(ta,oa){return"rotate("+(q(ta)%360+w.orientation)+")"}}).style({display:w.angularAxis.visible?"block":"none"});P.exit().remove();K.append("line").classed("grid-line",!0).classed("major",function(ta,oa){return 0==oa%(w.minorTicks+1)}).classed("minor",function(ta,oa){return 0!=oa%(w.minorTicks+1)}).style(N);K.selectAll(".minor").style({stroke:w.minorTickColor});P.select("line.grid-line").attr({x1:w.tickLength?C-w.tickLength:0,x2:C}).style({display:w.angularAxis.gridLinesVisible?
"block":"none"});K.append("text").classed("axis-text",!0).style(L);P=P.select("text.axis-text").attr({x:C+w.labelOffset,dy:p+"em",transform:function(ta,oa){ta=q(ta)%360+w.orientation;oa=C+w.labelOffset;var va=w.angularAxis.tickOrientation;return"horizontal"==va?"rotate("+-ta+" "+oa+" 0)":"radial"==va?270>ta&&90<ta?"rotate(180 "+oa+" 0)":null:"rotate("+(180>=ta&&0<ta?-90:90)+" "+oa+" 0)"}}).style({"text-anchor":"middle",display:w.angularAxis.labelsVisible?"block":"none"}).text(function(ta,oa){return 0!=
oa%(w.minorTicks+1)?"":J?J[ta]+w.angularAxis.ticksSuffix:ta+w.angularAxis.ticksSuffix}).style(L);w.angularAxis.rewriteTicks&&P.text(function(ta,oa){return 0!=oa%(w.minorTicks+1)?"":w.angularAxis.rewriteTicks(this.textContent,oa)});P=n.max(E.selectAll(".angular-tick text")[0].map(function(ta,oa){return ta.getCTM().e+ta.getBBox().width}));H.attr({transform:"translate("+[C+P,w.margin.top]+")"});P=0<k.select("g.geometry-group").selectAll("g").size();var U=k.select("g.geometry-group").selectAll("g.geometry").data(x);
U.enter().append("g").attr({"class":function(ta,oa){return"geometry geometry"+oa}});U.exit().remove();if(x[0]||P){var X=[];x.forEach(function(ta,oa){var va={};va.radialScale=g;va.angularScale=q;va.container=U.filter(function(ma,pa){return pa==oa});va.geometry=ta.geometry;va.orientation=w.orientation;va.direction=w.direction;va.index=oa;X.push({data:ta,geometryConfig:va})});var da=[];n.nest().key(function(ta,oa){return"undefined"!=typeof ta.data.groupId||"unstacked"}).entries(X).forEach(function(ta,
oa){"unstacked"===ta.key?da=da.concat(ta.values.map(function(va,ma){return[va]})):da.push(ta.values)});da.forEach(function(ta,oa){var va=Array.isArray(ta)?ta[0].geometryConfig.geometry:ta.geometryConfig.geometry;ta=ta.map(function(ma,pa){return m(h[va].defaultConfig(),ma)});h[va]().config(ta)()})}var ea=k.select(".guides-group");x=k.select(".tooltips-group");var ca=h.tooltipPanel().config({container:x,fontSize:8})(),ia=h.tooltipPanel().config({container:x,fontSize:8})(),ha=h.tooltipPanel().config({container:x,
hasTick:!0})(),fa,na;if(!I){var sa=ea.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});E.on("mousemove.angular-guide",function(ta,oa){ta=h.util.getMousePos(O).angle;sa.attr({x2:-C,transform:"rotate("+ta+")"}).style({opacity:.5});fa=q.invert((ta+180+360-w.orientation)%360);ta=h.util.convertToCartesian(C+12,ta+180);ca.text(h.util.round(fa)).move([ta[0]+v[0],ta[1]+v[1]])}).on("mouseout.angular-guide",function(ta,oa){ea.select("line").style({opacity:0})})}var ua=ea.select("circle").style({stroke:"grey",
fill:"none"});E.on("mousemove.radial-guide",function(ta,oa){ta=h.util.getMousePos(O).radius;ua.attr({r:ta}).style({opacity:.5});na=g.invert(h.util.getMousePos(O).radius);ta=h.util.convertToCartesian(ta,w.radialAxis.orientation);ia.text(h.util.round(na)).move([ta[0]+v[0],ta[1]+v[1]])}).on("mouseout.radial-guide",function(ta,oa){ua.style({opacity:0});ha.hide();ca.hide();ia.hide()});k.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(ta,oa){var va=n.select(this);oa=this.style.fill;va.attr({"data-opacity":this.style.opacity||
1});if(oa&&"none"!==oa){va.attr({"data-fill":oa});oa=n.hsl(oa).darker().toString();va.style({fill:oa,opacity:1});va=h.util.round(ta[0]);var ma=h.util.round(ta[1]);I&&(va=J[ta[0]]);ta="t: "+va+", r: "+ma;va=this.getBoundingClientRect();ma=k.node().getBoundingClientRect();va=[va.left+va.width/2-Q[0]-ma.left,va.top+va.height/2-Q[1]-ma.top];ha.config({color:oa}).text(ta);ha.move(va)}else oa=this.style.stroke||"black",va.attr({"data-stroke":oa}),oa=n.hsl(oa).darker().toString(),va.style({stroke:oa,opacity:1})}).on("mousemove.tooltip",
function(ta,oa){if(0!=n.event.which)return!1;n.select(this).attr("data-fill")&&ha.show()}).on("mouseout.tooltip",function(ta,oa){ha.hide();ta=n.select(this);(oa=ta.attr("data-fill"))?ta.style({fill:oa,opacity:ta.attr("data-opacity")}):ta.style({stroke:ta.attr("data-stroke"),opacity:ta.attr("data-opacity")})})});return t}var d={data:[],layout:{}},e={},l={},k,c,f=n.dispatch("hover"),g,q,t={render:function(u){a(u);return this},config:function(u){if(!arguments.length)return d;var w=h.util.cloneJson(u);
w.data.forEach(function(x,E){d.data[E]||(d.data[E]={});m(d.data[E],h.Axis.defaultConfig().data[0]);m(d.data[E],x)});m(d.layout,h.Axis.defaultConfig().layout);m(d.layout,w.layout);return this},getLiveConfig:function(){return l},getinputConfig:function(){return e},radialScale:function(u){return g},angularScale:function(u){return q},svg:function(){return k}};n.rebind(t,f,"on");return t};h.Axis.defaultConfig=function(a,d){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,
strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:n.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],
ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}};h.util={};h.DATAEXTENT="dataExtent";h.AREA="AreaChart";h.LINE="LinePlot";h.DOT="DotPlot";h.BAR="BarChart";h.util._override=function(a,d){for(var e in a)e in d&&(d[e]=a[e])};h.util._extend=function(a,
d){for(var e in a)d[e]=a[e]};h.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)};h.util.dataFromEquation2=function(a,d){d=d||6;return n.range(0,360+d,d).map(function(e,l){l=a(e*Math.PI/180);return[e,l]})};h.util.dataFromEquation=function(a,d,e){d=d||6;var l=[],k=[];n.range(0,360+d,d).forEach(function(c,f){f=a(c*Math.PI/180);l.push(c);k.push(f)});d={t:l,r:k};e&&(d.name=e);return d};h.util.ensureArray=function(a,d){if("undefined"===typeof a)return null;var e=
[].concat(a);return n.range(d).map(function(l,k){return e[k]||e[0]})};h.util.fillArrays=function(a,d,e){d.forEach(function(l,k){a[l]=h.util.ensureArray(a[l],e)});return a};h.util.cloneJson=function(a){return JSON.parse(JSON.stringify(a))};h.util.validateKeys=function(a,d){"string"===typeof d&&(d=d.split("."));var e=d.shift();return a[e]&&(!d.length||objHasKeys(a[e],d))};h.util.sumArrays=function(a,d){return n.zip(a,d).map(function(e,l){return n.sum(e)})};h.util.arrayLast=function(a){return a[a.length-
1]};h.util.arrayEqual=function(a,d){for(var e=Math.max(a.length,d.length,1);0<=e--&&a[e]===d[e];);return-2===e};h.util.flattenArray=function(a){for(var d=[];!h.util.arrayEqual(d,a);)d=a,a=[].concat.apply([],a);return a};h.util.deduplicate=function(a){return a.filter(function(d,e,l){return l.indexOf(d)==e})};h.util.convertToCartesian=function(a,d){d=d*Math.PI/180;return[a*Math.cos(d),a*Math.sin(d)]};h.util.round=function(a,d){d=Math.pow(10,d||2);return Math.round(a*d)/d};h.util.getMousePos=function(a){a=
n.mouse(a.node());var d=a[0],e=a[1],l={};l.x=d;l.y=e;l.pos=a;l.angle=180*(Math.atan2(e,d)+Math.PI)/Math.PI;l.radius=Math.sqrt(d*d+e*e);return l};h.util.duplicatesCount=function(a){for(var d={},e,l={},k=0,c=a.length;k<c;k++)e=a[k],e in d?(d[e]++,l[e]=d[e]):d[e]=1;return l};h.util.duplicates=function(a){return Object.keys(h.util.duplicatesCount(a))};h.util.translator=function(a,d,e,l){l&&(l=e.slice(),e=d,d=l);var k=d.reduce(function(c,f){if("undefined"!=typeof c)return c[f]},a);"undefined"!==typeof k&&
(d.reduce(function(c,f,g){if("undefined"!=typeof c)return g===d.length-1&&delete c[f],c[f]},a),e.reduce(function(c,f,g){"undefined"===typeof c[f]&&(c[f]={});g===e.length-1&&(c[f]=k);return c[f]},a))};h.PolyChart=function(){function a(){var k=d[0].geometryConfig,c=k.container;"string"==typeof c&&(c=n.select(c));c.datum(d).each(function(f,g){var q=!!f[0].data.yStack,t=f.map(function(v,G){return q?n.zip(v.data.t[0],v.data.r[0],v.data.yStack[0]):n.zip(v.data.t[0],v.data.r[0])}),u=k.angularScale,w=k.radialScale.domain()[0],
x={bar:function(v,G,I){I=f[I].data;G=k.radialScale(v[1])-k.radialScale(0);v=k.radialScale(v[2]||0);I=I.barWidth;n.select(this).attr({"class":"mark bar",d:"M"+[[G+v,-I/2],[G+v,I/2],[v,I/2],[v,-I/2]].join("L")+"Z",transform:function(J,K){return"rotate("+(k.orientation+u(J[0]))+")"}})},dot:function(v,G,I){var J=v[2]?[v[0],v[1]+v[2]]:v;v=n.svg.symbol().size(f[I].data.dotSize).type(f[I].data.dotType)(v,G);n.select(this).attr({"class":"mark dot",d:v,transform:function(K,N){K=k.radialScale(J[1]);N=(k.angularScale(J[0])+
k.orientation)*Math.PI/180;return"translate("+[K*Math.cos(N),K*Math.sin(N)]+")"}})}},E=n.svg.line.radial().interpolate(f[0].data.lineInterpolation).radius(function(v){return k.radialScale(v[1])}).angle(function(v){return k.angularScale(v[0])*Math.PI/180});x.line=function(v,G,I){var J=v[2]?t[I].map(function(N,H){return[N[0],N[1]+N[2]]}):t[I];n.select(this).each(x.dot).style({opacity:function(N,H){return+f[I].data.dotVisible},fill:B.stroke(v,G,I)}).attr({"class":"mark dot"});if(!(0<G)){var K=n.select(this.parentNode).selectAll("path.line").data([0]);
K.enter().insert("path");K.attr({"class":"line",d:E(J),transform:function(N,H){return"rotate("+(k.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(N,H){return B.fill(v,G,I)},"fill-opacity":0,stroke:function(N,H){return B.stroke(v,G,I)},"stroke-width":function(N,H){return B["stroke-width"](v,G,I)},"stroke-dasharray":function(N,H){return B["stroke-dasharray"](v,G,I)},opacity:function(N,H){return B.opacity(v,G,I)},display:function(N,H){return B.display(v,G,I)}})}};g=k.angularScale.range();
var F=Math.abs(g[1]-g[0])/t[0].length*Math.PI/180,z=n.svg.arc().startAngle(function(v){return-F/2}).endAngle(function(v){return F/2}).innerRadius(function(v){return k.radialScale(w+(v[2]||0))}).outerRadius(function(v){return k.radialScale(w+(v[2]||0))+k.radialScale(v[1])});x.arc=function(v,G,I){n.select(this).attr({"class":"mark arc",d:z,transform:function(J,K){return"rotate("+(k.orientation+u(J[0])+90)+")"}})};var B={fill:function(v,G,I){return f[I].data.color},stroke:function(v,G,I){return f[I].data.strokeColor},
"stroke-width":function(v,G,I){return f[I].data.strokeSize+"px"},"stroke-dasharray":function(v,G,I){return l[f[I].data.strokeDash]},opacity:function(v,G,I){return f[I].data.opacity},display:function(v,G,I){return"undefined"===typeof f[I].data.visible||f[I].data.visible?"block":"none"}};g=n.select(this).selectAll("g.layer").data(t);g.enter().append("g").attr({"class":"layer"});var C=g.selectAll("path.mark").data(function(v,G){return v});C.enter().append("path").attr({"class":"mark"});C.style(B).each(x[k.geometryType]);
C.exit().remove();g.exit().remove()})}var d=[h.PolyChart.defaultConfig()],e=n.dispatch("hover"),l={solid:"none",dash:[5,2],dot:[2,5]};a.config=function(k){if(!arguments.length)return d;k.forEach(function(c,f){d[f]||(d[f]={});m(d[f],h.PolyChart.defaultConfig());m(d[f],c)});return this};a.getColorScale=function(){};n.rebind(a,e,"on");return a};h.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",
strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:n.scale.category20()}}};h.BarChart=function(){return h.PolyChart()};h.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}};h.AreaChart=function(){return h.PolyChart()};h.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}};
h.DotPlot=function(){return h.PolyChart()};h.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}};h.LinePlot=function(){return h.PolyChart()};h.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}};h.Legend=function(){function a(){var l=d.legendConfig,k=d.data.map(function(E,F){return[].concat(E).map(function(z,B){var C=m({},l.elements[F]);C.name=z;C.color=[].concat(l.elements[F].color)[B];return C})}),c=n.merge(k);c=c.filter(function(E,
F){return l.elements[F]&&(l.elements[F].visibleInLegend||"undefined"===typeof l.elements[F].visibleInLegend)});l.reverseOrder&&(c=c.reverse());var f=l.container;if("string"==typeof f||f.nodeName)f=n.select(f);var g=c.map(function(E,F){return E.color}),q=l.fontSize,t=(k=null==l.isContinuous?"number"===typeof c[0]:l.isContinuous)?l.height:q*c.length;f=f.classed("legend-group",!0).selectAll("svg").data([0]);var u=f.enter().append("svg").attr({width:300,height:t+q,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",
version:"1.1"});u.append("g").classed("legend-axis",!0);u.append("g").classed("legend-marks",!0);u=n.range(c.length);var w=n.scale[k?"linear":"ordinal"]().domain(u).range(g),x=n.scale[k?"linear":"ordinal"]().domain(u)[k?"range":"rangePoints"]([0,t]);k?(t=f.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(g),t.enter().append("stop"),t.attr({offset:function(E,F){return F/(g.length-1)*100+"%"}}).style({"stop-color":function(E,
F){return E}}),f.append("rect").classed("legend-mark",!0).attr({height:l.height,width:l.colorBandWidth,fill:"url(#grad1)"})):(t=f.select(".legend-marks").selectAll("path.legend-mark").data(c),t.enter().append("path").classed("legend-mark",!0),t.attr({transform:function(E,F){return"translate("+[q/2,x(F)+q/2]+")"},d:function(E,F){E=E.symbol;F=3*q;E="line"===E?"M"+[[-q/2,-q/12],[q/2,-q/12],[q/2,q/12],[-q/2,q/12]]+"Z":-1!=n.svg.symbolTypes.indexOf(E)?n.svg.symbol().type(E).size(F)():n.svg.symbol().type("square").size(F)();
return E},fill:function(E,F){return w(F)}}),t.exit().remove());t=n.svg.axis().scale(x).orient("right");f=f.select("g.legend-axis").attr({transform:"translate("+[k?l.colorBandWidth:q,q/2]+")"}).call(t);f.selectAll(".domain").style({fill:"none",stroke:"none"});f.selectAll("line").style({fill:"none",stroke:k?l.textColor:"none"});f.selectAll("text").style({fill:l.textColor,"font-size":l.fontSize}).text(function(E,F){return c[F].name});return a}var d=h.Legend.defaultConfig(),e=n.dispatch("hover");a.config=
function(l){if(!arguments.length)return d;m(d,l);return this};n.rebind(a,e,"on");return a};h.Legend.defaultConfig=function(a,d){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}};h.tooltipPanel=function(){var a,d,e,l={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},k="tooltip-"+
h.tooltipPanel.uid++,c=function(){a=l.container.selectAll("g."+k).data([0]);var f=a.enter().append("g").classed(k,!0).style({"pointer-events":"none",display:"none"});e=f.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"});d=f.append("text").attr({dx:l.padding+10,dy:.3*+l.fontSize});return c};c.text=function(f){var g=n.hsl(l.color).l,q=.5<=g?"#aaa":"white";f=f||"";d.style({fill:.5<=g?"black":"white","font-size":l.fontSize+"px"}).text(f);g=l.padding;f=d.node().getBBox();q={fill:l.color,
stroke:q,"stroke-width":"2px"};var t=f.width+2*g+10;f=f.height+2*g;e.attr({d:"M"+[[10,-f/2],[10,-f/4],[l.hasTick?0:10,0],[10,f/4],[10,f/2],[t,f/2],[t,-f/2]].join("L")+"Z"}).style(q);a.attr({transform:"translate("+[10,-f/2+2*g]+")"});a.style({display:"block"});return c};c.move=function(f){if(a)return a.attr({transform:"translate("+[f[0],f[1]]+")"}).style({display:"block"}),c};c.hide=function(){if(a)return a.style({display:"none"}),c};c.show=function(){if(a)return a.style({display:"block"}),c};c.config=
function(f){m(l,f);return c};return c};h.tooltipPanel.uid=1;h.adapter={};h.adapter.plotly=function(){return{convert:function(a,d){var e={};if(a.data&&(e.data=a.data.map(function(g,q){g=m({},g);[[g,["marker","color"],["color"]],[g,["marker","opacity"],["opacity"]],[g,["marker","line","color"],["strokeColor"]],[g,["marker","line","dash"],["strokeDash"]],[g,["marker","line","width"],["strokeSize"]],[g,["marker","symbol"],["dotType"]],[g,["marker","size"],["dotSize"]],[g,["marker","barWidth"],["barWidth"]],
[g,["line","interpolation"],["lineInterpolation"]],[g,["showlegend"],["visibleInLegend"]]].forEach(function(t,u){h.util.translator.apply(null,t.concat(d))});d||delete g.marker;d&&delete g.groupId;d?("LinePlot"===g.geometry?(g.type="scatter",!0===g.dotVisible?(delete g.dotVisible,g.mode="lines+markers"):g.mode="lines"):"DotPlot"===g.geometry?(g.type="scatter",g.mode="markers"):"AreaChart"===g.geometry?g.type="area":"BarChart"===g.geometry&&(g.type="bar"),delete g.geometry):("scatter"===g.type?"lines"===
g.mode?g.geometry="LinePlot":"markers"===g.mode?g.geometry="DotPlot":"lines+markers"===g.mode&&(g.geometry="LinePlot",g.dotVisible=!0):"area"===g.type?g.geometry="AreaChart":"bar"===g.type&&(g.geometry="BarChart"),delete g.mode,delete g.type);return g}),!d&&a.layout&&"stack"===a.layout.barmode)){var l=h.util.duplicates(e.data.map(function(g,q){return g.geometry}));e.data.forEach(function(g,q){g=l.indexOf(g.geometry);-1!=g&&(e.data[q].groupId=g)})}if(a.layout){a=m({},a.layout);[[a,["plot_bgcolor"],
["backgroundColor"]],[a,["showlegend"],["showLegend"]],[a,["radialaxis"],["radialAxis"]],[a,["angularaxis"],["angularAxis"]],[a.angularaxis,["showline"],["gridLinesVisible"]],[a.angularaxis,["showticklabels"],["labelsVisible"]],[a.angularaxis,["nticks"],["ticksCount"]],[a.angularaxis,["tickorientation"],["tickOrientation"]],[a.angularaxis,["ticksuffix"],["ticksSuffix"]],[a.angularaxis,["range"],["domain"]],[a.angularaxis,["endpadding"],["endPadding"]],[a.radialaxis,["showline"],["gridLinesVisible"]],
[a.radialaxis,["tickorientation"],["tickOrientation"]],[a.radialaxis,["ticksuffix"],["ticksSuffix"]],[a.radialaxis,["range"],["domain"]],[a.angularAxis,["showline"],["gridLinesVisible"]],[a.angularAxis,["showticklabels"],["labelsVisible"]],[a.angularAxis,["nticks"],["ticksCount"]],[a.angularAxis,["tickorientation"],["tickOrientation"]],[a.angularAxis,["ticksuffix"],["ticksSuffix"]],[a.angularAxis,["range"],["domain"]],[a.angularAxis,["endpadding"],["endPadding"]],[a.radialAxis,["showline"],["gridLinesVisible"]],
[a.radialAxis,["tickorientation"],["tickOrientation"]],[a.radialAxis,["ticksuffix"],["ticksSuffix"]],[a.radialAxis,["range"],["domain"]],[a.font,["outlinecolor"],["outlineColor"]],[a.legend,["traceorder"],["reverseOrder"]],[a,["labeloffset"],["labelOffset"]],[a,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(g,q){h.util.translator.apply(null,g.concat(d))});d?("undefined"!==typeof a.tickLength&&(a.angularaxis.ticklen=a.tickLength,delete a.tickLength),a.tickColor&&(a.angularaxis.tickcolor=
a.tickColor,delete a.tickColor)):(a.angularAxis&&"undefined"!==typeof a.angularAxis.ticklen&&(a.tickLength=a.angularAxis.ticklen),a.angularAxis&&"undefined"!==typeof a.angularAxis.tickcolor&&(a.tickColor=a.angularAxis.tickcolor));a.legend&&"boolean"!=typeof a.legend.reverseOrder&&(a.legend.reverseOrder="normal"!=a.legend.reverseOrder);a.legend&&"boolean"==typeof a.legend.traceorder&&(a.legend.traceorder=a.legend.traceorder?"reversed":"normal",delete a.legend.reverseOrder);if(a.margin&&"undefined"!=
typeof a.margin.t){var k=["t","r","b","l","pad"],c=["top","right","bottom","left","pad"],f={};n.entries(a.margin).forEach(function(g,q){f[c[k.indexOf(g.key)]]=g.value});a.margin=f}d&&(delete a.needsEndSpacing,delete a.minorTickColor,delete a.minorTicks,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksStep,delete a.angularaxis.rewriteTicks,delete a.angularaxis.nticks,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksStep,
delete a.radialaxis.rewriteTicks,delete a.radialaxis.nticks);e.layout=a}return e}}}},{"../../../constants/alignment":717,"../../../lib":749,d3:169}],870:[function(b,y,D){var n=b("d3");D=b("../../../lib");var m=b("../../../components/color"),p=b("./micropolar"),h=b("./undo_manager"),a=D.extendDeepAll,d=y.exports={};d.framework=function(e){function l(u,w){w&&(q=w);n.select(n.select(q).node().parentNode).selectAll(".svg-container\x3e*:not(.chart-root)").remove();k=k?a(k,u):u;f||(f=p.Axis());g=p.adapter.plotly().convert(k);
f.config(g).render(q);e.data=k.data;e.layout=k.layout;d.fillLayout(e);return k}var k,c,f,g,q,t=new h;l.isPolar=!0;l.svg=function(){return f.svg()};l.getConfig=function(){return k};l.getLiveConfig=function(){return p.adapter.plotly().convert(f.getLiveConfig(),!0)};l.getLiveScales=function(){return{t:f.angularScale(),r:f.radialScale()}};l.setUndoPoint=function(){var u=this,w=p.util.cloneJson(k);(function(x,E){t.add({undo:function(){E&&u(E)},redo:function(){u(x)}})})(w,c);c=p.util.cloneJson(w)};l.undo=
function(){t.undo()};l.redo=function(){t.redo()};return l};d.fillLayout=function(e){var l=n.select(e).selectAll(".plot-container"),k=l.selectAll(".svg-container"),c=e.framework&&e.framework.svg&&e.framework.svg();e._fullLayout=a({width:800,height:600,paper_bgcolor:m.background,_container:l,_paperdiv:k,_paper:c},e.layout)}},{"../../../components/color":615,"../../../lib":749,"./micropolar":869,"./undo_manager":871,d3:169}],871:[function(b,y,D){y.exports=function(){function n(d,e){if(!d)return this;
h=!0;d[e]();h=!1;return this}var m=[],p=-1,h=!1,a;return{add:function(d){if(h)return this;m.splice(p+1,m.length-p);m.push(d);p=m.length-1;return this},setCallback:function(d){a=d},undo:function(){var d=m[p];if(!d)return this;n(d,"undo");--p;a&&a(d.undo);return this},redo:function(){var d=m[p+1];if(!d)return this;n(d,"redo");p+=1;a&&a(d.redo);return this},clear:function(){m=[];p=-1},hasUndo:function(){return-1!==p},hasRedo:function(){return p<m.length-1},getCommands:function(){return m},getPreviousCommand:function(){return m[p-
1]},getIndex:function(){return p}}}},{}],872:[function(b,y,D){function n(U,X){this.id=X;this.gd=U;this.radialAxisAngle=this.vangles=this._hasClipOnAxisFalse=null;this.traceHash={};this.layers={};this.clipPaths={};this.clipIds={};this.viewInitial={};U=U._fullLayout;this.clipIds.forTraces="clip"+U._uid+X+"-for-traces";this.clipPaths.forTraces=U._clips.append("clipPath").attr("id",this.clipIds.forTraces);this.clipPaths.forTraces.append("path");this.framework=U._polarlayer.append("g").attr("class",X);
this.angularTickLayout=this.radialTickLayout=null}function m(U){var X=U.ticks+String(U.ticklen)+String(U.showticklabels);"side"in U&&(X+=U.side);return X}function p(U,X){var da=c.findIndexOfMin(X,function(ea){return c.angleDist(U,ea)});return X[da]}function h(U,X,da){X?(U.attr("display",null),U.attr(da)):U&&U.attr("display","none");return U}function a(U,X){return"translate("+U+","+X+")"}function d(U){return"rotate("+U+")"}var e=b("d3"),l=b("tinycolor2"),k=b("../../registry"),c=b("../../lib"),f=b("../../components/color"),
g=b("../../components/drawing"),q=b("../plots"),t=b("../../plots/cartesian/axes"),u=b("../cartesian/set_convert"),w=b("./set_convert"),x=b("../cartesian/autorange").doAutoRange,E=b("../cartesian/dragbox"),F=b("../../components/dragelement"),z=b("../../components/fx"),B=b("../../components/titles"),C=b("../cartesian/select").prepSelect,v=b("../cartesian/select").selectOnClick,G=b("../cartesian/select").clearSelect,I=b("../../lib/setcursor"),J=b("../../lib/clear_gl_canvases"),K=b("../../plot_api/subroutines").redrawReglTraces,
N=b("../../constants/alignment").MID_SHIFT,H=b("./constants"),L=b("./helpers"),P=c._,Q=c.mod,S=c.deg2rad,O=c.rad2deg;b=n.prototype;y.exports=function(U,X){return new n(U,X)};b.plot=function(U,X){var da=X[this.id];this._hasClipOnAxisFalse=!1;for(var ea=0;ea<U.length;ea++)if(!1===U[ea][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(X,da);this.updateLayout(X,da);q.generalUpdatePerTraceModule(this.gd,this,U,da);this.updateFx(X,da)};b.updateLayers=function(U,X){var da=this.layers;
U=X.radialaxis;X=X.angularaxis;var ea=H.layerNames,ca=ea.indexOf("frontplot");ea=ea.slice(0,ca);X="below traces"===X.layer;U="below traces"===U.layer;X&&ea.push("angular-line");U&&ea.push("radial-line");X&&ea.push("angular-axis");U&&ea.push("radial-axis");ea.push("frontplot");X||ea.push("angular-line");U||ea.push("radial-line");X||ea.push("angular-axis");U||ea.push("radial-axis");U=this.framework.selectAll(".polarsublayer").data(ea,String);U.enter().append("g").attr("class",function(ia){return"polarsublayer "+
ia}).each(function(ia){var ha=da[ia]=e.select(this);switch(ia){case "frontplot":ha.append("g").classed("barlayer",!0);ha.append("g").classed("scatterlayer",!0);break;case "backplot":ha.append("g").classed("maplayer",!0);break;case "plotbg":da.bg=ha.append("path");break;case "radial-grid":ha.style("fill","none");break;case "angular-grid":ha.style("fill","none");break;case "radial-line":ha.append("line").style("fill","none");break;case "angular-line":ha.append("path").style("fill","none")}});U.order()};
b.updateLayout=function(U,X){var da=this.layers,ea=U._size,ca=X.radialaxis,ia=X.angularaxis,ha=X.domain.x,fa=X.domain.y;this.xOffset=ea.l+ea.w*ha[0];this.yOffset=ea.t+ea.h*(1-fa[1]);var na=this.xLength=ea.w*(ha[1]-ha[0]),sa=this.yLength=ea.h*(fa[1]-fa[0]),ua=X.sector;this.sectorInRad=ua.map(S);var ta=ua[0];ua=ua[1]-ta;ta=Q(ta,360);ua=ta+ua;var oa=Math.cos(S(ta)),va=Math.sin(S(ta)),ma=Math.cos(S(ua)),pa=Math.sin(S(ua));var za=90>=ta&&90<=ua||90<ta&&450<=ua?1:0>=va&&0>=pa?0:Math.max(va,pa);var qa=180>=
ta&&180<=ua||180<ta&&540<=ua?-1:0<=oa&&0<=ma?0:Math.min(oa,ma);ta=this.sectorBBox=[qa,270>=ta&&270<=ua||270<ta&&630<=ua?-1:0<=va&&0<=pa?0:Math.min(va,pa),360<=ua?1:0>=oa&&0>=ma?0:Math.max(oa,ma),za];ua=ta[2]-ta[0];va=Math.abs((ta[3]-ta[1])/ua);sa/na>va?(oa=na,va*=na,na=(sa-va)/ea.h/2,ha=[ha[0],ha[1]],fa=[fa[0]+na,fa[1]-na]):(oa=sa/va,va=sa,na=(na-oa)/ea.w/2,ha=[ha[0]+na,ha[1]-na],fa=[fa[0],fa[1]]);this.xLength2=oa;this.yLength2=va;this.xDomain2=ha;this.yDomain2=fa;na=this.xOffset2=ea.l+ea.w*ha[0];
sa=this.yOffset2=ea.t+ea.h*(1-fa[1]);oa=this.radius=oa/ua;va=this.innerRadius=X.hole*oa;ua=this.cx=na-oa*ta[0];ta=this.cy=sa+oa*ta[3];ma=this.cxx=ua-na;pa=this.cyy=ta-sa;this.radialAxis=this.mockAxis(U,X,ca,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[ca.side],domain:[va/ea.w,oa/ea.w]});this.angularAxis=this.mockAxis(U,X,ia,{side:"right",domain:[0,Math.PI],autorange:!1});this.doAutoRange(U,X);this.updateAngularAxis(U,X);this.updateRadialAxis(U,X);this.updateRadialAxisTitle(U,X);this.xaxis=
this.mockCartesianAxis(U,X,{_id:"x",domain:ha});this.yaxis=this.mockCartesianAxis(U,X,{_id:"y",domain:fa});U=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",U).attr("transform",a(ma,pa));da.frontplot.attr("transform",a(na,sa)).call(g.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd);da.bg.attr("d",U).attr("transform",a(ua,ta)).call(f.fill,X.bgcolor)};b.mockAxis=function(U,X,da,ea){da=c.extendFlat({},da,ea);w(da,X,U);return da};b.mockCartesianAxis=function(U,
X,da){var ea=this,ca=da._id,ia=c.extendFlat({type:"linear"},da);u(ia,U);var ha={x:[0,2],y:[1,3]};ia.setRange=function(){var fa=ea.sectorBBox,na=ha[ca],sa=ea.radialAxis._rl;sa=(sa[1]-sa[0])/(1-X.hole);ia.range=[fa[na[0]]*sa,fa[na[1]]*sa]};ia.isPtWithinRange="x"===ca?function(fa){return ea.isPtInside(fa)}:function(){return!0};ia.setRange();ia.setScale();return ia};b.doAutoRange=function(U,X){var da=this.gd;U=this.radialAxis;X=X.radialaxis;U.setScale();x(da,U);da=U.range;X.range=da.slice();X._input.range=
da.slice();U._rl=[U.r2l(da[0],null,"gregorian"),U.r2l(da[1],null,"gregorian")]};b.updateRadialAxis=function(U,X){var da=this,ea=da.gd;U=da.layers;var ca=da.radius,ia=da.innerRadius,ha=da.cx,fa=da.cy,na=X.radialaxis,sa=Q(X.sector[0],360),ua=da.radialAxis;X=ia<ca;da.fillViewInitialKey("radialaxis.angle",na.angle);da.fillViewInitialKey("radialaxis.range",ua.range.slice());ua.setGeometry();"auto"===ua.tickangle&&90<sa&&270>=sa&&(ua.tickangle=180);sa=function(pa){return"translate("+(ua.l2p(pa.x)+ia)+",0)"};
var ta=function(pa){return da.pathArc(ua.r2p(pa.x)+ia)},oa=m(na);da.radialTickLayout!==oa&&(U["radial-axis"].selectAll(".xtick").remove(),da.radialTickLayout=oa);if(X){ua.setScale();oa=t.calcTicks(ua);var va=t.clipEnds(ua,oa),ma=t.getTickSigns(ua)[2];t.drawTicks(ea,ua,{vals:oa,layer:U["radial-axis"],path:t.makeTickPath(ua,0,ma),transFn:sa,crisp:!1});t.drawGrid(ea,ua,{vals:va,layer:U["radial-grid"],path:ta,transFn:c.noop,crisp:!1});t.drawLabels(ea,ua,{vals:oa,layer:U["radial-axis"],transFn:sa,labelFns:t.makeLabelFns(ua,
0)})}ea=da.radialAxisAngle=da.vangles?O(p(S(na.angle),da.vangles)):na.angle;ha=a(ha,fa);fa=ha+d(-ea);h(U["radial-axis"],X&&(na.showticklabels||na.ticks),{transform:fa});h(U["radial-grid"],X&&na.showgrid,{transform:ha});h(U["radial-line"].select("line"),X&&na.showline,{x1:ia,y1:0,x2:ca,y2:0,transform:fa}).attr("stroke-width",na.linewidth).call(f.stroke,na.linecolor)};b.updateRadialAxisTitle=function(U,X,da){U=this.gd;var ea=this.radius,ca=this.cx,ia=this.cy;X=X.radialaxis;var ha=this.id+"title";da=
void 0!==da?da:this.radialAxisAngle;var fa=S(da),na=Math.cos(fa);fa=Math.sin(fa);var sa=0;if(X.title){sa=g.bBox(this.layers["radial-axis"].node()).height;var ua=X.title.font.size;sa="counterclockwise"===X.side?-sa-.4*ua:sa+.8*ua}this.layers["radial-axis-title"]=B.draw(U,ha,{propContainer:X,propName:this.id+".radialaxis.title",placeholder:P(U,"Click to enter radial axis title"),attributes:{x:ca+ea/2*na+sa*fa,y:ia-ea/2*fa+sa*na,"text-anchor":"middle"},transform:{rotate:-da}})};b.updateAngularAxis=function(U,
X){var da=this;U=da.gd;var ea=da.layers,ca=da.radius,ia=da.innerRadius,ha=da.cx,fa=da.cy,na=X.angularaxis,sa=da.angularAxis;da.fillViewInitialKey("angularaxis.rotation",na.rotation);sa.setGeometry();sa.setScale();var ua=function(Ca){return sa.t2g(Ca.x)};"linear"===sa.type&&"radians"===sa.thetaunit&&(sa.tick0=O(sa.tick0),sa.dtick=O(sa.dtick));var ta=function(Ca){return a(ha+ca*Math.cos(Ca),fa-ca*Math.sin(Ca))},oa=function(Ca){return ta(ua(Ca))},va=function(Ca){Ca=ua(Ca);return ta(Ca)+d(-O(Ca))},ma=
function(Ca){var Ka=ua(Ca);Ca=Math.cos(Ka);Ka=Math.sin(Ka);return"M"+[ha+ia*Ca,fa-ia*Ka]+"L"+[ha+ca*Ca,fa-ca*Ka]},pa=t.makeLabelFns(sa,0).labelStandoff,za={xFn:function(Ca){Ca=ua(Ca);return Math.cos(Ca)*pa},yFn:function(Ca){var Ka=ua(Ca);return-Math.sin(Ka)*(pa+Ca.fontSize*(0<Math.sin(Ka)?.2:1))+Math.abs(Math.cos(Ka))*Ca.fontSize*N},anchorFn:function(Ca){Ca=ua(Ca);Ca=Math.cos(Ca);return.1>Math.abs(Ca)?"middle":0<Ca?"start":"end"},heightFn:function(Ca,Ka,Oa){Ca=ua(Ca);return-.5*(1+Math.sin(Ca))*Oa}},
qa=m(na);da.angularTickLayout!==qa&&(ea["angular-axis"].selectAll("."+sa._id+"tick").remove(),da.angularTickLayout=qa);qa=t.calcTicks(sa);"linear"===X.gridshape?(X=qa.map(ua),0>c.angleDelta(X[0],X[1])&&(X=X.slice().reverse())):X=null;da.vangles=X;"category"===sa.type&&(qa=qa.filter(function(Ca){return c.isAngleInsideSector(ua(Ca),da.sectorInRad)}));sa.visible&&(X="inside"===sa.ticks?-1:1,t.drawTicks(U,sa,{vals:qa,layer:ea["angular-axis"],path:"M"+(sa.linewidth||1)/2*X+",0h"+X*sa.ticklen,transFn:va,
crisp:!1}),t.drawGrid(U,sa,{vals:qa,layer:ea["angular-grid"],path:ma,transFn:c.noop,crisp:!1}),t.drawLabels(U,sa,{vals:qa,layer:ea["angular-axis"],repositionOnUpdate:!0,transFn:oa,labelFns:za}));h(ea["angular-line"].select("path"),na.showline,{d:da.pathSubplot(),transform:a(ha,fa)}).attr("stroke-width",na.linewidth).call(f.stroke,na.linecolor)};b.updateFx=function(U,X){this.gd._context.staticPlot||(this.updateAngularDrag(U),this.updateRadialDrag(U,X,0),this.updateRadialDrag(U,X,1),this.updateMainDrag(U))};
b.updateMainDrag=function(U){function X(Xa,pb){return Math.sqrt(Xa*Xa+pb*pb)}function da(Xa,pb){return[Xa*Math.cos(pb),Xa*Math.sin(-pb)]}function ea(Xa,pb){if(0===Xa)return va.pathSector(2*Ia);var vb=Va/Xa,zb=pb-vb;pb+=vb;vb=Math.max(0,Math.min(Xa,Ca));Xa=vb-Ia;vb+=Ia;return"M"+da(Xa,zb)+"A"+[Xa,Xa]+" 0,0,0 "+da(Xa,pb)+"L"+da(vb,pb)+"A"+[vb,vb]+" 0,0,1 "+da(vb,zb)+"Z"}function ca(Xa,pb,vb){if(0===Xa)return va.pathSector(2*Ia);pb=da(Xa,pb);vb=da(Xa,vb);Xa=ab((pb[0]+vb[0])/2);vb=ab((pb[1]+vb[1])/2);
if(Xa&&vb){pb=vb/Xa;var zb=-1/pb;Xa=ra(Ia,pb,Xa,vb);pb=ra(Va,zb,Xa[0][0],Xa[0][1]);Xa=ra(Va,zb,Xa[1][0],Xa[1][1])}else{if(vb){zb=Va;var Jb=Ia}else zb=Ia,Jb=Va;pb=[[Xa-zb,vb-Jb],[Xa+zb,vb-Jb]];Xa=[[Xa-zb,vb+Jb],[Xa+zb,vb+Jb]]}return"M"+pb.join("L")+"L"+Xa.reverse().join("L")+"Z"}function ia(Xa,pb){pb=Math.max(Math.min(pb,Ca),Ka);Xa<qa?Xa=0:Ca-Xa<qa?Xa=Ca:pb<qa?pb=0:Ca-pb<qa&&(pb=Ca);if(Math.abs(pb-Xa)>za)return Xa<pb?(eb=Xa,Ba=pb):(eb=pb,Ba=Xa),!0;Ba=eb=null;return!1}function ha(Xa,pb){Xa=Xa||Ma;pb=
pb||"M0,0Z";Ra.attr("d",Xa);jb.attr("d",pb);E.transitionZoombox(Ra,jb,$a,lb);$a=!0;Xa={};ta(Xa);ma.emit("plotly_relayouting",Xa)}function fa(Xa,pb){Xa=Na+Xa;var vb=Za+pb;pb=X(Na-mb,Za-tb);Xa=Math.min(X(Xa-mb,vb-tb),Ca);vb=Math.atan2(tb-Za,Na-mb);if(ia(pb,Xa)){var zb=Ma+va.pathSector(Ba);eb&&(zb+=va.pathSector(eb));var Jb=ea(eb,vb)+ea(Ba,vb)}ha(zb,Jb)}function na(Xa,pb,vb,zb){Xa=L.findIntersectionXY(vb,zb,vb,[Xa-mb,tb-pb]);return X(Xa[0],Xa[1])}function sa(Xa,pb){Xa=Na+Xa;var vb=Za+pb,zb=Math.atan2(tb-
vb,Xa-mb);pb=Ea(Math.atan2(tb-Za,Na-mb),Ta);var Jb=Ea(zb,Ta);zb=na(Na,Za,pb[0],pb[1]);Xa=Math.min(na(Xa,vb,Jb[0],Jb[1]),Ca);if(ia(zb,Xa)){var Zb=Ma+va.pathSector(Ba);eb&&(Zb+=va.pathSector(eb));var pc=[ca(eb,pb[0],pb[1]),ca(Ba,pb[0],pb[1])].join(" ")}ha(Zb,pc)}function ua(){E.removeZoombox(ma);if(null!==eb&&null!==Ba){var Xa={};ta(Xa);E.showDoubleClickNotifier(ma);k.call("_guiRelayout",ma,Xa)}}function ta(Xa){var pb=fb._rl,vb=(pb[1]-pb[0])/(1-Ka/Ca)/Ca;Xa[va.id+".radialaxis.range"]=[pb[0]+(eb-Ka)*
vb,pb[0]+(Ba-Ka)*vb]}function oa(Xa,pb){var vb=ma._fullLayout.clickmode;E.removeZoombox(ma);if(2===Xa){var zb={},Jb;for(Jb in va.viewInitial)zb[va.id+"."+Jb]=va.viewInitial[Jb];ma.emit("plotly_doubleclick",null);k.call("_guiRelayout",ma,zb)}-1<vb.indexOf("select")&&1===Xa&&v(pb,ma,[va.xaxis],[va.yaxis],va.id,ib);-1<vb.indexOf("event")&&z.click(ma,pb,va.id)}var va=this,ma=va.gd,pa=U._zoomlayer,za=H.MINZOOM,qa=H.OFFEDGE,Ca=va.radius,Ka=va.innerRadius,Oa=va.cx,kb=va.cy,mb=va.cxx,tb=va.cyy,nb=va.sectorInRad,
Ta=va.vangles,fb=va.radialAxis,ab=L.clampTiny,ra=L.findXYatLength,Ea=L.findEnclosingVertexAngles,Ia=H.cornerHalfWidth,Va=H.cornerLen/2,rb=E.makeDragger(va.layers,"path","maindrag","crosshair");e.select(rb).attr("d",va.pathSubplot()).attr("transform",a(Oa,kb));var ib={element:rb,gd:ma,subplot:va.id,plotinfo:{id:va.id,xaxis:va.xaxis,yaxis:va.yaxis},xaxes:[va.xaxis],yaxes:[va.yaxis]},Na,Za,eb,Ba,Ma,$a,lb,Ra,jb;ib.prepFn=function(Xa,pb,vb){var zb=ma._fullLayout.dragmode,Jb=rb.getBoundingClientRect();
Na=pb-Jb.left;Za=vb-Jb.top;Ta&&(Jb=L.findPolygonOffset(Ca,nb[0],nb[1],Ta),Na+=mb+Jb[0],Za+=tb+Jb[1]);switch(zb){case "zoom":ib.moveFn=Ta?sa:fa;ib.clickFn=oa;ib.doneFn=ua;Ba=eb=null;Ma=va.pathSubplot();$a=!1;lb=l(ma._fullLayout[va.id].bgcolor).getLuminance();Ra=E.makeZoombox(pa,lb,Oa,kb,Ma);Ra.attr("fill-rule","evenodd");jb=E.makeCorners(pa,Oa,kb);G(ma);break;case "select":case "lasso":C(Xa,pb,vb,ib,zb)}};rb.onmousemove=function(Xa){z.hover(ma,Xa,va.id);ma._fullLayout._lasthover=rb;ma._fullLayout._hoversubplot=
va.id};rb.onmouseout=function(Xa){ma._dragging||F.unhover(ma,Xa)};F.init(ib)};b.updateRadialDrag=function(U,X,da){function ea(ra,Ea){Ta?Ta(ra,Ea):(ra=[ra,-Ea],ra=Math.abs(c.dot(ra,[Math.cos(za),Math.sin(za)])/Math.sqrt(c.dot(ra,ra))),isNaN(ra)||(Ta=.5>ra?ia:ha));ra={};null!==fb?ra[fa.id+".radialaxis.angle"]=fb:null!==ab&&(ra[fa.id+".radialaxis.range["+da+"]"]=ab);na.emit("plotly_relayouting",ra)}function ca(){null!==fb?k.call("_guiRelayout",na,fa.id+".radialaxis.angle",fb):null!==ab&&k.call("_guiRelayout",
na,fa.id+".radialaxis.range["+da+"]",ab)}function ia(ra,Ea){0!==da&&(fb=Math.atan2(oa-(tb+Ea),mb+ra-ta),fa.vangles&&(fb=p(fb,fa.vangles)),fb=O(fb),ra=a(ta,oa)+d(-fb),sa["radial-axis"].attr("transform",ra),sa["radial-line"].select("line").attr("transform",ra),ra=fa.gd._fullLayout,fa.updateRadialAxisTitle(ra,ra[fa.id],fb))}function ha(ra,Ea){ra=c.dot([ra,-Ea],[Math.cos(za),Math.sin(za)]);ab=Oa-kb*ra;if(0<kb!==(da?ab>Ca:ab<Ka))ab=null;else{Ea=na._fullLayout;ra=Ea[fa.id];va.range[da]=ab;va._rl[da]=ab;
fa.updateRadialAxis(Ea,ra);fa.xaxis.setRange();fa.xaxis.setScale();fa.yaxis.setRange();fa.yaxis.setScale();Ea=!1;for(var Ia in fa.traceHash){var Va=fa.traceHash[Ia],rb=c.filterVisible(Va);Va[0][0].trace._module.plot(na,fa,rb,ra);k.traceIs(Ia,"gl")&&rb.length&&(Ea=!0)}Ea&&(J(na),K(na))}}var fa=this,na=fa.gd,sa=fa.layers;U=fa.radius;var ua=fa.innerRadius,ta=fa.cx,oa=fa.cy,va=fa.radialAxis,ma=H.radialDragBoxSize,pa=ma/2;if(va.visible){var za=S(fa.radialAxisAngle),qa=va._rl,Ca=qa[0],Ka=qa[1],Oa=qa[da],
kb=.75*(qa[1]-qa[0])/(1-X.hole)/U;if(da){var mb=ta+(U+pa)*Math.cos(za);var tb=oa-(U+pa)*Math.sin(za);X="radialdrag"}else mb=ta+(ua-pa)*Math.cos(za),tb=oa-(ua-pa)*Math.sin(za),X="radialdrag-inner";X=E.makeRectDragger(sa,X,"crosshair",-pa,-pa,ma,ma);var nb={element:X,gd:na};h(e.select(X),va.visible&&ua<U,{transform:a(mb,tb)});var Ta,fb,ab;nb.prepFn=function(){ab=fb=Ta=null;nb.moveFn=ea;nb.doneFn=ca;G(na)};nb.clampFn=function(ra,Ea){Math.sqrt(ra*ra+Ea*Ea)<H.MINDRAG&&(Ea=ra=0);return[ra,Ea]};F.init(nb)}};
b.updateAngularDrag=function(U){function X(Ta,fb){var ab=ca.gd._fullLayout,ra=ab[ca.id],Ea=O(Math.atan2(oa+va-(Oa+fb),Ka+Ta-ta-va)-nb);mb=kb+Ea;ha.frontplot.attr("transform",a(ca.xOffset2,ca.yOffset2)+d([-Ea,ta,oa]));ca.vangles?(tb=ca.radialAxisAngle+Ea,Ta=a(sa,ua)+d(-Ea),fb=a(sa,ua)+d(-tb),ha.bg.attr("transform",Ta),ha["radial-grid"].attr("transform",Ta),ha["radial-axis"].attr("transform",fb),ha["radial-line"].select("line").attr("transform",fb),ca.updateRadialAxisTitle(ab,ra,tb)):ca.clipPaths.forTraces.select("path").attr("transform",
a(ta,oa)+d(Ea));qa.each(function(){var Va=e.select(this),rb=g.getTranslate(Va);Va.attr("transform",a(rb.x,rb.y)+d([Ea]))});Ca.each(function(){var Va=e.select(this),rb=Va.select("text"),ib=g.getTranslate(Va);Va.attr("transform",d([Ea,rb.attr("x"),rb.attr("y")])+a(ib.x,ib.y))});na.rotation=c.modHalf(mb,360);ca.updateAngularAxis(ab,ra);ca._hasClipOnAxisFalse&&!c.isFullCircle(ca.sectorInRad)&&za.call(g.hideOutsideRangePoints,ca);ab=!1;for(var Ia in ca.traceHash)k.traceIs(Ia,"gl")&&(Ta=ca.traceHash[Ia],
fb=c.filterVisible(Ta),Ta[0][0].trace._module.plot(ia,ca,fb,ra),fb.length&&(ab=!0));ab&&(J(ia),K(ia));ra={};da(ra);ia.emit("plotly_relayouting",ra)}function da(Ta){Ta[ca.id+".angularaxis.rotation"]=mb;ca.vangles&&(Ta[ca.id+".radialaxis.angle"]=tb)}function ea(){Ca.select("text").attr("transform",null);var Ta={};da(Ta);k.call("_guiRelayout",ia,Ta)}var ca=this,ia=ca.gd,ha=ca.layers,fa=ca.radius,na=ca.angularAxis,sa=ca.cx,ua=ca.cy,ta=ca.cxx,oa=ca.cyy,va=H.angularDragBoxSize,ma=E.makeDragger(ha,"path",
"angulardrag","move"),pa={element:ma,gd:ia};e.select(ma).attr("d",ca.pathAnnulus(fa,fa+va)).attr("transform",a(sa,ua)).call(I,"move");var za=ha.frontplot.select(".scatterlayer").selectAll(".trace"),qa=za.selectAll(".point"),Ca=za.selectAll(".textpoint"),Ka,Oa,kb,mb,tb,nb;pa.prepFn=function(Ta,fb,ab){kb=U[ca.id].angularaxis.rotation;Ta=ma.getBoundingClientRect();Ka=fb-Ta.left;Oa=ab-Ta.top;nb=Math.atan2(oa+va-Oa,Ka-ta-va);pa.moveFn=X;pa.doneFn=ea;G(ia)};ca.vangles&&!c.isFullCircle(ca.sectorInRad)&&
(pa.prepFn=c.noop,I(e.select(ma),null));F.init(pa)};b.isPtInside=function(U){var X=this.sectorInRad,da=this.vangles,ea=this.angularAxis.c2g(U.theta),ca=this.radialAxis;U=ca.c2l(U.r);return(da?L.isPtInsidePolygon:c.isPtInsideSector)(U,ea,ca._rl,X,da)};b.pathArc=function(U){var X=this.sectorInRad,da=this.vangles;return(da?L.pathPolygon:c.pathArc)(U,X[0],X[1],da)};b.pathSector=function(U){var X=this.sectorInRad,da=this.vangles;return(da?L.pathPolygon:c.pathSector)(U,X[0],X[1],da)};b.pathAnnulus=function(U,
X){var da=this.sectorInRad,ea=this.vangles;return(ea?L.pathPolygonAnnulus:c.pathAnnulus)(U,X,da[0],da[1],ea)};b.pathSubplot=function(){var U=this.innerRadius,X=this.radius;return U?this.pathAnnulus(U,X):this.pathSector(X)};b.fillViewInitialKey=function(U,X){U in this.viewInitial||(this.viewInitial[U]=X)}},{"../../components/color":615,"../../components/dragelement":634,"../../components/drawing":637,"../../components/fx":655,"../../components/titles":710,"../../constants/alignment":717,"../../lib":749,
"../../lib/clear_gl_canvases":733,"../../lib/setcursor":769,"../../plot_api/subroutines":788,"../../plots/cartesian/axes":797,"../../registry":880,"../cartesian/autorange":796,"../cartesian/dragbox":805,"../cartesian/select":816,"../cartesian/set_convert":817,"../plots":860,"./constants":861,"./helpers":862,"./set_convert":873,d3:169,tinycolor2:548}],873:[function(b,y,D){function n(e,l){var k=l._subplot;e.setGeometry=function(){var c=e._rl[0],f=e._rl[1],g=k.innerRadius,q=(k.radius-g)/(f-c),t=g/q,
u=c>f?function(w){return 0>=w}:function(w){return 0<=w};e.c2g=function(w){w=e.c2l(w)-c;return(u(w)?w:0)+t};e.g2c=function(w){return e.l2c(w+c-t)};e.g2p=function(w){return w*q};e.c2p=function(w){return e.g2p(e.c2g(w))}}}function m(e,l){var k=e.type;if("linear"===k){var c=e.d2c,f=e.c2d;e.d2c=function(g,q){g=c(g);return"degrees"===q?a(g):g};e.c2d=function(g,q){g="degrees"===q?d(g):g;return f(g)}}e.makeCalcdata=function(g,q){var t=g[q],u=g._length,w;if(t){if(p.isTypedArray(t)&&"linear"===k){if(u===t.length)return t;
if(t.subarray)return t.subarray(0,u)}q=Array(u);for(w=0;w<u;w++)q[w]=e.d2c(t[w],g.thetaunit)}else for(w=q+"0",q="d"+q,t=(w in g)?e.d2c(g[w],g.thetaunit):0,g=g[q]?e.d2c(g[q],g.thetaunit):(e.period||2*Math.PI)/u,q=Array(u),w=0;w<u;w++)q[w]=t+w*g;return q};e.setGeometry=function(){var g=l.sector,q=g.map(a),t={clockwise:-1,counterclockwise:1}[e.direction],u=a(e.rotation),w=function(C){return(C-u)/t},x;switch(k){case "linear":var E=x=p.identity;var F=a;var z=d;e.range=p.isFullCircle(q)?[g[0],g[0]+360]:
q.map(w).map(d);break;case "category":g=e._categories.length;var B=e.period?Math.max(e.period,g):g;0===B&&(B=1);E=F=function(C){return 2*C*Math.PI/B};x=z=function(C){return C*B/Math.PI/2};e.range=[0,B]}e.c2g=function(C){return t*E(C)+u};e.g2c=function(C){return x(w(C))};e.t2g=function(C){return t*F(C)+u};e.g2t=function(C){return z(w(C))}}}var p=b("../../lib"),h=b("../cartesian/set_convert"),a=p.deg2rad,d=p.rad2deg;y.exports=function(e,l,k){h(e,k);switch(e._id){case "x":case "radialaxis":n(e,l);break;
case "angularaxis":m(e,l)}}},{"../../lib":749,"../cartesian/set_convert":817}],874:[function(b,y,D){var n=b("../lib"),m=b("../plot_api/plot_template"),p=b("./domain").defaults;y.exports=function(h,a,d,e){function l(F,z){return n.coerce(t,u,k,F,z)}var k=e.attributes;d=e.handleDefaults;for(var c=e.partition||"x",f=a._subplots[e.type],g=f.length,q=g&&f[0].replace(/\d+$/,""),t,u,w=0;w<g;w++){var x=f[w];t=h[x]?h[x]:h[x]={};u=m.newContainer(a,x,q);l("uirevision",a.uirevision);var E={};E[c]=[w/g,(w+1)/g];
p(u,a,l,E);e.id=x;d(t,u,l,e)}}},{"../lib":749,"../plot_api/plot_template":787,"./domain":824}],875:[function(b,y,D){function n(m){var p=m.description?" "+m.description:"";m=m.keys||[];if(0<m.length){p=[];for(var h=0;h<m.length;h++)p[h]="`"+m[h]+"`";p=1===m.length?"variable "+p[0]:"variables "+p.slice(0,-1).join(", ")+" and "+p.slice(-1)+"."}return p}y=b("../constants/docs").FORMAT_LINK;b=b("../constants/docs").DATE_FORMAT_LINK;['Variables are inserted using %{variable}, for example "y: %{y}". Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',
y,'for details on the formatting syntax. Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',b,"for details on the date formatting syntax."].join(" ");D.hovertemplateAttrs=function(m,p){m=m||{};p=p||{};n(p);p={valType:"string",dflt:"",editType:m.editType||"none"};!1!==m.arrayOk&&(p.arrayOk=!0);return p};D.texttemplateAttrs=function(m,p){m=m||{};p=p||{};n(p);p={valType:"string",dflt:"",editType:m.editType||"calc"};!1!==m.arrayOk&&(p.arrayOk=
!0);return p}},{"../constants/docs":719}],876:[function(b,y,D){var n=b("./ternary"),m=b("../../plots/get_data").getSubplotCalcData;y=b("../../lib").counterRegex;D.name="ternary";var p=D.attr="subplot";D.idRoot="ternary";D.idRegex=D.attrRegex=y("ternary");(D.attributes={})[p]={valType:"subplotid",dflt:"ternary",editType:"calc"};D.layoutAttributes=b("./layout_attributes");D.supplyLayoutDefaults=b("./layout_defaults");D.plot=function(h){for(var a=h._fullLayout,d=h.calcdata,e=a._subplots.ternary,l=0;l<
e.length;l++){var k=e[l],c=m(d,"ternary",k),f=a[k]._subplot;f||(f=new n({id:k,graphDiv:h,container:a._ternarylayer.node()},a),a[k]._subplot=f);f.plot(c,a,h._promises)}};D.clean=function(h,a,d,e){h=e._subplots.ternary||[];for(d=0;d<h.length;d++){var l=h[d],k=e[l]._subplot;!a[l]&&k&&(k.plotContainer.remove(),k.clipDef.remove(),k.clipDefRelative.remove(),k.layers["a-title"].remove(),k.layers["b-title"].remove(),k.layers["c-title"].remove())}}},{"../../lib":749,"../../plots/get_data":834,"./layout_attributes":877,
"./layout_defaults":878,"./ternary":879}],877:[function(b,y,D){D=b("../../components/color/attributes");var n=b("../domain").attributes,m=b("../cartesian/layout_attributes"),p=b("../../plot_api/edit_types").overrideAll;b=b("../../lib/extend").extendFlat;b={title:{text:m.title.text,font:m.title.font},color:m.color,tickmode:m.tickmode,nticks:b({},m.nticks,{dflt:6,min:1}),tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,
showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,separatethousands:m.separatethousands,tickfont:m.tickfont,tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,hoverformat:m.hoverformat,showline:b({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:b({},m.showgrid,{dflt:!0}),gridcolor:m.gridcolor,
gridwidth:m.gridwidth,layer:m.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}};y=y.exports=p({domain:n({name:"ternary"}),bgcolor:{valType:"color",dflt:D.background},sum:{valType:"number",dflt:1,min:0},aaxis:b,baxis:b,caxis:b},"plot","from-root");y.uirevision={valType:"any",editType:"none"};y.aaxis.uirevision=y.baxis.uirevision=y.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":614,"../../lib/extend":739,
"../../plot_api/edit_types":780,"../cartesian/layout_attributes":811,"../domain":824}],878:[function(b,y,D){function n(q,t,u,w){var x=u("bgcolor");u=u("sum");w.bgColor=p.combine(x,w.paper_bgcolor);for(var E,F,z=0;z<g.length;z++)x=g[z],E=q[x]||{},F=h.newContainer(t,x),F._name=x,m(E,F,w,t);w=t.aaxis;x=t.baxis;t=t.caxis;w.min+x.min+t.min>=u&&(w.min=0,x.min=0,t.min=0,q.aaxis&&delete q.aaxis.min,q.baxis&&delete q.baxis.min,q.caxis&&delete q.caxis.min)}function m(q,t,u,w){function x(v,G){return a.coerce(q,
t,E,v,G)}var E=f[t._name];x("uirevision",w.uirevision);t.type="linear";w=x("color");var F=w!==E.color.dflt?w:u.font.color,z=t._name.charAt(0).toUpperCase(),B="Component "+z,C=x("title.text",B);t._hovertitle=C===B?C:z;a.coerceFont(x,"title.font",{family:u.font.family,size:Math.round(1.2*u.font.size),color:F});x("min");k(q,t,x,"linear");e(q,t,x,"linear",{});l(q,t,x,{outerTicks:!0});x("showticklabels")&&(a.coerceFont(x,"tickfont",{family:u.font.family,size:u.font.size,color:F}),x("tickangle"),x("tickformat"));
c(q,t,x,{dfltColor:w,bgColor:u.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:E});x("hoverformat");x("layer")}var p=b("../../components/color"),h=b("../../plot_api/plot_template"),a=b("../../lib"),d=b("../subplot_defaults"),e=b("../cartesian/tick_label_defaults"),l=b("../cartesian/tick_mark_defaults"),k=b("../cartesian/tick_value_defaults"),c=b("../cartesian/line_grid_defaults"),f=b("./layout_attributes"),g=["aaxis","baxis","caxis"];y.exports=function(q,t,u){d(q,t,u,{type:"ternary",
attributes:f,handleDefaults:n,font:t.font,paper_bgcolor:t.paper_bgcolor})}},{"../../components/color":615,"../../lib":749,"../../plot_api/plot_template":787,"../cartesian/line_grid_defaults":813,"../cartesian/tick_label_defaults":818,"../cartesian/tick_mark_defaults":819,"../cartesian/tick_value_defaults":820,"../subplot_defaults":874,"./layout_attributes":877}],879:[function(b,y,D){function n(H,L){this.id=H.id;this.graphDiv=H.graphDiv;this.init(L);this.makeFramework(L);this.cTickLayout=this.bTickLayout=
this.aTickLayout=null}function m(H){p.select(H).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var p=b("d3"),h=b("tinycolor2"),a=b("../../registry"),d=b("../../lib"),e=d._,l=b("../../components/color"),k=b("../../components/drawing"),c=b("../cartesian/set_convert"),f=b("../../lib/extend").extendFlat,g=b("../plots"),q=b("../cartesian/axes"),t=b("../../components/dragelement"),u=b("../../components/fx");D=b("../../components/dragelement/helpers");var w=D.freeMode,
x=D.rectMode,E=b("../../components/titles"),F=b("../cartesian/select").prepSelect,z=b("../cartesian/select").selectOnClick,B=b("../cartesian/select").clearSelect,C=b("../cartesian/select").clearSelectionsCache,v=b("../cartesian/constants");y.exports=n;b=n.prototype;b.init=function(H){this.container=H._ternarylayer;this.defs=H._defs;this.layoutId=H._uid;this.traceHash={};this.layers={}};b.plot=function(H,L){var P=L[this.id];L=L._size;this._hasClipOnAxisFalse=!1;for(var Q=0;Q<H.length;Q++)if(!1===H[Q][0].trace.cliponaxis){this._hasClipOnAxisFalse=
!0;break}this.updateLayers(P);this.adjustLayout(P,L);g.generalUpdatePerTraceModule(this.graphDiv,this,H,P);this.layers.plotbg.select("path").call(l.fill,P.bgcolor)};b.makeFramework=function(H){var L=this.graphDiv,P=H[this.id],Q=this.clipId="clip"+this.layoutId+this.id,S=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=d.ensureSingleById(H._clips,"clipPath",Q,function(O){O.append("path").attr("d","M0,0Z")});this.clipDefRelative=d.ensureSingleById(H._clips,"clipPath",S,function(O){O.append("path").attr("d",
"M0,0Z")});this.plotContainer=d.ensureSingle(this.container,"g",this.id);this.updateLayers(P);k.setClipUrl(this.layers.backplot,Q,L);k.setClipUrl(this.layers.grids,Q,L)};b.updateLayers=function(H){var L=this.layers,P=["draglayer","plotbg","backplot","grids"];"below traces"===H.aaxis.layer&&P.push("aaxis","aline");"below traces"===H.baxis.layer&&P.push("baxis","bline");"below traces"===H.caxis.layer&&P.push("caxis","cline");P.push("frontplot");"above traces"===H.aaxis.layer&&P.push("aaxis","aline");
"above traces"===H.baxis.layer&&P.push("baxis","bline");"above traces"===H.caxis.layer&&P.push("caxis","cline");H=this.plotContainer.selectAll("g.toplevel").data(P,String);var Q=["agrid","bgrid","cgrid"];H.enter().append("g").attr("class",function(S){return"toplevel "+S}).each(function(S){var O=p.select(this);L[S]=O;"frontplot"===S?O.append("g").classed("scatterlayer",!0):"backplot"===S?O.append("g").classed("maplayer",!0):"plotbg"===S?O.append("path").attr("d","M0,0Z"):"aline"===S||"bline"===S||
"cline"===S?O.append("path"):"grids"===S&&Q.forEach(function(U){L[U]=O.append("g").classed("grid "+U,!0)})});H.order()};var G=Math.sqrt(4/3);b.adjustLayout=function(H,L){var P=this,Q=H.domain,S=(Q.x[0]+Q.x[1])/2,O=(Q.y[0]+Q.y[1])/2,U=Q.x[1]-Q.x[0],X=Q.y[1]-Q.y[0],da=U*L.w,ea=X*L.h,ca=H.sum,ia=H.aaxis.min,ha=H.baxis.min,fa=H.caxis.min;if(da>G*ea){var na=ea;Q=na*G}else Q=da,na=Q/G;da=U*Q/da;X=X*na/ea;U=L.l+L.w*S-Q/2;L=L.t+L.h*(1-O)-na/2;P.x0=U;P.y0=L;P.w=Q;P.h=na;P.sum=ca;P.xaxis={type:"linear",range:[ia+
2*fa-ca,ca-ia-2*ha],domain:[S-da/2,S+da/2],_id:"x"};c(P.xaxis,P.graphDiv._fullLayout);P.xaxis.setScale();P.xaxis.isPtWithinRange=function(sa){return sa.a>=P.aaxis.range[0]&&sa.a<=P.aaxis.range[1]&&sa.b>=P.baxis.range[1]&&sa.b<=P.baxis.range[0]&&sa.c>=P.caxis.range[1]&&sa.c<=P.caxis.range[0]};P.yaxis={type:"linear",range:[ia,ca-ha-fa],domain:[O-X/2,O+X/2],_id:"y"};c(P.yaxis,P.graphDiv._fullLayout);P.yaxis.setScale();P.yaxis.isPtWithinRange=function(){return!0};da=P.yaxis.domain[0];S=P.aaxis=f({},H.aaxis,
{range:[ia,ca-ha-fa],side:"left",tickangle:(+H.aaxis.tickangle||0)-30,domain:[da,da+X*G],anchor:"free",position:0,_id:"y",_length:Q});c(S,P.graphDiv._fullLayout);S.setScale();O=P.baxis=f({},H.baxis,{range:[ca-ia-fa,ha],side:"bottom",domain:P.xaxis.domain,anchor:"free",position:0,_id:"x",_length:Q});c(O,P.graphDiv._fullLayout);O.setScale();H=P.caxis=f({},H.caxis,{range:[ca-ia-ha,fa],side:"right",tickangle:(+H.caxis.tickangle||0)+30,domain:[da,da+X*G],anchor:"free",position:0,_id:"y",_length:Q});c(H,
P.graphDiv._fullLayout);H.setScale();ca="M"+U+","+(L+na)+"h"+Q+"l-"+Q/2+",-"+na+"Z";P.clipDef.select("path").attr("d",ca);P.layers.plotbg.select("path").attr("d",ca);ca="M0,"+na+"h"+Q+"l-"+Q/2+",-"+na+"Z";P.clipDefRelative.select("path").attr("d",ca);ca="translate("+U+","+L+")";P.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ca);P.clipDefRelative.select("path").attr("transform",null);ca="translate("+(U-O._offset)+","+(L+na)+")";P.layers.baxis.attr("transform",ca);P.layers.bgrid.attr("transform",
ca);ca="translate("+(U+Q/2)+","+L+")rotate(30)translate(0,"+-S._offset+")";P.layers.aaxis.attr("transform",ca);P.layers.agrid.attr("transform",ca);ca="translate("+(U+Q/2)+","+L+")rotate(-30)translate(0,"+-H._offset+")";P.layers.caxis.attr("transform",ca);P.layers.cgrid.attr("transform",ca);P.drawAxes(!0);P.layers.aline.select("path").attr("d",S.showline?"M"+U+","+(L+na)+"l"+Q/2+",-"+na:"M0,0").call(l.stroke,S.linecolor||"#000").style("stroke-width",(S.linewidth||0)+"px");P.layers.bline.select("path").attr("d",
O.showline?"M"+U+","+(L+na)+"h"+Q:"M0,0").call(l.stroke,O.linecolor||"#000").style("stroke-width",(O.linewidth||0)+"px");P.layers.cline.select("path").attr("d",H.showline?"M"+(U+Q/2)+","+L+"l"+Q/2+","+na:"M0,0").call(l.stroke,H.linecolor||"#000").style("stroke-width",(H.linewidth||0)+"px");P.graphDiv._context.staticPlot||P.initInteractions();k.setClipUrl(P.layers.frontplot,P._hasClipOnAxisFalse?null:P.clipId,P.graphDiv)};b.drawAxes=function(H){var L=this.graphDiv,P=this.id.substr(7)+"title",Q=this.layers,
S=this.aaxis,O=this.baxis,U=this.caxis;this.drawAx(S);this.drawAx(O);this.drawAx(U);if(H){H=Math.max(S.showticklabels?S.tickfont.size/2:0,(U.showticklabels?.75*U.tickfont.size:0)+("outside"===U.ticks?.87*U.ticklen:0));var X=(O.showticklabels?O.tickfont.size:0)+("outside"===O.ticks?O.ticklen:0)+3;Q["a-title"]=E.draw(L,"a"+P,{propContainer:S,propName:this.id+".aaxis.title",placeholder:e(L,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-S.title.font.size/3-H,"text-anchor":"middle"}});
Q["b-title"]=E.draw(L,"b"+P,{propContainer:O,propName:this.id+".baxis.title",placeholder:e(L,"Click to enter Component B title"),attributes:{x:this.x0-X,y:this.y0+this.h+.83*O.title.font.size+X,"text-anchor":"middle"}});Q["c-title"]=E.draw(L,"c"+P,{propContainer:U,propName:this.id+".caxis.title",placeholder:e(L,"Click to enter Component C title"),attributes:{x:this.x0+this.w+X,y:this.y0+this.h+.83*U.title.font.size+X,"text-anchor":"middle"}})}};b.drawAx=function(H){var L=this.graphDiv,P=H._name,Q=
P.charAt(0),S=H._id;P=this.layers[P];var O=Q+"tickLayout",U=H.ticks+String(H.ticklen)+String(H.showticklabels);this[O]!==U&&(P.selectAll("."+S+"tick").remove(),this[O]=U);H.setScale();S=q.calcTicks(H);O=q.clipEnds(H,S);U=q.makeTransFn(H);var X=q.getTickSigns(H)[2],da=d.deg2rad(30),ea=X*(H.linewidth||1)/2;X*=H.ticklen;var ca=this.w,ia=this.h;ca={a:"M0,0l"+ia+",-"+ca/2,b:"M0,0l-"+ca/2+",-"+ia,c:"M0,0l-"+ia+","+ca/2}[Q];q.drawTicks(L,H,{vals:"inside"===H.ticks?O:S,layer:P,path:"b"===Q?"M0,"+ea+"l"+Math.sin(da)*
X+","+Math.cos(da)*X:"M"+ea+",0l"+Math.cos(da)*X+","+-Math.sin(da)*X,transFn:U,crisp:!1});q.drawGrid(L,H,{vals:O,layer:this.layers[Q+"grid"],path:ca,transFn:U,crisp:!1});q.drawLabels(L,H,{vals:S,layer:P,transFn:U,labelFns:q.makeLabelFns(H,0,30)})};y=v.MINZOOM/2+.87;var I="m-0.87,.5h"+y+"v3h-"+(y+5.2)+"l"+(y/2+2.6)+",-"+(.87*y+4.5)+"l2.6,1.5l-"+y/2+","+.87*y+"Z",J="m0.87,.5h-"+y+"v3h"+(y+5.2)+"l-"+(y/2+2.6)+",-"+(.87*y+4.5)+"l-2.6,1.5l"+y/2+","+.87*y+"Z",K="m0,1l"+y/2+","+.87*y+"l2.6,-1.5l-"+(y/2+
2.6)+",-"+(.87*y+4.5)+"l-"+(y/2+2.6)+","+(.87*y+4.5)+"l2.6,1.5l"+y/2+",-"+.87*y+"Z",N=!0;b.clearSelect=function(){C(this.dragOptions);B(this.dragOptions.gd)};b.initInteractions=function(){function H(ma){var pa={};pa[U.id+".aaxis.min"]=ma.a;pa[U.id+".baxis.min"]=ma.b;pa[U.id+".caxis.min"]=ma.c;return pa}function L(ma,pa){var za=da._fullLayout.clickmode;m(da);2===ma&&(da.emit("plotly_doubleclick",null),a.call("_guiRelayout",da,H({a:0,b:0,c:0})));-1<za.indexOf("select")&&1===ma&&z(pa,da,[U.xaxis],[U.yaxis],
U.id,U.dragOptions);-1<za.indexOf("event")&&u.click(da,pa,U.id)}function P(ma,pa){var za=ca+ma,qa=ia+pa;pa=Math.max(0,Math.min(1,1-ia/U.h,1-qa/U.h));ma=Math.max(0,Math.min(1,1-(ca+(U.h-ia)/Math.sqrt(3))/U.w,1-(za+(U.h-qa)/Math.sqrt(3))/U.w));za=Math.max(0,Math.min(1,(ca-(U.h-ia)/Math.sqrt(3))/U.w,(za-(U.h-qa)/Math.sqrt(3))/U.w));qa=(pa/2+za)*U.w;var Ca=(1-pa/2-ma)*U.w,Ka=(qa+Ca)/2,Oa=Ca-qa,kb=(1-pa)*U.h,mb=kb-Oa/G;Oa<v.MINZOOM?(na=ha,oa.attr("d",ua),va.attr("d","M0,0Z")):(na={a:ha.a+pa*fa,b:ha.b+
ma*fa,c:ha.c+za*fa},oa.attr("d",ua+"M"+qa+","+kb+"H"+Ca+"L"+Ka+","+mb+"L"+qa+","+kb+"Z"),va.attr("d","M"+ca+","+ia+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+qa+","+kb+I+"M"+Ca+","+kb+J+"M"+Ka+","+mb+K));ta||(oa.transition().style("fill",.2<sa?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),va.transition().style("opacity",1).duration(200),ta=!0);da.emit("plotly_relayouting",H(na))}function Q(){m(da);na!==ha&&(a.call("_guiRelayout",da,H(na)),N&&da.data&&da._context.showTips&&(d.notifier(e(da,
"Double-click to zoom back out"),"long"),N=!1))}function S(ma,pa){var za=ma/U.xaxis._m,qa=pa/U.yaxis._m;na={a:ha.a-qa,b:ha.b+(za+qa)/2,c:ha.c-(za-qa)/2};za=[na.a,na.b,na.c].sort(d.sorterAsc);qa=za.indexOf(na.a);var Ca=za.indexOf(na.b),Ka=za.indexOf(na.c);0>za[0]&&(0>za[1]+za[0]/2?(za[2]+=za[0]+za[1],za[0]=za[1]=0):(za[2]+=za[0]/2,za[1]+=za[0]/2,za[0]=0),na={a:za[qa],b:za[Ca],c:za[Ka]},pa=(ha.a-na.a)*U.yaxis._m,ma=(ha.c-na.c-ha.b+na.b)*U.xaxis._m);za="translate("+(U.x0+ma)+","+(U.y0+pa)+")";U.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",
za);ma="translate("+-ma+","+-pa+")";U.clipDefRelative.select("path").attr("transform",ma);U.aaxis.range=[na.a,U.sum-na.b-na.c];U.baxis.range=[U.sum-na.a-na.c,na.b];U.caxis.range=[U.sum-na.a-na.b,na.c];U.drawAxes(!1);U._hasClipOnAxisFalse&&U.plotContainer.select(".scatterlayer").selectAll(".trace").call(k.hideOutsideRangePoints,U);da.emit("plotly_relayouting",H(na))}function O(){a.call("_guiRelayout",da,H(na))}var U=this,X=U.layers.plotbg.select("path").node(),da=U.graphDiv,ea=da._fullLayout._zoomlayer;
this.dragOptions={element:X,gd:da,plotinfo:{id:U.id,domain:da._fullLayout[U.id].domain,xaxis:U.xaxis,yaxis:U.yaxis},subplot:U.id,prepFn:function(ma,pa,za){U.dragOptions.xaxes=[U.xaxis];U.dragOptions.yaxes=[U.yaxis];var qa=U.dragOptions.dragmode=da._fullLayout.dragmode;w(qa)?U.dragOptions.minDrag=1:U.dragOptions.minDrag=void 0;"zoom"===qa?(U.dragOptions.moveFn=P,U.dragOptions.clickFn=L,U.dragOptions.doneFn=Q,ma=X.getBoundingClientRect(),ca=pa-ma.left,ia=za-ma.top,na=ha={a:U.aaxis.range[0],b:U.baxis.range[1],
c:U.caxis.range[1]},fa=U.aaxis.range[1]-ha.a,sa=h(U.graphDiv._fullLayout[U.id].bgcolor).getLuminance(),ua="M0,"+U.h+"L"+U.w/2+", 0L"+U.w+","+U.h+"Z",ta=!1,oa=ea.append("path").attr("class","zoombox").attr("transform","translate("+U.x0+", "+U.y0+")").style({fill:.2<sa?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ua),va=ea.append("path").attr("class","zoombox-corners").attr("transform","translate("+U.x0+", "+U.y0+")").style({fill:l.background,stroke:l.defaultLine,"stroke-width":1,
opacity:0}).attr("d","M0,0Z"),U.clearSelect(da)):"pan"===qa?(U.dragOptions.moveFn=S,U.dragOptions.clickFn=L,U.dragOptions.doneFn=O,na=ha={a:U.aaxis.range[0],b:U.baxis.range[1],c:U.caxis.range[1]},U.clearSelect(da)):(x(qa)||w(qa))&&F(ma,pa,za,U.dragOptions,qa)}};var ca,ia,ha,fa,na,sa,ua,ta,oa,va;X.onmousemove=function(ma){u.hover(da,ma,U.id);da._fullLayout._lasthover=X;da._fullLayout._hoversubplot=U.id};X.onmouseout=function(ma){da._dragging||t.unhover(da,ma)};t.init(this.dragOptions)}},{"../../components/color":615,
"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/drawing":637,"../../components/fx":655,"../../components/titles":710,"../../lib":749,"../../lib/extend":739,"../../registry":880,"../cartesian/axes":797,"../cartesian/constants":803,"../cartesian/select":816,"../cartesian/set_convert":817,"../plots":860,d3:169,tinycolor2:548}],880:[function(b,y,D){function n(u){if(u.layoutAttributes&&(u=u.layoutAttributes._arrayAttrRegexps))for(var w=0;w<u.length;w++)l(D.layoutArrayRegexes,
u[w])}function m(u,w){(u=D.componentsRegistry[u].schema)&&u.traces&&(u=u.traces[w])&&t(D.modules[w]._module.attributes,u)}function p(u,w){(u=D.componentsRegistry[u].schema)&&u.transforms&&(u=u.transforms[w])&&t(D.transformsRegistry[w].attributes,u)}function h(u,w){if((u=D.componentsRegistry[u].schema)&&u.subplots){var x=D.subplotsRegistry[w];w=x.layoutAttributes;x="subplot"===x.attr?x.name:x.attr;Array.isArray(x)&&(x=x[0]);u=u.subplots[x];w&&u&&t(w,u)}}function a(u){"object"===typeof u&&(u=u.type);
return u}var d=b("./lib/loggers"),e=b("./lib/noop"),l=b("./lib/push_unique"),k=b("./lib/is_plain_object"),c=b("./lib/dom").addStyleRule;y=b("./lib/extend");var f=b("./plots/attributes"),g=b("./plots/layout_attributes"),q=y.extendFlat,t=y.extendDeepAll;D.modules={};D.allCategories={};D.allTypes=[];D.subplotsRegistry={};D.transformsRegistry={};D.componentsRegistry={};D.layoutArrayContainers=[];D.layoutArrayRegexes=[];D.traceLayoutAttributes={};D.localeRegistry={};D.apiMethodRegistry={};D.collectableSubplotTypes=
null;D.register=function(u){D.collectableSubplotTypes=null;if(u)u&&!Array.isArray(u)&&(u=[u]);else throw Error("No argument passed to Plotly.register.");for(var w=0;w<u.length;w++){var x=u[w];if(!x)throw Error("Invalid module was attempted to be registered!");switch(x.moduleType){case "trace":var E=void 0,F=void 0,z=x.name,B=x.categories,C=x.meta;if(D.modules[z])d.log("Type "+z+" already registered");else{if(!D.subplotsRegistry[x.basePlotModule.name]){var v=void 0,G=x.basePlotModule,I=G.name;if(D.subplotsRegistry[I])d.log("Plot type "+
I+" already registered.");else for(v in n(G),D.subplotsRegistry[I]=G,D.componentsRegistry)h(v,G.name)}v={};for(G=0;G<B.length;G++)v[B[G]]=!0,D.allCategories[B[G]]=!0;D.modules[z]={_module:x,categories:v};C&&Object.keys(C).length&&(D.modules[z].meta=C);D.allTypes.push(z);for(F in D.componentsRegistry)m(F,z);x.layoutAttributes&&q(D.traceLayoutAttributes,x.layoutAttributes);x=x.basePlotModule;F=x.name;if("mapbox"===F)for(E in x=x.constants.styleRules,x)c(".js-plotly-plot .plotly .mapboxgl-"+E,x[E]);
"geo"!==F&&"mapbox"!==F||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}break;case "transform":E=void 0;F=x;if("string"!==typeof F.name)throw Error("Transform module *name* must be a string.");x="Transform module "+F.name;z="function"===typeof F.transform;B="function"===typeof F.calcTransform;if(!z&&!B)throw Error(x+" is missing a *transform* or *calcTransform* method.");z&&B&&d.log([x+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed before all *calcTransform* methods."].join(" "));
k(F.attributes)||d.log(x+" registered without an *attributes* object.");"function"!==typeof F.supplyDefaults&&d.log(x+" registered without a *supplyDefaults* method.");D.transformsRegistry[F.name]=F;for(E in D.componentsRegistry)p(E,F.name);break;case "component":z=F=E=void 0;if("string"!==typeof x.name)throw Error("Component module *name* must be a string.");B=x.name;D.componentsRegistry[B]=x;x.layoutAttributes&&(x.layoutAttributes._isLinkedToArray&&l(D.layoutArrayContainers,B),n(x));for(z in D.modules)m(B,
z);for(F in D.subplotsRegistry)h(B,F);for(E in D.transformsRegistry)p(B,E);x.schema&&x.schema.layout&&t(g,x.schema.layout);break;case "locale":z=x;x=z.name;E=x.split("-")[0];F=z.dictionary;z=z.format;B=F&&Object.keys(F).length;C=z&&Object.keys(z).length;v=D.localeRegistry;(G=v[x])||(v[x]=G={});E!==x&&((x=v[E])||(v[E]=x={}),B&&x.dictionary===G.dictionary&&(x.dictionary=F),C&&x.format===G.format&&(x.format=z));B&&(G.dictionary=F);C&&(G.format=z);break;case "apiMethod":D.apiMethodRegistry[x.name]=x.fn;
break;default:throw Error("Invalid module was attempted to be registered!");}}};D.getModule=function(u){return(u=D.modules[a(u)])?u._module:!1};D.traceIs=function(u,w){u=a(u);if("various"===u)return!1;var x=D.modules[u];x||(u&&"area"!==u&&d.log("Unrecognized trace type "+u+"."),x=D.modules[f.type.dflt]);return!!x.categories[w]};D.getTransformIndices=function(u,w){var x=[];u=u.transforms||[];for(var E=0;E<u.length;E++)u[E].type===w&&x.push(E);return x};D.hasTransform=function(u,w){u=u.transforms||
[];for(var x=0;x<u.length;x++)if(u[x].type===w)return!0;return!1};D.getComponentMethod=function(u,w){return(u=D.componentsRegistry[u])?u[w]||e:e};D.call=function(){var u=arguments[0],w=[].slice.call(arguments,1);return D.apiMethodRegistry[u].apply(null,w)}},{"./lib/dom":737,"./lib/extend":739,"./lib/is_plain_object":750,"./lib/loggers":753,"./lib/noop":758,"./lib/push_unique":763,"./plots/attributes":794,"./plots/layout_attributes":851}],881:[function(b,y,D){function n(a){switch(a){case "themes__thumb":a=
{autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case "thumbnail":a={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:a={}}return a}var m=b("../registry");b=b("../lib");var p=b.extendFlat,h=b.extendDeep;y.exports=function(a,d){a.framework&&a.framework.isPolar&&(a=a.framework.getConfig());var e,l=a.layout,k=h([],a.data);l=h({},l,n(d.tileClass));a=
a._context||{};d.width&&(l.width=d.width);d.height&&(l.height=d.height);if("thumbnail"===d.tileClass||"themes__thumb"===d.tileClass){l.annotations=[];var c=Object.keys(l);for(e=0;e<c.length;e++)-1<["xaxis","yaxis","zaxis"].indexOf(c[e].slice(0,5))&&(l[c[e]].title={text:""});for(e=0;e<k.length;e++)c=k[e],c.showscale=!1,c.marker&&(c.marker.showscale=!1),m.traceIs(c,"pie-like")&&(c.textposition="none")}if(Array.isArray(d.annotations))for(e=0;e<d.annotations.length;e++)l.annotations.push(d.annotations[e]);
c=Object.keys(l).filter(function(q){return q.match(/^scene\d*$/)});if(c.length){var f={};"thumbnail"===d.tileClass&&(f={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1});for(e=0;e<c.length;e++){var g=l[c[e]];g.xaxis||(g.xaxis={});g.yaxis||(g.yaxis={});g.zaxis||(g.zaxis={});p(g.xaxis,f);p(g.yaxis,f);p(g.zaxis,f);g._scene=null}}e=document.createElement("div");d.tileClass&&(e.className=d.tileClass);k={gd:e,td:e,layout:l,data:k,config:{staticPlot:void 0===d.staticPlot?!0:d.staticPlot,
plotGlPixelRatio:void 0===d.plotGlPixelRatio?2:d.plotGlPixelRatio,displaylogo:d.displaylogo||!1,showLink:d.showLink||!1,showTips:d.showTips||!1,mapboxAccessToken:a.mapboxAccessToken}};"transparent"!==d.setBackground&&(k.config.setBackground=d.setBackground||"opaque");k.gd.defaultLayout=n(d.tileClass);return k}},{"../lib":749,"../registry":880}],882:[function(b,y,D){var n=b("../lib"),m=b("../plot_api/to_image"),p=b("./filesaver"),h=b("./helpers");y.exports=function(a,d){var e;n.isPlainObject(a)||(e=
n.getGraphDiv(a));d=d||{};d.format=d.format||"png";d.imageDataOnly=!0;return new Promise(function(l,k){e&&e._snapshotInProgress&&k(Error("Snapshotting already in progress."));n.isIE()&&"svg"!==d.format&&k(Error(h.MSG_IE_BAD_FORMAT));e&&(e._snapshotInProgress=!0);var c=m(a,d),f=d.filename||a.fn||"newplot";f+="."+d.format.replace("-",".");c.then(function(g){e&&(e._snapshotInProgress=!1);return p(g,f,d.format)}).then(function(g){l(g)}).catch(function(g){e&&(e._snapshotInProgress=!1);k(g)})})}},{"../lib":749,
"../plot_api/to_image":790,"./filesaver":883,"./helpers":884}],883:[function(b,y,D){var n=b("../lib"),m=b("./helpers");y.exports=function(p,h,a){var d=document.createElement("a"),e="download"in d;return new Promise(function(l,k){n.isIE9orBelow()&&k(Error("IE \x3c 10 unsupported"));if(n.isSafari())return m.octetStream(("svg"===a?",":";base64,")+encodeURIComponent(p)),l(h);if(n.isIE())return k=m.createBlob(p,"svg"),window.navigator.msSaveBlob(k,h),l(h);if(e)return k=m.createBlob(p,a),k=m.createObjectURL(k),
d.href=k,d.download=h,document.body.appendChild(d),d.click(),document.body.removeChild(d),m.revokeObjectURL(k),l(h);k(Error("download error"))})}},{"../lib":749,"./helpers":884}],884:[function(b,y,D){var n=b("../registry");D.getDelay=function(p){return p._has?p._has("gl3d")||p._has("gl2d")||p._has("mapbox")?500:0:0};D.getRedrawFunc=function(p){return function(){var h=p._fullLayout||{};(h._has&&h._has("polar")||!p.data||!p.data[0]||!p.data[0].r)&&n.getComponentMethod("colorbar","draw")(p)}};D.encodeSVG=
function(p){return"data:image/svg+xml,"+encodeURIComponent(p)};D.encodeJSON=function(p){return"data:application/json,"+encodeURIComponent(p)};var m=window.URL||window.webkitURL;D.createObjectURL=function(p){return m.createObjectURL(p)};D.revokeObjectURL=function(p){return m.revokeObjectURL(p)};D.createBlob=function(p,h){if("svg"===h)return new window.Blob([p],{type:"image/svg+xml;charset\x3dutf-8"});if("full-json"===h)return new window.Blob([p],{type:"application/json;charset\x3dutf-8"});p=window.atob(p);
for(var a=p.length,d=new ArrayBuffer(a),e=new Uint8Array(d),l=0;l<a;l++)e[l]=p.charCodeAt(l);return new window.Blob([d],{type:"image/"+h})};D.octetStream=function(p){document.location.href="data:application/octet-stream"+p};D.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;D.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":880}],885:[function(b,y,D){D=b("./helpers");b={getDelay:D.getDelay,getRedrawFunc:D.getRedrawFunc,clone:b("./cloneplot"),
toSVG:b("./tosvg"),svgToImg:b("./svgtoimg"),toImage:b("./toimage"),downloadImage:b("./download")};y.exports=b},{"./cloneplot":881,"./download":882,"./helpers":884,"./svgtoimg":886,"./toimage":887,"./tosvg":888}],886:[function(b,y,D){var n=b("../lib"),m=b("events").EventEmitter,p=b("./helpers");y.exports=function(h){var a=h.emitter||new m,d=new Promise(function(e,l){var k=window.Image,c=h.svg,f=h.format||"png";if(n.isIE()&&"svg"!==f)return k=Error(p.MSG_IE_BAD_FORMAT),l(k),h.promise?d:a.emit("error",
k);var g=h.canvas,q=h.scale||1,t=q*(h.width||300),u=q*(h.height||150),w=g.getContext("2d"),x=new k;if("svg"===f||n.isIE9orBelow()||n.isSafari())var E=p.encodeSVG(c);else{var F=p.createBlob(c,"svg");E=p.createObjectURL(F)}g.width=t;g.height=u;x.onload=function(){F=null;p.revokeObjectURL(E);"svg"!==f&&w.drawImage(x,0,0,t,u);switch(f){case "jpeg":var z=g.toDataURL("image/jpeg");break;case "png":z=g.toDataURL("image/png");break;case "webp":z=g.toDataURL("image/webp");break;case "svg":z=E;break;default:if(l(Error("Image format is not jpeg, png, svg or webp.")),
!h.promise)return a.emit("error","Image format is not jpeg, png, svg or webp.")}e(z);h.promise||a.emit("success",z)};x.onerror=function(z){F=null;p.revokeObjectURL(E);l(z);if(!h.promise)return a.emit("error",z)};x.src=E});return h.promise?d:a}},{"../lib":749,"./helpers":884,events:110}],887:[function(b,y,D){var n=b("events").EventEmitter,m=b("../registry"),p=b("../lib"),h=b("./helpers"),a=b("./cloneplot"),d=b("./tosvg"),e=b("./svgtoimg");y.exports=function(l,k){var c=new n;l=a(l,{format:"png"});var f=
l.gd;f.style.position="absolute";f.style.left="-5000px";document.body.appendChild(f);var g=h.getRedrawFunc(f);m.call("plot",f,l.data,l.layout,l.config).then(g).then(function(){var q=h.getDelay(f._fullLayout);setTimeout(function(){var t=d(f),u=document.createElement("canvas");u.id=p.randstr();c=e({format:k.format,width:f._fullLayout.width,height:f._fullLayout.height,canvas:u,emitter:c,svg:t});c.clean=function(){f&&document.body.removeChild(f)}},q)}).catch(function(q){c.emit("error",q)});return c}},
{"../lib":749,"../registry":880,"./cloneplot":881,"./helpers":884,"./svgtoimg":886,"./tosvg":888,events:110}],888:[function(b,y,D){function n(k){var c=m.select("body").append("div").style({display:"none"}).html("");k=k.replace(/(&[^;]*;)/gi,function(f){return"\x26lt;"===f?"\x26#60;":"\x26rt;"===f?"\x26#62;":-1!==f.indexOf("\x3c")||-1!==f.indexOf("\x3e")?"":c.html(f).text()});c.remove();return k}var m=b("d3"),p=b("../lib"),h=b("../components/drawing"),a=b("../components/color"),d=b("../constants/xmlns_namespaces"),
e=/"/g,l=/("TOBESTRIPPED)|(TOBESTRIPPED")/g;y.exports=function(k,c,f){var g=k._fullLayout,q=g._paper,t=g._toppaper,u=g.width,w=g.height,x;q.insert("rect",":first-child").call(h.setRect,0,0,u,w).call(a.fill,g.paper_bgcolor);var E=g._basePlotModules||[];for(x=0;x<E.length;x++){var F=E[x];F.toSVG&&F.toSVG(k)}if(t)for(x=t.node().childNodes,k=Array.prototype.slice.call(x),x=0;x<k.length;x++)t=k[x],t.childNodes.length&&q.node().appendChild(t);g._draggers&&g._draggers.remove();q.node().style.background=
"";q.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var B=m.select(this);if("hidden"===this.style.visibility||"none"===this.style.display)B.remove();else{B.style({visibility:null,display:null});var C=this.style.fontFamily;C&&-1!==C.indexOf('"')&&B.style("font-family",C.replace(e,"TOBESTRIPPED"))}});if(g._gradientUrlQueryParts){x=[];for(var z in g._gradientUrlQueryParts)x.push(z);x.length&&q.selectAll(x.join(",")).each(function(){var B=m.select(this),C=this.style.fill;
C&&-1!==C.indexOf("url(")&&B.style("fill",C.replace(e,"TOBESTRIPPED"));(C=this.style.stroke)&&-1!==C.indexOf("url(")&&B.style("stroke",C.replace(e,"TOBESTRIPPED"))})}"pdf"!==c&&"eps"!==c||q.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0);q.node().setAttributeNS(d.xmlns,"xmlns",d.svg);q.node().setAttributeNS(d.xmlns,"xmlns:xlink",d.xlink);"svg"===c&&f&&(q.attr("width",f*u),q.attr("height",f*w),q.attr("viewBox","0 0 "+u+" "+w));c=(new window.XMLSerializer).serializeToString(q.node());c=
n(c);c=c.replace(/&(?!\w+;|#[0-9]+;| #x[0-9A-F]+;)/g,"\x26amp;");c=c.replace(l,"'");p.isIE()&&(c=c.replace(/"/gi,"'"),c=c.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),c=c.replace(/(\\')/gi,'"'));return c}},{"../components/color":615,"../components/drawing":637,"../constants/xmlns_namespaces":725,"../lib":749,d3:169}],889:[function(b,y,D){var n=b("../../lib");y.exports=function(m,p){for(var h=0;h<m.length;h++)m[h].i=h;n.mergeArray(p.text,m,"tx");n.mergeArray(p.hovertext,m,"htx");if(p=p.marker)if(n.mergeArray(p.opacity,
m,"mo",!0),n.mergeArray(p.color,m,"mc"),p=p.line)n.mergeArray(p.color,m,"mlc"),n.mergeArrayCastPositive(p.width,m,"mlw")}},{"../../lib":749}],890:[function(b,y,D){D=b("../scatter/attributes");var n=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../plots/template_attributes").texttemplateAttrs,p=b("../../components/colorscale/attributes"),h=b("../../plots/font_attributes"),a=b("./constants");b=b("../../lib/extend").extendFlat;h=h({editType:"calc",arrayOk:!0,colorEditType:"style"});
var d=b({},D.marker.line.width,{dflt:0});d=b({width:d,editType:"calc"},p("marker.line"));p=b({line:d,editType:"calc"},p("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});y.exports={x:D.x,x0:D.x0,dx:D.dx,y:D.y,y0:D.y0,dy:D.dy,text:D.text,texttemplate:m({editType:"plot"},{keys:a.eventDataKeys}),hovertext:D.hovertext,hovertemplate:n({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},
insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:b({},h,{}),insidetextfont:b({},h,{}),outsidetextfont:b({},h,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:b({},D.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},
offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:p,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:D.selected.marker.opacity,color:D.selected.marker.color,editType:"style"},textfont:D.selected.textfont,editType:"style"},unselected:{marker:{opacity:D.unselected.marker.opacity,color:D.unselected.marker.color,editType:"style"},
textfont:D.unselected.textfont,editType:"style"},r:D.r,t:D.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/font_attributes":825,"../../plots/template_attributes":875,"../scatter/attributes":1155,"./constants":892}],891:[function(b,y,D){var n=b("../../plots/cartesian/axes"),m=b("../../components/colorscale/helpers").hasColorscale,p=b("../../components/colorscale/calc"),h=b("./arrays_to_calcdata"),
a=b("../scatter/calc_selection");y.exports=function(d,e){var l=n.getFromId(d,e.xaxis||"x"),k=n.getFromId(d,e.yaxis||"y");var c={msUTC:!(!e.base&&0!==e.base)};"h"===e.orientation?(c=l.makeCalcdata(e,"x",c),l=k.makeCalcdata(e,"y")):(c=k.makeCalcdata(e,"y",c),l=l.makeCalcdata(e,"x"));k=Math.min(l.length,c.length);for(var f=Array(k),g=0;g<k;g++)f[g]={p:l[g],s:c[g]},e.ids&&(f[g].id=String(e.ids[g]));m(e,"marker")&&p(d,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"});m(e,"marker.line")&&p(d,e,
{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"});h(f,e);a(f,e);return f}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../plots/cartesian/axes":797,"../scatter/calc_selection":1157,"./arrays_to_calcdata":889}],892:[function(b,y,D){y.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],893:[function(b,y,D){function n(F,z,B,C,v){if(C.length){var G;m(B,C);switch(v.mode){case "overlay":p(z,B,C,v);break;case "group":var I=[];var J=[];for(G=
0;G<C.length;G++){var K=C[G];var N=K[0].trace;void 0===N.offset?J.push(K):I.push(K)}if(J.length){J=new E(J,{sepNegVal:!1,overlapNoMerge:!v.norm});var H=F._fullLayout;F=J.minDiff;G=J.traces;K=G.length;N=J.positions.length!==J.distinctPositions.length;var L=F*(1-v.gap),P=x(H,z._id)+G[0][0].trace.orientation;H=H._alignmentOpts[P]||{};for(P=0;P<K;P++){var Q=G[P],S=Q[0].trace,O=Object.keys((H[S.alignmentgroup]||{}).offsetGroups||{}).length;var U=O?L/O:N?L/K:L;var X=U*(1-(v.groupgap||0));S=O?((2*S._offsetIndex+
1-O)*U-X)/2:N?((2*P+1-K)*U-X)/2:-X/2;Q=Q[0].t;Q.barwidth=X;Q.poffset=S;Q.bargroupwidth=L;Q.bardelta=F}J.binWidth=G[0][0].t.barwidth/100;a(J);d(z,J);e(z,J,N);F=J.traces;for(G=0;G<F.length;G++)if(K=F[G],void 0===K[0].trace.base)for(N=new E([K],{sepNegVal:!0,overlapNoMerge:!0}),L=0;L<K.length;L++)if(H=K[L],H.p!==t&&(P=N.put(H.p,H.b+H.s)))H.b=P;v.norm?(k(J),c(B,J,v)):l(B,J)}I.length&&p(z,B,I,v);break;case "stack":case "relative":I=[];J=[];for(G=0;G<C.length;G++)K=C[G],N=K[0].trace,void 0===N.base?J.push(K):
I.push(K);if(J.length){F=new E(J,{sepNegVal:"relative"===v.mode,overlapNoMerge:!(v.norm||"stack"===v.mode||"relative"===v.mode)});h(z,F,v);G=B._id.charAt(0);K=F.traces;for(P=0;P<K.length;P++)if(N=K[P],L=N[0].trace,"funnel"===L.type)for(X=0;X<N.length;X++)Q=N[X],Q.s!==t&&F.put(Q.p,-.5*Q.s);for(P=0;P<K.length;P++){N=K[P];L=N[0].trace;H="funnel"===L.type;S=[];for(X=0;X<N.length;X++)Q=N[X],Q.s!==t&&(U=H?Q.s:Q.s+Q.b,O=F.put(Q.p,U),U=O+U,Q.b=O,Q[G]=U,v.norm||(S.push(U),Q.hasB&&S.push(O)));v.norm||(L._extremes[B._id]=
w.findExtremes(B,S,{tozero:!0,padded:!0}))}for(G=0;G<J.length;G++)for(K=J[G],N=0;N<K.length;N++)L=K[N],L.s!==t&&L.b+L.s===F.get(L.p,L.s)&&(L._outmost=!0);v.norm&&c(B,F,v)}I.length&&p(z,B,I,v)}f(C,z)}}function m(F,z){var B;for(B=0;B<z.length;B++){var C=z[B];var v=C[0].trace;var G="funnel"===v.type?v._base:v.base,I="h"===v.orientation?v.xcalendar:v.ycalendar,J="category"===F.type||"multicategory"===F.type?function(){return null}:F.d2c;if(q(G)){for(v=0;v<Math.min(G.length,C.length);v++){var K=J(G[v],
0,I);g(K)?(C[v].b=+K,C[v].hasB=1):C[v].b=0}for(;v<C.length;v++)C[v].b=0}else for(K=J(G,0,I),K=(G=g(K))?K:0,v=0;v<C.length;v++)C[v].b=K,G&&(C[v].hasB=1)}}function p(F,z,B,C){for(var v=0;v<B.length;v++){var G=new E([B[v]],{unitMinDiff:C.xCat||C.yCat,sepNegVal:!1,overlapNoMerge:!C.norm});h(F,G,C);C.norm?(k(G),c(z,G,C)):l(z,G)}}function h(F,z,B){var C=z.minDiff,v=z.traces,G=C*(1-B.gap);B=G*(1-(B.groupgap||0));for(var I=-B/2,J=0;J<v.length;J++){var K=v[J][0].t;K.barwidth=B;K.poffset=I;K.bargroupwidth=
G;K.bardelta=C}z.binWidth=v[0][0].t.barwidth/100;a(z);d(F,z);e(F,z)}function a(F){F=F.traces;var z,B;for(z=0;z<F.length;z++){var C=F[z],v=C[0],G=v.trace;v=v.t;var I=G._offset||G.offset,J=v.poffset;if(q(I)){var K=Array.prototype.slice.call(I,0,C.length);for(B=0;B<K.length;B++)g(K[B])||(K[B]=J);for(B=K.length;B<C.length;B++)K.push(J);v.poffset=K}else void 0!==I&&(v.poffset=I);B=G._width||G.width;G=v.barwidth;if(q(B)){var N=Array.prototype.slice.call(B,0,C.length);for(B=0;B<N.length;B++)g(N[B])||(N[B]=
G);for(B=N.length;B<C.length;B++)N.push(G);v.barwidth=N;if(void 0===I){K=[];for(B=0;B<C.length;B++)K.push(J+(G-N[B])/2);v.poffset=K}}else void 0!==B&&(v.barwidth=B,void 0===I&&(v.poffset=J+(G-B)/2))}}function d(F,z){z=z.traces;F=F._id.charAt(0);for(var B=0;B<z.length;B++){var C=z[B],v=C[0].t,G=v.poffset,I=Array.isArray(G);v=v.barwidth;for(var J=Array.isArray(v),K=0;K<C.length;K++){var N=C[K],H=N.w=J?v[K]:v;N[F]=N.p+(I?G[K]:G)+H/2}}}function e(F,z,B){var C=z.traces,v=z.minDiff/2;w.minDtick(F,z.minDiff,
z.distinctPositions[0],B);for(z=0;z<C.length;z++){B=C[z];var G=B[0],I=G.trace,J=[],K;for(K=0;K<B.length;K++){var N=B[K];var H=N.p-v;N=N.p+v;J.push(H,N)}if(I.width||I.offset){H=G.t;G=H.poffset;var L=H.barwidth,P=Array.isArray(G),Q=Array.isArray(L);for(K=0;K<B.length;K++){N=B[K];var S=Q?L[K]:L;H=N.p+(P?G[K]:G);N=H+S;J.push(H,N)}}I._extremes[F._id]=w.findExtremes(F,J,{padded:!1})}}function l(F,z){z=z.traces;for(var B=F._id.charAt(0),C=0;C<z.length;C++){for(var v=z[C],G=v[0].trace,I=[],J=!1,K=0;K<v.length;K++){var N=
v[K],H=N.b,L=H+N.s;N[B]=L;I.push(L);N.hasB&&I.push(H);N.hasB&&N.b||(J=!0)}G._extremes[F._id]=w.findExtremes(F,I,{tozero:J,padded:!0})}}function k(F){for(var z=F.traces,B=0;B<z.length;B++)for(var C=z[B],v=0;v<C.length;v++){var G=C[v];G.s!==t&&F.put(G.p,G.b+G.s)}}function c(F,z,B){function C(ea){return g(F.c2l(ea))&&(ea<K-J||ea>N+J||!g(K))}var v=z.traces,G=F._id.charAt(0),I="fraction"===B.norm?1:100,J=I/1E9,K=F.l2c(F.c2l(0)),N="stack"===B.mode?I:K;for(B=0;B<v.length;B++){for(var H=v[B],L=H[0].trace,
P=[],Q=!1,S=!1,O=0;O<H.length;O++){var U=H[O];if(U.s!==t){var X=Math.abs(I/z.get(U.p,U.s));U.b*=X;U.s*=X;X=U.b;var da=X+U.s;U[G]=da;P.push(da);S=S||C(da);U.hasB&&(P.push(X),S=S||C(X));U.hasB&&U.b||(Q=!0)}}L._extremes[F._id]=w.findExtremes(F,P,{tozero:Q,padded:S})}}function f(F,z){z=z._id.charAt(0);var B={},C,v,G=Infinity,I=-Infinity;for(C=0;C<F.length;C++){var J=F[C];for(v=0;v<J.length;v++){var K=J[v].p;g(K)&&(G=Math.min(G,K),I=Math.max(I,K))}}var N=1E4/(I-G);I=B.round=function(O){return String(Math.round(N*
(O-G)))};for(C=0;C<F.length;C++){J=F[C];J[0].t.extents=B;K=J[0].t.poffset;var H=Array.isArray(K);for(v=0;v<J.length;v++){var L=J[v],P=L[z]-L.w/2;if(g(P)){var Q=L[z]+L.w/2,S=I(L.p);B[S]=B[S]?[Math.min(P,B[S][0]),Math.max(Q,B[S][1])]:[P,Q]}L.p0=L.p+(H?K[v]:K);L.p1=L.p0+L.w;L.s0=L.b;L.s1=L.s0+L.s}}}var g=b("fast-isnumeric"),q=b("../../lib").isArrayOrTypedArray,t=b("../../constants/numerical").BADNUM,u=b("../../registry"),w=b("../../plots/cartesian/axes"),x=b("../../plots/cartesian/axis_ids").getAxisGroup,
E=b("./sieve.js");y.exports={crossTraceCalc:function(F,z){var B=z.xaxis;z=z.yaxis;for(var C=F._fullLayout,v=F._fullData,G=F.calcdata,I=[],J=[],K=0;K<v.length;K++){var N=v[K];if(!0===N.visible&&u.traceIs(N,"bar")&&N.xaxis===B._id&&N.yaxis===z._id&&("h"===N.orientation?I.push(G[K]):J.push(G[K]),N._computePh)){N=F.calcdata[K];for(var H=0;H<N.length;H++)"function"===typeof N[H].ph0&&(N[H].ph0=N[H].ph0()),"function"===typeof N[H].ph1&&(N[H].ph1=N[H].ph1())}}C={xCat:"category"===B.type||"multicategory"===
B.type,yCat:"category"===z.type||"multicategory"===z.type,mode:C.barmode,norm:C.barnorm,gap:C.bargap,groupgap:C.bargroupgap};n(F,B,z,J,C);n(F,z,B,I,C)},setGroupPositions:n}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_ids":800,"../../registry":880,"./sieve.js":903,"fast-isnumeric":241}],894:[function(b,y,D){function n(f,g,q,t){f=g.orientation;f=l(q,g[{v:"x",h:"y"}[f]+"axis"])+f;var u=q._alignmentOpts||{};q=t("alignmentgroup");var w=
u[f];w||(w=u[f]={});(f=w[q])?f.traces.push(g):f=w[q]={traces:[g],alignmentIndex:Object.keys(w).length,offsetGroups:{}};t=t("offsetgroup");f=f.offsetGroups;q=f[t];t&&(q||(q=f[t]={offsetIndex:Object.keys(f).length}),g._offsetIndex=q.offsetIndex)}function m(f,g,q,t,u,w){w=w||{};g=!1!==w.moduleHasSelected;var x=!1!==w.moduleHasUnselected,E=!1!==w.moduleHasConstrain,F=!1!==w.moduleHasCliponaxis,z=!1!==w.moduleHasTextangle,B=!1!==w.moduleHasInsideanchor,C=!!w.hasPathbar,v=Array.isArray(u)||"auto"===u;w=
v||"inside"===u;u=v||"outside"===u;if(w||u)q=c(t,"textfont",q.font),v=p.extendFlat({},q),(f=!(f.textfont&&f.textfont.color))&&delete v.color,c(t,"insidetextfont",v),C&&(C=p.extendFlat({},q),f&&delete C.color,c(t,"pathbar.textfont",C)),u&&c(t,"outsidetextfont",q),g&&t("selected.textfont.color"),x&&t("unselected.textfont.color"),E&&t("constraintext"),F&&t("cliponaxis"),z&&t("textangle"),t("texttemplate");w&&B&&t("insidetextanchor")}var p=b("../../lib"),h=b("../../components/color"),a=b("../../registry"),
d=b("../scatter/xy_defaults"),e=b("./style_defaults"),l=b("../../plots/cartesian/axis_ids").getAxisGroup,k=b("./attributes"),c=p.coerceFont;y.exports={supplyDefaults:function(f,g,q,t){function u(x,E){return p.coerce(f,g,k,x,E)}if(d(f,g,t,u)){u("orientation",g.x&&!g.y?"h":"v");u("base");u("offset");u("width");u("text");u("hovertext");u("hovertemplate");var w=u("textposition");m(f,g,t,u,w,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,
moduleHasInsideanchor:!0});e(f,g,u,q,t);q=(g.marker.line||{}).color;t=a.getComponentMethod("errorbars","supplyDefaults");t(f,g,q||h.defaultLine,{axis:"y"});t(f,g,q||h.defaultLine,{axis:"x",inherit:"y"});p.coerceSelectionMarkerOpacity(g,u)}else g.visible=!1},crossTraceDefaults:function(f,g){function q(x){return p.coerce(u._input,u,k,x)}if("group"===g.barmode)for(var t=0;t<f.length;t++){var u=f[t];if("bar"===u.type){var w=u._input;n(w,u,g,q)}}},handleGroupingDefaults:n,handleText:m}},{"../../components/color":615,
"../../lib":749,"../../plots/cartesian/axis_ids":800,"../../registry":880,"../scatter/xy_defaults":1181,"./attributes":890,"./style_defaults":905}],895:[function(b,y,D){y.exports=function(n,m,p){n.x="xVal"in m?m.xVal:m.x;n.y="yVal"in m?m.yVal:m.y;m.xa&&(n.xaxis=m.xa);m.ya&&(n.yaxis=m.ya);"h"===p.orientation?(n.label=n.y,n.value=n.x):(n.label=n.x,n.value=n.y);return n}},{}],896:[function(b,y,D){var n=b("fast-isnumeric"),m=b("tinycolor2"),p=b("../../lib").isArrayOrTypedArray;D.coerceString=function(h,
a,d){if("string"===typeof a){if(a||!h.noBlank)return a}else if(("number"===typeof a||!0===a)&&!h.strict)return String(a);return void 0!==d?d:h.dflt};D.coerceNumber=function(h,a,d){if(n(a)){a=+a;var e=h.min,l=h.max;if(!(void 0!==e&&a<e||void 0!==l&&a>l))return a}return void 0!==d?d:h.dflt};D.coerceColor=function(h,a,d){return m(a).isValid()?a:void 0!==d?d:h.dflt};D.coerceEnumerated=function(h,a,d){h.coerceNumber&&(a=+a);return-1!==h.values.indexOf(a)?a:void 0!==d?d:h.dflt};D.getValue=function(h,a){var d;
Array.isArray(h)?a<h.length&&(d=h[a]):d=h;return d};D.getLineWidth=function(h,a){return 0<a.mlw?a.mlw:p(h.marker.line.width)?0:h.marker.line.width}},{"../../lib":749,"fast-isnumeric":241,tinycolor2:548}],897:[function(b,y,D){function n(c,f,g,q){function t(O){return O[H]-O.w/2}function u(O){return O[H]+O.w/2}function w(O,U){return p.inbox(O-K,U-K,G+Math.min(1,Math.abs(U-O)/S)-1)}function x(O){return w(I(O),J(O))}function E(O){var U=N,X=O.b,da=O[L];v&&(O=Math.abs(O.rawS)||0,0<U?da+=O:0>U&&(da-=O));
return p.inbox(X-U,da-U,G+(da-U)/(da-X)-1)}var F=c.cd,z=F[0].trace,B=F[0].t,C="closest"===q,v="waterfall"===z.type,G=c.maxHoverDistance,I=C?t:function(O){return Math.min(t(O),O.p-B.bardelta/2)},J=C?u:function(O){return Math.max(u(O),O.p+B.bardelta/2)};if("h"===z.orientation){var K=g;var N=f;var H="y";var L="x";var P=E;var Q=x}else K=f,N=g,H="x",L="y",Q=E,P=x;f=c[H+"a"];g=c[L+"a"];var S=Math.abs(f.r2c(f.range[1])-f.r2c(f.range[0]));q=p.getDistanceFunction(q,P,Q,function(O){return(P(O)+Q(O))/2});p.getClosest(F,
q,c);if(!1!==c.index&&F[c.index].p!==k)return C||(I=function(O){return Math.min(t(O),O.p-B.bargroupwidth/2)},J=function(O){return Math.max(u(O),O.p+B.bargroupwidth/2)}),F=F[c.index],q=z.base?F.b+F.s:F.s,c[L+"0"]=c[L+"1"]=g.c2p(F[L],!0),c[L+"LabelVal"]=q,q=B.extents[B.extents.round(F.p)],c[H+"0"]=f.c2p(C?I(F):q[0],!0),c[H+"1"]=f.c2p(C?J(F):q[1],!0),c[H+"LabelVal"]=F.p,c.labelLabel=l(f,c[H+"LabelVal"]),c.valueLabel=l(g,c[L+"LabelVal"]),c.spikeDistance=(E(F)+function(O){return w(t(O),u(O))}(F))/2-G,
c[H+"Spike"]=f.c2p(F.p,!0),d(F,z,c),c.hovertemplate=z.hovertemplate,c}function m(c,f){var g=f.mcc||c.marker.color,q=f.mlcc||c.marker.line.color;c=e(c,f);if(a.opacity(g))return g;if(a.opacity(q)&&c)return q}var p=b("../../components/fx"),h=b("../../registry"),a=b("../../components/color"),d=b("../../lib").fillText,e=b("./helpers").getLineWidth,l=b("../../plots/cartesian/axes").hoverLabelText,k=b("../../constants/numerical").BADNUM;y.exports={hoverPoints:function(c,f,g,q){if(c=n(c,f,g,q))return g=c.cd,
f=g[0].trace,g=g[c.index],c.color=m(f,g),h.getComponentMethod("errorbars","hoverInfo")(g,f,c),[c]},hoverOnBars:n,getTraceColor:m}},{"../../components/color":615,"../../components/fx":655,"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"./helpers":896}],898:[function(b,y,D){y.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,
supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,colorbar:b("../scatter/marker_colorbar"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"bar",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar oriented errorBarsOK showLegend zoomScale".split(" "),
animatable:!0,meta:{}}},{"../../plots/cartesian":810,"../scatter/marker_colorbar":1173,"./arrays_to_calcdata":889,"./attributes":890,"./calc":891,"./cross_trace_calc":893,"./defaults":894,"./event_data":895,"./hover":897,"./layout_attributes":899,"./layout_defaults":900,"./plot":901,"./select":902,"./style":904}],899:[function(b,y,D){y.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction",
"percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],900:[function(b,y,D){var n=b("../../registry"),m=b("../../plots/cartesian/axes"),p=b("../../lib"),h=b("./layout_attributes");y.exports=function(a,d,e){for(var l=!1,k=!1,c=!1,f={},g=p.coerce(a,d,h,"barmode",void 0),q=0;q<e.length;q++){var t=e[q];if(n.traceIs(t,"bar")&&t.visible){l=!0;if("group"===g){var u=t.xaxis+t.yaxis;f[u]&&(c=!0);f[u]=
!0}t.visible&&"histogram"===t.type&&"category"!==m.getFromId({_fullLayout:d},t["v"===t.orientation?"xaxis":"yaxis"]).type&&(k=!0)}}l?("overlay"!==g&&p.coerce(a,d,h,"barnorm",void 0),p.coerce(a,d,h,"bargap",k&&!c?0:.2),p.coerce(a,d,h,"bargroupgap",void 0)):delete d.barmode}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"./layout_attributes":899}],901:[function(b,y,D){function n(H){return H.id}function m(H,L,P,Q){var S=[],O=[],U=Q?L:P;L=Q?P:L;S[0]=U.c2p(H.s0,!0);O[0]=L.c2p(H.p0,
!0);S[1]=U.c2p(H.s1,!0);O[1]=L.c2p(H.p1,!0);return Q?[S,O]:[O,S]}function p(H,L,P,Q){if(!L.uniformtext.mode&&P&&0<P.duration){var S;Q&&(S=Q());return H.transition().duration(P.duration).ease(P.easing).each("end",function(){S&&S()}).each("interrupt",function(){S&&S()})}return H}function h(H,L,P,Q,S,O,U,X,da,ea,ca){function ia(Ca,Ka,Oa){return t.ensureSingle(Ca,"text").text(Ka).attr({"class":"bartext bartext-"+ta,"text-anchor":"middle","data-notex":1}).call(x.font,Oa).call(u.convertToTspans,H)}var ha=
L.xaxis,fa=L.yaxis;L=H._fullLayout;var na=Q[0].trace,sa="h"===na.orientation,ua=l(L,Q,S,ha,fa);var ta=k(na,S);var oa=Q[S],va=!("stack"===ea.mode||"relative"===ea.mode)||oa._outmost;if(ua&&"none"!==ta&&(!oa.isBlank&&O!==U&&X!==da||"auto"!==ta&&"inside"!==ta)){var ma=L.font;Q=C.getBarColor(Q[S],na);Q=C.getInsideTextFont(na,S,ma,Q);S=C.getOutsideTextFont(na,S,ma);ma=P.datum();sa?"log"===ha.type&&0>=ma.s0&&(O=ha.range[0]<ha.range[1]?0:ha._length):"log"===fa.type&&0>=ma.s0&&(X=fa.range[0]<fa.range[1]?
fa._length:0);ha=Math.abs(U-O)-2*N;fa=Math.abs(da-X)-2*N;"outside"===ta&&(va||oa.hasB||(ta="inside"));if("auto"===ta)if(va){ta="inside";var pa=t.ensureUniformFontSize(H,Q);var za=ia(P,ua,pa);var qa=x.bBox(za.node());va=qa.width;ma=qa.height;0<va&&0<ma&&(va<=ha&&ma<=fa||va<=fa&&ma<=ha||(sa?ha>=fa/ma*va:fa>=ha/va*ma))?ta="inside":(ta="outside",za.remove(),za=null)}else ta="inside";if(!za&&(pa=t.ensureUniformFontSize(H,"outside"===ta?S:Q),za=ia(P,ua,pa),P=za.attr("transform"),za.attr("transform",""),
qa=x.bBox(za.node()),va=qa.width,ma=qa.height,za.attr("transform",P),0>=va||0>=ma)){za.remove();return}P=na.textangle;"outside"===ta?(ua="both"===na.constraintext||"outside"===na.constraintext,O=e(O,U,X,da,qa,{isHorizontal:sa,constrained:ua,angle:P})):(ua="both"===na.constraintext||"inside"===na.constraintext,O=d(O,U,X,da,qa,{isHorizontal:sa,constrained:ua,angle:P,anchor:na.insidetextanchor}));O.fontSize=pa.size;z(na.type,O,L);oa.transform=O;p(za,L,ea,ca).attr("transform",t.getTextTransform(O))}else P.select("text").remove()}
function a(H,L){var P=Math.PI/180*L;L=Math.abs(Math.sin(P));P=Math.abs(Math.cos(P));return{x:H.width*P+H.height*L,y:H.width*L+H.height*P}}function d(H,L,P,Q,S,O){var U=!!O.isHorizontal,X=!!O.constrained,da=O.angle||0,ea=O.anchor||"end",ca="end"===ea;ea="start"===ea;var ia=((O.leftToRight||0)+1)/2,ha=1-ia,fa=S.width,na=S.height,sa=Math.abs(L-H),ua=Math.abs(Q-P);O=sa>2*N&&ua>2*N?N:0;sa-=2*O;ua-=2*O;var ta="auto"===da?0:da;"auto"!==da||fa<=sa&&na<=ua||!(fa>sa||na>ua)||(fa>ua||na>sa)&&fa<na===sa<ua||
(ta+=90);fa=a(S,ta);da=1;X&&(da=Math.min(1,sa/fa.x,ua/fa.y));X=S.left*ha+S.right*ia;S=(S.top+S.bottom)/2;ia=(H+N)*ha+(L-N)*ia;ha=(P+Q)/2;ua=sa=0;if(ea||ca)ca=(U?fa.x:fa.y)/2,fa=U?H<L?1:-1:P<Q?1:-1,U?ea?(ia=H+fa*O,sa=-fa*ca):(ia=L-fa*O,sa=fa*ca):ea?(ha=P+fa*O,ua=-fa*ca):(ha=Q-fa*O,ua=fa*ca);return{textX:X,textY:S,targetX:ia,targetY:ha,anchorX:sa,anchorY:ua,scale:da,rotate:ta}}function e(H,L,P,Q,S,O){var U=!!O.isHorizontal,X=!!O.constrained,da=O.angle||0,ea=S.width,ca=S.height,ia=Math.abs(L-H),ha=Math.abs(Q-
P);O=U?ha>2*N?N:0:ia>2*N?N:0;var fa=1;X&&(fa=U?Math.min(1,ha/ca):Math.min(1,ia/ea));X="auto"===da?0:da;da=a(S,X);da=(U?da.x:da.y)/2;ea=(S.left+S.right)/2;S=(S.top+S.bottom)/2;ca=(H+L)/2;ia=(P+Q)/2;var na=ha=0;H=U?L<H?1:-1:P<Q?1:-1;U?(ca=L-H*O,ha=H*da):(ia=Q+H*O,na=-H*da);return{textX:ea,textY:S,targetX:ca,targetY:ia,anchorX:ha,anchorY:na,scale:fa,rotate:X}}function l(H,L,P,Q,S){var O=L[0].trace;H=O.texttemplate?c(H,L,P,Q,S):O.textinfo?f(L,P,Q,S):v.getValue(O.text,P);return v.coerceString(I,H)}function k(H,
L){H=v.getValue(H.textposition,L);return v.coerceEnumerated(J,H)}function c(H,L,P,Q,S){function O(na){return F(fa,+na,!0).text}var U=L[0].trace,X=t.castOption(U,P,"texttemplate");if(!X)return"";var da="waterfall"===U.type,ea="funnel"===U.type;if("h"===U.orientation){var ca="y";var ia=S;var ha="x";var fa=Q}else ca="x",ia=Q,ha="y",fa=S;P=L[P];L={};L.label=P.p;L.labelLabel=L[ca+"Label"]=F(ia,P.p,!0).text;ca=t.castOption(U,P.i,"text");if(0===ca||ca)L.text=ca;L.value=P.s;L.valueLabel=L[ha+"Label"]=O(P.s);
ha={};K(ha,U,P.i);da&&(L.delta=+P.rawS||P.s,L.deltaLabel=O(L.delta),L.final=P.v,L.finalLabel=O(L.final),L.initial=L.final-L.delta,L.initialLabel=O(L.initial));ea&&(L.value=P.s,L.valueLabel=O(L.value),L.percentInitial=P.begR,L.percentInitialLabel=t.formatPercent(P.begR),L.percentPrevious=P.difR,L.percentPreviousLabel=t.formatPercent(P.difR),L.percentTotal=P.sumR,L.percenTotalLabel=t.formatPercent(P.sumR));if(da=t.castOption(U,P.i,"customdata"))L.customdata=da;return t.texttemplateString(X,L,H._d3locale,
ha,L,U._meta||{})}function f(H,L,P,Q){function S(fa){return F(U?P:Q,+fa,!0).text}var O=H[0].trace,U="h"===O.orientation,X="waterfall"===O.type,da="funnel"===O.type,ea=H[L],ca=O.textinfo.split("+"),ia=[],ha=function(fa){return-1!==ca.indexOf(fa)};ha("label")&&ia.push(F(U?Q:P,H[L].p,!0).text);ha("text")&&(H=t.castOption(O,ea.i,"text"),(0===H||H)&&ia.push(H));X&&(X=+ea.rawS||ea.s,H=ea.v,L=H-X,ha("initial")&&ia.push(S(L)),ha("delta")&&ia.push(S(X)),ha("final")&&ia.push(S(H)));da&&(ha("value")&&ia.push(S(ea.s)),
da=0,ha("percent initial")&&da++,ha("percent previous")&&da++,ha("percent total")&&da++,da=1<da,ha("percent initial")&&(H=t.formatPercent(ea.begR),da&&(H+=" of initial"),ia.push(H)),ha("percent previous")&&(H=t.formatPercent(ea.difR),da&&(H+=" of previous"),ia.push(H)),ha("percent total")&&(H=t.formatPercent(ea.sumR),da&&(H+=" of total"),ia.push(H)));return ia.join("\x3cbr\x3e")}var g=b("d3"),q=b("fast-isnumeric"),t=b("../../lib"),u=b("../../lib/svg_text_utils"),w=b("../../components/color"),x=b("../../components/drawing"),
E=b("../../registry"),F=b("../../plots/cartesian/axes").tickText;D=b("./uniform_text");var z=D.recordMinTextSize,B=D.clearMinTextSize,C=b("./style"),v=b("./helpers");D=b("./constants");var G=b("./attributes"),I=G.text,J=G.textposition,K=b("../../components/fx/helpers").appendArrayPointValue,N=D.TEXTPAD;y.exports={plot:function(H,L,P,Q,S,O){var U=L.xaxis,X=L.yaxis,da=H._fullLayout;S||(S={mode:da.barmode,norm:da.barmode,gap:da.bargap,groupgap:da.bargroupgap},B("bar",da));P=t.makeTraceGroups(Q,P,"trace bars").each(function(ea){var ca=
g.select(this),ia=ea[0].trace,ha="funnel"===ia.type,fa="bar"===ia.type||ha,na=0;"waterfall"===ia.type&&ia.connector.visible&&"between"===ia.connector.mode&&(na=ia.connector.line.width/2);var sa="h"===ia.orientation,ua=S&&0<S.duration;ha=t.ensureSingle(ca,"g","points");var ta=ia.ids?n:void 0;ha=ha.selectAll("g.point").data(t.identity,ta);ha.enter().append("g").classed("point",!0);ha.exit().remove();ha.each(function(oa,va){function ma(nb){var Ta=g.round(tb/2%1,2);return 0===S.gap&&0===S.groupgap?g.round(Math.round(nb)-
Ta,2):nb}function pa(nb,Ta,fb){return fb&&nb===Ta?nb:2<=Math.abs(nb-Ta)?ma(nb):nb>Ta?Math.ceil(nb):Math.floor(nb)}var za=g.select(this),qa=m(oa,U,X,sa),Ca=qa[0][0],Ka=qa[0][1],Oa=qa[1][0];qa=qa[1][1];var kb=0===(sa?Ka-Ca:qa-Oa);kb&&fa&&v.getLineWidth(ia,oa)&&(kb=!1);kb||(kb=!q(Ca)||!q(Ka)||!q(Oa)||!q(qa));(oa.isBlank=kb)&&(sa?Ka=Ca:qa=Oa);na&&!kb&&(sa?(Ca-=(Ca<Ka?1:-1)*na,Ka+=(Ca<Ka?1:-1)*na):(Oa-=(Oa<qa?1:-1)*na,qa+=(Oa<qa?1:-1)*na));if("waterfall"===ia.type){if(!kb){var mb=ia[oa.dir].marker;var tb=
mb.line.width;mb=mb.color}}else tb=v.getLineWidth(ia,oa),mb=oa.mc||ia.marker.color;H._context.staticPlot||(mb=1>w.opacity(mb)||.01<tb?ma:pa,Ca=mb(Ca,Ka,sa),Ka=mb(Ka,Ca,sa),Oa=mb(Oa,qa,!sa),qa=mb(qa,Oa,!sa));mb=p(t.ensureSingle(za,"path"),da,S,O);mb.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ka-Ca)*(qa-Oa))?"M0,0Z":"M"+Ca+","+Oa+"V"+qa+"H"+Ka+"V"+Oa+"Z").call(x.setClipUrl,L.layerClipId,H);!da.uniformtext.mode&&ua&&(kb=x.makePointStyleFns(ia),x.singlePointStyle(oa,mb,ia,kb,H));h(H,
L,za,ea,va,Ca,Ka,Oa,qa,S,O);L.layerClipId&&x.hideOutsideRangePoint(oa,za.select("text"),U,X,ia.xcalendar,ia.ycalendar)});x.setClipUrl(ca,!1===ia.cliponaxis?null:L.layerClipId,H)});E.getComponentMethod("errorbars","plot")(H,P,L,S)},toMoveInsideBar:d}},{"../../components/color":615,"../../components/drawing":637,"../../components/fx/helpers":651,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../registry":880,"./attributes":890,"./constants":892,"./helpers":896,"./style":904,
"./uniform_text":906,d3:169,"fast-isnumeric":241}],902:[function(b,y,D){y.exports=function(n,m){var p=n.cd,h=n.xaxis,a=n.yaxis,d=p[0].trace,e="funnel"===d.type;d="h"===d.orientation;var l=[],k;if(!1===m)for(k=0;k<p.length;k++)p[k].selected=0;else for(k=0;k<p.length;k++){var c=p[k];if("ct"in c)var f=c.ct;else{var g=c,q=h,t=a;f=d;var u=e,w=q.c2p(f?g.s0:g.p0,!0);q=q.c2p(f?g.s1:g.p1,!0);var x=t.c2p(f?g.p0:g.s0,!0);g=t.c2p(f?g.p1:g.s1,!0);f=u?[(w+q)/2,(x+g)/2]:f?[q,(x+g)/2]:[(w+q)/2,g]}m.contains(f,!1,
k,n)?(l.push({pointNumber:k,x:h.c2d(c.x),y:a.c2d(c.y)}),c.selected=1):c.selected=0}return l}},{}],903:[function(b,y,D){function n(h,a){this.traces=h;this.sepNegVal=a.sepNegVal;this.overlapNoMerge=a.overlapNoMerge;for(var d=Infinity,e=[],l=0;l<h.length;l++){for(var k=h[l],c=0;c<k.length;c++){var f=k[c];f.p!==p&&e.push(f.p)}k[0]&&k[0].width1&&(d=Math.min(k[0].width1,d))}this.positions=e;h=m(e,{unitMinDiff:a.unitMinDiff});this.distinctPositions=h.vals;this.binWidth=this.minDiff=1===h.vals.length&&Infinity!==
d?d:Math.min(h.minDiff,d);this.bins={}}y.exports=n;var m=b("../../lib").distinctVals,p=b("../../constants/numerical").BADNUM;n.prototype.put=function(h,a){h=this.getLabel(h,a);var d=this.bins[h]||0;this.bins[h]=d+a;return d};n.prototype.get=function(h,a){h=this.getLabel(h,a);return this.bins[h]||0};n.prototype.getLabel=function(h,a){return(0>a&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?h:Math.round(h/this.binWidth))}},{"../../constants/numerical":724,"../../lib":749}],904:[function(b,y,D){function n(E,
F,z){E.selectAll("text").each(function(B){var C=l.select(this);B=f.ensureUniformFontSize(z,p(C,B,F,z));c.font(C,B)})}function m(E,F,z){E.each(function(B){var C=l.select(this);if(B.selected){B=f.ensureUniformFontSize(z,p(C,B,F,z));var v=F.selected.textfont&&F.selected.textfont.color;v&&(B.color=v);c.font(C,B)}else c.selectedTextStyle(C,F)})}function p(E,F,z,B){B=B._fullLayout.font;var C=z.textfont;E.classed("bartext-inside")?(E=e(F,z),C=h(z,F.i,B,E)):E.classed("bartext-outside")&&(C=a(z,F.i,B));return C}
function h(E,F,z,B){z=d(t,E.textfont,F,z);if(void 0===E._input.textfont||void 0===E._input.textfont.color||Array.isArray(E.textfont.color)&&void 0===E.textfont.color[F])z={color:k.contrast(B),family:z.family,size:z.size};return d(u,E.insidetextfont,F,z)}function a(E,F,z){z=d(t,E.textfont,F,z);return d(w,E.outsidetextfont,F,z)}function d(E,F,z,B){F=F||{};var C=x.getValue(F.family,z),v=x.getValue(F.size,z);F=x.getValue(F.color,z);return{family:x.coerceString(E.family,C,B.family),size:x.coerceNumber(E.size,
v,B.size),color:x.coerceColor(E.color,F,B.color)}}function e(E,F){return"waterfall"===F.type?F[E.dir].marker.color:E.mc||F.marker.color}var l=b("d3"),k=b("../../components/color"),c=b("../../components/drawing"),f=b("../../lib"),g=b("../../registry"),q=b("./uniform_text").resizeText;D=b("./attributes");var t=D.textfont,u=D.insidetextfont,w=D.outsidetextfont,x=b("./helpers");y.exports={style:function(E){var F=l.select(E).selectAll("g.barlayer").selectAll("g.trace");q(E,F,"bar");var z=F.size(),B=E._fullLayout;
F.style("opacity",function(C){return C[0].trace.opacity}).each(function(C){("stack"===B.barmode&&1<z||0===B.bargap&&0===B.bargroupgap&&!C[0].trace.marker.line.width)&&l.select(this).attr("shape-rendering","crispEdges")});F.selectAll("g.points").each(function(C){var v=l.select(this);C=C[0].trace;c.pointStyle(v.selectAll("path"),C,E);n(v,C,E)});g.getComponentMethod("errorbars","style")(F)},styleTextPoints:n,styleOnSelect:function(E,F,z){F=F[0].trace;F.selectedpoints?(c.selectedPointStyle(z.selectAll("path"),
F),m(z.selectAll("text"),F,E)):(c.pointStyle(z.selectAll("path"),F,E),n(z,F,E),g.getComponentMethod("errorbars","style")(z))},getInsideTextFont:h,getOutsideTextFont:a,getBarColor:e,resizeText:q}},{"../../components/color":615,"../../components/drawing":637,"../../lib":749,"../../registry":880,"./attributes":890,"./helpers":896,"./uniform_text":906,d3:169}],905:[function(b,y,D){var n=b("../../components/color"),m=b("../../components/colorscale/helpers").hasColorscale,p=b("../../components/colorscale/defaults");
y.exports=function(h,a,d,e,l){d("marker.color",e);m(h,"marker")&&p(h,a,l,d,{prefix:"marker.",cLetter:"c"});d("marker.line.color",n.defaultLine);m(h,"marker.line")&&p(h,a,l,d,{prefix:"marker.line.",cLetter:"c"});d("marker.line.width");d("marker.opacity");d("selected.marker.color");d("unselected.marker.color")}},{"../../components/color":615,"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626}],906:[function(b,y,D){var n=b("d3"),m=b("../../lib");y.exports={recordMinTextSize:function(p,
h,a){if(a.uniformtext.mode){p="_"+p+"Text_minsize";var d=a.uniformtext.minsize,e=h.scale*h.fontSize;h.hide=e<d;a[p]=a[p]||Infinity;h.hide||(a[p]=Math.min(a[p],Math.max(e,d)))}},clearMinTextSize:function(p,h){h["_"+p+"Text_minsize"]=void 0},resizeText:function(p,h,a){p=p._fullLayout;var d=p["_"+a+"Text_minsize"];if(d){var e="hide"===p.uniformtext.mode;switch(a){case "funnelarea":case "pie":case "sunburst":a="g.slice";break;case "treemap":a="g.slice, g.pathbar";break;default:a="g.points \x3e g.point"}h.selectAll(a).each(function(l){if(l=
l.transform)l.scale=e&&l.hide?0:d/l.fontSize,n.select(this).select("text").attr("transform",m.getTextTransform(l))})}}}},{"../../lib":749,d3:169}],907:[function(b,y,D){D=b("../../plots/template_attributes").hovertemplateAttrs;var n=b("../../lib/extend").extendFlat,m=b("../scatterpolar/attributes");b=b("../bar/attributes");y.exports={r:m.r,theta:m.theta,r0:m.r0,dr:m.dr,theta0:m.theta0,dtheta:m.dtheta,thetaunit:m.thetaunit,base:n({},b.base,{}),offset:n({},b.offset,{}),width:n({},b.width,{}),text:n({},
b.text,{}),hovertext:n({},b.hovertext,{}),marker:b.marker,hoverinfo:m.hoverinfo,hovertemplate:D(),selected:b.selected,unselected:b.unselected}},{"../../lib/extend":739,"../../plots/template_attributes":875,"../bar/attributes":890,"../scatterpolar/attributes":1228}],908:[function(b,y,D){var n=b("../../components/colorscale/helpers").hasColorscale,m=b("../../components/colorscale/calc"),p=b("../bar/arrays_to_calcdata"),h=b("../bar/cross_trace_calc").setGroupPositions,a=b("../scatter/calc_selection"),
d=b("../../registry").traceIs,e=b("../../lib").extendFlat;y.exports={calc:function(l,k){function c(x){var E=k[x];void 0!==E&&(k["_"+x]=Array.isArray(E)?q.makeCalcdata(k,x):q.d2c(E,k.thetaunit))}var f=l._fullLayout,g=k.subplot,q=f[g].angularaxis;f=f[g].radialaxis.makeCalcdata(k,"r");g=q.makeCalcdata(k,"theta");for(var t=k._length,u=Array(t),w=0;w<t;w++)u[w]={p:g[w],s:f[w]};"linear"===q.type&&(c("width"),c("offset"));n(k,"marker")&&m(l,k,{vals:k.marker.color,containerStr:"marker",cLetter:"c"});n(k,
"marker.line")&&m(l,k,{vals:k.marker.line.color,containerStr:"marker.line",cLetter:"c"});p(u,k);a(u,k);return u},crossTraceCalc:function(l,k,c){for(var f=l.calcdata,g=[],q=0;q<f.length;q++){var t=f[q],u=t[0].trace;!0===u.visible&&d(u,"bar")&&u.subplot===c&&g.push(t)}c=e({},k.radialaxis,{_id:"x"});h(l,k.angularaxis,c,g,{mode:k.barmode,norm:k.barnorm,gap:k.bargap,groupgap:k.bargroupgap})}}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../lib":749,"../../registry":880,
"../bar/arrays_to_calcdata":889,"../bar/cross_trace_calc":893,"../scatter/calc_selection":1157}],909:[function(b,y,D){var n=b("../../lib"),m=b("../scatterpolar/defaults").handleRThetaDefaults,p=b("../bar/style_defaults"),h=b("./attributes");y.exports=function(a,d,e,l){function k(c,f){return n.coerce(a,d,h,c,f)}m(a,d,l,k)?(k("thetaunit"),k("base"),k("offset"),k("width"),k("text"),k("hovertext"),k("hovertemplate"),p(a,d,k,e,l),n.coerceSelectionMarkerOpacity(d,k)):d.visible=!1}},{"../../lib":749,"../bar/style_defaults":905,
"../scatterpolar/defaults":1230,"./attributes":907}],910:[function(b,y,D){var n=b("../../components/fx"),m=b("../../lib"),p=b("../bar/hover").getTraceColor,h=m.fillText,a=b("../scatterpolar/hover").makeHoverPointText,d=b("../../plots/polar/helpers").isPtInsidePolygon;y.exports=function(e,l,k){var c=e.cd,f=c[0].trace,g=e.subplot,q=g.radialAxis,t=g.vangles,u=t?d:m.isPtInsideSector,w=e.maxHoverDistance,x=g.angularAxis._period||2*Math.PI,E=Math.abs(q.g2p(Math.sqrt(l*l+k*k))),F=Math.atan2(k,l);q.range[0]>
q.range[1]&&(F+=Math.PI);n.getClosest(c,function(z){return u(E,F,[z.rp0,z.rp1],[z.thetag0,z.thetag1],t)?w+Math.min(1,Math.abs(z.thetag1-z.thetag0)/x)-1+(z.rp1-E)/(z.rp1-z.rp0)-1:Infinity},e);if(!1!==e.index)return l=c[e.index],e.x0=e.x1=l.ct[0],e.y0=e.y1=l.ct[1],k=m.extendFlat({},l,{r:l.s,theta:l.p}),h(l,f,e),a(k,f,g,e),e.hovertemplate=f.hovertemplate,e.color=p(f,l),e.xLabelVal=e.yLabelVal=void 0,0>l.s&&(e.idealAlign="left"),[e]}},{"../../components/fx":655,"../../lib":749,"../../plots/polar/helpers":862,
"../bar/hover":897,"../scatterpolar/hover":1232}],911:[function(b,y,D){y.exports={moduleType:"trace",name:"barpolar",basePlotModule:b("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("../scatterpolar/format_labels"),
style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../bar/select"),meta:{}}},{"../../plots/polar":863,"../bar/select":902,"../bar/style":904,"../scatter/marker_colorbar":1173,"../scatterpolar/format_labels":1231,"./attributes":907,"./calc":908,"./defaults":909,"./hover":910,"./layout_attributes":912,"./layout_defaults":913,"./plot":914}],912:[function(b,y,D){y.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",
editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],913:[function(b,y,D){var n=b("../../lib"),m=b("./layout_attributes");y.exports=function(p,h,a){for(var d={},e,l=0;l<a.length;l++)e=a[l],"barpolar"===e.type&&!0===e.visible&&(e=e.subplot,d[e]||(n.coerce(p[e]||{},h[e],m,"barmode",void 0),n.coerce(p[e]||{},h[e],m,"bargap",void 0),d[e]=1))}},{"../../lib":749,"./layout_attributes":912}],914:[function(b,y,D){function n(e){var l=e.cxx,k=e.cyy;return e.vangles?function(c,
f,g,q){if(0<h.angleDelta(g,q)){var t=g;g=q}else t=q;q=d.findEnclosingVertexAngles(t,e.vangles)[0];var u=d.findEnclosingVertexAngles(g,e.vangles)[1];return d.pathPolygonAnnulus(c,f,t,g,[q,(t+g)/2,u],l,k)}:function(c,f,g,q){return h.pathAnnulus(c,f,g,q,l,k)}}var m=b("d3"),p=b("fast-isnumeric"),h=b("../../lib"),a=b("../../components/drawing"),d=b("../../plots/polar/helpers");y.exports=function(e,l,k){var c=l.xaxis,f=l.yaxis,g=l.radialAxis,q=l.angularAxis,t=n(l),u=l.layers.frontplot.select("g.barlayer");
h.makeTraceGroups(u,k,"trace bars").each(function(){var w=m.select(this),x=h.ensureSingle(w,"g","points").selectAll("g.point").data(h.identity);x.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0);x.exit().remove();x.each(function(E){var F=m.select(this),z=E.rp0=g.c2p(E.s0),B=E.rp1=g.c2p(E.s1),C=E.thetag0=q.c2g(E.p0),v=E.thetag1=q.c2g(E.p1);if(p(z)&&p(B)&&p(C)&&p(v)&&z!==B&&C!==v){var G=g.c2g(E.s1),I=(C+v)/2;E.ct=[c.c2p(G*Math.cos(I)),
f.c2p(G*Math.sin(I))];E=t(z,B,C,v)}else E="M0,0Z";h.ensureSingle(F,"path").attr("d",E)});a.setClipUrl(w,l._hasClipOnAxisFalse?l.clipIds.forTraces:null,e)})}},{"../../components/drawing":637,"../../lib":749,"../../plots/polar/helpers":862,d3:169,"fast-isnumeric":241}],915:[function(b,y,D){D=b("../scatter/attributes");var n=b("../bar/attributes"),m=b("../../components/color/attributes"),p=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../lib/extend").extendFlat;var h=D.marker,a=h.line;
y.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},
lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,
"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:b({},h.symbol,{arrayOk:!1,editType:"plot"}),opacity:b({},
h.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:b({},h.size,{arrayOk:!1,editType:"calc"}),color:b({},h.color,{arrayOk:!1,editType:"style"}),line:{color:b({},a.color,{arrayOk:!1,dflt:m.defaultLine,editType:"style"}),width:b({},a.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,
editType:"style"},editType:"plot"},fillcolor:D.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup,selected:{marker:D.selected.marker,editType:"style"},unselected:{marker:D.unselected.marker,editType:"style"},text:b({},D.text,{}),hovertext:b({},D.hovertext,{}),hovertemplate:p({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":614,"../../lib/extend":739,
"../../plots/template_attributes":875,"../bar/attributes":890,"../scatter/attributes":1155}],916:[function(b,y,D){function n(w,x,E,F){var z=x+"0"in w;if(x in w||z&&"d"+x in w)return E.makeCalcdata(w,x);F=z?w[x+"0"]:"name"in w&&("category"===E.type||c(w.name)&&-1!==["linear","log"].indexOf(E.type)||g.isDateTime(w.name)&&"date"===E.type)?w.name:F;x="multicategory"===E.type?E.r2c_just_indices(F):E.d2c(F,0,w[x+"calendar"]);w=w._length;E=Array(w);for(F=0;F<w;F++)E[F]=x;return E}function m(w,x){for(var E=
w.length,F=Array(E+1),z=0;z<E;z++)F[z]=w[z]-x;F[E]=w[E-1]+x;return F}function p(w){for(var x=Array(w),E=0;E<w;E++)x[E]=[];return x}function h(w,x,E){for(var F in u)g.isArrayOrTypedArray(x[F])&&(Array.isArray(E)?g.isArrayOrTypedArray(x[F][E[0]])&&(w[u[F]]=x[F][E[0]][E[1]]):w[u[F]]=x[F][E])}function a(w,x){if(g.isArrayOrTypedArray(x.selectedpoints))for(var E=0;E<w.length;E++){for(var F=w[E].pts||[],z={},B=0;B<F.length;B++)z[F[B].i]=B;g.tagSelected(F,x,z)}}function d(w,x){return w.v-x.v}function e(w){return w.v}
function l(w,x,E){return 0===E?w.q1:Math.min(w.q1,x[Math.min(g.findBin(2.5*w.q1-1.5*w.q3,x,!0)+1,E-1)])}function k(w,x,E){return 0===E?w.q3:Math.max(w.q3,x[Math.max(g.findBin(2.5*w.q3-1.5*w.q1,x),0)])}var c=b("fast-isnumeric"),f=b("../../plots/cartesian/axes"),g=b("../../lib"),q=b("../../constants/numerical").BADNUM,t=g._;y.exports=function(w,x){var E=w._fullLayout,F=f.getFromId(w,x.xaxis||"x"),z=f.getFromId(w,x.yaxis||"y"),B=[],C="violin"===x.type?"_numViolins":"_numBoxes",v,G;if("h"===x.orientation){var I=
F;var J="x";F="y"}else I=z,J="y",z=F,F="x";var K=n(x,F,z,E[C]);z=g.distinctVals(K);var N=z.vals;z=z.minDiff/2;var H="all"===(x.boxpoints||x.points)?g.identity:function(ha){return ha.v<O.lf||ha.v>O.uf};if(x._hasPreCompStats){var L=x[J],P=function(ha){return I.d2c((x[ha]||[])[v])};N=Infinity;var Q=-Infinity;for(v=0;v<x._length;v++){var S=K[v];if(c(S)){var O={};O.pos=O[F]=S;O.q1=P("q1");O.med=P("median");O.q3=P("q3");S=[];if(L&&g.isArrayOrTypedArray(L[v]))for(G=0;G<L[v].length;G++){var U=I.d2c(L[v][G]);
U!==q&&(U={v:U,i:[v,G]},h(U,x,[v,G]),S.push(U))}O.pts=S.sort(d);U=O[J]=S.map(e);G=U.length;if(O.med!==q&&O.q1!==q&&O.q3!==q&&O.med>=O.q1&&O.q3>=O.med){var X=P("lowerfence");O.lf=X!==q&&X<=O.q1?X:l(O,U,G);X=P("upperfence");O.uf=X!==q&&X>=O.q3?X:k(O,U,G);X=P("mean");O.mean=X!==q?X:G?g.mean(U,G):(O.q1+O.q3)/2;var da=P("sd");O.sd=X!==q&&0<=da?da:G?g.stdev(U,G,O.mean):O.q3-O.q1;O.lo=4*O.q1-3*O.q3;O.uo=4*O.q3-3*O.q1;X=P("notchspan");X=X!==q&&0<X?X:0===G?0:1.57*(O.q3-O.q1)/Math.sqrt(G);O.ln=O.med-X;O.un=
O.med+X;X=O.lf;da=O.uf;x.boxpoints&&U.length&&(X=Math.min(X,U[0]),da=Math.max(da,U[G-1]));x.notched&&(X=Math.min(X,O.ln),da=Math.max(da,O.un));O.min=X;O.max=da}else g.warn(["Invalid input - make sure that q1 \x3c\x3d median \x3c\x3d q3","q1 \x3d "+O.q1,"median \x3d "+O.med,"q3 \x3d "+O.q3].join("\n")),U=O.med!==q?O.med:O.q1!==q?O.q3!==q?(O.q1+O.q3)/2:O.q1:O.q3!==q?O.q3:0,O.med=U,O.q1=O.q3=U,O.lf=O.uf=U,O.mean=O.sd=U,O.ln=O.un=U,O.min=O.max=U;N=Math.min(N,O.min);Q=Math.max(Q,O.max);O.pts2=S.filter(H);
B.push(O)}}x._extremes[I._id]=f.findExtremes(I,[N,Q],{padded:!0})}else{Q=I.makeCalcdata(x,J);S=m(N,z);X=N.length;da=p(X);for(v=0;v<x._length;v++)U=Q[v],c(U)&&(G=g.findBin(K[v],S),0<=G&&G<X&&(U={v:U,i:v},h(U,x,v),da[G].push(U)));K=Infinity;var ea=-Infinity;S=x.quartilemethod;var ca="exclusive"===S,ia="inclusive"===S;for(v=0;v<X;v++)0<da[v].length&&(O={},O.pos=O[F]=N[v],S=O.pts=da[v].sort(d),U=O[J]=S.map(e),G=U.length,O.min=U[0],O.max=U[G-1],O.mean=g.mean(U,G),O.sd=g.stdev(U,G,O.mean),O.med=g.interp(U,
.5),G%2&&(ca||ia)?(ca?(L=U.slice(0,G/2),P=U.slice(G/2+1)):ia&&(L=U.slice(0,G/2+1),P=U.slice(G/2)),O.q1=g.interp(L,.5),O.q3=g.interp(P,.5)):(O.q1=g.interp(U,.25),O.q3=g.interp(U,.75)),O.lf=l(O,U,G),O.uf=k(O,U,G),O.lo=4*O.q1-3*O.q3,O.uo=4*O.q3-3*O.q1,U=0===G?0:1.57*(O.q3-O.q1)/Math.sqrt(G),O.ln=O.med-U,O.un=O.med+U,K=Math.min(K,O.ln),ea=Math.max(ea,O.un),O.pts2=S.filter(H),B.push(O));x._extremes[I._id]=f.findExtremes(I,x.notched?Q.concat([K,ea]):Q,{padded:!0})}a(B,x);return 0<B.length?(B[0].t={num:E[C],
dPos:z,posLetter:F,valLetter:J,labels:{med:t(w,"median:"),min:t(w,"min:"),q1:t(w,"q1:"),q3:t(w,"q3:"),max:t(w,"max:"),mean:"sd"===x.boxmean?t(w,"mean  :"):t(w,"mean:"),lf:t(w,"lower fence:"),uf:t(w,"upper fence:")}},E[C]++,B):[{t:{empty:!0}}]};var u={text:"tx",hovertext:"htx"}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"fast-isnumeric":241}],917:[function(b,y,D){function n(d,e,l,k){var c=e.calcdata;e=e._fullLayout;var f=k._id,g=f.charAt(0),q,t,u=[],w=0;for(q=
0;q<l.length;q++){var x=c[l[q]];for(t=0;t<x.length;t++)u.push(k.c2l(x[t].pos,!0)),w+=(x[t].pts2||[]).length}if(u.length){q=p.distinctVals(u,{unitMinDiff:"category"===k.type||"multicategory"===k.type});u=q.minDiff/2;m.minDtick(k,q.minDiff,q.vals[0],!0);var E=e["violin"===d?"_numViolins":"_numBoxes"],F="group"===e[d+"mode"]&&1<E,z=1-e[d+"gap"];d=1-e[d+"groupgap"];for(q=0;q<l.length;q++){x=c[l[q]];var B=x[0].trace,C=x[0].t;t=B.width;var v=B.side,G,I;if(t){var J=G=I=t/2;var K=0}else J=u,F?(G=h(e,k._id)+
B.orientation,I=(G=Object.keys(((e._alignmentOpts[G]||{})[B.alignmentgroup]||{}).offsetGroups||{}).length)||E,K=G?B._offsetIndex:C.num,G=J*z*d/I,K=2*J*(-.5+(K+.5)/I)*z,I=J*z/I):(G=J*z*d,K=0,I=J);C.dPos=J;C.bPos=K;C.bdPos=G;C.wHover=I;G=K+G;C=!!t;I=(B.boxpoints||B.points)&&0<w;if("positive"===v)v=J*(t?1:.5),t=K;else if("negative"===v){v=K;t=J*(t?1:.5);var N=G}else v=t=J,K=N=G;if(I){J=B.pointpos;I=B.jitter;var H=B.marker.size/2,L=0;if(0<=J+I)if(L=G*(J+I),L>v){C=!0;var P=H;var Q=L}else L>K&&(P=H,Q=v);
L<=v&&(Q=v);v=0;if(0>=J-I)if(v=-G*(J-I),v>t){C=!0;var S=H;var O=v}else v>N&&(S=H,O=t);v<=t&&(O=t)}else Q=v,O=t;J=Array(x.length);for(t=0;t<x.length;t++)J[t]=x[t].pos;B._extremes[f]=m.findExtremes(k,J,{padded:C,vpadminus:O,vpadplus:Q,vpadLinearized:!0,ppadminus:{x:S,y:P}[g],ppadplus:{x:P,y:S}[g]})}}}var m=b("../../plots/cartesian/axes"),p=b("../../lib"),h=b("../../plots/cartesian/axis_ids").getAxisGroup,a=["v","h"];y.exports={crossTraceCalc:function(d,e){var l=d.calcdata,k=e.xaxis;e=e.yaxis;for(var c=
0;c<a.length;c++){for(var f=a[c],g="h"===f?e:k,q=[],t=0;t<l.length;t++){var u=l[t],w=u[0].t;u=u[0].trace;!0!==u.visible||"box"!==u.type&&"candlestick"!==u.type||w.empty||(u.orientation||"v")!==f||u.xaxis!==k._id||u.yaxis!==e._id||q.push(t)}n("box",d,q,g)}},setPositionOffset:n}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_ids":800}],918:[function(b,y,D){function n(k,c,f,g){function q(G){var I=0;G&&G.length&&(I+=1,p.isArrayOrTypedArray(G[0])&&G[0].length&&(I+=1));return I}
function t(G){return p.validate(k[G],l[G])}var u=f("y"),w=f("x");if("box"===c.type){var x=f("q1"),E=f("median");var F=f("q3");c._hasPreCompStats=x&&x.length&&E&&E.length&&F&&F.length;F=Math.min(p.minRowLength(x),p.minRowLength(E),p.minRowLength(F))}x=q(u);E=q(w);var z=x&&p.minRowLength(u),B=E&&p.minRowLength(w);if(c._hasPreCompStats)switch(String(E)+String(x)){case "00":u=t("x0")||t("dx");var C=!t("y0")&&!t("dy")||u?"v":"h";var v=F;break;case "10":C="v";v=Math.min(F,B);break;case "20":C="h";v=Math.min(F,
w.length);break;case "01":C="h";v=Math.min(F,z);break;case "02":C="v";v=Math.min(F,u.length);break;case "12":C="v";v=Math.min(F,B,u.length);break;case "21":C="h";v=Math.min(F,w.length,z);break;case "11":v=0;break;case "22":C=!1;for(v=0;v<w.length;v++)if("category"===e(w[v])){C=!0;break}if(C)C="v",v=Math.min(F,B,u.length);else{for(v=0;v<u.length;v++)if("category"===e(u[v])){C=!0;break}C?(C="h",v=Math.min(F,w.length,z)):(C="v",v=Math.min(F,B,u.length))}}else 0<x?(C="v",v=0<E?Math.min(B,z):Math.min(z)):
0<E?(C="h",v=Math.min(B)):v=0;v?(c._length=v,u=f("orientation",C),c._hasPreCompStats?"v"===u&&0===E?(f("x0",0),f("dx",1)):"h"===u&&0===x&&(f("y0",0),f("dy",1)):"v"===u&&0===E?f("x0"):"h"===u&&0===x&&f("y0"),h.getComponentMethod("calendars","handleTraceDefaults")(k,c,["x","y"],g)):c.visible=!1}function m(k,c,f,g){g=g.prefix;k=p.coerce2(k,c,l,"marker.outliercolor");var q=f("marker.line.outliercolor"),t="outliers";if(c._hasPreCompStats)t="all";else if(k||q)t="suspectedoutliers";(g=f(g+"points",t))?(f("jitter",
"all"===g?.3:0),f("pointpos","all"===g?-1.5:0),f("marker.symbol"),f("marker.opacity"),f("marker.size"),f("marker.color",c.line.color),f("marker.line.color"),f("marker.line.width"),"suspectedoutliers"===g&&(f("marker.line.outliercolor",c.marker.color),f("marker.line.outlierwidth")),f("selected.marker.color"),f("unselected.marker.color"),f("selected.marker.size"),f("unselected.marker.size"),f("text"),f("hovertext")):delete c.marker;g=f("hoveron");"all"!==g&&-1===g.indexOf("points")||f("hovertemplate");
p.coerceSelectionMarkerOpacity(c,f)}var p=b("../../lib"),h=b("../../registry"),a=b("../../components/color"),d=b("../bar/defaults").handleGroupingDefaults,e=b("../../plots/cartesian/axis_autotype"),l=b("./attributes");y.exports={supplyDefaults:function(k,c,f,g){function q(w,x){return p.coerce(k,c,l,w,x)}n(k,c,q,g);if(!1!==c.visible){if(g=c._hasPreCompStats)q("lowerfence"),q("upperfence");q("line.color",(k.marker||{}).color||f);q("line.width");q("fillcolor",a.addOpacity(c.line.color,.5));f=!1;if(g){var t=
q("mean"),u=q("sd");t&&t.length&&(f=!0,u&&u.length&&(f="sd"))}q("boxmean",f);q("whiskerwidth");q("width");q("quartilemethod");f=!1;g?(g=q("notchspan"))&&g.length&&(f=!0):p.validate(k.notchwidth,l.notchwidth)&&(f=!0);q("notched",f)&&q("notchwidth");m(k,c,q,{prefix:"box"})}},crossTraceDefaults:function(k,c){function f(w){return p.coerce(q._input,q,l,w)}for(var g,q,t=0;t<k.length;t++){q=k[t];var u=q.type;if("box"===u||"violin"===u)g=q._input,"group"===c[u+"mode"]&&d(g,q,c,f)}},handleSampleDefaults:n,
handlePointsDefaults:m}},{"../../components/color":615,"../../lib":749,"../../plots/cartesian/axis_autotype":798,"../../registry":880,"../bar/defaults":894,"./attributes":915}],919:[function(b,y,D){y.exports=function(n,m){m.hoverOnBox&&(n.hoverOnBox=m.hoverOnBox);"xVal"in m&&(n.x=m.xVal);"yVal"in m&&(n.y=m.yVal);m.xa&&(n.xaxis=m.xa);m.ya&&(n.yaxis=m.ya);return n}},{}],920:[function(b,y,D){function n(l,k,c,f){function g(Q){return(N(Q)+H(Q))/2}var q=l.cd,t=l.xa,u=l.ya,w=q[0].trace,x=q[0].t,E="violin"===
w.type,F=[];var z=x.bdPos;var B=x.wHover,C=function(Q){return L.c2l(Q.pos)+x.bPos-L.c2l(K)};if(E&&"both"!==w.side){if("positive"===w.side){var v=function(Q){Q=C(Q);return a.inbox(Q,Q+B,P)};var G=z;var I=0}"negative"===w.side&&(v=function(Q){Q=C(Q);return a.inbox(Q-B,Q,P)},G=0,I=z)}else v=function(Q){Q=C(Q);return a.inbox(Q-B,Q+B,P)},G=I=z;E=E?function(Q){return a.inbox(Q.span[0]-J,Q.span[1]-J,P)}:function(Q){return a.inbox(Q.min-J,Q.max-J,P)};if("h"===w.orientation){var J=k;var K=c;var N=E;var H=
v;c="y";var L=u;k="x"}else J=c,K=k,N=v,H=E,c="x",L=t,k="y",t=u;z=Math.min(1,z/Math.abs(L.r2c(L.range[1])-L.r2c(L.range[0])));var P=l.maxHoverDistance-z;z=l.maxSpikeDistance-z;f=a.getDistanceFunction(f,N,H,g);a.getClosest(q,f,l);if(!1===l.index)return[];q=q[l.index];f=w.line.color;u=(w.marker||{}).color;d.opacity(f)&&w.line.width?l.color=f:d.opacity(u)&&w.boxpoints?l.color=u:l.color=w.fillcolor;l[c+"0"]=L.c2p(q.pos+x.bPos-I,!0);l[c+"1"]=L.c2p(q.pos+x.bPos+G,!0);l[c+"LabelVal"]=q.pos;G=c+"Spike";l.spikeDistance=
g(q)*z/P;l[G]=L.c2p(q.pos,!0);I={};f=["med","q1","q3","min","max"];(w.boxmean||(w.meanline||{}).visible)&&f.push("mean");(w.boxpoints||w.points)&&f.push("lf","uf");for(c=0;c<f.length;c++)z=f[c],z in q&&!(q[z]in I)&&(I[q[z]]=!0,u=q[z],v=t.c2p(u,!0),E=h.extendFlat({},l),E.attr=z,E[k+"0"]=E[k+"1"]=v,E[k+"LabelVal"]=u,E[k+"Label"]=(x.labels?x.labels[z]+" ":"")+p.hoverLabelText(t,u),E.hoverOnBox=!0,"mean"===z&&"sd"in q&&"sd"===w.boxmean&&(E[k+"err"]=q.sd),l.name="",l.spikeDistance=void 0,l[G]=void 0,E.hovertemplate=
!1,F.push(E));return F}function m(l,k,c){for(var f=l.cd,g=l.xa,q=l.ya,t=f[0].trace,u=g.c2p(k),w=q.c2p(c),x=a.quadrature(function(B){var C=Math.max(3,B.mrc||0);return Math.max(Math.abs(g.c2p(B.x)-u)-C,1-3/C)},function(B){var C=Math.max(3,B.mrc||0);return Math.max(Math.abs(q.c2p(B.y)-w)-C,1-3/C)}),E=!1,F=0;F<f.length;F++){k=f[F];for(var z=0;z<(k.pts||[]).length;z++)c=k.pts[z],c=x(c),c<=l.distance&&(l.distance=c,E=[F,z])}if(!E)return!1;k=f[E[0]];c=k.pts[E[1]];f=g.c2p(c.x,!0);x=q.c2p(c.y,!0);E=c.mrc||
1;l=h.extendFlat({},l,{index:c.i,color:(t.marker||{}).color,name:t.name,x0:f-E,x1:f+E,y0:x-E,y1:x+E,spikeDistance:l.distance,hovertemplate:t.hovertemplate});"h"===t.orientation?(f=q,l.xLabelVal=c.x,l.yLabelVal=k.pos):(f=g,l.xLabelVal=k.pos,l.yLabelVal=c.y);x=f._id.charAt(0);l[x+"Spike"]=f.c2p(k.pos,!0);e(c,t,l);return l}var p=b("../../plots/cartesian/axes"),h=b("../../lib"),a=b("../../components/fx"),d=b("../../components/color"),e=h.fillText;y.exports={hoverPoints:function(l,k,c,f){var g=l.cd[0].trace.hoveron,
q=[],t;-1!==g.indexOf("boxes")&&(q=q.concat(n(l,k,c,f)));-1!==g.indexOf("points")&&(t=m(l,k,c));if("closest"===f)return t?[t]:q;t&&q.push(t);return q},hoverOnBoxes:n,hoverOnPoints:m}},{"../../components/color":615,"../../components/fx":655,"../../lib":749,"../../plots/cartesian/axes":797}],921:[function(b,y,D){y.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults").supplyLayoutDefaults,
calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"box",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend boxLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,"./attributes":915,"./calc":916,"./cross_trace_calc":917,
"./defaults":918,"./event_data":919,"./hover":920,"./layout_attributes":922,"./layout_defaults":923,"./plot":924,"./select":925,"./style":926}],922:[function(b,y,D){y.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],923:[function(b,y,D){function n(a,d,e,l,k){a=k+"Layout";d=!1;for(var c=0;c<e.length;c++)if(m.traceIs(e[c],
a)){d=!0;break}d&&(l(k+"mode"),l(k+"gap"),l(k+"groupgap"))}var m=b("../../registry"),p=b("../../lib"),h=b("./layout_attributes");y.exports={supplyLayoutDefaults:function(a,d,e){n(a,d,e,function(l,k){return p.coerce(a,d,h,l,k)},"box")},_supply:n}},{"../../lib":749,"../../registry":880,"./layout_attributes":922}],924:[function(b,y,D){function n(e,l,k,c){var f="h"===k.orientation,g=l.val,q=l.pos,t=!!q.rangebreaks,u=c.bPos,w=c.wdPos||0,x=c.bPosPxOffset||0,E=k.whiskerwidth||0,F=k.notched||!1,z=F?1-2*k.notchwidth:
1;if(Array.isArray(c.bdPos)){var B=c.bdPos[0];var C=c.bdPos[1]}else C=B=c.bdPos;e=e.selectAll("path.box").data("violin"!==k.type||k.box.visible?a.identity:[]);e.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box");e.exit().remove();e.each(function(v){if(v.empty)return"M0,0Z";var G=q.c2l(v.pos+u,!0),I=q.l2p(G-B)+x,J=q.l2p(G+C)+x,K=t?(I+J)/2:q.l2p(G)+x,N=k.whiskerwidth,H=t?I*N+(1-N)*K:q.l2p(G-w)+x;N=t?J*N+(1-N)*K:q.l2p(G+w)+x;var L=q.l2p(G-B*z)+x;G=q.l2p(G+C*z)+x;var P=
g.c2p(v.q1,!0),Q=g.c2p(v.q3,!0),S=a.constrain(g.c2p(v.med,!0),Math.min(P,Q)+1,Math.max(P,Q)-1),O=void 0===v.lf||!1===k.boxpoints,U=g.c2p(O?v.min:v.lf,!0);O=g.c2p(O?v.max:v.uf,!0);var X=g.c2p(v.ln,!0);v=g.c2p(v.un,!0);f?h.select(this).attr("d","M"+S+","+L+"V"+G+"M"+P+","+I+"V"+J+(F?"H"+X+"L"+S+","+G+"L"+v+","+J:"")+"H"+Q+"V"+I+(F?"H"+v+"L"+S+","+L+"L"+X+","+I:"")+"ZM"+P+","+K+"H"+U+"M"+Q+","+K+"H"+O+(0===E?"":"M"+U+","+H+"V"+N+"M"+O+","+H+"V"+N)):h.select(this).attr("d","M"+L+","+S+"H"+G+"M"+I+","+
P+"H"+J+(F?"V"+X+"L"+G+","+S+"L"+J+","+v:"")+"V"+Q+"H"+I+(F?"V"+v+"L"+L+","+S+"L"+I+","+X:"")+"ZM"+K+","+P+"V"+U+"M"+K+","+Q+"V"+O+(0===E?"":"M"+H+","+U+"H"+N+"M"+H+","+O+"H"+N))})}function m(e,l,k,c){var f=l.x;l=l.y;var g=c.bdPos,q=c.bPos,t=k.boxpoints||k.points;a.seedPseudoRandom();var u=function(w){w.forEach(function(x){x.t=c;x.trace=k});return w};e=e.selectAll("g.points").data(t?u:[]);e.enter().append("g").attr("class","points");e.exit().remove();e=e.selectAll("path").data(function(w){var x=w.pts2;
var E=Math.max((w.max-w.min)/10,w.q3-w.q1);var F=1E-9*E,z=.01*E,B=[],C=0;if(k.jitter){if(0===E)for(C=1,B=Array(x.length),E=0;E<x.length;E++)B[E]=1;else for(E=0;E<x.length;E++){var v=Math.max(0,E-5);var G=x[v].v,I=Math.min(x.length-1,E+5),J=x[I].v;"all"!==t&&(x[E].v<w.lf?J=Math.min(J,w.lf):G=Math.max(G,w.uf));v=Math.sqrt(z*(I-v)/(J-G+F))||0;v=a.constrain(Math.abs(v),0,1);B.push(v);C=Math.max(v,C)}v=2*k.jitter/(C||1)}for(E=0;E<x.length;E++)F=x[E],z=F.v,C=k.jitter?v*B[E]*(a.pseudoRandom()-.5):0,C=w.pos+
q+g*(k.pointpos+C),"h"===k.orientation?(F.y=C,F.x=z):(F.x=C,F.y=z),"suspectedoutliers"===t&&z<w.uo&&z>w.lo&&(F.so=!0);return x});e.enter().append("path").classed("point",!0);e.exit().remove();e.call(d.translatePoints,f,l)}function p(e,l,k,c){var f=l.val,g=l.pos,q=!!g.rangebreaks,t=c.bPos,u=c.bPosPxOffset||0,w=k.boxmean||(k.meanline||{}).visible;if(Array.isArray(c.bdPos)){var x=c.bdPos[0];var E=c.bdPos[1]}else E=x=c.bdPos;e=e.selectAll("path.mean").data("box"===k.type&&k.boxmean||"violin"===k.type&&
k.box.visible&&k.meanline.visible?a.identity:[]);e.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});e.exit().remove();e.each(function(F){var z=g.c2l(F.pos+t,!0),B=g.l2p(z-x)+u,C=g.l2p(z+E)+u;z=q?(B+C)/2:g.l2p(z)+u;var v=f.c2p(F.mean,!0),G=f.c2p(F.mean-F.sd,!0);F=f.c2p(F.mean+F.sd,!0);"h"===k.orientation?h.select(this).attr("d","M"+v+","+B+"V"+C+("sd"===w?"m0,0L"+G+","+z+"L"+v+","+B+"L"+F+","+z+"Z":"")):h.select(this).attr("d","M"+B+","+v+"H"+C+
("sd"===w?"m0,0L"+z+","+G+"L"+B+","+v+"L"+z+","+F+"Z":""))})}var h=b("d3"),a=b("../../lib"),d=b("../../components/drawing");y.exports={plot:function(e,l,k,c){var f=l.xaxis,g=l.yaxis;a.makeTraceGroups(c,k,"trace boxes").each(function(q){var t=h.select(this),u=q[0];q=u.t;u=u.trace;q.wdPos=q.bdPos*u.whiskerwidth;if(!0!==u.visible||q.empty)t.remove();else{if("h"===u.orientation){var w=g;var x=f}else w=f,x=g;n(t,{pos:w,val:x},u,q);m(t,{x:f,y:g},u,q);p(t,{pos:w,val:x},u,q)}})},plotBoxAndWhiskers:n,plotPoints:m,
plotBoxMean:p}},{"../../components/drawing":637,"../../lib":749,d3:169}],925:[function(b,y,D){y.exports=function(n,m){var p=n.cd,h=n.xaxis,a=n.yaxis,d=[],e,l;if(!1===m)for(e=0;e<p.length;e++)for(l=0;l<(p[e].pts||[]).length;l++)p[e].pts[l].selected=0;else for(e=0;e<p.length;e++)for(l=0;l<(p[e].pts||[]).length;l++){var k=p[e].pts[l],c=h.c2p(k.x),f=a.c2p(k.y);m.contains([c,f],null,k.i,n)?(d.push({pointNumber:k.i,x:h.c2d(k.x),y:a.c2d(k.y)}),k.selected=1):k.selected=0}return d}},{}],926:[function(b,y,
D){var n=b("d3"),m=b("../../components/color"),p=b("../../components/drawing");y.exports={style:function(h,a,d){a=d?d:n.select(h).selectAll("g.trace.boxes");a.style("opacity",function(e){return e[0].trace.opacity});a.each(function(e){function l(g,q,t,u){g.style("stroke-width",q+"px").call(m.stroke,t).call(m.fill,u)}var k=n.select(this),c=e[0].trace;e=c.line.width;var f=k.selectAll("path.box");"candlestick"===c.type?f.each(function(g){if(!g.empty){var q=n.select(this),t=c[g.dir];l(q,t.line.width,t.line.color,
t.fillcolor);q.style("opacity",c.selectedpoints&&!g.selected?.3:1)}}):(l(f,e,c.line.color,c.fillcolor),k.selectAll("path.mean").style({"stroke-width":e,"stroke-dasharray":2*e+"px,"+e+"px"}).call(m.stroke,c.line.color),k=k.selectAll("path.point"),p.pointStyle(k,c,h))})},styleOnSelect:function(h,a,d){a=a[0].trace;d=d.selectAll("path.point");a.selectedpoints?p.selectedPointStyle(d,a):p.pointStyle(d,a,h)}}},{"../../components/color":615,"../../components/drawing":637,d3:169}],927:[function(b,y,D){function n(h){return{line:{color:m({},
p.line.color,{dflt:h}),width:p.line.width,editType:"style"},fillcolor:p.fillcolor,editType:"style"}}var m=b("../../lib").extendFlat;D=b("../ohlc/attributes");var p=b("../box/attributes");y.exports={x:D.x,open:D.open,high:D.high,low:D.low,close:D.close,line:{width:m({},p.line.width,{}),editType:"style"},increasing:n(D.increasing.line.color.dflt),decreasing:n(D.decreasing.line.color.dflt),text:D.text,hovertext:D.hovertext,whiskerwidth:m({},p.whiskerwidth,{dflt:0}),hoverlabel:D.hoverlabel}},{"../../lib":749,
"../box/attributes":915,"../ohlc/attributes":1101}],928:[function(b,y,D){function n(a,d,e,l){return{min:e,q1:Math.min(a,l),med:l,q3:Math.max(a,l),max:d}}var m=b("../../lib"),p=b("../../plots/cartesian/axes"),h=b("../ohlc/calc").calcCommon;y.exports=function(a,d){var e=a._fullLayout,l=p.getFromId(a,d.xaxis),k=p.getFromId(a,d.yaxis);l=l.makeCalcdata(d,"x");a=h(a,d,l,k,n);return a.length?(m.extendFlat(a[0].t,{num:e._numBoxes,dPos:m.distinctVals(l).minDiff/2,posLetter:"x",valLetter:"y"}),e._numBoxes++,
a):[{t:{empty:!0}}]}},{"../../lib":749,"../../plots/cartesian/axes":797,"../ohlc/calc":1102}],929:[function(b,y,D){function n(d,e,l,k){d=l(k+".line.color");l(k+".line.width",e.line.width);l(k+".fillcolor",p.addOpacity(d,.5))}var m=b("../../lib"),p=b("../../components/color"),h=b("../ohlc/ohlc_defaults"),a=b("./attributes");y.exports=function(d,e,l,k){function c(f,g){return m.coerce(d,e,a,f,g)}h(d,e,c,k)?(c("line.width"),n(d,e,c,"increasing"),n(d,e,c,"decreasing"),c("text"),c("hovertext"),c("whiskerwidth"),
k._requestRangeslider[e.xaxis]=!0):e.visible=!1}},{"../../components/color":615,"../../lib":749,"../ohlc/ohlc_defaults":1106,"./attributes":927}],930:[function(b,y,D){y.exports={moduleType:"trace",name:"candlestick",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:b("./attributes"),layoutAttributes:b("../box/layout_attributes"),supplyLayoutDefaults:b("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:b("../box/cross_trace_calc").crossTraceCalc,
supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("../box/plot").plot,layerName:"boxlayer",style:b("../box/style").style,hoverPoints:b("../ohlc/hover").hoverPoints,selectPoints:b("../ohlc/select")}},{"../../plots/cartesian":810,"../box/cross_trace_calc":917,"../box/layout_attributes":922,"../box/layout_defaults":923,"../box/plot":924,"../box/style":926,"../ohlc/hover":1104,"../ohlc/select":1108,"./attributes":927,"./calc":928,"./defaults":929}],931:[function(b,y,D){function n(h,a,d,e){["aaxis",
"baxis"].forEach(function(l){var k=l.charAt(0),c=h[l]||{},f=p.newContainer(a,l);m(c,f,{tickfont:"x",id:k+"axis",letter:k,font:a.font,name:l,data:h[k],calendar:a.calendar,dfltColor:e,bgColor:d.paper_bgcolor,fullLayout:d});f._categories=f._categories||[];h[l]||"-"===c.type||(h[l]={type:c.type})})}var m=b("./axis_defaults"),p=b("../../plot_api/plot_template");y.exports=function(h,a,d,e,l){e("a")||(e("da"),e("a0"));e("b")||(e("db"),e("b0"));n(h,a,d,l)}},{"../../plot_api/plot_template":787,"./axis_defaults":936}],
932:[function(b,y,D){function n(p,h){if(!m(p)||10<=h)return null;for(var a=Infinity,d=-Infinity,e=p.length,l=0;l<e;l++){var k=p[l];if(m(k)){if(k=n(k,h+1))a=Math.min(k[0],a),d=Math.max(k[1],d)}else a=Math.min(k,a),d=Math.max(k,d)}return[a,d]}var m=b("../../lib").isArrayOrTypedArray;y.exports=function(p){return n(p,0)}},{"../../lib":749}],933:[function(b,y,D){var n=b("../../plots/font_attributes");D=b("./axis_attributes");b=b("../../components/color/attributes");n=n({editType:"calc"});n.family.dflt=
'"Open Sans", verdana, arial, sans-serif';n.size.dflt=12;n.color.dflt=b.defaultLine;y.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},
cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:D,baxis:D,font:n,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":614,"../../plots/font_attributes":825,"./axis_attributes":935}],934:[function(b,y,D){var n=b("../../lib").isArrayOrTypedArray;y.exports=function(m,p,h,a){var d=n(h)?"a":"b",e=("a"===d?m.aaxis:m.baxis).smoothing,l="a"===d?m.a2i:m.b2j,k="a"===d?h:a;a="a"===d?a:h;h="a"===d?p.a.length:p.b.length;var c="a"===d?
p.b.length:p.a.length,f=Math.floor("a"===d?m.b2j(a):m.a2i(a));p="a"===d?function(I){return m.evalxy([],I,f)}:function(I){return m.evalxy([],f,I)};if(e){var g=Math.max(0,Math.min(c-2,f));var q=f-g;var t="a"===d?function(I,J){return m.dxydi([],I,g,J,q)}:function(I,J){return m.dxydj([],g,I,q,J)}}d=l(k[0]);l=l(k[1]);k=d<l?1:-1;var u=1E-8*(l-d);var w=0<k?Math.ceil:Math.floor;a=0<k?Math.min:Math.max;c=0<k?Math.max:Math.min;var x=(0<k?Math.floor:Math.ceil)(d+u);w=w(l-u);u=p(d);for(var E=[[u]];x*k<w*k;x+=
k){var F=[];var z=c(d,x);var B=a(l,x+k);var C=B-z;var v=Math.max(0,Math.min(h-2,Math.floor(.5*(z+B))));var G=p(B);e&&(z=t(v,z-v),v=t(v,B-v),F.push([u[0]+z[0]/3*C,u[1]+z[1]/3*C]),F.push([G[0]-v[0]/3*C,G[1]-v[1]/3*C]));F.push(G);E.push(F);u=G}return E}},{"../../lib":749}],935:[function(b,y,D){D=b("../../plots/font_attributes");var n=b("../../components/color/attributes"),m=b("../../plots/cartesian/layout_attributes"),p=b("../../plot_api/edit_types").overrideAll;b("../../constants/docs");b("../../constants/docs");
y.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:D({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],
dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",
editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:D({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",
editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:p(m.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",
editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:n.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},
showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:n.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",
editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:D({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":614,"../../constants/docs":719,"../../plot_api/edit_types":780,
"../../plots/cartesian/layout_attributes":811,"../../plots/font_attributes":825}],936:[function(b,y,D){function n(f,g){if("-"===f.type){var q=f._id.charAt(0);f.type=c(g,f[q+"calendar"])}}var m=b("./attributes"),p=b("../../components/color").addOpacity,h=b("../../registry"),a=b("../../lib"),d=b("../../plots/cartesian/tick_value_defaults"),e=b("../../plots/cartesian/tick_label_defaults"),l=b("../../plots/cartesian/category_order_defaults"),k=b("../../plots/cartesian/set_convert"),c=b("../../plots/cartesian/axis_autotype");
y.exports=function(f,g,q){function t(C,v){return a.coerce(f,g,E,C,v)}function u(C,v){return a.coerce2(f,g,E,C,v)}var w=q.letter,x=q.font||{},E=m[w+"axis"];q.name&&(g._name=q.name,g._id=q.name);var F=t("type");"-"===F&&(q.data&&n(g,q.data),"-"===g.type?g.type="linear":F=f.type=g.type);t("smoothing");t("cheatertype");t("showticklabels");t("labelprefix",w+" \x3d ");t("labelsuffix");t("showtickprefix");t("showticksuffix");t("separatethousands");t("tickformat");t("exponentformat");t("showexponent");t("categoryorder");
t("tickmode");t("tickvals");t("ticktext");t("tick0");t("dtick");"array"===g.tickmode&&(t("arraytick0"),t("arraydtick"));t("labelpadding");g._hovertitle=w;"date"===F&&h.getComponentMethod("calendars","handleDefaults")(f,g,"calendar",q.calendar);k(g,q.fullLayout);g.c2p=a.identity;var z=t("color",q.dfltColor),B=z===f.color?z:x.color;t("title.text")&&(a.coerceFont(t,"title.font",{family:x.family,size:Math.round(1.2*x.size),color:B}),t("title.offset"));t("tickangle");t("autorange",!g.isValidRange(f.range))&&
t("rangemode");t("range");g.cleanRange();t("fixedrange");d(f,g,t,F);e(f,g,t,F,q);l(f,g,t,{data:q.data,dataAttr:w});q=u("gridcolor",p(z,.3));w=u("gridwidth");x=t("showgrid");x||(delete g.gridcolor,delete g.gridwidth);F=u("startlinecolor",z);B=u("startlinewidth",w);t("startline",g.showgrid||!!F||!!B)||(delete g.startlinecolor,delete g.startlinewidth);z=u("endlinecolor",z);F=u("endlinewidth",w);t("endline",g.showgrid||!!z||!!F)||(delete g.endlinecolor,delete g.endlinewidth);x?(t("minorgridcount"),t("minorgridwidth",
w),t("minorgridcolor",p(q,.06)),g.minorgridcount||(delete g.minorgridwidth,delete g.minorgridcolor)):(delete g.gridcolor,delete g.gridWidth);"none"===g.showticklabels&&(delete g.tickfont,delete g.tickangle,delete g.showexponent,delete g.exponentformat,delete g.tickformat,delete g.showticksuffix,delete g.showtickprefix);g.showticksuffix||delete g.ticksuffix;g.showtickprefix||delete g.tickprefix;t("tickmode");return g}},{"../../components/color":615,"../../lib":749,"../../plots/cartesian/axis_autotype":798,
"../../plots/cartesian/category_order_defaults":801,"../../plots/cartesian/set_convert":817,"../../plots/cartesian/tick_label_defaults":818,"../../plots/cartesian/tick_value_defaults":820,"../../registry":880,"./attributes":933}],937:[function(b,y,D){var n=b("../../plots/cartesian/axes"),m=b("../../lib").isArray1D,p=b("./cheater_basis"),h=b("./array_minmax"),a=b("./calc_gridlines"),d=b("./calc_labels"),e=b("./calc_clippath"),l=b("../heatmap/clean_2d_array"),k=b("./smooth_fill_2d_array"),c=b("../heatmap/convert_column_xyz"),
f=b("./set_convert");y.exports=function(g,q){var t=n.getFromId(g,q.xaxis);g=n.getFromId(g,q.yaxis);var u=q.aaxis,w=q.baxis,x=q.x,E=q.y,F=[];x&&m(x)&&F.push("x");E&&m(E)&&F.push("y");F.length&&c(q,u,w,"a","b",F);F=q._a=q._a||q.a;var z=q._b=q._b||q.b;x=q._x||q.x;E=q._y||q.y;var B={};q._cheater&&(x=p("index"===u.cheatertype?F.length:F,"index"===w.cheatertype?z.length:z,q.cheaterslope));q._x=x=l(x);q._y=E=l(E);k(x,F,z);k(E,F,z);f(q);q.setScale();var C=h(x),v=h(E),G=.5*(C[1]-C[0]);C=.5*(C[1]+C[0]);var I=
.5*(v[1]-v[0]);v=.5*(v[1]+v[0]);C=[C-1.3*G,C+1.3*G];v=[v-1.3*I,v+1.3*I];q._extremes[t._id]=n.findExtremes(t,C,{padded:!0});q._extremes[g._id]=n.findExtremes(g,v,{padded:!0});a(q,"a","b");a(q,"b","a");d(q,u);d(q,w);B.clipsegments=e(q._xctrl,q._yctrl,u,w);B.x=x;B.y=E;B.a=F;B.b=z;return[B]}},{"../../lib":749,"../../plots/cartesian/axes":797,"../heatmap/clean_2d_array":1036,"../heatmap/convert_column_xyz":1038,"./array_minmax":932,"./calc_clippath":938,"./calc_gridlines":939,"./calc_labels":940,"./cheater_basis":942,
"./set_convert":955,"./smooth_fill_2d_array":956}],938:[function(b,y,D){y.exports=function(n,m,p,h){var a,d=[];p=!!p.smoothing;var e=!!h.smoothing,l=n[0].length-1,k=n.length-1;h=0;var c=[];for(a=[];h<=l;h++)c[h]=n[0][h],a[h]=m[0][h];d.push({x:c,y:a,bicubic:p});h=0;c=[];for(a=[];h<=k;h++)c[h]=n[h][l],a[h]=m[h][l];d.push({x:c,y:a,bicubic:e});h=l;c=[];for(a=[];0<=h;h--)c[l-h]=n[k][h],a[l-h]=m[k][h];d.push({x:c,y:a,bicubic:p});h=k;c=[];for(a=[];0<=h;h--)c[k-h]=n[h][0],a[k-h]=m[h][0];d.push({x:c,y:a,bicubic:e});
return d}},{}],939:[function(b,y,D){var n=b("../../plots/cartesian/axes"),m=b("../../lib/extend").extendFlat;y.exports=function(p,h,a){function d(H){var L,P=[],Q=[],S={};if("b"===h){var O=p.b2j(H);var U=Math.floor(Math.max(0,Math.min(B-2,O)));var X=O-U;S.length=B;S.crossLength=z;S.xy=function(fa){return p.evalxy([],fa,O)};S.dxy=function(fa,na){return p.dxydi([],fa,U,na,X)};for(L=0;L<z;L++){var da=Math.min(z-2,L);var ea=L-da;var ca=p.evalxy([],L,O);if(u.smoothing&&0<L){var ia=p.dxydi([],L-1,U,0,X);
P.push(ha[0]+ia[0]/3);Q.push(ha[1]+ia[1]/3);var ha=p.dxydi([],L-1,U,1,X);P.push(ca[0]-ha[0]/3);Q.push(ca[1]-ha[1]/3)}P.push(ca[0]);Q.push(ca[1]);ha=ca}}else for(L=p.a2i(H),da=Math.floor(Math.max(0,Math.min(z-2,L))),ea=L-da,S.length=z,S.crossLength=B,S.xy=function(fa){return p.evalxy([],L,fa)},S.dxy=function(fa,na){return p.dxydj([],da,fa,ea,na)},O=0;O<B;O++)U=Math.min(B-2,O),X=O-U,ca=p.evalxy([],L,O),u.smoothing&&0<O&&(ia=p.dxydj([],da,O-1,ea,0),P.push(ha[0]+ia[0]/3),Q.push(ha[1]+ia[1]/3),ha=p.dxydj([],
da,O-1,ea,1),P.push(ca[0]-ha[0]/3),Q.push(ca[1]-ha[1]/3)),P.push(ca[0]),Q.push(ca[1]),ha=ca;S.axisLetter=h;S.axis=c;S.crossAxis=u;S.value=H;S.constvar=a;S.index=l;S.x=P;S.y=Q;S.smoothing=u.smoothing;return S}function e(H){var L,P=[],Q=[],S={};S.length=k.length;S.crossLength=t.length;if("b"===h){var O=Math.max(0,Math.min(B-2,H));var U=Math.min(1,Math.max(0,H-O));S.xy=function(ea){return p.evalxy([],ea,H)};S.dxy=function(ea,ca){return p.dxydi([],ea,O,ca,U)};for(L=0;L<E;L++)P[L]=w[H*C][L],Q[L]=x[H*C][L]}else{var X=
Math.max(0,Math.min(z-2,H));var da=Math.min(1,Math.max(0,H-X));S.xy=function(ea){return p.evalxy([],H,ea)};S.dxy=function(ea,ca){return p.dxydj([],X,ea,da,ca)};for(L=0;L<F;L++)P[L]=w[L][H*C],Q[L]=x[L][H*C]}S.axisLetter=h;S.axis=c;S.crossAxis=u;S.value=k[H];S.constvar=a;S.index=H;S.x=P;S.y=Q;S.smoothing=u.smoothing;return S}var l,k=p["_"+h],c=p[h+"axis"];var f=c._gridlines=[];var g=c._minorgridlines=[],q=c._boundarylines=[],t=p["_"+a],u=p[a+"axis"];"array"===c.tickmode&&(c.tickvals=k.slice());var w=
p._xctrl,x=p._yctrl,E=w[0].length,F=w.length,z=p._a.length,B=p._b.length;n.prepTicks(c);"array"===c.tickmode&&delete c.tickvals;var C=c.smoothing?3:1;if("array"===c.tickmode){var v=5E-15;v=[Math.floor((k.length-1-c.arraytick0)/c.arraydtick*(1+v)),Math.ceil(-c.arraytick0/c.arraydtick/(1+v))].sort(function(H,L){return H-L});var G=v[0]-1;v=v[1]+1;for(l=G;l<v;l++){var I=c.arraytick0+c.arraydtick*l;0>I||I>k.length-1||f.push(m(e(I),{color:c.gridcolor,width:c.gridwidth}))}for(l=G;l<v;l++){G=c.arraytick0+
c.arraydtick*l;var J=Math.min(G+c.arraydtick,k.length-1);if(!(0>G||G>k.length-1||0>J||J>k.length-1)){var K=k[G];var N=k[J];for(f=0;f<c.minorgridcount;f++)I=J-G,0>=I||(I=K+(N-K)*(f+1)/(c.minorgridcount+1)*(c.arraydtick/I),I<k[0]||I>k[k.length-1]||g.push(m(d(I),{color:c.minorgridcolor,width:c.minorgridwidth})))}}c.startline&&q.push(m(e(0),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&q.push(m(e(k.length-1),{color:c.endlinecolor,width:c.endlinewidth}))}else{v=5E-15;v=[Math.floor((k[k.length-
1]-c.tick0)/c.dtick*(1+v)),Math.ceil((k[0]-c.tick0)/c.dtick/(1+v))].sort(function(H,L){return H-L});G=v[0];v=v[1];for(l=G;l<=v;l++)J=c.tick0+c.dtick*l,f.push(m(d(J),{color:c.gridcolor,width:c.gridwidth}));for(l=G-1;l<v+1;l++)for(J=c.tick0+c.dtick*l,f=0;f<c.minorgridcount;f++)I=J+c.dtick*(f+1)/(c.minorgridcount+1),I<k[0]||I>k[k.length-1]||g.push(m(d(I),{color:c.minorgridcolor,width:c.minorgridwidth}));c.startline&&q.push(m(d(k[0]),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&q.push(m(d(k[k.length-
1]),{color:c.endlinecolor,width:c.endlinewidth}))}}},{"../../lib/extend":739,"../../plots/cartesian/axes":797}],940:[function(b,y,D){var n=b("../../plots/cartesian/axes"),m=b("../../lib/extend").extendFlat;y.exports=function(p,h){var a=h._labels=[],d=h._gridlines;for(p=0;p<d.length;p++){var e=d[p];if(-1!==["start","both"].indexOf(h.showticklabels)){var l=n.tickText(h,e.value);m(l,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:e.xy(0),dxy:e.dxy(0,0),axis:e.axis,length:e.crossAxis.length,font:e.axis.tickfont,
isFirst:0===p,isLast:p===d.length-1});a.push(l)}-1!==["end","both"].indexOf(h.showticklabels)&&(l=n.tickText(h,e.value),m(l,{endAnchor:!1,xy:e.xy(e.crossLength-1),dxy:e.dxy(e.crossLength-2,1),axis:e.axis,length:e.crossAxis.length,font:e.axis.tickfont,isFirst:0===p,isLast:p===d.length-1}),a.push(l))}}},{"../../lib/extend":739,"../../plots/cartesian/axes":797}],941:[function(b,y,D){y.exports=function(n,m,p,h){var a=n[0]-m[0],d=n[1]-m[1],e=p[0]-m[0],l=p[1]-m[1];p=Math.pow(a*a+d*d,.25);n=Math.pow(e*e+
l*l,.25);a=(n*n*a-p*p*e)*h;h*=n*n*d-p*p*l;d=n*(p+n)*3;p=p*(p+n)*3;return[[m[0]+(d&&a/d),m[1]+(d&&h/d)],[m[0]-(p&&a/p),m[1]-(p&&h/p)]]}},{}],942:[function(b,y,D){var n=b("../../lib").isArrayOrTypedArray;y.exports=function(m,p,h){var a,d,e=[],l=n(m)?m.length:m,k=n(p)?p.length:p,c=n(m)?m:null,f=n(p)?p:null;c&&(a=(c.length-1)/(c[c.length-1]-c[0])/(l-1));f&&(d=(f.length-1)/(f[f.length-1]-f[0])/(k-1));var g=Infinity,q=-Infinity;for(m=0;m<k;m++){e[m]=[];var t=f?(f[m]-f[0])*d:m/(k-1);for(p=0;p<l;p++){var u=
c?(c[p]-c[0])*a:p/(l-1);u-=t*h;g=Math.min(u,g);q=Math.max(u,q);e[m][p]=u}}h=1/(q-g);a=-g*h;for(m=0;m<k;m++)for(p=0;p<l;p++)e[m][p]=h*e[m][p]+a;return e}},{"../../lib":749}],943:[function(b,y,D){function n(h,a,d){return[(2*(-.5*d[0]+1.5*a[0])+h[0])/3,(2*(-.5*d[1]+1.5*a[1])+h[1])/3]}var m=b("./catmull_rom"),p=b("../../lib").ensureArray;y.exports=function(h,a,d,e,l,k){var c,f,g,q,t=d[0].length,u=d.length,w=l?3*t-2:t,x=k?3*u-2:u;h=p(h,x);a=p(a,x);for(g=0;g<x;g++)h[g]=p(h[g],w),a[g]=p(a[g],w);for(q=f=
0;f<u;f++,q+=k?3:1){var E=h[q];var F=a[q];var z=d[f];var B=e[f];for(g=c=0;c<t;c++,g+=l?3:1)E[g]=z[c],F[g]=B[c]}if(l)for(q=f=0;f<u;f++,q+=k?3:1){c=1;for(g=3;c<t-1;c++,g+=3)E=m([d[f][c-1],e[f][c-1]],[d[f][c],e[f][c]],[d[f][c+1],e[f][c+1]],l),h[q][g-1]=E[0][0],a[q][g-1]=E[0][1],h[q][g+1]=E[1][0],a[q][g+1]=E[1][1];c=n([h[q][0],a[q][0]],[h[q][2],a[q][2]],[h[q][3],a[q][3]]);h[q][1]=c[0];a[q][1]=c[1];c=n([h[q][w-1],a[q][w-1]],[h[q][w-3],a[q][w-3]],[h[q][w-4],a[q][w-4]]);h[q][w-2]=c[0];a[q][w-2]=c[1]}if(k)for(g=
0;g<w;g++){for(q=3;q<x-3;q+=3)E=m([h[q-3][g],a[q-3][g]],[h[q][g],a[q][g]],[h[q+3][g],a[q+3][g]],k),h[q-1][g]=E[0][0],a[q-1][g]=E[0][1],h[q+1][g]=E[1][0],a[q+1][g]=E[1][1];c=n([h[0][g],a[0][g]],[h[2][g],a[2][g]],[h[3][g],a[3][g]]);h[1][g]=c[0];a[1][g]=c[1];c=n([h[x-1][g],a[x-1][g]],[h[x-3][g],a[x-3][g]],[h[x-4][g],a[x-4][g]]);h[x-2][g]=c[0];a[x-2][g]=c[1]}if(l&&k)for(q=1;q<x;q+=0===(q+1)%3?2:1){for(g=3;g<w-3;g+=3)E=m([h[q][g-3],a[q][g-3]],[h[q][g],a[q][g]],[h[q][g+3],a[q][g+3]],l),h[q][g-1]=.5*(h[q][g-
1]+E[0][0]),a[q][g-1]=.5*(a[q][g-1]+E[0][1]),h[q][g+1]=.5*(h[q][g+1]+E[1][0]),a[q][g+1]=.5*(a[q][g+1]+E[1][1]);c=n([h[q][0],a[q][0]],[h[q][2],a[q][2]],[h[q][3],a[q][3]]);h[q][1]=.5*(h[q][1]+c[0]);a[q][1]=.5*(a[q][1]+c[1]);c=n([h[q][w-1],a[q][w-1]],[h[q][w-3],a[q][w-3]],[h[q][w-4],a[q][w-4]]);h[q][w-2]=.5*(h[q][w-2]+c[0]);a[q][w-2]=.5*(a[q][w-2]+c[1])}return[h,a]}},{"../../lib":749,"./catmull_rom":941}],944:[function(b,y,D){y.exports={RELATIVE_CULL_TOLERANCE:1E-6}},{}],945:[function(b,y,D){y.exports=
function(n,m,p){return m&&p?function(h,a,d,e,l){h||(h=[]);var k;a*=3;d*=3;var c=e*e;var f=1-e,g=f*f;f=f*e*2;e=-3*g;g=3*(g-f);f=3*(f-c);var q=3*c,t=l*l,u=t*l,w=1-l,x=w*w,E=x*w;for(k=0;k<n.length;k++){var F=n[k];c=e*F[d][a]+g*F[d][a+1]+f*F[d][a+2]+q*F[d][a+3];var z=e*F[d+1][a]+g*F[d+1][a+1]+f*F[d+1][a+2]+q*F[d+1][a+3];var B=e*F[d+2][a]+g*F[d+2][a+1]+f*F[d+2][a+2]+q*F[d+2][a+3];F=e*F[d+3][a]+g*F[d+3][a+1]+f*F[d+3][a+2]+q*F[d+3][a+3];h[k]=E*c+3*(x*l*z+w*t*B)+u*F}return h}:m?function(h,a,d,e,l){h||(h=
[]);var k;a*=3;var c=e*e;var f=1-e,g=f*f;f=f*e*2;e=-3*g;g=3*(g-f);f=3*(f-c);var q=3*c,t=1-l;for(k=0;k<n.length;k++){var u=n[k];c=e*u[d][a]+g*u[d][a+1]+f*u[d][a+2]+q*u[d][a+3];u=e*u[d+1][a]+g*u[d+1][a+1]+f*u[d+1][a+2]+q*u[d+1][a+3];h[k]=t*c+l*u}return h}:p?function(h,a,d,e,l){h||(h=[]);var k;d*=3;var c=l*l,f=c*l,g=1-l,q=g*g,t=q*g;for(k=0;k<n.length;k++){var u=n[k];e=u[d][a+1]-u[d][a];var w=u[d+1][a+1]-u[d+1][a];var x=u[d+2][a+1]-u[d+2][a];u=u[d+3][a+1]-u[d+3][a];h[k]=t*e+3*(q*l*w+g*c*x)+f*u}return h}:
function(h,a,d,e,l){h||(h=[]);var k,c=1-l;for(k=0;k<n.length;k++){var f=n[k];e=f[d][a+1]-f[d][a];f=f[d+1][a+1]-f[d+1][a];h[k]=c*e+l*f}return h}}},{}],946:[function(b,y,D){y.exports=function(n,m,p){return m&&p?function(h,a,d,e,l){h||(h=[]);var k;a*=3;d*=3;var c=e*e,f=c*e,g=1-e,q=g*g,t=q*g;var u=l*l;var w=1-l,x=w*w;w=w*l*2;l=-3*x;x=3*(x-w);w=3*(w-u);var E=3*u;for(k=0;k<n.length;k++){var F=n[k];u=l*F[d][a]+x*F[d+1][a]+w*F[d+2][a]+E*F[d+3][a];var z=l*F[d][a+1]+x*F[d+1][a+1]+w*F[d+2][a+1]+E*F[d+3][a+1];
var B=l*F[d][a+2]+x*F[d+1][a+2]+w*F[d+2][a+2]+E*F[d+3][a+2];F=l*F[d][a+3]+x*F[d+1][a+3]+w*F[d+2][a+3]+E*F[d+3][a+3];h[k]=t*u+3*(q*e*z+g*c*B)+f*F}return h}:m?function(h,a,d,e,l){h||(h=[]);var k;a*=3;var c=l*l,f=c*l,g=1-l,q=g*g,t=q*g;for(k=0;k<n.length;k++){var u=n[k];e=u[d+1][a]-u[d][a];var w=u[d+1][a+1]-u[d][a+1];var x=u[d+1][a+2]-u[d][a+2];u=u[d+1][a+3]-u[d][a+3];h[k]=t*e+3*(q*l*w+g*c*x)+f*u}return h}:p?function(h,a,d,e,l){h||(h=[]);var k;d*=3;var c=1-e;var f=l*l;var g=1-l,q=g*g;g=g*l*2;l=-3*q;q=
3*(q-g);g=3*(g-f);var t=3*f;for(k=0;k<n.length;k++){var u=n[k];f=l*u[d][a]+q*u[d+1][a]+g*u[d+2][a]+t*u[d+3][a];u=l*u[d][a+1]+q*u[d+1][a+1]+g*u[d+2][a+1]+t*u[d+3][a+1];h[k]=c*f+e*u}return h}:function(h,a,d,e,l){h||(h=[]);var k,c=1-e;for(k=0;k<n.length;k++){var f=n[k];l=f[d+1][a]-f[d][a];f=f[d+1][a+1]-f[d][a+1];h[k]=c*l+e*f}return h}}},{}],947:[function(b,y,D){y.exports=function(n,m,p,h,a){var d=m-2,e=p-2;return h&&a?function(l,k,c){l||(l=[]);var f,g=Math.max(0,Math.min(Math.floor(k),d)),q=Math.max(0,
Math.min(Math.floor(c),e));k=Math.max(0,Math.min(1,k-g));var t=Math.max(0,Math.min(1,c-q));g*=3;q*=3;var u=k*k,w=u*k,x=1-k,E=x*x,F=E*x,z=t*t,B=z*t,C=1-t,v=C*C,G=v*C;for(f=0;f<n.length;f++){var I=n[f];c=F*I[q][g]+3*(E*k*I[q][g+1]+x*u*I[q][g+2])+w*I[q][g+3];var J=F*I[q+1][g]+3*(E*k*I[q+1][g+1]+x*u*I[q+1][g+2])+w*I[q+1][g+3];var K=F*I[q+2][g]+3*(E*k*I[q+2][g+1]+x*u*I[q+2][g+2])+w*I[q+2][g+3];I=F*I[q+3][g]+3*(E*k*I[q+3][g+1]+x*u*I[q+3][g+2])+w*I[q+3][g+3];l[f]=G*c+3*(v*t*J+C*z*K)+B*I}return l}:h?function(l,
k,c){l||(l=[]);var f=Math.max(0,Math.min(Math.floor(k),d)),g=Math.max(0,Math.min(Math.floor(c),e));k=Math.max(0,Math.min(1,k-f));c=Math.max(0,Math.min(1,c-g));var q;f*=3;var t=k*k,u=t*k,w=1-k,x=w*w,E=x*w,F=1-c;for(q=0;q<n.length;q++){var z=n[q];var B=F*z[g][f]+c*z[g+1][f];var C=F*z[g][f+1]+c*z[g+1][f+1];var v=F*z[g][f+2]+c*z[g+1][f+1];z=F*z[g][f+3]+c*z[g+1][f+1];l[q]=E*B+3*(x*k*C+w*t*v)+u*z}return l}:a?function(l,k,c){l||(l=[]);var f=Math.max(0,Math.min(Math.floor(k),d)),g=Math.max(0,Math.min(Math.floor(c),
e));k=Math.max(0,Math.min(1,k-f));c=Math.max(0,Math.min(1,c-g));var q;g*=3;var t=c*c,u=t*c,w=1-c,x=w*w,E=x*w,F=1-k;for(q=0;q<n.length;q++){var z=n[q];var B=F*z[g][f]+k*z[g][f+1];var C=F*z[g+1][f]+k*z[g+1][f+1];var v=F*z[g+2][f]+k*z[g+2][f+1];z=F*z[g+3][f]+k*z[g+3][f+1];l[q]=E*B+3*(x*c*C+w*t*v)+u*z}return l}:function(l,k,c){l||(l=[]);var f=Math.max(0,Math.min(Math.floor(k),d)),g=Math.max(0,Math.min(Math.floor(c),e));k=Math.max(0,Math.min(1,k-f));c=Math.max(0,Math.min(1,c-g));var q,t=1-c,u=1-k;for(q=
0;q<n.length;q++){var w=n[q];var x=u*w[g][f]+k*w[g][f+1];w=u*w[g+1][f]+k*w[g+1][f+1];l[q]=t*x+c*w}return l}}},{}],948:[function(b,y,D){var n=b("../../lib"),m=b("./xy_defaults"),p=b("./ab_defaults"),h=b("./attributes"),a=b("../../components/color/attributes");y.exports=function(d,e,l,k){function c(f,g){return n.coerce(d,e,h,f,g)}e._clipPathId="clip"+e.uid+"carpet";l=c("color",a.defaultLine);n.coerceFont(c,"font");c("carpet");p(d,e,k,c,l);e.a&&e.b?(3>e.a.length&&(e.aaxis.smoothing=0),3>e.b.length&&
(e.baxis.smoothing=0),m(d,e,c)||(e.visible=!1),e._cheater&&c("cheaterslope")):e.visible=!1}},{"../../components/color/attributes":614,"../../lib":749,"./ab_defaults":931,"./attributes":933,"./xy_defaults":957}],949:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),plot:b("./plot"),calc:b("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet carpetAxis notLegendIsolatable noMultiCategory noHover noSortingByValue".split(" "),
meta:{}}},{"../../plots/cartesian":810,"./attributes":933,"./calc":937,"./defaults":948,"./plot":954}],950:[function(b,y,D){y.exports=function(n,m){for(var p=n._fullData.length,h,a=0;a<p;a++){var d=n._fullData[a];if(d.index!==m.index&&"carpet"===d.type&&(h||(h=d),d.carpet===m.carpet))return d}return h}},{}],951:[function(b,y,D){y.exports=function(n,m,p){if(0===n.length)return"";var h,a=[],d=p?3:1;for(h=0;h<n.length;h+=d)a.push(n[h]+","+m[h]),p&&h<n.length-d&&(a.push("C"),a.push([n[h+1]+","+m[h+1],
n[h+2]+","+m[h+2]+" "].join(" ")));return a.join(p?"":"L")}},{}],952:[function(b,y,D){var n=b("../../lib").isArrayOrTypedArray;y.exports=function(m,p,h){var a;n(m)?m.length>p.length&&(m=m.slice(0,p.length)):m=[];for(a=0;a<p.length;a++)m[a]=h(p[a]);return m}},{"../../lib":749}],953:[function(b,y,D){y.exports=function(n,m,p,h,a,d){var e=a[0]*n.dpdx(m),l=a[1]*n.dpdy(p),k=1,c=1;d&&(c=Math.max(0,(a[0]*d[0]+a[1]*d[1])/Math.sqrt(a[0]*a[0]+a[1]*a[1])/Math.sqrt(d[0]*d[0]+d[1]*d[1])));a=180*Math.atan2(l,e)/
Math.PI;-90>a?(a+=180,k=-k):90<a&&(a-=180,k=-k);return{angle:a,flip:k,p:n.c2p(h,m,p),offsetMultplier:c}}},{}],954:[function(b,y,D){function n(q,t,u,w,x,E){w="const-"+x+"-lines";u=u.selectAll("."+w).data(E);u.enter().append("path").classed(w,!0).style("vector-effect","non-scaling-stroke");u.each(function(F){var z=F.y,B=d([],F.x,q.c2p);z=d([],z,t.c2p);B="M"+e(B,z,F.smoothing);h.select(this).attr("d",B).style("stroke-width",F.width).style("stroke",F.color).style("fill","none")});u.exit().remove()}function m(q,
t,u,w,x,E,F,z){x=E.selectAll("text."+z).data(F);x.enter().append("text").classed(z,!0);var B=0,C={};x.each(function(v,G){if("auto"===v.axis.tickangle)var I=l(w,t,u,v.xy,v.dxy);else I=(v.axis.tickangle+180)*Math.PI/180,I=l(w,t,u,v.xy,[Math.cos(I),Math.sin(I)]);G||(C={angle:I.angle,flip:I.flip});G=(v.endAnchor?-1:1)*I.flip;var J=h.select(this).attr({"text-anchor":0<G?"start":"end","data-notex":1}).call(a.font,v.font).text(v.text).call(k.convertToTspans,q),K=a.bBox(this);J.attr("transform","translate("+
I.p[0]+","+I.p[1]+") rotate("+I.angle+")translate("+v.axis.labelpadding*G+","+.3*K.height+")");B=Math.max(B,K.width+v.axis.labelpadding)});x.exit().remove();C.maxExtent=B;return C}function p(q,t,u,w,x,E,F,z,B,C,v){w=[];F.title.text&&w.push(F.title.text);t=t.selectAll("text."+v).data(w);var G=C.maxExtent;t.enter().append("text").classed(v,!0);t.each(function(){var I=l(u,z,B,x,E);-1===["start","both"].indexOf(F.showticklabels)&&(G=0);var J=F.title.font.size;G+=J+F.title.offset;var K=(C.angle+(0>C.flip?
180:0)-I.angle+450)%360;K=90<K&&270>K;var N=h.select(this);N.text(F.title.text).call(k.convertToTspans,q);K&&(G=(-k.lineCount(N)+g)*f*J-G);N.attr("transform","translate("+I.p[0]+","+I.p[1]+") rotate("+I.angle+") translate(0,"+G+")").classed("user-select-none",!0).attr("text-anchor","middle").call(a.font,F.title.font)});t.exit().remove()}var h=b("d3"),a=b("../../components/drawing"),d=b("./map_1d_array"),e=b("./makepath"),l=b("./orient_text"),k=b("../../lib/svg_text_utils"),c=b("../../lib");b=b("../../constants/alignment");
y.exports=function(q,t,u,w){var x=t.xaxis,E=t.yaxis,F=q._fullLayout._clips;c.makeTraceGroups(w,u,"trace").each(function(z){var B=h.select(this),C=z[0];z=C.trace;var v=z.aaxis,G=z.baxis,I=c.ensureSingle(B,"g","minorlayer"),J=c.ensureSingle(B,"g","majorlayer"),K=c.ensureSingle(B,"g","boundarylayer"),N=c.ensureSingle(B,"g","labellayer");B.style("opacity",z.opacity);n(x,E,J,v,"a",v._gridlines,!0);n(x,E,J,G,"b",G._gridlines,!0);n(x,E,I,v,"a",v._minorgridlines,!0);n(x,E,I,G,"b",G._minorgridlines,!0);n(x,
E,K,v,"a-boundary",v._boundarylines);n(x,E,K,G,"b-boundary",G._boundarylines);B=m(q,x,E,z,C,N,v._labels,"a-label");G=m(q,x,E,z,C,N,G._labels,"b-label");v=c.aggNums(Math.min,null,z.a);K=c.aggNums(Math.max,null,z.a);I=c.aggNums(Math.min,null,z.b);J=c.aggNums(Math.max,null,z.b);K=.5*(v+K);var H=I;var L=z.ab2xy(K,H,!0);var P=z.dxyda_rough(K,H);void 0===B.angle&&c.extendFlat(B,l(z,x,E,L,z.dxydb_rough(K,H)));p(q,N,z,C,L,P,z.aaxis,x,E,B,"a-title");K=v;H=.5*(I+J);L=z.ab2xy(K,H,!0);P=z.dxydb_rough(K,H);void 0===
G.angle&&c.extendFlat(G,l(z,x,E,L,z.dxyda_rough(K,H)));p(q,N,z,C,L,P,z.baxis,x,E,G,"b-title");N=F.select("#"+z._clipPathId);N.size()||(N=F.append("clipPath").classed("carpetclip",!0));B=c.ensureSingle(N,"path","carpetboundary");J=C.clipsegments;K=[];for(I=0;I<J.length;I++)C=J[I],G=d([],C.x,x.c2p),v=d([],C.y,E.c2p),K.push(e(G,v,C.bicubic));C="M"+K.join("L")+"Z";N.attr("id",z._clipPathId);B.attr("d",C)})};var f=b.LINE_SPACING,g=(1-b.MID_SHIFT)/f+1},{"../../components/drawing":637,"../../constants/alignment":717,
"../../lib":749,"../../lib/svg_text_utils":773,"./makepath":951,"./map_1d_array":952,"./orient_text":953,d3:169}],955:[function(b,y,D){var n=b("./constants"),m=b("../../lib/search").findBin,p=b("./compute_control_points"),h=b("./create_spline_evaluator"),a=b("./create_i_derivative_evaluator"),d=b("./create_j_derivative_evaluator");y.exports=function(e){var l=e._a,k=e._b,c=l.length,f=k.length,g=e.aaxis,q=e.baxis,t=l[0],u=l[c-1],w=k[0],x=k[f-1],E=l[l.length-1]-l[0],F=k[k.length-1]-k[0],z=E*n.RELATIVE_CULL_TOLERANCE,
B=F*n.RELATIVE_CULL_TOLERANCE;t-=z;u+=z;w-=B;x+=B;e.isVisible=function(C,v){return C>t&&C<u&&v>w&&v<x};e.isOccluded=function(C,v){return C<t||C>u||v<w||v>x};e.setScale=function(){var C=p(e._xctrl,e._yctrl,e._x,e._y,g.smoothing,q.smoothing);e._xctrl=C[0];e._yctrl=C[1];e.evalxy=h([e._xctrl,e._yctrl],c,f,g.smoothing,q.smoothing);e.dxydi=a([e._xctrl,e._yctrl],g.smoothing,q.smoothing);e.dxydj=d([e._xctrl,e._yctrl],g.smoothing,q.smoothing)};e.i2a=function(C){var v=Math.max(0,Math.floor(C[0]),c-2);C=C[0]-
v;return(1-C)*l[v]+C*l[v+1]};e.j2b=function(C){var v=Math.max(0,Math.floor(C[1]),c-2);C=C[1]-v;return(1-C)*k[v]+C*k[v+1]};e.ij2ab=function(C){return[e.i2a(C[0]),e.j2b(C[1])]};e.a2i=function(C){var v=Math.max(0,Math.min(m(C,l),c-2)),G=l[v];return Math.max(0,Math.min(c-1,v+(C-G)/(l[v+1]-G)))};e.b2j=function(C){var v=Math.max(0,Math.min(m(C,k),f-2)),G=k[v];return Math.max(0,Math.min(f-1,v+(C-G)/(k[v+1]-G)))};e.ab2ij=function(C){return[e.a2i(C[0]),e.b2j(C[1])]};e.i2c=function(C,v){return e.evalxy([],
C,v)};e.ab2xy=function(C,v,G){if(!G&&(C<l[0]||C>l[c-1]|v<k[0]||v>k[f-1]))return[!1,!1];var I=e.a2i(C),J=e.b2j(v),K=e.evalxy([],I,J);if(G){var N=G=0,H=[],L;C<l[0]?(I=L=0,G=(C-l[0])/(l[1]-l[0])):C>l[c-1]?(L=c-2,I=1,G=(C-l[c-1])/(l[c-1]-l[c-2])):(L=Math.max(0,Math.min(c-2,Math.floor(I))),I-=L);v<k[0]?(J=C=0,N=(v-k[0])/(k[1]-k[0])):v>k[f-1]?(C=f-2,J=1,N=(v-k[f-1])/(k[f-1]-k[f-2])):(C=Math.max(0,Math.min(f-2,Math.floor(J))),J-=C);G&&(e.dxydi(H,L,C,I,J),K[0]+=H[0]*G,K[1]+=H[1]*G);N&&(e.dxydj(H,L,C,I,J),
K[0]+=H[0]*N,K[1]+=H[1]*N)}return K};e.c2p=function(C,v,G){return[v.c2p(C[0]),G.c2p(C[1])]};e.p2x=function(C,v,G){return[v.p2c(C[0]),G.p2c(C[1])]};e.dadi=function(C){C=Math.max(0,Math.min(l.length-2,C));return l[C+1]-l[C]};e.dbdj=function(C){C=Math.max(0,Math.min(k.length-2,C));return k[C+1]-k[C]};e.dxyda=function(C,v,G,I){v=e.dxydi(null,C,v,G,I);C=e.dadi(C,G);return[v[0]/C,v[1]/C]};e.dxydb=function(C,v,G,I){C=e.dxydj(null,C,v,G,I);v=e.dbdj(v,I);return[C[0]/v,C[1]/v]};e.dxyda_rough=function(C,v,G){G=
E*(G||.1);var I=e.ab2xy(C+G,v,!0);C=e.ab2xy(C-G,v,!0);return[.5*(I[0]-C[0])/G,.5*(I[1]-C[1])/G]};e.dxydb_rough=function(C,v,G){G=F*(G||.1);var I=e.ab2xy(C,v+G,!0);C=e.ab2xy(C,v-G,!0);return[.5*(I[0]-C[0])/G,.5*(I[1]-C[1])/G]};e.dpdx=function(C){return C._m};e.dpdy=function(C){return C._m}}},{"../../lib/search":768,"./compute_control_points":943,"./constants":944,"./create_i_derivative_evaluator":945,"./create_j_derivative_evaluator":946,"./create_spline_evaluator":947}],956:[function(b,y,D){var n=
b("../../lib");y.exports=function(m,p,h){var a,d,e=[],l=[],k=m[0].length,c=m.length,f=0;for(a=0;a<k;a++)for(d=0;d<c;d++){if(void 0===m[d][a]){e.push(a);l.push(d);var g=m[d];var q=a,t=void 0,u=0,w=0;0<a&&void 0!==(t=m[d][a-1])&&(w++,u+=t);a<k-1&&void 0!==(t=m[d][a+1])&&(w++,u+=t);0<d&&void 0!==(t=m[d-1][a])&&(w++,u+=t);d<c-1&&void 0!==(t=m[d+1][a])&&(w++,u+=t);g[q]=u/Math.max(1,w)}f=Math.max(f,Math.abs(m[d][a]))}if(!e.length)return m;t=0;u=e.length;do{for(g=q=0;g<u;g++){a=e[g];d=l[g];var x=w=0;if(0===
a){var E=Math.min(k-1,2);var F=p[E];var z=p[1];E=m[d][E];var B=m[d][1];x+=B+(B-E)*(p[0]-z)/(z-F);w++}else a===k-1&&(E=Math.max(0,k-3),F=p[E],z=p[k-2],E=m[d][E],B=m[d][k-2],x+=B+(B-E)*(p[k-1]-z)/(z-F),w++);(0===a||a===k-1)&&0<d&&d<c-1&&(F=h[d+1]-h[d],z=h[d]-h[d-1],x+=(z*m[d+1][a]+F*m[d-1][a])/(z+F),w++);0===d?(E=Math.min(c-1,2),F=h[E],z=h[1],E=m[E][a],B=m[1][a],x+=B+(B-E)*(h[0]-z)/(z-F),w++):d===c-1&&(E=Math.max(0,c-3),F=h[E],z=h[c-2],E=m[E][a],B=m[c-2][a],x+=B+(B-E)*(h[c-1]-z)/(z-F),w++);(0===d||
d===c-1)&&0<a&&a<k-1&&(F=p[a+1]-p[a],z=p[a]-p[a-1],x+=(z*m[d][a+1]+F*m[d][a-1])/(z+F),w++);if(w)x/=w;else{x=p[a+1]-p[a];F=p[a]-p[a-1];z=h[d+1]-h[d];E=h[d]-h[d-1];B=x*F*(x+F);var C=z*E*(z+E);x=(B*(E*m[d+1][a]+z*m[d-1][a])+C*(F*m[d][a+1]+x*m[d][a-1]))/(C*(F+x)+B*(E+z))}x-=m[d][a];F=x/f;q+=F*F;w=w?0:.85;m[d][a]+=x*(1+w)}q=Math.sqrt(q)}while(100>t++&&1E-5<q);n.log("Smoother converged to",q,"after",t,"iterations");return m}},{"../../lib":749}],957:[function(b,y,D){var n=b("../../lib").isArray1D;y.exports=
function(m,p,h){var a=(m=h("x"))&&m.length,d=(h=h("y"))&&h.length;if(!a&&!d)return!1;p._cheater=!m;a&&!n(m)||d&&!n(h)?p._length=null:(m=a?m.length:Infinity,d&&(m=Math.min(m,h.length)),p.a&&p.a.length&&(m=Math.min(m,p.a.length)),p.b&&p.b.length&&(m=Math.min(m,p.b.length)),p._length=m);return!0}},{"../../lib":749}],958:[function(b,y,D){D=b("../../plots/template_attributes").hovertemplateAttrs;var n=b("../scattergeo/attributes"),m=b("../../components/colorscale/attributes"),p=b("../../plots/attributes"),
h=b("../../components/color/attributes").defaultLine;b=b("../../lib/extend").extendFlat;var a=n.marker.line;y.exports=b({locations:{valType:"data_array",editType:"calc"},locationmode:n.locationmode,z:{valType:"data_array",editType:"calc"},geojson:b({},n.geojson,{}),featureidkey:n.featureidkey,text:b({},n.text,{}),hovertext:b({},n.hovertext,{}),marker:{line:{color:b({},a.color,{dflt:h}),width:b({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},
editType:"calc"},selected:{marker:{opacity:n.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:n.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:b({},p.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:D(),showlegend:b({},p.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":614,"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,
"../../plots/template_attributes":875,"../scattergeo/attributes":1196}],959:[function(b,y,D){function n(e){return e&&"string"===typeof e}var m=b("fast-isnumeric"),p=b("../../constants/numerical").BADNUM,h=b("../../components/colorscale/calc"),a=b("../scatter/arrays_to_calcdata"),d=b("../scatter/calc_selection");y.exports=function(e,l){var k=l._length,c=Array(k);var f=l.geojson?function(w){return n(w)||m(w)}:n;for(var g=0;g<k;g++){var q=c[g]={},t=l.locations[g],u=l.z[g];f(t)&&m(u)?(q.loc=t,q.z=u):
(q.loc=null,q.z=p);q.index=g}a(c,l);h(e,l,{vals:l.z,containerStr:"",cLetter:"z"});d(c,l);return c}},{"../../components/colorscale/calc":623,"../../constants/numerical":724,"../scatter/arrays_to_calcdata":1154,"../scatter/calc_selection":1157,"fast-isnumeric":241}],960:[function(b,y,D){var n=b("../../lib"),m=b("../../components/colorscale/defaults"),p=b("./attributes");y.exports=function(h,a,d,e){function l(f,g){return n.coerce(h,a,p,f,g)}d=l("locations");var k=l("z");if(d&&d.length&&n.isArrayOrTypedArray(k)&&
k.length){a._length=Math.min(d.length,k.length);d=l("geojson");if("string"===typeof d&&""!==d||n.isPlainObject(d))var c="geojson-id";"geojson-id"===l("locationmode",c)&&l("featureidkey");l("text");l("hovertext");l("hovertemplate");l("marker.line.width")&&l("marker.line.color");l("marker.opacity");m(h,a,e,l,{prefix:"",cLetter:"z"});n.coerceSelectionMarkerOpacity(a,l)}else a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":958}],961:[function(b,y,D){y.exports=
function(n,m,p,h,a){n.location=m.location;n.z=m.z;m=h[a];m.fIn&&m.fIn.properties&&(n.properties=m.fIn.properties);n.ct=m.ct;return n}},{}],962:[function(b,y,D){var n=b("../../plots/cartesian/axes"),m=b("./attributes"),p=b("../../lib").fillText;y.exports=function(h,a,d){var e=h.cd,l=e[0].trace,k=h.subplot,c,f;for(c=0;c<e.length;c++){var g=e[c];var q=!1;if(g._polygons){for(f=0;f<g._polygons.length;f++)g._polygons[f].contains([a,d])&&(q=!q),g._polygons[f].contains([a+360,d])&&(q=!q);if(q)break}}if(q&&
g)return h.x0=h.x1=h.xa.c2p(g.ct),h.y0=h.y1=h.ya.c2p(g.ct),h.index=g.index,h.location=g.loc,h.z=g.z,h.zLabel=n.tickText(k.mockAxis,k.mockAxis.c2l(g.z),"hover").text,h.hovertemplate=g.hovertemplate,a=g,l.hovertemplate||(e=a.hi||l.hoverinfo,d=String(a.loc),c="all"===e?m.hoverinfo.flags:e.split("+"),e=-1!==c.indexOf("name"),k=-1!==c.indexOf("location"),g=-1!==c.indexOf("z"),c=-1!==c.indexOf("text"),f=[],!e&&k?h.nameOverride=d:(e&&(h.nameOverride=l.name),k&&f.push(d)),g&&f.push(h.zLabel),c&&p(a,l,f),
h.extraText=f.join("\x3cbr\x3e")),[h]}},{"../../lib":749,"../../plots/cartesian/axes":797,"./attributes":958}],963:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"choropleth",basePlotModule:b("../../plots/geo"),
categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":829,"../heatmap/colorbar":1037,"./attributes":958,"./calc":959,"./defaults":960,"./event_data":961,"./hover":962,"./plot":964,"./select":965,"./style":966}],964:[function(b,y,D){var n=b("d3"),m=b("../../lib"),p=b("../../lib/geo_location_utils"),h=b("../../lib/topojson_utils").getTopojsonFeatures,a=b("../../plots/cartesian/autorange").findExtremes,d=b("./style").style;y.exports={calcGeoJSON:function(e,l){var k=e[0].trace;l=l[k.geo];
var c=l._subplot,f=k.locationmode,g=k._length,q="geojson-id"===f?p.extractTraceFeature(e):h(k,c.topojson);c=[];for(var t=[],u=0;u<g;u++){var w=e[u],x="geojson-id"===f?w.fOut:p.locationToFeature(f,w.loc,q);x?(w.geojson=x,w.ct=x.properties.ct,w._polygons=p.feature2polygons(x),w=p.computeBbox(x),c.push(w[0],w[2]),t.push(w[1],w[3])):w.geojson=null}"geojson"===l.fitbounds&&"geojson-id"===f&&(e=p.computeBbox(p.getTraceGeojson(k)),c=[e[0],e[2]],t=[e[1],e[3]]);e={padded:!0};k._extremes.lon=a(l.lonaxis._ax,
c,e);k._extremes.lat=a(l.lataxis._ax,t,e)},plot:function(e,l,k){l=l.layers.backplot.select(".choroplethlayer");m.makeTraceGroups(l,k,"trace choropleth").each(function(c){var f=n.select(this).selectAll("path.choroplethlocation").data(m.identity);f.enter().append("path").classed("choroplethlocation",!0);f.exit().remove();d(e,c)})}}},{"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/topojson_utils":776,"../../plots/cartesian/autorange":796,"./style":966,d3:169}],965:[function(b,y,D){y.exports=
function(n,m){var p=n.cd,h=n.xaxis,a=n.yaxis,d=[],e,l;if(!1===m)for(e=0;e<p.length;e++)p[e].selected=0;else for(e=0;e<p.length;e++){var k=p[e];if(l=k.ct){var c=h.c2p(l);var f=a.c2p(l);m.contains([c,f],null,e,n)?(d.push({pointNumber:e,lon:l[0],lat:l[1]}),k.selected=1):k.selected=0}}return d}},{}],966:[function(b,y,D){function n(d,e){var l=e[0].trace;e=e[0].node3.selectAll(".choroplethlocation");var k=l.marker||{},c=k.line||{},f=a.makeColorScaleFuncFromTrace(l);e.each(function(g){m.select(this).attr("fill",
f(g.z)).call(p.stroke,g.mlc||c.color).call(h.dashLine,"",g.mlw||c.width||0).style("opacity",k.opacity)});h.selectedPointStyle(e,l,d)}var m=b("d3"),p=b("../../components/color"),h=b("../../components/drawing"),a=b("../../components/colorscale");y.exports={style:function(d,e){e&&n(d,e)},styleOnSelect:function(d,e){var l=e[0].node3,k=e[0].trace;k.selectedpoints?h.selectedPointStyle(l.selectAll(".choroplethlocation"),k,d):n(d,e)}}},{"../../components/color":615,"../../components/colorscale":627,"../../components/drawing":637,
d3:169}],967:[function(b,y,D){D=b("../choropleth/attributes");var n=b("../../components/colorscale/attributes"),m=b("../../plots/template_attributes").hovertemplateAttrs,p=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;y.exports=b({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},D.featureidkey,{}),below:{valType:"string",editType:"plot"},text:D.text,hovertext:D.hovertext,marker:{line:{color:b({},
D.marker.line.color,{editType:"plot"}),width:b({},D.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},D.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},D.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:b({},D.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:D.hoverinfo,hovertemplate:m({},{keys:["properties"]}),showlegend:b({},p.showlegend,{dflt:!1})},
n("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../choropleth/attributes":958}],968:[function(b,y,D){function n(l){var k=l[0].trace,c=k._opts;if(k.selectedpoints){k=a.makeSelectedPointStyleFns(k);for(var f=0;f<l.length;f++){var g=l[f];g.fOut&&(g.fOut.properties.mo2=k.selectedOpacityFn(g))}l={type:"identity",property:"mo2"}}else l=p.isArrayOrTypedArray(k.marker.opacity)?
{type:"identity",property:"mo"}:k.marker.opacity;p.extendFlat(c.fill.paint,{"fill-opacity":l});p.extendFlat(c.line.paint,{"line-opacity":l});return c}var m=b("fast-isnumeric"),p=b("../../lib"),h=b("../../components/colorscale"),a=b("../../components/drawing"),d=b("../../lib/geojson_utils").makeBlank,e=b("../../lib/geo_location_utils");y.exports={convert:function(l){var k=l[0].trace,c=!0===k.visible&&0!==k._length,f={layout:{visibility:"none"},paint:{}},g={layout:{visibility:"none"},paint:{}},q=k._opts=
{fill:f,line:g,geojson:d()};if(!c)return q;c=e.extractTraceFeature(l);if(!c)return q;var t=h.makeColorScaleFuncFromTrace(k),u=k.marker;k=u.line||{};var w;p.isArrayOrTypedArray(u.opacity)&&(w=function(v){v=v.mo;return m(v)?+p.constrain(v,0,1):0});var x;p.isArrayOrTypedArray(k.color)&&(x=function(v){return v.mlc});var E;p.isArrayOrTypedArray(k.width)&&(E=function(v){return v.mlw});for(var F=0;F<l.length;F++){var z=l[F],B=z.fOut;if(B){var C=B.properties;C.fc=t(z.z);w&&(C.mo=w(z));x&&(C.mlc=x(z));E&&
(C.mlw=E(z));z.ct=C.ct;z._polygons=e.feature2polygons(B)}}w=w?{type:"identity",property:"mo"}:u.opacity;p.extendFlat(f.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":w});p.extendFlat(g.paint,{"line-color":x?{type:"identity",property:"mlc"}:k.color,"line-width":E?{type:"identity",property:"mlw"}:k.width,"line-opacity":w});f.layout.visibility="visible";g.layout.visibility="visible";q.geojson={type:"FeatureCollection",features:c};n(l);return q},convertOnSelect:n}},{"../../components/colorscale":627,
"../../components/drawing":637,"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/geojson_utils":743,"fast-isnumeric":241}],969:[function(b,y,D){var n=b("../../lib"),m=b("../../components/colorscale/defaults"),p=b("./attributes");y.exports=function(h,a,d,e){function l(f,g){return n.coerce(h,a,p,f,g)}d=l("locations");var k=l("z"),c=l("geojson");n.isArrayOrTypedArray(d)&&d.length&&n.isArrayOrTypedArray(k)&&k.length&&("string"===typeof c&&""!==c||n.isPlainObject(c))?(l("featureidkey"),a._length=
Math.min(d.length,k.length),l("below"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),m(h,a,e,l,{prefix:"",cLetter:"z"}),n.coerceSelectionMarkerOpacity(a,l)):a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":967}],970:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../choropleth/calc"),plot:b("./plot"),hoverPoints:b("../choropleth/hover"),
eventData:b("../choropleth/event_data"),selectPoints:b("../choropleth/select"),styleOnSelect:function(n,m){m&&m[0].trace._glTrace.updateOnSelect(m)},getBelow:function(n,m){n=m.getMapLayers();for(m=n.length-2;0<=m;m--){var p=n[m].id;if("string"===typeof p&&0===p.indexOf("water"))for(var h=m+1;h<n.length;h++)if(p=n[h].id,"string"===typeof p&&-1===p.indexOf("plotly-"))return p}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],
meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":854,"../choropleth/calc":959,"../choropleth/event_data":961,"../choropleth/hover":962,"../choropleth/select":965,"../heatmap/colorbar":1037,"./attributes":967,"./defaults":969,"./plot":971}],971:[function(b,y,D){function n(a,d){this.type="choroplethmapbox";this.subplot=a;this.uid=d;this.sourceId="source-"+d;this.layerList=[["fill",h+d+"-fill"],["line",h+d+"-line"]];this.below=null}var m=b("./convert").convert,p=b("./convert").convertOnSelect,
h=b("../../plots/mapbox/constants").traceLayerPrefix;b=n.prototype;b.update=function(a){this._update(m(a))};b.updateOnSelect=function(a){this._update(p(a))};b._update=function(a){var d=this.subplot,e=this.layerList,l=d.belowLookup["trace-"+this.uid];d.map.getSource(this.sourceId).setData(a.geojson);l!==this.below&&(this._removeLayers(),this._addLayers(a,l),this.below=l);for(l=0;l<e.length;l++){var k=e[l],c=k[1];k=a[k[0]];d.setOptions(c,"setLayoutProperty",k.layout);"visible"===k.layout.visibility&&
d.setOptions(c,"setPaintProperty",k.paint)}};b._addLayers=function(a,d){for(var e=this.subplot,l=this.layerList,k=this.sourceId,c=0;c<l.length;c++){var f=l[c],g=f[0],q=a[g];e.addLayer({type:g,id:f[1],source:k,layout:q.layout,paint:q.paint},d)}};b._removeLayers=function(){for(var a=this.subplot.map,d=this.layerList,e=d.length-1;0<=e;e--)a.removeLayer(d[e][1])};b.dispose=function(){var a=this.subplot.map;this._removeLayers();a.removeSource(this.sourceId)};y.exports=function(a,d){var e=d[0].trace,l=
new n(a,e.uid),k=l.sourceId,c=m(d);e=l.below=a.belowLookup["trace-"+e.uid];a.map.addSource(k,{type:"geojson",data:c.geojson});l._addLayers(c,e);return d[0].trace._glTrace=l}},{"../../plots/mapbox/constants":852,"./convert":968}],972:[function(b,y,D){D=b("../../components/colorscale/attributes");var n=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../mesh3d/attributes"),p=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var h={x:{valType:"data_array",editType:"calc+clearAxisTypes"},
y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,
editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:n({editType:"calc"},{keys:["norm"]}),showlegend:b({},p.showlegend,{dflt:!1})};b(h,D("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(a){h[a]=m[a]});h.hoverinfo=b({},p.hoverinfo,{editType:"calc",flags:"x y z u v w norm text name".split(" "),dflt:"x+y+z+norm+text+name"});h.transforms=void 0;y.exports=h},{"../../components/colorscale/attributes":622,
"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../mesh3d/attributes":1096}],973:[function(b,y,D){var n=b("../../components/colorscale/calc");y.exports=function(m,p){for(var h=p.u,a=p.v,d=p.w,e=Math.min(p.x.length,p.y.length,p.z.length,h.length,a.length,d.length),l=-Infinity,k=Infinity,c=0;c<e;c++){var f=h[c],g=a[c],q=d[c];f=Math.sqrt(f*f+g*g+q*q);l=Math.max(l,f);k=Math.min(k,f)}p._len=e;p._normMax=l;n(m,p,{vals:[k,l],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623}],
974:[function(b,y,D){function n(g,q){this.scene=g;this.uid=q;this.data=this.mesh=null}function m(g,q){function t(E,F){var z=u[F],B=w[k[F]];return a(E,function(C){return z.d2l(C)*B})}var u=g.fullSceneLayout,w=g.dataScale;g={};g.vectors=l(t(q.u,"xaxis"),t(q.v,"yaxis"),t(q.w,"zaxis"),q._len);g.positions=l(t(q.x,"xaxis"),t(q.y,"yaxis"),t(q.z,"zaxis"),q._len);var x=e(q);g.colormap=d(q);g.vertexIntensityBounds=[x.min/q._normMax,x.max/q._normMax];g.coneOffset=c[q.anchor];g.coneSize="scaled"===q.sizemode?
q.sizeref||.5:q.sizeref&&q._normMax?q.sizeref/q._normMax:.5;g=p(g);x=q.lightposition;g.lightPosition=[x.x,x.y,x.z];g.ambient=q.lighting.ambient;g.diffuse=q.lighting.diffuse;g.specular=q.lighting.specular;g.roughness=q.lighting.roughness;g.fresnel=q.lighting.fresnel;g.opacity=q.opacity;q._pad=f[q.anchor]*g.vectorScale*g.coneScale*q._normMax;return g}var p=b("gl-cone3d"),h=b("gl-cone3d").createConeMesh,a=b("../../lib").simpleMap,d=b("../../lib/gl_format_color").parseColorScale,e=b("../../components/colorscale").extractOpts,
l=b("../../plots/gl3d/zip3");b=n.prototype;b.handlePick=function(g){if(g.object===this.mesh){var q=g.index=g.data.index,t=this.data.u[q],u=this.data.v[q],w=this.data.w[q];g.traceCoordinate=[this.data.x[q],this.data.y[q],this.data.z[q],t,u,w,Math.sqrt(t*t+u*u+w*w)];t=this.data.hovertext||this.data.text;Array.isArray(t)&&void 0!==t[q]?g.textLabel=t[q]:t&&(g.textLabel=t);return!0}};var k={xaxis:0,yaxis:1,zaxis:2},c={tip:1,tail:0,cm:.25,center:.5},f={tip:1,tail:1,cm:.75,center:.5};b.update=function(g){this.data=
g;g=m(this.scene,g);this.mesh.update(g)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};y.exports=function(g,q){var t=g.glplot.gl,u=m(g,q);t=h(t,u);u=new n(g,q.uid);u.mesh=t;u.data=q;t._trace=u;g.glplot.add(t);return u}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gl_format_color":745,"../../plots/gl3d/zip3":850,"gl-cone3d":259}],975:[function(b,y,D){var n=b("../../lib"),m=b("../../components/colorscale/defaults"),p=b("./attributes");y.exports=function(h,
a,d,e){function l(t,u){return n.coerce(h,a,p,t,u)}d=l("u");var k=l("v"),c=l("w"),f=l("x"),g=l("y"),q=l("z");d&&d.length&&k&&k.length&&c&&c.length&&f&&f.length&&g&&g.length&&q&&q.length?(l("sizeref"),l("sizemode"),l("anchor"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),m(h,a,e,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),a._length=null):a.visible=
!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":972}],976:[function(b,y,D){y.exports={moduleType:"trace",name:"cone",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),eventData:function(n,m){n.norm=m.traceCoordinate[6];return n},meta:{}}},{"../../plots/gl3d":839,"./attributes":972,"./calc":973,"./convert":974,"./defaults":975}],
977:[function(b,y,D){D=b("../heatmap/attributes");var n=b("../scatter/attributes"),m=b("../../components/colorscale/attributes"),p=b("../../components/drawing/attributes").dash,h=b("../../plots/font_attributes"),a=b("../../lib/extend").extendFlat,d=b("../../constants/filter_ops"),e=d.COMPARISON_OPS2;d=d.INTERVAL_OPS;b("../../constants/docs");b=n.line;y.exports=a({z:D.z,x:D.x,x0:D.x0,dx:D.dx,y:D.y,y0:D.y0,dy:D.dy,text:D.text,hovertext:D.hovertext,transpose:D.transpose,xtype:D.xtype,ytype:D.ytype,zhoverformat:D.zhoverformat,
hovertemplate:D.hovertemplate,hoverongaps:D.hoverongaps,connectgaps:a({},D.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},
end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:h({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",
values:[].concat(e).concat(d),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:a({},b.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:p,smoothing:a({},b.smoothing,{}),editType:"plot"}},m("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../components/drawing/attributes":636,"../../constants/docs":719,"../../constants/filter_ops":720,
"../../lib/extend":739,"../../plots/font_attributes":825,"../heatmap/attributes":1034,"../scatter/attributes":1155}],978:[function(b,y,D){var n=b("../../components/colorscale"),m=b("../heatmap/calc"),p=b("./set_contours"),h=b("./end_plus");y.exports=function(a,d){var e=m(a,d),l=e[0].z;p(d,l);var k=d.contours,c=n.extractOpts(d);"heatmap"===k.coloring&&c.auto&&!1===d.autocontour?(l=k.start,c=h(k),k=k.size||1,c=Math.floor((c-l)/k)+1,isFinite(k)||(c=k=1),l-=k/2,k=[l,l+c*k]):k=l;n.calc(a,d,{vals:k,cLetter:"z"});
return e}},{"../../components/colorscale":627,"../heatmap/calc":1035,"./end_plus":988,"./set_contours":996}],979:[function(b,y,D){y.exports=function(n,m){var p=n[0],h=p.z,a;switch(m.type){case "levels":p=Math.min(h[0][0],h[0][1]);for(a=0;a<n.length;a++){var d=n[a];d.prefixBoundary=!d.edgepaths.length&&(p>d.level||d.starts.length&&p===d.level)}break;case "constraint":if(p.prefixBoundary=!1,!p.edgepaths.length){var e=p.x.length,l=p.y.length;n=-Infinity;d=Infinity;for(a=0;a<l;a++)d=Math.min(d,h[a][0]),
d=Math.min(d,h[a][e-1]),n=Math.max(n,h[a][0]),n=Math.max(n,h[a][e-1]);for(a=1;a<e-1;a++)d=Math.min(d,h[0][a]),d=Math.min(d,h[l-1][a]),n=Math.max(n,h[0][a]),n=Math.max(n,h[l-1][a]);a=m.value;switch(m._operation){case "\x3e":a>n&&(p.prefixBoundary=!0);break;case "\x3c":if(a<d||p.starts.length&&a===d)p.prefixBoundary=!0;break;case "[]":m=Math.min(a[0],a[1]);a=Math.max(a[0],a[1]);if(a<d||m>n||p.starts.length&&a===d)p.prefixBoundary=!0;break;case "][":m=Math.min(a[0],a[1]),a=Math.max(a[0],a[1]),m<d&&a>
n&&(p.prefixBoundary=!0)}}}}},{}],980:[function(b,y,D){var n=b("../../components/colorscale"),m=b("./make_color_map"),p=b("./end_plus");y.exports={min:"zmin",max:"zmax",calc:function(h,a,d){h=a.contours;var e=a.line,l=h.size||1,k=h.coloring,c=m(a,{isColorbar:!0});"heatmap"===k?(a=n.extractOpts(a),d._fillgradient=a.reversescale?n.flipScale(a.colorscale):a.colorscale,d._zrange=[a.min,a.max]):"fill"===k&&(d._fillcolor=c);d._line={color:"lines"===k?c:e.color,width:!1!==h.showlines?e.width:0,dash:e.dash};
d._levels={start:h.start,end:p(h),size:l}}}},{"../../components/colorscale":627,"./end_plus":988,"./make_color_map":993}],981:[function(b,y,D){y.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,
LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],982:[function(b,y,D){var n=b("fast-isnumeric"),m=b("./label_defaults");D=b("../../components/color");var p=D.addOpacity,h=D.opacity;b=b("../../constants/filter_ops");var a=b.CONSTRAINT_REDUCTION,d=b.COMPARISON_OPS2;y.exports=function(e,l,k,c,f,g){var q=l.contours,t=k("contours.operation");q._operation=a[t];if(-1===
d.indexOf(q.operation))if(k("contours.value",[0,1]),Array.isArray(q.value))if(2<q.value.length)q.value=q.value.slice(2);else if(0===q.length)q.value=[0,1];else if(2>q.length){var u=parseFloat(q.value[0]);q.value=[u,u+1]}else q.value=[parseFloat(q.value[0]),parseFloat(q.value[1])];else n(q.value)&&(u=parseFloat(q.value),q.value=[u,u+1]);else k("contours.value",0),n(q.value)||(Array.isArray(q.value)?q.value=parseFloat(q.value[0]):q.value=0);if("\x3d"===t)q=q.showlines=!0;else{q=k("contours.showlines");
var w=k("fillcolor",p((e.line||{}).color||f,.5))}if(q){e=w&&h(w)?p(l.fillcolor,1):f;var x=k("line.color",e);k("line.width",2);k("line.dash")}k("line.smoothing");m(k,c,x,g)}},{"../../components/color":615,"../../constants/filter_ops":720,"./label_defaults":992,"fast-isnumeric":241}],983:[function(b,y,D){function n(d,e){function l(f){return a(f)?+f:null}var k=Array.isArray(e),c;-1!==h.COMPARISON_OPS2.indexOf(d)?c=k?l(e[0]):l(e):-1!==h.INTERVAL_OPS.indexOf(d)?c=k?[l(e[0]),l(e[1])]:[l(e),l(e)]:-1!==h.SET_OPS.indexOf(d)&&
(c=k?e.map(l):[l(e)]);return c}function m(d){return function(e){e=n(d,e);var l=Math.min(e[0],e[1]);e=Math.max(e[0],e[1]);return{start:l,end:e,size:e-l}}}function p(d){return function(e){e=n(d,e);return{start:e,end:Infinity,size:Infinity}}}var h=b("../../constants/filter_ops"),a=b("fast-isnumeric");y.exports={"[]":m("[]"),"][":m("]["),"\x3e":p("\x3e"),"\x3c":p("\x3c"),"\x3d":p("\x3d")}},{"../../constants/filter_ops":720,"fast-isnumeric":241}],984:[function(b,y,D){y.exports=function(n,m,p,h){n=h("contours.start");
h=h("contours.end");h=!1===n||!1===h;n=p("contours.size");(h?!(m.autocontour=!0):!p("autocontour",!1))&&n||p("ncontours")}},{}],985:[function(b,y,D){function n(p){return m.extendFlat({},p,{edgepaths:m.extendDeep([],p.edgepaths),paths:m.extendDeep([],p.paths),starts:m.extendDeep([],p.starts)})}var m=b("../../lib");y.exports=function(p,h){var a=function(l){return l.reverse()},d=function(l){return l};switch(h){case "\x3d":case "\x3c":return p;case "\x3e":1!==p.length&&m.warn("Contour data invalid for the specified inequality operation.");
var e=p[0];for(h=0;h<e.edgepaths.length;h++)e.edgepaths[h]=a(e.edgepaths[h]);for(h=0;h<e.paths.length;h++)e.paths[h]=a(e.paths[h]);for(h=0;h<e.starts.length;h++)e.starts[h]=a(e.starts[h]);return p;case "][":h=a,a=d,d=h;case "[]":2!==p.length&&m.warn("Contour data invalid for the specified inequality range operation.");e=n(p[0]);p=n(p[1]);for(h=0;h<e.edgepaths.length;h++)e.edgepaths[h]=a(e.edgepaths[h]);for(h=0;h<e.paths.length;h++)e.paths[h]=a(e.paths[h]);for(h=0;h<e.starts.length;h++)e.starts[h]=
a(e.starts[h]);for(;p.edgepaths.length;)e.edgepaths.push(d(p.edgepaths.shift()));for(;p.paths.length;)e.paths.push(d(p.paths.shift()));for(;p.starts.length;)e.starts.push(d(p.starts.shift()));return[e]}}},{"../../lib":749}],986:[function(b,y,D){var n=b("../../lib"),m=b("../heatmap/xyz_defaults"),p=b("./constraint_defaults"),h=b("./contours_defaults"),a=b("./style_defaults"),d=b("./attributes");y.exports=function(e,l,k,c){function f(t,u){return n.coerce(e,l,d,t,u)}function g(t){return n.coerce2(e,
l,d,t)}if(m(e,l,f,c)){f("text");f("hovertext");f("hovertemplate");f("hoverongaps");var q="constraint"===f("contours.type");f("connectgaps",n.isArray1D(l.z));q?p(e,l,f,c,k):(h(e,l,f,g),a(e,l,f,c))}else l.visible=!1}},{"../../lib":749,"../heatmap/xyz_defaults":1048,"./attributes":977,"./constraint_defaults":982,"./contours_defaults":984,"./style_defaults":998}],987:[function(b,y,D){var n=b("../../lib"),m=b("./constraint_mapping"),p=b("./end_plus");y.exports=function(h,a,d){var e="constraint"===h.type?
m[h._operation](h.value):h,l=e.size,k=[],c=p(e),f=d.trace._carpetTrace;a=f?{xaxis:f.aaxis,yaxis:f.baxis,x:d.a,y:d.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:d.x,y:d.y};for(e=e.start;e<c;e+=l)if(k.push(n.extendFlat({level:e,crossings:{},starts:[],edgepaths:[],paths:[],z:d.z,smoothing:d.trace.line.smoothing},a)),1E3<k.length){n.warn("Too many contours, clipping at 1000",h);break}return k}},{"../../lib":749,"./constraint_mapping":983,"./end_plus":988}],988:[function(b,y,D){y.exports=function(n){return n.end+
n.size/1E6}},{}],989:[function(b,y,D){function n(d,e,l,k){return Math.abs(d[0]-e[0])<l&&Math.abs(d[1]-e[1])<k}function m(d,e,l,k,c){var f=e.join(","),g=d.crossings[f],q=g,t=0,u=0;20<q&&l?208===q||1114===q?t=0===e[0]?1:-1:u=0===e[1]?1:-1:-1!==a.BOTTOMSTART.indexOf(q)?u=1:-1!==a.LEFTSTART.indexOf(q)?t=1:-1!==a.TOPSTART.indexOf(q)?u=-1:t=-1;var w=[t,u];q=[p(d,e,[-w[0],-w[1]])];var x=d.z.length,E=d.z[0].length;t=e.slice();var F=w.slice();for(u=0;1E4>u;u++){20<g?(g=a.CHOOSESADDLE[g][0>(w[0]||w[1])?0:1],
d.crossings[f]=a.SADDLEREMAINDER[g]):delete d.crossings[f];w=a.NEWDELTA[g];if(!w){h.log("Found bad marching index:",g,e,d.level);break}q.push(p(d,e,w));e[0]+=w[0];e[1]+=w[1];f=e.join(",");n(q[q.length-1],q[q.length-2],k,c)&&q.pop();g=w[0]&&(0>e[0]||e[0]>E-2)||w[1]&&(0>e[1]||e[1]>x-2);if(e[0]===t[0]&&e[1]===t[1]&&w[0]===F[0]&&w[1]===F[1]||l&&g)break;g=d.crossings[f]}1E4===u&&h.log("Infinite loop in contour?");e=n(q[0],q[q.length-1],k,c);w=0;x=.2*d.smoothing;f=[];g=0;for(u=1;u<q.length;u++){F=q[u];
var z=q[u-1];E=F[2]-z[2];F=F[3]-z[3];E=Math.sqrt(E*E+F*F);w+=E;f.push(E)}E=w/f.length*x;for(u=q.length-2;u>=g;u--)if(F=f[u],F<E){x=0;for(w=u-1;w>=g;w--)if(F+f[w]<E)F+=f[w];else break;if(e&&u===q.length-2)for(x=0;x<w;x++)if(F+f[x]<E)F+=f[x];else break;F=u-w+x+1;z=Math.floor((u+w+x+2)/2);F=e||u!==q.length-2?e||-1!==w?F%2?q[z%q.length]:[(q[z%q.length][0]+q[(z+1)%q.length][0])/2,(q[z%q.length][1]+q[(z+1)%q.length][1])/2]:q[0]:q[q.length-1];q.splice(w+1,u-w+1,F);u=w+1;x&&(g=x);e&&(u===q.length-2?q[x]=
q[q.length-1]:0===u&&(q[q.length-1]=q[0]))}q.splice(0,g);for(u=0;u<q.length;u++)q[u].length=2;if(!(2>q.length))if(e)q.pop(),d.paths.push(q);else{l||h.log("Unclosed interior contour?",d.level,t.join(","),q.join("L"));f=!1;for(l=0;l<d.edgepaths.length;l++)if(u=d.edgepaths[l],!f&&n(u[0],q[q.length-1],k,c)){q.pop();f=!0;g=!1;for(t=0;t<d.edgepaths.length;t++)if(e=d.edgepaths[t],n(e[e.length-1],q[0],k,c)){g=!0;q.shift();d.edgepaths.splice(l,1);t===l?d.paths.push(q.concat(e)):(t>l&&t--,d.edgepaths[t]=e.concat(q,
u));break}g||(d.edgepaths[l]=q.concat(u))}for(l=0;l<d.edgepaths.length&&!f;l++)u=d.edgepaths[l],n(u[u.length-1],q[0],k,c)&&(q.shift(),d.edgepaths[l]=u.concat(q),f=!0);f||d.edgepaths.push(q)}}function p(d,e,l){var k=e[0]+Math.max(l[0],0);e=e[1]+Math.max(l[1],0);var c=d.z[e][k],f=d.xaxis,g=d.yaxis;if(l[1])return l=(d.level-c)/(d.z[e][k+1]-c),[f.c2p((1-l)*d.x[k]+l*d.x[k+1],!0),g.c2p(d.y[e],!0),k+l,e];l=(d.level-c)/(d.z[e+1][k]-c);return[f.c2p(d.x[k],!0),g.c2p((1-l)*d.y[e]+l*d.y[e+1],!0),k,e+l]}var h=
b("../../lib"),a=b("./constants");y.exports=function(d,e,l){var k,c;e=e||.01;l=l||.01;for(c=0;c<d.length;c++){var f=d[c];for(k=0;k<f.starts.length;k++){var g=f.starts[k];m(f,g,"edge",e,l)}for(k=0;Object.keys(f.crossings).length&&1E4>k;)k++,g=Object.keys(f.crossings)[0].split(",").map(Number),m(f,g,void 0,e,l);1E4===k&&h.log("Infinite loop in contour?")}}},{"../../lib":749,"./constants":981}],990:[function(b,y,D){var n=b("../../components/color"),m=b("../heatmap/hover");y.exports=function(p,h,a,d,
e){(p=m(p,h,a,d,e,!0))&&p.forEach(function(l){var k=l.trace;"constraint"===k.contours.type&&(k.fillcolor&&n.opacity(k.fillcolor)?l.color=n.addOpacity(k.fillcolor,1):k.contours.showlines&&n.opacity(k.line.color)&&(l.color=n.addOpacity(k.line.color,1)))});return p}},{"../../components/color":615,"../heatmap/hover":1041}],991:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot").plot,style:b("./style"),colorbar:b("./colorbar"),hoverPoints:b("./hover"),
moduleType:"trace",name:"contour",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":810,"./attributes":977,"./calc":978,"./colorbar":980,"./defaults":986,"./hover":990,"./plot":995,"./style":997}],992:[function(b,y,D){var n=b("../../lib");y.exports=function(m,p,h,a){a||(a={});m("contours.showlabels")&&(p=p.font,n.coerceFont(m,"contours.labelfont",{family:p.family,size:p.size,color:h}),m("contours.labelformat"));
!1!==a.hasHover&&m("zhoverformat")}},{"../../lib":749}],993:[function(b,y,D){var n=b("d3"),m=b("../../components/colorscale"),p=b("./end_plus");y.exports=function(h){var a=h.contours,d=a.start,e=p(a),l=a.size||1,k=Math.floor((e-d)/l)+1,c="lines"===a.coloring?0:1,f=m.extractOpts(h);isFinite(l)||(k=l=1);var g=f.reversescale?m.flipScale(f.colorscale):f.colorscale,q=g.length;h=Array(q);e=Array(q);var t;if("heatmap"===a.coloring){d=f.min;c=f.max;for(t=0;t<q;t++)f=g[t],h[t]=f[0]*(c-d)+d,e[t]=f[1];l=n.extent([d,
c,a.start,a.start+l*(k-1)]);a=l[d<c?0:1];l=l[d<c?1:0];a!==d&&(h.splice(0,0,a),e.splice(0,0,e[0]));l!==c&&(h.push(l),e.push(e[e.length-1]))}else for(t=0;t<q;t++)f=g[t],h[t]=(f[0]*(k+c-1)-c/2)*l+d,e[t]=f[1];return m.makeColorScaleFunc({domain:h,range:e},{noNumericCheck:!0})}},{"../../components/colorscale":627,"./end_plus":988,d3:169}],994:[function(b,y,D){var n=b("./constants");y.exports=function(m){var p=m[0].z,h=p.length,a=p[0].length,d=2===h||2===a,e,l,k;for(l=0;l<h-1;l++){var c=[];0===l&&(c=c.concat(n.BOTTOMSTART));
l===h-2&&(c=c.concat(n.TOPSTART));for(e=0;e<a-1;e++){var f=c.slice();0===e&&(f=f.concat(n.LEFTSTART));e===a-2&&(f=f.concat(n.RIGHTSTART));var g=e+","+l;var q=[[p[l][e],p[l][e+1]],[p[l+1][e],p[l+1][e+1]]];for(k=0;k<m.length;k++){var t=m[k];var u=t.level;var w=(q[0][0]>u?0:1)+(q[0][1]>u?0:2)+(q[1][1]>u?0:4)+(q[1][0]>u?0:8);u=5===w||10===w?u>(q[0][0]+q[0][1]+q[1][0]+q[1][1])/4?5===w?713:1114:5===w?104:208:15===w?0:w;u&&(t.crossings[g]=u,-1!==f.indexOf(u)&&(t.starts.push([e,l]),d&&-1!==f.indexOf(u,f.indexOf(u)+
1)&&t.starts.push([e,l])))}}}}},{"./constants":981}],995:[function(b,y,D){function n(F,z,B,C){var v="fill"===C.coloring||"constraint"===C.type&&"\x3d"!==C._operation,G="M"+B.join("L")+"Z";v&&w(z,C);F=a.ensureSingle(F,"g","contourfill").selectAll("path").data(v?z:[]);F.enter().append("path");F.exit().remove();F.each(function(I){(I=(I.prefixBoundary?G:"")+m(I,B))?h.select(this).attr("d",I).style("stroke","none"):h.select(this).remove()})}function m(F,z){for(var B="",C=0,v=F.edgepaths.map(function(L,
P){return P}),G=!0,I,J,K,N;v.length;){J=d.smoothopen(F.edgepaths[C],F.smoothing);B+=G?J:J.replace(/^M/,"L");v.splice(v.indexOf(C),1);G=F.edgepaths[C][F.edgepaths[C].length-1];K=-1;for(J=0;4>J;J++){if(!G){a.log("Missing end?",C,F);break}.01>Math.abs(G[1]-z[0][1])&&!(.01>Math.abs(G[0]-z[2][0]))?I=z[1]:.01>Math.abs(G[0]-z[0][0])?I=z[0]:.01>Math.abs(G[1]-z[2][1])?I=z[3]:.01>Math.abs(G[0]-z[2][0])&&(I=z[2]);for(N=0;N<F.edgepaths.length;N++){var H=F.edgepaths[N][0];.01>Math.abs(G[0]-I[0])?.01>Math.abs(G[0]-
H[0])&&0<=(H[1]-G[1])*(I[1]-H[1])&&(I=H,K=N):.01>Math.abs(G[1]-I[1])?.01>Math.abs(G[1]-H[1])&&0<=(H[0]-G[0])*(I[0]-H[0])&&(I=H,K=N):a.log("endpt to newendpt is not vert. or horz.",G,I,H)}G=I;if(0<=K)break;B+="L"+I}if(K===F.edgepaths.length){a.log("unclosed perimeter path");break}C=K;if(G=-1===v.indexOf(C))C=v[0],B+="Z"}for(C=0;C<F.paths.length;C++)B+=d.smoothclosed(F.paths[C],F.smoothing);return B}function p(F,z,B,C,v){var G=a.ensureSingle(F,"g","contourlines"),I=!1!==v.showlines,J=v.showlabels,K=
I&&J,N=D.createLines(G,I||J,z);G=D.createLineClip(G,K,B,C.trace.uid);F=F.selectAll("g.contourlabels").data(J?[0]:[]);F.exit().remove();F.enter().append("g").classed("contourlabels",!0);if(J){var H=[],L=[];a.clearLocationCache();var P=D.labelFormatter(B,C),Q=d.tester.append("text").attr("data-notex",1).call(d.font,v.labelfont),S=z[0].xaxis,O=z[0].yaxis;v=S._length;var U=O._length,X=S.range,da=O.range,ea=a.aggNums(Math.min,null,C.x),ca=a.aggNums(Math.max,null,C.x),ia=a.aggNums(Math.min,null,C.y),ha=
a.aggNums(Math.max,null,C.y);C=Math.max(S.c2p(ea,!0),0);S=Math.min(S.c2p(ca,!0),v);ca=Math.max(O.c2p(ha,!0),0);O=Math.min(O.c2p(ia,!0),U);var fa={};X[0]<X[1]?(fa.left=C,fa.right=S):(fa.left=S,fa.right=C);da[0]<da[1]?(fa.top=ca,fa.bottom=O):(fa.top=O,fa.bottom=ca);fa.middle=(fa.top+fa.bottom)/2;fa.center=(fa.left+fa.right)/2;H.push([[fa.left,fa.top],[fa.right,fa.top],[fa.right,fa.bottom],[fa.left,fa.bottom]]);var na=x.LABELDISTANCE*Math.sqrt(v*v+U*U)/Math.max(1,z.length/x.LABELINCREASE);N.each(function(sa){var ua=
D.calcTextOpts(sa.level,P,Q,B);h.select(this).selectAll("path").each(function(){var ta=a.getVisibleSegment(this,fa,ua.height/2);if(ta&&!(ta.len<(ua.width+ua.height)*x.LABELMIN))for(var oa=Math.min(Math.ceil(ta.len/na),x.LABELMAX),va=0;va<oa;va++){var ma=D.findBestTextLocation(this,ta,ua,L,fa);if(!ma)break;D.addLabelData(ma,ua,L,H)}})});Q.remove();D.drawLabels(F,L,B,G,K?H:null)}J&&!I&&N.remove()}var h=b("d3"),a=b("../../lib"),d=b("../../components/drawing"),e=b("../../components/colorscale"),l=b("../../lib/svg_text_utils"),
k=b("../../plots/cartesian/axes"),c=b("../../plots/cartesian/set_convert"),f=b("../heatmap/plot"),g=b("./make_crossings"),q=b("./find_all_paths"),t=b("./empty_pathinfo"),u=b("./convert_to_constraints"),w=b("./close_boundaries"),x=b("./constants"),E=x.LABELOPTIMIZER;D.plot=function(F,z,B,C){var v=z.xaxis,G=z.yaxis;a.makeTraceGroups(C,B,"contour").each(function(I){var J=h.select(this),K=I[0],N=K.x,H=K.y,L=K.trace.contours,P=t(L,z,K),Q=a.ensureSingle(J,"g","heatmapcoloring"),S=[];"heatmap"===L.coloring&&
(S=[I]);f(F,z,S,Q);g(P);q(P);I=v.c2p(N[0],!0);N=v.c2p(N[N.length-1],!0);Q=G.c2p(H[0],!0);H=G.c2p(H[H.length-1],!0);H=[[I,H],[N,H],[N,Q],[I,Q]];N=P;"constraint"===L.type&&(N=u(P,L._operation));I=a.ensureSingle(J,"g","contourbg").selectAll("path").data("fill"===L.coloring?[0]:[]);I.enter().append("path");I.exit().remove();I.attr("d","M"+H.join("L")+"Z").style("stroke","none");n(J,N,H,L);p(J,P,F,K,L);N=K.trace;L="clip"+N.uid;P=F._fullLayout._clips.selectAll("#"+L).data(N.connectgaps?[]:[0]);P.enter().append("clipPath").classed("contourclip",
!0).attr("id",L);P.exit().remove();if(!1===N.connectgaps){N=z.xaxis;I=z.yaxis;Q=K.x;S=K.y;var O=K.trace._emptypoints,U=[],X=K.z.length,da=K.z[0].length,ea,ca=[];for(ea=0;ea<da;ea++)ca.push(1);for(ea=0;ea<X;ea++)U.push(ca.slice());for(ea=0;ea<O.length;ea++)X=O[ea],U[X[0]][X[1]]=0;K.zmask=U;K={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:N,yaxis:I,x:Q,y:S,z:U,smoothing:0};g([K]);q([K]);w([K],{type:"levels"});a.ensureSingle(P,"path","").attr("d",(K.prefixBoundary?"M"+H.join("L")+"Z":"")+
m(K,H))}else L=null;d.setClipUrl(J,L,F)})};D.createLines=function(F,z,B){var C=B[0].smoothing;F=F.selectAll("g.contourlevel").data(z?B:[]);F.exit().remove();F.enter().append("g").classed("contourlevel",!0);z&&(z=F.selectAll("path.openline").data(function(v){return v.pedgepaths||v.edgepaths}),z.exit().remove(),z.enter().append("path").classed("openline",!0),z.attr("d",function(v){return d.smoothopen(v,C)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"),z=F.selectAll("path.closedline").data(function(v){return v.ppaths||
v.paths}),z.exit().remove(),z.enter().append("path").classed("closedline",!0),z.attr("d",function(v){return d.smoothclosed(v,C)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"));return F};D.createLineClip=function(F,z,B,C){C=z?"clipline"+C:null;z=B._fullLayout._clips.selectAll("#"+C).data(z?[0]:[]);z.exit().remove();z.enter().append("clipPath").classed("contourlineclip",!0).attr("id",C);d.setClipUrl(F,C,B);return z};D.labelFormatter=function(F,z){F=F._fullLayout;var B=z.trace;
z=B.contours;var C={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};z.labelformat?(C.tickformat=z.labelformat,c(C,F)):(B=e.extractOpts(B))&&B.colorbar&&B.colorbar._axis?C=B.colorbar._axis:("constraint"===z.type?(z=z.value,Array.isArray(z)?C.range=[z[0],z[z.length-1]]:C.range=[z,z]):(C.range=[z.start,z.end],C.nticks=(z.end-z.start)/z.size),C.range[0]===C.range[1]&&(C.range[1]+=C.range[0]||1),C.nticks||(C.nticks=1E3),c(C,F),k.prepTicks(C),C._tmin=null,C._tmax=null);return function(v){return k.tickText(C,
v).text}};D.calcTextOpts=function(F,z,B,C){z=z(F);B.text(z).call(l.convertToTspans,C);B=B.node();C=d.bBox(B,!0);return{text:z,width:C.width,height:C.height,fontSize:+B.style["font-size"].replace("px",""),level:F,dy:(C.top+C.bottom)/2}};D.findBestTextLocation=function(F,z,B,C,v){var G=B.width;if(z.isClosed){var I=z.len/E.INITIALSEARCHPOINTS;var J=z.min+I/2;var K=z.max}else I=(z.len-G)/(E.INITIALSEARCHPOINTS+1),J=z.min+I+G/2,K=z.max-(I+G)/2;for(var N=Infinity,H=0;H<E.ITERATIONS;H++){for(;J<K;J+=I){var L=
a.getTextLocation(F,z.total,J,G);a:{var P=B;var Q=C,S=P.width/2,O=P.height/2,U=L.x,X=L.y,da=L.theta,ea=Math.cos(da)*S,ca=Math.sin(da)*S;S=(U>v.center?v.right-U:U-v.left)/(ea+Math.abs(Math.sin(da)*O));O=(X>v.middle?v.bottom-X:X-v.top)/(Math.abs(ca)+Math.cos(da)*O);if(1>S||1>O)P=Infinity;else{O=E.EDGECOST*(1/(S-1)+1/(O-1));O+=E.ANGLECOST*da*da;da=U-ea;S=X-ca;U+=ea;X+=ca;for(ea=0;ea<Q.length;ea++){ca=Q[ea];var ia=Math.cos(ca.theta)*ca.width/2,ha=Math.sin(ca.theta)*ca.width/2;ia=2*a.segmentDistance(da,
S,U,X,ca.x-ia,ca.y-ha,ca.x+ia,ca.y+ha)/(P.height+ca.height);ha=(ca=ca.level===P.level)?E.SAMELEVELDISTANCE:1;if(ia<=ha){P=Infinity;break a}O+=E.NEIGHBORCOST*(ca?E.SAMELEVELFACTOR:1)/(ia-ha)}P=O}}if(P<N){N=P;var fa=L;var na=J}}if(N>2*E.MAXCOST)break;H&&(I/=2);J=na-I/2;K=J+1.5*I}if(N<=E.MAXCOST)return fa};D.addLabelData=function(F,z,B,C){var v=z.fontSize,G=z.width+v/3;v=Math.max(0,z.height-v/3);var I=F.x,J=F.y;F=F.theta;var K=Math.sin(F),N=Math.cos(F),H=function(L,P){return[I+L*N-P*K,J+L*K+P*N]};H=
[H(-G/2,-v/2),H(-G/2,v/2),H(G/2,v/2),H(G/2,-v/2)];B.push({text:z.text,x:I,y:J,dy:z.dy,theta:F,level:z.level,width:G,height:v});C.push(H)};D.drawLabels=function(F,z,B,C,v){F=F.selectAll("text").data(z,function(G){return G.text+","+G.x+","+G.y+","+G.theta});F.exit().remove();F.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(G){var I=G.x+Math.sin(G.theta)*G.dy,J=G.y-Math.cos(G.theta)*G.dy;h.select(this).text(G.text).attr({x:I,y:J,transform:"rotate("+180*G.theta/Math.PI+
" "+I+" "+J+")"}).call(l.convertToTspans,B)});if(v){F="";for(z=0;z<v.length;z++)F+="M"+v[z].join("L")+"Z";a.ensureSingle(C,"path","").attr("d",F)}}},{"../../components/colorscale":627,"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../plots/cartesian/set_convert":817,"../heatmap/plot":1045,"./close_boundaries":979,"./constants":981,"./convert_to_constraints":985,"./empty_pathinfo":987,"./find_all_paths":989,"./make_crossings":994,
d3:169}],996:[function(b,y,D){function n(h,a,d){var e={type:"linear",range:[h,a]};m.autoTicks(e,(a-h)/(d||15));return e}var m=b("../../plots/cartesian/axes"),p=b("../../lib");y.exports=function(h,a){var d=h.contours;if(h.autocontour){var e=h.zmin,l=h.zmax;if(h.zauto||void 0===e)e=p.aggNums(Math.min,null,a);if(h.zauto||void 0===l)l=p.aggNums(Math.max,null,a);a=n(e,l,h.ncontours);d.size=a.dtick;d.start=m.tickFirst(a);a.range.reverse();d.end=m.tickFirst(a);d.start===e&&(d.start+=d.size);d.end===l&&(d.end-=
d.size);d.start>d.end&&(d.start=d.end=(d.start+d.end)/2);h._input.contours||(h._input.contours={});p.extendFlat(h._input.contours,{start:d.start,end:d.end,size:d.size});h._input.autocontour=!0}else"constraint"!==d.type&&(l=d.start,a=d.end,e=h._input.contours,l>a&&(d.start=e.start=a,a=d.end=e.end=l,l=d.start),0<d.size||(h=l===a?1:n(l,a,h.ncontours).dtick,e.size=d.size=h))}},{"../../lib":749,"../../plots/cartesian/axes":797}],997:[function(b,y,D){var n=b("d3"),m=b("../../components/drawing"),p=b("../heatmap/style"),
h=b("./make_color_map");y.exports=function(a){var d=n.select(a).selectAll("g.contour");d.style("opacity",function(e){return e[0].trace.opacity});d.each(function(e){var l=n.select(this);e=e[0].trace;var k=e.contours,c=e.line,f=k.size||1,g=k.start,q="constraint"===k.type,t=!q&&"lines"===k.coloring,u=!q&&"fill"===k.coloring,w=t||u?h(e):null;l.selectAll("g.contourlevel").each(function(F){n.select(this).selectAll("path").call(m.lineGroupStyle,c.width,t?w(F.level):c.color,c.dash)});var x=k.labelfont;l.selectAll("g.contourlabels text").each(function(F){m.font(n.select(this),
{family:x.family,size:x.size,color:x.color||(t?w(F.level):c.color)})});if(q)l.selectAll("g.contourfill path").style("fill",e.fillcolor);else if(u){var E;l.selectAll("g.contourfill path").style("fill",function(F){void 0===E&&(E=F.level);return w(F.level+.5*f)});void 0===E&&(E=g);l.selectAll("g.contourbg path").style("fill",w(E-.5*f))}});p(a)}},{"../../components/drawing":637,"../heatmap/style":1046,"./make_color_map":993,d3:169}],998:[function(b,y,D){var n=b("../../components/colorscale/defaults"),
m=b("./label_defaults");y.exports=function(p,h,a,d,e){var l=a("contours.coloring"),k,c="";"fill"===l&&(k=a("contours.showlines"));!1!==k&&("lines"!==l&&(c=a("line.color","#000")),a("line.width",.5),a("line.dash"));"none"!==l&&(!0!==p.showlegend&&(h.showlegend=!1),h._dfltShowLegend=!1,n(p,h,d,a,{prefix:"",cLetter:"z"}));a("line.smoothing");m(a,d,c,e)}},{"../../components/colorscale/defaults":625,"./label_defaults":992}],999:[function(b,y,D){D=b("../heatmap/attributes");var n=b("../contour/attributes"),
m=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;var p=n.contours;y.exports=b({carpet:{valType:"string",editType:"calc"},z:D.z,a:D.x,a0:D.x0,da:D.dx,b:D.y,b0:D.y0,db:D.dy,text:D.text,hovertext:D.hovertext,transpose:D.transpose,atype:D.xtype,btype:D.ytype,fillcolor:n.fillcolor,autocontour:n.autocontour,ncontours:n.ncontours,contours:{type:p.type,start:p.start,end:p.end,size:p.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},
showlines:p.showlines,showlabels:p.showlabels,labelfont:p.labelfont,labelformat:p.labelformat,operation:p.operation,value:p.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:n.line.color,width:n.line.width,dash:n.line.dash,smoothing:n.line.smoothing,editType:"plot"},transforms:void 0},m("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../contour/attributes":977,"../heatmap/attributes":1034}],1E3:[function(b,y,D){var n=b("../../components/colorscale/calc"),
m=b("../../lib"),p=b("../heatmap/convert_column_xyz"),h=b("../heatmap/clean_2d_array"),a=b("../heatmap/interp2d"),d=b("../heatmap/find_empties"),e=b("../heatmap/make_bound_array"),l=b("./defaults"),k=b("../carpet/lookup_carpetid"),c=b("../contour/set_contours");y.exports=function(f,g){var q=g._carpetTrace=k(f,g);if(q&&q.visible&&"legendonly"!==q.visible){if(!g.a||!g.b){q=f.data[q.index];var t=f.data[g.index];t.a||(t.a=q.a);t.b||(t.b=q.b);l(t,g,g._defaultColor,f._fullLayout)}q=g._carpetTrace;t=q.aaxis;
var u=q.baxis;t._minDtick=0;u._minDtick=0;m.isArray1D(g.z)&&p(g,t,u,"a","b",["z"]);var w=g._a=g._a||g.a;var x=g._b=g._b||g.b;w=w?t.makeCalcdata(g,"_a"):[];x=x?u.makeCalcdata(g,"_b"):[];var E=g.a0||0;var F=g.da||1;var z=g.b0||0;var B=g.db||1;q=g._z=h(g._z||g.z,g.transpose);g._emptypoints=d(q);a(q,g._emptypoints);var C=m.maxRowLength(q);t=e(g,"scaled"===g.xtype?"":w,E,F,C,t);u=e(g,"scaled"===g.ytype?"":x,z,B,q.length,u);t={a:t,b:u,z:q};"levels"===g.contours.type&&"none"!==g.contours.coloring&&n(f,g,
{vals:q,containerStr:"",cLetter:"z"});f=[t];c(g,g._z);return f}}},{"../../components/colorscale/calc":623,"../../lib":749,"../carpet/lookup_carpetid":950,"../contour/set_contours":996,"../heatmap/clean_2d_array":1036,"../heatmap/convert_column_xyz":1038,"../heatmap/find_empties":1040,"../heatmap/interp2d":1043,"../heatmap/make_bound_array":1044,"./defaults":1001}],1001:[function(b,y,D){var n=b("../../lib"),m=b("../heatmap/xyz_defaults"),p=b("./attributes"),h=b("../contour/constraint_defaults"),a=
b("../contour/contours_defaults"),d=b("../contour/style_defaults");y.exports=function(e,l,k,c){function f(q,t){return n.coerce(e,l,p,q,t)}function g(q){return n.coerce2(e,l,p,q)}f("carpet");e.a&&e.b?m(e,l,f,c,"a","b")?(f("text"),"constraint"===f("contours.type")?h(e,l,f,c,k,{hasHover:!1}):(a(e,l,f,g),d(e,l,f,c,{hasHover:!1}))):l.visible=!1:(l._defaultColor=k,l._length=null)}},{"../../lib":749,"../contour/constraint_defaults":982,"../contour/contours_defaults":984,"../contour/style_defaults":998,"../heatmap/xyz_defaults":1048,
"./attributes":999}],1002:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../contour/colorbar"),calc:b("./calc"),plot:b("./plot"),style:b("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet contour symbols showLegend hasLines carpetDependent noHover noSortingByValue".split(" "),meta:{}}},{"../../plots/cartesian":810,"../contour/colorbar":980,"../contour/style":997,
"./attributes":999,"./calc":1E3,"./defaults":1001,"./plot":1003}],1003:[function(b,y,D){function n(G,I){var J,K,N;for(J=0;J<G.length;J++){var H=G[J];var L=H.pedgepaths=[];var P=H.ppaths=[];for(K=0;K<H.edgepaths.length;K++){var Q=H.edgepaths[K];var S=[];for(N=0;N<Q.length;N++)S[N]=I(Q[N]);L.push(S)}for(K=0;K<H.paths.length;K++){Q=H.paths[K];L=[];for(N=0;N<Q.length;N++)L[N]=I(Q[N]);P.push(L)}}}function m(G,I,J,K,N,H,L){var P=t.ensureSingle(G,"g","contourlines"),Q=!1!==N.showlines,S=N.showlabels,O=Q&&
S,U=x.createLines(P,Q||S,I);P=x.createLineClip(P,O,J,K.trace.uid);G=G.selectAll("g.contourlabels").data(S?[0]:[]);G.exit().remove();G.enter().append("g").classed("contourlabels",!0);if(S){var X=H.xaxis._length;H=H.yaxis._length;var da=[[[0,0],[X,0],[X,H],[0,H]]],ea=[];t.clearLocationCache();var ca=x.labelFormatter(J,K),ia=q.tester.append("text").attr("data-notex",1).call(q.font,N.labelfont),ha={left:0,right:X,center:X/2,top:0,bottom:H,middle:H/2},fa=E.LABELDISTANCE*Math.sqrt(X*X+H*H)/Math.max(1,I.length/
E.LABELINCREASE);U.each(function(na){var sa=x.calcTextOpts(na.level,ca,ia,J);c.select(this).selectAll("path").each(function(ua){var ta=t.getVisibleSegment(this,ha,sa.height/2);if(ta&&(p(this,ua,na,ta,L,sa.height),!(ta.len<(sa.width+sa.height)*E.LABELMIN))){ua=Math.min(Math.ceil(ta.len/fa),E.LABELMAX);for(var oa=0;oa<ua;oa++){var va=x.findBestTextLocation(this,ta,sa,ea,ha);if(!va)break;x.addLabelData(va,sa,ea,da)}}})});ia.remove();x.drawLabels(G,ea,J,P,O?da:null)}S&&!Q&&U.remove()}function p(G,I,J,
K,N,H){function L(da,ea){var ca=0;if(.1>Math.abs(da[0]-S)||.1>Math.abs(da[0]-O)){var ia=a(N.dxydb_rough(da[0],da[1],.1));ca=Math.max(ca,H*d(ea,ia)/2)}if(.1>Math.abs(da[1]-U)||.1>Math.abs(da[1]-X))ia=a(N.dxyda_rough(da[0],da[1],.1)),ca=Math.max(ca,H*d(ea,ia)/2);return ca}for(var P,Q=0;Q<J.pedgepaths.length;Q++)I===J.pedgepaths[Q]&&(P=J.edgepaths[Q]);if(P){var S=N.a[0],O=N.a[N.a.length-1],U=N.b[0],X=N.b[N.b.length-1];I=h(G,0,1);G=h(G,K.total,K.total-1);I=L(P[0],I);P=K.total-L(P[P.length-1],G);K.min<
I&&(K.min=I);K.max>P&&(K.max=P);K.len=K.max-K.min}}function h(G,I,J){I=G.getPointAtLength(I);J=G.getPointAtLength(J);G=J.x-I.x;I=J.y-I.y;J=Math.sqrt(G*G+I*I);return[G/J,I/J]}function a(G){var I=Math.sqrt(G[0]*G[0]+G[1]*G[1]);return[G[0]/I,G[1]/I]}function d(G,I){G=Math.abs(G[0]*I[0]+G[1]*I[1]);return Math.sqrt(1-G*G)/G}function e(G,I,J,K,N,H){var L,P=t.ensureSingle(G,"g","contourbg").selectAll("path").data("fill"!==H||N?[]:[0]);P.enter().append("path");P.exit().remove();var Q=[];for(L=0;L<I.length;L++)G=
I[L],N=f([],G.x,J.c2p),H=f([],G.y,K.c2p),Q.push(g(N,H,G.bicubic));P.attr("d","M"+Q.join("L")+"Z").style("stroke","none")}function l(G,I,J,K,N,H,L,P,Q,S,O){(S="fill"===S)&&B(N,G.contours);I=t.ensureSingle(I,"g","contourfill").selectAll("path").data(S?N:[]);I.enter().append("path");I.exit().remove();I.each(function(U){(U=(U.prefixBoundary?O:"")+k(G,U,H,L,P,Q,J,K))?c.select(this).attr("d",U).style("stroke","none"):c.select(this).remove()})}function k(G,I,J,K,N,H,L,P){function Q(sa){return Math.abs(sa[0]-
J[2][0])<ia}function S(sa,ua){var ta="";if(Math.abs(sa[1]-J[0][1])<ha&&!Q(sa)||Math.abs(sa[1]-J[2][1])<ha&&!(Math.abs(sa[0]-J[0][0])<ia)){var oa=N.aaxis;var va=v(N,H,[sa[0],ua[0]],.5*(sa[1]+ua[1]))}else oa=N.baxis,va=v(N,H,.5*(sa[0]+ua[0]),[sa[1],ua[1]]);for(sa=1;sa<va.length;sa++)for(ta+=oa.smoothing?"C":"L",ua=0;ua<va[sa].length;ua++){var ma=va[sa][ua];ta+=[L.c2p(ma[0]),P.c2p(ma[1])]+" "}return ta}var O="",U=I.edgepaths.map(function(sa,ua){return ua}),X=!0,da,ea,ca,ia=1E-4*Math.abs(J[0][0]-J[2][0]),
ha=1E-4*Math.abs(J[0][1]-J[2][1]);G=0;for(da=null;U.length;){var fa=I.edgepaths[G][0];da&&(O+=S(da,fa));da=q.smoothopen(I.edgepaths[G].map(K),I.smoothing);O+=X?da:da.replace(/^M/,"L");U.splice(U.indexOf(G),1);da=I.edgepaths[G][I.edgepaths[G].length-1];fa=-1;for(X=0;4>X;X++){if(!da){t.log("Missing end?",G,I);break}Math.abs(da[1]-J[0][1])<ha&&!Q(da)?ea=J[1]:Math.abs(da[0]-J[0][0])<ia?ea=J[0]:Math.abs(da[1]-J[2][1])<ha?ea=J[3]:Q(da)&&(ea=J[2]);for(ca=0;ca<I.edgepaths.length;ca++){var na=I.edgepaths[ca][0];
Math.abs(da[0]-ea[0])<ia?Math.abs(da[0]-na[0])<ia&&0<=(na[1]-da[1])*(ea[1]-na[1])&&(ea=na,fa=ca):Math.abs(da[1]-ea[1])<ha?Math.abs(da[1]-na[1])<ha&&0<=(na[0]-da[0])*(ea[0]-na[0])&&(ea=na,fa=ca):t.log("endpt to newendpt is not vert. or horz.",da,ea,na)}if(0<=fa)break;O+=S(da,ea);da=ea}if(fa===I.edgepaths.length){t.log("unclosed perimeter path");break}G=fa;if(X=-1===U.indexOf(G))G=U[0],O+=S(da,ea)+"Z",da=null}for(G=0;G<I.paths.length;G++)O+=q.smoothclosed(I.paths[G].map(K),I.smoothing);return O}var c=
b("d3"),f=b("../carpet/map_1d_array"),g=b("../carpet/makepath"),q=b("../../components/drawing"),t=b("../../lib"),u=b("../contour/make_crossings"),w=b("../contour/find_all_paths"),x=b("../contour/plot"),E=b("../contour/constants"),F=b("../contour/convert_to_constraints"),z=b("../contour/empty_pathinfo"),B=b("../contour/close_boundaries"),C=b("../carpet/lookup_carpetid"),v=b("../carpet/axis_aligned_line");y.exports=function(G,I,J,K){var N=I.xaxis,H=I.yaxis;t.makeTraceGroups(K,J,"contour").each(function(L){function P(oa){oa=
O.ab2xy(oa[0],oa[1],!0);return[N.c2p(oa[0]),H.c2p(oa[1])]}var Q=c.select(this);L=L[0];var S=L.trace,O=S._carpetTrace=C(G,S),U=G.calcdata[O.index][0];if(O.visible&&"legendonly"!==O.visible){var X=L.a,da=L.b,ea=S.contours,ca=z(ea,I,L),ia="constraint"===ea.type,ha=ea._operation,fa=ia?"\x3d"===ha?"lines":"fill":ea.coloring,na=[[X[0],da[da.length-1]],[X[X.length-1],da[da.length-1]],[X[X.length-1],da[0]],[X[0],da[0]]];u(ca);w(ca,1E-8*(X[X.length-1]-X[0]),1E-8*(da[da.length-1]-da[0]));X=ca;"constraint"===
ea.type&&(X=F(ca,ha));n(ca,P);var sa,ua=[];for(sa=U.clipsegments.length-1;0<=sa;sa--){ha=U.clipsegments[sa];da=f([],ha.x,N.c2p);var ta=f([],ha.y,H.c2p);da.reverse();ta.reverse();ua.push(g(da,ta,ha.bicubic))}ha="M"+ua.join("L")+"Z";e(Q,U.clipsegments,N,H,ia,fa);l(S,Q,N,H,X,na,P,O,U,fa,ha);m(Q,ca,G,L,ea,I,O);q.setClipUrl(Q,O._clipPathId,G)}})}},{"../../components/drawing":637,"../../lib":749,"../carpet/axis_aligned_line":934,"../carpet/lookup_carpetid":950,"../carpet/makepath":951,"../carpet/map_1d_array":952,
"../contour/close_boundaries":979,"../contour/constants":981,"../contour/convert_to_constraints":985,"../contour/empty_pathinfo":987,"../contour/find_all_paths":989,"../contour/make_crossings":994,"../contour/plot":995,d3:169}],1004:[function(b,y,D){D=b("../../components/colorscale/attributes");var n=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../plots/attributes"),p=b("../scattermapbox/attributes");b=b("../../lib/extend").extendFlat;y.exports=b({lon:p.lon,lat:p.lat,z:{valType:"data_array",
editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:p.text,hovertext:p.hovertext,hoverinfo:b({},m.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:n(),showlegend:b({},m.showlegend,{dflt:!1})},D("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scattermapbox/attributes":1219}],
1005:[function(b,y,D){var n=b("fast-isnumeric"),m=b("../../lib").isArrayOrTypedArray,p=b("../../constants/numerical").BADNUM,h=b("../../components/colorscale/calc"),a=b("../../lib")._;y.exports=function(d,e){for(var l=e._length,k=Array(l),c=e.z,f=m(c)&&c.length,g=0;g<l;g++){var q=k[g]={},t=e.lon[g],u=e.lat[g];q.lonlat=n(t)&&n(u)?[+t,+u]:[p,p];f&&(t=c[g],q.z=n(t)?t:p)}h(d,e,{vals:f?c:[0,1],containerStr:"",cLetter:"z"});l&&(k[0].t={labels:{lat:a(d,"lat:")+" ",lon:a(d,"lon:")+" "}});return k}},{"../../components/colorscale/calc":623,
"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],1006:[function(b,y,D){var n=b("fast-isnumeric"),m=b("../../lib"),p=b("../../components/color"),h=b("../../components/colorscale"),a=b("../../constants/numerical").BADNUM,d=b("../../lib/geojson_utils").makeBlank;y.exports=function(e){var l=e[0].trace,k=!0===l.visible&&0!==l._length,c=l._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:d()};if(!k)return c;k=[];var f,g=l.z,q=l.radius;g=m.isArrayOrTypedArray(g)&&g.length;
var t=m.isArrayOrTypedArray(q);for(f=0;f<e.length;f++){var u=e[f],w=u.lonlat;if(w[0]!==a){var x={};g&&(u=u.z,x.z=u!==a?u:0);t&&(x.r=n(q[f])&&0<q[f]?+q[f]:0);k.push({type:"Feature",geometry:{type:"Point",coordinates:w},properties:x})}}e=h.extractOpts(l);q=e.reversescale?h.flipScale(e.colorscale):e.colorscale;f=q[0][1];w=["interpolate",["linear"],["heatmap-density"],0,1>p.opacity(f)?f:p.addOpacity(f,0)];for(f=1;f<q.length;f++)w.push(q[f][0],q[f][1]);f=["interpolate",["linear"],["get","z"],e.min,0,e.max,
1];m.extendFlat(c.heatmap.paint,{"heatmap-weight":g?f:1/(e.max-e.min),"heatmap-color":w,"heatmap-radius":t?{type:"identity",property:"r"}:l.radius,"heatmap-opacity":l.opacity});c.geojson={type:"FeatureCollection",features:k};c.heatmap.layout.visibility="visible";return c}},{"../../components/color":615,"../../components/colorscale":627,"../../constants/numerical":724,"../../lib":749,"../../lib/geojson_utils":743,"fast-isnumeric":241}],1007:[function(b,y,D){var n=b("../../lib"),m=b("../../components/colorscale/defaults"),
p=b("./attributes");y.exports=function(h,a,d,e){function l(c,f){return n.coerce(h,a,p,c,f)}d=l("lon")||[];var k=l("lat")||[];(d=Math.min(d.length,k.length))?(a._length=d,l("z"),l("radius"),l("below"),l("text"),l("hovertext"),l("hovertemplate"),m(h,a,e,l,{prefix:"",cLetter:"z"})):a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":1004}],1008:[function(b,y,D){y.exports=function(n,m){n.lon=m.lon;n.lat=m.lat;n.z=m.z;return n}},{}],1009:[function(b,y,D){var n=b("../../lib"),
m=b("../../plots/cartesian/axes"),p=b("../scattermapbox/hover");y.exports=function(h,a,d){if(h=p(h,a,d)){h=h[0];var e=h.cd;a=e[0].trace;d=e[h.index];delete h.color;if("z"in d){var l=h.subplot.mockAxis;h.z=d.z;h.zLabel=m.tickText(l,l.c2l(d.z),"hover").text}e=e[0].t.labels;if(a.hovertemplate)a=void 0;else{l=(d.hi||a.hoverinfo).split("+");var k=-1!==l.indexOf("all"),c=-1!==l.indexOf("lon"),f=-1!==l.indexOf("lat"),g=d.lonlat,q=[];k||c&&f?q.push("("+(g[0]+", ")+(g[1]+")")):c?q.push(e.lon+(g[0]+"")):
f&&q.push(e.lat+(g[1]+""));(k||-1!==l.indexOf("text"))&&n.fillText(d,a,q);a=q.join("\x3cbr\x3e")}h.extraText=a;return[h]}}},{"../../lib":749,"../../plots/cartesian/axes":797,"../scattermapbox/hover":1224}],1010:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),formatLabels:b("../scattermapbox/format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),getBelow:function(n,m){n=m.getMapLayers();
for(m=0;m<n.length;m++){var p=n[m],h=p.id;if("symbol"===p.type&&"string"===typeof h&&-1===h.indexOf("plotly-"))return h}},moduleType:"trace",name:"densitymapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":854,"../heatmap/colorbar":1037,"../scattermapbox/format_labels":1223,"./attributes":1004,"./calc":1005,"./defaults":1007,"./event_data":1008,"./hover":1009,"./plot":1011}],1011:[function(b,y,D){function n(h,
a){this.type="densitymapbox";this.subplot=h;this.uid=a;this.sourceId="source-"+a;this.layerList=[["heatmap",p+a+"-heatmap"]];this.below=null}var m=b("./convert"),p=b("../../plots/mapbox/constants").traceLayerPrefix;b=n.prototype;b.update=function(h){var a=this.subplot,d=this.layerList;h=m(h);var e=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(h.geojson);e!==this.below&&(this._removeLayers(),this._addLayers(h,e),this.below=e);for(e=0;e<d.length;e++){var l=d[e],k=l[1];l=h[l[0]];
a.setOptions(k,"setLayoutProperty",l.layout);"visible"===l.layout.visibility&&a.setOptions(k,"setPaintProperty",l.paint)}};b._addLayers=function(h,a){for(var d=this.subplot,e=this.layerList,l=this.sourceId,k=0;k<e.length;k++){var c=e[k],f=c[0],g=h[f];d.addLayer({type:f,id:c[1],source:l,layout:g.layout,paint:g.paint},a)}};b._removeLayers=function(){for(var h=this.subplot.map,a=this.layerList,d=a.length-1;0<=d;d--)h.removeLayer(a[d][1])};b.dispose=function(){var h=this.subplot.map;this._removeLayers();
h.removeSource(this.sourceId)};y.exports=function(h,a){var d=a[0].trace,e=new n(h,d.uid),l=e.sourceId;a=m(a);d=e.below=h.belowLookup["trace-"+d.uid];h.map.addSource(l,{type:"geojson",data:a.geojson});e._addLayers(a,d);return e}},{"../../plots/mapbox/constants":852,"./convert":1006}],1012:[function(b,y,D){var n=b("../../lib");y.exports=function(m,p){for(var h=0;h<m.length;h++)m[h].i=h;n.mergeArray(p.text,m,"tx");n.mergeArray(p.hovertext,m,"htx");if(p=p.marker)if(n.mergeArray(p.opacity,m,"mo"),n.mergeArray(p.color,
m,"mc"),p=p.line)n.mergeArray(p.color,m,"mlc"),n.mergeArrayCastPositive(p.width,m,"mlw")}},{"../../lib":749}],1013:[function(b,y,D){D=b("../bar/attributes");var n=b("../scatter/attributes").line,m=b("../../plots/attributes"),p=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../plots/template_attributes").texttemplateAttrs,a=b("./constants"),d=b("../../lib/extend").extendFlat;b=b("../../components/color");y.exports={x:D.x,x0:D.x0,dx:D.dx,y:D.y,y0:D.y0,dy:D.dy,hovertext:D.hovertext,
hovertemplate:p({},{keys:a.eventDataKeys}),hoverinfo:d({},m.hoverinfo,{flags:"name;x;y;text;percent initial;percent previous;percent total".split(";")}),textinfo:{valType:"flaglist",flags:"label;text;percent initial;percent previous;percent total;value".split(";"),extras:["none"],editType:"plot",arrayOk:!1},texttemplate:h({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:D.text,textposition:d({},D.textposition,{dflt:"auto"}),insidetextanchor:d({},D.insidetextanchor,{dflt:"middle"}),
textangle:d({},D.textangle,{dflt:0}),textfont:D.textfont,insidetextfont:D.insidetextfont,outsidetextfont:D.outsidetextfont,constraintext:D.constraintext,cliponaxis:D.cliponaxis,orientation:d({},D.orientation,{}),offset:d({},D.offset,{arrayOk:!1}),width:d({},D.width,{arrayOk:!1}),marker:D.marker,connector:{fillcolor:{valType:"color",editType:"style"},line:{color:d({},n.color,{dflt:b.defaultLine}),width:d({},n.width,{dflt:0,editType:"plot"}),dash:n.dash,editType:"style"},visible:{valType:"boolean",
dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:D.offsetgroup,alignmentgroup:D.alignmentgroup}},{"../../components/color":615,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../bar/attributes":890,"../scatter/attributes":1155,"./constants":1015}],1014:[function(b,y,D){function n(d){return d===a?0:d}var m=b("../../plots/cartesian/axes"),p=b("./arrays_to_calcdata"),h=b("../scatter/calc_selection"),a=b("../../constants/numerical").BADNUM;y.exports=function(d,
e){var l=m.getFromId(d,e.xaxis||"x"),k=m.getFromId(d,e.yaxis||"y");"h"===e.orientation?(d=l.makeCalcdata(e,"x"),l=k.makeCalcdata(e,"y")):(d=k.makeCalcdata(e,"y"),l=l.makeCalcdata(e,"x"));var c=Math.min(l.length,d.length),f=Array(c);e._base=[];for(k=0;k<c;k++){0>d[k]&&(d[k]=a);var g=!1;d[k]!==a&&k+1<c&&d[k+1]!==a&&(g=!0);g=f[k]={p:l[k],s:d[k],cNext:g};e._base[k]=-.5*g.s;e.ids&&(g.id=String(e.ids[k]));0===k&&(f[0].vTotal=0);f[0].vTotal+=n(g.s);g.begR=n(g.s)/n(f[0].s)}for(k=0;k<c;k++)if(g=f[k],g.s!==
a){g.sumR=g.s/f[0].vTotal;g.difR=void 0!==q?g.s/q:1;var q=g.s}p(f,e);h(f,e);return f}},{"../../constants/numerical":724,"../../plots/cartesian/axes":797,"../scatter/calc_selection":1157,"./arrays_to_calcdata":1012}],1015:[function(b,y,D){y.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],1016:[function(b,y,D){var n=b("../bar/cross_trace_calc").setGroupPositions;y.exports=function(m,p){var h=m._fullLayout,a=m._fullData,d=m.calcdata,e=p.xaxis,l=p.yaxis;p=[];var k=[],
c=[],f;for(f=0;f<a.length;f++){var g=a[f];var q="h"===g.orientation;!0===g.visible&&g.xaxis===e._id&&g.yaxis===l._id&&"funnel"===g.type&&(g=d[f],q?c.push(g):k.push(g),p.push(g))}h={mode:h.funnelmode,norm:h.funnelnorm,gap:h.funnelgap,groupgap:h.funnelgroupgap};n(m,e,l,k,h);n(m,l,e,c,h);for(f=0;f<p.length;f++)for(g=p[f],m=0;m<g.length;m++)m+1<g.length&&(g[m].nextP0=g[m+1].p0,g[m].nextS0=g[m+1].s0,g[m].nextP1=g[m+1].p1,g[m].nextS1=g[m+1].s1)}},{"../bar/cross_trace_calc":893}],1017:[function(b,y,D){function n(l){l=
m.isArrayOrTypedArray(l)?"#000":l;return e.addOpacity(l,.5*e.opacity(l))}var m=b("../../lib"),p=b("../bar/defaults").handleGroupingDefaults,h=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),d=b("./attributes"),e=b("../../components/color");y.exports={supplyDefaults:function(l,k,c,f){function g(u,w){return m.coerce(l,k,d,u,w)}if(a(l,k,f,g)){g("orientation",k.y&&!k.x?"v":"h");g("offset");g("width");var q=g("text");g("hovertext");g("hovertemplate");var t=g("textposition");h(l,k,f,g,t,{moduleHasSelected:!1,
moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});"none"===k.textposition||k.texttemplate||g("textinfo",Array.isArray(q)?"text+value":"value");c=g("marker.color",c);g("marker.line.color",e.defaultLine);g("marker.line.width");g("connector.visible")&&(g("connector.fillcolor",n(c)),g("connector.line.width")&&(g("connector.line.color"),g("connector.line.dash")))}else k.visible=!1},crossTraceDefaults:function(l,k){function c(t){return m.coerce(g._input,
g,d,t)}if("group"===k.funnelmode)for(var f=0;f<l.length;f++){var g=l[f];var q=g._input;p(q,g,k,c)}}}},{"../../components/color":615,"../../lib":749,"../bar/defaults":894,"../scatter/xy_defaults":1181,"./attributes":1013}],1018:[function(b,y,D){y.exports=function(n,m){n.x="xVal"in m?m.xVal:m.x;n.y="yVal"in m?m.yVal:m.y;"percentInitial"in m&&(n.percentInitial=m.percentInitial);"percentPrevious"in m&&(n.percentPrevious=m.percentPrevious);"percentTotal"in m&&(n.percentTotal=m.percentTotal);m.xa&&(n.xaxis=
m.xa);m.ya&&(n.yaxis=m.ya);return n}},{}],1019:[function(b,y,D){var n=b("../../components/color").opacity,m=b("../bar/hover").hoverOnBars,p=b("../../lib").formatPercent;y.exports=function(h,a,d,e){if(h=m(h,a,d,e)){a=h.cd;d=a[0].trace;a=a[h.index];h[("h"===d.orientation?"x":"y")+"LabelVal"]=a.s;h.percentInitial=a.begR;h.percentInitialLabel=p(a.begR,1);h.percentPrevious=a.difR;h.percentPreviousLabel=p(a.difR,1);h.percentTotal=a.sumR;h.percentTotalLabel=p(a.sumR,1);var l=a.hi||d.hoverinfo;e=[];if(l&&
"none"!==l&&"skip"!==l){var k="all"===l;l=l.split("+");(k||-1!==l.indexOf("percent initial"))&&e.push(h.percentInitialLabel+" of initial");(k||-1!==l.indexOf("percent previous"))&&e.push(h.percentPreviousLabel+" of previous");(k||-1!==l.indexOf("percent total"))&&e.push(h.percentTotalLabel+" of total")}h.extraText=e.join("\x3cbr\x3e");k=d.marker;d=a.mc||k.color;e=a.mlc||k.line.color;a=a.mlw||k.line.width;a=n(d)?d:n(e)&&a?e:void 0;h.color=a;return[h]}}},{"../../components/color":615,"../../lib":749,
"../bar/hover":897}],1020:[function(b,y,D){y.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:b("../../plots/cartesian"),
categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,"../bar/select":902,"./attributes":1013,"./calc":1014,"./cross_trace_calc":1016,"./defaults":1017,"./event_data":1018,"./hover":1019,"./layout_attributes":1021,"./layout_defaults":1022,"./plot":1023,"./style":1024}],1021:[function(b,y,D){y.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,
editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1022:[function(b,y,D){var n=b("../../lib"),m=b("./layout_attributes");y.exports=function(p,h,a){for(var d=!1,e=0;e<a.length;e++){var l=a[e];if(l.visible&&"funnel"===l.type){d=!0;break}}d&&(n.coerce(p,h,m,"funnelmode",void 0),n.coerce(p,h,m,"funnelgap",.2),n.coerce(p,h,m,"funnelgroupgap",void 0))}},{"../../lib":749,"./layout_attributes":1021}],1023:[function(b,y,D){function n(c,f,g,q){var t=f.xaxis,u=f.yaxis;
a.makeTraceGroups(q,g,"trace bars").each(function(w){var x=h.select(this);w=w[0].trace;x=a.ensureSingle(x,"g","regions");if(w.connector&&w.connector.visible){var E="h"===w.orientation;x=x.selectAll("g.region").data(a.identity);x.enter().append("g").classed("region",!0);x.exit().remove();var F=x.size();x.each(function(z,B){if(B===F-1||z.cNext){B=p(z,t,u,E);z=B[0];B=B[1];var C="";z[0]!==e&&B[0]!==e&&z[1]!==e&&B[1]!==e&&z[2]!==e&&B[2]!==e&&z[3]!==e&&B[3]!==e&&(C=E?C+("M"+z[0]+","+B[1]+"L"+z[2]+","+B[2]+
"H"+z[3]+"L"+z[1]+","+B[1]+"Z"):C+("M"+z[1]+","+B[1]+"L"+z[2]+","+B[3]+"V"+B[2]+"L"+z[1]+","+B[0]+"Z"));""===C&&(C="M0,0Z");a.ensureSingle(h.select(this),"path").attr("d",C).call(d.setClipUrl,f.layerClipId,c)}})}else x.remove()})}function m(c,f,g,q){var t=f.xaxis,u=f.yaxis;a.makeTraceGroups(q,g,"trace bars").each(function(w){var x=h.select(this);w=w[0].trace;x=a.ensureSingle(x,"g","lines");if(w.connector&&w.connector.visible&&w.connector.line.width){var E="h"===w.orientation;x=x.selectAll("g.line").data(a.identity);
x.enter().append("g").classed("line",!0);x.exit().remove();var F=x.size();x.each(function(z,B){if(B===F-1||z.cNext){B=p(z,t,u,E);z=B[0];B=B[1];var C="";void 0!==z[3]&&void 0!==B[3]&&(E?(C+="M"+z[0]+","+B[1]+"L"+z[2]+","+B[2],C+="M"+z[1]+","+B[1]+"L"+z[3]+","+B[2]):(C+="M"+z[1]+","+B[1]+"L"+z[2]+","+B[3],C+="M"+z[1]+","+B[0]+"L"+z[2]+","+B[2]));""===C&&(C="M0,0Z");a.ensureSingle(h.select(this),"path").attr("d",C).call(d.setClipUrl,f.layerClipId,c)}})}else x.remove()})}function p(c,f,g,q){var t=[],
u=[],w=q?f:g;f=q?g:f;t[0]=w.c2p(c.s0,!0);u[0]=f.c2p(c.p0,!0);t[1]=w.c2p(c.s1,!0);u[1]=f.c2p(c.p1,!0);t[2]=w.c2p(c.nextS0,!0);u[2]=f.c2p(c.nextP0,!0);t[3]=w.c2p(c.nextS1,!0);u[3]=f.c2p(c.nextP1,!0);return q?[t,u]:[u,t]}var h=b("d3"),a=b("../../lib"),d=b("../../components/drawing"),e=b("../../constants/numerical").BADNUM,l=b("../bar/plot"),k=b("../bar/uniform_text").clearMinTextSize;y.exports=function(c,f,g,q){var t=c._fullLayout;k("funnel",t);n(c,f,g,q);m(c,f,g,q);l.plot(c,f,g,q,{mode:t.funnelmode,
norm:t.funnelmode,gap:t.funnelgap,groupgap:t.funnelgroupgap})}},{"../../components/drawing":637,"../../constants/numerical":724,"../../lib":749,"../bar/plot":901,"../bar/uniform_text":906,d3:169}],1024:[function(b,y,D){var n=b("d3"),m=b("../../components/drawing"),p=b("../../components/color"),h=b("../../constants/interactions").DESELECTDIM;D=b("../bar/style");var a=b("../bar/uniform_text").resizeText,d=D.styleTextPoints;y.exports={style:function(e,l,k){l=k?k:n.select(e).selectAll("g.funnellayer").selectAll("g.trace");
a(e,l,"funnel");l.style("opacity",function(c){return c[0].trace.opacity});l.each(function(c){var f=n.select(this),g=c[0].trace;f.selectAll(".point \x3e path").each(function(q){if(!q.isBlank){var t=g.marker;n.select(this).call(p.fill,q.mc||t.color).call(p.stroke,q.mlc||t.line.color).call(m.dashLine,t.line.dash,q.mlw||t.line.width).style("opacity",g.selectedpoints&&!q.selected?h:1)}});d(f,g,e);f.selectAll(".regions").each(function(){n.select(this).selectAll("path").style("stroke-width",0).call(p.fill,
g.connector.fillcolor)});f.selectAll(".lines").each(function(){var q=g.connector.line;m.lineGroupStyle(n.select(this).selectAll("path"),q.width,q.color,q.dash)})})}}},{"../../components/color":615,"../../components/drawing":637,"../../constants/interactions":723,"../bar/style":904,"../bar/uniform_text":906,d3:169}],1025:[function(b,y,D){D=b("../pie/attributes");var n=b("../../plots/attributes"),m=b("../../plots/domain").attributes,p=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../plots/template_attributes").texttemplateAttrs;
b=b("../../lib/extend").extendFlat;y.exports={labels:D.labels,label0:D.label0,dlabel:D.dlabel,values:D.values,marker:{colors:D.marker.colors,line:{color:b({},D.marker.line.color,{dflt:null}),width:b({},D.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:D.text,hovertext:D.hovertext,scalegroup:b({},D.scalegroup,{}),textinfo:b({},D.textinfo,{flags:["label","text","value","percent"]}),texttemplate:h({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:b({},
n.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:p({},{keys:["label","color","value","text","percent"]}),textposition:b({},D.textposition,{values:["inside","none"],dflt:"inside"}),textfont:D.textfont,insidetextfont:D.insidetextfont,title:{text:D.title.text,font:D.title.font,position:b({},D.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:m({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",
min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/template_attributes":875,"../pie/attributes":1129}],1026:[function(b,y,D){var n=b("../../plots/plots");D.name="funnelarea";D.plot=function(m,p,h,a){n.plotBasePlot(D.name,m,p,h,a)};D.clean=function(m,p,h,a){n.cleanBasePlot(D.name,m,p,h,a)}},{"../../plots/plots":860}],1027:[function(b,y,D){var n=b("../pie/calc");
y.exports={calc:function(m,p){return n.calc(m,p)},crossTraceCalc:function(m){n.crossTraceCalc(m,{type:"funnelarea"})}}},{"../pie/calc":1131}],1028:[function(b,y,D){var n=b("../../lib"),m=b("./attributes"),p=b("../../plots/domain").defaults,h=b("../bar/defaults").handleText,a=b("../pie/defaults").handleLabelsAndValues;y.exports=function(d,e,l,k){function c(q,t){return n.coerce(d,e,m,q,t)}l=c("labels");var f=c("values");l=a(l,f);f=l.len;e._hasLabels=l.hasLabels;e._hasValues=l.hasValues;!e._hasLabels&&
e._hasValues&&(c("label0"),c("dlabel"));if(f){e._length=f;c("marker.line.width")&&c("marker.line.color",k.paper_bgcolor);c("marker.colors");c("scalegroup");l=c("text");f=c("texttemplate");var g;f||(g=c("textinfo",Array.isArray(l)?"text+percent":"percent"));c("hovertext");c("hovertemplate");if(f||g&&"none"!==g)g=c("textposition"),h(d,e,k,c,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});p(e,k,c);c("title.text")&&
(c("title.position"),n.coerceFont(c,"title.font",k.font));c("aspectratio");c("baseratio")}else e.visible=!1}},{"../../lib":749,"../../plots/domain":824,"../bar/defaults":894,"../pie/defaults":1132,"./attributes":1025}],1029:[function(b,y,D){y.exports={moduleType:"trace",name:"funnelarea",basePlotModule:b("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),
calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style"),styleOne:b("../pie/style_one"),meta:{}}},{"../pie/style_one":1140,"./attributes":1025,"./base_plot":1026,"./calc":1027,"./defaults":1028,"./layout_attributes":1030,"./layout_defaults":1031,"./plot":1032,"./style":1033}],1030:[function(b,y,D){b=b("../pie/layout_attributes").hiddenlabels;y.exports={hiddenlabels:b,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",
dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":1136}],1031:[function(b,y,D){var n=b("../../lib"),m=b("./layout_attributes");y.exports=function(p,h){n.coerce(p,h,m,"hiddenlabels",void 0);n.coerce(p,h,m,"funnelareacolorway",h.colorway);n.coerce(p,h,m,"extendfunnelareacolors",void 0)}},{"../../lib":749,"./layout_attributes":1030}],1032:[function(b,y,D){function n(E,F){return"l"+(F[0]-E[0])+","+(F[1]-E[1])}function m(E,F){return[.5*(E[0]+F[0]),.5*(E[1]+F[1])]}function p(E){function F(){var H=
Math.sqrt(G);return[H,-H]}if(E.length){var z=E[0],B=z.trace,C=B.aspectratio;B=B.baseratio;.999<B&&(B=.999);B=Math.pow(B,2);var v=z.vTotal,G=v*B/(1-B)/v;B=[];B.push(F());var I;for(I=E.length-1;-1<I;I--){var J=E[I];J.hidden||(G+=J.v/v,B.push(F()))}v=Infinity;var K=-Infinity;for(I=0;I<B.length;I++)J=B[I],v=Math.min(v,J[1]),K=Math.max(K,J[1]);for(I=0;I<B.length;I++)B[I][1]-=(K+v)/2;I=z.r;v=(K-v)/2;J=I/B[B.length-1][0];C*=I/v;z.r=C*v;for(I=0;I<B.length;I++)B[I][0]*=J,B[I][1]*=C;J=B[0];z=[-J[0],J[1]];C=
[J[0],J[1]];v=0;for(I=E.length-1;-1<I;I--)if(J=E[I],!J.hidden){v+=1;K=B[v][0];var N=B[v][1];J.TL=[-K,N];J.TR=[K,N];J.BL=z;J.BR=C;J.pxmid=m(J.TR,J.BR);z=J.TL;C=J.TR}}}var h=b("d3"),a=b("../../components/drawing"),d=b("../../lib"),e=b("../../lib/svg_text_utils"),l=b("../bar/plot").toMoveInsideBar;D=b("../bar/uniform_text");var k=D.recordMinTextSize,c=D.clearMinTextSize,f=b("../pie/helpers");b=b("../pie/plot");var g=b.attachFxHandlers,q=b.determineInsideTextFont,t=b.layoutAreas,u=b.prerenderTitles,w=
b.positionTitleOutside,x=b.formatSliceLabel;y.exports=function(E,F){var z=E._fullLayout;c("funnelarea",z);u(F,E);t(F,z._size);d.makeTraceGroups(z._funnelarealayer,F,"trace").each(function(B){var C=h.select(this),v=B[0],G=v.trace;p(B);C.each(function(){var I=h.select(this).selectAll("g.slice").data(B);I.enter().append("g").classed("slice",!0);I.exit().remove();I.each(function(J,K){if(J.hidden)h.select(this).selectAll("path,g").remove();else{J.pointNumber=J.i;J.curveNumber=G.index;var N=v.cx,H=v.cy,
L=h.select(this),P=L.selectAll("path.surface").data([J]);P.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});L.call(g,E,B);var Q="M"+(N+J.TR[0])+","+(H+J.TR[1])+n(J.TR,J.BR)+n(J.BR,J.BL)+n(J.BL,J.TL)+"Z";P.attr("d",Q);x(E,J,v);P=f.castOption(G.textposition,J.pts);L=L.selectAll("g.slicetext").data(J.text&&"none"!==P?[0]:[]);L.enter().append("g").classed("slicetext",!0);L.exit().remove();L.each(function(){var S=d.ensureSingle(h.select(this),"text","",function(X){X.attr("data-notex",
1)}),O=d.ensureUniformFontSize(E,q(G,J,z.font));S.text(J.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(a.font,O).call(e.convertToTspans,E);var U=a.bBox(S.node());U=l(Math.max(J.TL[0],J.BL[0])+N,Math.min(J.TR[0],J.BR[0])+N,Math.min(J.BL[1],J.BR[1])+H,Math.max(J.TL[1],J.TR[1])+H,U,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"});U.fontSize=O.size;k(G.type,U,z);B[K].transform=U;S.attr("transform",d.getTextTransform(U))})}});I=h.select(this).selectAll("g.titletext").data(G.title.text?
[0]:[]);I.enter().append("g").classed("titletext",!0);I.exit().remove();I.each(function(){var J=d.ensureSingle(h.select(this),"text","",function(N){N.attr("data-notex",1)}),K=G.title.text;G._meta&&(K=d.templateString(K,G._meta));J.text(K).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(a.font,G.title.font).call(e.convertToTspans,E);K=w(v,z._size);J.attr("transform","translate("+K.x+","+K.y+")"+(1>K.scale?"scale("+K.scale+")":"")+"translate("+K.tx+","+K.ty+")")})})})}},{"../../components/drawing":637,
"../../lib":749,"../../lib/svg_text_utils":773,"../bar/plot":901,"../bar/uniform_text":906,"../pie/helpers":1134,"../pie/plot":1138,d3:169}],1033:[function(b,y,D){var n=b("d3"),m=b("../pie/style_one"),p=b("../bar/uniform_text").resizeText;y.exports=function(h){var a=h._fullLayout._funnelarealayer.selectAll(".trace");p(h,a,"funnelarea");a.each(function(d){var e=d[0].trace;d=n.select(this);d.style({opacity:e.opacity});d.selectAll("path.surface").each(function(l){n.select(this).call(m,l,e)})})}},{"../bar/uniform_text":906,
"../pie/style_one":1140,d3:169}],1034:[function(b,y,D){D=b("../scatter/attributes");var n=b("../../plots/attributes"),m=b("../../plots/template_attributes").hovertemplateAttrs,p=b("../../components/colorscale/attributes");b("../../constants/docs");b=b("../../lib/extend").extendFlat;y.exports=b({z:{valType:"data_array",editType:"calc"},x:b({},D.x,{impliedEdits:{xtype:"array"}}),x0:b({},D.x0,{impliedEdits:{xtype:"scaled"}}),dx:b({},D.dx,{impliedEdits:{xtype:"scaled"}}),y:b({},D.y,{impliedEdits:{ytype:"array"}}),
y0:b({},D.y0,{impliedEdits:{ytype:"scaled"}}),dy:b({},D.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",
dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"},hovertemplate:m(),showlegend:b({},n.showlegend,{dflt:!1})},{transforms:void 0},p("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../constants/docs":719,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,
"../scatter/attributes":1155}],1035:[function(b,y,D){function n(t){for(var u=[],w=t.length,x=0;x<w;x++){var E=t[x];E!==q&&u.push(E)}return u}function m(t,u,w){for(var x=[],E=-1,F=0;F<w.length;F++)if(u[F]!==q){E++;x[E]=[];for(var z=0;z<w[F].length;z++)t[z]!==q&&x[E].push(w[F][z])}return x}var p=b("../../registry"),h=b("../../lib"),a=b("../../plots/cartesian/axes"),d=b("../histogram2d/calc"),e=b("../../components/colorscale/calc"),l=b("./convert_column_xyz"),k=b("./clean_2d_array"),c=b("./interp2d"),
f=b("./find_empties"),g=b("./make_bound_array"),q=b("../../constants/numerical").BADNUM;y.exports=function(t,u){function w(O){C=u._input.zsmooth=u.zsmooth=!1;h.warn('cannot use zsmooth: "fast": '+O)}var x=a.getFromId(t,u.xaxis||"x"),E=a.getFromId(t,u.yaxis||"y"),F=p.traceIs(u,"contour"),z=p.traceIs(u,"histogram"),B=p.traceIs(u,"gl2d"),C=F?"best":u.zsmooth,v;x._minDtick=0;E._minDtick=0;if(z){var G=d(t,u);var I=G.x;var J=G.x0;var K=G.dx;var N=G.y;var H=G.y0;var L=G.dy;var P=G.z}else P=u.z,h.isArray1D(P)?
(l(u,x,E,"x","y",["z"]),I=u._x,N=u._y,P=u._z):(I=u._x=u.x?x.makeCalcdata(u,"x"):[],N=u._y=u.y?E.makeCalcdata(u,"y"):[]),J=u.x0,K=u.dx,H=u.y0,L=u.dy,P=k(P,u,x,E);if(x.rangebreaks||E.rangebreaks)P=m(I,N,P),z||(I=n(I),N=n(N),u._x=I,u._y=N);z||!F&&!u.connectgaps||(u._emptypoints=f(P),c(P,u._emptypoints));if("fast"===C)if("log"===x.type||"log"===E.type)w("log axis found");else if(!z){if(I.length){var Q=(I[I.length-1]-I[0])/(I.length-1),S=Math.abs(Q/100);for(v=0;v<I.length-1;v++)if(Math.abs(I[v+1]-I[v]-
Q)>S){w("x scale is not linear");break}}if(N.length&&"fast"===C)for(Q=(N[N.length-1]-N[0])/(N.length-1),S=Math.abs(Q/100),v=0;v<N.length-1;v++)if(Math.abs(N[v+1]-N[v]-Q)>S){w("y scale is not linear");break}}v=h.maxRowLength(P);I="scaled"===u.xtype?"":I;Q=g(u,I,J,K,v,x);N="scaled"===u.ytype?"":N;S=g(u,N,H,L,P.length,E);B||(u._extremes[x._id]=a.findExtremes(x,Q),u._extremes[E._id]=a.findExtremes(E,S));B={x:Q,y:S,z:P,text:u._text||u.text,hovertext:u._hovertext||u.hovertext};I&&I.length===Q.length-1&&
(B.xCenter=I);N&&N.length===S.length-1&&(B.yCenter=N);z&&(B.xRanges=G.xRanges,B.yRanges=G.yRanges,B.pts=G.pts);F||e(t,u,{vals:P,cLetter:"z"});F&&u.contours&&"heatmap"===u.contours.coloring&&(t={type:"contour"===u.type?"heatmap":"histogram2d",xcalendar:u.xcalendar,ycalendar:u.ycalendar},B.xfill=g(t,I,J,K,v,x),B.yfill=g(t,N,H,L,P.length,E));return[B]}},{"../../components/colorscale/calc":623,"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"../histogram2d/calc":1067,
"./clean_2d_array":1036,"./convert_column_xyz":1038,"./find_empties":1040,"./interp2d":1043,"./make_bound_array":1044}],1036:[function(b,y,D){var n=b("fast-isnumeric"),m=b("../../lib"),p=b("../../constants/numerical").BADNUM;y.exports=function(h,a,d,e){function l(F){if(n(F))return+F}function k(F){if(a&&"carpet"!==a.type&&"contourcarpet"!==a.type&&F&&"category"===F.type&&a["_"+F._id.charAt(0)].length){var z=F._id.charAt(0),B={};z=a["_"+z+"CategoryMap"]||a[z];for(f=0;f<z.length;f++)B[z[f]]=f;return function(C){C=
B[F._categories[C]];return C+1?C:p}}return m.identity}var c,f,g;if(a&&a.transpose){for(f=c=0;f<h.length;f++)c=Math.max(c,h[f].length);if(0===c)return!1;var q=function(F){return F.length};var t=function(F,z,B){return(F[B]||[])[z]}}else c=h.length,q=function(F,z){return F[z].length},t=function(F,z,B){return(F[z]||[])[B]};var u=function(F,z,B){return z===p||B===p?p:t(F,z,B)},w=k(d),x=k(e);e&&"category"===e.type&&(c=e._categories.length);var E=Array(c);for(f=0;f<c;f++)for(e=d&&"category"===d.type?d._categories.length:
q(h,f),E[f]=Array(e),g=0;g<e;g++)E[f][g]=l(u(h,x(f),w(g)));return E}},{"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],1037:[function(b,y,D){y.exports={min:"zmin",max:"zmax"}},{}],1038:[function(b,y,D){var n=b("../../lib"),m=b("../../constants/numerical").BADNUM;y.exports=function(p,h,a,d,e,l){var k=p._length,c=h.makeCalcdata(p,d),f=a.makeCalcdata(p,e),g=p.text,q=void 0!==g&&n.isArray1D(g),t=p.hovertext,u=void 0!==t&&n.isArray1D(t),w,x=n.distinctVals(c),E=x.vals,F=n.distinctVals(f),
z=F.vals,B=[],C,v;var G=z.length;var I=E.length;for(w=0;w<l.length;w++)B[w]=n.init2dArray(G,I);q&&(C=n.init2dArray(G,I));u&&(v=n.init2dArray(G,I));I=n.init2dArray(G,I);for(w=0;w<k;w++)if(c[w]!==m&&f[w]!==m){var J=n.findBin(c[w]+x.minDiff/2,E),K=n.findBin(f[w]+F.minDiff/2,z);for(G=0;G<l.length;G++)B[G][K][J]=p[l[G]][w],I[K][J]=w;q&&(C[K][J]=g[w]);u&&(v[K][J]=t[w])}p["_"+d]=E;p["_"+e]=z;for(G=0;G<l.length;G++)p["_"+l[G]]=B[G];q&&(p._text=C);u&&(p._hovertext=v);h&&"category"===h.type&&(p["_"+d+"CategoryMap"]=
E.map(function(N){return h._categories[N]}));a&&"category"===a.type&&(p["_"+e+"CategoryMap"]=z.map(function(N){return a._categories[N]}));p._after2before=I}},{"../../constants/numerical":724,"../../lib":749}],1039:[function(b,y,D){var n=b("../../lib"),m=b("./xyz_defaults"),p=b("./style_defaults"),h=b("../../components/colorscale/defaults"),a=b("./attributes");y.exports=function(d,e,l,k){function c(f,g){return n.coerce(d,e,a,f,g)}m(d,e,c,k)?(c("text"),c("hovertext"),c("hovertemplate"),p(d,e,c,k),c("hoverongaps"),
c("connectgaps",n.isArray1D(e.z)&&!1!==e.zsmooth),h(d,e,k,c,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":1034,"./style_defaults":1047,"./xyz_defaults":1048}],1040:[function(b,y,D){var n=b("../../lib").maxRowLength;y.exports=function(m){var p=[],h={},a=[],d=m[0],e=[],l=[0,0,0],k=n(m),c,f,g;for(c=0;c<m.length;c++){var q=e;e=d;d=m[c+1]||[];for(f=0;f<k;f++)void 0===e[f]&&((g=(void 0!==e[f-1]?1:0)+(void 0!==e[f+1]?1:0)+(void 0!==q[f]?
1:0)+(void 0!==d[f]?1:0))?(0===c&&g++,0===f&&g++,c===m.length-1&&g++,f===e.length-1&&g++,4>g&&(h[[c,f]]=[c,f,g]),p.push([c,f,g])):a.push([c,f]))}for(;a.length;){d={};e=!1;for(m=a.length-1;0<=m;m--){var t=a[m];c=t[0];f=t[1];if(g=((h[[c-1,f]]||l)[2]+(h[[c+1,f]]||l)[2]+(h[[c,f-1]]||l)[2]+(h[[c,f+1]]||l)[2])/20)d[t]=[c,f,g],a.splice(m,1),e=!0}if(!e)throw"findEmpties iterated with no new neighbors";for(t in d)h[t]=d[t],p.push(d[t])}return p.sort(function(u,w){return w[2]-u[2]})}},{"../../lib":749}],1041:[function(b,
y,D){var n=b("../../components/fx"),m=b("../../lib"),p=b("../../plots/cartesian/axes"),h=b("../../components/colorscale").extractOpts;y.exports=function(a,d,e,l,k,c){var f=a.cd[0];l=f.trace;k=a.xa;var g=a.ya,q=f.x,t=f.y,u=f.z,w=f.xCenter,x=f.yCenter,E=f.zmask,F=l.zhoverformat,z=q,B=t;if(!1!==a.index){try{var C=Math.round(a.index[1]);var v=Math.round(a.index[0])}catch(I){m.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(0>C||C>=u[0].length||0>v||v>u.length)return}else{if(0<
n.inbox(d-q[0],d-q[q.length-1],0)||0<n.inbox(e-t[0],e-t[t.length-1],0))return;if(c){z=[2*q[0]-q[1]];for(C=1;C<q.length;C++)z.push((q[C]+q[C-1])/2);z.push([2*q[q.length-1]-q[q.length-2]]);B=[2*t[0]-t[1]];for(C=1;C<t.length;C++)B.push((t[C]+t[C-1])/2);B.push([2*t[t.length-1]-t[t.length-2]])}C=Math.max(0,Math.min(z.length-2,m.findBin(d,z)));v=Math.max(0,Math.min(B.length-2,m.findBin(e,B)))}d=k.c2p(q[C]);e=k.c2p(q[C+1]);z=g.c2p(t[v]);B=g.c2p(t[v+1]);c?(e=d,c=q[C],B=z,x=t[v]):(c=w?w[C]:(q[C]+q[C+1])/2,
x=x?x[v]:(t[v]+t[v+1])/2,k&&"category"===k.type&&(c=q[C]),g&&"category"===g.type&&(x=t[v]),l.zsmooth&&(d=e=k.c2p(c),z=B=g.c2p(x)));g=u[v][C];E&&!E[v][C]&&(g=void 0);if(void 0!==g||l.hoverongaps){var G;Array.isArray(f.hovertext)&&Array.isArray(f.hovertext[v])?G=f.hovertext[v][C]:Array.isArray(f.text)&&Array.isArray(f.text[v])&&(G=f.text[v][C]);f=h(l);k=p.tickText({type:"linear",range:[f.min,f.max],hoverformat:F,_separators:k._separators,_numFormat:k._numFormat},g,"hover").text;return[m.extendFlat(a,
{index:l._after2before?l._after2before[v][C]:[v,C],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:d,x1:e,y0:z,y1:B,xLabelVal:c,yLabelVal:x,zLabelVal:g,zLabel:k,text:G})]}}},{"../../components/colorscale":627,"../../components/fx":655,"../../lib":749,"../../plots/cartesian/axes":797}],1042:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:b("./colorbar"),style:b("./style"),hoverPoints:b("./hover"),moduleType:"trace",
name:"heatmap",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":810,"./attributes":1034,"./calc":1035,"./colorbar":1037,"./defaults":1039,"./hover":1041,"./plot":1045,"./style":1046}],1043:[function(b,y,D){function n(h,a,d){var e=0,l,k,c,f,g,q;for(l=0;l<a.length;l++){var t=a[l];var u=t[0];t=t[1];var w=h[u][t];for(k=f=g=0;4>k;k++){var x=p[k];if(c=h[u+x[0]])if(x=c[t+x[1]],void 0!==x){if(0===g)var E=q=x;else E=Math.min(E,
x),q=Math.max(q,x);f++;g+=x}}if(0===f)throw"iterateInterp2d order is wrong: no defined neighbors";h[u][t]=g/f;void 0===w?4>f&&(e=1):(h[u][t]=(1+d)*h[u][t]-d*w,q>E&&(e=Math.max(e,Math.abs(h[u][t]-w)/(q-E))))}return e}var m=b("../../lib"),p=[[-1,0],[1,0],[0,-1],[0,1]];y.exports=function(h,a){var d=1,e;n(h,a);for(e=0;e<a.length&&!(4>a[e][2]);e++);a=a.slice(e);for(e=0;100>e&&.01<d;e++)d=n(h,a,.5-.25*Math.min(1,.5*d));.01<d&&m.log("interp2d didn't converge quickly",d);return h}},{"../../lib":749}],1044:[function(b,
y,D){var n=b("../../registry"),m=b("../../lib").isArrayOrTypedArray;y.exports=function(p,h,a,d,e,l){var k=[],c=n.traceIs(p,"contour"),f=n.traceIs(p,"histogram"),g=n.traceIs(p,"gl2d");if(m(h)&&1<h.length&&!f&&"category"!==l.type)if(d=h.length,d<=e){if(c||g)k=h.slice(0,e);else if(1===e)k=[h[0]-.5,h[0]+.5];else{k=[1.5*h[0]-.5*h[1]];for(c=1;c<d;c++)k.push(.5*(h[c-1]+h[c]));k.push(1.5*h[d-1]-.5*h[d-2])}if(d<e)for(g=k[k.length-1],h=g-k[k.length-2],c=d;c<e;c++)g+=h,k.push(g)}else return c?h.slice(0,e):h.slice(0,
e+1);else for(p=p[l._id.charAt(0)+"calendar"],h=f?l.r2c(a,0,p):m(h)&&1===h.length?h[0]:void 0===a?0:("log"===l.type?l.d2c:l.r2c)(a,0,p),d=d||1,c=c||g?0:-.5;c<e;c++)k.push(h+d*c);return k}},{"../../lib":749,"../../registry":880}],1045:[function(b,y,D){function n(c,f){var g=f.length-2,q=e.constrain(e.findBin(c,f),0,g),t=f[q];c=e.constrain(q+(c-t)/(f[q+1]-t)-.5,0,g);f=Math.round(c);q=Math.abs(c-f);return c&&c!==g&&q?{bin0:f,frac:q,bin1:Math.round(f+q/(c-f))}:{bin0:f,bin1:f,frac:0}}function m(c,f){var g=
f.length-1;g=e.constrain(e.findBin(c,f),0,g);var q=f[g];c=(c-q)/(f[g+1]-q)||0;return 0>=c?{bin0:g,bin1:g,frac:0}:.5>c?{bin0:g,bin1:g+1,frac:c}:{bin0:g+1,bin1:g,frac:1-c}}function p(c,f,g){c[f]=g[0];c[f+1]=g[1];c[f+2]=g[2];c[f+3]=Math.round(255*g[3])}var h=b("d3"),a=b("tinycolor2"),d=b("../../registry"),e=b("../../lib"),l=b("../../components/colorscale").makeColorScaleFuncFromTrace,k=b("../../constants/xmlns_namespaces");y.exports=function(c,f,g,q){var t=f.xaxis,u=f.yaxis;e.makeTraceGroups(q,g,"hm").each(function(w){function x(pa,
za){return void 0!==pa?(pa=ia(pa),pa[0]=Math.round(pa[0]),pa[1]=Math.round(pa[1]),pa[2]=Math.round(pa[2]),fa+=za,na+=pa[0]*za,sa+=pa[1]*za,ua+=pa[2]*za,pa):[0,0,0,0]}function E(pa,za,qa,Ca){var Ka=pa[qa.bin0];if(void 0===Ka)return x(void 0,1);pa=pa[qa.bin1];var Oa=za[qa.bin0];za=za[qa.bin1];return x(Ka+qa.frac*(pa-Ka||0)+Ca.frac*((Oa-Ka||0)+qa.frac*(void 0===pa?void 0===za?0:void 0===Oa?2*(za-Ka):2*(2*za-Oa-Ka)/3:void 0===za?void 0===Oa?0:2*(2*Ka-pa-Oa)/3:void 0===Oa?2*(2*za-pa-Ka)/3:za+Ka-pa-Oa)))}
var F=h.select(this),z=w[0],B=z.trace,C=z.z,v=z.x,G=z.y,I=z.xCenter,J=z.yCenter,K=d.traceIs(B,"contour"),N=K?"best":B.zsmooth,H=C.length,L=e.maxRowLength(C),P=!1,Q=!1,S;for(S=0;void 0===O&&S<v.length-1;){var O=t.c2p(v[S]);S++}for(S=v.length-1;void 0===U&&0<S;){var U=t.c2p(v[S]);S--}U<O&&(S=U,U=O,O=S,P=!0);for(S=0;void 0===X&&S<G.length-1;){var X=u.c2p(G[S]);S++}for(S=G.length-1;void 0===da&&0<S;){var da=u.c2p(G[S]);S--}da<X&&(S=X,X=da,da=S,Q=!0);K&&(I=v,J=G,v=z.xfill,G=z.yfill);"fast"!==N&&(S="best"===
N?0:.5,O=Math.max(-S*t._length,O),U=Math.min((1+S)*t._length,U),X=Math.max(-S*u._length,X),da=Math.min((1+S)*u._length,da));var ea=Math.round(U-O),ca=Math.round(da-X);if(0>=ea||0>=ca)F.selectAll("image").data([]).exit().remove();else{"fast"===N?(da=L,S=H):(da=ea,S=ca);U=document.createElement("canvas");U.width=da;U.height=S;da=U.getContext("2d");var ia=l(B,{noNumericCheck:!0,returnArray:!0});"fast"===N?(z=P?function(pa){return L-1-pa}:e.identity,K=Q?function(pa){return H-1-pa}:e.identity):(z=function(pa){return e.constrain(Math.round(t.c2p(v[pa])-
O),0,ea)},K=function(pa){return e.constrain(Math.round(u.c2p(G[pa])-X),0,ca)});S=K(0);var ha=[S,S];P=P?0:1;Q=Q?0:1;var fa=0,na=0,sa=0,ua=0;if(N){B=0;try{var ta=new Uint8Array(ea*ca*4)}catch(pa){ta=Array(ea*ca*4)}if("best"===N){N=I||v;P=J||G;Q=Array(N.length);z=Array(P.length);K=Array(ea);I=I?m:n;ha=J?m:n;for(S=0;S<N.length;S++)Q[S]=Math.round(t.c2p(N[S])-O);for(S=0;S<P.length;S++)z[S]=Math.round(u.c2p(P[S])-X);for(S=0;S<ea;S++)K[S]=I(S,Q);for(J=0;J<ca;J++)for(N=ha(J,z),P=C[N.bin0],Q=C[N.bin1],S=0;S<
ea;S++,B+=4)I=E(P,Q,K[S],N),p(ta,B,I)}else for(J=0;J<H;J++)for(N=C[J],ha=K(J),S=0;S<ea;S++)I=x(N[S],1),B=4*(ha*ea+z(S)),p(ta,B,I);C=da.createImageData(ea,ca);try{C.data.set(ta)}catch(pa){for(S=C.data,I=S.length,J=0;J<I;J++)S[J]=ta[J]}da.putImageData(C,0,0)}else{ta=B.xgap;B=B.ygap;var oa=Math.floor(ta/2),va=Math.floor(B/2);for(J=0;J<H;J++)if(N=C[J],ha.reverse(),ha[Q]=K(J+1),ha[0]!==ha[1]&&void 0!==ha[0]&&void 0!==ha[1]){S=z(0);var ma=[S,S];for(S=0;S<L;S++)ma.reverse(),ma[P]=z(S+1),ma[0]!==ma[1]&&void 0!==
ma[0]&&void 0!==ma[1]&&(I=N[S],I=x(I,(ma[1]-ma[0])*(ha[1]-ha[0])),da.fillStyle="rgba("+I.join(",")+")",da.fillRect(ma[0]+oa,ha[0]+va,ma[1]-ma[0]-ta,ha[1]-ha[0]-B))}}na=Math.round(na/fa);sa=Math.round(sa/fa);ua=Math.round(ua/fa);C=a("rgb("+na+","+sa+","+ua+")");c._hmpixcount=(c._hmpixcount||0)+fa;c._hmlumcount=(c._hmlumcount||0)+fa*C.getLuminance();w=F.selectAll("image").data(w);w.enter().append("svg:image").attr({xmlns:k.svg,preserveAspectRatio:"none"});w.attr({height:ca,width:ea,x:O,y:X,"xlink:href":U.toDataURL("image/png")})}})}},
{"../../components/colorscale":627,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../registry":880,d3:169,tinycolor2:548}],1046:[function(b,y,D){var n=b("d3");y.exports=function(m){n.select(m).selectAll(".hm image").style("opacity",function(p){return p.trace.opacity})}},{d3:169}],1047:[function(b,y,D){y.exports=function(n,m,p){!1===p("zsmooth")&&(p("xgap"),p("ygap"));p("zhoverformat")}},{}],1048:[function(b,y,D){function n(a,d){var e=d(a);"scaled"===(e?d(a+"type","array"):"scaled")&&(d(a+
"0"),d("d"+a));return e}var m=b("fast-isnumeric"),p=b("../../lib"),h=b("../../registry");y.exports=function(a,d,e,l,k,c){var f=e("z");k=k||"x";c=c||"y";if(void 0===f||!f.length)return 0;if(p.isArray1D(a.z)){var g=e(k);e=e(c);g=p.minRowLength(g);e=p.minRowLength(e);if(0===g||0===e)return 0;d._length=Math.min(g,e,f.length)}else{n(k,e);n(c,e);g=!0;for(var q=!1,t=!1,u,w=0;w<f.length;w++){u=f[w];if(!p.isArrayOrTypedArray(u)){g=!1;break}0<u.length&&(q=!0);for(var x=0;x<u.length;x++)if(m(u[x])){t=!0;break}}if(!(g&&
q&&t))return 0;e("transpose");d._length=null}if("heatmapgl"===a.type||"contourgl"===a.type)return!0;h.getComponentMethod("calendars","handleTraceDefaults")(a,d,[k,c],l);return!0}},{"../../lib":749,"../../registry":880,"fast-isnumeric":241}],1049:[function(b,y,D){D=b("../heatmap/attributes");var n=b("../../components/colorscale/attributes"),m=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;for(var p="z x x0 dx y y0 dy text transpose xtype ytype".split(" "),h={},a=0;a<
p.length;a++){var d=p[a];h[d]=D[d]}h.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"};m(h,n("",{cLetter:"z",autoColorDflt:!1}));y.exports=b(h,"calc","nested")},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../heatmap/attributes":1034}],1050:[function(b,y,D){function n(a,d){this.scene=a;this.uid=d;this.type="heatmapgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=
[];this.bounds=[0,0,0,0];this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]};this.heatmap=m(a.glplot,this.options);this.heatmap._trace=this}var m=b("gl-heatmap2d"),p=b("../../plots/cartesian/axes"),h=b("../../lib/str2rgbarray");b=n.prototype;b.handlePick=function(a){var d=this.options,e=d.shape,l=a.pointId,k=l%e[0];e=Math.floor(l/e[0]);return{trace:this,dataCoord:a.dataCoord,traceCoord:[d.x[k],d.y[e],d.z[l]],textLabel:this.textLabels[l],name:this.name,pointIndex:[e,
k],hoverinfo:this.hoverinfo}};b.update=function(a,d){d=d[0];this.index=a.index;this.name=a.name;this.hoverinfo=a.hoverinfo;var e=d.z;this.options.z=[].concat.apply([],e);this.options.shape=[e[0].length,e.length];this.options.x=d.x;this.options.y=d.y;this.options.zsmooth=a.zsmooth;e=a.colorscale;for(var l=a.zmin,k=a.zmax,c=e.length,f=Array(c),g=Array(4*c),q=0;q<c;q++){var t=e[q],u=h(t[1]);f[q]=l+t[0]*(k-l);for(t=0;4>t;t++)g[4*q+t]=u[t]}this.options.colorLevels=f;this.options.colorValues=g;this.textLabels=
[].concat.apply([],a.text);this.heatmap.update(this.options);e=this.scene.xaxis;l=this.scene.yaxis;if(!1===a.zsmooth){var w={ppad:d.x[1]-d.x[0]};var x={ppad:d.y[1]-d.y[0]}}a._extremes[e._id]=p.findExtremes(e,d.x,w);a._extremes[l._id]=p.findExtremes(l,d.y,x)};b.dispose=function(){this.heatmap.dispose()};y.exports=function(a,d,e){a=new n(a,d.uid);a.update(d,e);return a}},{"../../lib/str2rgbarray":772,"../../plots/cartesian/axes":797,"gl-heatmap2d":268}],1051:[function(b,y,D){var n=b("../../lib"),m=
b("../heatmap/xyz_defaults"),p=b("../../components/colorscale/defaults"),h=b("./attributes");y.exports=function(a,d,e,l){function k(c,f){return n.coerce(a,d,h,c,f)}m(a,d,k,l)?(k("text"),k("zsmooth"),p(a,d,l,k,{prefix:"",cLetter:"z"})):d.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"../heatmap/xyz_defaults":1048,"./attributes":1049}],1052:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../heatmap/calc"),
plot:b("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":837,"../heatmap/calc":1035,"../heatmap/colorbar":1037,"./attributes":1049,"./convert":1050,"./defaults":1051}],1053:[function(b,y,D){D=b("../bar/attributes");var n=b("../../plots/template_attributes").hovertemplateAttrs,m=b("./bin_attributes"),p=b("./constants");b=b("../../lib/extend").extendFlat;y.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},
y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b({},D.text,{}),hovertext:b({},D.hovertext,{}),orientation:D.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",
editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:m("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:m("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:n({},{keys:p.eventDataKeys}),marker:D.marker,offsetgroup:D.offsetgroup,
alignmentgroup:D.alignmentgroup,selected:D.selected,unselected:D.unselected,_deprecated:{bardir:D._deprecated.bardir}}},{"../../lib/extend":739,"../../plots/template_attributes":875,"../bar/attributes":890,"./bin_attributes":1055,"./constants":1059}],1054:[function(b,y,D){y.exports=function(n,m){for(var p=n.length,h=0,a=0;a<p;a++)m[a]?(n[a]/=m[a],h+=n[a]):n[a]=null;return h}},{}],1055:[function(b,y,D){y.exports=function(n,m){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},
size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],1056:[function(b,y,D){var n=b("fast-isnumeric");y.exports={count:function(m,p,h){h[m]++;return 1},sum:function(m,p,h,a){p=a[p];return n(p)?(p=Number(p),h[m]+=p,p):0},avg:function(m,p,h,a,d){p=a[p];n(p)&&(p=Number(p),h[m]+=p,d[m]++);return 0},min:function(m,p,h,a){p=a[p];if(n(p)){p=Number(p);if(!n(h[m]))return h[m]=p;if(h[m]>p)return a=p-h[m],h[m]=p,a}return 0},max:function(m,p,h,a){p=a[p];if(n(p)){p=Number(p);if(!n(h[m]))return h[m]=p;if(h[m]<
p)return a=p-h[m],h[m]=p,a}return 0}}},{"fast-isnumeric":241}],1057:[function(b,y,D){function n(f,g,q,t){if(0>=f*g)return Infinity;for(var u="date"===q.type,w=m(Math.abs(g-f),u),x=0;10>x;x++){var E=m(80*w,u);if(w===E)break;var F=E;var z=f,B=g,C=q,v=t;u&&F>d?(z=p(z,C,v),B=p(B,C,v),F=F===h?0:1,F=z[F]!==B[F]):F=.1<Math.floor(B/F)-Math.floor(z/F);if(F)w=E;else break}return w}function m(f,g){return g&&f>k?f>d?f>1.1*h?h:f>1.1*a?a:d:f>e?e:f>l?l:k:Math.pow(10,Math.floor(Math.log(f)/Math.LN10))}function p(f,
g,q){f=g.c2d(f,h,q).split("-");""===f[0]&&(f.unshift(),f[0]="-"+f[0]);return f}D=b("../../constants/numerical");var h=D.ONEAVGYEAR,a=D.ONEAVGMONTH,d=D.ONEDAY,e=D.ONEHOUR,l=D.ONEMIN,k=D.ONESEC,c=b("../../plots/cartesian/axes").tickIncrement;y.exports=function(f,g,q,t,u){var w=-1.1*g,x=-.1*g,E=f-x;g=q[0];q=q[1];E=Math.min(n(g+x,g+E,t,u),n(q+x,q+E,t,u));w=Math.min(n(g+w,g+x,t,u),n(q+w,q+x,t,u));if(E>w&&w<Math.abs(q-g)/4E3){var F=E;var z=!1}else F=Math.min(E,w),z=!0;if("date"===t.type&&F>d){var B=F===
h?1:6,C=F===h?"M12":"M1";return function(v,G){var I=t.c2d(v,h,u),J=I.indexOf("-",B);0<J&&(I=I.substr(0,J));I=t.d2c(I,0,u);I<v&&(J=c(I,C,!1,u),(I+J)/2<v+f&&(I=J));return G&&z?c(I,C,!0,u):I}}return function(v,G){var I=F*Math.round(v/F);I+F/10<v&&I+.9*F<v+f&&(I+=F);G&&z&&(I-=F);return I}}},{"../../constants/numerical":724,"../../plots/cartesian/axes":797}],1058:[function(b,y,D){function n(q,t,u,w,x){function E(S,O,U){O[S+"Found"]?(O[S]=v(O[S]),null===O[S]&&(O[S]=U[S])):(Q[S]=O[S]=U[S],a.nestedProperty(G[0],
F+"."+S).set(U[S]))}var F=w+"bins",z=q._fullLayout,B=z._histogramBinOpts[t["_"+w+"bingroup"]];z="overlay"===z.barmode;var C,v="date"===u.type?function(S){return S||0===S?a.cleanDate(S,null,P):null}:function(S){return h(S)?Number(S):null};if(t["_"+w+"autoBinFinished"])delete t["_"+w+"autoBinFinished"];else{var G=B.traces;var I=[],J=!0,K=!1,N=!1;for(C=0;C<G.length;C++){var H=G[C];if(H.visible){var L=B.dirs[C];L=H["_"+L+"pos0"]=u.makeCalcdata(H,L);I=a.concat(I,L);delete H["_"+w+"autoBinFinished"];!0===
t.visible&&(J?J=!1:(delete H._autoBin,H["_"+w+"autoBinFinished"]=1),d.traceIs(H,"2dMap")&&(K=!0),"histogram2dcontour"===H.type&&(N=!0))}}var P=G[0][w+"calendar"];C=e.autoBin(I,u,B.nbins,K,P,B.sizeFound&&B.size);var Q=(G[0]._autoBin={})[B.dirs[0]]={};N&&(B.size||(C.start=u.c2r(e.tickIncrement(u.r2c(C.start,0,P),C.size,!0,P),0,P)),void 0===B.end&&(C.end=u.c2r(e.tickIncrement(u.r2c(C.end,0,P),C.size,!1,P),0,P)));if(z&&!d.traceIs(t,"2dMap")&&0===C._dataSpan&&"category"!==u.type&&"multicategory"!==u.type){if(x)return[C,
L,!0];C=m(q,t,u,w,F)}L=H.cumulative||{};L.enabled&&"include"!==L.currentbin&&("decreasing"===L.direction?C.start=u.c2r(e.tickIncrement(u.r2c(C.start,0,P),C.size,!0,P),0,P):C.end=u.c2r(e.tickIncrement(u.r2c(C.end,0,P),C.size,!1,P),0,P));B.size=C.size;B.sizeFound||(Q.size=C.size,a.nestedProperty(G[0],F+".size").set(C.size));E("start",B,C);E("end",B,C)}L=t["_"+w+"pos0"];delete t["_"+w+"pos0"];x=t._input[F]||{};q=a.extendFlat({},B);N=B.start;z=u.r2l(x.start);H=void 0!==z;(B.startFound||H)&&z!==u.r2l(N)&&
(z=H?z:a.aggNums(Math.min,null,L),N={type:"category"===u.type||"multicategory"===u.type?"linear":u.type,r2l:u.r2l,dtick:B.size,tick0:N,calendar:P,range:[z,e.tickIncrement(z,B.size,!1,P)].map(u.l2r)},N=e.tickFirst(N),N>u.r2l(z)&&(N=e.tickIncrement(N,B.size,!0,P)),q.start=u.l2r(N),H||a.nestedProperty(t,F+".start").set(q.start));H=B.end;z=u.r2l(x.end);x=void 0!==z;(B.endFound||x)&&z!==u.r2l(H)&&(B=x?z:a.aggNums(Math.max,null,L),q.end=u.l2r(B),x||a.nestedProperty(t,F+".start").set(q.end));u="autobin"+
w;!1===t._input[u]&&(t._input[F]=a.extendFlat({},t[F]||{}),delete t._input[u],delete t[u]);return[q,L]}function m(q,t,u,w,x){for(var E=q._fullLayout,F=t.xaxis,z=t.yaxis,B=t.orientation,C=[],v=q._fullData,G=0;G<v.length;G++){var I=v[G];"histogram"===I.type&&!0===I.visible&&I.orientation===B&&I.xaxis===F&&I.yaxis===z&&C.push(I)}G=!1;F=Infinity;z=[t];for(B=0;B<C.length;B++)if(v=C[B],v===t)G=!0;else if(G){I=n(q,v,u,w,!0);var J=I[0],K=I[2];v["_"+w+"autoBinFinished"]=1;v["_"+w+"pos0"]=I[1];K?z.push(v):
F=Math.min(F,J.size)}else I=E._histogramBinOpts[v["_"+w+"bingroup"]],F=Math.min(F,I.size||v[x].size);q=Array(z.length);for(B=0;B<z.length;B++)for(C=z[B]["_"+w+"pos0"],v=0;v<C.length;v++)if(void 0!==C[v]){q[B]=C[v];break}isFinite(F)||(F=a.distinctVals(q).minDiff);for(B=0;B<z.length;B++)v=z[B],C=v[w+"calendar"],C={start:u.c2r(q[B]-F/2,0,C),end:u.c2r(q[B]+F/2,0,C),size:F},v._input[x]=v[x]=C,(I=E._histogramBinOpts[v["_"+w+"bingroup"]])&&a.extendFlat(I,C);return t[x]}function p(q,t,u){function w(z){F=
q[z];q[z]/=2}function x(z){E=q[z];q[z]=F+E/2;F+=E}var E,F;if("half"===u)if("increasing"===t)for(w(0),t=1;t<q.length;t++)x(t);else for(w(q.length-1),t=q.length-2;0<=t;t--)x(t);else if("increasing"===t){for(t=1;t<q.length;t++)q[t]+=q[t-1];"exclude"===u&&(q.unshift(0),q.pop())}else{for(t=q.length-2;0<=t;t--)q[t]+=q[t+1];"exclude"===u&&(q.push(0),q.shift())}}var h=b("fast-isnumeric"),a=b("../../lib"),d=b("../../registry"),e=b("../../plots/cartesian/axes"),l=b("../bar/arrays_to_calcdata"),k=b("./bin_functions"),
c=b("./norm_functions"),f=b("./average"),g=b("./bin_label_vals");y.exports={calc:function(q,t){var u=[],w=[],x=e.getFromId(q,"h"===t.orientation?t.yaxis:t.xaxis),E="h"===t.orientation?"y":"x",F={x:"y",y:"x"}[E],z=t[E+"calendar"],B=t.cumulative,C=n(q,t,x,E),v=C[0];C=C[1];var G="string"===typeof v.size,I=[],J=G?I:v,K=[],N=[],H=[],L=0,P=t.histnorm,Q=t.histfunc,S=-1!==P.indexOf("density"),O;B.enabled&&S&&(P=P.replace(/ ?density$/,""),S=!1);var U="max"===Q||"min"===Q?null:0,X=k.count;P=c[P];var da=!1;
if(a.isArrayOrTypedArray(t[F])&&"count"!==Q){var ea=t[F];da="avg"===Q;X=k[Q]}F=x.r2c(v.start,0,z);for(O=x.r2c(v.end,0,z)+(F-e.tickIncrement(F,v.size,!1,z))/1E6;F<O&&1E6>u.length;){Q=e.tickIncrement(F,v.size,!1,z);u.push((F+Q)/2);w.push(U);H.push([]);I.push(F);S&&K.push(1/(Q-F));da&&N.push(0);if(Q<=F)break;F=Q}I.push(F);G||"date"!==x.type||(J={start:x.r2c(J.start,0,z),end:x.r2c(J.end,0,z),size:J.size});q._fullLayout._roundFnOpts||(q._fullLayout._roundFnOpts={});var ca=t["_"+E+"bingroup"];U={leftGap:Infinity,
rightGap:Infinity};ca&&(q._fullLayout._roundFnOpts[ca]||(q._fullLayout._roundFnOpts[ca]=U),U=q._fullLayout._roundFnOpts[ca]);Q=w.length;E=!0;O=U.leftGap;var ia=U.rightGap;G={};for(F=0;F<C.length;F++){var ha=C[F];S=a.findBin(ha,J);0<=S&&S<Q&&(L+=X(S,F,w,ea,N),E&&H[S].length&&ha!==C[H[S][0]]&&(E=!1),H[S].push(F),G[F]=S,O=Math.min(O,ha-I[S]),ia=Math.min(ia,I[S+1]-ha))}U.leftGap=O;U.rightGap=ia;var fa;E||(fa=function(na,sa){return function(){var ua=q._fullLayout._roundFnOpts[ca];return g(ua.leftGap,ua.rightGap,
I,x,z)(na,sa)}});da&&(L=f(w,N));P&&P(w,L,K);B.enabled&&p(w,B.direction,B.currentbin);K=Math.min(u.length,w.length);ea=[];N=0;J=K-1;for(F=0;F<K;F++)if(w[F]){N=F;break}for(F=K-1;F>=N;F--)if(w[F]){J=F;break}for(F=N;F<=J;F++)h(u[F])&&h(w[F])&&(K={p:u[F],s:w[F],b:0},B.enabled||(K.pts=H[F],E?K.ph0=K.ph1=H[F].length?C[H[F][0]]:u[F]:(t._computePh=!0,K.ph0=fa(I[F]),K.ph1=fa(I[F+1],!0))),ea.push(K));1===ea.length&&(ea[0].width1=e.tickIncrement(ea[0].p,v.size,!1,z)-ea[0].p);l(ea,t);a.isArrayOrTypedArray(t.selectedpoints)&&
a.tagSelected(ea,t,G);return ea},calcAllAutoBins:n}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"../bar/arrays_to_calcdata":889,"./average":1054,"./bin_functions":1056,"./bin_label_vals":1057,"./norm_functions":1065,"fast-isnumeric":241}],1059:[function(b,y,D){y.exports={eventDataKeys:["binNumber"]}},{}],1060:[function(b,y,D){var n=b("../../lib"),m=b("../../plots/cartesian/axis_ids"),p=b("../../registry").traceIs,h=b("../bar/defaults").handleGroupingDefaults,a=n.nestedProperty,
d=m.getAxisGroup,e=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],l=["x","y"];y.exports=function(k,c){function f(I,J){return n.coerce(F._input,F,F._module.attributes,I,J)}function g(I){return"v"===I.orientation?"x":"y"}function q(I,J,K){var N=I.uid+"__"+K;J||(J=N);var H=m.getFromTrace({_fullLayout:c},I,K).type;var L=I[K+"calendar"]||"",P=t[J],Q=!0;
P&&(H===P.axType&&L===P.calendar?(Q=!1,P.traces.push(I),P.dirs.push(K)):(J=N,H!==P.axType&&n.warn(["Attempted to group the bins of trace",I.index,"set on a","type:"+H,"axis with bins on","type:"+P.axType,"axis."].join(" ")),L!==P.calendar&&n.warn(["Attempted to group the bins of trace",I.index,"set with a",L,"calendar with bins",P.calendar?"on a "+P.calendar+" calendar":"w/o a set calendar"].join(" "))));Q&&(t[J]={traces:[I],dirs:[K],axType:H,calendar:I[K+"calendar"]||""});I["_"+K+"bingroup"]=J}var t=
c._histogramBinOpts={},u=[],w={},x=[],E;for(E=0;E<k.length;E++){var F=k[E];p(F,"histogram")&&(u.push(F),delete F._xautoBinFinished,delete F._yautoBinFinished,p(F,"2dMap")||h(F._input,F,c,f))}k=c._alignmentOpts||{};for(E=0;E<u.length;E++){F=u[E];var z="";if(!p(F,"2dMap")){var B=g(F);if("group"===c.barmode&&F.alignmentgroup){var C=d(c,F[B+"axis"])+F.orientation;(k[C]||{})[F.alignmentgroup]&&(z=C)}z||"overlay"===c.barmode||(z=d(c,F.xaxis)+d(c,F.yaxis)+g(F))}z?(w[z]||(w[z]=[]),w[z].push(F)):x.push(F)}for(z in w)if(u=
w[z],1===u.length)x.push(u[0]);else{k=!1;for(E=0;E<u.length;){F=u[E];k=f("bingroup");break}z=k||z;for(E=0;E<u.length;E++)F=u[E],(k=F._input.bingroup)&&k!==z&&n.warn(["Trace",F.index,"must match within bingroup",z+".","Ignoring its bingroup:",k,"setting."].join(" ")),F.bingroup=z,q(F,z,g(F))}for(E=0;E<x.length;E++)if(F=x[E],w=f("bingroup"),p(F,"2dMap"))for(u=0;2>u;u++)B=l[u],k=f(B+"bingroup",w?w+"__"+B:null),q(F,k,B);else q(F,w,g(F));for(z in t)for(w=t[z],u=w.traces,x=0;x<e.length;x++)if(k=e[x],C=
k.name,"nbins"!==C||!w.sizeFound){for(E=0;E<u.length;E++){F=u[E];B=w.dirs[E];var v=k.aStr[B];if(void 0!==a(F._input,v).get()){w[C]=f(v);w[C+"Found"]=!0;break}var G=(F._autoBin||{})[B]||{};G[C]&&a(F,v).set(G[C])}if("start"===C||"end"===C)for(;E<u.length;E++)F=u[E],F["_"+B+"bingroup"]&&(G=(F._autoBin||{})[B]||{},f(v,G[C]));"nbins"!==C||w.sizeFound||w.nbinsFound||(F=u[0],w[C]=f(v))}}},{"../../lib":749,"../../plots/cartesian/axis_ids":800,"../../registry":880,"../bar/defaults":894}],1061:[function(b,
y,D){var n=b("../../registry"),m=b("../../lib"),p=b("../../components/color"),h=b("../bar/style_defaults"),a=b("./attributes");y.exports=function(d,e,l,k){function c(u,w){return m.coerce(d,e,a,u,w)}var f=c("x"),g=c("y");c("cumulative.enabled")&&(c("cumulative.direction"),c("cumulative.currentbin"));c("text");c("hovertext");c("hovertemplate");var q=c("orientation",g&&!f?"h":"v"),t="v"===q?"x":"y";q="v"===q?"y":"x";(f=f&&g?Math.min(m.minRowLength(f)&&m.minRowLength(g)):m.minRowLength(e[t]||[]))?(e._length=
f,n.getComponentMethod("calendars","handleTraceDefaults")(d,e,["x","y"],k),e[q]&&c("histfunc"),c("histnorm"),c("autobin"+t),h(d,e,c,l,k),m.coerceSelectionMarkerOpacity(e,c),l=(e.marker.line||{}).color,k=n.getComponentMethod("errorbars","supplyDefaults"),k(d,e,l||p.defaultLine,{axis:"y"}),k(d,e,l||p.defaultLine,{axis:"x",inherit:"y"})):e.visible=!1}},{"../../components/color":615,"../../lib":749,"../../registry":880,"../bar/style_defaults":905,"./attributes":1053}],1062:[function(b,y,D){y.exports=
function(n,m,p,h,a){n.x="xVal"in m?m.xVal:m.x;n.y="yVal"in m?m.yVal:m.y;"zLabelVal"in m&&(n.z=m.zLabelVal);m.xa&&(n.xaxis=m.xa);m.ya&&(n.yaxis=m.ya);if(!(p.cumulative||{}).enabled){m=Array.isArray(a)?h[0].pts[a[0]][a[1]]:h[a].pts;n.pointNumbers=m;n.binNumber=n.pointNumber;delete n.pointNumber;delete n.pointIndex;if(p._indexToPoints)for(h=[],a=0;a<m.length;a++)h=h.concat(p._indexToPoints[m[a]]);else h=m;n.pointIndices=h}return n}},{}],1063:[function(b,y,D){var n=b("../bar/hover").hoverPoints,m=b("../../plots/cartesian/axes").hoverLabelText;
y.exports=function(p,h,a,d){if(h=n(p,h,a,d))return p=h[0],a=p.cd[p.index],d=p.cd[0].trace,d.cumulative.enabled||(d="h"===d.orientation?"y":"x",p[d+"Label"]=m(p[d+"a"],a.ph0,a.ph1)),h}},{"../../plots/cartesian/axes":797,"../bar/hover":897}],1064:[function(b,y,D){y.exports={attributes:b("./attributes"),layoutAttributes:b("../bar/layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),supplyLayoutDefaults:b("../bar/layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("../bar/cross_trace_calc").crossTraceCalc,
plot:b("../bar/plot").plot,layerName:"barlayer",style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,colorbar:b("../scatter/marker_colorbar"),hoverPoints:b("./hover"),selectPoints:b("../bar/select"),eventData:b("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar histogram oriented errorBarsOK showLegend".split(" "),meta:{}}},{"../../plots/cartesian":810,"../bar/cross_trace_calc":893,"../bar/layout_attributes":899,
"../bar/layout_defaults":900,"../bar/plot":901,"../bar/select":902,"../bar/style":904,"../scatter/marker_colorbar":1173,"./attributes":1053,"./calc":1058,"./cross_trace_defaults":1060,"./defaults":1061,"./event_data":1062,"./hover":1063}],1065:[function(b,y,D){y.exports={percent:function(n,m){var p=n.length;m=100/m;for(var h=0;h<p;h++)n[h]*=m},probability:function(n,m){for(var p=n.length,h=0;h<p;h++)n[h]/=m},density:function(n,m,p,h){m=n.length;h=h||1;for(var a=0;a<m;a++)n[a]=n[a]*p[a]*h},"probability density":function(n,
m,p,h){var a=n.length;h&&(m/=h);for(h=0;h<a;h++)n[h]*=p[h]/m}}},{}],1066:[function(b,y,D){D=b("../histogram/attributes");var n=b("../histogram/bin_attributes"),m=b("../heatmap/attributes"),p=b("../../plots/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;y.exports=b({x:D.x,y:D.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:D.histnorm,
histfunc:D.histfunc,nbinsx:D.nbinsx,xbins:n("x"),nbinsy:D.nbinsy,ybins:n("y"),autobinx:D.autobinx,autobiny:D.autobiny,bingroup:b({},D.bingroup,{}),xbingroup:b({},D.bingroup,{}),ybingroup:b({},D.bingroup,{}),xgap:m.xgap,ygap:m.ygap,zsmooth:m.zsmooth,zhoverformat:m.zhoverformat,hovertemplate:h({},{keys:"z"}),showlegend:b({},p.showlegend,{dflt:!1})},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,
"../heatmap/attributes":1034,"../histogram/attributes":1053,"../histogram/bin_attributes":1055}],1067:[function(b,y,D){function n(f,g,q,t){var u=Array(f);if(t)for(q=0;q<f;q++)u[q]=1/(g[q+1]-g[q]);else for(g=1/q,q=0;q<f;q++)u[q]=g;return u}function m(f,g){return{start:f(g.start),end:f(g.end),size:g.size}}function p(f,g,q,t,u,w){var x=f.length-1,E=Array(x);t=k(q,t,f,u,w);for(q=0;q<x;q++)u=(g||[])[q],E[q]=void 0===u?[t(f[q]),t(f[q+1],!0)]:[u,u];return E}var h=b("../../lib"),a=b("../../plots/cartesian/axes"),
d=b("../histogram/bin_functions"),e=b("../histogram/norm_functions"),l=b("../histogram/average"),k=b("../histogram/bin_label_vals"),c=b("../histogram/calc").calcAllAutoBins;y.exports=function(f,g){var q=a.getFromId(f,g.xaxis),t=a.getFromId(f,g.yaxis),u=g.xcalendar,w=g.ycalendar,x=function(za){return q.r2c(za,0,u)},E=function(za){return t.r2c(za,0,w)},F=c(f,g,q,"x");var z=F[0];F=F[1];f=c(f,g,t,"y");var B=f[0];f=f[1];var C=g._length;F.length>C&&F.splice(C,F.length-C);f.length>C&&f.splice(C,f.length-
C);var v=[],G=[],I=[],J="string"===typeof z.size,K="string"===typeof B.size,N=[],H=[],L=J?N:z,P=K?H:B,Q=0,S=[],O=[],U=g.histnorm,X=g.histfunc,da=-1!==U.indexOf("density"),ea="max"===X||"min"===X?null:0,ca=d.count;U=e[U];var ia=!1,ha=[],fa=[];(g="z"in g?g.z:"marker"in g&&Array.isArray(g.marker.color)?g.marker.color:"")&&"count"!==X&&(ia="avg"===X,ca=d[X]);X=z.size;var na=x(z.start),sa=x(z.end)+(na-a.tickIncrement(na,X,!1,u))/1E6;for(z=na;z<sa;z=a.tickIncrement(z,X,!1,u))G.push(ea),N.push(z),ia&&I.push(0);
N.push(z);ea=G.length;X=(z-na)/ea;na=q.c2r(na+X/2,0,u);var ua=B.size;sa=E(B.start);var ta=E(B.end)+(sa-a.tickIncrement(sa,ua,!1,w))/1E6;for(z=sa;z<ta;z=a.tickIncrement(z,ua,!1,w)){v.push(G.slice());H.push(z);var oa=Array(ea);for(B=0;B<ea;B++)oa[B]=[];O.push(oa);ia&&S.push(I.slice())}H.push(z);I=v.length;B=(z-sa)/I;sa=t.c2r(sa+B/2,0,w);da&&(ha=n(G.length,L,X,J),fa=n(v.length,P,B,K));J||"date"!==q.type||(L=m(x,L));K||"date"!==t.type||(P=m(E,P));J=G=!0;K=Array(ea);da=Array(I);var va=oa=ta=ua=Infinity;
for(z=0;z<C;z++){var ma=F[z],pa=f[z];x=h.findBin(ma,L);E=h.findBin(pa,P);0<=x&&x<ea&&0<=E&&E<I&&(Q+=ca(x,z,v[E],g,S[E]),O[E][x].push(z),G&&(void 0===K[x]?K[x]=ma:K[x]!==ma&&(G=!1)),J&&(void 0===da[E]?da[E]=pa:da[E]!==pa&&(J=!1)),ua=Math.min(ua,ma-N[x]),ta=Math.min(ta,N[x+1]-ma),oa=Math.min(oa,pa-H[E]),va=Math.min(va,H[E+1]-pa))}if(ia)for(E=0;E<I;E++)Q+=l(v[E],S[E]);if(U)for(E=0;E<I;E++)U(v[E],Q,ha,fa[E]);return{x:F,xRanges:p(N,G&&K,ua,ta,q,u),x0:na,dx:X,y:f,yRanges:p(H,J&&da,oa,va,t,w),y0:sa,dy:B,
z:v,pts:O}}},{"../../lib":749,"../../plots/cartesian/axes":797,"../histogram/average":1054,"../histogram/bin_functions":1056,"../histogram/bin_label_vals":1057,"../histogram/calc":1058,"../histogram/norm_functions":1065}],1068:[function(b,y,D){var n=b("../../lib"),m=b("./sample_defaults"),p=b("../heatmap/style_defaults"),h=b("../../components/colorscale/defaults"),a=b("./attributes");y.exports=function(d,e,l,k){function c(f,g){return n.coerce(d,e,a,f,g)}m(d,e,c,k);!1!==e.visible&&(p(d,e,c,k),h(d,
e,k,c,{prefix:"",cLetter:"z"}),c("hovertemplate"))}},{"../../components/colorscale/defaults":625,"../../lib":749,"../heatmap/style_defaults":1047,"./attributes":1066,"./sample_defaults":1071}],1069:[function(b,y,D){var n=b("../heatmap/hover"),m=b("../../plots/cartesian/axes").hoverLabelText;y.exports=function(p,h,a,d,e,l){if(h=n(p,h,a,d,e,l))return p=h[0],d=p.index,e=p.cd[0],a=e.xRanges[d[1]],d=e.yRanges[d[0]],p.xLabel=m(p.xa,a[0],a[1]),p.yLabel=m(p.ya,d[0],d[1]),h}},{"../../plots/cartesian/axes":797,
"../heatmap/hover":1041}],1070:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../heatmap/calc"),plot:b("../heatmap/plot"),layerName:"heatmaplayer",colorbar:b("../heatmap/colorbar"),style:b("../heatmap/style"),hoverPoints:b("./hover"),eventData:b("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram",
"showLegend"],meta:{}}},{"../../plots/cartesian":810,"../heatmap/calc":1035,"../heatmap/colorbar":1037,"../heatmap/plot":1045,"../heatmap/style":1046,"../histogram/cross_trace_defaults":1060,"../histogram/event_data":1062,"./attributes":1066,"./defaults":1068,"./hover":1069}],1071:[function(b,y,D){var n=b("../../registry"),m=b("../../lib");y.exports=function(p,h,a,d){var e=a("x"),l=a("y");e=m.minRowLength(e);l=m.minRowLength(l);e&&l?(h._length=Math.min(e,l),n.getComponentMethod("calendars","handleTraceDefaults")(p,
h,["x","y"],d),(a("z")||a("marker.color"))&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")):h.visible=!1}},{"../../lib":749,"../../registry":880}],1072:[function(b,y,D){D=b("../histogram2d/attributes");var n=b("../contour/attributes"),m=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;y.exports=b({x:D.x,y:D.y,z:D.z,marker:D.marker,histnorm:D.histnorm,histfunc:D.histfunc,nbinsx:D.nbinsx,xbins:D.xbins,nbinsy:D.nbinsy,ybins:D.ybins,autobinx:D.autobinx,autobiny:D.autobiny,
bingroup:D.bingroup,xbingroup:D.xbingroup,ybingroup:D.ybingroup,autocontour:n.autocontour,ncontours:n.ncontours,contours:n.contours,line:{color:n.line.color,width:b({},n.line.width,{dflt:.5}),dash:n.line.dash,smoothing:n.line.smoothing,editType:"plot"},zhoverformat:D.zhoverformat,hovertemplate:D.hovertemplate},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../contour/attributes":977,"../histogram2d/attributes":1066}],1073:[function(b,
y,D){var n=b("../../lib"),m=b("../histogram2d/sample_defaults"),p=b("../contour/contours_defaults"),h=b("../contour/style_defaults"),a=b("./attributes");y.exports=function(d,e,l,k){function c(f,g){return n.coerce(d,e,a,f,g)}m(d,e,c,k);!1!==e.visible&&(p(d,e,c,function(f){return n.coerce2(d,e,a,f)}),h(d,e,c,k),c("hovertemplate"))}},{"../../lib":749,"../contour/contours_defaults":984,"../contour/style_defaults":998,"../histogram2d/sample_defaults":1071,"./attributes":1072}],1074:[function(b,y,D){y.exports=
{attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../contour/calc"),plot:b("../contour/plot").plot,layerName:"contourlayer",style:b("../contour/style"),colorbar:b("../contour/colorbar"),hoverPoints:b("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg 2dMap contour histogram showLegend".split(" "),meta:{}}},{"../../plots/cartesian":810,"../contour/calc":978,
"../contour/colorbar":980,"../contour/hover":990,"../contour/plot":995,"../contour/style":997,"../histogram/cross_trace_defaults":1060,"./attributes":1072,"./defaults":1073}],1075:[function(b,y,D){D=b("../../plots/attributes");var n=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../lib/extend").extendFlat;b=b("./constants").colormodel;for(var p=["rgb","rgba","rgba256","hsl","hsla"],h=[],a=[],d=0;d<p.length;d++){var e=b[p[d]];h.push("For the `"+p[d]+"` colormodel, it is ["+(e.zminDflt||
e.min).join(", ")+"].");a.push("For the `"+p[d]+"` colormodel, it is ["+(e.zmaxDflt||e.max).join(", ")+"].")}y.exports=m({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:p,editType:"calc"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",
editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:m({},D.hoverinfo,{flags:"x y z color name text".split(" "),
dflt:"x+y+z+text+name"}),hovertemplate:n({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"./constants":1077}],1076:[function(b,y,D){function n(g,q,t,u){return function(w){return h.constrain((w-g)*q,t,u)}}function m(g,q){return function(t){return h.constrain(t,g,q)}}function p(g){var q=a.colormodel[g.colormodel],t=(q.colormodel||g.colormodel).length;g._sArray=[];for(var u=0;u<t;u++)q.min[u]!==g.zmin[u]||
q.max[u]!==g.zmax[u]?g._sArray.push(n(g.zmin[u],(q.max[u]-q.min[u])/(g.zmax[u]-g.zmin[u]),q.min[u],q.max[u])):g._sArray.push(m(q.min[u],q.max[u]));return function(w){w=w.slice(0,t);for(var x=0;x<t;x++){var E=w[x];if(!d(E))return!1;w[x]=g._sArray[x](E)}return w}}var h=b("../../lib"),a=b("./constants"),d=b("fast-isnumeric"),e=b("../../plots/cartesian/axes"),l=b("../../lib").maxRowLength,k=b("image-size"),c=b("../../snapshot/helpers").IMAGE_URL_PREFIX,f=b("buffer/").Buffer;y.exports=function(g,q){if(q._hasZ){var t=
q.z.length;var u=l(q.z)}else q._hasSource&&(t=q.source.replace(c,""),t=new f(t,"base64"),u=k(t),t=u.height,u=u.width);var w=e.getFromId(g,q.xaxis||"x");g=e.getFromId(g,q.yaxis||"y");var x=w.d2c(q.x0)-q.dx/2,E=g.d2c(q.y0)-q.dy/2,F,z=[x,x+u*q.dx],B=[E,E+t*q.dy];if(w&&"log"===w.type)for(F=0;F<u;F++)z.push(x+F*q.dx);if(g&&"log"===g.type)for(F=0;F<t;F++)B.push(E+F*q.dy);q._extremes[w._id]=e.findExtremes(w,z);q._extremes[g._id]=e.findExtremes(g,B);q._scaler=p(q);return[{x0:x,y0:E,z:q.z,w:u,h:t}]}},{"../../lib":749,
"../../plots/cartesian/axes":797,"../../snapshot/helpers":884,"./constants":1077,"buffer/":111,"fast-isnumeric":241,"image-size":418}],1077:[function(b,y,D){y.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(n){return n.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(n){return n.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(n){return n.slice(0,
4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(n){n=n.slice(0,3);n[1]+="%";n[2]+="%";return n},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(n){n=n.slice(0,4);n[1]+="%";n[2]+="%";return n},suffix:["","%","%",""]}}}},{}],1078:[function(b,y,D){var n=b("../../lib"),m=b("./attributes"),p=b("./constants"),h=b("../../snapshot/helpers").IMAGE_URL_PREFIX;y.exports=function(a,d){function e(k,c){return n.coerce(a,d,m,k,c)}e("source");d.source&&!d.source.match(h)&&
delete d.source;d._hasSource=!!d.source;var l=e("z");d._hasZ=!(void 0===l||!l.length||!l[0]||!l[0].length);d._hasZ||d._hasSource?(e("x0"),e("y0"),e("dx"),e("dy"),d._hasZ?(e("colormodel","rgb"),l=p.colormodel[d.colormodel],e("zmin",l.zminDflt||l.min),e("zmax",l.zmaxDflt||l.max)):d._hasSource&&(d.colormodel="rgba256",l=p.colormodel[d.colormodel],d.zmin=l.zminDflt,d.zmax=l.zmaxDflt),e("text"),e("hovertext"),e("hovertemplate"),d._length=null):d.visible=!1}},{"../../lib":749,"../../snapshot/helpers":884,
"./attributes":1075,"./constants":1077}],1079:[function(b,y,D){y.exports=function(n,m){"xVal"in m&&(n.x=m.xVal);"yVal"in m&&(n.y=m.yVal);m.xa&&(n.xaxis=m.xa);m.ya&&(n.yaxis=m.ya);n.color=m.color;n.colormodel=m.trace.colormodel;n.z||(n.z=m.color);return n}},{}],1080:[function(b,y,D){var n=b("../../components/fx"),m=b("../../lib"),p=b("./constants");y.exports=function(h,a,d){var e=h.cd[0],l=e.trace,k=h.xa,c=h.ya;if(!(0<n.inbox(a-e.x0,a-(e.x0+e.w*l.dx),0)||0<n.inbox(d-e.y0,d-(e.y0+e.h*l.dy),0))){a=Math.floor((a-
e.x0)/l.dx);d=Math.floor(Math.abs(d-e.y0)/l.dy);if(l._hasZ)var f=e.z[d][a];else l._hasSource&&(f=l._canvas.el.getContext("2d").getImageData(a,d,1,1).data);if(f){var g=e.hi||l.hoverinfo,q;g&&(g=g.split("+"),-1!==g.indexOf("all")&&(g=["color"]),-1!==g.indexOf("color")&&(q=!0));var t=p.colormodel[l.colormodel],u=t.colormodel||l.colormodel,w=u.length;g=l._scaler(f);t=t.suffix;var x=[];if(l.hovertemplate||q)x.push("["+[g[0]+t[0],g[1]+t[1],g[2]+t[2]].join(", ")),4===w&&x.push(", "+g[3]+t[3]),x.push("]"),
x=x.join(""),h.extraText=u.toUpperCase()+": "+x;var E;Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[d])?E=l.hovertext[d][a]:Array.isArray(l.text)&&Array.isArray(l.text[d])&&(E=l.text[d][a]);c=c.c2p(e.y0+(d+.5)*l.dy);q=e.x0+(a+.5)*l.dx;u=e.y0+(d+.5)*l.dy;f="["+f.slice(0,l.colormodel.length).join(", ")+"]";return[m.extendFlat(h,{index:[d,a],x0:k.c2p(e.x0+a*l.dx),x1:k.c2p(e.x0+(a+1)*l.dx),y0:c,y1:c,color:g,xVal:q,xLabelVal:q,yVal:u,yLabelVal:u,zLabelVal:f,text:E,hovertemplateLabels:{zLabel:f,
colorLabel:x,"color[0]Label":g[0]+t[0],"color[1]Label":g[1]+t[1],"color[2]Label":g[2]+t[2],"color[3]Label":g[3]+t[3]}})]}}}},{"../../components/fx":655,"../../lib":749,"./constants":1077}],1081:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover"),eventData:b("./event_data"),moduleType:"trace",name:"image",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],
animatable:!1,meta:{}}},{"../../plots/cartesian":810,"./attributes":1075,"./calc":1076,"./defaults":1078,"./event_data":1079,"./hover":1080,"./plot":1082,"./style":1083}],1082:[function(b,y,D){function n(e){return"linear"===e.type&&e.range[1]>e.range[0]===("x"===e._id.charAt(0))}var m=b("d3"),p=b("../../lib"),h=b("../../constants/xmlns_namespaces"),a=b("./constants"),d=p.isIOS()||p.isSafari()||p.isIE();y.exports=function(e,l,k,c){var f=l.xaxis,g=l.yaxis,q=!(d||e._context._exportedPlot);p.makeTraceGroups(c,
k,"im").each(function(t){function u(X){var da=document.createElement("canvas");da.width=S;da.height=O;var ea=da.getContext("2d"),ca=function(ma){return p.constrain(Math.round(f.c2p(B+ma*I)-N),0,S)},ia=function(ma){return p.constrain(Math.round(g.c2p(C+ma*J)-L),0,O)},ha=a.colormodel[E.colormodel],fa=ha.colormodel||E.colormodel;ha=ha.fmt;for(K=0;K<x.w;K++){var na=ca(K),sa=ca(K+1);if(sa!==na&&!isNaN(sa)&&!isNaN(na))for(var ua=0;ua<x.h;ua++){var ta=ia(ua),oa=ia(ua+1);if(oa!==ta&&!isNaN(oa)&&!isNaN(ta)&&
X(K,ua)){var va=E._scaler(X(K,ua));ea.fillStyle=va?fa+"("+ha(va).join(",")+")":"rgba(0,0,0,0)";ea.fillRect(na,ta,sa-na,oa-ta)}}}return da}var w=m.select(this),x=t[0],E=x.trace,F=q&&!E._hasZ&&E._hasSource&&n(f)&&n(g);E._fastImage=F;var z=x.z,B=x.x0,C=x.y0,v=x.w,G=x.h,I=E.dx,J=E.dy,K;for(K=0;void 0===N&&K<v;){var N=f.c2p(B+K*I);K++}for(K=v;void 0===H&&0<K;){var H=f.c2p(B+K*I);K--}for(K=0;void 0===L&&K<G;){var L=g.c2p(C+K*J);K++}for(K=G;void 0===P&&0<K;){var P=g.c2p(C+K*J);K--}if(H<N){var Q=H;H=N;N=
Q}P<L&&(Q=L,L=P,P=Q);F||(N=Math.max(-.5*f._length,N),H=Math.min(1.5*f._length,H),L=Math.max(-.5*g._length,L),P=Math.min(1.5*g._length,P));var S=Math.round(H-N),O=Math.round(P-L);if(0>=S||0>=O)w.selectAll("image").data([]).exit().remove();else{var U=w.selectAll("image").data([t]);U.enter().append("svg:image").attr({xmlns:h.svg,preserveAspectRatio:"none"});U.exit().remove();U.attr("style","image-rendering: optimizeSpeed; image-rendering: -moz-crisp-edges; image-rendering: -o-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: optimize-contrast; image-rendering: crisp-edges; image-rendering: pixelated;");
t=(new Promise(function(X){if(E._hasZ)X();else if(E._hasSource)if(E._canvas&&E._canvas.el.width===v&&E._canvas.el.height===G&&E._canvas.source===E.source)X();else{var da=document.createElement("canvas");da.width=v;da.height=G;var ea=da.getContext("2d");E._image=E._image||new Image;var ca=E._image;ca.onload=function(){ea.drawImage(ca,0,0);E._canvas={el:da,source:E.source};X()};ca.setAttribute("src",E.source)}})).then(function(){if(E._hasZ){var X=u(function(ea,ca){return z[ca][ea]});X=X.toDataURL("image/png")}else if(E._hasSource)if(F)X=
E.source;else{var da=E._canvas.el.getContext("2d").getImageData(0,0,v,G).data;X=u(function(ea,ca){ea=4*(ca*v+ea);return[da[ea],da[ea+1],da[ea+2],da[ea+3]]});X=X.toDataURL("image/png")}U.attr({"xlink:href":X,height:O,width:S,x:N,y:L})});e._promises.push(t)}})}},{"../../constants/xmlns_namespaces":725,"../../lib":749,"./constants":1077,d3:169}],1083:[function(b,y,D){var n=b("d3");y.exports=function(m){n.select(m).selectAll(".im image").style("opacity",function(p){return p[0].trace.opacity})}},{d3:169}],
1084:[function(b,y,D){D=b("../../lib/extend").extendFlat;var n=b("../../lib/extend").extendDeep,m=b("../../plot_api/edit_types").overrideAll,p=b("../../plots/font_attributes"),h=b("../../components/color/attributes"),a=b("../../plots/domain").attributes,d=b("../../plots/cartesian/layout_attributes"),e=b("../../plot_api/plot_template").templatedArray,l=b("../../constants/delta.js");b("../../constants/docs");b=p({editType:"plot",colorEditType:"plot"});var k={color:{valType:"color",editType:"plot"},
line:{color:{valType:"color",dflt:h.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},c={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"};e=e("step",n({},k,{range:c}));y.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",
anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:D({},b,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot"},font:D({},b,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",
editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot"},increasing:{symbol:{valType:"string",dflt:l.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:l.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:l.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:l.DECREASING.COLOR,
editType:"plot"},editType:"plot"},font:D({},b,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:n({},k,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:h.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:m({range:c,visible:D({},d.visible,{dflt:!0}),tickmode:d.tickmode,nticks:d.nticks,tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,
ticks:D({},d.ticks,{dflt:"outside"}),ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,showticklabels:d.showticklabels,tickfont:p({}),tickangle:d.tickangle,tickformat:d.tickformat,tickformatstops:d.tickformatstops,tickprefix:d.tickprefix,showtickprefix:d.showtickprefix,ticksuffix:d.ticksuffix,showticksuffix:d.showticksuffix,separatethousands:d.separatethousands,exponentformat:d.exponentformat,showexponent:d.showexponent,editType:"plot"},"plot"),steps:e,threshold:{line:{color:D({},k.line.color,
{}),width:D({},k.line.width,{dflt:1}),editType:"plot"},thickness:D({},k.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":614,"../../constants/delta.js":718,"../../constants/docs":719,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/cartesian/layout_attributes":811,"../../plots/domain":824,"../../plots/font_attributes":825}],1085:[function(b,y,D){var n=
b("../../plots/plots");D.name="indicator";D.plot=function(m,p,h,a){n.plotBasePlot(D.name,m,p,h,a)};D.clean=function(m,p,h,a){n.cleanBasePlot(D.name,m,p,h,a)}},{"../../plots/plots":860}],1086:[function(b,y,D){y.exports={calc:function(n,m){n=[];var p=m.value;"number"!==typeof m._lastValue&&(m._lastValue=m.value);var h=m._lastValue,a=h;m._hasDelta&&"number"===typeof m.delta.reference&&(a=m.delta.reference);n[0]={y:p,lastY:h,delta:p-a,relativeDelta:(p-a)/a};return n}}},{}],1087:[function(b,y,D){y.exports=
{defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],1088:[function(b,y,D){function n(f,g){function q(t,u){return m.coerce(f,g,p.gauge.steps,t,u)}q("color");q("line.color");q("line.width");q("range");q("thickness")}var m=b("../../lib"),p=b("./attributes"),h=b("../../plots/domain").defaults,a=b("../../plot_api/plot_template"),d=b("../../plots/array_container_defaults"),e=b("./constants.js"),l=b("../../plots/cartesian/tick_value_defaults"),
k=b("../../plots/cartesian/tick_mark_defaults"),c=b("../../plots/cartesian/tick_label_defaults");y.exports={supplyDefaults:function(f,g,q,t){function u(G,I){return m.coerce(f,g,p,G,I)}function w(G,I){return m.coerce(z,B,p.gauge,G,I)}function x(G,I){return m.coerce(C,v,p.gauge.axis,G,I)}h(g,t,u);u("mode");g._hasNumber=-1!==g.mode.indexOf("number");g._hasDelta=-1!==g.mode.indexOf("delta");g._hasGauge=-1!==g.mode.indexOf("gauge");q=u("value");g._range=[0,"number"===typeof q?1.5*q:1];q=Array(2);if(g._hasNumber){u("number.valueformat");
u("number.font.color",t.font.color);u("number.font.family",t.font.family);u("number.font.size");void 0===g.number.font.size&&(g.number.font.size=e.defaultNumberFontSize,q[0]=!0);u("number.prefix");u("number.suffix");var E=g.number.font.size}if(g._hasDelta){u("delta.font.color",t.font.color);u("delta.font.family",t.font.family);u("delta.font.size");void 0===g.delta.font.size&&(g.delta.font.size=(g._hasNumber?.5:1)*(E||e.defaultNumberFontSize),q[1]=!0);u("delta.reference",g.value);u("delta.relative");
u("delta.valueformat",g.delta.relative?"2%":"");u("delta.increasing.symbol");u("delta.increasing.color");u("delta.decreasing.symbol");u("delta.decreasing.color");u("delta.position");var F=g.delta.font.size}g._scaleNumbers=(!g._hasNumber||q[0])&&(!g._hasDelta||q[1])||!1;u("title.font.color",t.font.color);u("title.font.family",t.font.family);u("title.font.size",.25*(E||F||e.defaultNumberFontSize));u("title.text");var z;if(g._hasGauge){(z=f.gauge)||(z={});var B=a.newContainer(g,"gauge");w("shape");(g._isBullet=
"bullet"===g.gauge.shape)||u("title.align","center");(g._isAngular="angular"===g.gauge.shape)||u("align","center");w("bgcolor",t.paper_bgcolor);w("borderwidth");w("bordercolor");w("bar.color");w("bar.line.color");w("bar.line.width");w("bar.thickness",e.valueThickness*("bullet"===g.gauge.shape?.5:1));d(z,B,{name:"steps",handleItemDefaults:n});w("threshold.value");w("threshold.thickness");w("threshold.line.width");w("threshold.line.color");var C={};z&&(C=z.axis||{});var v=a.newContainer(B,"axis");x("visible");
g._range=x("range",g._range);t={outerTicks:!0};l(C,v,x,"linear");c(C,v,x,"linear",t);k(C,v,x,t)}else u("title.align","center"),u("align","center"),g._isAngular=g._isBullet=!1;g._length=null}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/array_container_defaults":793,"../../plots/cartesian/tick_label_defaults":818,"../../plots/cartesian/tick_mark_defaults":819,"../../plots/cartesian/tick_value_defaults":820,"../../plots/domain":824,"./attributes":1084,"./constants.js":1087}],1089:[function(b,
y,D){y.exports={moduleType:"trace",name:"indicator",basePlotModule:b("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc").calc,plot:b("./plot"),meta:{}}},{"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./plot":1090}],1090:[function(b,y,D){function n(J,K,N,H){function L(na){na.attr("width",function(sa){return Math.max(0,ha.c2p(sa.range[1])-ha.c2p(sa.range[0]))}).attr("x",
function(sa){return ha.c2p(sa.range[0])}).attr("y",function(sa){return.5*(1-sa.thickness)*ca}).attr("height",function(sa){return sa.thickness*ca})}var P=N[0].trace;K=H.gauge;var Q=H.layer,S=H.gaugeBg,O=H.gaugeOutline,U=H.size,X=P.domain,da=H.transitionOpts,ea=H.onComplete;K.enter().append("g").classed("bullet",!0);K.attr("transform","translate("+U.l+", "+U.t+")");Q.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0);Q.selectAll("g.xbulletaxistick,path,text").remove();var ca=U.h;H=P.gauge.bar.thickness*
ca;var ia=X.x[0];X=X.x[0]+(X.x[1]-X.x[0])*(P._hasNumber||P._hasDelta?1-w.bulletNumberDomainSize:1);var ha=d(J,P.gauge.axis);ha._id="xbulletaxis";ha.domain=[ia,X];ha.setScale();X=E.calcTicks(ha);ia=E.makeTransFn(ha);var fa=E.getTickSigns(ha)[2];U=U.t+U.h;ha.visible&&(E.drawTicks(J,ha,{vals:"inside"===ha.ticks?E.clipEnds(ha,X):X,layer:Q,path:E.makeTickPath(ha,U,fa),transFn:ia}),E.drawLabels(J,ha,{vals:X,layer:Q,transFn:ia,labelFns:E.makeLabelFns(ha,U)}));J=[S].concat(P.gauge.steps);J=K.selectAll("g.bg-bullet").data(J);
J.enter().append("g").classed("bg-bullet",!0).append("rect");J.select("rect").call(L).call(h);J.exit().remove();J=K.selectAll("g.value-bullet").data([P.gauge.bar]);J.enter().append("g").classed("value-bullet",!0).append("rect");J.select("rect").attr("height",H).attr("y",(ca-H)/2).call(h);da&&0<da.duration?J.select("rect").transition().duration(da.duration).ease(da.easing).each("end",function(){ea&&ea()}).each("interrupt",function(){ea&&ea()}).attr("width",Math.max(0,ha.c2p(Math.min(P.gauge.axis.range[1],
N[0].y)))):J.select("rect").attr("width","number"===typeof N[0].y?Math.max(0,ha.c2p(Math.min(P.gauge.axis.range[1],N[0].y))):0);J.exit().remove();N=N.filter(function(){return P.gauge.threshold.value});N=K.selectAll("g.threshold-bullet").data(N);N.enter().append("g").classed("threshold-bullet",!0).append("line");N.select("line").attr("x1",ha.c2p(P.gauge.threshold.value)).attr("x2",ha.c2p(P.gauge.threshold.value)).attr("y1",(1-P.gauge.threshold.thickness)/2*ca).attr("y2",(1-(1-P.gauge.threshold.thickness)/
2)*ca).call(C.stroke,P.gauge.threshold.line.color).style("stroke-width",P.gauge.threshold.line.width);N.exit().remove();K=K.selectAll("g.gauge-outline").data([O]);K.enter().append("g").classed("gauge-outline",!0).append("rect");K.select("rect").call(L).call(h);K.exit().remove()}function m(J,K,N,H){function L(za){var qa=S.gauge.axis.range[0];za=(za-qa)/(S.gauge.axis.range[1]-qa)*Math.PI-fa;return za<-fa?-fa:za>fa?fa:za}function P(za){return f.svg.arc().innerRadius((X+U)/2-za/2*(U-X)).outerRadius((X+
U)/2+za/2*(U-X)).startAngle(-fa)}function Q(za){za.attr("d",function(qa){return P(qa.thickness).startAngle(L(qa.range[0])).endAngle(L(qa.range[1]))()})}var S=N[0].trace,O=H.size,U=H.radius,X=H.innerRadius,da=H.gaugeBg;K=H.gaugeOutline;var ea=[O.l+O.w/2,O.t+O.h/2+U/2];O=H.gauge;var ca=H.layer,ia=H.transitionOpts,ha=H.onComplete,fa=Math.PI/2;O.enter().append("g").classed("angular",!0);O.attr("transform",e(ea[0],ea[1]));ca.enter().append("g").classed("angularaxis",!0).classed("crisp",!0);ca.selectAll("g.xangularaxistick,path,text").remove();
var na=d(J,S.gauge.axis);na.type="linear";na.range=S.gauge.axis.range;na._id="xangularaxis";na.setScale();var sa=function(za){return(na.range[0]-za.x)/(na.range[1]-na.range[0])*Math.PI+Math.PI},ua={},ta=E.makeLabelFns(na,0).labelStandoff;ua.xFn=function(za){za=sa(za);return Math.cos(za)*ta};ua.yFn=function(za){var qa=sa(za);return-Math.sin(qa)*(ta+za.fontSize*(0<Math.sin(qa)?.2:1))+Math.abs(Math.cos(qa))*za.fontSize*t};ua.anchorFn=function(za){za=sa(za);za=Math.cos(za);return.1>Math.abs(za)?"middle":
0<za?"start":"end"};ua.heightFn=function(za,qa,Ca){za=sa(za);return-.5*(1+Math.sin(za))*Ca};var oa=function(za){return e(ea[0]+U*Math.cos(za),ea[1]-U*Math.sin(za))};var va=function(za){return oa(sa(za))};var ma=function(za){za=sa(za);return oa(za)+"rotate("+-q(za)+")"};H=E.calcTicks(na);var pa=E.getTickSigns(na)[2];na.visible&&(pa="inside"===na.ticks?-1:1,E.drawTicks(J,na,{vals:H,layer:ca,path:"M"+(na.linewidth||1)/2*pa+",0h"+pa*na.ticklen,transFn:ma}),E.drawLabels(J,na,{vals:H,layer:ca,transFn:va,
labelFns:ua}));J=[da].concat(S.gauge.steps);J=O.selectAll("g.bg-arc").data(J);J.enter().append("g").classed("bg-arc",!0).append("path");J.select("path").call(Q).call(h);J.exit().remove();J=P(S.gauge.bar.thickness);da=O.selectAll("g.value-arc").data([S.gauge.bar]);da.enter().append("g").classed("value-arc",!0).append("path");ca=da.select("path");ia&&0<ia.duration?(ca.transition().duration(ia.duration).ease(ia.easing).each("end",function(){ha&&ha()}).each("interrupt",function(){ha&&ha()}).attrTween("d",
a(J,L(N[0].lastY),L(N[0].y))),S._lastValue=N[0].y):ca.attr("d","number"===typeof N[0].y?J.endAngle(L(N[0].y)):"M0,0Z");ca.call(h);da.exit().remove();J=[];(N=S.gauge.threshold.value)&&J.push({range:[N,N],color:S.gauge.threshold.color,line:{color:S.gauge.threshold.line.color,width:S.gauge.threshold.line.width},thickness:S.gauge.threshold.thickness});N=O.selectAll("g.threshold-arc").data(J);N.enter().append("g").classed("threshold-arc",!0).append("path");N.select("path").call(Q).call(h);N.exit().remove();
K=O.selectAll("g.gauge-outline").data([K]);K.enter().append("g").classed("gauge-outline",!0).append("path");K.select("path").call(Q).call(h);K.exit().remove()}function p(J,K,N,H){function L(pa,za,qa,Ca){if(!pa.match("s")||0<=qa===0<=Ca||za(qa).slice(-1).match(I)||za(Ca).slice(-1).match(I))return za;pa=pa.slice().replace("s","f").replace(/\d+/,function(Oa){return parseInt(Oa)-1});var Ka=d(J,{tickformat:pa});return function(Oa){return 1>Math.abs(Oa)?E.tickText(Ka,Oa).text:za(Oa)}}function P(){function pa(){var kb=
"number"===typeof N[0].y?Ka+qa(N[0].y)+Ca:"-";Oa.text(kb).call(u.font,S.number.font).call(x.convertToTspans,J)}var za=d(J,{tickformat:S.number.valueformat},S._range);za.setScale();E.prepTicks(za);var qa=function(kb){return E.tickText(za,kb).text},Ca=S.number.suffix,Ka=S.number.prefix,Oa=ia.select("text.number");ea&&0<ea.duration?Oa.transition().duration(ea.duration).ease(ea.easing).each("end",function(){pa();ca&&ca()}).each("interrupt",function(){pa();ca&&ca()}).attrTween("text",function(){var kb=
f.select(this),mb=f.interpolateNumber(N[0].lastY,N[0].y);S._lastValue=N[0].y;var tb=L(S.number.valueformat,qa,N[0].lastY,N[0].y);return function(nb){kb.text(Ka+tb(mb(nb))+Ca)}}):pa();ha=k(Ka+qa(N[0].y)+Ca,S.number.font,da,J);return Oa}function Q(){function pa(){kb.text(Ka(Ca(N[0]),qa)).call(C.fill,Oa(N[0])).call(x.convertToTspans,J)}var za=d(J,{tickformat:S.delta.valueformat},S._range);za.setScale();E.prepTicks(za);var qa=function(mb){return E.tickText(za,mb).text},Ca=function(mb){return S.delta.relative?
mb.relativeDelta:mb.delta},Ka=function(mb,tb){return 0===mb||"number"!==typeof mb||isNaN(mb)?"-":(0<mb?S.delta.increasing.symbol:S.delta.decreasing.symbol)+tb(mb)},Oa=function(mb){return 0<=mb.delta?S.delta.increasing.color:S.delta.decreasing.color};void 0===S._deltaLastValue&&(S._deltaLastValue=Ca(N[0]));var kb=ia.select("text.delta");kb.call(u.font,S.delta.font).call(C.fill,Oa({delta:S._deltaLastValue}));ea&&0<ea.duration?kb.transition().duration(ea.duration).ease(ea.easing).tween("text",function(){var mb=
f.select(this),tb=Ca(N[0]),nb=S._deltaLastValue,Ta=L(S.delta.valueformat,qa,nb,tb),fb=f.interpolateNumber(nb,tb);S._deltaLastValue=tb;return function(ab){mb.text(Ka(fb(ab),Ta));mb.call(C.fill,Oa({delta:fb(ab)}))}}).each("end",function(){pa();ca&&ca()}).each("interrupt",function(){pa();ca&&ca()}):pa();fa=k(Ka(Ca(N[0]),qa),S.delta.font,da,J);return kb}var S=N[0].trace,O=H.numbersX,U=H.numbersY,X=S.align||"center",da=v[X],ea=H.transitionOpts,ca=H.onComplete,ia=g.ensureSingle(K,"g","numbers"),ha,fa;K=
[];S._hasNumber&&K.push("number");S._hasDelta&&(K.push("delta"),"left"===S.delta.position&&K.reverse());K=ia.selectAll("text").data(K);K.enter().append("text");K.attr("text-anchor",function(){return da}).attr("class",function(pa){return pa}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null);K.exit().remove();var na=S.mode+S.align;if(S._hasDelta){var sa=Q();na+=S.delta.position+S.delta.font.size+S.delta.font.family+S.delta.valueformat;na+=S.delta.increasing.symbol+S.delta.decreasing.symbol;
var ua=fa}S._hasNumber&&(P(),na+=S.number.font.size+S.number.font.family+S.number.valueformat+S.number.suffix+S.number.prefix,ua=ha);if(S._hasDelta&&S._hasNumber){K=[(ha.left+ha.right)/2,(ha.top+ha.bottom)/2];var ta=[(fa.left+fa.right)/2,(fa.top+fa.bottom)/2],oa=.75*S.delta.font.size;if("left"===S.delta.position){var va=c(S,"deltaPos",0,-1*(ha.width*G[S.align]+fa.width*(1-G[S.align])+oa),na,Math.min);var ma=K[1]-ta[1];ua={width:ha.width+fa.width+oa,height:Math.max(ha.height,fa.height),left:fa.left+
va,right:ha.right,top:Math.min(ha.top,fa.top+ma),bottom:Math.max(ha.bottom,fa.bottom+ma)}}"right"===S.delta.position&&(va=c(S,"deltaPos",0,ha.width*(1-G[S.align])+fa.width*G[S.align]+oa,na,Math.max),ma=K[1]-ta[1],ua={width:ha.width+fa.width+oa,height:Math.max(ha.height,fa.height),left:ha.left,right:fa.right+va,top:Math.min(ha.top,fa.top+ma),bottom:Math.max(ha.bottom,fa.bottom+ma)});"bottom"===S.delta.position&&(va=null,ma=fa.height,ua={width:Math.max(ha.width,fa.width),height:ha.height+fa.height,
left:Math.min(ha.left,fa.left),right:Math.max(ha.right,fa.right),top:ha.bottom-ha.height,bottom:ha.bottom+fa.height});"top"===S.delta.position&&(va=null,ma=ha.top,ua={width:Math.max(ha.width,fa.width),height:ha.height+fa.height,left:Math.min(ha.left,fa.left),right:Math.max(ha.right,fa.right),top:ha.bottom-ha.height-fa.height,bottom:ha.bottom});sa.attr({dx:va,dy:ma})}(S._hasNumber||S._hasDelta)&&ia.attr("transform",function(){var pa=H.numbersScaler(ua);na+=pa[2];pa=c(S,"numbersScale",1,pa[0],na,Math.min);
S._scaleNumbers||(pa=1);var za=S._isAngular?U-pa*ua.bottom:U-pa*(ua.top+ua.bottom)/2;S._numbersTop=pa*ua.top+za;var qa=ua[X];"center"===X&&(qa=(ua.left+ua.right)/2);qa=O-pa*qa;qa=c(S,"numbersTranslate",0,qa,na,Math.max);return e(qa,za)+" scale("+pa+")"})}function h(J){J.each(function(K){C.stroke(f.select(this),K.line.color)}).each(function(K){C.fill(f.select(this),K.color)}).style("stroke-width",function(K){return K.line.width})}function a(J,K,N){return function(){var H=f.interpolate(K,N);return function(L){return J.endAngle(H(L))()}}}
function d(J,K,N){function H(Q,S){return g.coerce(L,P,B,Q,S)}J=J._fullLayout;var L=g.extendFlat({type:"linear",ticks:"outside",range:N,showline:!0},K),P={type:"linear",_id:"x"+K._id};K={letter:"x",font:J.font,noHover:!0,noTickson:!0};F(L,P,H,K,J);z(L,P,H,K);return P}function e(J,K){return"translate("+J+","+K+")"}function l(J,K,N){return[Math.min(K/J.width,N/J.height),J,K+"x"+N]}function k(J,K,N,H){var L=document.createElementNS("http://www.w3.org/2000/svg","text");L=f.select(L);L.text(J).attr("x",
0).attr("y",0).attr("text-anchor",N).attr("data-unformatted",J).call(x.convertToTspans,H).call(u.font,K);return u.bBox(L.node())}function c(J,K,N,H,L,P){K="_cache"+K;J[K]&&J[K].key===L||(J[K]={key:L,value:N});N=g.aggNums(P,null,[J[K].value,H],2);return J[K].value=N}var f=b("d3"),g=b("../../lib"),q=g.rad2deg,t=b("../../constants/alignment").MID_SHIFT,u=b("../../components/drawing"),w=b("./constants"),x=b("../../lib/svg_text_utils"),E=b("../../plots/cartesian/axes"),F=b("../../plots/cartesian/axis_defaults"),
z=b("../../plots/cartesian/position_defaults"),B=b("../../plots/cartesian/layout_attributes"),C=b("../../components/color"),v={left:"start",center:"middle",right:"end"},G={left:0,center:.5,right:1},I=/[yzafpnmkMGTPEZY]/;y.exports=function(J,K,N,H){var L=J._fullLayout,P;N&&0<N.duration&&H&&(P=H());g.makeTraceGroups(L._indicatorlayer,K,"trace").each(function(Q){var S=Q[0].trace,O=f.select(this),U=S._hasGauge,X=S._isAngular,da=S._isBullet,ea=S.domain,ca={w:L._size.w*(ea.x[1]-ea.x[0]),h:L._size.h*(ea.y[1]-
ea.y[0]),l:L._size.l+L._size.w*ea.x[0],r:L._size.r+L._size.w*(1-ea.x[1]),t:L._size.t+L._size.h*(1-ea.y[1]),b:L._size.b+L._size.h*ea.y[0]},ia=ca.l+ca.w/2,ha=ca.t+ca.h/2,fa=Math.min(ca.w/2,ca.h),na=w.innerRadius*fa;ea=S.align||"center";var sa=ha;if(U){if(X){var ua=ia;sa=ha+fa/2;var ta=function(qa){var Ca=.9*na;return[Ca/Math.sqrt(qa.width/2*(qa.width/2)+qa.height*qa.height),qa,Ca]}}if(da){var oa=w.bulletPadding;ua=1-w.bulletNumberDomainSize+oa;ua=ca.l+(ua+(1-ua)*G[ea])*ca.w;ta=function(qa){return l(qa,
(w.bulletNumberDomainSize-oa)*ca.w,ca.h)}}}else ua=ca.l+G[ea]*ca.w,ta=function(qa){return l(qa,ca.w,ca.h)};p(J,O,Q,{numbersX:ua,numbersY:sa,numbersScaler:ta,transitionOpts:N,onComplete:P});if(U){var va={range:S.gauge.axis.range,color:S.gauge.bgcolor,line:{color:S.gauge.bordercolor,width:0},thickness:1};var ma={range:S.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:S.gauge.bordercolor,width:S.gauge.borderwidth},thickness:1}}ua=O.selectAll("g.angular").data(X?Q:[]);ua.exit().remove();var pa=
O.selectAll("g.angularaxis").data(X?Q:[]);pa.exit().remove();X&&m(J,O,Q,{radius:fa,innerRadius:na,gauge:ua,layer:pa,size:ca,gaugeBg:va,gaugeOutline:ma,transitionOpts:N,onComplete:P});ua=O.selectAll("g.bullet").data(da?Q:[]);ua.exit().remove();ta=O.selectAll("g.bulletaxis").data(da?Q:[]);ta.exit().remove();da&&n(J,O,Q,{gauge:ua,layer:ta,size:ca,gaugeBg:va,gaugeOutline:ma,transitionOpts:N,onComplete:P});var za=O.selectAll("text.title").data(Q);za.exit().remove();za.enter().append("text").classed("title",
!0);za.attr("text-anchor",function(){return da?v.right:v[S.title.align]}).text(S.title.text).call(u.font,S.title.font).call(x.convertToTspans,J);za.attr("transform",function(){var qa=ca.l+ca.w*G[S.title.align],Ca,Ka=w.titlePadding,Oa=u.bBox(za.node());U?(X&&(Ca=S.gauge.axis.visible?u.bBox(pa.node()).top-Ka-Oa.bottom:ca.t+ca.h/2-fa/2-Oa.bottom-Ka),da&&(Ca=sa-(Oa.top+Oa.bottom)/2,qa=ca.l-w.bulletPadding*ca.w)):Ca=S._numbersTop-Ka-Oa.bottom;return e(qa,Ca)})})}},{"../../components/color":615,"../../components/drawing":637,
"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_defaults":799,"../../plots/cartesian/layout_attributes":811,"../../plots/cartesian/position_defaults":814,"./constants":1087,d3:169}],1091:[function(b,y,D){function n(e){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function m(e){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",
min:0,max:1,dflt:1}}}D=b("../../components/colorscale/attributes");var p=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../mesh3d/attributes"),a=b("../../plots/attributes"),d=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;y=y.exports=b(d({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",
dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:n("x"),y:n("y"),z:n("z")},caps:{x:m("x"),y:m("y"),z:m("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:p(),showlegend:d({},a.showlegend,{dflt:!1})},D("",{colorAttr:"`value`",showScaleDflt:!0,
editTypeOverride:"calc"}),{opacity:h.opacity,lightposition:h.lightposition,lighting:h.lighting,flatshading:h.flatshading,contour:h.contour,hoverinfo:d({},a.hoverinfo)}),"calc","nested");y.flatshading.dflt=!0;y.lighting.facenormalsepsilon.dflt=0;y.x.editType=y.y.editType=y.z.editType=y.value.editType="calc+clearAxisTypes";y.transforms=void 0},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875,
"../mesh3d/attributes":1096}],1092:[function(b,y,D){var n=b("../../components/colorscale/calc"),m=b("../streamtube/calc").processGrid,p=b("../streamtube/calc").filter;y.exports=function(h,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length);a._x=p(a.x,a._len);a._y=p(a.y,a._len);a._z=p(a.z,a._len);a._value=p(a.value,a._len);var d=m(a);a._gridFill=d.fill;a._Xs=d.Xs;a._Ys=d.Ys;a._Zs=d.Zs;a._len=d.len;d=Infinity;for(var e=-Infinity,l=0;l<a._len;l++){var k=a._value[l];d=Math.min(d,k);e=
Math.max(e,k)}a._minValues=d;a._maxValues=e;a._vMin=void 0===a.isomin||null===a.isomin?d:a.isomin;a._vMax=void 0===a.isomax||null===a.isomin?e:a.isomax;n(h,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623,"../streamtube/calc":1262}],1093:[function(b,y,D){function n(c,f,g){this.scene=c;this.uid=g;this.mesh=f;this.name="";this.data=null;this.showContour=!1}function m(c){function f(){mb=[];tb=[];nb=[];Ta=[];sa=na=0}function g(ab,ra,Ea,Ia){mb.push(ab);
tb.push(ra);nb.push(Ea);Ta.push(Ia);na++;return na-1}function q(ab,ra,Ea){for(var Ia=[],Va=0;Va<ab.length;Va++)Ia[Va]=ab[Va]*(1-Ea)+Ea*ra[Va];return Ia}function t(ab,ra){return"all"===ab||null===ab?!0:-1<ab.indexOf(ra)}function u(ab,ra,Ea){sa=na;var Ia=[ra];var Va=[Ea];if(1<=fb)Ia=[ra],Va=[Ea];else if(0<fb){var rb=Ea;Ia=ra[0];Va=ra[1];ra=ra[2];for(var ib=[],Na=0;Na<Ia.length;Na++)ib[Na]=(Ia[Na]+Va[Na]+ra[Na])/3;var Za=Math.sqrt(1-fb);Na=q(ib,Ia,Za);Ea=q(ib,Va,Za);var eb=q(ib,ra,Za);ib=rb[0];Za=rb[1];
rb=rb[2];ra=[[Ia,Va,Ea],[Ea,Na,Ia],[Va,ra,eb],[eb,Ea,Va],[ra,Ia,Na],[Na,eb,ra]];Va=[[ib,Za,-1],[-1,-1,ib],[Za,rb,-1],[-1,-1,Za],[rb,ib,-1],[-1,-1,rb]];Ia=ra}for(rb=0;rb<Ia.length;rb++){ra=Ia[rb];Ea=Va[rb];Na=[];for(ib=0;3>ib;ib++){var Ba=ra[ib][0],Ma=ra[ib][1];eb=ra[ib][2];Za=ra[ib][3];if(-1<Ea[ib])var $a=Ea[ib];else a:{$a=Ta.length;for(var lb=sa;lb<$a;lb++)if(Ba===mb[lb]&&Ma===tb[lb]&&eb===nb[lb]){$a=lb;break a}$a=-1}-1<$a?Na[ib]=$a:($a=Na,lb=ib,Za=null===ab?Za:ab,$a[lb]=g(Ba,Ma,eb,Za))}ra=Na[1];
Ea=Na[2];c._meshI.push(Na[0]);c._meshJ.push(ra);c._meshK.push(Ea);fa++}}function w(ab,ra,Ea){var Ia=function(Va,rb,ib){u(ab,[ra[Va],ra[rb],ra[ib]],[Ea[Va],Ea[rb],Ea[ib]])};Ia(0,1,2);Ia(2,3,0)}function x(ab,ra,Ea){var Ia=function(Va,rb,ib){u(ab,[ra[Va],ra[rb],ra[ib]],[Ea[Va],Ea[rb],Ea[ib]])};Ia(0,1,2);Ia(3,0,1);Ia(2,3,0);Ia(1,2,3)}function E(ab,ra,Ea,Ia){var Va=ab[3];Va<Ea&&(Va=Ea);Va>Ia&&(Va=Ia);Ea=(ab[3]-Va)/(ab[3]-ra[3]+1E-9);Ia=[];for(Va=0;4>Va;Va++)Ia[Va]=(1-Ea)*ab[Va]+Ea*ra[Va];return Ia}function F(ab,
ra,Ea){return ab>=ra&&ab<=Ea}function z(ab){var ra=.001*(kb-Oa);return ab>=Oa-ra&&ab<=kb+ra}function B(ab){for(var ra=[],Ea=0;4>Ea;Ea++){var Ia=ab[Ea];ra.push([c._x[Ia],c._y[Ia],c._z[Ia],c._value[Ia]])}return ra}function C(ab,ra,Ea,Ia,Va,rb){rb||(rb=1);Ea=[-1,-1,-1];var ib=!1,Na=[F(ra[0][3],Ia,Va),F(ra[1][3],Ia,Va),F(ra[2][3],Ia,Va)];if(!Na[0]&&!Na[1]&&!Na[2])return!1;var Za=function(Ba,Ma,$a){return z(Ma[0][3])&&z(Ma[1][3])&&z(Ma[2][3])?(u(Ba,Ma,$a),!0):3>rb?C(Ba,Ma,$a,Oa,kb,++rb):!1};if(Na[0]&&
Na[1]&&Na[2])return Za(ab,ra,Ea)||ib;var eb=!1;[[0,1,2],[2,0,1],[1,2,0]].forEach(function(Ba){if(Na[Ba[0]]&&Na[Ba[1]]&&!Na[Ba[2]]){var Ma=ra[Ba[0]],$a=ra[Ba[1]],lb=ra[Ba[2]],Ra=E(lb,Ma,Ia,Va);lb=E(lb,$a,Ia,Va);ib=Za(ab,[lb,Ra,Ma],[-1,-1,Ea[Ba[0]]])||ib;ib=Za(ab,[Ma,$a,lb],[Ea[Ba[0]],Ea[Ba[1]],-1])||ib;eb=!0}});if(eb)return ib;[[0,1,2],[1,2,0],[2,0,1]].forEach(function(Ba){if(Na[Ba[0]]&&!Na[Ba[1]]&&!Na[Ba[2]]){var Ma=ra[Ba[0]],$a=ra[Ba[2]],lb=E(ra[Ba[1]],Ma,Ia,Va);$a=E($a,Ma,Ia,Va);ib=Za(ab,[$a,lb,
Ma],[-1,-1,Ea[Ba[0]]])||ib;eb=!0}});return ib}function v(ab,ra,Ea,Ia){var Va=!1,rb=B(ra),ib=[F(rb[0][3],Ea,Ia),F(rb[1][3],Ea,Ia),F(rb[2][3],Ea,Ia),F(rb[3][3],Ea,Ia)];if(!(ib[0]||ib[1]||ib[2]||ib[3]))return Va;if(ib[0]&&ib[1]&&ib[2]&&ib[3])return ha&&(Va=x(ab,rb,ra)||Va),Va;var Na=!1;[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Za){if(ib[Za[0]]&&ib[Za[1]]&&ib[Za[2]]&&!ib[Za[3]]){var eb=rb[Za[0]],Ba=rb[Za[1]],Ma=rb[Za[2]],$a=rb[Za[3]];ha?Va=u(ab,[eb,Ba,Ma],[ra[Za[0]],ra[Za[1]],ra[Za[2]]])||
Va:(Za=E($a,eb,Ea,Ia),Ba=E($a,Ba,Ea,Ia),Ma=E($a,Ma,Ea,Ia),Va=u(null,[Za,Ba,Ma],[-1,-1,-1])||Va);Na=!0}});if(Na)return Va;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Za){if(ib[Za[0]]&&ib[Za[1]]&&!ib[Za[2]]&&!ib[Za[3]]){var eb=rb[Za[0]],Ba=rb[Za[1]],Ma=rb[Za[2]],$a=rb[Za[3]],lb=E(Ma,eb,Ea,Ia);Ma=E(Ma,Ba,Ea,Ia);var Ra=E($a,Ba,Ea,Ia);$a=E($a,eb,Ea,Ia);ha?(Va=u(ab,[eb,$a,lb],[ra[Za[0]],-1,-1])||Va,Va=u(ab,[Ba,Ma,Ra],[ra[Za[1]],-1,-1])||Va):Va=w(null,[lb,Ma,Ra,$a],[-1,
-1,-1,-1])||Va;Na=!0}});if(Na)return Va;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Za){if(ib[Za[0]]&&!ib[Za[1]]&&!ib[Za[2]]&&!ib[Za[3]]){var eb=rb[Za[0]],Ba=rb[Za[2]],Ma=rb[Za[3]],$a=E(rb[Za[1]],eb,Ea,Ia);Ba=E(Ba,eb,Ea,Ia);Ma=E(Ma,eb,Ea,Ia);ha?(Va=u(ab,[eb,$a,Ba],[ra[Za[0]],-1,-1])||Va,Va=u(ab,[eb,Ba,Ma],[ra[Za[0]],-1,-1])||Va,Va=u(ab,[eb,Ma,$a],[ra[Za[0]],-1,-1])||Va):Va=u(null,[$a,Ba,Ma],[-1,-1,-1])||Va;Na=!0}});return Va}function G(ab,ra,Ea,Ia,Va,rb,ib,Na,Za,eb,Ba){var Ma=!1;ia&&
(t(ab,"A")&&(Ma=v(null,[ra,Ea,Ia,rb],eb,Ba)||Ma),t(ab,"B")&&(Ma=v(null,[Ea,Ia,Va,Za],eb,Ba)||Ma),t(ab,"C")&&(Ma=v(null,[Ea,rb,ib,Za],eb,Ba)||Ma),t(ab,"D")&&(Ma=v(null,[Ia,rb,Na,Za],eb,Ba)||Ma),t(ab,"E")&&(Ma=v(null,[Ea,Ia,rb,Za],eb,Ba)||Ma));ha&&(Ma=v(ab,[Ea,Ia,rb,Za],eb,Ba)||Ma);return Ma}function I(ab,ra,Ea,Ia,Va,rb,ib,Na){return[!0===Na[0]?!0:C(ab,B([ra,Ea,Ia]),[ra,Ea,Ia],rb,ib),!0===Na[1]?!0:C(ab,B([Ia,Va,ra]),[Ia,Va,ra],rb,ib)]}function J(ab,ra,Ea,Ia,Va,rb,ib,Na,Za){return Na?I(ab,ra,Ea,Va,Ia,
rb,ib,Za):I(ab,Ea,Va,Ia,ra,rb,ib,Za)}function K(ab,ra,Ea,Ia,Va,rb,ib){var Na=!1,Za=function(){Na=C(ab,[Ma,$a,lb],[-1,-1,-1],Va,rb)||Na;Na=C(ab,[lb,Ra,Ma],[-1,-1,-1],Va,rb)||Na},eb=ib[0],Ba=ib[1];ib=ib[2];if(eb){var Ma=q(B([qa(ra,Ea-0,Ia-0)])[0],B([qa(ra-1,Ea-0,Ia-0)])[0],eb);var $a=q(B([qa(ra,Ea-0,Ia-1)])[0],B([qa(ra-1,Ea-0,Ia-1)])[0],eb);var lb=q(B([qa(ra,Ea-1,Ia-1)])[0],B([qa(ra-1,Ea-1,Ia-1)])[0],eb);var Ra=q(B([qa(ra,Ea-1,Ia-0)])[0],B([qa(ra-1,Ea-1,Ia-0)])[0],eb);Za()}Ba&&(Ma=q(B([qa(ra-0,Ea,Ia-
0)])[0],B([qa(ra-0,Ea-1,Ia-0)])[0],Ba),$a=q(B([qa(ra-0,Ea,Ia-1)])[0],B([qa(ra-0,Ea-1,Ia-1)])[0],Ba),lb=q(B([qa(ra-1,Ea,Ia-1)])[0],B([qa(ra-1,Ea-1,Ia-1)])[0],Ba),Ra=q(B([qa(ra-1,Ea,Ia-0)])[0],B([qa(ra-1,Ea-1,Ia-0)])[0],Ba),Za());ib&&(Ma=q(B([qa(ra-0,Ea-0,Ia)])[0],B([qa(ra-0,Ea-0,Ia-1)])[0],ib),$a=q(B([qa(ra-0,Ea-1,Ia)])[0],B([qa(ra-0,Ea-1,Ia-1)])[0],ib),lb=q(B([qa(ra-1,Ea-1,Ia)])[0],B([qa(ra-1,Ea-1,Ia-1)])[0],ib),Ra=q(B([qa(ra-1,Ea-0,Ia)])[0],B([qa(ra-1,Ea-0,Ia-1)])[0],ib),Za());return Na}function N(ab,
ra,Ea,Ia,Va){for(var rb=[],ib=0,Na=0;Na<ra.length;Na++)for(var Za=ra[Na],eb=1;eb<pa;eb++)for(var Ba=1;Ba<ma;Ba++)rb.push(J(ab,qa(Za,Ba-1,eb-1),qa(Za,Ba-1,eb),qa(Za,Ba,eb-1),qa(Za,Ba,eb),Ea,Ia,(Za+Ba+eb)%2,Va&&Va[ib]?Va[ib]:[])),ib++;return rb}function H(ab,ra,Ea,Ia,Va){for(var rb=[],ib=0,Na=0;Na<ra.length;Na++)for(var Za=ra[Na],eb=1;eb<va;eb++)for(var Ba=1;Ba<pa;Ba++)rb.push(J(ab,qa(eb-1,Za,Ba-1),qa(eb,Za,Ba-1),qa(eb-1,Za,Ba),qa(eb,Za,Ba),Ea,Ia,(eb+Za+Ba)%2,Va&&Va[ib]?Va[ib]:[])),ib++;return rb}function L(ab,
ra,Ea,Ia,Va){for(var rb=[],ib=0,Na=0;Na<ra.length;Na++)for(var Za=ra[Na],eb=1;eb<ma;eb++)for(var Ba=1;Ba<va;Ba++)rb.push(J(ab,qa(Ba-1,eb-1,Za),qa(Ba-1,eb,Za),qa(Ba,eb-1,Za),qa(Ba,eb,Za),Ea,Ia,(Ba+eb+Za)%2,Va&&Va[ib]?Va[ib]:[])),ib++;return rb}function P(ab,ra,Ea){for(var Ia=1;Ia<pa;Ia++)for(var Va=1;Va<ma;Va++)for(var rb=1;rb<va;rb++){var ib=ab,Na=qa(rb-1,Va-1,Ia-1),Za=qa(rb-1,Va-1,Ia),eb=qa(rb-1,Va,Ia-1),Ba=qa(rb-1,Va,Ia),Ma=qa(rb,Va-1,Ia-1),$a=qa(rb,Va-1,Ia),lb=qa(rb,Va,Ia-1),Ra=qa(rb,Va,Ia),jb=
ra,Xa=Ea,pb=ib;(rb+Va+Ia)%2?(ia&&"even"===ib&&(pb=null),G(pb,Na,Za,eb,Ba,Ma,$a,lb,Ra,jb,Xa)):(ia&&"odd"===ib&&(pb=null),G(pb,Ra,lb,$a,Ma,Ba,eb,Za,Na,jb,Xa))}}function Q(ab,ra,Ea){ha=!0;P(ab,ra,Ea);ha=!1}function S(ab,ra,Ea){ia=!0;P(ab,ra,Ea);ia=!1}function O(ab,ra){for(var Ea=[];ab<ra;ab++)Ea.push(ab);return Ea}function U(){for(var ab=0;ab<va;ab++)for(var ra=0;ra<ma;ra++)for(var Ea=0;Ea<pa;Ea++){var Ia=qa(ab,ra,Ea);g(c._x[Ia],c._y[Ia],c._z[Ia],c._value[Ia])}}c._meshI=[];c._meshJ=[];c._meshK=[];var X=
c.surface.show,da=c.spaceframe.show,ea=c.surface.fill,ca=c.spaceframe.fill,ia=!1,ha=!1,fa=0,na,sa,ua=c._Xs,ta=c._Ys,oa=c._Zs,va=ua.length,ma=ta.length,pa=oa.length,za=k.indexOf(c._gridFill.replace(/-/g,"").replace(/\+/g,"")),qa=function(ab,ra,Ea){switch(za){case 5:return Ea+pa*ra+pa*ma*ab;case 4:return Ea+pa*ab+pa*va*ra;case 3:return ra+ma*Ea+ma*pa*ab;case 2:return ra+ma*ab+ma*va*Ea;case 1:return ab+va*Ea+va*pa*ra;default:return ab+va*ra+va*ma*Ea}},Ca=c._minValues,Ka=c._maxValues,Oa=c._vMin,kb=c._vMax,
mb,tb,nb,Ta,fb;(function(){f();U();da&&ca&&(fb=ca,Q(null,Oa,kb));if(X&&ea){fb=ea;for(var ab=c.surface.pattern,ra=c.surface.count,Ea=0;Ea<ra;Ea++){var Ia=1===ra?.5:Ea/(ra-1);Ia=(1-Ia)*Oa+Ia*kb;Ia=Math.abs(Ia-Ca)>Math.abs(Ia-Ka)?[Ca,Ia]:[Ia,Ka];S(ab,Ia[0],Ia[1])}}var Va=[[Math.min(Oa,Ka),Math.max(Oa,Ka)],[Math.min(Ca,kb),Math.max(Ca,kb)]];["x","y","z"].forEach(function(rb){for(var ib=[],Na=0;Na<Va.length;Na++){var Za=0,eb=Va[Na][0],Ba=Va[Na][1],Ma=c.slices[rb];if(Ma.show&&Ma.fill){fb=Ma.fill;var $a=
[],lb=[],Ra=[];if(Ma.locations.length)for(var jb=0;jb<Ma.locations.length;jb++){var Xa=l(Ma.locations[jb],"x"===rb?ua:"y"===rb?ta:oa);0===Xa.distRatio?$a.push(Xa.id):0<Xa.id&&(lb.push(Xa.id),"x"===rb?Ra.push([Xa.distRatio,0,0]):"y"===rb?Ra.push([0,Xa.distRatio,0]):Ra.push([0,0,Xa.distRatio]))}else $a="x"===rb?O(1,va-1):"y"===rb?O(1,ma-1):O(1,pa-1);if(0<lb.length){if("x"===rb){Ma=Za;jb=eb;Xa=Ba;for(var pb=ib[Za],vb=[],zb=0,Jb=0;Jb<lb.length;Jb++)for(var Zb=lb[Jb],pc=1;pc<pa;pc++)for(var Ac=1;Ac<ma;Ac++)vb.push(K(null,
Zb,Ac,pc,jb,Xa,Ra[Jb],pb&&pb[zb]?pb[zb]:[])),zb++;ib[Ma]=vb}else if("y"===rb){Ma=Za;jb=eb;Xa=Ba;pb=ib[Za];vb=[];for(Jb=zb=0;Jb<lb.length;Jb++)for(Zb=lb[Jb],pc=1;pc<va;pc++)for(Ac=1;Ac<pa;Ac++)vb.push(K(null,pc,Zb,Ac,jb,Xa,Ra[Jb],pb&&pb[zb]?pb[zb]:[])),zb++;ib[Ma]=vb}else{Ma=Za;jb=eb;Xa=Ba;pb=ib[Za];vb=[];for(Jb=zb=0;Jb<lb.length;Jb++)for(Zb=lb[Jb],pc=1;pc<ma;pc++)for(Ac=1;Ac<va;Ac++)vb.push(K(null,Ac,pc,Zb,jb,Xa,Ra[Jb],pb&&pb[zb]?pb[zb]:[])),zb++;ib[Ma]=vb}Za++}0<$a.length&&(ib[Za]="x"===rb?N(null,
$a,eb,Ba,ib[Za]):"y"===rb?H(null,$a,eb,Ba,ib[Za]):L(null,$a,eb,Ba,ib[Za]),Za++)}$a=c.caps[rb];$a.show&&$a.fill&&(fb=$a.fill,ib[Za]="x"===rb?N(null,[0,va-1],eb,Ba,ib[Za]):"y"===rb?H(null,[0,ma-1],eb,Ba,ib[Za]):L(null,[0,pa-1],eb,Ba,ib[Za]))}});0===fa&&f();c._meshX=mb;c._meshY=tb;c._meshZ=nb;c._meshIntensity=Ta;c._Xs=ua;c._Ys=ta;c._Zs=oa})();return c}var p=b("gl-mesh3d"),h=b("../../lib/gl_format_color").parseColorScale,a=b("../../lib/str2rgbarray"),d=b("../../components/colorscale").extractOpts,e=b("../../plots/gl3d/zip3"),
l=function(c,f){for(var g=f.length-1;0<g;g--){var q=Math.min(f[g],f[g-1]),t=Math.max(f[g],f[g-1]);if(t>q&&q<c&&c<=t)return{id:g,distRatio:(t-c)/(t-q)}}return{id:0,distRatio:0}};b=n.prototype;b.handlePick=function(c){if(c.object===this.mesh){var f=c.data.index,g=this.data._meshY[f],q=this.data._meshZ[f],t=this.data._Ys.length,u=this.data._Zs.length;f=l(this.data._meshX[f],this.data._Xs).id;g=l(g,this.data._Ys).id;q=l(q,this.data._Zs).id;t=c.index=q+u*g+u*t*f;c.traceCoordinate=[this.data._meshX[t],
this.data._meshY[t],this.data._meshZ[t],this.data._value[t]];u=this.data.hovertext||this.data.text;Array.isArray(u)&&void 0!==u[t]?c.textLabel=u[t]:u&&(c.textLabel=u);return!0}};b.update=function(c){function f(t,u,w,x){return u.map(function(E){return t.d2l(E,0,x)*w})}var g=this.scene,q=g.fullSceneLayout;this.data=m(c);g=e(f(q.xaxis,c._meshX,g.dataScale[0],c.xcalendar),f(q.yaxis,c._meshY,g.dataScale[1],c.ycalendar),f(q.zaxis,c._meshZ,g.dataScale[2],c.zcalendar));q=e(c._meshI,c._meshJ,c._meshK);g={positions:g,
cells:q,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:a(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};q=d(c);g.vertexIntensity=c._meshIntensity;
g.vertexIntensityBounds=[q.min,q.max];g.colormap=h(c);this.mesh.update(g)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};var k="xyz xzy yxz yzx zxy zyx".split(" ");y.exports={findNearestOnAxis:l,generateIsoMeshes:m,createIsosurfaceTrace:function(c,f){var g=p({gl:c.glplot.gl}),q=new n(c,g,f.uid);g._trace=q;q.update(f);c.glplot.add(g);return q}}},{"../../components/colorscale":627,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../../plots/gl3d/zip3":850,
"gl-mesh3d":292}],1094:[function(b,y,D){function n(d,e,l,k,c){l=c("isomin");var f=c("isomax");void 0!==f&&null!==f&&void 0!==l&&null!==l&&l>f&&(e.isomin=null,e.isomax=null);l=c("x");f=c("y");var g=c("z"),q=c("value");l&&l.length&&f&&f.length&&g&&g.length&&q&&q.length?(p.getComponentMethod("calendars","handleTraceDefaults")(d,e,["x","y","z"],k),["x","y","z"].forEach(function(t){var u="caps."+t;c(u+".show")&&c(u+".fill");t="slices."+t;c(t+".show")&&(c(t+".fill"),c(t+".locations"))}),c("spaceframe.show")&&
c("spaceframe.fill"),c("surface.show")&&(c("surface.count"),c("surface.fill"),c("surface.pattern")),c("contour.show")&&(c("contour.color"),c("contour.width")),"text hovertext hovertemplate lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading opacity".split(" ").forEach(function(t){c(t)}),a(d,e,k,c,{prefix:"",cLetter:"c"}),e._length=null):e.visible=
!1}var m=b("../../lib"),p=b("../../registry"),h=b("./attributes"),a=b("../../components/colorscale/defaults");y.exports={supplyDefaults:function(d,e,l,k){n(d,e,l,k,function(c,f){return m.coerce(d,e,h,c,f)})},supplyIsoDefaults:n}},{"../../components/colorscale/defaults":625,"../../lib":749,"../../registry":880,"./attributes":1091}],1095:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert").createIsosurfaceTrace,
moduleType:"trace",name:"isosurface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":839,"./attributes":1091,"./calc":1092,"./convert":1093,"./defaults":1094}],1096:[function(b,y,D){D=b("../../components/colorscale/attributes");var n=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../surface/attributes"),p=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;y.exports=b({x:{valType:"data_array",editType:"calc+clearAxisTypes"},
y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:n({editType:"calc"}),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",
dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},D("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:m.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:b({},m.contours.x.show,
{}),color:m.contours.x.color,width:m.contours.x.width,editType:"calc"},lightposition:{x:b({},m.lightposition.x,{dflt:1E5}),y:b({},m.lightposition.y,{dflt:1E5}),z:b({},m.lightposition.z,{dflt:0}),editType:"calc"},lighting:b({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-6,editType:"calc"},editType:"calc"},m.lighting),hoverinfo:b({},p.hoverinfo,{editType:"calc"}),showlegend:b({},p.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":622,
"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../surface/attributes":1278}],1097:[function(b,y,D){var n=b("../../components/colorscale/calc");y.exports=function(m,p){p.intensity&&n(m,p,{vals:p.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623}],1098:[function(b,y,D){function n(t,u,w){this.scene=t;this.uid=w;this.mesh=u;this.name="";this.color="#fff";this.data=null;this.showContour=!1}function m(t){for(var u=[],w=t.length,
x=0;x<w;x++)u[x]=f(t[x]);return u}function p(t,u,w,x){for(var E=[],F=u.length,z=0;z<F;z++)E[z]=t.d2l(u[z],0,x)*w;return E}function h(t){for(var u=[],w=t.length,x=0;x<w;x++)u[x]=Math.round(t[x]);return u}function a(t,u){for(var w=t.length,x=0;x<w;x++)if(-.5>=t[x]||t[x]>=u-.5)return!1;return!0}var d=b("gl-mesh3d"),e=b("delaunay-triangulate"),l=b("alpha-shape"),k=b("convex-hull"),c=b("../../lib/gl_format_color").parseColorScale,f=b("../../lib/str2rgbarray"),g=b("../../components/colorscale").extractOpts,
q=b("../../plots/gl3d/zip3");b=n.prototype;b.handlePick=function(t){if(t.object===this.mesh){var u=t.index=t.data.index;t.traceCoordinate=t.data._cellCenter?t.data.dataCoordinate:[this.data.x[u],this.data.y[u],this.data.z[u]];var w=this.data.hovertext||this.data.text;Array.isArray(w)&&void 0!==w[u]?t.textLabel=w[u]:w&&(t.textLabel=w);return!0}};b.update=function(t){var u=this.scene,w=u.fullSceneLayout;this.data=t;var x=t.x.length;u=q(p(w.xaxis,t.x,u.dataScale[0],t.xcalendar),p(w.yaxis,t.y,u.dataScale[1],
t.ycalendar),p(w.zaxis,t.z,u.dataScale[2],t.zcalendar));if(t.i&&t.j&&t.k){if(t.i.length!==t.j.length||t.j.length!==t.k.length||!a(t.i,x)||!a(t.j,x)||!a(t.k,x))return;x=q(h(t.i),h(t.j),h(t.k))}else if(0===t.alphahull)x=k(u);else if(0<t.alphahull)x=l(t.alphahull,u);else{x=["x","y","z"].indexOf(t.delaunayaxis);w=[];for(var E=u.length,F=0;F<E;F++)w[F]=[u[F][(x+1)%3],u[F][(x+2)%3]];x=e(w)}u={positions:u,cells:x,lightPosition:[t.lightposition.x,t.lightposition.y,t.lightposition.z],ambient:t.lighting.ambient,
diffuse:t.lighting.diffuse,specular:t.lighting.specular,roughness:t.lighting.roughness,fresnel:t.lighting.fresnel,vertexNormalsEpsilon:t.lighting.vertexnormalsepsilon,faceNormalsEpsilon:t.lighting.facenormalsepsilon,opacity:t.opacity,contourEnable:t.contour.show,contourColor:f(t.contour.color).slice(0,3),contourWidth:t.contour.width,useFacetNormals:t.flatshading};t.intensity?(x=g(t),this.color="#fff",w=t.intensitymode,u[w+"Intensity"]=t.intensity,u[w+"IntensityBounds"]=[x.min,x.max],u.colormap=c(t)):
t.vertexcolor?(this.color=t.vertexcolor[0],u.vertexColors=m(t.vertexcolor)):t.facecolor?(this.color=t.facecolor[0],u.cellColors=m(t.facecolor)):(this.color=t.color,u.meshColor=f(t.color));this.mesh.update(u)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};y.exports=function(t,u){var w=d({gl:t.glplot.gl}),x=new n(t,w,u.uid);w._trace=x;x.update(u);t.glplot.add(w);return x}},{"../../components/colorscale":627,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,
"../../plots/gl3d/zip3":850,"alpha-shape":69,"convex-hull":135,"delaunay-triangulate":171,"gl-mesh3d":292}],1099:[function(b,y,D){var n=b("../../registry"),m=b("../../lib"),p=b("../../components/colorscale/defaults"),h=b("./attributes");y.exports=function(a,d,e,l){function k(f,g){return m.coerce(a,d,h,f,g)}function c(f){var g=f.map(function(q){return(q=k(q))&&m.isArrayOrTypedArray(q)?q:null});return g.every(function(q){return q&&q.length===g[0].length})&&g}c(["x","y","z"])?(c(["i","j","k"]),(!d.i||
d.j&&d.k)&&(!d.j||d.k&&d.i)&&(!d.k||d.i&&d.j)?(n.getComponentMethod("calendars","handleTraceDefaults")(a,d,["x","y","z"],l),"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading alphahull delaunayaxis opacity".split(" ").forEach(function(f){k(f)}),k("contour.show")&&(k("contour.color"),k("contour.width")),"intensity"in a?(k("intensity"),k("intensitymode"),
p(a,d,l,k,{prefix:"",cLetter:"c"})):(d.showscale=!1,"facecolor"in a?k("facecolor"):"vertexcolor"in a?k("vertexcolor"):k("color",e)),k("text"),k("hovertext"),k("hovertemplate"),d._length=null):d.visible=!1):d.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"../../registry":880,"./attributes":1096}],1100:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",
name:"mesh3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":839,"./attributes":1096,"./calc":1097,"./convert":1098,"./defaults":1099}],1101:[function(b,y,D){function n(e){return{line:{color:m({},d.color,{dflt:e}),width:d.width,dash:p,editType:"style"},editType:"style"}}var m=b("../../lib").extendFlat;D=b("../scatter/attributes");var p=b("../../components/drawing/attributes").dash,h=b("../../components/fx/attributes"),a=b("../../constants/delta.js");
b=a.INCREASING.COLOR;a=a.DECREASING.COLOR;var d=D.line;y.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:m({},d.width,{}),dash:m({},p,{}),editType:"style"},increasing:n(b),decreasing:n(a),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},
tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:m({},h.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":636,"../../components/fx/attributes":646,"../../constants/delta.js":718,"../../lib":749,"../scatter/attributes":1155}],1102:[function(b,y,D){function n(e,l,k,c){return{o:e,h:l,l:k,c}}function m(e,l,k,c,f){for(var g=c.makeCalcdata(l,"open"),q=c.makeCalcdata(l,"high"),t=c.makeCalcdata(l,"low"),u=c.makeCalcdata(l,
"close"),w=Array.isArray(l.text),x=Array.isArray(l.hovertext),E=!0,F=null,z=[],B=0;B<k.length;B++){var C=k[B],v=g[B],G=q[B],I=t[B],J=u[B];if(C!==d&&v!==d&&G!==d&&I!==d&&J!==d){J===v?null!==F&&J!==F&&(E=J>F):E=J>v;F=J;var K=f(v,G,I,J);K.pos=C;K.yc=(v+J)/2;K.i=B;K.dir=E?"increasing":"decreasing";K.x=K.pos;K.y=[I,G];w&&(K.tx=l.text[B]);x&&(K.htx=l.hovertext[B]);z.push(K)}else z.push({pos:C,empty:!0})}l._extremes[c._id]=a.findExtremes(c,p.concat(t,q),{padded:!0});z.length&&(z[0].t={labels:{open:h(e,"open:")+
" ",high:h(e,"high:")+" ",low:h(e,"low:")+" ",close:h(e,"close:")+" "}});return z}var p=b("../../lib"),h=p._,a=b("../../plots/cartesian/axes"),d=b("../../constants/numerical").BADNUM;y.exports={calc:function(e,l){var k=a.getFromId(e,l.xaxis),c=a.getFromId(e,l.yaxis);var f=l._minDiff;if(!f){var g=e._fullData,q=[];f=Infinity;var t;for(t=0;t<g.length;t++){var u=g[t];if("ohlc"===u.type&&!0===u.visible&&u.xaxis===k._id){q.push(u);var w=k.makeCalcdata(u,"x");u._xcalc=w;(u=p.distinctVals(w).minDiff)&&isFinite(u)&&
(f=Math.min(f,u))}}Infinity===f&&(f=1);for(t=0;t<q.length;t++)q[t]._minDiff=f}f*=l.tickwidth;g=l._minDiff;l._minDiff=null;q=l._xcalc;l._xcalc=null;e=m(e,l,q,c,n);l._extremes[k._id]=a.findExtremes(k,q,{vpad:g/2});return e.length?(p.extendFlat(e[0].t,{wHover:g/2,tickLen:f}),e):[{t:{empty:!0}}]},calcCommon:m}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797}],1103:[function(b,y,D){function n(a,d,e,l){e(l+".line.color");e(l+".line.width",d.line.width);e(l+".line.dash",
d.line.dash)}var m=b("../../lib"),p=b("./ohlc_defaults"),h=b("./attributes");y.exports=function(a,d,e,l){function k(c,f){return m.coerce(a,d,h,c,f)}p(a,d,k,l)?(k("line.width"),k("line.dash"),n(a,d,k,"increasing"),n(a,d,k,"decreasing"),k("text"),k("hovertext"),k("tickwidth"),l._requestRangeslider[d.xaxis]=!0):d.visible=!1}},{"../../lib":749,"./attributes":1101,"./ohlc_defaults":1106}],1104:[function(b,y,D){function n(c,f,g,q){function t(K){K=K.pos+G-f;return d.inbox(K-I,K+I,J)}function u(K){var N=
K[C];K=K[v];return N===K||d.inbox(N-g,K-g,J)}function w(K){return(t(K)+u(K))/2}var x=c.cd,E=c.xa,F=x[0].trace,z=x[0].t,B=F.type,C="ohlc"===B?"l":"min",v="ohlc"===B?"h":"max",G=z.bPos||0;B=z.bdPos||z.tickLen;var I=z.wHover;z=Math.min(1,B/Math.abs(E.r2c(E.range[1])-E.r2c(E.range[0])));var J=c.maxHoverDistance-z;z=c.maxSpikeDistance-z;q=d.getDistanceFunction(q,t,u,w);d.getClosest(x,q,c);if(!1===c.index)return null;x=x[c.index];if(x.empty)return null;F=F[x.dir];q=F.line.color;e.opacity(q)&&F.line.width?
c.color=q:c.color=F.fillcolor;c.x0=E.c2p(x.pos+G-B,!0);c.x1=E.c2p(x.pos+G+B,!0);c.xLabelVal=x.pos;c.spikeDistance=w(x)*z/J;c.xSpike=E.c2p(x.pos,!0);return c}function m(c,f,g,q){var t=c.cd,u=c.ya,w=t[0].trace,x=t[0].t,E=[];c=n(c,f,g,q);if(!c)return[];t=t[c.index].hi||w.hoverinfo;f=t.split("+");if("all"!==t&&-1===f.indexOf("y"))return[];t=["high","open","close","low"];f={};for(g=0;g<t.length;g++){q=t[g];var F=w[q][c.index],z=u.c2p(F,!0);if(F in f){var B=f[F];B.yLabel+="\x3cbr\x3e"+x.labels[q]+h.hoverLabelText(u,
F)}else B=a.extendFlat({},c),B.y0=B.y1=z,B.yLabelVal=F,B.yLabel=x.labels[q]+h.hoverLabelText(u,F),B.name="",E.push(B),f[F]=B}return E}function p(c,f,g,q){function t(B){return E.labels[B]+h.hoverLabelText(w,x[B][F])}var u=c.cd,w=c.ya,x=u[0].trace,E=u[0].t;c=n(c,f,g,q);if(!c)return[];u=u[c.index];var F=c.index=u.i;f=u.dir;q=u.hi||x.hoverinfo;g=q.split("+");var z="all"===q;q=z||-1!==g.indexOf("y");g=z||-1!==g.indexOf("text");f=q?[t("open"),t("high"),t("low"),t("close")+"  "+k[f]]:[];g&&l(u,x,f);c.extraText=
f.join("\x3cbr\x3e");c.y0=c.y1=w.c2p(u.yc,!0);return[c]}var h=b("../../plots/cartesian/axes"),a=b("../../lib"),d=b("../../components/fx"),e=b("../../components/color"),l=b("../../lib").fillText;b=b("../../constants/delta.js");var k={increasing:b.INCREASING.SYMBOL,decreasing:b.DECREASING.SYMBOL};y.exports={hoverPoints:function(c,f,g,q){return c.cd[0].trace.hoverlabel.split?m(c,f,g,q):p(c,f,g,q)},hoverSplit:m,hoverOnPoints:p}},{"../../components/color":615,"../../components/fx":655,"../../constants/delta.js":718,
"../../lib":749,"../../plots/cartesian/axes":797}],1105:[function(b,y,D){y.exports={moduleType:"trace",name:"ohlc",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc").calc,plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select")}},{"../../plots/cartesian":810,"./attributes":1101,"./calc":1102,"./defaults":1103,"./hover":1104,"./plot":1107,
"./select":1108,"./style":1109}],1106:[function(b,y,D){var n=b("../../registry"),m=b("../../lib");y.exports=function(p,h,a,d){var e=a("x"),l=a("open"),k=a("high"),c=a("low"),f=a("close");a("hoverlabel.split");n.getComponentMethod("calendars","handleTraceDefaults")(p,h,["x"],d);if(l&&k&&c&&f)return p=Math.min(l.length,k.length,c.length,f.length),e&&(p=Math.min(p,m.minRowLength(e))),h._length=p}},{"../../lib":749,"../../registry":880}],1107:[function(b,y,D){var n=b("d3"),m=b("../../lib");y.exports=
function(p,h,a,d){var e=h.yaxis,l=h.xaxis,k=!!l.rangebreaks;m.makeTraceGroups(d,a,"trace ohlc").each(function(c){var f=n.select(this);c=c[0];var g=c.t;if(!0!==c.trace.visible||g.empty)f.remove();else{var q=g.tickLen;f=f.selectAll("path").data(m.identity);f.enter().append("path");f.exit().remove();f.attr("d",function(t){if(t.empty)return"M0,0Z";var u=l.c2p(t.pos-q,!0),w=l.c2p(t.pos+q,!0),x=k?(u+w)/2:l.c2p(t.pos,!0),E=e.c2p(t.o,!0),F=e.c2p(t.h,!0),z=e.c2p(t.l,!0);t=e.c2p(t.c,!0);return"M"+u+","+E+"H"+
x+"M"+x+","+F+"V"+z+"M"+w+","+t+"H"+x})}})}},{"../../lib":749,d3:169}],1108:[function(b,y,D){y.exports=function(n,m){var p=n.cd,h=n.xaxis,a=n.yaxis,d=[],e,l=p[0].t.bPos||0;if(!1===m)for(e=0;e<p.length;e++)p[e].selected=0;else for(e=0;e<p.length;e++){var k=p[e];m.contains([h.c2p(k.pos+l),a.c2p(k.yc)],null,k.i,n)?(d.push({pointNumber:k.i,x:h.c2d(k.pos),y:a.c2d(k.yc)}),k.selected=1):k.selected=0}return d}},{}],1109:[function(b,y,D){var n=b("d3"),m=b("../../components/drawing"),p=b("../../components/color");
y.exports=function(h,a,d){h=d?d:n.select(h).selectAll("g.ohlclayer").selectAll("g.trace");h.style("opacity",function(e){return e[0].trace.opacity});h.each(function(e){var l=e[0].trace;n.select(this).selectAll("path").each(function(k){if(!k.empty){var c=l[k.dir].line;n.select(this).style("fill","none").call(p.stroke,c.color).call(m.dashLine,c.dash,c.width).style("opacity",l.selectedpoints&&!k.selected?.3:1)}})})}},{"../../components/color":615,"../../components/drawing":637,d3:169}],1110:[function(b,
y,D){D=b("../../lib/extend").extendFlat;var n=b("../../plots/attributes"),m=b("../../plots/font_attributes"),p=b("../../components/colorscale/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../plots/domain").attributes;p=D({editType:"calc"},p("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:h({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});y.exports={domain:b({name:"parcats",
trace:!0,editType:"calc"}),hoverinfo:D({},n.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:h({editType:"plot",arrayOk:!1},{keys:"count probability category categorycount colorcount bandcolorcount".split(" ")}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,
editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:m({editType:"calc"}),tickfont:m({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",
dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:p,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/font_attributes":825,"../../plots/template_attributes":875}],
1111:[function(b,y,D){var n=b("../../plots/get_data").getModuleCalcData,m=b("./plot");D.name="parcats";D.plot=function(p,h,a,d){h=n(p.calcdata,"parcats");h.length&&m(p,h[0],a,d)};D.clean=function(p,h,a,d){p=d._has&&d._has("parcats");h=h._has&&h._has("parcats");p&&!h&&d._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":834,"./plot":1116}],1112:[function(b,y,D){function n(t,u,w){var x=t.map(function(E){return E.categories.length}).reduce(function(E,F){return Math.max(E,F)});return{dimensions:t,
paths:u,trace:void 0,maxCats:x,count:w}}function m(t,u,w){t.valueInds.push(u);t.count+=w}function p(t,u,w){t.valueInds.push(u);t.count+=w}function h(t,u){u=void 0===u||null===u?[]:u.map(function(C){return C});var w={},x={},E=[];u.forEach(function(C,v){w[C]=0;x[C]=v});for(var F=0;F<t.length;F++){var z=t[F];if(void 0===w[z]){w[z]=1;var B=u.push(z)-1;x[z]=B}else w[z]++,B=x[z];E.push(B)}t=u.map(function(C){return w[C]});return{uniqueValues:u,uniqueCounts:t,inds:E}}function a(t){var u=t.map(function(w){return w.displayindex});
if(d(u))for(u=0;u<t.length;u++)t[u]._displayindex=t[u].displayindex;else for(u=0;u<t.length;u++)t[u]._displayindex=u}function d(t){for(var u=Array(t.length),w=0;w<t.length;w++){if(0>t[w]||t[w]>=t.length||void 0!==u[t[w]])return!1;u[t[w]]=!0}return!0}var e=b("../../lib/gup").wrap,l=b("../../components/colorscale/helpers").hasColorscale,k=b("../../components/colorscale/calc"),c=b("../../lib/filter_unique.js"),f=b("../../components/drawing"),g=b("../../lib"),q=b("fast-isnumeric");y.exports=function(t,
u){function w(L){if(g.isArrayOrTypedArray(z.color))var P=L=z.color[L%z.color.length];else L=z.color;return{color:B(L),rawColor:P}}var x=g.filterVisible(u.dimensions);if(0===x.length)return[];var E=x.map(function(L){if("trace"===L.categoryorder)var P=null;else if("array"===L.categoryorder)P=L.categoryarray;else{P=c(L.values);for(var Q=!0,S=0;S<P.length;S++)if(!q(P[S])){Q=!1;break}P.sort(Q?g.sorterAsc:void 0);"category descending"===L.categoryorder&&(P=P.reverse())}return h(L.values,P)});var F=g.isArrayOrTypedArray(u.counts)?
u.counts:[u.counts];a(x);x.forEach(function(L,P){P=E[P];L._categoryarray=P.uniqueValues;L._ticktext=null===L.ticktext||void 0===L.ticktext?[]:L.ticktext.slice();for(var Q=L._ticktext.length;Q<P.uniqueValues.length;Q++)L._ticktext.push(P.uniqueValues[Q])});var z=u.line;if(z){l(u,"line")&&k(t,u,{vals:u.line.color,containerStr:"line",cLetter:"c"});var B=f.tryColorscale(z)}else B=g.identity;var C=x[0].values.length,v={},G=E.map(function(L){return L.inds});var I=0;var J,K;for(J=0;J<C;J++){var N=[];for(K=
0;K<G.length;K++)N.push(G[K][J]);t=F[J%F.length];I+=t;K=w(J);var H=N+"-"+K.rawColor;void 0===v[H]&&(v[H]={categoryInds:N,color:K.color,rawColor:K.rawColor,valueInds:[],count:0});p(v[H],J,t)}x=x.map(function(L,P){return{dimensionInd:P,containerInd:L._index,displayInd:L._displayindex,dimensionLabel:L.label,count:I,categories:[],dragX:null}});for(J=0;J<C;J++)for(t=F[J%F.length],K=0;K<x.length;K++)G=x[K].containerInd,N=E[K].inds[J],H=x[K].categories,void 0===H[N]&&(H[N]={dimensionInd:K,categoryInd:N,
categoryValue:u.dimensions[G]._categoryarray[N],displayInd:N,categoryLabel:u.dimensions[G]._ticktext[N],valueInds:[],count:0,dragY:null}),m(H[N],J,t);return e(n(x,v,I))}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../components/drawing":637,"../../lib":749,"../../lib/filter_unique.js":740,"../../lib/gup":746,"fast-isnumeric":241}],1113:[function(b,y,D){function n(c,f,g,q,t){t("line.shape");t("line.hovertemplate");var u=t("line.color",q.colorway[0]);if(h(c,
"line")&&p.isArrayOrTypedArray(u)){if(u.length)return t("line.colorscale"),a(c,f,q,t,{prefix:"line.",cLetter:"c"}),u.length;f.line.color=g}return Infinity}function m(c,f){function g(w,x){return p.coerce(c,f,l.dimensions,w,x)}var q=g("values"),t=g("visible");q&&q.length||(t=f.visible=!1);if(t){g("label");g("displayindex",f._index);q=c.categoryarray;q=Array.isArray(q)&&0<q.length;var u;q&&(u="array");u=g("categoryorder",u);"array"===u?(g("categoryarray"),g("ticktext")):(delete c.categoryarray,delete c.ticktext);
q||"array"!==u||(f.categoryorder="trace")}}var p=b("../../lib"),h=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),d=b("../../plots/domain").defaults,e=b("../../plots/array_container_defaults"),l=b("./attributes"),k=b("../parcoords/merge_length");y.exports=function(c,f,g,q){function t(w,x){return p.coerce(c,f,l,w,x)}var u=e(c,f,{name:"dimensions",handleItemDefaults:m});g=n(c,f,g,q,t);d(f,q,t);Array.isArray(u)&&u.length||(f.visible=!1);k(f,u,"values",
g);t("hoveron");t("hovertemplate");t("arrangement");t("bundlecolors");t("sortpaths");t("counts");p.coerceFont(t,"labelfont",{family:q.font.family,size:Math.round(q.font.size),color:q.font.color});p.coerceFont(t,"tickfont",{family:q.font.family,size:Math.round(q.font.size/1.2),color:q.font.color})}},{"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/domain":824,"../parcoords/merge_length":1126,
"./attributes":1110}],1114:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1110,"./base_plot":1111,"./calc":1112,"./defaults":1113,"./plot":1116}],1115:[function(b,y,D){function n(fa,na,sa,ua){fa=fa.map(L.bind(0,na,sa));ua=ua.selectAll("g.parcatslayer").data([null]);
ua.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");ua=ua.selectAll("g.trace.parcats").data(fa,m);fa=ua.enter().append("g").attr("class","trace parcats");ua.attr("transform",function(ma){return"translate("+ma.x+", "+ma.y+")"});fa.append("g").attr("class","paths");sa=ua.select("g.paths").selectAll("path.path").data(function(ma){return ma.paths},m);sa.attr("fill",function(ma){return ma.model.color});var ta=sa.enter().append("path").attr("class","path").attr("stroke-opacity",
0).attr("fill",function(ma){return ma.model.color}).attr("fill-opacity",0);c(ta);sa.attr("d",function(ma){return ma.svgD});ta.empty()||sa.sort(h);sa.exit().remove();sa.on("mouseover",a).on("mouseout",d).on("click",k);fa.append("g").attr("class","dimensions");fa=ua.select("g.dimensions").selectAll("g.dimension").data(function(ma){return ma.dimensions},m);fa.enter().append("g").attr("class","dimension");fa.attr("transform",function(ma){return"translate("+ma.x+", 0)"});fa.exit().remove();sa=fa.selectAll("g.category").data(function(ma){return ma.categories},
m);ta=sa.enter().append("g").attr("class","category");sa.attr("transform",function(ma){return"translate(0, "+ma.y+")"});ta.append("rect").attr("class","catrect").attr("pointer-events","none");sa.select("rect.catrect").attr("fill","none").attr("width",function(ma){return ma.width}).attr("height",function(ma){return ma.height});g(ta);var oa=sa.selectAll("rect.bandrect").data(function(ma){return ma.bands},m);oa.each(function(){ea.raiseToTop(this)});oa.attr("fill",function(ma){return ma.color});var va=
oa.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ma){return ma.color}).attr("fill-opacity",0);oa.attr("fill",function(ma){return ma.color}).attr("width",function(ma){return ma.width}).attr("height",function(ma){return ma.height}).attr("y",function(ma){return ma.y}).attr("cursor",function(ma){return"fixed"===ma.parcatsViewModel.arrangement?"default":"perpendicular"===ma.parcatsViewModel.arrangement?"ns-resize":"move"});q(va);oa.exit().remove();ta.append("text").attr("class",
"catlabel").attr("pointer-events","none");oa=na._fullLayout.paper_bgcolor;sa.select("text.catlabel").attr("text-anchor",function(ma){return p(ma)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",oa+" -1px  1px 2px, "+oa+" 1px  1px 2px, "+oa+"  1px -1px 2px, "+oa+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",function(ma){return p(ma)?ma.width+5:-5}).attr("y",function(ma){return ma.height/2}).text(function(ma){return ma.model.categoryLabel}).each(function(ma){ca.font(U.select(this),
ma.parcatsViewModel.categorylabelfont);ha.convertToTspans(U.select(this),na)});ta.append("text").attr("class","dimlabel");sa.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(ma){return"fixed"===ma.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(ma){return ma.width/2}).attr("y",-5).text(function(ma,pa){return 0===pa?ma.parcatsViewModel.model.dimensions[ma.model.dimensionInd].dimensionLabel:null}).each(function(ma){ca.font(U.select(this),
ma.parcatsViewModel.labelfont)});sa.selectAll("rect.bandrect").on("mouseover",C).on("mouseout",v);sa.exit().remove();fa.call(U.behavior.drag().origin(function(ma){return{x:ma.x,y:0}}).on("dragstart",G).on("drag",I).on("dragend",J));ua.each(function(ma){ma.traceSelection=U.select(this);ma.pathSelection=U.select(this).selectAll("g.paths").selectAll("path.path");ma.dimensionSelection=U.select(this).selectAll("g.dimensions").selectAll("g.dimension")});ua.exit().remove()}function m(fa){return fa.key}function p(fa){return fa.model.dimensionInd===
fa.parcatsViewModel.dimensions[fa.parcatsViewModel.dimensions.length-1].model.dimensionInd}function h(fa,na){return fa.model.rawColor>na.model.rawColor?1:fa.model.rawColor<na.model.rawColor?-1:0}function a(fa){if(!fa.parcatsViewModel.dragDimension&&-1===fa.parcatsViewModel.hoverinfoItems.indexOf("skip")){ea.raiseToTop(this);f(U.select(this));var na=e(fa),sa=l(fa);fa.parcatsViewModel.graphDiv.emit("plotly_hover",{points:na,event:U.event,constraints:sa});if(-1===fa.parcatsViewModel.hoverinfoItems.indexOf("none")){var ua=
U.mouse(this)[0];na=fa.parcatsViewModel.graphDiv;sa=fa.parcatsViewModel.trace;var ta=na._fullLayout,oa=ta._paperdiv.node().getBoundingClientRect(),va=fa.parcatsViewModel.graphDiv.getBoundingClientRect(),ma;for(ma=0;ma<fa.leftXs.length-1;ma++)if(fa.leftXs[ma]+fa.dimWidths[ma]-2<=ua&&ua<=fa.leftXs[ma+1]+2){var pa=fa.parcatsViewModel.dimensions[ma];pa=(pa.x+pa.width+fa.parcatsViewModel.dimensions[ma+1].x)/2;var za=(fa.topYs[ma]+fa.topYs[ma+1]+fa.height)/2;break}pa=fa.parcatsViewModel.x+pa;za=fa.parcatsViewModel.y+
za;ma=ia.mostReadable(fa.model.color,["black","white"]);ua=fa.model.count;var qa=ua/fa.parcatsViewModel.model.count,Ca={countLabel:ua,probabilityLabel:qa.toFixed(3)},Ka=[];-1!==fa.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ka.push(["Count:",Ca.countLabel].join(" "));-1!==fa.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Ka.push(["P:",Ca.probabilityLabel].join(" "));Ka=Ka.join("\x3cbr\x3e");var Oa=U.mouse(na)[0];da.loneHover({trace:sa,x:pa-oa.left+va.left,y:za-oa.top+va.top,text:Ka,
color:fa.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ma,idealAlign:Oa<pa?"right":"left",hovertemplate:(sa.line||{}).hovertemplate,hovertemplateLabels:Ca,eventData:[{data:sa._input,fullData:sa,count:ua,probability:qa}]},{container:ta._hoverlayer.node(),outerContainer:ta._paper.node(),gd:na})}}}function d(fa){if(!fa.parcatsViewModel.dragDimension&&(c(U.select(this)),da.loneUnhover(fa.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),fa.parcatsViewModel.pathSelection.sort(h),
-1===fa.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var na=e(fa),sa=l(fa);fa.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:na,event:U.event,constraints:sa})}}function e(fa){for(var na=[],sa=K(fa.parcatsViewModel),ua=0;ua<fa.model.valueInds.length;ua++)na.push({curveNumber:sa,pointNumber:fa.model.valueInds[ua]});return na}function l(fa){for(var na={},sa=fa.parcatsViewModel.model.dimensions,ua=0;ua<sa.length;ua++){var ta=sa[ua];na[ta.containerInd]=ta.categories[fa.model.categoryInds[ua]].categoryValue}void 0!==
fa.model.rawColor&&(na.color=fa.model.rawColor);return na}function k(fa){if(-1===fa.parcatsViewModel.hoverinfoItems.indexOf("skip")){var na=e(fa),sa=l(fa);fa.parcatsViewModel.graphDiv.emit("plotly_click",{points:na,event:U.event,constraints:sa})}}function c(fa){fa.attr("fill",function(na){return na.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function f(fa){fa.attr("fill-opacity",.8).attr("stroke",function(na){return ia.mostReadable(na.model.color,
["black","white"])}).attr("stroke-width",.3)}function g(fa){fa.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function q(fa){fa.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function t(fa){var na=fa.categoryViewModel.model.dimensionInd,sa=fa.categoryViewModel.model.categoryInd;return fa.parcatsViewModel.pathSelection.filter(function(ua){return ua.model.categoryInds[na]===sa&&ua.model.color===fa.color})}
function u(fa){U.select(fa.parentNode).selectAll("rect.bandrect").each(function(na){na=t(na);f(na);na.each(function(){ea.raiseToTop(this)})});U.select(fa.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function w(fa){var na=U.select(fa).datum(),sa=t(na);f(sa);sa.each(function(){ea.raiseToTop(this)});U.select(fa.parentNode).selectAll("rect.bandrect").filter(function(ua){return ua.color===na.color}).each(function(){ea.raiseToTop(this);U.select(this).attr("stroke",
"black").attr("stroke-width",1.5)})}function x(fa,na,sa){var ua=U.select(fa).datum(),ta=ua.categoryViewModel.model;ua=ua.parcatsViewModel.graphDiv;var oa=[];U.select(fa.parentNode).selectAll("rect.bandrect").each(function(va){t(va).each(function(ma){Array.prototype.push.apply(oa,e(ma))})});fa={};fa[ta.dimensionInd]=ta.categoryValue;ua.emit(na,{points:oa,event:sa,constraints:fa})}function E(fa,na,sa){fa=U.select(fa).datum();var ua=fa.categoryViewModel.model,ta=fa.parcatsViewModel.graphDiv,oa=[];t(fa).each(function(ma){Array.prototype.push.apply(oa,
e(ma))});var va={};va[ua.dimensionInd]=ua.categoryValue;void 0!==fa.rawColor&&(va.color=fa.rawColor);ta.emit(na,{points:oa,event:sa,constraints:va})}function F(fa,na){na=U.select(na.parentNode).select("rect.catrect");var sa=na.node().getBoundingClientRect(),ua=na.datum(),ta=ua.parcatsViewModel,oa=ta.model.dimensions[ua.model.dimensionInd];na=ta.trace;var va=sa.top+sa.height/2;1<ta.dimensions.length&&oa.displayInd===ta.dimensions.length-1?(sa=sa.left,ta="left"):(sa=sa.left+sa.width,ta="right");oa=
ua.model.count;var ma=ua.model.categoryLabel,pa=oa/ua.parcatsViewModel.model.count,za={countLabel:oa,categoryLabel:ma,probabilityLabel:pa.toFixed(3)},qa=[];-1!==ua.parcatsViewModel.hoverinfoItems.indexOf("count")&&qa.push(["Count:",za.countLabel].join(" "));-1!==ua.parcatsViewModel.hoverinfoItems.indexOf("probability")&&qa.push(["P("+za.categoryLabel+"):",za.probabilityLabel].join(" "));ua=qa.join("\x3cbr\x3e");return{trace:na,x:sa-fa.left,y:va-fa.top,text:ua,color:"lightgray",borderColor:"black",
fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ta,hovertemplate:na.hovertemplate,hovertemplateLabels:za,eventData:[{data:na._input,fullData:na,count:oa,category:ma,probability:pa}]}}function z(fa,na){var sa=[];U.select(na.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){sa.push(F(fa,this))});return sa}function B(fa,na){var sa=na.getBoundingClientRect(),ua=U.select(na).datum(),ta=ua.categoryViewModel,oa=ta.parcatsViewModel,
va=oa.model.dimensions[ta.model.dimensionInd];na=oa.trace;var ma=sa.y+sa.height/2;1<oa.dimensions.length&&va.displayInd===oa.dimensions.length-1?(sa=sa.left,va="left"):(sa=sa.left+sa.width,va="right");var pa=ta.model.categoryLabel,za=ua.parcatsViewModel.model.count,qa=0;ua.categoryViewModel.bands.forEach(function(nb){nb.color===ua.color&&(qa+=nb.count)});var Ca=ta.model.count,Ka=0;oa.pathSelection.each(function(nb){nb.model.color===ua.color&&(Ka+=nb.model.count)});oa=qa/za;var Oa=qa/Ka,kb=qa/Ca,mb=
{countLabel:za,categoryLabel:pa,probabilityLabel:oa.toFixed(3)},tb=[];-1!==ta.parcatsViewModel.hoverinfoItems.indexOf("count")&&tb.push(["Count:",mb.countLabel].join(" "));-1!==ta.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(tb.push("P(color  "+pa+"): "+mb.probabilityLabel),tb.push("P("+pa+" | color): "+Oa.toFixed(3)),tb.push("P(color | "+pa+"): "+kb.toFixed(3)));ta=tb.join("\x3cbr\x3e");Oa=ia.mostReadable(ua.color,["black","white"]);return{trace:na,x:sa-fa.left,y:ma-fa.top,text:ta,color:ua.color,
borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Oa,fontSize:10,idealAlign:va,hovertemplate:na.hovertemplate,hovertemplateLabels:mb,eventData:[{data:na._input,fullData:na,category:pa,count:za,probability:oa,categorycount:Ca,colorcount:Ka,bandcolorcount:qa}]}}function C(fa){if(!(fa.parcatsViewModel.dragDimension||-1!==fa.parcatsViewModel.hoverinfoItems.indexOf("skip")||-1>U.mouse(this)[1])){var na=fa.parcatsViewModel.graphDiv,sa=na._fullLayout,ua=sa._paperdiv.node().getBoundingClientRect(),
ta=fa.parcatsViewModel.hoveron;"color"===ta?(w(this),E(this,"plotly_hover",U.event)):(u(this),x(this,"plotly_hover",U.event));if(-1===fa.parcatsViewModel.hoverinfoItems.indexOf("none")){var oa;"category"===ta?oa=F(ua,this):"color"===ta?oa=B(ua,this):"dimension"===ta&&(oa=z(ua,this));oa&&da.loneHover(oa,{container:sa._hoverlayer.node(),outerContainer:sa._paper.node(),gd:na})}}}function v(fa){var na=fa.parcatsViewModel;na.dragDimension||(c(na.pathSelection),g(na.dimensionSelection.selectAll("g.category")),
q(na.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),da.loneUnhover(na.graphDiv._fullLayout._hoverlayer.node()),na.pathSelection.sort(h),-1===na.hoverinfoItems.indexOf("skip")&&("color"===fa.parcatsViewModel.hoveron?E(this,"plotly_unhover",U.event):x(this,"plotly_unhover",U.event)))}function G(fa){"fixed"!==fa.parcatsViewModel.arrangement&&(fa.dragDimensionDisplayInd=fa.model.displayInd,fa.initialDragDimensionDisplayInds=fa.parcatsViewModel.model.dimensions.map(function(na){return na.displayInd}),
fa.dragHasMoved=!1,fa.dragCategoryDisplayInd=null,U.select(this).selectAll("g.category").select("rect.catrect").each(function(na){var sa=U.mouse(this)[0],ua=U.mouse(this)[1];-2<=sa&&sa<=na.width+2&&-2<=ua&&ua<=na.height+2&&(fa.dragCategoryDisplayInd=na.model.displayInd,fa.initialDragCategoryDisplayInds=fa.model.categories.map(function(ta){return ta.displayInd}),na.model.dragY=na.y,ea.raiseToTop(this.parentNode),U.select(this.parentNode).selectAll("rect.bandrect").each(function(ta){ta.y<ua&&ua<=ta.y+
ta.height&&(fa.potentialClickBand=this)}))}),fa.parcatsViewModel.dragDimension=fa,da.loneUnhover(fa.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function I(fa){if("fixed"!==fa.parcatsViewModel.arrangement&&(fa.dragHasMoved=!0,null!==fa.dragDimensionDisplayInd)){var na=fa.dragDimensionDisplayInd,sa=na-1,ua=na+1,ta=fa.parcatsViewModel.dimensions[na];if(null!==fa.dragCategoryDisplayInd){var oa=ta.categories[fa.dragCategoryDisplayInd];oa.model.dragY+=U.event.dy;var va=oa.model.dragY,ma=
oa.model.displayInd,pa=ta.categories,za=pa[ma-1];pa=pa[ma+1];void 0!==za&&va<za.y+za.height/2&&(oa.model.displayInd=za.model.displayInd,za.model.displayInd=ma);void 0!==pa&&va+oa.height>pa.y+pa.height/2&&(oa.model.displayInd=pa.model.displayInd,pa.model.displayInd=ma);fa.dragCategoryDisplayInd=oa.model.displayInd}if(null===fa.dragCategoryDisplayInd||"freeform"===fa.parcatsViewModel.arrangement)ta.model.dragX=U.event.x,sa=fa.parcatsViewModel.dimensions[sa],ua=fa.parcatsViewModel.dimensions[ua],void 0!==
sa&&ta.model.dragX<sa.x+sa.width&&(ta.model.displayInd=sa.model.displayInd,sa.model.displayInd=na),void 0!==ua&&ta.model.dragX+ta.width>ua.x&&(ta.model.displayInd=ua.model.displayInd,ua.model.displayInd=fa.dragDimensionDisplayInd),fa.dragDimensionDisplayInd=ta.model.displayInd;S(fa.parcatsViewModel);Q(fa.parcatsViewModel);H(fa.parcatsViewModel);N(fa.parcatsViewModel)}}function J(fa){if("fixed"!==fa.parcatsViewModel.arrangement&&null!==fa.dragDimensionDisplayInd){U.select(this).selectAll("text").attr("font-weight",
"normal");var na={},sa=K(fa.parcatsViewModel),ua=fa.parcatsViewModel.model.dimensions.map(function(za){return za.displayInd}),ta=fa.initialDragDimensionDisplayInds.some(function(za,qa){return za!==ua[qa]});ta&&ua.forEach(function(za,qa){na["dimensions["+fa.parcatsViewModel.model.dimensions[qa].containerInd+"].displayindex"]=za});var oa=!1;if(null!==fa.dragCategoryDisplayInd){var va=fa.model.categories.map(function(za){return za.displayInd});if(oa=fa.initialDragCategoryDisplayInds.some(function(za,
qa){return za!==va[qa]})){var ma=fa.model.categories.slice().sort(function(za,qa){return za.displayInd-qa.displayInd}),pa=ma.map(function(za){return za.categoryValue});ma=ma.map(function(za){return za.categoryLabel});na["dimensions["+fa.model.containerInd+"].categoryarray"]=[pa];na["dimensions["+fa.model.containerInd+"].ticktext"]=[ma];na["dimensions["+fa.model.containerInd+"].categoryorder"]="array"}}-1===fa.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!fa.dragHasMoved&&fa.potentialClickBand&&
("color"===fa.parcatsViewModel.hoveron?E(fa.potentialClickBand,"plotly_click",U.event.sourceEvent):x(fa.potentialClickBand,"plotly_click",U.event.sourceEvent));fa.model.dragX=null;null!==fa.dragCategoryDisplayInd&&(fa.parcatsViewModel.dimensions[fa.dragDimensionDisplayInd].categories[fa.dragCategoryDisplayInd].model.dragY=null,fa.dragCategoryDisplayInd=null);fa.dragDimensionDisplayInd=null;fa.parcatsViewModel.dragDimension=null;fa.dragHasMoved=null;fa.potentialClickBand=null;S(fa.parcatsViewModel);
Q(fa.parcatsViewModel);U.transition().duration(300).ease("cubic-in-out").each(function(){H(fa.parcatsViewModel,!0);N(fa.parcatsViewModel,!0)}).each("end",function(){(ta||oa)&&X.restyle(fa.parcatsViewModel.graphDiv,na,[sa])})}}function K(fa){for(var na,sa=fa.graphDiv._fullData,ua=0;ua<sa.length;ua++)if(fa.key===sa[ua].uid){na=ua;break}return na}function N(fa,na){void 0===na&&(na=!1);fa.pathSelection.data(function(sa){return sa.paths},m);(function(sa){return na?sa.transition():sa})(fa.pathSelection).attr("d",
function(sa){return sa.svgD})}function H(fa,na){function sa(ta){return na?ta.transition():ta}void 0===na&&(na=!1);fa.dimensionSelection.data(function(ta){return ta.dimensions},m);var ua=fa.dimensionSelection.selectAll("g.category").data(function(ta){return ta.categories},m);sa(fa.dimensionSelection).attr("transform",function(ta){return"translate("+ta.x+", 0)"});sa(ua).attr("transform",function(ta){return"translate(0, "+ta.y+")"});ua.select(".dimlabel").text(function(ta,oa){return 0===oa?ta.parcatsViewModel.model.dimensions[ta.model.dimensionInd].dimensionLabel:
null});ua.select(".catlabel").attr("text-anchor",function(ta){return p(ta)?"start":"end"}).attr("x",function(ta){return p(ta)?ta.width+5:-5}).each(function(ta){if(p(ta)){ta=ta.width+5;var oa="start"}else ta=-5,oa="end";U.select(this).selectAll("tspan").attr("x",ta).attr("text-anchor",oa)});fa=ua.selectAll("rect.bandrect").data(function(ta){return ta.bands},m);ua=fa.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ta){return ta.color}).attr("fill-opacity",
0);fa.attr("fill",function(ta){return ta.color}).attr("width",function(ta){return ta.width}).attr("height",function(ta){return ta.height}).attr("y",function(ta){return ta.y});q(ua);fa.each(function(){ea.raiseToTop(this)});fa.exit().remove()}function L(fa,na,sa){sa=sa[0];var ua=na.margin||{l:80,r:80,t:100,b:80},ta=sa.trace,oa=ta.domain,va=na.width,ma=Math.floor(va*(oa.x[1]-oa.x[0])),pa=Math.floor(na.height*(oa.y[1]-oa.y[0]));va=oa.x[0]*va+ua.l;na=na.height-oa.y[1]*na.height+ua.t;oa=ta.line.shape;var za=
"all"===ta.hoverinfo?["count","probability"]:(ta.hoverinfo||"").split("+");fa={trace:ta,key:ta.uid,model:sa,x:va,y:na,width:ma,height:pa,hoveron:ta.hoveron,hoverinfoItems:za,arrangement:ta.arrangement,bundlecolors:ta.bundlecolors,sortpaths:ta.sortpaths,labelfont:ta.labelfont,categorylabelfont:ta.tickfont,pathShape:oa,dragDimension:null,margin:ua,paths:[],dimensions:[],graphDiv:fa,traceSelection:null,pathSelection:null,dimensionSelection:null};sa.dimensions&&(S(fa),Q(fa));return fa}function P(fa,na,
sa,ua,ta){var oa=[],va=[],ma;for(ma=0;ma<sa.length-1;ma++){var pa=U.interpolateNumber(sa[ma]+fa[ma],fa[ma+1]);oa.push(pa(ta));va.push(pa(1-ta))}ta="M "+fa[0]+","+na[0];ta+="l"+sa[0]+",0 ";for(ma=1;ma<sa.length;ma++)ta+="C"+oa[ma-1]+","+na[ma-1]+" "+va[ma-1]+","+na[ma]+" "+fa[ma]+","+na[ma],ta+="l"+sa[ma]+",0 ";ta=ta+("l0,"+ua+" l -")+(sa[sa.length-1]+",0 ");for(ma=sa.length-2;0<=ma;ma--)ta+="C"+va[ma]+","+(na[ma+1]+ua)+" "+oa[ma]+","+(na[ma]+ua)+" "+(fa[ma]+sa[ma])+","+(na[ma]+ua),ta+="l-"+sa[ma]+
",0 ";return ta+"Z"}function Q(fa){function na(ab){var ra=ab.categoryInds.map(function(Ea,Ia){return oa[Ia][Ea]});return ma.map(function(Ea){return ra[Ea]})}var sa=fa.dimensions,ua=fa.model,ta=sa.map(function(ab){return ab.categories.map(function(ra){return ra.y})}),oa=fa.model.dimensions.map(function(ab){return ab.categories.map(function(ra){return ra.displayInd})}),va=fa.model.dimensions.map(function(ab){return ab.displayInd}),ma=fa.dimensions.map(function(ab){return ab.model.dimensionInd}),pa=
sa.map(function(ab){return ab.x}),za=sa.map(function(ab){return ab.width}),qa=[];for(Ca in ua.paths)ua.paths.hasOwnProperty(Ca)&&qa.push(ua.paths[Ca]);qa.sort(function(ab,ra){var Ea=na(ab),Ia=na(ra);"backward"===fa.sortpaths&&(Ea.reverse(),Ia.reverse());Ea.push(ab.valueInds[0]);Ia.push(ra.valueInds[0]);fa.bundlecolors&&(Ea.unshift(ab.rawColor),Ia.unshift(ra.rawColor));return Ea<Ia?-1:Ea>Ia?1:0});ua=Array(qa.length);var Ca=sa[0].model.count;sa=sa[0].categories.map(function(ab){return ab.height}).reduce(function(ab,
ra){return ab+ra});for(var Ka=0;Ka<qa.length;Ka++){var Oa=qa[Ka];var kb=0<Ca?Oa.count/Ca*sa:0;for(var mb=Array(ta.length),tb=0;tb<Oa.categoryInds.length;tb++){var nb=oa[tb][Oa.categoryInds[tb]],Ta=va[tb];mb[Ta]=ta[Ta][nb];ta[Ta][nb]+=kb;nb=fa.dimensions[Ta].categories[nb];Ta=nb.bands.length;var fb=nb.bands[Ta-1];void 0===fb||Oa.rawColor!==fb.rawColor?(Ta=void 0===fb?0:fb.y+fb.height,nb.bands.push({key:Ta,color:Oa.color,rawColor:Oa.rawColor,height:kb,width:nb.width,count:Oa.count,y:Ta,categoryViewModel:nb,
parcatsViewModel:fa})):(nb=nb.bands[Ta-1],nb.height+=kb,nb.count+=Oa.count)}tb="hspline"===fa.pathShape?P(pa,mb,za,kb,.5):P(pa,mb,za,kb,0);ua[Ka]={key:Oa.valueInds[0],model:Oa,height:kb,leftXs:pa,topYs:mb,dimWidths:za,svgD:tb,parcatsViewModel:fa}}fa.paths=ua}function S(fa){var na=fa.model.dimensions.map(function(ta){return{displayInd:ta.displayInd,dimensionInd:ta.dimensionInd}});na.sort(function(ta,oa){return ta.displayInd-oa.displayInd});var sa=[],ua;for(ua in na)sa.push(O(fa,fa.model.dimensions[na[ua].dimensionInd]));
fa.dimensions=sa}function O(fa,na){var sa=fa.model.dimensions.length;sa=40+(1<sa?(fa.width-80-16)/(sa-1):0)*na.displayInd;var ua=[],ta=fa.model.maxCats,oa=na.categories.length,va=na.count,ma=fa.height-8*(ta-1),pa=8*(ta-oa)/2,za=na.categories.map(function(Ka){return{displayInd:Ka.displayInd,categoryInd:Ka.categoryInd}});za.sort(function(Ka,Oa){return Ka.displayInd-Oa.displayInd});for(ta=0;ta<oa;ta++){var qa=za[ta].categoryInd;var Ca=na.categories[qa];qa=0<va?Ca.count/va*ma:0;Ca={key:Ca.valueInds[0],
model:Ca,width:16,height:qa,y:null!==Ca.dragY?Ca.dragY:pa,bands:[],parcatsViewModel:fa};pa=pa+qa+8;ua.push(Ca)}return{key:na.dimensionInd,x:null!==na.dragX?na.dragX:sa,y:0,width:16,model:na,categories:ua,parcatsViewModel:fa,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}var U=b("d3"),X=b("../../plot_api/plot_api"),da=b("../../components/fx"),ea=b("../../lib"),ca=b("../../components/drawing"),
ia=b("tinycolor2"),ha=b("../../lib/svg_text_utils");y.exports=function(fa,na,sa,ua){n(sa,fa,ua,na)}},{"../../components/drawing":637,"../../components/fx":655,"../../lib":749,"../../lib/svg_text_utils":773,"../../plot_api/plot_api":784,d3:169,tinycolor2:548}],1116:[function(b,y,D){var n=b("./parcats");y.exports=function(m,p,h,a){var d=m._fullLayout,e=d._size;n(m,d._paper,p,{width:e.w,height:e.h,margin:{t:e.t,r:e.r,b:e.b,l:e.l}},h,a)}},{"./parcats":1115}],1117:[function(b,y,D){D=b("../../components/colorscale/attributes");
var n=b("../../plots/cartesian/layout_attributes"),m=b("../../plots/font_attributes"),p=b("../../plots/domain").attributes,h=b("../../lib/extend").extendFlat;b=b("../../plot_api/plot_template").templatedArray;y.exports={domain:p({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:m({editType:"plot"}),tickfont:m({editType:"plot"}),rangefont:m({editType:"plot"}),
dimensions:b("dimension",{label:{valType:"string",editType:"plot"},tickvals:h({},n.tickvals,{editType:"plot"}),ticktext:h({},n.ticktext,{editType:"plot"}),tickformat:h({},n.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"number",editType:"plot"},{valType:"number",
editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:h({editType:"calc"},D("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/plot_template":787,"../../plots/cartesian/layout_attributes":811,"../../plots/domain":824,"../../plots/font_attributes":825}],1118:[function(b,y,D){function n(H,
L,P,Q){a:{for(var S=0;S<Q.length;S++)if(P>=Q[S][0]&&P<=Q[S][1]){Q=!0;break a}Q=!1}if(Q)return P;H=H?-1:1;var O=0;Q=L.length-1;0>H&&(S=O,O=Q,Q=S);for(var U=S=L[O];H*O<H*Q;O+=H){var X=O+H,da=L[X];if(H*P<H*(S*(1-N)+da*N))return S*(1-K)+U*K;if(H*P<H*da||X===Q)return da*(1-K)+S*K;U=S;S=da}}function m(H){H.attr("x",-C.bar.captureWidth/2).attr("width",C.bar.captureWidth)}function p(H){H.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function h(H){if(!H.brush.filterSpecified)return"0,"+
H.height;for(var L=a(H.brush.filter.getConsolidated(),H.height),P=[0],Q,S,O=L.length?L[0][0]:null,U=0;U<L.length;U++)Q=L[U],S=Q[1]-Q[0],P.push(O),P.push(S),S=U+1,S<L.length&&(O=L[S][0]-Q[1]);P.push(H.height);return P}function a(H,L){return H.map(function(P){return P.map(function(Q){return Math.max(0,Q*L)}).sort(J)})}function d(){v.select(document.body).style("cursor",null)}function e(H){H.attr("stroke-dasharray",h)}function l(H,L){H=v.select(H).selectAll(".highlight, .highlight-shadow");L=L?H.transition().duration(C.bar.snapDuration).each("end",
L):H;e(L)}function k(H,L){var P=H.brush,Q={};if(P.filterSpecified){var S=H.height;P=P.filter.getConsolidated();var O=a(P,S),U=NaN,X=NaN,da=NaN;for(S=0;S<=O.length;S++){var ea=O[S];if(ea&&ea[0]<=L&&L<=ea[1]){U=S;break}else if(X=S?S-1:NaN,ea&&ea[0]>L){da=S;break}}S=U;isNaN(S)&&(S=isNaN(X)||isNaN(da)?isNaN(X)?da:X:L-O[X][1]<O[da][0]-L?X:da);isNaN(S)||(O=O[S],X=C.bar.handleHeight,X=L>O[1]+X||L<O[0]-X?void 0:L>=.9*O[1]+.1*O[0]?"n":L<=.9*O[0]+.1*O[1]?"s":"ns",X&&(Q.interval=P[S],Q.intervalPix=O,Q.region=
X))}if(H.ordinal&&!Q.region)for(P=H.unitTickvals,H=H.unitToPaddedPx.invert(L),S=0;S<P.length;S++)if(L=[.25*P[Math.max(S-1,0)]+.75*P[S],.25*P[Math.min(S+1,P.length-1)]+.75*P[S]],H>=L[0]&&H<=L[1]){Q.clickableOrdinalRange=L;break}return Q}function c(H,L){v.event.sourceEvent.stopPropagation();H=L.height-v.mouse(H)[1]-2*C.verticalPadding;var P=L.unitToPaddedPx.invert(H),Q=L.brush,S=k(L,H),O=S.interval,U=Q.svgBrush;U.wasDragged=!1;U.grabbingBar="ns"===S.region;if(U.grabbingBar){var X=O.map(L.unitToPaddedPx);
U.grabPoint=H-X[0]-C.verticalPadding;U.barLength=X[1]-X[0]}U.clickableOrdinalRange=S.clickableOrdinalRange;U.stayingIntervals=L.multiselect&&Q.filterSpecified?Q.filter.getConsolidated():[];O&&(U.stayingIntervals=U.stayingIntervals.filter(function(da){return da[0]!==O[0]&&da[1]!==O[1]}));U.startExtent=S.region?O["s"===S.region?1:0]:P;L.parent.inBrushDrag=!0;U.brushStartCallback()}function f(H,L){v.event.sourceEvent.stopPropagation();var P=L.height-v.mouse(H)[1]-2*C.verticalPadding,Q=L.brush.svgBrush;
Q.wasDragged=!0;Q._dragging=!0;Q.newExtent=Q.grabbingBar?[P-Q.grabPoint,P+Q.barLength-Q.grabPoint].map(L.unitToPaddedPx.invert):[Q.startExtent,L.unitToPaddedPx.invert(P)].sort(J);L.brush.filterSpecified=!0;Q.extent=Q.stayingIntervals.concat([Q.newExtent]);Q.brushCallback(L);l(H.parentNode)}function g(H,L){var P=L.brush,Q=P.filter,S=P.svgBrush;S._dragging||(q(H,L),f(H,L),L.brush.svgBrush.wasDragged=!1);S._dragging=!1;v.event.sourceEvent.stopPropagation();var O=S.grabbingBar;S.grabbingBar=!1;S.grabLocation=
void 0;L.parent.inBrushDrag=!1;d();if(S.wasDragged)if(O=function(){Q.set(Q.getConsolidated())},L.ordinal){var U=L.unitTickvals;U[U.length-1]<U[0]&&U.reverse();S.newExtent=[n(0,U,S.newExtent[0],S.stayingIntervals),n(1,U,S.newExtent[1],S.stayingIntervals)];U=S.newExtent[1]>S.newExtent[0];S.extent=S.stayingIntervals.concat(U?[S.newExtent]:[]);S.extent.length||E(P);S.brushCallback(L);U?l(H.parentNode,O):(O(),l(H.parentNode))}else O();else S.wasDragged=void 0,S.clickableOrdinalRange?P.filterSpecified&&
L.multiselect?S.extent.push(S.clickableOrdinalRange):(S.extent=[S.clickableOrdinalRange],P.filterSpecified=!0):O?(S.extent=S.stayingIntervals,0===S.extent.length&&E(P)):E(P),S.brushCallback(L),l(H.parentNode);S.brushEndCallback(P.filterSpecified?Q.getConsolidated():[])}function q(H,L){H=L.height-v.mouse(H)[1]-2*C.verticalPadding;L=k(L,H);H="crosshair";L.clickableOrdinalRange?H="pointer":L.region&&(H=L.region+"-resize");v.select(document.body).style("cursor",H)}function t(H){H.on("mousemove",function(L){v.event.preventDefault();
L.parent.inBrushDrag||q(this,L)}).on("mouseleave",function(L){L.parent.inBrushDrag||d()}).call(v.behavior.drag().on("dragstart",function(L){c(this,L)}).on("drag",function(L){f(this,L)}).on("dragend",function(L){g(this,L)}))}function u(H,L){return H[0]-L[0]}function w(H){var L=H.selectAll(".background").data(I);L.enter().append("rect").classed("background",!0).call(m).call(p).style("pointer-events","auto").attr("transform","translate(0 "+C.verticalPadding+")");L.call(t).attr("height",function(P){return P.height-
C.verticalPadding});L=H.selectAll(".highlight-shadow").data(I);L.enter().append("line").classed("highlight-shadow",!0).attr("x",-C.bar.width/2).attr("stroke-width",C.bar.width+C.bar.strokeWidth).attr("stroke",C.bar.strokeColor).attr("opacity",C.bar.strokeOpacity).attr("stroke-linecap","butt");L.attr("y1",function(P){return P.height}).call(e);H=H.selectAll(".highlight").data(I);H.enter().append("line").classed("highlight",!0).attr("x",-C.bar.width/2).attr("stroke-width",C.bar.width-C.bar.strokeWidth).attr("stroke",
C.bar.fillColor).attr("opacity",C.bar.fillOpacity).attr("stroke-linecap","butt");H.attr("y1",function(P){return P.height}).call(e)}function x(H){return H.svgBrush.extent.map(function(L){return L.slice()})}function E(H){H.filterSpecified=!1;H.svgBrush.extent=[[-Infinity,Infinity]]}function F(H){return function(L){L=L.brush;var P=x(L).slice();L.filter.set(P);H()}}function z(H){H=H.slice();for(var L=[],P,Q=H.shift();Q;){for(P=Q.slice();(Q=H.shift())&&Q[0]<=P[1];)P[1]=Math.max(P[1],Q[1]);L.push(P)}1===
L.length&&L[0][0]>L[0][1]&&(L=[]);return L}function B(){var H=[],L,P;return{set:function(Q){H=Q.map(function(S){return S.slice().sort(J)}).sort(u);1===H.length&&-Infinity===H[0][0]&&Infinity===H[0][1]&&(H=[[0,-1]]);L=z(H);P=H.reduce(function(S,O){return[Math.min(S[0],O[0]),Math.max(S[1],O[1])]},[Infinity,-Infinity])},get:function(){return H.slice()},getConsolidated:function(){return L},getBounds:function(){return P}}}var C=b("./constants"),v=b("d3"),G=b("../../lib/gup").keyFun,I=b("../../lib/gup").repeat,
J=b("../../lib").sorterAsc,K=C.bar.snapRatio,N=C.bar.snapClose;y.exports={makeBrush:function(H,L,P,Q,S,O){H=B();H.set(P);return{filter:H,filterSpecified:L,svgBrush:{extent:[],brushStartCallback:Q,brushCallback:F(S),brushEndCallback:O}}},ensureAxisBrush:function(H){H=H.selectAll("."+C.cn.axisBrush).data(I,G);H.enter().append("g").classed(C.cn.axisBrush,!0);w(H)},cleanRanges:function(H,L){Array.isArray(H[0])?(H=H.map(function(Q){return Q.sort(J)}),H=L.multiselect?z(H.sort(u)):[H[0]]):H=[H.sort(J)];
if(L.tickvals){var P=L.tickvals.slice().sort(J);H=H.map(function(Q){Q=[n(0,P,Q[0],[]),n(1,P,Q[1],[])];if(Q[1]>Q[0])return Q}).filter(function(Q){return Q});if(!H.length)return}return 1<H.length?H:H[0]}}},{"../../lib":749,"../../lib/gup":746,"./constants":1121,d3:169}],1119:[function(b,y,D){var n=b("d3"),m=b("../../plots/get_data").getModuleCalcData,p=b("./plot"),h=b("../../constants/xmlns_namespaces");D.name="parcoords";D.plot=function(a){var d=m(a.calcdata,"parcoords")[0];d.length&&p(a,d)};D.clean=
function(a,d,e,l){a=l._has&&l._has("parcoords");d=d._has&&d._has("parcoords");a&&!d&&(l._paperdiv.selectAll(".parcoords").remove(),l._glimages.selectAll("*").remove())};D.toSVG=function(a){var d=a._fullLayout._glimages,e=n.select(a).selectAll(".svg-container");e.filter(function(l,k){return k===e.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var l=this.toDataURL("image/png");d.append("svg:image").attr({xmlns:h.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:this.width,
height:this.height})});window.setTimeout(function(){n.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":725,"../../plots/get_data":834,"./plot":1128,d3:169}],1120:[function(b,y,D){var n=b("../../lib").isArrayOrTypedArray,m=b("../../components/colorscale"),p=b("../../lib/gup").wrap;y.exports=function(h,a){if(m.hasColorscale(a,"line")&&n(a.line.color)){var d=a.line.color;var e=m.extractOpts(a.line).colorscale;m.calc(h,a,{vals:d,containerStr:"line",
cLetter:"c"})}else{h=a._length;d=Array(h);for(e=0;e<h;e++)d[e]=.5;e=[[0,a.line.color],[1,a.line.color]]}return p({lineColor:d,cscale:e})}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gup":746}],1121:[function(b,y,D){y.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5E3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,
fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",
axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1122:[function(b,y,D){function n(q,t,u,w,x){var E=x("line.color",u);if(h(q,"line")&&p.isArrayOrTypedArray(E)){if(E.length)return x("line.colorscale"),a(q,t,w,x,{prefix:"line.",cLetter:"c"}),E.length;t.line.color=u}return Infinity}function m(q,t,u,w){function x(F,z){return p.coerce(q,t,k.dimensions,F,z)}
u=x("values");var E=x("visible");u&&u.length||(E=t.visible=!1);E&&(x("label"),x("tickvals"),x("ticktext"),x("tickformat"),u=x("range"),t._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:u},l.setConvert(t._ax,w.layout),x("multiselect"),w=x("constraintrange"))&&(t.constraintrange=c.cleanRanges(w,t))}var p=b("../../lib"),h=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),d=b("../../plots/domain").defaults,e=b("../../plots/array_container_defaults"),
l=b("../../plots/cartesian/axes"),k=b("./attributes"),c=b("./axisbrush"),f=b("./constants").maxDimensionCount,g=b("./merge_length");y.exports=function(q,t,u,w){function x(F,z){return p.coerce(q,t,k,F,z)}var E=q.dimensions;Array.isArray(E)&&E.length>f&&(p.log("parcoords traces support up to "+f+" dimensions at the moment"),E.splice(f));E=e(q,t,{name:"dimensions",layout:w,handleItemDefaults:m});u=n(q,t,u,w,x);d(t,w,x);Array.isArray(E)&&E.length||(t.visible=!1);g(t,E,"values",u);w={family:w.font.family,
size:Math.round(w.font.size/1.2),color:w.font.color};p.coerceFont(x,"labelfont",w);p.coerceFont(x,"tickfont",w);p.coerceFont(x,"rangefont",w);x("labelangle");x("labelside")}},{"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"../../plots/domain":824,"./attributes":1117,"./axisbrush":1118,"./constants":1121,"./merge_length":1126}],1123:[function(b,y,D){var n=b("../../lib").isTypedArray;
D.convertTypedArray=function(m){return n(m)?Array.prototype.slice.call(m):m};D.isOrdinal=function(m){return!!m.tickvals};D.isVisible=function(m){return m.visible||!("visible"in m)}},{"../../lib":749}],1124:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:b("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},
{"./attributes":1117,"./base_plot":1119,"./calc":1120,"./defaults":1122,"./plot":1128}],1125:[function(b,y,D){function n(x,E,F,z,B){var C=x._gl;C.enable(C.SCISSOR_TEST);C.scissor(E,F,z,B);x.clear({color:[0,0,0,0],depth:1})}function m(x,E,F,z,B,C){function v(I){var J=Math.min(z,B-I*z);0===I&&(window.cancelAnimationFrame(F.currentRafs[G]),delete F.currentRafs[G],n(x,C.scissorX,C.scissorY,C.scissorWidth,C.viewBoxSize[1]));F.clearOnly||(C.count=2*J,C.offset=2*I*z,E(C),I*z+J<B&&(F.currentRafs[G]=window.requestAnimationFrame(function(){v(I+
1)})),F.drawCompleted=!1)}var G=C.key;F.drawCompleted||(x.read({x:0,y:0,width:1,height:1,data:t}),F.drawCompleted=!0);v(0)}function p(x,E){for(var F=Array(256),z=0;256>z;z++)F[z]=x(z/255).concat(E);return F}function h(x,E,F){for(var z=Array(x*(g+4)),B=0,C=0;C<x;C++){for(var v=0;v<g;v++)z[B++]=v<E.length?E[v].paddedUnitValues[C]:.5;z[B++]=(C>>>16)%256/255;z[B++]=(C>>>8)%256/255;z[B++]=(C>>>0)%256/255;z[B++]=Math.max(1E-6,Math.min(.999999,F[C]))}return z}function a(x){x="0"+x;return x.substr(x.length-
2)}function d(x){return x<g?"p"+a(x+1)+"_"+a(x+4):"colors"}function e(x,E,F){for(var z=0;z<=g;z+=4){for(var B=x,C=B[d(z)],v=z/4,G=E,I=F,J=Array(8*G),K=0,N=0;N<G;N++)for(var H=0;2>H;H++)for(var L=0;4>L;L++){var P=4*v+L,Q=I[64*N+P];63===P&&0===H&&(Q*=-1);J[K++]=Q}C.call(B,J)}}function l(x){for(var E={},F=0;F<=g;F+=4)E[d(F)]=x.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return E}function k(x){var E=Math.max(0,Math.floor(2047*x[0]),0);x=Math.min(2047,Math.ceil(2047*x[1]),2047);return[Math.min(E,
x),Math.max(E,x)]}D=b("glslify");var c=D(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform sampler2D mask, palette;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\n\nbool isPick    \x3d (drwLayer \x3e 1.5);\nbool isContext \x3d (drwLayer \x3c 0.5);\n\nconst vec4 ZEROS \x3d vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS \x3d vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 \x3d val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 \x3d val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo \x3c hi) \x26\x26 (lo \x3e p || p \x3e hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] \x3d A;\n    pnts[1] \x3d B;\n    pnts[2] \x3d C;\n    pnts[3] \x3d D;\n\n    for(int i \x3d 0; i \x3c 4; ++i) {\n        for(int j \x3d 0; j \x3c 4; ++j) {\n            for(int k \x3d 0; k \x3c 4; ++k) {\n                if(0 \x3d\x3d iMod(\n                    int(255.0 * texture2D(mask,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x \x3d 0.5 * sign(v) + 0.5;\n    float y \x3d axisY(x, A, B, C, D);\n    float z \x3d 1.0 - abs(v);\n\n    z +\x3d isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A \x3d mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B \x3d mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C \x3d mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D \x3d mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v \x3d colors[3];\n\n    gl_Position \x3d position(isContext, v, A, B, C, D);\n\n    fragColor \x3d\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),
f=D(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor \x3d fragColor;\n}\n"]),g=b("./constants").maxDimensionCount,q=b("../../lib"),t=new Uint8Array(4),u=new Uint8Array(4),w={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};y.exports=function(x,E){function F(S){G=S.model;I=S.viewModel;J=I.dimensions.slice();K=J[0]?J[0].values.length:0;var O=G.lines;S=B?O.color.map(function(U,X){return X/O.color.length}):O.color;S=h(K,J,S);
e(N,K,S);z||B||(L=C.texture(q.extendFlat({data:p(G.unitToColor,255)},w)))}var z=E.context,B=E.pick,C=E.regl,v={currentRafs:{},drawCompleted:!0,clearOnly:!1},G,I,J,K,N=l(C),H,L=C.texture(w),P=[];F(E);var Q=C({profile:!1,blend:{enable:z,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!z,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:C.prop("scissorX"),y:C.prop("scissorY"),
width:C.prop("scissorWidth"),height:C.prop("scissorHeight")}},viewport:{x:C.prop("viewportX"),y:C.prop("viewportY"),width:C.prop("viewportWidth"),height:C.prop("viewportHeight")},dither:!1,vert:c,frag:f,primitive:"lines",lineWidth:1,attributes:N,uniforms:{resolution:C.prop("resolution"),viewBoxPos:C.prop("viewBoxPos"),viewBoxSize:C.prop("viewBoxSize"),dim0A:C.prop("dim0A"),dim1A:C.prop("dim1A"),dim0B:C.prop("dim0B"),dim1B:C.prop("dim1B"),dim0C:C.prop("dim0C"),dim1C:C.prop("dim1C"),dim0D:C.prop("dim0D"),
dim1D:C.prop("dim1D"),loA:C.prop("loA"),hiA:C.prop("hiA"),loB:C.prop("loB"),hiB:C.prop("hiB"),loC:C.prop("loC"),hiC:C.prop("hiC"),loD:C.prop("loD"),hiD:C.prop("hiD"),palette:L,contextColor:C.prop("contextColor"),mask:C.prop("maskTexture"),drwLayer:C.prop("drwLayer"),maskHeight:C.prop("maskHeight")},offset:C.prop("offset"),count:C.prop("count")});return{render:function(S,O,U){var X=S.length,da,ea=Infinity,ca=-Infinity;for(da=0;da<X;da++){if(S[da].dim0.canvasX<ea){ea=S[da].dim0.canvasX;var ia=da}if(S[da].dim1.canvasX>
ca){ca=S[da].dim1.canvasX;var ha=da}}0===X&&n(C,0,0,G.canvasWidth,G.canvasHeight);var fa=z,na;da=[[],[]];for(ca=0;64>ca;ca++)ea=!fa&&ca<J.length?J[ca].brush.filter.getBounds():[-Infinity,Infinity],da[0][ca]=ea[0],da[1][ca]=ea[1];var sa=Array(16384);for(ea=0;16384>ea;ea++)sa[ea]=255;if(!fa)for(ea=0;ea<J.length;ea++){ca=ea%8;fa=(ea-ca)/8;var ua=Math.pow(2,ca),ta=J[ea].brush.filter.get();if(!(2>ta.length)){var oa=k(ta[0])[1];for(na=1;na<ta.length;na++){var va=k(ta[na]);for(ca=oa+1;ca<va[0];ca++)sa[8*
ca+fa]&=~ua;oa=Math.max(oa,va[1])}}}ea={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:sa};H?H(ea):H=C.texture(ea);ea={maskTexture:H,maskHeight:2048,loA:da[0].slice(0,16),loB:da[0].slice(16,32),loC:da[0].slice(32,48),loD:da[0].slice(48,64),hiA:da[1].slice(0,16),hiB:da[1].slice(16,32),hiC:da[1].slice(32,48),hiD:da[1].slice(48,64)};for(da=0;da<X;da++){var ma=S[da];ua=ma.dim0.crossfilterDimensionIndex;ta=ma.dim1.crossfilterDimensionIndex;oa=ma.canvasX;va=ma.canvasY;ca=oa+
ma.panelSizeX;if(O||!P[ua]||P[ua][0]!==oa||P[ua][1]!==ca){P[ua]=[oa,ca];ca=G;sa=ia;fa=ha;na=da;var pa=ma.panelSizeX,za=ma.panelSizeY;ma=ma.dim0.crossfilterDimensionIndex;for(var qa=z?0:B?2:1,Ca=ea,Ka=[[],[]],Oa=0;64>Oa;Oa++)Ka[0][Oa]=Oa===ua?1:0,Ka[1][Oa]=Oa===ta?1:0;Oa=ca.lines.canvasOverdrag;var kb=ca.domain,mb=ca.canvasWidth,tb=ca.canvasHeight,nb=ca.deselectedLines.color;ca=q.extendFlat({key:ma,resolution:[mb,tb],viewBoxPos:[oa+Oa,va],viewBoxSize:[pa,za],i0:ua,i1:ta,dim0A:Ka[0].slice(0,16),dim0B:Ka[0].slice(16,
32),dim0C:Ka[0].slice(32,48),dim0D:Ka[0].slice(48,64),dim1A:Ka[1].slice(0,16),dim1B:Ka[1].slice(16,32),dim1C:Ka[1].slice(32,48),dim1D:Ka[1].slice(48,64),drwLayer:qa,contextColor:[nb[0]/255,nb[1]/255,nb[2]/255,1>nb[3]?nb[3]:Math.max(1/255,Math.pow(1/ca.lines.color.length,1/3))],scissorX:(na===sa?0:oa+Oa)+(ca.pad.l-Oa)+ca.layoutWidth*kb.x[0],scissorWidth:(na===fa?mb-oa+Oa:pa+.5)+(na===sa?oa+Oa:0),scissorY:va+ca.pad.b+ca.layoutHeight*kb.y[0],scissorHeight:za,viewportX:ca.pad.l-Oa+ca.layoutWidth*kb.x[0],
viewportY:ca.pad.b+ca.layoutHeight*kb.y[0],viewportWidth:mb,viewportHeight:tb},Ca);v.clearOnly=U;m(C,Q,v,O?G.lines.blockLineCount:K,K,ca)}}},readPixel:function(S,O){C.read({x:S,y:O,width:1,height:1,data:u});return u},readPixels:function(S,O,U,X){var da=new Uint8Array(4*U*X);C.read({x:S,y:O,width:U,height:X,data:da});return da},destroy:function(){x.style["pointer-events"]="none";L.destroy();H&&H.destroy();for(var S in N)N[S].destroy()},update:F}}},{"../../lib":749,"./constants":1121,glslify:413}],
1126:[function(b,y,D){y.exports=function(n,m,p,h){h||(h=Infinity);var a;for(a=0;a<m.length;a++){var d=m[a];d.visible&&(h=Math.min(h,d[p].length))}Infinity===h&&(h=0);n._length=h;for(a=0;a<m.length;a++)d=m[a],d.visible&&(d._length=h);return h}},{}],1127:[function(b,y,D){function n(S,O){return p(C.aggNums(Math.min,null,S,O),C.aggNums(Math.max,null,S,O))}function m(S){var O=S.range;return O?p(O[0],O[1]):n(S.values,S._length)}function p(S,O){if(isNaN(S)||!isFinite(S))S=0;if(isNaN(O)||!isFinite(O))O=0;
S===O&&(0===S?(--S,O+=1):(S*=.9,O*=1.1));return[S,O]}function h(S,O){return O?function(U,X){X=O[X];return null===X||void 0===X?S(U):X}:S}function a(S,O,U,X,da){var ea=m(U);return X?F.scale.ordinal().domain(X.map(h(F.format(U.tickformat),da))).range(X.map(function(ca){return S-O+(ca-ea[0])/(ea[1]-ea[0])*(2*O-S)})):F.scale.linear().domain(ea).range([S-O,O])}function d(S,O){return F.scale.linear().range([O,S-O])}function e(S,O){return F.scale.linear().domain(m(S)).range([O,1-O])}function l(S){if(S.tickvals){var O=
m(S);return F.scale.ordinal().domain(S.tickvals).range(S.tickvals.map(function(U){return(U-O[0])/(O[1]-O[0])}))}}function k(S){var O=S.map(function(ea){return ea[0]}),U=S.map(function(ea){ea=z(ea[1]);return F.rgb("rgb("+ea[0]+","+ea[1]+","+ea[2]+")")}),X=function(ea){return function(ca){return ca[ea]}},da=["r","g","b"].map(function(ea){return F.scale.linear().clamp(!0).domain(O).range(U.map(X(ea)))});return function(ea){return da.map(function(ca){return ca(ea)})}}function c(S){return S.dimensions.some(function(O){return O.brush.filterSpecified})}
function f(S,O,U){var X=N(O),da=X.trace,ea=H.convertTypedArray(X.lineColor),ca=da.line;O={color:z(L.deselectedLineColor)};var ia=I.extractOpts(ca);X=ia.reversescale?I.flipScale(X.cscale):X.cscale;var ha=da.domain,fa=da.dimensions,na=S.width,sa=da.labelangle,ua=da.labelside,ta=da.labelfont,oa=da.tickfont,va=da.rangefont;da=C.extendDeepNoArrays({},ca,{color:ea.map(F.scale.linear().domain(m({values:ea,range:[ia.min,ia.max],_length:da._length}))),blockLineCount:L.blockLineCount,canvasOverdrag:L.overdrag*
L.canvasPixelRatio});ea=S.margin||{l:80,r:80,t:100,b:80};ca=Math.floor(na*(ha.x[1]-ha.x[0]));ia=Math.floor(S.height*(ha.y[1]-ha.y[0]));return{key:U,colCount:fa.filter(H.isVisible).length,dimensions:fa,tickDistance:L.tickDistance,unitToColor:k(X),lines:da,deselectedLines:O,labelAngle:sa,labelSide:ua,labelFont:ta,tickFont:oa,rangeFont:va,layoutWidth:na,layoutHeight:S.height,domain:ha,translateX:ha.x[0]*na,translateY:S.height-ha.y[1]*S.height,pad:ea,canvasWidth:ca*L.canvasPixelRatio+2*da.canvasOverdrag,
canvasHeight:ia*L.canvasPixelRatio,width:ca,height:ia,canvasPixelRatio:L.canvasPixelRatio}}function g(S,O,U){var X=U.width,da=U.height,ea=U.dimensions,ca=U.canvasPixelRatio,ia=function(ua){return X*ua/Math.max(1,U.colCount-1)},ha=L.verticalPadding/da,fa=d(da,L.verticalPadding),na={key:U.key,xScale:ia,model:U,inBrushDrag:!1},sa={};na.dimensions=ea.filter(H.isVisible).map(function(ua,ta){function oa(tb,nb){return{val:tb,text:Oa[nb]}}function va(tb,nb){return tb.val-nb.val}var ma=e(ua,ha),pa=sa[ua.label];
sa[ua.label]=(pa||0)+1;pa=ua.label+(pa?"__"+pa:"");var za=ua.constraintrange,qa=za&&za.length;qa&&!Array.isArray(za[0])&&(za=[za]);za=qa?za.map(function(tb){return tb.map(ma)}):[[-Infinity,Infinity]];var Ca=ua.values;Ca.length>ua._length&&(Ca=Ca.slice(0,ua._length));var Ka=ua.tickvals;if(Array.isArray(Ka)&&Ka.length){var Oa=ua.ticktext;Array.isArray(Oa)&&Oa.length?Oa.length>Ka.length?Oa=Oa.slice(0,Ka.length):Ka.length>Oa.length&&(Ka=Ka.slice(0,Oa.length)):Oa=Ka.map(F.format(ua.tickformat));for(var kb=
1;kb<Ka.length;kb++)if(Ka[kb]<Ka[kb-1]){kb=Ka.map(oa).sort(va);for(var mb=0;mb<Ka.length;mb++)Ka[mb]=kb[mb].val,Oa[mb]=kb[mb].text;break}}else Ka=void 0;Ca=H.convertTypedArray(Ca);return{key:pa,label:ua.label,tickFormat:ua.tickformat,tickvals:Ka,ticktext:Oa,ordinal:H.isOrdinal(ua),multiselect:ua.multiselect,xIndex:ta,crossfilterDimensionIndex:ta,visibleIndex:ua._index,height:da,values:Ca,paddedUnitValues:Ca.map(ma),unitTickvals:Ka&&Ka.map(ma),xScale:ia,x:ia(ta),canvasX:ia(ta)*ca,unitToPaddedPx:fa,
domainScale:a(da,L.verticalPadding,ua,Ka,Oa),ordinalScale:l(ua),parent:na,model:U,brush:P.makeBrush(S,qa,za,function(){S.linePickActive(!1)},function(){na.focusLayer&&na.focusLayer.render(na.panels,!0);var tb=c(na);!S.contextShown()&&tb?(na.contextLayer&&na.contextLayer.render(na.panels,!0),S.contextShown(!0)):S.contextShown()&&!tb&&(na.contextLayer&&na.contextLayer.render(na.panels,!0,!0),S.contextShown(!1))},function(tb){na.focusLayer.render(na.panels,!0);na.pickLayer&&na.pickLayer.render(na.panels,
!0);S.linePickActive(!0);if(O&&O.filterChanged){var nb=ma.invert;tb=tb.map(function(Ta){return Ta.map(nb).sort(C.sorterAsc)}).sort(function(Ta,fb){return Ta[0]-fb[0]});O.filterChanged(na.key,ua._index,tb)}})}});return na}function q(S){S.classed(L.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}function t(){var S=!0,O=!1;return{linePickActive:function(U){return arguments.length?S=!!U:S},contextShown:function(U){return arguments.length?O=!!U:
O}}}function u(S,O){var U=S*Math.PI/180;return{dir:"top"===O?1:-1,dx:Math.sin(U),dy:Math.cos(U),degrees:S}}function w(S,O){var U=O.panels||(O.panels=[]);S=S.data();for(var X=0;X<S.length-1;X++){var da=U[X]||(U[X]={}),ea=S[X],ca=S[X+1];da.dim0=ea;da.dim1=ca;da.canvasX=ea.canvasX;da.panelSizeX=ca.canvasX-ea.canvasX;da.panelSizeY=O.model.canvasHeight;da.y=0;da.canvasY=0}}function x(S){for(var O=0;O<S.length;O++)for(var U=0;U<S[O].length;U++)for(var X=S[O][U].trace,da=X.dimensions,ea=0;ea<da.length;ea++){var ca=
da[ea].values,ia=da[ea]._ax;ia&&(ia.range=ia.range?p(ia.range[0],ia.range[1]):n(ca,X._length),ia.dtick||(ia.dtick=.01*(Math.abs(ia.range[1]-ia.range[0])||1)),ia.tickformat=da[ea].tickformat,B.calcTicks(ia),ia.cleanRange())}}function E(S,O){if(S.ordinal)return"";var U=S.domainScale.domain();return B.tickText(S.model.dimensions[S.visibleIndex]._ax,U[O?U.length-1:0],!1).text}var F=b("d3"),z=b("color-rgba"),B=b("../../plots/cartesian/axes"),C=b("../../lib"),v=b("../../lib/svg_text_utils"),G=b("../../components/drawing"),
I=b("../../components/colorscale");D=b("../../lib/gup");var J=D.keyFun,K=D.repeat,N=D.unwrap,H=b("./helpers"),L=b("./constants"),P=b("./axisbrush"),Q=b("./lines");y.exports=function(S,O,U,X){var da=S._fullLayout,ea=da._toppaper;da=da._glcontainer;x(O);var ca=t(),ia=O.filter(function(sa){return N(sa).trace.visible}).map(f.bind(0,U)).map(g.bind(0,ca,X));da.each(function(sa,ua){return C.extendFlat(sa,ia[ua])});O=da.selectAll(".gl-canvas").each(function(sa){sa.viewModel=ia[0];sa.model=sa.viewModel?sa.viewModel.model:
null});var ha=null;O.filter(function(sa){return sa.pick}).style("pointer-events","auto").on("mousemove",function(sa){if(ca.linePickActive()&&sa.lineLayer&&X&&X.hover){var ua=F.event,ta=this.width,oa=this.height,va=F.mouse(this),ma=va[0];va=va[1];0>ma||0>va||ma>=ta||va>=oa||(oa=sa.lineLayer.readPixel(ma,oa-1-va),oa=(ta=0!==oa[3])?oa[2]+256*(oa[1]+256*oa[0]):null,sa={x:ma,y:va,clientX:ua.clientX,clientY:ua.clientY,dataIndex:sa.model.key,curveNumber:oa},oa!==ha&&(ta?X.hover(sa):X.unhover&&X.unhover(sa),
ha=oa))}});O.style("opacity",function(sa){return sa.pick?0:1});ea.style("background","rgba(255, 255, 255, 0)");ea=ea.selectAll("."+L.cn.parcoords).data(ia,J);ea.exit().remove();ea.enter().append("g").classed(L.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none");ea.attr("transform",function(sa){return"translate("+sa.model.translateX+","+sa.model.translateY+")"});ea=ea.selectAll("."+L.cn.parcoordsControlView).data(K,J);ea.enter().append("g").classed(L.cn.parcoordsControlView,
!0);ea.attr("transform",function(sa){return"translate("+sa.model.pad.l+","+sa.model.pad.t+")"});var fa=ea.selectAll("."+L.cn.yAxis).data(function(sa){return sa.dimensions},J);fa.enter().append("g").classed(L.cn.yAxis,!0);ea.each(function(sa){w(fa,sa)});O.each(function(sa){if(sa.viewModel){!sa.lineLayer||X?sa.lineLayer=Q(this,sa):sa.lineLayer.update(sa);if(sa.key||0===sa.key)sa.viewModel[sa.key]=sa.lineLayer;sa.lineLayer.render(sa.viewModel.panels,!sa.context||X)}});fa.attr("transform",function(sa){return"translate("+
sa.xScale(sa.xIndex)+", 0)"});fa.call(F.behavior.drag().origin(function(sa){return sa}).on("drag",function(sa){var ua=sa.parent;ca.linePickActive(!1);sa.x=Math.max(-L.overdrag,Math.min(sa.model.width+L.overdrag,F.event.x));sa.canvasX=sa.x*sa.model.canvasPixelRatio;fa.sort(function(ta,oa){return ta.x-oa.x}).each(function(ta,oa){ta.xIndex=oa;ta.x=sa===ta?ta.x:ta.xScale(ta.xIndex);ta.canvasX=ta.x*ta.model.canvasPixelRatio});w(fa,ua);fa.filter(function(ta){return 0!==Math.abs(sa.xIndex-ta.xIndex)}).attr("transform",
function(ta){return"translate("+ta.xScale(ta.xIndex)+", 0)"});F.select(this).attr("transform","translate("+sa.x+", 0)");fa.each(function(ta,oa,va){va===sa.parent.key&&(ua.dimensions[oa]=ta)});ua.contextLayer&&ua.contextLayer.render(ua.panels,!1,!c(ua));ua.focusLayer.render&&ua.focusLayer.render(ua.panels)}).on("dragend",function(sa){var ua=sa.parent;sa.x=sa.xScale(sa.xIndex);sa.canvasX=sa.x*sa.model.canvasPixelRatio;w(fa,ua);F.select(this).attr("transform",function(ta){return"translate("+ta.x+", 0)"});
ua.contextLayer&&ua.contextLayer.render(ua.panels,!1,!c(ua));ua.focusLayer&&ua.focusLayer.render(ua.panels);ua.pickLayer&&ua.pickLayer.render(ua.panels,!0);ca.linePickActive(!0);X&&X.axesMoved&&X.axesMoved(ua.key,ua.dimensions.map(function(ta){return ta.crossfilterDimensionIndex}))}));fa.exit().remove();ea=fa.selectAll("."+L.cn.axisOverlays).data(K,J);ea.enter().append("g").classed(L.cn.axisOverlays,!0);ea.selectAll("."+L.cn.axis).remove();var na=ea.selectAll("."+L.cn.axis).data(K,J);na.enter().append("g").classed(L.cn.axis,
!0);na.each(function(sa){var ua=sa.model.height/sa.model.tickDistance,ta=sa.domainScale,oa=ta.domain();F.select(this).call(F.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(ua,sa.tickFormat).tickValues(sa.ordinal?oa:null).tickFormat(function(va){return H.isOrdinal(sa)?va:B.tickText(sa.model.dimensions[sa.visibleIndex]._ax,va,!1).text}).scale(ta));G.font(na.selectAll("text"),sa.model.tickFont)});na.selectAll(".domain, .tick\x3eline").attr("fill","none").attr("stroke","black").attr("stroke-opacity",
.25).attr("stroke-width","1px");na.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select","none");O=ea.selectAll("."+L.cn.axisHeading).data(K,J);O.enter().append("g").classed(L.cn.axisHeading,!0);O=O.selectAll("."+L.cn.axisTitle).data(K,J);O.enter().append("text").classed(L.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select","none").style("pointer-events",
"auto");O.text(function(sa){return sa.label}).each(function(sa){var ua=F.select(this);G.font(ua,sa.model.labelFont);v.convertToTspans(ua,S)}).attr("transform",function(sa){var ua=u(sa.model.labelAngle,sa.model.labelSide),ta=L.axisTitleOffset;return(0<ua.dir?"":"translate(0,"+(2*ta+sa.model.height)+")")+"rotate("+ua.degrees+")translate("+-ta*ua.dx+","+-ta*ua.dy+")"}).attr("text-anchor",function(sa){sa=u(sa.model.labelAngle,sa.model.labelSide);return 2*Math.abs(sa.dx)>Math.abs(sa.dy)?0>sa.dir*sa.dx?
"start":"end":"middle"});O=ea.selectAll("."+L.cn.axisExtent).data(K,J);O.enter().append("g").classed(L.cn.axisExtent,!0);U=O.selectAll("."+L.cn.axisExtentTop).data(K,J);U.enter().append("g").classed(L.cn.axisExtentTop,!0);U.attr("transform","translate(0,"+-L.axisExtentOffset+")");U=U.selectAll("."+L.cn.axisExtentTopText).data(K,J);U.enter().append("text").classed(L.cn.axisExtentTopText,!0).call(q);U.text(function(sa){return E(sa,!0)}).each(function(sa){G.font(F.select(this),sa.model.rangeFont)});
O=O.selectAll("."+L.cn.axisExtentBottom).data(K,J);O.enter().append("g").classed(L.cn.axisExtentBottom,!0);O.attr("transform",function(sa){return"translate(0,"+(sa.model.height+L.axisExtentOffset)+")"});O=O.selectAll("."+L.cn.axisExtentBottomText).data(K,J);O.enter().append("text").classed(L.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(q);O.text(function(sa){return E(sa,!1)}).each(function(sa){G.font(F.select(this),sa.model.rangeFont)});P.ensureAxisBrush(ea)}},{"../../components/colorscale":627,
"../../components/drawing":637,"../../lib":749,"../../lib/gup":746,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"./axisbrush":1118,"./constants":1121,"./helpers":1123,"./lines":1125,"color-rgba":127,d3:169}],1128:[function(b,y,D){function n(d,e,l){l=e.indexOf(l);d=d.indexOf(l);-1===d&&(d+=e.length);return d}function m(d,e){return function(l,k){return n(d,e,l)-n(d,e,k)}}var p=b("./parcoords"),h=b("../../lib/prepare_regl"),a=b("./helpers").isVisible;y.exports=function(d,e){var l=
d._fullLayout;if(h(d)){var k={},c={},f={},g={},q=l._size;e.forEach(function(t,u){t=t[0].trace;f[u]=t.index;t=g[u]=t._fullInput.index;k[u]=d.data[t].dimensions;c[u]=d.data[t].dimensions.slice()});p(d,e,{width:q.w,height:q.h,margin:{t:q.t,r:q.r,b:q.b,l:q.l}},{filterChanged:function(t,u,w){var x=c[t][u];w=w.map(function(z){return z.slice()});var E="dimensions["+u+"].constraintrange",F=l._tracePreGUI[d._fullData[f[t]]._fullInput.uid];void 0===F[E]&&(F[E]=x.constraintrange||null);u=d._fullData[f[t]].dimensions[u];
w.length?(1===w.length&&(w=w[0]),x.constraintrange=w,u.constraintrange=w.slice(),w=[w]):(delete x.constraintrange,delete u.constraintrange,w=null);x={};x[E]=w;d.emit("plotly_restyle",[x,[g[t]]])},hover:function(t){d.emit("plotly_hover",t)},unhover:function(t){d.emit("plotly_unhover",t)},axesMoved:function(t,u){u=m(u,c[t].filter(a));k[t].sort(u);c[t].filter(function(w){return!a(w)}).sort(function(w){return c[t].indexOf(w)}).forEach(function(w){k[t].splice(k[t].indexOf(w),1);k[t].splice(c[t].indexOf(w),
0,w)});d.emit("plotly_restyle",[{dimensions:[k[t]]},[g[t]]])}})}}},{"../../lib/prepare_regl":762,"./helpers":1123,"./parcoords":1127}],1129:[function(b,y,D){D=b("../../plots/attributes");var n=b("../../plots/domain").attributes,m=b("../../plots/font_attributes"),p=b("../../components/color/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs;b=b("../../lib/extend").extendFlat;m=m({editType:"plot",arrayOk:!0,colorEditType:"plot"});
y.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:p.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",
dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:b({},D.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:h({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],
dflt:"auto",arrayOk:!0,editType:"plot"},textfont:b({},m,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:b({},m,{}),outsidetextfont:b({},m,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:b({},m,{}),position:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"plot"},
editType:"plot"},domain:n({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:b({},
m,{}),titleposition:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"calc"}}}},{"../../components/color/attributes":614,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/font_attributes":825,"../../plots/template_attributes":875}],1130:[function(b,y,D){var n=b("../../plots/plots");D.name="pie";D.plot=function(m,p,h,a){n.plotBasePlot(D.name,m,p,h,a)};D.clean=function(m,p,h,
a){n.cleanBasePlot(D.name,m,p,h,a)}},{"../../plots/plots":860}],1131:[function(b,y,D){function n(e){return function(l,k){if(!l)return!1;l=h(l);if(!l.isValid())return!1;l=a.addOpacity(l,l.getAlpha());e[k]||(e[k]=l);return l}}function m(e,l){var k,c=JSON.stringify(e),f=l[c];if(!f){f=e.slice();for(k=0;k<e.length;k++)f.push(h(e[k]).lighten(20).toHexString());for(k=0;k<e.length;k++)f.push(h(e[k]).darken(20).toHexString());l[c]=f}return f}var p=b("fast-isnumeric"),h=b("tinycolor2"),a=b("../../components/color"),
d={};y.exports={calc:function(e,l){var k=[],c=e._fullLayout;e=c.hiddenlabels||[];var f=l.labels,g=l.marker.colors||[],q=l.values,t=l._length,u=l._hasValues&&t,w;if(l.dlabel)for(f=Array(t),w=0;w<t;w++)f[w]=String(l.label0+w*l.dlabel);var x={};c=n(c["_"+l.type+"colormap"]);var E=0,F=!1;for(w=0;w<t;w++){if(u){var z=q[w];if(!p(z))continue;z=+z;if(0>z)continue}else z=1;var B=f[w];if(void 0===B||""===B)B=w;B=String(B);var C=x[B];void 0===C?(x[B]=k.length,(C=-1!==e.indexOf(B))||(E+=z),k.push({v:z,label:B,
color:c(g[w],B),i:w,pts:[w],hidden:C})):(F=!0,C=k[C],C.v+=z,C.pts.push(w),C.hidden||(E+=z),!1===C.color&&g[w]&&(C.color=c(g[w],B)))}("funnelarea"===l.type?F:l.sort)&&k.sort(function(v,G){return G.v-v.v});k[0]&&(k[0].vTotal=E);return k},crossTraceCalc:function(e,l){(l=(l||{}).type)||(l="pie");var k=e._fullLayout;e=e.calcdata;var c=k[l+"colorway"],f=k["_"+l+"colormap"];k["extend"+l+"colors"]&&(c=m(c,d));for(var g=k=0;g<e.length;g++){var q=e[g];if(q[0].trace.type===l)for(var t=0;t<q.length;t++){var u=
q[t];!1===u.color&&(f[u.label]?u.color=f[u.label]:(f[u.label]=u.color=c[k%c.length],k++))}}},makePullColorFn:n,generateExtendedColors:m}},{"../../components/color":615,"fast-isnumeric":241,tinycolor2:548}],1132:[function(b,y,D){function n(e,l){var k=Array.isArray(e),c=p.isArrayOrTypedArray(l);e=Math.min(k?e.length:Infinity,c?l.length:Infinity);isFinite(e)||(e=0);if(e&&c){for(var f,g=0;g<e;g++){var q=l[g];if(m(q)&&0<q){f=!0;break}}f||(e=0)}return{hasLabels:k,hasValues:c,len:e}}var m=b("fast-isnumeric"),
p=b("../../lib"),h=b("./attributes"),a=b("../../plots/domain").defaults,d=b("../bar/defaults").handleText;y.exports={handleLabelsAndValues:n,supplyDefaults:function(e,l,k,c){function f(t,u){return p.coerce(e,l,h,t,u)}k=f("labels");var g=f("values");k=n(k,g);g=k.len;l._hasLabels=k.hasLabels;l._hasValues=k.hasValues;!l._hasLabels&&l._hasValues&&(f("label0"),f("dlabel"));if(g){l._length=g;f("marker.line.width")&&f("marker.line.color");f("marker.colors");f("scalegroup");k=f("text");g=f("texttemplate");
var q;g||(q=f("textinfo",Array.isArray(k)?"text+percent":"percent"));f("hovertext");f("hovertemplate");if(g||q&&"none"!==q)q=f("textposition"),d(e,l,c,f,q,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(q)||"auto"===q||"outside"===q)&&f("automargin"),("inside"===q||"auto"===q||Array.isArray(q))&&f("insidetextorientation");a(l,c,f);q=f("hole");f("title.text")&&(k=f("title.position",q?"middle center":
"top center"),q||"middle center"!==k||(l.title.position="top center"),p.coerceFont(f,"title.font",c.font));f("sort");f("direction");f("rotation");f("pull")}else l.visible=!1}}},{"../../lib":749,"../../plots/domain":824,"../bar/defaults":894,"./attributes":1129,"fast-isnumeric":241}],1133:[function(b,y,D){var n=b("../../components/fx/helpers").appendArrayMultiPointValues;y.exports=function(m,p){var h={curveNumber:p.index,pointNumbers:m.pts,data:p._input,fullData:p,label:m.label,color:m.color,value:m.v,
percent:m.percent,text:m.text,v:m.v};1===m.pts.length&&(h.pointNumber=h.i=m.pts[0]);n(h,p,m.pts);"funnelarea"===p.type&&(delete h.v,delete h.i);return h}},{"../../components/fx/helpers":651}],1134:[function(b,y,D){var n=b("../../lib");D.formatPiePercent=function(m,p){m=(100*m).toPrecision(3);-1!==m.lastIndexOf(".")&&(m=m.replace(/[.]?0+$/,""));return n.numSeparate(m,p)+"%"};D.formatPieValue=function(m,p){m=m.toPrecision(10);-1!==m.lastIndexOf(".")&&(m=m.replace(/[.]?0+$/,""));return n.numSeparate(m,
p)};D.getFirstFilled=function(m,p){if(Array.isArray(m))for(var h=0;h<p.length;h++){var a=m[p[h]];if(a||0===a||""===a)return a}};D.castOption=function(m,p){if(Array.isArray(m))return D.getFirstFilled(m,p);if(m)return m}},{"../../lib":749}],1135:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,supplyLayoutDefaults:b("./layout_defaults"),layoutAttributes:b("./layout_attributes"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,
style:b("./style"),styleOne:b("./style_one"),moduleType:"trace",name:"pie",basePlotModule:b("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":1129,"./base_plot":1130,"./calc":1131,"./defaults":1132,"./layout_attributes":1136,"./layout_defaults":1137,"./plot":1138,"./style":1139,"./style_one":1140}],1136:[function(b,y,D){y.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",
dflt:!0,editType:"calc"}}},{}],1137:[function(b,y,D){var n=b("../../lib"),m=b("./layout_attributes");y.exports=function(p,h){n.coerce(p,h,m,"hiddenlabels",void 0);n.coerce(p,h,m,"piecolorway",h.colorway);n.coerce(p,h,m,"extendpiecolors",void 0)}},{"../../lib":749,"./layout_attributes":1136}],1138:[function(b,y,D){function n(S,O){S.each(function(U){var X=z.select(this);if(U.labelExtraX||U.labelExtraY){var da=X.select("g.slicetext text");U.transform.targetX+=U.labelExtraX;U.transform.targetY+=U.labelExtraY;
da.attr("transform",I.getTextTransform(U.transform));da=U.cxFinal+U.pxmid[0];var ea="M"+da+","+(U.cyFinal+U.pxmid[1]),ca=(U.yLabelMax-U.yLabelMin)*(0>U.pxmid[0]?-1:1)/4;if(U.labelExtraX){var ia=U.labelExtraX*U.pxmid[1]/U.pxmid[0],ha=U.yLabelMid+U.labelExtraY-(U.cyFinal+U.pxmid[1]);ea=Math.abs(ia)>Math.abs(ha)?ea+("l"+ha*U.pxmid[0]/U.pxmid[1]+","+ha+"H"+(da+U.labelExtraX+ca)):ea+("l"+U.labelExtraX+","+ia+"v"+(ha-ia)+"h"+ca)}else ea+="V"+(U.yLabelMid+U.labelExtraY)+"h"+ca;I.ensureSingle(X,"path","textline").call(v.stroke,
O.outsidetextfont.color).attr({"stroke-width":Math.min(2,O.outsidetextfont.size/8),d:ea,fill:"none"})}else X.select("path.textline").remove()})}function m(S,O,U){var X=U[0],da=X.trace,ea=X.cx,ca=X.cy;"_hasHoverLabel"in da||(da._hasHoverLabel=!1);"_hasHoverEvent"in da||(da._hasHoverEvent=!1);S.on("mouseover",function(ia){var ha=O._fullLayout,fa=O._fullData[da.index];if(!O._dragging&&!1!==ha.hovermode){var na=fa.hoverinfo;Array.isArray(na)&&(na=C.castHoverinfo({hoverinfo:[L.castOption(na,ia.pts)],_module:da._module},
ha,0));"all"===na&&(na="label+text+value+percent+name");if(fa.hovertemplate||"none"!==na&&"skip"!==na&&na){var sa=ia.rInscribed||0,ua=ea+ia.pxmid[0]*(1-sa),ta=ca+ia.pxmid[1]*(1-sa),oa=ha.separators,va=[];na&&-1!==na.indexOf("label")&&va.push(ia.label);ia.text=L.castOption(fa.hovertext||fa.text,ia.pts);if(na&&-1!==na.indexOf("text")){var ma=ia.text;I.isValidTextValue(ma)&&va.push(ma)}ia.value=ia.v;ia.valueLabel=L.formatPieValue(ia.v,oa);na&&-1!==na.indexOf("value")&&va.push(ia.valueLabel);ia.percent=
ia.v/X.vTotal;ia.percentLabel=L.formatPiePercent(ia.percent,oa);na&&-1!==na.indexOf("percent")&&va.push(ia.percentLabel);oa=fa.hoverlabel;ma=oa.font;C.loneHover({trace:da,x0:ua-sa*X.r,x1:ua+sa*X.r,y:ta,text:va.join("\x3cbr\x3e"),name:fa.hovertemplate||-1!==na.indexOf("name")?fa.name:void 0,idealAlign:0>ia.pxmid[0]?"left":"right",color:L.castOption(oa.bgcolor,ia.pts)||ia.color,borderColor:L.castOption(oa.bordercolor,ia.pts),fontFamily:L.castOption(ma.family,ia.pts),fontSize:L.castOption(ma.size,ia.pts),
fontColor:L.castOption(ma.color,ia.pts),nameLength:L.castOption(oa.namelength,ia.pts),textAlign:L.castOption(oa.align,ia.pts),hovertemplate:L.castOption(fa.hovertemplate,ia.pts),hovertemplateLabels:ia,eventData:[P(ia,fa)]},{container:ha._hoverlayer.node(),outerContainer:ha._paper.node(),gd:O});da._hasHoverLabel=!0}da._hasHoverEvent=!0;O.emit("plotly_hover",{points:[P(ia,fa)],event:z.event})}});S.on("mouseout",function(ia){var ha=O._fullLayout,fa=O._fullData[da.index],na=z.select(this).datum();da._hasHoverEvent&&
(ia.originalEvent=z.event,O.emit("plotly_unhover",{points:[P(na,fa)],event:z.event}),da._hasHoverEvent=!1);da._hasHoverLabel&&(C.loneUnhover(ha._hoverlayer.node()),da._hasHoverLabel=!1)});S.on("click",function(ia){var ha=O._fullLayout;O._dragging||!1===ha.hovermode||(O._hoverdata=[P(ia,O._fullData[da.index])],C.click(O,z.event))})}function p(S,O,U){var X=L.castOption(S.outsidetextfont.color,O.pts)||L.castOption(S.textfont.color,O.pts)||U.color,da=L.castOption(S.outsidetextfont.family,O.pts)||L.castOption(S.textfont.family,
O.pts)||U.family;S=L.castOption(S.outsidetextfont.size,O.pts)||L.castOption(S.textfont.size,O.pts)||U.size;return{color:X,family:da,size:S}}function h(S,O,U){var X=L.castOption(S.insidetextfont.color,O.pts);!X&&S._input.textfont&&(X=L.castOption(S._input.textfont.color,O.pts));var da=L.castOption(S.insidetextfont.family,O.pts)||L.castOption(S.textfont.family,O.pts)||U.family;S=L.castOption(S.insidetextfont.size,O.pts)||L.castOption(S.textfont.size,O.pts)||U.size;return{color:X||v.contrast(O.color),
family:da,size:S}}function a(S,O){for(var U,X,da=0;da<S.length;da++)if(U=S[da][0],X=U.trace,X.title.text){var ea=X.title.text;X._meta&&(ea=I.templateString(ea,X._meta));X=G.tester.append("text").attr("data-notex",1).text(ea).call(G.font,X.title.font).call(J.convertToTspans,O);ea=G.bBox(X.node(),!0);U.titleBox={width:ea.width,height:ea.height};X.remove()}}function d(S,O,U){var X=U.r||O.rpx1,da=O.rInscribed;if(O.startangle===O.stopangle)return{rCenter:1-da,scale:0,rotate:0,textPosAngle:0};var ea=O.ring,
ca=1===ea&&Math.abs(O.startangle-O.stopangle)===2*Math.PI,ia=O.halfangle,ha=O.midangle;U=U.trace.insidetextorientation;var fa="horizontal"===U,na="tangential"===U,sa="radial"===U;U="auto"===U;var ua=[];if(!U){var ta=function(ma,pa){var za=O.startangle,qa=O.stopangle;if(za>ma&&ma>qa||za<ma&&ma<qa)za=Math.abs(ma-O.startangle),qa=Math.abs(ma-O.stopangle),za=za<qa?za:qa,va="tan"===pa?l(S,X,ea,za,0):e(S,X,ea,za,Math.PI/2),va.textPosAngle=ma,ua.push(va)},oa;if(fa||na){for(oa=4;-4<=oa;oa-=2)ta(Math.PI*oa,
"tan");for(oa=4;-4<=oa;oa-=2)ta(Math.PI*(oa+1),"tan")}if(fa||sa){for(oa=4;-4<=oa;oa-=2)ta(Math.PI*(oa+1.5),"rad");for(oa=4;-4<=oa;oa-=2)ta(Math.PI*(oa+.5),"rad")}}if(ca||U||fa){var va={scale:da*X*2/Math.sqrt(S.width*S.width+S.height*S.height),rCenter:1-da,rotate:0};va.textPosAngle=(O.startangle+O.stopangle)/2;if(1<=va.scale)return va;ua.push(va)}if(U||sa)va=e(S,X,ea,ia,ha),va.textPosAngle=(O.startangle+O.stopangle)/2,ua.push(va);if(U||na)va=l(S,X,ea,ia,ha),va.textPosAngle=(O.startangle+O.stopangle)/
2,ua.push(va);for(ia=ca=da=0;ia<ua.length&&(ha=ua[ia].scale,ca<ha&&(ca=ha,da=ia),U||!(1<=ca));ia++);return ua[da]}function e(S,O,U,X,da){O=Math.max(0,O-2*H);var ea=S.width/S.height;U=k(ea,X,O,U);O=U/O;return{scale:2*U/S.height,rCenter:Math.cos(O)-ea*O,rotate:(180/Math.PI*da+720)%180-90}}function l(S,O,U,X,da){O=Math.max(0,O-2*H);var ea=S.height/S.width;U=k(ea,X,O,U);O=U/O;return{scale:2*U/S.width,rCenter:Math.cos(O)-ea*O,rotate:(180/Math.PI*(da+Math.PI/2)+720)%180-90}}function k(S,O,U,X){O=S+1/(2*
Math.tan(O));return U*Math.min(1/(Math.sqrt(O*O+.5)+O),X/(Math.sqrt(S*S+X/2)+S))}function c(S,O){var U=O.pxmid[0];O=O.pxmid[1];var X=S.width/2;S=S.height/2;0>U&&(X*=-1);0>O&&(S*=-1);return{scale:1,rCenter:1,rotate:0,x:X+Math.abs(S)*(0<X?1:-1)/2,y:S/(1+U*U/(O*O)),outside:!0}}function f(S,O){var U=S.trace,X=S.cx,da=S.cy,ea=0;var ca=0+U.title.font.size;var ia=q(U);-1!==U.title.position.indexOf("top")?(da-=(1+ia)*S.r,ca-=S.titleBox.height):-1!==U.title.position.indexOf("bottom")&&(da+=(1+ia)*S.r);var ha=
S.trace.aspectratio;ha=S.r/(void 0===ha?1:ha);var fa=O.w*(U.domain.x[1]-U.domain.x[0])/2;-1!==U.title.position.indexOf("left")?(fa+=ha,X-=(1+ia)*ha,ea+=S.titleBox.width/2):-1!==U.title.position.indexOf("center")?fa*=2:-1!==U.title.position.indexOf("right")&&(fa+=ha,X+=(1+ia)*ha,ea-=S.titleBox.width/2);ia=fa/S.titleBox.width;S=g(S,O)/S.titleBox.height;return{x:X,y:da,scale:Math.min(ia,S),tx:ea,ty:ca}}function g(S,O){var U=S.trace;return Math.min(S.titleBox.height,O.h*(U.domain.y[1]-U.domain.y[0])/
2)}function q(S){var O=S.pull;if(!O)return 0;var U;if(Array.isArray(O))for(U=O=0;U<S.pull.length;U++)S.pull[U]>O&&(O=S.pull[U]);return O}function t(S,O){function U(pa,za){return pa.pxmid[1]-za.pxmid[1]}function X(pa,za){return za.pxmid[1]-pa.pxmid[1]}function da(pa,za){za||(za={});var qa=za.labelExtraY+(ca?za.yLabelMax:za.yLabelMin);za=ca?pa.yLabelMin:pa.yLabelMax;var Ca=ca?pa.yLabelMax:pa.yLabelMin,Ka=pa.cyFinal+fa(pa.px0[1],pa.px1[1]),Oa=qa-za;0<Oa*na&&(pa.labelExtraY=Oa);if(Array.isArray(O.pull))for(qa=
0;qa<va.length;qa++){var kb=va[qa];kb===pa||(L.castOption(O.pull,pa.pts)||0)>=(L.castOption(O.pull,kb.pts)||0)||(0<(pa.pxmid[1]-kb.pxmid[1])*na?(Oa=kb.cyFinal+fa(kb.px0[1],kb.px1[1]),Oa=Oa-za-pa.labelExtraY,0<Oa*na&&(pa.labelExtraY+=Oa)):0<(Ca+pa.labelExtraY-Ka)*na&&(Oa=3*ua*Math.abs(qa-va.indexOf(pa)),kb=kb.cxFinal+sa(kb.px0[0],kb.px1[0]),Oa=kb+Oa-(pa.cxFinal+pa.pxmid[0])-pa.labelExtraX,0<Oa*ua&&(pa.labelExtraX+=Oa)))}}var ea,ca,ia;for(ca=0;2>ca;ca++){var ha=ca?U:X;var fa=ca?Math.max:Math.min;var na=
ca?1:-1;for(ea=0;2>ea;ea++){var sa=ea?Math.max:Math.min;var ua=ea?1:-1;var ta=S[ca][ea];ta.sort(ha);var oa=S[1-ca][ea];var va=oa.concat(ta);var ma=[];for(ia=0;ia<ta.length;ia++)void 0!==ta[ia].yLabelMid&&ma.push(ta[ia]);ta=!1;for(ia=0;ca&&ia<oa.length;ia++)if(void 0!==oa[ia].yLabelMid){ta=oa[ia];break}for(ia=0;ia<ma.length;ia++)oa=ia&&ma[ia-1],ta&&!ia&&(oa=ta),da(ma[ia],oa)}}}function u(S,O){for(var U=[],X=0;X<S.length;X++){var da=S[X][0],ea=da.trace,ca=ea.domain,ia=O.w*(ca.x[1]-ca.x[0]);ca=O.h*(ca.y[1]-
ca.y[0]);ea.title.text&&"middle center"!==ea.title.position&&(ca-=g(da,O));ia/=2;var ha=ca/2;"funnelarea"!==ea.type||ea.scalegroup||(ha/=ea.aspectratio);da.r=Math.min(ia,ha)/(1+q(ea));da.cx=O.l+O.w*(ea.domain.x[1]+ea.domain.x[0])/2;da.cy=O.t+O.h*(1-ea.domain.y[0])-ca/2;ea.title.text&&-1!==ea.title.position.indexOf("bottom")&&(da.cy-=g(da,O));ea.scalegroup&&-1===U.indexOf(ea.scalegroup)&&U.push(ea.scalegroup)}for(ea=0;ea<U.length;ea++){ca=Infinity;ia=U[ea];for(X=0;X<S.length;X++)if(O=S[X][0],da=O.trace,
da.scalegroup===ia){if("pie"===da.type)var fa=O.r*O.r;else"funnelarea"===da.type&&(1<da.aspectratio?(fa=O.r,ha=fa/da.aspectratio):(ha=O.r,fa=ha*da.aspectratio),fa*=(1+da.baseratio)/2,fa*=ha);ca=Math.min(ca,fa/O.vTotal)}for(X=0;X<S.length;X++)O=S[X][0],da=O.trace,da.scalegroup===ia&&(ha=ca*O.vTotal,"funnelarea"===da.type&&(ha/=(1+da.baseratio)/2,ha/=da.aspectratio),O.r=Math.sqrt(ha))}}function w(S){var O=S[0],U=O.r,X=O.trace,da=X.rotation*Math.PI/180,ea=2*Math.PI/O.vTotal,ca="px0",ia="px1",ha;if("counterclockwise"===
X.direction){for(ha=0;ha<S.length&&S[ha].hidden;ha++);if(ha===S.length)return;da+=ea*S[ha].v;ea*=-1;ca="px1";ia="px0"}var fa=x(U,da);for(ha=0;ha<S.length;ha++){var na=S[ha];if(!na.hidden){na[ca]=fa;na.startangle=da;da+=ea*na.v/2;na.pxmid=x(U,da);na.midangle=da;da+=ea*na.v/2;fa=x(U,da);na.stopangle=da;na[ia]=fa;na.largeArc=na.v>O.vTotal/2?1:0;na.halfangle=Math.PI*Math.min(na.v/O.vTotal,.5);na.ring=1-X.hole;var sa=na;na=na.v!==O.vTotal||O.trace.hole?Math.min(1/(1+1/Math.sin(na.halfangle)),na.ring/2):
1;sa.rInscribed=na}}}function x(S,O){return[S*Math.sin(O),-S*Math.cos(O)]}function E(S,O,U){var X=S._fullLayout,da=U.trace,ea=da.texttemplate,ca=da.textinfo;if(!ea&&ca&&"none"!==ca){var ia=ca.split("+"),ha=-1!==ia.indexOf("label"),fa=-1!==ia.indexOf("text");ca=-1!==ia.indexOf("value");ia=-1!==ia.indexOf("percent");var na=X.separators;ha=ha?[O.label]:[];fa&&(fa=L.getFirstFilled(da.text,O.pts),Q(fa)&&ha.push(fa));ca&&ha.push(L.formatPieValue(O.v,na));ia&&ha.push(L.formatPiePercent(O.v/U.vTotal,na));
O.text=ha.join("\x3cbr\x3e")}if(ea)if(ea=I.castOption(da,O.i,"texttemplate")){U={label:O.label,value:O.v,valueLabel:L.formatPieValue(O.v,X.separators),percent:O.v/U.vTotal,percentLabel:L.formatPiePercent(O.v/U.vTotal,X.separators),color:O.color,text:O.text,customdata:I.castOption(da,O.i,"customdata")};X=L.getFirstFilled(da.text,O.pts);if(Q(X)||""===X)U.text=X;O.text=I.texttemplateString(ea,U,S._fullLayout._d3locale,U,da._meta||{})}else O.text=""}function F(S,O){var U=S.rotate*Math.PI/180,X=Math.cos(U);
U=Math.sin(U);var da=(O.left+O.right)/2;O=(O.top+O.bottom)/2;S.textX=da*X-O*U;S.textY=da*U+O*X;S.noCenter=!0}var z=b("d3"),B=b("../../plots/plots"),C=b("../../components/fx"),v=b("../../components/color"),G=b("../../components/drawing"),I=b("../../lib"),J=b("../../lib/svg_text_utils");D=b("../bar/uniform_text");var K=D.recordMinTextSize,N=D.clearMinTextSize,H=b("../bar/constants").TEXTPAD,L=b("./helpers"),P=b("./event_data"),Q=b("../../lib").isValidTextValue;y.exports={plot:function(S,O){var U=S._fullLayout,
X=U._size;N("pie",U);a(O,S);u(O,X);var da=I.makeTraceGroups(U._pielayer,O,"trace").each(function(ea){var ca=z.select(this),ia=ea[0],ha=ia.trace;w(ea);ca.attr("stroke-linejoin","round");ca.each(function(){var fa=z.select(this).selectAll("g.slice").data(ea);fa.enter().append("g").classed("slice",!0);fa.exit().remove();var na=[[[],[]],[[],[]]],sa=!1;fa.each(function(va,ma){function pa(nb,Ta,fb,ab){return"a"+ab*ia.r+","+ab*ia.r+" 0 "+va.largeArc+(fb?" 1 ":" 0 ")+ab*(Ta[0]-nb[0])+","+ab*(Ta[1]-nb[1])}
if(va.hidden)z.select(this).selectAll("path,g").remove();else{va.pointNumber=va.i;va.curveNumber=ha.index;na[0>va.pxmid[1]?0:1][0>va.pxmid[0]?0:1].push(va);var za=ia.cx,qa=ia.cy,Ca=z.select(this),Ka=Ca.selectAll("path.surface").data([va]);Ka.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});Ca.call(m,S,ea);if(ha.pull){var Oa=+L.castOption(ha.pull,va.pts)||0;0<Oa&&(za+=Oa*va.pxmid[0],qa+=Oa*va.pxmid[1])}va.cxFinal=za;va.cyFinal=qa;Oa=ha.hole;if(va.v===ia.vTotal){var kb="M"+
(za+va.px0[0])+","+(qa+va.px0[1])+pa(va.px0,va.pxmid,!0,1)+pa(va.pxmid,va.px0,!0,1)+"Z";Oa?Ka.attr("d","M"+(za+Oa*va.px0[0])+","+(qa+Oa*va.px0[1])+pa(va.px0,va.pxmid,!1,Oa)+pa(va.pxmid,va.px0,!1,Oa)+"Z"+kb):Ka.attr("d",kb)}else if(kb=pa(va.px0,va.px1,!0,1),Oa){var mb=1-Oa;Ka.attr("d","M"+(za+Oa*va.px1[0])+","+(qa+Oa*va.px1[1])+pa(va.px1,va.px0,!1,Oa)+"l"+mb*va.px0[0]+","+mb*va.px0[1]+kb+"Z")}else Ka.attr("d","M"+za+","+qa+"l"+va.px0[0]+","+va.px0[1]+kb+"Z");E(S,va,ia);var tb=L.castOption(ha.textposition,
va.pts);Ca=Ca.selectAll("g.slicetext").data(va.text&&"none"!==tb?[0]:[]);Ca.enter().append("g").classed("slicetext",!0);Ca.exit().remove();Ca.each(function(){var nb=I.ensureSingle(z.select(this),"text","",function(Ea){Ea.attr("data-notex",1)}),Ta=I.ensureUniformFontSize(S,"outside"===tb?p(ha,va,U.font):h(ha,va,U.font));nb.text(va.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(G.font,Ta).call(J.convertToTspans,S);var fb=G.bBox(nb.node());if("outside"===tb)var ab=c(fb,va);
else ab=d(fb,va,ia),"auto"===tb&&1>ab.scale&&(fb=I.ensureUniformFontSize(S,ha.outsidetextfont),nb.call(G.font,fb),fb=G.bBox(nb.node()),ab=c(fb,va));var ra=ab.textPosAngle;ra=void 0===ra?va.pxmid:x(ia.r,ra);ab.targetX=za+ra[0]*ab.rCenter+(ab.x||0);ab.targetY=qa+ra[1]*ab.rCenter+(ab.y||0);F(ab,fb);ab.outside&&(ra=ab.targetY,va.yLabelMin=ra-fb.height/2,va.yLabelMid=ra,va.yLabelMax=ra+fb.height/2,va.labelExtraX=0,va.labelExtraY=0,sa=!0);ab.fontSize=Ta.size;K(ha.type,ab,U);ea[ma].transform=ab;nb.attr("transform",
I.getTextTransform(ab))})}});var ua=z.select(this).selectAll("g.titletext").data(ha.title.text?[0]:[]);ua.enter().append("g").classed("titletext",!0);ua.exit().remove();ua.each(function(){var va=I.ensureSingle(z.select(this),"text","",function(pa){pa.attr("data-notex",1)}),ma=ha.title.text;ha._meta&&(ma=I.templateString(ma,ha._meta));va.text(ma).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(G.font,ha.title.font).call(J.convertToTspans,S);ma="middle center"===ha.title.position?
{x:ia.cx,y:ia.cy,scale:ia.trace.hole*ia.r*2/Math.sqrt(ia.titleBox.width*ia.titleBox.width+ia.titleBox.height*ia.titleBox.height),tx:0,ty:-ia.titleBox.height/2+ia.trace.title.font.size}:f(ia,X);va.attr("transform","translate("+ma.x+","+ma.y+")"+(1>ma.scale?"scale("+ma.scale+")":"")+"translate("+ma.tx+","+ma.ty+")")});sa&&t(na,ha);n(fa,ha);if(sa&&ha.automargin){fa=G.bBox(ca.node());ua=ha.domain;var ta=(.5*X.w*(ua.x[1]-ua.x[0])-ia.r)/X.w,oa=(.5*X.h*(ua.y[1]-ua.y[0])-ia.r)/X.h;B.autoMargin(S,"pie."+ha.uid+
".automargin",{xl:ua.x[0]-ta,xr:ua.x[1]+ta,yb:ua.y[0]-oa,yt:ua.y[1]+oa,l:Math.max(ia.cx-ia.r-fa.left,0),r:Math.max(fa.right-(ia.cx+ia.r),0),b:Math.max(fa.bottom-(ia.cy+ia.r),0),t:Math.max(ia.cy-ia.r-fa.top,0),pad:5})}})});setTimeout(function(){da.selectAll("tspan").each(function(){var ea=z.select(this);ea.attr("dy")&&ea.attr("dy",ea.attr("dy"))})},0)},formatSliceLabel:E,transformInsideText:d,determineInsideTextFont:h,positionTitleOutside:f,prerenderTitles:a,layoutAreas:u,attachFxHandlers:m,computeTransform:F}},
{"../../components/color":615,"../../components/drawing":637,"../../components/fx":655,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/plots":860,"../bar/constants":892,"../bar/uniform_text":906,"./event_data":1133,"./helpers":1134,d3:169}],1139:[function(b,y,D){var n=b("d3"),m=b("./style_one"),p=b("../bar/uniform_text").resizeText;y.exports=function(h){var a=h._fullLayout._pielayer.selectAll(".trace");p(h,a,"pie");a.each(function(d){var e=d[0].trace;d=n.select(this);d.style({opacity:e.opacity});
d.selectAll("path.surface").each(function(l){n.select(this).call(m,l,e)})})}},{"../bar/uniform_text":906,"./style_one":1140,d3:169}],1140:[function(b,y,D){var n=b("../../components/color"),m=b("./helpers").castOption;y.exports=function(p,h,a){var d=a.marker.line;a=m(d.color,h.pts)||n.defaultLine;d=m(d.width,h.pts)||0;p.style("stroke-width",d).call(n.fill,h.color).call(n.stroke,a)}},{"../../components/color":615,"./helpers":1134}],1141:[function(b,y,D){b=b("../scatter/attributes");y.exports={x:b.x,
y:b.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:b.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},
border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1155}],1142:[function(b,y,D){function n(d,e){this.scene=d;this.uid=e;this.type="pointcloud";this.pickXData=[];this.pickYData=[];this.xData=[];this.yData=[];this.textLabels=[];this.color="rgb(0, 0, 0)";this.name="";this.hoverinfo="all";this.idToIndex=new Int32Array(0);this.bounds=[0,0,0,0];this.pointcloudOptions=
{positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]};this.pointcloud=m(d.glplot,this.pointcloudOptions);this.pointcloud._trace=this}var m=b("gl-pointcloud2d"),p=b("../../lib/str2rgbarray"),h=b("../../plots/cartesian/autorange").findExtremes,a=b("../scatter/get_trace_color");b=n.prototype;b.handlePick=function(d){var e=this.idToIndex[d.pointId];return{trace:this,dataCoord:d.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*
e],this.pickXYData[2*e+1]]:[this.pickXData[e],this.pickYData[e]],textLabel:Array.isArray(this.textLabels)?this.textLabels[e]:this.textLabels,color:this.color,name:this.name,pointIndex:e,hoverinfo:this.hoverinfo}};b.update=function(d){this.index=d.index;this.textLabels=d.text;this.name=d.name;this.hoverinfo=d.hoverinfo;this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.updateFast(d);this.color=a(d,{})};b.updateFast=function(d){var e=this.xData=this.pickXData=d.x,l=this.yData=this.pickYData=d.y,
k=this.pickXYData=d.xy,c=d.xbounds&&d.ybounds,f=d.indices,g=this.bounds,q;if(k){var t=k;k=k.length>>>1;if(c)g[0]=d.xbounds[0],g[2]=d.xbounds[1],g[1]=d.ybounds[0],g[3]=d.ybounds[1];else for(q=0;q<k;q++){c=t[2*q];var u=t[2*q+1];c<g[0]&&(g[0]=c);c>g[2]&&(g[2]=c);u<g[1]&&(g[1]=u);u>g[3]&&(g[3]=u)}if(!f)for(f=new Int32Array(k),q=0;q<k;q++)f[q]=q}else for(k=e.length,t=new Float32Array(2*k),f=new Int32Array(k),q=0;q<k;q++)c=e[q],u=l[q],f[q]=q,t[2*q]=c,t[2*q+1]=u,c<g[0]&&(g[0]=c),c>g[2]&&(g[2]=c),u<g[1]&&
(g[1]=u),u>g[3]&&(g[3]=u);this.idToIndex=f;this.pointcloudOptions.idToIndex=f;this.pointcloudOptions.positions=t;k=p(d.marker.color);t=p(d.marker.border.color);f=d.opacity*d.marker.opacity;k[3]*=f;this.pointcloudOptions.color=k;k=d.marker.blend;null===k&&(k=100>e.length||100>l.length);this.pointcloudOptions.blend=k;t[3]*=f;this.pointcloudOptions.borderColor=t;t=Math.max(d.marker.sizemax,d.marker.sizemin);this.pointcloudOptions.sizeMin=d.marker.sizemin;this.pointcloudOptions.sizeMax=t;this.pointcloudOptions.areaRatio=
d.marker.border.arearatio;this.pointcloud.update(this.pointcloudOptions);e=this.scene.xaxis;l=this.scene.yaxis;t=t/2||.5;d._extremes[e._id]=h(e,[g[0],g[2]],{ppad:t});d._extremes[l._id]=h(l,[g[1],g[3]],{ppad:t})};b.dispose=function(){this.pointcloud.dispose()};y.exports=function(d,e){d=new n(d,e.uid);d.update(e);return d}},{"../../lib/str2rgbarray":772,"../../plots/cartesian/autorange":796,"../scatter/get_trace_color":1165,"gl-pointcloud2d":303}],1143:[function(b,y,D){var n=b("../../lib"),m=b("./attributes");
y.exports=function(p,h,a){function d(e,l){return n.coerce(p,h,m,e,l)}d("x");d("y");d("xbounds");d("ybounds");p.xy&&p.xy instanceof Float32Array&&(h.xy=p.xy);p.indices&&p.indices instanceof Int32Array&&(h.indices=p.indices);d("text");d("marker.color",a);d("marker.opacity");d("marker.blend");d("marker.sizemin");d("marker.sizemax");d("marker.border.color",a);d("marker.border.arearatio");h._length=null}},{"../../lib":749,"./attributes":1141}],1144:[function(b,y,D){y.exports={attributes:b("./attributes"),
supplyDefaults:b("./defaults"),calc:b("../scatter3d/calc"),plot:b("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":837,"../scatter3d/calc":1183,"./attributes":1141,"./convert":1142,"./defaults":1143}],1145:[function(b,y,D){D=b("../../plots/font_attributes");var n=b("../../plots/attributes"),m=b("../../components/color/attributes"),p=b("../../components/fx/attributes"),h=b("../../plots/domain").attributes,
a=b("../../plots/template_attributes").hovertemplateAttrs,d=b("../../components/colorscale/attributes"),e=b("../../plot_api/plot_template").templatedArray,l=b("../../lib/extend").extendFlat,k=b("../../plot_api/edit_types").overrideAll;b("../../constants/docs");(y.exports=k({hoverinfo:l({},n.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:p.hoverlabel,domain:h({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",
dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:D({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,
arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:p.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0},width:{valType:"number",
min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:p.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:e("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:l(d().colorscale,
{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":614,"../../components/colorscale/attributes":622,"../../components/fx/attributes":646,"../../constants/docs":719,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/font_attributes":825,"../../plots/template_attributes":875}],1146:[function(b,y,D){function n(c,f){var g=c._fullData[f],
q=c._fullLayout,t=q.dragmode,u=g._bgRect;if("pan"!==t&&"zoom"!==t){a(u,"pan"===q.dragmode?"move":"crosshair");q={_id:"x",c2p:l.identity,_offset:g._sankey.translateX,_length:g._sankey.width};g={_id:"y",c2p:l.identity,_offset:g._sankey.translateY,_length:g._sankey.height};var w={gd:c,element:u.node(),plotinfo:{id:f,xaxis:q,yaxis:g,fillRangeItems:l.noop},subplot:f,xaxes:[q],yaxes:[g],doneFnCompleted:function(x){for(var E=c._fullData[f],F=E.node.groups.slice(),z=[],B=0;B<x.length;B++){a:{var C=E._sankey.graph.nodes;
for(var v=0;v<C.length;v++)if(C[v].pointNumber===x[B].pointNumber){C=C[v];break a}C=void 0}if(C)if(C.group){for(v=0;v<C.childrenNodes.length;v++)z.push(C.childrenNodes[v].pointNumber);F[C.pointNumber-E.node._count]=!1}else z.push(C.pointNumber)}x=F.filter(Boolean).concat([z]);k.call("_guiRestyle",c,{"node.groups":[x]},f)},prepFn:function(x,E,F){e(x,E,F,w,t)}};d.init(w)}}y=b("../../plot_api/edit_types").overrideAll;var m=b("../../plots/get_data").getModuleCalcData,p=b("./plot"),h=b("../../components/fx/layout_attributes"),
a=b("../../lib/setcursor"),d=b("../../components/dragelement"),e=b("../../plots/cartesian/select").prepSelect,l=b("../../lib"),k=b("../../registry");D.name="sankey";D.baseLayoutAttrOverrides=y({hoverlabel:h.hoverlabel},"plot","nested");D.plot=function(c){var f=m(c.calcdata,"sankey")[0];p(c,f);D.updateFx(c)};D.clean=function(c,f,g,q){c=q._has&&q._has("sankey");f=f._has&&f._has("sankey");c&&!f&&(q._paperdiv.selectAll(".sankey").remove(),q._paperdiv.selectAll(".bgsankey").remove())};D.updateFx=function(c){for(var f=
0;f<c._fullData.length;f++)n(c,f)}},{"../../components/dragelement":634,"../../components/fx/layout_attributes":656,"../../lib":749,"../../lib/setcursor":769,"../../plot_api/edit_types":780,"../../plots/cartesian/select":816,"../../plots/get_data":834,"../../registry":880,"./plot":1151}],1147:[function(b,y,D){function n(l,k,c){for(var f=p.init2dArray(l,0),g=0;g<Math.min(k.length,c.length);g++)if(p.isIndex(k[g],l)&&p.isIndex(c[g],l)){if(k[g]===c[g])return!0;f[k[g]].push(c[g])}return m(f).components.some(function(q){return 1<
q.length})}var m=b("strongly-connected-components"),p=b("../../lib"),h=b("../../lib/gup").wrap,a=p.isArrayOrTypedArray,d=p.isIndex,e=b("../../components/colorscale");y.exports=function(l,k){var c=k.node,f=k.link;l=[];var g=a(f.color),q=a(f.customdata),t={},u={},w=f.colorscales.length,x;for(x=0;x<w;x++){var E=f.colorscales[x],F=e.extractScale(E,{cLetter:"c"});F=e.makeColorScaleFunc(F);u[E.label]=F}for(x=w=0;x<f.value.length;x++)f.source[x]>w&&(w=f.source[x]),f.target[x]>w&&(w=f.target[x]);w+=1;k.node._count=
w;k=k.node.groups;E={};for(x=0;x<k.length;x++){var z=k[x];for(F=0;F<z.length;F++){var B=z[F],C=w+x;E.hasOwnProperty(B)?p.warn("Node "+B+" is already part of a group."):E[B]=C}}F=[];z=[];for(x=0;x<f.value.length;x++){B=f.value[x];C=f.source[x];var v=f.target[x];if(0<B&&d(C,w)&&d(v,w)&&(!E.hasOwnProperty(C)||!E.hasOwnProperty(v)||E[C]!==E[v])){E.hasOwnProperty(v)&&(v=E[v]);E.hasOwnProperty(C)&&(C=E[C]);C=+C;v=+v;t[C]=t[v]=!0;var G="";f.label&&f.label[x]&&(G=f.label[x]);var I=null;G&&u.hasOwnProperty(G)&&
(I=u[G]);l.push({pointNumber:x,label:G,color:g?f.color[x]:f.color,customdata:q?f.customdata[x]:f.customdata,concentrationscale:I,source:C,target:v,value:+B});F.push(C);z.push(v)}}f=w+k.length;q=a(c.color);u=a(c.customdata);g=[];for(x=0;x<f;x++)t[x]&&g.push({group:x>w-1,childrenNodes:[],pointNumber:x,label:c.label[x],color:q?c.color[x]:c.color,customdata:u?c.customdata[x]:c.customdata});c=!1;n(f,F,z)&&(c=!0);return h({circular:c,_nodes:g,_links:l,_groups:k,_groupLookup:E})}},{"../../components/colorscale":627,
"../../lib":749,"../../lib/gup":746,"strongly-connected-components":541}],1148:[function(b,y,D){y.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",
nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1149:[function(b,y,D){function n(c,f){function g(q,t){return m.coerce(c,f,p.link.colorscales,q,t)}g("label");g("cmin");g("cmax");g("colorscale")}var m=b("../../lib"),p=b("./attributes"),h=b("../../components/color"),a=b("tinycolor2"),d=b("../../plots/domain").defaults,e=b("../../components/fx/hoverlabel_defaults"),l=b("../../plot_api/plot_template"),k=b("../../plots/array_container_defaults");y.exports=function(c,f,g,q){function t(v,
G){return m.coerce(c,f,p,v,G)}function u(v,G){return m.coerce(x,E,p.node,v,G)}function w(v,G){return m.coerce(z,B,p.link,v,G)}g=m.extendDeep(q.hoverlabel,c.hoverlabel);var x=c.node,E=l.newContainer(f,"node");u("label");u("groups");u("x");u("y");u("pad");u("thickness");u("line.color");u("line.width");u("hoverinfo",c.hoverinfo);e(x,E,u,g);u("hovertemplate");var F=q.colorway;u("color",E.label.map(function(v,G){return h.addOpacity(F[G%F.length],.8)}));u("customdata");var z=c.link||{},B=l.newContainer(f,
"link");w("label");w("source");w("target");w("value");w("line.color");w("line.width");w("hoverinfo",c.hoverinfo);e(z,B,w,g);w("hovertemplate");g=.333>a(q.paper_bgcolor).getLuminance()?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";w("color",m.repeat(g,B.value.length));w("customdata");k(z,B,{name:"colorscales",handleItemDefaults:n});d(f,q,t);t("orientation");t("valueformat");t("valuesuffix");var C;E.x.length&&E.y.length&&(C="freeform");t("arrangement",C);m.coerceFont(t,"textfont",m.extendFlat({},
q.font));f._length=null}},{"../../components/color":615,"../../components/fx/hoverlabel_defaults":653,"../../lib":749,"../../plot_api/plot_template":787,"../../plots/array_container_defaults":793,"../../plots/domain":824,"./attributes":1145,tinycolor2:548}],1150:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),moduleType:"trace",name:"sankey",basePlotModule:b("./base_plot"),selectPoints:b("./select.js"),categories:["noOpacity"],
meta:{}}},{"./attributes":1145,"./base_plot":1146,"./calc":1147,"./defaults":1149,"./plot":1151,"./select.js":1153}],1151:[function(b,y,D){function n(F){return""!==F}function m(F,z){return F.filter(function(B){return B.key===z.traceId})}function p(F,z){g.select(F).select("path").style("fill-opacity",z);g.select(F).select("rect").style("fill-opacity",z)}function h(F){g.select(F).select("text.name").style("fill","black")}function a(F){return function(z){return-1!==F.node.sourceLinks.indexOf(z.link)||
-1!==F.node.targetLinks.indexOf(z.link)}}function d(F){return function(z){return-1!==z.node.sourceLinks.indexOf(F.link)||-1!==z.node.targetLinks.indexOf(F.link)}}function e(F,z,B){z&&B&&m(B,z).selectAll("."+x.sankeyLink).filter(a(z)).call(k.bind(0,z,B,!1))}function l(F,z,B){z&&B&&m(B,z).selectAll("."+x.sankeyLink).filter(a(z)).call(c.bind(0,z,B,!1))}function k(F,z,B,C){var v=C.datum().link.label;C.style("fill-opacity",function(G){if(!G.link.concentrationscale)return.4});v&&m(z,F).selectAll("."+x.sankeyLink).filter(function(G){return G.link.label===
v}).style("fill-opacity",function(G){if(!G.link.concentrationscale)return.4});B&&m(z,F).selectAll("."+x.sankeyNode).filter(d(F)).call(e)}function c(F,z,B,C){var v=C.datum().link.label;C.style("fill-opacity",function(G){return G.tinyColorAlpha});v&&m(z,F).selectAll("."+x.sankeyLink).filter(function(G){return G.link.label===v}).style("fill-opacity",function(G){return G.tinyColorAlpha});B&&m(z,F).selectAll(x.sankeyNode).filter(d(F)).call(l)}function f(F,z){F=w.nestedProperty(F.hoverlabel||{},z).get();
return Array.isArray(F)?!1:F}var g=b("d3"),q=b("./render"),t=b("../../components/fx"),u=b("../../components/color"),w=b("../../lib"),x=b("./constants").cn,E=w._;y.exports=function(F,z){for(var B=F._fullLayout,C=B._paper,v=B._size,G=0;G<F._fullData.length;G++)if(F._fullData[G].visible&&F._fullData[G].type===x.sankey&&!F._fullData[G]._viewInitial){var I=F._fullData[G].node;F._fullData[G]._viewInitial={node:{groups:I.groups.slice(),x:I.x.slice(),y:I.y.slice()}}}var J=E(F,"source:")+" ",K=E(F,"target:")+
" ",N=E(F,"concentration:")+" ",H=E(F,"incoming flow count:")+" ",L=E(F,"outgoing flow count:")+" ";q(F,C,z,{width:v.w,height:v.h,margin:{t:v.t,r:v.r,b:v.b,l:v.l}},{linkEvents:{hover:function(P,Q,S){!1!==F._fullLayout.hovermode&&(g.select(P).call(k.bind(0,Q,S,!0)),"skip"!==Q.link.trace.link.hoverinfo&&(Q.link.fullData=Q.link.trace,F.emit("plotly_hover",{event:g.event,points:[Q.link]})))},follow:function(P,Q){function S(ia){if(ia.circular){var ha=(ia.circularPathData.leftInnerExtent+ia.circularPathData.rightInnerExtent)/
2;var fa=ia.circularPathData.verticalFullExtent}else ha=(ia.source.x1+ia.target.x0)/2,fa=(ia.y0+ia.y1)/2;ha=[ha,fa];"v"===ia.trace.orientation&&ha.reverse();ha[0]+=Q.parent.translateX;ha[1]+=Q.parent.translateY;return ha}if(!1!==F._fullLayout.hovermode&&(P=Q.link.trace.link,"none"!==P.hoverinfo&&"skip"!==P.hoverinfo)){for(var O=[],U=0,X=0;X<Q.flow.links.length;X++){var da=Q.flow.links[X];if("closest"!==F._fullLayout.hovermode||Q.link.pointNumber===da.pointNumber){Q.link.pointNumber===da.pointNumber&&
(U=X);da.fullData=da.trace;P=Q.link.trace.link;var ea=S(da),ca={valueLabel:g.format(Q.valueFormat)(da.value)+Q.valueSuffix};O.push({x:ea[0],y:ea[1],name:ca.valueLabel,text:[da.label||"",J+da.source.label,K+da.target.label,da.concentrationscale?N+g.format("%0.2f")(da.flow.labelConcentration):""].filter(n).join("\x3cbr\x3e"),color:f(P,"bgcolor")||u.addOpacity(da.color,1),borderColor:f(P,"bordercolor"),fontFamily:f(P,"font.family"),fontSize:f(P,"font.size"),fontColor:f(P,"font.color"),nameLength:f(P,
"namelength"),textAlign:f(P,"align"),idealAlign:g.event.x<ea[0]?"right":"left",hovertemplate:P.hovertemplate,hovertemplateLabels:ca,eventData:[da]})}}t.loneHover(O,{container:B._hoverlayer.node(),outerContainer:B._paper.node(),gd:F,anchorIndex:U}).each(function(){Q.link.concentrationscale||p(this,.65);h(this)})}},unhover:function(P,Q,S){!1!==F._fullLayout.hovermode&&(g.select(P).call(c.bind(0,Q,S,!0)),"skip"!==Q.link.trace.link.hoverinfo&&(Q.link.fullData=Q.link.trace,F.emit("plotly_unhover",{event:g.event,
points:[Q.link]})),t.loneUnhover(B._hoverlayer.node()))},select:function(P,Q){P=Q.link;P.originalEvent=g.event;F._hoverdata=[P];t.click(F,{target:!0})}},nodeEvents:{hover:function(P,Q,S){!1!==F._fullLayout.hovermode&&(g.select(P).call(e,Q,S),"skip"!==Q.node.trace.node.hoverinfo&&(Q.node.fullData=Q.node.trace,F.emit("plotly_hover",{event:g.event,points:[Q.node]})))},follow:function(P,Q){if(!1!==F._fullLayout.hovermode){var S=Q.node.trace.node;if("none"!==S.hoverinfo&&"skip"!==S.hoverinfo){P=g.select(P).select("."+
x.nodeRect);var O=F._fullLayout._paperdiv.node().getBoundingClientRect(),U=P.node().getBoundingClientRect();P=U.left-2-O.left;var X=U.right+2-O.left;O=U.top+U.height/4-O.top;U={valueLabel:g.format(Q.valueFormat)(Q.node.value)+Q.valueSuffix};Q.node.fullData=Q.node.trace;Q=t.loneHover({x0:P,x1:X,y:O,name:g.format(Q.valueFormat)(Q.node.value)+Q.valueSuffix,text:[Q.node.label,H+Q.node.targetLinks.length,L+Q.node.sourceLinks.length].filter(n).join("\x3cbr\x3e"),color:f(S,"bgcolor")||Q.tinyColorHue,borderColor:f(S,
"bordercolor"),fontFamily:f(S,"font.family"),fontSize:f(S,"font.size"),fontColor:f(S,"font.color"),nameLength:f(S,"namelength"),textAlign:f(S,"align"),idealAlign:"left",hovertemplate:S.hovertemplate,hovertemplateLabels:U,eventData:[Q.node]},{container:B._hoverlayer.node(),outerContainer:B._paper.node(),gd:F});p(Q,.85);h(Q)}}},unhover:function(P,Q,S){!1!==F._fullLayout.hovermode&&(g.select(P).call(l,Q,S),"skip"!==Q.node.trace.node.hoverinfo&&(Q.node.fullData=Q.node.trace,F.emit("plotly_unhover",{event:g.event,
points:[Q.node]})),t.loneUnhover(B._hoverlayer.node()))},select:function(P,Q,S){var O=Q.node;O.originalEvent=g.event;F._hoverdata=[O];g.select(P).call(l,Q,S);t.click(F,{target:!0})}}})}},{"../../components/color":615,"../../components/fx":655,"../../lib":749,"./constants":1148,"./render":1152,d3:169}],1152:[function(b,y,D){function n(ca,ia,ha){function fa(fb){fb.forEach(function(ab){var ra=0;var Ea=ab.length,Ia;ab.sort(function(rb,ib){return rb.y0-ib.y0});for(Ia=0;Ia<Ea;++Ia){var Va=ab[Ia];Va.y0>=
ra||(ra-=Va.y0,1E-6<ra&&(Va.y0+=ra,Va.y1+=ra));ra=Va.y1+oa}})}function na(fb){var ab=fb.map(function(Na,Za){return{x0:Na.x0,index:Za}}).sort(function(Na,Za){return Na.x0-Za.x0}),ra=[],Ea=-1,Ia=-Infinity;for(kb=0;kb<ab.length;kb++){var Va=fb[ab[kb].index];if(Va.x0>Ia+va){Ea+=1;var rb=Va.x0}Ia=Va.x0;ra[Ea]||(ra[Ea]=[]);ra[Ea].push(Va);var ib=rb-Va.x0;Va.x0+=ib;Va.x1+=ib}return ra}var sa=X(ia);ia=sa.trace;var ua=ia.domain,ta="h"===ia.orientation,oa=ia.node.pad,va=ia.node.thickness,ma=ca.width*(ua.x[1]-
ua.x[0]),pa=ca.height*(ua.y[1]-ua.y[0]),za=sa._nodes,qa=sa._links,Ca=sa.circular;var Ka=Ca?P.sankeyCircular().circularLinkGap(0):L.sankey();Ka.iterations(I.sankeyIterations).size(ta?[ma,pa]:[pa,ma]).nodeWidth(va).nodePadding(oa).nodeId(function(fb){return fb.pointNumber}).nodes(za).links(qa);var Oa=Ka();Ka.nodePadding()<oa&&S.warn("node.pad was reduced to ",Ka.nodePadding()," to fit within the figure.");var kb,mb,tb;for(Ta in sa._groupLookup){za=parseInt(sa._groupLookup[Ta]);for(kb=0;kb<Oa.nodes.length;kb++)if(Oa.nodes[kb].pointNumber===
za){var nb=Oa.nodes[kb];break}nb&&(za={pointNumber:parseInt(Ta),x0:nb.x0,x1:nb.x1,y0:nb.y0,y1:nb.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]},Oa.nodes.unshift(za),nb.childrenNodes.unshift(za))}(function(){for(kb=0;kb<Oa.nodes.length;kb++){var fb=Oa.nodes[kb],ab={};for(mb=0;mb<fb.targetLinks.length;mb++){var ra=fb.targetLinks[mb];var Ea=ra.source.pointNumber+":"+ra.target.pointNumber;ab.hasOwnProperty(Ea)||(ab[Ea]=[]);ab[Ea].push(ra)}var Ia=Object.keys(ab);for(mb=0;mb<Ia.length;mb++){Ea=Ia[mb];
Ea=ab[Ea];var Va=0,rb={};for(tb=0;tb<Ea.length;tb++)ra=Ea[tb],rb[ra.label]||(rb[ra.label]=0),rb[ra.label]+=ra.value,Va+=ra.value;for(tb=0;tb<Ea.length;tb++)ra=Ea[tb],ra.flow={value:Va,labelConcentration:rb[ra.label]/Va,concentration:ra.value/Va,links:Ea},ra.concentrationscale&&(ra.color=K(ra.concentrationscale(ra.flow.labelConcentration)))}for(mb=ab=0;mb<fb.sourceLinks.length;mb++)ab+=fb.sourceLinks[mb].value;for(mb=0;mb<fb.sourceLinks.length;mb++)ra=fb.sourceLinks[mb],ra.concentrationOut=ra.value/
ab;for(mb=ab=0;mb<fb.targetLinks.length;mb++)ab+=fb.targetLinks[mb].value;for(mb=0;mb<fb.targetLinks.length;mb++)ra=fb.targetLinks[mb],ra.concenrationIn=ra.value/ab}})();if(ia.node.x.length&&ia.node.y.length){for(kb=0;kb<Math.min(ia.node.x.length,ia.node.y.length,Oa.nodes.length);kb++)if(ia.node.x[kb]&&ia.node.y[kb]){var Ta=[ia.node.x[kb]*ma,ia.node.y[kb]*pa];Oa.nodes[kb].x0=Ta[0]-va/2;Oa.nodes[kb].x1=Ta[0]+va/2;nb=Oa.nodes[kb].y1-Oa.nodes[kb].y0;Oa.nodes[kb].y0=Ta[1]-nb/2;Oa.nodes[kb].y1=Ta[1]+nb/
2}"snap"===ia.arrangement&&(za=Oa.nodes,Ta=na(za),fa(Ta));Ka.update(Oa)}return{circular:Ca,key:ha,trace:ia,guid:S.randstr(),horizontal:ta,width:ma,height:pa,nodePad:ia.node.pad,nodeLineColor:ia.node.line.color,nodeLineWidth:ia.node.line.width,linkLineColor:ia.link.line.color,linkLineWidth:ia.link.line.width,valueFormat:ia.valueformat,valueSuffix:ia.valuesuffix,textFont:ia.textfont,translateX:ua.x[0]*ca.width+ca.margin.l,translateY:ca.height-ua.y[1]*ca.height+ca.margin.t,dragParallel:ta?pa:ma,dragPerpendicular:ta?
ma:pa,arrangement:ia.arrangement,sankey:Ka,graph:Oa,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function m(ca,ia,ha){var fa=K(ia.color),na=ia.source.label+"|"+ia.target.label;ia.trace=ca.trace;ia.curveNumber=ca.trace.index;return{circular:ca.circular,key:na+"__"+ha,traceId:ca.key,pointNumber:ia.pointNumber,link:ia,tinyColorHue:N.tinyRGB(fa),tinyColorAlpha:fa.getAlpha(),linkPath:p,linkLineColor:ca.linkLineColor,linkLineWidth:ca.linkLineWidth,valueFormat:ca.valueFormat,valueSuffix:ca.valueSuffix,
sankey:ca.sankey,parent:ca,interactionState:ca.interactionState,flow:ia.flow}}function p(){return function(ca){if(ca.link.circular){var ia=ca.link,ha=ia.width/2,fa=ia.circularPathData;return"top"===ia.circularLinkType?"M "+fa.targetX+" "+(fa.targetY+ha)+" L"+fa.rightInnerExtent+" "+(fa.targetY+ha)+"A"+(fa.rightLargeArcRadius+ha)+" "+(fa.rightSmallArcRadius+ha)+" 0 0 1 "+(fa.rightFullExtent-ha)+" "+(fa.targetY-fa.rightSmallArcRadius)+"L"+(fa.rightFullExtent-ha)+" "+fa.verticalRightInnerExtent+"A"+
(fa.rightLargeArcRadius+ha)+" "+(fa.rightLargeArcRadius+ha)+" 0 0 1 "+fa.rightInnerExtent+" "+(fa.verticalFullExtent-ha)+"L"+fa.leftInnerExtent+" "+(fa.verticalFullExtent-ha)+"A"+(fa.leftLargeArcRadius+ha)+" "+(fa.leftLargeArcRadius+ha)+" 0 0 1 "+(fa.leftFullExtent+ha)+" "+fa.verticalLeftInnerExtent+"L"+(fa.leftFullExtent+ha)+" "+(fa.sourceY-fa.leftSmallArcRadius)+"A"+(fa.leftLargeArcRadius+ha)+" "+(fa.leftSmallArcRadius+ha)+" 0 0 1 "+fa.leftInnerExtent+" "+(fa.sourceY+ha)+"L"+fa.sourceX+" "+(fa.sourceY+
ha)+"L"+fa.sourceX+" "+(fa.sourceY-ha)+"L"+fa.leftInnerExtent+" "+(fa.sourceY-ha)+"A"+(fa.leftLargeArcRadius-ha)+" "+(fa.leftSmallArcRadius-ha)+" 0 0 0 "+(fa.leftFullExtent-ha)+" "+(fa.sourceY-fa.leftSmallArcRadius)+"L"+(fa.leftFullExtent-ha)+" "+fa.verticalLeftInnerExtent+"A"+(fa.leftLargeArcRadius-ha)+" "+(fa.leftLargeArcRadius-ha)+" 0 0 0 "+fa.leftInnerExtent+" "+(fa.verticalFullExtent+ha)+"L"+fa.rightInnerExtent+" "+(fa.verticalFullExtent+ha)+"A"+(fa.rightLargeArcRadius-ha)+" "+(fa.rightLargeArcRadius-
ha)+" 0 0 0 "+(fa.rightFullExtent+ha)+" "+fa.verticalRightInnerExtent+"L"+(fa.rightFullExtent+ha)+" "+(fa.targetY-fa.rightSmallArcRadius)+"A"+(fa.rightLargeArcRadius-ha)+" "+(fa.rightSmallArcRadius-ha)+" 0 0 0 "+fa.rightInnerExtent+" "+(fa.targetY-ha)+"L"+fa.targetX+" "+(fa.targetY-ha)+"Z":"M "+fa.targetX+" "+(fa.targetY-ha)+" L"+fa.rightInnerExtent+" "+(fa.targetY-ha)+"A"+(fa.rightLargeArcRadius+ha)+" "+(fa.rightSmallArcRadius+ha)+" 0 0 0 "+(fa.rightFullExtent-ha)+" "+(fa.targetY+fa.rightSmallArcRadius)+
"L"+(fa.rightFullExtent-ha)+" "+fa.verticalRightInnerExtent+"A"+(fa.rightLargeArcRadius+ha)+" "+(fa.rightLargeArcRadius+ha)+" 0 0 0 "+fa.rightInnerExtent+" "+(fa.verticalFullExtent+ha)+"L"+fa.leftInnerExtent+" "+(fa.verticalFullExtent+ha)+"A"+(fa.leftLargeArcRadius+ha)+" "+(fa.leftLargeArcRadius+ha)+" 0 0 0 "+(fa.leftFullExtent+ha)+" "+fa.verticalLeftInnerExtent+"L"+(fa.leftFullExtent+ha)+" "+(fa.sourceY+fa.leftSmallArcRadius)+"A"+(fa.leftLargeArcRadius+ha)+" "+(fa.leftSmallArcRadius+ha)+" 0 0 0 "+
fa.leftInnerExtent+" "+(fa.sourceY-ha)+"L"+fa.sourceX+" "+(fa.sourceY-ha)+"L"+fa.sourceX+" "+(fa.sourceY+ha)+"L"+fa.leftInnerExtent+" "+(fa.sourceY+ha)+"A"+(fa.leftLargeArcRadius-ha)+" "+(fa.leftSmallArcRadius-ha)+" 0 0 1 "+(fa.leftFullExtent-ha)+" "+(fa.sourceY+fa.leftSmallArcRadius)+"L"+(fa.leftFullExtent-ha)+" "+fa.verticalLeftInnerExtent+"A"+(fa.leftLargeArcRadius-ha)+" "+(fa.leftLargeArcRadius-ha)+" 0 0 1 "+fa.leftInnerExtent+" "+(fa.verticalFullExtent-ha)+"L"+fa.rightInnerExtent+" "+(fa.verticalFullExtent-
ha)+"A"+(fa.rightLargeArcRadius-ha)+" "+(fa.rightLargeArcRadius-ha)+" 0 0 1 "+(fa.rightFullExtent+ha)+" "+fa.verticalRightInnerExtent+"L"+(fa.rightFullExtent+ha)+" "+(fa.targetY+fa.rightSmallArcRadius)+"A"+(fa.rightLargeArcRadius-ha)+" "+(fa.rightSmallArcRadius-ha)+" 0 0 1 "+fa.rightInnerExtent+" "+(fa.targetY+ha)+"L"+fa.targetX+" "+(fa.targetY+ha)+"Z"}ia=ca.link.source.x1;ha=ca.link.target.x0;var na=da(ia,ha);fa=na(.5);na=na(.5);var sa=ca.link.y0-ca.link.width/2,ua=ca.link.y0+ca.link.width/2,ta=
ca.link.y1-ca.link.width/2;ca=ca.link.y1+ca.link.width/2;return"M"+ia+","+sa+"C"+fa+","+sa+" "+na+","+ta+" "+ha+","+ta+"L"+ha+","+ca+"C"+na+","+ca+" "+fa+","+ua+" "+ia+","+ua+"Z"}}function h(ca,ia){var ha=K(ia.color),fa=I.nodePadAcross,na=ca.nodePad/2;ia.dx=ia.x1-ia.x0;ia.dy=ia.y1-ia.y0;var sa=ia.dx,ua=Math.max(.5,ia.dy),ta="node_"+ia.pointNumber;ia.group&&(ta=S.randstr());ia.trace=ca.trace;ia.curveNumber=ca.trace.index;return{index:ia.pointNumber,key:ta,partOfGroup:ia.partOfGroup||!1,group:ia.group,
traceId:ca.key,trace:ca.trace,node:ia,nodePad:ca.nodePad,nodeLineColor:ca.nodeLineColor,nodeLineWidth:ca.nodeLineWidth,textFont:ca.textFont,size:ca.horizontal?ca.height:ca.width,visibleWidth:Math.ceil(sa),visibleHeight:ua,zoneX:-fa,zoneY:-na,zoneWidth:sa+2*fa,zoneHeight:ua+2*na,labelY:ca.horizontal?ia.dy/2+1:ia.dx/2+1,left:1===ia.originalLayer,sizeAcross:ca.width,forceLayouts:ca.forceLayouts,horizontal:ca.horizontal,darkBackground:128>=ha.getBrightness(),tinyColorHue:N.tinyRGB(ha),tinyColorAlpha:ha.getAlpha(),
valueFormat:ca.valueFormat,valueSuffix:ca.valueSuffix,sankey:ca.sankey,graph:ca.graph,arrangement:ca.arrangement,uniqueNodeLabelPathId:[ca.guid,ca.key,ta].join("_"),interactionState:ca.interactionState,figure:ca}}function a(ca){ca.attr("transform",function(ia){return"translate("+ia.node.x0.toFixed(3)+", "+ia.node.y0.toFixed(3)+")"})}function d(ca){ca.call(a)}function e(ca){ca.attr("width",function(ia){return ia.node.x1-ia.node.x0}).attr("height",function(ia){return ia.visibleHeight})}function l(ca){return"translate("+
ca.translateX+","+ca.translateY+")"+(ca.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function k(ca){return"translate("+(ca.horizontal?0:ca.labelY)+" "+(ca.horizontal?ca.labelY:0)+")"}function c(ca){return J.svg.line()([[ca.horizontal?ca.left?-ca.sizeAcross:ca.visibleWidth+I.nodeTextOffsetHorizontal:I.nodeTextOffsetHorizontal,0],[ca.horizontal?ca.left?-I.nodeTextOffsetHorizontal:ca.sizeAcross:ca.visibleHeight-I.nodeTextOffsetHorizontal,0]])}function f(ca){return ca.horizontal?"matrix(1 0 0 1 0 0)":
"matrix(0 1 1 0 0 0)"}function g(ca){return ca.horizontal?"scale(1 1)":"scale(-1 1)"}function q(ca){return ca.darkBackground&&!ca.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function t(ca){return ca.horizontal&&ca.left?"100%":"0%"}function u(ca,ia,ha){ca.on(".basic",null).on("mouseover.basic",function(fa){fa.interactionState.dragInProgress||fa.partOfGroup||(ha.hover(this,fa,ia),fa.interactionState.hovered=[this,fa])}).on("mousemove.basic",function(fa){fa.interactionState.dragInProgress||fa.partOfGroup||
(ha.follow(this,fa),fa.interactionState.hovered=[this,fa])}).on("mouseout.basic",function(fa){fa.interactionState.dragInProgress||fa.partOfGroup||(ha.unhover(this,fa,ia),fa.interactionState.hovered=!1)}).on("click.basic",function(fa){fa.interactionState.hovered&&(ha.unhover(this,fa,ia),fa.interactionState.hovered=!1);fa.interactionState.dragInProgress||fa.partOfGroup||ha.select(this,fa,ia)})}function w(ca,ia,ha,fa){var na=J.behavior.drag().origin(function(sa){return{x:sa.node.x0+sa.visibleWidth/2,
y:sa.node.y0+sa.visibleHeight/2}}).on("dragstart",function(sa){if("fixed"!==sa.arrangement&&(S.ensureSingle(fa._fullLayout._infolayer,"g","dragcover",function(ta){fa._fullLayout._dragCover=ta}),S.raiseToTop(this),sa.interactionState.dragInProgress=sa.node,C(sa.node),sa.interactionState.hovered&&(ha.nodeEvents.unhover.apply(0,sa.interactionState.hovered),sa.interactionState.hovered=!1),"snap"===sa.arrangement)){var ua=sa.traceId+"|"+sa.key;sa.forceLayouts[ua]?sa.forceLayouts[ua].alpha(1):x(ca,ua,sa,
fa);E(ca,ia,sa,ua,fa)}}).on("drag",function(sa){if("fixed"!==sa.arrangement){var ua=J.event.x,ta=J.event.y;"snap"===sa.arrangement?(sa.node.x0=ua-sa.visibleWidth/2,sa.node.x1=ua+sa.visibleWidth/2):("freeform"===sa.arrangement&&(sa.node.x0=ua-sa.visibleWidth/2,sa.node.x1=ua+sa.visibleWidth/2),ta=Math.max(0,Math.min(sa.size-sa.visibleHeight/2,ta)));sa.node.y0=ta-sa.visibleHeight/2;sa.node.y1=ta+sa.visibleHeight/2;C(sa.node);"snap"!==sa.arrangement&&(sa.sankey.update(sa.graph),ca.filter(v(sa)).call(d),
ia.attr("d",p()))}}).on("dragend",function(sa){if("fixed"!==sa.arrangement){sa.interactionState.dragInProgress=!1;for(var ua=0;ua<sa.node.childrenNodes.length;ua++)sa.node.childrenNodes[ua].x=sa.node.x,sa.node.childrenNodes[ua].y=sa.node.y;"snap"!==sa.arrangement&&z(sa,fa)}});ca.on(".drag",null).call(na)}function x(ca,ia,ha,fa){G(ha.graph.nodes);var na=ha.graph.nodes.filter(function(sa){return sa.originalX===ha.node.originalX}).filter(function(sa){return!sa.partOfGroup});ha.forceLayouts[ia]=Q.forceSimulation(na).alphaDecay(0).force("collide",
Q.forceCollide().radius(function(sa){return sa.dy/2+ha.nodePad/2}).strength(1).iterations(I.forceIterations)).force("constrain",F(ca,ia,na,ha,fa)).stop()}function E(ca,ia,ha,fa,na){window.requestAnimationFrame(function ua(){var ta;for(ta=0;ta<I.forceTicksPerFrame;ta++)ha.forceLayouts[fa].tick();ta=ha.graph.nodes;for(var oa=0;oa<ta.length;oa++)ta[oa].y0=ta[oa].y-ta[oa].dy/2,ta[oa].y1=ta[oa].y0+ta[oa].dy,ta[oa].x0=ta[oa].x-ta[oa].dx/2,ta[oa].x1=ta[oa].x0+ta[oa].dx;ha.sankey.update(ha.graph);ca.filter(v(ha)).call(d);
ia.attr("d",p());0<ha.forceLayouts[fa].alpha()?window.requestAnimationFrame(ua):(ta=ha.node.originalX,ha.node.x0=ta-ha.visibleWidth/2,ha.node.x1=ta+ha.visibleWidth/2,z(ha,na))})}function F(ca,ia,ha,fa){return function(){for(var na=0,sa=0;sa<ha.length;sa++){var ua=ha[sa];ua===fa.interactionState.dragInProgress?(ua.x=ua.lastDraggedX,ua.y=ua.lastDraggedY):(ua.vx=(ua.originalX-ua.x)/I.forceTicksPerFrame,ua.y=Math.min(fa.size-ua.dy/2,Math.max(ua.dy/2,ua.y)));na=Math.max(na,Math.abs(ua.vx),Math.abs(ua.vy))}!fa.interactionState.dragInProgress&&
.1>na&&0<fa.forceLayouts[ia].alpha()&&fa.forceLayouts[ia].alpha(0)}}function z(ca,ia){for(var ha=[],fa=[],na=0;na<ca.graph.nodes.length;na++){var sa=(ca.graph.nodes[na].y0+ca.graph.nodes[na].y1)/2;ha.push((ca.graph.nodes[na].x0+ca.graph.nodes[na].x1)/2/ca.figure.width);fa.push(sa/ca.figure.height)}ea.call("_guiRestyle",ia,{"node.x":[ha],"node.y":[fa]},ca.trace.index).then(function(){ia._fullLayout._dragCover&&ia._fullLayout._dragCover.remove()})}function B(ca){var ia=[],ha;for(ha=0;ha<ca.length;ha++)ca[ha].originalX=
(ca[ha].x0+ca[ha].x1)/2,ca[ha].originalY=(ca[ha].y0+ca[ha].y1)/2,-1===ia.indexOf(ca[ha].originalX)&&ia.push(ca[ha].originalX);ia.sort(function(fa,na){return fa-na});for(ha=0;ha<ca.length;ha++)ca[ha].originalLayerIndex=ia.indexOf(ca[ha].originalX),ca[ha].originalLayer=ca[ha].originalLayerIndex/(ia.length-1)}function C(ca){ca.lastDraggedX=ca.x0+ca.dx/2;ca.lastDraggedY=ca.y0+ca.dy/2}function v(ca){return function(ia){return ia.node.originalX===ca.node.originalX}}function G(ca){for(var ia=0;ia<ca.length;ia++)ca[ia].y=
(ca[ia].y0+ca[ia].y1)/2,ca[ia].x=(ca[ia].x0+ca[ia].x1)/2}var I=b("./constants"),J=b("d3"),K=b("tinycolor2"),N=b("../../components/color"),H=b("../../components/drawing"),L=b("@plotly/d3-sankey"),P=b("@plotly/d3-sankey-circular"),Q=b("d3-force"),S=b("../../lib");D=b("../../lib/gup");var O=D.keyFun,U=D.repeat,X=D.unwrap,da=b("d3-interpolate").interpolateNumber,ea=b("../../registry");y.exports=function(ca,ia,ha,fa,na){var sa=!1;S.ensureSingle(ca._fullLayout._infolayer,"g","first-render",function(){sa=
!0});var ua=ca._fullLayout._dragCover;ha=ha.filter(function(oa){return X(oa).trace.visible}).map(n.bind(null,fa));ia=ia.selectAll("."+I.cn.sankey).data(ha,O);ia.exit().remove();ia.enter().append("g").classed(I.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",l);ia.each(function(oa,va){ca._fullData[va]._sankey=oa;var ma="bgsankey-"+oa.trace.uid+"-"+va;S.ensureSingle(ca._fullLayout._draggers,
"rect",ma);ca._fullData[va]._bgRect=J.select("."+ma);ca._fullData[va]._bgRect.style("pointer-events","all").attr("width",oa.width).attr("height",oa.height).attr("x",oa.translateX).attr("y",oa.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})});ia.transition().ease(I.ease).duration(I.duration).attr("transform",l);ha=ia.selectAll("."+I.cn.sankeyLinks).data(U,O);ha.enter().append("g").classed(I.cn.sankeyLinks,!0).style("fill","none");fa=ha.selectAll("."+I.cn.sankeyLink).data(function(oa){return oa.graph.links.filter(function(va){return va.value}).map(m.bind(null,
oa))},O);fa.enter().append("path").classed(I.cn.sankeyLink,!0).call(u,ia,na.linkEvents);fa.style("stroke",function(oa){return 1<oa.link.width||0<oa.linkLineWidth?N.tinyRGB(K(oa.linkLineColor)):oa.tinyColorHue}).style("stroke-opacity",function(oa){return 1<oa.link.width||0<oa.linkLineWidth?N.opacity(oa.linkLineColor):oa.tinyColorAlpha}).style("fill",function(oa){return oa.tinyColorHue}).style("fill-opacity",function(oa){return oa.tinyColorAlpha}).style("stroke-width",function(oa){return 1<oa.link.width||
0<oa.linkLineWidth?oa.linkLineWidth:1}).attr("d",p());fa.style("opacity",function(){return ca._context.staticPlot||sa||ua?1:0}).transition().ease(I.ease).duration(I.duration).style("opacity",1);fa.exit().transition().ease(I.ease).duration(I.duration).style("opacity",0).remove();ha=ia.selectAll("."+I.cn.sankeyNodeSet).data(U,O);ha.enter().append("g").classed(I.cn.sankeyNodeSet,!0);ha.style("cursor",function(oa){switch(oa.arrangement){case "fixed":return"default";case "perpendicular":return"ns-resize";
default:return"move"}});ha=ha.selectAll("."+I.cn.sankeyNode).data(function(oa){var va=oa.graph.nodes;B(va);return va.map(h.bind(null,oa))},O);ha.enter().append("g").classed(I.cn.sankeyNode,!0).call(a).style("opacity",function(oa){return!ca._context.staticPlot&&!sa||oa.partOfGroup?0:1});ha.call(u,ia,na.nodeEvents).call(w,fa,na,ca);ha.transition().ease(I.ease).duration(I.duration).call(a).style("opacity",function(oa){return oa.partOfGroup?0:1});ha.exit().transition().ease(I.ease).duration(I.duration).style("opacity",
0).remove();na=ha.selectAll("."+I.cn.nodeRect).data(U);na.enter().append("rect").classed(I.cn.nodeRect,!0).call(e);na.style("stroke-width",function(oa){return oa.nodeLineWidth}).style("stroke",function(oa){return N.tinyRGB(K(oa.nodeLineColor))}).style("stroke-opacity",function(oa){return N.opacity(oa.nodeLineColor)}).style("fill",function(oa){return oa.tinyColorHue}).style("fill-opacity",function(oa){return oa.tinyColorAlpha});na.transition().ease(I.ease).duration(I.duration).call(e);na=ha.selectAll("."+
I.cn.nodeCapture).data(U);na.enter().append("rect").classed(I.cn.nodeCapture,!0).style("fill-opacity",0);na.attr("x",function(oa){return oa.zoneX}).attr("y",function(oa){return oa.zoneY}).attr("width",function(oa){return oa.zoneWidth}).attr("height",function(oa){return oa.zoneHeight});na=ha.selectAll("."+I.cn.nodeCentered).data(U);na.enter().append("g").classed(I.cn.nodeCentered,!0).attr("transform",k);na.transition().ease(I.ease).duration(I.duration).attr("transform",k);ia=na.selectAll("."+I.cn.nodeLabelGuide).data(U);
ia.enter().append("path").classed(I.cn.nodeLabelGuide,!0).attr("id",function(oa){return oa.uniqueNodeLabelPathId}).attr("d",c).attr("transform",f);ia.transition().ease(I.ease).duration(I.duration).attr("d",c).attr("transform",f);var ta=na.selectAll("."+I.cn.nodeLabel).data(U);ta.enter().append("text").classed(I.cn.nodeLabel,!0).attr("transform",g).style("user-select","none").style("cursor","default").style("fill","black");ta.style("text-shadow",function(oa){return oa.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":
"none"}).each(function(oa){H.font(ta,oa.textFont)});ta.transition().ease(I.ease).duration(I.duration).attr("transform",g);na=ta.selectAll("."+I.cn.nodeLabelTextPath).data(U);na.enter().append("textPath").classed(I.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(oa){return"#"+oa.uniqueNodeLabelPathId}).attr("startOffset",t).style("fill",q);na.text(function(oa){return oa.horizontal||5<oa.node.dy?oa.node.label:""}).attr("text-anchor",function(oa){return oa.horizontal&&
oa.left?"end":"start"});na.transition().ease(I.ease).duration(I.duration).attr("startOffset",t).style("fill",q)}},{"../../components/color":615,"../../components/drawing":637,"../../lib":749,"../../lib/gup":746,"../../registry":880,"./constants":1148,"@plotly/d3-sankey":56,"@plotly/d3-sankey-circular":55,d3:169,"d3-force":160,"d3-interpolate":162,tinycolor2:548}],1153:[function(b,y,D){y.exports=function(n,m){for(var p=[],h=n.cd[0].trace,a=h._sankey.graph.nodes,d=0;d<a.length;d++){var e=a[d];if(!e.partOfGroup){var l=
[(e.x0+e.x1)/2,(e.y0+e.y1)/2];"v"===h.orientation&&l.reverse();m&&m.contains(l,!1,d,n)&&p.push({pointNumber:e.pointNumber})}}return p}},{}],1154:[function(b,y,D){var n=b("../../lib");y.exports=function(m,p){for(var h=0;h<m.length;h++)m[h].i=h;n.mergeArray(p.text,m,"tx");n.mergeArray(p.texttemplate,m,"txt");n.mergeArray(p.hovertext,m,"htx");n.mergeArray(p.customdata,m,"data");n.mergeArray(p.textposition,m,"tp");p.textfont&&(n.mergeArrayCastPositive(p.textfont.size,m,"ts"),n.mergeArray(p.textfont.color,
m,"tc"),n.mergeArray(p.textfont.family,m,"tf"));if(p=p.marker){n.mergeArrayCastPositive(p.size,m,"ms");n.mergeArrayCastPositive(p.opacity,m,"mo");n.mergeArray(p.symbol,m,"mx");n.mergeArray(p.color,m,"mc");if(h=p.line)n.mergeArray(h.color,m,"mlc"),n.mergeArrayCastPositive(h.width,m,"mlw");(p=p.gradient)&&"none"!==p.type&&(n.mergeArray(p.type,m,"mgt"),n.mergeArray(p.color,m,"mgc"))}}},{"../../lib":749}],1155:[function(b,y,D){D=b("../../plots/template_attributes").texttemplateAttrs;var n=b("../../plots/template_attributes").hovertemplateAttrs,
m=b("../../components/colorscale/attributes"),p=b("../../plots/font_attributes"),h=b("../../components/drawing/attributes").dash,a=b("../../components/drawing"),d=b("./constants");b=b("../../lib/extend").extendFlat;y.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",
anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:D({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,
editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:n({},{keys:d.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:"linear spline hv vh hvh vhv".split(" "),dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},
dash:b({},h,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:"none tozeroy tozerox tonexty tonextx toself tonext".split(" "),editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:b({symbol:{valType:"enumerated",values:a.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",
min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:b({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},m("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",
values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},m("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",
min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:p({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",
editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorscale/attributes":622,"../../components/drawing":637,"../../components/drawing/attributes":636,"../../lib/extend":739,"../../plots/font_attributes":825,"../../plots/template_attributes":875,"./constants":1159}],1156:[function(b,y,D){function n(t,u,w,x,E,F,z){var B=u._length,C=t._fullLayout;t=w._id;var v=x._id,G=C._firstScatter[h(u)]===u.uid;C=(a(u,C,w,x)||{}).orientation;var I=u.fill;w._minDtick=0;x._minDtick=0;var J=
{padded:!0},K={padded:!0};z&&(J.ppad=K.ppad=z);(z=2>B||E[0]!==E[B-1]||F[0]!==F[B-1])&&("tozerox"===I||"tonextx"===I&&(G||"h"===C))?J.tozero=!0:(u.error_y||{}).visible||"tonexty"!==I&&"tozeroy"!==I&&(c.hasMarkers(u)||c.hasText(u))||(J.padded=!1,J.ppad=0);if(z&&("tozeroy"===I||"tonexty"===I&&(G||"v"===C)))K.tozero=!0;else if("tonextx"===I||"tozerox"===I)K.padded=!1;t&&(u._extremes[t]=l.findExtremes(w,E,J));v&&(u._extremes[v]=l.findExtremes(x,F,K))}function m(t,u){if(c.hasMarkers(t)){var w=t.marker,
x=1.6*(t.marker.sizeref||1);var E="area"===t.marker.sizemode?function(z){return Math.max(Math.sqrt((z||0)/x),3)}:function(z){return Math.max((z||0)/x,3)};if(e.isArrayOrTypedArray(w.size)){w={type:"linear"};l.setConvert(w);t=w.makeCalcdata(t.marker,"size");w=Array(u);for(var F=0;F<u;F++)w[F]=E(t[F]);return w}return E(w.size)}}function p(t,u){var w=h(u);t=t._firstScatter;t[w]||(t[w]=u.uid)}function h(t){var u=t.stackgroup;return t.xaxis+t.yaxis+t.type+(u?"-"+u:"")}function a(t,u,w,x){if(t=t.stackgroup)if(u=
u._scatterStackOpts[w._id+x._id][t],w="v"===u.orientation?x:w,"linear"===w.type||"log"===w.type)return u}var d=b("fast-isnumeric"),e=b("../../lib"),l=b("../../plots/cartesian/axes"),k=b("../../constants/numerical").BADNUM,c=b("./subtypes"),f=b("./colorscale_calc"),g=b("./arrays_to_calcdata"),q=b("./calc_selection");y.exports={calc:function(t,u){var w=t._fullLayout,x=l.getFromId(t,u.xaxis||"x"),E=l.getFromId(t,u.yaxis||"y"),F=x.makeCalcdata(u,"x"),z=E.makeCalcdata(u,"y"),B=u._length,C=Array(B),v=u.ids,
G=a(u,w,x,E),I=!1,J;p(w,u);w="x";var K="y";if(G){e.pushUnique(G.traceIndices,u._expandedIndex);if(J="v"===G.orientation){K="s";var N="x"}else w="s",N="y";var H="interpolate"===G.stackgaps}else{var L=m(u,B);n(t,u,x,E,F,z,L)}for(x=0;x<B;x++){E=C[x]={};L=d(F[x]);var P=d(z[x]);L&&P?(E[w]=F[x],E[K]=z[x]):G&&(J?L:P)?(E[N]=J?F[x]:z[x],E.gap=!0,H?(E.s=k,I=!0):E.s=0):E[w]=E[K]=k;v&&(E.id=String(v[x]))}g(C,u);f(t,u);q(C,u);if(G){for(x=0;x<C.length;)C[x][N]===k?C.splice(x,1):x++;e.sort(C,function(Q,S){return Q[N]-
S[N]||Q.i-S.i});if(I){for(x=0;x<C.length-1&&C[x].gap;)x++;F=C[x].s;F||(F=C[x].s=0);for(t=0;t<x;t++)C[t].s=F;for(u=C.length-1;u>x&&C[u].gap;)u--;F=C[u].s;for(t=C.length-1;t>u;t--)C[t].s=F;for(;x<u;)if(x++,C[x].gap){for(t=x+1;C[t].gap;)t++;F=C[x-1][N];z=C[x-1].s;for(B=(C[t].s-z)/(C[t][N]-F);x<t;)C[x].s=z+(C[x][N]-F)*B,x++}}}return C},calcMarkerSize:m,calcAxisExpansion:n,setFirstScatter:p,getStackOpts:a}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"./arrays_to_calcdata":1154,
"./calc_selection":1157,"./colorscale_calc":1158,"./subtypes":1179,"fast-isnumeric":241}],1157:[function(b,y,D){var n=b("../../lib");y.exports=function(m,p){n.isArrayOrTypedArray(p.selectedpoints)&&n.tagSelected(m,p)}},{"../../lib":749}],1158:[function(b,y,D){var n=b("../../components/colorscale/helpers").hasColorscale,m=b("../../components/colorscale/calc"),p=b("./subtypes");y.exports=function(h,a){p.hasLines(a)&&n(a,"line")&&m(h,a,{vals:a.line.color,containerStr:"line",cLetter:"c"});p.hasMarkers(a)&&
(n(a,"marker")&&m(h,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),n(a,"marker.line")&&m(h,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"./subtypes":1179}],1159:[function(b,y,D){y.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],1160:[function(b,y,D){function n(p,h,a,d,e,l,k){e[d]=!0;d={i:null,gap:!0,s:0};d[k]=a;p.splice(h,0,
d);h&&a===p[h-1][k]?(a=p[h-1],d.s=a.s,d.i=a.i,d.gap=a.gap):l&&(l=p[h-1],a=(e=p[h+1])?l?l.s+(e.s-l.s)*(a-l[k])/(e[k]-l[k]):e.s:l.s,d.s=a);h||(p[0].t=p[1].t,p[0].trace=p[1].trace,delete p[1].t,delete p[1].trace)}var m=b("./calc");y.exports=function(p,h){var a=h.xaxis;h=h.yaxis;var d=p._fullLayout._scatterStackOpts[a._id+h._id];if(d){var e=p.calcdata,l,k,c,f,g,q;for(q in d){var t=d[q];var u=t.traceIndices;if(u.length){var w="interpolate"===t.stackgaps;var x=t.groupnorm;if("v"===t.orientation){var E=
"x";var F="y"}else E="y",F="x";var z=Array(u.length);for(l=0;l<z.length;l++)z[l]=!1;var B=e[u[0]];var C=Array(B.length);for(l=0;l<B.length;l++)C[l]=B[l][E];for(l=1;l<u.length;l++){var v=e[u[l]];for(k=c=0;k<v.length;k++){for(g=v[k][E];g>C[c]&&c<C.length;c++)n(v,k,C[c],l,z,w,E),k++;if(g!==C[c]){for(f=0;f<l;f++)n(e[u[f]],c,g,f,z,w,E);C.splice(c,0,g)}c++}for(;c<C.length;c++)n(v,k,C[c],l,z,w,E),k++}c=C.length;for(k=0;k<B.length;k++){f=B[k][F]=B[k].s;for(l=1;l<u.length;l++)v=e[u[l]],v[0].trace._rawLength=
v[0].trace._length,v[0].trace._length=c,f+=v[k].s,v[k][F]=f;if(x)for(v=("fraction"===x?f:f/100)||1,l=0;l<u.length;l++)f=e[u[l]][k],f[F]/=v,f.sNorm=f.s/v}for(l=0;l<u.length;l++){v=e[u[l]];B=v[0].trace;x=m.calcMarkerSize(B,B._rawLength);F=Array.isArray(x);if(x&&z[l]||F)for(f=x,x=Array(c),k=0;k<c;k++)x[k]=v[k].gap?0:F?f[v[k].i]:f;F=Array(c);f=Array(c);for(k=0;k<c;k++)F[k]=v[k].x,f[k]=v[k].y;m.calcAxisExpansion(p,B,a,h,F,f,x);v[0].t.orientation=t.orientation}}}}}},{"./calc":1156}],1161:[function(b,y,
D){y.exports=function(n){for(var m=0;m<n.length;m++){var p=n[m];if("scatter"===p.type){var h=p.fill;if("none"!==h&&"toself"!==h&&(p.opacity=void 0,"tonexty"===h||"tonextx"===h))for(h=m-1;0<=h;h--){var a=n[h];if("scatter"===a.type&&a.xaxis===p.xaxis&&a.yaxis===p.yaxis){a.opacity=void 0;break}}}}}},{}],1162:[function(b,y,D){var n=b("../../lib"),m=b("../../registry"),p=b("./attributes"),h=b("./constants"),a=b("./subtypes"),d=b("./xy_defaults"),e=b("./stack_defaults"),l=b("./marker_defaults"),k=b("./line_defaults"),
c=b("./line_shape_defaults"),f=b("./text_defaults"),g=b("./fillcolor_defaults");y.exports=function(q,t,u,w){function x(z,B){return n.coerce(q,t,p,z,B)}var E=d(q,t,w,x);E||(t.visible=!1);if(t.visible){var F=e(q,t,w,x);E=!F&&E<h.PTS_LINESONLY?"lines+markers":"lines";x("text");x("hovertext");x("mode",E);a.hasLines(t)&&(k(q,t,u,w,x),c(q,t,x),x("connectgaps"),x("line.simplify"));a.hasMarkers(t)&&l(q,t,u,w,x,{gradient:!0});a.hasText(t)&&(x("texttemplate"),f(q,t,w,x));w=[];if(a.hasMarkers(t)||a.hasText(t))x("cliponaxis"),
x("marker.maxdisplayed"),w.push("points");x("fill",F?F.fillDflt:"none");"none"!==t.fill&&(g(q,t,u,x),a.hasLines(t)||c(q,t,x));F=(t.line||{}).color;E=(t.marker||{}).color;"tonext"!==t.fill&&"toself"!==t.fill||w.push("fills");x("hoveron",w.join("+")||"points");"fills"!==t.hoveron&&x("hovertemplate");w=m.getComponentMethod("errorbars","supplyDefaults");w(q,t,F||E||u,{axis:"y"});w(q,t,F||E||u,{axis:"x",inherit:"y"});n.coerceSelectionMarkerOpacity(t,x)}}},{"../../lib":749,"../../registry":880,"./attributes":1155,
"./constants":1159,"./fillcolor_defaults":1163,"./line_defaults":1168,"./line_shape_defaults":1170,"./marker_defaults":1174,"./stack_defaults":1177,"./subtypes":1179,"./text_defaults":1180,"./xy_defaults":1181}],1163:[function(b,y,D){var n=b("../../components/color"),m=b("../../lib").isArrayOrTypedArray;y.exports=function(p,h,a,d){p=!1;if(h.marker){var e=h.marker.color,l=(h.marker.line||{}).color;e&&!m(e)?p=e:l&&!m(l)&&(p=l)}d("fillcolor",n.addOpacity((h.line||{}).color||p||a,.5))}},{"../../components/color":615,
"../../lib":749}],1164:[function(b,y,D){var n=b("../../plots/cartesian/axes");y.exports=function(m,p,h){var a={},d={_fullLayout:h};h=n.getFromTrace(d,p,"x");p=n.getFromTrace(d,p,"y");a.xLabel=n.tickText(h,m.x,!0).text;a.yLabel=n.tickText(p,m.y,!0).text;return a}},{"../../plots/cartesian/axes":797}],1165:[function(b,y,D){var n=b("../../components/color"),m=b("./subtypes");y.exports=function(p,h){if("lines"===p.mode)return(h=p.line.color)&&n.opacity(h)?h:p.fillcolor;if("none"===p.mode)return p.fill?
p.fillcolor:"";var a=h.mcc||(p.marker||{}).color,d=h.mlcc||((p.marker||{}).line||{}).color;return(h=a&&n.opacity(a)?a:d&&n.opacity(d)&&(h.mlw||((p.marker||{}).line||{}).width)?d:"")?.3>n.opacity(h)?n.addOpacity(h,.3):h:(h=(p.line||{}).color)&&n.opacity(h)&&m.hasLines(p)&&p.line.width?h:p.fillcolor}},{"../../components/color":615,"./subtypes":1179}],1166:[function(b,y,D){var n=b("../../lib"),m=b("../../components/fx"),p=b("../../registry"),h=b("./get_trace_color"),a=b("../../components/color"),d=n.fillText;
y.exports=function(e,l,k,c){var f=e.cd,g=f[0].trace,q=e.xa,t=e.ya,u=q.c2p(l),w=t.c2p(k),x=[u,w];k=g.hoveron||"";var E=-1!==g.mode.indexOf("markers")?3:.5;if(-1!==k.indexOf("points")&&(l=function(I){var J=Math.max(E,I.mrc||0),K=q.c2p(I.x)-u;I=t.c2p(I.y)-w;return Math.max(Math.sqrt(K*K+I*I)-J,1-E/J)},c=m.getDistanceFunction(c,function(I){var J=Math.max(3,I.mrc||0),K=1-1/J;I=Math.abs(q.c2p(I.x)-u);return I<J?K*I/J:I-J+K},function(I){var J=Math.max(3,I.mrc||0),K=1-1/J;I=Math.abs(t.c2p(I.y)-w);return I<
J?K*I/J:I-J+K},l),m.getClosest(f,c,e),!1!==e.index)){c=f[e.index];k=q.c2p(c.x,!0);x=t.c2p(c.y,!0);var F=c.mrc||1;e.index=c.i;var z=f[0].t.orientation,B=z&&(c.sNorm||c.s);f="h"===z?B:c.x;z="v"===z?B:c.y;n.extendFlat(e,{color:h(g,c),x0:k-F,x1:k+F,xLabelVal:f,y0:x-F,y1:x+F,yLabelVal:z,spikeDistance:l(c),hovertemplate:g.hovertemplate});d(c,g,e);p.getComponentMethod("errorbars","hoverInfo")(c,g,e);return[e]}if(-1!==k.indexOf("fills")&&g._polygons){F=g._polygons;c=[];z=!1;l=Infinity;f=-Infinity;B=Infinity;
var C=-Infinity;for(k=0;k<F.length;k++){var v=F[k];v.contains(x)&&(z=!z,c.push(v),B=Math.min(B,v.ymin),C=Math.max(C,v.ymax))}if(z){B=Math.max(B,0);C=Math.min(C,t._length);x=(B+C)/2;for(k=0;k<c.length;k++)for(z=c[k].pts,F=1;F<z.length;F++){v=z[F-1][1];var G=z[F][1];v>x!==G>=x&&(B=z[F-1][0],C=z[F][0],G-v&&(B+=(C-B)*(x-v)/(G-v),l=Math.min(l,B),f=Math.max(f,B)))}l=Math.max(l,0);f=Math.min(f,q._length);c=a.defaultLine;a.opacity(g.fillcolor)?c=g.fillcolor:a.opacity((g.line||{}).color)&&(c=g.line.color);
n.extendFlat(e,{distance:e.maxHoverDistance,x0:l,x1:f,y0:x,y1:x,color:c,hovertemplate:!1});delete e.index;g.text&&!Array.isArray(g.text)?e.text=String(g.text):e.text=g.name;return[e]}}}},{"../../components/color":615,"../../components/fx":655,"../../lib":749,"../../registry":880,"./get_trace_color":1165}],1167:[function(b,y,D){D=b("./subtypes");y.exports={hasLines:D.hasLines,hasMarkers:D.hasMarkers,hasText:D.hasText,isBubble:D.isBubble,attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),
calc:b("./calc").calc,crossTraceCalc:b("./cross_trace_calc"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot"),colorbar:b("./marker_colorbar"),formatLabels:b("./format_labels"),style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols errorBarsOK showLegend scatter-like zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,
"./arrays_to_calcdata":1154,"./attributes":1155,"./calc":1156,"./cross_trace_calc":1160,"./cross_trace_defaults":1161,"./defaults":1162,"./format_labels":1164,"./hover":1166,"./marker_colorbar":1173,"./plot":1175,"./select":1176,"./style":1178,"./subtypes":1179}],1168:[function(b,y,D){var n=b("../../lib").isArrayOrTypedArray,m=b("../../components/colorscale/helpers").hasColorscale,p=b("../../components/colorscale/defaults");y.exports=function(h,a,d,e,l,k){var c=(h.marker||{}).color;l("line.color",
d);m(h,"line")?p(h,a,e,l,{prefix:"line.",cLetter:"c"}):(h=(n(c)?!1:c)||d,l("line.color",h));l("line.width");(k||{}).noDash||l("line.dash")}},{"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"../../lib":749}],1169:[function(b,y,D){D=b("../../constants/numerical");var n=D.BADNUM;D=D.LOG_CLIP;var m=D+.5,p=D-.5,h=b("../../lib"),a=h.segmentsIntersect,d=h.constrain,e=b("./constants");y.exports=function(l,k){function c(Va){Va=l[Va];if(!Va)return!1;var rb=k.linearized?
C.l2p(Va.x):C.c2p(Va.x),ib=k.linearized?v.l2p(Va.y):v.c2p(Va.y);if(rb===n){G&&(rb=C.c2p(Va.x,!0));if(rb===n)return!1;I&&ib===n&&(rb*=Math.abs(C._m*K*(0<C._m?m:p)/(v._m*J*(0<v._m?m:p))));rb*=1E3}if(ib===n){I&&(ib=v.c2p(Va.y,!0));if(ib===n)return!1;ib*=1E3}return[rb,ib]}function f(Va,rb,ib,Na){ib-=Va;Na-=rb;Va=.5-Va;var Za=.5-rb;rb=ib*ib+Na*Na;var eb=ib*Va+Na*Za;if(0<eb&&eb<rb&&(ib=Va*Na-Za*ib,ib*ib<rb))return!0}function g(Va,rb){var ib=Va[0]/J;Va=Va[1]/K;var Na=Math.max(0,-ib,ib-1,-Va,Va-1);Na&&void 0!==
ia&&f(ib,Va,ia,ha)&&(Na=0);Na&&rb&&f(ib,Va,rb[0]/J,rb[1]/K)&&(Na=0);return(1+e.toleranceGrowth*Na)*H}function q(Va,rb){var ib=Va[0]-rb[0];Va=Va[1]-rb[1];return Math.sqrt(ib*ib+Va*Va)}function t(Va,rb){for(var ib=[],Na=0,Za=0;4>Za;Za++){var eb=oa[Za];(eb=a(Va[0],Va[1],rb[0],rb[1],eb[0],eb[1],eb[2],eb[3]))&&(!Na||1<Math.abs(eb.x-ib[0][0])||1<Math.abs(eb.y-ib[0][1]))&&(eb=[eb.x,eb.y],Na&&q(eb,Va)<q(ib[0],Va)?ib.unshift(eb):ib.push(eb),Na++)}return ib}function u(Va){if(Va[0]<na||Va[0]>sa||Va[1]<ua||Va[1]>
ta)return[d(Va[0],na,sa),d(Va[1],ua,ta)]}function w(Va,rb){if(Va[0]===rb[0]&&(Va[0]===na||Va[0]===sa)||Va[1]===rb[1]&&(Va[1]===ua||Va[1]===ta))return!0}function x(Va,rb){var ib=[];Va=u(Va);rb=u(rb);if(Va&&rb&&w(Va,rb))return ib;Va&&ib.push(Va);rb&&ib.push(rb);return ib}function E(Va,rb,ib){return function(Na,Za){var eb=u(Na),Ba=u(Za),Ma=[];if(eb&&Ba&&w(eb,Ba))return Ma;eb&&Ma.push(eb);Ba&&Ma.push(Ba);if(Na=2*h.constrain((Na[Va]+Za[Va])/2,rb,ib)-((eb||Na)[Va]+(Ba||Za)[Va]))eb=eb&&Ba?0<Na===eb[Va]>
Ba[Va]?eb:Ba:eb||Ba,eb[Va]+=Na;return Ma}}function F(Va){var rb=Va[0],ib=Va[1],Na=rb===X[da-1][0],Za=ib===X[da-1][1];if(!Na||!Za)if(1<da){var eb=rb===X[da-2][0],Ba=ib===X[da-2][1];Na&&(rb===na||rb===sa)&&eb?Ba?da--:X[da-1]=Va:Za&&(ib===ua||ib===ta)&&Ba?eb?da--:X[da-1]=Va:X[da++]=Va}else X[da++]=Va}function z(Va){X[da-1][0]!==Va[0]&&X[da-1][1]!==Va[1]&&F([pa,za]);F(Va);Ka=null;pa=za=0}function B(Va){ia=Va[0]/J;ha=Va[1]/K;va=Va[0]<na?na:Va[0]>sa?sa:0;ma=Va[1]<ua?ua:Va[1]>ta?ta:0;if(va||ma){if(da)if(Ka){var rb=
Ca(Ka,Va);1<rb.length&&(z(rb[0]),X[da++]=rb[1])}else qa=Ca(X[da-1],Va)[0],X[da++]=qa;else X[da++]=[va||Va[0],ma||Va[1]];rb=X[da-1];if(va&&ma&&(rb[0]!==va||rb[1]!==ma)){if(Ka)if(pa!==va&&za!==ma)if(pa&&za){rb=Va[0]-Ka[0];var ib=(Va[1]-Ka[1])/rb;rb=0<(Ka[1]*Va[0]-Va[1]*Ka[0])/rb?[0<ib?na:sa,ta]:[0<ib?sa:na,ua];F(rb)}else F([pa||va,za||ma]);else pa&&za&&F([pa,za]);F([va,ma])}else pa-va&&za-ma&&F([va||pa,ma||za]);Ka=Va;pa=va;za=ma}else Ka&&z(Ca(Ka,Va)[0]),X[da++]=Va}var C=k.xaxis,v=k.yaxis,G="log"===
C.type,I="log"===v.type,J=C._length,K=v._length,N=k.connectGaps,H=k.baseTolerance,L=k.shape,P="linear"===L,Q=k.fill&&"none"!==k.fill,S=[],O=e.minTolerance,U=l.length,X=Array(U),da=0,ea,ca,ia,ha;var fa=e.maxScreensAway;var na=-J*fa,sa=J*(1+fa),ua=-K*fa,ta=K*(1+fa),oa=[[na,ua,sa,ua],[sa,ua,sa,ta],[sa,ta,na,ta],[na,ta,na,ua]],va,ma,pa,za,qa,Ca;"linear"===L||"spline"===L?Ca=t:"hv"===L||"vh"===L?Ca=x:"hvh"===L?Ca=E(0,na,sa):"vhv"===L&&(Ca=E(1,ua,ta));for(L=0;L<U;L++)if(fa=c(L)){da=0;var Ka=null;B(fa);
for(L++;L<U;L++){var Oa=c(L);if(!Oa)if(N)continue;else break;if(P&&k.simplify){var kb=c(L+1);var mb=q(Oa,fa);if(Q&&(0===da||da===U-1)||!(mb<g(Oa,kb)*O)){var tb=[(Oa[0]-fa[0])/mb,(Oa[1]-fa[1])/mb];var nb=fa;var Ta=mb;var fb=ea=ca=0;var ab=!1;mb=Oa;for(L++;L<l.length;L++){var ra=kb;kb=c(L+1);if(!ra)if(N)continue;else break;var Ea=[ra[0]-fa[0],ra[1]-fa[1]];var Ia=Ea[0]*tb[1]-Ea[1]*tb[0];ea=Math.min(ea,Ia);ca=Math.max(ca,Ia);if(ca-ea>g(ra,kb))break;mb=ra;Ea=Ea[0]*tb[0]+Ea[1]*tb[1];Ea>Ta?(Ta=Ea,Oa=ra,
ab=!1):Ea<fb&&(fb=Ea,nb=ra,ab=!0)}ab?(B(Oa),mb!==nb&&B(nb)):(nb!==fa&&B(nb),mb!==Oa&&B(Oa));B(mb);if(L>=l.length||!ra)break;B(ra);fa=ra}}else B(Oa)}Ka&&F([pa||Ka[0],za||Ka[1]]);S.push(X.slice(0,da))}return S}},{"../../constants/numerical":724,"../../lib":749,"./constants":1159}],1170:[function(b,y,D){y.exports=function(n,m,p){"spline"===p("line.shape")&&p("line.smoothing")}},{}],1171:[function(b,y,D){var n={tonextx:1,tonexty:1,tonext:1};y.exports=function(m,p,h){var a,d={};var e=!1;var l=-1,k=0,c=
-1;for(p=0;p<h.length;p++)m=h[p][0].trace,(a=m.stackgroup||"")?a in d?a=d[a]:(a=d[a]=k,k++):m.fill in n&&0<=c?a=c:(a=c=k,k++),a<l&&(e=!0),m._groupIndex=l=a;h=h.slice();e&&h.sort(function(f,g){f=f[0].trace;g=g[0].trace;return f._groupIndex-g._groupIndex||f.index-g.index});d={};for(p=0;p<h.length;p++)m=h[p][0].trace,a=m.stackgroup||"",!0===m.visible?(m._nexttrace=null,m.fill in n&&(e=d[a],m._prevtrace=e||null,e&&(e._nexttrace=m)),m._ownfill=m.fill&&("tozero"===m.fill.substr(0,6)||"toself"===m.fill||
"to"===m.fill.substr(0,2)&&!m._prevtrace),d[a]=m):m._prevtrace=m._nexttrace=m._ownfill=null;return h}},{}],1172:[function(b,y,D){var n=b("fast-isnumeric");y.exports=function(m){m=m.marker;var p=m.sizeref||1,h=m.sizemin||0,a="area"===m.sizemode?function(d){return Math.sqrt(d/p)}:function(d){return d/p};return function(d){d=a(d/2);return n(d)&&0<d?Math.max(d,h):0}}},{"fast-isnumeric":241}],1173:[function(b,y,D){y.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1174:[function(b,y,D){var n=b("../../components/color"),
m=b("../../components/colorscale/helpers").hasColorscale,p=b("../../components/colorscale/defaults"),h=b("./subtypes");y.exports=function(a,d,e,l,k,c){var f=h.isBubble(a),g=(a.line||{}).color;c=c||{};g&&(e=g);k("marker.symbol");k("marker.opacity",f?.7:1);k("marker.size");k("marker.color",e);m(a,"marker")&&p(a,d,l,k,{prefix:"marker.",cLetter:"c"});c.noSelect||(k("selected.marker.color"),k("unselected.marker.color"),k("selected.marker.size"),k("unselected.marker.size"));c.noLine||(e=g&&!Array.isArray(g)&&
d.marker.color!==g?g:f?n.background:n.defaultLine,k("marker.line.color",e),m(a,"marker.line")&&p(a,d,l,k,{prefix:"marker.line.",cLetter:"c"}),k("marker.line.width",f?1:0));f&&(k("marker.sizeref"),k("marker.sizemin"),k("marker.sizemode"));c.gradient&&"none"!==k("marker.gradient.type")&&k("marker.gradient.color")}},{"../../components/color":615,"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"./subtypes":1179}],1175:[function(b,y,D){function n(t,u,w){u.each(function(x){var E=
e(h.select(this),"g","fills");k.setClipUrl(E,w.layerClipId,t);var F=x[0].trace;x=[];F._ownfill&&x.push("_ownFill");F._nexttrace&&x.push("_nextFill");E=E.selectAll("g").data(x,l);E.enter().append("g");E.exit().each(function(z){F[z]=null}).remove();E.order().each(function(z){F[z]=e(h.select(this),"path","js-fill")})})}function m(t,u,w,x,E,F,z){function B(ma){return N?ma.transition():ma}function C(ma){B(ma).attr("d","M0,0Z")}function v(ma){return ma.filter(function(pa){return!pa.gap&&pa.vis})}function G(ma){return ma.filter(function(pa){return pa.vis})}
function I(ma){return ma.filter(function(pa){return!pa.gap})}function J(ma){return ma.id}function K(){return!1}p(t,u,w,x,E);var N=!!z&&0<z.duration,H=w.xaxis,L=w.yaxis,P=x[0].trace,Q=P.line,S=h.select(F),O=e(S,"g","errorbars");F=e(S,"g","lines");u=e(S,"g","points");E=e(S,"g","text");a.getComponentMethod("errorbars","plot")(t,O,w,z);if(!0===P.visible){B(S).style("opacity",P.opacity);var U=P.fill.charAt(P.fill.length-1);"x"!==U&&"y"!==U&&(U="");x[0][w.isRangePlot?"nodeRangePlot3":"node3"]=S;z="";S=
[];if(O=P._prevtrace){z=O._prevRevpath||"";var X=O._nextFill;S=O._polygons}var da,ea,ca="",ia="",ha=[];var fa=d.noop;O=P._ownFill;if(c.hasLines(P)||"none"!==P.fill){X&&X.datum(x);if(-1!==["hv","vh","hvh","vhv"].indexOf(Q.shape)){var na=k.steps(Q.shape);var sa=k.steps(Q.shape.split("").reverse().join(""))}else na="spline"===Q.shape?sa=function(ma){var pa=ma[ma.length-1];return 1<ma.length&&ma[0][0]===pa[0]&&ma[0][1]===pa[1]?k.smoothclosed(ma.slice(1),Q.smoothing):k.smoothopen(ma,Q.smoothing)}:sa=function(ma){return"M"+
ma.join("L")};var ua=function(ma){return sa(ma.reverse())};ha=f(x,{xaxis:H,yaxis:L,connectGaps:P.connectgaps,baseTolerance:Math.max(Q.width||1,3)/4,shape:Q.shape,simplify:Q.simplify,fill:P.fill});var ta=P._polygons=Array(ha.length);for(fa=0;fa<ha.length;fa++)P._polygons[fa]=q(ha[fa]);if(ha.length){var oa=ha[0][0];var va=ha[ha.length-1];va=va[va.length-1]}fa=function(ma){return function(pa){da=na(pa);ea=ua(pa);ca?U?(ca+="L"+da.substr(1),ia=ea+("L"+ia.substr(1))):(ca+="Z"+da,ia=ea+"Z"+ia):(ca=da,ia=
ea);c.hasLines(P)&&1<pa.length&&(pa=h.select(this),pa.datum(x),ma?B(pa.style("opacity",0).attr("d",da).call(k.lineGroupStyle)).style("opacity",1):(pa=B(pa),pa.attr("d",da),k.singleLineStyle(x,pa)))}}}F=F.selectAll(".js-line").data(ha);B(F.exit()).style("opacity",0).remove();F.each(fa(!1));F.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(k.lineGroupStyle).each(fa(!0));k.setClipUrl(F,w.layerClipId,t);ha.length?(O?(O.datum(x),oa&&va&&(U?("y"===U?oa[1]=va[1]=
L.c2p(0,!0):"x"===U&&(oa[0]=va[0]=H.c2p(0,!0)),B(O).attr("d","M"+va+"L"+oa+"L"+ca.substr(1)).call(k.singleFillStyle)):B(O).attr("d",ca+"Z").call(k.singleFillStyle))):X&&("tonext"===P.fill.substr(0,6)&&ca&&z?("tonext"===P.fill?B(X).attr("d",ca+"Z"+z+"Z").call(k.singleFillStyle):B(X).attr("d",ca+"L"+z.substr(1)+"Z").call(k.singleFillStyle),P._polygons=P._polygons.concat(S)):(C(X),P._polygons=null)),P._prevRevpath=ia,P._prevPolygons=ta):(O?C(O):X&&C(X),P._polygons=P._prevRevpath=P._prevPolygons=null);
u.datum(x);E.datum(x);(function(ma,pa,za){var qa,Ca=za[0].trace;za=c.hasMarkers(Ca);var Ka=c.hasText(Ca);var Oa=Ca.ids?J:void 0;var kb=K,mb=K;if(za||Ka){var tb=l,nb=Ca.stackgroup,Ta=nb&&"infer zero"===t._fullLayout._scatterStackOpts[H._id+L._id][nb].stackgaps;Ca.marker.maxdisplayed||Ca._needsCull?tb=Ta?G:v:nb&&!Ta&&(tb=I);za&&(kb=tb);Ka&&(mb=tb)}ma=ma.selectAll("path.point");ma=ma.data(kb,Oa);kb=ma.enter().append("path").classed("point",!0);N&&kb.call(k.pointStyle,Ca,t).call(k.translatePoints,H,L).style("opacity",
0).transition().style("opacity",1);ma.order();var fb;za&&(fb=k.makePointStyleFns(Ca));ma.each(function(ab){var ra=h.select(this),Ea=B(ra);(qa=k.translatePoint(ab,Ea,H,L))?(k.singlePointStyle(ab,Ea,Ca,fb,t),w.layerClipId&&k.hideOutsideRangePoint(ab,Ea,H,L,Ca.xcalendar,Ca.ycalendar),Ca.customdata&&ra.classed("plotly-customdata",null!==ab.data&&void 0!==ab.data)):Ea.remove()});N?ma.exit().transition().style("opacity",0).remove():ma.exit().remove();ma=pa.selectAll("g");ma=ma.data(mb,Oa);ma.enter().append("g").classed("textpoint",
!0).append("text");ma.order();ma.each(function(ab){var ra=h.select(this),Ea=B(ra.select("text"));(qa=k.translatePoint(ab,Ea,H,L))?w.layerClipId&&k.hideOutsideRangePoint(ab,ra,H,L,Ca.xcalendar,Ca.ycalendar):ra.remove()});ma.selectAll("text").call(k.textPointStyle,Ca,t).each(function(ab){var ra=H.c2p(ab.x),Ea=L.c2p(ab.y);h.select(this).selectAll("tspan.line").each(function(){B(h.select(this)).attr({x:ra,y:Ea})})});ma.exit().remove()})(u,E,x);X=!1===P.cliponaxis?null:w.layerClipId;k.setClipUrl(u,X,t);
k.setClipUrl(E,X,t)}}function p(t,u,w,x,E){t=w.xaxis;w=w.yaxis;var F=h.extent(d.simpleMap(t.range,t.r2c)),z=h.extent(d.simpleMap(w.range,w.r2c));w=x[0].trace;if(c.hasMarkers(w)&&(w=w.marker.maxdisplayed,0!==w)){t=x.filter(function(G){return G.x>=F[0]&&G.x<=F[1]&&G.y>=z[0]&&G.y<=z[1]});var B=Math.ceil(t.length/w),C=0;E.forEach(function(G,I){G=G[0].trace;c.hasMarkers(G)&&0<G.marker.maxdisplayed&&I<u&&C++});var v=Math.round(C*B/3+Math.floor(C/3)*B/7.1);x.forEach(function(G){delete G.vis});t.forEach(function(G,
I){0===Math.round((I+v)%B)&&(G.vis=!0)})}}var h=b("d3"),a=b("../../registry"),d=b("../../lib"),e=d.ensureSingle,l=d.identity,k=b("../../components/drawing"),c=b("./subtypes"),f=b("./line_points"),g=b("./link_traces"),q=b("../../lib/polygon").tester;y.exports=function(t,u,w,x,E,F){var z,B=!E,C=!!E&&0<E.duration,v=g(t,u,w);w=x.selectAll("g.trace").data(v,function(G){return G[0].trace.uid});w.enter().append("g").attr("class",function(G){return"trace scatter trace"+G[0].trace.uid}).style("stroke-miterlimit",
2);w.order();n(t,w,u);C?(F&&(z=F()),h.transition().duration(E.duration).ease(E.easing).each("end",function(){z&&z()}).each("interrupt",function(){z&&z()}).each(function(){x.selectAll("g.trace").each(function(G,I){m(t,I,u,G,v,this,E)})})):w.each(function(G,I){m(t,I,u,G,v,this,E)});B&&w.exit().remove();x.selectAll("path:not([d])").remove()}},{"../../components/drawing":637,"../../lib":749,"../../lib/polygon":761,"../../registry":880,"./line_points":1169,"./link_traces":1171,"./subtypes":1179,d3:169}],
1176:[function(b,y,D){var n=b("./subtypes");y.exports=function(m,p){var h=m.cd,a=m.xaxis,d=m.yaxis,e=[],l=h[0].trace;if(!n.hasMarkers(l)&&!n.hasText(l))return[];if(!1===p)for(l=0;l<h.length;l++)h[l].selected=0;else for(l=0;l<h.length;l++){var k=h[l];var c=a.c2p(k.x);var f=d.c2p(k.y);null!==k.i&&p.contains([c,f],!1,l,m)?(e.push({pointNumber:k.i,x:a.c2d(k.x),y:d.c2d(k.y)}),k.selected=1):k.selected=0}return e}},{"./subtypes":1179}],1177:[function(b,y,D){var n=["orientation","groupnorm","stackgaps"];
y.exports=function(m,p,h,a){h=h._scatterStackOpts;var d=a("stackgroup");if(d){var e=p.xaxis+p.yaxis,l=h[e];l||(l=h[e]={});h=l[d];e=!1;h?h.traces.push(p):(h=l[d]={traceIndices:[],traces:[p]},e=!0);p={orientation:p.x&&!p.y?"h":"v"};for(d=0;d<n.length;d++){l=n[d];var k=l+"Found";if(!h[k]){var c=void 0!==m[l],f="orientation"===l;if(c||e)if(h[l]=a(l,p[l]),f&&(h.fillDflt="h"===h[l]?"tonextx":"tonexty"),c&&(h[k]=!0,!e&&(delete h.traces[0][l],f)))for(l=0;l<h.traces.length-1;l++)k=h.traces[l],k._input.fill!==
k.fill&&(k.fill=h.fillDflt)}}return h}}},{}],1178:[function(b,y,D){function n(d,e,l){h.pointStyle(d.selectAll("path.point"),e,l)}function m(d,e,l){h.textPointStyle(d.selectAll("text"),e,l)}var p=b("d3"),h=b("../../components/drawing"),a=b("../../registry");y.exports={style:function(d){var e=p.select(d).selectAll("g.trace.scatter");e.style("opacity",function(l){return l[0].trace.opacity});e.selectAll("g.points").each(function(l){var k=p.select(this);n(k,l.trace||l[0].trace,d)});e.selectAll("g.text").each(function(l){var k=
p.select(this);m(k,l.trace||l[0].trace,d)});e.selectAll("g.trace path.js-line").call(h.lineGroupStyle);e.selectAll("g.trace path.js-fill").call(h.fillGroupStyle);a.getComponentMethod("errorbars","style")(e)},stylePoints:n,styleText:m,styleOnSelect:function(d,e,l){e=e[0].trace;e.selectedpoints?(h.selectedPointStyle(l.selectAll("path.point"),e),h.selectedTextStyle(l.selectAll("text"),e)):(n(l,e,d),m(l,e,d))}}},{"../../components/drawing":637,"../../registry":880,d3:169}],1179:[function(b,y,D){var n=
b("../../lib");y.exports={hasLines:function(m){return m.visible&&m.mode&&-1!==m.mode.indexOf("lines")},hasMarkers:function(m){return m.visible&&(m.mode&&-1!==m.mode.indexOf("markers")||"splom"===m.type)},hasText:function(m){return m.visible&&m.mode&&-1!==m.mode.indexOf("text")},isBubble:function(m){return n.isPlainObject(m.marker)&&n.isArrayOrTypedArray(m.marker.size)}}},{"../../lib":749}],1180:[function(b,y,D){var n=b("../../lib");y.exports=function(m,p,h,a,d){d=d||{};a("textposition");n.coerceFont(a,
"textfont",h.font);d.noSelect||(a("selected.textfont.color"),a("unselected.textfont.color"))}},{"../../lib":749}],1181:[function(b,y,D){var n=b("../../lib"),m=b("../../registry");y.exports=function(p,h,a,d){var e=d("x"),l=d("y");m.getComponentMethod("calendars","handleTraceDefaults")(p,h,["x","y"],a);if(e)p=n.minRowLength(e),l?l=Math.min(p,n.minRowLength(l)):(l=p,d("y0"),d("dy"));else{if(!l)return 0;l=n.minRowLength(l);d("x0");d("dx")}return h._length=l}},{"../../lib":749,"../../registry":880}],1182:[function(b,
y,D){function n(f){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}D=b("../scatter/attributes");var m=b("../../components/colorscale/attributes"),p=b("../../plots/template_attributes").hovertemplateAttrs,h=b("../../plots/template_attributes").texttemplateAttrs,a=b("../../plots/attributes"),d=b("../../constants/gl3d_dashes"),e=b("../../constants/gl3d_markers"),l=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;
var k=D.marker,c=k.line;d=l({width:D.line.width,dash:{valType:"enumerated",values:Object.keys(d),dflt:"solid"}},m("line"));y=y.exports=b({x:D.x,y:D.y,z:{valType:"data_array"},text:l({},D.text,{}),texttemplate:h({},{}),hovertext:l({},D.hovertext,{}),hovertemplate:p(),mode:l({},D.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:n("x"),y:n("y"),z:n("z")},connectgaps:D.connectgaps,line:d,marker:l({symbol:{valType:"enumerated",
values:Object.keys(e),dflt:"circle",arrayOk:!0},size:l({},k.size,{dflt:8}),sizeref:k.sizeref,sizemin:k.sizemin,sizemode:k.sizemode,opacity:l({},k.opacity,{arrayOk:!1}),colorbar:k.colorbar,line:l({width:l({},c.width,{arrayOk:!1})},m("marker.line"))},m("marker")),textposition:l({},D.textposition,{dflt:"top center"}),textfont:{color:D.textfont.color,size:D.textfont.size,family:l({},D.textfont.family,{arrayOk:!1})},hoverinfo:l({},a.hoverinfo)},"calc","nested");y.x.editType=y.y.editType=y.z.editType="calc+clearAxisTypes"},
{"../../components/colorscale/attributes":622,"../../constants/gl3d_dashes":721,"../../constants/gl3d_markers":722,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1183:[function(b,y,D){var n=b("../scatter/arrays_to_calcdata"),m=b("../scatter/colorscale_calc");y.exports=function(p,h){var a=[{x:!1,y:!1,trace:h,t:{}}];n(a,h);m(p,h);return a}},{"../scatter/arrays_to_calcdata":1154,"../scatter/colorscale_calc":1158}],
1184:[function(b,y,D){function n(p,h,a,d){if(!h||!h.visible)return null;h=m.getComponentMethod("errorbars","makeComputeError")(h);for(var e=Array(p.length),l=0;l<p.length;l++){var k=h(+p[l],l);if("log"===d.type){var c=d.c2l(p[l]),f=p[l]-k[0];k=p[l]+k[1];e[l]=[(d.c2l(f,!0)-c)*a,(d.c2l(k,!0)-c)*a];0<f&&(c=d.c2l(f),d._lowerLogErrorBound||(d._lowerLogErrorBound=c),d._lowerErrorBound=Math.min(d._lowerLogErrorBound,c))}else e[l]=[-k[0]*a,k[1]*a]}return e}var m=b("../../registry");y.exports=function(p,h,
a){p=[n(p.x,p.error_x,h[0],a.xaxis),n(p.y,p.error_y,h[1],a.yaxis),n(p.z,p.error_z,h[2],a.zaxis)];a:{for(h=0;h<p.length;h++)if(p[h]){h=p[h].length;break a}h=0}if(0===h)return null;a=Array(h);for(var d=0;d<h;d++){for(var e=[[0,0,0],[0,0,0]],l=0;3>l;l++)if(p[l])for(var k=0;2>k;k++)e[k][l]=p[l][d][k];a[d]=e}return a}},{"../../registry":880}],1185:[function(b,y,D){function n(I,J){this.scene=I;this.uid=J;this.color=this.delaunayMesh=this.textMarkers=this.errorBars=this.scatterPlot=this.linePlot=null;this.mode=
"";this.dataPoints=[];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.data=this.textLabels=null}function m(I){for(var J=[0,0,0],K=[[0,0,0],[0,0,0],[0,0,0]],N=[1,1,1],H=0;3>H;H++){var L=I[H];L&&!1!==L.copy_zstyle&&!1!==I[2].visible&&(L=I[2]);L&&L.visible&&(J[H]=L.width/2,K[H]=x(L.color),N[H]=L.thickness)}return{capSize:J,color:K,lineWidth:N}}function p(I){return null===I||void 0===I?0:-1<I.indexOf("left")?-1:-1<I.indexOf("right")?1:0}function h(I){return null===
I||void 0===I?0:-1<I.indexOf("top")?-1:-1<I.indexOf("bottom")?1:0}function a(I){var J=[0,0];if(Array.isArray(I))for(var K=0;K<I.length;K++)J[K]=[0,0],I[K]&&(J[K][0]=p(I[K]),J[K][1]=h(I[K]));else J[0]=p(I),J[1]=h(I);return J}function d(I,J){return J(4*I)}function e(I){return B[I]}function l(I,J,K,N,H){if(w.isArrayOrTypedArray(I)){var L=[];for(var P=0;P<J;P++)L[P]=void 0===I[P]?N:K(I[P],H)}else L=K(I,w.identity);return L}function k(I,J){function K(ma,pa){ma=H[ma];return C.tickText(ma,ma.d2l(pa),!0).text}
var N=[],H=I.fullSceneLayout,L=I.dataScale,P=H.xaxis,Q=H.yaxis,S=H.zaxis,O=J.marker,U=J.line,X=J.x||[],da=J.y||[],ea=J.z||[],ca=X.length,ia=J.xcalendar,ha=J.ycalendar,fa=J.zcalendar,na;for(na=0;na<ca;na++){var sa=P.d2l(X[na],0,ia)*L[0];var ua=Q.d2l(da[na],0,ha)*L[1];var ta=S.d2l(ea[na],0,fa)*L[2];N[na]=[sa,ua,ta]}if(Array.isArray(J.text))var oa=J.text;else if(void 0!==J.text)for(oa=Array(ca),na=0;na<ca;na++)oa[na]=J.text;var va=J.texttemplate;if(va)for(I=I.fullLayout._d3locale,P=(na=Array.isArray(va))?
Math.min(va.length,ca):ca,Q=na?function(ma){return va[ma]}:function(){return va},oa=Array(P),na=0;na<P;na++)S={x:X[na],y:da[na],z:ea[na]},ia={xLabel:K("xaxis",X[na]),yLabel:K("yaxis",da[na]),zLabel:K("zaxis",ea[na])},ha={},v(ha,J,na),fa=J._meta||{},oa[na]=w.texttemplateString(Q(na),ia,I,ha,S,fa);N={position:N,mode:J.mode,text:oa};"line"in J&&(N.lineColor=E(U,1,ca),N.lineWidth=U.width,N.lineDashes=U.dash);"marker"in J&&(na=F(J),N.scatterColor=E(O,1,ca),N.scatterSize=l(O.size,ca,d,20,na),N.scatterMarker=
l(O.symbol,ca,e,""),N.scatterLineWidth=O.line.width,N.scatterLineColor=E(O.line,1,ca),N.scatterAngle=0);"textposition"in J&&(N.textOffset=a(J.textposition),N.textColor=E(J.textfont,1,ca),N.textSize=l(J.textfont.size,ca,w.identity,12),N.textFont=J.textfont.family,N.textAngle=0);O=["x","y","z"];N.project=[!1,!1,!1];N.projectScale=[1,1,1];N.projectOpacity=[1,1,1];for(na=0;3>na;++na)if(ca=J.projection[O[na]],N.project[na]=ca.show)N.projectOpacity[na]=ca.opacity,N.projectScale[na]=ca.scale;N.errorBounds=
G(J,L,H);L=m([J.error_x,J.error_y,J.error_z]);N.errorColor=L.color;N.errorLineWidth=L.lineWidth;N.errorCapSize=L.capSize;N.delaunayAxis=J.surfaceaxis;N.delaunayColor=x(J.surfacecolor);return N}function c(I){if(Array.isArray(I)){var J=I[0];Array.isArray(J)&&(I=J);return"rgb("+I.slice(0,3).map(function(K){return Math.round(255*K)})+")"}return null}var f=b("gl-line3d"),g=b("gl-scatter3d"),q=b("gl-error3d"),t=b("gl-mesh3d"),u=b("delaunay-triangulate"),w=b("../../lib"),x=b("../../lib/str2rgbarray"),E=
b("../../lib/gl_format_color").formatColor,F=b("../scatter/make_bubble_size_func"),z=b("../../constants/gl3d_dashes"),B=b("../../constants/gl3d_markers"),C=b("../../plots/cartesian/axes"),v=b("../../components/fx/helpers").appendArrayPointValue,G=b("./calc_errors");b=n.prototype;b.handlePick=function(I){if(I.object&&(I.object===this.linePlot||I.object===this.delaunayMesh||I.object===this.textMarkers||I.object===this.scatterPlot)){var J=I.index=I.data.index;I.object.highlight&&I.object.highlight(null);
this.scatterPlot&&(I.object=this.scatterPlot,this.scatterPlot.highlight(I.data));I.textLabel="";if(this.textLabels)if(Array.isArray(this.textLabels)){if(this.textLabels[J]||0===this.textLabels[J])I.textLabel=this.textLabels[J]}else I.textLabel=this.textLabels;I.traceCoordinate=[this.data.x[J],this.data.y[J],this.data.z[J]];return!0}};b.update=function(I){var J=this.scene.glplot.gl;var K=z.solid;this.data=I;var N=k(this.scene,I);"mode"in N&&(this.mode=N.mode);"lineDashes"in N&&N.lineDashes in z&&(K=
z[N.lineDashes]);this.color=c(N.scatterColor)||c(N.lineColor);this.dataPoints=N.position;K={gl:this.scene.glplot.gl,position:N.position,color:N.lineColor,lineWidth:N.lineWidth||1,dashes:K[0],dashScale:K[1],opacity:I.opacity,connectGaps:I.connectgaps};-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(K):(this.linePlot=f(K),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);
K=I.opacity;I.marker&&I.marker.opacity&&(K*=I.marker.opacity);K={gl:this.scene.glplot.gl,position:N.position,color:N.scatterColor,size:N.scatterSize,glyph:N.scatterMarker,opacity:K,orthographic:!0,lineWidth:N.scatterLineWidth,lineColor:N.scatterLineColor,project:N.project,projectScale:N.projectScale,projectOpacity:N.projectOpacity};-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(K):(this.scatterPlot=g(K),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):
this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null);K={gl:this.scene.glplot.gl,position:N.position,glyph:N.text,color:N.textColor,size:N.textSize,angle:N.textAngle,alignment:N.textOffset,font:N.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:I.opacity};this.textLabels=I.hovertext||I.text;-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(K):(this.textMarkers=g(K),this.textMarkers._trace=this,this.textMarkers.highlightScale=
1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null);K={gl:this.scene.glplot.gl,position:N.position,color:N.errorColor,error:N.errorBounds,lineWidth:N.errorLineWidth,capSize:N.errorCapSize,opacity:I.opacity};this.errorBars?N.errorBounds?this.errorBars.update(K):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):N.errorBounds&&(this.errorBars=q(K),this.errorBars._trace=
this,this.scene.glplot.add(this.errorBars));if(0<=N.delaunayAxis){K=N.position;var H=N.delaunayColor;N=N.delaunayAxis;var L=(N+1)%3,P=(N+2)%3,Q=[];N=[];var S;for(S=0;S<K.length;++S){var O=K[S];!isNaN(O[L])&&isFinite(O[L])&&!isNaN(O[P])&&isFinite(O[P])&&(Q.push([O[L],O[P]]),N.push(S))}L=u(Q);for(S=0;S<L.length;++S)for(P=L[S],Q=0;Q<P.length;++Q)P[Q]=N[P[Q]];K={positions:K,cells:L,meshColor:H};K.opacity=I.opacity;this.delaunayMesh?this.delaunayMesh.update(K):(K.gl=J,this.delaunayMesh=t(K),this.delaunayMesh._trace=
this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};b.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose());this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose());this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose());this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),
this.textMarkers.dispose());this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};y.exports=function(I,J){I=new n(I,J.uid);I.update(J);return I}},{"../../components/fx/helpers":651,"../../constants/gl3d_dashes":721,"../../constants/gl3d_markers":722,"../../lib":749,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../../plots/cartesian/axes":797,"../scatter/make_bubble_size_func":1172,"./calc_errors":1184,"delaunay-triangulate":171,"gl-error3d":264,
"gl-line3d":271,"gl-mesh3d":292,"gl-scatter3d":308}],1186:[function(b,y,D){function n(k,c,f,g){var q=0,t=f("x"),u=f("y");f=f("z");m.getComponentMethod("calendars","handleTraceDefaults")(k,c,["x","y","z"],g);t&&u&&f&&(q=Math.min(t.length,u.length,f.length),c._length=c._xlength=c._ylength=c._zlength=q);return q}var m=b("../../registry"),p=b("../../lib"),h=b("../scatter/subtypes"),a=b("../scatter/marker_defaults"),d=b("../scatter/line_defaults"),e=b("../scatter/text_defaults"),l=b("./attributes");y.exports=
function(k,c,f,g){function q(E,F){return p.coerce(k,c,l,E,F)}if(n(k,c,q,g)){q("text");q("hovertext");q("hovertemplate");q("mode");h.hasLines(c)&&(q("connectgaps"),d(k,c,f,g,q));h.hasMarkers(c)&&a(k,c,f,g,q,{noSelect:!0});h.hasText(c)&&(q("texttemplate"),e(k,c,g,q,{noSelect:!0}));g=(c.line||{}).color;var t=(c.marker||{}).color;0<=q("surfaceaxis")&&q("surfacecolor",g||t);for(var u=["x","y","z"],w=0;3>w;++w){var x="projection."+u[w];q(x+".show")&&(q(x+".opacity"),q(x+".scale"))}u=m.getComponentMethod("errorbars",
"supplyDefaults");u(k,c,g||t||f,{axis:"z"});u(k,c,g||t||f,{axis:"y",inherit:"z"});u(k,c,g||t||f,{axis:"x",inherit:"z"})}else c.visible=!1}},{"../../lib":749,"../../registry":880,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1182}],1187:[function(b,y,D){y.exports={plot:b("./convert"),attributes:b("./attributes"),markerSymbols:b("../../constants/gl3d_markers"),supplyDefaults:b("./defaults"),colorbar:[{container:"marker",
min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:b("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":722,"../../plots/gl3d":839,"./attributes":1182,"./calc":1183,"./convert":1185,"./defaults":1186}],1188:[function(b,y,D){D=b("../scatter/attributes");var n=b("../../plots/attributes"),m=b("../../plots/template_attributes").hovertemplateAttrs,p=b("../../plots/template_attributes").texttemplateAttrs,
h=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;var a=D.marker,d=D.line,e=a.line;y.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:b({},D.mode,{dflt:"markers"}),text:b({},D.text,{}),texttemplate:p({editType:"plot"},{keys:["a","b","text"]}),hovertext:b({},D.hovertext,{}),line:{color:d.color,width:d.width,dash:d.dash,shape:b({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,
editType:"calc"},connectgaps:D.connectgaps,fill:b({},D.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:D.fillcolor,marker:b({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:b({width:e.width,editType:"calc"},h("marker.line")),gradient:a.gradient,editType:"calc"},h("marker")),textfont:D.textfont,textposition:D.textposition,selected:D.selected,unselected:D.unselected,hoverinfo:b({},n.hoverinfo,{flags:["a",
"b","text","name"]}),hoveron:D.hoveron,hovertemplate:m()}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1189:[function(b,y,D){var n=b("fast-isnumeric"),m=b("../scatter/colorscale_calc"),p=b("../scatter/arrays_to_calcdata"),h=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,d=b("../carpet/lookup_carpetid");y.exports=function(e,l){var k=l._carpetTrace=d(e,l);
if(k&&k.visible&&"legendonly"!==k.visible){var c;l.xaxis=k.xaxis;l.yaxis=k.yaxis;var f=l._length,g=Array(f),q=!1;for(c=0;c<f;c++){var t=l.a[c];var u=l.b[c];if(n(t)&&n(u)){var w=k.ab2xy(+t,+u,!0),x=k.isVisible(+t,+u);x||(q=!0);g[c]={x:w[0],y:w[1],a:t,b:u,vis:x}}else g[c]={x:!1,y:!1}}l._needsCull=q;g[0].carpet=k;g[0].trace=l;a(l,f);m(e,l);p(g,l);h(g,l);return g}}},{"../carpet/lookup_carpetid":950,"../scatter/arrays_to_calcdata":1154,"../scatter/calc":1156,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,
"fast-isnumeric":241}],1190:[function(b,y,D){var n=b("../../lib"),m=b("../scatter/constants"),p=b("../scatter/subtypes"),h=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),d=b("../scatter/line_shape_defaults"),e=b("../scatter/text_defaults"),l=b("../scatter/fillcolor_defaults"),k=b("./attributes");y.exports=function(c,f,g,q){function t(x,E){return n.coerce(c,f,k,x,E)}t("carpet");f.xaxis="x";f.yaxis="y";var u=t("a"),w=t("b");if(u=Math.min(u.length,w.length)){f._length=u;t("text");t("texttemplate");
t("hovertext");t("mode",u<m.PTS_LINESONLY?"lines+markers":"lines");p.hasLines(f)&&(a(c,f,g,q,t),d(c,f,t),t("connectgaps"));p.hasMarkers(f)&&h(c,f,g,q,t,{gradient:!0});p.hasText(f)&&e(c,f,q,t);q=[];if(p.hasMarkers(f)||p.hasText(f))t("marker.maxdisplayed"),q.push("points");t("fill");"none"!==f.fill&&(l(c,f,g,t),p.hasLines(f)||d(c,f,t));"tonext"!==f.fill&&"toself"!==f.fill||q.push("fills");"fills"!==t("hoveron",q.join("+")||"points")&&t("hovertemplate");n.coerceSelectionMarkerOpacity(f,t)}else f.visible=
!1}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/line_shape_defaults":1170,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1188}],1191:[function(b,y,D){y.exports=function(n,m,p,h,a){m=h[a];n.a=m.a;n.b=m.b;n.y=m.y;return n}},{}],1192:[function(b,y,D){y.exports=function(n,m){var p={};m=m._carpet;n=m.ab2ij([n.a,n.b]);var h=Math.floor(n[0]),a=Math.floor(n[1]);m=
m.evalxy([],h,a,n[0]-h,n[1]-a);p.yLabel=m[1].toFixed(3);return p}},{}],1193:[function(b,y,D){var n=b("../scatter/hover"),m=b("../../lib").fillText;y.exports=function(p,h,a,d){function e(f,g){var q=f.labelprefix&&0<f.labelprefix.length?f.labelprefix.replace(/ = $/,""):f._hovertitle;c.push(q+": "+g.toFixed(3)+f.labelsuffix)}if((h=n(p,h,a,d))&&!1!==h[0].index){a=h[0];if(void 0===a.index)return d=p.xa._length,p=d*(1-a.y0/p.ya._length)/2,d-=p,a.x0=Math.max(Math.min(a.x0,d),p),a.x1=Math.max(Math.min(a.x1,
d),p),h;p=a.cd[a.index];a.a=p.a;a.b=p.b;a.xLabelVal=void 0;a.yLabelVal=void 0;d=a.trace;var l=d._carpet,k=d._module.formatLabels(p,d);a.yLabel=k.yLabel;delete a.text;var c=[];d.hovertemplate||(k=(p.hi||d.hoverinfo).split("+"),-1!==k.indexOf("all")&&(k=["a","b","text"]),-1!==k.indexOf("a")&&e(l.aaxis,p.a),-1!==k.indexOf("b")&&e(l.baxis,p.b),c.push("y: "+a.yLabel),-1!==k.indexOf("text")&&m(p,d,c),a.extraText=c.join("\x3cbr\x3e"));return h}}},{"../../lib":749,"../scatter/hover":1166}],1194:[function(b,
y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:b("../../plots/cartesian"),categories:"svg carpet symbols showLegend carpetDependent zoomScale".split(" "),
meta:{}}},{"../../plots/cartesian":810,"../scatter/marker_colorbar":1173,"../scatter/select":1176,"../scatter/style":1178,"./attributes":1188,"./calc":1189,"./defaults":1190,"./event_data":1191,"./format_labels":1192,"./hover":1193,"./plot":1195}],1195:[function(b,y,D){var n=b("../scatter/plot"),m=b("../../plots/cartesian/axes"),p=b("../../components/drawing");y.exports=function(h,a,d,e){var l=d[0][0].carpet;a={xaxis:m.getFromId(h,l.xaxis||"x"),yaxis:m.getFromId(h,l.yaxis||"y"),plot:a.plot};n(h,a,
d,e);for(a=0;a<d.length;a++)l=d[a][0].trace,l=e.selectAll("g.trace"+l.uid+" .js-line"),p.setClipUrl(l,d[a][0].carpet._clipPathId,h)}},{"../../components/drawing":637,"../../plots/cartesian/axes":797,"../scatter/plot":1175}],1196:[function(b,y,D){D=b("../../plots/template_attributes").hovertemplateAttrs;var n=b("../../plots/template_attributes").texttemplateAttrs,m=b("../scatter/attributes"),p=b("../../plots/attributes"),h=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash,
d=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var e=m.marker,l=m.line,k=e.line;y.exports=b({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:d({},m.mode,{dflt:"markers"}),text:d({},m.text,{}),texttemplate:n({editType:"plot"},
{keys:["lat","lon","location","text"]}),hovertext:d({},m.hovertext,{}),textfont:m.textfont,textposition:m.textposition,line:{color:l.color,width:l.width,dash:a},connectgaps:m.connectgaps,marker:d({symbol:e.symbol,opacity:e.opacity,size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,colorbar:e.colorbar,line:d({width:k.width},h("marker.line")),gradient:e.gradient},h("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:m.fillcolor,selected:m.selected,
unselected:m.unselected,hoverinfo:d({},p.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:D()},"calc","nested")},{"../../components/colorscale/attributes":622,"../../components/drawing/attributes":636,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1197:[function(b,y,D){function n(l){return l&&"string"===typeof l}var m=b("fast-isnumeric"),p=b("../../constants/numerical").BADNUM,
h=b("../scatter/colorscale_calc"),a=b("../scatter/arrays_to_calcdata"),d=b("../scatter/calc_selection"),e=b("../../lib")._;y.exports=function(l,k){var c=Array.isArray(k.locations),f=c?k.locations.length:k._length,g=Array(f);var q=k.geojson?function(E){return n(E)||m(E)}:n;for(var t=0;t<f;t++){var u=g[t]={};if(c){var w=k.locations[t];u.loc=q(w)?w:null}else{w=k.lon[t];var x=k.lat[t];m(w)&&m(x)?u.lonlat=[+w,+x]:u.lonlat=[p,p]}}a(g,k);h(l,k);d(g,k);f&&(g[0].t={labels:{lat:e(l,"lat:")+" ",lon:e(l,"lon:")+
" "}});return g}},{"../../constants/numerical":724,"../../lib":749,"../scatter/arrays_to_calcdata":1154,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,"fast-isnumeric":241}],1198:[function(b,y,D){var n=b("../../lib"),m=b("../scatter/subtypes"),p=b("../scatter/marker_defaults"),h=b("../scatter/line_defaults"),a=b("../scatter/text_defaults"),d=b("../scatter/fillcolor_defaults"),e=b("./attributes");y.exports=function(l,k,c,f){function g(w,x){return n.coerce(l,k,e,w,x)}var q=g("locations");
if(q&&q.length){var t=g("geojson");if("string"===typeof t&&""!==t||n.isPlainObject(t))var u="geojson-id";"geojson-id"===g("locationmode",u)&&g("featureidkey");q=q.length}else q=g("lon")||[],t=g("lat")||[],q=Math.min(q.length,t.length);q?(k._length=q,g("text"),g("hovertext"),g("hovertemplate"),g("mode"),m.hasLines(k)&&(h(l,k,c,f,g),g("connectgaps")),m.hasMarkers(k)&&p(l,k,c,f,g,{gradient:!0}),m.hasText(k)&&(g("texttemplate"),a(l,k,f,g)),g("fill"),"none"!==k.fill&&d(l,k,c,g),n.coerceSelectionMarkerOpacity(k,
g)):k.visible=!1}},{"../../lib":749,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1196}],1199:[function(b,y,D){y.exports=function(n,m,p,h,a){n.lon=m.lon;n.lat=m.lat;n.location=m.loc?m.loc:null;m=h[a];m.fIn&&m.fIn.properties&&(n.properties=m.fIn.properties);return n}},{}],1200:[function(b,y,D){var n=b("../../plots/cartesian/axes");y.exports=function(m,p,h){var a={};p=h[p.geo]._subplot.mockAxis;
m=m.lonlat;a.lonLabel=n.tickText(p,p.c2l(m[0]),!0).text;a.latLabel=n.tickText(p,p.c2l(m[1]),!0).text;return a}},{"../../plots/cartesian/axes":797}],1201:[function(b,y,D){function n(e,l,k,c){if(!e.hovertemplate){var f=l.hi||e.hoverinfo,g="all"===f?d.hoverinfo.flags:f.split("+");f=-1!==g.indexOf("location")&&Array.isArray(e.locations);var q=-1!==g.indexOf("lon"),t=-1!==g.indexOf("lat");g=-1!==g.indexOf("text");var u=[];f?u.push(l.loc):q&&t?u.push("("+(k.lonLabel+", ")+(k.latLabel+")")):q?u.push(c.lon+
(k.lonLabel+"")):t&&u.push(c.lat+(k.latLabel+""));g&&a(l,e,u);return u.join("\x3cbr\x3e")}}var m=b("../../components/fx"),p=b("../../constants/numerical").BADNUM,h=b("../scatter/get_trace_color"),a=b("../../lib").fillText,d=b("./attributes");y.exports=function(e,l,k){var c=e.cd,f=c[0].trace,g=e.xa,q=e.ya,t=e.subplot,u=t.projection.isLonLatOverEdges,w=t.project;m.getClosest(c,function(F){var z=F.lonlat;if(z[0]===p||u(z))return Infinity;var B=w(z),C=w([l,k]);z=Math.abs(B[0]-C[0]);B=Math.abs(B[1]-
C[1]);F=Math.max(3,F.mrc||0);return Math.max(Math.sqrt(z*z+B*B)-F,1-3/F)},e);if(!1!==e.index){var x=c[e.index],E=x.lonlat;g=[g.c2p(E),q.c2p(E)];q=x.mrc||1;e.x0=g[0]-q;e.x1=g[0]+q;e.y0=g[1]-q;e.y1=g[1]+q;e.loc=x.loc;e.lon=E[0];e.lat=E[1];E={};E[f.geo]={_subplot:t};t=f._module.formatLabels(x,f,E);e.lonLabel=t.lonLabel;e.latLabel=t.latLabel;e.color=h(f,x);e.extraText=n(f,x,e,c[0].t.labels);e.hovertemplate=f.hovertemplate;return[e]}}},{"../../components/fx":655,"../../constants/numerical":724,"../../lib":749,
"../scatter/get_trace_color":1165,"./attributes":1196}],1202:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:b("../../plots/geo"),
categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":829,"../scatter/marker_colorbar":1173,"../scatter/style":1178,"./attributes":1196,"./calc":1197,"./defaults":1198,"./event_data":1199,"./format_labels":1200,"./hover":1201,"./plot":1203,"./select":1204,"./style":1205}],1203:[function(b,y,D){var n=b("d3"),m=b("../../lib"),p=b("../../lib/topojson_utils").getTopojsonFeatures,h=b("../../lib/geojson_utils"),a=b("../../lib/geo_location_utils"),d=b("../../plots/cartesian/autorange").findExtremes,
e=b("../../constants/numerical").BADNUM,l=b("../scatter/calc").calcMarkerSize,k=b("../scatter/subtypes"),c=b("./style");y.exports={calcGeoJSON:function(f,g){var q=f[0].trace;g=g[q.geo];var t=g._subplot,u=q._length;if(Array.isArray(q.locations)){var w=q.locationmode,x="geojson-id"===w?a.extractTraceFeature(f):p(q,t.topojson);for(t=0;t<u;t++){var E=f[t];var F="geojson-id"===w?E.fOut:a.locationToFeature(w,E.loc,x);E.lonlat=F?F.properties.ct:[e,e]}}w={padded:!0};if("geojson"===g.fitbounds&&"geojson-id"===
q.locationmode)f=a.computeBbox(a.getTraceGeojson(q)),x=[f[0],f[2]],F=[f[1],f[3]];else{x=Array(u);F=Array(u);for(t=0;t<u;t++)E=f[t],x[t]=E.lonlat[0],F[t]=E.lonlat[1];w.ppad=l(q,u)}q._extremes.lon=d(g.lonaxis._ax,x,w);q._extremes.lat=d(g.lataxis._ax,F,w)},plot:function(f,g,q){g=g.layers.frontplot.select(".scatterlayer");q=m.makeTraceGroups(g,q,"trace scattergeo");q.selectAll("*").remove();q.each(function(t){var u=n.select(this),w=t[0].trace;if(k.hasLines(w)||"none"!==w.fill){var x=h.calcTraceToLineCoords(t);
x="none"!==w.fill?h.makePolygon(x):h.makeLine(x);u.selectAll("path.js-line").data([{geojson:x,trace:w}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}k.hasMarkers(w)&&u.selectAll("path.point").data(m.identity).enter().append("path").classed("point",!0).each(function(E){E.lonlat[0]===e&&n.select(this).remove()});k.hasText(w)&&u.selectAll("g").data(m.identity).enter().append("g").append("text").each(function(E){E.lonlat[0]===e&&n.select(this).remove()});c(f,t)})}}},{"../../constants/numerical":724,
"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/geojson_utils":743,"../../lib/topojson_utils":776,"../../plots/cartesian/autorange":796,"../scatter/calc":1156,"../scatter/subtypes":1179,"./style":1205,d3:169}],1204:[function(b,y,D){var n=b("../scatter/subtypes"),m=b("../../constants/numerical").BADNUM;y.exports=function(p,h){var a=p.cd,d=p.xaxis,e=p.yaxis,l=[],k=a[0].trace,c;if(!n.hasMarkers(k)&&!n.hasText(k))return[];if(!1===h)for(c=0;c<a.length;c++)a[c].selected=0;else for(c=0;c<a.length;c++){k=
a[c];var f=k.lonlat;if(f[0]!==m){var g=d.c2p(f);var q=e.c2p(f);h.contains([g,q],null,c,p)?(l.push({pointNumber:c,lon:f[0],lat:f[1]}),k.selected=1):k.selected=0}}return l}},{"../../constants/numerical":724,"../scatter/subtypes":1179}],1205:[function(b,y,D){function n(e,l){var k=l[0].trace,c=l[0].node3;c.style("opacity",l[0].trace.opacity);a(c,k,e);d(c,k,e);c.selectAll("path.js-line").style("fill","none").each(function(f){var g=m.select(this);f=f.trace;var q=f.line||{};g.call(h.stroke,q.color).call(p.dashLine,
q.dash||"",q.width||0);"none"!==f.fill&&g.call(h.fill,f.fillcolor)})}var m=b("d3"),p=b("../../components/drawing"),h=b("../../components/color");b=b("../scatter/style");var a=b.stylePoints,d=b.styleText;y.exports=function(e,l){l&&n(e,l)}},{"../../components/color":615,"../../components/drawing":637,"../scatter/style":1178,d3:169}],1206:[function(b,y,D){var n=b("../../plots/attributes");D=b("../scatter/attributes");var m=b("../../components/colorscale/attributes"),p=b("../../lib/extend").extendFlat,
h=b("../../plot_api/edit_types").overrideAll;b=b("./constants").DASHES;var a=D.line,d=D.marker,e=d.line;y=y.exports=h({x:D.x,x0:D.x0,dx:D.dx,y:D.y,y0:D.y0,dy:D.dy,text:D.text,hovertext:D.hovertext,textposition:D.textposition,textfont:D.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:a.color,width:a.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(b),
dflt:"solid"}},marker:p({},m("marker"),{symbol:d.symbol,size:d.size,sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:d.opacity,colorbar:d.colorbar,line:p({},m("marker.line"),{width:e.width})}),connectgaps:D.connectgaps,fill:p({},D.fill,{dflt:"none"}),fillcolor:D.fillcolor,selected:{marker:D.selected.marker,textfont:D.selected.textfont},unselected:{marker:D.unselected.marker,textfont:D.unselected.textfont},opacity:n.opacity},"calc","nested");y.x.editType=y.y.editType=y.x0.editType=y.y0.editType=
"calc+clearAxisTypes";y.hovertemplate=D.hovertemplate;y.texttemplate=D.texttemplate},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../scatter/attributes":1155,"./constants":1208}],1207:[function(b,y,D){function n(t,u,w){t=t._extremes[u._id];u=a(u,w._bnds,{padded:!0});t.min=t.min.concat(u.min);t.max=t.max.concat(u.max)}var m=b("@plotly/point-cluster"),p=b("../../lib"),h=b("../../plots/cartesian/axis_ids"),a=b("../../plots/cartesian/autorange").findExtremes;
D=b("../scatter/calc");var d=D.calcMarkerSize,e=D.calcAxisExpansion,l=D.setFirstScatter,k=b("../scatter/colorscale_calc"),c=b("./convert"),f=b("./scene_update"),g=b("../../constants/numerical").BADNUM,q=b("./constants").TOO_MANY_POINTS;y.exports=function(t,u){var w=t._fullLayout,x=h.getFromId(t,u.xaxis),E=h.getFromId(t,u.yaxis),F=w._plots[u.xaxis+u.yaxis],z=u._length,B=z>=q,C=2*z,v={},G,I=u._x=x.makeCalcdata(u,"x"),J=u._y=E.makeCalcdata(u,"y"),K=Array(C);for(G=0;G<z;G++){var N=I[G];var H=J[G];K[2*
G]=N===g?NaN:N;K[2*G+1]=H===g?NaN:H}if("log"===x.type)for(G=0;G<C;G+=2)K[G]=x.c2l(K[G]);if("log"===E.type)for(G=1;G<C;G+=2)K[G]=E.c2l(K[G]);if(B&&"log"!==x.type&&"log"!==E.type)v.tree=m(K);else for(C=v.ids=Array(z),G=0;G<z;G++)C[G]=G;k(t,u);G=c.style(t,u);G.marker&&(G.marker.positions=K);G.line&&1<K.length&&p.extendFlat(G.line,c.linePositions(t,u,K));if(G.errorX||G.errorY)C=c.errorBarPositions(t,u,K,I,J),G.errorX&&p.extendFlat(G.errorX,C.x),G.errorY&&p.extendFlat(G.errorY,C.y);G.text&&(p.extendFlat(G.text,
{positions:K},c.textPosition(t,u,G.text,G.marker)),p.extendFlat(G.textSel,{positions:K},c.textPosition(t,u,G.text,G.markerSel)),p.extendFlat(G.textUnsel,{positions:K},c.textPosition(t,u,G.text,G.markerUnsel)));F=f(t,F);l(w,u);var L;B?G.marker&&(L=2*(G.marker.sizeAvg||Math.max(G.marker.size,3))):L=d(u,z);e(t,u,x,E,I,J,L);G.errorX&&n(u,x,G.errorX);G.errorY&&n(u,E,G.errorY);G.fill&&!F.fill2d&&(F.fill2d=!0);G.marker&&!F.scatter2d&&(F.scatter2d=!0);G.line&&!F.line2d&&(F.line2d=!0);!G.errorX&&!G.errorY||
F.error2d||(F.error2d=!0);G.text&&!F.glText&&(F.glText=!0);G.marker&&(G.marker.snap=z);F.lineOptions.push(G.line);F.errorXOptions.push(G.errorX);F.errorYOptions.push(G.errorY);F.fillOptions.push(G.fill);F.markerOptions.push(G.marker);F.markerSelectedOptions.push(G.markerSel);F.markerUnselectedOptions.push(G.markerUnsel);F.textOptions.push(G.text);F.textSelectedOptions.push(G.textSel);F.textUnselectedOptions.push(G.textUnsel);F.selectBatch.push([]);F.unselectBatch.push([]);v._scene=F;v.index=F.count;
v.x=I;v.y=J;v.positions=K;F.count++;return[{x:!1,y:!1,t:v,trace:u}]}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/autorange":796,"../../plots/cartesian/axis_ids":800,"../scatter/calc":1156,"../scatter/colorscale_calc":1158,"./constants":1208,"./convert":1209,"./scene_update":1217,"@plotly/point-cluster":57}],1208:[function(b,y,D){y.exports={TOO_MANY_POINTS:1E5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,
1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1209:[function(b,y,D){function n(K,N){var H=K._fullLayout;K=N._length;var L=N.textfont,P=N.textposition,Q=Array.isArray(P)?P:[P],S=L.color;P=L.size;L=L.family;var O={},U,X=N.texttemplate;if(X){O.text=[];var da=H._d3locale,ea=(U=Array.isArray(X))?Math.min(X.length,K):K,ca=U?function(sa){return X[sa]}:function(){return X};for(U=0;U<ea;U++){var ia={i:U},ha=N._module.formatLabels(ia,N,H),fa={};B(fa,N,U);var na=N._meta||{};O.text.push(f.texttemplateString(ca(U),
ha,da,fa,ia,na))}}else Array.isArray(N.text)&&N.text.length<K?O.text=N.text.slice():O.text=N.text;if(Array.isArray(O.text))for(U=O.text.length;U<K;U++)O.text[U]="";O.opacity=N.opacity;O.font={};O.align=[];O.baseline=[];for(U=0;U<Q.length;U++){N=Q[U].split(/\s+/);switch(N[1]){case "left":O.align.push("right");break;case "right":O.align.push("left");break;default:O.align.push(N[1])}switch(N[0]){case "top":O.baseline.push("bottom");break;case "bottom":O.baseline.push("top");break;default:O.baseline.push(N[0])}}if(Array.isArray(S))for(O.color=
Array(K),U=0;U<K;U++)O.color[U]=S[U];else O.color=S;if(f.isArrayOrTypedArray(P)||Array.isArray(L))for(O.font=Array(K),U=0;U<K;U++)N=O.font[U]={},N.size=f.isTypedArray(P)?P[U]:Array.isArray(P)?e(P[U])?P[U]:0:P,N.family=Array.isArray(L)?L[U]:L;else O.font={size:P,family:L};return O}function m(K){var N=K._length,H=K.marker,L={},P=f.isArrayOrTypedArray(H.symbol);var Q=f.isArrayOrTypedArray(H.color);var S=f.isArrayOrTypedArray(H.line.color),O=f.isArrayOrTypedArray(H.opacity),U=f.isArrayOrTypedArray(H.size),
X=f.isArrayOrTypedArray(H.line.width),da;P||(da=x.isOpenSymbol(H.symbol));if(P||Q||S||O){L.colors=Array(N);L.borderColors=Array(N);S=t(H,H.opacity,N);O=t(H.line,H.opacity,N);if(!Array.isArray(O[0])){var ea=O;O=Array(N);for(Q=0;Q<N;Q++)O[Q]=ea}if(!Array.isArray(S[0]))for(ea=S,S=Array(N),Q=0;Q<N;Q++)S[Q]=ea;L.colors=S;L.borderColors=O;for(Q=0;Q<N;Q++)P&&(da=x.isOpenSymbol(H.symbol[Q])),da&&(O[Q]=S[Q].slice(),S[Q]=S[Q].slice(),S[Q][3]=0);L.opacity=K.opacity}else da?(L.color=k(H.color,"uint8"),L.color[3]=
0,L.borderColor=k(H.color,"uint8")):(L.color=k(H.color,"uint8"),L.borderColor=k(H.line.color,"uint8")),L.opacity=K.opacity*H.opacity;if(P)for(L.markers=Array(N),Q=0;Q<N;Q++)L.markers[Q]=d(H.symbol[Q]);else L.marker=d(H.symbol);da=w(K);if(U||X){K=L.sizes=Array(N);P=L.borderSizes=Array(N);S=0;if(U){for(Q=0;Q<N;Q++)K[Q]=da(H.size[Q]),S+=K[Q];var ca=S/N}else for(U=da(H.size),Q=0;Q<N;Q++)K[Q]=U;if(X)for(Q=0;Q<N;Q++)P[Q]=H.line.width[Q]/2;else for(U=H.line.width/2,Q=0;Q<N;Q++)P[Q]=U;L.sizeAvg=ca}else L.size=
da(H&&H.size||10),L.borderSizes=da(H.line.width);return L}function p(K,N){K=K.marker;var H={};if(!N)return H;N.marker&&N.marker.symbol?H=m(f.extendFlat({},K,N.marker)):N.marker&&(N.marker.size&&(H.size=N.marker.size/2),N.marker.color&&(H.colors=N.marker.color),void 0!==N.marker.opacity&&(H.opacity=N.marker.opacity));return H}function h(K,N,H){var L={};if(!H)return L;H.textfont&&(N={opacity:1,text:N.text,texttemplate:N.texttemplate,textposition:N.textposition,textfont:f.extendFlat({},N.textfont)},
H.textfont&&f.extendFlat(N.textfont,H.textfont),L=n(K,N));return L}function a(K,N){var H={capSize:2*N.width,lineWidth:N.thickness,color:N.color};N.copy_ystyle&&(H=K.error_y);return H}function d(K){if("circle"===K)return null;var N=g.symbolNumber(K);var H=g.symbolFuncs[N%100];var L=!!g.symbolNoDot[N%100];N=!!g.symbolNoFill[N%100];var P=x.isDotSymbol(K);if(I[K])return I[K];H=P&&!L?H(1.1*v)+J:H(v);H=l(H,{w:C,h:C,viewBox:[-v,-v,v,v],stroke:N?G:-G});return(I[K]=H)||null}var e=b("fast-isnumeric"),l=b("svg-path-sdf"),
k=b("color-normalize"),c=b("../../registry"),f=b("../../lib"),g=b("../../components/drawing"),q=b("../../plots/cartesian/axis_ids"),t=b("../../lib/gl_format_color").formatColor,u=b("../scatter/subtypes"),w=b("../scatter/make_bubble_size_func"),x=b("./helpers"),E=b("./constants"),F=b("../../constants/interactions").DESELECTDIM,z={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},B=b("../../components/fx/helpers").appendArrayPointValue,C=E.SYMBOL_SDF_SIZE,v=E.SYMBOL_SIZE,G=E.SYMBOL_STROKE,
I={},J=g.symbolFuncs[0](.05*v);y.exports={style:function(K,N){var H={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0};if(!0!==N.visible)return H;u.hasText(N)&&(H.text=n(K,N),H.textSel=h(K,N,N.selected),H.textUnsel=h(K,N,N.unselected));if(u.hasMarkers(N)&&(H.marker=m(N),H.markerSel=p(N,N.selected),H.markerUnsel=p(N,N.unselected),!N.unselected&&f.isArrayOrTypedArray(N.marker.opacity))){var L=N.marker.opacity;
H.markerUnsel.opacity=Array(L.length);for(K=0;K<L.length;K++)H.markerUnsel.opacity[K]=F*L[K]}if(u.hasLines(N)){H.line={overlay:!0,thickness:N.line.width,color:N.line.color,opacity:N.opacity};L=(E.DASHES[N.line.dash]||[1]).slice();for(K=0;K<L.length;++K)L[K]*=N.line.width;H.line.dashes=L}N.error_x&&N.error_x.visible&&(H.errorX=a(N,N.error_x));N.error_y&&N.error_y.visible&&(H.errorY=a(N,N.error_y));N.fill&&"none"!==N.fill&&(H.fill={closed:!0,fill:N.fillcolor,thickness:0});return H},markerStyle:m,markerSelection:p,
linePositions:function(K,N,H){var L=H.length,P=L/2;if(u.hasLines(N)&&P)if("hv"===N.line.shape){var Q=[];for(K=0;K<P-1;K++)isNaN(H[2*K])||isNaN(H[2*K+1])?Q.push(NaN,NaN,NaN,NaN):(Q.push(H[2*K],H[2*K+1]),isNaN(H[2*K+2])||isNaN(H[2*K+3])?Q.push(NaN,NaN):Q.push(H[2*K+2],H[2*K+1]));Q.push(H[L-2],H[L-1])}else if("hvh"===N.line.shape){Q=[];for(K=0;K<P-1;K++)if(isNaN(H[2*K])||isNaN(H[2*K+1])||isNaN(H[2*K+2])||isNaN(H[2*K+3]))isNaN(H[2*K])||isNaN(H[2*K+1])?Q.push(NaN,NaN):Q.push(H[2*K],H[2*K+1]),Q.push(NaN,
NaN);else{var S=(H[2*K]+H[2*K+2])/2;Q.push(H[2*K],H[2*K+1],S,H[2*K+1],S,H[2*K+3])}Q.push(H[L-2],H[L-1])}else if("vhv"===N.line.shape){Q=[];for(K=0;K<P-1;K++)isNaN(H[2*K])||isNaN(H[2*K+1])||isNaN(H[2*K+2])||isNaN(H[2*K+3])?(isNaN(H[2*K])||isNaN(H[2*K+1])?Q.push(NaN,NaN):Q.push(H[2*K],H[2*K+1]),Q.push(NaN,NaN)):(S=(H[2*K+1]+H[2*K+3])/2,Q.push(H[2*K],H[2*K+1],H[2*K],S,H[2*K+2],S));Q.push(H[L-2],H[L-1])}else if("vh"===N.line.shape){Q=[];for(K=0;K<P-1;K++)isNaN(H[2*K])||isNaN(H[2*K+1])?Q.push(NaN,NaN,
NaN,NaN):(Q.push(H[2*K],H[2*K+1]),isNaN(H[2*K+2])||isNaN(H[2*K+3])?Q.push(NaN,NaN):Q.push(H[2*K],H[2*K+3]));Q.push(H[L-2],H[L-1])}else Q=H;L=!1;for(K=0;K<Q.length;K++)if(isNaN(Q[K])){L=!0;break}H=L||Q.length>E.TOO_MANY_POINTS?"rect":u.hasMarkers(N)?"rect":"round";if(L&&N.connectgaps)for(N=Q[0],L=Q[1],K=0;K<Q.length;K+=2)isNaN(Q[K])||isNaN(Q[K+1])?(Q[K]=N,Q[K+1]=L):(N=Q[K],L=Q[K+1]);return{join:H,positions:Q}},errorBarPositions:function(K,N,H,L,P){function Q(da,ea){var ca=ea._id.charAt(0),ia=N["error_"+
ca];if(ia&&ia.visible&&("linear"===ea.type||"log"===ea.type)){ia=S(ia);for(var ha={x:0,y:1}[ca],fa={x:[0,1,2,3],y:[2,3,0,1]}[ca],na=new Float64Array(4*U),sa=Infinity,ua=-Infinity,ta=0,oa=0;ta<U;ta++,oa+=4){var va=da[ta];if(e(va)){var ma=H[2*ta+ha],pa=ia(va,ta),za=pa[0];pa=pa[1];if(e(za)&&e(pa)){var qa=va+pa;na[oa+fa[0]]=ma-ea.c2l(va-za);na[oa+fa[1]]=ea.c2l(qa)-ma;na[oa+fa[2]]=0;na[oa+fa[3]]=0;sa=Math.min(sa,va-za);ua=Math.max(ua,va+pa)}}}X[ca]={positions:H,errors:na,_bnds:[sa,ua]}}}var S=c.getComponentMethod("errorbars",
"makeComputeError"),O=q.getFromId(K,N.xaxis);K=q.getFromId(K,N.yaxis);var U=H.length/2,X={};Q(L,O);Q(P,K);return X},textPosition:function(K,N,H,L){K=N._length;var P={};if(u.hasMarkers(N)){N=H.font;var Q=H.align,S=H.baseline;P.offset=Array(K);for(H=0;H<K;H++){var O=L.sizes?L.sizes[H]:L.size,U=Array.isArray(N)?N[H].size:N.size,X=Array.isArray(Q)?1<Q.length?Q[H]:Q[0]:Q,da=Array.isArray(S)?1<S.length?S[H]:S[0]:S;da=z[da];O=O?O/.8+1:0;P.offset[H]=[z[X]*O/U,(-da*O-.5*da)/U]}}return P}}},{"../../components/drawing":637,
"../../components/fx/helpers":651,"../../constants/interactions":723,"../../lib":749,"../../lib/gl_format_color":745,"../../plots/cartesian/axis_ids":800,"../../registry":880,"../scatter/make_bubble_size_func":1172,"../scatter/subtypes":1179,"./constants":1208,"./helpers":1213,"color-normalize":125,"fast-isnumeric":241,"svg-path-sdf":546}],1210:[function(b,y,D){var n=b("../../lib"),m=b("../../registry"),p=b("./helpers"),h=b("./attributes"),a=b("../scatter/constants"),d=b("../scatter/subtypes"),e=
b("../scatter/xy_defaults"),l=b("../scatter/marker_defaults"),k=b("../scatter/line_defaults"),c=b("../scatter/fillcolor_defaults"),f=b("../scatter/text_defaults");y.exports=function(g,q,t,u){function w(z,B){return n.coerce(g,q,h,z,B)}var x=g.marker?p.isOpenSymbol(g.marker.symbol):!1,E=d.isBubble(g),F=e(g,q,u,w);F?(F=F<a.PTS_LINESONLY?"lines+markers":"lines",w("text"),w("hovertext"),w("hovertemplate"),w("mode",F),d.hasLines(q)&&(w("connectgaps"),k(g,q,t,u,w),w("line.shape")),d.hasMarkers(q)&&(l(g,
q,t,u,w),w("marker.line.width",x||E?1:0)),d.hasText(q)&&(w("texttemplate"),f(g,q,u,w)),u=(q.line||{}).color,x=(q.marker||{}).color,w("fill"),"none"!==q.fill&&c(g,q,t,w),E=m.getComponentMethod("errorbars","supplyDefaults"),E(g,q,u||x||t,{axis:"y"}),E(g,q,u||x||t,{axis:"x",inherit:"y"}),n.coerceSelectionMarkerOpacity(q,w)):q.visible=!1}},{"../../lib":749,"../../registry":880,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,
"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"../scatter/xy_defaults":1181,"./attributes":1206,"./helpers":1213}],1211:[function(b,y,D){var n=b("../../lib"),m=b("../../components/color"),p=b("../../constants/interactions").DESELECTDIM;y.exports={styleTextSelection:function(h){h=h[0];var a=h.trace,d=h.t;h=d._scene;d=d.index;var e=h.selectBatch[d],l=h.unselectBatch[d],k=h.textOptions[d],c=h.textSelectedOptions[d]||{},f=h.textUnselectedOptions[d]||{},g=n.extendFlat({},k);if(e.length||l.length){c=
c.color;f=f.color;k=k.color;var q=Array.isArray(k);g.color=Array(a._length);for(a=0;a<e.length;a++){var t=e[a];g.color[t]=c||(q?k[t]:k)}for(a=0;a<l.length;a++)t=l[a],e=q?k[t]:k,g.color[t]=f?f:c?e:m.addOpacity(e,p)}h.glText[d].update(g)}}},{"../../components/color":615,"../../constants/interactions":723,"../../lib":749}],1212:[function(b,y,D){var n=b("../scatter/format_labels");y.exports=function(m,p,h){var a=m.i;"x"in m||(m.x=p._x[a]);"y"in m||(m.y=p._y[a]);return n(m,p,h)}},{"../scatter/format_labels":1164}],
1213:[function(b,y,D){var n=b("./constants");D.isOpenSymbol=function(m){return"string"===typeof m?n.OPEN_RE.test(m):100<m%200};D.isDotSymbol=function(m){return"string"===typeof m?n.DOT_RE.test(m):200<m}},{"./constants":1208}],1214:[function(b,y,D){function n(a,d,e,l){var k=a.xa,c=a.ya,f=a.distance,g=a.dxy,q=a.index;d={pointNumber:q,x:d[q],y:e[q]};d.tx=Array.isArray(l.text)?l.text[q]:l.text;d.htx=Array.isArray(l.hovertext)?l.hovertext[q]:l.hovertext;d.data=Array.isArray(l.customdata)?l.customdata[q]:
l.customdata;d.tp=Array.isArray(l.textposition)?l.textposition[q]:l.textposition;if(e=l.textfont)d.ts=p.isArrayOrTypedArray(e.size)?e.size[q]:e.size,d.tc=Array.isArray(e.color)?e.color[q]:e.color,d.tf=Array.isArray(e.family)?e.family[q]:e.family;if(e=l.marker)d.ms=p.isArrayOrTypedArray(e.size)?e.size[q]:e.size,d.mo=p.isArrayOrTypedArray(e.opacity)?e.opacity[q]:e.opacity,d.mx=p.isArrayOrTypedArray(e.symbol)?e.symbol[q]:e.symbol,d.mc=p.isArrayOrTypedArray(e.color)?e.color[q]:e.color;var t=e&&e.line;
t&&(d.mlc=Array.isArray(t.color)?t.color[q]:t.color,d.mlw=p.isArrayOrTypedArray(t.width)?t.width[q]:t.width);(e=e&&e.gradient)&&"none"!==e.type&&(d.mgt=Array.isArray(e.type)?e.type[q]:e.type,d.mgc=Array.isArray(e.color)?e.color[q]:e.color);k=k.c2p(d.x,!0);c=c.c2p(d.y,!0);e=d.mrc||1;if(t=l.hoverlabel)d.hbg=Array.isArray(t.bgcolor)?t.bgcolor[q]:t.bgcolor,d.hbc=Array.isArray(t.bordercolor)?t.bordercolor[q]:t.bordercolor,d.hts=p.isArrayOrTypedArray(t.font.size)?t.font.size[q]:t.font.size,d.htc=Array.isArray(t.font.color)?
t.font.color[q]:t.font.color,d.htf=Array.isArray(t.font.family)?t.font.family[q]:t.font.family,d.hnl=p.isArrayOrTypedArray(t.namelength)?t.namelength[q]:t.namelength;if(t=l.hoverinfo)d.hi=Array.isArray(t)?t[q]:t;if(t=l.hovertemplate)d.ht=Array.isArray(t)?t[q]:t;q={};q[a.index]=d;a=p.extendFlat({},a,{color:h(l,d),x0:k-e,x1:k+e,xLabelVal:d.x,y0:c-e,y1:c+e,yLabelVal:d.y,cd:q,distance:f,spikeDistance:g,hovertemplate:d.ht});d.htx?a.text=d.htx:d.tx?a.text=d.tx:l.text&&(a.text=l.text);p.fillText(d,l,a);
m.getComponentMethod("errorbars","hoverInfo")(d,l,a);return a}var m=b("../../registry"),p=b("../../lib"),h=b("../scatter/get_trace_color");y.exports={hoverPoints:function(a,d,e,l){var k=a.cd,c=k[0].t;k=k[0].trace;var f=a.xa,g=a.ya,q=c.x,t=c.y;d=f.c2p(d);e=g.c2p(e);var u=a.distance;if(c.tree){var w=f.p2c(d-u),x=f.p2c(d+u),E=g.p2c(e-u),F=g.p2c(e+u);c="x"===l?c.tree.range(Math.min(w,x),Math.min(g._rl[0],g._rl[1]),Math.max(w,x),Math.max(g._rl[0],g._rl[1])):c.tree.range(Math.min(w,x),Math.min(E,F),Math.max(w,
x),Math.max(E,F))}else c=c.ids;if("x"===l)for(l=0;l<c.length;l++){if(x=q[c[l]],x=Math.abs(f.c2p(x)-d),x<u){u=x;w=g.c2p(t[c[l]])-e;var z=Math.sqrt(x*x+w*w);var B=c[l]}}else for(l=c.length-1;-1<l;l--)x=q[c[l]],w=t[c[l]],x=f.c2p(x)-d,w=g.c2p(w)-e,w=Math.sqrt(x*x+w*w),w<u&&(u=z=w,B=c[l]);a.index=B;a.distance=u;a.dxy=z;return void 0===B?[a]:[n(a,q,t,k)]},calcHover:n}},{"../../lib":749,"../../registry":880,"../scatter/get_trace_color":1165}],1215:[function(b,y,D){D=b("./hover");y.exports={moduleType:"trace",
name:"scattergl",basePlotModule:b("../../plots/cartesian"),categories:"gl regl cartesian symbols errorBarsOK showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../scatter/cross_trace_defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:D.hoverPoints,selectPoints:b("./select"),meta:{}}},{"../../plots/cartesian":810,"../scatter/cross_trace_defaults":1161,
"../scatter/marker_colorbar":1173,"./attributes":1206,"./calc":1207,"./defaults":1210,"./format_labels":1212,"./hover":1214,"./plot":1216,"./select":1218}],1216:[function(b,y,D){function n(g,q,t){var u=g._size;return[u.l+q.domain[0]*u.w,u.b+t.domain[0]*u.h,g.width-u.r-(1-q.domain[1])*u.w,g.height-u.t-(1-t.domain[1])*u.h]}var m=b("regl-scatter2d"),p=b("regl-line2d"),h=b("regl-error2d"),a=b("gl-text"),d=b("../../lib"),e=b("../../components/dragelement/helpers").selectMode,l=b("../../lib/prepare_regl"),
k=b("../scatter/subtypes"),c=b("../scatter/link_traces"),f=b("./edit_style").styleTextSelection;y.exports=function(g,q,t){if(t.length){var u=g._fullLayout,w=q._scene,x=q.xaxis,E=q.yaxis;if(w)if(l(g,["ANGLE_instanced_arrays","OES_element_index_uint"])){var F=w.count,z=u._glcanvas.data()[0].regl;c(g,q,t);if(w.dirty){!0===w.error2d&&(w.error2d=h(z));!0===w.line2d&&(w.line2d=p(z));!0===w.scatter2d&&(w.scatter2d=m(z,{constPointSize:!0}));!0===w.fill2d&&(w.fill2d=p(z));if(!0===w.glText)for(w.glText=Array(F),
g=0;g<F;g++)w.glText[g]=new a(z);if(w.glText){if(F>w.glText.length)for(q=F-w.glText.length,g=0;g<q;g++)w.glText.push(new a(z));else F<w.glText.length&&w.glText.splice(F,w.glText.length-F).forEach(function(L){L.destroy()});for(g=0;g<F;g++)w.glText[g].update(w.textOptions[g])}w.line2d&&(w.line2d.update(w.lineOptions),w.lineOptions=w.lineOptions.map(function(L){if(L&&L.positions){for(var P=L.positions,Q=0;Q<P.length&&(isNaN(P[Q])||isNaN(P[Q+1]));)Q+=2;for(var S=P.length-2;S>Q&&(isNaN(P[S])||isNaN(P[S+
1]));)S-=2;L.positions=P.slice(Q,S+2)}return L}),w.line2d.update(w.lineOptions));w.error2d&&(g=(w.errorXOptions||[]).concat(w.errorYOptions||[]),w.error2d.update(g));w.scatter2d&&w.scatter2d.update(w.markerOptions);w.fillOrder=d.repeat(null,F);w.fill2d&&(w.fillOptions=w.fillOptions.map(function(L,P){var Q=t[P];if(L&&Q&&Q[0]&&Q[0].trace){var S=Q[0];Q=S.trace;var O=S.t,U=w.lineOptions[P],X;S=[];Q._ownfill&&S.push(P);Q._nexttrace&&S.push(P+1);S.length&&(w.fillOrder[P]=S);S=[];O=U&&U.positions||O.positions;
if("tozeroy"===Q.fill){for(U=0;U<O.length&&isNaN(O[U+1]);)U+=2;for(X=O.length-2;X>U&&isNaN(O[X+1]);)X-=2;0!==O[U+1]&&(S=[O[U],0]);S=S.concat(O.slice(U,X+2));0!==O[X+1]&&(S=S.concat([O[X],0]))}else if("tozerox"===Q.fill){for(U=0;U<O.length&&isNaN(O[U]);)U+=2;for(X=O.length-2;X>U&&isNaN(O[X]);)X-=2;0!==O[U]&&(S=[0,O[U+1]]);S=S.concat(O.slice(U,X+2));0!==O[X]&&(S=S.concat([0,O[X+1]]))}else if("toself"===Q.fill||"tonext"===Q.fill){S=[];for(U=X=0;U<O.length;U+=2)if(isNaN(O[U])||isNaN(O[U+1]))S=S.concat(O.slice(X,
U)),S.push(O[X],O[X+1]),X=U+2;S=S.concat(O.slice(X));X&&S.push(O[X],O[X+1])}else if(U=Q._nexttrace)if(X=w.lineOptions[P+1])if(X=X.positions,"tonexty"===Q.fill){S=O.slice();for(P=Math.floor(X.length/2);P--;){O=X[2*P];var da=X[2*P+1];isNaN(O)||isNaN(da)||S.push(O,da)}L.fill=U.fillcolor}if(Q._prevtrace&&"tonext"===Q._prevtrace.fill){P=w.lineOptions[P-1].positions;O=S.length/2;X=[O];for(U=0;U<P.length;U+=2)(isNaN(P[U])||isNaN(P[U+1]))&&X.push(U/2+O+1);S=S.concat(P);L.hole=X}L.fillmode=Q.fill;L.opacity=
Q.opacity;L.positions=S;return L}}),w.fill2d.update(w.fillOptions))}z=e(u.dragmode);q=-1<u.clickmode.indexOf("select");for(g=0;g<F;g++){var B=t[g][0];var C=B.trace;var v=B.t,G=v.index;B=C._length;var I=v.x,J=v.y;if(C.selectedpoints||z||q){z||(z=!0);if(C.selectedpoints){var K=w.selectBatch[G]=d.selIndices2selPoints(C),N={};for(C=0;C<K.length;C++)N[K[C]]=1;K=[];for(C=0;C<B;C++)N[C]||K.push(C);w.unselectBatch[G]=K}G=v.xpx=Array(B);v=v.ypx=Array(B);for(C=0;C<B;C++)G[C]=x.c2p(I[C]),v[C]=E.c2p(J[C])}else v.xpx=
v.ypx=null}if(z){w.select2d||(w.select2d=m(u._glcanvas.data()[1].regl));if(w.scatter2d){z=Array(F);for(g=0;g<F;g++)z[g]=w.selectBatch[g].length||w.unselectBatch[g].length?w.markerUnselectedOptions[g]:{};w.scatter2d.update(z)}w.select2d&&(w.select2d.update(w.markerOptions),w.select2d.update(w.markerSelectedOptions));w.glText&&t.forEach(function(L){k.hasText(((L||[])[0]||{}).trace||{})&&f(L)})}else w.scatter2d&&w.scatter2d.update(w.markerOptions);var H={viewport:n(u,x,E),range:[(x._rl||x.range)[0],
(E._rl||E.range)[0],(x._rl||x.range)[1],(E._rl||E.range)[1]]};u=d.repeat(H,w.count);w.fill2d&&w.fill2d.update(u);w.line2d&&w.line2d.update(u);w.error2d&&w.error2d.update(u.concat(u));w.scatter2d&&w.scatter2d.update(u);w.select2d&&w.select2d.update(u);w.glText&&w.glText.forEach(function(L){L.update(H)})}else w.init()}}},{"../../components/dragelement/helpers":633,"../../lib":749,"../../lib/prepare_regl":762,"../scatter/link_traces":1171,"../scatter/subtypes":1179,"./edit_style":1211,"gl-text":326,
"regl-error2d":508,"regl-line2d":509,"regl-scatter2d":510}],1217:[function(b,y,D){var n=b("../../lib");y.exports=function(m,p){var h=p._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},d={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};p._scene||(h=p._scene={},h.init=function(){n.extendFlat(h,
d,a)},h.init(),h.update=function(e){var l=n.repeat(e,h.count);h.fill2d&&h.fill2d.update(l);h.scatter2d&&h.scatter2d.update(l);h.line2d&&h.line2d.update(l);h.error2d&&h.error2d.update(l.concat(l));h.select2d&&h.select2d.update(l);if(h.glText)for(l=0;l<h.count;l++)h.glText[l].update(e)},h.draw=function(){for(var e=h.count,l=h.fill2d,k=h.error2d,c=h.line2d,f=h.scatter2d,g=h.glText,q=h.select2d,t=h.selectBatch,u=h.unselectBatch,w=0;w<e;w++){l&&h.fillOrder[w]&&l.draw(h.fillOrder[w]);c&&h.lineOptions[w]&&
c.draw(w);k&&(h.errorXOptions[w]&&k.draw(w),h.errorYOptions[w]&&k.draw(w+e));if(f&&h.markerOptions[w])if(u[w].length){var x=n.repeat([],h.count);x[w]=u[w];f.draw(x)}else t[w].length||f.draw(w);g[w]&&h.textOptions[w]&&g[w].render()}q&&q.draw(t);h.dirty=!1},h.destroy=function(){h.fill2d&&h.fill2d.destroy&&h.fill2d.destroy();h.scatter2d&&h.scatter2d.destroy&&h.scatter2d.destroy();h.error2d&&h.error2d.destroy&&h.error2d.destroy();h.line2d&&h.line2d.destroy&&h.line2d.destroy();h.select2d&&h.select2d.destroy&&
h.select2d.destroy();h.glText&&h.glText.forEach(function(e){e.destroy&&e.destroy()});h.lineOptions=null;h.fillOptions=null;h.markerOptions=null;h.markerSelectedOptions=null;h.markerUnselectedOptions=null;h.errorXOptions=null;h.errorYOptions=null;h.textOptions=null;h.textSelectedOptions=null;h.textUnselectedOptions=null;h.selectBatch=null;h.unselectBatch=null;p._scene=null});h.dirty||n.extendFlat(h,a);return h}},{"../../lib":749}],1218:[function(b,y,D){var n=b("../scatter/subtypes"),m=b("./edit_style").styleTextSelection;
y.exports=function(p,h){var a=p.cd,d=[],e=a[0].trace,l=a[0].t,k=e._length,c=l.x,f=l.y,g=l._scene,q=l.index;if(!g)return d;var t=n.hasText(e),u=n.hasMarkers(e);if(!0!==e.visible||!u&&!t)return d;e=[];var w=[];if(!1!==h&&!h.degenerate)for(var x=0;x<k;x++)h.contains([l.xpx[x],l.ypx[x]],!1,x,p)?(e.push(x),d.push({pointNumber:x,x:c[x],y:f[x]})):w.push(x);u&&((p=g.scatter2d,e.length||w.length)?g.selectBatch[q].length||g.unselectBatch[q].length||(h=Array(g.count),h[q]=g.markerUnselectedOptions[q],p.update.apply(p,
h)):(h=Array(g.count),h[q]=g.markerOptions[q],p.update.apply(p,h)));g.selectBatch[q]=e;g.unselectBatch[q]=w;t&&m(a);return d}},{"../scatter/subtypes":1179,"./edit_style":1211}],1219:[function(b,y,D){D=b("../../plots/template_attributes").hovertemplateAttrs;var n=b("../../plots/template_attributes").texttemplateAttrs,m=b("../scattergeo/attributes"),p=b("../scatter/attributes"),h=b("../../plots/mapbox/layout_attributes"),a=b("../../plots/attributes"),d=b("../../components/colorscale/attributes"),e=
b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var l=m.line,k=m.marker;y.exports=b({lon:m.lon,lat:m.lat,mode:e({},p.mode,{dflt:"markers"}),text:e({},p.text,{}),texttemplate:n({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:e({},p.hovertext,{}),line:{color:l.color,width:l.width},connectgaps:p.connectgaps,marker:e({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:k.opacity,
size:k.size,sizeref:k.sizeref,sizemin:k.sizemin,sizemode:k.sizemode},d("marker")),fill:m.fill,fillcolor:p.fillcolor,textfont:h.layers.symbol.textfont,textposition:h.layers.symbol.textposition,below:{valType:"string"},selected:{marker:p.selected.marker},unselected:{marker:p.unselected.marker},hoverinfo:e({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:D()},"calc","nested")},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,
"../../plots/mapbox/layout_attributes":856,"../../plots/template_attributes":875,"../scatter/attributes":1155,"../scattergeo/attributes":1196}],1220:[function(b,y,D){function n(){return{geojson:l.makeBlank(),layout:{visibility:"none"},paint:{}}}function m(x){var E=x[0].trace,F=E.marker,z=E.selectedpoints,B=d.isArrayOrTypedArray(F.color),C=d.isArrayOrTypedArray(F.size),v=d.isArrayOrTypedArray(F.opacity),G,I;B&&(I=k.hasColorscale(E,"marker")?k.makeColorScaleFuncFromTrace(F):d.identity);var J;C&&(J=
f(E));var K;v&&(K=function(S){S=a(S)?+d.constrain(S,0,1):0;return E.opacity*S});var N=[];for(G=0;G<x.length;G++){var H=x[G],L=H.lonlat;if(L[0]!==e){var P={};I&&(P.mcc=H.mcc=I(H.mc));J&&(P.mrc=H.mrc=J(H.ms));K&&(P.mo=K(H.mo));z&&(P.selected=H.selected||0);N.push({type:"Feature",geometry:{type:"Point",coordinates:L},properties:P})}}if(z){var Q=c.makeSelectedPointStyleFns(E);for(G=0;G<N.length;G++)x=N[G].properties,Q.selectedOpacityFn&&(x.mo=E.opacity*Q.selectedOpacityFn(x)),Q.selectedColorFn&&(x.mcc=
Q.selectedColorFn(x)),Q.selectedSizeFn&&(x.mrc=Q.selectedSizeFn(x))}return{geojson:{type:"FeatureCollection",features:N},mcc:B||Q&&Q.selectedColorFn?{type:"identity",property:"mcc"}:F.color,mrc:C||Q&&Q.selectedSizeFn?{type:"identity",property:"mrc"}:F.size/2,mo:v||Q&&Q.selectedOpacityFn?{type:"identity",property:"mo"}:E.opacity*F.opacity}}function p(x,E){return d.isArrayOrTypedArray(x)?E?function(F){return a(x[F])?+x[F]:0}:function(F){return x[F]}:x?function(){return x}:h}function h(){return""}var a=
b("fast-isnumeric"),d=b("../../lib"),e=b("../../constants/numerical").BADNUM,l=b("../../lib/geojson_utils"),k=b("../../components/colorscale"),c=b("../../components/drawing"),f=b("../scatter/make_bubble_size_func"),g=b("../scatter/subtypes"),q=b("../../plots/mapbox/convert_text_opts"),t=b("../../components/fx/helpers").appendArrayPointValue,u=b("../../lib/svg_text_utils").NEWLINES,w=b("../../lib/svg_text_utils").BR_TAG_ALL;y.exports=function(x,E){var F=E[0].trace,z=!0===F.visible&&0!==F._length,B=
"none"!==F.fill,C=g.hasLines(F),v=g.hasMarkers(F),G=g.hasText(F),I=v&&"circle"===F.marker.symbol,J=v&&"circle"!==F.marker.symbol,K=n(),N=n(),H=n();v=n();var L={fill:K,line:N,circle:H,symbol:v};if(!z)return L;if(B||C)var P=l.calcTraceToLineCoords(E);B&&(K.geojson=l.makePolygon(P),K.layout.visibility="visible",d.extendFlat(K.paint,{"fill-color":F.fillcolor}));C&&(N.geojson=l.makeLine(P),N.layout.visibility="visible",d.extendFlat(N.paint,{"line-width":F.line.width,"line-color":F.line.color,"line-opacity":F.opacity}));
I&&(z=m(E),H.geojson=z.geojson,H.layout.visibility="visible",d.extendFlat(H.paint,{"circle-color":z.mcc,"circle-radius":z.mrc,"circle-opacity":z.mo}));if(J||G){x=x._fullLayout;z=E[0].trace;C=z.marker||{};B=C.symbol;C=C.angle;B="circle"!==B?p(B):h;C="auto"!==C?p(C,!0):h;I=g.hasText(z)?p(z.text):h;H=[];for(P=0;P<E.length;P++)if(K=E[P],K.lonlat[0]!==e){if(N=z.texttemplate){N=Array.isArray(N)?N[P]||"":N;var Q=z._module.formatLabels(K,z,x),S={};t(S,z,K.i);N=d.texttemplateString(N,Q,x._d3locale,S,K,z._meta||
{})}else N=I(P);N&&(N=N.replace(u,"").replace(w,"\n"));H.push({type:"Feature",geometry:{type:"Point",coordinates:K.lonlat},properties:{symbol:B(P),angle:C(P),text:N}})}v.geojson={type:"FeatureCollection",features:H};d.extendFlat(v.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"});J&&(d.extendFlat(v.layout,{"icon-size":F.marker.size/10}),"angle"in F.marker&&"auto"!==F.marker.angle&&d.extendFlat(v.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),
v.layout["icon-allow-overlap"]=F.marker.allowoverlap,d.extendFlat(v.paint,{"icon-opacity":F.opacity*F.marker.opacity,"icon-color":F.marker.color}));G&&(E=q(F.textposition,(F.marker||{}).size),d.extendFlat(v.layout,{"text-size":F.textfont.size,"text-anchor":E.anchor,"text-offset":E.offset}),d.extendFlat(v.paint,{"text-color":F.textfont.color,"text-opacity":F.opacity}))}return L}},{"../../components/colorscale":627,"../../components/drawing":637,"../../components/fx/helpers":651,"../../constants/numerical":724,
"../../lib":749,"../../lib/geojson_utils":743,"../../lib/svg_text_utils":773,"../../plots/mapbox/convert_text_opts":853,"../scatter/make_bubble_size_func":1172,"../scatter/subtypes":1179,"fast-isnumeric":241}],1221:[function(b,y,D){function n(k,c,f){k=f("lon")||[];f=f("lat")||[];f=Math.min(k.length,f.length);return c._length=f}var m=b("../../lib"),p=b("../scatter/subtypes"),h=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),d=b("../scatter/text_defaults"),e=b("../scatter/fillcolor_defaults"),
l=b("./attributes");y.exports=function(k,c,f,g){function q(u,w){return m.coerce(k,c,l,u,w)}if(n(k,c,q)){q("text");q("texttemplate");q("hovertext");q("hovertemplate");q("mode");q("below");p.hasLines(c)&&(a(k,c,f,g,q,{noDash:!0}),q("connectgaps"));if(p.hasMarkers(c)){h(k,c,f,g,q,{noLine:!0});q("marker.allowoverlap");q("marker.angle");var t=c.marker;"circle"!==t.symbol&&(m.isArrayOrTypedArray(t.size)&&(t.size=t.size[0]),m.isArrayOrTypedArray(t.color)&&(t.color=t.color[0]))}p.hasText(c)&&d(k,c,g,q,{noSelect:!0});
q("fill");"none"!==c.fill&&e(k,c,f,q);m.coerceSelectionMarkerOpacity(c,q)}else c.visible=!1}},{"../../lib":749,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1219}],1222:[function(b,y,D){y.exports=function(n,m){n.lon=m.lon;n.lat=m.lat;return n}},{}],1223:[function(b,y,D){var n=b("../../plots/cartesian/axes");y.exports=function(m,p,h){var a={};p=h[p.subplot]._subplot.mockAxis;
m=m.lonlat;a.lonLabel=n.tickText(p,p.c2l(m[0]),!0).text;a.latLabel=n.tickText(p,p.c2l(m[1]),!0).text;return a}},{"../../plots/cartesian/axes":797}],1224:[function(b,y,D){function n(e,l,k){if(!e.hovertemplate){var c=(l.hi||e.hoverinfo).split("+"),f=-1!==c.indexOf("all"),g=-1!==c.indexOf("lon"),q=-1!==c.indexOf("lat"),t=l.lonlat,u=[];f||g&&q?u.push("("+(t[0]+", ")+(t[1]+")")):g?u.push(k.lon+(t[0]+"")):q&&u.push(k.lat+(t[1]+""));(f||-1!==c.indexOf("text"))&&a(l,e,u);return u.join("\x3cbr\x3e")}}
var m=b("../../components/fx"),p=b("../../lib"),h=b("../scatter/get_trace_color"),a=p.fillText,d=b("../../constants/numerical").BADNUM;y.exports=function(e,l,k){var c=e.cd,f=c[0].trace,g=e.xa,q=e.ya,t=e.subplot,u=360*(0<=l?Math.floor((l+180)/360):Math.ceil((l-180)/360)),w=l-u;m.getClosest(c,function(F){var z=F.lonlat;if(z[0]===d)return Infinity;var B=p.modHalf(z[0],360);z=z[1];var C=t.project([B,z]);z=C.x-g.c2p([w,z]);B=C.y-q.c2p([B,k]);F=Math.max(3,F.mrc||0);return Math.max(Math.sqrt(z*z+B*B)-F,
1-3/F)},e);if(!1!==e.index){l=c[e.index];var x=l.lonlat;x=[p.modHalf(x[0],360)+u,x[1]];u=g.c2p(x);x=q.c2p(x);var E=l.mrc||1;e.x0=u-E;e.x1=u+E;e.y0=x-E;e.y1=x+E;u={};u[f.subplot]={_subplot:t};u=f._module.formatLabels(l,f,u);e.lonLabel=u.lonLabel;e.latLabel=u.latLabel;e.color=h(f,l);e.extraText=n(f,l,c[0].t.labels);e.hovertemplate=f.hovertemplate;return[e]}}},{"../../components/fx":655,"../../constants/numerical":724,"../../lib":749,"../scatter/get_trace_color":1165}],1225:[function(b,y,D){y.exports=
{attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("../scattergeo/calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),styleOnSelect:function(n,m){m&&m[0].trace._glTrace.update(m)},moduleType:"trace",name:"scattermapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":854,
"../scatter/marker_colorbar":1173,"../scattergeo/calc":1197,"./attributes":1219,"./defaults":1221,"./event_data":1222,"./format_labels":1223,"./hover":1224,"./plot":1226,"./select":1227}],1226:[function(b,y,D){function n(a,d){this.type="scattermapbox";this.subplot=a;this.uid=d;this.sourceIds={fill:"source-"+d+"-fill",line:"source-"+d+"-line",circle:"source-"+d+"-circle",symbol:"source-"+d+"-symbol"};this.layerIds={fill:p+d+"-fill",line:p+d+"-line",circle:p+d+"-circle",symbol:p+d+"-symbol"};this.below=
null}var m=b("./convert"),p=b("../../plots/mapbox/constants").traceLayerPrefix,h=["fill","line","circle","symbol"];b=n.prototype;b.addSource=function(a,d){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:d.geojson})};b.setSourceData=function(a,d){this.subplot.map.getSource(this.sourceIds[a]).setData(d.geojson)};b.addLayer=function(a,d,e){this.subplot.addLayer({type:a,id:this.layerIds[a],source:this.sourceIds[a],layout:d.layout,paint:d.paint},e)};b.update=function(a){var d=this.subplot,
e=d.map,l=m(d.gd,a),k=d.belowLookup["trace-"+this.uid],c;if(k!==this.below){for(c=h.length-1;0<=c;c--){var f=h[c];e.removeLayer(this.layerIds[f])}for(c=0;c<h.length;c++)f=h[c],e=l[f],this.addLayer(f,e,k);this.below=k}for(c=0;c<h.length;c++)f=h[c],e=l[f],d.setOptions(this.layerIds[f],"setLayoutProperty",e.layout),"visible"===e.layout.visibility&&(this.setSourceData(f,e),d.setOptions(this.layerIds[f],"setPaintProperty",e.paint));a[0].trace._glTrace=this};b.dispose=function(){for(var a=this.subplot.map,
d=h.length-1;0<=d;d--){var e=h[d];a.removeLayer(this.layerIds[e]);a.removeSource(this.sourceIds[e])}};y.exports=function(a,d){var e=d[0].trace,l=new n(a,e.uid),k=m(a.gd,d);a=l.below=a.belowLookup["trace-"+e.uid];for(e=0;e<h.length;e++){var c=h[e],f=k[c];l.addSource(c,f);l.addLayer(c,f,a)}return d[0].trace._glTrace=l}},{"../../plots/mapbox/constants":852,"./convert":1220}],1227:[function(b,y,D){var n=b("../../lib"),m=b("../scatter/subtypes"),p=b("../../constants/numerical").BADNUM;y.exports=function(h,
a){var d=h.cd,e=h.xaxis,l=h.yaxis,k=[],c;if(!m.hasMarkers(d[0].trace))return[];if(!1===a)for(c=0;c<d.length;c++)d[c].selected=0;else for(c=0;c<d.length;c++){var f=d[c],g=f.lonlat;if(g[0]!==p){var q=[n.modHalf(g[0],360),g[1]];q=[e.c2p(q),l.c2p(q)];a.contains(q,null,c,h)?(k.push({pointNumber:c,lon:g[0],lat:g[1]}),f.selected=1):f.selected=0}}return k}},{"../../constants/numerical":724,"../../lib":749,"../scatter/subtypes":1179}],1228:[function(b,y,D){D=b("../../plots/template_attributes").hovertemplateAttrs;
var n=b("../../plots/template_attributes").texttemplateAttrs,m=b("../../lib/extend").extendFlat,p=b("../scatter/attributes");b=b("../../plots/attributes");var h=p.line;y.exports={mode:p.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},
thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:p.text,texttemplate:n({editType:"plot"},{keys:["r","theta","text"]}),hovertext:p.hovertext,line:{color:h.color,width:h.width,dash:h.dash,shape:m({},h.shape,{values:["linear","spline"]}),smoothing:h.smoothing,editType:"calc"},connectgaps:p.connectgaps,marker:p.marker,cliponaxis:m({},p.cliponaxis,{dflt:!1}),textposition:p.textposition,textfont:p.textfont,fill:m({},p.fill,{values:["none",
"toself","tonext"],dflt:"none"}),fillcolor:p.fillcolor,hoverinfo:m({},b.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:p.hoveron,hovertemplate:D(),selected:p.selected,unselected:p.unselected}},{"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1229:[function(b,y,D){var n=b("fast-isnumeric"),m=b("../../constants/numerical").BADNUM,p=b("../../plots/cartesian/axes"),h=b("../scatter/colorscale_calc"),a=b("../scatter/arrays_to_calcdata"),
d=b("../scatter/calc_selection"),e=b("../scatter/calc").calcMarkerSize;y.exports=function(l,k){var c=l._fullLayout,f=k.subplot,g=c[f].radialaxis;f=c[f].angularaxis;c=g.makeCalcdata(k,"r");var q=f.makeCalcdata(k,"theta"),t=k._length;f=Array(t);for(var u=0;u<t;u++){var w=c[u],x=q[u],E=f[u]={};n(w)&&n(x)?(E.r=w,E.theta=x):E.r=m}q=e(k,t);k._extremes.x=p.findExtremes(g,c,{ppad:q});h(l,k);a(f,k);d(f,k);return f}},{"../../constants/numerical":724,"../../plots/cartesian/axes":797,"../scatter/arrays_to_calcdata":1154,
"../scatter/calc":1156,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,"fast-isnumeric":241}],1230:[function(b,y,D){function n(f,g,q,t){f=t("r");q=t("theta");if(f)q?f=Math.min(f.length,q.length):(f=f.length,t("theta0"),t("dtheta"));else{if(!q)return 0;f=g.theta.length;t("r0");t("dr")}return g._length=f}var m=b("../../lib"),p=b("../scatter/subtypes"),h=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),d=b("../scatter/line_shape_defaults"),e=b("../scatter/text_defaults"),
l=b("../scatter/fillcolor_defaults"),k=b("../scatter/constants").PTS_LINESONLY,c=b("./attributes");y.exports={handleRThetaDefaults:n,supplyDefaults:function(f,g,q,t){function u(x,E){return m.coerce(f,g,c,x,E)}var w=n(f,g,t,u);if(w){u("thetaunit");u("mode",w<k?"lines+markers":"lines");u("text");u("hovertext");"fills"!==g.hoveron&&u("hovertemplate");p.hasLines(g)&&(a(f,g,q,t,u),d(f,g,u),u("connectgaps"));p.hasMarkers(g)&&h(f,g,q,t,u,{gradient:!0});p.hasText(g)&&(u("texttemplate"),e(f,g,t,u));t=[];if(p.hasMarkers(g)||
p.hasText(g))u("cliponaxis"),u("marker.maxdisplayed"),t.push("points");u("fill");"none"!==g.fill&&(l(f,g,q,u),p.hasLines(g)||d(f,g,u));"tonext"!==g.fill&&"toself"!==g.fill||t.push("fills");u("hoveron",t.join("+")||"points");m.coerceSelectionMarkerOpacity(g,u)}else g.visible=!1}}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/line_shape_defaults":1170,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,
"./attributes":1228}],1231:[function(b,y,D){var n=b("../../lib"),m=b("../../plots/cartesian/axes");y.exports=function(p,h,a){var d={},e=a[h.subplot]._subplot;e?(h=e.radialAxis,e=e.angularAxis):(e=a[h.subplot],h=e.radialaxis,e=e.angularaxis);a=h.c2l(p.r);d.rLabel=m.tickText(h,a,!0).text;p="degrees"===e.thetaunit?n.rad2deg(p.theta):p.theta;d.thetaLabel=m.tickText(e,p,!0).text;return d}},{"../../lib":749,"../../plots/cartesian/axes":797}],1232:[function(b,y,D){function n(p,h,a,d){var e=a.radialAxis,
l=a.angularAxis;e._hovertitle="r";l._hovertitle="";var k={};k[h.subplot]={_subplot:a};a=h._module.formatLabels(p,h,k);d.rLabel=a.rLabel;d.thetaLabel=a.thetaLabel;a=p.hi||h.hoverinfo;p=[];h.hovertemplate||(h=a.split("+"),-1!==h.indexOf("all")&&(h=["r","theta","text"]),-1!==h.indexOf("r")&&p.push(e._hovertitle+": "+d.rLabel),-1!==h.indexOf("theta")&&p.push(l._hovertitle+": "+d.thetaLabel),-1!==h.indexOf("text")&&d.text&&(p.push(d.text),delete d.text),d.extraText=p.join("\x3cbr\x3e"))}var m=b("../scatter/hover");
y.exports={hoverPoints:function(p,h,a,d){if((h=m(p,h,a,d))&&!1!==h[0].index){a=h[0];if(void 0===a.index)return h;p=p.subplot;d=a.cd[a.index];var e=a.trace;if(p.isPtInside(d))return a.xLabelVal=void 0,a.yLabelVal=void 0,n(d,e,p,a),a.hovertemplate=e.hovertemplate,h}},makeHoverPointText:n}},{"../scatter/hover":1166}],1233:[function(b,y,D){y.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:b("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:b("./attributes"),
supplyDefaults:b("./defaults").supplyDefaults,colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scatter/select"),meta:{}}},{"../../plots/polar":863,"../scatter/marker_colorbar":1173,"../scatter/select":1176,"../scatter/style":1178,"./attributes":1228,"./calc":1229,"./defaults":1230,"./format_labels":1231,
"./hover":1232,"./plot":1234}],1234:[function(b,y,D){var n=b("../scatter/plot"),m=b("../../constants/numerical").BADNUM;y.exports=function(p,h,a){var d=h.layers.frontplot.select("g.scatterlayer"),e={xaxis:h.xaxis,yaxis:h.yaxis,plot:h.framework,layerClipId:h._hasClipOnAxisFalse?h.clipIds.forTraces:null},l=h.radialAxis;h=h.angularAxis;for(var k=0;k<a.length;k++)for(var c=a[k],f=0;f<c.length;f++){var g=c[f],q=g.r;if(q===m)g.x=g.y=m;else{q=l.c2g(q);var t=h.c2g(g.theta);g.x=q*Math.cos(t);g.y=q*Math.sin(t)}}n(p,
e,a,d)}},{"../../constants/numerical":724,"../scatter/plot":1175}],1235:[function(b,y,D){D=b("../scatterpolar/attributes");var n=b("../scattergl/attributes");b=b("../../plots/template_attributes").texttemplateAttrs;y.exports={mode:D.mode,r:D.r,theta:D.theta,r0:D.r0,dr:D.dr,theta0:D.theta0,dtheta:D.dtheta,thetaunit:D.thetaunit,text:D.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:D.hovertext,hovertemplate:D.hovertemplate,line:n.line,connectgaps:n.connectgaps,marker:n.marker,
fill:n.fill,fillcolor:n.fillcolor,textposition:n.textposition,textfont:n.textfont,hoverinfo:D.hoverinfo,selected:D.selected,unselected:D.unselected}},{"../../plots/template_attributes":875,"../scattergl/attributes":1206,"../scatterpolar/attributes":1228}],1236:[function(b,y,D){var n=b("../scatter/colorscale_calc"),m=b("../scatter/calc").calcMarkerSize,p=b("../scattergl/convert"),h=b("../../plots/cartesian/axes"),a=b("../scattergl/constants").TOO_MANY_POINTS;y.exports=function(d,e){var l=d._fullLayout,
k=e.subplot,c=l[k].radialaxis;k=l[k].angularaxis;l=e._r=c.makeCalcdata(e,"r");var f=e._theta=k.makeCalcdata(e,"theta");k=e._length;var g={};k<l.length&&(l=l.slice(0,k));k<f.length&&(f=f.slice(0,k));g.r=l;g.theta=f;n(d,e);d=g.opts=p.style(d,e);var q;k<a?q=m(e,k):d.marker&&(q=2*(d.marker.sizeAvg||Math.max(d.marker.size,3)));e._extremes.x=h.findExtremes(c,l,{ppad:q});return[{x:!1,y:!1,t:g,trace:e}]}},{"../../plots/cartesian/axes":797,"../scatter/calc":1156,"../scatter/colorscale_calc":1158,"../scattergl/constants":1208,
"../scattergl/convert":1209}],1237:[function(b,y,D){var n=b("../../lib"),m=b("../scatter/subtypes"),p=b("../scatterpolar/defaults").handleRThetaDefaults,h=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),d=b("../scatter/text_defaults"),e=b("../scatter/fillcolor_defaults"),l=b("../scatter/constants").PTS_LINESONLY,k=b("./attributes");y.exports=function(c,f,g,q){function t(w,x){return n.coerce(c,f,k,w,x)}var u=p(c,f,q,t);u?(t("thetaunit"),t("mode",u<l?"lines+markers":"lines"),t("text"),
t("hovertext"),"fills"!==f.hoveron&&t("hovertemplate"),m.hasLines(f)&&(a(c,f,g,q,t),t("connectgaps")),m.hasMarkers(f)&&h(c,f,g,q,t),m.hasText(f)&&(t("texttemplate"),d(c,f,q,t)),t("fill"),"none"!==f.fill&&e(c,f,g,t),n.coerceSelectionMarkerOpacity(f,t)):f.visible=!1}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"../scatterpolar/defaults":1230,
"./attributes":1235}],1238:[function(b,y,D){var n=b("../scatterpolar/format_labels");y.exports=function(m,p,h){var a=m.i;"r"in m||(m.r=p._r[a]);"theta"in m||(m.theta=p._theta[a]);return n(m,p,h)}},{"../scatterpolar/format_labels":1231}],1239:[function(b,y,D){var n=b("../scattergl/hover"),m=b("../scatterpolar/hover").makeHoverPointText;y.exports={hoverPoints:function(p,h,a,d){var e=p.cd[0].t,l=e.r;e=e.theta;if((h=n.hoverPoints(p,h,a,d))&&!1!==h[0].index){a=h[0];if(void 0===a.index)return h;p=p.subplot;
d=a.cd[a.index];var k=a.trace;d.r=l[a.index];d.theta=e[a.index];if(p.isPtInside(d))return a.xLabelVal=void 0,a.yLabelVal=void 0,m(d,k,p,a),h}}}},{"../scattergl/hover":1214,"../scatterpolar/hover":1232}],1240:[function(b,y,D){y.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:b("../../plots/polar"),categories:"gl regl polar symbols showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),
calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scattergl/select"),meta:{}}},{"../../plots/polar":863,"../scatter/marker_colorbar":1173,"../scattergl/select":1218,"./attributes":1235,"./calc":1236,"./defaults":1237,"./format_labels":1238,"./hover":1239,"./plot":1241}],1241:[function(b,y,D){var n=b("@plotly/point-cluster"),m=b("fast-isnumeric"),p=b("../scattergl/plot"),h=b("../scattergl/scene_update"),a=b("../scattergl/convert"),d=b("../../lib"),e=b("../scattergl/constants").TOO_MANY_POINTS;
y.exports=function(l,k,c){if(c.length){var f=k.radialAxis,g=k.angularAxis,q=h(l,k);c.forEach(function(t){if(t&&t[0]&&t[0].trace){var u=t[0];t=u.trace;u=u.t;var w=t._length,x=u.r,E=u.theta,F=u.opts,z,B=x.slice(),C=E.slice();for(z=0;z<x.length;z++)k.isPtInside({r:x[z],theta:E[z]})||(B[z]=NaN,C[z]=NaN);var v=Array(2*w),G=Array(w),I=Array(w);for(z=0;z<w;z++){var J=B[z];if(m(J)){var K=f.c2g(J);var N=g.c2g(C[z],t.thetaunit);J=K*Math.cos(N);K*=Math.sin(N)}else J=K=NaN;G[z]=v[2*z]=J;I[z]=v[2*z+1]=K}u.tree=
n(v);F.marker&&w>=e&&(F.marker.cluster=u.tree);F.marker&&(F.markerSel.positions=F.markerUnsel.positions=F.marker.positions=v);F.line&&1<v.length&&d.extendFlat(F.line,a.linePositions(l,t,v));F.text&&(d.extendFlat(F.text,{positions:v},a.textPosition(l,t,F.text,F.marker)),d.extendFlat(F.textSel,{positions:v},a.textPosition(l,t,F.text,F.markerSel)),d.extendFlat(F.textUnsel,{positions:v},a.textPosition(l,t,F.text,F.markerUnsel)));F.fill&&!q.fill2d&&(q.fill2d=!0);F.marker&&!q.scatter2d&&(q.scatter2d=!0);
F.line&&!q.line2d&&(q.line2d=!0);F.text&&!q.glText&&(q.glText=!0);q.lineOptions.push(F.line);q.fillOptions.push(F.fill);q.markerOptions.push(F.marker);q.markerSelectedOptions.push(F.markerSel);q.markerUnselectedOptions.push(F.markerUnsel);q.textOptions.push(F.text);q.textSelectedOptions.push(F.textSel);q.textUnselectedOptions.push(F.textUnsel);q.selectBatch.push([]);q.unselectBatch.push([]);u.x=G;u.y=I;u.rawx=G;u.rawy=I;u.r=x;u.theta=E;u.positions=v;u._scene=q;u.index=q.count;q.count++}});return p(l,
k,c)}}},{"../../lib":749,"../scattergl/constants":1208,"../scattergl/convert":1209,"../scattergl/plot":1216,"../scattergl/scene_update":1217,"@plotly/point-cluster":57,"fast-isnumeric":241}],1242:[function(b,y,D){D=b("../../plots/template_attributes").hovertemplateAttrs;var n=b("../../plots/template_attributes").texttemplateAttrs,m=b("../scatter/attributes"),p=b("../../plots/attributes"),h=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash;b=b("../../lib/extend").extendFlat;
var d=m.marker,e=m.line,l=d.line;y.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:b({},m.mode,{dflt:"markers"}),text:b({},m.text,{}),texttemplate:n({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:b({},m.hovertext,{}),line:{color:e.color,width:e.width,dash:a,shape:b({},e.shape,{values:["linear","spline"]}),smoothing:e.smoothing,editType:"calc"},connectgaps:m.connectgaps,
cliponaxis:m.cliponaxis,fill:b({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,marker:b({symbol:d.symbol,opacity:d.opacity,maxdisplayed:d.maxdisplayed,size:d.size,sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,line:b({width:l.width,editType:"calc"},h("marker.line")),gradient:d.gradient,editType:"calc"},h("marker")),textfont:m.textfont,textposition:m.textposition,selected:m.selected,unselected:m.unselected,hoverinfo:b({},p.hoverinfo,{flags:["a","b","c","text",
"name"]}),hoveron:m.hoveron,hovertemplate:D()}},{"../../components/colorscale/attributes":622,"../../components/drawing/attributes":636,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1243:[function(b,y,D){var n=b("fast-isnumeric"),m=b("../scatter/colorscale_calc"),p=b("../scatter/arrays_to_calcdata"),h=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,d=["a","b","c"],e={a:["b","c"],b:["a","c"],c:["a","b"]};
y.exports=function(l,k){var c=l._fullLayout[k.subplot].sum,f=k.sum||c,g={a:k.a,b:k.b,c:k.c},q,t;for(q=0;q<d.length;q++){var u=d[q];if(!g[u]){var w=g[e[u][0]];var x=g[e[u][1]];var E=Array(w.length);for(t=0;t<w.length;t++)E[t]=f-w[t]-x[t];g[u]=E}}f=k._length;t=Array(f);for(q=0;q<f;q++)if(u=g.a[q],E=g.b[q],w=g.c[q],n(u)&&n(E)&&n(w)){u=+u;E=+E;w=+w;x=c/(u+E+w);1!==x&&(u*=x,E*=x,w*=x);var F=u;x=w-E;t[q]={x,y:F,a:u,b:E,c:w}}else t[q]={x:!1,y:!1};a(k,f);m(l,k);p(t,k);h(t,k);return t}},{"../scatter/arrays_to_calcdata":1154,
"../scatter/calc":1156,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,"fast-isnumeric":241}],1244:[function(b,y,D){var n=b("../../lib"),m=b("../scatter/constants"),p=b("../scatter/subtypes"),h=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),d=b("../scatter/line_shape_defaults"),e=b("../scatter/text_defaults"),l=b("../scatter/fillcolor_defaults"),k=b("./attributes");y.exports=function(c,f,g,q){function t(F,z){return n.coerce(c,f,k,F,z)}var u=t("a"),w=t("b"),x=t("c");
if(u){var E=u.length;w?(E=Math.min(E,w.length),x&&(E=Math.min(E,x.length))):E=x?Math.min(E,x.length):0}else w&&x&&(E=Math.min(w.length,x.length));if(E){f._length=E;t("sum");t("text");t("hovertext");"fills"!==f.hoveron&&t("hovertemplate");t("mode",E<m.PTS_LINESONLY?"lines+markers":"lines");p.hasLines(f)&&(a(c,f,g,q,t),d(c,f,t),t("connectgaps"));p.hasMarkers(f)&&h(c,f,g,q,t,{gradient:!0});p.hasText(f)&&(t("texttemplate"),e(c,f,q,t));q=[];if(p.hasMarkers(f)||p.hasText(f))t("cliponaxis"),t("marker.maxdisplayed"),
q.push("points");t("fill");"none"!==f.fill&&(l(c,f,g,t),p.hasLines(f)||d(c,f,t));"tonext"!==f.fill&&"toself"!==f.fill||q.push("fills");t("hoveron",q.join("+")||"points");n.coerceSelectionMarkerOpacity(f,t)}else f.visible=!1}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/line_shape_defaults":1170,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1242}],1245:[function(b,
y,D){y.exports=function(n,m,p,h,a){m.xa&&(n.xaxis=m.xa);m.ya&&(n.yaxis=m.ya);h[a]?(m=h[a],n.a=m.a,n.b=m.b,n.c=m.c):(n.a=m.a,n.b=m.b,n.c=m.c);return n}},{}],1246:[function(b,y,D){var n=b("../../plots/cartesian/axes");y.exports=function(m,p,h){var a={};p=h[p.subplot]._subplot;a.aLabel=n.tickText(p.aaxis,m.a,!0).text;a.bLabel=n.tickText(p.baxis,m.b,!0).text;a.cLabel=n.tickText(p.caxis,m.c,!0).text;return a}},{"../../plots/cartesian/axes":797}],1247:[function(b,y,D){var n=b("../scatter/hover");y.exports=
function(m,p,h,a){if((p=n(m,p,h,a))&&!1!==p[0].index){h=p[0];if(void 0===h.index)return a=m.xa._length,m=a*(1-h.y0/m.ya._length)/2,a-=m,h.x0=Math.max(Math.min(h.x0,a),m),h.x1=Math.max(Math.min(h.x1,a),m),p;var d=h.cd[h.index];m=h.trace;a=h.subplot;h.a=d.a;h.b=d.b;h.c=d.c;h.xLabelVal=void 0;h.yLabelVal=void 0;var e={};e[m.subplot]={_subplot:a};e=m._module.formatLabels(d,m,e);h.aLabel=e.aLabel;h.bLabel=e.bLabel;h.cLabel=e.cLabel;e=d.hi||m.hoverinfo;d=[];m.hovertemplate||(e=e.split("+"),-1!==e.indexOf("all")&&
(e=["a","b","c"]),-1!==e.indexOf("a")&&d.push(a.aaxis._hovertitle+": "+h.aLabel),-1!==e.indexOf("b")&&d.push(a.baxis._hovertitle+": "+h.bLabel),-1!==e.indexOf("c")&&d.push(a.caxis._hovertitle+": "+h.cLabel));h.extraText=d.join("\x3cbr\x3e");h.hovertemplate=m.hovertemplate;return p}}},{"../scatter/hover":1166}],1248:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),
style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:b("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":876,"../scatter/marker_colorbar":1173,"../scatter/select":1176,"../scatter/style":1178,"./attributes":1242,"./calc":1243,"./defaults":1244,"./event_data":1245,
"./format_labels":1246,"./hover":1247,"./plot":1249}],1249:[function(b,y,D){var n=b("../scatter/plot");y.exports=function(m,p,h){var a=p.plotContainer;a.select(".scatterlayer").selectAll("*").remove();a={xaxis:p.xaxis,yaxis:p.yaxis,plot:a,layerClipId:p._hasClipOnAxisFalse?p.clipIdRelative:null};p=p.layers.frontplot.select("g.scatterlayer");n(m,a,h,p)}},{"../scatter/plot":1175}],1250:[function(b,y,D){function n(l){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",
regex:a[l],editType:"plot"}}}var m=b("../scatter/attributes"),p=b("../../components/colorscale/attributes");D=b("../../plots/template_attributes").hovertemplateAttrs;var h=b("../scattergl/attributes"),a=b("../../plots/cartesian/constants").idRegex,d=b("../../plot_api/plot_template").templatedArray;b=b("../../lib/extend").extendFlat;m=m.marker;var e=m.line;e=b(p("marker.line",{editTypeOverride:"calc"}),{width:b({},e.width,{editType:"calc"}),editType:"calc"});p=b(p("marker"),{symbol:m.symbol,size:b({},
m.size,{editType:"markerSize"}),sizeref:m.sizeref,sizemin:m.sizemin,sizemode:m.sizemode,opacity:m.opacity,colorbar:m.colorbar,line:e,editType:"calc"});p.color.editType=p.cmin.editType=p.cmax.editType="style";y.exports={dimensions:d("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},
matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:b({},h.text,{}),hovertext:b({},h.hovertext,{}),hovertemplate:D(),marker:p,xaxes:n("x"),yaxes:n("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:h.selected.marker,editType:"calc"},unselected:{marker:h.unselected.marker,
editType:"calc"},opacity:h.opacity}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803,"../../plots/template_attributes":875,"../scatter/attributes":1155,"../scattergl/attributes":1206}],1251:[function(b,y,D){function n(c){var f=c._fullLayout,g=f._glcanvas.data()[0].regl,q=f._splomGrid;q||(q=f._splomGrid=p(g));q.update(m(c))}function m(c){function f(I,J,K,N,H,L){var P=J[I+"color"];I=J[I+"width"];J=String(P+
I);J in u?u[J].data.push(NaN,NaN,K,N,H,L):u[J]={data:[K,N,H,L],join:"rect",thickness:I,color:P,viewport:t,range:t,overlay:!1}}var g=c._fullLayout,q=g._size,t=[0,0,g.width,g.height],u={},w;for(w in g._splomSubplots){var x=g._plots[w],E=x.xaxis;x=x.yaxis;var F=E._gridVals,z=x._gridVals,B=q.b+x.domain[0]*q.h,C=-x._m,v=-C*x.r2l(x.range[0],x.calendar);if(E.showgrid)for(w=0;w<F.length;w++){var G=E._offset+E.l2p(F[w].x);f("grid",E,G,B,G,B+x._length)}if(x.showgrid)for(w=0;w<z.length;w++)F=B+v+C*z[w].x,f("grid",
x,E._offset,F,E._offset+E._length,F);k(c,E,x)&&(G=E._offset+E.l2p(0),f("zeroline",E,G,B,G,B+x._length));k(c,x,E)&&(F=B+v+0,f("zeroline",x,E._offset,F,E._offset+E._length,F))}c=[];for(w in u)c.push(u[w]);return c}var p=b("regl-line2d"),h=b("../../registry"),a=b("../../lib/prepare_regl"),d=b("../../plots/get_data").getModuleCalcData,e=b("../../plots/cartesian"),l=b("../../plots/cartesian/axis_ids").getFromId,k=b("../../plots/cartesian/axes").shouldShowZeroLine;y.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,
layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(c){var f=c._fullLayout,g=h.getModule("splom"),q=d(c.calcdata,g)[0];a(c,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(f._hasOnlyLargeSploms&&n(c),g.plot(c,{},q))},drag:function(c){var f=c.calcdata,g=c._fullLayout;g._hasOnlyLargeSploms&&n(c);for(var q=0;q<f.length;q++){var t=f[q][0].trace,u=g._splomScenes[t.uid];if("splom"===t.type&&u&&u.matrix){for(var w=c,x=t._visibleDims,
E=u.viewOpts.ranges=Array(u.matrixOptions.data.length),F=0;F<x.length;F++){var z=x[F],B=E[F]=Array(4),C=l(w,t._diag[z][0]);C&&(B[0]=C.r2l(C.range[0]),B[2]=C.r2l(C.range[1]));if(z=l(w,t._diag[z][1]))B[1]=z.r2l(z.range[0]),B[3]=z.r2l(z.range[1])}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:E},{ranges:E}):u.matrix.update({ranges:E})}}},updateGrid:n,clean:function(c,f,g,q){var t={},u;if(q._splomScenes){for(u=0;u<c.length;u++){var w=c[u];"splom"===w.type&&(t[w.uid]=1)}for(u=0;u<
g.length;u++)if(w=g[u],!t[w.uid]){var x=q._splomScenes[w.uid];x&&x.destroy&&x.destroy();q._splomScenes[w.uid]=null;delete q._splomScenes[w.uid]}}0===Object.keys(q._splomScenes||{}).length&&delete q._splomScenes;q._splomGrid&&!f._hasOnlyLargeSploms&&q._hasOnlyLargeSploms&&(q._splomGrid.destroy(),q._splomGrid=null,delete q._splomGrid);e.clean(c,f,g,q)},updateFx:e.updateFx,toSVG:e.toSVG}},{"../../lib/prepare_regl":762,"../../plots/cartesian":810,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_ids":800,
"../../plots/get_data":834,"../../registry":880,"regl-line2d":509}],1252:[function(b,y,D){var n=b("../../lib"),m=b("../../plots/cartesian/axis_ids"),p=b("../scatter/calc").calcMarkerSize,h=b("../scatter/calc").calcAxisExpansion,a=b("../scatter/colorscale_calc"),d=b("../scattergl/convert").markerSelection,e=b("../scattergl/convert").markerStyle,l=b("./scene_update"),k=b("../../constants/numerical").BADNUM,c=b("../scattergl/constants").TOO_MANY_POINTS;y.exports=function(f,g){function q(I,J){J=I.makeCalcdata({v:J.values,
vcalendar:g.calendar},"v");for(var K=0;K<J.length;K++)J[K]=J[K]===k?NaN:J[K];x.push(J);E.push("log"===I.type?n.simpleMap(J,I.c2l):J)}var t=g.dimensions,u=g._length,w={},x=w.cdata=[],E=w.data=[],F=g._visibleDims=[],z;for(z=0;z<t.length;z++){var B=t[z];if(B.visible){var C=m.getFromId(f,g._diag[z][0]);var v=m.getFromId(f,g._diag[z][1]);C&&v&&C.type!==v.type?n.log("Skipping splom dimension "+z+" with conflicting axis types"):(C?(q(C,B),v&&"category"===v.type&&(v._categories=C._categories.slice())):q(v,
B),F.push(z))}}a(f,g);n.extendFlat(w,e(g));var G=x.length*u>c?2*(w.sizeAvg||Math.max(w.size,3)):p(g,u);for(u=0;u<F.length;u++)z=F[u],B=t[z],C=m.getFromId(f,g._diag[z][0])||{},v=m.getFromId(f,g._diag[z][1])||{},h(f,g,C,v,x[u],x[u],G);f=l(f,g);f.matrix||(f.matrix=!0);f.matrixOptions=w;f.selectedOptions=d(g,g.selected);f.unselectedOptions=d(g,g.unselected);return[{x:!1,y:!1,t:{},trace:g}]}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axis_ids":800,"../scatter/calc":1156,"../scatter/colorscale_calc":1158,
"../scattergl/constants":1208,"../scattergl/convert":1209,"./scene_update":1259}],1253:[function(b,y,D){function n(c,f){function g(t,u){return p.coerce(c,f,a.dimensions,t,u)}g("label");var q=g("values");q&&q.length?g("visible"):f.visible=!1;g("axis.type");g("axis.matches")}function m(c,f,g,q){function t(L,P,Q,S){if(L){var O=L.charAt(0),U=g._splomAxes[O];f["_"+O+"axes"][L]=1;S.push(L);L in U||(L=U[L]={},Q&&(L.label=Q.label||"",Q.visible&&Q.axis&&(Q.axis.type&&(L.type=Q.axis.type),Q.axis.matches&&(L.matches=
P))))}}var u=f.dimensions,w=u.length;c=f.showupperhalf;var x=f.showlowerhalf,E=f.diagonal.visible,F,z=Array(w),B=Array(w);for(F=0;F<w;F++){var C=F?F+1:"";z[F]="x"+C;B[F]="y"+C}z=q("xaxes",z);C=q("yaxes",B);var v=f._diag=Array(w);f._xaxes={};f._yaxes={};q=[];B=[];var G=!E&&!x,I=!E&&!c;f._axesDim={};for(F=0;F<w;F++){var J=u[F],K=0===F,N=F===w-1,H=K&&G||N&&I?void 0:z[F];K=K&&I||N&&G?void 0:C[F];t(H,K,J,q);t(K,H,J,B);v[F]=[H,K];f._axesDim[H]=F;f._axesDim[K]=F}for(F=0;F<q.length;F++)for(u=0;u<B.length;u++)w=
q[F]+B[u],F>u&&c?g._splomSubplots[w]=1:F<u&&x?g._splomSubplots[w]=1:F!==u||!E&&x&&c||(g._splomSubplots[w]=1);if(!x||!E&&c&&x)g._splomGridDflt.xside="bottom",g._splomGridDflt.yside="left"}var p=b("../../lib"),h=b("../../plots/array_container_defaults"),a=b("./attributes"),d=b("../scatter/subtypes"),e=b("../scatter/marker_defaults"),l=b("../parcoords/merge_length"),k=b("../scattergl/helpers").isOpenSymbol;y.exports=function(c,f,g,q){function t(F,z){return p.coerce(c,f,a,F,z)}var u=h(c,f,{name:"dimensions",
handleItemDefaults:n}),w=t("diagonal.visible"),x=t("showupperhalf"),E=t("showlowerhalf");l(f,u,"values")&&(w||x||E)?(t("text"),t("hovertext"),t("hovertemplate"),e(c,f,g,q,t),g=k(f.marker.symbol),u=d.isBubble(f),t("marker.line.width",g||u?1:0),m(c,f,q,t),p.coerceSelectionMarkerOpacity(f,t)):f.visible=!1}},{"../../lib":749,"../../plots/array_container_defaults":793,"../parcoords/merge_length":1126,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scattergl/helpers":1213,"./attributes":1250}],
1254:[function(b,y,D){var n=b("../../lib"),m=b("../scatter/colorscale_calc"),p=b("../scattergl/convert").markerStyle;y.exports=function(h,a){var d=a.trace;if(a=h._fullLayout._splomScenes[d.uid])m(h,d),n.extendFlat(a.matrixOptions,p(d)),h=n.extendFlat({},a.matrixOptions,a.viewOpts),a.matrix.update(h,null)}},{"../../lib":749,"../scatter/colorscale_calc":1158,"../scattergl/convert":1209}],1255:[function(b,y,D){D.getDimIndex=function(n,m){m=m._id;for(var p={x:0,y:1}[m.charAt(0)],h=n._visibleDims,a=0;a<
h.length;a++)if(n._diag[h[a]][p]===m)return a;return!1}},{}],1256:[function(b,y,D){var n=b("./helpers"),m=b("../scattergl/hover").calcHover;y.exports={hoverPoints:function(p,h,a){var d=p.cd[0].trace,e=p.scene.matrixOptions.cdata,l=p.xa,k=p.ya;h=l.c2p(h);a=k.c2p(a);var c=p.distance,f=n.getDimIndex(d,l),g=n.getDimIndex(d,k);if(!1===f||!1===g)return[p];f=e[f];e=e[g];var q;for(g=0;g<f.length;g++){var t=e[g],u=l.c2p(f[g])-h;t=k.c2p(t)-a;u=Math.sqrt(u*u+t*t);if(u<c){c=q=u;var w=g}}p.index=w;p.distance=
c;p.dxy=q;return void 0===w?[p]:[m(p,f,e,d)]}}},{"../scattergl/hover":1214,"./helpers":1255}],1257:[function(b,y,D){D=b("../../registry");var n=b("../../components/grid");y.exports={moduleType:"trace",name:"splom",basePlotModule:b("./base_plot"),categories:"gl regl cartesian symbols showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select"),
editStyle:b("./edit_style"),meta:{}};D.register(n)},{"../../components/grid":659,"../../registry":880,"../scatter/marker_colorbar":1173,"./attributes":1250,"./base_plot":1251,"./calc":1252,"./defaults":1253,"./edit_style":1254,"./hover":1256,"./plot":1258,"./select":1260}],1258:[function(b,y,D){var n=b("regl-splom"),m=b("../../lib"),p=b("../../plots/cartesian/axis_ids"),h=b("../../components/dragelement/helpers").selectMode;y.exports=function(a,d,e){if(e.length)for(d=0;d<e.length;d++){var l,k,c=a,
f=e[d][0],g=c._fullLayout,q=g._size,t=f.trace;var u=f.t;f=g._splomScenes[t.uid];var w=f.matrixOptions,x=w.cdata,E=g._glcanvas.data()[0].regl,F=g.dragmode;if(0!==x.length){w.lower=t.showupperhalf;w.upper=t.showlowerhalf;w.diagonal=t.diagonal.visible;var z=t._visibleDims,B=x.length,C=f.viewOpts={};C.ranges=Array(B);C.domains=Array(B);for(l=0;l<z.length;l++){var v=z[l];var G=C.ranges[l]=Array(4),I=C.domains[l]=Array(4);if(k=p.getFromId(c,t._diag[v][0]))G[0]=k._rl[0],G[2]=k._rl[1],I[0]=k.domain[0],I[2]=
k.domain[1];if(v=p.getFromId(c,t._diag[v][1]))G[1]=v._rl[0],G[3]=v._rl[1],I[1]=v.domain[0],I[3]=v.domain[1]}C.viewport=[q.l,q.b,q.w+q.l,q.h+q.b];!0===f.matrix&&(f.matrix=n(E));v=-1<g.clickmode.indexOf("select");g=!0;if(h(F)||t.selectedpoints||v){F=t._length;if(t.selectedpoints){k=f.selectBatch=t.selectedpoints;l={};for(v=0;v<k.length;v++)l[k[v]]=!0;k=[];for(v=0;v<F;v++)l[v]||k.push(v);f.unselectBatch=k}q=u.xpx=Array(B);B=u.ypx=Array(B);for(l=0;l<z.length;l++){v=z[l];if(k=p.getFromId(c,t._diag[v][0]))for(q[l]=
Array(F),u=0;u<F;u++)q[l][u]=k.c2p(x[l][u]);if(v=p.getFromId(c,t._diag[v][1]))for(B[l]=Array(F),u=0;u<F;u++)B[l][u]=v.c2p(x[l][u])}if(f.selectBatch.length||f.unselectBatch.length)c=m.extendFlat({},w,f.unselectedOptions,C),t=m.extendFlat({},w,f.selectedOptions,C),f.matrix.update(c,t),g=!1}else u.xpx=u.ypx=null;g&&(w=m.extendFlat({},w,C),f.matrix.update(w,null))}}}},{"../../components/dragelement/helpers":633,"../../lib":749,"../../plots/cartesian/axis_ids":800,"regl-splom":511}],1259:[function(b,y,
D){var n=b("../../lib");y.exports=function(m,p){var h=m._fullLayout;m=p.uid;var a=h._splomScenes;a||(a=h._splomScenes={});h={dirty:!0,selectBatch:[],unselectBatch:[]};var d={matrix:!1,selectBatch:[],unselectBatch:[]},e=a[p.uid];e||(e=a[m]=n.extendFlat({},h,d),e.draw=function(){e.matrix&&e.matrix.draw&&(e.selectBatch.length||e.unselectBatch.length?e.matrix.draw(e.unselectBatch,e.selectBatch):e.matrix.draw());e.dirty=!1},e.destroy=function(){e.matrix&&e.matrix.destroy&&e.matrix.destroy();e.matrixOptions=
null;e.selectBatch=null;e=e.unselectBatch=null});e.dirty||n.extendFlat(e,h);return e}},{"../../lib":749}],1260:[function(b,y,D){var n=b("../../lib"),m=b("../scatter/subtypes"),p=b("./helpers");y.exports=function(h,a){var d=h.cd,e=d[0].trace,l=d[0].t;d=h.scene;var k=d.matrixOptions.cdata,c=h.xaxis,f=h.yaxis,g=[];if(!d)return g;var q=!m.hasMarkers(e)&&!m.hasText(e);if(!0!==e.visible||q)return g;c=p.getDimIndex(e,c);f=p.getDimIndex(e,f);if(!1===c||!1===f)return g;e=l.xpx[c];l=l.ypx[f];c=k[c];q=k[f];
k=[];f=[];if(!1!==a&&!a.degenerate)for(var t=0;t<c.length;t++)a.contains([e[t],l[t]],null,t,h)?(k.push(t),g.push({pointNumber:t,x:c[t],y:q[t]})):f.push(t);h=d.matrixOptions;k.length||f.length?d.selectBatch.length||d.unselectBatch.length||d.matrix.update(d.unselectedOptions,n.extendFlat({},h,d.selectedOptions,d.viewOpts)):d.matrix.update(h,null);d.selectBatch=k;d.unselectBatch=f;return g}},{"../../lib":749,"../scatter/subtypes":1179,"./helpers":1255}],1261:[function(b,y,D){D=b("../../components/colorscale/attributes");
var n=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../mesh3d/attributes"),p=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var h={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},
y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1E3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:n({editType:"calc"},{keys:"tubex tubey tubez tubeu tubev tubew norm divergence".split(" ")}),showlegend:b({},p.showlegend,{dflt:!1})};b(h,D("",{colorAttr:"u/v/w norm",
showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(a){h[a]=m[a]});h.hoverinfo=b({},p.hoverinfo,{editType:"calc",flags:"x y z u v w norm divergence text name".split(" "),dflt:"x+y+z+norm+text+name"});h.transforms=void 0;y.exports=h},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../mesh3d/attributes":1096}],1262:[function(b,y,D){function n(a){var d=a._x,e=a._y,
l=a._z,k=a._len,c,f,g=-Infinity,q=Infinity,t=-Infinity,u=Infinity,w=-Infinity,x=Infinity,E="";if(k){var F=d[0];var z=e[0];var B=l[0]}if(1<k){var C=d[k-1];var v=e[k-1];var G=l[k-1]}for(c=0;c<k;c++){g=Math.max(g,d[c]);q=Math.min(q,d[c]);t=Math.max(t,e[c]);u=Math.min(u,e[c]);w=Math.max(w,l[c]);x=Math.min(x,l[c]);if(!I&&d[c]!==F){var I=!0;E+="x"}if(!J&&e[c]!==z){var J=!0;E+="y"}if(!K&&l[c]!==B){var K=!0;E+="z"}}I||(E+="x");J||(E+="y");K||(E+="z");var N=p.distinctVals(a._x).vals,H=p.distinctVals(a._y).vals,
L=p.distinctVals(a._z).vals;E=E.replace("x",(F>C?"-":"+")+"x");E=E.replace("y",(z>v?"-":"+")+"y");E=E.replace("z",(B>G?"-":"+")+"z");if(!k||k<N.length*H.length*L.length)k=0,N=[],H=[],L=[];c=function(U){return"x"===U?d:"y"===U?e:l};C=function(U){return"x"===U?N:"y"===U?H:L};G=function(U){return U[k-1]<U[0]?-1:1};a=c(E[1]);I=c(E[3]);J=c(E[5]);K=C(E[1]).length;F=C(E[3]).length;C=C(E[5]).length;z=!1;v=G(c(E[1]));B=G(c(E[3]));var P=G(c(E[5]));for(c=0;c<C-1;c++){for(G=0;G<F-1;G++){for(f=0;f<K-1;f++){var Q=
K*(F*c+G)+f,S=K*(F*c+(G+1))+f,O=K*(F*(c+1)+G)+f;a[Q]*v<a[K*(F*c+G)+(f+1)]*v&&I[Q]*B<I[S]*B&&J[Q]*P<J[O]*P||(z=!0);if(z)break}if(z)break}if(z)break}z&&(p.warn("Encountered arbitrary coordinates! Unable to input data grid."),k=0,N=[],H=[],L=[]);return{xMin:q,yMin:u,zMin:x,xMax:g,yMax:t,zMax:w,Xs:N,Ys:H,Zs:L,len:k,fill:E}}function m(a,d){void 0===d&&(d=a.length);if(p.isTypedArray(a))return a.subarray(0,d);for(var e=[],l=0;l<d;l++)e[l]=+a[l];return e}var p=b("../../lib"),h=b("../../components/colorscale/calc");
y.exports={calc:function(a,d){d._len=Math.min(d.u.length,d.v.length,d.w.length,d.x.length,d.y.length,d.z.length);d._u=m(d.u,d._len);d._v=m(d.v,d._len);d._w=m(d.w,d._len);d._x=m(d.x,d._len);d._y=m(d.y,d._len);d._z=m(d.z,d._len);var e=n(d);d._gridFill=e.fill;d._Xs=e.Xs;d._Ys=e.Ys;d._Zs=e.Zs;d._len=e.len;var l=0;if(d.starts){var k=m(d.starts.x||[]);var c=m(d.starts.y||[]);var f=m(d.starts.z||[]);l=Math.min(k.length,c.length,f.length)}d._startsX=k||[];d._startsY=c||[];d._startsZ=f||[];var g=0,q=Infinity,
t;for(t=0;t<d._len;t++){var u=d._u[t],w=d._v[t],x=d._w[t];u=Math.sqrt(u*u+w*w+x*x);g=Math.max(g,u);q=Math.min(q,u)}h(a,d,{vals:[q,g],containerStr:"",cLetter:"c"});for(t=0;t<l;t++)a=k[t],e.xMax=Math.max(e.xMax,a),e.xMin=Math.min(e.xMin,a),a=c[t],e.yMax=Math.max(e.yMax,a),e.yMin=Math.min(e.yMin,a),a=f[t],e.zMax=Math.max(e.zMax,a),e.zMin=Math.min(e.zMin,a);d._slen=l;d._normMax=g;d._xbnds=[e.xMin,e.xMax];d._ybnds=[e.yMin,e.yMax];d._zbnds=[e.zMin,e.zMax]},filter:m,processGrid:n}},{"../../components/colorscale/calc":623,
"../../lib":749}],1263:[function(b,y,D){function n(g,q){this.scene=g;this.uid=q;this.data=this.mesh=null}function m(g){var q=g.length;return 2<q?g.slice(1,q-1):2===q?[(g[0]+g[1])/2]:g}function p(g){var q=g.length;return 1===q?[.5,.5]:[g[1]-g[0],g[q-1]-g[q-2]]}function h(g,q){function t(K,N){var H=u[N],L=w[f[N]];return e.simpleMap(K,function(P){return H.d2l(P)*L})}var u=g.fullSceneLayout,w=g.dataScale,x=q._len;g={};g.vectors=c(t(q._u,"xaxis"),t(q._v,"yaxis"),t(q._w,"zaxis"),x);if(!x)return{positions:[],
cells:[]};var E=t(q._Xs,"xaxis"),F=t(q._Ys,"yaxis");x=t(q._Zs,"zaxis");g.meshgrid=[E,F,x];g.gridFill=q._gridFill;if(q._slen)g.startingPositions=c(t(q._startsX,"xaxis"),t(q._startsY,"yaxis"),t(q._startsZ,"zaxis"));else{for(var z=F[0],B=m(E),C=m(x),v=Array(B.length*C.length),G=0,I=0;I<B.length;I++)for(var J=0;J<C.length;J++)v[G++]=[B[I],z,C[J]];g.startingPositions=v}g.colormap=l(q);g.tubeSize=q.sizeref;g.maxLength=q.maxdisplayed;z=t(q._xbnds,"xaxis");B=t(q._ybnds,"yaxis");C=t(q._zbnds,"zaxis");E=p(E);
F=p(F);x=p(x);g=a(g,[[z[0]-E[0],B[0]-F[0],C[0]-x[0]],[z[1]+E[1],B[1]+F[1],C[1]+x[1]]]);x=k(q);g.vertexIntensityBounds=[x.min/q._normMax,x.max/q._normMax];x=q.lightposition;g.lightPosition=[x.x,x.y,x.z];g.ambient=q.lighting.ambient;g.diffuse=q.lighting.diffuse;g.specular=q.lighting.specular;g.roughness=q.lighting.roughness;g.fresnel=q.lighting.fresnel;g.opacity=q.opacity;q._pad=g.tubeScale*q.sizeref*2;return g}var a=b("gl-streamtube3d"),d=a.createTubeMesh,e=b("../../lib"),l=b("../../lib/gl_format_color").parseColorScale,
k=b("../../components/colorscale").extractOpts,c=b("../../plots/gl3d/zip3"),f={xaxis:0,yaxis:1,zaxis:2};b=n.prototype;b.handlePick=function(g){function q(E,F){var z=u[f[F]];return t[F].l2c(E)/z}var t=this.scene.fullSceneLayout,u=this.scene.dataScale;if(g.object===this.mesh){var w=g.data.position,x=g.data.velocity;g.traceCoordinate=[q(w[0],"xaxis"),q(w[1],"yaxis"),q(w[2],"zaxis"),q(x[0],"xaxis"),q(x[1],"yaxis"),q(x[2],"zaxis"),g.data.intensity*this.data._normMax,g.data.divergence];g.textLabel=this.data.hovertext||
this.data.text;return!0}};b.update=function(g){this.data=g;g=h(this.scene,g);this.mesh.update(g)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};y.exports=function(g,q){var t=g.glplot.gl,u=h(g,q);t=d(t,u);u=new n(g,q.uid);u.mesh=t;u.data=q;t._trace=u;g.glplot.add(t);return u}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gl_format_color":745,"../../plots/gl3d/zip3":850,"gl-streamtube3d":323}],1264:[function(b,y,D){var n=b("../../lib"),m=b("../../components/colorscale/defaults"),
p=b("./attributes");y.exports=function(h,a,d,e){function l(t,u){return n.coerce(h,a,p,t,u)}d=l("u");var k=l("v"),c=l("w"),f=l("x"),g=l("y"),q=l("z");d&&d.length&&k&&k.length&&c&&c.length&&f&&f.length&&g&&g.length&&q&&q.length?(l("starts.x"),l("starts.y"),l("starts.z"),l("maxdisplayed"),l("sizeref"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),m(h,a,e,l,{prefix:"",cLetter:"c"}),
l("text"),l("hovertext"),l("hovertemplate"),a._length=null):a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":1261}],1265:[function(b,y,D){y.exports={moduleType:"trace",name:"streamtube",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc").calc,plot:b("./convert"),eventData:function(n,m){n.tubex=n.x;n.tubey=n.y;n.tubez=n.z;n.tubeu=m.traceCoordinate[3];
n.tubev=m.traceCoordinate[4];n.tubew=m.traceCoordinate[5];n.norm=m.traceCoordinate[6];n.divergence=m.traceCoordinate[7];delete n.x;delete n.y;delete n.z;return n},meta:{}}},{"../../plots/gl3d":839,"./attributes":1261,"./calc":1262,"./convert":1263,"./defaults":1264}],1266:[function(b,y,D){D=b("../../plots/attributes");var n=b("../../plots/template_attributes").hovertemplateAttrs,m=b("../../plots/template_attributes").texttemplateAttrs,p=b("../../components/colorscale/attributes"),h=b("../../plots/domain").attributes,
a=b("../pie/attributes"),d=b("./constants");b=b("../../lib/extend").extendFlat;y.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",
dflt:-1},marker:b({colors:{valType:"data_array",editType:"calc"},line:{color:b({},a.marker.line.color,{dflt:null}),width:b({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},p("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:"label;text;value;current path;percent root;percent entry;percent parent".split(";"),extras:["none"],editType:"plot"},texttemplate:m({editType:"plot"},
{keys:d.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:b({},D.hoverinfo,{flags:"label;text;value;name;current path;percent root;percent entry;percent parent".split(";"),dflt:"label+text+value+name"}),hovertemplate:n({},{keys:d.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:b({},a.outsidetextfont,{}),domain:h({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":622,
"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/template_attributes":875,"../pie/attributes":1129,"./constants":1269}],1267:[function(b,y,D){var n=b("../../plots/plots");D.name="sunburst";D.plot=function(m,p,h,a){n.plotBasePlot(D.name,m,p,h,a)};D.clean=function(m,p,h,a){n.cleanBasePlot(D.name,m,p,h,a)}},{"../../plots/plots":860}],1268:[function(b,y,D){function n(g,q,t){var u=0,w=g.children;if(w){for(var x=w.length,E=0;E<x;E++)u+=n(w[E],q,t);t.branches&&u++}else t.leaves&&
u++;g.value=g.data.data.value=u;q._values||(q._values=[]);return q._values[g.data.data.i]=u}var m=b("d3-hierarchy"),p=b("fast-isnumeric"),h=b("../../lib"),a=b("../../components/colorscale").makeColorScaleFuncFromTrace,d=b("../pie/calc").makePullColorFn,e=b("../pie/calc").generateExtendedColors,l=b("../../components/colorscale").calc,k=b("../../constants/numerical").ALMOST_EQUAL,c={},f={};D.calc=function(g,q){var t=g._fullLayout,u=q.ids,w=h.isArrayOrTypedArray(u),x=q.labels,E=q.parents,F=q.values,
z=h.isArrayOrTypedArray(F),B=[],C={},v={},G=function(ca,ia){C[ca]?C[ca].push(ia):C[ca]=[ia];v[ia]=1},I=function(ca){return ca||"number"===typeof ca},J=function(ca){return!z||p(F[ca])&&0<=F[ca]};if(w){w=Math.min(u.length,E.length);var K=function(ca){return I(u[ca])&&J(ca)};var N=function(ca){return String(u[ca])}}else w=Math.min(x.length,E.length),K=function(ca){return I(x[ca])&&J(ca)},N=function(ca){return String(x[ca])};z&&(w=Math.min(w,F.length));for(var H=0;H<w;H++)if(K(H)){var L=N(H),P=I(E[H])?
String(E[H]):"",Q={i:H,id:L,pid:P,label:I(x[H])?String(x[H]):""};z&&(Q.v=+F[H]);B.push(Q);G(P,L)}if(!C[""]){E=[];for(var S in C)v[S]||E.push(S);if(1===E.length)S=E[0],B.unshift({hasImpliedRoot:!0,id:S,pid:"",label:S});else return h.warn("Multiple implied roots, cannot build "+q.type+" hierarchy.")}else if(1<C[""].length){S=h.randstr();for(E=0;E<B.length;E++)""===B[E].pid&&(B[E].pid=S);B.unshift({hasMultipleRoots:!0,id:S,pid:"",label:""})}try{var O=m.stratify().id(function(ca){return ca.id}).parentId(function(ca){return ca.pid})(B)}catch(ca){return h.warn("Failed to build "+
q.type+" hierarchy. Error: "+ca.message)}O=m.hierarchy(O);var U=!1;if(z)switch(q.branchvalues){case "remainder":O.sum(function(ca){return ca.data.v});break;case "total":O.each(function(ca){var ia=ca.data.data,ha=ia.v;if(ca.children){var fa=ca.children.reduce(function(na,sa){return na+sa.data.data.v},0);if(ia.hasImpliedRoot||ia.hasMultipleRoots)ha=fa;if(ha<fa*k)return U=!0,h.warn(["Total value for node",ca.data.data.id,"is smaller than the sum of its children. \nparent value \x3d",ha,"\nchildren sum \x3d",
fa].join(" "))}ca.value=ha})}else n(O,q,{branches:-1!==q.count.indexOf("branches"),leaves:-1!==q.count.indexOf("leaves")});if(!U){O.sort(function(ca,ia){return ia.value-ca.value});var X=q.marker.colors||[];S=!!X.length;if(q._hasColorscale){S||(X=z?q.values:q._values);l(g,q,{vals:X,containerStr:"marker",cLetter:"c"});var da=a(q.marker)}else var ea=d(t["_"+q.type+"colormap"]);O.each(function(ca){ca=ca.data.data;ca.color=q._hasColorscale?da(X[ca.i]):ea(X[ca.i],ca.id)});B[0].hierarchy=O;return B}};D._runCrossTraceCalc=
function(g,q){function t(z){var B=z.data.data,C=B.id;!1===B.color&&(x[C]?B.color=x[C]:z.parent?z.parent.parent?B.color=z.parent.data.data.color:(x[C]=B.color=w[E%w.length],E++):B.color="rgba(0,0,0,0)")}var u=q._fullLayout;q=q.calcdata;var w=u[g+"colorway"],x=u["_"+g+"colormap"];u["extend"+g+"colors"]&&(w=e(w,"treemap"===g?f:c));var E=0;for(u=0;u<q.length;u++){var F=q[u][0];F.trace.type===g&&F.hierarchy&&F.hierarchy.each(t)}};D.crossTraceCalc=function(g){return D._runCrossTraceCalc("sunburst",g)}},
{"../../components/colorscale":627,"../../constants/numerical":724,"../../lib":749,"../pie/calc":1131,"d3-hierarchy":161,"fast-isnumeric":241}],1269:[function(b,y,D){y.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" ")}},{}],1270:[function(b,y,D){var n=b("../../lib"),m=b("./attributes"),p=b("../../plots/domain").defaults,h=b("../bar/defaults").handleText;b=b("../../components/colorscale");var a=
b.hasColorscale,d=b.handleDefaults;y.exports=function(e,l,k,c){function f(q,t){return n.coerce(e,l,m,q,t)}k=f("labels");var g=f("parents");k&&k.length&&g&&g.length?((k=f("values"))&&k.length?f("branchvalues"):f("count"),f("level"),f("maxdepth"),f("marker.line.width")&&f("marker.line.color",c.paper_bgcolor),f("marker.colors"),(k=l._hasColorscale=a(e,"marker","colors")||(e.marker||{}).coloraxis)&&d(e,l,c,f,{prefix:"marker.",cLetter:"c"}),f("leaf.opacity",k?1:.7),k=f("text"),f("texttemplate"),l.texttemplate||
f("textinfo",Array.isArray(k)?"text+label":"label"),f("hovertext"),f("hovertemplate"),h(e,l,c,f,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("insidetextorientation"),p(l,c,f),l._length=null):l.visible=!1}},{"../../components/colorscale":627,"../../lib":749,"../../plots/domain":824,"../bar/defaults":894,"./attributes":1266}],1271:[function(b,y,D){function n(c,f,g){for(var q=c.data.data,t={curveNumber:f.index,
pointNumber:q.i,data:f._input,fullData:f},u=0;u<g.length;u++){var w=g[u];w in c&&(t[w]=c[w])}"parentString"in c&&!l.isHierarchyRoot(c)&&(t.parent=c.parentString);h(t,f,q.i);return t}var m=b("d3"),p=b("../../registry"),h=b("../../components/fx/helpers").appendArrayPointValue,a=b("../../components/fx"),d=b("../../lib"),e=b("../../lib/events"),l=b("./helpers"),k=b("../pie/helpers").formatPieValue;y.exports=function(c,f,g,q,t){var u=q[0],w=u.trace,x=u.hierarchy,E="sunburst"===w.type,F="treemap"===w.type;
"_hasHoverLabel"in w||(w._hasHoverLabel=!1);"_hasHoverEvent"in w||(w._hasHoverEvent=!1);c.on("mouseover",function(z){var B=g._fullLayout;if(!g._dragging&&!1!==B.hovermode){var C=g._fullData[w.index],v=z.data.data,G=v.i,I=l.isHierarchyRoot(z),J=l.getParent(x,z),K=l.getValue(z),N=function(ia){return d.castOption(C,G,ia)},H=N("hovertemplate"),L=a.castHoverinfo(C,B,G),P=B.separators;if(H||L&&"none"!==L&&"skip"!==L){if(E){var Q=u.cx+z.pxmid[0]*(1-z.rInscribed);var S=u.cy+z.pxmid[1]*(1-z.rInscribed)}F&&
(Q=z._hoverX,S=z._hoverY);var O={},U=[],X=[],da=function(ia){return-1!==U.indexOf(ia)};L&&(U="all"===L?C._module.attributes.hoverinfo.flags:L.split("+"));O.label=v.label;da("label")&&O.label&&X.push(O.label);v.hasOwnProperty("v")&&(O.value=v.v,O.valueLabel=k(O.value,P),da("value")&&X.push(O.valueLabel));O.currentPath=z.currentPath=l.getPath(z.data);da("current path")&&!I&&X.push(O.currentPath);var ea=[];L=function(){-1===ea.indexOf(ca)&&(X.push(ca),ea.push(ca))};O.percentParent=z.percentParent=K/
l.getValue(J);O.parent=z.parentString=l.getPtLabel(J);if(da("percent parent")){var ca=l.formatPercent(O.percentParent,P)+" of "+O.parent;L()}O.percentEntry=z.percentEntry=K/l.getValue(f);O.entry=z.entry=l.getPtLabel(f);!da("percent entry")||I||z.onPathbar||(ca=l.formatPercent(O.percentEntry,P)+" of "+O.entry,L());O.percentRoot=z.percentRoot=K/l.getValue(x);O.root=z.root=l.getPtLabel(x);da("percent root")&&!I&&(ca=l.formatPercent(O.percentRoot,P)+" of "+O.root,L());O.text=N("hovertext")||N("text");
da("text")&&(ca=O.text,d.isValidTextValue(ca)&&X.push(ca));v={trace:C,y:S,text:X.join("\x3cbr\x3e"),name:H||da("name")?C.name:void 0,color:N("hoverlabel.bgcolor")||v.color,borderColor:N("hoverlabel.bordercolor"),fontFamily:N("hoverlabel.font.family"),fontSize:N("hoverlabel.font.size"),fontColor:N("hoverlabel.font.color"),nameLength:N("hoverlabel.namelength"),textAlign:N("hoverlabel.align"),hovertemplate:H,hovertemplateLabels:O,eventData:[n(z,C,t.eventDataKeys)]};E&&(v.x0=Q-z.rInscribed*z.rpx1,v.x1=
Q+z.rInscribed*z.rpx1,v.idealAlign=0>z.pxmid[0]?"left":"right");F&&(v.x=Q,v.idealAlign=0>Q?"left":"right");a.loneHover(v,{container:B._hoverlayer.node(),outerContainer:B._paper.node(),gd:g});w._hasHoverLabel=!0}F&&(B=c.select("path.surface"),t.styleOne(B,z,C,{hovered:!0}));w._hasHoverEvent=!0;g.emit("plotly_hover",{points:[n(z,C,t.eventDataKeys)],event:m.event})}});c.on("mouseout",function(z){var B=g._fullLayout,C=g._fullData[w.index],v=m.select(this).datum();w._hasHoverEvent&&(z.originalEvent=m.event,
g.emit("plotly_unhover",{points:[n(v,C,t.eventDataKeys)],event:m.event}),w._hasHoverEvent=!1);w._hasHoverLabel&&(a.loneUnhover(B._hoverlayer.node()),w._hasHoverLabel=!1);F&&(z=c.select("path.surface"),t.styleOne(z,v,C,{hovered:!1}))});c.on("click",function(z){var B=g._fullLayout,C=g._fullData[w.index],v=E&&(l.isHierarchyRoot(z)||l.isLeaf(z)),G=l.getPtId(z);G=l.isEntry(z)?l.findEntryWithChild(x,G):l.findEntryWithLevel(x,G);G=l.getPtId(G);var I={points:[n(z,C,t.eventDataKeys)],event:m.event};v||(I.nextLevel=
G);I=e.triggerHandler(g,"plotly_"+w.type+"click",I);!1!==I&&B.hovermode&&(g._hoverdata=[n(z,C,t.eventDataKeys)],a.click(g,m.event));v||!1===I||g._dragging||g._transitioning||(p.call("_storeDirectGUIEdit",C,B._tracePreGUI[C.uid],{level:C.level}),z={data:[{level:G}],traces:[w.index]},C={frame:{redraw:!1,duration:t.transitionTime},transition:{duration:t.transitionTime,easing:t.transitionEasing},mode:"immediate",fromcurrent:!0},a.loneUnhover(B._hoverlayer.node()),p.call("animate",g,z,C))})}},{"../../components/fx":655,
"../../components/fx/helpers":651,"../../lib":749,"../../lib/events":738,"../../registry":880,"../pie/helpers":1134,"./helpers":1272,d3:169}],1272:[function(b,y,D){var n=b("../../lib"),m=b("../../components/color"),p=b("../../lib/setcursor"),h=b("../pie/helpers");D.findEntryWithLevel=function(a,d){var e;d&&a.eachAfter(function(l){if(D.getPtId(l)===d)return e=l.copy()});return e||a};D.findEntryWithChild=function(a,d){var e;a.eachAfter(function(l){for(var k=l.children||[],c=0;c<k.length;c++)if(D.getPtId(k[c])===
d)return e=l.copy()});return e||a};D.isEntry=function(a){return!a.parent};D.isLeaf=function(a){return!a.children};D.getPtId=function(a){return a.data.data.id};D.getPtLabel=function(a){return a.data.data.label};D.getValue=function(a){return a.value};D.isHierarchyRoot=function(a){return""===a.data.data.pid};D.setSliceCursor=function(a,d,e){d=e.isTransitioning;d||(d=a.datum(),d=e.hideOnRoot&&D.isHierarchyRoot(d)||e.hideOnLeaves&&D.isLeaf(d));p(a,d?null:"pointer")};D.getInsideTextFontKey=function(a,d,
e,l,k){e=e.data.data.i;return n.castOption(d,e,((k||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+a)||n.castOption(d,e,"textfont."+a)||l.size};D.getOutsideTextFontKey=function(a,d,e,l){e=e.data.data.i;return n.castOption(d,e,"outsidetextfont."+a)||n.castOption(d,e,"textfont."+a)||l.size};D.isOutsideText=function(a,d){return!a._hasColorscale&&D.isHierarchyRoot(d)};D.determineTextFont=function(a,d,e,l){if(D.isOutsideText(a,d))a={color:D.getOutsideTextFontKey("color",a,d,e),family:D.getOutsideTextFontKey("family",
a,d,e),size:D.getOutsideTextFontKey("size",a,d,e)};else{var k=d.data.data,c=k.i,f=n.castOption(a,c,((l||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");!f&&a._input.textfont&&(f=n.castOption(a._input,c,"textfont.color"));a={color:f||m.contrast(k.color),family:D.getInsideTextFontKey("family",a,d,e,l),size:D.getInsideTextFontKey("size",a,d,e,l)}}return a};D.hasTransition=function(a){return!!(a&&0<a.duration)};D.getMaxDepth=function(a){return 0<=a.maxdepth?a.maxdepth:Infinity};D.isHeader=
function(a,d){return!(D.isLeaf(a)||a.depth===d._maxDepth-1)};D.getParent=function(a,d){return D.findEntryWithLevel(a,d.data.data.pid)};D.listPath=function(a,d){a=a.parent;if(!a)return[];var e=d?[a.data[d]]:[a];return D.listPath(a,d).concat(e)};D.getPath=function(a){return D.listPath(a,"label").join("/")+"/"};D.formatValue=h.formatPieValue;D.formatPercent=function(a,d){var e=n.formatPercent(a,0);"0%"===e&&(e=h.formatPiePercent(a,d));return e}},{"../../components/color":615,"../../lib":749,"../../lib/setcursor":769,
"../pie/helpers":1134}],1273:[function(b,y,D){y.exports={moduleType:"trace",name:"sunburst",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1173,"./attributes":1266,
"./base_plot":1267,"./calc":1268,"./defaults":1270,"./layout_attributes":1274,"./layout_defaults":1275,"./plot":1276,"./style":1277}],1274:[function(b,y,D){y.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1275:[function(b,y,D){var n=b("../../lib"),m=b("./layout_attributes");y.exports=function(p,h){n.coerce(p,h,m,"sunburstcolorway",h.colorway);n.coerce(p,h,m,"extendsunburstcolors",void 0)}},{"../../lib":749,"./layout_attributes":1274}],
1276:[function(b,y,D){function n(F,z,B,C){function v(ma){var pa=E.getPtId(ma),za=ca[pa],qa=ca[E.getPtId(Q)];if(qa){var Ca=ma.x1>qa.x1?2*Math.PI:0;ma=ma.rpx1<qa.rpx1?{rpx0:0,rpx1:0}:{x0:Ca,x1:Ca}}else{var Ka,Oa=E.getPtId(ma.parent);H.each(function(mb){if(E.getPtId(mb)===Oa)return Ka=mb});ma=Ka.children;var kb;ma.forEach(function(mb,tb){if(E.getPtId(mb)===pa)return kb=tb});ma=ma.length;qa=a.interpolate(Ka.x0,Ka.x1);ma={rpx0:U,rpx1:U,x0:qa(kb/ma),x1:qa((kb+1)/ma)}}return a.interpolate(za,ma)}function G(ma){var pa=
ca[E.getPtId(ma)],za={x0:ma.x0,x1:ma.x1,rpx0:ma.rpx0,rpx1:ma.rpx1};pa||(ea?ma.parent?oa?(ma=ma.x1>oa?2*Math.PI:0,pa={x0:ma,x1:ma}):(pa={rpx0:U,rpx1:U},l.extendFlat(pa,J(ma))):pa={rpx0:0,rpx1:0}:pa={x0:0,x1:0});return a.interpolate(pa,za)}function I(ma){var pa=ca[E.getPtId(ma)],za=ma.transform;pa||(pa={rpx1:ma.rpx1,transform:{textPosAngle:za.textPosAngle,scale:0,rotate:za.rotate,rCenter:za.rCenter,x:za.x,y:za.y}},ea?ma.parent?oa?pa.x0=pa.x1=ma.x1>oa?2*Math.PI:0:l.extendFlat(pa,J(ma)):pa.x0=pa.x1=0:
pa.x0=pa.x1=0);var qa=a.interpolate(pa.transform.textPosAngle,ma.transform.textPosAngle),Ca=a.interpolate(pa.rpx1,ma.rpx1),Ka=a.interpolate(pa.x0,ma.x0),Oa=a.interpolate(pa.x1,ma.x1),kb=a.interpolate(pa.transform.scale,za.scale),mb=a.interpolate(pa.transform.rotate,za.rotate),tb=0===za.rCenter?3:0===pa.transform.rCenter?1/3:1,nb=a.interpolate(pa.transform.rCenter,za.rCenter);return function(Ta){var fb=Ca(Ta),ab=Ka(Ta),ra=Oa(Ta),Ea=nb(Math.pow(Ta,tb));ab=na(fb,(ab+ra)/2);ra=qa(Ta);fb={pxmid:ab,rpx1:fb,
transform:{textPosAngle:ra,rCenter:Ea,x:za.x,y:za.y}};c(P.type,za,K);return{transform:{targetX:ua(fb),targetY:ta(fb),scale:kb(Ta),rotate:mb(Ta),rCenter:Ea}}}}function J(ma){var pa=ma.parent,za=ca[E.getPtId(pa)],qa={};za?(pa=pa.children,ma=pa.indexOf(ma),pa=pa.length,za=a.interpolate(za.x0,za.x1),qa.x0=za(ma/pa),qa.x1=za(ma/pa)):qa.x0=qa.x1=0;return qa}var K=F._fullLayout,N=!K.uniformtext.mode&&E.hasTransition(C),H=a.select(B).selectAll("g.slice"),L=z[0],P=L.trace,Q=E.findEntryWithLevel(L.hierarchy,
P.level);B=E.getMaxDepth(P);C=K._size;var S=P.domain,O=C.h*(S.y[1]-S.y[0]),U=.5*Math.min(C.w*(S.x[1]-S.x[0]),O),X=L.cx=C.l+C.w*(S.x[1]+S.x[0])/2,da=L.cy=C.t+C.h*(1-S.y[0])-O/2;if(!Q)return H.remove();var ea=null,ca={};N&&H.each(function(ma){ca[E.getPtId(ma)]={rpx0:ma.rpx0,rpx1:ma.rpx1,x0:ma.x0,x1:ma.x1,transform:ma.transform};!ea&&E.isEntry(ma)&&(ea=ma)});C=m(Q).descendants();S=Q.height+1;var ia=0,ha=B;L.hasMultipleRoots&&E.isHierarchyRoot(Q)&&(C=C.slice(1),--S,ia=1,ha+=1);C=C.filter(function(ma){return ma.y1<=
ha});var fa=Math.min(S,B),na=function(ma,pa){return[ma*Math.cos(pa),-ma*Math.sin(pa)]},sa=function(ma){return l.pathAnnulus(ma.rpx0,ma.rpx1,ma.x0,ma.x1,X,da)},ua=function(ma){return X+h(ma.rpx1,ma.transform.textPosAngle)[0]*(ma.transform.rCenter||0)+(ma.transform.x||0)},ta=function(ma){return da+h(ma.rpx1,ma.transform.textPosAngle)[1]*(ma.transform.rCenter||0)+(ma.transform.y||0)};H=H.data(C,E.getPtId);H.enter().append("g").classed("slice",!0);N?H.exit().transition().each(function(){var ma=a.select(this);
ma.select("path.surface").transition().attrTween("d",function(pa){var za=v(pa);return function(qa){return sa(za(qa))}});ma.select("g.slicetext").attr("opacity",0)}).remove():H.exit().remove();H.order();var oa=null;if(N&&ea){var va=E.getPtId(ea);H.each(function(ma){null===oa&&E.getPtId(ma)===va&&(oa=ma.x1)})}B=H;N&&(B=B.transition().each("end",function(){var ma=a.select(this);E.setSliceCursor(ma,F,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})}));B.each(function(ma){var pa=a.select(this),za=l.ensureSingle(pa,
"path","surface",function(Oa){Oa.style("pointer-events","all")});ma.rpx0=(ma.y0-ia)/fa*U;ma.rpx1=(ma.y1-ia)/fa*U;ma.xmid=(ma.x0+ma.x1)/2;ma.pxmid=na(ma.rpx1,ma.xmid);ma.midangle=-(ma.xmid-Math.PI/2);ma.startangle=-(ma.x0-Math.PI/2);ma.stopangle=-(ma.x1-Math.PI/2);ma.halfangle=.5*Math.min(l.angleDelta(ma.x0,ma.x1)||Math.PI,Math.PI);ma.ring=1-ma.rpx0/ma.rpx1;ma.rInscribed=p(ma,P);N?za.transition().attrTween("d",function(Oa){var kb=G(Oa);return function(mb){return sa(kb(mb))}}):za.attr("d",sa);pa.call(w,
Q,F,z,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(E.setSliceCursor,F,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:F._transitioning});za.call(t,ma,P);pa=l.ensureSingle(pa,"g","slicetext");pa=l.ensureSingle(pa,"text","",function(Oa){Oa.attr("data-notex",1)});var qa=l.ensureUniformFontSize(F,E.determineTextFont(P,ma,K.font));pa.text(D.formatSliceLabel(ma,Q,P,z,K)).classed("slicetext",!0).attr("text-anchor","middle").call(e.font,
qa).call(k.convertToTspans,F);var Ca=e.bBox(pa.node());ma.transform=q(Ca,ma,L);ma.transform.targetX=ua(ma);ma.transform.targetY=ta(ma);var Ka=function(Oa,kb){Oa=Oa.transform;g(Oa,kb);Oa.fontSize=qa.size;c(P.type,Oa,K);return l.getTextTransform(Oa)};N?pa.transition().attrTween("transform",function(Oa){var kb=I(Oa);return function(mb){return Ka(kb(mb),Ca)}}):pa.attr("transform",Ka(ma,Ca))})}function m(F){return d.partition().size([2*Math.PI,F.height+1])(F)}function p(F){return 0===F.rpx0&&l.isFullCircle([F.x0,
F.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(F.halfangle)),F.ring/2))}function h(F,z){return[F*Math.sin(z),-F*Math.cos(z)]}var a=b("d3"),d=b("d3-hierarchy"),e=b("../../components/drawing"),l=b("../../lib"),k=b("../../lib/svg_text_utils");y=b("../bar/uniform_text");var c=y.recordMinTextSize,f=y.clearMinTextSize;y=b("../pie/plot");var g=y.computeTransform,q=y.transformInsideText,t=b("./style").styleOne,u=b("../bar/style").resizeText,w=b("./fx"),x=b("./constants"),E=b("./helpers");D.plot=function(F,
z,B,C){var v=F._fullLayout,G=v._sunburstlayer,I,J=!B,K=!v.uniformtext.mode&&E.hasTransition(B);f("sunburst",v);z=G.selectAll("g.trace.sunburst").data(z,function(N){return N[0].trace.uid});z.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round");z.order();K?(C&&(I=C()),a.transition().duration(B.duration).ease(B.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()}).each(function(){G.selectAll("g.trace").each(function(N){n(F,N,this,B)})})):
(z.each(function(N){n(F,N,this,B)}),v.uniformtext.mode&&u(F,v._sunburstlayer.selectAll(".trace"),"sunburst"));J&&z.exit().remove()};D.formatSliceLabel=function(F,z,B,C,v){var G=B.texttemplate,I=B.textinfo;if(!(G||I&&"none"!==I))return"";var J=v.separators,K=F.data.data;C=C[0].hierarchy;var N=E.isHierarchyRoot(F),H=E.getParent(C,F),L=E.getValue(F);if(!G){var P=I.split("+");v=function(X){return-1!==P.indexOf(X)};var Q=[];v("label")&&K.label&&Q.push(K.label);K.hasOwnProperty("v")&&v("value")&&Q.push(E.formatValue(K.v,
J));if(!N){v("current path")&&Q.push(E.getPath(F.data));F=0;v("percent parent")&&F++;v("percent entry")&&F++;v("percent root")&&F++;var S=1<F;if(F){F=function(X){U=E.formatPercent(O,J);S&&(U+=" of "+X);Q.push(U)};if(v("percent parent")&&!N){var O=L/E.getValue(H);F("parent")}v("percent entry")&&(O=L/E.getValue(z),F("entry"));v("percent root")&&(O=L/E.getValue(C),F("root"))}}if(v("text")){var U=l.castOption(B,K.i,"text");l.isValidTextValue(U)&&Q.push(U)}return Q.join("\x3cbr\x3e")}G=l.castOption(B,
K.i,"texttemplate");if(!G)return"";I={};K.label&&(I.label=K.label);K.hasOwnProperty("v")&&(I.value=K.v,I.valueLabel=E.formatValue(K.v,J));I.currentPath=E.getPath(F.data);N||(I.percentParent=L/E.getValue(H),I.percentParentLabel=E.formatPercent(I.percentParent,J),I.parent=E.getPtLabel(H));I.percentEntry=L/E.getValue(z);I.percentEntryLabel=E.formatPercent(I.percentEntry,J);I.entry=E.getPtLabel(z);I.percentRoot=L/E.getValue(C);I.percentRootLabel=E.formatPercent(I.percentRoot,J);I.root=E.getPtLabel(C);
K.hasOwnProperty("color")&&(I.color=K.color);z=l.castOption(B,K.i,"text");if(l.isValidTextValue(z)||""===z)I.text=z;I.customdata=l.castOption(B,K.i,"customdata");return l.texttemplateString(G,I,v._d3locale,I,B._meta||{})}},{"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../bar/style":904,"../bar/uniform_text":906,"../pie/plot":1138,"./constants":1269,"./fx":1271,"./helpers":1272,"./style":1277,d3:169,"d3-hierarchy":161}],1277:[function(b,y,D){function n(d,e,l){var k=
e.data.data;e=!e.children;var c=k.i,f=h.castOption(l,c,"marker.line.color")||p.defaultLine;c=h.castOption(l,c,"marker.line.width")||0;d.style("stroke-width",c).call(p.fill,k.color).call(p.stroke,f).style("opacity",e?l.leaf.opacity:null)}var m=b("d3"),p=b("../../components/color"),h=b("../../lib"),a=b("../bar/uniform_text").resizeText;y.exports={style:function(d){var e=d._fullLayout._sunburstlayer.selectAll(".trace");a(d,e,"sunburst");e.each(function(l){var k=m.select(this),c=l[0].trace;k.style("opacity",
c.opacity);k.selectAll("path.surface").each(function(f){m.select(this).call(n,f,c)})})},styleOne:n}},{"../../components/color":615,"../../lib":749,"../bar/uniform_text":906,d3:169}],1278:[function(b,y,D){function n(e){return{valType:"boolean",dflt:!1}}function m(e){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:n("x"),y:n("y"),z:n("z")},color:{valType:"color",
dflt:p.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:p.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var p=b("../../components/color");D=b("../../components/colorscale/attributes");var h=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/attributes"),d=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;
y=y.exports=b(d({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:h(),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},D("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:m("x"),y:m("y"),z:m("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",
min:-1E5,max:1E5,dflt:10},y:{valType:"number",min:-1E5,max:1E5,dflt:1E4},z:{valType:"number",min:-1E5,max:1E5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:d({},D.zauto,{}),zmin:d({},
D.zmin,{}),zmax:d({},D.zmax,{})},hoverinfo:d({},a.hoverinfo),showlegend:d({},a.showlegend,{dflt:!1})}),"calc","nested");y.x.editType=y.y.editType=y.z.editType="calc+clearAxisTypes";y.transforms=void 0},{"../../components/color":615,"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875}],1279:[function(b,y,D){var n=b("../../components/colorscale/calc");y.exports=function(m,p){p.surfacecolor?
n(m,p,{vals:p.surfacecolor,containerStr:"",cLetter:"c"}):n(m,p,{vals:p.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623}],1280:[function(b,y,D){function n(w,x,E){this.scene=w;this.uid=E;this.surface=x;this.data=null;this.showContour=[!1,!1,!1];this.contourStart=[null,null,null];this.contourEnd=[null,null,null];this.contourSize=[0,0,0];this.minValues=[Infinity,Infinity,Infinity];this.maxValues=[-Infinity,-Infinity,-Infinity];this.dataScaleY=this.dataScaleX=1;this.refineData=
!0;this.objectOffset=[0,0,0]}function m(w){for(var x=[],E=0;E<q.length;E++){var F=q[E],z=x,B=z.push;var C=w;if(C<F)F=0;else{for(var v=0;0===Math.floor(C%F);)C/=F,v++;F=v}B.call(z,F)}return x}function p(w,x,E){var F=E[8]+E[2]*x[0]+E[5]*x[1];w[0]=(E[6]+E[0]*x[0]+E[3]*x[1])/F;w[1]=(E[7]+E[1]*x[0]+E[4]*x[1])/F;return w}var h=b("gl-surface3d"),a=b("ndarray"),d=b("ndarray-linear-interpolate").d2,e=b("../heatmap/interp2d"),l=b("../heatmap/find_empties"),k=b("../../lib").isArrayOrTypedArray,c=b("../../lib/gl_format_color").parseColorScale,
f=b("../../lib/str2rgbarray"),g=b("../../components/colorscale").extractOpts;b=n.prototype;b.getXat=function(w,x,E,F){w=k(this.data.x)?k(this.data.x[0])?this.data.x[x][w]:this.data.x[w]:w;return void 0===E?w:F.d2l(w,0,E)};b.getYat=function(w,x,E,F){w=k(this.data.y)?k(this.data.y[0])?this.data.y[x][w]:this.data.y[x]:x;return void 0===E?w:F.d2l(w,0,E)};b.getZat=function(w,x,E,F){var z=this.data.z[x][w];null===z&&this.data.connectgaps&&this.data._interpolatedZ&&(z=this.data._interpolatedZ[x][w]);return void 0===
E?z:F.d2l(z,0,E)};b.handlePick=function(w){if(w.object===this.surface){var x=Math.max(Math.min(Math.round((w.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round((w.data.index[1]-1)/this.dataScaleY-1),this.data._ylength-1),0);w.index=[x,E];w.traceCoordinate=[this.getXat(x,E),this.getYat(x,E),this.getZat(x,E)];w.dataCoordinate=[this.getXat(x,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(x,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),
this.getZat(x,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var F=0;3>F;F++){var z=w.dataCoordinate[F];null!==z&&void 0!==z&&(w.dataCoordinate[F]*=this.scene.dataScale[F])}F=this.data.hovertext||this.data.text;Array.isArray(F)&&F[E]&&void 0!==F[E][x]?w.textLabel=F[E][x]:w.textLabel=F?F:"";w.data.dataCoordinate=w.dataCoordinate.slice();this.surface.highlight(w.data);this.scene.glplot.spikes.position=w.dataCoordinate;return!0}};var q=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,
67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,
839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,
1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,
2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];b.calcXnums=function(w){var x,E=[];for(x=1;x<w;x++){var F=this.getXat(x-1,0),z=this.getXat(x,0);E[x-1]=z!==
F&&void 0!==F&&null!==F&&void 0!==z&&null!==z?Math.abs(z-F):0}F=0;for(x=1;x<w;x++)F+=E[x-1];for(x=1;x<w;x++)E[x-1]=0===E[x-1]?1:Math.round(F/E[x-1]);return E};b.calcYnums=function(w){var x,E=[];for(x=1;x<w;x++){var F=this.getYat(0,x-1),z=this.getYat(0,x);E[x-1]=z!==F&&void 0!==F&&null!==F&&void 0!==z&&null!==z?Math.abs(z-F):0}F=0;for(x=1;x<w;x++)F+=E[x-1];for(x=1;x<w;x++)E[x-1]=0===E[x-1]?1:Math.round(F/E[x-1]);return E};D=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260];var t=D[9],u=D[13];b.estimateScale=
function(w,x){x=0===x?this.calcXnums(w):this.calcYnums(w);if(0===x.length)x=void 0;else{for(var E=1,F=0;F<x.length;F++){var z=x[F];if(1>E||1>z)E=void 0;else{E=m(E);z=m(z);for(var B=1,C=0;C<q.length;C++)B*=Math.pow(q[C],Math.max(E[C],z[C]));E=B}}x=E}for(F=1+x;F<t;)F*=2;for(;F>u;){F--;E=x=F;F=m(E);for(z=0;z<q.length;z++)if(0<F[z]){E=q[z];break}F=x/E;F++;F<t&&(F=u)}w=Math.round(F/w);return 1<w?w:1};b.refineCoords=function(w){var x=this.dataScaleX,E=this.dataScaleY,F=Math.floor(w[0].shape[0]*x+1)|0,z=
Math.floor(w[0].shape[1]*E+1)|0,B=1+w[0].shape[0]+1,C=1+w[0].shape[1]+1;B=a(new Float32Array(B*C),[B,C]);x=[1/x,0,0,0,1/E,0,0,0,1];for(E=0;E<w.length;++E){this.surface.padField(B,w[E]);for(var v=C=a(new Float32Array(F*z),[F,z]),G=B,I=p,J=x,K=[0,0],N=v.shape[0],H=v.shape[1],L=0;L<N;L++)for(var P=0;P<H;P++)I(K,[L,P],J),v.set(L,P,d(G,K[0],K[1]));w[E]=C}};b.setContourLevels=function(){var w=[[],[],[]],x=[!1,!1,!1],E=!1,F,z;for(F=0;3>F;++F)if(this.showContour[F]&&(E=!0,0<this.contourSize[F]&&null!==this.contourStart[F]&&
null!==this.contourEnd[F]&&this.contourEnd[F]>this.contourStart[F]))for(x[F]=!0,z=this.contourStart[F];z<this.contourEnd[F];z+=this.contourSize[F]){var B=z*this.scene.dataScale[F];for(var C=w[F],v=!1,G=0;G<C.length;G++)if(B===C[G]){v=!0;break}!1===v&&C.push(B)}if(E){E=[[],[],[]];for(F=0;3>F;++F)this.showContour[F]&&(E[F]=x[F]?w[F]:this.scene.contourLevels[F]);this.surface.update({levels:E})}};b.update=function(w){var x=this.scene,E=x.fullSceneLayout,F=this.surface,z=w.opacity,B=c(w,z),C=x.dataScale,
v=w.z[0].length,G=w._ylength;x=x.contourLevels;this.data=w;var I,J,K,N=[];for(I=0;3>I;I++)for(N[I]=[],J=0;J<v;J++)N[I][J]=[];for(J=0;J<v;J++)for(K=0;K<G;K++)N[0][J][K]=this.getXat(J,K,w.xcalendar,E.xaxis),N[1][J][K]=this.getYat(J,K,w.ycalendar,E.yaxis),N[2][J][K]=this.getZat(J,K,w.zcalendar,E.zaxis);if(w.connectgaps)for(w._emptypoints=l(N[2]),e(N[2],w._emptypoints),w._interpolatedZ=[],J=0;J<v;J++)for(w._interpolatedZ[J]=[],K=0;K<G;K++)w._interpolatedZ[J][K]=N[2][J][K];for(I=0;3>I;I++)for(J=0;J<v;J++)for(K=
0;K<G;K++)E=N[I][J][K],N[I][J][K]=null===E||void 0===E?NaN:N[I][J][K]*C[I];for(I=0;3>I;I++)for(J=0;J<v;J++)for(K=0;K<G;K++)E=N[I][J][K],null!==E&&void 0!==E&&(this.minValues[I]>E&&(this.minValues[I]=E),this.maxValues[I]<E&&(this.maxValues[I]=E));for(I=0;3>I;I++)this.objectOffset[I]=.5*(this.minValues[I]+this.maxValues[I]);for(I=0;3>I;I++)for(J=0;J<v;J++)for(K=0;K<G;K++)E=N[I][J][K],null!==E&&void 0!==E&&(N[I][J][K]-=this.objectOffset[I]);E=[a(new Float32Array(v*G),[v,G]),a(new Float32Array(v*G),[v,
G]),a(new Float32Array(v*G),[v,G])];for(I=0;3>I;I++)for(J=0;J<v;J++)for(K=0;K<G;K++)E[I].set(J,K,N[I][J][K]);N={colormap:B,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!w.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:w.opacityscale,opacity:w.opacity};I=g(w);N.intensityBounds=[I.min,I.max];if(w.surfacecolor){I=
a(new Float32Array(v*G),[v,G]);for(J=0;J<v;J++)for(K=0;K<G;K++)I.set(J,K,w.surfacecolor[K][J]);E.push(I)}else N.intensityBounds[0]*=C[2],N.intensityBounds[1]*=C[2];if(u<E[0].shape[0]||u<E[0].shape[1])this.refineData=!1;!0===this.refineData&&(this.dataScaleX=this.estimateScale(E[0].shape[0],0),this.dataScaleY=this.estimateScale(E[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(E));w.surfacecolor&&(N.intensity=E.pop());v=[!0,!0,!0];G=["x","y","z"];for(I=0;3>I;++I)C=w.contours[G[I]],
v[I]=C.highlight,N.showContour[I]=C.show||C.highlight,N.showContour[I]&&(N.contourProject[I]=[C.project.x,C.project.y,C.project.z],C.show?(this.showContour[I]=!0,N.levels[I]=x[I],F.highlightColor[I]=N.contourColor[I]=f(C.color),F.highlightTint[I]=C.usecolormap?N.contourTint[I]=0:N.contourTint[I]=1,N.contourWidth[I]=C.width,this.contourStart[I]=C.start,this.contourEnd[I]=C.end,this.contourSize[I]=C.size):(this.showContour[I]=!1,this.contourStart[I]=null,this.contourEnd[I]=null,this.contourSize[I]=
0),C.highlight&&(N.dynamicColor[I]=f(C.highlightcolor),N.dynamicWidth[I]=C.highlightwidth));x=B[0].rgb;B=B[B.length-1].rgb;x[0]===B[0]&&x[1]===B[1]&&x[2]===B[2]&&x[3]===B[3]&&(N.vertexColor=!0);N.objectOffset=this.objectOffset;N.coords=E;F.update(N);F.visible=w.visible;F.enableDynamic=v;F.enableHighlight=v;F.snapToData=!0;"lighting"in w&&(F.ambientLight=w.lighting.ambient,F.diffuseLight=w.lighting.diffuse,F.specularLight=w.lighting.specular,F.roughness=w.lighting.roughness,F.fresnel=w.lighting.fresnel);
"lightposition"in w&&(F.lightPosition=[w.lightposition.x,w.lightposition.y,w.lightposition.z]);z&&1>z&&(F.supportsTransparency=!0)};b.dispose=function(){this.scene.glplot.remove(this.surface);this.surface.dispose()};y.exports=function(w,x){var E=h({gl:w.glplot.gl}),F=new n(w,E,x.uid);E._trace=F;F.update(x);w.glplot.add(E);return F}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../heatmap/find_empties":1040,"../heatmap/interp2d":1043,
"gl-surface3d":325,ndarray:469,"ndarray-linear-interpolate":463}],1281:[function(b,y,D){function n(e,l,k,c){e=c("opacityscale");if("max"===e)l.opacityscale=[[0,.1],[1,1]];else if("min"===e)l.opacityscale=[[0,1],[1,.1]];else if("extremes"===e){e=[];for(k=0;32>k;k++)c=k/31,e.push([c,Math.max(0,Math.min(1,.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2))))]);l.opacityscale=e}else{a:if(k=0,!Array.isArray(e)||2>e.length||!e[0]||!e[e.length-1]||0!==+e[0][0]||1!==+e[e.length-1][0])e=!1;else{for(c=0;c<e.length;c++){var f=
e[c];if(2!==f.length||+f[0]<k){e=!1;break a}k=+f[0]}e=!0}e||(l.opacityscale=void 0)}}function m(e,l,k){l in e&&!(k in e)&&(e[k]=e[l])}var p=b("../../registry"),h=b("../../lib"),a=b("../../components/colorscale/defaults"),d=b("./attributes");y.exports={supplyDefaults:function(e,l,k,c){function f(E,F){return h.coerce(e,l,d,E,F)}k=f("x");var g=f("y");var q=f("z");if(!q||!q.length||k&&1>k.length||g&&1>g.length)l.visible=!1;else{l._xlength=Array.isArray(k)&&h.isArrayOrTypedArray(k[0])?q.length:q[0].length;
l._ylength=q.length;p.getComponentMethod("calendars","handleTraceDefaults")(e,l,["x","y","z"],c);f("text");f("hovertext");f("hovertemplate");"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lightposition.x lightposition.y lightposition.z hidesurface connectgaps opacity".split(" ").forEach(function(E){f(E)});q=f("surfacecolor");var t=["x","y","z"];for(k=0;3>k;++k){var u="contours."+t[k],w=f(u+".show"),x=f(u+".highlight");if(w||x)for(g=0;3>g;++g)f(u+".project."+
t[g]);w&&(f(u+".color"),f(u+".width"),f(u+".usecolormap"));x&&(f(u+".highlightcolor"),f(u+".highlightwidth"));f(u+".start");f(u+".end");f(u+".size")}q||(m(e,"zmin","cmin"),m(e,"zmax","cmax"),m(e,"zauto","cauto"));a(e,l,c,f,{prefix:"",cLetter:"c"});n(e,l,c,f);l._length=null}},opacityscaleDefaults:n}},{"../../components/colorscale/defaults":625,"../../lib":749,"../../registry":880,"./attributes":1278}],1282:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,
colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),moduleType:"trace",name:"surface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":839,"./attributes":1278,"./calc":1279,"./convert":1280,"./defaults":1281}],1283:[function(b,y,D){D=b("../../components/annotations/attributes");var n=b("../../lib/extend").extendFlat,m=b("../../plot_api/edit_types").overrideAll,p=b("../../plots/font_attributes"),h=b("../../plots/domain").attributes;
b("../../constants/docs");(y.exports=m({domain:h({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:n({},D.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},
fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:n({},p({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:n({},D.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:n({},p({arrayOk:!0}))}},
"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":598,"../../constants/docs":719,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/domain":824,"../../plots/font_attributes":825}],1284:[function(b,y,D){var n=b("../../plots/get_data").getModuleCalcData,m=b("./plot");D.name="table";D.plot=function(p){var h=n(p.calcdata,"table")[0];h.length&&m(p,h)};D.clean=function(p,h,a,d){p=d._has&&d._has("table");h=h._has&&h._has("table");p&&!h&&d._paperdiv.selectAll(".table").remove()}},
{"../../plots/get_data":834,"./plot":1291}],1285:[function(b,y,D){var n=b("../../lib/gup").wrap;y.exports=function(){return n({})}},{"../../lib/gup":746}],1286:[function(b,y,D){y.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"\x3cbr\x3e",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1E3,scrollbarHideDuration:1E3,scrollbarOffset:5,
scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",
cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1287:[function(b,y,D){function n(g){if(Array.isArray(g)){for(var q=0,t=0;t<g.length;t++)q=Math.max(q,n(g[t]));return q}return g}function m(g,q){return g+q}function p(g){g=g.slice();var q=Infinity,t=0,u;for(u=0;u<g.length;u++)Array.isArray(g[u])||(g[u]=[g[u]]),
q=Math.min(q,g[u].length),t=Math.max(t,g[u].length);if(q!==t)for(u=0;u<g.length;u++)(q=t-g[u].length)&&(g[u]=g[u].concat(h(q)));return g}function h(g){for(var q=Array(g),t=0;t<g;t++)q[t]="";return q}function a(g){return g.calcdata.columns.reduce(function(q,t){return t.xIndex<g.xIndex?q+t.columnWidth:q},0)}function d(g,q){return Object.keys(g).map(function(t){return c({},g[t],{auxiliaryBlocks:q})})}function e(g,q){for(var t={},u,w=0,x=0,E=l(),F=0,z=0,B=0;B<g.length;B++)if(u=g[B],E.rows.push({rowIndex:B,
rowHeight:u}),x+=u,x>=q||B===g.length-1)t[w]=E,E.key=z++,E.firstRowIndex=F,E.lastRowIndex=B,E=l(),w+=x,F=B+1,x=0;return t}function l(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}var k=b("./constants"),c=b("../../lib/extend").extendFlat,f=b("fast-isnumeric");y.exports=function(g,q){var t=p(q.cells.values),u=function(H){return H.slice(q.header.values.length,H.length)},w=p(q.header.values);w.length&&!w[0].length&&(w[0]=[""],w=p(w));var x=w.concat(u(t).map(function(){return h((w[0]||[""]).length)})),
E=q.domain,F=Math.floor(g._fullLayout._size.w*(E.x[1]-E.x[0])),z=Math.floor(g._fullLayout._size.h*(E.y[1]-E.y[0])),B=q.header.values.length?x[0].map(function(){return q.header.height}):[k.emptyHeaderHeight],C=t.length?t[0].map(function(){return q.cells.height}):[],v=B.reduce(m,0);C=e(C,z-v+k.uplift);B=e(B,v);B=d(B,[]);C=d(C,B);var G={},I=q._fullInput.columnorder.concat(u(t.map(function(H,L){return L}))),J=x.map(function(H,L){H=Array.isArray(q.columnwidth)?q.columnwidth[Math.min(L,q.columnwidth.length-
1)]:q.columnwidth;return f(H)?Number(H):1}),K=J.reduce(m,0);J=J.map(function(H){return H/K*F});u=Math.max(n(q.header.line.width),n(q.cells.line.width));var N={key:q.uid+g._context.staticPlot,translateX:E.x[0]*g._fullLayout._size.w,translateY:g._fullLayout._size.h*(1-E.y[1]),size:g._fullLayout._size,width:F,maxLineWidth:u,height:z,columnOrder:I,groupHeight:z,rowBlocks:C,headerRowBlocks:B,scrollY:0,cells:c({},q.cells,{values:t}),headerCells:c({},q.header,{values:x}),gdColumns:x.map(function(H){return H[0]}),
gdColumnsOriginalOrder:x.map(function(H){return H[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:x.map(function(H,L){G[H]=(G[H]||0)+1;return{key:H+"__"+G[H],label:H,specIndex:L,xIndex:I[L],xScale:a,x:void 0,calcdata:void 0,columnWidth:J[L]}})};N.columns.forEach(function(H){H.calcdata=N;H.x=a(H)});return N}},{"../../lib/extend":739,"./constants":1286,"fast-isnumeric":241}],1288:[function(b,y,D){function n(p){var h=(p=p.rowBlocks[p.page])?p.rows[0].rowIndex:0;return[h,p?
h+p.rows.length:0]}var m=b("../../lib/extend").extendFlat;D.splitToPanels=function(p){var h=[0,0],a=m({},p,{key:"header",type:"header",page:0,prevPages:h,currentRepaint:[null,null],dragHandle:!0,values:p.calcdata.headerCells.values[p.specIndex],rowBlocks:p.calcdata.headerRowBlocks,calcdata:m({},p.calcdata,{cells:p.calcdata.headerCells})}),d=m({},p,{key:"cells1",type:"cells",page:0,prevPages:h,currentRepaint:[null,null],dragHandle:!1,values:p.calcdata.cells.values[p.specIndex],rowBlocks:p.calcdata.rowBlocks});
p=m({},p,{key:"cells2",type:"cells",page:1,prevPages:h,currentRepaint:[null,null],dragHandle:!1,values:p.calcdata.cells.values[p.specIndex],rowBlocks:p.calcdata.rowBlocks});return[d,p,a]};D.splitToCells=function(p){var h=n(p);return(p.values||[]).slice(h[0],h[1]).map(function(a,d){var e="string"===typeof a&&a.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:d+e,key:h[0]+d,column:p,calcdata:p.calcdata,page:p.page,rowBlocks:p.rowBlocks,value:a}})}},{"../../lib/extend":739}],1289:[function(b,
y,D){function n(a,d){var e=a.header.values.length;a=(a.columnorder||[]).slice(0,e);var l=a.slice().sort(function(c,f){return c-f});a=a.map(function(c){return l.indexOf(c)});for(var k=a.length;k<e;k++)a.push(k);d("columnorder",a)}var m=b("../../lib"),p=b("./attributes"),h=b("../../plots/domain").defaults;y.exports=function(a,d,e,l){function k(c,f){return m.coerce(a,d,p,c,f)}h(d,l,k);k("columnwidth");k("header.values");k("header.format");k("header.align");k("header.prefix");k("header.suffix");k("header.height");
k("header.line.width");k("header.line.color");k("header.fill.color");m.coerceFont(k,"header.font",m.extendFlat({},l.font));n(d,k);k("cells.values");k("cells.format");k("cells.align");k("cells.prefix");k("cells.suffix");k("cells.height");k("cells.line.width");k("cells.line.color");k("cells.fill.color");m.coerceFont(k,"cells.font",m.extendFlat({},l.font));d._length=null}},{"../../lib":749,"../../plots/domain":824,"./attributes":1283}],1290:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),
calc:b("./calc"),plot:b("./plot"),moduleType:"trace",name:"table",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1283,"./base_plot":1284,"./calc":1285,"./defaults":1289,"./plot":1291}],1291:[function(b,y,D){function n(ia){return Math.ceil(ia.calcdata.maxLineWidth/2)}function m(ia,ha){return"clip"+ia._fullLayout._uid+"_columnBoundaryClippath_"+ha.calcdata.key+"_"+ha.specIndex}function p(ia){return[].concat.apply([],ia.map(function(ha){return ha})).map(function(ha){return ha.__data__})}
function h(ia,ha,fa){var na=ia.selectAll("."+L.cn.scrollbarKit).data(Q.repeat,Q.keyFun);na.enter().append("g").classed(L.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision");na.each(function(ua){var ta=ua.scrollbarState;var oa=ua.rowBlocks;oa=N(oa,oa.length-1)+(oa.length?H(oa[oa.length-1],Infinity):1);ta.totalHeight=oa;ta.scrollableAreaHeight=ua.groupHeight-F(ua);ta.currentlyVisibleHeight=Math.min(ta.totalHeight,ta.scrollableAreaHeight);ta.ratio=ta.currentlyVisibleHeight/ta.totalHeight;
ta.barLength=Math.max(ta.ratio*ta.currentlyVisibleHeight,L.goldenRatio*L.scrollbarWidth);ta.barWiggleRoom=ta.currentlyVisibleHeight-ta.barLength;ta.wiggleRoom=Math.max(0,ta.totalHeight-ta.scrollableAreaHeight);ta.topY=0===ta.barWiggleRoom?0:ua.scrollY/ta.wiggleRoom*ta.barWiggleRoom;ta.bottomY=ta.topY+ta.barLength;ta.dragMultiplier=ta.wiggleRoom/ta.barWiggleRoom}).attr("transform",function(ua){return"translate("+(ua.width+L.scrollbarWidth/2+L.scrollbarOffset)+" "+F(ua)+")"});na=na.selectAll("."+L.cn.scrollbar).data(Q.repeat,
Q.keyFun);na.enter().append("g").classed(L.cn.scrollbar,!0);var sa=na.selectAll("."+L.cn.scrollbarSlider).data(Q.repeat,Q.keyFun);sa.enter().append("g").classed(L.cn.scrollbarSlider,!0);sa.attr("transform",function(ua){return"translate(0 "+(ua.scrollbarState.topY||0)+")"});sa=sa.selectAll("."+L.cn.scrollbarGlyph).data(Q.repeat,Q.keyFun);sa.enter().append("line").classed(L.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",L.scrollbarWidth).attr("stroke-linecap","round").attr("y1",L.scrollbarWidth/
2);sa.attr("y2",function(ua){return ua.scrollbarState.barLength-L.scrollbarWidth/2}).attr("stroke-opacity",function(ua){return ua.columnDragInProgress||!ua.scrollbarState.barWiggleRoom||fa?0:.4});sa.transition().delay(0).duration(0);sa.transition().delay(L.scrollbarHideDelay).duration(L.scrollbarHideDuration).attr("stroke-opacity",0);na=na.selectAll("."+L.cn.scrollbarCaptureZone).data(Q.repeat,Q.keyFun);na.enter().append("line").classed(L.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",
.01).attr("stroke-width",L.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ua){var ta=P.event.y,oa=this.getBoundingClientRect(),va=ua.scrollbarState;ta-=oa.top;oa=P.scale.linear().domain([0,va.scrollableAreaHeight]).range([0,va.totalHeight]).clamp(!0);va.topY<=ta&&ta<=va.bottomY||C(ha,ia,null,oa(ta-va.barLength/2))(ua)}).call(P.behavior.drag().origin(function(ua){P.event.stopPropagation();ua.scrollbarState.scrollbarScrollInProgress=!0;return ua}).on("drag",
C(ha,ia)).on("dragend",function(){}));na.attr("y2",function(ua){return ua.scrollbarState.scrollableAreaHeight});ha._context.staticPlot&&(sa.remove(),na.remove())}function a(ia,ha,fa,na){fa=fa.selectAll("."+L.cn.columnCells).data(Q.repeat,Q.keyFun);fa.enter().append("g").classed(L.cn.columnCells,!0);fa.exit().remove();fa=d(fa);c(fa);var sa=e(fa);g(sa);sa=k(fa);sa=l(sa);f(sa);q(sa,ha,na,ia);K(fa)}function d(ia){ia=ia.selectAll("."+L.cn.columnCell).data(ea.splitToCells,function(ha){return ha.keyWithinBlock});
ia.enter().append("g").classed(L.cn.columnCell,!0);ia.exit().remove();return ia}function e(ia){ia=ia.selectAll("."+L.cn.cellRect).data(Q.repeat,function(ha){return ha.keyWithinBlock});ia.enter().append("rect").classed(L.cn.cellRect,!0);return ia}function l(ia){ia=ia.selectAll("."+L.cn.cellText).data(Q.repeat,function(ha){return ha.keyWithinBlock});ia.enter().append("text").classed(L.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){P.event.stopPropagation()});return ia}
function k(ia){ia=ia.selectAll("."+L.cn.cellTextHolder).data(Q.repeat,function(ha){return ha.keyWithinBlock});ia.enter().append("g").classed(L.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision");return ia}function c(ia){ia.each(function(ha,fa){var na=ha.calcdata.cells.font,sa=ha.column.specIndex;na={size:u(na.size,sa,fa),color:u(na.color,sa,fa),family:u(na.family,sa,fa)};ha.rowNumber=ha.key;ha.align=u(ha.calcdata.cells.align,sa,fa);ha.cellBorderWidth=u(ha.calcdata.cells.line.width,
sa,fa);ha.font=na})}function f(ia){ia.each(function(ha){S.font(P.select(this),ha.font)})}function g(ia){ia.attr("width",function(ha){return ha.column.columnWidth}).attr("stroke-width",function(ha){return ha.cellBorderWidth}).each(function(ha){var fa=P.select(this);ca.stroke(fa,u(ha.calcdata.cells.line.color,ha.column.specIndex,ha.rowNumber));ca.fill(fa,u(ha.calcdata.cells.fill.color,ha.column.specIndex,ha.rowNumber))})}function q(ia,ha,fa,na){ia.text(function(sa){var ua=sa.column.specIndex,ta=sa.rowNumber,
oa=sa.value,va="string"===typeof oa,ma=va&&oa.match(/<br>/i),pa=!va||ma;sa.mayHaveMarkup=va&&oa.match(/[<&>]/);oa="string"===typeof oa&&oa.match(L.latexCheck);va=(sa.latex=oa)?"":u(sa.calcdata.cells.prefix,ua,ta)||"";var za=oa?"":u(sa.calcdata.cells.suffix,ua,ta)||"";ua=oa?null:u(sa.calcdata.cells.format,ua,ta)||null;ua=va+(ua?P.format(ua)(sa.value):sa.value)+za;var qa;sa.wrappingNeeded=!sa.wrapped&&!pa&&!oa&&(qa=-1!==ua.indexOf(L.wrapSplitCharacter));sa.cellHeightMayIncrease=ma||oa||sa.mayHaveMarkup||
(void 0===qa?-1!==ua.indexOf(L.wrapSplitCharacter):qa);sa.needsConvertToTspans=sa.mayHaveMarkup||sa.wrappingNeeded||sa.latex;sa.wrappingNeeded?(ma=(" "===L.wrapSplitCharacter?ua.replace(/<a href=/ig,"\x3ca_href\x3d"):ua).split(L.wrapSplitCharacter),ma=" "===L.wrapSplitCharacter?ma.map(function(Ca){return Ca.replace(/<a_href=/ig,"\x3ca href\x3d")}):ma,sa.fragments=ma.map(function(Ca){return{text:Ca,width:null}}),sa.fragments.push({fragment:L.wrapSpacer,width:null}),sa=ma.join(L.lineBreaker)+L.lineBreaker+
L.wrapSpacer):(delete sa.fragments,sa=ua);return sa}).attr("dy",function(sa){return sa.needsConvertToTspans?0:"0.75em"}).each(function(sa){var ua=P.select(this),ta=sa.wrappingNeeded?G:I;sa.needsConvertToTspans?O.convertToTspans(ua,na,ta(fa,this,ha,na,sa)):P.select(this.parentNode).attr("transform",function(oa){return"translate("+J(oa)+" "+L.cellPad+")"}).attr("text-anchor",function(oa){return{left:"start",center:"middle",right:"end"}[oa.align]})})}function t(ia,ha,fa){var na=ha.gdColumnsOriginalOrder;
ha.gdColumns.sort(function(sa,ua){return fa[na.indexOf(sa)]-fa[na.indexOf(ua)]});ha.columnorder=fa;ia.emit("plotly_restyle")}function u(ia,ha,fa){return Array.isArray(ia)?(ia=ia[Math.min(ha,ia.length-1)],Array.isArray(ia)?ia[Math.min(fa,ia.length-1)]:ia):ia}function w(ia,ha,fa){ia.transition().ease(L.releaseTransitionEase).duration(L.releaseTransitionDuration).attr("transform","translate("+ha.x+" "+fa+")")}function x(ia){return"cells"===ia.type}function E(ia){return"header"===ia.type}function F(ia){return(ia.rowBlocks.length?
ia.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(ha,fa){return ha+H(fa,Infinity)},0)}function z(ia,ha,fa){for(var na=[],sa=0,ua=0;ua<ia.length;ua++){for(var ta=ia[ua],oa=ta.rows,va=0,ma=0;ma<oa.length;ma++)va+=oa[ma].rowHeight;ta.allRowsHeight=va;ta=ha;oa=ta+fa;ta<sa+va&&oa>sa&&na.push(ua);sa+=va}return na}function B(ia,ha,fa){var na=p(ha)[0];if(void 0!==na){var sa=na.rowBlocks,ua=na.calcdata,ta=N(sa,sa.length),oa=na.calcdata.groupHeight-F(na),va=ua.scrollY=Math.max(0,Math.min(ta-oa,ua.scrollY)),
ma=z(sa,va,oa);1===ma.length&&(ma[0]===sa.length-1?ma.unshift(ma[0]-1):ma.push(ma[0]+1));ma[0]%2&&ma.reverse();ha.each(function(pa,za){pa.page=ma[za];pa.scrollY=va});ha.attr("transform",function(pa){return"translate(0 "+(N(pa.rowBlocks,pa.page)-pa.scrollY)+")"});ia&&(v(ia,fa,ha,ma,na.prevPages,na,0),v(ia,fa,ha,ma,na.prevPages,na,1),h(fa,ia))}}function C(ia,ha,fa,na){return function(sa){var ua=sa.calcdata?sa.calcdata:sa;sa=ha.filter(function(va){return ua.key===va.key});var ta=fa||ua.scrollbarState.dragMultiplier,
oa=ua.scrollY;ua.scrollY=void 0===na?ua.scrollY+ta*P.event.dy:na;ta=sa.selectAll("."+L.cn.yColumn).selectAll("."+L.cn.columnBlock).filter(x);B(ia,ta,sa);return ua.scrollY===oa}}function v(ia,ha,fa,na,sa,ua,ta){na[ta]!==sa[ta]&&(clearTimeout(ua.currentRepaint[ta]),ua.currentRepaint[ta]=setTimeout(function(){var oa=fa.filter(function(va,ma){return ma===ta&&na[ma]!==sa[ma]});a(ia,ha,oa,fa);sa[ta]=na[ta]}))}function G(ia,ha,fa,na){return function(){var sa=P.select(ha.parentNode);sa.each(function(ua){var ta=
ua.fragments;sa.selectAll("tspan.line").each(function(Ka,Oa){ta[Oa].width=this.getComputedTextLength()});var oa=ta[ta.length-1].width,va=ta.slice(0,-1),ma=[],pa=0,za=ua.column.columnWidth-2*L.cellPad;for(ua.value="";va.length;){var qa=va.shift();var Ca=qa.width+oa;pa+Ca>za&&(ua.value+=ma.join(L.wrapSpacer)+L.lineBreaker,ma=[],pa=0);ma.push(qa.text);pa+=Ca}pa&&(ua.value+=ma.join(L.wrapSpacer));ua.wrapped=!0});sa.selectAll("tspan.line").remove();q(sa.select("."+L.cn.cellText),fa,ia,na);P.select(ha.parentNode.parentNode).call(K)}}
function I(ia,ha,fa,na,sa){return function(){if(!sa.settledY){var ua=P.select(ha.parentNode),ta=sa.rowBlocks[sa.page],oa=sa.key-ta.firstRowIndex,va=ta.rows[oa].rowHeight,ma=sa.cellHeightMayIncrease?ha.parentNode.getBoundingClientRect().height+2*L.cellPad:va;va=Math.max(ma,va);va-ta.rows[oa].rowHeight&&(ta.rows[oa].rowHeight=va,ia.selectAll("."+L.cn.columnCell).call(K),B(null,ia.filter(x),0),h(fa,na,!0));ua.attr("transform",function(){var pa=this.parentNode.getBoundingClientRect(),za=P.select(this.parentNode).select("."+
L.cn.cellRect).node().getBoundingClientRect(),qa=this.transform.baseVal.consolidate();pa=za.top-pa.top+(qa?qa.matrix.f:L.cellPad);return"translate("+J(sa,P.select(this.parentNode).select("."+L.cn.cellTextHolder).node().getBoundingClientRect().width)+" "+pa+")"});sa.settledY=!0}}}function J(ia,ha){switch(ia.align){case "left":return L.cellPad;case "right":return ia.column.columnWidth-(ha||0)-L.cellPad;case "center":return(ia.column.columnWidth-(ha||0))/2;default:return L.cellPad}}function K(ia){ia.attr("transform",
function(ha){var fa=ha.rowBlocks[0].auxiliaryBlocks.reduce(function(na,sa){return na+H(sa,Infinity)},0);return"translate(0 "+(H(ha.rowBlocks[ha.page],ha.key)+fa)+")"}).selectAll("."+L.cn.cellRect).attr("height",function(ha){var fa=ha.rowBlocks[ha.page];return fa.rows[ha.key-fa.firstRowIndex].rowHeight})}function N(ia,ha){var fa=0;for(--ha;0<=ha;ha--){var na=ia[ha];var sa=na.allRowsHeight;if(void 0!==sa)na=sa;else{for(var ua=sa=0;ua<na.rows.length;ua++)sa+=na.rows[ua].rowHeight;na=na.allRowsHeight=
sa}fa+=na}return fa}function H(ia,ha){for(var fa=0,na=0;na<ia.rows.length&&ia.rows[na].rowIndex<ha;na++)fa+=ia.rows[na].rowHeight;return fa}var L=b("./constants"),P=b("d3"),Q=b("../../lib/gup"),S=b("../../components/drawing"),O=b("../../lib/svg_text_utils"),U=b("../../lib").raiseToTop,X=b("../../lib").cancelTransition,da=b("./data_preparation_helper"),ea=b("./data_split_helpers"),ca=b("../../components/color");y.exports=function(ia,ha){var fa=!ia._context.staticPlot;ha=ia._fullLayout._paper.selectAll("."+
L.cn.table).data(ha.map(function(oa){oa=Q.unwrap(oa).trace;return da(ia,oa)}),Q.keyFun);ha.exit().remove();ha.enter().append("g").classed(L.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all");ha.attr("width",function(oa){return oa.width+oa.size.l+oa.size.r}).attr("height",function(oa){return oa.height+oa.size.t+oa.size.b}).attr("transform",
function(oa){return"translate("+oa.translateX+","+oa.translateY+")"});var na=ha.selectAll("."+L.cn.tableControlView).data(Q.repeat,Q.keyFun);ha=na.enter().append("g").classed(L.cn.tableControlView,!0).style("box-sizing","content-box");if(fa){var sa="onwheel"in document?"wheel":"mousewheel";ha.on("mousemove",function(oa){na.filter(function(va){return oa===va}).call(h,ia)}).on(sa,function(oa){oa.scrollbarState.wheeling||(oa.scrollbarState.wheeling=!0,C(ia,na,null,oa.scrollY+P.event.deltaY)(oa)||(P.event.stopPropagation(),
P.event.preventDefault()),oa.scrollbarState.wheeling=!1)}).call(h,ia,!0)}na.attr("transform",function(oa){return"translate("+oa.size.l+" "+oa.size.t+")"});ha=na.selectAll("."+L.cn.scrollBackground).data(Q.repeat,Q.keyFun);ha.enter().append("rect").classed(L.cn.scrollBackground,!0).attr("fill","none");ha.attr("width",function(oa){return oa.width}).attr("height",function(oa){return oa.height});na.each(function(oa){S.setClipUrl(P.select(this),"clip"+ia._fullLayout._uid+"_scrollAreaBottomClip_"+oa.key,
ia)});var ua=na.selectAll("."+L.cn.yColumn).data(function(oa){return oa.columns},Q.keyFun);ua.enter().append("g").classed(L.cn.yColumn,!0);ua.exit().remove();ua.attr("transform",function(oa){return"translate("+oa.x+" 0)"});fa&&ua.call(P.behavior.drag().origin(function(oa){var va=P.select(this);w(va,oa,-L.uplift);U(this);oa.calcdata.columnDragInProgress=!0;h(na.filter(function(ma){return oa.calcdata.key===ma.key}),ia);return oa}).on("drag",function(oa){var va=P.select(this);oa.x=Math.max(-L.overdrag,
Math.min(oa.calcdata.width+L.overdrag-oa.columnWidth,P.event.x));p(ua).filter(function(ma){return ma.calcdata.key===oa.calcdata.key}).sort(function(ma,pa){return(oa===ma?P.event.x:ma.x)+ma.columnWidth/2-((oa===pa?P.event.x:pa.x)+pa.columnWidth/2)}).forEach(function(ma,pa){ma.xIndex=pa;ma.x=oa===ma?ma.x:ma.xScale(ma)});ua.filter(function(ma){return oa!==ma}).transition().ease(L.transitionEase).duration(L.transitionDuration).attr("transform",function(ma){return"translate("+ma.x+" 0)"});va.call(X).attr("transform",
"translate("+oa.x+" -"+L.uplift+" )")}).on("dragend",function(oa){var va=P.select(this),ma=oa.calcdata;oa.x=oa.xScale(oa);oa.calcdata.columnDragInProgress=!1;w(va,oa,0);t(ia,ma,ma.columns.map(function(pa){return pa.xIndex}))}));ua.each(function(oa){S.setClipUrl(P.select(this),m(ia,oa),ia)});sa=ua.selectAll("."+L.cn.columnBlock).data(ea.splitToPanels,Q.keyFun);sa.enter().append("g").classed(L.cn.columnBlock,!0).attr("id",function(oa){return oa.key});sa.style("cursor",function(oa){return oa.dragHandle?
"ew-resize":oa.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ta=sa.filter(E);ha=sa.filter(x);fa&&ha.call(P.behavior.drag().origin(function(oa){P.event.stopPropagation();return oa}).on("drag",C(ia,na,-1)).on("dragend",function(){}));a(ia,na,ta,sa);a(ia,na,ha,sa);fa=na.selectAll("."+L.cn.scrollAreaClip).data(Q.repeat,Q.keyFun);fa.enter().append("clipPath").classed(L.cn.scrollAreaClip,!0).attr("id",function(oa){return"clip"+ia._fullLayout._uid+"_scrollAreaBottomClip_"+oa.key});fa=
fa.selectAll("."+L.cn.scrollAreaClipRect).data(Q.repeat,Q.keyFun);fa.enter().append("rect").classed(L.cn.scrollAreaClipRect,!0).attr("x",-L.overdrag).attr("y",-L.uplift).attr("fill","none");fa.attr("width",function(oa){return oa.width+2*L.overdrag}).attr("height",function(oa){return oa.height+L.uplift});ua.selectAll("."+L.cn.columnBoundary).data(Q.repeat,Q.keyFun).enter().append("g").classed(L.cn.columnBoundary,!0);fa=ua.selectAll("."+L.cn.columnBoundaryClippath).data(Q.repeat,Q.keyFun);fa.enter().append("clipPath").classed(L.cn.columnBoundaryClippath,
!0);fa.attr("id",function(oa){return m(ia,oa)});fa=fa.selectAll("."+L.cn.columnBoundaryRect).data(Q.repeat,Q.keyFun);fa.enter().append("rect").classed(L.cn.columnBoundaryRect,!0).attr("fill","none");fa.attr("width",function(oa){return oa.columnWidth+2*n(oa)}).attr("height",function(oa){return oa.calcdata.height+2*n(oa)+L.uplift}).attr("x",function(oa){return-n(oa)}).attr("y",function(oa){return-n(oa)});B(null,ha,na)}},{"../../components/color":615,"../../components/drawing":637,"../../lib":749,"../../lib/gup":746,
"../../lib/svg_text_utils":773,"./constants":1286,"./data_preparation_helper":1287,"./data_split_helpers":1288,d3:169}],1292:[function(b,y,D){D=b("../../plots/template_attributes").hovertemplateAttrs;var n=b("../../plots/template_attributes").texttemplateAttrs,m=b("../../components/colorscale/attributes"),p=b("../../plots/domain").attributes,h=b("../pie/attributes"),a=b("../sunburst/attributes"),d=b("./constants");b=b("../../lib/extend").extendFlat;y.exports={labels:a.labels,parents:a.parents,values:a.values,
branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:"squarify binary dice slice slice-dice dice-slice".split(" "),dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:b({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},
r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},m("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:["\x3e","\x3c","|","/","\\"],dflt:"\x3e",editType:"plot"},
thickness:{valType:"number",min:12,editType:"plot"},textfont:b({},h.textfont,{}),editType:"calc"},text:h.text,textinfo:a.textinfo,texttemplate:n({editType:"plot"},{keys:d.eventDataKeys.concat(["label","value"])}),hovertext:h.hovertext,hoverinfo:a.hoverinfo,hovertemplate:D({},{keys:d.eventDataKeys}),textfont:h.textfont,insidetextfont:h.insidetextfont,outsidetextfont:b({},h.outsidetextfont,{}),textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),
dflt:"top left",editType:"plot"},domain:p({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/domain":824,"../../plots/template_attributes":875,"../pie/attributes":1129,"../sunburst/attributes":1266,"./constants":1295}],1293:[function(b,y,D){var n=b("../../plots/plots");D.name="treemap";D.plot=function(m,p,h,a){n.plotBasePlot(D.name,m,p,h,a)};D.clean=function(m,p,h,a){n.cleanBasePlot(D.name,m,p,h,a)}},{"../../plots/plots":860}],
1294:[function(b,y,D){var n=b("../sunburst/calc");D.calc=function(m,p){return n.calc(m,p)};D.crossTraceCalc=function(m){return n._runCrossTraceCalc("treemap",m)}},{"../sunburst/calc":1268}],1295:[function(b,y,D){y.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" "),gapWithPathbar:1}},{}],1296:[function(b,y,D){var n=b("../../lib"),m=b("./attributes"),p=b("../../components/color"),h=b("../../plots/domain").defaults,
a=b("../bar/defaults").handleText,d=b("../bar/constants").TEXTPAD;b=b("../../components/colorscale");var e=b.hasColorscale,l=b.handleDefaults;y.exports=function(k,c,f,g){function q(x,E){return n.coerce(k,c,m,x,E)}f=q("labels");var t=q("parents");if(f&&f.length&&t&&t.length){(f=q("values"))&&f.length?q("branchvalues"):q("count");q("level");q("maxdepth");"squarify"===q("tiling.packing")&&q("tiling.squarifyratio");q("tiling.flip");q("tiling.pad");f=q("text");q("texttemplate");c.texttemplate||q("textinfo",
Array.isArray(f)?"text+label":"label");q("hovertext");q("hovertemplate");f=q("pathbar.visible");a(k,c,g,q,"auto",{hasPathbar:f,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});q("textposition");t=-1!==c.textposition.indexOf("bottom");q("marker.line.width")&&q("marker.line.color",g.paper_bgcolor);var u=q("marker.colors"),w=c._hasColorscale=e(k,"marker","colors")||(k.marker||{}).coloraxis;w?l(k,c,g,q,{prefix:"marker.",
cLetter:"c"}):q("marker.depthfade",!(u||[]).length);u=2*c.textfont.size;q("marker.pad.t",t?u/4:u);q("marker.pad.l",u/4);q("marker.pad.r",u/4);q("marker.pad.b",t?u:u/4);w&&l(k,c,g,q,{prefix:"marker.",cLetter:"c"});c._hovered={marker:{line:{width:2,color:p.contrast(g.paper_bgcolor)}}};f&&(q("pathbar.thickness",c.pathbar.textfont.size+2*d),q("pathbar.side"),q("pathbar.edgeshape"));h(c,g,q);c._length=null}else c.visible=!1}},{"../../components/color":615,"../../components/colorscale":627,"../../lib":749,
"../../plots/domain":824,"../bar/constants":892,"../bar/defaults":894,"./attributes":1292}],1297:[function(b,y,D){var n=b("d3"),m=b("../../lib"),p=b("../../components/drawing"),h=b("../../lib/svg_text_utils"),a=b("./partition"),d=b("./style").styleOne,e=b("./constants"),l=b("../sunburst/helpers"),k=b("../sunburst/fx");y.exports=function(c,f,g,q,t){var u=t.barDifY,w=t.width,x=t.height,E=t.viewX,F=t.viewY,z=t.pathSlice,B=t.toMoveInsideSlice,C=t.strTransform,v=t.hasTransition,G=t.handleSlicesExit,I=
t.makeUpdateSliceInterpolator,J=t.makeUpdateTextInterpolator,K={},N=c._fullLayout;t=f[0];var H=t.trace;t=t.hierarchy;var L=w/H._entryDepth,P=l.listPath(g.data,"id");t=a(t.copy(),[w,x],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();t=t.filter(function(Q){var S=P.indexOf(Q.data.id);if(-1===S)return!1;Q.x0=L*S;Q.x1=L*(S+1);Q.y0=u;Q.y1=u+x;return Q.onPathbar=!0});t.reverse();q=q.data(t,l.getPtId);q.enter().append("g").classed("pathbar",!0);G(q,!0,K,[w,x],z);q.order();v&&(q=
q.transition().each("end",function(){var Q=n.select(this);l.setSliceCursor(Q,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})}));q.each(function(Q){Q._hoverX=E(Q.x1-Math.min(w,x)/2);Q._hoverY=F(Q.y1-x/2);var S=n.select(this),O=m.ensureSingle(S,"path","surface",function(U){U.style("pointer-events","all")});v?O.transition().attrTween("d",function(U){var X=I(U,!0,K,[w,x]);return function(da){return z(X(da))}}):O.attr("d",z);S.call(k,g,c,f,{styleOne:d,eventDataKeys:e.eventDataKeys,transitionTime:e.CLICK_TRANSITION_TIME,
transitionEasing:e.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:c._transitioning});O.call(d,Q,H,{hovered:!1});Q._text=(l.getPtLabel(Q)||"").split("\x3cbr\x3e").join(" ")||"";S=m.ensureSingle(S,"g","slicetext");S=m.ensureSingle(S,"text","",function(U){U.attr("data-notex",1)});O=m.ensureUniformFontSize(c,l.determineTextFont(H,Q,N.font,{onPathbar:!0}));S.text(Q._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(p.font,O).call(h.convertToTspans,
c);Q.textBB=p.bBox(S.node());Q.transform=B(Q,{fontSize:O.size,onPathbar:!0});Q.transform.fontSize=O.size;v?S.transition().attrTween("transform",function(U){var X=J(U,!0,K,[w,x]);return function(da){return C(X(da))}}):S.attr("transform",C(Q))})}},{"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../sunburst/fx":1271,"../sunburst/helpers":1272,"./constants":1295,"./partition":1302,"./style":1304,d3:169}],1298:[function(b,y,D){var n=b("d3"),m=b("../../lib"),p=b("../../components/drawing"),
h=b("../../lib/svg_text_utils"),a=b("./partition"),d=b("./style").styleOne,e=b("./constants"),l=b("../sunburst/helpers"),k=b("../sunburst/fx"),c=b("../sunburst/plot").formatSliceLabel;y.exports=function(f,g,q,t,u){var w=u.width,x=u.height,E=u.viewX,F=u.viewY,z=u.pathSlice,B=u.toMoveInsideSlice,C=u.strTransform,v=u.hasTransition,G=u.handleSlicesExit,I=u.makeUpdateSliceInterpolator,J=u.makeUpdateTextInterpolator;u=u.prevEntry;var K=f._fullLayout,N=g[0].trace,H=-1!==N.textposition.indexOf("left"),L=
-1!==N.textposition.indexOf("right"),P=-1!==N.textposition.indexOf("bottom"),Q=!P&&!N.marker.pad.t||P&&!N.marker.pad.b,S=a(q,[w,x],{packing:N.tiling.packing,squarifyratio:N.tiling.squarifyratio,flipX:-1<N.tiling.flip.indexOf("x"),flipY:-1<N.tiling.flip.indexOf("y"),pad:{inner:N.tiling.pad,top:N.marker.pad.t,left:N.marker.pad.l,right:N.marker.pad.r,bottom:N.marker.pad.b}}).descendants(),O=Infinity,U=-Infinity;S.forEach(function(ea){var ca=ea.depth;ca>=N._maxDepth?(ea.x0=ea.x1=(ea.x0+ea.x1)/2,ea.y0=
ea.y1=(ea.y0+ea.y1)/2):(O=Math.min(O,ca),U=Math.max(U,ca))});t=t.data(S,l.getPtId);N._maxVisibleLayers=isFinite(U)?U-O+1:0;t.enter().append("g").classed("slice",!0);G(t,!1,{},[w,x],z);t.order();var X=null;if(v&&u){var da=l.getPtId(u);t.each(function(ea){null===X&&l.getPtId(ea)===da&&(X={x0:ea.x0,x1:ea.x1,y0:ea.y0,y1:ea.y1})})}v&&(t=t.transition().each("end",function(){var ea=n.select(this);l.setSliceCursor(ea,f,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}));t.each(function(ea){var ca=l.isHeader(ea,
N);ea._hoverX=E(ea.x1-N.marker.pad.r);ea._hoverY=P?F(ea.y1-N.marker.pad.b/2):F(ea.y0+N.marker.pad.t/2);var ia=n.select(this),ha=m.ensureSingle(ia,"path","surface",function(fa){fa.style("pointer-events","all")});v?ha.transition().attrTween("d",function(fa){var na=I(fa,!1,X||{x0:0,x1:w,y0:0,y1:x},[w,x]);return function(sa){return z(na(sa))}}):ha.attr("d",z);ia.call(k,q,f,g,{styleOne:d,eventDataKeys:e.eventDataKeys,transitionTime:e.CLICK_TRANSITION_TIME,transitionEasing:e.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,
f,{isTransitioning:f._transitioning});ha.call(d,ea,N,{hovered:!1});ea._text=ea.x0===ea.x1||ea.y0===ea.y1?"":ca?Q?"":l.getPtLabel(ea)||"":c(ea,q,N,g,K)||"";ia=m.ensureSingle(ia,"g","slicetext");ia=m.ensureSingle(ia,"text","",function(fa){fa.attr("data-notex",1)});ha=m.ensureUniformFontSize(f,l.determineTextFont(N,ea,K.font));ia.text(ea._text||" ").classed("slicetext",!0).attr("text-anchor",L?"end":H||ca?"start":"middle").call(p.font,ha).call(h.convertToTspans,f);ea.textBB=p.bBox(ia.node());ea.transform=
B(ea,{fontSize:ha.size,isHeader:ca});ea.transform.fontSize=ha.size;v?ia.transition().attrTween("transform",function(fa){var na=J(fa,!1,X||{x0:0,x1:w,y0:0,y1:x},[w,x]);return function(sa){return C(na(sa))}}):ia.attr("transform",C(ea))});return X}},{"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../sunburst/fx":1271,"../sunburst/helpers":1272,"../sunburst/plot":1276,"./constants":1295,"./partition":1302,"./style":1304,d3:169}],1299:[function(b,y,D){y.exports={moduleType:"trace",
name:"treemap",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1173,"./attributes":1292,"./base_plot":1293,"./calc":1294,"./defaults":1296,"./layout_attributes":1300,
"./layout_defaults":1301,"./plot":1303,"./style":1304}],1300:[function(b,y,D){y.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1301:[function(b,y,D){var n=b("../../lib"),m=b("./layout_attributes");y.exports=function(p,h){n.coerce(p,h,m,"treemapcolorway",h.colorway);n.coerce(p,h,m,"extendtreemapcolors",void 0)}},{"../../lib":749,"./layout_attributes":1300}],1302:[function(b,y,D){function n(h,a){switch(h){case "squarify":return p.treemapSquarify.ratio(a);
case "binary":return p.treemapBinary;case "dice":return p.treemapDice;case "slice":return p.treemapSlice;default:return p.treemapSliceDice}}function m(h,a,d){if(d.swapXY){var e=h.x0;h.x0=h.y0;h.y0=e;e=h.x1;h.x1=h.y1;h.y1=e}d.flipX&&(e=h.x0,h.x0=a[0]-h.x1,h.x1=a[0]-e);d.flipY&&(e=h.y0,h.y0=a[1]-h.y1,h.y1=a[1]-e);if(h=h.children)for(e=0;e<h.length;e++)m(h[e],a,d)}var p=b("d3-hierarchy");y.exports=function(h,a,d){var e=d.flipX,l=d.flipY,k="dice-slice"===d.packing,c=d.pad[l?"bottom":"top"],f=d.pad[e?
"right":"left"],g=d.pad[e?"left":"right"],q=d.pad[l?"top":"bottom"];if(k){var t=f;f=c;c=t;t=g;g=q;q=t}h=p.treemap().tile(n(d.packing,d.squarifyratio)).paddingInner(d.pad.inner).paddingLeft(f).paddingRight(g).paddingTop(c).paddingBottom(q).size(k?[a[1],a[0]]:a)(h);(k||e||l)&&m(h,a,{swapXY:k,flipX:e,flipY:l});return h}},{"d3-hierarchy":161}],1303:[function(b,y,D){function n(t){return h.isHierarchyRoot(t)?"":h.getPtId(t)}function m(t,u,w,x){var E=t._fullLayout,F=u[0],z=F.trace,B=F.hierarchy,C=h.findEntryWithLevel(B,
z.level),v=p.select(w);w=v.selectAll("g.pathbar");v=v.selectAll("g.slice");if(C){var G=h.isHierarchyRoot(C),I=!E.uniformtext.mode&&h.hasTransition(x),J=h.getMaxDepth(z),K=E._size,N=z.domain,H=K.w*(N.x[1]-N.x[0]);x=K.h*(N.y[1]-N.y[0]);var L=z.pathbar.thickness,P=z.marker.line.width+f.gapWithPathbar;P=z.pathbar.visible?-1<z.pathbar.side.indexOf("bottom")?x+P:-(L+P):0;var Q={x0:H,x1:H,y0:P,y1:P+L},S=function(qa,Ca,Ka){var Oa=z.tiling.pad;return{x0:qa.x0-Oa-Oa<=Ca.x0?0:qa.x0-Oa+Oa>=Ca.x1?Ka[0]:qa.x0,
x1:qa.x1+Oa-Oa<=Ca.x0?0:qa.x1+Oa+Oa>=Ca.x1?Ka[0]:qa.x1,y0:qa.y0-Oa-Oa<=Ca.y0?0:qa.y0-Oa+Oa>=Ca.y1?Ka[1]:qa.y0,y1:qa.y1+Oa-Oa<=Ca.y0?0:qa.y1+Oa+Oa>=Ca.y1?Ka[1]:qa.y1}},O=null,U={},X={},da=null,ea=function(qa,Ca){return Ca?U[n(qa)]:X[n(qa)]};F.hasMultipleRoots&&G&&J++;z._maxDepth=J;z._backgroundColor=E.paper_bgcolor;z._entryDepth=C.data.depth;z._atRootLevel=G;var ca=-H/2+K.l+K.w*(N.x[1]+N.x[0])/2,ia=-x/2+K.t+K.h*(1-(N.y[1]+N.y[0])/2),ha=ia+0,fa=ca+0;F=function(qa){return fa+qa};G=function(qa){return ha+
qa};var na=fa+0,sa=function(qa){qa.x=Math.max(na,qa.x)},ua=z.pathbar.edgeshape;K=function(qa){var Ca=fa+Math.max(Math.min(qa.x0,qa.x0),0),Ka=fa+Math.min(Math.max(qa.x1,qa.x1),H),Oa=ha+qa.y0,kb=ha+qa.y1;qa=L/2;var mb={},tb={};mb.x=Ca;tb.x=Ka;mb.y=tb.y=(Oa+kb)/2;var nb={x:Ca,y:Oa};Oa={x:Ka,y:Oa};Ka={x:Ka,y:kb};Ca={x:Ca,y:kb};"\x3e"===ua?(nb.x-=qa,Oa.x-=qa,Ka.x-=qa,Ca.x-=qa):"/"===ua?(Ka.x-=qa,Ca.x-=qa,mb.x-=qa/2,tb.x-=qa/2):"\\"===ua?(nb.x-=qa,Oa.x-=qa,mb.x-=qa/2,tb.x-=qa/2):"\x3c"===ua&&(mb.x-=qa,
tb.x-=qa);sa(nb);sa(Ca);sa(mb);sa(Oa);sa(Ka);sa(tb);return"M"+(nb.x+","+nb.y)+"L"+(Oa.x+","+Oa.y)+"L"+(tb.x+","+tb.y)+"L"+(Ka.x+","+Ka.y)+"L"+(Ca.x+","+Ca.y)+"L"+(mb.x+","+mb.y)+"Z"};var ta=function(qa,Ca){var Ka=qa.x0,Oa=qa.x1,kb=qa.y0,mb=qa.y1;qa=qa.textBB;var tb=-1!==z.textposition.indexOf("bottom"),nb=-1!==z.textposition.indexOf("top")||Ca.isHeader&&!tb?"start":tb?"end":"middle",Ta=-1!==z.textposition.indexOf("right"),fb=-1!==z.textposition.indexOf("left")||Ca.onPathbar,ab=z.marker.pad;Ca.isHeader&&
(Ka+=ab.l-d,Oa-=ab.r-d,Ka>=Oa&&(Ka=Oa=(Ka+Oa)/2),tb?(tb=mb-ab.b,kb<tb&&tb<mb&&(kb=tb)):(tb=kb+ab.t,kb<tb&&tb<mb&&(mb=tb)));qa=e(Ka,Oa,kb,mb,qa,{isHorizontal:!1,constrained:!0,angle:0,anchor:nb,leftToRight:fb?-1:Ta?1:0});qa.fontSize=Ca.fontSize;qa.targetX=ca+qa.targetX;qa.targetY=ia+qa.targetY;if(isNaN(qa.targetX)||isNaN(qa.targetY))return{};Ka!==Oa&&kb!==mb&&l(z.type,qa,E);return{scale:qa.scale,rotate:qa.rotate,textX:qa.textX,textY:qa.textY,anchorX:qa.anchorX,anchorY:qa.anchorY,targetX:qa.targetX,
targetY:qa.targetY}},oa=function(qa,Ca){for(var Ka,Oa=0;!Ka&&Oa<J;)Oa++,(qa=qa.parent)?Ka=ea(qa,Ca):Oa=J;return Ka||{}},va=function(qa,Ca,Ka,Oa){Ka=ea(qa,Ca);qa=Ca?Q:(Ca=ea(C,Ca))?S(qa,Ca,Oa):{};return p.interpolate(Ka,qa)};N=function(qa,Ca,Ka,Oa){var kb=ea(qa,Ca);kb?Oa=kb:Ca?Oa=Q:O?qa.parent?(Ka=da||Ka)&&!Ca?Oa=S(qa,Ka,Oa):(Oa={},a.extendFlat(Oa,oa(qa,Ca))):Oa=qa:Oa={};return p.interpolate(Oa,{x0:qa.x0,x1:qa.x1,y0:qa.y0,y1:qa.y1})};var ma=function(qa,Ca,Ka,Oa){var kb=ea(qa,Ca),mb={};Ca?Oa=U[n(B)]||
Q:(Ka=X[z.level]||Ka,Oa=qa.data.depth-C.data.depth<J?S(qa,Ka,Oa):{});a.extendFlat(mb,{transform:ta({x0:Oa.x0,x1:Oa.x1,y0:Oa.y0,y1:Oa.y1,textBB:qa.textBB,_text:qa._text},{isHeader:h.isHeader(qa,z)})});kb?mb=kb:qa.parent&&a.extendFlat(mb,oa(qa,Ca));Ca=qa.transform;qa.x0!==qa.x1&&qa.y0!==qa.y1&&l(z.type,Ca,E);return p.interpolate(mb,{transform:{scale:Ca.scale,rotate:Ca.rotate,textX:Ca.textX,textY:Ca.textY,anchorX:Ca.anchorX,anchorY:Ca.anchorY,targetX:Ca.targetX,targetY:Ca.targetY}})},pa=function(qa,
Ca,Ka,Oa,kb){var mb=Oa[0],tb=Oa[1];I?qa.exit().transition().each(function(){var nb=p.select(this);nb.select("path.surface").transition().attrTween("d",function(Ta){var fb=va(Ta,Ca,Ka,[mb,tb]);return function(ab){return kb(fb(ab))}});nb.select("g.slicetext").attr("opacity",0)}).remove():qa.exit().remove()},za=function(qa){var Ca=qa.transform;qa.x0!==qa.x1&&qa.y0!==qa.y1&&l(z.type,Ca,E);return a.getTextTransform({textX:Ca.textX,textY:Ca.textY,anchorX:Ca.anchorX,anchorY:Ca.anchorY,targetX:Ca.targetX,
targetY:Ca.targetY,scale:Ca.scale,rotate:Ca.rotate})};I&&(w.each(function(qa){U[n(qa)]={x0:qa.x0,x1:qa.x1,y0:qa.y0,y1:qa.y1};qa.transform&&(U[n(qa)].transform={textX:qa.transform.textX,textY:qa.transform.textY,anchorX:qa.transform.anchorX,anchorY:qa.transform.anchorY,targetX:qa.transform.targetX,targetY:qa.transform.targetY,scale:qa.transform.scale,rotate:qa.transform.rotate})}),v.each(function(qa){X[n(qa)]={x0:qa.x0,x1:qa.x1,y0:qa.y0,y1:qa.y1};qa.transform&&(X[n(qa)].transform={textX:qa.transform.textX,
textY:qa.transform.textY,anchorX:qa.transform.anchorX,anchorY:qa.transform.anchorY,targetX:qa.transform.targetX,targetY:qa.transform.targetY,scale:qa.transform.scale,rotate:qa.transform.rotate});!O&&h.isEntry(qa)&&(O=qa)}));da=g(t,u,C,v,{width:H,height:x,viewX:function(qa){return ca+qa},viewY:function(qa){return ia+qa},pathSlice:function(qa){var Ca=ca+qa.x0,Ka=ca+qa.x1,Oa=ia+qa.y0;qa=ia+qa.y1;return Ka-Ca&&qa-Oa?"M"+(Ca+","+(Oa+0))+"L"+(Ka-0+","+Oa)+"L"+(Ka+","+(qa-0))+"L"+(Ca+0+","+qa)+"Z":""},toMoveInsideSlice:ta,
prevEntry:O,makeUpdateSliceInterpolator:N,makeUpdateTextInterpolator:ma,handleSlicesExit:pa,hasTransition:I,strTransform:za});z.pathbar.visible?q(t,u,C,w,{barDifY:P,width:H,height:L,viewX:F,viewY:G,pathSlice:K,toMoveInsideSlice:ta,makeUpdateSliceInterpolator:N,makeUpdateTextInterpolator:ma,handleSlicesExit:pa,hasTransition:I,strTransform:za}):w.remove()}else w.remove(),v.remove()}var p=b("d3"),h=b("../sunburst/helpers"),a=b("../../lib"),d=b("../bar/constants").TEXTPAD,e=b("../bar/plot").toMoveInsideBar;
D=b("../bar/uniform_text");var l=D.recordMinTextSize,k=D.clearMinTextSize,c=b("../bar/style").resizeText,f=b("./constants"),g=b("./draw_descendants"),q=b("./draw_ancestors");y.exports=function(t,u,w,x){var E=t._fullLayout,F=E._treemaplayer,z,B=!w;k("treemap",E);u=F.selectAll("g.trace.treemap").data(u,function(C){return C[0].trace.uid});u.enter().append("g").classed("trace",!0).classed("treemap",!0);u.order();!E.uniformtext.mode&&h.hasTransition(w)?(x&&(z=x()),p.transition().duration(w.duration).ease(w.easing).each("end",
function(){z&&z()}).each("interrupt",function(){z&&z()}).each(function(){F.selectAll("g.trace").each(function(C){m(t,C,this,w)})})):(u.each(function(C){m(t,C,this,w)}),E.uniformtext.mode&&c(t,E._treemaplayer.selectAll(".trace"),"treemap"));B&&u.exit().remove()}},{"../../lib":749,"../bar/constants":892,"../bar/plot":901,"../bar/style":904,"../bar/uniform_text":906,"../sunburst/helpers":1272,"./constants":1295,"./draw_ancestors":1297,"./draw_descendants":1298,d3:169}],1304:[function(b,y,D){function n(e,
l,k,c){var f=(c||{}).hovered;c=l.data.data;var g=c.i;c=c.color;var q=a.isHierarchyRoot(l),t=1;if(f)f=k._hovered.marker.line.color,g=k._hovered.marker.line.width;else if(q&&"rgba(0,0,0,0)"===c)t=0,f="rgba(0,0,0,0)",g=0;else if(f=h.castOption(k,g,"marker.line.color")||p.defaultLine,g=h.castOption(k,g,"marker.line.width")||0,!k._hasColorscale&&!l.onPathbar){var u=k.marker.depthfade;if(u&&(q=p.combine(p.addOpacity(k._backgroundColor,.75),c),!0===u?(u=a.getMaxDepth(k),l=isFinite(u)?a.isLeaf(l)?0:k._maxVisibleLayers-
(l.data.depth-k._entryDepth):l.data.height+1):(l=l.data.depth-k._entryDepth,k._atRootLevel||l++),0<l))for(k=0;k<l;k++)c=p.combine(p.addOpacity(q,.5*k/l),c)}e.style("stroke-width",g).call(p.fill,c).call(p.stroke,f).style("opacity",t)}var m=b("d3"),p=b("../../components/color"),h=b("../../lib"),a=b("../sunburst/helpers"),d=b("../bar/uniform_text").resizeText;y.exports={style:function(e){var l=e._fullLayout._treemaplayer.selectAll(".trace");d(e,l,"treemap");l.each(function(k){var c=m.select(this),f=
k[0].trace;c.style("opacity",f.opacity);c.selectAll("path.surface").each(function(g){m.select(this).call(n,g,f,{hovered:!1})})})},styleOne:n}},{"../../components/color":615,"../../lib":749,"../bar/uniform_text":906,"../sunburst/helpers":1272,d3:169}],1305:[function(b,y,D){D=b("../box/attributes");b=b("../../lib/extend").extendFlat;y.exports={y:D.y,x:D.x,x0:D.x0,y0:D.y0,name:b({},D.name,{}),orientation:b({},D.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",
dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:D.fillcolor,points:b({},D.boxpoints,{}),jitter:b({},
D.jitter,{}),pointpos:b({},D.pointpos,{}),width:b({},D.width,{}),marker:D.marker,text:D.text,hovertext:D.hovertext,hovertemplate:D.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},
color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:D.offsetgroup,alignmentgroup:D.alignmentgroup,selected:D.selected,unselected:D.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":739,"../box/attributes":915}],1306:[function(b,y,D){function n(e,
l,k,c){function f(w){var x=q[w];x="multicategory"===k.type?k.r2c(x):k.d2c(x,0,e[l.valLetter+"calendar"]);return x===d?u[w]:x}var g=e.spanmode,q=e.span||[],t=[l.min,l.max],u=[l.min-2*c,l.max+2*c];c="soft"===g?u:"hard"===g?t:[f(0),f(1)];g={type:"linear",range:c};p.setConvert(g);g.cleanRange();return c}var m=b("../../lib"),p=b("../../plots/cartesian/axes"),h=b("../box/calc"),a=b("./helpers"),d=b("../../constants/numerical").BADNUM;y.exports=function(e,l){var k=h(e,l);if(k[0].t.empty)return k;for(var c=
e._fullLayout,f=p.getFromId(e,l["h"===l.orientation?"xaxis":"yaxis"]),g=Infinity,q=-Infinity,t=0,u=0,w=0;w<k.length;w++){var x=k[w],E=x.pts.map(a.extractVal),F=x;var z=x;var B=z.max-z.min;if(B)if(l.bandwidth)z=Math.max(l.bandwidth,B/1E4);else{var C=E.length,v=m.stdev(E,C-1,z.mean);z=Math.max(1.059*Math.min(v,(z.q3-z.q1)/1.349)*Math.pow(C,-.2),B/100)}else z=l.bandwidth?l.bandwidth:0;B=F.bandwidth=z;F=x.span=n(l,x,f,B);if(x.min===x.max&&0===B)F=x.span=[x.min,x.max],x.density=[{v:1,t:F[0]}],x.bandwidth=
B,t=Math.max(t,1);else{z=F[1]-F[0];C=Math.ceil(z/(B/3));z/=C;if(!isFinite(z)||!isFinite(C))return m.error("Something went wrong with computing the violin span"),k[0].t.empty=!0,k;B=a.makeKDE(x,l,E);x.density=Array(C);C=0;for(v=F[0];v<F[1]+z/2;C++,v+=z){var G=B(v);x.density[C]={v:G,t:v};t=Math.max(t,G)}}u=Math.max(u,E.length);g=Math.min(g,F[0]);q=Math.max(q,F[1])}g=p.findExtremes(f,[g,q],{padded:!0});l._extremes[f._id]=g;l.width?k[0].t.maxKDE=t:(c=c._violinScaleGroupStats,l=l.scalegroup,(f=c[l])?(f.maxKDE=
Math.max(f.maxKDE,t),f.maxCount=Math.max(f.maxCount,u)):c[l]={maxKDE:t,maxCount:u});k[0].t.labels.kde=m._(e,"kde:");return k}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../box/calc":916,"./helpers":1309}],1307:[function(b,y,D){var n=b("../box/cross_trace_calc").setPositionOffset,m=["v","h"];y.exports=function(p,h){var a=p.calcdata,d=h.xaxis;h=h.yaxis;for(var e=0;e<m.length;e++){for(var l=m[e],k="h"===l?h:d,c=[],f=0;f<a.length;f++){var g=a[f],q=g[0].t;g=g[0].trace;
!0!==g.visible||"violin"!==g.type||q.empty||g.orientation!==l||g.xaxis!==d._id||g.yaxis!==h._id||c.push(f)}n("violin",p,c,k)}}},{"../box/cross_trace_calc":917}],1308:[function(b,y,D){var n=b("../../lib"),m=b("../../components/color"),p=b("../box/defaults"),h=b("./attributes");y.exports=function(a,d,e,l){function k(u,w){return n.coerce(a,d,h,u,w)}function c(u,w){return n.coerce2(a,d,h,u,w)}p.handleSampleDefaults(a,d,k,l);if(!1!==d.visible){k("bandwidth");k("side");k("width")||(k("scalegroup",d.name),
k("scalemode"));l=k("span");var f;Array.isArray(l)&&(f="manual");k("spanmode",f);f=k("line.color",(a.marker||{}).color||e);e=k("line.width");var g=k("fillcolor",m.addOpacity(d.line.color,.5));p.handlePointsDefaults(a,d,k,{prefix:""});l=c("box.width");g=c("box.fillcolor",g);var q=c("box.line.color",f),t=c("box.line.width",e);k("box.visible",!!(l||g||q||t))||(d.box={visible:!1});f=c("meanline.color",f);e=c("meanline.width",e);k("meanline.visible",!(!f&&!e))||(d.meanline={visible:!1})}}},{"../../components/color":615,
"../../lib":749,"../box/defaults":918,"./attributes":1305}],1309:[function(b,y,D){var n=b("../../lib");D.makeKDE=function(m,p,h){var a=h.length,d=m.bandwidth,e=1/(a*d);return function(l){for(var k=0,c=0;c<a;c++){var f=(l-h[c])/d;k+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*f*f)}return e*k}};D.getPositionOnKdePath=function(m,p,h){if("h"===p.orientation){var a="y";var d="x"}else a="x",d="y";h=n.findPointOnPath(m.path,h,d,{pathLength:m.pathLength});m=m.posCenterPx;a=h[a];return[a,"both"===p.side?2*m-a:m]};
D.getKdeValue=function(m,p,h){var a=m.pts.map(D.extractVal);return D.makeKDE(m,p,a)(h)/m.posDensityScale};D.extractVal=function(m){return m.v}},{"../../lib":749}],1310:[function(b,y,D){var n=b("../../lib"),m=b("../../plots/cartesian/axes"),p=b("../box/hover"),h=b("./helpers");y.exports=function(a,d,e,l,k){var c=a.cd,f=c[0].trace,g=f.hoveron,q=-1!==g.indexOf("violins"),t=-1!==g.indexOf("kde"),u=[],w;if(q||t){var x=p.hoverOnBoxes(a,d,e,l);if(t&&0<x.length){var E=a.xa,F=a.ya;if("h"===f.orientation){var z=
d;t="y";var B=F;var C="x"}else z=e,t="x",B=E,C="y",E=F;var v=c[a.index];if(z>=v.span[0]&&z<=v.span[1]){var G=n.extendFlat({},a);F=E.c2p(z,!0);var I=h.getKdeValue(v,f,z);v=h.getPositionOnKdePath(v,f,F);var J=B._offset;B=B._length;G[t+"0"]=v[0];G[t+"1"]=v[1];G[C+"0"]=G[C+"1"]=F;G[C+"Label"]=C+": "+m.hoverLabelText(E,z)+", "+c[0].t.labels.kde+" "+I.toFixed(3);G.spikeDistance=x[0].spikeDistance;c=t+"Spike";G[c]=x[0][c];x[0].spikeDistance=void 0;x[0][c]=void 0;G.hovertemplate=!1;u.push(G);G={stroke:a.color};
G[t+"1"]=n.constrain(J+v[0],J,J+B);G[t+"2"]=n.constrain(J+v[1],J,J+B);G[C+"1"]=G[C+"2"]=E._offset+F}}q&&(u=u.concat(x))}-1!==g.indexOf("points")&&(w=p.hoverOnPoints(a,d,e));a=k.selectAll(".violinline-"+f.uid).data(G?[0]:[]);a.enter().append("line").classed("violinline-"+f.uid,!0).attr("stroke-width",1.5);a.exit().remove();a.attr(G);if("closest"===l)return w?[w]:u;w&&u.push(w);return u}},{"../../lib":749,"../../plots/cartesian/axes":797,"../box/hover":920,"./helpers":1309}],1311:[function(b,y,D){y.exports=
{attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../box/select"),moduleType:"trace",name:"violin",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend violinLayout zoomScale".split(" "),
meta:{}}},{"../../plots/cartesian":810,"../box/defaults":918,"../box/select":925,"../scatter/style":1178,"./attributes":1305,"./calc":1306,"./cross_trace_calc":1307,"./defaults":1308,"./hover":1310,"./layout_attributes":1312,"./layout_defaults":1313,"./plot":1314,"./style":1315}],1312:[function(b,y,D){D=b("../box/layout_attributes");b=b("../../lib").extendFlat;y.exports={violinmode:b({},D.boxmode,{}),violingap:b({},D.boxgap,{}),violingroupgap:b({},D.boxgroupgap,{})}},{"../../lib":749,"../box/layout_attributes":922}],
1313:[function(b,y,D){var n=b("../../lib"),m=b("./layout_attributes"),p=b("../box/layout_defaults");y.exports=function(h,a,d){p._supply(h,a,d,function(e,l){return n.coerce(h,a,m,e,l)},"violin")}},{"../../lib":749,"../box/layout_defaults":923,"./layout_attributes":1312}],1314:[function(b,y,D){var n=b("d3"),m=b("../../lib"),p=b("../../components/drawing"),h=b("../box/plot"),a=b("../scatter/line_points"),d=b("./helpers");y.exports=function(e,l,k,c){function f(u){u=a(u,{xaxis:q,yaxis:t,connectGaps:!0,
baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return p.smoothopen(u[0],1)}var g=e._fullLayout,q=l.xaxis,t=l.yaxis;m.makeTraceGroups(c,k,"trace violins").each(function(u){var w=n.select(this);u=u[0];var x=u.t,E=u.trace;if(!0!==E.visible||x.empty)w.remove();else{var F=x.bPos,z=x.bdPos,B=l[x.valLetter+"axis"],C=l[x.posLetter+"axis"],v="both"===E.side,G=v||"positive"===E.side,I=v||"negative"===E.side;u=w.selectAll("path.violin").data(m.identity);u.enter().append("path").style("vector-effect",
"non-scaling-stroke").attr("class","violin");u.exit().remove();u.each(function(N){var H=n.select(this),L=N.density,P=L.length,Q=C.c2l(N.pos+F,!0),S=C.l2p(Q);if(E.width)var O=x.maxKDE/z;else O=g._violinScaleGroupStats[E.scalegroup],O="count"===E.scalemode?O.maxKDE/z*(O.maxCount/N.pts.length):O.maxKDE/z;var U;if(G){var X=Array(P);for(U=0;U<P;U++){var da=X[U]={};da[x.posLetter]=Q+L[U].v/O;da[x.valLetter]=B.c2l(L[U].t,!0)}var ea=f(X)}if(I){X=Array(P);var ca=0;for(U=P-1;ca<P;ca++,U--)da=X[ca]={},da[x.posLetter]=
Q-L[U].v/O,da[x.valLetter]=B.c2l(L[U].t,!0);ca=f(X)}v?ea=ea+"L"+ca.substr(1)+"Z":(Q=[S,B.c2p(L[0].t)],L=[S,B.c2p(L[P-1].t)],"h"===E.orientation&&(Q.reverse(),L.reverse()),ea=G?"M"+Q+"L"+ea.substr(1)+"L"+L:"M"+L+"L"+ca.substr(1)+"L"+Q);H.attr("d",ea);N.posCenterPx=S;N.posDensityScale=O*z;N.path=H.node();N.pathLength=N.path.getTotalLength()/(v?2:1)});var J=E.box;u=J.width;J=(J.line||{}).width;v?(u*=z,J=0):G?(u=[0,z*u/2],J*={x:1,y:-1}[x.posLetter]):(u=[z*u/2,0],J*={x:-1,y:1}[x.posLetter]);h.plotBoxAndWhiskers(w,
{pos:C,val:B},E,{bPos:F,bdPos:u,bPosPxOffset:J});h.plotBoxMean(w,{pos:C,val:B},E,{bPos:F,bdPos:u,bPosPxOffset:J});if(!E.box.visible&&E.meanline.visible)var K=m.identity;K=w.selectAll("path.meanline").data(K||[]);K.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke");K.exit().remove();K.each(function(N){var H=B.c2p(N.mean,!0);N=d.getPositionOnKdePath(N,E,H);n.select(this).attr("d","h"===E.orientation?"M"+H+","+N[0]+"V"+N[1]:"M"+N[0]+","+H+
"H"+N[1])});h.plotPoints(w,{x:q,y:t},E,x)}})}},{"../../components/drawing":637,"../../lib":749,"../box/plot":924,"../scatter/line_points":1169,"./helpers":1309,d3:169}],1315:[function(b,y,D){var n=b("d3"),m=b("../../components/color"),p=b("../scatter/style").stylePoints;y.exports=function(h){var a=n.select(h).selectAll("g.trace.violins");a.style("opacity",function(d){return d[0].trace.opacity});a.each(function(d){d=d[0].trace;var e=n.select(this),l=d.box||{},k=l.line||{},c=d.meanline||{},f=c.width;
e.selectAll("path.violin").style("stroke-width",d.line.width+"px").call(m.stroke,d.line.color).call(m.fill,d.fillcolor);e.selectAll("path.box").style("stroke-width",k.width+"px").call(m.stroke,k.color).call(m.fill,l.fillcolor);l={"stroke-width":f+"px","stroke-dasharray":2*f+"px,"+f+"px"};e.selectAll("path.mean").style(l).call(m.stroke,c.color);e.selectAll("path.meanline").style(l).call(m.stroke,c.color);p(e,d,h)})}},{"../../components/color":615,"../scatter/style":1178,d3:169}],1316:[function(b,y,
D){D=b("../../components/colorscale/attributes");var n=b("../isosurface/attributes"),m=b("../surface/attributes"),p=b("../../plots/attributes"),h=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;y=y.exports=b(h({x:n.x,y:n.y,z:n.z,value:n.value,isomin:n.isomin,isomax:n.isomax,surface:n.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:n.slices,caps:n.caps,text:n.text,hovertext:n.hovertext,hovertemplate:n.hovertemplate},
D("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:n.colorbar,opacity:n.opacity,opacityscale:m.opacityscale,lightposition:n.lightposition,lighting:n.lighting,flatshading:n.flatshading,contour:n.contour,hoverinfo:h({},p.hoverinfo),showlegend:h({},p.showlegend,{dflt:!1})}),"calc","nested");y.x.editType=y.y.editType=y.z.editType=y.value.editType="calc+clearAxisTypes";y.transforms=void 0},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,
"../../plots/attributes":794,"../isosurface/attributes":1091,"../surface/attributes":1278}],1317:[function(b,y,D){function n(k,c,f){this.scene=k;this.uid=f;this.mesh=c;this.name="";this.data=null;this.showContour=!1}var m=b("gl-mesh3d"),p=b("../../lib/gl_format_color").parseColorScale,h=b("../../lib/str2rgbarray"),a=b("../../components/colorscale").extractOpts,d=b("../../plots/gl3d/zip3"),e=b("../isosurface/convert").findNearestOnAxis,l=b("../isosurface/convert").generateIsoMeshes;b=n.prototype;b.handlePick=
function(k){if(k.object===this.mesh){var c=k.data.index,f=this.data._meshY[c],g=this.data._meshZ[c],q=this.data._Ys.length,t=this.data._Zs.length;c=e(this.data._meshX[c],this.data._Xs).id;f=e(f,this.data._Ys).id;g=e(g,this.data._Zs).id;q=k.index=g+t*f+t*q*c;k.traceCoordinate=[this.data._meshX[q],this.data._meshY[q],this.data._meshZ[q],this.data._value[q]];t=this.data.hovertext||this.data.text;Array.isArray(t)&&void 0!==t[q]?k.textLabel=t[q]:t&&(k.textLabel=t);return!0}};b.update=function(k){function c(q,
t,u,w){return t.map(function(x){return q.d2l(x,0,w)*u})}var f=this.scene,g=f.fullSceneLayout;this.data=l(k);f=d(c(g.xaxis,k._meshX,f.dataScale[0],k.xcalendar),c(g.yaxis,k._meshY,f.dataScale[1],k.ycalendar),c(g.zaxis,k._meshZ,f.dataScale[2],k.zcalendar));g=d(k._meshI,k._meshJ,k._meshK);f={positions:f,cells:g,lightPosition:[k.lightposition.x,k.lightposition.y,k.lightposition.z],ambient:k.lighting.ambient,diffuse:k.lighting.diffuse,specular:k.lighting.specular,roughness:k.lighting.roughness,fresnel:k.lighting.fresnel,
vertexNormalsEpsilon:k.lighting.vertexnormalsepsilon,faceNormalsEpsilon:k.lighting.facenormalsepsilon,opacity:k.opacity,opacityscale:k.opacityscale,contourEnable:k.contour.show,contourColor:h(k.contour.color).slice(0,3),contourWidth:k.contour.width,useFacetNormals:k.flatshading};g=a(k);f.vertexIntensity=k._meshIntensity;f.vertexIntensityBounds=[g.min,g.max];f.colormap=p(k);this.mesh.update(f)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};y.exports=function(k,c){var f=
m({gl:k.glplot.gl}),g=new n(k,f,c.uid);f._trace=g;g.update(c);k.glplot.add(f);return g}},{"../../components/colorscale":627,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../../plots/gl3d/zip3":850,"../isosurface/convert":1093,"gl-mesh3d":292}],1318:[function(b,y,D){var n=b("../../lib"),m=b("./attributes"),p=b("../isosurface/defaults").supplyIsoDefaults,h=b("../surface/defaults").opacityscaleDefaults;y.exports=function(a,d,e,l){function k(c,f){return n.coerce(a,d,m,c,f)}p(a,d,e,l,k);
h(a,d,l,k)}},{"../../lib":749,"../isosurface/defaults":1094,"../surface/defaults":1281,"./attributes":1316}],1319:[function(b,y,D){y.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"volume",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":839,"../isosurface/calc":1092,"./attributes":1316,"./convert":1317,"./defaults":1318}],
1320:[function(b,y,D){function n(l){return{marker:{color:e({},m.marker.color,{arrayOk:!1,editType:"style"}),line:{color:e({},m.marker.line.color,{arrayOk:!1,editType:"style"}),width:e({},m.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}var m=b("../bar/attributes");D=b("../scatter/attributes").line;var p=b("../../plots/attributes"),h=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs,
d=b("./constants"),e=b("../../lib/extend").extendFlat;b=b("../../components/color");y.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,hovertext:m.hovertext,hovertemplate:h({},{keys:d.eventDataKeys}),hoverinfo:e({},p.hoverinfo,{flags:"name x y text initial delta final".split(" ")}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",
arrayOk:!1},texttemplate:a({editType:"plot"},{keys:d.eventDataKeys.concat(["label"])}),text:m.text,textposition:m.textposition,insidetextanchor:m.insidetextanchor,textangle:m.textangle,textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:m.outsidetextfont,constraintext:m.constraintext,cliponaxis:m.cliponaxis,orientation:m.orientation,offset:m.offset,width:m.width,increasing:n("increasing"),decreasing:n("decreasing"),totals:n("intermediate sums and total"),connector:{line:{color:e({},
D.color,{dflt:b.defaultLine}),width:e({},D.width,{editType:"plot"}),dash:D.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup}},{"../../components/color":615,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../bar/attributes":890,"../scatter/attributes":1155,"./constants":1322}],
1321:[function(b,y,D){function n(e){return"a"===e||"absolute"===e}function m(e){return"t"===e||"total"===e}var p=b("../../plots/cartesian/axes"),h=b("../../lib").mergeArray,a=b("../scatter/calc_selection"),d=b("../../constants/numerical").BADNUM;y.exports=function(e,l){var k=p.getFromId(e,l.xaxis||"x"),c=p.getFromId(e,l.yaxis||"y");"h"===l.orientation?(e=k.makeCalcdata(l,"x"),k=c.makeCalcdata(l,"y")):(e=c.makeCalcdata(l,"y"),k=k.makeCalcdata(l,"x"));c=Math.min(k.length,e.length);for(var f=Array(c),
g=0,q,t=!1,u=0;u<c;u++){q=e[u]||0;var w=!1;(e[u]!==d||m(l.measure[u])||n(l.measure[u]))&&u+1<c&&(e[u+1]!==d||m(l.measure[u+1])||n(l.measure[u+1]))&&(w=!0);w=f[u]={i:u,p:k[u],s:q,rawS:q,cNext:w};n(l.measure[u])?(g=w.s,w.isSum=!0,w.dir="totals",w.s=g):m(l.measure[u])?(w.isSum=!0,w.dir="totals",w.s=g):(w.isSum=!1,w.dir=0>w.rawS?"decreasing":"increasing",q=w.s,w.s=g+q,g+=q);"totals"===w.dir&&(t=!0);l.ids&&(w.id=String(l.ids[u]));w.v=(l.base||0)+g}f.length&&(f[0].hasTotals=t);h(l.text,f,"tx");h(l.hovertext,
f,"htx");a(f,l);return f}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../scatter/calc_selection":1157}],1322:[function(b,y,D){y.exports={eventDataKeys:["initial","delta","final"]}},{}],1323:[function(b,y,D){var n=b("../bar/cross_trace_calc").setGroupPositions;y.exports=function(m,p){var h=m._fullLayout,a=m._fullData,d=m.calcdata,e=p.xaxis,l=p.yaxis;p=[];var k=[],c=[],f;for(f=0;f<a.length;f++){var g=a[f];if(!0===g.visible&&g.xaxis===e._id&&g.yaxis===l._id&&"waterfall"===
g.type){var q=d[f];"h"===g.orientation?c.push(q):k.push(q);p.push(q)}}q={mode:h.waterfallmode,norm:h.waterfallnorm,gap:h.waterfallgap,groupgap:h.waterfallgroupgap};n(m,e,l,k,q);n(m,l,e,c,q);for(f=0;f<p.length;f++)for(q=p[f],m=0;m<q.length;m++)e=q[m],!1===e.isSum&&(e.s0+=0===m?0:q[m-1].s),m+1<q.length&&(q[m].nextP0=q[m+1].p0,q[m].nextS0=q[m+1].s0)}},{"../bar/cross_trace_calc":893}],1324:[function(b,y,D){function n(c,f,g){c(f+".marker.color",g);c(f+".marker.line.color",e.defaultLine);c(f+".marker.line.width")}
var m=b("../../lib"),p=b("../bar/defaults").handleGroupingDefaults,h=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),d=b("./attributes"),e=b("../../components/color");b=b("../../constants/delta.js");var l=b.INCREASING.COLOR,k=b.DECREASING.COLOR;y.exports={supplyDefaults:function(c,f,g,q){function t(u,w){return m.coerce(c,f,d,u,w)}a(c,f,q,t)?(t("measure"),t("orientation",f.x&&!f.y?"h":"v"),t("base"),t("offset"),t("width"),t("text"),t("hovertext"),t("hovertemplate"),g=t("textposition"),
h(c,f,q,t,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==f.textposition&&(t("texttemplate"),f.texttemplate||t("textinfo")),n(t,"increasing",l),n(t,"decreasing",k),n(t,"totals","#4499FF"),t("connector.visible")&&(t("connector.mode"),t("connector.line.width")&&(t("connector.line.color"),t("connector.line.dash")))):f.visible=!1},crossTraceDefaults:function(c,f){function g(w){return m.coerce(t._input,
t,d,w)}if("group"===f.waterfallmode)for(var q=0;q<c.length;q++){var t=c[q];var u=t._input;p(u,t,f,g)}}}},{"../../components/color":615,"../../constants/delta.js":718,"../../lib":749,"../bar/defaults":894,"../scatter/xy_defaults":1181,"./attributes":1320}],1325:[function(b,y,D){y.exports=function(n,m){n.x="xVal"in m?m.xVal:m.x;n.y="yVal"in m?m.yVal:m.y;"initial"in m&&(n.initial=m.initial);"delta"in m&&(n.delta=m.delta);"final"in m&&(n.final=m.final);m.xa&&(n.xaxis=m.xa);m.ya&&(n.yaxis=m.ya);return n}},
{}],1326:[function(b,y,D){function n(e,l){var k=e[l.dir].marker;e=k.color;l=k.line.color;k=k.line.width;if(p(e))return e;if(p(l)&&k)return l}var m=b("../../plots/cartesian/axes").hoverLabelText,p=b("../../components/color").opacity,h=b("../bar/hover").hoverOnBars;b=b("../../constants/delta.js");var a=b.INCREASING.SYMBOL,d=b.DECREASING.SYMBOL;y.exports=function(e,l,k,c){if(l=h(e,l,k,c)){var f=l.cd;k=f[0].trace;var g=(c="h"===k.orientation)?e.xa:e.ya;e=f[l.index];f=e.isSum?e.b+e.s:e.rawS;if(!e.isSum){l.initial=
e.b+e.s-f;l.delta=f;l.final=l.initial+l.delta;var q=m(g,Math.abs(l.delta));l.deltaLabel=0>f?"("+q+")":q;l.finalLabel=m(g,l.final);l.initialLabel=m(g,l.initial)}q=e.hi||k.hoverinfo;g=[];if(q&&"none"!==q&&"skip"!==q){var t="all"===q,u=q.split("+");q=function(w){return t||-1!==u.indexOf(w)};e.isSum||(!q("final")||(c?q("x"):q("y"))||g.push(l.finalLabel),q("delta")&&(0>f?g.push(l.deltaLabel+" "+d):g.push(l.deltaLabel+" "+a)),q("initial")&&g.push("Initial: "+l.initialLabel))}g.length&&(l.extraText=g.join("\x3cbr\x3e"));
l.color=n(k,e);return[l]}}},{"../../components/color":615,"../../constants/delta.js":718,"../../plots/cartesian/axes":797,"../bar/hover":897}],1327:[function(b,y,D){y.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),
eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,"../bar/select":902,"./attributes":1320,"./calc":1321,"./cross_trace_calc":1323,"./defaults":1324,"./event_data":1325,"./hover":1326,"./layout_attributes":1328,"./layout_defaults":1329,"./plot":1330,"./style":1331}],1328:[function(b,y,D){y.exports=
{waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1329:[function(b,y,D){var n=b("../../lib"),m=b("./layout_attributes");y.exports=function(p,h,a){for(var d=!1,e=0;e<a.length;e++){var l=a[e];if(l.visible&&"waterfall"===l.type){d=!0;break}}d&&(n.coerce(p,h,m,"waterfallmode",void 0),n.coerce(p,h,m,"waterfallgap",.2),n.coerce(p,
h,m,"waterfallgroupgap",void 0))}},{"../../lib":749,"./layout_attributes":1328}],1330:[function(b,y,D){function n(l,k,c,f){var g=k.xaxis,q=k.yaxis;p.makeTraceGroups(f,c,"trace bars").each(function(t){var u=m.select(this);t=t[0].trace;u=p.ensureSingle(u,"g","lines");if(t.connector&&t.connector.visible){var w="h"===t.orientation,x=t.connector.mode;u=u.selectAll("g.line").data(p.identity);u.enter().append("g").classed("line",!0);u.exit().remove();var E=u.size();u.each(function(F,z){if(z===E-1||F.cNext){var B=
[];var C=[];var v=w?g:q,G=w?q:g;B[0]=v.c2p(F.s0,!0);C[0]=G.c2p(F.p0,!0);B[1]=v.c2p(F.s1,!0);C[1]=G.c2p(F.p1,!0);B[2]=v.c2p(F.nextS0,!0);C[2]=G.c2p(F.nextP0,!0);C=w?[B,C]:[C,B];B=C[0];C=C[1];v="";B[0]!==a&&C[0]!==a&&B[1]!==a&&C[1]!==a&&("spanning"===x&&!F.isSum&&0<z&&(v=w?v+("M"+B[0]+","+C[1]+"V"+C[0]):v+("M"+B[1]+","+C[0]+"H"+B[0])),"between"!==x&&(F.isSum||z<E-1)&&(v=w?v+("M"+B[1]+","+C[0]+"V"+C[1]):v+("M"+B[0]+","+C[1]+"H"+B[1])),B[2]!==a&&C[2]!==a&&(v=w?v+("M"+B[1]+","+C[1]+"V"+C[2]):v+("M"+B[1]+
","+C[1]+"H"+B[2])));""===v&&(v="M0,0Z");p.ensureSingle(m.select(this),"path").attr("d",v).call(h.setClipUrl,k.layerClipId,l)}})}else u.remove()})}var m=b("d3"),p=b("../../lib"),h=b("../../components/drawing"),a=b("../../constants/numerical").BADNUM,d=b("../bar/plot"),e=b("../bar/uniform_text").clearMinTextSize;y.exports=function(l,k,c,f){var g=l._fullLayout;e("waterfall",g);d.plot(l,k,c,f,{mode:g.waterfallmode,norm:g.waterfallmode,gap:g.waterfallgap,groupgap:g.waterfallgroupgap});n(l,k,c,f)}},{"../../components/drawing":637,
"../../constants/numerical":724,"../../lib":749,"../bar/plot":901,"../bar/uniform_text":906,d3:169}],1331:[function(b,y,D){var n=b("d3"),m=b("../../components/drawing"),p=b("../../components/color"),h=b("../../constants/interactions").DESELECTDIM;D=b("../bar/style");var a=b("../bar/uniform_text").resizeText,d=D.styleTextPoints;y.exports={style:function(e,l,k){l=k?k:n.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");a(e,l,"waterfall");l.style("opacity",function(c){return c[0].trace.opacity});
l.each(function(c){var f=n.select(this),g=c[0].trace;f.selectAll(".point \x3e path").each(function(q){if(!q.isBlank){var t=g[q.dir].marker;n.select(this).call(p.fill,t.color).call(p.stroke,t.line.color).call(m.dashLine,t.line.dash,t.line.width).style("opacity",g.selectedpoints&&!q.selected?h:1)}});d(f,g,e);f.selectAll(".lines").each(function(){var q=g.connector.line;m.lineGroupStyle(n.select(this).selectAll("path"),q.width,q.color,q.dash)})})}}},{"../../components/color":615,"../../components/drawing":637,
"../../constants/interactions":723,"../bar/style":904,"../bar/uniform_text":906,d3:169}],1332:[function(b,y,D){function n(q,t,u,w){if(w.enabled){var x=w.target,E=e.nestedProperty(t,x),F=E.get();q=d.getDataConversions(q,t,x,F);q=m(w,q);for(var z=Array(u.length),B=0;B<u.length;B++)z[B]=q(F,u[B]);E.set(z);"count"===w.func&&e.pushUnique(t._arrayAttrs,x)}}function m(q,t){var u=t.d2c,w=t.c2d;switch(q.func){case "count":return p;case "first":return h;case "last":return a;case "sum":return function(x,E){for(var F=
0,z=0;z<E.length;z++){var B=u(x[E[z]]);B!==c&&(F+=B)}return w(F)};case "avg":return function(x,E){for(var F=0,z=0,B=0;B<E.length;B++){var C=u(x[E[B]]);C!==c&&(F+=C,z++)}return z?w(F/z):c};case "min":return function(x,E){for(var F=Infinity,z=0;z<E.length;z++){var B=u(x[E[z]]);B!==c&&(F=Math.min(F,B))}return Infinity===F?c:w(F)};case "max":return function(x,E){for(var F=-Infinity,z=0;z<E.length;z++){var B=u(x[E[z]]);B!==c&&(F=Math.max(F,B))}return-Infinity===F?c:w(F)};case "range":return function(x,
E){for(var F=Infinity,z=-Infinity,B=0;B<E.length;B++){var C=u(x[E[B]]);C!==c&&(F=Math.min(F,C),z=Math.max(z,C))}return-Infinity===z||Infinity===F?c:w(z-F)};case "change":return function(x,E){var F=u(x[E[0]]);x=u(x[E[E.length-1]]);return F===c||x===c?c:w(x-F)};case "median":return function(x,E){for(var F=[],z=0;z<E.length;z++){var B=u(x[E[z]]);B!==c&&F.push(B)}if(!F.length)return c;F.sort(e.sorterAsc);x=(F.length-1)/2;return w((F[Math.floor(x)]+F[Math.ceil(x)])/2)};case "mode":return function(x,E){for(var F=
{},z=0,B=c,C=0;C<E.length;C++){var v=u(x[E[C]]);if(v!==c){var G=F[v]=(F[v]||0)+1;G>z&&(z=G,B=v)}}return z?w(B):c};case "rms":return function(x,E){for(var F=0,z=0,B=0;B<E.length;B++){var C=u(x[E[B]]);C!==c&&(F+=C*C,z++)}return z?w(Math.sqrt(F/z)):c};case "stddev":return function(x,E){var F=0,z=0,B=1,C=c,v;for(v=0;v<E.length&&C===c;v++)C=u(x[E[v]]);if(C===c)return c;for(;v<E.length;v++){var G=u(x[E[v]]);G!==c&&(G-=C,F+=G,z+=G*G,B++)}return(x="sample"===q.funcmode?B-1:B)?Math.sqrt((z-F*F/B)/x):0}}}function p(q,
t){return t.length}function h(q,t){return q[t[0]]}function a(q,t){return q[t[t.length-1]]}var d=b("../plots/cartesian/axes"),e=b("../lib"),l=b("../plot_api/plot_schema"),k=b("./helpers").pointsAccessorFunction,c=b("../constants/numerical").BADNUM;D.moduleType="transform";D.name="aggregate";var f=D.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",
editType:"calc"},func:{valType:"enumerated",values:"count sum avg median mode rms stddev min max first last change range".split(" "),dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},g=f.aggregations;D.supplyDefaults=function(q,t){function u(v,G){return e.coerce(z[x],B,g,v,G)}var w={},x;if(!e.coerce(q,w,f,"enabled",void 0))return w;t=l.findArrayAttributes(t);
var E={};for(x=0;x<t.length;x++)E[t[x]]=1;var F=e.coerce(q,w,f,"groups",void 0);if(!Array.isArray(F)){if(!E[F])return w.enabled=!1,w;E[F]=0}var z=q.aggregations||[];q=w.aggregations=Array(z.length);for(x=0;x<z.length;x++){var B={_index:x};F=u("target");var C=u("func");u("enabled")&&F&&(E[F]||"count"===C&&void 0===E[F])?("stddev"===C&&u("funcmode"),E[F]=0,q[x]=B):q[x]={enabled:!1,_index:x}}for(x=0;x<t.length;x++)E[t[x]]&&q.push({target:t[x],func:g.func.dflt,enabled:!0,_index:-1});return w};D.calcTransform=
function(q,t,u){if(u.enabled){var w=u.groups,x=e.getTargetArray(t,{target:w});if(x){var E,F={},z={},B=[],C=k(t.transforms,u),v=x.length;t._length&&(v=Math.min(v,t._length));for(E=0;E<v;E++){var G=x[E];var I=F[G];void 0===I?(F[G]=B.length,I=[E],B.push(I),z[F[G]]=C(E)):(B[I].push(E),z[F[G]]=(z[F[G]]||[]).concat(C(E)))}u._indexToPoints=z;u=u.aggregations;for(E=0;E<u.length;E++)n(q,t,B,u[E]);"string"===typeof w&&n(q,t,B,{target:w,func:"first",enabled:!0});t._length=B.length}}}},{"../constants/numerical":724,
"../lib":749,"../plot_api/plot_schema":786,"../plots/cartesian/axes":797,"./helpers":1335}],1333:[function(b,y,D){function n(k,c,f){var g=k.operation,q=k.value,t=Array.isArray(q),u=function(E){return c(E,0,k.valuecalendar)},w=function(E){return c(E,0,f)},x;-1!==d.indexOf(g)?x=t?u(q[0]):u(q):-1!==e.indexOf(g)?x=t?[u(q[0]),u(q[1])]:[u(q),u(q)]:-1!==l.indexOf(g)&&(x=t?q.map(u):[u(q)]);switch(g){case "\x3d":return function(E){return w(E)===x};case "!\x3d":return function(E){return w(E)!==x};case "\x3c":return function(E){return w(E)<
x};case "\x3c\x3d":return function(E){return w(E)<=x};case "\x3e":return function(E){return w(E)>x};case "\x3e\x3d":return function(E){return w(E)>=x};case "[]":return function(E){E=w(E);return E>=x[0]&&E<=x[1]};case "()":return function(E){E=w(E);return E>x[0]&&E<x[1]};case "[)":return function(E){E=w(E);return E>=x[0]&&E<x[1]};case "(]":return function(E){E=w(E);return E>x[0]&&E<=x[1]};case "][":return function(E){E=w(E);return E<=x[0]||E>=x[1]};case ")(":return function(E){E=w(E);return E<x[0]||
E>x[1]};case "](":return function(E){E=w(E);return E<=x[0]||E>x[1]};case ")[":return function(E){E=w(E);return E<x[0]||E>=x[1]};case "{}":return function(E){return-1!==x.indexOf(w(E))};case "}{":return function(E){return-1===x.indexOf(w(E))}}}var m=b("../lib"),p=b("../registry"),h=b("../plots/cartesian/axes"),a=b("./helpers").pointsAccessorFunction;b=b("../constants/filter_ops");var d=b.COMPARISON_OPS,e=b.INTERVAL_OPS,l=b.SET_OPS;D.moduleType="transform";D.name="filter";D.attributes={enabled:{valType:"boolean",
dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(d).concat(e).concat(l),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};D.supplyDefaults=function(k){function c(q,t){return m.coerce(k,f,D.attributes,q,t)}var f={};if(c("enabled")){var g=c("target");if(m.isArrayOrTypedArray(g)&&0===g.length)return f.enabled=
!1,f;c("preservegaps");c("operation");c("value");g=p.getComponentMethod("calendars","handleDefaults");g(k,f,"valuecalendar",null);g(k,f,"targetcalendar",null)}return f};D.calcTransform=function(k,c,f){function g(v,G){for(var I=0;I<x.length;I++){var J=m.nestedProperty(c,x[I]);v(J,G)}}if(f.enabled){var q=m.getTargetArray(c,f);if(q){var t=f.target,u=q.length;c._length&&(u=Math.min(u,c._length));var w=f.targetcalendar,x=c._arrayAttrs,E=f.preservegaps;if("string"===typeof t){var F=m.nestedProperty(c,t+
"calendar").get();F&&(w=F)}k=h.getDataToCoordFunc(k,c,t,q);w=n(f,k,w);var z={};k={};t=0;if(E){var B=function(v){z[v.astr]=m.extendDeep([],v.get());v.set(Array(u))};F=function(v,G){var I=z[v.astr][G];v.get()[G]=I}}else B=function(v){z[v.astr]=m.extendDeep([],v.get());v.set([])},F=function(v,G){G=z[v.astr][G];v.get().push(G)};g(B);B=a(c.transforms,f);for(var C=0;C<u;C++)w(q[C])?(g(F,C),k[t++]=B(C)):E&&t++;f._indexToPoints=k;c._length=t}}}},{"../constants/filter_ops":720,"../lib":749,"../plots/cartesian/axes":797,
"../registry":880,"./helpers":1335}],1334:[function(b,y,D){var n=b("../lib"),m=b("../plot_api/plot_schema"),p=b("../plots/plots"),h=b("./helpers").pointsAccessorFunction;D.moduleType="transform";D.name="groupby";D.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},
editType:"calc"},editType:"calc"};D.supplyDefaults=function(a,d,e){d={};if(!n.coerce(a,d,D.attributes,"enabled",void 0))return d;n.coerce(a,d,D.attributes,"groups",void 0);n.coerce(a,d,D.attributes,"nameformat",1<e._dataLength?"%{group} (%{trace})":"%{group}");e=a.styles;var l=d.styles=[];if(e)for(a=0;a<e.length;a++){var k=l[a]={};n.coerce(e[a],l[a],D.attributes.styles,"target");var c=n.coerce(e[a],l[a],D.attributes.styles,"value");n.isPlainObject(c)?k.value=n.extendDeep({},c):c&&delete k.value}return d};
D.transform=function(a,d){var e,l=[];for(e=0;e<a.length;e++){var k=void 0,c;var f=a[e];var g=d.transform;var q=d.transformIndex;var t=f.transforms[q].groups,u=h(f.transforms,g);if(n.isArrayOrTypedArray(t)&&0!==t.length){var w=n.filterUnique(t),x=Array(w.length),E=t.length,F=m.findArrayAttributes(f),z=g.styles||[],B={};for(c=0;c<z.length;c++)B[z[c].target]=z[c].value;g.styles&&(k=n.keyedContainer(g,"styles","target","value.name"));z={};var C={};for(c=0;c<w.length;c++){var v=w[c];z[v]=c;C[v]=0;var G=
x[c]=n.extendDeepNoArrays({},f);G._group=v;G.transforms[q]._indexToPoints={};var I=null;k&&(I=k.get(v));G.name=I||""===I?I:n.templateString(g.nameformat,{trace:f.name,group:v});I=G.transforms;G.transforms=[];for(v=0;v<I.length;v++)G.transforms[v]=n.extendDeepNoArrays({},I[v]);for(v=0;v<F.length;v++)n.nestedProperty(G,F[v]).set([])}for(c=0;c<F.length;c++){g=F[c];v=0;for(k=[];v<w.length;v++)k[v]=n.nestedProperty(x[v],g).get();g=n.nestedProperty(f,g).get();for(v=0;v<E;v++)k[z[t[v]]].push(g[v])}for(v=
0;v<E;v++)G=x[z[t[v]]],G.transforms[q]._indexToPoints[C[t[v]]]=u(v),C[t[v]]++;for(c=0;c<w.length;c++)v=w[c],G=x[c],p.clearExpandedTraceDefaultColors(G),n.extendDeepNoArrays(G,B[v]||{});f=x}else f=[f];for(q=0;q<f.length;q++)l.push(f[q])}return l}},{"../lib":749,"../plot_api/plot_schema":786,"../plots/plots":860,"./helpers":1335}],1335:[function(b,y,D){D.pointsAccessorFunction=function(n,m){for(var p,h,a=0;a<n.length;a++){p=n[a];if(p===m)break;p._indexToPoints&&!1!==p.enabled&&(h=p._indexToPoints)}return h?
function(d){return h[d]}:function(d){return[d]}}},{}],1336:[function(b,y,D){function n(d,e){switch(d.order){case "ascending":return function(l,k){l=e(l.v);k=e(k.v);return l===a?1:k===a?-1:l-k};case "descending":return function(l,k){l=e(l.v);k=e(k.v);return l===a?1:k===a?-1:k-l}}}var m=b("../lib"),p=b("../plots/cartesian/axes"),h=b("./helpers").pointsAccessorFunction,a=b("../constants/numerical").BADNUM;D.moduleType="transform";D.name="sort";D.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},
target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};D.supplyDefaults=function(d){var e={};m.coerce(d,e,D.attributes,"enabled",void 0)&&(m.coerce(d,e,D.attributes,"target",void 0),m.coerce(d,e,D.attributes,"order",void 0));return e};D.calcTransform=function(d,e,l){if(l.enabled){var k=m.getTargetArray(e,l);if(k){var c=l.target,f=k.length;e._length&&(f=Math.min(f,
e._length));var g=e._arrayAttrs;c=p.getDataToCoordFunc(d,e,c,k);var q=f,t=Array(q);d=Array(q);var u;for(u=0;u<q;u++)t[u]={v:k[u],i:u};t.sort(n(l,c));for(u=0;u<q;u++)d[u]=t[u].i;k=h(e.transforms,l);c={};for(q=0;q<g.length;q++){u=m.nestedProperty(e,g[q]);var w=u.get(),x=Array(f);for(t=0;t<f;t++)x[t]=w[d[t]];u.set(x)}for(t=0;t<f;t++)c[t]=k(d[t]);l._indexToPoints=c;e._length=f}}}},{"../constants/numerical":724,"../lib":749,"../plots/cartesian/axes":797,"./helpers":1335}],1337:[function(b,y,D){D.version=
"1.55.2"},{}]},{},[26])(26)})};
shadow$provide[521]=function(xa,R,Ja,V){function b(y){return y&&y.__esModule?y:{"default":y}}Object.defineProperty(V,"__esModule",{value:!0});V["default"]=void 0;xa=b(R(519));R=b(R(520));R=(0,xa["default"])(R["default"]);V["default"]=R};
'use strict';var eua,O3,S3,cua,fua,hua,iua;$APP.I3=function(a){return a instanceof $APP.I?a.ja:null};$APP.J3=function(a){return a instanceof $APP.Lq?a.obj:a instanceof $APP.Mq?a.J:$APP.ap.A(a,$APP.D([$APP.ks,$APP.I3]))};
$APP.P3=function(a){var b=$APP.N(a),c=$APP.H.o(b,$APP.K3,function(g){return JSON.stringify(g,null,1)});a=$APP.H.g(b,$APP.L3);var d=$APP.H.o(b,$APP.M3,"application/json");b=$APP.H.g(b,$APP.N3);var e=$APP.m(b)?b:new $APP.T(null,1,5,$APP.V,[O3],null),f=$APP.m(a)?a:"plotly_data.json";return new $APP.l(null,4,[$APP.tn,"toData",$APP.Cs,$APP.J3(bua),$APP.ft,"Save data",cua,function(g){g=g.data;g=c.j?c.j(g):c.call(null,g);return $APP.lq($APP.wi.A(e,f,$APP.D([d,g])))}],null)};
$APP.dua=new $APP.I(null,"newline","newline",1790071323);$APP.M3=new $APP.I(null,"data-type","data-type",-326421468);eua=new $APP.I(null,"displaylogo","displaylogo",1531477828);$APP.L3=new $APP.I(null,"filename","filename",-1428840783);O3=new $APP.I("transparency.components.plotly","send-data-to-client","transparency.components.plotly/send-data-to-client",1896277780);$APP.Q3=new $APP.I(null,"modeBarButtonsToAdd","modeBarButtonsToAdd",792964880);
$APP.R3=new $APP.I(null,"displayModeBar","displayModeBar",-1187531817);S3=new $APP.I("transparency.components.plotly","download-file","transparency.components.plotly/download-file",-676073443);$APP.T3=new $APP.I(null,"layout","layout",-2120940921);$APP.U3=new $APP.I(null,"lf","lf",1923784290);cua=new $APP.I(null,"click","click",1912301393);$APP.K3=new $APP.I(null,"data-\x3estring","data-\x3estring",-1527786836);fua=new $APP.I(null,"locale","locale",-2115712697);
$APP.gua=new $APP.I(null,"quote?","quote?",-1114029317);hua=new $APP.I(null,"cr+lf","cr+lf",486534798);$APP.V3=new $APP.I(null,"toImageButtonOptions","toImageButtonOptions",-347346271);$APP.W3=new $APP.I(null,"y","y",-1757859776);$APP.X3=new $APP.I(null,"scale","scale",-230427353);$APP.Y3=new $APP.I(null,"editable","editable",1930280326);iua=new $APP.I(null,"responsive","responsive",-1606632318);$APP.N3=new $APP.I(null,"download-event","download-event",577445774);$APP.od("plotly");var jua=$APP.pn(521);$APP.Z3=new $APP.l(null,2,[$APP.U3,"\n",hua,"\r\n"],null);$APP.kua=[":newline must be one of [",$APP.Pm(",",$APP.vl($APP.Z3)),"]"].join("");var bua;$APP.$3=jua.default;$APP.nq(S3,function(a){var b=$APP.G(a,0,null);a=$APP.G(a,1,null);var c=document.createElement("a");c.href=b;c.download=a;document.body.appendChild(c);c.click();document.body.removeChild(c);a=window.URL.revokeObjectURL;return a.j?a.j(b):a.call(null,b)});
$APP.Bq(O3,function(a,b){a=$APP.N(a);a=$APP.H.g(a,$APP.Ct);$APP.G(b,0,null);var c=$APP.G(b,1,null),d=$APP.G(b,2,null);b=$APP.G(b,3,null);b=new Blob(new $APP.T(null,1,5,$APP.V,[b],null),$APP.ap(new $APP.l(null,1,[$APP.X,$APP.m(d)?d:"text/plain"],null)));d=window.URL.createObjectURL;b=d.j?d.j(b):d.call(null,b);return new $APP.l(null,2,[$APP.Ct,a,S3,new $APP.T(null,2,5,$APP.V,[b,c],null)],null)});
bua=new $APP.l(null,4,["width",857.1,"height",1E3,"path","m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z","transform","matrix(1 0 0 -1 0 850)"],
null);$APP.a4=new $APP.l(null,7,[$APP.V3,new $APP.l(null,4,[$APP.ps,"png",$APP.ut,560,$APP.os,960,$APP.X3,2],null),$APP.Q3,new $APP.T(null,1,5,$APP.V,[$APP.P3($APP.O)],null),$APP.R3,"hover",$APP.Y3,!1,eua,!1,iua,!0,fua,"en"],null);$APP.nd.setLoaded(void 0);
}).call(this);