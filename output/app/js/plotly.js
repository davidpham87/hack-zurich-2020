(function(){
shadow$provide[519]=function(lb,ma,Ab,Da){function b(){if("function"!==typeof WeakMap)return null;var h=new WeakMap;b=function(){return h};return h}function D(h){"@babel/helpers - typeof";D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(q){return typeof q}:function(q){return q&&"function"===typeof Symbol&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q};return D(h)}function G(h,q){for(var t=0;t<q.length;t++){var v=q[t];v.enumerable=v.enumerable||!1;v.configurable=
!0;"value"in v&&(v.writable=!0);Object.defineProperty(h,v.key,v)}}function r(h,q,t){q&&G(h.prototype,q);t&&G(h,t);return h}function n(h,q){if("function"!==typeof q&&null!==q)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(q&&q.prototype,{constructor:{value:h,writable:!0,configurable:!0}});q&&p(h,q)}function p(h,q){p=Object.setPrototypeOf||function(t,v){t.__proto__=v;return t};return p(h,q)}function k(h){var q=e();return function(){var t=f(h);if(q){var v=
f(this).constructor;t=Reflect.construct(t,arguments,v)}else t=t.apply(this,arguments);t=!t||"object"!==D(t)&&"function"!==typeof t?a(this):t;return t}}function a(h){if(void 0===h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function e(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(h){return!1}}
function f(h){f=Object.setPrototypeOf?Object.getPrototypeOf:function(q){return q.__proto__||Object.getPrototypeOf(q)};return f(h)}Object.defineProperty(Da,"__esModule",{value:!0});Da["default"]=function(h){var q=function(t){function v(A){if(!(this instanceof v))throw new TypeError("Cannot call a class as a function");A=w.call(this,A);A.p=Promise.resolve();A.resizeHandler=null;A.handlers={};A.syncWindowResize=A.syncWindowResize.bind(a(A));A.syncEventHandlers=A.syncEventHandlers.bind(a(A));A.attachUpdateEvents=
A.attachUpdateEvents.bind(a(A));A.getRef=A.getRef.bind(a(A));A.handleUpdate=A.handleUpdate.bind(a(A));A.figureCallback=A.figureCallback.bind(a(A));A.updatePlotly=A.updatePlotly.bind(a(A));return A}n(v,t);var w=k(v);r(v,[{key:"updatePlotly",value:function(A,z,y){var B=this;this.p=this.p.then(function(){if(!B.unmounting){if(!B.el)throw Error("Missing element reference");return h.react(B.el,{data:B.props.data,layout:B.props.layout,config:B.props.config,frames:B.props.frames})}}).then(function(){B.unmounting||
(B.syncWindowResize(A),B.syncEventHandlers(),B.figureCallback(z),y&&B.attachUpdateEvents())})["catch"](function(C){if(B.props.onError)B.props.onError(C)})}},{key:"componentDidMount",value:function(){this.unmounting=!1;this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(A){this.unmounting=!1;var z=A.frames&&A.frames.length?A.frames.length:0,y=this.props.frames&&this.props.frames.length?this.props.frames.length:0,B=void 0!==A.revision,C=A.revision!==this.props.revision;
(A.layout!==this.props.layout||A.data!==this.props.data||A.config!==this.props.config||y!==z||B&&(!B||C))&&this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0;this.figureCallback(this.props.onPurge);this.resizeHandler&&g&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null);this.removeUpdateEvents();h.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var A=this;this.el&&this.el.removeListener&&d.forEach(function(z){A.el.on(z,
A.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var A=this;this.el&&this.el.removeListener&&d.forEach(function(z){A.el.removeListener(z,A.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(A){if("function"===typeof A){var z=this.el;A({data:z.data,layout:z.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(A){var z=this;g&&(this.props.useResizeHandler&&
!this.resizeHandler?(this.resizeHandler=function(){return h.Plots.resize(z.el)},window.addEventListener("resize",this.resizeHandler),A&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(A){this.el=A;this.props.debug&&g&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var A=this;c.forEach(function(z){var y=A.props["on"+z],B=A.handlers[z],C=!!B;y&&!C?
A.addEventHandler(z,y):!y&&C?A.removeEventHandler(z):y&&C&&y!==B&&(A.removeEventHandler(z),A.addEventHandler(z,y))})}},{key:"addEventHandler",value:function(A,z){this.handlers[A]=z;this.el.on(this.getPlotlyEventName(A),this.handlers[A])}},{key:"removeEventHandler",value:function(A){this.el.removeListener(this.getPlotlyEventName(A),this.handlers[A]);delete this.handlers[A]}},{key:"getPlotlyEventName",value:function(A){return"plotly_"+A.toLowerCase()}},{key:"render",value:function(){return l["default"].createElement("div",
{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]);return v}(l.Component);q.propTypes={data:m["default"].arrayOf(m["default"].object),config:m["default"].object,layout:m["default"].object,frames:m["default"].arrayOf(m["default"].object),revision:m["default"].number,onInitialized:m["default"].func,onPurge:m["default"].func,onError:m["default"].func,onUpdate:m["default"].func,debug:m["default"].bool,style:m["default"].object,className:m["default"].string,
useResizeHandler:m["default"].bool,divId:m["default"].string};c.forEach(function(t){q.propTypes["on"+t]=m["default"].func});q.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}};return q};var l=function(h){if(h&&h.__esModule)return h;if(null===h||"object"!==D(h)&&"function"!==typeof h)return{"default":h};var q=b();if(q&&q.has(h))return q.get(h);var t={},v=Object.defineProperty&&Object.getOwnPropertyDescriptor,w;for(w in h)if(Object.prototype.hasOwnProperty.call(h,
w)){var A=v?Object.getOwnPropertyDescriptor(h,w):null;A&&(A.get||A.set)?Object.defineProperty(t,w,A):t[w]=h[w]}t["default"]=h;q&&q.set(h,t);return t}(ma(5)),m=function(h){return h&&h.__esModule?h:{"default":h}}(ma(11)),c="AfterExport AfterPlot Animated AnimatingFrame AnimationInterrupted AutoSize BeforeExport ButtonClicked Click ClickAnnotation Deselect DoubleClick Framework Hover LegendClick LegendDoubleClick Relayout Relayouting Restyle Redraw Selected Selecting SliderChange SliderEnd SliderStart SunburstClick Transitioning TransitionInterrupted Unhover".split(" "),
d="plotly_restyle plotly_redraw plotly_relayout plotly_relayouting plotly_doubleclick plotly_animated plotly_sunburstclick".split(" "),g="undefined"!==typeof window};
shadow$provide[520]=function(lb,ma,Ab,Da){(function(b){"object"===typeof Da&&"undefined"!==typeof Ab?Ab.exports=b():"function"===typeof define&&define.amd?define([],b):("undefined"!==typeof window?window:"undefined"!==typeof lb?lb:"undefined"!==typeof self?self:this).Plotly=b()})(function(){return function(){function b(D,G,r){function n(a,e){if(!G[a]){if(!D[a]){var f="function"==typeof ma&&ma;if(!e&&f)return f(a,!0);if(p)return p(a,!0);e=Error("Cannot find module '"+a+"'");throw e.code="MODULE_NOT_FOUND",
e;}e=G[a]={exports:{}};D[a][0].call(e.exports,function(l){return n(D[a][1][l]||l)},e,e.exports,b,D,G,r)}return G[a].exports}for(var p="function"==typeof ma&&ma,k=0;k<r.length;k++)n(r[k]);return n}return b}()({1:[function(b,D,G){b=b("../src/lib");D={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;",
"X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;",
"X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;",
"X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover\x3e:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;",
"X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;",
"X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;",
"X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;",
"X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans', verdana, arial, sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;",
"Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var r in D)G=r.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier"),b.addStyleRule(G,D[r])},{"../src/lib":749}],2:[function(b,D,G){D.exports=b("../src/transforms/aggregate")},{"../src/transforms/aggregate":1332}],3:[function(b,D,G){D.exports=
b("../src/traces/bar")},{"../src/traces/bar":898}],4:[function(b,D,G){D.exports=b("../src/traces/barpolar")},{"../src/traces/barpolar":911}],5:[function(b,D,G){D.exports=b("../src/traces/box")},{"../src/traces/box":921}],6:[function(b,D,G){D.exports=b("../src/components/calendars")},{"../src/components/calendars":613}],7:[function(b,D,G){D.exports=b("../src/traces/candlestick")},{"../src/traces/candlestick":930}],8:[function(b,D,G){D.exports=b("../src/traces/carpet")},{"../src/traces/carpet":949}],
9:[function(b,D,G){D.exports=b("../src/traces/choropleth")},{"../src/traces/choropleth":963}],10:[function(b,D,G){D.exports=b("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":970}],11:[function(b,D,G){D.exports=b("../src/traces/cone")},{"../src/traces/cone":976}],12:[function(b,D,G){D.exports=b("../src/traces/contour")},{"../src/traces/contour":991}],13:[function(b,D,G){D.exports=b("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":1002}],14:[function(b,D,G){D.exports=
b("../src/core")},{"../src/core":726}],15:[function(b,D,G){D.exports=b("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":1010}],16:[function(b,D,G){D.exports=b("../src/transforms/filter")},{"../src/transforms/filter":1333}],17:[function(b,D,G){D.exports=b("../src/traces/funnel")},{"../src/traces/funnel":1020}],18:[function(b,D,G){D.exports=b("../src/traces/funnelarea")},{"../src/traces/funnelarea":1029}],19:[function(b,D,G){D.exports=b("../src/transforms/groupby")},{"../src/transforms/groupby":1334}],
20:[function(b,D,G){D.exports=b("../src/traces/heatmap")},{"../src/traces/heatmap":1042}],21:[function(b,D,G){D.exports=b("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":1052}],22:[function(b,D,G){D.exports=b("../src/traces/histogram")},{"../src/traces/histogram":1064}],23:[function(b,D,G){D.exports=b("../src/traces/histogram2d")},{"../src/traces/histogram2d":1070}],24:[function(b,D,G){D.exports=b("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":1074}],25:[function(b,
D,G){D.exports=b("../src/traces/image")},{"../src/traces/image":1081}],26:[function(b,D,G){G=b("./core");G.register([b("./bar"),b("./box"),b("./heatmap"),b("./histogram"),b("./histogram2d"),b("./histogram2dcontour"),b("./contour"),b("./scatterternary"),b("./violin"),b("./funnel"),b("./waterfall"),b("./image"),b("./pie"),b("./sunburst"),b("./treemap"),b("./funnelarea"),b("./scatter3d"),b("./surface"),b("./isosurface"),b("./volume"),b("./mesh3d"),b("./cone"),b("./streamtube"),b("./scattergeo"),b("./choropleth"),
b("./scattergl"),b("./splom"),b("./pointcloud"),b("./heatmapgl"),b("./parcoords"),b("./parcats"),b("./scattermapbox"),b("./choroplethmapbox"),b("./densitymapbox"),b("./sankey"),b("./indicator"),b("./table"),b("./carpet"),b("./scattercarpet"),b("./contourcarpet"),b("./ohlc"),b("./candlestick"),b("./scatterpolar"),b("./scatterpolargl"),b("./barpolar")]);G.register([b("./aggregate"),b("./filter"),b("./groupby"),b("./sort")]);G.register([b("./calendars")]);D.exports=G},{"./aggregate":2,"./bar":3,"./barpolar":4,
"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./image":25,"./indicator":27,"./isosurface":28,"./mesh3d":29,"./ohlc":30,"./parcats":31,"./parcoords":32,"./pie":33,"./pointcloud":34,"./sankey":35,"./scatter3d":36,"./scattercarpet":37,
"./scattergeo":38,"./scattergl":39,"./scattermapbox":40,"./scatterpolar":41,"./scatterpolargl":42,"./scatterternary":43,"./sort":44,"./splom":45,"./streamtube":46,"./sunburst":47,"./surface":48,"./table":49,"./treemap":50,"./violin":51,"./volume":52,"./waterfall":53}],27:[function(b,D,G){D.exports=b("../src/traces/indicator")},{"../src/traces/indicator":1089}],28:[function(b,D,G){D.exports=b("../src/traces/isosurface")},{"../src/traces/isosurface":1095}],29:[function(b,D,G){D.exports=b("../src/traces/mesh3d")},
{"../src/traces/mesh3d":1100}],30:[function(b,D,G){D.exports=b("../src/traces/ohlc")},{"../src/traces/ohlc":1105}],31:[function(b,D,G){D.exports=b("../src/traces/parcats")},{"../src/traces/parcats":1114}],32:[function(b,D,G){D.exports=b("../src/traces/parcoords")},{"../src/traces/parcoords":1124}],33:[function(b,D,G){D.exports=b("../src/traces/pie")},{"../src/traces/pie":1135}],34:[function(b,D,G){D.exports=b("../src/traces/pointcloud")},{"../src/traces/pointcloud":1144}],35:[function(b,D,G){D.exports=
b("../src/traces/sankey")},{"../src/traces/sankey":1150}],36:[function(b,D,G){D.exports=b("../src/traces/scatter3d")},{"../src/traces/scatter3d":1187}],37:[function(b,D,G){D.exports=b("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":1194}],38:[function(b,D,G){D.exports=b("../src/traces/scattergeo")},{"../src/traces/scattergeo":1202}],39:[function(b,D,G){D.exports=b("../src/traces/scattergl")},{"../src/traces/scattergl":1215}],40:[function(b,D,G){D.exports=b("../src/traces/scattermapbox")},
{"../src/traces/scattermapbox":1225}],41:[function(b,D,G){D.exports=b("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1233}],42:[function(b,D,G){D.exports=b("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1240}],43:[function(b,D,G){D.exports=b("../src/traces/scatterternary")},{"../src/traces/scatterternary":1248}],44:[function(b,D,G){D.exports=b("../src/transforms/sort")},{"../src/transforms/sort":1336}],45:[function(b,D,G){D.exports=b("../src/traces/splom")},{"../src/traces/splom":1257}],
46:[function(b,D,G){D.exports=b("../src/traces/streamtube")},{"../src/traces/streamtube":1265}],47:[function(b,D,G){D.exports=b("../src/traces/sunburst")},{"../src/traces/sunburst":1273}],48:[function(b,D,G){D.exports=b("../src/traces/surface")},{"../src/traces/surface":1282}],49:[function(b,D,G){D.exports=b("../src/traces/table")},{"../src/traces/table":1290}],50:[function(b,D,G){D.exports=b("../src/traces/treemap")},{"../src/traces/treemap":1299}],51:[function(b,D,G){D.exports=b("../src/traces/violin")},
{"../src/traces/violin":1311}],52:[function(b,D,G){D.exports=b("../src/traces/volume")},{"../src/traces/volume":1319}],53:[function(b,D,G){D.exports=b("../src/traces/waterfall")},{"../src/traces/waterfall":1327}],54:[function(b,D,G){function r(e,f){this._controllerNames=Object.keys(e);this._controllerList=this._controllerNames.map(function(l){return e[l]});this._mode=f;this._active=e[f];this._active||(this._mode="turntable",this._active=e.turntable);this.modes=this._controllerNames;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}D.exports=function(e){e=e||{};var f=e.eye||[0,0,1],l=e.center||[0,0,0],m=e.up||[0,1,0],c=e.distanceLimits||[0,Infinity];e=e.mode||"turntable";var d=n(),g=p(),h=k();d.setDistanceLimits(c[0],c[1]);d.lookAt(0,f,l,m);g.setDistanceLimits(c[0],c[1]);g.lookAt(0,f,l,m);h.setDistanceLimits(c[0],c[1]);h.lookAt(0,
f,l,m);return new r({turntable:d,orbit:g,matrix:h},e)};var n=b("turntable-camera-controller"),p=b("orbit-camera-controller"),k=b("matrix-camera-controller"),a=r.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(e){for(var f=e[0],l=[],m=0;m<e[1];++m)l.push("a"+m);e="var cc\x3dthis._controllerList;for(var i\x3d0;i\x3ccc.length;++i){cc[i]."+e[0]+"("+l.join()+")}";a[f]=Function.apply(null,l.concat(e))});
a.recalcMatrix=function(e){this._active.recalcMatrix(e)};a.getDistance=function(e){return this._active.getDistance(e)};a.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)};a.lastT=function(){return this._active.lastT()};a.setMode=function(e){if(e!==this._mode){var f=this._controllerNames.indexOf(e);if(!(0>f)){var l=this._active;f=this._controllerList[f];var m=Math.max(l.lastT(),f.lastT());l.recalcMatrix(m);f.setMatrix(m,l.computedMatrix);this._active=f;this._mode=e;this.computedMatrix=
this._active.computedMatrix;this.computedEye=this._active.computedEye;this.computedUp=this._active.computedUp;this.computedCenter=this._active.computedCenter;this.computedRadius=this._active.computedRadius}}};a.getMode=function(){return this._mode}},{"matrix-camera-controller":454,"orbit-camera-controller":475,"turntable-camera-controller":553}],55:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?n(G,b("d3-array"),b("d3-collection"),b("d3-shape"),b("elementary-circuits-directed-graph")):
n(r.d3=r.d3||{},r.d3,r.d3,r.d3,null)})(this,function(r,n,p,k,a){function e(ka){return ka.target.depth}function f(ka,qa){return ka.sourceLinks.length?ka.depth:qa-1}function l(ka){return function(){return ka}}function m(ka,qa){return d(ka.source,qa.source)||ka.index-qa.index}function c(ka,qa){return d(ka.target,qa.target)||ka.index-qa.index}function d(ka,qa){return ka.partOfCycle===qa.partOfCycle?ka.y0-qa.y0:"top"===ka.circularLinkType||"bottom"===qa.circularLinkType?-1:1}function g(ka){return ka.value}
function h(ka){return(ka.y0+ka.y1)/2}function q(ka){return h(ka.source)}function t(ka){return h(ka.target)}function v(ka){return ka.index}function w(ka){return ka.nodes}function A(ka){return ka.links}function z(ka,qa){ka=ka.get(qa);if(!ka)throw Error("missing: "+qa);return ka}function y(ka,qa,pa){var oa=0;if(null===pa){var ja=[];for(qa=0;qa<ka.links.length;qa++){var ra=ka.links[qa],ha=ra.source.index;ra=ra.target.index;ja[ha]||(ja[ha]=[]);ja[ra]||(ja[ra]=[]);-1===ja[ha].indexOf(ra)&&ja[ha].push(ra)}ja=
a(ja);ja.sort(function(ua,na){return ua.length-na.length});var la={};for(qa=0;qa<ja.length;qa++)ha=ja[qa].slice(-2),la[ha[0]]||(la[ha[0]]={}),la[ha[0]][ha[1]]=!0;ka.links.forEach(function(ua){var na=ua.target.index,wa=ua.source.index;na===wa||la[wa]&&la[wa][na]?(ua.circular=!0,ua.circularLinkID=oa,oa+=1):ua.circular=!1})}else ka.links.forEach(function(ua){ua.source[pa]<ua.target[pa]?ua.circular=!1:(ua.circular=!0,ua.circularLinkID=oa,oa+=1)})}function B(ka,qa){var pa=0,oa=0;ka.links.forEach(function(ja){ja.circular&&
(ja.circularLinkType=ja.source.circularLinkType||ja.target.circularLinkType?ja.source.circularLinkType?ja.source.circularLinkType:ja.target.circularLinkType:pa<oa?"top":"bottom","top"==ja.circularLinkType?pa+=1:oa+=1,ka.nodes.forEach(function(ra){if(qa(ra)==qa(ja.source)||qa(ra)==qa(ja.target))ra.circularLinkType=ja.circularLinkType}))});ka.links.forEach(function(ja){ja.circular&&(ja.source.circularLinkType==ja.target.circularLinkType&&(ja.circularLinkType=ja.source.circularLinkType),ea(ja,qa)&&(ja.circularLinkType=
ja.source.circularLinkType))})}function C(ka){return Math.atan(Math.abs(ka.target.x0-ka.source.x1)/Math.abs(ka.y1-ka.y0))}function u(ka,qa){var pa=0;ka.sourceLinks.forEach(function(ja){pa=ja.circular&&!ea(ja,qa)?pa+1:pa});var oa=0;ka.targetLinks.forEach(function(ja){oa=ja.circular&&!ea(ja,qa)?oa+1:oa});return pa+oa}function F(ka){var qa=0;ka.source.sourceLinks.forEach(function(oa){qa=oa.circular?qa+1:qa});var pa=0;ka.target.targetLinks.forEach(function(oa){pa=oa.circular?pa+1:pa});return 1<qa||1<
pa?!1:!0}function H(ka,qa,pa){ka.sort(I);ka.forEach(function(oa,ja){var ra=0;if(!ea(oa,pa)||!F(oa)){var ha=0;for(ha;ha<ja;ha++){var la=ka[ja];var ua=ka[ha];la=la.source.column<ua.target.column?!1:la.target.column>ua.source.column?!1:!0;la&&(la=ka[ha].circularPathData.verticalBuffer+ka[ha].width/2+qa,ra=la>ra?la:ra)}}oa.circularPathData.verticalBuffer=ra+oa.width/2});return ka}function J(ka,qa,pa,oa){var ja=n.min(ka.links,function(ha){return ha.source.y0});ka.links.forEach(function(ha){ha.circular&&
(ha.circularPathData={})});var ra=ka.links.filter(function(ha){return"top"==ha.circularLinkType});H(ra,qa,oa);ra=ka.links.filter(function(ha){return"bottom"==ha.circularLinkType});H(ra,qa,oa);ka.links.forEach(function(ha){if(ha.circular){ha.circularPathData.arcRadius=ha.width+10;ha.circularPathData.leftNodeBuffer=5;ha.circularPathData.rightNodeBuffer=5;ha.circularPathData.sourceWidth=ha.source.x1-ha.source.x0;ha.circularPathData.sourceX=ha.source.x0+ha.circularPathData.sourceWidth;ha.circularPathData.targetX=
ha.target.x0;ha.circularPathData.sourceY=ha.y0;ha.circularPathData.targetY=ha.y1;if(ea(ha,oa)&&F(ha))ha.circularPathData.leftSmallArcRadius=10+ha.width/2,ha.circularPathData.leftLargeArcRadius=10+ha.width/2,ha.circularPathData.rightSmallArcRadius=10+ha.width/2,ha.circularPathData.rightLargeArcRadius=10+ha.width/2,"bottom"==ha.circularLinkType?(ha.circularPathData.verticalFullExtent=ha.source.y1+25+ha.circularPathData.verticalBuffer,ha.circularPathData.verticalLeftInnerExtent=ha.circularPathData.verticalFullExtent-
ha.circularPathData.leftLargeArcRadius,ha.circularPathData.verticalRightInnerExtent=ha.circularPathData.verticalFullExtent-ha.circularPathData.rightLargeArcRadius):(ha.circularPathData.verticalFullExtent=ha.source.y0-25-ha.circularPathData.verticalBuffer,ha.circularPathData.verticalLeftInnerExtent=ha.circularPathData.verticalFullExtent+ha.circularPathData.leftLargeArcRadius,ha.circularPathData.verticalRightInnerExtent=ha.circularPathData.verticalFullExtent+ha.circularPathData.rightLargeArcRadius);
else{var la=ha.source.column,ua=ha.circularLinkType,na=ka.links.filter(function(Ca){return Ca.source.column==la&&Ca.circularLinkType==ua});"bottom"==ha.circularLinkType?na.sort(E):na.sort(M);var wa=0;na.forEach(function(Ca,Fa){Ca.circularLinkID==ha.circularLinkID&&(ha.circularPathData.leftSmallArcRadius=10+ha.width/2+wa,ha.circularPathData.leftLargeArcRadius=10+ha.width/2+Fa*qa+wa);wa+=Ca.width});la=ha.target.column;na=ka.links.filter(function(Ca){return Ca.target.column==la&&Ca.circularLinkType==
ua});"bottom"==ha.circularLinkType?na.sort(P):na.sort(L);wa=0;na.forEach(function(Ca,Fa){Ca.circularLinkID==ha.circularLinkID&&(ha.circularPathData.rightSmallArcRadius=10+ha.width/2+wa,ha.circularPathData.rightLargeArcRadius=10+ha.width/2+Fa*qa+wa);wa+=Ca.width});"bottom"==ha.circularLinkType?(ha.circularPathData.verticalFullExtent=Math.max(pa,ha.source.y1,ha.target.y1)+25+ha.circularPathData.verticalBuffer,ha.circularPathData.verticalLeftInnerExtent=ha.circularPathData.verticalFullExtent-ha.circularPathData.leftLargeArcRadius,
ha.circularPathData.verticalRightInnerExtent=ha.circularPathData.verticalFullExtent-ha.circularPathData.rightLargeArcRadius):(ha.circularPathData.verticalFullExtent=ja-25-ha.circularPathData.verticalBuffer,ha.circularPathData.verticalLeftInnerExtent=ha.circularPathData.verticalFullExtent+ha.circularPathData.leftLargeArcRadius,ha.circularPathData.verticalRightInnerExtent=ha.circularPathData.verticalFullExtent+ha.circularPathData.rightLargeArcRadius)}ha.circularPathData.leftInnerExtent=ha.circularPathData.sourceX+
ha.circularPathData.leftNodeBuffer;ha.circularPathData.rightInnerExtent=ha.circularPathData.targetX-ha.circularPathData.rightNodeBuffer;ha.circularPathData.leftFullExtent=ha.circularPathData.sourceX+ha.circularPathData.leftLargeArcRadius+ha.circularPathData.leftNodeBuffer;ha.circularPathData.rightFullExtent=ha.circularPathData.targetX-ha.circularPathData.rightLargeArcRadius-ha.circularPathData.rightNodeBuffer}ha.circular?ha.path="top"==ha.circularLinkType?"M"+ha.circularPathData.sourceX+" "+ha.circularPathData.sourceY+
" L"+ha.circularPathData.leftInnerExtent+" "+ha.circularPathData.sourceY+" A"+ha.circularPathData.leftLargeArcRadius+" "+ha.circularPathData.leftSmallArcRadius+" 0 0 0 "+ha.circularPathData.leftFullExtent+" "+(ha.circularPathData.sourceY-ha.circularPathData.leftSmallArcRadius)+" L"+ha.circularPathData.leftFullExtent+" "+ha.circularPathData.verticalLeftInnerExtent+" A"+ha.circularPathData.leftLargeArcRadius+" "+ha.circularPathData.leftLargeArcRadius+" 0 0 0 "+ha.circularPathData.leftInnerExtent+" "+
ha.circularPathData.verticalFullExtent+" L"+ha.circularPathData.rightInnerExtent+" "+ha.circularPathData.verticalFullExtent+" A"+ha.circularPathData.rightLargeArcRadius+" "+ha.circularPathData.rightLargeArcRadius+" 0 0 0 "+ha.circularPathData.rightFullExtent+" "+ha.circularPathData.verticalRightInnerExtent+" L"+ha.circularPathData.rightFullExtent+" "+(ha.circularPathData.targetY-ha.circularPathData.rightSmallArcRadius)+" A"+ha.circularPathData.rightLargeArcRadius+" "+ha.circularPathData.rightSmallArcRadius+
" 0 0 0 "+ha.circularPathData.rightInnerExtent+" "+ha.circularPathData.targetY+" L"+ha.circularPathData.targetX+" "+ha.circularPathData.targetY:"M"+ha.circularPathData.sourceX+" "+ha.circularPathData.sourceY+" L"+ha.circularPathData.leftInnerExtent+" "+ha.circularPathData.sourceY+" A"+ha.circularPathData.leftLargeArcRadius+" "+ha.circularPathData.leftSmallArcRadius+" 0 0 1 "+ha.circularPathData.leftFullExtent+" "+(ha.circularPathData.sourceY+ha.circularPathData.leftSmallArcRadius)+" L"+ha.circularPathData.leftFullExtent+
" "+ha.circularPathData.verticalLeftInnerExtent+" A"+ha.circularPathData.leftLargeArcRadius+" "+ha.circularPathData.leftLargeArcRadius+" 0 0 1 "+ha.circularPathData.leftInnerExtent+" "+ha.circularPathData.verticalFullExtent+" L"+ha.circularPathData.rightInnerExtent+" "+ha.circularPathData.verticalFullExtent+" A"+ha.circularPathData.rightLargeArcRadius+" "+ha.circularPathData.rightLargeArcRadius+" 0 0 1 "+ha.circularPathData.rightFullExtent+" "+ha.circularPathData.verticalRightInnerExtent+" L"+ha.circularPathData.rightFullExtent+
" "+(ha.circularPathData.targetY+ha.circularPathData.rightSmallArcRadius)+" A"+ha.circularPathData.rightLargeArcRadius+" "+ha.circularPathData.rightSmallArcRadius+" 0 0 1 "+ha.circularPathData.rightInnerExtent+" "+ha.circularPathData.targetY+" L"+ha.circularPathData.targetX+" "+ha.circularPathData.targetY:(na=k.linkHorizontal().source(function(Ca){return[Ca.source.x0+(Ca.source.x1-Ca.source.x0),Ca.y0]}).target(function(Ca){return[Ca.target.x0,Ca.y1]}),ha.path=na(ha))})}function I(ka,qa){return N(ka)==
N(qa)?"bottom"==ka.circularLinkType?E(ka,qa):M(ka,qa):N(qa)-N(ka)}function M(ka,qa){return ka.y0-qa.y0}function E(ka,qa){return qa.y0-ka.y0}function L(ka,qa){return ka.y1-qa.y1}function P(ka,qa){return qa.y1-ka.y1}function N(ka){return ka.target.column-ka.source.column}function Q(ka,qa){var pa=C(ka);qa=(qa.target.x0-qa.source.x1)/Math.tan(pa);return"up"==Y(ka)?ka.y1+qa:ka.y1-qa}function O(ka,qa){var pa=C(ka);qa=(qa.target.x0-qa.source.x1)/Math.tan(pa);return"up"==Y(ka)?ka.y1-qa:ka.y1+qa}function T(ka,
qa,pa,oa){ka.links.forEach(function(ja){if(!ja.circular&&1<ja.target.column-ja.source.column){var ra=ja.source.column+1,ha=ja.target.column-1,la=1,ua=ha-ra+1;for(la=1;ra<=ha;ra++,la++)ka.nodes.forEach(function(na){if(na.column==ra){var wa=la/(ua+1),Ca=Math.pow(1-wa,3)*ja.y0+3*wa*Math.pow(1-wa,2)*ja.y0+3*Math.pow(wa,2)*(1-wa)*ja.y1+Math.pow(wa,3)*ja.y1;wa=Ca-ja.width/2;Ca+=ja.width/2;if(wa>na.y0&&wa<na.y1){var Fa=na.y1-wa+10;Fa="bottom"==na.circularLinkType?Fa:-Fa;na=V(na,Fa,qa,pa);ka.nodes.forEach(function(Xa){oa(Xa)!=
oa(na)&&Xa.column==na.column&&(na.y0>Xa.y0&&na.y0<Xa.y1||na.y1>Xa.y0&&na.y1<Xa.y1||na.y0<Xa.y0&&na.y1>Xa.y1)&&V(Xa,Fa,qa,pa)})}else Ca>na.y0&&Ca<na.y1?(Fa=Ca-na.y0+10,na=V(na,Fa,qa,pa),ka.nodes.forEach(function(Xa){oa(Xa)!=oa(na)&&Xa.column==na.column&&Xa.y0<na.y1&&Xa.y1>na.y1&&V(Xa,Fa,qa,pa)})):wa<na.y0&&Ca>na.y1&&(Fa=Ca-na.y0+10,na=V(na,Fa,qa,pa),ka.nodes.forEach(function(Xa){oa(Xa)!=oa(na)&&Xa.column==na.column&&Xa.y0<na.y1&&Xa.y1>na.y1&&V(Xa,Fa,qa,pa)}))}})}})}function V(ka,qa,pa,oa){ka.y0+qa>=
pa&&ka.y1+qa<=oa&&(ka.y0+=qa,ka.y1+=qa,ka.targetLinks.forEach(function(ja){ja.y1+=qa}),ka.sourceLinks.forEach(function(ja){ja.y0+=qa}));return ka}function Z(ka,qa,pa,oa){ka.nodes.forEach(function(ja){oa&&ja.y+(ja.y1-ja.y0)>qa&&(ja.y-=ja.y+(ja.y1-ja.y0)-qa);var ra=ka.links.filter(function(ua){return pa(ua.source)==pa(ja)}),ha=ra.length;1<ha&&ra.sort(function(ua,na){if(!ua.circular&&!na.circular)if(ua.target.column!=na.target.column&&Y(ua)==Y(na)){if(ua.target.column>na.target.column)return na=O(na,
ua),ua.y1-na;if(na.target.column>ua.target.column)return O(ua,na)-na.y1}else return ua.y1-na.y1;if(ua.circular&&!na.circular)return"top"==ua.circularLinkType?-1:1;if(na.circular&&!ua.circular)return"top"==na.circularLinkType?1:-1;if(ua.circular&&na.circular)return ua.circularLinkType===na.circularLinkType&&"top"==ua.circularLinkType?ua.target.column===na.target.column?ua.target.y1-na.target.y1:na.target.column-ua.target.column:ua.circularLinkType===na.circularLinkType&&"bottom"==ua.circularLinkType?
ua.target.column===na.target.column?na.target.y1-ua.target.y1:ua.target.column-na.target.column:"top"==ua.circularLinkType?-1:1});var la=ja.y0;ra.forEach(function(ua){ua.y0=la+ua.width/2;la+=ua.width});ra.forEach(function(ua,na){if("bottom"==ua.circularLinkType){na+=1;var wa=0;for(na;na<ha;na++)wa+=ra[na].width;ua.y0=ja.y1-wa-ua.width/2}})})}function aa(ka,qa,pa){ka.nodes.forEach(function(oa){var ja=ka.links.filter(function(la){return pa(la.target)==pa(oa)}),ra=ja.length;1<ra&&ja.sort(function(la,
ua){if(!la.circular&&!ua.circular)if(la.source.column!=ua.source.column&&Y(la)==Y(ua)){if(ua.source.column<la.source.column)return ua=Q(ua,la),la.y0-ua;if(la.source.column<ua.source.column)return Q(la,ua)-ua.y0}else return la.y0-ua.y0;if(la.circular&&!ua.circular)return"top"==la.circularLinkType?-1:1;if(ua.circular&&!la.circular)return"top"==ua.circularLinkType?1:-1;if(la.circular&&ua.circular)return la.circularLinkType===ua.circularLinkType&&"top"==la.circularLinkType?la.source.column===ua.source.column?
la.source.y1-ua.source.y1:la.source.column-ua.source.column:la.circularLinkType===ua.circularLinkType&&"bottom"==la.circularLinkType?la.source.column===ua.source.column?la.source.y1-ua.source.y1:ua.source.column-la.source.column:"top"==la.circularLinkType?-1:1});var ha=oa.y0;ja.forEach(function(la){la.y1=ha+la.width/2;ha+=la.width});ja.forEach(function(la,ua){if("bottom"==la.circularLinkType){ua+=1;var na=0;for(ua;ua<ra;ua++)na+=ja[ua].width;la.y1=oa.y1-na-la.width/2}})})}function Y(ka){return 0<
ka.y0-ka.y1?"up":"down"}function ea(ka,qa){return qa(ka.source)==qa(ka.target)}function ca(ka,qa,pa){var oa=ka.nodes;ka=ka.links;var ja=!1,ra=!1;ka.forEach(function(na){"top"==na.circularLinkType?ja=!0:"bottom"==na.circularLinkType&&(ra=!0)});if(0==ja||0==ra){var ha=n.min(oa,function(na){return na.y0}),la=n.max(oa,function(na){return na.y1}),ua=(pa-qa)/(la-ha);oa.forEach(function(na){var wa=(na.y1-na.y0)*ua;na.y0=(na.y0-ha)*ua;na.y1=na.y0+wa});ka.forEach(function(na){na.y0=(na.y0-ha)*ua;na.y1=(na.y1-
ha)*ua;na.width*=ua})}}a=a&&a.hasOwnProperty("default")?a["default"]:a;var ba="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(ka){return typeof ka}:function(ka){return ka&&"function"===typeof Symbol&&ka.constructor===Symbol&&ka!==Symbol.prototype?"symbol":typeof ka};r.sankeyCircular=function(){function ka(){var Na={nodes:bb.apply(null,arguments),links:La.apply(null,arguments)};qa(Na);y(Na,ab,Ia);pa(Na);ra(Na);B(Na,ab);ha(Na,kb,ab);la(Na);for(var Ta=0;4>Ta;Ta++)Z(Na,Ca,ab),aa(Na,
Ca,ab),T(Na,na,Ca,ab),Z(Na,Ca,ab),aa(Na,Ca,ab);ca(Na,na,Ca);J(Na,mb,Ca,ab);return Na}function qa(Na){Na.nodes.forEach(function(hb,Ya){hb.index=Ya;hb.sourceLinks=[];hb.targetLinks=[]});var Ta=p.map(Na.nodes,ab);Na.links.forEach(function(hb,Ya){hb.index=Ya;Ya=hb.source;var Ga=hb.target;"object"!==("undefined"===typeof Ya?"undefined":ba(Ya))&&(Ya=hb.source=z(Ta,Ya));"object"!==("undefined"===typeof Ga?"undefined":ba(Ga))&&(Ga=hb.target=z(Ta,Ga));Ya.sourceLinks.push(hb);Ga.targetLinks.push(hb)});return Na}
function pa(Na){Na.nodes.forEach(function(Ta){Ta.partOfCycle=!1;Ta.value=Math.max(n.sum(Ta.sourceLinks,g),n.sum(Ta.targetLinks,g));Ta.sourceLinks.forEach(function(hb){hb.circular&&(Ta.partOfCycle=!0,Ta.circularLinkType=hb.circularLinkType)});Ta.targetLinks.forEach(function(hb){hb.circular&&(Ta.partOfCycle=!0,Ta.circularLinkType=hb.circularLinkType)})})}function oa(Na){var Ta=0,hb=0,Ya=0,Ga=0,Pa=n.max(Na.nodes,function(Va){return Va.column});Na.links.forEach(function(Va){Va.circular&&("top"==Va.circularLinkType?
Ta+=Va.width:hb+=Va.width,0==Va.target.column&&(Ga+=Va.width),Va.source.column==Pa&&(Ya+=Va.width))});Ta=0<Ta?Ta+25+10:Ta;hb=0<hb?hb+25+10:hb;Ya=0<Ya?Ya+25+10:Ya;Ga=0<Ga?Ga+25+10:Ga;return{top:Ta,bottom:hb,left:Ga,right:Ya}}function ja(Na,Ta){var hb=n.max(Na.nodes,function(Pa){return Pa.column}),Ya=wa-ua,Ga=Ca-na;Ya/=Ya+Ta.right+Ta.left;Ga/=Ga+Ta.top+Ta.bottom;ua=ua*Ya+Ta.left;wa=0==Ta.right?wa:wa*Ya;na=na*Ga+Ta.top;Ca*=Ga;Na.nodes.forEach(function(Pa){Pa.x0=ua+(wa-ua-Fa)/hb*Pa.column;Pa.x1=Pa.x0+
Fa});return Ga}function ra(Na){var Ta;var hb=Na.nodes;var Ya=[];for(Ta=0;hb.length;++Ta,hb=Ya,Ya=[])hb.forEach(function(Ga){Ga.depth=Ta;Ga.sourceLinks.forEach(function(Pa){0>Ya.indexOf(Pa.target)&&!Pa.circular&&Ya.push(Pa.target)})});hb=Na.nodes;Ya=[];for(Ta=0;hb.length;++Ta,hb=Ya,Ya=[])hb.forEach(function(Ga){Ga.height=Ta;Ga.targetLinks.forEach(function(Pa){0>Ya.indexOf(Pa.source)&&!Pa.circular&&Ya.push(Pa.source)})});Na.nodes.forEach(function(Ga){Ga.column=Math.floor(gb.call(null,Ga,Ta))})}function ha(Na,
Ta,hb){function Ya(va,Ea){var Qa=Pa.length;Pa.forEach(function($a){var eb=$a.length,pb=$a[0].depth;$a.forEach(function(Za){if((Za.sourceLinks.length||Za.targetLinks.length)&&!(Za.partOfCycle&&0<u(Za,Ea)))if(0==pb&&1==eb){var nb=Za.y1-Za.y0;Za.y0=Ca/2-nb/2;Za.y1=Ca/2+nb/2}else if(pb==Qa-1&&1==eb)nb=Za.y1-Za.y0,Za.y0=Ca/2-nb/2,Za.y1=Ca/2+nb/2;else{nb=n.mean(Za.sourceLinks,t);var sb=n.mean(Za.targetLinks,q);nb=((nb&&sb?(nb+sb)/2:nb||sb)-h(Za))*va;Za.y0+=nb;Za.y1+=nb}})})}function Ga(){Pa.forEach(function(va){var Ea=
na,Qa=va.length,$a;va.sort(d);for($a=0;$a<Qa;++$a){var eb=va[$a];var pb=Ea-eb.y0;0<pb&&(eb.y0+=pb,eb.y1+=pb);Ea=eb.y1+Xa}pb=Ea-Xa-Ca;if(0<pb)for(Ea=eb.y0-=pb,eb.y1-=pb,$a=Qa-2;0<=$a;--$a)eb=va[$a],pb=eb.y1+Xa-Ea,0<pb&&(eb.y0-=pb,eb.y1-=pb),Ea=eb.y0})}var Pa=p.nest().key(function(va){return va.column}).sortKeys(n.ascending).entries(Na.nodes).map(function(va){return va.values});(function(va){if(ya){var Ea=Infinity;Pa.forEach(function(pb){pb=Ca*ya/(pb.length+1);Ea=pb<Ea?pb:Ea});Xa=Ea}var Qa=n.min(Pa,
function(pb){return(Ca-na-(pb.length-1)*Xa)/n.sum(pb,g)});Qa*=.3;Na.links.forEach(function(pb){pb.width=pb.value*Qa});var $a=oa(Na),eb=ja(Na,$a);Qa*=eb;Na.links.forEach(function(pb){pb.width=pb.value*Qa});Pa.forEach(function(pb){var Za=pb.length;pb.forEach(function(nb,sb){nb.depth==Pa.length-1&&1==Za?nb.y0=Ca/2-nb.value*Qa:0==nb.depth&&1==Za?nb.y0=Ca/2-nb.value*Qa:nb.partOfCycle?0==u(nb,va)?nb.y0=Ca/2+sb:nb.y0="top"==nb.circularLinkType?na+sb:Ca-nb.value*Qa-sb:nb.y0=0==$a.top||0==$a.bottom?(Ca-na)/
Za*sb:(Ca-na)/2-Za/2+sb;nb.y1=nb.y0+nb.value*Qa})})})(hb);Ga();for(var Va=1;0<Ta;--Ta)Ya(Va*=.99,hb),Ga()}function la(Na){Na.nodes.forEach(function(Ta){Ta.sourceLinks.sort(c);Ta.targetLinks.sort(m)});Na.nodes.forEach(function(Ta){var hb=Ta.y0,Ya=hb,Ga=Ta.y1,Pa=Ga;Ta.sourceLinks.forEach(function(Va){Va.circular?(Va.y0=Ga-Va.width/2,Ga-=Va.width):(Va.y0=hb+Va.width/2,hb+=Va.width)});Ta.targetLinks.forEach(function(Va){Va.circular?(Va.y1=Pa-Va.width/2,Pa-=Va.width):(Va.y1=Ya+Va.width/2,Ya+=Va.width)})})}
var ua=0,na=0,wa=1,Ca=1,Fa=24,Xa,ab=v,gb=f,bb=w,La=A,kb=32,mb=2,ya,Ia=null;ka.nodeId=function(Na){return arguments.length?(ab="function"===typeof Na?Na:l(Na),ka):ab};ka.nodeAlign=function(Na){return arguments.length?(gb="function"===typeof Na?Na:l(Na),ka):gb};ka.nodeWidth=function(Na){return arguments.length?(Fa=+Na,ka):Fa};ka.nodePadding=function(Na){return arguments.length?(Xa=+Na,ka):Xa};ka.nodes=function(Na){return arguments.length?(bb="function"===typeof Na?Na:l(Na),ka):bb};ka.links=function(Na){return arguments.length?
(La="function"===typeof Na?Na:l(Na),ka):La};ka.size=function(Na){return arguments.length?(ua=na=0,wa=+Na[0],Ca=+Na[1],ka):[wa-ua,Ca-na]};ka.extent=function(Na){return arguments.length?(ua=+Na[0][0],wa=+Na[1][0],na=+Na[0][1],Ca=+Na[1][1],ka):[[ua,na],[wa,Ca]]};ka.iterations=function(Na){return arguments.length?(kb=+Na,ka):kb};ka.circularLinkGap=function(Na){return arguments.length?(mb=+Na,ka):mb};ka.nodePaddingRatio=function(Na){return arguments.length?(ya=+Na,ka):ya};ka.sortNodes=function(Na){return arguments.length?
(Ia=Na,ka):Ia};ka.update=function(Na){B(Na,ab);la(Na);Na.links.forEach(function(Ta){Ta.circular&&(Ta.circularLinkType=Ta.y0+Ta.y1<Ca?"top":"bottom",Ta.source.circularLinkType=Ta.circularLinkType,Ta.target.circularLinkType=Ta.circularLinkType)});Z(Na,Ca,ab,!1);aa(Na,Ca,ab);J(Na,mb,Ca,ab);return Na};return ka};r.sankeyCenter=function(ka){return ka.targetLinks.length?ka.depth:ka.sourceLinks.length?n.min(ka.sourceLinks,e)-1:0};r.sankeyLeft=function(ka){return ka.depth};r.sankeyRight=function(ka,qa){return qa-
1-ka.height};r.sankeyJustify=f;Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165,"elementary-circuits-directed-graph":179}],56:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?n(G,b("d3-array"),b("d3-collection"),b("d3-shape")):n(r.d3=r.d3||{},r.d3,r.d3,r.d3)})(this,function(r,n,p,k){function a(B){return B.target.depth}function e(B,C){return B.sourceLinks.length?B.depth:C-1}function f(B){return function(){return B}}function l(B,
C){return c(B.source,C.source)||B.index-C.index}function m(B,C){return c(B.target,C.target)||B.index-C.index}function c(B,C){return B.y0-C.y0}function d(B){return B.value}function g(B){return(B.y0+B.y1)/2}function h(B){return g(B.source)*B.value}function q(B){return g(B.target)*B.value}function t(B){return B.index}function v(B){return B.nodes}function w(B){return B.links}function A(B,C){B=B.get(C);if(!B)throw Error("missing: "+C);return B}function z(B){return[B.source.x1,B.y0]}function y(B){return[B.target.x0,
B.y1]}r.sankey=function(){function B(){var Y={nodes:T.apply(null,arguments),links:V.apply(null,arguments)};C(Y);u(Y);F(Y);H(Y,Z);J(Y);return Y}function C(Y){Y.nodes.forEach(function(ca,ba){ca.index=ba;ca.sourceLinks=[];ca.targetLinks=[]});var ea=p.map(Y.nodes,Q);Y.links.forEach(function(ca,ba){ca.index=ba;ba=ca.source;var ka=ca.target;"object"!==typeof ba&&(ba=ca.source=A(ea,ba));"object"!==typeof ka&&(ka=ca.target=A(ea,ka));ba.sourceLinks.push(ca);ka.targetLinks.push(ca)})}function u(Y){Y.nodes.forEach(function(ea){ea.value=
Math.max(n.sum(ea.sourceLinks,d),n.sum(ea.targetLinks,d))})}function F(Y){var ea;var ca=Y.nodes;var ba=[];for(ea=0;ca.length;++ea,ca=ba,ba=[])ca.forEach(function(qa){qa.depth=ea;qa.sourceLinks.forEach(function(pa){0>ba.indexOf(pa.target)&&ba.push(pa.target)})});ca=Y.nodes;ba=[];for(ea=0;ca.length;++ea,ca=ba,ba=[])ca.forEach(function(qa){qa.height=ea;qa.targetLinks.forEach(function(pa){0>ba.indexOf(pa.source)&&ba.push(pa.source)})});var ka=(E-I-P)/(ea-1);Y.nodes.forEach(function(qa){qa.x1=(qa.x0=I+
Math.max(0,Math.min(ea-1,Math.floor(O.call(null,qa,ea))))*ka)+P})}function H(Y){function ea(oa){ka.forEach(function(ja){ja.forEach(function(ra){if(ra.targetLinks.length){var ha=(n.sum(ra.targetLinks,h)/n.sum(ra.targetLinks,d)-g(ra))*oa;ra.y0+=ha;ra.y1+=ha}})})}function ca(oa){ka.slice().reverse().forEach(function(ja){ja.forEach(function(ra){if(ra.sourceLinks.length){var ha=(n.sum(ra.sourceLinks,q)/n.sum(ra.sourceLinks,d)-g(ra))*oa;ra.y0+=ha;ra.y1+=ha}})})}function ba(){ka.forEach(function(oa){var ja=
M,ra=oa.length,ha;oa.sort(c);for(ha=0;ha<ra;++ha){var la=oa[ha];var ua=ja-la.y0;0<ua&&(la.y0+=ua,la.y1+=ua);ja=la.y1+N}ua=ja-N-L;if(0<ua)for(ja=la.y0-=ua,la.y1-=ua,ha=ra-2;0<=ha;--ha)la=oa[ha],ua=la.y1+N-ja,0<ua&&(la.y0-=ua,la.y1-=ua),ja=la.y0})}var ka=p.nest().key(function(oa){return oa.x0}).sortKeys(n.ascending).entries(Y.nodes).map(function(oa){return oa.values});(function(){var oa=n.max(ka,function(ra){return ra.length});oa=aa*(L-M)/(oa-1);N>oa&&(N=oa);var ja=n.min(ka,function(ra){return(L-M-
(ra.length-1)*N)/n.sum(ra,d)});ka.forEach(function(ra){ra.forEach(function(ha,la){ha.y1=(ha.y0=la)+ha.value*ja})});Y.links.forEach(function(ra){ra.width=ra.value*ja})})();ba();for(var qa=1,pa=Z;0<pa;--pa)ca(qa*=.99),ba(),ea(qa),ba()}function J(Y){Y.nodes.forEach(function(ea){ea.sourceLinks.sort(m);ea.targetLinks.sort(l)});Y.nodes.forEach(function(ea){var ca=ea.y0,ba=ca;ea.sourceLinks.forEach(function(ka){ka.y0=ca+ka.width/2;ca+=ka.width});ea.targetLinks.forEach(function(ka){ka.y1=ba+ka.width/2;ba+=
ka.width})})}var I=0,M=0,E=1,L=1,P=24,N=8,Q=t,O=e,T=v,V=w,Z=32,aa=2/3;B.update=function(Y){J(Y);return Y};B.nodeId=function(Y){return arguments.length?(Q="function"===typeof Y?Y:f(Y),B):Q};B.nodeAlign=function(Y){return arguments.length?(O="function"===typeof Y?Y:f(Y),B):O};B.nodeWidth=function(Y){return arguments.length?(P=+Y,B):P};B.nodePadding=function(Y){return arguments.length?(N=+Y,B):N};B.nodes=function(Y){return arguments.length?(T="function"===typeof Y?Y:f(Y),B):T};B.links=function(Y){return arguments.length?
(V="function"===typeof Y?Y:f(Y),B):V};B.size=function(Y){return arguments.length?(I=M=0,E=+Y[0],L=+Y[1],B):[E-I,L-M]};B.extent=function(Y){return arguments.length?(I=+Y[0][0],E=+Y[1][0],M=+Y[0][1],L=+Y[1][1],B):[[I,M],[E,L]]};B.iterations=function(Y){return arguments.length?(Z=+Y,B):Z};return B};r.sankeyCenter=function(B){return B.targetLinks.length?B.depth:B.sourceLinks.length?n.min(B.sourceLinks,a)-1:0};r.sankeyLeft=function(B){return B.depth};r.sankeyRight=function(B,C){return C-1-B.height};r.sankeyJustify=
e;r.sankeyLinkHorizontal=function(){return k.linkHorizontal().source(z).target(y)};Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-array":156,"d3-collection":157,"d3-shape":165}],57:[function(b,D,G){D.exports=b("./quad")},{"./quad":58}],58:[function(b,D,G){function r(g,h){var q=h[0],t=h[1],v=1/(h[2]-q);h=1/(h[3]-t);for(var w=Array(g.length),A=0,z=g.length/2;A<z;A++)w[2*A]=p((g[2*A]-q)*v,0,1),w[2*A+1]=p((g[2*A+1]-t)*h,0,1);return w}var n=b("binary-search-bounds"),p=b("clamp"),k=b("parse-rect"),
a=b("array-bounds"),e=b("pick-by-alias"),f=b("defined"),l=b("flatten-vertex-data"),m=b("is-obj"),c=b("dtype"),d=b("math-log2");D.exports=function(g,h){function q(E,L,P,N,Q,O){if(!N.length)return null;var T=C[Q]||(C[Q]=[]),V=F[Q]||(F[Q]=[]),Z=u[Q]||(u[Q]=[]),aa=T.length;Q++;if(Q>w||1073741824<O){for(E=0;E<N.length;E++)T.push(N[E]),V.push(O),Z.push(null,null,null,null);return aa}T.push(N[0]);V.push(O);if(1>=N.length)return Z.push(null,null,null,null),aa;T=.5*P;V=E+T;P=L+T;for(var Y=[],ea=[],ca=[],ba=
[],ka=1,qa=N.length;ka<qa;ka++){var pa=N[ka],oa=z[2*pa+1];z[2*pa]<V?oa<P?Y.push(pa):ea.push(pa):oa<P?ca.push(pa):ba.push(pa)}O<<=2;Z.push(q(E,L,T,Y,Q,O),q(E,P,T,ea,Q,O+1),q(V,L,T,ca,Q,O+2),q(V,P,T,ba,Q,O+3));return aa}function t(E,L,P,N,Q){for(var O=[],T=0;T<Q;T++){var V=F[T],Z=H[T][0],aa=v(E,L,T),Y=v(P,N,T);aa=n.ge(V,aa);V=n.gt(V,Y,aa,V.length-1);O[T]=[aa+Z,V+Z]}return O}function v(E,L,P){for(var N=1,Q=.5,O=.5,T=.5,V=0;V<P;V++)N<<=2,N+=E<Q?L<O?0:1:L<O?2:3,T*=.5,Q+=E<Q?-T:T,O+=L<O?-T:T;return N}h||
(h={});g=l(g,"float64");h=e(h,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var w=f(h.maxDepth,255),A=f(h.bounds,a(g,2));A[0]===A[2]&&A[2]++;A[1]===A[3]&&A[3]++;var z=r(g,A),y=g.length>>>1;h.dtype||(h.dtype="array");if("string"===typeof h.dtype)var B=new (c(h.dtype))(y);else h.dtype&&(B=h.dtype,Array.isArray(B)&&(B.length=y));for(h=0;h<y;++h)B[h]=h;var C=[],u=[],F=[],H=[];q(0,0,1,B,0,
1);for(h=y=0;h<C.length;h++){var J=C[h];if(B.set)B.set(J,y);else for(var I=0,M=J.length;I<M;I++)B[I+y]=J[I];J=y+C[h].length;H[h]=[y,J];y=J}B.range=function(){function E(qa,pa,oa,ja,ra,ha){if(null!==ra&&null!==ha&&!(Z>qa+oa||aa>pa+oa||Y<qa||ea<pa||ja>=ca||ra===ha)){var la=C[ja];void 0===ha&&(ha=la.length);for(var ua=ra;ua<ha;ua++){var na=la[ua],wa=g[2*na],Ca=g[2*na+1];wa>=Q&&wa<=T&&Ca>=O&&Ca<=V&&ka.push(na)}wa=u[ja];ha=wa[4*ra];la=wa[4*ra+1];ua=wa[4*ra+2];na=wa[4*ra+3];a:{Ca=null;for(var Fa=0;null===
Ca;)if(Ca=wa[4*(ra+1)+Fa],Fa++,Fa>wa.length){ra=null;break a}ra=Ca}oa*=.5;ja+=1;E(qa,pa,oa,ja,ha,la||ua||na||ra);E(qa,pa+oa,oa,ja,la,ua||na||ra);E(qa+oa,pa,oa,ja,ua,na||ra);E(qa+oa,pa+oa,oa,ja,na,ra)}}for(var L=[],P=arguments.length;P--;)L[P]=arguments[P];if(m(L[L.length-1])){var N=L.pop();L.length||null==N.x&&null==N.l&&null==N.left||(L=[N],P={});P=e(N,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else P={};L.length||
(L=A);L=k.apply(void 0,L);L=[Math.min(L.x,L.x+L.width),Math.min(L.y,L.y+L.height),Math.max(L.x,L.x+L.width),Math.max(L.y,L.y+L.height)];var Q=L[0],O=L[1],T=L[2],V=L[3];L=r([Q,O,T,V],A);var Z=L[0],aa=L[1],Y=L[2],ea=L[3],ca=f(P.level,C.length);if(null!=P.d){if("number"===typeof P.d)var ba=[P.d,P.d];else P.d.length&&(ba=P.d);ca=Math.min(Math.max(Math.ceil(-d(Math.abs(ba[0])/(A[2]-A[0]))),Math.ceil(-d(Math.abs(ba[1])/(A[3]-A[1])))),ca)}ca=Math.min(ca,C.length);if(P.lod)return t(Z,aa,Y,ea,ca);var ka=[];
E(0,0,1,0,0,1);return ka};return B}},{"array-bounds":70,"binary-search-bounds":96,clamp:120,defined:170,dtype:175,"flatten-vertex-data":244,"is-obj":442,"math-log2":453,"parse-rect":478,"pick-by-alias":485}],59:[function(b,D,G){function r(k){var a=0;if(k&&0<k.length){a+=Math.abs(n(k[0]));for(var e=1;e<k.length;e++)a-=Math.abs(n(k[e]))}return a}function n(k){var a,e=0,f=k.length;if(2<f){for(a=0;a<f;a++){if(a===f-2){var l=f-2;var m=f-1;var c=0}else a===f-1?(l=f-1,m=0,c=1):(l=a,m=a+1,c=a+2);l=k[l];m=
k[m];c=k[c];e+=(c[0]*Math.PI/180-l[0]*Math.PI/180)*Math.sin(m[1]*Math.PI/180)}e=40680631590769*e/2}return e}Object.defineProperty(G,"__esModule",{value:!0});var p=b("@turf/meta");G.default=function(k){return p.geomReduce(k,function(a,e){a:{var f=0,l;switch(e.type){case "Polygon":e=r(e.coordinates);break a;case "MultiPolygon":for(l=0;l<e.coordinates.length;l++)f+=r(e.coordinates[l]);e=f;break a}e=0}return a+e},0)}},{"@turf/meta":63}],60:[function(b,D,G){Object.defineProperty(G,"__esModule",{value:!0});
var r=b("@turf/meta");G.default=function(n){var p=[Infinity,Infinity,-Infinity,-Infinity];r.coordEach(n,function(k){p[0]>k[0]&&(p[0]=k[0]);p[1]>k[1]&&(p[1]=k[1]);p[2]<k[0]&&(p[2]=k[0]);p[3]<k[1]&&(p[3]=k[1])});return p}},{"@turf/meta":63}],61:[function(b,D,G){Object.defineProperty(G,"__esModule",{value:!0});var r=b("@turf/meta"),n=b("@turf/helpers");G.default=function(p,k){void 0===k&&(k={});var a=0,e=0,f=0;r.coordEach(p,function(l){a+=l[0];e+=l[1];f++});return n.point([a/f,e/f],k.properties)}},{"@turf/helpers":62,
"@turf/meta":63}],62:[function(b,D,G){function r(h,q,t){void 0===t&&(t={});var v={type:"Feature"};if(0===t.id||t.id)v.id=t.id;t.bbox&&(v.bbox=t.bbox);v.properties=q||{};v.geometry=h;return v}function n(h,q,t){void 0===t&&(t={});return r({type:"Point",coordinates:h},q,t)}function p(h,q,t){void 0===t&&(t={});for(var v=0;v<h.length;v++){var w=h[v];if(4>w.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var A=0;A<w[w.length-1].length;A++)if(w[w.length-1][A]!==w[0][A])throw Error("First and last Position are not equivalent.");
}return r({type:"Polygon",coordinates:h},q,t)}function k(h,q,t){void 0===t&&(t={});if(2>h.length)throw Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:h},q,t)}function a(h,q){void 0===q&&(q={});var t={type:"FeatureCollection"};q.id&&(t.id=q.id);q.bbox&&(t.bbox=q.bbox);t.features=h;return t}function e(h,q,t){void 0===t&&(t={});return r({type:"MultiLineString",coordinates:h},q,t)}function f(h,q,t){void 0===t&&(t={});return r({type:"MultiPoint",
coordinates:h},q,t)}function l(h,q,t){void 0===t&&(t={});return r({type:"MultiPolygon",coordinates:h},q,t)}function m(h,q){void 0===q&&(q="kilometers");var t=G.factors[q];if(!t)throw Error(q+" units is invalid");return h*t}function c(h,q){void 0===q&&(q="kilometers");var t=G.factors[q];if(!t)throw Error(q+" units is invalid");return h/t}function d(h){return h%(2*Math.PI)*180/Math.PI}function g(h){return!isNaN(h)&&null!==h&&!Array.isArray(h)&&!/^\s*$/.test(h)}Object.defineProperty(G,"__esModule",{value:!0});
G.earthRadius=6371008.8;G.factors={centimeters:100*G.earthRadius,centimetres:100*G.earthRadius,degrees:G.earthRadius/111325,feet:3.28084*G.earthRadius,inches:39.37*G.earthRadius,kilometers:G.earthRadius/1E3,kilometres:G.earthRadius/1E3,meters:G.earthRadius,metres:G.earthRadius,miles:G.earthRadius/1609.344,millimeters:1E3*G.earthRadius,millimetres:1E3*G.earthRadius,nauticalmiles:G.earthRadius/1852,radians:1,yards:G.earthRadius/1.0936};G.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,
feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1E3,millimetres:1E3,nauticalmiles:1/1852,radians:1/G.earthRadius,yards:1/1.0936};G.areaFactors={acres:2.47105E-4,centimeters:1E4,centimetres:1E4,feet:10.763910417,inches:1550.003100006,kilometers:1E-6,kilometres:1E-6,meters:1,metres:1,miles:3.86E-7,millimeters:1E6,millimetres:1E6,yards:1.195990046};G.feature=r;G.geometry=function(h,q,t){switch(h){case "Point":return n(q).geometry;case "LineString":return k(q).geometry;
case "Polygon":return p(q).geometry;case "MultiPoint":return f(q).geometry;case "MultiLineString":return e(q).geometry;case "MultiPolygon":return l(q).geometry;default:throw Error(h+" is invalid");}};G.point=n;G.points=function(h,q,t){void 0===t&&(t={});return a(h.map(function(v){return n(v,q)}),t)};G.polygon=p;G.polygons=function(h,q,t){void 0===t&&(t={});return a(h.map(function(v){return p(v,q)}),t)};G.lineString=k;G.lineStrings=function(h,q,t){void 0===t&&(t={});return a(h.map(function(v){return k(v,
q)}),t)};G.featureCollection=a;G.multiLineString=e;G.multiPoint=f;G.multiPolygon=l;G.geometryCollection=function(h,q,t){void 0===t&&(t={});return r({type:"GeometryCollection",geometries:h},q,t)};G.round=function(h,q){void 0===q&&(q=0);if(q&&!(0<=q))throw Error("precision must be a positive number");q=Math.pow(10,q||0);return Math.round(h*q)/q};G.radiansToLength=m;G.lengthToRadians=c;G.lengthToDegrees=function(h,q){return d(c(h,q))};G.bearingToAzimuth=function(h){h%=360;0>h&&(h+=360);return h};G.radiansToDegrees=
d;G.degreesToRadians=function(h){return h%360*Math.PI/180};G.convertLength=function(h,q,t){void 0===q&&(q="kilometers");void 0===t&&(t="kilometers");if(!(0<=h))throw Error("length must be a positive number");return m(c(h,q),t)};G.convertArea=function(h,q,t){void 0===q&&(q="meters");void 0===t&&(t="kilometers");if(!(0<=h))throw Error("area must be a positive number");q=G.areaFactors[q];if(!q)throw Error("invalid original units");t=G.areaFactors[t];if(!t)throw Error("invalid final units");return h/
q*t};G.isNumber=g;G.isObject=function(h){return!!h&&h.constructor===Object};G.validateBBox=function(h){if(!h)throw Error("bbox is required");if(!Array.isArray(h))throw Error("bbox must be an Array");if(4!==h.length&&6!==h.length)throw Error("bbox must be an Array of 4 or 6 numbers");h.forEach(function(q){if(!g(q))throw Error("bbox must only contain numbers");})};G.validateId=function(h){if(!h)throw Error("id is required");if(-1===["string","number"].indexOf(typeof h))throw Error("id must be a number or a string");
};G.radians2degrees=function(){throw Error("method has been renamed to `radiansToDegrees`");};G.degrees2radians=function(){throw Error("method has been renamed to `degreesToRadians`");};G.distanceToDegrees=function(){throw Error("method has been renamed to `lengthToDegrees`");};G.distanceToRadians=function(){throw Error("method has been renamed to `lengthToRadians`");};G.radiansToDistance=function(){throw Error("method has been renamed to `radiansToLength`");};G.bearingToAngle=function(){throw Error("method has been renamed to `bearingToAzimuth`");
};G.convertDistance=function(){throw Error("method has been renamed to `convertLength`");}},{}],63:[function(b,D,G){function r(m,c,d){if(null!==m){var g,h=0,q;var t=m.type;for(var v="FeatureCollection"===t,w="Feature"===t,A=v?m.features.length:1,z=0;z<A;z++){var y=(q=(g=v?m.features[z].geometry:w?m.geometry:m)?"GeometryCollection"===g.type:!1)?g.geometries.length:1;for(var B=0;B<y;B++){var C=0,u=0;var F=q?g.geometries[B]:g;if(null!==F){var H=F.coordinates;var J=F.type;var I=!d||"Polygon"!==J&&"MultiPolygon"!==
J?0:1;switch(J){case null:break;case "Point":if(!1===c(H,h,z,C,u))return!1;h++;break;case "LineString":case "MultiPoint":for(t=0;t<H.length;t++){if(!1===c(H[t],h,z,C,u))return!1;h++;"MultiPoint"===J&&C++}break;case "Polygon":case "MultiLineString":for(t=0;t<H.length;t++){for(F=0;F<H[t].length-I;F++){if(!1===c(H[t][F],h,z,C,u))return!1;h++}"MultiLineString"===J&&C++;"Polygon"===J&&u++}break;case "MultiPolygon":for(t=0;t<H.length;t++){for(F=u=0;F<H[t].length;F++){for(J=0;J<H[t][F].length-I;J++){if(!1===
c(H[t][F][J],h,z,C,u))return!1;h++}u++}C++}break;case "GeometryCollection":for(t=0;t<F.geometries.length;t++)if(!1===r(F.geometries[t],c,d))return!1;break;default:throw Error("Unknown Geometry Type");}}}}}}function n(m,c){var d;switch(m.type){case "FeatureCollection":for(d=0;d<m.features.length&&!1!==c(m.features[d].properties,d);d++);break;case "Feature":c(m.properties,0)}}function p(m,c){if("Feature"===m.type)c(m,0);else if("FeatureCollection"===m.type)for(var d=0;d<m.features.length&&!1!==c(m.features[d],
d);d++);}function k(m,c){var d,g,h,q,t=0,v="FeatureCollection"===m.type,w="Feature"===m.type,A=v?m.features.length:1;for(d=0;d<A;d++){var z=v?m.features[d].geometry:w?m.geometry:m;var y=v?m.features[d].properties:w?m.properties:{};var B=v?m.features[d].bbox:w?m.bbox:void 0;var C=v?m.features[d].id:w?m.id:void 0;var u=(q=z?"GeometryCollection"===z.type:!1)?z.geometries.length:1;for(h=0;h<u;h++){var F=q?z.geometries[h]:z;if(null===F){if(!1===c(null,t,y,B,C))return!1}else switch(F.type){case "Point":case "LineString":case "MultiPoint":case "Polygon":case "MultiLineString":case "MultiPolygon":if(!1===
c(F,t,y,B,C))return!1;break;case "GeometryCollection":for(g=0;g<F.geometries.length;g++)if(!1===c(F.geometries[g],t,y,B,C))return!1;break;default:throw Error("Unknown Geometry Type");}}t++}}function a(m,c){k(m,function(d,g,h,q,t){var v=null===d?null:d.type;switch(v){case null:case "Point":case "LineString":case "Polygon":if(!1===c(l.feature(d,h,{bbox:q,id:t}),g,0))return!1;return}switch(v){case "MultiPoint":var w="Point";break;case "MultiLineString":w="LineString";break;case "MultiPolygon":w="Polygon"}for(q=
0;q<d.coordinates.length;q++)if(!1===c(l.feature({type:w,coordinates:d.coordinates[q]},h),g,q))return!1})}function e(m,c){a(m,function(d,g,h){var q=0;if(d.geometry){var t=d.geometry.type;if("Point"!==t&&"MultiPoint"!==t){var v,w=0,A=0,z=0;if(!1===r(d,function(y,B,C,u,F){if(void 0===v||g>w||u>A||F>z)v=y,w=g,A=u,z=F,q=0;else{B=l.lineString([v,y],d.properties);if(!1===c(B,g,h,F,q))return!1;q++;v=y}}))return!1}}})}function f(m,c){if(!m)throw Error("geojson is required");a(m,function(d,g,h){if(null!==
d.geometry){var q=d.geometry.coordinates;switch(d.geometry.type){case "LineString":if(!1===c(d,g,h,0,0))return!1;break;case "Polygon":for(var t=0;t<q.length;t++)if(!1===c(l.lineString(q[t],d.properties),g,h,t))return!1}}})}Object.defineProperty(G,"__esModule",{value:!0});var l=b("@turf/helpers");G.coordEach=r;G.coordReduce=function(m,c,d,g){var h=d;r(m,function(q,t,v,w,A){h=0===t&&void 0===d?q:c(h,q,t,v,w,A)},g);return h};G.propEach=n;G.propReduce=function(m,c,d){var g=d;n(m,function(h,q){g=0===q&&
void 0===d?h:c(g,h,q)});return g};G.featureEach=p;G.featureReduce=function(m,c,d){var g=d;p(m,function(h,q){g=0===q&&void 0===d?h:c(g,h,q)});return g};G.coordAll=function(m){var c=[];r(m,function(d){c.push(d)});return c};G.geomEach=k;G.geomReduce=function(m,c,d){var g=d;k(m,function(h,q,t,v,w){g=0===q&&void 0===d?h:c(g,h,q,t,v,w)});return g};G.flattenEach=a;G.flattenReduce=function(m,c,d){var g=d;a(m,function(h,q,t){g=0===q&&0===t&&void 0===d?h:c(g,h,q,t)});return g};G.segmentEach=e;G.segmentReduce=
function(m,c,d){var g=d,h=!1;e(m,function(q,t,v,w,A){g=!1===h&&void 0===d?q:c(g,q,t,v,w,A);h=!0});return g};G.lineEach=f;G.lineReduce=function(m,c,d){var g=d;f(m,function(h,q,t,v){g=0===q&&void 0===d?h:c(g,h,q,t,v)});return g};G.findSegment=function(m,c){c=c||{};if(!l.isObject(c))throw Error("options is invalid");var d=c.featureIndex||0,g=c.multiFeatureIndex||0,h=c.geometryIndex||0,q=c.segmentIndex||0,t=c.properties;switch(m.type){case "FeatureCollection":0>d&&(d=m.features.length+d);t=t||m.features[d].properties;
m=m.features[d].geometry;break;case "Feature":t=t||m.properties;m=m.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");}if(null===m)return null;d=m.coordinates;switch(m.type){case "Point":case "MultiPoint":return null;case "LineString":return 0>q&&(q=d.length+q-1),l.lineString([d[q],d[q+1]],t,c);case "Polygon":return 0>h&&(h=d.length+h),0>q&&(q=d[h].length+q-1),l.lineString([d[h][q],
d[h][q+1]],t,c);case "MultiLineString":return 0>g&&(g=d.length+g),0>q&&(q=d[g].length+q-1),l.lineString([d[g][q],d[g][q+1]],t,c);case "MultiPolygon":return 0>g&&(g=d.length+g),0>h&&(h=d[g].length+h),0>q&&(q=d[g][h].length-q-1),l.lineString([d[g][h][q],d[g][h][q+1]],t,c)}throw Error("geojson is invalid");};G.findPoint=function(m,c){c=c||{};if(!l.isObject(c))throw Error("options is invalid");var d=c.featureIndex||0,g=c.multiFeatureIndex||0,h=c.geometryIndex||0,q=c.coordIndex||0,t=c.properties;switch(m.type){case "FeatureCollection":0>
d&&(d=m.features.length+d);t=t||m.features[d].properties;m=m.features[d].geometry;break;case "Feature":t=t||m.properties;m=m.geometry;break;case "Point":case "MultiPoint":return null;case "LineString":case "Polygon":case "MultiLineString":case "MultiPolygon":break;default:throw Error("geojson is invalid");}if(null===m)return null;d=m.coordinates;switch(m.type){case "Point":return l.point(d,t,c);case "MultiPoint":return 0>g&&(g=d.length+g),l.point(d[g],t,c);case "LineString":return 0>q&&(q=d.length+
q),l.point(d[q],t,c);case "Polygon":return 0>h&&(h=d.length+h),0>q&&(q=d[h].length+q),l.point(d[h][q],t,c);case "MultiLineString":return 0>g&&(g=d.length+g),0>q&&(q=d[g].length+q),l.point(d[g][q],t,c);case "MultiPolygon":return 0>g&&(g=d.length+g),0>h&&(h=d[g].length+h),0>q&&(q=d[g][h].length-q),l.point(d[g][h][q],t,c)}throw Error("geojson is invalid");}},{"@turf/helpers":62}],64:[function(b,D,G){G="undefined"===typeof WeakMap?b("weak-map"):WeakMap;var r=b("gl-buffer"),n=b("gl-vao"),p=new G;D.exports=
function(k){var a=p.get(k),e=a&&(a._triangleBuffer.handle||a._triangleBuffer.buffer);e&&k.isBuffer(e)||(e=r(k,new Float32Array([-1,-1,-1,4,4,-1])),a=n(k,[{buffer:e,type:k.FLOAT,size:2}]),a._triangleBuffer=e,p.set(k,a));a.bind();k.drawArrays(k.TRIANGLES,0,3);a.unbind()}},{"gl-buffer":258,"gl-vao":332,"weak-map":574}],65:[function(b,D,G){D.exports=function(r){var n=0,p=0,k=0,a=0;return r.map(function(e){e=e.slice();var f=e[0],l=f.toUpperCase();if(f!=l)switch(e[0]=l,f){case "a":e[6]+=k;e[7]+=a;break;
case "v":e[1]+=a;break;case "h":e[1]+=k;break;default:for(f=1;f<e.length;)e[f++]+=k,e[f++]+=a}switch(l){case "Z":k=n;a=p;break;case "H":k=e[1];break;case "V":a=e[1];break;case "M":k=n=e[1];a=p=e[2];break;default:k=e[e.length-2],a=e[e.length-1]}return e})}},{}],66:[function(b,D,G){var r=b("pad-left");D.exports=function(n,p,k){p="number"===typeof p?p:1;k=k||": ";n=n.split(/\r?\n/);var a=String(n.length+p-1).length;return n.map(function(e,f){f+=p;return r(f,a-String(f).length)+k+e}).join("\n")}},{"pad-left":476}],
67:[function(b,D,G){D.exports=function(n){var p=n.length;if(0===p)return[];if(1===p)return[0];for(var k=n[0].length,a=[n[0]],e=[0],f=1;f<p;++f){a.push(n[f]);a:{var l=a;for(var m=k,c=Array(m+1),d=0;d<l.length;++d)c[d]=l[d];for(d=0;d<=l.length;++d){for(var g=l.length;g<=m;++g){for(var h=Array(m),q=0;q<m;++q)h[q]=Math.pow(g+1-d,q);c[g]=h}if(r.apply(void 0,c)){l=!0;break a}}l=!1}if(l){if(e.push(f),e.length===k+1)break}else a.pop()}return e};var r=b("robust-orientation")},{"robust-orientation":520}],68:[function(b,
D,G){D.exports=function(p,k){return r(k).filter(function(a){for(var e=Array(a.length),f=0;f<a.length;++f)e[f]=k[a[f]];return 1>n(e)*p})};var r=b("delaunay-triangulate"),n=b("circumradius")},{circumradius:119,"delaunay-triangulate":171}],69:[function(b,D,G){D.exports=function(p,k){return n(r(p,k))};var r=b("alpha-complex"),n=b("simplicial-complex-boundary")},{"alpha-complex":68,"simplicial-complex-boundary":527}],70:[function(b,D,G){D.exports=function(r,n){if(!r||null==r.length)throw Error("Argument should be an array");
n=null==n?1:Math.floor(n);for(var p=Array(2*n),k=0;k<n;k++){for(var a=-Infinity,e=Infinity,f=k,l=r.length;f<l;f+=n)r[f]>a&&(a=r[f]),r[f]<e&&(e=r[f]);p[k]=e;p[n+k]=a}return p}},{}],71:[function(b,D,G){var r=b("array-bounds");D.exports=function(n,p,k){if(!n||null==n.length)throw Error("Argument should be an array");null==p&&(p=1);null==k&&(k=r(n,p));for(var a=0;a<p;a++){var e=k[p+a],f=k[a],l,m=n.length;if(Infinity===e&&-Infinity===f)for(l=a;l<m;l+=p)n[l]=n[l]===e?1:n[l]===f?0:.5;else if(Infinity===
e)for(l=a;l<m;l+=p)n[l]=n[l]===e?1:0;else if(-Infinity===f)for(l=a;l<m;l+=p)n[l]=n[l]===f?0:1;else for(e-=f,l=a;l<m;l+=p)isNaN(n[l])||(n[l]=0===e?.5:(n[l]-f)/e)}return n}},{"array-bounds":70}],72:[function(b,D,G){D.exports=function(r,n){var p="number"===typeof r,k="number"===typeof n;p&&!k?(n=r,r=0):p||k||(n=r=0);r|=0;n=(n|0)-r;if(0>n)throw Error("array length must be positive");p=Array(n);for(k=0;k<n;k++,r++)p[k]=r;return p}},{}],73:[function(b,D,G){(function(r){function n(H,J){if(H===J)return 0;
for(var I=H.length,M=J.length,E=0,L=Math.min(I,M);E<L;++E)if(H[E]!==J[E]){I=H[E];M=J[E];break}return I<M?-1:M<I?1:0}function p(H){return r.Buffer&&"function"===typeof r.Buffer.isBuffer?r.Buffer.isBuffer(H):!(null==H||!H._isBuffer)}function k(H){return p(H)||"function"!==typeof r.ArrayBuffer?!1:"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(H):H?H instanceof DataView||H.buffer&&H.buffer instanceof ArrayBuffer?!0:!1:!1}function a(H){if(A.isFunction(H))return B?H.name:(H=H.toString().match(u))&&
H[1]}function e(H,J){return"string"===typeof H?H.length<J?H:H.slice(0,J):H}function f(H){if(B||!A.isFunction(H))return A.inspect(H);H=a(H);return"[Function"+(H?": "+H:"")+"]"}function l(H,J,I,M,E){throw new C.AssertionError({message:I,actual:H,expected:J,operator:M,stackStartFunction:E});}function m(H,J){H||l(H,!0,J,"\x3d\x3d",C.ok)}function c(H,J,I,M){if(H===J)return!0;if(p(H)&&p(J))return 0===n(H,J);if(A.isDate(H)&&A.isDate(J))return H.getTime()===J.getTime();if(A.isRegExp(H)&&A.isRegExp(J))return H.source===
J.source&&H.global===J.global&&H.multiline===J.multiline&&H.lastIndex===J.lastIndex&&H.ignoreCase===J.ignoreCase;if(null!==H&&"object"===typeof H||null!==J&&"object"===typeof J){if(!k(H)||!k(J)||Object.prototype.toString.call(H)!==Object.prototype.toString.call(J)||H instanceof Float32Array||H instanceof Float64Array){if(p(H)!==p(J))return!1;M=M||{actual:[],expected:[]};var E=M.actual.indexOf(H);if(-1!==E&&E===M.expected.indexOf(J))return!0;M.actual.push(H);M.expected.push(J);return g(H,J,I,M)}return 0===
n(new Uint8Array(H.buffer),new Uint8Array(J.buffer))}return I?H===J:H==J}function d(H){return"[object Arguments]"==Object.prototype.toString.call(H)}function g(H,J,I,M){if(null===H||void 0===H||null===J||void 0===J)return!1;if(A.isPrimitive(H)||A.isPrimitive(J))return H===J;if(I&&Object.getPrototypeOf(H)!==Object.getPrototypeOf(J))return!1;var E=d(H),L=d(J);if(E&&!L||!E&&L)return!1;if(E)return H=y.call(H),J=y.call(J),c(H,J,I);E=F(H);var P=F(J);if(E.length!==P.length)return!1;E.sort();P.sort();for(L=
E.length-1;0<=L;L--)if(E[L]!==P[L])return!1;for(L=E.length-1;0<=L;L--)if(P=E[L],!c(H[P],J[P],I,M))return!1;return!0}function h(H,J,I){c(H,J,!0)&&l(H,J,I,"notDeepStrictEqual",h)}function q(H,J){if(!H||!J)return!1;if("[object RegExp]"==Object.prototype.toString.call(J))return J.test(H);try{if(H instanceof J)return!0}catch(I){}return Error.isPrototypeOf(J)?!1:!0===J.call({},H)}function t(H,J,I,M){if("function"!==typeof J)throw new TypeError('"block" argument must be a function');"string"===typeof I&&
(M=I,I=null);try{J()}catch(N){var E=N}J=E;M=(I&&I.name?" ("+I.name+").":".")+(M?" "+M:".");H&&!J&&l(J,I,"Missing expected exception"+M);E="string"===typeof M;var L=!H&&A.isError(J),P=!H&&J&&!I;(L&&E&&q(J,I)||P)&&l(J,I,"Got unwanted exception"+M);if(H&&J&&I&&!q(J,I)||!H&&J)throw J;}function v(H,J){H||l(H,!0,J,"\x3d\x3d",v)}var w=b("object-assign"),A=b("util/"),z=Object.prototype.hasOwnProperty,y=Array.prototype.slice,B=function(){return"foo"===function(){}.name}(),C=D.exports=m,u=/\s*function\s+([^\(\s]*)\s*/;
C.AssertionError=function(H){this.name="AssertionError";this.actual=H.actual;this.expected=H.expected;this.operator=H.operator;H.message?(this.message=H.message,this.generatedMessage=!1):(this.message=e(f(this.actual),128)+" "+this.operator+" "+e(f(this.expected),128),this.generatedMessage=!0);var J=H.stackStartFunction||l;Error.captureStackTrace?Error.captureStackTrace(this,J):(H=Error(),H.stack&&(H=H.stack,J=a(J),J=H.indexOf("\n"+J),0<=J&&(J=H.indexOf("\n",J+1),H=H.substring(J+1)),this.stack=H))};
A.inherits(C.AssertionError,Error);C.fail=l;C.ok=m;C.equal=function(H,J,I){H!=J&&l(H,J,I,"\x3d\x3d",C.equal)};C.notEqual=function(H,J,I){H==J&&l(H,J,I,"!\x3d",C.notEqual)};C.deepEqual=function(H,J,I){c(H,J,!1)||l(H,J,I,"deepEqual",C.deepEqual)};C.deepStrictEqual=function(H,J,I){c(H,J,!0)||l(H,J,I,"deepStrictEqual",C.deepStrictEqual)};C.notDeepEqual=function(H,J,I){c(H,J,!1)&&l(H,J,I,"notDeepEqual",C.notDeepEqual)};C.notDeepStrictEqual=h;C.strictEqual=function(H,J,I){H!==J&&l(H,J,I,"\x3d\x3d\x3d",
C.strictEqual)};C.notStrictEqual=function(H,J,I){H===J&&l(H,J,I,"!\x3d\x3d",C.notStrictEqual)};C.throws=function(H,J,I){t(!0,H,J,I)};C.doesNotThrow=function(H,J,I){t(!1,H,J,I)};C.ifError=function(H){if(H)throw H;};C.strict=w(v,C,{equal:C.strictEqual,deepEqual:C.deepStrictEqual,notEqual:C.notStrictEqual,notDeepEqual:C.notDeepStrictEqual});C.strict.strict=C.strict;var F=Object.keys||function(H){var J=[],I;for(I in H)z.call(H,I)&&J.push(I);return J}}).call(this,"undefined"!==typeof lb?lb:"undefined"!==
typeof self?self:"undefined"!==typeof window?window:{})},{"object-assign":473,"util/":76}],74:[function(b,D,G){D.exports="function"===typeof Object.create?function(r,n){r.super_=n;r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:function(r,n){r.super_=n;var p=function(){};p.prototype=n.prototype;r.prototype=new p;r.prototype.constructor=r}},{}],75:[function(b,D,G){D.exports=function(r){return r&&"object"===typeof r&&"function"===typeof r.copy&&
"function"===typeof r.fill&&"function"===typeof r.readUInt8}},{}],76:[function(b,D,G){(function(r,n){function p(M,E){var L={seen:[],stylize:a};3<=arguments.length&&(L.depth=arguments[2]);4<=arguments.length&&(L.colors=arguments[3]);q(E)?L.showHidden=E:E&&G._extend(L,E);w(L.showHidden)&&(L.showHidden=!1);w(L.depth)&&(L.depth=2);w(L.colors)&&(L.colors=!1);w(L.customInspect)&&(L.customInspect=!0);L.colors&&(L.stylize=k);return f(L,M,L.depth)}function k(M,E){return(E=p.styles[E])?"["+p.colors[E][0]+
"m"+M+"["+p.colors[E][1]+"m":M}function a(M,E){return M}function e(M){var E={};M.forEach(function(L,P){E[L]=!0});return E}function f(M,E,L){if(M.customInspect&&E&&C(E.inspect)&&E.inspect!==G.inspect&&(!E.constructor||E.constructor.prototype!==E)){var P=E.inspect(L,M);v(P)||(P=f(M,P,L));return P}if(P=l(M,E))return P;var N=Object.keys(E),Q=e(N);M.showHidden&&(N=Object.getOwnPropertyNames(E));if(B(E)&&(0<=N.indexOf("message")||0<=N.indexOf("description")))return m(E);if(0===N.length){if(C(E))return M.stylize("[Function"+
(E.name?": "+E.name:"")+"]","special");if(A(E))return M.stylize(RegExp.prototype.toString.call(E),"regexp");if(y(E))return M.stylize(Date.prototype.toString.call(E),"date");if(B(E))return m(E)}P="";var O=!1,T=["{","}"];h(E)&&(O=!0,T=["[","]"]);C(E)&&(P=" [Function"+(E.name?": "+E.name:"")+"]");A(E)&&(P=" "+RegExp.prototype.toString.call(E));y(E)&&(P=" "+Date.prototype.toUTCString.call(E));B(E)&&(P=" "+m(E));if(0===N.length&&(!O||0==E.length))return T[0]+P+T[1];if(0>L)return A(E)?M.stylize(RegExp.prototype.toString.call(E),
"regexp"):M.stylize("[Object]","special");M.seen.push(E);N=O?c(M,E,L,Q,N):N.map(function(V){return d(M,E,L,Q,V,O)});M.seen.pop();return g(N,P,T)}function l(M,E){if(w(E))return M.stylize("undefined","undefined");if(v(E))return E="'"+JSON.stringify(E).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",M.stylize(E,"string");if(t(E))return M.stylize(""+E,"number");if(q(E))return M.stylize(""+E,"boolean");if(null===E)return M.stylize("null","null")}function m(M){return"["+Error.prototype.toString.call(M)+
"]"}function c(M,E,L,P,N){for(var Q=[],O=0,T=E.length;O<T;++O)Object.prototype.hasOwnProperty.call(E,String(O))?Q.push(d(M,E,L,P,String(O),!0)):Q.push("");N.forEach(function(V){V.match(/^\d+$/)||Q.push(d(M,E,L,P,V,!0))});return Q}function d(M,E,L,P,N,Q){var O,T;E=Object.getOwnPropertyDescriptor(E,N)||{value:E[N]};E.get?T=E.set?M.stylize("[Getter/Setter]","special"):M.stylize("[Getter]","special"):E.set&&(T=M.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(P,N)||(O="["+N+"]");T||
(0>M.seen.indexOf(E.value)?(T=null===L?f(M,E.value,null):f(M,E.value,L-1),-1<T.indexOf("\n")&&(T=Q?T.split("\n").map(function(V){return"  "+V}).join("\n").substr(2):"\n"+T.split("\n").map(function(V){return"   "+V}).join("\n"))):T=M.stylize("[Circular]","special"));if(w(O)){if(Q&&N.match(/^\d+$/))return T;O=JSON.stringify(""+N);O.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(O=O.substr(1,O.length-2),O=M.stylize(O,"name")):(O=O.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),O=M.stylize(O,
"string"))}return O+": "+T}function g(M,E,L){var P=0;return 60<M.reduce(function(N,Q){P++;0<=Q.indexOf("\n")&&P++;return N+Q.replace(/\u001b\[\d\d?m/g,"").length+1},0)?L[0]+(""===E?"":E+"\n ")+" "+M.join(",\n  ")+" "+L[1]:L[0]+E+" "+M.join(", ")+" "+L[1]}function h(M){return Array.isArray(M)}function q(M){return"boolean"===typeof M}function t(M){return"number"===typeof M}function v(M){return"string"===typeof M}function w(M){return void 0===M}function A(M){return z(M)&&"[object RegExp]"===Object.prototype.toString.call(M)}
function z(M){return"object"===typeof M&&null!==M}function y(M){return z(M)&&"[object Date]"===Object.prototype.toString.call(M)}function B(M){return z(M)&&("[object Error]"===Object.prototype.toString.call(M)||M instanceof Error)}function C(M){return"function"===typeof M}function u(M){return 10>M?"0"+M.toString(10):M.toString(10)}var F=/%[sdj%]/g;G.format=function(M){if(!v(M)){for(var E=[],L=0;L<arguments.length;L++)E.push(p(arguments[L]));return E.join(" ")}L=1;var P=arguments,N=P.length;E=String(M).replace(F,
function(O){if("%%"===O)return"%";if(L>=N)return O;switch(O){case "%s":return String(P[L++]);case "%d":return Number(P[L++]);case "%j":try{return JSON.stringify(P[L++])}catch(T){return"[Circular]"}default:return O}});for(var Q=P[L];L<N;Q=P[++L])E=null!==Q&&z(Q)?E+(" "+p(Q)):E+(" "+Q);return E};G.deprecate=function(M,E){if(w(n.process))return function(){return G.deprecate(M,E).apply(this,arguments)};if(!0===r.noDeprecation)return M;var L=!1;return function(){if(!L){if(r.throwDeprecation)throw Error(E);
r.traceDeprecation?console.trace(E):console.error(E);L=!0}return M.apply(this,arguments)}};var H={},J;G.debuglog=function(M){w(J)&&(J=r.env.NODE_DEBUG||"");M=M.toUpperCase();if(!H[M])if((new RegExp("\\b"+M+"\\b","i")).test(J)){var E=r.pid;H[M]=function(){var L=G.format.apply(G,arguments);console.error("%s %d: %s",M,E,L)}}else H[M]=function(){};return H[M]};G.inspect=p;p.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,
39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};p.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};G.isArray=h;G.isBoolean=q;G.isNull=function(M){return null===M};G.isNullOrUndefined=function(M){return null==M};G.isNumber=t;G.isString=v;G.isSymbol=function(M){return"symbol"===typeof M};G.isUndefined=w;G.isRegExp=A;G.isObject=z;G.isDate=y;G.isError=B;G.isFunction=C;G.isPrimitive=function(M){return null===
M||"boolean"===typeof M||"number"===typeof M||"string"===typeof M||"symbol"===typeof M||"undefined"===typeof M};G.isBuffer=b("./support/isBuffer");var I="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");G.log=function(){var M=console,E=M.log;var L=new Date;var P=[u(L.getHours()),u(L.getMinutes()),u(L.getSeconds())].join(":");L=[L.getDate(),I[L.getMonth()],P].join(" ");E.call(M,"%s - %s",L,G.format.apply(G,arguments))};G.inherits=b("inherits");G._extend=function(M,E){if(!E||!z(E))return M;
for(var L=Object.keys(E),P=L.length;P--;)M[L[P]]=E[L[P]];return M}}).call(this,b("_process"),"undefined"!==typeof lb?lb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":75,_process:500,inherits:74}],77:[function(b,D,G){D.exports=function(r){return atob(r)}},{}],78:[function(b,D,G){function r(p){for(var k=0,a=0;a<p.length;++a)k+=p[a];return k}D.exports=function(p,k){for(var a=k.length,e=Array(a+1),f=0;f<a;++f){for(var l=Array(a+1),m=0;m<=a;++m)l[m]=p[m][f];
e[f]=l}e[a]=Array(a+1);for(f=0;f<=a;++f)e[a][f]=1;p=Array(a+1);for(f=0;f<a;++f)p[f]=k[f];p[a]=1;k=n(e,p);e=r(k[a+1]);0===e&&(e=1);p=Array(a+1);for(f=0;f<=a;++f)p[f]=r(k[f])/e;return p};var n=b("robust-linear-solve")},{"robust-linear-solve":519}],79:[function(b,D,G){function r(a){var e=a.length;if(0<e%4)throw Error("Invalid string. Length must be a multiple of 4");a=a.indexOf("\x3d");-1===a&&(a=e);return[a,a===e?0:4-a%4]}G.byteLength=function(a){a=r(a);var e=a[1];return 3*(a[0]+e)/4-e};G.toByteArray=
function(a){var e=r(a);var f=e[0];e=e[1];var l=new k(3*(f+e)/4-e),m=0,c=0<e?f-4:f,d;for(d=0;d<c;d+=4)f=p[a.charCodeAt(d)]<<18|p[a.charCodeAt(d+1)]<<12|p[a.charCodeAt(d+2)]<<6|p[a.charCodeAt(d+3)],l[m++]=f>>16&255,l[m++]=f>>8&255,l[m++]=f&255;2===e&&(f=p[a.charCodeAt(d)]<<2|p[a.charCodeAt(d+1)]>>4,l[m++]=f&255);1===e&&(f=p[a.charCodeAt(d)]<<10|p[a.charCodeAt(d+1)]<<4|p[a.charCodeAt(d+2)]>>2,l[m++]=f>>8&255,l[m++]=f&255);return l};G.fromByteArray=function(a){for(var e=a.length,f=e%3,l=[],m=0,c=e-f;m<
c;m+=16383){for(var d=l,g=d.push,h,q=a,t=m+16383>c?c:m+16383,v=[],w=m;w<t;w+=3)h=(q[w]<<16&16711680)+(q[w+1]<<8&65280)+(q[w+2]&255),v.push(n[h>>18&63]+n[h>>12&63]+n[h>>6&63]+n[h&63]);h=v.join("");g.call(d,h)}1===f?(a=a[e-1],l.push(n[a>>2]+n[a<<4&63]+"\x3d\x3d")):2===f&&(a=(a[e-2]<<8)+a[e-1],l.push(n[a>>10]+n[a>>4&63]+n[a<<2&63]+"\x3d"));return l.join("")};var n=[],p=[],k="undefined"!==typeof Uint8Array?Uint8Array:Array;for(b=0;64>b;++b)n[b]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b],
p["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(b)]=b;p[45]=62;p[95]=63},{}],80:[function(b,D,G){var r=b("./lib/rationalize");D.exports=function(n,p){return r(n[0].mul(p[1]).add(p[0].mul(n[1])),n[1].mul(p[1]))}},{"./lib/rationalize":90}],81:[function(b,D,G){D.exports=function(r,n){return r[0].mul(n[1]).cmp(n[0].mul(r[1]))}},{}],82:[function(b,D,G){var r=b("./lib/rationalize");D.exports=function(n,p){return r(n[0].mul(p[1]),n[1].mul(p[0]))}},{"./lib/rationalize":90}],
83:[function(b,D,G){function r(l,m){if(n(l))return m?f(l,r(m)):[l[0].clone(),l[1].clone()];var c=0;if(p(l))l=l.clone();else if("string"===typeof l)l=a(l);else{if(0===l)return[k(0),k(1)];if(l!==Math.floor(l))for(;l!==Math.floor(l);)l*=Math.pow(2,256),c-=256;l=k(l)}if(n(m))l.mul(m[1]),m=m[0].clone();else if(p(m))m=m.clone();else if("string"===typeof m)m=a(m);else if(m){if(m!==Math.floor(m))for(;m!==Math.floor(m);)m*=Math.pow(2,256),c+=256;m=k(m)}else m=k(1);0<c?l=l.ushln(c):0>c&&(m=m.ushln(-c));return e(l,
m)}var n=b("./is-rat"),p=b("./lib/is-bn"),k=b("./lib/num-to-bn"),a=b("./lib/str-to-bn"),e=b("./lib/rationalize"),f=b("./div");D.exports=r},{"./div":82,"./is-rat":84,"./lib/is-bn":88,"./lib/num-to-bn":89,"./lib/rationalize":90,"./lib/str-to-bn":91}],84:[function(b,D,G){var r=b("./lib/is-bn");D.exports=function(n){return Array.isArray(n)&&2===n.length&&r(n[0])&&r(n[1])}},{"./lib/is-bn":88}],85:[function(b,D,G){var r=b("bn.js");D.exports=function(n){return n.cmp(new r(0))}},{"bn.js":99}],86:[function(b,
D,G){var r=b("./bn-sign");D.exports=function(n){var p=n.length,k=n.words,a=0;if(1===p)a=k[0];else if(2===p)a=k[0]+67108864*k[1];else for(var e=0;e<p;e++)a+=k[e]*Math.pow(67108864,e);return r(n)*a}},{"./bn-sign":85}],87:[function(b,D,G){var r=b("double-bits"),n=b("bit-twiddle").countTrailingZeros;D.exports=function(p){var k=n(r.lo(p));if(32>k)return k;p=n(r.hi(p));return 20<p?52:p+32}},{"bit-twiddle":97,"double-bits":173}],88:[function(b,D,G){b("bn.js");D.exports=function(r){return r&&"object"===typeof r&&
!!r.words}},{"bn.js":99}],89:[function(b,D,G){var r=b("bn.js"),n=b("double-bits");D.exports=function(p){var k=n.exponent(p);return 52>k?new r(p):(new r(p*Math.pow(2,52-k))).ushln(k-52)}},{"bn.js":99,"double-bits":173}],90:[function(b,D,G){var r=b("./num-to-bn"),n=b("./bn-sign");D.exports=function(p,k){var a=n(p),e=n(k);if(0===a)return[r(0),r(1)];if(0===e)return[r(0),r(0)];0>e&&(p=p.neg(),k=k.neg());a=p.gcd(k);return a.cmpn(1)?[p.div(a),k.div(a)]:[p,k]}},{"./bn-sign":85,"./num-to-bn":89}],91:[function(b,
D,G){var r=b("bn.js");D.exports=function(n){return new r(n)}},{"bn.js":99}],92:[function(b,D,G){var r=b("./lib/rationalize");D.exports=function(n,p){return r(n[0].mul(p[0]),n[1].mul(p[1]))}},{"./lib/rationalize":90}],93:[function(b,D,G){var r=b("./lib/bn-sign");D.exports=function(n){return r(n[0])*r(n[1])}},{"./lib/bn-sign":85}],94:[function(b,D,G){var r=b("./lib/rationalize");D.exports=function(n,p){return r(n[0].mul(p[1]).sub(n[1].mul(p[0])),n[1].mul(p[1]))}},{"./lib/rationalize":90}],95:[function(b,
D,G){var r=b("./lib/bn-to-num"),n=b("./lib/ctz");D.exports=function(p){var k=p[0];p=p[1];if(0===k.cmpn(0))return 0;var a=k.abs().divmod(p.abs()),e=r(a.div);a=a.mod;k=k.negative!==p.negative?-1:1;if(0===a.cmpn(0))return k*e;if(e){var f=n(e)+4;p=r(a.ushln(f).divRound(p));return k*(e+p*Math.pow(2,-f))}e=p.bitLength()-a.bitLength()+53;p=r(a.ushln(e).divRound(p));if(1023>e)return k*p*Math.pow(2,-e);p*=Math.pow(2,-1023);return k*p*Math.pow(2,1023-e)}},{"./lib/bn-to-num":86,"./lib/ctz":87}],96:[function(b,
D,G){function r(p,k,a,e,f){p=["function ",p,"(a,l,h,",e.join(","),"){",f?"":"var i\x3d",a?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da[m]"];f?0>k.indexOf("c")?p.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):p.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):p.push(";if(",k,"){i\x3dm;");a?p.push("l\x3dm+1}else{h\x3dm-1}"):p.push("h\x3dm-1}else{l\x3dm+1}");p.push("}");f?p.push("return -1};"):p.push("return i};");return p.join("")}function n(p,
k,a,e){return(new Function([r("A","x"+p+"y",k,["y"],e),r("P","c(x,y)"+p+"0",k,["y","c"],e),"function dispatchBsearch",a,"(a,y,c,l,h){if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dvoid 0)?0:l|0,(h\x3d\x3d\x3dvoid 0)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dvoid 0)?0:c|0,(l\x3d\x3d\x3dvoid 0)?a.length-1:l|0,y)}}return dispatchBsearch",a].join("")))()}D.exports={ge:n("\x3e\x3d",!1,"GE"),gt:n("\x3e",!1,"GT"),lt:n("\x3c",!0,"LT"),le:n("\x3c\x3d",!0,"LE"),eq:n("-",!0,"EQ",!0)}},
{}],97:[function(b,D,G){function r(p){var k=32;(p&=-p)&&k--;p&65535&&(k-=16);p&16711935&&(k-=8);p&252645135&&(k-=4);p&858993459&&(k-=2);p&1431655765&&--k;return k}"use restrict";G.INT_BITS=32;G.INT_MAX=2147483647;G.INT_MIN=-2147483648;G.sign=function(p){return(0<p)-(0>p)};G.abs=function(p){var k=p>>31;return(p^k)-k};G.min=function(p,k){return k^(p^k)&-(p<k)};G.max=function(p,k){return p^(p^k)&-(p<k)};G.isPow2=function(p){return!(p&p-1)&&!!p};G.log2=function(p){var k=(65535<p)<<4;p>>>=k;var a=(255<
p)<<3;p>>>=a;k|=a;a=(15<p)<<2;p>>>=a;k|=a;a=(3<p)<<1;return k|a|p>>>a>>1};G.log10=function(p){return 1E9<=p?9:1E8<=p?8:1E7<=p?7:1E6<=p?6:1E5<=p?5:1E4<=p?4:1E3<=p?3:100<=p?2:10<=p?1:0};G.popCount=function(p){p-=p>>>1&1431655765;p=(p&858993459)+(p>>>2&858993459);return 16843009*(p+(p>>>4)&252645135)>>>24};G.countTrailingZeros=r;G.nextPow2=function(p){p+=0===p;--p;p|=p>>>1;p|=p>>>2;p|=p>>>4;p|=p>>>8;return(p|p>>>16)+1};G.prevPow2=function(p){p|=p>>>1;p|=p>>>2;p|=p>>>4;p|=p>>>8;p|=p>>>16;return p-(p>>>
1)};G.parity=function(p){p^=p>>>16;p^=p>>>8;return 27030>>>((p^p>>>4)&15)&1};var n=Array(256);(function(p){for(var k=0;256>k;++k){var a=k,e=k,f=7;for(a>>>=1;a;a>>>=1)e<<=1,e|=a&1,--f;p[k]=e<<f&255}})(n);G.reverse=function(p){return n[p&255]<<24|n[p>>>8&255]<<16|n[p>>>16&255]<<8|n[p>>>24&255]};G.interleave2=function(p,k){p&=65535;p=(p|p<<8)&16711935;p=(p|p<<4)&252645135;p=(p|p<<2)&858993459;k&=65535;k=(k|k<<8)&16711935;k=(k|k<<4)&252645135;k=(k|k<<2)&858993459;return(p|p<<1)&1431655765|((k|k<<1)&1431655765)<<
1};G.deinterleave2=function(p,k){p=p>>>k&1431655765;p=(p|p>>>1)&858993459;p=(p|p>>>2)&252645135;p=(p|p>>>4)&16711935;return((p|p>>>16)&65535)<<16>>16};G.interleave3=function(p,k,a){p&=1023;p=(p|p<<16)&4278190335;p=(p|p<<8)&251719695;p=(p|p<<4)&3272356035;k&=1023;k=(k|k<<16)&4278190335;k=(k|k<<8)&251719695;k=(k|k<<4)&3272356035;a&=1023;a=(a|a<<16)&4278190335;a=(a|a<<8)&251719695;a=(a|a<<4)&3272356035;return(p|p<<2)&1227133513|((k|k<<2)&1227133513)<<1|((a|a<<2)&1227133513)<<2};G.deinterleave3=function(p,
k){p=p>>>k&1227133513;p=(p|p>>>2)&3272356035;p=(p|p>>>4)&251719695;p=(p|p>>>8)&4278190335;return((p|p>>>16)&1023)<<22>>22};G.nextCombination=function(p){var k=p|p-1;return k+1|(~k&-~k)-1>>>r(p)+1}},{}],98:[function(b,D,G){function r(a,e,f,l,m,c,d){for(var g=0;g<e;g++){for(var h=0;h<f;h++)l[h]=a[h*e+g];n(l,m,c,d,f);for(h=0;h<f;h++)a[h*e+g]=m[h]}for(h=0;h<f;h++){for(g=0;g<e;g++)l[g]=a[h*e+g];n(l,m,c,d,e);for(g=0;g<e;g++)a[h*e+g]=Math.sqrt(m[g])}}function n(a,e,f,l,m){f[0]=0;l[0]=-k;l[1]=+k;for(var c=
1,d=0;c<m;c++){for(var g=(a[c]+c*c-(a[f[d]]+f[d]*f[d]))/(2*c-2*f[d]);g<=l[d];)d--,g=(a[c]+c*c-(a[f[d]]+f[d]*f[d]))/(2*c-2*f[d]);d++;f[d]=c;l[d]=g;l[d+1]=+k}for(d=c=0;c<m;c++){for(;l[d+1]<c;)d++;e[c]=(c-f[d])*(c-f[d])+a[f[d]]}}var p=b("clamp");D.exports=function(a,e){e||(e={});var f=null==e.cutoff?.25:e.cutoff,l=null==e.radius?8:e.radius,m=e.channel||0;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!e.width||!e.height)throw Error("For raw data width and height should be provided by options");var c=
e.width;var d=e.height;var g=a;var h=e.stride?e.stride:Math.floor(a.length/c/d)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(d=a,g=d.getContext("2d"),c=d.width,d=d.height,g=g.getImageData(0,0,c,d),g=g.data,h=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(d=a.canvas,c=d.width,d=d.height,g=a.getImageData(0,0,c,d),g=g.data,h=4):window.ImageData&&a instanceof window.ImageData&&(c=a.width,d=a.height,g=a.data,h=4);var q=Math.max(c,d);if(window.Uint8ClampedArray&&
g instanceof window.Uint8ClampedArray||window.Uint8Array&&g instanceof window.Uint8Array){var t=g;g=Array(c*d);a=0;for(e=t.length;a<e;a++)g[a]=t[a*h+m]/255}else if(1!==h)throw Error("Raw data can have only 1 value per pixel");m=Array(c*d);h=Array(c*d);t=Array(q);var v=Array(q),w=Array(q+1);q=Array(q);a=0;for(e=c*d;a<e;a++){var A=g[a];m[a]=1===A?0:0===A?k:Math.pow(Math.max(0,.5-A),2);h[a]=1===A?k:0===A?0:Math.pow(Math.max(0,A-.5),2)}r(m,c,d,t,v,q,w);r(h,c,d,t,v,q,w);g=window.Float32Array?new Float32Array(c*
d):Array(c*d);a=0;for(e=c*d;a<e;a++)g[a]=p(1-((m[a]-h[a])/l+f),0,1);return g};var k=1E20},{clamp:120}],99:[function(b,D,G){(function(r,n){function p(u,F){if(!u)throw Error(F||"Assertion failed");}function k(u,F){u.super_=F;var H=function(){};H.prototype=F.prototype;u.prototype=new H;u.prototype.constructor=u}function a(u,F,H){if(a.isBN(u))return u;this.negative=0;this.words=null;this.length=0;this.red=null;if(null!==u){if("le"===F||"be"===F)H=F,F=10;this._init(u||0,F||10,H||"be")}}function e(u,F,
H){var J=0;for(H=Math.min(u.length,H);F<H;F++){var I=u.charCodeAt(F)-48;J<<=4;J=49<=I&&54>=I?J|I-49+10:17<=I&&22>=I?J|I-17+10:J|I&15}return J}function f(u,F,H,J){var I=0;for(H=Math.min(u.length,H);F<H;F++){var M=u.charCodeAt(F)-48;I*=J;I=49<=M?I+(M-49+10):17<=M?I+(M-17+10):I+M}return I}function l(u,F,H){H.negative=F.negative^u.negative;var J=u.length+F.length|0;H.length=J;J=J-1|0;var I=u.words[0]|0,M=F.words[0]|0;I*=M;var E=I/67108864|0;H.words[0]=I&67108863;for(var L=1;L<J;L++){var P=E>>>26,N=E&
67108863;E=Math.min(L,F.length-1);for(var Q=Math.max(0,L-u.length+1);Q<=E;Q++)I=u.words[L-Q|0]|0,M=F.words[Q]|0,I=I*M+N,P+=I/67108864|0,N=I&67108863;H.words[L]=N|0;E=P|0}0!==E?H.words[L]=E|0:H.length--;return H.strip()}function m(u,F){this.x=u;this.y=F}function c(u,F){this.name=u;this.p=new a(F,16);this.n=this.p.bitLength();this.k=(new a(1)).iushln(this.n).isub(this.p);this.tmp=this._tmp()}function d(){c.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function g(){c.call(this,
"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function h(){c.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function q(){c.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function t(u){"string"===typeof u?(u=a._prime(u),this.m=u.p,this.prime=u):(p(u.gtn(1),"modulus must be greater than 1"),this.m=u,this.prime=null)}function v(u){t.call(this,u);this.shift=this.m.bitLength();0!==this.shift%26&&(this.shift+=
26-this.shift%26);this.r=(new a(1)).iushln(this.shift);this.r2=this.imod(this.r.sqr());this.rinv=this.r._invmp(this.m);this.minv=this.rinv.mul(this.r).isubn(1).div(this.m);this.minv=this.minv.umod(this.r);this.minv=this.r.sub(this.minv)}"object"===typeof r?r.exports=a:n.BN=a;a.BN=a;a.wordSize=26;try{var w=b("buffer").Buffer}catch(u){}a.isBN=function(u){return u instanceof a?!0:null!==u&&"object"===typeof u&&u.constructor.wordSize===a.wordSize&&Array.isArray(u.words)};a.max=function(u,F){return 0<
u.cmp(F)?u:F};a.min=function(u,F){return 0>u.cmp(F)?u:F};a.prototype._init=function(u,F,H){if("number"===typeof u)return this._initNumber(u,F,H);if("object"===typeof u)return this._initArray(u,F,H);"hex"===F&&(F=16);p(F===(F|0)&&2<=F&&36>=F);u=u.toString().replace(/\s+/g,"");var J=0;"-"===u[0]&&J++;16===F?this._parseHex(u,J):this._parseBase(u,F,J);"-"===u[0]&&(this.negative=1);this.strip();"le"===H&&this._initArray(this.toArray(),F,H)};a.prototype._initNumber=function(u,F,H){0>u&&(this.negative=1,
u=-u);67108864>u?(this.words=[u&67108863],this.length=1):4503599627370496>u?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(p(9007199254740992>u),this.words=[u&67108863,u/67108864&67108863,1],this.length=3);"le"===H&&this._initArray(this.toArray(),F,H)};a.prototype._initArray=function(u,F,H){p("number"===typeof u.length);if(0>=u.length)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3);this.words=Array(this.length);for(F=0;F<this.length;F++)this.words[F]=0;var J=
0;if("be"===H)for(F=u.length-1,H=0;0<=F;F-=3){var I=u[F]|u[F-1]<<8|u[F-2]<<16;this.words[H]|=I<<J&67108863;this.words[H+1]=I>>>26-J&67108863;J+=24;26<=J&&(J-=26,H++)}else if("le"===H)for(H=F=0;F<u.length;F+=3)I=u[F]|u[F+1]<<8|u[F+2]<<16,this.words[H]|=I<<J&67108863,this.words[H+1]=I>>>26-J&67108863,J+=24,26<=J&&(J-=26,H++);return this.strip()};a.prototype._parseHex=function(u,F){this.length=Math.ceil((u.length-F)/6);this.words=Array(this.length);for(var H=0;H<this.length;H++)this.words[H]=0;var J,
I=0;H=u.length-6;for(J=0;H>=F;H-=6){var M=e(u,H,H+6);this.words[J]|=M<<I&67108863;this.words[J+1]|=M>>>26-I&4194303;I+=24;26<=I&&(I-=26,J++)}H+6!==F&&(M=e(u,F,H+6),this.words[J]|=M<<I&67108863,this.words[J+1]|=M>>>26-I&4194303);this.strip()};a.prototype._parseBase=function(u,F,H){this.words=[0];this.length=1;for(var J=0,I=1;67108863>=I;I*=F)J++;J--;I=I/F|0;var M=u.length-H,E=M%J;M=Math.min(M,M-E)+H;for(var L=H;L<M;L+=J)H=f(u,L,L+J,F),this.imuln(I),67108864>this.words[0]+H?this.words[0]+=H:this._iaddn(H);
if(0!==E){J=1;H=f(u,L,u.length,F);for(L=0;L<E;L++)J*=F;this.imuln(J);67108864>this.words[0]+H?this.words[0]+=H:this._iaddn(H)}};a.prototype.copy=function(u){u.words=Array(this.length);for(var F=0;F<this.length;F++)u.words[F]=this.words[F];u.length=this.length;u.negative=this.negative;u.red=this.red};a.prototype.clone=function(){var u=new a(null);this.copy(u);return u};a.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this};a.prototype.strip=function(){for(;1<this.length&&
0===this.words[this.length-1];)this.length--;return this._normSign()};a.prototype._normSign=function(){1===this.length&&0===this.words[0]&&(this.negative=0);return this};a.prototype.inspect=function(){return(this.red?"\x3cBN-R: ":"\x3cBN: ")+this.toString(16)+"\x3e"};var A=" 0 00 000 0000 00000 000000 0000000 00000000 000000000 0000000000 00000000000 000000000000 0000000000000 00000000000000 000000000000000 0000000000000000 00000000000000000 000000000000000000 0000000000000000000 00000000000000000000 000000000000000000000 0000000000000000000000 00000000000000000000000 000000000000000000000000 0000000000000000000000000".split(" "),
z=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1E7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64E6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243E5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(u,F){u=u||10;F=F|0||1;if(16===u||"hex"===u){var H="";for(var J=u=0,I=0;I<this.length;I++){var M=
this.words[I],E=((M<<u|J)&16777215).toString(16);J=M>>>24-u&16777215;H=0!==J||I!==this.length-1?A[6-E.length]+E+H:E+H;u+=2;26<=u&&(u-=26,I--)}for(0!==J&&(H=J.toString(16)+H);0!==H.length%F;)H="0"+H;0!==this.negative&&(H="-"+H);return H}if(u===(u|0)&&2<=u&&36>=u){J=z[u];I=y[u];H="";M=this.clone();for(M.negative=0;!M.isZero();)E=M.modn(I).toString(u),M=M.idivn(I),H=M.isZero()?E+H:A[J-E.length]+E+H;for(this.isZero()&&(H="0"+H);0!==H.length%F;)H="0"+H;0!==this.negative&&(H="-"+H);return H}p(!1,"Base should be between 2 and 36")};
a.prototype.toNumber=function(){var u=this.words[0];2===this.length?u+=67108864*this.words[1]:3===this.length&&1===this.words[2]?u+=4503599627370496+67108864*this.words[1]:2<this.length&&p(!1,"Number can only safely store up to 53 bits");return 0!==this.negative?-u:u};a.prototype.toJSON=function(){return this.toString(16)};a.prototype.toBuffer=function(u,F){p("undefined"!==typeof w);return this.toArrayLike(w,u,F)};a.prototype.toArray=function(u,F){return this.toArrayLike(Array,u,F)};a.prototype.toArrayLike=
function(u,F,H){var J=this.byteLength();H=H||Math.max(1,J);p(J<=H,"byte array longer than desired length");p(0<H,"Requested array length \x3c\x3d 0");this.strip();var I="le"===F;u=new u(H);F=this.clone();if(I){for(I=0;!F.isZero();I++)J=F.andln(255),F.iushrn(8),u[I]=J;for(;I<H;I++)u[I]=0}else{for(I=0;I<H-J;I++)u[I]=0;for(I=0;!F.isZero();I++)J=F.andln(255),F.iushrn(8),u[H-I-1]=J}return u};a.prototype._countBits=Math.clz32?function(u){return 32-Math.clz32(u)}:function(u){var F=0;4096<=u&&(F+=13,u>>>=
13);64<=u&&(F+=7,u>>>=7);8<=u&&(F+=4,u>>>=4);2<=u&&(F+=2,u>>>=2);return F+u};a.prototype._zeroBits=function(u){if(0===u)return 26;var F=0;0===(u&8191)&&(F+=13,u>>>=13);0===(u&127)&&(F+=7,u>>>=7);0===(u&15)&&(F+=4,u>>>=4);0===(u&3)&&(F+=2,u>>>=2);0===(u&1)&&F++;return F};a.prototype.bitLength=function(){var u=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+u};a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,F=0;F<this.length;F++){var H=this._zeroBits(this.words[F]);
u+=H;if(26!==H)break}return u};a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)};a.prototype.toTwos=function(u){return 0!==this.negative?this.abs().inotn(u).iaddn(1):this.clone()};a.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()};a.prototype.isNeg=function(){return 0!==this.negative};a.prototype.neg=function(){return this.clone().ineg()};a.prototype.ineg=function(){this.isZero()||(this.negative^=1);return this};a.prototype.iuor=
function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var F=0;F<u.length;F++)this.words[F]|=u.words[F];return this.strip()};a.prototype.ior=function(u){p(0===(this.negative|u.negative));return this.iuor(u)};a.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)};a.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)};a.prototype.iuand=function(u){var F=this.length>u.length?u:this;for(var H=0;H<F.length;H++)this.words[H]&=
u.words[H];this.length=F.length;return this.strip()};a.prototype.iand=function(u){p(0===(this.negative|u.negative));return this.iuand(u)};a.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)};a.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)};a.prototype.iuxor=function(u){if(this.length>u.length)var F=this;else F=u,u=this;for(var H=0;H<u.length;H++)this.words[H]=F.words[H]^u.words[H];if(this!==F)for(;H<
F.length;H++)this.words[H]=F.words[H];this.length=F.length;return this.strip()};a.prototype.ixor=function(u){p(0===(this.negative|u.negative));return this.iuxor(u)};a.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)};a.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)};a.prototype.inotn=function(u){p("number"===typeof u&&0<=u);var F=Math.ceil(u/26)|0;u%=26;this._expand(F);0<u&&F--;for(var H=0;H<F;H++)this.words[H]=
~this.words[H]&67108863;0<u&&(this.words[H]=~this.words[H]&67108863>>26-u);return this.strip()};a.prototype.notn=function(u){return this.clone().inotn(u)};a.prototype.setn=function(u,F){p("number"===typeof u&&0<=u);var H=u/26|0;u%=26;this._expand(H+1);this.words[H]=F?this.words[H]|1<<u:this.words[H]&~(1<<u);return this.strip()};a.prototype.iadd=function(u){if(0!==this.negative&&0===u.negative)return this.negative=0,this.isub(u),this.negative^=1,this._normSign();if(0===this.negative&&0!==u.negative){u.negative=
0;var F=this.isub(u);u.negative=1;return F._normSign()}if(this.length>u.length)var H=this;else H=u,u=this;for(var J=F=0;J<u.length;J++)F=(H.words[J]|0)+(u.words[J]|0)+F,this.words[J]=F&67108863,F>>>=26;for(;0!==F&&J<H.length;J++)F=(H.words[J]|0)+F,this.words[J]=F&67108863,F>>>=26;this.length=H.length;if(0!==F)this.words[this.length]=F,this.length++;else if(H!==this)for(;J<H.length;J++)this.words[J]=H.words[J];return this};a.prototype.add=function(u){if(0!==u.negative&&0===this.negative){u.negative=
0;var F=this.sub(u);u.negative^=1;return F}return 0===u.negative&&0!==this.negative?(this.negative=0,F=u.sub(this),this.negative=1,F):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)};a.prototype.isub=function(u){if(0!==u.negative){u.negative=0;var F=this.iadd(u);u.negative=1;return F._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();F=this.cmp(u);if(0===F)return this.negative=0,this.length=1,this.words[0]=0,this;if(0<F)var H=this;
else H=u,u=this;for(var J=0,I=0;I<u.length;I++)F=(H.words[I]|0)-(u.words[I]|0)+J,J=F>>26,this.words[I]=F&67108863;for(;0!==J&&I<H.length;I++)F=(H.words[I]|0)+J,J=F>>26,this.words[I]=F&67108863;if(0===J&&I<H.length&&H!==this)for(;I<H.length;I++)this.words[I]=H.words[I];this.length=Math.max(this.length,I);H!==this&&(this.negative=1);return this.strip()};a.prototype.sub=function(u){return this.clone().isub(u)};var B=function(u,F,H){var J=u.words,I=F.words,M=H.words,E=0,L=J[0]|0,P=L&8191,N=L>>>13,Q=J[1]|
0;L=Q&8191;var O=Q>>>13,T=J[2]|0;Q=T&8191;var V=T>>>13,Z=J[3]|0;T=Z&8191;var aa=Z>>>13,Y=J[4]|0;Z=Y&8191;var ea=Y>>>13,ca=J[5]|0;Y=ca&8191;var ba=ca>>>13,ka=J[6]|0;ca=ka&8191;var qa=ka>>>13,pa=J[7]|0;ka=pa&8191;var oa=pa>>>13,ja=J[8]|0;pa=ja&8191;ja>>>=13;var ra=J[9]|0;J=ra&8191;ra>>>=13;var ha=I[0]|0,la=ha&8191,ua=ha>>>13,na=I[1]|0;ha=na&8191;var wa=na>>>13,Ca=I[2]|0;na=Ca&8191;var Fa=Ca>>>13,Xa=I[3]|0;Ca=Xa&8191;var ab=Xa>>>13,gb=I[4]|0;Xa=gb&8191;var bb=gb>>>13,La=I[5]|0;gb=La&8191;var kb=La>>>
13,mb=I[6]|0;La=mb&8191;var ya=mb>>>13,Ia=I[7]|0;mb=Ia&8191;var Na=Ia>>>13,Ta=I[8]|0;Ia=Ta&8191;Ta>>>=13;var hb=I[9]|0;I=hb&8191;hb>>>=13;H.negative=u.negative^F.negative;H.length=19;var Ya=Math.imul(P,la);u=Math.imul(P,ua);u=u+Math.imul(N,la)|0;F=Math.imul(N,ua);var Ga=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(Ga>>>26)|0;Ga&=67108863;Ya=Math.imul(L,la);u=Math.imul(L,ua);u=u+Math.imul(O,la)|0;F=Math.imul(O,ua);Ya=Ya+Math.imul(P,ha)|0;u=u+Math.imul(P,wa)|0;u=u+Math.imul(N,ha)|0;F=F+Math.imul(N,wa)|
0;var Pa=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(Pa>>>26)|0;Pa&=67108863;Ya=Math.imul(Q,la);u=Math.imul(Q,ua);u=u+Math.imul(V,la)|0;F=Math.imul(V,ua);Ya=Ya+Math.imul(L,ha)|0;u=u+Math.imul(L,wa)|0;u=u+Math.imul(O,ha)|0;F=F+Math.imul(O,wa)|0;Ya=Ya+Math.imul(P,na)|0;u=u+Math.imul(P,Fa)|0;u=u+Math.imul(N,na)|0;F=F+Math.imul(N,Fa)|0;var Va=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(Va>>>26)|0;Va&=67108863;Ya=Math.imul(T,la);u=Math.imul(T,ua);u=u+Math.imul(aa,la)|0;F=Math.imul(aa,ua);Ya=Ya+Math.imul(Q,
ha)|0;u=u+Math.imul(Q,wa)|0;u=u+Math.imul(V,ha)|0;F=F+Math.imul(V,wa)|0;Ya=Ya+Math.imul(L,na)|0;u=u+Math.imul(L,Fa)|0;u=u+Math.imul(O,na)|0;F=F+Math.imul(O,Fa)|0;Ya=Ya+Math.imul(P,Ca)|0;u=u+Math.imul(P,ab)|0;u=u+Math.imul(N,Ca)|0;F=F+Math.imul(N,ab)|0;var va=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(va>>>26)|0;va&=67108863;Ya=Math.imul(Z,la);u=Math.imul(Z,ua);u=u+Math.imul(ea,la)|0;F=Math.imul(ea,ua);Ya=Ya+Math.imul(T,ha)|0;u=u+Math.imul(T,wa)|0;u=u+Math.imul(aa,ha)|0;F=F+Math.imul(aa,wa)|0;Ya=
Ya+Math.imul(Q,na)|0;u=u+Math.imul(Q,Fa)|0;u=u+Math.imul(V,na)|0;F=F+Math.imul(V,Fa)|0;Ya=Ya+Math.imul(L,Ca)|0;u=u+Math.imul(L,ab)|0;u=u+Math.imul(O,Ca)|0;F=F+Math.imul(O,ab)|0;Ya=Ya+Math.imul(P,Xa)|0;u=u+Math.imul(P,bb)|0;u=u+Math.imul(N,Xa)|0;F=F+Math.imul(N,bb)|0;var Ea=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(Ea>>>26)|0;Ea&=67108863;Ya=Math.imul(Y,la);u=Math.imul(Y,ua);u=u+Math.imul(ba,la)|0;F=Math.imul(ba,ua);Ya=Ya+Math.imul(Z,ha)|0;u=u+Math.imul(Z,wa)|0;u=u+Math.imul(ea,ha)|0;F=F+Math.imul(ea,
wa)|0;Ya=Ya+Math.imul(T,na)|0;u=u+Math.imul(T,Fa)|0;u=u+Math.imul(aa,na)|0;F=F+Math.imul(aa,Fa)|0;Ya=Ya+Math.imul(Q,Ca)|0;u=u+Math.imul(Q,ab)|0;u=u+Math.imul(V,Ca)|0;F=F+Math.imul(V,ab)|0;Ya=Ya+Math.imul(L,Xa)|0;u=u+Math.imul(L,bb)|0;u=u+Math.imul(O,Xa)|0;F=F+Math.imul(O,bb)|0;Ya=Ya+Math.imul(P,gb)|0;u=u+Math.imul(P,kb)|0;u=u+Math.imul(N,gb)|0;F=F+Math.imul(N,kb)|0;var Qa=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(Qa>>>26)|0;Qa&=67108863;Ya=Math.imul(ca,la);u=Math.imul(ca,ua);u=u+Math.imul(qa,la)|
0;F=Math.imul(qa,ua);Ya=Ya+Math.imul(Y,ha)|0;u=u+Math.imul(Y,wa)|0;u=u+Math.imul(ba,ha)|0;F=F+Math.imul(ba,wa)|0;Ya=Ya+Math.imul(Z,na)|0;u=u+Math.imul(Z,Fa)|0;u=u+Math.imul(ea,na)|0;F=F+Math.imul(ea,Fa)|0;Ya=Ya+Math.imul(T,Ca)|0;u=u+Math.imul(T,ab)|0;u=u+Math.imul(aa,Ca)|0;F=F+Math.imul(aa,ab)|0;Ya=Ya+Math.imul(Q,Xa)|0;u=u+Math.imul(Q,bb)|0;u=u+Math.imul(V,Xa)|0;F=F+Math.imul(V,bb)|0;Ya=Ya+Math.imul(L,gb)|0;u=u+Math.imul(L,kb)|0;u=u+Math.imul(O,gb)|0;F=F+Math.imul(O,kb)|0;Ya=Ya+Math.imul(P,La)|0;
u=u+Math.imul(P,ya)|0;u=u+Math.imul(N,La)|0;F=F+Math.imul(N,ya)|0;var $a=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+($a>>>26)|0;$a&=67108863;Ya=Math.imul(ka,la);u=Math.imul(ka,ua);u=u+Math.imul(oa,la)|0;F=Math.imul(oa,ua);Ya=Ya+Math.imul(ca,ha)|0;u=u+Math.imul(ca,wa)|0;u=u+Math.imul(qa,ha)|0;F=F+Math.imul(qa,wa)|0;Ya=Ya+Math.imul(Y,na)|0;u=u+Math.imul(Y,Fa)|0;u=u+Math.imul(ba,na)|0;F=F+Math.imul(ba,Fa)|0;Ya=Ya+Math.imul(Z,Ca)|0;u=u+Math.imul(Z,ab)|0;u=u+Math.imul(ea,Ca)|0;F=F+Math.imul(ea,ab)|0;Ya=
Ya+Math.imul(T,Xa)|0;u=u+Math.imul(T,bb)|0;u=u+Math.imul(aa,Xa)|0;F=F+Math.imul(aa,bb)|0;Ya=Ya+Math.imul(Q,gb)|0;u=u+Math.imul(Q,kb)|0;u=u+Math.imul(V,gb)|0;F=F+Math.imul(V,kb)|0;Ya=Ya+Math.imul(L,La)|0;u=u+Math.imul(L,ya)|0;u=u+Math.imul(O,La)|0;F=F+Math.imul(O,ya)|0;Ya=Ya+Math.imul(P,mb)|0;u=u+Math.imul(P,Na)|0;u=u+Math.imul(N,mb)|0;F=F+Math.imul(N,Na)|0;var eb=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(eb>>>26)|0;eb&=67108863;Ya=Math.imul(pa,la);u=Math.imul(pa,ua);u=u+Math.imul(ja,la)|0;F=Math.imul(ja,
ua);Ya=Ya+Math.imul(ka,ha)|0;u=u+Math.imul(ka,wa)|0;u=u+Math.imul(oa,ha)|0;F=F+Math.imul(oa,wa)|0;Ya=Ya+Math.imul(ca,na)|0;u=u+Math.imul(ca,Fa)|0;u=u+Math.imul(qa,na)|0;F=F+Math.imul(qa,Fa)|0;Ya=Ya+Math.imul(Y,Ca)|0;u=u+Math.imul(Y,ab)|0;u=u+Math.imul(ba,Ca)|0;F=F+Math.imul(ba,ab)|0;Ya=Ya+Math.imul(Z,Xa)|0;u=u+Math.imul(Z,bb)|0;u=u+Math.imul(ea,Xa)|0;F=F+Math.imul(ea,bb)|0;Ya=Ya+Math.imul(T,gb)|0;u=u+Math.imul(T,kb)|0;u=u+Math.imul(aa,gb)|0;F=F+Math.imul(aa,kb)|0;Ya=Ya+Math.imul(Q,La)|0;u=u+Math.imul(Q,
ya)|0;u=u+Math.imul(V,La)|0;F=F+Math.imul(V,ya)|0;Ya=Ya+Math.imul(L,mb)|0;u=u+Math.imul(L,Na)|0;u=u+Math.imul(O,mb)|0;F=F+Math.imul(O,Na)|0;Ya=Ya+Math.imul(P,Ia)|0;u=u+Math.imul(P,Ta)|0;u=u+Math.imul(N,Ia)|0;F=F+Math.imul(N,Ta)|0;var pb=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(pb>>>26)|0;pb&=67108863;Ya=Math.imul(J,la);u=Math.imul(J,ua);u=u+Math.imul(ra,la)|0;F=Math.imul(ra,ua);Ya=Ya+Math.imul(pa,ha)|0;u=u+Math.imul(pa,wa)|0;u=u+Math.imul(ja,ha)|0;F=F+Math.imul(ja,wa)|0;Ya=Ya+Math.imul(ka,na)|
0;u=u+Math.imul(ka,Fa)|0;u=u+Math.imul(oa,na)|0;F=F+Math.imul(oa,Fa)|0;Ya=Ya+Math.imul(ca,Ca)|0;u=u+Math.imul(ca,ab)|0;u=u+Math.imul(qa,Ca)|0;F=F+Math.imul(qa,ab)|0;Ya=Ya+Math.imul(Y,Xa)|0;u=u+Math.imul(Y,bb)|0;u=u+Math.imul(ba,Xa)|0;F=F+Math.imul(ba,bb)|0;Ya=Ya+Math.imul(Z,gb)|0;u=u+Math.imul(Z,kb)|0;u=u+Math.imul(ea,gb)|0;F=F+Math.imul(ea,kb)|0;Ya=Ya+Math.imul(T,La)|0;u=u+Math.imul(T,ya)|0;u=u+Math.imul(aa,La)|0;F=F+Math.imul(aa,ya)|0;Ya=Ya+Math.imul(Q,mb)|0;u=u+Math.imul(Q,Na)|0;u=u+Math.imul(V,
mb)|0;F=F+Math.imul(V,Na)|0;Ya=Ya+Math.imul(L,Ia)|0;u=u+Math.imul(L,Ta)|0;u=u+Math.imul(O,Ia)|0;F=F+Math.imul(O,Ta)|0;Ya=Ya+Math.imul(P,I)|0;u=u+Math.imul(P,hb)|0;u=u+Math.imul(N,I)|0;F=F+Math.imul(N,hb)|0;P=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(P>>>26)|0;P&=67108863;Ya=Math.imul(J,ha);u=Math.imul(J,wa);u=u+Math.imul(ra,ha)|0;F=Math.imul(ra,wa);Ya=Ya+Math.imul(pa,na)|0;u=u+Math.imul(pa,Fa)|0;u=u+Math.imul(ja,na)|0;F=F+Math.imul(ja,Fa)|0;Ya=Ya+Math.imul(ka,Ca)|0;u=u+Math.imul(ka,ab)|0;u=u+Math.imul(oa,
Ca)|0;F=F+Math.imul(oa,ab)|0;Ya=Ya+Math.imul(ca,Xa)|0;u=u+Math.imul(ca,bb)|0;u=u+Math.imul(qa,Xa)|0;F=F+Math.imul(qa,bb)|0;Ya=Ya+Math.imul(Y,gb)|0;u=u+Math.imul(Y,kb)|0;u=u+Math.imul(ba,gb)|0;F=F+Math.imul(ba,kb)|0;Ya=Ya+Math.imul(Z,La)|0;u=u+Math.imul(Z,ya)|0;u=u+Math.imul(ea,La)|0;F=F+Math.imul(ea,ya)|0;Ya=Ya+Math.imul(T,mb)|0;u=u+Math.imul(T,Na)|0;u=u+Math.imul(aa,mb)|0;F=F+Math.imul(aa,Na)|0;Ya=Ya+Math.imul(Q,Ia)|0;u=u+Math.imul(Q,Ta)|0;u=u+Math.imul(V,Ia)|0;F=F+Math.imul(V,Ta)|0;Ya=Ya+Math.imul(L,
I)|0;u=u+Math.imul(L,hb)|0;u=u+Math.imul(O,I)|0;F=F+Math.imul(O,hb)|0;L=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(L>>>26)|0;L&=67108863;Ya=Math.imul(J,na);u=Math.imul(J,Fa);u=u+Math.imul(ra,na)|0;F=Math.imul(ra,Fa);Ya=Ya+Math.imul(pa,Ca)|0;u=u+Math.imul(pa,ab)|0;u=u+Math.imul(ja,Ca)|0;F=F+Math.imul(ja,ab)|0;Ya=Ya+Math.imul(ka,Xa)|0;u=u+Math.imul(ka,bb)|0;u=u+Math.imul(oa,Xa)|0;F=F+Math.imul(oa,bb)|0;Ya=Ya+Math.imul(ca,gb)|0;u=u+Math.imul(ca,kb)|0;u=u+Math.imul(qa,gb)|0;F=F+Math.imul(qa,kb)|0;Ya=
Ya+Math.imul(Y,La)|0;u=u+Math.imul(Y,ya)|0;u=u+Math.imul(ba,La)|0;F=F+Math.imul(ba,ya)|0;Ya=Ya+Math.imul(Z,mb)|0;u=u+Math.imul(Z,Na)|0;u=u+Math.imul(ea,mb)|0;F=F+Math.imul(ea,Na)|0;Ya=Ya+Math.imul(T,Ia)|0;u=u+Math.imul(T,Ta)|0;u=u+Math.imul(aa,Ia)|0;F=F+Math.imul(aa,Ta)|0;Ya=Ya+Math.imul(Q,I)|0;u=u+Math.imul(Q,hb)|0;u=u+Math.imul(V,I)|0;F=F+Math.imul(V,hb)|0;Q=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(Q>>>26)|0;Q&=67108863;Ya=Math.imul(J,Ca);u=Math.imul(J,ab);u=u+Math.imul(ra,Ca)|0;F=Math.imul(ra,
ab);Ya=Ya+Math.imul(pa,Xa)|0;u=u+Math.imul(pa,bb)|0;u=u+Math.imul(ja,Xa)|0;F=F+Math.imul(ja,bb)|0;Ya=Ya+Math.imul(ka,gb)|0;u=u+Math.imul(ka,kb)|0;u=u+Math.imul(oa,gb)|0;F=F+Math.imul(oa,kb)|0;Ya=Ya+Math.imul(ca,La)|0;u=u+Math.imul(ca,ya)|0;u=u+Math.imul(qa,La)|0;F=F+Math.imul(qa,ya)|0;Ya=Ya+Math.imul(Y,mb)|0;u=u+Math.imul(Y,Na)|0;u=u+Math.imul(ba,mb)|0;F=F+Math.imul(ba,Na)|0;Ya=Ya+Math.imul(Z,Ia)|0;u=u+Math.imul(Z,Ta)|0;u=u+Math.imul(ea,Ia)|0;F=F+Math.imul(ea,Ta)|0;Ya=Ya+Math.imul(T,I)|0;u=u+Math.imul(T,
hb)|0;u=u+Math.imul(aa,I)|0;F=F+Math.imul(aa,hb)|0;T=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(T>>>26)|0;T&=67108863;Ya=Math.imul(J,Xa);u=Math.imul(J,bb);u=u+Math.imul(ra,Xa)|0;F=Math.imul(ra,bb);Ya=Ya+Math.imul(pa,gb)|0;u=u+Math.imul(pa,kb)|0;u=u+Math.imul(ja,gb)|0;F=F+Math.imul(ja,kb)|0;Ya=Ya+Math.imul(ka,La)|0;u=u+Math.imul(ka,ya)|0;u=u+Math.imul(oa,La)|0;F=F+Math.imul(oa,ya)|0;Ya=Ya+Math.imul(ca,mb)|0;u=u+Math.imul(ca,Na)|0;u=u+Math.imul(qa,mb)|0;F=F+Math.imul(qa,Na)|0;Ya=Ya+Math.imul(Y,Ia)|
0;u=u+Math.imul(Y,Ta)|0;u=u+Math.imul(ba,Ia)|0;F=F+Math.imul(ba,Ta)|0;Ya=Ya+Math.imul(Z,I)|0;u=u+Math.imul(Z,hb)|0;u=u+Math.imul(ea,I)|0;F=F+Math.imul(ea,hb)|0;Z=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(Z>>>26)|0;Z&=67108863;Ya=Math.imul(J,gb);u=Math.imul(J,kb);u=u+Math.imul(ra,gb)|0;F=Math.imul(ra,kb);Ya=Ya+Math.imul(pa,La)|0;u=u+Math.imul(pa,ya)|0;u=u+Math.imul(ja,La)|0;F=F+Math.imul(ja,ya)|0;Ya=Ya+Math.imul(ka,mb)|0;u=u+Math.imul(ka,Na)|0;u=u+Math.imul(oa,mb)|0;F=F+Math.imul(oa,Na)|0;Ya=Ya+
Math.imul(ca,Ia)|0;u=u+Math.imul(ca,Ta)|0;u=u+Math.imul(qa,Ia)|0;F=F+Math.imul(qa,Ta)|0;Ya=Ya+Math.imul(Y,I)|0;u=u+Math.imul(Y,hb)|0;u=u+Math.imul(ba,I)|0;F=F+Math.imul(ba,hb)|0;Y=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(Y>>>26)|0;Y&=67108863;Ya=Math.imul(J,La);u=Math.imul(J,ya);u=u+Math.imul(ra,La)|0;F=Math.imul(ra,ya);Ya=Ya+Math.imul(pa,mb)|0;u=u+Math.imul(pa,Na)|0;u=u+Math.imul(ja,mb)|0;F=F+Math.imul(ja,Na)|0;Ya=Ya+Math.imul(ka,Ia)|0;u=u+Math.imul(ka,Ta)|0;u=u+Math.imul(oa,Ia)|0;F=F+Math.imul(oa,
Ta)|0;Ya=Ya+Math.imul(ca,I)|0;u=u+Math.imul(ca,hb)|0;u=u+Math.imul(qa,I)|0;F=F+Math.imul(qa,hb)|0;ca=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(ca>>>26)|0;ca&=67108863;Ya=Math.imul(J,mb);u=Math.imul(J,Na);u=u+Math.imul(ra,mb)|0;F=Math.imul(ra,Na);Ya=Ya+Math.imul(pa,Ia)|0;u=u+Math.imul(pa,Ta)|0;u=u+Math.imul(ja,Ia)|0;F=F+Math.imul(ja,Ta)|0;Ya=Ya+Math.imul(ka,I)|0;u=u+Math.imul(ka,hb)|0;u=u+Math.imul(oa,I)|0;F=F+Math.imul(oa,hb)|0;ka=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(ka>>>26)|0;ka&=67108863;
Ya=Math.imul(J,Ia);u=Math.imul(J,Ta);u=u+Math.imul(ra,Ia)|0;F=Math.imul(ra,Ta);Ya=Ya+Math.imul(pa,I)|0;u=u+Math.imul(pa,hb)|0;u=u+Math.imul(ja,I)|0;F=F+Math.imul(ja,hb)|0;pa=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(pa>>>26)|0;pa&=67108863;Ya=Math.imul(J,I);u=Math.imul(J,hb);u=u+Math.imul(ra,I)|0;F=Math.imul(ra,hb);N=(E+Ya|0)+((u&8191)<<13)|0;E=(F+(u>>>13)|0)+(N>>>26)|0;M[0]=Ga;M[1]=Pa;M[2]=Va;M[3]=va;M[4]=Ea;M[5]=Qa;M[6]=$a;M[7]=eb;M[8]=pb;M[9]=P;M[10]=L;M[11]=Q;M[12]=T;M[13]=Z;M[14]=Y;M[15]=ca;
M[16]=ka;M[17]=pa;M[18]=N&67108863;0!==E&&(M[19]=E,H.length++);return H};Math.imul||(B=l);a.prototype.mulTo=function(u,F){var H=this.length+u.length;if(10===this.length&&10===u.length)u=B(this,u,F);else if(63>H)u=l(this,u,F);else if(1024>H){F.negative=u.negative^this.negative;F.length=this.length+u.length;for(var J=0,I=H=0;I<F.length-1;I++){var M=H;H=0;J&=67108863;for(var E=Math.min(I,u.length-1),L=Math.max(0,I-this.length+1);L<=E;L++){var P=(this.words[I-L]|0)*(u.words[L]|0),N=P&67108863;M=M+(P/
67108864|0)|0;N=N+J|0;J=N&67108863;M=M+(N>>>26)|0;H+=M>>>26;M&=67108863}F.words[I]=J;J=M}0!==J?F.words[I]=J:F.length--;u=F.strip()}else u=(new m).mulp(this,u,F);return u};m.prototype.makeRBT=function(u){for(var F=Array(u),H=a.prototype._countBits(u)-1,J=0;J<u;J++)F[J]=this.revBin(J,H,u);return F};m.prototype.revBin=function(u,F,H){if(0===u||u===H-1)return u;for(var J=H=0;J<F;J++)H|=(u&1)<<F-J-1,u>>=1;return H};m.prototype.permute=function(u,F,H,J,I,M){for(var E=0;E<M;E++)J[E]=F[u[E]],I[E]=H[u[E]]};
m.prototype.transform=function(u,F,H,J,I,M){this.permute(M,u,F,H,J,I);for(u=1;u<I;u<<=1){F=u<<1;M=Math.cos(2*Math.PI/F);for(var E=Math.sin(2*Math.PI/F),L=0;L<I;L+=F)for(var P=M,N=E,Q=0;Q<u;Q++){var O=H[L+Q],T=J[L+Q],V=H[L+Q+u],Z=J[L+Q+u],aa=P*V-N*Z;Z=P*Z+N*V;V=aa;H[L+Q]=O+V;J[L+Q]=T+Z;H[L+Q+u]=O-V;J[L+Q+u]=T-Z;Q!==F&&(aa=M*P-E*N,N=M*N+E*P,P=aa)}}};m.prototype.guessLen13b=function(u,F){u=Math.max(F,u)|1;F=u&1;var H=0;for(u=u/2|0;u;u>>>=1)H++;return 1<<H+1+F};m.prototype.conjugate=function(u,F,H){if(!(1>=
H))for(var J=0;J<H/2;J++){var I=u[J];u[J]=u[H-J-1];u[H-J-1]=I;I=F[J];F[J]=-F[H-J-1];F[H-J-1]=-I}};m.prototype.normalize13b=function(u,F){for(var H=0,J=0;J<F/2;J++)H=8192*Math.round(u[2*J+1]/F)+Math.round(u[2*J]/F)+H,u[J]=H&67108863,H=67108864>H?0:H/67108864|0;return u};m.prototype.convert13b=function(u,F,H,J){for(var I=0,M=0;M<F;M++)I+=u[M]|0,H[2*M]=I&8191,I>>>=13,H[2*M+1]=I&8191,I>>>=13;for(M=2*F;M<J;++M)H[M]=0;p(0===I);p(0===(I&-8192))};m.prototype.stub=function(u){for(var F=Array(u),H=0;H<u;H++)F[H]=
0;return F};m.prototype.mulp=function(u,F,H){var J=2*this.guessLen13b(u.length,F.length),I=this.makeRBT(J),M=this.stub(J),E=Array(J),L=Array(J),P=Array(J),N=Array(J),Q=Array(J),O=Array(J),T=H.words;T.length=J;this.convert13b(u.words,u.length,E,J);this.convert13b(F.words,F.length,N,J);this.transform(E,M,L,P,J,I);this.transform(N,M,Q,O,J,I);for(E=0;E<J;E++)N=L[E]*Q[E]-P[E]*O[E],P[E]=L[E]*O[E]+P[E]*Q[E],L[E]=N;this.conjugate(L,P,J);this.transform(L,P,T,M,J,I);this.conjugate(T,M,J);this.normalize13b(T,
J);H.negative=u.negative^F.negative;H.length=u.length+F.length;return H.strip()};a.prototype.mul=function(u){var F=new a(null);F.words=Array(this.length+u.length);return this.mulTo(u,F)};a.prototype.mulf=function(u){var F=new a(null);F.words=Array(this.length+u.length);return(new m).mulp(this,u,F)};a.prototype.imul=function(u){return this.clone().mulTo(u,this)};a.prototype.imuln=function(u){p("number"===typeof u);p(67108864>u);for(var F=0,H=0;H<this.length;H++){var J=(this.words[H]|0)*u,I=(J&67108863)+
(F&67108863);F>>=26;F+=J/67108864|0;F+=I>>>26;this.words[H]=I&67108863}0!==F&&(this.words[H]=F,this.length++);return this};a.prototype.muln=function(u){return this.clone().imuln(u)};a.prototype.sqr=function(){return this.mul(this)};a.prototype.isqr=function(){return this.imul(this.clone())};a.prototype.pow=function(u){for(var F=Array(u.bitLength()),H=0;H<F.length;H++){var J=H%26;F[H]=(u.words[H/26|0]&1<<J)>>>J}if(0===F.length)return new a(1);u=this;for(H=0;H<F.length&&0===F[H];H++,u=u.sqr());if(++H<
F.length)for(J=u.sqr();H<F.length;H++,J=J.sqr())0!==F[H]&&(u=u.mul(J));return u};a.prototype.iushln=function(u){p("number"===typeof u&&0<=u);var F=u%26;u=(u-F)/26;var H=67108863>>>26-F<<26-F,J;if(0!==F){var I=0;for(J=0;J<this.length;J++){var M=this.words[J]&H;this.words[J]=(this.words[J]|0)-M<<F|I;I=M>>>26-F}I&&(this.words[J]=I,this.length++)}if(0!==u){for(J=this.length-1;0<=J;J--)this.words[J+u]=this.words[J];for(J=0;J<u;J++)this.words[J]=0;this.length+=u}return this.strip()};a.prototype.ishln=function(u){p(0===
this.negative);return this.iushln(u)};a.prototype.iushrn=function(u,F,H){p("number"===typeof u&&0<=u);var J=u%26,I=Math.min((u-J)/26,this.length);u=67108863^67108863>>>J<<J;F=Math.max(0,(F?(F-F%26)/26:0)-I);if(H){for(var M=0;M<I;M++)H.words[M]=this.words[M];H.length=I}if(0!==I)if(this.length>I)for(this.length-=I,M=0;M<this.length;M++)this.words[M]=this.words[M+I];else this.words[0]=0,this.length=1;I=0;for(M=this.length-1;0<=M&&(0!==I||M>=F);M--){var E=this.words[M]|0;this.words[M]=I<<26-J|E>>>J;I=
E&u}H&&0!==I&&(H.words[H.length++]=I);0===this.length&&(this.words[0]=0,this.length=1);return this.strip()};a.prototype.ishrn=function(u,F,H){p(0===this.negative);return this.iushrn(u,F,H)};a.prototype.shln=function(u){return this.clone().ishln(u)};a.prototype.ushln=function(u){return this.clone().iushln(u)};a.prototype.shrn=function(u){return this.clone().ishrn(u)};a.prototype.ushrn=function(u){return this.clone().iushrn(u)};a.prototype.testn=function(u){p("number"===typeof u&&0<=u);var F=u%26;u=
(u-F)/26;return this.length<=u?!1:!!(this.words[u]&1<<F)};a.prototype.imaskn=function(u){p("number"===typeof u&&0<=u);var F=u%26;u=(u-F)/26;p(0===this.negative,"imaskn works only with positive numbers");if(this.length<=u)return this;0!==F&&u++;this.length=Math.min(u,this.length);0!==F&&(this.words[this.length-1]&=67108863^67108863>>>F<<F);return this.strip()};a.prototype.maskn=function(u){return this.clone().imaskn(u)};a.prototype.iaddn=function(u){p("number"===typeof u);p(67108864>u);if(0>u)return this.isubn(-u);
if(0!==this.negative){if(1===this.length&&(this.words[0]|0)<u)return this.words[0]=u-(this.words[0]|0),this.negative=0,this;this.negative=0;this.isubn(u);this.negative=1;return this}return this._iaddn(u)};a.prototype._iaddn=function(u){this.words[0]+=u;for(u=0;u<this.length&&67108864<=this.words[u];u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;this.length=Math.max(this.length,u+1);return this};a.prototype.isubn=function(u){p("number"===typeof u);p(67108864>u);if(0>
u)return this.iaddn(-u);if(0!==this.negative)return this.negative=0,this.iaddn(u),this.negative=1,this;this.words[0]-=u;if(1===this.length&&0>this.words[0])this.words[0]=-this.words[0],this.negative=1;else for(u=0;u<this.length&&0>this.words[u];u++)this.words[u]+=67108864,--this.words[u+1];return this.strip()};a.prototype.addn=function(u){return this.clone().iaddn(u)};a.prototype.subn=function(u){return this.clone().isubn(u)};a.prototype.iabs=function(){this.negative=0;return this};a.prototype.abs=
function(){return this.clone().iabs()};a.prototype._ishlnsubmul=function(u,F,H){var J;this._expand(u.length+H);var I=0;for(J=0;J<u.length;J++){var M=(this.words[J+H]|0)+I;I=(u.words[J]|0)*F;M-=I&67108863;I=(M>>26)-(I/67108864|0);this.words[J+H]=M&67108863}for(;J<this.length-H;J++)M=(this.words[J+H]|0)+I,I=M>>26,this.words[J+H]=M&67108863;if(0===I)return this.strip();p(-1===I);for(J=I=0;J<this.length;J++)M=-(this.words[J]|0)+I,I=M>>26,this.words[J]=M&67108863;this.negative=1;return this.strip()};a.prototype._wordDiv=
function(u,F){var H=this.clone(),J=u,I=J.words[J.length-1]|0;u=26-this._countBits(I);0!==u&&(J=J.ushln(u),H.iushln(u),I=J.words[J.length-1]|0);var M=H.length-J.length;if("mod"!==F){var E=new a(null);E.length=M+1;E.words=Array(E.length);for(var L=0;L<E.length;L++)E.words[L]=0}L=H.clone()._ishlnsubmul(J,1,M);0===L.negative&&(H=L,E&&(E.words[M]=1));for(--M;0<=M;M--){L=67108864*(H.words[J.length+M]|0)+(H.words[J.length+M-1]|0);L=Math.min(L/I|0,67108863);for(H._ishlnsubmul(J,L,M);0!==H.negative;)L--,H.negative=
0,H._ishlnsubmul(J,1,M),H.isZero()||(H.negative^=1);E&&(E.words[M]=L)}E&&E.strip();H.strip();"div"!==F&&0!==u&&H.iushrn(u);return{div:E||null,mod:H}};a.prototype.divmod=function(u,F,H){p(!u.isZero());if(this.isZero())return{div:new a(0),mod:new a(0)};var J;if(0!==this.negative&&0===u.negative){var I=this.neg().divmod(u,F);"mod"!==F&&(J=I.div.neg());if("div"!==F){var M=I.mod.neg();H&&0!==M.negative&&M.iadd(u)}return{div:J,mod:M}}return 0===this.negative&&0!==u.negative?(I=this.divmod(u.neg(),F),"mod"!==
F&&(J=I.div.neg()),{div:J,mod:I.mod}):0!==(this.negative&u.negative)?(I=this.neg().divmod(u.neg(),F),"div"!==F&&(M=I.mod.neg(),H&&0!==M.negative&&M.isub(u)),{div:I.div,mod:M}):u.length>this.length||0>this.cmp(u)?{div:new a(0),mod:this}:1===u.length?"div"===F?{div:this.divn(u.words[0]),mod:null}:"mod"===F?{div:null,mod:new a(this.modn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new a(this.modn(u.words[0]))}:this._wordDiv(u,F)};a.prototype.div=function(u){return this.divmod(u,"div",!1).div};a.prototype.mod=
function(u){return this.divmod(u,"mod",!1).mod};a.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod};a.prototype.divRound=function(u){var F=this.divmod(u);if(F.mod.isZero())return F.div;var H=0!==F.div.negative?F.mod.isub(u):F.mod,J=u.ushrn(1);u=u.andln(1);H=H.cmp(J);return 0>H||1===u&&0===H?F.div:0!==F.div.negative?F.div.isubn(1):F.div.iaddn(1)};a.prototype.modn=function(u){p(67108863>=u);for(var F=67108864%u,H=0,J=this.length-1;0<=J;J--)H=(F*H+(this.words[J]|0))%u;return H};a.prototype.idivn=
function(u){p(67108863>=u);for(var F=0,H=this.length-1;0<=H;H--)F=(this.words[H]|0)+67108864*F,this.words[H]=F/u|0,F%=u;return this.strip()};a.prototype.divn=function(u){return this.clone().idivn(u)};a.prototype.egcd=function(u){p(0===u.negative);p(!u.isZero());var F=this,H=u.clone();F=0!==F.negative?F.umod(u):F.clone();u=new a(1);for(var J=new a(0),I=new a(0),M=new a(1),E=0;F.isEven()&&H.isEven();)F.iushrn(1),H.iushrn(1),++E;for(var L=H.clone(),P=F.clone();!F.isZero();){for(var N=0,Q=1;0===(F.words[0]&
Q)&&26>N;++N,Q<<=1);if(0<N)for(F.iushrn(N);0<N--;){if(u.isOdd()||J.isOdd())u.iadd(L),J.isub(P);u.iushrn(1);J.iushrn(1)}N=0;for(Q=1;0===(H.words[0]&Q)&&26>N;++N,Q<<=1);if(0<N)for(H.iushrn(N);0<N--;){if(I.isOdd()||M.isOdd())I.iadd(L),M.isub(P);I.iushrn(1);M.iushrn(1)}0<=F.cmp(H)?(F.isub(H),u.isub(I),J.isub(M)):(H.isub(F),I.isub(u),M.isub(J))}return{a:I,b:M,gcd:H.iushln(E)}};a.prototype._invmp=function(u){p(0===u.negative);p(!u.isZero());var F=this,H=u.clone();F=0!==F.negative?F.umod(u):F.clone();for(var J=
new a(1),I=new a(0),M=H.clone();0<F.cmpn(1)&&0<H.cmpn(1);){for(var E=0,L=1;0===(F.words[0]&L)&&26>E;++E,L<<=1);if(0<E)for(F.iushrn(E);0<E--;)J.isOdd()&&J.iadd(M),J.iushrn(1);E=0;for(L=1;0===(H.words[0]&L)&&26>E;++E,L<<=1);if(0<E)for(H.iushrn(E);0<E--;)I.isOdd()&&I.iadd(M),I.iushrn(1);0<=F.cmp(H)?(F.isub(H),J.isub(I)):(H.isub(F),I.isub(J))}F=0===F.cmpn(1)?J:I;0>F.cmpn(0)&&F.iadd(u);return F};a.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var F=this.clone();
u=u.clone();F.negative=0;for(var H=u.negative=0;F.isEven()&&u.isEven();H++)F.iushrn(1),u.iushrn(1);do{for(;F.isEven();)F.iushrn(1);for(;u.isEven();)u.iushrn(1);var J=F.cmp(u);if(0>J)J=F,F=u,u=J;else if(0===J||0===u.cmpn(1))break;F.isub(u)}while(1);return u.iushln(H)};a.prototype.invm=function(u){return this.egcd(u).a.umod(u)};a.prototype.isEven=function(){return 0===(this.words[0]&1)};a.prototype.isOdd=function(){return 1===(this.words[0]&1)};a.prototype.andln=function(u){return this.words[0]&u};
a.prototype.bincn=function(u){p("number"===typeof u);var F=u%26;u=(u-F)/26;F=1<<F;if(this.length<=u)return this._expand(u+1),this.words[u]|=F,this;for(;0!==F&&u<this.length;u++){var H=this.words[u]|0;H+=F;F=H>>>26;H&=67108863;this.words[u]=H}0!==F&&(this.words[u]=F,this.length++);return this};a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]};a.prototype.cmpn=function(u){var F=0>u;if(0!==this.negative&&!F)return-1;if(0===this.negative&&F)return 1;this.strip();1<this.length?u=
1:(F&&(u=-u),p(67108863>=u,"Number is too big"),F=this.words[0]|0,u=F===u?0:F<u?-1:1);return 0!==this.negative?-u|0:u};a.prototype.cmp=function(u){if(0!==this.negative&&0===u.negative)return-1;if(0===this.negative&&0!==u.negative)return 1;u=this.ucmp(u);return 0!==this.negative?-u|0:u};a.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var F=0,H=this.length-1;0<=H;H--){var J=this.words[H]|0,I=u.words[H]|0;if(J!==I){J<I?F=-1:J>I&&(F=1);break}}return F};
a.prototype.gtn=function(u){return 1===this.cmpn(u)};a.prototype.gt=function(u){return 1===this.cmp(u)};a.prototype.gten=function(u){return 0<=this.cmpn(u)};a.prototype.gte=function(u){return 0<=this.cmp(u)};a.prototype.ltn=function(u){return-1===this.cmpn(u)};a.prototype.lt=function(u){return-1===this.cmp(u)};a.prototype.lten=function(u){return 0>=this.cmpn(u)};a.prototype.lte=function(u){return 0>=this.cmp(u)};a.prototype.eqn=function(u){return 0===this.cmpn(u)};a.prototype.eq=function(u){return 0===
this.cmp(u)};a.red=function(u){return new t(u)};a.prototype.toRed=function(u){p(!this.red,"Already a number in reduction context");p(0===this.negative,"red works only with positives");return u.convertTo(this)._forceRed(u)};a.prototype.fromRed=function(){p(this.red,"fromRed works only with numbers in reduction context");return this.red.convertFrom(this)};a.prototype._forceRed=function(u){this.red=u;return this};a.prototype.forceRed=function(u){p(!this.red,"Already a number in reduction context");return this._forceRed(u)};
a.prototype.redAdd=function(u){p(this.red,"redAdd works only with red numbers");return this.red.add(this,u)};a.prototype.redIAdd=function(u){p(this.red,"redIAdd works only with red numbers");return this.red.iadd(this,u)};a.prototype.redSub=function(u){p(this.red,"redSub works only with red numbers");return this.red.sub(this,u)};a.prototype.redISub=function(u){p(this.red,"redISub works only with red numbers");return this.red.isub(this,u)};a.prototype.redShl=function(u){p(this.red,"redShl works only with red numbers");
return this.red.shl(this,u)};a.prototype.redMul=function(u){p(this.red,"redMul works only with red numbers");this.red._verify2(this,u);return this.red.mul(this,u)};a.prototype.redIMul=function(u){p(this.red,"redMul works only with red numbers");this.red._verify2(this,u);return this.red.imul(this,u)};a.prototype.redSqr=function(){p(this.red,"redSqr works only with red numbers");this.red._verify1(this);return this.red.sqr(this)};a.prototype.redISqr=function(){p(this.red,"redISqr works only with red numbers");
this.red._verify1(this);return this.red.isqr(this)};a.prototype.redSqrt=function(){p(this.red,"redSqrt works only with red numbers");this.red._verify1(this);return this.red.sqrt(this)};a.prototype.redInvm=function(){p(this.red,"redInvm works only with red numbers");this.red._verify1(this);return this.red.invm(this)};a.prototype.redNeg=function(){p(this.red,"redNeg works only with red numbers");this.red._verify1(this);return this.red.neg(this)};a.prototype.redPow=function(u){p(this.red&&!u.red,"redPow(normalNum)");
this.red._verify1(this);return this.red.pow(this,u)};var C={k256:null,p224:null,p192:null,p25519:null};c.prototype._tmp=function(){var u=new a(null);u.words=Array(Math.ceil(this.n/13));return u};c.prototype.ireduce=function(u){do{this.split(u,this.tmp);u=this.imulK(u);u=u.iadd(this.tmp);var F=u.bitLength()}while(F>this.n);F=F<this.n?-1:u.ucmp(this.p);0===F?(u.words[0]=0,u.length=1):0<F?u.isub(this.p):u.strip();return u};c.prototype.split=function(u,F){u.iushrn(this.n,0,F)};c.prototype.imulK=function(u){return u.imul(this.k)};
k(d,c);d.prototype.split=function(u,F){for(var H=Math.min(u.length,9),J=0;J<H;J++)F.words[J]=u.words[J];F.length=H;if(9>=u.length)u.words[0]=0,u.length=1;else{H=u.words[9];F.words[F.length++]=H&4194303;for(J=10;J<u.length;J++)F=u.words[J]|0,u.words[J-10]=(F&4194303)<<4|H>>>22,H=F;H>>>=22;u.words[J-10]=H;u.length=0===H&&10<u.length?u.length-10:u.length-9}};d.prototype.imulK=function(u){u.words[u.length]=0;u.words[u.length+1]=0;u.length+=2;for(var F=0,H=0;H<u.length;H++){var J=u.words[H]|0;F+=977*J;
u.words[H]=F&67108863;F=64*J+(F/67108864|0)}0===u.words[u.length-1]&&(u.length--,0===u.words[u.length-1]&&u.length--);return u};k(g,c);k(h,c);k(q,c);q.prototype.imulK=function(u){for(var F=0,H=0;H<u.length;H++){F=19*(u.words[H]|0)+F;var J=F&67108863;F>>>=26;u.words[H]=J}0!==F&&(u.words[u.length++]=F);return u};a._prime=function(u){if(C[u])return C[u];if("k256"===u)var F=new d;else if("p224"===u)F=new g;else if("p192"===u)F=new h;else if("p25519"===u)F=new q;else throw Error("Unknown prime "+u);return C[u]=
F};t.prototype._verify1=function(u){p(0===u.negative,"red works only with positives");p(u.red,"red works only with red numbers")};t.prototype._verify2=function(u,F){p(0===(u.negative|F.negative),"red works only with positives");p(u.red&&u.red===F.red,"red works only with red numbers")};t.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):u.umod(this.m)._forceRed(this)};t.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)};t.prototype.add=
function(u,F){this._verify2(u,F);u=u.add(F);0<=u.cmp(this.m)&&u.isub(this.m);return u._forceRed(this)};t.prototype.iadd=function(u,F){this._verify2(u,F);u=u.iadd(F);0<=u.cmp(this.m)&&u.isub(this.m);return u};t.prototype.sub=function(u,F){this._verify2(u,F);u=u.sub(F);0>u.cmpn(0)&&u.iadd(this.m);return u._forceRed(this)};t.prototype.isub=function(u,F){this._verify2(u,F);u=u.isub(F);0>u.cmpn(0)&&u.iadd(this.m);return u};t.prototype.shl=function(u,F){this._verify1(u);return this.imod(u.ushln(F))};t.prototype.imul=
function(u,F){this._verify2(u,F);return this.imod(u.imul(F))};t.prototype.mul=function(u,F){this._verify2(u,F);return this.imod(u.mul(F))};t.prototype.isqr=function(u){return this.imul(u,u.clone())};t.prototype.sqr=function(u){return this.mul(u,u)};t.prototype.sqrt=function(u){if(u.isZero())return u.clone();var F=this.m.andln(3);p(1===F%2);if(3===F)return F=this.m.add(new a(1)).iushrn(2),this.pow(u,F);for(var H=this.m.subn(1),J=0;!H.isZero()&&0===H.andln(1);)J++,H.iushrn(1);p(!H.isZero());F=(new a(1)).toRed(this);
var I=F.redNeg(),M=this.m.subn(1).iushrn(1),E=this.m.bitLength();for(E=(new a(2*E*E)).toRed(this);0!==this.pow(E,M).cmp(I);)E.redIAdd(I);M=this.pow(E,H);I=this.pow(u,H.addn(1).iushrn(1));u=this.pow(u,H);for(H=J;0!==u.cmp(F);){E=u;for(J=0;0!==E.cmp(F);J++)E=E.redSqr();p(J<H);M=this.pow(M,(new a(1)).iushln(H-J-1));I=I.redMul(M);M=M.redSqr();u=u.redMul(M);H=J}return I};t.prototype.invm=function(u){u=u._invmp(this.m);return 0!==u.negative?(u.negative=0,this.imod(u).redNeg()):this.imod(u)};t.prototype.pow=
function(u,F){if(F.isZero())return(new a(1)).toRed(this);if(0===F.cmpn(1))return u.clone();var H=Array(16);H[0]=(new a(1)).toRed(this);H[1]=u;for(var J=2;J<H.length;J++)H[J]=this.mul(H[J-1],u);u=H[0];var I=0,M=0,E=F.bitLength()%26;0===E&&(E=26);for(J=F.length-1;0<=J;J--){var L=F.words[J];for(--E;0<=E;E--){var P=L>>E&1;u!==H[0]&&(u=this.sqr(u));if(0===P&&0===I)M=0;else if(I<<=1,I|=P,M++,4===M||0===J&&0===E)u=this.mul(u,H[I]),I=M=0}E=26}return u};t.prototype.convertTo=function(u){var F=u.umod(this.m);
return F===u?F.clone():F};t.prototype.convertFrom=function(u){u=u.clone();u.red=null;return u};a.mont=function(u){return new v(u)};k(v,t);v.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))};v.prototype.convertFrom=function(u){u=this.imod(u.mul(this.rinv));u.red=null;return u};v.prototype.imul=function(u,F){if(u.isZero()||F.isZero())return u.words[0]=0,u.length=1,u;u=u.imul(F);F=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);F=u=u.isub(F).iushrn(this.shift);
0<=u.cmp(this.m)?F=u.isub(this.m):0>u.cmpn(0)&&(F=u.iadd(this.m));return F._forceRed(this)};v.prototype.mul=function(u,F){if(u.isZero()||F.isZero())return(new a(0))._forceRed(this);u=u.mul(F);F=u.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m);F=u=u.isub(F).iushrn(this.shift);0<=u.cmp(this.m)?F=u.isub(this.m):0>u.cmpn(0)&&(F=u.iadd(this.m));return F._forceRed(this)};v.prototype.invm=function(u){return this.imod(u._invmp(this.m).mul(this.r2))._forceRed(this)}})("undefined"===typeof D||
D,this)},{buffer:108}],100:[function(b,D,G){D.exports=function(r){var n,p,k,a=r.length;for(n=p=0;n<a;++n)p+=r[n].length;var e=Array(p),f=0;for(n=0;n<a;++n){var l=r[n],m=l.length;for(p=0;p<m;++p){var c=e[f++]=Array(m-1),d=0;for(k=0;k<m;++k)k!==p&&(c[d++]=l[k]);p&1&&(k=c[1],c[1]=c[0],c[0]=k)}}return e}},{}],101:[function(b,D,G){function r(l,m,c,d){for(var g=0,h=0,q=0,t=l.length;q<t;++q){var v=l[q],w;a:{for(w=0;w<m;++w)if(!(v[w]<=v[w+m])){w=!0;break a}w=!1}if(!w){for(w=0;w<2*m;++w)c[g++]=v[w];d[h++]=
q}}return h}function n(l,m,c,d){var g=l.length,h=m.length;if(!(0>=g||0>=h)){var q=l[0].length>>>1;if(!(0>=q)){var t=k.mallocDouble(2*q*g),v=k.mallocInt32(g);g=r(l,q,t,v);if(0<g){if(1===q&&d){a.init(g);var w=a.sweepComplete(q,c,0,g,t,v,0,g,t,v)}else{l=k.mallocDouble(2*q*h);var A=k.mallocInt32(h);h=r(m,q,l,A);0<h&&(a.init(g+h),w=1===q?a.sweepBipartite(q,c,0,g,t,v,0,h,l,A):e(q,c,d,g,t,v,h,l,A),k.free(l),k.free(A))}k.free(t);k.free(v)}return w}}}function p(l,m){f.push([l,m])}D.exports=function(l,m,c){switch(arguments.length){case 1:return f=
[],n(l,l,p,!0),f;case 2:if("function"===typeof m)return n(l,l,m,!0);f=[];n(l,m,p,!1);return f;case 3:return n(l,m,c,!1);default:throw Error("box-intersect: Invalid arguments");}};var k=b("typedarray-pool"),a=b("./lib/sweep"),e=b("./lib/intersect"),f},{"./lib/intersect":103,"./lib/sweep":107,"typedarray-pool":567}],102:[function(b,D,G){function r(p){function k(m,c){var d="bruteForce"+(m?"Red":"Blue")+(c?"Flip":"")+(p?"Full":""),g=["function ",d,"(",n.join(),"){","var ","es","\x3d2*","d",";"],h="for(var j\x3dbs,bp\x3des*bs;j\x3cbe;++j,bp+\x3des){var y0\x3dbb[ax+bp],"+
(p?"y1\x3dbb[ax+bp+d],":"")+"yi\x3dbi[j];";m?g.push("for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];","Q",":",h):g.push(h,"Q",":","for(var i\x3drs,rp\x3des*rs;i\x3cre;++i,rp+\x3des){var x0\x3drb[ax+rp],x1\x3drb[ax+rp+d],xi\x3dri[i];");p?g.push("if(y1\x3cx0||x1\x3cy0)continue;"):c?g.push("if(y0\x3c\x3dx0||x1\x3cy0)continue;"):g.push("if(y0\x3cx0||x1\x3cy0)continue;");g.push("for(var k\x3dax+1;k\x3cd;++k){var r0\x3drb[k+rp],r1\x3drb[k+d+rp],b0\x3dbb[k+bp],b1\x3dbb[k+d+bp];if(r1\x3cb0||b1\x3cr0)continue Q;}var rv\x3dvv(");
c?g.push("yi,xi"):g.push("xi,yi");g.push(");if(rv!\x3d\x3dvoid 0)return rv;}}}");m=g.join("");e.push(m);l.push("return "+d+"("+n.join()+");")}var a="bruteForce"+(p?"Full":"Partial"),e=[],f=n.slice();p||f.splice(3,0,"fp");var l=["function "+a+"("+f.join()+"){"];l.push("if(re-rs\x3ebe-bs){");p?(k(!0,!1),l.push("}else{"),k(!1,!1)):(l.push("if(fp){"),k(!0,!0),l.push("}else{"),k(!0,!1),l.push("}}else{if(fp){"),k(!1,!0),l.push("}else{"),k(!1,!1),l.push("}"));l.push("}}return "+a);a=e.join("")+l.join("");
return(new Function(a))()}var n="d ax vv rs re rb ri bs be bb bi".split(" ");G.partial=r(!1);G.full=r(!0)},{}],103:[function(b,D,G){function r(B,C,u,F,H,J,I,M,E){var L=w*B;z[L]=C;z[L+1]=u;z[L+2]=F;z[L+3]=H;z[L+4]=J;z[L+5]=I;B*=A;y[B]=M;y[B+1]=E}D.exports=function(B,C,u,F,H,J,I,M,E){var L=8*p.log2(F+I+1)*(B+1)|0,P=p.nextPow2(w*L);z.length<P&&(n.free(z),z=n.mallocInt32(P));L=p.nextPow2(A*L);y.length<L&&(n.free(y),y=n.mallocDouble(L));L=0;P=2*B;r(L++,0,0,F,0,I,u?16:0,-Infinity,Infinity);for(u||r(L++,
0,0,I,0,F,1,-Infinity,Infinity);0<L;){--L;u=L*w;var N=z[u];I=z[u+1];var Q=z[u+2],O=z[u+3],T=z[u+4];u=z[u+5];F=L*A;var V=y[F],Z=y[F+1],aa=u&1,Y=!!(u&16),ea=H,ca=J,ba=M;F=E;aa&&(ea=M,ca=E,ba=H,F=J);if(u&2&&(Q=h(B,N,I,Q,ea,ca,Z),I>=Q))continue;if(u&4&&(I=q(B,N,I,Q,ea,ca,V),I>=Q))continue;u=Q-I;var ka=T-O;if(Y){if(B*u*(u+ka)<c){var qa=e.scanComplete(B,N,C,I,Q,ea,ca,O,T,ba,F);if(void 0!==qa)return qa;continue}}else if(B*Math.min(u,ka)<l){qa=k(B,N,C,aa,I,Q,ea,ca,O,T,ba,F);if(void 0!==qa)return qa;continue}else if(B*
u*ka<m){qa=e.scanBipartite(B,N,C,aa,I,Q,ea,ca,O,T,ba,F);if(void 0!==qa)return qa;continue}u=d(B,N,I,Q,ea,ca,V,Z);if(I<u)if(B*(u-I)<l){if(qa=a(B,N+1,C,I,u,ea,ca,O,T,ba,F),void 0!==qa)return qa}else if(N===B-2){if(qa=aa?e.sweepBipartite(B,C,O,T,ba,F,I,u,ea,ca):e.sweepBipartite(B,C,I,u,ea,ca,O,T,ba,F),void 0!==qa)return qa}else r(L++,N+1,I,u,O,T,aa,-Infinity,Infinity),r(L++,N+1,O,T,I,u,aa^1,-Infinity,Infinity);if(u<Q)if(I=f(B,N,O,T,ba,F),qa=ba[P*I+N],ka=g(B,N,I,T,ba,F,qa),ka<T&&r(L++,N,u,Q,ka,T,(aa|
4)+(Y?16:0),qa,Z),O<I&&r(L++,N,u,Q,O,I,(aa|2)+(Y?16:0),V,qa),I+1===ka){if(Y)a:{O=B;T=C;F=F[I];aa=2*O;I*=aa;V=ba[I+N];Z=u;u*=aa;b:for(;Z<Q;++Z,u+=aa)if(Y=ca[Z],Y!==F&&(ka=ea[u+N],qa=ea[u+N+O],!(V<ka||qa<V))){for(var pa=N+1;pa<O;++pa){ka=ea[u+pa];qa=ea[u+pa+O];var oa=ba[I+pa+O];if(qa<ba[I+pa]||oa<ka)continue b}Y=T(Y,F);if(void 0!==Y){qa=Y;break a}}qa=void 0}else a:{O=B;T=C;F=F[I];V=2*O;I*=V;Z=ba[I+N];Y=u;u*=V;b:for(;Y<Q;++Y,u+=V)if(ka=ea[u+N],qa=ea[u+N+O],!(Z<ka||qa<Z||aa&&Z===ka)){pa=ca[Y];for(oa=
N+1;oa<O;++oa){ka=ea[u+oa];qa=ea[u+oa+O];var ja=ba[I+oa+O];if(qa<ba[I+oa]||ja<ka)continue b}ka=aa?T(F,pa):T(pa,F);if(void 0!==ka){qa=ka;break a}}qa=void 0}if(void 0!==qa)return qa}else if(I<ka)if(Y){if(Q=t(B,N,u,Q,ea,ca,qa),u<Q)if(O=g(B,N,u,Q,ea,ca,qa),N===B-2){if(u<O&&(qa=e.sweepComplete(B,C,u,O,ea,ca,I,ka,ba,F),void 0!==qa)||O<Q&&(qa=e.sweepBipartite(B,C,O,Q,ea,ca,I,ka,ba,F),void 0!==qa))return qa}else u<O&&r(L++,N+1,u,O,I,ka,16,-Infinity,Infinity),O<Q&&(r(L++,N+1,O,Q,I,ka,0,-Infinity,Infinity),
r(L++,N+1,I,ka,O,Q,1,-Infinity,Infinity))}else Q=aa?v(B,N,u,Q,ea,ca,qa):t(B,N,u,Q,ea,ca,qa),u<Q&&(N===B-2?aa?e.sweepBipartite(B,C,I,ka,ba,F,u,Q,ea,ca):e.sweepBipartite(B,C,u,Q,ea,ca,I,ka,ba,F):(r(L++,N+1,u,Q,I,ka,aa,-Infinity,Infinity),r(L++,N+1,I,ka,u,Q,aa^1,-Infinity,Infinity)))}};var n=b("typedarray-pool"),p=b("bit-twiddle");D=b("./brute");var k=D.partial,a=D.full,e=b("./sweep"),f=b("./median");b=b("./partition");var l=128,m=4194304,c=4194304,d=b("!(lo\x3e\x3dp0)\x26\x26!(p1\x3e\x3dhi)",["p0",
"p1"]),g=b("lo\x3d\x3d\x3dp0",["p0"]),h=b("lo\x3cp0",["p0"]),q=b("hi\x3c\x3dp0",["p0"]),t=b("lo\x3c\x3dp0\x26\x26p0\x3c\x3dhi",["p0"]),v=b("lo\x3cp0\x26\x26p0\x3c\x3dhi",["p0"]),w=6,A=2,z=n.mallocInt32(1024),y=n.mallocDouble(1024)},{"./brute":102,"./median":104,"./partition":105,"./sweep":107,"bit-twiddle":97,"typedarray-pool":567}],104:[function(b,D,G){D.exports=function(p,k,a,e,f,l){if(e<=a+1)return a;var m=a,c=e;e=e+a>>>1;for(var d=2*p,g,h;m<c;){if(c-m<n){g=k;h=f;for(var q=l,t=2*p,v=t*(m+1)+g,
w=m+1;w<c;++w,v+=t)for(var A=h[v],z=w,y=t*(w-1);z>m&&h[y+g]>A;--z,y-=t){for(var B=y,C=y+t,u=0;u<t;++u,++B,++C){var F=h[B];h[B]=h[C];h[C]=F}B=q[z];q[z]=q[z-1];q[z-1]=B}break}v=c-m;g=Math.random()*v+m|0;h=f[d*g+k];t=Math.random()*v+m|0;q=f[d*t+k];w=Math.random()*v+m|0;v=f[d*w+k];h<=q?v>=q?(g=t,h=q):h>=v||(g=w,h=v):q>=v?(g=t,h=q):v>=h||(g=w,h=v);q=d*(c-1);t=d*g;for(v=0;v<d;++v,++q,++t)w=f[q],f[q]=f[t],f[t]=w;q=l[c-1];l[c-1]=l[g];l[g]=q;g=r(p,k,m,c-1,f,l,h);q=d*(c-1);t=d*g;for(v=0;v<d;++v,++q,++t)w=f[q],
f[q]=f[t],f[t]=w;q=l[c-1];l[c-1]=l[g];l[g]=q;if(e<g){for(c=g-1;m<c&&f[d*(c-1)+k]===h;)--c;c+=1}else if(g<e)for(m=g+1;m<c&&f[d*m+k]===h;)m+=1;else break}return r(p,k,a,e,f,l,f[d*e+k])};var r=b("./partition")("lo\x3cp0",["p0"]),n=8},{"./partition":105}],105:[function(b,D,G){D.exports=function(n,p){p="abcdef".split("").concat(p);var k=[];0<=n.indexOf("lo")&&k.push("lo\x3de[k+n]");0<=n.indexOf("hi")&&k.push("hi\x3de[k+o]");p.push(r.replace("_",k.join()).replace("$",n));return Function.apply(void 0,p)};
var r="for(var j\x3d2*a,k\x3dj*c,l\x3dk,m\x3dc,n\x3db,o\x3da+b,p\x3dc;d\x3ep;++p,k+\x3dj){var _;if($)if(m\x3d\x3d\x3dp)m+\x3d1,l+\x3dj;else{for(var s\x3d0;j\x3es;++s){var t\x3de[k+s];e[k+s]\x3de[l],e[l++]\x3dt}var u\x3df[p];f[p]\x3df[m],f[m++]\x3du}}return m"},{}],106:[function(b,D,G){function r(m,c,d){for(var g=2*(m+1),h=m+1;h<=c;++h){for(var q=d[g++],t=d[g++],v=h,w=g-2;v-- >m;){var A=d[w-2],z=d[w-1];if(A<q)break;else if(A===q&&z<t)break;d[w]=A;d[w+1]=z;w-=2}d[w]=q;d[w+1]=t}}function n(m,c,d){m*=
2;c*=2;var g=d[m],h=d[m+1];d[m]=d[c];d[m+1]=d[c+1];d[c]=g;d[c+1]=h}function p(m,c,d){m*=2;c*=2;d[m]=d[c];d[m+1]=d[c+1]}function k(m,c,d,g,h){m*=2;c*=2;h[m]=h[c];h[c]=d;h[m+1]=h[c+1];h[c+1]=g}function a(m,c,d){m*=2;c*=2;var g=d[m],h=d[c];return g<h?!1:g===h?d[m+1]>d[c+1]:!0}function e(m,c,d,g){m*=2;var h=g[m];return h<c?!0:h===c?g[m+1]<d:!1}function f(m,c,d){var g=(c-m+1)/6|0,h=m+g,q=c-g,t=m+c>>1,v=t-g,w=t+g,A=h,z=v,y=t,B=w,C=q;g=m+1;var u=c-1;if(a(A,z,d)){var F=A;A=z;z=F}a(B,C,d)&&(F=B,B=C,C=F);a(A,
y,d)&&(F=A,A=y,y=F);a(z,y,d)&&(F=z,z=y,y=F);a(A,B,d)&&(F=A,A=B,B=F);a(y,B,d)&&(F=y,y=B,B=F);a(z,C,d)&&(F=z,z=C,C=F);a(z,y,d)&&(F=z,z=y,y=F);a(B,C,d)&&(F=B,B=C,C=F);F=d[2*z];z=d[2*z+1];var H=d[2*B];B=d[2*B+1];A*=2;y*=2;C*=2;h*=2;t*=2;q*=2;for(var J=0;2>J;++J){var I=d[y+J],M=d[C+J];d[h+J]=d[A+J];d[t+J]=I;d[q+J]=M}p(v,m,d);p(w,c,d);for(v=g;v<=u;++v)if(e(v,F,z,d))v!==g&&n(v,g,d),++g;else if(!e(v,H,B,d))for(;;)if(e(u,H,B,d)){e(u,F,z,d)?(w=v,q=g,t=u,A=d,w*=2,q*=2,t*=2,h=A[w],y=A[w+1],A[w]=A[q],A[w+1]=A[q+
1],A[q]=A[t],A[q+1]=A[t+1],A[t]=h,A[t+1]=y,++g):n(v,u,d);--u;break}else if(--u<v)break;k(m,g-1,F,z,d);k(c,u+1,H,B,d);g-2-m<=l?r(m,g-2,d):f(m,g-2,d);c-(u+2)<=l?r(u+2,c,d):f(u+2,c,d);u-g<=l?r(g,u,d):f(g,u,d)}D.exports=function(m,c){c<=4*l?r(0,c-1,m):f(0,c-1,m)};var l=32},{}],107:[function(b,D,G){function r(h,q,t,v){v=q[v];t=h[t-1];h[v]=t;q[t]=v}D.exports={init:function(h){h=p.nextPow2(h);e.length<h&&(n.free(e),e=n.mallocInt32(h));f.length<h&&(n.free(f),f=n.mallocInt32(h));l.length<h&&(n.free(l),l=n.mallocInt32(h));
m.length<h&&(n.free(m),m=n.mallocInt32(h));c.length<h&&(n.free(c),c=n.mallocInt32(h));d.length<h&&(n.free(d),d=n.mallocInt32(h));h*=8;g.length<h&&(n.free(g),g=n.mallocDouble(h))},sweepBipartite:function(h,q,t,v,w,A,z,y,B,C){var u=0,F=2*h;--h;for(var H=F-1;t<v;++t){var J=A[t],I=F*t;g[u++]=w[I+h];g[u++]=-(J+1);g[u++]=w[I+H];g[u++]=J}for(t=z;t<y;++t)J=C[t]+a,v=F*t,g[u++]=B[v+h],g[u++]=-J,g[u++]=B[v+H],g[u++]=J;y=u>>>1;k(g,y);for(t=C=B=0;t<y;++t)if(u=g[2*t+1]|0,u>=a)u=u-a|0,r(l,m,C--,u);else if(0<=u)r(e,
f,B--,u);else if(u<=-a){u=-u-a|0;for(F=0;F<B;++F)if(v=q(e[F],u),void 0!==v)return v;F=m;v=C++;l[v]=u;F[u]=v}else{u=-u-1|0;for(F=0;F<C;++F)if(v=q(u,l[F]),void 0!==v)return v;F=f;v=B++;e[v]=u;F[u]=v}},sweepComplete:function(h,q,t,v,w,A,z,y,B,C){var u=0,F=2*h;--h;for(var H=F-1;t<v;++t){var J=A[t]+1<<1,I=F*t;g[u++]=w[I+h];g[u++]=-J;g[u++]=w[I+H];g[u++]=J}for(t=z;t<y;++t)J=C[t]+1<<1,v=F*t,g[u++]=B[v+h],g[u++]=-J|1,g[u++]=B[v+H],g[u++]=J|1;y=u>>>1;k(g,y);for(t=u=C=B=0;t<y;++t)if(F=g[2*t+1]|0,v=F&1,t<y-
1&&F>>1===g[2*t+3]>>1&&(v=2,t+=1),0>F){F=-(F>>1)-1;for(w=0;w<u;++w)if(A=q(c[w],F),void 0!==A)return A;if(0!==v)for(w=0;w<B;++w)if(A=q(e[w],F),void 0!==A)return A;if(1!==v)for(w=0;w<C;++w)if(A=q(l[w],F),void 0!==A)return A;0===v?(v=f,w=B++,e[w]=F,v[F]=w):1===v?(v=m,w=C++,l[w]=F,v[F]=w):2===v&&(v=d,w=u++,c[w]=F,v[F]=w)}else F=(F>>1)-1,0===v?r(e,f,B--,F):1===v?r(l,m,C--,F):2===v&&r(c,d,u--,F)},scanBipartite:function(h,q,t,v,w,A,z,y,B,C,u,F){var H=0,J=2*h,I=q+h,M=1,E=1;for(v?E=a:M=a;w<A;++w){var L=w+
M,P=J*w;g[H++]=z[P+q];g[H++]=-L;g[H++]=z[P+I];g[H++]=L}for(w=B;w<C;++w)L=w+E,A=J*w,g[H++]=u[A+q],g[H++]=-L;C=H>>>1;k(g,C);for(w=H=0;w<C;++w)if(L=g[2*w+1]|0,0>L)if(L=-L,L>=a?(E=!v,L-=a):(E=!!v,--L),E)E=f,A=H++,e[A]=L,E[L]=A;else a:for(E=F[L],L*=J,A=u[L+q+1],B=u[L+q+1+h],I=0;I<H;++I){P=e[I];var N=J*P;if(!(B<z[N+q+1]||z[N+q+1+h]<A)){for(var Q=q+2;Q<h;++Q)if(u[L+Q+h]<z[N+Q]||z[N+Q+h]<u[L+Q])continue a;P=y[P];P=v?t(E,P):t(P,E);if(void 0!==P)return P}}else r(e,f,H--,L-M)},scanComplete:function(h,q,t,v,
w,A,z,y,B,C,u){for(var F=0,H=2*h,J=q+h;v<w;++v){var I=v+a,M=H*v;g[F++]=A[M+q];g[F++]=-I;g[F++]=A[M+J];g[F++]=I}for(v=y;v<B;++v)I=v+1,w=H*v,g[F++]=C[w+q],g[F++]=-I;B=F>>>1;k(g,B);for(v=F=0;v<B;++v)if(w=g[2*v+1]|0,0>w)if(I=-w,I>=a)e[F++]=I-a;else a:for(--I,w=u[I],I*=H,J=C[I+q+1],M=C[I+q+1+h],y=0;y<F;++y){var E=e[y],L=z[E];if(L===w)break;E*=H;if(!(M<A[E+q+1]||A[E+q+1+h]<J)){for(var P=q+2;P<h;++P)if(C[I+P+h]<A[E+P]||A[E+P+h]<C[I+P])continue a;L=t(L,w);if(void 0!==L)return L}}else{I=w-a;for(y=F-1;0<=y;--y)if(e[y]===
I){for(P=y+1;P<F;++P)e[P-1]=e[P];break}--F}}};var n=b("typedarray-pool"),p=b("bit-twiddle"),k=b("./sort"),a=268435456,e=n.mallocInt32(1024),f=n.mallocInt32(1024),l=n.mallocInt32(1024),m=n.mallocInt32(1024),c=n.mallocInt32(1024),d=n.mallocInt32(1024),g=n.mallocDouble(8192)},{"./sort":106,"bit-twiddle":97,"typedarray-pool":567}],108:[function(b,D,G){},{}],109:[function(b,D,G){arguments[4][108][0].apply(G,arguments)},{dup:108}],110:[function(b,D,G){function r(){this._events&&Object.prototype.hasOwnProperty.call(this,
"_events")||(this._events=d(null),this._eventsCount=0);this._maxListeners=this._maxListeners||void 0}function n(v,w,A,z){var y;if("function"!==typeof A)throw new TypeError('"listener" argument must be a function');if(y=v._events){y.newListener&&(v.emit("newListener",w,A.listener?A.listener:A),y=v._events);var B=y[w]}else y=v._events=d(null),v._eventsCount=0;B?("function"===typeof B?B=y[w]=z?[A,B]:[B,A]:z?B.unshift(A):B.push(A),B.warned||(A=void 0===v._maxListeners?r.defaultMaxListeners:v._maxListeners)&&
0<A&&B.length>A&&(B.warned=!0,A=Error("Possible EventEmitter memory leak detected. "+B.length+' "'+String(w)+'" listeners added. Use emitter.setMaxListeners() to increase limit.'),A.name="MaxListenersExceededWarning",A.emitter=v,A.type=w,A.count=B.length,"object"===typeof console&&console.warn&&console.warn("%s: %s",A.name,A.message))):(y[w]=A,++v._eventsCount);return v}function p(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);
case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var v=Array(arguments.length),w=0;w<v.length;++w)v[w]=arguments[w];this.listener.apply(this.target,v)}}function k(v,w,A){v={fired:!1,wrapFn:void 0,target:v,type:w,listener:A};w=h.call(p,v);w.listener=A;return v.wrapFn=w}function a(v,w,A){v=v._events;if(!v)return[];w=v[w];if(!w)return[];
if("function"===typeof w)return A?[w.listener||w]:[w];if(A)for(A=Array(w.length),v=0;v<A.length;++v)A[v]=w[v].listener||w[v];else A=f(w,w.length);return A}function e(v){var w=this._events;if(w){v=w[v];if("function"===typeof v)return 1;if(v)return v.length}return 0}function f(v,w){for(var A=Array(w),z=0;z<w;++z)A[z]=v[z];return A}function l(v){var w=function(){};w.prototype=v;return new w}function m(v){var w=[],A;for(A in v)Object.prototype.hasOwnProperty.call(v,A)&&w.push(A);return A}function c(v){var w=
this;return function(){return w.apply(v,arguments)}}var d=Object.create||l,g=Object.keys||m,h=Function.prototype.bind||c;D.exports=r;r.EventEmitter=r;r.prototype._events=void 0;r.prototype._maxListeners=void 0;var q=10;try{b={};Object.defineProperty&&Object.defineProperty(b,"x",{value:0});var t=0===b.x}catch(v){t=!1}t?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return q},set:function(v){if("number"!==typeof v||0>v||v!==v)throw new TypeError('"defaultMaxListeners" must be a positive number');
q=v}}):r.defaultMaxListeners=q;r.prototype.setMaxListeners=function(v){if("number"!==typeof v||0>v||isNaN(v))throw new TypeError('"n" argument must be a positive number');this._maxListeners=v;return this};r.prototype.getMaxListeners=function(){return void 0===this._maxListeners?r.defaultMaxListeners:this._maxListeners};r.prototype.emit=function(v){var w,A,z;var y="error"===v;if(z=this._events)y=y&&null==z.error;else if(!y)return!1;if(y){1<arguments.length&&(w=arguments[1]);if(w instanceof Error)throw w;
z=Error('Unhandled "error" event. ('+w+")");z.context=w;throw z;}w=z[v];if(!w)return!1;z="function"===typeof w;var B=arguments.length;switch(B){case 1:if(z)w.call(this);else for(z=w.length,w=f(w,z),y=0;y<z;++y)w[y].call(this);break;case 2:y=arguments[1];if(z)w.call(this,y);else for(z=w.length,w=f(w,z),B=0;B<z;++B)w[B].call(this,y);break;case 3:y=arguments[1];B=arguments[2];if(z)w.call(this,y,B);else for(z=w.length,w=f(w,z),A=0;A<z;++A)w[A].call(this,y,B);break;case 4:y=arguments[1];B=arguments[2];
A=arguments[3];if(z)w.call(this,y,B,A);else{z=w.length;w=f(w,z);for(var C=0;C<z;++C)w[C].call(this,y,B,A)}break;default:y=Array(B-1);for(A=1;A<B;A++)y[A-1]=arguments[A];if(z)w.apply(this,y);else for(z=w.length,w=f(w,z),B=0;B<z;++B)w[B].apply(this,y)}return!0};r.prototype.addListener=function(v,w){return n(this,v,w,!1)};r.prototype.on=r.prototype.addListener;r.prototype.prependListener=function(v,w){return n(this,v,w,!0)};r.prototype.once=function(v,w){if("function"!==typeof w)throw new TypeError('"listener" argument must be a function');
this.on(v,k(this,v,w));return this};r.prototype.prependOnceListener=function(v,w){if("function"!==typeof w)throw new TypeError('"listener" argument must be a function');this.prependListener(v,k(this,v,w));return this};r.prototype.removeListener=function(v,w){var A;if("function"!==typeof w)throw new TypeError('"listener" argument must be a function');var z=this._events;if(!z)return this;var y=z[v];if(!y)return this;if(y===w||y.listener===w)0===--this._eventsCount?this._events=d(null):(delete z[v],
z.removeListener&&this.emit("removeListener",v,y.listener||w));else if("function"!==typeof y){var B=-1;for(A=y.length-1;0<=A;A--)if(y[A]===w||y[A].listener===w){var C=y[A].listener;B=A;break}if(0>B)return this;if(0===B)y.shift();else{A=B+1;for(var u=y.length;A<u;B+=1,A+=1)y[B]=y[A];y.pop()}1===y.length&&(z[v]=y[0]);z.removeListener&&this.emit("removeListener",v,C||w)}return this};r.prototype.removeAllListeners=function(v){var w=this._events;if(!w)return this;if(!w.removeListener)return 0===arguments.length?
(this._events=d(null),this._eventsCount=0):w[v]&&(0===--this._eventsCount?this._events=d(null):delete w[v]),this;if(0===arguments.length){var A=g(w);for(w=0;w<A.length;++w){var z=A[w];"removeListener"!==z&&this.removeAllListeners(z)}this.removeAllListeners("removeListener");this._events=d(null);this._eventsCount=0;return this}A=w[v];if("function"===typeof A)this.removeListener(v,A);else if(A)for(w=A.length-1;0<=w;w--)this.removeListener(v,A[w]);return this};r.prototype.listeners=function(v){return a(this,
v,!0)};r.prototype.rawListeners=function(v){return a(this,v,!1)};r.listenerCount=function(v,w){return"function"===typeof v.listenerCount?v.listenerCount(w):e.call(v,w)};r.prototype.listenerCount=e;r.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],111:[function(b,D,G){(function(r){function n(E){if(2147483647<E)throw new RangeError('The value "'+E+'" is invalid for option "size"');E=new Uint8Array(E);E.__proto__=r.prototype;return E}function r(E,L,P){if("number"===
typeof E){if("string"===typeof L)throw new TypeError('The "string" argument must be of type string. Received type number');return a(E)}return p(E,L,P)}function p(E,L,P){if("string"===typeof E){var N=L;if("string"!==typeof N||""===N)N="utf8";if(!r.isEncoding(N))throw new TypeError("Unknown encoding: "+N);L=m(E,N)|0;P=n(L);E=P.write(E,N);E!==L&&(P=P.slice(0,E));return P}if(ArrayBuffer.isView(E))return e(E);if(null==E)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+
typeof E);if(F(E,ArrayBuffer)||E&&F(E.buffer,ArrayBuffer)){if(0>L||E.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(E.byteLength<L+(P||0))throw new RangeError('"length" is outside of buffer bounds');E=void 0===L&&void 0===P?new Uint8Array(E):void 0===P?new Uint8Array(E,L):new Uint8Array(E,L,P);E.__proto__=r.prototype;return E}if("number"===typeof E)throw new TypeError('The "value" argument must not be of type number. Received type number');N=E.valueOf&&E.valueOf();if(null!=
N&&N!==E)return r.from(N,L,P);if(N=f(E))return N;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof E[Symbol.toPrimitive])return r.from(E[Symbol.toPrimitive]("string"),L,P);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E);}function k(E){if("number"!==typeof E)throw new TypeError('"size" argument must be of type number');if(0>E)throw new RangeError('The value "'+E+'" is invalid for option "size"');
}function a(E){k(E);return n(0>E?0:l(E)|0)}function e(E){for(var L=0>E.length?0:l(E.length)|0,P=n(L),N=0;N<L;N+=1)P[N]=E[N]&255;return P}function f(E){if(r.isBuffer(E)){var L=l(E.length)|0,P=n(L);if(0===P.length)return P;E.copy(P,0,0,L);return P}if(void 0!==E.length)return(L="number"!==typeof E.length)||(L=E.length,L=L!==L),L?n(0):e(E);if("Buffer"===E.type&&Array.isArray(E.data))return e(E.data)}function l(E){if(2147483647<=E)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+
(2147483647).toString(16)+" bytes");return E|0}function m(E,L){if(r.isBuffer(E))return E.length;if(ArrayBuffer.isView(E)||F(E,ArrayBuffer))return E.byteLength;if("string"!==typeof E)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof E);var P=E.length,N=2<arguments.length&&!0===arguments[2];if(!N&&0===P)return 0;for(var Q=!1;;)switch(L){case "ascii":case "latin1":case "binary":return P;case "utf8":case "utf-8":return y(E).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*
P;case "hex":return P>>>1;case "base64":return C(E).length;default:if(Q)return N?-1:y(E).length;L=(""+L).toLowerCase();Q=!0}}function c(E,L,P){var N=!1;if(void 0===L||0>L)L=0;if(L>this.length)return"";if(void 0===P||P>this.length)P=this.length;if(0>=P)return"";P>>>=0;L>>>=0;if(P<=L)return"";for(E||(E="utf8");;)switch(E){case "hex":E=L;L=P;P=this.length;if(!E||0>E)E=0;if(!L||0>L||L>P)L=P;N="";for(P=E;P<L;++P)E=N,N=this[P],N=16>N?"0"+N.toString(16):N.toString(16),N=E+N;return N;case "utf8":case "utf-8":return q(this,
L,P);case "ascii":E="";for(P=Math.min(this.length,P);L<P;++L)E+=String.fromCharCode(this[L]&127);return E;case "latin1":case "binary":E="";for(P=Math.min(this.length,P);L<P;++L)E+=String.fromCharCode(this[L]);return E;case "base64":return L=0===L&&P===this.length?H.fromByteArray(this):H.fromByteArray(this.slice(L,P)),L;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":L=this.slice(L,P);P="";for(E=0;E<L.length;E+=2)P+=String.fromCharCode(L[E]+256*L[E+1]);return P;default:if(N)throw new TypeError("Unknown encoding: "+
E);E=(E+"").toLowerCase();N=!0}}function d(E,L,P){var N=E[L];E[L]=E[P];E[P]=N}function g(E,L,P,N,Q){if(0===E.length)return-1;"string"===typeof P?(N=P,P=0):2147483647<P?P=2147483647:-2147483648>P&&(P=-2147483648);P=+P;P!==P&&(P=Q?0:E.length-1);0>P&&(P=E.length+P);if(P>=E.length){if(Q)return-1;P=E.length-1}else if(0>P)if(Q)P=0;else return-1;"string"===typeof L&&(L=r.from(L,N));if(r.isBuffer(L))return 0===L.length?-1:h(E,L,P,N,Q);if("number"===typeof L)return L&=255,"function"===typeof Uint8Array.prototype.indexOf?
Q?Uint8Array.prototype.indexOf.call(E,L,P):Uint8Array.prototype.lastIndexOf.call(E,L,P):h(E,[L],P,N,Q);throw new TypeError("val must be string, number or Buffer");}function h(E,L,P,N,Q){function O(aa,Y){return 1===T?aa[Y]:aa.readUInt16BE(Y*T)}var T=1,V=E.length,Z=L.length;if(void 0!==N&&(N=String(N).toLowerCase(),"ucs2"===N||"ucs-2"===N||"utf16le"===N||"utf-16le"===N)){if(2>E.length||2>L.length)return-1;T=2;V/=2;Z/=2;P/=2}if(Q)for(N=-1;P<V;P++)if(O(E,P)===O(L,-1===N?0:P-N)){if(-1===N&&(N=P),P-N+1===
Z)return N*T}else-1!==N&&(P-=P-N),N=-1;else for(P+Z>V&&(P=V-Z);0<=P;P--){V=!0;for(N=0;N<Z;N++)if(O(E,P+N)!==O(L,N)){V=!1;break}if(V)return P}return-1}function q(E,L,P){P=Math.min(E.length,P);for(var N=[];L<P;){var Q=E[L],O=null,T=239<Q?4:223<Q?3:191<Q?2:1;if(L+T<=P)switch(T){case 1:128>Q&&(O=Q);break;case 2:var V=E[L+1];128===(V&192)&&(Q=(Q&31)<<6|V&63,127<Q&&(O=Q));break;case 3:V=E[L+1];var Z=E[L+2];128===(V&192)&&128===(Z&192)&&(Q=(Q&15)<<12|(V&63)<<6|Z&63,2047<Q&&(55296>Q||57343<Q)&&(O=Q));break;
case 4:V=E[L+1];Z=E[L+2];var aa=E[L+3];128===(V&192)&&128===(Z&192)&&128===(aa&192)&&(Q=(Q&15)<<18|(V&63)<<12|(Z&63)<<6|aa&63,65535<Q&&1114112>Q&&(O=Q))}null===O?(O=65533,T=1):65535<O&&(O-=65536,N.push(O>>>10&1023|55296),O=56320|O&1023);N.push(O);L+=T}E=N.length;if(E<=I)N=String.fromCharCode.apply(String,N);else{P="";for(L=0;L<E;)P+=String.fromCharCode.apply(String,N.slice(L,L+=I));N=P}return N}function t(E,L,P){if(0!==E%1||0>E)throw new RangeError("offset is not uint");if(E+L>P)throw new RangeError("Trying to access beyond buffer length");
}function v(E,L,P,N,Q,O){if(!r.isBuffer(E))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>Q||L<O)throw new RangeError('"value" argument is out of bounds');if(P+N>E.length)throw new RangeError("Index out of range");}function w(E,L,P,N,Q,O){if(P+N>E.length)throw new RangeError("Index out of range");if(0>P)throw new RangeError("Index out of range");}function A(E,L,P,N,Q){L=+L;P>>>=0;Q||w(E,L,P,4,3.4028234663852886E38,-3.4028234663852886E38);J.write(E,L,P,N,23,4);return P+4}function z(E,
L,P,N,Q){L=+L;P>>>=0;Q||w(E,L,P,8,1.7976931348623157E308,-1.7976931348623157E308);J.write(E,L,P,N,52,8);return P+8}function y(E,L){L=L||Infinity;for(var P,N=E.length,Q=null,O=[],T=0;T<N;++T){P=E.charCodeAt(T);if(55295<P&&57344>P){if(!Q){if(56319<P){-1<(L-=3)&&O.push(239,191,189);continue}else if(T+1===N){-1<(L-=3)&&O.push(239,191,189);continue}Q=P;continue}if(56320>P){-1<(L-=3)&&O.push(239,191,189);Q=P;continue}P=(Q-55296<<10|P-56320)+65536}else Q&&-1<(L-=3)&&O.push(239,191,189);Q=null;if(128>P){if(0>
--L)break;O.push(P)}else if(2048>P){if(0>(L-=2))break;O.push(P>>6|192,P&63|128)}else if(65536>P){if(0>(L-=3))break;O.push(P>>12|224,P>>6&63|128,P&63|128)}else if(1114112>P){if(0>(L-=4))break;O.push(P>>18|240,P>>12&63|128,P>>6&63|128,P&63|128)}else throw Error("Invalid code point");}return O}function B(E){for(var L=[],P=0;P<E.length;++P)L.push(E.charCodeAt(P)&255);return L}function C(E){var L=H,P=L.toByteArray;E=E.split("\x3d")[0];E=E.trim().replace(M,"");if(2>E.length)E="";else for(;0!==E.length%
4;)E+="\x3d";return P.call(L,E)}function u(E,L,P,N){for(var Q=0;Q<N&&!(Q+P>=L.length||Q>=E.length);++Q)L[Q+P]=E[Q];return Q}function F(E,L){return E instanceof L||null!=E&&null!=E.constructor&&null!=E.constructor.name&&E.constructor.name===L.name}var H=b("base64-js"),J=b("ieee754");G.Buffer=r;G.SlowBuffer=function(E){+E!=E&&(E=0);return r.alloc(+E)};G.INSPECT_MAX_BYTES=50;G.kMaxLength=2147483647;r.TYPED_ARRAY_SUPPORT=function(){try{var E=new Uint8Array(1);E.__proto__={__proto__:Uint8Array.prototype,
foo:function(){return 42}};return 42===E.foo()}catch(L){return!1}}();r.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}});Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}});
"undefined"!==typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1});r.poolSize=8192;r.from=function(E,L,P){return p(E,L,P)};r.prototype.__proto__=Uint8Array.prototype;r.__proto__=Uint8Array;r.alloc=function(E,L,P){k(E);E=0>=E?n(E):void 0!==L?"string"===typeof P?n(E).fill(L,P):n(E).fill(L):n(E);return E};r.allocUnsafe=function(E){return a(E)};r.allocUnsafeSlow=function(E){return a(E)};r.isBuffer=function(E){return null!=
E&&!0===E._isBuffer&&E!==r.prototype};r.compare=function(E,L){F(E,Uint8Array)&&(E=r.from(E,E.offset,E.byteLength));F(L,Uint8Array)&&(L=r.from(L,L.offset,L.byteLength));if(!r.isBuffer(E)||!r.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===L)return 0;for(var P=E.length,N=L.length,Q=0,O=Math.min(P,N);Q<O;++Q)if(E[Q]!==L[Q]){P=E[Q];N=L[Q];break}return P<N?-1:N<P?1:0};r.isEncoding=function(E){switch(String(E).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};r.concat=function(E,L){if(!Array.isArray(E))throw new TypeError('"list" argument must be an Array of Buffers');if(0===E.length)return r.alloc(0);var P;if(void 0===L)for(P=L=0;P<E.length;++P)L+=E[P].length;L=r.allocUnsafe(L);var N=0;for(P=0;P<E.length;++P){var Q=E[P];F(Q,Uint8Array)&&(Q=r.from(Q));if(!r.isBuffer(Q))throw new TypeError('"list" argument must be an Array of Buffers');Q.copy(L,N);N+=Q.length}return L};r.byteLength=m;r.prototype._isBuffer=!0;r.prototype.swap16=function(){var E=
this.length;if(0!==E%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var L=0;L<E;L+=2)d(this,L,L+1);return this};r.prototype.swap32=function(){var E=this.length;if(0!==E%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var L=0;L<E;L+=4)d(this,L,L+3),d(this,L+1,L+2);return this};r.prototype.swap64=function(){var E=this.length;if(0!==E%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var L=0;L<E;L+=8)d(this,L,L+7),d(this,L+1,L+6),
d(this,L+2,L+5),d(this,L+3,L+4);return this};r.prototype.toString=function(){var E=this.length;return 0===E?"":0===arguments.length?q(this,0,E):c.apply(this,arguments)};r.prototype.toLocaleString=r.prototype.toString;r.prototype.equals=function(E){if(!r.isBuffer(E))throw new TypeError("Argument must be a Buffer");return this===E?!0:0===r.compare(this,E)};r.prototype.inspect=function(){var E=G.INSPECT_MAX_BYTES;var L=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim();this.length>E&&(L+=" ... ");
return"\x3cBuffer "+L+"\x3e"};r.prototype.compare=function(E,L,P,N,Q){F(E,Uint8Array)&&(E=r.from(E,E.offset,E.byteLength));if(!r.isBuffer(E))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof E);void 0===L&&(L=0);void 0===P&&(P=E?E.length:0);void 0===N&&(N=0);void 0===Q&&(Q=this.length);if(0>L||P>E.length||0>N||Q>this.length)throw new RangeError("out of range index");if(N>=Q&&L>=P)return 0;if(N>=Q)return-1;if(L>=P)return 1;L>>>=0;P>>>=0;N>>>=
0;Q>>>=0;if(this===E)return 0;var O=Q-N,T=P-L,V=Math.min(O,T);N=this.slice(N,Q);E=E.slice(L,P);for(L=0;L<V;++L)if(N[L]!==E[L]){O=N[L];T=E[L];break}return O<T?-1:T<O?1:0};r.prototype.includes=function(E,L,P){return-1!==this.indexOf(E,L,P)};r.prototype.indexOf=function(E,L,P){return g(this,E,L,P,!0)};r.prototype.lastIndexOf=function(E,L,P){return g(this,E,L,P,!1)};r.prototype.write=function(E,L,P,N){if(void 0===L)N="utf8",P=this.length,L=0;else if(void 0===P&&"string"===typeof L)N=L,P=this.length,L=
0;else if(isFinite(L))L>>>=0,isFinite(P)?(P>>>=0,void 0===N&&(N="utf8")):(N=P,P=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Q=this.length-L;if(void 0===P||P>Q)P=Q;if(0<E.length&&(0>P||0>L)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");for(Q=!1;;)switch(N){case "hex":a:{L=Number(L)||0;N=this.length-L;P?(P=Number(P),P>N&&(P=N)):P=N;N=E.length;P>N/2&&(P=N/2);for(N=0;N<P;++N){Q=parseInt(E.substr(2*
N,2),16);if(Q!==Q){E=N;break a}this[L+N]=Q}E=N}return E;case "utf8":case "utf-8":return u(y(E,this.length-L),this,L,P);case "ascii":return u(B(E),this,L,P);case "latin1":case "binary":return u(B(E),this,L,P);case "base64":return u(C(E),this,L,P);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":N=E;Q=this.length-L;for(var O=[],T=0;T<N.length&&!(0>(Q-=2));++T){var V=N.charCodeAt(T);E=V>>8;V%=256;O.push(V);O.push(E)}return u(O,this,L,P);default:if(Q)throw new TypeError("Unknown encoding: "+N);
N=(""+N).toLowerCase();Q=!0}};r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;r.prototype.slice=function(E,L){var P=this.length;E=~~E;L=void 0===L?P:~~L;0>E?(E+=P,0>E&&(E=0)):E>P&&(E=P);0>L?(L+=P,0>L&&(L=0)):L>P&&(L=P);L<E&&(L=E);E=this.subarray(E,L);E.__proto__=r.prototype;return E};r.prototype.readUIntLE=function(E,L,P){E>>>=0;L>>>=0;P||t(E,L,this.length);P=this[E];for(var N=1,Q=0;++Q<L&&(N*=256);)P+=this[E+Q]*N;return P};r.prototype.readUIntBE=
function(E,L,P){E>>>=0;L>>>=0;P||t(E,L,this.length);P=this[E+--L];for(var N=1;0<L&&(N*=256);)P+=this[E+--L]*N;return P};r.prototype.readUInt8=function(E,L){E>>>=0;L||t(E,1,this.length);return this[E]};r.prototype.readUInt16LE=function(E,L){E>>>=0;L||t(E,2,this.length);return this[E]|this[E+1]<<8};r.prototype.readUInt16BE=function(E,L){E>>>=0;L||t(E,2,this.length);return this[E]<<8|this[E+1]};r.prototype.readUInt32LE=function(E,L){E>>>=0;L||t(E,4,this.length);return(this[E]|this[E+1]<<8|this[E+2]<<
16)+16777216*this[E+3]};r.prototype.readUInt32BE=function(E,L){E>>>=0;L||t(E,4,this.length);return 16777216*this[E]+(this[E+1]<<16|this[E+2]<<8|this[E+3])};r.prototype.readIntLE=function(E,L,P){E>>>=0;L>>>=0;P||t(E,L,this.length);P=this[E];for(var N=1,Q=0;++Q<L&&(N*=256);)P+=this[E+Q]*N;P>=128*N&&(P-=Math.pow(2,8*L));return P};r.prototype.readIntBE=function(E,L,P){E>>>=0;L>>>=0;P||t(E,L,this.length);P=L;for(var N=1,Q=this[E+--P];0<P&&(N*=256);)Q+=this[E+--P]*N;Q>=128*N&&(Q-=Math.pow(2,8*L));return Q};
r.prototype.readInt8=function(E,L){E>>>=0;L||t(E,1,this.length);return this[E]&128?-1*(255-this[E]+1):this[E]};r.prototype.readInt16LE=function(E,L){E>>>=0;L||t(E,2,this.length);E=this[E]|this[E+1]<<8;return E&32768?E|4294901760:E};r.prototype.readInt16BE=function(E,L){E>>>=0;L||t(E,2,this.length);E=this[E+1]|this[E]<<8;return E&32768?E|4294901760:E};r.prototype.readInt32LE=function(E,L){E>>>=0;L||t(E,4,this.length);return this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24};r.prototype.readInt32BE=
function(E,L){E>>>=0;L||t(E,4,this.length);return this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]};r.prototype.readFloatLE=function(E,L){E>>>=0;L||t(E,4,this.length);return J.read(this,E,!0,23,4)};r.prototype.readFloatBE=function(E,L){E>>>=0;L||t(E,4,this.length);return J.read(this,E,!1,23,4)};r.prototype.readDoubleLE=function(E,L){E>>>=0;L||t(E,8,this.length);return J.read(this,E,!0,52,8)};r.prototype.readDoubleBE=function(E,L){E>>>=0;L||t(E,8,this.length);return J.read(this,E,!1,52,8)};r.prototype.writeUIntLE=
function(E,L,P,N){E=+E;L>>>=0;P>>>=0;N||v(this,E,L,P,Math.pow(2,8*P)-1,0);N=1;var Q=0;for(this[L]=E&255;++Q<P&&(N*=256);)this[L+Q]=E/N&255;return L+P};r.prototype.writeUIntBE=function(E,L,P,N){E=+E;L>>>=0;P>>>=0;N||v(this,E,L,P,Math.pow(2,8*P)-1,0);N=P-1;var Q=1;for(this[L+N]=E&255;0<=--N&&(Q*=256);)this[L+N]=E/Q&255;return L+P};r.prototype.writeUInt8=function(E,L,P){E=+E;L>>>=0;P||v(this,E,L,1,255,0);this[L]=E&255;return L+1};r.prototype.writeUInt16LE=function(E,L,P){E=+E;L>>>=0;P||v(this,E,L,2,
65535,0);this[L]=E&255;this[L+1]=E>>>8;return L+2};r.prototype.writeUInt16BE=function(E,L,P){E=+E;L>>>=0;P||v(this,E,L,2,65535,0);this[L]=E>>>8;this[L+1]=E&255;return L+2};r.prototype.writeUInt32LE=function(E,L,P){E=+E;L>>>=0;P||v(this,E,L,4,4294967295,0);this[L+3]=E>>>24;this[L+2]=E>>>16;this[L+1]=E>>>8;this[L]=E&255;return L+4};r.prototype.writeUInt32BE=function(E,L,P){E=+E;L>>>=0;P||v(this,E,L,4,4294967295,0);this[L]=E>>>24;this[L+1]=E>>>16;this[L+2]=E>>>8;this[L+3]=E&255;return L+4};r.prototype.writeIntLE=
function(E,L,P,N){E=+E;L>>>=0;N||(N=Math.pow(2,8*P-1),v(this,E,L,P,N-1,-N));N=0;var Q=1,O=0;for(this[L]=E&255;++N<P&&(Q*=256);)0>E&&0===O&&0!==this[L+N-1]&&(O=1),this[L+N]=(E/Q>>0)-O&255;return L+P};r.prototype.writeIntBE=function(E,L,P,N){E=+E;L>>>=0;N||(N=Math.pow(2,8*P-1),v(this,E,L,P,N-1,-N));N=P-1;var Q=1,O=0;for(this[L+N]=E&255;0<=--N&&(Q*=256);)0>E&&0===O&&0!==this[L+N+1]&&(O=1),this[L+N]=(E/Q>>0)-O&255;return L+P};r.prototype.writeInt8=function(E,L,P){E=+E;L>>>=0;P||v(this,E,L,1,127,-128);
0>E&&(E=255+E+1);this[L]=E&255;return L+1};r.prototype.writeInt16LE=function(E,L,P){E=+E;L>>>=0;P||v(this,E,L,2,32767,-32768);this[L]=E&255;this[L+1]=E>>>8;return L+2};r.prototype.writeInt16BE=function(E,L,P){E=+E;L>>>=0;P||v(this,E,L,2,32767,-32768);this[L]=E>>>8;this[L+1]=E&255;return L+2};r.prototype.writeInt32LE=function(E,L,P){E=+E;L>>>=0;P||v(this,E,L,4,2147483647,-2147483648);this[L]=E&255;this[L+1]=E>>>8;this[L+2]=E>>>16;this[L+3]=E>>>24;return L+4};r.prototype.writeInt32BE=function(E,L,P){E=
+E;L>>>=0;P||v(this,E,L,4,2147483647,-2147483648);0>E&&(E=4294967295+E+1);this[L]=E>>>24;this[L+1]=E>>>16;this[L+2]=E>>>8;this[L+3]=E&255;return L+4};r.prototype.writeFloatLE=function(E,L,P){return A(this,E,L,!0,P)};r.prototype.writeFloatBE=function(E,L,P){return A(this,E,L,!1,P)};r.prototype.writeDoubleLE=function(E,L,P){return z(this,E,L,!0,P)};r.prototype.writeDoubleBE=function(E,L,P){return z(this,E,L,!1,P)};r.prototype.copy=function(E,L,P,N){if(!r.isBuffer(E))throw new TypeError("argument should be a Buffer");
P||(P=0);N||0===N||(N=this.length);L>=E.length&&(L=E.length);L||(L=0);0<N&&N<P&&(N=P);if(N===P||0===E.length||0===this.length)return 0;if(0>L)throw new RangeError("targetStart out of bounds");if(0>P||P>=this.length)throw new RangeError("Index out of range");if(0>N)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length);E.length-L<N-P&&(N=E.length-L+P);var Q=N-P;if(this===E&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(L,P,N);else if(this===E&&P<L&&L<N)for(N=
Q-1;0<=N;--N)E[N+L]=this[N+P];else Uint8Array.prototype.set.call(E,this.subarray(P,N),L);return Q};r.prototype.fill=function(E,L,P,N){if("string"===typeof E){"string"===typeof L?(N=L,L=0,P=this.length):"string"===typeof P&&(N=P,P=this.length);if(void 0!==N&&"string"!==typeof N)throw new TypeError("encoding must be a string");if("string"===typeof N&&!r.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(1===E.length){var Q=E.charCodeAt(0);if("utf8"===N&&128>Q||"latin1"===N)E=Q}}else"number"===
typeof E&&(E&=255);if(0>L||this.length<L||this.length<P)throw new RangeError("Out of range index");if(P<=L)return this;L>>>=0;P=void 0===P?this.length:P>>>0;E||(E=0);if("number"===typeof E)for(N=L;N<P;++N)this[N]=E;else{Q=r.isBuffer(E)?E:r.from(E,N);var O=Q.length;if(0===O)throw new TypeError('The value "'+E+'" is invalid for argument "value"');for(N=0;N<P-L;++N)this[N+L]=Q[N%O]}return this};var M=/[^+/0-9A-Za-z-_]/g}).call(this,b("buffer").Buffer)},{"base64-js":79,buffer:111,ieee754:416}],112:[function(b,
D,G){function r(l){return[Math.min(l[0],l[1]),Math.max(l[0],l[1])]}function n(l,m){return l[0]-m[0]||l[1]-m[1]}function p(l,m,c){return m in l?l[m]:c}var k=b("./lib/monotone"),a=b("./lib/triangulation"),e=b("./lib/delaunay"),f=b("./lib/filter");D.exports=function(l,m,c){Array.isArray(m)?(c=c||{},m=m||[]):(c=m||{},m=[]);var d=!!p(c,"delaunay",!0),g=!!p(c,"interior",!0),h=!!p(c,"exterior",!0);c=!!p(c,"infinity",!1);if(!g&&!h||0===l.length)return[];var q=k(l,m);if(d||g!==h||c){m=a(l.length,m.map(r).sort(n));
for(var t=0;t<q.length;++t){var v=q[t];m.addTriangle(v[0],v[1],v[2])}d&&e(l,m);return h?g?c?f(m,0,c):m.cells():f(m,1,c):f(m,-1)}return q}},{"./lib/delaunay":113,"./lib/filter":114,"./lib/monotone":115,"./lib/triangulation":116}],113:[function(b,D,G){function r(p,k,a,e,f,l){var m=k.opposite(e,f);if(!(0>m)){if(f<e){var c=e;e=f;f=c;c=l;l=m;m=c}k.isConstraint(e,f)||0>n(p[e],p[f],p[l],p[m])&&a.push(e,f)}}var n=b("robust-in-sphere")[4];b("binary-search-bounds");D.exports=function(p,k){for(var a=[],e=p.length,
f=k.stars,l=0;l<e;++l)for(var m=f[l],c=1;c<m.length;c+=2){var d=m[c];if(!(d<l||k.isConstraint(l,d))){for(var g=m[c-1],h=-1,q=1;q<m.length;q+=2)if(m[q-1]===d){h=m[q];break}0>h||0>n(p[l],p[d],p[g],p[h])&&a.push(l,d)}}for(;0<a.length;){d=a.pop();l=a.pop();h=g=-1;m=f[l];for(e=1;e<m.length;e+=2)c=m[e-1],q=m[e],c===d?h=q:q===d&&(g=c);0>g||0>h||0<=n(p[l],p[d],p[g],p[h])||(k.flip(l,d),r(p,k,a,g,l,h),r(p,k,a,l,h,g),r(p,k,a,h,d,g),r(p,k,a,d,g,h))}}},{"binary-search-bounds":96,"robust-in-sphere":518}],114:[function(b,
D,G){function r(k,a,e,f,l,m,c){this.cells=k;this.neighbor=a;this.flags=f;this.constraint=e;this.active=l;this.next=m;this.boundary=c}function n(k,a){return k[0]-a[0]||k[1]-a[1]||k[2]-a[2]}var p=b("binary-search-bounds");D.exports=function(k,a,e){for(var f=k.cells(),l=f.length,m=0;m<l;++m){var c=f[m],d=c[0],g=c[1],h=c[2];g<h?g<d&&(c[0]=g,c[1]=h,c[2]=d):h<d&&(c[0]=h,c[1]=d,c[2]=g)}f.sort(n);var q=Array(l);for(m=0;m<q.length;++m)q[m]=0;var t=[],v=[],w=Array(3*l),A=Array(3*l),z=null;e&&(z=[]);h=new r(f,
w,A,q,t,v,z);for(m=0;m<l;++m){c=f[m];for(var y=0;3>y;++y){d=c[y];g=c[(y+1)%3];var B=w[3*m+y]=h.locate(g,d,k.opposite(g,d)),C=A[3*m+y]=k.isConstraint(d,g);0>B&&(C?v.push(m):(t.push(m),q[m]=1),e&&z.push([g,d,-1]))}}if(0===a)return e?h.cells.concat(h.boundary):h.cells;l=1;m=h.active;c=h.next;k=h.flags;f=h.cells;d=h.constraint;for(g=h.neighbor;0<m.length||0<c.length;){for(;0<m.length;)if(q=m.pop(),k[q]!==-l)for(k[q]=l,t=0;3>t;++t)v=g[3*q+t],0<=v&&0===k[v]&&(d[3*q+t]?c.push(v):(m.push(v),k[v]=l));q=c;
c=m;m=q;c.length=0;l=-l}for(m=l=0;m<f.length;++m)k[m]===a&&(f[l++]=f[m]);f.length=l;return e?f.concat(h.boundary):f};r.prototype.locate=function(){var k=[0,0,0];return function(a,e,f){var l=a,m=e,c=f;e<f?e<a&&(l=e,m=f,c=a):f<a&&(l=f,m=a,c=e);if(0>l)return-1;k[0]=l;k[1]=m;k[2]=c;return p.eq(this.cells,k,n)}}()},{"binary-search-bounds":96}],115:[function(b,D,G){function r(l,m,c,d,g){this.a=l;this.b=m;this.idx=c;this.lowerIds=d;this.upperIds=g}function n(l,m,c,d){this.a=l;this.b=m;this.type=c;this.idx=
d}function p(l,m){var c=l.a[0]-m.a[0]||l.a[1]-m.a[1]||l.type-m.type;return c||0!==l.type&&(c=f(l.a,l.b,m.b))?c:l.idx-m.idx}function k(l,m){return f(l.a,l.b,m)}function a(l,m){var c;return(c=l.a[0]<m.a[0]?f(l.a,l.b,m.a):f(m.b,m.a,l.a))?c:(c=m.b[0]<l.b[0]?f(l.a,l.b,m.b):f(m.b,m.a,l.b))||l.idx-m.idx}var e=b("binary-search-bounds"),f=b("robust-orientation")[3];D.exports=function(l,m){for(var c=l.length,d=m.length,g=[],h=0;h<c;++h)g.push(new n(l[h],null,0,h));for(h=0;h<d;++h){var q=m[h];c=l[q[0]];q=l[q[1]];
c[0]<q[0]?g.push(new n(c,q,2,h),new n(q,c,1,h)):c[0]>q[0]&&g.push(new n(q,c,2,h),new n(c,q,1,h))}g.sort(p);h=g[0].a[0]-(1+Math.abs(g[0].a[0]))*Math.pow(2,-52);m=[new r([h,1],[h,0],-1,[],[],[],[])];d=[];h=0;for(c=g.length;h<c;++h){var t=g[h];q=t.type;if(0===q){q=d;var v=m,w=l,A=t.a;t=t.idx;for(var z=e.lt(v,A,k),y=e.gt(v,A,k);z<y;++z){for(var B=v[z],C=B.lowerIds,u=C.length;1<u&&0<f(w[C[u-2]],w[C[u-1]],A);)q.push([C[u-1],C[u-2],t]),--u;C.length=u;C.push(t);B=B.upperIds;for(u=B.length;1<u&&0>f(w[B[u-
2]],w[B[u-1]],A);)q.push([B[u-2],B[u-1],t]),--u;B.length=u;B.push(t)}}else 2===q?(q=m,v=t,w=e.le(q,v,a),A=q[w],t=A.upperIds,y=t[t.length-1],A.upperIds=[y],q.splice(w+1,0,new r(v.a,v.b,v.idx,[y],t))):(q=m,v=t,w=v.a,v.a=v.b,v.b=w,v=e.eq(q,v,a),q[v-1].upperIds=q[v].upperIds,q.splice(v,1))}return d}},{"binary-search-bounds":96,"robust-orientation":520}],116:[function(b,D,G){function r(k,a){this.stars=k;this.edges=a}function n(k,a,e){for(var f=1,l=k.length;f<l;f+=2)if(k[f-1]===a&&k[f]===e){k[f-1]=k[l-
2];k[f]=k[l-1];k.length=l-2;break}}var p=b("binary-search-bounds");D.exports=function(k,a){for(var e=Array(k),f=0;f<k;++f)e[f]=[];return new r(e,a)};b=r.prototype;b.isConstraint=function(){function k(e,f){return e[0]-f[0]||e[1]-f[1]}var a=[0,0];return function(e,f){a[0]=Math.min(e,f);a[1]=Math.max(e,f);return 0<=p.eq(this.edges,a,k)}}();b.removeTriangle=function(k,a,e){var f=this.stars;n(f[k],a,e);n(f[a],e,k);n(f[e],k,a)};b.addTriangle=function(k,a,e){var f=this.stars;f[k].push(a,e);f[a].push(e,k);
f[e].push(k,a)};b.opposite=function(k,a){a=this.stars[a];for(var e=1,f=a.length;e<f;e+=2)if(a[e]===k)return a[e-1];return-1};b.flip=function(k,a){var e=this.opposite(k,a),f=this.opposite(a,k);this.removeTriangle(k,a,e);this.removeTriangle(a,k,f);this.addTriangle(k,f,e);this.addTriangle(a,e,f)};b.edges=function(){for(var k=this.stars,a=[],e=0,f=k.length;e<f;++e)for(var l=k[e],m=0,c=l.length;m<c;m+=2)a.push([l[m],l[m+1]]);return a};b.cells=function(){for(var k=this.stars,a=[],e=0,f=k.length;e<f;++e)for(var l=
k[e],m=0,c=l.length;m<c;m+=2){var d=l[m],g=l[m+1];e<Math.min(d,g)&&a.push([e,d,g])}return a}},{"binary-search-bounds":96}],117:[function(b,D,G){D.exports=function(r){for(var n=1,p=1;p<r.length;++p)for(var k=0;k<p;++k)if(r[p]<r[k])n=-n;else if(r[k]===r[p])return 0;return n}},{}],118:[function(b,D,G){function r(e,f){for(var l=0,m=e.length,c=0;c<m;++c)l+=e[c]*f[c];return l}function n(e){var f=e.length;if(0===f)return[];for(var l=k([e.length+1,e.length+1],1),m=k([e.length+1],1),c=l[f][f]=0;c<f;++c){for(var d=
0;d<=c;++d)l[d][c]=l[c][d]=2*r(e[c],e[d]);m[c]=r(e[c],e[c])}e=a(l,m);l=0;m=e[f+1];for(c=0;c<m.length;++c)l+=m[c];var g=Array(f);for(c=0;c<f;++c){m=e[c];var h=0;for(d=0;d<m.length;++d)h+=m[d];g[c]=h/l}return g}function p(e){if(0===e.length)return[];for(var f=e[0].length,l=k([f]),m=n(e),c=0;c<e.length;++c)for(var d=0;d<f;++d)l[d]+=e[c][d]*m[c];return l}var k=b("dup"),a=b("robust-linear-solve");p.barycenetric=n;D.exports=p},{dup:176,"robust-linear-solve":519}],119:[function(b,D,G){D.exports=function(n){for(var p=
r(n),k=0,a=0;a<n.length;++a)for(var e=n[a],f=0;f<p.length;++f)k+=Math.pow(e[f]-p[f],2);return Math.sqrt(k/n.length)};var r=b("circumcenter")},{circumcenter:118}],120:[function(b,D,G){D.exports=function(r,n,p){return n<p?r<n?n:r>p?p:r:r<p?p:r>n?n:r}},{}],121:[function(b,D,G){function r(y){y=v(y);return[A(y,-Infinity),A(y,Infinity)]}function n(y){for(var B=Array(y.length),C=0;C<y.length;++C){var u=y[C];B[C]=[A(u[0],-Infinity),A(u[1],-Infinity),A(u[0],Infinity),A(u[1],Infinity)]}return B}function p(y,
B,C){var u=[];g(C,function(F,H){var J=B[F],I=B[H];J[0]!==I[0]&&J[0]!==I[1]&&J[1]!==I[0]&&J[1]!==I[1]&&h(y[J[0]],y[J[1]],y[I[0]],y[I[1]])&&u.push([F,H])});return u}function k(y,B,C,u){var F=[];g(C,u,function(H,J){var I=B[H];if(I[0]!==J&&I[1]!==J){var M=y[J];h(y[I[0]],y[I[1]],M,M)&&F.push([H,J])}});return F}function a(y,B,C,u,F){var H,J=y.map(function(O){return[q(O[0]),q(O[1])]});for(H=0;H<C.length;++H){var I=C[H];var M=I[0];I=I[1];var E=B[M],L=B[I];if(E=z(w(y[E[0]]),w(y[E[1]]),w(y[L[0]]),w(y[L[1]])))L=
y.length,y.push([v(E[0]),v(E[1])]),J.push(E),u.push([M,L],[I,L])}u.sort(function(O,T){if(O[0]!==T[0])return O[0]-T[0];O=J[O[1]];T=J[T[1]];return t(O[0],T[0])||t(O[1],T[1])});for(H=u.length-1;0<=H;--H){I=u[H];M=I[0];E=B[M];L=E[0];C=E[1];var P=y[L],N=y[C];0>(P[0]-N[0]||P[1]-N[1])&&(P=L,L=C,C=P);E[0]=L;L=E[1]=I[1];var Q;for(F&&(Q=E[2]);0<H&&u[H-1][0]===M;)I=u[--H],I=I[1],F?B.push([L,I,Q]):B.push([L,I]),L=I;F?B.push([L,C,Q]):B.push([L,C])}return J}function e(y,B,C){C=B.length;for(var u=new d(C),F=[],
H=0;H<B.length;++H){var J=B[H],I=r(J[0]);J=r(J[1]);F.push([A(I[0],-Infinity),A(J[0],-Infinity),A(I[1],Infinity),A(J[1],Infinity)])}g(F,function(M,E){u.link(M,E)});I=!0;B=Array(C);for(H=0;H<C;++H)F=u.find(H),F!==H&&(I=!1,y[F]=[Math.min(y[H][0],y[F][0]),Math.min(y[H][1],y[F][1])]);if(I)return null;for(H=I=0;H<C;++H)F=u.find(H),F===H?(B[H]=I,y[I++]=y[H]):B[H]=-1;y.length=I;for(H=0;H<C;++H)0>B[H]&&(B[H]=B[u.find(H)]);return B}function f(y,B){return y[0]-B[0]||y[1]-B[1]}function l(y,B){var C=y[0]-B[0]||
y[1]-B[1];return C?C:y[2]<B[2]?-1:y[2]>B[2]?1:0}function m(y,B,C){if(0!==y.length){if(B)for(var u=0;u<y.length;++u){var F=y[u],H=B[F[0]],J=B[F[1]];F[0]=Math.min(H,J);F[1]=Math.max(H,J)}else for(u=0;u<y.length;++u)F=y[u],H=F[0],J=F[1],F[0]=Math.min(H,J),F[1]=Math.max(H,J);C?y.sort(l):y.sort(f);for(u=B=1;u<y.length;++u)if(F=y[u-1],H=y[u],H[0]!==F[0]||H[1]!==F[1]||C&&H[2]!==F[2])y[B++]=H;y.length=B}}function c(y,B,C){for(var u=Array(B.length),F=0;F<B.length;++F){var H=B[F],J=y[H[0]];H=y[H[1]];u[F]=[A(Math.min(J[0],
H[0]),-Infinity),A(Math.min(J[1],H[1]),-Infinity),A(Math.max(J[0],H[0]),Infinity),A(Math.max(J[1],H[1]),Infinity)]}F=p(y,B,u);J=n(y);u=k(y,B,u,J);H=a(y,B,F,u,C);y=e(y,H,J);m(B,y,C);return y?!0:0<F.length||0<u.length}D.exports=function(y,B,C){if(C){var u=B;for(var F=Array(B.length),H=0;H<B.length;++H){var J=B[H];F[H]=[J[0],J[1],C[H]]}B=F}H=B;J=!!C;F=e(y,[],n(y));m(H,F,J);for(F=!!F;c(y,B,!!C);)F=!0;if(C&&F)for(u.length=0,H=C.length=0;H<B.length;++H)J=B[H],u.push([J[0],J[1]]),C.push(J[2]);return F};
var d=b("union-find"),g=b("box-intersect"),h=b("robust-segment-intersect"),q=b("big-rat"),t=b("big-rat/cmp"),v=b("big-rat/to-float"),w=b("rat-vec"),A=b("nextafter"),z=b("./lib/rat-seg-intersect")},{"./lib/rat-seg-intersect":122,"big-rat":83,"big-rat/cmp":81,"big-rat/to-float":95,"box-intersect":101,nextafter:470,"rat-vec":504,"robust-segment-intersect":523,"union-find":568}],122:[function(b,D,G){function r(m,c){return k(n(m[0],c[1]),n(m[1],c[0]))}D.exports=function(m,c,d,g){c=e(c,m);var h=e(g,d);
g=r(c,h);if(0===a(g))return null;d=e(m,d);d=r(h,d);d=p(d,g);c=l(c,d);return f(m,c)};var n=b("big-rat/mul"),p=b("big-rat/div"),k=b("big-rat/sub"),a=b("big-rat/sign"),e=b("rat-vec/sub"),f=b("rat-vec/add"),l=b("rat-vec/muls")},{"big-rat/div":82,"big-rat/mul":92,"big-rat/sign":93,"big-rat/sub":94,"rat-vec/add":503,"rat-vec/muls":505,"rat-vec/sub":506}],123:[function(b,D,G){function r(p,k){null==k&&(k=!0);var a=p[0],e=p[1],f=p[2];p=p[3];null==p&&(p=k?1:255);k&&(a*=255,e*=255,f*=255,p*=255);a=n(a,0,255)&
255;e=n(e,0,255)&255;f=n(f,0,255)&255;p=n(p,0,255)&255;return 16777216*a+(e<<16)+(f<<8)+p}var n=b("clamp");D.exports=r;D.exports.to=r;D.exports.from=function(p,k){p=+p;var a=p>>>24,e=(p&16711680)>>>16,f=(p&65280)>>>8;p&=255;return!1===k?[a,e,f,p]:[a/255,e/255,f/255,p/255]}},{clamp:120}],124:[function(b,D,G){D.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,
235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,
50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,
128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,
160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,
21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,
230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,
224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],125:[function(b,D,G){var r=b("color-rgba"),n=b("clamp"),p=b("dtype");D.exports=function(k,a){"float"!==a&&a||(a="array");"uint"===a&&(a="uint8");"uint_clamped"===a&&(a="uint8_clamped");var e=new (p(a))(4);a="uint8"!==a&&"uint8_clamped"!==a;k.length&&"string"!==typeof k||(k=r(k),k[0]/=255,k[1]/=255,k[2]/=255);var f=k;f=f instanceof Uint8Array||f instanceof
Uint8ClampedArray?!0:Array.isArray(f)&&(1<f[0]||0===f[0])&&(1<f[1]||0===f[1])&&(1<f[2]||0===f[2])&&(!f[3]||1<f[3])?!0:!1;if(f)return e[0]=k[0],e[1]=k[1],e[2]=k[2],e[3]=null!=k[3]?k[3]:255,a&&(e[0]/=255,e[1]/=255,e[2]/=255,e[3]/=255),e;a?(e[0]=k[0],e[1]=k[1],e[2]=k[2],e[3]=null!=k[3]?k[3]:1):(e[0]=n(Math.floor(255*k[0]),0,255),e[1]=n(Math.floor(255*k[1]),0,255),e[2]=n(Math.floor(255*k[2]),0,255),e[3]=null==k[3]?255:n(Math.floor(255*k[3]),0,255));return e}},{clamp:120,"color-rgba":127,dtype:175}],126:[function(b,
D,G){(function(r){var n=b("color-name"),p=b("is-plain-obj"),k=b("defined");D.exports=function(e){var f,l=[],m=1;if("string"===typeof e)if(n[e]){l=n[e].slice();var c="rgb"}else if("transparent"===e)m=0,c="rgb",l=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var d=e.slice(1),g=d.length;m=1;4>=g?(l=[parseInt(d[0]+d[0],16),parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16)],4===g&&(m=parseInt(d[3]+d[3],16)/255)):(l=[parseInt(d[0]+d[1],16),parseInt(d[2]+d[3],16),parseInt(d[4]+d[5],16)],8===g&&(m=parseInt(d[6]+
d[7],16)/255));l[0]||(l[0]=0);l[1]||(l[1]=0);l[2]||(l[2]=0);c="rgb"}else(f=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e))?(e=f[1],m="rgb"===e,c=d=e.replace(/a$/,""),g="cmyk"===d?4:"gray"===d?1:3,l=f[2].trim().split(/\s*,\s*/).map(function(h,q){if(/%$/.test(h)){if(q===g)return parseFloat(h)/100;if("rgb"===d)return 255*parseFloat(h)/100}else if("h"===d[q]&&!/deg$/.test(h)&&void 0!==a[h])return a[h];return parseFloat(h)}),e===d&&l.push(1),m=m?1:void 0===l[g]?
1:l[g],l=l.slice(0,g)):10<e.length&&/[0-9](?:\s|\/)/.test(e)&&(l=e.match(/([0-9]+)/g).map(function(h){return parseFloat(h)}),c=e.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(e))c="rgb",l=[e>>>16,(e&65280)>>>8,e&255];else if(p(e))f=k(e.r,e.red,e.R,null),null!==f?(c="rgb",l=[f,k(e.g,e.green,e.G),k(e.b,e.blue,e.B)]):(c="hsl",l=[k(e.h,e.hue,e.H),k(e.s,e.saturation,e.S),k(e.l,e.lightness,e.L,e.b,e.brightness)]),m=k(e.a,e.alpha,e.opacity,1),null!=e.opacity&&(m/=100);else if(Array.isArray(e)||
r.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e))l=[e[0],e[1],e[2]],c="rgb",m=4===e.length?e[3]:1;return{space:c,values:l,alpha:m}};var a={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!==typeof lb?lb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"color-name":124,defined:170,"is-plain-obj":443}],127:[function(b,D,G){var r=b("color-parse"),n=b("color-space/hsl"),p=b("clamp");D.exports=function(k){var a=r(k);if(!a.space)return[];k=
Array(3);k[0]=p(a.values[0],0,255);k[1]=p(a.values[1],0,255);k[2]=p(a.values[2],0,255);"h"===a.space[0]&&(k=n.rgb(k));k.push(p(a.alpha,0,1));return k}},{clamp:120,"color-parse":126,"color-space/hsl":128}],128:[function(b,D,G){b=b("./rgb");D.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var n=r[0]/360,p=r[1]/100;r=r[2]/100;if(0===p){var k=255*r;return[k,k,k]}p=.5>r?r*(1+p):r+p-r*p;r=2*r-p;var a=[0,0,0];for(var e=0;3>e;e++)k=
n+1/3*-(e-1),0>k?k++:1<k&&k--,k=1>6*k?r+6*(p-r)*k:1>2*k?p:2>3*k?r+(p-r)*(2/3-k)*6:r,a[e]=255*k;return a}};b.hsl=function(r){var n=r[0]/255,p=r[1]/255,k=r[2]/255;r=Math.min(n,p,k);var a=Math.max(n,p,k),e=a-r,f;a===r?f=0:n===a?f=(p-k)/e:p===a?f=2+(k-n)/e:k===a&&(f=4+(n-p)/e);f=Math.min(60*f,360);0>f&&(f+=360);n=(r+a)/2;return[f,100*(a===r?0:.5>=n?e/(a+r):e/(2-a-r)),100*n]}},{"./rgb":129}],129:[function(b,D,G){D.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},
{}],130:[function(b,D,G){D.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,
0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},
{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},
{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},
{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,
0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,
rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,
44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,
rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,
0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,
rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,
rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,
196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,
rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,
rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,
185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,
157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,
52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,
rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],131:[function(b,D,G){function r(e){return[e[0]/255,e[1]/255,e[2]/
255,e[3]]}function n(e){for(var f,l="#",m=0;3>m;++m)f=e[m],f=f.toString(16),l+=("00"+f).substr(f.length);return l}function p(e){return"rgba("+e.join(",")+")"}var k=b("./colorScale"),a=b("lerp");D.exports=function(e){var f,l;e||(e={});var m=(e.nshades||72)-1;var c=e.format||"hex";(f=e.colormap)||(f="jet");if("string"===typeof f){f=f.toLowerCase();if(!k[f])throw Error(f+" not a supported colorscale");var d=k[f]}else if(Array.isArray(f))d=f.slice();else throw Error("unsupported colormap option",f);if(d.length>
m+1)throw Error(f+" map requires nshades to be at least size "+d.length);var g=Array.isArray(e.alpha)?2!==e.alpha.length?[1,1]:e.alpha.slice():"number"===typeof e.alpha?[e.alpha,e.alpha]:[1,1];e=d.map(function(z){return Math.round(z.index*m)});g[0]=Math.min(Math.max(g[0],0),1);g[1]=Math.min(Math.max(g[1],0),1);var h=d.map(function(z,y){z=d[y].index;y=d[y].rgb.slice();if(4===y.length&&0<=y[3]&&1>=y[3])return y;y[3]=g[0]+(g[1]-g[0])*z;return y});var q=[];for(l=0;l<e.length-1;++l){var t=e[l+1]-e[l];
f=h[l];var v=h[l+1];for(var w=0;w<t;w++){var A=w/t;q.push([Math.round(a(f[0],v[0],A)),Math.round(a(f[1],v[1],A)),Math.round(a(f[2],v[2],A)),a(f[3],v[3],A)])}}q.push(d[d.length-1].rgb.concat(g[1]));"hex"===c?q=q.map(n):"rgbaString"===c?q=q.map(p):"float"===c&&(q=q.map(r));return q}},{"./colorScale":130,lerp:446}],132:[function(b,D,G){function r(f,l,m){var c=k(f[0],-l[0]);f=k(f[1],-l[1]);var d=k(m[0],-l[0]);l=k(m[1],-l[1]);c=e(a(c,d),a(f,l));return 0<=c[c.length-1]}D.exports=function(f,l,m,c){var d=
n(l,m,c);if(0===d){d=p(n(f,l,m));var g=p(n(f,l,c));return d===g?0===d&&(m=r(f,l,m),f=r(f,l,c),m!==f)?m?1:-1:0:0===g?0<d?-1:r(f,l,c)?-1:1:0===d?0<g?1:r(f,l,m)?1:-1:p(g-d)}g=n(f,l,m);return 0<g?0<d&&0<n(f,l,c)?1:-1:0>g?0<d||0<n(f,l,c)?1:-1:0<n(f,l,c)?1:r(f,l,m)?1:-1};var n=b("robust-orientation"),p=b("signum"),k=b("two-sum"),a=b("robust-product"),e=b("robust-sum")},{"robust-orientation":520,"robust-product":521,"robust-sum":525,signum:526,"two-sum":555}],133:[function(b,D,G){function r(p,k){return p-
k}D.exports=function(p,k){var a=p.length,e=p.length-k.length;if(e)return e;switch(a){case 0:return 0;case 1:return p[0]-k[0];case 2:return p[0]+p[1]-k[0]-k[1]||n(p[0],p[1])-n(k[0],k[1]);case 3:a=p[0]+p[1];var f=k[0]+k[1];if(e=a+p[2]-(f+k[2]))return e;e=n(p[0],p[1]);var l=n(k[0],k[1]);return n(e,p[2])-n(l,k[2])||n(e+p[2],a)-n(l+k[2],f);case 4:e=p[0];a=p[1];f=p[2];p=p[3];l=k[0];var m=k[1],c=k[2];k=k[3];return e+a+f+p-(l+m+c+k)||n(e,a,f,p)-n(l,m,c,k,l)||n(e+a,e+f,e+p,a+f,a+p,f+p)-n(l+m,l+c,l+k,m+c,m+
k,c+k)||n(e+a+f,e+a+p,e+f+p,a+f+p)-n(l+m+c,l+m+k,l+c+k,m+c+k);default:p=p.slice().sort(r);k=k.slice().sort(r);for(f=0;f<a;++f)if(e=p[f]-k[f])return e;return 0}};var n=Math.min},{}],134:[function(b,D,G){var r=b("compare-cell"),n=b("cell-orientation");D.exports=function(p,k){return r(p,k)||n(p)-n(k)}},{"cell-orientation":117,"compare-cell":133}],135:[function(b,D,G){var r=b("./lib/ch1d"),n=b("./lib/ch2d"),p=b("./lib/chnd");D.exports=function(k){var a=k.length;if(0===a)return[];if(1===a)return[[0]];
a=k[0].length;return 0===a?[]:1===a?r(k):2===a?n(k):p(k,a)}},{"./lib/ch1d":136,"./lib/ch2d":137,"./lib/chnd":138}],136:[function(b,D,G){D.exports=function(r){for(var n=0,p=0,k=1;k<r.length;++k)r[k][0]<r[n][0]&&(n=k),r[k][0]>r[p][0]&&(p=k);return n<p?[[n],[p]]:n>p?[[p],[n]]:[[n]]}},{}],137:[function(b,D,G){D.exports=function(n){n=r(n);var p=n.length;if(2>=p)return[];for(var k=Array(p),a=n[p-1],e=0;e<p;++e){var f=n[e];k[e]=[a,f];a=f}return k};var r=b("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":456}],
138:[function(b,D,G){D.exports=function(p,k){try{return r(p,!0)}catch(g){var a=n(p);if(a.length<=k)return[];k=p.length;for(var e=Array(k),f=0;f<a.length;++f)e[f]=p[a[f]];var l=a.length;for(f=0;f<k;++f)0>a.indexOf(f)&&(e[l++]=p[f]);p=r(e,!0);k=p.length;e=a.length;for(f=0;f<k;++f){l=p[f];for(var m=0;m<l.length;++m){var c=l[m];if(c<e)l[m]=a[c];else{c-=e;for(var d=0;d<e;++d)c>=a[d]&&(c+=1);l[m]=c}}}return p}};var r=b("incremental-convex-hull"),n=b("affine-hull")},{"affine-hull":67,"incremental-convex-hull":433}],
139:[function(b,D,G){D.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?\x3d.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?\x3d.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?\x3d.*british).*honduras",
BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?\x3d.*bonaire).*eustatius|^(?\x3d.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?\x3d.*peo)(?\x3d.*rep).*china",
CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|ç)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?\x3d.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",
DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?\x3d.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?\x3d.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",
DEU:"^(?!.*east).*germany|^(?\x3d.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?\x3d.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",
IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?\x3d.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?\x3d.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",
LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",
NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?\x3d.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",
MDA:"moldov|b(a|e)ssarabia",REU:"r(e|é)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|é)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?\x3d.*collectivity).*martin|^(?\x3d.*france).*martin(?!ique)|^(?\x3d.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|ã)o.?tom(e|é)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",
SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?\x3d.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?\x3d.*leste).*timor|^(?\x3d.*east).*timor",
TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?\x3d.*socialist).*viet.?nam",
VGB:"^(?\x3d.*\\bu\\.?\\s?k).*virgin|^(?\x3d.*brit).*virgin|^(?\x3d.*kingdom).*virgin",VIR:"^(?\x3d.*\\bu\\.?\\s?s).*virgin|^(?\x3d.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?\x3d.*peo).*yemen|^(?!.*rep)(?\x3d.*dem).*yemen|^(?\x3d.*south).*yemen|^(?\x3d.*aden).*yemen|^(?\x3d.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},
{}],140:[function(b,D,G){D.exports="xx-small x-small small medium large x-large xx-large larger smaller".split(" ")},{}],141:[function(b,D,G){D.exports="normal condensed semi-condensed extra-condensed ultra-condensed expanded semi-expanded extra-expanded ultra-expanded".split(" ")},{}],142:[function(b,D,G){D.exports=["normal","italic","oblique"]},{}],143:[function(b,D,G){D.exports="normal bold bolder lighter 100 200 300 400 500 600 700 800 900".split(" ")},{}],144:[function(b,D,G){D.exports={parse:b("./parse"),
stringify:b("./stringify")}},{"./parse":146,"./stringify":147}],145:[function(b,D,G){var r=b("css-font-size-keywords");D.exports={isSize:function(n){return/^[\d\.]/.test(n)||-1!==n.indexOf("/")||-1!==r.indexOf(n)}}},{"css-font-size-keywords":140}],146:[function(b,D,G){function r(g){if("string"!==typeof g)throw Error("Font argument must be a string.");if(d[g])return d[g];if(""===g)throw Error("Cannot parse an empty string.");if(-1!==a.indexOf(g))return d[g]={system:g};for(var h={style:"normal",variant:"normal",
weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},q=m(g,/\s+/),t;t=q.shift();){if(-1!==k.indexOf(t))return["style","variant","weight","stretch"].forEach(function(w){h[w]=t}),d[g]=h;if(-1!==f.indexOf(t))h.style=t;else if("normal"===t||"small-caps"===t)h.variant=t;else if(-1!==l.indexOf(t))h.stretch=t;else if(-1!==e.indexOf(t))h.weight=t;else{if(c(t)){var v=m(t,"/");h.size=v[0];null!=v[1]?h.lineHeight=n(v[1]):"/"===q[0]&&(q.shift(),h.lineHeight=n(q.shift()));if(!q.length)throw Error("Missing required font-family.");
h.family=m(q.join(" "),/\s*,\s*/).map(p);return d[g]=h}throw Error("Unknown or unsupported font token: "+t);}}throw Error("Missing required font-size.");}function n(g){var h=parseFloat(g);return h.toString()===g?h:g}var p=b("unquote"),k=b("css-global-keywords"),a=b("css-system-font-keywords"),e=b("css-font-weight-keywords"),f=b("css-font-style-keywords"),l=b("css-font-stretch-keywords"),m=b("string-split-by"),c=b("./lib/util").isSize;D.exports=r;var d=r.cache={}},{"./lib/util":145,"css-font-stretch-keywords":141,
"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,"css-system-font-keywords":149,"string-split-by":540,unquote:570}],147:[function(b,D,G){function r(g,h){if(g&&!h[g]&&!a[g])throw Error("Unknown keyword `"+g+"`");return g}function n(g){for(var h={},q=0;q<g.length;q++)h[g[q]]=1;return h}var p=b("pick-by-alias"),k=b("./lib/util").isSize,a=n(b("css-global-keywords")),e=n(b("css-system-font-keywords")),f=n(b("css-font-weight-keywords")),l=n(b("css-font-style-keywords")),
m=n(b("css-font-stretch-keywords")),c={normal:1,"small-caps":1},d={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1};D.exports=function(g){g=p(g,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",
family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"});if(g.system)return g.system&&r(g.system,e),g.system;r(g.style,l);r(g.variant,c);r(g.weight,f);r(g.stretch,m);null==g.size&&(g.size="1rem");"number"===typeof g.size&&(g.size+="px");if(!k)throw Error("Bad size value `"+g.size+"`");g.family||(g.family="serif");Array.isArray(g.family)&&(g.family.length||(g.family=["serif"]),g.family=g.family.map(function(q){return d[q]?q:'"'+q+'"'}).join(", "));
var h=[];h.push(g.style);g.variant!==g.style&&h.push(g.variant);g.weight!==g.variant&&g.weight!==g.style&&h.push(g.weight);g.stretch!==g.weight&&g.stretch!==g.variant&&g.stretch!==g.style&&h.push(g.stretch);h.push(g.size+(null==g.lineHeight||"normal"===g.lineHeight||"1"===g.lineHeight+""?"":"/"+g.lineHeight));h.push(g.family);return h.filter(Boolean).join(" ")}},{"./lib/util":145,"css-font-stretch-keywords":141,"css-font-style-keywords":142,"css-font-weight-keywords":143,"css-global-keywords":148,
"css-system-font-keywords":149,"pick-by-alias":485}],148:[function(b,D,G){D.exports=["inherit","initial","unset"]},{}],149:[function(b,D,G){D.exports="caption icon menu message-box small-caption status-bar".split(" ")},{}],150:[function(b,D,G){D.exports=function(r,n,p,k,a,e){var f=a-1,l=a*a,m=f*f,c=(1+2*a)*m;m*=a;a=l*(3-2*a);f*=l;if(r.length){e||(e=Array(r.length));for(l=r.length-1;0<=l;--l)e[l]=c*r[l]+m*n[l]+a*p[l]+f*k[l];return e}return c*r+m*n+a*p+f*k};D.exports.derivative=function(r,n,p,k,a,e){var f=
6*a*a-6*a,l=3*a*a-4*a+1,m=-6*a*a+6*a;a=3*a*a-2*a;if(r.length){e||(e=Array(r.length));for(var c=r.length-1;0<=c;--c)e[c]=f*r[c]+l*n[c]+m*p[c]+a*k[c];return e}return f*r+l*n+m*p[c]+a*k}},{}],151:[function(b,D,G){function r(){this.argTypes=[];this.shimArgs=[];this.arrayArgs=[];this.arrayBlockIndices=[];this.scalarArgs=[];this.offsetArgs=[];this.offsetArgIndex=[];this.indexArgs=[];this.shapeArgs=[];this.funcName="";this.post=this.body=this.pre=null;this.debug=!1}var n=b("./lib/thunk.js");D.exports=function(p){var k=
new r;k.pre=p.pre;k.body=p.body;k.post=p.post;var a=p.args.slice(0);k.argTypes=a;for(var e=0;e<a.length;++e){var f=a[e];if("array"===f||"object"===typeof f&&f.blockIndices){k.argTypes[e]="array";k.arrayArgs.push(e);k.arrayBlockIndices.push(f.blockIndices?f.blockIndices:0);k.shimArgs.push("array"+e);if(e<k.pre.args.length&&0<k.pre.args[e].count)throw Error("cwise: pre() block may not reference array args");if(e<k.post.args.length&&0<k.post.args[e].count)throw Error("cwise: post() block may not reference array args");
}else if("scalar"===f)k.scalarArgs.push(e),k.shimArgs.push("scalar"+e);else if("index"===f){k.indexArgs.push(e);if(e<k.pre.args.length&&0<k.pre.args[e].count)throw Error("cwise: pre() block may not reference array index");if(e<k.body.args.length&&k.body.args[e].lvalue)throw Error("cwise: body() block may not write to array index");if(e<k.post.args.length&&0<k.post.args[e].count)throw Error("cwise: post() block may not reference array index");}else if("shape"===f){k.shapeArgs.push(e);if(e<k.pre.args.length&&
k.pre.args[e].lvalue)throw Error("cwise: pre() block may not write to array shape");if(e<k.body.args.length&&k.body.args[e].lvalue)throw Error("cwise: body() block may not write to array shape");if(e<k.post.args.length&&k.post.args[e].lvalue)throw Error("cwise: post() block may not write to array shape");}else if("object"===typeof f&&f.offset)k.argTypes[e]="offset",k.offsetArgs.push({array:f.array,offset:f.offset}),k.offsetArgIndex.push(e);else throw Error("cwise: Unknown argument type "+a[e]);}if(0>=
k.arrayArgs.length)throw Error("cwise: No array arguments specified");if(k.pre.args.length>a.length)throw Error("cwise: Too many arguments in pre() block");if(k.body.args.length>a.length)throw Error("cwise: Too many arguments in body() block");if(k.post.args.length>a.length)throw Error("cwise: Too many arguments in post() block");k.debug=!!p.printCode||!!p.debug;k.funcName=p.funcName||"cwise";k.blockSize=p.blockSize||64;return n(k)}},{"./lib/thunk.js":153}],152:[function(b,D,G){function r(k,a,e){var f=
k.length,l=a.arrayArgs.length;a=0<a.indexArgs.length;var m=[],c=[],d=0,g,h;for(g=0;g<f;++g)c.push(["i",g,"\x3d0"].join(""));for(h=0;h<l;++h)for(g=0;g<f;++g){var q=d;d=k[g];0===g?c.push(["d",h,"s",g,"\x3dt",h,"p",d].join("")):c.push(["d",h,"s",g,"\x3d(t",h,"p",d,"-s",q,"*t",h,"p",q,")"].join(""))}0<c.length&&m.push("var "+c.join(","));for(g=f-1;0<=g;--g)d=k[g],m.push(["for(i",g,"\x3d0;i",g,"\x3cs",d,";++i",g,"){"].join(""));m.push(e);for(g=0;g<f;++g){q=d;d=k[g];for(h=0;h<l;++h)m.push(["p",h,"+\x3dd",
h,"s",g].join(""));a&&(0<g&&m.push(["index[",q,"]-\x3ds",q].join("")),m.push(["++index[",d,"]"].join("")));m.push("}")}return m.join("\n")}function n(k,a,e){for(var f=k.body,l=[],m=[],c=0;c<k.args.length;++c){var d=k.args[c];if(!(0>=d.count)){var g=new RegExp(d.name,"g"),h="",q=a.arrayArgs.indexOf(c);switch(a.argTypes[c]){case "offset":var t=a.offsetArgIndex.indexOf(c);q=a.offsetArgs[t].array;h="+q"+t;case "array":h="p"+q+h;var v="l"+c;t="a"+q;if(0===a.arrayBlockIndices[q])1===d.count?"generic"===
e[q]?d.lvalue?(l.push(["var ",v,"\x3d",t,".get(",h,")"].join("")),f=f.replace(g,v),m.push([t,".set(",h,",",v,")"].join(""))):f=f.replace(g,[t,".get(",h,")"].join("")):f=f.replace(g,[t,"[",h,"]"].join("")):"generic"===e[q]?(l.push(["var ",v,"\x3d",t,".get(",h,")"].join("")),f=f.replace(g,v),d.lvalue&&m.push([t,".set(",h,",",v,")"].join(""))):(l.push(["var ",v,"\x3d",t,"[",h,"]"].join("")),f=f.replace(g,v),d.lvalue&&m.push([t,"[",h,"]\x3d",v].join("")));else{g=[d.name];d=[h];for(h=0;h<Math.abs(a.arrayBlockIndices[q]);h++)g.push("\\s*\\[([^\\]]+)\\]"),
d.push("$"+(h+1)+"*t"+q+"b"+h);g=new RegExp(g.join(""),"g");h=d.join("+");if("generic"===e[q])throw Error("cwise: Generic arrays not supported in combination with blocks!");f=f.replace(g,[t,"[",h,"]"].join(""))}break;case "scalar":f=f.replace(g,"Y"+a.scalarArgs.indexOf(c));break;case "index":f=f.replace(g,"index");break;case "shape":f=f.replace(g,"shape")}}}return[l.join("\n"),f,m.join("\n")].join("\n").trim()}var p=b("uniq");D.exports=function(k,a){for(var e=a[1].length-Math.abs(k.arrayBlockIndices[0])|
0,f=Array(k.arrayArgs.length),l=Array(k.arrayArgs.length),m=0;m<k.arrayArgs.length;++m)l[m]=a[2*m],f[m]=a[2*m+1];var c=[],d=[],g=[],h=[],q=[];for(m=0;m<k.arrayArgs.length;++m){0>k.arrayBlockIndices[m]?(g.push(0),h.push(e),c.push(e),d.push(e+k.arrayBlockIndices[m])):(g.push(k.arrayBlockIndices[m]),h.push(k.arrayBlockIndices[m]+e),c.push(0),d.push(k.arrayBlockIndices[m]));for(var t=[],v=0;v<f[m].length;v++)g[m]<=f[m][v]&&f[m][v]<h[m]&&t.push(f[m][v]-g[m]);q.push(t)}d=["SS"];h=["'use strict'"];t=[];
for(v=0;v<e;++v)t.push(["s",v,"\x3dSS[",v,"]"].join(""));for(m=0;m<k.arrayArgs.length;++m){d.push("a"+m);d.push("t"+m);d.push("p"+m);for(v=0;v<e;++v)t.push(["t",m,"p",v,"\x3dt",m,"[",g[m]+v,"]"].join(""));for(v=0;v<Math.abs(k.arrayBlockIndices[m]);++v)t.push(["t",m,"b",v,"\x3dt",m,"[",c[m]+v,"]"].join(""))}for(m=0;m<k.scalarArgs.length;++m)d.push("Y"+m);0<k.shapeArgs.length&&t.push("shape\x3dSS.slice(0)");if(0<k.indexArgs.length){v=Array(e);for(m=0;m<e;++m)v[m]="0";t.push(["index\x3d[",v.join(","),
"]"].join(""))}for(m=0;m<k.offsetArgs.length;++m){c=k.offsetArgs[m];g=[];for(v=0;v<c.offset.length;++v)0!==c.offset[v]&&(1===c.offset[v]?g.push(["t",c.array,"p",v].join("")):g.push([c.offset[v],"*t",c.array,"p",v].join("")));0===g.length?t.push("q"+m+"\x3d0"):t.push(["q",m,"\x3d",g.join("+")].join(""))}m=p([].concat(k.pre.thisVars).concat(k.body.thisVars).concat(k.post.thisVars));t=t.concat(m);0<t.length&&h.push("var "+t.join(","));for(m=0;m<k.arrayArgs.length;++m)h.push("p"+m+"|\x3d0");3<k.pre.body.length&&
h.push(n(k.pre,k,l));v=n(k.body,k,l);a:for(m=0,t=q[0].length;m<t;){for(c=1;c<q.length;++c)if(q[c][m]!==q[0][m])break a;++m}if(m<e){e=h.push;t=m;q=q[0];c=q.length;g=k.arrayArgs.length;for(var w=k.blockSize,A=0<k.indexArgs.length,z=[],y=0;y<g;++y)z.push(["var offset",y,"\x3dp",y].join(""));for(y=t;y<c;++y)z.push(["for(var j"+y+"\x3dSS[",q[y],"]|0;j",y,"\x3e0;){"].join("")),z.push(["if(j",y,"\x3c",w,"){"].join("")),z.push(["s",q[y],"\x3dj",y].join("")),z.push(["j",y,"\x3d0"].join("")),z.push(["}else{s",
q[y],"\x3d",w].join("")),z.push(["j",y,"-\x3d",w,"}"].join("")),A&&z.push(["index[",q[y],"]\x3dj",y].join(""));for(y=0;y<g;++y){w=["offset"+y];for(A=t;A<c;++A)w.push(["j",A,"*t",y,"p",q[A]].join(""));z.push(["p",y,"\x3d(",w.join("+"),")"].join(""))}z.push(r(q,k,v));for(y=t;y<c;++y)z.push("}");q=z.join("\n");e.call(h,q)}else h.push(r(q[0],k,v));3<k.post.body.length&&h.push(n(k.post,k,l));k.debug&&console.log("-----Generated cwise routine for ",a,":\n"+h.join("\n")+"\n----------");k=k.funcName||"unnamed";
f=f[0].join("s");a=Array(l.length);q=!0;for(e=0;e<l.length;++e)v=l[e],t=(t=v.match(/\d+/))?t[0]:"",0===v.charAt(0)?a[e]="u"+v.charAt(1)+t:a[e]=v.charAt(0)+t,0<e&&(q=q&&a[e]===a[e-1]);l=q?a[0]:a.join("");l=[k,"_cwise_loop_",f,"m",m,l].join("");return(new Function(["function ",l,"(",d.join(","),"){",h.join("\n"),"} return ",l].join("")))()}},{uniq:569}],153:[function(b,D,G){var r=b("./compile.js");D.exports=function(n){var p=["'use strict'","var CACHED\x3d{}"],k=[];p.push(["return function ",n.funcName+
"_cwise_thunk","(",n.shimArgs.join(","),"){"].join(""));for(var a=[],e=[],f=[["array",n.arrayArgs[0],".shape.slice(",Math.max(0,n.arrayBlockIndices[0]),0>n.arrayBlockIndices[0]?","+n.arrayBlockIndices[0]+")":")"].join("")],l=[],m=[],c=0;c<n.arrayArgs.length;++c){var d=n.arrayArgs[c];k.push(["t",d,"\x3darray",d,".dtype,r",d,"\x3darray",d,".order"].join(""));a.push("t"+d);a.push("r"+d);e.push("t"+d);e.push("r"+d+".join()");f.push("array"+d+".data");f.push("array"+d+".stride");f.push("array"+d+".offset|0");
0<c&&(l.push("array"+n.arrayArgs[0]+".shape.length\x3d\x3d\x3darray"+d+".shape.length+"+(Math.abs(n.arrayBlockIndices[0])-Math.abs(n.arrayBlockIndices[c]))),m.push("array"+n.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,n.arrayBlockIndices[0])+"]\x3d\x3d\x3darray"+d+".shape[shapeIndex+"+Math.max(0,n.arrayBlockIndices[c])+"]"))}1<n.arrayArgs.length&&(p.push("if (!("+l.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),p.push("for(var shapeIndex\x3darray"+
n.arrayArgs[0]+".shape.length-"+Math.abs(n.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),p.push("if (!("+m.join(" \x26\x26 ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),p.push("}"));for(c=0;c<n.scalarArgs.length;++c)f.push("scalar"+n.scalarArgs[c]);k.push(["type\x3d[",e.join(","),"].join()"].join(""));k.push("proc\x3dCACHED[type]");p.push("var "+k.join(","));p.push(["if(!proc){CACHED[type]\x3dproc\x3dcompile([",a.join(","),"])}return proc(",f.join(","),")}"].join(""));
n.debug&&console.log("-----Generated thunk:\n"+p.join("\n")+"\n----------");return(new Function("compile",p.join("\n")))(r.bind(void 0,n))}},{"./compile.js":152}],154:[function(b,D,G){var r=b("type/value/is"),n=b("type/value/ensure"),p=b("type/plain-function/ensure"),k=b("es5-ext/object/copy"),a=b("es5-ext/object/normalize-options"),e=b("es5-ext/object/map"),f=Function.prototype.bind,l=Object.defineProperty,m=Object.prototype.hasOwnProperty;var c=function(d,g,h){var q=n(g)&&p(g.value);var t=k(g);
delete t.writable;delete t.value;t.get=function(){if(!h.overwriteDefinition&&m.call(this,d))return q;g.value=f.call(q,h.resolveContext?h.resolveContext(this):this);l(this,d,g);return this[d]};return t};D.exports=function(d,g){var h=a(g);r(h.resolveContext)&&p(h.resolveContext);return e(d,function(q,t){return c(t,q,h)})}},{"es5-ext/object/copy":196,"es5-ext/object/map":204,"es5-ext/object/normalize-options":205,"type/plain-function/ensure":561,"type/value/ensure":565,"type/value/is":566}],155:[function(b,
D,G){var r=b("type/value/is"),n=b("type/plain-function/is"),p=b("es5-ext/object/assign"),k=b("es5-ext/object/normalize-options"),a=b("es5-ext/string/#/contains");(D.exports=function(e,f){if(2>arguments.length||"string"!==typeof e){var l=f;f=e;e=null}else l=arguments[2];if(r(e)){var m=a.call(e,"c");var c=a.call(e,"e");var d=a.call(e,"w")}else m=d=!0,c=!1;m={value:f,configurable:m,enumerable:c,writable:d};return l?p(k(l),m):m}).gs=function(e,f,l,m){"string"!==typeof e&&(m=l,l=f,f=e,e=null);r(f)?n(f)?
r(l)?n(l)||(m=l,l=void 0):l=void 0:(m=f,f=l=void 0):f=void 0;if(r(e)){var c=a.call(e,"c");e=a.call(e,"e")}else c=!0,e=!1;f={get:f,set:l,configurable:c,enumerable:e};return m?p(k(m),f):f}},{"es5-ext/object/assign":193,"es5-ext/object/normalize-options":205,"es5-ext/string/#/contains":212,"type/plain-function/is":562,"type/value/is":566}],156:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?n(G):n(r.d3=r.d3||{})})(this,function(r){function n(M,E){return M<E?-1:M>E?1:M>=E?
0:NaN}function p(M){1===M.length&&(M=k(M));return{left:function(E,L,P,N){null==P&&(P=0);null==N&&(N=E.length);for(;P<N;){var Q=P+N>>>1;0>M(E[Q],L)?P=Q+1:N=Q}return P},right:function(E,L,P,N){null==P&&(P=0);null==N&&(N=E.length);for(;P<N;){var Q=P+N>>>1;0<M(E[Q],L)?N=Q:P=Q+1}return P}}}function k(M){return function(E,L){return n(M(E),L)}}function a(M,E){return[M,E]}function e(M){return null===M?NaN:+M}function f(M,E){var L=M.length,P=0,N=-1,Q=0,O,T=0;if(null==E)for(;++N<L;){if(!isNaN(O=e(M[N]))){var V=
O-Q;Q+=V/++P;T+=V*(O-Q)}}else for(;++N<L;)isNaN(O=e(E(M[N],N,M)))||(V=O-Q,Q+=V/++P,T+=V*(O-Q));if(1<P)return T/(P-1)}function l(M,E){return(M=f(M,E))?Math.sqrt(M):M}function m(M,E){var L=M.length,P=-1,N,Q,O;if(null==E)for(;++P<L;){if(null!=(N=M[P])&&N>=N)for(Q=O=N;++P<L;)null!=(N=M[P])&&(Q>N&&(Q=N),O<N&&(O=N))}else for(;++P<L;)if(null!=(N=E(M[P],P,M))&&N>=N)for(Q=O=N;++P<L;)null!=(N=E(M[P],P,M))&&(Q>N&&(Q=N),O<N&&(O=N));return[Q,O]}function c(M){return function(){return M}}function d(M){return M}
function g(M,E,L){M=+M;E=+E;L=2>(N=arguments.length)?(E=M,M=0,1):3>N?1:+L;for(var P=-1,N=Math.max(0,Math.ceil((E-M)/L))|0,Q=Array(N);++P<N;)Q[P]=M+P*L;return Q}function h(M,E,L){E=(E-M)/Math.max(0,L);M=Math.floor(Math.log(E)/Math.LN10);E/=Math.pow(10,M);return 0<=M?(E>=H?10:E>=J?5:E>=I?2:1)*Math.pow(10,M):-Math.pow(10,-M)/(E>=H?10:E>=J?5:E>=I?2:1)}function q(M,E,L){var P=Math.abs(E-M)/Math.max(0,L);L=Math.pow(10,Math.floor(Math.log(P)/Math.LN10));P/=L;P>=H?L*=10:P>=J?L*=5:P>=I&&(L*=2);return E<M?
-L:L}function t(M){return Math.ceil(Math.log(M.length)/Math.LN2)+1}function v(M,E,L){null==L&&(L=e);if(P=M.length){if(0>=(E=+E)||2>P)return+L(M[0],0,M);if(1<=E)return+L(M[P-1],P-1,M);var P;E*=P-1;P=Math.floor(E);var N=+L(M[P],P,M);M=+L(M[P+1],P+1,M);return N+(M-N)*(E-P)}}function w(M,E){var L=M.length,P=-1,N,Q;if(null==E)for(;++P<L;){if(null!=(N=M[P])&&N>=N)for(Q=N;++P<L;)null!=(N=M[P])&&Q>N&&(Q=N)}else for(;++P<L;)if(null!=(N=E(M[P],P,M))&&N>=N)for(Q=N;++P<L;)null!=(N=E(M[P],P,M))&&Q>N&&(Q=N);return Q}
function A(M){if(!(Q=M.length))return[];for(var E=-1,L=w(M,z),P=Array(L);++E<L;)for(var N=-1,Q,O=P[E]=Array(Q);++N<Q;)O[N]=M[N][E];return P}function z(M){return M.length}var y=p(n),B=y.right;y=y.left;var C=Array.prototype,u=C.slice,F=C.map,H=Math.sqrt(50),J=Math.sqrt(10),I=Math.sqrt(2);r.bisect=B;r.bisectRight=B;r.bisectLeft=y;r.ascending=n;r.bisector=p;r.cross=function(M,E,L){var P=M.length,N=E.length,Q=Array(P*N),O,T,V;null==L&&(L=a);for(O=V=0;O<P;++O){var Z=M[O];for(T=0;T<N;++T,++V)Q[V]=L(Z,E[T])}return Q};
r.descending=function(M,E){return E<M?-1:E>M?1:E>=M?0:NaN};r.deviation=l;r.extent=m;r.histogram=function(){function M(N){var Q,O=N.length,T=Array(O);for(Q=0;Q<O;++Q)T[Q]=E(N[Q],Q,N);Q=L(T);var V=Q[0],Z=Q[1],aa=P(T,V,Z);Array.isArray(aa)||(aa=q(V,Z,aa),aa=g(Math.ceil(V/aa)*aa,Z,aa));for(var Y=aa.length;aa[0]<=V;)aa.shift(),--Y;for(;aa[Y-1]>Z;)aa.pop(),--Y;var ea=Array(Y+1);for(Q=0;Q<=Y;++Q){var ca=ea[Q]=[];ca.x0=0<Q?aa[Q-1]:V;ca.x1=Q<Y?aa[Q]:Z}for(Q=0;Q<O;++Q)ca=T[Q],V<=ca&&ca<=Z&&ea[B(aa,ca,0,Y)].push(N[Q]);
return ea}var E=d,L=m,P=t;M.value=function(N){return arguments.length?(E="function"===typeof N?N:c(N),M):E};M.domain=function(N){return arguments.length?(L="function"===typeof N?N:c([N[0],N[1]]),M):L};M.thresholds=function(N){return arguments.length?(P="function"===typeof N?N:Array.isArray(N)?c(u.call(N)):c(N),M):P};return M};r.thresholdFreedmanDiaconis=function(M,E,L){M=F.call(M,e).sort(n);return Math.ceil((L-E)/(2*(v(M,.75)-v(M,.25))*Math.pow(M.length,-1/3)))};r.thresholdScott=function(M,E,L){return Math.ceil((L-
E)/(3.5*l(M)*Math.pow(M.length,-1/3)))};r.thresholdSturges=t;r.max=function(M,E){var L=M.length,P=-1,N,Q;if(null==E)for(;++P<L;){if(null!=(N=M[P])&&N>=N)for(Q=N;++P<L;)null!=(N=M[P])&&N>Q&&(Q=N)}else for(;++P<L;)if(null!=(N=E(M[P],P,M))&&N>=N)for(Q=N;++P<L;)null!=(N=E(M[P],P,M))&&N>Q&&(Q=N);return Q};r.mean=function(M,E){var L=M.length,P=L,N=-1,Q,O=0;if(null==E)for(;++N<L;)isNaN(Q=e(M[N]))?--P:O+=Q;else for(;++N<L;)isNaN(Q=e(E(M[N],N,M)))?--P:O+=Q;if(P)return O/P};r.median=function(M,E){var L=M.length,
P=-1,N,Q=[];if(null==E)for(;++P<L;)isNaN(N=e(M[P]))||Q.push(N);else for(;++P<L;)isNaN(N=e(E(M[P],P,M)))||Q.push(N);return v(Q.sort(n),.5)};r.merge=function(M){var E=M.length;var L=-1;for(var P=0,N,Q;++L<E;)P+=M[L].length;for(N=Array(P);0<=--E;)for(Q=M[E],L=Q.length;0<=--L;)N[--P]=Q[L];return N};r.min=w;r.pairs=function(M,E){null==E&&(E=a);for(var L=0,P=M.length-1,N=M[0],Q=Array(0>P?0:P);L<P;)Q[L]=E(N,N=M[++L]);return Q};r.permute=function(M,E){for(var L=E.length,P=Array(L);L--;)P[L]=M[E[L]];return P};
r.quantile=v;r.range=g;r.scan=function(M,E){if(L=M.length){var L,P=0,N=0,Q,O=M[N];for(null==E&&(E=n);++P<L;)if(0>E(Q=M[P],O)||0!==E(O,O))O=Q,N=P;if(0===E(O,O))return N}};r.shuffle=function(M,E,L){L=(null==L?M.length:L)-(E=null==E?0:+E);for(var P,N;L;)N=Math.random()*L--|0,P=M[L+E],M[L+E]=M[N+E],M[N+E]=P;return M};r.sum=function(M,E){var L=M.length,P=-1,N,Q=0;if(null==E)for(;++P<L;){if(N=+M[P])Q+=N}else for(;++P<L;)if(N=+E(M[P],P,M))Q+=N;return Q};r.ticks=function(M,E,L){var P,N=-1,Q;E=+E;M=+M;L=+L;
if(M===E&&0<L)return[M];if(P=E<M){var O=M;M=E;E=O}if(0===(Q=h(M,E,L))||!isFinite(Q))return[];if(0<Q)for(M=Math.ceil(M/Q),E=Math.floor(E/Q),E=Array(O=Math.ceil(E-M+1));++N<O;)E[N]=(M+N)*Q;else for(M=Math.floor(M*Q),E=Math.ceil(E*Q),E=Array(O=Math.ceil(M-E+1));++N<O;)E[N]=(M-N)/Q;P&&E.reverse();return E};r.tickIncrement=h;r.tickStep=q;r.transpose=A;r.variance=f;r.zip=function(){return A(arguments)};Object.defineProperty(r,"__esModule",{value:!0})})},{}],157:[function(b,D,G){(function(r,n){"object"===
typeof G&&"undefined"!==typeof D?n(G):n(r.d3=r.d3||{})})(this,function(r){function n(){}function p(d,g){var h=new n;if(d instanceof n)d.each(function(w,A){h.set(A,w)});else if(Array.isArray(d)){var q=-1,t=d.length,v;if(null==g)for(;++q<t;)h.set(q,d[q]);else for(;++q<t;)h.set(g(v=d[q],q,d),v)}else if(d)for(q in d)h.set(q,d[q]);return h}function k(){return{}}function a(d,g,h){d[g]=h}function e(){return p()}function f(d,g,h){d.set(g,h)}function l(){}function m(d,g){var h=new l;if(d instanceof l)d.each(function(v){h.add(v)});
else if(d){var q=-1,t=d.length;if(null==g)for(;++q<t;)h.add(d[q]);else for(;++q<t;)h.add(g(d[q],q,d))}return h}n.prototype=p.prototype={constructor:n,has:function(d){return"$"+d in this},get:function(d){return this["$"+d]},set:function(d,g){this["$"+d]=g;return this},remove:function(d){d="$"+d;return d in this&&delete this[d]},clear:function(){for(var d in this)"$"===d[0]&&delete this[d]},keys:function(){var d=[],g;for(g in this)"$"===g[0]&&d.push(g.slice(1));return d},values:function(){var d=[],
g;for(g in this)"$"===g[0]&&d.push(this[g]);return d},entries:function(){var d=[],g;for(g in this)"$"===g[0]&&d.push({key:g.slice(1),value:this[g]});return d},size:function(){var d=0,g;for(g in this)"$"===g[0]&&++d;return d},empty:function(){for(var d in this)if("$"===d[0])return!1;return!0},each:function(d){for(var g in this)"$"===g[0]&&d(this[g],g.slice(1),this)}};var c=p.prototype;l.prototype=m.prototype={constructor:l,has:c.has,add:function(d){d+="";this["$"+d]=d;return this},remove:c.remove,
clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};r.nest=function(){function d(A,z,y,B){if(z>=h.length)return null!=t&&A.sort(t),null!=v?v(A):A;for(var C=-1,u=A.length,F=h[z++],H,J,I=p(),M,E=y();++C<u;)(M=I.get(H=F(J=A[C])+""))?M.push(J):I.set(H,[J]);I.each(function(L,P){B(E,P,d(L,z,y,B))});return E}function g(A,z){if(++z>h.length)return A;var y=q[z-1];if(null!=v&&z>=h.length)var B=A.entries();else B=[],A.each(function(C,u){B.push({key:u,values:g(C,z)})});return null!=y?B.sort(function(C,
u){return y(C.key,u.key)}):B}var h=[],q=[],t,v,w;return w={object:function(A){return d(A,0,k,a)},map:function(A){return d(A,0,e,f)},entries:function(A){return g(d(A,0,e,f),0)},key:function(A){h.push(A);return w},sortKeys:function(A){q[h.length-1]=A;return w},sortValues:function(A){t=A;return w},rollup:function(A){v=A;return w}}};r.set=m;r.map=p;r.keys=function(d){var g=[],h;for(h in d)g.push(h);return g};r.values=function(d){var g=[],h;for(h in d)g.push(d[h]);return g};r.entries=function(d){var g=
[],h;for(h in d)g.push({key:h,value:d[h]});return g};Object.defineProperty(r,"__esModule",{value:!0})})},{}],158:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?n(G):(r=r||self,n(r.d3=r.d3||{}))})(this,function(r){function n(la,ua,na){la.prototype=ua.prototype=na;na.constructor=la}function p(la,ua){la=Object.create(la.prototype);for(var na in ua)la[na]=ua[na];return la}function k(){}function a(){return this.rgb().formatHex()}function e(){return this.rgb().formatRgb()}function f(la){var ua,
na;la=(la+"").trim().toLowerCase();return(ua=T.exec(la))?(na=ua[1].length,ua=parseInt(ua[1],16),6===na?l(ua):3===na?new g(ua>>8&15|ua>>4&240,ua>>4&15|ua&240,(ua&15)<<4|ua&15,1):8===na?m(ua>>24&255,ua>>16&255,ua>>8&255,(ua&255)/255):4===na?m(ua>>12&15|ua>>8&240,ua>>8&15|ua>>4&240,ua>>4&15|ua&240,((ua&15)<<4|ua&15)/255):null):(ua=V.exec(la))?new g(ua[1],ua[2],ua[3],1):(ua=Z.exec(la))?new g(255*ua[1]/100,255*ua[2]/100,255*ua[3]/100,1):(ua=aa.exec(la))?m(ua[1],ua[2],ua[3],ua[4]):(ua=Y.exec(la))?m(255*
ua[1]/100,255*ua[2]/100,255*ua[3]/100,ua[4]):(ua=ea.exec(la))?v(ua[1],ua[2]/100,ua[3]/100,1):(ua=ca.exec(la))?v(ua[1],ua[2]/100,ua[3]/100,ua[4]):ba.hasOwnProperty(la)?l(ba[la]):"transparent"===la?new g(NaN,NaN,NaN,0):null}function l(la){return new g(la>>16&255,la>>8&255,la&255,1)}function m(la,ua,na,wa){0>=wa&&(la=ua=na=NaN);return new g(la,ua,na,wa)}function c(la){la instanceof k||(la=f(la));if(!la)return new g;la=la.rgb();return new g(la.r,la.g,la.b,la.opacity)}function d(la,ua,na,wa){return 1===
arguments.length?c(la):new g(la,ua,na,null==wa?1:wa)}function g(la,ua,na,wa){this.r=+la;this.g=+ua;this.b=+na;this.opacity=+wa}function h(){return"#"+t(this.r)+t(this.g)+t(this.b)}function q(){var la=this.opacity;la=isNaN(la)?1:Math.max(0,Math.min(1,la));return(1===la?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===la?")":", "+la+")")}function t(la){la=Math.max(0,Math.min(255,
Math.round(la)||0));return(16>la?"0":"")+la.toString(16)}function v(la,ua,na,wa){0>=wa?la=ua=na=NaN:0>=na||1<=na?la=ua=NaN:0>=ua&&(la=NaN);return new z(la,ua,na,wa)}function w(la){if(la instanceof z)return new z(la.h,la.s,la.l,la.opacity);la instanceof k||(la=f(la));if(!la)return new z;if(la instanceof z)return la;la=la.rgb();var ua=la.r/255,na=la.g/255,wa=la.b/255,Ca=Math.min(ua,na,wa),Fa=Math.max(ua,na,wa),Xa=NaN,ab=Fa-Ca,gb=(Fa+Ca)/2;ab?(Xa=ua===Fa?(na-wa)/ab+6*(na<wa):na===Fa?(wa-ua)/ab+2:(ua-
na)/ab+4,ab/=.5>gb?Fa+Ca:2-Fa-Ca,Xa*=60):ab=0<gb&&1>gb?0:Xa;return new z(Xa,ab,gb,la.opacity)}function A(la,ua,na,wa){return 1===arguments.length?w(la):new z(la,ua,na,null==wa?1:wa)}function z(la,ua,na,wa){this.h=+la;this.s=+ua;this.l=+na;this.opacity=+wa}function y(la,ua,na){return 255*(60>la?ua+(na-ua)*la/60:180>la?na:240>la?ua+(na-ua)*(240-la)/60:ua)}function B(la){if(la instanceof u)return new u(la.l,la.a,la.b,la.opacity);if(la instanceof L)return P(la);la instanceof g||(la=c(la));var ua=I(la.r),
na=I(la.g),wa=I(la.b),Ca=F(.2225045*ua+.7168786*na+.0606169*wa);if(ua===na&&na===wa)var Fa=ua=Ca;else Fa=F((.4360747*ua+.3850649*na+.1430804*wa)/.96422),ua=F((.0139322*ua+.0971045*na+.7141733*wa)/.82521);return new u(116*Ca-16,500*(Fa-Ca),200*(Ca-ua),la.opacity)}function C(la,ua,na,wa){return 1===arguments.length?B(la):new u(la,ua,na,null==wa?1:wa)}function u(la,ua,na,wa){this.l=+la;this.a=+ua;this.b=+na;this.opacity=+wa}function F(la){return la>ra?Math.pow(la,1/3):la/ja+pa}function H(la){return la>
oa?la*la*la:ja*(la-pa)}function J(la){return 255*(.0031308>=la?12.92*la:1.055*Math.pow(la,1/2.4)-.055)}function I(la){return.04045>=(la/=255)?la/12.92:Math.pow((la+.055)/1.055,2.4)}function M(la){if(la instanceof L)return new L(la.h,la.c,la.l,la.opacity);la instanceof u||(la=B(la));if(0===la.a&&0===la.b)return new L(NaN,0<la.l&&100>la.l?0:NaN,la.l,la.opacity);var ua=Math.atan2(la.b,la.a)*qa;return new L(0>ua?ua+360:ua,Math.sqrt(la.a*la.a+la.b*la.b),la.l,la.opacity)}function E(la,ua,na,wa){return 1===
arguments.length?M(la):new L(la,ua,na,null==wa?1:wa)}function L(la,ua,na,wa){this.h=+la;this.c=+ua;this.l=+na;this.opacity=+wa}function P(la){if(isNaN(la.h))return new u(la.l,0,0,la.opacity);var ua=la.h*ka;return new u(la.l,Math.cos(ua)*la.c,Math.sin(ua)*la.c,la.opacity)}function N(la,ua,na,wa){if(1===arguments.length){var Ca=la;if(Ca instanceof Q)Ca=new Q(Ca.h,Ca.s,Ca.l,Ca.opacity);else{Ca instanceof g||(Ca=c(Ca));var Fa=Ca.g/255,Xa=Ca.b/255,ab=(ha*Xa+Ca.r/255*-1.7884503806-3.5172982438*Fa)/(ha+
-1.7884503806-3.5172982438);Xa-=ab;var gb=(1.97294*(Fa-ab)- -.29227*Xa)/-.90649;Xa=(Fa=Math.sqrt(gb*gb+Xa*Xa)/(1.97294*ab*(1-ab)))?Math.atan2(gb,Xa)*qa-120:NaN;Ca=new Q(0>Xa?Xa+360:Xa,Fa,ab,Ca.opacity)}}else Ca=new Q(la,ua,na,null==wa?1:wa);return Ca}function Q(la,ua,na,wa){this.h=+la;this.s=+ua;this.l=+na;this.opacity=+wa}var O=1/.7,T=/^#([0-9a-f]{3,8})$/,V=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,Z=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,
aa=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Y=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ea=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,ca=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
ba={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,
darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,
hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,
linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};n(k,f,{copy:function(la){return Object.assign(new this.constructor,this,la)},displayable:function(){return this.rgb().displayable()},hex:a,formatHex:a,formatHsl:function(){return w(this).formatHsl()},formatRgb:e,toString:e});n(g,d,p(k,{brighter:function(la){la=null==la?O:Math.pow(O,la);return new g(this.r*la,this.g*la,this.b*la,this.opacity)},darker:function(la){la=null==la?.7:
Math.pow(.7,la);return new g(this.r*la,this.g*la,this.b*la,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:h,formatHex:h,formatRgb:q,toString:q}));n(z,A,p(k,{brighter:function(la){la=null==la?O:Math.pow(O,la);return new z(this.h,this.s,this.l*la,this.opacity)},darker:function(la){la=null==la?.7:Math.pow(.7,la);return new z(this.h,this.s,this.l*la,this.opacity)},
rgb:function(){var la=this.h%360+360*(0>this.h),ua=isNaN(la)||isNaN(this.s)?0:this.s,na=this.l;ua=na+(.5>na?na:1-na)*ua;na=2*na-ua;return new g(y(240<=la?la-240:la+120,na,ua),y(la,na,ua),y(120>la?la+240:la-120,na,ua),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var la=this.opacity;la=isNaN(la)?1:Math.max(0,Math.min(1,la));return(1===la?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+
"%, "+100*(this.l||0)+"%"+(1===la?")":", "+la+")")}}));var ka=Math.PI/180,qa=180/Math.PI,pa=4/29,oa=6/29,ja=3*oa*oa,ra=oa*oa*oa;n(u,C,p(k,{brighter:function(la){return new u(this.l+18*(null==la?1:la),this.a,this.b,this.opacity)},darker:function(la){return new u(this.l-18*(null==la?1:la),this.a,this.b,this.opacity)},rgb:function(){var la=(this.l+16)/116,ua=isNaN(this.a)?la:la+this.a/500,na=isNaN(this.b)?la:la-this.b/200;ua=.96422*H(ua);la=1*H(la);na=.82521*H(na);return new g(J(3.1338561*ua-1.6168667*
la-.4906146*na),J(-.9787684*ua+1.9161415*la+.033454*na),J(.0719453*ua-.2289914*la+1.4052427*na),this.opacity)}}));n(L,E,p(k,{brighter:function(la){return new L(this.h,this.c,this.l+18*(null==la?1:la),this.opacity)},darker:function(la){return new L(this.h,this.c,this.l-18*(null==la?1:la),this.opacity)},rgb:function(){return P(this).rgb()}}));var ha=1.78277*-.29227-.1347134789;n(Q,N,p(k,{brighter:function(la){la=null==la?O:Math.pow(O,la);return new Q(this.h,this.s,this.l*la,this.opacity)},darker:function(la){la=
null==la?.7:Math.pow(.7,la);return new Q(this.h,this.s,this.l*la,this.opacity)},rgb:function(){var la=isNaN(this.h)?0:(this.h+120)*ka,ua=+this.l,na=isNaN(this.s)?0:this.s*ua*(1-ua),wa=Math.cos(la);la=Math.sin(la);return new g(255*(ua+na*(-.14861*wa+1.78277*la)),255*(ua+na*(-.29227*wa+-.90649*la)),255*(ua+1.97294*na*wa),this.opacity)}}));r.color=f;r.cubehelix=N;r.gray=function(la,ua){return new u(la,0,0,null==ua?1:ua)};r.hcl=E;r.hsl=A;r.lab=C;r.lch=function(la,ua,na,wa){return 1===arguments.length?
M(la):new L(na,ua,la,null==wa?1:wa)};r.rgb=d;Object.defineProperty(r,"__esModule",{value:!0})})},{}],159:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?n(G):(r=r||self,n(r.d3=r.d3||{}))})(this,function(r){function n(){for(var f=0,l=arguments.length,m={},c;f<l;++f){if(!(c=arguments[f]+"")||c in m||/[\s.]/.test(c))throw Error("illegal type: "+c);m[c]=[]}return new p(m)}function p(f){this._=f}function k(f,l){return f.trim().split(/^|\s+/).map(function(m){var c="",d=m.indexOf(".");
0<=d&&(c=m.slice(d+1),m=m.slice(0,d));if(m&&!l.hasOwnProperty(m))throw Error("unknown type: "+m);return{type:m,name:c}})}function a(f,l,m){for(var c=0,d=f.length;c<d;++c)if(f[c].name===l){f[c]=e;f=f.slice(0,c).concat(f.slice(c+1));break}null!=m&&f.push({name:l,value:m});return f}var e={value:function(){}};p.prototype=n.prototype={constructor:p,on:function(f,l){var m=this._,c=k(f+"",m),d,g=-1,h=c.length;if(2>arguments.length)for(;++g<h;){var q;if(q=d=(f=c[g]).type){a:{q=m[d];for(var t=0,v=q.length;t<
v;++t)if((d=q[t]).name===f.name){d=d.value;break a}d=void 0}q=d}if(q)return d}else{if(null!=l&&"function"!==typeof l)throw Error("invalid callback: "+l);for(;++g<h;)if(d=(f=c[g]).type)m[d]=a(m[d],f.name,l);else if(null==l)for(d in m)m[d]=a(m[d],f.name,null);return this}},copy:function(){var f={},l=this._,m;for(m in l)f[m]=l[m].slice();return new p(f)},call:function(f,l){if(0<(d=arguments.length-2))for(var m=Array(d),c=0,d,g;c<d;++c)m[c]=arguments[c+2];if(!this._.hasOwnProperty(f))throw Error("unknown type: "+
f);g=this._[f];c=0;for(d=g.length;c<d;++c)g[c].value.apply(l,m)},apply:function(f,l,m){if(!this._.hasOwnProperty(f))throw Error("unknown type: "+f);f=this._[f];for(var c=0,d=f.length;c<d;++c)f[c].value.apply(l,m)}};r.dispatch=n;Object.defineProperty(r,"__esModule",{value:!0})})},{}],160:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?n(G,b("d3-quadtree"),b("d3-collection"),b("d3-dispatch"),b("d3-timer")):n(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3)})(this,function(r,n,p,k,a){function e(t){return function(){return t}}
function f(){return 1E-6*(Math.random()-.5)}function l(t){return t.x+t.vx}function m(t){return t.y+t.vy}function c(t){return t.index}function d(t,v){t=t.get(v);if(!t)throw Error("missing: "+v);return t}function g(t){return t.x}function h(t){return t.y}var q=Math.PI*(3-Math.sqrt(5));r.forceCenter=function(t,v){function w(){var z,y=A.length,B=0,C=0;for(z=0;z<y;++z){var u=A[z];B+=u.x;C+=u.y}B=B/y-t;C=C/y-v;for(z=0;z<y;++z)u=A[z],u.x-=B,u.y-=C}var A;null==t&&(t=0);null==v&&(v=0);w.initialize=function(z){A=
z};w.x=function(z){return arguments.length?(t=+z,w):t};w.y=function(z){return arguments.length?(v=+z,w):v};return w};r.forceCollide=function(t){function v(){function u(Q,O,T,V,Z){var aa=Q.data;Q=Q.r;var Y=L+Q;if(aa)aa.index>I.index&&(O=M-aa.x-aa.vx,T=E-aa.y-aa.vy,V=O*O+T*T,V<Y*Y&&(0===O&&(O=f(),V+=O*O),0===T&&(T=f(),V+=T*T),V=(Y-(V=Math.sqrt(V)))/V*B,I.vx+=(O*=V)*(Y=(Q*=Q)/(P+Q)),I.vy+=(T*=V)*Y,aa.vx-=O*(Y=1-Y),aa.vy-=T*Y));else return O>M+Y||V<M-Y||T>E+Y||Z<E-Y}for(var F,H=z.length,J,I,M,E,L,P,N=
0;N<C;++N)for(J=n.quadtree(z,l,m).visitAfter(w),F=0;F<H;++F)I=z[F],L=y[I.index],P=L*L,M=I.x+I.vx,E=I.y+I.vy,J.visit(u)}function w(u){if(u.data)return u.r=y[u.data.index];for(var F=u.r=0;4>F;++F)u[F]&&u[F].r>u.r&&(u.r=u[F].r)}function A(){if(z){var u,F=z.length;y=Array(F);for(u=0;u<F;++u){var H=z[u];y[H.index]=+t(H,u,z)}}}var z,y,B=1,C=1;"function"!==typeof t&&(t=e(null==t?1:+t));v.initialize=function(u){z=u;A()};v.iterations=function(u){return arguments.length?(C=+u,v):C};v.strength=function(u){return arguments.length?
(B=+u,v):B};v.radius=function(u){return arguments.length?(t="function"===typeof u?u:e(+u),A(),v):t};return v};r.forceLink=function(t){function v(E){for(var L=0,P=t.length;L<M;++L)for(var N=0,Q,O,T,V,Z;N<P;++N)Q=t[N],O=Q.source,Q=Q.target,T=Q.x+Q.vx-O.x-O.vx||f(),V=Q.y+Q.vy-O.y-O.vy||f(),Z=Math.sqrt(T*T+V*V),Z=(Z-F[N])/Z*E*C[N],T*=Z,V*=Z,Q.vx-=T*(Z=I[N]),Q.vy-=V*Z,O.vx+=T*(Z=1-Z),O.vy+=V*Z}function w(){if(H){var E=H.length,L=t.length,P=p.map(H,y);var N=0;for(J=Array(E);N<L;++N)E=t[N],E.index=N,"object"!==
typeof E.source&&(E.source=d(P,E.source)),"object"!==typeof E.target&&(E.target=d(P,E.target)),J[E.source.index]=(J[E.source.index]||0)+1,J[E.target.index]=(J[E.target.index]||0)+1;N=0;for(I=Array(L);N<L;++N)E=t[N],I[N]=J[E.source.index]/(J[E.source.index]+J[E.target.index]);C=Array(L);A();F=Array(L);z()}}function A(){if(H)for(var E=0,L=t.length;E<L;++E)C[E]=+B(t[E],E,t)}function z(){if(H)for(var E=0,L=t.length;E<L;++E)F[E]=+u(t[E],E,t)}var y=c,B=function(E){return 1/Math.min(J[E.source.index],J[E.target.index])},
C,u=e(30),F,H,J,I,M=1;null==t&&(t=[]);v.initialize=function(E){H=E;w()};v.links=function(E){return arguments.length?(t=E,w(),v):t};v.id=function(E){return arguments.length?(y=E,v):y};v.iterations=function(E){return arguments.length?(M=+E,v):M};v.strength=function(E){return arguments.length?(B="function"===typeof E?E:e(+E),A(),v):B};v.distance=function(E){return arguments.length?(u="function"===typeof E?E:e(+E),z(),v):u};return v};r.forceManyBody=function(){function t(I){var M=z.length,E=n.quadtree(z,
g,h).visitAfter(w);B=I;for(I=0;I<M;++I)y=z[I],E.visit(A)}function v(){if(z){var I,M=z.length;u=Array(M);for(I=0;I<M;++I){var E=z[I];u[E.index]=+C(E,I,z)}}}function w(I){var M=0,E,L,P=0,N,Q,O;if(I.length){for(N=Q=O=0;4>O;++O)(E=I[O])&&(L=Math.abs(E.value))&&(M+=E.value,P+=L,N+=L*E.x,Q+=L*E.y);I.x=N/P;I.y=Q/P}else{E=I;E.x=E.data.x;E.y=E.data.y;do M+=u[E.data.index];while(E=E.next)}I.value=M}function A(I,M,E,L){if(!I.value)return!0;E=I.x-y.x;var P=I.y-y.y;M=L-M;L=E*E+P*P;if(M*M/J<L)return L<H&&(0===
E&&(E=f(),L+=E*E),0===P&&(P=f(),L+=P*P),L<F&&(L=Math.sqrt(F*L)),y.vx+=E*I.value*B/L,y.vy+=P*I.value*B/L),!0;if(!(I.length||L>=H)){if(I.data!==y||I.next)0===E&&(E=f(),L+=E*E),0===P&&(P=f(),L+=P*P),L<F&&(L=Math.sqrt(F*L));do I.data!==y&&(M=u[I.data.index]*B/L,y.vx+=E*M,y.vy+=P*M);while(I=I.next)}}var z,y,B,C=e(-30),u,F=1,H=Infinity,J=.81;t.initialize=function(I){z=I;v()};t.strength=function(I){return arguments.length?(C="function"===typeof I?I:e(+I),v(),t):C};t.distanceMin=function(I){return arguments.length?
(F=I*I,t):Math.sqrt(F)};t.distanceMax=function(I){return arguments.length?(H=I*I,t):Math.sqrt(H)};t.theta=function(I){return arguments.length?(J=I*I,t):Math.sqrt(J)};return t};r.forceRadial=function(t,v,w){function A(F){for(var H=0,J=y.length;H<J;++H){var I=y[H],M=I.x-v||1E-6,E=I.y-w||1E-6,L=Math.sqrt(M*M+E*E);L=(u[H]-L)*C[H]*F/L;I.vx+=M*L;I.vy+=E*L}}function z(){if(y){var F,H=y.length;C=Array(H);u=Array(H);for(F=0;F<H;++F)u[F]=+t(y[F],F,y),C[F]=isNaN(u[F])?0:+B(y[F],F,y)}}var y,B=e(.1),C,u;"function"!==
typeof t&&(t=e(+t));null==v&&(v=0);null==w&&(w=0);A.initialize=function(F){y=F;z()};A.strength=function(F){return arguments.length?(B="function"===typeof F?F:e(+F),z(),A):B};A.radius=function(F){return arguments.length?(t="function"===typeof F?F:e(+F),z(),A):t};A.x=function(F){return arguments.length?(v=+F,A):v};A.y=function(F){return arguments.length?(w=+F,A):w};return A};r.forceSimulation=function(t){function v(){w();M.call("tick",y);B<C&&(I.stop(),M.call("end",y))}function w(E){var L,P=t.length;
void 0===E&&(E=1);for(var N=0;N<E;++N)for(B+=(F-B)*u,J.each(function(O){O(B)}),L=0;L<P;++L){var Q=t[L];null==Q.fx?Q.x+=Q.vx*=H:(Q.x=Q.fx,Q.vx=0);null==Q.fy?Q.y+=Q.vy*=H:(Q.y=Q.fy,Q.vy=0)}return y}function A(){for(var E=0,L=t.length,P;E<L;++E){P=t[E];P.index=E;null!=P.fx&&(P.x=P.fx);null!=P.fy&&(P.y=P.fy);if(isNaN(P.x)||isNaN(P.y)){var N=10*Math.sqrt(E),Q=E*q;P.x=N*Math.cos(Q);P.y=N*Math.sin(Q)}if(isNaN(P.vx)||isNaN(P.vy))P.vx=P.vy=0}}function z(E){E.initialize&&E.initialize(t);return E}var y,B=1,
C=.001,u=1-Math.pow(C,1/300),F=0,H=.6,J=p.map(),I=a.timer(v),M=k.dispatch("tick","end");null==t&&(t=[]);A();return y={tick:w,restart:function(){return I.restart(v),y},stop:function(){return I.stop(),y},nodes:function(E){return arguments.length?(t=E,A(),J.each(z),y):t},alpha:function(E){return arguments.length?(B=+E,y):B},alphaMin:function(E){return arguments.length?(C=+E,y):C},alphaDecay:function(E){return arguments.length?(u=+E,y):+u},alphaTarget:function(E){return arguments.length?(F=+E,y):F},velocityDecay:function(E){return arguments.length?
(H=1-E,y):1-H},force:function(E,L){return 1<arguments.length?(null==L?J.remove(E):J.set(E,z(L)),y):J.get(E)},find:function(E,L,P){var N,Q=t.length;P=null==P?Infinity:P*P;for(N=0;N<Q;++N){var O=t[N];var T=E-O.x;var V=L-O.y;T=T*T+V*V;if(T<P){var Z=O;P=T}}return Z},on:function(E,L){return 1<arguments.length?(M.on(E,L),y):M.on(E)}}};r.forceX=function(t){function v(C){for(var u=0,F=z.length,H;u<F;++u)H=z[u],H.vx+=(B[u]-H.x)*y[u]*C}function w(){if(z){var C,u=z.length;y=Array(u);B=Array(u);for(C=0;C<u;++C)y[C]=
isNaN(B[C]=+t(z[C],C,z))?0:+A(z[C],C,z)}}var A=e(.1),z,y,B;"function"!==typeof t&&(t=e(null==t?0:+t));v.initialize=function(C){z=C;w()};v.strength=function(C){return arguments.length?(A="function"===typeof C?C:e(+C),w(),v):A};v.x=function(C){return arguments.length?(t="function"===typeof C?C:e(+C),w(),v):t};return v};r.forceY=function(t){function v(C){for(var u=0,F=z.length,H;u<F;++u)H=z[u],H.vy+=(B[u]-H.y)*y[u]*C}function w(){if(z){var C,u=z.length;y=Array(u);B=Array(u);for(C=0;C<u;++C)y[C]=isNaN(B[C]=
+t(z[C],C,z))?0:+A(z[C],C,z)}}var A=e(.1),z,y,B;"function"!==typeof t&&(t=e(null==t?0:+t));v.initialize=function(C){z=C;w()};v.strength=function(C){return arguments.length?(A="function"===typeof C?C:e(+C),w(),v):A};v.y=function(C){return arguments.length?(t="function"===typeof C?C:e(+C),w(),v):t};return v};Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-collection":157,"d3-dispatch":159,"d3-quadtree":164,"d3-timer":168}],161:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==
typeof D?n(G):(r=r||self,n(r.d3=r.d3||{}))})(this,function(r){function n(ja,ra){return ja.parent===ra.parent?1:2}function p(ja,ra){return ja+ra.x}function k(ja,ra){return Math.max(ja,ra.y)}function a(ja){for(var ra;ra=ja.children;)ja=ra[0];return ja}function e(ja){for(var ra;ra=ja.children;)ja=ra[ra.length-1];return ja}function f(ja){var ra=0,ha=ja.children,la=ha&&ha.length;if(la)for(;0<=--la;)ra+=ha[la].value;else ra=1;ja.value=ra}function l(ja,ra){var ha=new g(ja);ja=+ja.value&&(ha.value=ja.value);
var la,ua=[ha],na,wa,Ca,Fa;for(null==ra&&(ra=m);la=ua.pop();)if(ja&&(la.value=+la.data.value),(wa=ra(la.data))&&(Fa=wa.length))for(la.children=Array(Fa),Ca=Fa-1;0<=Ca;--Ca)ua.push(na=la.children[Ca]=new g(wa[Ca])),na.parent=la,na.depth=la.depth+1;return ha.eachBefore(d)}function m(ja){return ja.children}function c(ja){ja.data=ja.data.data}function d(ja){var ra=0;do ja.height=ra;while((ja=ja.parent)&&ja.height<++ra)}function g(ja){this.data=ja;this.depth=this.height=0;this.parent=null}function h(ja){var ra=
0;ja=ba.call(ja);for(var ha=ja.length,la,ua;ha;)ua=Math.random()*ha--|0,la=ja[ha],ja[ha]=ja[ua],ja[ua]=la;ha=ja.length;la=[];for(var na;ra<ha;)if(ua=ja[ra],na&&t(na,ua))++ra;else{a:if(ra=la,v(ua,ra))ra=[ua];else{for(la=0;la<ra.length;++la)if(q(ua,ra[la])&&v(w(ra[la],ua),ra)){ra=[ra[la],ua];break a}for(la=0;la<ra.length-1;++la)for(na=la+1;na<ra.length;++na)if(q(w(ra[la],ra[na]),ua)&&q(w(ra[la],ua),ra[na])&&q(w(ra[na],ua),ra[la])&&v(A(ra[la],ra[na],ua),ra)){ra=[ra[la],ra[na],ua];break a}throw Error();
}a:{ra=la=ra;switch(ra.length){case 1:ra=ra[0];ra={x:ra.x,y:ra.y,r:ra.r};break a;case 2:ra=w(ra[0],ra[1]);break a;case 3:ra=A(ra[0],ra[1],ra[2]);break a}ra=void 0}na=ra;ra=0}return na}function q(ja,ra){var ha=ja.r-ra.r,la=ra.x-ja.x;ja=ra.y-ja.y;return 0>ha||ha*ha<la*la+ja*ja}function t(ja,ra){var ha=ja.r-ra.r+1E-6,la=ra.x-ja.x;ja=ra.y-ja.y;return 0<ha&&ha*ha>la*la+ja*ja}function v(ja,ra){for(var ha=0;ha<ra.length;++ha)if(!t(ja,ra[ha]))return!1;return!0}function w(ja,ra){var ha=ja.x,la=ja.y;ja=ja.r;
var ua=ra.x,na=ra.y;ra=ra.r;var wa=ua-ha,Ca=na-la,Fa=ra-ja,Xa=Math.sqrt(wa*wa+Ca*Ca);return{x:(ha+ua+wa/Xa*Fa)/2,y:(la+na+Ca/Xa*Fa)/2,r:(Xa+ja+ra)/2}}function A(ja,ra,ha){var la=ja.x,ua=ja.y;ja=ja.r;var na=ra.x,wa=ra.y,Ca=ra.r,Fa=ha.x,Xa=ha.y,ab=ha.r;ha=la-na;ra=la-Fa;var gb=ua-wa,bb=ua-Xa,La=Ca-ja,kb=ab-ja,mb=la*la+ua*ua-ja*ja;wa=mb-na*na-wa*wa+Ca*Ca;Xa=mb-Fa*Fa-Xa*Xa+ab*ab;Fa=ra*gb-ha*bb;na=(gb*Xa-bb*wa)/(2*Fa)-la;gb=(bb*La-gb*kb)/Fa;bb=(ra*wa-ha*Xa)/(2*Fa)-ua;ha=(ha*kb-ra*La)/Fa;ra=gb*gb+ha*ha-
1;La=2*(ja+na*gb+bb*ha);ja=na*na+bb*bb-ja*ja;ja=-(ra?(La+Math.sqrt(La*La-4*ra*ja))/(2*ra):ja/La);return{x:la+na+gb*ja,y:ua+bb+ha*ja,r:ja}}function z(ja,ra,ha){var la=ja.x-ra.x,ua=ja.y-ra.y,na=la*la+ua*ua;if(na){var wa=ra.r+ha.r;wa*=wa;var Ca=ja.r+ha.r;Ca*=Ca;if(wa>Ca){var Fa=(na+Ca-wa)/(2*na);wa=Math.sqrt(Math.max(0,Ca/na-Fa*Fa));ha.x=ja.x-Fa*la-wa*ua;ha.y=ja.y-Fa*ua+wa*la}else Fa=(na+wa-Ca)/(2*na),wa=Math.sqrt(Math.max(0,wa/na-Fa*Fa)),ha.x=ra.x+Fa*la-wa*ua,ha.y=ra.y+Fa*ua+wa*la}else ha.x=ra.x+ha.r,
ha.y=ra.y}function y(ja,ra){var ha=ja.r+ra.r-1E-6,la=ra.x-ja.x;ja=ra.y-ja.y;return 0<ha&&ha*ha>la*la+ja*ja}function B(ja){var ra=ja._,ha=ja.next._,la=ra.r+ha.r;ja=(ra.x*ha.r+ha.x*ra.r)/la;ra=(ra.y*ha.r+ha.y*ra.r)/la;return ja*ja+ra*ra}function C(ja){this._=ja;this.previous=this.next=null}function u(ja){if(!(ha=ja.length))return 0;var ra,ha;var la=ja[0];la.x=0;la.y=0;if(!(1<ha))return la.r;var ua=ja[1];la.x=-ua.r;ua.x=la.r;ua.y=0;if(!(2<ha))return la.r+ua.r;z(ua,la,ra=ja[2]);la=new C(la);ua=new C(ua);
ra=new C(ra);la.next=ra.previous=ua;ua.next=la.previous=ra;ra.next=ua.previous=la;var na=3;a:for(;na<ha;++na){z(la._,ua._,ra=ja[na]);ra=new C(ra);var wa=ua.next;var Ca=la.previous;var Fa=ua._.r;var Xa=la._.r;do if(Fa<=Xa){if(y(wa._,ra._)){ua=wa;la.next=ua;ua.previous=la;--na;continue a}Fa+=wa._.r;wa=wa.next}else{if(y(Ca._,ra._)){la=Ca;la.next=ua;ua.previous=la;--na;continue a}Xa+=Ca._.r;Ca=Ca.previous}while(wa!==Ca.next);ra.previous=la;ra.next=ua;la.next=ua.previous=ua=ra;for(wa=B(la);(ra=ra.next)!==
ua;)(Ca=B(ra))<wa&&(la=ra,wa=Ca);ua=la.next}la=[ua._];for(ra=ua;(ra=ra.next)!==ua;)la.push(ra._);ra=h(la);for(na=0;na<ha;++na)la=ja[na],la.x-=ra.x,la.y-=ra.y;return ra.r}function F(ja){if("function"!==typeof ja)throw Error();return ja}function H(){return 0}function J(ja){return function(){return ja}}function I(ja){return Math.sqrt(ja.value)}function M(ja){return function(ra){ra.children||(ra.r=Math.max(0,+ja(ra)||0))}}function E(ja,ra){return function(ha){if(la=ha.children){var la,ua,na=la.length,
wa=ja(ha)*ra||0;if(wa)for(ua=0;ua<na;++ua)la[ua].r+=wa;var Ca=u(la);if(wa)for(ua=0;ua<na;++ua)la[ua].r-=wa;ha.r=Ca+wa}}}function L(ja){return function(ra){var ha=ra.parent;ra.r*=ja;ha&&(ra.x=ha.x+ja*ra.x,ra.y=ha.y+ja*ra.y)}}function P(ja){ja.x0=Math.round(ja.x0);ja.y0=Math.round(ja.y0);ja.x1=Math.round(ja.x1);ja.y1=Math.round(ja.y1)}function N(ja,ra,ha,la,ua){var na=ja.children,wa=-1,Ca=na.length;for(la=ja.value&&(la-ra)/ja.value;++wa<Ca;)ja=na[wa],ja.y0=ha,ja.y1=ua,ja.x0=ra,ja.x1=ra+=ja.value*la}
function Q(ja){return ja.id}function O(ja){return ja.parentId}function T(ja,ra){return ja.parent===ra.parent?1:2}function V(ja){var ra=ja.children;return ra?ra[0]:ja.t}function Z(ja){var ra=ja.children;return ra?ra[ra.length-1]:ja.t}function aa(ja,ra){this._=ja;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=ra}function Y(ja){ja=new aa(ja,0);for(var ra,ha=[ja],la,ua,na;ra=ha.pop();)if(ua=ra._.children)for(ra.children=Array(la=ua.length),na=la-1;0<=
na;--na)ha.push(la=ra.children[na]=new aa(ua[na],na)),la.parent=ra;(ja.parent=new aa(null,0)).children=[ja];return ja}function ea(ja,ra,ha,la,ua){var na=ja.children,wa=-1,Ca=na.length;for(ua=ja.value&&(ua-ha)/ja.value;++wa<Ca;)ja=na[wa],ja.x0=ra,ja.x1=la,ja.y0=ha,ja.y1=ha+=ja.value*ua}function ca(ja,ra,ha,la,ua,na){for(var wa=[],Ca=ra.children,Fa,Xa,ab=Fa=0,gb=Ca.length,bb,La=ra.value,kb,mb,ya,Ia,Na,Ta;Fa<gb;){ra=ua-ha;bb=na-la;do kb=Ca[ab++].value;while(!kb&&ab<gb);mb=ya=kb;Ta=Math.max(bb/ra,ra/
bb)/(La*ja);Ia=kb*kb*Ta;for(Na=Math.max(ya/Ia,Ia/mb);ab<gb;++ab){kb+=Xa=Ca[ab].value;Xa<mb&&(mb=Xa);Xa>ya&&(ya=Xa);Ia=kb*kb*Ta;Ia=Math.max(ya/Ia,Ia/mb);if(Ia>Na){kb-=Xa;break}Na=Ia}wa.push(Fa={value:kb,dice:ra<bb,children:Ca.slice(Fa,ab)});Fa.dice?N(Fa,ha,la,ua,La?la+=bb*kb/La:na):ea(Fa,ha,la,La?ha+=ra*kb/La:ua,na);La-=kb;Fa=ab}return wa}g.prototype=l.prototype={constructor:g,count:function(){return this.eachAfter(f)},each:function(ja){var ra,ha=[this],la;do{var ua=ha.reverse();for(ha=[];ra=ua.pop();)if(ja(ra),
ra=ra.children){var na=0;for(la=ra.length;na<la;++na)ha.push(ra[na])}}while(ha.length);return this},eachAfter:function(ja){for(var ra,ha=[this],la=[],ua,na;ra=ha.pop();)if(la.push(ra),ra=ra.children)for(ua=0,na=ra.length;ua<na;++ua)ha.push(ra[ua]);for(;ra=la.pop();)ja(ra);return this},eachBefore:function(ja){for(var ra,ha=[this],la;ra=ha.pop();)if(ja(ra),ra=ra.children)for(la=ra.length-1;0<=la;--la)ha.push(ra[la]);return this},sum:function(ja){return this.eachAfter(function(ra){for(var ha=+ja(ra.data)||
0,la=ra.children,ua=la&&la.length;0<=--ua;)ha+=la[ua].value;ra.value=ha})},sort:function(ja){return this.eachBefore(function(ra){ra.children&&ra.children.sort(ja)})},path:function(ja){var ra=this;var ha=ra;var la=ja;if(ha!==la){var ua=ha.ancestors(),na=la.ancestors(),wa=null;ha=ua.pop();for(la=na.pop();ha===la;)wa=ha,ha=ua.pop(),la=na.pop();ha=wa}for(la=[ra];ra!==ha;)ra=ra.parent,la.push(ra);for(ra=la.length;ja!==ha;)la.splice(ra,0,ja),ja=ja.parent;return la},ancestors:function(){for(var ja=this,
ra=[ja];ja=ja.parent;)ra.push(ja);return ra},descendants:function(){var ja=[];this.each(function(ra){ja.push(ra)});return ja},leaves:function(){var ja=[];this.eachBefore(function(ra){ra.children||ja.push(ra)});return ja},links:function(){var ja=this,ra=[];ja.each(function(ha){ha!==ja&&ra.push({source:ha.parent,target:ha})});return ra},copy:function(){return l(this).eachBefore(c)}};var ba=Array.prototype.slice,ka={depth:-1},qa={};aa.prototype=Object.create(g.prototype);var pa=(1+Math.sqrt(5))/2,oa=
function ha(ra){function la(ua,na,wa,Ca,Fa){ca(ra,ua,na,wa,Ca,Fa)}la.ratio=function(ua){return ha(1<(ua=+ua)?ua:1)};return la}(pa);pa=function la(ha){function ua(na,wa,Ca,Fa,Xa){if((ab=na._squarify)&&ab.ratio===ha)for(var ab,gb,bb,La=-1,kb,mb=ab.length,ya=na.value;++La<mb;){na=ab[La];gb=na.children;bb=na.value=0;for(kb=gb.length;bb<kb;++bb)na.value+=gb[bb].value;na.dice?N(na,wa,Ca,Fa,Ca+=(Xa-Ca)*na.value/ya):ea(na,wa,Ca,wa+=(Fa-wa)*na.value/ya,Xa);ya-=na.value}else na._squarify=ab=ca(ha,na,wa,Ca,
Fa,Xa),ab.ratio=ha}ua.ratio=function(na){return la(1<(na=+na)?na:1)};return ua}(pa);r.cluster=function(){function ha(Ca){var Fa,Xa=0;Ca.eachAfter(function(kb){var mb=kb.children;if(mb){var ya=mb.reduce(p,0)/mb.length;kb.x=ya;kb.y=1+mb.reduce(k,0)}else kb.x=Fa?Xa+=la(kb,Fa):0,kb.y=0,Fa=kb});var ab=a(Ca),gb=e(Ca),bb=ab.x-la(ab,gb)/2,La=gb.x+la(gb,ab)/2;return Ca.eachAfter(wa?function(kb){kb.x=(kb.x-Ca.x)*ua;kb.y=(Ca.y-kb.y)*na}:function(kb){kb.x=(kb.x-bb)/(La-bb)*ua;kb.y=(1-(Ca.y?kb.y/Ca.y:1))*na})}
var la=n,ua=1,na=1,wa=!1;ha.separation=function(Ca){return arguments.length?(la=Ca,ha):la};ha.size=function(Ca){return arguments.length?(wa=!1,ua=+Ca[0],na=+Ca[1],ha):wa?null:[ua,na]};ha.nodeSize=function(Ca){return arguments.length?(wa=!0,ua=+Ca[0],na=+Ca[1],ha):wa?[ua,na]:null};return ha};r.hierarchy=l;r.pack=function(){function ha(Ca){Ca.x=ua/2;Ca.y=na/2;la?Ca.eachBefore(M(la)).eachAfter(E(wa,.5)).eachBefore(L(1)):Ca.eachBefore(M(I)).eachAfter(E(H,1)).eachAfter(E(wa,Ca.r/Math.min(ua,na))).eachBefore(L(Math.min(ua,
na)/(2*Ca.r)));return Ca}var la=null,ua=1,na=1,wa=H;ha.radius=function(Ca){return arguments.length?(la=null==Ca?null:F(Ca),ha):la};ha.size=function(Ca){return arguments.length?(ua=+Ca[0],na=+Ca[1],ha):[ua,na]};ha.padding=function(Ca){return arguments.length?(wa="function"===typeof Ca?Ca:J(+Ca),ha):wa};return ha};r.packEnclose=h;r.packSiblings=function(ha){u(ha);return ha};r.partition=function(){function ha(Fa){var Xa=Fa.height+1;Fa.x0=Fa.y0=wa;Fa.x1=ua;Fa.y1=na/Xa;Fa.eachBefore(la(na,Xa));Ca&&Fa.eachBefore(P);
return Fa}function la(Fa,Xa){return function(ab){ab.children&&N(ab,ab.x0,Fa*(ab.depth+1)/Xa,ab.x1,Fa*(ab.depth+2)/Xa);var gb=ab.x0,bb=ab.y0,La=ab.x1-wa,kb=ab.y1-wa;La<gb&&(gb=La=(gb+La)/2);kb<bb&&(bb=kb=(bb+kb)/2);ab.x0=gb;ab.y0=bb;ab.x1=La;ab.y1=kb}}var ua=1,na=1,wa=0,Ca=!1;ha.round=function(Fa){return arguments.length?(Ca=!!Fa,ha):Ca};ha.size=function(Fa){return arguments.length?(ua=+Fa[0],na=+Fa[1],ha):[ua,na]};ha.padding=function(Fa){return arguments.length?(wa=+Fa,ha):wa};return ha};r.stratify=
function(){function ha(na){var wa,Ca=na.length,Fa=Array(Ca),Xa,ab={};for(wa=0;wa<Ca;++wa){var gb=na[wa];var bb=Fa[wa]=new g(gb);null!=(Xa=la(gb,wa,na))&&(Xa+="")&&(gb="$"+(bb.id=Xa),ab[gb]=gb in ab?qa:bb)}for(wa=0;wa<Ca;++wa)if(bb=Fa[wa],Xa=ua(na[wa],wa,na),null!=Xa&&(Xa+="")){gb=ab["$"+Xa];if(!gb)throw Error("missing: "+Xa);if(gb===qa)throw Error("ambiguous: "+Xa);gb.children?gb.children.push(bb):gb.children=[bb];bb.parent=gb}else{if(La)throw Error("multiple roots");var La=bb}if(!La)throw Error("no root");
La.parent=ka;La.eachBefore(function(kb){kb.depth=kb.parent.depth+1;--Ca}).eachBefore(d);La.parent=null;if(0<Ca)throw Error("cycle");return La}var la=Q,ua=O;ha.id=function(na){return arguments.length?(la=F(na),ha):la};ha.parentId=function(na){return arguments.length?(ua=F(na),ha):ua};return ha};r.tree=function(){function ha(ab){var gb=Y(ab);gb.eachAfter(la);gb.parent.m=-gb.z;gb.eachBefore(ua);if(Xa)ab.eachBefore(na);else{var bb=ab,La=ab,kb=ab;ab.eachBefore(function(Na){Na.x<bb.x&&(bb=Na);Na.x>La.x&&
(La=Na);Na.depth>kb.depth&&(kb=Na)});gb=bb===La?1:wa(bb,La)/2;var mb=gb-bb.x,ya=Ca/(La.x+gb+mb),Ia=Fa/(kb.depth||1);ab.eachBefore(function(Na){Na.x=(Na.x+mb)*ya;Na.y=Na.depth*Ia})}return ab}function la(ab){var gb=ab.children,bb=ab.parent.children,La=ab.i?bb[ab.i-1]:null;if(gb){for(var kb=0,mb=0,ya=ab.children,Ia=ya.length,Na;0<=--Ia;)Na=ya[Ia],Na.z+=kb,Na.m+=kb,kb+=Na.s+(mb+=Na.c);gb=(gb[0].z+gb[gb.length-1].z)/2;La?(ab.z=La.z+wa(ab._,La._),ab.m=ab.z-gb):ab.z=gb}else La&&(ab.z=La.z+wa(ab._,La._));
gb=ab.parent;bb=ab.parent.A||bb[0];if(La){mb=kb=ab;ya=kb.parent.children[0];Ia=kb.m;Na=mb.m;for(var Ta=La.m,hb=ya.m,Ya;La=Z(La),kb=V(kb),La&&kb;){ya=V(ya);mb=Z(mb);mb.a=ab;Ya=La.z+Ta-kb.z-Ia+wa(La._,kb._);if(0<Ya){var Ga=La.a.parent===ab.parent?La.a:bb,Pa=ab,Va=Ya,va=Va/(Pa.i-Ga.i);Pa.c-=va;Pa.s+=Va;Ga.c+=va;Pa.z+=Va;Pa.m+=Va;Ia+=Ya;Na+=Ya}Ta+=La.m;Ia+=kb.m;hb+=ya.m;Na+=mb.m}La&&!Z(mb)&&(mb.t=La,mb.m+=Ta-Na);kb&&!V(ya)&&(ya.t=kb,ya.m+=Ia-hb,bb=ab)}gb.A=bb}function ua(ab){ab._.x=ab.z+ab.parent.m;ab.m+=
ab.parent.m}function na(ab){ab.x*=Ca;ab.y=ab.depth*Fa}var wa=T,Ca=1,Fa=1,Xa=null;ha.separation=function(ab){return arguments.length?(wa=ab,ha):wa};ha.size=function(ab){return arguments.length?(Xa=!1,Ca=+ab[0],Fa=+ab[1],ha):Xa?null:[Ca,Fa]};ha.nodeSize=function(ab){return arguments.length?(Xa=!0,Ca=+ab[0],Fa=+ab[1],ha):Xa?[Ca,Fa]:null};return ha};r.treemap=function(){function ha(kb){kb.x0=kb.y0=0;kb.x1=wa;kb.y1=Ca;kb.eachBefore(la);Fa=[0];na&&kb.eachBefore(P);return kb}function la(kb){var mb=Fa[kb.depth],
ya=kb.x0+mb,Ia=kb.y0+mb,Na=kb.x1-mb,Ta=kb.y1-mb;Na<ya&&(ya=Na=(ya+Na)/2);Ta<Ia&&(Ia=Ta=(Ia+Ta)/2);kb.x0=ya;kb.y0=Ia;kb.x1=Na;kb.y1=Ta;kb.children&&(mb=Fa[kb.depth+1]=Xa(kb)/2,ya+=La(kb)-mb,Ia+=ab(kb)-mb,Na-=gb(kb)-mb,Ta-=bb(kb)-mb,Na<ya&&(ya=Na=(ya+Na)/2),Ta<Ia&&(Ia=Ta=(Ia+Ta)/2),ua(kb,ya,Ia,Na,Ta))}var ua=oa,na=!1,wa=1,Ca=1,Fa=[0],Xa=H,ab=H,gb=H,bb=H,La=H;ha.round=function(kb){return arguments.length?(na=!!kb,ha):na};ha.size=function(kb){return arguments.length?(wa=+kb[0],Ca=+kb[1],ha):[wa,Ca]};
ha.tile=function(kb){return arguments.length?(ua=F(kb),ha):ua};ha.padding=function(kb){return arguments.length?ha.paddingInner(kb).paddingOuter(kb):ha.paddingInner()};ha.paddingInner=function(kb){return arguments.length?(Xa="function"===typeof kb?kb:J(+kb),ha):Xa};ha.paddingOuter=function(kb){return arguments.length?ha.paddingTop(kb).paddingRight(kb).paddingBottom(kb).paddingLeft(kb):ha.paddingTop()};ha.paddingTop=function(kb){return arguments.length?(ab="function"===typeof kb?kb:J(+kb),ha):ab};ha.paddingRight=
function(kb){return arguments.length?(gb="function"===typeof kb?kb:J(+kb),ha):gb};ha.paddingBottom=function(kb){return arguments.length?(bb="function"===typeof kb?kb:J(+kb),ha):bb};ha.paddingLeft=function(kb){return arguments.length?(La="function"===typeof kb?kb:J(+kb),ha):La};return ha};r.treemapBinary=function(ha,la,ua,na,wa){function Ca(La,kb,mb,ya,Ia,Na,Ta){if(La>=kb-1)La=Fa[La],La.x0=ya,La.y0=Ia,La.x1=Na,La.y1=Ta;else{for(var hb=bb[La],Ya=mb/2+hb,Ga=La+1,Pa=kb-1;Ga<Pa;){var Va=Ga+Pa>>>1;bb[Va]<
Ya?Ga=Va+1:Pa=Va}Ya-bb[Ga-1]<bb[Ga]-Ya&&La+1<Ga&&--Ga;hb=bb[Ga]-hb;Ya=mb-hb;Na-ya>Ta-Ia?(mb=(ya*Ya+Na*hb)/mb,Ca(La,Ga,hb,ya,Ia,mb,Ta),Ca(Ga,kb,Ya,mb,Ia,Na,Ta)):(mb=(Ia*Ya+Ta*hb)/mb,Ca(La,Ga,hb,ya,Ia,Na,mb),Ca(Ga,kb,Ya,ya,mb,Na,Ta))}}var Fa=ha.children,Xa,ab=Fa.length,gb,bb=Array(ab+1);for(bb[0]=gb=Xa=0;Xa<ab;++Xa)bb[Xa+1]=gb+=Fa[Xa].value;Ca(0,ab,ha.value,la,ua,na,wa)};r.treemapDice=N;r.treemapResquarify=pa;r.treemapSlice=ea;r.treemapSliceDice=function(ha,la,ua,na,wa){(ha.depth&1?ea:N)(ha,la,ua,na,
wa)};r.treemapSquarify=oa;Object.defineProperty(r,"__esModule",{value:!0})})},{}],162:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?n(G,b("d3-color")):(r=r||self,n(r.d3=r.d3||{},r.d3))})(this,function(r,n){function p(ha,la,ua,na,wa){var Ca=ha*ha,Fa=Ca*ha;return((1-3*ha+3*Ca-Fa)*la+(4-6*Ca+3*Fa)*ua+(1+3*ha+3*Ca-3*Fa)*na+Fa*wa)/6}function k(ha){var la=ha.length-1;return function(ua){var na=0>=ua?ua=0:1<=ua?(ua=1,la-1):Math.floor(ua*la),wa=ha[na],Ca=ha[na+1];return p((ua-
na/la)*la,0<na?ha[na-1]:2*wa-Ca,wa,Ca,na<la-1?ha[na+2]:2*Ca-wa)}}function a(ha){var la=ha.length;return function(ua){var na=Math.floor((0>(ua%=1)?++ua:ua)*la);return p((ua-na/la)*la,ha[(na+la-1)%la],ha[na%la],ha[(na+1)%la],ha[(na+2)%la])}}function e(ha){return function(){return ha}}function f(ha,la){return function(ua){return ha+ua*la}}function l(ha,la,ua){return ha=Math.pow(ha,ua),la=Math.pow(la,ua)-ha,ua=1/ua,function(na){return Math.pow(ha+na*la,ua)}}function m(ha,la){var ua=la-ha;return ua?f(ha,
180<ua||-180>ua?ua-360*Math.round(ua/360):ua):e(isNaN(ha)?la:ha)}function c(ha){return 1===(ha=+ha)?d:function(la,ua){return ua-la?l(la,ua,ha):e(isNaN(la)?ua:la)}}function d(ha,la){var ua=la-ha;return ua?f(ha,ua):e(isNaN(ha)?la:ha)}function g(ha){return function(la){var ua=la.length,na=Array(ua),wa=Array(ua),Ca=Array(ua),Fa;for(Fa=0;Fa<ua;++Fa){var Xa=n.rgb(la[Fa]);na[Fa]=Xa.r||0;wa[Fa]=Xa.g||0;Ca[Fa]=Xa.b||0}na=ha(na);wa=ha(wa);Ca=ha(Ca);Xa.opacity=1;return function(ab){Xa.r=na(ab);Xa.g=wa(ab);Xa.b=
Ca(ab);return Xa+""}}}function h(ha,la){la||(la=[]);var ua=ha?Math.min(la.length,ha.length):0,na=la.slice(),wa;return function(Ca){for(wa=0;wa<ua;++wa)na[wa]=ha[wa]*(1-Ca)+la[wa]*Ca;return na}}function q(ha){return ArrayBuffer.isView(ha)&&!(ha instanceof DataView)}function t(ha,la){var ua=la?la.length:0,na=ha?Math.min(ua,ha.length):0,wa=Array(na),Ca=Array(ua),Fa;for(Fa=0;Fa<na;++Fa)wa[Fa]=C(ha[Fa],la[Fa]);for(;Fa<ua;++Fa)Ca[Fa]=la[Fa];return function(Xa){for(Fa=0;Fa<na;++Fa)Ca[Fa]=wa[Fa](Xa);return Ca}}
function v(ha,la){var ua=new Date;return ha=+ha,la=+la,function(na){return ua.setTime(ha*(1-na)+la*na),ua}}function w(ha,la){return ha=+ha,la=+la,function(ua){return ha*(1-ua)+la*ua}}function A(ha,la){var ua={},na={},wa;if(null===ha||"object"!==typeof ha)ha={};if(null===la||"object"!==typeof la)la={};for(wa in la)wa in ha?ua[wa]=C(ha[wa],la[wa]):na[wa]=la[wa];return function(Ca){for(wa in ua)na[wa]=ua[wa](Ca);return na}}function z(ha){return function(){return ha}}function y(ha){return function(la){return ha(la)+
""}}function B(ha,la){var ua=N.lastIndex=Q.lastIndex=0,na,wa,Ca,Fa=-1,Xa=[],ab=[];ha+="";for(la+="";(na=N.exec(ha))&&(wa=Q.exec(la));)(Ca=wa.index)>ua&&(Ca=la.slice(ua,Ca),Xa[Fa]?Xa[Fa]+=Ca:Xa[++Fa]=Ca),(na=na[0])===(wa=wa[0])?Xa[Fa]?Xa[Fa]+=wa:Xa[++Fa]=wa:(Xa[++Fa]=null,ab.push({i:Fa,x:w(na,wa)})),ua=Q.lastIndex;ua<la.length&&(Ca=la.slice(ua),Xa[Fa]?Xa[Fa]+=Ca:Xa[++Fa]=Ca);return 2>Xa.length?ab[0]?y(ab[0].x):z(la):(la=ab.length,function(gb){for(var bb=0,La;bb<la;++bb)Xa[(La=ab[bb]).i]=La.x(gb);return Xa.join("")})}
function C(ha,la){var ua=typeof la,na;return null==la||"boolean"===ua?e(la):("number"===ua?w:"string"===ua?(na=n.color(la))?(la=na,E):B:la instanceof n.color?E:la instanceof Date?v:q(la)?h:Array.isArray(la)?t:"function"!==typeof la.valueOf&&"function"!==typeof la.toString||isNaN(la)?A:w)(ha,la)}function u(ha,la,ua,na,wa,Ca){var Fa,Xa,ab;if(Fa=Math.sqrt(ha*ha+la*la))ha/=Fa,la/=Fa;if(ab=ha*ua+la*na)ua-=ha*ab,na-=la*ab;if(Xa=Math.sqrt(ua*ua+na*na))ua/=Xa,na/=Xa,ab/=Xa;ha*na<la*ua&&(ha=-ha,la=-la,ab=
-ab,Fa=-Fa);return{translateX:wa,translateY:Ca,rotate:Math.atan2(la,ha)*O,skewX:Math.atan(ab)*O,scaleX:Fa,scaleY:Xa}}function F(ha,la,ua,na){function wa(gb){return gb.length?gb.pop()+" ":""}function Ca(gb,bb,La,kb,mb,ya){gb!==La||bb!==kb?(mb=mb.push("translate(",null,la,null,ua),ya.push({i:mb-4,x:w(gb,La)},{i:mb-2,x:w(bb,kb)})):(La||kb)&&mb.push("translate("+La+la+kb+ua)}function Fa(gb,bb,La,kb){gb!==bb?(180<gb-bb?bb+=360:180<bb-gb&&(gb+=360),kb.push({i:La.push(wa(La)+"rotate(",null,na)-2,x:w(gb,
bb)})):bb&&La.push(wa(La)+"rotate("+bb+na)}function Xa(gb,bb,La,kb){gb!==bb?kb.push({i:La.push(wa(La)+"skewX(",null,na)-2,x:w(gb,bb)}):bb&&La.push(wa(La)+"skewX("+bb+na)}function ab(gb,bb,La,kb,mb,ya){gb!==La||bb!==kb?(mb=mb.push(wa(mb)+"scale(",null,",",null,")"),ya.push({i:mb-4,x:w(gb,La)},{i:mb-2,x:w(bb,kb)})):1===La&&1===kb||mb.push(wa(mb)+"scale("+La+","+kb+")")}return function(gb,bb){var La=[],kb=[];gb=ha(gb);bb=ha(bb);Ca(gb.translateX,gb.translateY,bb.translateX,bb.translateY,La,kb);Fa(gb.rotate,
bb.rotate,La,kb);Xa(gb.skewX,bb.skewX,La,kb);ab(gb.scaleX,gb.scaleY,bb.scaleX,bb.scaleY,La,kb);gb=bb=null;return function(mb){for(var ya=-1,Ia=kb.length,Na;++ya<Ia;)La[(Na=kb[ya]).i]=Na.x(mb);return La.join("")}}}function H(ha){return((ha=Math.exp(ha))+1/ha)/2}function J(ha){return function(la,ua){var na=ha((la=n.hsl(la)).h,(ua=n.hsl(ua)).h),wa=d(la.s,ua.s),Ca=d(la.l,ua.l),Fa=d(la.opacity,ua.opacity);return function(Xa){la.h=na(Xa);la.s=wa(Xa);la.l=Ca(Xa);la.opacity=Fa(Xa);return la+""}}}function I(ha){return function(la,
ua){var na=ha((la=n.hcl(la)).h,(ua=n.hcl(ua)).h),wa=d(la.c,ua.c),Ca=d(la.l,ua.l),Fa=d(la.opacity,ua.opacity);return function(Xa){la.h=na(Xa);la.c=wa(Xa);la.l=Ca(Xa);la.opacity=Fa(Xa);return la+""}}}function M(ha){return function na(ua){function wa(Ca,Fa){var Xa=ha((Ca=n.cubehelix(Ca)).h,(Fa=n.cubehelix(Fa)).h),ab=d(Ca.s,Fa.s),gb=d(Ca.l,Fa.l),bb=d(Ca.opacity,Fa.opacity);return function(La){Ca.h=Xa(La);Ca.s=ab(La);Ca.l=gb(Math.pow(La,ua));Ca.opacity=bb(La);return Ca+""}}ua=+ua;wa.gamma=na;return wa}(1)}
var E=function ua(la){function na(Ca,Fa){var Xa=wa((Ca=n.rgb(Ca)).r,(Fa=n.rgb(Fa)).r),ab=wa(Ca.g,Fa.g),gb=wa(Ca.b,Fa.b),bb=d(Ca.opacity,Fa.opacity);return function(La){Ca.r=Xa(La);Ca.g=ab(La);Ca.b=gb(La);Ca.opacity=bb(La);return Ca+""}}var wa=c(la);na.gamma=ua;return na}(1),L=g(k),P=g(a),N=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Q=new RegExp(N.source,"g"),O=180/Math.PI,T={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},V,Z,aa,Y,ea=F(function(la){if("none"===la)return T;V||(V=document.createElement("DIV"),
Z=document.documentElement,aa=document.defaultView);V.style.transform=la;la=aa.getComputedStyle(Z.appendChild(V),null).getPropertyValue("transform");Z.removeChild(V);la=la.slice(7,-1).split(",");return u(+la[0],+la[1],+la[2],+la[3],+la[4],+la[5])},"px, ","px)","deg)"),ca=F(function(la){if(null==la)return T;Y||(Y=document.createElementNS("http://www.w3.org/2000/svg","g"));Y.setAttribute("transform",la);if(!(la=Y.transform.baseVal.consolidate()))return T;la=la.matrix;return u(la.a,la.b,la.c,la.d,la.e,
la.f)},", ",")",")"),ba=Math.SQRT2,ka=J(m),qa=J(d),pa=I(m),oa=I(d),ja=M(m),ra=M(d);r.interpolate=C;r.interpolateArray=function(la,ua){return(q(ua)?h:t)(la,ua)};r.interpolateBasis=k;r.interpolateBasisClosed=a;r.interpolateCubehelix=ja;r.interpolateCubehelixLong=ra;r.interpolateDate=v;r.interpolateDiscrete=function(la){var ua=la.length;return function(na){return la[Math.max(0,Math.min(ua-1,Math.floor(na*ua)))]}};r.interpolateHcl=pa;r.interpolateHclLong=oa;r.interpolateHsl=ka;r.interpolateHslLong=qa;
r.interpolateHue=function(la,ua){var na=m(+la,+ua);return function(wa){wa=na(wa);return wa-360*Math.floor(wa/360)}};r.interpolateLab=function(la,ua){var na=d((la=n.lab(la)).l,(ua=n.lab(ua)).l),wa=d(la.a,ua.a),Ca=d(la.b,ua.b),Fa=d(la.opacity,ua.opacity);return function(Xa){la.l=na(Xa);la.a=wa(Xa);la.b=Ca(Xa);la.opacity=Fa(Xa);return la+""}};r.interpolateNumber=w;r.interpolateNumberArray=h;r.interpolateObject=A;r.interpolateRgb=E;r.interpolateRgbBasis=L;r.interpolateRgbBasisClosed=P;r.interpolateRound=
function(la,ua){return la=+la,ua=+ua,function(na){return Math.round(la*(1-na)+ua*na)}};r.interpolateString=B;r.interpolateTransformCss=ea;r.interpolateTransformSvg=ca;r.interpolateZoom=function(la,ua){var na=la[0],wa=la[1],Ca=la[2];la=ua[2];var Fa=ua[0]-na,Xa=ua[1]-wa,ab=Fa*Fa+Xa*Xa;if(1E-12>ab){var gb=Math.log(la/Ca)/ba;la=function(kb){return[na+kb*Fa,wa+kb*Xa,Ca*Math.exp(ba*kb*gb)]}}else{var bb=Math.sqrt(ab);ua=(la*la-Ca*Ca+4*ab)/(4*Ca*bb);la=(la*la-Ca*Ca-4*ab)/(4*la*bb);var La=Math.log(Math.sqrt(ua*
ua+1)-ua);gb=(Math.log(Math.sqrt(la*la+1)-la)-La)/ba;la=function(kb){kb*=gb;var mb=H(La),ya=ba*kb+La;var Ia=((ya=Math.exp(2*ya))-1)/(ya+1);var Na=La;ya=((Na=Math.exp(Na))-1/Na)/2;Ia=Ca/(2*bb)*(mb*Ia-ya);return[na+Ia*Fa,wa+Ia*Xa,Ca*mb/H(ba*kb+La)]}}la.duration=1E3*gb;return la};r.piecewise=function(la,ua){for(var na=0,wa=ua.length-1,Ca=ua[0],Fa=Array(0>wa?0:wa);na<wa;)Fa[na]=la(Ca,Ca=ua[++na]);return function(Xa){var ab=Math.max(0,Math.min(wa-1,Math.floor(Xa*=wa)));return Fa[ab](Xa-ab)}};r.quantize=
function(la,ua){for(var na=Array(ua),wa=0;wa<ua;++wa)na[wa]=la(wa/(ua-1));return na};Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-color":158}],163:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?n(G):(r=r||self,n(r.d3=r.d3||{}))})(this,function(r){function n(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function p(){return new n}var k=Math.PI,a=2*k,e=a-1E-6;n.prototype=p.prototype={constructor:n,moveTo:function(f,l){this._+="M"+(this._x0=this._x1=+f)+
","+(this._y0=this._y1=+l)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(f,l){this._+="L"+(this._x1=+f)+","+(this._y1=+l)},quadraticCurveTo:function(f,l,m,c){this._+="Q"+ +f+","+ +l+","+(this._x1=+m)+","+(this._y1=+c)},bezierCurveTo:function(f,l,m,c,d,g){this._+="C"+ +f+","+ +l+","+ +m+","+ +c+","+(this._x1=+d)+","+(this._y1=+g)},arcTo:function(f,l,m,c,d){f=+f;l=+l;m=+m;c=+c;d=+d;var g=this._x1,h=this._y1,q=m-f,t=c-l,v=g-f,w=h-l,A=v*v+w*
w;if(0>d)throw Error("negative radius: "+d);if(null===this._x1)this._+="M"+(this._x1=f)+","+(this._y1=l);else if(1E-6<A)if(1E-6<Math.abs(w*q-t*v)&&d){m-=g;c-=h;var z=q*q+t*t;h=Math.sqrt(z);g=Math.sqrt(A);A=d*Math.tan((k-Math.acos((z+A-(m*m+c*c))/(2*h*g)))/2);g=A/g;A/=h;1E-6<Math.abs(g-1)&&(this._+="L"+(f+g*v)+","+(l+g*w));this._+="A"+d+","+d+",0,0,"+ +(w*m>v*c)+","+(this._x1=f+A*q)+","+(this._y1=l+A*t)}else this._+="L"+(this._x1=f)+","+(this._y1=l)},arc:function(f,l,m,c,d,g){f=+f;l=+l;m=+m;g=!!g;
var h=m*Math.cos(c),q=m*Math.sin(c),t=f+h,v=l+q,w=1^g;c=g?c-d:d-c;if(0>m)throw Error("negative radius: "+m);if(null===this._x1)this._+="M"+t+","+v;else if(1E-6<Math.abs(this._x1-t)||1E-6<Math.abs(this._y1-v))this._+="L"+t+","+v;m&&(0>c&&(c=c%a+a),c>e?this._+="A"+m+","+m+",0,1,"+w+","+(f-h)+","+(l-q)+"A"+m+","+m+",0,1,"+w+","+(this._x1=t)+","+(this._y1=v):1E-6<c&&(this._+="A"+m+","+m+",0,"+ +(c>=k)+","+w+","+(this._x1=f+m*Math.cos(d))+","+(this._y1=l+m*Math.sin(d))))},rect:function(f,l,m,c){this._+=
"M"+(this._x0=this._x1=+f)+","+(this._y0=this._y1=+l)+"h"+ +m+"v"+ +c+"h"+-m+"Z"},toString:function(){return this._}};r.path=p;Object.defineProperty(r,"__esModule",{value:!0})})},{}],164:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?n(G):(r=r||self,n(r.d3=r.d3||{}))})(this,function(r){function n(c,d,g,h){if(isNaN(d)||isNaN(g))return c;var q,t=c._root;h={data:h};var v=c._x0,w=c._y0,A=c._x1,z=c._y1,y,B,C,u;if(!t)return c._root=h,c;for(;t.length;)if((C=d>=(y=(v+A)/2))?v=
y:A=y,(u=g>=(B=(w+z)/2))?w=B:z=B,q=t,!(t=t[C|=u<<1]))return q[C]=h,c;var F=+c._x.call(null,t.data);var H=+c._y.call(null,t.data);if(d===F&&g===H)return h.next=t,q?q[C]=h:c._root=h,c;do q=q?q[C]=Array(4):c._root=Array(4),(C=d>=(y=(v+A)/2))?v=y:A=y,(u=g>=(B=(w+z)/2))?w=B:z=B;while((C|=u<<1)===(u=(H>=B)<<1|F>=y));return q[u]=t,q[C]=h,c}function p(c,d,g,h,q){this.node=c;this.x0=d;this.y0=g;this.x1=h;this.y1=q}function k(c){return c[0]}function a(c){return c[1]}function e(c,d,g){d=new f(null==d?k:d,null==
g?a:g,NaN,NaN,NaN,NaN);return null==c?d:d.addAll(c)}function f(c,d,g,h,q,t){this._x=c;this._y=d;this._x0=g;this._y0=h;this._x1=q;this._y1=t;this._root=void 0}function l(c){for(var d={data:c.data},g=d;c=c.next;)g=g.next={data:c.data};return d}var m=e.prototype=f.prototype;m.copy=function(){var c=new f(this._x,this._y,this._x0,this._y0,this._x1,this._y1),d=this._root,g,h;if(!d)return c;if(!d.length)return c._root=l(d),c;for(g=[{source:d,target:c._root=Array(4)}];d=g.pop();)for(var q=0;4>q;++q)if(h=
d.source[q])h.length?g.push({source:h,target:d.target[q]=Array(4)}):d.target[q]=l(h);return c};m.add=function(c){var d=+this._x.call(null,c),g=+this._y.call(null,c);return n(this.cover(d,g),d,g,c)};m.addAll=function(c){var d,g,h=c.length,q,t,v=Array(h),w=Array(h),A=Infinity,z=Infinity,y=-Infinity,B=-Infinity;for(g=0;g<h;++g)isNaN(q=+this._x.call(null,d=c[g]))||isNaN(t=+this._y.call(null,d))||(v[g]=q,w[g]=t,q<A&&(A=q),q>y&&(y=q),t<z&&(z=t),t>B&&(B=t));if(A>y||z>B)return this;this.cover(A,z).cover(y,
B);for(g=0;g<h;++g)n(this,v[g],w[g],c[g]);return this};m.cover=function(c,d){if(isNaN(c=+c)||isNaN(d=+d))return this;var g=this._x0,h=this._y0,q=this._x1,t=this._y1;if(isNaN(g))q=(g=Math.floor(c))+1,t=(h=Math.floor(d))+1;else{for(var v=q-g,w=this._root,A,z;g>c||c>=q||h>d||d>=t;)switch(z=(d<h)<<1|c<g,A=Array(4),A[z]=w,w=A,v*=2,z){case 0:q=g+v;t=h+v;break;case 1:g=q-v;t=h+v;break;case 2:q=g+v;h=t-v;break;case 3:g=q-v,h=t-v}this._root&&this._root.length&&(this._root=w)}this._x0=g;this._y0=h;this._x1=
q;this._y1=t;return this};m.data=function(){var c=[];this.visit(function(d){if(!d.length){do c.push(d.data);while(d=d.next)}});return c};m.extent=function(c){return arguments.length?this.cover(+c[0][0],+c[0][1]).cover(+c[1][0],+c[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};m.find=function(c,d,g){var h=this._x0,q=this._y0,t,v,w,A,z=this._x1,y=this._y1,B=[],C=this._root,u;C&&B.push(new p(C,h,q,z,y));null==g?g=Infinity:(h=c-g,q=d-g,z=c+g,y=d+g,g*=g);for(;u=B.pop();)if(!(!(C=
u.node)||(t=u.x0)>z||(v=u.y0)>y||(w=u.x1)<h||(A=u.y1)<q))if(C.length){u=(t+w)/2;var F=(v+A)/2;B.push(new p(C[3],u,F,w,A),new p(C[2],t,F,u,A),new p(C[1],u,v,w,F),new p(C[0],t,v,u,F));if(C=(d>=F)<<1|c>=u)u=B[B.length-1],B[B.length-1]=B[B.length-1-C],B[B.length-1-C]=u}else if(u=c-+this._x.call(null,C.data),F=d-+this._y.call(null,C.data),u=u*u+F*F,u<g){var H=Math.sqrt(g=u);h=c-H;q=d-H;z=c+H;y=d+H;H=C.data}return H};m.remove=function(c){if(isNaN(A=+this._x.call(null,c))||isNaN(z=+this._y.call(null,c)))return this;
var d,g=this._root,h,q=this._x0,t=this._y0,v=this._x1,w=this._y1,A,z,y,B,C,u;if(!g)return this;if(g.length)for(;;){(C=A>=(y=(q+v)/2))?q=y:v=y;(u=z>=(B=(t+w)/2))?t=B:w=B;if(!(d=g,g=g[C|=u<<1]))return this;if(!g.length)break;if(d[C+1&3]||d[C+2&3]||d[C+3&3]){var F=d;var H=C}}for(;g.data!==c;)if(!(h=g,g=g.next))return this;(c=g.next)&&delete g.next;if(h)return c?h.next=c:delete h.next,this;if(!d)return this._root=c,this;c?d[C]=c:delete d[C];(g=d[0]||d[1]||d[2]||d[3])&&g===(d[3]||d[2]||d[1]||d[0])&&!g.length&&
(F?F[H]=g:this._root=g);return this};m.removeAll=function(c){for(var d=0,g=c.length;d<g;++d)this.remove(c[d]);return this};m.root=function(){return this._root};m.size=function(){var c=0;this.visit(function(d){if(!d.length){do++c;while(d=d.next)}});return c};m.visit=function(c){var d=[],g,h=this._root,q,t,v,w;for(h&&d.push(new p(h,this._x0,this._y0,this._x1,this._y1));g=d.pop();)if(!c(h=g.node,t=g.x0,v=g.y0,w=g.x1,g=g.y1)&&h.length){var A=(t+w)/2,z=(v+g)/2;(q=h[3])&&d.push(new p(q,A,z,w,g));(q=h[2])&&
d.push(new p(q,t,z,A,g));(q=h[1])&&d.push(new p(q,A,v,w,z));(q=h[0])&&d.push(new p(q,t,v,A,z))}return this};m.visitAfter=function(c){var d=[],g=[],h;for(this._root&&d.push(new p(this._root,this._x0,this._y0,this._x1,this._y1));h=d.pop();){var q=h.node;if(q.length){var t,v=h.x0,w=h.y0,A=h.x1,z=h.y1,y=(v+A)/2,B=(w+z)/2;(t=q[0])&&d.push(new p(t,v,w,y,B));(t=q[1])&&d.push(new p(t,y,w,A,B));(t=q[2])&&d.push(new p(t,v,B,y,z));(t=q[3])&&d.push(new p(t,y,B,A,z))}g.push(h)}for(;h=g.pop();)c(h.node,h.x0,h.y0,
h.x1,h.y1);return this};m.x=function(c){return arguments.length?(this._x=c,this):this._x};m.y=function(c){return arguments.length?(this._y=c,this):this._y};r.quadtree=e;Object.defineProperty(r,"__esModule",{value:!0})})},{}],165:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?n(G,b("d3-path")):(r=r||self,n(r.d3=r.d3||{},r.d3))})(this,function(r,n){function p(ob){return function(){return ob}}function k(ob){return 1<=ob?Pa:-1>=ob?-Pa:Math.asin(ob)}function a(ob){return ob.innerRadius}
function e(ob){return ob.outerRadius}function f(ob){return ob.startAngle}function l(ob){return ob.endAngle}function m(ob){return ob&&ob.padAngle}function c(ob,tb,$b,lc,yc,Rb,Ub){var zb=ob-$b,qb=tb-lc;Ub=(Ub?Rb:-Rb)/Ya(zb*zb+qb*qb);qb*=Ub;zb*=-Ub;var vb=ob+qb,Db=tb+zb,Qb=$b+qb,wc=lc+zb;$b=(vb+Qb)/2;lc=(Db+wc)/2;tb=Qb-vb;ob=wc-Db;Ub=tb*tb+ob*ob;Rb=yc-Rb;wc=vb*wc-Qb*Db;var dc=(0>ob?-1:1)*Ya(Na(0,Rb*Rb*Ub-wc*wc));vb=(wc*ob-tb*dc)/Ub;Db=(-wc*tb-ob*dc)/Ub;Qb=(wc*ob+tb*dc)/Ub;tb=(-wc*tb+ob*dc)/Ub;ob=vb-
$b;Ub=Db-lc;$b=Qb-$b;lc=tb-lc;ob*ob+Ub*Ub>$b*$b+lc*lc&&(vb=Qb,Db=tb);return{cx:vb,cy:Db,x01:-qb,y01:-zb,x11:vb*(yc/Rb-1),y11:Db*(yc/Rb-1)}}function d(ob){this._context=ob}function g(ob){return new d(ob)}function h(ob){return ob[0]}function q(ob){return ob[1]}function t(){function ob(zb){var qb,vb=zb.length,Db,Qb=!1,wc;null==yc&&(Ub=Rb(wc=n.path()));for(qb=0;qb<=vb;++qb)!(qb<vb&&lc(Db=zb[qb],qb,zb))===Qb&&((Qb=!Qb)?Ub.lineStart():Ub.lineEnd()),Qb&&Ub.point(+tb(Db,qb,zb),+$b(Db,qb,zb));if(wc)return Ub=
null,wc+""||null}var tb=h,$b=q,lc=p(!0),yc=null,Rb=g,Ub=null;ob.x=function(zb){return arguments.length?(tb="function"===typeof zb?zb:p(+zb),ob):tb};ob.y=function(zb){return arguments.length?($b="function"===typeof zb?zb:p(+zb),ob):$b};ob.defined=function(zb){return arguments.length?(lc="function"===typeof zb?zb:p(!!zb),ob):lc};ob.curve=function(zb){return arguments.length?(Rb=zb,null!=yc&&(Ub=Rb(yc)),ob):Rb};ob.context=function(zb){return arguments.length?(null==zb?yc=Ub=null:Ub=Rb(yc=zb),ob):yc};
return ob}function v(){function ob(Db){var Qb,wc,dc=Db.length,xc,Nc=!1,Lc,$c=Array(dc),od=Array(dc);null==zb&&(vb=qb(Lc=n.path()));for(Qb=0;Qb<=dc;++Qb){if(!(Qb<dc&&Ub(xc=Db[Qb],Qb,Db))===Nc)if(Nc=!Nc){var Zc=Qb;vb.areaStart();vb.lineStart()}else{vb.lineEnd();vb.lineStart();for(wc=Qb-1;wc>=Zc;--wc)vb.point($c[wc],od[wc]);vb.lineEnd();vb.areaEnd()}Nc&&($c[Qb]=+$b(xc,Qb,Db),od[Qb]=+yc(xc,Qb,Db),vb.point(lc?+lc(xc,Qb,Db):$c[Qb],Rb?+Rb(xc,Qb,Db):od[Qb]))}if(Lc)return vb=null,Lc+""||null}function tb(){return t().defined(Ub).curve(qb).context(zb)}
var $b=h,lc=null,yc=p(0),Rb=q,Ub=p(!0),zb=null,qb=g,vb=null;ob.x=function(Db){return arguments.length?($b="function"===typeof Db?Db:p(+Db),lc=null,ob):$b};ob.x0=function(Db){return arguments.length?($b="function"===typeof Db?Db:p(+Db),ob):$b};ob.x1=function(Db){return arguments.length?(lc=null==Db?null:"function"===typeof Db?Db:p(+Db),ob):lc};ob.y=function(Db){return arguments.length?(yc="function"===typeof Db?Db:p(+Db),Rb=null,ob):yc};ob.y0=function(Db){return arguments.length?(yc="function"===typeof Db?
Db:p(+Db),ob):yc};ob.y1=function(Db){return arguments.length?(Rb=null==Db?null:"function"===typeof Db?Db:p(+Db),ob):Rb};ob.lineX0=ob.lineY0=function(){return tb().x($b).y(yc)};ob.lineY1=function(){return tb().x($b).y(Rb)};ob.lineX1=function(){return tb().x(lc).y(yc)};ob.defined=function(Db){return arguments.length?(Ub="function"===typeof Db?Db:p(!!Db),ob):Ub};ob.curve=function(Db){return arguments.length?(qb=Db,null!=zb&&(vb=qb(zb)),ob):qb};ob.context=function(Db){return arguments.length?(null==Db?
zb=vb=null:vb=qb(zb=Db),ob):zb};return ob}function w(ob,tb){return tb<ob?-1:tb>ob?1:tb>=ob?0:NaN}function A(ob){return ob}function z(ob){this._curve=ob}function y(ob){function tb($b){return new z(ob($b))}tb._curve=ob;return tb}function B(ob){var tb=ob.curve;ob.angle=ob.x;delete ob.x;ob.radius=ob.y;delete ob.y;ob.curve=function($b){return arguments.length?tb(y($b)):tb()._curve};return ob}function C(){return B(t().curve(va))}function u(){var ob=v().curve(va),tb=ob.curve,$b=ob.lineX0,lc=ob.lineX1,yc=
ob.lineY0,Rb=ob.lineY1;ob.angle=ob.x;delete ob.x;ob.startAngle=ob.x0;delete ob.x0;ob.endAngle=ob.x1;delete ob.x1;ob.radius=ob.y;delete ob.y;ob.innerRadius=ob.y0;delete ob.y0;ob.outerRadius=ob.y1;delete ob.y1;ob.lineStartAngle=function(){return B($b())};delete ob.lineX0;ob.lineEndAngle=function(){return B(lc())};delete ob.lineX1;ob.lineInnerRadius=function(){return B(yc())};delete ob.lineY0;ob.lineOuterRadius=function(){return B(Rb())};delete ob.lineY1;ob.curve=function(Ub){return arguments.length?
tb(y(Ub)):tb()._curve};return ob}function F(ob,tb){return[(tb=+tb)*Math.cos(ob-=Math.PI/2),tb*Math.sin(ob)]}function H(ob){return ob.source}function J(ob){return ob.target}function I(ob){function tb(){var zb,qb=Ea.call(arguments),vb=$b.apply(this,qb),Db=lc.apply(this,qb);Ub||(Ub=zb=n.path());ob(Ub,+yc.apply(this,(qb[0]=vb,qb)),+Rb.apply(this,qb),+yc.apply(this,(qb[0]=Db,qb)),+Rb.apply(this,qb));if(zb)return Ub=null,zb+""||null}var $b=H,lc=J,yc=h,Rb=q,Ub=null;tb.source=function(zb){return arguments.length?
($b=zb,tb):$b};tb.target=function(zb){return arguments.length?(lc=zb,tb):lc};tb.x=function(zb){return arguments.length?(yc="function"===typeof zb?zb:p(+zb),tb):yc};tb.y=function(zb){return arguments.length?(Rb="function"===typeof zb?zb:p(+zb),tb):Rb};tb.context=function(zb){return arguments.length?(Ub=null==zb?null:zb,tb):Ub};return tb}function M(ob,tb,$b,lc,yc){ob.moveTo(tb,$b);ob.bezierCurveTo(tb=(tb+lc)/2,$b,tb,yc,lc,yc)}function E(ob,tb,$b,lc,yc){ob.moveTo(tb,$b);ob.bezierCurveTo(tb,$b=($b+yc)/
2,lc,$b,lc,yc)}function L(ob,tb,$b,lc,yc){var Rb=F(tb,$b);tb=F(tb,$b=($b+yc)/2);$b=F(lc,$b);lc=F(lc,yc);ob.moveTo(Rb[0],Rb[1]);ob.bezierCurveTo(tb[0],tb[1],$b[0],$b[1],lc[0],lc[1])}function P(){}function N(ob,tb,$b){ob._context.bezierCurveTo((2*ob._x0+ob._x1)/3,(2*ob._y0+ob._y1)/3,(ob._x0+2*ob._x1)/3,(ob._y0+2*ob._y1)/3,(ob._x0+4*ob._x1+tb)/6,(ob._y0+4*ob._y1+$b)/6)}function Q(ob){this._context=ob}function O(ob){this._context=ob}function T(ob){this._context=ob}function V(ob,tb){this._basis=new Q(ob);
this._beta=tb}function Z(ob,tb,$b){ob._context.bezierCurveTo(ob._x1+ob._k*(ob._x2-ob._x0),ob._y1+ob._k*(ob._y2-ob._y0),ob._x2+ob._k*(ob._x1-tb),ob._y2+ob._k*(ob._y1-$b),ob._x2,ob._y2)}function aa(ob,tb){this._context=ob;this._k=(1-tb)/6}function Y(ob,tb){this._context=ob;this._k=(1-tb)/6}function ea(ob,tb){this._context=ob;this._k=(1-tb)/6}function ca(ob,tb,$b){var lc=ob._x1,yc=ob._y1,Rb=ob._x2,Ub=ob._y2;if(1E-12<ob._l01_a){var zb=2*ob._l01_2a+3*ob._l01_a*ob._l12_a+ob._l12_2a,qb=3*ob._l01_a*(ob._l01_a+
ob._l12_a);lc=(lc*zb-ob._x0*ob._l12_2a+ob._x2*ob._l01_2a)/qb;yc=(yc*zb-ob._y0*ob._l12_2a+ob._y2*ob._l01_2a)/qb}1E-12<ob._l23_a&&(zb=2*ob._l23_2a+3*ob._l23_a*ob._l12_a+ob._l12_2a,qb=3*ob._l23_a*(ob._l23_a+ob._l12_a),Rb=(Rb*zb+ob._x1*ob._l23_2a-tb*ob._l12_2a)/qb,Ub=(Ub*zb+ob._y1*ob._l23_2a-$b*ob._l12_2a)/qb);ob._context.bezierCurveTo(lc,yc,Rb,Ub,ob._x2,ob._y2)}function ba(ob,tb){this._context=ob;this._alpha=tb}function ka(ob,tb){this._context=ob;this._alpha=tb}function qa(ob,tb){this._context=ob;this._alpha=
tb}function pa(ob){this._context=ob}function oa(ob,tb,$b){var lc=ob._x1-ob._x0;tb-=ob._x1;var yc=(ob._y1-ob._y0)/(lc||0>tb&&-0);ob=($b-ob._y1)/(tb||0>lc&&-0);return((0>yc?-1:1)+(0>ob?-1:1))*Math.min(Math.abs(yc),Math.abs(ob),.5*Math.abs((yc*tb+ob*lc)/(lc+tb)))||0}function ja(ob,tb){var $b=ob._x1-ob._x0;return $b?(3*(ob._y1-ob._y0)/$b-tb)/2:tb}function ra(ob,tb,$b){var lc=ob._x0,yc=ob._x1,Rb=ob._y1,Ub=(yc-lc)/3;ob._context.bezierCurveTo(lc+Ub,ob._y0+Ub*tb,yc-Ub,Rb-Ub*$b,yc,Rb)}function ha(ob){this._context=
ob}function la(ob){this._context=new ua(ob)}function ua(ob){this._context=ob}function na(ob){this._context=ob}function wa(ob){var tb,$b=ob.length-1,lc=Array($b),yc=Array($b),Rb=Array($b);lc[0]=0;yc[0]=2;Rb[0]=ob[0]+2*ob[1];for(tb=1;tb<$b-1;++tb)lc[tb]=1,yc[tb]=4,Rb[tb]=4*ob[tb]+2*ob[tb+1];lc[$b-1]=2;yc[$b-1]=7;Rb[$b-1]=8*ob[$b-1]+ob[$b];for(tb=1;tb<$b;++tb){var Ub=lc[tb]/yc[tb-1];yc[tb]-=Ub;Rb[tb]-=Ub*Rb[tb-1]}lc[$b-1]=Rb[$b-1]/yc[$b-1];for(tb=$b-2;0<=tb;--tb)lc[tb]=(Rb[tb]-lc[tb+1])/yc[tb];yc[$b-
1]=(ob[$b]+lc[$b-1])/2;for(tb=0;tb<$b-1;++tb)yc[tb]=2*ob[tb+1]-lc[tb+1];return[lc,yc]}function Ca(ob,tb){this._context=ob;this._t=tb}function Fa(ob,tb){if(1<(Ub=ob.length))for(var $b=1,lc,yc,Rb=ob[tb[0]],Ub,zb=Rb.length;$b<Ub;++$b)for(yc=Rb,Rb=ob[tb[$b]],lc=0;lc<zb;++lc)Rb[lc][1]+=Rb[lc][0]=isNaN(yc[lc][1])?yc[lc][0]:yc[lc][1]}function Xa(ob){ob=ob.length;for(var tb=Array(ob);0<=--ob;)tb[ob]=ob;return tb}function ab(ob,tb){return ob[tb]}function gb(ob){var tb=ob.map(bb);return Xa(ob).sort(function($b,
lc){return tb[$b]-tb[lc]})}function bb(ob){for(var tb=-1,$b=0,lc=ob.length,yc,Rb=-Infinity;++tb<lc;)(yc=+ob[tb][1])>Rb&&(Rb=yc,$b=tb);return $b}function La(ob){var tb=ob.map(kb);return Xa(ob).sort(function($b,lc){return tb[$b]-tb[lc]})}function kb(ob){for(var tb=0,$b=-1,lc=ob.length,yc;++$b<lc;)if(yc=+ob[$b][1])tb+=yc;return tb}var mb=Math.abs,ya=Math.atan2,Ia=Math.cos,Na=Math.max,Ta=Math.min,hb=Math.sin,Ya=Math.sqrt,Ga=Math.PI,Pa=Ga/2,Va=2*Ga;d.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=
NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(ob,tb){ob=+ob;tb=+tb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(ob,tb):this._context.moveTo(ob,tb);break;case 1:this._point=2;default:this._context.lineTo(ob,tb)}}};var va=y(g);z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},
lineEnd:function(){this._curve.lineEnd()},point:function(ob,tb){this._curve.point(tb*Math.sin(ob),tb*-Math.cos(ob))}};var Ea=Array.prototype.slice,Qa={draw:function(ob,tb){tb=Math.sqrt(tb/Ga);ob.moveTo(tb,0);ob.arc(0,0,tb,0,Va)}},$a={draw:function(ob,tb){tb=Math.sqrt(tb/5)/2;ob.moveTo(-3*tb,-tb);ob.lineTo(-tb,-tb);ob.lineTo(-tb,-3*tb);ob.lineTo(tb,-3*tb);ob.lineTo(tb,-tb);ob.lineTo(3*tb,-tb);ob.lineTo(3*tb,tb);ob.lineTo(tb,tb);ob.lineTo(tb,3*tb);ob.lineTo(-tb,3*tb);ob.lineTo(-tb,tb);ob.lineTo(-3*
tb,tb);ob.closePath()}},eb=Math.sqrt(1/3),pb=2*eb,Za={draw:function(ob,tb){tb=Math.sqrt(tb/pb);var $b=tb*eb;ob.moveTo(0,-tb);ob.lineTo($b,0);ob.lineTo(0,tb);ob.lineTo(-$b,0);ob.closePath()}},nb=Math.sin(Ga/10)/Math.sin(7*Ga/10),sb=Math.sin(Va/10)*nb,Cb=-Math.cos(Va/10)*nb;nb={draw:function(ob,tb){tb=Math.sqrt(.8908130915292852*tb);var $b=sb*tb,lc=Cb*tb;ob.moveTo(0,-tb);ob.lineTo($b,lc);for(var yc=1;5>yc;++yc){var Rb=Va*yc/5,Ub=Math.cos(Rb);Rb=Math.sin(Rb);ob.lineTo(Rb*tb,-Ub*tb);ob.lineTo(Ub*$b-Rb*
lc,Rb*$b+Ub*lc)}ob.closePath()}};var Ib={draw:function(ob,tb){tb=Math.sqrt(tb);var $b=-tb/2;ob.rect($b,$b,tb,tb)}},fc=Math.sqrt(3),qc={draw:function(ob,tb){tb=-Math.sqrt(tb/(3*fc));ob.moveTo(0,2*tb);ob.lineTo(-fc*tb,-tb);ob.lineTo(fc*tb,-tb);ob.closePath()}},Cc=Math.sqrt(3)/2,cd=1/Math.sqrt(12),Qc=3*(cd/2+1),Wc={draw:function(ob,tb){var $b=Math.sqrt(tb/Qc);tb=$b/2;var lc=$b*cd;$b=$b*cd+$b;var yc=-tb;ob.moveTo(tb,lc);ob.lineTo(tb,$b);ob.lineTo(yc,$b);ob.lineTo(-.5*tb-Cc*lc,Cc*tb+-.5*lc);ob.lineTo(-.5*
tb-Cc*$b,Cc*tb+-.5*$b);ob.lineTo(-.5*yc-Cc*$b,Cc*yc+-.5*$b);ob.lineTo(-.5*tb+Cc*lc,-.5*lc-Cc*tb);ob.lineTo(-.5*tb+Cc*$b,-.5*$b-Cc*tb);ob.lineTo(-.5*yc+Cc*$b,-.5*$b-Cc*yc);ob.closePath()}},Fc=[Qa,$a,Za,Ib,nb,qc,Wc];Q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:N(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||
0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(ob,tb){ob=+ob;tb=+tb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(ob,tb):this._context.moveTo(ob,tb);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:N(this,ob,tb)}this._x0=this._x1;this._x1=ob;this._y0=this._y1;this._y1=tb}};O.prototype={areaStart:P,areaEnd:P,lineStart:function(){this._x0=
this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(ob,
tb){ob=+ob;tb=+tb;switch(this._point){case 0:this._point=1;this._x2=ob;this._y2=tb;break;case 1:this._point=2;this._x3=ob;this._y3=tb;break;case 2:this._point=3;this._x4=ob;this._y4=tb;this._context.moveTo((this._x0+4*this._x1+ob)/6,(this._y0+4*this._y1+tb)/6);break;default:N(this,ob,tb)}this._x0=this._x1;this._x1=ob;this._y0=this._y1;this._y1=tb}};T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=
0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(ob,tb){ob=+ob;tb=+tb;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var $b=(this._x0+4*this._x1+ob)/6,lc=(this._y0+4*this._y1+tb)/6;this._line?this._context.lineTo($b,lc):this._context.moveTo($b,lc);break;case 3:this._point=4;default:N(this,ob,tb)}this._x0=this._x1;this._x1=ob;this._y0=this._y1;this._y1=tb}};V.prototype=
{lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var ob=this._x,tb=this._y,$b=ob.length-1;if(0<$b)for(var lc=ob[0],yc=tb[0],Rb=ob[$b]-lc,Ub=tb[$b]-yc,zb=-1,qb;++zb<=$b;)qb=zb/$b,this._basis.point(this._beta*ob[zb]+(1-this._beta)*(lc+qb*Rb),this._beta*tb[zb]+(1-this._beta)*(yc+qb*Ub));this._x=this._y=null;this._basis.lineEnd()},point:function(ob,tb){this._x.push(+ob);this._y.push(+tb)}};var ld=function $b(tb){function lc(yc){return 1===tb?new Q(yc):new V(yc,tb)}
lc.beta=function(yc){return $b(+yc)};return lc}(.85);aa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Z(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(tb,$b){tb=+tb;$b=+$b;switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(tb,$b):this._context.moveTo(tb,$b);break;case 1:this._point=2;this._x1=tb;this._y1=$b;break;case 2:this._point=3;default:Z(this,tb,$b)}this._x0=this._x1;this._x1=this._x2;this._x2=tb;this._y0=this._y1;this._y1=this._y2;this._y2=$b}};var yb=function lc($b){function yc(Rb){return new aa(Rb,$b)}yc.tension=function(Rb){return lc(+Rb)};return yc}(0);Y.prototype={areaStart:P,areaEnd:P,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=
this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function($b,lc){$b=+$b;lc=+lc;switch(this._point){case 0:this._point=1;this._x3=$b;this._y3=lc;break;case 1:this._point=2;this._context.moveTo(this._x4=
$b,this._y4=lc);break;case 2:this._point=3;this._x5=$b;this._y5=lc;break;default:Z(this,$b,lc)}this._x0=this._x1;this._x1=this._x2;this._x2=$b;this._y0=this._y1;this._y1=this._y2;this._y2=lc}};var Wb=function yc(lc){function Rb(Ub){return new Y(Ub,lc)}Rb.tension=function(Ub){return yc(+Ub)};return Rb}(0);ea.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||
0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(lc,yc){lc=+lc;yc=+yc;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Z(this,lc,yc)}this._x0=this._x1;this._x1=this._x2;this._x2=lc;this._y0=this._y1;this._y1=this._y2;this._y2=yc}};var Dc=function Rb(yc){function Ub(zb){return new ea(zb,
yc)}Ub.tension=function(zb){return Rb(+zb)};return Ub}(0);ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();
this._line=1-this._line},point:function(yc,Rb){yc=+yc;Rb=+Rb;if(this._point){var Ub=this._x2-yc,zb=this._y2-Rb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Ub*Ub+zb*zb,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(yc,Rb):this._context.moveTo(yc,Rb);break;case 1:this._point=2;break;case 2:this._point=3;default:ca(this,yc,Rb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;
this._x2=yc;this._y0=this._y1;this._y1=this._y2;this._y2=Rb}};var ec=function Ub(Rb){function zb(qb){return Rb?new ba(qb,Rb):new aa(qb,0)}zb.alpha=function(qb){return Ub(+qb)};return zb}(.5);ka.prototype={areaStart:P,areaEnd:P,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,
this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Rb,Ub){Rb=+Rb;Ub=+Ub;if(this._point){var zb=this._x2-Rb,qb=this._y2-Ub;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(zb*zb+qb*qb,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=Rb;this._y3=Ub;break;case 1:this._point=2;this._context.moveTo(this._x4=Rb,
this._y4=Ub);break;case 2:this._point=3;this._x5=Rb;this._y5=Ub;break;default:ca(this,Rb,Ub)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Rb;this._y0=this._y1;this._y1=this._y2;this._y2=Ub}};var kc=function zb(Ub){function qb(vb){return Ub?new ka(vb,Ub):new Y(vb,0)}qb.alpha=function(vb){return zb(+vb)};return qb}(.5);qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},
lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Ub,zb){Ub=+Ub;zb=+zb;if(this._point){var qb=this._x2-Ub,vb=this._y2-zb;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(qb*qb+vb*vb,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=
2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ca(this,Ub,zb)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=Ub;this._y0=this._y1;this._y1=this._y2;this._y2=zb}};var ic=function qb(zb){function vb(Db){return zb?new qa(Db,zb):new ea(Db,0)}vb.alpha=function(Db){return qb(+Db)};return vb}(.5);pa.prototype=
{areaStart:P,areaEnd:P,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(zb,qb){zb=+zb;qb=+qb;this._point?this._context.lineTo(zb,qb):(this._point=1,this._context.moveTo(zb,qb))}};ha.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;
case 3:ra(this,this._t0,ja(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(zb,qb){var vb=NaN;zb=+zb;qb=+qb;if(zb!==this._x1||qb!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(zb,qb):this._context.moveTo(zb,qb);break;case 1:this._point=2;break;case 2:this._point=3;ra(this,ja(this,vb=oa(this,zb,qb)),vb);break;default:ra(this,this._t0,vb=oa(this,zb,qb))}this._x0=this._x1;this._x1=zb;
this._y0=this._y1;this._y1=qb;this._t0=vb}}};(la.prototype=Object.create(ha.prototype)).point=function(zb,qb){ha.prototype.point.call(this,qb,zb)};ua.prototype={moveTo:function(zb,qb){this._context.moveTo(qb,zb)},closePath:function(){this._context.closePath()},lineTo:function(zb,qb){this._context.lineTo(qb,zb)},bezierCurveTo:function(zb,qb,vb,Db,Qb,wc){this._context.bezierCurveTo(qb,zb,Db,vb,wc,Qb)}};na.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=
[];this._y=[]},lineEnd:function(){var zb=this._x,qb=this._y,vb=zb.length;if(vb)if(this._line?this._context.lineTo(zb[0],qb[0]):this._context.moveTo(zb[0],qb[0]),2===vb)this._context.lineTo(zb[1],qb[1]);else for(var Db=wa(zb),Qb=wa(qb),wc=0,dc=1;dc<vb;++wc,++dc)this._context.bezierCurveTo(Db[0][wc],Qb[0][wc],Db[1][wc],Qb[1][wc],zb[dc],qb[dc]);(this._line||0!==this._line&&1===vb)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(zb,qb){this._x.push(+zb);this._y.push(+qb)}};
Ca.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(zb,qb){zb=+zb;qb=+qb;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(zb,qb):this._context.moveTo(zb,
qb);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,qb),this._context.lineTo(zb,qb);else{var vb=this._x*(1-this._t)+zb*this._t;this._context.lineTo(vb,this._y);this._context.lineTo(vb,qb)}}this._x=zb;this._y=qb}};r.arc=function(){function zb(){var Lc,$c=+qb.apply(this,arguments),od=+vb.apply(this,arguments),Zc=wc.apply(this,arguments)-Pa,rd=dc.apply(this,arguments)-Pa,Dd=mb(rd-Zc),ed=rd>Zc;Nc||(Nc=Lc=n.path());if(od<$c){var Mc=od;od=$c;$c=Mc}if(1E-12<od)if(Dd>Va-1E-12)Nc.moveTo(od*
Ia(Zc),od*hb(Zc)),Nc.arc(0,0,od,Zc,rd,!ed),1E-12<$c&&(Nc.moveTo($c*Ia(rd),$c*hb(rd)),Nc.arc(0,0,$c,rd,Zc,ed));else{var sd=Zc,yd=rd;Mc=Zc;var Fd=rd,xe=Dd,Kd=Dd,Gc=xc.apply(this,arguments)/2,dd=1E-12<Gc&&(Qb?+Qb.apply(this,arguments):Ya($c*$c+od*od)),vd=Ta(mb(od-$c)/2,+Db.apply(this,arguments)),Cd=vd,ae=vd;if(1E-12<dd){var me=k(dd/$c*hb(Gc));Gc=k(dd/od*hb(Gc));1E-12<(xe-=2*me)?(me*=ed?1:-1,Mc+=me,Fd-=me):(xe=0,Mc=Fd=(Zc+rd)/2);1E-12<(Kd-=2*Gc)?(Gc*=ed?1:-1,sd+=Gc,yd-=Gc):(Kd=0,sd=yd=(Zc+rd)/2)}Zc=od*
Ia(sd);rd=od*hb(sd);me=$c*Ia(Fd);Gc=$c*hb(Fd);if(1E-12<vd){var Nd=od*Ia(yd),Id=od*hb(yd),qe=$c*Ia(Mc),re=$c*hb(Mc);if(Dd=Dd<Ga){var ve=qe-Zc;Dd=re-rd;dd=me-Nd;var Se=Gc-Id,gf=Se*ve-dd*Dd;1E-12>gf*gf?ve=void 0:(gf=(dd*(rd-Id)-Se*(Zc-Nd))/gf,ve=[Zc+gf*ve,rd+gf*Dd]);Dd=ve}Dd&&(Cd=Zc-ve[0],ae=rd-ve[1],Dd=Nd-ve[0],dd=Id-ve[1],Cd=(Cd*Dd+ae*dd)/(Ya(Cd*Cd+ae*ae)*Ya(Dd*Dd+dd*dd)),ae=1/hb((1<Cd?0:-1>Cd?Ga:Math.acos(Cd))/2),ve=Ya(ve[0]*ve[0]+ve[1]*ve[1]),Cd=Ta(vd,($c-ve)/(ae-1)),ae=Ta(vd,(od-ve)/(ae+1)))}1E-12<
Kd?1E-12<ae?(sd=c(qe,re,Zc,rd,od,ae,ed),yd=c(Nd,Id,me,Gc,od,ae,ed),Nc.moveTo(sd.cx+sd.x01,sd.cy+sd.y01),ae<vd?Nc.arc(sd.cx,sd.cy,ae,ya(sd.y01,sd.x01),ya(yd.y01,yd.x01),!ed):(Nc.arc(sd.cx,sd.cy,ae,ya(sd.y01,sd.x01),ya(sd.y11,sd.x11),!ed),Nc.arc(0,0,od,ya(sd.cy+sd.y11,sd.cx+sd.x11),ya(yd.cy+yd.y11,yd.cx+yd.x11),!ed),Nc.arc(yd.cx,yd.cy,ae,ya(yd.y11,yd.x11),ya(yd.y01,yd.x01),!ed))):(Nc.moveTo(Zc,rd),Nc.arc(0,0,od,sd,yd,!ed)):Nc.moveTo(Zc,rd);1E-12<$c&&1E-12<xe?1E-12<Cd?(sd=c(me,Gc,Nd,Id,$c,-Cd,ed),yd=
c(Zc,rd,qe,re,$c,-Cd,ed),Nc.lineTo(sd.cx+sd.x01,sd.cy+sd.y01),Cd<vd?Nc.arc(sd.cx,sd.cy,Cd,ya(sd.y01,sd.x01),ya(yd.y01,yd.x01),!ed):(Nc.arc(sd.cx,sd.cy,Cd,ya(sd.y01,sd.x01),ya(sd.y11,sd.x11),!ed),Nc.arc(0,0,$c,ya(sd.cy+sd.y11,sd.cx+sd.x11),ya(yd.cy+yd.y11,yd.cx+yd.x11),ed),Nc.arc(yd.cx,yd.cy,Cd,ya(yd.y11,yd.x11),ya(yd.y01,yd.x01),!ed))):Nc.arc(0,0,$c,Fd,Mc,ed):Nc.lineTo(me,Gc)}else Nc.moveTo(0,0);Nc.closePath();if(Lc)return Nc=null,Lc+""||null}var qb=a,vb=e,Db=p(0),Qb=null,wc=f,dc=l,xc=m,Nc=null;zb.centroid=
function(){var Lc=(+qb.apply(this,arguments)+ +vb.apply(this,arguments))/2,$c=(+wc.apply(this,arguments)+ +dc.apply(this,arguments))/2-Ga/2;return[Ia($c)*Lc,hb($c)*Lc]};zb.innerRadius=function(Lc){return arguments.length?(qb="function"===typeof Lc?Lc:p(+Lc),zb):qb};zb.outerRadius=function(Lc){return arguments.length?(vb="function"===typeof Lc?Lc:p(+Lc),zb):vb};zb.cornerRadius=function(Lc){return arguments.length?(Db="function"===typeof Lc?Lc:p(+Lc),zb):Db};zb.padRadius=function(Lc){return arguments.length?
(Qb=null==Lc?null:"function"===typeof Lc?Lc:p(+Lc),zb):Qb};zb.startAngle=function(Lc){return arguments.length?(wc="function"===typeof Lc?Lc:p(+Lc),zb):wc};zb.endAngle=function(Lc){return arguments.length?(dc="function"===typeof Lc?Lc:p(+Lc),zb):dc};zb.padAngle=function(Lc){return arguments.length?(xc="function"===typeof Lc?Lc:p(+Lc),zb):xc};zb.context=function(Lc){return arguments.length?(Nc=null==Lc?null:Lc,zb):Nc};return zb};r.area=v;r.areaRadial=u;r.curveBasis=function(zb){return new Q(zb)};r.curveBasisClosed=
function(zb){return new O(zb)};r.curveBasisOpen=function(zb){return new T(zb)};r.curveBundle=ld;r.curveCardinal=yb;r.curveCardinalClosed=Wb;r.curveCardinalOpen=Dc;r.curveCatmullRom=ec;r.curveCatmullRomClosed=kc;r.curveCatmullRomOpen=ic;r.curveLinear=g;r.curveLinearClosed=function(zb){return new pa(zb)};r.curveMonotoneX=function(zb){return new ha(zb)};r.curveMonotoneY=function(zb){return new la(zb)};r.curveNatural=function(zb){return new na(zb)};r.curveStep=function(zb){return new Ca(zb,.5)};r.curveStepAfter=
function(zb){return new Ca(zb,1)};r.curveStepBefore=function(zb){return new Ca(zb,0)};r.line=t;r.lineRadial=C;r.linkHorizontal=function(){return I(M)};r.linkRadial=function(){var zb=I(L);zb.angle=zb.x;delete zb.x;zb.radius=zb.y;delete zb.y;return zb};r.linkVertical=function(){return I(E)};r.pie=function(){function zb(xc){var Nc,Lc=xc.length;var $c=0;var od=Array(Lc),Zc=Array(Lc),rd=+Qb.apply(this,arguments);var Dd=Math.min(Va,Math.max(-Va,wc.apply(this,arguments)-rd));var ed=Math.min(Math.abs(Dd)/
Lc,dc.apply(this,arguments)),Mc=ed*(0>Dd?-1:1),sd;for(Nc=0;Nc<Lc;++Nc)0<(sd=Zc[od[Nc]=Nc]=+qb(xc[Nc],Nc,xc))&&($c+=sd);null!=vb?od.sort(function(Fd,xe){return vb(Zc[Fd],Zc[xe])}):null!=Db&&od.sort(function(Fd,xe){return Db(xc[Fd],xc[xe])});Nc=0;for(Dd=$c?(Dd-Lc*Mc)/$c:0;Nc<Lc;++Nc,rd=yd){$c=od[Nc];sd=Zc[$c];var yd=rd+(0<sd?sd*Dd:0)+Mc;Zc[$c]={data:xc[$c],index:Nc,value:sd,startAngle:rd,endAngle:yd,padAngle:ed}}return Zc}var qb=A,vb=w,Db=null,Qb=p(0),wc=p(Va),dc=p(0);zb.value=function(xc){return arguments.length?
(qb="function"===typeof xc?xc:p(+xc),zb):qb};zb.sortValues=function(xc){return arguments.length?(vb=xc,Db=null,zb):vb};zb.sort=function(xc){return arguments.length?(Db=xc,vb=null,zb):Db};zb.startAngle=function(xc){return arguments.length?(Qb="function"===typeof xc?xc:p(+xc),zb):Qb};zb.endAngle=function(xc){return arguments.length?(wc="function"===typeof xc?xc:p(+xc),zb):wc};zb.padAngle=function(xc){return arguments.length?(dc="function"===typeof xc?xc:p(+xc),zb):dc};return zb};r.pointRadial=F;r.radialArea=
u;r.radialLine=C;r.stack=function(){function zb(wc){var dc=qb.apply(this,arguments),xc,Nc=wc.length,Lc=dc.length,$c=Array(Lc);for(xc=0;xc<Lc;++xc){for(var od=dc[xc],Zc=$c[xc]=Array(Nc),rd=0,Dd;rd<Nc;++rd)Zc[rd]=Dd=[0,+Qb(wc[rd],od,rd,wc)],Dd.data=wc[rd];Zc.key=od}xc=0;for(dc=vb($c);xc<Lc;++xc)$c[dc[xc]].index=xc;Db($c,dc);return $c}var qb=p([]),vb=Xa,Db=Fa,Qb=ab;zb.keys=function(wc){return arguments.length?(qb="function"===typeof wc?wc:p(Ea.call(wc)),zb):qb};zb.value=function(wc){return arguments.length?
(Qb="function"===typeof wc?wc:p(+wc),zb):Qb};zb.order=function(wc){return arguments.length?(vb=null==wc?Xa:"function"===typeof wc?wc:p(Ea.call(wc)),zb):vb};zb.offset=function(wc){return arguments.length?(Db=null==wc?Fa:wc,zb):Db};return zb};r.stackOffsetDiverging=function(zb,qb){if(0<(Nc=zb.length))for(var vb,Db=0,Qb,wc,dc,xc,Nc,Lc=zb[qb[0]].length;Db<Lc;++Db)for(vb=dc=xc=0;vb<Nc;++vb)0<(wc=(Qb=zb[qb[vb]][Db])[1]-Qb[0])?(Qb[0]=dc,Qb[1]=dc+=wc):0>wc?(Qb[1]=xc,Qb[0]=xc+=wc):(Qb[0]=0,Qb[1]=wc)};r.stackOffsetExpand=
function(zb,qb){if(0<(Db=zb.length)){for(var vb,Db,Qb=0,wc=zb[0].length,dc;Qb<wc;++Qb){for(dc=vb=0;vb<Db;++vb)dc+=zb[vb][Qb][1]||0;if(dc)for(vb=0;vb<Db;++vb)zb[vb][Qb][1]/=dc}Fa(zb,qb)}};r.stackOffsetNone=Fa;r.stackOffsetSilhouette=function(zb,qb){if(0<(Qb=zb.length)){for(var vb=0,Db=zb[qb[0]],Qb,wc=Db.length;vb<wc;++vb){for(var dc=0,xc=0;dc<Qb;++dc)xc+=zb[dc][vb][1]||0;Db[vb][1]+=Db[vb][0]=-xc/2}Fa(zb,qb)}};r.stackOffsetWiggle=function(zb,qb){if(0<(dc=zb.length)&&0<(wc=(Qb=zb[qb[0]]).length)){for(var vb=
0,Db=1,Qb,wc,dc;Db<wc;++Db){for(var xc=0,Nc=0,Lc=0;xc<dc;++xc){var $c=zb[qb[xc]],od=$c[Db][1]||0;$c=(od-($c[Db-1][1]||0))/2;for(var Zc=0;Zc<xc;++Zc){var rd=zb[qb[Zc]];$c+=(rd[Db][1]||0)-(rd[Db-1][1]||0)}Nc+=od;Lc+=$c*od}Qb[Db-1][1]+=Qb[Db-1][0]=vb;Nc&&(vb-=Lc/Nc)}Qb[Db-1][1]+=Qb[Db-1][0]=vb;Fa(zb,qb)}};r.stackOrderAppearance=gb;r.stackOrderAscending=La;r.stackOrderDescending=function(zb){return La(zb).reverse()};r.stackOrderInsideOut=function(zb){var qb=zb.length,vb=zb.map(kb),Db=gb(zb),Qb=0,wc=0,
dc=[],xc=[];for(zb=0;zb<qb;++zb){var Nc=Db[zb];Qb<wc?(Qb+=vb[Nc],dc.push(Nc)):(wc+=vb[Nc],xc.push(Nc))}return xc.reverse().concat(dc)};r.stackOrderNone=Xa;r.stackOrderReverse=function(zb){return Xa(zb).reverse()};r.symbol=function(){function zb(){var Qb;Db||(Db=Qb=n.path());qb.apply(this,arguments).draw(Db,+vb.apply(this,arguments));if(Qb)return Db=null,Qb+""||null}var qb=p(Qa),vb=p(64),Db=null;zb.type=function(Qb){return arguments.length?(qb="function"===typeof Qb?Qb:p(Qb),zb):qb};zb.size=function(Qb){return arguments.length?
(vb="function"===typeof Qb?Qb:p(+Qb),zb):vb};zb.context=function(Qb){return arguments.length?(Db=null==Qb?null:Qb,zb):Db};return zb};r.symbolCircle=Qa;r.symbolCross=$a;r.symbolDiamond=Za;r.symbolSquare=Ib;r.symbolStar=nb;r.symbolTriangle=qc;r.symbolWye=Wc;r.symbols=Fc;Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-path":163}],166:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?n(G,b("d3-time")):(r=r||self,n(r.d3=r.d3||{},r.d3))})(this,function(r,n){function p(Za){if(0<=
Za.y&&100>Za.y){var nb=new Date(-1,Za.m,Za.d,Za.H,Za.M,Za.S,Za.L);nb.setFullYear(Za.y);return nb}return new Date(Za.y,Za.m,Za.d,Za.H,Za.M,Za.S,Za.L)}function k(Za){if(0<=Za.y&&100>Za.y){var nb=new Date(Date.UTC(-1,Za.m,Za.d,Za.H,Za.M,Za.S,Za.L));nb.setUTCFullYear(Za.y);return nb}return new Date(Date.UTC(Za.y,Za.m,Za.d,Za.H,Za.M,Za.S,Za.L))}function a(Za,nb,sb){return{y:Za,m:nb,d:sb,H:0,M:0,S:0,L:0}}function e(Za){function nb(Ub,zb){return function(qb){var vb=[],Db=-1,Qb=0,wc=Ub.length,dc,xc;for(qb instanceof
Date||(qb=new Date(+qb));++Db<wc;)if(37===Ub.charCodeAt(Db)){vb.push(Ub.slice(Qb,Db));null!=(Qb=Va[dc=Ub.charAt(++Db)])?dc=Ub.charAt(++Db):Qb="e"===dc?" ":"0";if(xc=zb[dc])dc=xc(qb,Qb);vb.push(dc);Qb=Db+1}vb.push(Ub.slice(Qb,Db));return vb.join("")}}function sb(Ub,zb){return function(qb){var vb=a(1900,void 0,1);if(Cb(vb,Ub,qb+="",0)!=qb.length)return null;if("Q"in vb)return new Date(vb.Q);if("s"in vb)return new Date(1E3*vb.s+("L"in vb?vb.L:0));!zb||"Z"in vb||(vb.Z=0);"p"in vb&&(vb.H=vb.H%12+12*vb.p);
void 0===vb.m&&(vb.m="q"in vb?vb.q:0);if("V"in vb){if(1>vb.V||53<vb.V)return null;"w"in vb||(vb.w=1);if("Z"in vb){qb=k(a(vb.y,0,1));var Db=qb.getUTCDay();qb=4<Db||0===Db?n.utcMonday.ceil(qb):n.utcMonday(qb);qb=n.utcDay.offset(qb,7*(vb.V-1));vb.y=qb.getUTCFullYear();vb.m=qb.getUTCMonth();vb.d=qb.getUTCDate()+(vb.w+6)%7}else qb=p(a(vb.y,0,1)),Db=qb.getDay(),qb=4<Db||0===Db?n.timeMonday.ceil(qb):n.timeMonday(qb),qb=n.timeDay.offset(qb,7*(vb.V-1)),vb.y=qb.getFullYear(),vb.m=qb.getMonth(),vb.d=qb.getDate()+
(vb.w+6)%7}else if("W"in vb||"U"in vb)"w"in vb||(vb.w="u"in vb?vb.u%7:"W"in vb?1:0),Db="Z"in vb?k(a(vb.y,0,1)).getUTCDay():p(a(vb.y,0,1)).getDay(),vb.m=0,vb.d="W"in vb?(vb.w+6)%7+7*vb.W-(Db+5)%7:vb.w+7*vb.U-(Db+6)%7;return"Z"in vb?(vb.H+=vb.Z/100|0,vb.M+=vb.Z%100,k(vb)):p(vb)}}function Cb(Ub,zb,qb,vb){for(var Db=0,Qb=zb.length,wc=qb.length,dc;Db<Qb;){if(vb>=wc)return-1;dc=zb.charCodeAt(Db++);if(37===dc){if(dc=zb.charAt(Db++),dc=Rb[dc in Va?zb.charAt(Db++):dc],!dc||0>(vb=dc(Ub,qb,vb)))return-1}else if(dc!=
qb.charCodeAt(vb++))return-1}return vb}var Ib=Za.dateTime,fc=Za.date,qc=Za.time,Cc=Za.periods,cd=Za.days,Qc=Za.shortDays,Wc=Za.months,Fc=Za.shortMonths,ld=m(Cc),yb=c(Cc),Wb=m(cd),Dc=c(cd),ec=m(Qc),kc=c(Qc),ic=m(Wc),ob=c(Wc),tb=m(Fc),$b=c(Fc),lc={a:function(Ub){return Qc[Ub.getDay()]},A:function(Ub){return cd[Ub.getDay()]},b:function(Ub){return Fc[Ub.getMonth()]},B:function(Ub){return Wc[Ub.getMonth()]},c:null,d:P,e:P,f:V,H:N,I:Q,j:O,L:T,m:Z,M:aa,p:function(Ub){return Cc[+(12<=Ub.getHours())]},q:function(Ub){return 1+
~~(Ub.getMonth()/3)},Q:Ta,s:hb,S:Y,u:ea,U:ca,V:ba,w:ka,W:qa,x:null,X:null,y:pa,Y:oa,Z:ja,"%":Na},yc={a:function(Ub){return Qc[Ub.getUTCDay()]},A:function(Ub){return cd[Ub.getUTCDay()]},b:function(Ub){return Fc[Ub.getUTCMonth()]},B:function(Ub){return Wc[Ub.getUTCMonth()]},c:null,d:ra,e:ra,f:wa,H:ha,I:la,j:ua,L:na,m:Ca,M:Fa,p:function(Ub){return Cc[+(12<=Ub.getUTCHours())]},q:function(Ub){return 1+~~(Ub.getUTCMonth()/3)},Q:Ta,s:hb,S:Xa,u:ab,U:gb,V:bb,w:La,W:kb,x:null,X:null,y:mb,Y:ya,Z:Ia,"%":Na},
Rb={a:function(Ub,zb,qb){return(zb=ec.exec(zb.slice(qb)))?(Ub.w=kc[zb[0].toLowerCase()],qb+zb[0].length):-1},A:function(Ub,zb,qb){return(zb=Wb.exec(zb.slice(qb)))?(Ub.w=Dc[zb[0].toLowerCase()],qb+zb[0].length):-1},b:function(Ub,zb,qb){return(zb=tb.exec(zb.slice(qb)))?(Ub.m=$b[zb[0].toLowerCase()],qb+zb[0].length):-1},B:function(Ub,zb,qb){return(zb=ic.exec(zb.slice(qb)))?(Ub.m=ob[zb[0].toLowerCase()],qb+zb[0].length):-1},c:function(Ub,zb,qb){return Cb(Ub,Ib,zb,qb)},d:B,e:B,f:I,H:u,I:u,j:C,L:J,m:y,
M:F,p:function(Ub,zb,qb){return(zb=ld.exec(zb.slice(qb)))?(Ub.p=yb[zb[0].toLowerCase()],qb+zb[0].length):-1},q:z,Q:E,s:L,S:H,u:g,U:h,V:q,w:d,W:t,x:function(Ub,zb,qb){return Cb(Ub,fc,zb,qb)},X:function(Ub,zb,qb){return Cb(Ub,qc,zb,qb)},y:w,Y:v,Z:A,"%":M};lc.x=nb(fc,lc);lc.X=nb(qc,lc);lc.c=nb(Ib,lc);yc.x=nb(fc,yc);yc.X=nb(qc,yc);yc.c=nb(Ib,yc);return{format:function(Ub){var zb=nb(Ub+="",lc);zb.toString=function(){return Ub};return zb},parse:function(Ub){var zb=sb(Ub+="",!1);zb.toString=function(){return Ub};
return zb},utcFormat:function(Ub){var zb=nb(Ub+="",yc);zb.toString=function(){return Ub};return zb},utcParse:function(Ub){var zb=sb(Ub+="",!0);zb.toString=function(){return Ub};return zb}}}function f(Za,nb,sb){var Cb=0>Za?"-":"";Za=(Cb?-Za:Za)+"";var Ib=Za.length;return Cb+(Ib<sb?Array(sb-Ib+1).join(nb)+Za:Za)}function l(Za){return Za.replace(Qa,"\\$\x26")}function m(Za){return new RegExp("^(?:"+Za.map(l).join("|")+")","i")}function c(Za){for(var nb={},sb=-1,Cb=Za.length;++sb<Cb;)nb[Za[sb].toLowerCase()]=
sb;return nb}function d(Za,nb,sb){return(nb=va.exec(nb.slice(sb,sb+1)))?(Za.w=+nb[0],sb+nb[0].length):-1}function g(Za,nb,sb){return(nb=va.exec(nb.slice(sb,sb+1)))?(Za.u=+nb[0],sb+nb[0].length):-1}function h(Za,nb,sb){return(nb=va.exec(nb.slice(sb,sb+2)))?(Za.U=+nb[0],sb+nb[0].length):-1}function q(Za,nb,sb){return(nb=va.exec(nb.slice(sb,sb+2)))?(Za.V=+nb[0],sb+nb[0].length):-1}function t(Za,nb,sb){return(nb=va.exec(nb.slice(sb,sb+2)))?(Za.W=+nb[0],sb+nb[0].length):-1}function v(Za,nb,sb){return(nb=
va.exec(nb.slice(sb,sb+4)))?(Za.y=+nb[0],sb+nb[0].length):-1}function w(Za,nb,sb){return(nb=va.exec(nb.slice(sb,sb+2)))?(Za.y=+nb[0]+(68<+nb[0]?1900:2E3),sb+nb[0].length):-1}function A(Za,nb,sb){return(nb=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(nb.slice(sb,sb+6)))?(Za.Z=nb[1]?0:-(nb[2]+(nb[3]||"00")),sb+nb[0].length):-1}function z(Za,nb,sb){return(nb=va.exec(nb.slice(sb,sb+1)))?(Za.q=3*nb[0]-3,sb+nb[0].length):-1}function y(Za,nb,sb){return(nb=va.exec(nb.slice(sb,sb+2)))?(Za.m=nb[0]-1,sb+nb[0].length):
-1}function B(Za,nb,sb){return(nb=va.exec(nb.slice(sb,sb+2)))?(Za.d=+nb[0],sb+nb[0].length):-1}function C(Za,nb,sb){return(nb=va.exec(nb.slice(sb,sb+3)))?(Za.m=0,Za.d=+nb[0],sb+nb[0].length):-1}function u(Za,nb,sb){return(nb=va.exec(nb.slice(sb,sb+2)))?(Za.H=+nb[0],sb+nb[0].length):-1}function F(Za,nb,sb){return(nb=va.exec(nb.slice(sb,sb+2)))?(Za.M=+nb[0],sb+nb[0].length):-1}function H(Za,nb,sb){return(nb=va.exec(nb.slice(sb,sb+2)))?(Za.S=+nb[0],sb+nb[0].length):-1}function J(Za,nb,sb){return(nb=
va.exec(nb.slice(sb,sb+3)))?(Za.L=+nb[0],sb+nb[0].length):-1}function I(Za,nb,sb){return(nb=va.exec(nb.slice(sb,sb+6)))?(Za.L=Math.floor(nb[0]/1E3),sb+nb[0].length):-1}function M(Za,nb,sb){return(Za=Ea.exec(nb.slice(sb,sb+1)))?sb+Za[0].length:-1}function E(Za,nb,sb){return(nb=va.exec(nb.slice(sb)))?(Za.Q=+nb[0],sb+nb[0].length):-1}function L(Za,nb,sb){return(nb=va.exec(nb.slice(sb)))?(Za.s=+nb[0],sb+nb[0].length):-1}function P(Za,nb){return f(Za.getDate(),nb,2)}function N(Za,nb){return f(Za.getHours(),
nb,2)}function Q(Za,nb){return f(Za.getHours()%12||12,nb,2)}function O(Za,nb){return f(1+n.timeDay.count(n.timeYear(Za),Za),nb,3)}function T(Za,nb){return f(Za.getMilliseconds(),nb,3)}function V(Za,nb){return T(Za,nb)+"000"}function Z(Za,nb){return f(Za.getMonth()+1,nb,2)}function aa(Za,nb){return f(Za.getMinutes(),nb,2)}function Y(Za,nb){return f(Za.getSeconds(),nb,2)}function ea(Za){Za=Za.getDay();return 0===Za?7:Za}function ca(Za,nb){return f(n.timeSunday.count(n.timeYear(Za)-1,Za),nb,2)}function ba(Za,
nb){var sb=Za.getDay();Za=4<=sb||0===sb?n.timeThursday(Za):n.timeThursday.ceil(Za);return f(n.timeThursday.count(n.timeYear(Za),Za)+(4===n.timeYear(Za).getDay()),nb,2)}function ka(Za){return Za.getDay()}function qa(Za,nb){return f(n.timeMonday.count(n.timeYear(Za)-1,Za),nb,2)}function pa(Za,nb){return f(Za.getFullYear()%100,nb,2)}function oa(Za,nb){return f(Za.getFullYear()%1E4,nb,4)}function ja(Za){Za=Za.getTimezoneOffset();return(0<Za?"-":(Za*=-1,"+"))+f(Za/60|0,"0",2)+f(Za%60,"0",2)}function ra(Za,
nb){return f(Za.getUTCDate(),nb,2)}function ha(Za,nb){return f(Za.getUTCHours(),nb,2)}function la(Za,nb){return f(Za.getUTCHours()%12||12,nb,2)}function ua(Za,nb){return f(1+n.utcDay.count(n.utcYear(Za),Za),nb,3)}function na(Za,nb){return f(Za.getUTCMilliseconds(),nb,3)}function wa(Za,nb){return na(Za,nb)+"000"}function Ca(Za,nb){return f(Za.getUTCMonth()+1,nb,2)}function Fa(Za,nb){return f(Za.getUTCMinutes(),nb,2)}function Xa(Za,nb){return f(Za.getUTCSeconds(),nb,2)}function ab(Za){Za=Za.getUTCDay();
return 0===Za?7:Za}function gb(Za,nb){return f(n.utcSunday.count(n.utcYear(Za)-1,Za),nb,2)}function bb(Za,nb){var sb=Za.getUTCDay();Za=4<=sb||0===sb?n.utcThursday(Za):n.utcThursday.ceil(Za);return f(n.utcThursday.count(n.utcYear(Za),Za)+(4===n.utcYear(Za).getUTCDay()),nb,2)}function La(Za){return Za.getUTCDay()}function kb(Za,nb){return f(n.utcMonday.count(n.utcYear(Za)-1,Za),nb,2)}function mb(Za,nb){return f(Za.getUTCFullYear()%100,nb,2)}function ya(Za,nb){return f(Za.getUTCFullYear()%1E4,nb,4)}
function Ia(){return"+0000"}function Na(){return"%"}function Ta(Za){return+Za}function hb(Za){return Math.floor(+Za/1E3)}function Ya(Za){$a=e(Za);r.timeFormat=$a.format;r.timeParse=$a.parse;r.utcFormat=$a.utcFormat;r.utcParse=$a.utcParse;return $a}function Ga(Za){return Za.toISOString()}function Pa(Za){Za=new Date(Za);return isNaN(Za)?null:Za}var Va={"-":"",_:" ",0:"0"},va=/^\s*\d+/,Ea=/^%/,Qa=/[\\^$*+?|[\]().{}]/g,$a;Ya({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],
days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});var eb=Date.prototype.toISOString?Ga:r.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),pb=+new Date("2000-01-01T00:00:00.000Z")?Pa:r.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");r.isoFormat=eb;r.isoParse=pb;r.timeFormatDefaultLocale=
Ya;r.timeFormatLocale=e;Object.defineProperty(r,"__esModule",{value:!0})})},{"d3-time":167}],167:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?n(G):(r=r||self,n(r.d3=r.d3||{}))})(this,function(r){function n(bb,La,kb,mb){function ya(Ia){return bb(Ia=0===arguments.length?new Date:new Date(+Ia)),Ia}ya.floor=function(Ia){return bb(Ia=new Date(+Ia)),Ia};ya.ceil=function(Ia){return bb(Ia=new Date(Ia-1)),La(Ia,1),bb(Ia),Ia};ya.round=function(Ia){var Na=ya(Ia),Ta=ya.ceil(Ia);
return Ia-Na<Ta-Ia?Na:Ta};ya.offset=function(Ia,Na){return La(Ia=new Date(+Ia),null==Na?1:Math.floor(Na)),Ia};ya.range=function(Ia,Na,Ta){var hb=[],Ya;Ia=ya.ceil(Ia);Ta=null==Ta?1:Math.floor(Ta);if(!(Ia<Na&&0<Ta))return hb;do hb.push(Ya=new Date(+Ia)),La(Ia,Ta),bb(Ia);while(Ya<Ia&&Ia<Na);return hb};ya.filter=function(Ia){return n(function(Na){if(Na>=Na)for(;bb(Na),!Ia(Na);)Na.setTime(Na-1)},function(Na,Ta){if(Na>=Na)if(0>Ta)for(;0>=++Ta;)for(;La(Na,-1),!Ia(Na););else for(;0<=--Ta;)for(;La(Na,1),!Ia(Na););
})};kb&&(ya.count=function(Ia,Na){a.setTime(+Ia);e.setTime(+Na);bb(a);bb(e);return Math.floor(kb(a,e))},ya.every=function(Ia){Ia=Math.floor(Ia);return isFinite(Ia)&&0<Ia?1<Ia?ya.filter(mb?function(Na){return 0===mb(Na)%Ia}:function(Na){return 0===ya.count(0,Na)%Ia}):ya:null});return ya}function p(bb){return n(function(La){La.setDate(La.getDate()-(La.getDay()+7-bb)%7);La.setHours(0,0,0,0)},function(La,kb){La.setDate(La.getDate()+7*kb)},function(La,kb){return(kb-La-6E4*(kb.getTimezoneOffset()-La.getTimezoneOffset()))/
6048E5})}function k(bb){return n(function(La){La.setUTCDate(La.getUTCDate()-(La.getUTCDay()+7-bb)%7);La.setUTCHours(0,0,0,0)},function(La,kb){La.setUTCDate(La.getUTCDate()+7*kb)},function(La,kb){return(kb-La)/6048E5})}var a=new Date,e=new Date,f=n(function(){},function(bb,La){bb.setTime(+bb+La)},function(bb,La){return La-bb});f.every=function(bb){bb=Math.floor(bb);return isFinite(bb)&&0<bb?1<bb?n(function(La){La.setTime(Math.floor(La/bb)*bb)},function(La,kb){La.setTime(+La+kb*bb)},function(La,kb){return(kb-
La)/bb}):f:null};var l=f.range,m=n(function(bb){bb.setTime(bb-bb.getMilliseconds())},function(bb,La){bb.setTime(+bb+1E3*La)},function(bb,La){return(La-bb)/1E3},function(bb){return bb.getUTCSeconds()}),c=m.range,d=n(function(bb){bb.setTime(bb-bb.getMilliseconds()-1E3*bb.getSeconds())},function(bb,La){bb.setTime(+bb+6E4*La)},function(bb,La){return(La-bb)/6E4},function(bb){return bb.getMinutes()}),g=d.range,h=n(function(bb){bb.setTime(bb-bb.getMilliseconds()-1E3*bb.getSeconds()-6E4*bb.getMinutes())},
function(bb,La){bb.setTime(+bb+36E5*La)},function(bb,La){return(La-bb)/36E5},function(bb){return bb.getHours()}),q=h.range,t=n(function(bb){bb.setHours(0,0,0,0)},function(bb,La){bb.setDate(bb.getDate()+La)},function(bb,La){return(La-bb-6E4*(La.getTimezoneOffset()-bb.getTimezoneOffset()))/864E5},function(bb){return bb.getDate()-1}),v=t.range,w=p(0),A=p(1),z=p(2),y=p(3),B=p(4),C=p(5),u=p(6),F=w.range,H=A.range,J=z.range,I=y.range,M=B.range,E=C.range,L=u.range,P=n(function(bb){bb.setDate(1);bb.setHours(0,
0,0,0)},function(bb,La){bb.setMonth(bb.getMonth()+La)},function(bb,La){return La.getMonth()-bb.getMonth()+12*(La.getFullYear()-bb.getFullYear())},function(bb){return bb.getMonth()}),N=P.range,Q=n(function(bb){bb.setMonth(0,1);bb.setHours(0,0,0,0)},function(bb,La){bb.setFullYear(bb.getFullYear()+La)},function(bb,La){return La.getFullYear()-bb.getFullYear()},function(bb){return bb.getFullYear()});Q.every=function(bb){return isFinite(bb=Math.floor(bb))&&0<bb?n(function(La){La.setFullYear(Math.floor(La.getFullYear()/
bb)*bb);La.setMonth(0,1);La.setHours(0,0,0,0)},function(La,kb){La.setFullYear(La.getFullYear()+kb*bb)}):null};var O=Q.range,T=n(function(bb){bb.setUTCSeconds(0,0)},function(bb,La){bb.setTime(+bb+6E4*La)},function(bb,La){return(La-bb)/6E4},function(bb){return bb.getUTCMinutes()}),V=T.range,Z=n(function(bb){bb.setUTCMinutes(0,0,0)},function(bb,La){bb.setTime(+bb+36E5*La)},function(bb,La){return(La-bb)/36E5},function(bb){return bb.getUTCHours()}),aa=Z.range,Y=n(function(bb){bb.setUTCHours(0,0,0,0)},
function(bb,La){bb.setUTCDate(bb.getUTCDate()+La)},function(bb,La){return(La-bb)/864E5},function(bb){return bb.getUTCDate()-1}),ea=Y.range,ca=k(0),ba=k(1),ka=k(2),qa=k(3),pa=k(4),oa=k(5),ja=k(6),ra=ca.range,ha=ba.range,la=ka.range,ua=qa.range,na=pa.range,wa=oa.range,Ca=ja.range,Fa=n(function(bb){bb.setUTCDate(1);bb.setUTCHours(0,0,0,0)},function(bb,La){bb.setUTCMonth(bb.getUTCMonth()+La)},function(bb,La){return La.getUTCMonth()-bb.getUTCMonth()+12*(La.getUTCFullYear()-bb.getUTCFullYear())},function(bb){return bb.getUTCMonth()}),
Xa=Fa.range,ab=n(function(bb){bb.setUTCMonth(0,1);bb.setUTCHours(0,0,0,0)},function(bb,La){bb.setUTCFullYear(bb.getUTCFullYear()+La)},function(bb,La){return La.getUTCFullYear()-bb.getUTCFullYear()},function(bb){return bb.getUTCFullYear()});ab.every=function(bb){return isFinite(bb=Math.floor(bb))&&0<bb?n(function(La){La.setUTCFullYear(Math.floor(La.getUTCFullYear()/bb)*bb);La.setUTCMonth(0,1);La.setUTCHours(0,0,0,0)},function(La,kb){La.setUTCFullYear(La.getUTCFullYear()+kb*bb)}):null};var gb=ab.range;
r.timeDay=t;r.timeDays=v;r.timeFriday=C;r.timeFridays=E;r.timeHour=h;r.timeHours=q;r.timeInterval=n;r.timeMillisecond=f;r.timeMilliseconds=l;r.timeMinute=d;r.timeMinutes=g;r.timeMonday=A;r.timeMondays=H;r.timeMonth=P;r.timeMonths=N;r.timeSaturday=u;r.timeSaturdays=L;r.timeSecond=m;r.timeSeconds=c;r.timeSunday=w;r.timeSundays=F;r.timeThursday=B;r.timeThursdays=M;r.timeTuesday=z;r.timeTuesdays=J;r.timeWednesday=y;r.timeWednesdays=I;r.timeWeek=w;r.timeWeeks=F;r.timeYear=Q;r.timeYears=O;r.utcDay=Y;r.utcDays=
ea;r.utcFriday=oa;r.utcFridays=wa;r.utcHour=Z;r.utcHours=aa;r.utcMillisecond=f;r.utcMilliseconds=l;r.utcMinute=T;r.utcMinutes=V;r.utcMonday=ba;r.utcMondays=ha;r.utcMonth=Fa;r.utcMonths=Xa;r.utcSaturday=ja;r.utcSaturdays=Ca;r.utcSecond=m;r.utcSeconds=c;r.utcSunday=ca;r.utcSundays=ra;r.utcThursday=pa;r.utcThursdays=na;r.utcTuesday=ka;r.utcTuesdays=la;r.utcWednesday=qa;r.utcWednesdays=ua;r.utcWeek=ca;r.utcWeeks=ra;r.utcYear=ab;r.utcYears=gb;Object.defineProperty(r,"__esModule",{value:!0})})},{}],168:[function(b,
D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?n(G):(r=r||self,n(r.d3=r.d3||{}))})(this,function(r){function n(){return v||(z(p),v=A.now()+w)}function p(){v=0}function k(){this._call=this._time=this._next=null}function a(y,B,C){var u=new k;u.restart(y,B,C);return u}function e(){n();++c;for(var y=h,B;y;)0<=(B=v-y._time)&&y._call.call(null,B),y=y._next;--c}function f(){v=(t=A.now())+w;c=d=0;try{e()}finally{c=0;for(var y,B=h,C,u=Infinity;B;)B._call?(u>B._time&&(u=B._time),y=B,B=B._next):
(C=B._next,B._next=null,B=y?y._next=C:h=C);q=y;m(u);v=0}}function l(){var y=A.now(),B=y-t;1E3<B&&(w-=B,t=y)}function m(y){c||(d&&(d=clearTimeout(d)),24<y-v?(Infinity>y&&(d=setTimeout(f,y-A.now()-w)),g&&(g=clearInterval(g))):(g||(t=A.now(),g=setInterval(l,1E3)),c=1,z(f)))}var c=0,d=0,g=0,h,q,t=0,v=0,w=0,A="object"===typeof performance&&performance.now?performance:Date,z="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(y){setTimeout(y,17)};k.prototype=
a.prototype={constructor:k,restart:function(y,B,C){if("function"!==typeof y)throw new TypeError("callback is not a function");C=(null==C?n():+C)+(null==B?0:+B);this._next||q===this||(q?q._next=this:h=this,q=this);this._call=y;this._time=C;m()},stop:function(){this._call&&(this._call=null,this._time=Infinity,m())}};r.interval=function(y,B,C){var u=new k,F=B;if(null==B)return u.restart(y,B,C),u;B=+B;C=null==C?n():+C;u.restart(function I(J){J+=F;u.restart(I,F+=B,C);y(J)},B,C);return u};r.now=n;r.timeout=
function(y,B,C){var u=new k;B=null==B?0:+B;u.restart(function(F){u.stop();y(F+B)},B,C);return u};r.timer=a;r.timerFlush=e;Object.defineProperty(r,"__esModule",{value:!0})})},{}],169:[function(b,D,G){!function(){function r(R){return R&&(R.ownerDocument&&R.ownerDocument.defaultView||R.document&&R||R.defaultView)}function n(R,ia){return R<ia?-1:R>ia?1:R>=ia?0:NaN}function p(R){return null===R?NaN:+R}function k(R){return!isNaN(R)}function a(R){return{left:function(ia,ta,Aa,Ba){3>arguments.length&&(Aa=
0);4>arguments.length&&(Ba=ia.length);for(;Aa<Ba;){var Ha=Aa+Ba>>>1;0>R(ia[Ha],ta)?Aa=Ha+1:Ba=Ha}return Aa},right:function(ia,ta,Aa,Ba){3>arguments.length&&(Aa=0);4>arguments.length&&(Ba=ia.length);for(;Aa<Ba;){var Ha=Aa+Ba>>>1;0<R(ia[Ha],ta)?Ba=Ha:Aa=Ha+1}return Aa}}}function e(R){return R.length}function f(R,ia){for(var ta in ia)Object.defineProperty(R.prototype,ta,{value:ia[ta],enumerable:!1})}function l(){this._=Object.create(null)}function m(R){return"__proto__"===(R+="")||"\x00"===R[0]?"\x00"+
R:R}function c(R){return"\x00"===(R+="")[0]?R.slice(1):R}function d(R){return m(R)in this._}function g(R){return(R=m(R))in this._&&delete this._[R]}function h(){var R=[],ia;for(ia in this._)R.push(c(ia));return R}function q(){var R=0,ia;for(ia in this._)++R;return R}function t(){for(var R in this._)return!1;return!0}function v(){this._=Object.create(null)}function w(R){return R}function A(R,ia,ta){return function(){var Aa=ta.apply(ia,arguments);return Aa===ia?R:Aa}}function z(R,ia){if(ia in R)return ia;
ia=ia.charAt(0).toUpperCase()+ia.slice(1);for(var ta=0,Aa=Ah.length;ta<Aa;++ta){var Ba=Ah[ta]+ia;if(Ba in R)return Ba}}function y(){}function B(){}function C(R){function ia(){for(var Ba=ta,Ha=-1,Ua=Ba.length,Oa;++Ha<Ua;)(Oa=Ba[Ha].on)&&Oa.apply(this,arguments);return R}var ta=[],Aa=new l;ia.on=function(Ba,Ha){var Ua=Aa.get(Ba),Oa;if(2>arguments.length)return Ua&&Ua.on;Ua&&(Ua.on=null,ta=ta.slice(0,Oa=ta.indexOf(Ua)).concat(ta.slice(Oa+1)),Aa.remove(Ba));Ha&&ta.push(Aa.set(Ba,{on:Ha}));return R};return ia}
function u(){Kb.event.preventDefault()}function F(){for(var R=Kb.event,ia;ia=R.sourceEvent;)R=ia;return R}function H(R){for(var ia=new B,ta=0,Aa=arguments.length;++ta<Aa;)ia[arguments[ta]]=C(ia);ia.of=function(Ba,Ha){return function(Ua){try{var Oa=Ua.sourceEvent=Kb.event;Ua.target=R;Kb.event=Ua;ia[Ua.type].apply(Ba,Ha)}finally{Kb.event=Oa}}};return ia}function J(R){Ig(R,He);return R}function I(R){return"function"===typeof R?R:function(){return rk(R,this)}}function M(R){return"function"===typeof R?
R:function(){return sk(R,this)}}function E(R,ia){function ta(){this.removeAttribute(R)}function Aa(){this.removeAttributeNS(R.space,R.local)}function Ba(){this.setAttribute(R,ia)}function Ha(){this.setAttributeNS(R.space,R.local,ia)}function Ua(){var Sa=ia.apply(this,arguments);null==Sa?this.removeAttribute(R):this.setAttribute(R,Sa)}function Oa(){var Sa=ia.apply(this,arguments);null==Sa?this.removeAttributeNS(R.space,R.local):this.setAttributeNS(R.space,R.local,Sa)}R=Kb.ns.qualify(R);return null==
ia?R.local?Aa:ta:"function"===typeof ia?R.local?Oa:Ua:R.local?Ha:Ba}function L(R){return new RegExp("(?:^|\\s+)"+Kb.requote(R)+"(?:\\s+|$)","g")}function P(R,ia){function ta(){for(var Ha=-1;++Ha<Ba;)R[Ha](this,ia)}function Aa(){for(var Ha=-1,Ua=ia.apply(this,arguments);++Ha<Ba;)R[Ha](this,Ua)}R=(R+"").trim().split(/^|\s+/).map(N);var Ba=R.length;return"function"===typeof ia?Aa:ta}function N(R){var ia=L(R);return function(ta,Aa){if(Ba=ta.classList)return Aa?Ba.add(R):Ba.remove(R);var Ba=ta.getAttribute("class")||
"";Aa?(ia.lastIndex=0,ia.test(Ba)||ta.setAttribute("class",(Ba+" "+R).trim().replace(/\s+/g," "))):ta.setAttribute("class",Ba.replace(ia," ").trim().replace(/\s+/g," "))}}function Q(R,ia,ta){function Aa(){this.style.removeProperty(R)}function Ba(){this.style.setProperty(R,ia,ta)}function Ha(){var Ua=ia.apply(this,arguments);null==Ua?this.style.removeProperty(R):this.style.setProperty(R,Ua,ta)}return null==ia?Aa:"function"===typeof ia?Ha:Ba}function O(R,ia){function ta(){delete this[R]}function Aa(){this[R]=
ia}function Ba(){var Ha=ia.apply(this,arguments);null==Ha?delete this[R]:this[R]=Ha}return null==ia?ta:"function"===typeof ia?Ba:Aa}function T(R){function ia(){var Aa=this.ownerDocument,Ba=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===Ba&&"http://www.w3.org/1999/xhtml"===Aa.documentElement.namespaceURI?Aa.createElement(R):Aa.createElementNS(Ba,R)}function ta(){return this.ownerDocument.createElementNS(R.space,R.local)}return"function"===typeof R?R:(R=Kb.ns.qualify(R)).local?ta:ia}function V(){var R=
this.parentNode;R&&R.removeChild(this)}function Z(R){return function(){return Lj(this,R)}}function aa(R){arguments.length||(R=n);return function(ia,ta){return ia&&ta?R(ia.__data__,ta.__data__):!ia-!ta}}function Y(R,ia){for(var ta=0,Aa=R.length;ta<Aa;ta++)for(var Ba=R[ta],Ha=0,Ua=Ba.length,Oa;Ha<Ua;Ha++)(Oa=Ba[Ha])&&ia(Oa,Ha,ta);return R}function ea(R){Ig(R,hh);return R}function ca(R){var ia,ta;return function(Aa,Ba,Ha){Aa=R[Ha].update;var Ua=Aa.length;Ha!=ta&&(ta=Ha,ia=0);for(Ba>=ia&&(ia=Ba+1);!(Ba=
Aa[ia])&&++ia<Ua;);return Ba}}function ba(R,ia,ta){function Aa(){var ib=this[Ua];ib&&(this.removeEventListener(R,ib,ib.$),delete this[Ua])}function Ba(){var ib=Sa(ia,dg(arguments));Aa.call(this);this.addEventListener(R,this[Ua]=ib,ib.$=ta);ib._=ia}function Ha(){var ib=new RegExp("^__on([^.]+)"+Kb.requote(R)+"$"),wb,Eb;for(Eb in this)if(wb=Eb.match(ib)){var Lb=this[Eb];this.removeEventListener(wb[1],Lb,Lb.$);delete this[Eb]}}var Ua="__on"+R,Oa=R.indexOf("."),Sa=ka;0<Oa&&(R=R.slice(0,Oa));var cb=ih.get(R);
cb&&(R=cb,Sa=qa);return Oa?ia?Ba:Aa:ia?y:Ha}function ka(R,ia){return function(ta){var Aa=Kb.event;Kb.event=ta;ia[0]=this.__data__;try{R.apply(this,ia)}finally{Kb.event=Aa}}}function qa(R,ia){var ta=ka(R,ia);return function(Aa){var Ba=Aa.relatedTarget;Ba&&(Ba===this||Ba.compareDocumentPosition(this)&8)||ta.call(this,Aa)}}function pa(R){var ia=".dragsuppress-"+ ++Li,ta="click"+ia,Aa=Kb.select(r(R)).on("touchmove"+ia,u).on("dragstart"+ia,u).on("selectstart"+ia,u);null==lg&&(lg="onselectstart"in R?!1:
z(R.style,"userSelect"));if(lg){var Ba=(R&&(R.ownerDocument||R.document||R).documentElement).style,Ha=Ba[lg];Ba[lg]="none"}return function(Ua){Aa.on(ia,null);lg&&(Ba[lg]=Ha);if(Ua){var Oa=function(){Aa.on(ta,null)};Aa.on(ta,function(){u();Oa()},!0);setTimeout(Oa,0)}}}function oa(R,ia){ia.changedTouches&&(ia=ia.changedTouches[0]);var ta=R.ownerSVGElement||R;if(ta.createSVGPoint){var Aa=ta.createSVGPoint();if(0>fi&&(ta=r(R),ta.scrollX||ta.scrollY)){ta=Kb.select("body").append("svg").style({position:"absolute",
top:0,left:0,margin:0,padding:0,border:"none"},"important");var Ba=ta[0][0].getScreenCTM();fi=!(Ba.f||Ba.e);ta.remove()}fi?(Aa.x=ia.pageX,Aa.y=ia.pageY):(Aa.x=ia.clientX,Aa.y=ia.clientY);Aa=Aa.matrixTransform(R.getScreenCTM().inverse());return[Aa.x,Aa.y]}Aa=R.getBoundingClientRect();return[ia.clientX-Aa.left-R.clientLeft,ia.clientY-Aa.top-R.clientTop]}function ja(){return Kb.event.changedTouches[0].identifier}function ra(R,ia,ta){return(ia[0]-R[0])*(ta[1]-R[1])-(ia[1]-R[1])*(ta[0]-R[0])}function ha(R){return 1<
R?0:-1>R?fe:Math.acos(R)}function la(R){return 1<R?df:-1>R?-df:Math.asin(R)}function ua(R){return((R=Math.exp(R))+1/R)/2}function na(R){return(R=Math.sin(R/2))*R}function wa(){}function Ca(R,ia,ta){return this instanceof Ca?void(this.h=+R,this.s=+ia,this.l=+ta):2>arguments.length?R instanceof Ca?new Ca(R.h,R.s,R.l):hb(""+R,Ya,Ca):new Ca(R,ia,ta)}function Fa(R,ia,ta){function Aa(Ua){360<Ua?Ua-=360:0>Ua&&(Ua+=360);return 60>Ua?Ha+(Ba-Ha)*Ua/60:180>Ua?Ba:240>Ua?Ha+(Ba-Ha)*(240-Ua)/60:Ha}R=isNaN(R)?0:
0>(R%=360)?R+360:R;ia=isNaN(ia)?0:0>ia?0:1<ia?1:ia;ta=0>ta?0:1<ta?1:ta;var Ba=.5>=ta?ta*(1+ia):ta+ia-ta*ia;var Ha=2*ta-Ba;return new Ia(Math.round(255*Aa(R+120)),Math.round(255*Aa(R)),Math.round(255*Aa(R-120)))}function Xa(R,ia,ta){return this instanceof Xa?void(this.h=+R,this.c=+ia,this.l=+ta):2>arguments.length?R instanceof Xa?new Xa(R.h,R.c,R.l):R instanceof gb?La(R.l,R.a,R.b):La((R=Ga((R=Kb.rgb(R)).r,R.g,R.b)).l,R.a,R.b):new Xa(R,ia,ta)}function ab(R,ia,ta){isNaN(R)&&(R=0);isNaN(ia)&&(ia=0);return new gb(ta,
Math.cos(R*=ke)*ia,Math.sin(R)*ia)}function gb(R,ia,ta){return this instanceof gb?void(this.l=+R,this.a=+ia,this.b=+ta):2>arguments.length?R instanceof gb?new gb(R.l,R.a,R.b):R instanceof Xa?ab(R.h,R.c,R.l):Ga((R=Ia(R)).r,R.g,R.b):new gb(R,ia,ta)}function bb(R,ia,ta){R=(R+16)/116;ta=R-ta/200;ia=kb(R+ia/500)*Mj;R=kb(R)*Pd;ta=kb(ta)*Nj;return new Ia(ya(3.2404542*ia-1.5371385*R-.4985314*ta),ya(-.969266*ia+1.8760108*R+.041556*ta),ya(.0556434*ia-.2040259*R+1.0572252*ta))}function La(R,ia,ta){return 0<
R?new Xa(Math.atan2(ta,ia)*We,Math.sqrt(ia*ia+ta*ta),R):new Xa(NaN,NaN,R)}function kb(R){return.206893034<R?R*R*R:(R-4/29)/7.787037}function mb(R){return.008856<R?Math.pow(R,1/3):7.787037*R+4/29}function ya(R){return Math.round(255*(.00304>=R?12.92*R:1.055*Math.pow(R,1/2.4)-.055))}function Ia(R,ia,ta){return this instanceof Ia?void(this.r=~~R,this.g=~~ia,this.b=~~ta):2>arguments.length?R instanceof Ia?new Ia(R.r,R.g,R.b):hb(""+R,Ia,Fa):new Ia(R,ia,ta)}function Na(R){return new Ia(R>>16,R>>8&255,R&
255)+""}function Ta(R){return 16>R?"0"+Math.max(0,R).toString(16):Math.min(255,R).toString(16)}function hb(R,ia,ta){var Aa=0,Ba=0,Ha=0,Ua;if(Ua=/([a-z]+)\((.*)\)/.exec(R=R.toLowerCase())){var Oa=Ua[2].split(",");switch(Ua[1]){case "hsl":return ta(parseFloat(Oa[0]),parseFloat(Oa[1])/100,parseFloat(Oa[2])/100);case "rgb":return ia(Va(Oa[0]),Va(Oa[1]),Va(Oa[2]))}}if(ta=ij.get(R))return ia(ta.r,ta.g,ta.b);null==R||"#"!==R.charAt(0)||isNaN(ta=parseInt(R.slice(1),16))||(4===R.length?(Aa=(ta&3840)>>4,Aa|=
Aa>>4,Ba=ta&240,Ba|=Ba>>4,Ha=ta&15,Ha|=Ha<<4):7===R.length&&(Aa=(ta&16711680)>>16,Ba=(ta&65280)>>8,Ha=ta&255));return ia(Aa,Ba,Ha)}function Ya(R,ia,ta){var Aa=Math.min(R/=255,ia/=255,ta/=255),Ba=Math.max(R,ia,ta),Ha=Ba-Aa,Ua=(Ba+Aa)/2;Ha?(Aa=.5>Ua?Ha/(Ba+Aa):Ha/(2-Ba-Aa),R=60*(R==Ba?(ia-ta)/Ha+(ia<ta?6:0):ia==Ba?(ta-R)/Ha+2:(R-ia)/Ha+4)):(R=NaN,Aa=0<Ua&&1>Ua?0:R);return new Ca(R,Aa,Ua)}function Ga(R,ia,ta){R=Pa(R);ia=Pa(ia);ta=Pa(ta);var Aa=mb((.4124564*R+.3575761*ia+.1804375*ta)/Mj),Ba=mb((.2126729*
R+.7151522*ia+.072175*ta)/Pd);R=mb((.0193339*R+.119192*ia+.9503041*ta)/Nj);return gb(116*Ba-16,500*(Aa-Ba),200*(Ba-R))}function Pa(R){return.04045>=(R/=255)?R/12.92:Math.pow((R+.055)/1.055,2.4)}function Va(R){var ia=parseFloat(R);return"%"===R.charAt(R.length-1)?Math.round(2.55*ia):ia}function va(R){return"function"===typeof R?R:function(){return R}}function Ea(R){return function(ia,ta,Aa){2===arguments.length&&"function"===typeof ta&&(Aa=ta,ta=null);return Qa(ia,ta,R,Aa)}}function Qa(R,ia,ta,Aa){function Ba(){var ib=
Sa.status,wb;if(wb=!ib)wb=(wb=Sa.responseType)&&"text"!==wb?Sa.response:Sa.responseText;if(wb||200<=ib&&300>ib||304===ib){try{var Eb=ta.call(Ha,Sa)}catch(Lb){Ua.error.call(Ha,Lb);return}Ua.load.call(Ha,Eb)}else Ua.error.call(Ha,Sa)}var Ha={},Ua=Kb.dispatch("beforesend","progress","load","error"),Oa={},Sa=new XMLHttpRequest,cb=null;!this.XDomainRequest||"withCredentials"in Sa||!/^(http(s)?:)?\/\//.test(R)||(Sa=new XDomainRequest);"onload"in Sa?Sa.onload=Sa.onerror=Ba:Sa.onreadystatechange=function(){3<
Sa.readyState&&Ba()};Sa.onprogress=function(ib){var wb=Kb.event;Kb.event=ib;try{Ua.progress.call(Ha,Sa)}finally{Kb.event=wb}};Ha.header=function(ib,wb){ib=(ib+"").toLowerCase();if(2>arguments.length)return Oa[ib];null==wb?delete Oa[ib]:Oa[ib]=wb+"";return Ha};Ha.mimeType=function(ib){if(!arguments.length)return ia;ia=null==ib?null:ib+"";return Ha};Ha.responseType=function(ib){if(!arguments.length)return cb;cb=ib;return Ha};Ha.response=function(ib){ta=ib;return Ha};["get","post"].forEach(function(ib){Ha[ib]=
function(){return Ha.send.apply(Ha,[ib].concat(dg(arguments)))}});Ha.send=function(ib,wb,Eb){2===arguments.length&&"function"===typeof wb&&(Eb=wb,wb=null);Sa.open(ib,R,!0);null==ia||"accept"in Oa||(Oa.accept=ia+",*/*");if(Sa.setRequestHeader)for(var Lb in Oa)Sa.setRequestHeader(Lb,Oa[Lb]);null!=ia&&Sa.overrideMimeType&&Sa.overrideMimeType(ia);null!=cb&&(Sa.responseType=cb);if(null!=Eb)Ha.on("error",Eb).on("load",function(Mb){Eb(null,Mb)});Ua.beforesend.call(Ha,Sa);Sa.send(null==wb?null:wb);return Ha};
Ha.abort=function(){Sa.abort();return Ha};Kb.rebind(Ha,Ua,"on");return null==Aa?Ha:Ha.get($a(Aa))}function $a(R){return 1===R.length?function(ia,ta){R(null==ia?ta:null)}:R}function eb(R,ia,ta){var Aa=arguments.length;2>Aa&&(ia=0);3>Aa&&(ta=Date.now());Aa={c:R,t:ta+ia,n:null};jj?jj.n=Aa:Mi=Aa;jj=Aa;Nf||(Oe=clearTimeout(Oe),Nf=1,gi(pb));return Aa}function pb(){var R=Za();R=nb()-R;24<R?(isFinite(R)&&(clearTimeout(Oe),Oe=setTimeout(pb,R)),Nf=0):(Nf=1,gi(pb))}function Za(){for(var R=Date.now(),ia=Mi;ia;)R>=
ia.t&&ia.c(R-ia.t)&&(ia.c=null),ia=ia.n;return R}function nb(){for(var R,ia=Mi,ta=Infinity;ia;)ia.c?(ia.t<ta&&(ta=ia.t),ia=(R=ia).n):ia=R?R.n=ia.n:Mi=ia.n;jj=R;return ta}function sb(R,ia){return ia-(R?Math.ceil(Math.log(R)/Math.LN10):1)}function Cb(R){var ia=R.decimal,ta=R.thousands,Aa=R.grouping,Ba=R.currency,Ha=Aa&&ta?function(Ua,Oa){for(var Sa=Ua.length,cb=[],ib=0,wb=Aa[0],Eb=0;0<Sa&&0<wb;){Eb+wb+1>Oa&&(wb=Math.max(1,Oa-Eb));cb.push(Ua.substring(Sa-=wb,Sa+wb));if((Eb+=wb+1)>Oa)break;wb=Aa[ib=(ib+
1)%Aa.length]}return cb.reverse().join(ta)}:w;return function(Ua){Ua=Rg.exec(Ua);var Oa=Ua[1]||" ",Sa=Ua[2]||"\x3e",cb=Ua[3]||"-",ib=Ua[4]||"",wb=Ua[5],Eb=+Ua[6],Lb=Ua[7],Mb=Ua[8],Zb=Ua[9],cc=1,nc="",Hc="",Rc=!1,Tc=!0;Mb&&(Mb=+Mb.substring(1));if(wb||"0"===Oa&&"\x3d"===Sa)wb=Oa="0",Sa="\x3d";switch(Zb){case "n":Lb=!0;Zb="g";break;case "%":cc=100;Hc="%";Zb="f";break;case "p":cc=100;Hc="%";Zb="r";break;case "b":case "o":case "x":case "X":"#"===ib&&(nc="0"+Zb.toLowerCase());case "c":Tc=!1;case "d":Rc=
!0;Mb=0;break;case "s":cc=-1,Zb="r"}"$"===ib&&(nc=Ba[0],Hc=Ba[1]);"r"!=Zb||Mb||(Zb="g");if(null!=Mb)if("g"==Zb)Mb=Math.max(1,Math.min(21,Mb));else if("e"==Zb||"f"==Zb)Mb=Math.max(0,Math.min(20,Mb));Zb=tk.get(Zb)||Ib;var Xc=wb&&Lb;return function(Vb){var gc=Hc;if(Rc&&Vb%1)return"";var Jc=0>Vb||0===Vb&&0>1/Vb?(Vb=-Vb,"-"):"-"===cb?"":cb;0>cc?(gc=Kb.formatPrefix(Vb,Mb),Vb=gc.scale(Vb),gc=gc.symbol+Hc):Vb*=cc;Vb=Zb(Vb,Mb);var fd=Vb.lastIndexOf(".");if(0>fd)if(fd=Tc?Vb.lastIndexOf("e"):-1,0>fd){var hd=
Vb;Vb=""}else hd=Vb.substring(0,fd),Vb=Vb.substring(fd);else hd=Vb.substring(0,fd),Vb=ia+Vb.substring(fd+1);!wb&&Lb&&(hd=Ha(hd,Infinity));fd=nc.length+hd.length+Vb.length+(Xc?0:Jc.length);var id=fd<Eb?Array(fd=Eb-fd+1).join(Oa):"";Xc&&(hd=Ha(id+hd,id.length?Eb-Vb.length:Infinity));Jc+=nc;Vb=hd+Vb;return("\x3c"===Sa?Jc+Vb+id:"\x3e"===Sa?id+Jc+Vb:"^"===Sa?id.substring(0,fd>>=1)+Jc+Vb+id.substring(fd):Jc+(Xc?Vb:id+Vb))+gc}}}function Ib(R){return R+""}function fc(){this._=new Date(1<arguments.length?
Date.UTC.apply(this,arguments):arguments[0])}function qc(R,ia,ta){function Aa(Sa){var cb=R(Sa),ib=Ha(cb,1);return Sa-cb<ib-Sa?cb:ib}function Ba(Sa){ia(Sa=R(new mf(Sa-1)),1);return Sa}function Ha(Sa,cb){ia(Sa=new mf(+Sa),cb);return Sa}function Ua(Sa,cb,ib){Sa=Ba(Sa);var wb=[];if(1<ib)for(;Sa<cb;)ta(Sa)%ib||wb.push(new Date(+Sa)),ia(Sa,1);else for(;Sa<cb;)wb.push(new Date(+Sa)),ia(Sa,1);return wb}R.floor=R;R.round=Aa;R.ceil=Ba;R.offset=Ha;R.range=Ua;var Oa=R.utc=Cc(R);Oa.floor=Oa;Oa.round=Cc(Aa);Oa.ceil=
Cc(Ba);Oa.offset=Cc(Ha);Oa.range=function(Sa,cb,ib){try{mf=fc;var wb=new fc;wb._=Sa;return Ua(wb,cb,ib)}finally{mf=Date}};return R}function Cc(R){return function(ia,ta){try{mf=fc;var Aa=new fc;Aa._=ia;return R(Aa,ta)._}finally{mf=Date}}}function cd(R){function ia(Vb){function gc(fd){for(var hd=[],id=-1,ad=0,Md,$d;++id<Jc;)if(37===Vb.charCodeAt(id)){hd.push(Vb.slice(ad,id));null!=(Md=Ni[ad=Vb.charAt(++id)])&&(ad=Vb.charAt(++id));if($d=Tc[ad])ad=$d(fd,null==Md?"e"===ad?" ":"0":Md);hd.push(ad);ad=id+
1}hd.push(Vb.slice(ad,id));return hd.join("")}var Jc=Vb.length;gc.parse=function(fd){var hd={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(ta(hd,Vb,fd,0)!=fd.length)return null;"p"in hd&&(hd.H=hd.H%12+12*hd.p);fd=null!=hd.Z&&mf!==fc;var id=new (fd?fc:mf);"j"in hd?id.setFullYear(hd.y,0,hd.j):"W"in hd||"U"in hd?("w"in hd||(hd.w="W"in hd?1:0),id.setFullYear(hd.y,0,1),id.setFullYear(hd.y,0,"W"in hd?(hd.w+6)%7+7*hd.W-(id.getDay()+5)%7:hd.w+7*hd.U-(id.getDay()+6)%7)):id.setFullYear(hd.y,hd.m,hd.d);id.setHours(hd.H+
(hd.Z/100|0),hd.M+hd.Z%100,hd.S,hd.L);return fd?id._:id};gc.toString=function(){return Vb};return gc}function ta(Vb,gc,Jc,fd){for(var hd,id=0,ad=gc.length,Md=Jc.length;id<ad;){if(fd>=Md)return-1;hd=gc.charCodeAt(id++);if(37===hd){if(hd=gc.charAt(id++),hd=Xc[hd in Ni?gc.charAt(id++):hd],!hd||0>(fd=hd(Vb,Jc,fd)))return-1}else if(hd!=Jc.charCodeAt(fd++))return-1}return fd}var Aa=R.dateTime,Ba=R.date,Ha=R.time,Ua=R.periods,Oa=R.days,Sa=R.shortDays,cb=R.months,ib=R.shortMonths;ia.utc=function(Vb){function gc(fd){try{mf=
fc;var hd=new mf;hd._=fd;return Jc(hd)}finally{mf=Date}}var Jc=ia(Vb);gc.parse=function(fd){try{mf=fc;var hd=Jc.parse(fd);return hd&&hd._}finally{mf=Date}};gc.toString=Jc.toString;return gc};ia.multi=ia.utc.multi=qb;var wb=Kb.map(),Eb=Wc(Oa),Lb=Fc(Oa),Mb=Wc(Sa),Zb=Fc(Sa),cc=Wc(cb),nc=Fc(cb),Hc=Wc(ib),Rc=Fc(ib);Ua.forEach(function(Vb,gc){wb.set(Vb.toLowerCase(),gc)});var Tc={a:function(Vb){return Sa[Vb.getDay()]},A:function(Vb){return Oa[Vb.getDay()]},b:function(Vb){return ib[Vb.getMonth()]},B:function(Vb){return cb[Vb.getMonth()]},
c:ia(Aa),d:function(Vb,gc){return Qc(Vb.getDate(),gc,2)},e:function(Vb,gc){return Qc(Vb.getDate(),gc,2)},H:function(Vb,gc){return Qc(Vb.getHours(),gc,2)},I:function(Vb,gc){return Qc(Vb.getHours()%12||12,gc,2)},j:function(Vb,gc){return Qc(1+Qd.dayOfYear(Vb),gc,3)},L:function(Vb,gc){return Qc(Vb.getMilliseconds(),gc,3)},m:function(Vb,gc){return Qc(Vb.getMonth()+1,gc,2)},M:function(Vb,gc){return Qc(Vb.getMinutes(),gc,2)},p:function(Vb){return Ua[+(12<=Vb.getHours())]},S:function(Vb,gc){return Qc(Vb.getSeconds(),
gc,2)},U:function(Vb,gc){return Qc(Qd.sundayOfYear(Vb),gc,2)},w:function(Vb){return Vb.getDay()},W:function(Vb,gc){return Qc(Qd.mondayOfYear(Vb),gc,2)},x:ia(Ba),X:ia(Ha),y:function(Vb,gc){return Qc(Vb.getFullYear()%100,gc,2)},Y:function(Vb,gc){return Qc(Vb.getFullYear()%1E4,gc,4)},Z:Ub,"%":function(){return"%"}},Xc={a:function(Vb,gc,Jc){Mb.lastIndex=0;return(gc=Mb.exec(gc.slice(Jc)))?(Vb.w=Zb.get(gc[0].toLowerCase()),Jc+gc[0].length):-1},A:function(Vb,gc,Jc){Eb.lastIndex=0;return(gc=Eb.exec(gc.slice(Jc)))?
(Vb.w=Lb.get(gc[0].toLowerCase()),Jc+gc[0].length):-1},b:function(Vb,gc,Jc){Hc.lastIndex=0;return(gc=Hc.exec(gc.slice(Jc)))?(Vb.m=Rc.get(gc[0].toLowerCase()),Jc+gc[0].length):-1},B:function(Vb,gc,Jc){cc.lastIndex=0;return(gc=cc.exec(gc.slice(Jc)))?(Vb.m=nc.get(gc[0].toLowerCase()),Jc+gc[0].length):-1},c:function(Vb,gc,Jc){return ta(Vb,Tc.c.toString(),gc,Jc)},d:ob,e:ob,H:$b,I:$b,j:tb,L:Rb,m:ic,M:lc,p:function(Vb,gc,Jc){gc=wb.get(gc.slice(Jc,Jc+=2).toLowerCase());return null==gc?-1:(Vb.p=gc,Jc)},S:yc,
U:yb,w:ld,W:Wb,x:function(Vb,gc,Jc){return ta(Vb,Tc.x.toString(),gc,Jc)},X:function(Vb,gc,Jc){return ta(Vb,Tc.X.toString(),gc,Jc)},y:ec,Y:Dc,Z:kc,"%":zb};return ia}function Qc(R,ia,ta){var Aa=0>R?"-":"";R=(Aa?-R:R)+"";var Ba=R.length;return Aa+(Ba<ta?Array(ta-Ba+1).join(ia)+R:R)}function Wc(R){return new RegExp("^(?:"+R.map(Kb.requote).join("|")+")","i")}function Fc(R){for(var ia=new l,ta=-1,Aa=R.length;++ta<Aa;)ia.set(R[ta].toLowerCase(),ta);return ia}function ld(R,ia,ta){Ld.lastIndex=0;return(ia=
Ld.exec(ia.slice(ta,ta+1)))?(R.w=+ia[0],ta+ia[0].length):-1}function yb(R,ia,ta){Ld.lastIndex=0;return(ia=Ld.exec(ia.slice(ta)))?(R.U=+ia[0],ta+ia[0].length):-1}function Wb(R,ia,ta){Ld.lastIndex=0;return(ia=Ld.exec(ia.slice(ta)))?(R.W=+ia[0],ta+ia[0].length):-1}function Dc(R,ia,ta){Ld.lastIndex=0;return(ia=Ld.exec(ia.slice(ta,ta+4)))?(R.y=+ia[0],ta+ia[0].length):-1}function ec(R,ia,ta){Ld.lastIndex=0;if(ia=Ld.exec(ia.slice(ta,ta+2))){var Aa=+ia[0];R=(R.y=Aa+(68<Aa?1900:2E3),ta+ia[0].length)}else R=
-1;return R}function kc(R,ia,ta){return/^[+-]\d{4}$/.test(ia=ia.slice(ta,ta+5))?(R.Z=-ia,ta+5):-1}function ic(R,ia,ta){Ld.lastIndex=0;return(ia=Ld.exec(ia.slice(ta,ta+2)))?(R.m=ia[0]-1,ta+ia[0].length):-1}function ob(R,ia,ta){Ld.lastIndex=0;return(ia=Ld.exec(ia.slice(ta,ta+2)))?(R.d=+ia[0],ta+ia[0].length):-1}function tb(R,ia,ta){Ld.lastIndex=0;return(ia=Ld.exec(ia.slice(ta,ta+3)))?(R.j=+ia[0],ta+ia[0].length):-1}function $b(R,ia,ta){Ld.lastIndex=0;return(ia=Ld.exec(ia.slice(ta,ta+2)))?(R.H=+ia[0],
ta+ia[0].length):-1}function lc(R,ia,ta){Ld.lastIndex=0;return(ia=Ld.exec(ia.slice(ta,ta+2)))?(R.M=+ia[0],ta+ia[0].length):-1}function yc(R,ia,ta){Ld.lastIndex=0;return(ia=Ld.exec(ia.slice(ta,ta+2)))?(R.S=+ia[0],ta+ia[0].length):-1}function Rb(R,ia,ta){Ld.lastIndex=0;return(ia=Ld.exec(ia.slice(ta,ta+3)))?(R.L=+ia[0],ta+ia[0].length):-1}function Ub(R){var ia=R.getTimezoneOffset();R=0<ia?"-":"+";var ta=de(ia)/60|0;ia=de(ia)%60;return R+Qc(ta,"0",2)+Qc(ia,"0",2)}function zb(R,ia,ta){ge.lastIndex=0;return(R=
ge.exec(ia.slice(ta,ta+1)))?ta+R[0].length:-1}function qb(R){for(var ia=R.length,ta=-1;++ta<ia;)R[ta][0]=this(R[ta][0]);return function(Aa){for(var Ba=0,Ha=R[Ba];!Ha[1](Aa);)Ha=R[++Ba];return Ha[0](Aa)}}function vb(){}function Db(R,ia,ta){var Aa=ta.s=R+ia,Ba=Aa-R;ta.t=R-(Aa-Ba)+(ia-Ba)}function Qb(R,ia){if(R&&Uf.hasOwnProperty(R.type))Uf[R.type](R,ia)}function wc(R,ia,ta){var Aa=-1;ta=R.length-ta;for(ia.lineStart();++Aa<ta;){var Ba=R[Aa];ia.point(Ba[0],Ba[1],Ba[2])}ia.lineEnd()}function dc(R,ia){var ta=
-1,Aa=R.length;for(ia.polygonStart();++ta<Aa;)wc(R[ta],ia,1);ia.polygonEnd()}function xc(){function R(Ua,Oa){Ua*=ke;Oa=Oa*ke/2+fe/4;var Sa=Ua-Aa,cb=0<=Sa?1:-1;Sa*=cb;var ib=Math.cos(Oa);Oa=Math.sin(Oa);var wb=Ha*Oa;hi.add(Math.atan2(wb*cb*Math.sin(Sa),Ba*ib+wb*Math.cos(Sa)));Aa=Ua;Ba=ib;Ha=Oa}var ia,ta,Aa,Ba,Ha;Of.point=function(Ua,Oa){Of.point=R;Aa=(ia=Ua)*ke;Ba=Math.cos(Oa=(ta=Oa)*ke/2+fe/4);Ha=Math.sin(Oa)};Of.lineEnd=function(){R(ia,ta)}}function Nc(R){var ia=R[0];R=R[1];var ta=Math.cos(R);return[ta*
Math.cos(ia),ta*Math.sin(ia),Math.sin(R)]}function Lc(R,ia){return R[0]*ia[0]+R[1]*ia[1]+R[2]*ia[2]}function $c(R,ia){return[R[1]*ia[2]-R[2]*ia[1],R[2]*ia[0]-R[0]*ia[2],R[0]*ia[1]-R[1]*ia[0]]}function od(R,ia){R[0]+=ia[0];R[1]+=ia[1];R[2]+=ia[2]}function Zc(R,ia){return[R[0]*ia,R[1]*ia,R[2]*ia]}function rd(R){var ia=Math.sqrt(R[0]*R[0]+R[1]*R[1]+R[2]*R[2]);R[0]/=ia;R[1]/=ia;R[2]/=ia}function Dd(R){return[Math.atan2(R[1],R[0]),la(R[2])]}function ed(R,ia){return 1E-6>de(R[0]-ia[0])&&1E-6>de(R[1]-ia[1])}
function Mc(R,ia){R*=ke;var ta=Math.cos(ia*=ke);sd(ta*Math.cos(R),ta*Math.sin(R),Math.sin(ia))}function sd(R,ia,ta){++Ie;jh+=(R-jh)/Ie;kh+=(ia-kh)/Ie;Jg+=(ta-Jg)/Ie}function yd(){function R(Ba,Ha){Ba*=ke;var Ua=Math.cos(Ha*=ke),Oa=Ua*Math.cos(Ba);Ba=Ua*Math.sin(Ba);Ha=Math.sin(Ha);var Sa=Math.atan2(Math.sqrt((Sa=ta*Ha-Aa*Ba)*Sa+(Sa=Aa*Oa-ia*Ha)*Sa+(Sa=ia*Ba-ta*Oa)*Sa),ia*Oa+ta*Ba+Aa*Ha);Bh+=Sa;Vf+=Sa*(ia+(ia=Oa));Sg+=Sa*(ta+(ta=Ba));yg+=Sa*(Aa+(Aa=Ha));sd(ia,ta,Aa)}var ia,ta,Aa;mg.point=function(Ba,
Ha){Ba*=ke;var Ua=Math.cos(Ha*=ke);ia=Ua*Math.cos(Ba);ta=Ua*Math.sin(Ba);Aa=Math.sin(Ha);mg.point=R;sd(ia,ta,Aa)}}function Fd(){mg.point=Mc}function xe(){function R(Ua,Oa){Ua*=ke;var Sa=Math.cos(Oa*=ke),cb=Sa*Math.cos(Ua);Ua=Sa*Math.sin(Ua);Oa=Math.sin(Oa);Sa=Ba*Oa-Ha*Ua;var ib=Ha*cb-Aa*Oa,wb=Aa*Ua-Ba*cb,Eb=Math.sqrt(Sa*Sa+ib*ib+wb*wb),Lb=Aa*cb+Ba*Ua+Ha*Oa,Mb=Eb&&-ha(Lb)/Eb;Eb=Math.atan2(Eb,Lb);Ch+=Mb*Sa;Dh+=Mb*ib;Kg+=Mb*wb;Bh+=Eb;Vf+=Eb*(Aa+(Aa=cb));Sg+=Eb*(Ba+(Ba=Ua));yg+=Eb*(Ha+(Ha=Oa));sd(Aa,
Ba,Ha)}var ia,ta,Aa,Ba,Ha;mg.point=function(Ua,Oa){ia=Ua;ta=Oa;mg.point=R;Ua*=ke;var Sa=Math.cos(Oa*=ke);Aa=Sa*Math.cos(Ua);Ba=Sa*Math.sin(Ua);Ha=Math.sin(Oa);sd(Aa,Ba,Ha)};mg.lineEnd=function(){R(ia,ta);mg.lineEnd=Fd;mg.point=Mc}}function Kd(R,ia){function ta(Aa,Ba){return Aa=R(Aa,Ba),ia(Aa[0],Aa[1])}R.invert&&ia.invert&&(ta.invert=function(Aa,Ba){return Aa=ia.invert(Aa,Ba),Aa&&R.invert(Aa[0],Aa[1])});return ta}function Gc(){return!0}function dd(R,ia,ta,Aa,Ba){var Ha=[],Ua=[];R.forEach(function(wb){if(!(0>=
(Eb=wb.length-1))){var Eb,Lb=wb[0],Mb=wb[Eb];if(ed(Lb,Mb)){Ba.lineStart();for(Mb=0;Mb<Eb;++Mb)Ba.point((Lb=wb[Mb])[0],Lb[1]);Ba.lineEnd()}else Eb=new Cd(Lb,wb,null,!0),Lb=new Cd(Lb,null,Eb,!1),Eb.o=Lb,Ha.push(Eb),Ua.push(Lb),Eb=new Cd(Mb,wb,null,!1),Lb=new Cd(Mb,null,Eb,!0),Eb.o=Lb,Ha.push(Eb),Ua.push(Lb)}});Ua.sort(ia);vd(Ha);vd(Ua);if(Ha.length){R=0;ia=ta;for(ta=Ua.length;R<ta;++R)Ua[R].e=ia=!ia;ia=Ha[0];for(var Oa,Sa;;){for(var cb=ia,ib=!0;cb.v;)if((cb=cb.n)===ia)return;Oa=cb.z;Ba.lineStart();
do{cb.v=cb.o.v=!0;if(cb.e){if(ib)for(R=0,ta=Oa.length;R<ta;++R)Ba.point((Sa=Oa[R])[0],Sa[1]);else Aa(cb.x,cb.n.x,1,Ba);cb=cb.n}else{if(ib)for(Oa=cb.p.z,R=Oa.length-1;0<=R;--R)Ba.point((Sa=Oa[R])[0],Sa[1]);else Aa(cb.x,cb.p.x,-1,Ba);cb=cb.p}cb=cb.o;Oa=cb.z;ib=!ib}while(!cb.v);Ba.lineEnd()}}}function vd(R){if(ia=R.length){for(var ia,ta=0,Aa=R[0],Ba;++ta<ia;)Aa.n=Ba=R[ta],Ba.p=Aa,Aa=Ba;Aa.n=Ba=R[0];Ba.p=Aa}}function Cd(R,ia,ta,Aa){this.x=R;this.z=ia;this.o=ta;this.e=Aa;this.v=!1;this.n=this.p=null}function ae(R,
ia,ta,Aa){return function(Ba,Ha){function Ua(Vb,gc){var Jc=Ba(Vb,gc);R(Vb=Jc[0],gc=Jc[1])&&Ha.point(Vb,gc)}function Oa(Vb,gc){Vb=Ba(Vb,gc);Lb.point(Vb[0],Vb[1])}function Sa(){Zb.point=Oa;Lb.lineStart()}function cb(){Zb.point=Ua;Lb.lineEnd()}function ib(Vb,gc){Xc.push([Vb,gc]);Vb=Ba(Vb,gc);Hc.point(Vb[0],Vb[1])}function wb(){Hc.lineStart();Xc=[]}function Eb(){ib(Xc[0][0],Xc[0][1]);Hc.lineEnd();var Vb=Hc.clean(),gc=nc.buffer(),Jc=gc.length;Xc.pop();Tc.push(Xc);Xc=null;if(Jc)if(Vb&1){Vb=gc[0];Jc=Vb.length-
1;gc=-1;var fd;if(0<Jc){Rc||(Ha.polygonStart(),Rc=!0);for(Ha.lineStart();++gc<Jc;)Ha.point((fd=Vb[gc])[0],fd[1]);Ha.lineEnd()}}else 1<Jc&&Vb&2&&gc.push(gc.pop().concat(gc.shift())),cc.push(gc.filter(me))}var Lb=ia(Ha),Mb=Ba.invert(Aa[0],Aa[1]),Zb={point:Ua,lineStart:Sa,lineEnd:cb,polygonStart:function(){Zb.point=ib;Zb.lineStart=wb;Zb.lineEnd=Eb;cc=[];Tc=[]},polygonEnd:function(){Zb.point=Ua;Zb.lineStart=Sa;Zb.lineEnd=cb;cc=Kb.merge(cc);var Vb=Mb;var gc=Tc;var Jc=Vb[0],fd=Vb[1],hd=[Math.sin(Jc),-Math.cos(Jc),
0],id=0,ad=0;hi.reset();for(var Md=0,$d=gc.length;Md<$d;++Md){var ie=gc[Md],ne=ie.length;if(ne){var le=ie[0],we=le[0];Vb=le[1]/2+fe/4;for(var Yd=Math.sin(Vb),Df=Math.cos(Vb),ef=1;;){ef===ne&&(ef=0);Vb=ie[ef];var ng=Vb[0],ii=Vb[1]/2+fe/4,kj=Math.sin(ii);ii=Math.cos(ii);var lh=ng-we,lj=0<=lh?1:-1,Ue=lj*lh,Le=Ue>fe;Yd*=kj;hi.add(Math.atan2(Yd*lj*Math.sin(Ue),Df*ii+Yd*Math.cos(Ue)));id+=Le?lh+lj*Ef:lh;Le^we>=Jc^ng>=Jc&&(le=$c(Nc(le),Nc(Vb)),rd(le),we=$c(hd,le),rd(we),we=(Le^0<=lh?-1:1)*la(we[2]),fd>we||
fd===we&&(le[0]||le[1]))&&(ad+=Le^0<=lh?1:-1);if(!ef++)break;we=ng;Yd=kj;Df=ii;le=Vb}}}gc=(-1E-6>id||1E-6>id&&-1E-6>hi)^ad&1;cc.length?(Rc||(Ha.polygonStart(),Rc=!0),dd(cc,Id,gc,ta,Ha)):gc&&(Rc||(Ha.polygonStart(),Rc=!0),Ha.lineStart(),ta(null,null,1,Ha),Ha.lineEnd());Rc&&(Ha.polygonEnd(),Rc=!1);cc=Tc=null},sphere:function(){Ha.polygonStart();Ha.lineStart();ta(null,null,1,Ha);Ha.lineEnd();Ha.polygonEnd()}},cc,nc=Nd(),Hc=ia(nc),Rc=!1,Tc,Xc;return Zb}}function me(R){return 1<R.length}function Nd(){var R=
[],ia;return{lineStart:function(){R.push(ia=[])},point:function(ta,Aa){ia.push([ta,Aa])},lineEnd:y,buffer:function(){var ta=R;R=[];ia=null;return ta},rejoin:function(){1<R.length&&R.push(R.pop().concat(R.shift()))}}}function Id(R,ia){return(0>(R=R.x)[0]?R[1]-df-1E-6:df-R[1])-(0>(ia=ia.x)[0]?ia[1]-df-1E-6:df-ia[1])}function qe(R){function ia(Sa,cb){return Math.cos(Sa)*Math.cos(cb)>Ba}function ta(Sa,cb,ib){var wb=Nc(Sa),Eb=Nc(cb),Lb=[1,0,0];Eb=$c(wb,Eb);var Mb=Lc(Eb,Eb);wb=Eb[0];var Zb=Mb-wb*wb;if(!Zb)return!ib&&
Sa;Mb=Ba*Mb/Zb;Zb=-Ba*wb/Zb;wb=$c(Lb,Eb);Lb=Zc(Lb,Mb);Eb=Zc(Eb,Zb);od(Lb,Eb);Eb=Lc(Lb,wb);Mb=Lc(wb,wb);Zb=Eb*Eb-Mb*(Lc(Lb,Lb)-1);if(!(0>Zb)){var cc=Math.sqrt(Zb);Zb=Zc(wb,(-Eb-cc)/Mb);od(Zb,Lb);Zb=Dd(Zb);if(!ib)return Zb;ib=Sa[0];var nc=cb[0];Sa=Sa[1];cb=cb[1];if(nc<ib){var Hc=ib;ib=nc;nc=Hc}var Rc=nc-ib,Tc=1E-6>de(Rc-fe);!Tc&&cb<Sa&&(Hc=Sa,Sa=cb,cb=Hc);if(Tc||1E-6>Rc?Tc?0<Sa+cb^Zb[1]<(1E-6>de(Zb[0]-ib)?Sa:cb):Sa<=Zb[1]&&Zb[1]<=cb:Rc>fe^(ib<=Zb[0]&&Zb[0]<=nc))return cb=Zc(wb,(-Eb+cc)/Mb),od(cb,Lb),
[Zb,Dd(cb)]}}function Aa(Sa,cb){var ib=Ha?R:fe-R,wb=0;Sa<-ib?wb|=1:Sa>ib&&(wb|=2);cb<-ib?wb|=4:cb>ib&&(wb|=8);return wb}var Ba=Math.cos(R),Ha=0<Ba,Ua=1E-6<de(Ba),Oa=pc(R,6*ke);return ae(ia,function(Sa){var cb,ib,wb,Eb,Lb;return{lineStart:function(){Eb=wb=!1;Lb=1},point:function(Mb,Zb){var cc=[Mb,Zb],nc=ia(Mb,Zb);Zb=Ha?nc?0:Aa(Mb,Zb):nc?Aa(Mb+(0>Mb?fe:-fe),Zb):0;!cb&&(Eb=wb=nc)&&Sa.lineStart();nc!==wb&&(Mb=ta(cb,cc),ed(cb,Mb)||ed(cc,Mb))&&(cc[0]+=1E-6,cc[1]+=1E-6,nc=ia(cc[0],cc[1]));if(nc!==wb)Lb=
0,nc?(Sa.lineStart(),Mb=ta(cc,cb),Sa.point(Mb[0],Mb[1])):(Mb=ta(cb,cc),Sa.point(Mb[0],Mb[1]),Sa.lineEnd()),cb=Mb;else if(Ua&&cb&&Ha^nc){var Hc;Zb&ib||!(Hc=ta(cc,cb,!0))||(Lb=0,Ha?(Sa.lineStart(),Sa.point(Hc[0][0],Hc[0][1]),Sa.point(Hc[1][0],Hc[1][1]),Sa.lineEnd()):(Sa.point(Hc[1][0],Hc[1][1]),Sa.lineEnd(),Sa.lineStart(),Sa.point(Hc[0][0],Hc[0][1])))}!nc||cb&&ed(cb,cc)||Sa.point(cc[0],cc[1]);cb=cc;wb=nc;ib=Zb},lineEnd:function(){wb&&Sa.lineEnd();cb=null},clean:function(){return Lb|(Eb&&wb)<<1}}},Oa,
Ha?[0,-R]:[-fe,R-fe])}function re(R,ia,ta,Aa){return function(Ba){var Ha=Ba.a,Ua=Ba.b,Oa=Ha.x;Ha=Ha.y;var Sa=0,cb=1,ib=Ua.x-Oa;Ua=Ua.y-Ha;var wb=R-Oa;if(ib||!(0<wb)){wb/=ib;if(0>ib){if(wb<Sa)return;wb<cb&&(cb=wb)}else if(0<ib){if(wb>cb)return;wb>Sa&&(Sa=wb)}wb=ta-Oa;if(ib||!(0>wb)){wb/=ib;if(0>ib){if(wb>cb)return;wb>Sa&&(Sa=wb)}else if(0<ib){if(wb<Sa)return;wb<cb&&(cb=wb)}wb=ia-Ha;if(Ua||!(0<wb)){wb/=Ua;if(0>Ua){if(wb<Sa)return;wb<cb&&(cb=wb)}else if(0<Ua){if(wb>cb)return;wb>Sa&&(Sa=wb)}wb=Aa-Ha;
if(Ua||!(0>wb)){wb/=Ua;if(0>Ua){if(wb>cb)return;wb>Sa&&(Sa=wb)}else if(0<Ua){if(wb<Sa)return;wb<cb&&(cb=wb)}0<Sa&&(Ba.a={x:Oa+Sa*ib,y:Ha+Sa*Ua});1>cb&&(Ba.b={x:Oa+cb*ib,y:Ha+cb*Ua});return Ba}}}}}}function ve(R,ia,ta,Aa){function Ba(Oa,Sa){return 1E-6>de(Oa[0]-R)?0<Sa?0:3:1E-6>de(Oa[0]-ta)?0<Sa?2:1:1E-6>de(Oa[1]-ia)?0<Sa?1:0:0<Sa?3:2}function Ha(Oa,Sa){return Ua(Oa.x,Sa.x)}function Ua(Oa,Sa){var cb=Ba(Oa,1),ib=Ba(Sa,1);return cb!==ib?cb-ib:0===cb?Sa[1]-Oa[1]:1===cb?Oa[0]-Sa[0]:2===cb?Oa[1]-Sa[1]:
Sa[0]-Oa[0]}return function(Oa){function Sa(hd,id,ad,Md){var $d=0,ie=0;if(null==hd||($d=Ba(hd,ad))!==(ie=Ba(id,ad))||0>Ua(hd,id)^0<ad){do Md.point(0===$d||3===$d?R:ta,1<$d?Aa:ia);while(($d=($d+ad+4)%4)!==ie)}else Md.point(id[0],id[1])}function cb(hd,id){R<=hd&&hd<=ta&&ia<=id&&id<=Aa&&Oa.point(hd,id)}function ib(hd,id){hd=Math.max(-1E9,Math.min(1E9,hd));id=Math.max(-1E9,Math.min(1E9,id));var ad=R<=hd&&hd<=ta&&ia<=id&&id<=Aa;Zb&&cc.push([hd,id]);if(Jc)Hc=hd,Rc=id,Tc=ad,Jc=!1,ad&&(Oa.lineStart(),Oa.point(hd,
id));else if(ad&&gc)Oa.point(hd,id);else{var Md={a:{x:Xc,y:Vb},b:{x:hd,y:id}};Lb(Md)?(gc||(Oa.lineStart(),Oa.point(Md.a.x,Md.a.y)),Oa.point(Md.b.x,Md.b.y),ad||Oa.lineEnd(),fd=!1):ad&&(Oa.lineStart(),Oa.point(hd,id),fd=!1)}Xc=hd;Vb=id;gc=ad}var wb=Oa,Eb=Nd(),Lb=re(R,ia,ta,Aa),Mb,Zb,cc,nc={point:cb,lineStart:function(){nc.point=ib;Zb&&Zb.push(cc=[]);Jc=!0;gc=!1;Xc=Vb=NaN},lineEnd:function(){Mb&&(ib(Hc,Rc),Tc&&gc&&Eb.rejoin(),Mb.push(Eb.buffer()));nc.point=cb;gc&&Oa.lineEnd()},polygonStart:function(){Oa=
Eb;Mb=[];Zb=[];fd=!0},polygonEnd:function(){Oa=wb;Mb=Kb.merge(Mb);var hd=[R,Aa];for(var id=0,ad=Zb.length,Md=hd[1],$d=0;$d<ad;++$d)for(var ie=1,ne=Zb[$d],le=ne.length,we=ne[0],Yd;ie<le;++ie)Yd=ne[ie],we[1]<=Md?Yd[1]>Md&&0<ra(we,Yd,hd)&&++id:Yd[1]<=Md&&0>ra(we,Yd,hd)&&--id,we=Yd;hd=0!==id;id=fd&&hd;ad=Mb.length;if(id||ad)Oa.polygonStart(),id&&(Oa.lineStart(),Sa(null,null,1,Oa),Oa.lineEnd()),ad&&dd(Mb,Ha,hd,Sa,Oa),Oa.polygonEnd();Mb=Zb=cc=null}},Hc,Rc,Tc,Xc,Vb,gc,Jc,fd;return nc}}function Se(R){var ia=
0,ta=fe/3,Aa=Gb(R);R=Aa(ia,ta);R.parallels=function(Ba){return arguments.length?Aa(ia=Ba[0]*fe/180,ta=Ba[1]*fe/180):[ia/fe*180,ta/fe*180]};return R}function gf(R,ia){function ta(Ua,Oa){Oa=Math.sqrt(Ba-2*Aa*Math.sin(Oa))/Aa;return[Oa*Math.sin(Ua*=Aa),Ha-Oa*Math.cos(Ua)]}R=Math.sin(R);var Aa=(R+Math.sin(ia))/2,Ba=1+R*(2*Aa-R),Ha=Math.sqrt(Ba)/Aa;ta.invert=function(Ua,Oa){Oa=Ha-Oa;return[Math.atan2(Ua,Oa)/Aa,la((Ba-(Ua*Ua+Oa*Oa)*Aa*Aa)/(2*Aa))]};return ta}function $e(){function R(Ha,Ua){mj+=Ba*Ha-Aa*
Ua;Aa=Ha;Ba=Ua}var ia,ta,Aa,Ba;Tg.point=function(Ha,Ua){Tg.point=R;ia=Aa=Ha;ta=Ba=Ua};Tg.lineEnd=function(){R(ia,ta)}}function cf(){function R(Sa,cb){Ua.push("M",Sa,",",cb,Ha)}function ia(Sa,cb){Ua.push("M",Sa,",",cb);Oa.point=ta}function ta(Sa,cb){Ua.push("L",Sa,",",cb)}function Aa(){Oa.point=R}function Ba(){Ua.push("Z")}var Ha=Te(4.5),Ua=[],Oa={point:R,lineStart:function(){Oa.point=ia},lineEnd:Aa,polygonStart:function(){Oa.lineEnd=Ba},polygonEnd:function(){Oa.lineEnd=Aa;Oa.point=R},pointRadius:function(Sa){Ha=
Te(Sa);return Oa},result:function(){if(Ua.length){var Sa=Ua.join("");Ua=[];return Sa}}};return Oa}function Te(R){return"m0,"+R+"a"+R+","+R+" 0 1,1 0,"+-2*R+"a"+R+","+R+" 0 1,1 0,"+2*R+"z"}function Ma(R,ia){jh+=R;kh+=ia;++Jg}function xb(){function R(Aa,Ba){var Ha=Aa-ia,Ua=Ba-ta;Ha=Math.sqrt(Ha*Ha+Ua*Ua);Vf+=Ha*(ia+Aa)/2;Sg+=Ha*(ta+Ba)/2;yg+=Ha;Ma(ia=Aa,ta=Ba)}var ia,ta;eg.point=function(Aa,Ba){eg.point=R;Ma(ia=Aa,ta=Ba)}}function rb(){eg.point=Ma}function Hb(){function R(Ha,Ua){var Oa=Ha-Aa,Sa=Ua-
Ba;Oa=Math.sqrt(Oa*Oa+Sa*Sa);Vf+=Oa*(Aa+Ha)/2;Sg+=Oa*(Ba+Ua)/2;yg+=Oa;Oa=Ba*Ha-Aa*Ua;Ch+=Oa*(Aa+Ha);Dh+=Oa*(Ba+Ua);Kg+=3*Oa;Ma(Aa=Ha,Ba=Ua)}var ia,ta,Aa,Ba;eg.point=function(Ha,Ua){eg.point=R;Ma(ia=Aa=Ha,ta=Ba=Ua)};eg.lineEnd=function(){R(ia,ta)}}function mc(R){function ia(Sa,cb){R.moveTo(Sa+Ua,cb);R.arc(Sa,cb,Ua,0,Ef)}function ta(Sa,cb){R.moveTo(Sa,cb);Oa.point=Aa}function Aa(Sa,cb){R.lineTo(Sa,cb)}function Ba(){Oa.point=ia}function Ha(){R.closePath()}var Ua=4.5,Oa={point:ia,lineStart:function(){Oa.point=
ta},lineEnd:Ba,polygonStart:function(){Oa.lineEnd=Ha},polygonEnd:function(){Oa.lineEnd=Ba;Oa.point=ia},pointRadius:function(Sa){Ua=Sa;return Oa},result:y};return Oa}function Ic(R){function ia(Sa){return(Oa?Aa:ta)(Sa)}function ta(Sa){return Yc(Sa,function(cb,ib){cb=R(cb,ib);Sa.point(cb[0],cb[1])})}function Aa(Sa){function cb(Md,$d){Md=R(Md,$d);Sa.point(Md[0],Md[1])}function ib(){gc=NaN;ad.point=wb;Sa.lineStart()}function wb(Md,$d){var ie=Nc([Md,$d]);$d=R(Md,$d);Ba(gc,Jc,Vb,fd,hd,id,gc=$d[0],Jc=$d[1],
Vb=Md,fd=ie[0],hd=ie[1],id=ie[2],Oa,Sa);Sa.point(gc,Jc)}function Eb(){ad.point=cb;Sa.lineEnd()}function Lb(){ib();ad.point=Mb;ad.lineEnd=Zb}function Mb(Md,$d){wb(cc=Md,$d);nc=gc;Hc=Jc;Rc=fd;Tc=hd;Xc=id;ad.point=wb}function Zb(){Ba(gc,Jc,Vb,fd,hd,id,nc,Hc,cc,Rc,Tc,Xc,Oa,Sa);ad.lineEnd=Eb;Eb()}var cc,nc,Hc,Rc,Tc,Xc,Vb,gc,Jc,fd,hd,id,ad={point:cb,lineStart:ib,lineEnd:Eb,polygonStart:function(){Sa.polygonStart();ad.lineStart=Lb},polygonEnd:function(){Sa.polygonEnd();ad.lineStart=ib}};return ad}function Ba(Sa,
cb,ib,wb,Eb,Lb,Mb,Zb,cc,nc,Hc,Rc,Tc,Xc){var Vb=Mb-Sa,gc=Zb-cb,Jc=Vb*Vb+gc*gc;if(Jc>4*Ha&&Tc--){var fd=wb+nc,hd=Eb+Hc,id=Lb+Rc,ad=Math.sqrt(fd*fd+hd*hd+id*id),Md=Math.asin(id/=ad),$d=1E-6>de(de(id)-1)||1E-6>de(ib-cc)?(ib+cc)/2:Math.atan2(hd,fd),ie=R($d,Md);Md=ie[0];ie=ie[1];var ne=Md-Sa,le=ie-cb,we=gc*ne-Vb*le;if(we*we/Jc>Ha||.3<de((Vb*ne+gc*le)/Jc-.5)||wb*nc+Eb*Hc+Lb*Rc<Ua)Ba(Sa,cb,ib,wb,Eb,Lb,Md,ie,$d,fd/=ad,hd/=ad,id,Tc,Xc),Xc.point(Md,ie),Ba(Md,ie,$d,fd,hd,id,Mb,Zb,cc,nc,Hc,Rc,Tc,Xc)}}var Ha=.5,
Ua=Math.cos(30*ke),Oa=16;ia.precision=function(Sa){if(!arguments.length)return Math.sqrt(Ha);Oa=0<(Ha=Sa*Sa)&&16;return ia};return ia}function Yb(R){var ia=Ic(function(ta,Aa){return R([ta*We,Aa*We])});return function(ta){return Sb(ia(ta))}}function Ac(R){this.stream=R}function Yc(R,ia){return{point:ia,sphere:function(){R.sphere()},lineStart:function(){R.lineStart()},lineEnd:function(){R.lineEnd()},polygonStart:function(){R.polygonStart()},polygonEnd:function(){R.polygonEnd()}}}function md(R){return Gb(function(){return R})()}
function Gb(R){function ia(Jc){Jc=Oa(Jc[0]*ke,Jc[1]*ke);return[Jc[0]*cb+nc,Hc-Jc[1]*cb]}function ta(Jc){return(Jc=Oa.invert((Jc[0]-nc)/cb,(Hc-Jc[1])/cb))&&[Jc[0]*We,Jc[1]*We]}function Aa(){Oa=Kd(Ua=Ec(Mb,Zb,cc),Ha);var Jc=Ha(Eb,Lb);nc=ib-Jc[0]*cb;Hc=wb+Jc[1]*cb;return Ba()}function Ba(){gc&&(gc.valid=!1,gc=null);return ia}var Ha,Ua,Oa,Sa=Ic(function(Jc,fd){Jc=Ha(Jc,fd);return[Jc[0]*cb+nc,Hc-Jc[1]*cb]}),cb=150,ib=480,wb=250,Eb=0,Lb=0,Mb=0,Zb=0,cc=0,nc,Hc,Rc=Oj,Tc=w,Xc=null,Vb=null,gc;ia.stream=function(Jc){gc&&
(gc.valid=!1);gc=Sb(Rc(Ua,Sa(Tc(Jc))));gc.valid=!0;return gc};ia.clipAngle=function(Jc){if(!arguments.length)return Xc;Rc=null==Jc?(Xc=Jc,Oj):qe((Xc=+Jc)*ke);return Ba()};ia.clipExtent=function(Jc){if(!arguments.length)return Vb;Tc=(Vb=Jc)?ve(Jc[0][0],Jc[0][1],Jc[1][0],Jc[1][1]):w;return Ba()};ia.scale=function(Jc){if(!arguments.length)return cb;cb=+Jc;return Aa()};ia.translate=function(Jc){if(!arguments.length)return[ib,wb];ib=+Jc[0];wb=+Jc[1];return Aa()};ia.center=function(Jc){if(!arguments.length)return[Eb*
We,Lb*We];Eb=Jc[0]%360*ke;Lb=Jc[1]%360*ke;return Aa()};ia.rotate=function(Jc){if(!arguments.length)return[Mb*We,Zb*We,cc*We];Mb=Jc[0]%360*ke;Zb=Jc[1]%360*ke;cc=2<Jc.length?Jc[2]%360*ke:0;return Aa()};Kb.rebind(ia,Sa,"precision");return function(){Ha=R.apply(this,arguments);ia.invert=Ha.invert&&ta;return Aa()}}function Sb(R){return Yc(R,function(ia,ta){R.point(ia*ke,ta*ke)})}function zc(R,ia){return[R,ia]}function Sc(R,ia){return[R>fe?R-Ef:R<-fe?R+Ef:R,ia]}function Ec(R,ia,ta){return R?ia||ta?Kd(Oc(R),
Kc(ia,ta)):Oc(R):ia||ta?Kc(ia,ta):Sc}function Pc(R){return function(ia,ta){return ia+=R,[ia>fe?ia-Ef:ia<-fe?ia+Ef:ia,ta]}}function Oc(R){var ia=Pc(R);ia.invert=Pc(-R);return ia}function Kc(R,ia){function ta(Oa,Sa){var cb=Math.cos(Sa),ib=Math.cos(Oa)*cb;Oa=Math.sin(Oa)*cb;Sa=Math.sin(Sa);cb=Sa*Aa+ib*Ba;return[Math.atan2(Oa*Ha-cb*Ua,ib*Aa-Sa*Ba),la(cb*Ha+Oa*Ua)]}var Aa=Math.cos(R),Ba=Math.sin(R),Ha=Math.cos(ia),Ua=Math.sin(ia);ta.invert=function(Oa,Sa){var cb=Math.cos(Sa),ib=Math.cos(Oa)*cb;Oa=Math.sin(Oa)*
cb;Sa=Math.sin(Sa);cb=Sa*Ha-Oa*Ua;return[Math.atan2(Oa*Ha+Sa*Ua,ib*Aa+cb*Ba),la(cb*Aa-ib*Ba)]};return ta}function pc(R,ia){var ta=Math.cos(R),Aa=Math.sin(R);return function(Ba,Ha,Ua,Oa){var Sa=Ua*ia;if(null!=Ba){if(Ba=vc(ta,Ba),Ha=vc(ta,Ha),0<Ua?Ba<Ha:Ba>Ha)Ba+=Ua*Ef}else Ba=R+Ua*Ef,Ha=R-.5*Sa;for(var cb;0<Ua?Ba>Ha:Ba<Ha;Ba-=Sa)Oa.point((cb=Dd([ta,-Aa*Math.cos(Ba),-Aa*Math.sin(Ba)]))[0],cb[1])}}function vc(R,ia){ia=Nc(ia);ia[0]-=R;rd(ia);R=ha(-ia[1]);return((0>-ia[2]?-R:R)+2*Math.PI-1E-6)%(2*Math.PI)}
function tc(R,ia,ta){var Aa=Kb.range(R,ia-1E-6,ta).concat(ia);return function(Ba){return Aa.map(function(Ha){return[Ba,Ha]})}}function gd(R,ia,ta){var Aa=Kb.range(R,ia-1E-6,ta).concat(ia);return function(Ba){return Aa.map(function(Ha){return[Ha,Ba]})}}function ud(R){return R.source}function xd(R){return R.target}function Ad(R,ia,ta,Aa){var Ba=Math.cos(ia),Ha=Math.sin(ia),Ua=Math.cos(Aa),Oa=Math.sin(Aa),Sa=Ba*Math.cos(R),cb=Ba*Math.sin(R),ib=Ua*Math.cos(ta),wb=Ua*Math.sin(ta),Eb=2*Math.asin(Math.sqrt(na(Aa-
ia)+Ba*Ua*na(ta-R))),Lb=1/Math.sin(Eb);ta=Eb?function(Mb){var Zb=Math.sin(Mb*=Eb)*Lb;Mb=Math.sin(Eb-Mb)*Lb;var cc=Mb*Sa+Zb*ib,nc=Mb*cb+Zb*wb;return[Math.atan2(nc,cc)*We,Math.atan2(Mb*Ha+Zb*Oa,Math.sqrt(cc*cc+nc*nc))*We]}:function(){return[R*We,ia*We]};ta.distance=Eb;return ta}function wd(R,ia){function ta(Aa,Ba){var Ha=Math.cos(Ba),Ua=R(Math.cos(Aa)*Ha);return[Ua*Ha*Math.sin(Aa),Ua*Math.sin(Ba)]}ta.invert=function(Aa,Ba){var Ha=Math.sqrt(Aa*Aa+Ba*Ba),Ua=ia(Ha),Oa=Math.sin(Ua);return[Math.atan2(Aa*
Oa,Ha*Math.cos(Ua)),Math.asin(Ha&&Ba*Oa/Ha)]};return ta}function se(R,ia){function ta(Ua,Oa){0<Ha?Oa<-df+1E-6&&(Oa=-df+1E-6):Oa>df-1E-6&&(Oa=df-1E-6);Oa=Ha/Math.pow(Math.tan(fe/4+Oa/2),Ba);return[Oa*Math.sin(Ba*Ua),Ha-Oa*Math.cos(Ba*Ua)]}var Aa=Math.cos(R),Ba=R===ia?Math.sin(R):Math.log(Aa/Math.cos(ia))/Math.log(Math.tan(fe/4+ia/2)/Math.tan(fe/4+R/2)),Ha=Aa*Math.pow(Math.tan(fe/4+R/2),Ba)/Ba;if(!Ba)return Fe;ta.invert=function(Ua,Oa){Oa=Ha-Oa;return[Math.atan2(Ua,Oa)/Ba,2*Math.atan(Math.pow(Ha/((0<
Ba?1:0>Ba?-1:0)*Math.sqrt(Ua*Ua+Oa*Oa)),1/Ba))-df]};return ta}function te(R,ia){function ta(Ua,Oa){Oa=Ha-Oa;return[Oa*Math.sin(Ba*Ua),Ha-Oa*Math.cos(Ba*Ua)]}var Aa=Math.cos(R),Ba=R===ia?Math.sin(R):(Aa-Math.cos(ia))/(ia-R),Ha=Aa/Ba+R;if(1E-6>de(Ba))return zc;ta.invert=function(Ua,Oa){Oa=Ha-Oa;return[Math.atan2(Ua,Oa)/Ba,Ha-(0<Ba?1:0>Ba?-1:0)*Math.sqrt(Ua*Ua+Oa*Oa)]};return ta}function Fe(R,ia){return[R,Math.log(Math.tan(fe/4+ia/2))]}function je(R){var ia=md(R),ta=ia.scale,Aa=ia.translate,Ba=ia.clipExtent,
Ha;ia.scale=function(){var Ua=ta.apply(ia,arguments);return Ua===ia?Ha?ia.clipExtent(null):ia:Ua};ia.translate=function(){var Ua=Aa.apply(ia,arguments);return Ua===ia?Ha?ia.clipExtent(null):ia:Ua};ia.clipExtent=function(Ua){var Oa=Ba.apply(ia,arguments);if(Oa===ia){if(Ha=null==Ua){var Sa=fe*ta(),cb=Aa();Ba([[cb[0]-Sa,cb[1]-Sa],[cb[0]+Sa,cb[1]+Sa]])}}else Ha&&(Oa=null);return Oa};return ia.clipExtent(null)}function Ge(R,ia){return[Math.log(Math.tan(fe/4+ia/2)),-R]}function uf(R){return R[0]}function jg(R){return R[1]}
function zh(R){for(var ia=R.length,ta=[0,1],Aa=2,Ba=2;Ba<ia;Ba++){for(;1<Aa&&0>=ra(R[ta[Aa-2]],R[ta[Aa-1]],R[Ba]);)--Aa;ta[Aa++]=Ba}return ta.slice(0,Aa)}function di(R,ia){return R[0]-ia[0]||R[1]-ia[1]}function ei(R,ia,ta){return(ta[0]-ia[0])*(R[1]-ia[1])<(ta[1]-ia[1])*(R[0]-ia[0])}function kg(R,ia,ta,Aa){var Ba=R[0],Ha=ta[0],Ua=ia[0]-Ba,Oa=Aa[0]-Ha;R=R[1];ta=ta[1];ia=ia[1]-R;Aa=Aa[1]-ta;Ha=(Oa*(R-ta)-Aa*(Ba-Ha))/(Aa*Ua-Oa*ia);return[Ba+Ha*Ua,R+Ha*ia]}function Pj(R){var ia=R[0];R=R[R.length-1];return!(ia[0]-
R[0]||ia[1]-R[1])}function nj(){Wf(this);this.edge=this.site=this.circle=null}function Qj(R){var ia=uk.pop()||new nj;ia.site=R;return ia}function ji(R){Eh(R);ki.remove(R);uk.push(R);Wf(R)}function Oi(R,ia){var ta=R.site,Aa=ta.x,Ba=ta.y,Ha=Ba-ia;if(!Ha)return Aa;R=R.P;if(!R)return-Infinity;ta=R.site;R=ta.x;ta=ta.y;ia=ta-ia;if(!ia)return R;var Ua=R-Aa,Oa=1/Ha-1/ia,Sa=Ua/ia;return Oa?(-Sa+Math.sqrt(Sa*Sa-2*Oa*(Ua*Ua/(-2*ia)-ta+ia/2+Ba-Ha/2)))/Oa+Aa:(Aa+R)/2}function Ug(R){this.site=R;this.edges=[]}function Rj(R,
ia){return ia.angle-R.angle}function Sj(){Wf(this);this.x=this.y=this.arc=this.site=this.cy=null}function Fh(R){var ia=R.P,ta=R.N;if(ia&&ta){var Aa=ia.site;ia=R.site;var Ba=ta.site;if(Aa!==Ba){ta=ia.x;var Ha=ia.y,Ua=Aa.x-ta,Oa=Aa.y-Ha;Aa=Ba.x-ta;Ba=Ba.y-Ha;var Sa=2*(Ua*Ba-Oa*Aa);if(!(-1E-12<=Sa)){var cb=Ua*Ua+Oa*Oa,ib=Aa*Aa+Ba*Ba;Oa=(Ba*cb-Oa*ib)/Sa;Ua=(Ua*ib-Aa*cb)/Sa;Ba=Ua+Ha;Ha=vk.pop()||new Sj;Ha.arc=R;Ha.site=ia;Ha.x=Oa+ta;Ha.y=Ba+Math.sqrt(Oa*Oa+Ua*Ua);Ha.cy=Ba;R.circle=Ha;R=null;for(ia=Pi._;ia;)if(Ha.y<
ia.y||Ha.y===ia.y&&Ha.x<=ia.x)if(ia.L)ia=ia.L;else{R=ia.P;break}else if(ia.R)ia=ia.R;else{R=ia;break}Pi.insert(R,Ha);R||(lf=Ha)}}}}function Eh(R){var ia=R.circle;ia&&(ia.P||(lf=ia.N),Pi.remove(ia),vk.push(ia),Wf(ia),R.circle=null)}function li(R,ia){var ta=R.b;if(ta)return!0;var Aa=R.a;ta=ia[0][0];var Ba=ia[1][0],Ha=ia[0][1];ia=ia[1][1];var Ua=R.l,Oa=R.r,Sa=Ua.x;Ua=Ua.y;var cb=Oa.x;Oa=Oa.y;var ib=(Sa+cb)/2;if(Oa===Ua){if(ib<ta||ib>=Ba)return;if(Sa>cb){if(!Aa)Aa={x:ib,y:Ha};else if(Aa.y>=ia)return;
ta={x:ib,y:ia}}else{if(!Aa)Aa={x:ib,y:ia};else if(Aa.y<Ha)return;ta={x:ib,y:Ha}}}else{var wb=(Sa-cb)/(Oa-Ua);ib=(Ua+Oa)/2-wb*ib;if(-1>wb||1<wb)if(Sa>cb){if(!Aa)Aa={x:(Ha-ib)/wb,y:Ha};else if(Aa.y>=ia)return;ta={x:(ia-ib)/wb,y:ia}}else{if(!Aa)Aa={x:(ia-ib)/wb,y:ia};else if(Aa.y<Ha)return;ta={x:(Ha-ib)/wb,y:Ha}}else if(Ua<Oa){if(!Aa)Aa={x:ta,y:wb*ta+ib};else if(Aa.x>=Ba)return;ta={x:Ba,y:wb*Ba+ib}}else{if(!Aa)Aa={x:Ba,y:wb*Ba+ib};else if(Aa.x<ta)return;ta={x:ta,y:wb*ta+ib}}}R.a=Aa;R.b=ta;return!0}function Gh(R,
ia){this.l=R;this.r=ia;this.a=this.b=null}function Hh(R,ia,ta,Aa){var Ba=new Gh(R,ia);mi.push(Ba);ta&&ni(Ba,R,ia,ta);Aa&&ni(Ba,ia,R,Aa);Ih[R.i].edges.push(new mh(Ba,R,ia));Ih[ia.i].edges.push(new mh(Ba,ia,R));return Ba}function ni(R,ia,ta,Aa){R.a||R.b?R.l===ta?R.b=Aa:R.a=Aa:(R.a=Aa,R.l=ia,R.r=ta)}function mh(R,ia,ta){var Aa=R.a,Ba=R.b;this.edge=R;this.site=ia;this.angle=ta?Math.atan2(ta.y-ia.y,ta.x-ia.x):R.l===ia?Math.atan2(Ba.x-Aa.x,Aa.y-Ba.y):Math.atan2(Aa.x-Ba.x,Ba.y-Aa.y)}function Ee(){this._=
null}function Wf(R){R.U=R.C=R.L=R.R=R.P=R.N=null}function Jh(R,ia){var ta=ia.R,Aa=ia.U;Aa?Aa.L===ia?Aa.L=ta:Aa.R=ta:R._=ta;ta.U=Aa;ia.U=ta;ia.R=ta.L;ia.R&&(ia.R.U=ia);ta.L=ia}function Kh(R,ia){var ta=ia.L,Aa=ia.U;Aa?Aa.L===ia?Aa.L=ta:Aa.R=ta:R._=ta;ta.U=Aa;ia.U=ta;ia.L=ta.R;ia.L&&(ia.L.U=ia);ta.R=ia}function Tj(R){for(;R.L;)R=R.L;return R}function oi(R,ia){var ta=R.sort(Qi).pop(),Aa;mi=[];Ih=Array(R.length);ki=new Ee;for(Pi=new Ee;;){var Ba=lf;if(ta&&(!Ba||ta.y<Ba.y||ta.y===Ba.y&&ta.x<Ba.x)){if(ta.x!==
Aa||ta.y!==Ha){Ih[ta.i]=new Ug(ta);var Ha=Aa=void 0;Ba=ta;for(var Ua=Ba.x,Oa=Ba.y,Sa=ki._;Sa;){var cb=Oi(Sa,Oa)-Ua;if(1E-6<cb)Sa=Sa.L;else{var ib=Sa;var wb=Oa;var Eb=ib.N;Eb?wb=Oi(Eb,wb):(ib=ib.site,wb=ib.y===wb?ib.x:Infinity);wb=Ua-wb;if(1E-6<wb){if(!Sa.R){Ha=Sa;break}Sa=Sa.R}else{-1E-6<cb?(Ha=Sa.P,Aa=Sa):-1E-6<wb?(Ha=Sa,Aa=Sa.N):Ha=Aa=Sa;break}}}cb=Qj(Ba);ki.insert(Ha,cb);if(Ha||Aa)if(Ha===Aa)Eh(Ha),Aa=Qj(Ha.site),ki.insert(cb,Aa),cb.edge=Aa.edge=Hh(Ha.site,cb.site),Fh(Ha),Fh(Aa);else if(Aa){Eh(Ha);
Eh(Aa);Ua=Ha.site;Sa=Ua.x;wb=Ua.y;ib=Ba.x-Sa;Eb=Ba.y-wb;Oa=Aa.site;var Lb=Oa.x-Sa,Mb=Oa.y-wb,Zb=2*(ib*Mb-Eb*Lb),cc=ib*ib+Eb*Eb,nc=Lb*Lb+Mb*Mb;Sa={x:(Mb*cc-Eb*nc)/Zb+Sa,y:(ib*nc-Lb*cc)/Zb+wb};ni(Aa.edge,Ua,Oa,Sa);cb.edge=Hh(Ua,Ba,null,Sa);Aa.edge=Hh(Ba,Oa,null,Sa);Fh(Ha);Fh(Aa)}else cb.edge=Hh(Ha.site,cb.site);Aa=ta.x;Ha=ta.y}ta=R.pop()}else if(Ba){Oa=Ba.arc;Ba=Oa.circle;Ua=Ba.x;Sa=Ba.cy;Ba={x:Ua,y:Sa};ib=Oa.P;wb=Oa.N;cb=[Oa];ji(Oa);for(Oa=ib;Oa.circle&&1E-6>de(Ua-Oa.circle.x)&&1E-6>de(Sa-Oa.circle.cy);)ib=
Oa.P,cb.unshift(Oa),ji(Oa),Oa=ib;cb.unshift(Oa);Eh(Oa);for(ib=wb;ib.circle&&1E-6>de(Ua-ib.circle.x)&&1E-6>de(Sa-ib.circle.cy);)wb=ib.N,cb.push(ib),ji(ib),ib=wb;cb.push(ib);Eh(ib);Sa=cb.length;for(Ua=1;Ua<Sa;++Ua)ib=cb[Ua],Oa=cb[Ua-1],ni(ib.edge,Oa.site,ib.site,Ba);Oa=cb[0];ib=cb[Sa-1];ib.edge=Hh(Oa.site,ib.site,null,Ba);Fh(Oa);Fh(ib)}else break}if(ia){R=mi;ta=re(ia[0][0],ia[0][1],ia[1][0],ia[1][1]);for(Aa=R.length;Aa--;)if(Ha=R[Aa],!li(Ha,ia)||!ta(Ha)||1E-6>de(Ha.a.x-Ha.b.x)&&1E-6>de(Ha.a.y-Ha.b.y))Ha.a=
Ha.b=null,R.splice(Aa,1);R=ia[0][0];ta=ia[1][0];Aa=ia[0][1];ia=ia[1][1];Ha=Ih;for(Ba=Ha.length;Ba--;)if((cb=Ha[Ba])&&cb.prepare())for(Oa=cb.edges,Sa=Oa.length,Ua=0;Ua<Sa;)if(cc=Oa[Ua].end(),Mb=cc.x,Zb=cc.y,wb=Oa[++Ua%Sa].start(),Lb=wb.x,nc=wb.y,1E-6<de(Mb-Lb)||1E-6<de(Zb-nc))wb=Oa,ib=wb.splice,Eb=Ua,Lb=1E-6>de(Mb-R)&&1E-6<ia-Zb?{x:R,y:1E-6>de(Lb-R)?nc:ia}:1E-6>de(Zb-ia)&&1E-6<ta-Mb?{x:1E-6>de(nc-ia)?Lb:ta,y:ia}:1E-6>de(Mb-ta)&&1E-6<Zb-Aa?{x:ta,y:1E-6>de(Lb-ta)?nc:Aa}:1E-6>de(Zb-Aa)&&1E-6<Mb-R?{x:1E-6>
de(nc-Aa)?Lb:R,y:Aa}:null,Mb=new Gh(cb.site,null),Mb.a=cc,Mb.b=Lb,mi.push(Mb),ib.call(wb,Eb,0,new mh(Mb,cb.site,null)),++Sa}ia={cells:Ih,edges:mi};ki=Pi=mi=Ih=null;return ia}function Qi(R,ia){return ia.y-R.y||ia.x-R.x}function Uj(R){return R.x}function Vj(R){return R.y}function Wj(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function pi(R,ia,ta,Aa,Ba,Ha){if(!R(ia,ta,Aa,Ba,Ha)){var Ua=.5*(ta+Ba),Oa=.5*(Aa+Ha);ia=ia.nodes;ia[0]&&pi(R,ia[0],ta,Aa,Ua,Oa);ia[1]&&pi(R,ia[1],Ua,Aa,Ba,Oa);ia[2]&&pi(R,
ia[2],ta,Oa,Ua,Ha);ia[3]&&pi(R,ia[3],Ua,Oa,Ba,Ha)}}function wk(R,ia,ta,Aa,Ba,Ha,Ua){var Oa=Infinity,Sa;(function Zb(ib,wb,Eb,Lb,Mb){if(!(wb>Ha||Eb>Ua||Lb<Aa||Mb<Ba)){if(cc=ib.point){var cc,nc=ia-ib.x,Hc=ta-ib.y;nc=nc*nc+Hc*Hc;nc<Oa&&(nc=Math.sqrt(Oa=nc),Aa=ia-nc,Ba=ta-nc,Ha=ia+nc,Ua=ta+nc,Sa=cc)}cc=ib.nodes;nc=.5*(wb+Lb);Hc=.5*(Eb+Mb);for(var Rc=(ta>=Hc)<<1|ia>=nc,Tc=Rc+4;Rc<Tc;++Rc)if(ib=cc[Rc&3])switch(Rc&3){case 0:Zb(ib,wb,Eb,nc,Hc);break;case 1:Zb(ib,nc,Eb,Lb,Hc);break;case 2:Zb(ib,wb,Hc,nc,Mb);
break;case 3:Zb(ib,nc,Hc,Lb,Mb)}}})(R,Aa,Ba,Ha,Ua);return Sa}function Lh(R,ia){R=Kb.rgb(R);ia=Kb.rgb(ia);var ta=R.r,Aa=R.g,Ba=R.b,Ha=ia.r-ta,Ua=ia.g-Aa,Oa=ia.b-Ba;return function(Sa){return"#"+Ta(Math.round(ta+Ha*Sa))+Ta(Math.round(Aa+Ua*Sa))+Ta(Math.round(Ba+Oa*Sa))}}function nh(R,ia){var ta={},Aa={},Ba;for(Ba in R)Ba in ia?ta[Ba]=Vg(R[Ba],ia[Ba]):Aa[Ba]=R[Ba];for(Ba in ia)Ba in R||(Aa[Ba]=ia[Ba]);return function(Ha){for(Ba in ta)Aa[Ba]=ta[Ba](Ha);return Aa}}function zg(R,ia){R=+R;ia=+ia;return function(ta){return R*
(1-ta)+ia*ta}}function Xj(R,ia){var ta=qi.lastIndex=oh.lastIndex=0,Aa,Ba,Ha,Ua=-1,Oa=[],Sa=[];R+="";for(ia+="";(Aa=qi.exec(R))&&(Ba=oh.exec(ia));)(Ha=Ba.index)>ta&&(Ha=ia.slice(ta,Ha),Oa[Ua]?Oa[Ua]+=Ha:Oa[++Ua]=Ha),(Aa=Aa[0])===(Ba=Ba[0])?Oa[Ua]?Oa[Ua]+=Ba:Oa[++Ua]=Ba:(Oa[++Ua]=null,Sa.push({i:Ua,x:zg(Aa,Ba)})),ta=oh.lastIndex;ta<ia.length&&(Ha=ia.slice(ta),Oa[Ua]?Oa[Ua]+=Ha:Oa[++Ua]=Ha);return 2>Oa.length?Sa[0]?(ia=Sa[0].x,function(cb){return ia(cb)+""}):function(){return ia}:(ia=Sa.length,function(cb){for(var ib=
0,wb;ib<ia;++ib)Oa[(wb=Sa[ib]).i]=wb.x(cb);return Oa.join("")})}function Vg(R,ia){for(var ta=Kb.interpolators.length,Aa;0<=--ta&&!(Aa=Kb.interpolators[ta](R,ia)););return Aa}function ri(R,ia){var ta=[],Aa=[],Ba=R.length,Ha=ia.length,Ua=Math.min(R.length,ia.length),Oa;for(Oa=0;Oa<Ua;++Oa)ta.push(Vg(R[Oa],ia[Oa]));for(;Oa<Ba;++Oa)Aa[Oa]=R[Oa];for(;Oa<Ha;++Oa)Aa[Oa]=ia[Oa];return function(Sa){for(Oa=0;Oa<Ua;++Oa)Aa[Oa]=ta[Oa](Sa);return Aa}}function Ve(R){return function(ia){return 0>=ia?0:1<=ia?1:R(ia)}}
function ph(R){return function(ia){return 1-R(1-ia)}}function Wg(R){return function(ia){return.5*(.5>ia?R(2*ia):2-R(2-2*ia))}}function Xg(R){return R*R}function Je(R){return R*R*R}function Me(R){if(0>=R)return 0;if(1<=R)return 1;var ia=R*R,ta=ia*R;return 4*(.5>R?ta:3*(R-ia)+ta-.75)}function Lg(R){return 1-Math.cos(R*df)}function Mh(R){return Math.pow(2,10*(R-1))}function Yj(R){return 1-Math.sqrt(1-R*R)}function oj(R){return R<1/2.75?7.5625*R*R:R<2/2.75?7.5625*(R-=1.5/2.75)*R+.75:R<2.5/2.75?7.5625*
(R-=2.25/2.75)*R+.9375:7.5625*(R-=2.625/2.75)*R+.984375}function pj(R,ia){ia-=R;return function(ta){return Math.round(R+ia*ta)}}function qj(R){var ia=[R.a,R.b],ta=[R.c,R.d],Aa=qh(ia),Ba=ia[0]*ta[0]+ia[1]*ta[1],Ha=-Ba;ta[0]+=Ha*ia[0];ta[1]+=Ha*ia[1];Ha=qh(ta)||0;ia[0]*ta[1]<ta[0]*ia[1]&&(ia[0]*=-1,ia[1]*=-1,Aa*=-1,Ba*=-1);this.rotate=(Aa?Math.atan2(ia[1],ia[0]):Math.atan2(-ta[0],ta[1]))*We;this.translate=[R.e,R.f];this.scale=[Aa,Ha];this.skew=Ha?Math.atan2(Ba,Ha)*We:0}function qh(R){var ia=Math.sqrt(R[0]*
R[0]+R[1]*R[1]);ia&&(R[0]/=ia,R[1]/=ia);return ia}function vf(R){return R.length?R.pop()+",":""}function Ri(R,ia,ta,Aa){R[0]!==ia[0]||R[1]!==ia[1]?(ta=ta.push("translate(",null,",",null,")"),Aa.push({i:ta-4,x:zg(R[0],ia[0])},{i:ta-2,x:zg(R[1],ia[1])})):(ia[0]||ia[1])&&ta.push("translate("+ia+")")}function xk(R,ia,ta,Aa){R!==ia?(180<R-ia?ia+=360:180<ia-R&&(R+=360),Aa.push({i:ta.push(vf(ta)+"rotate(",null,")")-2,x:zg(R,ia)})):ia&&ta.push(vf(ta)+"rotate("+ia+")")}function nf(R,ia,ta,Aa){R!==ia?Aa.push({i:ta.push(vf(ta)+
"skewX(",null,")")-2,x:zg(R,ia)}):ia&&ta.push(vf(ta)+"skewX("+ia+")")}function og(R,ia,ta,Aa){R[0]!==ia[0]||R[1]!==ia[1]?(ta=ta.push(vf(ta)+"scale(",null,",",null,")"),Aa.push({i:ta-4,x:zg(R[0],ia[0])},{i:ta-2,x:zg(R[1],ia[1])})):1===ia[0]&&1===ia[1]||ta.push(vf(ta)+"scale("+ia+")")}function Jf(R,ia){var ta=[],Aa=[];R=Kb.transform(R);ia=Kb.transform(ia);Ri(R.translate,ia.translate,ta,Aa);xk(R.rotate,ia.rotate,ta,Aa);nf(R.skew,ia.skew,ta,Aa);og(R.scale,ia.scale,ta,Aa);R=ia=null;return function(Ba){for(var Ha=
-1,Ua=Aa.length,Oa;++Ha<Ua;)ta[(Oa=Aa[Ha]).i]=Oa.x(Ba);return ta.join("")}}function Nh(R,ia){ia=(ia-=R=+R)||1/ia;return function(ta){return(ta-R)/ia}}function rh(R,ia){ia=(ia-=R=+R)||1/ia;return function(ta){return Math.max(0,Math.min(1,(ta-R)/ia))}}function pg(R){for(var ia=[],ta=R.parent;null!=ta;)ia.push(R),R=ta,ta=ta.parent;ia.push(R);return ia}function Xf(R){R.fixed|=2}function Oh(R){R.fixed&=-7}function rj(R){R.fixed|=4;R.px=R.x;R.py=R.y}function Si(R){R.fixed&=-5}function Yf(R,ia,ta){var Aa=
0,Ba=0;R.charge=0;if(!R.leaf)for(var Ha=R.nodes,Ua=Ha.length,Oa=-1,Sa;++Oa<Ua;)Sa=Ha[Oa],null!=Sa&&(Yf(Sa,ia,ta),R.charge+=Sa.charge,Aa+=Sa.charge*Sa.cx,Ba+=Sa.charge*Sa.cy);R.point&&(R.leaf||(R.point.x+=Math.random()-.5,R.point.y+=Math.random()-.5),ia*=ta[R.point.index],R.charge+=R.pointCharge=ia,Aa+=ia*R.point.x,Ba+=ia*R.point.y);R.cx=Aa/R.charge;R.cy=Ba/R.charge}function of(R,ia){Kb.rebind(R,ia,"sort","children","value");R.nodes=R;R.links=Ph;return R}function si(R,ia){for(var ta=[R];null!=(R=ta.pop());)if(ia(R),
(Ba=R.children)&&(Aa=Ba.length))for(var Aa,Ba;0<=--Aa;)ta.push(Ba[Aa])}function Zf(R,ia){for(var ta=[R],Aa=[];null!=(R=ta.pop());)if(Aa.push(R),(Ha=R.children)&&(Ba=Ha.length)){R=-1;for(var Ba,Ha;++R<Ba;)ta.push(Ha[R])}for(;null!=(R=Aa.pop());)ia(R)}function sj(R){return R.children}function sh(R){return R.value}function Ff(R,ia){return ia.value-R.value}function Ph(R){return Kb.merge(R.map(function(ia){return(ia.children||[]).map(function(ta){return{source:ia,target:ta}})}))}function Yg(R){return R.x}
function fg(R){return R.y}function Mg(R,ia,ta){R.y0=ia;R.y=ta}function Zg(R){return Kb.range(R.length)}function Ag(R){var ia=-1;R=R[0].length;for(var ta=[];++ia<R;)ta[ia]=0;return ta}function Ti(R){for(var ia=1,ta=0,Aa=R[0][1],Ba,Ha=R.length;ia<Ha;++ia)(Ba=R[ia][1])>Aa&&(ta=ia,Aa=Ba);return ta}function Zj(R){return R.reduce(Vd,0)}function Vd(R,ia){return R+ia[1]}function yk(R,ia){return qg(R,Math.ceil(Math.log(ia.length)/Math.LN2+1))}function qg(R,ia){var ta=-1,Aa=+R[0];R=(R[1]-Aa)/ia;for(var Ba=
[];++ta<=ia;)Ba[ta]=R*ta+Aa;return Ba}function $g(R){return[Kb.min(R),Kb.max(R)]}function th(R,ia){return R.value-ia.value}function Qh(R,ia){var ta=R._pack_next;R._pack_next=ia;ia._pack_prev=R;ia._pack_next=ta;ta._pack_prev=ia}function Rh(R,ia){R._pack_next=ia;ia._pack_prev=R}function Sh(R,ia){var ta=ia.x-R.x,Aa=ia.y-R.y;R=R.r+ia.r;return.999*R*R>ta*ta+Aa*Aa}function rg(R){function ia(nc){Aa=Math.min(nc.x-nc.r,Aa);Ba=Math.max(nc.x+nc.r,Ba);Ha=Math.min(nc.y-nc.r,Ha);Ua=Math.max(nc.y+nc.r,Ua)}if((ta=
R.children)&&(ib=ta.length)){var ta,Aa=Infinity,Ba=-Infinity,Ha=Infinity,Ua=-Infinity,Oa,Sa,cb,ib;ta.forEach(zk);var wb=ta[0];wb.x=-wb.r;wb.y=0;ia(wb);if(1<ib){var Eb=ta[1];Eb.x=Eb.r;Eb.y=0;ia(Eb);if(2<ib){var Lb=ta[2];$f(wb,Eb,Lb);ia(Lb);Qh(wb,Lb);wb._pack_prev=Lb;Qh(Lb,Eb);Eb=wb._pack_next;for(Oa=3;Oa<ib;Oa++){$f(wb,Eb,Lb=ta[Oa]);var Mb=0,Zb=1,cc=1;for(Sa=Eb._pack_next;Sa!==Eb;Sa=Sa._pack_next,Zb++)if(Sh(Sa,Lb)){Mb=1;break}if(1==Mb)for(cb=wb._pack_prev;cb!==Sa._pack_prev&&!Sh(cb,Lb);cb=cb._pack_prev,
cc++);Mb?(Zb<cc||Zb==cc&&Eb.r<wb.r?Rh(wb,Eb=Sa):Rh(wb=cb,Eb),Oa--):(Qh(wb,Lb),Eb=Lb,ia(Lb))}}}wb=(Aa+Ba)/2;Eb=(Ha+Ua)/2;for(Oa=Sa=0;Oa<ib;Oa++)Lb=ta[Oa],Lb.x-=wb,Lb.y-=Eb,Sa=Math.max(Sa,Lb.r+Math.sqrt(Lb.x*Lb.x+Lb.y*Lb.y));R.r=Sa;ta.forEach(Ak)}}function zk(R){R._pack_next=R._pack_prev=R}function Ak(R){delete R._pack_next;delete R._pack_prev}function ak(R,ia,ta,Aa){var Ba=R.children;R.x=ia+=Aa*R.x;R.y=ta+=Aa*R.y;R.r*=Aa;if(Ba){R=-1;for(var Ha=Ba.length;++R<Ha;)ak(Ba[R],ia,ta,Aa)}}function $f(R,ia,
ta){var Aa=R.r+ta.r,Ba=ia.x-R.x,Ha=ia.y-R.y;if(Aa&&(Ba||Ha)){var Ua=ia.r+ta.r,Oa=Ba*Ba+Ha*Ha;Ua*=Ua;Aa*=Aa;ia=.5+(Aa-Ua)/(2*Oa);Ua=Math.sqrt(Math.max(0,2*Ua*(Aa+Oa)-(Aa-=Oa)*Aa-Ua*Ua))/(2*Oa);ta.x=R.x+ia*Ba+Ua*Ha;ta.y=R.y+ia*Ha-Ua*Ba}else ta.x=R.x+Aa,ta.y=R.y}function Ke(R,ia){return R.parent==ia.parent?1:2}function ah(R){var ia=R.children;return ia.length?ia[0]:R.t}function bh(R){var ia=R.children,ta;return(ta=ia.length)?ia[ta-1]:R.t}function Ui(R){return 1+Kb.max(R,function(ia){return ia.y})}function gg(R){return R.reduce(function(ia,
ta){return ia+ta.x},0)/R.length}function ch(R){var ia=R.children;return ia&&ia.length?ch(ia[0]):R}function Th(R){var ia=R.children,ta;return ia&&(ta=ia.length)?Th(ia[ta-1]):R}function Bg(R){return{x:R.x,y:R.y,dx:R.dx,dy:R.dy}}function Cg(R,ia){var ta=R.x+ia[3],Aa=R.y+ia[0],Ba=R.dx-ia[1]-ia[3];R=R.dy-ia[0]-ia[2];0>Ba&&(ta+=Ba/2,Ba=0);0>R&&(Aa+=R/2,R=0);return{x:ta,y:Aa,dx:Ba,dy:R}}function Pf(R){var ia=R[0];R=R[R.length-1];return ia<R?[ia,R]:[R,ia]}function ag(R){return R.rangeExtent?R.rangeExtent():
Pf(R.range())}function bk(R,ia,ta,Aa){var Ba=ta(R[0],R[1]),Ha=Aa(ia[0],ia[1]);return function(Ua){return Ha(Ba(Ua))}}function Vi(R,ia){var ta=0,Aa=R.length-1,Ba=R[ta],Ha=R[Aa];if(Ha<Ba){var Ua=ta;ta=Aa;Aa=Ua;Ua=Ba;Ba=Ha;Ha=Ua}R[ta]=ia.floor(Ba);R[Aa]=ia.ceil(Ha);return R}function Wi(R){return R?{floor:function(ia){return Math.floor(ia/R)*R},ceil:function(ia){return Math.ceil(ia/R)*R}}:Xi}function ub(R,ia,ta,Aa){var Ba=[],Ha=[],Ua=0,Oa=Math.min(R.length,ia.length)-1;R[Oa]<R[0]&&(R=R.slice().reverse(),
ia=ia.slice().reverse());for(;++Ua<=Oa;)Ba.push(ta(R[Ua-1],R[Ua])),Ha.push(Aa(ia[Ua-1],ia[Ua]));return function(Sa){var cb=Kb.bisect(R,Sa,1,Oa)-1;return Ha[cb](Ba[cb](Sa))}}function U(R,ia,ta,Aa){function Ba(){var Sa=2<Math.min(R.length,ia.length)?ub:bk,cb=Aa?rh:Nh;Ua=Sa(R,ia,cb,ta);Oa=Sa(ia,R,cb,Vg);return Ha}function Ha(Sa){return Ua(Sa)}var Ua,Oa;Ha.invert=function(Sa){return Oa(Sa)};Ha.domain=function(Sa){if(!arguments.length)return R;R=Sa.map(Number);return Ba()};Ha.range=function(Sa){if(!arguments.length)return ia;
ia=Sa;return Ba()};Ha.rangeRound=function(Sa){return Ha.range(Sa).interpolate(pj)};Ha.clamp=function(Sa){if(!arguments.length)return Aa;Aa=Sa;return Ba()};Ha.interpolate=function(Sa){if(!arguments.length)return ta;ta=Sa;return Ba()};Ha.ticks=function(Sa){return Kb.range.apply(Kb,da(R,Sa))};Ha.tickFormat=function(Sa,cb){return xa(R,Sa,cb)};Ha.nice=function(Sa){W(R,Sa);return Ba()};Ha.copy=function(){return U(R,ia,ta,Aa)};return Ba()}function X(R,ia){return Kb.rebind(R,ia,"range","rangeRound","interpolate",
"clamp")}function W(R,ia){Vi(R,Wi(da(R,ia)[2]));Vi(R,Wi(da(R,ia)[2]));return R}function da(R,ia){null==ia&&(ia=10);R=Pf(R);var ta=R[1]-R[0],Aa=Math.pow(10,Math.floor(Math.log(ta/ia)/Math.LN10));ia=ia/ta*Aa;.15>=ia?Aa*=10:.35>=ia?Aa*=5:.75>=ia&&(Aa*=2);R[0]=Math.ceil(R[0]/Aa)*Aa;R[1]=Math.floor(R[1]/Aa)*Aa+.5*Aa;R[2]=Aa;return R}function xa(R,ia,ta){R=da(R,ia);if(ta){ia=Rg.exec(ta);ia.shift();if("s"===ia[8]){var Aa=Kb.formatPrefix(Math.max(de(R[0]),de(R[1])));ia[7]||(ia[7]="."+Ka(Aa.scale(R[2])));
ia[8]="f";ta=Kb.format(ia.join(""));return function(Ba){return ta(Aa.scale(Ba))+Aa.symbol}}ia[7]||(ia[7]="."+Wa(ia[8],R));ta=ia.join("")}else ta=",."+Ka(R[2])+"f";return Kb.format(ta)}function Ka(R){return-Math.floor(Math.log(R)/Math.LN10+.01)}function Wa(R,ia){var ta=Ka(ia[2]);return R in Uh?Math.abs(ta-Ka(Math.max(de(ia[0]),de(ia[1]))))+ +("e"!==R):ta-2*("%"===R)}function fb(R,ia,ta,Aa){function Ba(Oa){return(ta?Math.log(0>Oa?0:Oa):-Math.log(0<Oa?0:-Oa))/Math.log(ia)}function Ha(Oa){return ta?Math.pow(ia,
Oa):-Math.pow(ia,-Oa)}function Ua(Oa){return R(Ba(Oa))}Ua.invert=function(Oa){return Ha(R.invert(Oa))};Ua.domain=function(Oa){if(!arguments.length)return Aa;ta=0<=Oa[0];R.domain((Aa=Oa.map(Number)).map(Ba));return Ua};Ua.base=function(Oa){if(!arguments.length)return ia;ia=+Oa;R.domain(Aa.map(Ba));return Ua};Ua.nice=function(){var Oa=Vi(Aa.map(Ba),ta?Math:Qf);R.domain(Oa);Aa=Oa.map(Ha);return Ua};Ua.ticks=function(){var Oa=Pf(Aa),Sa=[],cb=Oa[0];Oa=Oa[1];var ib=Math.floor(Ba(cb)),wb=Math.ceil(Ba(Oa)),
Eb=ia%1?2:ia;if(isFinite(wb-ib)){if(ta){for(;ib<wb;ib++)for(var Lb=1;Lb<Eb;Lb++)Sa.push(Ha(ib)*Lb);Sa.push(Ha(ib))}else for(Sa.push(Ha(ib));ib++<wb;)for(Lb=Eb-1;0<Lb;Lb--)Sa.push(Ha(ib)*Lb);for(ib=0;Sa[ib]<cb;ib++);for(wb=Sa.length;Sa[wb-1]>Oa;wb--);Sa=Sa.slice(ib,wb)}return Sa};Ua.tickFormat=function(Oa,Sa){if(!arguments.length)return hg;2>arguments.length?Sa=hg:"function"!==typeof Sa&&(Sa=Kb.format(Sa));var cb=Math.max(1,ia*Oa/Ua.ticks().length);return function(ib){var wb=ib/Ha(Math.round(Ba(ib)));
wb*ia<ia-.5&&(wb*=ia);return wb<=cb?Sa(ib):""}};Ua.copy=function(){return fb(R.copy(),ia,ta,Aa)};return X(Ua,R)}function Fb(R,ia,ta){function Aa(Ua){return R(Ba(Ua))}var Ba=Ob(ia),Ha=Ob(1/ia);Aa.invert=function(Ua){return Ha(R.invert(Ua))};Aa.domain=function(Ua){if(!arguments.length)return ta;R.domain((ta=Ua.map(Number)).map(Ba));return Aa};Aa.ticks=function(Ua){return Kb.range.apply(Kb,da(ta,Ua))};Aa.tickFormat=function(Ua,Oa){return xa(ta,Ua,Oa)};Aa.nice=function(Ua){return Aa.domain(W(ta,Ua))};
Aa.exponent=function(Ua){if(!arguments.length)return ia;Ba=Ob(ia=Ua);Ha=Ob(1/ia);R.domain(ta.map(Ba));return Aa};Aa.copy=function(){return Fb(R.copy(),ia,ta)};return X(Aa,R)}function Ob(R){return function(ia){return 0>ia?-Math.pow(-ia,R):Math.pow(ia,R)}}function Pb(R,ia){function ta(Oa){return Ha[((Ba.get(Oa)||("range"===ia.t?Ba.set(Oa,R.push(Oa)):NaN))-1)%Ha.length]}function Aa(Oa,Sa){return Kb.range(R.length).map(function(cb){return Oa+Sa*cb})}var Ba,Ha,Ua;ta.domain=function(Oa){if(!arguments.length)return R;
R=[];Ba=new l;for(var Sa=-1,cb=Oa.length,ib;++Sa<cb;)Ba.has(ib=Oa[Sa])||Ba.set(ib,R.push(ib));return ta[ia.t].apply(ta,ia.a)};ta.range=function(Oa){if(!arguments.length)return Ha;Ha=Oa;Ua=0;ia={t:"range",a:arguments};return ta};ta.rangePoints=function(Oa,Sa){2>arguments.length&&(Sa=0);var cb=Oa[0],ib=Oa[1];ib=2>R.length?(cb=(cb+ib)/2,0):(ib-cb)/(R.length-1+Sa);Ha=Aa(cb+ib*Sa/2,ib);Ua=0;ia={t:"rangePoints",a:arguments};return ta};ta.rangeRoundPoints=function(Oa,Sa){2>arguments.length&&(Sa=0);var cb=
Oa[0],ib=Oa[1],wb=2>R.length?(cb=ib=Math.round((cb+ib)/2),0):(ib-cb)/(R.length-1+Sa)|0;Ha=Aa(cb+Math.round(wb*Sa/2+(ib-cb-(R.length-1+Sa)*wb)/2),wb);Ua=0;ia={t:"rangeRoundPoints",a:arguments};return ta};ta.rangeBands=function(Oa,Sa,cb){2>arguments.length&&(Sa=0);3>arguments.length&&(cb=Sa);var ib=Oa[1]<Oa[0],wb=Oa[ib-0],Eb=(Oa[1-ib]-wb)/(R.length-Sa+2*cb);Ha=Aa(wb+Eb*cb,Eb);ib&&Ha.reverse();Ua=Eb*(1-Sa);ia={t:"rangeBands",a:arguments};return ta};ta.rangeRoundBands=function(Oa,Sa,cb){2>arguments.length&&
(Sa=0);3>arguments.length&&(cb=Sa);var ib=Oa[1]<Oa[0],wb=Oa[ib-0],Eb=Oa[1-ib],Lb=Math.floor((Eb-wb)/(R.length-Sa+2*cb));Ha=Aa(wb+Math.round((Eb-wb-(R.length-Sa)*Lb)/2),Lb);ib&&Ha.reverse();Ua=Math.round(Lb*(1-Sa));ia={t:"rangeRoundBands",a:arguments};return ta};ta.rangeBand=function(){return Ua};ta.rangeExtent=function(){return Pf(ia.a[0])};ta.copy=function(){return Pb(R,ia)};return ta.domain(R)}function uc(R,ia){function ta(){var Ha=0,Ua=ia.length;for(Ba=[];++Ha<Ua;)Ba[Ha-1]=Kb.quantile(R,Ha/Ua);
return Aa}function Aa(Ha){if(!isNaN(Ha=+Ha))return ia[Kb.bisect(Ba,Ha)]}var Ba;Aa.domain=function(Ha){if(!arguments.length)return R;R=Ha.map(p).filter(k).sort(n);return ta()};Aa.range=function(Ha){if(!arguments.length)return ia;ia=Ha;return ta()};Aa.quantiles=function(){return Ba};Aa.invertExtent=function(Ha){Ha=ia.indexOf(Ha);return 0>Ha?[NaN,NaN]:[0<Ha?Ba[Ha-1]:R[0],Ha<Ba.length?Ba[Ha]:R[R.length-1]]};Aa.copy=function(){return uc(R,ia)};return ta()}function sc(R,ia,ta){function Aa(Oa){return ta[Math.max(0,
Math.min(Ua,Math.floor(Ha*(Oa-R))))]}function Ba(){Ha=ta.length/(ia-R);Ua=ta.length-1;return Aa}var Ha,Ua;Aa.domain=function(Oa){if(!arguments.length)return[R,ia];R=+Oa[0];ia=+Oa[Oa.length-1];return Ba()};Aa.range=function(Oa){if(!arguments.length)return ta;ta=Oa;return Ba()};Aa.invertExtent=function(Oa){Oa=ta.indexOf(Oa);Oa=0>Oa?NaN:Oa/Ha+R;return[Oa,Oa+1/Ha]};Aa.copy=function(){return sc(R,ia,ta)};return Ba()}function hc(R,ia){function ta(Aa){if(Aa<=Aa)return ia[Kb.bisect(R,Aa)]}ta.domain=function(Aa){if(!arguments.length)return R;
R=Aa;return ta};ta.range=function(Aa){if(!arguments.length)return ia;ia=Aa;return ta};ta.invertExtent=function(Aa){Aa=ia.indexOf(Aa);return[R[Aa-1],R[Aa]]};ta.copy=function(){return hc(R,ia)};return ta}function rc(R){function ia(ta){return+ta}ia.invert=ia;ia.domain=ia.range=function(ta){if(!arguments.length)return R;R=ta.map(ia);return ia};ia.ticks=function(ta){return Kb.range.apply(Kb,da(R,ta))};ia.tickFormat=function(ta,Aa){return xa(R,ta,Aa)};ia.copy=function(){return rc(R)};return ia}function oc(){return 0}
function Nb(R){return R.innerRadius}function jc(R){return R.outerRadius}function Uc(R){return R.startAngle}function jd(R){return R.endAngle}function qd(R){return R&&R.padAngle}function Vc(R,ia,ta,Aa){return 0<(R-ta)*ia-(ia-Aa)*R?0:1}function td(R,ia,ta,Aa,Ba){var Ha=R[0]-ia[0],Ua=R[1]-ia[1];Ba=(Ba?Aa:-Aa)/Math.sqrt(Ha*Ha+Ua*Ua);Ua*=Ba;Ha*=-Ba;var Oa=R[0]+Ua,Sa=R[1]+Ha,cb=ia[0]+Ua,ib=ia[1]+Ha;R=(Oa+cb)/2;ia=(Sa+ib)/2;Ba=cb-Oa;var wb=ib-Sa,Eb=Ba*Ba+wb*wb;Aa=ta-Aa;ib=Oa*ib-cb*Sa;var Lb=(0>wb?-1:1)*Math.sqrt(Math.max(0,
Aa*Aa*Eb-ib*ib));Oa=(ib*wb-Ba*Lb)/Eb;Sa=(-ib*Ba-wb*Lb)/Eb;cb=(ib*wb+Ba*Lb)/Eb;Ba=(-ib*Ba+wb*Lb)/Eb;wb=Oa-R;Eb=Sa-ia;R=cb-R;ia=Ba-ia;wb*wb+Eb*Eb>R*R+ia*ia&&(Oa=cb,Sa=Ba);return[[Oa-Ua,Sa-Ha],[Oa*ta/Aa,Sa*ta/Aa]]}function nd(R){function ia(Sa){function cb(){ib.push("M",Ha(R(wb),Oa))}for(var ib=[],wb=[],Eb=-1,Lb=Sa.length,Mb,Zb=va(ta),cc=va(Aa);++Eb<Lb;)Ba.call(this,Mb=Sa[Eb],Eb)?wb.push([+Zb.call(this,Mb,Eb),+cc.call(this,Mb,Eb)]):wb.length&&(cb(),wb=[]);wb.length&&cb();return ib.length?ib.join(""):
null}var ta=uf,Aa=jg,Ba=Gc,Ha=Gd,Ua=Ha.key,Oa=.7;ia.x=function(Sa){if(!arguments.length)return ta;ta=Sa;return ia};ia.y=function(Sa){if(!arguments.length)return Aa;Aa=Sa;return ia};ia.defined=function(Sa){if(!arguments.length)return Ba;Ba=Sa;return ia};ia.interpolate=function(Sa){if(!arguments.length)return Ua;Ua="function"===typeof Sa?Ha=Sa:(Ha=Bk.get(Sa)||Gd).key;return ia};ia.tension=function(Sa){if(!arguments.length)return Oa;Oa=Sa;return ia};return ia}function Gd(R){return 1<R.length?R.join("L"):
R+"Z"}function Hd(R){return R.join("L")+"Z"}function zd(R){for(var ia=0,ta=R.length,Aa=R[0],Ba=[Aa[0],",",Aa[1]];++ia<ta;)Ba.push("V",(Aa=R[ia])[1],"H",Aa[0]);return Ba.join("")}function he(R){for(var ia=0,ta=R.length,Aa=R[0],Ba=[Aa[0],",",Aa[1]];++ia<ta;)Ba.push("H",(Aa=R[ia])[0],"V",Aa[1]);return Ba.join("")}function ee(R,ia){if(1>ia.length||R.length!=ia.length&&R.length!=ia.length+2)return Gd(R);var ta=R.length!=ia.length,Aa="",Ba=R[0],Ha=R[1],Ua=ia[0],Oa=Ua,Sa=1;ta&&(Aa+="Q"+(Ha[0]-2*Ua[0]/3)+
","+(Ha[1]-2*Ua[1]/3)+","+Ha[0]+","+Ha[1],Ba=R[1],Sa=2);if(1<ia.length)for(Oa=ia[1],Ha=R[Sa],Sa++,Aa+="C"+(Ba[0]+Ua[0])+","+(Ba[1]+Ua[1])+","+(Ha[0]-Oa[0])+","+(Ha[1]-Oa[1])+","+Ha[0]+","+Ha[1],Ba=2;Ba<ia.length;Ba++,Sa++)Ha=R[Sa],Oa=ia[Ba],Aa+="S"+(Ha[0]-Oa[0])+","+(Ha[1]-Oa[1])+","+Ha[0]+","+Ha[1];ta&&(R=R[Sa],Aa+="Q"+(Ha[0]+2*Oa[0]/3)+","+(Ha[1]+2*Oa[1]/3)+","+R[0]+","+R[1]);return Aa}function Ce(R,ia){var ta=[];ia=(1-ia)/2;for(var Aa,Ba=R[0],Ha=R[1],Ua=1,Oa=R.length;++Ua<Oa;)Aa=Ba,Ba=Ha,Ha=R[Ua],
ta.push([ia*(Ha[0]-Aa[0]),ia*(Ha[1]-Aa[1])]);return ta}function De(R){if(3>R.length)return Gd(R);var ia=1,ta=R.length,Aa=R[0],Ba=Aa[0],Ha=Aa[1],Ua=[Ba,Ba,Ba,(Aa=R[1])[0]],Oa=[Ha,Ha,Ha,Aa[1]];Ba=[Ba,",",Ha,"L",ze(dh,Ua),",",ze(dh,Oa)];for(R.push(R[ta-1]);++ia<=ta;)Aa=R[ia],Ua.shift(),Ua.push(Aa[0]),Oa.shift(),Oa.push(Aa[1]),Wd(Ba,Ua,Oa);R.pop();Ba.push("L",Aa);return Ba.join("")}function ze(R,ia){return R[0]*ia[0]+R[1]*ia[1]+R[2]*ia[2]+R[3]*ia[3]}function Wd(R,ia,ta){R.push("C",ze(Yk,ia),",",ze(Yk,
ta),",",ze(bg,ia),",",ze(bg,ta),",",ze(dh,ia),",",ze(dh,ta))}function oe(R,ia){return(ia[1]-R[1])/(ia[0]-R[0])}function Pe(R){for(var ia,ta=-1,Aa=R.length,Ba,Ha;++ta<Aa;)ia=R[ta],Ba=ia[0],Ha=ia[1]-df,ia[0]=Ba*Math.cos(Ha),ia[1]=Ba*Math.sin(Ha);return R}function ye(R){function ia(Eb){function Lb(){Mb.push("M",Oa(R(cc),wb),ib,cb(R(Zb.reverse()),wb),"Z")}for(var Mb=[],Zb=[],cc=[],nc=-1,Hc=Eb.length,Rc,Tc=va(ta),Xc=va(Ba),Vb=ta===Aa?function(){return Jc}:va(Aa),gc=Ba===Ha?function(){return fd}:va(Ha),
Jc,fd;++nc<Hc;)Ua.call(this,Rc=Eb[nc],nc)?(Zb.push([Jc=+Tc.call(this,Rc,nc),fd=+Xc.call(this,Rc,nc)]),cc.push([+Vb.call(this,Rc,nc),+gc.call(this,Rc,nc)])):Zb.length&&(Lb(),Zb=[],cc=[]);Zb.length&&Lb();return Mb.length?Mb.join(""):null}var ta=uf,Aa=uf,Ba=0,Ha=jg,Ua=Gc,Oa=Gd,Sa=Oa.key,cb=Oa,ib="L",wb=.7;ia.x=function(Eb){if(!arguments.length)return Aa;ta=Aa=Eb;return ia};ia.x0=function(Eb){if(!arguments.length)return ta;ta=Eb;return ia};ia.x1=function(Eb){if(!arguments.length)return Aa;Aa=Eb;return ia};
ia.y=function(Eb){if(!arguments.length)return Ha;Ba=Ha=Eb;return ia};ia.y0=function(Eb){if(!arguments.length)return Ba;Ba=Eb;return ia};ia.y1=function(Eb){if(!arguments.length)return Ha;Ha=Eb;return ia};ia.defined=function(Eb){if(!arguments.length)return Ua;Ua=Eb;return ia};ia.interpolate=function(Eb){if(!arguments.length)return Sa;Sa="function"===typeof Eb?Oa=Eb:(Oa=Bk.get(Eb)||Gd).key;cb=Oa.reverse||Oa;ib=Oa.closed?"M":"L";return ia};ia.tension=function(Eb){if(!arguments.length)return wb;wb=Eb;
return ia};return ia}function Re(R){return R.radius}function wf(R){return[R.x,R.y]}function hf(R){return function(){var ia=R.apply(this,arguments),ta=ia[0];ia=ia[1]-df;return[ta*Math.cos(ia),ta*Math.sin(ia)]}}function uh(){return 64}function af(){return"circle"}function zf(R){R=Math.sqrt(R/fe);return"M0,"+R+"A"+R+","+R+" 0 1,1 0,"+-R+"A"+R+","+R+" 0 1,1 0,"+R+"Z"}function sg(R){return function(){var ia,ta,Aa;(ia=this[R])&&(Aa=ia[ta=ia.active])&&(Aa.timer.c=null,Aa.timer.t=NaN,--ia.count?delete ia[ta]:
delete this[R],ia.active+=.5,Aa.event&&Aa.event.interrupt.call(this,this.__data__,Aa.index))}}function Vh(R,ia,ta){Ig(R,pf);R.namespace=ia;R.id=ta;return R}function Kf(R,ia,ta,Aa){var Ba=R.id,Ha=R.namespace;return Y(R,"function"===typeof ta?function(Ua,Oa,Sa){Ua[Ha][Ba].tween.set(ia,Aa(ta.call(Ua,Ua.__data__,Oa,Sa)))}:(ta=Aa(ta),function(Ua){Ua[Ha][Ba].tween.set(ia,ta)}))}function Yi(R){null==R&&(R="");return function(){this.textContent=R}}function Ae(R){return null==R?"__transition__":"__transition_"+
R+"__"}function Ne(R,ia,ta,Aa,Ba){function Ha(Zb){var cc=cb.delay;Mb.t=cc+Lb;if(cc<=Zb)return Ua(Zb-cc);Mb.c=Ua}function Ua(Zb){var cc=Sa.active,nc=Sa[cc];nc&&(nc.timer.c=null,nc.timer.t=NaN,--Sa.count,delete Sa[cc],nc.event&&nc.event.interrupt.call(R,R.__data__,nc.index));for(var Hc in Sa)+Hc<Aa&&(cc=Sa[Hc],cc.timer.c=null,cc.timer.t=NaN,--Sa.count,delete Sa[Hc]);Mb.c=Oa;eb(function(){Mb.c&&Oa(Zb||1)&&(Mb.c=null,Mb.t=NaN);return 1},0,Lb);Sa.active=Aa;cb.event&&cb.event.start.call(R,R.__data__,ia);
Eb=[];cb.tween.forEach(function(Rc,Tc){(Tc=Tc.call(R,R.__data__,ia))&&Eb.push(Tc)});wb=cb.ease;ib=cb.duration}function Oa(Zb){Zb/=ib;for(var cc=wb(Zb),nc=Eb.length;0<nc;)Eb[--nc].call(R,cc);if(1<=Zb)return cb.event&&cb.event.end.call(R,R.__data__,ia),--Sa.count?delete Sa[Aa]:delete R[ta],1}var Sa=R[ta]||(R[ta]={active:0,count:0}),cb=Sa[Aa],ib,wb,Eb;if(!cb){var Lb=Ba.time;var Mb=eb(Ha,0,Lb);cb=Sa[Aa]={tween:new l,time:Lb,timer:Mb,delay:Ba.delay,duration:Ba.duration,ease:Ba.ease,index:ia};Ba=null;++Sa.count}}
function ig(R,ia,ta){R.attr("transform",function(Aa){var Ba=ia(Aa);return"translate("+(isFinite(Ba)?Ba:ta(Aa))+",0)"})}function Rf(R,ia,ta){R.attr("transform",function(Aa){var Ba=ia(Aa);return"translate(0,"+(isFinite(Ba)?Ba:ta(Aa))+")"})}function Dg(R){return R.toISOString()}function Eg(R,ia,ta){function Aa(Ha){return R(Ha)}function Ba(Ha,Ua){var Oa=(Ha[1]-Ha[0])/Ua,Sa=Kb.bisect(vh,Oa);return Sa==vh.length?[ia.year,da(Ha.map(function(cb){return cb/31536E6}),Ua)[2]]:Sa?ia[Oa/vh[Sa-1]<vh[Sa]/Oa?Sa-
1:Sa]:[Ng,da(Ha,Ua)[2]]}Aa.invert=function(Ha){return Af(R.invert(Ha))};Aa.domain=function(Ha){if(!arguments.length)return R.domain().map(Af);R.domain(Ha);return Aa};Aa.nice=function(Ha,Ua){function Oa(ib){return!isNaN(ib)&&!Ha.range(ib,Af(+ib+1),Ua).length}var Sa=Aa.domain(),cb=Pf(Sa);if(cb=null==Ha?Ba(cb,10):"number"===typeof Ha&&Ba(cb,Ha))Ha=cb[0],Ua=cb[1];return Aa.domain(Vi(Sa,1<Ua?{floor:function(ib){for(;Oa(ib=Ha.floor(ib));)ib=Af(ib-1);return ib},ceil:function(ib){for(;Oa(ib=Ha.ceil(ib));)ib=
Af(+ib+1);return ib}}:Ha))};Aa.ticks=function(Ha,Ua){var Oa=Pf(Aa.domain()),Sa=null==Ha?Ba(Oa,10):"number"===typeof Ha?Ba(Oa,Ha):!Ha.range&&[{range:Ha},Ua];Sa&&(Ha=Sa[0],Ua=Sa[1]);return Ha.range(Oa[0],Af(+Oa[1]+1),1>Ua?1:Ua)};Aa.tickFormat=function(){return ta};Aa.copy=function(){return Eg(R.copy(),ia,ta)};return X(Aa,R)}function Af(R){return new Date(R)}function Zi(R){return JSON.parse(R.responseText)}function ti(R){var ia=xf.createRange();ia.selectNode(xf.body);return ia.createContextualFragment(R.responseText)}
var Kb={version:"3.5.17"},Zk=[].slice,dg=function(R){return Zk.call(R)},xf=this.document;if(xf)try{dg(xf.documentElement.childNodes)[0].nodeType}catch(R){dg=function(ia){for(var ta=ia.length,Aa=Array(ta);ta--;)Aa[ta]=ia[ta];return Aa}}Date.now||(Date.now=function(){return+new Date});if(xf)try{xf.createElement("DIV").style.setProperty("opacity",0,"")}catch(R){var tj=this.Element.prototype,Gf=tj.setAttribute,Wh=tj.setAttributeNS,wh=this.CSSStyleDeclaration.prototype,ui=wh.setProperty;tj.setAttribute=
function(ia,ta){Gf.call(this,ia,ta+"")};tj.setAttributeNS=function(ia,ta,Aa){Wh.call(this,ia,ta,Aa+"")};wh.setProperty=function(ia,ta,Aa){ui.call(this,ia,ta+"",Aa)}}Kb.ascending=n;Kb.descending=function(R,ia){return ia<R?-1:ia>R?1:ia>=R?0:NaN};Kb.min=function(R,ia){var ta=-1,Aa=R.length,Ba;if(1===arguments.length){for(;++ta<Aa;)if(null!=(Ba=R[ta])&&Ba>=Ba){var Ha=Ba;break}for(;++ta<Aa;)null!=(Ba=R[ta])&&Ha>Ba&&(Ha=Ba)}else{for(;++ta<Aa;)if(null!=(Ba=ia.call(R,R[ta],ta))&&Ba>=Ba){Ha=Ba;break}for(;++ta<
Aa;)null!=(Ba=ia.call(R,R[ta],ta))&&Ha>Ba&&(Ha=Ba)}return Ha};Kb.max=function(R,ia){var ta=-1,Aa=R.length,Ba;if(1===arguments.length){for(;++ta<Aa;)if(null!=(Ba=R[ta])&&Ba>=Ba){var Ha=Ba;break}for(;++ta<Aa;)null!=(Ba=R[ta])&&Ba>Ha&&(Ha=Ba)}else{for(;++ta<Aa;)if(null!=(Ba=ia.call(R,R[ta],ta))&&Ba>=Ba){Ha=Ba;break}for(;++ta<Aa;)null!=(Ba=ia.call(R,R[ta],ta))&&Ba>Ha&&(Ha=Ba)}return Ha};Kb.extent=function(R,ia){var ta=-1,Aa=R.length,Ba,Ha;if(1===arguments.length){for(;++ta<Aa;)if(null!=(Ba=R[ta])&&Ba>=
Ba){var Ua=Ha=Ba;break}for(;++ta<Aa;)null!=(Ba=R[ta])&&(Ua>Ba&&(Ua=Ba),Ha<Ba&&(Ha=Ba))}else{for(;++ta<Aa;)if(null!=(Ba=ia.call(R,R[ta],ta))&&Ba>=Ba){Ua=Ha=Ba;break}for(;++ta<Aa;)null!=(Ba=ia.call(R,R[ta],ta))&&(Ua>Ba&&(Ua=Ba),Ha<Ba&&(Ha=Ba))}return[Ua,Ha]};Kb.sum=function(R,ia){var ta=0,Aa=R.length,Ba,Ha=-1;if(1===arguments.length)for(;++Ha<Aa;)isNaN(Ba=+R[Ha])||(ta+=Ba);else for(;++Ha<Aa;)isNaN(Ba=+ia.call(R,R[Ha],Ha))||(ta+=Ba);return ta};Kb.mean=function(R,ia){var ta=0,Aa=R.length,Ba,Ha=-1,Ua=
Aa;if(1===arguments.length)for(;++Ha<Aa;)isNaN(Ba=p(R[Ha]))?--Ua:ta+=Ba;else for(;++Ha<Aa;)isNaN(Ba=p(ia.call(R,R[Ha],Ha)))?--Ua:ta+=Ba;if(Ua)return ta/Ua};Kb.quantile=function(R,ia){var ta=(R.length-1)*ia+1;ia=Math.floor(ta);var Aa=+R[ia-1];return(ta-=ia)?Aa+ta*(R[ia]-Aa):Aa};Kb.median=function(R,ia){var ta=[],Aa=R.length,Ba,Ha=-1;if(1===arguments.length)for(;++Ha<Aa;)isNaN(Ba=p(R[Ha]))||ta.push(Ba);else for(;++Ha<Aa;)isNaN(Ba=p(ia.call(R,R[Ha],Ha)))||ta.push(Ba);if(ta.length)return Kb.quantile(ta.sort(n),
.5)};Kb.variance=function(R,ia){var ta=R.length,Aa=0,Ba,Ha=0,Ua=-1,Oa=0;if(1===arguments.length)for(;++Ua<ta;){if(!isNaN(Ba=p(R[Ua]))){var Sa=Ba-Aa;Aa+=Sa/++Oa;Ha+=Sa*(Ba-Aa)}}else for(;++Ua<ta;)isNaN(Ba=p(ia.call(R,R[Ua],Ua)))||(Sa=Ba-Aa,Aa+=Sa/++Oa,Ha+=Sa*(Ba-Aa));if(1<Oa)return Ha/(Oa-1)};Kb.deviation=function(){var R=Kb.variance.apply(this,arguments);return R?Math.sqrt(R):R};var Xh=a(n);Kb.bisectLeft=Xh.left;Kb.bisect=Kb.bisectRight=Xh.right;Kb.bisector=function(R){return a(1===R.length?function(ia,
ta){return n(R(ia),ta)}:R)};Kb.shuffle=function(R,ia,ta){3>(Aa=arguments.length)&&(ta=R.length,2>Aa&&(ia=0));for(var Aa=ta-ia,Ba,Ha;Aa;)Ha=Math.random()*Aa--|0,Ba=R[Aa+ia],R[Aa+ia]=R[Ha+ia],R[Ha+ia]=Ba;return R};Kb.permute=function(R,ia){for(var ta=ia.length,Aa=Array(ta);ta--;)Aa[ta]=R[ia[ta]];return Aa};Kb.pairs=function(R){for(var ia=0,ta=R.length-1,Aa=R[0],Ba=Array(0>ta?0:ta);ia<ta;)Ba[ia]=[Aa,Aa=R[++ia]];return Ba};Kb.transpose=function(R){if(!(Ha=R.length))return[];for(var ia=-1,ta=Kb.min(R,
e),Aa=Array(ta);++ia<ta;)for(var Ba=-1,Ha,Ua=Aa[ia]=Array(Ha);++Ba<Ha;)Ua[Ba]=R[Ba][ia];return Aa};Kb.zip=function(){return Kb.transpose(arguments)};Kb.keys=function(R){var ia=[],ta;for(ta in R)ia.push(ta);return ia};Kb.values=function(R){var ia=[],ta;for(ta in R)ia.push(R[ta]);return ia};Kb.entries=function(R){var ia=[],ta;for(ta in R)ia.push({key:ta,value:R[ta]});return ia};Kb.merge=function(R){var ia=R.length;var ta=-1;for(var Aa=0,Ba,Ha;++ta<ia;)Aa+=R[ta].length;for(Ba=Array(Aa);0<=--ia;)for(Ha=
R[ia],ta=Ha.length;0<=--ta;)Ba[--Aa]=Ha[ta];return Ba};var de=Math.abs;Kb.range=function(R,ia,ta){3>arguments.length&&(ta=1,2>arguments.length&&(ia=R,R=0));if(Infinity===(ia-R)/ta)throw Error("infinite range");var Aa=[];var Ba=de(ta);for(var Ha=1;Ba*Ha%1;)Ha*=10;Ba=Ha;Ha=-1;var Ua;R*=Ba;ia*=Ba;ta*=Ba;if(0>ta)for(;(Ua=R+ta*++Ha)>ia;)Aa.push(Ua/Ba);else for(;(Ua=R+ta*++Ha)<ia;)Aa.push(Ua/Ba);return Aa};Kb.map=function(R,ia){var ta=new l;if(R instanceof l)R.forEach(function(Ua,Oa){ta.set(Ua,Oa)});else if(Array.isArray(R)){var Aa=
-1,Ba=R.length,Ha;if(1===arguments.length)for(;++Aa<Ba;)ta.set(Aa,R[Aa]);else for(;++Aa<Ba;)ta.set(ia.call(R,Ha=R[Aa],Aa),Ha)}else for(Aa in R)ta.set(Aa,R[Aa]);return ta};f(l,{has:d,get:function(R){return this._[m(R)]},set:function(R,ia){return this._[m(R)]=ia},remove:g,keys:h,values:function(){var R=[],ia;for(ia in this._)R.push(this._[ia]);return R},entries:function(){var R=[],ia;for(ia in this._)R.push({key:c(ia),value:this._[ia]});return R},size:q,empty:t,forEach:function(R){for(var ia in this._)R.call(this,
c(ia),this._[ia])}});Kb.nest=function(){function R(Oa,Sa,cb){if(cb>=Aa.length)return Ua?Ua.call(ta,Sa):Ha?Sa.sort(Ha):Sa;for(var ib=-1,wb=Sa.length,Eb=Aa[cb++],Lb,Mb,Zb=new l,cc;++ib<wb;)(cc=Zb.get(Lb=Eb(Mb=Sa[ib])))?cc.push(Mb):Zb.set(Lb,[Mb]);Oa?(Mb=Oa(),Sa=function(nc,Hc){Mb.set(nc,R(Oa,Hc,cb))}):(Mb={},Sa=function(nc,Hc){Mb[nc]=R(Oa,Hc,cb)});Zb.forEach(Sa);return Mb}function ia(Oa,Sa){if(Sa>=Aa.length)return Oa;var cb=[],ib=Ba[Sa++];Oa.forEach(function(wb,Eb){cb.push({key:wb,values:ia(Eb,Sa)})});
return ib?cb.sort(function(wb,Eb){return ib(wb.key,Eb.key)}):cb}var ta={},Aa=[],Ba=[],Ha,Ua;ta.map=function(Oa,Sa){return R(Sa,Oa,0)};ta.entries=function(Oa){return ia(R(Kb.map,Oa,0),0)};ta.key=function(Oa){Aa.push(Oa);return ta};ta.sortKeys=function(Oa){Ba[Aa.length-1]=Oa;return ta};ta.sortValues=function(Oa){Ha=Oa;return ta};ta.rollup=function(Oa){Ua=Oa;return ta};return ta};Kb.set=function(R){var ia=new v;if(R)for(var ta=0,Aa=R.length;ta<Aa;++ta)ia.add(R[ta]);return ia};f(v,{has:d,add:function(R){this._[m(R+=
"")]=!0;return R},remove:g,values:h,size:q,empty:t,forEach:function(R){for(var ia in this._)R.call(this,c(ia))}});Kb.behavior={};Kb.rebind=function(R,ia){for(var ta=1,Aa=arguments.length,Ba;++ta<Aa;)R[Ba=arguments[ta]]=A(R,ia,ia[Ba]);return R};var Ah="webkit ms moz Moz o O".split(" ");Kb.dispatch=function(){for(var R=new B,ia=-1,ta=arguments.length;++ia<ta;)R[arguments[ia]]=C(R);return R};B.prototype.on=function(R,ia){var ta=R.indexOf("."),Aa="";0<=ta&&(Aa=R.slice(ta+1),R=R.slice(0,ta));if(R)return 2>
arguments.length?this[R].on(Aa):this[R].on(Aa,ia);if(2===arguments.length){if(null==ia)for(R in this)if(this.hasOwnProperty(R))this[R].on(Aa,null);return this}};Kb.event=null;Kb.requote=function(R){return R.replace(vi,"\\$\x26")};var vi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ig={}.__proto__?function(R,ia){R.__proto__=ia}:function(R,ia){for(var ta in ia)R[ta]=ia[ta]},rk=function(R,ia){return ia.querySelector(R)},sk=function(R,ia){return ia.querySelectorAll(R)},Lj=function(R,ia){var ta=R.matches||R[z(R,
"matchesSelector")];Lj=function(Aa,Ba){return ta.call(Aa,Ba)};return Lj(R,ia)};"function"===typeof Sizzle&&(rk=function(R,ia){return Sizzle(R,ia)[0]||null},sk=Sizzle,Lj=Sizzle.matchesSelector);Kb.selection=function(){return Kb.select(xf.documentElement)};var He=Kb.selection.prototype=[];He.select=function(R){var ia=[],ta,Aa,Ba,Ha;R=I(R);for(var Ua=-1,Oa=this.length;++Ua<Oa;){ia.push(ta=[]);ta.parentNode=(Ba=this[Ua]).parentNode;for(var Sa=-1,cb=Ba.length;++Sa<cb;)(Ha=Ba[Sa])?(ta.push(Aa=R.call(Ha,
Ha.__data__,Sa,Ua)),Aa&&"__data__"in Ha&&(Aa.__data__=Ha.__data__)):ta.push(null)}return J(ia)};He.selectAll=function(R){var ia=[],ta,Aa;R=M(R);for(var Ba=-1,Ha=this.length;++Ba<Ha;)for(var Ua=this[Ba],Oa=-1,Sa=Ua.length;++Oa<Sa;)if(Aa=Ua[Oa])ia.push(ta=dg(R.call(Aa,Aa.__data__,Oa,Ba))),ta.parentNode=Aa;return J(ia)};var Ck={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
Kb.ns={prefix:Ck,qualify:function(R){var ia=R.indexOf(":"),ta=R;0<=ia&&"xmlns"!==(ta=R.slice(0,ia))&&(R=R.slice(ia+1));return Ck.hasOwnProperty(ta)?{space:Ck[ta],local:R}:R}};He.attr=function(R,ia){if(2>arguments.length){if("string"===typeof R){var ta=this.node();R=Kb.ns.qualify(R);return R.local?ta.getAttributeNS(R.space,R.local):ta.getAttribute(R)}for(ia in R)this.each(E(ia,R[ia]));return this}return this.each(E(R,ia))};He.classed=function(R,ia){if(2>arguments.length){if("string"===typeof R){var ta=
this.node(),Aa=(R=(R+"").trim().split(/^|\s+/)).length,Ba=-1;if(ia=ta.classList)for(;++Ba<Aa;){if(!ia.contains(R[Ba]))return!1}else for(ia=ta.getAttribute("class");++Ba<Aa;)if(!L(R[Ba]).test(ia))return!1;return!0}for(ia in R)this.each(P(ia,R[ia]));return this}return this.each(P(R,ia))};He.style=function(R,ia,ta){var Aa=arguments.length;if(3>Aa){if("string"!==typeof R){2>Aa&&(ia="");for(ta in R)this.each(Q(ta,R[ta],ia));return this}if(2>Aa)return Aa=this.node(),r(Aa).getComputedStyle(Aa,null).getPropertyValue(R);
ta=""}return this.each(Q(R,ia,ta))};He.property=function(R,ia){if(2>arguments.length){if("string"===typeof R)return this.node()[R];for(ia in R)this.each(O(ia,R[ia]));return this}return this.each(O(R,ia))};He.text=function(R){return arguments.length?this.each("function"===typeof R?function(){var ia=R.apply(this,arguments);this.textContent=null==ia?"":ia}:null==R?function(){this.textContent=""}:function(){this.textContent=R}):this.node().textContent};He.html=function(R){return arguments.length?this.each("function"===
typeof R?function(){var ia=R.apply(this,arguments);this.innerHTML=null==ia?"":ia}:null==R?function(){this.innerHTML=""}:function(){this.innerHTML=R}):this.node().innerHTML};He.append=function(R){R=T(R);return this.select(function(){return this.appendChild(R.apply(this,arguments))})};He.insert=function(R,ia){R=T(R);ia=I(ia);return this.select(function(){return this.insertBefore(R.apply(this,arguments),ia.apply(this,arguments)||null)})};He.remove=function(){return this.each(V)};He.data=function(R,ia){function ta(ib,
wb){var Eb,Lb=ib.length,Mb=wb.length,Zb=Math.min(Lb,Mb),cc=Array(Mb),nc=Array(Mb),Hc=Array(Lb),Rc,Tc;if(ia){Zb=new l;var Xc=Array(Lb),Vb;for(Eb=-1;++Eb<Lb;)if(Rc=ib[Eb])Zb.has(Vb=ia.call(Rc,Rc.__data__,Eb))?Hc[Eb]=Rc:Zb.set(Vb,Rc),Xc[Eb]=Vb;for(Eb=-1;++Eb<Mb;)(Rc=Zb.get(Vb=ia.call(wb,Tc=wb[Eb],Eb)))?!0!==Rc&&(cc[Eb]=Rc,Rc.__data__=Tc):nc[Eb]={__data__:Tc},Zb.set(Vb,!0);for(Eb=-1;++Eb<Lb;)Eb in Xc&&!0!==Zb.get(Xc[Eb])&&(Hc[Eb]=ib[Eb])}else{for(Eb=-1;++Eb<Zb;)Rc=ib[Eb],Tc=wb[Eb],Rc?(Rc.__data__=Tc,
cc[Eb]=Rc):nc[Eb]={__data__:Tc};for(;Eb<Mb;++Eb)nc[Eb]={__data__:wb[Eb]};for(;Eb<Lb;++Eb)Hc[Eb]=ib[Eb]}nc.update=cc;nc.parentNode=cc.parentNode=Hc.parentNode=ib.parentNode;Oa.push(nc);Sa.push(cc);cb.push(Hc)}var Aa=-1,Ba=this.length,Ha,Ua;if(!arguments.length){for(R=Array(Ba=(Ha=this[0]).length);++Aa<Ba;)if(Ua=Ha[Aa])R[Aa]=Ua.__data__;return R}var Oa=ea([]),Sa=J([]),cb=J([]);if("function"===typeof R)for(;++Aa<Ba;)ta(Ha=this[Aa],R.call(Ha,Ha.parentNode.__data__,Aa));else for(;++Aa<Ba;)ta(Ha=this[Aa],
R);Sa.enter=function(){return Oa};Sa.exit=function(){return cb};return Sa};He.datum=function(R){return arguments.length?this.property("__data__",R):this.property("__data__")};He.filter=function(R){var ia=[],ta,Aa,Ba;"function"!==typeof R&&(R=Z(R));for(var Ha=0,Ua=this.length;Ha<Ua;Ha++){ia.push(ta=[]);ta.parentNode=(Aa=this[Ha]).parentNode;for(var Oa=0,Sa=Aa.length;Oa<Sa;Oa++)(Ba=Aa[Oa])&&R.call(Ba,Ba.__data__,Oa,Ha)&&ta.push(Ba)}return J(ia)};He.order=function(){for(var R=-1,ia=this.length;++R<ia;)for(var ta=
this[R],Aa=ta.length-1,Ba=ta[Aa],Ha;0<=--Aa;)if(Ha=ta[Aa])Ba&&Ba!==Ha.nextSibling&&Ba.parentNode.insertBefore(Ha,Ba),Ba=Ha;return this};He.sort=function(R){R=aa.apply(this,arguments);for(var ia=-1,ta=this.length;++ia<ta;)this[ia].sort(R);return this.order()};He.each=function(R){return Y(this,function(ia,ta,Aa){R.call(ia,ia.__data__,ta,Aa)})};He.call=function(R){var ia=dg(arguments);R.apply(ia[0]=this,ia);return this};He.empty=function(){return!this.node()};He.node=function(){for(var R=0,ia=this.length;R<
ia;R++)for(var ta=this[R],Aa=0,Ba=ta.length;Aa<Ba;Aa++){var Ha=ta[Aa];if(Ha)return Ha}return null};He.size=function(){var R=0;Y(this,function(){++R});return R};var hh=[];Kb.selection.enter=ea;Kb.selection.enter.prototype=hh;hh.append=He.append;hh.empty=He.empty;hh.node=He.node;hh.call=He.call;hh.size=He.size;hh.select=function(R){for(var ia=[],ta,Aa,Ba,Ha,Ua,Oa=-1,Sa=this.length;++Oa<Sa;){Ba=(Ha=this[Oa]).update;ia.push(ta=[]);ta.parentNode=Ha.parentNode;for(var cb=-1,ib=Ha.length;++cb<ib;)(Ua=Ha[cb])?
(ta.push(Ba[cb]=Aa=R.call(Ha.parentNode,Ua.__data__,cb,Oa)),Aa.__data__=Ua.__data__):ta.push(null)}return J(ia)};hh.insert=function(R,ia){2>arguments.length&&(ia=ca(this));return He.insert.call(this,R,ia)};Kb.select=function(R){if("string"===typeof R){var ia=[rk(R,xf)];ia.parentNode=xf.documentElement}else ia=[R],ia.parentNode=R&&(R.ownerDocument||R.document||R).documentElement;return J([ia])};Kb.selectAll=function(R){"string"===typeof R?(R=dg(sk(R,xf)),R.parentNode=xf.documentElement):(R=dg(R),R.parentNode=
null);return J([R])};He.on=function(R,ia,ta){var Aa=arguments.length;if(3>Aa){if("string"!==typeof R){2>Aa&&(ia=!1);for(ta in R)this.each(ba(ta,R[ta],ia));return this}if(2>Aa)return(Aa=this.node()["__on"+R])&&Aa._;ta=!1}return this.each(ba(R,ia,ta))};var ih=Kb.map({mouseenter:"mouseover",mouseleave:"mouseout"});xf&&ih.forEach(function(R){"on"+R in xf&&ih.remove(R)});var lg,Li=0;Kb.mouse=function(R){return oa(R,F())};var fi=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;Kb.touch=function(R,
ia,ta){3>arguments.length&&(ta=ia,ia=F().changedTouches);if(ia)for(var Aa=0,Ba=ia.length,Ha;Aa<Ba;++Aa)if((Ha=ia[Aa]).identifier===ta)return oa(R,Ha)};Kb.behavior.drag=function(){function R(){this.on("mousedown.drag",Ba).on("touchstart.drag",Ha)}function ia(Ua,Oa,Sa,cb,ib){return function(){var wb=Kb.event.target.correspondingElement||Kb.event.target,Eb=this.parentNode,Lb=ta.of(this,arguments),Mb=0,Zb=Ua(),cc=".drag"+(null==Zb?"":"-"+Zb),nc=Kb.select(Sa(wb)).on(cb+cc,function(){var Xc=Oa(Eb,Zb);if(Xc){var Vb=
Xc[0]-Rc[0];var gc=Xc[1]-Rc[1];Mb|=Vb|gc;Rc=Xc;Lb({type:"drag",x:Xc[0]+Tc[0],y:Xc[1]+Tc[1],dx:Vb,dy:gc})}}).on(ib+cc,function(){Oa(Eb,Zb)&&(nc.on(cb+cc,null).on(ib+cc,null),Hc(Mb),Lb({type:"dragend"}))}),Hc=pa(wb),Rc=Oa(Eb,Zb);if(Aa){var Tc=Aa.apply(this,arguments);Tc=[Tc.x-Rc[0],Tc.y-Rc[1]]}else Tc=[0,0];Lb({type:"dragstart"})}}var ta=H(R,"drag","dragstart","dragend"),Aa=null,Ba=ia(y,Kb.mouse,r,"mousemove","mouseup"),Ha=ia(ja,Kb.touch,w,"touchmove","touchend");R.origin=function(Ua){if(!arguments.length)return Aa;
Aa=Ua;return R};return Kb.rebind(R,ta,"on")};Kb.touches=function(R,ia){2>arguments.length&&(ia=F().touches);return ia?dg(ia).map(function(ta){var Aa=oa(R,ta);Aa.identifier=ta.identifier;return Aa}):[]};var fe=Math.PI,Ef=2*fe,uj=Ef-1E-6,df=fe/2,ke=fe/180,We=180/fe,vj=Math.SQRT2;Kb.interpolateZoom=function(R,ia){var ta=R[0],Aa=R[1],Ba=R[2];R=ia[2];var Ha=ia[0]-ta,Ua=ia[1]-Aa,Oa=Ha*Ha+Ua*Ua;if(1E-12>Oa){var Sa=Math.log(R/Ba)/vj;R=function(wb){return[ta+wb*Ha,Aa+wb*Ua,Ba*Math.exp(vj*wb*Sa)]}}else{var cb=
Math.sqrt(Oa);ia=(R*R-Ba*Ba+4*Oa)/(4*Ba*cb);R=(R*R-Ba*Ba-4*Oa)/(4*R*cb);var ib=Math.log(Math.sqrt(ia*ia+1)-ia);Sa=(Math.log(Math.sqrt(R*R+1)-R)-ib)/vj;R=function(wb){wb*=Sa;var Eb=ua(ib),Lb=vj*wb+ib;var Mb=((Lb=Math.exp(2*Lb))-1)/(Lb+1);var Zb=ib;Lb=((Zb=Math.exp(Zb))-1/Zb)/2;Mb=Ba/(2*cb)*(Eb*Mb-Lb);return[ta+Mb*Ha,Aa+Mb*Ua,Ba*Eb/ua(vj*wb+ib)]}}R.duration=1E3*Sa;return R};Kb.behavior.zoom=function(){function R(ad){ad.on("mousedown.zoom",cb).on(ck+".zoom",wb).on("dblclick.zoom",Eb).on("touchstart.zoom",
ib)}function ia(ad){return[(ad[0]-Lb.x)/Lb.k,(ad[1]-Lb.y)/Lb.k]}function ta(ad){Lb.k=Math.max(Hc[0],Math.min(Hc[1],ad))}function Aa(ad,Md){Md=[Md[0]*Lb.k+Lb.x,Md[1]*Lb.k+Lb.y];Lb.x+=ad[0]-Md[0];Lb.y+=ad[1]-Md[1]}function Ba(ad,Md,$d,ie){ad.__chart__={x:Lb.x,y:Lb.y,k:Lb.k};ta(Math.pow(2,ie));Aa(Zb=Md,$d);ad=Kb.select(ad);0<Rc&&(ad=ad.transition().duration(Rc));ad.call(R.event)}function Ha(){fd&&fd.domain(Jc.range().map(function(ad){return(ad-Lb.x)/Lb.k}).map(Jc.invert));id&&id.domain(hd.range().map(function(ad){return(ad-
Lb.y)/Lb.k}).map(hd.invert))}function Ua(ad){Tc++||ad({type:"zoomstart"})}function Oa(ad){Ha();ad({type:"zoom",scale:Lb.k,translate:[Lb.x,Lb.y]})}function Sa(ad){--Tc||(ad({type:"zoomend"}),Zb=null)}function cb(){var ad=this,Md=gc.of(ad,arguments),$d=0,ie=Kb.select(r(ad)).on("mousemove.zoom",function(){$d=1;Aa(Kb.mouse(ad),ne);Oa(Md)}).on("mouseup.zoom",function(){ie.on("mousemove.zoom",null).on("mouseup.zoom",null);le($d);Sa(Md)}),ne=ia(Kb.mouse(ad)),le=pa(ad);Bf.call(ad);Ua(Md)}function ib(){function ad(){var Ue=
Kb.touches(ne);Df=Lb.k;Ue.forEach(function(Le){Le.identifier in we&&(we[Le.identifier]=ia(Le))});return Ue}function Md(){var Ue=Kb.event.target;Kb.select(Ue).on(ng,$d).on(ii,ie);kj.push(Ue);Ue=Kb.event.changedTouches;for(var Le=0,tg=Ue.length;Le<tg;++Le)we[Ue[Le].identifier]=null;Le=ad();tg=Date.now();1===Le.length?(500>tg-Vb&&(Ue=Le[0],Ba(ne,Ue,we[Ue.identifier],Math.floor(Math.log(Lb.k)/Math.LN2)+1),u()),Vb=tg):1<Le.length&&(Ue=Le[0],tg=Le[1],Le=Ue[0]-tg[0],Ue=Ue[1]-tg[1],Yd=Le*Le+Ue*Ue)}function $d(){var Ue=
Kb.touches(ne),Le;Bf.call(ne);for(var tg=0,Dk=Ue.length;tg<Dk;++tg,Le=null){var wi=Ue[tg];if(Le=we[wi.identifier]){if($i)break;var xi=wi;var $i=Le}}if(Le){var Yh=(Yh=wi[0]-xi[0])*Yh+(Yh=wi[1]-xi[1])*Yh;Ue=Yd&&Math.sqrt(Yh/Yd);xi=[(xi[0]+wi[0])/2,(xi[1]+wi[1])/2];$i=[($i[0]+Le[0])/2,($i[1]+Le[1])/2];ta(Ue*Df)}Vb=null;Aa(xi,$i);Oa(le)}function ie(){if(Kb.event.touches.length){for(var Ue=Kb.event.changedTouches,Le=0,tg=Ue.length;Le<tg;++Le)delete we[Ue[Le].identifier];for(var Dk in we)return void ad()}Kb.selectAll(kj).on(ef,
null);lh.on("mousedown.zoom",cb).on("touchstart.zoom",ib);lj();Sa(le)}var ne=this,le=gc.of(ne,arguments),we={},Yd=0,Df,ef=".zoom-"+Kb.event.changedTouches[0].identifier,ng="touchmove"+ef,ii="touchend"+ef,kj=[],lh=Kb.select(ne),lj=pa(ne);Md();Ua(le);lh.on("mousedown.zoom",null).on("touchstart.zoom",Md)}function wb(){var ad=gc.of(this,arguments);Xc?clearTimeout(Xc):(Bf.call(this),Mb=ia(Zb=cc||Kb.mouse(this)),Ua(ad));Xc=setTimeout(function(){Xc=null;Sa(ad)},50);u();ta(Math.pow(2,.002*dk())*Lb.k);Aa(Zb,
Mb);Oa(ad)}function Eb(){var ad=Kb.mouse(this),Md=Math.log(Lb.k)/Math.LN2;Ba(this,ad,ia(ad),Kb.event.shiftKey?Math.ceil(Md)-1:Math.floor(Md)+1)}var Lb={x:0,y:0,k:1},Mb,Zb,cc,nc=[960,500],Hc=$k,Rc=250,Tc=0,Xc,Vb,gc=H(R,"zoomstart","zoom","zoomend"),Jc,fd,hd,id;ck||(ck="onwheel"in xf?(dk=function(){return-Kb.event.deltaY*(Kb.event.deltaMode?120:1)},"wheel"):"onmousewheel"in xf?(dk=function(){return Kb.event.wheelDelta},"mousewheel"):(dk=function(){return-Kb.event.detail},"MozMousePixelScroll"));R.event=
function(ad){ad.each(function(){var Md=gc.of(this,arguments),$d=Lb;yi?Kb.select(this).transition().each("start.zoom",function(){Lb=this.__chart__||{x:0,y:0,k:1};Ua(Md)}).tween("zoom:zoom",function(){var ie=nc[0],ne=nc[1],le=Zb?Zb[0]:ie/2,we=Zb?Zb[1]:ne/2,Yd=Kb.interpolateZoom([(le-Lb.x)/Lb.k,(we-Lb.y)/Lb.k,ie/Lb.k],[(le-$d.x)/$d.k,(we-$d.y)/$d.k,ie/$d.k]);return function(Df){Df=Yd(Df);var ef=ie/Df[2];this.__chart__=Lb={x:le-Df[0]*ef,y:we-Df[1]*ef,k:ef};Oa(Md)}}).each("interrupt.zoom",function(){Sa(Md)}).each("end.zoom",
function(){Sa(Md)}):(this.__chart__=Lb,Ua(Md),Oa(Md),Sa(Md))})};R.translate=function(ad){if(!arguments.length)return[Lb.x,Lb.y];Lb={x:+ad[0],y:+ad[1],k:Lb.k};Ha();return R};R.scale=function(ad){if(!arguments.length)return Lb.k;Lb={x:Lb.x,y:Lb.y,k:null};ta(+ad);Ha();return R};R.scaleExtent=function(ad){if(!arguments.length)return Hc;Hc=null==ad?$k:[+ad[0],+ad[1]];return R};R.center=function(ad){if(!arguments.length)return cc;cc=ad&&[+ad[0],+ad[1]];return R};R.size=function(ad){if(!arguments.length)return nc;
nc=ad&&[+ad[0],+ad[1]];return R};R.duration=function(ad){if(!arguments.length)return Rc;Rc=+ad;return R};R.x=function(ad){if(!arguments.length)return fd;fd=ad;Jc=ad.copy();Lb={x:0,y:0,k:1};return R};R.y=function(ad){if(!arguments.length)return id;id=ad;hd=ad.copy();Lb={x:0,y:0,k:1};return R};return Kb.rebind(R,gc,"on")};var $k=[0,Infinity],dk,ck;Kb.color=wa;wa.prototype.toString=function(){return this.rgb()+""};Kb.hsl=Ca;var aj=Ca.prototype=new wa;aj.brighter=function(R){R=Math.pow(.7,arguments.length?
R:1);return new Ca(this.h,this.s,this.l/R)};aj.darker=function(R){R=Math.pow(.7,arguments.length?R:1);return new Ca(this.h,this.s,R*this.l)};aj.rgb=function(){return Fa(this.h,this.s,this.l)};Kb.hcl=Xa;var zi=Xa.prototype=new wa;zi.brighter=function(R){return new Xa(this.h,this.c,Math.min(100,this.l+Ai*(arguments.length?R:1)))};zi.darker=function(R){return new Xa(this.h,this.c,Math.max(0,this.l-Ai*(arguments.length?R:1)))};zi.rgb=function(){return ab(this.h,this.c,this.l).rgb()};Kb.lab=gb;var Ai=
18,Mj=.95047,Pd=1,Nj=1.08883,Hf=gb.prototype=new wa;Hf.brighter=function(R){return new gb(Math.min(100,this.l+Ai*(arguments.length?R:1)),this.a,this.b)};Hf.darker=function(R){return new gb(Math.max(0,this.l-Ai*(arguments.length?R:1)),this.a,this.b)};Hf.rgb=function(){return bb(this.l,this.a,this.b)};Kb.rgb=Ia;var Og=Ia.prototype=new wa;Og.brighter=function(R){R=Math.pow(.7,arguments.length?R:1);var ia=this.r,ta=this.g,Aa=this.b;if(!ia&&!ta&&!Aa)return new Ia(30,30,30);ia&&30>ia&&(ia=30);ta&&30>ta&&
(ta=30);Aa&&30>Aa&&(Aa=30);return new Ia(Math.min(255,ia/R),Math.min(255,ta/R),Math.min(255,Aa/R))};Og.darker=function(R){R=Math.pow(.7,arguments.length?R:1);return new Ia(R*this.r,R*this.g,R*this.b)};Og.hsl=function(){return Ya(this.r,this.g,this.b)};Og.toString=function(){return"#"+Ta(this.r)+Ta(this.g)+Ta(this.b)};var ij=Kb.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,
brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,
darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,
lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,
rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ij.forEach(function(R,
ia){ij.set(R,new Ia(ia>>16,ia>>8&255,ia&255))});Kb.functor=va;Kb.xhr=Ea(w);Kb.dsv=function(R,ia){function ta(cb,ib,wb){3>arguments.length&&(wb=ib,ib=null);var Eb=Qa(cb,ia,null==ib?Aa:Ba(ib),wb);Eb.row=function(Lb){return arguments.length?Eb.response(null==(ib=Lb)?Aa:Ba(Lb)):ib};return Eb}function Aa(cb){return ta.parse(cb.responseText)}function Ba(cb){return function(ib){return ta.parse(ib.responseText,cb)}}function Ha(cb){return cb.map(Ua).join(R)}function Ua(cb){return Oa.test(cb)?'"'+cb.replace(/"/g,
'""')+'"':cb}var Oa=new RegExp('["'+R+"\n]"),Sa=R.charCodeAt(0);ta.parse=function(cb,ib){var wb;return ta.parseRows(cb,function(Eb,Lb){if(wb)return wb(Eb,Lb-1);var Mb=new Function("d","return {"+Eb.map(function(Zb,cc){return JSON.stringify(Zb)+": d["+cc+"]"}).join(",")+"}");wb=ib?function(Zb,cc){return ib(Mb(Zb),cc)}:Mb})};ta.parseRows=function(cb,ib){function wb(){if(cc>=Zb)return Lb;if(Rc)return Rc=!1,Eb;var Xc=cc;if(34===cb.charCodeAt(Xc)){for(var Vb=Xc;Vb++<Zb;)if(34===cb.charCodeAt(Vb)){if(34!==
cb.charCodeAt(Vb+1))break;++Vb}cc=Vb+2;var gc=cb.charCodeAt(Vb+1);13===gc?(Rc=!0,10===cb.charCodeAt(Vb+2)&&++cc):10===gc&&(Rc=!0);return cb.slice(Xc+1,Vb).replace(/""/g,'"')}for(;cc<Zb;){gc=cb.charCodeAt(cc++);Vb=1;if(10===gc)Rc=!0;else if(13===gc)Rc=!0,10===cb.charCodeAt(cc)&&(++cc,++Vb);else if(gc!==Sa)continue;return cb.slice(Xc,cc-Vb)}return cb.slice(Xc)}for(var Eb={},Lb={},Mb=[],Zb=cb.length,cc=0,nc=0,Hc,Rc;(Hc=wb())!==Lb;){for(var Tc=[];Hc!==Eb&&Hc!==Lb;)Tc.push(Hc),Hc=wb();ib&&null==(Tc=ib(Tc,
nc++))||Mb.push(Tc)}return Mb};ta.format=function(cb){if(Array.isArray(cb[0]))return ta.formatRows(cb);var ib=new v,wb=[];cb.forEach(function(Eb){for(var Lb in Eb)ib.has(Lb)||wb.push(ib.add(Lb))});return[wb.map(Ua).join(R)].concat(cb.map(function(Eb){return wb.map(function(Lb){return Ua(Eb[Lb])}).join(R)})).join("\n")};ta.formatRows=function(cb){return cb.map(Ha).join("\n")};return ta};Kb.csv=Kb.dsv(",","text/csv");Kb.tsv=Kb.dsv("\t","text/tab-separated-values");var Mi,jj,Nf,Oe,gi=this[z(this,"requestAnimationFrame")]||
function(R){setTimeout(R,17)};Kb.timer=function(){eb.apply(this,arguments)};Kb.timer.flush=function(){Za();nb()};Kb.round=function(R,ia){return ia?Math.round(R*(ia=Math.pow(10,ia)))/ia:Math.round(R)};var wj="y z a f p n µ m  k M G T P E Z Y".split(" ").map(function(R,ia){var ta=Math.pow(10,3*de(8-ia));return{scale:8<ia?function(Aa){return Aa/ta}:function(Aa){return Aa*ta},symbol:R}});Kb.formatPrefix=function(R,ia){var ta=0;if(R=+R)0>R&&(R*=-1),ia&&(R=Kb.round(R,sb(R,ia))),ta=1+Math.floor(1E-12+Math.log(R)/
Math.LN10),ta=Math.max(-24,Math.min(24,3*Math.floor((ta-1)/3)));return wj[8+ta/3]};var Rg=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,tk=Kb.map({b:function(R){return R.toString(2)},c:function(R){return String.fromCharCode(R)},o:function(R){return R.toString(8)},x:function(R){return R.toString(16)},X:function(R){return R.toString(16).toUpperCase()},g:function(R,ia){return R.toPrecision(ia)},e:function(R,ia){return R.toExponential(ia)},f:function(R,ia){return R.toFixed(ia)},
r:function(R,ia){return(R=Kb.round(R,sb(R,ia))).toFixed(Math.max(0,Math.min(20,sb(R*(1+1E-15),ia))))}}),Qd=Kb.time={},mf=Date;fc.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){qf.setUTCDate.apply(this._,arguments)},setDay:function(){qf.setUTCDay.apply(this._,arguments)},setFullYear:function(){qf.setUTCFullYear.apply(this._,arguments)},setHours:function(){qf.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){qf.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){qf.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){qf.setUTCMonth.apply(this._,arguments)},setSeconds:function(){qf.setUTCSeconds.apply(this._,arguments)},setTime:function(){qf.setTime.apply(this._,arguments)}};var qf=Date.prototype;Qd.year=qc(function(R){R=Qd.day(R);R.setMonth(0,1);return R},function(R,ia){R.setFullYear(R.getFullYear()+ia)},function(R){return R.getFullYear()});Qd.years=Qd.year.range;Qd.years.utc=Qd.year.utc.range;Qd.day=qc(function(R){var ia=new mf(2E3,0);ia.setFullYear(R.getFullYear(),R.getMonth(),
R.getDate());return ia},function(R,ia){R.setDate(R.getDate()+ia)},function(R){return R.getDate()-1});Qd.days=Qd.day.range;Qd.days.utc=Qd.day.utc.range;Qd.dayOfYear=function(R){var ia=Qd.year(R);return Math.floor((R-ia-6E4*(R.getTimezoneOffset()-ia.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(R,ia){ia=7-ia;var ta=Qd[R]=qc(function(Aa){(Aa=Qd.day(Aa)).setDate(Aa.getDate()-(Aa.getDay()+ia)%7);return Aa},function(Aa,Ba){Aa.setDate(Aa.getDate()+
7*Math.floor(Ba))},function(Aa){var Ba=Qd.year(Aa).getDay();return Math.floor((Qd.dayOfYear(Aa)+(Ba+ia)%7)/7)-(Ba!==ia)});Qd[R+"s"]=ta.range;Qd[R+"s"].utc=ta.utc.range;Qd[R+"OfYear"]=function(Aa){var Ba=Qd.year(Aa).getDay();return Math.floor((Qd.dayOfYear(Aa)+(Ba+ia)%7)/7)}});Qd.week=Qd.sunday;Qd.weeks=Qd.sunday.range;Qd.weeks.utc=Qd.sunday.utc.range;Qd.weekOfYear=Qd.sundayOfYear;var Ni={"-":"",_:" ",0:"0"},Ld=/^\s*\d+/,ge=/^%/;Kb.locale=function(R){return{numberFormat:Cb(R),timeFormat:cd(R)}};var xj=
Kb.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});Kb.format=xj.numberFormat;Kb.geo={};vb.prototype=
{s:0,t:0,add:function(R){Db(R,this.t,xh);Db(xh.s,this.s,this);this.s?this.t+=xh.t:this.s=xh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var xh=new vb;Kb.geo.stream=function(R,ia){if(R&&bj.hasOwnProperty(R.type))bj[R.type](R,ia);else Qb(R,ia)};var bj={Feature:function(R,ia){Qb(R.geometry,ia)},FeatureCollection:function(R,ia){R=R.features;for(var ta=-1,Aa=R.length;++ta<Aa;)Qb(R[ta].geometry,ia)}},Uf={Sphere:function(R,ia){ia.sphere()},Point:function(R,ia){R=R.coordinates;
ia.point(R[0],R[1],R[2])},MultiPoint:function(R,ia){for(var ta=R.coordinates,Aa=-1,Ba=ta.length;++Aa<Ba;)R=ta[Aa],ia.point(R[0],R[1],R[2])},LineString:function(R,ia){wc(R.coordinates,ia,0)},MultiLineString:function(R,ia){R=R.coordinates;for(var ta=-1,Aa=R.length;++ta<Aa;)wc(R[ta],ia,0)},Polygon:function(R,ia){dc(R.coordinates,ia)},MultiPolygon:function(R,ia){R=R.coordinates;for(var ta=-1,Aa=R.length;++ta<Aa;)dc(R[ta],ia)},GeometryCollection:function(R,ia){R=R.geometries;for(var ta=-1,Aa=R.length;++ta<
Aa;)Qb(R[ta],ia)}};Kb.geo.area=function(R){ug=0;Kb.geo.stream(R,Of);return ug};var ug,hi=new vb,Of={sphere:function(){ug+=4*fe},point:y,lineStart:y,lineEnd:y,polygonStart:function(){hi.reset();Of.lineStart=xc},polygonEnd:function(){var R=2*hi;ug+=0>R?4*fe+R:R;Of.lineStart=Of.lineEnd=Of.point=y}};Kb.geo.bounds=function(){function R(Vb,gc){Rc.push(Tc=[ib=Vb,Eb=Vb]);gc<wb&&(wb=gc);gc>Lb&&(Lb=gc)}function ia(Vb,gc){var Jc=Nc([Vb*ke,gc*ke]);if(nc){var fd=$c(nc,Jc);fd=$c([fd[1],-fd[0],0],fd);rd(fd);fd=
Dd(fd);var hd=Vb-Mb,id=0<hd?1:-1,ad=fd[0]*We*id;hd=180<de(hd);hd^(id*Mb<ad&&ad<id*Vb)?(gc=fd[1]*We,gc>Lb&&(Lb=gc)):(ad=(ad+360)%360-180,hd^(id*Mb<ad&&ad<id*Vb))?(gc=-fd[1]*We,gc<wb&&(wb=gc)):(gc<wb&&(wb=gc),gc>Lb&&(Lb=gc));hd?Vb<Mb?Oa(ib,Vb)>Oa(ib,Eb)&&(Eb=Vb):Oa(Vb,Eb)>Oa(ib,Eb)&&(ib=Vb):Eb>=ib?(Vb<ib&&(ib=Vb),Vb>Eb&&(Eb=Vb)):Vb>Mb?Oa(ib,Vb)>Oa(ib,Eb)&&(Eb=Vb):Oa(Vb,Eb)>Oa(ib,Eb)&&(ib=Vb)}else R(Vb,gc);nc=Jc;Mb=Vb}function ta(){Xc.point=ia}function Aa(){Tc[0]=ib;Tc[1]=Eb;Xc.point=R;nc=null}function Ba(Vb,
gc){if(nc){var Jc=Vb-Mb;Hc+=180<de(Jc)?Jc+(0<Jc?360:-360):Jc}else Zb=Vb,cc=gc;Of.point(Vb,gc);ia(Vb,gc)}function Ha(){Of.lineStart()}function Ua(){Ba(Zb,cc);Of.lineEnd();1E-6<de(Hc)&&(ib=-(Eb=180));Tc[0]=ib;Tc[1]=Eb;nc=null}function Oa(Vb,gc){return 0>(gc-=Vb)?gc+360:gc}function Sa(Vb,gc){return Vb[0]-gc[0]}function cb(Vb,gc){return gc[0]<=gc[1]?gc[0]<=Vb&&Vb<=gc[1]:Vb<gc[0]||gc[1]<Vb}var ib,wb,Eb,Lb,Mb,Zb,cc,nc,Hc,Rc,Tc,Xc={point:R,lineStart:ta,lineEnd:Aa,polygonStart:function(){Xc.point=Ba;Xc.lineStart=
Ha;Xc.lineEnd=Ua;Hc=0;Of.polygonStart()},polygonEnd:function(){Of.polygonEnd();Xc.point=R;Xc.lineStart=ta;Xc.lineEnd=Aa;0>hi?(ib=-(Eb=180),wb=-(Lb=90)):1E-6<Hc?Lb=90:-1E-6>Hc&&(wb=-90);Tc[0]=ib;Tc[1]=Eb}};return function(Vb){Lb=Eb=-(ib=wb=Infinity);Rc=[];Kb.geo.stream(Vb,Xc);if(Vb=Rc.length){Rc.sort(Sa);for(var gc=1,Jc=Rc[0],fd,hd=[Jc];gc<Vb;++gc)fd=Rc[gc],cb(fd[0],Jc)||cb(fd[1],Jc)?(Oa(Jc[0],fd[1])>Oa(Jc[0],Jc[1])&&(Jc[1]=fd[1]),Oa(fd[0],Jc[1])>Oa(Jc[0],Jc[1])&&(Jc[0]=fd[0])):hd.push(Jc=fd);var id=
-Infinity,ad;Vb=hd.length-1;gc=0;for(Jc=hd[Vb];gc<=Vb;Jc=fd,++gc)fd=hd[gc],(ad=Oa(Jc[1],fd[0]))>id&&(id=ad,ib=fd[0],Eb=Jc[1])}Rc=Tc=null;return Infinity===ib||Infinity===wb?[[NaN,NaN],[NaN,NaN]]:[[ib,wb],[Eb,Lb]]}}();Kb.geo.centroid=function(R){Ie=Bh=jh=kh=Jg=Vf=Sg=yg=Ch=Dh=Kg=0;Kb.geo.stream(R,mg);R=Ch;var ia=Dh,ta=Kg,Aa=R*R+ia*ia+ta*ta;return 1E-12>Aa&&(R=Vf,ia=Sg,ta=yg,1E-6>Bh&&(R=jh,ia=kh,ta=Jg),Aa=R*R+ia*ia+ta*ta,1E-12>Aa)?[NaN,NaN]:[Math.atan2(ia,R)*We,la(ta/Math.sqrt(Aa))*We]};var Ie,Bh,jh,
kh,Jg,Vf,Sg,yg,Ch,Dh,Kg,mg={sphere:y,point:Mc,lineStart:yd,lineEnd:Fd,polygonStart:function(){mg.lineStart=xe},polygonEnd:function(){mg.lineStart=yd}},Oj=ae(Gc,function(R){var ia=NaN,ta=NaN,Aa=NaN,Ba;return{lineStart:function(){R.lineStart();Ba=1},point:function(Ha,Ua){var Oa=0<Ha?fe:-fe,Sa=de(Ha-ia);if(1E-6>de(Sa-fe))R.point(ia,ta=0<(ta+Ua)/2?df:-df),R.point(Aa,ta),R.lineEnd(),R.lineStart(),R.point(Oa,ta),R.point(Ha,ta),Ba=0;else if(Aa!==Oa&&Sa>=fe){1E-6>de(ia-Aa)&&(ia-=1E-6*Aa);1E-6>de(Ha-Oa)&&
(Ha-=1E-6*Oa);Sa=ia;var cb=ta,ib=Ha,wb,Eb,Lb=Math.sin(Sa-ib);ta=1E-6<de(Lb)?Math.atan((Math.sin(cb)*(Eb=Math.cos(Ua))*Math.sin(ib)-Math.sin(Ua)*(wb=Math.cos(cb))*Math.sin(Sa))/(wb*Eb*Lb)):(cb+Ua)/2;R.point(Aa,ta);R.lineEnd();R.lineStart();R.point(Oa,ta);Ba=0}R.point(ia=Ha,ta=Ua);Aa=Oa},lineEnd:function(){R.lineEnd();ia=ta=NaN},clean:function(){return 2-Ba}}},function(R,ia,ta,Aa){null==R?(ta*=df,Aa.point(-fe,ta),Aa.point(0,ta),Aa.point(fe,ta),Aa.point(fe,0),Aa.point(fe,-ta),Aa.point(0,-ta),Aa.point(-fe,
-ta),Aa.point(-fe,0),Aa.point(-fe,ta)):1E-6<de(R[0]-ia[0])?(R=R[0]<ia[0]?fe:-fe,ta=ta*R/2,Aa.point(-R,ta),Aa.point(0,ta),Aa.point(R,ta)):Aa.point(ia[0],ia[1])},[-fe,-fe/2]);Kb.geo.clipExtent=function(){var R,ia,ta,Aa,Ba,Ha,Ua={stream:function(Oa){Ba&&(Ba.valid=!1);Ba=Ha(Oa);Ba.valid=!0;return Ba},extent:function(Oa){if(!arguments.length)return[[R,ia],[ta,Aa]];Ha=ve(R=+Oa[0][0],ia=+Oa[0][1],ta=+Oa[1][0],Aa=+Oa[1][1]);Ba&&(Ba.valid=!1,Ba=null);return Ua}};return Ua.extent([[0,0],[960,500]])};(Kb.geo.conicEqualArea=
function(){return Se(gf)}).raw=gf;Kb.geo.albers=function(){return Kb.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};Kb.geo.albersUsa=function(){function R(cb){var ib=cb[0];cb=cb[1];Ba=null;(Ua(ib,cb),Ba)||(Oa(ib,cb),Ba)||Sa(ib,cb);return Ba}var ia=Kb.geo.albers(),ta=Kb.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Aa=Kb.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Ba,Ha={point:function(cb,ib){Ba=[cb,
ib]}},Ua,Oa,Sa;R.invert=function(cb){var ib=ia.scale(),wb=ia.translate(),Eb=(cb[0]-wb[0])/ib;ib=(cb[1]-wb[1])/ib;return(.12<=ib&&.234>ib&&-.425<=Eb&&-.214>Eb?ta:.166<=ib&&.234>ib&&-.214<=Eb&&-.115>Eb?Aa:ia).invert(cb)};R.stream=function(cb){var ib=ia.stream(cb),wb=ta.stream(cb),Eb=Aa.stream(cb);return{point:function(Lb,Mb){ib.point(Lb,Mb);wb.point(Lb,Mb);Eb.point(Lb,Mb)},sphere:function(){ib.sphere();wb.sphere();Eb.sphere()},lineStart:function(){ib.lineStart();wb.lineStart();Eb.lineStart()},lineEnd:function(){ib.lineEnd();
wb.lineEnd();Eb.lineEnd()},polygonStart:function(){ib.polygonStart();wb.polygonStart();Eb.polygonStart()},polygonEnd:function(){ib.polygonEnd();wb.polygonEnd();Eb.polygonEnd()}}};R.precision=function(cb){if(!arguments.length)return ia.precision();ia.precision(cb);ta.precision(cb);Aa.precision(cb);return R};R.scale=function(cb){if(!arguments.length)return ia.scale();ia.scale(cb);ta.scale(.35*cb);Aa.scale(cb);return R.translate(ia.translate())};R.translate=function(cb){if(!arguments.length)return ia.translate();
var ib=ia.scale(),wb=+cb[0],Eb=+cb[1];Ua=ia.translate(cb).clipExtent([[wb-.455*ib,Eb-.238*ib],[wb+.455*ib,Eb+.238*ib]]).stream(Ha).point;Oa=ta.translate([wb-.307*ib,Eb+.201*ib]).clipExtent([[wb-.425*ib+1E-6,Eb+.12*ib+1E-6],[wb-.214*ib-1E-6,Eb+.234*ib-1E-6]]).stream(Ha).point;Sa=Aa.translate([wb-.205*ib,Eb+.212*ib]).clipExtent([[wb-.214*ib+1E-6,Eb+.166*ib+1E-6],[wb-.115*ib-1E-6,Eb+.234*ib-1E-6]]).stream(Ha).point;return R};return R.scale(1070)};var eh,mj,Tg={point:y,lineStart:y,lineEnd:y,polygonStart:function(){mj=
0;Tg.lineStart=$e},polygonEnd:function(){Tg.lineStart=Tg.lineEnd=Tg.point=y;eh+=de(mj/2)}},Bi,cj,dj,Zh,Ek={point:function(R,ia){R<Bi&&(Bi=R);R>dj&&(dj=R);ia<cj&&(cj=ia);ia>Zh&&(Zh=ia)},lineStart:y,lineEnd:y,polygonStart:y,polygonEnd:y},eg={point:Ma,lineStart:xb,lineEnd:rb,polygonStart:function(){eg.lineStart=Hb},polygonEnd:function(){eg.point=Ma;eg.lineStart=xb;eg.lineEnd=rb}};Kb.geo.path=function(){function R(Sa){Sa&&("function"===typeof ta&&Ua.pointRadius(+ta.apply(this,arguments)),Oa&&Oa.valid||
(Oa=Ha(Ua)),Kb.geo.stream(Sa,Oa));return Ua.result()}function ia(){Oa=null;return R}var ta=4.5,Aa,Ba,Ha,Ua,Oa;R.area=function(Sa){eh=0;Kb.geo.stream(Sa,Ha(Tg));return eh};R.centroid=function(Sa){jh=kh=Jg=Vf=Sg=yg=Ch=Dh=Kg=0;Kb.geo.stream(Sa,Ha(eg));return Kg?[Ch/Kg,Dh/Kg]:yg?[Vf/yg,Sg/yg]:Jg?[jh/Jg,kh/Jg]:[NaN,NaN]};R.bounds=function(Sa){dj=Zh=-(Bi=cj=Infinity);Kb.geo.stream(Sa,Ha(Ek));return[[Bi,cj],[dj,Zh]]};R.projection=function(Sa){if(!arguments.length)return Aa;Ha=(Aa=Sa)?Sa.stream||Yb(Sa):w;
return ia()};R.context=function(Sa){if(!arguments.length)return Ba;Ua=null==(Ba=Sa)?new cf:new mc(Sa);"function"!==typeof ta&&Ua.pointRadius(ta);return ia()};R.pointRadius=function(Sa){if(!arguments.length)return ta;ta="function"===typeof Sa?Sa:(Ua.pointRadius(+Sa),+Sa);return R};return R.projection(Kb.geo.albersUsa()).context(null)};Kb.geo.transform=function(R){return{stream:function(ia){ia=new Ac(ia);for(var ta in R)ia[ta]=R[ta];return ia}}};Ac.prototype={point:function(R,ia){this.stream.point(R,
ia)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};Kb.geo.projection=md;Kb.geo.projectionMutator=Gb;(Kb.geo.equirectangular=function(){return md(zc)}).raw=zc.invert=zc;Kb.geo.rotation=function(R){function ia(ta){ta=R(ta[0]*ke,ta[1]*ke);return ta[0]*=We,ta[1]*=We,ta}R=Ec(R[0]%360*ke,R[1]*ke,2<R.length?R[2]*ke:0);ia.invert=
function(ta){ta=R.invert(ta[0]*ke,ta[1]*ke);return ta[0]*=We,ta[1]*=We,ta};return ia};Sc.invert=zc;Kb.geo.circle=function(){function R(){var Ha="function"===typeof ia?ia.apply(this,arguments):ia,Ua=Ec(-Ha[0]*ke,-Ha[1]*ke,0).invert,Oa=[];Ba(null,null,1,{point:function(Sa,cb){Oa.push(Sa=Ua(Sa,cb));Sa[0]*=We;Sa[1]*=We}});return{type:"Polygon",coordinates:[Oa]}}var ia=[0,0],ta,Aa=6,Ba;R.origin=function(Ha){if(!arguments.length)return ia;ia=Ha;return R};R.angle=function(Ha){if(!arguments.length)return ta;
Ba=pc((ta=+Ha)*ke,Aa*ke);return R};R.precision=function(Ha){if(!arguments.length)return Aa;Ba=pc(ta*ke,(Aa=+Ha)*ke);return R};return R.angle(90)};Kb.geo.distance=function(R,ia){var ta=(ia[0]-R[0])*ke,Aa=R[1]*ke,Ba=ia[1]*ke;ia=Math.cos(ta);R=Math.sin(Aa);Aa=Math.cos(Aa);var Ha=Math.sin(Ba);Ba=Math.cos(Ba);var Ua;return Math.atan2(Math.sqrt((Ua=Ba*Math.sin(ta))*Ua+(Ua=Aa*Ha-R*Ba*ia)*Ua),R*Ha+Aa*Ba*ia)};Kb.geo.graticule=function(){function R(){return{type:"MultiLineString",coordinates:ia()}}function ia(){return Kb.range(Math.ceil(Ha/
Eb)*Eb,Ba,Eb).map(cc).concat(Kb.range(Math.ceil(cb/Lb)*Lb,Sa,Lb).map(nc)).concat(Kb.range(Math.ceil(Aa/ib)*ib,ta,ib).filter(function(Rc){return 1E-6<de(Rc%Eb)}).map(Mb)).concat(Kb.range(Math.ceil(Oa/wb)*wb,Ua,wb).filter(function(Rc){return 1E-6<de(Rc%Lb)}).map(Zb))}var ta,Aa,Ba,Ha,Ua,Oa,Sa,cb,ib=10,wb=ib,Eb=90,Lb=360,Mb,Zb,cc,nc,Hc=2.5;R.lines=function(){return ia().map(function(Rc){return{type:"LineString",coordinates:Rc}})};R.outline=function(){return{type:"Polygon",coordinates:[cc(Ha).concat(nc(Sa).slice(1),
cc(Ba).reverse().slice(1),nc(cb).reverse().slice(1))]}};R.extent=function(Rc){return arguments.length?R.majorExtent(Rc).minorExtent(Rc):R.minorExtent()};R.majorExtent=function(Rc){if(!arguments.length)return[[Ha,cb],[Ba,Sa]];Ha=+Rc[0][0];Ba=+Rc[1][0];cb=+Rc[0][1];Sa=+Rc[1][1];Ha>Ba&&(Rc=Ha,Ha=Ba,Ba=Rc);cb>Sa&&(Rc=cb,cb=Sa,Sa=Rc);return R.precision(Hc)};R.minorExtent=function(Rc){if(!arguments.length)return[[Aa,Oa],[ta,Ua]];Aa=+Rc[0][0];ta=+Rc[1][0];Oa=+Rc[0][1];Ua=+Rc[1][1];Aa>ta&&(Rc=Aa,Aa=ta,ta=
Rc);Oa>Ua&&(Rc=Oa,Oa=Ua,Ua=Rc);return R.precision(Hc)};R.step=function(Rc){return arguments.length?R.majorStep(Rc).minorStep(Rc):R.minorStep()};R.majorStep=function(Rc){if(!arguments.length)return[Eb,Lb];Eb=+Rc[0];Lb=+Rc[1];return R};R.minorStep=function(Rc){if(!arguments.length)return[ib,wb];ib=+Rc[0];wb=+Rc[1];return R};R.precision=function(Rc){if(!arguments.length)return Hc;Hc=+Rc;Mb=tc(Oa,Ua,90);Zb=gd(Aa,ta,Hc);cc=tc(cb,Sa,90);nc=gd(Ha,Ba,Hc);return R};return R.majorExtent([[-180,-89.999999],
[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};Kb.geo.greatArc=function(){function R(){return{type:"LineString",coordinates:[ta||ia.apply(this,arguments),Ba||Aa.apply(this,arguments)]}}var ia=ud,ta,Aa=xd,Ba;R.distance=function(){return Kb.geo.distance(ta||ia.apply(this,arguments),Ba||Aa.apply(this,arguments))};R.source=function(Ha){if(!arguments.length)return ia;ia=Ha;ta="function"===typeof Ha?null:Ha;return R};R.target=function(Ha){if(!arguments.length)return Aa;Aa=Ha;Ba="function"===
typeof Ha?null:Ha;return R};R.precision=function(){return arguments.length?R:0};return R};Kb.geo.interpolate=function(R,ia){return Ad(R[0]*ke,R[1]*ke,ia[0]*ke,ia[1]*ke)};Kb.geo.length=function(R){yj=0;Kb.geo.stream(R,Ci);return yj};var yj,Ci={sphere:y,point:y,lineStart:function(){function R(Ba,Ha){var Ua=Math.sin(Ha*=ke);Ha=Math.cos(Ha);var Oa=de((Ba*=ke)-ia),Sa=Math.cos(Oa);yj+=Math.atan2(Math.sqrt((Oa=Ha*Math.sin(Oa))*Oa+(Oa=Aa*Ua-ta*Ha*Sa)*Oa),ta*Ua+Aa*Ha*Sa);ia=Ba;ta=Ua;Aa=Ha}var ia,ta,Aa;Ci.point=
function(Ba,Ha){ia=Ba*ke;ta=Math.sin(Ha*=ke);Aa=Math.cos(Ha);Ci.point=R};Ci.lineEnd=function(){Ci.point=Ci.lineEnd=y}},lineEnd:y,polygonStart:y,polygonEnd:y},ek=wd(function(R){return Math.sqrt(2/(1+R))},function(R){return 2*Math.asin(R/2)});(Kb.geo.azimuthalEqualArea=function(){return md(ek)}).raw=ek;var Fk=wd(function(R){return(R=Math.acos(R))&&R/Math.sin(R)},w);(Kb.geo.azimuthalEquidistant=function(){return md(Fk)}).raw=Fk;(Kb.geo.conicConformal=function(){return Se(se)}).raw=se;(Kb.geo.conicEquidistant=
function(){return Se(te)}).raw=te;var Gk=wd(function(R){return 1/R},Math.atan);(Kb.geo.gnomonic=function(){return md(Gk)}).raw=Gk;Fe.invert=function(R,ia){return[R,2*Math.atan(Math.exp(ia))-df]};(Kb.geo.mercator=function(){return je(Fe)}).raw=Fe;var Hk=wd(function(){return 1},Math.asin);(Kb.geo.orthographic=function(){return md(Hk)}).raw=Hk;var Ik=wd(function(R){return 1/(1+R)},function(R){return 2*Math.atan(R)});(Kb.geo.stereographic=function(){return md(Ik)}).raw=Ik;Ge.invert=function(R,ia){return[-ia,
2*Math.atan(Math.exp(R))-df]};(Kb.geo.transverseMercator=function(){var R=je(Ge),ia=R.center,ta=R.rotate;R.center=function(Aa){return Aa?ia([-Aa[1],Aa[0]]):(Aa=ia(),[Aa[1],-Aa[0]])};R.rotate=function(Aa){return Aa?ta([Aa[0],Aa[1],2<Aa.length?Aa[2]+90:90]):(Aa=ta(),[Aa[0],Aa[1],Aa[2]-90])};return ta([0,0,90])}).raw=Ge;Kb.geom={};Kb.geom.hull=function(R){function ia(Ba){if(3>Ba.length)return[];var Ha=va(ta),Ua=va(Aa),Oa,Sa=Ba.length,cb=[],ib=[];for(Oa=0;Oa<Sa;Oa++)cb.push([+Ha.call(this,Ba[Oa],Oa),
+Ua.call(this,Ba[Oa],Oa),Oa]);cb.sort(di);for(Oa=0;Oa<Sa;Oa++)ib.push([cb[Oa][0],-cb[Oa][1]]);Ha=zh(cb);ib=zh(ib);Ua=ib[0]===Ha[0];Sa=ib[ib.length-1]===Ha[Ha.length-1];var wb=[];for(Oa=Ha.length-1;0<=Oa;--Oa)wb.push(Ba[cb[Ha[Oa]][2]]);for(Oa=+Ua;Oa<ib.length-Sa;++Oa)wb.push(Ba[cb[ib[Oa]][2]]);return wb}var ta=uf,Aa=jg;if(arguments.length)return ia(R);ia.x=function(Ba){return arguments.length?(ta=Ba,ia):ta};ia.y=function(Ba){return arguments.length?(Aa=Ba,ia):Aa};return ia};Kb.geom.polygon=function(R){Ig(R,
zj);return R};var zj=Kb.geom.polygon.prototype=[];zj.area=function(){for(var R=-1,ia=this.length,ta,Aa=this[ia-1],Ba=0;++R<ia;)ta=Aa,Aa=this[R],Ba+=ta[1]*Aa[0]-ta[0]*Aa[1];return.5*Ba};zj.centroid=function(R){var ia=-1,ta=this.length,Aa=0,Ba=0,Ha=this[ta-1];for(arguments.length||(R=-1/(6*this.area()));++ia<ta;){var Ua=Ha;Ha=this[ia];var Oa=Ua[0]*Ha[1]-Ha[0]*Ua[1];Aa+=(Ua[0]+Ha[0])*Oa;Ba+=(Ua[1]+Ha[1])*Oa}return[Aa*R,Ba*R]};zj.clip=function(R){for(var ia,ta=Pj(R),Aa=-1,Ba=this.length-Pj(this),Ha,Ua,
Oa=this[Ba-1],Sa,cb,ib;++Aa<Ba;){ia=R.slice();R.length=0;Sa=this[Aa];cb=ia[(Ua=ia.length-ta)-1];for(Ha=-1;++Ha<Ua;)ib=ia[Ha],ei(ib,Oa,Sa)?(ei(cb,Oa,Sa)||R.push(kg(cb,ib,Oa,Sa)),R.push(ib)):ei(cb,Oa,Sa)&&R.push(kg(cb,ib,Oa,Sa)),cb=ib;ta&&R.push(R[0]);Oa=Sa}return R};var mi,Ih,ki,uk=[],lf,Pi,vk=[];Ug.prototype.prepare=function(){for(var R=this.edges,ia=R.length,ta;ia--;)ta=R[ia].edge,ta.b&&ta.a||R.splice(ia,1);R.sort(Rj);return R.length};mh.prototype={start:function(){return this.edge.l===this.site?
this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};Ee.prototype={insert:function(R,ia){var ta;if(R){ia.P=R;if(ia.N=R.N)R.N.P=ia;R.N=ia;if(R.R){for(R=R.R;R.L;)R=R.L;R.L=ia}else R.R=ia;var Aa=R}else this._?(R=Tj(this._),ia.P=null,ia.N=R,R.P=R.L=ia,Aa=R):(ia.P=ia.N=null,this._=ia,Aa=null);ia.L=ia.R=null;ia.U=Aa;ia.C=!0;for(R=ia;Aa&&Aa.C;)ia=Aa.U,Aa===ia.L?(ta=ia.R)&&ta.C?(Aa.C=ta.C=!1,ia.C=!0,R=ia):(R===Aa.R&&(Jh(this,Aa),R=Aa,Aa=R.U),Aa.C=!1,ia.C=!0,Kh(this,
ia)):(ta=ia.L)&&ta.C?(Aa.C=ta.C=!1,ia.C=!0,R=ia):(R===Aa.L&&(Kh(this,Aa),R=Aa,Aa=R.U),Aa.C=!1,ia.C=!0,Jh(this,ia)),Aa=R.U;this._.C=!1},remove:function(R){R.N&&(R.N.P=R.P);R.P&&(R.P.N=R.N);R.N=R.P=null;var ia=R.U,ta=R.L,Aa=R.R;var Ba=ta?Aa?Tj(Aa):ta:Aa;ia?ia.L===R?ia.L=Ba:ia.R=Ba:this._=Ba;if(ta&&Aa){var Ha=Ba.C;Ba.C=R.C;Ba.L=ta;ta.U=Ba;Ba!==Aa?(ia=Ba.U,Ba.U=R.U,R=Ba.R,ia.L=R,Ba.R=Aa,Aa.U=Ba):(Ba.U=ia,ia=Ba,R=Ba.R)}else Ha=R.C,R=Ba;R&&(R.U=ia);if(!Ha)if(R&&R.C)R.C=!1;else{do{if(R===this._)break;if(R===
ia.L){if(R=ia.R,R.C&&(R.C=!1,ia.C=!0,Jh(this,ia),R=ia.R),R.L&&R.L.C||R.R&&R.R.C){R.R&&R.R.C||(R.L.C=!1,R.C=!0,Kh(this,R),R=ia.R);R.C=ia.C;ia.C=R.R.C=!1;Jh(this,ia);R=this._;break}}else if(R=ia.L,R.C&&(R.C=!1,ia.C=!0,Kh(this,ia),R=ia.L),R.L&&R.L.C||R.R&&R.R.C){R.L&&R.L.C||(R.R.C=!1,R.C=!0,Jh(this,R),R=ia.L);R.C=ia.C;ia.C=R.L.C=!1;Kh(this,ia);R=this._;break}R.C=!0;R=ia;ia=ia.U}while(!R.C);R&&(R.C=!1)}}};Kb.geom.voronoi=function(R){function ia(Sa){var cb=Array(Sa.length),ib=Oa[0][0],wb=Oa[0][1],Eb=Oa[1][0],
Lb=Oa[1][1];oi(ta(Sa),Oa).cells.forEach(function(Mb,Zb){var cc=Mb.edges;Mb=Mb.site;(cb[Zb]=cc.length?cc.map(function(nc){nc=nc.start();return[nc.x,nc.y]}):Mb.x>=ib&&Mb.x<=Eb&&Mb.y>=wb&&Mb.y<=Lb?[[ib,Lb],[Eb,Lb],[Eb,wb],[ib,wb]]:[]).point=Sa[Zb]});return cb}function ta(Sa){return Sa.map(function(cb,ib){return{x:1E-6*Math.round(Ha(cb,ib)/1E-6),y:1E-6*Math.round(Ua(cb,ib)/1E-6),i:ib}})}var Aa=uf,Ba=jg,Ha=Aa,Ua=Ba,Oa=fk;if(R)return ia(R);ia.links=function(Sa){return oi(ta(Sa)).edges.filter(function(cb){return cb.l&&
cb.r}).map(function(cb){return{source:Sa[cb.l.i],target:Sa[cb.r.i]}})};ia.triangles=function(Sa){var cb=[];oi(ta(Sa)).cells.forEach(function(ib,wb){var Eb=ib.site;ib=ib.edges.sort(Rj);var Lb=-1,Mb=ib.length,Zb=ib[Mb-1].edge;for(Zb=Zb.l===Eb?Zb.r:Zb.l;++Lb<Mb;){var cc=Zb;Zb=ib[Lb].edge;Zb=Zb.l===Eb?Zb.r:Zb.l;wb<cc.i&&wb<Zb.i&&0>(Eb.x-Zb.x)*(cc.y-Eb.y)-(Eb.x-cc.x)*(Zb.y-Eb.y)&&cb.push([Sa[wb],Sa[cc.i],Sa[Zb.i]])}});return cb};ia.x=function(Sa){return arguments.length?(Ha=va(Aa=Sa),ia):Aa};ia.y=function(Sa){return arguments.length?
(Ua=va(Ba=Sa),ia):Ba};ia.clipExtent=function(Sa){if(!arguments.length)return Oa===fk?null:Oa;Oa=null==Sa?fk:Sa;return ia};ia.size=function(Sa){return arguments.length?ia.clipExtent(Sa&&[[0,0],Sa]):Oa===fk?null:Oa&&Oa[1]};return ia};var fk=[[-1E6,-1E6],[1E6,1E6]];Kb.geom.delaunay=function(R){return Kb.geom.voronoi().triangles(R)};Kb.geom.quadtree=function(R,ia,ta,Aa,Ba){function Ha(cb){function ib(fd,hd,id,ad,Md,$d,ie,ne){if(!isNaN(id)&&!isNaN(ad))if(fd.leaf){var le=fd.x,we=fd.y;if(null!=le){if(!(.01>
de(le-id)+de(we-ad))){var Yd=fd.point;fd.x=fd.y=fd.point=null;wb(fd,Yd,le,we,Md,$d,ie,ne)}wb(fd,hd,id,ad,Md,$d,ie,ne)}else fd.x=id,fd.y=ad,fd.point=hd}else wb(fd,hd,id,ad,Md,$d,ie,ne)}function wb(fd,hd,id,ad,Md,$d,ie,ne){var le=.5*(Md+ie),we=.5*($d+ne),Yd=id>=le,Df=ad>=we,ef=Df<<1|Yd;fd.leaf=!1;fd=fd.nodes[ef]||(fd.nodes[ef]=Wj());Yd?Md=le:ie=le;Df?$d=we:ne=we;ib(fd,hd,id,ad,Md,$d,ie,ne)}var Eb=va(Ua),Lb=va(Oa),Mb;if(null!=ia){var Zb=ia;var cc=ta;var nc=Aa;var Hc=Ba}else{nc=Hc=-(Zb=cc=Infinity);var Rc=
[];var Tc=[];var Xc=cb.length;if(Sa)for(Mb=0;Mb<Xc;++Mb){var Vb=cb[Mb];Vb.x<Zb&&(Zb=Vb.x);Vb.y<cc&&(cc=Vb.y);Vb.x>nc&&(nc=Vb.x);Vb.y>Hc&&(Hc=Vb.y);Rc.push(Vb.x);Tc.push(Vb.y)}else for(Mb=0;Mb<Xc;++Mb){var gc=+Eb(Vb=cb[Mb],Mb);Vb=+Lb(Vb,Mb);gc<Zb&&(Zb=gc);Vb<cc&&(cc=Vb);gc>nc&&(nc=gc);Vb>Hc&&(Hc=Vb);Rc.push(gc);Tc.push(Vb)}}gc=nc-Zb;Vb=Hc-cc;gc>Vb?Hc=cc+gc:nc=Zb+Vb;var Jc=Wj();Jc.add=function(fd){ib(Jc,fd,+Eb(fd,++Mb),+Lb(fd,Mb),Zb,cc,nc,Hc)};Jc.visit=function(fd){pi(fd,Jc,Zb,cc,nc,Hc)};Jc.find=function(fd){return wk(Jc,
fd[0],fd[1],Zb,cc,nc,Hc)};Mb=-1;if(null==ia){for(;++Mb<Xc;)ib(Jc,cb[Mb],Rc[Mb],Tc[Mb],Zb,cc,nc,Hc);--Mb}else cb.forEach(Jc.add);Rc=Tc=cb=Vb=null;return Jc}var Ua=uf,Oa=jg,Sa;if(Sa=arguments.length)return Ua=Uj,Oa=Vj,3===Sa&&(Ba=ta,Aa=ia,ta=ia=0),Ha(R);Ha.x=function(cb){return arguments.length?(Ua=cb,Ha):Ua};Ha.y=function(cb){return arguments.length?(Oa=cb,Ha):Oa};Ha.extent=function(cb){if(!arguments.length)return null==ia?null:[[ia,ta],[Aa,Ba]];null==cb?ia=ta=Aa=Ba=null:(ia=+cb[0][0],ta=+cb[0][1],
Aa=+cb[1][0],Ba=+cb[1][1]);return Ha};Ha.size=function(cb){if(!arguments.length)return null==ia?null:[Aa-ia,Ba-ta];null==cb?ia=ta=Aa=Ba=null:(ia=ta=0,Aa=+cb[0],Ba=+cb[1]);return Ha};return Ha};Kb.interpolateRgb=Lh;Kb.interpolateObject=nh;Kb.interpolateNumber=zg;Kb.interpolateString=Xj;var qi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oh=new RegExp(qi.source,"g");Kb.interpolate=Vg;Kb.interpolators=[function(R,ia){var ta=typeof ia;return("string"===ta?ij.has(ia.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(ia)?
Lh:Xj:ia instanceof wa?Lh:Array.isArray(ia)?ri:"object"===ta&&isNaN(ia)?nh:zg)(R,ia)}];Kb.interpolateArray=ri;var al=function(){return w},Di=Kb.map({linear:al,poly:function(R){return function(ia){return Math.pow(ia,R)}},quad:function(){return Xg},cubic:function(){return Je},sin:function(){return Lg},exp:function(){return Mh},circle:function(){return Yj},elastic:function(R,ia){2>arguments.length&&(ia=.45);if(arguments.length)var ta=ia/Ef*Math.asin(1/R);else R=1,ta=ia/4;return function(Aa){return 1+
R*Math.pow(2,-10*Aa)*Math.sin((Aa-ta)*Ef/ia)}},back:function(R){R||(R=1.70158);return function(ia){return ia*ia*((R+1)*ia-R)}},bounce:function(){return oj}}),nl=Kb.map({"in":w,out:ph,"in-out":Wg,"out-in":function(R){return Wg(ph(R))}});Kb.ease=function(R){var ia=R.indexOf("-"),ta=0<=ia?R.slice(0,ia):R;ia=0<=ia?R.slice(ia+1):"in";ta=Di.get(ta)||al;ia=nl.get(ia)||w;return Ve(ia(ta.apply(null,Zk.call(arguments,1))))};Kb.interpolateHcl=function(R,ia){R=Kb.hcl(R);ia=Kb.hcl(ia);var ta=R.h,Aa=R.c,Ba=R.l,
Ha=ia.h-ta,Ua=ia.c-Aa,Oa=ia.l-Ba;isNaN(Ua)&&(Ua=0,Aa=isNaN(Aa)?ia.c:Aa);isNaN(Ha)?(Ha=0,ta=isNaN(ta)?ia.h:ta):180<Ha?Ha-=360:-180>Ha&&(Ha+=360);return function(Sa){return ab(ta+Ha*Sa,Aa+Ua*Sa,Ba+Oa*Sa)+""}};Kb.interpolateHsl=function(R,ia){R=Kb.hsl(R);ia=Kb.hsl(ia);var ta=R.h,Aa=R.s,Ba=R.l,Ha=ia.h-ta,Ua=ia.s-Aa,Oa=ia.l-Ba;isNaN(Ua)&&(Ua=0,Aa=isNaN(Aa)?ia.s:Aa);isNaN(Ha)?(Ha=0,ta=isNaN(ta)?ia.h:ta):180<Ha?Ha-=360:-180>Ha&&(Ha+=360);return function(Sa){return Fa(ta+Ha*Sa,Aa+Ua*Sa,Ba+Oa*Sa)+""}};Kb.interpolateLab=
function(R,ia){R=Kb.lab(R);ia=Kb.lab(ia);var ta=R.l,Aa=R.a,Ba=R.b,Ha=ia.l-ta,Ua=ia.a-Aa,Oa=ia.b-Ba;return function(Sa){return bb(ta+Ha*Sa,Aa+Ua*Sa,Ba+Oa*Sa)+""}};Kb.interpolateRound=pj;Kb.transform=function(R){var ia=xf.createElementNS(Kb.ns.prefix.svg,"g");return(Kb.transform=function(ta){if(null!=ta){ia.setAttribute("transform",ta);var Aa=ia.transform.baseVal.consolidate()}return new qj(Aa?Aa.matrix:gk)})(R)};qj.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+
")skewX("+this.skew+")scale("+this.scale+")"};var gk={a:1,b:0,c:0,d:1,e:0,f:0};Kb.interpolateTransform=Jf;Kb.layout={};Kb.layout.bundle=function(){return function(R){for(var ia=[],ta=-1,Aa=R.length;++ta<Aa;){var Ba=ia,Ha=Ba.push,Ua=R[ta],Oa=Ua.source;Ua=Ua.target;var Sa=Ua;if(Oa===Sa)var cb=Oa;else{cb=pg(Oa);Sa=pg(Sa);for(var ib=cb.pop(),wb=Sa.pop(),Eb=null;ib===wb;)Eb=ib,ib=cb.pop(),wb=Sa.pop();cb=Eb}for(Sa=[Oa];Oa!==cb;)Oa=Oa.parent,Sa.push(Oa);for(Oa=Sa.length;Ua!==cb;)Sa.splice(Oa,0,Ua),Ua=Ua.parent;
Ha.call(Ba,Sa)}return ia}};Kb.layout.chord=function(){function R(){var wb={},Eb=[],Lb=Kb.range(Ua),Mb=[],Zb,cc;Aa=[];Ba=[];var nc=0;for(Zb=-1;++Zb<Ua;){var Hc=0;for(cc=-1;++cc<Ua;)Hc+=Ha[Zb][cc];Eb.push(Hc);Mb.push(Kb.range(Ua));nc+=Hc}Sa&&Lb.sort(function(fd,hd){return Sa(Eb[fd],Eb[hd])});cb&&Mb.forEach(function(fd,hd){fd.sort(function(id,ad){return cb(Ha[hd][id],Ha[hd][ad])})});nc=(Ef-Oa*Ua)/nc;Hc=0;for(Zb=-1;++Zb<Ua;){var Rc=Hc;for(cc=-1;++cc<Ua;){var Tc=Lb[Zb],Xc=Mb[Tc][cc],Vb=Ha[Tc][Xc],gc=Hc,
Jc=Hc+=Vb*nc;wb[Tc+"-"+Xc]={index:Tc,subindex:Xc,startAngle:gc,endAngle:Jc,value:Vb}}Ba[Tc]={index:Tc,startAngle:Rc,endAngle:Hc,value:Eb[Tc]};Hc+=Oa}for(Zb=-1;++Zb<Ua;)for(cc=Zb-1;++cc<Ua;)Lb=wb[Zb+"-"+cc],Mb=wb[cc+"-"+Zb],(Lb.value||Mb.value)&&Aa.push(Lb.value<Mb.value?{source:Mb,target:Lb}:{source:Lb,target:Mb});ib&&ia()}function ia(){Aa.sort(function(wb,Eb){return ib((wb.source.value+wb.target.value)/2,(Eb.source.value+Eb.target.value)/2)})}var ta={},Aa,Ba,Ha,Ua,Oa=0,Sa,cb,ib;ta.matrix=function(wb){if(!arguments.length)return Ha;
Ua=(Ha=wb)&&Ha.length;Aa=Ba=null;return ta};ta.padding=function(wb){if(!arguments.length)return Oa;Oa=wb;Aa=Ba=null;return ta};ta.sortGroups=function(wb){if(!arguments.length)return Sa;Sa=wb;Aa=Ba=null;return ta};ta.sortSubgroups=function(wb){if(!arguments.length)return cb;cb=wb;Aa=null;return ta};ta.sortChords=function(wb){if(!arguments.length)return ib;ib=wb;Aa&&ia();return ta};ta.chords=function(){Aa||R();return Aa};ta.groups=function(){Ba||R();return Ba};return ta};Kb.layout.force=function(){function R(Tc){return function(Xc,
Vb,gc,Jc){if(Xc.point!==Tc){gc=Xc.cx-Tc.x;var fd=Xc.cy-Tc.y;Vb=Jc-Vb;Jc=gc*gc+fd*fd;if(Vb*Vb/Mb<Jc)return Jc<Eb&&(Vb=Xc.charge/Jc,Tc.px-=gc*Vb,Tc.py-=fd*Vb),!0;Xc.point&&Jc&&Jc<Eb&&(Vb=Xc.pointCharge/Jc,Tc.px-=gc*Vb,Tc.py-=fd*Vb)}return!Xc.charge}}function ia(Tc){Tc.px=Kb.event.x;Tc.py=Kb.event.y;ta.resume()}var ta={},Aa=Kb.dispatch("start","tick","end"),Ba,Ha=[1,1],Ua,Oa,Sa=.9,cb=ol,ib=pl,wb=-30,Eb=bl,Lb=.1,Mb=.64,Zb=[],cc=[],nc,Hc,Rc;ta.tick=function(){if(.005>(Oa*=.99))return Ba=null,Aa.end({type:"end",
alpha:Oa=0}),!0;var Tc=Zb.length,Xc=cc.length,Vb,gc;for(Vb=0;Vb<Xc;++Vb){var Jc=cc[Vb];var fd=Jc.source;var hd=Jc.target;var id=hd.x-fd.x;var ad=hd.y-fd.y;if(gc=id*id+ad*ad)gc=Oa*Hc[Vb]*((gc=Math.sqrt(gc))-nc[Vb])/gc,id*=gc,ad*=gc,hd.x-=id*(gc=fd.weight+hd.weight?fd.weight/(fd.weight+hd.weight):.5),hd.y-=ad*gc,fd.x+=id*(gc=1-gc),fd.y+=ad*gc}if(gc=Oa*Lb)if(id=Ha[0]/2,ad=Ha[1]/2,Vb=-1,gc)for(;++Vb<Tc;)Jc=Zb[Vb],Jc.x+=(id-Jc.x)*gc,Jc.y+=(ad-Jc.y)*gc;if(wb)for(Yf(Xc=Kb.geom.quadtree(Zb),Oa,Rc),Vb=-1;++Vb<
Tc;)(Jc=Zb[Vb]).fixed||Xc.visit(R(Jc));for(Vb=-1;++Vb<Tc;)Jc=Zb[Vb],Jc.fixed?(Jc.x=Jc.px,Jc.y=Jc.py):(Jc.x-=(Jc.px-(Jc.px=Jc.x))*Sa,Jc.y-=(Jc.py-(Jc.py=Jc.y))*Sa);Aa.tick({type:"tick",alpha:Oa})};ta.nodes=function(Tc){if(!arguments.length)return Zb;Zb=Tc;return ta};ta.links=function(Tc){if(!arguments.length)return cc;cc=Tc;return ta};ta.size=function(Tc){if(!arguments.length)return Ha;Ha=Tc;return ta};ta.linkDistance=function(Tc){if(!arguments.length)return cb;cb="function"===typeof Tc?Tc:+Tc;return ta};
ta.distance=ta.linkDistance;ta.linkStrength=function(Tc){if(!arguments.length)return ib;ib="function"===typeof Tc?Tc:+Tc;return ta};ta.friction=function(Tc){if(!arguments.length)return Sa;Sa=+Tc;return ta};ta.charge=function(Tc){if(!arguments.length)return wb;wb="function"===typeof Tc?Tc:+Tc;return ta};ta.chargeDistance=function(Tc){if(!arguments.length)return Math.sqrt(Eb);Eb=Tc*Tc;return ta};ta.gravity=function(Tc){if(!arguments.length)return Lb;Lb=+Tc;return ta};ta.theta=function(Tc){if(!arguments.length)return Math.sqrt(Mb);
Mb=Tc*Tc;return ta};ta.alpha=function(Tc){if(!arguments.length)return Oa;Tc=+Tc;Oa?0<Tc?Oa=Tc:(Ba.c=null,Ba.t=NaN,Ba=null,Aa.end({type:"end",alpha:Oa=0})):0<Tc&&(Aa.start({type:"start",alpha:Oa=Tc}),Ba=eb(ta.tick));return ta};ta.start=function(){function Tc(ad,Md){if(!hd){hd=Array(Vb);for(ie=0;ie<Vb;++ie)hd[ie]=[];for(ie=0;ie<gc;++ie){var $d=cc[ie];hd[$d.source.index].push($d.target);hd[$d.target.index].push($d.source)}}$d=hd[Xc];for(var ie=-1,ne=$d.length,le;++ie<ne;)if(!isNaN(le=$d[ie][ad]))return le;
return Math.random()*Md}var Xc,Vb=Zb.length,gc=cc.length,Jc=Ha[0],fd=Ha[1],hd,id;for(Xc=0;Xc<Vb;++Xc)(id=Zb[Xc]).index=Xc,id.weight=0;for(Xc=0;Xc<gc;++Xc)id=cc[Xc],"number"==typeof id.source&&(id.source=Zb[id.source]),"number"==typeof id.target&&(id.target=Zb[id.target]),++id.source.weight,++id.target.weight;for(Xc=0;Xc<Vb;++Xc)id=Zb[Xc],isNaN(id.x)&&(id.x=Tc("x",Jc)),isNaN(id.y)&&(id.y=Tc("y",fd)),isNaN(id.px)&&(id.px=id.x),isNaN(id.py)&&(id.py=id.y);nc=[];if("function"===typeof cb)for(Xc=0;Xc<gc;++Xc)nc[Xc]=
+cb.call(this,cc[Xc],Xc);else for(Xc=0;Xc<gc;++Xc)nc[Xc]=cb;Hc=[];if("function"===typeof ib)for(Xc=0;Xc<gc;++Xc)Hc[Xc]=+ib.call(this,cc[Xc],Xc);else for(Xc=0;Xc<gc;++Xc)Hc[Xc]=ib;Rc=[];if("function"===typeof wb)for(Xc=0;Xc<Vb;++Xc)Rc[Xc]=+wb.call(this,Zb[Xc],Xc);else for(Xc=0;Xc<Vb;++Xc)Rc[Xc]=wb;return ta.resume()};ta.resume=function(){return ta.alpha(.1)};ta.stop=function(){return ta.alpha(0)};ta.drag=function(){Ua||(Ua=Kb.behavior.drag().origin(w).on("dragstart.force",Xf).on("drag.force",ia).on("dragend.force",
Oh));if(!arguments.length)return Ua;this.on("mouseover.force",rj).on("mouseout.force",Si).call(Ua)};return Kb.rebind(ta,Aa,"on")};var ol=20,pl=1,bl=Infinity;Kb.layout.hierarchy=function(){function R(Ba){var Ha=[Ba],Ua=[],Oa;for(Ba.depth=0;null!=(Oa=Ha.pop());)if(Ua.push(Oa),(cb=ta.call(R,Oa,Oa.depth))&&(Sa=cb.length)){for(var Sa,cb,ib;0<=--Sa;)Ha.push(ib=cb[Sa]),ib.parent=Oa,ib.depth=Oa.depth+1;Aa&&(Oa.value=0);Oa.children=cb}else Aa&&(Oa.value=+Aa.call(R,Oa,Oa.depth)||0),delete Oa.children;Zf(Ba,
function(wb){var Eb,Lb;ia&&(Eb=wb.children)&&Eb.sort(ia);Aa&&(Lb=wb.parent)&&(Lb.value+=wb.value)});return Ua}var ia=Ff,ta=sj,Aa=sh;R.sort=function(Ba){if(!arguments.length)return ia;ia=Ba;return R};R.children=function(Ba){if(!arguments.length)return ta;ta=Ba;return R};R.value=function(Ba){if(!arguments.length)return Aa;Aa=Ba;return R};R.revalue=function(Ba){Aa&&(si(Ba,function(Ha){Ha.children&&(Ha.value=0)}),Zf(Ba,function(Ha){var Ua;Ha.children||(Ha.value=+Aa.call(R,Ha,Ha.depth)||0);if(Ua=Ha.parent)Ua.value+=
Ha.value}));return Ba};return R};Kb.layout.partition=function(){function R(Ha,Ua,Oa,Sa){var cb=Ha.children;Ha.x=Ua;Ha.y=Ha.depth*Sa;Ha.dx=Oa;Ha.dy=Sa;if(cb&&(wb=cb.length)){var ib=-1,wb,Eb;for(Oa=Ha.value?Oa/Ha.value:0;++ib<wb;)R(Eb=cb[ib],Ua,Ha=Eb.value*Oa,Sa),Ua+=Ha}}function ia(Ha){Ha=Ha.children;var Ua=0;if(Ha&&(Sa=Ha.length))for(var Oa=-1,Sa;++Oa<Sa;)Ua=Math.max(Ua,ia(Ha[Oa]));return 1+Ua}function ta(Ha,Ua){Ha=Aa.call(this,Ha,Ua);R(Ha[0],0,Ba[0],Ba[1]/ia(Ha[0]));return Ha}var Aa=Kb.layout.hierarchy(),
Ba=[1,1];ta.size=function(Ha){if(!arguments.length)return Ba;Ba=Ha;return ta};return of(ta,Aa)};Kb.layout.pie=function(){function R(Ua){var Oa=Ua.length,Sa=Ua.map(function(nc,Hc){return+ia.call(R,nc,Hc)}),cb=+("function"===typeof Aa?Aa.apply(this,arguments):Aa),ib=("function"===typeof Ba?Ba.apply(this,arguments):Ba)-cb,wb=Math.min(Math.abs(ib)/Oa,+("function"===typeof Ha?Ha.apply(this,arguments):Ha)),Eb=wb*(0>ib?-1:1),Lb=Kb.sum(Sa),Mb=Lb?(ib-Oa*Eb)/Lb:0;Oa=Kb.range(Oa);var Zb=[],cc;null!=ta&&Oa.sort(ta===
Jk?function(nc,Hc){return Sa[Hc]-Sa[nc]}:function(nc,Hc){return ta(Ua[nc],Ua[Hc])});Oa.forEach(function(nc){Zb[nc]={data:Ua[nc],value:cc=Sa[nc],startAngle:cb,endAngle:cb+=cc*Mb+Eb,padAngle:wb}});return Zb}var ia=Number,ta=Jk,Aa=0,Ba=Ef,Ha=0;R.value=function(Ua){if(!arguments.length)return ia;ia=Ua;return R};R.sort=function(Ua){if(!arguments.length)return ta;ta=Ua;return R};R.startAngle=function(Ua){if(!arguments.length)return Aa;Aa=Ua;return R};R.endAngle=function(Ua){if(!arguments.length)return Ba;
Ba=Ua;return R};R.padAngle=function(Ua){if(!arguments.length)return Ha;Ha=Ua;return R};return R};var Jk={};Kb.layout.stack=function(){function R(Oa,Sa){if(!(Eb=Oa.length))return Oa;var cb=Oa.map(function(cc,nc){return ia.call(R,cc,nc)}),ib=cb.map(function(cc){return cc.map(function(nc,Hc){return[Ha.call(R,nc,Hc),Ua.call(R,nc,Hc)]})}),wb=ta.call(R,ib,Sa);cb=Kb.permute(cb,wb);ib=Kb.permute(ib,wb);Sa=Aa.call(R,ib,Sa);wb=cb[0].length;var Eb,Lb,Mb,Zb;for(Mb=0;Mb<wb;++Mb)for(Ba.call(R,cb[0][Mb],Zb=Sa[Mb],
ib[0][Mb][1]),Lb=1;Lb<Eb;++Lb)Ba.call(R,cb[Lb][Mb],Zb+=ib[Lb-1][Mb][1],ib[Lb][Mb][1]);return Oa}var ia=w,ta=Zg,Aa=Ag,Ba=Mg,Ha=Yg,Ua=fg;R.values=function(Oa){if(!arguments.length)return ia;ia=Oa;return R};R.order=function(Oa){if(!arguments.length)return ta;ta="function"===typeof Oa?Oa:ql.get(Oa)||Zg;return R};R.offset=function(Oa){if(!arguments.length)return Aa;Aa="function"===typeof Oa?Oa:rl.get(Oa)||Ag;return R};R.x=function(Oa){if(!arguments.length)return Ha;Ha=Oa;return R};R.y=function(Oa){if(!arguments.length)return Ua;
Ua=Oa;return R};R.out=function(Oa){if(!arguments.length)return Ba;Ba=Oa;return R};return R};var ql=Kb.map({"inside-out":function(R){var ia=R.length,ta=R.map(Ti),Aa=R.map(Zj),Ba=Kb.range(ia).sort(function(ib,wb){return ta[ib]-ta[wb]}),Ha=0,Ua=0,Oa=[],Sa=[];for(R=0;R<ia;++R){var cb=Ba[R];Ha<Ua?(Ha+=Aa[cb],Oa.push(cb)):(Ua+=Aa[cb],Sa.push(cb))}return Sa.reverse().concat(Oa)},reverse:function(R){return Kb.range(R.length).reverse()},"default":Zg}),rl=Kb.map({silhouette:function(R){var ia=R.length,ta=R[0].length,
Aa=[],Ba=0,Ha,Ua,Oa,Sa=[];for(Ua=0;Ua<ta;++Ua){for(Oa=Ha=0;Ha<ia;Ha++)Oa+=R[Ha][Ua][1];Oa>Ba&&(Ba=Oa);Aa.push(Oa)}for(Ua=0;Ua<ta;++Ua)Sa[Ua]=(Ba-Aa[Ua])/2;return Sa},wiggle:function(R){var ia=R.length,ta=R[0],Aa=ta.length,Ba,Ha,Ua,Oa,Sa,cb,ib,wb=[];wb[0]=cb=ib=0;for(Ha=1;Ha<Aa;++Ha){for(Ua=Ba=0;Ba<ia;++Ba)Ua+=R[Ba][Ha][1];var Eb=Ba=0;for(Sa=ta[Ha][0]-ta[Ha-1][0];Ba<ia;++Ba){var Lb=0;for(Oa=(R[Ba][Ha][1]-R[Ba][Ha-1][1])/(2*Sa);Lb<Ba;++Lb)Oa+=(R[Lb][Ha][1]-R[Lb][Ha-1][1])/Sa;Eb+=Oa*R[Ba][Ha][1]}wb[Ha]=
cb-=Ua?Eb/Ua*Sa:0;cb<ib&&(ib=cb)}for(Ha=0;Ha<Aa;++Ha)wb[Ha]-=ib;return wb},expand:function(R){var ia=R.length,ta=R[0].length,Aa=1/ia,Ba,Ha,Ua,Oa=[];for(Ha=0;Ha<ta;++Ha){for(Ua=Ba=0;Ba<ia;Ba++)Ua+=R[Ba][Ha][1];if(Ua)for(Ba=0;Ba<ia;Ba++)R[Ba][Ha][1]/=Ua;else for(Ba=0;Ba<ia;Ba++)R[Ba][Ha][1]=Aa}for(Ha=0;Ha<ta;++Ha)Oa[Ha]=0;return Oa},zero:Ag});Kb.layout.histogram=function(){function R(Ha,Ua){var Oa=[],Sa=Ha.map(ta,this),cb=Aa.call(this,Sa,Ua),ib=Ba.call(this,cb,Sa,Ua);Ua=-1;for(var wb=Sa.length,Eb=ib.length-
1,Lb=ia?1:1/wb;++Ua<Eb;){var Mb=Oa[Ua]=[];Mb.dx=ib[Ua+1]-(Mb.x=ib[Ua]);Mb.y=0}if(0<Eb)for(Ua=-1;++Ua<wb;)Mb=Sa[Ua],Mb>=cb[0]&&Mb<=cb[1]&&(Mb=Oa[Kb.bisect(ib,Mb,1,Eb)-1],Mb.y+=Lb,Mb.push(Ha[Ua]));return Oa}var ia=!0,ta=Number,Aa=$g,Ba=yk;R.value=function(Ha){if(!arguments.length)return ta;ta=Ha;return R};R.range=function(Ha){if(!arguments.length)return Aa;Aa=va(Ha);return R};R.bins=function(Ha){if(!arguments.length)return Ba;Ba="number"===typeof Ha?function(Ua){return qg(Ua,Ha)}:va(Ha);return R};R.frequency=
function(Ha){if(!arguments.length)return ia;ia=!!Ha;return R};return R};Kb.layout.pack=function(){function R(Ha,Ua){Ha=ia.call(this,Ha,Ua);Ua=Ha[0];var Oa=Aa[0],Sa=Aa[1],cb=null==Ba?Math.sqrt:"function"===typeof Ba?Ba:function(){return Ba};Ua.x=Ua.y=0;Zf(Ua,function(wb){wb.r=+cb(wb.value)});Zf(Ua,rg);if(ta){var ib=ta*(Ba?1:Math.max(2*Ua.r/Oa,2*Ua.r/Sa))/2;Zf(Ua,function(wb){wb.r+=ib});Zf(Ua,rg);Zf(Ua,function(wb){wb.r-=ib})}ak(Ua,Oa/2,Sa/2,Ba?1:1/Math.max(2*Ua.r/Oa,2*Ua.r/Sa));return Ha}var ia=Kb.layout.hierarchy().sort(th),
ta=0,Aa=[1,1],Ba;R.size=function(Ha){if(!arguments.length)return Aa;Aa=Ha;return R};R.radius=function(Ha){if(!arguments.length)return Ba;Ba=null==Ha||"function"===typeof Ha?Ha:+Ha;return R};R.padding=function(Ha){if(!arguments.length)return ta;ta=+Ha;return R};return of(R,ia)};Kb.layout.tree=function(){function R(cb,ib){cb=Ha.call(this,cb,ib);ib=cb[0];var wb=ia(ib);Zf(wb,ta);wb.parent.m=-wb.z;si(wb,Aa);if(Sa)si(ib,Ba);else{var Eb=ib,Lb=ib,Mb=ib;si(ib,function(Hc){Hc.x<Eb.x&&(Eb=Hc);Hc.x>Lb.x&&(Lb=
Hc);Hc.depth>Mb.depth&&(Mb=Hc)});var Zb=Ua(Eb,Lb)/2-Eb.x,cc=Oa[0]/(Lb.x+Ua(Lb,Eb)/2+Zb),nc=Oa[1]/(Mb.depth||1);si(ib,function(Hc){Hc.x=(Hc.x+Zb)*cc;Hc.y=Hc.depth*nc})}return cb}function ia(cb){cb={A:null,children:[cb]};for(var ib=[cb],wb;null!=(wb=ib.pop());)for(var Eb=wb.children,Lb,Mb=0,Zb=Eb.length;Mb<Zb;++Mb)ib.push((Eb[Mb]=Lb={_:Eb[Mb],parent:wb,children:(Lb=Eb[Mb].children)&&Lb.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Mb}).a=Lb);return cb.children[0]}function ta(cb){var ib=cb.children,
wb=cb.parent.children,Eb=cb.i?wb[cb.i-1]:null;if(ib.length){for(var Lb=0,Mb=0,Zb=cb.children,cc=Zb.length,nc;0<=--cc;)nc=Zb[cc],nc.z+=Lb,nc.m+=Lb,Lb+=nc.s+(Mb+=nc.c);ib=(ib[0].z+ib[ib.length-1].z)/2;Eb?(cb.z=Eb.z+Ua(cb._,Eb._),cb.m=cb.z-ib):cb.z=ib}else Eb&&(cb.z=Eb.z+Ua(cb._,Eb._));ib=cb.parent;wb=cb.parent.A||wb[0];if(Eb){Mb=Lb=cb;Zb=Lb.parent.children[0];cc=Lb.m;nc=Mb.m;for(var Hc=Eb.m,Rc=Zb.m,Tc;Eb=bh(Eb),Lb=ah(Lb),Eb&&Lb;){Zb=ah(Zb);Mb=bh(Mb);Mb.a=cb;Tc=Eb.z+Hc-Lb.z-cc+Ua(Eb._,Lb._);if(0<Tc){var Xc=
Eb.a.parent===cb.parent?Eb.a:wb,Vb=cb,gc=Tc,Jc=gc/(Vb.i-Xc.i);Vb.c-=Jc;Vb.s+=gc;Xc.c+=Jc;Vb.z+=gc;Vb.m+=gc;cc+=Tc;nc+=Tc}Hc+=Eb.m;cc+=Lb.m;Rc+=Zb.m;nc+=Mb.m}Eb&&!bh(Mb)&&(Mb.t=Eb,Mb.m+=Hc-nc);Lb&&!ah(Zb)&&(Zb.t=Lb,Zb.m+=cc-Rc,wb=cb)}ib.A=wb}function Aa(cb){cb._.x=cb.z+cb.parent.m;cb.m+=cb.parent.m}function Ba(cb){cb.x*=Oa[0];cb.y=cb.depth*Oa[1]}var Ha=Kb.layout.hierarchy().sort(null).value(null),Ua=Ke,Oa=[1,1],Sa=null;R.separation=function(cb){if(!arguments.length)return Ua;Ua=cb;return R};R.size=
function(cb){if(!arguments.length)return Sa?null:Oa;Sa=null==(Oa=cb)?Ba:null;return R};R.nodeSize=function(cb){if(!arguments.length)return Sa?Oa:null;Sa=null==(Oa=cb)?null:Ba;return R};return of(R,Ha)};Kb.layout.cluster=function(){function R(Ha,Ua){Ha=ia.call(this,Ha,Ua);var Oa=Ha[0],Sa,cb=0;Zf(Oa,function(Lb){var Mb=Lb.children;Mb&&Mb.length?(Lb.x=gg(Mb),Lb.y=Ui(Mb)):(Lb.x=Sa?cb+=ta(Lb,Sa):0,Lb.y=0,Sa=Lb)});Ua=ch(Oa);var ib=Th(Oa),wb=Ua.x-ta(Ua,ib)/2,Eb=ib.x+ta(ib,Ua)/2;Zf(Oa,Ba?function(Lb){Lb.x=
(Lb.x-Oa.x)*Aa[0];Lb.y=(Oa.y-Lb.y)*Aa[1]}:function(Lb){Lb.x=(Lb.x-wb)/(Eb-wb)*Aa[0];Lb.y=(1-(Oa.y?Lb.y/Oa.y:1))*Aa[1]});return Ha}var ia=Kb.layout.hierarchy().sort(null).value(null),ta=Ke,Aa=[1,1],Ba=!1;R.separation=function(Ha){if(!arguments.length)return ta;ta=Ha;return R};R.size=function(Ha){if(!arguments.length)return Ba?null:Aa;Ba=null==(Aa=Ha);return R};R.nodeSize=function(Ha){if(!arguments.length)return Ba?Aa:null;Ba=null!=(Aa=Ha);return R};return of(R,ia)};Kb.layout.treemap=function(){function R(Mb,
Zb){for(var cc=-1,nc=Mb.length,Hc,Rc;++cc<nc;)Rc=(Hc=Mb[cc]).value*(0>Zb?0:Zb),Hc.area=isNaN(Rc)||0>=Rc?0:Rc}function ia(Mb){var Zb=Mb.children;if(Zb&&Zb.length){var cc=cb(Mb),nc=[],Hc=Zb.slice(),Rc=Infinity,Tc,Xc="slice"===Eb?cc.dx:"dice"===Eb?cc.dy:"slice-dice"===Eb?Mb.depth&1?cc.dy:cc.dx:Math.min(cc.dx,cc.dy);R(Hc,cc.dx*cc.dy/Mb.value);for(nc.area=0;0<(Mb=Hc.length);){nc.push(Mb=Hc[Mb-1]);nc.area+=Mb.area;if(!(Mb="squarify"!==Eb)){Mb=Xc;for(var Vb=nc.area,gc=0,Jc=Infinity,fd=-1,hd=nc.length;++fd<
hd;)if(Tc=nc[fd].area)Tc<Jc&&(Jc=Tc),Tc>gc&&(gc=Tc);Vb*=Vb;Mb*=Mb;Mb=(Tc=Vb?Math.max(Mb*gc*Lb/Vb,Vb/(Mb*Jc*Lb)):Infinity)<=Rc}Mb?(Hc.pop(),Rc=Tc):(nc.area-=nc.pop().area,Aa(nc,Xc,cc,!1),Xc=Math.min(cc.dx,cc.dy),nc.length=nc.area=0,Rc=Infinity)}nc.length&&(Aa(nc,Xc,cc,!0),nc.length=nc.area=0);Zb.forEach(ia)}}function ta(Mb){var Zb=Mb.children;if(Zb&&Zb.length){var cc=cb(Mb),nc=Zb.slice(),Hc=[];R(nc,cc.dx*cc.dy/Mb.value);for(Hc.area=0;Mb=nc.pop();)Hc.push(Mb),Hc.area+=Mb.area,null!=Mb.z&&(Aa(Hc,Mb.z?
cc.dx:cc.dy,cc,!nc.length),Hc.length=Hc.area=0);Zb.forEach(ta)}}function Aa(Mb,Zb,cc,nc){var Hc=-1,Rc=Mb.length,Tc=cc.x,Xc=cc.y,Vb=Zb?Ua(Mb.area/Zb):0;if(Zb==cc.dx){if(nc||Vb>cc.dy)Vb=cc.dy;for(;++Hc<Rc;){var gc=Mb[Hc];gc.x=Tc;gc.y=Xc;gc.dy=Vb;Tc+=gc.dx=Math.min(cc.x+cc.dx-Tc,Vb?Ua(gc.area/Vb):0)}gc.z=!0;gc.dx+=cc.x+cc.dx-Tc;cc.y+=Vb;cc.dy-=Vb}else{if(nc||Vb>cc.dx)Vb=cc.dx;for(;++Hc<Rc;)gc=Mb[Hc],gc.x=Tc,gc.y=Xc,gc.dx=Vb,Xc+=gc.dy=Math.min(cc.y+cc.dy-Xc,Vb?Ua(gc.area/Vb):0);gc.z=!1;gc.dy+=cc.y+cc.dy-
Xc;cc.x+=Vb;cc.dx-=Vb}}function Ba(Mb){Mb=wb||Ha(Mb);var Zb=Mb[0];Zb.x=Zb.y=0;Zb.value?(Zb.dx=Oa[0],Zb.dy=Oa[1]):Zb.dx=Zb.dy=0;wb&&Ha.revalue(Zb);R([Zb],Zb.dx*Zb.dy/Zb.value);(wb?ta:ia)(Zb);ib&&(wb=Mb);return Mb}var Ha=Kb.layout.hierarchy(),Ua=Math.round,Oa=[1,1],Sa=null,cb=Bg,ib=!1,wb,Eb="squarify",Lb=.5*(1+Math.sqrt(5));Ba.size=function(Mb){if(!arguments.length)return Oa;Oa=Mb;return Ba};Ba.padding=function(Mb){function Zb(Hc){var Rc=Mb.call(Ba,Hc,Hc.depth);return null==Rc?Bg(Hc):Cg(Hc,"number"===
typeof Rc?[Rc,Rc,Rc,Rc]:Rc)}function cc(Hc){return Cg(Hc,Mb)}if(!arguments.length)return Sa;var nc;cb=null==(Sa=Mb)?Bg:"function"===(nc=typeof Mb)?Zb:"number"===nc?(Mb=[Mb,Mb,Mb,Mb],cc):cc;return Ba};Ba.round=function(Mb){if(!arguments.length)return Ua!=Number;Ua=Mb?Math.round:Number;return Ba};Ba.sticky=function(Mb){if(!arguments.length)return ib;ib=Mb;wb=null;return Ba};Ba.ratio=function(Mb){if(!arguments.length)return Lb;Lb=Mb;return Ba};Ba.mode=function(Mb){if(!arguments.length)return Eb;Eb=Mb+
"";return Ba};return of(Ba,Ha)};Kb.random={normal:function(R,ia){var ta=arguments.length;2>ta&&(ia=1);1>ta&&(R=0);return function(){do{var Aa=2*Math.random()-1;var Ba=2*Math.random()-1;Ba=Aa*Aa+Ba*Ba}while(!Ba||1<Ba);return R+ia*Aa*Math.sqrt(-2*Math.log(Ba)/Ba)}},logNormal:function(){var R=Kb.random.normal.apply(Kb,arguments);return function(){return Math.exp(R())}},bates:function(R){var ia=Kb.random.irwinHall(R);return function(){return ia()/R}},irwinHall:function(R){return function(){for(var ia=
0,ta=0;ta<R;ta++)ia+=Math.random();return ia}}};Kb.scale={};var Xi={floor:w,ceil:w};Kb.scale.linear=function(){return U([0,1],[0,1],Vg,!1)};var Uh={s:1,g:1,p:1,r:1,e:1};Kb.scale.log=function(){return fb(Kb.scale.linear().domain([0,1]),10,!0,[1,10])};var hg=Kb.format(".0e"),Qf={floor:function(R){return-Math.ceil(-R)},ceil:function(R){return-Math.floor(-R)}};Kb.scale.pow=function(){return Fb(Kb.scale.linear(),1,[0,1])};Kb.scale.sqrt=function(){return Kb.scale.pow().exponent(.5)};Kb.scale.ordinal=function(){return Pb([],
{t:"range",a:[[]]})};Kb.scale.category10=function(){return Kb.scale.ordinal().range(Fg)};Kb.scale.category20=function(){return Kb.scale.ordinal().range(vg)};Kb.scale.category20b=function(){return Kb.scale.ordinal().range(Gg)};Kb.scale.category20c=function(){return Kb.scale.ordinal().range($h)};var Fg=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Na),vg=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,
14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Na),Gg=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Na),$h=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Na);Kb.scale.quantile=function(){return uc([],[])};Kb.scale.quantize=
function(){return sc(0,1,[0,1])};Kb.scale.threshold=function(){return hc([.5],[0,1])};Kb.scale.identity=function(){return rc([0,1])};Kb.svg={};Kb.svg.arc=function(){function R(){var cb=Math.max(0,+ta.apply(this,arguments)),ib=Math.max(0,+Aa.apply(this,arguments)),wb=Ua.apply(this,arguments)-df,Eb=Oa.apply(this,arguments)-df,Lb=Math.abs(Eb-wb),Mb=wb>Eb?0:1;if(ib<cb){var Zb=ib;ib=cb;cb=Zb}if(Lb>=uj)return ia(ib,Mb)+(cb?ia(cb,1-Mb):"")+"Z";var cc,nc=0,Hc=0,Rc=[];if(cc=(+Sa.apply(this,arguments)||0)/
2){var Tc=Ha===wg?Math.sqrt(cb*cb+ib*ib):+Ha.apply(this,arguments);Mb||(Hc*=-1);ib&&(Hc=la(Tc/ib*Math.sin(cc)));cb&&(nc=la(Tc/cb*Math.sin(cc)))}if(ib){Tc=ib*Math.cos(wb+Hc);cc=ib*Math.sin(wb+Hc);var Xc=ib*Math.cos(Eb-Hc);var Vb=ib*Math.sin(Eb-Hc);var gc=Math.abs(Eb-wb-2*Hc)<=fe?0:1;Hc&&Vc(Tc,cc,Xc,Vb)===Mb^gc&&(Xc=(wb+Eb)/2,Tc=ib*Math.cos(Xc),cc=ib*Math.sin(Xc),Xc=Vb=null)}else Tc=cc=0;if(cb){Hc=cb*Math.cos(Eb-nc);var Jc=cb*Math.sin(Eb-nc);var fd=cb*Math.cos(wb+nc);var hd=cb*Math.sin(wb+nc);var id=
Math.abs(wb-Eb+2*nc)<=fe?0:1;nc&&Vc(Hc,Jc,fd,hd)===1-Mb^id&&(fd=(wb+Eb)/2,Hc=cb*Math.cos(fd),Jc=cb*Math.sin(fd),fd=hd=null)}else Hc=Jc=0;1E-6<Lb&&.001<(Zb=Math.min(Math.abs(ib-cb)/2,+Ba.apply(this,arguments)))?(gc=cb<ib^Mb?0:1,id=wb=Zb,Lb<fe&&(Lb=null==fd?[Hc,Jc]:null==Xc?[Tc,cc]:kg([Tc,cc],[fd,hd],[Xc,Vb],[Hc,Jc]),id=Tc-Lb[0],wb=cc-Lb[1],Eb=Xc-Lb[0],nc=Vb-Lb[1],wb=1/Math.sin(Math.acos((id*Eb+wb*nc)/(Math.sqrt(id*id+wb*wb)*Math.sqrt(Eb*Eb+nc*nc)))/2),Lb=Math.sqrt(Lb[0]*Lb[0]+Lb[1]*Lb[1]),id=Math.min(Zb,
(cb-Lb)/(wb-1)),wb=Math.min(Zb,(ib-Lb)/(wb+1))),null!=Xc?(Lb=td(null==fd?[Hc,Jc]:[fd,hd],[Tc,cc],ib,wb,Mb),Eb=td([Xc,Vb],[Hc,Jc],ib,wb,Mb),Zb===wb?Rc.push("M",Lb[0],"A",wb,",",wb," 0 0,",gc," ",Lb[1],"A",ib,",",ib," 0 ",1-Mb^Vc(Lb[1][0],Lb[1][1],Eb[1][0],Eb[1][1]),",",Mb," ",Eb[1],"A",wb,",",wb," 0 0,",gc," ",Eb[0]):Rc.push("M",Lb[0],"A",wb,",",wb," 0 1,",gc," ",Eb[0])):Rc.push("M",Tc,",",cc),null!=fd?(ib=td([Tc,cc],[fd,hd],cb,-id,Mb),Xc=td([Hc,Jc],null==Xc?[Tc,cc]:[Xc,Vb],cb,-id,Mb),Zb===id?Rc.push("L",
Xc[0],"A",id,",",id," 0 0,",gc," ",Xc[1],"A",cb,",",cb," 0 ",Mb^Vc(Xc[1][0],Xc[1][1],ib[1][0],ib[1][1]),",",1-Mb," ",ib[1],"A",id,",",id," 0 0,",gc," ",ib[0]):Rc.push("L",Xc[0],"A",id,",",id," 0 0,",gc," ",ib[0])):Rc.push("L",Hc,",",Jc)):(Rc.push("M",Tc,",",cc),null!=Xc&&Rc.push("A",ib,",",ib," 0 ",gc,",",Mb," ",Xc,",",Vb),Rc.push("L",Hc,",",Jc),null!=fd&&Rc.push("A",cb,",",cb," 0 ",id,",",1-Mb," ",fd,",",hd));Rc.push("Z");return Rc.join("")}function ia(cb,ib){return"M0,"+cb+"A"+cb+","+cb+" 0 1,"+
ib+" 0,"+-cb+"A"+cb+","+cb+" 0 1,"+ib+" 0,"+cb}var ta=Nb,Aa=jc,Ba=oc,Ha=wg,Ua=Uc,Oa=jd,Sa=qd;R.innerRadius=function(cb){if(!arguments.length)return ta;ta=va(cb);return R};R.outerRadius=function(cb){if(!arguments.length)return Aa;Aa=va(cb);return R};R.cornerRadius=function(cb){if(!arguments.length)return Ba;Ba=va(cb);return R};R.padRadius=function(cb){if(!arguments.length)return Ha;Ha=cb==wg?wg:va(cb);return R};R.startAngle=function(cb){if(!arguments.length)return Ua;Ua=va(cb);return R};R.endAngle=
function(cb){if(!arguments.length)return Oa;Oa=va(cb);return R};R.padAngle=function(cb){if(!arguments.length)return Sa;Sa=va(cb);return R};R.centroid=function(){var cb=(+ta.apply(this,arguments)+ +Aa.apply(this,arguments))/2,ib=(+Ua.apply(this,arguments)+ +Oa.apply(this,arguments))/2-df;return[Math.cos(ib)*cb,Math.sin(ib)*cb]};return R};var wg="auto";Kb.svg.line=function(){return nd(w)};var Bk=Kb.map({linear:Gd,"linear-closed":Hd,step:function(R){for(var ia=0,ta=R.length,Aa=R[0],Ba=[Aa[0],",",Aa[1]];++ia<
ta;)Ba.push("H",(Aa[0]+(Aa=R[ia])[0])/2,"V",Aa[1]);1<ta&&Ba.push("H",Aa[0]);return Ba.join("")},"step-before":zd,"step-after":he,basis:De,"basis-open":function(R){if(4>R.length)return Gd(R);for(var ia=[],ta=-1,Aa=R.length,Ba,Ha=[0],Ua=[0];3>++ta;)Ba=R[ta],Ha.push(Ba[0]),Ua.push(Ba[1]);ia.push(ze(dh,Ha)+","+ze(dh,Ua));for(--ta;++ta<Aa;)Ba=R[ta],Ha.shift(),Ha.push(Ba[0]),Ua.shift(),Ua.push(Ba[1]),Wd(ia,Ha,Ua);return ia.join("")},"basis-closed":function(R){for(var ia,ta=-1,Aa=R.length,Ba=Aa+4,Ha,Ua=
[],Oa=[];4>++ta;)Ha=R[ta%Aa],Ua.push(Ha[0]),Oa.push(Ha[1]);ia=[ze(dh,Ua),",",ze(dh,Oa)];for(--ta;++ta<Ba;)Ha=R[ta%Aa],Ua.shift(),Ua.push(Ha[0]),Oa.shift(),Oa.push(Ha[1]),Wd(ia,Ua,Oa);return ia.join("")},bundle:function(R,ia){var ta=R.length-1;if(ta)for(var Aa=R[0][0],Ba=R[0][1],Ha=R[ta][0]-Aa,Ua=R[ta][1]-Ba,Oa=-1,Sa,cb;++Oa<=ta;)Sa=R[Oa],cb=Oa/ta,Sa[0]=ia*Sa[0]+(1-ia)*(Aa+cb*Ha),Sa[1]=ia*Sa[1]+(1-ia)*(Ba+cb*Ua);return De(R)},cardinal:function(R,ia){return 3>R.length?Gd(R):R[0]+ee(R,Ce(R,ia))},"cardinal-open":function(R,
ia){return 4>R.length?Gd(R):R[1]+ee(R.slice(1,-1),Ce(R,ia))},"cardinal-closed":function(R,ia){return 3>R.length?Hd(R):R[0]+ee((R.push(R[0]),R),Ce([R[R.length-2]].concat(R,[R[1]]),ia))},monotone:function(R){if(3>R.length)R=Gd(R);else{var ia=R[0],ta=[],Aa;var Ba=0;var Ha=R.length-1;var Ua=[];var Oa=R[1];for(Aa=Ua[0]=oe(R[0],Oa);++Ba<Ha;)Ua[Ba]=(Aa+(Aa=oe(Oa,Oa=R[Ba+1])))/2;Ua[Ba]=Aa;for(var Sa=-1,cb=R.length-1;++Sa<cb;)Ba=oe(R[Sa],R[Sa+1]),1E-6>de(Ba)?Ua[Sa]=Ua[Sa+1]=0:(Ha=Ua[Sa]/Ba,Oa=Ua[Sa+1]/Ba,
Aa=Ha*Ha+Oa*Oa,9<Aa&&(Aa=3*Ba/Math.sqrt(Aa),Ua[Sa]=Aa*Ha,Ua[Sa+1]=Aa*Oa));for(Sa=-1;++Sa<=cb;)Aa=(R[Math.min(cb,Sa+1)][0]-R[Math.max(0,Sa-1)][0])/(6*(1+Ua[Sa]*Ua[Sa])),ta.push([Aa||0,Ua[Sa]*Aa||0]);R=ia+ee(R,ta)}return R}});Bk.forEach(function(R,ia){ia.key=R;ia.closed=/-closed$/.test(R)});var Yk=[0,2/3,1/3,0],bg=[0,1/3,2/3,0],dh=[0,1/6,2/3,1/6];Kb.svg.line.radial=function(){var R=nd(Pe);R.radius=R.x;delete R.x;R.angle=R.y;delete R.y;return R};zd.reverse=he;he.reverse=zd;Kb.svg.area=function(){return ye(w)};
Kb.svg.area.radial=function(){var R=ye(Pe);R.radius=R.x;delete R.x;R.innerRadius=R.x0;delete R.x0;R.outerRadius=R.x1;delete R.x1;R.angle=R.y;delete R.y;R.startAngle=R.y0;delete R.y0;R.endAngle=R.y1;delete R.y1;return R};Kb.svg.chord=function(){function R(Sa,cb){var ib=ia(this,Aa,Sa,cb);Sa=ia(this,Ba,Sa,cb);return"M"+ib.p0+ta(ib.r,ib.p1,ib.a1-ib.a0)+(ib.a0==Sa.a0&&ib.a1==Sa.a1?"Q 0,0 "+ib.p0:"Q 0,0 "+Sa.p0+ta(Sa.r,Sa.p1,Sa.a1-Sa.a0)+("Q 0,0 "+ib.p0))+"Z"}function ia(Sa,cb,ib,wb){var Eb=cb.call(Sa,
ib,wb);cb=Ha.call(Sa,Eb,wb);ib=Ua.call(Sa,Eb,wb)-df;Sa=Oa.call(Sa,Eb,wb)-df;return{r:cb,a0:ib,a1:Sa,p0:[cb*Math.cos(ib),cb*Math.sin(ib)],p1:[cb*Math.cos(Sa),cb*Math.sin(Sa)]}}function ta(Sa,cb,ib){return"A"+Sa+","+Sa+" 0 "+ +(ib>fe)+",1 "+cb}var Aa=ud,Ba=xd,Ha=Re,Ua=Uc,Oa=jd;R.radius=function(Sa){if(!arguments.length)return Ha;Ha=va(Sa);return R};R.source=function(Sa){if(!arguments.length)return Aa;Aa=va(Sa);return R};R.target=function(Sa){if(!arguments.length)return Ba;Ba=va(Sa);return R};R.startAngle=
function(Sa){if(!arguments.length)return Ua;Ua=va(Sa);return R};R.endAngle=function(Sa){if(!arguments.length)return Oa;Oa=va(Sa);return R};return R};Kb.svg.diagonal=function(){function R(Ba,Ha){var Ua=ia.call(this,Ba,Ha);Ba=ta.call(this,Ba,Ha);Ha=(Ua.y+Ba.y)/2;Ua=[Ua,{x:Ua.x,y:Ha},{x:Ba.x,y:Ha},Ba];Ua=Ua.map(Aa);return"M"+Ua[0]+"C"+Ua[1]+" "+Ua[2]+" "+Ua[3]}var ia=ud,ta=xd,Aa=wf;R.source=function(Ba){if(!arguments.length)return ia;ia=va(Ba);return R};R.target=function(Ba){if(!arguments.length)return ta;
ta=va(Ba);return R};R.projection=function(Ba){if(!arguments.length)return Aa;Aa=Ba;return R};return R};Kb.svg.diagonal.radial=function(){var R=Kb.svg.diagonal(),ia=wf,ta=R.projection;R.projection=function(Aa){return arguments.length?ta(hf(ia=Aa)):ia};return R};Kb.svg.symbol=function(){function R(Aa,Ba){return(cl.get(ia.call(this,Aa,Ba))||zf)(ta.call(this,Aa,Ba))}var ia=af,ta=uh;R.type=function(Aa){if(!arguments.length)return ia;ia=va(Aa);return R};R.size=function(Aa){if(!arguments.length)return ta;
ta=va(Aa);return R};return R};var cl=Kb.map({circle:zf,cross:function(R){R=Math.sqrt(R/5)/2;return"M"+-3*R+","+-R+"H"+-R+"V"+-3*R+"H"+R+"V"+-R+"H"+3*R+"V"+R+"H"+R+"V"+3*R+"H"+-R+"V"+R+"H"+-3*R+"Z"},diamond:function(R){R=Math.sqrt(R/(2*ai));var ia=R*ai;return"M0,"+-R+"L"+ia+",0 0,"+R+" "+-ia+",0Z"},square:function(R){R=Math.sqrt(R)/2;return"M"+-R+","+-R+"L"+R+","+-R+" "+R+","+R+" "+-R+","+R+"Z"},"triangle-down":function(R){R=Math.sqrt(R/Aj);var ia=R*Aj/2;return"M0,"+ia+"L"+R+","+-ia+" "+-R+","+-ia+
"Z"},"triangle-up":function(R){R=Math.sqrt(R/Aj);var ia=R*Aj/2;return"M0,"+-ia+"L"+R+","+ia+" "+-R+","+ia+"Z"}});Kb.svg.symbolTypes=cl.keys();var Aj=Math.sqrt(3),ai=Math.tan(30*ke);He.transition=function(R){var ia=yi||++dl;R=Ae(R);for(var ta=[],Aa,Ba,Ha=hk||{time:Date.now(),ease:Me,delay:0,duration:250},Ua=-1,Oa=this.length;++Ua<Oa;){ta.push(Aa=[]);for(var Sa=this[Ua],cb=-1,ib=Sa.length;++cb<ib;)(Ba=Sa[cb])&&Ne(Ba,cb,R,ia,Ha),Aa.push(Ba)}return Vh(ta,R,ia)};He.interrupt=function(R){return this.each(null==
R?Bf:sg(Ae(R)))};var Bf=sg(Ae()),pf=[],dl=0,yi,hk;pf.call=He.call;pf.empty=He.empty;pf.node=He.node;pf.size=He.size;Kb.transition=function(R,ia){return R&&R.transition?yi?R.transition(ia):R:Kb.selection().transition(R)};Kb.transition.prototype=pf;pf.select=function(R){var ia=this.id,ta=this.namespace,Aa=[],Ba,Ha,Ua;R=I(R);for(var Oa=-1,Sa=this.length;++Oa<Sa;){Aa.push(Ba=[]);for(var cb=this[Oa],ib=-1,wb=cb.length;++ib<wb;)(Ua=cb[ib])&&(Ha=R.call(Ua,Ua.__data__,ib,Oa))?("__data__"in Ua&&(Ha.__data__=
Ua.__data__),Ne(Ha,ib,ta,ia,Ua[ta][ia]),Ba.push(Ha)):Ba.push(null)}return Vh(Aa,ta,ia)};pf.selectAll=function(R){var ia=this.id,ta=this.namespace,Aa=[],Ba,Ha;R=M(R);for(var Ua=-1,Oa=this.length;++Ua<Oa;)for(var Sa=this[Ua],cb=-1,ib=Sa.length;++cb<ib;)if(Ba=Sa[cb]){var wb=Ba[ta][ia];var Eb=R.call(Ba,Ba.__data__,cb,Ua);Aa.push(Ba=[]);for(var Lb=-1,Mb=Eb.length;++Lb<Mb;)(Ha=Eb[Lb])&&Ne(Ha,Lb,ta,ia,wb),Ba.push(Ha)}return Vh(Aa,ta,ia)};pf.filter=function(R){var ia=[],ta,Aa;"function"!==typeof R&&(R=Z(R));
for(var Ba=0,Ha=this.length;Ba<Ha;Ba++){ia.push(ta=[]);var Ua=this[Ba];for(var Oa=0,Sa=Ua.length;Oa<Sa;Oa++)(Aa=Ua[Oa])&&R.call(Aa,Aa.__data__,Oa,Ba)&&ta.push(Aa)}return Vh(ia,this.namespace,this.id)};pf.tween=function(R,ia){var ta=this.id,Aa=this.namespace;return 2>arguments.length?this.node()[Aa][ta].tween.get(R):Y(this,null==ia?function(Ba){Ba[Aa][ta].tween.remove(R)}:function(Ba){Ba[Aa][ta].tween.set(R,ia)})};pf.attr=function(R,ia){function ta(){this.removeAttribute(Oa)}function Aa(){this.removeAttributeNS(Oa.space,
Oa.local)}function Ba(Sa){return null==Sa?ta:(Sa+="",function(){var cb=this.getAttribute(Oa),ib;return cb!==Sa&&(ib=Ua(cb,Sa),function(wb){this.setAttribute(Oa,ib(wb))})})}function Ha(Sa){return null==Sa?Aa:(Sa+="",function(){var cb=this.getAttributeNS(Oa.space,Oa.local),ib;return cb!==Sa&&(ib=Ua(cb,Sa),function(wb){this.setAttributeNS(Oa.space,Oa.local,ib(wb))})})}if(2>arguments.length){for(ia in R)this.attr(ia,R[ia]);return this}var Ua="transform"==R?Jf:Vg,Oa=Kb.ns.qualify(R);return Kf(this,"attr."+
R,ia,Oa.local?Ha:Ba)};pf.attrTween=function(R,ia){function ta(Ha,Ua){var Oa=ia.call(this,Ha,Ua,this.getAttribute(Ba));return Oa&&function(Sa){this.setAttribute(Ba,Oa(Sa))}}function Aa(Ha,Ua){var Oa=ia.call(this,Ha,Ua,this.getAttributeNS(Ba.space,Ba.local));return Oa&&function(Sa){this.setAttributeNS(Ba.space,Ba.local,Oa(Sa))}}var Ba=Kb.ns.qualify(R);return this.tween("attr."+R,Ba.local?Aa:ta)};pf.style=function(R,ia,ta){function Aa(){this.style.removeProperty(R)}var Ba=arguments.length;if(3>Ba){if("string"!==
typeof R){2>Ba&&(ia="");for(ta in R)this.style(ta,R[ta],ia);return this}ta=""}return Kf(this,"style."+R,ia,function(Ha){return null==Ha?Aa:(Ha+="",function(){var Ua=r(this).getComputedStyle(this,null).getPropertyValue(R),Oa;return Ua!==Ha&&(Oa=Vg(Ua,Ha),function(Sa){this.style.setProperty(R,Oa(Sa),ta)})})})};pf.styleTween=function(R,ia,ta){3>arguments.length&&(ta="");return this.tween("style."+R,function(Aa,Ba){var Ha=ia.call(this,Aa,Ba,r(this).getComputedStyle(this,null).getPropertyValue(R));return Ha&&
function(Ua){this.style.setProperty(R,Ha(Ua),ta)}})};pf.text=function(R){return Kf(this,"text",R,Yi)};pf.remove=function(){var R=this.namespace;return this.each("end.transition",function(){var ia;2>this[R].count&&(ia=this.parentNode)&&ia.removeChild(this)})};pf.ease=function(R){var ia=this.id,ta=this.namespace;if(1>arguments.length)return this.node()[ta][ia].ease;"function"!==typeof R&&(R=Kb.ease.apply(Kb,arguments));return Y(this,function(Aa){Aa[ta][ia].ease=R})};pf.delay=function(R){var ia=this.id,
ta=this.namespace;return 1>arguments.length?this.node()[ta][ia].delay:Y(this,"function"===typeof R?function(Aa,Ba,Ha){Aa[ta][ia].delay=+R.call(Aa,Aa.__data__,Ba,Ha)}:(R=+R,function(Aa){Aa[ta][ia].delay=R}))};pf.duration=function(R){var ia=this.id,ta=this.namespace;return 1>arguments.length?this.node()[ta][ia].duration:Y(this,"function"===typeof R?function(Aa,Ba,Ha){Aa[ta][ia].duration=Math.max(1,R.call(Aa,Aa.__data__,Ba,Ha))}:(R=Math.max(1,R),function(Aa){Aa[ta][ia].duration=R}))};pf.each=function(R,
ia){var ta=this.id,Aa=this.namespace;if(2>arguments.length){var Ba=hk,Ha=yi;try{yi=ta,Y(this,function(Ua,Oa,Sa){hk=Ua[Aa][ta];R.call(Ua,Ua.__data__,Oa,Sa)})}finally{hk=Ba,yi=Ha}}else Y(this,function(Ua){Ua=Ua[Aa][ta];(Ua.event||(Ua.event=Kb.dispatch("start","end","interrupt"))).on(R,ia)});return this};pf.transition=function(){for(var R=this.id,ia=++dl,ta=this.namespace,Aa=[],Ba,Ha,Ua,Oa,Sa=0,cb=this.length;Sa<cb;Sa++){Aa.push(Ba=[]);Ha=this[Sa];for(var ib=0,wb=Ha.length;ib<wb;ib++){if(Ua=Ha[ib])Oa=
Ua[ta][R],Ne(Ua,ib,ta,ia,{time:Oa.time,ease:Oa.ease,delay:Oa.delay+Oa.duration,duration:Oa.duration});Ba.push(Ua)}}return Vh(Aa,ta,ia)};Kb.svg.axis=function(){function R(cb){cb.each(function(){var ib=Kb.select(this),wb=this.__chart__||ia,Eb=this.__chart__=ia.copy(),Lb=null==Oa?Eb.ticks?Eb.ticks.apply(Eb,Ua):Eb.domain():Oa,Mb=null==Sa?Eb.tickFormat?Eb.tickFormat.apply(Eb,Ua):w:Sa,Zb=ib.selectAll(".tick").data(Lb,Eb);Lb=Zb.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6);var cc=
Kb.transition(Zb.exit()).style("opacity",1E-6).remove(),nc=Kb.transition(Zb.order()).style("opacity",1),Hc=Math.max(Aa,0)+Ha,Rc=ag(Eb);ib=ib.selectAll(".domain").data([0]);ib=(ib.enter().append("path").attr("class","domain"),Kb.transition(ib));Lb.append("line");Lb.append("text");var Tc=Lb.select("line"),Xc=nc.select("line");Zb=Zb.select("text").text(Mb);var Vb=Lb.select("text"),gc=nc.select("text"),Jc="top"===ta||"left"===ta?-1:1;if("bottom"===ta||"top"===ta){Mb=ig;var fd="x";var hd="y";var id="x2";
var ad="y2";Zb.attr("dy",0>Jc?"0em":".71em").style("text-anchor","middle");ib.attr("d","M"+Rc[0]+","+Jc*Ba+"V0H"+Rc[1]+"V"+Jc*Ba)}else Mb=Rf,fd="y",hd="x",id="y2",ad="x2",Zb.attr("dy",".32em").style("text-anchor",0>Jc?"end":"start"),ib.attr("d","M"+Jc*Ba+","+Rc[0]+"H0V"+Rc[1]+"H"+Jc*Ba);Tc.attr(ad,Jc*Aa);Vb.attr(hd,Jc*Hc);Xc.attr(id,0).attr(ad,Jc*Aa);gc.attr(fd,0).attr(hd,Jc*Hc);if(Eb.rangeBand){var Md=Eb,$d=Md.rangeBand()/2;wb=Eb=function(ie){return Md(ie)+$d}}else wb.rangeBand?wb=Eb:cc.call(Mb,
Eb,wb);Lb.call(Mb,wb,Eb);nc.call(Mb,Eb,Eb)})}var ia=Kb.scale.linear(),ta=Kk,Aa=6,Ba=6,Ha=3,Ua=[10],Oa=null,Sa;R.scale=function(cb){if(!arguments.length)return ia;ia=cb;return R};R.orient=function(cb){if(!arguments.length)return ta;ta=cb in Pg?cb+"":Kk;return R};R.ticks=function(){if(!arguments.length)return Ua;Ua=dg(arguments);return R};R.tickValues=function(cb){if(!arguments.length)return Oa;Oa=cb;return R};R.tickFormat=function(cb){if(!arguments.length)return Sa;Sa=cb;return R};R.tickSize=function(cb){var ib=
arguments.length;if(!ib)return Aa;Aa=+cb;Ba=+arguments[ib-1];return R};R.innerTickSize=function(cb){if(!arguments.length)return Aa;Aa=+cb;return R};R.outerTickSize=function(cb){if(!arguments.length)return Ba;Ba=+cb;return R};R.tickPadding=function(cb){if(!arguments.length)return Ha;Ha=+cb;return R};R.tickSubdivide=function(){return arguments.length&&R};return R};var Kk="bottom",Pg={top:1,right:1,bottom:1,left:1};Kb.svg.brush=function(){function R(Zb){Zb.each(function(){var cc=Kb.select(this).style("pointer-events",
"all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Ba).on("touchstart.brush",Ba),nc=cc.selectAll(".background").data([0]);nc.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");cc.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Hc=cc.selectAll(".resize").data(Mb,w);Hc.exit().remove();Hc.enter().append("g").attr("class",function(Rc){return"resize "+Rc}).style("cursor",
function(Rc){return sl[Rc]}).append("rect").attr("x",function(Rc){return/[ew]$/.test(Rc)?-3:null}).attr("y",function(Rc){return/^[ns]/.test(Rc)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");Hc.style("display",R.empty()?"none":null);cc=Kb.transition(cc);nc=Kb.transition(nc);Ua&&(Hc=ag(Ua),nc.attr("x",Hc[0]).attr("width",Hc[1]-Hc[0]),ta(cc));Oa&&(Hc=ag(Oa),nc.attr("y",Hc[0]).attr("height",Hc[1]-Hc[0]),Aa(cc));ia(cc)})}function ia(Zb){Zb.selectAll(".resize").attr("transform",
function(cc){return"translate("+Sa[+/e$/.test(cc)]+","+cb[+/^s/.test(cc)]+")"})}function ta(Zb){Zb.select(".extent").attr("x",Sa[0]);Zb.selectAll(".extent,.n\x3erect,.s\x3erect").attr("width",Sa[1]-Sa[0])}function Aa(Zb){Zb.select(".extent").attr("y",cb[0]);Zb.selectAll(".extent,.e\x3erect,.w\x3erect").attr("height",cb[1]-cb[0])}function Ba(){function Zb(){var ne=Kb.mouse(Hc),le=!1;ie&&(ne[0]+=ie[0],ne[1]+=ie[1]);fd||(Kb.event.altKey?(id||(id=[(Sa[0]+Sa[1])/2,(cb[0]+cb[1])/2]),ad[0]=Sa[+(ne[0]<id[0])],
ad[1]=cb[+(ne[1]<id[1])]):id=null);gc&&cc(ne,Ua,0)&&(ta(Xc),le=!0);Jc&&cc(ne,Oa,1)&&(Aa(Xc),le=!0);le&&(ia(Xc),Tc({type:"brush",mode:fd?"move":"resize"}))}function cc(ne,le,we){var Yd=ag(le);le=Yd[0];var Df=Yd[1];Yd=ad[we];var ef=we?cb:Sa,ng=ef[1]-ef[0];fd&&(le-=Yd,Df-=ng+Yd);ne=(we?Lb:Eb)?Math.max(le,Math.min(Df,ne[we])):ne[we];fd?le=(ne+=Yd)+ng:(id&&(Yd=Math.max(le,Math.min(Df,2*id[we]-ne))),Yd<ne?(le=ne,ne=Yd):le=Yd);if(ef[0]!=ne||ef[1]!=le)return we?wb=null:ib=null,ef[0]=ne,ef[1]=le,!0}function nc(){Zb();
Xc.style("pointer-events","all").selectAll(".resize").style("display",R.empty()?"none":null);Kb.select("body").style("cursor",null);Md.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);hd();Tc({type:"brushend"})}var Hc=this,Rc=Kb.select(Kb.event.target),Tc=Ha.of(Hc,arguments),Xc=Kb.select(Hc),Vb=Rc.datum(),gc=!/^(n|s)$/.test(Vb)&&Ua,Jc=!/^(e|w)$/.test(Vb)&&Oa,fd=Rc.classed("extent"),hd=pa(Hc),id,
ad=Kb.mouse(Hc),Md=Kb.select(r(Hc)).on("keydown.brush",function(){32==Kb.event.keyCode&&(fd||(id=null,ad[0]-=Sa[1],ad[1]-=cb[1],fd=2),u())}).on("keyup.brush",function(){32==Kb.event.keyCode&&2==fd&&(ad[0]+=Sa[1],ad[1]+=cb[1],fd=0,u())});if(Kb.event.changedTouches)Md.on("touchmove.brush",Zb).on("touchend.brush",nc);else Md.on("mousemove.brush",Zb).on("mouseup.brush",nc);Xc.interrupt().selectAll("*").interrupt();if(fd)ad[0]=Sa[0]-ad[0],ad[1]=cb[0]-ad[1];else if(Vb){var $d=+/w$/.test(Vb);Vb=+/^n/.test(Vb);
var ie=[Sa[1-$d]-ad[0],cb[1-Vb]-ad[1]];ad[0]=Sa[$d];ad[1]=cb[Vb]}else Kb.event.altKey&&(id=ad.slice());Xc.style("pointer-events","none").selectAll(".resize").style("display",null);Kb.select("body").style("cursor",Rc.style("cursor"));Tc({type:"brushstart"});Zb()}var Ha=H(R,"brushstart","brush","brushend"),Ua=null,Oa=null,Sa=[0,0],cb=[0,0],ib,wb,Eb=!0,Lb=!0,Mb=Lk[0];R.event=function(Zb){Zb.each(function(){var cc=Ha.of(this,arguments),nc={x:Sa,y:cb,i:ib,j:wb},Hc=this.__chart__||nc;this.__chart__=nc;
yi?Kb.select(this).transition().each("start.brush",function(){ib=Hc.i;wb=Hc.j;Sa=Hc.x;cb=Hc.y;cc({type:"brushstart"})}).tween("brush:brush",function(){var Rc=ri(Sa,nc.x),Tc=ri(cb,nc.y);ib=wb=null;return function(Xc){Sa=nc.x=Rc(Xc);cb=nc.y=Tc(Xc);cc({type:"brush",mode:"resize"})}}).each("end.brush",function(){ib=nc.i;wb=nc.j;cc({type:"brush",mode:"resize"});cc({type:"brushend"})}):(cc({type:"brushstart"}),cc({type:"brush",mode:"resize"}),cc({type:"brushend"}))})};R.x=function(Zb){if(!arguments.length)return Ua;
Ua=Zb;Mb=Lk[!Ua<<1|!Oa];return R};R.y=function(Zb){if(!arguments.length)return Oa;Oa=Zb;Mb=Lk[!Ua<<1|!Oa];return R};R.clamp=function(Zb){if(!arguments.length)return Ua&&Oa?[Eb,Lb]:Ua?Eb:Oa?Lb:null;Ua&&Oa?(Eb=!!Zb[0],Lb=!!Zb[1]):Ua?Eb=!!Zb:Oa&&(Lb=!!Zb);return R};R.extent=function(Zb){if(!arguments.length){if(Ua)if(ib){var cc=ib[0];var nc=ib[1]}else if(cc=Sa[0],nc=Sa[1],Ua.invert&&(cc=Ua.invert(cc),nc=Ua.invert(nc)),nc<cc){var Hc=cc;cc=nc;nc=Hc}if(Oa)if(wb){var Rc=wb[0];var Tc=wb[1]}else Rc=cb[0],
Tc=cb[1],Oa.invert&&(Rc=Oa.invert(Rc),Tc=Oa.invert(Tc)),Tc<Rc&&(Hc=Rc,Rc=Tc,Tc=Hc);return Ua&&Oa?[[cc,Rc],[nc,Tc]]:Ua?[cc,nc]:Oa&&[Rc,Tc]}Ua&&(cc=Zb[0],nc=Zb[1],Oa&&(cc=cc[0],nc=nc[0]),ib=[cc,nc],Ua.invert&&(cc=Ua(cc),nc=Ua(nc)),nc<cc&&(Hc=cc,cc=nc,nc=Hc),cc!=Sa[0]||nc!=Sa[1])&&(Sa=[cc,nc]);Oa&&(Rc=Zb[0],Tc=Zb[1],Ua&&(Rc=Rc[1],Tc=Tc[1]),wb=[Rc,Tc],Oa.invert&&(Rc=Oa(Rc),Tc=Oa(Tc)),Tc<Rc&&(Hc=Rc,Rc=Tc,Tc=Hc),Rc!=cb[0]||Tc!=cb[1])&&(cb=[Rc,Tc]);return R};R.clear=function(){R.empty()||(Sa=[0,0],cb=[0,
0],ib=wb=null);return R};R.empty=function(){return!!Ua&&Sa[0]==Sa[1]||!!Oa&&cb[0]==cb[1]};return Kb.rebind(R,Ha,"on")};var sl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Lk=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Mk=Qd.format=xj.timeFormat,Nk=Mk.utc,Ok=Nk("%Y-%m-%dT%H:%M:%S.%LZ");Mk.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Dg:Ok;Dg.parse=function(R){R=new Date(R);return isNaN(R)?
null:R};Dg.toString=Ok.toString;Qd.second=qc(function(R){return new mf(1E3*Math.floor(R/1E3))},function(R,ia){R.setTime(R.getTime()+1E3*Math.floor(ia))},function(R){return R.getSeconds()});Qd.seconds=Qd.second.range;Qd.seconds.utc=Qd.second.utc.range;Qd.minute=qc(function(R){return new mf(6E4*Math.floor(R/6E4))},function(R,ia){R.setTime(R.getTime()+6E4*Math.floor(ia))},function(R){return R.getMinutes()});Qd.minutes=Qd.minute.range;Qd.minutes.utc=Qd.minute.utc.range;Qd.hour=qc(function(R){var ia=R.getTimezoneOffset()/
60;return new mf(36E5*(Math.floor(R/36E5-ia)+ia))},function(R,ia){R.setTime(R.getTime()+36E5*Math.floor(ia))},function(R){return R.getHours()});Qd.hours=Qd.hour.range;Qd.hours.utc=Qd.hour.utc.range;Qd.month=qc(function(R){R=Qd.day(R);R.setDate(1);return R},function(R,ia){R.setMonth(R.getMonth()+ia)},function(R){return R.getMonth()});Qd.months=Qd.month.range;Qd.months.utc=Qd.month.utc.range;var vh=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],
Pk=[[Qd.second,1],[Qd.second,5],[Qd.second,15],[Qd.second,30],[Qd.minute,1],[Qd.minute,5],[Qd.minute,15],[Qd.minute,30],[Qd.hour,1],[Qd.hour,3],[Qd.hour,6],[Qd.hour,12],[Qd.day,1],[Qd.day,2],[Qd.week,1],[Qd.month,1],[Qd.month,3],[Qd.year,1]],Qk=Mk.multi([[".%L",function(R){return R.getMilliseconds()}],[":%S",function(R){return R.getSeconds()}],["%I:%M",function(R){return R.getMinutes()}],["%I %p",function(R){return R.getHours()}],["%a %d",function(R){return R.getDay()&&1!=R.getDate()}],["%b %d",function(R){return 1!=
R.getDate()}],["%B",function(R){return R.getMonth()}],["%Y",Gc]]),Ng={range:function(R,ia,ta){return Kb.range(Math.ceil(R/ta)*ta,+ia,ta).map(Af)},floor:w,ceil:w};Pk.year=Qd.year;Qd.scale=function(){return Eg(Kb.scale.linear(),Pk,Qk)};var el=Pk.map(function(R){return[R[0].utc,R[1]]}),tl=Nk.multi([[".%L",function(R){return R.getUTCMilliseconds()}],[":%S",function(R){return R.getUTCSeconds()}],["%I:%M",function(R){return R.getUTCMinutes()}],["%I %p",function(R){return R.getUTCHours()}],["%a %d",function(R){return R.getUTCDay()&&
1!=R.getUTCDate()}],["%b %d",function(R){return 1!=R.getUTCDate()}],["%B",function(R){return R.getUTCMonth()}],["%Y",Gc]]);el.year=Qd.year.utc;Qd.scale.utc=function(){return Eg(Kb.scale.linear(),el,tl)};Kb.text=Ea(function(R){return R.responseText});Kb.json=function(R,ia){return Qa(R,"application/json",Zi,ia)};Kb.html=function(R,ia){return Qa(R,"text/html",ti,ia)};Kb.xml=Ea(function(R){return R.responseXML});"object"===typeof D&&D.exports?D.exports=Kb:this.d3=Kb}()},{}],170:[function(b,D,G){D.exports=
function(){for(var r=0;r<arguments.length;r++)if(void 0!==arguments[r])return arguments[r]}},{}],171:[function(b,D,G){function r(e,f){this.point=e;this.index=f}function n(e,f){e=e.point;f=f.point;for(var l=e.length,m=0;m<l;++m){var c=f[m]-e[m];if(c)return c}return 0}function p(e,f,l){if(1===e)return l?[[-1,0]]:[];f=f.map(function(d,g){return[d[0],g]});f.sort(function(d,g){return d[0]-g[0]});for(var m=Array(e-1),c=1;c<e;++c)m[c-1]=[f[c-1][1],f[c][1]];l&&m.push([-1,m[0][1]],[m[e-1][1],-1]);return m}
var k=b("incremental-convex-hull"),a=b("uniq");D.exports=function(e,f){var l=e.length;if(0===l)return[];var m=e[0].length;if(1>m)return[];if(1===m)return p(l,e,f);for(var c=Array(l),d=1,g=0;g<l;++g){for(var h=e[g],q=Array(m+1),t=0,v=0;v<m;++v){var w=h[v];q[v]=w;t+=w*w}q[m]=t;c[g]=new r(q,g);d=Math.max(t,d)}a(c,n);l=c.length;e=Array(l+m+1);var A=Array(l+m+1);h=Array(m+1);for(g=0;g<=m;++g)h[g]=0;h[m]=(m+1)*(m+1)*d;e[0]=h.slice();A[0]=-1;for(g=0;g<=m;++g)q=h.slice(),q[g]=1,e[g+1]=q,A[g+1]=-1;for(g=0;g<
l;++g)d=c[g],e[g+m+1]=d.point,A[g+m+1]=d.index;l=k(e,!1);l=f?l.filter(function(z){for(var y=0,B=0;B<=m;++B){var C=A[z[B]];if(0>C&&2<=++y)return!1;z[B]=C}return!0}):l.filter(function(z){for(var y=0;y<=m;++y){var B=A[z[y]];if(0>B)return!1;z[y]=B}return!0});if(m&1)for(g=0;g<l.length;++g)d=l[g],q=d[0],d[0]=d[1],d[1]=q;return l}},{"incremental-convex-hull":433,uniq:569}],172:[function(b,D,G){function r(a,e){Array.isArray(a)&&(a=a.join(", "));var f={},l=16,m=.05;if(e)if(2===e.length&&"number"===typeof e[0])var c=
n(e);else Array.isArray(e)?c=e:(e.o?c=n(e.o):e.pairs&&(c=e.pairs),e.fontSize&&(l=e.fontSize),null!=e.threshold&&(m=e.threshold));c||(c=k);p.font=l+"px "+a;for(a=0;a<c.length;a++){e=c[a];var d=p.measureText(e[0]).width+p.measureText(e[1]).width,g=p.measureText(e).width;Math.abs(d-g)>l*m&&(f[e]=(g-d)/l*1E3)}return f}function n(a){for(var e=[],f=a[0];f<=a[1];f++)for(var l=String.fromCharCode(f),m=a[0];m<a[1];m++){var c=String.fromCharCode(m);e.push(l+c)}return e}D.exports=r;var p=(r.canvas=document.createElement("canvas")).getContext("2d"),
k=n([32,126]);r.createPairs=n;r.ascii=k},{}],173:[function(b,D,G){(function(r){var n=!1;if("undefined"!==typeof Float64Array){var p=new Float64Array(1),k=new Uint32Array(p.buffer);p[0]=1;n=!0;1072693248===k[1]?(D.exports=function(e){p[0]=e;return[k[0],k[1]]},D.exports.pack=function(e,f){k[0]=e;k[1]=f;return p[0]},D.exports.lo=function(e){p[0]=e;return k[0]},D.exports.hi=function(e){p[0]=e;return k[1]}):1072693248===k[0]?(D.exports=function(e){p[0]=e;return[k[1],k[0]]},D.exports.pack=function(e,f){k[1]=
e;k[0]=f;return p[0]},D.exports.lo=function(e){p[0]=e;return k[1]},D.exports.hi=function(e){p[0]=e;return k[0]}):n=!1}if(!n){var a=new r(8);D.exports=function(e){a.writeDoubleLE(e,0,!0);return[a.readUInt32LE(0,!0),a.readUInt32LE(4,!0)]};D.exports.pack=function(e,f){a.writeUInt32LE(e,0,!0);a.writeUInt32LE(f,4,!0);return a.readDoubleLE(0,!0)};D.exports.lo=function(e){a.writeDoubleLE(e,0,!0);return a.readUInt32LE(0,!0)};D.exports.hi=function(e){a.writeDoubleLE(e,0,!0);return a.readUInt32LE(4,!0)}}D.exports.sign=
function(e){return D.exports.hi(e)>>>31};D.exports.exponent=function(e){return(D.exports.hi(e)<<1>>>21)-1023};D.exports.fraction=function(e){var f=D.exports.lo(e);e=D.exports.hi(e);var l=e&1048575;e&2146435072&&(l+=1048576);return[f,l]};D.exports.denormalized=function(e){return!(D.exports.hi(e)&2146435072)}}).call(this,b("buffer").Buffer)},{buffer:111}],174:[function(b,D,G){var r=b("abs-svg-path"),n=b("normalize-svg-path"),p={M:"moveTo",C:"bezierCurveTo"};D.exports=function(k,a){k.beginPath();n(r(a)).forEach(function(e){var f=
e[0];e=e.slice(1);k[p[f]].apply(k,e)});k.closePath()}},{"abs-svg-path":65,"normalize-svg-path":471}],175:[function(b,D,G){D.exports=function(r){switch(r){case "int8":return Int8Array;case "int16":return Int16Array;case "int32":return Int32Array;case "uint8":return Uint8Array;case "uint16":return Uint16Array;case "uint32":return Uint32Array;case "float32":return Float32Array;case "float64":return Float64Array;case "array":return Array;case "uint8_clamped":return Uint8ClampedArray}}},{}],176:[function(b,
D,G){function r(n,p,k){var a=n[k]|0;if(0>=a)return[];var e=Array(a),f;if(k===n.length-1)for(f=0;f<a;++f)e[f]=p;else for(f=0;f<a;++f)e[f]=r(n,p,k+1);return e}D.exports=function(n,p){"undefined"===typeof p&&(p=0);switch(typeof n){case "number":if(0<n){n|=0;var k;var a=Array(n);for(k=0;k<n;++k)a[k]=p;return a}break;case "object":if("number"===typeof n.length)return r(n,p,0)}return[]}},{}],177:[function(b,D,G){function r(B,C,u){u=u||2;var F=C&&C.length,H=F?C[0]*u:B.length,J=n(B,0,H,u,!0),I=[];if(!J||
J.next===J.prev)return I;var M;if(F){var E=u;F=[];var L;var P=0;for(L=C.length;P<L;P++){var N=C[P]*E;var Q=P<L-1?C[P+1]*E:B.length;N=n(B,N,Q,E,!1);N===N.next&&(N.steiner=!0);Q=F;var O=Q.push,T=N,V=N;do{if(T.x<V.x||T.x===V.x&&T.y<V.y)V=T;T=T.next}while(T!==N);O.call(Q,V)}F.sort(e);for(P=0;P<F.length;P++){E=F[P];C=J;if(C=f(E,C))E=v(C,E),p(C,C.next),p(E,E.next);J=p(J,J.next)}}if(B.length>80*u){var Z=M=B[0];var aa=F=B[1];for(E=u;E<H;E+=u)P=B[E],C=B[E+1],P<Z&&(Z=P),C<aa&&(aa=C),P>M&&(M=P),C>F&&(F=C);M=
Math.max(M-Z,F-aa);M=0!==M?1/M:0}k(J,I,u,Z,aa,M);return I}function n(B,C,u,F,H){if(H===0<y(B,C,u,F))for(H=C;H<u;H+=F)var J=w(H,B[H],B[H+1],J);else for(H=u-F;H>=C;H-=F)J=w(H,B[H],B[H+1],J);J&&d(J,J.next)&&(A(J),J=J.next);return J}function p(B,C){if(!B)return B;C||(C=B);do{var u=!1;if(B.steiner||!d(B,B.next)&&0!==c(B.prev,B,B.next))B=B.next;else{A(B);B=C=B.prev;if(B===B.next)break;u=!0}}while(u||B!==C);return C}function k(B,C,u,F,H,J,I){if(B){if(!I&&J){var M=B,E=M;do null===E.z&&(E.z=l(E.x,E.y,F,H,
J)),E.prevZ=E.prev,E=E.nextZ=E.next;while(E!==M);E.prevZ.nextZ=null;E.prevZ=null;M=E;var L,P,N,Q,O=1;do{E=M;var T=M=null;for(P=0;E;){P++;var V=E;for(L=N=0;L<O&&(N++,V=V.nextZ,V);L++);for(Q=O;0<N||0<Q&&V;)0!==N&&(0===Q||!V||E.z<=V.z)?(L=E,E=E.nextZ,N--):(L=V,V=V.nextZ,Q--),T?T.nextZ=L:M=L,L.prevZ=T,T=L;E=V}T.nextZ=null;O*=2}while(1<P)}for(M=B;B.prev!==B.next;){E=B.prev;V=B.next;if(J)T=a(B,F,H,J);else a:if(T=B,P=T.prev,N=T,O=T.next,0<=c(P,N,O))T=!1;else{for(L=T.next.next;L!==T.prev;){if(m(P.x,P.y,N.x,
N.y,O.x,O.y,L.x,L.y)&&0<=c(L.prev,L,L.next)){T=!1;break a}L=L.next}T=!0}if(T)C.push(E.i/u),C.push(B.i/u),C.push(V.i/u),A(B),M=B=V.next;else if(B=V,B===M){if(!I)k(p(B),C,u,F,H,J,1);else if(1===I){B=p(B);I=C;M=u;E=B;do V=E.prev,T=E.next.next,!d(V,T)&&g(V,E,E.next,T)&&t(V,T)&&t(T,V)&&(I.push(V.i/M),I.push(E.i/M),I.push(T.i/M),A(E),A(E.next),E=B=T),E=E.next;while(E!==B);B=p(E);k(B,C,u,F,H,J,2)}else if(2===I)a:{I=B;do{for(M=I.next.next;M!==I.prev;){if(E=I.i!==M.i){E=I;V=M;if(T=E.next.i!==V.i&&E.prev.i!==
V.i){b:{T=E;do{if(T.i!==E.i&&T.next.i!==E.i&&T.i!==V.i&&T.next.i!==V.i&&g(T,T.next,E,V)){T=!0;break b}T=T.next}while(T!==E);T=!1}T=!T}if(T){if(T=t(E,V)&&t(V,E)){T=E;P=!1;N=(E.x+V.x)/2;O=(E.y+V.y)/2;do T.y>O!==T.next.y>O&&T.next.y!==T.y&&N<(T.next.x-T.x)*(O-T.y)/(T.next.y-T.y)+T.x&&(P=!P),T=T.next;while(T!==E);T=P}T=T&&(c(E.prev,E,V.prev)||c(E,V.prev,V))||d(E,V)&&0<c(E.prev,E,E.next)&&0<c(V.prev,V,V.next)}E=T}if(E){B=v(I,M);I=p(I,I.next);B=p(B,B.next);k(I,C,u,F,H,J);k(B,C,u,F,H,J);break a}M=M.next}I=
I.next}while(I!==B)}break}}}}function a(B,C,u,F){var H=B.prev,J=B.next;if(0<=c(H,B,J))return!1;var I=H.x>B.x?H.x>J.x?H.x:J.x:B.x>J.x?B.x:J.x,M=H.y>B.y?H.y>J.y?H.y:J.y:B.y>J.y?B.y:J.y,E=l(H.x<B.x?H.x<J.x?H.x:J.x:B.x<J.x?B.x:J.x,H.y<B.y?H.y<J.y?H.y:J.y:B.y<J.y?B.y:J.y,C,u,F);C=l(I,M,C,u,F);u=B.prevZ;for(F=B.nextZ;u&&u.z>=E&&F&&F.z<=C;){if(u!==B.prev&&u!==B.next&&m(H.x,H.y,B.x,B.y,J.x,J.y,u.x,u.y)&&0<=c(u.prev,u,u.next))return!1;u=u.prevZ;if(F!==B.prev&&F!==B.next&&m(H.x,H.y,B.x,B.y,J.x,J.y,F.x,F.y)&&
0<=c(F.prev,F,F.next))return!1;F=F.nextZ}for(;u&&u.z>=E;){if(u!==B.prev&&u!==B.next&&m(H.x,H.y,B.x,B.y,J.x,J.y,u.x,u.y)&&0<=c(u.prev,u,u.next))return!1;u=u.prevZ}for(;F&&F.z<=C;){if(F!==B.prev&&F!==B.next&&m(H.x,H.y,B.x,B.y,J.x,J.y,F.x,F.y)&&0<=c(F.prev,F,F.next))return!1;F=F.nextZ}return!0}function e(B,C){return B.x-C.x}function f(B,C){var u=C,F=B.x,H=B.y,J=-Infinity;do{if(H<=u.y&&H>=u.next.y&&u.next.y!==u.y){var I=u.x+(H-u.y)*(u.next.x-u.x)/(u.next.y-u.y);if(I<=F&&I>J){J=I;if(I===F){if(H===u.y)return u;
if(H===u.next.y)return u.next}var M=u.x<u.next.x?u:u.next}}u=u.next}while(u!==C);if(!M)return null;if(F===J)return M;C=M;I=M.x;var E=M.y,L=Infinity;u=M;do{if(F>=u.x&&u.x>=I&&F!==u.x&&m(H<E?F:J,H,I,E,H<E?J:F,H,u.x,u.y)){var P=Math.abs(H-u.y)/(F-u.x);var N;if((N=t(u,B))&&!(N=P<L)&&(N=P===L)&&!(N=u.x>M.x)&&(N=u.x===M.x)){N=M;var Q=u;N=0>c(N.prev,N,Q.prev)&&0>c(Q.next,N,N.next)}N&&(M=u,L=P)}u=u.next}while(u!==C);return M}function l(B,C,u,F,H){B=32767*(B-u)*H;C=32767*(C-F)*H;B=(B|B<<8)&16711935;B=(B|B<<
4)&252645135;B=(B|B<<2)&858993459;C=(C|C<<8)&16711935;C=(C|C<<4)&252645135;C=(C|C<<2)&858993459;return(B|B<<1)&1431655765|((C|C<<1)&1431655765)<<1}function m(B,C,u,F,H,J,I,M){return 0<=(H-I)*(C-M)-(B-I)*(J-M)&&0<=(B-I)*(F-M)-(u-I)*(C-M)&&0<=(u-I)*(J-M)-(H-I)*(F-M)}function c(B,C,u){return(C.y-B.y)*(u.x-C.x)-(C.x-B.x)*(u.y-C.y)}function d(B,C){return B.x===C.x&&B.y===C.y}function g(B,C,u,F){var H=q(c(B,C,u)),J=q(c(B,C,F)),I=q(c(u,F,B)),M=q(c(u,F,C));return H!==J&&I!==M||0===H&&h(B,u,C)||0===J&&h(B,
F,C)||0===I&&h(u,B,F)||0===M&&h(u,C,F)?!0:!1}function h(B,C,u){return C.x<=Math.max(B.x,u.x)&&C.x>=Math.min(B.x,u.x)&&C.y<=Math.max(B.y,u.y)&&C.y>=Math.min(B.y,u.y)}function q(B){return 0<B?1:0>B?-1:0}function t(B,C){return 0>c(B.prev,B,B.next)?0<=c(B,C,B.next)&&0<=c(B,B.prev,C):0>c(B,C,B.prev)||0>c(B,B.next,C)}function v(B,C){var u=new z(B.i,B.x,B.y),F=new z(C.i,C.x,C.y),H=B.next,J=C.prev;B.next=C;C.prev=B;u.next=H;H.prev=u;F.next=u;u.prev=F;J.next=F;F.prev=J;return F}function w(B,C,u,F){B=new z(B,
C,u);F?(B.next=F.next,B.prev=F,F.next.prev=B,F.next=B):(B.prev=B,B.next=B);return B}function A(B){B.next.prev=B.prev;B.prev.next=B.next;B.prevZ&&(B.prevZ.nextZ=B.nextZ);B.nextZ&&(B.nextZ.prevZ=B.prevZ)}function z(B,C,u){this.i=B;this.x=C;this.y=u;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function y(B,C,u,F){for(var H=0,J=u-F;C<u;C+=F)H+=(B[J]-B[C])*(B[C+1]+B[J+1]),J=C;return H}D.exports=r;D.exports.default=r;r.deviation=function(B,C,u,F){var H=C&&C.length,J=Math.abs(y(B,
0,H?C[0]*u:B.length,u));if(H){H=0;for(var I=C.length;H<I;H++)J-=Math.abs(y(B,C[H]*u,H<I-1?C[H+1]*u:B.length,u))}for(H=C=0;H<F.length;H+=3){I=F[H]*u;var M=F[H+1]*u,E=F[H+2]*u;C+=Math.abs((B[I]-B[E])*(B[M+1]-B[I+1])-(B[I]-B[M])*(B[E+1]-B[I+1]))}return 0===J&&0===C?0:Math.abs((C-J)/J)};r.flatten=function(B){for(var C=B[0][0].length,u={vertices:[],holes:[],dimensions:C},F=0,H=0;H<B.length;H++){for(var J=0;J<B[H].length;J++)for(var I=0;I<C;I++)u.vertices.push(B[H][J][I]);0<H&&(F+=B[H-1].length,u.holes.push(F))}return u}},
{}],178:[function(b,D,G){D.exports=function(n,p){var k=n.length;if("number"!==typeof p){for(var a=p=0;a<k;++a){var e=n[a];p=Math.max(p,e[0],e[1])}p=(p|0)+1}p|=0;var f=Array(p);for(a=0;a<p;++a)f[a]=[];for(a=0;a<k;++a)e=n[a],f[e[0]].push(e[1]),f[e[1]].push(e[0]);for(n=0;n<p;++n)r(f[n],function(l,m){return l-m});return f};var r=b("uniq")},{uniq:569}],179:[function(b,D,G){var r=b("strongly-connected-components");D.exports=function(n,p){function k(A){c[A]=!1;d.hasOwnProperty(A)&&Object.keys(d[A]).forEach(function(z){delete d[A][z];
c[z]&&k(z)})}function a(A){var z=!1;m.push(A);c[A]=!0;var y;for(y=0;y<g[A].length;y++){var B=g[A][y];B===h?(z=h,z=[].concat(m).concat(z),p?p(a):l.push(z),z=!0):c[B]||(z=a(B))}if(z)k(A);else for(y=0;y<g[A].length;y++){B=g[A][y];var C=d[B];C||(C={},d[B]=C);C[B]=!0}m.pop();return z}function e(A){for(var z=0;z<n.length;z++)z<A&&(n[z]=[]),n[z]=n[z].filter(function(y){return y>=A})}function f(A){e(A);var z=r(n).components.filter(function(F){return 1<F.length});A=Infinity;for(var y,B=0;B<z.length;B++)for(var C=
0;C<z[B].length;C++)z[B][C]<A&&(A=z[B][C],y=B);var u=z[y];if(!u)return!1;y=n.map(function(F,H){return-1===u.indexOf(H)?[]:F.filter(function(J){return-1!==u.indexOf(J)})});return{leastVertex:A,adjList:y}}var l=[],m=[],c=[],d={},g=[];var h=0;for(var q=n.length;h<q;){var t=f(h);h=t.leastVertex;if(g=t.adjList){for(t=0;t<g.length;t++)for(var v=0;v<g[t].length;v++){var w=g[t][v];c[+w]=!1;d[w]={}}a(h);h+=1}else h=q}if(!p)return l}},{"strongly-connected-components":541}],180:[function(b,D,G){var r=b("../../object/valid-value");
D.exports=function(){r(this).length=0;return this}},{"../../object/valid-value":211}],181:[function(b,D,G){D.exports=b("./is-implemented")()?Array.from:b("./shim")},{"./is-implemented":182,"./shim":183}],182:[function(b,D,G){D.exports=function(){var r=Array.from;if("function"!==typeof r)return!1;var n=["raz","dwa"];r=r(n);return!(!r||r===n||"dwa"!==r[1])}},{}],183:[function(b,D,G){var r=b("es6-symbol").iterator,n=b("../../function/is-arguments"),p=b("../../function/is-function"),k=b("../../number/to-pos-integer"),
a=b("../../object/valid-callable"),e=b("../../object/valid-value"),f=b("../../object/is-value"),l=b("../../string/is-string"),m=Array.isArray,c=Function.prototype.call,d={configurable:!0,enumerable:!0,writable:!0,value:null},g=Object.defineProperty;D.exports=function(h,q,t){var v,w;h=Object(e(h));f(q)&&a(q);if(this&&this!==Array&&p(this))var A=this;else{if(!q){if(n(h)){var z=h.length;if(1!==z)return Array.apply(null,h);var y=Array(1);y[0]=h[0];return y}if(m(h)){y=Array(z=h.length);for(v=0;v<z;++v)y[v]=
h[v];return y}}y=[]}if(!m(h))if(void 0!==(v=h[r])){z=a(v).call(h);A&&(y=new A);var B=z.next();for(v=0;!B.done;)B=q?c.call(q,t,B.value,v):B.value,A?(d.value=B,g(y,v,d)):y[v]=B,B=z.next(),++v;z=v}else if(l(h)){z=h.length;A&&(y=new A);for(w=v=0;v<z;++v){B=h[v];if(v+1<z){var C=B.charCodeAt(0);55296<=C&&56319>=C&&(B+=h[++v])}B=q?c.call(q,t,B,w):B;A?(d.value=B,g(y,w,d)):y[w]=B;++w}z=w}if(void 0===z)for(z=k(h.length),A&&(y=new A(z)),v=0;v<z;++v)B=q?c.call(q,t,h[v],v):h[v],A?(d.value=B,g(y,v,d)):y[v]=B;A&&
(d.value=null,y.length=z);return y}},{"../../function/is-arguments":184,"../../function/is-function":185,"../../number/to-pos-integer":191,"../../object/is-value":200,"../../object/valid-callable":209,"../../object/valid-value":211,"../../string/is-string":215,"es6-symbol":225}],184:[function(b,D,G){var r=Object.prototype.toString,n=r.call(function(){return arguments}());D.exports=function(p){return r.call(p)===n}},{}],185:[function(b,D,G){var r=Object.prototype.toString,n=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);
D.exports=function(p){return"function"===typeof p&&n(r.call(p))}},{}],186:[function(b,D,G){D.exports=function(){}},{}],187:[function(b,D,G){D.exports=b("./is-implemented")()?Math.sign:b("./shim")},{"./is-implemented":188,"./shim":189}],188:[function(b,D,G){D.exports=function(){var r=Math.sign;return"function"!==typeof r?!1:1===r(10)&&-1===r(-20)}},{}],189:[function(b,D,G){D.exports=function(r){r=Number(r);return isNaN(r)||0===r?r:0<r?1:-1}},{}],190:[function(b,D,G){var r=b("../math/sign"),n=Math.abs,
p=Math.floor;D.exports=function(k){if(isNaN(k))return 0;k=Number(k);return 0!==k&&isFinite(k)?r(k)*p(n(k)):k}},{"../math/sign":187}],191:[function(b,D,G){var r=b("./to-integer"),n=Math.max;D.exports=function(p){return n(0,r(p))}},{"./to-integer":190}],192:[function(b,D,G){var r=b("./valid-callable"),n=b("./valid-value"),p=Function.prototype.bind,k=Function.prototype.call,a=Object.keys,e=Object.prototype.propertyIsEnumerable;D.exports=function(f,l){return function(m,c,d,g){m=Object(n(m));r(c);var h=
a(m);g&&h.sort("function"===typeof g?p.call(g,m):void 0);"function"!==typeof f&&(f=h[f]);return k.call(f,h,function(q,t){return e.call(m,q)?k.call(c,d,m[q],q,m,t):l})}}},{"./valid-callable":209,"./valid-value":211}],193:[function(b,D,G){D.exports=b("./is-implemented")()?Object.assign:b("./shim")},{"./is-implemented":194,"./shim":195}],194:[function(b,D,G){D.exports=function(){var r=Object.assign;if("function"!==typeof r)return!1;var n={foo:"raz"};r(n,{bar:"dwa"},{trzy:"trzy"});return"razdwatrzy"===
n.foo+n.bar+n.trzy}},{}],195:[function(b,D,G){var r=b("../keys"),n=b("../valid-value"),p=Math.max;D.exports=function(k,a){var e,f,l=p(arguments.length,2);k=Object(n(k));var m=function(c){try{k[c]=a[c]}catch(d){e||(e=d)}};for(f=1;f<l;++f)a=arguments[f],r(a).forEach(m);if(void 0!==e)throw e;return k}},{"../keys":201,"../valid-value":211}],196:[function(b,D,G){var r=b("../array/from"),n=b("./assign"),p=b("./valid-value");D.exports=function(k,a,e){var f=Object(p(k)),l=Object(e);if(f!==k&&!a)return f;
var m={};a?r(a,function(c){if(l.ensure||c in k)m[c]=k[c]}):n(m,k);return m}},{"../array/from":181,"./assign":193,"./valid-value":211}],197:[function(b,D,G){var r=Object.create,n;b("./set-prototype-of/is-implemented")()||(n=b("./set-prototype-of/shim"));D.exports=function(){if(!n||1!==n.level)return r;var p={};var k={};var a={configurable:!1,enumerable:!1,writable:!0,value:void 0};Object.getOwnPropertyNames(Object.prototype).forEach(function(e){k[e]="__proto__"===e?{configurable:!0,enumerable:!1,writable:!0,
value:void 0}:a});Object.defineProperties(p,k);Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:p});return function(e,f){return r(null===e?p:e,f)}}()},{"./set-prototype-of/is-implemented":207,"./set-prototype-of/shim":208}],198:[function(b,D,G){D.exports=b("./_iterate")("forEach")},{"./_iterate":192}],199:[function(b,D,G){var r=b("./is-value"),n={function:!0,object:!0};D.exports=function(p){return r(p)&&n[typeof p]||!1}},{"./is-value":200}],200:[function(b,D,
G){var r=b("../function/noop")();D.exports=function(n){return n!==r&&null!==n}},{"../function/noop":186}],201:[function(b,D,G){D.exports=b("./is-implemented")()?Object.keys:b("./shim")},{"./is-implemented":202,"./shim":203}],202:[function(b,D,G){D.exports=function(){try{return Object.keys("primitive"),!0}catch(r){return!1}}},{}],203:[function(b,D,G){var r=b("../is-value"),n=Object.keys;D.exports=function(p){return n(r(p)?Object(p):p)}},{"../is-value":200}],204:[function(b,D,G){var r=b("./valid-callable"),
n=b("./for-each"),p=Function.prototype.call;D.exports=function(k,a,e){var f={};r(a);n(k,function(l,m,c,d){f[m]=p.call(a,e,l,m,c,d)});return f}},{"./for-each":198,"./valid-callable":209}],205:[function(b,D,G){var r=b("./is-value"),n=Array.prototype.forEach,p=Object.create;D.exports=function(k){var a=p(null);n.call(arguments,function(e){if(r(e)){e=Object(e);for(var f in e)a[f]=e[f]}});return a}},{"./is-value":200}],206:[function(b,D,G){D.exports=b("./is-implemented")()?Object.setPrototypeOf:b("./shim")},
{"./is-implemented":207,"./shim":208}],207:[function(b,D,G){var r=Object.create,n=Object.getPrototypeOf,p={};D.exports=function(k){var a=Object.setPrototypeOf;return"function"!==typeof a?!1:n(a((k||r)(null),p))===p}},{}],208:[function(b,D,G){var r=b("../is-object"),n=b("../valid-value"),p=Object.prototype.isPrototypeOf,k=Object.defineProperty,a={configurable:!0,enumerable:!1,writable:!0,value:void 0};var e=function(f,l){n(f);if(null===l||r(l))return f;throw new TypeError("Prototype must be null or an object");
};D.exports=function(f){if(!f)return null;if(2===f.level)if(f.set){var l=f.set;var m=function(c,d){l.call(e(c,d),d);return c}}else m=function(c,d){e(c,d).__proto__=d;return c};else m=function h(d,g){var q;e(d,g);(q=p.call(h.nullPolyfill,d))&&delete h.nullPolyfill.__proto__;null===g&&(g=h.nullPolyfill);d.__proto__=g;q&&k(h.nullPolyfill,"__proto__",a);return d};return Object.defineProperty(m,"level",{configurable:!1,enumerable:!1,writable:!1,value:f.level})}(function(){var f=Object.create(null),l={},
m=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(m){try{var c=m.set;c.call(f,l)}catch(d){}if(Object.getPrototypeOf(f)===l)return{set:c,level:2}}f.__proto__=l;if(Object.getPrototypeOf(f)===l)return{level:2};f={};f.__proto__=l;return Object.getPrototypeOf(f)===l?{level:1}:!1}());b("../create")},{"../create":197,"../is-object":199,"../valid-value":211}],209:[function(b,D,G){D.exports=function(r){if("function"!==typeof r)throw new TypeError(r+" is not a function");return r}},{}],210:[function(b,
D,G){var r=b("./is-object");D.exports=function(n){if(!r(n))throw new TypeError(n+" is not an Object");return n}},{"./is-object":199}],211:[function(b,D,G){var r=b("./is-value");D.exports=function(n){if(!r(n))throw new TypeError("Cannot use null or undefined");return n}},{"./is-value":200}],212:[function(b,D,G){D.exports=b("./is-implemented")()?String.prototype.contains:b("./shim")},{"./is-implemented":213,"./shim":214}],213:[function(b,D,G){D.exports=function(){return"function"!==typeof"razdwatrzy".contains?
!1:!0==="razdwatrzy".contains("dwa")&&!1==="razdwatrzy".contains("foo")}},{}],214:[function(b,D,G){var r=String.prototype.indexOf;D.exports=function(n,p){return-1<r.call(this,n,p)}},{}],215:[function(b,D,G){var r=Object.prototype.toString,n=r.call("");D.exports=function(p){return"string"===typeof p||p&&"object"===typeof p&&(p instanceof String||r.call(p)===n)||!1}},{}],216:[function(b,D,G){var r=Object.create(null),n=Math.random;D.exports=function(){do var p=n().toString(36).slice(2);while(r[p]);
return p}},{}],217:[function(b,D,G){G=b("es5-ext/object/set-prototype-of");var r=b("es5-ext/string/#/contains"),n=b("d"),p=b("es6-symbol"),k=b("./"),a=Object.defineProperty;var e=D.exports=function(f,l){if(!(this instanceof e))throw new TypeError("Constructor requires 'new'");k.call(this,f);l=l?r.call(l,"key+value")?"key+value":r.call(l,"key")?"key":"value":"value";a(this,"__kind__",n("",l))};G&&G(e,k);delete e.prototype.constructor;e.prototype=Object.create(k.prototype,{_resolve:n(function(f){return"value"===
this.__kind__?this.__list__[f]:"key+value"===this.__kind__?[f,this.__list__[f]]:f})});a(e.prototype,p.toStringTag,n("c","Array Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,"es5-ext/string/#/contains":212,"es6-symbol":225}],218:[function(b,D,G){var r=b("es5-ext/function/is-arguments"),n=b("es5-ext/object/valid-callable"),p=b("es5-ext/string/is-string"),k=b("./get"),a=Array.isArray,e=Function.prototype.call,f=Array.prototype.some;D.exports=function(l,m,c){var d,g;a(l)||r(l)?d=
"array":p(l)?d="string":l=k(l);n(m);var h=function(){g=!0};if("array"===d)f.call(l,function(w){e.call(m,c,w,h);return g});else if("string"===d){var q=l.length;for(d=0;d<q;++d){var t=l[d];if(d+1<q){var v=t.charCodeAt(0);55296<=v&&56319>=v&&(t+=l[++d])}e.call(m,c,t,h);if(g)break}}else for(d=l.next();!d.done;){e.call(m,c,d.value,h);if(g)break;d=l.next()}}},{"./get":219,"es5-ext/function/is-arguments":184,"es5-ext/object/valid-callable":209,"es5-ext/string/is-string":215}],219:[function(b,D,G){var r=
b("es5-ext/function/is-arguments"),n=b("es5-ext/string/is-string"),p=b("./array"),k=b("./string"),a=b("./valid-iterable"),e=b("es6-symbol").iterator;D.exports=function(f){return"function"===typeof a(f)[e]?f[e]():r(f)?new p(f):n(f)?new k(f):new p(f)}},{"./array":217,"./string":222,"./valid-iterable":223,"es5-ext/function/is-arguments":184,"es5-ext/string/is-string":215,"es6-symbol":225}],220:[function(b,D,G){var r=b("es5-ext/array/#/clear");G=b("es5-ext/object/assign");var n=b("es5-ext/object/valid-callable"),
p=b("es5-ext/object/valid-value"),k=b("d"),a=b("d/auto-bind"),e=b("es6-symbol"),f=Object.defineProperty,l=Object.defineProperties,m;D.exports=m=function(c,d){if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");l(this,{__list__:k("w",p(c)),__context__:k("w",d),__nextIndex__:k("w",0)});d&&(n(d.on),d.on("_add",this._onAdd),d.on("_delete",this._onDelete),d.on("_clear",this._onClear))};delete m.prototype.constructor;l(m.prototype,G({_next:k(function(){if(this.__list__){if(this.__redo__){var c=
this.__redo__.shift();if(void 0!==c)return c}if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:k(function(){return this._createResult(this._next())}),_createResult:k(function(c){return void 0===c?{done:!0,value:void 0}:{done:!1,value:this._resolve(c)}}),_resolve:k(function(c){return this.__list__[c]}),_unBind:k(function(){this.__list__=null;delete this.__redo__;this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),
this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:k(function(){return"[object "+(this[e.toStringTag]||"Object")+"]"})},a({_onAdd:k(function(c){c>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(d,g){d>=c&&(this.__redo__[g]=++d)},this),this.__redo__.push(c)):f(this,"__redo__",k("c",[c])))}),_onDelete:k(function(c){if(!(c>=this.__nextIndex__)&&(--this.__nextIndex__,this.__redo__)){var d=this.__redo__.indexOf(c);-1!==d&&this.__redo__.splice(d,
1);this.__redo__.forEach(function(g,h){g>c&&(this.__redo__[h]=--g)},this)}}),_onClear:k(function(){this.__redo__&&r.call(this.__redo__);this.__nextIndex__=0})})));f(m.prototype,e.iterator,k(function(){return this}))},{d:155,"d/auto-bind":154,"es5-ext/array/#/clear":180,"es5-ext/object/assign":193,"es5-ext/object/valid-callable":209,"es5-ext/object/valid-value":211,"es6-symbol":225}],221:[function(b,D,G){var r=b("es5-ext/function/is-arguments"),n=b("es5-ext/object/is-value"),p=b("es5-ext/string/is-string"),
k=b("es6-symbol").iterator,a=Array.isArray;D.exports=function(e){return n(e)?a(e)||p(e)||r(e)?!0:"function"===typeof e[k]:!1}},{"es5-ext/function/is-arguments":184,"es5-ext/object/is-value":200,"es5-ext/string/is-string":215,"es6-symbol":225}],222:[function(b,D,G){G=b("es5-ext/object/set-prototype-of");var r=b("d"),n=b("es6-symbol"),p=b("./"),k=Object.defineProperty;var a=D.exports=function(e){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");e=String(e);p.call(this,e);k(this,
"__length__",r("",e.length))};G&&G(a,p);delete a.prototype.constructor;a.prototype=Object.create(p.prototype,{_next:r(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:r(function(e){e=this.__list__[e];if(this.__nextIndex__===this.__length__)return e;var f=e.charCodeAt(0);return 55296<=f&&56319>=f?e+this.__list__[this.__nextIndex__++]:e})});k(a.prototype,n.toStringTag,r("c","String Iterator"))},{"./":220,d:155,"es5-ext/object/set-prototype-of":206,
"es6-symbol":225}],223:[function(b,D,G){var r=b("./is-iterable");D.exports=function(n){if(!r(n))throw new TypeError(n+" is not iterable");return n}},{"./is-iterable":221}],224:[function(b,D,G){(function(r,n){(function(p,k){"object"===typeof G&&"undefined"!==typeof D?D.exports=k():p.ES6Promise=k()})(this,function(){function p(pa){return"function"===typeof pa}function k(){return function(){return r.nextTick(m)}}function a(){return"undefined"!==typeof L?function(){L(m)}:l()}function e(){var pa=0,oa=
new O(m),ja=document.createTextNode("");oa.observe(ja,{characterData:!0});return function(){ja.data=pa=++pa%2}}function f(){var pa=new MessageChannel;pa.port1.onmessage=m;return function(){return pa.port2.postMessage(0)}}function l(){var pa=setTimeout;return function(){return pa(m,1)}}function m(){for(var pa=0;pa<E;pa+=2)(0,V[pa])(V[pa+1]),V[pa]=void 0,V[pa+1]=void 0;E=0}function c(){try{var pa=Function("return this")().require("vertx");L=pa.runOnLoop||pa.runOnContext;return a()}catch(oa){return l()}}
function d(pa,oa){var ja=this,ra=new this.constructor(h);void 0===ra[aa]&&J(ra);var ha=ja._state;if(ha){var la=arguments[ha-1];N(function(){return F(ha,ra,la,ja._result)})}else C(ja,ra,pa,oa);return ra}function g(pa){if(pa&&"object"===typeof pa&&pa.constructor===this)return pa;var oa=new this(h);A(oa,pa);return oa}function h(){}function q(pa,oa,ja,ra){try{pa.call(oa,ja,ra)}catch(ha){return ha}}function t(pa,oa,ja){N(function(ra){var ha=!1,la=q(ja,oa,function(ua){ha||(ha=!0,oa!==ua?A(ra,ua):y(ra,ua))},
function(ua){ha||(ha=!0,B(ra,ua))},"Settle: "+(ra._label||" unknown promise"));!ha&&la&&(ha=!0,B(ra,la))},pa)}function v(pa,oa){oa._state===ea?y(pa,oa._result):oa._state===ca?B(pa,oa._result):C(oa,void 0,function(ja){return A(pa,ja)},function(ja){return B(pa,ja)})}function w(pa,oa,ja){oa.constructor===pa.constructor&&ja===d&&oa.constructor.resolve===g?v(pa,oa):void 0===ja?y(pa,oa):p(ja)?t(pa,oa,ja):y(pa,oa)}function A(pa,oa){if(pa===oa)B(pa,new TypeError("You cannot resolve a promise with itself"));
else{var ja=typeof oa;if(null===oa||"object"!==ja&&"function"!==ja)y(pa,oa);else{ja=void 0;try{ja=oa.then}catch(ra){B(pa,ra);return}w(pa,oa,ja)}}}function z(pa){pa._onerror&&pa._onerror(pa._result);u(pa)}function y(pa,oa){pa._state===Y&&(pa._result=oa,pa._state=ea,0!==pa._subscribers.length&&N(u,pa))}function B(pa,oa){pa._state===Y&&(pa._state=ca,pa._result=oa,N(z,pa))}function C(pa,oa,ja,ra){var ha=pa._subscribers,la=ha.length;pa._onerror=null;ha[la]=oa;ha[la+ea]=ja;ha[la+ca]=ra;0===la&&pa._state&&
N(u,pa)}function u(pa){var oa=pa._subscribers,ja=pa._state;if(0!==oa.length){for(var ra,ha,la=pa._result,ua=0;ua<oa.length;ua+=3)ra=oa[ua],ha=oa[ua+ja],ra?F(ja,ra,ha,la):ha(la);pa._subscribers.length=0}}function F(pa,oa,ja,ra){var ha=p(ja),la=void 0,ua=void 0,na=!0;if(ha){try{la=ja(ra)}catch(wa){na=!1,ua=wa}if(oa===la){B(oa,new TypeError("A promises callback cannot return that same promise."));return}}else la=ra;oa._state===Y&&(ha&&na?A(oa,la):!1===na?B(oa,ua):pa===ea?y(oa,la):pa===ca&&B(oa,la))}
function H(pa,oa){try{oa(function(ja){A(pa,ja)},function(ja){B(pa,ja)})}catch(ja){B(pa,ja)}}function J(pa){pa[aa]=ba++;pa._state=void 0;pa._result=void 0;pa._subscribers=[]}var I=void 0,M=I=Array.isArray?Array.isArray:function(pa){return"[object Array]"===Object.prototype.toString.call(pa)},E=0,L=void 0,P=void 0,N=function(pa,oa){V[E]=pa;V[E+1]=oa;E+=2;2===E&&(P?P(m):Z())},Q=(I="undefined"!==typeof window?window:void 0)||{},O=Q.MutationObserver||Q.WebKitMutationObserver;Q="undefined"===typeof self&&
"undefined"!==typeof r&&"[object process]"==={}.toString.call(r);var T="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,V=Array(1E3),Z=void 0;Z=Q?k():O?e():T?f():void 0===I&&"function"===typeof b?c():l();var aa=Math.random().toString(36).substring(2),Y=void 0,ea=1,ca=2,ba=0,ka=function(){function pa(oa,ja){this._instanceConstructor=oa;this.promise=new oa(h);this.promise[aa]||J(this.promise);M(ja)?(this._remaining=this.length=ja.length,
this._result=Array(this.length),0===this.length?y(this.promise,this._result):(this.length=this.length||0,this._enumerate(ja),0===this._remaining&&y(this.promise,this._result))):B(this.promise,Error("Array Methods must be provided an Array"))}pa.prototype._enumerate=function(oa){for(var ja=0;this._state===Y&&ja<oa.length;ja++)this._eachEntry(oa[ja],ja)};pa.prototype._eachEntry=function(oa,ja){var ra=this._instanceConstructor,ha=ra.resolve;if(ha===g){var la=ha=void 0,ua=!1;try{ha=oa.then}catch(na){ua=
!0,la=na}ha===d&&oa._state!==Y?this._settledAt(oa._state,ja,oa._result):"function"!==typeof ha?(this._remaining--,this._result[ja]=oa):ra===qa?(ra=new ra(h),ua?B(ra,la):w(ra,oa,ha),this._willSettleAt(ra,ja)):this._willSettleAt(new ra(function(na){return na(oa)}),ja)}else this._willSettleAt(ha(oa),ja)};pa.prototype._settledAt=function(oa,ja,ra){var ha=this.promise;ha._state===Y&&(this._remaining--,oa===ca?B(ha,ra):this._result[ja]=ra);0===this._remaining&&y(ha,this._result)};pa.prototype._willSettleAt=
function(oa,ja){var ra=this;C(oa,void 0,function(ha){return ra._settledAt(ea,ja,ha)},function(ha){return ra._settledAt(ca,ja,ha)})};return pa}(),qa=function(){function pa(oa){this[aa]=ba++;this._result=this._state=void 0;this._subscribers=[];if(h!==oa){if("function"!==typeof oa)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof pa)H(this,oa);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}pa.prototype.catch=function(oa){return this.then(null,oa)};pa.prototype.finally=function(oa){var ja=this.constructor;return p(oa)?this.then(function(ra){return ja.resolve(oa()).then(function(){return ra})},function(ra){return ja.resolve(oa()).then(function(){throw ra;})}):this.then(oa,oa)};return pa}();qa.prototype.then=d;qa.all=function(pa){return(new ka(this,pa)).promise};qa.race=function(pa){var oa=this;return M(pa)?new oa(function(ja,ra){for(var ha=pa.length,la=0;la<ha;la++)oa.resolve(pa[la]).then(ja,
ra)}):new oa(function(ja,ra){return ra(new TypeError("You must pass an array to race."))})};qa.resolve=g;qa.reject=function(pa){var oa=new this(h);B(oa,pa);return oa};qa._setScheduler=function(pa){P=pa};qa._setAsap=function(pa){N=pa};qa._asap=N;qa.polyfill=function(){var pa=void 0;if("undefined"!==typeof n)pa=n;else if("undefined"!==typeof self)pa=self;else try{pa=Function("return this")()}catch(ra){throw Error("polyfill failed because global object is unavailable in this environment");}var oa=pa.Promise;
if(oa){var ja=null;try{ja=Object.prototype.toString.call(oa.resolve())}catch(ra){}if("[object Promise]"===ja&&!oa.cast)return}pa.Promise=qa};return qa.Promise=qa})}).call(this,b("_process"),"undefined"!==typeof lb?lb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{_process:500}],225:[function(b,D,G){D.exports=b("./is-implemented")()?b("ext/global-this").Symbol:b("./polyfill")},{"./is-implemented":226,"./polyfill":231,"ext/global-this":238}],226:[function(b,D,G){var r=b("ext/global-this"),
n={object:!0,symbol:!0};D.exports=function(){var p=r.Symbol;if("function"!==typeof p)return!1;var k=p("test symbol");try{String(k)}catch(a){return!1}return n[typeof p.iterator]&&n[typeof p.toPrimitive]&&n[typeof p.toStringTag]?!0:!1}},{"ext/global-this":238}],227:[function(b,D,G){D.exports=function(r){return r?"symbol"===typeof r?!0:r.constructor&&"Symbol"===r.constructor.name?"Symbol"===r[r.constructor.toStringTag]:!1:!1}},{}],228:[function(b,D,G){var r=b("d");b=Object.create;var n=Object.defineProperty,
p=Object.prototype,k=b(null);D.exports=function(a){for(var e=0,f,l;k[a+(e||"")];)++e;a+=e||"";k[a]=!0;f="@@"+a;n(p,f,r.gs(null,function(m){l||(l=!0,n(this,f,r(m)),l=!1)}));return f}},{d:155}],229:[function(b,D,G){var r=b("d"),n=b("ext/global-this").Symbol;D.exports=function(p){return Object.defineProperties(p,{hasInstance:r("",n&&n.hasInstance||p("hasInstance")),isConcatSpreadable:r("",n&&n.isConcatSpreadable||p("isConcatSpreadable")),iterator:r("",n&&n.iterator||p("iterator")),match:r("",n&&n.match||
p("match")),replace:r("",n&&n.replace||p("replace")),search:r("",n&&n.search||p("search")),species:r("",n&&n.species||p("species")),split:r("",n&&n.split||p("split")),toPrimitive:r("",n&&n.toPrimitive||p("toPrimitive")),toStringTag:r("",n&&n.toStringTag||p("toStringTag")),unscopables:r("",n&&n.unscopables||p("unscopables"))})}},{d:155,"ext/global-this":238}],230:[function(b,D,G){var r=b("d"),n=b("../../../validate-symbol"),p=Object.create(null);D.exports=function(k){return Object.defineProperties(k,
{for:r(function(a){return p[a]?p[a]:p[a]=k(String(a))}),keyFor:r(function(a){var e;n(a);for(e in p)if(p[e]===a)return e})})}},{"../../../validate-symbol":232,d:155}],231:[function(b,D,G){var r=b("d"),n=b("./validate-symbol"),p=b("ext/global-this").Symbol,k=b("./lib/private/generate-name");G=b("./lib/private/setup/standard-symbols");b=b("./lib/private/setup/symbol-registry");var a=Object.create,e=Object.defineProperties,f=Object.defineProperty,l;if("function"===typeof p)try{String(p());var m=!0}catch(d){}else p=
null;var c=function(d){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return l(d)};D.exports=l=function h(g){if(this instanceof h)throw new TypeError("Symbol is not a constructor");if(m)return p(g);var q=a(c.prototype);g=void 0===g?"":String(g);return e(q,{__description__:r("",g),__name__:r("",k(g))})};G(l);b(l);e(c.prototype,{constructor:r(l),toString:r("",function(){return this.__name__})});e(l.prototype,{toString:r(function(){return"Symbol ("+n(this).__description__+")"}),
valueOf:r(function(){return n(this)})});f(l.prototype,l.toPrimitive,r("",function(){var g=n(this);return"symbol"===typeof g?g:g.toString()}));f(l.prototype,l.toStringTag,r("c","Symbol"));f(c.prototype,l.toStringTag,r("c",l.prototype[l.toStringTag]));f(c.prototype,l.toPrimitive,r("c",l.prototype[l.toPrimitive]))},{"./lib/private/generate-name":228,"./lib/private/setup/standard-symbols":229,"./lib/private/setup/symbol-registry":230,"./validate-symbol":232,d:155,"ext/global-this":238}],232:[function(b,
D,G){var r=b("./is-symbol");D.exports=function(n){if(!r(n))throw new TypeError(n+" is not a symbol");return n}},{"./is-symbol":227}],233:[function(b,D,G){D.exports=b("./is-implemented")()?WeakMap:b("./polyfill")},{"./is-implemented":234,"./polyfill":236}],234:[function(b,D,G){D.exports=function(){var r;if("function"!==typeof WeakMap)return!1;try{var n=new WeakMap([[r={},"one"],[{},"two"],[{},"three"]])}catch(p){return!1}return"[object WeakMap]"!==String(n)||"function"!==typeof n.set||n.set({},1)!==
n||"function"!==typeof n.delete||"function"!==typeof n.has||"one"!==n.get(r)?!1:!0}},{}],235:[function(b,D,G){b="function"!==typeof WeakMap?!1:"[object WeakMap]"===Object.prototype.toString.call(new WeakMap);D.exports=b},{}],236:[function(b,D,G){var r=b("es5-ext/object/is-value"),n=b("es5-ext/object/set-prototype-of"),p=b("es5-ext/object/valid-object"),k=b("es5-ext/object/valid-value"),a=b("es5-ext/string/random-uniq"),e=b("d"),f=b("es6-iterator/get"),l=b("es6-iterator/for-of");G=b("es6-symbol").toStringTag;
var m=b("./is-native-implemented"),c=Array.isArray,d=Object.defineProperty,g=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf,q;D.exports=q=function(t){if(!(this instanceof q))throw new TypeError("Constructor requires 'new'");var v=m&&n&&WeakMap!==q?n(new WeakMap,h(this)):this;r(t)&&(c(t)||(t=f(t)));d(v,"__weakMapData__",e("c","$weakMap$"+a()));if(!t)return v;l(t,function(w){k(w);v.set(w[0],w[1])});return v};m&&(n&&n(q,WeakMap),q.prototype=Object.create(WeakMap.prototype,{constructor:e(q)}));
Object.defineProperties(q.prototype,{delete:e(function(t){return g.call(p(t),this.__weakMapData__)?(delete t[this.__weakMapData__],!0):!1}),get:e(function(t){if(g.call(p(t),this.__weakMapData__))return t[this.__weakMapData__]}),has:e(function(t){return g.call(p(t),this.__weakMapData__)}),set:e(function(t,v){d(p(t),this.__weakMapData__,e("c",v));return this}),toString:e(function(){return"[object WeakMap]"})});d(q.prototype,G,e("c","WeakMap"))},{"./is-native-implemented":235,d:155,"es5-ext/object/is-value":200,
"es5-ext/object/set-prototype-of":206,"es5-ext/object/valid-object":210,"es5-ext/object/valid-value":211,"es5-ext/string/random-uniq":216,"es6-iterator/for-of":218,"es6-iterator/get":219,"es6-symbol":225}],237:[function(b,D,G){var r=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw Error("Unable to resolve global `this`");};D.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},
configurable:!0})}catch(n){return r()}try{return __global__?__global__:r()}finally{delete Object.prototype.__global__}}()},{}],238:[function(b,D,G){D.exports=b("./is-implemented")()?globalThis:b("./implementation")},{"./implementation":237,"./is-implemented":239}],239:[function(b,D,G){D.exports=function(){return"object"===typeof globalThis&&globalThis?globalThis.Array===Array:!1}},{}],240:[function(b,D,G){D.exports=function(r,n,p){n=n||0;p=p||1;return[[r[12]+r[0],r[13]+r[1],r[14]+r[2],r[15]+r[3]],
[r[12]-r[0],r[13]-r[1],r[14]-r[2],r[15]-r[3]],[r[12]+r[4],r[13]+r[5],r[14]+r[6],r[15]+r[7]],[r[12]-r[4],r[13]-r[5],r[14]-r[6],r[15]-r[7]],[n*r[12]+r[8],n*r[13]+r[9],n*r[14]+r[10],n*r[15]+r[11]],[p*r[12]-r[8],p*r[13]-r[9],p*r[14]-r[10],p*r[15]-r[11]]]}},{}],241:[function(b,D,G){var r=b("is-string-blank");D.exports=function(n){var p=typeof n;if("string"===p){if(p=n,n=+n,0===n&&r(p))return!1}else if("number"!==p)return!1;return 1>n-n}},{"is-string-blank":444}],242:[function(b,D,G){function r(e,f,l){return Math.min(f,
Math.max(e,l))}function n(e,f,l){this.dimension=e.length;this.bounds=[Array(this.dimension),Array(this.dimension)];for(var m=0;m<this.dimension;++m)this.bounds[0][m]=-Infinity,this.bounds[1][m]=Infinity;this._state=e.slice().reverse();this._velocity=f.slice().reverse();this._time=[l];this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}function p(e){for(var f=Array(e),l=0;l<e;++l)f[l]=0;return f}D.exports=function(e,f,l){switch(arguments.length){case 0:return new n([0],[0],0);case 1:if("number"===
typeof e){var m=p(e);return new n(m,m,0)}return new n(e,p(e.length),0);case 2:if("number"===typeof f)return m=p(e.length),new n(e,m,+f);l=0;case 3:if(e.length!==f.length)throw Error("state and velocity lengths must match");return new n(e,f,l)}};var k=b("cubic-hermite"),a=b("binary-search-bounds");b=n.prototype;b.flush=function(e){e=a.gt(this._time,e)-1;0>=e||(this._time.splice(0,e),this._state.splice(0,e*this.dimension),this._velocity.splice(0,e*this.dimension))};b.curve=function(e){var f=this._time,
l=f.length,m=a.le(f,e),c=this._scratch[0],d=this._state,g=this._velocity,h=this.dimension,q=this.bounds;if(0>m){var t=h-1;for(f=0;f<h;++f,--t)c[f]=d[t]}else if(m>=l-1)for(t=d.length-1,e-=f[l-1],f=0;f<h;++f,--t)c[f]=d[t]+e*g[t];else{t=h*(m+1)-1;l=f[m];m=f[m+1]-l||1;var v=this._scratch[1],w=this._scratch[2],A=this._scratch[3],z=this._scratch[4],y=!0;for(f=0;f<h;++f,--t)v[f]=d[t],A[f]=g[t]*m,w[f]=d[t+h],z[f]=g[t+h]*m,y=y&&v[f]===w[f]&&A[f]===z[f]&&0===A[f];if(y)for(f=0;f<h;++f)c[f]=v[f];else k(v,A,w,
z,(e-l)/m,c)}d=q[0];q=q[1];for(f=0;f<h;++f)c[f]=r(d[f],q[f],c[f]);return c};b.dcurve=function(e){var f=this._time,l=f.length,m=a.le(f,e),c=this._scratch[0],d=this._state,g=this._velocity,h=this.dimension;if(m>=l-1)for(l=d.length-1,f=0;f<h;++f,--l)c[f]=g[l];else{l=h*(m+1)-1;var q=f[m];m=f[m+1]-q||1;var t=this._scratch[1],v=this._scratch[2],w=this._scratch[3],A=this._scratch[4],z=!0;for(f=0;f<h;++f,--l)t[f]=d[l],w[f]=g[l]*m,v[f]=d[l+h],A[f]=g[l+h]*m,z=z&&t[f]===v[f]&&w[f]===A[f]&&0===w[f];if(z)for(f=
0;f<h;++f)c[f]=0;else for(k.derivative(t,w,v,A,(e-q)/m,c),f=0;f<h;++f)c[f]/=m}return c};b.lastT=function(){var e=this._time;return e[e.length-1]};b.stable=function(){for(var e=this._velocity,f=e.length,l=this.dimension-1;0<=l;--l)if(e[--f])return!1;return!0};b.jump=function(e){var f=this.lastT(),l=this.dimension;if(!(e<f||arguments.length!==l+1)){var m=this._state,c=this._velocity,d=m.length-this.dimension,g=this.bounds,h=g[0];g=g[1];this._time.push(f,e);for(f=0;2>f;++f)for(var q=0;q<l;++q)m.push(m[d++]),
c.push(0);this._time.push(e);for(q=l;0<q;--q)m.push(r(h[q-1],g[q-1],arguments[q])),c.push(0)}};b.push=function(e){var f=this.lastT(),l=this.dimension;if(!(e<f||arguments.length!==l+1)){var m=this._state,c=this._velocity,d=m.length-this.dimension,g=e-f,h=this.bounds;f=h[0];h=h[1];g=1E-6<g?1/g:0;for(this._time.push(e);0<l;--l){var q=r(f[l-1],h[l-1],arguments[l]);m.push(q);c.push((q-m[d++])*g)}}};b.set=function(e){var f=this.dimension;if(!(e<this.lastT()||arguments.length!==f+1)){var l=this._state,m=
this._velocity,c=this.bounds,d=c[0];c=c[1];for(this._time.push(e);0<f;--f)l.push(r(d[f-1],c[f-1],arguments[f])),m.push(0)}};b.move=function(e){var f=this.lastT(),l=this.dimension;if(!(e<=f||arguments.length!==l+1)){var m=this._state,c=this._velocity,d=m.length-this.dimension,g=this.bounds,h=g[0];g=g[1];f=e-f;f=1E-6<f?1/f:0;for(this._time.push(e);0<l;--l){var q=arguments[l];m.push(r(h[l-1],g[l-1],m[d++]+q));c.push(q*f)}}};b.idle=function(e){var f=this.lastT();if(!(e<f)){var l=this.dimension,m=this._state,
c=this._velocity,d=m.length-l,g=this.bounds,h=g[0];g=g[1];f=e-f;this._time.push(e);for(e=l-1;0<=e;--e)m.push(r(h[e],g[e],m[d]+f*c[d])),c.push(0),d+=1}}},{"binary-search-bounds":243,"cubic-hermite":150}],243:[function(b,D,G){function r(p,k,a,e,f,l){p=["function ",p,"(a,l,h,",e.join(","),"){",l?"":"var i\x3d",a?"l-1":"h+1",";while(l\x3c\x3dh){var m\x3d(l+h)\x3e\x3e\x3e1,x\x3da",f?".get(m)":"[m]"];l?0>k.indexOf("c")?p.push(";if(x\x3d\x3d\x3dy){return m}else if(x\x3c\x3dy){"):p.push(";var p\x3dc(x,y);if(p\x3d\x3d\x3d0){return m}else if(p\x3c\x3d0){"):
p.push(";if(",k,"){i\x3dm;");a?p.push("l\x3dm+1}else{h\x3dm-1}"):p.push("h\x3dm-1}else{l\x3dm+1}");p.push("}");l?p.push("return -1};"):p.push("return i};");return p.join("")}function n(p,k,a,e){return(new Function([r("A","x"+p+"y",k,["y"],!1,e),r("B","x"+p+"y",k,["y"],!0,e),r("P","c(x,y)"+p+"0",k,["y","c"],!1,e),r("Q","c(x,y)"+p+"0",k,["y","c"],!0,e),"function dispatchBsearch",a,"(a,y,c,l,h){if(a.shape){if(typeof(c)\x3d\x3d\x3d'function'){return Q(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)\x3d\x3d\x3d'function'){return P(a,(l\x3d\x3d\x3dundefined)?0:l|0,(h\x3d\x3d\x3dundefined)?a.length-1:h|0,y,c)}else{return A(a,(c\x3d\x3d\x3dundefined)?0:c|0,(l\x3d\x3d\x3dundefined)?a.length-1:l|0,y)}}}return dispatchBsearch",
a].join("")))()}D.exports={ge:n("\x3e\x3d",!1,"GE"),gt:n("\x3e",!1,"GT"),lt:n("\x3c",!0,"LT"),le:n("\x3c\x3d",!0,"LE"),eq:n("-",!0,"EQ",!0)}},{}],244:[function(b,D,G){var r=b("dtype");D.exports=function(n,p,k){if(!n)throw new TypeError("must specify data as first parameter");k=+(k||0)|0;if(Array.isArray(n)&&n[0]&&"number"===typeof n[0][0]){var a=n[0].length,e=n.length*a;p&&"string"!==typeof p||(p=new (r(p||"float32"))(e+k));var f=p.length-k;if(e!==f)throw Error("source length "+e+" ("+a+"x"+n.length+
") does not match destination length "+f);for(e=0;e<n.length;e++)for(f=0;f<a;f++)p[k++]=null===n[e][f]?NaN:n[e][f]}else if(p&&"string"!==typeof p)p.set(n,k);else if(a=r(p||"float32"),Array.isArray(n)||"array"===p)for(p=new a(n.length+k),e=0,a=p.length;k<a;k++,e++)p[k]=null===n[e]?NaN:n[e];else 0===k?p=new a(n):(p=new a(n.length+k),p.set(n,k));return p}},{dtype:175}],245:[function(b,D,G){var r=b("css-font/stringify"),n=[32,126];D.exports=function(p){p=p||{};var k=p.shape?p.shape:p.canvas?[p.canvas.width,
p.canvas.height]:[512,512],a=p.canvas||document.createElement("canvas"),e=p.font,f="number"===typeof p.step?[p.step,p.step]:p.step||[32,32];p=p.chars||n;e&&"string"!==typeof e&&(e=r(e));if(!Array.isArray(p))p=String(p).split("");else if(2===p.length&&"number"===typeof p[0]&&"number"===typeof p[1]){for(var l=[],m=p[0],c=0;m<=p[1];m++)l[c++]=String.fromCharCode(m);p=l}k=k.slice();a.width=k[0];a.height=k[1];l=a.getContext("2d");l.fillStyle="#000";l.fillRect(0,0,a.width,a.height);l.font=e;l.textAlign=
"center";l.textBaseline="middle";l.fillStyle="#fff";e=f[0]/2;c=f[1]/2;for(m=0;m<p.length;m++)l.fillText(p[m],e,c),(e+=f[0])>k[0]-f[0]/2&&(e=f[0]/2,c+=f[1]);return a}},{"css-font/stringify":147}],246:[function(b,D,G){function r(a,e){e||(e={});if("string"===typeof a||Array.isArray(a))e.family=a;var f=Array.isArray(e.family)?e.family.join(", "):e.family;if(!f)throw Error("`family` must be defined");var l=e.size||e.fontSize||e.em||48;a=[e.style||e.fontStyle||"",e.weight||e.fontWeight||"",l].join(" ")+
"px "+f;var m=e.origin||"top";if(r.cache[f]&&l<=r.cache[f].em)return n(r.cache[f],m);var c=e.canvas||r.canvas,d=c.getContext("2d"),g=void 0!==e.upper?e.upper:"H",h=void 0!==e.lower?e.lower:"x",q=void 0!==e.descent?e.descent:"p",t=void 0!==e.ascent?e.ascent:"h",v=void 0!==e.tittle?e.tittle:"i";e=void 0!==e.overshoot?e.overshoot:"O";var w=Math.ceil(1.5*l);c.height=w;c.width=.5*w;d.font=a;a={top:0};d.clearRect(0,0,w,w);d.textBaseline="top";d.fillStyle="black";d.fillText("H",0,0);c=p(d.getImageData(0,
0,w,w));d.clearRect(0,0,w,w);d.textBaseline="bottom";d.fillText("H",0,w);var A=p(d.getImageData(0,0,w,w));a.lineHeight=a.bottom=w-A+c;d.clearRect(0,0,w,w);d.textBaseline="alphabetic";d.fillText("H",0,w);A=p(d.getImageData(0,0,w,w));A=w-A-1+c;a.baseline=a.alphabetic=A;d.clearRect(0,0,w,w);d.textBaseline="middle";d.fillText("H",0,.5*w);var z=p(d.getImageData(0,0,w,w));a.median=a.middle=w-z-1+c-.5*w;d.clearRect(0,0,w,w);d.textBaseline="hanging";d.fillText("H",0,.5*w);z=p(d.getImageData(0,0,w,w));a.hanging=
w-z-1+c-.5*w;d.clearRect(0,0,w,w);d.textBaseline="ideographic";d.fillText("H",0,w);z=p(d.getImageData(0,0,w,w));a.ideographic=w-z-1+c;g&&(d.clearRect(0,0,w,w),d.textBaseline="top",d.fillText(g,0,0),a.upper=p(d.getImageData(0,0,w,w)),a.capHeight=a.baseline-a.upper);h&&(d.clearRect(0,0,w,w),d.textBaseline="top",d.fillText(h,0,0),a.lower=p(d.getImageData(0,0,w,w)),a.xHeight=a.baseline-a.lower);v&&(d.clearRect(0,0,w,w),d.textBaseline="top",d.fillText(v,0,0),a.tittle=p(d.getImageData(0,0,w,w)));t&&(d.clearRect(0,
0,w,w),d.textBaseline="top",d.fillText(t,0,0),a.ascent=p(d.getImageData(0,0,w,w)));q&&(d.clearRect(0,0,w,w),d.textBaseline="top",d.fillText(q,0,0),a.descent=k(d.getImageData(0,0,w,w)));e&&(d.clearRect(0,0,w,w),d.textBaseline="top",d.fillText(e,0,0),d=k(d.getImageData(0,0,w,w)),a.overshoot=d-A);for(var y in a)a[y]/=l;a.em=l;r.cache[f]=a;return n(a,m)}function n(a,e){var f={};"string"===typeof e&&(e=a[e]);for(var l in a)"em"!==l&&(f[l]=a[l]-e);return f}function p(a){var e=a.height;a=a.data;for(var f=
3;f<a.length;f+=4)if(0!==a[f])return Math.floor(.25*(f-3)/e)}function k(a){var e=a.height;a=a.data;for(var f=a.length-1;0<f;f-=4)if(0!==a[f])return Math.floor(.25*(f-3)/e)}D.exports=r;r.canvas=document.createElement("canvas");r.cache={}},{}],247:[function(b,D,G){function r(g,h,q,t,v,w){this._color=g;this.key=h;this.value=q;this.left=t;this.right=v;this._count=w}function n(g){return new r(g._color,g.key,g.value,g.left,g.right,g._count)}function p(g,h){return new r(g,h.key,h.value,h.left,h.right,h._count)}
function k(g){g._count=1+(g.left?g.left._count:0)+(g.right?g.right._count:0)}function a(g,h){this._compare=g;this.root=h}function e(g,h){if(h.left){var q=e(g,h.left);if(q)return q}if(q=g(h.key,h.value))return q;if(h.right)return e(g,h.right)}function f(g,h,q,t){if(0>=h(g,t.key)){if(t.left){var v=f(g,h,q,t.left);if(v)return v}if(v=q(t.key,t.value))return v}if(t.right)return f(g,h,q,t.right)}function l(g,h,q,t,v){var w=q(g,v.key),A=q(h,v.key);if(0>=w&&(v.left&&(w=l(g,h,q,t,v.left))||0<A&&(w=t(v.key,
v.value))))return w;if(0<A&&v.right)return l(g,h,q,t,v.right)}function m(g,h){this.tree=g;this._stack=h}function c(g,h){g.key=h.key;g.value=h.value;g.left=h.left;g.right=h.right;g._color=h._color;g._count=h._count}function d(g,h){return g<h?-1:g>h?1:0}D.exports=function(g){return new a(g||d,null)};b=a.prototype;Object.defineProperty(b,"keys",{get:function(){var g=[];this.forEach(function(h,q){g.push(h)});return g}});Object.defineProperty(b,"values",{get:function(){var g=[];this.forEach(function(h,
q){g.push(q)});return g}});Object.defineProperty(b,"length",{get:function(){return this.root?this.root._count:0}});b.insert=function(g,h){for(var q=this._compare,t=this.root,v=[],w=[];t;){var A=q(g,t.key);v.push(t);w.push(A);t=0>=A?t.left:t.right}v.push(new r(0,g,h,null,null,1));for(g=v.length-2;0<=g;--g)t=v[g],v[g]=0>=w[g]?new r(t._color,t.key,t.value,v[g+1],t.right,t._count+1):new r(t._color,t.key,t.value,t.left,v[g+1],t._count+1);for(g=v.length-1;1<g;--g){w=v[g-1];t=v[g];if(1===w._color||1===t._color)break;
h=v[g-2];if(h.left===w)if(w.left===t)if((A=h.right)&&0===A._color)w._color=1,h.right=p(1,A),h._color=0,--g;else{h._color=0;h.left=w.right;w._color=1;w.right=h;v[g-2]=w;v[g-1]=t;k(h);k(w);3<=g&&(g=v[g-3],g.left===h?g.left=w:g.right=w);break}else if((A=h.right)&&0===A._color)w._color=1,h.right=p(1,A),h._color=0,--g;else{w.right=t.left;h._color=0;h.left=t.right;t._color=1;t.left=w;t.right=h;v[g-2]=t;v[g-1]=w;k(h);k(w);k(t);3<=g&&(g=v[g-3],g.left===h?g.left=t:g.right=t);break}else if(w.right===t)if((A=
h.left)&&0===A._color)w._color=1,h.left=p(1,A),h._color=0,--g;else{h._color=0;h.right=w.left;w._color=1;w.left=h;v[g-2]=w;v[g-1]=t;k(h);k(w);3<=g&&(g=v[g-3],g.right===h?g.right=w:g.left=w);break}else if((A=h.left)&&0===A._color)w._color=1,h.left=p(1,A),h._color=0,--g;else{w.left=t.right;h._color=0;h.right=t.left;t._color=1;t.right=w;t.left=h;v[g-2]=t;v[g-1]=w;k(h);k(w);k(t);3<=g&&(g=v[g-3],g.right===h?g.right=t:g.left=t);break}}v[0]._color=1;return new a(q,v[0])};b.forEach=function(g,h,q){if(this.root)switch(arguments.length){case 1:return e(g,
this.root);case 2:return f(h,this._compare,g,this.root);case 3:if(!(0<=this._compare(h,q)))return l(h,q,this._compare,g,this.root)}};Object.defineProperty(b,"begin",{get:function(){for(var g=[],h=this.root;h;)g.push(h),h=h.left;return new m(this,g)}});Object.defineProperty(b,"end",{get:function(){for(var g=[],h=this.root;h;)g.push(h),h=h.right;return new m(this,g)}});b.at=function(g){if(0>g)return new m(this,[]);for(var h=this.root,q=[];;){q.push(h);if(h.left){if(g<h.left._count){h=h.left;continue}g-=
h.left._count}if(!g)return new m(this,q);--g;if(h.right){if(g>=h.right._count)break;h=h.right}else break}return new m(this,[])};b.ge=function(g){for(var h=this._compare,q=this.root,t=[],v=0;q;){var w=h(g,q.key);t.push(q);0>=w&&(v=t.length);q=0>=w?q.left:q.right}t.length=v;return new m(this,t)};b.gt=function(g){for(var h=this._compare,q=this.root,t=[],v=0;q;){var w=h(g,q.key);t.push(q);0>w&&(v=t.length);q=0>w?q.left:q.right}t.length=v;return new m(this,t)};b.lt=function(g){for(var h=this._compare,
q=this.root,t=[],v=0;q;){var w=h(g,q.key);t.push(q);0<w&&(v=t.length);q=0>=w?q.left:q.right}t.length=v;return new m(this,t)};b.le=function(g){for(var h=this._compare,q=this.root,t=[],v=0;q;){var w=h(g,q.key);t.push(q);0<=w&&(v=t.length);q=0>w?q.left:q.right}t.length=v;return new m(this,t)};b.find=function(g){for(var h=this._compare,q=this.root,t=[];q;){var v=h(g,q.key);t.push(q);if(0===v)return new m(this,t);q=0>=v?q.left:q.right}return new m(this,[])};b.remove=function(g){return(g=this.find(g))?
g.remove():this};b.get=function(g){for(var h=this._compare,q=this.root;q;){var t=h(g,q.key);if(0===t)return q.value;q=0>=t?q.left:q.right}};b=m.prototype;Object.defineProperty(b,"valid",{get:function(){return 0<this._stack.length}});Object.defineProperty(b,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0});b.clone=function(){return new m(this.tree,this._stack.slice())};b.remove=function(){var g=this._stack;if(0===g.length)return this.tree;var h=
Array(g.length),q=g[g.length-1];h[h.length-1]=new r(q._color,q.key,q.value,q.left,q.right,q._count);for(var t=g.length-2;0<=t;--t)q=g[t],h[t]=q.left===g[t+1]?new r(q._color,q.key,q.value,h[t+1],q.right,q._count):new r(q._color,q.key,q.value,q.left,h[t+1],q._count);q=h[h.length-1];if(q.left&&q.right){g=h.length;for(q=q.left;q.right;)h.push(q),q=q.right;t=h[g-1];h.push(new r(q._color,t.key,t.value,q.left,q.right,q._count));h[g-1].key=q.key;h[g-1].value=q.value;for(t=h.length-2;t>=g;--t)q=h[t],h[t]=
new r(q._color,q.key,q.value,q.left,h[t+1],q._count);h[g-1].left=h[g]}q=h[h.length-1];if(0===q._color)for(t=h[h.length-2],t.left===q?t.left=null:t.right===q&&(t.right=null),h.pop(),t=0;t<h.length;++t)h[t]._count--;else if(q.left||q.right)for(q.left?c(q,q.left):q.right&&c(q,q.right),q._color=1,t=0;t<h.length-1;++t)h[t]._count--;else{if(1===h.length)return new a(this.tree._compare,null);for(t=0;t<h.length;++t)h[t]._count--;t=h[h.length-2];for(var v,w,A,z=h.length-1;0<=z;--z){g=h[z];if(0===z){g._color=
1;break}v=h[z-1];if(v.left===g){w=v.right;if(w.right&&0===w.right._color){w=v.right=n(w);A=w.right=n(w.right);v.right=w.left;w.left=v;w.right=A;w._color=v._color;g._color=1;v._color=1;A._color=1;k(v);k(w);if(1<z){var y=h[z-2];y.left===v?y.left=w:y.right=w}h[z-1]=w;break}else if(w.left&&0===w.left._color){w=v.right=n(w);A=w.left=n(w.left);v.right=A.left;w.left=A.right;A.left=v;A.right=w;A._color=v._color;v._color=1;w._color=1;g._color=1;k(v);k(w);k(A);1<z&&(y=h[z-2],y.left===v?y.left=A:y.right=A);
h[z-1]=A;break}if(1===w._color)if(0===v._color){v._color=1;v.right=p(0,w);break}else v.right=p(0,w);else w=n(w),v.right=w.left,w.left=v,w._color=v._color,v._color=0,k(v),k(w),1<z&&(y=h[z-2],y.left===v?y.left=w:y.right=w),h[z-1]=w,h[z]=v,z+1<h.length?h[z+1]=g:h.push(g),z+=2}else{w=v.left;if(w.left&&0===w.left._color){w=v.left=n(w);A=w.left=n(w.left);v.left=w.right;w.right=v;w.left=A;w._color=v._color;g._color=1;v._color=1;A._color=1;k(v);k(w);1<z&&(y=h[z-2],y.right===v?y.right=w:y.left=w);h[z-1]=w;
break}else if(w.right&&0===w.right._color){w=v.left=n(w);A=w.right=n(w.right);v.left=A.right;w.right=A.left;A.right=v;A.left=w;A._color=v._color;v._color=1;w._color=1;g._color=1;k(v);k(w);k(A);1<z&&(y=h[z-2],y.right===v?y.right=A:y.left=A);h[z-1]=A;break}if(1===w._color)if(0===v._color){v._color=1;v.left=p(0,w);break}else v.left=p(0,w);else w=n(w),v.left=w.right,w.right=v,w._color=v._color,v._color=0,k(v),k(w),1<z&&(y=h[z-2],y.right===v?y.right=w:y.left=w),h[z-1]=w,h[z]=v,z+1<h.length?h[z+1]=g:h.push(g),
z+=2}}t.left===q?t.left=null:t.right=null}return new a(this.tree._compare,h[0])};Object.defineProperty(b,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(b,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(b,"index",{get:function(){var g=0,h=this._stack;if(0===h.length)return(g=this.tree.root)?g._count:0;h[h.length-1].left&&(g=h[h.length-
1].left._count);for(var q=h.length-2;0<=q;--q)h[q+1]===h[q].right&&(++g,h[q].left&&(g+=h[q].left._count));return g},enumerable:!0});b.next=function(){var g=this._stack;if(0!==g.length){var h=g[g.length-1];if(h.right)for(h=h.right;h;)g.push(h),h=h.left;else for(g.pop();0<g.length&&g[g.length-1].right===h;)h=g[g.length-1],g.pop()}};Object.defineProperty(b,"hasNext",{get:function(){var g=this._stack;if(0===g.length)return!1;if(g[g.length-1].right)return!0;for(var h=g.length-1;0<h;--h)if(g[h-1].left===
g[h])return!0;return!1}});b.update=function(g){var h=this._stack;if(0===h.length)throw Error("Can't update empty node!");var q=Array(h.length),t=h[h.length-1];q[q.length-1]=new r(t._color,t.key,g,t.left,t.right,t._count);for(g=h.length-2;0<=g;--g)t=h[g],q[g]=t.left===h[g+1]?new r(t._color,t.key,t.value,q[g+1],t.right,t._count):new r(t._color,t.key,t.value,t.left,q[g+1],t._count);return new a(this.tree._compare,q[0])};b.prev=function(){var g=this._stack;if(0!==g.length){var h=g[g.length-1];if(h.left)for(h=
h.left;h;)g.push(h),h=h.right;else for(g.pop();0<g.length&&g[g.length-1].left===h;)h=g[g.length-1],g.pop()}};Object.defineProperty(b,"hasPrev",{get:function(){var g=this._stack;if(0===g.length)return!1;if(g[g.length-1].left)return!0;for(var h=g.length-1;0<h;--h)if(g[h-1].right===g[h])return!0;return!1}})},{}],248:[function(b,D,G){function r(k){if(0>k)return Number("0/0");for(var a=p[0],e=p.length-1;0<e;--e)a+=p[e]/(k+e);e=k+4.7421875+.5;return.5*Math.log(2*Math.PI)+(k+.5)*Math.log(e)-e+Math.log(a)-
Math.log(k)}var n=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9.984369578019572E-6,1.5056327351493116E-7],p=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3.399464998481189E-5,4.652362892704858E-5,-9.837447530487956E-5,1.580887032249125E-4,-2.1026444172410488E-4,2.1743961811521265E-4,-1.643181065367639E-4,8.441822398385275E-5,-2.6190838401581408E-5,3.6899182659531625E-6];
D.exports=function e(a){if(.5>a)return Math.PI/(Math.sin(Math.PI*a)*e(1-a));if(100<a)return Math.exp(r(a));--a;for(var f=n[0],l=1;9>l;l++)f+=n[l]/(a+l);l=a+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(l,a+.5)*Math.exp(-l)*f};D.exports.log=r},{}],249:[function(b,D,G){D.exports=function(r,n){if("string"!==typeof r)throw new TypeError("must specify type string");n=n||{};if("undefined"===typeof document&&!n.canvas)return null;var p=n.canvas||document.createElement("canvas");"number"===typeof n.width&&(p.width=
n.width);"number"===typeof n.height&&(p.height=n.height);var k;try{var a=[r];0===r.indexOf("webgl")&&a.push("experimental-"+r);for(r=0;r<a.length;r++)if(k=p.getContext(a[r],n))return k}catch(e){k=null}return k||null}},{}],250:[function(b,D,G){function r(w,A){w[0]=A[0];w[1]=A[1];w[2]=A[2];return w}function n(w){this.gl=w;this.pixelRatio=1;this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.autoTicks=!0;this.tickSpacing=[1,1,1];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif",
"sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickAlign=["auto","auto","auto"];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[10,10,10];this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]};this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont="sans-serif";this.labelSize=[20,20,20];this.labelAngle=[0,0,0];this.labelAlign=["auto","auto","auto"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[10,10,10];this.lineEnable=[!0,!0,!0];this.lineMirror=
[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[0,0,0];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!1,!1,!1];this.backgroundColor=
[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._firstInit=!0;this._lines=this._text=null;this._background=f(w)}function p(){this.primalOffset=[0,0,0];this.primalMinor=[0,0,0];this.mirrorOffset=[0,0,0];this.mirrorMinor=[0,0,0]}function k(w,A,z,y,B){var C=w.primalOffset,u=w.primalMinor,F=w.mirrorOffset;w=w.mirrorMinor;y=y[A];for(var H=0;3>H;++H)if(A!==H){var J=C,I=F,M=u,E=w;y&1<<H&&(J=F,I=C,M=w,E=u);J[H]=z[0][H];I[H]=z[1][H];0<B[H]?(M[H]=-1,E[H]=0):(M[H]=0,E[H]=1)}}D.exports=function(w,A){w=new n(w);
w.update(A);return w};var a=b("./lib/text.js"),e=b("./lib/lines.js"),f=b("./lib/background.js"),l=b("./lib/cube.js"),m=b("./lib/ticks.js"),c=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);b=n.prototype;b.update=function(w){function A(E,L,P){if(P in w){var N=w[P],Q=this[P],O;(E?Array.isArray(N)&&Array.isArray(N[0]):Array.isArray(N))?this[P]=O=[L(N[0]),L(N[1]),L(N[2])]:this[P]=O=[L(N),L(N),L(N)];for(E=0;3>E;++E)if(O[E]!==Q[E])return!0}return!1}w=w||{};var z=A.bind(this,!1,Number),y=A.bind(this,
!1,Boolean),B=A.bind(this,!1,String),C=A.bind(this,!0,function(E){if(Array.isArray(E)){if(3===E.length)return[+E[0],+E[1],+E[2],1];if(4===E.length)return[+E[0],+E[1],+E[2],+E[3]]}return[0,0,0,1]}),u=!1,F=!1;if("bounds"in w){var H=w.bounds,J=0;for(;2>J;++J)for(var I=0;3>I;++I)H[J][I]!==this.bounds[J][I]&&(F=!0),this.bounds[J][I]=H[J][I]}if("ticks"in w){var M=w.ticks;u=!0;this.autoTicks=!1;for(J=0;3>J;++J)this.tickSpacing[J]=0}else z("tickSpacing")&&(F=this.autoTicks=!0);this._firstInit&&("ticks"in
w||"tickSpacing"in w||(this.autoTicks=!0),u=F=!0,this._firstInit=!1);F&&this.autoTicks&&(M=m.create(this.bounds,this.tickSpacing),u=!0);if(u){for(J=0;3>J;++J)M[J].sort(function(E,L){return E.x-L.x});m.equal(M,this.ticks)?u=!1:this.ticks=M}y("tickEnable");B("tickFont")&&(u=!0);z("tickSize");z("tickAngle");z("tickPad");C("tickColor");M=B("labels");B("labelFont")&&(M=!0);y("labelEnable");z("labelSize");z("labelPad");C("labelColor");y("lineEnable");y("lineMirror");z("lineWidth");C("lineColor");y("lineTickEnable");
y("lineTickMirror");z("lineTickLength");z("lineTickWidth");C("lineTickColor");y("gridEnable");z("gridWidth");C("gridColor");y("zeroEnable");C("zeroLineColor");z("zeroLineWidth");y("backgroundEnable");C("backgroundColor");this._text?this._text&&(M||u)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=a(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont);this._lines&&u&&(this._lines.dispose(),this._lines=null);this._lines||(this._lines=
e(this.gl,this.bounds,this.ticks))};var d=[new p,new p,new p],g=[0,0,0],h={model:c,view:c,projection:c,_ortho:!1};b.isOpaque=function(){return!0};b.isTransparent=function(){return!1};b.drawTransparent=function(w){};var q=[0,0,0],t=[0,0,0],v=[0,0,0];b.draw=function(w){function A(P){L=[0,0,0];L[P]=1}function z(P,N,Q){var O=(P+1)%3;P=(P+2)%3;var T=N[O];N=N[P];var V=Q[O];Q=Q[P];0<T&&0<Q?A(O):0<T&&0>Q?A(O):0>T&&0<Q?A(O):0>T&&0>Q?A(O):0<N&&0<V?A(P):0<N&&0>V?A(P):0>N&&0<V?A(P):0>N&&0>V&&A(P)}w=w||h;var y=
this.gl,B=w.model||c,C=w.view||c,u=w.projection||c,F=this.bounds;w=w._ortho||!1;var H=l(B,C,u,F,w),J=H.cubeEdges;H=H.axis;w=(w?2:1)*this.pixelRatio*(u[3]*C[12]+u[7]*C[13]+u[11]*C[14]+u[15]*C[15])/y.drawingBufferHeight;for(y=0;3>y;++y)this.lastCubeProps.cubeEdges[y]=J[y],this.lastCubeProps.axis[y]=H[y];for(y=0;3>y;++y)k(d[y],y,this.bounds,J,H);y=this.gl;for(y=0;3>y;++y)g[y]=this.backgroundEnable[y]?H[y]:0;this._background.draw(B,C,u,F,g,this.backgroundColor);this._lines.bind(B,C,u,this);for(y=0;3>
y;++y){var I=[0,0,0];I[y]=0<H[y]?F[1][y]:F[0][y];for(J=0;2>J;++J){var M=(y+1+J)%3,E=(y+1+(J^1))%3;this.gridEnable[M]&&this._lines.drawGrid(M,E,this.bounds,I,this.gridColor[M],this.gridWidth[M]*this.pixelRatio)}for(J=0;2>J;++J)M=(y+1+J)%3,E=(y+1+(J^1))%3,this.zeroEnable[E]&&0>=Math.min(F[0][E],F[1][E])&&0<=Math.max(F[0][E],F[1][E])&&this._lines.drawZero(M,E,this.bounds,I,this.zeroLineColor[E],this.zeroLineWidth[E]*this.pixelRatio)}for(y=0;3>y;++y){this.lineEnable[y]&&this._lines.drawAxisLine(y,this.bounds,
d[y].primalOffset,this.lineColor[y],this.lineWidth[y]*this.pixelRatio);this.lineMirror[y]&&this._lines.drawAxisLine(y,this.bounds,d[y].mirrorOffset,this.lineColor[y],this.lineWidth[y]*this.pixelRatio);H=r(q,d[y].primalMinor);I=r(t,d[y].mirrorMinor);M=this.lineTickLength;for(J=0;3>J;++J)E=w/B[5*J],H[J]=H[J]*M[J]*E,I[J]=I[J]*M[J]*E;this.lineTickEnable[y]&&this._lines.drawAxisTicks(y,d[y].primalOffset,H,this.lineTickColor[y],this.lineTickWidth[y]*this.pixelRatio);this.lineTickMirror[y]&&this._lines.drawAxisTicks(y,
d[y].mirrorOffset,I,this.lineTickColor[y],this.lineTickWidth[y]*this.pixelRatio)}this._lines.unbind();this._text.bind(B,C,u,this.pixelRatio);for(y=0;3>y;++y){C=d[y].primalMinor;u=d[y].mirrorMinor;H=r(v,d[y].primalOffset);for(J=0;3>J;++J)this.lineTickEnable[y]&&(H[J]+=w*C[J]*Math.max(this.lineTickLength[J],0)/B[5*J]);I=[0,0,0];I[y]=1;if(this.tickEnable[y]){-3600===this.tickAngle[y]?(this.tickAngle[y]=0,this.tickAlign[y]="auto"):this.tickAlign[y]=-1;J=1;M=[this.tickAlign[y],.5,J];M[0]="auto"===M[0]?
0:parseInt(""+M[0]);var L=[0,0,0];z(y,C,u);for(J=0;3>J;++J)H[J]+=w*C[J]*this.tickPad[J]/B[5*J];this._text.drawTicks(y,this.tickSize[y],this.tickAngle[y],H,this.tickColor[y],I,L,M)}if(this.labelEnable[y]){J=0;L=[0,0,0];4<this.labels[y].length&&(A(y),J=1);M=[this.labelAlign[y],.5,J];M[0]="auto"===M[0]?0:parseInt(""+M[0]);for(J=0;3>J;++J)H[J]+=w*C[J]*this.labelPad[J]/B[5*J];H[y]+=.5*(F[0][y]+F[1][y]);this._text.drawLabel(y,this.labelSize[y],this.labelAngle[y],H,this.labelColor[y],[0,0,0],L,M)}}this._text.unbind()};
b.dispose=function(){this._text.dispose();this._lines.dispose();this._background.dispose();this.gl=this._background=this._text=this._lines=null}},{"./lib/background.js":251,"./lib/cube.js":252,"./lib/lines.js":253,"./lib/text.js":255,"./lib/ticks.js":256}],251:[function(b,D,G){function r(a,e,f,l){this.gl=a;this.buffer=e;this.vao=f;this.shader=l}D.exports=function(a){for(var e=[],f=[],l=0,m=0;3>m;++m)for(var c=(m+1)%3,d=(m+2)%3,g=[0,0,0],h=[0,0,0],q=-1;1>=q;q+=2){f.push(l,l+2,l+1,l+1,l+2,l+3);g[m]=
q;h[m]=q;for(var t=-1;1>=t;t+=2){g[c]=t;for(var v=-1;1>=v;v+=2)g[d]=v,e.push(g[0],g[1],g[2],h[0],h[1],h[2]),l+=1}t=c;c=d;d=t}e=n(a,new Float32Array(e));f=n(a,new Uint16Array(f),a.ELEMENT_ARRAY_BUFFER);f=p(a,[{buffer:e,type:a.FLOAT,size:3,offset:0,stride:24},{buffer:e,type:a.FLOAT,size:3,offset:12,stride:24}],f);l=k(a);l.attributes.position.location=0;l.attributes.normal.location=1;return new r(a,e,f,l)};var n=b("gl-buffer"),p=b("gl-vao"),k=b("./shaders").bg;b=r.prototype;b.draw=function(a,e,f,l,m,
c){for(var d=!1,g=0;3>g;++g)d=d||m[g];d&&(d=this.gl,d.enable(d.POLYGON_OFFSET_FILL),d.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:a,view:e,projection:f,bounds:l,enable:m,colors:c},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),d.disable(d.POLYGON_OFFSET_FILL))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},{"./shaders":254,"gl-buffer":258,"gl-vao":332}],252:[function(b,D,G){D.exports=function(q,t,v,w,A){n(a,t,q);
n(a,v,a);for(q=t=0;2>q;++q)for(l[2]=w[q][2],v=0;2>v;++v){l[1]=w[v][1];for(var z=0;2>z;++z){l[0]=w[z][0];for(var y=e[t],B=l,C=a,u=0;4>u;++u){y[u]=C[12+u];for(var F=0;3>F;++F)y[u]+=B[F]*C[4*F+u]}t+=1}}w=-1;for(q=0;8>q;++q){t=e[q][3];for(v=0;3>v;++v)f[q][v]=e[q][v]/t;A&&(f[q][2]*=-1);0>t&&(0>w?w=q:f[q][2]<f[w][2]&&(w=q))}if(0>w)for(q=w=0;3>q;++q){t=(q+2)%3;A=(q+1)%3;z=v=-1;for(y=0;2>y;++y)B=y<<q,C=B+(y<<t)+(1-y<<A),u=B+(1-y<<t)+(y<<A),0>k(f[B],f[C],f[u],m)||(y?v=1:z=1);if(!(0>v||0>z))for(y=0;2>y;++y){B=
y<<q;C=B+(y<<t)+(1-y<<A);u=B+(1-y<<t)+(y<<A);a:{B=[e[B],e[C],e[u],e[B+(1<<t)+(1<<A)]];for(u=0;u<c.length;++u)if(B=p.positive(B,c[u]),3>B.length){B=0;break a}u=B[0];C=u[0]/u[3];F=u[1]/u[3];var H=0;for(u=1;u+1<B.length;++u){var J=B[u],I=B[u+1];H+=Math.abs((J[0]/J[3]-C)*(I[1]/I[3]-F)-(J[1]/J[3]-F)*(I[0]/I[3]-C))}B=H}y?v=B:z=B}z>v&&(w|=1<<q)}t=7^w;y=-1;for(q=0;8>q;++q)q!==w&&q!==t&&(0>y?y=q:f[y][1]>f[q][1]&&(y=q));v=-1;for(q=0;3>q;++q)B=y^1<<q,B!==w&&B!==t&&(0>v&&(v=B),A=f[B],A[0]<f[v][0]&&(v=B));z=-1;
for(q=0;3>q;++q)B=y^1<<q,B!==w&&B!==t&&B!==v&&(0>z&&(z=B),A=f[B],A[0]>f[z][0]&&(z=B));A=d;A[0]=A[1]=A[2]=0;A[r.log2(v^y)]=y&v;A[r.log2(y^z)]=y&z;q=z^7;q===w||q===t?(q=v^7,A[r.log2(z^q)]=q&z):A[r.log2(v^q)]=q&v;A=g;for(q=0;3>q;++q)A[q]=w&1<<q?-1:1;return h};var r=b("bit-twiddle"),n=b("gl-mat4/multiply"),p=b("split-polygon"),k=b("robust-orientation"),a=Array(16),e=Array(8),f=Array(8),l=Array(3),m=[0,0,0];(function(){for(var q=0;8>q;++q)e[q]=[1,1,1,1],f[q]=[1,1,1]})();var c=[[0,0,1,0,0],[0,0,-1,1,0],
[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],d=[1,1,1],g=[0,0,0],h={cubeEdges:d,axis:g}},{"bit-twiddle":97,"gl-mat4/multiply":280,"robust-orientation":520,"split-polygon":538}],253:[function(b,D,G){function r(g){g[0]=g[1]=g[2]=0;return g}function n(g,h){g[0]=h[0];g[1]=h[1];g[2]=h[2];return g}function p(g,h,q,t,v,w,A,z){this.gl=g;this.vertBuffer=h;this.vao=q;this.shader=t;this.tickCount=v;this.tickOffset=w;this.gridCount=A;this.gridOffset=z}D.exports=function(g,h,q){var t=[];h=[0,0,0];var v=
[0,0,0],w=[0,0,0],A=[0,0,0];t.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var z=0;3>z;++z){for(var y=t.length/3|0,B=0;B<q[z].length;++B){var C=+q[z][B].x;t.push(C,0,1,C,1,1,C,0,-1,C,0,-1,C,1,1,C,1,-1)}C=t.length/3|0;h[z]=y;v[z]=C-y;y=t.length/3|0;for(B=0;B<q[z].length;++B)C=+q[z][B].x,t.push(C,0,1,C,1,1,C,0,-1,C,0,-1,C,1,1,C,1,-1);C=t.length/3|0;w[z]=y;A[z]=C-y}q=k(g,new Float32Array(t));t=a(g,[{buffer:q,type:g.FLOAT,size:3,stride:0,offset:0}]);z=e(g);z.attributes.position.location=0;return new p(g,
q,t,z,v,h,A,w)};var k=b("gl-buffer"),a=b("gl-vao"),e=b("./shaders").line,f=[0,0,0],l=[0,0,0],m=[0,0,0],c=[0,0,0],d=[1,1];b=p.prototype;b.bind=function(g,h,q){this.shader.bind();this.shader.uniforms.model=g;this.shader.uniforms.view=h;this.shader.uniforms.projection=q;d[0]=this.gl.drawingBufferWidth;d[1]=this.gl.drawingBufferHeight;this.shader.uniforms.screenShape=d;this.vao.bind()};b.unbind=function(){this.vao.unbind()};b.drawAxisLine=function(g,h,q,t,v){var w=r(l);this.shader.uniforms.majorAxis=
l;w[g]=h[1][g]-h[0][g];this.shader.uniforms.minorAxis=w;q=n(c,q);q[g]+=h[0][g];this.shader.uniforms.offset=q;this.shader.uniforms.lineWidth=v;this.shader.uniforms.color=t;h=r(m);h[(g+2)%3]=1;this.shader.uniforms.screenAxis=h;this.vao.draw(this.gl.TRIANGLES,6);h=r(m);h[(g+1)%3]=1;this.shader.uniforms.screenAxis=h;this.vao.draw(this.gl.TRIANGLES,6)};b.drawAxisTicks=function(g,h,q,t,v){if(this.tickCount[g]){var w=r(f);w[g]=1;this.shader.uniforms.majorAxis=w;this.shader.uniforms.offset=h;this.shader.uniforms.minorAxis=
q;this.shader.uniforms.color=t;this.shader.uniforms.lineWidth=v;h=r(m);h[g]=1;this.shader.uniforms.screenAxis=h;this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g])}};b.drawGrid=function(g,h,q,t,v,w){if(this.gridCount[g]){var A=r(l);A[h]=q[1][h]-q[0][h];this.shader.uniforms.minorAxis=A;t=n(c,t);t[h]+=q[0][h];this.shader.uniforms.offset=t;h=r(f);h[g]=1;this.shader.uniforms.majorAxis=h;h=r(m);h[g]=1;this.shader.uniforms.screenAxis=h;this.shader.uniforms.lineWidth=w;this.shader.uniforms.color=
v;this.vao.draw(this.gl.TRIANGLES,this.gridCount[g],this.gridOffset[g])}};b.drawZero=function(g,h,q,t,v,w){var A=r(l);this.shader.uniforms.majorAxis=A;A[g]=q[1][g]-q[0][g];this.shader.uniforms.minorAxis=A;t=n(c,t);t[g]+=q[0][g];this.shader.uniforms.offset=t;g=r(m);g[h]=1;this.shader.uniforms.screenAxis=g;this.shader.uniforms.lineWidth=w;this.shader.uniforms.color=v;this.vao.draw(this.gl.TRIANGLES,6)};b.dispose=function(){this.vao.dispose();this.vertBuffer.dispose();this.shader.dispose()}},{"./shaders":254,
"gl-buffer":258,"gl-vao":332}],254:[function(b,D,G){D=b("glslify");var r=b("gl-shader"),n=D(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major \x3d position.x * majorAxis;\n  vec3 minor \x3d position.y * minorAxis;\n\n  vec3 vPosition \x3d major + minor + offset;\n  vec3 pPosition \x3d project(vPosition);\n  vec3 offset \x3d project(vPosition + screenAxis * position.z);\n\n  vec2 screen \x3d normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position \x3d vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),
p=D(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);G.line=function(l){return r(l,n,p,null,[{name:"position",type:"vec3"}])};var k=D(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp \x3d projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A \x3d project(a);\n  vec3 B \x3d project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI \x3d 3.141592;\nconst float TWO_PI \x3d 2.0 * PI;\nconst float HALF_PI \x3d 0.5 * PI;\nconst float ONE_AND_HALF_PI \x3d 1.5 * PI;\n\nint option \x3d int(floor(alignOpt.x + 0.001));\nfloat hv_ratio \x3d       alignOpt.y;\nbool enableAlign \x3d    (alignOpt.z !\x3d 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a \x3c 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b \x3d positive_angle(a);\n  return ((b \x3e HALF_PI) \x26\x26 (b \x3c\x3d ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b \x3d positive_angle(a);\n\n  return\n    (b \x3c (      ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b \x3c (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b \x3c (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b \x3d positive_angle(a);\n  float div \x3d TWO_PI / float(n);\n  float c \x3d roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option \x3e  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option \x3d\x3d 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option \x3d\x3d 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option \x3d\x3d 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option \x3d\x3d-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle \x3d (axis.x \x3d\x3d 0.0) \x26\x26\n                   (axis.y \x3d\x3d 0.0) \x26\x26\n                   (axis.z \x3d\x3d 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance \x3d position.z;\n  vec3 dataPosition \x3d axisDistance * axis + offset;\n\n  float beta \x3d angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle \x3d (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle \x3d computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle +\x3d (sin(axisAngle) \x3c 0.0) ? PI : 0.0;\n    clipAngle +\x3d (sin(clipAngle) \x3c 0.0) ? PI : 0.0;\n\n    flip \x3d (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) \x3e 0.0) ? 1.0 : 0.0;\n\n    beta +\x3d applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord \x3d position.xy * pixelScale;\n\n  mat2 planeXform \x3d scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset \x3d 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition \x3d project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition +\x3d vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position \x3d vec4(clipPosition, 1.0);\n}"]),
a=D(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d color;\n}"]);G.text=function(l){return r(l,k,a,null,[{name:"position",type:"vec3"}])};var e=D(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis \x3d sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal \x3d signAxis * normal;\n\n  if(dot(realNormal, enable) \x3e 0.0) {\n    vec3 minRange \x3d min(bounds[0], bounds[1]);\n    vec3 maxRange \x3d max(bounds[0], bounds[1]);\n    vec3 nPosition \x3d mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position \x3d projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position \x3d vec4(0,0,0,0);\n  }\n\n  colorChannel \x3d abs(realNormal);\n}"]),
f=D(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor \x3d colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);G.bg=function(l){return r(l,e,f,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":312,glslify:413}],255:[function(b,D,G){(function(r){function n(m,c,d,g){this.gl=m;this.shader=c;this.buffer=d;this.vao=
g;this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}D.exports=function(m,c,d,g,h,q){var t=p(m),v=k(m,[{buffer:t,size:3}]),w=e(m);w.attributes.position.location=0;m=new n(m,w,t,v);m.update(c,d,g,h,q);return m};var p=b("gl-buffer"),k=b("gl-vao"),a=b("vectorize-text"),e=b("./shaders").text;r=window||r.global||{};var f=r.__TEXT_CACHE||{};r.__TEXT_CACHE={};r=n.prototype;var l=[0,0];r.bind=function(m,c,d,g){this.vao.bind();this.shader.bind();var h=this.shader.uniforms;h.model=m;h.view=
c;h.projection=d;h.pixelScale=g;l[0]=this.gl.drawingBufferWidth;l[1]=this.gl.drawingBufferHeight;this.shader.uniforms.resolution=l};r.unbind=function(){this.vao.unbind()};r.update=function(m,c,d,g,h){function q(u,F,H,J,I,M){var E=f[H];E||(E=f[H]={});var L=E[F];if(!L){L=E;H={triangles:!0,font:H,textAlign:"center",textBaseline:"middle",lineSpacing:I,styletags:M};try{var P=a(F,H)}catch(N){console.warn('error vectorizing text:"'+F+'" error:',N),P={cells:[],positions:[]}}L=L[F]=P}F=(J||12)/12;J=L.positions;
L=L.cells;P=0;for(H=L.length;P<H;++P)for(I=L[P],M=2;0<=M;--M)E=J[I[M]],t.push(F*E[0],-F*E[1],u)}for(var t=[],v=[0,0,0],w=[0,0,0],A=[0,0,0],z=[0,0,0],y={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},B=0;3>B;++B){A[B]=t.length/3|0;q(.5*(m[0][B]+m[1][B]),c[B],d[B],12,1.25,y);z[B]=(t.length/3|0)-A[B];v[B]=t.length/3|0;for(var C=0;C<g[B].length;++C)g[B][C].text&&q(g[B][C].x,g[B][C].text,g[B][C].font||h,g[B][C].fontSize||12,1.25,y);w[B]=(t.length/3|0)-v[B]}this.buffer.update(t);this.tickOffset=
v;this.tickCount=w;this.labelOffset=A;this.labelCount=z};r.drawTicks=function(m,c,d,g,h,q,t,v){this.tickCount[m]&&(this.shader.uniforms.axis=q,this.shader.uniforms.color=h,this.shader.uniforms.angle=d,this.shader.uniforms.scale=c,this.shader.uniforms.offset=g,this.shader.uniforms.alignDir=t,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.tickCount[m],this.tickOffset[m]))};r.drawLabel=function(m,c,d,g,h,q,t,v){this.labelCount[m]&&(this.shader.uniforms.axis=q,this.shader.uniforms.color=
h,this.shader.uniforms.angle=d,this.shader.uniforms.scale=c,this.shader.uniforms.offset=g,this.shader.uniforms.alignDir=t,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.labelCount[m],this.labelOffset[m]))};r.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()}}).call(this,b("_process"))},{"./shaders":254,_process:500,"gl-buffer":258,"gl-vao":332,"vectorize-text":572}],256:[function(b,D,G){function r(n,p){var k=n+"",a=k.indexOf("."),e=0;0<=a&&(e=
k.length-a-1);k=Math.pow(10,e);n=Math.round(n*p*k);p=n+"";if(0<=p.indexOf("e"))return p;p=n/k;k=n%k;0>n?(p=-Math.ceil(p)|0,k=-k|0):(p=Math.floor(p)|0,k|=0);p=""+p;0>n&&(p="-"+p);if(e){for(k=""+k;k.length<e;)k="0"+k;return p+"."+k}return p}G.create=function(n,p){for(var k=[],a=0;3>a;++a){for(var e=[],f=0;f*p[a]<=n[1][a];++f)e.push({x:f*p[a],text:r(p[a],f)});for(f=-1;f*p[a]>=n[0][a];--f)e.push({x:f*p[a],text:r(p[a],f)});k.push(e)}return k};G.equal=function(n,p){for(var k=0;3>k;++k){if(n[k].length!==
p[k].length)return!1;for(var a=0;a<n[k].length;++a){var e=n[k][a],f=p[k][a];if(e.x!==f.x||e.text!==f.text||e.font!==f.font||e.fontColor!==f.fontColor||e.fontSize!==f.fontSize||e.dx!==f.dx||e.dy!==f.dy)return!1}}return!0}},{}],257:[function(b,D,G){function r(q,t,v){this.lo=q;this.hi=t;this.pixelsPerDataUnit=v}D.exports=function(q,t,v,w,A){var z=t.model||l,y=t.view||l,B=t.projection||l;t=t._ortho||!1;q=q.bounds;A=A||k(z,y,B,q,t);A=A.axis;a(m,y,z);a(m,B,m);z=g;for(y=0;3>y;++y)z[y].lo=Infinity,z[y].hi=
-Infinity,z[y].pixelsPerDataUnit=Infinity;B=n(e(m,m));e(m,m);for(var C=0;3>C;++C){var u=(C+1)%3,F=(C+2)%3,H=h;y=0;a:for(;2>y;++y){var J=[];if(0>A[C]!==!!y){H[C]=q[y][C];for(var I=0;2>I;++I){H[u]=q[I^y][u];for(var M=0;2>M;++M)H[F]=q[M^I^y][F],J.push(H.slice())}for(I=M=t?5:4;I===M;++I){if(0===J.length)continue a;J=p.positive(J,B[I])}for(I=0;I<J.length;++I){F=J[I];M=h;var E=m;for(var L=F,P=v,N=w,Q=0;3>Q;++Q){for(var O=c,T=d,V=0;3>V;++V)T[V]=O[V]=L[V];T[3]=O[3]=1;T[Q]+=1;f(T,T,E);0>T[3]&&(M[Q]=Infinity);
--O[Q];f(O,O,E);0>O[3]&&(M[Q]=Infinity);V=(O[0]/O[3]-T[0]/T[3])*P;O=(O[1]/O[3]-T[1]/T[3])*N;M[Q]=.25*Math.sqrt(V*V+O*O)}E=M;for(M=0;3>M;++M)z[M].lo=Math.min(z[M].lo,F[M]),z[M].hi=Math.max(z[M].hi,F[M]),M!==C&&(z[M].pixelsPerDataUnit=Math.min(z[M].pixelsPerDataUnit,Math.abs(E[M])))}}}}return z};var n=b("extract-frustum-planes"),p=b("split-polygon"),k=b("./lib/cube.js"),a=b("gl-mat4/multiply"),e=b("gl-mat4/transpose"),f=b("gl-vec4/transformMat4"),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),
m=new Float32Array(16),c=[0,0,0,1],d=[0,0,0,1],g=[new r(Infinity,-Infinity,Infinity),new r(Infinity,-Infinity,Infinity),new r(Infinity,-Infinity,Infinity)],h=[0,0,0]},{"./lib/cube.js":252,"extract-frustum-planes":240,"gl-mat4/multiply":280,"gl-mat4/transpose":289,"gl-vec4/transformMat4":403,"split-polygon":538}],258:[function(b,D,G){function r(l,m,c,d,g){this.gl=l;this.type=m;this.handle=c;this.length=d;this.usage=g}function n(l,m,c,d,g,h){var q=g.length*g.BYTES_PER_ELEMENT;if(0>h)return l.bufferData(m,
g,d),q;if(q+h>c)throw Error("gl-buffer: If resizing buffer, must not specify offset");l.bufferSubData(m,h,g);return c}function p(l,m){m=k.malloc(l.length,m);for(var c=l.length,d=0;d<c;++d)m[d]=l[d];return m}var k=b("typedarray-pool"),a=b("ndarray-ops"),e=b("ndarray"),f="uint8 uint8_clamped uint16 uint32 int8 int16 int32 float32".split(" ");b=r.prototype;b.bind=function(){this.gl.bindBuffer(this.type,this.handle)};b.unbind=function(){this.gl.bindBuffer(this.type,null)};b.dispose=function(){this.gl.deleteBuffer(this.handle)};
b.update=function(l,m){"number"!==typeof m&&(m=-1);this.bind();if("object"===typeof l&&"undefined"!==typeof l.shape){var c=l.dtype;0>f.indexOf(c)&&(c="float32");this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(c=gl.getExtension("OES_element_index_uint")&&"uint16"!==c?"uint32":"uint16");var d;if(d=c===l.dtype)a:{d=l.stride;for(var g=1,h=d.length-1;0<=h;--h){if(d[h]!==g){d=!1;break a}g*=l.shape[h]}d=!0}d?this.length=0===l.offset&&l.data.length===l.shape[0]?n(this.gl,this.type,this.length,this.usage,l.data,
m):n(this.gl,this.type,this.length,this.usage,l.data.subarray(l.offset,l.shape[0]),m):(c=k.malloc(l.size,c),d=e(c,l.shape),a.assign(d,l),this.length=0>m?n(this.gl,this.type,this.length,this.usage,c,m):n(this.gl,this.type,this.length,this.usage,c.subarray(0,l.size),m),k.free(c))}else if(Array.isArray(l))c=this.type===this.gl.ELEMENT_ARRAY_BUFFER?p(l,"uint16"):p(l,"float32"),this.length=0>m?n(this.gl,this.type,this.length,this.usage,c,m):n(this.gl,this.type,this.length,this.usage,c.subarray(0,l.length),
m),k.free(c);else if("object"===typeof l&&"number"===typeof l.length)this.length=n(this.gl,this.type,this.length,this.usage,l,m);else if("number"===typeof l||void 0===l){if(0<=m)throw Error("gl-buffer: Cannot specify offset when resizing buffer");l|=0;0>=l&&(l=1);this.gl.bufferData(this.type,l|0,this.usage);this.length=l}else throw Error("gl-buffer: Invalid data type");};D.exports=function(l,m,c,d){c=c||l.ARRAY_BUFFER;d=d||l.DYNAMIC_DRAW;if(c!==l.ARRAY_BUFFER&&c!==l.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");
if(d!==l.DYNAMIC_DRAW&&d!==l.STATIC_DRAW&&d!==l.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var g=l.createBuffer();l=new r(l,c,g,0,d);l.update(m);return l}},{ndarray:469,"ndarray-ops":464,"typedarray-pool":567}],259:[function(b,D,G){var r=b("gl-vec3");D.exports=function(p,k){var a=p.positions,e=p.vectors,f={positions:[],vertexIntensity:[],vertexIntensityBounds:p.vertexIntensityBounds,vectors:[],cells:[],coneOffset:p.coneOffset,
colormap:p.colormap};if(0===p.positions.length)return k&&(k[0]=[0,0,0],k[1]=[0,0,0]),f;for(var l=0,m=Infinity,c=-Infinity,d=Infinity,g=-Infinity,h=Infinity,q=-Infinity,t=null,v=null,w=[],A=Infinity,z=!1,y=0;y<a.length;y++){var B=a[y];m=Math.min(B[0],m);c=Math.max(B[0],c);d=Math.min(B[1],d);g=Math.max(B[1],g);h=Math.min(B[2],h);q=Math.max(B[2],q);var C=e[y];r.length(C)>l&&(l=r.length(C));y&&((z=2*r.distance(t,B)/(r.length(v)+r.length(C)))?(A=Math.min(A,z),z=!1):z=!0);z||(t=B,v=C);w.push(C)}y=[m,d,
h];B=[c,g,q];k&&(k[0]=y,k[1]=B);0===l&&(l=1);k=1/l;isFinite(A)||(A=1);f.vectorScale=A;y=p.coneSize||.5;p.absoluteConeSize&&(y=p.absoluteConeSize*k);f.coneScale=y;for(p=y=0;y<a.length;y++)for(B=a[y],A=B[0],l=B[1],B=B[2],c=w[y],g=r.length(c)*k,q=0;8>q;q++)f.positions.push([A,l,B,p++]),f.positions.push([A,l,B,p++]),f.positions.push([A,l,B,p++]),f.positions.push([A,l,B,p++]),f.positions.push([A,l,B,p++]),f.positions.push([A,l,B,p++]),f.vectors.push(c),f.vectors.push(c),f.vectors.push(c),f.vectors.push(c),
f.vectors.push(c),f.vectors.push(c),f.vertexIntensity.push(g,g,g),f.vertexIntensity.push(g,g,g),e=f.positions.length,f.cells.push([e-6,e-5,e-4],[e-3,e-2,e-1]);return f};var n=b("./lib/shaders");D.exports.createMesh=b("./create_mesh");D.exports.createConeMesh=function(p,k){return D.exports.createMesh(p,k,{shaders:n,traceType:"cone"})}},{"./create_mesh":260,"./lib/shaders":261,"gl-vec3":351}],260:[function(b,D,G){function r(d,g,h,q,t,v,w,A,z,y,B){this.gl=d;this.pixelRatio=1;this.cells=[];this.positions=
[];this.intensity=[];this.texture=g;this.dirty=!0;this.triShader=h;this.pickShader=q;this.trianglePositions=t;this.triangleVectors=v;this.triangleColors=A;this.triangleUVs=z;this.triangleIds=w;this.triangleVAO=y;this.triangleCount=0;this.pickId=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=
.5;this.fresnel=1.5;this.opacity=1;this.traceType=B;this.tubeScale=1;this.coneScale=2;this.vectorScale=1;this.coneOffset=.25;this._projection=this._view=this._model=c;this._resolution=[1,1]}var n=b("gl-shader"),p=b("gl-buffer"),k=b("gl-vao"),a=b("gl-texture2d"),e=b("gl-mat4/multiply"),f=b("gl-mat4/invert"),l=b("ndarray"),m=b("colormap"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=r.prototype;b.isOpaque=function(){return 1<=this.opacity};b.isTransparent=function(){return 1>this.opacity};b.pickSlots=1;b.setPickBase=
function(d){this.pickId=d};b.update=function(d){d=d||{};var g=this.gl;this.dirty=!0;"lightPosition"in d&&(this.lightPosition=d.lightPosition);"opacity"in d&&(this.opacity=d.opacity);"ambient"in d&&(this.ambientLight=d.ambient);"diffuse"in d&&(this.diffuseLight=d.diffuse);"specular"in d&&(this.specularLight=d.specular);"roughness"in d&&(this.roughness=d.roughness);"fresnel"in d&&(this.fresnel=d.fresnel);void 0!==d.tubeScale&&(this.tubeScale=d.tubeScale);void 0!==d.vectorScale&&(this.vectorScale=d.vectorScale);
void 0!==d.coneScale&&(this.coneScale=d.coneScale);void 0!==d.coneOffset&&(this.coneOffset=d.coneOffset);if(d.colormap){this.texture.shape=[256,256];this.texture.minFilter=g.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=g.LINEAR;g=this.texture;var h=g.setPixels;var q=m({colormap:d.colormap,nshades:256,format:"rgba"});for(var t=new Uint8Array(1024),v=0;256>v;++v){for(var w=q[v],A=0;3>A;++A)t[4*v+A]=w[A];t[4*v+3]=255*w[3]}q=l(t,[256,256,4],[4,0,1]);h.call(g,q);this.texture.generateMipmap()}g=d.cells;
h=d.positions;q=d.vectors;if(h&&g&&q){t=[];v=[];w=[];A=[];var z=[];this.cells=g;this.positions=h;this.vectors=q;var y=d.meshColor||[1,1,1,1],B=d.vertexIntensity,C=Infinity,u=-Infinity;if(B)if(d.vertexIntensityBounds)C=+d.vertexIntensityBounds[0],u=+d.vertexIntensityBounds[1];else for(d=0;d<B.length;++d){var F=B[d];C=Math.min(C,F);u=Math.max(u,F)}else for(d=0;d<h.length;++d)F=h[d][2],C=Math.min(C,F),u=Math.max(u,F);if(B)this.intensity=B;else{d=h.length;F=Array(d);for(var H=0;H<d;++H)F[H]=h[H][2];this.intensity=
F}this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(d=0;d<h.length;++d){var J=h[d];for(F=0;3>F;++F)!isNaN(J[F])&&isFinite(J[F])&&(this.bounds[0][F]=Math.min(this.bounds[0][F],J[F]),this.bounds[1][F]=Math.max(this.bounds[1][F],J[F]))}d=H=0;a:for(;d<g.length;++d){var I=g[d];switch(I.length){case 3:for(F=0;3>F;++F){var M=I[F];J=h[M];for(M=0;3>M;++M)if(isNaN(J[M])||!isFinite(J[M]))continue a}for(F=0;3>F;++F){M=I[2-F];J=h[M];t.push(J[0],J[1],J[2],J[3]);var E=q[M];v.push(E[0],
E[1],E[2],E[3]||0);E=y;3===E.length?w.push(E[0],E[1],E[2],1):w.push(E[0],E[1],E[2],E[3]);J=B?[(B[M]-C)/(u-C),0]:[(J[2]-C)/(u-C),0];A.push(J[0],J[1]);z.push(d)}H+=1}}this.triangleCount=H;this.trianglePositions.update(t);this.triangleVectors.update(v);this.triangleColors.update(w);this.triangleUVs.update(A);this.triangleIds.update(new Uint32Array(z))}};b.drawTransparent=b.draw=function(d){d=d||{};var g=this.gl,h=d.model||c,q=d.view||c,t=d.projection||c,v=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(d=0;3>d;++d)v[0][d]=
Math.max(v[0][d],this.clipBounds[0][d]),v[1][d]=Math.min(v[1][d],this.clipBounds[1][d]);h={model:h,view:q,projection:t,inverseModel:c.slice(),clipBounds:v,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};h.inverseModel=f(h.inverseModel,h.model);
g.disable(g.CULL_FACE);this.texture.bind(0);q=Array(16);e(q,h.view,h.model);e(q,h.projection,q);f(q,q);for(d=0;3>d;++d)h.eyePosition[d]=q[12+d]/q[15];t=q[15];for(d=0;3>d;++d)t+=this.lightPosition[d]*q[4*d+3];for(d=0;3>d;++d){v=q[12+d];for(var w=0;3>w;++w)v+=q[4*w+d]*this.lightPosition[w];h.lightPosition[d]=v/t}0<this.triangleCount&&(d=this.triShader,d.bind(),d.uniforms=h,this.triangleVAO.bind(),g.drawArrays(g.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.drawPick=function(d){d=d||
{};var g=this.gl,h=d.model||c,q=d.view||c;d=d.projection||c;for(var t=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],v=0;3>v;++v)t[0][v]=Math.max(t[0][v],this.clipBounds[0][v]),t[1][v]=Math.min(t[1][v],this.clipBounds[1][v]);this._model=[].slice.call(h);this._view=[].slice.call(q);this._projection=[].slice.call(d);this._resolution=[g.drawingBufferWidth,g.drawingBufferHeight];h={model:h,view:q,projection:d,clipBounds:t,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,
pickId:this.pickId/255};q=this.pickShader;q.bind();q.uniforms=h;0<this.triangleCount&&(this.triangleVAO.bind(),g.drawArrays(g.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())};b.pick=function(d){if(!d||d.id!==this.pickId)return null;d=d.value[0]+256*d.value[1]+65536*d.value[2];var g=this.cells[d],h=this.positions[g[1]].slice(0,3);h={position:h,dataCoordinate:h,index:Math.floor(g[1]/48)};"cone"===this.traceType?h.index=Math.floor(g[1]/48):"streamtube"===this.traceType&&(h.intensity=this.intensity[g[1]],
h.velocity=this.vectors[g[1]].slice(0,3),h.divergence=this.vectors[g[1]][3],h.index=d);return h};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.pickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleVectors.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();this.triangleIds.dispose()};D.exports=function(d,g,h){var q=h.shaders;1===arguments.length&&(g=d,d=g.gl);var t=n(d,q.meshShader.vertex,q.meshShader.fragment,null,
q.meshShader.attributes);t.attributes.position.location=0;t.attributes.color.location=2;t.attributes.uv.location=3;t.attributes.vector.location=4;q=n(d,q.pickShader.vertex,q.pickShader.fragment,null,q.pickShader.attributes);q.attributes.position.location=0;q.attributes.id.location=1;q.attributes.vector.location=4;var v=a(d,l(new Uint8Array([255,255,255,255]),[1,1,4]));v.generateMipmap();v.minFilter=d.LINEAR_MIPMAP_LINEAR;v.magFilter=d.LINEAR;var w=p(d),A=p(d),z=p(d),y=p(d),B=p(d),C=k(d,[{buffer:w,
type:d.FLOAT,size:4},{buffer:B,type:d.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:z,type:d.FLOAT,size:4},{buffer:y,type:d.FLOAT,size:2},{buffer:A,type:d.FLOAT,size:4}]);t=new r(d,v,t,q,w,A,B,z,y,C,h.traceType||"cone");t.update(g);return t}},{colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,"gl-shader":312,"gl-texture2d":327,"gl-vao":332,ndarray:469}],261:[function(b,D,G){var r=b("glslify");b=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * conePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(conePosition, 1.0);\n  vec4 t_position  \x3d view * conePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d conePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
D=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var n=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount \x3d 8.0;\n\n  float index \x3d rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment \x3d floor(0.001 + index/6.0);\n  float segmentIndex \x3d index - (segment*6.0);\n\n  normal \x3d -normalize(d);\n\n  if (segmentIndex \x3e 2.99 \x26\x26 segmentIndex \x3c 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle \x3d (\n    (segmentIndex \x3e 0.99 \x26\x26  segmentIndex \x3c 1.01) ||\n    (segmentIndex \x3e 4.99 \x26\x26  segmentIndex \x3c 5.01)\n  ) ? 1.0 : 0.0;\n  float angle \x3d 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 \x3d mix(d, vec3(0.0), coneOffset);\n  vec3 v2 \x3d v1 - d;\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d)*0.25;\n  vec3 y \x3d v * sin(angle) * length(d)*0.25;\n  vec3 v3 \x3d v2 + x + y;\n  if (segmentIndex \x3c 3.0) {\n    vec3 tx \x3d u * sin(angle);\n    vec3 ty \x3d v * -cos(angle);\n    vec3 tangent \x3d tx + ty;\n    normal \x3d normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex \x3d\x3d 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position \x3d projection * view * conePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
r=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
G.meshShader={vertex:b,fragment:D,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]};G.pickShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:413}],262:[function(b,D,G){D.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",
516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",
2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",
3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",
6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",
32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",
32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",
33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34E3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",
34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",
34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",
35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",
35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",
36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",
36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",
37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],263:[function(b,D,G){var r=b("./1.0/numbers");D.exports=function(n){return r[n]}},{"./1.0/numbers":262}],264:[function(b,D,G){function r(m,c,d,g){this.gl=m;this.shader=g;this.buffer=c;this.vao=d;this.pixelRatio=1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lineWidth=[1,1,1];this.capSize=[10,10,10];this.lineCount=
[0,0,0];this.lineOffset=[0,0,0];this.opacity=1;this.hasAlpha=!1}function n(m,c){for(var d=0;3>d;++d)m[0][d]=Math.min(m[0][d],c[d]),m[1][d]=Math.max(m[1][d],c[d])}function p(m,c,d,g){g=l[g];for(var h=0;h<g.length;++h){var q=g[h];m.push(c[0],c[1],c[2],d[0],d[1],d[2],d[3],q[0],q[1],q[2])}return g.length}D.exports=function(m){var c=m.gl,d=k(c),g=a(c,[{buffer:d,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:d,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:d,type:c.FLOAT,size:3,offset:28,stride:40}]),
h=e(c);h.attributes.position.location=0;h.attributes.color.location=1;h.attributes.offset.location=2;c=new r(c,d,g,h);c.update(m);return c};var k=b("gl-buffer"),a=b("gl-vao"),e=b("./shaders/index"),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=r.prototype;b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.drawTransparent=b.draw=function(m){var c=this.gl,d=this.shader.uniforms;this.shader.bind();var g=d.view=m.view||f,h=d.projection=m.projection||f;d.model=m.model||
f;d.clipBounds=this.clipBounds;d.opacity=this.opacity;m=(m._ortho?2:1)*this.pixelRatio*(h[3]*g[12]+h[7]*g[13]+h[11]*g[14]+h[15]*g[15])/c.drawingBufferHeight;this.vao.bind();for(g=0;3>g;++g)c.lineWidth(this.lineWidth[g]*this.pixelRatio),d.capSize=this.capSize[g]*m,this.lineCount[g]&&c.drawArrays(c.LINES,this.lineOffset[g],this.lineCount[g]);this.vao.unbind()};var l=function(){for(var m=Array(3),c=0;3>c;++c){for(var d=[],g=1;2>=g;++g)for(var h=-1;1>=h;h+=2){var q=[0,0,0];q[(g+c)%3]=h;d.push(q)}m[c]=
d}return m}();b.update=function(m){m=m||{};"lineWidth"in m&&(this.lineWidth=m.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth]));"capSize"in m&&(this.capSize=m.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize]));this.hasAlpha=!1;"opacity"in m&&(this.opacity=+m.opacity,1>this.opacity&&(this.hasAlpha=!0));var c=m.color||[[0,0,0],[0,0,0],[0,0,0]],d=m.position;m=m.error;Array.isArray(c[0])||(c=[c,c,c]);if(d&&
m){var g=[],h=d.length,q=0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.lineCount=[0,0,0];for(var t=0;3>t;++t){this.lineOffset[t]=q;var v=0;a:for(;v<h;++v){for(var w=d[v],A=0;3>A;++A)if(isNaN(w[A])||!isFinite(w[A]))continue a;A=m[v];var z=c[t];Array.isArray(z[0])&&(z=c[v]);3===z.length?z=[z[0],z[1],z[2],1]:4===z.length&&(z=[z[0],z[1],z[2],z[3]],!this.hasAlpha&&1>z[3]&&(this.hasAlpha=!0));if(!isNaN(A[0][t])&&!isNaN(A[1][t])){if(0>A[0][t]){var y=w.slice();y[t]+=A[0][t];
g.push(w[0],w[1],w[2],z[0],z[1],z[2],z[3],0,0,0,y[0],y[1],y[2],z[0],z[1],z[2],z[3],0,0,0);n(this.bounds,y);q+=2+p(g,y,z,t)}0<A[1][t]&&(y=w.slice(),y[t]+=A[1][t],g.push(w[0],w[1],w[2],z[0],z[1],z[2],z[3],0,0,0,y[0],y[1],y[2],z[0],z[1],z[2],z[3],0,0,0),n(this.bounds,y),q+=2+p(g,y,z,t))}}this.lineCount[t]=q-this.lineOffset[t]}this.buffer.update(g)}};b.dispose=function(){this.shader.dispose();this.buffer.dispose();this.vao.dispose()}},{"./shaders/index":265,"gl-buffer":258,"gl-vao":332}],265:[function(b,
D,G){G=b("glslify");var r=b("gl-shader"),n=G(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  \x3d model * vec4(position, 1.0);\n  worldPosition       \x3d (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         \x3d projection * view * worldPosition;\n  fragColor           \x3d color;\n  fragPosition        \x3d position;\n}"]),
p=G(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  gl_FragColor \x3d opacity * fragColor;\n}"]);
D.exports=function(k){return r(k,n,p,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":312,glslify:413}],266:[function(b,D,G){function r(t){var v=t.getParameter(t.FRAMEBUFFER_BINDING),w=t.getParameter(t.RENDERBUFFER_BINDING);t=t.getParameter(t.TEXTURE_BINDING_2D);return[v,w,t]}function n(t,v){t.bindFramebuffer(t.FRAMEBUFFER,v[0]);t.bindRenderbuffer(t.RENDERBUFFER,v[1]);t.bindTexture(t.TEXTURE_2D,v[2])}function p(t){switch(t){case d:throw Error("gl-fbo: Framebuffer unsupported");
case g:throw Error("gl-fbo: Framebuffer incomplete attachment");case h:throw Error("gl-fbo: Framebuffer incomplete dimensions");case q:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason");}}function k(t,v,w,A,z,y){if(!A)return null;v=m(t,v,w,z,A);v.magFilter=t.NEAREST;v.minFilter=t.NEAREST;v.mipSamples=1;v.bind();t.framebufferTexture2D(t.FRAMEBUFFER,y,t.TEXTURE_2D,v.handle,0);return v}function a(t,v,w,A,z){var y=
t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,y);t.renderbufferStorage(t.RENDERBUFFER,A,v,w);t.framebufferRenderbuffer(t.FRAMEBUFFER,z,t.RENDERBUFFER,y);return y}function e(t){var v=r(t.gl),w=t.gl,A=t.handle=w.createFramebuffer(),z=t._shape[0],y=t._shape[1],B=t.color.length,C=t._ext,u=t._useStencil,F=t._useDepth,H=t._colorType;w.bindFramebuffer(w.FRAMEBUFFER,A);for(A=0;A<B;++A)t.color[A]=k(w,z,y,H,w.RGBA,w.COLOR_ATTACHMENT0+A);0===B?(t._color_rb=a(w,z,y,w.RGBA4,w.COLOR_ATTACHMENT0),C&&
C.drawBuffersWEBGL(c[0])):1<B&&C.drawBuffersWEBGL(c[B]);(B=w.getExtension("WEBGL_depth_texture"))?u?t.depth=k(w,z,y,B.UNSIGNED_INT_24_8_WEBGL,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):F&&(t.depth=k(w,z,y,w.UNSIGNED_SHORT,w.DEPTH_COMPONENT,w.DEPTH_ATTACHMENT)):F&&u?t._depth_rb=a(w,z,y,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):F?t._depth_rb=a(w,z,y,w.DEPTH_COMPONENT16,w.DEPTH_ATTACHMENT):u&&(t._depth_rb=a(w,z,y,w.STENCIL_INDEX,w.STENCIL_ATTACHMENT));z=w.checkFramebufferStatus(w.FRAMEBUFFER);if(z!==
w.FRAMEBUFFER_COMPLETE){t._destroyed=!0;w.bindFramebuffer(w.FRAMEBUFFER,null);w.deleteFramebuffer(t.handle);t.handle=null;t.depth&&(t.depth.dispose(),t.depth=null);t._depth_rb&&(w.deleteRenderbuffer(t._depth_rb),t._depth_rb=null);for(A=0;A<t.color.length;++A)t.color[A].dispose(),t.color[A]=null;t._color_rb&&(w.deleteRenderbuffer(t._color_rb),t._color_rb=null);n(w,v);p(z)}n(w,v)}function f(t,v,w,A,z,y,B,C){this.gl=t;this._shape=[v|0,w|0];this._destroyed=!1;this._ext=C;this.color=Array(z);for(t=0;t<
z;++t)this.color[t]=null;this._depth_rb=this.depth=this._color_rb=null;this._colorType=A;this._useDepth=y;this._useStencil=B;var u=this;v=[v|0,w|0];Object.defineProperties(v,{0:{get:function(){return u._shape[0]},set:function(F){return u.width=F}},1:{get:function(){return u._shape[1]},set:function(F){return u.height=F}}});this._shapeVector=v;e(this)}function l(t,v,w){if(t._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==v||t._shape[1]!==w){var A=t.gl,z=A.getParameter(A.MAX_RENDERBUFFER_SIZE);
if(0>v||v>z||0>w||w>z)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=v;t._shape[1]=w;v=r(A);for(w=0;w<t.color.length;++w)t.color[w].shape=t._shape;t._color_rb&&(A.bindRenderbuffer(A.RENDERBUFFER,t._color_rb),A.renderbufferStorage(A.RENDERBUFFER,A.RGBA4,t._shape[0],t._shape[1]));t.depth&&(t.depth.shape=t._shape);t._depth_rb&&(A.bindRenderbuffer(A.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,t._shape[0],t._shape[1]):
t._useDepth?A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&A.renderbufferStorage(A.RENDERBUFFER,A.STENCIL_INDEX,t._shape[0],t._shape[1]));A.bindFramebuffer(A.FRAMEBUFFER,t.handle);w=A.checkFramebufferStatus(A.FRAMEBUFFER);w!==A.FRAMEBUFFER_COMPLETE&&(t.dispose(),n(A,v),p(w));n(A,v)}}var m=b("gl-texture2d");D.exports=function(t,v,w,A){d||(d=t.FRAMEBUFFER_UNSUPPORTED,g=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,h=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,q=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);
var z=t.getExtension("WEBGL_draw_buffers");if(!c&&z){var y=t.getParameter(z.MAX_COLOR_ATTACHMENTS_WEBGL);c=Array(y+1);for(var B=0;B<=y;++B){for(var C=Array(y),u=0;u<B;++u)C[u]=t.COLOR_ATTACHMENT0+u;for(u=B;u<y;++u)C[u]=t.NONE;c[B]=C}}Array.isArray(v)&&(A=w,w=v[1]|0,v=v[0]|0);if("number"!==typeof v)throw Error("gl-fbo: Missing shape parameter");y=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(0>v||v>y||0>w||w>y)throw Error("gl-fbo: Parameters are too large for FBO");A=A||{};y=1;if("color"in A){y=Math.max(A.color|
0,0);if(0>y)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(1<y){if(!z)throw Error("gl-fbo: Multiple draw buffer extension not supported");if(y>t.getParameter(z.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+y+" draw buffers");}}B=t.UNSIGNED_BYTE;C=t.getExtension("OES_texture_float");if(A.float&&0<y){if(!C)throw Error("gl-fbo: Context does not support floating point textures");B=t.FLOAT}else A.preferFloat&&0<y&&C&&(B=t.FLOAT);C=!0;"depth"in A&&(C=
!!A.depth);u=!1;"stencil"in A&&(u=!!A.stencil);return new f(t,v,w,B,y,C,u,z)};var c=null,d,g,h,q;b=f.prototype;Object.defineProperties(b,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){Array.isArray(t)||(t=[t|0,t|0]);if(2!==t.length)throw Error("gl-fbo: Shape vector must be length 2");var v=t[0]|0;t=t[1]|0;l(this,v,t);return[v,t]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){t|=0;l(this,t,this._shape[1]);return t},
enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){t|=0;l(this,this._shape[0],t);return t},enumerable:!1}});b.bind=function(){if(!this._destroyed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.handle);t.viewport(0,0,this._shape[0],this._shape[1])}};b.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle);this.handle=null;this.depth&&(this.depth.dispose(),this.depth=null);this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),
this._depth_rb=null);for(var v=0;v<this.color.length;++v)this.color[v].dispose(),this.color[v]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":327}],267:[function(b,D,G){var r=b("sprintf-js").sprintf,n=b("gl-constants/lookup"),p=b("glsl-shader-name"),k=b("add-line-numbers");D.exports=function(a,e,f){var l=p(e)||"of unknown name (see npm glsl-shader-name)",m="unknown type";void 0!==f&&(m=f===n.FRAGMENT_SHADER?"fragment":"vertex");f=r("Error compiling %s shader %s:\n",
m,l);l=r("%s%s",f,a);var c=a.split("\n");a={};for(m=0;m<c.length;m++){var d=c[m];if(""!==d&&"\x00"!==d){var g=parseInt(d.split(":")[2]);if(isNaN(g))throw Error(r("Could not parse error: %s",d));a[g]=d}}e=k(e).split("\n");for(m=0;m<e.length;m++)if(a[m+3]||a[m+2]||a[m+1])f+=e[m]+"\n",a[m+1]&&(c=a[m+1],c=c.substr(c.split(":",3).join(":").length+1).trim(),f+=r("^^^ %s\n\n",c));return{long:f.trim(),short:l.trim()}}},{"add-line-numbers":66,"gl-constants/lookup":263,"glsl-shader-name":405,"sprintf-js":539}],
268:[function(b,D,G){function r(m,c,d,g,h,q,t){this.plot=m;this.shader=c;this.pickShader=d;this.positionBuffer=g;this.weightBuffer=h;this.colorBuffer=q;this.idBuffer=t;this.xData=[];this.yData=[];this.shape=[0,0];this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.pickOffset=0}D.exports=function(m,c){var d=m.gl,g=a(d,f.vertex,f.fragment),h=a(d,f.pickVertex,f.pickFragment),q=e(d),t=e(d),v=e(d);d=e(d);g=new r(m,g,h,q,t,v,d);g.update(c);m.addObject(g);return g};var n=b("binary-search-bounds"),p=
b("iota-array"),k=b("typedarray-pool"),a=b("gl-shader"),e=b("gl-buffer"),f=b("./lib/shaders");b=r.prototype;var l=[0,0,1,0,0,1,1,0,1,1,0,1];b.draw=function(){var m=[1,0,0,0,1,0,0,0,1];return function(){var c=this.plot,d=this.shader,g=this.bounds,h=this.numVertices;if(!(0>=h)){var q=c.gl;c=c.dataBox;var t=g[3]-g[1],v=c[2]-c[0],w=c[3]-c[1];m[0]=2*(g[2]-g[0])/v;m[4]=2*t/w;m[6]=2*(g[0]-c[0])/v-1;m[7]=2*(g[1]-c[1])/w-1;d.bind();g=d.uniforms;g.viewTransform=m;g.shape=this.shape;d=d.attributes;this.positionBuffer.bind();
d.position.pointer();this.weightBuffer.bind();d.weight.pointer(q.UNSIGNED_BYTE,!1);this.colorBuffer.bind();d.color.pointer(q.UNSIGNED_BYTE,!0);q.drawArrays(q.TRIANGLES,0,h)}}}();b.drawPick=function(){var m=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(d){var g=this.plot,h=this.pickShader,q=this.bounds,t=this.numVertices;if(!(0>=t)){var v=g.gl;g=g.dataBox;var w=q[3]-q[1],A=g[2]-g[0],z=g[3]-g[1];m[0]=2*(q[2]-q[0])/A;m[4]=2*w/z;m[6]=2*(q[0]-g[0])/A-1;m[7]=2*(q[1]-g[1])/z-1;for(q=0;4>q;++q)c[q]=d>>
8*q&255;this.pickOffset=d;h.bind();q=h.uniforms;q.viewTransform=m;q.pickOffset=c;q.shape=this.shape;h=h.attributes;this.positionBuffer.bind();h.position.pointer();this.weightBuffer.bind();h.weight.pointer(v.UNSIGNED_BYTE,!1);this.idBuffer.bind();h.pickId.pointer(v.UNSIGNED_BYTE,!1);v.drawArrays(v.TRIANGLES,0,t);return d+this.shape[0]*this.shape[1]}}}();b.pick=function(m,c,d){m=this.pickOffset;c=this.shape[0]*this.shape[1];if(d<m||d>=m+c)return null;d-=m;return{object:this,pointId:d,dataCoord:[this.xData[d%
this.shape[0]],this.yData[d/this.shape[0]|0]]}};b.update=function(m){m=m||{};var c=m.shape||[0,0],d=m.x||p(c[0]),g=m.y||p(c[1]),h=m.z||new Float32Array(c[0]*c[1]),q=!1!==m.zsmooth;this.xData=d;this.yData=g;var t=m.colorLevels||[0];m=m.colorValues||[0,0,0,1];var v=t.length,w=this.bounds;if(q){var A=w[0]=d[0];var z=w[1]=g[0];var y=w[2]=d[d.length-1];w=w[3]=g[g.length-1]}else A=w[0]=d[0]+(d[1]-d[0])/2,z=w[1]=g[0]+(g[1]-g[0])/2,y=w[2]=d[d.length-1]+(d[d.length-1]-d[d.length-2])/2,w=w[3]=g[g.length-1]+
(g[g.length-1]-g[g.length-2])/2;y=1/(y-A);w=1/(w-z);var B=c[0];c=c[1];this.shape=[B,c];var C=(q?(B-1)*(c-1):B*c)*(l.length>>>1);this.numVertices=C;var u=k.mallocUint8(4*C),F=k.mallocFloat32(2*C),H=k.mallocUint8(2*C);C=k.mallocUint32(C);for(var J=0,I=q?B-1:B,M=q?c-1:c,E=0;E<M;++E){if(q){var L=w*(g[E]-z);var P=w*(g[E+1]-z)}else L=E<c-1?w*(g[E]-(g[E+1]-g[E])/2-z):w*(g[E]-(g[E]-g[E-1])/2-z),P=E<c-1?w*(g[E]+(g[E+1]-g[E])/2-z):w*(g[E]+(g[E]-g[E-1])/2-z);for(var N=0;N<I;++N){if(q){var Q=y*(d[N]-A);var O=
y*(d[N+1]-A)}else Q=N<B-1?y*(d[N]-(d[N+1]-d[N])/2-A):y*(d[N]-(d[N]-d[N-1])/2-A),O=N<B-1?y*(d[N]+(d[N+1]-d[N])/2-A):y*(d[N]+(d[N]-d[N-1])/2-A);for(var T=0;T<l.length;T+=2){var V=l[T],Z=l[T+1],aa=h[q?(E+Z)*B+(N+V):E*B+N],Y=n.le(t,aa);if(0>Y){Y=m[0];aa=m[1];var ea=m[2];var ca=m[3]}else if(Y===v-1)Y=m[4*v-4],aa=m[4*v-3],ea=m[4*v-2],ca=m[4*v-1];else{ca=(aa-t[Y])/(t[Y+1]-t[Y]);var ba=1-ca,ka=4*Y,qa=4*(Y+1);Y=ba*m[ka]+ca*m[qa];aa=ba*m[ka+1]+ca*m[qa+1];ea=ba*m[ka+2]+ca*m[qa+2];ca=ba*m[ka+3]+ca*m[qa+3]}u[4*
J]=255*Y;u[4*J+1]=255*aa;u[4*J+2]=255*ea;u[4*J+3]=255*ca;F[2*J]=.5*Q+.5*O;F[2*J+1]=.5*L+.5*P;H[2*J]=V;H[2*J+1]=Z;C[J]=E*B+N;J+=1}}}this.positionBuffer.update(F);this.weightBuffer.update(H);this.colorBuffer.update(u);this.idBuffer.update(C);k.free(F);k.free(u);k.free(H);k.free(C)};b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.positionBuffer.dispose();this.weightBuffer.dispose();this.colorBuffer.dispose();this.idBuffer.dispose();this.plot.removeObject(this)}},{"./lib/shaders":269,
"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312,"iota-array":437,"typedarray-pool":567}],269:[function(b,D,G){b=b("glslify");D.exports={fragment:b(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor \x3d vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor \x3d color;\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),
pickFragment:b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d \x3d step(.5, vWeight);\n  vec4 id \x3d fragId + pickOffset;\n  id.x +\x3d d.x + d.y*shape.x;\n\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor \x3d id/255.;\n}\n"]),
pickVertex:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight \x3d weight;\n\n  fragId \x3d pickId;\n\n  vec3 vPosition \x3d viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position \x3d vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:413}],270:[function(b,D,G){D=b("glslify");
var r=b("gl-shader"),n=D(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint \x3d project(position);\n  vec4 endPoint   \x3d project(nextPosition);\n\n  vec2 A \x3d startPoint.xy / startPoint.w;\n  vec2 B \x3d   endPoint.xy /   endPoint.w;\n\n  float clipAngle \x3d atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset \x3d 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position \x3d vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition \x3d position;\n  pixelArcLength \x3d arcLength;\n  fragColor \x3d color;\n}\n"]),
p=D(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity \x3d\x3d 0.\n  ) discard;\n\n  float dashWeight \x3d texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight \x3c 0.5) {\n    discard;\n  }\n  gl_FragColor \x3d fragColor * opacity;\n}\n"]),
k=D(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av \x3d abs(v);\n\n  //Handle special cases\n  if(av \x3c FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v \x3e FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v \x3c -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c \x3d vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e \x3d floor(log2(av));\n  float m \x3d av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] \x3d floor(128.0 * m);\n  m -\x3d c[1] / 128.0;\n  c[2] \x3d floor(32768.0 * m);\n  m -\x3d c[2] / 32768.0;\n  c[3] \x3d floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias \x3d e + 127.0;\n  c[0] \x3d floor(ebias / 2.0);\n  ebias -\x3d c[0] * 2.0;\n  c[1] +\x3d floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] +\x3d 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor \x3d vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),
a=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];G.createShader=function(e){return r(e,n,p,null,a)};G.createPickShader=function(e){return r(e,n,k,null,a)}},{"gl-shader":312,glslify:413}],271:[function(b,D,G){function r(q){for(var t=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],v=0;3>v;++v)t[0][v]=Math.max(q[0][v],t[0][v]),t[1][v]=Math.min(q[1][v],t[1][v]);return t}function n(q,t,v,w){this.arcLength=q;
this.position=t;this.index=v;this.dataCoordinate=w}function p(q,t,v,w,A,z){this.gl=q;this.shader=t;this.pickShader=v;this.buffer=w;this.vao=A;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.points=[];this.arcLength=[];this.vertexCount=0;this.bounds=[[0,0,0],[0,0,0]];this.pickId=0;this.lineWidth=1;this.texture=z;this.opacity=this.dashScale=1;this.hasAlpha=!1;this.dirty=!0;this.pixelRatio=1}D.exports=function(q){var t=q.gl||q.scene&&q.scene.gl,v=d(t);v.attributes.position.location=
0;v.attributes.nextPosition.location=1;v.attributes.arcLength.location=2;v.attributes.lineWidth.location=3;v.attributes.color.location=4;var w=g(t);w.attributes.position.location=0;w.attributes.nextPosition.location=1;w.attributes.arcLength.location=2;w.attributes.lineWidth.location=3;w.attributes.color.location=4;for(var A=k(t),z=a(t,[{buffer:A,size:3,offset:0,stride:48},{buffer:A,size:3,offset:12,stride:48},{buffer:A,size:1,offset:24,stride:48},{buffer:A,size:1,offset:28,stride:48},{buffer:A,size:4,
offset:32,stride:48}]),y=c(Array(1024),[256,1,4]),B=0;1024>B;++B)y.data[B]=255;y=e(t,y);y.wrap=t.REPEAT;t=new p(t,v,w,A,z,y);t.update(q);return t};var k=b("gl-buffer"),a=b("gl-vao"),e=b("gl-texture2d"),f=new Uint8Array(4),l=new Float32Array(f.buffer),m=b("binary-search-bounds"),c=b("ndarray");b=b("./lib/shaders");var d=b.createShader,g=b.createPickShader,h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=p.prototype;b.isTransparent=function(){return this.hasAlpha};b.isOpaque=function(){return!this.hasAlpha};b.pickSlots=
1;b.setPickBase=function(q){this.pickId=q};b.drawTransparent=b.draw=function(q){if(this.vertexCount){var t=this.gl,v=this.shader,w=this.vao;v.bind();v.uniforms={model:q.model||h,view:q.view||h,projection:q.projection||h,clipBounds:r(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio};w.bind();w.draw(t.TRIANGLE_STRIP,this.vertexCount);
w.unbind()}};b.drawPick=function(q){if(this.vertexCount){var t=this.gl,v=this.pickShader,w=this.vao;v.bind();v.uniforms={model:q.model||h,view:q.view||h,projection:q.projection||h,pickId:this.pickId,clipBounds:r(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio};w.bind();w.draw(t.TRIANGLE_STRIP,this.vertexCount);w.unbind()}};b.update=function(q){var t;this.dirty=!0;var v=!!q.connectGaps;"dashScale"in q&&(this.dashScale=q.dashScale);this.hasAlpha=
!1;"opacity"in q&&(this.opacity=+q.opacity,1>this.opacity&&(this.hasAlpha=!0));var w=[],A=[],z=[],y=0,B=0,C=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],u=q.position||q.positions;if(u){var F=q.color||q.colors||[0,0,0,1],H=q.lineWidth||1,J=!1;var I=1;a:for(;I<u.length;++I){var M=u[I-1],E=u[I];A.push(y);z.push(M.slice());for(t=0;3>t;++t){if(isNaN(M[t])||isNaN(E[t])||!isFinite(M[t])||!isFinite(E[t])){if(!v&&0<w.length){for(J=0;24>J;++J)w.push(w[w.length-12]);B+=2;J=!0}continue a}C[0][t]=
Math.min(C[0][t],M[t],E[t]);C[1][t]=Math.max(C[1][t],M[t],E[t])}if(Array.isArray(F[0])){var L=F.length>I-1?F[I-1]:0<F.length?F[F.length-1]:[0,0,0,1];var P=F.length>I?F[I]:0<F.length?F[F.length-1]:[0,0,0,1]}else L=P=F;3===L.length&&(L=[L[0],L[1],L[2],1]);3===P.length&&(P=[P[0],P[1],P[2],1]);!this.hasAlpha&&1>L[3]&&(this.hasAlpha=!0);var N=Array.isArray(H)?H.length>I-1?H[I-1]:0<H.length?H[H.length-1]:[0,0,0,1]:H;var Q=y;t=y;for(var O=y=0;3>O;++O){var T=M[O]-E[O];y+=T*T}y=t+Math.sqrt(y);if(J){for(t=
0;2>t;++t)w.push(M[0],M[1],M[2],E[0],E[1],E[2],Q,N,L[0],L[1],L[2],L[3]);B+=2;J=!1}w.push(M[0],M[1],M[2],E[0],E[1],E[2],Q,N,L[0],L[1],L[2],L[3],M[0],M[1],M[2],E[0],E[1],E[2],Q,-N,L[0],L[1],L[2],L[3],E[0],E[1],E[2],M[0],M[1],M[2],y,-N,P[0],P[1],P[2],P[3],E[0],E[1],E[2],M[0],M[1],M[2],y,N,P[0],P[1],P[2],P[3]);B+=4}}this.buffer.update(w);A.push(y);z.push(u[u.length-1].slice());this.bounds=C;this.vertexCount=B;this.points=z;this.arcLength=A;if("dashes"in q){q=q.dashes.slice();q.unshift(0);for(I=1;I<q.length;++I)q[I]=
q[I-1]+q[I];v=c(Array(1024),[256,1,4]);for(I=0;256>I;++I){for(t=0;4>t;++t)v.set(I,0,t,0);m.le(q,q[q.length-1]*I/255)&1?v.set(I,0,0,0):v.set(I,0,0,255)}this.texture.setPixels(v)}};b.dispose=function(){this.shader.dispose();this.vao.dispose();this.buffer.dispose()};b.pick=function(q){if(!q||q.id!==this.pickId)return null;var t=q.value[0];var v=q.value[1];q=q.value[2];f[0]=0;f[1]=q;f[2]=v;f[3]=t;t=l[0];q=m.le(this.arcLength,t);if(0>q)return null;if(q===this.arcLength.length-1)return new n(this.arcLength[this.arcLength.length-
1],this.points[this.points.length-1].slice(),q);var w=this.points[q],A=this.points[Math.min(q+1,this.points.length-1)],z=(t-this.arcLength[q])/(this.arcLength[q+1]-this.arcLength[q]),y=1-z;v=[0,0,0];for(var B=0;3>B;++B)v[B]=y*w[B]+z*A[B];q=Math.min(.5>z?q:q+1,this.points.length-1);return new n(t,v,q,this.points[q])}},{"./lib/shaders":270,"binary-search-bounds":96,"gl-buffer":258,"gl-texture2d":327,"gl-vao":332,ndarray:469}],272:[function(b,D,G){D.exports=function(r){var n=new Float32Array(16);n[0]=
r[0];n[1]=r[1];n[2]=r[2];n[3]=r[3];n[4]=r[4];n[5]=r[5];n[6]=r[6];n[7]=r[7];n[8]=r[8];n[9]=r[9];n[10]=r[10];n[11]=r[11];n[12]=r[12];n[13]=r[13];n[14]=r[14];n[15]=r[15];return n}},{}],273:[function(b,D,G){D.exports=function(){var r=new Float32Array(16);r[0]=1;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=1;r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[10]=1;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return r}},{}],274:[function(b,D,G){D.exports=function(r){var n=r[0],p=r[1],k=r[2],a=r[3],e=r[4],f=r[5],l=r[6],m=r[7],c=r[8],d=r[9],
g=r[10],h=r[11],q=r[12],t=r[13],v=r[14];r=r[15];return(n*f-p*e)*(g*r-h*v)-(n*l-k*e)*(d*r-h*t)+(n*m-a*e)*(d*v-g*t)+(p*l-k*f)*(c*r-h*q)-(p*m-a*f)*(c*v-g*q)+(k*m-a*l)*(c*t-d*q)}},{}],275:[function(b,D,G){D.exports=function(r,n){var p=n[0],k=n[1],a=n[2];n=n[3];var e=p+p,f=k+k,l=a+a;p*=e;var m=k*e;k*=f;var c=a*e,d=a*f;a*=l;e*=n;f*=n;n*=l;r[0]=1-k-a;r[1]=m+n;r[2]=c-f;r[3]=0;r[4]=m-n;r[5]=1-p-a;r[6]=d+e;r[7]=0;r[8]=c+f;r[9]=d-e;r[10]=1-p-k;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return r}},{}],276:[function(b,
D,G){D.exports=function(r,n,p){var k=n[0],a=n[1],e=n[2],f=n[3],l=k+k,m=a+a,c=e+e;n=k*l;var d=k*m;k*=c;var g=a*m;a*=c;e*=c;l*=f;m*=f;f*=c;r[0]=1-(g+e);r[1]=d+f;r[2]=k-m;r[3]=0;r[4]=d-f;r[5]=1-(n+e);r[6]=a+l;r[7]=0;r[8]=k+m;r[9]=a-l;r[10]=1-(n+g);r[11]=0;r[12]=p[0];r[13]=p[1];r[14]=p[2];r[15]=1;return r}},{}],277:[function(b,D,G){D.exports=function(r){r[0]=1;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=1;r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[10]=1;r[11]=0;r[12]=0;r[13]=0;r[14]=0;r[15]=1;return r}},{}],278:[function(b,
D,G){D.exports=function(r,n){var p=n[0],k=n[1],a=n[2],e=n[3],f=n[4],l=n[5],m=n[6],c=n[7],d=n[8],g=n[9],h=n[10],q=n[11],t=n[12],v=n[13],w=n[14];n=n[15];var A=p*l-k*f,z=p*m-a*f,y=p*c-e*f,B=k*m-a*l,C=k*c-e*l,u=a*c-e*m,F=d*v-g*t,H=d*w-h*t,J=d*n-q*t,I=g*w-h*v,M=g*n-q*v,E=h*n-q*w,L=A*E-z*M+y*I+B*J-C*H+u*F;if(!L)return null;L=1/L;r[0]=(l*E-m*M+c*I)*L;r[1]=(a*M-k*E-e*I)*L;r[2]=(v*u-w*C+n*B)*L;r[3]=(h*C-g*u-q*B)*L;r[4]=(m*J-f*E-c*H)*L;r[5]=(p*E-a*J+e*H)*L;r[6]=(w*y-t*u-n*z)*L;r[7]=(d*u-h*y+q*z)*L;r[8]=(f*
M-l*J+c*F)*L;r[9]=(k*J-p*M-e*F)*L;r[10]=(t*C-v*y+n*A)*L;r[11]=(g*y-d*C-q*A)*L;r[12]=(l*H-f*I-m*F)*L;r[13]=(p*I-k*H+a*F)*L;r[14]=(v*z-t*B-w*A)*L;r[15]=(d*B-g*z+h*A)*L;return r}},{}],279:[function(b,D,G){var r=b("./identity");D.exports=function(n,p,k,a){var e=p[0],f=p[1];p=p[2];var l=a[0];var m=a[1];var c=a[2];var d=k[0];a=k[1];var g=k[2];if(1E-6>Math.abs(e-d)&&1E-6>Math.abs(f-a)&&1E-6>Math.abs(p-g))return r(n);k=e-d;a=f-a;d=p-g;var h=1/Math.sqrt(k*k+a*a+d*d);k*=h;a*=h;d*=h;g=m*d-c*a;c=c*k-l*d;l=l*
a-m*k;(h=Math.sqrt(g*g+c*c+l*l))?(h=1/h,g*=h,c*=h,l*=h):l=c=g=0;m=a*l-d*c;var q=d*g-k*l;var t=k*c-a*g;(h=Math.sqrt(m*m+q*q+t*t))?(h=1/h,m*=h,q*=h,t*=h):t=q=m=0;n[0]=g;n[1]=m;n[2]=k;n[3]=0;n[4]=c;n[5]=q;n[6]=a;n[7]=0;n[8]=l;n[9]=t;n[10]=d;n[11]=0;n[12]=-(g*e+c*f+l*p);n[13]=-(m*e+q*f+t*p);n[14]=-(k*e+a*f+d*p);n[15]=1;return n}},{"./identity":277}],280:[function(b,D,G){D.exports=function(r,n,p){var k=n[0],a=n[1],e=n[2],f=n[3],l=n[4],m=n[5],c=n[6],d=n[7],g=n[8],h=n[9],q=n[10],t=n[11],v=n[12],w=n[13],
A=n[14];n=n[15];var z=p[0],y=p[1],B=p[2],C=p[3];r[0]=z*k+y*l+B*g+C*v;r[1]=z*a+y*m+B*h+C*w;r[2]=z*e+y*c+B*q+C*A;r[3]=z*f+y*d+B*t+C*n;z=p[4];y=p[5];B=p[6];C=p[7];r[4]=z*k+y*l+B*g+C*v;r[5]=z*a+y*m+B*h+C*w;r[6]=z*e+y*c+B*q+C*A;r[7]=z*f+y*d+B*t+C*n;z=p[8];y=p[9];B=p[10];C=p[11];r[8]=z*k+y*l+B*g+C*v;r[9]=z*a+y*m+B*h+C*w;r[10]=z*e+y*c+B*q+C*A;r[11]=z*f+y*d+B*t+C*n;z=p[12];y=p[13];B=p[14];C=p[15];r[12]=z*k+y*l+B*g+C*v;r[13]=z*a+y*m+B*h+C*w;r[14]=z*e+y*c+B*q+C*A;r[15]=z*f+y*d+B*t+C*n;return r}},{}],281:[function(b,
D,G){D.exports=function(r,n,p,k,a,e,f){var l=1/(n-p),m=1/(k-a),c=1/(e-f);r[0]=-2*l;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=-2*m;r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[10]=2*c;r[11]=0;r[12]=(n+p)*l;r[13]=(a+k)*m;r[14]=(f+e)*c;r[15]=1;return r}},{}],282:[function(b,D,G){D.exports=function(r,n,p,k,a){n=1/Math.tan(n/2);var e=1/(k-a);r[0]=n/p;r[1]=0;r[2]=0;r[3]=0;r[4]=0;r[5]=n;r[6]=0;r[7]=0;r[8]=0;r[9]=0;r[10]=(a+k)*e;r[11]=-1;r[12]=0;r[13]=0;r[14]=2*a*k*e;r[15]=0;return r}},{}],283:[function(b,D,G){D.exports=function(r,
n,p,k){var a=k[0],e=k[1];k=k[2];var f=Math.sqrt(a*a+e*e+k*k);if(1E-6>Math.abs(f))return null;f=1/f;a*=f;e*=f;k*=f;var l=Math.sin(p);var m=Math.cos(p);var c=1-m;p=n[0];f=n[1];var d=n[2];var g=n[3];var h=n[4];var q=n[5];var t=n[6];var v=n[7];var w=n[8];var A=n[9];var z=n[10];var y=n[11];var B=a*a*c+m;var C=e*a*c+k*l;var u=k*a*c-e*l;var F=a*e*c-k*l;var H=e*e*c+m;var J=k*e*c+a*l;var I=a*k*c+e*l;a=e*k*c-a*l;e=k*k*c+m;r[0]=p*B+h*C+w*u;r[1]=f*B+q*C+A*u;r[2]=d*B+t*C+z*u;r[3]=g*B+v*C+y*u;r[4]=p*F+h*H+w*J;
r[5]=f*F+q*H+A*J;r[6]=d*F+t*H+z*J;r[7]=g*F+v*H+y*J;r[8]=p*I+h*a+w*e;r[9]=f*I+q*a+A*e;r[10]=d*I+t*a+z*e;r[11]=g*I+v*a+y*e;n!==r&&(r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]);return r}},{}],284:[function(b,D,G){D.exports=function(r,n,p){var k=Math.sin(p);p=Math.cos(p);var a=n[4],e=n[5],f=n[6],l=n[7],m=n[8],c=n[9],d=n[10],g=n[11];n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]);r[4]=a*p+m*k;r[5]=e*p+c*k;r[6]=f*p+d*k;r[7]=l*p+g*k;r[8]=m*p-a*k;r[9]=
c*p-e*k;r[10]=d*p-f*k;r[11]=g*p-l*k;return r}},{}],285:[function(b,D,G){D.exports=function(r,n,p){var k=Math.sin(p);p=Math.cos(p);var a=n[0],e=n[1],f=n[2],l=n[3],m=n[8],c=n[9],d=n[10],g=n[11];n!==r&&(r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]);r[0]=a*p-m*k;r[1]=e*p-c*k;r[2]=f*p-d*k;r[3]=l*p-g*k;r[8]=a*k+m*p;r[9]=e*k+c*p;r[10]=f*k+d*p;r[11]=l*k+g*p;return r}},{}],286:[function(b,D,G){D.exports=function(r,n,p){var k=Math.sin(p);p=Math.cos(p);var a=n[0],e=
n[1],f=n[2],l=n[3],m=n[4],c=n[5],d=n[6],g=n[7];n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]);r[0]=a*p+m*k;r[1]=e*p+c*k;r[2]=f*p+d*k;r[3]=l*p+g*k;r[4]=m*p-a*k;r[5]=c*p-e*k;r[6]=d*p-f*k;r[7]=g*p-l*k;return r}},{}],287:[function(b,D,G){D.exports=function(r,n,p){var k=p[0],a=p[1];p=p[2];r[0]=n[0]*k;r[1]=n[1]*k;r[2]=n[2]*k;r[3]=n[3]*k;r[4]=n[4]*a;r[5]=n[5]*a;r[6]=n[6]*a;r[7]=n[7]*a;r[8]=n[8]*p;r[9]=n[9]*p;r[10]=n[10]*p;r[11]=n[11]*p;r[12]=n[12];r[13]=
n[13];r[14]=n[14];r[15]=n[15];return r}},{}],288:[function(b,D,G){D.exports=function(r,n,p){var k=p[0],a=p[1];p=p[2];if(n===r)r[12]=n[0]*k+n[4]*a+n[8]*p+n[12],r[13]=n[1]*k+n[5]*a+n[9]*p+n[13],r[14]=n[2]*k+n[6]*a+n[10]*p+n[14],r[15]=n[3]*k+n[7]*a+n[11]*p+n[15];else{var e=n[0];var f=n[1];var l=n[2];var m=n[3];var c=n[4];var d=n[5];var g=n[6];var h=n[7];var q=n[8];var t=n[9];var v=n[10];var w=n[11];r[0]=e;r[1]=f;r[2]=l;r[3]=m;r[4]=c;r[5]=d;r[6]=g;r[7]=h;r[8]=q;r[9]=t;r[10]=v;r[11]=w;r[12]=e*k+c*a+q*
p+n[12];r[13]=f*k+d*a+t*p+n[13];r[14]=l*k+g*a+v*p+n[14];r[15]=m*k+h*a+w*p+n[15]}return r}},{}],289:[function(b,D,G){D.exports=function(r,n){if(r===n){var p=n[1],k=n[2],a=n[3],e=n[6],f=n[7],l=n[11];r[1]=n[4];r[2]=n[8];r[3]=n[12];r[4]=p;r[6]=n[9];r[7]=n[13];r[8]=k;r[9]=e;r[11]=n[14];r[12]=a;r[13]=f;r[14]=l}else r[0]=n[0],r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=n[1],r[5]=n[5],r[6]=n[9],r[7]=n[13],r[8]=n[2],r[9]=n[6],r[10]=n[10],r[11]=n[14],r[12]=n[3],r[13]=n[7],r[14]=n[11],r[15]=n[15];return r}},{}],290:[function(b,
D,G){function r(k,a){for(var e=[0,0,0,0],f=0;4>f;++f)for(var l=0;4>l;++l)e[l]+=k[4*f+l]*a[f];return e}var n=b("barycentric"),p=b("polytope-closest-point/lib/closest_point_2d.js");D.exports=function(k,a,e,f,l,m){if(1===k.length)return[0,k[0].slice()];for(var c=Array(k.length),d=0;d<k.length;++d){var g=d,h=k[d],q=m;h=r(l,r(f,r(e,[h[0],h[1],h[2],1])));for(var t=0;3>t;++t)h[t]/=h[3];c[g]=[.5*q[0]*(1+h[0]),.5*q[1]*(1-h[1])]}e=0;f=Infinity;for(d=0;d<c.length;++d){for(m=l=0;2>m;++m)l+=Math.pow(c[d][m]-a[m],
2);l<f&&(f=l,e=d)}if(2===c.length){for(l=f=d=0;2>l;++l)d+=Math.pow(a[l]-c[0][l],2),f+=Math.pow(a[l]-c[1][l],2);d=Math.sqrt(d);f=Math.sqrt(f);a=1E-6>d+f?[1,0]:[f/(d+f),d/(f+d)]}else 3===c.length?(d=[0,0],p(c[0],c[1],c[2],a,d),a=n(c,d)):a=[];for(d=c=0;3>d;++d){if(-.001>a[d]||1.0001<a[d])return null;c+=a[d]}if(.001<Math.abs(c-1))return null;c=[0,0,0];for(d=0;d<k.length;++d)for(f=k[d],l=a[d],m=0;3>m;++m)c[m]+=l*f[m];return[e,c,a]}},{barycentric:78,"polytope-closest-point/lib/closest_point_2d.js":499}],
291:[function(b,D,G){var r=b("glslify");b=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      \x3d project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * vec4(position , 1.0);\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal  \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          \x3d color;\n  f_data           \x3d position;\n  f_uv             \x3d uv;\n}\n"]);
D=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann \x3d require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular \x3d max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * f_color.a;\n}\n"]);
var n=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_color \x3d color;\n  f_data  \x3d position;\n  f_uv    \x3d uv;\n}"]),p=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),
k=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize \x3d pointSize;\n  f_color \x3d color;\n  f_uv \x3d uv;\n}"]),
a=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR \x3d gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) \x3e 0.25) {\n    discard;\n  }\n  gl_FragColor \x3d f_color * texture2D(texture, f_uv) * opacity;\n}"]),e=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n  f_id        \x3d id;\n  f_position  \x3d position;\n}"]),
f=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]),
l=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  \x3d projection * view * model * vec4(position, 1.0);\n    gl_PointSize \x3d pointSize;\n  }\n  f_id         \x3d id;\n  f_position   \x3d position;\n}"]),
m=r(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position \x3d projection * view * model * vec4(position, 1.0);\n}"]);r=r(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor \x3d vec4(contourColor, 1.0);\n}\n"]);G.meshShader={vertex:b,fragment:D,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};
G.wireShader={vertex:n,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]};G.pointShader={vertex:k,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]};G.pickShader={vertex:e,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]};G.pointPickShader={vertex:l,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},
{name:"id",type:"vec4"}]};G.contourShader={vertex:m,fragment:r,attributes:[{name:"position",type:"vec3"}]}},{glslify:413}],292:[function(b,D,G){function r(C,u,F,H,J,I,M,E,L,P,N,Q,O,T,V,Z,aa,Y,ea,ca,ba,ka,qa,pa,oa,ja,ra){this.gl=C;this.pixelRatio=1;this.cells=[];this.positions=[];this.intensity=[];this.texture=u;this.dirty=!0;this.triShader=F;this.lineShader=H;this.pointShader=J;this.pickShader=I;this.pointPickShader=M;this.contourShader=E;this.trianglePositions=L;this.triangleColors=N;this.triangleNormals=
O;this.triangleUVs=Q;this.triangleIds=P;this.triangleVAO=T;this.triangleCount=0;this.lineWidth=1;this.edgePositions=V;this.edgeColors=aa;this.edgeUVs=Y;this.edgeIds=Z;this.edgeVAO=ea;this.edgeCount=0;this.pointPositions=ca;this.pointColors=ka;this.pointUVs=qa;this.pointSizes=pa;this.pointIds=ba;this.pointVAO=oa;this.pointCount=0;this.contourLineWidth=1;this.contourPositions=ja;this.contourVAO=ra;this.contourCount=0;this.contourColor=[0,0,0];this.pickVertex=this.contourEnable=!0;this.pickId=1;this.bounds=
[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.lightPosition=[1E5,1E5,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.opacity=1;this.opacityscale=this.hasAlpha=!1;this._projection=this._view=this._model=B;this._resolution=[1,1]}function n(C,u){if(!u||!u.length)return 1;for(var F=0;F<u.length&&!(2>u.length);++F){if(u[F][0]===C)return u[F][1];if(u[F][0]>
C&&0<F)return C=(u[F][0]-C)/(u[F][0]-u[F-1][0]),u[F][1]*(1-C)+C*u[F-1][1]}return 1}var p=b("gl-shader"),k=b("gl-buffer"),a=b("gl-vao"),e=b("gl-texture2d"),f=b("normals"),l=b("gl-mat4/multiply"),m=b("gl-mat4/invert"),c=b("ndarray"),d=b("colormap"),g=b("simplicial-complex-contour"),h=b("typedarray-pool");G=b("./lib/shaders");var q=b("./lib/closest-point"),t=G.meshShader,v=G.wireShader,w=G.pointShader,A=G.pickShader,z=G.pointPickShader,y=G.contourShader,B=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=r.prototype;
b.isOpaque=function(){return!this.hasAlpha};b.isTransparent=function(){return this.hasAlpha};b.pickSlots=1;b.setPickBase=function(C){this.pickId=C};b.highlight=function(C){if(C&&this.contourEnable){var u=g(this.cells,this.intensity,C.intensity);C=u.cells;var F=u.vertexIds;u=u.vertexWeights;for(var H=C.length,J=h.mallocFloat32(6*H),I=0,M=0;M<H;++M)for(var E=C[M],L=0;2>L;++L){var P=E[0];2===E.length&&(P=E[L]);var N=u[P],Q=1-N,O=this.positions[F[P][0]];P=this.positions[F[P][1]];for(var T=0;3>T;++T)J[I++]=
N*O[T]+Q*P[T]}this.contourCount=I/3|0;this.contourPositions.update(J.subarray(0,I));h.free(J)}else this.contourCount=0};b.update=function(C){C=C||{};var u=this.gl;this.dirty=!0;"contourEnable"in C&&(this.contourEnable=C.contourEnable);"contourColor"in C&&(this.contourColor=C.contourColor);"lineWidth"in C&&(this.lineWidth=C.lineWidth);"lightPosition"in C&&(this.lightPosition=C.lightPosition);this.hasAlpha=!1;"opacity"in C&&(this.opacity=C.opacity,1>this.opacity&&(this.hasAlpha=!0));"opacityscale"in
C&&(this.opacityscale=C.opacityscale,this.hasAlpha=!0);"ambient"in C&&(this.ambientLight=C.ambient);"diffuse"in C&&(this.diffuseLight=C.diffuse);"specular"in C&&(this.specularLight=C.specular);"roughness"in C&&(this.roughness=C.roughness);"fresnel"in C&&(this.fresnel=C.fresnel);if(C.texture)this.texture.dispose(),this.texture=e(u,C.texture);else if(C.colormap){this.texture.shape=[256,256];this.texture.minFilter=u.LINEAR_MIPMAP_LINEAR;this.texture.magFilter=u.LINEAR;u=this.texture;var F=u.setPixels;
var H=this.opacityscale;for(var J=d({colormap:C.colormap,nshades:256,format:"rgba"}),I=new Uint8Array(1024),M=0;256>M;++M){for(var E=J[M],L=0;3>L;++L)I[4*M+L]=E[L];I[4*M+3]=H?255*n(M/255,H):255*E[3]}H=c(I,[256,256,4],[4,0,1]);F.call(u,H);this.texture.generateMipmap()}u=C.cells;if((F=C.positions)&&u){H=[];J=[];I=[];M=[];E=[];L=[];var P=[],N=[],Q=[],O=[],T=[],V=[],Z=[],aa=[];this.cells=u;this.positions=F;var Y=C.vertexNormals,ea=C.cellNormals,ca=void 0===C.vertexNormalsEpsilon?1E-6:C.vertexNormalsEpsilon,
ba=void 0===C.faceNormalsEpsilon?1E-6:C.faceNormalsEpsilon;C.useFacetNormals&&!ea&&(ea=f.faceNormals(u,F,ba));ea||Y||(Y=f.vertexNormals(u,F,ca));ca=C.vertexColors;ba=C.cellColors;var ka=C.meshColor||[1,1,1,1],qa=C.vertexUVs,pa=C.vertexIntensity,oa=C.cellUVs,ja=C.cellIntensity,ra=Infinity,ha=-Infinity;if(!qa&&!oa)if(pa)if(C.vertexIntensityBounds)ra=+C.vertexIntensityBounds[0],ha=+C.vertexIntensityBounds[1];else for(var la=0;la<pa.length;++la){var ua=pa[la];ra=Math.min(ra,ua);ha=Math.max(ha,ua)}else if(ja)if(C.cellIntensityBounds)ra=
+C.cellIntensityBounds[0],ha=+C.cellIntensityBounds[1];else for(la=0;la<ja.length;++la)ua=ja[la],ra=Math.min(ra,ua),ha=Math.max(ha,ua);else for(la=0;la<F.length;++la)ua=F[la][2],ra=Math.min(ra,ua),ha=Math.max(ha,ua);if(pa)this.intensity=pa;else if(ja)this.intensity=ja;else{la=F.length;ua=Array(la);for(var na=0;na<la;++na)ua[na]=F[na][2];this.intensity=ua}this.pickVertex=!(ja||ba);ua=C.pointSizes;C=C.pointSize||1;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(la=0;la<
F.length;++la){var wa=F[la];for(na=0;3>na;++na)!isNaN(wa[na])&&isFinite(wa[na])&&(this.bounds[0][na]=Math.min(this.bounds[0][na],wa[na]),this.bounds[1][na]=Math.max(this.bounds[1][na],wa[na]))}var Ca=0,Fa=0,Xa=0;la=0;a:for(;la<u.length;++la){var ab=u[la];switch(ab.length){case 1:var gb=ab[0];wa=F[gb];for(na=0;3>na;++na)if(isNaN(wa[na])||!isFinite(wa[na]))continue a;O.push(wa[0],wa[1],wa[2]);var bb=ca?ca[gb]:ba?ba[la]:ka;this.opacityscale&&pa?J.push(bb[0],bb[1],bb[2],this.opacity*n((pa[gb]-ra)/(ha-
ra),this.opacityscale)):3===bb.length?T.push(bb[0],bb[1],bb[2],this.opacity):(T.push(bb[0],bb[1],bb[2],bb[3]*this.opacity),1>bb[3]&&(this.hasAlpha=!0));wa=qa?qa[gb]:pa?[(pa[gb]-ra)/(ha-ra),0]:oa?oa[la]:ja?[(ja[la]-ra)/(ha-ra),0]:[(wa[2]-ra)/(ha-ra),0];V.push(wa[0],wa[1]);ua?Z.push(ua[gb]):Z.push(C);aa.push(la);Xa+=1;break;case 2:for(na=0;2>na;++na)for(gb=ab[na],wa=F[gb],gb=0;3>gb;++gb)if(isNaN(wa[gb])||!isFinite(wa[gb]))continue a;for(na=0;2>na;++na)gb=ab[na],wa=F[gb],L.push(wa[0],wa[1],wa[2]),bb=
ca?ca[gb]:ba?ba[la]:ka,this.opacityscale&&pa?J.push(bb[0],bb[1],bb[2],this.opacity*n((pa[gb]-ra)/(ha-ra),this.opacityscale)):3===bb.length?P.push(bb[0],bb[1],bb[2],this.opacity):(P.push(bb[0],bb[1],bb[2],bb[3]*this.opacity),1>bb[3]&&(this.hasAlpha=!0)),wa=qa?qa[gb]:pa?[(pa[gb]-ra)/(ha-ra),0]:oa?oa[la]:ja?[(ja[la]-ra)/(ha-ra),0]:[(wa[2]-ra)/(ha-ra),0],N.push(wa[0],wa[1]),Q.push(la);Fa+=1;break;case 3:for(na=0;3>na;++na)for(gb=ab[na],wa=F[gb],gb=0;3>gb;++gb)if(isNaN(wa[gb])||!isFinite(wa[gb]))continue a;
for(na=0;3>na;++na)gb=ab[2-na],wa=F[gb],H.push(wa[0],wa[1],wa[2]),(bb=ca?ca[gb]:ba?ba[la]:ka)?this.opacityscale&&pa?J.push(bb[0],bb[1],bb[2],this.opacity*n((pa[gb]-ra)/(ha-ra),this.opacityscale)):3===bb.length?J.push(bb[0],bb[1],bb[2],this.opacity):(J.push(bb[0],bb[1],bb[2],bb[3]*this.opacity),1>bb[3]&&(this.hasAlpha=!0)):J.push(.5,.5,.5,1),wa=qa?qa[gb]:pa?[(pa[gb]-ra)/(ha-ra),0]:oa?oa[la]:ja?[(ja[la]-ra)/(ha-ra),0]:[(wa[2]-ra)/(ha-ra),0],M.push(wa[0],wa[1]),wa=Y?Y[gb]:ea[la],I.push(wa[0],wa[1],wa[2]),
E.push(la);Ca+=1}}this.pointCount=Xa;this.edgeCount=Fa;this.triangleCount=Ca;this.pointPositions.update(O);this.pointColors.update(T);this.pointUVs.update(V);this.pointSizes.update(Z);this.pointIds.update(new Uint32Array(aa));this.edgePositions.update(L);this.edgeColors.update(P);this.edgeUVs.update(N);this.edgeIds.update(new Uint32Array(Q));this.trianglePositions.update(H);this.triangleColors.update(J);this.triangleUVs.update(M);this.triangleNormals.update(I);this.triangleIds.update(new Uint32Array(E))}};
b.drawTransparent=b.draw=function(C){C=C||{};var u=this.gl,F=C.model||B,H=C.view||B,J=C.projection||B,I=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]];for(C=0;3>C;++C)I[0][C]=Math.max(I[0][C],this.clipBounds[0][C]),I[1][C]=Math.min(I[1][C],this.clipBounds[1][C]);F={model:F,view:H,projection:J,inverseModel:B.slice(),clipBounds:I,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,
texture:0};F.inverseModel=m(F.inverseModel,F.model);u.disable(u.CULL_FACE);this.texture.bind(0);H=Array(16);l(H,F.view,F.model);l(H,F.projection,H);m(H,H);for(C=0;3>C;++C)F.eyePosition[C]=H[12+C]/H[15];J=H[15];for(C=0;3>C;++C)J+=this.lightPosition[C]*H[4*C+3];for(C=0;3>C;++C){I=H[12+C];for(var M=0;3>M;++M)I+=H[4*M+C]*this.lightPosition[M];F.lightPosition[C]=I/J}0<this.triangleCount&&(C=this.triShader,C.bind(),C.uniforms=F,this.triangleVAO.bind(),u.drawArrays(u.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());
0<this.edgeCount&&0<this.lineWidth&&(C=this.lineShader,C.bind(),C.uniforms=F,this.edgeVAO.bind(),u.lineWidth(this.lineWidth*this.pixelRatio),u.drawArrays(u.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(C=this.pointShader,C.bind(),C.uniforms=F,this.pointVAO.bind(),u.drawArrays(u.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&0<this.contourCount&&0<this.contourLineWidth&&(C=this.contourShader,C.bind(),C.uniforms=F,this.contourVAO.bind(),u.drawArrays(u.LINES,
0,this.contourCount),this.contourVAO.unbind())};b.drawPick=function(C){C=C||{};var u=this.gl,F=C.model||B,H=C.view||B;C=C.projection||B;for(var J=[[-1E6,-1E6,-1E6],[1E6,1E6,1E6]],I=0;3>I;++I)J[0][I]=Math.max(J[0][I],this.clipBounds[0][I]),J[1][I]=Math.min(J[1][I],this.clipBounds[1][I]);this._model=[].slice.call(F);this._view=[].slice.call(H);this._projection=[].slice.call(C);this._resolution=[u.drawingBufferWidth,u.drawingBufferHeight];F={model:F,view:H,projection:C,clipBounds:J,pickId:this.pickId/
255};H=this.pickShader;H.bind();H.uniforms=F;0<this.triangleCount&&(this.triangleVAO.bind(),u.drawArrays(u.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());0<this.edgeCount&&(this.edgeVAO.bind(),u.lineWidth(this.lineWidth*this.pixelRatio),u.drawArrays(u.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());0<this.pointCount&&(H=this.pointPickShader,H.bind(),H.uniforms=F,this.pointVAO.bind(),u.drawArrays(u.POINTS,0,this.pointCount),this.pointVAO.unbind())};b.pick=function(C){if(!C||C.id!==this.pickId)return null;
for(var u=C.value[0]+256*C.value[1]+65536*C.value[2],F=this.cells[u],H=this.positions,J=Array(F.length),I=0;I<F.length;++I)J[I]=H[F[I]];I=C.coord[0];C=C.coord[1];if(!this.pickVertex){J=this.positions[F[0]];H=this.positions[F[1]];var M=this.positions[F[2]];return{_cellCenter:!0,position:[I,C],index:u,cell:F,cellId:u,intensity:this.intensity[u],dataCoordinate:[(J[0]+H[0]+M[0])/3,(J[1]+H[1]+M[1])/3,(J[2]+H[2]+M[2])/3]}}J=q(J,[I*this.pixelRatio,this._resolution[1]-C*this.pixelRatio],this._model,this._view,
this._projection,this._resolution);if(!J)return null;C=J[2];for(I=H=0;I<F.length;++I)H+=C[I]*this.intensity[F[I]];return{position:J[1],index:F[J[0]],cell:F,cellId:u,intensity:H,dataCoordinate:this.positions[F[J[0]]]}};b.dispose=function(){this.texture.dispose();this.triShader.dispose();this.lineShader.dispose();this.pointShader.dispose();this.pickShader.dispose();this.pointPickShader.dispose();this.triangleVAO.dispose();this.trianglePositions.dispose();this.triangleColors.dispose();this.triangleUVs.dispose();
this.triangleNormals.dispose();this.triangleIds.dispose();this.edgeVAO.dispose();this.edgePositions.dispose();this.edgeColors.dispose();this.edgeUVs.dispose();this.edgeIds.dispose();this.pointVAO.dispose();this.pointPositions.dispose();this.pointColors.dispose();this.pointUVs.dispose();this.pointSizes.dispose();this.pointIds.dispose();this.contourVAO.dispose();this.contourPositions.dispose();this.contourShader.dispose()};D.exports=function(C,u){1===arguments.length&&(u=C,C=u.gl);if(!(C.getExtension("OES_standard_derivatives")||
C.getExtension("MOZ_OES_standard_derivatives")||C.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var F=p(C,t.vertex,t.fragment);F.attributes.position.location=0;F.attributes.color.location=2;F.attributes.uv.location=3;F.attributes.normal.location=4;var H=p(C,v.vertex,v.fragment);H.attributes.position.location=0;H.attributes.color.location=2;H.attributes.uv.location=3;var J=p(C,w.vertex,w.fragment);J.attributes.position.location=0;J.attributes.color.location=
2;J.attributes.uv.location=3;J.attributes.pointSize.location=4;var I=p(C,A.vertex,A.fragment);I.attributes.position.location=0;I.attributes.id.location=1;var M=p(C,z.vertex,z.fragment);M.attributes.position.location=0;M.attributes.id.location=1;M.attributes.pointSize.location=4;var E=p(C,y.vertex,y.fragment);E.attributes.position.location=0;var L=e(C,c(new Uint8Array([255,255,255,255]),[1,1,4]));L.generateMipmap();L.minFilter=C.LINEAR_MIPMAP_LINEAR;L.magFilter=C.LINEAR;var P=k(C),N=k(C),Q=k(C),O=
k(C),T=k(C),V=a(C,[{buffer:P,type:C.FLOAT,size:3},{buffer:T,type:C.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:N,type:C.FLOAT,size:4},{buffer:Q,type:C.FLOAT,size:2},{buffer:O,type:C.FLOAT,size:3}]),Z=k(C),aa=k(C),Y=k(C),ea=k(C),ca=a(C,[{buffer:Z,type:C.FLOAT,size:3},{buffer:ea,type:C.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:aa,type:C.FLOAT,size:4},{buffer:Y,type:C.FLOAT,size:2}]),ba=k(C),ka=k(C),qa=k(C),pa=k(C),oa=k(C),ja=a(C,[{buffer:ba,type:C.FLOAT,size:3},{buffer:oa,type:C.UNSIGNED_BYTE,size:4,
normalized:!0},{buffer:ka,type:C.FLOAT,size:4},{buffer:qa,type:C.FLOAT,size:2},{buffer:pa,type:C.FLOAT,size:1}]),ra=k(C),ha=a(C,[{buffer:ra,type:C.FLOAT,size:3}]);F=new r(C,L,F,H,J,I,M,E,P,T,N,Q,O,V,Z,ea,aa,Y,ca,ba,oa,ka,qa,pa,ja,ra,ha);F.update(u);return F}},{"./lib/closest-point":290,"./lib/shaders":291,colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,"gl-shader":312,"gl-texture2d":327,"gl-vao":332,ndarray:469,normals:472,"simplicial-complex-contour":528,"typedarray-pool":567}],
293:[function(b,D,G){function r(a,e,f){this.plot=a;this.vbo=e;this.shader=f}D.exports=function(a){var e=a.gl,f=n(e,[0,0,0,1,1,0,1,1]);e=p(e,k.boxVert,k.lineFrag);return new r(a,f,e)};var n=b("gl-buffer"),p=b("gl-shader"),k=b("./shaders");b=r.prototype;b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawBox=function(){var a=[0,0],e=[0,0];return function(f,l,m,c,d){var g=this.shader,h=this.plot.gl;a[0]=f;
a[1]=l;e[0]=m;e[1]=c;g.uniforms.lo=a;g.uniforms.hi=e;g.uniforms.color=d;h.drawArrays(h.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"gl-buffer":258,"gl-shader":312}],294:[function(b,D,G){function r(f,l,m,c){this.plot=f;this.vbo=l;this.shader=m;this.tickShader=c;this.ticks=[[],[]]}function n(f,l){return f-l}D.exports=function(f){var l=f.gl,m=p(l),c=k(l,e.gridVert,e.gridFrag);l=k(l,e.tickVert,e.gridFrag);return new r(f,m,c,l)};var p=b("gl-buffer"),
k=b("gl-shader"),a=b("binary-search-bounds"),e=b("./shaders");b=r.prototype;b.draw=function(){var f=[0,0],l=[0,0],m=[0,0];return function(){var c=this.plot,d=this.vbo,g=this.shader,h=this.ticks,q=c.gl,t=c._tickBounds,v=c.dataBox,w=c.viewBox,A=c.gridLineWidth,z=c.gridLineColor,y=c.gridLineEnable;c=c.pixelRatio;for(var B=0;2>B;++B){var C=t[B],u=.5*(v[B+2]+v[B]),F=v[B+2]-v[B];l[B]=2*(t[B+2]-C)/F;f[B]=2*(C-u)/F}g.bind();d.bind();g.attributes.dataCoord.pointer();g.uniforms.dataShift=f;g.uniforms.dataScale=
l;for(B=d=0;2>B;++B)m[0]=m[1]=0,m[B]=1,g.uniforms.dataAxis=m,g.uniforms.lineWidth=A[B]/(w[B+2]-w[B])*c,g.uniforms.color=z[B],t=6*h[B].length,y[B]&&t&&q.drawArrays(q.TRIANGLES,d,t),d+=t}}();b.drawTickMarks=function(){var f=[0,0],l=[0,0],m=[1,0],c=[0,1],d=[0,0],g=[0,0];return function(){var h=this.plot,q=this.vbo,t=this.tickShader,v=this.ticks,w=h.gl,A=h._tickBounds,z=h.dataBox,y=h.viewBox,B=h.pixelRatio,C=h.screenBox,u=C[2]-C[0];C=C[3]-C[1];for(var F=y[2]-y[0],H=y[3]-y[1],J=0;2>J;++J){var I=A[J],M=
.5*(z[J+2]+z[J]),E=z[J+2]-z[J];l[J]=2*(A[J+2]-I)/E;f[J]=2*(I-M)/E}l[0]*=F/u;f[0]*=F/u;l[1]*=H/C;f[1]*=H/C;t.bind();q.bind();t.attributes.dataCoord.pointer();q=t.uniforms;q.dataShift=f;q.dataScale=l;t=h.tickMarkLength;F=h.tickMarkWidth;h=h.tickMarkColor;J=6*v[0].length;I=Math.min(a.ge(v[0],(z[0]-A[0])/(A[2]-A[0]),n),v[0].length);M=Math.min(a.gt(v[0],(z[2]-A[0])/(A[2]-A[0]),n),v[0].length);H=6*I;I=6*Math.max(0,M-I);M=Math.min(a.ge(v[1],(z[1]-A[1])/(A[3]-A[1]),n),v[1].length);v=Math.min(a.gt(v[1],(z[3]-
A[1])/(A[3]-A[1]),n),v[1].length);A=J+6*M;v=6*Math.max(0,v-M);d[0]=2*(y[0]-t[1])/u-1;d[1]=(y[3]+y[1])/C-1;g[0]=t[1]*B/u;g[1]=F[1]*B/C;v&&(q.color=h[1],q.tickScale=g,q.dataAxis=c,q.screenOffset=d,w.drawArrays(w.TRIANGLES,A,v));d[0]=(y[2]+y[0])/u-1;d[1]=2*(y[1]-t[0])/C-1;g[0]=F[0]*B/u;g[1]=t[0]*B/C;I&&(q.color=h[0],q.tickScale=g,q.dataAxis=m,q.screenOffset=d,w.drawArrays(w.TRIANGLES,H,I));d[0]=2*(y[2]+t[3])/u-1;d[1]=(y[3]+y[1])/C-1;g[0]=t[3]*B/u;g[1]=F[3]*B/C;v&&(q.color=h[3],q.tickScale=g,q.dataAxis=
c,q.screenOffset=d,w.drawArrays(w.TRIANGLES,A,v));d[0]=(y[2]+y[0])/u-1;d[1]=2*(y[3]+t[2])/C-1;g[0]=F[2]*B/u;g[1]=t[2]*B/C;I&&(q.color=h[2],q.tickScale=g,q.dataAxis=m,q.screenOffset=d,w.drawArrays(w.TRIANGLES,H,I))}}();b.update=function(){var f=[1,1,-1,-1,1,-1],l=[1,-1,1,1,-1,-1];return function(m){var c=m.ticks;m=m.bounds;for(var d=new Float32Array(18*(c[0].length+c[1].length)),g=0,h=[[],[]],q=0;2>q;++q)for(var t=h[q],v=c[q],w=m[q],A=m[q+2],z=0;z<v.length;++z){var y=(v[z].x-w)/(A-w);t.push(y);for(var B=
0;6>B;++B)d[g++]=y,d[g++]=f[B],d[g++]=l[B]}this.ticks=h;this.vbo.update(d)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose();this.tickShader.dispose()}},{"./shaders":296,"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312}],295:[function(b,D,G){function r(a,e,f){this.plot=a;this.vbo=e;this.shader=f}D.exports=function(a){var e=a.gl,f=n(e,[-1,-1,-1,1,1,-1,1,1]);e=p(e,k.lineVert,k.lineFrag);return new r(a,f,e)};var n=b("gl-buffer"),p=b("gl-shader"),k=b("./shaders");b=r.prototype;
b.bind=function(){var a=this.shader;this.vbo.bind();this.shader.bind();a.attributes.coord.pointer();a.uniforms.screenBox=this.plot.screenBox};b.drawLine=function(){var a=[0,0],e=[0,0];return function(f,l,m,c,d,g){var h=this.plot,q=this.shader,t=h.gl;a[0]=f;a[1]=l;e[0]=m;e[1]=c;q.uniforms.start=a;q.uniforms.end=e;q.uniforms.width=d*h.pixelRatio;q.uniforms.color=g;t.drawArrays(t.TRIANGLE_STRIP,0,4)}}();b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"gl-buffer":258,
"gl-shader":312}],296:[function(b,D,G){b=b("glslify");G=b(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor \x3d vec4(color.xyz * color.w, color.w);\n}\n"]);D.exports={lineVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta \x3d normalize(perp(start - end));\n  vec2 offset \x3d mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position \x3d vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),
lineFrag:G,textVert:b(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  \x3d textCoordinate.z;\n  vec2 glyphOffset  \x3d textCoordinate.xy;\n  mat2 glyphMatrix \x3d mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate \x3d dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position \x3d vec4(screenCoordinate, 0, 1);\n}\n"]),
textFrag:G,gridVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos +\x3d 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position \x3d vec4(pos, 0, 1);\n}\n"]),gridFrag:G,boxVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position \x3d vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),
tickVert:b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos \x3d dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position \x3d vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:413}],297:[function(b,D,G){function r(f,l,m){this.plot=f;this.vbo=l;this.shader=m;this.tickOffset=[[],[]];this.tickX=[[],[]];this.labelOffset=[0,0];this.labelCount=
[0,0]}D.exports=function(f){var l=f.gl,m=n(l);l=p(l,e.textVert,e.textFrag);return new r(f,m,l)};var n=b("gl-buffer"),p=b("gl-shader"),k=b("text-cache"),a=b("binary-search-bounds"),e=b("./shaders");b=r.prototype;b.drawTicks=function(){var f=[0,0],l=[0,0],m=[0,0];return function(c){var d=this.plot,g=this.shader,h=this.tickX[c],q=this.tickOffset[c],t=d.gl,v=d.viewBox,w=d.dataBox,A=d.screenBox,z=d.pixelRatio,y=d.tickEnable,B=d.tickPad,C=d.tickColor,u=d.tickAngle,F=d.labelEnable,H=d.labelPad,J=d.labelColor;
d=d.labelAngle;var I=this.labelOffset[c],M=this.labelCount[c],E=a.lt(h,w[c]);h=a.le(h,w[c+2]);f[0]=f[1]=0;f[c]=1;l[c]=(v[2+c]+v[c])/(A[2+c]-A[c])-1;A=2/A[2+(c^1)]-A[c^1];l[c^1]=A*v[c^1]-1;y[c]&&(l[c^1]-=A*z*B[c],E<h&&q[h]>q[E]&&(g.uniforms.dataAxis=f,g.uniforms.screenOffset=l,g.uniforms.color=C[c],g.uniforms.angle=u[c],t.drawArrays(t.TRIANGLES,q[E],q[h]-q[E])));F[c]&&M&&(l[c^1]-=A*z*H[c],g.uniforms.dataAxis=m,g.uniforms.screenOffset=l,g.uniforms.color=J[c],g.uniforms.angle=d[c],t.drawArrays(t.TRIANGLES,
I,M));l[c^1]=A*v[2+(c^1)]-1;y[c+2]&&(l[c^1]+=A*z*B[c+2],E<h&&q[h]>q[E]&&(g.uniforms.dataAxis=f,g.uniforms.screenOffset=l,g.uniforms.color=C[c+2],g.uniforms.angle=u[c+2],t.drawArrays(t.TRIANGLES,q[E],q[h]-q[E])));F[c+2]&&M&&(l[c^1]+=A*z*H[c+2],g.uniforms.dataAxis=m,g.uniforms.screenOffset=l,g.uniforms.color=J[c+2],g.uniforms.angle=d[c+2],t.drawArrays(t.TRIANGLES,I,M))}}();b.drawTitle=function(){var f=[0,0],l=[0,0];return function(){var m=this.plot,c=this.shader,d=m.gl,g=m.screenBox,h=m.titleCenter,
q=m.titleAngle,t=m.titleColor;m=m.pixelRatio;if(this.titleCount){for(var v=0;2>v;++v)l[v]=2*(h[v]*m-g[v])/(g[2+v]-g[v])-1;c.bind();c.uniforms.dataAxis=f;c.uniforms.screenOffset=l;c.uniforms.angle=q;c.uniforms.color=t;d.drawArrays(d.TRIANGLES,this.titleOffset,this.titleCount)}}}();b.bind=function(){var f=[0,0],l=[0,0],m=[0,0];return function(){var c=this.plot,d=this.shader,g=c._tickBounds,h=c.dataBox,q=c.screenBox,t=c.viewBox;d.bind();for(var v=0;2>v;++v){var w=g[v],A=.5*(h[v+2]+h[v]),z=h[v+2]-h[v],
y=t[v+2]-t[v],B=q[v+2]-q[v];l[v]=2*(g[v+2]-w)/z*y/B;f[v]=2*(w-A)/z*y/B}m[1]=2*c.pixelRatio/(q[3]-q[1]);m[0]=m[1]*(q[3]-q[1])/(q[2]-q[0]);d.uniforms.dataScale=l;d.uniforms.dataShift=f;d.uniforms.textScale=m;this.vbo.bind();d.attributes.textCoordinate.pointer()}}();b.update=function(f){var l=[],m=f.ticks,c=f.bounds,d,g;for(g=0;2>g;++g){var h=[Math.floor(l.length/3)],q=[-Infinity],t=m[g];for(d=0;d<t.length;++d){var v=t[d];var w=v.x;var A=v.text;var z=v.font||"sans-serif";v=v.fontSize||12;for(var y=1/
(c[g+2]-c[g]),B=c[g],C=A.split("\n"),u=0;u<C.length;u++){var F=k(z,C[u]).data;for(A=0;A<F.length;A+=2)l.push(F[A]*v,-F[A+1]*v-u*v*1.2,(w-B)*y)}h.push(Math.floor(l.length/3));q.push(w)}this.tickOffset[g]=h;this.tickX[g]=q}for(g=0;2>g;++g){this.labelOffset[g]=Math.floor(l.length/3);F=k(f.labelFont[g],f.labels[g],{textAlign:"center"}).data;v=f.labelSize[g];for(d=0;d<F.length;d+=2)l.push(F[d]*v,-F[d+1]*v,0);this.labelCount[g]=Math.floor(l.length/3)-this.labelOffset[g]}this.titleOffset=Math.floor(l.length/
3);F=k(f.titleFont,f.title).data;v=f.titleSize;for(d=0;d<F.length;d+=2)l.push(F[d]*v,-F[d+1]*v,0);this.titleCount=Math.floor(l.length/3)-this.titleOffset;this.vbo.update(l)};b.dispose=function(){this.vbo.dispose();this.shader.dispose()}},{"./shaders":296,"binary-search-bounds":96,"gl-buffer":258,"gl-shader":312,"text-cache":547}],298:[function(b,D,G){function r(m,c){this.gl=m;this.pickBuffer=c;this.screenBox=[0,0,m.drawingBufferWidth,m.drawingBufferHeight];this.viewBox=[0,0,0,0];this.dataBox=[-10,
-10,10,10];this.gridLineEnable=[!0,!0];this.gridLineWidth=[1,1];this.gridLineColor=[[0,0,0,1],[0,0,0,1]];this.pixelRatio=1;this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickEnable=[!0,!0,!0,!0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[15,15,15,15];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelEnable=[!0,!0,!0,!0];this.labelColor=
[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.titleCenter=[0,0];this.titleEnable=!0;this.titleAngle=0;this.titleColor=[0,0,0,1];this.borderColor=[0,0,0,0];this.backgroundColor=[0,0,0,0];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[4,4];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderLineEnable=[!0,!0,!0,!0];this.borderLineWidth=[2,2,2,2];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.box=this.line=this.text=this.grid=null;this.objects=[];this.overlays=[];this._tickBounds=
[Infinity,Infinity,-Infinity,-Infinity];this.pickDirty=this.dirty=this.static=!1;this.pickDelay=120;this.pickRadius=10;this._pickTimeout=null;this._drawPick=this.drawPick.bind(this);this._depthCounter=0}function n(m){m=m.slice();for(var c=0;c<m.length;++c)m[c]=m[c].slice();return m}function p(m,c){return m.x-c.x}D.exports=function(m){var c=m.gl,d=k(c,[c.drawingBufferWidth,c.drawingBufferHeight]);c=new r(c,d);c.grid=a(c);c.text=e(c);c.line=f(c);c.box=l(c);c.update(m);return c};var k=b("gl-select-static"),
a=b("./lib/grid"),e=b("./lib/text"),f=b("./lib/line"),l=b("./lib/box");b=r.prototype;b.setDirty=function(){this.dirty=this.pickDirty=!0};b.setOverlayDirty=function(){this.dirty=!0};b.nextDepthValue=function(){return this._depthCounter++/65536};b.draw=function(){return function(){var m=this.gl,c=this.screenBox,d=this.viewBox,g=this.dataBox,h=this.pixelRatio,q=this.grid,t=this.line,v=this.text,w=this.objects;this._depthCounter=0;this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=
!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay));if(this.dirty){this.dirty=!1;m.bindFramebuffer(m.FRAMEBUFFER,null);m.enable(m.SCISSOR_TEST);m.disable(m.DEPTH_TEST);m.depthFunc(m.LESS);m.depthMask(!1);m.enable(m.BLEND);m.blendEquation(m.FUNC_ADD,m.FUNC_ADD);m.blendFunc(m.ONE,m.ONE_MINUS_SRC_ALPHA);if(this.borderColor){m.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var A=this.borderColor;m.clearColor(A[0]*A[3],A[1]*A[3],A[2]*A[3],A[3]);m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT)}m.scissor(d[0],
d[1],d[2]-d[0],d[3]-d[1]);m.viewport(d[0],d[1],d[2]-d[0],d[3]-d[1]);A=this.backgroundColor;m.clearColor(A[0]*A[3],A[1]*A[3],A[2]*A[3],A[3]);m.clear(m.COLOR_BUFFER_BIT);q.draw();A=this.zeroLineEnable;var z=this.zeroLineColor,y=this.zeroLineWidth;if(A[0]||A[1])for(t.bind(),q=0;2>q;++q)if(A[q]&&0>=g[q]&&0<=g[q+2]){var B=c[q]-g[q]*(c[q+2]-c[q])/(g[q+2]-g[q]);0===q?t.drawLine(B,c[1],B,c[3],y[q],z[q]):t.drawLine(c[0],B,c[2],B,y[q],z[q])}for(q=0;q<w.length;++q)w[q].draw();m.viewport(c[0],c[1],c[2]-c[0],
c[3]-c[1]);m.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);this.grid.drawTickMarks();t.bind();c=this.borderLineEnable;g=this.borderLineWidth;w=this.borderLineColor;c[1]&&t.drawLine(d[0],d[1]-.5*g[1]*h,d[0],d[3]+.5*g[3]*h,g[1],w[1]);c[0]&&t.drawLine(d[0]-.5*g[0]*h,d[1],d[2]+.5*g[2]*h,d[1],g[0],w[0]);c[3]&&t.drawLine(d[2],d[1]-.5*g[1]*h,d[2],d[3]+.5*g[3]*h,g[3],w[3]);c[2]&&t.drawLine(d[0]-.5*g[0]*h,d[3],d[2]+.5*g[2]*h,d[3],g[2],w[2]);v.bind();for(q=0;2>q;++q)v.drawTicks(q);this.titleEnable&&v.drawTitle();
d=this.overlays;for(q=0;q<d.length;++q)d[q].draw();m.disable(m.SCISSOR_TEST);m.disable(m.BLEND);m.depthMask(!0)}}}();b.drawPick=function(){return function(){if(!this.static){var m=this.pickBuffer;this._pickTimeout=null;m.begin();for(var c=1,d=this.objects,g=0;g<d.length;++g)c=d[g].drawPick(c);m.end()}}}();b.pick=function(){return function(m,c){if(!this.static){var d=this.pixelRatio,g=this.pickPixelRatio,h=this.viewBox;m=Math.round((m-h[0]/d)*g)|0;c=Math.round((c-h[1]/d)*g)|0;d=this.pickBuffer.query(m,
c,this.pickRadius);if(!d)return null;d=d.id+(d.value[0]<<8)+(d.value[1]<<16)+(d.value[2]<<24);g=this.objects;for(h=0;h<g.length;++h){var q=g[h].pick(m,c,d);if(q)return q}return null}}}();b.setScreenBox=function(m){var c=this.screenBox,d=this.pixelRatio;c[0]=Math.round(m[0]*d)|0;c[1]=Math.round(m[1]*d)|0;c[2]=Math.round(m[2]*d)|0;c[3]=Math.round(m[3]*d)|0;this.setDirty()};b.setDataBox=function(m){var c=this.dataBox;if(c[0]!==m[0]||c[1]!==m[1]||c[2]!==m[2]||c[3]!==m[3])c[0]=m[0],c[1]=m[1],c[2]=m[2],
c[3]=m[3],this.setDirty()};b.setViewBox=function(m){var c=this.pixelRatio,d=this.viewBox;d[0]=Math.round(m[0]*c)|0;d[1]=Math.round(m[1]*c)|0;d[2]=Math.round(m[2]*c)|0;d[3]=Math.round(m[3]*c)|0;c=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((m[2]-m[0])*c)|0,Math.round((m[3]-m[1])*c)|0];this.setDirty()};b.update=function(m){m=m||{};var c=this.gl,d=this.pixelRatio=m.pixelRatio||1;this.pickPixelRatio=Math.max(d,1);this.setScreenBox(m.screenBox||[0,0,c.drawingBufferWidth/d,c.drawingBufferHeight/
d]);this.setViewBox(m.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/d,.125*(this.screenBox[3]-this.screenBox[1])/d,.875*(this.screenBox[2]-this.screenBox[0])/d,.875*(this.screenBox[3]-this.screenBox[1])/d]);c=this.viewBox;var g=(c[2]-c[0])/(c[3]-c[1]);this.setDataBox(m.dataBox||[-10,-10/g,10,10/g]);this.borderColor=!1!==m.borderColor?(m.borderColor||[0,0,0,0]).slice():!1;this.backgroundColor=(m.backgroundColor||[0,0,0,0]).slice();this.gridLineEnable=(m.gridLineEnable||[!0,!0]).slice();this.gridLineWidth=
(m.gridLineWidth||[1,1]).slice();this.gridLineColor=n(m.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]);this.zeroLineEnable=(m.zeroLineEnable||[!0,!0]).slice();this.zeroLineWidth=(m.zeroLineWidth||[4,4]).slice();this.zeroLineColor=n(m.zeroLineColor||[[0,0,0,1],[0,0,0,1]]);this.tickMarkLength=(m.tickMarkLength||[0,0,0,0]).slice();this.tickMarkWidth=(m.tickMarkWidth||[0,0,0,0]).slice();this.tickMarkColor=n(m.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.titleCenter=(m.titleCenter||[.5*
(c[0]+c[2])/d,(c[3]+120)/d]).slice();this.titleEnable=!("titleEnable"in m)||!!m.titleEnable;this.titleAngle=m.titleAngle||0;this.titleColor=(m.titleColor||[0,0,0,1]).slice();this.labelPad=(m.labelPad||[15,15,15,15]).slice();this.labelAngle=(m.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice();this.labelEnable=(m.labelEnable||[!0,!0,!0,!0]).slice();this.labelColor=n(m.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.tickPad=(m.tickPad||[15,15,15,15]).slice();this.tickAngle=(m.tickAngle||[0,
0,0,0]).slice();this.tickEnable=(m.tickEnable||[!0,!0,!0,!0]).slice();this.tickColor=n(m.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);this.borderLineEnable=(m.borderLineEnable||[!0,!0,!0,!0]).slice();this.borderLineWidth=(m.borderLineWidth||[2,2,2,2]).slice();this.borderLineColor=n(m.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);d=m.ticks||[[],[]];c=this._tickBounds;c[0]=c[1]=Infinity;c[2]=c[3]=-Infinity;for(g=0;2>g;++g){var h=d[g].slice(0);0!==h.length&&(h.sort(p),c[g]=Math.min(c[g],
h[0].x),c[g+2]=Math.max(c[g+2],h[h.length-1].x))}this.grid.update({bounds:c,ticks:d});this.text.update({bounds:c,ticks:d,labels:m.labels||["x","y"],labelSize:m.labelSize||[12,12],labelFont:m.labelFont||["sans-serif","sans-serif"],title:m.title||"",titleSize:m.titleSize||18,titleFont:m.titleFont||"sans-serif"});this.static=!!m.static;this.setDirty()};b.dispose=function(){this.box.dispose();this.grid.dispose();this.text.dispose();this.line.dispose();for(var m=this.objects.length-1;0<=m;--m)this.objects[m].dispose();
this.objects.length=0;for(m=this.overlays.length-1;0<=m;--m)this.overlays[m].dispose();this.overlays.length=0;this.gl=null};b.addObject=function(m){0>this.objects.indexOf(m)&&(this.objects.push(m),this.setDirty())};b.removeObject=function(m){for(var c=this.objects,d=0;d<c.length;++d)if(c[d]===m){c.splice(d,1);this.setDirty();break}};b.addOverlay=function(m){0>this.overlays.indexOf(m)&&(this.overlays.push(m),this.setOverlayDirty())};b.removeOverlay=function(m){for(var c=this.overlays,d=0;d<c.length;++d)if(c[d]===
m){c.splice(d,1);this.setOverlayDirty();break}}},{"./lib/box":293,"./lib/grid":294,"./lib/line":295,"./lib/text":297,"gl-select-static":311}],299:[function(b,D,G){D.exports=function(f,l){f=f||document.body;l=l||{};var m=[.01,Infinity];"distanceLimits"in l&&(m[0]=l.distanceLimits[0],m[1]=l.distanceLimits[1]);"zoomMin"in l&&(m[0]=l.zoomMin);"zoomMax"in l&&(m[1]=l.zoomMax);var c=n({center:l.center||[0,0,0],up:l.up||[0,1,0],eye:l.eye||[0,0,10],mode:l.mode||"orbit",distanceLimits:m}),d=[0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0],g=0,h=f.clientWidth,q=f.clientHeight,t={keyBindingMode:"rotate",enableWheel:!0,view:c,element:f,delay:l.delay||16,rotateSpeed:l.rotateSpeed||1,zoomSpeed:l.zoomSpeed||1,translateSpeed:l.translateSpeed||1,flipX:!!l.flipX,flipY:!!l.flipY,modes:c.modes,_ortho:l._ortho||l.projection&&"orthographic"===l.projection.type||!1,tick:function(){var v=r(),w=this.delay,A=v-2*w;c.idle(v-w);c.recalcMatrix(A);c.flush(v-(100+2*w));v=!0;w=c.computedMatrix;for(A=0;16>A;++A)v=v&&d[A]===w[A],d[A]=w[A];
w=f.clientWidth===h&&f.clientHeight===q;h=f.clientWidth;q=f.clientHeight;if(v)return!w;g=Math.exp(c.computedRadius[0]);return!0},lookAt:function(v,w,A){c.lookAt(c.lastT(),v,w,A)},rotate:function(v,w,A){c.rotate(c.lastT(),v,w,A)},pan:function(v,w,A){c.pan(c.lastT(),v,w,A)},translate:function(v,w,A){c.translate(c.lastT(),v,w,A)}};Object.defineProperties(t,{matrix:{get:function(){return c.computedMatrix},set:function(v){c.setMatrix(c.lastT(),v);return c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},
set:function(v){var w=c.computedUp.slice(),A=c.computedEye.slice(),z=c.computedCenter.slice();c.setMode(v);"turntable"===v&&(v=r(),c._active.lookAt(v,A,z,w),c._active.lookAt(v+500,A,z,[0,0,1]),c._active.flush(v));return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(v){c.lookAt(c.lastT(),null,v);return c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(v){c.lookAt(c.lastT(),v);return c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},
set:function(v){c.lookAt(c.lastT(),null,null,v);return c.computedUp},enumerable:!0},distance:{get:function(){return g},set:function(v){c.setDistance(c.lastT(),v);return v},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(m)},set:function(v){c.setDistanceLimits(v);return v},enumerable:!0}});f.addEventListener("contextmenu",function(v){v.preventDefault();return!1});t._lastX=-1;t._lastY=-1;t._lastMods={shift:!1,control:!1,alt:!1,meta:!1};t.enableMouseListeners=function(){function v(w,
A,z,y){var B=t.keyBindingMode;if(!1!==B){var C="rotate"===B,u="pan"===B;B="zoom"===B;var F=!!y.control,H=!!y.alt,J=!!y.shift,I=!!(w&1),M=!!(w&2);w=!!(w&4);var E=1/f.clientHeight,L=E*(A-t._lastX),P=E*(z-t._lastY),N=t.flipX?1:-1,Q=t.flipY?1:-1,O=Math.PI*t.rotateSpeed;E=r();-1!==t._lastX&&-1!==t._lastY&&((C&&I&&!F&&!H&&!J||I&&!F&&!H&&J)&&c.rotate(E,N*O*L,-Q*O*P,0),(u&&I&&!F&&!H&&!J||M||I&&F&&!H&&!J)&&c.pan(E,-t.translateSpeed*L*g,t.translateSpeed*P*g,0),B&&I&&!F&&!H&&!J||w||I&&!F&&H&&!J)&&(C=-t.zoomSpeed*
P/window.innerHeight*(E-c.lastT())*100,c.pan(E,0,0,g*(Math.exp(C)-1)));t._lastX=A;t._lastY=z;t._lastMods=y;return!0}}t.mouseListener=p(f,v);f.addEventListener("touchstart",function(w){var A=a(w.changedTouches[0],f);v(0,A[0],A[1],t._lastMods);v(1,A[0],A[1],t._lastMods);w.preventDefault()},e?{passive:!1}:!1);f.addEventListener("touchmove",function(w){var A=a(w.changedTouches[0],f);v(1,A[0],A[1],t._lastMods);w.preventDefault()},e?{passive:!1}:!1);f.addEventListener("touchend",function(w){v(0,t._lastX,
t._lastY,t._lastMods);w.preventDefault()},e?{passive:!1}:!1);t.wheelListener=k(f,function(w,A){if(!1!==t.keyBindingMode&&t.enableWheel){var z=t.flipX?1:-1,y=t.flipY?1:-1,B=r();Math.abs(w)>Math.abs(A)?c.rotate(B,0,0,-w*z*Math.PI*t.rotateSpeed/window.innerWidth):t._ortho||(w=-t.zoomSpeed*y*A/window.innerHeight*(B-c.lastT())/20,c.pan(B,0,0,g*(Math.exp(w)-1)))}},!0)};t.enableMouseListeners();return t};var r=b("right-now"),n=b("3d-view"),p=b("mouse-change"),k=b("mouse-wheel"),a=b("mouse-event-offset"),
e=b("has-passive-events")},{"3d-view":54,"has-passive-events":415,"mouse-change":457,"mouse-event-offset":458,"mouse-wheel":460,"right-now":514}],300:[function(b,D,G){G=b("glslify");var r=b("gl-shader"),n=G(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv \x3d position;\n  gl_Position \x3d vec4(position, 0, 1);\n}"]),p=G(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum \x3d texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor \x3d min(vec4(1,1,1,1), accum);\n}"]);
D.exports=function(k){return r(k,n,p,null,[{name:"position",type:"vec2"}])}},{"gl-shader":312,glslify:413}],301:[function(b,D,G){function r(){this.mouse=[-1,-1];this.screen=null;this.distance=Infinity;this.data=this.object=this.dataPosition=this.dataCoordinate=this.index=null}function n(v,w){var A=null;try{(A=v.getContext("webgl",w))||(A=v.getContext("experimental-webgl",w))}catch(z){return null}return A}function p(v){return"boolean"===typeof v?v:!0}var k=b("./camera.js"),a=b("gl-axes3d"),e=b("gl-axes3d/properties"),
f=b("gl-spikes3d"),l=b("gl-select-static"),m=b("gl-fbo"),c=b("a-big-triangle"),d=b("mouse-change"),g=b("gl-mat4/perspective"),h=b("gl-mat4/ortho"),q=b("./lib/shader"),t=b("is-mobile")({tablet:!0,featureDetect:!0});D.exports={createScene:function(v){function w(){if(!ca._stopped&&ca.autoResize){var pa=C.parentNode;if(pa&&pa!==document.body){var oa=pa.clientWidth;pa=pa.clientHeight}else oa=window.innerWidth,pa=window.innerHeight;var ja=Math.ceil(oa*ca.pixelRatio)|0,ra=Math.ceil(pa*ca.pixelRatio)|0;if(ja!==
C.width||ra!==C.height)C.width=ja,C.height=ra,ja=C.style,ja.position=ja.position||"absolute",ja.left="0px",ja.top="0px",ja.width=oa+"px",ja.height=pa+"px",Z=!0}}function A(){for(var pa=Q.length,oa=V.length,ja=0;ja<oa;++ja)T[ja]=0;ja=0;a:for(;ja<pa;++ja){var ra=Q[ja],ha=ra.pickSlots;if(ha){for(var la=0;la<oa;++la)if(255>T[la]+ha){O[ja]=la;ra.setPickBase(T[la]+1);T[la]+=ha;continue a}la=l(u,ea);O[ja]=oa;V.push(la);T.push(ha);ra.setPickBase(1);oa+=1}else O[ja]=-1}for(;0<oa&&0===T[oa-1];)T.pop(),V.pop().dispose()}
function z(){if(ca.contextLost)return!0;if(u.isContextLost()&&(ca.contextLost=!0,ca.mouseListener.enabled=!1,ca.selection.object=null,ca.oncontextloss))ca.oncontextloss()}function y(){if(!z()){w();var pa=ca.camera.tick();Y.view=ca.camera.matrix;Z=Z||pa;aa=aa||pa;P.pixelRatio=ca.pixelRatio;N.pixelRatio=ca.pixelRatio;pa=Q.length;var oa=ka[0],ja=ka[1];oa[0]=oa[1]=oa[2]=Infinity;ja[0]=ja[1]=ja[2]=-Infinity;for(var ra=0;ra<pa;++ra){var ha=Q[ra];ha.pixelRatio=ca.pixelRatio;ha.axes=ca.axes;Z=Z||!!ha.dirty;
aa=aa||!!ha.dirty;if(ha=ha.bounds){var la=ha[0],ua=ha[1];for(ha=0;3>ha;++ha)oa[ha]=Math.min(oa[ha],la[ha]),ja[ha]=Math.max(ja[ha],ua[ha])}}la=ca.bounds;if(ca.autoBounds)for(ha=0;3>ha;++ha)ja[ha]<oa[ha]?(oa[ha]=-1,ja[ha]=1):(oa[ha]===ja[ha]&&(--oa[ha],ja[ha]+=1),ra=.05*(ja[ha]-oa[ha]),oa[ha]-=ra,ja[ha]+=ra),la[0][ha]=oa[ha],la[1][ha]=ja[ha];oa=!1;for(ha=0;3>ha;++ha)oa=oa||qa[0][ha]!==la[0][ha]||qa[1][ha]!==la[1][ha],qa[0][ha]=la[0][ha],qa[1][ha]=la[1][ha];aa=aa||oa;if(Z=Z||oa){if(oa){oa=[0,0,0];for(ra=
0;3>ra;++ra)ja=ra,ha=(la[1][ra]-la[0][ra])/10,ua=Math.round(Math.log(Math.abs(ha))/Math.log(10)),0>ua?(ua=Math.round(Math.pow(10,-ua)),ha=Math.ceil(ha*ua)/ua):0<ua?(ua=Math.round(Math.pow(10,ua)),ha=Math.ceil(ha/ua)*ua):ha=Math.ceil(ha),oa[ja]=ha;P.autoTicks?P.update({bounds:la,tickSpacing:oa}):P.update({bounds:la})}oa=u.drawingBufferWidth;ja=u.drawingBufferHeight;ea[0]=oa;ea[1]=ja;ba[0]=Math.max(oa/ca.pixelRatio,1)|0;ba[1]=Math.max(ja/ca.pixelRatio,1)|0;ra=ca;ha=ra.bounds;var na=ra.cameraParams,
wa=na.projection;ua=na.model;var Ca=ra.zNear,Fa=ra.zFar,Xa=ra.fovy,ab=ra.gl.drawingBufferWidth/ra.gl.drawingBufferHeight;M?(h(wa,-ab,ab,-1,1,Ca,Fa),na._ortho=!0):(g(wa,Xa,ab,Ca,Fa),na._ortho=!1);for(na=0;16>na;++na)ua[na]=0;ua[15]=1;for(na=wa=0;3>na;++na)wa=Math.max(wa,ha[1][na]-ha[0][na]);for(na=0;3>na;++na)ua[5*na]=ra.autoScale?ra.aspect[na]/(ha[1][na]-ha[0][na]):1/wa,ra.autoCenter&&(ua[12+na]=.5*-ua[5*na]*(ha[0][na]+ha[1][na]));for(ra=0;ra<pa;++ra)ha=Q[ra],ha.axesBounds=la,ca.clipToBounds&&(ha.clipBounds=
la);H.object&&(N.position=ca.snapToData?H.dataCoordinate:H.dataPosition,N.bounds=la);if(aa&&(aa=!1,!z()))for(u.colorMask(!0,!0,!0,!0),u.depthMask(!0),u.disable(u.BLEND),u.enable(u.DEPTH_TEST),u.depthFunc(u.LEQUAL),la=Q.length,ra=V.length,ha=0;ha<ra;++ha){ua=V[ha];ua.shape=ba;ua.begin();for(na=0;na<la;++na)O[na]===ha&&(wa=Q[na],wa.drawPick&&(wa.pixelRatio=1,wa.drawPick(Y)));ua.end()}ca.axesPixels=e(ca.axes,Y,oa,ja);if(ca.onrender)ca.onrender();u.bindFramebuffer(u.FRAMEBUFFER,null);u.viewport(0,0,oa,
ja);ca.clearRGBA();u.depthMask(!0);u.colorMask(!0,!0,!0,!0);u.enable(u.DEPTH_TEST);u.depthFunc(u.LEQUAL);u.disable(u.BLEND);u.disable(u.CULL_FACE);la=!1;P.enable&&(la=la||P.isTransparent(),P.draw(Y));N.axes=P;H.object&&N.draw(Y);u.disable(u.CULL_FACE);for(ra=0;ra<pa;++ra)ha=Q[ra],ha.axes=P,ha.pixelRatio=ca.pixelRatio,ha.isOpaque&&ha.isOpaque()&&ha.draw(Y),ha.isTransparent&&ha.isTransparent()&&(la=!0);if(la){J.shape=ea;J.bind();u.clear(u.DEPTH_BUFFER_BIT);u.colorMask(!1,!1,!1,!1);u.depthMask(!0);u.depthFunc(u.LESS);
P.enable&&P.isTransparent()&&P.drawTransparent(Y);for(ra=0;ra<pa;++ra)ha=Q[ra],ha.isOpaque&&ha.isOpaque()&&ha.draw(Y);u.enable(u.BLEND);u.blendEquation(u.FUNC_ADD);u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA);u.colorMask(!0,!0,!0,!0);u.depthMask(!1);u.clearColor(0,0,0,0);u.clear(u.COLOR_BUFFER_BIT);P.isTransparent()&&P.drawTransparent(Y);for(ra=0;ra<pa;++ra)ha=Q[ra],ha.isTransparent&&ha.isTransparent()&&ha.drawTransparent(Y);u.bindFramebuffer(u.FRAMEBUFFER,null);u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA);
u.disable(u.DEPTH_TEST);I.bind();J.color[0].bind(0);I.uniforms.accumBuffer=0;c(u);u.disable(u.BLEND)}Z=!1;for(ra=0;ra<pa;++ra)Q[ra].dirty=!1}}}function B(){ca._stopped||ca.contextLost||(y(),requestAnimationFrame(B))}v=v||{};v.camera=v.camera||{};var C=v.canvas;C||(C=document.createElement("canvas"),v.container?v.container.appendChild(C):document.body.appendChild(C));var u=v.gl;u||(v.glOptions&&(t=!!v.glOptions.preserveDrawingBuffer),u=n(C,v.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:t}));
if(!u)throw Error("webgl not supported");var F=v.bounds||[[-10,-10,-10],[10,10,10]],H=new r,J=m(u,u.drawingBufferWidth,u.drawingBufferHeight,{preferFloat:!t}),I=q(u),M=v.cameraObject&&!0===v.cameraObject._ortho||v.camera.projection&&"orthographic"===v.camera.projection.type||!1,E={eye:v.camera.eye||[2,0,0],center:v.camera.center||[0,0,0],up:v.camera.up||[0,1,0],zoomMin:v.camera.zoomMax||.1,zoomMax:v.camera.zoomMin||100,mode:v.camera.mode||"turntable",_ortho:M},L=v.axes||{},P=a(u,L);P.enable=!L.disable;
var N=f(u,v.spikes||{}),Q=[],O=[],T=[],V=[],Z=!0,aa=!0,Y={view:null,projection:Array(16),model:Array(16),_ortho:!1};aa=!0;var ea=[u.drawingBufferWidth,u.drawingBufferHeight];E=v.cameraObject||k(C,E);var ca={gl:u,contextLost:!1,pixelRatio:v.pixelRatio||1,canvas:C,selection:H,camera:E,axes:P,axesPixels:null,spikes:N,bounds:F,objects:Q,shape:ea,aspect:v.aspectRatio||[1,1,1],pickRadius:v.pickRadius||10,zNear:v.zNear||.01,zFar:v.zFar||1E3,fovy:v.fovy||Math.PI/4,clearColor:v.clearColor||[0,0,0,0],autoResize:p(v.autoResize),
autoBounds:p(v.autoBounds),autoScale:!!v.autoScale,autoCenter:p(v.autoCenter),clipToBounds:p(v.clipToBounds),snapToData:!!v.snapToData,onselect:v.onselect||null,onrender:v.onrender||null,onclick:v.onclick||null,cameraParams:Y,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(pa){this.aspect[0]=pa.x;this.aspect[1]=pa.y;this.aspect[2]=pa.z;aa=!0},setBounds:function(pa,oa){this.bounds[0][pa]=
oa.min;this.bounds[1][pa]=oa.max},setClearColor:function(pa){this.clearColor=pa},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ba=[u.drawingBufferWidth/ca.pixelRatio|0,u.drawingBufferHeight/ca.pixelRatio|0];ca.autoResize&&w();window.addEventListener("resize",w);ca.update=function(pa){ca._stopped||(aa=Z=!0)};ca.add=function(pa){ca._stopped||(pa.axes=P,Q.push(pa),
O.push(-1),aa=Z=!0,A())};ca.remove=function(pa){ca._stopped||(pa=Q.indexOf(pa),0>pa||(Q.splice(pa,1),O.pop(),aa=Z=!0,A()))};ca.dispose=function(){if(!ca._stopped&&(ca._stopped=!0,window.removeEventListener("resize",w),C.removeEventListener("webglcontextlost",z),ca.mouseListener.enabled=!1,!ca.contextLost)){P.dispose();N.dispose();for(var pa=0;pa<Q.length;++pa)Q[pa].dispose();J.dispose();for(pa=0;pa<V.length;++pa)V[pa].dispose();I.dispose();N=P=u=null;Q=[]}};ca._mouseRotating=!1;ca._prevButtons=0;
ca.enableMouseListeners=function(){ca.mouseListener=d(C,function(pa,oa,ja){if(!ca._stopped){var ra=V.length,ha=Q.length,la=H.object;H.distance=Infinity;H.mouse[0]=oa;H.mouse[1]=ja;H.object=null;H.screen=null;H.dataCoordinate=H.dataPosition=null;var ua=!1;if(pa&&ca._prevButtons)ca._mouseRotating=!0;else{ca._mouseRotating&&(aa=!0);ca._mouseRotating=!1;for(var na=0;na<ra;++na){var wa=V[na].query(oa,ba[1]-ja-1,ca.pickRadius);if(wa&&!(wa.distance>H.distance))for(var Ca=0;Ca<ha;++Ca){var Fa=Q[Ca];if(O[Ca]===
na){var Xa=Fa.pick(wa);Xa&&(H.buttons=pa,H.screen=wa.coord,H.distance=wa.distance,H.object=Fa,H.index=Xa.distance,H.dataPosition=Xa.position,H.dataCoordinate=Xa.dataCoordinate,H.data=Xa,ua=!0)}}}}la&&la!==H.object&&(la.highlight&&la.highlight(null),Z=!0);H.object&&(H.object.highlight&&H.object.highlight(H.data),Z=!0);if((ua=ua||H.object!==la)&&ca.onselect)ca.onselect(H);if(pa&1&&!(ca._prevButtons&1)&&ca.onclick)ca.onclick(H);ca._prevButtons=pa}})};C.addEventListener("webglcontextlost",z);var ka=[[Infinity,
Infinity,Infinity],[-Infinity,-Infinity,-Infinity]],qa=[ka[0].slice(),ka[1].slice()];ca.enableMouseListeners();B();ca.redraw=function(){ca._stopped||(Z=!0,y())};return ca},createCamera:k}},{"./camera.js":299,"./lib/shader":300,"a-big-triangle":64,"gl-axes3d":250,"gl-axes3d/properties":257,"gl-fbo":266,"gl-mat4/ortho":281,"gl-mat4/perspective":282,"gl-select-static":311,"gl-spikes3d":321,"is-mobile":441,"mouse-change":457}],302:[function(b,D,G){b=b("glslify");G.pointVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a \x3d 12.9898;\n  highp float b \x3d 78.233;\n  highp float c \x3d 43758.5453;\n  highp float d \x3d dot(co.xy, vec2(a, b));\n  highp float e \x3d mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize \x3d pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *\x3d 0.886;\n  }\n}"]);
G.pointFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud !\x3d 0.0) { // pointCloud is truthy\n    if(centerFraction \x3d\x3d 1.0) {\n      gl_FragColor \x3d color;\n    } else {\n      gl_FragColor \x3d mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius \x3e 1.0) {\n      discard;\n    }\n    baseColor \x3d mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor \x3d vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]);
G.pickVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition \x3d matrix * vec3(position, 1);\n  gl_Position  \x3d vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize \x3d pointSize;\n\n  vec4 id \x3d pickId + pickOffset;\n  id.y +\x3d floor(id.x / 256.0);\n  id.x -\x3d floor(id.x / 256.0) * 256.0;\n\n  id.z +\x3d floor(id.y / 256.0);\n  id.y -\x3d floor(id.y / 256.0) * 256.0;\n\n  id.w +\x3d floor(id.z / 256.0);\n  id.z -\x3d floor(id.z / 256.0) * 256.0;\n\n  fragId \x3d id;\n}\n"]);
G.pickFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius \x3e 1.0) {\n    discard;\n  }\n  gl_FragColor \x3d fragId / 255.0;\n}\n"])},{glslify:413}],303:[function(b,D,G){function r(e,f,l,m,c){this.plot=e;this.offsetBuffer=f;this.pickBuffer=l;this.shader=m;this.pickShader=c;this.sizeMin=.5;this.sizeMinCap=2;this.sizeMax=20;this.areaRatio=1;this.pointCount=0;this.color=[1,0,0,1];this.borderColor=
[0,0,0,1];this.blend=!1;this.pickOffset=0;this.points=null}var n=b("gl-shader"),p=b("gl-buffer"),k=b("typedarray-pool"),a=b("./lib/shader");D.exports=function(e,f){var l=e.gl,m=p(l),c=p(l),d=n(l,a.pointVertex,a.pointFragment);l=n(l,a.pickVertex,a.pickFragment);m=new r(e,m,c,d,l);m.update(f);e.addObject(m);return m};b=r.prototype;b.dispose=function(){this.shader.dispose();this.pickShader.dispose();this.offsetBuffer.dispose();this.pickBuffer.dispose();this.plot.removeObject(this)};b.update=function(e){function f(t,
v){return t in e?e[t]:v}var l;e=e||{};this.sizeMin=f("sizeMin",.5);this.sizeMax=f("sizeMax",20);this.color=f("color",[1,0,0,1]).slice();this.areaRatio=f("areaRatio",1);this.borderColor=f("borderColor",[0,0,0,1]).slice();this.blend=f("blend",!1);var m=e.positions.length>>>1,c=e.positions instanceof Float32Array,d=e.idToIndex instanceof Int32Array&&e.idToIndex.length>=m,g=e.positions,h=c?g:k.mallocFloat32(g.length),q=d?e.idToIndex:k.mallocInt32(m);c||h.set(g);if(!d)for(h.set(g),l=0;l<m;l++)q[l]=l;this.points=
g;this.offsetBuffer.update(h);this.pickBuffer.update(q);c||k.free(h);d||k.free(q);this.pointCount=m;this.pickOffset=0};b.unifiedDraw=function(){var e=[1,0,0,0,1,0,0,0,1],f=[0,0,0,0];return function(l){var m=void 0!==l,c=m?this.pickShader:this.shader,d=this.plot.gl,g=this.plot.dataBox;if(0===this.pointCount)return l;var h=g[2]-g[0],q=g[3]-g[1],t=this.points,v=0,w=t.length>>>1,A;for(A=0;A<w;A++){var z=t[2*A],y=t[2*A+1];z>=g[0]&&z<=g[2]&&y>=g[1]&&y<=g[3]&&v++}t=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,
this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(v,.33333)));e[0]=2/h;e[4]=2/q;e[6]=-2*g[0]/h-1;e[7]=-2*g[1]/q-1;this.offsetBuffer.bind();c.bind();c.attributes.position.pointer();c.uniforms.matrix=e;c.uniforms.color=this.color;c.uniforms.borderColor=this.borderColor;c.uniforms.pointCloud=5>t;c.uniforms.pointSize=t;c.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio)));m&&(f[0]=l&255,f[1]=l>>8&255,f[2]=l>>16&255,f[3]=l>>24&255,this.pickBuffer.bind(),c.attributes.pickId.pointer(d.UNSIGNED_BYTE),
c.uniforms.pickOffset=f,this.pickOffset=l);m=d.getParameter(d.BLEND);c=d.getParameter(d.DITHER);m&&!this.blend&&d.disable(d.BLEND);c&&d.disable(d.DITHER);d.drawArrays(d.POINTS,0,this.pointCount);m&&!this.blend&&d.enable(d.BLEND);c&&d.enable(d.DITHER);return l+this.pointCount}}();b.draw=b.unifiedDraw;b.drawPick=b.unifiedDraw;b.pick=function(e,f,l){e=this.pickOffset;f=this.pointCount;if(l<e||l>=e+f)return null;l-=e;e=this.points;return{object:this,pointId:l,dataCoord:[e[2*l],e[2*l+1]]}}},{"./lib/shader":302,
"gl-buffer":258,"gl-shader":312,"typedarray-pool":567}],304:[function(b,D,G){D.exports=function(r,n,p,k){var a=n[0],e=n[1],f=n[2];n=n[3];var l=p[0],m=p[1],c=p[2];p=p[3];var d=a*l+e*m+f*c+n*p;0>d&&(d=-d,l=-l,m=-m,c=-c,p=-p);if(1E-6<1-d){var g=Math.acos(d);var h=Math.sin(g);d=Math.sin((1-k)*g)/h;k=Math.sin(k*g)/h}else d=1-k;r[0]=d*a+k*l;r[1]=d*e+k*m;r[2]=d*f+k*c;r[3]=d*n+k*p;return r}},{}],305:[function(b,D,G){D.exports=function(r){return r||0===r?r.toString():""}},{}],306:[function(b,D,G){var r=b("vectorize-text");
D.exports=function(p,k,a){var e=n[k];e||(e=n[k]={});if(p in e)return e[p];var f={textAlign:"center",textBaseline:"middle",lineHeight:1,font:k,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0};k=r(p,f);f.triangles=!1;f=r(p,f);var l,m;if(a&&1!==a){for(l=0;l<k.positions.length;++l)for(m=0;m<k.positions[l].length;++m)k.positions[l][m]/=a;for(l=0;l<f.positions.length;++l)for(m=0;m<f.positions[l].length;++m)f.positions[l][m]/=a}a=[[Infinity,Infinity],
[-Infinity,-Infinity]];var c=f.positions.length;for(l=0;l<c;++l){var d=f.positions[l];for(m=0;2>m;++m)a[0][m]=Math.min(a[0][m],d[m]),a[1][m]=Math.max(a[1][m],d[m])}return e[p]=[k,f,a]};var n={}},{"vectorize-text":572}],307:[function(b,D,G){function r(h,q){h=n(h,q);q=h.attributes;q.position.location=0;q.color.location=1;q.glyph.location=2;q.id.location=3;return h}var n=b("gl-shader"),p=b("glslify");b=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d 1.0;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      scale \x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1);\n    vec4 viewPosition \x3d view * worldPosition;\n    viewPosition \x3d viewPosition / viewPosition.w;\n    vec4 clipPosition \x3d projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
D=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float scale \x3d pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) \x3c 0.001) {\n      scale *\x3d highlightScale;\n    }\n\n    vec4 worldPosition \x3d model * vec4(position, 1.0);\n    vec4 viewPosition \x3d view * worldPosition;\n    vec4 clipPosition \x3d projection * viewPosition;\n    clipPosition /\x3d clipPosition.w;\n\n    gl_Position \x3d clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d position;\n  }\n}"]);
var k=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position \x3d vec4(0,0,0,0);\n  } else {\n    float lscale \x3d pixelRatio * scale;\n    if(distance(highlightId, id) \x3c 0.0001) {\n      lscale *\x3d highlightScale;\n    }\n\n    vec4 clipCenter   \x3d projection * view * model * vec4(position, 1);\n    vec3 dataPosition \x3d position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition \x3d projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position \x3d clipPosition;\n    interpColor \x3d color;\n    pickId \x3d id;\n    dataCoordinate \x3d dataPosition;\n  }\n}\n"]),
a=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity \x3d\x3d 0.\n  ) discard;\n  gl_FragColor \x3d interpColor * opacity;\n}\n"]);
p=p(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor \x3d vec4(pickGroup, pickId.bgr);\n}"]);
var e=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],f={vertex:b,fragment:a,attributes:e},l={vertex:D,fragment:a,attributes:e},m={vertex:k,fragment:a,attributes:e},c={vertex:b,fragment:p,attributes:e},d={vertex:D,fragment:p,attributes:e},g={vertex:k,fragment:p,attributes:e};G.createPerspective=function(h){return r(h,f)};G.createOrtho=function(h){return r(h,l)};G.createProject=function(h){return r(h,m)};G.createPickPerspective=function(h){return r(h,
c)};G.createPickOrtho=function(h){return r(h,d)};G.createPickProject=function(h){return r(h,g)}},{"gl-shader":312,glslify:413}],308:[function(b,D,G){function r(E,L){var P=E[0],N=E[1],Q=E[2],O=E[3];E[0]=L[0]*P+L[4]*N+L[8]*Q+L[12]*O;E[1]=L[1]*P+L[5]*N+L[9]*Q+L[13]*O;E[2]=L[2]*P+L[6]*N+L[10]*Q+L[14]*O;E[3]=L[3]*P+L[7]*N+L[11]*Q+L[15]*O;return E}function n(E,L,P,N){r(N,N,P);r(N,N,L);return r(N,N,E)}function p(E,L){this.index=E;this.dataCoordinate=this.position=L}function k(E){return!0===E||1<E?1:E}function a(E,
L,P,N,Q,O,T,V,Z,aa,Y,ea){this.gl=E;this.pixelRatio=1;this.shader=L;this.orthoShader=P;this.projectShader=N;this.pointBuffer=Q;this.colorBuffer=O;this.glyphBuffer=T;this.idBuffer=V;this.vao=Z;this.lineVertexCount=this.vertexCount=0;this.opacity=1;this.hasAlpha=!1;this.lineWidth=0;this.projectScale=[2/3,2/3,2/3];this.projectOpacity=[1,1,1];this.projectHasAlpha=!1;this.pickId=0;this.pickPerspectiveShader=aa;this.pickOrthoShader=Y;this.pickProjectShader=ea;this.points=[];this._selectResult=new p(0,[0,
0,0]);this.useOrtho=!0;this.bounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.axesProject=[!0,!0,!0];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.highlightId=[1,1,1,1];this.highlightScale=2;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.dirty=!0}function e(E){E[0]=E[1]=E[2]=0;return E}function f(E,L){E[0]=L[0];E[1]=L[1];E[2]=L[2];E[3]=1;return E}function l(E,L,P,N){E[0]=L[0];E[1]=L[1];E[2]=L[2];E[P]=
N;return E}function m(E,L,P,N,Q,O,T){var V=P.gl;if(O===P.projectHasAlpha||T){for(var Z=P.axesProject,aa=P.gl,Y=L.uniforms,ea=N.model||z,ca=N.view||z,ba=N.projection||z,ka=P.axesBounds,qa=P.clipBounds,pa=I,oa=0;2>oa;++oa)for(var ja=0;3>ja;++ja)pa[oa][ja]=Math.max(Math.min(qa[oa][ja],1E8),-1E8);qa=P.axes&&P.axes.lastCubeProps?P.axes.lastCubeProps.axis:[1,1,1];y[0]=2/aa.drawingBufferWidth;y[1]=2/aa.drawingBufferHeight;L.bind();Y.view=ca;Y.projection=ba;Y.screenSize=y;Y.highlightId=P.highlightId;Y.highlightScale=
P.highlightScale;Y.clipBounds=pa;Y.pickGroup=P.pickId/255;Y.pixelRatio=Q;for(L=0;3>L;++L)if(Z[L]){Y.scale=P.projectScale[L];Y.opacity=P.projectOpacity[L];oa=H;for(var ra=0;16>ra;++ra)oa[ra]=0;for(ra=0;4>ra;++ra)oa[5*ra]=1;oa[5*L]=0;oa[12+L]=0>qa[L]?ka[0][L]:ka[1][L];t(oa,ea,oa);Y.model=oa;oa=(L+1)%3;ja=(L+2)%3;var ha=e(B),la=e(C);ha[oa]=1;la[ja]=1;ra=n(ba,ca,ea,f(u,ha));var ua=n(ba,ca,ea,f(F,la));if(Math.abs(ra[1])>Math.abs(ua[1])){var na=ra;ra=ua;ua=na;na=ha;ha=la;la=na;na=oa;oa=ja;ja=na}0>ra[0]&&
(ha[oa]=-1);0<ua[1]&&(la[ja]=-1);for(ra=na=ua=0;4>ra;++ra)ua+=Math.pow(ea[4*oa+ra],2),na+=Math.pow(ea[4*ja+ra],2);ha[oa]/=Math.sqrt(ua);la[ja]/=Math.sqrt(na);Y.axes[0]=ha;Y.axes[1]=la;Y.fragClipBounds[0]=l(J,pa[0],L,-1E8);Y.fragClipBounds[1]=l(J,pa[1],L,1E8);P.vao.bind();P.vao.draw(aa.TRIANGLES,P.vertexCount);0<P.lineWidth&&(aa.lineWidth(P.lineWidth*Q),P.vao.draw(aa.LINES,P.lineVertexCount,P.vertexCount));P.vao.unbind()}}if(O===P.hasAlpha||T)E.bind(),E=E.uniforms,E.model=N.model||z,E.view=N.view||
z,E.projection=N.projection||z,y[0]=2/V.drawingBufferWidth,y[1]=2/V.drawingBufferHeight,E.screenSize=y,E.highlightId=P.highlightId,E.highlightScale=P.highlightScale,E.fragClipBounds=M,E.clipBounds=P.axes.bounds,E.opacity=P.opacity,E.pickGroup=P.pickId/255,E.pixelRatio=Q,P.vao.bind(),P.vao.draw(V.TRIANGLES,P.vertexCount),0<P.lineWidth&&(V.lineWidth(P.lineWidth*Q),P.vao.draw(V.LINES,P.lineVertexCount,P.vertexCount)),P.vao.unbind()}function c(E,L,P,N){L=Array.isArray(E)?L<E.length?E[L]:void 0:E;L=A(L);
E=!0;d(L)&&(L="▼",E=!1);P=w(L,P,N);return{mesh:P[0],lines:P[1],bounds:P[2],visible:E}}var d=b("is-string-blank"),g=b("gl-buffer"),h=b("gl-vao"),q=b("typedarray-pool"),t=b("gl-mat4/multiply"),v=b("./lib/shaders"),w=b("./lib/glyphs"),A=b("./lib/get-simple-string"),z=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];D.exports=function(E){var L=E.gl,P=v.createPerspective(L),N=v.createOrtho(L),Q=v.createProject(L),O=v.createPickPerspective(L),T=v.createPickOrtho(L),V=v.createPickProject(L),Z=g(L),aa=g(L),Y=g(L),ea=g(L),
ca=h(L,[{buffer:Z,size:3,type:L.FLOAT},{buffer:aa,size:4,type:L.FLOAT},{buffer:Y,size:2,type:L.FLOAT},{buffer:ea,size:4,type:L.UNSIGNED_BYTE,normalized:!0}]);L=new a(L,P,N,Q,Z,aa,Y,ea,ca,O,T,V);L.update(E);return L};b=a.prototype;b.pickSlots=1;b.setPickBase=function(E){this.pickId=E};b.isTransparent=function(){if(this.hasAlpha)return!0;for(var E=0;3>E;++E)if(this.axesProject[E]&&this.projectHasAlpha)return!0;return!1};b.isOpaque=function(){if(!this.hasAlpha)return!0;for(var E=0;3>E;++E)if(this.axesProject[E]&&
!this.projectHasAlpha)return!0;return!1};var y=[0,0],B=[0,0,0],C=[0,0,0],u=[0,0,0,1],F=[0,0,0,1],H=z.slice(),J=[0,0,0],I=[[0,0,0],[0,0,0]],M=[[-1E8,-1E8,-1E8],[1E8,1E8,1E8]];b.draw=function(E){m(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,E,this.pixelRatio,!1,!1)};b.drawTransparent=function(E){m(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,E,this.pixelRatio,!0,!1)};b.drawPick=function(E){m(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,
this,E,1,!0,!0)};b.pick=function(E){if(!E||E.id!==this.pickId)return null;var L=E.value[2]+(E.value[1]<<8)+(E.value[0]<<16);if(L>=this.pointCount||0>L)return null;E=this.points[L];var P=this._selectResult;P.index=L;for(L=0;3>L;++L)P.position[L]=P.dataCoordinate[L]=E[L];return P};b.highlight=function(E){E?(E=E.index,this.highlightId=[(E&255)/255,(E>>8&255)/255,(E>>16&255)/255,0]):this.highlightId=[1,1,1,1]};b.update=function(E){E=E||{};"perspective"in E&&(this.useOrtho=!E.perspective);"orthographic"in
E&&(this.useOrtho=!!E.orthographic);"lineWidth"in E&&(this.lineWidth=E.lineWidth);if("project"in E)if(Array.isArray(E.project))this.axesProject=E.project;else{var L=!!E.project;this.axesProject=[L,L,L]}"projectScale"in E&&(Array.isArray(E.projectScale)?this.projectScale=E.projectScale.slice():(L=+E.projectScale,this.projectScale=[L,L,L]));this.projectHasAlpha=!1;if("projectOpacity"in E){Array.isArray(E.projectOpacity)?this.projectOpacity=E.projectOpacity.slice():(L=+E.projectOpacity,this.projectOpacity=
[L,L,L]);for(var P=0;3>P;++P)this.projectOpacity[P]=k(this.projectOpacity[P]),1>this.projectOpacity[P]&&(this.projectHasAlpha=!0)}this.hasAlpha=!1;"opacity"in E&&(this.opacity=k(E.opacity),1>this.opacity&&(this.hasAlpha=!0));this.dirty=!0;L=E.position;var N=E.font||"normal",Q=E.alignment||[0,0];if(2===Q.length){var O=Q[0];var T=Q[1]}else for(O=[],T=[],P=0;P<Q.length;++P)O[P]=Q[P][0],T[P]=Q[P][1];Q=[Infinity,Infinity,Infinity];var V=[-Infinity,-Infinity,-Infinity],Z=E.glyph,aa=E.color,Y=E.size,ea=
E.angle;E=E.lineColor;var ca=-1,ba=0,ka=0,qa=0;if(L.length)a:for(qa=L.length,P=0;P<qa;++P){for(var pa=L[P],oa=0;3>oa;++oa)if(isNaN(pa[oa])||!isFinite(pa[oa]))continue a;var ja=c(Z,P,N,this.pixelRatio),ra=ja.mesh,ha=ja.lines;ba+=3*ra.cells.length;ka+=2*ha.edges.length}P=ba+ka;var la=q.mallocFloat(3*P),ua=q.mallocFloat(4*P),na=q.mallocFloat(2*P),wa=q.mallocUint32(P);if(0<P){var Ca=0,Fa=ba,Xa=[0,0,0,1],ab=[0,0,0,1],gb=Array.isArray(aa)&&Array.isArray(aa[0]),bb=Array.isArray(E)&&Array.isArray(E[0]);P=
0;a:for(;P<qa;++P){ca+=1;pa=L[P];for(oa=0;3>oa;++oa){if(isNaN(pa[oa])||!isFinite(pa[oa]))continue a;V[oa]=Math.max(V[oa],pa[oa]);Q[oa]=Math.min(Q[oa],pa[oa])}ja=c(Z,P,N,this.pixelRatio);ra=ja.mesh;ha=ja.lines;var La=ja.bounds;var kb=ja.visible;if(kb)if(Array.isArray(aa))if(ja=gb?P<aa.length?aa[P]:[0,0,0,0]:aa,3===ja.length){for(oa=0;3>oa;++oa)Xa[oa]=ja[oa];Xa[3]=1}else{if(4===ja.length){for(oa=0;4>oa;++oa)Xa[oa]=ja[oa];!this.hasAlpha&&1>ja[3]&&(this.hasAlpha=!0)}}else Xa[0]=Xa[1]=Xa[2]=0,Xa[3]=1;
else Xa=[1,1,1,0];if(kb)if(Array.isArray(E))if(ja=bb?P<E.length?E[P]:[0,0,0,0]:E,3===ja.length){for(oa=0;3>oa;++oa)ab[oa]=ja[oa];ab[oa]=1}else{if(4===ja.length){for(oa=0;4>oa;++oa)ab[oa]=ja[oa];!this.hasAlpha&&1>ja[3]&&(this.hasAlpha=!0)}}else ab[0]=ab[1]=ab[2]=0,ab[3]=1;else ab=[1,1,1,0];ja=.5;kb?Array.isArray(Y)?ja=P<Y.length?+Y[P]:12:Y?ja=+Y:this.useOrtho&&(ja=12):ja=0;pa=0;Array.isArray(ea)?pa=P<ea.length?+ea[P]:0:ea&&(pa=+ea);kb=Math.cos(pa);var mb=Math.sin(pa);pa=L[P];for(oa=0;3>oa;++oa)V[oa]=
Math.max(V[oa],pa[oa]),Q[oa]=Math.min(Q[oa],pa[oa]);oa=0;Array.isArray(O)?oa=P<O.length?O[P]:0:O&&(oa=O);var ya=0;Array.isArray(T)?ya=P<T.length?T[P]:0:T&&(ya=T);oa*=0<oa?1-La[0][0]:0>oa?1+La[1][0]:1;ya*=0<ya?1-La[0][1]:0>ya?1+La[1][1]:1;La=[oa,ya];ya=ra.cells||[];ra=ra.positions||[];for(oa=0;oa<ya.length;++oa)for(var Ia=ya[oa],Na=0;3>Na;++Na){for(var Ta=0;3>Ta;++Ta)la[3*Ca+Ta]=pa[Ta];for(Ta=0;4>Ta;++Ta)ua[4*Ca+Ta]=Xa[Ta];wa[Ca]=ca;Ta=ra[Ia[Na]];na[2*Ca]=ja*(kb*Ta[0]-mb*Ta[1]+La[0]);na[2*Ca+1]=ja*
(mb*Ta[0]+kb*Ta[1]+La[1]);Ca+=1}ya=ha.edges;ra=ha.positions;for(oa=0;oa<ya.length;++oa)for(Ia=ya[oa],Na=0;2>Na;++Na){for(Ta=0;3>Ta;++Ta)la[3*Fa+Ta]=pa[Ta];for(Ta=0;4>Ta;++Ta)ua[4*Fa+Ta]=ab[Ta];wa[Fa]=ca;Ta=ra[Ia[Na]];na[2*Fa]=ja*(kb*Ta[0]-mb*Ta[1]+La[0]);na[2*Fa+1]=ja*(mb*Ta[0]+kb*Ta[1]+La[1]);Fa+=1}}}this.bounds=[Q,V];this.points=L;this.pointCount=L.length;this.vertexCount=ba;this.lineVertexCount=ka;this.pointBuffer.update(la);this.colorBuffer.update(ua);this.glyphBuffer.update(na);this.idBuffer.update(wa);
q.free(la);q.free(ua);q.free(na);q.free(wa)};b.dispose=function(){this.shader.dispose();this.orthoShader.dispose();this.pickPerspectiveShader.dispose();this.pickOrthoShader.dispose();this.vao.dispose();this.pointBuffer.dispose();this.colorBuffer.dispose();this.glyphBuffer.dispose();this.idBuffer.dispose()}},{"./lib/get-simple-string":305,"./lib/glyphs":306,"./lib/shaders":307,"gl-buffer":258,"gl-mat4/multiply":280,"gl-vao":332,"is-string-blank":444,"typedarray-pool":567}],309:[function(b,D,G){b=b("glslify");
G.boxVertex=b(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position \x3d vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]);G.boxFragment=b(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor \x3d color;\n}\n"])},{glslify:413}],310:[function(b,D,G){function r(a,e,f){this.plot=a;this.boxBuffer=e;this.boxShader=f;this.enabled=!0;this.selectBox=[Infinity,Infinity,-Infinity,
-Infinity];this.borderColor=[0,0,0,1];this.innerFill=!1;this.innerColor=[0,0,0,.25];this.outerFill=!0;this.outerColor=[0,0,0,.5];this.borderWidth=10}var n=b("gl-shader"),p=b("gl-buffer"),k=b("./lib/shaders");D.exports=function(a,e){var f=a.gl,l=p(f,[0,0,0,1,1,0,1,1]);f=n(f,k.boxVertex,k.boxFragment);l=new r(a,l,f);l.update(e);a.addOverlay(l);return l};b=r.prototype;b.draw=function(){if(this.enabled){var a=this.plot,e=this.selectBox,f=this.borderWidth,l=this.innerColor,m=this.outerColor,c=this.borderColor,
d=a.box,g=a.screenBox,h=a.dataBox,q=a.viewBox,t=a.pixelRatio;a=(e[0]-h[0])*(q[2]-q[0])/(h[2]-h[0])+q[0];var v=(e[1]-h[1])*(q[3]-q[1])/(h[3]-h[1])+q[1],w=(e[2]-h[0])*(q[2]-q[0])/(h[2]-h[0])+q[0];e=(e[3]-h[1])*(q[3]-q[1])/(h[3]-h[1])+q[1];a=Math.max(a,q[0]);v=Math.max(v,q[1]);w=Math.min(w,q[2]);e=Math.min(e,q[3]);w<a||e<v||(d.bind(),q=g[2]-g[0],g=g[3]-g[1],this.outerFill&&(d.drawBox(0,0,q,v,m),d.drawBox(0,v,a,e,m),d.drawBox(0,e,q,g,m),d.drawBox(w,v,q,e,m)),this.innerFill&&d.drawBox(a,v,w,e,l),0<f&&
(f*=t,d.drawBox(a-f,v-f,w+f,v+f,c),d.drawBox(a-f,e-f,w+f,e+f,c),d.drawBox(a-f,v-f,a+f,e+f,c),d.drawBox(w-f,v-f,w+f,e+f,c)))}};b.update=function(a){a=a||{};this.innerFill=!!a.innerFill;this.outerFill=!!a.outerFill;this.innerColor=(a.innerColor||[0,0,0,.5]).slice();this.outerColor=(a.outerColor||[0,0,0,.5]).slice();this.borderColor=(a.borderColor||[0,0,0,1]).slice();this.borderWidth=a.borderWidth||0;this.selectBox=(a.selectBox||this.selectBox).slice()};b.dispose=function(){this.boxBuffer.dispose();
this.boxShader.dispose();this.plot.removeOverlay(this)}},{"./lib/shaders":309,"gl-buffer":258,"gl-shader":312}],311:[function(b,D,G){function r(f,l,m,c,d){this.coord=[f,l];this.id=m;this.value=c;this.distance=d}function n(f,l,m){this.gl=f;this.fbo=l;this.buffer=m;this._readTimeout=null;var c=this;this._readCallback=function(){c.gl&&(l.bind(),f.readPixels(0,0,l.shape[0],l.shape[1],f.RGBA,f.UNSIGNED_BYTE,c.buffer),c._readTimeout=null)}}D.exports=function(f,l){var m=l[0],c=l[1];l=p(f,m,c,{});m=k.mallocUint8(m*
c*4);return new n(f,l,m)};var p=b("gl-fbo"),k=b("typedarray-pool"),a=b("ndarray"),e=b("bit-twiddle").nextPow2;b=n.prototype;Object.defineProperty(b,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(f){if(this.gl){this.fbo.shape=f;var l=this.fbo.shape[0],m=this.fbo.shape[1];if(m*l*4>this.buffer.length){k.free(this.buffer);for(var c=this.buffer=k.mallocUint8(e(m*l*4)),d=0;d<m*l*4;++d)c[d]=255}return f}}});b.begin=function(){var f=this.gl;f&&(this.fbo.bind(),f.clearColor(1,
1,1,1),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT))};b.end=function(){var f=this.gl;f&&(f.bindFramebuffer(f.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))};b.query=function(f,l,m){if(!this.gl)return null;var c=this.fbo.shape.slice();f|=0;l|=0;"number"!==typeof m&&(m=1);var d=Math.min(Math.max(f-m,0),c[0])|0,g=Math.min(Math.max(f+m,0),c[0])|0;f=Math.min(Math.max(l-m,0),c[1])|0;l=Math.min(Math.max(l+m,0),c[1])|0;if(g<=d||l<=
f)return null;l=[g-d,l-f];c=a(this.buffer,[l[0],l[1],4],[4,4*c[0],1],4*(d+c[0]*f));l=c.hi(l[0],l[1],1);g=m;for(var h=1E8,q=-1,t=-1,v=l.shape[0],w=l.shape[1],A=0;A<v;A++)for(var z=0;z<w;z++){var y=l.get(A,z,0),B=l.get(A,z,1),C=l.get(A,z,2),u=l.get(A,z,3);if(255>y||255>B||255>C||255>u)y=g-A,B=m-z,y=y*y+B*B,y<h&&(h=y,q=A,t=z)}l=[q,t,h];g=l[0];m=l[1];if(0>g||Math.pow(this.radius,2)<l[2])return null;h=c.get(g,m,0);q=c.get(g,m,1);t=c.get(g,m,2);c=c.get(g,m,3);return new r(g+d|0,m+f|0,h,[q,t,c],Math.sqrt(l[2]))};
b.dispose=function(){this.gl&&(this.fbo.dispose(),k.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":97,"gl-fbo":266,ndarray:469,"typedarray-pool":567}],312:[function(b,D,G){function r(m){this.gl=m;this.gl.lastAttribCount=0;this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function n(m,c){return m.name<c.name?-1:1}var p=b("./lib/create-uniforms"),k=b("./lib/create-attributes"),
a=b("./lib/reflect"),e=b("./lib/shader-cache"),f=b("./lib/runtime-reflect"),l=b("./lib/GLError");b=r.prototype;b.bind=function(){this.program||this._relink();var m,c=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),d=this.gl.lastAttribCount;if(c>d)for(m=d;m<c;m++)this.gl.enableVertexAttribArray(m);else if(d>c)for(m=c;m<d;m++)this.gl.disableVertexAttribArray(m);this.gl.lastAttribCount=c;this.gl.useProgram(this.program)};b.dispose=function(){for(var m=this.gl.lastAttribCount,c=0;c<
m;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=0;this._fref&&this._fref.dispose();this._vref&&this._vref.dispose();this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};b.update=function(m,c,d,g){function h(){t.program=e.program(v,t._vref,t._fref,w,A);for(var H=0;H<d.length;++H)F[H]=v.getUniformLocation(t.program,d[H].name)}if(!c||1===arguments.length){var q=m;m=q.vertex;c=q.fragment;d=q.uniforms;g=q.attributes}var t=this,
v=t.gl;q=t._vref;t._vref=e.shader(v,v.VERTEX_SHADER,m);q&&q.dispose();t.vertShader=t._vref.shader;q=this._fref;t._fref=e.shader(v,v.FRAGMENT_SHADER,c);q&&q.dispose();t.fragShader=t._fref.shader;if(!d||!g){q=v.createProgram();v.attachShader(q,t.fragShader);v.attachShader(q,t.vertShader);v.linkProgram(q);if(!v.getProgramParameter(q,v.LINK_STATUS))throw q=v.getProgramInfoLog(q),new l(q,"Error linking program:"+q);d=d||f.uniforms(v,q);g=g||f.attributes(v,q);v.deleteProgram(q)}g=g.slice();g.sort(n);q=
[];var w=[],A=[],z;for(z=0;z<g.length;++z){var y=g[z];if(0<=y.type.indexOf("mat")){for(var B=y.type.charAt(y.type.length-1)|0,C=Array(B),u=0;u<B;++u)C[u]=A.length,w.push(y.name+"["+u+"]"),"number"===typeof y.location?A.push(y.location+u):Array.isArray(y.location)&&y.location.length===B&&"number"===typeof y.location[u]?A.push(y.location[u]|0):A.push(-1);q.push({name:y.name,type:y.type,locations:C})}else q.push({name:y.name,type:y.type,locations:[A.length]}),w.push(y.name),"number"===typeof y.location?
A.push(y.location|0):A.push(-1)}for(z=y=0;z<A.length;++z)if(0>A[z]){for(;0<=A.indexOf(y);)y+=1;A[z]=y}var F=Array(d.length);h();t._relink=h;t.types={uniforms:a(d),attributes:a(g)};t.attributes=k(v,t,q,A);Object.defineProperty(t,"uniforms",p(v,t,d,F))};D.exports=function(m,c,d,g,h){m=new r(m);m.update(c,d,g,h);return m}},{"./lib/GLError":313,"./lib/create-attributes":314,"./lib/create-uniforms":315,"./lib/reflect":316,"./lib/runtime-reflect":317,"./lib/shader-cache":318}],313:[function(b,D,G){function r(n,
p,k){this.shortMessage=p||"";this.longMessage=k||"";this.rawError=n||"";this.message="gl-shader: "+(p||n||"")+(k?"\n"+k:"");this.stack=Error().stack}r.prototype=Error();r.prototype.name="GLError";r.prototype.constructor=r;D.exports=r},{}],314:[function(b,D,G){function r(a,e,f,l,m,c){this._gl=a;this._wrapper=e;this._index=f;this._locations=l;this._dimension=m;this._constFunc=c}function n(a,e,f,l,m,c,d){for(var g=["gl","v"],h=[],q=0;q<m;++q)g.push("x"+q),h.push("x"+q);g.push("if(x0.length\x3d\x3d\x3dvoid 0){return gl.vertexAttrib"+
m+"f(v,"+h.join()+")}else{return gl.vertexAttrib"+m+"fv(v,x0)}");var t=Function.apply(null,g),v=new r(a,e,f,l,m,t);Object.defineProperty(c,d,{set:function(w){a.disableVertexAttribArray(l[f]);t(a,l[f],w);return w},get:function(){return v},enumerable:!0})}function p(a,e,f,l,m,c,d){for(var g=Array(m),h=Array(m),q=0;q<m;++q)n(a,e,f[q],l,m,g,q),h[q]=g[q];Object.defineProperty(g,"location",{set:function(w){if(Array.isArray(w))for(var A=0;A<m;++A)h[A].location=w[A];else for(A=0;A<m;++A)h[A].location=w+A;
return w},get:function(){for(var w=Array(m),A=0;A<m;++A)w[A]=l[f[A]];return w},enumerable:!0});g.pointer=function(w,A,z,y){w=w||a.FLOAT;A=!!A;z=z||m*m;y=y||0;for(var B=0;B<m;++B){var C=l[f[B]];a.vertexAttribPointer(C,m,w,A,z,y+B*m);a.enableVertexAttribArray(C)}};var t=Array(m),v=a["vertexAttrib"+m+"fv"];Object.defineProperty(c,d,{set:function(w){for(var A=0;A<m;++A){var z=l[f[A]];a.disableVertexAttribArray(z);if(Array.isArray(w[0]))v.call(a,z,w[A]);else{for(var y=0;y<m;++y)t[y]=w[m*A+y];v.call(a,
z,t)}}return w},get:function(){return g},enumerable:!0})}D.exports=function(a,e,f,l){for(var m={},c=0,d=f.length;c<d;++c){var g=f[c],h=g.name,q=g.type;g=g.locations;switch(q){case "bool":case "int":case "float":n(a,e,g[0],l,1,m,h);break;default:if(0<=q.indexOf("vec")){var t=q.charCodeAt(q.length-1)-48;if(2>t||4<t)throw new k("","Invalid data type for attribute "+h+": "+q);n(a,e,g[0],l,t,m,h)}else if(0<=q.indexOf("mat")){t=q.charCodeAt(q.length-1)-48;if(2>t||4<t)throw new k("","Invalid data type for attribute "+
h+": "+q);p(a,e,g,l,t,m,h)}else throw new k("","Unknown data type for attribute "+h+": "+q);}}return m};var k=b("./GLError");b=r.prototype;b.pointer=function(a,e,f,l){var m=this._gl,c=this._locations[this._index];m.vertexAttribPointer(c,this._dimension,a||m.FLOAT,!!e,f||0,l||0);m.enableVertexAttribArray(c)};b.set=function(a,e,f,l){return this._constFunc(this._locations[this._index],a,e,f,l)};Object.defineProperty(b,"location",{get:function(){return this._locations[this._index]},set:function(a){a!==
this._locations[this._index]&&(this._locations[this._index]=a|0,this._wrapper.program=null);return a|0}})},{"./GLError":313}],315:[function(b,D,G){function r(a){return(new Function("y","return function(){return y}"))(a)}function n(a,e){for(var f=Array(a),l=0;l<a;++l)f[l]=e;return f}var p=b("./reflect"),k=b("./GLError");D.exports=function(a,e,f,l){function m(v,w,A){switch(A){case "bool":case "int":case "sampler2D":case "samplerCube":return"gl.uniform1i(locations["+w+"],obj"+v+")";case "float":return"gl.uniform1f(locations["+
w+"],obj"+v+")";default:var z=A.indexOf("vec");if(0<=z&&1>=z&&A.length===4+z){z=A.charCodeAt(A.length-1)-48;if(2>z||4<z)throw new k("","Invalid data type");switch(A.charAt(0)){case "b":case "i":return"gl.uniform"+z+"iv(locations["+w+"],obj"+v+")";case "v":return"gl.uniform"+z+"fv(locations["+w+"],obj"+v+")";default:throw new k("","Unrecognized data type for vector "+name+": "+A);}}else{if(0===A.indexOf("mat")&&4===A.length){z=A.charCodeAt(A.length-1)-48;if(2>z||4<z)throw new k("","Invalid uniform dimension type for matrix "+
name+": "+A);return"gl.uniformMatrix"+z+"fv(locations["+w+"],false,obj"+v+")"}throw new k("","Unknown uniform data type for "+name+": "+A);}}}function c(v,w){if("object"!==typeof w)return[[v,w]];var A=[],z;for(z in w){var y=w[z],B=v;B=parseInt(z)+""===z?B+("["+z+"]"):B+("."+z);"object"===typeof y?A.push.apply(A,c(B,y)):A.push([B,y])}return A}function d(v){var w=["return function updateProperty(obj){"];v=c("",v);for(var A=0;A<v.length;++A){var z=v[A],y=z[0];z=z[1];l[z]&&w.push(m(y,z,f[z].type))}w.push("return obj}");
return(new Function("gl","locations",w.join("\n")))(a,l)}function g(v){switch(v){case "bool":return!1;case "int":case "sampler2D":case "samplerCube":return 0;case "float":return 0;default:var w=v.indexOf("vec");if(0<=w&&1>=w&&v.length===4+w){w=v.charCodeAt(v.length-1)-48;if(2>w||4<w)throw new k("","Invalid data type");return"b"===v.charAt(0)?n(w,!1):n(w,0)}if(0===v.indexOf("mat")&&4===v.length){w=v.charCodeAt(v.length-1)-48;if(2>w||4<w)throw new k("","Invalid uniform dimension type for matrix "+name+
": "+v);return n(w*w,0)}throw new k("","Unknown uniform data type for "+name+": "+v);}}function h(v,w,A){if("object"===typeof A){var z=q(A);Object.defineProperty(v,w,{get:r(z),set:d(A),enumerable:!0,configurable:!1})}else if(l[A]){z=Object;var y=z.defineProperty;var B=(new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+A+"])}"))(a,e,l);y.call(z,v,w,{get:B,set:d(A),enumerable:!0,configurable:!1})}else v[w]=g(f[A].type)}function q(v){if(Array.isArray(v)){var w=
Array(v.length);for(var A=0;A<v.length;++A)h(w,A,v[A])}else for(A in w={},v)h(w,A,v[A]);return w}var t=p(f,!0);return{get:r(q(t)),set:d(t),enumerable:!0,configurable:!0}}},{"./GLError":313,"./reflect":316}],316:[function(b,D,G){D.exports=function(r,n){for(var p={},k=0;k<r.length;++k)for(var a=r[k].name.split("."),e=p,f=0;f<a.length;++f){var l=a[f].split("[");if(1<l.length){l[0]in e||(e[l[0]]=[]);e=e[l[0]];for(var m=1;m<l.length;++m){var c=parseInt(l[m]);m<l.length-1||f<a.length-1?(c in e||(e[c]=m<
l.length-1?[]:{}),e=e[c]):e[c]=n?k:r[k].type}}else f<a.length-1?(l[0]in e||(e[l[0]]={}),e=e[l[0]]):e[l[0]]=n?k:r[k].type}return p}},{}],317:[function(b,D,G){function r(k,a){if(!p){var e=Object.keys(n);p={};for(var f=0;f<e.length;++f){var l=e[f];p[k[l]]=n[l]}}return p[a]}G.uniforms=function(k,a){for(var e=k.getProgramParameter(a,k.ACTIVE_UNIFORMS),f=[],l=0;l<e;++l){var m=k.getActiveUniform(a,l);if(m){var c=r(k,m.type);if(1<m.size)for(var d=0;d<m.size;++d)f.push({name:m.name.replace("[0]","["+d+"]"),
type:c});else f.push({name:m.name,type:c})}}return f};G.attributes=function(k,a){for(var e=k.getProgramParameter(a,k.ACTIVE_ATTRIBUTES),f=[],l=0;l<e;++l){var m=k.getActiveAttrib(a,l);m&&f.push({name:m.name,type:r(k,m.type)})}return f};var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",
SAMPLER_CUBE:"samplerCube"},p=null},{}],318:[function(b,D,G){function r(l,m,c,d,g,h,q){this.id=l;this.src=m;this.type=c;this.shader=d;this.count=h;this.programs=[];this.cache=q}function n(l){this.gl=l;this.shaders=[{},{}];this.programs={}}function p(l){var m=e.get(l);m||(m=new n(l),e.set(l,m));return m}G.shader=function(l,m,c){return p(l).getShaderReference(m,c)};G.program=function(l,m,c,d,g){return p(l).getProgram(m,c,d,g)};var k=b("./GLError"),a=b("gl-format-compiler-error"),e=new ("undefined"===
typeof WeakMap?b("weakmap-shim"):WeakMap),f=0;r.prototype.dispose=function(){if(0===--this.count){for(var l=this.cache,m=l.gl,c=this.programs,d=0,g=c.length;d<g;++d){var h=l.programs[c[d]];h&&(delete l.programs[d],m.deleteProgram(h))}m.deleteShader(this.shader);delete l.shaders[this.type===m.FRAGMENT_SHADER|0][this.src]}};b=n.prototype;b.getShaderReference=function(l,m){var c=this.gl,d=this.shaders[l===c.FRAGMENT_SHADER|0],g=d[m];if(g&&c.isShader(g.shader))g.count+=1;else{g=c.createShader(l);c.shaderSource(g,
m);c.compileShader(g);if(!c.getShaderParameter(g,c.COMPILE_STATUS)){c=c.getShaderInfoLog(g);try{var h=a(c,m,l)}catch(q){throw console.warn("Failed to format compiler error: "+q),new k(c,"Error compiling shader:\n"+c);}throw new k(c,h.short,h.long);}g=d[m]=new r(f++,m,l,g,[],1,this)}return g};b.getProgram=function(l,m,c,d){var g=[l.id,m.id,c.join(":"),d.join(":")].join("@"),h=this.programs[g];if(!h||!this.gl.isProgram(h)){h=this.programs;var q=this.gl,t=l.shader,v=m.shader,w=q.createProgram();q.attachShader(w,
t);q.attachShader(w,v);for(t=0;t<c.length;++t)q.bindAttribLocation(w,d[t],c[t]);q.linkProgram(w);if(!q.getProgramParameter(w,q.LINK_STATUS))throw l=q.getProgramInfoLog(w),new k(l,"Error linking program: "+l);h[g]=h=w;l.programs.push(g);m.programs.push(g)}return h}},{"./GLError":313,"gl-format-compiler-error":267,"weakmap-shim":577}],319:[function(b,D,G){function r(n){this.plot=n;this.enable=[!0,!0,!1,!1];this.width=[1,1,1,1];this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.center=[Infinity,
Infinity]}D.exports=function(n,p){var k=new r(n);k.update(p);n.addOverlay(k);return k};b=r.prototype;b.update=function(n){n=n||{};this.enable=(n.enable||[!0,!0,!1,!1]).slice();this.width=(n.width||[1,1,1,1]).slice();this.color=(n.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(p){return p.slice()});this.center=(n.center||[Infinity,Infinity]).slice();this.plot.setOverlayDirty()};b.draw=function(){var n=this.enable,p=this.width,k=this.color,a=this.center,e=this.plot,f=e.line,l=e.dataBox;
e=e.viewBox;f.bind();if(l[0]<=a[0]&&a[0]<=l[2]&&l[1]<=a[1]&&a[1]<=l[3]){var m=e[0]+(a[0]-l[0])/(l[2]-l[0])*(e[2]-e[0]);a=e[1]+(a[1]-l[1])/(l[3]-l[1])*(e[3]-e[1]);n[0]&&f.drawLine(m,a,e[0],a,p[0],k[0]);n[1]&&f.drawLine(m,a,m,e[1],p[1],k[1]);n[2]&&f.drawLine(m,a,e[2],a,p[2],k[2]);n[3]&&f.drawLine(m,a,m,e[3],p[3],k[3])}};b.dispose=function(){this.plot.removeOverlay(this)}},{}],320:[function(b,D,G){G=b("glslify");var r=b("gl-shader"),n=G(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition \x3d mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos \x3d projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset \x3d (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta \x3d weight * clipOffset * screenShape;\n  vec2 lineOffset \x3d normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   \x3d vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     \x3d color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),
p=G(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor \x3d fragColor;\n}"]);D.exports=function(k){return r(k,n,p,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":312,glslify:413}],321:[function(b,D,G){function r(m,c,d,g){this.gl=m;this.buffer=c;this.vao=d;this.shader=g;this.pixelRatio=1;this.bounds=[[-1E3,-1E3,-1E3],[1E3,1E3,1E3]];this.position=[0,0,0];this.lineWidth=[2,2,2];this.colors=
[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.enabled=[!0,!0,!0];this.drawSides=[!0,!0,!0];this.axes=null}var n=b("gl-buffer"),p=b("gl-vao"),k=b("./shaders/index");D.exports=function(m,c){function d(v,w,A,z,y,B){v=[v,w,A,0,0,0,1];v[z+3]=1;v[z]=y;g.push.apply(g,v);v[6]=-1;g.push.apply(g,v);v[z]=B;g.push.apply(g,v);g.push.apply(g,v);v[6]=1;g.push.apply(g,v);v[z]=y;g.push.apply(g,v)}var g=[];d(0,0,0,0,0,1);d(0,0,0,1,0,1);d(0,0,0,2,0,1);d(1,0,0,1,-1,1);d(1,0,0,2,-1,1);d(0,1,0,0,-1,1);d(0,1,0,2,-1,1);d(0,0,1,0,
-1,1);d(0,0,1,1,-1,1);var h=n(m,g),q=p(m,[{type:m.FLOAT,buffer:h,size:3,offset:0,stride:28},{type:m.FLOAT,buffer:h,size:3,offset:12,stride:28},{type:m.FLOAT,buffer:h,size:1,offset:24,stride:28}]),t=k(m);t.attributes.position.location=0;t.attributes.color.location=1;t.attributes.weight.location=2;m=new r(m,h,q,t);m.update(c);return m};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b=r.prototype;var e=[0,0,0],f=[0,0,0],l=[0,0];b.isTransparent=function(){return!1};b.drawTransparent=function(m){};b.draw=function(m){var c=
this.gl,d=this.vao,g=this.shader;d.bind();g.bind();var h=m.model||a,q=m.view||a;m=m.projection||a;if(this.axes)var t=this.axes.lastCubeProps.axis;for(var v=0;3>v;++v)t&&0>t[v]?(e[v]=this.bounds[0][v],f[v]=this.bounds[1][v]):(e[v]=this.bounds[1][v],f[v]=this.bounds[0][v]);l[0]=c.drawingBufferWidth;l[1]=c.drawingBufferHeight;g.uniforms.model=h;g.uniforms.view=q;g.uniforms.projection=m;g.uniforms.coordinates=[this.position,e,f];g.uniforms.colors=this.colors;g.uniforms.screenShape=l;for(v=0;3>v;++v)g.uniforms.lineWidth=
this.lineWidth[v]*this.pixelRatio,this.enabled[v]&&(d.draw(c.TRIANGLES,6,6*v),this.drawSides[v]&&d.draw(c.TRIANGLES,12,18+12*v));d.unbind()};b.update=function(m){m&&("bounds"in m&&(this.bounds=m.bounds),"position"in m&&(this.position=m.position),"lineWidth"in m&&(this.lineWidth=m.lineWidth),"colors"in m&&(this.colors=m.colors),"enabled"in m&&(this.enabled=m.enabled),"drawSides"in m&&(this.drawSides=m.drawSides))};b.dispose=function(){this.vao.dispose();this.buffer.dispose();this.shader.dispose()}},
{"./shaders/index":320,"gl-buffer":258,"gl-vao":332}],322:[function(b,D,G){var r=b("glslify");b=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model \x26 view changes.\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * tubePosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  f_lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  f_normal \x3d normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  \x3d model * vec4(tubePosition, 1.0);\n  vec4 t_position  \x3d view * tubePosition;\n  gl_Position      \x3d projection * t_position;\n\n  f_color          \x3d color;\n  f_data           \x3d tubePosition.xyz;\n  f_position       \x3d position.xyz;\n  f_uv             \x3d uv;\n}\n"]);
D=r(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN \x3d max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN \x3d max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H \x3d normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH \x3d max(dot(surfaceNormal, H), 0.0);\n  float VdotH \x3d max(dot(viewDirection, H), 0.000001);\n  float LdotH \x3d max(dot(lightDirection, H), 0.000001);\n  float G1 \x3d (2.0 * NdotH * VdotN) / VdotH;\n  float G2 \x3d (2.0 * NdotH * LdotN) / LdotH;\n  float G \x3d min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D \x3d beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F \x3d pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N \x3d normalize(f_normal);\n  vec3 L \x3d normalize(f_lightDirection);\n  vec3 V \x3d normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor \x3d f_color * texture2D(texture, f_uv);\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d litColor * opacity;\n}\n"]);
var n=r(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz \x3d 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| \x3e 0  U  ||b|| \x3e 0.\n  // Assign z \x3d 0, x \x3d -b, y \x3d a:\n  // a*-b + b*a + c*0 \x3d -ba + ba + 0 \x3d 0\n  if (v.x*v.x \x3e v.z*v.z || v.y*v.y \x3e v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount \x3d 8.0;\n\n  float angle \x3d 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u \x3d getOrthogonalVector(d);\n  vec3 v \x3d normalize(cross(u, d));\n\n  vec3 x \x3d u * cos(angle) * length(d);\n  vec3 y \x3d v * sin(angle) * length(d);\n  vec3 v3 \x3d x + y;\n\n  normal \x3d normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ \x3d getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition \x3d model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position \x3d projection * view * tubePosition;\n  f_id        \x3d id;\n  f_position  \x3d position.xyz;\n}\n"]);
r=r(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor \x3d vec4(pickId, f_id.xyz);\n}"]);
G.meshShader={vertex:b,fragment:D,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]};G.pickShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:413}],323:[function(b,D,G){var r=b("gl-vec3"),n=b("gl-vec4"),p="xyz xzy yxz yzx zxy zyx".split(" "),k=function(d,g,h,q){for(var t=0,v=0;v<d.length;v++)for(var w=d[v].velocities,A=0;A<w.length;A++)t=Math.max(t,
r.length(w[A]));d=d.map(function(I){var M=t,E=I.points,L=I.velocities;I=I.divergences;var P=[],N=[],Q=[],O=[],T=[],V=[],Z=0;n.create();for(var aa=n.create(),Y=0;Y<E.length;Y++){var ea=E[Y],ca=L[Y],ba=I[Y];0===h&&(ba=.05*q);var ka=r.length(ca)/M;var qa=n.create();r.copy(qa,ca);qa[3]=ba;for(ca=0;8>ca;ca++)T[ca]=[ea[0],ea[1],ea[2],ca];if(0<O.length)for(ca=0;8>ca;ca++)ea=(ca+1)%8,P.push(O[ca],T[ca],T[ea],T[ea],O[ea],O[ca]),Q.push(aa,qa,qa,qa,aa,aa),V.push(Z,ka,ka,ka,Z,Z),ea=P.length,N.push([ea-6,ea-5,
ea-4],[ea-3,ea-2,ea-1]);Z=O;O=T;T=Z;aa=qa;Z=ka}return{positions:P,cells:N,vectors:Q,vertexIntensity:V}});w=[];var z=[],y=[],B=[];for(v=0;v<d.length;v++){var C=d[v],u=w.length;w=w.concat(C.positions);y=y.concat(C.vectors);B=B.concat(C.vertexIntensity);for(A=0;A<C.cells.length;A++){var F=C.cells[A],H=[];z.push(H);for(var J=0;J<F.length;J++)H.push(F[J]+u)}}return{positions:w,cells:z,vectors:y,vertexIntensity:B,colormap:g}},a=function(d,g){var h=d.length,q;for(q=0;q<h;q++){var t=d[q];if(t===g)break;else if(t>
g)return q-1}return q},e=function(d,g,h){return d<g?g:d>h?h:d},f=function(d){var g=Infinity;d.sort(function(v,w){return v-w});for(var h=d.length,q=1;q<h;q++){var t=Math.abs(d[q]-d[q-1]);t<g&&(g=t)}return g},l=function(d){for(var g=[],h=[],q=[],t={},v={},w={},A=d.length,z=0;z<A;z++){var y=d[z],B=y[0],C=y[1];y=y[2];t[B]||(g.push(B),t[B]=!0);v[C]||(h.push(C),v[C]=!0);w[y]||(q.push(y),w[y]=!0)}d=f(g);h=f(h);q=f(q);q=Math.min(d,h,q);return isFinite(q)?q:1};D.exports=function(d,g){var h=d.startingPositions,
q=d.maxLength||1E3,t=d.tubeSize||1,v=d.absoluteTubeSize,w=d.gridFill||"+x+y+z",A,z,y;-1!==w.indexOf("-x")&&(A=!0);-1!==w.indexOf("-y")&&(z=!0);-1!==w.indexOf("-z")&&(y=!0);var B=p.indexOf(w.replace(/-/g,"").replace(/\+/g,""));var C=d.getVelocity||function(pa){var oa=d.vectors,ja=d.meshgrid;var ra=pa[0];var ha=pa[1],la=pa[2];pa=ja[0].length;var ua=ja[1].length,na=ja[2].length,wa=a(ja[0],ra),Ca=a(ja[1],ha),Fa=a(ja[2],la),Xa=wa+1,ab=Ca+1,gb=Fa+1;wa=e(wa,0,pa-1);Xa=e(Xa,0,pa-1);Ca=e(Ca,0,ua-1);ab=e(ab,
0,ua-1);Fa=e(Fa,0,na-1);gb=e(gb,0,na-1);if(0>wa||0>Ca||0>Fa||Xa>pa-1||ab>ua-1||gb>na-1)ra=r.create();else{var bb=ja[0][wa],La=ja[1][Ca],kb=ja[2][Fa];ra=(ra-bb)/(ja[0][Xa]-bb);ha=(ha-La)/(ja[1][ab]-La);ja=(la-kb)/(ja[2][gb]-kb);isFinite(ra)||(ra=.5);isFinite(ha)||(ha=.5);isFinite(ja)||(ja=.5);A&&(wa=pa-1-wa,Xa=pa-1-Xa);z&&(Ca=ua-1-Ca,ab=ua-1-ab);y&&(Fa=na-1-Fa,gb=na-1-gb);switch(B){case 5:Ca*=na;ab*=na;wa=wa*na*ua;Xa=Xa*na*ua;break;case 4:wa*=na;Xa*=na;Ca=Ca*na*pa;ab=ab*na*pa;break;case 3:Fa*=ua;gb*=
ua;wa=wa*ua*na;Xa=Xa*ua*na;break;case 2:wa*=ua;Xa*=ua;Fa=Fa*ua*pa;gb=gb*ua*pa;break;case 1:Fa*=pa;gb*=pa;Ca=Ca*pa*na;ab=ab*pa*na;break;default:Ca*=pa,ab*=pa,Fa=Fa*pa*ua,gb=gb*pa*ua}pa=oa[wa+Ca+Fa];ua=oa[wa+Ca+gb];na=oa[wa+ab+Fa];wa=oa[wa+ab+gb];la=oa[Xa+Ca+Fa];Ca=oa[Xa+Ca+gb];Fa=oa[Xa+ab+Fa];kb=oa[Xa+ab+gb];oa=r.create();Xa=r.create();ab=r.create();gb=r.create();r.lerp(oa,pa,la,ra);r.lerp(Xa,ua,Ca,ra);r.lerp(ab,na,Fa,ra);r.lerp(gb,wa,kb,ra);ra=r.create();pa=r.create();r.lerp(ra,oa,ab,ha);r.lerp(pa,
Xa,gb,ha);ha=r.create();r.lerp(ha,ra,pa,ja);ra=ha}return ra};w=d.getDivergence||function(pa,oa){var ja=r.create();r.add(ja,pa,[1E-4,0,0]);var ra=C(ja);r.subtract(ra,ra,oa);r.scale(ra,ra,1E4);r.add(ja,pa,[0,1E-4,0]);var ha=C(ja);r.subtract(ha,ha,oa);r.scale(ha,ha,1E4);r.add(ja,pa,[0,0,1E-4]);pa=C(ja);r.subtract(pa,pa,oa);r.scale(pa,pa,1E4);r.add(ja,ra,ha);r.add(ja,ja,pa);return ja};var u=[],F=g[0][0],H=g[0][1],J=g[0][2],I=g[1][0],M=g[1][1],E=g[1][2],L=function(pa){var oa=pa[0],ja=pa[1];pa=pa[2];return!(oa<
F||oa>I||ja<H||ja>M||pa<J||pa>E)},P=10*r.distance(g[0],g[1])/q,N=P*P;g=1;var Q=0,O=h.length;1<O&&(g=l(h));for(var T=0;T<O;T++){var V=r.create();r.copy(V,h[T]);var Z=[V],aa=[],Y=C(V),ea=V;aa.push(Y);var ca=[],ba=w(V,Y);ba=r.length(ba);isFinite(ba)&&ba>Q&&(Q=ba);ca.push(ba);u.push({points:Z,velocities:aa,divergences:ca});for(var ka=0;ka<100*q&&Z.length<q&&L(V);){ka++;var qa=r.clone(Y);Y=r.squaredLength(qa);if(0===Y)break;else Y>N&&r.scale(qa,qa,P/Math.sqrt(Y));r.add(qa,qa,V);Y=C(qa);r.squaredDistance(ea,
qa)-N>-1E-4*N&&(Z.push(qa),ea=qa,aa.push(Y),ba=w(qa,Y),ba=r.length(ba),isFinite(ba)&&ba>Q&&(Q=ba),ca.push(ba));V=qa}}h=k(u,d.colormap,Q,g);v?h.tubeScale=v:(0===Q&&(Q=1),h.tubeScale=.5*t*g/Q);return h};var m=b("./lib/shaders"),c=b("gl-cone3d").createMesh;D.exports.createTubeMesh=function(d,g){return c(d,g,{shaders:m,traceType:"streamtube"})}},{"./lib/shaders":322,"gl-cone3d":259,"gl-vec3":351,"gl-vec4":387}],324:[function(b,D,G){var r=b("gl-shader");b=b("glslify");var n=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate \x3d vec3(uv.zw, f.x);\n  worldCoordinate \x3d objectOffset + localCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  gl_Position \x3d clipPosition;\n  kill \x3d f.y;\n  value \x3d f.z;\n  planeCoordinate \x3d uv.xy;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate \x3d view * worldPosition;\n  cameraCoordinate.xyz /\x3d cameraCoordinate.w;\n  lightDirection \x3d lightPosition - cameraCoordinate.xyz;\n  eyeDirection   \x3d eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  \x3d normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),
p=b(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH \x3d max(x, 0.0001);\n  float cos2Alpha \x3d NdotH * NdotH;\n  float tan2Alpha \x3d (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 \x3d roughness * roughness;\n  float denom \x3d 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill \x3e 0.0 ||\n    vColor.a \x3d\x3d 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N \x3d normalize(surfaceNormal);\n  vec3 V \x3d normalize(eyeDirection);\n  vec3 L \x3d normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N \x3d -N;\n  }\n\n  float specular \x3d max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  \x3d min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color — in vertex or in fragment\n  vec4 surfaceColor \x3d\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor \x3d surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor \x3d mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),
k=b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate \x3d permutation * vec3(uv.xy, height);\n  worldCoordinate \x3d objectOffset + dataCoordinate;\n  vec4 worldPosition \x3d model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition \x3d projection * view * worldPosition;\n  clipPosition.z +\x3d zOffset;\n\n  gl_Position \x3d clipPosition;\n  value \x3d f + objectOffset.z;\n  kill \x3d -1.0;\n  planeCoordinate \x3d uv.zw;\n\n  vColor \x3d texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   \x3d vec3(1,0,0);\n  eyeDirection    \x3d vec3(0,1,0);\n  lightDirection  \x3d vec3(0,0,1);\n}\n"]),
a=b(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p \x3e max(a, b)) || \n          (p \x3c min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh \x3d 255.0 * v;\n  float upper \x3d floor(vh);\n  float lower \x3d fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill \x3e 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux \x3d splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy \x3d splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor \x3d vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);
G.createShader=function(e){e=r(e,n,p,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);e.attributes.uv.location=0;e.attributes.f.location=1;e.attributes.normal.location=2;return e};G.createPickShader=function(e){e=r(e,n,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);e.attributes.uv.location=0;e.attributes.f.location=1;e.attributes.normal.location=2;return e};G.createContourShader=function(e){e=r(e,k,p,null,[{name:"uv",type:"vec4"},
{name:"f",type:"float"}]);e.attributes.uv.location=0;e.attributes.f.location=1;return e};G.createPickContourShader=function(e){e=r(e,k,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);e.attributes.uv.location=0;e.attributes.f.location=1;return e}},{"gl-shader":312,glslify:413}],325:[function(b,D,G){function r(Y,ea,ca,ba,ka){this.position=Y;this.index=ea;this.uv=ca;this.level=ba;this.dataCoordinate=ka}function n(Y,ea){Y=w([t({colormap:Y,nshades:N,format:"rgba"}).map(function(ca,ba){ba=ea?
k(ba/255,ea):1;return[ca[0],ca[1],ca[2],255*ba]})]);v.divseq(Y,255);return Y}function p(Y,ea,ca,ba,ka,qa,pa,oa,ja,ra,ha,la,ua,na,wa){this.gl=Y;this.shape=ea;this.bounds=ca;this.objectOffset=wa;this.intensityBounds=[];this._shader=ba;this._pickShader=ka;this._coordinateBuffer=qa;this._vao=pa;this._colorMap=oa;this._contourShader=ja;this._contourPickShader=ra;this._contourBuffer=ha;this._contourVAO=la;this._contourOffsets=[[],[],[]];this._contourCounts=[[],[],[]];this._vertexCount=0;this._pickResult=
new r([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]);this._dynamicBuffer=ua;this._dynamicVAO=na;this._dynamicOffsets=[0,0,0];this._dynamicCounts=[0,0,0];this.contourWidth=[1,1,1];this.contourLevels=[[1],[1],[1]];this.contourTint=[0,0,0];this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]];this.showSurface=this.showContour=!0;this.enableHighlight=[!0,!0,!0];this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.highlightTint=[1,1,1];this.highlightLevel=[-1,-1,-1];this.enableDynamic=[!0,!0,!0];this.dynamicLevel=
[NaN,NaN,NaN];this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.dynamicTint=[1,1,1];this.dynamicWidth=[1,1,1];this.axesBounds=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];this.surfaceProject=[!1,!1,!1];this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]];this.colorBounds=[!1,!1];this._field=[A(q.mallocFloat(1024),[0,0]),A(q.mallocFloat(1024),[0,0]),A(q.mallocFloat(1024),[0,0])];this.pickId=1;this.clipBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.snapToData=
!1;this.opacity=this.pixelRatio=1;this.opacityscale=!1;this.lightPosition=[10,1E4,0];this.diffuseLight=this.ambientLight=.8;this.specularLight=2;this.roughness=.5;this.fresnel=1.5;this.vertexColor=0;this.dirty=!0}function k(Y,ea){if(!ea||!ea.length)return 1;for(var ca=0;ca<ea.length&&!(2>ea.length);++ca){if(ea[ca][0]===Y)return ea[ca][1];if(ea[ca][0]>Y&&0<ca)return Y=(ea[ca][0]-Y)/(ea[ca][0]-ea[ca-1][0]),ea[ca][1]*(1-Y)+Y*ea[ca-1][1]}return 1}function a(Y,ea){var ca,ba,ka=ea.axes&&ea.axes.lastCubeProps.axis||
Q,qa=ea.showSurface,pa=ea.showContour;for(ca=0;3>ca;++ca)for(qa=qa||ea.surfaceProject[ca],ba=0;3>ba;++ba)pa=pa||ea.contourProject[ca][ba];for(ca=0;3>ca;++ca){var oa=O.projections[ca];for(ba=0;16>ba;++ba)oa[ba]=0;for(ba=0;4>ba;++ba)oa[5*ba]=1;oa[5*ca]=0;oa[12+ca]=ea.axesBounds[+(0<ka[ca])][ca];y(oa,Y.model,oa);var ja=O.clipBounds[ca];for(oa=0;2>oa;++oa)for(ba=0;3>ba;++ba)ja[oa][ba]=Y.clipBounds[oa][ba];ja[0][ca]=-1E8;ja[1][ca]=1E8}O.showSurface=qa;O.showContour=pa;return O}function e(Y,ea){Y=Y||{};
ea=this.gl;ea.disable(ea.CULL_FACE);this._colorMap.bind(0);var ca=T;ca.model=Y.model||E;ca.view=Y.view||E;ca.projection=Y.projection||E;ca.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]];ca.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]];ca.objectOffset=this.objectOffset;ca.contourColor=this.contourColor[0];ca.inverseModel=B(ca.inverseModel,ca.model);for(Y=0;2>Y;++Y)for(var ba=ca.clipBounds[Y],ka=0;3>ka;++ka)ba[ka]=Math.min(Math.max(this.clipBounds[Y][ka],
-1E8),1E8);ca.kambient=this.ambientLight;ca.kdiffuse=this.diffuseLight;ca.kspecular=this.specularLight;ca.roughness=this.roughness;ca.fresnel=this.fresnel;ca.opacity=this.opacity;ca.height=0;ca.permutation=Z;ca.vertexColor=this.vertexColor;ba=V;y(ba,ca.view,ca.model);y(ba,ca.projection,ba);B(ba,ba);for(Y=0;3>Y;++Y)ca.eyePosition[Y]=ba[12+Y]/ba[15];var qa=ba[15];for(Y=0;3>Y;++Y)qa+=this.lightPosition[Y]*ba[4*Y+3];for(Y=0;3>Y;++Y){var pa=ba[12+Y];for(ka=0;3>ka;++ka)pa+=ba[4*ka+Y]*this.lightPosition[ka];
ca.lightPosition[Y]=pa/qa}ba=a(ca,this);if(ba.showSurface){this._shader.bind();this._shader.uniforms=ca;this._vao.bind();this.showSurface&&this._vertexCount&&this._vao.draw(ea.TRIANGLES,this._vertexCount);for(Y=0;3>Y;++Y)this.surfaceProject[Y]&&this.vertexCount&&(this._shader.uniforms.model=ba.projections[Y],this._shader.uniforms.clipBounds=ba.clipBounds[Y],this._vao.draw(ea.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ba.showContour){qa=this._contourShader;ca.kambient=1;ca.kdiffuse=0;ca.kspecular=
0;ca.opacity=1;qa.bind();qa.uniforms=ca;pa=this._contourVAO;pa.bind();for(Y=0;3>Y;++Y)for(qa.uniforms.permutation=P[Y],ea.lineWidth(this.contourWidth[Y]*this.pixelRatio),ka=0;ka<this.contourLevels[Y].length;++ka){if(ka===this.highlightLevel[Y])qa.uniforms.contourColor=this.highlightColor[Y],qa.uniforms.contourTint=this.highlightTint[Y];else if(0===ka||ka-1===this.highlightLevel[Y])qa.uniforms.contourColor=this.contourColor[Y],qa.uniforms.contourTint=this.contourTint[Y];this._contourCounts[Y][ka]&&
(qa.uniforms.height=this.contourLevels[Y][ka],pa.draw(ea.LINES,this._contourCounts[Y][ka],this._contourOffsets[Y][ka]))}for(Y=0;3>Y;++Y)for(qa.uniforms.model=ba.projections[Y],qa.uniforms.clipBounds=ba.clipBounds[Y],ka=0;3>ka;++ka)if(this.contourProject[Y][ka]){qa.uniforms.permutation=P[ka];ea.lineWidth(this.contourWidth[ka]*this.pixelRatio);for(var oa=0;oa<this.contourLevels[ka].length;++oa){if(oa===this.highlightLevel[ka])qa.uniforms.contourColor=this.highlightColor[ka],qa.uniforms.contourTint=
this.highlightTint[ka];else if(0===oa||oa-1===this.highlightLevel[ka])qa.uniforms.contourColor=this.contourColor[ka],qa.uniforms.contourTint=this.contourTint[ka];this._contourCounts[ka][oa]&&(qa.uniforms.height=this.contourLevels[ka][oa],pa.draw(ea.LINES,this._contourCounts[ka][oa],this._contourOffsets[ka][oa]))}}pa.unbind();pa=this._dynamicVAO;pa.bind();for(Y=0;3>Y;++Y)if(0!==this._dynamicCounts[Y])for(qa.uniforms.model=ca.model,qa.uniforms.clipBounds=ca.clipBounds,qa.uniforms.permutation=P[Y],ea.lineWidth(this.dynamicWidth[Y]*
this.pixelRatio),qa.uniforms.contourColor=this.dynamicColor[Y],qa.uniforms.contourTint=this.dynamicTint[Y],qa.uniforms.height=this.dynamicLevel[Y],pa.draw(ea.LINES,this._dynamicCounts[Y],this._dynamicOffsets[Y]),ka=0;3>ka;++ka)this.contourProject[ka][Y]&&(qa.uniforms.model=ba.projections[ka],qa.uniforms.clipBounds=ba.clipBounds[ka],pa.draw(ea.LINES,this._dynamicCounts[Y],this._dynamicOffsets[Y]));pa.unbind()}}function f(Y,ea){return Array.isArray(Y)?[ea(Y[0]),ea(Y[1]),ea(Y[2])]:[ea(Y),ea(Y),ea(Y)]}
function l(Y){return Array.isArray(Y)?3===Y.length?[Y[0],Y[1],Y[2],1]:[Y[0],Y[1],Y[2],Y[3]]:[0,0,0,1]}function m(Y){if(Array.isArray(Y)){if(Array.isArray(Y))return[l(Y[0]),l(Y[1]),l(Y[2])];Y=l(Y);return[Y.slice(),Y.slice(),Y.slice()]}}D.exports=function(Y){var ea=Y.gl,ca=F(ea),ba=J(ea),ka=H(ea),qa=I(ea),pa=d(ea),oa=g(ea,[{buffer:pa,size:4,stride:M,offset:0},{buffer:pa,size:3,stride:M,offset:16},{buffer:pa,size:3,stride:M,offset:28}]),ja=d(ea),ra=g(ea,[{buffer:ja,size:4,stride:20,offset:0},{buffer:ja,
size:1,stride:20,offset:16}]),ha=d(ea),la=g(ea,[{buffer:ha,size:2,type:ea.FLOAT}]),ua=h(ea,1,N,ea.RGBA,ea.UNSIGNED_BYTE);ua.minFilter=ea.LINEAR;ua.magFilter=ea.LINEAR;ea=new p(ea,[0,0],[[0,0,0],[0,0,0]],ca,ba,pa,oa,ua,ka,qa,ja,ra,ha,la,[0,0,0]);ca={levels:[[],[],[]]};for(var na in Y)ca[na]=Y[na];ca.colormap=ca.colormap||"jet";ea.update(ca);return ea};var c=b("bit-twiddle"),d=b("gl-buffer"),g=b("gl-vao"),h=b("gl-texture2d"),q=b("typedarray-pool"),t=b("colormap"),v=b("ndarray-ops"),w=b("ndarray-pack"),
A=b("ndarray"),z=b("surface-nets"),y=b("gl-mat4/multiply"),B=b("gl-mat4/invert"),C=b("binary-search-bounds"),u=b("ndarray-gradient");b=b("./lib/shaders");var F=b.createShader,H=b.createContourShader,J=b.createPickShader,I=b.createPickContourShader,M=40,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],P=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var Y=0;3>Y;++Y){var ea=P[Y],ca=(Y+2)%3;ea[(Y+1)%3]=1;ea[ca+3]=1;ea[Y+6]=1}})();var N=256;b=
p.prototype;b.isTransparent=function(){return 1>this.opacity||this.opacityscale};b.isOpaque=function(){if(this.opacityscale||1>this.opacity)return!1;if(1<=this.opacity)return!0;for(var Y=0;3>Y;++Y)if(0<this._contourCounts[Y].length)return!0;return!1};b.pickSlots=1;b.setPickBase=function(Y){this.pickId=Y};var Q=[0,0,0],O={showSurface:!1,showContour:!1,projections:[E.slice(),E.slice(),E.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},T={model:E,view:E,projection:E,inverseModel:E.slice(),
lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1E-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1E3,1E3,1E3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},V=E.slice(),Z=[1,0,0,0,1,0,0,0,1];b.draw=function(Y){return e.call(this,Y,!1)};b.drawTransparent=function(Y){return e.call(this,Y,!0)};var aa={model:E,view:E,projection:E,inverseModel:E,
clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};b.drawPick=function(Y){Y=Y||{};var ea=this.gl;ea.disable(ea.CULL_FACE);aa.model=Y.model||E;aa.view=Y.view||E;aa.projection=Y.projection||E;aa.shape=this._field[2].shape;aa.pickId=this.pickId/255;aa.lowerBound=this.bounds[0];aa.upperBound=this.bounds[1];aa.objectOffset=this.objectOffset;aa.permutation=
Z;for(Y=0;2>Y;++Y)for(var ca=aa.clipBounds[Y],ba=0;3>ba;++ba)ca[ba]=Math.min(Math.max(this.clipBounds[Y][ba],-1E8),1E8);ca=a(aa,this);if(ca.showSurface){this._pickShader.bind();this._pickShader.uniforms=aa;this._vao.bind();this._vao.draw(ea.TRIANGLES,this._vertexCount);for(Y=0;3>Y;++Y)this.surfaceProject[Y]&&(this._pickShader.uniforms.model=ca.projections[Y],this._pickShader.uniforms.clipBounds=ca.clipBounds[Y],this._vao.draw(ea.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ca.showContour){var ka=
this._contourPickShader;ka.bind();ka.uniforms=aa;var qa=this._contourVAO;qa.bind();for(ba=0;3>ba;++ba)for(ea.lineWidth(this.contourWidth[ba]*this.pixelRatio),ka.uniforms.permutation=P[ba],Y=0;Y<this.contourLevels[ba].length;++Y)this._contourCounts[ba][Y]&&(ka.uniforms.height=this.contourLevels[ba][Y],qa.draw(ea.LINES,this._contourCounts[ba][Y],this._contourOffsets[ba][Y]));for(Y=0;3>Y;++Y)for(ka.uniforms.model=ca.projections[Y],ka.uniforms.clipBounds=ca.clipBounds[Y],ba=0;3>ba;++ba)if(this.contourProject[Y][ba]){ka.uniforms.permutation=
P[ba];ea.lineWidth(this.contourWidth[ba]*this.pixelRatio);for(var pa=0;pa<this.contourLevels[ba].length;++pa)this._contourCounts[ba][pa]&&(ka.uniforms.height=this.contourLevels[ba][pa],qa.draw(ea.LINES,this._contourCounts[ba][pa],this._contourOffsets[ba][pa]))}qa.unbind()}};b.pick=function(Y){if(!Y||Y.id!==this.pickId)return null;var ea=this._field[2].shape,ca=this._pickResult,ba=ea[0]*(Y.value[0]+(Y.value[2]>>4)/16)/255,ka=Math.floor(ba),qa=ba-ka;Y=ea[1]*(Y.value[1]+(Y.value[2]&15)/16)/255;var pa=
Math.floor(Y),oa=Y-pa;ka+=1;pa+=1;for(var ja=ca.position,ra=ja[0]=ja[1]=ja[2]=0;2>ra;++ra)for(var ha=ra?qa:1-qa,la=0;2>la;++la)for(var ua=ka+ra,na=pa+la,wa=ha*(la?oa:1-oa),Ca=0;3>Ca;++Ca)ja[Ca]+=this._field[Ca].get(ua,na)*wa;ra=this._pickResult.level;for(ha=0;3>ha;++ha)ra[ha]=C.le(this.contourLevels[ha],ja[ha]),0>ra[ha]?0<this.contourLevels[ha].length&&(ra[ha]=0):ra[ha]<this.contourLevels[ha].length-1&&Math.abs(this.contourLevels[ha][ra[ha]]-ja[ha])>Math.abs(this.contourLevels[ha][ra[ha]+1]-ja[ha])&&
(ra[ha]+=1);ca.index[0]=.5>qa?ka:ka+1;ca.index[1]=.5>oa?pa:pa+1;ca.uv[0]=ba/ea[0];ca.uv[1]=Y/ea[1];for(Ca=0;3>Ca;++Ca)ca.dataCoordinate[Ca]=this._field[Ca].get(ca.index[0],ca.index[1]);return ca};b.padField=function(Y,ea){var ca=ea.shape.slice(),ba=Y.shape.slice();v.assign(Y.lo(1,1).hi(ca[0],ca[1]),ea);v.assign(Y.lo(1).hi(ca[0],1),ea.hi(ca[0],1));v.assign(Y.lo(1,ba[1]-1).hi(ca[0],1),ea.lo(0,ca[1]-1).hi(ca[0],1));v.assign(Y.lo(0,1).hi(1,ca[1]),ea.hi(1));v.assign(Y.lo(ba[0]-1,1).hi(1,ca[1]),ea.lo(ca[0]-
1));Y.set(0,0,ea.get(0,0));Y.set(0,ba[1]-1,ea.get(0,ca[1]-1));Y.set(ba[0]-1,0,ea.get(ca[0]-1,0));Y.set(ba[0]-1,ba[1]-1,ea.get(ca[0]-1,ca[1]-1))};b.update=function(Y){Y=Y||{};this.objectOffset=Y.objectOffset||this.objectOffset;this.dirty=!0;"contourWidth"in Y&&(this.contourWidth=f(Y.contourWidth,Number));"showContour"in Y&&(this.showContour=f(Y.showContour,Boolean));"showSurface"in Y&&(this.showSurface=!!Y.showSurface);"contourTint"in Y&&(this.contourTint=f(Y.contourTint,Boolean));"contourColor"in
Y&&(this.contourColor=m(Y.contourColor));"contourProject"in Y&&(this.contourProject=f(Y.contourProject,function(Ya){return f(Ya,Boolean)}));"surfaceProject"in Y&&(this.surfaceProject=Y.surfaceProject);"dynamicColor"in Y&&(this.dynamicColor=m(Y.dynamicColor));"dynamicTint"in Y&&(this.dynamicTint=f(Y.dynamicTint,Number));"dynamicWidth"in Y&&(this.dynamicWidth=f(Y.dynamicWidth,Number));"opacity"in Y&&(this.opacity=Y.opacity);"opacityscale"in Y&&(this.opacityscale=Y.opacityscale);"colorBounds"in Y&&(this.colorBounds=
Y.colorBounds);"vertexColor"in Y&&(this.vertexColor=Y.vertexColor?1:0);var ea=Y.field||Y.coords&&Y.coords[2]||null,ca=!1;ea||(ea=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0));if("field"in Y||"coords"in Y){var ba=(ea.shape[0]+2)*(ea.shape[1]+2);ba>this._field[2].data.length&&(q.freeFloat(this._field[2].data),this._field[2].data=q.mallocFloat(c.nextPow2(ba)));this._field[2]=A(this._field[2].data,
[ea.shape[0]+2,ea.shape[1]+2]);this.padField(this._field[2],ea);ba=this.shape=ea.shape.slice();for(ea=0;2>ea;++ea)this._field[2].size>this._field[ea].data.length&&(q.freeFloat(this._field[ea].data),this._field[ea].data=q.mallocFloat(this._field[2].size)),this._field[ea]=A(this._field[ea].data,[ba[0]+2,ba[1]+2]);if(Y.coords){var ka=Y.coords;if(!Array.isArray(ka)||3!==ka.length)throw Error("gl-surface: invalid coordinates for x/y");for(ea=0;2>ea;++ea){var qa=ka[ea];for(pa=0;2>pa;++pa)if(qa.shape[pa]!==
ba[pa])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[ea],qa)}}else if(Y.ticks){pa=Y.ticks;if(!Array.isArray(pa)||2!==pa.length)throw Error("gl-surface: invalid ticks");for(ea=0;2>ea;++ea){ka=pa[ea];if(Array.isArray(ka)||ka.length)ka=A(ka);if(ka.shape[0]!==ba[ea])throw Error("gl-surface: invalid tick length");qa=A(ka.data,ba);qa.stride[ea]=ka.stride[0];qa.stride[ea^1]=0;this.padField(this._field[ea],qa)}}else{for(ea=0;2>ea;++ea)pa=[0,0],pa[ea]=1,this._field[ea]=A(this._field[ea].data,
[ba[0]+2,ba[1]+2],pa,0);this._field[0].set(0,0,0);for(var pa=0;pa<ba[0];++pa)this._field[0].set(pa+1,0,pa);this._field[0].set(ba[0]+1,0,ba[0]-1);this._field[1].set(0,0,0);for(pa=0;pa<ba[1];++pa)this._field[1].set(0,pa+1,pa);this._field[1].set(0,ba[1]+1,ba[1]-1)}pa=this._field;ka=A(q.mallocFloat(6*pa[2].size),[3,ba[0]+2,ba[1]+2,2]);for(ea=0;3>ea;++ea)u(ka.pick(ea),pa[ea],"mirror");var oa=A(q.mallocFloat(3*pa[2].size),[ba[0]+2,ba[1]+2,3]);for(ea=0;ea<ba[0]+2;++ea)for(pa=0;pa<ba[1]+2;++pa){qa=ka.get(0,
ea,pa,0);var ja=ka.get(0,ea,pa,1),ra=ka.get(1,ea,pa,0),ha=ka.get(1,ea,pa,1),la=ka.get(2,ea,pa,0),ua=ka.get(2,ea,pa,1),na=ra*ua-ha*la;la=la*ja-ua*qa;ua=qa*ha-ja*ra;qa=Math.sqrt(na*na+la*la+ua*ua);1E-8>qa?(qa=Math.max(Math.abs(na),Math.abs(la),Math.abs(ua)),1E-8>qa?(ua=1,la=na=0,qa=1):qa=1/qa):qa=1/Math.sqrt(qa);oa.set(ea,pa,0,na*qa);oa.set(ea,pa,1,la*qa);oa.set(ea,pa,2,ua*qa)}q.free(ka.data);var wa=[Infinity,Infinity,Infinity],Ca=[-Infinity,-Infinity,-Infinity],Fa=Infinity,Xa=-Infinity,ab=q.mallocFloat(c.nextPow2((ba[0]-
1)*(ba[1]-1)*60)),gb=0;for(ea=ka=0;ea<ba[0]-1;++ea)a:for(pa=0;pa<ba[1]-1;++pa){for(na=0;2>na;++na)for(la=0;2>la;++la)for(qa=0;3>qa;++qa)if(ja=this._field[qa].get(1+ea+na,1+pa+la),isNaN(ja)||!isFinite(ja))continue a;for(qa=0;6>qa;++qa){ra=ea+L[qa][0];ha=pa+L[qa][1];var bb=this._field[0].get(ra+1,ha+1),La=this._field[1].get(ra+1,ha+1);ja=this._field[2].get(ra+1,ha+1);na=oa.get(ra+1,ha+1,0);la=oa.get(ra+1,ha+1,1);ua=oa.get(ra+1,ha+1,2);Y.intensity&&(kb=Y.intensity.get(ra,ha));var kb=Y.intensity?Y.intensity.get(ra,
ha):ja+this.objectOffset[2];ab[gb++]=ra;ab[gb++]=ha;ab[gb++]=bb;ab[gb++]=La;ab[gb++]=ja;ab[gb++]=0;ab[gb++]=kb;ab[gb++]=na;ab[gb++]=la;ab[gb++]=ua;wa[0]=Math.min(wa[0],bb+this.objectOffset[0]);wa[1]=Math.min(wa[1],La+this.objectOffset[1]);wa[2]=Math.min(wa[2],ja+this.objectOffset[2]);Fa=Math.min(Fa,kb);Ca[0]=Math.max(Ca[0],bb+this.objectOffset[0]);Ca[1]=Math.max(Ca[1],La+this.objectOffset[1]);Ca[2]=Math.max(Ca[2],ja+this.objectOffset[2]);Xa=Math.max(Xa,kb);ka+=1}}Y.intensityBounds&&(Fa=+Y.intensityBounds[0],
Xa=+Y.intensityBounds[1]);for(ea=6;ea<gb;ea+=10)ab[ea]=(ab[ea]-Fa)/(Xa-Fa);this._vertexCount=ka;this._coordinateBuffer.update(ab.subarray(0,gb));q.freeFloat(ab);q.free(oa.data);this.bounds=[wa,Ca];this.intensity=Y.intensity||this._field[2];if(this.intensityBounds[0]!==Fa||this.intensityBounds[1]!==Xa)ca=!0;this.intensityBounds=[Fa,Xa]}if("levels"in Y){ba=Y.levels;ba=Array.isArray(ba[0])?ba.slice():[[],[],ba];for(ea=0;3>ea;++ea)ba[ea]=ba[ea].slice(),ba[ea].sort(function(Ya,Ga){return Ya-Ga});for(ea=
0;3>ea;++ea)for(pa=0;pa<ba[ea].length;++pa)ba[ea][pa]-=this.objectOffset[ea];ea=0;a:for(;3>ea;++ea){if(ba[ea].length!==this.contourLevels[ea].length){ca=!0;break}for(pa=0;pa<ba[ea].length;++pa)if(ba[ea][pa]!==this.contourLevels[ea][pa]){ca=!0;break a}}this.contourLevels=ba}if(ca){pa=this._field;ba=this.shape;ca=[];for(oa=0;3>oa;++oa){ua=this.contourLevels[oa];wa=[];Ca=[];Fa=[0,0,0];for(ea=0;ea<ua.length;++ea){Xa=z(this._field[oa],ua[ea]);wa.push(ca.length/5|0);pa=ka=0;a:for(;pa<Xa.cells.length;++pa)for(ab=
Xa.cells[pa],qa=0;2>qa;++qa){gb=Xa.positions[ab[qa]];ja=gb[0];bb=Math.floor(ja)|0;La=ja-bb;ja=gb[1];kb=Math.floor(ja)|0;var mb=ja-kb,ya=!1,Ia=0;b:for(;3>Ia;++Ia){Fa[Ia]=0;var Na=(oa+Ia+1)%3;for(na=0;2>na;++na){var Ta=na?La:1-La;ra=Math.min(Math.max(bb+na,0),ba[0])|0;for(la=0;2>la;++la){var hb=la?mb:1-mb;ha=Math.min(Math.max(kb+la,0),ba[1])|0;ja=2>Ia?this._field[Na].get(ra,ha):(this.intensity.get(ra,ha)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]);if(!isFinite(ja)||isNaN(ja)){ya=
!0;break b}Fa[Ia]+=Ta*hb*ja}}}if(ya){if(0<qa){for(qa=0;5>qa;++qa)ca.pop();--ka}continue a}else ca.push(Fa[0],Fa[1],gb[0],gb[1],Fa[2]),ka+=1}Ca.push(ka)}this._contourOffsets[oa]=wa;this._contourCounts[oa]=Ca}ba=q.mallocFloat(ca.length);for(ea=0;ea<ca.length;++ea)ba[ea]=ca[ea];this._contourBuffer.update(ba);q.freeFloat(ba)}Y.colormap&&this._colorMap.setPixels(n(Y.colormap,this.opacityscale))};b.dispose=function(){this._shader.dispose();this._vao.dispose();this._coordinateBuffer.dispose();this._colorMap.dispose();
this._contourBuffer.dispose();this._contourVAO.dispose();this._contourShader.dispose();this._contourPickShader.dispose();this._dynamicBuffer.dispose();this._dynamicVAO.dispose();for(var Y=0;3>Y;++Y)q.freeFloat(this._field[Y].data)};b.highlight=function(Y){var ea;if(Y){for(ea=0;3>ea;++ea)this.highlightLevel[ea]=this.enableHighlight[ea]?Y.level[ea]:-1;Y=this.snapToData?Y.dataCoordinate:Y.position;for(ea=0;3>ea;++ea)Y[ea]-=this.objectOffset[ea];if(this.enableDynamic[0]&&Y[0]!==this.dynamicLevel[0]||
this.enableDynamic[1]&&Y[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&Y[2]!==this.dynamicLevel[2]){for(var ca=0,ba=this.shape,ka=q.mallocFloat(12*ba[0]*ba[1]),qa=0;3>qa;++qa)if(this.enableDynamic[qa]){this.dynamicLevel[qa]=Y[qa];var pa=this._field[(qa+1)%3],oa=this._field[(qa+2)%3];ea=z(this._field[qa],Y[qa]);var ja=ea.cells,ra=ea.positions;this._dynamicOffsets[qa]=ca;for(ea=0;ea<ja.length;++ea)for(var ha=ja[ea],la=0;2>la;++la){var ua=ra[ha[la]],na=+ua[0],wa=na|0,Ca=Math.min(wa+1,ba[0])|0,Fa=
na-wa,Xa=1-Fa,ab=+ua[1];ua=ab|0;na=Math.min(ua+1,ba[1])|0;var gb=ab-ua,bb=1-gb;ab=Xa*bb;Xa*=gb;bb*=Fa;gb*=Fa;Fa=ab*pa.get(wa,ua)+Xa*pa.get(wa,na)+bb*pa.get(Ca,ua)+gb*pa.get(Ca,na);wa=ab*oa.get(wa,ua)+Xa*oa.get(wa,na)+bb*oa.get(Ca,ua)+gb*oa.get(Ca,na);if(isNaN(Fa)||isNaN(wa)){la&&--ca;break}ka[2*ca]=Fa;ka[2*ca+1]=wa;ca+=1}this._dynamicCounts[qa]=ca-this._dynamicOffsets[qa]}else this.dynamicLevel[qa]=NaN,this._dynamicCounts[qa]=0;this._dynamicBuffer.update(ka.subarray(0,2*ca));q.freeFloat(ka)}}else this._dynamicCounts=
[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1]}},{"./lib/shaders":324,"binary-search-bounds":96,"bit-twiddle":97,colormap:131,"gl-buffer":258,"gl-mat4/invert":278,"gl-mat4/multiply":280,"gl-texture2d":327,"gl-vao":332,ndarray:469,"ndarray-gradient":462,"ndarray-ops":464,"ndarray-pack":465,"surface-nets":542,"typedarray-pool":567}],326:[function(b,D,G){var r=b("css-font"),n=b("pick-by-alias"),p=b("regl"),k=b("gl-util/context");G=b("es6-weak-map");var a=b("color-normalize"),
e=b("font-atlas"),f=b("typedarray-pool"),l=b("parse-rect"),m=b("is-plain-obj"),c=b("parse-unit"),d=b("to-px"),g=b("detect-kerning"),h=b("object-assign"),q=b("font-measure"),t=b("flatten-vertex-data"),v=b("bit-twiddle").nextPow2,w=new G,A=!1;document.body&&(b=document.body.appendChild(document.createElement("div")),b.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(b).fontStretch&&(A=!0),document.body.removeChild(b));var z=function(y){"function"===typeof y&&y._gl&&y.prop&&
y.texture&&y.buffer?(y={regl:y},this.gl=y.regl._gl):this.gl=k(y);this.regl=(this.shader=w.get(this.gl))?this.shader.regl:y.regl||p({gl:this.gl});this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"});this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"});this.shader||(this.shader=this.createShader(),w.set(this.gl,this.shader));this.batch=[];this.fontSize=[];this.font=[];this.fontAtlas=[];this.draw=this.shader.draw.bind(this);this.render=function(){this.regl._refresh();this.draw(this.batch)};
this.canvas=this.gl.canvas;this.update(m(y)?y:{})};z.prototype.createShader=function(){var y=this.regl,B=y({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:y.prop("count"),offset:y.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:y.this("sizeBuffer")},width:{offset:0,stride:8,buffer:y.this("sizeBuffer")},char:y.this("charBuffer"),position:y.this("position")},
uniforms:{atlasSize:function(C,u){return[u.atlas.width,u.atlas.height]},atlasDim:function(C,u){return[u.atlas.cols,u.atlas.rows]},atlas:function(C,u){return u.atlas.texture},charStep:function(C,u){return u.atlas.step},em:function(C,u){return u.atlas.em},color:y.prop("color"),opacity:y.prop("opacity"),viewport:y.this("viewportArray"),scale:y.this("scale"),align:y.prop("align"),baseline:y.prop("baseline"),translate:y.this("translate"),positionOffset:y.prop("positionOffset")},primitive:"points",viewport:y.this("viewport"),
vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\t"+(z.normalViewport?"":"vec2 positionOffset \x3d vec2(positionOffset.x,- positionOffset.y);")+
"\n\n\t\t\t\tvec2 offset \x3d floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ positionOffset))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position \x3d (position + translate) * scale;\n\t\t\t\tposition +\x3d offset * scale;\n\n\t\t\t\t"+(z.normalViewport?"position.y \x3d 1. - position.y;":"")+"\n\n\t\t\t\tcharCoord \x3d position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position \x3d vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize \x3d charStep;\n\n\t\t\t\tcharId.x \x3d mod(char, atlasDim.x);\n\t\t\t\tcharId.y \x3d floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth \x3d width * em;\n\n\t\t\t\tfontColor \x3d color / 255.;\n\t\t\t}",
frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform sampler2D atlas;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv \x3d gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep \x3d floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y \x3d charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth \x3d ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) \x3e halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) \x3c halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv +\x3d charId * charStep;\n\t\t\t\tuv \x3d uv / atlasSize;\n\n\t\t\t\tvec4 color \x3d fontColor;\n\t\t\t\tvec4 mask \x3d texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY \x3d lightness(mask);\n\t\t\t\t// float colorY \x3d lightness(color);\n\t\t\t\tcolor.a *\x3d maskY;\n\t\t\t\tcolor.a *\x3d opacity;\n\n\t\t\t\t// color.a +\x3d .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb +\x3d (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor \x3d color;\n\t\t\t}"});
return{regl:y,draw:B,atlas:{}}};z.prototype.update=function(y){var B=this;if("string"===typeof y)y={text:y};else if(!y)return;y=n(y,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",
kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0);null!=y.opacity&&(Array.isArray(y.opacity)?this.opacity=y.opacity.map(function(V){return parseFloat(V)}):this.opacity=parseFloat(y.opacity));null!=y.viewport&&(this.viewport=l(y.viewport),z.normalViewport&&(this.viewport.y=this.canvas.height-this.viewport.y-this.viewport.height),
this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]);null!=y.kerning&&(this.kerning=y.kerning);null!=y.offset&&("number"===typeof y.offset&&(y.offset=[y.offset,0]),this.positionOffset=t(y.offset));y.direction&&(this.direction=y.direction);y.range&&(this.range=
y.range,this.scale=[1/(y.range[2]-y.range[0]),1/(y.range[3]-y.range[1])],this.translate=[-y.range[0],-y.range[1]]);y.scale&&(this.scale=y.scale);y.translate&&(this.translate=y.translate);this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]);this.translate||(this.translate=[0,0]);this.font.length||y.font||(y.font=z.baseFontSize+"px sans-serif");var C=!1,u=!1;y.font&&(Array.isArray(y.font)?y.font:[y.font]).forEach(function(V,Z){if("string"===typeof V)try{V=r.parse(V)}catch(ca){V=r.parse(z.baseFontSize+
"px "+V)}else V=r.parse(r.stringify(V));var aa=r.stringify({size:z.baseFontSize,family:V.family,stretch:A?V.stretch:void 0,variant:V.variant,weight:V.weight,style:V.style}),Y=c(V.size);Y=Math.round(Y[0]*d(Y[1]));Y!==B.fontSize[Z]&&(u=!0,B.fontSize[Z]=Y);if(!B.font[Z]||aa!=B.font[Z].baseString)if(C=!0,B.font[Z]=z.fonts[aa],!B.font[Z]){Y=V.family.join(", ");var ea=[V.style];V.style!=V.variant&&ea.push(V.variant);V.variant!=V.weight&&ea.push(V.weight);A&&V.weight!=V.stretch&&ea.push(V.stretch);B.font[Z]=
{baseString:aa,family:Y,weight:V.weight,stretch:V.stretch,style:V.style,variant:V.variant,width:{},kerning:{},metrics:q(Y,{origin:"top",fontSize:z.baseFontSize,fontStyle:ea.join(" ")})};z.fonts[aa]=B.font[Z]}});(C||u)&&this.font.forEach(function(V,Z){var aa=r.stringify({size:B.fontSize[Z],family:V.family,stretch:A?V.stretch:void 0,variant:V.variant,weight:V.weight,style:V.style});B.fontAtlas[Z]=B.shader.atlas[aa];B.fontAtlas[Z]||(B.shader.atlas[aa]=B.fontAtlas[Z]={fontString:aa,step:2*Math.ceil(B.fontSize[Z]*
V.metrics.bottom*.5),em:B.fontSize[Z],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:B.regl.texture()});null==y.text&&(y.text=B.text)});if("string"===typeof y.text&&y.position&&2<y.position.length){for(var F=Array(.5*y.position.length),H=0;H<F.length;H++)F[H]=y.text;y.text=F}if(null!=y.text||C){this.textOffsets=[0];if(Array.isArray(y.text)){this.count=y.text[0].length;this.counts=[this.count];for(F=1;F<y.text.length;F++)this.textOffsets[F]=this.textOffsets[F-1]+y.text[F-1].length,this.count+=
y.text[F].length,this.counts.push(y.text[F].length);this.text=y.text.join("")}else this.text=y.text,this.count=this.text.length,this.counts=[this.count];var J=[];this.font.forEach(function(V,Z){z.atlasContext.font=V.baseString;Z=B.fontAtlas[Z];for(var aa=0;aa<B.text.length;aa++){var Y=B.text.charAt(aa);null==Z.ids[Y]&&(Z.ids[Y]=Z.chars.length,Z.chars.push(Y),J.push(Y));if(null==V.width[Y]&&(V.width[Y]=z.atlasContext.measureText(Y).width/z.baseFontSize,B.kerning)){var ea=[],ca;for(ca in V.width)ea.push(ca+
Y,Y+ca);h(V.kerning,g(V.family,{pairs:ea}))}}})}if(y.position)if(2<y.position.length){F=!y.position[0].length;H=f.mallocFloat(2*this.count);for(var I=0,M=0;I<this.counts.length;I++){var E=this.counts[I];if(F)for(var L=0;L<E;L++)H[M++]=y.position[2*I],H[M++]=y.position[2*I+1];else for(L=0;L<E;L++)H[M++]=y.position[I][0],H[M++]=y.position[I][1]}this.position.call?this.position({type:"float",data:H}):this.position=this.regl.buffer({type:"float",data:H});f.freeFloat(H)}else this.position.destroy&&this.position.destroy(),
this.position={constant:y.position};if(y.text||C){F=f.mallocUint8(this.count);H=f.mallocFloat(2*this.count);this.textWidth=[];for(M=I=0;I<this.counts.length;I++){E=this.counts[I];L=this.font[I]||this.font[0];for(var P=this.fontAtlas[I]||this.fontAtlas[0],N=0;N<E;N++){var Q=this.text.charAt(M),O=this.text.charAt(M-1);F[M]=P.ids[Q];H[2*M]=L.width[Q];if(N){var T=H[2*M-1]+.5*H[2*M-2]+.5*H[2*M];this.kerning&&(Q=L.kerning[O+Q])&&(T+=.001*Q);H[2*M+1]=T}else H[2*M+1]=.5*H[2*M];M++}this.textWidth.push(H.length?
.5*H[2*M-2]+H[2*M-1]:0)}y.align||(y.align=this.align);this.charBuffer({data:F,type:"uint8",usage:"stream"});this.sizeBuffer({data:H,type:"float",usage:"stream"});f.freeUint8(F);f.freeFloat(H);J.length&&this.font.forEach(function(V,Z){V=B.fontAtlas[Z];Z=V.step;var aa=Math.min(Math.floor(z.maxAtlasSize/Z),V.chars.length),Y=Math.ceil(V.chars.length/aa),ea=v(aa*Z),ca=v(Y*Z);V.width=ea;V.height=ca;V.rows=Y;V.cols=aa;V.em&&V.texture({data:e({canvas:z.atlasCanvas,font:V.fontString,chars:V.chars,shape:[ea,
ca],step:[Z,Z]})})})}y.align&&(this.align=y.align,this.alignOffset=this.textWidth.map(function(V,Z){Z=Array.isArray(B.align)?1<B.align.length?B.align[Z]:B.align[0]:B.align;if("number"===typeof Z)return Z;switch(Z){case "right":case "end":return-V;case "center":case "centre":case "middle":return.5*-V}return 0}));null==this.baseline&&null==y.baseline&&(y.baseline=0);null!=y.baseline&&(this.baseline=y.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(V,
Z){Z=(B.font[Z]||B.font[0]).metrics;var aa=.5*Z.bottom;aa="number"===typeof V?aa+(V-Z.baseline):aa+-Z[V];z.normalViewport||(aa*=-1);return aa}));if(null!=y.color)if(y.color||(y.color="transparent"),"string"!==typeof y.color&&isNaN(y.color)){if("number"===typeof y.color[0]&&y.color.length>this.counts.length)for(H=y.color.length,F=f.mallocUint8(H),I=(y.color.subarray||y.color.slice).bind(y.color),M=0;M<H;M+=4)F.set(a(I(M,M+4),"uint8"),M);else for(H=y.color.length,F=f.mallocUint8(4*H),I=0;I<H;I++)F.set(a(y.color[I]||
0,"uint8"),4*I);this.color=F}else this.color=a(y.color,"uint8");if(y.position||y.text||y.color||y.baseline||y.align||y.font||y.offset||y.opacity)if(4<this.color.length||1<this.baselineOffset.length||this.align&&1<this.align.length||1<this.fontAtlas.length||2<this.positionOffset.length)for(this.batch=Array(Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0)),
F=0;F<this.batch.length;F++)this.batch[F]={count:1<this.counts.length?this.counts[F]:this.counts[0],offset:1<this.textOffsets.length?this.textOffsets[F]:this.textOffsets[0],color:this.color?4>=this.color.length?this.color:this.color.subarray(4*F,4*F+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[F]:this.opacity,baseline:null!=this.baselineOffset[F]?this.baselineOffset[F]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[F]?this.alignOffset[F]:this.alignOffset[0]:0,atlas:this.fontAtlas[F]||
this.fontAtlas[0],positionOffset:2<this.positionOffset.length?this.positionOffset.subarray(2*F,2*F+2):this.positionOffset};else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]};z.prototype.destroy=function(){};z.prototype.kerning=!0;z.prototype.position={constant:new Float32Array(2)};
z.prototype.translate=null;z.prototype.scale=null;z.prototype.font=null;z.prototype.text="";z.prototype.positionOffset=[0,0];z.prototype.opacity=1;z.prototype.color=new Uint8Array([0,0,0,255]);z.prototype.alignOffset=[0,0];z.normalViewport=!1;z.maxAtlasSize=1024;z.atlasCanvas=document.createElement("canvas");z.atlasContext=z.atlasCanvas.getContext("2d",{alpha:!1});z.baseFontSize=64;z.fonts={};D.exports=z},{"bit-twiddle":97,"color-normalize":125,"css-font":144,"detect-kerning":172,"es6-weak-map":233,
"flatten-vertex-data":244,"font-atlas":245,"font-measure":246,"gl-util/context":328,"is-plain-obj":443,"object-assign":473,"parse-rect":478,"parse-unit":480,"pick-by-alias":485,regl:512,"to-px":550,"typedarray-pool":567}],327:[function(b,D,G){function r(h){return"undefined"!=typeof HTMLCanvasElement&&h instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&h instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&h instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&
h instanceof ImageData}function n(h,q,t){var v=h.gl,w=v.getParameter(v.MAX_TEXTURE_SIZE);if(0>q||q>w||0>t||t>w)throw Error("gl-texture2d: Invalid texture size");h._shape=[q,t];h.bind();v.texImage2D(v.TEXTURE_2D,0,h.format,q,t,0,h.format,h.type,null);h._mipLevels=[0];return h}function p(h,q,t,v,w,A){this.gl=h;this.handle=q;this.format=w;this.type=A;this._shape=[t,v];this._mipLevels=[0];this._minFilter=this._magFilter=h.NEAREST;this._wrapT=this._wrapS=h.CLAMP_TO_EDGE;this._anisoSamples=1;var z=this;
h=[this._wrapS,this._wrapT];Object.defineProperties(h,[{get:function(){return z._wrapS},set:function(y){return z.wrapS=y}},{get:function(){return z._wrapT},set:function(y){return z.wrapT=y}}]);this._wrapVector=h;h=[this._shape[0],this._shape[1]];Object.defineProperties(h,[{get:function(){return z._shape[0]},set:function(y){return z.width=y}},{get:function(){return z._shape[1]},set:function(y){return z.height=y}}]);this._shapeVector=h}function k(h,q){return 3===h.length?1===q[2]&&q[1]===h[0]*h[2]&&
q[0]===h[2]:1===q[0]&&q[1]===h[0]}function a(h){var q=h.createTexture();h.bindTexture(h.TEXTURE_2D,q);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE);return q}function e(h,q,t,v,w){var A=h.getParameter(h.MAX_TEXTURE_SIZE);if(0>q||q>A||0>t||t>A)throw Error("gl-texture2d: Invalid texture shape");if(w===
h.FLOAT&&!h.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");A=a(h);h.texImage2D(h.TEXTURE_2D,0,v,q,t,0,v,w,null);return new p(h,A,q,t,v,w)}var f=b("ndarray"),l=b("ndarray-ops"),m=b("typedarray-pool");D.exports=function(h){if(1>=arguments.length)throw Error("gl-texture2d: Missing arguments for texture2d constructor");c||(c=[h.LINEAR,h.NEAREST_MIPMAP_LINEAR,h.LINEAR_MIPMAP_NEAREST,h.LINEAR_MIPMAP_NEAREST],d=[h.NEAREST,h.LINEAR,h.NEAREST_MIPMAP_NEAREST,
h.NEAREST_MIPMAP_LINEAR,h.LINEAR_MIPMAP_NEAREST,h.LINEAR_MIPMAP_LINEAR],g=[h.REPEAT,h.CLAMP_TO_EDGE,h.MIRRORED_REPEAT]);if("number"===typeof arguments[1])return e(h,arguments[1],arguments[2],arguments[3]||h.RGBA,arguments[4]||h.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return e(h,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||h.RGBA,arguments[3]||h.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var q=arguments[1],t=r(q)?q:q.raw;if(t){var v=q.width|0;q=q.height|0;var w=arguments[2]||h.RGBA,
A=arguments[3]||h.UNSIGNED_BYTE,z=a(h);h.texImage2D(h.TEXTURE_2D,0,w,w,A,t);return new p(h,z,v,q,w,A)}if(q.shape&&q.data&&q.stride){z=q;var y=z.dtype;t=z.shape.slice();q=h.getParameter(h.MAX_TEXTURE_SIZE);if(0>t[0]||t[0]>q||0>t[1]||t[1]>q)throw Error("gl-texture2d: Invalid texture size");q=k(t,z.stride.slice());"float32"===y?w=h.FLOAT:"float64"===y?(w=h.FLOAT,q=!1,y="float32"):"uint8"===y?w=h.UNSIGNED_BYTE:(w=h.UNSIGNED_BYTE,q=!1,y="uint8");if(2===t.length)A=h.LUMINANCE,t=[t[0],t[1],1],z=f(z.data,
t,[z.stride[0],z.stride[1],1],z.offset);else if(3===t.length)if(1===t[2])A=h.ALPHA;else if(2===t[2])A=h.LUMINANCE_ALPHA;else if(3===t[2])A=h.RGB;else if(4===t[2])A=h.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");w!==h.FLOAT||h.getExtension("OES_texture_float")||(w=h.UNSIGNED_BYTE,q=!1);var B=z.size;if(q)z=0===z.offset&&z.data.length===B?z.data:z.data.subarray(z.offset,z.offset+B);else{var C=[t[2],t[2]*t[0],1];v=m.malloc(B,
y);C=f(v,t,C,0);"float32"!==y&&"float64"!==y||w!==h.UNSIGNED_BYTE?l.assign(C,z):l.muls(C,z,255);z=v.subarray(0,B)}y=a(h);h.texImage2D(h.TEXTURE_2D,0,A,t[0],t[1],0,A,w,z);q||m.free(v);return new p(h,y,t[0],t[1],A,w)}}throw Error("gl-texture2d: Invalid arguments for texture2d constructor");};var c=null,d=null,g=null;b=p.prototype;Object.defineProperties(b,{minFilter:{get:function(){return this._minFilter},set:function(h){this.bind();var q=this.gl;this.type===q.FLOAT&&0<=c.indexOf(h)&&!q.getExtension("OES_texture_float_linear")&&
(h=q.NEAREST);if(0>d.indexOf(h))throw Error("gl-texture2d: Unknown filter mode "+h);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,h);return this._minFilter=h}},magFilter:{get:function(){return this._magFilter},set:function(h){this.bind();var q=this.gl;this.type===q.FLOAT&&0<=c.indexOf(h)&&!q.getExtension("OES_texture_float_linear")&&(h=q.NEAREST);if(0>d.indexOf(h))throw Error("gl-texture2d: Unknown filter mode "+h);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,h);return this._magFilter=h}},
mipSamples:{get:function(){return this._anisoSamples},set:function(h){var q=this._anisoSamples;this._anisoSamples=Math.max(h,1)|0;q!==this._anisoSamples&&(h=this.gl.getExtension("EXT_texture_filter_anisotropic"))&&this.gl.texParameterf(this.gl.TEXTURE_2D,h.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples);return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(h){this.bind();if(0>g.indexOf(h))throw Error("gl-texture2d: Unknown wrap mode "+h);this.gl.texParameteri(this.gl.TEXTURE_2D,
this.gl.TEXTURE_WRAP_S,h);return this._wrapS=h}},wrapT:{get:function(){return this._wrapT},set:function(h){this.bind();if(0>g.indexOf(h))throw Error("gl-texture2d: Unknown wrap mode "+h);this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,h);return this._wrapT=h}},wrap:{get:function(){return this._wrapVector},set:function(h){Array.isArray(h)||(h=[h,h]);if(2!==h.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var q=0;2>q;++q)if(0>g.indexOf(h[q]))throw Error("gl-texture2d: Unknown wrap mode "+
h);this._wrapS=h[0];this._wrapT=h[1];q=this.gl;this.bind();q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,this._wrapS);q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,this._wrapT);return h}},shape:{get:function(){return this._shapeVector},set:function(h){if(!Array.isArray(h))h=[h|0,h|0];else if(2!==h.length)throw Error("gl-texture2d: Invalid texture shape");n(this,h[0]|0,h[1]|0);return[h[0]|0,h[1]|0]}},width:{get:function(){return this._shape[0]},set:function(h){h|=0;n(this,h,this._shape[1]);return h}},
height:{get:function(){return this._shape[1]},set:function(h){h|=0;n(this,this._shape[0],h);return h}}});b.bind=function(h){var q=this.gl;void 0!==h&&q.activeTexture(q.TEXTURE0+(h|0));q.bindTexture(q.TEXTURE_2D,this.handle);return void 0!==h?h|0:q.getParameter(q.ACTIVE_TEXTURE)-q.TEXTURE0};b.dispose=function(){this.gl.deleteTexture(this.handle)};b.generateMipmap=function(){this.bind();this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var h=Math.min(this._shape[0],this._shape[1]),q=0;0<h;++q,h>>>=1)0>
this._mipLevels.indexOf(q)&&this._mipLevels.push(q)};b.setPixels=function(h,q,t,v){var w=this.gl;this.bind();Array.isArray(q)?(v=t,t=q[1]|0,q=q[0]|0):(q=q||0,t=t||0);v=v||0;var A=r(h)?h:h.raw;if(A)0>this._mipLevels.indexOf(v)?(w.texImage2D(w.TEXTURE_2D,0,this.format,this.format,this.type,A),this._mipLevels.push(v)):w.texSubImage2D(w.TEXTURE_2D,v,q,t,this.format,this.type,A);else if(h.shape&&h.stride&&h.data){if(2>h.shape.length||q+h.shape[1]>this._shape[1]>>>v||t+h.shape[0]>this._shape[0]>>>v||0>
q||0>t)throw Error("gl-texture2d: Texture dimensions are out of bounds");A=this.format;var z=this.type,y=this._mipLevels,B=h.dtype,C=h.shape.slice();if(2>C.length||3<C.length)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var u=k(C,h.stride.slice());"float32"===B?B=w.FLOAT:"float64"===B?(B=w.FLOAT,u=!1):"uint8"===B?B=w.UNSIGNED_BYTE:(B=w.UNSIGNED_BYTE,u=!1);if(2===C.length){var F=w.LUMINANCE;C=[C[0],C[1],1];h=f(h.data,C,[h.stride[0],h.stride[1],1],h.offset)}else if(3===C.length)if(1===
C[2])F=w.ALPHA;else if(2===C[2])F=w.LUMINANCE_ALPHA;else if(3===C[2])F=w.RGB;else if(4===C[2])F=w.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");else throw Error("gl-texture2d: Invalid shape for texture");F!==w.LUMINANCE&&F!==w.ALPHA||A!==w.LUMINANCE&&A!==w.ALPHA||(F=A);if(F!==A)throw Error("gl-texture2d: Incompatible texture format for setPixels");F=h.size;var H=0>y.indexOf(v);H&&y.push(v);B===z&&u?0===h.offset&&h.data.length===F?H?w.texImage2D(w.TEXTURE_2D,v,A,C[0],C[1],0,
A,z,h.data):w.texSubImage2D(w.TEXTURE_2D,v,q,t,C[0],C[1],A,z,h.data):H?w.texImage2D(w.TEXTURE_2D,v,A,C[0],C[1],0,A,z,h.data.subarray(h.offset,h.offset+F)):w.texSubImage2D(w.TEXTURE_2D,v,q,t,C[0],C[1],A,z,h.data.subarray(h.offset,h.offset+F)):(y=z===w.FLOAT?m.mallocFloat32(F):m.mallocUint8(F),u=f(y,C,[C[2],C[2]*C[0],1]),B===w.FLOAT&&z===w.UNSIGNED_BYTE?l.muls(u,h,255):l.assign(u,h),H?w.texImage2D(w.TEXTURE_2D,v,A,C[0],C[1],0,A,z,y.subarray(0,F)):w.texSubImage2D(w.TEXTURE_2D,v,q,t,C[0],C[1],A,z,y.subarray(0,
F)),z===w.FLOAT?m.freeFloat32(y):m.freeUint8(y))}else throw Error("gl-texture2d: Unsupported data type");}},{ndarray:469,"ndarray-ops":464,"typedarray-pool":567}],328:[function(b,D,G){(function(r){function n(e){if(e.container)if(e.container==document.body)document.body.style.width||(e.canvas.width=e.width||e.pixelRatio*r.innerWidth),document.body.style.height||(e.canvas.height=e.height||e.pixelRatio*r.innerHeight);else{var f=e.container.getBoundingClientRect();e.canvas.width=e.width||f.right-f.left;
e.canvas.height=e.height||f.bottom-f.top}}function p(e){return"function"===typeof e.getContext&&"width"in e&&"height"in e}function k(){var e=document.createElement("canvas");e.style.position="absolute";e.style.top=0;e.style.left=0;return e}var a=b("pick-by-alias");D.exports=function(e){e?"string"===typeof e&&(e={container:e}):e={};e=p(e)?{container:e}:"string"===typeof e.nodeName&&"function"===typeof e.appendChild&&"function"===typeof e.getBoundingClientRect?{container:e}:"function"===typeof e.drawArrays||
"function"===typeof e.drawElements?{gl:e}:a(e,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0);e.pixelRatio||(e.pixelRatio=r.pixelRatio||1);if(e.gl)return e.gl;e.canvas&&(e.container=e.canvas.parentNode);if(e.container){if("string"===typeof e.container){var f=document.querySelector(e.container);
if(!f)throw Error("Element "+e.container+" is not found");e.container=f}p(e.container)?(e.canvas=e.container,e.container=e.canvas.parentNode):e.canvas||(e.canvas=k(),e.container.appendChild(e.canvas),n(e))}else if(!e.canvas)if("undefined"!==typeof document)e.container=document.body||document.documentElement,e.canvas=k(),e.container.appendChild(e.canvas),n(e);else throw Error("Not DOM environment. Use headless-gl.");if(!e.gl)try{e.gl=e.canvas.getContext("webgl",e.attrs)}catch(l){try{e.gl=e.canvas.getContext("experimental-webgl",
e.attrs)}catch(m){e.gl=e.canvas.getContext("webgl-experimental",e.attrs)}}return e.gl}}).call(this,"undefined"!==typeof lb?lb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"pick-by-alias":485}],329:[function(b,D,G){D.exports=function(r,n,p){n?n.bind():r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null);n=r.getParameter(r.MAX_VERTEX_ATTRIBS)|0;if(p){if(p.length>n)throw Error("gl-vao: Too many vertex attributes");for(var k=0;k<p.length;++k){var a=p[k];if(a.buffer){var e=a.size||4,f=
a.type||r.FLOAT,l=!!a.normalized,m=a.stride||0,c=a.offset||0;a.buffer.bind();r.enableVertexAttribArray(k);r.vertexAttribPointer(k,e,f,l,m,c)}else{if("number"===typeof a)r.vertexAttrib1f(k,a);else if(1===a.length)r.vertexAttrib1f(k,a[0]);else if(2===a.length)r.vertexAttrib2f(k,a[0],a[1]);else if(3===a.length)r.vertexAttrib3f(k,a[0],a[1],a[2]);else if(4===a.length)r.vertexAttrib4f(k,a[0],a[1],a[2],a[3]);else throw Error("gl-vao: Invalid vertex attribute");r.disableVertexAttribArray(k)}}}else r.bindBuffer(r.ARRAY_BUFFER,
null),k=0;for(;k<n;++k)r.disableVertexAttribArray(k)}},{}],330:[function(b,D,G){function r(p){this.gl=p;this._attributes=this._elements=null;this._elementsType=p.UNSIGNED_SHORT}var n=b("./do-bind.js");r.prototype.bind=function(){n(this.gl,this._elements,this._attributes)};r.prototype.update=function(p,k,a){this._elements=k;this._attributes=p;this._elementsType=a||this.gl.UNSIGNED_SHORT};r.prototype.dispose=function(){};r.prototype.unbind=function(){};r.prototype.draw=function(p,k,a){a=a||0;var e=
this.gl;this._elements?e.drawElements(p,k,this._elementsType,a):e.drawArrays(p,a,k)};D.exports=function(p){return new r(p)}},{"./do-bind.js":329}],331:[function(b,D,G){function r(k,a,e,f,l,m){this.location=k;this.dimension=a;this.a=e;this.b=f;this.c=l;this.d=m}function n(k,a,e){this.gl=k;this._ext=a;this.handle=e;this._attribs=[];this._useElements=!1;this._elementsType=k.UNSIGNED_SHORT}var p=b("./do-bind.js");r.prototype.bind=function(k){switch(this.dimension){case 1:k.vertexAttrib1f(this.location,
this.a);break;case 2:k.vertexAttrib2f(this.location,this.a,this.b);break;case 3:k.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:k.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}};n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var k=0;k<this._attribs.length;++k)this._attribs[k].bind(this.gl)};n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)};n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)};n.prototype.update=
function(k,a,e){this.bind();p(this.gl,a,k);this.unbind();this._attribs.length=0;if(k)for(var f=0;f<k.length;++f){var l=k[f];"number"===typeof l?this._attribs.push(new r(f,1,l)):Array.isArray(l)&&this._attribs.push(new r(f,l.length,l[0],l[1],l[2],l[3]))}this._useElements=!!a;this._elementsType=e||this.gl.UNSIGNED_SHORT};n.prototype.draw=function(k,a,e){e=e||0;var f=this.gl;this._useElements?f.drawElements(k,a,this._elementsType,e):f.drawArrays(k,e,a)};D.exports=function(k,a){return new n(k,a,a.createVertexArrayOES())}},
{"./do-bind.js":329}],332:[function(b,D,G){function r(k){this.bindVertexArrayOES=k.bindVertexArray.bind(k);this.createVertexArrayOES=k.createVertexArray.bind(k);this.deleteVertexArrayOES=k.deleteVertexArray.bind(k)}var n=b("./lib/vao-native.js"),p=b("./lib/vao-emulated.js");D.exports=function(k,a,e,f){var l=k.createVertexArray?new r(k):k.getExtension("OES_vertex_array_object");k=l?n(k,l):p(k);k.update(a,e,f);return k}},{"./lib/vao-emulated.js":330,"./lib/vao-native.js":331}],333:[function(b,D,G){D.exports=
function(r,n,p){r[0]=n[0]+p[0];r[1]=n[1]+p[1];r[2]=n[2]+p[2];return r}},{}],334:[function(b,D,G){D.exports=function(k,a){k=r(k[0],k[1],k[2]);a=r(a[0],a[1],a[2]);n(k,k);n(a,a);a=p(k,a);return 1<a?0:Math.acos(a)};var r=b("./fromValues"),n=b("./normalize"),p=b("./dot")},{"./dot":344,"./fromValues":350,"./normalize":361}],335:[function(b,D,G){D.exports=function(r,n){r[0]=Math.ceil(n[0]);r[1]=Math.ceil(n[1]);r[2]=Math.ceil(n[2]);return r}},{}],336:[function(b,D,G){D.exports=function(r){var n=new Float32Array(3);
n[0]=r[0];n[1]=r[1];n[2]=r[2];return n}},{}],337:[function(b,D,G){D.exports=function(r,n){r[0]=n[0];r[1]=n[1];r[2]=n[2];return r}},{}],338:[function(b,D,G){D.exports=function(){var r=new Float32Array(3);r[0]=0;r[1]=0;r[2]=0;return r}},{}],339:[function(b,D,G){D.exports=function(r,n,p){var k=n[0],a=n[1];n=n[2];var e=p[0],f=p[1];p=p[2];r[0]=a*p-n*f;r[1]=n*e-k*p;r[2]=k*f-a*e;return r}},{}],340:[function(b,D,G){D.exports=b("./distance")},{"./distance":341}],341:[function(b,D,G){D.exports=function(r,n){var p=
n[0]-r[0],k=n[1]-r[1];r=n[2]-r[2];return Math.sqrt(p*p+k*k+r*r)}},{}],342:[function(b,D,G){D.exports=b("./divide")},{"./divide":343}],343:[function(b,D,G){D.exports=function(r,n,p){r[0]=n[0]/p[0];r[1]=n[1]/p[1];r[2]=n[2]/p[2];return r}},{}],344:[function(b,D,G){D.exports=function(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]}},{}],345:[function(b,D,G){D.exports=1E-6},{}],346:[function(b,D,G){D.exports=function(n,p){var k=n[0],a=n[1];n=n[2];var e=p[0],f=p[1];p=p[2];return Math.abs(k-e)<=r*Math.max(1,Math.abs(k),
Math.abs(e))&&Math.abs(a-f)<=r*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(n-p)<=r*Math.max(1,Math.abs(n),Math.abs(p))};var r=b("./epsilon")},{"./epsilon":345}],347:[function(b,D,G){D.exports=function(r,n){return r[0]===n[0]&&r[1]===n[1]&&r[2]===n[2]}},{}],348:[function(b,D,G){D.exports=function(r,n){r[0]=Math.floor(n[0]);r[1]=Math.floor(n[1]);r[2]=Math.floor(n[2]);return r}},{}],349:[function(b,D,G){D.exports=function(n,p,k,a,e,f){p||(p=3);k||(k=0);for(a=a?Math.min(a*p+k,n.length):n.length;k<a;k+=
p)r[0]=n[k],r[1]=n[k+1],r[2]=n[k+2],e(r,r,f),n[k]=r[0],n[k+1]=r[1],n[k+2]=r[2];return n};var r=b("./create")()},{"./create":338}],350:[function(b,D,G){D.exports=function(r,n,p){var k=new Float32Array(3);k[0]=r;k[1]=n;k[2]=p;return k}},{}],351:[function(b,D,G){D.exports={EPSILON:b("./epsilon"),create:b("./create"),clone:b("./clone"),angle:b("./angle"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),equals:b("./equals"),exactEquals:b("./exactEquals"),add:b("./add"),subtract:b("./subtract"),
sub:b("./sub"),multiply:b("./multiply"),mul:b("./mul"),divide:b("./divide"),div:b("./div"),min:b("./min"),max:b("./max"),floor:b("./floor"),ceil:b("./ceil"),round:b("./round"),scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),dist:b("./dist"),squaredDistance:b("./squaredDistance"),sqrDist:b("./sqrDist"),length:b("./length"),len:b("./len"),squaredLength:b("./squaredLength"),sqrLen:b("./sqrLen"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),
cross:b("./cross"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformMat3:b("./transformMat3"),transformQuat:b("./transformQuat"),rotateX:b("./rotateX"),rotateY:b("./rotateY"),rotateZ:b("./rotateZ"),forEach:b("./forEach")}},{"./add":333,"./angle":334,"./ceil":335,"./clone":336,"./copy":337,"./create":338,"./cross":339,"./dist":340,"./distance":341,"./div":342,"./divide":343,"./dot":344,"./epsilon":345,"./equals":346,"./exactEquals":347,"./floor":348,"./forEach":349,
"./fromValues":350,"./inverse":352,"./len":353,"./length":354,"./lerp":355,"./max":356,"./min":357,"./mul":358,"./multiply":359,"./negate":360,"./normalize":361,"./random":362,"./rotateX":363,"./rotateY":364,"./rotateZ":365,"./round":366,"./scale":367,"./scaleAndAdd":368,"./set":369,"./sqrDist":370,"./sqrLen":371,"./squaredDistance":372,"./squaredLength":373,"./sub":374,"./subtract":375,"./transformMat3":376,"./transformMat4":377,"./transformQuat":378}],352:[function(b,D,G){D.exports=function(r,n){r[0]=
1/n[0];r[1]=1/n[1];r[2]=1/n[2];return r}},{}],353:[function(b,D,G){D.exports=b("./length")},{"./length":354}],354:[function(b,D,G){D.exports=function(r){var n=r[0],p=r[1];r=r[2];return Math.sqrt(n*n+p*p+r*r)}},{}],355:[function(b,D,G){D.exports=function(r,n,p,k){var a=n[0],e=n[1];n=n[2];r[0]=a+k*(p[0]-a);r[1]=e+k*(p[1]-e);r[2]=n+k*(p[2]-n);return r}},{}],356:[function(b,D,G){D.exports=function(r,n,p){r[0]=Math.max(n[0],p[0]);r[1]=Math.max(n[1],p[1]);r[2]=Math.max(n[2],p[2]);return r}},{}],357:[function(b,
D,G){D.exports=function(r,n,p){r[0]=Math.min(n[0],p[0]);r[1]=Math.min(n[1],p[1]);r[2]=Math.min(n[2],p[2]);return r}},{}],358:[function(b,D,G){D.exports=b("./multiply")},{"./multiply":359}],359:[function(b,D,G){D.exports=function(r,n,p){r[0]=n[0]*p[0];r[1]=n[1]*p[1];r[2]=n[2]*p[2];return r}},{}],360:[function(b,D,G){D.exports=function(r,n){r[0]=-n[0];r[1]=-n[1];r[2]=-n[2];return r}},{}],361:[function(b,D,G){D.exports=function(r,n){var p=n[0],k=n[1],a=n[2];p=p*p+k*k+a*a;0<p&&(p=1/Math.sqrt(p),r[0]=
n[0]*p,r[1]=n[1]*p,r[2]=n[2]*p);return r}},{}],362:[function(b,D,G){D.exports=function(r,n){n=n||1;var p=2*Math.random()*Math.PI,k=2*Math.random()-1,a=Math.sqrt(1-k*k)*n;r[0]=Math.cos(p)*a;r[1]=Math.sin(p)*a;r[2]=k*n;return r}},{}],363:[function(b,D,G){D.exports=function(r,n,p,k){var a=p[1];p=p[2];var e=n[1]-a,f=n[2]-p,l=Math.sin(k);k=Math.cos(k);r[0]=n[0];r[1]=a+e*k-f*l;r[2]=p+e*l+f*k;return r}},{}],364:[function(b,D,G){D.exports=function(r,n,p,k){var a=p[0];p=p[2];var e=n[0]-a,f=n[2]-p,l=Math.sin(k);
k=Math.cos(k);r[0]=a+f*l+e*k;r[1]=n[1];r[2]=p+f*k-e*l;return r}},{}],365:[function(b,D,G){D.exports=function(r,n,p,k){var a=p[0];p=p[1];var e=n[0]-a,f=n[1]-p,l=Math.sin(k);k=Math.cos(k);r[0]=a+e*k-f*l;r[1]=p+e*l+f*k;r[2]=n[2];return r}},{}],366:[function(b,D,G){D.exports=function(r,n){r[0]=Math.round(n[0]);r[1]=Math.round(n[1]);r[2]=Math.round(n[2]);return r}},{}],367:[function(b,D,G){D.exports=function(r,n,p){r[0]=n[0]*p;r[1]=n[1]*p;r[2]=n[2]*p;return r}},{}],368:[function(b,D,G){D.exports=function(r,
n,p,k){r[0]=n[0]+p[0]*k;r[1]=n[1]+p[1]*k;r[2]=n[2]+p[2]*k;return r}},{}],369:[function(b,D,G){D.exports=function(r,n,p,k){r[0]=n;r[1]=p;r[2]=k;return r}},{}],370:[function(b,D,G){D.exports=b("./squaredDistance")},{"./squaredDistance":372}],371:[function(b,D,G){D.exports=b("./squaredLength")},{"./squaredLength":373}],372:[function(b,D,G){D.exports=function(r,n){var p=n[0]-r[0],k=n[1]-r[1];r=n[2]-r[2];return p*p+k*k+r*r}},{}],373:[function(b,D,G){D.exports=function(r){var n=r[0],p=r[1];r=r[2];return n*
n+p*p+r*r}},{}],374:[function(b,D,G){D.exports=b("./subtract")},{"./subtract":375}],375:[function(b,D,G){D.exports=function(r,n,p){r[0]=n[0]-p[0];r[1]=n[1]-p[1];r[2]=n[2]-p[2];return r}},{}],376:[function(b,D,G){D.exports=function(r,n,p){var k=n[0],a=n[1];n=n[2];r[0]=k*p[0]+a*p[3]+n*p[6];r[1]=k*p[1]+a*p[4]+n*p[7];r[2]=k*p[2]+a*p[5]+n*p[8];return r}},{}],377:[function(b,D,G){D.exports=function(r,n,p){var k=n[0],a=n[1];n=n[2];var e=p[3]*k+p[7]*a+p[11]*n+p[15];e=e||1;r[0]=(p[0]*k+p[4]*a+p[8]*n+p[12])/
e;r[1]=(p[1]*k+p[5]*a+p[9]*n+p[13])/e;r[2]=(p[2]*k+p[6]*a+p[10]*n+p[14])/e;return r}},{}],378:[function(b,D,G){D.exports=function(r,n,p){var k=n[0],a=n[1],e=n[2];n=p[0];var f=p[1],l=p[2];p=p[3];var m=p*k+f*e-l*a,c=p*a+l*k-n*e,d=p*e+n*a-f*k;k=-n*k-f*a-l*e;r[0]=m*p+k*-n+c*-l-d*-f;r[1]=c*p+k*-f+d*-n-m*-l;r[2]=d*p+k*-l+m*-f-c*-n;return r}},{}],379:[function(b,D,G){D.exports=function(r,n,p){r[0]=n[0]+p[0];r[1]=n[1]+p[1];r[2]=n[2]+p[2];r[3]=n[3]+p[3];return r}},{}],380:[function(b,D,G){D.exports=function(r){var n=
new Float32Array(4);n[0]=r[0];n[1]=r[1];n[2]=r[2];n[3]=r[3];return n}},{}],381:[function(b,D,G){D.exports=function(r,n){r[0]=n[0];r[1]=n[1];r[2]=n[2];r[3]=n[3];return r}},{}],382:[function(b,D,G){D.exports=function(){var r=new Float32Array(4);r[0]=0;r[1]=0;r[2]=0;r[3]=0;return r}},{}],383:[function(b,D,G){D.exports=function(r,n){var p=n[0]-r[0],k=n[1]-r[1],a=n[2]-r[2];r=n[3]-r[3];return Math.sqrt(p*p+k*k+a*a+r*r)}},{}],384:[function(b,D,G){D.exports=function(r,n,p){r[0]=n[0]/p[0];r[1]=n[1]/p[1];r[2]=
n[2]/p[2];r[3]=n[3]/p[3];return r}},{}],385:[function(b,D,G){D.exports=function(r,n){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]+r[3]*n[3]}},{}],386:[function(b,D,G){D.exports=function(r,n,p,k){var a=new Float32Array(4);a[0]=r;a[1]=n;a[2]=p;a[3]=k;return a}},{}],387:[function(b,D,G){D.exports={create:b("./create"),clone:b("./clone"),fromValues:b("./fromValues"),copy:b("./copy"),set:b("./set"),add:b("./add"),subtract:b("./subtract"),multiply:b("./multiply"),divide:b("./divide"),min:b("./min"),max:b("./max"),
scale:b("./scale"),scaleAndAdd:b("./scaleAndAdd"),distance:b("./distance"),squaredDistance:b("./squaredDistance"),length:b("./length"),squaredLength:b("./squaredLength"),negate:b("./negate"),inverse:b("./inverse"),normalize:b("./normalize"),dot:b("./dot"),lerp:b("./lerp"),random:b("./random"),transformMat4:b("./transformMat4"),transformQuat:b("./transformQuat")}},{"./add":379,"./clone":380,"./copy":381,"./create":382,"./distance":383,"./divide":384,"./dot":385,"./fromValues":386,"./inverse":388,"./length":389,
"./lerp":390,"./max":391,"./min":392,"./multiply":393,"./negate":394,"./normalize":395,"./random":396,"./scale":397,"./scaleAndAdd":398,"./set":399,"./squaredDistance":400,"./squaredLength":401,"./subtract":402,"./transformMat4":403,"./transformQuat":404}],388:[function(b,D,G){D.exports=function(r,n){r[0]=1/n[0];r[1]=1/n[1];r[2]=1/n[2];r[3]=1/n[3];return r}},{}],389:[function(b,D,G){D.exports=function(r){var n=r[0],p=r[1],k=r[2];r=r[3];return Math.sqrt(n*n+p*p+k*k+r*r)}},{}],390:[function(b,D,G){D.exports=
function(r,n,p,k){var a=n[0],e=n[1],f=n[2];n=n[3];r[0]=a+k*(p[0]-a);r[1]=e+k*(p[1]-e);r[2]=f+k*(p[2]-f);r[3]=n+k*(p[3]-n);return r}},{}],391:[function(b,D,G){D.exports=function(r,n,p){r[0]=Math.max(n[0],p[0]);r[1]=Math.max(n[1],p[1]);r[2]=Math.max(n[2],p[2]);r[3]=Math.max(n[3],p[3]);return r}},{}],392:[function(b,D,G){D.exports=function(r,n,p){r[0]=Math.min(n[0],p[0]);r[1]=Math.min(n[1],p[1]);r[2]=Math.min(n[2],p[2]);r[3]=Math.min(n[3],p[3]);return r}},{}],393:[function(b,D,G){D.exports=function(r,
n,p){r[0]=n[0]*p[0];r[1]=n[1]*p[1];r[2]=n[2]*p[2];r[3]=n[3]*p[3];return r}},{}],394:[function(b,D,G){D.exports=function(r,n){r[0]=-n[0];r[1]=-n[1];r[2]=-n[2];r[3]=-n[3];return r}},{}],395:[function(b,D,G){D.exports=function(r,n){var p=n[0],k=n[1],a=n[2];n=n[3];var e=p*p+k*k+a*a+n*n;0<e&&(e=1/Math.sqrt(e),r[0]=p*e,r[1]=k*e,r[2]=a*e,r[3]=n*e);return r}},{}],396:[function(b,D,G){var r=b("./normalize"),n=b("./scale");D.exports=function(p,k){k=k||1;p[0]=Math.random();p[1]=Math.random();p[2]=Math.random();
p[3]=Math.random();r(p,p);n(p,p,k);return p}},{"./normalize":395,"./scale":397}],397:[function(b,D,G){D.exports=function(r,n,p){r[0]=n[0]*p;r[1]=n[1]*p;r[2]=n[2]*p;r[3]=n[3]*p;return r}},{}],398:[function(b,D,G){D.exports=function(r,n,p,k){r[0]=n[0]+p[0]*k;r[1]=n[1]+p[1]*k;r[2]=n[2]+p[2]*k;r[3]=n[3]+p[3]*k;return r}},{}],399:[function(b,D,G){D.exports=function(r,n,p,k,a){r[0]=n;r[1]=p;r[2]=k;r[3]=a;return r}},{}],400:[function(b,D,G){D.exports=function(r,n){var p=n[0]-r[0],k=n[1]-r[1],a=n[2]-r[2];
r=n[3]-r[3];return p*p+k*k+a*a+r*r}},{}],401:[function(b,D,G){D.exports=function(r){var n=r[0],p=r[1],k=r[2];r=r[3];return n*n+p*p+k*k+r*r}},{}],402:[function(b,D,G){D.exports=function(r,n,p){r[0]=n[0]-p[0];r[1]=n[1]-p[1];r[2]=n[2]-p[2];r[3]=n[3]-p[3];return r}},{}],403:[function(b,D,G){D.exports=function(r,n,p){var k=n[0],a=n[1],e=n[2];n=n[3];r[0]=p[0]*k+p[4]*a+p[8]*e+p[12]*n;r[1]=p[1]*k+p[5]*a+p[9]*e+p[13]*n;r[2]=p[2]*k+p[6]*a+p[10]*e+p[14]*n;r[3]=p[3]*k+p[7]*a+p[11]*e+p[15]*n;return r}},{}],404:[function(b,
D,G){D.exports=function(r,n,p){var k=n[0],a=n[1],e=n[2],f=p[0],l=p[1],m=p[2];p=p[3];var c=p*k+l*e-m*a,d=p*a+m*k-f*e,g=p*e+f*a-l*k;k=-f*k-l*a-m*e;r[0]=c*p+k*-f+d*-m-g*-l;r[1]=d*p+k*-l+g*-f-c*-m;r[2]=g*p+k*-m+c*-l-d*-f;r[3]=n[3];return r}},{}],405:[function(b,D,G){var r=b("glsl-tokenizer"),n=b("atob-lite");D.exports=function(p){p=Array.isArray(p)?p:r(p);for(var k=0;k<p.length;k++){var a=p[k];if("preprocessor"===a.type&&(a=a.data.match(/#define\s+SHADER_NAME(_B64)?\s+(.+)$/))&&a[2])return p=a[2],(a[1]?
n(p):p).trim()}}},{"atob-lite":77,"glsl-tokenizer":412}],406:[function(b,D,G){D.exports=function(B){function C(ja){ja.length&&T.push({type:y[P],data:ja,position:aa,line:V,column:Z})}function u(){O=O.length?[]:O;if("/"===Q&&"*"===N)return aa=L+E-1,P=l,Q=N,E+1;if("/"===Q&&"/"===N)return aa=L+E-1,P=m,Q=N,E+1;if("#"===N)return P=c,aa=L+E,E;if(/\s/.test(N))return P=w,aa=L+E,E;Y=/\d/.test(N);ea=/[^\w_]/.test(N);aa=L+E;P=Y?g:ea?d:f;return E}function F(){if(("\r"===N||"\n"===N)&&"\\"!==Q)return C(O.join("")),
P=e,E;O.push(N);Q=N;return E+1}function H(){if("."===Q&&/\d/.test(N))return P=h,E;if("/"===Q&&"*"===N)return P=l,E;if("/"===Q&&"/"===N)return P=m,E;if("."===N&&O.length){for(;J(O););P=h;return E}if(";"===N||")"===N||"("===N){if(O.length)for(;J(O););C(N);P=e;return E+1}var ja=2===O.length&&"\x3d"!==N;if(/[\w_\d\s]/.test(N)||ja){for(;J(O););P=e;return E}O.push(N);Q=N;return E+1}function J(ja){var ra=0;do{var ha=n.indexOf(ja.slice(0,ja.length+ra).join(""));var la=n[ha];if(-1===ha){if(0<ra--+ja.length)continue;
la=ja.slice(0,1).join("")}C(la);aa+=la.length;O=O.slice(la.length);return O.length}while(1)}function I(){if("."===N||/[eE]/.test(N))return O.push(N),P=h,Q=N,E+1;if("x"===N&&1===O.length&&"0"===O[0])return P=z,O.push(N),Q=N,E+1;if(/[^\d]/.test(N))return C(O.join("")),P=e,E;O.push(N);Q=N;return E+1}function M(){"f"===N&&(O.push(N),Q=N,E+=1);if(/[eE]/.test(N)||("-"===N||"+"===N)&&/[eE]/.test(Q))return O.push(N),Q=N,E+1;if(/[^\d]/.test(N))return C(O.join("")),P=e,E;O.push(N);Q=N;return E+1}var E=0,L=
0,P=e,N,Q,O=[],T=[],V=1,Z=0,aa=0,Y=!1,ea=!1,ca="",ba;B=B||{};var ka=p,qa=r;"300 es"===B.version&&(ka=a,qa=k);var pa={},oa={};for(E=0;E<ka.length;E++)pa[ka[E]]=!0;for(E=0;E<qa.length;E++)oa[qa[E]]=!0;return function(ja){T=[];if(null!==ja){E=0;ja.toString&&(ja=ja.toString());ca+=ja.replace(/\r\n/g,"\n");for(ba=ca.length;N=ca[E],E<ba;){ja=E;switch(P){case l:"/"===N&&"*"===Q?(O.push(N),C(O.join("")),P=e):(O.push(N),Q=N);E+=1;break;case m:E=F();break;case c:E=F();break;case d:E=H();break;case g:E=I();
break;case z:/[^a-fA-F0-9]/.test(N)?(C(O.join("")),P=e):(O.push(N),Q=N,E+=1);break;case h:E=M();break;case f:if(/[^\d\w_]/.test(N)){var ra=O.join("");P=oa[ra]?v:pa[ra]?t:q;C(O.join(""));P=e}else O.push(N),Q=N,E+=1;break;case w:/[^\s]/g.test(N)?(C(O.join("")),P=e):(O.push(N),Q=N,E+=1);break;case e:E=u()}if(ja!==E)switch(ca[ja]){case "\n":Z=0;++V;break;default:++Z}}L+=E;ca=ca.slice(E);return T}O.length&&C(O.join(""));P=A;C("(eof)");return T}};var r=b("./lib/literals"),n=b("./lib/operators"),p=b("./lib/builtins"),
k=b("./lib/literals-300es"),a=b("./lib/builtins-300es"),e=999,f=9999,l=0,m=1,c=2,d=3,g=4,h=5,q=6,t=7,v=8,w=9,A=10,z=11,y="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ")},{"./lib/builtins":408,"./lib/builtins-300es":407,"./lib/literals":410,"./lib/literals-300es":409,"./lib/operators":411}],407:[function(b,D,G){b=b("./builtins");b=b.slice().filter(function(r){return!/^(gl_|texture)/.test(r)});D.exports=b.concat("gl_VertexID gl_InstanceID gl_Position gl_PointSize gl_FragCoord gl_FrontFacing gl_FragDepth gl_PointCoord gl_MaxVertexAttribs gl_MaxVertexUniformVectors gl_MaxVertexOutputVectors gl_MaxFragmentInputVectors gl_MaxVertexTextureImageUnits gl_MaxCombinedTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformVectors gl_MaxDrawBuffers gl_MinProgramTexelOffset gl_MaxProgramTexelOffset gl_DepthRangeParameters gl_DepthRange trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" "))},
{"./builtins":408}],408:[function(b,D,G){D.exports="abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")},
{}],409:[function(b,D,G){b=b("./literals");D.exports=b.slice().concat("layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray".split(" "))},
{"./literals":410}],410:[function(b,D,G){D.exports="precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int uint void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")},
{}],411:[function(b,D,G){D.exports="\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")},{}],412:[function(b,D,G){var r=b("./index");D.exports=function(n,p){p=r(p);var k=[];k=k.concat(p(n));return k=k.concat(p(null))}},{"./index":406}],413:[function(b,D,G){D.exports=function(r){"string"===typeof r&&(r=[r]);for(var n=[].slice.call(arguments,
1),p=[],k=0;k<r.length-1;k++)p.push(r[k],n[k]||"");p.push(r[k]);return p.join("")}},{}],414:[function(b,D,G){G="undefined"!==typeof lb?lb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{};b=b("is-browser");b="function"===typeof G.matchMedia?!G.matchMedia("(hover: none)").matches:b;D.exports=b},{"is-browser":438}],415:[function(b,D,G){function r(){var n=!1;try{var p=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,p);window.removeEventListener("test",
null,p)}catch(k){n=!1}return n}b=b("is-browser");D.exports=b&&r()},{"is-browser":438}],416:[function(b,D,G){G.read=function(r,n,p,k,a){var e=8*a-k-1;var f=(1<<e)-1,l=f>>1,m=-7;a=p?a-1:0;var c=p?-1:1,d=r[n+a];a+=c;p=d&(1<<-m)-1;d>>=-m;for(m+=e;0<m;p=256*p+r[n+a],a+=c,m-=8);e=p&(1<<-m)-1;p>>=-m;for(m+=k;0<m;e=256*e+r[n+a],a+=c,m-=8);if(0===p)p=1-l;else{if(p===f)return e?NaN:Infinity*(d?-1:1);e+=Math.pow(2,k);p-=l}return(d?-1:1)*e*Math.pow(2,p-k)};G.write=function(r,n,p,k,a,e){var f,l=8*e-a-1,m=(1<<
l)-1,c=m>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0;e=k?0:e-1;var g=k?1:-1,h=0>n||0===n&&0>1/n?1:0;n=Math.abs(n);isNaN(n)||Infinity===n?(n=isNaN(n)?1:0,k=m):(k=Math.floor(Math.log(n)/Math.LN2),1>n*(f=Math.pow(2,-k))&&(k--,f*=2),n=1<=k+c?n+d/f:n+d*Math.pow(2,1-c),2<=n*f&&(k++,f/=2),k+c>=m?(n=0,k=m):1<=k+c?(n=(n*f-1)*Math.pow(2,a),k+=c):(n=n*Math.pow(2,c-1)*Math.pow(2,a),k=0));for(;8<=a;r[p+e]=n&255,e+=g,n/=256,a-=8);k=k<<a|n;for(l+=a;0<l;r[p+e]=k&255,e+=g,k/=256,l-=8);r[p+e-g]|=128*h}},{}],417:[function(b,
D,G){var r=b("./types");D.exports=function(n,p){var k,a;for(k in r)if(a=r[k].detect(n,p))return k}},{"./types":420}],418:[function(b,D,G){(function(r){function n(m,c){var d=l(m,c);if(d in f&&(m=f[d].calculate(m,c),!1!==m))return m.type=d,m;throw new TypeError("unsupported file type: "+d+" (file: "+c+")");}function p(m,c){a.open(m,"r",function(d,g){if(d)return c(d);a.fstat(g,function(h,q){if(h)return c(h);h=q.size;if(0>=h)return c(Error("File size is not greater than 0 —— "+m));h=Math.min(h,524288);
var t=r.alloc(h);a.read(g,t,0,h,0,function(v){if(v)return c(v);a.close(g,function(w){c(w,t)})})})})}function k(m){m=a.openSync(m,"r");var c=a.fstatSync(m).size;c=Math.min(c,524288);var d=r.alloc(c);a.readSync(m,d,0,c,0);a.closeSync(m);return d}var a=b("fs"),e=b("path"),f=b("./types"),l=b("./detector");D.exports=function(m,c){if(r.isBuffer(m))return n(m);if("string"!==typeof m)throw new TypeError("invalid invocation");var d=e.resolve(m);if("function"===typeof c)p(d,function(g,h){if(g)return c(g);try{var q=
n(h,d)}catch(t){g=t}c(g,q)});else return m=k(d),n(m,d)};D.exports.types=Object.keys(f)}).call(this,b("buffer").Buffer)},{"./detector":417,"./types":420,buffer:111,fs:109,path:481}],419:[function(b,D,G){D.exports=function(r,n,p,k){return r["readUInt"+n+(k?"BE":"LE")].call(r,p||0)}},{}],420:[function(b,D,G){b={bmp:b("./types/bmp"),cur:b("./types/cur"),dds:b("./types/dds"),gif:b("./types/gif"),icns:b("./types/icns"),ico:b("./types/ico"),jpg:b("./types/jpg"),png:b("./types/png"),psd:b("./types/psd"),
svg:b("./types/svg"),tiff:b("./types/tiff"),webp:b("./types/webp")};D.exports=b},{"./types/bmp":421,"./types/cur":422,"./types/dds":423,"./types/gif":424,"./types/icns":425,"./types/ico":426,"./types/jpg":427,"./types/png":428,"./types/psd":429,"./types/svg":430,"./types/tiff":431,"./types/webp":432}],421:[function(b,D,G){D.exports={detect:function(r){return"BM"===r.toString("ascii",0,2)},calculate:function(r){return{width:r.readUInt32LE(18),height:Math.abs(r.readInt32LE(22))}}}},{}],422:[function(b,
D,G){D.exports={detect:function(r){return 0!==r.readUInt16LE(0)?!1:2===r.readUInt16LE(2)},calculate:b("./ico").calculate}},{"./ico":426}],423:[function(b,D,G){D.exports={detect:function(r){return 542327876===r.readUInt32LE(0)},calculate:function(r){return{height:r.readUInt32LE(12),width:r.readUInt32LE(16)}}}},{}],424:[function(b,D,G){var r=/^GIF8[79]a/;D.exports={detect:function(n){n=n.toString("ascii",0,6);return r.test(n)},calculate:function(n){return{width:n.readUInt16LE(6),height:n.readUInt16LE(8)}}}},
{}],425:[function(b,D,G){function r(k,a){var e=a+4;return[k.toString("ascii",a,e),k.readUInt32BE(e)]}function n(k){var a=p[k];return{width:a,height:a,type:k}}var p={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};D.exports={detect:function(k){return"icns"===k.toString("ascii",0,4)},calculate:function(k){var a=
k.length,e=8,f=k.readUInt32BE(4),l;var m=r(k,e);var c=n(m[0]);e+=m[1];if(e===f)return c;for(l={width:c.width,height:c.height,images:[c]};e<f&&e<a;)m=r(k,e),c=n(m[0]),e+=m[1],l.images.push(c);return l}}},{}],426:[function(b,D,G){function r(p,k){p=p.readUInt8(k);return 0===p?256:p}function n(p,k){k=6+16*k;return{width:r(p,k),height:r(p,k+1)}}D.exports={detect:function(p){return 0!==p.readUInt16LE(0)?!1:1===p.readUInt16LE(2)},calculate:function(p){var k=p.readUInt16LE(4),a=n(p,0),e;if(1===k)return a;
a.images=[{width:a.width,height:a.height}];for(e=1;e<k;e+=1)a.images.push(n(p,e));return a}}},{}],427:[function(b,D,G){var r=b("../readUInt");D.exports={detect:function(n){return"ffd8"===n.toString("hex",0,2)},calculate:function(n){n=n.slice(4);for(var p,k,a;n.length;){k=n.readUInt16BE(0);if("45786966"===n.toString("hex",2,6)){p=n.slice(2,k);var e=p.toString("hex",6,8);a="4d4d"===e;e="4949"===e;if(a||e)b:{e=r(p,16,14,a);for(var f=0;f<e;f++){var l=16+12*f;var m=l+12;if(l>p.length)break;m=p.slice(l,
m);if(274===r(m,16,0,a)){if(3!==r(m,16,2,a))break;if(1!==r(m,32,4,a))break;p=r(m,16,8,a);break b}}p=void 0}else p=void 0}a=n;e=k;if(e>a.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==a[e])throw new TypeError("Invalid JPG, marker table corrupted");a=n[k+1];if(192===a||193===a||194===a)return k+=5,k={height:n.readUInt16BE(k),width:n.readUInt16BE(k+2)},p?{width:k.width,height:k.height,orientation:p}:k;n=n.slice(k+2)}throw new TypeError("Invalid JPG, no size found");}}},{"../readUInt":419}],
428:[function(b,D,G){D.exports={detect:function(r){if("PNG\r\n\n"===r.toString("ascii",1,8)){var n=r.toString("ascii",12,16);"CgBI"===n&&(n=r.toString("ascii",28,32));if("IHDR"!==n)throw new TypeError("invalid png");return!0}},calculate:function(r){return"CgBI"===r.toString("ascii",12,16)?{width:r.readUInt32BE(32),height:r.readUInt32BE(36)}:{width:r.readUInt32BE(16),height:r.readUInt32BE(20)}}}},{}],429:[function(b,D,G){D.exports={detect:function(r){return"8BPS"===r.toString("ascii",0,4)},calculate:function(r){return{width:r.readUInt32BE(18),
height:r.readUInt32BE(14)}}}},{}],430:[function(b,D,G){function r(f){if(f=/([0-9.]+)([a-z]*)/.exec(f))return Math.round(parseFloat(f[1])*(e[f[2]]||1))}var n=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,p=/\swidth=(['"])([^%]+?)\1/,k=/\sheight=(['"])([^%]+?)\1/,a=/\sviewBox=(['"])(.+?)\1/,e={cm:96/2.54,mm:96/2.54/10,m:96/2.54*100,pt:96/72,pc:96/72/12,em:16,ex:8};D.exports={detect:function(f){return n.test(f)},calculate:function(f){if(f=f.toString("utf8").match(n)){var l=f[0];f=l.match(p);var m=l.match(k);l=
l.match(a);f=f&&r(f[2]);m=m&&r(m[2]);var c;if(c=l)l=l[2].split(" "),c={width:r(l[2]),height:r(l[3])};l=c;if(f&&m)return{width:f,height:m};if(l)return c=l.width/l.height,f=f?{width:f,height:Math.floor(f/c)}:m?{width:Math.floor(m*c),height:m}:{width:l.width,height:l.height},f}throw new TypeError("invalid svg");}}},{}],431:[function(b,D,G){(function(r){var n=b("fs"),p=b("../readUInt");D.exports={detect:function(k){k=k.toString("hex",0,4);return"49492a00"===k||"4d4d002a"===k},calculate:function(k,a){if(!a)throw new TypeError("Tiff doesn't support buffer");
var e=k.toString("ascii",0,2);e="BE"===("II"===e?"LE":"MM"===e?"BE":void 0);k=p(k,32,4,e);var f=1024,l=n.statSync(a).size;k+f>l&&(f=l-k-10);l=r.alloc(f);a=n.openSync(a,"r");n.readSync(a,l,0,f,k);k=l.slice(2);a={};for(var m;k&&k.length&&(f=p(k,16,0,e),l=p(k,16,2,e),m=p(k,32,4,e),0!==f);){if(1===m&&(3===l||4===l)){l=k;m=e;var c=p(l,16,8,m);l=(p(l,16,10,m)<<16)+c;a[f]=l}k=24<k.length?k.slice(12):void 0}e=a[256];a=a[257];if(!e||!a)throw new TypeError("Invalid Tiff, missing tags");return{width:e,height:a}}}}).call(this,
b("buffer").Buffer)},{"../readUInt":419,buffer:111,fs:109}],432:[function(b,D,G){D.exports={detect:function(r){var n="RIFF"===r.toString("ascii",0,4),p="WEBP"===r.toString("ascii",8,12);r="VP8"===r.toString("ascii",12,15);return n&&p&&r},calculate:function(r){var n=r.toString("ascii",12,16);r=r.slice(20,30);if("VP8X"===n)return n=r[0],0===(n&192)&&0===(n&1)?{width:1+r.readUIntLE(4,3),height:1+r.readUIntLE(7,3)}:!1;if("VP8 "===n&&47!==r[0])return{width:r.readInt16LE(6)&16383,height:r.readInt16LE(8)&
16383};var p=r.toString("hex",3,6);return"VP8L"===n&&"9d012a"!==p?{width:1+((r[2]&63)<<8|r[1]),height:1+((r[4]&15)<<10|r[3]<<2|(r[2]&192)>>6)}:!1}}},{}],433:[function(b,D,G){function r(m,c,d){this.vertices=m;this.adjacent=c;this.boundary=d;this.lastVisited=-1}function n(m,c,d){this.vertices=m;this.cell=c;this.index=d}function p(m,c){return f(m.vertices,c.vertices)}function k(m){for(var c=["function orient(){var tuple\x3dthis.tuple;return test("],d=0;d<=m;++d)0<d&&c.push(","),c.push("tuple[",d,"]");
c.push(")}return orient");c=new Function("test",c.join(""));(m=e[m+1])||(m=e);return c(m)}function a(m,c,d){this.dimension=m;this.vertices=c;this.simplices=d;this.interior=d.filter(function(g){return!g.boundary});this.tuple=Array(m+1);for(c=0;c<=m;++c)this.tuple[c]=this.vertices[c];(c=l[m])||(c=l[m]=k(m));this.orient=c}D.exports=function(m,c){var d=m.length;if(0===d)throw Error("Must have at least d+1 points");var g=m[0].length;if(d<=g)throw Error("Must input at least d+1 points");var h=m.slice(0,
g+1),q=e.apply(void 0,h);if(0===q)throw Error("Input not in general position");for(var t=Array(g+1),v=0;v<=g;++v)t[v]=v;0>q&&(t[0]=1,t[1]=0);q=new r(t,Array(g+1),!1);var w=q.adjacent,A=Array(g+2);for(v=0;v<=g;++v){for(var z=t.slice(),y=0;y<=g;++y)y===v&&(z[y]=-1);y=z[0];z[0]=z[1];z[1]=y;z=new r(z,Array(g+1),!0);w[v]=z;A[v]=z}A[g+1]=q;for(v=0;v<=g;++v)for(z=w[v].vertices,t=w[v].adjacent,y=0;y<=g;++y){var B=z[y];if(0>B)t[y]=q;else for(var C=0;C<=g;++C)0>w[C].vertices.indexOf(B)&&(t[y]=w[C])}h=new a(g,
h,A);c=!!c;for(v=g+1;v<d;++v)h.insert(m[v],c);return h.boundary()};var e=b("robust-orientation"),f=b("simplicial-complex").compareCells;r.prototype.flip=function(){var m=this.vertices[0];this.vertices[0]=this.vertices[1];this.vertices[1]=m;m=this.adjacent[0];this.adjacent[0]=this.adjacent[1];this.adjacent[1]=m};var l=[];b=a.prototype;b.handleBoundaryDegeneracy=function(m,c){var d=this.dimension,g=this.vertices.length-1,h=this.tuple,q=this.vertices,t=[m];for(m.lastVisited=-g;0<t.length;){m=t.pop();
m=m.adjacent;for(var v=0;v<=d;++v){var w=m[v];if(w.boundary&&!(w.lastVisited<=-g)){for(var A=w.vertices,z=0;z<=d;++z){var y=A[z];h[z]=0>y?c:q[y]}A=this.orient();if(0<A)return w;w.lastVisited=-g;0===A&&t.push(w)}}}return null};b.walk=function(m,c){var d=this.vertices.length-1,g=this.dimension,h=this.vertices,q=this.tuple,t=this.interior[c?this.interior.length*Math.random()|0:this.interior.length-1];a:for(;!t.boundary;){var v=t.vertices;c=t.adjacent;for(var w=0;w<=g;++w)q[w]=h[v[w]];t.lastVisited=d;
for(w=0;w<=g;++w)if(t=c[w],!(t.lastVisited>=d)){v=q[w];q[w]=m;var A=this.orient();q[w]=v;if(0>A)continue a;else t.lastVisited=t.boundary?-d:d}return}return t};b.addPeaks=function(m,c){var d=this.vertices.length-1,g=this.dimension,h=this.vertices,q=this.tuple,t=this.interior,v=this.simplices,w=[c];c.lastVisited=d;c.vertices[c.vertices.indexOf(-1)]=d;c.boundary=!1;t.push(c);for(var A=[];0<w.length;){c=w.pop();var z=c.vertices,y=c.adjacent,B=z.indexOf(d);if(!(0>B))for(var C=0;C<=g;++C)if(C!==B){var u=
y[C];if(u.boundary&&!(u.lastVisited>=d)){var F=u.vertices;if(u.lastVisited!==-d){for(var H=0,J=0;J<=g;++J)0>F[J]?(H=J,q[J]=m):q[J]=h[F[J]];if(0<this.orient()){F[H]=d;u.boundary=!1;t.push(u);w.push(u);u.lastVisited=d;continue}else u.lastVisited=-d}J=u.adjacent;F=z.slice();var I=y.slice();H=new r(F,I,!0);v.push(H);var M=J.indexOf(c);if(!(0>M))for(J[M]=H,I[B]=u,F[C]=-1,I[C]=c,y[C]=H,H.flip(),J=0;J<=g;++J)if(u=F[J],!(0>u||u===d)){u=Array(g-1);for(M=I=0;M<=g;++M){var E=F[M];0>E||M===J||(u[I++]=E)}A.push(new n(u,
H,J))}}}}A.sort(p);for(C=0;C+1<A.length;C+=2)m=A[C],c=A[C+1],d=c.index,0>m.index||0>d||(m.cell.adjacent[m.index]=c.cell,c.cell.adjacent[c.index]=m.cell)};b.insert=function(m,c){var d=this.vertices;d.push(m);if(c=this.walk(m,c)){for(var g=this.dimension,h=this.tuple,q=0;q<=g;++q){var t=c.vertices[q];h[q]=0>t?m:d[t]}d=this.orient(h);if(!(0>d)){if(0===d&&(c=this.handleBoundaryDegeneracy(c,m),!c))return;this.addPeaks(m,c)}}};b.boundary=function(){for(var m=this.dimension,c=[],d=this.simplices,g=d.length,
h=0;h<g;++h){var q=d[h];if(q.boundary){var t=Array(m);q=q.vertices;for(var v=0,w=0,A=0;A<=m;++A)0<=q[A]?t[v++]=q[A]:w=A&1;w===(m&1)&&(q=t[0],t[0]=t[1],t[1]=q);c.push(t)}}return c}},{"robust-orientation":520,"simplicial-complex":530}],434:[function(b,D,G){function r(q,t,v,w,A){this.mid=q;this.left=t;this.right=v;this.leftPoints=w;this.rightPoints=A;this.count=(t?t.count:0)+(v?v.count:0)+w.length}function n(q,t){q.mid=t.mid;q.left=t.left;q.right=t.right;q.leftPoints=t.leftPoints;q.rightPoints=t.rightPoints;
q.count=t.count}function p(q,t){t=d(t);q.mid=t.mid;q.left=t.left;q.right=t.right;q.leftPoints=t.leftPoints;q.rightPoints=t.rightPoints;q.count=t.count}function k(q,t){var v=q.intervals([]);t=v.indexOf(t);if(0>t)return 0;v.splice(t,1);p(q,v);return 1}function a(q,t,v){for(var w=0;w<q.length&&q[w][0]<=t;++w){var A=v(q[w]);if(A)return A}}function e(q,t,v){for(var w=q.length-1;0<=w&&q[w][1]>=t;--w){var A=v(q[w]);if(A)return A}}function f(q,t){for(var v=0;v<q.length;++v){var w=t(q[v]);if(w)return w}}function l(q,
t){return q-t}function m(q,t){var v=q[0]-t[0];return v?v:q[1]-t[1]}function c(q,t){var v=q[1]-t[1];return v?v:q[0]-t[0]}function d(q){if(0===q.length)return null;for(var t=[],v=0;v<q.length;++v)t.push(q[v][0],q[v][1]);t.sort(l);t=t[t.length>>1];var w=[],A=[],z=[];for(v=0;v<q.length;++v){var y=q[v];y[1]<t?w.push(y):t<y[0]?A.push(y):z.push(y)}q=z.slice();z.sort(m);q.sort(c);return new r(t,d(w),d(A),z,q)}function g(q){this.root=q}var h=b("binary-search-bounds");D.exports=function(q){return q&&0!==q.length?
new g(d(q)):new g(null)};b=r.prototype;b.intervals=function(q){q.push.apply(q,this.leftPoints);this.left&&this.left.intervals(q);this.right&&this.right.intervals(q);return q};b.insert=function(q){var t=this.count-this.leftPoints.length;this.count+=1;if(q[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?(t=this.intervals([]),t.push(q),p(this,t)):this.left.insert(q):this.left=d([q]);else if(q[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?(t=this.intervals([]),t.push(q),p(this,t)):this.right.insert(q):
this.right=d([q]);else{t=h.ge(this.leftPoints,q,m);var v=h.ge(this.rightPoints,q,c);this.leftPoints.splice(t,0,q);this.rightPoints.splice(v,0,q)}};b.remove=function(q){var t=this.count-this.leftPoints;if(q[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(t-1))return k(this,q);t=this.left.remove(q);if(2===t)return this.left=null,--this.count,1;1===t&&--this.count;return t}if(q[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(t-1))return k(this,q);
t=this.right.remove(q);if(2===t)return this.right=null,--this.count,1;1===t&&--this.count;return t}if(1===this.count)return this.leftPoints[0]===q?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===q){if(this.left&&this.right){q=this;for(var v=this.left;v.right;)q=v,v=v.right;if(q===this)v.right=this.right;else{var w=this.left;t=this.right;q.count-=v.count;q.right=v.left;v.left=w;v.right=t}n(this,v);this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?
n(this,this.left):n(this,this.right);return 1}for(w=h.ge(this.leftPoints,q,m);w<this.leftPoints.length&&this.leftPoints[w][0]===q[0];++w)if(this.leftPoints[w]===q)for(--this.count,this.leftPoints.splice(w,1),t=h.ge(this.rightPoints,q,c);t<this.rightPoints.length&&this.rightPoints[t][1]===q[1];++t)if(this.rightPoints[t]===q)return this.rightPoints.splice(t,1),1;return 0};b.queryPoint=function(q,t){if(q<this.mid){if(this.left){var v=this.left.queryPoint(q,t);if(v)return v}return a(this.leftPoints,q,
t)}return q>this.mid?this.right&&(v=this.right.queryPoint(q,t))?v:e(this.rightPoints,q,t):f(this.leftPoints,t)};b.queryInterval=function(q,t,v){if(q<this.mid&&this.left){var w=this.left.queryInterval(q,t,v);if(w)return w}return t>this.mid&&this.right&&(w=this.right.queryInterval(q,t,v))?w:t<this.mid?a(this.leftPoints,t,v):q>this.mid?e(this.rightPoints,q,v):f(this.leftPoints,v)};b=g.prototype;b.insert=function(q){this.root?this.root.insert(q):this.root=new r(q[0],null,null,[q],[q])};b.remove=function(q){return this.root?
(q=this.root.remove(q),2===q&&(this.root=null),0!==q):!1};b.queryPoint=function(q,t){if(this.root)return this.root.queryPoint(q,t)};b.queryInterval=function(q,t,v){if(q<=t&&this.root)return this.root.queryInterval(q,t,v)};Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}});Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":435}],435:[function(b,D,G){arguments[4][243][0].apply(G,arguments)},{dup:243}],
436:[function(b,D,G){D.exports=function(r,n){n=n||Array(r.length);for(var p=0;p<r.length;++p)n[r[p]]=p;return n}},{}],437:[function(b,D,G){D.exports=function(r){for(var n=Array(r),p=0;p<r;++p)n[p]=p;return n}},{}],438:[function(b,D,G){D.exports=!0},{}],439:[function(b,D,G){function r(n){return!!n.constructor&&"function"===typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)}D.exports=function(n){return null!=n&&(r(n)||"function"===typeof n.readFloatLE&&"function"===typeof n.slice&&r(n.slice(0,
0))||!!n._isBuffer)}},{}],440:[function(b,D,G){D.exports="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],441:[function(b,D,G){function r(k){k||(k={});var a=k.ua;a||"undefined"===typeof navigator||(a=navigator.userAgent);a&&a.headers&&"string"===typeof a.headers["user-agent"]&&(a=a.headers["user-agent"]);if("string"!==typeof a)return!1;var e=k.tablet?p.test(a):n.test(a);!e&&k.tablet&&k.featureDetect&&navigator&&1<navigator.maxTouchPoints&&
-1!==a.indexOf("Macintosh")&&-1!==a.indexOf("Safari")&&(e=!0);return e}D.exports=r;D.exports.isMobile=r;D.exports.default=r;var n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,p=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i},
{}],442:[function(b,D,G){D.exports=function(r){var n=typeof r;return null!==r&&("object"===n||"function"===n)}},{}],443:[function(b,D,G){var r=Object.prototype.toString;D.exports=function(n){var p;return"[object Object]"===r.call(n)&&(p=Object.getPrototypeOf(n),null===p||p===Object.getPrototypeOf({}))}},{}],444:[function(b,D,G){D.exports=function(r){for(var n=r.length,p,k=0;k<n;k++)if(p=r.charCodeAt(k),(9>p||13<p)&&32!==p&&133!==p&&160!==p&&5760!==p&&6158!==p&&(8192>p||8205<p)&&8232!==p&&8233!==p&&
8239!==p&&8287!==p&&8288!==p&&12288!==p&&65279!==p)return!1;return!0}},{}],445:[function(b,D,G){D.exports=function(r){if("string"!==typeof r)return!1;r=r.trim();return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(r)&&/[\dz]$/i.test(r)&&4<r.length?!0:!1}},{}],446:[function(b,D,G){D.exports=function(r,n,p){return r*(1-p)+n*p}},{}],447:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?D.exports=n():(r=r||self,r.mapboxgl=n())})(this,function(){function r(a,e){if(n)if(p){a="var sharedChunk \x3d {}; ("+
n+")(sharedChunk); ("+p+")(sharedChunk);";var f={};n(f);k=e(f);k.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else p=e;else n=e}var n,p,k;r(["exports"],function(a){function e(x,K){return x(K={exports:{}},K.exports),K.exports}function f(x,K,S,fa){this.cx=3*x;this.bx=3*(S-x)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*K;this.by=3*(fa-K)-this.cy;this.ay=1-this.cy-this.by;this.p1x=x;this.p1y=fa;this.p2x=S;this.p2y=fa}function l(x,K){this.x=x;this.y=K}function m(x,K,S,fa){var sa=
new Zj(x,K,S,fa);return function(za){return sa.solve(za)}}function c(x,K,S){return Math.min(S,Math.max(K,x))}function d(x,K,S){var fa=S-K;x=((x-K)%fa+fa)%fa+K;return x===K?S:x}function g(x){for(var K=[],S=arguments.length-1;0<S--;)K[S]=arguments[S+1];for(S=0;S<K.length;S+=1){var fa=K[S],sa;for(sa in fa)x[sa]=fa[sa]}return x}function h(){return function S(K){return K?(K^16*Math.random()>>K/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,S)}()}function q(x){return!!x&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(x)}
function t(x,K){x.forEach(function(S){K[S]&&(K[S]=K[S].bind(K))})}function v(x,K){return-1!==x.indexOf(K,x.length-K.length)}function w(x,K,S){var fa={},sa;for(sa in x)fa[sa]=K.call(S||this,x[sa],sa,x);return fa}function A(x,K,S){var fa={},sa;for(sa in x)K.call(S||this,x[sa],sa,x)&&(fa[sa]=x[sa]);return fa}function z(x){return Array.isArray(x)?x.map(z):"object"==typeof x&&x?w(x,z):x}function y(x){$g[x]||("undefined"!=typeof console&&console.warn(x),$g[x]=!0)}function B(x,K,S){return(S.y-x.y)*(K.x-
x.x)>(K.y-x.y)*(S.x-x.x)}function C(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function u(x){var K={};if(x.replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)(?:=(?:([^\x00-\x20\(\)<>@,;:\\"\/\[\]\?=\{\}\x7F]+)|(?:"((?:[^"\\]|\\.)*)")))?/g,function(S,fa,sa,za){S=sa||za;return K[fa]=!S||S.toLowerCase(),""}),K["max-age"])x=parseInt(K["max-age"],10),isNaN(x)?delete K["max-age"]:K["max-age"]=x;return K}function F(x){if(null==
th){var K=x.navigator?x.navigator.userAgent:null;th=!!x.safari||!(!K||!(/\b(iPad|iPhone|iPod)\b/.test(K)||K.match("Safari")&&!K.match("Chrome")))}return th}function H(x){try{var K=self[x];return K.setItem("_mapbox_test_",1),K.removeItem("_mapbox_test_"),!0}catch(S){return!1}}function J(x){var K=x.createTexture();x.bindTexture(x.TEXTURE_2D,K);try{if(x.texImage2D(x.TEXTURE_2D,0,x.RGBA,x.RGBA,x.UNSIGNED_BYTE,rg),x.isContextLost())return;ah.supported=!0}catch(S){}x.deleteTexture(K);bh=!0}function I(x){return 0===
x.indexOf("mapbox:")}function M(x){x=x.match(Th);if(!x)throw Error("Unable to parse URL object");return{protocol:x[1],authority:x[2],path:x[3]||"/",params:x[4]?x[4].split("\x26"):[]}}function E(x){var K=x.params.length?"?"+x.params.join("\x26"):"";return x.protocol+"://"+x.authority+x.path+K}function L(x){if(!x)return null;x=x.split(".");if(!x||3!==x.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(x[1]).split("").map(function(K){return"%"+("00"+K.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(K){return null}}
function P(){self.caches&&!Cg&&(Cg=self.caches.open("mapbox-tiles"))}function N(x){var K=x.indexOf("?");return 0>K?x:x.slice(0,K)}function Q(){return null==W&&(W=self.OffscreenCanvas&&(new self.OffscreenCanvas(1,1)).getContext("2d")&&"function"==typeof self.createImageBitmap),W}function O(x,K,S){S[x]&&-1!==S[x].indexOf(K)||(S[x]=S[x]||[],S[x].push(K))}function T(x,K,S){S&&S[x]&&(K=S[x].indexOf(K),-1!==K&&S[x].splice(K,1))}function V(x){var K=x.value;return K?[new jc(x.key,K,"constants have been deprecated as of v8")]:
[]}function Z(x){for(var K=[],S=arguments.length-1;0<S--;)K[S]=arguments[S+1];for(S=0;S<K.length;S+=1){var fa=K[S],sa;for(sa in fa)x[sa]=fa[sa]}return x}function aa(x){return x instanceof Number||x instanceof String||x instanceof Boolean?x.valueOf():x}function Y(x){if(Array.isArray(x))return x.map(Y);if(x instanceof Object&&!(x instanceof Number||x instanceof String||x instanceof Boolean)){var K={},S;for(S in x)K[S]=Y(x[S]);return K}return aa(x)}function ea(x,K){return{kind:"array",itemType:x,N:K}}
function ca(x){if("array"===x.kind){var K=ca(x.itemType);return"number"==typeof x.N?"array\x3c"+K+", "+x.N+"\x3e":"value"===x.itemType.kind?"array":"array\x3c"+K+"\x3e"}return x.kind}function ba(x,K){if("error"===K.kind)return null;if("array"===x.kind){if("array"===K.kind&&(0===K.N&&"value"===K.itemType.kind||!ba(x.itemType,K.itemType))&&("number"!=typeof x.N||x.N===K.N))return null}else{if(x.kind===K.kind)return null;if("value"===x.kind)for(var S=0,fa=De;S<fa.length;S+=1)if(!ba(fa[S],K))return null}return"Expected "+
ca(x)+" but found "+ca(K)+" instead."}function ka(x,K){return K.some(function(S){return S.kind===x.kind})}function qa(x,K){return K.some(function(S){return"null"===S?null===x:"array"===S?Array.isArray(x):"object"===S?x&&!Array.isArray(x)&&"object"==typeof x:S===typeof x})}function pa(x,K,S,fa){return"number"==typeof x&&0<=x&&255>=x&&"number"==typeof K&&0<=K&&255>=K&&"number"==typeof S&&0<=S&&255>=S?void 0===fa||"number"==typeof fa&&0<=fa&&1>=fa?null:"Invalid rgba value ["+[x,K,S,fa].join(", ")+"]: 'a' must be between 0 and 1.":
"Invalid rgba value ["+("number"==typeof fa?[x,K,S,fa]:[x,K,S]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function oa(x){if(null===x||"string"==typeof x||"boolean"==typeof x||"number"==typeof x||x instanceof Wd||x instanceof oe||x instanceof ye||x instanceof Re)return!0;if(Array.isArray(x)){for(var K=0;K<x.length;K+=1)if(!oa(x[K]))return!1;return!0}if("object"==typeof x){for(K in x)if(!oa(x[K]))return!1;return!0}return!1}function ja(x){if(null===x)return qd;if("string"==typeof x)return td;
if("boolean"==typeof x)return nd;if("number"==typeof x)return Vc;if(x instanceof Wd)return Gd;if(x instanceof oe)return he;if(x instanceof ye)return ee;if(x instanceof Re)return Ce;if(Array.isArray(x)){for(var K,S=x.length,fa=0;fa<x.length;fa+=1){var sa=ja(x[fa]);if(K){if(K===sa)continue;K=zd;break}K=sa}return ea(K||zd,S)}return Hd}function ra(x){var K=typeof x;return null===x?"":"string"===K||"number"===K||"boolean"===K?String(x):x instanceof Wd||x instanceof ye||x instanceof Re?x.toString():JSON.stringify(x)}
function ha(x,K){x[0]=Math.min(x[0],K[0]);x[1]=Math.min(x[1],K[1]);x[2]=Math.max(x[2],K[0]);x[3]=Math.max(x[3],K[1])}function la(x,K){return!(x[0]<=K[0]||x[2]>=K[2]||x[1]<=K[1]||x[3]>=K[3])}function ua(x,K){for(var S,fa,sa,za,Ja,Ra,db,jb=!1,Bb=0,Jb=K.length;Bb<Jb;Bb++)for(var Xb=K[Bb],Tb=0,bc=Xb.length;Tb<bc-1;Tb++){if(0==(za=(S=x)[0]-(fa=Xb[Tb])[0])*(db=S[1]-(sa=Xb[Tb+1])[1])-(Ra=S[0]-sa[0])*(Ja=S[1]-fa[1])&&0>=za*Ra&&0>=Ja*db)return!1;var ac=Xb[Tb],Bc=Xb[Tb+1];ac[1]>x[1]!=Bc[1]>x[1]&&x[0]<(Bc[0]-
ac[0])*(x[1]-ac[1])/(Bc[1]-ac[1])+ac[0]&&(jb=!jb)}return jb}function na(x,K,S,fa){var sa=fa[0]-S[0];fa=fa[1]-S[1];x=(x[0]-S[0])*fa-sa*(x[1]-S[1]);K=(K[0]-S[0])*fa-sa*(K[1]-S[1]);return 0<x&&0>K||0>x&&0<K}function wa(x,K){for(var S=0;S<x.length;++S)if(!ua(x[S],K))return!1;for(S=0;S<x.length-1;++S){var fa;a:{for(var sa=fa=void 0,za=void 0,Ja=void 0,Ra=void 0,db=void 0,jb=x[S],Bb=x[S+1],Jb=0,Xb=K;Jb<Xb.length;Jb+=1)for(var Tb=Xb[Jb],bc=0;bc<Tb.length-1;++bc)if(0!=(sa=[(za=Tb[bc+1])[0]-(Ja=Tb[bc])[0],
za[1]-Ja[1]])[0]*(fa=[(Ra=Bb)[0]-(db=jb)[0],Ra[1]-db[1]])[1]-sa[1]*fa[0]&&na(db,Ra,Ja,za)&&na(Ja,za,db,Ra)){fa=!0;break a}fa=!1}if(fa)return!1}return!0}function Ca(x,K,S){for(var fa=[],sa=0;sa<x.length;sa++){for(var za=[],Ja=0;Ja<x[sa].length;Ja++){var Ra=x[sa][Ja];var db=Math.pow(2,S.z);Ra=[Math.round((180+Ra[0])/360*db*8192),Math.round((180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Ra[1]*Math.PI/360)))/360*db*8192)];ha(K,Ra);za.push(Ra)}fa.push(za)}return fa}function Fa(x,K,S){for(var fa=[],sa=0;sa<
x.length;sa++){var za=Ca(x[sa],K,S);fa.push(za)}return fa}function Xa(x,K,S,fa){if(x[0]<S[0]||x[0]>S[2]){var sa=.5*fa,za=x[0]-S[0]>sa?-fa:S[0]-x[0]>sa?fa:0;0===za&&(za=x[0]-S[2]>sa?-fa:S[2]-x[0]>sa?fa:0);x[0]+=za}ha(K,x)}function ab(x,K,S,fa){var sa=8192*Math.pow(2,fa.z);fa=[8192*fa.x,8192*fa.y];for(var za=[],Ja=0;Ja<x.length;Ja+=1)for(var Ra=0,db=x[Ja];Ra<db.length;Ra+=1){var jb=db[Ra];jb=[jb.x+fa[0],jb.y+fa[1]];Xa(jb,K,S,sa);za.push(jb)}return za}function gb(x,K,S,fa){var sa=8192*Math.pow(2,fa.z),
za=[8192*fa.x,8192*fa.y];fa=[];for(var Ja=0;Ja<x.length;Ja+=1){for(var Ra=[],db=0,jb=x[Ja];db<jb.length;db+=1){var Bb=jb[db];Bb=[Bb.x+za[0],Bb.y+za[1]];ha(K,Bb);Ra.push(Bb)}fa.push(Ra)}if(K[2]-K[0]<=sa/2)for(K[0]=K[1]=1/0,K[2]=K[3]=-1/0,x=0;x<fa.length;x+=1)for(za=0,Ja=fa[x];za<Ja.length;za+=1)Xa(Ja[za],K,S,sa);return fa}function bb(x){if(x instanceof Ne&&("get"===x.name&&1===x.args.length||"feature-state"===x.name||"has"===x.name&&1===x.args.length||"properties"===x.name||"geometry-type"===x.name||
"id"===x.name||/^filter-/.test(x.name))||x instanceof Rf)return!1;var K=!0;return x.eachChild(function(S){K&&!bb(S)&&(K=!1)}),K}function La(x){if(x instanceof Ne&&"feature-state"===x.name)return!1;var K=!0;return x.eachChild(function(S){K&&!La(S)&&(K=!1)}),K}function kb(x,K){if(x instanceof Ne&&0<=K.indexOf(x.name))return!1;var S=!0;return x.eachChild(function(fa){S&&!kb(fa,K)&&(S=!1)}),S}function mb(x,K){for(var S,fa=x.length-1,sa=0,za=fa,Ja;sa<=za;)if((S=x[Ja=Math.floor((sa+za)/2)])<=K){if(Ja===
fa||K<x[Ja+1])return Ja;sa=Ja+1}else{if(!(S>K))throw new hf("Input is not a number.");za=Ja-1}return 0}function ya(x,K,S){return x*(1-S)+K*S}function Ia(x){return.008856451679035631<x?Math.pow(x,1/3):x/ti+4/29}function Na(x){return x>6/29?x*x*x:ti*(x-4/29)}function Ta(x){return 255*(.0031308>=x?12.92*x:1.055*Math.pow(x,1/2.4)-.055)}function hb(x){return.04045>=(x/=255)?x/12.92:Math.pow((x+.055)/1.055,2.4)}function Ya(x){var K=hb(x.r),S=hb(x.g),fa=hb(x.b),sa=Ia((.4124564*K+.3575761*S+.1804375*fa)/
.95047),za=Ia(.2126729*K+.7151522*S+.072175*fa);return{l:116*za-16,a:500*(sa-za),b:200*(za-Ia((.0193339*K+.119192*S+.9503041*fa)/1.08883)),alpha:x.a}}function Ga(x){var K=(x.l+16)/116,S=isNaN(x.a)?K:K+x.a/500,fa=isNaN(x.b)?K:K-x.b/200;return K=1*Na(K),S=.95047*Na(S),fa=1.08883*Na(fa),new Wd(Ta(3.2404542*S-1.5371385*K-.4985314*fa),Ta(-.969266*S+1.8760108*K+.041556*fa),Ta(.0556434*S-.2040259*K+1.0572252*fa),x.alpha)}function Pa(x,K,S,fa){fa-=S;x-=S;return 0===fa?0:1===K?x/fa:(Math.pow(K,x)-1)/(Math.pow(K,
fa)-1)}function Va(x,K){return"\x3d\x3d"===x||"!\x3d"===x?"boolean"===K.kind||"string"===K.kind||"number"===K.kind||"null"===K.kind||"value"===K.kind:"string"===K.kind||"number"===K.kind||"value"===K.kind}function va(x,K,S,fa){return 0===fa.compare(K,S)}function Ea(x,K,S){var fa="\x3d\x3d"!==x&&"!\x3d"!==x;return function(){function sa(za,Ja,Ra){this.type=nd;this.lhs=za;this.rhs=Ja;this.collator=Ra;this.hasUntypedArgument="value"===za.type.kind||"value"===Ja.type.kind}return sa.parse=function(za,
Ja){if(3!==za.length&&4!==za.length)return Ja.error("Expected two or three arguments.");var Ra=za[0],db=Ja.parse(za[1],1,zd);if(!db)return null;if(!Va(Ra,db.type))return Ja.concat(1).error('"'+Ra+"\" comparisons are not supported for type '"+ca(db.type)+"'.");var jb=Ja.parse(za[2],2,zd);if(!jb)return null;if(!Va(Ra,jb.type))return Ja.concat(2).error('"'+Ra+"\" comparisons are not supported for type '"+ca(jb.type)+"'.");if(db.type.kind!==jb.type.kind&&"value"!==db.type.kind&&"value"!==jb.type.kind)return Ja.error("Cannot compare types '"+
ca(db.type)+"' and '"+ca(jb.type)+"'.");fa&&("value"===db.type.kind&&"value"!==jb.type.kind?db=new af(jb.type,[db]):"value"!==db.type.kind&&"value"===jb.type.kind&&(jb=new af(db.type,[jb])));Ra=null;if(4===za.length){if("string"!==db.type.kind&&"string"!==jb.type.kind&&"value"!==db.type.kind&&"value"!==jb.type.kind)return Ja.error("Cannot use collator to compare non-string types.");if(!(Ra=Ja.parse(za[3],3,he)))return null}return new sa(db,jb,Ra)},sa.prototype.evaluate=function(za){var Ja=this.lhs.evaluate(za),
Ra=this.rhs.evaluate(za);if(fa&&this.hasUntypedArgument){var db=ja(Ja),jb=ja(Ra);if(db.kind!==jb.kind||"string"!==db.kind&&"number"!==db.kind)throw new hf('Expected arguments for "'+x+'" to be (string, string) or (number, number), but found ('+db.kind+", "+jb.kind+") instead.");}return this.collator&&!fa&&this.hasUntypedArgument&&(db=ja(Ja),jb=ja(Ra),"string"!==db.kind||"string"!==jb.kind)?K(za,Ja,Ra):this.collator?S(za,Ja,Ra,this.collator.evaluate(za)):K(za,Ja,Ra)},sa.prototype.eachChild=function(za){za(this.lhs);
za(this.rhs);this.collator&&za(this.collator)},sa.prototype.outputDefined=function(){return!0},sa.prototype.serialize=function(){var za=[x];return this.eachChild(function(Ja){za.push(Ja.serialize())}),za},sa}()}function Qa(x,K){var S=K[0],fa=K[1],sa=K[2];K=K[3];S=S.evaluate(x);fa=fa.evaluate(x);sa=sa.evaluate(x);x=K?K.evaluate(x):1;if(K=pa(S,fa,sa,x))throw new hf(K);return new Wd(S/255*x,fa/255*x,sa/255*x,x)}function $a(x,K){x=K[x];return void 0===x?null:x}function eb(x){return{result:"error",value:x}}
function pb(x){return"data-driven"===x["property-type"]||"cross-faded-data-driven"===x["property-type"]}function Za(x){return!!x.expression&&-1<x.expression.parameters.indexOf("zoom")}function nb(x){return!!x.expression&&x.expression.interpolated}function sb(x){return x instanceof Number?"number":x instanceof String?"string":x instanceof Boolean?"boolean":Array.isArray(x)?"array":null===x?"null":typeof x}function Cb(x){return"object"==typeof x&&null!==x&&!Array.isArray(x)}function Ib(x){return x}
function fc(x,K,S){return void 0!==x?x:void 0!==K?K:void 0!==S?S:void 0}function qc(x,K,S,fa,sa){return fc(typeof S===sa?fa[S]:void 0,x.default,K.default)}function Cc(x,K,S){if("number"!==sb(S))return fc(x.default,K.default);K=x.stops.length;if(1===K||S<=x.stops[0][0])return x.stops[0][1];if(S>=x.stops[K-1][0])return x.stops[K-1][1];S=mb(x.stops.map(function(fa){return fa[0]}),S);return x.stops[S][1]}function cd(x,K,S){var fa=void 0!==x.base?x.base:1;if("number"!==sb(S))return fc(x.default,K.default);
var sa=x.stops.length;if(1===sa||S<=x.stops[0][0])return x.stops[0][1];if(S>=x.stops[sa-1][0])return x.stops[sa-1][1];sa=mb(x.stops.map(function(Bb){return Bb[0]}),S);var za=function(Bb,Jb,Xb,Tb){Tb-=Xb;Bb-=Xb;return 0===Tb?0:1===Jb?Bb/Tb:(Math.pow(Jb,Bb)-1)/(Math.pow(Jb,Tb)-1)}(S,fa,x.stops[sa][0],x.stops[sa+1][0]),Ja=x.stops[sa][1],Ra=x.stops[sa+1][1],db=Zi[K.type]||Ib;if(x.colorSpace&&"rgb"!==x.colorSpace){var jb=tj[x.colorSpace];db=function(Bb,Jb){return jb.reverse(jb.interpolate(jb.forward(Bb),
jb.forward(Jb),za))}}return"function"==typeof Ja.evaluate?{evaluate:function(){for(var Bb=[],Jb=arguments.length;Jb--;)Bb[Jb]=arguments[Jb];Jb=Ja.evaluate.apply(void 0,Bb);Bb=Ra.evaluate.apply(void 0,Bb);if(void 0!==Jb&&void 0!==Bb)return db(Jb,Bb,za)}}:db(Ja,Ra,za)}function Qc(x,K,S){return"color"===K.type?S=Wd.parse(S):"formatted"===K.type?S=ye.fromString(S.toString()):"resolvedImage"===K.type?S=Re.fromString(S.toString()):sb(S)===K.type||"enum"===K.type&&K.values[S]||(S=void 0),fc(S,x.default,
K.default)}function Wc(x){return Array.isArray(x)&&0<x.length&&"string"==typeof x[0]&&x[0]in Li}function Fc(x,K){var S=Eg;if(K){var fa={color:Gd,string:td,number:Vc,enum:td,boolean:nd,formatted:ee,resolvedImage:Ce};fa="array"===K.type?ea(fa[K.value]||zd,K.length):fa[K.type]}else fa=void 0;S=new S(Li,[],fa);return(x=S.parse(x,void 0,void 0,void 0,K&&"string"===K.type?{typeAnnotation:"coerce"}:void 0))?{result:"success",value:new fi(x,K)}:eb(S.errors)}function ld(x,K){if("error"===(x=Fc(x,K)).result)return x;
var S=x.value.expression,fa=bb(S);if(!fa&&!pb(K))return eb([new Uc("","data expressions not supported")]);var sa=kb(S,["zoom"]);return sa||Za(K)?(S=function Ra(Ja){var db=null;if(Ja instanceof wh)db=Ra(Ja.result);else if(Ja instanceof Wh)for(var jb=0,Bb=Ja.args;jb<Bb.length&&!(db=Ra(Bb[jb]));jb+=1);else(Ja instanceof Af||Ja instanceof Gf)&&Ja.input instanceof Ne&&"zoom"===Ja.input.name&&(db=Ja);return db instanceof Uc||Ja.eachChild(function(Jb){Jb=Ra(Jb);Jb instanceof Uc?db=Jb:!db&&Jb?db=new Uc("",
'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):db&&Jb&&db!==Jb&&(db=new Uc("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),db}(S))||sa?S instanceof Uc?eb([S]):S instanceof Gf&&!nb(K)?eb([new Uc("",'"interpolate" expressions cannot be used with this property')]):{result:"success",value:S?new Ef(fa?"camera":"composite",x.value,S.labels,S instanceof Gf?S.interpolation:void 0):new fe(fa?"constant":"source",
x.value)}:eb([new Uc("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]):eb([new Uc("","zoom expressions not supported")])}function yb(x){var K=x.key,S=x.value,fa=x.valueSpec||{},sa=x.objectElementValidators||{},za=x.style;x=x.styleSpec;var Ja=[],Ra=sb(S);if("object"!==Ra)return[new jc(K,S,"object expected, "+Ra+" found")];for(var db in S){var jb=db.split(".")[0];Ra=fa[jb]||fa["*"];if(sa[jb])jb=sa[jb];else if(fa[jb])jb=Lc;else if(sa["*"])jb=sa["*"];
else{if(!fa["*"]){Ja.push(new jc(K,S[db],'unknown property "'+db+'"'));continue}jb=Lc}Ja=Ja.concat(jb({key:(K?K+".":K)+db,value:S[db],valueSpec:Ra,style:za,styleSpec:x,object:S,objectKey:db},S))}for(var Bb in fa)sa[Bb]||fa[Bb].required&&void 0===fa[Bb].default&&void 0===S[Bb]&&Ja.push(new jc(K,S,'missing required property "'+Bb+'"'));return Ja}function Wb(x){var K=x.value,S=x.valueSpec,fa=x.style,sa=x.styleSpec,za=x.key;x=x.arrayElementValidator||Lc;if("array"!==sb(K))return[new jc(za,K,"array expected, "+
sb(K)+" found")];if(S.length&&K.length!==S.length)return[new jc(za,K,"array length "+S.length+" expected, length "+K.length+" found")];if(S["min-length"]&&K.length<S["min-length"])return[new jc(za,K,"array length at least "+S["min-length"]+" expected, length "+K.length+" found")];var Ja={type:S.value,values:S.values};7>sa.$version&&(Ja.function=S.function);"object"===sb(S.value)&&(Ja=S.value);S=[];for(var Ra=0;Ra<K.length;Ra++)S=S.concat(x({array:K,arrayIndex:Ra,value:K[Ra],valueSpec:Ja,style:fa,
styleSpec:sa,key:za+"["+Ra+"]"}));return S}function Dc(x){var K=x.key,S=x.value;x=x.valueSpec;var fa=sb(S);return"number"===fa&&S!=S&&(fa="NaN"),"number"!==fa?[new jc(K,S,"number expected, "+fa+" found")]:"minimum"in x&&S<x.minimum?[new jc(K,S,S+" is less than the minimum value "+x.minimum)]:"maximum"in x&&S>x.maximum?[new jc(K,S,S+" is greater than the maximum value "+x.maximum)]:[]}function ec(x){function K(Tb){var bc=[],ac=Tb.value,Bc=Tb.key;if("array"!==sb(ac))return[new jc(Bc,ac,"array expected, "+
sb(ac)+" found")];if(2!==ac.length)return[new jc(Bc,ac,"array length 2 expected, length "+ac.length+" found")];if(Jb){if("object"!==sb(ac[0]))return[new jc(Bc,ac,"object expected, "+sb(ac[0])+" found")];if(void 0===ac[0].zoom)return[new jc(Bc,ac,"object stop key must have zoom")];if(void 0===ac[0].value)return[new jc(Bc,ac,"object stop key must have value")];if(za&&za>aa(ac[0].zoom))return[new jc(Bc,ac[0].zoom,"stop zoom values must appear in ascending order")];aa(ac[0].zoom)!==za&&(za=aa(ac[0].zoom),
sa=void 0,db={});bc=bc.concat(yb({key:Bc+"[0]",value:ac[0],valueSpec:{zoom:{}},style:Tb.style,styleSpec:Tb.styleSpec,objectElementValidators:{zoom:Dc,value:S}}))}else bc=bc.concat(S({key:Bc+"[0]",value:ac[0],valueSpec:{},style:Tb.style,styleSpec:Tb.styleSpec},ac));return Wc(Y(ac[1]))?bc.concat([new jc(Bc+"[1]",ac[1],"expressions are not allowed in function stops.")]):bc.concat(Lc({key:Bc+"[1]",value:ac[1],valueSpec:Ja,style:Tb.style,styleSpec:Tb.styleSpec}))}function S(Tb,bc){var ac=sb(Tb.value),
Bc=aa(Tb.value);bc=null!==Tb.value?Tb.value:bc;if(fa){if(ac!==fa)return[new jc(Tb.key,bc,ac+" stop domain type must match previous stop domain type "+fa)]}else fa=ac;return"number"!==ac&&"string"!==ac&&"boolean"!==ac?[new jc(Tb.key,bc,"stop domain value must be a number, string, or boolean")]:"number"!==ac&&"categorical"!==Ra?(ac="number expected, "+ac+" found",pb(Ja)&&void 0===Ra&&(ac+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new jc(Tb.key,bc,ac)]):"categorical"!==
Ra||"number"!==ac||isFinite(Bc)&&Math.floor(Bc)===Bc?"categorical"!==Ra&&"number"===ac&&void 0!==sa&&Bc<sa?[new jc(Tb.key,bc,"stop domain values must appear in ascending order")]:(sa=Bc,"categorical"===Ra&&Bc in db?[new jc(Tb.key,bc,"stop domain values must be unique")]:(db[Bc]=!0,[])):[new jc(Tb.key,bc,"integer expected, found "+Bc)]}var fa,sa,za,Ja=x.valueSpec,Ra=aa(x.value.type),db={},jb="categorical"!==Ra&&void 0===x.value.property,Bb=!jb,Jb="array"===sb(x.value.stops)&&"array"===sb(x.value.stops[0])&&
"object"===sb(x.value.stops[0][0]),Xb=yb({key:x.key,value:x.value,valueSpec:x.styleSpec.function,style:x.style,styleSpec:x.styleSpec,objectElementValidators:{stops:function(Tb){if("identity"===Ra)return[new jc(Tb.key,Tb.value,'identity function may not have a "stops" property')];var bc=[],ac=Tb.value;return bc=bc.concat(Wb({key:Tb.key,value:ac,valueSpec:Tb.valueSpec,style:Tb.style,styleSpec:Tb.styleSpec,arrayElementValidator:K})),"array"===sb(ac)&&0===ac.length&&bc.push(new jc(Tb.key,ac,"array must have at least one stop")),
bc},default:function(Tb){return Lc({key:Tb.key,value:Tb.value,valueSpec:Ja,style:Tb.style,styleSpec:Tb.styleSpec})}}});return"identity"===Ra&&jb&&Xb.push(new jc(x.key,x.value,'missing required property "property"')),"identity"===Ra||x.value.stops||Xb.push(new jc(x.key,x.value,'missing required property "stops"')),"exponential"===Ra&&x.valueSpec.expression&&!nb(x.valueSpec)&&Xb.push(new jc(x.key,x.value,"exponential functions not supported")),8<=x.styleSpec.$version&&(Bb&&!pb(x.valueSpec)?Xb.push(new jc(x.key,
x.value,"property functions not supported")):jb&&!Za(x.valueSpec)&&Xb.push(new jc(x.key,x.value,"zoom functions not supported"))),"categorical"!==Ra&&!Jb||void 0!==x.value.property||Xb.push(new jc(x.key,x.value,'"property" property is required')),Xb}function kc(x){var K=("property"===x.expressionContext?ld:Fc)(Y(x.value),x.valueSpec);if("error"===K.result)return K.value.map(function(S){return new jc(""+x.key+S.key,x.value,S.message)});K=K.value.expression||K.value._styleExpression.expression;if("property"===
x.expressionContext&&"text-font"===x.propertyKey&&!K.outputDefined())return[new jc(x.key,x.value,'Invalid data expression for "'+x.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===x.expressionContext&&"layout"===x.propertyType&&!La(K))return[new jc(x.key,x.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===x.expressionContext&&!La(K))return[new jc(x.key,x.value,'"feature-state" data expressions are not supported with filters.')];
if(x.expressionContext&&0===x.expressionContext.indexOf("cluster")){if(!kb(K,["zoom","feature-state"]))return[new jc(x.key,x.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===x.expressionContext&&!bb(K))return[new jc(x.key,x.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ic(x){var K=x.key,S=x.value;x=x.valueSpec;var fa=[];return Array.isArray(x.values)?-1===
x.values.indexOf(aa(S))&&fa.push(new jc(K,S,"expected one of ["+x.values.join(", ")+"], "+JSON.stringify(S)+" found")):-1===Object.keys(x.values).indexOf(aa(S))&&fa.push(new jc(K,S,"expected one of ["+Object.keys(x.values).join(", ")+"], "+JSON.stringify(S)+" found")),fa}function ob(x){if(!0===x||!1===x)return!0;if(!Array.isArray(x)||0===x.length)return!1;switch(x[0]){case "has":return 2<=x.length&&"$id"!==x[1]&&"$type"!==x[1];case "in":return 3<=x.length&&("string"!=typeof x[1]||Array.isArray(x[2]));
case "!in":case "!has":case "none":return!1;case "\x3d\x3d":case "!\x3d":case "\x3e":case "\x3e\x3d":case "\x3c":case "\x3c\x3d":return 3!==x.length||Array.isArray(x[1])||Array.isArray(x[2]);case "any":case "all":var K=0;for(x=x.slice(1);K<x.length;K+=1){var S=x[K];if(!ob(S)&&"boolean"!=typeof S)return!1}return!0;default:return!0}}function tb(x){if(null==x)return{filter:function(){return!0},needGeometry:!1};ob(x)||(x=lc(x));var K=Fc(x,df);if("error"===K.result)throw Error(K.value.map(function(S){return S.key+
": "+S.message}).join(", "));return{filter:function(S,fa,sa){return K.value.evaluate(S,fa,{},sa)},needGeometry:function sa(fa){if(!Array.isArray(fa))return!1;if("within"===fa[0])return!0;for(var za=1;za<fa.length;za++)if(sa(fa[za]))return!0;return!1}(x)}}function $b(x,K){return x<K?-1:x>K?1:0}function lc(x){if(!x)return!0;var K,S=x[0];return 1>=x.length?"any"!==S:"\x3d\x3d"===S?yc(x[1],x[2],"\x3d\x3d"):"!\x3d"===S?zb(yc(x[1],x[2],"\x3d\x3d")):"\x3c"===S||"\x3e"===S||"\x3c\x3d"===S||"\x3e\x3d"===S?
yc(x[1],x[2],S):"any"===S?(K=x.slice(1),["any"].concat(K.map(lc))):"all"===S?["all"].concat(x.slice(1).map(lc)):"none"===S?["all"].concat(x.slice(1).map(lc).map(zb)):"in"===S?Rb(x[1],x.slice(2)):"!in"===S?zb(Rb(x[1],x.slice(2))):"has"===S?Ub(x[1]):"!has"===S?zb(Ub(x[1])):"within"!==S||x}function yc(x,K,S){switch(x){case "$type":return["filter-type-"+S,K];case "$id":return["filter-id-"+S,K];default:return["filter-"+S,x,K]}}function Rb(x,K){if(0===K.length)return!1;switch(x){case "$type":return["filter-type-in",
["literal",K]];case "$id":return["filter-id-in",["literal",K]];default:return 200<K.length&&!K.some(function(S){return typeof S!=typeof K[0]})?["filter-in-large",x,["literal",K.sort($b)]]:["filter-in-small",x,["literal",K]]}}function Ub(x){switch(x){case "$type":return!0;case "$id":return["filter-has-id"];default:return["filter-has",x]}}function zb(x){return["!",x]}function qb(x){return ob(Y(x.value))?kc(Z({},x,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function fa(S){var sa=S.value,
za=S.key;if("array"!==sb(sa))return[new jc(za,sa,"array expected, "+sb(sa)+" found")];var Ja,Ra=S.styleSpec,db=[];if(1>sa.length)return[new jc(za,sa,"filter array must have at least 1 element")];switch(db=db.concat(ic({key:za+"[0]",value:sa[0],valueSpec:Ra.filter_operator,style:S.style,styleSpec:S.styleSpec})),aa(sa[0])){case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":2<=sa.length&&"$type"===aa(sa[1])&&db.push(new jc(za,sa,'"$type" cannot be use with operator "'+sa[0]+'"'));case "\x3d\x3d":case "!\x3d":3!==
sa.length&&db.push(new jc(za,sa,'filter array for operator "'+sa[0]+'" must have 3 elements'));case "in":case "!in":2<=sa.length&&"string"!==(Ja=sb(sa[1]))&&db.push(new jc(za+"[1]",sa[1],"string expected, "+Ja+" found"));for(var jb=2;jb<sa.length;jb++)Ja=sb(sa[jb]),"$type"===aa(sa[1])?db=db.concat(ic({key:za+"["+jb+"]",value:sa[jb],valueSpec:Ra.geometry_type,style:S.style,styleSpec:S.styleSpec})):"string"!==Ja&&"number"!==Ja&&"boolean"!==Ja&&db.push(new jc(za+"["+jb+"]",sa[jb],"string, number, or boolean expected, "+
Ja+" found"));break;case "any":case "all":case "none":for(Ja=1;Ja<sa.length;Ja++)db=db.concat(fa({key:za+"["+Ja+"]",value:sa[Ja],style:S.style,styleSpec:S.styleSpec}));break;case "has":case "!has":Ja=sb(sa[1]);2!==sa.length?db.push(new jc(za,sa,'filter array for "'+sa[0]+'" operator must have 2 elements')):"string"!==Ja&&db.push(new jc(za+"[1]",sa[1],"string expected, "+Ja+" found"));break;case "within":Ja=sb(sa[1]),2!==sa.length?db.push(new jc(za,sa,'filter array for "'+sa[0]+'" operator must have 2 elements')):
"object"!==Ja&&db.push(new jc(za+"[1]",sa[1],"object expected, "+Ja+" found"))}return db}(x)}function vb(x,K){var S=x.key,fa=x.style,sa=x.styleSpec,za=x.value,Ja=x.objectKey,Ra=sa[K+"_"+x.layerType];if(!Ra)return[];var db=Ja.match(/^(.*)-transition$/);if("paint"===K&&db&&Ra[db[1]]&&Ra[db[1]].transition)return Lc({key:S,value:za,valueSpec:sa.transition,style:fa,styleSpec:sa});var jb;Ra=x.valueSpec||Ra[Ja];if(!Ra)return[new jc(S,za,'unknown property "'+Ja+'"')];if("string"===sb(za)&&pb(Ra)&&!Ra.tokens&&
(jb=/^{([^}]+)}$/.exec(za)))return[new jc(S,za,'"'+Ja+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(jb[1])+" }`.")];jb=[];return"symbol"===x.layerType&&("text-field"===Ja&&fa&&!fa.glyphs&&jb.push(new jc(S,za,'use of "text-field" requires a style "glyphs" property')),"text-font"===Ja&&Cb(Y(za))&&"identity"===aa(za.type)&&jb.push(new jc(S,za,'"text-font" does not support identity functions'))),jb.concat(Lc({key:x.key,
value:za,valueSpec:Ra,style:fa,styleSpec:sa,expressionContext:"property",propertyType:K,propertyKey:Ja}))}function Db(x){return vb(x,"paint")}function Qb(x){return vb(x,"layout")}function wc(x){var K=[],S=x.value,fa=x.key,sa=x.style,za=x.styleSpec;S.type||S.ref||K.push(new jc(fa,S,'either "type" or "ref" is required'));var Ja,Ra=aa(S.type),db=aa(S.ref);if(S.id)for(var jb=aa(S.id),Bb=0;Bb<x.arrayIndex;Bb++){var Jb=sa.layers[Bb];aa(Jb.id)===jb&&K.push(new jc(fa,S.id,'duplicate layer id "'+S.id+'", previously used at line '+
Jb.id.__line__))}"ref"in S?(["type","source","source-layer","filter","layout"].forEach(function(Xb){Xb in S&&K.push(new jc(fa,S[Xb],'"'+Xb+'" is prohibited for ref layers'))}),sa.layers.forEach(function(Xb){aa(Xb.id)===db&&(Ja=Xb)}),Ja?Ja.ref?K.push(new jc(fa,S.ref,"ref cannot reference another ref layer")):Ra=aa(Ja.type):K.push(new jc(fa,S.ref,'ref layer "'+db+'" not found'))):"background"!==Ra&&(S.source?(jb=(sa=sa.sources&&sa.sources[S.source])&&aa(sa.type),sa?"vector"===jb&&"raster"===Ra?K.push(new jc(fa,
S.source,'layer "'+S.id+'" requires a raster source')):"raster"===jb&&"raster"!==Ra?K.push(new jc(fa,S.source,'layer "'+S.id+'" requires a vector source')):"vector"!==jb||S["source-layer"]?"raster-dem"===jb&&"hillshade"!==Ra?K.push(new jc(fa,S.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ra||!S.paint||!S.paint["line-gradient"]||"geojson"===jb&&sa.lineMetrics||K.push(new jc(fa,S,'layer "'+S.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):
K.push(new jc(fa,S,'layer "'+S.id+'" must specify a "source-layer"')):K.push(new jc(fa,S.source,'source "'+S.source+'" not found'))):K.push(new jc(fa,S,'missing required property "source"')));return K=K.concat(yb({key:fa,value:S,valueSpec:za.layer,style:x.style,styleSpec:x.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Lc({key:fa+".type",value:S.type,valueSpec:za.layer.type,style:x.style,styleSpec:x.styleSpec,object:S,objectKey:"type"})},filter:qb,layout:function(Xb){return yb({layer:S,
key:Xb.key,value:Xb.value,style:Xb.style,styleSpec:Xb.styleSpec,objectElementValidators:{"*":function(Tb){return Qb(Z({layerType:Ra},Tb))}}})},paint:function(Xb){return yb({layer:S,key:Xb.key,value:Xb.value,style:Xb.style,styleSpec:Xb.styleSpec,objectElementValidators:{"*":function(Tb){return Db(Z({layerType:Ra},Tb))}}})}}}))}function dc(x){var K=x.value;x=x.key;var S=sb(K);return"string"!==S?[new jc(x,K,"string expected, "+S+" found")]:[]}function xc(x){var K=x.value,S=x.key,fa=x.styleSpec,sa=x.style;
if(!K.type)return[new jc(S,K,'"type" is required')];var za=aa(K.type);switch(za){case "vector":case "raster":case "raster-dem":return yb({key:S,value:K,valueSpec:fa["source_"+za.replace("-","_")],style:x.style,styleSpec:fa,objectElementValidators:ke});case "geojson":if(x=yb({key:S,value:K,valueSpec:fa.source_geojson,style:sa,styleSpec:fa,objectElementValidators:ke}),K.cluster)for(var Ja in K.clusterProperties)fa=K.clusterProperties[Ja],sa=fa[0],sa="string"==typeof sa?[sa,["accumulated"],["get",Ja]]:
sa,x.push.apply(x,kc({key:S+"."+Ja+".map",value:fa[1],expressionContext:"cluster-map"})),x.push.apply(x,kc({key:S+"."+Ja+".reduce",value:sa,expressionContext:"cluster-reduce"}));return x;case "video":return yb({key:S,value:K,valueSpec:fa.source_video,style:sa,styleSpec:fa});case "image":return yb({key:S,value:K,valueSpec:fa.source_image,style:sa,styleSpec:fa});case "canvas":return[new jc(S,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];
default:return ic({key:S+".type",value:K.type,valueSpec:{values:"vector raster raster-dem geojson video image".split(" ")},style:sa,styleSpec:fa})}}function Nc(x){var K=x.value,S=x.styleSpec,fa=S.light;x=x.style;var sa=[],za=sb(K);if(void 0===K)return sa;if("object"!==za)return sa.concat([new jc("light",K,"object expected, "+za+" found")]);for(var Ja in K)za=Ja.match(/^(.*)-transition$/),sa=sa.concat(za&&fa[za[1]]&&fa[za[1]].transition?Lc({key:Ja,value:K[Ja],valueSpec:S.transition,style:x,styleSpec:S}):
fa[Ja]?Lc({key:Ja,value:K[Ja],valueSpec:fa[Ja],style:x,styleSpec:S}):[new jc(Ja,K[Ja],'unknown property "'+Ja+'"')]);return sa}function Lc(x){var K=x.value,S=x.valueSpec,fa=x.styleSpec;return S.expression&&Cb(aa(K))?ec(x):S.expression&&Wc(Y(K))?kc(x):S.type&&We[S.type]?We[S.type](x):yb(Z({},x,{valueSpec:S.type?fa[S.type]:S}))}function $c(x){var K=x.value,S=x.key;x=dc(x);return x.length||(-1===K.indexOf("{fontstack}")&&x.push(new jc(S,K,'"glyphs" url must include a "{fontstack}" token')),-1===K.indexOf("{range}")&&
x.push(new jc(S,K,'"glyphs" url must include a "{range}" token'))),x}function od(x,K){void 0===K&&(K=Nb);var S=[];return S=S.concat(Lc({key:"",value:x,valueSpec:K.$root,styleSpec:K,style:x,objectElementValidators:{glyphs:$c,"*":function(){return[]}}})),x.constants&&(S=S.concat(V({key:"constants",value:x.constants,style:x,styleSpec:K}))),Zc(S)}function Zc(x){return[].concat(x).sort(function(K,S){return K.line-S.line})}function rd(x){return function(){for(var K=[],S=arguments.length;S--;)K[S]=arguments[S];
return Zc(x.apply(this,K))}}function Dd(x,K){var S=!1;if(K&&K.length)for(var fa=0;fa<K.length;fa+=1)x.fire(new rc(Error(K[fa].message))),S=!0;return S}function ed(x,K,S){var fa=this.cells=[];if(x instanceof ArrayBuffer){this.arrayBuffer=x;var sa=new Int32Array(this.arrayBuffer);x=sa[0];this.d=(K=sa[1])+2*(S=sa[2]);for(var za=0;za<this.d*this.d;za++){var Ja=sa[3+za],Ra=sa[3+za+1];fa.push(Ja===Ra?null:sa.subarray(Ja,Ra))}za=sa[3+fa.length+1];this.keys=sa.subarray(sa[3+fa.length],za);this.bboxes=sa.subarray(za);
this.insert=this._insertReadonly}else{this.d=K+2*S;for(sa=0;sa<this.d*this.d;sa++)fa.push([]);this.keys=[];this.bboxes=[]}this.n=K;this.extent=x;this.padding=S;this.scale=K/x;this.uid=0;K=S/K*x;this.min=-K;this.max=x+K}function Mc(x,K,S){void 0===S&&(S={});Object.defineProperty(K,"_classRegistryKey",{value:x,writeable:!1});zi[x]={klass:K,omit:S.omit||[],shallow:S.shallow||[]}}function sd(x){return x&&"undefined"!=typeof ArrayBuffer&&(x instanceof ArrayBuffer||x.constructor&&"ArrayBuffer"===x.constructor.name)}
function yd(x,K){if(null==x||"boolean"==typeof x||"number"==typeof x||"string"==typeof x||x instanceof Boolean||x instanceof Number||x instanceof String||x instanceof Date||x instanceof RegExp)return x;if(sd(x)||aj&&x instanceof aj)return K&&K.push(x),x;if(ArrayBuffer.isView(x))return K&&K.push(x.buffer),x;if(x instanceof ck)return K&&K.push(x.data.buffer),x;if(Array.isArray(x)){for(var S=[],fa=0;fa<x.length;fa+=1)S.push(yd(x[fa],K));return S}if("object"==typeof x){var sa=x.constructor;S=sa._classRegistryKey;
if(!S)throw Error("can't serialize object of unregistered class");fa=sa.serialize?sa.serialize(x,K):{};if(!sa.serialize){for(var za in x)!x.hasOwnProperty(za)||0<=zi[S].omit.indexOf(za)||(sa=x[za],fa[za]=0<=zi[S].shallow.indexOf(za)?sa:yd(sa,K));x instanceof Error&&(fa.message=x.message)}if(fa.$name)throw Error("$name property is reserved for worker serialization logic.");return"Object"!==S&&(fa.$name=S),fa}throw Error("can't serialize object of type "+typeof x);}function Fd(x){if(null==x||"boolean"==
typeof x||"number"==typeof x||"string"==typeof x||x instanceof Boolean||x instanceof Number||x instanceof String||x instanceof Date||x instanceof RegExp||sd(x)||aj&&x instanceof aj||ArrayBuffer.isView(x)||x instanceof ck)return x;if(Array.isArray(x))return x.map(Fd);if("object"==typeof x){var K=x.$name||"Object",S=zi[K].klass;if(!S)throw Error("can't deserialize unregistered class "+K);if(S.deserialize)return S.deserialize(x);S=Object.create(S.prototype);for(var fa=0,sa=Object.keys(x);fa<sa.length;fa+=
1){var za=sa[fa];if("$name"!==za){var Ja=x[za];S[za]=0<=zi[K].shallow.indexOf(za)?Ja:Fd(Ja)}}return S}throw Error("can't deserialize object of type "+typeof x);}function xe(x){for(var K=0;K<x.length;K+=1)if(Kd(x[K].charCodeAt(0)))return!0;return!1}function Kd(x){return!(746!==x&&747!==x&&(4352>x||!(Pd["Bopomofo Extended"](x)||Pd.Bopomofo(x)||Pd["CJK Compatibility Forms"](x)&&!(65097<=x&&65103>=x)||Pd["CJK Compatibility Ideographs"](x)||Pd["CJK Compatibility"](x)||Pd["CJK Radicals Supplement"](x)||
Pd["CJK Strokes"](x)||!(!Pd["CJK Symbols and Punctuation"](x)||12296<=x&&12305>=x||12308<=x&&12319>=x||12336===x)||Pd["CJK Unified Ideographs Extension A"](x)||Pd["CJK Unified Ideographs"](x)||Pd["Enclosed CJK Letters and Months"](x)||Pd["Hangul Compatibility Jamo"](x)||Pd["Hangul Jamo Extended-A"](x)||Pd["Hangul Jamo Extended-B"](x)||Pd["Hangul Jamo"](x)||Pd["Hangul Syllables"](x)||Pd.Hiragana(x)||Pd["Ideographic Description Characters"](x)||Pd.Kanbun(x)||Pd["Kangxi Radicals"](x)||Pd["Katakana Phonetic Extensions"](x)||
Pd.Katakana(x)&&12540!==x||!(!Pd["Halfwidth and Fullwidth Forms"](x)||65288===x||65289===x||65293===x||65306<=x&&65310>=x||65339===x||65341===x||65343===x||65371<=x&&65503>=x||65507===x||65512<=x&&65519>=x)||!(!Pd["Small Form Variants"](x)||65112<=x&&65118>=x||65123<=x&&65126>=x)||Pd["Unified Canadian Aboriginal Syllabics"](x)||Pd["Unified Canadian Aboriginal Syllabics Extended"](x)||Pd["Vertical Forms"](x)||Pd["Yijing Hexagram Symbols"](x)||Pd["Yi Syllables"](x)||Pd["Yi Radicals"](x))))}function Gc(x){var K;
(K=Kd(x))||(K=!!(Pd["Latin-1 Supplement"](x)&&(167===x||169===x||174===x||177===x||188===x||189===x||190===x||215===x||247===x)||Pd["General Punctuation"](x)&&(8214===x||8224===x||8225===x||8240===x||8241===x||8251===x||8252===x||8258===x||8263===x||8264===x||8265===x||8273===x)||Pd["Letterlike Symbols"](x)||Pd["Number Forms"](x)||Pd["Miscellaneous Technical"](x)&&(8960<=x&&8967>=x||8972<=x&&8991>=x||8996<=x&&9E3>=x||9003===x||9085<=x&&9114>=x||9150<=x&&9165>=x||9167===x||9169<=x&&9179>=x||9186<=
x&&9215>=x)||Pd["Control Pictures"](x)&&9251!==x||Pd["Optical Character Recognition"](x)||Pd["Enclosed Alphanumerics"](x)||Pd["Geometric Shapes"](x)||Pd["Miscellaneous Symbols"](x)&&!(9754<=x&&9759>=x)||Pd["Miscellaneous Symbols and Arrows"](x)&&(11026<=x&&11055>=x||11088<=x&&11097>=x||11192<=x&&11243>=x)||Pd["CJK Symbols and Punctuation"](x)||Pd.Katakana(x)||Pd["Private Use Area"](x)||Pd["CJK Compatibility Forms"](x)||Pd["Small Form Variants"](x)||Pd["Halfwidth and Fullwidth Forms"](x)||8734===x||
8756===x||8757===x||9984<=x&&10087>=x||10102<=x&&10131>=x||65532===x||65533===x));return!K}function dd(x){return 1424<=x&&2303>=x||Pd["Arabic Presentation Forms-A"](x)||Pd["Arabic Presentation Forms-B"](x)}function vd(){Mi.fire(new hc("pluginStateChange",{pluginStatus:Hf,pluginURL:Og}))}function Cd(x,K){void 0===K&&(K=1);var S=0,fa=0;return{members:x.map(function(sa){var za=hi[sa.type].BYTES_PER_ELEMENT,Ja=S=ae(S,Math.max(K,za)),Ra=sa.components||1;return fa=Math.max(fa,za),S+=za*Ra,{name:sa.name,
type:sa.type,components:Ra,offset:Ja}}),size:ae(S,Math.max(fa,K)),alignment:K}}function ae(x,K){return Math.ceil(x/K)*K}function me(x,K){return 256*c(Math.floor(x),0,255)+c(Math.floor(K),0,255)}function Nd(x){var K=+x;return!isNaN(K)&&K<=al?K:qi(String(x))}function Id(x,K,S){var fa=x[K];x[K]=x[S];x[S]=fa}function qe(x){return[me(255*x.r,255*x.g),me(255*x.b,255*x.a)]}function re(x,K,S){var fa={color:{source:eg,composite:yj},number:{source:Bi,composite:eg}};return(x={"line-pattern":{source:Vf,composite:Vf},
"fill-pattern":{source:Vf,composite:Vf},"fill-extrusion-pattern":{source:Vf,composite:Vf}}[x])&&x[S]||fa[K][S]}function ve(x){var K=8192/x.extent;x=x.loadGeometry();for(var S=0;S<x.length;S++)for(var fa=x[S],sa=0;sa<fa.length;sa++){var za=fa[sa];za.x=Math.round(za.x*K);za.y=Math.round(za.y*K);(za.x<$h.min||za.x>$h.max||za.y<$h.min||za.y>$h.max)&&(y("Geometry exceeds allowed extent, reduce your vector tile buffer size"),za.x=c(za.x,$h.min,$h.max),za.y=c(za.y,$h.min,$h.max))}return x}function Se(x,
K,S,fa,sa){x.emplaceBack(2*K+(fa+1)/2,2*S+(sa+1)/2)}function gf(x,K){for(var S=0;S<x.length;S++)if(Hb(K,x[S]))return!0;for(S=0;S<K.length;S++)if(Hb(x,K[S]))return!0;return!!Te(x,K)}function $e(x,K,S){return!!Hb(x,K)||!!Ma(K,x,S)}function cf(x,K){if(1===x.length)return rb(K,x[0]);for(var S=0;S<K.length;S++)for(var fa=K[S],sa=0;sa<fa.length;sa++)if(Hb(x,fa[sa]))return!0;for(S=0;S<x.length;S++)if(rb(K,x[S]))return!0;for(S=0;S<K.length;S++)if(Te(x,K[S]))return!0;return!1}function Te(x,K){if(0===x.length||
0===K.length)return!1;for(var S=0;S<x.length-1;S++)for(var fa=x[S],sa=x[S+1],za=0;za<K.length-1;za++){var Ja=fa,Ra=sa,db=K[za],jb=K[za+1];if(B(Ja,db,jb)!==B(Ra,db,jb)&&B(Ja,Ra,db)!==B(Ja,Ra,jb))return!0}return!1}function Ma(x,K,S){S*=S;if(1===K.length)return x.distSqr(K[0])<S;for(var fa=1;fa<K.length;fa++)if(xb(x,K[fa-1],K[fa])<S)return!0;return!1}function xb(x,K,S){var fa=K.distSqr(S);if(0===fa)return x.distSqr(K);fa=((x.x-K.x)*(S.x-K.x)+(x.y-K.y)*(S.y-K.y))/fa;return x.distSqr(0>fa?K:1<fa?S:S.sub(K)._mult(fa)._add(K))}
function rb(x,K){for(var S,fa,sa,za=!1,Ja=0;Ja<x.length;Ja++)for(var Ra=0,db=(S=x[Ja]).length-1;Ra<S.length;db=Ra++)(fa=S[Ra]).y>K.y!=(sa=S[db]).y>K.y&&K.x<(sa.x-fa.x)*(K.y-fa.y)/(sa.y-fa.y)+fa.x&&(za=!za);return za}function Hb(x,K){for(var S=!1,fa=0,sa=x.length-1;fa<x.length;sa=fa++){var za=x[fa];sa=x[sa];za.y>K.y!=sa.y>K.y&&K.x<(sa.x-za.x)*(K.y-za.y)/(sa.y-za.y)+za.x&&(S=!S)}return S}function mc(x,K,S){var fa=K.paint.get(x).value;return"constant"===fa.kind?fa.value:S.programConfigurations.get(K.id).getMaxValue(x)}
function Ic(x){return Math.sqrt(x[0]*x[0]+x[1]*x[1])}function Yb(x,K,S,fa,sa){if(!K[0]&&!K[1])return x;K=Vd.convert(K)._mult(sa);"viewport"===S&&K._rotate(-fa);S=[];for(fa=0;fa<x.length;fa++)S.push(x[fa].sub(K));return S}function Ac(x){return x[0]=1,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=1,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=1,x[11]=0,x[12]=0,x[13]=0,x[14]=0,x[15]=1,x}function Yc(x,K,S){var fa=K[0],sa=K[1],za=K[2],Ja=K[3],Ra=K[4],db=K[5],jb=K[6],Bb=K[7],Jb=K[8],Xb=K[9],Tb=K[10],bc=K[11],ac=K[12],Bc=K[13],
kd=K[14];K=K[15];var pd=S[0],bd=S[1],Ed=S[2],Bd=S[3];return x[0]=pd*fa+bd*Ra+Ed*Jb+Bd*ac,x[1]=pd*sa+bd*db+Ed*Xb+Bd*Bc,x[2]=pd*za+bd*jb+Ed*Tb+Bd*kd,x[3]=pd*Ja+bd*Bb+Ed*bc+Bd*K,x[4]=(pd=S[4])*fa+(bd=S[5])*Ra+(Ed=S[6])*Jb+(Bd=S[7])*ac,x[5]=pd*sa+bd*db+Ed*Xb+Bd*Bc,x[6]=pd*za+bd*jb+Ed*Tb+Bd*kd,x[7]=pd*Ja+bd*Bb+Ed*bc+Bd*K,x[8]=(pd=S[8])*fa+(bd=S[9])*Ra+(Ed=S[10])*Jb+(Bd=S[11])*ac,x[9]=pd*sa+bd*db+Ed*Xb+Bd*Bc,x[10]=pd*za+bd*jb+Ed*Tb+Bd*kd,x[11]=pd*Ja+bd*Bb+Ed*bc+Bd*K,x[12]=(pd=S[12])*fa+(bd=S[13])*Ra+(Ed=
S[14])*Jb+(Bd=S[15])*ac,x[13]=pd*sa+bd*db+Ed*Xb+Bd*Bc,x[14]=pd*za+bd*jb+Ed*Tb+Bd*kd,x[15]=pd*Ja+bd*Bb+Ed*bc+Bd*K,x}function md(x,K,S){var fa=K[0],sa=K[1],za=K[2];K=K[3];return x[0]=S[0]*fa+S[4]*sa+S[8]*za+S[12]*K,x[1]=S[1]*fa+S[5]*sa+S[9]*za+S[13]*K,x[2]=S[2]*fa+S[6]*sa+S[10]*za+S[14]*K,x[3]=S[3]*fa+S[7]*sa+S[11]*za+S[15]*K,x}function Gb(x,K){x=md([],[x.x,x.y,0,1],K);return new Vd(x[0]/x[3],x[1]/x[3])}function Sb(x,K,S,fa){var sa=K.width;K=K.height;if(fa)if(fa instanceof Uint8ClampedArray)fa=new Uint8Array(fa.buffer);
else{if(fa.length!==sa*K*S)throw new RangeError("mismatched image size");}else fa=new Uint8Array(sa*K*S);return x.width=sa,x.height=K,x.data=fa,x}function zc(x,K,S){var fa=K.width;K=K.height;if(fa!==x.width||K!==x.height){var sa=Sb({},{width:fa,height:K},S);Sc(x,sa,{x:0,y:0},{x:0,y:0},{width:Math.min(x.width,fa),height:Math.min(x.height,K)},S);x.width=fa;x.height=K;x.data=sa.data}}function Sc(x,K,S,fa,sa,za){if(0===sa.width||0===sa.height)return K;if(sa.width>x.width||sa.height>x.height||S.x>x.width-
sa.width||S.y>x.height-sa.height)throw new RangeError("out of range source coordinates for image copy");if(sa.width>K.width||sa.height>K.height||fa.x>K.width-sa.width||fa.y>K.height-sa.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ja=x.data,Ra=K.data,db=0;db<sa.height;db++)for(var jb=((S.y+db)*x.width+S.x)*za,Bb=((fa.y+db)*K.width+fa.x)*za,Jb=0;Jb<sa.width*za;Jb++)Ra[Bb+Jb]=Ja[jb+Jb];return K}function Ec(x,K){for(var S=new Uint8Array(1024),fa={},sa=0,za=
0;256>sa;sa++,za+=4){fa[K]=sa/255;var Ja=x.evaluate(fa);S[za+0]=Math.floor(255*Ja.r/Ja.a);S[za+1]=Math.floor(255*Ja.g/Ja.a);S[za+2]=Math.floor(255*Ja.b/Ja.a);S[za+3]=Math.floor(255*Ja.a)}return new Bf({width:256,height:1},S)}function Pc(x,K,S){S=S||2;var fa,sa,za,Ja=K&&K.length,Ra=Ja?K[0]*S:x.length,db=Oc(x,0,Ra,S,!0),jb=[];if(!db||db.next===db.prev)return jb;if(Ja){Ja=S;var Bb,Jb=[];var Xb=0;for(Bb=K.length;Xb<Bb;Xb++){(fa=Oc(x,K[Xb]*Ja,Xb<Bb-1?K[Xb+1]*Ja:x.length,Ja,!1))===fa.next&&(fa.steiner=
!0);var Tb=Jb,bc=Tb.push,ac=fa,Bc=fa;do(ac.x<Bc.x||ac.x===Bc.x&&ac.y<Bc.y)&&(Bc=ac),ac=ac.next;while(ac!==fa);bc.call(Tb,Bc)}Jb.sort(vc);for(Xb=0;Xb<Jb.length;Xb++)tc(Jb[Xb],db),db=Kc(db,db.next)}if(x.length>80*S){var kd=K=x[0];var pd=fa=x[1];for(Ja=S;Ja<Ra;Ja+=S)(sa=x[Ja])<kd&&(kd=sa),(za=x[Ja+1])<pd&&(pd=za),sa>K&&(K=sa),za>fa&&(fa=za);var bd=0!==(bd=Math.max(K-kd,fa-pd))?1/bd:0}return pc(db,jb,S,kd,pd,bd),jb}function Oc(x,K,S,fa,sa){if(sa===0<di(x,K,S,fa))for(sa=K;sa<S;sa+=fa)var za=uf(sa,x[sa],
x[sa+1],za);else for(sa=S-fa;sa>=K;sa-=fa)za=uf(sa,x[sa],x[sa+1],za);return za&&wd(za,za.next)&&(jg(za),za=za.next),za}function Kc(x,K){if(!x)return x;K||(K=x);var S=x;do if(x=!1,S.steiner||!wd(S,S.next)&&0!==Ad(S.prev,S,S.next))S=S.next;else{if(jg(S),(S=K=S.prev)===S.next)break;x=!0}while(x||S!==K);return K}function pc(x,K,S,fa,sa,za,Ja){if(x){if(!Ja&&za){var Ra=x,db=Ra;do null===db.z&&(db.z=gd(db.x,db.y,fa,sa,za)),db.prevZ=db.prev,db=db.nextZ=db.next;while(db!==Ra);db.prevZ.nextZ=null;db.prevZ=
null;Ra=db;var jb,Bb,Jb,Xb,Tb=1;do{db=Ra;var bc=Ra=null;for(Jb=0;db;){Jb++;var ac=db;for(jb=Xb=0;jb<Tb&&(Xb++,ac=ac.nextZ);jb++);for(jb=Tb;0<Xb||0<jb&&ac;)0!==Xb&&(0===jb||!ac||db.z<=ac.z)?(Bb=db,db=db.nextZ,Xb--):(Bb=ac,ac=ac.nextZ,jb--),bc?bc.nextZ=Bb:Ra=Bb,Bb.prevZ=bc,bc=Bb;db=ac}bc.nextZ=null;Tb*=2}while(1<Jb)}for(db=x;x.prev!==x.next;){Bb=x.prev;Ra=x.next;if(za)a:{ac=x;Tb=fa;jb=sa;var Bc=za;bc=ac.prev;Jb=ac.next;if(0<=Ad(bc,ac,Jb))ac=!1;else{var kd=bc.x>ac.x?bc.x>Jb.x?bc.x:Jb.x:ac.x>Jb.x?ac.x:
Jb.x,pd=bc.y>ac.y?bc.y>Jb.y?bc.y:Jb.y:ac.y>Jb.y?ac.y:Jb.y;Xb=gd(bc.x<ac.x?bc.x<Jb.x?bc.x:Jb.x:ac.x<Jb.x?ac.x:Jb.x,bc.y<ac.y?bc.y<Jb.y?bc.y:Jb.y:ac.y<Jb.y?ac.y:Jb.y,Tb,jb,Bc);Tb=gd(kd,pd,Tb,jb,Bc);jb=ac.prevZ;for(Bc=ac.nextZ;jb&&jb.z>=Xb&&Bc&&Bc.z<=Tb;){if(jb!==ac.prev&&jb!==ac.next&&ud(bc.x,bc.y,ac.x,ac.y,Jb.x,Jb.y,jb.x,jb.y)&&0<=Ad(jb.prev,jb,jb.next)||(jb=jb.prevZ,Bc!==ac.prev&&Bc!==ac.next&&ud(bc.x,bc.y,ac.x,ac.y,Jb.x,Jb.y,Bc.x,Bc.y)&&0<=Ad(Bc.prev,Bc,Bc.next))){ac=!1;break a}Bc=Bc.nextZ}for(;jb&&
jb.z>=Xb;){if(jb!==ac.prev&&jb!==ac.next&&ud(bc.x,bc.y,ac.x,ac.y,Jb.x,Jb.y,jb.x,jb.y)&&0<=Ad(jb.prev,jb,jb.next)){ac=!1;break a}jb=jb.prevZ}for(;Bc&&Bc.z<=Tb;){if(Bc!==ac.prev&&Bc!==ac.next&&ud(bc.x,bc.y,ac.x,ac.y,Jb.x,Jb.y,Bc.x,Bc.y)&&0<=Ad(Bc.prev,Bc,Bc.next)){ac=!1;break a}Bc=Bc.nextZ}ac=!0}}else a:if(ac=x,bc=ac.prev,Jb=ac.next,0<=Ad(bc,ac,Jb))ac=!1;else{for(Xb=ac.next.next;Xb!==ac.prev;){if(ud(bc.x,bc.y,ac.x,ac.y,Jb.x,Jb.y,Xb.x,Xb.y)&&0<=Ad(Xb.prev,Xb,Xb.next)){ac=!1;break a}Xb=Xb.next}ac=!0}if(ac)K.push(Bb.i/
S),K.push(x.i/S),K.push(Ra.i/S),jg(x),db=x=Ra.next;else if((x=Ra)===db){if(Ja)if(1===Ja){x=Kc(x);Ja=K;Bb=S;Ra=x;do db=Ra.prev,ac=Ra.next.next,!wd(db,ac)&&se(db,Ra,Ra.next,ac)&&je(db,ac)&&je(ac,db)&&(Ja.push(db.i/Bb),Ja.push(Ra.i/Bb),Ja.push(ac.i/Bb),jg(Ra),jg(Ra.next),Ra=x=ac),Ra=Ra.next;while(Ra!==x);x=Kc(Ra);pc(x,K,S,fa,sa,za,2)}else{if(2===Ja)a:{Ja=x;do{for(Bb=Ja.next.next;Bb!==Ja.prev;){if(Ja.i!==Bb.i&&xd(Ja,Bb)){x=Ge(Ja,Bb);Ja=Kc(Ja,Ja.next);x=Kc(x,x.next);pc(Ja,K,S,fa,sa,za);pc(x,K,S,fa,sa,
za);break a}Bb=Bb.next}Ja=Ja.next}while(Ja!==x)}}else pc(Kc(x),K,S,fa,sa,za,1);break}}}}function vc(x,K){return x.x-K.x}function tc(x,K){if(K=function(S,fa){var sa=fa,za=S.x,Ja=S.y,Ra=-1/0;do{if(Ja<=sa.y&&Ja>=sa.next.y&&sa.next.y!==sa.y){var db=sa.x+(Ja-sa.y)*(sa.next.x-sa.x)/(sa.next.y-sa.y);if(db<=za&&db>Ra){if(Ra=db,db===za){if(Ja===sa.y)return sa;if(Ja===sa.next.y)return sa.next}var jb=sa.x<sa.next.x?sa:sa.next}}sa=sa.next}while(sa!==fa);if(!jb)return null;if(za===Ra)return jb;db=jb;var Bb=jb.x,
Jb=jb.y,Xb=1/0;sa=jb;do{if(za>=sa.x&&sa.x>=Bb&&za!==sa.x&&ud(Ja<Jb?za:Ra,Ja,Bb,Jb,Ja<Jb?Ra:za,Ja,sa.x,sa.y)){fa=Math.abs(Ja-sa.y)/(za-sa.x);var Tb;if((Tb=je(sa,S))&&!(Tb=fa<Xb)&&(Tb=fa===Xb)&&!(Tb=sa.x>jb.x)&&(Tb=sa.x===jb.x)){Tb=jb;var bc=sa;Tb=0>Ad(Tb.prev,Tb,bc.prev)&&0>Ad(bc.next,Tb,Tb.next)}Tb&&(jb=sa,Xb=fa)}sa=sa.next}while(sa!==db);return jb}(x,K))x=Ge(K,x),Kc(K,K.next),Kc(x,x.next)}function gd(x,K,S,fa,sa){return 1431655765&((x=858993459&((x=252645135&((x=16711935&((x=32767*(x-S)*sa)|x<<8))|
x<<4))|x<<2))|x<<1)|(1431655765&((K=858993459&((K=252645135&((K=16711935&((K=32767*(K-fa)*sa)|K<<8))|K<<4))|K<<2))|K<<1))<<1}function ud(x,K,S,fa,sa,za,Ja,Ra){return 0<=(sa-Ja)*(K-Ra)-(x-Ja)*(za-Ra)&&0<=(x-Ja)*(fa-Ra)-(S-Ja)*(K-Ra)&&0<=(S-Ja)*(za-Ra)-(sa-Ja)*(fa-Ra)}function xd(x,K){return x.next.i!==K.i&&x.prev.i!==K.i&&!function(S,fa){var sa=S;do{if(sa.i!==S.i&&sa.next.i!==S.i&&sa.i!==fa.i&&sa.next.i!==fa.i&&se(sa,sa.next,S,fa))return!0;sa=sa.next}while(sa!==S);return!1}(x,K)&&(je(x,K)&&je(K,x)&&
function(S,fa){var sa=S,za=!1,Ja=(S.x+fa.x)/2;fa=(S.y+fa.y)/2;do sa.y>fa!=sa.next.y>fa&&sa.next.y!==sa.y&&Ja<(sa.next.x-sa.x)*(fa-sa.y)/(sa.next.y-sa.y)+sa.x&&(za=!za),sa=sa.next;while(sa!==S);return za}(x,K)&&(Ad(x.prev,x,K.prev)||Ad(x,K.prev,K))||wd(x,K)&&0<Ad(x.prev,x,x.next)&&0<Ad(K.prev,K,K.next))}function Ad(x,K,S){return(K.y-x.y)*(S.x-K.x)-(K.x-x.x)*(S.y-K.y)}function wd(x,K){return x.x===K.x&&x.y===K.y}function se(x,K,S,fa){var sa=Fe(Ad(x,K,S)),za=Fe(Ad(x,K,fa)),Ja=Fe(Ad(S,fa,x)),Ra=Fe(Ad(S,
fa,K));return sa!==za&&Ja!==Ra||!(0!==sa||!te(x,S,K))||!(0!==za||!te(x,fa,K))||!(0!==Ja||!te(S,x,fa))||!(0!==Ra||!te(S,K,fa))}function te(x,K,S){return K.x<=Math.max(x.x,S.x)&&K.x>=Math.min(x.x,S.x)&&K.y<=Math.max(x.y,S.y)&&K.y>=Math.min(x.y,S.y)}function Fe(x){return 0<x?1:0>x?-1:0}function je(x,K){return 0>Ad(x.prev,x,x.next)?0<=Ad(x,K,x.next)&&0<=Ad(x,x.prev,K):0>Ad(x,K,x.prev)||0>Ad(x,x.next,K)}function Ge(x,K){var S=new zh(x.i,x.x,x.y),fa=new zh(K.i,K.x,K.y),sa=x.next,za=K.prev;return x.next=
K,K.prev=x,S.next=sa,sa.prev=S,fa.next=S,S.prev=fa,za.next=fa,fa.prev=za,fa}function uf(x,K,S,fa){x=new zh(x,K,S);return fa?(x.next=fa.next,x.prev=fa,fa.next.prev=x,fa.next=x):(x.prev=x,x.next=x),x}function jg(x){x.next.prev=x.prev;x.prev.next=x.next;x.prevZ&&(x.prevZ.nextZ=x.nextZ);x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function zh(x,K,S){this.i=x;this.x=K;this.y=S;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function di(x,K,S,fa){for(var sa=0,za=S-fa;K<S;K+=fa)sa+=(x[za]-x[K])*
(x[K+1]+x[za+1]),za=K;return sa}function ei(x,K,S,fa,sa){!function Jb(Ja,Ra,db,jb,Bb){for(;jb>db;){if(600<jb-db){var Xb=jb-db+1,Tb=Ra-db+1,bc=Math.log(Xb),ac=.5*Math.exp(2*bc/3);bc=.5*Math.sqrt(bc*ac*(Xb-ac)/Xb)*(0>Tb-Xb/2?-1:1);Jb(Ja,Ra,Math.max(db,Math.floor(Ra-Tb*ac/Xb+bc)),Math.min(jb,Math.floor(Ra+(Xb-Tb)*ac/Xb+bc)),Bb)}Xb=Ja[Ra];Tb=db;ac=jb;kg(Ja,db,Ra);for(0<Bb(Ja[jb],Xb)&&kg(Ja,db,jb);Tb<ac;){kg(Ja,Tb,ac);Tb++;for(ac--;0>Bb(Ja[Tb],Xb);)Tb++;for(;0<Bb(Ja[ac],Xb);)ac--}0===Bb(Ja[db],Xb)?kg(Ja,
db,ac):kg(Ja,++ac,jb);ac<=Ra&&(db=ac+1);Ra<=ac&&(jb=ac-1)}}(x,K,S||0,fa||x.length-1,sa||Pj)}function kg(x,K,S){var fa=x[K];x[K]=x[S];x[S]=fa}function Pj(x,K){return x<K?-1:x>K?1:0}function nj(x,K){var S=x.length;if(1>=S)return[x];for(var fa,sa,za=[],Ja=0;Ja<S;Ja++){var Ra=x[Ja];for(var db=0,jb=0,Bb=Ra.length,Jb=Bb-1,Xb=void 0,Tb=void 0;jb<Bb;Jb=jb++)db+=((Tb=Ra[Jb]).x-(Xb=Ra[jb]).x)*(Xb.y+Tb.y);Ra=db;0!==Ra&&(x[Ja].area=Math.abs(Ra),void 0===sa&&(sa=0>Ra),sa===0>Ra?(fa&&za.push(fa),fa=[x[Ja]]):fa.push(x[Ja]))}if(fa&&
za.push(fa),1<K)for(x=0;x<za.length;x++)za[x].length<=K||(ei(za[x],K,1,za[x].length-1,Qj),za[x]=za[x].slice(0,K));return za}function Qj(x,K){return K.area-x.area}function ji(x,K,S){S=S.patternDependencies;for(var fa=!1,sa=0;sa<K.length;sa+=1){var za=K[sa].paint.get(x+"-pattern");za.isConstant()||(fa=!0);(za=za.constantOr(null))&&(fa=!0,S[za.to]=!0,S[za.from]=!0)}return fa}function Oi(x,K,S,fa,sa){for(var za=sa.patternDependencies,Ja=0;Ja<K.length;Ja+=1){var Ra=K[Ja],db=Ra.paint.get(x+"-pattern").value;
if("constant"!==db.kind){var jb=db.evaluate({zoom:fa-1},S,{},sa.availableImages),Bb=db.evaluate({zoom:fa},S,{},sa.availableImages);db=db.evaluate({zoom:fa+1},S,{},sa.availableImages);Bb=Bb&&Bb.name?Bb.name:Bb;db=db&&db.name?db.name:db;za[jb=jb&&jb.name?jb.name:jb]=!0;za[Bb]=!0;za[db]=!0;S.patterns[Ra.id]={min:jb,mid:Bb,max:db}}}return S}function Ug(x,K,S,fa,sa){this.properties={};this.extent=S;this.type=0;this._pbf=x;this._geometry=-1;this._keys=fa;this._values=sa;x.readFields(Rj,this,K)}function Rj(x,
K,S){if(1==x)K.id=S.readVarint();else if(2==x)for(x=S.readVarint()+S.pos;S.pos<x;){var fa=K._keys[S.readVarint()],sa=K._values[S.readVarint()];K.properties[fa]=sa}else 3==x?K.type=S.readVarint():4==x&&(K._geometry=S.pos)}function Sj(x,K){this.version=1;this.name=null;this.extent=4096;this.length=0;this._pbf=x;this._keys=[];this._values=[];this._features=[];x.readFields(Fh,this,K);this.length=this._features.length}function Fh(x,K,S){if(15===x)K.version=S.readVarint();else if(1===x)K.name=S.readString();
else if(5===x)K.extent=S.readVarint();else if(2===x)K._features.push(S.pos);else if(3===x)K._keys.push(S.readString());else if(4===x){x=K._values;K=x.push;for(var fa=null,sa=S.readVarint()+S.pos;S.pos<sa;)fa=S.readVarint()>>3,fa=1===fa?S.readString():2===fa?S.readFloat():3===fa?S.readDouble():4===fa?S.readVarint64():5===fa?S.readVarint():6===fa?S.readSVarint():7===fa?S.readBoolean():null;K.call(x,fa)}}function Eh(x,K,S){3===x&&(x=new Ok(S,S.readVarint()+S.pos),x.length&&(K[x.name]=x))}function li(x,
K,S,fa,sa,za,Ja,Ra){x.emplaceBack(K,S,2*Math.floor(fa*Qk)+Ja,sa*Qk*2,za*Qk*2,Math.round(Ra))}function Gh(x,K){return x.x*K.x+x.y*K.y}function Hh(x,K){if(1===x.length){for(var S,fa=0,sa=K[fa++];!S||sa.equals(S);)if(!(S=K[fa++]))return 1/0;for(;fa<K.length;fa++){var za=K[fa],Ja=x[0],Ra=S.sub(sa),db=za.sub(sa),jb=Ja.sub(sa);Ja=Gh(Ra,Ra);var Bb=Gh(Ra,db),Jb=Gh(db,db);Ra=Gh(jb,Ra);db=Gh(jb,db);jb=Ja*Jb-Bb*Bb;Jb=(Jb*Ra-Bb*db)/jb;Ja=(Ja*db-Bb*Ra)/jb;za=sa.z*(1-Jb-Ja)+S.z*Jb+za.z*Ja;if(isFinite(za))return za}return 1/
0}x=1/0;for(S=0;S<K.length;S+=1)x=Math.min(x,K[S].z);return x}function ni(x,K){return 0<K?K+2*x:x}function mh(x,K,S){return x.sections.forEach(function(fa){var sa=fa.text;var za=K.layout.get("text-transform").evaluate(S,{});za=("uppercase"===za?sa=sa.toLocaleUpperCase():"lowercase"===za&&(sa=sa.toLocaleLowerCase()),Nf.applyArabicShaping&&(sa=Nf.applyArabicShaping(sa)),sa);fa.text=za}),x}function Ee(x){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(x)?x:new Uint8Array(x||0);this.type=this.pos=0;this.length=
this.buf.length}function Wf(x){return x.type===Ee.Bytes?x.readVarint()+x.pos:x.pos+1}function Jh(x,K,S){K=16383>=K?1:2097151>=K?2:268435455>=K?3:Math.floor(Math.log(K)/(7*Math.LN2));S.realloc(K);for(var fa=S.pos-1;fa>=x;fa--)S.buf[fa+K]=S.buf[fa]}function Kh(x,K){for(var S=0;S<x.length;S++)K.writeVarint(x[S])}function Tj(x,K){for(var S=0;S<x.length;S++)K.writeSVarint(x[S])}function oi(x,K){for(var S=0;S<x.length;S++)K.writeFloat(x[S])}function Qi(x,K){for(var S=0;S<x.length;S++)K.writeDouble(x[S])}
function Uj(x,K){for(var S=0;S<x.length;S++)K.writeBoolean(x[S])}function Vj(x,K){for(var S=0;S<x.length;S++)K.writeFixed32(x[S])}function Wj(x,K){for(var S=0;S<x.length;S++)K.writeSFixed32(x[S])}function pi(x,K){for(var S=0;S<x.length;S++)K.writeFixed64(x[S])}function wk(x,K){for(var S=0;S<x.length;S++)K.writeSFixed64(x[S])}function Lh(x,K){return(x[K]|x[K+1]<<8|x[K+2]<<16)+16777216*x[K+3]}function nh(x,K,S){x[S]=K;x[S+1]=K>>>8;x[S+2]=K>>>16;x[S+3]=K>>>24}function zg(x,K){return(x[K]|x[K+1]<<8|x[K+
2]<<16)+(x[K+3]<<24)}function Xj(x,K,S){1===x&&S.readMessage(Vg,K)}function Vg(x,K,S){if(3===x){x=S.readMessage(ri,{});S=x.width;var fa=x.height,sa=x.left,za=x.top,Ja=x.advance;K.push({id:x.id,bitmap:new ai({width:S+6,height:fa+6},x.bitmap),metrics:{width:S,height:fa,left:sa,top:za,advance:Ja}})}}function ri(x,K,S){1===x?K.id=S.readVarint():2===x?K.bitmap=S.readBytes():3===x?K.width=S.readVarint():4===x?K.height=S.readVarint():5===x?K.left=S.readSVarint():6===x?K.top=S.readSVarint():7===x&&(K.advance=
S.readVarint())}function Ve(x){for(var K=0,S=0,fa=0;fa<x.length;fa+=1){var sa=x[fa];K+=sa.w*sa.h;S=Math.max(S,sa.w)}x.sort(function(jb,Bb){return Bb.h-jb.h});S=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(K/.95)),S),h:1/0}];for(var za=sa=fa=0;za<x.length;za+=1)for(var Ja=x[za],Ra=S.length-1;0<=Ra;Ra--){var db=S[Ra];if(!(Ja.w>db.w||Ja.h>db.h)){(Ja.x=db.x,Ja.y=db.y,sa=Math.max(sa,Ja.y+Ja.h),fa=Math.max(fa,Ja.x+Ja.w),Ja.w===db.w&&Ja.h===db.h)?(Ja=S.pop(),Ra<S.length&&(S[Ra]=Ja)):Ja.h===db.h?(db.x+=Ja.w,
db.w-=Ja.w):Ja.w===db.w?(db.y+=Ja.h,db.h-=Ja.h):(S.push({x:db.x+Ja.w,y:db.y,w:db.w-Ja.w,h:Ja.h}),db.y+=Ja.h,db.h-=Ja.h);break}}return{w:fa,h:sa,fill:K/(fa*sa)||0}}function ph(x,K,S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb,Xb,Tb,bc,ac){sa=gc.fromFeature(x,sa);Jb===Xc.vertical&&sa.verticalizePunctuation();var Bc=Nf.processBidirectionalText,kd=Nf.processStyledBidirectionalText;if(Bc&&1===sa.sections.length){x=[];var pd=0;for(za=Bc(sa.toString(),Lg(sa,jb,za,K,fa,Tb,bc));pd<za.length;pd+=1){Tb=za[pd];bc=new gc;bc.text=
Tb;bc.sections=sa.sections;for(Bc=0;Bc<Tb.length;Bc++)bc.sectionIndex.push(0);x.push(bc)}}else if(kd)for(x=[],pd=0,za=kd(sa.text,sa.sectionIndex,Lg(sa,jb,za,K,fa,Tb,bc));pd<za.length;pd+=1)Tb=za[pd],bc=new gc,bc.text=Tb[0],bc.sectionIndex=Tb[1],bc.sections=sa.sections,x.push(bc);else x=function(bd,Ed){for(var Bd=[],Jd=bd.text,Rd=0,Xd=0;Xd<Ed.length;Xd+=1){var be=Ed[Xd];Bd.push(bd.substring(Rd,be));Rd=be}return Rd<Jd.length&&Bd.push(bd.substring(Rd,Jd.length)),Bd}(sa,Lg(sa,jb,za,K,fa,Tb,bc));za=[];
Bb={positionedLines:za,text:sa.toString(),top:Bb[1],bottom:Bb[1],left:Bb[0],right:Bb[0],writingMode:Jb,iconsInText:!1,verticalizable:!1};return function(bd,Ed,Bd,Jd,Rd,Xd,be,ce,Ud,Zd,pe,Sd){var Od=0,Td=-17,Be=0,Xe=0;ce="right"===ce?1:"left"===ce?0:.5;for(var Lf=0,rf=0;rf<Rd.length;rf+=1){var Ye=Rd[rf];Ye.trim();var ue=Ye.getMaxScale(),ff=24*(ue-1),yf={positionedGlyphs:[],lineOffset:0};bd.positionedLines[Lf]=yf;var If=yf.positionedGlyphs,Bj=0;if(Ye.length()){for(var Qg=0;Qg<Ye.length();Qg++){var bf=
Ye.getSection(Qg),Sf=Ye.getSectionIndex(Qg),Ei=Ye.getCharCode(Qg),ej,Cj=null,Mf=null,Fi=24,jf=!(Ud===Xc.horizontal||!pe&&!Kd(Ei)||pe&&(Jc[Ei]||(Tf=Ei,Pd.Arabic(Tf)||Pd["Arabic Supplement"](Tf)||Pd["Arabic Extended-A"](Tf)||Pd["Arabic Presentation Forms-A"](Tf)||Pd["Arabic Presentation Forms-B"](Tf))));if(bf.imageName){Fi=Jd[bf.imageName];if(!Fi)continue;Mf=bf.imageName;bd.iconsInText=bd.iconsInText||!0;Cj=Fi.paddedRect;var xg=Fi.displaySize;bf.scale=24*bf.scale/Sd;var Qe=ff+(24-xg[1]*bf.scale);Fi=
(ej={width:xg[0],height:xg[1],left:1,top:-3,advance:jf?xg[1]:xg[0]}).advance;xg=jf?xg[0]*bf.scale-24*ue:xg[1]*bf.scale-24*ue;0<xg&&xg>Bj&&(Bj=xg)}else{if((Qe=(Qe=Bd[bf.fontStack])&&Qe[Ei])&&Qe.rect)Cj=Qe.rect,ej=Qe.metrics;else{Qe=(Qe=Ed[bf.fontStack])&&Qe[Ei];if(!Qe)continue;ej=Qe.metrics}Qe=24*(ue-bf.scale)}jf?(bd.verticalizable=!0,If.push({glyph:Ei,imageName:Mf,x:Od,y:Td+Qe,vertical:jf,scale:bf.scale,fontStack:bf.fontStack,sectionIndex:Sf,metrics:ej,rect:Cj}),Od+=Fi*bf.scale+Zd):(If.push({glyph:Ei,
imageName:Mf,x:Od,y:Td+Qe,vertical:jf,scale:bf.scale,fontStack:bf.fontStack,sectionIndex:Sf,metrics:ej,rect:Cj}),Od+=ej.advance*bf.scale+Zd)}if(0!==If.length&&(Be=Math.max(Od-Zd,Be),Od=If,If=If.length-1,Ye=Bj,ce||Ye))for(Qg=Od[If],Qg=(Od[If].x+Qg.metrics.advance*Qg.scale)*ce,bf=0;bf<=If;bf++)Od[bf].x-=Qg,Od[bf].y+=Ye;Od=0;ue=Xd*ue+Bj;yf.lineOffset=Math.max(Bj,ff);Td+=ue;Xe=Math.max(ue,Xe)}else Td+=Xd;++Lf}var Tf;Ed=Td- -17;Bd=Mh(be);be=Bd.horizontalAlign;Bd=Bd.verticalAlign;ce=(ce-be)*Be;Rd=Xe!==
Xd?-Ed*Bd- -17:(-Bd*Rd.length+.5)*Xd;Xd=0;for(Xe=bd.positionedLines;Xd<Xe.length;Xd+=1)for(Jd=0,Ud=Xe[Xd].positionedGlyphs;Jd<Ud.length;Jd+=1)Zd=Ud[Jd],Zd.x+=ce,Zd.y+=Rd;bd.top+=-Bd*Ed;bd.bottom=bd.top+Ed;bd.left+=-be*Be;bd.right=bd.left+Be}(Bb,K,S,fa,x,Ja,Ra,db,Jb,jb,Xb,ac),!function(bd){for(var Ed=0;Ed<bd.length;Ed+=1)if(0!==bd[Ed].positionedGlyphs.length)return!1;return!0}(za)&&Bb}function Wg(x,K,S,fa,sa,za){return K.imageName?(x=fa[K.imageName])?x.displaySize[0]*K.scale*24/za+sa:0:(x=(za=S[K.fontStack])&&
za[x])?x.metrics.advance*K.scale+sa:0}function Xg(x,K,S,fa){var sa=Math.pow(x-K,2);return fa?x<K?sa/2:2*sa:sa+Math.abs(S)*S}function Je(x,K,S){var fa=0;return 10===x&&(fa-=1E4),S&&(fa+=150),40!==x&&65288!==x||(fa+=50),41!==K&&65289!==K||(fa+=50),fa}function Me(x,K,S,fa,sa,za){for(var Ja=null,Ra=Xg(K,S,sa,za),db=0;db<fa.length;db+=1){var jb=fa[db],Bb=Xg(K-jb.x,S,sa,za)+jb.badness;Bb<=Ra&&(Ja=jb,Ra=Bb)}return{index:x,x:K,priorBreak:Ja,badness:Ra}}function Lg(x,K,S,fa,sa,za,Ja){if("point"!==za||!x)return[];
var Ra;za=[];S=function(bc,ac,Bc,kd,pd,bd){for(var Ed=0,Bd=0;Bd<bc.length();Bd++){var Jd=bc.getSection(Bd);Ed+=Wg(bc.getCharCode(Bd),Jd,kd,pd,ac,bd)}return Ed/Math.max(1,Math.ceil(Ed/Bc))}(x,K,S,fa,sa,Ja);for(var db=0<=x.text.indexOf("​"),jb=0,Bb=0;Bb<x.length();Bb++){var Jb=x.getSection(Bb),Xb=x.getCharCode(Bb);if(Jc[Xb]||(jb+=Wg(Xb,Jb,fa,sa,K,Ja)),Bb<x.length()-1){var Tb=!(11904>(Ra=Xb)||!(Pd["Bopomofo Extended"](Ra)||Pd.Bopomofo(Ra)||Pd["CJK Compatibility Forms"](Ra)||Pd["CJK Compatibility Ideographs"](Ra)||
Pd["CJK Compatibility"](Ra)||Pd["CJK Radicals Supplement"](Ra)||Pd["CJK Strokes"](Ra)||Pd["CJK Symbols and Punctuation"](Ra)||Pd["CJK Unified Ideographs Extension A"](Ra)||Pd["CJK Unified Ideographs"](Ra)||Pd["Enclosed CJK Letters and Months"](Ra)||Pd["Halfwidth and Fullwidth Forms"](Ra)||Pd.Hiragana(Ra)||Pd["Ideographic Description Characters"](Ra)||Pd["Kangxi Radicals"](Ra)||Pd["Katakana Phonetic Extensions"](Ra)||Pd.Katakana(Ra)||Pd["Vertical Forms"](Ra)||Pd["Yi Radicals"](Ra)||Pd["Yi Syllables"](Ra)));
(fd[Xb]||Tb||Jb.imageName)&&za.push(Me(Bb+1,jb,S,za,Je(Xb,x.getCharCode(Bb+1),Tb&&db),!1))}}return function Bc(ac){return ac?Bc(ac.priorBreak).concat(ac.index):[]}(Me(x.length(),jb,S,za,0,!0))}function Mh(x){var K=.5,S=.5;switch(x){case "right":case "top-right":case "bottom-right":K=1;break;case "left":case "top-left":case "bottom-left":K=0}switch(x){case "bottom":case "bottom-right":case "bottom-left":S=1;break;case "top":case "top-right":case "top-left":S=0}return{horizontalAlign:K,verticalAlign:S}}
function Yj(x,K,S,fa,sa,za){x=x.image;if(x.content){var Ja=x.content;var Ra=x.pixelRatio||1;Ja=[Ja[0]/Ra,Ja[1]/Ra,x.displaySize[0]-Ja[2]/Ra,x.displaySize[1]-Ja[3]/Ra]}var db,jb,Bb,Jb;Ra=K.left*za;var Xb=K.right*za;"width"===S||"both"===S?(Jb=sa[0]+Ra-fa[3],jb=sa[0]+Xb+fa[1]):jb=(Jb=sa[0]+(Ra+Xb-x.displaySize[0])/2)+x.displaySize[0];Ra=K.top*za;K=K.bottom*za;return"height"===S||"both"===S?(db=sa[1]+Ra-fa[0],Bb=sa[1]+K+fa[2]):Bb=(db=sa[1]+(Ra+K-x.displaySize[1])/2)+x.displaySize[1],{image:x,top:db,
right:jb,bottom:Bb,left:Jb,collisionPadding:Ja}}function oj(x,K){K=K.expression;if("constant"===K.kind)return{kind:"constant",layoutSize:K.evaluate(new Oe(x+1))};if("source"===K.kind)return{kind:"source"};for(var S=K.zoomStops,fa=K.interpolationType,sa=0;sa<S.length&&S[sa]<=x;)sa++;for(var za=sa=Math.max(0,sa-1);za<S.length&&S[za]<x+1;)za++;za=Math.min(S.length-1,za);x=S[sa];S=S[za];return"composite"===K.kind?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:fa}:{kind:"camera",minZoom:x,maxZoom:S,
minSize:K.evaluate(new Oe(x)),maxSize:K.evaluate(new Oe(S)),interpolationType:fa}}function pj(x,K,S){var fa=K.uSize,sa=S.lowerSize;return"source"===x.kind?sa/128:"composite"===x.kind?ya(sa/128,S.upperSize/128,K.uSizeT):fa}function qj(x,K){var S=0,fa=0;if("constant"===x.kind)fa=x.layoutSize;else if("source"!==x.kind){var sa=x.interpolationType;K=sa?c(Gf.interpolationFactor(sa,K,x.minZoom,x.maxZoom),0,1):0;"camera"===x.kind?fa=ya(x.minSize,x.maxSize,K):S=K}return{uSizeT:S,uSize:fa}}function qh(x,K,
S,fa,sa){if(void 0===K.segment)return!0;var za=K;K=K.segment+1;for(var Ja=0;Ja>-S/2;){if(0>--K)return!1;Ja-=x[K].dist(za);za=x[K]}Ja+=x[K].dist(x[K+1]);K++;za=[];for(var Ra=0;Ja<S/2;){var db=x[K],jb=x[K+1];if(!jb)return!1;var Bb=x[K-1].angleTo(db)-db.angleTo(jb);Bb=Math.abs((Bb+3*Math.PI)%(2*Math.PI)-Math.PI);za.push({distance:Ja,angleDelta:Bb});for(Ra+=Bb;Ja-za[0].distance>fa;)Ra-=za.shift().angleDelta;if(Ra>sa)return!1;K++;Ja+=db.dist(jb)}return!0}function vf(x){for(var K=0,S=0;S<x.length-1;S++)K+=
x[S].dist(x[S+1]);return K}function Ri(x,K,S,fa,sa,za){sa=S?.6*sa*za:0;S=Math.max(S?S.right-S.left:0,fa?fa.right-fa.left:0)*za;var Ja=0,Ra=vf(x)/2;for(fa=0;fa<x.length-1;fa++){za=x[fa];var db=x[fa+1],jb=za.dist(db);if(Ja+jb>Ra)return Ra=(Ra-Ja)/jb,Ja=ya(za.x,db.x,Ra),Ra=ya(za.y,db.y,Ra),fa=new hd(Ja,Ra,db.angleTo(za),fa),fa._round(),!sa||qh(x,fa,S,sa,K)?fa:void 0;Ja+=jb}}function xk(x,K,S,fa,sa,za,Ja,Ra,db){sa=Math.max(fa?fa.right-fa.left:0,sa?sa.right-sa.left:0);var jb=sa*Ja,Bb=0===x[0].x||x[0].x===
db||0===x[0].y||x[0].y===db;return K-jb<K/4&&(K=jb+K/4),function Bd(Xb,Tb,bc,ac,Bc,kd,pd,bd,Ed){var Jd=kd/2,Rd=vf(Xb),Xd=0;Tb-=bc;for(var be=[],ce=0;ce<Xb.length-1;ce++){for(var Ud=Xb[ce],Zd=Xb[ce+1],pe=Ud.dist(Zd),Sd=Zd.angleTo(Ud);Tb+bc<Xd+pe;){var Od=((Tb+=bc)-Xd)/pe,Td=ya(Ud.x,Zd.x,Od);Od=ya(Ud.y,Zd.y,Od);0<=Td&&Td<Ed&&0<=Od&&Od<Ed&&0<=Tb-Jd&&Tb+Jd<=Rd&&(Td=new hd(Td,Od,Sd,ce),Td._round(),ac&&!qh(Xb,Td,kd,ac,Bc)||be.push(Td))}Xd+=pe}return bd||be.length||pd||(be=Bd(Xb,Xd/2,bc,ac,Bc,kd,pd,!0,Ed)),
be}(x,Bb?K/2*Ra%K:(sa/2+2*za)*Ja*Ra%K,K,fa?.6*za*Ja:0,S,jb,Bb,!1,db)}function nf(x,K,S,fa,sa){for(var za=[],Ja=0;Ja<x.length;Ja++)for(var Ra=x[Ja],db=void 0,jb=0;jb<Ra.length-1;jb++){var Bb=Ra[jb],Jb=Ra[jb+1];Bb.x<K&&Jb.x<K||(Bb.x<K?Bb=(new Vd(K,Bb.y+(K-Bb.x)/(Jb.x-Bb.x)*(Jb.y-Bb.y)))._round():Jb.x<K&&(Jb=(new Vd(K,Bb.y+(K-Bb.x)/(Jb.x-Bb.x)*(Jb.y-Bb.y)))._round()),Bb.y<S&&Jb.y<S||(Bb.y<S?Bb=(new Vd(Bb.x+(S-Bb.y)/(Jb.y-Bb.y)*(Jb.x-Bb.x),S))._round():Jb.y<S&&(Jb=(new Vd(Bb.x+(S-Bb.y)/(Jb.y-Bb.y)*(Jb.x-
Bb.x),S))._round()),Bb.x>=fa&&Jb.x>=fa||(Bb.x>=fa?Bb=(new Vd(fa,Bb.y+(fa-Bb.x)/(Jb.x-Bb.x)*(Jb.y-Bb.y)))._round():Jb.x>=fa&&(Jb=(new Vd(fa,Bb.y+(fa-Bb.x)/(Jb.x-Bb.x)*(Jb.y-Bb.y)))._round()),Bb.y>=sa&&Jb.y>=sa||(Bb.y>=sa?Bb=(new Vd(Bb.x+(sa-Bb.y)/(Jb.y-Bb.y)*(Jb.x-Bb.x),sa))._round():Jb.y>=sa&&(Jb=(new Vd(Bb.x+(sa-Bb.y)/(Jb.y-Bb.y)*(Jb.x-Bb.x),sa))._round()),db&&Bb.equals(db[db.length-1])||za.push(db=[Bb]),db.push(Jb)))))}return za}function og(x,K,S,fa){var sa=[],za=x.image,Ja=za.pixelRatio,Ra=za.paddedRect.w-
2,db=za.paddedRect.h-2,jb=x.right-x.left,Bb=x.bottom-x.top,Jb=za.stretchX||[[0,Ra]],Xb=za.stretchY||[[0,db]],Tb=function(ce,Ud){return ce+Ud[1]-Ud[0]},bc=Jb.reduce(Tb,0),ac=Xb.reduce(Tb,0),Bc=Ra-bc,kd=db-ac,pd=0,bd=bc,Ed=0,Bd=ac,Jd=0,Rd=Bc,Xd=0,be=kd;za.content&&fa&&(Tb=za.content,pd=Jf(Jb,0,Tb[0]),Ed=Jf(Xb,0,Tb[1]),bd=Jf(Jb,Tb[0],Tb[2]),Bd=Jf(Xb,Tb[1],Tb[3]),Jd=Tb[0]-pd,Xd=Tb[1]-Ed,Rd=Tb[2]-Tb[0]-bd,be=Tb[3]-Tb[1]-Bd);Tb=function(ce,Ud,Zd,pe){var Sd=(ce.stretch-pd)/bd*jb+x.left,Od=ce.fixed-Jd-Rd*
ce.stretch/bc,Td=(Ud.stretch-Ed)/Bd*Bb+x.top,Be=Ud.fixed-Xd-be*Ud.stretch/ac,Xe=(Zd.stretch-pd)/bd*jb+x.left,Lf=Zd.fixed-Jd-Rd*Zd.stretch/bc,rf=(pe.stretch-Ed)/Bd*Bb+x.top,Ye=pe.fixed-Xd-be*pe.stretch/ac,ue=new Vd(Sd,Td);Td=new Vd(Xe,Td);Xe=new Vd(Xe,rf);Sd=new Vd(Sd,rf);Od=new Vd(Od/Ja,Be/Ja);Lf=new Vd(Lf/Ja,Ye/Ja);if(Be=K*Math.PI/180)Ye=Math.sin(Be),Be=Math.cos(Be),Ye=[Be,-Ye,Ye,Be],ue._matMult(Ye),Td._matMult(Ye),Sd._matMult(Ye),Xe._matMult(Ye);ce=ce.stretch+ce.fixed;Ud=Ud.stretch+Ud.fixed;return{tl:ue,
tr:Td,bl:Sd,br:Xe,tex:{x:za.paddedRect.x+1+ce,y:za.paddedRect.y+1+Ud,w:Zd.stretch+Zd.fixed-ce,h:pe.stretch+pe.fixed-Ud},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Od,pixelOffsetBR:Lf,minFontScaleX:Rd/Ja/jb,minFontScaleY:be/Ja/Bb,isSDF:S}};if(fa&&(za.stretchX||za.stretchY))for(fa=Nh(Jb,Bc,bc),Xb=Nh(Xb,kd,ac),Ra=0;Ra<fa.length-1;Ra++)for(db=fa[Ra],Jb=fa[Ra+1],kd=0;kd<Xb.length-1;kd++)sa.push(Tb(db,Xb[kd],Jb,Xb[kd+1]));else sa.push(Tb({fixed:0,stretch:-1},{fixed:0,stretch:-1},
{fixed:0,stretch:Ra+1},{fixed:0,stretch:db+1}));return sa}function Jf(x,K,S){for(var fa=0,sa=0;sa<x.length;sa+=1){var za=x[sa];fa+=Math.max(K,Math.min(S,za[1]))-Math.max(K,Math.min(S,za[0]))}return fa}function Nh(x,K,S){for(var fa=[{fixed:-1,stretch:0}],sa=0;sa<x.length;sa+=1){var za=x[sa],Ja=za[0];za=za[1];var Ra=fa[fa.length-1];fa.push({fixed:Ja-Ra.stretch,stretch:Ra.stretch});fa.push({fixed:Ja-Ra.stretch,stretch:Ra.stretch+(za-Ja)})}return fa.push({fixed:K+1,stretch:S}),fa}function rh(x,K){return x<
K?-1:x>K?1:0}function pg(x,K,S){void 0===K&&(K=1);void 0===S&&(S=!1);for(var fa=1/0,sa=1/0,za=-1/0,Ja=-1/0,Ra=x[0],db=0;db<Ra.length;db++){var jb=Ra[db];(!db||jb.x<fa)&&(fa=jb.x);(!db||jb.y<sa)&&(sa=jb.y);(!db||jb.x>za)&&(za=jb.x);(!db||jb.y>Ja)&&(Ja=jb.y)}jb=Math.min(za-fa,Ja-sa);Ra=jb/2;db=new Md([],Xf);if(0===jb)return new Vd(fa,sa);for(;fa<za;fa+=jb)for(var Bb=sa;Bb<Ja;Bb+=jb)db.push(new Oh(fa+Ra,Bb+Ra,Ra,x));Ja=za=sa=0;fa=x[0];jb=0;Bb=fa.length;for(var Jb=Bb-1;jb<Bb;Jb=jb++){var Xb=fa[jb];Jb=
fa[Jb];var Tb=Xb.x*Jb.y-Jb.x*Xb.y;za+=(Xb.x+Jb.x)*Tb;Ja+=(Xb.y+Jb.y)*Tb;sa+=3*Tb}sa=new Oh(za/sa,Ja/sa,0,x);for(za=db.length;db.length;)Ja=db.pop(),(Ja.d>sa.d||!sa.d)&&(sa=Ja,S&&console.log("found best %d after %d probes",Math.round(1E4*Ja.d)/1E4,za)),Ja.max-sa.d<=K||(db.push(new Oh(Ja.p.x-(Ra=Ja.h/2),Ja.p.y-Ra,Ra,x)),db.push(new Oh(Ja.p.x+Ra,Ja.p.y-Ra,Ra,x)),db.push(new Oh(Ja.p.x-Ra,Ja.p.y+Ra,Ra,x)),db.push(new Oh(Ja.p.x+Ra,Ja.p.y+Ra,Ra,x)),za+=4);return S&&(console.log("num probes: "+za),console.log("best distance: "+
sa.d)),sa.p}function Xf(x,K){return K.max-x.max}function Oh(x,K,S,fa){this.p=new Vd(x,K);this.h=S;x=this.p;K=!1;S=1/0;for(var sa=0;sa<fa.length;sa++)for(var za=fa[sa],Ja=0,Ra=za.length,db=Ra-1;Ja<Ra;db=Ja++){var jb=za[Ja];db=za[db];jb.y>x.y!=db.y>x.y&&x.x<(db.x-jb.x)*(x.y-jb.y)/(db.y-jb.y)+jb.x&&(K=!K);S=Math.min(S,xb(x,jb,db))}this.d=(K?1:-1)*Math.sqrt(S);this.max=this.d+this.h*Math.SQRT2}function rj(x,K){return K[1]!==$d?function(S,fa,sa){var za=0,Ja=0;switch(fa=Math.abs(fa),sa=Math.abs(sa),S){case "top-right":case "top-left":case "top":Ja=
sa-7;break;case "bottom-right":case "bottom-left":case "bottom":Ja=7-sa}switch(S){case "top-right":case "bottom-right":case "right":za=-fa;break;case "top-left":case "bottom-left":case "left":za=fa}return[za,Ja]}(x,K[0],K[1]):function(S,fa){var sa=0,za=0;0>fa&&(fa=0);var Ja=fa/Math.sqrt(2);switch(S){case "top-right":case "top-left":za=Ja-7;break;case "bottom-right":case "bottom-left":za=7-Ja;break;case "bottom":za=7-fa;break;case "top":za=fa-7}switch(S){case "top-right":case "bottom-right":sa=-Ja;
break;case "top-left":case "bottom-left":sa=Ja;break;case "left":sa=fa;break;case "right":sa=-fa}return[sa,za]}(x,K[0])}function Si(x){switch(x){case "right":case "top-right":case "bottom-right":return"right";case "left":case "top-left":case "bottom-left":return"left"}return"center"}function Yf(x,K,S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb,Xb,Tb,bc){for(var ac=x.allowVerticalPlacement,Bc=sa.layout.get("text-rotate").evaluate(Ja,{})*Math.PI/180,kd=[],pd=0,bd=S.positionedLines;pd<bd.length;pd+=1)for(var Ed=bd[pd],
Bd=0,Jd=Ed.positionedGlyphs;Bd<Jd.length;Bd+=1){var Rd=Jd[Bd];if(Rd.rect){var Xd=Rd.rect||{},be=4,ce=!0,Ud=1,Zd=0,pe=(za||ac)&&Rd.vertical,Sd=Rd.metrics.advance*Rd.scale/2;if(ac&&S.verticalizable&&(Zd=Ed.lineOffset/2-(Rd.imageName?-(24-Rd.metrics.width*Rd.scale)/2:24*(Rd.scale-1))),Rd.imageName){var Od=fa[Rd.imageName];ce=Od.sdf;be=1/(Ud=Od.pixelRatio)}Od=za?[Rd.x+Sd,Rd.y]:[0,0];var Td=za?[0,0]:[Rd.x+Sd+Ra[0],Rd.y+Ra[1]-Zd],Be=[0,0];pe&&(Be=Td,Td=[0,0]);Zd=(Rd.metrics.left-be)*Rd.scale-Sd+Td[0];be=
(-Rd.metrics.top-be)*Rd.scale+Td[1];Td=Zd+Xd.w*Rd.scale/Ud;var Xe=be+Xd.h*Rd.scale/Ud;Ud=new Vd(Zd,be);be=new Vd(Td,be);Zd=new Vd(Zd,Xe);Td=new Vd(Td,Xe);pe&&(pe=new Vd(-Sd,Sd- -17),Xe=-Math.PI/2,Sd=12-Sd,Sd=new Vd(22-Sd,-(Rd.imageName?Sd:0)),Be=new (Function.prototype.bind.apply(Vd,[null].concat(Be))),Ud._rotateAround(Xe,pe)._add(Sd)._add(Be),be._rotateAround(Xe,pe)._add(Sd)._add(Be),Zd._rotateAround(Xe,pe)._add(Sd)._add(Be),Td._rotateAround(Xe,pe)._add(Sd)._add(Be));Bc&&(Sd=Math.sin(Bc),Be=Math.cos(Bc),
Sd=[Be,-Sd,Sd,Be],Ud._matMult(Sd),be._matMult(Sd),Zd._matMult(Sd),Td._matMult(Sd));Sd=new Vd(0,0);Be=new Vd(0,0);kd.push({tl:Ud,tr:be,bl:Zd,br:Td,tex:Xd,writingMode:S.writingMode,glyphOffset:Od,sectionIndex:Rd.sectionIndex,isSDF:ce,pixelOffsetTL:Sd,pixelOffsetBR:Be,minFontScaleX:0,minFontScaleY:0})}}S=x.textSizeData;fa=null;"source"===S.kind?32640<(fa=[128*sa.layout.get("text-size").evaluate(Ja,{})])[0]&&y(x.layerIds[0]+': Value for "text-size" is \x3e\x3d 255. Reduce your "text-size".'):"composite"===
S.kind&&(32640<(fa=[128*Tb.compositeTextSizes[0].evaluate(Ja,{},bc),128*Tb.compositeTextSizes[1].evaluate(Ja,{},bc)])[0]||32640<fa[1])&&y(x.layerIds[0]+': Value for "text-size" is \x3e\x3d 255. Reduce your "text-size".');x.addSymbols(x.text,kd,fa,Ra,za,Ja,jb,K,db.lineStartIndex,db.lineLength,Xb,bc);for(K=0;K<Bb.length;K+=1)Jb[Bb[K]]=x.text.placedSymbolArray.length-1;return 4*kd.length}function of(x){for(var K in x)return x[K];return null}function si(x,K,S,fa){x=x.compareText;if(K in x)for(var sa=
x[K],za=sa.length-1;0<=za;za--){if(fa.dist(sa[za])<S)return!0}else x[K]=[];return x[K].push(fa),!1}function Zf(x,K,S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb,Xb){x.emplaceBack(K,S,Math.round(32*fa),Math.round(32*sa),za,Ja,((Ra?Math.min(32640,Math.round(Ra[0])):0)<<1)+(db?1:0),Ra?Math.min(32640,Math.round(Ra[1])):0,16*jb,16*Bb,256*Jb,256*Xb)}function sj(x,K,S){x.emplaceBack(K.x,K.y,S);x.emplaceBack(K.x,K.y,S);x.emplaceBack(K.x,K.y,S);x.emplaceBack(K.x,K.y,S)}function sh(x){var K=0;for(x=x.sections;K<x.length;K+=
1){a:{var S=0;for(var fa=x[K].text;S<fa.length;S+=1)if(dd(fa[S].charCodeAt(0))){S=!0;break a}S=!1}if(S)return!0}return!1}function Ff(x,K,S){S=12756274*Math.PI/256/Math.pow(2,S);return[x*S-12756274*Math.PI/2,K*S-12756274*Math.PI/2]}function Ph(x){return(180+x)/360}function Yg(x){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+x*Math.PI/360)))/360}function fg(x){return 360/Math.PI*Math.atan(Math.exp((180-360*x)*Math.PI/180))-90}function Mg(x,K,S,fa,sa){0>(x*=2)&&(x=-1*x-1);var za=1<<S;return(za*
za*x+za*sa+fa).toString(36)+S.toString(36)+K.toString(36)}function Zg(x,K,S,fa,sa){return w(x,function(za,Ja){return(za=K instanceof Ni?K.get(Ja):null)&&za.evaluate?za.evaluate(S,fa,sa):za})}function Ag(x){for(var K=1/0,S=1/0,fa=-1/0,sa=-1/0,za=0;za<x.length;za+=1){var Ja=x[za];K=Math.min(K,Ja.x);S=Math.min(S,Ja.y);fa=Math.max(fa,Ja.x);sa=Math.max(sa,Ja.y)}return{minX:K,minY:S,maxX:fa,maxY:sa}}function Ti(x,K){return K-x}var Zj=f;f.prototype.sampleCurveX=function(x){return((this.ax*x+this.bx)*x+this.cx)*
x};f.prototype.sampleCurveY=function(x){return((this.ay*x+this.by)*x+this.cy)*x};f.prototype.sampleCurveDerivativeX=function(x){return(3*this.ax*x+2*this.bx)*x+this.cx};f.prototype.solveCurveX=function(x,K){var S,fa;void 0===K&&(K=1E-6);var sa=x;for(S=0;8>S;S++){if(fa=this.sampleCurveX(sa)-x,Math.abs(fa)<K)return sa;var za=this.sampleCurveDerivativeX(sa);if(1E-6>Math.abs(za))break;sa-=fa/za}if((sa=x)<(S=0))return S;if(sa>(za=1))return za;for(;S<za&&!(fa=this.sampleCurveX(sa),Math.abs(fa-x)<K);)x>
fa?S=sa:za=sa,sa=.5*(za-S)+S;return sa};f.prototype.solve=function(x,K){return this.sampleCurveY(this.solveCurveX(x,K))};var Vd=l;l.prototype={clone:function(){return new l(this.x,this.y)},add:function(x){return this.clone()._add(x)},sub:function(x){return this.clone()._sub(x)},multByPoint:function(x){return this.clone()._multByPoint(x)},divByPoint:function(x){return this.clone()._divByPoint(x)},mult:function(x){return this.clone()._mult(x)},div:function(x){return this.clone()._div(x)},rotate:function(x){return this.clone()._rotate(x)},
rotateAround:function(x,K){return this.clone()._rotateAround(x,K)},matMult:function(x){return this.clone()._matMult(x)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(x){return this.x===x.x&&this.y===x.y},dist:function(x){return Math.sqrt(this.distSqr(x))},distSqr:function(x){var K=x.x-this.x;x=x.y-this.y;return K*K+x*x},angle:function(){return Math.atan2(this.y,
this.x)},angleTo:function(x){return Math.atan2(this.y-x.y,this.x-x.x)},angleWith:function(x){return this.angleWithSep(x.x,x.y)},angleWithSep:function(x,K){return Math.atan2(this.x*K-this.y*x,this.x*x+this.y*K)},_matMult:function(x){var K=x[2]*this.x+x[3]*this.y;return this.x=x[0]*this.x+x[1]*this.y,this.y=K,this},_add:function(x){return this.x+=x.x,this.y+=x.y,this},_sub:function(x){return this.x-=x.x,this.y-=x.y,this},_mult:function(x){return this.x*=x,this.y*=x,this},_div:function(x){return this.x/=
x,this.y/=x,this},_multByPoint:function(x){return this.x*=x.x,this.y*=x.y,this},_divByPoint:function(x){return this.x/=x.x,this.y/=x.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var x=this.y;return this.y=this.x,this.x=-x,this},_rotate:function(x){var K=Math.cos(x);x=Math.sin(x);var S=x*this.x+K*this.y;return this.x=K*this.x-x*this.y,this.y=S,this},_rotateAround:function(x,K){var S=Math.cos(x);x=Math.sin(x);var fa=K.y+x*(this.x-K.x)+S*(this.y-K.y);return this.x=K.x+
S*(this.x-K.x)-x*(this.y-K.y),this.y=fa,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};l.convert=function(x){return x instanceof l?x:Array.isArray(x)?new l(x[0],x[1]):x};var yk=m(.25,.1,.25,1),qg=1,$g={},th=null,Qh,Rh,Sh,rg,zk=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Ak=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,ak=
self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,$f={now:zk,frame:function(x){var K=Ak(x);return{cancel:function(){return ak(K)}}},getImageData:function(x,K){void 0===K&&(K=0);var S=self.document.createElement("canvas"),fa=S.getContext("2d");if(!fa)throw Error("failed to create canvas 2d context");return S.width=x.width,S.height=x.height,fa.drawImage(x,0,0,x.width,x.height),fa.getImageData(-K,-K,x.width+2*K,x.height+2*K)},resolveURL:function(x){return Qh||
(Qh=self.document.createElement("a")),Qh.href=x,Qh.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==Rh&&(Rh=self.matchMedia("(prefers-reduced-motion: reduce)")),Rh.matches)}},Ke={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?
"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ah={supported:!1,testSupport:function(x){!bh&&rg&&(Ui?J(x):Sh=x)}},bh=!1,Ui=!1;self.document&&((rg=self.document.createElement("img")).onload=function(){Sh&&J(Sh);Sh=null;Ui=!0},rg.onerror=function(){bh=!0;Sh=null},rg.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA\x3d");var gg=function(x,K){this._transformRequestFn=
x;this._customAccessToken=K;this._createSkuToken()};gg.prototype._createSkuToken=function(){var x;var K="";for(x=0;10>x;x++)K+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];K=["101",K].join("");x=Date.now()+432E5;this._skuToken=K;this._skuTokenExpiresAt=x};gg.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt};gg.prototype.transformRequest=function(x,K){return this._transformRequestFn&&this._transformRequestFn(x,K)||{url:x}};
gg.prototype.normalizeStyleURL=function(x,K){if(!I(x))return x;x=M(x);return x.path="/styles/v1"+x.path,this._makeAPIURL(x,this._customAccessToken||K)};gg.prototype.normalizeGlyphsURL=function(x,K){if(!I(x))return x;x=M(x);return x.path="/fonts/v1"+x.path,this._makeAPIURL(x,this._customAccessToken||K)};gg.prototype.normalizeSourceURL=function(x,K){if(!I(x))return x;x=M(x);return x.path="/v4/"+x.authority+".json",x.params.push("secure"),this._makeAPIURL(x,this._customAccessToken||K)};gg.prototype.normalizeSpriteURL=
function(x,K,S,fa){var sa=M(x);return I(x)?(sa.path="/styles/v1"+sa.path+"/sprite"+K+S,this._makeAPIURL(sa,this._customAccessToken||fa)):(sa.path+=""+K+S,E(sa))};gg.prototype.normalizeTileURL=function(x,K){if(this._isSkuTokenExpired()&&this._createSkuToken(),x&&!I(x))return x;x=M(x);x.path=x.path.replace(/(\.(png|jpg)\d*)(?=$)/,(2<=$f.devicePixelRatio||512===K?"@2x":"")+(ah.supported?".webp":"$1"));x.path=x.path.replace(/^.+\/v4\//,"/");x.path="/v4"+x.path;if(!(K=this._customAccessToken))a:{K=0;for(var S=
x.params;K<S.length;K+=1){var fa=S[K].match(/^access_token=(.*)$/);if(fa){K=fa[1];break a}}K=null}K=K||Ke.ACCESS_TOKEN;return Ke.REQUIRE_ACCESS_TOKEN&&K&&this._skuToken&&x.params.push("sku\x3d"+this._skuToken),this._makeAPIURL(x,K)};gg.prototype.canonicalizeTileURL=function(x,K){var S=M(x);if(!S.path.match(/(^\/v4\/)/)||!S.path.match(/\.[\w]+$/))return x;x="mapbox://tiles/"+S.path.replace("/v4/","");S=S.params;return K&&(S=S.filter(function(fa){return!fa.match(/^access_token=/)})),S.length&&(x+="?"+
S.join("\x26")),x};gg.prototype.canonicalizeTileset=function(x,K){K=!!K&&I(K);var S=[],fa=0;for(x=x.tiles||[];fa<x.length;fa+=1){var sa=x[fa];ch.test(sa)?S.push(this.canonicalizeTileURL(sa,K)):S.push(sa)}return S};gg.prototype._makeAPIURL=function(x,K){var S=M(Ke.API_URL);if(x.protocol=S.protocol,x.authority=S.authority,"/"!==S.path&&(x.path=""+S.path+x.path),!Ke.REQUIRE_ACCESS_TOKEN)return E(x);if(!(K=K||Ke.ACCESS_TOKEN))throw Error("An API access token is required to use Mapbox GL. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");
if("s"===K[0])throw Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");return x.params=x.params.filter(function(fa){return-1===fa.indexOf("access_token")}),x.params.push("access_token\x3d"+K),E(x)};var ch=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,Th=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/,Bg=function(x){this.type=x;this.anonId=null;this.eventData={};this.queue=[];this.pendingRequest=
null};Bg.prototype.getStorageKey=function(x){var K,S=L(Ke.ACCESS_TOKEN);return K=S&&S.u?self.btoa(encodeURIComponent(S.u).replace(/%([0-9A-F]{2})/g,function(fa,sa){return String.fromCharCode(Number("0x"+sa))})):Ke.ACCESS_TOKEN||"",x?"mapbox.eventData."+x+":"+K:"mapbox.eventData:"+K};Bg.prototype.fetchEventData=function(){var x=H("localStorage"),K=this.getStorageKey(),S=this.getStorageKey("uuid");if(x)try{var fa=self.localStorage.getItem(K);fa&&(this.eventData=JSON.parse(fa));var sa=self.localStorage.getItem(S);
sa&&(this.anonId=sa)}catch(za){y("Unable to read from LocalStorage")}};Bg.prototype.saveEventData=function(){var x=H("localStorage"),K=this.getStorageKey(),S=this.getStorageKey("uuid");if(x)try{self.localStorage.setItem(S,this.anonId),1<=Object.keys(this.eventData).length&&self.localStorage.setItem(K,JSON.stringify(this.eventData))}catch(fa){y("Unable to write to LocalStorage")}};Bg.prototype.processRequests=function(x){};Bg.prototype.postEvent=function(x,K,S,fa){var sa=this;if(Ke.EVENTS_URL){var za=
M(Ke.EVENTS_URL);za.params.push("access_token\x3d"+(fa||Ke.ACCESS_TOKEN||""));x={event:this.type,created:(new Date(x)).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:"01",userId:this.anonId};K=K?g(x,K):x;za={url:E(za),headers:{"Content-Type":"text/plain"},body:JSON.stringify([K])};this.pendingRequest=Ob(za,function(Ja){sa.pendingRequest=null;S(Ja);sa.saveEventData();sa.processRequests(fa)})}};Bg.prototype.queueRequest=function(x,K){this.queue.push(x);this.processRequests(K)};
var Cg,Pf,ag=function(x){function K(){x.call(this,"map.load");this.success={};this.skuToken=""}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.postMapLoadEvent=function(S,fa,sa,za){this.skuToken=sa;(Ke.EVENTS_URL&&za||Ke.ACCESS_TOKEN&&Array.isArray(S)&&S.some(function(Ja){return I(Ja)||ch.test(Ja)}))&&this.queueRequest({id:fa,timestamp:Date.now()},za)},K.prototype.processRequests=function(S){var fa=this;if(!this.pendingRequest&&0!==this.queue.length){var sa=
this.queue.shift(),za=sa.id;sa=sa.timestamp;za&&this.success[za]||(this.anonId||this.fetchEventData(),q(this.anonId)||(this.anonId=h()),this.postEvent(sa,{skuToken:this.skuToken},function(Ja){Ja||za&&(fa.success[za]=!0)},S))}},K}(Bg),bk=new (function(x){function K(S){x.call(this,"appUserTurnstile");this._customAccessToken=S}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.postTurnstileEvent=function(S,fa){Ke.EVENTS_URL&&Ke.ACCESS_TOKEN&&Array.isArray(S)&&
S.some(function(sa){return I(sa)||ch.test(sa)})&&this.queueRequest(Date.now(),fa)},K.prototype.processRequests=function(S){var fa=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var sa=L(Ke.ACCESS_TOKEN),za=sa?sa.u:Ke.ACCESS_TOKEN;sa=za!==this.eventData.tokenU;q(this.anonId)||(this.anonId=h(),sa=!0);var Ja=this.queue.shift();if(this.eventData.lastSuccess){var Ra=new Date(this.eventData.lastSuccess),db=new Date(Ja),
jb=(Ja-this.eventData.lastSuccess)/864E5;sa=sa||1<=jb||-1>jb||Ra.getDate()!==db.getDate()}else sa=!0;if(!sa)return this.processRequests();this.postEvent(Ja,{"enabled.telemetry":!1},function(Bb){Bb||(fa.eventData.lastSuccess=Ja,fa.eventData.tokenU=za)},S)}},K}(Bg)),Vi=bk.postTurnstileEvent.bind(bk),Wi=new ag,ub=Wi.postMapLoadEvent.bind(Wi),U=500,X=50,W,da=1/0,xa={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};
"function"==typeof Object.freeze&&Object.freeze(xa);var Ka=function(x){function K(S,fa,sa){401===fa&&ch.test(sa)&&(S+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes");x.call(this,S);this.status=fa;this.url=sa;this.name=this.constructor.name;this.message=S}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+
"): "+this.url},K}(Error),Wa=C()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},fb=function(x,K){if(!(/^file:/.test(S=x.url)||/^file:/.test(Wa())&&!/^\w+:/.test(S))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(fa,sa){var za,Ja=new self.AbortController,Ra=new self.Request(fa.url,{method:fa.method||"GET",body:fa.body,credentials:fa.credentials,
headers:fa.headers,referrer:Wa(),signal:Ja.signal}),db=!1,jb=!1,Bb=0<(za=Ra.url).indexOf("sku\x3d")&&ch.test(za);"json"===fa.type&&Ra.headers.set("Accept","application/json");za=function(Xb,Tb,bc){if(!jb){if(Xb&&"SecurityError"!==Xb.message&&y(Xb),Tb&&bc)return Jb(Tb);var ac=Date.now();self.fetch(Ra).then(function(Bc){if(Bc.ok){var kd=Bb?Bc.clone():null;return Jb(Bc,kd,ac)}return sa(new Ka(Bc.statusText,Bc.status,fa.url))}).catch(function(Bc){20!==Bc.code&&sa(Error(Bc.message))})}};var Jb=function(Xb,
Tb,bc){("arrayBuffer"===fa.type?Xb.arrayBuffer():"json"===fa.type?Xb.json():Xb.text()).then(function(ac){jb||(Tb&&bc&&function(Bc,kd,pd){if(P(),Cg){var bd={status:kd.status,statusText:kd.statusText,headers:new self.Headers};kd.headers.forEach(function(Bd,Jd){return bd.headers.set(Jd,Bd)});var Ed=u(kd.headers.get("Cache-Control")||"");Ed["no-store"]||(Ed["max-age"]&&bd.headers.set("Expires",(new Date(pd+1E3*Ed["max-age"])).toUTCString()),42E4>(new Date(bd.headers.get("Expires"))).getTime()-pd||function(Bd,
Jd){if(void 0===Pf)try{new Response(new ReadableStream),Pf=!0}catch(Rd){Pf=!1}Pf?Jd(Bd.body):Bd.blob().then(Jd)}(kd,function(Bd){var Jd=new self.Response(Bd,bd);P();Cg&&Cg.then(function(Rd){return Rd.put(N(Bc.url),Jd)}).catch(function(Rd){return y(Rd.message)})}))}}(Ra,Tb,bc),db=!0,sa(null,ac,Xb.headers.get("Cache-Control"),Xb.headers.get("Expires")))}).catch(function(ac){jb||sa(Error(ac.message))})};return Bb?function(Xb,Tb){if(P(),!Cg)return Tb(null);var bc=N(Xb.url);Cg.then(function(ac){ac.match(bc).then(function(Bc){if(Bc){var kd=
new Date(Bc.headers.get("Expires")||0);var pd=u(Bc.headers.get("Cache-Control")||"");kd=kd>Date.now()&&!pd["no-cache"]}else kd=!1;ac.delete(bc);kd&&ac.put(bc,Bc.clone());Tb(null,Bc,kd)}).catch(Tb)}).catch(Tb)}(Ra,za):za(null,null),{cancel:function(){jb=!0;db||Ja.abort()}}}(x,K);if(C()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",x,K,void 0,!0)}var S;return function(fa,sa){var za=new self.XMLHttpRequest,Ja;for(Ja in za.open(fa.method||"GET",fa.url,!0),"arrayBuffer"===
fa.type&&(za.responseType="arraybuffer"),fa.headers)za.setRequestHeader(Ja,fa.headers[Ja]);return"json"===fa.type&&(za.responseType="text",za.setRequestHeader("Accept","application/json")),za.withCredentials="include"===fa.credentials,za.onerror=function(){sa(Error(za.statusText))},za.onload=function(){if((200<=za.status&&300>za.status||0===za.status)&&null!==za.response){var Ra=za.response;if("json"===fa.type)try{Ra=JSON.parse(za.response)}catch(db){return sa(db)}sa(null,Ra,za.getResponseHeader("Cache-Control"),
za.getResponseHeader("Expires"))}else sa(new Ka(za.statusText,za.status,fa.url))},za.send(fa.body),{cancel:function(){return za.abort()}}}(x,K)},Fb=function(x,K){return fb(g(x,{type:"arrayBuffer"}),K)},Ob=function(x,K){return fb(g(x,{method:"POST"}),K)};var Pb=[];var uc=0;var sc=function(x,K){if(ah.supported&&(x.headers||(x.headers={}),x.headers.accept="image/webp,*/*"),uc>=Ke.MAX_PARALLEL_IMAGE_REQUESTS)return x={requestParameters:x,callback:K,cancelled:!1,cancel:function(){this.cancelled=!0}},Pb.push(x),
x;uc++;var S=!1,fa=function(){if(!S)for(S=!0,uc--;Pb.length&&uc<Ke.MAX_PARALLEL_IMAGE_REQUESTS;){var za=Pb.shift();za.cancelled||(za.cancel=sc(za.requestParameters,za.callback).cancel)}},sa=Fb(x,function(za,Ja,Ra,db){fa();za?K(za):Ja&&(Q()?function(jb,Bb){jb=new self.Blob([new Uint8Array(jb)],{type:"image/png"});self.createImageBitmap(jb).then(function(Jb){Bb(null,Jb)}).catch(function(Jb){Bb(Error("Could not load image because of "+Jb.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(Ja,
K):function(jb,Bb,Jb,Xb){var Tb=new self.Image,bc=self.URL;Tb.onload=function(){Bb(null,Tb);bc.revokeObjectURL(Tb.src)};Tb.onerror=function(){return Bb(Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ac=new self.Blob([new Uint8Array(jb)],{type:"image/png"});Tb.cacheControl=Jb;Tb.expires=Xb;Tb.src=jb.byteLength?bc.createObjectURL(ac):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII\x3d"}(Ja,
K,Ra,db))});return{cancel:function(){sa.cancel();fa()}}},hc=function(x,K){void 0===K&&(K={});g(this,K);this.type=x},rc=function(x){function K(S,fa){void 0===fa&&(fa={});x.call(this,"error",g({error:S},fa))}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K}(hc),oc=function(){};oc.prototype.on=function(x,K){return this._listeners=this._listeners||{},O(x,K,this._listeners),this};oc.prototype.off=function(x,K){return T(x,K,this._listeners),T(x,K,this._oneTimeListeners),
this};oc.prototype.once=function(x,K){return this._oneTimeListeners=this._oneTimeListeners||{},O(x,K,this._oneTimeListeners),this};oc.prototype.fire=function(x,K){"string"==typeof x&&(x=new hc(x,K||{}));K=x.type;if(this.listens(K)){x.target=this;for(var S=0,fa=this._listeners&&this._listeners[K]?this._listeners[K].slice():[];S<fa.length;S+=1)fa[S].call(this,x);S=0;for(fa=this._oneTimeListeners&&this._oneTimeListeners[K]?this._oneTimeListeners[K].slice():[];S<fa.length;S+=1){var sa=fa[S];T(K,sa,this._oneTimeListeners);
sa.call(this,x)}(K=this._eventedParent)&&(g(x,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),K.fire(x))}else x instanceof rc&&console.error(x.error);return this};oc.prototype.listens=function(x){return this._listeners&&this._listeners[x]&&0<this._listeners[x].length||this._oneTimeListeners&&this._oneTimeListeners[x]&&0<this._oneTimeListeners[x].length||this._eventedParent&&this._eventedParent.listens(x)};oc.prototype.setEventedParent=function(x,K){return this._eventedParent=
x,this._eventedParentData=K,this};var Nb={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},
source:"source_vector source_raster source_raster_dem source_geojson source_video source_image".split(" "),source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},
source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},
url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},
buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,
value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",
minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:"layout_fill layout_line layout_circle layout_heatmap layout_fill-extrusion layout_symbol layout_raster layout_hillshade layout_background".split(" "),layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom",
"feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",
values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},
"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",
default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},
default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom",
"feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],
"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},
"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",
{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",
default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],
expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,
parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"\x3d\x3d":{},"!\x3d":{},"\x3e":{},"\x3e\x3d":{},
"\x3c":{},"\x3c\x3d":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",
required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},
"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},
rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},
log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"\x3d\x3d":{group:"Decision"},"!\x3d":{group:"Decision"},"\x3e":{group:"Decision"},"\x3c":{group:"Decision"},"\x3e\x3d":{group:"Decision"},"\x3c\x3d":{group:"Decision"},all:{group:"Decision"},
any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,
expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:"paint_fill paint_line paint_circle paint_heatmap paint_fill-extrusion paint_symbol paint_raster paint_hillshade paint_background".split(" "),paint_fill:{"fill-antialias":{type:"boolean",
default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",
transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},
"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",
transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},
"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,
units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",
default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},
"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,
parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,
units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},
viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",
default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},
"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,
parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",
transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,
minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom",
"feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",
value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},
"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},
"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",
default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},
"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",
default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,
minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},
promoteId:{"*":{type:"string"}}},jc=function(x,K,S,fa){this.message=(x?x+": ":"")+S;fa&&(this.identifier=fa);null!=K&&K.__line__&&(this.line=K.__line__)},Uc=function(x){function K(S,fa){x.call(this,fa);this.message=fa;this.key=S}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K}(Error),jd=function(x,K){void 0===K&&(K=[]);this.parent=x;this.bindings={};for(x=0;x<K.length;x+=1){var S=K[x];this.bindings[S[0]]=S[1]}};jd.prototype.concat=function(x){return new jd(this,
x)};jd.prototype.get=function(x){if(this.bindings[x])return this.bindings[x];if(this.parent)return this.parent.get(x);throw Error(x+" not found in scope.");};jd.prototype.has=function(x){return!!this.bindings[x]||!!this.parent&&this.parent.has(x)};var qd={kind:"null"},Vc={kind:"number"},td={kind:"string"},nd={kind:"boolean"},Gd={kind:"color"},Hd={kind:"object"},zd={kind:"value"},he={kind:"collator"},ee={kind:"formatted"},Ce={kind:"resolvedImage"},De=[qd,Vc,td,nd,Gd,ee,Hd,ea(zd),Ce],ze=e(function(x,
K){function S(Ra){return 0>(Ra=Math.round(Ra))?0:255<Ra?255:Ra}function fa(Ra){return S("%"===Ra[Ra.length-1]?parseFloat(Ra)/100*255:parseInt(Ra))}function sa(Ra){return 0>(db="%"===Ra[Ra.length-1]?parseFloat(Ra)/100:parseFloat(Ra))?0:1<db?1:db;var db}function za(Ra,db,jb){return 0>jb?jb+=1:1<jb&&--jb,1>6*jb?Ra+(db-Ra)*jb*6:1>2*jb?db:2>3*jb?Ra+(db-Ra)*(2/3-jb)*6:Ra}var Ja={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,
255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,
1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,
34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,
250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],
magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],
olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,
128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,
1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{K.parseCSSColor=function(Ra){var db;Ra=Ra.replace(/ /g,"").toLowerCase();if(Ra in Ja)return Ja[Ra].slice();if("#"===Ra[0])return 4===Ra.length?0<=(db=parseInt(Ra.substr(1),16))&&4095>=db?[(3840&db)>>4|(3840&db)>>8,240&db|(240&db)>>4,15&db|(15&db)<<4,1]:null:7===Ra.length&&0<=(db=parseInt(Ra.substr(1),16))&&16777215>=db?[(16711680&db)>>16,(65280&db)>>8,255&db,1]:null;var jb=Ra.indexOf("("),Bb=Ra.indexOf(")");if(-1!==jb&&Bb+1===Ra.length)switch(db=
Ra.substr(0,jb),jb=Ra.substr(jb+1,Bb-(jb+1)).split(","),Ra=1,db){case "rgba":if(4!==jb.length)break;Ra=sa(jb.pop());case "rgb":return 3!==jb.length?null:[fa(jb[0]),fa(jb[1]),fa(jb[2]),Ra];case "hsla":if(4!==jb.length)break;Ra=sa(jb.pop());case "hsl":if(3===jb.length)return db=(parseFloat(jb[0])%360+360)%360/360,Bb=sa(jb[1]),jb=sa(jb[2]),Bb=.5>=jb?jb*(Bb+1):jb+Bb-jb*Bb,jb=2*jb-Bb,[S(255*za(jb,Bb,db+1/3)),S(255*za(jb,Bb,db)),S(255*za(jb,Bb,db-1/3)),Ra]}return null}}catch(Ra){}}).parseCSSColor,Wd=function(x,
K,S,fa){void 0===fa&&(fa=1);this.r=x;this.g=K;this.b=S;this.a=fa};Wd.parse=function(x){if(x){if(x instanceof Wd)return x;if("string"==typeof x&&(x=ze(x)))return new Wd(x[0]/255*x[3],x[1]/255*x[3],x[2]/255*x[3],x[3])}};Wd.prototype.toString=function(){var x=this.toArray();return"rgba("+Math.round(x[0])+","+Math.round(x[1])+","+Math.round(x[2])+","+x[3]+")"};Wd.prototype.toArray=function(){var x=this.a;return 0===x?[0,0,0,0]:[255*this.r/x,255*this.g/x,255*this.b/x,x]};Wd.black=new Wd(0,0,0,1);Wd.white=
new Wd(1,1,1,1);Wd.transparent=new Wd(0,0,0,0);Wd.red=new Wd(1,0,0,1);var oe=function(x,K,S){this.sensitivity=x?K?"variant":"case":K?"accent":"base";this.locale=S;this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};oe.prototype.compare=function(x,K){return this.collator.compare(x,K)};oe.prototype.resolvedLocale=function(){return(new Intl.Collator(this.locale?this.locale:[])).resolvedOptions().locale};var Pe=function(x,K,S,fa,sa){this.text=x;this.image=
K;this.scale=S;this.fontStack=fa;this.textColor=sa},ye=function(x){this.sections=x};ye.fromString=function(x){return new ye([new Pe(x,null,null,null,null)])};ye.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(x){return 0!==x.text.length||x.image&&0!==x.image.name.length})};ye.factory=function(x){return x instanceof ye?x:ye.fromString(x)};ye.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(x){return x.text}).join("")};
ye.prototype.serialize=function(){for(var x=["format"],K=0,S=this.sections;K<S.length;K+=1){var fa=S[K];if(fa.image)x.push(["image",fa.image.name]);else{x.push(fa.text);var sa={};fa.fontStack&&(sa["text-font"]=["literal",fa.fontStack.split(",")]);fa.scale&&(sa["font-scale"]=fa.scale);fa.textColor&&(sa["text-color"]=["rgba"].concat(fa.textColor.toArray()));x.push(sa)}}return x};var Re=function(x){this.name=x.name;this.available=x.available};Re.prototype.toString=function(){return this.name};Re.fromString=
function(x){return x?new Re({name:x,available:!1}):null};Re.prototype.serialize=function(){return["image",this.name]};var wf=function(x,K){this.type=x;this.value=K};wf.parse=function(x,K){if(2!==x.length)return K.error("'literal' expression requires exactly one argument, but found "+(x.length-1)+" instead.");if(!oa(x[1]))return K.error("invalid value");x=x[1];var S=ja(x);K=K.expectedType;return"array"!==S.kind||0!==S.N||!K||"array"!==K.kind||"number"==typeof K.N&&0!==K.N||(S=K),new wf(S,x)};wf.prototype.evaluate=
function(){return this.value};wf.prototype.eachChild=function(){};wf.prototype.outputDefined=function(){return!0};wf.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Wd?["rgba"].concat(this.value.toArray()):this.value instanceof ye?this.value.serialize():this.value};var hf=function(x){this.name="ExpressionEvaluationError";this.message=x};hf.prototype.toJSON=function(){return this.message};var uh={string:td,number:Vc,
boolean:nd,object:Hd},af=function(x,K){this.type=x;this.args=K};af.parse=function(x,K){if(2>x.length)return K.error("Expected at least one argument.");var S=1,fa=x[0];if("array"===fa){if(2<x.length){fa=x[1];if("string"!=typeof fa||!(fa in uh)||"object"===fa)return K.error('The item type argument of "array" must be one of string, number, boolean',1);fa=uh[fa];S++}else fa=zd;if(3<x.length){if(null!==x[2]&&("number"!=typeof x[2]||0>x[2]||x[2]!==Math.floor(x[2])))return K.error('The length argument to "array" must be a positive integer literal',
2);var sa=x[2];S++}sa=ea(fa,sa)}else sa=uh[fa];for(fa=[];S<x.length;S++){var za=K.parse(x[S],S,zd);if(!za)return null;fa.push(za)}return new af(sa,fa)};af.prototype.evaluate=function(x){for(var K=0;K<this.args.length;K++){var S=this.args[K].evaluate(x);if(!ba(this.type,ja(S)))return S;if(K===this.args.length-1)throw new hf("Expected value to be of type "+ca(this.type)+", but found "+ca(ja(S))+" instead.");}return null};af.prototype.eachChild=function(x){this.args.forEach(x)};af.prototype.outputDefined=
function(){return this.args.every(function(x){return x.outputDefined()})};af.prototype.serialize=function(){var x=this.type,K=[x.kind];if("array"===x.kind){var S=x.itemType;if("string"===S.kind||"number"===S.kind||"boolean"===S.kind)K.push(S.kind),x=x.N,("number"==typeof x||1<this.args.length)&&K.push(x)}return K.concat(this.args.map(function(fa){return fa.serialize()}))};var zf=function(x){this.type=ee;this.sections=x};zf.parse=function(x,K){if(2>x.length)return K.error("Expected at least one argument.");
var S=x[1];if(!Array.isArray(S)&&"object"==typeof S)return K.error("First argument must be an image or text section.");S=[];for(var fa=!1,sa=1;sa<=x.length-1;++sa){var za=x[sa];if(fa&&"object"==typeof za&&!Array.isArray(za)){fa=!1;var Ja=null;if(za["font-scale"]&&!(Ja=K.parse(za["font-scale"],1,Vc)))return null;var Ra=null;if(za["text-font"]&&!(Ra=K.parse(za["text-font"],1,ea(td))))return null;var db=null;if(za["text-color"]&&!(db=K.parse(za["text-color"],1,Gd)))return null;za=S[S.length-1];za.scale=
Ja;za.font=Ra;za.textColor=db}else{Ja=K.parse(x[sa],1,zd);if(!Ja)return null;fa=Ja.type.kind;if("string"!==fa&&"value"!==fa&&"null"!==fa&&"resolvedImage"!==fa)return K.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");fa=!0;S.push({content:Ja,scale:null,font:null,textColor:null})}}return new zf(S)};zf.prototype.evaluate=function(x){return new ye(this.sections.map(function(K){var S=K.content.evaluate(x);return ja(S)===Ce?new Pe("",S,null,null,null):new Pe(ra(S),null,K.scale?
K.scale.evaluate(x):null,K.font?K.font.evaluate(x).join(","):null,K.textColor?K.textColor.evaluate(x):null)}))};zf.prototype.eachChild=function(x){for(var K=0,S=this.sections;K<S.length;K+=1){var fa=S[K];x(fa.content);fa.scale&&x(fa.scale);fa.font&&x(fa.font);fa.textColor&&x(fa.textColor)}};zf.prototype.outputDefined=function(){return!1};zf.prototype.serialize=function(){for(var x=["format"],K=0,S=this.sections;K<S.length;K+=1){var fa=S[K];x.push(fa.content.serialize());var sa={};fa.scale&&(sa["font-scale"]=
fa.scale.serialize());fa.font&&(sa["text-font"]=fa.font.serialize());fa.textColor&&(sa["text-color"]=fa.textColor.serialize());x.push(sa)}return x};var sg=function(x){this.type=Ce;this.input=x};sg.parse=function(x,K){return 2!==x.length?K.error("Expected two arguments."):(x=K.parse(x[1],1,td))?new sg(x):K.error("No image name provided.")};sg.prototype.evaluate=function(x){var K=this.input.evaluate(x),S=Re.fromString(K);return S&&x.availableImages&&(S.available=-1<x.availableImages.indexOf(K)),S};
sg.prototype.eachChild=function(x){x(this.input)};sg.prototype.outputDefined=function(){return!1};sg.prototype.serialize=function(){return["image",this.input.serialize()]};var Vh={"to-boolean":nd,"to-color":Gd,"to-number":Vc,"to-string":td},Kf=function(x,K){this.type=x;this.args=K};Kf.parse=function(x,K){if(2>x.length)return K.error("Expected at least one argument.");var S=x[0];if(("to-boolean"===S||"to-string"===S)&&2!==x.length)return K.error("Expected one argument.");S=Vh[S];for(var fa=[],sa=1;sa<
x.length;sa++){var za=K.parse(x[sa],sa,zd);if(!za)return null;fa.push(za)}return new Kf(S,fa)};Kf.prototype.evaluate=function(x){if("boolean"===this.type.kind)return!!this.args[0].evaluate(x);if("color"===this.type.kind){for(var K,S,fa=0,sa=this.args;fa<sa.length;fa+=1){if(S=null,(K=sa[fa].evaluate(x))instanceof Wd)return K;if("string"==typeof K){var za=x.parseColor(K);if(za)return za}else if(Array.isArray(K)&&!(S=3>K.length||4<K.length?"Invalid rbga value "+JSON.stringify(K)+": expected an array containing either three or four numeric values.":
pa(K[0],K[1],K[2],K[3])))return new Wd(K[0]/255,K[1]/255,K[2]/255,K[3])}throw new hf(S||"Could not parse color from value '"+("string"==typeof K?K:String(JSON.stringify(K)))+"'");}if("number"===this.type.kind){K=null;S=0;for(fa=this.args;S<fa.length;S+=1){if(null===(K=fa[S].evaluate(x)))return 0;sa=Number(K);if(!isNaN(sa))return sa}throw new hf("Could not convert "+JSON.stringify(K)+" to number.");}return"formatted"===this.type.kind?ye.fromString(ra(this.args[0].evaluate(x))):"resolvedImage"===this.type.kind?
Re.fromString(ra(this.args[0].evaluate(x))):ra(this.args[0].evaluate(x))};Kf.prototype.eachChild=function(x){this.args.forEach(x)};Kf.prototype.outputDefined=function(){return this.args.every(function(x){return x.outputDefined()})};Kf.prototype.serialize=function(){if("formatted"===this.type.kind)return(new zf([{content:this.args[0],scale:null,font:null,textColor:null}])).serialize();if("resolvedImage"===this.type.kind)return(new sg(this.args[0])).serialize();var x=["to-"+this.type.kind];return this.eachChild(function(K){x.push(K.serialize())}),
x};var Yi=["Unknown","Point","LineString","Polygon"],Ae=function(){this.formattedSection=this.featureState=this.feature=this.globals=null;this._parseColorCache={};this.canonical=this.availableImages=null};Ae.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null};Ae.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Yi[this.feature.type]:this.feature.type:null};Ae.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?
this.feature.geometry:null};Ae.prototype.canonicalID=function(){return this.canonical};Ae.prototype.properties=function(){return this.feature&&this.feature.properties||{}};Ae.prototype.parseColor=function(x){var K=this._parseColorCache[x];return K||(K=this._parseColorCache[x]=Wd.parse(x)),K};var Ne=function(x,K,S,fa){this.name=x;this.type=K;this._evaluate=S;this.args=fa};Ne.prototype.evaluate=function(x){return this._evaluate(x,this.args)};Ne.prototype.eachChild=function(x){this.args.forEach(x)};
Ne.prototype.outputDefined=function(){return!1};Ne.prototype.serialize=function(){return[this.name].concat(this.args.map(function(x){return x.serialize()}))};Ne.parse=function(x,K){var S,fa=x[0],sa=Ne.definitions[fa];if(!sa)return K.error('Unknown expression "'+fa+'". If you wanted a literal array, use ["literal", [...]].',0);var za=Array.isArray(sa)?sa[0]:sa.type;sa=Array.isArray(sa)?[[sa[1],sa[2]]]:sa.overloads;for(var Ja=sa.filter(function(Bc){Bc=Bc[0];return!Array.isArray(Bc)||Bc.length===x.length-
1}),Ra=null,db=0;db<Ja.length;db+=1){Ra=Ja[db];var jb=Ra[0],Bb=Ra[1];Ra=new Eg(K.registry,K.path,null,K.scope);for(var Jb=[],Xb=!1,Tb=1;Tb<x.length;Tb++){var bc=x[Tb],ac=Array.isArray(jb)?jb[Tb-1]:jb.type;bc=Ra.parse(bc,1+Jb.length,ac);if(!bc){Xb=!0;break}Jb.push(bc)}if(!Xb)if(Array.isArray(jb)&&jb.length!==Jb.length)Ra.error("Expected "+jb.length+" arguments, but found "+Jb.length+" instead.");else{for(Xb=0;Xb<Jb.length;Xb++)Tb=Array.isArray(jb)?jb[Xb]:jb.type,bc=Jb[Xb],Ra.concat(Xb+1).checkSubtype(Tb,
bc.type);if(0===Ra.errors.length)return new Ne(fa,za,Bb,Jb)}}if(1===Ja.length)(S=K.errors).push.apply(S,Ra.errors);else{S=(Ja.length?Ja:sa).map(function(Bc){var kd;return kd=Bc[0],Array.isArray(kd)?"("+kd.map(ca).join(", ")+")":"("+ca(kd.type)+"...)"}).join(" | ");fa=[];for(za=1;za<x.length;za++){sa=K.parse(x[za],1+fa.length);if(!sa)return null;fa.push(ca(sa.type))}K.error("Expected arguments of type "+S+", but found ("+fa.join(", ")+") instead.")}return null};Ne.register=function(x,K){for(var S in Ne.definitions=
K,K)x[S]=Ne};var ig=function(x,K,S){this.type=he;this.locale=S;this.caseSensitive=x;this.diacriticSensitive=K};ig.parse=function(x,K){if(2!==x.length)return K.error("Expected one argument.");x=x[1];if("object"!=typeof x||Array.isArray(x))return K.error("Collator options argument must be an object.");var S=K.parse(void 0!==x["case-sensitive"]&&x["case-sensitive"],1,nd);if(!S)return null;var fa=K.parse(void 0!==x["diacritic-sensitive"]&&x["diacritic-sensitive"],1,nd);if(!fa)return null;var sa=null;
return x.locale&&!(sa=K.parse(x.locale,1,td))?null:new ig(S,fa,sa)};ig.prototype.evaluate=function(x){return new oe(this.caseSensitive.evaluate(x),this.diacriticSensitive.evaluate(x),this.locale?this.locale.evaluate(x):null)};ig.prototype.eachChild=function(x){x(this.caseSensitive);x(this.diacriticSensitive);this.locale&&x(this.locale)};ig.prototype.outputDefined=function(){return!1};ig.prototype.serialize=function(){var x={};return x["case-sensitive"]=this.caseSensitive.serialize(),x["diacritic-sensitive"]=
this.diacriticSensitive.serialize(),this.locale&&(x.locale=this.locale.serialize()),["collator",x]};var Rf=function(x,K){this.type=nd;this.geojson=x;this.geometries=K};Rf.parse=function(x,K){if(2!==x.length)return K.error("'within' expression requires exactly one argument, but found "+(x.length-1)+" instead.");if(oa(x[1]))if(x=x[1],"FeatureCollection"===x.type)for(var S=0;S<x.features.length;++S){var fa=x.features[S].geometry.type;if("Polygon"===fa||"MultiPolygon"===fa)return new Rf(x,x.features[S].geometry)}else if("Feature"===
x.type){if(S=x.geometry.type,"Polygon"===S||"MultiPolygon"===S)return new Rf(x,x.geometry)}else if("Polygon"===x.type||"MultiPolygon"===x.type)return new Rf(x,x);return K.error("'within' expression requires valid geojson object that contains polygon geometry type.")};Rf.prototype.evaluate=function(x){if(null!=x.geometry()&&null!=x.canonicalID()){if("Point"===x.geometryType())return function(K,S){var fa=[1/0,1/0,-1/0,-1/0],sa=[1/0,1/0,-1/0,-1/0],za=K.canonicalID();if("Polygon"===S.type){var Ja=Ca(S.coordinates,
sa,za),Ra=ab(K.geometry(),fa,sa,za);if(!la(fa,sa))return!1;for(var db=0;db<Ra.length;db+=1)if(!ua(Ra[db],Ja))return!1}if("MultiPolygon"===S.type){S=Fa(S.coordinates,sa,za);K=ab(K.geometry(),fa,sa,za);if(!la(fa,sa))return!1;for(fa=0;fa<K.length;fa+=1){a:{sa=K[fa];za=S;for(Ja=0;Ja<za.length;Ja++)if(ua(sa,za[Ja])){sa=!0;break a}sa=!1}if(!sa)return!1}}return!0}(x,this.geometries);if("LineString"===x.geometryType())return function(K,S){var fa=[1/0,1/0,-1/0,-1/0],sa=[1/0,1/0,-1/0,-1/0],za=K.canonicalID();
if("Polygon"===S.type){var Ja=Ca(S.coordinates,sa,za),Ra=gb(K.geometry(),fa,sa,za);if(!la(fa,sa))return!1;for(var db=0;db<Ra.length;db+=1)if(!wa(Ra[db],Ja))return!1}if("MultiPolygon"===S.type){S=Fa(S.coordinates,sa,za);K=gb(K.geometry(),fa,sa,za);if(!la(fa,sa))return!1;for(fa=0;fa<K.length;fa+=1){a:{sa=K[fa];za=S;for(Ja=0;Ja<za.length;Ja++)if(wa(sa,za[Ja])){sa=!0;break a}sa=!1}if(!sa)return!1}}return!0}(x,this.geometries)}return!1};Rf.prototype.eachChild=function(){};Rf.prototype.outputDefined=function(){return!0};
Rf.prototype.serialize=function(){return["within",this.geojson]};var Dg=function(x,K){this.type=K.type;this.name=x;this.boundExpression=K};Dg.parse=function(x,K){if(2!==x.length||"string"!=typeof x[1])return K.error("'var' expression requires exactly one string literal argument.");x=x[1];return K.scope.has(x)?new Dg(x,K.scope.get(x)):K.error('Unknown variable "'+x+'". Make sure "'+x+'" has been bound in an enclosing "let" expression before using it.',1)};Dg.prototype.evaluate=function(x){return this.boundExpression.evaluate(x)};
Dg.prototype.eachChild=function(){};Dg.prototype.outputDefined=function(){return!1};Dg.prototype.serialize=function(){return["var",this.name]};var Eg=function(x,K,S,fa,sa){void 0===K&&(K=[]);void 0===fa&&(fa=new jd);void 0===sa&&(sa=[]);this.registry=x;this.path=K;this.key=K.map(function(za){return"["+za+"]"}).join("");this.scope=fa;this.errors=sa;this.expectedType=S};Eg.prototype.parse=function(x,K,S,fa,sa){return void 0===sa&&(sa={}),K?this.concat(K,S,fa)._parse(x,sa):this._parse(x,sa)};Eg.prototype._parse=
function(x,K){function S(za,Ja,Ra){return"assert"===Ra?new af(Ja,[za]):"coerce"===Ra?new Kf(Ja,[za]):za}if(null!==x&&"string"!=typeof x&&"boolean"!=typeof x&&"number"!=typeof x||(x=["literal",x]),Array.isArray(x)){if(0===x.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var fa=x[0];if("string"!=typeof fa)return this.error("Expression name must be a string, but found "+typeof fa+' instead. If you wanted a literal array, use ["literal", [...]].',
0),null;var sa=this.registry[fa];if(sa){x=sa.parse(x,this);if(!x)return null;if(this.expectedType)if(fa=this.expectedType,sa=x.type,"string"!==fa.kind&&"number"!==fa.kind&&"boolean"!==fa.kind&&"object"!==fa.kind&&"array"!==fa.kind||"value"!==sa.kind)if("color"!==fa.kind&&"formatted"!==fa.kind&&"resolvedImage"!==fa.kind||"value"!==sa.kind&&"string"!==sa.kind){if(this.checkSubtype(fa,sa))return null}else x=S(x,fa,K.typeAnnotation||"coerce");else x=S(x,fa,K.typeAnnotation||"assert");if(!(x instanceof
wf)&&"resolvedImage"!==x.type.kind&&function Ra(Ja){if(Ja instanceof Dg)return Ra(Ja.boundExpression);if(Ja instanceof Ne&&"error"===Ja.name||Ja instanceof ig||Ja instanceof Rf)return!1;var db=Ja instanceof Kf||Ja instanceof af,jb=!0;return Ja.eachChild(function(Bb){jb=db?jb&&Ra(Bb):jb&&Bb instanceof wf}),!!jb&&bb(Ja)&&kb(Ja,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(x)){K=new Ae;try{x=new wf(x.type,x.evaluate(K))}catch(Ja){return this.error(Ja.message),null}}return x}return this.error('Unknown expression "'+
fa+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===x?"'undefined' value invalid. Use null instead.":"object"==typeof x?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof x+" instead.")};Eg.prototype.concat=function(x,K,S){x="number"==typeof x?this.path.concat(x):this.path;S=S?this.scope.concat(S):this.scope;return new Eg(this.registry,x,K||null,S,this.errors)};Eg.prototype.error=function(x){for(var K=[],S=arguments.length-
1;0<S--;)K[S]=arguments[S+1];K=""+this.key+K.map(function(fa){return"["+fa+"]"}).join("");this.errors.push(new Uc(K,x))};Eg.prototype.checkSubtype=function(x,K){x=ba(x,K);return x&&this.error(x),x};var Af=function(x,K,S){this.type=x;this.input=K;this.labels=[];this.outputs=[];for(x=0;x<S.length;x+=1){K=S[x];var fa=K[1];this.labels.push(K[0]);this.outputs.push(fa)}};Af.parse=function(x,K){if(4>x.length-1)return K.error("Expected at least 4 arguments, but found only "+(x.length-1)+".");if(0!=(x.length-
1)%2)return K.error("Expected an even number of arguments.");var S=K.parse(x[1],1,Vc);if(!S)return null;var fa=[],sa=null;K.expectedType&&"value"!==K.expectedType.kind&&(sa=K.expectedType);for(var za=1;za<x.length;za+=2){var Ja=1===za?-1/0:x[za],Ra=x[za+1],db=za,jb=za+1;if("number"!=typeof Ja)return K.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',db);if(fa.length&&fa[fa.length-1][0]>=Ja)return K.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',
db);Ra=K.parse(Ra,jb,sa);if(!Ra)return null;sa=sa||Ra.type;fa.push([Ja,Ra])}return new Af(sa,S,fa)};Af.prototype.evaluate=function(x){var K=this.labels,S=this.outputs;if(1===K.length)return S[0].evaluate(x);var fa=this.input.evaluate(x);if(fa<=K[0])return S[0].evaluate(x);var sa=K.length;return fa>=K[sa-1]?S[sa-1].evaluate(x):S[mb(K,fa)].evaluate(x)};Af.prototype.eachChild=function(x){x(this.input);for(var K=0,S=this.outputs;K<S.length;K+=1)x(S[K])};Af.prototype.outputDefined=function(){return this.outputs.every(function(x){return x.outputDefined()})};
Af.prototype.serialize=function(){for(var x=["step",this.input.serialize()],K=0;K<this.labels.length;K++)0<K&&x.push(this.labels[K]),x.push(this.outputs[K].serialize());return x};var Zi=Object.freeze({__proto__:null,number:ya,color:function(x,K,S){return new Wd(ya(x.r,K.r,S),ya(x.g,K.g,S),ya(x.b,K.b,S),ya(x.a,K.a,S))},array:function(x,K,S){return x.map(function(fa,sa){return ya(fa,K[sa],S)})}}),ti=6/29*3*(6/29),Kb=Math.PI/180,Zk=180/Math.PI,dg={forward:Ya,reverse:Ga,interpolate:function(x,K,S){return{l:ya(x.l,
K.l,S),a:ya(x.a,K.a,S),b:ya(x.b,K.b,S),alpha:ya(x.alpha,K.alpha,S)}}},xf={forward:function(x){var K=Ya(x),S=K.a,fa=K.b,sa=Math.atan2(fa,S)*Zk;return{h:0>sa?sa+360:sa,c:Math.sqrt(S*S+fa*fa),l:K.l,alpha:x.a}},reverse:function(x){var K=x.h*Kb,S=x.c;return Ga({l:x.l,a:Math.cos(K)*S,b:Math.sin(K)*S,alpha:x.alpha})},interpolate:function(x,K,S){var fa=x.h,sa=K.h-fa;return{h:fa+S*(180<sa||-180>sa?sa-360*Math.round(sa/360):sa),c:ya(x.c,K.c,S),l:ya(x.l,K.l,S),alpha:ya(x.alpha,K.alpha,S)}}},tj=Object.freeze({__proto__:null,
lab:dg,hcl:xf}),Gf=function(x,K,S,fa,sa){this.type=x;this.operator=K;this.interpolation=S;this.input=fa;this.labels=[];this.outputs=[];for(x=0;x<sa.length;x+=1)K=sa[x],S=K[1],this.labels.push(K[0]),this.outputs.push(S)};Gf.interpolationFactor=function(x,K,S,fa){var sa=0;"exponential"===x.name?sa=Pa(K,x.base,S,fa):"linear"===x.name?sa=Pa(K,1,S,fa):"cubic-bezier"===x.name&&(x=x.controlPoints,sa=(new Zj(x[0],x[1],x[2],x[3])).solve(Pa(K,1,S,fa)));return sa};Gf.parse=function(x,K){var S=x[0],fa=x[1],sa=
x[2],za=x.slice(3);if(!Array.isArray(fa)||0===fa.length)return K.error("Expected an interpolation type expression.",1);if("linear"===fa[0])fa={name:"linear"};else if("exponential"===fa[0]){fa=fa[1];if("number"!=typeof fa)return K.error("Exponential interpolation requires a numeric base.",1,1);fa={name:"exponential",base:fa}}else{if("cubic-bezier"!==fa[0])return K.error("Unknown interpolation type "+String(fa[0]),1,0);fa=fa.slice(1);if(4!==fa.length||fa.some(function(Xb){return"number"!=typeof Xb||
0>Xb||1<Xb}))return K.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);fa={name:"cubic-bezier",controlPoints:fa}}if(4>x.length-1)return K.error("Expected at least 4 arguments, but found only "+(x.length-1)+".");if(0!=(x.length-1)%2)return K.error("Expected an even number of arguments.");if(!(sa=K.parse(sa,2,Vc)))return null;x=[];var Ja=null;"interpolate-hcl"===S||"interpolate-lab"===S?Ja=Gd:K.expectedType&&"value"!==K.expectedType.kind&&(Ja=K.expectedType);
for(var Ra=0;Ra<za.length;Ra+=2){var db=za[Ra],jb=za[Ra+1],Bb=Ra+3,Jb=Ra+4;if("number"!=typeof db)return K.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Bb);if(x.length&&x[x.length-1][0]>=db)return K.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Bb);jb=K.parse(jb,Jb,Ja);if(!jb)return null;Ja=Ja||jb.type;x.push([db,jb])}return"number"===
Ja.kind||"color"===Ja.kind||"array"===Ja.kind&&"number"===Ja.itemType.kind&&"number"==typeof Ja.N?new Gf(Ja,S,fa,sa,x):K.error("Type "+ca(Ja)+" is not interpolatable.")};Gf.prototype.evaluate=function(x){var K=this.labels,S=this.outputs;if(1===K.length)return S[0].evaluate(x);var fa=this.input.evaluate(x);if(fa<=K[0])return S[0].evaluate(x);var sa=K.length;if(fa>=K[sa-1])return S[sa-1].evaluate(x);sa=mb(K,fa);K=Gf.interpolationFactor(this.interpolation,fa,K[sa],K[sa+1]);fa=S[sa].evaluate(x);x=S[sa+
1].evaluate(x);return"interpolate"===this.operator?Zi[this.type.kind.toLowerCase()](fa,x,K):"interpolate-hcl"===this.operator?xf.reverse(xf.interpolate(xf.forward(fa),xf.forward(x),K)):dg.reverse(dg.interpolate(dg.forward(fa),dg.forward(x),K))};Gf.prototype.eachChild=function(x){x(this.input);for(var K=0,S=this.outputs;K<S.length;K+=1)x(S[K])};Gf.prototype.outputDefined=function(){return this.outputs.every(function(x){return x.outputDefined()})};Gf.prototype.serialize=function(){var x="linear"===
this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);x=[this.operator,x,this.input.serialize()];for(var K=0;K<this.labels.length;K++)x.push(this.labels[K],this.outputs[K].serialize());return x};var Wh=function(x,K){this.type=x;this.args=K};Wh.parse=function(x,K){if(2>x.length)return K.error("Expectected at least one argument.");var S=null,fa=
K.expectedType;fa&&"value"!==fa.kind&&(S=fa);var sa=[],za=0;for(x=x.slice(1);za<x.length;za+=1){var Ja=K.parse(x[za],1+sa.length,S,void 0,{typeAnnotation:"omit"});if(!Ja)return null;S=S||Ja.type;sa.push(Ja)}K=fa&&sa.some(function(Ra){return ba(fa,Ra.type)});return new Wh(K?zd:S,sa)};Wh.prototype.evaluate=function(x){for(var K,S=null,fa=0,sa=0,za=this.args;sa<za.length&&(fa++,(S=za[sa].evaluate(x))&&S instanceof Re&&!S.available&&(K||(K=S.name),S=null,fa===this.args.length&&(S=K)),null===S);sa+=1);
return S};Wh.prototype.eachChild=function(x){this.args.forEach(x)};Wh.prototype.outputDefined=function(){return this.args.every(function(x){return x.outputDefined()})};Wh.prototype.serialize=function(){var x=["coalesce"];return this.eachChild(function(K){x.push(K.serialize())}),x};var wh=function(x,K){this.type=K.type;this.bindings=[].concat(x);this.result=K};wh.prototype.evaluate=function(x){return this.result.evaluate(x)};wh.prototype.eachChild=function(x){for(var K=0,S=this.bindings;K<S.length;K+=
1)x(S[K][1]);x(this.result)};wh.parse=function(x,K){if(4>x.length)return K.error("Expected at least 3 arguments, but found "+(x.length-1)+" instead.");for(var S=[],fa=1;fa<x.length-1;fa+=2){var sa=x[fa];if("string"!=typeof sa)return K.error("Expected string, but found "+typeof sa+" instead.",fa);if(/[^a-zA-Z0-9_]/.test(sa))return K.error("Variable names must contain only alphanumeric characters or '_'.",fa);var za=K.parse(x[fa+1],fa+1);if(!za)return null;S.push([sa,za])}return(x=K.parse(x[x.length-
1],x.length-1,K.expectedType,S))?new wh(S,x):null};wh.prototype.outputDefined=function(){return this.result.outputDefined()};wh.prototype.serialize=function(){for(var x=["let"],K=0,S=this.bindings;K<S.length;K+=1){var fa=S[K];x.push(fa[0],fa[1].serialize())}return x.push(this.result.serialize()),x};var ui=function(x,K,S){this.type=x;this.index=K;this.input=S};ui.parse=function(x,K){if(3!==x.length)return K.error("Expected 2 arguments, but found "+(x.length-1)+" instead.");var S=K.parse(x[1],1,Vc);
x=K.parse(x[2],2,ea(K.expectedType||zd));return S&&x?new ui(x.type.itemType,S,x):null};ui.prototype.evaluate=function(x){var K=this.index.evaluate(x);x=this.input.evaluate(x);if(0>K)throw new hf("Array index out of bounds: "+K+" \x3c 0.");if(K>=x.length)throw new hf("Array index out of bounds: "+K+" \x3e "+(x.length-1)+".");if(K!==Math.floor(K))throw new hf("Array index must be an integer, but found "+K+" instead.");return x[K]};ui.prototype.eachChild=function(x){x(this.index);x(this.input)};ui.prototype.outputDefined=
function(){return!1};ui.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Xh=function(x,K){this.type=nd;this.needle=x;this.haystack=K};Xh.parse=function(x,K){if(3!==x.length)return K.error("Expected 2 arguments, but found "+(x.length-1)+" instead.");var S=K.parse(x[1],1,zd);x=K.parse(x[2],2,zd);return S&&x?ka(S.type,[nd,td,Vc,qd,zd])?new Xh(S,x):K.error("Expected first argument to be of type boolean, string, number or null, but found "+ca(S.type)+" instead"):
null};Xh.prototype.evaluate=function(x){var K=this.needle.evaluate(x);x=this.haystack.evaluate(x);if(!x)return!1;if(!qa(K,["boolean","string","number","null"]))throw new hf("Expected first argument to be of type boolean, string, number or null, but found "+ca(ja(K))+" instead.");if(!qa(x,["string","array"]))throw new hf("Expected second argument to be of type array or string, but found "+ca(ja(x))+" instead.");return 0<=x.indexOf(K)};Xh.prototype.eachChild=function(x){x(this.needle);x(this.haystack)};
Xh.prototype.outputDefined=function(){return!0};Xh.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var de=function(x,K,S){this.type=Vc;this.needle=x;this.haystack=K;this.fromIndex=S};de.parse=function(x,K){if(2>=x.length||5<=x.length)return K.error("Expected 3 or 4 arguments, but found "+(x.length-1)+" instead.");var S=K.parse(x[1],1,zd),fa=K.parse(x[2],2,zd);return S&&fa?ka(S.type,[nd,td,Vc,qd,zd])?4===x.length?(x=K.parse(x[3],3,Vc))?new de(S,fa,x):
null:new de(S,fa):K.error("Expected first argument to be of type boolean, string, number or null, but found "+ca(S.type)+" instead"):null};de.prototype.evaluate=function(x){var K=this.needle.evaluate(x),S=this.haystack.evaluate(x);if(!qa(K,["boolean","string","number","null"]))throw new hf("Expected first argument to be of type boolean, string, number or null, but found "+ca(ja(K))+" instead.");if(!qa(S,["string","array"]))throw new hf("Expected second argument to be of type array or string, but found "+
ca(ja(S))+" instead.");return this.fromIndex?(x=this.fromIndex.evaluate(x),S.indexOf(K,x)):S.indexOf(K)};de.prototype.eachChild=function(x){x(this.needle);x(this.haystack);this.fromIndex&&x(this.fromIndex)};de.prototype.outputDefined=function(){return!1};de.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var x=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),x]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};
var Ah=function(x,K,S,fa,sa,za){this.inputType=x;this.type=K;this.input=S;this.cases=fa;this.outputs=sa;this.otherwise=za};Ah.parse=function(x,K){if(5>x.length)return K.error("Expected at least 4 arguments, but found only "+(x.length-1)+".");if(1!=x.length%2)return K.error("Expected an even number of arguments.");var S;K.expectedType&&"value"!==K.expectedType.kind&&(S=K.expectedType);for(var fa={},sa=[],za=2;za<x.length-1;za+=2){var Ja=x[za],Ra=x[za+1];Array.isArray(Ja)||(Ja=[Ja]);var db=K.concat(za);
if(0===Ja.length)return db.error("Expected at least one branch label.");for(var jb=0;jb<Ja.length;jb+=1){var Bb=Ja[jb];if("number"!=typeof Bb&&"string"!=typeof Bb)return db.error("Branch labels must be numbers or strings.");if("number"==typeof Bb&&Math.abs(Bb)>Number.MAX_SAFE_INTEGER)return db.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof Bb&&Math.floor(Bb)!==Bb)return db.error("Numeric branch labels must be integer values.");if(Jb){if(db.checkSubtype(Jb,
ja(Bb)))return null}else var Jb=ja(Bb);if(void 0!==fa[String(Bb)])return db.error("Branch labels must be unique.");fa[String(Bb)]=sa.length}Ra=K.parse(Ra,za,S);if(!Ra)return null;S=S||Ra.type;sa.push(Ra)}za=K.parse(x[1],1,zd);return za?(x=K.parse(x[x.length-1],x.length-1,S))?"value"!==za.type.kind&&K.concat(1).checkSubtype(Jb,za.type)?null:new Ah(Jb,S,za,fa,sa,x):null:null};Ah.prototype.evaluate=function(x){var K=this.input.evaluate(x);return(ja(K)===this.inputType&&this.outputs[this.cases[K]]||this.otherwise).evaluate(x)};
Ah.prototype.eachChild=function(x){x(this.input);this.outputs.forEach(x);x(this.otherwise)};Ah.prototype.outputDefined=function(){return this.outputs.every(function(x){return x.outputDefined()})&&this.otherwise.outputDefined()};Ah.prototype.serialize=function(){for(var x=this,K=["match",this.input.serialize()],S=[],fa={},sa=0,za=Object.keys(this.cases).sort();sa<za.length;sa+=1){var Ja=za[sa];void 0===(Ra=fa[this.cases[Ja]])?(fa[this.cases[Ja]]=S.length,S.push([this.cases[Ja],[Ja]])):S[Ra][1].push(Ja)}fa=
function(db){return"number"===x.inputType.kind?Number(db):db};for(sa=0;sa<S.length;sa+=1){za=S[sa];var Ra=za[0];Ra=za[1];K.push(1===Ra.length?fa(Ra[0]):Ra.map(fa));K.push(this.outputs[outputIndex$1].serialize())}return K.push(this.otherwise.serialize()),K};var vi=function(x,K,S){this.type=x;this.branches=K;this.otherwise=S};vi.parse=function(x,K){if(4>x.length)return K.error("Expected at least 3 arguments, but found only "+(x.length-1)+".");if(0!=x.length%2)return K.error("Expected an odd number of arguments.");
var S;K.expectedType&&"value"!==K.expectedType.kind&&(S=K.expectedType);for(var fa=[],sa=1;sa<x.length-1;sa+=2){var za=K.parse(x[sa],sa,nd);if(!za)return null;var Ja=K.parse(x[sa+1],sa+1,S);if(!Ja)return null;fa.push([za,Ja]);S=S||Ja.type}return(x=K.parse(x[x.length-1],x.length-1,S))?new vi(S,fa,x):null};vi.prototype.evaluate=function(x){for(var K=0,S=this.branches;K<S.length;K+=1){var fa=S[K],sa=fa[1];if(fa[0].evaluate(x))return sa.evaluate(x)}return this.otherwise.evaluate(x)};vi.prototype.eachChild=
function(x){for(var K=0,S=this.branches;K<S.length;K+=1){var fa=S[K],sa=fa[1];x(fa[0]);x(sa)}x(this.otherwise)};vi.prototype.outputDefined=function(){return this.branches.every(function(x){return x[1].outputDefined()})&&this.otherwise.outputDefined()};vi.prototype.serialize=function(){var x=["case"];return this.eachChild(function(K){x.push(K.serialize())}),x};var Ig=function(x,K,S,fa){this.type=x;this.input=K;this.beginIndex=S;this.endIndex=fa};Ig.parse=function(x,K){if(2>=x.length||5<=x.length)return K.error("Expected 3 or 4 arguments, but found "+
(x.length-1)+" instead.");var S=K.parse(x[1],1,zd),fa=K.parse(x[2],2,Vc);return S&&fa?ka(S.type,[ea(zd),td,zd])?4===x.length?(x=K.parse(x[3],3,Vc))?new Ig(S.type,S,fa,x):null:new Ig(S.type,S,fa):K.error("Expected first argument to be of type array or string, but found "+ca(S.type)+" instead"):null};Ig.prototype.evaluate=function(x){var K=this.input.evaluate(x),S=this.beginIndex.evaluate(x);if(!qa(K,["string","array"]))throw new hf("Expected first argument to be of type array or string, but found "+
ca(ja(K))+" instead.");return this.endIndex?(x=this.endIndex.evaluate(x),K.slice(S,x)):K.slice(S)};Ig.prototype.eachChild=function(x){x(this.input);x(this.beginIndex);this.endIndex&&x(this.endIndex)};Ig.prototype.outputDefined=function(){return!1};Ig.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var x=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),x]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var rk=
Ea("\x3d\x3d",function(x,K,S){return K===S},va),sk=Ea("!\x3d",function(x,K,S){return K!==S},function(x,K,S,fa){return!va(0,K,S,fa)}),Lj=Ea("\x3c",function(x,K,S){return K<S},function(x,K,S,fa){return 0>fa.compare(K,S)}),He=Ea("\x3e",function(x,K,S){return K>S},function(x,K,S,fa){return 0<fa.compare(K,S)}),Ck=Ea("\x3c\x3d",function(x,K,S){return K<=S},function(x,K,S,fa){return 0>=fa.compare(K,S)}),hh=Ea("\x3e\x3d",function(x,K,S){return K>=S},function(x,K,S,fa){return 0<=fa.compare(K,S)}),ih=function(x,
K,S,fa,sa){this.type=td;this.number=x;this.locale=K;this.currency=S;this.minFractionDigits=fa;this.maxFractionDigits=sa};ih.parse=function(x,K){if(3!==x.length)return K.error("Expected two arguments.");var S=K.parse(x[1],1,Vc);if(!S)return null;x=x[2];if("object"!=typeof x||Array.isArray(x))return K.error("NumberFormat options argument must be an object.");var fa=null;if(x.locale&&!(fa=K.parse(x.locale,1,td)))return null;var sa=null;if(x.currency&&!(sa=K.parse(x.currency,1,td)))return null;var za=
null;if(x["min-fraction-digits"]&&!(za=K.parse(x["min-fraction-digits"],1,Vc)))return null;var Ja=null;return x["max-fraction-digits"]&&!(Ja=K.parse(x["max-fraction-digits"],1,Vc))?null:new ih(S,fa,sa,za,Ja)};ih.prototype.evaluate=function(x){return(new Intl.NumberFormat(this.locale?this.locale.evaluate(x):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(x):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(x):void 0,maximumFractionDigits:this.maxFractionDigits?
this.maxFractionDigits.evaluate(x):void 0})).format(this.number.evaluate(x))};ih.prototype.eachChild=function(x){x(this.number);this.locale&&x(this.locale);this.currency&&x(this.currency);this.minFractionDigits&&x(this.minFractionDigits);this.maxFractionDigits&&x(this.maxFractionDigits)};ih.prototype.outputDefined=function(){return!1};ih.prototype.serialize=function(){var x={};return this.locale&&(x.locale=this.locale.serialize()),this.currency&&(x.currency=this.currency.serialize()),this.minFractionDigits&&
(x["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(x["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),x]};var lg=function(x){this.type=Vc;this.input=x};lg.parse=function(x,K){return 2!==x.length?K.error("Expected 1 argument, but found "+(x.length-1)+" instead."):(x=K.parse(x[1],1))?"array"!==x.type.kind&&"string"!==x.type.kind&&"value"!==x.type.kind?K.error("Expected argument of type string or array, but found "+
ca(x.type)+" instead."):new lg(x):null};lg.prototype.evaluate=function(x){x=this.input.evaluate(x);if("string"==typeof x||Array.isArray(x))return x.length;throw new hf("Expected value to be of type string or array, but found "+ca(ja(x))+" instead.");};lg.prototype.eachChild=function(x){x(this.input)};lg.prototype.outputDefined=function(){return!1};lg.prototype.serialize=function(){var x=["length"];return this.eachChild(function(K){x.push(K.serialize())}),x};var Li={"\x3d\x3d":rk,"!\x3d":sk,"\x3e":He,
"\x3c":Lj,"\x3e\x3d":hh,"\x3c\x3d":Ck,array:af,at:ui,boolean:af,case:vi,coalesce:Wh,collator:ig,format:zf,image:sg,in:Xh,"index-of":de,interpolate:Gf,"interpolate-hcl":Gf,"interpolate-lab":Gf,length:lg,let:wh,literal:wf,match:Ah,number:af,"number-format":ih,object:af,slice:Ig,step:Af,string:af,"to-boolean":Kf,"to-color":Kf,"to-number":Kf,"to-string":Kf,var:Dg,within:Rf};Ne.register(Li,{error:[{kind:"error"},[td],function(x,K){throw new hf(K[0].evaluate(x));}],typeof:[td,[zd],function(x,K){return ca(ja(K[0].evaluate(x)))}],
"to-rgba":[ea(Vc,4),[Gd],function(x,K){return K[0].evaluate(x).toArray()}],rgb:[Gd,[Vc,Vc,Vc],Qa],rgba:[Gd,[Vc,Vc,Vc,Vc],Qa],has:{type:nd,overloads:[[[td],function(x,K){K=K[0].evaluate(x);x=x.properties();return K in x}],[[td,Hd],function(x,K){var S=K[1];K=K[0].evaluate(x);x=S.evaluate(x);return K in x}]]},get:{type:zd,overloads:[[[td],function(x,K){return $a(K[0].evaluate(x),x.properties())}],[[td,Hd],function(x,K){var S=K[1];return $a(K[0].evaluate(x),S.evaluate(x))}]]},"feature-state":[zd,[td],
function(x,K){return $a(K[0].evaluate(x),x.featureState||{})}],properties:[Hd,[],function(x){return x.properties()}],"geometry-type":[td,[],function(x){return x.geometryType()}],id:[zd,[],function(x){return x.id()}],zoom:[Vc,[],function(x){return x.globals.zoom}],"heatmap-density":[Vc,[],function(x){return x.globals.heatmapDensity||0}],"line-progress":[Vc,[],function(x){return x.globals.lineProgress||0}],accumulated:[zd,[],function(x){return void 0===x.globals.accumulated?null:x.globals.accumulated}],
"+":[Vc,{type:Vc},function(x,K){for(var S=0,fa=0;fa<K.length;fa+=1)S+=K[fa].evaluate(x);return S}],"*":[Vc,{type:Vc},function(x,K){for(var S=1,fa=0;fa<K.length;fa+=1)S*=K[fa].evaluate(x);return S}],"-":{type:Vc,overloads:[[[Vc,Vc],function(x,K){var S=K[1];return K[0].evaluate(x)-S.evaluate(x)}],[[Vc],function(x,K){return-K[0].evaluate(x)}]]},"/":[Vc,[Vc,Vc],function(x,K){var S=K[1];return K[0].evaluate(x)/S.evaluate(x)}],"%":[Vc,[Vc,Vc],function(x,K){var S=K[1];return K[0].evaluate(x)%S.evaluate(x)}],
ln2:[Vc,[],function(){return Math.LN2}],pi:[Vc,[],function(){return Math.PI}],e:[Vc,[],function(){return Math.E}],"^":[Vc,[Vc,Vc],function(x,K){var S=K[1];return Math.pow(K[0].evaluate(x),S.evaluate(x))}],sqrt:[Vc,[Vc],function(x,K){return Math.sqrt(K[0].evaluate(x))}],log10:[Vc,[Vc],function(x,K){return Math.log(K[0].evaluate(x))/Math.LN10}],ln:[Vc,[Vc],function(x,K){return Math.log(K[0].evaluate(x))}],log2:[Vc,[Vc],function(x,K){return Math.log(K[0].evaluate(x))/Math.LN2}],sin:[Vc,[Vc],function(x,
K){return Math.sin(K[0].evaluate(x))}],cos:[Vc,[Vc],function(x,K){return Math.cos(K[0].evaluate(x))}],tan:[Vc,[Vc],function(x,K){return Math.tan(K[0].evaluate(x))}],asin:[Vc,[Vc],function(x,K){return Math.asin(K[0].evaluate(x))}],acos:[Vc,[Vc],function(x,K){return Math.acos(K[0].evaluate(x))}],atan:[Vc,[Vc],function(x,K){return Math.atan(K[0].evaluate(x))}],min:[Vc,{type:Vc},function(x,K){return Math.min.apply(Math,K.map(function(S){return S.evaluate(x)}))}],max:[Vc,{type:Vc},function(x,K){return Math.max.apply(Math,
K.map(function(S){return S.evaluate(x)}))}],abs:[Vc,[Vc],function(x,K){return Math.abs(K[0].evaluate(x))}],round:[Vc,[Vc],function(x,K){x=K[0].evaluate(x);return 0>x?-Math.round(-x):Math.round(x)}],floor:[Vc,[Vc],function(x,K){return Math.floor(K[0].evaluate(x))}],ceil:[Vc,[Vc],function(x,K){return Math.ceil(K[0].evaluate(x))}],"filter-\x3d\x3d":[nd,[td,zd],function(x,K){var S=K[0];K=K[1];return x.properties()[S.value]===K.value}],"filter-id-\x3d\x3d":[nd,[zd],function(x,K){K=K[0];return x.id()===
K.value}],"filter-type-\x3d\x3d":[nd,[td],function(x,K){K=K[0];return x.geometryType()===K.value}],"filter-\x3c":[nd,[td,zd],function(x,K){var S=K[0];K=K[1];x=x.properties()[S.value];S=K.value;return typeof x==typeof S&&x<S}],"filter-id-\x3c":[nd,[zd],function(x,K){K=K[0];x=x.id();K=K.value;return typeof x==typeof K&&x<K}],"filter-\x3e":[nd,[td,zd],function(x,K){var S=K[0];K=K[1];x=x.properties()[S.value];S=K.value;return typeof x==typeof S&&x>S}],"filter-id-\x3e":[nd,[zd],function(x,K){K=K[0];x=
x.id();K=K.value;return typeof x==typeof K&&x>K}],"filter-\x3c\x3d":[nd,[td,zd],function(x,K){var S=K[0];K=K[1];x=x.properties()[S.value];S=K.value;return typeof x==typeof S&&x<=S}],"filter-id-\x3c\x3d":[nd,[zd],function(x,K){K=K[0];x=x.id();K=K.value;return typeof x==typeof K&&x<=K}],"filter-\x3e\x3d":[nd,[td,zd],function(x,K){var S=K[0];K=K[1];x=x.properties()[S.value];S=K.value;return typeof x==typeof S&&x>=S}],"filter-id-\x3e\x3d":[nd,[zd],function(x,K){K=K[0];x=x.id();K=K.value;return typeof x==
typeof K&&x>=K}],"filter-has":[nd,[zd],function(x,K){return K[0].value in x.properties()}],"filter-has-id":[nd,[],function(x){return null!==x.id()&&void 0!==x.id()}],"filter-type-in":[nd,[ea(td)],function(x,K){return 0<=K[0].value.indexOf(x.geometryType())}],"filter-id-in":[nd,[ea(zd)],function(x,K){return 0<=K[0].value.indexOf(x.id())}],"filter-in-small":[nd,[td,ea(zd)],function(x,K){var S=K[0];return 0<=K[1].value.indexOf(x.properties()[S.value])}],"filter-in-large":[nd,[td,ea(zd)],function(x,K){var S=
K[0];K=K[1];a:{x=x.properties()[S.value];S=K.value;var fa=0;for(K=K.value.length-1;fa<=K;){var sa=fa+K>>1;if(S[sa]===x){K=!0;break a}S[sa]>x?K=sa-1:fa=sa+1}K=!1}return K}],all:{type:nd,overloads:[[[nd,nd],function(x,K){var S=K[1];return K[0].evaluate(x)&&S.evaluate(x)}],[{type:nd},function(x,K){for(var S=0;S<K.length;S+=1)if(!K[S].evaluate(x))return!1;return!0}]]},any:{type:nd,overloads:[[[nd,nd],function(x,K){var S=K[1];return K[0].evaluate(x)||S.evaluate(x)}],[{type:nd},function(x,K){for(var S=
0;S<K.length;S+=1)if(K[S].evaluate(x))return!0;return!1}]]},"!":[nd,[nd],function(x,K){return!K[0].evaluate(x)}],"is-supported-script":[nd,[td],function(x,K){var S=x.globals&&x.globals.isSupportedScript;return!S||S(K[0].evaluate(x))}],upcase:[td,[td],function(x,K){return K[0].evaluate(x).toUpperCase()}],downcase:[td,[td],function(x,K){return K[0].evaluate(x).toLowerCase()}],concat:[td,{type:zd},function(x,K){return K.map(function(S){return ra(S.evaluate(x))}).join("")}],"resolved-locale":[td,[he],
function(x,K){return K[0].evaluate(x).resolvedLocale()}]});var fi=function(x,K){this.expression=x;this._warningHistory={};this._evaluator=new Ae;this._defaultValue=K?"color"===K.type&&Cb(K.default)?new Wd(0,0,0,0):"color"===K.type?Wd.parse(K.default)||null:void 0===K.default?null:K.default:null;this._enumValues=K&&"enum"===K.type?K.values:null};fi.prototype.evaluateWithoutErrorHandling=function(x,K,S,fa,sa,za){return this._evaluator.globals=x,this._evaluator.feature=K,this._evaluator.featureState=
S,this._evaluator.canonical=fa,this._evaluator.availableImages=sa||null,this._evaluator.formattedSection=za,this.expression.evaluate(this._evaluator)};fi.prototype.evaluate=function(x,K,S,fa,sa,za){this._evaluator.globals=x;this._evaluator.feature=K||null;this._evaluator.featureState=S||null;this._evaluator.canonical=fa;this._evaluator.availableImages=sa||null;this._evaluator.formattedSection=za||null;try{var Ja=this.expression.evaluate(this._evaluator);if(null==Ja||"number"==typeof Ja&&Ja!=Ja)return this._defaultValue;
if(this._enumValues&&!(Ja in this._enumValues))throw new hf("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ra){return JSON.stringify(Ra)}).join(", ")+", but found "+JSON.stringify(Ja)+" instead.");return Ja}catch(Ra){return this._warningHistory[Ra.message]||(this._warningHistory[Ra.message]=!0,"undefined"!=typeof console&&console.warn(Ra.message)),this._defaultValue}};var fe=function(x,K){this.kind=x;this._styleExpression=K;this.isStateDependent="constant"!==x&&!La(K.expression)};
fe.prototype.evaluateWithoutErrorHandling=function(x,K,S,fa,sa,za){return this._styleExpression.evaluateWithoutErrorHandling(x,K,S,fa,sa,za)};fe.prototype.evaluate=function(x,K,S,fa,sa,za){return this._styleExpression.evaluate(x,K,S,fa,sa,za)};var Ef=function(x,K,S,fa){this.kind=x;this.zoomStops=S;this._styleExpression=K;this.isStateDependent="camera"!==x&&!La(K.expression);this.interpolationType=fa};Ef.prototype.evaluateWithoutErrorHandling=function(x,K,S,fa,sa,za){return this._styleExpression.evaluateWithoutErrorHandling(x,
K,S,fa,sa,za)};Ef.prototype.evaluate=function(x,K,S,fa,sa,za){return this._styleExpression.evaluate(x,K,S,fa,sa,za)};Ef.prototype.interpolationFactor=function(x,K,S){return this.interpolationType?Gf.interpolationFactor(this.interpolationType,x,K,S):0};var uj=function(x,K){this._parameters=x;this._specification=K;Z(this,function za(fa,sa){var Ja="color"===sa.type,Ra=fa.stops&&"object"==typeof fa.stops[0][0],db=Ra||!(Ra||void 0!==fa.property),jb=fa.type||(nb(sa)?"exponential":"interval");if(Ja&&((fa=
Z({},fa)).stops&&(fa.stops=fa.stops.map(function(Bc){return[Bc[0],Wd.parse(Bc[1])]})),fa.default=Wd.parse(fa.default?fa.default:sa.default)),fa.colorSpace&&"rgb"!==fa.colorSpace&&!tj[fa.colorSpace])throw Error("Unknown color space: "+fa.colorSpace);if("exponential"===jb)var Bb=cd;else if("interval"===jb)Bb=Cc;else if("categorical"===jb){Bb=qc;var Jb=Object.create(null);Ja=0;for(var Xb=fa.stops;Ja<Xb.length;Ja+=1){var Tb=Xb[Ja];Jb[Tb[0]]=Tb[1]}var bc=typeof fa.stops[0][0]}else{if("identity"!==jb)throw Error('Unknown function type "'+
jb+'"');Bb=Qc}if(Ra){Ra={};db=[];for(jb=0;jb<fa.stops.length;jb++)Ja=fa.stops[jb],Xb=Ja[0].zoom,void 0===Ra[Xb]&&(Ra[Xb]={zoom:Xb,type:fa.type,property:fa.property,default:fa.default,stops:[]},db.push(Xb)),Ra[Xb].stops.push([Ja[0].value,Ja[1]]);var ac=[];for(jb=0;jb<db.length;jb+=1)Ja=db[jb],ac.push([Ra[Ja].zoom,za(Ra[Ja],sa)]);Ra={name:"linear"};return{kind:"composite",interpolationType:Ra,interpolationFactor:Gf.interpolationFactor.bind(void 0,Ra),zoomStops:ac.map(function(Bc){return Bc[0]}),evaluate:function(Bc,
kd){Bc=Bc.zoom;return cd({stops:ac,base:fa.base},sa,Bc).evaluate(Bc,kd)}}}return db?(Ra="exponential"===jb?{name:"exponential",base:void 0!==fa.base?fa.base:1}:null,{kind:"camera",interpolationType:Ra,interpolationFactor:Gf.interpolationFactor.bind(void 0,Ra),zoomStops:fa.stops.map(function(Bc){return Bc[0]}),evaluate:function(Bc){return Bb(fa,sa,Bc.zoom,Jb,bc)}}):{kind:"source",evaluate:function(Bc,kd){Bc=kd&&kd.properties?kd.properties[fa.property]:void 0;return void 0===Bc?fc(fa.default,sa.default):
Bb(fa,sa,Bc,Jb,bc)}}}(this._parameters,this._specification))};uj.deserialize=function(x){return new uj(x._parameters,x._specification)};uj.serialize=function(x){return{_parameters:x._parameters,_specification:x._specification}};var df={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},ke={promoteId:function(x){var K=x.key;x=x.value;if("string"===sb(x))return dc({key:K,value:x});var S=[],fa;for(fa in x)S.push.apply(S,dc({key:K+
"."+fa,value:x[fa]}));return S}},We={"*":function(){return[]},array:Wb,boolean:function(x){var K=x.value;x=x.key;var S=sb(K);return"boolean"!==S?[new jc(x,K,"boolean expected, "+S+" found")]:[]},number:Dc,color:function(x){var K=x.key;x=x.value;var S=sb(x);return"string"!==S?[new jc(K,x,"color expected, "+S+" found")]:null===ze(x)?[new jc(K,x,'color expected, "'+x+'" found')]:[]},constants:V,enum:ic,filter:qb,function:ec,layer:wc,object:yb,source:xc,light:Nc,string:dc,formatted:function(x){return 0===
dc(x).length?[]:kc(x)},resolvedImage:function(x){return 0===dc(x).length?[]:kc(x)}};od.source=rd(xc);od.light=rd(Nc);od.layer=rd(wc);od.filter=rd(qb);od.paintProperty=rd(Db);od.layoutProperty=rd(Qb);var vj=od.light,$k=od.paintProperty,dk=od.layoutProperty;ed.prototype.insert=function(x,K,S,fa,sa){this._forEachCell(K,S,fa,sa,this._insertCell,this.uid++);this.keys.push(x);this.bboxes.push(K);this.bboxes.push(S);this.bboxes.push(fa);this.bboxes.push(sa)};ed.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer.";
};ed.prototype._insertCell=function(x,K,S,fa,sa,za){this.cells[sa].push(za)};ed.prototype.query=function(x,K,S,fa,sa){var za=this.min,Ja=this.max;if(x<=za&&K<=za&&Ja<=S&&Ja<=fa&&!sa)return Array.prototype.slice.call(this.keys);za=[];return this._forEachCell(x,K,S,fa,this._queryCell,za,{},sa),za};ed.prototype._queryCell=function(x,K,S,fa,sa,za,Ja,Ra){sa=this.cells[sa];if(null!==sa)for(var db=this.keys,jb=this.bboxes,Bb=0;Bb<sa.length;Bb++){var Jb=sa[Bb];if(void 0===Ja[Jb]){var Xb=4*Jb;(Ra?Ra(jb[Xb+
0],jb[Xb+1],jb[Xb+2],jb[Xb+3]):x<=jb[Xb+2]&&K<=jb[Xb+3]&&S>=jb[Xb+0]&&fa>=jb[Xb+1])?(Ja[Jb]=!0,za.push(db[Jb])):Ja[Jb]=!1}}};ed.prototype._forEachCell=function(x,K,S,fa,sa,za,Ja,Ra){for(var db=this._convertToCellCoord(x),jb=this._convertToCellCoord(K),Bb=this._convertToCellCoord(S),Jb=this._convertToCellCoord(fa);db<=Bb;db++)for(var Xb=jb;Xb<=Jb;Xb++){var Tb=this.d*Xb+db;if((!Ra||Ra(this._convertFromCellCoord(db),this._convertFromCellCoord(Xb),this._convertFromCellCoord(db+1),this._convertFromCellCoord(Xb+
1)))&&sa.call(this,x,K,S,fa,Tb,za,Ja,Ra))return}};ed.prototype._convertFromCellCoord=function(x){return(x-this.padding)/this.scale};ed.prototype._convertToCellCoord=function(x){return Math.max(0,Math.min(this.d-1,Math.floor(x*this.scale)+this.padding))};ed.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var x=this.cells,K=3+this.cells.length+1+1,S=0,fa=0;fa<this.cells.length;fa++)S+=this.cells[fa].length;S=new Int32Array(K+S+this.keys.length+this.bboxes.length);
S[0]=this.extent;S[1]=this.n;S[2]=this.padding;for(fa=0;fa<x.length;fa++){var sa=x[fa];S[3+fa]=K;S.set(sa,K);K+=sa.length}return S[3+x.length]=K,S.set(this.keys,K),S[3+x.length+1]=K+=this.keys.length,S.set(this.bboxes,K),S.buffer};var ck=self.ImageData,aj=self.ImageBitmap,zi={},Ai;for(Ai in Mc("Object",Object),ed.serialize=function(x,K){x=x.toArrayBuffer();return K&&K.push(x),{buffer:x}},ed.deserialize=function(x){return new ed(x.buffer)},Mc("Grid",ed),Mc("Color",Wd),Mc("Error",Error),Mc("ResolvedImage",
Re),Mc("StylePropertyFunction",uj),Mc("StyleExpression",fi,{omit:["_evaluator"]}),Mc("ZoomDependentExpression",Ef),Mc("ZoomConstantExpression",fe),Mc("CompoundExpression",Ne,{omit:["_evaluate"]}),Li)Li[Ai]._classRegistryKey||Mc("Expression_"+Ai,Li[Ai]);var Mj=function(){this.first=!0};Mj.prototype.update=function(x,K){var S=Math.floor(x);return this.first?(this.first=!1,this.lastIntegerZoom=S,this.lastIntegerZoomTime=0,this.lastZoom=x,this.lastFloorZoom=S,!0):(this.lastFloorZoom>S?(this.lastIntegerZoom=
S+1,this.lastIntegerZoomTime=K):this.lastFloorZoom<S&&(this.lastIntegerZoom=S,this.lastIntegerZoomTime=K),x!==this.lastZoom&&(this.lastZoom=x,this.lastFloorZoom=S,!0))};var Pd={"Latin-1 Supplement":function(x){return 128<=x&&255>=x},Arabic:function(x){return 1536<=x&&1791>=x},"Arabic Supplement":function(x){return 1872<=x&&1919>=x},"Arabic Extended-A":function(x){return 2208<=x&&2303>=x},"Hangul Jamo":function(x){return 4352<=x&&4607>=x},"Unified Canadian Aboriginal Syllabics":function(x){return 5120<=
x&&5759>=x},Khmer:function(x){return 6016<=x&&6143>=x},"Unified Canadian Aboriginal Syllabics Extended":function(x){return 6320<=x&&6399>=x},"General Punctuation":function(x){return 8192<=x&&8303>=x},"Letterlike Symbols":function(x){return 8448<=x&&8527>=x},"Number Forms":function(x){return 8528<=x&&8591>=x},"Miscellaneous Technical":function(x){return 8960<=x&&9215>=x},"Control Pictures":function(x){return 9216<=x&&9279>=x},"Optical Character Recognition":function(x){return 9280<=x&&9311>=x},"Enclosed Alphanumerics":function(x){return 9312<=
x&&9471>=x},"Geometric Shapes":function(x){return 9632<=x&&9727>=x},"Miscellaneous Symbols":function(x){return 9728<=x&&9983>=x},"Miscellaneous Symbols and Arrows":function(x){return 11008<=x&&11263>=x},"CJK Radicals Supplement":function(x){return 11904<=x&&12031>=x},"Kangxi Radicals":function(x){return 12032<=x&&12255>=x},"Ideographic Description Characters":function(x){return 12272<=x&&12287>=x},"CJK Symbols and Punctuation":function(x){return 12288<=x&&12351>=x},Hiragana:function(x){return 12352<=
x&&12447>=x},Katakana:function(x){return 12448<=x&&12543>=x},Bopomofo:function(x){return 12544<=x&&12591>=x},"Hangul Compatibility Jamo":function(x){return 12592<=x&&12687>=x},Kanbun:function(x){return 12688<=x&&12703>=x},"Bopomofo Extended":function(x){return 12704<=x&&12735>=x},"CJK Strokes":function(x){return 12736<=x&&12783>=x},"Katakana Phonetic Extensions":function(x){return 12784<=x&&12799>=x},"Enclosed CJK Letters and Months":function(x){return 12800<=x&&13055>=x},"CJK Compatibility":function(x){return 13056<=
x&&13311>=x},"CJK Unified Ideographs Extension A":function(x){return 13312<=x&&19903>=x},"Yijing Hexagram Symbols":function(x){return 19904<=x&&19967>=x},"CJK Unified Ideographs":function(x){return 19968<=x&&40959>=x},"Yi Syllables":function(x){return 40960<=x&&42127>=x},"Yi Radicals":function(x){return 42128<=x&&42191>=x},"Hangul Jamo Extended-A":function(x){return 43360<=x&&43391>=x},"Hangul Syllables":function(x){return 44032<=x&&55215>=x},"Hangul Jamo Extended-B":function(x){return 55216<=x&&
55295>=x},"Private Use Area":function(x){return 57344<=x&&63743>=x},"CJK Compatibility Ideographs":function(x){return 63744<=x&&64255>=x},"Arabic Presentation Forms-A":function(x){return 64336<=x&&65023>=x},"Vertical Forms":function(x){return 65040<=x&&65055>=x},"CJK Compatibility Forms":function(x){return 65072<=x&&65103>=x},"Small Form Variants":function(x){return 65104<=x&&65135>=x},"Arabic Presentation Forms-B":function(x){return 65136<=x&&65279>=x},"Halfwidth and Fullwidth Forms":function(x){return 65280<=
x&&65519>=x}},Nj=null,Hf="unavailable",Og=null,ij=function(x){x&&"string"==typeof x&&-1<x.indexOf("NetworkError")&&(Hf="error");Nj&&Nj(x)},Mi=new oc,jj=function(){if("deferred"!==Hf||!Og)throw Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Hf="loading";vd();Og&&Fb({url:Og},function(x){x?ij(x):(Hf="loaded",vd())})},Nf={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Hf||null!=Nf.applyArabicShaping},
isLoading:function(){return"loading"===Hf},setState:function(x){Hf=x.pluginStatus;Og=x.pluginURL},isParsed:function(){return null!=Nf.applyArabicShaping&&null!=Nf.processBidirectionalText&&null!=Nf.processStyledBidirectionalText},getPluginURL:function(){return Og}},Oe=function(x,K){this.zoom=x;K?(this.now=K.now,this.fadeDuration=K.fadeDuration,this.zoomHistory=K.zoomHistory,this.transition=K.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Mj,this.transition={})};Oe.prototype.isSupportedScript=
function(x){a:{for(var K=Nf.isLoaded(),S=0;S<x.length;S+=1){var fa=x[S].charCodeAt(0);if(!K&&dd(fa)||2304<=fa&&3583>=fa||3840<=fa&&4255>=fa||Pd.Khmer(fa)){x=!1;break a}}x=!0}return x};Oe.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)};Oe.prototype.getCrossfadeParameters=function(){var x=this.zoom,K=x-Math.floor(x),S=this.crossFadingFactor();return x>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,
t:K+(1-K)*S}:{fromScale:.5,toScale:1,t:1-(1-S)*K}};var gi=function(x,K){this.property=x;this.value=K;this.expression=function(S,fa){if(Cb(S))return new uj(S,fa);if(Wc(S)){S=ld(S,fa);if("error"===S.result)throw Error(S.value.map(function(za){return za.key+": "+za.message}).join(", "));return S.value}var sa=S;return"string"==typeof S&&"color"===fa.type&&(sa=Wd.parse(S)),{kind:"constant",evaluate:function(){return sa}}}(void 0===K?x.specification.default:K,x.specification)};gi.prototype.isDataDriven=
function(){return"source"===this.expression.kind||"composite"===this.expression.kind};gi.prototype.possiblyEvaluate=function(x,K,S){return this.property.possiblyEvaluate(this,x,K,S)};var wj=function(x){this.property=x;this.value=new gi(x,void 0)};wj.prototype.transitioned=function(x,K){return new tk(this.property,this.value,K,g({},x.transition,this.transition),x.now)};wj.prototype.untransitioned=function(){return new tk(this.property,this.value,null,{},0)};var Rg=function(x){this._properties=x;this._values=
Object.create(x.defaultTransitionablePropertyValues)};Rg.prototype.getValue=function(x){return z(this._values[x].value.value)};Rg.prototype.setValue=function(x,K){this._values.hasOwnProperty(x)||(this._values[x]=new wj(this._values[x].property));this._values[x].value=new gi(this._values[x].property,null===K?void 0:z(K))};Rg.prototype.getTransition=function(x){return z(this._values[x].transition)};Rg.prototype.setTransition=function(x,K){this._values.hasOwnProperty(x)||(this._values[x]=new wj(this._values[x].property));
this._values[x].transition=z(K)||void 0};Rg.prototype.serialize=function(){for(var x={},K=0,S=Object.keys(this._values);K<S.length;K+=1){var fa=S[K],sa=this.getValue(fa);void 0!==sa&&(x[fa]=sa);sa=this.getTransition(fa);void 0!==sa&&(x[fa+"-transition"]=sa)}return x};Rg.prototype.transitioned=function(x,K){for(var S=new Qd(this._properties),fa=0,sa=Object.keys(this._values);fa<sa.length;fa+=1){var za=sa[fa];S._values[za]=this._values[za].transitioned(x,K._values[za])}return S};Rg.prototype.untransitioned=
function(){for(var x=new Qd(this._properties),K=0,S=Object.keys(this._values);K<S.length;K+=1){var fa=S[K];x._values[fa]=this._values[fa].untransitioned()}return x};var tk=function(x,K,S,fa,sa){this.property=x;this.value=K;this.begin=sa+fa.delay||0;this.end=this.begin+fa.duration||0;x.specification.transition&&(fa.delay||fa.duration)&&(this.prior=S)};tk.prototype.possiblyEvaluate=function(x,K,S){var fa=x.now||0,sa=this.value.possiblyEvaluate(x,K,S),za=this.prior;if(za){if(fa>this.end||this.value.isDataDriven())return this.prior=
null,sa;if(fa<this.begin)return za.possiblyEvaluate(x,K,S);var Ja=(fa-this.begin)/(this.end-this.begin);fa=this.property;var Ra=fa.interpolate;x=za.possiblyEvaluate(x,K,S);0>=Ja?Ja=0:1<=Ja?Ja=1:(K=Ja*Ja,S=K*Ja,Ja=4*(.5>Ja?S:3*(Ja-K)+S-.75));return Ra.call(fa,x,sa,Ja)}return sa};var Qd=function(x){this._properties=x;this._values=Object.create(x.defaultTransitioningPropertyValues)};Qd.prototype.possiblyEvaluate=function(x,K,S){for(var fa=new Ni(this._properties),sa=0,za=Object.keys(this._values);sa<
za.length;sa+=1){var Ja=za[sa];fa._values[Ja]=this._values[Ja].possiblyEvaluate(x,K,S)}return fa};Qd.prototype.hasTransition=function(){for(var x=0,K=Object.keys(this._values);x<K.length;x+=1)if(this._values[K[x]].prior)return!0;return!1};var mf=function(x){this._properties=x;this._values=Object.create(x.defaultPropertyValues)};mf.prototype.getValue=function(x){return z(this._values[x].value)};mf.prototype.setValue=function(x,K){this._values[x]=new gi(this._values[x].property,null===K?void 0:z(K))};
mf.prototype.serialize=function(){for(var x={},K=0,S=Object.keys(this._values);K<S.length;K+=1){var fa=S[K],sa=this.getValue(fa);void 0!==sa&&(x[fa]=sa)}return x};mf.prototype.possiblyEvaluate=function(x,K,S){for(var fa=new Ni(this._properties),sa=0,za=Object.keys(this._values);sa<za.length;sa+=1){var Ja=za[sa];fa._values[Ja]=this._values[Ja].possiblyEvaluate(x,K,S)}return fa};var qf=function(x,K,S){this.property=x;this.value=K;this.parameters=S};qf.prototype.isConstant=function(){return"constant"===
this.value.kind};qf.prototype.constantOr=function(x){return"constant"===this.value.kind?this.value.value:x};qf.prototype.evaluate=function(x,K,S,fa){return this.property.evaluate(this.value,this.parameters,x,K,S,fa)};var Ni=function(x){this._properties=x;this._values=Object.create(x.defaultPossiblyEvaluatedValues)};Ni.prototype.get=function(x){return this._values[x]};var Ld=function(x){this.specification=x};Ld.prototype.possiblyEvaluate=function(x,K){return x.expression.evaluate(K)};Ld.prototype.interpolate=
function(x,K,S){var fa=Zi[this.specification.type];return fa?fa(x,K,S):x};var ge=function(x,K){this.specification=x;this.overrides=K};ge.prototype.possiblyEvaluate=function(x,K,S,fa){return new qf(this,"constant"===x.expression.kind||"camera"===x.expression.kind?{kind:"constant",value:x.expression.evaluate(K,null,{},S,fa)}:x.expression,K)};ge.prototype.interpolate=function(x,K,S){if("constant"!==x.value.kind||"constant"!==K.value.kind)return x;if(void 0===x.value.value||void 0===K.value.value)return new qf(this,
{kind:"constant",value:void 0},x.parameters);var fa=Zi[this.specification.type];return fa?new qf(this,{kind:"constant",value:fa(x.value.value,K.value.value,S)},x.parameters):x};ge.prototype.evaluate=function(x,K,S,fa,sa,za){return"constant"===x.kind?x.value:x.evaluate(K,S,fa,sa,za)};var xj=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.possiblyEvaluate=function(S,fa,sa,za){return void 0===S.value?new qf(this,
{kind:"constant",value:void 0},fa):"constant"===S.expression.kind?(sa=S.expression.evaluate(fa,null,{},sa,za),S="resolvedImage"===S.property.specification.type&&"string"!=typeof sa?sa.name:sa,S=this._calculate(S,S,S,fa),new qf(this,{kind:"constant",value:S},fa)):"camera"===S.expression.kind?(S=this._calculate(S.expression.evaluate({zoom:fa.zoom-1}),S.expression.evaluate({zoom:fa.zoom}),S.expression.evaluate({zoom:fa.zoom+1}),fa),new qf(this,{kind:"constant",value:S},fa)):new qf(this,S.expression,
fa)},K.prototype.evaluate=function(S,fa,sa,za,Ja,Ra){return"source"===S.kind?(S=S.evaluate(fa,sa,za,Ja,Ra),this._calculate(S,S,S,fa)):"composite"===S.kind?this._calculate(S.evaluate({zoom:Math.floor(fa.zoom)-1},sa,za),S.evaluate({zoom:Math.floor(fa.zoom)},sa,za),S.evaluate({zoom:Math.floor(fa.zoom)+1},sa,za),fa):S.value},K.prototype._calculate=function(S,fa,sa,za){return za.zoom>za.zoomHistory.lastIntegerZoom?{from:S,to:fa}:{from:sa,to:fa}},K.prototype.interpolate=function(S){return S},K}(ge),xh=
function(x){this.specification=x};xh.prototype.possiblyEvaluate=function(x,K,S,fa){if(void 0!==x.value)return"constant"===x.expression.kind?(x=x.expression.evaluate(K,null,{},S,fa),this._calculate(x,x,x,K)):this._calculate(x.expression.evaluate(new Oe(Math.floor(K.zoom-1),K)),x.expression.evaluate(new Oe(Math.floor(K.zoom),K)),x.expression.evaluate(new Oe(Math.floor(K.zoom+1),K)),K)};xh.prototype._calculate=function(x,K,S,fa){return fa.zoom>fa.zoomHistory.lastIntegerZoom?{from:x,to:K}:{from:S,to:K}};
xh.prototype.interpolate=function(x){return x};var bj=function(x){this.specification=x};bj.prototype.possiblyEvaluate=function(x,K,S,fa){return!!x.expression.evaluate(K,null,{},S,fa)};bj.prototype.interpolate=function(){return!1};var Uf=function(x){for(var K in this.properties=x,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],x){var S=x[K];S.specification.overridable&&
this.overridableProperties.push(K);var fa=this.defaultPropertyValues[K]=new gi(S,void 0);S=this.defaultTransitionablePropertyValues[K]=new wj(S);this.defaultTransitioningPropertyValues[K]=S.untransitioned();this.defaultPossiblyEvaluatedValues[K]=fa.possiblyEvaluate({})}};Mc("DataDrivenProperty",ge);Mc("DataConstantProperty",Ld);Mc("CrossFadedDataDrivenProperty",xj);Mc("CrossFadedProperty",xh);Mc("ColorRampProperty",bj);var ug=function(x){function K(S,fa){if(x.call(this),this.id=S.id,this.type=S.type,
this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==S.type&&(this.metadata=S.metadata,this.minzoom=S.minzoom,this.maxzoom=S.maxzoom,"background"!==S.type&&(this.source=S.source,this.sourceLayer=S["source-layer"],this.filter=S.filter),fa.layout&&(this._unevaluatedLayout=new mf(fa.layout)),fa.paint)){for(var sa in this._transitionablePaint=new Rg(fa.paint),S.paint)this.setPaintProperty(sa,S.paint[sa],{validate:!1});for(var za in S.layout)this.setLayoutProperty(za,S.layout[za],
{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned();this.paint=new Ni(fa.paint)}}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},K.prototype.getLayoutProperty=function(S){return"visibility"===S?this.visibility:this._unevaluatedLayout.getValue(S)},K.prototype.setLayoutProperty=function(S,fa,sa){void 0===sa&&(sa={});null!=fa&&this._validate(dk,"layers."+
this.id+".layout."+S,S,fa,sa)||("visibility"!==S?this._unevaluatedLayout.setValue(S,fa):this.visibility=fa)},K.prototype.getPaintProperty=function(S){return v(S,"-transition")?this._transitionablePaint.getTransition(S.slice(0,-11)):this._transitionablePaint.getValue(S)},K.prototype.setPaintProperty=function(S,fa,sa){if(void 0===sa&&(sa={}),null!=fa&&this._validate($k,"layers."+this.id+".paint."+S,S,fa,sa))return!1;if(v(S,"-transition"))return this._transitionablePaint.setTransition(S.slice(0,-11),
fa||void 0),!1;var za=this._transitionablePaint._values[S];sa="cross-faded-data-driven"===za.property.specification["property-type"];var Ja=za.value.isDataDriven();za=za.value;this._transitionablePaint.setValue(S,fa);this._handleSpecialPaintPropertyUpdate(S);fa=this._transitionablePaint._values[S].value;return fa.isDataDriven()||Ja||sa||this._handleOverridablePaintPropertyUpdate(S,za,fa)},K.prototype._handleSpecialPaintPropertyUpdate=function(S){},K.prototype._handleOverridablePaintPropertyUpdate=
function(S,fa,sa){return!1},K.prototype.isHidden=function(S){return!!(this.minzoom&&S<this.minzoom)||!!(this.maxzoom&&S>=this.maxzoom)||"none"===this.visibility},K.prototype.updateTransitions=function(S){this._transitioningPaint=this._transitionablePaint.transitioned(S,this._transitioningPaint)},K.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},K.prototype.recalculate=function(S,fa){S.getCrossfadeParameters&&(this._crossfadeParameters=S.getCrossfadeParameters());
this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(S,void 0,fa));this.paint=this._transitioningPaint.possiblyEvaluate(S,void 0,fa)},K.prototype.serialize=function(){var S={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};
return this.visibility&&(S.layout=S.layout||{},S.layout.visibility=this.visibility),A(S,function(fa,sa){return!(void 0===fa||"layout"===sa&&!Object.keys(fa).length||"paint"===sa&&!Object.keys(fa).length)})},K.prototype._validate=function(S,fa,sa,za,Ja){return void 0===Ja&&(Ja={}),(!Ja||!1!==Ja.validate)&&Dd(this,S.call(od,{key:fa,layerType:this.type,objectKey:sa,value:za,styleSpec:Nb,style:{glyphs:!0,sprite:!0}}))},K.prototype.is3D=function(){return!1},K.prototype.isTileClipped=function(){return!1},
K.prototype.hasOffscreenPass=function(){return!1},K.prototype.resize=function(){},K.prototype.isStateDependent=function(){for(var S in this.paint._values){var fa=this.paint.get(S);if(fa instanceof qf&&pb(fa.property.specification)&&("source"===fa.value.kind||"composite"===fa.value.kind)&&fa.value.isStateDependent)return!0}return!1},K}(oc),hi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Of=function(x,K){this._structArray=
x;this._pos1=K*this.size;this._pos2=this._pos1/2;this._pos4=this._pos1/4;this._pos8=this._pos1/8},Ie=function(){this.isTransferred=!1;this.capacity=-1;this.resize(0)};Ie.serialize=function(x,K){return x._trim(),K&&(x.isTransferred=!0,K.push(x.arrayBuffer)),{length:x.length,arrayBuffer:x.arrayBuffer}};Ie.deserialize=function(x){var K=Object.create(this.prototype);return K.arrayBuffer=x.arrayBuffer,K.length=x.length,K.capacity=x.arrayBuffer.byteLength/K.bytesPerElement,K._refreshViews(),K};Ie.prototype._trim=
function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())};Ie.prototype.clear=function(){this.length=0};Ie.prototype.resize=function(x){this.reserve(x);this.length=x};Ie.prototype.reserve=function(x){x>this.capacity&&(this.capacity=Math.max(x,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement),x=this.uint8,this._refreshViews(),x&&this.uint8.set(x))};
Ie.prototype._refreshViews=function(){throw Error("_refreshViews() must be implemented by each concrete StructArray layout");};var Bh=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa){var sa=this.length;return this.resize(sa+1),this.emplace(sa,S,fa)},K.prototype.emplace=
function(S,fa,sa){var za=2*S;return this.int16[za+0]=fa,this.int16[za+1]=sa,S},K}(Ie);Bh.prototype.bytesPerElement=4;Mc("StructArrayLayout2i4",Bh);var jh=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa,sa,za){var Ja=this.length;return this.resize(Ja+1),
this.emplace(Ja,S,fa,sa,za)},K.prototype.emplace=function(S,fa,sa,za,Ja){var Ra=4*S;return this.int16[Ra+0]=fa,this.int16[Ra+1]=sa,this.int16[Ra+2]=za,this.int16[Ra+3]=Ja,S},K}(Ie);jh.prototype.bytesPerElement=8;Mc("StructArrayLayout4i8",jh);var kh=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},
K.prototype.emplaceBack=function(S,fa,sa,za,Ja,Ra){var db=this.length;return this.resize(db+1),this.emplace(db,S,fa,sa,za,Ja,Ra)},K.prototype.emplace=function(S,fa,sa,za,Ja,Ra,db){var jb=6*S;return this.int16[jb+0]=fa,this.int16[jb+1]=sa,this.int16[jb+2]=za,this.int16[jb+3]=Ja,this.int16[jb+4]=Ra,this.int16[jb+5]=db,S},K}(Ie);kh.prototype.bytesPerElement=12;Mc("StructArrayLayout2i4i12",kh);var Jg=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&
x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa,sa,za,Ja,Ra){var db=this.length;return this.resize(db+1),this.emplace(db,S,fa,sa,za,Ja,Ra)},K.prototype.emplace=function(S,fa,sa,za,Ja,Ra,db){var jb=4*S,Bb=8*S;return this.int16[jb+0]=fa,this.int16[jb+1]=sa,this.uint8[Bb+4]=za,this.uint8[Bb+5]=Ja,this.uint8[Bb+6]=Ra,this.uint8[Bb+7]=db,S},K}(Ie);Jg.prototype.bytesPerElement=
8;Mc("StructArrayLayout2i4ub8",Jg);var Vf=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb){var Xb=this.length;return this.resize(Xb+1),this.emplace(Xb,S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb)},K.prototype.emplace=function(S,fa,sa,za,Ja,Ra,
db,jb,Bb,Jb,Xb){var Tb=9*S,bc=18*S;return this.uint16[Tb+0]=fa,this.uint16[Tb+1]=sa,this.uint16[Tb+2]=za,this.uint16[Tb+3]=Ja,this.uint16[Tb+4]=Ra,this.uint16[Tb+5]=db,this.uint16[Tb+6]=jb,this.uint16[Tb+7]=Bb,this.uint8[bc+16]=Jb,this.uint8[bc+17]=Xb,S},K}(Ie);Vf.prototype.bytesPerElement=18;Mc("StructArrayLayout8ui2ub18",Vf);var Sg=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=
new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb,Xb,Tb){var bc=this.length;return this.resize(bc+1),this.emplace(bc,S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb,Xb,Tb)},K.prototype.emplace=function(S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb,Xb,Tb,bc){var ac=12*S;return this.int16[ac+0]=fa,this.int16[ac+1]=sa,this.int16[ac+2]=za,this.int16[ac+3]=Ja,this.uint16[ac+4]=Ra,this.uint16[ac+5]=db,this.uint16[ac+
6]=jb,this.uint16[ac+7]=Bb,this.int16[ac+8]=Jb,this.int16[ac+9]=Xb,this.int16[ac+10]=Tb,this.int16[ac+11]=bc,S},K}(Ie);Sg.prototype.bytesPerElement=24;Mc("StructArrayLayout4i4ui4i24",Sg);var yg=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa,sa){var za=
this.length;return this.resize(za+1),this.emplace(za,S,fa,sa)},K.prototype.emplace=function(S,fa,sa,za){var Ja=3*S;return this.float32[Ja+0]=fa,this.float32[Ja+1]=sa,this.float32[Ja+2]=za,S},K}(Ie);yg.prototype.bytesPerElement=12;Mc("StructArrayLayout3f12",yg);var Ch=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer)},
K.prototype.emplaceBack=function(S){var fa=this.length;return this.resize(fa+1),this.emplace(fa,S)},K.prototype.emplace=function(S,fa){return this.uint32[1*S]=fa,S},K}(Ie);Ch.prototype.bytesPerElement=4;Mc("StructArrayLayout1ul4",Ch);var Dh=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint32=
new Uint32Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa,sa,za,Ja,Ra,db,jb,Bb){var Jb=this.length;return this.resize(Jb+1),this.emplace(Jb,S,fa,sa,za,Ja,Ra,db,jb,Bb)},K.prototype.emplace=function(S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb){var Xb=10*S;return this.int16[Xb+0]=fa,this.int16[Xb+1]=sa,this.int16[Xb+2]=za,this.int16[Xb+3]=Ja,this.int16[Xb+4]=Ra,this.int16[Xb+5]=db,this.uint32[5*S+3]=jb,this.uint16[Xb+8]=Bb,this.uint16[Xb+9]=Jb,S},K}(Ie);
Dh.prototype.bytesPerElement=20;Mc("StructArrayLayout6i1ul2ui20",Dh);var Kg=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa,sa,za,Ja,Ra){var db=this.length;return this.resize(db+1),this.emplace(db,S,fa,sa,za,Ja,Ra)},K.prototype.emplace=function(S,fa,sa,
za,Ja,Ra,db){var jb=6*S;return this.int16[jb+0]=fa,this.int16[jb+1]=sa,this.int16[jb+2]=za,this.int16[jb+3]=Ja,this.int16[jb+4]=Ra,this.int16[jb+5]=db,S},K}(Ie);Kg.prototype.bytesPerElement=12;Mc("StructArrayLayout2i2i2i12",Kg);var mg=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer);this.int16=
new Int16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa,sa,za,Ja){var Ra=this.length;return this.resize(Ra+1),this.emplace(Ra,S,fa,sa,za,Ja)},K.prototype.emplace=function(S,fa,sa,za,Ja,Ra){var db=4*S,jb=8*S;return this.float32[db+0]=fa,this.float32[db+1]=sa,this.float32[db+2]=za,this.int16[jb+6]=Ja,this.int16[jb+7]=Ra,S},K}(Ie);mg.prototype.bytesPerElement=16;Mc("StructArrayLayout2f1f2i16",mg);var Oj=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=
Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa,sa,za){var Ja=this.length;return this.resize(Ja+1),this.emplace(Ja,S,fa,sa,za)},K.prototype.emplace=function(S,fa,sa,za,Ja){var Ra=12*S,db=3*S;return this.uint8[Ra+0]=fa,this.uint8[Ra+1]=sa,this.float32[db+1]=za,this.float32[db+2]=Ja,S},K}(Ie);Oj.prototype.bytesPerElement=12;Mc("StructArrayLayout2ub2f12",
Oj);var eh=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa,sa){var za=this.length;return this.resize(za+1),this.emplace(za,S,fa,sa)},K.prototype.emplace=function(S,fa,sa,za){var Ja=3*S;return this.uint16[Ja+0]=fa,this.uint16[Ja+1]=sa,this.uint16[Ja+2]=
za,S},K}(Ie);eh.prototype.bytesPerElement=6;Mc("StructArrayLayout3ui6",eh);var mj=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},K.prototype.emplaceBack=
function(S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb,Xb,Tb,bc,ac,Bc,kd,pd){var bd=this.length;return this.resize(bd+1),this.emplace(bd,S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb,Xb,Tb,bc,ac,Bc,kd,pd)},K.prototype.emplace=function(S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb,Xb,Tb,bc,ac,Bc,kd,pd,bd){var Ed=24*S,Bd=12*S,Jd=48*S;return this.int16[Ed+0]=fa,this.int16[Ed+1]=sa,this.uint16[Ed+2]=za,this.uint16[Ed+3]=Ja,this.uint32[Bd+2]=Ra,this.uint32[Bd+3]=db,this.uint32[Bd+4]=jb,this.uint16[Ed+10]=Bb,this.uint16[Ed+11]=Jb,this.uint16[Ed+12]=Xb,
this.float32[Bd+7]=Tb,this.float32[Bd+8]=bc,this.uint8[Jd+36]=ac,this.uint8[Jd+37]=Bc,this.uint8[Jd+38]=kd,this.uint32[Bd+10]=pd,this.int16[Ed+22]=bd,S},K}(Ie);mj.prototype.bytesPerElement=48;Mc("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",mj);var Tg=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb,Xb,Tb,bc,ac,Bc,kd,pd,bd,Ed,Bd,Jd,Rd,Xd,be,ce,Ud,Zd,pe){var Sd=this.length;return this.resize(Sd+1),this.emplace(Sd,S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb,Xb,Tb,bc,ac,Bc,kd,pd,bd,Ed,Bd,Jd,Rd,Xd,be,ce,Ud,Zd,pe)},K.prototype.emplace=function(S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb,Xb,Tb,bc,ac,Bc,kd,pd,bd,Ed,Bd,Jd,Rd,Xd,be,
ce,Ud,Zd,pe,Sd){var Od=34*S,Td=17*S;return this.int16[Od+0]=fa,this.int16[Od+1]=sa,this.int16[Od+2]=za,this.int16[Od+3]=Ja,this.int16[Od+4]=Ra,this.int16[Od+5]=db,this.int16[Od+6]=jb,this.int16[Od+7]=Bb,this.uint16[Od+8]=Jb,this.uint16[Od+9]=Xb,this.uint16[Od+10]=Tb,this.uint16[Od+11]=bc,this.uint16[Od+12]=ac,this.uint16[Od+13]=Bc,this.uint16[Od+14]=kd,this.uint16[Od+15]=pd,this.uint16[Od+16]=bd,this.uint16[Od+17]=Ed,this.uint16[Od+18]=Bd,this.uint16[Od+19]=Jd,this.uint16[Od+20]=Rd,this.uint16[Od+
21]=Xd,this.uint16[Od+22]=be,this.uint32[Td+12]=ce,this.float32[Td+13]=Ud,this.float32[Td+14]=Zd,this.float32[Td+15]=pe,this.float32[Td+16]=Sd,S},K}(Ie);Tg.prototype.bytesPerElement=68;Mc("StructArrayLayout8i15ui1ul4f68",Tg);var Bi=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},K.prototype.emplaceBack=
function(S){var fa=this.length;return this.resize(fa+1),this.emplace(fa,S)},K.prototype.emplace=function(S,fa){return this.float32[1*S]=fa,S},K}(Ie);Bi.prototype.bytesPerElement=4;Mc("StructArrayLayout1f4",Bi);var cj=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.int16=new Int16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,
fa,sa){var za=this.length;return this.resize(za+1),this.emplace(za,S,fa,sa)},K.prototype.emplace=function(S,fa,sa,za){var Ja=3*S;return this.int16[Ja+0]=fa,this.int16[Ja+1]=sa,this.int16[Ja+2]=za,S},K}(Ie);cj.prototype.bytesPerElement=6;Mc("StructArrayLayout3i6",cj);var dj=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint32=new Uint32Array(this.arrayBuffer);
this.uint16=new Uint16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa,sa){var za=this.length;return this.resize(za+1),this.emplace(za,S,fa,sa)},K.prototype.emplace=function(S,fa,sa,za){var Ja=4*S;return this.uint32[2*S]=fa,this.uint16[Ja+2]=sa,this.uint16[Ja+3]=za,S},K}(Ie);dj.prototype.bytesPerElement=8;Mc("StructArrayLayout1ul2ui8",dj);var Zh=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=
function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa){var sa=this.length;return this.resize(sa+1),this.emplace(sa,S,fa)},K.prototype.emplace=function(S,fa,sa){var za=2*S;return this.uint16[za+0]=fa,this.uint16[za+1]=sa,S},K}(Ie);Zh.prototype.bytesPerElement=4;Mc("StructArrayLayout2ui4",Zh);var Ek=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=
K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.uint16=new Uint16Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S){var fa=this.length;return this.resize(fa+1),this.emplace(fa,S)},K.prototype.emplace=function(S,fa){return this.uint16[1*S]=fa,S},K}(Ie);Ek.prototype.bytesPerElement=2;Mc("StructArrayLayout1ui2",Ek);var eg=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=
K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa){var sa=this.length;return this.resize(sa+1),this.emplace(sa,S,fa)},K.prototype.emplace=function(S,fa,sa){var za=2*S;return this.float32[za+0]=fa,this.float32[za+1]=sa,S},K}(Ie);eg.prototype.bytesPerElement=8;Mc("StructArrayLayout2f8",eg);var yj=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=
Object.create(x&&x.prototype)).constructor=K,K.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer);this.float32=new Float32Array(this.arrayBuffer)},K.prototype.emplaceBack=function(S,fa,sa,za){var Ja=this.length;return this.resize(Ja+1),this.emplace(Ja,S,fa,sa,za)},K.prototype.emplace=function(S,fa,sa,za,Ja){var Ra=4*S;return this.float32[Ra+0]=fa,this.float32[Ra+1]=sa,this.float32[Ra+2]=za,this.float32[Ra+3]=Ja,S},K}(Ie);yj.prototype.bytesPerElement=16;Mc("StructArrayLayout4f16",
yj);var Ci=function(x){function K(){x.apply(this,arguments)}x&&(K.__proto__=x);(K.prototype=Object.create(x&&x.prototype)).constructor=K;var S={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return S.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},S.anchorPointY.get=
function(){return this._structArray.int16[this._pos2+1]},S.x1.get=function(){return this._structArray.int16[this._pos2+2]},S.y1.get=function(){return this._structArray.int16[this._pos2+3]},S.x2.get=function(){return this._structArray.int16[this._pos2+4]},S.y2.get=function(){return this._structArray.int16[this._pos2+5]},S.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},S.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},S.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+
9]},S.anchorPoint.get=function(){return new Vd(this.anchorPointX,this.anchorPointY)},Object.defineProperties(K.prototype,S),K}(Of);Ci.prototype.size=20;var ek=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.get=function(S){return new Ci(this,S)},K}(Dh);Mc("CollisionBoxArray",ek);var Fk=function(x){function K(){x.apply(this,arguments)}x&&(K.__proto__=x);(K.prototype=Object.create(x&&x.prototype)).constructor=
K;var S={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};
return S.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},S.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},S.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},S.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},S.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},S.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},S.lineLength.get=function(){return this._structArray.uint32[this._pos4+
4]},S.segment.get=function(){return this._structArray.uint16[this._pos2+10]},S.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},S.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},S.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},S.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},S.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},S.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+
37]},S.placedOrientation.set=function(fa){this._structArray.uint8[this._pos1+37]=fa},S.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},S.hidden.set=function(fa){this._structArray.uint8[this._pos1+38]=fa},S.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},S.crossTileID.set=function(fa){this._structArray.uint32[this._pos4+10]=fa},S.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(K.prototype,S),K}(Of);
Fk.prototype.size=48;var Gk=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.get=function(S){return new Fk(this,S)},K}(mj);Mc("PlacedSymbolArray",Gk);var Hk=function(x){function K(){x.apply(this,arguments)}x&&(K.__proto__=x);(K.prototype=Object.create(x&&x.prototype)).constructor=K;var S={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},
leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},
featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return S.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},S.anchorY.get=function(){return this._structArray.int16[this._pos2+
1]},S.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},S.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},S.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},S.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},S.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},S.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+
7]},S.key.get=function(){return this._structArray.uint16[this._pos2+8]},S.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},S.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},S.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},S.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},S.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},S.iconBoxEndIndex.get=
function(){return this._structArray.uint16[this._pos2+14]},S.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},S.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},S.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},S.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},S.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},S.numIconVertices.get=
function(){return this._structArray.uint16[this._pos2+20]},S.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},S.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},S.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},S.crossTileID.set=function(fa){this._structArray.uint32[this._pos4+12]=fa},S.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},S.textOffset0.get=function(){return this._structArray.float32[this._pos4+
14]},S.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},S.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(K.prototype,S),K}(Of);Hk.prototype.size=68;var Ik=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.get=function(S){return new Hk(this,S)},K}(Tg);Mc("SymbolInstanceArray",Ik);var zj=function(x){function K(){x.apply(this,
arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.getoffsetX=function(S){return this.float32[1*S]},K}(Bi);Mc("GlyphOffsetArray",zj);var mi=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.getx=function(S){return this.int16[3*S]},K.prototype.gety=function(S){return this.int16[3*S+1]},K.prototype.gettileUnitDistanceFromAnchor=function(S){return this.int16[3*
S+2]},K}(cj);Mc("SymbolLineVertexArray",mi);var Ih=function(x){function K(){x.apply(this,arguments)}x&&(K.__proto__=x);(K.prototype=Object.create(x&&x.prototype)).constructor=K;var S={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return S.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},S.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},S.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+
3]},Object.defineProperties(K.prototype,S),K}(Of);Ih.prototype.size=8;var ki=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.get=function(S){return new Ih(this,S)},K}(dj);Mc("FeatureIndexArray",ki);var uk=Cd([{name:"a_pos",components:2,type:"Int16"}],4).members,lf=function(x){void 0===x&&(x=[]);this.segments=x};lf.prototype.prepareSegment=function(x,K,S,fa){var sa=this.segments[this.segments.length-1];
return x>lf.MAX_VERTEX_ARRAY_LENGTH&&y("Max vertices per segment is "+lf.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+x),(!sa||sa.vertexLength+x>lf.MAX_VERTEX_ARRAY_LENGTH||sa.sortKey!==fa)&&(sa={vertexOffset:K.length,primitiveOffset:S.length,vertexLength:0,primitiveLength:0},void 0!==fa&&(sa.sortKey=fa),this.segments.push(sa)),sa};lf.prototype.get=function(){return this.segments};lf.prototype.destroy=function(){for(var x=0,K=this.segments;x<K.length;x+=1){var S=K[x],fa;for(fa in S.vaos)S.vaos[fa].destroy()}};
lf.simpleSegment=function(x,K,S,fa){return new lf([{vertexOffset:x,primitiveOffset:K,vertexLength:S,primitiveLength:fa,vaos:{},sortKey:0}])};lf.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1;Mc("SegmentVector",lf);var Pi=Cd([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),vk=e(function(x){x.exports=function(K,S){var fa,sa,za;var Ja=K.length-(fa=
3&K.length);for(za=0;za<Ja;){var Ra=255&K.charCodeAt(za)|(255&K.charCodeAt(++za))<<8|(255&K.charCodeAt(++za))<<16|(255&K.charCodeAt(++za))<<24;++za;S=27492+(65535&(sa=5*(65535&(S=(S^=461845907*(65535&(Ra=(Ra=3432918353*(65535&Ra)+((3432918353*(Ra>>>16)&65535)<<16)&4294967295)<<15|Ra>>>17))+((461845907*(Ra>>>16)&65535)<<16)&4294967295)<<13|S>>>19))+((5*(S>>>16)&65535)<<16)&4294967295))+((58964+(sa>>>16)&65535)<<16)}switch(Ra=0,fa){case 3:Ra^=(255&K.charCodeAt(za+2))<<16;case 2:Ra^=(255&K.charCodeAt(za+
1))<<8;case 1:S^=461845907*(65535&(Ra=(Ra=3432918353*(65535&(Ra^=255&K.charCodeAt(za)))+((3432918353*(Ra>>>16)&65535)<<16)&4294967295)<<15|Ra>>>17))+((461845907*(Ra>>>16)&65535)<<16)&4294967295}return S^=K.length,S=2246822507*(65535&(S^=S>>>16))+((2246822507*(S>>>16)&65535)<<16)&4294967295,S=3266489909*(65535&(S^=S>>>13))+((3266489909*(S>>>16)&65535)<<16)&4294967295,(S^S>>>16)>>>0}}),fk=e(function(x){x.exports=function(K,S){var fa=K.length;S^=fa;for(var sa=0;4<=fa;){var za=1540483477*(65535&(za=255&
K.charCodeAt(sa)|(255&K.charCodeAt(++sa))<<8|(255&K.charCodeAt(++sa))<<16|(255&K.charCodeAt(++sa))<<24))+((1540483477*(za>>>16)&65535)<<16);S=1540483477*(65535&S)+((1540483477*(S>>>16)&65535)<<16)^(za=1540483477*(65535&(za^=za>>>24))+((1540483477*(za>>>16)&65535)<<16));fa-=4;++sa}switch(fa){case 3:S^=(255&K.charCodeAt(sa+2))<<16;case 2:S^=(255&K.charCodeAt(sa+1))<<8;case 1:S=1540483477*(65535&(S^=255&K.charCodeAt(sa)))+((1540483477*(S>>>16)&65535)<<16)}return S=1540483477*(65535&(S^=S>>>13))+((1540483477*
(S>>>16)&65535)<<16),(S^S>>>15)>>>0}}),qi=vk;qi.murmur3=vk;qi.murmur2=fk;var oh=function(){this.ids=[];this.positions=[];this.indexed=!1};oh.prototype.add=function(x,K,S,fa){this.ids.push(Nd(x));this.positions.push(K,S,fa)};oh.prototype.getPositions=function(x){x=Nd(x);for(var K=0,S=this.ids.length-1;K<S;){var fa=K+S>>1;this.ids[fa]>=x?S=fa:K=fa+1}for(S=[];this.ids[K]===x;)S.push({index:this.positions[3*K],start:this.positions[3*K+1],end:this.positions[3*K+2]}),K++;return S};oh.serialize=function(x,
K){var S=new Float64Array(x.ids);x=new Uint32Array(x.positions);return function db(sa,za,Ja,Ra){for(;Ja<Ra;){for(var jb=sa[Ja+Ra>>1],Bb=Ja-1,Jb=Ra+1;;){do Bb++;while(sa[Bb]<jb);do Jb--;while(sa[Jb]>jb);if(Bb>=Jb)break;Id(sa,Bb,Jb);Id(za,3*Bb,3*Jb);Id(za,3*Bb+1,3*Jb+1);Id(za,3*Bb+2,3*Jb+2)}Jb-Ja<Ra-Jb?(db(sa,za,Ja,Jb),Ja=Jb+1):(db(sa,za,Jb+1,Ra),Ra=Jb)}}(S,x,0,S.length-1),K&&K.push(S.buffer,x.buffer),{ids:S,positions:x}};oh.deserialize=function(x){var K=new oh;return K.ids=x.ids,K.positions=x.positions,
K.indexed=!0,K};var al=Math.pow(2,53)-1;Mc("FeaturePositionMap",oh);var Di=function(x,K){this.gl=x.gl;this.location=K},nl=function(x){function K(S,fa){x.call(this,S,fa);this.current=0}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.set=function(S){this.current!==S&&(this.current=S,this.gl.uniform1i(this.location,S))},K}(Di),gk=function(x){function K(S,fa){x.call(this,S,fa);this.current=0}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=
K,K.prototype.set=function(S){this.current!==S&&(this.current=S,this.gl.uniform1f(this.location,S))},K}(Di),ol=function(x){function K(S,fa){x.call(this,S,fa);this.current=[0,0]}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.set=function(S){S[0]===this.current[0]&&S[1]===this.current[1]||(this.current=S,this.gl.uniform2f(this.location,S[0],S[1]))},K}(Di),pl=function(x){function K(S,fa){x.call(this,S,fa);this.current=[0,0,0]}return x&&(K.__proto__=x),
(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.set=function(S){S[0]===this.current[0]&&S[1]===this.current[1]&&S[2]===this.current[2]||(this.current=S,this.gl.uniform3f(this.location,S[0],S[1],S[2]))},K}(Di),bl=function(x){function K(S,fa){x.call(this,S,fa);this.current=[0,0,0,0]}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.set=function(S){S[0]===this.current[0]&&S[1]===this.current[1]&&S[2]===this.current[2]&&S[3]===this.current[3]||
(this.current=S,this.gl.uniform4f(this.location,S[0],S[1],S[2],S[3]))},K}(Di),Jk=function(x){function K(S,fa){x.call(this,S,fa);this.current=Wd.transparent}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.set=function(S){S.r===this.current.r&&S.g===this.current.g&&S.b===this.current.b&&S.a===this.current.a||(this.current=S,this.gl.uniform4f(this.location,S.r,S.g,S.b,S.a))},K}(Di),ql=new Float32Array(16),rl=function(x){function K(S,fa){x.call(this,S,fa);
this.current=ql}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.set=function(S){if(S[12]!==this.current[12]||S[0]!==this.current[0])return this.current=S,void this.gl.uniformMatrix4fv(this.location,!1,S);for(var fa=1;16>fa;fa++)if(S[fa]!==this.current[fa]){this.current=S;this.gl.uniformMatrix4fv(this.location,!1,S);break}},K}(Di),Xi=function(x,K,S){this.value=x;this.uniformNames=K.map(function(fa){return"u_"+fa});this.type=S};Xi.prototype.setUniform=
function(x,K,S){x.set(S.constantOr(this.value))};Xi.prototype.getBinding=function(x,K,S){return"color"===this.type?new Jk(x,K):new gk(x,K)};var Uh=function(x,K){this.uniformNames=K.map(function(S){return"u_"+S});this.patternTo=this.patternFrom=null;this.pixelRatioTo=this.pixelRatioFrom=1};Uh.prototype.setConstantPatternPositions=function(x,K){this.pixelRatioFrom=K.pixelRatio;this.pixelRatioTo=x.pixelRatio;this.patternFrom=K.tlbr;this.patternTo=x.tlbr};Uh.prototype.setUniform=function(x,K,S,fa){(K=
"u_pattern_to"===fa?this.patternTo:"u_pattern_from"===fa?this.patternFrom:"u_pixel_ratio_to"===fa?this.pixelRatioTo:"u_pixel_ratio_from"===fa?this.pixelRatioFrom:null)&&x.set(K)};Uh.prototype.getBinding=function(x,K,S){return"u_pattern"===S.substr(0,9)?new bl(x,K):new gk(x,K)};var hg=function(x,K,S,fa){this.expression=x;this.type=S;this.maxValue=0;this.paintVertexAttributes=K.map(function(sa){return{name:"a_"+sa,type:"Float32",components:"color"===S?2:1,offset:0}});this.paintVertexArray=new fa};hg.prototype.populatePaintArray=
function(x,K,S,fa,sa){S=this.paintVertexArray.length;K=this.expression.evaluate(new Oe(0),K,{},fa,[],sa);this.paintVertexArray.resize(x);this._setPaintValue(S,x,K)};hg.prototype.updatePaintArray=function(x,K,S,fa){S=this.expression.evaluate({zoom:0},S,fa);this._setPaintValue(x,K,S)};hg.prototype._setPaintValue=function(x,K,S){if("color"===this.type)for(S=qe(S);x<K;x++)this.paintVertexArray.emplace(x,S[0],S[1]);else{for(;x<K;x++)this.paintVertexArray.emplace(x,S);this.maxValue=Math.max(this.maxValue,
Math.abs(S))}};hg.prototype.upload=function(x){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=x.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};hg.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Qf=function(x,K,S,fa,sa,za){this.expression=x;this.uniformNames=
K.map(function(Ja){return"u_"+Ja+"_t"});this.type=S;this.useIntegerZoom=fa;this.zoom=sa;this.maxValue=0;this.paintVertexAttributes=K.map(function(Ja){return{name:"a_"+Ja,type:"Float32",components:"color"===S?4:2,offset:0}});this.paintVertexArray=new za};Qf.prototype.populatePaintArray=function(x,K,S,fa,sa){S=this.expression.evaluate(new Oe(this.zoom),K,{},fa,[],sa);K=this.expression.evaluate(new Oe(this.zoom+1),K,{},fa,[],sa);fa=this.paintVertexArray.length;this.paintVertexArray.resize(x);this._setPaintValue(fa,
x,S,K)};Qf.prototype.updatePaintArray=function(x,K,S,fa){var sa=this.expression.evaluate({zoom:this.zoom},S,fa);S=this.expression.evaluate({zoom:this.zoom+1},S,fa);this._setPaintValue(x,K,sa,S)};Qf.prototype._setPaintValue=function(x,K,S,fa){if("color"===this.type)for(S=qe(S),fa=qe(fa);x<K;x++)this.paintVertexArray.emplace(x,S[0],S[1],fa[0],fa[1]);else{for(;x<K;x++)this.paintVertexArray.emplace(x,S,fa);this.maxValue=Math.max(this.maxValue,Math.abs(S),Math.abs(fa))}};Qf.prototype.upload=function(x){this.paintVertexArray&&
this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=x.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))};Qf.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};Qf.prototype.setUniform=function(x,K){K=c(this.expression.interpolationFactor(this.useIntegerZoom?Math.floor(K.zoom):K.zoom,this.zoom,this.zoom+
1),0,1);x.set(K)};Qf.prototype.getBinding=function(x,K,S){return new gk(x,K)};var Fg=function(x,K,S,fa,sa,za){this.expression=x;this.type=K;this.useIntegerZoom=S;this.zoom=fa;this.layerId=za;this.zoomInPaintVertexArray=new sa;this.zoomOutPaintVertexArray=new sa};Fg.prototype.populatePaintArray=function(x,K,S){var fa=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(x);this.zoomOutPaintVertexArray.resize(x);this._setPaintValues(fa,x,K.patterns&&K.patterns[this.layerId],S)};Fg.prototype.updatePaintArray=
function(x,K,S,fa,sa){this._setPaintValues(x,K,S.patterns&&S.patterns[this.layerId],sa)};Fg.prototype._setPaintValues=function(x,K,S,fa){if(fa&&S){var sa=fa[S.min],za=fa[S.mid];S=fa[S.max];if(sa&&za&&S)for(;x<K;x++)this.zoomInPaintVertexArray.emplace(x,za.tl[0],za.tl[1],za.br[0],za.br[1],sa.tl[0],sa.tl[1],sa.br[0],sa.br[1],za.pixelRatio,sa.pixelRatio),this.zoomOutPaintVertexArray.emplace(x,za.tl[0],za.tl[1],za.br[0],za.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],za.pixelRatio,S.pixelRatio)}};Fg.prototype.upload=
function(x){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=x.createVertexBuffer(this.zoomInPaintVertexArray,Pi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=x.createVertexBuffer(this.zoomOutPaintVertexArray,Pi.members,this.expression.isStateDependent))};Fg.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy();
this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var vg=function(x,K,S,fa){this.binders={};this.layoutAttributes=fa;this._buffers=[];fa=[];for(var sa in x.paint._values)if(S(sa)){var za=x.paint.get(sa);if(za instanceof qf&&pb(za.property.specification)){var Ja={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],
"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[sa]||[sa.replace(x.type+"-","").replace(/-/g,"_")],Ra=za.value,db=za.property.specification.type,jb=za.property.useIntegerZoom;za=za.property.specification["property-type"];
za="cross-faded"===za||"cross-faded-data-driven"===za;if("constant"===Ra.kind)this.binders[sa]=za?new Uh(Ra.value,Ja):new Xi(Ra.value,Ja,db),fa.push("/u_"+sa);else if("source"===Ra.kind||za){var Bb=re(sa,db,"source");this.binders[sa]=za?new Fg(Ra,db,jb,K,Bb,x.id):new hg(Ra,Ja,db,Bb);fa.push("/a_"+sa)}else za=re(sa,db,"composite"),this.binders[sa]=new Qf(Ra,Ja,db,jb,K,za),fa.push("/z_"+sa)}}this.cacheKey=fa.sort().join("")};vg.prototype.getMaxValue=function(x){x=this.binders[x];return x instanceof
hg||x instanceof Qf?x.maxValue:0};vg.prototype.populatePaintArrays=function(x,K,S,fa,sa){for(var za in this.binders){var Ja=this.binders[za];(Ja instanceof hg||Ja instanceof Qf||Ja instanceof Fg)&&Ja.populatePaintArray(x,K,S,fa,sa)}};vg.prototype.setConstantPatternPositions=function(x,K){for(var S in this.binders){var fa=this.binders[S];fa instanceof Uh&&fa.setConstantPatternPositions(x,K)}};vg.prototype.updatePaintArrays=function(x,K,S,fa,sa){var za=!1,Ja;for(Ja in x)for(var Ra=0,db=K.getPositions(Ja);Ra<
db.length;Ra+=1){var jb=db[Ra],Bb=S.feature(jb.index),Jb;for(Jb in this.binders){var Xb=this.binders[Jb];(Xb instanceof hg||Xb instanceof Qf||Xb instanceof Fg)&&!0===Xb.expression.isStateDependent&&(za=fa.paint.get(Jb),Xb.expression=za.value,Xb.updatePaintArray(jb.start,jb.end,Bb,x[Ja],sa),za=!0)}}return za};vg.prototype.defines=function(){var x=[],K;for(K in this.binders){var S=this.binders[K];(S instanceof Xi||S instanceof Uh)&&x.push.apply(x,S.uniformNames.map(function(fa){return"#define HAS_UNIFORM_"+
fa}))}return x};vg.prototype.getPaintVertexBuffers=function(){return this._buffers};vg.prototype.getUniforms=function(x,K){var S=[],fa;for(fa in this.binders){var sa=this.binders[fa];if(sa instanceof Xi||sa instanceof Uh||sa instanceof Qf)for(var za=0,Ja=sa.uniformNames;za<Ja.length;za+=1){var Ra=Ja[za];if(K[Ra]){var db=sa.getBinding(x,K[Ra],Ra);S.push({name:Ra,property:fa,binding:db})}}}return S};vg.prototype.setUniforms=function(x,K,S,fa){for(x=0;x<K.length;x+=1){var sa=K[x],za=sa.name,Ja=sa.property;
this.binders[Ja].setUniform(sa.binding,fa,S.get(Ja),za)}};vg.prototype.updatePaintBuffers=function(x){for(var K in this._buffers=[],this.binders){var S=this.binders[K];x&&S instanceof Fg?(S=2===x.fromScale?S.zoomInPaintVertexBuffer:S.zoomOutPaintVertexBuffer)&&this._buffers.push(S):(S instanceof hg||S instanceof Qf)&&S.paintVertexBuffer&&this._buffers.push(S.paintVertexBuffer)}};vg.prototype.upload=function(x){for(var K in this.binders){var S=this.binders[K];(S instanceof hg||S instanceof Qf||S instanceof
Fg)&&S.upload(x)}this.updatePaintBuffers()};vg.prototype.destroy=function(){for(var x in this.binders){var K=this.binders[x];(K instanceof hg||K instanceof Qf||K instanceof Fg)&&K.destroy()}};var Gg=function(x,K,S,fa){void 0===fa&&(fa=function(){return!0});this.programConfigurations={};for(var sa=0;sa<K.length;sa+=1){var za=K[sa];this.programConfigurations[za.id]=new vg(za,S,fa,x)}this.needsUpload=!1;this._featureMap=new oh;this._bufferOffset=0};Gg.prototype.populatePaintArrays=function(x,K,S,fa,
sa,za){for(var Ja in this.programConfigurations)this.programConfigurations[Ja].populatePaintArrays(x,K,fa,sa,za);void 0!==K.id&&this._featureMap.add(K.id,S,this._bufferOffset,x);this._bufferOffset=x;this.needsUpload=!0};Gg.prototype.updatePaintArrays=function(x,K,S,fa){for(var sa=0;sa<S.length;sa+=1){var za=S[sa];this.needsUpload=this.programConfigurations[za.id].updatePaintArrays(x,this._featureMap,K,za,fa)||this.needsUpload}};Gg.prototype.get=function(x){return this.programConfigurations[x]};Gg.prototype.upload=
function(x){if(this.needsUpload){for(var K in this.programConfigurations)this.programConfigurations[K].upload(x);this.needsUpload=!1}};Gg.prototype.destroy=function(){for(var x in this.programConfigurations)this.programConfigurations[x].destroy()};Mc("ConstantBinder",Xi);Mc("CrossFadedConstantBinder",Uh);Mc("SourceExpressionBinder",hg);Mc("CrossFadedCompositeBinder",Fg);Mc("CompositeExpressionBinder",Qf);Mc("ProgramConfiguration",vg,{omit:["_buffers"]});Mc("ProgramConfigurationSet",Gg);var $h={min:-1*
Math.pow(2,14),max:Math.pow(2,14)-1},wg=function(x){this.zoom=x.zoom;this.overscaling=x.overscaling;this.layers=x.layers;this.layerIds=this.layers.map(function(K){return K.id});this.index=x.index;this.hasPattern=!1;this.layoutVertexArray=new Bh;this.indexArray=new eh;this.segments=new lf;this.programConfigurations=new Gg(uk,x.layers,x.zoom);this.stateDependentLayerIds=this.layers.filter(function(K){return K.isStateDependent()}).map(function(K){return K.id})};wg.prototype.populate=function(x,K,S){var fa=
this.layers[0],sa=[],za=null;"circle"===fa.type&&(za=fa.layout.get("circle-sort-key"));for(fa=0;fa<x.length;fa+=1){var Ja=x[fa],Ra=Ja.feature,db=Ja.id,jb=Ja.index;Ja=Ja.sourceLayerIndex;var Bb=this.layers[0]._featureFilter.needGeometry,Jb={type:Ra.type,id:db,properties:Ra.properties,geometry:Bb?ve(Ra):[]};this.layers[0]._featureFilter.filter(new Oe(this.zoom),Jb,S)&&(Bb||(Jb.geometry=ve(Ra)),Bb=za?za.evaluate(Jb,{},S):void 0,sa.push({id:db,properties:Ra.properties,type:Ra.type,sourceLayerIndex:Ja,
index:jb,geometry:Jb.geometry,patterns:{},sortKey:Bb}))}za&&sa.sort(function(Xb,Tb){return Xb.sortKey-Tb.sortKey});for(za=0;za<sa.length;za+=1)fa=sa[za],Ra=fa.geometry,db=fa.index,jb=fa.sourceLayerIndex,Ja=x[db].feature,this.addFeature(fa,Ra,db,S),K.featureIndex.insert(Ja,Ra,db,jb,this.index)};wg.prototype.update=function(x,K,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(x,K,this.stateDependentLayers,S)};wg.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};
wg.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};wg.prototype.upload=function(x){this.uploaded||(this.layoutVertexBuffer=x.createVertexBuffer(this.layoutVertexArray,uk),this.indexBuffer=x.createIndexBuffer(this.indexArray));this.programConfigurations.upload(x);this.uploaded=!0};wg.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};
wg.prototype.addFeature=function(x,K,S,fa){for(var sa=0;sa<K.length;sa+=1)for(var za=0,Ja=K[sa];za<Ja.length;za+=1){var Ra=Ja[za],db=Ra.x;Ra=Ra.y;if(!(0>db||8192<=db||0>Ra||8192<=Ra)){var jb=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,x.sortKey),Bb=jb.vertexLength;Se(this.layoutVertexArray,db,Ra,-1,-1);Se(this.layoutVertexArray,db,Ra,1,-1);Se(this.layoutVertexArray,db,Ra,1,1);Se(this.layoutVertexArray,db,Ra,-1,1);this.indexArray.emplaceBack(Bb,Bb+1,Bb+2);this.indexArray.emplaceBack(Bb,
Bb+3,Bb+2);jb.vertexLength+=4;jb.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,x,S,{},fa)};Mc("CircleBucket",wg,{omit:["layers"]});var Bk=new Uf({"circle-sort-key":new ge(Nb.layout_circle["circle-sort-key"])}),Yk={paint:new Uf({"circle-radius":new ge(Nb.paint_circle["circle-radius"]),"circle-color":new ge(Nb.paint_circle["circle-color"]),"circle-blur":new ge(Nb.paint_circle["circle-blur"]),"circle-opacity":new ge(Nb.paint_circle["circle-opacity"]),
"circle-translate":new Ld(Nb.paint_circle["circle-translate"]),"circle-translate-anchor":new Ld(Nb.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ld(Nb.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ld(Nb.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ge(Nb.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ge(Nb.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ge(Nb.paint_circle["circle-stroke-opacity"])}),layout:Bk},
bg="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var x=arguments,K=0,S=arguments.length;S--;)K+=x[S]*x[S];return Math.sqrt(K)});var dh=new bg(3);bg!=Float32Array&&(dh[0]=0,dh[1]=0,dh[2]=0);(function(){var x=new bg(4);bg!=Float32Array&&(x[0]=0,x[1]=0,x[2]=0,x[3]=0)})();var cl=(function(){var x=new bg(2);bg!=Float32Array&&(x[0]=0,x[1]=0)}(),function(x){function K(S){x.call(this,S,Yk)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=
K,K.prototype.createBucket=function(S){return new wg(S)},K.prototype.queryRadius=function(S){return mc("circle-radius",this,S)+mc("circle-stroke-width",this,S)+Ic(this.paint.get("circle-translate"))},K.prototype.queryIntersectsFeature=function(S,fa,sa,za,Ja,Ra,db,jb){S=Yb(S,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ra.angle,db);Ja=this.paint.get("circle-radius").evaluate(fa,sa)+this.paint.get("circle-stroke-width").evaluate(fa,sa);sa=(fa="map"===this.paint.get("circle-pitch-alignment"))?
S:function(bc,ac){return bc.map(function(Bc){return Gb(Bc,ac)})}(S,jb);db=fa?Ja*db:Ja;for(S=0;S<za.length;S+=1){Ja=0;for(var Bb=za[S];Ja<Bb.length;Ja+=1){var Jb=Bb[Ja],Xb=fa?Jb:Gb(Jb,jb),Tb=db;Jb=md([],[Jb.x,Jb.y,0,1],jb);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Tb*=Jb[3]/Ra.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Tb*=Ra.cameraToCenterDistance/Jb[3]),$e(sa,
Xb,Tb))return!0}}return!1},K}(ug)),Aj=function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K}(wg);Mc("HeatmapBucket",Aj,{omit:["layers"]});var ai=function(x,K){Sb(this,x,1,K)};ai.prototype.resize=function(x){zc(this,x,1)};ai.prototype.clone=function(){return new ai({width:this.width,height:this.height},new Uint8Array(this.data))};ai.copy=function(x,K,S,fa,sa){Sc(x,K,S,fa,sa,1)};var Bf=function(x,K){Sb(this,x,4,K)};Bf.prototype.resize=
function(x){zc(this,x,4)};Bf.prototype.replace=function(x,K){K?this.data.set(x):this.data=x instanceof Uint8ClampedArray?new Uint8Array(x.buffer):x};Bf.prototype.clone=function(){return new Bf({width:this.width,height:this.height},new Uint8Array(this.data))};Bf.copy=function(x,K,S,fa,sa){Sc(x,K,S,fa,sa,4)};Mc("AlphaImage",ai);Mc("RGBAImage",Bf);var pf={paint:new Uf({"heatmap-radius":new ge(Nb.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ge(Nb.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ld(Nb.paint_heatmap["heatmap-intensity"]),
"heatmap-color":new bj(Nb.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ld(Nb.paint_heatmap["heatmap-opacity"])})},dl=function(x){function K(S){x.call(this,S,pf);this._updateColorRamp()}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.createBucket=function(S){return new Aj(S)},K.prototype._handleSpecialPaintPropertyUpdate=function(S){"heatmap-color"===S&&this._updateColorRamp()},K.prototype._updateColorRamp=function(){this.colorRamp=Ec(this._transitionablePaint._values["heatmap-color"].value.expression,
"heatmapDensity");this.colorRampTexture=null},K.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},K.prototype.queryRadius=function(){return 0},K.prototype.queryIntersectsFeature=function(){return!1},K.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},K}(ug),yi={paint:new Uf({"hillshade-illumination-direction":new Ld(Nb.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ld(Nb.paint_hillshade["hillshade-illumination-anchor"]),
"hillshade-exaggeration":new Ld(Nb.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ld(Nb.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ld(Nb.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ld(Nb.paint_hillshade["hillshade-accent-color"])})},hk=function(x){function K(S){x.call(this,S,yi)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.hasOffscreenPass=function(){return 0!==
this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},K}(ug),Kk=Cd([{name:"a_pos",components:2,type:"Int16"}],4).members;Pc.deviation=function(x,K,S,fa){var sa=K&&K.length,za=Math.abs(di(x,0,sa?K[0]*S:x.length,S));if(sa){sa=0;for(var Ja=K.length;sa<Ja;sa++)za-=Math.abs(di(x,K[sa]*S,sa<Ja-1?K[sa+1]*S:x.length,S))}for(sa=K=0;sa<fa.length;sa+=3){Ja=fa[sa]*S;var Ra=fa[sa+1]*S,db=fa[sa+2]*S;K+=Math.abs((x[Ja]-x[db])*(x[Ra+1]-x[Ja+1])-(x[Ja]-x[Ra])*(x[db+1]-x[Ja+1]))}return 0===za&&0===K?
0:Math.abs((K-za)/za)};Pc.flatten=function(x){for(var K=x[0][0].length,S={vertices:[],holes:[],dimensions:K},fa=0,sa=0;sa<x.length;sa++){for(var za=0;za<x[sa].length;za++)for(var Ja=0;Ja<K;Ja++)S.vertices.push(x[sa][za][Ja]);0<sa&&S.holes.push(fa+=x[sa-1].length)}return S};Pc.default=Pc;var Pg=function(x){this.zoom=x.zoom;this.overscaling=x.overscaling;this.layers=x.layers;this.layerIds=this.layers.map(function(K){return K.id});this.index=x.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=
new Bh;this.indexArray=new eh;this.indexArray2=new Zh;this.programConfigurations=new Gg(Kk,x.layers,x.zoom);this.segments=new lf;this.segments2=new lf;this.stateDependentLayerIds=this.layers.filter(function(K){return K.isStateDependent()}).map(function(K){return K.id})};Pg.prototype.populate=function(x,K,S){this.hasPattern=ji("fill",this.layers,K);for(var fa=this.layers[0].layout.get("fill-sort-key"),sa=[],za=0;za<x.length;za+=1){var Ja=x[za],Ra=Ja.feature,db=Ja.id,jb=Ja.index;Ja=Ja.sourceLayerIndex;
var Bb=this.layers[0]._featureFilter.needGeometry,Jb={type:Ra.type,id:db,properties:Ra.properties,geometry:Bb?ve(Ra):[]};this.layers[0]._featureFilter.filter(new Oe(this.zoom),Jb,S)&&(Bb||(Jb.geometry=ve(Ra)),Bb=fa?fa.evaluate(Jb,{},S,K.availableImages):void 0,sa.push({id:db,properties:Ra.properties,type:Ra.type,sourceLayerIndex:Ja,index:jb,geometry:Jb.geometry,patterns:{},sortKey:Bb}))}fa&&sa.sort(function(Xb,Tb){return Xb.sortKey-Tb.sortKey});for(fa=0;fa<sa.length;fa+=1)jb=sa[fa],za=jb.geometry,
Ra=jb.index,db=jb.sourceLayerIndex,this.hasPattern?(jb=Oi("fill",this.layers,jb,this.zoom,K),this.patternFeatures.push(jb)):this.addFeature(jb,za,Ra,S,{}),K.featureIndex.insert(x[Ra].feature,za,Ra,db,this.index)};Pg.prototype.update=function(x,K,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(x,K,this.stateDependentLayers,S)};Pg.prototype.addFeatures=function(x,K,S){x=0;for(var fa=this.patternFeatures;x<fa.length;x+=1){var sa=fa[x];this.addFeature(sa,sa.geometry,
sa.index,K,S)}};Pg.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Pg.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Pg.prototype.upload=function(x){this.uploaded||(this.layoutVertexBuffer=x.createVertexBuffer(this.layoutVertexArray,Kk),this.indexBuffer=x.createIndexBuffer(this.indexArray),this.indexBuffer2=x.createIndexBuffer(this.indexArray2));this.programConfigurations.upload(x);this.uploaded=!0};Pg.prototype.destroy=function(){this.layoutVertexBuffer&&
(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())};Pg.prototype.addFeature=function(x,K,S,fa,sa){var za=0;for(K=nj(K,500);za<K.length;za+=1){for(var Ja=K[za],Ra=0,db=0,jb=Ja;db<jb.length;db+=1)Ra+=jb[db].length;db=this.segments.prepareSegment(Ra,this.layoutVertexArray,this.indexArray);jb=db.vertexLength;for(var Bb=[],Jb=[],Xb=0,Tb=Ja;Xb<Tb.length;Xb+=1){var bc=Tb[Xb];if(0!==
bc.length){bc!==Ja[0]&&Jb.push(Bb.length/2);var ac=this.segments2.prepareSegment(bc.length,this.layoutVertexArray,this.indexArray2),Bc=ac.vertexLength;this.layoutVertexArray.emplaceBack(bc[0].x,bc[0].y);this.indexArray2.emplaceBack(Bc+bc.length-1,Bc);Bb.push(bc[0].x);Bb.push(bc[0].y);for(var kd=1;kd<bc.length;kd++)this.layoutVertexArray.emplaceBack(bc[kd].x,bc[kd].y),this.indexArray2.emplaceBack(Bc+kd-1,Bc+kd),Bb.push(bc[kd].x),Bb.push(bc[kd].y);ac.vertexLength+=bc.length;ac.primitiveLength+=bc.length}}Ja=
Pc(Bb,Jb);for(Bb=0;Bb<Ja.length;Bb+=3)this.indexArray.emplaceBack(jb+Ja[Bb],jb+Ja[Bb+1],jb+Ja[Bb+2]);db.vertexLength+=Ra;db.primitiveLength+=Ja.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,x,S,sa,fa)};Mc("FillBucket",Pg,{omit:["layers","patternFeatures"]});var sl=new Uf({"fill-sort-key":new ge(Nb.layout_fill["fill-sort-key"])}),Lk={paint:new Uf({"fill-antialias":new Ld(Nb.paint_fill["fill-antialias"]),"fill-opacity":new ge(Nb.paint_fill["fill-opacity"]),"fill-color":new ge(Nb.paint_fill["fill-color"]),
"fill-outline-color":new ge(Nb.paint_fill["fill-outline-color"]),"fill-translate":new Ld(Nb.paint_fill["fill-translate"]),"fill-translate-anchor":new Ld(Nb.paint_fill["fill-translate-anchor"]),"fill-pattern":new xj(Nb.paint_fill["fill-pattern"])}),layout:sl},Mk=function(x){function K(S){x.call(this,S,Lk)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.recalculate=function(S,fa){x.prototype.recalculate.call(this,S,fa);S=this.paint._values["fill-outline-color"];
"constant"===S.value.kind&&void 0===S.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},K.prototype.createBucket=function(S){return new Pg(S)},K.prototype.queryRadius=function(){return Ic(this.paint.get("fill-translate"))},K.prototype.queryIntersectsFeature=function(S,fa,sa,za,Ja,Ra,db){return cf(Yb(S,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ra.angle,db),za)},K.prototype.isTileClipped=function(){return!0},K}(ug),Nk=Cd([{name:"a_pos",
components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members;Ug.types=["Unknown","Point","LineString","Polygon"];Ug.prototype.loadGeometry=function(){var x=this._pbf;x.pos=this._geometry;for(var K,S=x.readVarint()+x.pos,fa=1,sa=0,za=0,Ja=0,Ra=[];x.pos<S;)if(0>=sa&&(sa=x.readVarint(),fa=7&sa,sa>>=3),sa--,1===fa||2===fa)za+=x.readSVarint(),Ja+=x.readSVarint(),1===fa&&(K&&Ra.push(K),K=[]),K.push(new Vd(za,Ja));else{if(7!==fa)throw Error("unknown command "+fa);K&&K.push(K[0].clone())}return K&&
Ra.push(K),Ra};Ug.prototype.bbox=function(){var x=this._pbf;x.pos=this._geometry;for(var K=x.readVarint()+x.pos,S=1,fa=0,sa=0,za=0,Ja=1/0,Ra=-1/0,db=1/0,jb=-1/0;x.pos<K;)if(0>=fa&&(fa=x.readVarint(),S=7&fa,fa>>=3),fa--,1===S||2===S)(sa+=x.readSVarint())<Ja&&(Ja=sa),sa>Ra&&(Ra=sa),(za+=x.readSVarint())<db&&(db=za),za>jb&&(jb=za);else if(7!==S)throw Error("unknown command "+S);return[Ja,db,Ra,jb]};Ug.prototype.toGeoJSON=function(x,K,S){function fa(db){for(var jb=0;jb<db.length;jb++){var Bb=db[jb];db[jb]=
[360*(Bb.x+za)/sa-180,360/Math.PI*Math.atan(Math.exp((180-360*(Bb.y+Ja)/sa)*Math.PI/180))-90]}}var sa=this.extent*Math.pow(2,S),za=this.extent*x,Ja=this.extent*K;K=this.loadGeometry();S=Ug.types[this.type];switch(this.type){case 1:var Ra=[];for(x=0;x<K.length;x++)Ra[x]=K[x][0];fa(K=Ra);break;case 2:for(x=0;x<K.length;x++)fa(K[x]);break;case 3:for(K=function(db){var jb=db.length;if(1>=jb)return[db];for(var Bb,Jb,Xb=[],Tb=0;Tb<jb;Tb++){for(var bc,ac=bc=void 0,Bc=db[Tb],kd=0,pd=0,bd=Bc.length,Ed=bd-
1;pd<bd;Ed=pd++)kd+=((bc=Bc[Ed]).x-(ac=Bc[pd]).x)*(ac.y+bc.y);bc=kd;0!==bc&&(void 0===Jb&&(Jb=0>bc),Jb===0>bc?(Bb&&Xb.push(Bb),Bb=[db[Tb]]):Bb.push(db[Tb]))}return Bb&&Xb.push(Bb),Xb}(K),x=0;x<K.length;x++)for(Ra=0;Ra<K[x].length;Ra++)fa(K[x][Ra])}1===K.length?K=K[0]:S="Multi"+S;x={type:"Feature",geometry:{type:S,coordinates:K},properties:this.properties};return"id"in this&&(x.id=this.id),x};var Ok=Sj;Sj.prototype.feature=function(x){if(0>x||x>=this._features.length)throw Error("feature index out of bounds");
this._pbf.pos=this._features[x];x=this._pbf.readVarint()+this._pbf.pos;return new Ug(this._pbf,x,this.extent,this._keys,this._values)};var vh={VectorTile:function(x,K){this.layers=x.readFields(Eh,{},K)},VectorTileFeature:Ug,VectorTileLayer:Ok},Pk=vh.VectorTileFeature.types,Qk=Math.pow(2,13),Ng=function(x){this.zoom=x.zoom;this.overscaling=x.overscaling;this.layers=x.layers;this.layerIds=this.layers.map(function(K){return K.id});this.index=x.index;this.hasPattern=!1;this.layoutVertexArray=new kh;this.indexArray=
new eh;this.programConfigurations=new Gg(Nk,x.layers,x.zoom);this.segments=new lf;this.stateDependentLayerIds=this.layers.filter(function(K){return K.isStateDependent()}).map(function(K){return K.id})};Ng.prototype.populate=function(x,K,S){this.features=[];this.hasPattern=ji("fill-extrusion",this.layers,K);for(var fa=0;fa<x.length;fa+=1){var sa=x[fa],za=sa.feature,Ja=sa.id,Ra=sa.index;sa=sa.sourceLayerIndex;var db=this.layers[0]._featureFilter.needGeometry,jb={type:za.type,id:Ja,properties:za.properties,
geometry:db?ve(za):[]};this.layers[0]._featureFilter.filter(new Oe(this.zoom),jb,S)&&(Ja={id:Ja,sourceLayerIndex:sa,index:Ra,geometry:db?jb.geometry:ve(za),properties:za.properties,type:za.type,patterns:{}},void 0!==za.id&&(Ja.id=za.id),this.hasPattern?this.features.push(Oi("fill-extrusion",this.layers,Ja,this.zoom,K)):this.addFeature(Ja,Ja.geometry,Ra,S,{}),K.featureIndex.insert(za,Ja.geometry,Ra,sa,this.index,!0))}};Ng.prototype.addFeatures=function(x,K,S){x=0;for(var fa=this.features;x<fa.length;x+=
1){var sa=fa[x];this.addFeature(sa,sa.geometry,sa.index,K,S)}};Ng.prototype.update=function(x,K,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(x,K,this.stateDependentLayers,S)};Ng.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Ng.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Ng.prototype.upload=function(x){this.uploaded||(this.layoutVertexBuffer=x.createVertexBuffer(this.layoutVertexArray,
Nk),this.indexBuffer=x.createIndexBuffer(this.indexArray));this.programConfigurations.upload(x);this.uploaded=!0};Ng.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Ng.prototype.addFeature=function(x,K,S,fa,sa){var za=0;for(K=nj(K,500);za<K.length;za+=1){for(var Ja=K[za],Ra=0,db=0,jb=Ja;db<jb.length;db+=1)Ra+=jb[db].length;db=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray);jb=0;for(var Bb=Ja;jb<Bb.length;jb+=1){var Jb=Bb[jb];if(0!==Jb.length&&!((pd=Jb).every(function(bd){return 0>bd.x})||pd.every(function(bd){return 8192<bd.x})||pd.every(function(bd){return 0>bd.y})||pd.every(function(bd){return 8192<bd.y})))for(var Xb=0,Tb=0;Tb<Jb.length;Tb++){var bc=Jb[Tb];if(1<=Tb){var ac=Jb[Tb-1];if(!(bc.x===ac.x&&(0>bc.x||8192<bc.x)||bc.y===ac.y&&(0>bc.y||8192<bc.y))){db.vertexLength+4>lf.MAX_VERTEX_ARRAY_LENGTH&&(db=this.segments.prepareSegment(4,this.layoutVertexArray,
this.indexArray));var Bc=bc.sub(ac)._perp()._unit(),kd=ac.dist(bc);32768<Xb+kd&&(Xb=0);li(this.layoutVertexArray,bc.x,bc.y,Bc.x,Bc.y,0,0,Xb);li(this.layoutVertexArray,bc.x,bc.y,Bc.x,Bc.y,0,1,Xb);li(this.layoutVertexArray,ac.x,ac.y,Bc.x,Bc.y,0,0,Xb+=kd);li(this.layoutVertexArray,ac.x,ac.y,Bc.x,Bc.y,0,1,Xb);bc=db.vertexLength;this.indexArray.emplaceBack(bc,bc+2,bc+1);this.indexArray.emplaceBack(bc+1,bc+2,bc+3);db.vertexLength+=4;db.primitiveLength+=2}}}}if(db.vertexLength+Ra>lf.MAX_VERTEX_ARRAY_LENGTH&&
(db=this.segments.prepareSegment(Ra,this.layoutVertexArray,this.indexArray)),"Polygon"===Pk[x.type]){Bb=[];Jb=[];jb=db.vertexLength;Xb=0;for(Tb=Ja;Xb<Tb.length;Xb+=1)if(bc=Tb[Xb],0!==bc.length)for(bc!==Ja[0]&&Jb.push(Bb.length/2),ac=0;ac<bc.length;ac++)Bc=bc[ac],li(this.layoutVertexArray,Bc.x,Bc.y,0,0,1,1,0),Bb.push(Bc.x),Bb.push(Bc.y);Ja=Pc(Bb,Jb);for(Bb=0;Bb<Ja.length;Bb+=3)this.indexArray.emplaceBack(jb+Ja[Bb],jb+Ja[Bb+2],jb+Ja[Bb+1]);db.primitiveLength+=Ja.length/3;db.vertexLength+=Ra}}var pd;
this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,x,S,sa,fa)};Mc("FillExtrusionBucket",Ng,{omit:["layers","features"]});var el={paint:new Uf({"fill-extrusion-opacity":new Ld(Nb["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ge(Nb["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ld(Nb["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ld(Nb["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),
"fill-extrusion-pattern":new xj(Nb["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ge(Nb["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ge(Nb["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ld(Nb["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},tl=function(x){function K(S){x.call(this,S,el)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.createBucket=
function(S){return new Ng(S)},K.prototype.queryRadius=function(){return Ic(this.paint.get("fill-extrusion-translate"))},K.prototype.is3D=function(){return!0},K.prototype.queryIntersectsFeature=function(S,fa,sa,za,Ja,Ra,db,jb){Ja=Yb(S,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ra.angle,db);S=this.paint.get("fill-extrusion-height").evaluate(fa,sa);fa=this.paint.get("fill-extrusion-base").evaluate(fa,sa);sa=function(Bb,Jb,Xb,Tb){Xb=[];for(Tb=0;Tb<Bb.length;Tb+=
1){var bc=Bb[Tb];bc=[bc.x,bc.y,0,1];md(bc,bc,Jb);Xb.push(new Vd(bc[0]/bc[3],bc[1]/bc[3]))}return Xb}(Ja,jb);za=function(Bb,Jb,Xb,Tb){var bc=[],ac=[],Bc=Tb[8]*Jb,kd=Tb[9]*Jb,pd=Tb[10]*Jb;Jb*=Tb[11];var bd=Tb[8]*Xb,Ed=Tb[9]*Xb,Bd=Tb[10]*Xb;Xb*=Tb[11];for(var Jd=0;Jd<Bb.length;Jd+=1){for(var Rd=[],Xd=[],be=0,ce=Bb[Jd];be<ce.length;be+=1){var Ud=ce[be],Zd=Ud.x,pe=Ud.y;Ud=Tb[0]*Zd+Tb[4]*pe+Tb[12];var Sd=Tb[1]*Zd+Tb[5]*pe+Tb[13],Od=Tb[2]*Zd+Tb[6]*pe+Tb[14],Td=Tb[3]*Zd+Tb[7]*pe+Tb[15];Zd=Od+pd;pe=Td+Jb;
var Be=Ud+bd,Xe=Sd+Ed;Od+=Bd;Td+=Xb;Ud=new Vd((Ud+Bc)/pe,(Sd+kd)/pe);Ud.z=Zd/pe;Rd.push(Ud);Ud=new Vd(Be/Td,Xe/Td);Ud.z=Od/Td;Xd.push(Ud)}bc.push(Rd);ac.push(Xd)}return[bc,ac]}(za,fa,S,jb);return function(Bb,Jb,Xb){var Tb=1/0;cf(Xb,Jb)&&(Tb=Hh(Xb,Jb[0]));for(var bc=0;bc<Jb.length;bc++)for(var ac=Jb[bc],Bc=Bb[bc],kd=0;kd<ac.length-1;kd++){var pd=ac[kd];pd=[pd,ac[kd+1],Bc[kd+1],Bc[kd],pd];gf(Xb,pd)&&(Tb=Math.min(Tb,Hh(Xb,pd)))}return Tb!==1/0&&Tb}(za[0],za[1],sa)},K}(ug),R=Cd([{name:"a_pos_normal",
components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,ia=vh.VectorTileFeature.types,ta=Math.cos(Math.PI/180*37.5),Aa=Math.pow(2,14)/.5,Ba=function(x){this.zoom=x.zoom;this.overscaling=x.overscaling;this.layers=x.layers;this.layerIds=this.layers.map(function(K){return K.id});this.index=x.index;this.hasPattern=!1;this.patternFeatures=[];this.layoutVertexArray=new Jg;this.indexArray=new eh;this.programConfigurations=new Gg(R,x.layers,x.zoom);this.segments=new lf;this.stateDependentLayerIds=
this.layers.filter(function(K){return K.isStateDependent()}).map(function(K){return K.id})};Ba.prototype.populate=function(x,K,S){this.hasPattern=ji("line",this.layers,K);for(var fa=this.layers[0].layout.get("line-sort-key"),sa=[],za=0;za<x.length;za+=1){var Ja=x[za],Ra=Ja.feature,db=Ja.id,jb=Ja.index;Ja=Ja.sourceLayerIndex;var Bb=this.layers[0]._featureFilter.needGeometry,Jb={type:Ra.type,id:db,properties:Ra.properties,geometry:Bb?ve(Ra):[]};this.layers[0]._featureFilter.filter(new Oe(this.zoom),
Jb,S)&&(Bb||(Jb.geometry=ve(Ra)),Bb=fa?fa.evaluate(Jb,{},S):void 0,sa.push({id:db,properties:Ra.properties,type:Ra.type,sourceLayerIndex:Ja,index:jb,geometry:Jb.geometry,patterns:{},sortKey:Bb}))}fa&&sa.sort(function(Xb,Tb){return Xb.sortKey-Tb.sortKey});for(fa=0;fa<sa.length;fa+=1)jb=sa[fa],za=jb.geometry,Ra=jb.index,db=jb.sourceLayerIndex,this.hasPattern?(jb=Oi("line",this.layers,jb,this.zoom,K),this.patternFeatures.push(jb)):this.addFeature(jb,za,Ra,S,{}),K.featureIndex.insert(x[Ra].feature,za,
Ra,db,this.index)};Ba.prototype.update=function(x,K,S){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(x,K,this.stateDependentLayers,S)};Ba.prototype.addFeatures=function(x,K,S){x=0;for(var fa=this.patternFeatures;x<fa.length;x+=1){var sa=fa[x];this.addFeature(sa,sa.geometry,sa.index,K,S)}};Ba.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length};Ba.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload};Ba.prototype.upload=
function(x){this.uploaded||(this.layoutVertexBuffer=x.createVertexBuffer(this.layoutVertexArray,R),this.indexBuffer=x.createIndexBuffer(this.indexArray));this.programConfigurations.upload(x);this.uploaded=!0};Ba.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())};Ba.prototype.addFeature=function(x,K,S,fa,sa){var za=this.layers[0].layout,Ja=za.get("line-join").evaluate(x,{}),
Ra=za.get("line-cap"),db=za.get("line-miter-limit");za=za.get("line-round-limit");for(var jb=0;jb<K.length;jb+=1)this.addLine(K[jb],x,Ja,Ra,db,za);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,x,S,sa,fa)};Ba.prototype.addLine=function(x,K,S,fa,sa,za){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,K.properties&&K.properties.hasOwnProperty("mapbox_clip_start")&&K.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+K.properties.mapbox_clip_start;
this.clipEnd=+K.properties.mapbox_clip_end;for(var Ja=0;Ja<x.length-1;Ja++)this.totalDistance+=x[Ja].dist(x[Ja+1]);this.updateScaledDistance()}K="Polygon"===ia[K.type];for(Ja=x.length;2<=Ja&&x[Ja-1].equals(x[Ja-2]);)Ja--;for(var Ra=0;Ra<Ja-1&&x[Ra].equals(x[Ra+1]);)Ra++;if(!(Ja<(K?3:2))){"bevel"===S&&(sa=1.05);var db,jb=16>=this.overscaling?122880/(512*this.overscaling):0,Bb=this.segments.prepareSegment(10*Ja,this.layoutVertexArray,this.indexArray),Jb=void 0,Xb=void 0,Tb=void 0,bc=void 0;this.e1=
this.e2=-1;K&&(bc=x[Ra].sub(db=x[Ja-2])._unit()._perp());for(var ac=Ra;ac<Ja;ac++)if(!(Xb=ac===Ja-1?K?x[Ra+1]:void 0:x[ac+1])||!x[ac].equals(Xb)){bc&&(Tb=bc);db&&(Jb=db);db=x[ac];bc=Xb?Xb.sub(db)._unit()._perp():Tb;var Bc=(Tb=Tb||bc).add(bc);0===Bc.x&&0===Bc.y||Bc._unit();var kd=Tb.x*bc.x+Tb.y*bc.y,pd=Bc.x*bc.x+Bc.y*bc.y,bd=0!==pd?1/pd:1/0,Ed=2*Math.sqrt(2-2*pd);pd=pd<ta&&Jb&&Xb;var Bd=0<Tb.x*bc.y-Tb.y*bc.x;if(pd&&ac>Ra){var Jd=db.dist(Jb);Jd>2*jb&&(Jd=db.sub(db.sub(Jb)._mult(jb/Jd)._round()),this.updateDistance(Jb,
Jd),this.addCurrentVertex(Jd,Tb,0,0,Bb),Jb=Jd)}var Rd=Jb&&Xb;Jd=Rd?S:K?"butt":fa;if(Rd&&"round"===Jd&&(bd<za?Jd="miter":2>=bd&&(Jd="fakeround")),"miter"===Jd&&bd>sa&&(Jd="bevel"),"bevel"===Jd&&(2<bd&&(Jd="flipbevel"),bd<sa&&(Jd="miter")),Jb&&this.updateDistance(Jb,db),"miter"===Jd)Bc._mult(bd),this.addCurrentVertex(db,Bc,0,0,Bb);else if("flipbevel"===Jd)100<bd?Bc=bc.mult(-1):(kd=bd*Tb.add(bc).mag()/Tb.sub(bc).mag(),Bc._perp()._mult(kd*(Bd?-1:1))),this.addCurrentVertex(db,Bc,0,0,Bb),this.addCurrentVertex(db,
Bc.mult(-1),0,0,Bb);else if("bevel"===Jd||"fakeround"===Jd){bd=-Math.sqrt(bd*bd-1);Bc=Bd?bd:0;bd=Bd?0:bd;if(Jb&&this.addCurrentVertex(db,Tb,Bc,bd,Bb),"fakeround"===Jd)for(Ed=Math.round(180*Ed/Math.PI/20),Jd=1;Jd<Ed;Jd++){Rd=Jd/Ed;if(.5!==Rd){var Xd=Rd-.5;Rd+=Rd*Xd*(Rd-1)*((1.0904+kd*(kd*(3.55645-1.43519*kd)-3.2452))*Xd*Xd+(.848013+kd*(.215638*kd-1.06021)))}Rd=bc.sub(Tb)._mult(Rd)._add(Tb)._unit()._mult(Bd?-1:1);this.addHalfVertex(db,Rd.x,Rd.y,!1,Bd,0,Bb)}Xb&&this.addCurrentVertex(db,bc,-Bc,-bd,Bb)}else"butt"===
Jd?this.addCurrentVertex(db,Bc,0,0,Bb):"square"===Jd?(kd=Jb?1:-1,this.addCurrentVertex(db,Bc,kd,kd,Bb)):"round"===Jd&&(Jb&&(this.addCurrentVertex(db,Tb,0,0,Bb),this.addCurrentVertex(db,Tb,1,1,Bb,!0)),Xb&&(this.addCurrentVertex(db,bc,-1,-1,Bb,!0),this.addCurrentVertex(db,bc,0,0,Bb)));pd&&ac<Ja-1&&(pd=db.dist(Xb),pd>2*jb&&(pd=db.add(Xb.sub(db)._mult(jb/pd)._round()),this.updateDistance(db,pd),this.addCurrentVertex(pd,bc,0,0,Bb),db=pd))}}};Ba.prototype.addCurrentVertex=function(x,K,S,fa,sa,za){void 0===
za&&(za=!1);var Ja=K.y*fa-K.x,Ra=-K.y-K.x*fa;this.addHalfVertex(x,K.x+K.y*S,K.y-K.x*S,za,!1,S,sa);this.addHalfVertex(x,Ja,Ra,za,!0,-fa,sa);this.distance>Aa/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(x,K,S,fa,sa,za))};Ba.prototype.addHalfVertex=function(x,K,S,fa,sa,za,Ja){var Ra=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((x.x<<1)+(fa?1:0),(x.y<<1)+(sa?1:0),Math.round(63*K)+128,Math.round(63*S)+128,1+(0===za?0:0>za?-1:1)|(63&Ra)<<2,Ra>>6);x=Ja.vertexLength++;0<=
this.e1&&0<=this.e2&&(this.indexArray.emplaceBack(this.e1,this.e2,x),Ja.primitiveLength++);sa?this.e2=x:this.e1=x};Ba.prototype.updateScaledDistance=function(){this.scaledDistance=0<this.totalDistance?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Aa-1):this.distance};Ba.prototype.updateDistance=function(x,K){this.distance+=x.dist(K);this.updateScaledDistance()};Mc("LineBucket",Ba,{omit:["layers","patternFeatures"]});var Ha=new Uf({"line-cap":new Ld(Nb.layout_line["line-cap"]),
"line-join":new ge(Nb.layout_line["line-join"]),"line-miter-limit":new Ld(Nb.layout_line["line-miter-limit"]),"line-round-limit":new Ld(Nb.layout_line["line-round-limit"]),"line-sort-key":new ge(Nb.layout_line["line-sort-key"])}),Ua={paint:new Uf({"line-opacity":new ge(Nb.paint_line["line-opacity"]),"line-color":new ge(Nb.paint_line["line-color"]),"line-translate":new Ld(Nb.paint_line["line-translate"]),"line-translate-anchor":new Ld(Nb.paint_line["line-translate-anchor"]),"line-width":new ge(Nb.paint_line["line-width"]),
"line-gap-width":new ge(Nb.paint_line["line-gap-width"]),"line-offset":new ge(Nb.paint_line["line-offset"]),"line-blur":new ge(Nb.paint_line["line-blur"]),"line-dasharray":new xh(Nb.paint_line["line-dasharray"]),"line-pattern":new xj(Nb.paint_line["line-pattern"]),"line-gradient":new bj(Nb.paint_line["line-gradient"])}),layout:Ha},Oa=new (function(x){function K(){x.apply(this,arguments)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.possiblyEvaluate=
function(S,fa){return fa=new Oe(Math.floor(fa.zoom),{now:fa.now,fadeDuration:fa.fadeDuration,zoomHistory:fa.zoomHistory,transition:fa.transition}),x.prototype.possiblyEvaluate.call(this,S,fa)},K.prototype.evaluate=function(S,fa,sa,za){return fa=g({},fa,{zoom:Math.floor(fa.zoom)}),x.prototype.evaluate.call(this,S,fa,sa,za)},K}(ge))(Ua.paint.properties["line-width"].specification);Oa.useIntegerZoom=!0;var Sa=function(x){function K(S){x.call(this,S,Ua)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&
x.prototype)).constructor=K,K.prototype._handleSpecialPaintPropertyUpdate=function(S){"line-gradient"===S&&this._updateGradient()},K.prototype._updateGradient=function(){this.gradient=Ec(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress");this.gradientTexture=null},K.prototype.recalculate=function(S,fa){x.prototype.recalculate.call(this,S,fa);this.paint._values["line-floorwidth"]=Oa.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,S)},K.prototype.createBucket=
function(S){return new Ba(S)},K.prototype.queryRadius=function(S){var fa=ni(mc("line-width",this,S),mc("line-gap-width",this,S));S=mc("line-offset",this,S);return fa/2+Math.abs(S)+Ic(this.paint.get("line-translate"))},K.prototype.queryIntersectsFeature=function(S,fa,sa,za,Ja,Ra,db){S=Yb(S,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ra.angle,db);Ja=db/2*ni(this.paint.get("line-width").evaluate(fa,sa),this.paint.get("line-gap-width").evaluate(fa,sa));fa=this.paint.get("line-offset").evaluate(fa,
sa);return fa&&(za=function(jb,Bb){for(var Jb=[],Xb=new Vd(0,0),Tb=0;Tb<jb.length;Tb++){for(var bc=jb[Tb],ac=[],Bc=0;Bc<bc.length;Bc++){var kd=bc[Bc],pd=bc[Bc+1],bd=0===Bc?Xb:kd.sub(bc[Bc-1])._unit()._perp();pd=Bc===bc.length-1?Xb:pd.sub(kd)._unit()._perp();bd=bd._add(pd)._unit();bd._mult(1/(bd.x*pd.x+bd.y*pd.y));ac.push(bd._mult(Bb)._add(kd))}Jb.push(ac)}return Jb}(za,fa*db)),function(jb,Bb,Jb){for(var Xb=0;Xb<Bb.length;Xb++){var Tb=Bb[Xb];if(3<=jb.length)for(var bc=0;bc<Tb.length;bc++)if(Hb(jb,
Tb[bc]))return!0;a:{bc=jb;var ac=Jb;if(1<bc.length){if(Te(bc,Tb)){bc=!0;break a}for(var Bc=0;Bc<Tb.length;Bc++)if(Ma(Tb[Bc],bc,ac)){bc=!0;break a}}for(Bc=0;Bc<bc.length;Bc++)if(Ma(bc[Bc],Tb,ac)){bc=!0;break a}bc=!1}if(bc)return!0}return!1}(S,za,Ja)},K.prototype.isTileClipped=function(){return!0},K}(ug),cb=Cd([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ib=Cd([{name:"a_projected_pos",components:3,type:"Float32"}],
4),wb=(Cd([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Cd([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Eb=(Cd([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Cd([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",
components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Lb=Cd([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Cd([{name:"triangle",components:3,type:"Uint16"}]);Cd([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},
{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]);Cd([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},
{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},
{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]);Cd([{type:"Float32",
name:"offsetX"}]);Cd([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Mb={"!":"︕","#":"＃",$:"＄","%":"％","\x26":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","\x3c":"︿","\x3d":"＝","\x3e":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑",
"。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Zb=function(x,K,S,fa,sa){var za=8*sa-fa-1;var Ja=(1<<za)-1,Ra=Ja>>1,db=-7;sa=S?sa-1:0;var jb=S?-1:1,Bb=x[K+sa];sa+=jb;S=Bb&(1<<-db)-1;Bb>>=-db;for(db+=za;0<db;S=256*S+x[K+sa],sa+=jb,db-=8);za=S&(1<<-db)-1;
S>>=-db;for(db+=fa;0<db;za=256*za+x[K+sa],sa+=jb,db-=8);if(0===S)S=1-Ra;else{if(S===Ja)return za?NaN:1/0*(Bb?-1:1);za+=Math.pow(2,fa);S-=Ra}return(Bb?-1:1)*za*Math.pow(2,S-fa)},cc=function(x,K,S,fa,sa,za){var Ja,Ra,db,jb=8*za-sa-1,Bb=(1<<jb)-1,Jb=Bb>>1,Xb=23===sa?Math.pow(2,-24)-Math.pow(2,-77):0;za=fa?0:za-1;fa=fa?1:-1;var Tb=0>K||0===K&&0>1/K?1:0;K=Math.abs(K);for(isNaN(K)||K===1/0?(Ra=isNaN(K)?1:0,Ja=Bb):(Ja=Math.floor(Math.log(K)/Math.LN2),1>K*(db=Math.pow(2,-Ja))&&(Ja--,db*=2),2<=(K+=1<=Ja+Jb?
Xb/db:Xb*Math.pow(2,1-Jb))*db&&(Ja++,db/=2),Ja+Jb>=Bb?(Ra=0,Ja=Bb):1<=Ja+Jb?(Ra=(K*db-1)*Math.pow(2,sa),Ja+=Jb):(Ra=K*Math.pow(2,Jb-1)*Math.pow(2,sa),Ja=0));8<=sa;x[S+za]=255&Ra,za+=fa,Ra/=256,sa-=8);Ja=Ja<<sa|Ra;for(jb+=sa;0<jb;x[S+za]=255&Ja,za+=fa,Ja/=256,jb-=8);x[S+za-fa]|=128*Tb};Ee.Varint=0;Ee.Fixed64=1;Ee.Bytes=2;Ee.Fixed32=5;var nc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");Ee.prototype={destroy:function(){this.buf=null},readFields:function(x,K,S){for(S=S||this.length;this.pos<
S;){var fa=this.readVarint(),sa=fa>>3,za=this.pos;this.type=7&fa;x(sa,K,this);this.pos===za&&this.skip(fa)}return K},readMessage:function(x,K){return this.readFields(x,K,this.readVarint()+this.pos)},readFixed32:function(){var x=Lh(this.buf,this.pos);return this.pos+=4,x},readSFixed32:function(){var x=zg(this.buf,this.pos);return this.pos+=4,x},readFixed64:function(){var x=Lh(this.buf,this.pos)+4294967296*Lh(this.buf,this.pos+4);return this.pos+=8,x},readSFixed64:function(){var x=Lh(this.buf,this.pos)+
4294967296*zg(this.buf,this.pos+4);return this.pos+=8,x},readFloat:function(){var x=Zb(this.buf,this.pos,!0,23,4);return this.pos+=4,x},readDouble:function(){var x=Zb(this.buf,this.pos,!0,52,8);return this.pos+=8,x},readVarint:function(x){var K,S=this.buf;var fa=127&(K=S[this.pos++]);if(128>K)x=fa;else if(fa|=(127&(K=S[this.pos++]))<<7,128>K)x=fa;else if(fa|=(127&(K=S[this.pos++]))<<14,128>K)x=fa;else if(fa|=(127&(K=S[this.pos++]))<<21,128>K)x=fa;else{fa|=(15&S[this.pos])<<28;var sa,za;K=this.buf;
if((sa=(112&(za=K[this.pos++]))>>4,128>za)||(sa|=(127&(za=K[this.pos++]))<<3,128>za)||(sa|=(127&(za=K[this.pos++]))<<10,128>za)||(sa|=(127&(za=K[this.pos++]))<<17,128>za)||(sa|=(127&(za=K[this.pos++]))<<24,128>za)||(sa|=(1&(za=K[this.pos++]))<<31,128>za))x=x?4294967296*sa+(fa>>>0):4294967296*(sa>>>0)+(fa>>>0);else throw Error("Expected varint not more than 10 bytes");}return x},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var x=this.readVarint();return 1==x%2?(x+1)/-2:
x/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var x=this.readVarint()+this.pos,K=this.pos;this.pos=x;if(12<=x-K&&nc)x=nc.decode(this.buf.subarray(K,x));else{for(var S=this.buf,fa="";K<x;){var sa,za,Ja,Ra=S[K],db=null,jb=239<Ra?4:223<Ra?3:191<Ra?2:1;if(K+jb>x)break;1===jb?128>Ra&&(db=Ra):2===jb?128==(192&(sa=S[K+1]))&&127>=(db=(31&Ra)<<6|63&sa)&&(db=null):3===jb?(za=S[K+2],128==(192&(sa=S[K+1]))&&128==(192&za)&&(2047>=(db=(15&Ra)<<12|(63&sa)<<6|63&za)||55296<=db&&57343>=
db)&&(db=null)):4===jb&&(za=S[K+2],Ja=S[K+3],128==(192&(sa=S[K+1]))&&128==(192&za)&&128==(192&Ja)&&(65535>=(db=(15&Ra)<<18|(63&sa)<<12|(63&za)<<6|63&Ja)||1114112<=db)&&(db=null));null===db?(db=65533,jb=1):65535<db&&(db-=65536,fa+=String.fromCharCode(db>>>10&1023|55296),db=56320|1023&db);fa+=String.fromCharCode(db);K+=jb}x=fa}return x},readBytes:function(){var x=this.readVarint()+this.pos,K=this.buf.subarray(this.pos,x);return this.pos=x,K},readPackedVarint:function(x,K){if(this.type!==Ee.Bytes)return x.push(this.readVarint(K));
var S=Wf(this);for(x=x||[];this.pos<S;)x.push(this.readVarint(K));return x},readPackedSVarint:function(x){if(this.type!==Ee.Bytes)return x.push(this.readSVarint());var K=Wf(this);for(x=x||[];this.pos<K;)x.push(this.readSVarint());return x},readPackedBoolean:function(x){if(this.type!==Ee.Bytes)return x.push(this.readBoolean());var K=Wf(this);for(x=x||[];this.pos<K;)x.push(this.readBoolean());return x},readPackedFloat:function(x){if(this.type!==Ee.Bytes)return x.push(this.readFloat());var K=Wf(this);
for(x=x||[];this.pos<K;)x.push(this.readFloat());return x},readPackedDouble:function(x){if(this.type!==Ee.Bytes)return x.push(this.readDouble());var K=Wf(this);for(x=x||[];this.pos<K;)x.push(this.readDouble());return x},readPackedFixed32:function(x){if(this.type!==Ee.Bytes)return x.push(this.readFixed32());var K=Wf(this);for(x=x||[];this.pos<K;)x.push(this.readFixed32());return x},readPackedSFixed32:function(x){if(this.type!==Ee.Bytes)return x.push(this.readSFixed32());var K=Wf(this);for(x=x||[];this.pos<
K;)x.push(this.readSFixed32());return x},readPackedFixed64:function(x){if(this.type!==Ee.Bytes)return x.push(this.readFixed64());var K=Wf(this);for(x=x||[];this.pos<K;)x.push(this.readFixed64());return x},readPackedSFixed64:function(x){if(this.type!==Ee.Bytes)return x.push(this.readSFixed64());var K=Wf(this);for(x=x||[];this.pos<K;)x.push(this.readSFixed64());return x},skip:function(x){x&=7;if(x===Ee.Varint)for(;127<this.buf[this.pos++];);else if(x===Ee.Bytes)this.pos=this.readVarint()+this.pos;else if(x===
Ee.Fixed32)this.pos+=4;else{if(x!==Ee.Fixed64)throw Error("Unimplemented type: "+x);this.pos+=8}},writeTag:function(x,K){this.writeVarint(x<<3|K)},realloc:function(x){for(var K=this.length||16;K<this.pos+x;)K*=2;K!==this.length&&(x=new Uint8Array(K),x.set(this.buf),this.buf=x,this.length=K)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(x){this.realloc(4);nh(this.buf,x,this.pos);this.pos+=4},writeSFixed32:function(x){this.realloc(4);
nh(this.buf,x,this.pos);this.pos+=4},writeFixed64:function(x){this.realloc(8);nh(this.buf,-1&x,this.pos);nh(this.buf,Math.floor(1/4294967296*x),this.pos+4);this.pos+=8},writeSFixed64:function(x){this.realloc(8);nh(this.buf,-1&x,this.pos);nh(this.buf,Math.floor(1/4294967296*x),this.pos+4);this.pos+=8},writeVarint:function(x){268435455<(x=+x||0)||0>x?function(K,S){var fa,sa;if(0<=K?(fa=K%4294967296|0,sa=K/4294967296|0):(sa=~(-K/4294967296),4294967295^(fa=~(-K%4294967296))?fa=fa+1|0:(fa=0,sa=sa+1|0)),
1.8446744073709552E19<=K||-1.8446744073709552E19>K)throw Error("Given varint doesn't fit into 10 bytes");S.realloc(10);(function(za,Ja,Ra){Ra.buf[Ra.pos++]=127&za|128;za>>>=7;Ra.buf[Ra.pos++]=127&za|128;za>>>=7;Ra.buf[Ra.pos++]=127&za|128;za>>>=7;Ra.buf[Ra.pos++]=127&za|128;Ra.buf[Ra.pos]=127&za>>>7})(fa,0,S);(function(za,Ja){Ja.buf[Ja.pos++]|=(7&za)<<4|((za>>>=3)?128:0);za&&(Ja.buf[Ja.pos++]=127&za|((za>>>=7)?128:0),za&&(Ja.buf[Ja.pos++]=127&za|((za>>>=7)?128:0),za&&(Ja.buf[Ja.pos++]=127&za|((za>>>=
7)?128:0),za&&(Ja.buf[Ja.pos++]=127&za|((za>>>=7)?128:0),za&&(Ja.buf[Ja.pos++]=127&za)))))})(sa,S)}(x,this):(this.realloc(4),this.buf[this.pos++]=127&x|(127<x?128:0),127>=x||(this.buf[this.pos++]=127&(x>>>=7)|(127<x?128:0),127>=x||(this.buf[this.pos++]=127&(x>>>=7)|(127<x?128:0),127>=x||(this.buf[this.pos++]=x>>>7&127))))},writeSVarint:function(x){this.writeVarint(0>x?2*-x-1:2*x)},writeBoolean:function(x){this.writeVarint(!!x)},writeString:function(x){x=String(x);this.realloc(4*x.length);this.pos++;
for(var K=this.pos,S=this.buf,fa=this.pos,sa,za,Ja=0;Ja<x.length;Ja++){if(55295<(sa=x.charCodeAt(Ja))&&57344>sa){if(!za){56319<sa||Ja+1===x.length?(S[fa++]=239,S[fa++]=191,S[fa++]=189):za=sa;continue}if(56320>sa){S[fa++]=239;S[fa++]=191;S[fa++]=189;za=sa;continue}sa=za-55296<<10|sa-56320|65536;za=null}else za&&(S[fa++]=239,S[fa++]=191,S[fa++]=189,za=null);128>sa?S[fa++]=sa:(2048>sa?S[fa++]=sa>>6|192:(65536>sa?S[fa++]=sa>>12|224:(S[fa++]=sa>>18|240,S[fa++]=sa>>12&63|128),S[fa++]=sa>>6&63|128),S[fa++]=
63&sa|128)}this.pos=fa;S=this.pos-K;128<=S&&Jh(K,S,this);this.pos=K-1;this.writeVarint(S);this.pos+=S},writeFloat:function(x){this.realloc(4);cc(this.buf,x,this.pos,!0,23,4);this.pos+=4},writeDouble:function(x){this.realloc(8);cc(this.buf,x,this.pos,!0,52,8);this.pos+=8},writeBytes:function(x){var K=x.length;this.writeVarint(K);this.realloc(K);for(var S=0;S<K;S++)this.buf[this.pos++]=x[S]},writeRawMessage:function(x,K){this.pos++;var S=this.pos;x(K,this);x=this.pos-S;128<=x&&Jh(S,x,this);this.pos=
S-1;this.writeVarint(x);this.pos+=x},writeMessage:function(x,K,S){this.writeTag(x,Ee.Bytes);this.writeRawMessage(K,S)},writePackedVarint:function(x,K){K.length&&this.writeMessage(x,Kh,K)},writePackedSVarint:function(x,K){K.length&&this.writeMessage(x,Tj,K)},writePackedBoolean:function(x,K){K.length&&this.writeMessage(x,Uj,K)},writePackedFloat:function(x,K){K.length&&this.writeMessage(x,oi,K)},writePackedDouble:function(x,K){K.length&&this.writeMessage(x,Qi,K)},writePackedFixed32:function(x,K){K.length&&
this.writeMessage(x,Vj,K)},writePackedSFixed32:function(x,K){K.length&&this.writeMessage(x,Wj,K)},writePackedFixed64:function(x,K){K.length&&this.writeMessage(x,pi,K)},writePackedSFixed64:function(x,K){K.length&&this.writeMessage(x,wk,K)},writeBytesField:function(x,K){this.writeTag(x,Ee.Bytes);this.writeBytes(K)},writeFixed32Field:function(x,K){this.writeTag(x,Ee.Fixed32);this.writeFixed32(K)},writeSFixed32Field:function(x,K){this.writeTag(x,Ee.Fixed32);this.writeSFixed32(K)},writeFixed64Field:function(x,
K){this.writeTag(x,Ee.Fixed64);this.writeFixed64(K)},writeSFixed64Field:function(x,K){this.writeTag(x,Ee.Fixed64);this.writeSFixed64(K)},writeVarintField:function(x,K){this.writeTag(x,Ee.Varint);this.writeVarint(K)},writeSVarintField:function(x,K){this.writeTag(x,Ee.Varint);this.writeSVarint(K)},writeStringField:function(x,K){this.writeTag(x,Ee.Bytes);this.writeString(K)},writeFloatField:function(x,K){this.writeTag(x,Ee.Fixed32);this.writeFloat(K)},writeDoubleField:function(x,K){this.writeTag(x,Ee.Fixed64);
this.writeDouble(K)},writeBooleanField:function(x,K){this.writeVarintField(x,!!K)}};var Hc=function(x,K){var S=K.pixelRatio,fa=K.version,sa=K.stretchX,za=K.stretchY;K=K.content;this.paddedRect=x;this.pixelRatio=S;this.stretchX=sa;this.stretchY=za;this.content=K;this.version=fa},Rc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Rc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]};Rc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-
1,this.paddedRect.y+this.paddedRect.h-1]};Rc.tlbr.get=function(){return this.tl.concat(this.br)};Rc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]};Object.defineProperties(Hc.prototype,Rc);var Tc=function(x,K){var S={},fa={};this.haveRenderCallbacks=[];var sa=[];this.addImages(x,S,sa);this.addImages(K,fa,sa);sa=Ve(sa);sa=new Bf({width:sa.w||1,height:sa.h||1});for(var za in x){var Ja=x[za],Ra=S[za].paddedRect;Bf.copy(Ja.data,sa,{x:0,y:0},
{x:Ra.x+1,y:Ra.y+1},Ja.data)}for(var db in K){x=K[db];Ja=fa[db].paddedRect;za=Ja.x+1;Ja=Ja.y+1;Ra=x.data.width;var jb=x.data.height;Bf.copy(x.data,sa,{x:0,y:0},{x:za,y:Ja},x.data);Bf.copy(x.data,sa,{x:0,y:jb-1},{x:za,y:Ja-1},{width:Ra,height:1});Bf.copy(x.data,sa,{x:0,y:0},{x:za,y:Ja+jb},{width:Ra,height:1});Bf.copy(x.data,sa,{x:Ra-1,y:0},{x:za-1,y:Ja},{width:1,height:jb});Bf.copy(x.data,sa,{x:0,y:0},{x:za+Ra,y:Ja},{width:1,height:jb})}this.image=sa;this.iconPositions=S;this.patternPositions=fa};
Tc.prototype.addImages=function(x,K,S){for(var fa in x){var sa=x[fa],za={x:0,y:0,w:sa.data.width+2,h:sa.data.height+2};S.push(za);K[fa]=new Hc(za,sa);sa.hasRenderCallback&&this.haveRenderCallbacks.push(fa)}};Tc.prototype.patchUpdatedImages=function(x,K){for(var S in x.dispatchRenderCallbacks(this.haveRenderCallbacks),x.updatedImages)this.patchUpdatedImage(this.iconPositions[S],x.getImage(S),K),this.patchUpdatedImage(this.patternPositions[S],x.getImage(S),K)};Tc.prototype.patchUpdatedImage=function(x,
K,S){x&&K&&x.version!==K.version&&(x.version=K.version,x=x.tl,S.update(K.data,void 0,{x:x[0],y:x[1]}))};Mc("ImagePosition",Hc);Mc("ImageAtlas",Tc);var Xc={horizontal:1,vertical:2,horizontalOnly:3},Vb=function(){this.scale=1;this.fontStack="";this.imageName=null};Vb.forText=function(x,K){var S=new Vb;return S.scale=x||1,S.fontStack=K,S};Vb.forImage=function(x){var K=new Vb;return K.imageName=x,K};var gc=function(){this.text="";this.sectionIndex=[];this.sections=[];this.imageSectionID=null};gc.fromFeature=
function(x,K){for(var S=new gc,fa=0;fa<x.sections.length;fa++){var sa=x.sections[fa];sa.image?S.addImageSection(sa):S.addTextSection(sa,K)}return S};gc.prototype.length=function(){return this.text.length};gc.prototype.getSection=function(x){return this.sections[this.sectionIndex[x]]};gc.prototype.getSectionIndex=function(x){return this.sectionIndex[x]};gc.prototype.getCharCode=function(x){return this.text.charCodeAt(x)};gc.prototype.verticalizePunctuation=function(){for(var x=this.text,K="",S=0;S<
x.length;S++){var fa=x.charCodeAt(S+1)||null,sa=x.charCodeAt(S-1)||null;K+=fa&&Gc(fa)&&!Mb[x[S+1]]||sa&&Gc(sa)&&!Mb[x[S-1]]||!Mb[x[S]]?x[S]:Mb[x[S]]}this.text=K};gc.prototype.trim=function(){for(var x=0,K=0;K<this.text.length&&Jc[this.text.charCodeAt(K)];K++)x++;K=this.text.length;for(var S=this.text.length-1;0<=S&&S>=x&&Jc[this.text.charCodeAt(S)];S--)K--;this.text=this.text.substring(x,K);this.sectionIndex=this.sectionIndex.slice(x,K)};gc.prototype.substring=function(x,K){var S=new gc;return S.text=
this.text.substring(x,K),S.sectionIndex=this.sectionIndex.slice(x,K),S.sections=this.sections,S};gc.prototype.toString=function(){return this.text};gc.prototype.getMaxScale=function(){var x=this;return this.sectionIndex.reduce(function(K,S){return Math.max(K,x.sections[S].scale)},0)};gc.prototype.addTextSection=function(x,K){this.text+=x.text;this.sections.push(Vb.forText(x.scale,x.fontStack||K));K=this.sections.length-1;for(var S=0;S<x.text.length;++S)this.sectionIndex.push(K)};gc.prototype.addImageSection=
function(x){x=x.image?x.image.name:"";if(0!==x.length){var K=this.getNextImageSectionCharCode();K?(this.text+=String.fromCharCode(K),this.sections.push(Vb.forImage(x)),this.sectionIndex.push(this.sections.length-1)):y("Reached maximum number of images 6401")}else y("Can't add FormattedSection with an empty image.")};gc.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?63743<=this.imageSectionID?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Jc=
{9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},fd={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},hd=function(x){function K(S,fa,sa,za){x.call(this,S,fa);this.angle=sa;void 0!==za&&(this.segment=za)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.clone=function(){return new K(this.x,this.y,this.angle,this.segment)},K}(Vd);Mc("Anchor",hd);var id=Object.freeze({__proto__:null,getSizeData:oj,evaluateSizeForFeature:pj,
evaluateSizeForZoom:qj,SIZE_PACK_FACTOR:128}),ad=function(x,K,S,fa,sa,za,Ja,Ra,db,jb){if(this.boxStartIndex=x.length,db)K=za.top,S=za.bottom,(fa=za.collisionPadding)&&(K-=fa[1],S+=fa[3]),K=S-K,0<K&&(K=Math.max(10,K),this.circleDiameter=K);else{db=za.top*Ja-Ra;var Bb=za.bottom*Ja+Ra,Jb=za.left*Ja-Ra;Ra=za.right*Ja+Ra;za=za.collisionPadding;if(za&&(Jb-=za[0]*Ja,db-=za[1]*Ja,Ra+=za[2]*Ja,Bb+=za[3]*Ja),jb){za=new Vd(Jb,db);Ja=new Vd(Ra,db);var Xb=new Vd(Jb,Bb);Bb=new Vd(Ra,Bb);jb=jb*Math.PI/180;za._rotate(jb);
Ja._rotate(jb);Xb._rotate(jb);Bb._rotate(jb);Jb=Math.min(za.x,Ja.x,Xb.x,Bb.x);Ra=Math.max(za.x,Ja.x,Xb.x,Bb.x);db=Math.min(za.y,Ja.y,Xb.y,Bb.y);Bb=Math.max(za.y,Ja.y,Xb.y,Bb.y)}x.emplaceBack(K.x,K.y,Jb,db,Ra,Bb,S,fa,sa)}this.boxEndIndex=x.length},Md=function(x,K){if(void 0===x&&(x=[]),void 0===K&&(K=rh),this.data=x,this.length=this.data.length,this.compare=K,0<this.length)for(x=(this.length>>1)-1;0<=x;x--)this._down(x)};Md.prototype.push=function(x){this.data.push(x);this.length++;this._up(this.length-
1)};Md.prototype.pop=function(){if(0!==this.length){var x=this.data[0],K=this.data.pop();return this.length--,0<this.length&&(this.data[0]=K,this._down(0)),x}};Md.prototype.peek=function(){return this.data[0]};Md.prototype._up=function(x){for(var K=this.data,S=this.compare,fa=K[x];0<x;){var sa=x-1>>1,za=K[sa];if(0<=S(fa,za))break;K[x]=za;x=sa}K[x]=fa};Md.prototype._down=function(x){for(var K=this.data,S=this.compare,fa=this.length>>1,sa=K[x];x<fa;){var za=1+(x<<1),Ja=K[za],Ra=za+1;if(Ra<this.length&&
0>S(K[Ra],Ja)&&(za=Ra,Ja=K[Ra]),0<=S(Ja,sa))break;K[x]=Ja;x=za}K[x]=sa};var $d=Number.POSITIVE_INFINITY,ie=vh.VectorTileFeature.types,ne=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],le=function(x){this.layoutVertexArray=new Sg;this.indexArray=new eh;this.programConfigurations=x;this.segments=new lf;this.dynamicLayoutVertexArray=new yg;this.opacityVertexArray=new Ch;this.placedSymbolArray=new Gk};le.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&
0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length};le.prototype.upload=function(x,K,S,fa){this.isEmpty()||(S&&(this.layoutVertexBuffer=x.createVertexBuffer(this.layoutVertexArray,cb.members),this.indexBuffer=x.createIndexBuffer(this.indexArray,K),this.dynamicLayoutVertexBuffer=x.createVertexBuffer(this.dynamicLayoutVertexArray,ib.members,!0),this.opacityVertexBuffer=x.createVertexBuffer(this.opacityVertexArray,ne,!0),this.opacityVertexBuffer.itemSize=1),(S||fa)&&this.programConfigurations.upload(x))};
le.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())};Mc("SymbolBuffers",le);var we=function(x,K,S){this.layoutVertexArray=new x;this.layoutAttributes=K;this.indexArray=new S;this.segments=new lf;this.collisionVertexArray=new Oj};we.prototype.upload=function(x){this.layoutVertexBuffer=x.createVertexBuffer(this.layoutVertexArray,
this.layoutAttributes);this.indexBuffer=x.createIndexBuffer(this.indexArray);this.collisionVertexBuffer=x.createVertexBuffer(this.collisionVertexArray,wb.members,!0)};we.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())};Mc("CollisionBuffers",we);var Yd=function(x){this.collisionBoxArray=x.collisionBoxArray;this.zoom=x.zoom;this.overscaling=x.overscaling;this.layers=x.layers;
this.layerIds=this.layers.map(function(sa){return sa.id});this.index=x.index;this.pixelRatio=x.pixelRatio;this.sourceLayerIndex=x.sourceLayerIndex;this.hasRTLText=this.hasPattern=!1;this.sortKeyRanges=[];this.collisionCircleArray=[];this.placementInvProjMatrix=Ac([]);this.placementViewportMatrix=Ac([]);var K=this.layers[0]._unevaluatedLayout._values;this.textSizeData=oj(this.zoom,K["text-size"]);this.iconSizeData=oj(this.zoom,K["icon-size"]);K=this.layers[0].layout;var S=K.get("symbol-sort-key"),
fa=K.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==fa&&void 0!==S.constantOr(1);this.sortFeaturesByY=("viewport-y"===fa||"auto"===fa&&!this.sortFeaturesByKey)&&(K.get("text-allow-overlap")||K.get("icon-allow-overlap")||K.get("text-ignore-placement")||K.get("icon-ignore-placement"));"point"===K.get("symbol-placement")&&(this.writingModes=K.get("text-writing-mode").map(function(sa){return Xc[sa]}));this.stateDependentLayerIds=this.layers.filter(function(sa){return sa.isStateDependent()}).map(function(sa){return sa.id});
this.sourceID=x.sourceID};Yd.prototype.createArrays=function(){this.text=new le(new Gg(cb.members,this.layers,this.zoom,function(x){return/^text/.test(x)}));this.icon=new le(new Gg(cb.members,this.layers,this.zoom,function(x){return/^icon/.test(x)}));this.glyphOffsetArray=new zj;this.lineVertexArray=new mi;this.symbolInstances=new Ik};Yd.prototype.calculateGlyphDependencies=function(x,K,S,fa,sa){for(var za=0;za<x.length;za++)if(K[x.charCodeAt(za)]=!0,(S||fa)&&sa){var Ja=Mb[x.charAt(za)];Ja&&(K[Ja.charCodeAt(0)]=
!0)}};Yd.prototype.populate=function(x,K,S){var fa=this.layers[0],sa=fa.layout,za=sa.get("text-font"),Ja=sa.get("text-field"),Ra=sa.get("icon-image");Ja=("constant"!==Ja.value.kind||Ja.value.value instanceof ye&&!Ja.value.value.isEmpty()||0<Ja.value.value.toString().length)&&("constant"!==za.value.kind||0<za.value.value.length);Ra="constant"!==Ra.value.kind||!!Ra.value.value||0<Object.keys(Ra.parameters).length;var db=sa.get("symbol-sort-key");if(this.features=[],Ja||Ra){var jb=K.iconDependencies,
Bb=K.glyphDependencies;K=K.availableImages;for(var Jb=new Oe(this.zoom),Xb=0;Xb<x.length;Xb+=1){var Tb=x[Xb],bc=Tb.feature,ac=Tb.id,Bc=Tb.index,kd=Tb.sourceLayerIndex;Tb=fa._featureFilter.needGeometry;var pd={type:bc.type,id:ac,properties:bc.properties,geometry:Tb?ve(bc):[]};if(fa._featureFilter.filter(Jb,pd,S)){Tb||(pd.geometry=ve(bc));Tb=void 0;if(Ja){var bd=fa.getValueAndResolveTokens("text-field",pd,S,K);bd=ye.factory(bd);sh(bd)&&(this.hasRTLText=!0);(!this.hasRTLText||"unavailable"===Hf||this.hasRTLText&&
Nf.isParsed())&&(Tb=mh(bd,fa,pd))}bd=void 0;Ra&&(bd=fa.getValueAndResolveTokens("icon-image",pd,S,K),bd=bd instanceof Re?bd:Re.fromString(bd));if(Tb||bd){var Ed=this.sortFeaturesByKey?db.evaluate(pd,{},S):void 0;bc={id:ac,text:Tb,icon:bd,index:Bc,sourceLayerIndex:kd,geometry:ve(bc),properties:bc.properties,type:ie[bc.type],sortKey:Ed};if(this.features.push(bc),bd&&(jb[bd.name]=!0),Tb)for(bc=za.evaluate(pd,{},S).join(","),ac="map"===sa.get("text-rotation-alignment")&&"point"!==sa.get("symbol-placement"),
this.allowVerticalPlacement=this.writingModes&&0<=this.writingModes.indexOf(Xc.vertical),Bc=0,pd=Tb.sections;Bc<pd.length;Bc+=1)kd=pd[Bc],kd.image?jb[kd.image.name]=!0:(bd=xe(Tb.toString()),Ed=kd.fontStack||bc,Ed=Bb[Ed]=Bb[Ed]||{},this.calculateGlyphDependencies(kd.text,Ed,ac,this.allowVerticalPlacement,bd))}}}"line"===sa.get("symbol-placement")&&(this.features=function(Bd){function Jd(Lf,rf,Ye){var ue=ce[Lf];return delete ce[Lf],ce[rf]=ue,Ud[ue].geometry[0].pop(),Ud[ue].geometry[0]=Ud[ue].geometry[0].concat(Ye[0]),
ue}function Rd(Lf,rf,Ye){var ue=be[rf];return delete be[rf],be[Lf]=ue,Ud[ue].geometry[0].shift(),Ud[ue].geometry[0]=Ye[0].concat(Ud[ue].geometry[0]),ue}function Xd(Lf,rf,Ye){rf=Ye?rf[0][rf[0].length-1]:rf[0][0];return Lf+":"+rf.x+":"+rf.y}for(var be={},ce={},Ud=[],Zd=0,pe=0;pe<Bd.length;pe++){var Sd=Bd[pe],Od=Sd.geometry;if(Sd=Sd.text?Sd.text.toString():null){var Td=Xd(Sd,Od),Be=Xd(Sd,Od,!0);if(Td in ce&&Be in be&&ce[Td]!==be[Be]){Od=Rd(Td,Be,Od);var Xe=Jd(Td,Be,Ud[Od].geometry);delete be[Td];delete ce[Be];
ce[Xd(Sd,Ud[Xe].geometry,!0)]=Xe;Ud[Od].geometry=null}else Td in ce?Jd(Td,Be,Od):Be in be?Rd(Td,Be,Od):(Ud.push(Bd[pe]),Zd++,be[Td]=Zd-1,ce[Be]=Zd-1)}else Ud.push(Bd[pe]),Zd++}return Ud.filter(function(Lf){return Lf.geometry})}(this.features));this.sortFeaturesByKey&&this.features.sort(function(Bd,Jd){return Bd.sortKey-Jd.sortKey})}};Yd.prototype.update=function(x,K,S){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(x,K,this.layers,S),this.icon.programConfigurations.updatePaintArrays(x,
K,this.layers,S))};Yd.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText};Yd.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload};Yd.prototype.upload=function(x){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(x),this.iconCollisionBox.upload(x));this.text.upload(x,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload);this.icon.upload(x,
this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload);this.uploaded=!0};Yd.prototype.destroyDebugData=function(){this.textCollisionBox.destroy();this.iconCollisionBox.destroy()};Yd.prototype.destroy=function(){this.text.destroy();this.icon.destroy();this.hasDebugData()&&this.destroyDebugData()};Yd.prototype.addToLineVertexArray=function(x,K){var S=this.lineVertexArray.length;if(void 0!==x.segment){for(var fa=x.dist(K[x.segment+1]),sa=x.dist(K[x.segment]),za={},Ja=x.segment+
1;Ja<K.length;Ja++)za[Ja]={x:K[Ja].x,y:K[Ja].y,tileUnitDistanceFromAnchor:fa},Ja<K.length-1&&(fa+=K[Ja+1].dist(K[Ja]));for(x=x.segment||0;0<=x;x--)za[x]={x:K[x].x,y:K[x].y,tileUnitDistanceFromAnchor:sa},0<x&&(sa+=K[x-1].dist(K[x]));for(sa=0;sa<K.length;sa++)x=za[sa],this.lineVertexArray.emplaceBack(x.x,x.y,x.tileUnitDistanceFromAnchor)}return{lineStartIndex:S,lineLength:this.lineVertexArray.length-S}};Yd.prototype.addSymbols=function(x,K,S,fa,sa,za,Ja,Ra,db,jb,Bb,Jb){sa=x.indexArray;for(var Xb=x.layoutVertexArray,
Tb=x.segments.prepareSegment(4*K.length,Xb,sa,za.sortKey),bc=this.glyphOffsetArray.length,ac=Tb.vertexLength,Bc=this.allowVerticalPlacement&&Ja===Xc.vertical?Math.PI/2:0,kd=za.text&&za.text.sections,pd=0;pd<K.length;pd++){var bd=K[pd],Ed=bd.tl,Bd=bd.tr,Jd=bd.bl,Rd=bd.br,Xd=bd.tex,be=bd.pixelOffsetTL,ce=bd.pixelOffsetBR,Ud=bd.minFontScaleX,Zd=bd.minFontScaleY,pe=bd.glyphOffset,Sd=bd.isSDF;bd=bd.sectionIndex;var Od=Tb.vertexLength,Td=pe[1];Zf(Xb,Ra.x,Ra.y,Ed.x,Td+Ed.y,Xd.x,Xd.y,S,Sd,be.x,be.y,Ud,Zd);
Zf(Xb,Ra.x,Ra.y,Bd.x,Td+Bd.y,Xd.x+Xd.w,Xd.y,S,Sd,ce.x,be.y,Ud,Zd);Zf(Xb,Ra.x,Ra.y,Jd.x,Td+Jd.y,Xd.x,Xd.y+Xd.h,S,Sd,be.x,ce.y,Ud,Zd);Zf(Xb,Ra.x,Ra.y,Rd.x,Td+Rd.y,Xd.x+Xd.w,Xd.y+Xd.h,S,Sd,ce.x,ce.y,Ud,Zd);sj(x.dynamicLayoutVertexArray,Ra,Bc);sa.emplaceBack(Od,Od+1,Od+2);sa.emplaceBack(Od+1,Od+2,Od+3);Tb.vertexLength+=4;Tb.primitiveLength+=2;this.glyphOffsetArray.emplaceBack(pe[0]);pd!==K.length-1&&bd===K[pd+1].sectionIndex||x.programConfigurations.populatePaintArrays(Xb.length,za,za.index,{},Jb,kd&&
kd[bd])}x.placedSymbolArray.emplaceBack(Ra.x,Ra.y,bc,this.glyphOffsetArray.length-bc,ac,db,jb,Ra.segment,S?S[0]:0,S?S[1]:0,fa[0],fa[1],Ja,0,!1,0,Bb)};Yd.prototype._addCollisionDebugVertex=function(x,K,S,fa,sa,za){return K.emplaceBack(0,0),x.emplaceBack(S.x,S.y,fa,sa,Math.round(za.x),Math.round(za.y))};Yd.prototype.addCollisionDebugVertices=function(x,K,S,fa,sa,za,Ja){var Ra=sa.segments.prepareSegment(4,sa.layoutVertexArray,sa.indexArray),db=Ra.vertexLength,jb=sa.layoutVertexArray,Bb=sa.collisionVertexArray,
Jb=Ja.anchorX;Ja=Ja.anchorY;this._addCollisionDebugVertex(jb,Bb,za,Jb,Ja,new Vd(x,K));this._addCollisionDebugVertex(jb,Bb,za,Jb,Ja,new Vd(S,K));this._addCollisionDebugVertex(jb,Bb,za,Jb,Ja,new Vd(S,fa));this._addCollisionDebugVertex(jb,Bb,za,Jb,Ja,new Vd(x,fa));Ra.vertexLength+=4;x=sa.indexArray;x.emplaceBack(db,db+1);x.emplaceBack(db+1,db+2);x.emplaceBack(db+2,db+3);x.emplaceBack(db+3,db);Ra.primitiveLength+=4};Yd.prototype.addDebugCollisionBoxes=function(x,K,S,fa){for(;x<K;x++){var sa=this.collisionBoxArray.get(x);
this.addCollisionDebugVertices(sa.x1,sa.y1,sa.x2,sa.y2,fa?this.textCollisionBox:this.iconCollisionBox,sa.anchorPoint,S)}};Yd.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData();this.textCollisionBox=new we(Kg,Eb.members,Zh);this.iconCollisionBox=new we(Kg,Eb.members,Zh);for(var x=0;x<this.symbolInstances.length;x++){var K=this.symbolInstances.get(x);this.addDebugCollisionBoxes(K.textBoxStartIndex,K.textBoxEndIndex,K,!0);this.addDebugCollisionBoxes(K.verticalTextBoxStartIndex,
K.verticalTextBoxEndIndex,K,!0);this.addDebugCollisionBoxes(K.iconBoxStartIndex,K.iconBoxEndIndex,K,!1);this.addDebugCollisionBoxes(K.verticalIconBoxStartIndex,K.verticalIconBoxEndIndex,K,!1)}};Yd.prototype._deserializeCollisionBoxesForSymbol=function(x,K,S,fa,sa,za,Ja,Ra,db){for(var jb={};K<S;){K=x.get(K);jb.textBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY};jb.textFeatureIndex=K.featureIndex;break}for(;fa<sa;){fa=x.get(fa);jb.verticalTextBox={x1:fa.x1,
y1:fa.y1,x2:fa.x2,y2:fa.y2,anchorPointX:fa.anchorPointX,anchorPointY:fa.anchorPointY};jb.verticalTextFeatureIndex=fa.featureIndex;break}for(;za<Ja;){za=x.get(za);jb.iconBox={x1:za.x1,y1:za.y1,x2:za.x2,y2:za.y2,anchorPointX:za.anchorPointX,anchorPointY:za.anchorPointY};jb.iconFeatureIndex=za.featureIndex;break}for(;Ra<db;){x=x.get(Ra);jb.verticalIconBox={x1:x.x1,y1:x.y1,x2:x.x2,y2:x.y2,anchorPointX:x.anchorPointX,anchorPointY:x.anchorPointY};jb.verticalIconFeatureIndex=x.featureIndex;break}return jb};
Yd.prototype.deserializeCollisionBoxes=function(x){this.collisionArrays=[];for(var K=0;K<this.symbolInstances.length;K++){var S=this.symbolInstances.get(K);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(x,S.textBoxStartIndex,S.textBoxEndIndex,S.verticalTextBoxStartIndex,S.verticalTextBoxEndIndex,S.iconBoxStartIndex,S.iconBoxEndIndex,S.verticalIconBoxStartIndex,S.verticalIconBoxEndIndex))}};Yd.prototype.hasTextData=function(){return 0<this.text.segments.get().length};Yd.prototype.hasIconData=
function(){return 0<this.icon.segments.get().length};Yd.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox};Yd.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&0<this.textCollisionBox.segments.get().length};Yd.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&0<this.iconCollisionBox.segments.get().length};Yd.prototype.addIndicesForPlacedSymbol=function(x,K){var S=x.placedSymbolArray.get(K);K=S.vertexStartIndex+4*S.numGlyphs;
for(S=S.vertexStartIndex;S<K;S+=4)x.indexArray.emplaceBack(S,S+1,S+2),x.indexArray.emplaceBack(S+1,S+2,S+3)};Yd.prototype.getSortedSymbolIndexes=function(x){if(this.sortedAngle===x&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;var K=Math.sin(x);x=Math.cos(x);for(var S=[],fa=[],sa=[],za=0;za<this.symbolInstances.length;++za){sa.push(za);var Ja=this.symbolInstances.get(za);S.push(0|Math.round(K*Ja.anchorX+x*Ja.anchorY));fa.push(Ja.featureIndex)}return sa.sort(function(Ra,db){return S[Ra]-
S[db]||fa[db]-fa[Ra]}),sa};Yd.prototype.addToSortKeyRanges=function(x,K){var S=this.sortKeyRanges[this.sortKeyRanges.length-1];S&&S.sortKey===K?S.symbolInstanceEnd=x+1:this.sortKeyRanges.push({sortKey:K,symbolInstanceStart:x,symbolInstanceEnd:x+1})};Yd.prototype.sortFeatures=function(x){var K=this;if(this.sortFeaturesByY&&this.sortedAngle!==x&&!(1<this.text.segments.get().length||1<this.icon.segments.get().length)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(x);this.sortedAngle=x;this.text.indexArray.clear();
this.icon.indexArray.clear();this.featureSortOrder=[];x=0;for(var S=this.symbolInstanceIndexes;x<S.length;x+=1){var fa=this.symbolInstances.get(S[x]);this.featureSortOrder.push(fa.featureIndex);[fa.rightJustifiedTextSymbolIndex,fa.centerJustifiedTextSymbolIndex,fa.leftJustifiedTextSymbolIndex].forEach(function(sa,za,Ja){0<=sa&&Ja.indexOf(sa)===za&&K.addIndicesForPlacedSymbol(K.text,sa)});0<=fa.verticalPlacedTextSymbolIndex&&this.addIndicesForPlacedSymbol(this.text,fa.verticalPlacedTextSymbolIndex);
0<=fa.placedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,fa.placedIconSymbolIndex);0<=fa.verticalPlacedIconSymbolIndex&&this.addIndicesForPlacedSymbol(this.icon,fa.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray);this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}};Mc("SymbolBucket",Yd,{omit:["layers","collisionBoxArray","features","compareText"]});Yd.MAX_GLYPHS=65535;Yd.addDynamicAttributes=sj;var Df=
new Uf({"symbol-placement":new Ld(Nb.layout_symbol["symbol-placement"]),"symbol-spacing":new Ld(Nb.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ld(Nb.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ge(Nb.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ld(Nb.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ld(Nb.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ld(Nb.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ld(Nb.layout_symbol["icon-optional"]),
"icon-rotation-alignment":new Ld(Nb.layout_symbol["icon-rotation-alignment"]),"icon-size":new ge(Nb.layout_symbol["icon-size"]),"icon-text-fit":new Ld(Nb.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ld(Nb.layout_symbol["icon-text-fit-padding"]),"icon-image":new ge(Nb.layout_symbol["icon-image"]),"icon-rotate":new ge(Nb.layout_symbol["icon-rotate"]),"icon-padding":new Ld(Nb.layout_symbol["icon-padding"]),"icon-keep-upright":new Ld(Nb.layout_symbol["icon-keep-upright"]),"icon-offset":new ge(Nb.layout_symbol["icon-offset"]),
"icon-anchor":new ge(Nb.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ld(Nb.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ld(Nb.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ld(Nb.layout_symbol["text-rotation-alignment"]),"text-field":new ge(Nb.layout_symbol["text-field"]),"text-font":new ge(Nb.layout_symbol["text-font"]),"text-size":new ge(Nb.layout_symbol["text-size"]),"text-max-width":new ge(Nb.layout_symbol["text-max-width"]),"text-line-height":new Ld(Nb.layout_symbol["text-line-height"]),
"text-letter-spacing":new ge(Nb.layout_symbol["text-letter-spacing"]),"text-justify":new ge(Nb.layout_symbol["text-justify"]),"text-radial-offset":new ge(Nb.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ld(Nb.layout_symbol["text-variable-anchor"]),"text-anchor":new ge(Nb.layout_symbol["text-anchor"]),"text-max-angle":new Ld(Nb.layout_symbol["text-max-angle"]),"text-writing-mode":new Ld(Nb.layout_symbol["text-writing-mode"]),"text-rotate":new ge(Nb.layout_symbol["text-rotate"]),"text-padding":new Ld(Nb.layout_symbol["text-padding"]),
"text-keep-upright":new Ld(Nb.layout_symbol["text-keep-upright"]),"text-transform":new ge(Nb.layout_symbol["text-transform"]),"text-offset":new ge(Nb.layout_symbol["text-offset"]),"text-allow-overlap":new Ld(Nb.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ld(Nb.layout_symbol["text-ignore-placement"]),"text-optional":new Ld(Nb.layout_symbol["text-optional"])}),ef={paint:new Uf({"icon-opacity":new ge(Nb.paint_symbol["icon-opacity"]),"icon-color":new ge(Nb.paint_symbol["icon-color"]),
"icon-halo-color":new ge(Nb.paint_symbol["icon-halo-color"]),"icon-halo-width":new ge(Nb.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ge(Nb.paint_symbol["icon-halo-blur"]),"icon-translate":new Ld(Nb.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ld(Nb.paint_symbol["icon-translate-anchor"]),"text-opacity":new ge(Nb.paint_symbol["text-opacity"]),"text-color":new ge(Nb.paint_symbol["text-color"],{runtimeType:Gd,getOverride:function(x){return x.textColor},hasOverride:function(x){return!!x.textColor}}),
"text-halo-color":new ge(Nb.paint_symbol["text-halo-color"]),"text-halo-width":new ge(Nb.paint_symbol["text-halo-width"]),"text-halo-blur":new ge(Nb.paint_symbol["text-halo-blur"]),"text-translate":new Ld(Nb.paint_symbol["text-translate"]),"text-translate-anchor":new Ld(Nb.paint_symbol["text-translate-anchor"])}),layout:Df},ng=function(x){this.type=x.property.overrides?x.property.overrides.runtimeType:qd;this.defaultValue=x};ng.prototype.evaluate=function(x){if(x.formattedSection){var K=this.defaultValue.property.overrides;
if(K&&K.hasOverride(x.formattedSection))return K.getOverride(x.formattedSection)}return x.feature&&x.featureState?this.defaultValue.evaluate(x.feature,x.featureState):this.defaultValue.property.specification.default};ng.prototype.eachChild=function(x){this.defaultValue.isConstant()||x(this.defaultValue.value._styleExpression.expression)};ng.prototype.outputDefined=function(){return!1};ng.prototype.serialize=function(){return null};Mc("FormatSectionOverride",ng,{omit:["defaultValue"]});var ii=function(x){function K(S){x.call(this,
S,ef)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.recalculate=function(S,fa){if(x.prototype.recalculate.call(this,S,fa),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),
"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement"))if(S=this.layout.get("text-writing-mode")){fa=[];for(var sa=0;sa<S.length;sa+=1){var za=S[sa];0>fa.indexOf(za)&&fa.push(za)}this.layout._values["text-writing-mode"]=fa}else this.layout._values["text-writing-mode"]=
["horizontal"];this._setPaintOverrides()},K.prototype.getValueAndResolveTokens=function(S,fa,sa,za){sa=this.layout.get(S).evaluate(fa,{},sa,za);S=this._unevaluatedLayout._values[S];return S.isDataDriven()||Wc(S.value)||!sa?sa:function(Ja,Ra){return Ra.replace(/{([^{}]+)}/g,function(db,jb){return jb in Ja?String(Ja[jb]):""})}(fa.properties,sa)},K.prototype.createBucket=function(S){return new Yd(S)},K.prototype.queryRadius=function(){return 0},K.prototype.queryIntersectsFeature=function(){return!1},
K.prototype._setPaintOverrides=function(){for(var S=0,fa=ef.paint.overridableProperties;S<fa.length;S+=1){var sa=fa[S];if(K.hasPaintOverride(this.layout,sa)){var za=this.paint.get(sa);var Ja=new ng(za);Ja=new fi(Ja,za.property.specification);Ja="constant"===za.value.kind||"source"===za.value.kind?new fe("source",Ja):new Ef("composite",Ja,za.value.zoomStops,za.value._interpolationType);this.paint._values[sa]=new qf(za.property,Ja,za.parameters)}}},K.prototype._handleOverridablePaintPropertyUpdate=
function(S,fa,sa){return!(!this.layout||fa.isDataDriven()||sa.isDataDriven())&&K.hasPaintOverride(this.layout,S)},K.hasPaintOverride=function(S,fa){S=S.get("text-field");var sa=ef.paint.properties[fa],za=!1,Ja=function(db){for(var jb=0;jb<db.length;jb+=1)if(sa.overrides&&sa.overrides.hasOverride(db[jb]))return void(za=!0)};if("constant"===S.value.kind&&S.value.value instanceof ye)Ja(S.value.value.sections);else if("source"===S.value.kind){var Ra=function(db){za||(db instanceof wf&&ja(db.value)===
ee?Ja(db.value.sections):db instanceof zf?Ja(db.sections):db.eachChild(Ra))};fa=S.value;fa._styleExpression&&Ra(fa._styleExpression.expression)}return za},K}(ug),kj={paint:new Uf({"background-color":new Ld(Nb.paint_background["background-color"]),"background-pattern":new xh(Nb.paint_background["background-pattern"]),"background-opacity":new Ld(Nb.paint_background["background-opacity"])})},lh=function(x){function K(S){x.call(this,S,kj)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=
K,K}(ug),lj={paint:new Uf({"raster-opacity":new Ld(Nb.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ld(Nb.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ld(Nb.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ld(Nb.paint_raster["raster-brightness-max"]),"raster-saturation":new Ld(Nb.paint_raster["raster-saturation"]),"raster-contrast":new Ld(Nb.paint_raster["raster-contrast"]),"raster-resampling":new Ld(Nb.paint_raster["raster-resampling"]),"raster-fade-duration":new Ld(Nb.paint_raster["raster-fade-duration"])})},
Ue=function(x){function K(S){x.call(this,S,lj)}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K}(ug),Le=function(x){function K(S){x.call(this,S,{});this.implementation=S}return x&&(K.__proto__=x),(K.prototype=Object.create(x&&x.prototype)).constructor=K,K.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},K.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},K.prototype.recalculate=function(){},K.prototype.updateTransitions=
function(){},K.prototype.hasTransition=function(){},K.prototype.serialize=function(){},K.prototype.onAdd=function(S){this.implementation.onAdd&&this.implementation.onAdd(S,S.painter.context.gl)},K.prototype.onRemove=function(S){this.implementation.onRemove&&this.implementation.onRemove(S,S.painter.context.gl)},K}(ug),tg={circle:cl,heatmap:dl,hillshade:hk,fill:Mk,"fill-extrusion":tl,line:Sa,symbol:ii,background:lh,raster:Ue},Dk=self.HTMLImageElement,wi=self.HTMLCanvasElement,xi=self.HTMLVideoElement,
$i=self.ImageData,Yh=self.ImageBitmap,Dj=function(x,K,S,fa){this.context=x;this.format=S;this.texture=x.gl.createTexture();this.update(K,fa)};Dj.prototype.update=function(x,K,S){var fa=x.width,sa=x.height,za=!(this.size&&this.size[0]===fa&&this.size[1]===sa||S),Ja=this.context,Ra=Ja.gl;(this.useMipmap=!(!K||!K.useMipmap),Ra.bindTexture(Ra.TEXTURE_2D,this.texture),Ja.pixelStoreUnpackFlipY.set(!1),Ja.pixelStoreUnpack.set(1),Ja.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ra.RGBA&&(!K||!1!==K.premultiply)),
za)?(this.size=[fa,sa],x instanceof Dk||x instanceof wi||x instanceof xi||x instanceof $i||Yh&&x instanceof Yh?Ra.texImage2D(Ra.TEXTURE_2D,0,this.format,this.format,Ra.UNSIGNED_BYTE,x):Ra.texImage2D(Ra.TEXTURE_2D,0,this.format,fa,sa,0,this.format,Ra.UNSIGNED_BYTE,x.data)):(S=S||{x:0,y:0},K=S.x,S=S.y,x instanceof Dk||x instanceof wi||x instanceof xi||x instanceof $i||Yh&&x instanceof Yh?Ra.texSubImage2D(Ra.TEXTURE_2D,0,K,S,Ra.RGBA,Ra.UNSIGNED_BYTE,x):Ra.texSubImage2D(Ra.TEXTURE_2D,0,K,S,fa,sa,Ra.RGBA,
Ra.UNSIGNED_BYTE,x.data));this.useMipmap&&this.isSizePowerOfTwo()&&Ra.generateMipmap(Ra.TEXTURE_2D)};Dj.prototype.bind=function(x,K,S){var fa=this.context.gl;fa.bindTexture(fa.TEXTURE_2D,this.texture);S!==fa.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(S=fa.LINEAR);x!==this.filter&&(fa.texParameteri(fa.TEXTURE_2D,fa.TEXTURE_MAG_FILTER,x),fa.texParameteri(fa.TEXTURE_2D,fa.TEXTURE_MIN_FILTER,S||x),this.filter=x);K!==this.wrap&&(fa.texParameteri(fa.TEXTURE_2D,fa.TEXTURE_WRAP_S,K),fa.texParameteri(fa.TEXTURE_2D,
fa.TEXTURE_WRAP_T,K),this.wrap=K)};Dj.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&0==Math.log(this.size[0])/Math.LN2%1};Dj.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture);this.texture=null};var ul=function(x){var K=this;this._callback=x;this._triggered=!1;"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){K._triggered=!1;K._callback()})};ul.prototype.trigger=function(){var x=this;this._triggered||
(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){x._triggered=!1;x._callback()},0))};ul.prototype.remove=function(){delete this._channel;this._callback=function(){}};var ik=function(x,K,S){this.target=x;this.parent=K;this.mapId=S;this.callbacks={};this.tasks={};this.taskQueue=[];this.cancelCallbacks={};t(["receive","process"],this);this.invoker=new ul(this.process);this.target.addEventListener("message",this.receive,!1);this.globalScope=C()?x:self};ik.prototype.send=
function(x,K,S,fa,sa){var za=this;void 0===sa&&(sa=!1);var Ja=Math.round(1E18*Math.random()).toString(36).substring(0,10);S&&(this.callbacks[Ja]=S);var Ra=F(this.globalScope)?void 0:[];return this.target.postMessage({id:Ja,type:x,hasCallback:!!S,targetMapId:fa,mustQueue:sa,sourceMapId:this.mapId,data:yd(K,Ra)},Ra),{cancel:function(){S&&delete za.callbacks[Ja];za.target.postMessage({id:Ja,type:"\x3ccancel\x3e",targetMapId:fa,sourceMapId:za.mapId})}}};ik.prototype.receive=function(x){var K=x.data;!(x=
K.id)||K.targetMapId&&this.mapId!==K.targetMapId||("\x3ccancel\x3e"===K.type?(delete this.tasks[x],K=this.cancelCallbacks[x],delete this.cancelCallbacks[x],K&&K()):C()||K.mustQueue?(this.tasks[x]=K,this.taskQueue.push(x),this.invoker.trigger()):this.processTask(x,K))};ik.prototype.process=function(){if(this.taskQueue.length){var x=this.taskQueue.shift(),K=this.tasks[x];delete this.tasks[x];this.taskQueue.length&&this.invoker.trigger();K&&this.processTask(x,K)}};ik.prototype.processTask=function(x,
K){var S=this;if("\x3cresponse\x3e"===K.type){var fa=this.callbacks[x];delete this.callbacks[x];fa&&(K.error?fa(Fd(K.error)):fa(null,Fd(K.data)))}else{var sa=!1,za=F(this.globalScope)?void 0:[];fa=K.hasCallback?function(db,jb){sa=!0;delete S.cancelCallbacks[x];S.target.postMessage({id:x,type:"\x3cresponse\x3e",sourceMapId:S.mapId,error:db?yd(db):null,data:yd(jb,za)},za)}:function(db){sa=!0};var Ja=null,Ra=Fd(K.data);this.parent[K.type]?Ja=this.parent[K.type](K.sourceMapId,Ra,fa):this.parent.getWorkerSource?
(Ja=K.type.split("."),Ja=this.parent.getWorkerSource(K.sourceMapId,Ja[0],Ra.source)[Ja[1]](Ra,fa)):fa(Error("Could not find function "+K.type));!sa&&Ja&&Ja.cancel&&(this.cancelCallbacks[x]=Ja.cancel)}};ik.prototype.remove=function(){this.invoker.remove();this.target.removeEventListener("message",this.receive,!1)};var sf=function(x,K){x&&(K?this.setSouthWest(x).setNorthEast(K):4===x.length?this.setSouthWest([x[0],x[1]]).setNorthEast([x[2],x[3]]):this.setSouthWest(x[0]).setNorthEast(x[1]))};sf.prototype.setNorthEast=
function(x){return this._ne=x instanceof Ze?new Ze(x.lng,x.lat):Ze.convert(x),this};sf.prototype.setSouthWest=function(x){return this._sw=x instanceof Ze?new Ze(x.lng,x.lat):Ze.convert(x),this};sf.prototype.extend=function(x){var K,S=this._sw,fa=this._ne;if(x instanceof Ze)var sa=K=x;else{if(!(x instanceof sf))return Array.isArray(x)?4===x.length||x.every(Array.isArray)?this.extend(sf.convert(x)):this.extend(Ze.convert(x)):this;if(sa=x._ne,!(K=x._sw)||!sa)return this}return S||fa?(S.lng=Math.min(K.lng,
S.lng),S.lat=Math.min(K.lat,S.lat),fa.lng=Math.max(sa.lng,fa.lng),fa.lat=Math.max(sa.lat,fa.lat)):(this._sw=new Ze(K.lng,K.lat),this._ne=new Ze(sa.lng,sa.lat)),this};sf.prototype.getCenter=function(){return new Ze((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)};sf.prototype.getSouthWest=function(){return this._sw};sf.prototype.getNorthEast=function(){return this._ne};sf.prototype.getNorthWest=function(){return new Ze(this.getWest(),this.getNorth())};sf.prototype.getSouthEast=function(){return new Ze(this.getEast(),
this.getSouth())};sf.prototype.getWest=function(){return this._sw.lng};sf.prototype.getSouth=function(){return this._sw.lat};sf.prototype.getEast=function(){return this._ne.lng};sf.prototype.getNorth=function(){return this._ne.lat};sf.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]};sf.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"};sf.prototype.isEmpty=function(){return!(this._sw&&this._ne)};sf.prototype.contains=function(x){var K=
Ze.convert(x);x=K.lng;K=K.lat;var S=this._sw.lng<=x&&x<=this._ne.lng;return this._sw.lng>this._ne.lng&&(S=this._sw.lng>=x&&x>=this._ne.lng),this._sw.lat<=K&&K<=this._ne.lat&&S};sf.convert=function(x){return!x||x instanceof sf?x:new sf(x)};var Ze=function(x,K){if(isNaN(x)||isNaN(K))throw Error("Invalid LngLat object: ("+x+", "+K+")");if(this.lng=+x,this.lat=+K,90<this.lat||-90>this.lat)throw Error("Invalid LngLat latitude value: must be between -90 and 90");};Ze.prototype.wrap=function(){return new Ze(d(this.lng,
-180,180),this.lat)};Ze.prototype.toArray=function(){return[this.lng,this.lat]};Ze.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"};Ze.prototype.distanceTo=function(x){var K=Math.PI/180,S=this.lat*K,fa=x.lat*K;return 6371008.8*Math.acos(Math.min(Math.sin(S)*Math.sin(fa)+Math.cos(S)*Math.cos(fa)*Math.cos((x.lng-this.lng)*K),1))};Ze.prototype.toBounds=function(x){void 0===x&&(x=0);x=360*x/40075017;var K=x/Math.cos(Math.PI/180*this.lat);return new sf(new Ze(this.lng-K,this.lat-
x),new Ze(this.lng+K,this.lat+x))};Ze.convert=function(x){if(x instanceof Ze)return x;if(Array.isArray(x)&&(2===x.length||3===x.length))return new Ze(Number(x[0]),Number(x[1]));if(!Array.isArray(x)&&"object"==typeof x&&null!==x)return new Ze(Number("lng"in x?x.lng:x.lon),Number(x.lat));throw Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: \x3clng\x3e, lat: \x3clat\x3e}, an object {lon: \x3clng\x3e, lat: \x3clat\x3e}, or an array of [\x3clng\x3e, \x3clat\x3e]");
};var fl=1.27420176E7*Math.PI,Ej=function(x,K,S){void 0===S&&(S=0);this.x=+x;this.y=+K;this.z=+S};Ej.fromLngLat=function(x,K){void 0===K&&(K=0);x=Ze.convert(x);return new Ej(Ph(x.lng),Yg(x.lat),K/(fl*Math.cos(x.lat*Math.PI/180)))};Ej.prototype.toLngLat=function(){return new Ze(360*this.x-180,fg(this.y))};Ej.prototype.toAltitude=function(){return this.z*fl*Math.cos(fg(this.y)*Math.PI/180)};Ej.prototype.meterInMercatorCoordinateUnits=function(){return 1/fl*(x=fg(this.y),1/Math.cos(x*Math.PI/180));var x};
var Fj=function(x,K,S){this.z=x;this.x=K;this.y=S;this.key=Mg(0,x,x,K,S)};Fj.prototype.equals=function(x){return this.z===x.z&&this.x===x.x&&this.y===x.y};Fj.prototype.url=function(x,K){var S,fa,sa,za,Ja,Ra=(fa=this.y,sa=this.z,za=Ff(256*(S=this.x),256*(fa=Math.pow(2,sa)-fa-1),sa),Ja=Ff(256*(S+1),256*(fa+1),sa),za[0]+","+za[1]+","+Ja[0]+","+Ja[1]),db;S="";for(fa=this.z;0<fa;fa--)S+=(this.x&(db=1<<fa-1)?1:0)+(this.y&db?2:0);db=S;return x[(this.x+this.y)%x.length].replace("{prefix}",(this.x%16).toString(16)+
(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===K?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",db).replace("{bbox-epsg-3857}",Ra)};Fj.prototype.getTilePoint=function(x){var K=Math.pow(2,this.z);return new Vd(8192*(x.x*K-this.x),8192*(x.y*K-this.y))};Fj.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Bl=function(x,K){this.wrap=x;this.canonical=K;this.key=Mg(x,K.z,K.z,K.x,K.y)},tf=function(x,K,S,fa,
sa){this.overscaledZ=x;this.wrap=K;this.canonical=new Fj(S,+fa,+sa);this.key=Mg(K,x,S,fa,sa)};tf.prototype.equals=function(x){return this.overscaledZ===x.overscaledZ&&this.wrap===x.wrap&&this.canonical.equals(x.canonical)};tf.prototype.scaledTo=function(x){var K=this.canonical.z-x;return x>this.canonical.z?new tf(x,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new tf(x,this.wrap,x,this.canonical.x>>K,this.canonical.y>>K)};tf.prototype.calculateScaledKey=function(x,K){var S=this.canonical.z-
x;return x>this.canonical.z?Mg(this.wrap*+K,x,this.canonical.z,this.canonical.x,this.canonical.y):Mg(this.wrap*+K,x,x,this.canonical.x>>S,this.canonical.y>>S)};tf.prototype.isChildOf=function(x){if(x.wrap!==this.wrap)return!1;var K=this.canonical.z-x.canonical.z;return 0===x.overscaledZ||x.overscaledZ<this.overscaledZ&&x.canonical.x===this.canonical.x>>K&&x.canonical.y===this.canonical.y>>K};tf.prototype.children=function(x){if(this.overscaledZ>=x)return[new tf(this.overscaledZ+1,this.wrap,this.canonical.z,
this.canonical.x,this.canonical.y)];x=this.canonical.z+1;var K=2*this.canonical.x,S=2*this.canonical.y;return[new tf(x,this.wrap,x,K,S),new tf(x,this.wrap,x,K+1,S),new tf(x,this.wrap,x,K,S+1),new tf(x,this.wrap,x,K+1,S+1)]};tf.prototype.isLessThan=function(x){return this.wrap<x.wrap||!(this.wrap>x.wrap)&&(this.overscaledZ<x.overscaledZ||!(this.overscaledZ>x.overscaledZ)&&(this.canonical.x<x.canonical.x||!(this.canonical.x>x.canonical.x)&&this.canonical.y<x.canonical.y))};tf.prototype.wrapped=function(){return new tf(this.overscaledZ,
0,this.canonical.z,this.canonical.x,this.canonical.y)};tf.prototype.unwrapTo=function(x){return new tf(this.overscaledZ,x,this.canonical.z,this.canonical.x,this.canonical.y)};tf.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)};tf.prototype.toUnwrapped=function(){return new Bl(this.wrap,this.canonical)};tf.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y};tf.prototype.getTilePoint=function(x){return this.canonical.getTilePoint(new Ej(x.x-
this.wrap,x.y))};Mc("CanonicalTileID",Fj);Mc("OverscaledTileID",tf,{omit:["posMatrix"]});var Gi=function(x,K,S){if(this.uid=x,K.height!==K.width)throw new RangeError("DEM tiles must be square");if(S&&"mapbox"!==S&&"terrarium"!==S)return y('"'+S+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=K.height;x=this.dim=K.height-2;this.data=new Uint32Array(K.data.buffer);this.encoding=S||"mapbox";for(K=0;K<x;K++)this.data[this._idx(-1,K)]=this.data[this._idx(0,
K)],this.data[this._idx(x,K)]=this.data[this._idx(x-1,K)],this.data[this._idx(K,-1)]=this.data[this._idx(K,0)],this.data[this._idx(K,x)]=this.data[this._idx(K,x-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)];this.data[this._idx(x,-1)]=this.data[this._idx(x-1,0)];this.data[this._idx(-1,x)]=this.data[this._idx(0,x-1)];this.data[this._idx(x,x)]=this.data[this._idx(x-1,x-1)]};Gi.prototype.get=function(x,K){var S=new Uint8Array(this.data.buffer);x=4*this._idx(x,K);return("terrarium"===this.encoding?
this._unpackTerrarium:this._unpackMapbox)(S[x],S[x+1],S[x+2])};Gi.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1E4]};Gi.prototype._idx=function(x,K){if(-1>x||x>=this.dim+1||-1>K||K>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(K+1)*this.stride+(x+1)};Gi.prototype._unpackMapbox=function(x,K,S){return(65536*x+256*K+S)/10-1E4};Gi.prototype._unpackTerrarium=function(x,K,S){return 256*x+K+S/256-32768};
Gi.prototype.getPixels=function(){return new Bf({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))};Gi.prototype.backfillBorder=function(x,K,S){if(this.dim!==x.dim)throw Error("dem dimension mismatch");var fa=K*this.dim,sa=K*this.dim+this.dim,za=S*this.dim,Ja=S*this.dim+this.dim;switch(K){case -1:fa=sa-1;break;case 1:sa=fa+1}switch(S){case -1:za=Ja-1;break;case 1:Ja=za+1}K=-K*this.dim;for(S=-S*this.dim;za<Ja;za++)for(var Ra=fa;Ra<sa;Ra++)this.data[this._idx(Ra,za)]=x.data[this._idx(Ra+
K,za+S)]};Mc("DEMData",Gi);var hl=function(x){this._stringToNumber={};this._numberToString=[];for(var K=0;K<x.length;K++){var S=x[K];this._stringToNumber[S]=K;this._numberToString[K]=S}};hl.prototype.encode=function(x){return this._stringToNumber[x]};hl.prototype.decode=function(x){return this._numberToString[x]};var il=function(x,K,S,fa,sa){this.type="Feature";this._vectorTileFeature=x;x._z=K;x._x=S;x._y=fa;this.properties=x.properties;this.id=sa},vl={geometry:{configurable:!0}};vl.geometry.get=
function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry};vl.geometry.set=function(x){this._geometry=x};il.prototype.toJSON=function(){var x={geometry:this.geometry},K;for(K in this)"_geometry"!==K&&"_vectorTileFeature"!==K&&(x[K]=this[K]);return x};Object.defineProperties(il.prototype,vl);var jk=function(){this.state={};this.stateChanges={};this.deletedStates=
{}};jk.prototype.updateState=function(x,K,S){K=String(K);if(this.stateChanges[x]=this.stateChanges[x]||{},this.stateChanges[x][K]=this.stateChanges[x][K]||{},g(this.stateChanges[x][K],S),null===this.deletedStates[x])for(var fa in this.deletedStates[x]={},this.state[x])fa!==K&&(this.deletedStates[x][fa]=null);else if(this.deletedStates[x]&&null===this.deletedStates[x][K])for(var sa in this.deletedStates[x][K]={},this.state[x][K])S[sa]||(this.deletedStates[x][K][sa]=null);else for(var za in S)this.deletedStates[x]&&
this.deletedStates[x][K]&&null===this.deletedStates[x][K][za]&&delete this.deletedStates[x][K][za]};jk.prototype.removeFeatureState=function(x,K,S){if(null!==this.deletedStates[x]){var fa=String(K);if(this.deletedStates[x]=this.deletedStates[x]||{},S&&void 0!==K)null!==this.deletedStates[x][fa]&&(this.deletedStates[x][fa]=this.deletedStates[x][fa]||{},this.deletedStates[x][fa][S]=null);else if(void 0!==K)if(this.stateChanges[x]&&this.stateChanges[x][fa])for(S in this.deletedStates[x][fa]={},this.stateChanges[x][fa])this.deletedStates[x][fa][S]=
null;else this.deletedStates[x][fa]=null;else this.deletedStates[x]=null}};jk.prototype.getState=function(x,K){var S=String(K);S=g({},(this.state[x]||{})[S],(this.stateChanges[x]||{})[S]);if(null===this.deletedStates[x])return{};if(this.deletedStates[x]){x=this.deletedStates[x][K];if(null===x)return{};for(var fa in x)delete S[fa]}return S};jk.prototype.initializeTileState=function(x,K){x.setFeatureState(this.state,K)};jk.prototype.coalesceChanges=function(x,K){var S={};for(Ja in this.stateChanges){this.state[Ja]=
this.state[Ja]||{};var fa={},sa;for(sa in this.stateChanges[Ja])this.state[Ja][sa]||(this.state[Ja][sa]={}),g(this.state[Ja][sa],this.stateChanges[Ja][sa]),fa[sa]=this.state[Ja][sa];S[Ja]=fa}for(var za in this.deletedStates){this.state[za]=this.state[za]||{};var Ja={};if(null===this.deletedStates[za])for(var Ra in this.state[za])Ja[Ra]={},this.state[za][Ra]={};else for(var db in this.deletedStates[za]){if(null===this.deletedStates[za][db])this.state[za][db]={};else for(fa=0,sa=Object.keys(this.deletedStates[za][db]);fa<
sa.length;fa+=1)delete this.state[za][db][sa[fa]];Ja[db]=this.state[za][db]}S[za]=S[za]||{};g(S[za],Ja)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(S).length)for(var jb in x)x[jb].setFeatureState(S,K)};var Hi=function(x,K){this.tileID=x;this.x=x.canonical.x;this.y=x.canonical.y;this.z=x.canonical.z;this.grid=new ed(8192,16,0);this.grid3D=new ed(8192,16,0);this.featureIndexArray=new ki;this.promoteId=K};Hi.prototype.insert=function(x,K,S,fa,sa,za){x=this.featureIndexArray.length;
this.featureIndexArray.emplaceBack(S,fa,sa);S=za?this.grid3D:this.grid;for(fa=0;fa<K.length;fa++){sa=K[fa];za=[1/0,1/0,-1/0,-1/0];for(var Ja=0;Ja<sa.length;Ja++){var Ra=sa[Ja];za[0]=Math.min(za[0],Ra.x);za[1]=Math.min(za[1],Ra.y);za[2]=Math.max(za[2],Ra.x);za[3]=Math.max(za[3],Ra.y)}8192>za[0]&&8192>za[1]&&0<=za[2]&&0<=za[3]&&S.insert(x,za[0],za[1],za[2],za[3])}};Hi.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=(new vh.VectorTile(new Ee(this.rawTileData))).layers,this.sourceLayerCoder=
new hl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers};Hi.prototype.query=function(x,K,S,fa){var sa=this;this.loadVTLayers();var za=x.params||{},Ja=8192/x.tileSize/x.scale,Ra=tb(za.filter),db=x.queryGeometry,jb=x.queryPadding*Ja,Bb=Ag(db),Jb=this.grid.query(Bb.minX-jb,Bb.minY-jb,Bb.maxX+jb,Bb.maxY+jb),Xb=Ag(x.cameraQueryGeometry);Bb=0;for(Xb=this.grid3D.query(Xb.minX-jb,Xb.minY-jb,Xb.maxX+jb,Xb.maxY+jb,function(ac,Bc,kd,pd){a:{var bd=x.cameraQueryGeometry;ac-=
jb;Bc-=jb;kd+=jb;pd+=jb;for(var Ed=0;Ed<bd.length;Ed+=1){var Bd=bd[Ed];if(ac<=Bd.x&&Bc<=Bd.y&&kd>=Bd.x&&pd>=Bd.y){bd=!0;break a}}ac=[new Vd(ac,Bc),new Vd(ac,pd),new Vd(kd,pd),new Vd(kd,Bc)];if(2<bd.length)for(Bc=0;Bc<ac.length;Bc+=1)if(Hb(bd,ac[Bc])){bd=!0;break a}for(Bc=0;Bc<bd.length-1;Bc++){pd=bd[Bc];kd=bd[Bc+1];Ed=ac;Bd=Ed[0];var Jd=Ed[2];pd.x<Bd.x&&kd.x<Bd.x||pd.x>Jd.x&&kd.x>Jd.x||pd.y<Bd.y&&kd.y<Bd.y||pd.y>Jd.y&&kd.y>Jd.y?pd=!1:(Bd=B(pd,kd,Ed[0]),pd=Bd!==B(pd,kd,Ed[1])||Bd!==B(pd,kd,Ed[2])||
Bd!==B(pd,kd,Ed[3]));if(pd){bd=!0;break a}}bd=!1}return bd});Bb<Xb.length;Bb+=1)Jb.push(Xb[Bb]);Jb.sort(Ti);var Tb,bc={};Bb=function(ac){ac=Jb[ac];if(ac!==Tb){Tb=ac;ac=sa.featureIndexArray.get(ac);var Bc=null;sa.loadMatchingFeature(bc,ac.bucketIndex,ac.sourceLayerIndex,ac.featureIndex,Ra,za.layers,za.availableImages,K,S,fa,function(kd,pd,bd){return Bc||(Bc=ve(kd)),pd.queryIntersectsFeature(db,kd,bd,Bc,sa.z,x.transform,Ja,x.pixelPosMatrix)})}};for(Xb=0;Xb<Jb.length;Xb++)Bb(Xb);return bc};Hi.prototype.loadMatchingFeature=
function(x,K,S,fa,sa,za,Ja,Ra,db,jb,Bb){K=this.bucketLayerIDs[K];var Jb;if(!(Jb=!za))a:{for(Jb=0;Jb<za.length;Jb++)if(0<=K.indexOf(za[Jb])){Jb=!0;break a}Jb=!1}if(Jb&&(Jb=this.sourceLayerCoder.decode(S),S=this.vtLayers[Jb].feature(fa),sa.filter(new Oe(this.tileID.overscaledZ),S)))for(sa=this.getId(S,Jb),Jb=0;Jb<K.length;Jb++){var Xb=K[Jb];if(!(za&&0>za.indexOf(Xb))){var Tb=Ra[Xb];if(Tb){var bc={};void 0!==sa&&jb&&(bc=jb.getState(Tb.sourceLayer||"_geojsonTileLayer",sa));var ac=db[Xb];ac.paint=Zg(ac.paint,
Tb.paint,S,bc,Ja);ac.layout=Zg(ac.layout,Tb.layout,S,bc,Ja);if(Tb=!Bb||Bb(S,Tb,bc))bc=new il(S,this.z,this.x,this.y,sa),bc.layer=ac,ac=x[Xb],void 0===ac&&(ac=x[Xb]=[]),ac.push({featureIndex:fa,feature:bc,intersectionZ:Tb})}}}};Hi.prototype.lookupSymbolFeatures=function(x,K,S,fa,sa,za,Ja,Ra){var db={};this.loadVTLayers();sa=tb(sa);for(var jb=0;jb<x.length;jb+=1)this.loadMatchingFeature(db,S,fa,x[jb],sa,za,Ja,Ra,K);return db};Hi.prototype.hasLayer=function(x){for(var K=0,S=this.bucketLayerIDs;K<S.length;K+=
1)for(var fa=0,sa=S[K];fa<sa.length;fa+=1)if(x===sa[fa])return!0;return!1};Hi.prototype.getId=function(x,K){var S=x.id;return this.promoteId&&"boolean"==typeof(S=x.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[K]])&&(S=Number(S)),S};Mc("FeatureIndex",Hi,{omit:["rawTileData","sourceLayerCoder"]});var Cf=function(x,K){this.tileID=x;this.uid=qg++;this.uses=0;this.tileSize=K;this.buckets={};this.expirationTime=null;this.queryPadding=0;this.hasRTLText=this.hasSymbolBuckets=!1;
this.dependencies={};this.expiredRequestCount=0;this.state="loading"};Cf.prototype.registerFadeDuration=function(x){x+=this.timeAdded;x<$f.now()||this.fadeEndTime&&x<this.fadeEndTime||(this.fadeEndTime=x)};Cf.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state};Cf.prototype.loadVectorData=function(x,K,S){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",x){for(var fa in x.featureIndex&&(this.latestFeatureIndex=x.featureIndex,
x.rawTileData?(this.latestRawTileData=x.rawTileData,this.latestFeatureIndex.rawTileData=x.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=x.collisionBoxArray,this.buckets=function(Ra,db){var jb={};if(!db)return jb;for(var Bb=function(){var Tb=Xb[Jb],bc=Tb.layerIds.map(function(Bc){return db.getLayer(Bc)}).filter(Boolean);if(0!==bc.length){Tb.layers=bc;Tb.stateDependentLayerIds&&(Tb.stateDependentLayers=Tb.stateDependentLayerIds.map(function(Bc){return bc.filter(function(kd){return kd.id===
Bc})[0]}));for(var ac=0;ac<bc.length;ac+=1)jb[bc[ac].id]=Tb}},Jb=0,Xb=Ra;Jb<Xb.length;Jb+=1)Bb();return jb}(x.buckets,K.style),this.hasSymbolBuckets=!1,this.buckets){var sa=this.buckets[fa];if(sa instanceof Yd){if(this.hasSymbolBuckets=!0,!S)break;sa.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var za in this.buckets)if(S=this.buckets[za],S instanceof Yd&&S.hasRTLText){this.hasRTLText=!0;Nf.isLoading()||Nf.isLoaded()||"deferred"!==Hf||jj();break}for(var Ja in this.queryPadding=
0,this.buckets)za=this.buckets[Ja],this.queryPadding=Math.max(this.queryPadding,K.style.getLayer(Ja).queryRadius(za));x.imageAtlas&&(this.imageAtlas=x.imageAtlas);x.glyphAtlasImage&&(this.glyphAtlasImage=x.glyphAtlasImage)}else this.collisionBoxArray=new ek};Cf.prototype.unloadVectorData=function(){for(var x in this.buckets)this.buckets[x].destroy();this.buckets={};this.imageAtlasTexture&&this.imageAtlasTexture.destroy();this.imageAtlas&&(this.imageAtlas=null);this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy();
this.latestFeatureIndex=null;this.state="unloaded"};Cf.prototype.getBucket=function(x){return this.buckets[x.id]};Cf.prototype.upload=function(x){for(var K in this.buckets){var S=this.buckets[K];S.uploadPending()&&S.upload(x)}K=x.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Dj(x,this.imageAtlas.image,K.RGBA),this.imageAtlas.uploaded=!0);this.glyphAtlasImage&&(this.glyphAtlasTexture=new Dj(x,this.glyphAtlasImage,K.ALPHA),this.glyphAtlasImage=null)};Cf.prototype.prepare=
function(x){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(x,this.imageAtlasTexture)};Cf.prototype.queryRenderedFeatures=function(x,K,S,fa,sa,za,Ja,Ra,db,jb){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:fa,cameraQueryGeometry:sa,scale:za,tileSize:this.tileSize,pixelPosMatrix:jb,transform:Ra,params:Ja,queryPadding:this.queryPadding*db},x,K,S):{}};Cf.prototype.querySourceFeatures=function(x,K){var S=this.latestFeatureIndex;if(S&&
S.rawTileData){var fa=S.loadVTLayers(),sa=K?K.sourceLayer:"";if(fa=fa._geojsonTileLayer||fa[sa]){K=tb(K&&K.filter);var za=this.tileID.canonical,Ja=za.z,Ra=za.x;za=za.y;for(var db={z:Ja,x:Ra,y:za},jb=0;jb<fa.length;jb++){var Bb=fa.feature(jb);if(K.filter(new Oe(this.tileID.overscaledZ),Bb)){var Jb=S.getId(Bb,sa);Bb=new il(Bb,Ja,Ra,za,Jb);Bb.tile=db;x.push(Bb)}}}}};Cf.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state};Cf.prototype.patternsLoaded=
function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length};Cf.prototype.setExpiryData=function(x){var K=this.expirationTime;x.cacheControl?(x=u(x.cacheControl),x["max-age"]&&(this.expirationTime=Date.now()+1E3*x["max-age"])):x.expires&&(this.expirationTime=(new Date(x.expires)).getTime());if(this.expirationTime){x=Date.now();var S=!1;this.expirationTime>x?S=!1:K?this.expirationTime<K?S=!0:(K=this.expirationTime-K)?this.expirationTime=x+Math.max(K,3E4):S=!0:S=!0;S?(this.expiredRequestCount++,
this.state="expired"):this.expiredRequestCount=0}};Cf.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1E3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)};Cf.prototype.setFeatureState=function(x,K){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(x).length){var S=this.latestFeatureIndex.loadVTLayers(),fa;for(fa in this.buckets)if(K.style.hasLayer(fa)){var sa=
this.buckets[fa],za=sa.layers[0].sourceLayer||"_geojsonTileLayer",Ja=S[za];za=x[za];Ja&&za&&0!==Object.keys(za).length&&(sa.update(za,Ja,this.imageAtlas&&this.imageAtlas.patternPositions||{}),(Ja=K&&K.style&&K.style.getLayer(fa))&&(this.queryPadding=Math.max(this.queryPadding,Ja.queryRadius(sa))))}}};Cf.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil};Cf.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<$f.now()};Cf.prototype.clearFadeHold=
function(){this.symbolFadeHoldUntil=void 0};Cf.prototype.setHoldDuration=function(x){this.symbolFadeHoldUntil=$f.now()+x};Cf.prototype.setDependencies=function(x,K){for(var S={},fa=0;fa<K.length;fa+=1)S[K[fa]]=!0;this.dependencies[x]=S};Cf.prototype.hasDependency=function(x,K){for(var S=0;S<x.length;S+=1){var fa=this.dependencies[x[S]];if(fa)for(var sa=0,za=K;sa<za.length;sa+=1)if(fa[za[sa]])return!0}return!1};var fj=self.performance,Cl=function(x){this._marks={start:[x.url,"start"].join("#"),end:[x.url,
"end"].join("#"),measure:x.url.toString()};fj.mark(this._marks.start)};Cl.prototype.finish=function(){fj.mark(this._marks.end);var x=fj.getEntriesByName(this._marks.measure);return 0===x.length&&(fj.measure(this._marks.measure,this._marks.start,this._marks.end),x=fj.getEntriesByName(this._marks.measure),fj.clearMarks(this._marks.start),fj.clearMarks(this._marks.end),fj.clearMeasures(this._marks.measure)),x};a.Actor=ik;a.AlphaImage=ai;a.CanonicalTileID=Fj;a.CollisionBoxArray=ek;a.Color=Wd;a.DEMData=
Gi;a.DataConstantProperty=Ld;a.DictionaryCoder=hl;a.EXTENT=8192;a.ErrorEvent=rc;a.EvaluationParameters=Oe;a.Event=hc;a.Evented=oc;a.FeatureIndex=Hi;a.FillBucket=Pg;a.FillExtrusionBucket=Ng;a.ImageAtlas=Tc;a.ImagePosition=Hc;a.LineBucket=Ba;a.LngLat=Ze;a.LngLatBounds=sf;a.MercatorCoordinate=Ej;a.ONE_EM=24;a.OverscaledTileID=tf;a.Point=Vd;a.Point$1=Vd;a.Properties=Uf;a.Protobuf=Ee;a.RGBAImage=Bf;a.RequestManager=gg;a.RequestPerformance=Cl;a.ResourceType=xa;a.SegmentVector=lf;a.SourceFeatureState=jk;
a.StructArrayLayout1ui2=Ek;a.StructArrayLayout2f1f2i16=mg;a.StructArrayLayout2i4=Bh;a.StructArrayLayout3ui6=eh;a.StructArrayLayout4i8=jh;a.SymbolBucket=Yd;a.Texture=Dj;a.Tile=Cf;a.Transitionable=Rg;a.Uniform1f=gk;a.Uniform1i=nl;a.Uniform2f=ol;a.Uniform3f=pl;a.Uniform4f=bl;a.UniformColor=Jk;a.UniformMatrix4f=rl;a.UnwrappedTileID=Bl;a.ValidationError=jc;a.WritingMode=Xc;a.ZoomHistory=Mj;a.add=function(x,K,S){return x[0]=K[0]+S[0],x[1]=K[1]+S[1],x[2]=K[2]+S[2],x};a.addDynamicAttributes=sj;a.asyncAll=
function(x,K,S){if(!x.length)return S(null,[]);var fa=x.length,sa=Array(x.length),za=null;x.forEach(function(Ja,Ra){K(Ja,function(db,jb){db&&(za=db);sa[Ra]=jb;0==--fa&&S(za,sa)})})};a.bezier=m;a.bindAll=t;a.browser=$f;a.cacheEntryPossiblyAdded=function(x){++da>X&&(x.getActor().send("enforceCacheSizeLimit",U),da=0)};a.clamp=c;a.clearTileCache=function(x){var K=self.caches.delete("mapbox-tiles");x&&K.catch(x).then(function(){return x()})};a.clipLine=nf;a.clone=function(x){var K=new bg(16);return K[0]=
x[0],K[1]=x[1],K[2]=x[2],K[3]=x[3],K[4]=x[4],K[5]=x[5],K[6]=x[6],K[7]=x[7],K[8]=x[8],K[9]=x[9],K[10]=x[10],K[11]=x[11],K[12]=x[12],K[13]=x[13],K[14]=x[14],K[15]=x[15],K};a.clone$1=z;a.clone$2=function(x){var K=new bg(3);return K[0]=x[0],K[1]=x[1],K[2]=x[2],K};a.collisionCircleLayout=Lb;a.config=Ke;a.create=function(){var x=new bg(16);return bg!=Float32Array&&(x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[11]=0,x[12]=0,x[13]=0,x[14]=0),x[0]=1,x[5]=1,x[10]=1,x[15]=1,x};a.create$1=function(){var x=
new bg(9);return bg!=Float32Array&&(x[1]=0,x[2]=0,x[3]=0,x[5]=0,x[6]=0,x[7]=0),x[0]=1,x[4]=1,x[8]=1,x};a.create$2=function(){var x=new bg(4);return bg!=Float32Array&&(x[1]=0,x[2]=0),x[0]=1,x[3]=1,x};a.createCommonjsModule=e;a.createExpression=Fc;a.createLayout=Cd;a.createStyleLayer=function(x){return"custom"===x.type?new Le(x):new tg[x.type](x)};a.cross=function(x,K,S){var fa=K[0],sa=K[1];K=K[2];var za=S[0],Ja=S[1];S=S[2];return x[0]=sa*S-K*Ja,x[1]=K*za-fa*S,x[2]=fa*Ja-sa*za,x};a.deepEqual=function fa(K,
S){if(Array.isArray(K)){if(!Array.isArray(S)||K.length!==S.length)return!1;for(var sa=0;sa<K.length;sa++)if(!fa(K[sa],S[sa]))return!1;return!0}if("object"==typeof K&&null!==K&&null!==S){if("object"!=typeof S||Object.keys(K).length!==Object.keys(S).length)return!1;for(sa in K)if(!fa(K[sa],S[sa]))return!1;return!0}return K===S};a.dot=function(K,S){return K[0]*S[0]+K[1]*S[1]+K[2]*S[2]};a.dot$1=function(K,S){return K[0]*S[0]+K[1]*S[1]+K[2]*S[2]+K[3]*S[3]};a.ease=yk;a.emitValidationErrors=Dd;a.endsWith=
v;a.enforceCacheSizeLimit=function(K){P();Cg&&Cg.then(function(S){S.keys().then(function(fa){for(var sa=0;sa<fa.length-K;sa++)S.delete(fa[sa])})})};a.evaluateSizeForFeature=pj;a.evaluateSizeForZoom=qj;a.evaluateVariableOffset=rj;a.evented=Mi;a.extend=g;a.featureFilter=tb;a.filterObject=A;a.fromRotation=function(K,S){var fa=Math.sin(S);S=Math.cos(S);return K[0]=S,K[1]=fa,K[2]=0,K[3]=-fa,K[4]=S,K[5]=0,K[6]=0,K[7]=0,K[8]=1,K};a.getAnchorAlignment=Mh;a.getAnchorJustification=Si;a.getArrayBuffer=Fb;a.getImage=
sc;a.getJSON=function(K,S){return fb(g(K,{type:"json"}),S)};a.getRTLTextPluginStatus=function(){return Hf};a.getReferrer=Wa;a.getVideo=function(K,S){var fa=self.document.createElement("video");fa.muted=!0;fa.onloadstart=function(){S(null,fa)};for(var sa=0;sa<K.length;sa++){var za=self.document.createElement("source");var Ja=K[sa];var Ra=void 0;(Ra=self.document.createElement("a")).href=Ja;Ra.protocol===self.document.location.protocol&&Ra.host===self.document.location.host||(fa.crossOrigin="Anonymous");
za.src=K[sa];fa.appendChild(za)}return{cancel:function(){}}};a.identity=Ac;a.invert=function(K,S){var fa=S[0],sa=S[1],za=S[2],Ja=S[3],Ra=S[4],db=S[5],jb=S[6],Bb=S[7],Jb=S[8],Xb=S[9],Tb=S[10],bc=S[11],ac=S[12],Bc=S[13],kd=S[14];S=S[15];var pd=fa*db-sa*Ra,bd=fa*jb-za*Ra,Ed=fa*Bb-Ja*Ra,Bd=sa*jb-za*db,Jd=sa*Bb-Ja*db,Rd=za*Bb-Ja*jb,Xd=Jb*Bc-Xb*ac,be=Jb*kd-Tb*ac,ce=Jb*S-bc*ac,Ud=Xb*kd-Tb*Bc,Zd=Xb*S-bc*Bc,pe=Tb*S-bc*kd,Sd=pd*pe-bd*Zd+Ed*Ud+Bd*ce-Jd*be+Rd*Xd;return Sd?(K[0]=(db*pe-jb*Zd+Bb*Ud)*(Sd=1/Sd),
K[1]=(za*Zd-sa*pe-Ja*Ud)*Sd,K[2]=(Bc*Rd-kd*Jd+S*Bd)*Sd,K[3]=(Tb*Jd-Xb*Rd-bc*Bd)*Sd,K[4]=(jb*ce-Ra*pe-Bb*be)*Sd,K[5]=(fa*pe-za*ce+Ja*be)*Sd,K[6]=(kd*Ed-ac*Rd-S*bd)*Sd,K[7]=(Jb*Rd-Tb*Ed+bc*bd)*Sd,K[8]=(Ra*Zd-db*ce+Bb*Xd)*Sd,K[9]=(sa*ce-fa*Zd-Ja*Xd)*Sd,K[10]=(ac*Jd-Bc*Ed+S*pd)*Sd,K[11]=(Xb*Ed-Jb*Jd-bc*pd)*Sd,K[12]=(db*be-Ra*Ud-jb*Xd)*Sd,K[13]=(fa*Ud-sa*be+za*Xd)*Sd,K[14]=(Bc*bd-ac*Bd-kd*pd)*Sd,K[15]=(Jb*Bd-Xb*bd+Tb*pd)*Sd,K):null};a.isChar=Pd;a.isMapboxURL=I;a.keysDifference=function(K,S){var fa=[],
sa;for(sa in K)sa in S||fa.push(sa);return fa};a.makeRequest=fb;a.mapObject=w;a.mercatorXfromLng=Ph;a.mercatorYfromLat=Yg;a.mercatorZfromAltitude=function(K,S){return K/(fl*Math.cos(S*Math.PI/180))};a.mul=Yc;a.multiply=Yc;a.mvt=vh;a.normalize=function(K,S){var fa=S[0],sa=S[1],za=S[2];fa=fa*fa+sa*sa+za*za;return 0<fa&&(fa=1/Math.sqrt(fa)),K[0]=S[0]*fa,K[1]=S[1]*fa,K[2]=S[2]*fa,K};a.number=ya;a.offscreenCanvasSupported=Q;a.ortho=function(K,S,fa,sa,za,Ja,Ra){var db=1/(S-fa),jb=1/(sa-za),Bb=1/(Ja-Ra);
return K[0]=-2*db,K[1]=0,K[2]=0,K[3]=0,K[4]=0,K[5]=-2*jb,K[6]=0,K[7]=0,K[8]=0,K[9]=0,K[10]=2*Bb,K[11]=0,K[12]=(S+fa)*db,K[13]=(za+sa)*jb,K[14]=(Ra+Ja)*Bb,K[15]=1,K};a.parseGlyphPBF=function(K){return(new Ee(K)).readFields(Xj,[])};a.pbf=Ee;a.performSymbolLayout=function(K,S,fa,sa,za,Ja,Ra){K.createArrays();K.tilePixelRatio=8192/(512*K.overscaling);K.compareText={};K.iconsNeedLinear=!1;var db=K.layers[0].layout,jb=K.layers[0]._unevaluatedLayout._values,Bb={};if("composite"===K.textSizeData.kind){var Jb=
K.textSizeData,Xb=Jb.maxZoom;Bb.compositeTextSizes=[jb["text-size"].possiblyEvaluate(new Oe(Jb.minZoom),Ra),jb["text-size"].possiblyEvaluate(new Oe(Xb),Ra)]}"composite"===K.iconSizeData.kind&&(Jb=K.iconSizeData,Xb=Jb.maxZoom,Bb.compositeIconSizes=[jb["icon-size"].possiblyEvaluate(new Oe(Jb.minZoom),Ra),jb["icon-size"].possiblyEvaluate(new Oe(Xb),Ra)]);Bb.layoutTextSize=jb["text-size"].possiblyEvaluate(new Oe(K.zoom+1),Ra);Bb.layoutIconSize=jb["icon-size"].possiblyEvaluate(new Oe(K.zoom+1),Ra);Bb.textMaxSize=
jb["text-size"].possiblyEvaluate(new Oe(18));var Tb=24*db.get("text-line-height"),bc="map"===db.get("text-rotation-alignment")&&"point"!==db.get("symbol-placement"),ac=db.get("text-keep-upright"),Bc=db.get("text-size");jb=function(){var bd=pd[kd],Ed=db.get("text-font").evaluate(bd,{},Ra).join(","),Bd=Bc.evaluate(bd,{},Ra),Jd=Bb.layoutTextSize.evaluate(bd,{},Ra),Rd=Bb.layoutIconSize.evaluate(bd,{},Ra),Xd={horizontal:{},vertical:void 0},be=bd.text,ce=[0,0];if(be){var Ud=be.toString(),Zd=24*db.get("text-letter-spacing").evaluate(bd,
{},Ra),pe=function(ue){for(var ff=0;ff<ue.length;ff+=1)if(yf=ue[ff].charCodeAt(0),Pd.Arabic(yf)||Pd["Arabic Supplement"](yf)||Pd["Arabic Extended-A"](yf)||Pd["Arabic Presentation Forms-A"](yf)||Pd["Arabic Presentation Forms-B"](yf))return!1;var yf;return!0}(Ud)?Zd:0,Sd=db.get("text-anchor").evaluate(bd,{},Ra),Od=db.get("text-variable-anchor");Od||(ce=(Zd=db.get("text-radial-offset").evaluate(bd,{},Ra))?rj(Sd,[24*Zd,$d]):db.get("text-offset").evaluate(bd,{},Ra).map(function(ue){return 24*ue}));var Td=
bc?"center":db.get("text-justify").evaluate(bd,{},Ra),Be=db.get("symbol-placement"),Xe="point"===Be?24*db.get("text-max-width").evaluate(bd,{},Ra):0;Zd=function(){K.allowVerticalPlacement&&xe(Ud)&&(Xd.vertical=ph(be,S,fa,za,Ed,Xe,Tb,Sd,"left",pe,ce,Xc.vertical,!0,Be,Jd,Bd))};if(!bc&&Od){Od="auto"===Td?Od.map(function(ue){return Si(ue)}):[Td];Td=!1;for(var Lf=0;Lf<Od.length;Lf++){var rf=Od[Lf];if(!Xd.horizontal[rf])if(Td)Xd.horizontal[rf]=Xd.horizontal[0];else{var Ye=ph(be,S,fa,za,Ed,Xe,Tb,"center",
rf,pe,ce,Xc.horizontal,!1,Be,Jd,Bd);Ye&&(Xd.horizontal[rf]=Ye,Td=1===Ye.positionedLines.length)}}Zd()}else"auto"===Td&&(Td=Si(Sd)),(Od=ph(be,S,fa,za,Ed,Xe,Tb,Sd,Td,pe,ce,Xc.horizontal,!1,Be,Jd,Bd))&&(Xd.horizontal[Td]=Od),Zd(),xe(Ud)&&bc&&ac&&(Xd.vertical=ph(be,S,fa,za,Ed,Xe,Tb,Sd,Td,pe,ce,Xc.vertical,!1,Be,Jd,Bd))}Zd=void 0;Od=!1;bd.icon&&bd.icon.name&&(Td=sa[bd.icon.name])&&(Zd=function(ue,ff,yf){var If=Mh(yf);yf=ff[0]-ue.displaySize[0]*If.horizontalAlign;ff=ff[1]-ue.displaySize[1]*If.verticalAlign;
return{image:ue,top:ff,bottom:ff+ue.displaySize[1],left:yf,right:yf+ue.displaySize[0]}}(za[bd.icon.name],db.get("icon-offset").evaluate(bd,{},Ra),db.get("icon-anchor").evaluate(bd,{},Ra)),Od=Td.sdf,void 0===K.sdfIcons?K.sdfIcons=Td.sdf:K.sdfIcons!==Td.sdf&&y("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Td.pixelRatio!==K.pixelRatio||0!==db.get("icon-rotate").constantOr(1))&&(K.iconsNeedLinear=!0));Td=of(Xd.horizontal)||Xd.vertical;K.iconsInText=!!Td&&Td.iconsInText;(Td||
Zd)&&function(ue,ff,yf,If,Bj,Qg,bf,Sf,Ei,ej,Cj){var Mf=Qg.textMaxSize.evaluate(ff,{});void 0===Mf&&(Mf=bf);var Fi,jf=ue.layers[0].layout,xg=jf.get("icon-offset").evaluate(ff,{},Cj),Qe=of(yf.horizontal),Tf=bf/24,Ml=ue.tilePixelRatio*Tf;Mf=ue.tilePixelRatio*Mf/24;var Nl=ue.tilePixelRatio*Sf,fh=ue.tilePixelRatio*jf.get("symbol-spacing"),Ol=jf.get("text-padding")*ue.tilePixelRatio,Pl=jf.get("icon-padding")*ue.tilePixelRatio;Sf=jf.get("text-max-angle")/180*Math.PI;var Ql="map"===jf.get("text-rotation-alignment")&&
"point"!==jf.get("symbol-placement"),Rl="map"===jf.get("icon-rotation-alignment")&&"point"!==jf.get("symbol-placement"),Gj=jf.get("symbol-placement"),gj=fh/2,kk=jf.get("icon-text-fit");If&&"none"!==kk&&(ue.allowVerticalPlacement&&yf.vertical&&(Fi=Yj(If,yf.vertical,kk,jf.get("icon-text-fit-padding"),xg,Tf)),Qe&&(If=Yj(If,Qe,kk,jf.get("icon-text-fit-padding"),xg,Tf)));jf=function(Sl,Rk){0>Rk.x||8192<=Rk.x||0>Rk.y||8192<=Rk.y||function(kf,yh,jl,bi,Ii,kl,hj,gh,lk,Sk,mk,nk,wl,ll,Hj,Ij,Tk,Dl,Jj,Uk,Hg,ml,
El,ci,Tl){var Vk,ok,pk=kf.addToLineVertexArray(yh,jl),Wk=0,Fl=jl=0,Gl=0,qk=-1,xl=-1,Ji={},Hl=qi(""),yl=0,zl=0;if(void 0===gh._unevaluatedLayout.getValue("text-radial-offset")?(yl=(Vk=gh.layout.get("text-offset").evaluate(Hg,{},ci).map(function(Xk){return 24*Xk}))[0],zl=Vk[1]):(yl=24*gh.layout.get("text-radial-offset").evaluate(Hg,{},ci),zl=$d),kf.allowVerticalPlacement&&bi.vertical){Vk=gh.layout.get("text-rotate").evaluate(Hg,{},ci)+90;var Kj=new ad(lk,yh,Sk,mk,nk,bi.vertical,wl,ll,Hj,Vk);hj&&(ok=
new ad(lk,yh,Sk,mk,nk,hj,Tk,Dl,Hj,Vk))}if(Ii){var Ki=gh.layout.get("icon-rotate").evaluate(Hg,{});Wk="none"!==gh.layout.get("icon-text-fit");qk=og(Ii,Ki,El,Wk);hj=hj?og(hj,Ki,El,Wk):void 0;Ki=new ad(lk,yh,Sk,mk,nk,Ii,Tk,Dl,!1,Ki);Wk=4*qk.length;Tk=kf.iconSizeData;Ii=null;"source"===Tk.kind?32640<(Ii=[128*gh.layout.get("icon-size").evaluate(Hg,{})])[0]&&y(kf.layerIds[0]+': Value for "icon-size" is \x3e\x3d 255. Reduce your "icon-size".'):"composite"===Tk.kind&&(32640<(Ii=[128*ml.compositeIconSizes[0].evaluate(Hg,
{},ci),128*ml.compositeIconSizes[1].evaluate(Hg,{},ci)])[0]||32640<Ii[1])&&y(kf.layerIds[0]+': Value for "icon-size" is \x3e\x3d 255. Reduce your "icon-size".');kf.addSymbols(kf.icon,qk,Ii,Uk,Jj,Hg,!1,yh,pk.lineStartIndex,pk.lineLength,-1,ci);qk=kf.icon.placedSymbolArray.length-1;hj&&(jl=4*hj.length,kf.addSymbols(kf.icon,hj,Ii,Uk,Jj,Hg,Xc.vertical,yh,pk.lineStartIndex,pk.lineLength,-1,ci),xl=kf.icon.placedSymbolArray.length-1)}for(var Il in bi.horizontal){Jj=bi.horizontal[Il];if(!cg){Hl=qi(Jj.text);
var cg=gh.layout.get("text-rotate").evaluate(Hg,{},ci);cg=new ad(lk,yh,Sk,mk,nk,Jj,wl,ll,Hj,cg)}Uk=1===Jj.positionedLines.length;if(Fl+=Yf(kf,yh,Jj,kl,gh,Hj,Hg,Ij,pk,bi.vertical?Xc.horizontal:Xc.horizontalOnly,Uk?Object.keys(bi.horizontal):[Il],Ji,qk,ml,ci),Uk)break}bi.vertical&&(Gl+=Yf(kf,yh,bi.vertical,kl,gh,Hj,Hg,Ij,pk,Xc.vertical,["vertical"],Ji,xl,ml,ci));bi=cg?cg.boxStartIndex:kf.collisionBoxArray.length;kl=cg?cg.boxEndIndex:kf.collisionBoxArray.length;gh=Kj?Kj.boxStartIndex:kf.collisionBoxArray.length;
lk=Kj?Kj.boxEndIndex:kf.collisionBoxArray.length;mk=Ki?Ki.boxStartIndex:kf.collisionBoxArray.length;nk=Ki?Ki.boxEndIndex:kf.collisionBoxArray.length;ll=ok?ok.boxStartIndex:kf.collisionBoxArray.length;Hj=ok?ok.boxEndIndex:kf.collisionBoxArray.length;Ij=function(Xk,Jl){return Xk&&Xk.circleDiameter?Math.max(Xk.circleDiameter,Jl):Jl};cg=Ij(cg,-1);cg=Ij(Kj,cg);cg=Ij(Ki,cg);(Kj=-1<(cg=Ij(ok,cg))?1:0)&&(cg*=Tl/24);kf.glyphOffsetArray.length>=Yd.MAX_GLYPHS&&y("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");
void 0!==Hg.sortKey&&kf.addToSortKeyRanges(kf.symbolInstances.length,Hg.sortKey);kf.symbolInstances.emplaceBack(yh.x,yh.y,0<=Ji.right?Ji.right:-1,0<=Ji.center?Ji.center:-1,0<=Ji.left?Ji.left:-1,Ji.vertical||-1,qk,xl,Hl,bi,kl,gh,lk,mk,nk,ll,Hj,Sk,Fl,Gl,Wk,jl,Kj,0,wl,yl,zl,cg)}(ue,Rk,Sl,yf,If,Bj,Fi,ue.layers[0],ue.collisionBoxArray,ff.index,ff.sourceLayerIndex,ue.index,Ml,Ol,Ql,Ei,Nl,Pl,Rl,xg,ff,Qg,ej,Cj,bf)};if("line"===Gj)for(Tf=0,Gj=nf(ff.geometry,0,0,8192,8192);Tf<Gj.length;Tf+=1){kk=Gj[Tf];for(var Al=
0,Kl=xk(kk,fh,Sf,yf.vertical||Qe,If,24,Mf,ue.overscaling,8192);Al<Kl.length;Al+=1){var Ll=Kl[Al];Qe&&si(ue,Qe.text,gj,Ll)||jf(kk,Ll)}}else if("line-center"===Gj)for(fh=0,gj=ff.geometry;fh<gj.length;fh+=1)Tf=gj[fh],1<Tf.length&&(Gj=Ri(Tf,Sf,yf.vertical||Qe,If,24,Mf))&&jf(Tf,Gj);else if("Polygon"===ff.type)for(Qe=0,Mf=nj(ff.geometry,0);Qe<Mf.length;Qe+=1)Sf=Mf[Qe],fh=pg(Sf,16),jf(Sf[0],new hd(fh.x,fh.y,0));else if("LineString"===ff.type)for(Qe=0,Mf=ff.geometry;Qe<Mf.length;Qe+=1)Sf=Mf[Qe],jf(Sf,new hd(Sf[0].x,
Sf[0].y,0));else if("Point"===ff.type)for(Qe=0,Mf=ff.geometry;Qe<Mf.length;Qe+=1)for(Sf=0,fh=Mf[Qe];Sf<fh.length;Sf+=1)gj=fh[Sf],jf([gj],new hd(gj.x,gj.y,0))}(K,bd,Xd,Zd,sa,Bb,Jd,Rd,ce,Od,Ra)};for(var kd=0,pd=K.features;kd<pd.length;kd+=1)jb();Ja&&K.generateCollisionDebugBuffers()};a.perspective=function(K,S,fa,sa,za){var Ja;S=1/Math.tan(S/2);return K[0]=S/fa,K[1]=0,K[2]=0,K[3]=0,K[4]=0,K[5]=S,K[6]=0,K[7]=0,K[8]=0,K[9]=0,K[11]=-1,K[12]=0,K[13]=0,K[15]=0,null!=za&&za!==1/0?(K[10]=(za+sa)*(Ja=1/(sa-
za)),K[14]=2*za*sa*Ja):(K[10]=-1,K[14]=-2*sa),K};a.pick=function(K,S){for(var fa={},sa=0;sa<S.length;sa++){var za=S[sa];za in K&&(fa[za]=K[za])}return fa};a.plugin=Nf;a.polygonIntersectsPolygon=gf;a.postMapLoadEvent=ub;a.postTurnstileEvent=Vi;a.potpack=Ve;a.refProperties="type source source-layer minzoom maxzoom filter layout".split(" ");a.register=Mc;a.registerForPluginStateChange=function(K){return K({pluginStatus:Hf,pluginURL:Og}),Mi.on("pluginStateChange",K),K};a.rotate=function(K,S,fa){var sa=
S[0],za=S[1],Ja=S[2];S=S[3];var Ra=Math.sin(fa);fa=Math.cos(fa);return K[0]=sa*fa+Ja*Ra,K[1]=za*fa+S*Ra,K[2]=sa*-Ra+Ja*fa,K[3]=za*-Ra+S*fa,K};a.rotateX=function(K,S,fa){var sa=Math.sin(fa);fa=Math.cos(fa);var za=S[4],Ja=S[5],Ra=S[6],db=S[7],jb=S[8],Bb=S[9],Jb=S[10],Xb=S[11];return S!==K&&(K[0]=S[0],K[1]=S[1],K[2]=S[2],K[3]=S[3],K[12]=S[12],K[13]=S[13],K[14]=S[14],K[15]=S[15]),K[4]=za*fa+jb*sa,K[5]=Ja*fa+Bb*sa,K[6]=Ra*fa+Jb*sa,K[7]=db*fa+Xb*sa,K[8]=jb*fa-za*sa,K[9]=Bb*fa-Ja*sa,K[10]=Jb*fa-Ra*sa,K[11]=
Xb*fa-db*sa,K};a.rotateZ=function(K,S,fa){var sa=Math.sin(fa);fa=Math.cos(fa);var za=S[0],Ja=S[1],Ra=S[2],db=S[3],jb=S[4],Bb=S[5],Jb=S[6],Xb=S[7];return S!==K&&(K[8]=S[8],K[9]=S[9],K[10]=S[10],K[11]=S[11],K[12]=S[12],K[13]=S[13],K[14]=S[14],K[15]=S[15]),K[0]=za*fa+jb*sa,K[1]=Ja*fa+Bb*sa,K[2]=Ra*fa+Jb*sa,K[3]=db*fa+Xb*sa,K[4]=jb*fa-za*sa,K[5]=Bb*fa-Ja*sa,K[6]=Jb*fa-Ra*sa,K[7]=Xb*fa-db*sa,K};a.scale=function(K,S,fa){var sa=fa[0],za=fa[1];fa=fa[2];return K[0]=S[0]*sa,K[1]=S[1]*sa,K[2]=S[2]*sa,K[3]=S[3]*
sa,K[4]=S[4]*za,K[5]=S[5]*za,K[6]=S[6]*za,K[7]=S[7]*za,K[8]=S[8]*fa,K[9]=S[9]*fa,K[10]=S[10]*fa,K[11]=S[11]*fa,K[12]=S[12],K[13]=S[13],K[14]=S[14],K[15]=S[15],K};a.scale$1=function(K,S,fa){return K[0]=S[0]*fa,K[1]=S[1]*fa,K[2]=S[2]*fa,K[3]=S[3]*fa,K};a.scale$2=function(K,S,fa){return K[0]=S[0]*fa,K[1]=S[1]*fa,K[2]=S[2]*fa,K};a.setCacheLimits=function(K,S){U=K;X=S};a.setRTLTextPlugin=function(K,S,fa){if(void 0===fa&&(fa=!1),"deferred"===Hf||"loading"===Hf||"loaded"===Hf)throw Error("setRTLTextPlugin cannot be called multiple times.");
Og=$f.resolveURL(K);Hf="deferred";Nj=S;vd();fa||jj()};a.sphericalToCartesian=function(K){var S=K[0],fa=K[1];K=K[2];return fa+=90,fa*=Math.PI/180,K*=Math.PI/180,{x:S*Math.cos(fa)*Math.sin(K),y:S*Math.sin(fa)*Math.sin(K),z:S*Math.cos(K)}};a.sqrLen=function(K){var S=K[0];K=K[1];return S*S+K*K};a.styleSpec=Nb;a.sub=function(K,S,fa){return K[0]=S[0]-fa[0],K[1]=S[1]-fa[1],K[2]=S[2]-fa[2],K};a.symbolSize=id;a.transformMat3=function(K,S,fa){var sa=S[0],za=S[1];S=S[2];return K[0]=sa*fa[0]+za*fa[3]+S*fa[6],
K[1]=sa*fa[1]+za*fa[4]+S*fa[7],K[2]=sa*fa[2]+za*fa[5]+S*fa[8],K};a.transformMat4=md;a.translate=function(K,S,fa){var sa,za,Ja,Ra,db,jb,Bb,Jb,Xb,Tb,bc,ac,Bc=fa[0],kd=fa[1];fa=fa[2];return S===K?(K[12]=S[0]*Bc+S[4]*kd+S[8]*fa+S[12],K[13]=S[1]*Bc+S[5]*kd+S[9]*fa+S[13],K[14]=S[2]*Bc+S[6]*kd+S[10]*fa+S[14],K[15]=S[3]*Bc+S[7]*kd+S[11]*fa+S[15]):(za=S[1],Ja=S[2],Ra=S[3],db=S[4],jb=S[5],Bb=S[6],Jb=S[7],Xb=S[8],Tb=S[9],bc=S[10],ac=S[11],K[0]=sa=S[0],K[1]=za,K[2]=Ja,K[3]=Ra,K[4]=db,K[5]=jb,K[6]=Bb,K[7]=Jb,
K[8]=Xb,K[9]=Tb,K[10]=bc,K[11]=ac,K[12]=sa*Bc+db*kd+Xb*fa+S[12],K[13]=za*Bc+jb*kd+Tb*fa+S[13],K[14]=Ja*Bc+Bb*kd+bc*fa+S[14],K[15]=Ra*Bc+Jb*kd+ac*fa+S[15]),K};a.triggerPluginCompletionEvent=ij;a.uniqueId=function(){return qg++};a.validateCustomStyleLayer=function(K){var S=[],fa=K.id;return void 0===fa&&S.push({message:"layers."+fa+': missing required property "id"'}),void 0===K.render&&S.push({message:"layers."+fa+': missing required method "render"'}),K.renderingMode&&"2d"!==K.renderingMode&&"3d"!==
K.renderingMode&&S.push({message:"layers."+fa+': property "renderingMode" must be either "2d" or "3d"'}),S};a.validateLight=vj;a.validateStyle=od;a.values=function(K){var S=[],fa;for(fa in K)S.push(K[fa]);return S};a.vectorTile=vh;a.version="1.10.1";a.warnOnce=y;a.webpSupported=ah;a.window=self;a.wrap=d});r(["./shared"],function(a){function e(ya){var Ia=typeof ya;if("number"===Ia||"boolean"===Ia||"string"===Ia||null==ya)return JSON.stringify(ya);if(Array.isArray(ya)){Ia="[";for(var Na=0;Na<ya.length;Na+=
1)Ia+=e(ya[Na])+",";return Ia+"]"}Ia=Object.keys(ya).sort();Na="{";for(var Ta=0;Ta<Ia.length;Ta++)Na+=JSON.stringify(Ia[Ta])+":"+e(ya[Ia[Ta]])+",";return Na+"}"}function f(ya,Ia,Na){Ia=new a.EvaluationParameters(Ia);for(var Ta=0;Ta<ya.length;Ta+=1)ya[Ta].recalculate(Ia,Na)}function l(ya,Ia){var Na=a.getArrayBuffer(ya.request,function(Ta,hb,Ya,Ga){Ta?Ia(Ta):hb&&Ia(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(hb)),rawData:hb,cacheControl:Ya,expires:Ga})});return function(){Na.cancel();Ia()}}
function m(ya,Ia){if(0!==ya.length){c(ya[0],Ia);for(var Na=1;Na<ya.length;Na++)c(ya[Na],!Ia)}}function c(ya,Ia){for(var Na=0,Ta=0,hb=ya.length,Ya=hb-1;Ta<hb;Ya=Ta++)Na+=(ya[Ta][0]-ya[Ya][0])*(ya[Ya][1]+ya[Ta][1]);0<=Na!=!!Ia&&ya.reverse()}function d(ya,Ia){this.options=Ia||{};this.features=ya;this.length=ya.length}function g(ya,Ia){this.id="number"==typeof ya.id?ya.id:void 0;this.type=ya.type;this.rawGeometry=1===ya.type?[ya.geometry]:ya.geometry;this.properties=ya.tags;this.extent=Ia||4096}function h(ya){var Ia=
new a.pbf,Na;for(Na in ya.layers)Ia.writeMessage(3,q,ya.layers[Na]);return Ia.finish()}function q(ya,Ia){var Na;Ia.writeVarintField(15,ya.version||1);Ia.writeStringField(1,ya.name||"");Ia.writeVarintField(5,ya.extent||4096);var Ta={keys:[],values:[],keycache:{},valuecache:{}};for(Na=0;Na<ya.length;Na++)Ta.feature=ya.feature(Na),Ia.writeMessage(2,t,Ta);ya=Ta.keys;for(Na=0;Na<ya.length;Na++)Ia.writeStringField(3,ya[Na]);Ta=Ta.values;for(Na=0;Na<Ta.length;Na++)Ia.writeMessage(4,A,Ta[Na])}function t(ya,
Ia){var Na=ya.feature;void 0!==Na.id&&Ia.writeVarintField(1,Na.id);Ia.writeMessage(2,v,ya);Ia.writeVarintField(3,Na.type);Ia.writeMessage(4,w,Na)}function v(ya,Ia){var Na=ya.feature,Ta=ya.keys,hb=ya.values,Ya=ya.keycache;ya=ya.valuecache;for(var Ga in Na.properties){var Pa=Ya[Ga];void 0===Pa&&(Ta.push(Ga),Ya[Ga]=Pa=Ta.length-1);Ia.writeVarint(Pa);Pa=Na.properties[Ga];var Va=typeof Pa;"string"!==Va&&"boolean"!==Va&&"number"!==Va&&(Pa=JSON.stringify(Pa));Va=Va+":"+Pa;var va=ya[Va];void 0===va&&(hb.push(Pa),
ya[Va]=va=hb.length-1);Ia.writeVarint(va)}}function w(ya,Ia){var Na=ya.loadGeometry();ya=ya.type;for(var Ta=0,hb=0,Ya=Na.length,Ga=0;Ga<Ya;Ga++){var Pa=Na[Ga],Va=1;1===ya&&(Va=Pa.length);Ia.writeVarint((Va<<3)+1);Va=3===ya?Pa.length-1:Pa.length;for(var va=0;va<Va;va++){1===va&&1!==ya&&Ia.writeVarint((Va-1<<3)+2);var Ea=Pa[va].x-Ta,Qa=Pa[va].y-hb;Ia.writeVarint(Ea<<1^Ea>>31);Ia.writeVarint(Qa<<1^Qa>>31);Ta+=Ea;hb+=Qa}3===ya&&Ia.writeVarint(15)}}function A(ya,Ia){var Na=typeof ya;"string"===Na?Ia.writeStringField(1,
ya):"boolean"===Na?Ia.writeBooleanField(7,ya):"number"===Na&&(0!=ya%1?Ia.writeDoubleField(3,ya):0>ya?Ia.writeSVarintField(6,ya):Ia.writeVarintField(5,ya))}function z(ya,Ia,Na,Ta){y(ya,Na,Ta);y(Ia,2*Na,2*Ta);y(Ia,2*Na+1,2*Ta+1)}function y(ya,Ia,Na){var Ta=ya[Ia];ya[Ia]=ya[Na];ya[Na]=Ta}function B(ya){return{type:"Feature",id:ya.id,properties:C(ya),geometry:{type:"Point",coordinates:[(Ta=ya.x,360*(Ta-.5)),(Ia=ya.y,Na=(180-360*Ia)*Math.PI/180,360*Math.atan(Math.exp(Na))/Math.PI-90)]}};var Ia,Na,Ta}function C(ya){var Ia=
ya.numPoints,Na=1E4<=Ia?Math.round(Ia/1E3)+"k":1E3<=Ia?Math.round(Ia/100)/10+"k":Ia;return F(F({},ya.properties),{cluster:!0,cluster_id:ya.id,point_count:Ia,point_count_abbreviated:Na})}function u(ya){ya=Math.sin(ya*Math.PI/180);ya=.5-.25*Math.log((1+ya)/(1-ya))/Math.PI;return 0>ya?0:1<ya?1:ya}function F(ya,Ia){for(var Na in Ia)ya[Na]=Ia[Na];return ya}function H(ya){return ya.x}function J(ya){return ya.y}function I(ya,Ia,Na,Ta){ya={id:void 0===ya?null:ya,type:Ia,geometry:Na,tags:Ta,minX:1/0,minY:1/
0,maxX:-1/0,maxY:-1/0};Ia=ya.geometry;Na=ya.type;if("Point"===Na||"MultiPoint"===Na||"LineString"===Na)M(ya,Ia);else if("Polygon"===Na||"MultiLineString"===Na)for(Na=0;Na<Ia.length;Na++)M(ya,Ia[Na]);else if("MultiPolygon"===Na)for(Na=0;Na<Ia.length;Na++)for(Ta=0;Ta<Ia[Na].length;Ta++)M(ya,Ia[Na][Ta]);return ya}function M(ya,Ia){for(var Na=0;Na<Ia.length;Na+=3)ya.minX=Math.min(ya.minX,Ia[Na]),ya.minY=Math.min(ya.minY,Ia[Na+1]),ya.maxX=Math.max(ya.maxX,Ia[Na]),ya.maxY=Math.max(ya.maxY,Ia[Na+1])}function E(ya,
Ia,Na,Ta){if(Ia.geometry){var hb=Ia.geometry.coordinates,Ya=Ia.geometry.type,Ga=Math.pow(Na.tolerance/((1<<Na.maxZoom)*Na.extent),2),Pa=[],Va=Ia.id;if(Na.promoteId?Va=Ia.properties[Na.promoteId]:Na.generateId&&(Va=Ta||0),"Point"===Ya)L(hb,Pa);else if("MultiPoint"===Ya)for(var va=0;va<hb.length;va++)L(hb[va],Pa);else if("LineString"===Ya)P(hb,Pa,Ga,!1);else if("MultiLineString"===Ya){if(Na.lineMetrics){for(va=0;va<hb.length;va++)P(hb[va],Pa=[],Ga,!1),ya.push(I(Va,"LineString",Pa,Ia.properties));return}N(hb,
Pa,Ga,!1)}else if("Polygon"===Ya)N(hb,Pa,Ga,!0);else{if("MultiPolygon"!==Ya){if("GeometryCollection"===Ya){for(va=0;va<Ia.geometry.geometries.length;va++)E(ya,{id:Va,geometry:Ia.geometry.geometries[va],properties:Ia.properties},Na,Ta);return}throw Error("Input data is not a valid GeoJSON object.");}for(va=0;va<hb.length;va++)Na=[],N(hb[va],Na,Ga,!0),Pa.push(Na)}ya.push(I(Va,Ya,Pa,Ia.properties))}}function L(ya,Ia){Ia.push(ya[0]/360+.5);Ia.push(Q(ya[1]));Ia.push(0)}function P(ya,Ia,Na,Ta){for(var hb,
Ya,Ga=0,Pa=0;Pa<ya.length;Pa++){var Va=ya[Pa][0]/360+.5,va=Q(ya[Pa][1]);Ia.push(Va);Ia.push(va);Ia.push(0);0<Pa&&(Ga+=Ta?(hb*va-Va*Ya)/2:Math.sqrt(Math.pow(Va-hb,2)+Math.pow(va-Ya,2)));hb=Va;Ya=va}ya=Ia.length-3;Ia[2]=1;(function Za(Qa,$a,eb,pb){for(var nb,sb=pb,Cb=eb-$a>>1,Ib=eb-$a,fc=Qa[$a],qc=Qa[$a+1],Cc=Qa[eb],cd=Qa[eb+1],Qc=$a+3;Qc<eb;Qc+=3){var Wc=Qa[Qc];var Fc=Qa[Qc+1],ld=fc,yb=qc,Wb=Cc-ld,Dc=cd-yb;if(0!==Wb||0!==Dc){var ec=((Wc-ld)*Wb+(Fc-yb)*Dc)/(Wb*Wb+Dc*Dc);1<ec?(ld=Cc,yb=cd):0<ec&&(ld+=
Wb*ec,yb+=Dc*ec)}Wc=(Wb=Wc-ld)*Wb+(Dc=Fc-yb)*Dc;Wc>sb?(nb=Qc,sb=Wc):Wc===sb&&(Wb=Math.abs(Qc-Cb),Wb<Ib&&(nb=Qc,Ib=Wb))}sb>pb&&(3<nb-$a&&Za(Qa,$a,nb,pb),Qa[nb+2]=sb,3<eb-nb&&Za(Qa,nb,eb,pb))})(Ia,0,ya,Na);Ia[ya+2]=1;Ia.size=Math.abs(Ga);Ia.start=0;Ia.end=Ia.size}function N(ya,Ia,Na,Ta){for(var hb=0;hb<ya.length;hb++){var Ya=[];P(ya[hb],Ya,Na,Ta);Ia.push(Ya)}}function Q(ya){ya=Math.sin(ya*Math.PI/180);ya=.5-.25*Math.log((1+ya)/(1-ya))/Math.PI;return 0>ya?0:1<ya?1:ya}function O(ya,Ia,Na,Ta,hb,Ya,Ga,
Pa){if(Ta/=Ia,Ya>=(Na/=Ia)&&Ga<Ta)return ya;if(Ga<Na||Ya>=Ta)return null;Ia=[];for(Ya=0;Ya<ya.length;Ya++){Ga=ya[Ya];var Va=Ga.geometry,va=Ga.type,Ea=0===hb?Ga.minX:Ga.minY,Qa=0===hb?Ga.maxX:Ga.maxY;if(Ea>=Na&&Qa<Ta)Ia.push(Ga);else if(!(Qa<Na||Ea>=Ta)){Ea=[];if("Point"===va||"MultiPoint"===va){Qa=Ea;for(var $a=Na,eb=Ta,pb=hb,Za=0;Za<Va.length;Za+=3){var nb=Va[Za+pb];nb>=$a&&nb<=eb&&(Qa.push(Va[Za]),Qa.push(Va[Za+1]),Qa.push(Va[Za+2]))}}else if("LineString"===va)T(Va,Ea,Na,Ta,hb,!1,Pa.lineMetrics);
else if("MultiLineString"===va)Z(Va,Ea,Na,Ta,hb,!1);else if("Polygon"===va)Z(Va,Ea,Na,Ta,hb,!0);else if("MultiPolygon"===va)for(Qa=0;Qa<Va.length;Qa++)$a=[],Z(Va[Qa],$a,Na,Ta,hb,!0),$a.length&&Ea.push($a);if(Ea.length)if(Pa.lineMetrics&&"LineString"===va)for(Qa=0;Qa<Ea.length;Qa++)Ia.push(I(Ga.id,va,Ea[Qa],Ga.tags));else"LineString"!==va&&"MultiLineString"!==va||(1===Ea.length?(va="LineString",Ea=Ea[0]):va="MultiLineString"),"Point"!==va&&"MultiPoint"!==va||(va=3===Ea.length?"Point":"MultiPoint"),
Ia.push(I(Ga.id,va,Ea,Ga.tags))}}return Ia.length?Ia:null}function T(ya,Ia,Na,Ta,hb,Ya,Ga){for(var Pa,Va,va=V(ya),Ea=0===hb?aa:Y,Qa=ya.start,$a=0;$a<ya.length-3;$a+=3){var eb=ya[$a],pb=ya[$a+1],Za=ya[$a+2],nb=ya[$a+3],sb=ya[$a+4],Cb=0===hb?eb:pb,Ib=0===hb?nb:sb,fc=!1;Ga&&(Pa=Math.sqrt(Math.pow(eb-nb,2)+Math.pow(pb-sb,2)));if(Cb<Na)Ib>Na&&(Va=Ea(va,eb,pb,nb,sb,Na),Ga&&(va.start=Qa+Pa*Va));else if(Cb>Ta)Ib<Ta&&(Va=Ea(va,eb,pb,nb,sb,Ta),Ga&&(va.start=Qa+Pa*Va));else{var qc=va,Cc=pb;qc.push(eb);qc.push(Cc);
qc.push(Za)}Ib<Na&&Cb>=Na&&(Va=Ea(va,eb,pb,nb,sb,Na),fc=!0);Ib>Ta&&Cb<=Ta&&(Va=Ea(va,eb,pb,nb,sb,Ta),fc=!0);!Ya&&fc&&(Ga&&(va.end=Qa+Pa*Va),Ia.push(va),va=V(ya));Ga&&(Qa+=Pa)}Za=ya.length-3;eb=ya[Za];pb=ya[Za+1];Za=ya[Za+2];(Cb=0===hb?eb:pb)>=Na&&Cb<=Ta&&(ya=va,Na=Za,ya.push(eb),ya.push(pb),ya.push(Na));Za=va.length-3;Ya&&3<=Za&&(va[Za]!==va[0]||va[Za+1]!==va[1])&&(Ya=va,eb=va[1],pb=va[2],Ya.push(va[0]),Ya.push(eb),Ya.push(pb));va.length&&Ia.push(va)}function V(ya){var Ia=[];return Ia.size=ya.size,
Ia.start=ya.start,Ia.end=ya.end,Ia}function Z(ya,Ia,Na,Ta,hb,Ya){for(var Ga=0;Ga<ya.length;Ga++)T(ya[Ga],Ia,Na,Ta,hb,Ya,!1)}function aa(ya,Ia,Na,Ta,hb,Ya){Ia=(Ya-Ia)/(Ta-Ia);return ya.push(Ya),ya.push(Na+(hb-Na)*Ia),ya.push(1),Ia}function Y(ya,Ia,Na,Ta,hb,Ya){Na=(Ya-Na)/(hb-Na);return ya.push(Ia+(Ta-Ia)*Na),ya.push(Ya),ya.push(1),Na}function ea(ya,Ia){for(var Na=[],Ta=0;Ta<ya.length;Ta++){var hb=ya[Ta],Ya=hb.type;if("Point"===Ya||"MultiPoint"===Ya||"LineString"===Ya)var Ga=ca(hb.geometry,Ia);else if("MultiLineString"===
Ya||"Polygon"===Ya){Ga=[];for(var Pa=0;Pa<hb.geometry.length;Pa++)Ga.push(ca(hb.geometry[Pa],Ia))}else if("MultiPolygon"===Ya)for(Ga=[],Pa=0;Pa<hb.geometry.length;Pa++){for(var Va=[],va=0;va<hb.geometry[Pa].length;va++)Va.push(ca(hb.geometry[Pa][va],Ia));Ga.push(Va)}Na.push(I(hb.id,Ya,Ga,hb.tags))}return Na}function ca(ya,Ia){var Na=[];Na.size=ya.size;void 0!==ya.start&&(Na.start=ya.start,Na.end=ya.end);for(var Ta=0;Ta<ya.length;Ta+=3)Na.push(ya[Ta]+Ia,ya[Ta+1],ya[Ta+2]);return Na}function ba(ya,
Ia){if(ya.transformed)return ya;var Na,Ta,hb=1<<ya.z,Ya=ya.x,Ga=ya.y;for(Na=0;Na<ya.features.length;Na++){var Pa=ya.features[Na],Va=Pa.geometry;var va=Pa.type;if(Pa.geometry=[],1===va)for(va=0;va<Va.length;va+=2)Pa.geometry.push([Math.round(Ia*(Va[va]*hb-Ya)),Math.round(Ia*(Va[va+1]*hb-Ga))]);else for(va=0;va<Va.length;va++){var Ea=[];for(Ta=0;Ta<Va[va].length;Ta+=2)Ea.push([Math.round(Ia*(Va[va][Ta]*hb-Ya)),Math.round(Ia*(Va[va][Ta+1]*hb-Ga))]);Pa.geometry.push(Ea)}}return ya.transformed=!0,ya}function ka(ya,
Ia,Na,Ta,hb,Ya){var Ga=Ta*Ta;if(0<Ta&&Ia.size<(hb?Ga:Ta))Na.numPoints+=Ia.length/3;else{for(var Pa=[],Va=0;Va<Ia.length;Va+=3)(0===Ta||Ia[Va+2]>Ga)&&(Na.numSimplified++,Pa.push(Ia[Va]),Pa.push(Ia[Va+1])),Na.numPoints++;if(hb){Ia=Ta=0;Na=Pa.length;for(hb=Na-2;Ia<Na;hb=Ia,Ia+=2)Ta+=(Pa[Ia]-Pa[hb])*(Pa[Ia+1]+Pa[hb+1]);if(0<Ta===Ya)for(Ia=0,Na=Pa.length;Ia<Na/2;Ia+=2)Ya=Pa[Ia],Ta=Pa[Ia+1],Pa[Ia]=Pa[Na-2-Ia],Pa[Ia+1]=Pa[Na-1-Ia],Pa[Na-2-Ia]=Ya,Pa[Na-1-Ia]=Ta}ya.push(Pa)}}function qa(ya,Ia){var Na=(Ia=
this.options=function(Ta,hb){for(var Ya in hb)Ta[Ya]=hb[Ya];return Ta}(Object.create(this.options),Ia)).debug;if(Na&&console.time("preprocess data"),0>Ia.maxZoom||24<Ia.maxZoom)throw Error("maxZoom should be in the 0-24 range");if(Ia.promoteId&&Ia.generateId)throw Error("promoteId and generateId cannot be used together.");ya=function(Ta,hb){var Ya=[];if("FeatureCollection"===Ta.type)for(var Ga=0;Ga<Ta.features.length;Ga++)E(Ya,Ta.features[Ga],hb,Ga);else E(Ya,"Feature"===Ta.type?Ta:{geometry:Ta},
hb);return Ya}(ya,Ia);this.tiles={};this.tileCoords=[];Na&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ia.indexMaxZoom,Ia.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0);(ya=function(Ta,hb){var Ya=hb.buffer/hb.extent,Ga=Ta,Pa=O(Ta,1,-1-Ya,Ya,0,-1,2,hb),Va=O(Ta,1,1-Ya,2+Ya,0,-1,2,hb);return(Pa||Va)&&(Ga=O(Ta,1,-Ya,1+Ya,0,-1,2,hb)||[],Pa&&(Ga=ea(Pa,1).concat(Ga)),Va&&(Ga=Ga.concat(ea(Va,-1)))),Ga}(ya,Ia)).length&&this.splitTile(ya,0,
0,0);Na&&(ya.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function pa(ya,Ia){ya=ya.tileID.canonical;if(!this._geoJSONIndex)return Ia(null,null);ya=this._geoJSONIndex.getTile(ya.z,ya.x,ya.y);if(!ya)return Ia(null,null);ya=new Ca(ya.features);var Na=Xa(ya);0===Na.byteOffset&&Na.byteLength===Na.buffer.byteLength||(Na=new Uint8Array(Na));Ia(null,
{vectorTile:ya,rawData:Na.buffer})}var oa=function(ya){this.keyCache={};ya&&this.replace(ya)};oa.prototype.replace=function(ya){this._layerConfigs={};this._layers={};this.update(ya,[])};oa.prototype.update=function(ya,Ia){for(var Na=this,Ta=0;Ta<ya.length;Ta+=1){var hb=ya[Ta];this._layerConfigs[hb.id]=hb;var Ya=this._layers[hb.id]=a.createStyleLayer(hb);Ya._featureFilter=a.featureFilter(Ya.filter);this.keyCache[hb.id]&&delete this.keyCache[hb.id]}for(ya=0;ya<Ia.length;ya+=1)Ta=Ia[ya],delete this.keyCache[Ta],
delete this._layerConfigs[Ta],delete this._layers[Ta];this.familiesBySource={};Ia=0;for(ya=function(Pa,Va){for(var va={},Ea=0;Ea<Pa.length;Ea++){var Qa;if(!(Qa=Va&&Va[Pa[Ea].id])){Qa=Pa[Ea];for(var $a="",eb=0,pb=a.refProperties;eb<pb.length;eb+=1)$a+="/"+e(Qa[pb[eb]]);Qa=$a}Va&&(Va[Pa[Ea].id]=Qa);($a=va[Qa])||($a=va[Qa]=[]);$a.push(Pa[Ea])}Pa=[];for(var Za in va)Pa.push(va[Za]);return Pa}(a.values(this._layerConfigs),this.keyCache);Ia<ya.length;Ia+=1)if(Ta=ya[Ia].map(function(Pa){return Na._layers[Pa.id]}),
Ya=Ta[0],"none"!==Ya.visibility){var Ga=Ya.source||"";(hb=this.familiesBySource[Ga])||(hb=this.familiesBySource[Ga]={});Ya=Ya.sourceLayer||"_geojsonTileLayer";(Ga=hb[Ya])||(Ga=hb[Ya]=[]);Ga.push(Ta)}};var ja=function(ya){var Ia={},Na=[];for(va in ya){var Ta=ya[va],hb=Ia[va]={},Ya;for(Ya in Ta){var Ga=Ta[+Ya];if(Ga&&0!==Ga.bitmap.width&&0!==Ga.bitmap.height){var Pa={x:0,y:0,w:Ga.bitmap.width+2,h:Ga.bitmap.height+2};Na.push(Pa);hb[Ya]={rect:Pa,metrics:Ga.metrics}}}}Na=a.potpack(Na);Na=new a.AlphaImage({width:Na.w||
1,height:Na.h||1});for(var Va in ya){var va=ya[Va];for(var Ea in va)(Ta=va[+Ea])&&0!==Ta.bitmap.width&&0!==Ta.bitmap.height&&(hb=Ia[Va][Ea].rect,a.AlphaImage.copy(Ta.bitmap,Na,{x:0,y:0},{x:hb.x+1,y:hb.y+1},Ta.bitmap))}this.image=Na;this.positions=Ia};a.register("GlyphAtlas",ja);var ra=function(ya){this.tileID=new a.OverscaledTileID(ya.tileID.overscaledZ,ya.tileID.wrap,ya.tileID.canonical.z,ya.tileID.canonical.x,ya.tileID.canonical.y);this.uid=ya.uid;this.zoom=ya.zoom;this.pixelRatio=ya.pixelRatio;
this.tileSize=ya.tileSize;this.source=ya.source;this.overscaling=this.tileID.overscaleFactor();this.showCollisionBoxes=ya.showCollisionBoxes;this.collectResourceTiming=!!ya.collectResourceTiming;this.returnDependencies=!!ya.returnDependencies;this.promoteId=ya.promoteId};ra.prototype.parse=function(ya,Ia,Na,Ta,hb){function Ya(){if(va)return hb(va);if(Ea&&Qa&&$a){var Cc=new ja(Ea),cd=new a.ImageAtlas(Qa,$a),Qc;for(Qc in eb){var Wc=eb[Qc];Wc instanceof a.SymbolBucket?(f(Wc.layers,this.zoom,Na),a.performSymbolLayout(Wc,
Ea,Cc.positions,Qa,cd.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Wc.hasPattern&&(Wc instanceof a.LineBucket||Wc instanceof a.FillBucket||Wc instanceof a.FillExtrusionBucket)&&(f(Wc.layers,this.zoom,Na),Wc.addFeatures(pb,this.tileID.canonical,cd.patternPositions))}this.status="done";hb(null,{buckets:a.values(eb).filter(function(Fc){return!Fc.isEmpty()}),featureIndex:Va,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Cc.image,imageAtlas:cd,glyphMap:this.returnDependencies?
Ea:null,iconMap:this.returnDependencies?Qa:null,glyphPositions:this.returnDependencies?Cc.positions:null})}}var Ga=this;this.status="parsing";this.data=ya;this.collisionBoxArray=new a.CollisionBoxArray;var Pa=new a.DictionaryCoder(Object.keys(ya.layers).sort()),Va=new a.FeatureIndex(this.tileID,this.promoteId);Va.bucketLayerIDs=[];var va,Ea,Qa,$a,eb={},pb={featureIndex:Va,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Na};Ia=Ia.familiesBySource[this.source];for(var Za in Ia){var nb=
ya.layers[Za];if(nb){1===nb.version&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+Za+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var sb=Pa.encode(Za),Cb=[],Ib=0;Ib<nb.length;Ib++){var fc=nb.feature(Ib),qc=Va.getId(fc,Za);Cb.push({feature:fc,id:qc,index:Ib,sourceLayerIndex:sb})}nb=0;for(Ib=Ia[Za];nb<Ib.length;nb+=1)fc=Ib[nb],qc=fc[0],qc.minzoom&&this.zoom<Math.floor(qc.minzoom)||qc.maxzoom&&this.zoom>=qc.maxzoom||"none"!==qc.visibility&&(f(fc,
this.zoom,Na),(eb[qc.id]=qc.createBucket({index:Va.bucketLayerIDs.length,layers:fc,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:sb,sourceID:this.source})).populate(Cb,pb,this.tileID.canonical),Va.bucketLayerIDs.push(fc.map(function(Cc){return Cc.id})))}}ya=a.mapObject(pb.glyphDependencies,function(Cc){return Object.keys(Cc).map(Number)});Object.keys(ya).length?Ta.send("getGlyphs",{uid:this.uid,stacks:ya},function(Cc,
cd){va||(va=Cc,Ea=cd,Ya.call(Ga))}):Ea={};ya=Object.keys(pb.iconDependencies);ya.length?Ta.send("getImages",{icons:ya,source:this.source,tileID:this.tileID,type:"icons"},function(Cc,cd){va||(va=Cc,Qa=cd,Ya.call(Ga))}):Qa={};ya=Object.keys(pb.patternDependencies);ya.length?Ta.send("getImages",{icons:ya,source:this.source,tileID:this.tileID,type:"patterns"},function(Cc,cd){va||(va=Cc,$a=cd,Ya.call(Ga))}):$a={};Ya.call(this)};var ha=function(ya,Ia,Na,Ta){this.actor=ya;this.layerIndex=Ia;this.availableImages=
Na;this.loadVectorData=Ta||l;this.loading={};this.loaded={}};ha.prototype.loadTile=function(ya,Ia){var Na=this,Ta=ya.uid;this.loading||(this.loading={});var hb=!!(ya&&ya.request&&ya.request.collectResourceTiming)&&new a.RequestPerformance(ya.request),Ya=this.loading[Ta]=new ra(ya);Ya.abort=this.loadVectorData(ya,function(Ga,Pa){if(delete Na.loading[Ta],Ga||!Pa)return Ya.status="done",Na.loaded[Ta]=Ya,Ia(Ga);var Va=Pa.rawData,va={};Pa.expires&&(va.expires=Pa.expires);Pa.cacheControl&&(va.cacheControl=
Pa.cacheControl);var Ea={};hb&&(Ga=hb.finish())&&(Ea.resourceTiming=JSON.parse(JSON.stringify(Ga)));Ya.vectorTile=Pa.vectorTile;Ya.parse(Pa.vectorTile,Na.layerIndex,Na.availableImages,Na.actor,function(Qa,$a){if(Qa||!$a)return Ia(Qa);Ia(null,a.extend({rawTileData:Va.slice(0)},$a,va,Ea))});Na.loaded=Na.loaded||{};Na.loaded[Ta]=Ya})};ha.prototype.reloadTile=function(ya,Ia){var Na=this,Ta=this.loaded,hb=ya.uid,Ya=this;if(Ta&&Ta[hb]){var Ga=Ta[hb];Ga.showCollisionBoxes=ya.showCollisionBoxes;ya=function(Pa,
Va){var va=Ga.reloadCallback;va&&(delete Ga.reloadCallback,Ga.parse(Ga.vectorTile,Ya.layerIndex,Na.availableImages,Ya.actor,va));Ia(Pa,Va)};"parsing"===Ga.status?Ga.reloadCallback=ya:"done"===Ga.status&&(Ga.vectorTile?Ga.parse(Ga.vectorTile,this.layerIndex,this.availableImages,this.actor,ya):ya())}};ha.prototype.abortTile=function(ya,Ia){var Na=this.loading;ya=ya.uid;Na&&Na[ya]&&Na[ya].abort&&(Na[ya].abort(),delete Na[ya]);Ia()};ha.prototype.removeTile=function(ya,Ia){var Na=this.loaded;ya=ya.uid;
Na&&Na[ya]&&delete Na[ya];Ia()};var la=a.window.ImageBitmap,ua=function(){this.loaded={}};ua.prototype.loadTile=function(ya,Ia){var Na=ya.uid,Ta=ya.encoding;ya=ya.rawImageData;ya=la&&ya instanceof la?this.getImageData(ya):ya;Ta=new a.DEMData(Na,ya,Ta);this.loaded=this.loaded||{};this.loaded[Na]=Ta;Ia(null,Ta)};ua.prototype.getImageData=function(ya){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ya.width,ya.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d"));
this.offscreenCanvas.width=ya.width;this.offscreenCanvas.height=ya.height;this.offscreenCanvasContext.drawImage(ya,0,0,ya.width,ya.height);ya=this.offscreenCanvasContext.getImageData(-1,-1,ya.width+2,ya.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:ya.width,height:ya.height},ya.data)};ua.prototype.removeTile=function(ya){var Ia=this.loaded;ya=ya.uid;Ia&&Ia[ya]&&delete Ia[ya]};var na=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,
wa=function(ya){this._feature=ya;this.extent=a.EXTENT;this.type=ya.type;this.properties=ya.tags;"id"in ya&&!isNaN(ya.id)&&(this.id=parseInt(ya.id,10))};wa.prototype.loadGeometry=function(){if(1===this._feature.type){for(var ya=[],Ia=0,Na=this._feature.geometry;Ia<Na.length;Ia+=1){var Ta=Na[Ia];ya.push([new a.Point$1(Ta[0],Ta[1])])}return ya}ya=[];Ia=0;for(Na=this._feature.geometry;Ia<Na.length;Ia+=1){Ta=[];for(var hb=0,Ya=Na[Ia];hb<Ya.length;hb+=1){var Ga=Ya[hb];Ta.push(new a.Point$1(Ga[0],Ga[1]))}ya.push(Ta)}return ya};
wa.prototype.toGeoJSON=function(ya,Ia,Na){return na.call(this,ya,Ia,Na)};var Ca=function(ya){this.layers={_geojsonTileLayer:this};this.name="_geojsonTileLayer";this.extent=a.EXTENT;this.length=ya.length;this._features=ya};Ca.prototype.feature=function(ya){return new wa(this._features[ya])};var Fa=a.vectorTile.VectorTileFeature;d.prototype.feature=function(ya){return new g(this.features[ya],this.options.extent)};g.prototype.loadGeometry=function(){var ya=this.rawGeometry;this.geometry=[];for(var Ia=
0;Ia<ya.length;Ia++){for(var Na=ya[Ia],Ta=[],hb=0;hb<Na.length;hb++)Ta.push(new a.Point$1(Na[hb][0],Na[hb][1]));this.geometry.push(Ta)}return this.geometry};g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ya=this.geometry,Ia=1/0,Na=-1/0,Ta=1/0,hb=-1/0,Ya=0;Ya<ya.length;Ya++)for(var Ga=ya[Ya],Pa=0;Pa<Ga.length;Pa++){var Va=Ga[Pa];Ia=Math.min(Ia,Va.x);Na=Math.max(Na,Va.x);Ta=Math.min(Ta,Va.y);hb=Math.max(hb,Va.y)}return[Ia,Ta,Na,hb]};g.prototype.toGeoJSON=Fa.prototype.toGeoJSON;
var Xa=h;Xa.fromVectorTileJs=h;Xa.fromGeojsonVt=function(ya,Ia){Ia=Ia||{};var Na={},Ta;for(Ta in ya)Na[Ta]=new d(ya[Ta].features,Ia),Na[Ta].name=Ta,Na[Ta].version=Ia.version,Na[Ta].extent=Ia.extent;return h({layers:Na})};Xa.GeoJSONWrapper=d;var ab=function(ya){return ya[0]},gb=function(ya){return ya[1]},bb=function(ya,Ia,Na,Ta,hb){void 0===Ia&&(Ia=ab);void 0===Na&&(Na=gb);void 0===Ta&&(Ta=64);void 0===hb&&(hb=Float64Array);this.nodeSize=Ta;this.points=ya;var Ya=this.ids=new (65536>ya.length?Uint16Array:
Uint32Array)(ya.length);hb=this.coords=new hb(2*ya.length);for(var Ga=0;Ga<ya.length;Ga++)Ya[Ga]=Ga,hb[2*Ga]=Ia(ya[Ga]),hb[2*Ga+1]=Na(ya[Ga]);!function pb(Va,va,Ea,Qa,$a,eb){if(!($a-Qa<=Ea)){var Za=Qa+$a>>1;!function cd(sb,Cb,Ib,fc,qc,Cc){for(;qc>fc;){if(600<qc-fc){var Qc=qc-fc+1,Wc=Ib-fc+1,Fc=Math.log(Qc),ld=.5*Math.exp(2*Fc/3);Fc=.5*Math.sqrt(Fc*ld*(Qc-ld)/Qc)*(0>Wc-Qc/2?-1:1);cd(sb,Cb,Ib,Math.max(fc,Math.floor(Ib-Wc*ld/Qc+Fc)),Math.min(qc,Math.floor(Ib+(Qc-Wc)*ld/Qc+Fc)),Cc)}Qc=Cb[2*Ib+Cc];Wc=
fc;ld=qc;z(sb,Cb,fc,Ib);for(Cb[2*qc+Cc]>Qc&&z(sb,Cb,fc,qc);Wc<ld;){z(sb,Cb,Wc,ld);Wc++;for(ld--;Cb[2*Wc+Cc]<Qc;)Wc++;for(;Cb[2*ld+Cc]>Qc;)ld--}Cb[2*fc+Cc]===Qc?z(sb,Cb,fc,ld):z(sb,Cb,++ld,qc);ld<=Ib&&(fc=ld+1);Ib<=ld&&(qc=ld-1)}}(Va,va,Za,Qa,$a,eb%2);pb(Va,va,Ea,Qa,Za-1,eb+1);pb(Va,va,Ea,Za+1,$a,eb+1)}}(Ya,hb,Ta,0,Ya.length-1,0)};bb.prototype.range=function(ya,Ia,Na,Ta){for(var hb=this.ids,Ya=this.coords,Ga=this.nodeSize,Pa,Va,va=[0,hb.length-1,0],Ea=[];va.length;){var Qa=va.pop(),$a=va.pop(),eb=
va.pop();if($a-eb<=Ga)for(Qa=eb;Qa<=$a;Qa++)Va=Ya[2*Qa+1],(Pa=Ya[2*Qa])>=ya&&Pa<=Na&&Va>=Ia&&Va<=Ta&&Ea.push(hb[Qa]);else{var pb=Math.floor((eb+$a)/2);Va=Ya[2*pb+1];(Pa=Ya[2*pb])>=ya&&Pa<=Na&&Va>=Ia&&Va<=Ta&&Ea.push(hb[pb]);var Za=(Qa+1)%2;(0===Qa?ya<=Pa:Ia<=Va)&&(va.push(eb),va.push(pb-1),va.push(Za));(0===Qa?Na>=Pa:Ta>=Va)&&(va.push(pb+1),va.push($a),va.push(Za))}}return Ea};bb.prototype.within=function(ya,Ia,Na){for(var Ta=this.ids,hb=this.coords,Ya=this.nodeSize,Ga=[0,Ta.length-1,0],Pa=[],Va=
Na*Na;Ga.length;){var va=Ga.pop(),Ea=Ga.pop(),Qa=Ga.pop();if(Ea-Qa<=Ya)for(va=Qa;va<=Ea;va++){Qa=hb[2*va]-ya;var $a=hb[2*va+1]-Ia;Qa*Qa+$a*$a<=Va&&Pa.push(Ta[va])}else{$a=Math.floor((Qa+Ea)/2);var eb=hb[2*$a],pb=hb[2*$a+1],Za=eb-ya,nb=pb-Ia;Za*Za+nb*nb<=Va&&Pa.push(Ta[$a]);Za=(va+1)%2;(0===va?ya-Na<=eb:Ia-Na<=pb)&&(Ga.push(Qa),Ga.push($a-1),Ga.push(Za));(0===va?ya+Na>=eb:Ia+Na>=pb)&&(Ga.push($a+1),Ga.push(Ea),Ga.push(Za))}}return Pa};var La={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,
generateId:!1,reduce:null,map:function(ya){return ya}},kb=function(ya){this.options=F(Object.create(La),ya);this.trees=Array(this.options.maxZoom+1)};kb.prototype.load=function(ya){var Ia=this.options,Na=Ia.log,Ta=Ia.minZoom,hb=Ia.maxZoom;Ia=Ia.nodeSize;Na&&console.time("total time");var Ya="prepare "+ya.length+" points";Na&&console.time(Ya);this.points=ya;for(var Ga=[],Pa=0;Pa<ya.length;Pa++)if(ya[Pa].geometry){var Va=Ga,va=Va.push;var Ea=Pa;var Qa=ya[Pa].geometry.coordinates;Ea={x:Qa[0]/360+.5,
y:u(Qa[1]),zoom:1/0,index:Ea,parentId:-1};va.call(Va,Ea)}this.trees[hb+1]=new bb(Ga,H,J,Ia,Float32Array);Na&&console.timeEnd(Ya);for(ya=hb;ya>=Ta;ya--)hb=+Date.now(),Ga=this._cluster(Ga,ya),this.trees[ya]=new bb(Ga,H,J,Ia,Float32Array),Na&&console.log("z%d: %d clusters in %dms",ya,Ga.length,+Date.now()-hb);return Na&&console.timeEnd("total time"),this};kb.prototype.getClusters=function(ya,Ia){var Na=((ya[0]+180)%360+360)%360-180,Ta=Math.max(-90,Math.min(90,ya[1])),hb=180===ya[2]?180:((ya[2]+180)%
360+360)%360-180,Ya=Math.max(-90,Math.min(90,ya[3]));if(360<=ya[2]-ya[0])Na=-180,hb=180;else if(Na>hb)return Na=this.getClusters([Na,Ta,180,Ya],Ia),Ta=this.getClusters([-180,Ta,hb,Ya],Ia),Na.concat(Ta);Ia=this.trees[this._limitZoom(Ia)];ya=[];var Ga=0;for(Ta=Ia.range(Na/360+.5,u(Ya),hb/360+.5,u(Ta));Ga<Ta.length;Ga+=1)hb=Ia.points[Ta[Ga]],ya.push(hb.numPoints?B(hb):this.points[hb.index]);return ya};kb.prototype.getChildren=function(ya){var Ia=this._getOriginId(ya),Na=this._getOriginZoom(ya),Ta=this.trees[Na];
if(!Ta)throw Error("No cluster with the specified id.");var hb=Ta.points[Ia];if(!hb)throw Error("No cluster with the specified id.");Ia=[];var Ya=0;for(Na=Ta.within(hb.x,hb.y,this.options.radius/(this.options.extent*Math.pow(2,Na-1)));Ya<Na.length;Ya+=1)hb=Ta.points[Na[Ya]],hb.parentId===ya&&Ia.push(hb.numPoints?B(hb):this.points[hb.index]);if(0===Ia.length)throw Error("No cluster with the specified id.");return Ia};kb.prototype.getLeaves=function(ya,Ia,Na){var Ta=[];return this._appendLeaves(Ta,
ya,Ia||10,Na||0,0),Ta};kb.prototype.getTile=function(ya,Ia,Na){var Ta=this.trees[this._limitZoom(ya)];ya=Math.pow(2,ya);var hb=this.options;hb=hb.radius/hb.extent;var Ya=(Na-hb)/ya,Ga=(Na+1+hb)/ya,Pa={features:[]};return this._addTileFeatures(Ta.range((Ia-hb)/ya,Ya,(Ia+1+hb)/ya,Ga),Ta.points,Ia,Na,ya,Pa),0===Ia&&this._addTileFeatures(Ta.range(1-hb/ya,Ya,1,Ga),Ta.points,ya,Na,ya,Pa),Ia===ya-1&&this._addTileFeatures(Ta.range(0,Ya,hb/ya,Ga),Ta.points,-1,Na,ya,Pa),Pa.features.length?Pa:null};kb.prototype.getClusterExpansionZoom=
function(ya){for(var Ia=this._getOriginZoom(ya)-1;Ia<=this.options.maxZoom;){ya=this.getChildren(ya);if(Ia++,1!==ya.length)break;ya=ya[0].properties.cluster_id}return Ia};kb.prototype._appendLeaves=function(ya,Ia,Na,Ta,hb){var Ya=0;for(Ia=this.getChildren(Ia);Ya<Ia.length;Ya+=1){var Ga=Ia[Ya],Pa=Ga.properties;if(Pa&&Pa.cluster?hb+Pa.point_count<=Ta?hb+=Pa.point_count:hb=this._appendLeaves(ya,Pa.cluster_id,Na,Ta,hb):hb<Ta?hb++:ya.push(Ga),ya.length===Na)break}return hb};kb.prototype._addTileFeatures=
function(ya,Ia,Na,Ta,hb,Ya){for(var Ga=0;Ga<ya.length;Ga+=1){var Pa=Ia[ya[Ga]],Va=Pa.numPoints,va={type:1,geometry:[[Math.round(this.options.extent*(Pa.x*hb-Na)),Math.round(this.options.extent*(Pa.y*hb-Ta))]],tags:Va?C(Pa):this.points[Pa.index].properties},Ea=void 0;Va?Ea=Pa.id:this.options.generateId?Ea=Pa.index:this.points[Pa.index].id&&(Ea=this.points[Pa.index].id);void 0!==Ea&&(va.id=Ea);Ya.features.push(va)}};kb.prototype._limitZoom=function(ya){return Math.max(this.options.minZoom,Math.min(ya,
this.options.maxZoom+1))};kb.prototype._cluster=function(ya,Ia){var Na=[],Ta=this.options,hb=Ta.reduce;Ta=Ta.radius/(Ta.extent*Math.pow(2,Ia));for(var Ya=0;Ya<ya.length;Ya++){var Ga=ya[Ya];if(!(Ga.zoom<=Ia)){Ga.zoom=Ia;for(var Pa=this.trees[Ia+1],Va=Pa.within(Ga.x,Ga.y,Ta),va=Ga.numPoints||1,Ea=Ga.x*va,Qa=Ga.y*va,$a=hb&&1<va?this._map(Ga,!0):null,eb=(Ya<<5)+(Ia+1)+this.points.length,pb=0;pb<Va.length;pb+=1){var Za=Pa.points[Va[pb]];if(!(Za.zoom<=Ia)){Za.zoom=Ia;var nb=Za.numPoints||1;Ea+=Za.x*nb;
Qa+=Za.y*nb;va+=nb;Za.parentId=eb;hb&&($a||($a=this._map(Ga,!0)),hb($a,this._map(Za)))}}1===va?Na.push(Ga):(Ga.parentId=eb,Na.push({x:Ea/va,y:Qa/va,zoom:1/0,id:eb,parentId:-1,numPoints:va,properties:$a}))}}return Na};kb.prototype._getOriginId=function(ya){return ya-this.points.length>>5};kb.prototype._getOriginZoom=function(ya){return(ya-this.points.length)%32};kb.prototype._map=function(ya,Ia){if(ya.numPoints)return Ia?F({},ya.properties):ya.properties;ya=this.points[ya.index].properties;var Na=
this.options.map(ya);return Ia&&Na===ya?F({},Na):Na};qa.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1E5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};qa.prototype.splitTile=function(ya,Ia,Na,Ta,hb,Ya,Ga){for(var Pa=[ya,Ia,Na,Ta],Va=this.options,va=Va.debug;Pa.length;){Ta=Pa.pop();Na=Pa.pop();Ia=Pa.pop();ya=Pa.pop();var Ea=1<<Ia,Qa=32*((1<<Ia)*Ta+Na)+Ia,$a=this.tiles[Qa],eb;if(eb=!$a){1<va&&console.time("creation");$a=this.tiles;eb=ya;for(var pb=
Va,Za=Ia===pb.maxZoom?0:pb.tolerance/((1<<Ia)*pb.extent),nb={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Na,y:Ta,z:Ia,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},sb=0;sb<eb.length;sb++){nb.numFeatures++;var Cb=void 0,Ib=nb,fc=eb[sb],qc=Za,Cc=pb,cd=fc.geometry,Qc=fc.type,Wc=[];if("Point"===Qc||"MultiPoint"===Qc)for(var Fc=0;Fc<cd.length;Fc+=3)Wc.push(cd[Fc]),Wc.push(cd[Fc+1]),Ib.numPoints++,Ib.numSimplified++;else if("LineString"===Qc)ka(Wc,cd,Ib,qc,!1,!1);else if("MultiLineString"===
Qc||"Polygon"===Qc)for(Fc=0;Fc<cd.length;Fc++)ka(Wc,cd[Fc],Ib,qc,"Polygon"===Qc,0===Fc);else if("MultiPolygon"===Qc)for(var ld=0;ld<cd.length;ld++){var yb=cd[ld];for(Fc=0;Fc<yb.length;Fc++)ka(Wc,yb[Fc],Ib,qc,!0,0===Fc)}if(Wc.length){qc=fc.tags||null;if("LineString"===Qc&&Cc.lineMetrics){for(Cb in qc={},fc.tags)qc[Cb]=fc.tags[Cb];qc.mapbox_clip_start=cd.start/cd.size;qc.mapbox_clip_end=cd.end/cd.size}Cb={geometry:Wc,type:"Polygon"===Qc||"MultiPolygon"===Qc?3:"LineString"===Qc||"MultiLineString"===
Qc?2:1,tags:qc};null!==fc.id&&(Cb.id=fc.id);Ib.features.push(Cb)}Ib=eb[sb].minX;fc=eb[sb].minY;Cb=eb[sb].maxX;Cc=eb[sb].maxY;Ib<nb.minX&&(nb.minX=Ib);fc<nb.minY&&(nb.minY=fc);Cb>nb.maxX&&(nb.maxX=Cb);Cc>nb.maxY&&(nb.maxY=Cc)}eb=($a=$a[Qa]=nb,this.tileCoords.push({z:Ia,x:Na,y:Ta}),va)}eb&&(1<va&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ia,Na,Ta,$a.numFeatures,$a.numPoints,$a.numSimplified),console.timeEnd("creation")),Qa="z"+Ia,this.stats[Qa]=(this.stats[Qa]||0)+1,this.total++);
if($a.source=ya,hb){if(Ia===Va.maxZoom||Ia===hb)continue;Qa=1<<hb-Ia;if(Na!==Math.floor(Ya/Qa)||Ta!==Math.floor(Ga/Qa))continue}else if(Ia===Va.indexMaxZoom||$a.numPoints<=Va.indexMaxPoints)continue;if($a.source=null,0!==ya.length)1<va&&console.time("clipping"),sb=.5*Va.buffer/Va.extent,Ib=.5-sb,fc=.5+sb,Cb=1+sb,Qa=eb=pb=Za=null,nb=O(ya,Ea,Na-sb,Na+fc,0,$a.minX,$a.maxX,Va),ya=O(ya,Ea,Na+Ib,Na+Cb,0,$a.minX,$a.maxX,Va),nb&&(Qa=O(nb,Ea,Ta-sb,Ta+fc,1,$a.minY,$a.maxY,Va),eb=O(nb,Ea,Ta+Ib,Ta+Cb,1,$a.minY,
$a.maxY,Va)),ya&&(pb=O(ya,Ea,Ta-sb,Ta+fc,1,$a.minY,$a.maxY,Va),Za=O(ya,Ea,Ta+Ib,Ta+Cb,1,$a.minY,$a.maxY,Va)),1<va&&console.timeEnd("clipping"),Pa.push(Qa||[],Ia+1,2*Na,2*Ta),Pa.push(eb||[],Ia+1,2*Na,2*Ta+1),Pa.push(pb||[],Ia+1,2*Na+1,2*Ta),Pa.push(Za||[],Ia+1,2*Na+1,2*Ta+1)}};qa.prototype.getTile=function(ya,Ia,Na){var Ta=this.options,hb=Ta.extent;Ta=Ta.debug;if(0>ya||24<ya)return null;var Ya=1<<ya;Ya=Ia=(Ia%Ya+Ya)%Ya;Ya=32*((1<<ya)*Na+Ya)+ya;if(this.tiles[Ya])return ba(this.tiles[Ya],hb);1<Ta&&console.log("drilling down to z%d-%d-%d",
ya,Ia,Na);for(var Ga,Pa=ya,Va=Ia,va=Na;!Ga&&0<Pa;)Pa--,Va=Math.floor(Va/2),va=Math.floor(va/2),Ga=this.tiles[32*((1<<Pa)*va+Va)+Pa];return Ga&&Ga.source?(1<Ta&&console.log("found parent tile z%d-%d-%d",Pa,Va,va),1<Ta&&console.time("drilling down"),this.splitTile(Ga.source,Pa,Va,va,ya,Ia,Na),1<Ta&&console.timeEnd("drilling down"),this.tiles[Ya]?ba(this.tiles[Ya],hb):null):null};var mb=function(ya){function Ia(Na,Ta,hb,Ya){ya.call(this,Na,Ta,hb,pa);Ya&&(this.loadGeoJSON=Ya)}return ya&&(Ia.__proto__=
ya),(Ia.prototype=Object.create(ya&&ya.prototype)).constructor=Ia,Ia.prototype.loadData=function(Na,Ta){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});this._pendingCallback=Ta;this._pendingLoadDataParams=Na;this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ia.prototype._loadData=function(){var Na=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ta=this._pendingCallback,hb=this._pendingLoadDataParams;delete this._pendingCallback;
delete this._pendingLoadDataParams;var Ya=!!(hb&&hb.request&&hb.request.collectResourceTiming)&&new a.RequestPerformance(hb.request);this.loadGeoJSON(hb,function(Ga,Pa){if(Ga||!Pa)return Ta(Ga);if("object"!=typeof Pa)return Ta(Error("Input data given to '"+hb.source+"' is not a valid GeoJSON object."));!function Qa(va,Ea){var $a=va&&va.type;if("FeatureCollection"===$a)for($a=0;$a<va.features.length;$a++)Qa(va.features[$a],Ea);else if("GeometryCollection"===$a)for($a=0;$a<va.geometries.length;$a++)Qa(va.geometries[$a],
Ea);else if("Feature"===$a)Qa(va.geometry,Ea);else if("Polygon"===$a)m(va.coordinates,Ea);else if("MultiPolygon"===$a)for($a=0;$a<va.coordinates.length;$a++)m(va.coordinates[$a],Ea);return va}(Pa,!0);try{Na._geoJSONIndex=hb.cluster?(new kb(function(va){var Ea=va.superclusterOptions;va=va.clusterProperties;if(!va||!Ea)return Ea;for(var Qa={},$a={},eb={accumulated:null,zoom:0},pb={properties:null},Za=Object.keys(va),nb=0;nb<Za.length;nb+=1){var sb=Za[nb],Cb=va[sb],Ib=Cb[0];Cb=a.createExpression(Cb[1]);
Ib=a.createExpression("string"==typeof Ib?[Ib,["accumulated"],["get",sb]]:Ib);Qa[sb]=Cb.value;$a[sb]=Ib.value}return Ea.map=function(fc){pb.properties=fc;fc={};for(var qc=0;qc<Za.length;qc+=1){var Cc=Za[qc];fc[Cc]=Qa[Cc].evaluate(eb,pb)}return fc},Ea.reduce=function(fc,qc){pb.properties=qc;for(qc=0;qc<Za.length;qc+=1){var Cc=Za[qc];eb.accumulated=fc[Cc];fc[Cc]=$a[Cc].evaluate(eb,pb)}},Ea}(hb))).load(Pa.features):new qa(Pa,hb.geojsonVtOptions)}catch(va){return Ta(va)}Na.loaded={};Ga={};Ya&&(Pa=Ya.finish())&&
(Ga.resourceTiming={},Ga.resourceTiming[hb.source]=JSON.parse(JSON.stringify(Pa)));Ta(null,Ga)})}},Ia.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Ia.prototype.reloadTile=function(Na,Ta){var hb=this.loaded;return hb&&hb[Na.uid]?ya.prototype.reloadTile.call(this,Na,Ta):this.loadTile(Na,Ta)},Ia.prototype.loadGeoJSON=function(Na,Ta){if(Na.request)a.getJSON(Na.request,Ta);else{if("string"!=typeof Na.data)return Ta(Error("Input data given to '"+
Na.source+"' is not a valid GeoJSON object."));try{return Ta(null,JSON.parse(Na.data))}catch(hb){return Ta(Error("Input data given to '"+Na.source+"' is not a valid GeoJSON object."))}}},Ia.prototype.removeSource=function(Na,Ta){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});Ta()},Ia.prototype.getClusterExpansionZoom=function(Na,Ta){try{Ta(null,this._geoJSONIndex.getClusterExpansionZoom(Na.clusterId))}catch(hb){Ta(hb)}},Ia.prototype.getClusterChildren=function(Na,Ta){try{Ta(null,
this._geoJSONIndex.getChildren(Na.clusterId))}catch(hb){Ta(hb)}},Ia.prototype.getClusterLeaves=function(Na,Ta){try{Ta(null,this._geoJSONIndex.getLeaves(Na.clusterId,Na.limit,Na.offset))}catch(hb){Ta(hb)}},Ia}(ha);Fa=function(ya){var Ia=this;this.self=ya;this.actor=new a.Actor(ya,this);this.layerIndexes={};this.availableImages={};this.workerSourceTypes={vector:ha,geojson:mb};this.workerSources={};this.demWorkerSources={};this.self.registerWorkerSource=function(Na,Ta){if(Ia.workerSourceTypes[Na])throw Error('Worker source with name "'+
Na+'" already registered.');Ia.workerSourceTypes[Na]=Ta};this.self.registerRTLTextPlugin=function(Na){if(a.plugin.isParsed())throw Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=Na.applyArabicShaping;a.plugin.processBidirectionalText=Na.processBidirectionalText;a.plugin.processStyledBidirectionalText=Na.processStyledBidirectionalText}};return Fa.prototype.setReferrer=function(ya,Ia){this.referrer=Ia},Fa.prototype.setImages=function(ya,Ia,Na){for(var Ta in this.availableImages[ya]=
Ia,this.workerSources[ya]){var hb=this.workerSources[ya][Ta],Ya;for(Ya in hb)hb[Ya].availableImages=Ia}Na()},Fa.prototype.setLayers=function(ya,Ia,Na){this.getLayerIndex(ya).replace(Ia);Na()},Fa.prototype.updateLayers=function(ya,Ia,Na){this.getLayerIndex(ya).update(Ia.layers,Ia.removedIds);Na()},Fa.prototype.loadTile=function(ya,Ia,Na){this.getWorkerSource(ya,Ia.type,Ia.source).loadTile(Ia,Na)},Fa.prototype.loadDEMTile=function(ya,Ia,Na){this.getDEMWorkerSource(ya,Ia.source).loadTile(Ia,Na)},Fa.prototype.reloadTile=
function(ya,Ia,Na){this.getWorkerSource(ya,Ia.type,Ia.source).reloadTile(Ia,Na)},Fa.prototype.abortTile=function(ya,Ia,Na){this.getWorkerSource(ya,Ia.type,Ia.source).abortTile(Ia,Na)},Fa.prototype.removeTile=function(ya,Ia,Na){this.getWorkerSource(ya,Ia.type,Ia.source).removeTile(Ia,Na)},Fa.prototype.removeDEMTile=function(ya,Ia){this.getDEMWorkerSource(ya,Ia.source).removeTile(Ia)},Fa.prototype.removeSource=function(ya,Ia,Na){if(this.workerSources[ya]&&this.workerSources[ya][Ia.type]&&this.workerSources[ya][Ia.type][Ia.source]){var Ta=
this.workerSources[ya][Ia.type][Ia.source];delete this.workerSources[ya][Ia.type][Ia.source];void 0!==Ta.removeSource?Ta.removeSource(Ia,Na):Na()}},Fa.prototype.loadWorkerSource=function(ya,Ia,Na){try{this.self.importScripts(Ia.url),Na()}catch(Ta){Na(Ta.toString())}},Fa.prototype.syncRTLPluginState=function(ya,Ia,Na){try{a.plugin.setState(Ia);var Ta=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&null!=Ta){this.self.importScripts(Ta);var hb=a.plugin.isParsed();Na(hb?void 0:Error("RTL Text Plugin failed to import scripts from "+
Ta),hb)}}catch(Ya){Na(Ya.toString())}},Fa.prototype.getAvailableImages=function(ya){ya=this.availableImages[ya];return ya||(ya=[]),ya},Fa.prototype.getLayerIndex=function(ya){var Ia=this.layerIndexes[ya];return Ia||(Ia=this.layerIndexes[ya]=new oa),Ia},Fa.prototype.getWorkerSource=function(ya,Ia,Na){var Ta=this;return this.workerSources[ya]||(this.workerSources[ya]={}),this.workerSources[ya][Ia]||(this.workerSources[ya][Ia]={}),this.workerSources[ya][Ia][Na]||(this.workerSources[ya][Ia][Na]=new this.workerSourceTypes[Ia]({send:function(hb,
Ya,Ga){Ta.actor.send(hb,Ya,Ga,ya)}},this.getLayerIndex(ya),this.getAvailableImages(ya))),this.workerSources[ya][Ia][Na]},Fa.prototype.getDEMWorkerSource=function(ya,Ia){return this.demWorkerSources[ya]||(this.demWorkerSources[ya]={}),this.demWorkerSources[ya][Ia]||(this.demWorkerSources[ya][Ia]=new ua),this.demWorkerSources[ya][Ia]},Fa.prototype.enforceCacheSizeLimit=function(ya,Ia){a.enforceCacheSizeLimit(Ia)},"undefined"!=typeof WorkerGlobalScope&&void 0!==a.window&&a.window instanceof WorkerGlobalScope&&
(a.window.worker=new Fa(a.window)),Fa});r(["./shared"],function(a){function e(ub){if(!kb)return ub[0];for(var U=0;U<ub.length;U++)if(ub[U]in kb)return ub[U];return ub[0]}function f(ub,U,X,W,da,xa){this.fontSize=ub||24;this.buffer=void 0===U?3:U;this.cutoff=W||.25;this.fontFamily=da||"sans-serif";this.fontWeight=xa||"normal";this.radius=X||8;ub=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=ub;this.ctx=this.canvas.getContext("2d");
this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily;this.ctx.textBaseline="middle";this.ctx.fillStyle="black";this.gridOuter=new Float64Array(ub*ub);this.gridInner=new Float64Array(ub*ub);this.f=new Float64Array(ub);this.d=new Float64Array(ub);this.z=new Float64Array(ub+1);this.v=new Int16Array(ub);this.middle=Math.round(ub/2*(0<=navigator.userAgent.indexOf("Gecko/")?1.2:1))}function l(ub,U,X,W,da,xa,Ka){for(var Wa=0;Wa<U;Wa++){for(var fb=0;fb<X;fb++)W[fb]=ub[fb*U+Wa];m(W,da,xa,
Ka,X);for(fb=0;fb<X;fb++)ub[fb*U+Wa]=da[fb]}for(fb=0;fb<X;fb++){for(Wa=0;Wa<U;Wa++)W[Wa]=ub[fb*U+Wa];m(W,da,xa,Ka,U);for(Wa=0;Wa<U;Wa++)ub[fb*U+Wa]=Math.sqrt(da[Wa])}}function m(ub,U,X,W,da){X[0]=0;W[0]=-1E20;W[1]=1E20;for(var xa=1,Ka=0;xa<da;xa++){for(var Wa=(ub[xa]+xa*xa-(ub[X[Ka]]+X[Ka]*X[Ka]))/(2*xa-2*X[Ka]);Wa<=W[Ka];)Ka--,Wa=(ub[xa]+xa*xa-(ub[X[Ka]]+X[Ka]*X[Ka]))/(2*xa-2*X[Ka]);X[++Ka]=xa;W[Ka]=Wa;W[Ka+1]=1E20}for(Ka=xa=0;xa<da;xa++){for(;W[Ka+1]<xa;)Ka++;U[xa]=(xa-X[Ka])*(xa-X[Ka])+ub[X[Ka]]}}
function c(ub,U,X){var W=function(da,xa){if(da)return X(da);xa&&(da=a.pick(a.extend(xa,ub),"tiles minzoom maxzoom attribution mapbox_logo bounds scheme tileSize encoding".split(" ")),xa.vector_layers&&(da.vectorLayers=xa.vector_layers,da.vectorLayerIds=da.vectorLayers.map(function(Ka){return Ka.id})),da.tiles=U.canonicalizeTileset(da,ub.url),X(null,da))};return ub.url?a.getJSON(U.transformRequest(U.normalizeSourceURL(ub.url),a.ResourceType.Source),W):a.browser.frame(function(){return W(null,ub)})}
function d(ub,U){var X=a.identity([]);return a.translate(X,X,[1,1,0]),a.scale(X,X,[.5*ub.width,.5*ub.height,1]),a.multiply(X,X,ub.calculatePosMatrix(U.toUnwrapped()))}function g(ub,U,X,W,da,xa){var Ka=function(Pb,uc,sc){if(Pb)for(var hc=0;hc<Pb.length;hc+=1){var rc=uc[Pb[hc]];if(rc&&rc.source===sc&&"fill-extrusion"===rc.type)return!0}else for(hc in uc)if(Pb=uc[hc],Pb.source===sc&&"fill-extrusion"===Pb.type)return!0;return!1}(da&&da.layers,U,ub.id),Wa=xa.maxPitchScaleFactor();W=ub.tilesIn(W,Wa,Ka);
W.sort(h);Ka=[];for(var fb=0;fb<W.length;fb+=1){var Fb=W[fb];Ka.push({wrappedTileID:Fb.tileID.wrapped().key,queryResults:Fb.tile.queryRenderedFeatures(U,X,ub._state,Fb.queryGeometry,Fb.cameraQueryGeometry,Fb.scale,da,xa,Wa,d(ub.transform,Fb.tileID))})}U=function(Pb){for(var uc={},sc={},hc=0;hc<Pb.length;hc+=1){var rc=Pb[hc],oc=rc.queryResults;rc=rc.wrappedTileID;rc=sc[rc]=sc[rc]||{};for(var Nb in oc)for(var jc=oc[Nb],Uc=rc[Nb]=rc[Nb]||{},jd=uc[Nb]=uc[Nb]||[],qd=0;qd<jc.length;qd+=1){var Vc=jc[qd];
Uc[Vc.featureIndex]||(Uc[Vc.featureIndex]=!0,jd.push(Vc))}}return uc}(Ka);for(var Ob in U)U[Ob].forEach(function(Pb){Pb=Pb.feature;var uc=ub.getFeatureState(Pb.layer["source-layer"],Pb.id);Pb.source=Pb.layer.source;Pb.layer["source-layer"]&&(Pb.sourceLayer=Pb.layer["source-layer"]);Pb.state=uc});return U}function h(ub,U){ub=ub.tileID;U=U.tileID;return ub.overscaledZ-U.overscaledZ||ub.canonical.y-U.canonical.y||ub.wrap-U.wrap||ub.canonical.x-U.canonical.x}function q(ub,U){var X=Math.abs(2*ub.wrap)-
+(0>ub.wrap),W=Math.abs(2*U.wrap)-+(0>U.wrap);return ub.overscaledZ-U.overscaledZ||W-X||U.canonical.y-ub.canonical.y||U.canonical.x-ub.canonical.x}function t(ub){return"raster"===ub||"image"===ub||"video"===ub}function v(){return new a.window.Worker(Wi.workerUrl)}function w(ub,U){var X={},W;for(W in ub)"ref"!==W&&(X[W]=ub[W]);return a.refProperties.forEach(function(da){da in U&&(X[da]=U[da])}),X}function A(ub){ub=ub.slice();for(var U=Object.create(null),X=0;X<ub.length;X++)U[ub[X].id]=ub[X];for(X=
0;X<ub.length;X++)"ref"in ub[X]&&(ub[X]=w(ub[X],U[ub[X].ref]));return ub}function z(ub,U,X,W,da,xa){for(var Ka in U=U||{},ub=ub||{})ub.hasOwnProperty(Ka)&&(a.deepEqual(ub[Ka],U[Ka])||X.push({command:xa,args:[W,Ka,U[Ka],da]}));for(Ka in U)U.hasOwnProperty(Ka)&&!ub.hasOwnProperty(Ka)&&(a.deepEqual(ub[Ka],U[Ka])||X.push({command:xa,args:[W,Ka,U[Ka],da]}))}function y(ub){return ub.id}function B(ub,U){return ub[U.id]=U,ub}function C(ub,U,X,W,da){var xa=a.create();return U?(a.scale(xa,xa,[1/da,1/da,1]),
X||a.rotateZ(xa,xa,W.angle)):a.multiply(xa,W.labelPlaneMatrix,ub),xa}function u(ub,U,X,W,da){return U?(ub=a.clone(ub),a.scale(ub,ub,[da,da,1]),X||a.rotateZ(ub,ub,-W.angle),ub):W.glCoordMatrix}function F(ub,U){ub=[ub.x,ub.y,0,1];N(ub,ub,U);U=ub[3];return{point:new a.Point(ub[0]/U,ub[1]/U),signedDistanceFromCamera:U}}function H(ub,U,X,W,da,xa,Ka,Wa){var fb=W?ub.textSizeData:ub.iconSizeData,Fb=a.evaluateSizeForZoom(fb,X.transform.zoom),Ob=[256/X.width*2+1,256/X.height*2+1],Pb=W?ub.text.dynamicLayoutVertexArray:
ub.icon.dynamicLayoutVertexArray;Pb.clear();for(var uc=ub.lineVertexArray,sc=W?ub.text.placedSymbolArray:ub.icon.placedSymbolArray,hc=X.transform.width/X.transform.height,rc=!1,oc=0;oc<sc.length;oc++){var Nb=sc.get(oc);if(Nb.hidden||Nb.writingMode===a.WritingMode.vertical&&!rc)P(Nb.numGlyphs,Pb);else{rc=!1;var jc=[Nb.anchorX,Nb.anchorY,0,1];a.transformMat4(jc,jc,U);var Uc=jc[0]/jc[3],jd=jc[1]/jc[3];if(Uc>=-Ob[0]&&Uc<=Ob[0]&&jd>=-Ob[1]&&jd<=Ob[1]){rc=.5+X.transform.cameraToCenterDistance/jc[3]*.5;
jc=a.evaluateSizeForFeature(fb,Fb,Nb);jc=Ka?jc/rc:jc*rc;Uc=new a.Point(Nb.anchorX,Nb.anchorY);jd=F(Uc,da).point;var qd={},Vc=M(Nb,jc,!1,Wa,U,da,xa,ub.glyphOffsetArray,uc,Pb,jd,Uc,qd,hc);rc=Vc.useVertical;(Vc.notEnoughRoom||rc||Vc.needsFlipping&&M(Nb,jc,!0,Wa,U,da,xa,ub.glyphOffsetArray,uc,Pb,jd,Uc,qd,hc).notEnoughRoom)&&P(Nb.numGlyphs,Pb)}else P(Nb.numGlyphs,Pb)}}W?ub.text.dynamicLayoutVertexBuffer.updateData(Pb):ub.icon.dynamicLayoutVertexBuffer.updateData(Pb)}function J(ub,U,X,W,da,xa,Ka,Wa,fb,
Fb,Ob){var Pb=Wa.glyphStartIndex+Wa.numGlyphs,uc=Wa.lineStartIndex,sc=Wa.lineStartIndex+Wa.lineLength,hc=U.getoffsetX(Wa.glyphStartIndex);U=U.getoffsetX(Pb-1);hc=L(ub*hc,X,W,da,xa,Ka,Wa.segment,uc,sc,fb,Fb,Ob);return hc?(ub=L(ub*U,X,W,da,xa,Ka,Wa.segment,uc,sc,fb,Fb,Ob))?{first:hc,last:ub}:null:null}function I(ub,U,X,W){return ub===a.WritingMode.horizontal&&Math.abs(X.y-U.y)>Math.abs(X.x-U.x)*W?{useVertical:!0}:(ub===a.WritingMode.vertical?U.y<X.y:U.x>X.x)?{needsFlipping:!0}:null}function M(ub,U,
X,W,da,xa,Ka,Wa,fb,Fb,Ob,Pb,uc,sc){U/=24;var hc=ub.lineOffsetX*U,rc=ub.lineOffsetY*U;if(1<ub.numGlyphs){da=ub.glyphStartIndex+ub.numGlyphs;var oc=ub.lineStartIndex,Nb=ub.lineStartIndex+ub.lineLength,jc=J(U,Wa,hc,rc,X,Ob,Pb,ub,fb,xa,uc);if(!jc)return{notEnoughRoom:!0};var Uc=F(jc.first.point,Ka).point;Ka=F(jc.last.point,Ka).point;if(W&&!X&&(sc=I(ub.writingMode,Uc,Ka,sc)))return sc;sc=[jc.first];for(W=ub.glyphStartIndex+1;W<da-1;W++)sc.push(L(U*Wa.getoffsetX(W),hc,rc,X,Ob,Pb,ub.segment,oc,Nb,fb,xa,
uc));sc.push(jc.last)}else{if(W&&!X&&(oc=F(Pb,da).point,Nb=ub.lineStartIndex+ub.segment+1,Nb=new a.Point(fb.getx(Nb),fb.gety(Nb)),jc=F(Nb,da),da=0<jc.signedDistanceFromCamera?jc.point:E(Pb,Nb,oc,1,da),sc=I(ub.writingMode,oc,da,sc)))return sc;ub=L(U*Wa.getoffsetX(ub.glyphStartIndex),hc,rc,X,Ob,Pb,ub.segment,ub.lineStartIndex,ub.lineStartIndex+ub.lineLength,fb,xa,uc);if(!ub)return{notEnoughRoom:!0};sc=[ub]}ub=0;for(X=sc;ub<X.length;ub+=1)xa=X[ub],a.addDynamicAttributes(Fb,xa.point,xa.angle);return{}}
function E(ub,U,X,W,da){ub=F(ub.add(ub.sub(U)._unit()),da).point;ub=X.sub(ub);return X.add(ub._mult(W/ub.mag()))}function L(ub,U,X,W,da,xa,Ka,Wa,fb,Fb,Ob,Pb){var uc=W?ub-U:ub+U;ub=0<uc?1:-1;U=0;W&&(ub*=-1,U=Math.PI);0>ub&&(U+=Math.PI);W=0<ub?Wa+Ka:Wa+Ka+1;Ka=da;var sc=0,hc=0,rc=Math.abs(uc);for(uc=[];sc+hc<=rc;){if((W+=ub)<Wa||W>=fb)return null;if(da=Ka,uc.push(Ka),void 0===(Ka=Pb[W])){Ka=new a.Point(Fb.getx(W),Fb.gety(W));var oc=F(Ka,Ob);0<oc.signedDistanceFromCamera?Ka=Pb[W]=oc.point:(oc=W-ub,Ka=
E(0===sc?xa:new a.Point(Fb.getx(oc),Fb.gety(oc)),Ka,da,rc-sc+1,Ob))}sc+=hc;hc=da.dist(Ka)}Wa=(rc-sc)/hc;xa=Ka.sub(da);Wa=xa.mult(Wa)._add(da);Wa._add(xa._unit()._perp()._mult(X*ub));X=U+Math.atan2(Ka.y-da.y,Ka.x-da.x);return uc.push(Wa),{point:Wa,angle:X,path:uc}}function P(ub,U){for(var X=0;X<ub;X++){var W=U.length;U.resize(W+4);U.float32.set(ve,3*W)}}function N(ub,U,X){var W=U[0];U=U[1];return ub[0]=X[0]*W+X[4]*U+X[12],ub[1]=X[1]*W+X[5]*U+X[13],ub[3]=X[3]*W+X[7]*U+X[15],ub}function Q(ub,U,X){return a.EXTENT/
(ub.tileSize*Math.pow(2,X-ub.tileID.overscaledZ))*U}function O(ub,U,X,W,da){var xa=a.getAnchorAlignment(ub);U*=-(xa.horizontalAlign-.5);X*=-(xa.verticalAlign-.5);ub=a.evaluateVariableOffset(ub,W);return new a.Point(U+ub[0]*da,X+ub[1]*da)}function T(ub,U,X,W,da,xa){var Ka=ub.x1,Wa=ub.x2,fb=ub.y1,Fb=ub.y2,Ob=ub.anchorPointX;ub=ub.anchorPointY;U=new a.Point(U,X);return W&&U._rotate(da?xa:-xa),{x1:Ka+U.x,y1:fb+U.y,x2:Wa+U.x,y2:Fb+U.y,anchorPointX:Ob,anchorPointY:ub}}function V(ub,U,X,W,da){ub.emplaceBack(U?
1:0,X?1:0,W||0,da||0);ub.emplaceBack(U?1:0,X?1:0,W||0,da||0);ub.emplaceBack(U?1:0,X?1:0,W||0,da||0);ub.emplaceBack(U?1:0,X?1:0,W||0,da||0)}function Z(ub){if(0===ub.opacity&&!ub.placed)return 0;if(1===ub.opacity&&ub.placed)return 4294967295;var U=ub.placed?1:0;ub=Math.floor(127*ub.opacity);return ub*Hb+U*mc+ub*Ic+U*Yb+ub*Ac+U*Yc+ub*md+U}function aa(ub,U){var X=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,W={};return{fragmentSource:ub=ub.replace(X,function(da,xa,Ka,Wa,fb){return W[fb]=!0,"define"===
xa?"\n#ifndef HAS_UNIFORM_u_"+fb+"\nvarying "+Ka+" "+Wa+" "+fb+";\n#else\nuniform "+Ka+" "+Wa+" u_"+fb+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+fb+"\n    "+Ka+" "+Wa+" "+fb+" \x3d u_"+fb+";\n#endif\n"}),vertexSource:U=U.replace(X,function(da,xa,Ka,Wa,fb){da="float"===Wa?"vec2":"vec4";var Fb=fb.match(/color/)?"color":da;return W[fb]?"define"===xa?"\n#ifndef HAS_UNIFORM_u_"+fb+"\nuniform lowp float u_"+fb+"_t;\nattribute "+Ka+" "+da+" a_"+fb+";\nvarying "+Ka+" "+Wa+" "+fb+";\n#else\nuniform "+Ka+" "+
Wa+" u_"+fb+";\n#endif\n":"vec4"===Fb?"\n#ifndef HAS_UNIFORM_u_"+fb+"\n    "+fb+" \x3d a_"+fb+";\n#else\n    "+Ka+" "+Wa+" "+fb+" \x3d u_"+fb+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+fb+"\n    "+fb+" \x3d unpack_mix_"+Fb+"(a_"+fb+", u_"+fb+"_t);\n#else\n    "+Ka+" "+Wa+" "+fb+" \x3d u_"+fb+";\n#endif\n":"define"===xa?"\n#ifndef HAS_UNIFORM_u_"+fb+"\nuniform lowp float u_"+fb+"_t;\nattribute "+Ka+" "+da+" a_"+fb+";\n#else\nuniform "+Ka+" "+Wa+" u_"+fb+";\n#endif\n":"vec4"===Fb?"\n#ifndef HAS_UNIFORM_u_"+
fb+"\n    "+Ka+" "+Wa+" "+fb+" \x3d a_"+fb+";\n#else\n    "+Ka+" "+Wa+" "+fb+" \x3d u_"+fb+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+fb+"\n    "+Ka+" "+Wa+" "+fb+" \x3d unpack_mix_"+Fb+"(a_"+fb+", u_"+fb+"_t);\n#else\n    "+Ka+" "+Wa+" "+fb+" \x3d u_"+fb+";\n#endif\n"})}}function Y(ub,U,X){var W=1/Q(X,1,U.transform.tileZoom),da=Math.pow(2,X.tileID.overscaledZ);U=X.tileSize*Math.pow(2,U.transform.tileZoom)/da;da=U*(X.tileID.canonical.x+X.tileID.wrap*da);U*=X.tileID.canonical.y;return{u_image:0,u_texsize:X.imageAtlasTexture.size,
u_scale:[W,ub.fromScale,ub.toScale],u_fade:ub.t,u_pixel_coord_upper:[da>>16,U>>16],u_pixel_coord_lower:[65535&da,65535&U]}}function ea(ub,U,X){return ub.translatePosMatrix(U.tileID.posMatrix,U,X.paint.get("line-translate"),X.paint.get("line-translate-anchor"))}function ca(ub,U,X,W,da,xa,Ka){for(var Wa=ub.context,fb=Wa.gl,Fb=ub.useProgram("collisionBox"),Ob=[],Pb=0,uc=0,sc=0;sc<W.length;sc++){var hc=W[sc],rc=U.getTile(hc),oc=rc.getBucket(X);if(oc){var Nb=hc.posMatrix;0===da[0]&&0===da[1]||(Nb=ub.translatePosMatrix(hc.posMatrix,
rc,da,xa));hc=Ka?oc.textCollisionBox:oc.iconCollisionBox;var jc=oc.collisionCircleArray;if(0<jc.length){var Uc=a.create(),jd=Nb;a.mul(Uc,oc.placementInvProjMatrix,ub.transform.glCoordMatrix);a.mul(Uc,Uc,oc.placementViewportMatrix);Ob.push({circleArray:jc,circleOffset:uc,transform:jd,invTransform:Uc});uc=Pb+=jc.length/4}if(hc){oc=Fb;jc=oc.draw;Uc=fb.LINES;jd=Kd.disabled;var qd=Gc.disabled,Vc=ub.colorModeForRenderPass(),td=vd.disabled,nd=ub.transform,Gd=rc;rc=Q(Gd,1,nd.zoom);var Hd=Math.pow(2,nd.zoom-
Gd.tileID.overscaledZ);Gd=Gd.tileID.overscaleFactor();jc.call(oc,Wa,Uc,jd,qd,Vc,td,{u_matrix:Nb,u_camera_to_center_distance:nd.cameraToCenterDistance,u_pixels_to_tile_units:rc,u_extrude_scale:[nd.pixelsToGLUnits[0]/(rc*Hd),nd.pixelsToGLUnits[1]/(rc*Hd)],u_overscale_factor:Gd},X.id,hc.layoutVertexBuffer,hc.indexBuffer,hc.segments,null,ub.transform.zoom,null,null,hc.collisionVertexBuffer)}}}if(Ka&&Ob.length){U=ub.useProgram("collisionCircle");W=new a.StructArrayLayout2f1f2i16;W.resize(4*Pb);W._trim();
for(xa=da=0;xa<Ob.length;xa+=1)for(Ka=Ob[xa],Fb=0;Fb<Ka.circleArray.length/4;Fb++)rc=4*Fb,uc=Ka.circleArray[rc+0],sc=Ka.circleArray[rc+1],hc=Ka.circleArray[rc+2],rc=Ka.circleArray[rc+3],W.emplace(da++,uc,sc,hc,rc,0),W.emplace(da++,uc,sc,hc,rc,1),W.emplace(da++,uc,sc,hc,rc,2),W.emplace(da++,uc,sc,hc,rc,3);if(!Qi||Qi.length<2*Pb){Pb*=2;da=new a.StructArrayLayout3ui6;da.resize(Pb);da._trim();for(xa=0;xa<Pb;xa++)Ka=6*xa,da.uint16[Ka+0]=4*xa,da.uint16[Ka+1]=4*xa+1,da.uint16[Ka+2]=4*xa+2,da.uint16[Ka+3]=
4*xa+2,da.uint16[Ka+4]=4*xa+3,da.uint16[Ka+5]=4*xa;Qi=da}Pb=Wa.createIndexBuffer(Qi,!0);W=Wa.createVertexBuffer(W,a.collisionCircleLayout.members,!0);for(da=0;da<Ob.length;da+=1)xa=Ob[da],Ka=ub.transform,Ka={u_matrix:xa.transform,u_inv_matrix:xa.invTransform,u_camera_to_center_distance:Ka.cameraToCenterDistance,u_viewport_size:[Ka.width,Ka.height]},U.draw(Wa,fb.TRIANGLES,Kd.disabled,Gc.disabled,ub.colorModeForRenderPass(),vd.disabled,Ka,X.id,W,Pb,a.SegmentVector.simpleSegment(0,2*xa.circleOffset,
xa.circleArray.length,xa.circleArray.length/2),null,ub.transform.zoom,null,null,null);W.destroy();Pb.destroy()}}function ba(ub,U,X,W,da,xa,Ka,Wa,fb,Fb,Ob,Pb){var uc=ub.context,sc=uc.gl,hc=ub.transform,rc="map"===Wa,oc="map"===fb,Nb=rc&&"point"!==X.layout.get("symbol-placement"),jc=rc&&!oc&&!Nb,Uc=void 0!==X.layout.get("symbol-sort-key").constantOr(1);fb=ub.depthModeForSublayer(0,Kd.ReadOnly);var jd=X.layout.get("text-variable-anchor");Wa=[];for(var qd=0;qd<W.length;qd+=1){var Vc=W[qd],td=U.getTile(Vc),
nd=td.getBucket(X);if(nd){var Gd=da?nd.text:nd.icon;if(Gd&&Gd.segments.get().length){var Hd=Gd.programConfigurations.get(X.id),zd=da||nd.sdfIcons,he=da?nd.textSizeData:nd.iconSizeData,ee=oc||0!==hc.pitch;Hd=ub.useProgram(nd.iconsInText&&da?"symbolTextAndIcon":zd?"symbolSDF":"symbolIcon",Hd);var Ce=a.evaluateSizeForZoom(he,hc.zoom),De=void 0,ze=[0,0],Wd=void 0,oe=void 0,Pe=null,ye=void 0;da?(Wd=td.glyphAtlasTexture,oe=sc.LINEAR,De=td.glyphAtlasTexture.size,nd.iconsInText&&(ze=td.imageAtlasTexture.size,
Pe=td.imageAtlasTexture,ye=ee||ub.options.rotating||ub.options.zooming||"composite"===he.kind||"camera"===he.kind?sc.LINEAR:sc.NEAREST)):(De=1!==X.layout.get("icon-size").constantOr(0)||nd.iconsNeedLinear,Wd=td.imageAtlasTexture,oe=zd||ub.options.rotating||ub.options.zooming||De||ee?sc.LINEAR:sc.NEAREST,De=td.imageAtlasTexture.size);var Re=Q(td,1,ub.transform.zoom);ee=C(Vc.posMatrix,oc,rc,ub.transform,Re);Re=u(Vc.posMatrix,oc,rc,ub.transform,Re);var wf=jd&&nd.hasTextData();wf="none"!==X.layout.get("icon-text-fit")&&
wf&&nd.hasIconData();Nb&&H(nd,Vc.posMatrix,ub,da,ee,Re,oc,Fb);Vc=ub.translatePosMatrix(Vc.posMatrix,td,xa,Ka);ee=Nb||da&&jd||wf?wk:ee;td=ub.translatePosMatrix(Re,td,xa,Ka,!0);Re=zd&&0!==X.paint.get(da?"text-halo-width":"icon-halo-width").constantOr(1);nd={program:Hd,buffers:Gd,uniformValues:zd?nd.iconsInText?Wj(he.kind,Ce,jc,oc,ub,Vc,ee,td,De,ze):Vj(he.kind,Ce,jc,oc,ub,Vc,ee,td,da,De,!0):Uj(he.kind,Ce,jc,oc,ub,Vc,ee,td,da,De),atlasTexture:Wd,atlasTextureIcon:Pe,atlasInterpolation:oe,atlasInterpolationIcon:ye,
isSDF:zd,hasHalo:Re};if(Uc)for(zd=0,Gd=Gd.segments.get();zd<Gd.length;zd+=1)he=Gd[zd],Wa.push({segments:new a.SegmentVector([he]),sortKey:he.sortKey,state:nd});else Wa.push({segments:Gd.segments,sortKey:0,state:nd})}}}Uc&&Wa.sort(function(hf,uh){return hf.sortKey-uh.sortKey});for(U=0;U<Wa.length;U+=1){W=Wa[U];da=W.state;if(uc.activeTexture.set(sc.TEXTURE0),da.atlasTexture.bind(da.atlasInterpolation,sc.CLAMP_TO_EDGE),da.atlasTextureIcon&&(uc.activeTexture.set(sc.TEXTURE1),da.atlasTextureIcon&&da.atlasTextureIcon.bind(da.atlasInterpolationIcon,
sc.CLAMP_TO_EDGE)),da.isSDF)xa=da.uniformValues,da.hasHalo&&(xa.u_is_halo=1,ka(da.buffers,W.segments,X,ub,da.program,fb,Ob,Pb,xa)),xa.u_is_halo=0;ka(da.buffers,W.segments,X,ub,da.program,fb,Ob,Pb,da.uniformValues)}}function ka(ub,U,X,W,da,xa,Ka,Wa,fb){var Fb=W.context;da.draw(Fb,Fb.gl.TRIANGLES,xa,Ka,Wa,vd.disabled,fb,X.id,ub.layoutVertexBuffer,ub.indexBuffer,U,X.paint,W.transform.zoom,ub.programConfigurations.get(X.id),ub.dynamicLayoutVertexBuffer,ub.opacityVertexBuffer)}function qa(ub,U,X,W,da,
xa,Ka){var Wa,fb,Fb,Ob=ub.context.gl,Pb=X.paint.get("fill-pattern"),uc=Pb&&Pb.constantOr(1),sc=X.getCrossfadeParameters();Ka?(fb=uc&&!X.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Wa=Ob.LINES):(fb=uc?"fillPattern":"fill",Wa=Ob.TRIANGLES);for(var hc=0;hc<W.length;hc+=1){var rc=W[hc];var oc=U.getTile(rc);if(!uc||oc.patternsLoaded()){var Nb=oc.getBucket(X);if(Nb){var jc=Nb.programConfigurations.get(X.id),Uc=ub.useProgram(fb,jc);uc&&(ub.context.activeTexture.set(Ob.TEXTURE0),
oc.imageAtlasTexture.bind(Ob.LINEAR,Ob.CLAMP_TO_EDGE),jc.updatePaintBuffers(sc));if((Fb=Pb.constantOr(null))&&oc.imageAtlas){var jd=oc.imageAtlas;var qd=jd.patternPositions[Fb.to.toString()];Fb=jd.patternPositions[Fb.from.toString()];qd&&Fb&&jc.setConstantPatternPositions(qd,Fb)}jd=ub.translatePosMatrix(rc.posMatrix,oc,X.paint.get("fill-translate"),X.paint.get("fill-translate-anchor"));if(Ka){qd=Nb.indexBuffer2;Fb=Nb.segments2;var Vc=[Ob.drawingBufferWidth,Ob.drawingBufferHeight];if("fillOutlinePattern"===
fb&&uc){var td=a,nd=td.extend;oc=a.extend({u_matrix:jd},Y(sc,ub,oc));oc=nd.call(td,oc,{u_world:Vc})}else oc={u_matrix:jd,u_world:Vc}}else qd=Nb.indexBuffer,Fb=Nb.segments,oc=uc?a.extend({u_matrix:jd},Y(sc,ub,oc)):{u_matrix:jd};Uc.draw(ub.context,Wa,da,ub.stencilModeForClipping(rc),xa,vd.disabled,oc,X.id,Nb.layoutVertexBuffer,qd,Fb,X.paint,ub.transform.zoom,jc)}}}}function pa(ub,U,X,W,da,xa,Ka){for(var Wa=ub.context,fb=Wa.gl,Fb=X.paint.get("fill-extrusion-pattern"),Ob=Fb.constantOr(1),Pb=X.getCrossfadeParameters(),
uc=X.paint.get("fill-extrusion-opacity"),sc=0;sc<W.length;sc+=1){var hc=W[sc],rc=U.getTile(hc),oc=rc.getBucket(X);if(oc){var Nb=oc.programConfigurations.get(X.id),jc=ub.useProgram(Ob?"fillExtrusionPattern":"fillExtrusion",Nb);Ob&&(ub.context.activeTexture.set(fb.TEXTURE0),rc.imageAtlasTexture.bind(fb.LINEAR,fb.CLAMP_TO_EDGE),Nb.updatePaintBuffers(Pb));var Uc=Fb.constantOr(null);if(Uc&&rc.imageAtlas){var jd=rc.imageAtlas,qd=jd.patternPositions[Uc.to.toString()];Uc=jd.patternPositions[Uc.from.toString()];
qd&&Uc&&Nb.setConstantPatternPositions(qd,Uc)}qd=ub.translatePosMatrix(hc.posMatrix,rc,X.paint.get("fill-extrusion-translate"),X.paint.get("fill-extrusion-translate-anchor"));Uc=X.paint.get("fill-extrusion-vertical-gradient");if(Ob){jd=ub;var Vc=Pb;rc=a.extend(Wf(qd,jd,Uc,uc),Y(Vc,jd,rc),{u_height_factor:-Math.pow(2,hc.overscaledZ)/rc.tileSize/8})}else rc=Wf(qd,ub,Uc,uc);jc.draw(Wa,Wa.gl.TRIANGLES,da,xa,Ka,vd.backCCW,rc,X.id,oc.layoutVertexBuffer,oc.indexBuffer,oc.segments,X.paint,ub.transform.zoom,
Nb)}}}function oa(ub,U,X,W,da,xa){ub=ub.context;var Ka=ub.gl;Ka.enable(Ka.SCISSOR_TEST);Ka.scissor(U*a.browser.devicePixelRatio,X*a.browser.devicePixelRatio,W*a.browser.devicePixelRatio,da*a.browser.devicePixelRatio);ub.clear({color:xa});Ka.disable(Ka.SCISSOR_TEST)}function ja(ub,U){(!ub.duration||ub.duration<U.duration)&&(ub.duration=U.duration,ub.easing=U.easing)}function ra(ub,U,X){var W=X.maxSpeed,da=X.linearity,xa=X.deceleration;ub=a.clamp(ub*da/(U/1E3),-W,W);da=Math.abs(ub)/(xa*da);return{easing:X.easing,
duration:1E3*da,amount:da/2*ub}}function ha(ub,U){for(var X={},W=0;W<ub.length;W++)X[ub[W].identifier]=U[W];return X}function la(ub,U,X){for(var W=0;W<ub.length;W++)if(ub[W].identifier===X)return U[W]}function ua(ub){return Math.abs(ub.y)>Math.abs(ub.x)}function na(ub){return ub*(2-ub)}function wa(ub){return ub.panDelta&&ub.panDelta.mag()||ub.zoomDelta||ub.bearingDelta||ub.pitchDelta}function Ca(ub){ub.parentNode&&ub.parentNode.removeChild(ub)}function Fa(ub,U,X){if(ub=new a.LngLat(ub.lng,ub.lat),
U){var W=new a.LngLat(ub.lng-360,ub.lat),da=new a.LngLat(ub.lng+360,ub.lat),xa=X.locationPoint(ub).distSqr(U);X.locationPoint(W).distSqr(U)<xa?ub=W:X.locationPoint(da).distSqr(U)<xa&&(ub=da)}for(;180<Math.abs(ub.lng-X.center.lng);){U=X.locationPoint(ub);if(0<=U.x&&0<=U.y&&U.x<=X.width&&U.y<=X.height)break;ub.lng>X.center.lng?ub.lng-=360:ub.lng+=360}return ub}function Xa(ub,U,X){ub=ub.classList;for(var W in ah)ub.remove("mapboxgl-"+X+"-anchor-"+W);ub.add("mapboxgl-"+X+"-anchor-"+U)}function ab(ub,
U,X){var W=X&&X.maxWidth||100,da=ub._container.clientHeight/2,xa=ub.unproject([0,da]);da=ub.unproject([W,da]);xa=xa.distanceTo(da);X&&"imperial"===X.unit?(X=3.2808*xa,5280<X?gb(U,W,X/5280,ub._getUIString("ScaleControl.Miles")):gb(U,W,X,ub._getUIString("ScaleControl.Feet"))):X&&"nautical"===X.unit?gb(U,W,xa/1852,ub._getUIString("ScaleControl.NauticalMiles")):1E3<=xa?gb(U,W,xa/1E3,ub._getUIString("ScaleControl.Kilometers")):gb(U,W,xa,ub._getUIString("ScaleControl.Meters"))}function gb(ub,U,X,W){var da,
xa=da=Math.pow(10,(""+Math.floor(X)).length-1);if(10<=(da=X/da))da=10;else if(5<=da)da=5;else if(3<=da)da=3;else if(2<=da)da=2;else if(1<=da)da=1;else{var Ka=Math.pow(10,Math.ceil(-Math.log(da)/Math.LN10));da=Math.round(da*Ka)/Ka}xa*=da;ub.style.width=xa/X*U+"px";ub.innerHTML=xa+"\x26nbsp;"+W}var bb=a.createCommonjsModule(function(ub){function U(da){return!X(da)}function X(da){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&
Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?
"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Ka=new Blob([""],{type:"text/javascript"});Ka=URL.createObjectURL(Ka);try{var Wa=new Worker(Ka);var fb=!0}catch(Fb){fb=!1}return Wa&&Wa.terminate(),URL.revokeObjectURL(Ka),fb}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var Ka=document.createElement("canvas");Ka.width=Ka.height=1;var Wa=Ka.getContext("2d");return Wa?(Wa=Wa.getImageData(0,0,1,1))&&Wa.width===
Ka.width:!1}()?(void 0===W[xa=da&&da.failIfMajorPerformanceCaveat]&&(W[xa]=function(Ka){var Wa=document.createElement("canvas"),fb=Object.create(U.webGLContextAttributes);Ka=(fb.failIfMajorPerformanceCaveat=Ka,Wa.probablySupportsContext?Wa.probablySupportsContext("webgl",fb)||Wa.probablySupportsContext("experimental-webgl",fb):Wa.supportsContext?Wa.supportsContext("webgl",fb)||Wa.supportsContext("experimental-webgl",fb):Wa.getContext("webgl",fb)||Wa.getContext("experimental-webgl",fb));if(!Ka)return!1;
Wa=Ka.createShader(Ka.VERTEX_SHADER);return!(!Wa||Ka.isContextLost())&&(Ka.shaderSource(Wa,"void main() {}"),Ka.compileShader(Wa),!0===Ka.getShaderParameter(Wa,Ka.COMPILE_STATUS))}(xa)),W[xa]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var xa}
ub.exports?ub.exports=U:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=U,window.mapboxgl.notSupportedReason=X);var W={};U.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),La={create:function(ub,U,X){ub=a.window.document.createElement(ub);return void 0!==U&&(ub.className=U),X&&X.appendChild(ub),ub},createNS:function(ub,U){return a.window.document.createElementNS(ub,U)}},kb=a.window.document.documentElement.style,mb,ya=e(["userSelect","MozUserSelect","WebkitUserSelect",
"msUserSelect"]);La.disableDrag=function(){kb&&ya&&(mb=kb[ya],kb[ya]="none")};La.enableDrag=function(){kb&&ya&&(kb[ya]=mb)};var Ia=e(["transform","WebkitTransform"]);La.setTransform=function(ub,U){ub.style[Ia]=U};var Na=!1;try{var Ta=Object.defineProperty({},"passive",{get:function(){Na=!0}});a.window.addEventListener("test",Ta,Ta);a.window.removeEventListener("test",Ta,Ta)}catch(ub){Na=!1}La.addEventListener=function(ub,U,X,W){void 0===W&&(W={});ub.addEventListener(U,X,"passive"in W&&Na?W:W.capture)};
La.removeEventListener=function(ub,U,X,W){void 0===W&&(W={});ub.removeEventListener(U,X,"passive"in W&&Na?W:W.capture)};var hb=function(ub){ub.preventDefault();ub.stopPropagation();a.window.removeEventListener("click",hb,!0)};La.suppressClick=function(){a.window.addEventListener("click",hb,!0);a.window.setTimeout(function(){a.window.removeEventListener("click",hb,!0)},0)};La.mousePos=function(ub,U){var X=ub.getBoundingClientRect();return new a.Point(U.clientX-X.left-ub.clientLeft,U.clientY-X.top-
ub.clientTop)};La.touchPos=function(ub,U){for(var X=ub.getBoundingClientRect(),W=[],da=0;da<U.length;da++)W.push(new a.Point(U[da].clientX-X.left-ub.clientLeft,U[da].clientY-X.top-ub.clientTop));return W};La.mouseButton=function(ub){return void 0!==a.window.InstallTrigger&&2===ub.button&&ub.ctrlKey&&0<=a.window.navigator.platform.toUpperCase().indexOf("MAC")?0:ub.button};La.remove=function(ub){ub.parentNode&&ub.parentNode.removeChild(ub)};var Ya=function(ub){function U(){ub.call(this);this.images=
{};this.updatedImages={};this.callbackDispatchedThisFrame={};this.loaded=!1;this.requestors=[];this.patterns={};this.atlasImage=new a.RGBAImage({width:1,height:1});this.dirty=!0}return ub&&(U.__proto__=ub),(U.prototype=Object.create(ub&&ub.prototype)).constructor=U,U.prototype.isLoaded=function(){return this.loaded},U.prototype.setLoaded=function(X){if(this.loaded!==X&&(this.loaded=X,X)){X=0;for(var W=this.requestors;X<W.length;X+=1){var da=W[X];this._notify(da.ids,da.callback)}this.requestors=[]}},
U.prototype.getImage=function(X){return this.images[X]},U.prototype.addImage=function(X,W){this._validate(X,W)&&(this.images[X]=W)},U.prototype._validate=function(X,W){var da=!0;return this._validateStretch(W.stretchX,W.data&&W.data.width)||(this.fire(new a.ErrorEvent(Error('Image "'+X+'" has invalid "stretchX" value'))),da=!1),this._validateStretch(W.stretchY,W.data&&W.data.height)||(this.fire(new a.ErrorEvent(Error('Image "'+X+'" has invalid "stretchY" value'))),da=!1),this._validateContent(W.content,
W)||(this.fire(new a.ErrorEvent(Error('Image "'+X+'" has invalid "content" value'))),da=!1),da},U.prototype._validateStretch=function(X,W){if(!X)return!0;for(var da=0,xa=0;xa<X.length;xa+=1){var Ka=X[xa];if(Ka[0]<da||Ka[1]<Ka[0]||W<Ka[1])return!1;da=Ka[1]}return!0},U.prototype._validateContent=function(X,W){return!(X&&(4!==X.length||0>X[0]||W.data.width<X[0]||0>X[1]||W.data.height<X[1]||0>X[2]||W.data.width<X[2]||0>X[3]||W.data.height<X[3]||X[2]<X[0]||X[3]<X[1]))},U.prototype.updateImage=function(X,
W){W.version=this.images[X].version+1;this.images[X]=W;this.updatedImages[X]=!0},U.prototype.removeImage=function(X){var W=this.images[X];delete this.images[X];delete this.patterns[X];W.userImage&&W.userImage.onRemove&&W.userImage.onRemove()},U.prototype.listImages=function(){return Object.keys(this.images)},U.prototype.getImages=function(X,W){var da=!0;if(!this.isLoaded())for(var xa=0;xa<X.length;xa+=1)this.images[X[xa]]||(da=!1);this.isLoaded()||da?this._notify(X,W):this.requestors.push({ids:X,
callback:W})},U.prototype._notify=function(X,W){for(var da={},xa=0;xa<X.length;xa+=1){var Ka=X[xa];this.images[Ka]||this.fire(new a.Event("styleimagemissing",{id:Ka}));var Wa=this.images[Ka];Wa?da[Ka]={data:Wa.data.clone(),pixelRatio:Wa.pixelRatio,sdf:Wa.sdf,version:Wa.version,stretchX:Wa.stretchX,stretchY:Wa.stretchY,content:Wa.content,hasRenderCallback:!(!Wa.userImage||!Wa.userImage.render)}:a.warnOnce('Image "'+Ka+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}W(null,
da)},U.prototype.getPixelSize=function(){var X=this.atlasImage;return{width:X.width,height:X.height}},U.prototype.getPattern=function(X){var W=this.patterns[X],da=this.getImage(X);if(!da)return null;if(W&&W.position.version===da.version)return W.position;W?W.position.version=da.version:(W={w:da.data.width+2,h:da.data.height+2,x:0,y:0},da=new a.ImagePosition(W,da),this.patterns[X]={bin:W,position:da});return this._updatePatternAtlas(),this.patterns[X].position},U.prototype.bind=function(X){var W=X.gl;
this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(X,this.atlasImage,W.RGBA);this.atlasTexture.bind(W.LINEAR,W.CLAMP_TO_EDGE)},U.prototype._updatePatternAtlas=function(){var X=[];for(W in this.patterns)X.push(this.patterns[W].bin);X=a.potpack(X);var W=X.w;var da=X.h;X=this.atlasImage;for(var xa in X.resize({width:W||1,height:da||1}),this.patterns){da=this.patterns[xa].bin;W=da.x+1;da=da.y+1;var Ka=this.images[xa].data,Wa=Ka.width,
fb=Ka.height;a.RGBAImage.copy(Ka,X,{x:0,y:0},{x:W,y:da},{width:Wa,height:fb});a.RGBAImage.copy(Ka,X,{x:0,y:fb-1},{x:W,y:da-1},{width:Wa,height:1});a.RGBAImage.copy(Ka,X,{x:0,y:0},{x:W,y:da+fb},{width:Wa,height:1});a.RGBAImage.copy(Ka,X,{x:Wa-1,y:0},{x:W-1,y:da},{width:1,height:fb});a.RGBAImage.copy(Ka,X,{x:0,y:0},{x:W+Wa,y:da},{width:1,height:fb})}this.dirty=!0},U.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},U.prototype.dispatchRenderCallbacks=function(X){for(var W=0;W<X.length;W+=
1){var da=X[W];if(!this.callbackDispatchedThisFrame[da]){this.callbackDispatchedThisFrame[da]=!0;var xa=this.images[da],Ka=xa,Wa=Ka.userImage;Wa&&Wa.render&&Wa.render()&&(Ka.data.replace(new Uint8Array(Wa.data.buffer)),!0)&&this.updateImage(da,xa)}}},U}(a.Evented);f.prototype.draw=function(ub){this.ctx.clearRect(0,0,this.size,this.size);this.ctx.fillText(ub,this.buffer,this.middle);ub=this.ctx.getImageData(0,0,this.size,this.size);for(var U=new Uint8ClampedArray(this.size*this.size),X=0;X<this.size*
this.size;X++){var W=ub.data[4*X+3]/255;this.gridOuter[X]=1===W?0:0===W?1E20:Math.pow(Math.max(0,.5-W),2);this.gridInner[X]=1===W?1E20:0===W?0:Math.pow(Math.max(0,W-.5),2)}l(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z);l(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z);for(X=0;X<this.size*this.size;X++)U[X]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[X]-this.gridInner[X])/this.radius+this.cutoff))));return U};f.default=f;var Ga=function(ub,U){this.requestManager=
ub;this.localIdeographFontFamily=U;this.entries={}};Ga.prototype.setURL=function(ub){this.url=ub};Ga.prototype.getGlyphs=function(ub,U){var X=this,W=[],da;for(da in ub)for(var xa=0,Ka=ub[da];xa<Ka.length;xa+=1)W.push({stack:da,id:Ka[xa]});a.asyncAll(W,function(Wa,fb){var Fb=Wa.stack,Ob=Wa.id,Pb=X.entries[Fb];Pb||(Pb=X.entries[Fb]={glyphs:{},requests:{},ranges:{}});Wa=Pb.glyphs[Ob];if(void 0===Wa){if(Wa=X._tinySDF(Pb,Fb,Ob))return Pb.glyphs[Ob]=Wa,void fb(null,{stack:Fb,id:Ob,glyph:Wa});var uc=Math.floor(Ob/
256);if(65535<256*uc)fb(Error("glyphs \x3e 65535 not supported"));else if(Pb.ranges[uc])fb(null,{stack:Fb,id:Ob,glyph:Wa});else{var sc=Pb.requests[uc];sc||(sc=Pb.requests[uc]=[],Ga.loadGlyphRange(Fb,uc,X.url,X.requestManager,function(hc,rc){if(rc){for(var oc in rc)X._doesCharSupportLocalGlyph(+oc)||(Pb.glyphs[+oc]=rc[+oc]);Pb.ranges[uc]=!0}oc=0;for(var Nb=sc;oc<Nb.length;oc+=1)(0,Nb[oc])(hc,rc);delete Pb.requests[uc]}));sc.push(function(hc,rc){hc?fb(hc):rc&&fb(null,{stack:Fb,id:Ob,glyph:rc[Ob]||null})})}}else fb(null,
{stack:Fb,id:Ob,glyph:Wa})},function(Wa,fb){if(Wa)U(Wa);else if(fb){Wa={};for(var Fb=0;Fb<fb.length;Fb+=1){var Ob=fb[Fb],Pb=Ob.stack,uc=Ob.id;Ob=Ob.glyph;(Wa[Pb]||(Wa[Pb]={}))[uc]=Ob&&{id:Ob.id,bitmap:Ob.bitmap.clone(),metrics:Ob.metrics}}U(null,Wa)}})};Ga.prototype._doesCharSupportLocalGlyph=function(ub){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](ub)||a.isChar["Hangul Syllables"](ub)||a.isChar.Hiragana(ub)||a.isChar.Katakana(ub))};Ga.prototype._tinySDF=function(ub,
U,X){var W=this.localIdeographFontFamily;if(W&&this._doesCharSupportLocalGlyph(X)){var da=ub.tinySDF;da||(da="400",/bold/i.test(U)?da="900":/medium/i.test(U)?da="500":/light/i.test(U)&&(da="200"),da=ub.tinySDF=new Ga.TinySDF(24,3,8,.25,W,da));return{id:X,bitmap:new a.AlphaImage({width:30,height:30},da.draw(String.fromCharCode(X))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}};Ga.loadGlyphRange=function(ub,U,X,W,da){U*=256;var xa=U+255;ub=W.transformRequest(W.normalizeGlyphsURL(X).replace("{fontstack}",
ub).replace("{range}",U+"-"+xa),a.ResourceType.Glyphs);a.getArrayBuffer(ub,function(Ka,Wa){if(Ka)da(Ka);else if(Wa){Ka={};var fb=0;for(Wa=a.parseGlyphPBF(Wa);fb<Wa.length;fb+=1){var Fb=Wa[fb];Ka[Fb.id]=Fb}da(null,Ka)}})};Ga.TinySDF=f;var Pa=function(){this.specification=a.styleSpec.light.position};Pa.prototype.possiblyEvaluate=function(ub,U){return a.sphericalToCartesian(ub.expression.evaluate(U))};Pa.prototype.interpolate=function(ub,U,X){return{x:a.number(ub.x,U.x,X),y:a.number(ub.y,U.y,X),z:a.number(ub.z,
U.z,X)}};var Va=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new Pa,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),va=function(ub){function U(X){ub.call(this);this._transitionable=new a.Transitionable(Va);this.setLight(X);this._transitioning=this._transitionable.untransitioned()}return ub&&(U.__proto__=ub),(U.prototype=Object.create(ub&&ub.prototype)).constructor=U,U.prototype.getLight=
function(){return this._transitionable.serialize()},U.prototype.setLight=function(X,W){if(void 0===W&&(W={}),!this._validate(a.validateLight,X,W))for(var da in X)W=X[da],a.endsWith(da,"-transition")?this._transitionable.setTransition(da.slice(0,-11),W):this._transitionable.setValue(da,W)},U.prototype.updateTransitions=function(X){this._transitioning=this._transitionable.transitioned(X,this._transitioning)},U.prototype.hasTransition=function(){return this._transitioning.hasTransition()},U.prototype.recalculate=
function(X){this.properties=this._transitioning.possiblyEvaluate(X)},U.prototype._validate=function(X,W,da){return(!da||!1!==da.validate)&&a.emitValidationErrors(this,X.call(a.validateStyle,a.extend({value:W,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},U}(a.Evented),Ea=function(ub,U){this.width=ub;this.height=U;this.nextRow=0;this.data=new Uint8Array(this.width*this.height);this.dashEntry={}};Ea.prototype.getDash=function(ub,U){var X=ub.join(",")+String(U);return this.dashEntry[X]||(this.dashEntry[X]=
this.addDash(ub,U)),this.dashEntry[X]};Ea.prototype.getDashRanges=function(ub,U,X){U=[];var W=!0;U.push({left:1==ub.length%2?-ub[ub.length-1]*X:0,right:ub[0]*X,isDash:W,zeroLength:0===ub[0]});for(var da=ub[0],xa=1;xa<ub.length;xa++){var Ka=ub[xa];U.push({left:da*X,right:(da+=Ka)*X,isDash:W=!W,zeroLength:0===Ka})}return U};Ea.prototype.addRoundDash=function(ub,U,X){U/=2;for(var W=-X;W<=X;W++)for(var da=this.width*(this.nextRow+X+W),xa=0,Ka=ub[xa],Wa=0;Wa<this.width;Wa++){1<Wa/Ka.right&&(Ka=ub[++xa]);
var fb=Math.min(Math.abs(Wa-Ka.left),Math.abs(Wa-Ka.right)),Fb=W/X*(U+1);Ka.isDash?(Fb=U-Math.abs(Fb),fb=Math.sqrt(fb*fb+Fb*Fb)):fb=U-Math.sqrt(fb*fb+Fb*Fb);this.data[da+Wa]=Math.max(0,Math.min(255,fb+128))}};Ea.prototype.addRegularDash=function(ub){for(var U=ub.length-1;0<=U;--U){var X=ub[U],W=ub[U+1];X.zeroLength?ub.splice(U,1):W&&W.isDash===X.isDash&&(W.left=X.left,ub.splice(U,1))}U=ub[0];X=ub[ub.length-1];U.isDash===X.isDash&&(U.left=X.left-this.width,X.right=U.right+this.width);U=this.width*
this.nextRow;X=0;W=ub[X];for(var da=0;da<this.width;da++){1<da/W.right&&(W=ub[++X]);var xa=Math.min(Math.abs(da-W.left),Math.abs(da-W.right));this.data[U+da]=Math.max(0,Math.min(255,(W.isDash?xa:-xa)+128))}};Ea.prototype.addDash=function(ub,U){var X=U?7:0,W=2*X+1;if(this.nextRow+W>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var da=0,xa=0;xa<ub.length;xa++)da+=ub[xa];0!==da&&(xa=this.width/da,ub=this.getDashRanges(ub,this.width,xa),U?this.addRoundDash(ub,xa,X):this.addRegularDash(ub));
U={y:(this.nextRow+X+.5)/this.height,height:2*X/this.height,width:da};return this.nextRow+=W,this.dirty=!0,U};Ea.prototype.bind=function(ub){ub=ub.gl;this.texture?(ub.bindTexture(ub.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ub.texSubImage2D(ub.TEXTURE_2D,0,0,0,this.width,this.height,ub.ALPHA,ub.UNSIGNED_BYTE,this.data))):(this.texture=ub.createTexture(),ub.bindTexture(ub.TEXTURE_2D,this.texture),ub.texParameteri(ub.TEXTURE_2D,ub.TEXTURE_WRAP_S,ub.REPEAT),ub.texParameteri(ub.TEXTURE_2D,ub.TEXTURE_WRAP_T,
ub.REPEAT),ub.texParameteri(ub.TEXTURE_2D,ub.TEXTURE_MIN_FILTER,ub.LINEAR),ub.texParameteri(ub.TEXTURE_2D,ub.TEXTURE_MAG_FILTER,ub.LINEAR),ub.texImage2D(ub.TEXTURE_2D,0,ub.ALPHA,this.width,this.height,0,ub.ALPHA,ub.UNSIGNED_BYTE,this.data))};var Qa=function W(U,X){this.workerPool=U;this.actors=[];this.currentActor=0;this.id=a.uniqueId();U=this.workerPool.acquire(this.id);for(var da=0;da<U.length;da++){var xa=new W.Actor(U[da],X,this.id);xa.name="Worker "+da;this.actors.push(xa)}};Qa.prototype.broadcast=
function(U,X,W){a.asyncAll(this.actors,function(da,xa){da.send(U,X,xa)},W=W||function(){})};Qa.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]};Qa.prototype.remove=function(){this.actors.forEach(function(U){U.remove()});this.actors=[];this.workerPool.release(this.id)};Qa.Actor=a.Actor;var $a=function(U,X,W){this.bounds=a.LngLatBounds.convert(this.validateBounds(U));this.minzoom=X||0;this.maxzoom=W||24};$a.prototype.validateBounds=
function(U){return Array.isArray(U)&&4===U.length?[Math.max(-180,U[0]),Math.max(-90,U[1]),Math.min(180,U[2]),Math.min(90,U[3])]:[-180,-90,180,90]};$a.prototype.contains=function(U){var X=Math.pow(2,U.z),W=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*X),da=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*X),xa=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*X);X=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*X);return U.x>=W&&U.x<xa&&U.y>=da&&U.y<X};var eb=function(U){function X(W,
da,xa,Ka){if(U.call(this),this.id=W,this.dispatcher=xa,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(da,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},da),this._collectResourceTiming=da.collectResourceTiming,512!==this.tileSize)throw Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ka)}return U&&(X.__proto__=U),
(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.load=function(){var W=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=c(this._options,this.map._requestManager,function(da,xa){W._tileJSONRequest=null;W._loaded=!0;da?W.fire(new a.ErrorEvent(da)):xa&&(a.extend(W,xa),xa.bounds&&(W.tileBounds=new $a(xa.bounds,W.minzoom,W.maxzoom)),a.postTurnstileEvent(xa.tiles,W.map._requestManager._customAccessToken),a.postMapLoadEvent(xa.tiles,
W.map._getMapId(),W.map._requestManager._skuToken,W.map._requestManager._customAccessToken),W.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),W.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})},X.prototype.loaded=function(){return this._loaded},X.prototype.hasTile=function(W){return!this.tileBounds||this.tileBounds.contains(W.canonical)},X.prototype.onAdd=function(W){this.map=W;this.load()},X.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),
this._tileJSONRequest=null)},X.prototype.serialize=function(){return a.extend({},this._options)},X.prototype.loadTile=function(W,da){function xa(Wa,fb){return delete W.request,W.aborted?da(null):Wa&&404!==Wa.status?da(Wa):(fb&&fb.resourceTiming&&(W.resourceTiming=fb.resourceTiming),this.map._refreshExpiredTiles&&fb&&W.setExpiryData(fb),W.loadVectorData(fb,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),da(null),void(W.reloadCallback&&(this.loadTile(W,W.reloadCallback),W.reloadCallback=
null)))}var Ka=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,this.scheme));Ka={request:this.map._requestManager.transformRequest(Ka,a.ResourceType.Tile),uid:W.uid,tileID:W.tileID,zoom:W.tileID.overscaledZ,tileSize:this.tileSize*W.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Ka.request.collectResourceTiming=this._collectResourceTiming;W.actor&&"expired"!==
W.state?"loading"===W.state?W.reloadCallback=da:W.request=W.actor.send("reloadTile",Ka,xa.bind(this)):(W.actor=this.dispatcher.getActor(),W.request=W.actor.send("loadTile",Ka,xa.bind(this)))},X.prototype.abortTile=function(W){W.request&&(W.request.cancel(),delete W.request);W.actor&&W.actor.send("abortTile",{uid:W.uid,type:this.type,source:this.id},void 0)},X.prototype.unloadTile=function(W){W.unloadVectorData();W.actor&&W.actor.send("removeTile",{uid:W.uid,type:this.type,source:this.id},void 0)},
X.prototype.hasTransition=function(){return!1},X}(a.Evented),pb=function(U){function X(W,da,xa,Ka){U.call(this);this.id=W;this.dispatcher=xa;this.setEventedParent(Ka);this.type="raster";this.minzoom=0;this.maxzoom=22;this.roundZoom=!0;this.scheme="xyz";this.tileSize=512;this._loaded=!1;this._options=a.extend({type:"raster"},da);a.extend(this,a.pick(da,["url","scheme","tileSize"]))}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.load=function(){var W=
this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this._tileJSONRequest=c(this._options,this.map._requestManager,function(da,xa){W._tileJSONRequest=null;W._loaded=!0;da?W.fire(new a.ErrorEvent(da)):xa&&(a.extend(W,xa),xa.bounds&&(W.tileBounds=new $a(xa.bounds,W.minzoom,W.maxzoom)),a.postTurnstileEvent(xa.tiles),a.postMapLoadEvent(xa.tiles,W.map._getMapId(),W.map._requestManager._skuToken),W.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),W.fire(new a.Event("data",
{dataType:"source",sourceDataType:"content"})))})},X.prototype.loaded=function(){return this._loaded},X.prototype.onAdd=function(W){this.map=W;this.load()},X.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},X.prototype.serialize=function(){return a.extend({},this._options)},X.prototype.hasTile=function(W){return!this.tileBounds||this.tileBounds.contains(W.canonical)},X.prototype.loadTile=function(W,da){var xa=this,Ka=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,
this.scheme),this.tileSize);W.request=a.getImage(this.map._requestManager.transformRequest(Ka,a.ResourceType.Tile),function(Wa,fb){if(delete W.request,W.aborted)W.state="unloaded",da(null);else if(Wa)W.state="errored",da(Wa);else if(fb){xa.map._refreshExpiredTiles&&W.setExpiryData(fb);delete fb.cacheControl;delete fb.expires;Wa=xa.map.painter.context;var Fb=Wa.gl;W.texture=xa.map.painter.getTileTexture(fb.width);W.texture?W.texture.update(fb,{useMipmap:!0}):(W.texture=new a.Texture(Wa,fb,Fb.RGBA,
{useMipmap:!0}),W.texture.bind(Fb.LINEAR,Fb.CLAMP_TO_EDGE,Fb.LINEAR_MIPMAP_NEAREST),Wa.extTextureFilterAnisotropic&&Fb.texParameterf(Fb.TEXTURE_2D,Wa.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Wa.extTextureFilterAnisotropicMax));W.state="loaded";a.cacheEntryPossiblyAdded(xa.dispatcher);da(null)}})},X.prototype.abortTile=function(W,da){W.request&&(W.request.cancel(),delete W.request);da()},X.prototype.unloadTile=function(W,da){W.texture&&this.map.painter.saveTileTexture(W.texture);da()},
X.prototype.hasTransition=function(){return!1},X}(a.Evented),Za=function(U){function X(W,da,xa,Ka){U.call(this,W,da,xa,Ka);this.type="raster-dem";this.maxzoom=22;this._options=a.extend({type:"raster-dem"},da);this.encoding=da.encoding||"mapbox"}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},X.prototype.loadTile=
function(W,da){function xa(Wa,fb){Wa&&(W.state="errored",da(Wa));fb&&(W.dem=fb,W.needsHillshadePrepare=!0,W.state="loaded",da(null))}var Ka=this.map._requestManager.normalizeTileURL(W.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);W.request=a.getImage(this.map._requestManager.transformRequest(Ka,a.ResourceType.Tile),function(Wa,fb){(delete W.request,W.aborted)?(W.state="unloaded",da(null)):Wa?(W.state="errored",da(Wa)):fb&&(this.map._refreshExpiredTiles&&W.setExpiryData(fb),delete fb.cacheControl,
delete fb.expires,Wa=a.window.ImageBitmap&&fb instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?fb:a.browser.getImageData(fb,1),Wa={uid:W.uid,coord:W.tileID,source:this.id,rawImageData:Wa,encoding:this.encoding},W.actor&&"expired"!==W.state||(W.actor=this.dispatcher.getActor(),W.actor.send("loadDEMTile",Wa,xa.bind(this))))}.bind(this));W.neighboringTiles=this._getNeighboringTiles(W.tileID)},X.prototype._getNeighboringTiles=function(W){var da=W.canonical,xa=Math.pow(2,da.z),Ka=(da.x-1+
xa)%xa,Wa=0===da.x?W.wrap-1:W.wrap,fb=(da.x+1+xa)%xa,Fb=da.x+1===xa?W.wrap+1:W.wrap,Ob={};return Ob[(new a.OverscaledTileID(W.overscaledZ,Wa,da.z,Ka,da.y)).key]={backfilled:!1},Ob[(new a.OverscaledTileID(W.overscaledZ,Fb,da.z,fb,da.y)).key]={backfilled:!1},0<da.y&&(Ob[(new a.OverscaledTileID(W.overscaledZ,Wa,da.z,Ka,da.y-1)).key]={backfilled:!1},Ob[(new a.OverscaledTileID(W.overscaledZ,W.wrap,da.z,da.x,da.y-1)).key]={backfilled:!1},Ob[(new a.OverscaledTileID(W.overscaledZ,Fb,da.z,fb,da.y-1)).key]=
{backfilled:!1}),da.y+1<xa&&(Ob[(new a.OverscaledTileID(W.overscaledZ,Wa,da.z,Ka,da.y+1)).key]={backfilled:!1},Ob[(new a.OverscaledTileID(W.overscaledZ,W.wrap,da.z,da.x,da.y+1)).key]={backfilled:!1},Ob[(new a.OverscaledTileID(W.overscaledZ,Fb,da.z,fb,da.y+1)).key]={backfilled:!1}),Ob},X.prototype.unloadTile=function(W){W.demTexture&&this.map.painter.saveTileTexture(W.demTexture);W.fbo&&(W.fbo.destroy(),delete W.fbo);W.dem&&delete W.dem;delete W.neighboringTiles;W.state="unloaded";W.actor&&W.actor.send("removeDEMTile",
{uid:W.uid,source:this.id})},X}(pb),nb=function(U){function X(W,da,xa,Ka){U.call(this);this.id=W;this.type="geojson";this.minzoom=0;this.maxzoom=18;this.tileSize=512;this.reparseOverscaled=this.isTileClipped=!0;this._loaded=this._removed=!1;this.actor=xa.getActor();this.setEventedParent(Ka);this._data=da.data;this._options=a.extend({},da);this._collectResourceTiming=da.collectResourceTiming;this._resourceTiming=[];void 0!==da.maxzoom&&(this.maxzoom=da.maxzoom);da.type&&(this.type=da.type);da.attribution&&
(this.attribution=da.attribution);this.promoteId=da.promoteId;W=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:da.cluster||!1,geojsonVtOptions:{buffer:(void 0!==da.buffer?da.buffer:128)*W,tolerance:(void 0!==da.tolerance?da.tolerance:.375)*W,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:da.lineMetrics||!1,generateId:da.generateId||!1},superclusterOptions:{maxZoom:void 0!==da.clusterMaxZoom?Math.min(da.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:a.EXTENT,radius:(da.clusterRadius||
50)*W,log:!1,generateId:da.generateId||!1},clusterProperties:da.clusterProperties},da.workerOptions)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.load=function(){var W=this;this.fire(new a.Event("dataloading",{dataType:"source"}));this._updateWorkerData(function(da){da?W.fire(new a.ErrorEvent(da)):(da={dataType:"source",sourceDataType:"metadata"},W._collectResourceTiming&&W._resourceTiming&&0<W._resourceTiming.length&&(da.resourceTiming=W._resourceTiming,
W._resourceTiming=[]),W.fire(new a.Event("data",da)))})},X.prototype.onAdd=function(W){this.map=W;this.load()},X.prototype.setData=function(W){var da=this;return this._data=W,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(xa){xa?da.fire(new a.ErrorEvent(xa)):(xa={dataType:"source",sourceDataType:"content"},da._collectResourceTiming&&da._resourceTiming&&0<da._resourceTiming.length&&(xa.resourceTiming=da._resourceTiming,da._resourceTiming=[]),da.fire(new a.Event("data",
xa)))}),this},X.prototype.getClusterExpansionZoom=function(W,da){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:W,source:this.id},da),this},X.prototype.getClusterChildren=function(W,da){return this.actor.send("geojson.getClusterChildren",{clusterId:W,source:this.id},da),this},X.prototype.getClusterLeaves=function(W,da,xa,Ka){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:W,limit:da,offset:xa},Ka),this},X.prototype._updateWorkerData=function(W){var da=
this;this._loaded=!1;var xa=a.extend({},this.workerOptions),Ka=this._data;"string"==typeof Ka?(xa.request=this.map._requestManager.transformRequest(a.browser.resolveURL(Ka),a.ResourceType.Source),xa.request.collectResourceTiming=this._collectResourceTiming):xa.data=JSON.stringify(Ka);this.actor.send(this.type+".loadData",xa,function(Wa,fb){da._removed||fb&&fb.abandoned||(da._loaded=!0,fb&&fb.resourceTiming&&fb.resourceTiming[da.id]&&(da._resourceTiming=fb.resourceTiming[da.id].slice(0)),da.actor.send(da.type+
".coalesce",{source:xa.source},null),W(Wa))})},X.prototype.loaded=function(){return this._loaded},X.prototype.loadTile=function(W,da){var xa=this,Ka=W.actor?"reloadTile":"loadTile";W.actor=this.actor;W.request=this.actor.send(Ka,{type:this.type,uid:W.uid,tileID:W.tileID,zoom:W.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Wa,fb){return delete W.request,
W.unloadVectorData(),W.aborted?da(null):Wa?da(Wa):(W.loadVectorData(fb,xa.map.painter,"reloadTile"===Ka),da(null))})},X.prototype.abortTile=function(W){W.request&&(W.request.cancel(),delete W.request);W.aborted=!0},X.prototype.unloadTile=function(W){W.unloadVectorData();this.actor.send("removeTile",{uid:W.uid,type:this.type,source:this.id})},X.prototype.onRemove=function(){this._removed=!0;this.actor.send("removeSource",{type:this.type,source:this.id})},X.prototype.serialize=function(){return a.extend({},
this._options,{type:this.type,data:this._data})},X.prototype.hasTransition=function(){return!1},X}(a.Evented),sb=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Cb=function(U){function X(W,da,xa,Ka){U.call(this);this.id=W;this.dispatcher=xa;this.coordinates=da.coordinates;this.type="image";this.minzoom=0;this.maxzoom=22;this.tileSize=512;this.tiles={};this._loaded=!1;this.setEventedParent(Ka);this.options=da}return U&&(X.__proto__=U),(X.prototype=
Object.create(U&&U.prototype)).constructor=X,X.prototype.load=function(W,da){var xa=this;this._loaded=!1;this.fire(new a.Event("dataloading",{dataType:"source"}));this.url=this.options.url;a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),function(Ka,Wa){xa._loaded=!0;Ka?xa.fire(new a.ErrorEvent(Ka)):Wa&&(xa.image=Wa,W&&(xa.coordinates=W),da&&da(),xa._finishLoading())})},X.prototype.loaded=function(){return this._loaded},X.prototype.updateImage=function(W){var da=
this;return this.image&&W.url?(this.options.url=W.url,this.load(W.coordinates,function(){da.texture=null}),this):this},X.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},X.prototype.onAdd=function(W){this.map=W;this.load()},X.prototype.setCoordinates=function(W){var da=this;this.coordinates=W;W=W.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(xa){for(var Ka=1/0,Wa=1/0,fb=-1/
0,Fb=-1/0,Ob=0;Ob<xa.length;Ob+=1){var Pb=xa[Ob];Ka=Math.min(Ka,Pb.x);Wa=Math.min(Wa,Pb.y);fb=Math.max(fb,Pb.x);Fb=Math.max(Fb,Pb.y)}xa=Math.max(0,Math.floor(-Math.log(Math.max(fb-Ka,Fb-Wa))/Math.LN2));Ob=Math.pow(2,xa);return new a.CanonicalTileID(xa,Math.floor((Ka+fb)/2*Ob),Math.floor((Wa+Fb)/2*Ob))}(W);this.minzoom=this.maxzoom=this.tileID.z;W=W.map(function(xa){return da.tileID.getTilePoint(xa)._round()});return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(W[0].x,
W[0].y,0,0),this._boundsArray.emplaceBack(W[1].x,W[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(W[3].x,W[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(W[2].x,W[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},X.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var W=this.map.painter.context,da=W.gl,xa;for(xa in this.boundsBuffer||(this.boundsBuffer=
W.createVertexBuffer(this._boundsArray,sb.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(W,this.image,da.RGBA),this.texture.bind(da.LINEAR,da.CLAMP_TO_EDGE)),this.tiles)W=this.tiles[xa],"loaded"!==W.state&&(W.state="loaded",W.texture=this.texture)}},X.prototype.loadTile=function(W,da){this.tileID&&this.tileID.equals(W.tileID.canonical)?(this.tiles[String(W.tileID.wrap)]=W,W.buckets={},da(null)):(W.state="errored",
da(null))},X.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},X.prototype.hasTransition=function(){return!1},X}(a.Evented),Ib=function(U){function X(W,da,xa,Ka){U.call(this,W,da,xa,Ka);this.roundZoom=!0;this.type="video";this.options=da}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.load=function(){var W=this;this._loaded=!1;var da=this.options;this.urls=[];var xa=0;for(da=da.urls;xa<da.length;xa+=
1)this.urls.push(this.map._requestManager.transformRequest(da[xa],a.ResourceType.Source).url);a.getVideo(this.urls,function(Ka,Wa){W._loaded=!0;Ka?W.fire(new a.ErrorEvent(Ka)):Wa&&(W.video=Wa,W.video.loop=!0,W.video.addEventListener("playing",function(){W.map.triggerRepaint()}),W.map&&W.video.play(),W._finishLoading())})},X.prototype.pause=function(){this.video&&this.video.pause()},X.prototype.play=function(){this.video&&this.video.play()},X.prototype.seek=function(W){if(this.video){var da=this.video.seekable;
W<da.start(0)||W>da.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+da.start(0)+" and "+da.end(0)+"-second mark."))):this.video.currentTime=W}},X.prototype.getVideo=function(){return this.video},X.prototype.onAdd=function(W){this.map||(this.map=W,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},X.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||2>this.video.readyState)){var W=
this.map.painter.context,da=W.gl,xa;for(xa in this.boundsBuffer||(this.boundsBuffer=W.createVertexBuffer(this._boundsArray,sb.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(da.LINEAR,da.CLAMP_TO_EDGE),da.texSubImage2D(da.TEXTURE_2D,0,0,0,da.RGBA,da.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(W,this.video,da.RGBA),this.texture.bind(da.LINEAR,da.CLAMP_TO_EDGE)),this.tiles)W=this.tiles[xa],"loaded"!==
W.state&&(W.state="loaded",W.texture=this.texture)}},X.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},X.prototype.hasTransition=function(){return this.video&&!this.video.paused},X}(Cb),fc=function(U){function X(W,da,xa,Ka){U.call(this,W,da,xa,Ka);da.coordinates?Array.isArray(da.coordinates)&&4===da.coordinates.length&&!da.coordinates.some(function(Wa){return!Array.isArray(Wa)||2!==Wa.length||Wa.some(function(fb){return"number"!=typeof fb})})||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+
W,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+W,null,'missing required property "coordinates"')));da.animate&&"boolean"!=typeof da.animate&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+W,null,'optional "animate" property must be a boolean value')));da.canvas?"string"==typeof da.canvas||da.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+
W,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+W,null,'missing required property "canvas"')));this.options=da;this.animate=void 0===da.animate||da.animate}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.load=function(){this._loaded=!0;this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?
this.options.canvas:a.window.document.getElementById(this.options.canvas));this.width=this.canvas.width;this.height=this.canvas.height;this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0;this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},X.prototype.getCanvas=function(){return this.canvas},X.prototype.onAdd=function(W){this.map=
W;this.load();this.canvas&&this.animate&&this.play()},X.prototype.onRemove=function(){this.pause()},X.prototype.prepare=function(){var W=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,W=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,W=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var da=this.map.painter.context,xa=da.gl,Ka;for(Ka in this.boundsBuffer||(this.boundsBuffer=da.createVertexBuffer(this._boundsArray,sb.members)),this.boundsSegments||
(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(W||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(da,this.canvas,xa.RGBA,{premultiply:!0}),this.tiles)W=this.tiles[Ka],"loaded"!==W.state&&(W.state="loaded",W.texture=this.texture)}},X.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},X.prototype.hasTransition=function(){return this._playing},X.prototype._hasInvalidDimensions=function(){for(var W=
0,da=[this.canvas.width,this.canvas.height];W<da.length;W+=1){var xa=da[W];if(isNaN(xa)||0>=xa)return!0}return!1},X}(Cb),qc={vector:eb,raster:pb,"raster-dem":Za,geojson:nb,video:Ib,image:Cb,canvas:fc},Cc=function(U,X){this.max=U;this.onRemove=X;this.reset()};Cc.prototype.reset=function(){for(var U in this.data)for(var X=0,W=this.data[U];X<W.length;X+=1){var da=W[X];da.timeout&&clearTimeout(da.timeout);this.onRemove(da.value)}return this.data={},this.order=[],this};Cc.prototype.add=function(U,X,W){var da=
this,xa=U.wrapped().key;void 0===this.data[xa]&&(this.data[xa]=[]);var Ka={value:X,timeout:void 0};(void 0!==W&&(Ka.timeout=setTimeout(function(){da.remove(U,Ka)},W)),this.data[xa].push(Ka),this.order.push(xa),this.order.length>this.max)&&(X=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(X);return this};Cc.prototype.has=function(U){return U.wrapped().key in this.data};Cc.prototype.getAndRemove=function(U){return this.has(U)?this._getAndRemoveByKey(U.wrapped().key):null};Cc.prototype._getAndRemoveByKey=
function(U){var X=this.data[U].shift();return X.timeout&&clearTimeout(X.timeout),0===this.data[U].length&&delete this.data[U],this.order.splice(this.order.indexOf(U),1),X.value};Cc.prototype.getByKey=function(U){return(U=this.data[U])?U[0].value:null};Cc.prototype.get=function(U){return this.has(U)?this.data[U.wrapped().key][0].value:null};Cc.prototype.remove=function(U,X){if(!this.has(U))return this;U=U.wrapped().key;X=void 0===X?0:this.data[U].indexOf(X);var W=this.data[U][X];return this.data[U].splice(X,
1),W.timeout&&clearTimeout(W.timeout),0===this.data[U].length&&delete this.data[U],this.onRemove(W.value),this.order.splice(this.order.indexOf(U),1),this};Cc.prototype.setMaxSize=function(U){for(this.max=U;this.order.length>this.max;)(U=this._getAndRemoveByKey(this.order[0]))&&this.onRemove(U);return this};Cc.prototype.filter=function(U){var X=[];for(Ka in this.data)for(var W=0,da=this.data[Ka];W<da.length;W+=1){var xa=da[W];U(xa.value)||X.push(xa)}for(U=0;U<X.length;U+=1){var Ka=X[U];this.remove(Ka.value.tileID,
Ka)}};var cd=function(U,X,W){this.context=U;var da=U.gl;this.buffer=da.createBuffer();this.dynamicDraw=!!W;this.context.unbindVAO();U.bindElementBuffer.set(this.buffer);da.bufferData(da.ELEMENT_ARRAY_BUFFER,X.arrayBuffer,this.dynamicDraw?da.DYNAMIC_DRAW:da.STATIC_DRAW);this.dynamicDraw||delete X.arrayBuffer};cd.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)};cd.prototype.updateData=function(U){var X=this.context.gl;this.context.unbindVAO();this.bind();X.bufferSubData(X.ELEMENT_ARRAY_BUFFER,
0,U.arrayBuffer)};cd.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Qc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Wc=function(U,X,W,da){this.length=X.length;this.attributes=W;this.itemSize=X.bytesPerElement;this.dynamicDraw=da;this.context=U;W=U.gl;this.buffer=W.createBuffer();U.bindVertexBuffer.set(this.buffer);W.bufferData(W.ARRAY_BUFFER,X.arrayBuffer,this.dynamicDraw?
W.DYNAMIC_DRAW:W.STATIC_DRAW);this.dynamicDraw||delete X.arrayBuffer};Wc.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)};Wc.prototype.updateData=function(U){var X=this.context.gl;this.bind();X.bufferSubData(X.ARRAY_BUFFER,0,U.arrayBuffer)};Wc.prototype.enableAttributes=function(U,X){for(var W=0;W<this.attributes.length;W++){var da=X.attributes[this.attributes[W].name];void 0!==da&&U.enableVertexAttribArray(da)}};Wc.prototype.setVertexAttribPointers=function(U,X,W){for(var da=
0;da<this.attributes.length;da++){var xa=this.attributes[da],Ka=X.attributes[xa.name];void 0!==Ka&&U.vertexAttribPointer(Ka,xa.components,U[Qc[xa.type]],!1,this.itemSize,xa.offset+this.itemSize*(W||0))}};Wc.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Fc=function(U){this.gl=U.gl;this.current=this.default=this.getDefault();this.dirty=!1};Fc.prototype.get=function(){return this.current};Fc.prototype.set=function(U){};Fc.prototype.getDefault=
function(){return this.default};Fc.prototype.setDefault=function(){this.set(this.default)};var ld=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return a.Color.transparent},X.prototype.set=function(W){var da=this.current;(W.r!==da.r||W.g!==da.g||W.b!==da.b||W.a!==da.a||this.dirty)&&(this.gl.clearColor(W.r,W.g,W.b,W.a),this.current=W,this.dirty=!1)},X}(Fc),yb=function(U){function X(){U.apply(this,
arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return 1},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.clearDepth(W),this.current=W,this.dirty=!1)},X}(Fc),Wb=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return 0},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.clearStencil(W),
this.current=W,this.dirty=!1)},X}(Fc),Dc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return[!0,!0,!0,!0]},X.prototype.set=function(W){var da=this.current;(W[0]!==da[0]||W[1]!==da[1]||W[2]!==da[2]||W[3]!==da[3]||this.dirty)&&(this.gl.colorMask(W[0],W[1],W[2],W[3]),this.current=W,this.dirty=!1)},X}(Fc),ec=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),
(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return!0},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.depthMask(W),this.current=W,this.dirty=!1)},X}(Fc),kc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return 255},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.stencilMask(W),this.current=
W,this.dirty=!1)},X}(Fc),ic=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},X.prototype.set=function(W){var da=this.current;(W.func!==da.func||W.ref!==da.ref||W.mask!==da.mask||this.dirty)&&(this.gl.stencilFunc(W.func,W.ref,W.mask),this.current=W,this.dirty=!1)},X}(Fc),ob=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=
U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){var W=this.gl;return[W.KEEP,W.KEEP,W.KEEP]},X.prototype.set=function(W){var da=this.current;(W[0]!==da[0]||W[1]!==da[1]||W[2]!==da[2]||this.dirty)&&(this.gl.stencilOp(W[0],W[1],W[2]),this.current=W,this.dirty=!1)},X}(Fc),tb=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=
function(W){if(W!==this.current||this.dirty){var da=this.gl;W?da.enable(da.STENCIL_TEST):da.disable(da.STENCIL_TEST);this.current=W;this.dirty=!1}},X}(Fc),$b=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return[0,1]},X.prototype.set=function(W){var da=this.current;(W[0]!==da[0]||W[1]!==da[1]||this.dirty)&&(this.gl.depthRange(W[0],W[1]),this.current=W,this.dirty=!1)},X}(Fc),lc=function(U){function X(){U.apply(this,
arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(W){if(W!==this.current||this.dirty){var da=this.gl;W?da.enable(da.DEPTH_TEST):da.disable(da.DEPTH_TEST);this.current=W;this.dirty=!1}},X}(Fc),yc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return this.gl.LESS},X.prototype.set=
function(W){(W!==this.current||this.dirty)&&(this.gl.depthFunc(W),this.current=W,this.dirty=!1)},X}(Fc),Rb=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(W){if(W!==this.current||this.dirty){var da=this.gl;W?da.enable(da.BLEND):da.disable(da.BLEND);this.current=W;this.dirty=!1}},X}(Fc),Ub=function(U){function X(){U.apply(this,arguments)}return U&&
(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){var W=this.gl;return[W.ONE,W.ZERO]},X.prototype.set=function(W){var da=this.current;(W[0]!==da[0]||W[1]!==da[1]||this.dirty)&&(this.gl.blendFunc(W[0],W[1]),this.current=W,this.dirty=!1)},X}(Fc),zb=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return a.Color.transparent},X.prototype.set=
function(W){var da=this.current;(W.r!==da.r||W.g!==da.g||W.b!==da.b||W.a!==da.a||this.dirty)&&(this.gl.blendColor(W.r,W.g,W.b,W.a),this.current=W,this.dirty=!1)},X}(Fc),qb=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return this.gl.FUNC_ADD},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.blendEquation(W),this.current=W,this.dirty=!1)},X}(Fc),vb=function(U){function X(){U.apply(this,
arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(W){if(W!==this.current||this.dirty){var da=this.gl;W?da.enable(da.CULL_FACE):da.disable(da.CULL_FACE);this.current=W;this.dirty=!1}},X}(Fc),Db=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return this.gl.BACK},X.prototype.set=
function(W){(W!==this.current||this.dirty)&&(this.gl.cullFace(W),this.current=W,this.dirty=!1)},X}(Fc),Qb=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return this.gl.CCW},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.frontFace(W),this.current=W,this.dirty=!1)},X}(Fc),wc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=
Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.useProgram(W),this.current=W,this.dirty=!1)},X}(Fc),dc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return this.gl.TEXTURE0},X.prototype.set=function(W){(W!==this.current||this.dirty)&&(this.gl.activeTexture(W),this.current=
W,this.dirty=!1)},X}(Fc),xc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){var W=this.gl;return[0,0,W.drawingBufferWidth,W.drawingBufferHeight]},X.prototype.set=function(W){var da=this.current;(W[0]!==da[0]||W[1]!==da[1]||W[2]!==da[2]||W[3]!==da[3]||this.dirty)&&(this.gl.viewport(W[0],W[1],W[2],W[3]),this.current=W,this.dirty=!1)},X}(Fc),Nc=function(U){function X(){U.apply(this,
arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(W){if(W!==this.current||this.dirty){var da=this.gl;da.bindFramebuffer(da.FRAMEBUFFER,W);this.current=W;this.dirty=!1}},X}(Fc),Lc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(W){if(W!==
this.current||this.dirty){var da=this.gl;da.bindRenderbuffer(da.RENDERBUFFER,W);this.current=W;this.dirty=!1}},X}(Fc),$c=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(W){if(W!==this.current||this.dirty){var da=this.gl;da.bindTexture(da.TEXTURE_2D,W);this.current=W;this.dirty=!1}},X}(Fc),od=function(U){function X(){U.apply(this,arguments)}return U&&
(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(W){if(W!==this.current||this.dirty){var da=this.gl;da.bindBuffer(da.ARRAY_BUFFER,W);this.current=W;this.dirty=!1}},X}(Fc),Zc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(W){var da=this.gl;da.bindBuffer(da.ELEMENT_ARRAY_BUFFER,
W);this.current=W;this.dirty=!1},X}(Fc),rd=function(U){function X(W){U.call(this,W);this.vao=W.extVertexArrayObject}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(W){this.vao&&(W!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(W),this.current=W,this.dirty=!1)},X}(Fc),Dd=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=
X,X.prototype.getDefault=function(){return 4},X.prototype.set=function(W){if(W!==this.current||this.dirty){var da=this.gl;da.pixelStorei(da.UNPACK_ALIGNMENT,W);this.current=W;this.dirty=!1}},X}(Fc),ed=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(W){if(W!==this.current||this.dirty){var da=this.gl;da.pixelStorei(da.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
W);this.current=W;this.dirty=!1}},X}(Fc),Mc=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(W){if(W!==this.current||this.dirty){var da=this.gl;da.pixelStorei(da.UNPACK_FLIP_Y_WEBGL,W);this.current=W;this.dirty=!1}},X}(Fc),sd=function(U){function X(W,da){U.call(this,W);this.context=W;this.parent=da}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&
U.prototype)).constructor=X,X.prototype.getDefault=function(){return null},X}(Fc),yd=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.setDirty=function(){this.dirty=!0},X.prototype.set=function(W){if(W!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var da=this.gl;da.framebufferTexture2D(da.FRAMEBUFFER,da.COLOR_ATTACHMENT0,da.TEXTURE_2D,W,0);this.current=W;this.dirty=!1}},X}(sd),
Fd=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.set=function(W){if(W!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var da=this.gl;da.framebufferRenderbuffer(da.FRAMEBUFFER,da.DEPTH_ATTACHMENT,da.RENDERBUFFER,W);this.current=W;this.dirty=!1}},X}(sd),xe=function(U,X,W,da){this.context=U;this.width=X;this.height=W;X=this.framebuffer=U.gl.createFramebuffer();this.colorAttachment=
new yd(U,X);da&&(this.depthAttachment=new Fd(U,X))};xe.prototype.destroy=function(){var U=this.context.gl,X=this.colorAttachment.get();(X&&U.deleteTexture(X),this.depthAttachment)&&(X=this.depthAttachment.get())&&U.deleteRenderbuffer(X);U.deleteFramebuffer(this.framebuffer)};var Kd=function(U,X,W){this.func=U;this.mask=X;this.range=W};Kd.ReadOnly=!1;Kd.ReadWrite=!0;Kd.disabled=new Kd(519,Kd.ReadOnly,[0,1]);var Gc=function(U,X,W,da,xa,Ka){this.test=U;this.ref=X;this.mask=W;this.fail=da;this.depthFail=
xa;this.pass=Ka};Gc.disabled=new Gc({func:519,mask:0},0,0,7680,7680,7680);var dd=function(U,X,W){this.blendFunction=U;this.blendColor=X;this.mask=W};dd.disabled=new dd(dd.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]);dd.unblended=new dd(dd.Replace,a.Color.transparent,[!0,!0,!0,!0]);dd.alphaBlended=new dd([1,771],a.Color.transparent,[!0,!0,!0,!0]);var vd=function(U,X,W){this.enable=U;this.mode=X;this.frontFace=W};vd.disabled=new vd(!1,1029,2305);vd.backCCW=new vd(!0,1029,2305);var Cd=function(U){this.gl=
U;this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object");this.clearColor=new ld(this);this.clearDepth=new yb(this);this.clearStencil=new Wb(this);this.colorMask=new Dc(this);this.depthMask=new ec(this);this.stencilMask=new kc(this);this.stencilFunc=new ic(this);this.stencilOp=new ob(this);this.stencilTest=new tb(this);this.depthRange=new $b(this);this.depthTest=new lc(this);this.depthFunc=new yc(this);this.blend=new Rb(this);this.blendFunc=new Ub(this);this.blendColor=new zb(this);
this.blendEquation=new qb(this);this.cullFace=new vb(this);this.cullFaceSide=new Db(this);this.frontFace=new Qb(this);this.program=new wc(this);this.activeTexture=new dc(this);this.viewport=new xc(this);this.bindFramebuffer=new Nc(this);this.bindRenderbuffer=new Lc(this);this.bindTexture=new $c(this);this.bindVertexBuffer=new od(this);this.bindElementBuffer=new Zc(this);this.bindVertexArrayOES=this.extVertexArrayObject&&new rd(this);this.pixelStoreUnpack=new Dd(this);this.pixelStoreUnpackPremultiplyAlpha=
new ed(this);this.pixelStoreUnpackFlipY=new Mc(this);(this.extTextureFilterAnisotropic=U.getExtension("EXT_texture_filter_anisotropic")||U.getExtension("MOZ_EXT_texture_filter_anisotropic")||U.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))&&(this.extTextureFilterAnisotropicMax=U.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT));(this.extTextureHalfFloat=U.getExtension("OES_texture_half_float"))&&(U.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=
U.getExtension("EXT_color_buffer_half_float"));this.extTimerQuery=U.getExtension("EXT_disjoint_timer_query")};Cd.prototype.setDefault=function(){this.unbindVAO();this.clearColor.setDefault();this.clearDepth.setDefault();this.clearStencil.setDefault();this.colorMask.setDefault();this.depthMask.setDefault();this.stencilMask.setDefault();this.stencilFunc.setDefault();this.stencilOp.setDefault();this.stencilTest.setDefault();this.depthRange.setDefault();this.depthTest.setDefault();this.depthFunc.setDefault();
this.blend.setDefault();this.blendFunc.setDefault();this.blendColor.setDefault();this.blendEquation.setDefault();this.cullFace.setDefault();this.cullFaceSide.setDefault();this.frontFace.setDefault();this.program.setDefault();this.activeTexture.setDefault();this.bindFramebuffer.setDefault();this.pixelStoreUnpack.setDefault();this.pixelStoreUnpackPremultiplyAlpha.setDefault();this.pixelStoreUnpackFlipY.setDefault()};Cd.prototype.setDirty=function(){this.clearColor.dirty=!0;this.clearDepth.dirty=!0;
this.clearStencil.dirty=!0;this.colorMask.dirty=!0;this.depthMask.dirty=!0;this.stencilMask.dirty=!0;this.stencilFunc.dirty=!0;this.stencilOp.dirty=!0;this.stencilTest.dirty=!0;this.depthRange.dirty=!0;this.depthTest.dirty=!0;this.depthFunc.dirty=!0;this.blend.dirty=!0;this.blendFunc.dirty=!0;this.blendColor.dirty=!0;this.blendEquation.dirty=!0;this.cullFace.dirty=!0;this.cullFaceSide.dirty=!0;this.frontFace.dirty=!0;this.program.dirty=!0;this.activeTexture.dirty=!0;this.viewport.dirty=!0;this.bindFramebuffer.dirty=
!0;this.bindRenderbuffer.dirty=!0;this.bindTexture.dirty=!0;this.bindVertexBuffer.dirty=!0;this.bindElementBuffer.dirty=!0;this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0);this.pixelStoreUnpack.dirty=!0;this.pixelStoreUnpackPremultiplyAlpha.dirty=!0;this.pixelStoreUnpackFlipY.dirty=!0};Cd.prototype.createIndexBuffer=function(U,X){return new cd(this,U,X)};Cd.prototype.createVertexBuffer=function(U,X,W){return new Wc(this,U,X,W)};Cd.prototype.createRenderbuffer=function(U,X,W){var da=this.gl,
xa=da.createRenderbuffer();return this.bindRenderbuffer.set(xa),da.renderbufferStorage(da.RENDERBUFFER,U,X,W),this.bindRenderbuffer.set(null),xa};Cd.prototype.createFramebuffer=function(U,X,W){return new xe(this,U,X,W)};Cd.prototype.clear=function(U){var X=U.color;U=U.depth;var W=this.gl,da=0;X&&(da|=W.COLOR_BUFFER_BIT,this.clearColor.set(X),this.colorMask.set([!0,!0,!0,!0]));void 0!==U&&(da|=W.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(U),this.depthMask.set(!0));W.clear(da)};
Cd.prototype.setCullFace=function(U){!1===U.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(U.mode),this.frontFace.set(U.frontFace))};Cd.prototype.setDepthMode=function(U){U.func!==this.gl.ALWAYS||U.mask?(this.depthTest.set(!0),this.depthFunc.set(U.func),this.depthMask.set(U.mask),this.depthRange.set(U.range)):this.depthTest.set(!1)};Cd.prototype.setStencilMode=function(U){U.test.func!==this.gl.ALWAYS||U.mask?(this.stencilTest.set(!0),this.stencilMask.set(U.mask),this.stencilOp.set([U.fail,
U.depthFail,U.pass]),this.stencilFunc.set({func:U.test.func,ref:U.ref,mask:U.test.mask})):this.stencilTest.set(!1)};Cd.prototype.setColorMode=function(U){a.deepEqual(U.blendFunction,dd.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(U.blendFunction),this.blendColor.set(U.blendColor));this.colorMask.set(U.mask)};Cd.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ae=function(U){function X(W,da,xa){var Ka=this;U.call(this);this.id=W;
this.dispatcher=xa;this.on("data",function(Wa){"source"===Wa.dataType&&"metadata"===Wa.sourceDataType&&(Ka._sourceLoaded=!0);Ka._sourceLoaded&&!Ka._paused&&"source"===Wa.dataType&&"content"===Wa.sourceDataType&&(Ka.reload(),Ka.transform&&Ka.update(Ka.transform))});this.on("error",function(){Ka._sourceErrored=!0});this._source=function(Wa,fb,Fb,Ob){fb=new qc[fb.type](Wa,fb,Fb,Ob);if(fb.id!==Wa)throw Error("Expected Source id to be "+Wa+" instead of "+fb.id);return a.bindAll(["load","abort","unload",
"serialize","prepare"],fb),fb}(W,da,xa,this);this._tiles={};this._cache=new Cc(0,this._unloadTile.bind(this));this._timers={};this._cacheTimers={};this._maxTileCacheSize=null;this._loadedParentTiles={};this._coveredTiles={};this._state=new a.SourceFeatureState}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.onAdd=function(W){this._maxTileCacheSize=(this.map=W)?W._maxTileCacheSize:null;this._source&&this._source.onAdd&&this._source.onAdd(W)},X.prototype.onRemove=
function(W){this._source&&this._source.onRemove&&this._source.onRemove(W)},X.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var W in this._tiles){var da=this._tiles[W];if("loaded"!==da.state&&"errored"!==da.state)return!1}return!0},X.prototype.getSource=function(){return this._source},X.prototype.pause=function(){this._paused=!0},X.prototype.resume=function(){if(this._paused){var W=this._shouldReloadOnResume;this._shouldReloadOnResume=
this._paused=!1;W&&this.reload();this.transform&&this.update(this.transform)}},X.prototype._loadTile=function(W,da){return this._source.loadTile(W,da)},X.prototype._unloadTile=function(W){if(this._source.unloadTile)return this._source.unloadTile(W,function(){})},X.prototype._abortTile=function(W){if(this._source.abortTile)return this._source.abortTile(W,function(){})},X.prototype.serialize=function(){return this._source.serialize()},X.prototype.prepare=function(W){for(var da in this._source.prepare&&
this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var xa=this._tiles[da];xa.upload(W);xa.prepare(this.map.style.imageManager)}},X.prototype.getIds=function(){return a.values(this._tiles).map(function(W){return W.tileID}).sort(q).map(function(W){return W.key})},X.prototype.getRenderableIds=function(W){var da=this,xa=[],Ka;for(Ka in this._tiles)this._isIdRenderable(Ka,W)&&xa.push(this._tiles[Ka]);return W?xa.sort(function(Wa,fb){Wa=Wa.tileID;
fb=fb.tileID;var Fb=(new a.Point(Wa.canonical.x,Wa.canonical.y))._rotate(da.transform.angle),Ob=(new a.Point(fb.canonical.x,fb.canonical.y))._rotate(da.transform.angle);return Wa.overscaledZ-fb.overscaledZ||Ob.y-Fb.y||Ob.x-Fb.x}).map(function(Wa){return Wa.tileID.key}):xa.map(function(Wa){return Wa.tileID}).sort(q).map(function(Wa){return Wa.key})},X.prototype.hasRenderableParent=function(W){W=this.findLoadedParent(W,0);return!!W&&this._isIdRenderable(W.tileID.key)},X.prototype._isIdRenderable=function(W,
da){return this._tiles[W]&&this._tiles[W].hasData()&&!this._coveredTiles[W]&&(da||!this._tiles[W].holdingForFade())},X.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var W in this._cache.reset(),this._tiles)"errored"!==this._tiles[W].state&&this._reloadTile(W,"reloading")},X.prototype._reloadTile=function(W,da){var xa=this._tiles[W];xa&&("loading"!==xa.state&&(xa.state=da),this._loadTile(xa,this._tileLoaded.bind(this,xa,W,da)))},X.prototype._tileLoaded=function(W,
da,xa,Ka){if(Ka)return W.state="errored",void(404!==Ka.status?this._source.fire(new a.ErrorEvent(Ka,{tile:W})):this.update(this.transform));W.timeAdded=a.browser.now();"expired"===xa&&(W.refreshedUponExpiration=!0);this._setTileReloadTimer(da,W);"raster-dem"===this.getSource().type&&W.dem&&this._backfillDEM(W);this._state.initializeTileState(W,this.map?this.map.painter:null);this._source.fire(new a.Event("data",{dataType:"source",tile:W,coord:W.tileID}))},X.prototype._backfillDEM=function(W){function da(fb,
Fb){fb.needsHillshadePrepare=!0;var Ob=Fb.tileID.canonical.x-fb.tileID.canonical.x,Pb=Fb.tileID.canonical.y-fb.tileID.canonical.y,uc=Math.pow(2,fb.tileID.canonical.z),sc=Fb.tileID.key;0===Ob&&0===Pb||1<Math.abs(Pb)||(1<Math.abs(Ob)&&(1===Math.abs(Ob+uc)?Ob+=uc:1===Math.abs(Ob-uc)&&(Ob-=uc)),Fb.dem&&fb.dem&&(fb.dem.backfillBorder(Fb.dem,Ob,Pb),fb.neighboringTiles&&fb.neighboringTiles[sc]&&(fb.neighboringTiles[sc].backfilled=!0)))}for(var xa=this.getRenderableIds(),Ka=0;Ka<xa.length;Ka++){var Wa=xa[Ka];
W.neighboringTiles&&W.neighboringTiles[Wa]&&(Wa=this.getTileByID(Wa),da(W,Wa),da(Wa,W))}},X.prototype.getTile=function(W){return this.getTileByID(W.key)},X.prototype.getTileByID=function(W){return this._tiles[W]},X.prototype._retainLoadedChildren=function(W,da,xa,Ka){for(var Wa in this._tiles){var fb=this._tiles[Wa];if(!(Ka[Wa]||!fb.hasData()||fb.tileID.overscaledZ<=da||fb.tileID.overscaledZ>xa)){for(var Fb=fb.tileID;fb&&fb.tileID.overscaledZ>da+1;){var Ob=fb.tileID.scaledTo(fb.tileID.overscaledZ-
1);(fb=this._tiles[Ob.key])&&fb.hasData()&&(Fb=Ob)}for(fb=Fb;fb.overscaledZ>da;)if(W[(fb=fb.scaledTo(fb.overscaledZ-1)).key]){Ka[Fb.key]=Fb;break}}}},X.prototype.findLoadedParent=function(W,da){if(W.key in this._loadedParentTiles)return(W=this._loadedParentTiles[W.key])&&W.tileID.overscaledZ>=da?W:null;for(var xa=W.overscaledZ-1;xa>=da;xa--){var Ka=W.scaledTo(xa);if(Ka=this._getLoadedTile(Ka))return Ka}},X.prototype._getLoadedTile=function(W){var da=this._tiles[W.key];return da&&da.hasData()?da:this._cache.getByKey(W.wrapped().key)},
X.prototype.updateCacheSize=function(W){W=Math.floor((Math.ceil(W.width/this._source.tileSize)+1)*(Math.ceil(W.height/this._source.tileSize)+1)*5);this._cache.setMaxSize("number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,W):W)},X.prototype.handleWrapJump=function(W){var da=Math.round((W-(void 0===this._prevLng?W:this._prevLng))/360);if(this._prevLng=W,da){W={};for(var xa in this._tiles){var Ka=this._tiles[xa];Ka.tileID=Ka.tileID.unwrapTo(Ka.tileID.wrap+da);W[Ka.tileID.key]=Ka}for(var Wa in this._tiles=
W,this._timers)clearTimeout(this._timers[Wa]),delete this._timers[Wa];for(var fb in this._tiles)this._setTileReloadTimer(fb,this._tiles[fb])}},X.prototype.update=function(W){var da=this;if(this.transform=W,this._sourceLoaded&&!this._paused){var xa;this.updateCacheSize(W);this.handleWrapJump(this.transform.center.lng);this._coveredTiles={};this.used?this._source.tileID?xa=W.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Nb){return new a.OverscaledTileID(Nb.canonical.z,Nb.wrap,Nb.canonical.z,
Nb.canonical.x,Nb.canonical.y)}):(xa=W.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(xa=xa.filter(function(Nb){return da._source.hasTile(Nb)}))):xa=[];W=W.coveringZoomLevel(this._source);var Ka=Math.max(W-X.maxOverzooming,this._source.minzoom),Wa=Math.max(W+X.maxUnderzooming,this._source.minzoom);xa=this._updateRetainedTiles(xa,W);if(t(this._source.type)){for(var fb=
{},Fb={},Ob=0,Pb=Object.keys(xa);Ob<Pb.length;Ob+=1){var uc=Pb[Ob],sc=xa[uc],hc=this._tiles[uc];!hc||hc.fadeEndTime&&hc.fadeEndTime<=a.browser.now()||((hc=this.findLoadedParent(sc,Ka))&&(this._addTile(hc.tileID),fb[hc.tileID.key]=hc.tileID),Fb[uc]=sc)}for(var rc in this._retainLoadedChildren(Fb,W,Wa,xa),fb)xa[rc]||(this._coveredTiles[rc]=!0,xa[rc]=fb[rc])}for(var oc in xa)this._tiles[oc].clearFadeHold();rc=0;for(oc=a.keysDifference(this._tiles,xa);rc<oc.length;rc+=1)W=oc[rc],Ka=this._tiles[W],Ka.hasSymbolBuckets&&
!Ka.holdingForFade()?Ka.setHoldDuration(this.map._fadeDuration):Ka.hasSymbolBuckets&&!Ka.symbolFadeFinished()||this._removeTile(W);this._updateLoadedParentTileCache()}},X.prototype.releaseSymbolFadeTiles=function(){for(var W in this._tiles)this._tiles[W].holdingForFade()&&this._removeTile(W)},X.prototype._updateRetainedTiles=function(W,da){for(var xa={},Ka={},Wa=Math.max(da-X.maxOverzooming,this._source.minzoom),fb=Math.max(da+X.maxUnderzooming,this._source.minzoom),Fb={},Ob=0;Ob<W.length;Ob+=1){var Pb=
W[Ob],uc=this._addTile(Pb);xa[Pb.key]=Pb;uc.hasData()||da<this._source.maxzoom&&(Fb[Pb.key]=Pb)}this._retainLoadedChildren(Fb,da,fb,xa);for(fb=0;fb<W.length;fb+=1)if(Fb=W[fb],Ob=this._tiles[Fb.key],!Ob.hasData()){if(da+1>this._source.maxzoom){if(Pb=Fb.children(this._source.maxzoom)[0],(uc=this.getTile(Pb))&&uc.hasData()){xa[Pb.key]=Pb;continue}}else if(Pb=Fb.children(this._source.maxzoom),xa[Pb[0].key]&&xa[Pb[1].key]&&xa[Pb[2].key]&&xa[Pb[3].key])continue;Pb=Ob.wasRequested();for(uc=Fb.overscaledZ-
1;uc>=Wa;--uc){var sc=Fb.scaledTo(uc);if(Ka[sc.key])break;if(Ka[sc.key]=!0,!(Ob=this.getTile(sc))&&Pb&&(Ob=this._addTile(sc)),Ob&&(xa[sc.key]=sc,Pb=Ob.wasRequested(),Ob.hasData()))break}}return xa},X.prototype._updateLoadedParentTileCache=function(){for(var W in this._loadedParentTiles={},this._tiles){for(var da=[],xa=void 0,Ka=this._tiles[W].tileID;0<Ka.overscaledZ;){if(Ka.key in this._loadedParentTiles){xa=this._loadedParentTiles[Ka.key];break}da.push(Ka.key);Ka=Ka.scaledTo(Ka.overscaledZ-1);if(xa=
this._getLoadedTile(Ka))break}for(Ka=0;Ka<da.length;Ka+=1)this._loadedParentTiles[da[Ka]]=xa}},X.prototype._addTile=function(W){var da=this._tiles[W.key];if(da)return da;(da=this._cache.getAndRemove(W))&&(this._setTileReloadTimer(W.key,da),da.tileID=W,this._state.initializeTileState(da,this.map?this.map.painter:null),this._cacheTimers[W.key]&&(clearTimeout(this._cacheTimers[W.key]),delete this._cacheTimers[W.key],this._setTileReloadTimer(W.key,da)));var xa=!!da;return xa||(da=new a.Tile(W,this._source.tileSize*
W.overscaleFactor()),this._loadTile(da,this._tileLoaded.bind(this,da,W.key,da.state))),da?(da.uses++,this._tiles[W.key]=da,xa||this._source.fire(new a.Event("dataloading",{tile:da,coord:da.tileID,dataType:"source"})),da):null},X.prototype._setTileReloadTimer=function(W,da){var xa=this;W in this._timers&&(clearTimeout(this._timers[W]),delete this._timers[W]);(da=da.getExpiryTimeout())&&(this._timers[W]=setTimeout(function(){xa._reloadTile(W,"expired");delete xa._timers[W]},da))},X.prototype._removeTile=
function(W){var da=this._tiles[W];da&&(da.uses--,delete this._tiles[W],this._timers[W]&&(clearTimeout(this._timers[W]),delete this._timers[W]),0<da.uses||(da.hasData()&&"reloading"!==da.state?this._cache.add(da.tileID,da,da.getExpiryTimeout()):(da.aborted=!0,this._abortTile(da),this._unloadTile(da))))},X.prototype.clearTiles=function(){for(var W in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(W);this._cache.reset()},X.prototype.tilesIn=function(W,da,xa){var Ka=this,Wa=
[],fb=this.transform;if(!fb)return Wa;xa=xa?fb.getCameraQueryGeometry(W):W;var Fb=W.map(function(oc){return fb.pointCoordinate(oc)}),Ob=xa.map(function(oc){return fb.pointCoordinate(oc)}),Pb=this.getIds(),uc=1/0,sc=1/0,hc=-1/0,rc=-1/0;for(W=0;W<Ob.length;W+=1)xa=Ob[W],uc=Math.min(uc,xa.x),sc=Math.min(sc,xa.y),hc=Math.max(hc,xa.x),rc=Math.max(rc,xa.y);W=function(oc){oc=Ka._tiles[Pb[oc]];if(!oc.holdingForFade()){var Nb=oc.tileID,jc=Math.pow(2,fb.zoom-oc.tileID.overscaledZ),Uc=da*oc.queryPadding*a.EXTENT/
oc.tileSize/jc,jd=[Nb.getTilePoint(new a.MercatorCoordinate(uc,sc)),Nb.getTilePoint(new a.MercatorCoordinate(hc,rc))];jd[0].x-Uc<a.EXTENT&&jd[0].y-Uc<a.EXTENT&&0<=jd[1].x+Uc&&0<=jd[1].y+Uc&&(Uc=Fb.map(function(qd){return Nb.getTilePoint(qd)}),jd=Ob.map(function(qd){return Nb.getTilePoint(qd)}),Wa.push({tile:oc,tileID:Nb,queryGeometry:Uc,cameraQueryGeometry:jd,scale:jc}))}};for(xa=0;xa<Pb.length;xa++)W(xa);return Wa},X.prototype.getVisibleCoordinates=function(W){var da=this;W=this.getRenderableIds(W).map(function(Wa){return da._tiles[Wa].tileID});
for(var xa=0;xa<W.length;xa+=1){var Ka=W[xa];Ka.posMatrix=this.transform.calculatePosMatrix(Ka.toUnwrapped())}return W},X.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(t(this._source.type))for(var W in this._tiles){var da=this._tiles[W];if(void 0!==da.fadeEndTime&&da.fadeEndTime>=a.browser.now())return!0}return!1},X.prototype.setFeatureState=function(W,da,xa){this._state.updateState(W||"_geojsonTileLayer",da,xa)},X.prototype.removeFeatureState=function(W,da,xa){this._state.removeFeatureState(W||
"_geojsonTileLayer",da,xa)},X.prototype.getFeatureState=function(W,da){return this._state.getState(W||"_geojsonTileLayer",da)},X.prototype.setDependencies=function(W,da,xa){(W=this._tiles[W])&&W.setDependencies(da,xa)},X.prototype.reloadTilesForDependencies=function(W,da){for(var xa in this._tiles)this._tiles[xa].hasDependency(W,da)&&this._reloadTile(xa,"reloading");this._cache.filter(function(Ka){return!Ka.hasDependency(W,da)})},X}(a.Evented);ae.maxOverzooming=10;ae.maxUnderzooming=3;var me=function(){this.active=
{}};me.prototype.acquire=function(U){if(!this.workers)for(this.workers=[];this.workers.length<me.workerCount;)this.workers.push(new v);return this.active[U]=!0,this.workers.slice()};me.prototype.release=function(U){delete this.active[U];0===this.numActive()&&(this.workers.forEach(function(X){X.terminate()}),this.workers=null)};me.prototype.isPreloaded=function(){return!!this.active.mapboxgl_preloaded_worker_pool};me.prototype.numActive=function(){return Object.keys(this.active).length};var Nd;me.workerCount=
Math.max(Math.min(Math.floor(a.browser.hardwareConcurrency/2),6),1);var Id={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",
setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},qe=function(U,X){this.reset(U,X)};qe.prototype.reset=function(U,X){this.points=U||[];this._distances=[0];for(U=1;U<this.points.length;U++)this._distances[U]=this._distances[U-1]+this.points[U].dist(this.points[U-1]);this.length=this._distances[this._distances.length-1];this.padding=Math.min(X||0,.5*this.length);this.paddedLength=this.length-2*this.padding};qe.prototype.lerp=function(U){if(1===this.points.length)return this.points[0];
U=a.clamp(U,0,1);for(var X=1,W=this._distances[X],da=U*this.paddedLength+this.padding;W<da&&X<this._distances.length;)W=this._distances[++X];U=X-1;var xa=this._distances[U];W-=xa;W=0<W?(da-xa)/W:0;return this.points[U].mult(1-W).add(this.points[X].mult(W))};var re=function(U,X,W){var da=this.boxCells=[],xa=this.circleCells=[];this.xCellCount=Math.ceil(U/W);this.yCellCount=Math.ceil(X/W);for(W=0;W<this.xCellCount*this.yCellCount;W++)da.push([]),xa.push([]);this.circleKeys=[];this.boxKeys=[];this.bboxes=
[];this.circles=[];this.width=U;this.height=X;this.xScale=this.xCellCount/U;this.yScale=this.yCellCount/X;this.circleUid=this.boxUid=0};re.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length};re.prototype.insert=function(U,X,W,da,xa){this._forEachCell(X,W,da,xa,this._insertBoxCell,this.boxUid++);this.boxKeys.push(U);this.bboxes.push(X);this.bboxes.push(W);this.bboxes.push(da);this.bboxes.push(xa)};re.prototype.insertCircle=function(U,X,W,da){this._forEachCell(X-da,W-
da,X+da,W+da,this._insertCircleCell,this.circleUid++);this.circleKeys.push(U);this.circles.push(X);this.circles.push(W);this.circles.push(da)};re.prototype._insertBoxCell=function(U,X,W,da,xa,Ka){this.boxCells[xa].push(Ka)};re.prototype._insertCircleCell=function(U,X,W,da,xa,Ka){this.circleCells[xa].push(Ka)};re.prototype._query=function(U,X,W,da,xa,Ka){if(0>W||U>this.width||0>da||X>this.height)return!xa&&[];var Wa=[];if(0>=U&&0>=X&&this.width<=W&&this.height<=da){if(xa)return!0;for(U=0;U<this.boxKeys.length;U++)Wa.push({key:this.boxKeys[U],
x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(U=0;U<this.circleKeys.length;U++)X=this.circles[3*U],W=this.circles[3*U+1],da=this.circles[3*U+2],Wa.push({key:this.circleKeys[U],x1:X-da,y1:W-da,x2:X+da,y2:W+da});return Ka?Wa.filter(Ka):Wa}return this._forEachCell(U,X,W,da,this._queryCell,Wa,{hitTest:xa,seenUids:{box:{},circle:{}}},Ka),xa?0<Wa.length:Wa};re.prototype._queryCircle=function(U,X,W,da,xa){var Ka=U-W,Wa=U+W,fb=X-W,Fb=X+W;if(0>Wa||Ka>this.width||
0>Fb||fb>this.height)return!da&&[];var Ob=[];return this._forEachCell(Ka,fb,Wa,Fb,this._queryCellCircle,Ob,{hitTest:da,circle:{x:U,y:X,radius:W},seenUids:{box:{},circle:{}}},xa),da?0<Ob.length:Ob};re.prototype.query=function(U,X,W,da,xa){return this._query(U,X,W,da,!1,xa)};re.prototype.hitTest=function(U,X,W,da,xa){return this._query(U,X,W,da,!0,xa)};re.prototype.hitTestCircle=function(U,X,W,da){return this._queryCircle(U,X,W,!0,da)};re.prototype._queryCell=function(U,X,W,da,xa,Ka,Wa,fb){var Fb=Wa.seenUids,
Ob=this.boxCells[xa];if(null!==Ob)for(var Pb=this.bboxes,uc=0;uc<Ob.length;uc+=1){var sc=Ob[uc];if(!Fb.box[sc]){Fb.box[sc]=!0;var hc=4*sc;if(U<=Pb[hc+2]&&X<=Pb[hc+3]&&W>=Pb[hc+0]&&da>=Pb[hc+1]&&(!fb||fb(this.boxKeys[sc]))){if(Wa.hitTest)return Ka.push(!0),!0;Ka.push({key:this.boxKeys[sc],x1:Pb[hc],y1:Pb[hc+1],x2:Pb[hc+2],y2:Pb[hc+3]})}}}xa=this.circleCells[xa];if(null!==xa)for(Ob=this.circles,Pb=0;Pb<xa.length;Pb+=1)if(uc=xa[Pb],!Fb.circle[uc]){Fb.circle[uc]=!0;var rc=3*uc;if(this._circleAndRectCollide(Ob[rc],
Ob[rc+1],Ob[rc+2],U,X,W,da)&&(!fb||fb(this.circleKeys[uc]))){if(Wa.hitTest)return Ka.push(!0),!0;sc=Ob[rc];hc=Ob[rc+1];rc=Ob[rc+2];Ka.push({key:this.circleKeys[uc],x1:sc-rc,y1:hc-rc,x2:sc+rc,y2:hc+rc})}}};re.prototype._queryCellCircle=function(U,X,W,da,xa,Ka,Wa,fb){U=Wa.circle;Wa=Wa.seenUids;X=this.boxCells[xa];if(null!==X)for(W=this.bboxes,da=0;da<X.length;da+=1){var Fb=X[da];if(!Wa.box[Fb]){Wa.box[Fb]=!0;var Ob=4*Fb;if(this._circleAndRectCollide(U.x,U.y,U.radius,W[Ob+0],W[Ob+1],W[Ob+2],W[Ob+3])&&
(!fb||fb(this.boxKeys[Fb])))return Ka.push(!0),!0}}xa=this.circleCells[xa];if(null!==xa)for(X=this.circles,W=0;W<xa.length;W+=1)if(da=xa[W],!Wa.circle[da]&&(Wa.circle[da]=!0,Fb=3*da,this._circlesCollide(X[Fb],X[Fb+1],X[Fb+2],U.x,U.y,U.radius)&&(!fb||fb(this.circleKeys[da]))))return Ka.push(!0),!0};re.prototype._forEachCell=function(U,X,W,da,xa,Ka,Wa,fb){for(var Fb=this._convertToXCellCoord(U),Ob=this._convertToYCellCoord(X),Pb=this._convertToXCellCoord(W),uc=this._convertToYCellCoord(da);Fb<=Pb;Fb++)for(var sc=
Ob;sc<=uc;sc++)if(xa.call(this,U,X,W,da,this.xCellCount*sc+Fb,Ka,Wa,fb))return};re.prototype._convertToXCellCoord=function(U){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(U*this.xScale)))};re.prototype._convertToYCellCoord=function(U){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(U*this.yScale)))};re.prototype._circlesCollide=function(U,X,W,da,xa,Ka){U=da-U;X=xa-X;W+=Ka;return W*W>U*U+X*X};re.prototype._circleAndRectCollide=function(U,X,W,da,xa,Ka,Wa){Ka=(Ka-da)/2;U=Math.abs(U-
(da+Ka));if(U>Ka+W)return!1;Wa=(Wa-xa)/2;X=Math.abs(X-(xa+Wa));if(X>Wa+W)return!1;if(U<=Ka||X<=Wa)return!0;xa=U-Ka;X-=Wa;return xa*xa+X*X<=W*W};var ve=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),Se=function(U,X,W){void 0===X&&(X=new re(U.width+200,U.height+200,25));void 0===W&&(W=new re(U.width+200,U.height+200,25));this.transform=U;this.grid=X;this.ignoredGrid=W;this.pitchfactor=Math.cos(U._pitch)*U.cameraToCenterDistance;this.screenRightBoundary=U.width+100;this.screenBottomBoundary=
U.height+100;this.gridRightBoundary=U.width+200;this.gridBottomBoundary=U.height+200};Se.prototype.placeCollisionBox=function(U,X,W,da,xa){da=this.projectAndGetPerspectiveRatio(da,U.anchorPointX,U.anchorPointY);var Ka=W*da.perspectiveRatio;W=U.x1*Ka+da.point.x;var Wa=U.y1*Ka+da.point.y,fb=U.x2*Ka+da.point.x;U=U.y2*Ka+da.point.y;return!this.isInsideGrid(W,Wa,fb,U)||!X&&this.grid.hitTest(W,Wa,fb,U,xa)?{box:[],offscreen:!1}:{box:[W,Wa,fb,U],offscreen:this.isOffscreen(W,Wa,fb,U)}};Se.prototype.placeCollisionCircles=
function(U,X,W,da,xa,Ka,Wa,fb,Fb,Ob,Pb,uc,sc){var hc=[],rc=new a.Point(X.anchorX,X.anchorY);Ka=F(rc,Ka);Ka=.5+this.transform.cameraToCenterDistance/Ka.signedDistanceFromCamera*.5;xa=(Ob?xa/Ka:xa*Ka)/a.ONE_EM;Ob=F(rc,Wa).point;xa=J(xa,da,X.lineOffsetX*xa,X.lineOffsetY*xa,!1,Ob,rc,X,W,Wa,{});W=X=!1;da=!0;if(xa){uc=.5*uc*Ka+sc;Wa=new a.Point(-100,-100);rc=new a.Point(this.screenRightBoundary,this.screenBottomBoundary);sc=new qe;Ka=xa.first;Ob=xa.last;xa=[];for(var oc=Ka.path.length-1;1<=oc;oc--)xa.push(Ka.path[oc]);
for(Ka=1;Ka<Ob.path.length;Ka++)xa.push(Ob.path[Ka]);Ka=2.5*uc;fb&&(xa=xa.map(function(Vc){return F(Vc,fb)}),xa=xa.some(function(Vc){return 0>=Vc.signedDistanceFromCamera})?[]:xa.map(function(Vc){return Vc.point}));Ob=[];if(0<xa.length){Ob=xa[0].clone();oc=xa[0].clone();for(var Nb=1;Nb<xa.length;Nb++)Ob.x=Math.min(Ob.x,xa[Nb].x),Ob.y=Math.min(Ob.y,xa[Nb].y),oc.x=Math.max(oc.x,xa[Nb].x),oc.y=Math.max(oc.y,xa[Nb].y);Ob=Ob.x>=Wa.x&&oc.x<=rc.x&&Ob.y>=Wa.y&&oc.y<=rc.y?[xa]:oc.x<Wa.x||Ob.x>rc.x||oc.y<Wa.y||
Ob.y>rc.y?[]:a.clipLine([xa],Wa.x,Wa.y,rc.x,rc.y)}Wa=0;for(rc=Ob;Wa<rc.length;Wa+=1)for(sc.reset(rc[Wa],.25*uc),xa=sc.length<=.5*uc?1:Math.ceil(sc.paddedLength/Ka)+1,Ob=0;Ob<xa;Ob++){Nb=sc.lerp(Ob/Math.max(xa-1,1));oc=Nb.x+100;Nb=Nb.y+100;hc.push(oc,Nb,uc,0);var jc=oc-uc,Uc=Nb-uc,jd=oc+uc,qd=Nb+uc;if(da=da&&this.isOffscreen(jc,Uc,jd,qd),W=W||this.isInsideGrid(jc,Uc,jd,qd),!U&&this.grid.hitTestCircle(oc,Nb,uc,Pb)&&(X=!0,!Fb))return{circles:[],offscreen:!1,collisionDetected:X}}}return{circles:!Fb&&
X||!W?[]:hc,offscreen:da,collisionDetected:X}};Se.prototype.queryRenderedSymbols=function(U){if(0===U.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var X=[],W=1/0,da=1/0,xa=-1/0,Ka=-1/0,Wa=0;Wa<U.length;Wa+=1){var fb=U[Wa];fb=new a.Point(fb.x+100,fb.y+100);W=Math.min(W,fb.x);da=Math.min(da,fb.y);xa=Math.max(xa,fb.x);Ka=Math.max(Ka,fb.y);X.push(fb)}U={};Wa={};fb=0;for(W=this.grid.query(W,da,xa,Ka).concat(this.ignoredGrid.query(W,da,xa,Ka));fb<W.length;fb+=1)xa=
W[fb],da=xa.key,(void 0===U[da.bucketInstanceId]&&(U[da.bucketInstanceId]={}),U[da.bucketInstanceId][da.featureIndex])||(xa=[new a.Point(xa.x1,xa.y1),new a.Point(xa.x2,xa.y1),new a.Point(xa.x2,xa.y2),new a.Point(xa.x1,xa.y2)],a.polygonIntersectsPolygon(X,xa)&&(U[da.bucketInstanceId][da.featureIndex]=!0,void 0===Wa[da.bucketInstanceId]&&(Wa[da.bucketInstanceId]=[]),Wa[da.bucketInstanceId].push(da.featureIndex)));return Wa};Se.prototype.insertCollisionBox=function(U,X,W,da,xa){(X?this.ignoredGrid:this.grid).insert({bucketInstanceId:W,
featureIndex:da,collisionGroupID:xa},U[0],U[1],U[2],U[3])};Se.prototype.insertCollisionCircles=function(U,X,W,da,xa){X=X?this.ignoredGrid:this.grid;W={bucketInstanceId:W,featureIndex:da,collisionGroupID:xa};for(da=0;da<U.length;da+=4)X.insertCircle(W,U[da],U[da+1],U[da+2])};Se.prototype.projectAndGetPerspectiveRatio=function(U,X,W){X=[X,W,0,1];return N(X,X,U),{point:new a.Point((X[0]/X[3]+1)/2*this.transform.width+100,(-X[1]/X[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/
X[3]*.5}};Se.prototype.isOffscreen=function(U,X,W,da){return 100>W||U>=this.screenRightBoundary||100>da||X>this.screenBottomBoundary};Se.prototype.isInsideGrid=function(U,X,W,da){return 0<=W&&U<this.gridRightBoundary&&0<=da&&X<this.gridBottomBoundary};Se.prototype.getViewportMatrix=function(){var U=a.identity([]);return a.translate(U,U,[-100,-100,0]),U};var gf=function(U,X,W,da){this.opacity=U?Math.max(0,Math.min(1,U.opacity+(U.placed?X:-X))):da&&W?1:0;this.placed=W};gf.prototype.isHidden=function(){return 0===
this.opacity&&!this.placed};var $e=function(U,X,W,da,xa){this.text=new gf(U?U.text:null,X,W,xa);this.icon=new gf(U?U.icon:null,X,da,xa)};$e.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var cf=function(U,X,W){this.text=U;this.icon=X;this.skipFade=W},Te=function(){this.invProjMatrix=a.create();this.viewportMatrix=a.create();this.circles=[]},Ma=function(U,X,W,da,xa){this.bucketInstanceId=U;this.featureIndex=X;this.sourceLayerIndex=W;this.bucketIndex=da;this.tileID=
xa},xb=function(U){this.crossSourceCollisions=U;this.maxGroupID=0;this.collisionGroups={}};xb.prototype.get=function(U){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[U]){var X=++this.maxGroupID;this.collisionGroups[U]={ID:X,predicate:function(W){return W.collisionGroupID===X}}}return this.collisionGroups[U]};var rb=function(U,X,W,da){this.transform=U.clone();this.collisionIndex=new Se(this.transform);this.placements={};this.opacities={};this.variableOffsets={};
this.stale=!1;this.commitTime=0;this.fadeDuration=X;this.retainedQueryData={};this.collisionGroups=new xb(W);this.collisionCircleArrays={};(this.prevPlacement=da)&&(da.prevPlacement=void 0);this.placedOrientations={}};rb.prototype.getBucketParts=function(U,X,W,da){var xa=W.getBucket(X),Ka=W.latestFeatureIndex;if(xa&&Ka&&X.id===xa.layerIds[0]){X=W.collisionBoxArray;var Wa=xa.layers[0].layout,fb=Math.pow(2,this.transform.zoom-W.tileID.overscaledZ),Fb=W.tileSize/a.EXTENT,Ob=this.transform.calculatePosMatrix(W.tileID.toUnwrapped()),
Pb="map"===Wa.get("text-pitch-alignment"),uc="map"===Wa.get("text-rotation-alignment"),sc=Q(W,1,this.transform.zoom),hc=C(Ob,Pb,uc,this.transform,sc),rc=null;Pb&&(Pb=u(Ob,Pb,uc,this.transform,sc),rc=a.multiply([],this.transform.labelPlaneMatrix,Pb));this.retainedQueryData[xa.bucketInstanceId]=new Ma(xa.bucketInstanceId,Ka,xa.sourceLayerIndex,xa.index,W.tileID);W={bucket:xa,layout:Wa,posMatrix:Ob,textLabelPlaneMatrix:hc,labelToScreenMatrix:rc,scale:fb,textPixelRatio:Fb,holdingForFade:W.holdingForFade(),
collisionBoxArray:X,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(xa.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(xa.sourceID)};if(da)for(da=0,xa=xa.sortKeyRanges;da<xa.length;da+=1)Ka=xa[da],U.push({sortKey:Ka.sortKey,symbolInstanceStart:Ka.symbolInstanceStart,symbolInstanceEnd:Ka.symbolInstanceEnd,parameters:W});else U.push({symbolInstanceStart:0,symbolInstanceEnd:xa.symbolInstances.length,parameters:W})}};rb.prototype.attemptAnchorPlacement=function(U,X,W,da,xa,
Ka,Wa,fb,Fb,Ob,Pb,uc,sc,hc,rc){var oc,Nb=[uc.textOffset0,uc.textOffset1],jc=O(U,W,da,Nb,xa);X=this.collisionIndex.placeCollisionBox(T(X,jc.x,jc.y,Ka,Wa,this.transform.angle),Pb,fb,Fb,Ob.predicate);if(!rc||0!==this.collisionIndex.placeCollisionBox(T(rc,jc.x,jc.y,Ka,Wa,this.transform.angle),Pb,fb,Fb,Ob.predicate).box.length)return 0<X.box.length?(this.prevPlacement&&this.prevPlacement.variableOffsets[uc.crossTileID]&&this.prevPlacement.placements[uc.crossTileID]&&this.prevPlacement.placements[uc.crossTileID].text&&
(oc=this.prevPlacement.variableOffsets[uc.crossTileID].anchor),this.variableOffsets[uc.crossTileID]={textOffset:Nb,width:W,height:da,anchor:U,textBoxScale:xa,prevAnchor:oc},this.markUsedJustification(sc,U,uc,hc),sc.allowVerticalPlacement&&(this.markUsedOrientation(sc,hc,uc),this.placedOrientations[uc.crossTileID]=hc),{shift:jc,placedGlyphBoxes:X}):void 0};rb.prototype.placeLayerBucketPart=function(U,X,W){var da=this,xa=U.parameters,Ka=xa.bucket,Wa=xa.layout,fb=xa.posMatrix,Fb=xa.textLabelPlaneMatrix,
Ob=xa.labelToScreenMatrix,Pb=xa.textPixelRatio,uc=xa.holdingForFade,sc=xa.collisionBoxArray,hc=xa.partiallyEvaluatedTextSize,rc=xa.collisionGroup,oc=Wa.get("text-optional"),Nb=Wa.get("icon-optional"),jc=Wa.get("text-allow-overlap"),Uc=Wa.get("icon-allow-overlap"),jd="map"===Wa.get("text-rotation-alignment"),qd="map"===Wa.get("text-pitch-alignment"),Vc="none"!==Wa.get("icon-text-fit");xa="viewport-y"===Wa.get("symbol-z-order");var td=jc&&(Uc||!Ka.hasIconData()||Nb),nd=Uc&&(jc||!Ka.hasTextData()||oc);
!Ka.collisionArrays&&sc&&Ka.deserializeCollisionBoxes(sc);sc=function(Hd,zd){if(!X[Hd.crossTileID])if(uc)da.placements[Hd.crossTileID]=new cf(!1,!1,!1);else{var he,ee=!1,Ce=!1,De=!0,ze=null,Wd={box:null,offscreen:null},oe={box:null,offscreen:null},Pe=null,ye=null,Re=0,wf=0,hf=0;zd.textFeatureIndex?Re=zd.textFeatureIndex:Hd.useRuntimeCollisionCircles&&(Re=Hd.featureIndex);zd.verticalTextFeatureIndex&&(wf=zd.verticalTextFeatureIndex);var uh=zd.textBox;if(uh){var af=function(Ae){var Ne=a.WritingMode.horizontal;
Ka.allowVerticalPlacement&&!Ae&&da.prevPlacement&&(Ae=da.prevPlacement.placedOrientations[Hd.crossTileID])&&(da.placedOrientations[Hd.crossTileID]=Ae,da.markUsedOrientation(Ka,Ne=Ae,Hd));return Ne};De=function(Ae,Ne){if(Ka.allowVerticalPlacement&&0<Hd.numVerticalGlyphVertices&&zd.verticalTextBox)for(var ig=0,Rf=Ka.writingModes;ig<Rf.length&&(Rf[ig]===a.WritingMode.vertical?(Wd=Ne(),oe=Wd):Wd=Ae(),!(Wd&&Wd.box&&Wd.box.length));ig+=1);else Wd=Ae()};if(Wa.get("text-variable-anchor")){var zf=Wa.get("text-variable-anchor");
if(da.prevPlacement&&da.prevPlacement.variableOffsets[Hd.crossTileID]){var sg=da.prevPlacement.variableOffsets[Hd.crossTileID];0<zf.indexOf(sg.anchor)&&(zf=zf.filter(function(Ae){return Ae!==sg.anchor})).unshift(sg.anchor)}var Vh=function(Ae,Ne,ig){var Rf=Ae.x2-Ae.x1,Dg=Ae.y2-Ae.y1,Eg=Hd.textBoxScale;Ne=Vc&&!Uc?Ne:null;for(var Af={box:[],offscreen:!1},Zi=jc?2*zf.length:zf.length,ti=0;ti<Zi;++ti){var Kb=da.attemptAnchorPlacement(zf[ti%zf.length],Ae,Rf,Dg,Eg,jd,qd,Pb,fb,rc,ti>=zf.length,Hd,Ka,ig,Ne);
if(Kb&&(Af=Kb.placedGlyphBoxes)&&Af.box&&Af.box.length){ee=!0;ze=Kb.shift;break}}return Af};De(function(){return Vh(uh,zd.iconBox,a.WritingMode.horizontal)},function(){var Ae=zd.verticalTextBox;return Ka.allowVerticalPlacement&&!(Wd&&Wd.box&&Wd.box.length)&&0<Hd.numVerticalGlyphVertices&&Ae?Vh(Ae,zd.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}});Wd&&(ee=Wd.box,De=Wd.offscreen);De=af(Wd&&Wd.box);!ee&&da.prevPlacement&&(af=da.prevPlacement.variableOffsets[Hd.crossTileID])&&(da.variableOffsets[Hd.crossTileID]=
af,da.markUsedJustification(Ka,af.anchor,Hd,De))}else{var Kf=function(Ae,Ne){Ae=da.collisionIndex.placeCollisionBox(Ae,jc,Pb,fb,rc.predicate);return Ae&&Ae.box&&Ae.box.length&&(da.markUsedOrientation(Ka,Ne,Hd),da.placedOrientations[Hd.crossTileID]=Ne),Ae};De(function(){return Kf(uh,a.WritingMode.horizontal)},function(){var Ae=zd.verticalTextBox;return Ka.allowVerticalPlacement&&0<Hd.numVerticalGlyphVertices&&Ae?Kf(Ae,a.WritingMode.vertical):{box:null,offscreen:null}});af(Wd&&Wd.box&&Wd.box.length)}}if(ee=
(he=Wd)&&he.box&&0<he.box.length,De=he&&he.offscreen,Hd.useRuntimeCollisionCircles){Pe=Ka.text.placedSymbolArray.get(Hd.centerJustifiedTextSymbolIndex);af=a.evaluateSizeForFeature(Ka.textSizeData,hc,Pe);var Yi=Wa.get("text-padding");Pe=da.collisionIndex.placeCollisionCircles(jc,Pe,Ka.lineVertexArray,Ka.glyphOffsetArray,af,fb,Fb,Ob,W,qd,rc.predicate,Hd.collisionCircleDiameter,Yi);ee=jc||0<Pe.circles.length&&!Pe.collisionDetected;De=De&&Pe.offscreen}if(zd.iconFeatureIndex&&(hf=zd.iconFeatureIndex),
zd.iconBox)Ce=function(Ae){Ae=Vc&&ze?T(Ae,ze.x,ze.y,jd,qd,da.transform.angle):Ae;return da.collisionIndex.placeCollisionBox(Ae,Uc,Pb,fb,rc.predicate)},Ce=oe&&oe.box&&oe.box.length&&zd.verticalIconBox?0<(ye=Ce(zd.verticalIconBox)).box.length:0<(ye=Ce(zd.iconBox)).box.length,De=De&&ye.offscreen;af=oc||0===Hd.numHorizontalGlyphVertices&&0===Hd.numVerticalGlyphVertices;Yi=Nb||0===Hd.numIconVertices;if(af||Yi?Yi?af||(Ce=Ce&&ee):ee=Ce&&ee:Ce=ee=Ce&&ee,ee&&he&&he.box&&da.collisionIndex.insertCollisionBox(he.box,
Wa.get("text-ignore-placement"),Ka.bucketInstanceId,oe&&oe.box&&wf?wf:Re,rc.ID),Ce&&ye&&da.collisionIndex.insertCollisionBox(ye.box,Wa.get("icon-ignore-placement"),Ka.bucketInstanceId,hf,rc.ID),Pe&&(ee&&da.collisionIndex.insertCollisionCircles(Pe.circles,Wa.get("text-ignore-placement"),Ka.bucketInstanceId,Re,rc.ID),W))for(ye=Ka.bucketInstanceId,he=da.collisionCircleArrays[ye],void 0===he&&(he=da.collisionCircleArrays[ye]=new Te),ye=0;ye<Pe.circles.length;ye+=4)he.circles.push(Pe.circles[ye+0]),he.circles.push(Pe.circles[ye+
1]),he.circles.push(Pe.circles[ye+2]),he.circles.push(Pe.collisionDetected?1:0);da.placements[Hd.crossTileID]=new cf(ee||td,Ce||nd,De||Ka.justReloaded);X[Hd.crossTileID]=!0}};if(xa)for(U=Ka.getSortedSymbolIndexes(this.transform.angle),xa=U.length-1;0<=xa;--xa){var Gd=U[xa];sc(Ka.symbolInstances.get(Gd),Ka.collisionArrays[Gd])}else for(xa=U.symbolInstanceStart;xa<U.symbolInstanceEnd;xa++)sc(Ka.symbolInstances.get(xa),Ka.collisionArrays[xa]);W&&Ka.bucketInstanceId in this.collisionCircleArrays&&(sc=
this.collisionCircleArrays[Ka.bucketInstanceId],a.invert(sc.invProjMatrix,fb),sc.viewportMatrix=this.collisionIndex.getViewportMatrix());Ka.justReloaded=!1};rb.prototype.markUsedJustification=function(U,X,W,da){X=da===a.WritingMode.vertical?W.verticalPlacedTextSymbolIndex:{left:W.leftJustifiedTextSymbolIndex,center:W.centerJustifiedTextSymbolIndex,right:W.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(X)];da=0;for(var xa=[W.leftJustifiedTextSymbolIndex,W.centerJustifiedTextSymbolIndex,W.rightJustifiedTextSymbolIndex,
W.verticalPlacedTextSymbolIndex];da<xa.length;da+=1){var Ka=xa[da];0<=Ka&&(U.text.placedSymbolArray.get(Ka).crossTileID=0<=X&&Ka!==X?0:W.crossTileID)}};rb.prototype.markUsedOrientation=function(U,X,W){var da=X===a.WritingMode.horizontal||X===a.WritingMode.horizontalOnly?X:0;X=X===a.WritingMode.vertical?X:0;for(var xa=0,Ka=[W.leftJustifiedTextSymbolIndex,W.centerJustifiedTextSymbolIndex,W.rightJustifiedTextSymbolIndex];xa<Ka.length;xa+=1)U.text.placedSymbolArray.get(Ka[xa]).placedOrientation=da;W.verticalPlacedTextSymbolIndex&&
(U.text.placedSymbolArray.get(W.verticalPlacedTextSymbolIndex).placedOrientation=X)};rb.prototype.commit=function(U){this.commitTime=U;this.zoomAtLastRecencyCheck=this.transform.zoom;var X=this.prevPlacement,W=!1;this.prevZoomAdjustment=X?X.zoomAdjustment(this.transform.zoom):0;var da=X?X.symbolFadeChange(U):1,xa=X?X.opacities:{},Ka=X?X.variableOffsets:{},Wa=X?X.placedOrientations:{};for(Pb in this.placements){var fb=this.placements[Pb],Fb=xa[Pb];Fb?(this.opacities[Pb]=new $e(Fb,da,fb.text,fb.icon),
W=W||fb.text!==Fb.text.placed||fb.icon!==Fb.icon.placed):(this.opacities[Pb]=new $e(null,da,fb.text,fb.icon,fb.skipFade),W=W||fb.text||fb.icon)}for(var Ob in xa){var Pb=xa[Ob];this.opacities[Ob]||(fb=new $e(Pb,da,!1,!1),fb.isHidden()||(this.opacities[Ob]=fb,W=W||Pb.text.placed||Pb.icon.placed))}for(var uc in Ka)this.variableOffsets[uc]||!this.opacities[uc]||this.opacities[uc].isHidden()||(this.variableOffsets[uc]=Ka[uc]);for(var sc in Wa)this.placedOrientations[sc]||!this.opacities[sc]||this.opacities[sc].isHidden()||
(this.placedOrientations[sc]=Wa[sc]);W?this.lastPlacementChangeTime=U:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=X?X.lastPlacementChangeTime:U)};rb.prototype.updateLayerOpacities=function(U,X){for(var W={},da=0;da<X.length;da+=1){var xa=X[da],Ka=xa.getBucket(U);Ka&&xa.latestFeatureIndex&&U.id===Ka.layerIds[0]&&this.updateBucketOpacities(Ka,W,xa.collisionBoxArray)}};rb.prototype.updateBucketOpacities=function(U,X,W){var da=this;U.hasTextData()&&U.text.opacityVertexArray.clear();
U.hasIconData()&&U.icon.opacityVertexArray.clear();U.hasIconCollisionBoxData()&&U.iconCollisionBox.collisionVertexArray.clear();U.hasTextCollisionBoxData()&&U.textCollisionBox.collisionVertexArray.clear();var xa=U.layers[0].layout,Ka=new $e(null,0,!1,!1,!0),Wa=xa.get("text-allow-overlap"),fb=xa.get("icon-allow-overlap"),Fb=xa.get("text-variable-anchor"),Ob="map"===xa.get("text-rotation-alignment"),Pb="map"===xa.get("text-pitch-alignment"),uc="none"!==xa.get("icon-text-fit"),sc=new $e(null,0,Wa&&(fb||
!U.hasIconData()||xa.get("icon-optional")),fb&&(Wa||!U.hasTextData()||xa.get("text-optional")),!0);!U.collisionArrays&&W&&(U.hasIconCollisionBoxData()||U.hasTextCollisionBoxData())&&U.deserializeCollisionBoxes(W);var hc=function(rc,oc,Nb){for(var jc=0;jc<oc/4;jc++)rc.opacityVertexArray.emplaceBack(Nb)};W=function(rc){var oc=U.symbolInstances.get(rc),Nb=oc.numHorizontalGlyphVertices,jc=oc.numVerticalGlyphVertices,Uc=oc.crossTileID,jd=da.opacities[Uc];X[Uc]?jd=Ka:jd||(da.opacities[Uc]=jd=sc);X[Uc]=
!0;var qd=0<oc.numIconVertices,Vc=da.placedOrientations[oc.crossTileID],td=Vc===a.WritingMode.vertical,nd=Vc===a.WritingMode.horizontal||Vc===a.WritingMode.horizontalOnly;if(0<Nb||0<jc){var Gd=Z(jd.text);hc(U.text,Nb,td?Gb:Gd);hc(U.text,jc,nd?Gb:Gd);var Hd=jd.text.isHidden();[oc.rightJustifiedTextSymbolIndex,oc.centerJustifiedTextSymbolIndex,oc.leftJustifiedTextSymbolIndex].forEach(function(zd){0<=zd&&(U.text.placedSymbolArray.get(zd).hidden=Hd||td?1:0)});0<=oc.verticalPlacedTextSymbolIndex&&(U.text.placedSymbolArray.get(oc.verticalPlacedTextSymbolIndex).hidden=
Hd||nd?1:0);(Nb=da.variableOffsets[oc.crossTileID])&&da.markUsedJustification(U,Nb.anchor,oc,Vc);(Vc=da.placedOrientations[oc.crossTileID])&&(da.markUsedJustification(U,"left",oc,Vc),da.markUsedOrientation(U,Vc,oc))}qd&&(qd=Z(jd.icon),Vc=!(uc&&oc.verticalPlacedIconSymbolIndex&&td),0<=oc.placedIconSymbolIndex&&(hc(U.icon,oc.numIconVertices,Vc?qd:Gb),U.icon.placedSymbolArray.get(oc.placedIconSymbolIndex).hidden=jd.icon.isHidden()),0<=oc.verticalPlacedIconSymbolIndex&&(hc(U.icon,oc.numVerticalIconVertices,
Vc?Gb:qd),U.icon.placedSymbolArray.get(oc.verticalPlacedIconSymbolIndex).hidden=jd.icon.isHidden()));if(U.hasIconCollisionBoxData()||U.hasTextCollisionBoxData())if(rc=U.collisionArrays[rc]){oc=new a.Point(0,0);if(rc.textBox||rc.verticalTextBox)qd=!0,Fb&&((Uc=da.variableOffsets[Uc])?(oc=O(Uc.anchor,Uc.width,Uc.height,Uc.textOffset,Uc.textBoxScale),Ob&&oc._rotate(Pb?da.transform.angle:-da.transform.angle)):qd=!1),rc.textBox&&V(U.textCollisionBox.collisionVertexArray,jd.text.placed,!qd||td,oc.x,oc.y),
rc.verticalTextBox&&V(U.textCollisionBox.collisionVertexArray,jd.text.placed,!qd||nd,oc.x,oc.y);nd=!(nd||!rc.verticalIconBox);rc.iconBox&&V(U.iconCollisionBox.collisionVertexArray,jd.icon.placed,nd,uc?oc.x:0,uc?oc.y:0);rc.verticalIconBox&&V(U.iconCollisionBox.collisionVertexArray,jd.icon.placed,!nd,uc?oc.x:0,uc?oc.y:0)}};for(xa=0;xa<U.symbolInstances.length;xa++)W(xa);if(U.sortFeatures(this.transform.angle),this.retainedQueryData[U.bucketInstanceId]&&(this.retainedQueryData[U.bucketInstanceId].featureSortOrder=
U.featureSortOrder),U.hasTextData()&&U.text.opacityVertexBuffer&&U.text.opacityVertexBuffer.updateData(U.text.opacityVertexArray),U.hasIconData()&&U.icon.opacityVertexBuffer&&U.icon.opacityVertexBuffer.updateData(U.icon.opacityVertexArray),U.hasIconCollisionBoxData()&&U.iconCollisionBox.collisionVertexBuffer&&U.iconCollisionBox.collisionVertexBuffer.updateData(U.iconCollisionBox.collisionVertexArray),U.hasTextCollisionBoxData()&&U.textCollisionBox.collisionVertexBuffer&&U.textCollisionBox.collisionVertexBuffer.updateData(U.textCollisionBox.collisionVertexArray),
U.bucketInstanceId in this.collisionCircleArrays)W=this.collisionCircleArrays[U.bucketInstanceId],U.placementInvProjMatrix=W.invProjMatrix,U.placementViewportMatrix=W.viewportMatrix,U.collisionCircleArray=W.circles,delete this.collisionCircleArrays[U.bucketInstanceId]};rb.prototype.symbolFadeChange=function(U){return 0===this.fadeDuration?1:(U-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment};rb.prototype.zoomAdjustment=function(U){return Math.max(0,(this.transform.zoom-U)/1.5)};rb.prototype.hasTransitions=
function(U){return this.stale||U-this.lastPlacementChangeTime<this.fadeDuration};rb.prototype.stillRecent=function(U,X){var W=this.zoomAtLastRecencyCheck===X?1-this.zoomAdjustment(X):1;return this.zoomAtLastRecencyCheck=X,this.commitTime+this.fadeDuration*W>U};rb.prototype.setStale=function(){this.stale=!0};var Hb=Math.pow(2,25),mc=Math.pow(2,24),Ic=Math.pow(2,17),Yb=Math.pow(2,16),Ac=Math.pow(2,9),Yc=Math.pow(2,8),md=Math.pow(2,1),Gb=0,Sb=function(U){this._sortAcrossTiles="viewport-y"!==U.layout.get("symbol-z-order")&&
void 0!==U.layout.get("symbol-sort-key").constantOr(1);this._currentPartIndex=this._currentTileIndex=0;this._seenCrossTileIDs={};this._bucketParts=[]};Sb.prototype.continuePlacement=function(U,X,W,da,xa){for(var Ka=this._bucketParts;this._currentTileIndex<U.length;)if(X.getBucketParts(Ka,da,U[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,xa())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ka.sort(function(Wa,fb){return Wa.sortKey-fb.sortKey}));this._currentPartIndex<
Ka.length;)if(X.placeLayerBucketPart(Ka[this._currentPartIndex],this._seenCrossTileIDs,W),this._currentPartIndex++,xa())return!0;return!1};var zc=function(U,X,W,da,xa,Ka,Wa){this.placement=new rb(U,xa,Ka,Wa);this._currentPlacementIndex=X.length-1;this._forceFullPlacement=W;this._showCollisionBoxes=da;this._done=!1};zc.prototype.isDone=function(){return this._done};zc.prototype.continuePlacement=function(U,X,W){for(var da=this,xa=a.browser.now(),Ka=function(){var Fb=a.browser.now()-xa;return!da._forceFullPlacement&&
2<Fb};0<=this._currentPlacementIndex;){var Wa=X[U[this._currentPlacementIndex]],fb=this.placement.collisionIndex.transform.zoom;if("symbol"===Wa.type&&(!Wa.minzoom||Wa.minzoom<=fb)&&(!Wa.maxzoom||Wa.maxzoom>fb)){if(this._inProgressLayer||(this._inProgressLayer=new Sb(Wa)),this._inProgressLayer.continuePlacement(W[Wa.source],this.placement,this._showCollisionBoxes,Wa,Ka))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0};zc.prototype.commit=function(U){return this.placement.commit(U),
this.placement};var Sc=512/a.EXTENT/2,Ec=function(U,X,W){this.tileID=U;this.indexedSymbolInstances={};this.bucketInstanceId=W;for(W=0;W<X.length;W++){var da=X.get(W),xa=da.key;this.indexedSymbolInstances[xa]||(this.indexedSymbolInstances[xa]=[]);this.indexedSymbolInstances[xa].push({crossTileID:da.crossTileID,coord:this.getScaledCoordinates(da,U)})}};Ec.prototype.getScaledCoordinates=function(U,X){var W=Sc/Math.pow(2,X.canonical.z-this.tileID.canonical.z);return{x:Math.floor((X.canonical.x*a.EXTENT+
U.anchorX)*W),y:Math.floor((X.canonical.y*a.EXTENT+U.anchorY)*W)}};Ec.prototype.findMatches=function(U,X,W){for(var da=this.tileID.canonical.z<X.canonical.z?1:Math.pow(2,this.tileID.canonical.z-X.canonical.z),xa=0;xa<U.length;xa++){var Ka=U.get(xa);if(!Ka.crossTileID){var Wa=this.indexedSymbolInstances[Ka.key];if(Wa)for(var fb=this.getScaledCoordinates(Ka,X),Fb=0;Fb<Wa.length;Fb+=1){var Ob=Wa[Fb];if(Math.abs(Ob.coord.x-fb.x)<=da&&Math.abs(Ob.coord.y-fb.y)<=da&&!W[Ob.crossTileID]){W[Ob.crossTileID]=
!0;Ka.crossTileID=Ob.crossTileID;break}}}}};var Pc=function(){this.maxCrossTileID=0};Pc.prototype.generate=function(){return++this.maxCrossTileID};var Oc=function(){this.indexes={};this.usedCrossTileIDs={};this.lng=0};Oc.prototype.handleWrapJump=function(U){var X=Math.round((U-this.lng)/360);if(0!==X)for(var W in this.indexes){var da=this.indexes[W],xa={},Ka;for(Ka in da){var Wa=da[Ka];Wa.tileID=Wa.tileID.unwrapTo(Wa.tileID.wrap+X);xa[Wa.tileID.key]=Wa}this.indexes[W]=xa}this.lng=U};Oc.prototype.addBucket=
function(U,X,W){if(this.indexes[U.overscaledZ]&&this.indexes[U.overscaledZ][U.key]){if(this.indexes[U.overscaledZ][U.key].bucketInstanceId===X.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(U.overscaledZ,this.indexes[U.overscaledZ][U.key])}for(var da=0;da<X.symbolInstances.length;da++)X.symbolInstances.get(da).crossTileID=0;this.usedCrossTileIDs[U.overscaledZ]||(this.usedCrossTileIDs[U.overscaledZ]={});da=this.usedCrossTileIDs[U.overscaledZ];for(var xa in this.indexes){var Ka=this.indexes[xa];
if(Number(xa)>U.overscaledZ)for(var Wa in Ka){var fb=Ka[Wa];fb.tileID.isChildOf(U)&&fb.findMatches(X.symbolInstances,U,da)}else(Ka=Ka[U.scaledTo(Number(xa)).key])&&Ka.findMatches(X.symbolInstances,U,da)}for(xa=0;xa<X.symbolInstances.length;xa++)Wa=X.symbolInstances.get(xa),Wa.crossTileID||(Wa.crossTileID=W.generate(),da[Wa.crossTileID]=!0);return void 0===this.indexes[U.overscaledZ]&&(this.indexes[U.overscaledZ]={}),this.indexes[U.overscaledZ][U.key]=new Ec(U,X.symbolInstances,X.bucketInstanceId),
!0};Oc.prototype.removeBucketCrossTileIDs=function(U,X){for(var W in X.indexedSymbolInstances)for(var da=0,xa=X.indexedSymbolInstances[W];da<xa.length;da+=1)delete this.usedCrossTileIDs[U][xa[da].crossTileID]};Oc.prototype.removeStaleBuckets=function(U){var X=!1,W;for(W in this.indexes){var da=this.indexes[W],xa;for(xa in da)U[da[xa].bucketInstanceId]||(this.removeBucketCrossTileIDs(W,da[xa]),delete da[xa],X=!0)}return X};var Kc=function(){this.layerIndexes={};this.crossTileIDs=new Pc;this.maxBucketInstanceId=
0;this.bucketsInCurrentPlacement={}};Kc.prototype.addLayer=function(U,X,W){var da=this.layerIndexes[U.id];void 0===da&&(da=this.layerIndexes[U.id]=new Oc);var xa=!1,Ka={};da.handleWrapJump(W);for(W=0;W<X.length;W+=1){var Wa=X[W],fb=Wa.getBucket(U);fb&&U.id===fb.layerIds[0]&&(fb.bucketInstanceId||(fb.bucketInstanceId=++this.maxBucketInstanceId),da.addBucket(Wa.tileID,fb,this.crossTileIDs)&&(xa=!0),Ka[fb.bucketInstanceId]=!0)}return da.removeStaleBuckets(Ka)&&(xa=!0),xa};Kc.prototype.pruneUnusedLayers=
function(U){var X={},W;for(W in U.forEach(function(da){X[da]=!0}),this.layerIndexes)X[W]||delete this.layerIndexes[W]};var pc=function(U,X){return a.emitValidationErrors(U,X&&X.filter(function(W){return"source.canvas"!==W.identifier}))},vc=a.pick(Id,"addLayer removeLayer setPaintProperty setLayoutProperty setFilter addSource removeSource setLayerZoomRange setLight setTransition setGeoJSONSourceData".split(" ")),tc=a.pick(Id,["setCenter","setZoom","setBearing","setPitch"]),gd=function(){var U={},X=
a.styleSpec.$version,W;for(W in a.styleSpec.$root){var da,xa=a.styleSpec.$root[W];xa.required&&null!=(da="version"===W?X:"array"===xa.type?[]:{})&&(U[W]=da)}return U}(),ud=function(U){function X(W,da){var xa=this;void 0===da&&(da={});U.call(this);this.map=W;this.dispatcher=new Qa((Nd||(Nd=new me),Nd),this);this.imageManager=new Ya;this.imageManager.setEventedParent(this);this.glyphManager=new Ga(W._requestManager,da.localIdeographFontFamily);this.lineAtlas=new Ea(256,512);this.crossTileSymbolIndex=
new Kc;this._layers={};this._serializedLayers={};this._order=[];this.sourceCaches={};this.zoomHistory=new a.ZoomHistory;this._loaded=!1;this._availableImages=[];this._resetUpdates();this.dispatcher.broadcast("setReferrer",a.getReferrer());var Ka=this;this._rtlTextPluginCallback=X.registerForPluginStateChange(function(Wa){Ka.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Wa.pluginStatus,pluginURL:Wa.pluginURL},function(fb,Fb){if(a.triggerPluginCompletionEvent(fb),Fb&&Fb.every(function(Pb){return Pb}))for(var Ob in Ka.sourceCaches)Ka.sourceCaches[Ob].reload()})});
this.on("data",function(Wa){if("source"===Wa.dataType&&"metadata"===Wa.sourceDataType&&(Wa=xa.sourceCaches[Wa.sourceId])&&(Wa=Wa.getSource())&&Wa.vectorLayerIds)for(var fb in xa._layers){var Fb=xa._layers[fb];Fb.source===Wa.id&&xa._validateLayer(Fb)}})}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.loadURL=function(W,da){var xa=this;void 0===da&&(da={});this.fire(new a.Event("dataloading",{dataType:"style"}));var Ka="boolean"==typeof da.validate?da.validate:
!a.isMapboxURL(W);W=this.map._requestManager.normalizeStyleURL(W,da.accessToken);W=this.map._requestManager.transformRequest(W,a.ResourceType.Style);this._request=a.getJSON(W,function(Wa,fb){xa._request=null;Wa?xa.fire(new a.ErrorEvent(Wa)):fb&&xa._load(fb,Ka)})},X.prototype.loadJSON=function(W,da){var xa=this;void 0===da&&(da={});this.fire(new a.Event("dataloading",{dataType:"style"}));this._request=a.browser.frame(function(){xa._request=null;xa._load(W,!1!==da.validate)})},X.prototype.loadEmpty=
function(){this.fire(new a.Event("dataloading",{dataType:"style"}));this._load(gd,!1)},X.prototype._load=function(W,da){if(!da||!pc(this,a.validateStyle(W))){for(var xa in this._loaded=!0,this.stylesheet=W,W.sources)this.addSource(xa,W.sources[xa],{validate:!1});W.sprite?this._loadSprite(W.sprite):this.imageManager.setLoaded(!0);this.glyphManager.setURL(W.glyphs);W=A(this.stylesheet.layers);this._order=W.map(function(Ka){return Ka.id});this._layers={};this._serializedLayers={};for(da=0;da<W.length;da+=
1)xa=W[da],(xa=a.createStyleLayer(xa)).setEventedParent(this,{layer:{id:xa.id}}),this._layers[xa.id]=xa,this._serializedLayers[xa.id]=xa.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order));this.light=new va(this.stylesheet.light);this.fire(new a.Event("data",{dataType:"style"}));this.fire(new a.Event("style.load"))}},X.prototype._loadSprite=function(W){var da=this;this._spriteRequest=function(xa,Ka,Wa){function fb(){if(Pb)Wa(Pb);else if(Fb&&Ob){var rc=a.browser.getImageData(Ob),
oc={},Nb;for(Nb in Fb){var jc=Fb[Nb],Uc=jc.width,jd=jc.height,qd=jc.x,Vc=jc.y,td=jc.sdf,nd=jc.pixelRatio,Gd=jc.stretchX,Hd=jc.stretchY;jc=jc.content;var zd=new a.RGBAImage({width:Uc,height:jd});a.RGBAImage.copy(rc,zd,{x:qd,y:Vc},{x:0,y:0},{width:Uc,height:jd});oc[Nb]={data:zd,pixelRatio:nd,sdf:td,stretchX:Gd,stretchY:Hd,content:jc}}Wa(null,oc)}}var Fb,Ob,Pb,uc=1<a.browser.devicePixelRatio?"@2x":"",sc=a.getJSON(Ka.transformRequest(Ka.normalizeSpriteURL(xa,uc,".json"),a.ResourceType.SpriteJSON),function(rc,
oc){sc=null;Pb||(Pb=rc,Fb=oc,fb())}),hc=a.getImage(Ka.transformRequest(Ka.normalizeSpriteURL(xa,uc,".png"),a.ResourceType.SpriteImage),function(rc,oc){hc=null;Pb||(Pb=rc,Ob=oc,fb())});return{cancel:function(){sc&&(sc.cancel(),sc=null);hc&&(hc.cancel(),hc=null)}}}(W,this.map._requestManager,function(xa,Ka){if(da._spriteRequest=null,xa)da.fire(new a.ErrorEvent(xa));else if(Ka)for(var Wa in Ka)da.imageManager.addImage(Wa,Ka[Wa]);da.imageManager.setLoaded(!0);da._availableImages=da.imageManager.listImages();
da.dispatcher.broadcast("setImages",da._availableImages);da.fire(new a.Event("data",{dataType:"style"}))})},X.prototype._validateLayer=function(W){var da=this.sourceCaches[W.source];if(da){var xa=W.sourceLayer;xa&&(da=da.getSource(),("geojson"===da.type||da.vectorLayerIds&&-1===da.vectorLayerIds.indexOf(xa))&&this.fire(new a.ErrorEvent(Error('Source layer "'+xa+'" does not exist on source "'+da.id+'" as specified by style layer "'+W.id+'"'))))}},X.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;
for(var W in this.sourceCaches)if(!this.sourceCaches[W].loaded())return!1;return!!this.imageManager.isLoaded()},X.prototype._serializeLayers=function(W){for(var da=[],xa=0;xa<W.length;xa+=1){var Ka=this._layers[W[xa]];"custom"!==Ka.type&&da.push(Ka.serialize())}return da},X.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var W in this.sourceCaches)if(this.sourceCaches[W].hasTransition())return!0;for(var da in this._layers)if(this._layers[da].hasTransition())return!0;
return!1},X.prototype._checkLoaded=function(){if(!this._loaded)throw Error("Style is not done loading");},X.prototype.update=function(W){if(this._loaded){var da=this._changed;if(this._changed){var xa=Object.keys(this._updatedLayers),Ka=Object.keys(this._removedLayers);for(Fb in(xa.length||Ka.length)&&this._updateWorkerLayers(xa,Ka),this._updatedSources)xa=this._updatedSources[Fb],"reload"===xa?this._reloadSource(Fb):"clear"===xa&&this._clearSource(Fb);for(var Wa in this._updateTilesForChangedImages(),
this._updatedPaintProps)this._layers[Wa].updateTransitions(W);this.light.updateTransitions(W);this._resetUpdates()}for(var fb in this.sourceCaches)this.sourceCaches[fb].used=!1;var Fb=0;for(Wa=this._order;Fb<Wa.length;Fb+=1)fb=this._layers[Wa[Fb]],fb.recalculate(W,this._availableImages),!fb.isHidden(W.zoom)&&fb.source&&(this.sourceCaches[fb.source].used=!0);this.light.recalculate(W);this.z=W.zoom;da&&this.fire(new a.Event("data",{dataType:"style"}))}},X.prototype._updateTilesForChangedImages=function(){var W=
Object.keys(this._changedImages);if(W.length){for(var da in this.sourceCaches)this.sourceCaches[da].reloadTilesForDependencies(["icons","patterns"],W);this._changedImages={}}},X.prototype._updateWorkerLayers=function(W,da){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(W),removedIds:da})},X.prototype._resetUpdates=function(){this._changed=!1;this._updatedLayers={};this._removedLayers={};this._updatedSources={};this._updatedPaintProps={};this._changedImages={}},X.prototype.setState=
function(W){var da=this;if(this._checkLoaded(),pc(this,a.validateStyle(W)))return!1;(W=a.clone$1(W)).layers=A(W.layers);var xa=function(Wa,fb){if(!Wa)return[{command:Id.setStyle,args:[fb]}];var Fb=[];try{if(!a.deepEqual(Wa.version,fb.version))return[{command:Id.setStyle,args:[fb]}];a.deepEqual(Wa.center,fb.center)||Fb.push({command:Id.setCenter,args:[fb.center]});a.deepEqual(Wa.zoom,fb.zoom)||Fb.push({command:Id.setZoom,args:[fb.zoom]});a.deepEqual(Wa.bearing,fb.bearing)||Fb.push({command:Id.setBearing,
args:[fb.bearing]});a.deepEqual(Wa.pitch,fb.pitch)||Fb.push({command:Id.setPitch,args:[fb.pitch]});a.deepEqual(Wa.sprite,fb.sprite)||Fb.push({command:Id.setSprite,args:[fb.sprite]});a.deepEqual(Wa.glyphs,fb.glyphs)||Fb.push({command:Id.setGlyphs,args:[fb.glyphs]});a.deepEqual(Wa.transition,fb.transition)||Fb.push({command:Id.setTransition,args:[fb.transition]});a.deepEqual(Wa.light,fb.light)||Fb.push({command:Id.setLight,args:[fb.light]});var Ob={},Pb=[];!function(sc,hc,rc,oc){for(var Nb in hc=hc||
{},sc=sc||{})if(sc.hasOwnProperty(Nb)&&!hc.hasOwnProperty(Nb)){var jc=Nb,Uc=oc;rc.push({command:Id.removeSource,args:[jc]});Uc[jc]=!0}for(Nb in hc)if(hc.hasOwnProperty(Nb))if(sc.hasOwnProperty(Nb)){if(!a.deepEqual(sc[Nb],hc[Nb])){if(jc="geojson"===sc[Nb].type&&"geojson"===hc[Nb].type)a:{jc=void 0;Uc=sc;var jd=hc,qd=Nb;for(jc in Uc[qd])if(Uc[qd].hasOwnProperty(jc)&&"data"!==jc&&!a.deepEqual(Uc[qd][jc],jd[qd][jc])){jc=!1;break a}for(jc in jd[qd])if(jd[qd].hasOwnProperty(jc)&&"data"!==jc&&!a.deepEqual(Uc[qd][jc],
jd[qd][jc])){jc=!1;break a}jc=!0}if(jc)rc.push({command:Id.setGeoJSONSourceData,args:[Nb,hc[Nb].data]});else{jc=Nb;Uc=hc;jd=rc;qd=jc;var Vc=oc;jd.push({command:Id.removeSource,args:[qd]});Vc[qd]=!0;jd.push({command:Id.addSource,args:[jc,Uc[jc]]})}}}else rc.push({command:Id.addSource,args:[Nb,hc[Nb]]})}(Wa.sources,fb.sources,Pb,Ob);var uc=[];Wa.layers&&Wa.layers.forEach(function(sc){Ob[sc.source]?Fb.push({command:Id.removeLayer,args:[sc.id]}):uc.push(sc)});Fb=Fb.concat(Pb);(function(sc,hc,rc){hc=hc||
[];var oc,Nb,jc,Uc,jd;var qd=(sc=sc||[]).map(y);var Vc=hc.map(y);sc=sc.reduce(B,{});var td=hc.reduce(B,{}),nd=qd.slice(),Gd=Object.create(null);for(oc=hc=0;hc<qd.length;hc++)td.hasOwnProperty(Nb=qd[hc])?oc++:(rc.push({command:Id.removeLayer,args:[Nb]}),nd.splice(nd.indexOf(Nb,oc),1));for(oc=hc=0;hc<Vc.length;hc++)nd[nd.length-1-hc]!==(Nb=Vc[Vc.length-1-hc])&&(sc.hasOwnProperty(Nb)?(rc.push({command:Id.removeLayer,args:[Nb]}),nd.splice(nd.lastIndexOf(Nb,nd.length-oc),1)):oc++,rc.push({command:Id.addLayer,
args:[td[Nb],nd[nd.length-hc]]}),nd.splice(nd.length-hc,0,Nb),Gd[Nb]=!0);for(hc=0;hc<Vc.length;hc++)if(jc=sc[Nb=Vc[hc]],Uc=td[Nb],!Gd[Nb]&&!a.deepEqual(jc,Uc))if(a.deepEqual(jc.source,Uc.source)&&a.deepEqual(jc["source-layer"],Uc["source-layer"])&&a.deepEqual(jc.type,Uc.type)){for(jd in z(jc.layout,Uc.layout,rc,Nb,null,Id.setLayoutProperty),z(jc.paint,Uc.paint,rc,Nb,null,Id.setPaintProperty),a.deepEqual(jc.filter,Uc.filter)||rc.push({command:Id.setFilter,args:[Nb,Uc.filter]}),a.deepEqual(jc.minzoom,
Uc.minzoom)&&a.deepEqual(jc.maxzoom,Uc.maxzoom)||rc.push({command:Id.setLayerZoomRange,args:[Nb,Uc.minzoom,Uc.maxzoom]}),jc)jc.hasOwnProperty(jd)&&"layout"!==jd&&"paint"!==jd&&"filter"!==jd&&"metadata"!==jd&&"minzoom"!==jd&&"maxzoom"!==jd&&(0===jd.indexOf("paint.")?z(jc[jd],Uc[jd],rc,Nb,jd.slice(6),Id.setPaintProperty):a.deepEqual(jc[jd],Uc[jd])||rc.push({command:Id.setLayerProperty,args:[Nb,jd,Uc[jd]]}));for(jd in Uc)Uc.hasOwnProperty(jd)&&!jc.hasOwnProperty(jd)&&"layout"!==jd&&"paint"!==jd&&"filter"!==
jd&&"metadata"!==jd&&"minzoom"!==jd&&"maxzoom"!==jd&&(0===jd.indexOf("paint.")?z(jc[jd],Uc[jd],rc,Nb,jd.slice(6),Id.setPaintProperty):a.deepEqual(jc[jd],Uc[jd])||rc.push({command:Id.setLayerProperty,args:[Nb,jd,Uc[jd]]}))}else rc.push({command:Id.removeLayer,args:[Nb]}),qd=nd[nd.lastIndexOf(Nb)+1],rc.push({command:Id.addLayer,args:[Uc,qd]})})(uc,fb.layers,Fb)}catch(sc){console.warn("Unable to compute style diff:",sc),Fb=[{command:Id.setStyle,args:[fb]}]}return Fb}(this.serialize(),W).filter(function(Wa){return!(Wa.command in
tc)});if(0===xa.length)return!1;var Ka=xa.filter(function(Wa){return!(Wa.command in vc)});if(0<Ka.length)throw Error("Unimplemented: "+Ka.map(function(Wa){return Wa.command}).join(", ")+".");return xa.forEach(function(Wa){"setTransition"!==Wa.command&&da[Wa.command].apply(da,Wa.args)}),this.stylesheet=W,!0},X.prototype.addImage=function(W,da){if(this.getImage(W))return this.fire(new a.ErrorEvent(Error("An image with this name already exists.")));this.imageManager.addImage(W,da);this._availableImages=
this.imageManager.listImages();this._changed=this._changedImages[W]=!0;this.fire(new a.Event("data",{dataType:"style"}))},X.prototype.updateImage=function(W,da){this.imageManager.updateImage(W,da)},X.prototype.getImage=function(W){return this.imageManager.getImage(W)},X.prototype.removeImage=function(W){if(!this.getImage(W))return this.fire(new a.ErrorEvent(Error("No image with this name exists.")));this.imageManager.removeImage(W);this._availableImages=this.imageManager.listImages();this._changed=
this._changedImages[W]=!0;this.fire(new a.Event("data",{dataType:"style"}))},X.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},X.prototype.addSource=function(W,da,xa){var Ka=this;if(void 0===xa&&(xa={}),this._checkLoaded(),void 0!==this.sourceCaches[W])throw Error("There is already a source with this ID");if(!da.type)throw Error("The type property must be defined, but the only the following properties were given: "+Object.keys(da).join(", ")+".");if(!(0<=
["vector","raster","geojson","video","image"].indexOf(da.type)&&this._validate(a.validateStyle.source,"sources."+W,da,null,xa))){this.map&&this.map._collectResourceTiming&&(da.collectResourceTiming=!0);var Wa=this.sourceCaches[W]=new ae(W,da,this.dispatcher);Wa.style=this;Wa.setEventedParent(this,function(){return{isSourceLoaded:Ka.loaded(),source:Wa.serialize(),sourceId:W}});Wa.onAdd(this.map);this._changed=!0}},X.prototype.removeSource=function(W){if(this._checkLoaded(),void 0===this.sourceCaches[W])throw Error("There is no source with this ID");
for(var da in this._layers)if(this._layers[da].source===W)return this.fire(new a.ErrorEvent(Error('Source "'+W+'" cannot be removed while layer "'+da+'" is using it.')));da=this.sourceCaches[W];delete this.sourceCaches[W];delete this._updatedSources[W];da.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:W}));da.setEventedParent(null);da.clearTiles();da.onRemove&&da.onRemove(this.map);this._changed=!0},X.prototype.setGeoJSONSourceData=function(W,da){this._checkLoaded();
this.sourceCaches[W].getSource().setData(da);this._changed=!0},X.prototype.getSource=function(W){return this.sourceCaches[W]&&this.sourceCaches[W].getSource()},X.prototype.addLayer=function(W,da,xa){void 0===xa&&(xa={});this._checkLoaded();var Ka=W.id;if(this.getLayer(Ka))this.fire(new a.ErrorEvent(Error('Layer with id "'+Ka+'" already exists on this map')));else{if("custom"===W.type){if(pc(this,a.validateCustomStyleLayer(W)))return;W=a.createStyleLayer(W)}else{if("object"==typeof W.source&&(this.addSource(Ka,
W.source),W=a.clone$1(W),W=a.extend(W,{source:Ka})),this._validate(a.validateStyle.layer,"layers."+Ka,W,{arrayIndex:-1},xa))return;W=a.createStyleLayer(W);this._validateLayer(W);W.setEventedParent(this,{layer:{id:Ka}});this._serializedLayers[W.id]=W.serialize()}xa=da?this._order.indexOf(da):this._order.length;if(da&&-1===xa)this.fire(new a.ErrorEvent(Error('Layer with id "'+da+'" does not exist on this map.')));else{if(this._order.splice(xa,0,Ka),this._layerOrderChanged=!0,this._layers[Ka]=W,this._removedLayers[Ka]&&
W.source&&"custom"!==W.type)da=this._removedLayers[Ka],delete this._removedLayers[Ka],da.type!==W.type?this._updatedSources[W.source]="clear":(this._updatedSources[W.source]="reload",this.sourceCaches[W.source].pause());this._updateLayer(W);W.onAdd&&W.onAdd(this.map)}}},X.prototype.moveLayer=function(W,da){if(this._checkLoaded(),this._changed=!0,this._layers[W]){if(W!==da){var xa=this._order.indexOf(W);this._order.splice(xa,1);xa=da?this._order.indexOf(da):this._order.length;da&&-1===xa?this.fire(new a.ErrorEvent(Error('Layer with id "'+
da+'" does not exist on this map.'))):(this._order.splice(xa,0,W),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot be moved.")))},X.prototype.removeLayer=function(W){this._checkLoaded();var da=this._layers[W];if(da){da.setEventedParent(null);var xa=this._order.indexOf(W);this._order.splice(xa,1);this._changed=this._layerOrderChanged=!0;this._removedLayers[W]=da;delete this._layers[W];delete this._serializedLayers[W];
delete this._updatedLayers[W];delete this._updatedPaintProps[W];da.onRemove&&da.onRemove(this.map)}else this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot be removed.")))},X.prototype.getLayer=function(W){return this._layers[W]},X.prototype.hasLayer=function(W){return W in this._layers},X.prototype.setLayerZoomRange=function(W,da,xa){this._checkLoaded();var Ka=this.getLayer(W);Ka?Ka.minzoom===da&&Ka.maxzoom===xa||(null!=da&&(Ka.minzoom=da),null!=xa&&(Ka.maxzoom=
xa),this._updateLayer(Ka)):this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot have zoom extent.")))},X.prototype.setFilter=function(W,da,xa){void 0===xa&&(xa={});this._checkLoaded();var Ka=this.getLayer(W);if(Ka){if(!a.deepEqual(Ka.filter,da))return null==da?(Ka.filter=void 0,void this._updateLayer(Ka)):void(this._validate(a.validateStyle.filter,"layers."+Ka.id+".filter",da,null,xa)||(Ka.filter=a.clone$1(da),this._updateLayer(Ka)))}else this.fire(new a.ErrorEvent(Error("The layer '"+
W+"' does not exist in the map's style and cannot be filtered.")))},X.prototype.getFilter=function(W){return a.clone$1(this.getLayer(W).filter)},X.prototype.setLayoutProperty=function(W,da,xa,Ka){void 0===Ka&&(Ka={});this._checkLoaded();var Wa=this.getLayer(W);Wa?a.deepEqual(Wa.getLayoutProperty(da),xa)||(Wa.setLayoutProperty(da,xa,Ka),this._updateLayer(Wa)):this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot be styled.")))},X.prototype.getLayoutProperty=
function(W,da){var xa=this.getLayer(W);if(xa)return xa.getLayoutProperty(da);this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style.")))},X.prototype.setPaintProperty=function(W,da,xa,Ka){void 0===Ka&&(Ka={});this._checkLoaded();var Wa=this.getLayer(W);Wa?a.deepEqual(Wa.getPaintProperty(da),xa)||(Wa.setPaintProperty(da,xa,Ka)&&this._updateLayer(Wa),this._changed=!0,this._updatedPaintProps[W]=!0):this.fire(new a.ErrorEvent(Error("The layer '"+W+"' does not exist in the map's style and cannot be styled.")))},
X.prototype.getPaintProperty=function(W,da){return this.getLayer(W).getPaintProperty(da)},X.prototype.setFeatureState=function(W,da){this._checkLoaded();var xa=W.source,Ka=W.sourceLayer,Wa=this.sourceCaches[xa];void 0!==Wa?(xa=Wa.getSource().type,"geojson"===xa&&Ka?this.fire(new a.ErrorEvent(Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==xa||Ka?(void 0===W.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),Wa.setFeatureState(Ka,W.id,da)):
this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))):this.fire(new a.ErrorEvent(Error("The source '"+xa+"' does not exist in the map's style.")))},X.prototype.removeFeatureState=function(W,da){this._checkLoaded();var xa=W.source,Ka=this.sourceCaches[xa];if(void 0!==Ka){xa=Ka.getSource().type;var Wa="vector"===xa?W.sourceLayer:void 0;"vector"!==xa||Wa?da&&"string"!=typeof W.id&&"number"!=typeof W.id?this.fire(new a.ErrorEvent(Error("A feature id is requred to remove its specific state property."))):
Ka.removeFeatureState(Wa,W.id,da):this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(Error("The source '"+xa+"' does not exist in the map's style.")))},X.prototype.getFeatureState=function(W){this._checkLoaded();var da=W.source,xa=W.sourceLayer,Ka=this.sourceCaches[da];if(void 0!==Ka){if("vector"!==Ka.getSource().type||xa)return void 0===W.id&&this.fire(new a.ErrorEvent(Error("The feature id parameter must be provided."))),
Ka.getFeatureState(xa,W.id);this.fire(new a.ErrorEvent(Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(Error("The source '"+da+"' does not exist in the map's style.")))},X.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},X.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,
light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,function(W){return W.serialize()}),layers:this._serializeLayers(this._order)},function(W){return void 0!==W})},X.prototype._updateLayer=function(W){this._updatedLayers[W.id]=!0;W.source&&!this._updatedSources[W.source]&&"raster"!==
this.sourceCaches[W.source].getSource().type&&(this._updatedSources[W.source]="reload",this.sourceCaches[W.source].pause());this._changed=!0},X.prototype._flattenAndSortRenderedFeatures=function(W){for(var da={},xa=[],Ka=this._order.length-1;0<=Ka;Ka--){var Wa=this._order[Ka];if("fill-extrusion"===this._layers[Wa].type){da[Wa]=Ka;for(var fb=0,Fb=W;fb<Fb.length;fb+=1){var Ob=Fb[fb][Wa];if(Ob)for(var Pb=0;Pb<Ob.length;Pb+=1)xa.push(Ob[Pb])}}}xa.sort(function(sc,hc){return hc.intersectionZ-sc.intersectionZ});
Ka=[];for(Wa=this._order.length-1;0<=Wa;Wa--)if(fb=this._order[Wa],"fill-extrusion"===this._layers[fb].type)for(fb=xa.length-1;0<=fb;fb--){Fb=xa[fb].feature;if(da[Fb.layer.id]<Wa)break;Ka.push(Fb);xa.pop()}else for(Fb=0,Pb=W;Fb<Pb.length;Fb+=1){var uc=Pb[Fb][fb];if(uc)for(Ob=0;Ob<uc.length;Ob+=1)Ka.push(uc[Ob].feature)}return Ka},X.prototype.queryRenderedFeatures=function(W,da,xa){da&&da.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",da.filter,null,da);var Ka={};if(da&&
da.layers){if(!Array.isArray(da.layers))return this.fire(new a.ErrorEvent(Error("parameters.layers must be an Array."))),[];for(var Wa=0,fb=da.layers;Wa<fb.length;Wa+=1){var Fb=fb[Wa],Ob=this._layers[Fb];if(!Ob)return this.fire(new a.ErrorEvent(Error("The layer '"+Fb+"' does not exist in the map's style and cannot be queried for features."))),[];Ka[Ob.source]=!0}}Wa=[];for(var Pb in da.availableImages=this._availableImages,this.sourceCaches)da.layers&&!Ka[Pb]||Wa.push(g(this.sourceCaches[Pb],this._layers,
this._serializedLayers,W,da,xa));return this.placement&&Wa.push(function(uc,sc,hc,rc,oc,Nb,jc){var Uc={},jd=Nb.queryRenderedSymbols(rc);rc=[];Nb=0;for(var qd=Object.keys(jd).map(Number);Nb<qd.length;Nb+=1)rc.push(jc[qd[Nb]]);rc.sort(h);jc=function(){var Gd=td[Vc],Hd=Gd.featureIndex.lookupSymbolFeatures(jd[Gd.bucketInstanceId],sc,Gd.bucketIndex,Gd.sourceLayerIndex,oc.filter,oc.layers,oc.availableImages,uc),zd;for(zd in Hd){var he=Uc[zd]=Uc[zd]||[],ee=Hd[zd];ee.sort(function(De,ze){var Wd=Gd.featureSortOrder;
return Wd?(De=Wd.indexOf(De.featureIndex),Wd.indexOf(ze.featureIndex)-De):ze.featureIndex-De.featureIndex});for(var Ce=0;Ce<ee.length;Ce+=1)he.push(ee[Ce])}};for(var Vc=0,td=rc;Vc<td.length;Vc+=1)jc();jc=function(Gd){Uc[Gd].forEach(function(Hd){Hd=Hd.feature;var zd=hc[uc[Gd].source].getFeatureState(Hd.layer["source-layer"],Hd.id);Hd.source=Hd.layer.source;Hd.layer["source-layer"]&&(Hd.sourceLayer=Hd.layer["source-layer"]);Hd.state=zd})};for(var nd in Uc)jc(nd);return Uc}(this._layers,this._serializedLayers,
this.sourceCaches,W,da,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Wa)},X.prototype.querySourceFeatures=function(W,da){da&&da.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",da.filter,null,da);return(W=this.sourceCaches[W])?function(xa,Ka){for(var Wa=xa.getRenderableIds().map(function(sc){return xa.getTileByID(sc)}),fb=[],Fb={},Ob=0;Ob<Wa.length;Ob++){var Pb=Wa[Ob],uc=Pb.tileID.canonical.key;Fb[uc]||(Fb[uc]=!0,Pb.querySourceFeatures(fb,
Ka))}return fb}(W,da):[]},X.prototype.addSourceType=function(W,da,xa){return X.getSourceType(W)?xa(Error('A source type called "'+W+'" already exists.')):(X.setSourceType(W,da),da.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:W,url:da.workerSourceURL},xa):xa(null,null))},X.prototype.getLight=function(){return this.light.getLight()},X.prototype.setLight=function(W,da){void 0===da&&(da={});this._checkLoaded();var xa=this.light.getLight(),Ka=!1,Wa;for(Wa in W)if(!a.deepEqual(W[Wa],
xa[Wa])){Ka=!0;break}Ka&&(xa={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)},this.light.setLight(W,da),this.light.updateTransitions(xa))},X.prototype._validate=function(W,da,xa,Ka,Wa){return void 0===Wa&&(Wa={}),(!Wa||!1!==Wa.validate)&&pc(this,W.call(a.validateStyle,a.extend({key:da,style:this.serialize(),value:xa,styleSpec:a.styleSpec},Ka)))},X.prototype._remove=function(){for(var W in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&
(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[W].setEventedParent(null);for(var da in this.sourceCaches)this.sourceCaches[da].clearTiles(),this.sourceCaches[da].setEventedParent(null);this.imageManager.setEventedParent(null);this.setEventedParent(null);this.dispatcher.remove()},X.prototype._clearSource=function(W){this.sourceCaches[W].clearTiles()},X.prototype._reloadSource=function(W){this.sourceCaches[W].resume();
this.sourceCaches[W].reload()},X.prototype._updateSources=function(W){for(var da in this.sourceCaches)this.sourceCaches[da].update(W)},X.prototype._generateCollisionBoxes=function(){for(var W in this.sourceCaches)this._reloadSource(W)},X.prototype._updatePlacement=function(W,da,xa,Ka,Wa){void 0===Wa&&(Wa=!1);for(var fb=!1,Fb=!1,Ob={},Pb=0,uc=this._order;Pb<uc.length;Pb+=1){var sc=this._layers[uc[Pb]];if("symbol"===sc.type){if(!Ob[sc.source]){var hc=this.sourceCaches[sc.source];Ob[sc.source]=hc.getRenderableIds(!0).map(function(rc){return hc.getTileByID(rc)}).sort(function(rc,
oc){return oc.tileID.overscaledZ-rc.tileID.overscaledZ||(rc.tileID.isLessThan(oc.tileID)?-1:1)})}sc=this.crossTileSymbolIndex.addLayer(sc,Ob[sc.source],W.center.lng);fb=fb||sc}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Wa=Wa||this._layerOrderChanged||0===xa)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),W.zoom))&&(this.pauseablePlacement=new zc(W,this._order,Wa,da,xa,Ka,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?
this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ob),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),Fb=!0),fb&&this.pauseablePlacement.placement.setStale()),Fb||fb)for(W=0,da=this._order;W<da.length;W+=1)xa=this._layers[da[W]],"symbol"===xa.type&&this.placement.updateLayerOpacities(xa,Ob[xa.source]);return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},X.prototype._releaseSymbolFadeTiles=
function(){for(var W in this.sourceCaches)this.sourceCaches[W].releaseSymbolFadeTiles()},X.prototype.getImages=function(W,da,xa){this.imageManager.getImages(da.icons,xa);this._updateTilesForChangedImages();(W=this.sourceCaches[da.source])&&W.setDependencies(da.tileID.key,da.type,da.icons)},X.prototype.getGlyphs=function(W,da,xa){this.glyphManager.getGlyphs(da.stacks,xa)},X.prototype.getResource=function(W,da,xa){return a.makeRequest(da,xa)},X}(a.Evented);ud.getSourceType=function(U){return qc[U]};
ud.setSourceType=function(U,X){qc[U]=X};ud.registerForPluginStateChange=a.registerForPluginStateChange;var xd=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ad=aa("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue\x3dint(packedValue);int v0\x3dpackedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity\x3dint(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor\x3ddecode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor\x3ddecode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset\x3dmod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),
wd=aa("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor\x3du_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),se=aa("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),
te=aa("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dv_data.xy;float extrude_length\x3dlength(extrude);lowp float antialiasblur\x3dv_data.z;float antialiased_blur\x3d-max(blur,antialiasblur);float opacity_t\x3dsmoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t\x3dstroke_width \x3c 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor\x3dopacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center\x3dfloor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position\x3dcircle_center;if (u_scale_with_map) {corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center\x3du_matrix*vec4(circle_center,0,1);corner_position+\x3dextrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position\x3du_matrix*vec4(corner_position,0,1);} else {gl_Position\x3du_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+\x3dextrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur\x3d1.0/u_device_pixel_ratio/(radius+stroke_width);v_data\x3dvec3(extrude.x,extrude.y,antialiasblur);}"),
Fe=aa("void main() {gl_FragColor\x3dvec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);}"),je=aa("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d\x3d-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val\x3dweight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor\x3dvec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO\x3d1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude\x3dvec2(mod(a_pos,2.0)*2.0-1.0);float S\x3dsqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude\x3dS*unscaled_extrude;vec2 extrude\x3dv_extrude*radius*u_extrude_scale;vec4 pos\x3dvec4(floor(a_pos*0.5)+extrude,0,1);gl_Position\x3du_matrix*pos;}"),
Ge=aa("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t\x3dtexture2D(u_image,v_pos).r;vec4 color\x3dtexture2D(u_color_ramp,vec2(t,0.5));gl_FragColor\x3dcolor*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos*u_world,0,1);v_pos.x\x3da_pos.x;v_pos.y\x3d1.0-a_pos.y;}"),uf=
aa("varying float v_placed;varying float v_notUsed;void main() {float alpha\x3d0.5;gl_FragColor\x3dvec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed \x3e 0.5) {gl_FragColor\x3dvec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed \x3e 0.5) {gl_FragColor*\x3d.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint\x3du_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position\x3du_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+\x3d(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed\x3da_placed.x;v_notUsed\x3da_placed.y;}"),
jg=aa("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha\x3d0.5*min(v_perspective_ratio,1.0);float stroke_radius\x3d0.9*max(v_perspective_ratio,1.0);float distance_to_center\x3dlength(v_extrude);float distance_to_edge\x3dabs(distance_to_center-v_radius);float opacity_t\x3dsmoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color\x3dmix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor\x3dcolor*alpha*opacity_t;}",
"attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart\x3du_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  \x3du_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/\x3drayStart.w;rayEnd.xyz  /\x3drayEnd.w;highp float t\x3d(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos\x3da_pos;float radius\x3da_radius;float collision\x3da_flags.x;float vertexIdx\x3da_flags.y;vec2 quadVertexOffset\x3dvec2(mix(-1.0,1.0,float(vertexIdx \x3e\x3d2.0)),mix(-1.0,1.0,float(vertexIdx \x3e\x3d1.0 \x26\x26 vertexIdx \x3c\x3d2.0)));vec2 quadVertexExtent\x3dquadVertexOffset*radius;vec3 tilePos\x3dtoTilePosition(quadCenterPos);vec4 clipPos\x3du_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance\x3dclipPos.w;highp float collision_perspective_ratio\x3dclamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor\x3d1.2;v_radius\x3dradius;v_extrude\x3dquadVertexExtent*padding_factor;v_perspective_ratio\x3dcollision_perspective_ratio;v_collision\x3dcollision;gl_Position\x3dvec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),
zh=aa("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color\x3dtexture2D(u_overlay,v_uv);gl_FragColor\x3dmix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv\x3da_pos/8192.0;gl_Position\x3du_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),di=aa("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor\x3dcolor*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);}"),ei=aa("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3doutline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),kg=aa("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);float dist\x3dlength(v_pos-gl_FragCoord.xy);float alpha\x3d1.0-smoothstep(0.0,1.0,dist);gl_FragColor\x3dmix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;gl_Position\x3du_matrix*vec4(a_pos,0,1);vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos\x3d(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),
Pj=aa("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);gl_FragColor\x3dmix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),
nj=aa("varying vec4 v_color;void main() {gl_FragColor\x3dv_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal\x3da_normal_ed.xyz;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);gl_Position\x3du_matrix*vec4(a_pos,t \x3e 0.0 ? height : base,1);float colorvalue\x3dcolor.r*0.2126+color.g*0.7152+color.b*0.0722;v_color\x3dvec4(0.0,0.0,0.0,1.0);vec4 ambientlight\x3dvec4(0.03,0.03,0.03,1.0);color+\x3dambientlight;float directional\x3dclamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+\x3dclamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+\x3dclamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+\x3dclamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*\x3du_opacity;}"),
Qj=aa("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;vec2 imagecoord\x3dmod(v_pos_a,1.0);vec2 pos\x3dmix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1\x3dtexture2D(u_image,pos);vec2 imagecoord_b\x3dmod(v_pos_b,1.0);vec2 pos2\x3dmix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2\x3dtexture2D(u_image,pos2);vec4 mixedColor\x3dmix(color1,color2,u_fade);gl_FragColor\x3dmixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec3 normal\x3da_normal_ed.xyz;float edgedistance\x3da_normal_ed.w;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base\x3dmax(0.0,base);height\x3dmax(0.0,height);float t\x3dmod(normal.x,2.0);float z\x3dt \x3e 0.0 ? height : base;gl_Position\x3du_matrix*vec4(a_pos,z,1);vec2 pos\x3dnormal.x\x3d\x3d1.0 \x26\x26 normal.y\x3d\x3d0.0 \x26\x26 normal.z\x3d\x3d16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b\x3dget_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting\x3dvec4(0.0,0.0,0.0,1.0);float directional\x3dclamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional\x3dmix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !\x3d0.0) {directional*\x3d((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+\x3dclamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*\x3du_opacity;}"),
ji=aa("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data\x3dtexture2D(u_image,coord)*255.0;data.a\x3d-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon\x3d1.0/u_dimension;float a\x3dgetElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b\x3dgetElevation(v_pos+vec2(0,-epsilon.y),0.0);float c\x3dgetElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d\x3dgetElevation(v_pos+vec2(-epsilon.x,0),0.0);float e\x3dgetElevation(v_pos,0.0);float f\x3dgetElevation(v_pos+vec2(epsilon.x,0),0.0);float g\x3dgetElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h\x3dgetElevation(v_pos+vec2(0,epsilon.y),0.0);float i\x3dgetElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration\x3du_zoom \x3c 2.0 ? 0.4 : u_zoom \x3c 4.5 ? 0.35 : 0.3;vec2 deriv\x3dvec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor\x3dclamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);highp vec2 epsilon\x3d1.0/u_dimension;float scale\x3d(u_dimension.x-2.0)/u_dimension.x;v_pos\x3d(a_texture_pos/8192.0)*scale+epsilon;}"),Oi=aa("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel\x3dtexture2D(u_image,v_pos);vec2 deriv\x3d((pixel.rg*2.0)-1.0);float scaleFactor\x3dcos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope\x3datan(1.25*length(deriv)/scaleFactor);float aspect\x3dderiv.x !\x3d0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y \x3e 0.0 ? 1.0 :-1.0);float intensity\x3du_light.x;float azimuth\x3du_light.y+PI;float base\x3d1.875-intensity*1.75;float maxValue\x3d0.5*PI;float scaledSlope\x3dintensity !\x3d0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent\x3dcos(scaledSlope);vec4 accent_color\x3d(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade\x3dabs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color\x3dmix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor\x3daccent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos\x3da_texture_pos/8192.0;}"),Ug=aa("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
Rj=aa("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color\x3dtexture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;v_lineprogress\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_width2\x3dvec2(outset,inset);}"),
Sj=aa("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a\x3dpattern_from.xy;vec2 pattern_br_a\x3dpattern_from.zw;vec2 pattern_tl_b\x3dpattern_to.xy;vec2 pattern_br_b\x3dpattern_to.zw;float tileZoomRatio\x3du_scale.x;float fromScale\x3du_scale.y;float toScale\x3du_scale.z;vec2 display_size_a\x3d(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b\x3d(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a\x3dvec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b\x3dvec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a\x3ddisplay_size_a.y/v_width;float aspect_b\x3ddisplay_size_b.y/v_width;float dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a\x3dmod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b\x3dmod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y\x3d0.5*v_normal.y+0.5;vec2 texel_size\x3d1.0/u_texsize;vec2 pos_a\x3dmix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b\x3dmix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color\x3dmix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor\x3dcolor*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_linesofar\x3da_linesofar;v_width2\x3dvec2(outset,inset);v_width\x3dfloorwidth;}"),
Fh=aa("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist\x3dlength(v_normal)*v_width2.s;float blur2\x3d(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha\x3dclamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a\x3dtexture2D(u_image,v_tex_a).a;float sdfdist_b\x3dtexture2D(u_image,v_tex_b).a;float sdfdist\x3dmix(sdfdist_a,sdfdist_b,u_mix);alpha*\x3dsmoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor\x3dcolor*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING\x3d1.0/u_device_pixel_ratio/2.0;vec2 a_extrude\x3da_data.xy-128.0;float a_direction\x3dmod(a_data.z,4.0)-1.0;float a_linesofar\x3d(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos\x3dfloor(a_pos_normal*0.5);mediump vec2 normal\x3da_pos_normal-2.0*pos;normal.y\x3dnormal.y*2.0-1.0;v_normal\x3dnormal;gapwidth\x3dgapwidth/2.0;float halfwidth\x3dwidth/2.0;offset\x3d-1.0*offset;float inset\x3dgapwidth+(gapwidth \x3e 0.0 ? ANTIALIASING : 0.0);float outset\x3dgapwidth+halfwidth*(gapwidth \x3e 0.0 ? 2.0 : 1.0)+(halfwidth\x3d\x3d0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist\x3doutset*a_extrude*scale;mediump float u\x3d0.5*a_direction;mediump float t\x3d1.0-abs(u);mediump vec2 offset2\x3doffset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude\x3du_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position\x3du_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective\x3dlength(dist);float extrude_length_with_perspective\x3dlength(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale\x3dextrude_length_without_perspective/extrude_length_with_perspective;v_tex_a\x3dvec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b\x3dvec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2\x3dvec2(outset,inset);}"),
Eh=aa("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0\x3dtexture2D(u_image0,v_pos0);vec4 color1\x3dtexture2D(u_image1,v_pos1);if (color0.a \x3e 0.0) {color0.rgb\x3dcolor0.rgb/color0.a;}if (color1.a \x3e 0.0) {color1.rgb\x3dcolor1.rgb/color1.a;}vec4 color\x3dmix(color0,color1,u_fade_t);color.a*\x3du_opacity;vec3 rgb\x3dcolor.rgb;rgb\x3dvec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average\x3d(color.r+color.g+color.b)/3.0;rgb+\x3d(average-rgb)*u_saturation_factor;rgb\x3d(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec\x3dvec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec\x3dvec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor\x3dvec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position\x3du_matrix*vec4(a_pos,0,1);v_pos0\x3d(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1\x3d(v_pos0*u_scale_parent)+u_tl_parent;}"),li=aa("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha\x3dopacity*v_fade_opacity;gl_FragColor\x3dtexture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;vec2 a_minFontScale\x3da_pixeloffset.zw/256.0;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex\x3da_tex/u_texsize;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));}"),
Gh=aa("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;vec2 tex\x3dv_data0.xy;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fade_opacity\x3dv_data1[2];float fontScale\x3du_is_text ? size/24.0 : size;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);vec2 a_pxoffset\x3da_pixeloffset.xy;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3du_is_text ? size/24.0 : size;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0\x3da_tex/u_texsize;v_data1\x3dvec3(gamma_scale,size,interpolated_fade_opacity);}"),
Hh=aa("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity\x3dv_data1[2];if (v_data1.w\x3d\x3dICON) {vec2 tex_icon\x3dv_data0.zw;lowp float alpha\x3dopacity*fade_opacity;gl_FragColor\x3dtexture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\nreturn;}vec2 tex\x3dv_data0.xy;float EDGE_GAMMA\x3d0.105/u_device_pixel_ratio;float gamma_scale\x3dv_data1.x;float size\x3dv_data1.y;float fontScale\x3dsize/24.0;lowp vec4 color\x3dfill_color;highp float gamma\x3dEDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff\x3d(256.0-64.0)/256.0;if (u_is_halo) {color\x3dhalo_color;gamma\x3d(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff\x3d(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist\x3dtexture2D(u_texture,tex).a;highp float gamma_scaled\x3dgamma*gamma_scale;highp float alpha\x3dsmoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor\x3dcolor*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor\x3dvec4(1.0);\n#endif\n}",
"const float PI\x3d3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos\x3da_pos_offset.xy;vec2 a_offset\x3da_pos_offset.zw;vec2 a_tex\x3da_data.xy;vec2 a_size\x3da_data.zw;float a_size_min\x3dfloor(a_size[0]*0.5);float is_sdf\x3da_size[0]-2.0*a_size_min;highp float segment_angle\x3d-a_projected_pos[2];float size;if (!u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3dmix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant \x26\x26 !u_is_size_feature_constant) {size\x3da_size_min/128.0;} else {size\x3du_size;}vec4 projectedPoint\x3du_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance\x3dprojectedPoint.w;highp float distance_ratio\x3du_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio\x3dclamp(0.5+0.5*distance_ratio,0.0,4.0);size*\x3dperspective_ratio;float fontScale\x3dsize/24.0;highp float symbol_rotation\x3d0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint\x3du_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a\x3dprojectedPoint.xy/projectedPoint.w;vec2 b\x3doffsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation\x3datan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin\x3dsin(segment_angle+symbol_rotation);highp float angle_cos\x3dcos(segment_angle+symbol_rotation);mat2 rotation_matrix\x3dmat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos\x3du_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position\x3du_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale\x3dgl_Position.w;vec2 fade_opacity\x3dunpack_opacity(a_fade_opacity);float fade_change\x3dfade_opacity[1] \x3e 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity\x3dmax(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy\x3da_tex/u_texsize;v_data0.zw\x3da_tex/u_texsize_icon;v_data1\x3dvec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),
ni=Object.freeze({__proto__:null,prelude:Ad,background:wd,backgroundPattern:se,circle:te,clippingMask:Fe,heatmap:je,heatmapTexture:Ge,collisionBox:uf,collisionCircle:jg,debug:zh,fill:di,fillOutline:ei,fillOutlinePattern:kg,fillPattern:Pj,fillExtrusion:nj,fillExtrusionPattern:Qj,hillshadePrepare:ji,hillshade:Oi,line:Ug,lineGradient:Rj,linePattern:Sj,lineSDF:Fh,raster:Eh,symbolIcon:li,symbolSDF:Gh,symbolTextAndIcon:Hh}),mh=function(){this.boundLayoutVertexBuffer=this.boundProgram=null;this.boundPaintVertexBuffers=
[];this.vao=this.boundDynamicVertexBuffer=this.boundVertexOffset=this.boundIndexBuffer=null};mh.prototype.bind=function(U,X,W,da,xa,Ka,Wa,fb){this.context=U;for(var Fb=this.boundPaintVertexBuffers.length!==da.length,Ob=0;!Fb&&Ob<da.length;Ob++)this.boundPaintVertexBuffers[Ob]!==da[Ob]&&(Fb=!0);U.extVertexArrayObject&&this.vao&&this.boundProgram===X&&this.boundLayoutVertexBuffer===W&&!Fb&&this.boundIndexBuffer===xa&&this.boundVertexOffset===Ka&&this.boundDynamicVertexBuffer===Wa&&this.boundDynamicVertexBuffer2===
fb?(U.bindVertexArrayOES.set(this.vao),Wa&&Wa.bind(),xa&&xa.dynamicDraw&&xa.bind(),fb&&fb.bind()):this.freshBind(X,W,da,xa,Ka,Wa,fb)};mh.prototype.freshBind=function(U,X,W,da,xa,Ka,Wa){var fb=U.numAttributes,Fb=this.context,Ob=Fb.gl;if(Fb.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Fb.extVertexArrayObject.createVertexArrayOES(),Fb.bindVertexArrayOES.set(this.vao),this.boundProgram=U,this.boundLayoutVertexBuffer=X,this.boundPaintVertexBuffers=W,this.boundIndexBuffer=da,this.boundVertexOffset=
xa,this.boundDynamicVertexBuffer=Ka,this.boundDynamicVertexBuffer2=Wa;else{var Pb=Fb.currentNumAttributes||0;for(var uc=fb;uc<Pb;uc++)Ob.disableVertexAttribArray(uc)}X.enableAttributes(Ob,U);for(Pb=0;Pb<W.length;Pb+=1)W[Pb].enableAttributes(Ob,U);Ka&&Ka.enableAttributes(Ob,U);Wa&&Wa.enableAttributes(Ob,U);X.bind();X.setVertexAttribPointers(Ob,U,xa);for(X=0;X<W.length;X+=1)Pb=W[X],Pb.bind(),Pb.setVertexAttribPointers(Ob,U,xa);Ka&&(Ka.bind(),Ka.setVertexAttribPointers(Ob,U,xa));da&&da.bind();Wa&&(Wa.bind(),
Wa.setVertexAttribPointers(Ob,U,xa));Fb.currentNumAttributes=fb};mh.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Ee=function(U,X,W,da,xa){var Ka=U.gl;this.program=Ka.createProgram();var Wa=W?W.defines():[];xa&&Wa.push("#define OVERDRAW_INSPECTOR;");xa=Wa.concat(Ad.fragmentSource,X.fragmentSource).join("\n");Wa=Wa.concat(Ad.vertexSource,X.vertexSource).join("\n");X=Ka.createShader(Ka.FRAGMENT_SHADER);if(Ka.isContextLost())this.failedToCreate=
!0;else if(Ka.shaderSource(X,xa),Ka.compileShader(X),Ka.attachShader(this.program,X),xa=Ka.createShader(Ka.VERTEX_SHADER),Ka.isContextLost())this.failedToCreate=!0;else{Ka.shaderSource(xa,Wa);Ka.compileShader(xa);Ka.attachShader(this.program,xa);Wa=W?W.layoutAttributes:[];for(var fb=0;fb<Wa.length;fb++)Ka.bindAttribLocation(this.program,fb,Wa[fb].name);Ka.linkProgram(this.program);Ka.deleteShader(xa);Ka.deleteShader(X);this.numAttributes=Ka.getProgramParameter(this.program,Ka.ACTIVE_ATTRIBUTES);this.attributes=
{};X={};for(xa=0;xa<this.numAttributes;xa++)(Wa=Ka.getActiveAttrib(this.program,xa))&&(this.attributes[Wa.name]=Ka.getAttribLocation(this.program,Wa.name));xa=Ka.getProgramParameter(this.program,Ka.ACTIVE_UNIFORMS);for(Wa=0;Wa<xa;Wa++)(fb=Ka.getActiveUniform(this.program,Wa))&&(X[fb.name]=Ka.getUniformLocation(this.program,fb.name));this.fixedUniforms=da(U,X);this.binderUniforms=W?W.getUniforms(U,X):[]}};Ee.prototype.draw=function(U,X,W,da,xa,Ka,Wa,fb,Fb,Ob,Pb,uc,sc,hc,rc,oc){var Nb,jc=U.gl;if(!this.failedToCreate){for(var Uc in U.program.set(this.program),
U.setDepthMode(W),U.setStencilMode(da),U.setColorMode(xa),U.setCullFace(Ka),this.fixedUniforms)this.fixedUniforms[Uc].set(Wa[Uc]);hc&&hc.setUniforms(U,this.binderUniforms,uc,{zoom:sc});W=(Nb={},Nb[jc.LINES]=2,Nb[jc.TRIANGLES]=3,Nb[jc.LINE_STRIP]=1,Nb)[X];Nb=0;for(Pb=Pb.get();Nb<Pb.length;Nb+=1)da=Pb[Nb],xa=da.vaos||(da.vaos={}),(xa[fb]||(xa[fb]=new mh)).bind(U,this,Fb,hc?hc.getPaintVertexBuffers():[],Ob,da.vertexOffset,rc,oc),jc.drawElements(X,da.primitiveLength*W,jc.UNSIGNED_SHORT,da.primitiveOffset*
W*2)}};var Wf=function(U,X,W,da){var xa=X.style.light,Ka=xa.properties.get("position");Ka=[Ka.x,Ka.y,Ka.z];var Wa=a.create$1();"viewport"===xa.properties.get("anchor")&&a.fromRotation(Wa,-X.transform.angle);a.transformMat3(Ka,Ka,Wa);X=xa.properties.get("color");return{u_matrix:U,u_lightpos:Ka,u_lightintensity:xa.properties.get("intensity"),u_lightcolor:[X.r,X.g,X.b],u_vertical_gradient:+W,u_opacity:da}},Jh=function(U,X,W,da){var xa=U.transform;if("map"===da.paint.get("circle-pitch-alignment")){var Ka=
Q(W,1,xa.zoom);var Wa=!0;Ka=[Ka,Ka]}else Wa=!1,Ka=xa.pixelsToGLUnits;return{u_camera_to_center_distance:xa.cameraToCenterDistance,u_scale_with_map:+("map"===da.paint.get("circle-pitch-scale")),u_matrix:U.translatePosMatrix(X.posMatrix,W,da.paint.get("circle-translate"),da.paint.get("circle-translate-anchor")),u_pitch_with_map:+Wa,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:Ka}},Kh=function(U,X,W){return void 0===W&&(W=1),{u_matrix:U,u_color:X,u_overlay:0,u_overlay_scale:W}},Tj=
function(U,X,W,da){return{u_matrix:U,u_extrude_scale:Q(X,1,W),u_intensity:da}},oi=function(U,X,W){var da=U.transform;return{u_matrix:ea(U,X,W),u_ratio:1/Q(X,1,da.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/da.pixelsToGLUnits[0],1/da.pixelsToGLUnits[1]]}},Qi,Uj=function(U,X,W,da,xa,Ka,Wa,fb,Fb,Ob){var Pb=xa.transform;return{u_is_size_zoom_constant:+("constant"===U||"source"===U),u_is_size_feature_constant:+("constant"===U||"camera"===U),u_size_t:X?X.uSizeT:0,u_size:X?
X.uSize:0,u_camera_to_center_distance:Pb.cameraToCenterDistance,u_pitch:Pb.pitch/360*2*Math.PI,u_rotate_symbol:+W,u_aspect_ratio:Pb.width/Pb.height,u_fade_change:xa.options.fadeDuration?xa.symbolFadeChange:1,u_matrix:Ka,u_label_plane_matrix:Wa,u_coord_matrix:fb,u_is_text:+Fb,u_pitch_with_map:+da,u_texsize:Ob,u_texture:0}},Vj=function(U,X,W,da,xa,Ka,Wa,fb,Fb,Ob,Pb){var uc=xa.transform;return a.extend(Uj(U,X,W,da,xa,Ka,Wa,fb,Fb,Ob),{u_gamma_scale:da?Math.cos(uc._pitch)*uc.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,
u_is_halo:+Pb})},Wj=function(U,X,W,da,xa,Ka,Wa,fb,Fb,Ob){return a.extend(Vj(U,X,W,da,xa,Ka,Wa,fb,!0,Fb,!0),{u_texsize_icon:Ob,u_texture_icon:1})},pi={fillExtrusion:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_lightpos:new a.Uniform3f(U,X.u_lightpos),u_lightintensity:new a.Uniform1f(U,X.u_lightintensity),u_lightcolor:new a.Uniform3f(U,X.u_lightcolor),u_vertical_gradient:new a.Uniform1f(U,X.u_vertical_gradient),u_opacity:new a.Uniform1f(U,X.u_opacity)}},fillExtrusionPattern:function(U,
X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_lightpos:new a.Uniform3f(U,X.u_lightpos),u_lightintensity:new a.Uniform1f(U,X.u_lightintensity),u_lightcolor:new a.Uniform3f(U,X.u_lightcolor),u_vertical_gradient:new a.Uniform1f(U,X.u_vertical_gradient),u_height_factor:new a.Uniform1f(U,X.u_height_factor),u_image:new a.Uniform1i(U,X.u_image),u_texsize:new a.Uniform2f(U,X.u_texsize),u_pixel_coord_upper:new a.Uniform2f(U,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(U,X.u_pixel_coord_lower),
u_scale:new a.Uniform3f(U,X.u_scale),u_fade:new a.Uniform1f(U,X.u_fade),u_opacity:new a.Uniform1f(U,X.u_opacity)}},fill:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix)}},fillPattern:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_image:new a.Uniform1i(U,X.u_image),u_texsize:new a.Uniform2f(U,X.u_texsize),u_pixel_coord_upper:new a.Uniform2f(U,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(U,X.u_pixel_coord_lower),u_scale:new a.Uniform3f(U,X.u_scale),
u_fade:new a.Uniform1f(U,X.u_fade)}},fillOutline:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_world:new a.Uniform2f(U,X.u_world)}},fillOutlinePattern:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_world:new a.Uniform2f(U,X.u_world),u_image:new a.Uniform1i(U,X.u_image),u_texsize:new a.Uniform2f(U,X.u_texsize),u_pixel_coord_upper:new a.Uniform2f(U,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(U,X.u_pixel_coord_lower),u_scale:new a.Uniform3f(U,
X.u_scale),u_fade:new a.Uniform1f(U,X.u_fade)}},circle:function(U,X){return{u_camera_to_center_distance:new a.Uniform1f(U,X.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(U,X.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(U,X.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(U,X.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(U,X.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(U,X.u_matrix)}},collisionBox:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),
u_camera_to_center_distance:new a.Uniform1f(U,X.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(U,X.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(U,X.u_extrude_scale),u_overscale_factor:new a.Uniform1f(U,X.u_overscale_factor)}},collisionCircle:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_inv_matrix:new a.UniformMatrix4f(U,X.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(U,X.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(U,
X.u_viewport_size)}},debug:function(U,X){return{u_color:new a.UniformColor(U,X.u_color),u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_overlay:new a.Uniform1i(U,X.u_overlay),u_overlay_scale:new a.Uniform1f(U,X.u_overlay_scale)}},clippingMask:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix)}},heatmap:function(U,X){return{u_extrude_scale:new a.Uniform1f(U,X.u_extrude_scale),u_intensity:new a.Uniform1f(U,X.u_intensity),u_matrix:new a.UniformMatrix4f(U,X.u_matrix)}},heatmapTexture:function(U,
X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_world:new a.Uniform2f(U,X.u_world),u_image:new a.Uniform1i(U,X.u_image),u_color_ramp:new a.Uniform1i(U,X.u_color_ramp),u_opacity:new a.Uniform1f(U,X.u_opacity)}},hillshade:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_image:new a.Uniform1i(U,X.u_image),u_latrange:new a.Uniform2f(U,X.u_latrange),u_light:new a.Uniform2f(U,X.u_light),u_shadow:new a.UniformColor(U,X.u_shadow),u_highlight:new a.UniformColor(U,X.u_highlight),
u_accent:new a.UniformColor(U,X.u_accent)}},hillshadePrepare:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_image:new a.Uniform1i(U,X.u_image),u_dimension:new a.Uniform2f(U,X.u_dimension),u_zoom:new a.Uniform1f(U,X.u_zoom),u_maxzoom:new a.Uniform1f(U,X.u_maxzoom),u_unpack:new a.Uniform4f(U,X.u_unpack)}},line:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_ratio:new a.Uniform1f(U,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(U,X.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(U,
X.u_units_to_pixels)}},lineGradient:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_ratio:new a.Uniform1f(U,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(U,X.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(U,X.u_units_to_pixels),u_image:new a.Uniform1i(U,X.u_image)}},linePattern:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_texsize:new a.Uniform2f(U,X.u_texsize),u_ratio:new a.Uniform1f(U,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(U,X.u_device_pixel_ratio),
u_image:new a.Uniform1i(U,X.u_image),u_units_to_pixels:new a.Uniform2f(U,X.u_units_to_pixels),u_scale:new a.Uniform3f(U,X.u_scale),u_fade:new a.Uniform1f(U,X.u_fade)}},lineSDF:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_ratio:new a.Uniform1f(U,X.u_ratio),u_device_pixel_ratio:new a.Uniform1f(U,X.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(U,X.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(U,X.u_patternscale_a),u_patternscale_b:new a.Uniform2f(U,X.u_patternscale_b),
u_sdfgamma:new a.Uniform1f(U,X.u_sdfgamma),u_image:new a.Uniform1i(U,X.u_image),u_tex_y_a:new a.Uniform1f(U,X.u_tex_y_a),u_tex_y_b:new a.Uniform1f(U,X.u_tex_y_b),u_mix:new a.Uniform1f(U,X.u_mix)}},raster:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_tl_parent:new a.Uniform2f(U,X.u_tl_parent),u_scale_parent:new a.Uniform1f(U,X.u_scale_parent),u_buffer_scale:new a.Uniform1f(U,X.u_buffer_scale),u_fade_t:new a.Uniform1f(U,X.u_fade_t),u_opacity:new a.Uniform1f(U,X.u_opacity),u_image0:new a.Uniform1i(U,
X.u_image0),u_image1:new a.Uniform1i(U,X.u_image1),u_brightness_low:new a.Uniform1f(U,X.u_brightness_low),u_brightness_high:new a.Uniform1f(U,X.u_brightness_high),u_saturation_factor:new a.Uniform1f(U,X.u_saturation_factor),u_contrast_factor:new a.Uniform1f(U,X.u_contrast_factor),u_spin_weights:new a.Uniform3f(U,X.u_spin_weights)}},symbolIcon:function(U,X){return{u_is_size_zoom_constant:new a.Uniform1i(U,X.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(U,X.u_is_size_feature_constant),
u_size_t:new a.Uniform1f(U,X.u_size_t),u_size:new a.Uniform1f(U,X.u_size),u_camera_to_center_distance:new a.Uniform1f(U,X.u_camera_to_center_distance),u_pitch:new a.Uniform1f(U,X.u_pitch),u_rotate_symbol:new a.Uniform1i(U,X.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(U,X.u_aspect_ratio),u_fade_change:new a.Uniform1f(U,X.u_fade_change),u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(U,X.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(U,X.u_coord_matrix),
u_is_text:new a.Uniform1i(U,X.u_is_text),u_pitch_with_map:new a.Uniform1i(U,X.u_pitch_with_map),u_texsize:new a.Uniform2f(U,X.u_texsize),u_texture:new a.Uniform1i(U,X.u_texture)}},symbolSDF:function(U,X){return{u_is_size_zoom_constant:new a.Uniform1i(U,X.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(U,X.u_is_size_feature_constant),u_size_t:new a.Uniform1f(U,X.u_size_t),u_size:new a.Uniform1f(U,X.u_size),u_camera_to_center_distance:new a.Uniform1f(U,X.u_camera_to_center_distance),
u_pitch:new a.Uniform1f(U,X.u_pitch),u_rotate_symbol:new a.Uniform1i(U,X.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(U,X.u_aspect_ratio),u_fade_change:new a.Uniform1f(U,X.u_fade_change),u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(U,X.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(U,X.u_coord_matrix),u_is_text:new a.Uniform1i(U,X.u_is_text),u_pitch_with_map:new a.Uniform1i(U,X.u_pitch_with_map),u_texsize:new a.Uniform2f(U,X.u_texsize),u_texture:new a.Uniform1i(U,
X.u_texture),u_gamma_scale:new a.Uniform1f(U,X.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(U,X.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(U,X.u_is_halo)}},symbolTextAndIcon:function(U,X){return{u_is_size_zoom_constant:new a.Uniform1i(U,X.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(U,X.u_is_size_feature_constant),u_size_t:new a.Uniform1f(U,X.u_size_t),u_size:new a.Uniform1f(U,X.u_size),u_camera_to_center_distance:new a.Uniform1f(U,X.u_camera_to_center_distance),
u_pitch:new a.Uniform1f(U,X.u_pitch),u_rotate_symbol:new a.Uniform1i(U,X.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(U,X.u_aspect_ratio),u_fade_change:new a.Uniform1f(U,X.u_fade_change),u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(U,X.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(U,X.u_coord_matrix),u_is_text:new a.Uniform1i(U,X.u_is_text),u_pitch_with_map:new a.Uniform1i(U,X.u_pitch_with_map),u_texsize:new a.Uniform2f(U,X.u_texsize),u_texsize_icon:new a.Uniform2f(U,
X.u_texsize_icon),u_texture:new a.Uniform1i(U,X.u_texture),u_texture_icon:new a.Uniform1i(U,X.u_texture_icon),u_gamma_scale:new a.Uniform1f(U,X.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(U,X.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(U,X.u_is_halo)}},background:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),u_opacity:new a.Uniform1f(U,X.u_opacity),u_color:new a.UniformColor(U,X.u_color)}},backgroundPattern:function(U,X){return{u_matrix:new a.UniformMatrix4f(U,X.u_matrix),
u_opacity:new a.Uniform1f(U,X.u_opacity),u_image:new a.Uniform1i(U,X.u_image),u_pattern_tl_a:new a.Uniform2f(U,X.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(U,X.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(U,X.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(U,X.u_pattern_br_b),u_texsize:new a.Uniform2f(U,X.u_texsize),u_mix:new a.Uniform1f(U,X.u_mix),u_pattern_size_a:new a.Uniform2f(U,X.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(U,X.u_pattern_size_b),u_scale_a:new a.Uniform1f(U,X.u_scale_a),
u_scale_b:new a.Uniform1f(U,X.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(U,X.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(U,X.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(U,X.u_tile_units_to_pixels)}}},wk=a.identity(new Float32Array(16)),Lh=new a.Color(1,0,0,1),nh=new a.Color(0,1,0,1),zg=new a.Color(0,0,1,1),Xj=new a.Color(1,0,1,1),Vg=new a.Color(0,1,1,1),ri={symbol:function(U,X,W,da,xa){if("translucent"===U.renderPass){var Ka=Gc.disabled,Wa=U.colorModeForRenderPass();
if(W.layout.get("text-variable-anchor")){var fb=W.layout.get("text-rotation-alignment"),Fb=W.layout.get("text-pitch-alignment"),Ob=U.transform;fb="map"===fb;Fb="map"===Fb;for(var Pb=0;Pb<da.length;Pb+=1){var uc=da[Pb],sc=X.getTile(uc),hc=sc.getBucket(W);if(hc&&hc.text&&hc.text.segments.get().length){var rc=a.evaluateSizeForZoom(hc.textSizeData,Ob.zoom),oc=Q(sc,1,U.transform.zoom),Nb=C(uc.posMatrix,Fb,fb,U.transform,oc),jc="none"!==W.layout.get("icon-text-fit")&&hc.hasIconData();if(rc){oc=fb;var Uc=
Fb,jd=xa,qd=a.symbolSize,Vc=Ob;uc=uc.posMatrix;var td=Math.pow(2,Ob.zoom-sc.tileID.overscaledZ),nd=rc,Gd=jc,Hd=hc.text.placedSymbolArray;rc=hc.text.dynamicLayoutVertexArray;jc=hc.icon.dynamicLayoutVertexArray;sc={};rc.clear();for(var zd=0;zd<Hd.length;zd++){var he=Hd.get(zd),ee=he.hidden||!he.crossTileID||hc.allowVerticalPlacement&&!he.placedOrientation?null:jd[he.crossTileID];if(ee){var Ce=new a.Point(he.anchorX,he.anchorY),De=F(Ce,Uc?uc:Nb),ze=.5+Vc.cameraToCenterDistance/De.signedDistanceFromCamera*
.5,Wd=qd.evaluateSizeForFeature(hc.textSizeData,nd,he)*ze/a.ONE_EM;Uc&&(Wd*=hc.tilePixelRatio/td);ze=ee.anchor;var oe=ee.width,Pe=ee.height,ye=ee.textOffset;ee=ee.textBoxScale;var Re=a.getAnchorAlignment(ze);oe*=-(Re.horizontalAlign-.5);Pe*=-(Re.verticalAlign-.5);ze=a.evaluateVariableOffset(ze,ye);ze=new a.Point((oe/ee+ze[0])*Wd,(Pe/ee+ze[1])*Wd);Ce=Uc?F(Ce.add(ze),Nb).point:De.point.add(oc?ze.rotate(-Vc.angle):ze);De=hc.allowVerticalPlacement&&he.placedOrientation===a.WritingMode.vertical?Math.PI/
2:0;for(ze=0;ze<he.numGlyphs;ze++)a.addDynamicAttributes(rc,Ce,De);Gd&&0<=he.associatedIconIndex&&(sc[he.associatedIconIndex]={shiftedAnchor:Ce,angle:De})}else P(he.numGlyphs,rc)}if(Gd){jc.clear();oc=hc.icon.placedSymbolArray;for(Uc=0;Uc<oc.length;Uc++)if(jd=oc.get(Uc),jd.hidden)P(jd.numGlyphs,jc);else if(qd=sc[Uc])for(Vc=0;Vc<jd.numGlyphs;Vc++)a.addDynamicAttributes(jc,qd.shiftedAnchor,qd.angle);else P(jd.numGlyphs,jc);hc.icon.dynamicLayoutVertexBuffer.updateData(jc)}hc.text.dynamicLayoutVertexBuffer.updateData(rc)}}}}0!==
W.paint.get("icon-opacity").constantOr(1)&&ba(U,X,W,da,!1,W.paint.get("icon-translate"),W.paint.get("icon-translate-anchor"),W.layout.get("icon-rotation-alignment"),W.layout.get("icon-pitch-alignment"),W.layout.get("icon-keep-upright"),Ka,Wa);0!==W.paint.get("text-opacity").constantOr(1)&&ba(U,X,W,da,!0,W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),W.layout.get("text-rotation-alignment"),W.layout.get("text-pitch-alignment"),W.layout.get("text-keep-upright"),Ka,Wa);X.map.showCollisionBoxes&&
(ca(U,X,W,da,W.paint.get("text-translate"),W.paint.get("text-translate-anchor"),!0),ca(U,X,W,da,W.paint.get("icon-translate"),W.paint.get("icon-translate-anchor"),!1))}},circle:function(U,X,W,da){if("translucent"===U.renderPass){var xa=W.paint.get("circle-opacity"),Ka=W.paint.get("circle-stroke-width"),Wa=W.paint.get("circle-stroke-opacity"),fb=void 0!==W.layout.get("circle-sort-key").constantOr(1);if(0!==xa.constantOr(1)||0!==Ka.constantOr(1)&&0!==Wa.constantOr(1)){xa=U.context;Ka=xa.gl;Wa=U.depthModeForSublayer(0,
Kd.ReadOnly);for(var Fb=Gc.disabled,Ob=U.colorModeForRenderPass(),Pb=[],uc=0;uc<da.length;uc++){var sc=da[uc],hc=X.getTile(sc),rc=hc.getBucket(W);if(rc){var oc=rc.programConfigurations.get(W.id);sc={programConfiguration:oc,program:U.useProgram("circle",oc),layoutVertexBuffer:rc.layoutVertexBuffer,indexBuffer:rc.indexBuffer,uniformValues:Jh(U,sc,hc,W)};if(fb)for(hc=0,rc=rc.segments.get();hc<rc.length;hc+=1)oc=rc[hc],Pb.push({segments:new a.SegmentVector([oc]),sortKey:oc.sortKey,state:sc});else Pb.push({segments:rc.segments,
sortKey:0,state:sc})}}fb&&Pb.sort(function(Nb,jc){return Nb.sortKey-jc.sortKey});for(X=0;X<Pb.length;X+=1)da=Pb[X],fb=da.state,fb.program.draw(xa,Ka.TRIANGLES,Wa,Fb,Ob,vd.disabled,fb.uniformValues,W.id,fb.layoutVertexBuffer,fb.indexBuffer,da.segments,W.paint,U.transform.zoom,fb.programConfiguration)}}},heatmap:function(U,X,W,da){if(0!==W.paint.get("heatmap-opacity"))if("offscreen"===U.renderPass){var xa=U.context,Ka=xa.gl,Wa=Gc.disabled,fb=new dd([Ka.ONE,Ka.ONE],a.Color.transparent,[!0,!0,!0,!0]);
!function(hc,rc,oc){var Nb=hc.gl;hc.activeTexture.set(Nb.TEXTURE1);hc.viewport.set([0,0,rc.width/4,rc.height/4]);var jc=oc.heatmapFbo;if(jc)Nb.bindTexture(Nb.TEXTURE_2D,jc.colorAttachment.get()),hc.bindFramebuffer.set(jc.framebuffer);else{var Uc=Nb.createTexture();Nb.bindTexture(Nb.TEXTURE_2D,Uc);Nb.texParameteri(Nb.TEXTURE_2D,Nb.TEXTURE_WRAP_S,Nb.CLAMP_TO_EDGE);Nb.texParameteri(Nb.TEXTURE_2D,Nb.TEXTURE_WRAP_T,Nb.CLAMP_TO_EDGE);Nb.texParameteri(Nb.TEXTURE_2D,Nb.TEXTURE_MIN_FILTER,Nb.LINEAR);Nb.texParameteri(Nb.TEXTURE_2D,
Nb.TEXTURE_MAG_FILTER,Nb.LINEAR);oc=jc=oc.heatmapFbo=hc.createFramebuffer(rc.width/4,rc.height/4,!1);Nb=hc.gl;Nb.texImage2D(Nb.TEXTURE_2D,0,Nb.RGBA,rc.width/4,rc.height/4,0,Nb.RGBA,hc.extRenderToTextureHalfFloat?hc.extTextureHalfFloat.HALF_FLOAT_OES:Nb.UNSIGNED_BYTE,null);oc.colorAttachment.set(Uc)}}(xa,U,W);xa.clear({color:a.Color.transparent});for(var Fb=0;Fb<da.length;Fb++){var Ob=da[Fb];if(!X.hasRenderableParent(Ob)){var Pb=X.getTile(Ob),uc=Pb.getBucket(W);if(uc){var sc=uc.programConfigurations.get(W.id);
U.useProgram("heatmap",sc).draw(xa,Ka.TRIANGLES,Kd.disabled,Wa,fb,vd.disabled,Tj(Ob.posMatrix,Pb,U.transform.zoom,W.paint.get("heatmap-intensity")),W.id,uc.layoutVertexBuffer,uc.indexBuffer,uc.segments,W.paint,U.transform.zoom,sc)}}}xa.viewport.set([0,0,U.width,U.height])}else"translucent"===U.renderPass&&(U.context.setColorMode(U.colorModeForRenderPass()),function(hc,rc){var oc=hc.context,Nb=oc.gl,jc=rc.heatmapFbo;if(jc){oc.activeTexture.set(Nb.TEXTURE0);Nb.bindTexture(Nb.TEXTURE_2D,jc.colorAttachment.get());
oc.activeTexture.set(Nb.TEXTURE1);(jc=rc.colorRampTexture)||(jc=rc.colorRampTexture=new a.Texture(oc,rc.colorRamp,Nb.RGBA));jc.bind(Nb.LINEAR,Nb.CLAMP_TO_EDGE);jc=hc.useProgram("heatmapTexture");var Uc=jc.draw;Nb=Nb.TRIANGLES;var jd=Kd.disabled,qd=Gc.disabled,Vc=hc.colorModeForRenderPass(),td=vd.disabled;var nd=a.create();a.ortho(nd,0,hc.width,hc.height,0,0,1);var Gd=hc.context.gl;nd={u_matrix:nd,u_world:[Gd.drawingBufferWidth,Gd.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:rc.paint.get("heatmap-opacity")};
Uc.call(jc,oc,Nb,jd,qd,Vc,td,nd,rc.id,hc.viewportBuffer,hc.quadTriangleIndexBuffer,hc.viewportSegments,rc.paint,hc.transform.zoom)}}(U,W))},line:function(U,X,W,da){if("translucent"===U.renderPass){var xa=W.paint.get("line-opacity"),Ka=W.paint.get("line-width");if(0!==xa.constantOr(1)&&0!==Ka.constantOr(1)){xa=U.depthModeForSublayer(0,Kd.ReadOnly);Ka=U.colorModeForRenderPass();var Wa=W.paint.get("line-dasharray"),fb=W.paint.get("line-pattern"),Fb=fb.constantOr(1),Ob=W.paint.get("line-gradient"),Pb=
W.getCrossfadeParameters(),uc=Fb?"linePattern":Wa?"lineSDF":Ob?"lineGradient":"line",sc=U.context,hc=sc.gl,rc=!0;if(Ob){sc.activeTexture.set(hc.TEXTURE0);var oc=W.gradientTexture;if(!W.gradient)return;oc||(oc=W.gradientTexture=new a.Texture(sc,W.gradient,hc.RGBA));oc.bind(hc.LINEAR,hc.CLAMP_TO_EDGE)}for(oc=0;oc<da.length;oc+=1){var Nb=da[oc],jc=X.getTile(Nb);if(!Fb||jc.patternsLoaded()){var Uc=jc.getBucket(W);if(Uc){var jd=Uc.programConfigurations.get(W.id),qd=U.context.program.get(),Vc=U.useProgram(uc,
jd);rc=rc||Vc.program!==qd;var td=fb.constantOr(null);if(td&&jc.imageAtlas){var nd=jc.imageAtlas;qd=nd.patternPositions[td.to.toString()];td=nd.patternPositions[td.from.toString()];qd&&td&&jd.setConstantPatternPositions(qd,td)}if(Fb){qd=U;td=jc;nd=W;var Gd=Pb,Hd=qd.transform,zd=1/Q(td,1,Hd.tileZoom);qd={u_matrix:ea(qd,td,nd),u_texsize:td.imageAtlasTexture.size,u_ratio:1/Q(td,1,Hd.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[zd,Gd.fromScale,Gd.toScale],u_fade:Gd.t,u_units_to_pixels:[1/
Hd.pixelsToGLUnits[0],1/Hd.pixelsToGLUnits[1]]}}else if(Wa){qd=U;td=jc;nd=W;var he=Wa;Gd=Pb;Hd=qd.lineAtlas;zd=1/Q(td,1,qd.transform.tileZoom);var ee="round"===nd.layout.get("line-cap"),Ce=Hd.getDash(he.from,ee);he=Hd.getDash(he.to,ee);ee=Ce.width*Gd.fromScale;var De=he.width*Gd.toScale;qd=a.extend(oi(qd,td,nd),{u_patternscale_a:[zd/ee,-Ce.height/2],u_patternscale_b:[zd/De,-he.height/2],u_sdfgamma:Hd.width/(256*Math.min(ee,De)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ce.y,u_tex_y_b:he.y,
u_mix:Gd.t})}else qd=Ob?a.extend(oi(U,jc,W),{u_image:0}):oi(U,jc,W);Fb?(sc.activeTexture.set(hc.TEXTURE0),jc.imageAtlasTexture.bind(hc.LINEAR,hc.CLAMP_TO_EDGE),jd.updatePaintBuffers(Pb)):Wa&&(rc||U.lineAtlas.dirty)&&(sc.activeTexture.set(hc.TEXTURE0),U.lineAtlas.bind(sc));Vc.draw(sc,hc.TRIANGLES,xa,U.stencilModeForClipping(Nb),Ka,vd.disabled,qd,W.id,Uc.layoutVertexBuffer,Uc.indexBuffer,Uc.segments,W.paint,U.transform.zoom,jd);rc=!1}}}}}},fill:function(U,X,W,da){var xa=W.paint.get("fill-color"),Ka=
W.paint.get("fill-opacity");if(0!==Ka.constantOr(1)){var Wa=U.colorModeForRenderPass(),fb=W.paint.get("fill-pattern");xa=U.opaquePassEnabledForLayer()&&!fb.constantOr(1)&&1===xa.constantOr(a.Color.transparent).a&&1===Ka.constantOr(0)?"opaque":"translucent";U.renderPass===xa&&(xa=U.depthModeForSublayer(1,"opaque"===U.renderPass?Kd.ReadWrite:Kd.ReadOnly),qa(U,X,W,da,xa,Wa,!1));"translucent"===U.renderPass&&W.paint.get("fill-antialias")&&(xa=U.depthModeForSublayer(W.getPaintProperty("fill-outline-color")?
2:0,Kd.ReadOnly),qa(U,X,W,da,xa,Wa,!0))}},"fill-extrusion":function(U,X,W,da){var xa=W.paint.get("fill-extrusion-opacity");if(0!==xa&&"translucent"===U.renderPass){var Ka=new Kd(U.context.gl.LEQUAL,Kd.ReadWrite,U.depthRangeFor3D);1!==xa||W.paint.get("fill-extrusion-pattern").constantOr(1)?(pa(U,X,W,da,Ka,Gc.disabled,dd.disabled),pa(U,X,W,da,Ka,U.stencilModeFor3D(),U.colorModeForRenderPass())):(xa=U.colorModeForRenderPass(),pa(U,X,W,da,Ka,Gc.disabled,xa))}},hillshade:function(U,X,W,da){if("offscreen"===
U.renderPass||"translucent"===U.renderPass){var xa=U.context,Ka=X.getSource().maxzoom,Wa=U.depthModeForSublayer(0,Kd.ReadOnly),fb=U.colorModeForRenderPass(),Fb="translucent"===U.renderPass?U.stencilConfigForOverlap(da):[{},da];da=Fb[0];var Ob=0;for(Fb=Fb[1];Ob<Fb.length;Ob+=1){var Pb=Fb[Ob],uc=X.getTile(Pb);if(uc.needsHillshadePrepare&&"offscreen"===U.renderPass){var sc=U,hc=uc,rc=W;Pb=Ka;var oc=Wa;uc=Gc.disabled;var Nb=fb,jc=sc.context,Uc=jc.gl,jd=hc.dem;if(jd&&jd.data){var qd=jd.dim,Vc=jd.stride,
td=jd.getPixels();(jc.activeTexture.set(Uc.TEXTURE1),jc.pixelStoreUnpackPremultiplyAlpha.set(!1),hc.demTexture=hc.demTexture||sc.getTileTexture(Vc),hc.demTexture)?(Vc=hc.demTexture,Vc.update(td,{premultiply:!1}),Vc.bind(Uc.NEAREST,Uc.CLAMP_TO_EDGE)):(hc.demTexture=new a.Texture(jc,td,Uc.RGBA,{premultiply:!1}),hc.demTexture.bind(Uc.NEAREST,Uc.CLAMP_TO_EDGE));jc.activeTexture.set(Uc.TEXTURE0);td=hc.fbo;td||(Vc=new a.Texture(jc,{width:qd,height:qd,data:null},Uc.RGBA),Vc.bind(Uc.LINEAR,Uc.CLAMP_TO_EDGE),
(td=hc.fbo=jc.createFramebuffer(qd,qd,!0)).colorAttachment.set(Vc.texture));jc.bindFramebuffer.set(td.framebuffer);jc.viewport.set([0,0,qd,qd]);qd=sc.useProgram("hillshadePrepare");td=qd.draw;Uc=Uc.TRIANGLES;Vc=vd.disabled;var nd=hc.tileID,Gd=jd.stride,Hd=a.create();Pb=(a.ortho(Hd,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(Hd,Hd,[0,-a.EXTENT,0]),{u_matrix:Hd,u_image:1,u_dimension:[Gd,Gd],u_zoom:nd.overscaledZ,u_maxzoom:Pb,u_unpack:jd.getUnpackVector()});td.call(qd,jc,Uc,oc,uc,Nb,Vc,Pb,rc.id,sc.rasterBoundsBuffer,
sc.quadTriangleIndexBuffer,sc.rasterBoundsSegments);hc.needsHillshadePrepare=!1}}else if("translucent"===U.renderPass&&(rc=hc=sc=void 0,oc=U,jc=uc,uc=W,Nb=Wa,Pb=da[Pb.overscaledZ],jd=fb,Uc=oc.context,qd=Uc.gl,Vc=jc.fbo)){td=oc.useProgram("hillshade");Uc.activeTexture.set(qd.TEXTURE0);qd.bindTexture(qd.TEXTURE_2D,Vc.colorAttachment.get());Vc=uc.paint.get("hillshade-shadow-color");nd=uc.paint.get("hillshade-highlight-color");Gd=uc.paint.get("hillshade-accent-color");Hd=uc.paint.get("hillshade-illumination-direction")*
(Math.PI/180);"viewport"===uc.paint.get("hillshade-illumination-anchor")&&(Hd-=oc.transform.angle);var zd=!oc.options.moving;jc={u_matrix:oc.transform.calculatePosMatrix(jc.tileID.toUnwrapped(),zd),u_image:0,u_latrange:(rc=jc.tileID,hc=Math.pow(2,rc.canonical.z),sc=rc.canonical.y,[(new a.MercatorCoordinate(0,sc/hc)).toLngLat().lat,(new a.MercatorCoordinate(0,(sc+1)/hc)).toLngLat().lat]),u_light:[uc.paint.get("hillshade-exaggeration"),Hd],u_shadow:Vc,u_highlight:nd,u_accent:Gd};td.draw(Uc,qd.TRIANGLES,
Nb,Pb,jd,vd.disabled,jc,uc.id,oc.rasterBoundsBuffer,oc.quadTriangleIndexBuffer,oc.rasterBoundsSegments)}}xa.viewport.set([0,0,U.width,U.height])}},raster:function(U,X,W,da){if("translucent"===U.renderPass&&0!==W.paint.get("raster-opacity")&&da.length){var xa=U.context,Ka=xa.gl,Wa=X.getSource(),fb=U.useProgram("raster"),Fb=U.colorModeForRenderPass(),Ob=Wa instanceof Cb?[{},da]:U.stencilConfigForOverlap(da);da=Ob[0];Ob=Ob[1];for(var Pb=Ob[Ob.length-1].overscaledZ,uc=!U.options.moving,sc=0;sc<Ob.length;sc+=
1){var hc=Ob[sc],rc=U.depthModeForSublayer(hc.overscaledZ-Pb,1===W.paint.get("raster-opacity")?Kd.ReadWrite:Kd.ReadOnly,Ka.LESS),oc=X.getTile(hc),Nb=U.transform.calculatePosMatrix(hc.toUnwrapped(),uc);oc.registerFadeDuration(W.paint.get("raster-fade-duration"));var jc=X.findLoadedParent(hc,0);var Uc=oc,jd=jc,qd=X,Vc=U.transform;var td=W.paint.get("raster-fade-duration");if(0<td){var nd=a.browser.now(),Gd=(nd-Uc.timeAdded)/td;td=jd?(nd-jd.timeAdded)/td:-1;qd=qd.getSource();Vc=Vc.coveringZoomLevel({tileSize:qd.tileSize,
roundZoom:qd.roundZoom});Vc=(Vc=!jd||Math.abs(jd.tileID.overscaledZ-Vc)>Math.abs(Uc.tileID.overscaledZ-Vc))&&Uc.refreshedUponExpiration?1:a.clamp(Vc?Gd:1-td,0,1);td=(Uc.refreshedUponExpiration&&1<=Gd&&(Uc.refreshedUponExpiration=!1),jd?{opacity:1,mix:1-Vc}:{opacity:Vc,mix:0})}else td={opacity:1,mix:0};Gd=jd=void 0;Uc="nearest"===W.paint.get("raster-resampling")?Ka.NEAREST:Ka.LINEAR;xa.activeTexture.set(Ka.TEXTURE0);oc.texture.bind(Uc,Ka.CLAMP_TO_EDGE,Ka.LINEAR_MIPMAP_NEAREST);xa.activeTexture.set(Ka.TEXTURE1);
jc?(jc.texture.bind(Uc,Ka.CLAMP_TO_EDGE,Ka.LINEAR_MIPMAP_NEAREST),jd=Math.pow(2,jc.tileID.overscaledZ-oc.tileID.overscaledZ),Gd=[oc.tileID.canonical.x*jd%1,oc.tileID.canonical.y*jd%1]):oc.texture.bind(Uc,Ka.CLAMP_TO_EDGE,Ka.LINEAR_MIPMAP_NEAREST);jc=Vc=void 0;Uc=W;oc=Gd||[0,0];jd=jd||1;Gd=td.mix;td=td.opacity*Uc.paint.get("raster-opacity");qd=Uc.paint.get("raster-brightness-min");nd=Uc.paint.get("raster-brightness-max");var Hd=(Vc=Uc.paint.get("raster-saturation"),0<Vc?1-1/(1.001-Vc):-Vc);Vc=(jc=
Uc.paint.get("raster-contrast"),0<jc?1/(1-jc):1+jc);Uc=Uc.paint.get("raster-hue-rotate");Uc*=Math.PI/180;jc=Math.sin(Uc);Uc=Math.cos(Uc);Nb={u_matrix:Nb,u_tl_parent:oc,u_scale_parent:jd,u_buffer_scale:1,u_fade_t:Gd,u_opacity:td,u_image0:0,u_image1:1,u_brightness_low:qd,u_brightness_high:nd,u_saturation_factor:Hd,u_contrast_factor:Vc,u_spin_weights:[(2*Uc+1)/3,(-Math.sqrt(3)*jc-Uc+1)/3,(Math.sqrt(3)*jc-Uc+1)/3]};Wa instanceof Cb?fb.draw(xa,Ka.TRIANGLES,rc,Gc.disabled,Fb,vd.disabled,Nb,W.id,Wa.boundsBuffer,
U.quadTriangleIndexBuffer,Wa.boundsSegments):fb.draw(xa,Ka.TRIANGLES,rc,da[hc.overscaledZ],Fb,vd.disabled,Nb,W.id,U.rasterBoundsBuffer,U.quadTriangleIndexBuffer,U.rasterBoundsSegments)}}},background:function(U,X,W){X=W.paint.get("background-color");var da=W.paint.get("background-opacity");if(0!==da){var xa=U.context,Ka=xa.gl,Wa=U.transform,fb=Wa.tileSize,Fb=W.paint.get("background-pattern");if(!U.isPatternMissing(Fb)){var Ob=!Fb&&1===X.a&&1===da&&U.opaquePassEnabledForLayer()?"opaque":"translucent";
if(U.renderPass===Ob){var Pb=Gc.disabled;Ob=U.depthModeForSublayer(0,"opaque"===Ob?Kd.ReadWrite:Kd.ReadOnly);var uc=U.colorModeForRenderPass(),sc=U.useProgram(Fb?"backgroundPattern":"background");Wa=Wa.coveringTiles({tileSize:fb});Fb&&(xa.activeTexture.set(Ka.TEXTURE0),U.imageManager.bind(U.context));for(var hc=W.getCrossfadeParameters(),rc=0;rc<Wa.length;rc+=1){var oc=Wa[rc],Nb=U.transform.calculatePosMatrix(oc.toUnwrapped());if(Fb){var jc=da;var Uc=U;var jd=Fb,qd={tileID:oc,tileSize:fb},Vc=hc;oc=
a;var td=oc.extend,nd=Uc.imageManager.getPattern(jd.from.toString());jd=Uc.imageManager.getPattern(jd.to.toString());var Gd=Uc.imageManager.getPixelSize(),Hd=Math.pow(2,qd.tileID.overscaledZ),zd=qd.tileSize*Math.pow(2,Uc.transform.tileZoom)/Hd;Hd=zd*(qd.tileID.canonical.x+qd.tileID.wrap*Hd);zd*=qd.tileID.canonical.y;Uc={u_image:0,u_pattern_tl_a:nd.tl,u_pattern_br_a:nd.br,u_pattern_tl_b:jd.tl,u_pattern_br_b:jd.br,u_texsize:[Gd.width,Gd.height],u_mix:Vc.t,u_pattern_size_a:nd.displaySize,u_pattern_size_b:jd.displaySize,
u_scale_a:Vc.fromScale,u_scale_b:Vc.toScale,u_tile_units_to_pixels:1/Q(qd,1,Uc.transform.tileZoom),u_pixel_coord_upper:[Hd>>16,zd>>16],u_pixel_coord_lower:[65535&Hd,65535&zd]};Nb=td.call(oc,Uc,{u_matrix:Nb,u_opacity:jc})}else Nb={u_matrix:Nb,u_opacity:da,u_color:X};sc.draw(xa,Ka.TRIANGLES,Ob,Pb,uc,vd.disabled,Nb,W.id,U.tileExtentBuffer,U.quadTriangleIndexBuffer,U.tileExtentSegments)}}}}},debug:function(U,X,W){for(var da=0;da<W.length;da++){var xa=U,Ka=X,Wa=W[da],fb=xa.context,Fb=fb.gl,Ob=Wa.posMatrix,
Pb=xa.useProgram("debug"),uc=Kd.disabled,sc=Gc.disabled,hc=xa.colorModeForRenderPass();fb.activeTexture.set(Fb.TEXTURE0);xa.emptyTexture.bind(Fb.LINEAR,Fb.CLAMP_TO_EDGE);Pb.draw(fb,Fb.LINE_STRIP,uc,sc,hc,vd.disabled,Kh(Ob,a.Color.red),"$debug",xa.debugBuffer,xa.tileBorderIndexBuffer,xa.debugSegments);hc=Ka.getTileByID(Wa.key).latestRawTileData;hc=Math.floor((hc&&hc.byteLength||0)/1024);Ka=Ka.getTile(Wa).tileSize;Ka=512/Math.min(Ka,512)*(Wa.overscaledZ/xa.transform.zoom)*.5;var rc=Wa.canonical.toString();
Wa.overscaledZ!==Wa.canonical.z&&(rc+=" \x3d\x3e "+Wa.overscaledZ);Wa=rc+" "+hc+"kb";xa.initDebugOverlayCanvas();hc=xa.debugOverlayCanvas;rc=xa.context.gl;var oc=xa.debugOverlayCanvas.getContext("2d");oc.clearRect(0,0,hc.width,hc.height);oc.shadowColor="white";oc.shadowBlur=2;oc.lineWidth=1.5;oc.strokeStyle="white";oc.textBaseline="top";oc.font="bold 36px Open Sans, sans-serif";oc.fillText(Wa,5,5);oc.strokeText(Wa,5,5);xa.debugOverlayTexture.update(hc);xa.debugOverlayTexture.bind(rc.LINEAR,rc.CLAMP_TO_EDGE);
Pb.draw(fb,Fb.TRIANGLES,uc,sc,dd.alphaBlended,vd.disabled,Kh(Ob,a.Color.transparent,Ka),"$debug",xa.debugBuffer,xa.quadTriangleIndexBuffer,xa.debugSegments)}},custom:function(U,X,W){X=U.context;W=W.implementation;if("offscreen"===U.renderPass){var da=W.prerender;da&&(U.setCustomLayerDefaults(),X.setColorMode(U.colorModeForRenderPass()),da.call(W,X.gl,U.transform.customLayerMatrix()),X.setDirty(),U.setBaseState())}else"translucent"===U.renderPass&&(U.setCustomLayerDefaults(),X.setColorMode(U.colorModeForRenderPass()),
X.setStencilMode(Gc.disabled),da="3d"===W.renderingMode?new Kd(U.context.gl.LEQUAL,Kd.ReadWrite,U.depthRangeFor3D):U.depthModeForSublayer(0,Kd.ReadOnly),X.setDepthMode(da),W.render(X.gl,U.transform.customLayerMatrix()),X.setDirty(),U.setBaseState(),X.bindFramebuffer.set(null))}},Ve=function(U,X){this.context=new Cd(U);this.transform=X;this._tileTextures={};this.setup();this.numSublayers=ae.maxUnderzooming+ae.maxOverzooming+1;this.depthEpsilon=1/Math.pow(2,16);this.crossTileSymbolIndex=new Kc;this.gpuTimers=
{}};Ve.prototype.resize=function(U,X){if(this.width=U*a.browser.devicePixelRatio,this.height=X*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(U=0,X=this.style._order;U<X.length;U+=1)this.style._layers[X[U]].resize()};Ve.prototype.setup=function(){var U=this.context,X=new a.StructArrayLayout2i4;X.emplaceBack(0,0);X.emplaceBack(a.EXTENT,0);X.emplaceBack(0,a.EXTENT);X.emplaceBack(a.EXTENT,a.EXTENT);this.tileExtentBuffer=U.createVertexBuffer(X,xd.members);
this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);X=new a.StructArrayLayout2i4;X.emplaceBack(0,0);X.emplaceBack(a.EXTENT,0);X.emplaceBack(0,a.EXTENT);X.emplaceBack(a.EXTENT,a.EXTENT);this.debugBuffer=U.createVertexBuffer(X,xd.members);this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);X=new a.StructArrayLayout4i8;X.emplaceBack(0,0,0,0);X.emplaceBack(a.EXTENT,0,a.EXTENT,0);X.emplaceBack(0,a.EXTENT,0,a.EXTENT);X.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT);this.rasterBoundsBuffer=
U.createVertexBuffer(X,sb.members);this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);X=new a.StructArrayLayout2i4;X.emplaceBack(0,0);X.emplaceBack(1,0);X.emplaceBack(0,1);X.emplaceBack(1,1);this.viewportBuffer=U.createVertexBuffer(X,xd.members);this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);X=new a.StructArrayLayout1ui2;X.emplaceBack(0);X.emplaceBack(1);X.emplaceBack(3);X.emplaceBack(2);X.emplaceBack(0);this.tileBorderIndexBuffer=U.createIndexBuffer(X);X=new a.StructArrayLayout3ui6;
X.emplaceBack(0,1,2);X.emplaceBack(2,1,3);this.quadTriangleIndexBuffer=U.createIndexBuffer(X);this.emptyTexture=new a.Texture(U,{width:1,height:1,data:new Uint8Array([0,0,0,0])},U.gl.RGBA);U=this.context.gl;this.stencilClearMode=new Gc({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO)};Ve.prototype.clearStencil=function(){var U=this.context,X=U.gl;this.nextStencilID=1;this.currentStencilSource=void 0;var W=a.create();a.ortho(W,0,this.width,this.height,0,0,1);a.scale(W,W,[X.drawingBufferWidth,X.drawingBufferHeight,
0]);this.useProgram("clippingMask").draw(U,X.TRIANGLES,Kd.disabled,this.stencilClearMode,dd.disabled,vd.disabled,{u_matrix:W},"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)};Ve.prototype._renderTileClippingMasks=function(U,X){if(this.currentStencilSource!==U.source&&U.isTileClipped()&&X&&X.length){this.currentStencilSource=U.source;U=this.context;var W=U.gl;256<this.nextStencilID+X.length&&this.clearStencil();U.setColorMode(dd.disabled);U.setDepthMode(Kd.disabled);
var da=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var xa=0;xa<X.length;xa+=1){var Ka=X[xa],Wa=this._tileClippingMaskIDs[Ka.key]=this.nextStencilID++;da.draw(U,W.TRIANGLES,Kd.disabled,new Gc({func:W.ALWAYS,mask:0},Wa,255,W.KEEP,W.KEEP,W.REPLACE),dd.disabled,vd.disabled,{u_matrix:Ka.posMatrix},"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}};Ve.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0;256<this.nextStencilID+
1&&this.clearStencil();var U=this.nextStencilID++,X=this.context.gl;return new Gc({func:X.NOTEQUAL,mask:255},U,255,X.KEEP,X.KEEP,X.REPLACE)};Ve.prototype.stencilModeForClipping=function(U){var X=this.context.gl;return new Gc({func:X.EQUAL,mask:255},this._tileClippingMaskIDs[U.key],0,X.KEEP,X.KEEP,X.REPLACE)};Ve.prototype.stencilConfigForOverlap=function(U){var X=this.context.gl;U=U.sort(function(Wa,fb){return fb.overscaledZ-Wa.overscaledZ});var W=U[U.length-1].overscaledZ,da=U[0].overscaledZ-W+1;
if(1<da){this.currentStencilSource=void 0;256<this.nextStencilID+da&&this.clearStencil();var xa={};for(var Ka=0;Ka<da;Ka++)xa[Ka+W]=new Gc({func:X.GEQUAL,mask:255},Ka+this.nextStencilID,255,X.KEEP,X.KEEP,X.REPLACE);return this.nextStencilID+=da,[xa,U]}return[(xa={},xa[W]=Gc.disabled,xa),U]};Ve.prototype.colorModeForRenderPass=function(){var U=this.context.gl;return this._showOverdrawInspector?new dd([U.CONSTANT_COLOR,U.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?dd.unblended:
dd.alphaBlended};Ve.prototype.depthModeForSublayer=function(U,X,W){if(!this.opaquePassEnabledForLayer())return Kd.disabled;U=1-((1+this.currentLayer)*this.numSublayers+U)*this.depthEpsilon;return new Kd(W||this.context.gl.LEQUAL,X,[U,U])};Ve.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff};Ve.prototype.render=function(U,X){var W=this;this.style=U;this.options=X;this.lineAtlas=U.lineAtlas;this.imageManager=U.imageManager;this.glyphManager=U.glyphManager;
this.symbolFadeChange=U.placement.symbolFadeChange(a.browser.now());this.imageManager.beginFrame();var da=this.style._order,xa=this.style.sourceCaches;for(Fb in xa){var Ka=xa[Fb];Ka.used&&Ka.prepare(this.context)}var Wa,fb;var Fb={};Ka={};var Ob={},Pb;for(Pb in xa){var uc=xa[Pb];Fb[Pb]=uc.getVisibleCoordinates();Ka[Pb]=Fb[Pb].slice().reverse();Ob[Pb]=uc.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(Pb=0;Pb<da.length;Pb++)if(this.style._layers[da[Pb]].is3D()){this.opaquePassCutoff=
Pb;break}this.renderPass="offscreen";for(Pb=0;Pb<da.length;Pb+=1)if(uc=this.style._layers[da[Pb]],uc.hasOffscreenPass()&&!uc.isHidden(this.transform.zoom)){var sc=Ka[uc.source];("custom"===uc.type||sc.length)&&this.renderLayer(this,xa[uc.source],uc,sc)}this.context.bindFramebuffer.set(null);this.context.clear({color:X.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1});this.clearStencil();this._showOverdrawInspector=X.showOverdrawInspector;this.depthRangeFor3D=[0,1-(U._order.length+
2)*this.numSublayers*this.depthEpsilon];this.renderPass="opaque";for(this.currentLayer=da.length-1;0<=this.currentLayer;this.currentLayer--)U=this.style._layers[da[this.currentLayer]],X=xa[U.source],Pb=Fb[U.source],this._renderTileClippingMasks(U,Pb),this.renderLayer(this,X,U,Pb);this.renderPass="translucent";for(this.currentLayer=0;this.currentLayer<da.length;this.currentLayer++)U=this.style._layers[da[this.currentLayer]],X=xa[U.source],Pb=("symbol"===U.type?Ob:Ka)[U.source],this._renderTileClippingMasks(U,
Fb[U.source]),this.renderLayer(this,X,U,Pb);this.options.showTileBoundaries&&(a.values(this.style._layers).forEach(function(hc){hc.source&&!hc.isHidden(W.transform.zoom)&&(hc.source!==(fb&&fb.id)&&(fb=W.style.sourceCaches[hc.source]),(!Wa||Wa.getSource().maxzoom<fb.getSource().maxzoom)&&(Wa=fb))}),Wa&&ri.debug(this,Wa,Wa.getVisibleCoordinates()));this.options.showPadding&&function(hc){var rc=hc.transform.padding;oa(hc,0,hc.transform.height-(rc.top||0)+1.5,hc.transform.width,3,Lh);oa(hc,0,(rc.bottom||
0)+1.5,hc.transform.width,3,nh);oa(hc,(rc.left||0)-1.5,0,3,hc.transform.height,zg);oa(hc,hc.transform.width-(rc.right||0)-1.5,0,3,hc.transform.height,Xj);var oc=hc.transform.centerPoint;rc=oc.x;oc=hc.transform.height-oc.y;oa(hc,rc-1,oc-10,2,20,Vg);oa(hc,rc-10,oc-1,20,2,Vg);!0}(this);this.context.setDefault()};Ve.prototype.renderLayer=function(U,X,W,da){W.isHidden(this.transform.zoom)||("background"===W.type||"custom"===W.type||da.length)&&(this.id=W.id,this.gpuTimingStart(W),ri[W.type](U,X,W,da,this.style.placement.variableOffsets),
this.gpuTimingEnd())};Ve.prototype.gpuTimingStart=function(U){if(this.options.gpuTiming){var X=this.context.extTimerQuery,W=this.gpuTimers[U.id];W||(W=this.gpuTimers[U.id]={calls:0,cpuTime:0,query:X.createQueryEXT()});W.calls++;X.beginQueryEXT(X.TIME_ELAPSED_EXT,W.query)}};Ve.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var U=this.context.extTimerQuery;U.endQueryEXT(U.TIME_ELAPSED_EXT)}};Ve.prototype.collectGpuTimers=function(){var U=this.gpuTimers;return this.gpuTimers={},U};Ve.prototype.queryGpuTimers=
function(U){var X={},W;for(W in U){var da=U[W],xa=this.context.extTimerQuery,Ka=xa.getQueryObjectEXT(da.query,xa.QUERY_RESULT_EXT)/1E6;xa.deleteQueryEXT(da.query);X[W]=Ka}return X};Ve.prototype.translatePosMatrix=function(U,X,W,da,xa){if(!W[0]&&!W[1])return U;var Ka=xa?"map"===da?this.transform.angle:0:"viewport"===da?-this.transform.angle:0;Ka&&(da=Math.sin(Ka),Ka=Math.cos(Ka),W=[W[0]*Ka-W[1]*da,W[0]*da+W[1]*Ka]);X=[xa?W[0]:Q(X,W[0],this.transform.zoom),xa?W[1]:Q(X,W[1],this.transform.zoom),0];W=
new Float32Array(16);return a.translate(W,U,X),W};Ve.prototype.saveTileTexture=function(U){var X=this._tileTextures[U.size[0]];X?X.push(U):this._tileTextures[U.size[0]]=[U]};Ve.prototype.getTileTexture=function(U){return(U=this._tileTextures[U])&&0<U.length?U.pop():null};Ve.prototype.isPatternMissing=function(U){if(!U)return!1;if(!U.from||!U.to)return!0;var X=this.imageManager.getPattern(U.from.toString());U=this.imageManager.getPattern(U.to.toString());return!X||!U};Ve.prototype.useProgram=function(U,
X){this.cache=this.cache||{};var W=""+U+(X?X.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[W]||(this.cache[W]=new Ee(this.context,ni[U],X,pi[U],this._showOverdrawInspector)),this.cache[W]};Ve.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO();this.context.cullFace.setDefault();this.context.activeTexture.setDefault();this.context.pixelStoreUnpack.setDefault();this.context.pixelStoreUnpackPremultiplyAlpha.setDefault();this.context.pixelStoreUnpackFlipY.setDefault()};
Ve.prototype.setBaseState=function(){var U=this.context.gl;this.context.cullFace.set(!1);this.context.viewport.set([0,0,this.width,this.height]);this.context.blendEquation.set(U.FUNC_ADD)};Ve.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))};
Ve.prototype.destroy=function(){this.emptyTexture.destroy();this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ph=function(U,X){this.points=U;this.planes=X};ph.fromInvProjectionMatrix=function(U,X,W){var da=Math.pow(2,W),xa=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Ka){return a.transformMat4([],Ka,U)}).map(function(Ka){return a.scale$1([],Ka,1/Ka[3]/X*da)});W=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Ka){var Wa=
a.sub([],xa[Ka[0]],xa[Ka[1]]),fb=a.sub([],xa[Ka[2]],xa[Ka[1]]);Wa=a.normalize([],a.cross([],Wa,fb));Ka=-a.dot(Wa,xa[Ka[1]]);return Wa.concat(Ka)});return new ph(xa,W)};var Wg=function(U,X){this.min=U;this.max=X;this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Wg.prototype.quadrant=function(U){U=[0==U%2,2>U];for(var X=a.clone$2(this.min),W=a.clone$2(this.max),da=0;da<U.length;da++)X[da]=U[da]?this.min[da]:this.center[da],W[da]=U[da]?this.center[da]:this.max[da];return W[2]=this.max[2],new Wg(X,
W)};Wg.prototype.distanceX=function(U){return Math.max(Math.min(this.max[0],U[0]),this.min[0])-U[0]};Wg.prototype.distanceY=function(U){return Math.max(Math.min(this.max[1],U[1]),this.min[1])-U[1]};Wg.prototype.intersects=function(U){for(var X=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],W=!0,da=0;da<U.planes.length;da++){for(var xa=U.planes[da],Ka=0,Wa=0;Wa<X.length;Wa++)Ka+=0<=a.dot$1(xa,X[Wa]);if(0===Ka)return 0;Ka!==
X.length&&(W=!1)}if(W)return 2;for(X=0;3>X;X++){W=Number.MAX_VALUE;da=-Number.MAX_VALUE;for(xa=0;xa<U.points.length;xa++)Ka=U.points[xa][X]-this.min[X],W=Math.min(W,Ka),da=Math.max(da,Ka);if(0>da||W>this.max[X]-this.min[X])return 0}return 1};var Xg=function(U,X,W,da){if(void 0===U&&(U=0),void 0===X&&(X=0),void 0===W&&(W=0),void 0===da&&(da=0),isNaN(U)||0>U||isNaN(X)||0>X||isNaN(W)||0>W||isNaN(da)||0>da)throw Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=
U;this.bottom=X;this.left=W;this.right=da};Xg.prototype.interpolate=function(U,X,W){return null!=X.top&&null!=U.top&&(this.top=a.number(U.top,X.top,W)),null!=X.bottom&&null!=U.bottom&&(this.bottom=a.number(U.bottom,X.bottom,W)),null!=X.left&&null!=U.left&&(this.left=a.number(U.left,X.left,W)),null!=X.right&&null!=U.right&&(this.right=a.number(U.right,X.right,W)),this};Xg.prototype.getCenter=function(U,X){U=a.clamp((this.left+U-this.right)/2,0,U);X=a.clamp((this.top+X-this.bottom)/2,0,X);return new a.Point(U,
X)};Xg.prototype.equals=function(U){return this.top===U.top&&this.bottom===U.bottom&&this.left===U.left&&this.right===U.right};Xg.prototype.clone=function(){return new Xg(this.top,this.bottom,this.left,this.right)};Xg.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Je=function(U,X,W,da,xa){this.tileSize=512;this.maxValidLatitude=85.051129;this._renderWorldCopies=void 0===xa||xa;this._minZoom=U||0;this._maxZoom=X||22;this._minPitch=null==W?0:
W;this._maxPitch=null==da?60:da;this.setMaxBounds();this.height=this.width=0;this._center=new a.LngLat(0,0);this.angle=this.zoom=0;this._fov=.6435011087932844;this._pitch=0;this._unmodified=!0;this._edgeInsets=new Xg;this._posMatrixCache={};this._alignedPosMatrixCache={}},Me={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},
bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Je.prototype.clone=function(){var U=new Je(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return U.tileSize=this.tileSize,U.latRange=this.latRange,U.width=this.width,U.height=this.height,U._center=this._center,U.zoom=this.zoom,U.angle=this.angle,
U._fov=this._fov,U._pitch=this._pitch,U._unmodified=this._unmodified,U._edgeInsets=this._edgeInsets.clone(),U._calcMatrices(),U};Me.minZoom.get=function(){return this._minZoom};Me.minZoom.set=function(U){this._minZoom!==U&&(this._minZoom=U,this.zoom=Math.max(this.zoom,U))};Me.maxZoom.get=function(){return this._maxZoom};Me.maxZoom.set=function(U){this._maxZoom!==U&&(this._maxZoom=U,this.zoom=Math.min(this.zoom,U))};Me.minPitch.get=function(){return this._minPitch};Me.minPitch.set=function(U){this._minPitch!==
U&&(this._minPitch=U,this.pitch=Math.max(this.pitch,U))};Me.maxPitch.get=function(){return this._maxPitch};Me.maxPitch.set=function(U){this._maxPitch!==U&&(this._maxPitch=U,this.pitch=Math.min(this.pitch,U))};Me.renderWorldCopies.get=function(){return this._renderWorldCopies};Me.renderWorldCopies.set=function(U){void 0===U?U=!0:null===U&&(U=!1);this._renderWorldCopies=U};Me.worldSize.get=function(){return this.tileSize*this.scale};Me.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))};
Me.size.get=function(){return new a.Point(this.width,this.height)};Me.bearing.get=function(){return-this.angle/Math.PI*180};Me.bearing.set=function(U){U=-a.wrap(U,-180,180)*Math.PI/180;this.angle!==U&&(this._unmodified=!1,this.angle=U,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))};Me.pitch.get=function(){return this._pitch/Math.PI*180};Me.pitch.set=function(U){U=a.clamp(U,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==U&&
(this._unmodified=!1,this._pitch=U,this._calcMatrices())};Me.fov.get=function(){return this._fov/Math.PI*180};Me.fov.set=function(U){U=Math.max(.01,Math.min(60,U));this._fov!==U&&(this._unmodified=!1,this._fov=U/180*Math.PI,this._calcMatrices())};Me.zoom.get=function(){return this._zoom};Me.zoom.set=function(U){U=Math.min(Math.max(U,this.minZoom),this.maxZoom);this._zoom!==U&&(this._unmodified=!1,this._zoom=U,this.scale=this.zoomScale(U),this.tileZoom=Math.floor(U),this.zoomFraction=U-this.tileZoom,
this._constrain(),this._calcMatrices())};Me.center.get=function(){return this._center};Me.center.set=function(U){U.lat===this._center.lat&&U.lng===this._center.lng||(this._unmodified=!1,this._center=U,this._constrain(),this._calcMatrices())};Me.padding.get=function(){return this._edgeInsets.toJSON()};Me.padding.set=function(U){this._edgeInsets.equals(U)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,U,1),this._calcMatrices())};Me.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,
this.height)};Je.prototype.isPaddingEqual=function(U){return this._edgeInsets.equals(U)};Je.prototype.interpolatePadding=function(U,X,W){this._unmodified=!1;this._edgeInsets.interpolate(U,X,W);this._constrain();this._calcMatrices()};Je.prototype.coveringZoomLevel=function(U){U=(U.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/U.tileSize));return Math.max(0,U)};Je.prototype.getVisibleUnwrappedCoordinates=function(U){var X=[new a.UnwrappedTileID(0,U)];if(this._renderWorldCopies){var W=
this.pointCoordinate(new a.Point(0,0)),da=this.pointCoordinate(new a.Point(this.width,0)),xa=this.pointCoordinate(new a.Point(this.width,this.height)),Ka=this.pointCoordinate(new a.Point(0,this.height)),Wa=Math.floor(Math.max(W.x,da.x,xa.x,Ka.x));for(W=Math.floor(Math.min(W.x,da.x,xa.x,Ka.x))-1;W<=Wa+1;W++)0!==W&&X.push(new a.UnwrappedTileID(W,U))}return X};Je.prototype.coveringTiles=function(U){var X=this.coveringZoomLevel(U),W=X;if(void 0!==U.minzoom&&X<U.minzoom)return[];void 0!==U.maxzoom&&X>
U.maxzoom&&(X=U.maxzoom);var da=a.MercatorCoordinate.fromLngLat(this.center),xa=Math.pow(2,X);da=[xa*da.x,xa*da.y,0];var Ka=ph.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,X),Wa=U.minzoom||0;60>=this.pitch&&.1>this._edgeInsets.top&&(Wa=X);var fb=function(oc){return{aabb:new Wg([oc*xa,0,0],[(oc+1)*xa,xa,0]),zoom:0,x:0,y:0,wrap:oc,fullyVisible:!1}},Fb=[],Ob=[],Pb=X;U=U.reparseOverscaled?W:X;if(this._renderWorldCopies)for(X=1;3>=X;X++)Fb.push(fb(-X)),Fb.push(fb(X));for(Fb.push(fb(0));0<
Fb.length;){fb=Fb.pop();X=fb.x;W=fb.y;var uc=fb.fullyVisible;if(!uc){uc=fb.aabb.intersects(Ka);if(0===uc)continue;uc=2===uc}var sc=fb.aabb.distanceX(da),hc=fb.aabb.distanceY(da);sc=Math.max(Math.abs(sc),Math.abs(hc));if(fb.zoom===Pb||sc>3+(1<<Pb-fb.zoom)-2&&fb.zoom>=Wa)Ob.push({tileID:new a.OverscaledTileID(fb.zoom===Pb?U:fb.zoom,fb.wrap,fb.zoom,X,W),distanceSq:a.sqrLen([da[0]-.5-X,da[1]-.5-W])});else for(sc=0;4>sc;sc++){hc=(X<<1)+sc%2;var rc=(W<<1)+(sc>>1);Fb.push({aabb:fb.aabb.quadrant(sc),zoom:fb.zoom+
1,x:hc,y:rc,wrap:fb.wrap,fullyVisible:uc})}}return Ob.sort(function(oc,Nb){return oc.distanceSq-Nb.distanceSq}).map(function(oc){return oc.tileID})};Je.prototype.resize=function(U,X){this.width=U;this.height=X;this.pixelsToGLUnits=[2/U,-2/X];this._constrain();this._calcMatrices()};Me.unmodified.get=function(){return this._unmodified};Je.prototype.zoomScale=function(U){return Math.pow(2,U)};Je.prototype.scaleZoom=function(U){return Math.log(U)/Math.LN2};Je.prototype.project=function(U){var X=a.clamp(U.lat,
-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(U.lng)*this.worldSize,a.mercatorYfromLat(X)*this.worldSize)};Je.prototype.unproject=function(U){return(new a.MercatorCoordinate(U.x/this.worldSize,U.y/this.worldSize)).toLngLat()};Me.point.get=function(){return this.project(this.center)};Je.prototype.setLocationAtPoint=function(U,X){X=this.pointCoordinate(X);var W=this.pointCoordinate(this.centerPoint);U=this.locationCoordinate(U);U=new a.MercatorCoordinate(U.x-(X.x-
W.x),U.y-(X.y-W.y));this.center=this.coordinateLocation(U);this._renderWorldCopies&&(this.center=this.center.wrap())};Je.prototype.locationPoint=function(U){return this.coordinatePoint(this.locationCoordinate(U))};Je.prototype.pointLocation=function(U){return this.coordinateLocation(this.pointCoordinate(U))};Je.prototype.locationCoordinate=function(U){return a.MercatorCoordinate.fromLngLat(U)};Je.prototype.coordinateLocation=function(U){return U.toLngLat()};Je.prototype.pointCoordinate=function(U){var X=
[U.x,U.y,0,1];U=[U.x,U.y,1,1];a.transformMat4(X,X,this.pixelMatrixInverse);a.transformMat4(U,U,this.pixelMatrixInverse);var W=X[3],da=U[3],xa=X[1]/W,Ka=U[1]/da,Wa=X[2]/W,fb=U[2]/da;Wa=Wa===fb?0:(0-Wa)/(fb-Wa);return new a.MercatorCoordinate(a.number(X[0]/W,U[0]/da,Wa)/this.worldSize,a.number(xa,Ka,Wa)/this.worldSize)};Je.prototype.coordinatePoint=function(U){U=[U.x*this.worldSize,U.y*this.worldSize,0,1];return a.transformMat4(U,U,this.pixelMatrix),new a.Point(U[0]/U[3],U[1]/U[3])};Je.prototype.getBounds=
function(){return(new a.LngLatBounds).extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))};Je.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null};Je.prototype.setMaxBounds=
function(U){U?(this.lngRange=[U.getWest(),U.getEast()],this.latRange=[U.getSouth(),U.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])};Je.prototype.calculatePosMatrix=function(U,X){void 0===X&&(X=!1);var W=U.key,da=X?this._alignedPosMatrixCache:this._posMatrixCache;if(da[W])return da[W];var xa=U.canonical,Ka=this.worldSize/this.zoomScale(xa.z);U=xa.x+Math.pow(2,xa.z)*U.wrap;var Wa=a.identity(new Float64Array(16));return a.translate(Wa,
Wa,[U*Ka,xa.y*Ka,0]),a.scale(Wa,Wa,[Ka/a.EXTENT,Ka/a.EXTENT,1]),a.multiply(Wa,X?this.alignedProjMatrix:this.projMatrix,Wa),da[W]=new Float32Array(Wa),da[W]};Je.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()};Je.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var U,X,W=-90,da=90,xa=-180,Ka=180,Wa=this.size,fb=this._unmodified;if(this.latRange){var Fb=this.latRange;W=a.mercatorYfromLat(Fb[1])*this.worldSize;
var Ob=(da=a.mercatorYfromLat(Fb[0])*this.worldSize)-W<Wa.y?Wa.y/(da-W):0}if(this.lngRange){Fb=this.lngRange;xa=a.mercatorXfromLng(Fb[0])*this.worldSize;var Pb=(Ka=a.mercatorXfromLng(Fb[1])*this.worldSize)-xa<Wa.x?Wa.x/(Ka-xa):0}Fb=this.point;var uc=Math.max(Pb||0,Ob||0);if(uc)return this.center=this.unproject(new a.Point(Pb?(Ka+xa)/2:Fb.x,Ob?(da+W)/2:Fb.y)),this.zoom+=this.scaleZoom(uc),this._unmodified=fb,void(this._constraining=!1);this.latRange&&(Ob=Fb.y,Pb=Wa.y/2,Ob-Pb<W&&(X=W+Pb),Ob+Pb>da&&
(X=da-Pb));this.lngRange&&(W=Fb.x,Wa=Wa.x/2,W-Wa<xa&&(U=xa+Wa),W+Wa>Ka&&(U=Ka-Wa));void 0===U&&void 0===X||(this.center=this.unproject(new a.Point(void 0!==U?U:Fb.x,void 0!==X?X:Fb.y)));this._unmodified=fb;this._constraining=!1}};Je.prototype._calcMatrices=function(){if(this.height){var U=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var X=this._fov*(.5+U.y/this.height);X=Math.sin(X)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-(Math.PI/2+this._pitch)-
X,.01,Math.PI-.01));var W=this.point,da=W.x;W=W.y;var xa=1.01*(Math.cos(Math.PI/2-this._pitch)*X+this.cameraToCenterDistance),Ka=this.height/50;X=new Float64Array(16);a.perspective(X,this._fov,this.width/this.height,Ka,xa);X[8]=2*-U.x/this.width;X[9]=2*U.y/this.height;a.scale(X,X,[1,-1,1]);a.translate(X,X,[0,0,-this.cameraToCenterDistance]);a.rotateX(X,X,this._pitch);a.rotateZ(X,X,this.angle);a.translate(X,X,[-da,-W,0]);this.mercatorMatrix=a.scale([],X,[this.worldSize,this.worldSize,this.worldSize]);
a.scale(X,X,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]);this.projMatrix=X;this.invProjMatrix=a.invert([],this.projMatrix);U=this.width%2/2;xa=this.height%2/2;Ka=Math.cos(this.angle);var Wa=Math.sin(this.angle);da=da-Math.round(da)+Ka*U+Wa*xa;W=W-Math.round(W)+Ka*xa+Wa*U;U=new Float64Array(X);if(a.translate(U,U,[.5<da?da-1:da,.5<W?W-1:W,0]),this.alignedProjMatrix=U,X=a.create(),a.scale(X,X,[this.width/2,-this.height/2,1]),a.translate(X,X,[1,-1,0]),this.labelPlaneMatrix=X,X=a.create(),
a.scale(X,X,[1,-1,1]),a.translate(X,X,[-1,-1,0]),a.scale(X,X,[2/this.width,2/this.height,1]),this.glCoordMatrix=X,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(X=a.invert(new Float64Array(16),this.pixelMatrix)))throw Error("failed to invert matrix");this.pixelMatrixInverse=X;this._posMatrixCache={};this._alignedPosMatrixCache={}}};Je.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var U=this.pointCoordinate(new a.Point(0,0));
U=[U.x*this.worldSize,U.y*this.worldSize,0,1];return a.transformMat4(U,U,this.pixelMatrix)[3]/this.cameraToCenterDistance};Je.prototype.getCameraPoint=function(){return this.centerPoint.add(new a.Point(0,Math.tan(this._pitch)*(this.cameraToCenterDistance||1)))};Je.prototype.getCameraQueryGeometry=function(U){var X=this.getCameraPoint();if(1===U.length)return[U[0],X];var W=X.x,da=X.y,xa=X.x;X=X.y;for(var Ka=0;Ka<U.length;Ka+=1){var Wa=U[Ka];W=Math.min(W,Wa.x);da=Math.min(da,Wa.y);xa=Math.max(xa,Wa.x);
X=Math.max(X,Wa.y)}return[new a.Point(W,da),new a.Point(xa,da),new a.Point(xa,X),new a.Point(W,X),new a.Point(W,da)]};Object.defineProperties(Je.prototype,Me);var Lg=function(U){var X,W,da,xa;this._hashName=U&&encodeURIComponent(U);a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this);this._updateHash=(X=this._updateHashUnthrottled.bind(this),W=!1,da=null,xa=function(){da=null;W&&(X(),da=setTimeout(xa,300),W=!1)},function(){return W=!0,da||xa(),da})};Lg.prototype.addTo=function(U){return this._map=
U,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this};Lg.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this};Lg.prototype.getHashString=function(U){var X=this._map.getCenter(),W=Math.round(100*this._map.getZoom())/100,da=Math.pow(10,Math.ceil((W*Math.LN2+Math.log(512/360/.5))/Math.LN10)),xa=Math.round(X.lng*
da)/da;X=Math.round(X.lat*da)/da;da=this._map.getBearing();var Ka=this._map.getPitch(),Wa="";if(Wa+=U?"/"+xa+"/"+X+"/"+W:W+"/"+X+"/"+xa,(da||Ka)&&(Wa+="/"+Math.round(10*da)/10),Ka&&(Wa+="/"+Math.round(Ka)),this._hashName){var fb=this._hashName,Fb=!1;U=a.window.location.hash.slice(1).split("\x26").map(function(Ob){var Pb=Ob.split("\x3d")[0];return Pb===fb?(Fb=!0,Pb+"\x3d"+Wa):Ob}).filter(function(Ob){return Ob});return Fb||U.push(fb+"\x3d"+Wa),"#"+U.join("\x26")}return"#"+Wa};Lg.prototype._getCurrentHash=
function(){var U,X=this,W=a.window.location.hash.replace("#","");return this._hashName?(W.split("\x26").map(function(da){return da.split("\x3d")}).forEach(function(da){da[0]===X._hashName&&(U=da)}),(U&&U[1]||"").split("/")):W.split("/")};Lg.prototype._onHashChange=function(){var U=this._getCurrentHash();if(3<=U.length&&!U.some(function(W){return isNaN(W)})){var X=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(U[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+U[2],
+U[1]],zoom:+U[0],bearing:X,pitch:+(U[4]||0)}),!0}return!1};Lg.prototype._updateHashUnthrottled=function(){var U=this.getHashString();try{a.window.history.replaceState(a.window.history.state,"",U)}catch(X){}};var Mh={linearity:.3,easing:a.bezier(0,0,.3,1)},Yj=a.extend({deceleration:2500,maxSpeed:1400},Mh),oj=a.extend({deceleration:20,maxSpeed:1400},Mh),pj=a.extend({deceleration:1E3,maxSpeed:360},Mh),qj=a.extend({deceleration:1E3,maxSpeed:90},Mh),qh=function(U){this._map=U;this.clear()};qh.prototype.clear=
function(){this._inertiaBuffer=[]};qh.prototype.record=function(U){this._drainInertiaBuffer();this._inertiaBuffer.push({time:a.browser.now(),settings:U})};qh.prototype._drainInertiaBuffer=function(){for(var U=this._inertiaBuffer,X=a.browser.now();0<U.length&&160<X-U[0].time;)U.shift()};qh.prototype._onMoveEnd=function(U){if(this._drainInertiaBuffer(),!(2>this._inertiaBuffer.length)){for(var X=0,W=0,da=0,xa=new a.Point(0,0),Ka=void 0,Wa=void 0,fb=0,Fb=this._inertiaBuffer;fb<Fb.length;fb+=1){var Ob=
Fb[fb].settings;X+=Ob.zoomDelta||0;W+=Ob.bearingDelta||0;da+=Ob.pitchDelta||0;Ob.panDelta&&xa._add(Ob.panDelta);Ob.around&&(Wa=Ob.around);Ob.pinchAround&&(Ka=Ob.pinchAround)}Fb=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time;fb={};xa.mag()&&(U=ra(xa.mag(),Fb,a.extend({},Yj,U||{})),fb.offset=xa.mult(U.amount/xa.mag()),fb.center=this._map.transform.center,ja(fb,U));X&&(X=ra(X,Fb,oj),fb.zoom=this._map.transform.zoom+X.amount,ja(fb,X));W&&(W=ra(W,Fb,pj),fb.bearing=this._map.transform.bearing+
a.clamp(W.amount,-179,179),ja(fb,W));da&&(da=ra(da,Fb,qj),fb.pitch=this._map.transform.pitch+da.amount,ja(fb,da));if(fb.zoom||fb.bearing)Ka=void 0===Ka?Wa:Ka,fb.around=Ka?this._map.unproject(Ka):this._map.getCenter();return this.clear(),a.extend(fb,{noMoveStart:!0})}};var vf=function(U){function X(da,xa,Ka,Wa){void 0===Wa&&(Wa={});var fb=La.mousePos(xa.getCanvasContainer(),Ka),Fb=xa.unproject(fb);U.call(this,da,a.extend({point:fb,lngLat:Fb,originalEvent:Ka},Wa));this._defaultPrevented=!1;this.target=
xa}U&&(X.__proto__=U);(X.prototype=Object.create(U&&U.prototype)).constructor=X;var W={defaultPrevented:{configurable:!0}};return X.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(X.prototype,W),X}(a.Event),Ri=function(U){function X(da,xa,Ka){var Wa="touchend"===da?Ka.changedTouches:Ka.touches;Wa=La.touchPos(xa.getCanvasContainer(),Wa);var fb=Wa.map(function(Pb){return xa.unproject(Pb)}),Fb=Wa.reduce(function(Pb,
uc,sc,hc){return Pb.add(uc.div(hc.length))},new a.Point(0,0)),Ob=xa.unproject(Fb);U.call(this,da,{points:Wa,point:Fb,lngLats:fb,lngLat:Ob,originalEvent:Ka});this._defaultPrevented=!1}U&&(X.__proto__=U);(X.prototype=Object.create(U&&U.prototype)).constructor=X;var W={defaultPrevented:{configurable:!0}};return X.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(X.prototype,W),X}(a.Event),xk=function(U){function X(da,
xa,Ka){U.call(this,da,{originalEvent:Ka});this._defaultPrevented=!1}U&&(X.__proto__=U);(X.prototype=Object.create(U&&U.prototype)).constructor=X;var W={defaultPrevented:{configurable:!0}};return X.prototype.preventDefault=function(){this._defaultPrevented=!0},W.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(X.prototype,W),X}(a.Event),nf=function(U,X){this._map=U;this._clickTolerance=X.clickTolerance};nf.prototype.reset=function(){delete this._mousedownPos};
nf.prototype.wheel=function(U){return this._firePreventable(new xk(U.type,this._map,U))};nf.prototype.mousedown=function(U,X){return this._mousedownPos=X,this._firePreventable(new vf(U.type,this._map,U))};nf.prototype.mouseup=function(U){this._map.fire(new vf(U.type,this._map,U))};nf.prototype.click=function(U,X){this._mousedownPos&&this._mousedownPos.dist(X)>=this._clickTolerance||this._map.fire(new vf(U.type,this._map,U))};nf.prototype.dblclick=function(U){return this._firePreventable(new vf(U.type,
this._map,U))};nf.prototype.mouseover=function(U){this._map.fire(new vf(U.type,this._map,U))};nf.prototype.mouseout=function(U){this._map.fire(new vf(U.type,this._map,U))};nf.prototype.touchstart=function(U){return this._firePreventable(new Ri(U.type,this._map,U))};nf.prototype.touchmove=function(U){this._map.fire(new Ri(U.type,this._map,U))};nf.prototype.touchend=function(U){this._map.fire(new Ri(U.type,this._map,U))};nf.prototype.touchcancel=function(U){this._map.fire(new Ri(U.type,this._map,U))};
nf.prototype._firePreventable=function(U){if(this._map.fire(U),U.defaultPrevented)return{}};nf.prototype.isEnabled=function(){return!0};nf.prototype.isActive=function(){return!1};nf.prototype.enable=function(){};nf.prototype.disable=function(){};var og=function(U){this._map=U};og.prototype.reset=function(){this._delayContextMenu=!1;delete this._contextMenuEvent};og.prototype.mousemove=function(U){this._map.fire(new vf(U.type,this._map,U))};og.prototype.mousedown=function(){this._delayContextMenu=
!0};og.prototype.mouseup=function(){this._delayContextMenu=!1;this._contextMenuEvent&&(this._map.fire(new vf("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)};og.prototype.contextmenu=function(U){this._delayContextMenu?this._contextMenuEvent=U:this._map.fire(new vf(U.type,this._map,U));this._map.listens("contextmenu")&&U.preventDefault()};og.prototype.isEnabled=function(){return!0};og.prototype.isActive=function(){return!1};og.prototype.enable=function(){};og.prototype.disable=
function(){};var Jf=function(U,X){this._map=U;this._el=U.getCanvasContainer();this._container=U.getContainer();this._clickTolerance=X.clickTolerance||1};Jf.prototype.isEnabled=function(){return!!this._enabled};Jf.prototype.isActive=function(){return!!this._active};Jf.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)};Jf.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};Jf.prototype.mousedown=function(U,X){this.isEnabled()&&U.shiftKey&&0===U.button&&(La.disableDrag(),
this._startPos=this._lastPos=X,this._active=!0)};Jf.prototype.mousemoveWindow=function(U,X){if(this._active&&!(this._lastPos.equals(X)||!this._box&&X.dist(this._startPos)<this._clickTolerance)){var W=this._startPos;this._lastPos=X;this._box||(this._box=La.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",U));U=Math.min(W.x,X.x);var da=Math.max(W.x,X.x),xa=Math.min(W.y,X.y);X=Math.max(W.y,X.y);La.setTransform(this._box,
"translate("+U+"px,"+xa+"px)");this._box.style.width=da-U+"px";this._box.style.height=X-xa+"px"}};Jf.prototype.mouseupWindow=function(U,X){var W=this;if(this._active&&0===U.button){var da=this._startPos;if(this.reset(),La.suppressClick(),da.x!==X.x||da.y!==X.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:U})),{cameraAnimation:function(xa){return xa.fitScreenCoordinates(da,X,W._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",U)}};Jf.prototype.keydown=function(U){this._active&&
27===U.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",U))};Jf.prototype.reset=function(){this._active=!1;this._container.classList.remove("mapboxgl-crosshair");this._box&&(La.remove(this._box),this._box=null);La.enableDrag();delete this._startPos;delete this._lastPos};Jf.prototype._fireEvent=function(U,X){return this._map.fire(new a.Event(U,{originalEvent:X}))};var Nh=function(U){this.reset();this.numTouches=U.numTouches};Nh.prototype.reset=function(){delete this.centroid;delete this.startTime;
delete this.touches;this.aborted=!1};Nh.prototype.touchstart=function(U,X,W){(this.centroid||W.length>this.numTouches)&&(this.aborted=!0);if(!this.aborted&&(void 0===this.startTime&&(this.startTime=U.timeStamp),W.length===this.numTouches)){U=new a.Point(0,0);for(var da=0;da<X.length;da+=1)U._add(X[da]);this.centroid=U.div(X.length);this.touches=ha(W,X)}};Nh.prototype.touchmove=function(U,X,W){if(!this.aborted&&this.centroid){U=ha(W,X);for(var da in this.touches)X=U[da],(!X||30<X.dist(this.touches[da]))&&
(this.aborted=!0)}};Nh.prototype.touchend=function(U,X,W){if((!this.centroid||500<U.timeStamp-this.startTime)&&(this.aborted=!0),0===W.length)if(U=!this.aborted&&this.centroid,this.reset(),U)return U};var rh=function(U){this.singleTap=new Nh(U);this.numTaps=U.numTaps;this.reset()};rh.prototype.reset=function(){this.lastTime=1/0;delete this.lastTap;this.count=0;this.singleTap.reset()};rh.prototype.touchstart=function(U,X,W){this.singleTap.touchstart(U,X,W)};rh.prototype.touchmove=function(U,X,W){this.singleTap.touchmove(U,
X,W)};rh.prototype.touchend=function(U,X,W){if(X=this.singleTap.touchend(U,X,W)){W=500>U.timeStamp-this.lastTime;var da=!this.lastTap||30>this.lastTap.dist(X);if(W&&da||this.reset(),this.count++,this.lastTime=U.timeStamp,this.lastTap=X,this.count===this.numTaps)return this.reset(),X}};var pg=function(){this._zoomIn=new rh({numTouches:1,numTaps:2});this._zoomOut=new rh({numTouches:2,numTaps:1});this.reset()};pg.prototype.reset=function(){this._active=!1;this._zoomIn.reset();this._zoomOut.reset()};
pg.prototype.touchstart=function(U,X,W){this._zoomIn.touchstart(U,X,W);this._zoomOut.touchstart(U,X,W)};pg.prototype.touchmove=function(U,X,W){this._zoomIn.touchmove(U,X,W);this._zoomOut.touchmove(U,X,W)};pg.prototype.touchend=function(U,X,W){var da=this,xa=this._zoomIn.touchend(U,X,W),Ka=this._zoomOut.touchend(U,X,W);return xa?(this._active=!0,U.preventDefault(),setTimeout(function(){return da.reset()},0),{cameraAnimation:function(Wa){return Wa.easeTo({duration:300,zoom:Wa.getZoom()+1,around:Wa.unproject(xa)},
{originalEvent:U})}}):Ka?(this._active=!0,U.preventDefault(),setTimeout(function(){return da.reset()},0),{cameraAnimation:function(Wa){return Wa.easeTo({duration:300,zoom:Wa.getZoom()-1,around:Wa.unproject(Ka)},{originalEvent:U})}}):void 0};pg.prototype.touchcancel=function(){this.reset()};pg.prototype.enable=function(){this._enabled=!0};pg.prototype.disable=function(){this._enabled=!1;this.reset()};pg.prototype.isEnabled=function(){return this._enabled};pg.prototype.isActive=function(){return this._active};
var Xf=function(U){this.reset();this._clickTolerance=U.clickTolerance||1};Xf.prototype.reset=function(){this._moved=this._active=!1;delete this._lastPoint;delete this._eventButton};Xf.prototype._correctButton=function(U,X){return!1};Xf.prototype._move=function(U,X){return{}};Xf.prototype.mousedown=function(U,X){if(!this._lastPoint){var W=La.mouseButton(U);this._correctButton(U,W)&&(this._lastPoint=X,this._eventButton=W)}};Xf.prototype.mousemoveWindow=function(U,X){var W=this._lastPoint;if(W&&(U.preventDefault(),
this._moved||!(X.dist(W)<this._clickTolerance)))return this._moved=!0,this._lastPoint=X,this._move(W,X)};Xf.prototype.mouseupWindow=function(U){La.mouseButton(U)===this._eventButton&&(this._moved&&La.suppressClick(),this.reset())};Xf.prototype.enable=function(){this._enabled=!0};Xf.prototype.disable=function(){this._enabled=!1;this.reset()};Xf.prototype.isEnabled=function(){return this._enabled};Xf.prototype.isActive=function(){return this._active};var Oh=function(U){function X(){U.apply(this,arguments)}
return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.mousedown=function(W,da){U.prototype.mousedown.call(this,W,da);this._lastPoint&&(this._active=!0)},X.prototype._correctButton=function(W,da){return 0===da&&!W.ctrlKey},X.prototype._move=function(W,da){return{around:da,panDelta:da.sub(W)}},X}(Xf),rj=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype._correctButton=
function(W,da){return 0===da&&W.ctrlKey||2===da},X.prototype._move=function(W,da){if(W=.8*(da.x-W.x))return this._active=!0,{bearingDelta:W}},X.prototype.contextmenu=function(W){W.preventDefault()},X}(Xf),Si=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype._correctButton=function(W,da){return 0===da&&W.ctrlKey||2===da},X.prototype._move=function(W,da){if(W=-.5*(da.y-W.y))return this._active=!0,{pitchDelta:W}},
X.prototype.contextmenu=function(W){W.preventDefault()},X}(Xf),Yf=function(U){this._minTouches=1;this._clickTolerance=U.clickTolerance||1;this.reset()};Yf.prototype.reset=function(){this._active=!1;this._touches={};this._sum=new a.Point(0,0)};Yf.prototype.touchstart=function(U,X,W){return this._calculateTransform(U,X,W)};Yf.prototype.touchmove=function(U,X,W){if(this._active)return U.preventDefault(),this._calculateTransform(U,X,W)};Yf.prototype.touchend=function(U,X,W){this._calculateTransform(U,
X,W);this._active&&W.length<this._minTouches&&this.reset()};Yf.prototype.touchcancel=function(){this.reset()};Yf.prototype._calculateTransform=function(U,X,W){0<W.length&&(this._active=!0);W=ha(W,X);U=new a.Point(0,0);var da=new a.Point(0,0);X=0;for(var xa in W){var Ka=W[xa],Wa=this._touches[xa];Wa&&(U._add(Ka),da._add(Ka.sub(Wa)),X++,W[xa]=Ka)}if(this._touches=W,!(X<this._minTouches)&&da.mag())if(xa=da.div(X),this._sum._add(xa),!(this._sum.mag()<this._clickTolerance))return{around:U.div(X),panDelta:xa}};
Yf.prototype.enable=function(){this._enabled=!0};Yf.prototype.disable=function(){this._enabled=!1;this.reset()};Yf.prototype.isEnabled=function(){return this._enabled};Yf.prototype.isActive=function(){return this._active};var of=function(){this.reset()};of.prototype.reset=function(){this._active=!1;delete this._firstTwoTouches};of.prototype._start=function(U){};of.prototype._move=function(U,X,W){return{}};of.prototype.touchstart=function(U,X,W){this._firstTwoTouches||2>W.length||(this._firstTwoTouches=
[W[0].identifier,W[1].identifier],this._start([X[0],X[1]]))};of.prototype.touchmove=function(U,X,W){if(this._firstTwoTouches){U.preventDefault();var da=this._firstTwoTouches,xa=da[1];da=la(W,X,da[0]);X=la(W,X,xa);if(da&&X)return W=this._aroundCenter?null:da.add(X).div(2),this._move([da,X],W,U)}};of.prototype.touchend=function(U,X,W){if(this._firstTwoTouches){var da=this._firstTwoTouches;U=da[1];da=la(W,X,da[0]);X=la(W,X,U);da&&X||(this._active&&La.suppressClick(),this.reset())}};of.prototype.touchcancel=
function(){this.reset()};of.prototype.enable=function(U){this._enabled=!0;this._aroundCenter=!!U&&"center"===U.around};of.prototype.disable=function(){this._enabled=!1;this.reset()};of.prototype.isEnabled=function(){return this._enabled};of.prototype.isActive=function(){return this._active};var si=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.reset=function(){U.prototype.reset.call(this);delete this._distance;
delete this._startDistance},X.prototype._start=function(W){this._startDistance=this._distance=W[0].dist(W[1])},X.prototype._move=function(W,da){var xa=this._distance;if(this._distance=W[0].dist(W[1]),this._active||!(.1>Math.abs(Math.log(this._distance/this._startDistance)/Math.LN2)))return this._active=!0,{zoomDelta:Math.log(this._distance/xa)/Math.LN2,pinchAround:da}},X}(of),Zf=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=
X,X.prototype.reset=function(){U.prototype.reset.call(this);delete this._minDiameter;delete this._startVector;delete this._vector},X.prototype._start=function(W){this._startVector=this._vector=W[0].sub(W[1]);this._minDiameter=W[0].dist(W[1])},X.prototype._move=function(W,da){var xa=this._vector;if(this._vector=W[0].sub(W[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:180*this._vector.angleWith(xa)/Math.PI,pinchAround:da}},X.prototype._isBelowThreshold=
function(W){this._minDiameter=Math.min(this._minDiameter,W.mag());var da=25/(Math.PI*this._minDiameter)*360;W=180*W.angleWith(this._startVector)/Math.PI;return Math.abs(W)<da},X}(of),sj=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.reset=function(){U.prototype.reset.call(this);this._valid=void 0;delete this._firstMove;delete this._lastPoints},X.prototype._start=function(W){this._lastPoints=W;ua(W[0].sub(W[1]))&&
(this._valid=!1)},X.prototype._move=function(W,da,xa){da=W[0].sub(this._lastPoints[0]);var Ka=W[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(da,Ka,xa.timeStamp),this._valid)return this._lastPoints=W,this._active=!0,{pitchDelta:(da.y+Ka.y)/2*-.5}},X.prototype.gestureBeginsVertically=function(W,da,xa){if(void 0!==this._valid)return this._valid;var Ka=2<=W.mag(),Wa=2<=da.mag();if(Ka||Wa){if(!Ka||!Wa)return void 0===this._firstMove&&(this._firstMove=xa),100>xa-this._firstMove&&
void 0;xa=0<W.y==0<da.y;return ua(W)&&ua(da)&&xa}},X}(of),sh=function(){this._panStep=100;this._bearingStep=15;this._pitchStep=10};sh.prototype.reset=function(){this._active=!1};sh.prototype.keydown=function(U){var X=this;if(!(U.altKey||U.ctrlKey||U.metaKey)){var W=0,da=0,xa=0,Ka=0,Wa=0;switch(U.keyCode){case 61:case 107:case 171:case 187:W=1;break;case 189:case 109:case 173:W=-1;break;case 37:U.shiftKey?da=-1:(U.preventDefault(),Ka=-1);break;case 39:U.shiftKey?da=1:(U.preventDefault(),Ka=1);break;
case 38:U.shiftKey?xa=1:(U.preventDefault(),Wa=-1);break;case 40:U.shiftKey?xa=-1:(U.preventDefault(),Wa=1);break;default:return}return{cameraAnimation:function(fb){var Fb=fb.getZoom();fb.easeTo({duration:300,easeId:"keyboardHandler",easing:na,zoom:W?Math.round(Fb)+W*(U.shiftKey?2:1):Fb,bearing:fb.getBearing()+da*X._bearingStep,pitch:fb.getPitch()+xa*X._pitchStep,offset:[-Ka*X._panStep,-Wa*X._panStep],center:fb.getCenter()},{originalEvent:U})}}}};sh.prototype.enable=function(){this._enabled=!0};sh.prototype.disable=
function(){this._enabled=!1;this.reset()};sh.prototype.isEnabled=function(){return this._enabled};sh.prototype.isActive=function(){return this._active};var Ff=function(U,X){this._map=U;this._el=U.getCanvasContainer();this._handler=X;this._delta=0;this._defaultZoomRate=.01;this._wheelZoomRate=1/450;a.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ff.prototype.setZoomRate=function(U){this._defaultZoomRate=U};Ff.prototype.setWheelZoomRate=function(U){this._wheelZoomRate=
U};Ff.prototype.isEnabled=function(){return!!this._enabled};Ff.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout};Ff.prototype.isZooming=function(){return!!this._zooming};Ff.prototype.enable=function(U){this.isEnabled()||(this._enabled=!0,this._aroundCenter=U&&"center"===U.around)};Ff.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)};Ff.prototype.wheel=function(U){if(this.isEnabled()){var X=U.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*U.deltaY:
U.deltaY,W=a.browser.now(),da=W-(this._lastWheelEventTime||0);this._lastWheelEventTime=W;0!==X&&0==X%4.000244140625?this._type="wheel":0!==X&&4>Math.abs(X)?this._type="trackpad":400<da?(this._type=null,this._lastValue=X,this._timeout=setTimeout(this._onTimeout,40,U)):this._type||(this._type=200>Math.abs(da*X)?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,X+=this._lastValue));U.shiftKey&&X&&(X/=4);this._type&&(this._lastWheelEvent=U,this._delta-=X,this._active||
this._start(U));U.preventDefault()}};Ff.prototype._onTimeout=function(U){this._type="wheel";this._delta-=this._lastValue;this._active||this._start(U)};Ff.prototype._start=function(U){this._delta&&(this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout),U=La.mousePos(this._el,U),this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(U)),this._aroundPoint=
this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame()))};Ff.prototype.renderFrame=function(){return this._onScrollFrame()};Ff.prototype._onScrollFrame=function(){var U=this;if(this._frameId&&(this._frameId=null,this.isActive())){var X=this._map.transform;if(0!==this._delta){var W=2/(1+Math.exp(-Math.abs(this._delta*("wheel"===this._type&&4.000244140625<Math.abs(this._delta)?this._wheelZoomRate:this._defaultZoomRate))));0>this._delta&&
0!==W&&(W=1/W);var da="number"==typeof this._targetZoom?X.zoomScale(this._targetZoom):X.scale;this._targetZoom=Math.min(X.maxZoom,Math.max(X.minZoom,X.scaleZoom(da*W)));"wheel"===this._type&&(this._startZoom=X.zoom,this._easing=this._smoothOutEasing(200));this._delta=0}var xa="number"==typeof this._targetZoom?this._targetZoom:X.zoom;var Ka=this._startZoom,Wa=this._easing;W=!1;"wheel"===this._type&&Ka&&Wa?(da=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),Wa=Wa(da),xa=a.number(Ka,xa,Wa),
1>da?this._frameId||(this._frameId=!0):W=!0):W=!0;return this._active=!0,W&&(this._active=!1,this._finishTimeout=setTimeout(function(){U._zooming=!1;U._handler._triggerRenderFrame();delete U._targetZoom;delete U._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!W,zoomDelta:xa-X.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}};Ff.prototype._smoothOutEasing=function(U){var X=a.ease;if(this._prevEase){X=this._prevEase;var W=(a.browser.now()-X.start)/X.duration;X=X.easing(W+.01)-
X.easing(W);X=.27/Math.sqrt(X*X+1E-4)*.01;X=a.bezier(X,Math.sqrt(.0729-X*X),.25,1)}return this._prevEase={start:a.browser.now(),duration:U,easing:X},X};Ff.prototype.reset=function(){this._active=!1};var Ph=function(U,X){this._clickZoom=U;this._tapZoom=X};Ph.prototype.enable=function(){this._clickZoom.enable();this._tapZoom.enable()};Ph.prototype.disable=function(){this._clickZoom.disable();this._tapZoom.disable()};Ph.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()};
Ph.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Yg=function(){this.reset()};Yg.prototype.reset=function(){this._active=!1};Yg.prototype.dblclick=function(U,X){return U.preventDefault(),{cameraAnimation:function(W){W.easeTo({duration:300,zoom:W.getZoom()+(U.shiftKey?-1:1),around:W.unproject(X)},{originalEvent:U})}}};Yg.prototype.enable=function(){this._enabled=!0};Yg.prototype.disable=function(){this._enabled=!1;this.reset()};Yg.prototype.isEnabled=
function(){return this._enabled};Yg.prototype.isActive=function(){return this._active};var fg=function(){this._tap=new rh({numTouches:1,numTaps:1});this.reset()};fg.prototype.reset=function(){this._active=!1;delete this._swipePoint;delete this._swipeTouch;delete this._tapTime;this._tap.reset()};fg.prototype.touchstart=function(U,X,W){this._swipePoint||(this._tapTime&&500<U.timeStamp-this._tapTime&&this.reset(),this._tapTime?0<W.length&&(this._swipePoint=X[0],this._swipeTouch=W[0].identifier):this._tap.touchstart(U,
X,W))};fg.prototype.touchmove=function(U,X,W){if(this._tapTime){if(this._swipePoint&&W[0].identifier===this._swipeTouch)return X=X[0],W=X.y-this._swipePoint.y,this._swipePoint=X,U.preventDefault(),this._active=!0,{zoomDelta:W/128}}else this._tap.touchmove(U,X,W)};fg.prototype.touchend=function(U,X,W){this._tapTime?this._swipePoint&&0===W.length&&this.reset():this._tap.touchend(U,X,W)&&(this._tapTime=U.timeStamp)};fg.prototype.touchcancel=function(){this.reset()};fg.prototype.enable=function(){this._enabled=
!0};fg.prototype.disable=function(){this._enabled=!1;this.reset()};fg.prototype.isEnabled=function(){return this._enabled};fg.prototype.isActive=function(){return this._active};var Mg=function(U,X,W){this._el=U;this._mousePan=X;this._touchPan=W};Mg.prototype.enable=function(U){this._inertiaOptions=U||{};this._mousePan.enable();this._touchPan.enable();this._el.classList.add("mapboxgl-touch-drag-pan")};Mg.prototype.disable=function(){this._mousePan.disable();this._touchPan.disable();this._el.classList.remove("mapboxgl-touch-drag-pan")};
Mg.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()};Mg.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Zg=function(U,X,W){this._pitchWithRotate=U.pitchWithRotate;this._mouseRotate=X;this._mousePitch=W};Zg.prototype.enable=function(){this._mouseRotate.enable();this._pitchWithRotate&&this._mousePitch.enable()};Zg.prototype.disable=function(){this._mouseRotate.disable();this._mousePitch.disable()};Zg.prototype.isEnabled=
function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())};Zg.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ag=function(U,X,W,da){this._el=U;this._touchZoom=X;this._touchRotate=W;this._tapDragZoom=da;this._rotationDisabled=!1;this._enabled=!0};Ag.prototype.enable=function(U){this._touchZoom.enable(U);this._rotationDisabled||this._touchRotate.enable(U);this._tapDragZoom.enable();this._el.classList.add("mapboxgl-touch-zoom-rotate")};
Ag.prototype.disable=function(){this._touchZoom.disable();this._touchRotate.disable();this._tapDragZoom.disable();this._el.classList.remove("mapboxgl-touch-zoom-rotate")};Ag.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()};Ag.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()};Ag.prototype.disableRotation=function(){this._rotationDisabled=
!0;this._touchRotate.disable()};Ag.prototype.enableRotation=function(){this._rotationDisabled=!1;this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Ti=function(U){return U.zoom||U.drag||U.pitch||U.rotate},Zj=function(U){function X(){U.apply(this,arguments)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X}(a.Event),Vd=function(U,X){this._map=U;this._el=this._map.getCanvasContainer();this._handlers=[];this._handlersById={};this._changes=[];this._inertia=
new qh(U);this._bearingSnap=X.bearingSnap;this._previousActiveHandlers={};this._eventsInProgress={};this._addDefaultHandlers(X);a.bindAll(["handleEvent","handleWindowEvent"],this);U=this._el;this._listeners=[[U,"touchstart",{passive:!1}],[U,"touchmove",{passive:!1}],[U,"touchend",void 0],[U,"touchcancel",void 0],[U,"mousedown",void 0],[U,"mousemove",void 0],[U,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[U,"mouseover",void 0],[U,"mouseout",void 0],
[U,"dblclick",void 0],[U,"click",void 0],[U,"keydown",{capture:!1}],[U,"keyup",void 0],[U,"wheel",{passive:!1}],[U,"contextmenu",void 0],[a.window,"blur",void 0]];U=0;for(X=this._listeners;U<X.length;U+=1){var W=X[U],da=W[0];La.addEventListener(da,W[1],da===a.window.document?this.handleWindowEvent:this.handleEvent,W[2])}};Vd.prototype.destroy=function(){for(var U=0,X=this._listeners;U<X.length;U+=1){var W=X[U],da=W[0];La.removeEventListener(da,W[1],da===a.window.document?this.handleWindowEvent:this.handleEvent,
W[2])}};Vd.prototype._addDefaultHandlers=function(U){var X=this._map,W=X.getCanvasContainer();this._add("mapEvent",new nf(X,U));var da=X.boxZoom=new Jf(X,U);this._add("boxZoom",da);da=new pg;var xa=new Yg;X.doubleClickZoom=new Ph(xa,da);this._add("tapZoom",da);this._add("clickZoom",xa);da=new fg;this._add("tapDragZoom",da);xa=X.touchPitch=new sj;this._add("touchPitch",xa);xa=new rj(U);var Ka=new Si(U);X.dragRotate=new Zg(U,xa,Ka);this._add("mouseRotate",xa,["mousePitch"]);this._add("mousePitch",Ka,
["mouseRotate"]);xa=new Oh(U);Ka=new Yf(U);X.dragPan=new Mg(W,xa,Ka);this._add("mousePan",xa);this._add("touchPan",Ka,["touchZoom","touchRotate"]);xa=new Zf;Ka=new si;X.touchZoomRotate=new Ag(W,Ka,xa,da);this._add("touchRotate",xa,["touchPan","touchZoom"]);this._add("touchZoom",Ka,["touchPan","touchRotate"]);W=X.scrollZoom=new Ff(X,this);this._add("scrollZoom",W,["mousePan"]);W=X.keyboard=new sh;this._add("keyboard",W);this._add("blockableMapEvent",new og(X));W=0;for(da="boxZoom doubleClickZoom tapDragZoom touchPitch dragRotate dragPan touchZoomRotate scrollZoom keyboard".split(" ");W<
da.length;W+=1)xa=da[W],U.interactive&&U[xa]&&X[xa].enable(U[xa])};Vd.prototype._add=function(U,X,W){this._handlers.push({handlerName:U,handler:X,allowed:W});this._handlersById[U]=X};Vd.prototype.stop=function(){if(!this._updatingCamera){for(var U=0,X=this._handlers;U<X.length;U+=1)X[U].handler.reset();this._inertia.clear();this._fireEvents({},{});this._changes=[]}};Vd.prototype.isActive=function(){for(var U=0,X=this._handlers;U<X.length;U+=1)if(X[U].handler.isActive())return!0;return!1};Vd.prototype.isZooming=
function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()};Vd.prototype.isRotating=function(){return!!this._eventsInProgress.rotate};Vd.prototype.isMoving=function(){return!!Ti(this._eventsInProgress)||this.isZooming()};Vd.prototype._blockedByActive=function(U,X,W){for(var da in U)if(da!==W&&(!X||0>X.indexOf(da)))return!0;return!1};Vd.prototype.handleWindowEvent=function(U){this.handleEvent(U,U.type+"Window")};Vd.prototype._getMapTouches=function(U){for(var X=[],W=0;W<U.length;W+=
1){var da=U[W];this._el.contains(da.target)&&X.push(da)}return X};Vd.prototype.handleEvent=function(U,X){if("blur"!==U.type){this._updatingCamera=!0;for(var W="renderFrame"===U.type?void 0:U,da={needsRenderFrame:!1},xa={},Ka={},Wa=U.touches?this._getMapTouches(U.touches):void 0,fb=Wa?La.touchPos(this._el,Wa):La.mousePos(this._el,U),Fb=0,Ob=this._handlers;Fb<Ob.length;Fb+=1){var Pb=Ob[Fb],uc=Pb.handlerName,sc=Pb.handler;Pb=Pb.allowed;if(sc.isEnabled()){var hc=void 0;this._blockedByActive(Ka,Pb,uc)?
sc.reset():sc[X||U.type]&&(hc=sc[X||U.type](U,fb,Wa),this.mergeHandlerResult(da,xa,hc,uc,W),hc&&hc.needsRenderFrame&&this._triggerRenderFrame());(hc||sc.isActive())&&(Ka[uc]=sc)}}U={};for(var rc in this._previousActiveHandlers)Ka[rc]||(U[rc]=W);this._previousActiveHandlers=Ka;(Object.keys(U).length||wa(da))&&(this._changes.push([da,xa,U]),this._triggerRenderFrame());(Object.keys(Ka).length||wa(da))&&this._map._stop(!0);this._updatingCamera=!1;(W=da.cameraAnimation)&&(this._inertia.clear(),this._fireEvents({},
{}),this._changes=[],W(this._map))}else this.stop()};Vd.prototype.mergeHandlerResult=function(U,X,W,da,xa){W&&(a.extend(U,W),U={handlerName:da,originalEvent:W.originalEvent||xa},void 0!==W.zoomDelta&&(X.zoom=U),void 0!==W.panDelta&&(X.drag=U),void 0!==W.pitchDelta&&(X.pitch=U),void 0!==W.bearingDelta&&(X.rotate=U))};Vd.prototype._applyChanges=function(){for(var U={},X={},W={},da=0,xa=this._changes;da<xa.length;da+=1){var Ka=xa[da],Wa=Ka[0],fb=Ka[1];Ka=Ka[2];Wa.panDelta&&(U.panDelta=(U.panDelta||new a.Point(0,
0))._add(Wa.panDelta));Wa.zoomDelta&&(U.zoomDelta=(U.zoomDelta||0)+Wa.zoomDelta);Wa.bearingDelta&&(U.bearingDelta=(U.bearingDelta||0)+Wa.bearingDelta);Wa.pitchDelta&&(U.pitchDelta=(U.pitchDelta||0)+Wa.pitchDelta);void 0!==Wa.around&&(U.around=Wa.around);void 0!==Wa.pinchAround&&(U.pinchAround=Wa.pinchAround);Wa.noInertia&&(U.noInertia=Wa.noInertia);a.extend(X,fb);a.extend(W,Ka)}this._updateMapTransform(U,X,W);this._changes=[]};Vd.prototype._updateMapTransform=function(U,X,W){var da=this._map,xa=da.transform;
if(!wa(U))return this._fireEvents(X,W);var Ka=U.panDelta,Wa=U.zoomDelta,fb=U.bearingDelta,Fb=U.pitchDelta,Ob=U.around,Pb=U.pinchAround;void 0!==Pb&&(Ob=Pb);da._stop(!0);Ob=Ob||da.transform.centerPoint;da=xa.pointLocation(Ka?Ob.sub(Ka):Ob);fb&&(xa.bearing+=fb);Fb&&(xa.pitch+=Fb);Wa&&(xa.zoom+=Wa);xa.setLocationAtPoint(da,Ob);this._map._update();U.noInertia||this._inertia.record(U);this._fireEvents(X,W)};Vd.prototype._fireEvents=function(U,X){var W=this,da=Ti(this._eventsInProgress),xa=Ti(U),Ka={};
for(Pb in U)this._eventsInProgress[Pb]||(Ka[Pb+"start"]=U[Pb].originalEvent),this._eventsInProgress[Pb]=U[Pb];for(var Wa in!da&&xa&&this._fireEvent("movestart",xa.originalEvent),Ka)this._fireEvent(Wa,Ka[Wa]);for(var fb in U.rotate&&(this._bearingChanged=!0),xa&&this._fireEvent("move",xa.originalEvent),U)this._fireEvent(fb,U[fb].originalEvent);var Fb;U={};for(var Ob in this._eventsInProgress){var Pb=this._eventsInProgress[Ob];Ka=Pb.handlerName;Pb=Pb.originalEvent;this._handlersById[Ka].isActive()||
(delete this._eventsInProgress[Ob],U[Ob+"end"]=Fb=X[Ka]||Pb)}for(var uc in U)this._fireEvent(uc,U[uc]);X=Ti(this._eventsInProgress);!da&&!xa||X||(this._updatingCamera=!0,da=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),xa=function(sc){return 0!==sc&&-W._bearingSnap<sc&&sc<W._bearingSnap},da?(xa(da.bearing||this._map.getBearing())&&(da.bearing=0),this._map.easeTo(da,{originalEvent:Fb})):(this._map.fire(new a.Event("moveend",{originalEvent:Fb})),xa(this._map.getBearing())&&this._map.resetNorth()),
this._updatingCamera=this._bearingChanged=!1)};Vd.prototype._fireEvent=function(U,X){this._map.fire(new a.Event(U,X?{originalEvent:X}:{}))};Vd.prototype._triggerRenderFrame=function(){var U=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(X){delete U._frameId;U.handleEvent(new Zj("renderFrame",{timeStamp:X}));U._applyChanges()}))};var yk=function(U){function X(W,da){U.call(this);this._zooming=this._moving=!1;this.transform=W;this._bearingSnap=da.bearingSnap;a.bindAll(["_renderFrameCallback"],
this)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},X.prototype.setCenter=function(W,da){return this.jumpTo({center:W},da)},X.prototype.panBy=function(W,da,xa){return W=a.Point.convert(W).mult(-1),this.panTo(this.transform.center,a.extend({offset:W},da),xa)},X.prototype.panTo=function(W,da,xa){return this.easeTo(a.extend({center:W},da),xa)},X.prototype.getZoom=
function(){return this.transform.zoom},X.prototype.setZoom=function(W,da){return this.jumpTo({zoom:W},da),this},X.prototype.zoomTo=function(W,da,xa){return this.easeTo(a.extend({zoom:W},da),xa)},X.prototype.zoomIn=function(W,da){return this.zoomTo(this.getZoom()+1,W,da),this},X.prototype.zoomOut=function(W,da){return this.zoomTo(this.getZoom()-1,W,da),this},X.prototype.getBearing=function(){return this.transform.bearing},X.prototype.setBearing=function(W,da){return this.jumpTo({bearing:W},da),this},
X.prototype.getPadding=function(){return this.transform.padding},X.prototype.setPadding=function(W,da){return this.jumpTo({padding:W},da),this},X.prototype.rotateTo=function(W,da,xa){return this.easeTo(a.extend({bearing:W},da),xa)},X.prototype.resetNorth=function(W,da){return this.rotateTo(0,a.extend({duration:1E3},W),da),this},X.prototype.resetNorthPitch=function(W,da){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1E3},W),da),this},X.prototype.snapToNorth=function(W,da){return Math.abs(this.getBearing())<
this._bearingSnap?this.resetNorth(W,da):this},X.prototype.getPitch=function(){return this.transform.pitch},X.prototype.setPitch=function(W,da){return this.jumpTo({pitch:W},da),this},X.prototype.cameraForBounds=function(W,da){return W=a.LngLatBounds.convert(W),this._cameraForBoxAndBearing(W.getNorthWest(),W.getSouthEast(),0,da)},X.prototype._cameraForBoxAndBearing=function(W,da,xa,Ka){var Wa={top:0,bottom:0,right:0,left:0};if("number"==typeof(Ka=a.extend({padding:Wa,offset:[0,0],maxZoom:this.transform.maxZoom},
Ka)).padding){var fb=Ka.padding;Ka.padding={top:fb,bottom:fb,right:fb,left:fb}}Ka.padding=a.extend(Wa,Ka.padding);Wa=this.transform;fb=Wa.padding;W=Wa.project(a.LngLat.convert(W));da=Wa.project(a.LngLat.convert(da));var Fb=W.rotate(-xa*Math.PI/180),Ob=da.rotate(-xa*Math.PI/180),Pb=new a.Point(Math.max(Fb.x,Ob.x),Math.max(Fb.y,Ob.y));Fb=new a.Point(Math.min(Fb.x,Ob.x),Math.min(Fb.y,Ob.y));Fb=Pb.sub(Fb);Pb=(Wa.width-(fb.left+fb.right+Ka.padding.left+Ka.padding.right))/Fb.x;fb=(Wa.height-(fb.top+fb.bottom+
Ka.padding.top+Ka.padding.bottom))/Fb.y;if(!(0>fb||0>Pb))return fb=Math.min(Wa.scaleZoom(Wa.scale*Math.min(Pb,fb)),Ka.maxZoom),Pb=a.Point.convert(Ka.offset),Ka=(new a.Point(Pb.x+(Ka.padding.left-Ka.padding.right)/2,Pb.y+(Ka.padding.top-Ka.padding.bottom)/2)).mult(Wa.scale/Wa.zoomScale(fb)),{center:Wa.unproject(W.add(da).div(2).sub(Ka)),zoom:fb,bearing:xa};a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},X.prototype.fitBounds=function(W,da,xa){return this._fitInternal(this.cameraForBounds(W,
da),da,xa)},X.prototype.fitScreenCoordinates=function(W,da,xa,Ka,Wa){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(W)),this.transform.pointLocation(a.Point.convert(da)),xa,Ka),Ka,Wa)},X.prototype._fitInternal=function(W,da,xa){return W?(delete (da=a.extend(W,da)).padding,da.linear?this.easeTo(da,xa):this.flyTo(da,xa)):this},X.prototype.jumpTo=function(W,da){this.stop();var xa=this.transform,Ka=!1,Wa=!1,fb=!1;return"zoom"in W&&xa.zoom!==+W.zoom&&
(Ka=!0,xa.zoom=+W.zoom),void 0!==W.center&&(xa.center=a.LngLat.convert(W.center)),"bearing"in W&&xa.bearing!==+W.bearing&&(Wa=!0,xa.bearing=+W.bearing),"pitch"in W&&xa.pitch!==+W.pitch&&(fb=!0,xa.pitch=+W.pitch),null==W.padding||xa.isPaddingEqual(W.padding)||(xa.padding=W.padding),this.fire(new a.Event("movestart",da)).fire(new a.Event("move",da)),Ka&&this.fire(new a.Event("zoomstart",da)).fire(new a.Event("zoom",da)).fire(new a.Event("zoomend",da)),Wa&&this.fire(new a.Event("rotatestart",da)).fire(new a.Event("rotate",
da)).fire(new a.Event("rotateend",da)),fb&&this.fire(new a.Event("pitchstart",da)).fire(new a.Event("pitch",da)).fire(new a.Event("pitchend",da)),this.fire(new a.Event("moveend",da))},X.prototype.easeTo=function(W,da){var xa=this;this._stop(!1,W.easeId);(!1===(W=a.extend({offset:[0,0],duration:500,easing:a.ease},W)).animate||!W.essential&&a.browser.prefersReducedMotion)&&(W.duration=0);var Ka=this.transform,Wa=this.getZoom(),fb=this.getBearing(),Fb=this.getPitch(),Ob=this.getPadding(),Pb="zoom"in
W?+W.zoom:Wa,uc="bearing"in W?this._normalizeBearing(W.bearing,fb):fb,sc="pitch"in W?+W.pitch:Fb,hc="padding"in W?W.padding:Ka.padding,rc=a.Point.convert(W.offset),oc=Ka.centerPoint.add(rc),Nb=Ka.pointLocation(oc),jc=a.LngLat.convert(W.center||Nb);this._normalizeCenter(jc);var Uc,jd,qd=Ka.project(Nb),Vc=Ka.project(jc).sub(qd),td=Ka.zoomScale(Pb-Wa);W.around&&(Uc=a.LngLat.convert(W.around),jd=Ka.locationPoint(Uc));Nb={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};
return this._zooming=this._zooming||Pb!==Wa,this._rotating=this._rotating||fb!==uc,this._pitching=this._pitching||sc!==Fb,this._padding=!Ka.isPaddingEqual(hc),this._easeId=W.easeId,this._prepareEase(da,W.noMoveStart,Nb),clearTimeout(this._easeEndTimeoutID),this._ease(function(nd){if(xa._zooming&&(Ka.zoom=a.number(Wa,Pb,nd)),xa._rotating&&(Ka.bearing=a.number(fb,uc,nd)),xa._pitching&&(Ka.pitch=a.number(Fb,sc,nd)),xa._padding&&(Ka.interpolatePadding(Ob,hc,nd),oc=Ka.centerPoint.add(rc)),Uc)Ka.setLocationAtPoint(Uc,
jd);else{var Gd=Ka.zoomScale(Ka.zoom-Wa);nd=Ka.unproject(qd.add(Vc.mult(nd*Math.pow(Pb>Wa?Math.min(2,td):Math.max(.5,td),1-nd))).mult(Gd));Ka.setLocationAtPoint(Ka.renderWorldCopies?nd.wrap():nd,oc)}xa._fireMoveEvents(da)},function(nd){xa._afterEase(da,nd)},W),this},X.prototype._prepareEase=function(W,da,xa){void 0===xa&&(xa={});this._moving=!0;da||xa.moving||this.fire(new a.Event("movestart",W));this._zooming&&!xa.zooming&&this.fire(new a.Event("zoomstart",W));this._rotating&&!xa.rotating&&this.fire(new a.Event("rotatestart",
W));this._pitching&&!xa.pitching&&this.fire(new a.Event("pitchstart",W))},X.prototype._fireMoveEvents=function(W){this.fire(new a.Event("move",W));this._zooming&&this.fire(new a.Event("zoom",W));this._rotating&&this.fire(new a.Event("rotate",W));this._pitching&&this.fire(new a.Event("pitch",W))},X.prototype._afterEase=function(W,da){if(!this._easeId||!da||this._easeId!==da){delete this._easeId;da=this._zooming;var xa=this._rotating,Ka=this._pitching;this._padding=this._pitching=this._rotating=this._zooming=
this._moving=!1;da&&this.fire(new a.Event("zoomend",W));xa&&this.fire(new a.Event("rotateend",W));Ka&&this.fire(new a.Event("pitchend",W));this.fire(new a.Event("moveend",W))}},X.prototype.flyTo=function(W,da){function xa(oe){oe=(Hd*Hd-Gd*Gd+(oe?-1:1)*he*he*zd*zd)/(2*(oe?Hd:Gd)*he*zd);return Math.log(Math.sqrt(oe*oe+1)-oe)}function Ka(oe){return(Math.exp(oe)+Math.exp(-oe))/2}var Wa=this;if(!W.essential&&a.browser.prefersReducedMotion)return W=a.pick(W,["center","zoom","bearing","pitch","around"]),
this.jumpTo(W,da);this.stop();W=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},W);var fb=this.transform,Fb=this.getZoom(),Ob=this.getBearing(),Pb=this.getPitch(),uc=this.getPadding(),sc="zoom"in W?a.clamp(+W.zoom,fb.minZoom,fb.maxZoom):Fb,hc="bearing"in W?this._normalizeBearing(W.bearing,Ob):Ob,rc="pitch"in W?+W.pitch:Pb,oc="padding"in W?W.padding:fb.padding,Nb=fb.zoomScale(sc-Fb),jc=a.Point.convert(W.offset),Uc=fb.centerPoint.add(jc),jd=fb.pointLocation(Uc),qd=a.LngLat.convert(W.center||
jd);this._normalizeCenter(qd);var Vc=fb.project(jd),td=fb.project(qd).sub(Vc),nd=W.curve,Gd=Math.max(fb.width,fb.height),Hd=Gd/Nb,zd=td.mag();"minZoom"in W&&(Nb=a.clamp(Math.min(W.minZoom,Fb,sc),fb.minZoom,fb.maxZoom),Nb=Gd/fb.zoomScale(Nb-Fb),nd=Math.sqrt(Nb/zd*2));var he=nd*nd,ee=xa(0),Ce=function(oe){return Ka(ee)/Ka(ee+nd*oe)},De=function(oe){var Pe=Ka(ee);oe=ye=ee+nd*oe;return Gd*((Pe*((Math.exp(oe)-Math.exp(-oe))/2/Ka(ye))-(Math.exp(ee)-Math.exp(-ee))/2)/he)/zd;var ye},ze=(xa(1)-ee)/nd;if(1E-6>
Math.abs(zd)||!isFinite(ze)){if(1E-6>Math.abs(Gd-Hd))return this.easeTo(W,da);var Wd=Hd<Gd?-1:1;ze=Math.abs(Math.log(Hd/Gd))/nd;De=function(){return 0};Ce=function(oe){return Math.exp(Wd*nd*oe)}}return W.duration="duration"in W?+W.duration:1E3*ze/("screenSpeed"in W?+W.screenSpeed/nd:+W.speed),W.maxDuration&&W.duration>W.maxDuration&&(W.duration=0),this._zooming=!0,this._rotating=Ob!==hc,this._pitching=rc!==Pb,this._padding=!fb.isPaddingEqual(oc),this._prepareEase(da,!1),this._ease(function(oe){var Pe=
oe*ze,ye=1/Ce(Pe);fb.zoom=1===oe?sc:Fb+fb.scaleZoom(ye);Wa._rotating&&(fb.bearing=a.number(Ob,hc,oe));Wa._pitching&&(fb.pitch=a.number(Pb,rc,oe));Wa._padding&&(fb.interpolatePadding(uc,oc,oe),Uc=fb.centerPoint.add(jc));oe=1===oe?qd:fb.unproject(Vc.add(td.mult(De(Pe))).mult(ye));fb.setLocationAtPoint(fb.renderWorldCopies?oe.wrap():oe,Uc);Wa._fireMoveEvents(da)},function(){return Wa._afterEase(da)},W),this},X.prototype.isEasing=function(){return!!this._easeFrameId},X.prototype.stop=function(){return this._stop()},
X.prototype._stop=function(W,da){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var xa=this._onEaseEnd;delete this._onEaseEnd;xa.call(this,da)}W||(W=this.handlers)&&W.stop();return this},X.prototype._ease=function(W,da,xa){!1===xa.animate||0===xa.duration?(W(1),da()):(this._easeStart=a.browser.now(),this._easeOptions=xa,this._onEaseFrame=W,this._onEaseEnd=da,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},
X.prototype._renderFrameCallback=function(){var W=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(W));1>W?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},X.prototype._normalizeBearing=function(W,da){W=a.wrap(W,-180,180);var xa=Math.abs(W-da);return Math.abs(W-360-da)<xa&&(W-=360),Math.abs(W+360-da)<xa&&(W+=360),W},X.prototype._normalizeCenter=function(W){var da=this.transform;da.renderWorldCopies&&
!da.lngRange&&(da=W.lng-da.center.lng,W.lng+=180<da?-360:-180>da?360:0)},X}(a.Evented),qg=function(U){void 0===U&&(U={});this.options=U;a.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};qg.prototype.getDefaultPosition=function(){return"bottom-right"};qg.prototype.onAdd=function(U){var X=this.options&&this.options.compact;return this._map=U,this._container=La.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=La.create("div","mapboxgl-ctrl-attrib-inner",this._container),
X&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===X&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container};qg.prototype.onRemove=function(){La.remove(this._container);this._map.off("styledata",this._updateData);this._map.off("sourcedata",this._updateData);this._map.off("moveend",
this._updateEditLink);this._map.off("resize",this._updateCompact);this._attribHTML=this._map=void 0};qg.prototype._updateEditLink=function(){var U=this._editLink;U||(U=this._editLink=this._container.querySelector(".mapbox-improve-map"));var X=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(U){var W=X.reduce(function(da,xa,Ka){return xa.value&&(da+=xa.key+"\x3d"+xa.value+(Ka<X.length-
1?"\x26":"")),da},"?");U.href=a.config.FEEDBACK_URL+"/"+W+(this._map._hash?this._map._hash.getHashString(!0):"");U.rel="noopener nofollow"}};qg.prototype._updateData=function(U){!U||"metadata"!==U.sourceDataType&&"style"!==U.dataType||(this._updateAttributions(),this._updateEditLink())};qg.prototype._updateAttributions=function(){if(this._map.style){var U=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?U=U.concat(this.options.customAttribution.map(function(xa){return"string"!=
typeof xa?"":xa})):"string"==typeof this.options.customAttribution&&U.push(this.options.customAttribution)),this._map.style.stylesheet){var X=this._map.style.stylesheet;this.styleOwner=X.owner;this.styleId=X.id}X=this._map.style.sourceCaches;for(var W in X){var da=X[W];da.used&&(da=da.getSource(),da.attribution&&0>U.indexOf(da.attribution)&&U.push(da.attribution))}U.sort(function(xa,Ka){return xa.length-Ka.length});W=(U=U.filter(function(xa,Ka){for(Ka+=1;Ka<U.length;Ka++)if(0<=U[Ka].indexOf(xa))return!1;
return!0})).join(" | ");W!==this._attribHTML&&(this._attribHTML=W,U.length?(this._innerContainer.innerHTML=W,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}};qg.prototype._updateCompact=function(){640>=this._map.getCanvasContainer().offsetWidth?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var $g=function(){a.bindAll(["_updateLogo"],this);a.bindAll(["_updateCompact"],
this)};$g.prototype.onAdd=function(U){this._map=U;this._container=La.create("div","mapboxgl-ctrl");U=La.create("a","mapboxgl-ctrl-logo");return U.target="_blank",U.rel="noopener nofollow",U.href="https://www.mapbox.com/",U.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),U.setAttribute("rel","noopener nofollow"),this._container.appendChild(U),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),
this._updateCompact(),this._container};$g.prototype.onRemove=function(){La.remove(this._container);this._map.off("sourcedata",this._updateLogo);this._map.off("resize",this._updateCompact)};$g.prototype.getDefaultPosition=function(){return"bottom-left"};$g.prototype._updateLogo=function(U){U&&"metadata"!==U.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")};$g.prototype._logoRequired=function(){if(this._map.style){var U=this._map.style.sourceCaches,X;for(X in U)if(U[X].getSource().mapbox_logo)return!0;
return!1}};$g.prototype._updateCompact=function(){var U=this._container.children;U.length&&(U=U[0],250>this._map.getCanvasContainer().offsetWidth?U.classList.add("mapboxgl-compact"):U.classList.remove("mapboxgl-compact"))};var th=function(){this._queue=[];this._id=0;this._currentlyRunning=this._cleared=!1};th.prototype.add=function(U){var X=++this._id;return this._queue.push({callback:U,id:X,cancelled:!1}),X};th.prototype.remove=function(U){var X=this._currentlyRunning,W=0;for(X=X?this._queue.concat(X):
this._queue;W<X.length;W+=1){var da=X[W];if(da.id===U)return void(da.cancelled=!0)}};th.prototype.run=function(U){void 0===U&&(U=0);var X=this._currentlyRunning=this._queue;this._queue=[];for(var W=0;W<X.length;W+=1){var da=X[W];if(!da.cancelled&&(da.callback(U),this._cleared))break}this._currentlyRunning=this._cleared=!1};th.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0);this._queue=[]};var Qh={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen",
"GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Rh=a.window.HTMLImageElement,Sh=a.window.HTMLElement,rg=a.window.ImageBitmap,
zk={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,
fadeDuration:300,crossSourceCollisions:!0},Ak=function(U){function X(da){var xa=this;if(null!=(da=a.extend({},zk,da)).minZoom&&null!=da.maxZoom&&da.minZoom>da.maxZoom)throw Error("maxZoom must be greater than or equal to minZoom");if(null!=da.minPitch&&null!=da.maxPitch&&da.minPitch>da.maxPitch)throw Error("maxPitch must be greater than or equal to minPitch");if(null!=da.minPitch&&0>da.minPitch)throw Error("minPitch must be greater than or equal to 0");if(null!=da.maxPitch&&60<da.maxPitch)throw Error("maxPitch must be less than or equal to 60");
var Ka=new Je(da.minZoom,da.maxZoom,da.minPitch,da.maxPitch,da.renderWorldCopies);if(U.call(this,Ka,da),this._interactive=da.interactive,this._maxTileCacheSize=da.maxTileCacheSize,this._failIfMajorPerformanceCaveat=da.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=da.preserveDrawingBuffer,this._antialias=da.antialias,this._trackResize=da.trackResize,this._bearingSnap=da.bearingSnap,this._refreshExpiredTiles=da.refreshExpiredTiles,this._fadeDuration=da.fadeDuration,this._crossSourceCollisions=
da.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=da.collectResourceTiming,this._renderTaskQueue=new th,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Qh,da.locale),this._requestManager=new a.RequestManager(da.transformRequest,da.accessToken),"string"==typeof da.container){if(this._container=a.window.document.getElementById(da.container),!this._container)throw Error("Container '"+da.container+"' not found.");}else{if(!(da.container instanceof Sh))throw Error("Invalid type: 'container' must be a String or HTMLElement.");
this._container=da.container}if(da.maxBounds&&this.setMaxBounds(da.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw Error("Failed to initialize WebGL.");this.on("move",function(){return xa._update(!1)});this.on("moveend",function(){return xa._update(!1)});this.on("zoom",function(){return xa._update(!0)});void 0!==a.window&&(a.window.addEventListener("online",this._onWindowOnline,
!1),a.window.addEventListener("resize",this._onWindowResize,!1));this.handlers=new Vd(this,da);(this._hash=da.hash&&(new Lg("string"==typeof da.hash&&da.hash||void 0)).addTo(this))&&this._hash._onHashChange()||(this.jumpTo({center:da.center,zoom:da.zoom,bearing:da.bearing,pitch:da.pitch}),da.bounds&&(this.resize(),this.fitBounds(da.bounds,a.extend({},da.fitBoundsOptions,{duration:0}))));this.resize();this._localIdeographFontFamily=da.localIdeographFontFamily;da.style&&this.setStyle(da.style,{localIdeographFontFamily:da.localIdeographFontFamily});
da.attributionControl&&this.addControl(new qg({customAttribution:da.customAttribution}));this.addControl(new $g,da.logoPosition);this.on("style.load",function(){xa.transform.unmodified&&xa.jumpTo(xa.style.stylesheet)});this.on("data",function(Wa){xa._update("style"===Wa.dataType);xa.fire(new a.Event(Wa.dataType+"data",Wa))});this.on("dataloading",function(Wa){xa.fire(new a.Event(Wa.dataType+"dataloading",Wa))})}U&&(X.__proto__=U);(X.prototype=Object.create(U&&U.prototype)).constructor=X;var W={showTileBoundaries:{configurable:!0},
showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return X.prototype._getMapId=function(){return this._mapId},X.prototype.addControl=function(da,xa){if(void 0===xa&&da.getDefaultPosition&&(xa=da.getDefaultPosition()),void 0===xa&&(xa="top-right"),!da||!da.onAdd)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));
var Ka=da.onAdd(this);this._controls.push(da);da=this._controlPositions[xa];return-1!==xa.indexOf("bottom")?da.insertBefore(Ka,da.firstChild):da.appendChild(Ka),this},X.prototype.removeControl=function(da){if(!da||!da.onRemove)return this.fire(new a.ErrorEvent(Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var xa=this._controls.indexOf(da);return-1<xa&&this._controls.splice(xa,1),da.onRemove(this),this},X.prototype.resize=function(da){var xa=
this._containerDimensions(),Ka=xa[0];xa=xa[1];this._resizeCanvas(Ka,xa);this.transform.resize(Ka,xa);this.painter.resize(Ka,xa);Ka=!this._moving;return Ka&&(this.stop(),this.fire(new a.Event("movestart",da)).fire(new a.Event("move",da))),this.fire(new a.Event("resize",da)),Ka&&this.fire(new a.Event("moveend",da)),this},X.prototype.getBounds=function(){return this.transform.getBounds()},X.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},X.prototype.setMaxBounds=function(da){return this.transform.setMaxBounds(a.LngLatBounds.convert(da)),
this._update()},X.prototype.setMinZoom=function(da){if(-2<=(da=null==da?-2:da)&&da<=this.transform.maxZoom)return this.transform.minZoom=da,this._update(),this.getZoom()<da&&this.setZoom(da),this;throw Error("minZoom must be between -2 and the current maxZoom, inclusive");},X.prototype.getMinZoom=function(){return this.transform.minZoom},X.prototype.setMaxZoom=function(da){if((da=null==da?22:da)>=this.transform.minZoom)return this.transform.maxZoom=da,this._update(),this.getZoom()>da&&this.setZoom(da),
this;throw Error("maxZoom must be greater than the current minZoom");},X.prototype.getMaxZoom=function(){return this.transform.maxZoom},X.prototype.setMinPitch=function(da){if(0>(da=null==da?0:da))throw Error("minPitch must be greater than or equal to 0");if(0<=da&&da<=this.transform.maxPitch)return this.transform.minPitch=da,this._update(),this.getPitch()<da&&this.setPitch(da),this;throw Error("minPitch must be between 0 and the current maxPitch, inclusive");},X.prototype.getMinPitch=function(){return this.transform.minPitch},
X.prototype.setMaxPitch=function(da){if(60<(da=null==da?60:da))throw Error("maxPitch must be less than or equal to 60");if(da>=this.transform.minPitch)return this.transform.maxPitch=da,this._update(),this.getPitch()>da&&this.setPitch(da),this;throw Error("maxPitch must be greater than the current minPitch");},X.prototype.getMaxPitch=function(){return this.transform.maxPitch},X.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},X.prototype.setRenderWorldCopies=function(da){return this.transform.renderWorldCopies=
da,this._update()},X.prototype.project=function(da){return this.transform.locationPoint(a.LngLat.convert(da))},X.prototype.unproject=function(da){return this.transform.pointLocation(a.Point.convert(da))},X.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},X.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},X.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},X.prototype._createDelegatedListener=function(da,xa,
Ka){var Wa,fb=this;if("mouseenter"===da||"mouseover"===da){var Fb=!1;return{layer:xa,listener:Ka,delegates:{mousemove:function(Pb){var uc=fb.getLayer(xa)?fb.queryRenderedFeatures(Pb.point,{layers:[xa]}):[];uc.length?Fb||(Fb=!0,Ka.call(fb,new vf(da,fb,Pb.originalEvent,{features:uc}))):Fb=!1},mouseout:function(){Fb=!1}}}}if("mouseleave"===da||"mouseout"===da){var Ob=!1;return{layer:xa,listener:Ka,delegates:{mousemove:function(Pb){(fb.getLayer(xa)?fb.queryRenderedFeatures(Pb.point,{layers:[xa]}):[]).length?
Ob=!0:Ob&&(Ob=!1,Ka.call(fb,new vf(da,fb,Pb.originalEvent)))},mouseout:function(Pb){Ob&&(Ob=!1,Ka.call(fb,new vf(da,fb,Pb.originalEvent)))}}}}return{layer:xa,listener:Ka,delegates:(Wa={},Wa[da]=function(Pb){var uc=fb.getLayer(xa)?fb.queryRenderedFeatures(Pb.point,{layers:[xa]}):[];uc.length&&(Pb.features=uc,Ka.call(fb,Pb),delete Pb.features)},Wa)}},X.prototype.on=function(da,xa,Ka){if(void 0===Ka)return U.prototype.on.call(this,da,xa);xa=this._createDelegatedListener(da,xa,Ka);for(var Wa in this._delegatedListeners=
this._delegatedListeners||{},this._delegatedListeners[da]=this._delegatedListeners[da]||[],this._delegatedListeners[da].push(xa),xa.delegates)this.on(Wa,xa.delegates[Wa]);return this},X.prototype.once=function(da,xa,Ka){if(void 0===Ka)return U.prototype.once.call(this,da,xa);da=this._createDelegatedListener(da,xa,Ka);for(var Wa in da.delegates)this.once(Wa,da.delegates[Wa]);return this},X.prototype.off=function(da,xa,Ka){if(void 0===Ka)xa=U.prototype.off.call(this,da,xa);else{if(this._delegatedListeners&&
this._delegatedListeners[da])a:{da=this._delegatedListeners[da];for(var Wa=0;Wa<da.length;Wa++){var fb=da[Wa];if(fb.layer===xa&&fb.listener===Ka){for(var Fb in fb.delegates)this.off(Fb,fb.delegates[Fb]);da.splice(Wa,1);break a}}}xa=this}return xa},X.prototype.queryRenderedFeatures=function(da,xa){if(!this.style)return[];if(void 0!==xa||void 0===da||da instanceof a.Point||Array.isArray(da)||(xa=da,da=void 0),xa=xa||{},(da=da||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||
"number"==typeof da[0])var Ka=[a.Point.convert(da)];else Ka=a.Point.convert(da[0]),da=a.Point.convert(da[1]),Ka=[Ka,new a.Point(da.x,Ka.y),da,new a.Point(Ka.x,da.y),Ka];return this.style.queryRenderedFeatures(Ka,xa,this.transform)},X.prototype.querySourceFeatures=function(da,xa){return this.style.querySourceFeatures(da,xa)},X.prototype.setStyle=function(da,xa){return!1!==(xa=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},xa)).diff&&xa.localIdeographFontFamily===this._localIdeographFontFamily&&
this.style&&da?(this._diffStyle(da,xa),this):(this._localIdeographFontFamily=xa.localIdeographFontFamily,this._updateStyle(da,xa))},X.prototype._getUIString=function(da){var xa=this._locale[da];if(null==xa)throw Error("Missing UI string '"+da+"'");return xa},X.prototype._updateStyle=function(da,xa){return this.style&&(this.style.setEventedParent(null),this.style._remove()),da?(this.style=new ud(this,xa||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof da?this.style.loadURL(da):
this.style.loadJSON(da),this):(delete this.style,this)},X.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ud(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},X.prototype._diffStyle=function(da,xa){var Ka=this;"string"==typeof da?(da=this._requestManager.normalizeStyleURL(da),da=this._requestManager.transformRequest(da,a.ResourceType.Style),a.getJSON(da,function(Wa,fb){Wa?Ka.fire(new a.ErrorEvent(Wa)):fb&&Ka._updateDiff(fb,xa)})):"object"==
typeof da&&this._updateDiff(da,xa)},X.prototype._updateDiff=function(da,xa){try{this.style.setState(da)&&this._update(!0)}catch(Ka){a.warnOnce("Unable to perform style diff: "+(Ka.message||Ka.error||Ka)+".  Rebuilding the style from scratch."),this._updateStyle(da,xa)}},X.prototype.getStyle=function(){if(this.style)return this.style.serialize()},X.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},X.prototype.addSource=function(da,
xa){return this._lazyInitEmptyStyle(),this.style.addSource(da,xa),this._update(!0)},X.prototype.isSourceLoaded=function(da){var xa=this.style&&this.style.sourceCaches[da];if(void 0!==xa)return xa.loaded();this.fire(new a.ErrorEvent(Error("There is no source with ID '"+da+"'")))},X.prototype.areTilesLoaded=function(){var da=this.style&&this.style.sourceCaches,xa;for(xa in da){var Ka=da[xa]._tiles,Wa;for(Wa in Ka){var fb=Ka[Wa];if("loaded"!==fb.state&&"errored"!==fb.state)return!1}}return!0},X.prototype.addSourceType=
function(da,xa,Ka){return this._lazyInitEmptyStyle(),this.style.addSourceType(da,xa,Ka)},X.prototype.removeSource=function(da){return this.style.removeSource(da),this._update(!0)},X.prototype.getSource=function(da){return this.style.getSource(da)},X.prototype.addImage=function(da,xa,Ka){void 0===Ka&&(Ka={});var Wa=Ka.pixelRatio;void 0===Wa&&(Wa=1);var fb=Ka.sdf;void 0===fb&&(fb=!1);var Fb=Ka.stretchX,Ob=Ka.stretchY;Ka=Ka.content;if(this._lazyInitEmptyStyle(),xa instanceof Rh||rg&&xa instanceof rg)xa=
a.browser.getImageData(xa),this.style.addImage(da,{data:new a.RGBAImage({width:xa.width,height:xa.height},xa.data),pixelRatio:Wa,stretchX:Fb,stretchY:Ob,content:Ka,sdf:fb,version:0});else{if(void 0===xa.width||void 0===xa.height)return this.fire(new a.ErrorEvent(Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));this.style.addImage(da,
{data:new a.RGBAImage({width:xa.width,height:xa.height},new Uint8Array(xa.data)),pixelRatio:Wa,stretchX:Fb,stretchY:Ob,content:Ka,sdf:fb,version:0,userImage:xa});xa.onAdd&&xa.onAdd(this,da)}},X.prototype.updateImage=function(da,xa){var Ka=this.style.getImage(da);if(!Ka)return this.fire(new a.ErrorEvent(Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Wa=xa instanceof Rh||rg&&xa instanceof rg?a.browser.getImageData(xa):xa,fb=Wa.width,
Fb=Wa.height;Wa=Wa.data;return void 0===fb||void 0===Fb?this.fire(new a.ErrorEvent(Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):fb!==Ka.data.width||Fb!==Ka.data.height?this.fire(new a.ErrorEvent(Error("The width and height of the updated image must be that same as the previous version of the image"))):(Ka.data.replace(Wa,!(xa instanceof
Rh||rg&&xa instanceof rg)),void this.style.updateImage(da,Ka))},X.prototype.hasImage=function(da){return da?!!this.style.getImage(da):(this.fire(new a.ErrorEvent(Error("Missing required image id"))),!1)},X.prototype.removeImage=function(da){this.style.removeImage(da)},X.prototype.loadImage=function(da,xa){a.getImage(this._requestManager.transformRequest(da,a.ResourceType.Image),xa)},X.prototype.listImages=function(){return this.style.listImages()},X.prototype.addLayer=function(da,xa){return this._lazyInitEmptyStyle(),
this.style.addLayer(da,xa),this._update(!0)},X.prototype.moveLayer=function(da,xa){return this.style.moveLayer(da,xa),this._update(!0)},X.prototype.removeLayer=function(da){return this.style.removeLayer(da),this._update(!0)},X.prototype.getLayer=function(da){return this.style.getLayer(da)},X.prototype.setLayerZoomRange=function(da,xa,Ka){return this.style.setLayerZoomRange(da,xa,Ka),this._update(!0)},X.prototype.setFilter=function(da,xa,Ka){return void 0===Ka&&(Ka={}),this.style.setFilter(da,xa,Ka),
this._update(!0)},X.prototype.getFilter=function(da){return this.style.getFilter(da)},X.prototype.setPaintProperty=function(da,xa,Ka,Wa){return void 0===Wa&&(Wa={}),this.style.setPaintProperty(da,xa,Ka,Wa),this._update(!0)},X.prototype.getPaintProperty=function(da,xa){return this.style.getPaintProperty(da,xa)},X.prototype.setLayoutProperty=function(da,xa,Ka,Wa){return void 0===Wa&&(Wa={}),this.style.setLayoutProperty(da,xa,Ka,Wa),this._update(!0)},X.prototype.getLayoutProperty=function(da,xa){return this.style.getLayoutProperty(da,
xa)},X.prototype.setLight=function(da,xa){return void 0===xa&&(xa={}),this._lazyInitEmptyStyle(),this.style.setLight(da,xa),this._update(!0)},X.prototype.getLight=function(){return this.style.getLight()},X.prototype.setFeatureState=function(da,xa){return this.style.setFeatureState(da,xa),this._update()},X.prototype.removeFeatureState=function(da,xa){return this.style.removeFeatureState(da,xa),this._update()},X.prototype.getFeatureState=function(da){return this.style.getFeatureState(da)},X.prototype.getContainer=
function(){return this._container},X.prototype.getCanvasContainer=function(){return this._canvasContainer},X.prototype.getCanvas=function(){return this._canvas},X.prototype._containerDimensions=function(){var da=0,xa=0;return this._container&&(da=this._container.clientWidth||400,xa=this._container.clientHeight||300),[da,xa]},X.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},
X.prototype._setupContainer=function(){var da=this._container;da.classList.add("mapboxgl-map");(this._missingCSSCanary=La.create("div","mapboxgl-canary",da)).style.visibility="hidden";this._detectMissingCSS();var xa=this._canvasContainer=La.create("div","mapboxgl-canvas-container",da);this._interactive&&xa.classList.add("mapboxgl-interactive");this._canvas=La.create("canvas","mapboxgl-canvas",xa);this._canvas.addEventListener("webglcontextlost",this._contextLost,!1);this._canvas.addEventListener("webglcontextrestored",
this._contextRestored,!1);this._canvas.setAttribute("tabindex","0");this._canvas.setAttribute("aria-label","Map");xa=this._containerDimensions();this._resizeCanvas(xa[0],xa[1]);var Ka=this._controlContainer=La.create("div","mapboxgl-control-container",da),Wa=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(fb){Wa[fb]=La.create("div","mapboxgl-ctrl-"+fb,Ka)})},X.prototype._resizeCanvas=function(da,xa){var Ka=a.browser.devicePixelRatio||1;this._canvas.width=
Ka*da;this._canvas.height=Ka*xa;this._canvas.style.width=da+"px";this._canvas.style.height=xa+"px"},X.prototype._setupPainter=function(){var da=a.extend({},bb.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1});(da=this._canvas.getContext("webgl",da)||this._canvas.getContext("experimental-webgl",da))?(this.painter=new Ve(da,this.transform),a.webpSupported.testSupport(da)):this.fire(new a.ErrorEvent(Error("Failed to initialize WebGL")))},
X.prototype._contextLost=function(da){da.preventDefault();this._frame&&(this._frame.cancel(),this._frame=null);this.fire(new a.Event("webglcontextlost",{originalEvent:da}))},X.prototype._contextRestored=function(da){this._setupPainter();this.resize();this._update();this.fire(new a.Event("webglcontextrestored",{originalEvent:da}))},X.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},X.prototype._update=function(da){return this.style?(this._styleDirty=
this._styleDirty||da,this._sourcesDirty=!0,this.triggerRepaint(),this):this},X.prototype._requestRenderFrame=function(da){return this._update(),this._renderTaskQueue.add(da)},X.prototype._cancelRenderFrame=function(da){this._renderTaskQueue.remove(da)},X.prototype._render=function(da){var xa,Ka=this,Wa=0,fb=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(xa=fb.createQueryEXT(),fb.beginQueryEXT(fb.TIME_ELAPSED_EXT,xa),Wa=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),
this._renderTaskQueue.run(da),!this._removed){da=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Fb=this.transform.zoom,Ob=a.browser.now();this.style.zoomHistory.update(Fb,Ob);Fb=new a.EvaluationParameters(Fb,{now:Ob,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()});Ob=Fb.crossFadingFactor();1===Ob&&Ob===this._crossFadingFactor||(da=!0,this._crossFadingFactor=Ob);this.style.update(Fb)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=
!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),
this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||da)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Pb=a.browser.now()-Wa;fb.endQueryEXT(fb.TIME_ELAPSED_EXT,xa);setTimeout(function(){var sc=fb.getQueryObjectEXT(xa,fb.QUERY_RESULT_EXT)/1E6;fb.deleteQueryEXT(xa);Ka.fire(new a.Event("gpu-timing-frame",{cpuTime:Pb,
gpuTime:sc}))},50)}if(this.listens("gpu-timing-layer")){var uc=this.painter.collectGpuTimers();setTimeout(function(){var sc=Ka.painter.queryGpuTimers(uc);Ka.fire(new a.Event("gpu-timing-layer",{layerTimes:sc}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new a.Event("idle"))),this}},X.prototype.remove=function(){this._hash&&this._hash.remove();for(var da=
0,xa=this._controls;da<xa.length;da+=1)xa[da].onRemove(this);this._controls=[];this._frame&&(this._frame.cancel(),this._frame=null);this._renderTaskQueue.clear();this.painter.destroy();this.handlers.destroy();delete this.handlers;this.setStyle(null);void 0!==a.window&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));(da=this.painter.context.gl.getExtension("WEBGL_lose_context"))&&da.loseContext();Ca(this._canvasContainer);
Ca(this._controlContainer);Ca(this._missingCSSCanary);this._container.classList.remove("mapboxgl-map");this._removed=!0;this.fire(new a.Event("remove"))},X.prototype.triggerRepaint=function(){var da=this;this.style&&!this._frame&&(this._frame=a.browser.frame(function(xa){da._frame=null;da._render(xa)}))},X.prototype._onWindowOnline=function(){this._update()},X.prototype._onWindowResize=function(da){this._trackResize&&this.resize({originalEvent:da})._update()},W.showTileBoundaries.get=function(){return!!this._showTileBoundaries},
W.showTileBoundaries.set=function(da){this._showTileBoundaries!==da&&(this._showTileBoundaries=da,this._update())},W.showPadding.get=function(){return!!this._showPadding},W.showPadding.set=function(da){this._showPadding!==da&&(this._showPadding=da,this._update())},W.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},W.showCollisionBoxes.set=function(da){this._showCollisionBoxes!==da&&(this._showCollisionBoxes=da,da?this.style._generateCollisionBoxes():this._update())},W.showOverdrawInspector.get=
function(){return!!this._showOverdrawInspector},W.showOverdrawInspector.set=function(da){this._showOverdrawInspector!==da&&(this._showOverdrawInspector=da,this._update())},W.repaint.get=function(){return!!this._repaint},W.repaint.set=function(da){this._repaint!==da&&(this._repaint=da,this.triggerRepaint())},W.vertices.get=function(){return!!this._vertices},W.vertices.set=function(da){this._vertices=da;this._update()},X.prototype._setCacheLimits=function(da,xa){a.setCacheLimits(da,xa)},W.version.get=
function(){return a.version},Object.defineProperties(X.prototype,W),X}(yk),ak={showCompass:!0,showZoom:!0,visualizePitch:!1},$f=function(U){var X=this;this.options=a.extend({},ak,U);this._container=La.create("div","mapboxgl-ctrl mapboxgl-ctrl-group");this._container.addEventListener("contextmenu",function(W){return W.preventDefault()});this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(W){return X._map.zoomIn({},
{originalEvent:W})}),La.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(W){return X._map.zoomOut({},{originalEvent:W})}),La.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0));this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(W){X.options.visualizePitch?X._map.resetNorthPitch({},
{originalEvent:W}):X._map.resetNorth({},{originalEvent:W})}),this._compassIcon=La.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};$f.prototype._updateZoomButtons=function(){var U=this._map.getZoom();this._zoomInButton.disabled=U===this._map.getMaxZoom();this._zoomOutButton.disabled=U===this._map.getMinZoom()};$f.prototype._rotateCompassArrow=function(){this._compassIcon.style.transform=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(Math.PI/
180*this._map.transform.pitch),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+180/Math.PI*this._map.transform.angle+"deg)":"rotate("+180/Math.PI*this._map.transform.angle+"deg)"};$f.prototype.onAdd=function(U){return this._map=U,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,
"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ke(this._map,this._compass,this.options.visualizePitch)),this._container};$f.prototype.onRemove=function(){La.remove(this._container);this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons);this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",
this._rotateCompassArrow),this._handler.off(),delete this._handler);delete this._map};$f.prototype._createButton=function(U,X){U=La.create("button",U,this._container);return U.type="button",U.addEventListener("click",X),U};$f.prototype._setButtonTitle=function(U,X){X=this._map._getUIString("NavigationControl."+X);U.title=X;U.setAttribute("aria-label",X)};var Ke=function(U,X,W){void 0===W&&(W=!1);this._clickTolerance=10;this.element=X;this.mouseRotate=new rj({clickTolerance:U.dragRotate._mouseRotate._clickTolerance});
this.map=U;W&&(this.mousePitch=new Si({clickTolerance:U.dragRotate._mousePitch._clickTolerance}));a.bindAll("mousedown mousemove mouseup touchstart touchmove touchend reset".split(" "),this);La.addEventListener(X,"mousedown",this.mousedown);La.addEventListener(X,"touchstart",this.touchstart,{passive:!1});La.addEventListener(X,"touchmove",this.touchmove);La.addEventListener(X,"touchend",this.touchend);La.addEventListener(X,"touchcancel",this.reset)};Ke.prototype.down=function(U,X){this.mouseRotate.mousedown(U,
X);this.mousePitch&&this.mousePitch.mousedown(U,X);La.disableDrag()};Ke.prototype.move=function(U,X){var W=this.map,da=this.mouseRotate.mousemoveWindow(U,X);(da&&da.bearingDelta&&W.setBearing(W.getBearing()+da.bearingDelta),this.mousePitch)&&(U=this.mousePitch.mousemoveWindow(U,X))&&U.pitchDelta&&W.setPitch(W.getPitch()+U.pitchDelta)};Ke.prototype.off=function(){var U=this.element;La.removeEventListener(U,"mousedown",this.mousedown);La.removeEventListener(U,"touchstart",this.touchstart,{passive:!1});
La.removeEventListener(U,"touchmove",this.touchmove);La.removeEventListener(U,"touchend",this.touchend);La.removeEventListener(U,"touchcancel",this.reset);this.offTemp()};Ke.prototype.offTemp=function(){La.enableDrag();La.removeEventListener(a.window,"mousemove",this.mousemove);La.removeEventListener(a.window,"mouseup",this.mouseup)};Ke.prototype.mousedown=function(U){this.down(a.extend({},U,{ctrlKey:!0,preventDefault:function(){return U.preventDefault()}}),La.mousePos(this.element,U));La.addEventListener(a.window,
"mousemove",this.mousemove);La.addEventListener(a.window,"mouseup",this.mouseup)};Ke.prototype.mousemove=function(U){this.move(U,La.mousePos(this.element,U))};Ke.prototype.mouseup=function(U){this.mouseRotate.mouseupWindow(U);this.mousePitch&&this.mousePitch.mouseupWindow(U);this.offTemp()};Ke.prototype.touchstart=function(U){1!==U.targetTouches.length?this.reset():(this._startPos=this._lastPos=La.touchPos(this.element,U.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return U.preventDefault()}},
this._startPos))};Ke.prototype.touchmove=function(U){1!==U.targetTouches.length?this.reset():(this._lastPos=La.touchPos(this.element,U.targetTouches)[0],this.move({preventDefault:function(){return U.preventDefault()}},this._lastPos))};Ke.prototype.touchend=function(U){0===U.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click();this.reset()};Ke.prototype.reset=function(){this.mouseRotate.reset();this.mousePitch&&this.mousePitch.reset();
delete this._startPos;delete this._lastPos;this.offTemp()};var ah={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},bh,Ui=function(U){function X(W,da){var xa=this;if(U.call(this),(W instanceof a.window.HTMLElement||da)&&(W=a.extend({element:W},da)),a.bindAll("_update _onMove _onUp _addDragHandler _onMapClick _onKeyPress".split(" "),
this),this._anchor=W&&W.anchor||"center",this._color=W&&W.color||"#3FB1CE",this._draggable=W&&W.draggable||!1,this._state="inactive",this._rotation=W&&W.rotation||0,this._rotationAlignment=W&&W.rotationAlignment||"auto",this._pitchAlignment=W&&W.pitchAlignment&&"auto"!==W.pitchAlignment?W.pitchAlignment:this._rotationAlignment,W&&W.element)this._element=W.element,this._offset=a.Point.convert(W&&W.offset||[0,0]);else{this._defaultMarker=!0;this._element=La.create("div");this._element.setAttribute("aria-label",
"Map marker");da=La.createNS("http://www.w3.org/2000/svg","svg");da.setAttributeNS(null,"display","block");da.setAttributeNS(null,"height","41px");da.setAttributeNS(null,"width","27px");da.setAttributeNS(null,"viewBox","0 0 27 41");var Ka=La.createNS("http://www.w3.org/2000/svg","g");Ka.setAttributeNS(null,"stroke","none");Ka.setAttributeNS(null,"stroke-width","1");Ka.setAttributeNS(null,"fill","none");Ka.setAttributeNS(null,"fill-rule","evenodd");Ka=La.createNS("http://www.w3.org/2000/svg","g");
Ka.setAttributeNS(null,"fill-rule","nonzero");var Wa=La.createNS("http://www.w3.org/2000/svg","g");Wa.setAttributeNS(null,"transform","translate(3.0, 29.0)");Wa.setAttributeNS(null,"fill","#000000");for(var fb=0,Fb=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];fb<Fb.length;fb+=1){var Ob=Fb[fb],Pb=La.createNS("http://www.w3.org/2000/svg",
"ellipse");Pb.setAttributeNS(null,"opacity","0.04");Pb.setAttributeNS(null,"cx","10.5");Pb.setAttributeNS(null,"cy","5.80029008");Pb.setAttributeNS(null,"rx",Ob.rx);Pb.setAttributeNS(null,"ry",Ob.ry);Wa.appendChild(Pb)}fb=La.createNS("http://www.w3.org/2000/svg","g");fb.setAttributeNS(null,"fill",this._color);Fb=La.createNS("http://www.w3.org/2000/svg","path");Fb.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z");
fb.appendChild(Fb);Fb=La.createNS("http://www.w3.org/2000/svg","g");Fb.setAttributeNS(null,"opacity","0.25");Fb.setAttributeNS(null,"fill","#000000");Ob=La.createNS("http://www.w3.org/2000/svg","path");Ob.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z");
Fb.appendChild(Ob);Ob=La.createNS("http://www.w3.org/2000/svg","g");Ob.setAttributeNS(null,"transform","translate(6.0, 7.0)");Ob.setAttributeNS(null,"fill","#FFFFFF");Pb=La.createNS("http://www.w3.org/2000/svg","g");Pb.setAttributeNS(null,"transform","translate(8.0, 8.0)");var uc=La.createNS("http://www.w3.org/2000/svg","circle");uc.setAttributeNS(null,"fill","#000000");uc.setAttributeNS(null,"opacity","0.25");uc.setAttributeNS(null,"cx","5.5");uc.setAttributeNS(null,"cy","5.5");uc.setAttributeNS(null,
"r","5.4999962");var sc=La.createNS("http://www.w3.org/2000/svg","circle");sc.setAttributeNS(null,"fill","#FFFFFF");sc.setAttributeNS(null,"cx","5.5");sc.setAttributeNS(null,"cy","5.5");sc.setAttributeNS(null,"r","5.4999962");Pb.appendChild(uc);Pb.appendChild(sc);Ka.appendChild(Wa);Ka.appendChild(fb);Ka.appendChild(Fb);Ka.appendChild(Ob);Ka.appendChild(Pb);da.appendChild(Ka);this._element.appendChild(da);this._offset=a.Point.convert(W&&W.offset||[0,-14])}this._element.classList.add("mapboxgl-marker");
this._element.addEventListener("dragstart",function(hc){hc.preventDefault()});this._element.addEventListener("mousedown",function(hc){hc.preventDefault()});this._element.addEventListener("focus",function(){var hc=xa._map.getContainer();hc.scrollTop=0;hc.scrollLeft=0});Xa(this._element,this._anchor,"marker");this._popup=null}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.addTo=function(W){return this.remove(),this._map=W,W.getCanvasContainer().appendChild(this._element),
W.on("move",this._update),W.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},X.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",
this._onMove),this._map.off("touchmove",this._onMove),delete this._map),La.remove(this._element),this._popup&&this._popup.remove(),this},X.prototype.getLngLat=function(){return this._lngLat},X.prototype.setLngLat=function(W){return this._lngLat=a.LngLat.convert(W),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},X.prototype.getElement=function(){return this._element},X.prototype.setPopup=function(W){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",
this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),W){if(!("offset"in W.options)){var da=Math.sqrt(Math.pow(13.5,2)/2);W.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[da,-1*(24.6+da)],"bottom-right":[-da,-1*(24.6+da)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=W;this._lngLat&&this._popup.setLngLat(this._lngLat);(this._originalTabIndex=this._element.getAttribute("tabindex"))||this._element.setAttribute("tabindex",
"0");this._element.addEventListener("keypress",this._onKeyPress)}return this},X.prototype._onKeyPress=function(W){var da=W.code;W=W.charCode||W.keyCode;"Space"!==da&&"Enter"!==da&&32!==W&&13!==W||this.togglePopup()},X.prototype._onMapClick=function(W){W=W.originalEvent.target;var da=this._element;this._popup&&(W===da||da.contains(W))&&this.togglePopup()},X.prototype.getPopup=function(){return this._popup},X.prototype.togglePopup=function(){var W=this._popup;return W?(W.isOpen()?W.remove():W.addTo(this._map),
this):this},X.prototype._update=function(W){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Fa(this._lngLat,this._pos,this._map.transform));this._pos=this._map.project(this._lngLat)._add(this._offset);var da="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?da="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(da="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var xa="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?
xa="rotateX(0deg)":"map"===this._pitchAlignment&&(xa="rotateX("+this._map.getPitch()+"deg)");W&&"moveend"!==W.type||(this._pos=this._pos.round());La.setTransform(this._element,ah[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+xa+" "+da)}},X.prototype.getOffset=function(){return this._offset},X.prototype.setOffset=function(W){return this._offset=a.Point.convert(W),this._update(),this},X.prototype._onMove=function(W){this._pos=W.point.sub(this._positionDelta);this._lngLat=this._map.unproject(this._pos);
this.setLngLat(this._lngLat);this._element.style.pointerEvents="none";"pending"===this._state&&(this._state="active",this.fire(new a.Event("dragstart")));this.fire(new a.Event("drag"))},X.prototype._onUp=function(){this._element.style.pointerEvents="auto";this._positionDelta=null;this._map.off("mousemove",this._onMove);this._map.off("touchmove",this._onMove);"active"===this._state&&this.fire(new a.Event("dragend"));this._state="inactive"},X.prototype._addDragHandler=function(W){this._element.contains(W.originalEvent.target)&&
(W.preventDefault(),this._positionDelta=W.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},X.prototype.setDraggable=function(W){return this._draggable=!!W,this._map&&(W?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",
this._addDragHandler))),this},X.prototype.isDraggable=function(){return this._draggable},X.prototype.setRotation=function(W){return this._rotation=W||0,this._update(),this},X.prototype.getRotation=function(){return this._rotation},X.prototype.setRotationAlignment=function(W){return this._rotationAlignment=W||"auto",this._update(),this},X.prototype.getRotationAlignment=function(){return this._rotationAlignment},X.prototype.setPitchAlignment=function(W){return this._pitchAlignment=W&&"auto"!==W?W:this._rotationAlignment,
this._update(),this},X.prototype.getPitchAlignment=function(){return this._pitchAlignment},X}(a.Evented),gg={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6E3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ch=0,Th=!1,Bg=function(U){function X(W){U.call(this);this.options=a.extend({},gg,W);a.bindAll("_onSuccess _onError _onZoom _finish _setupUI _updateCamera _updateMarker".split(" "),this)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&
U.prototype)).constructor=X,X.prototype.onAdd=function(W){var da;return this._map=W,this._container=La.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),da=this._setupUI,void 0!==bh?da(bh):void 0!==a.window.navigator.permissions?a.window.navigator.permissions.query({name:"geolocation"}).then(function(xa){da(bh="denied"!==xa.state)}):da(bh=!!a.window.navigator.geolocation),this._container},X.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),
this._geolocationWatchID=void 0);this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove();this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove();La.remove(this._container);this._map.off("zoom",this._onZoom);this._map=void 0;ch=0;Th=!1},X.prototype._isOutOfMapMaxBounds=function(W){var da=this._map.getMaxBounds();W=W.coords;return da&&(W.longitude<da.getWest()||W.longitude>da.getEast()||W.latitude<da.getSouth()||W.latitude>
da.getNorth())},X.prototype._setErrorState=function(){switch(this._watchState){case "WAITING_ACTIVE":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "ACTIVE_LOCK":this._watchState="ACTIVE_ERROR";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
break;case "BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},X.prototype._onSuccess=function(W){if(this._map){if(this._isOutOfMapMaxBounds(W))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",W)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=
W,this._watchState){case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":this._watchState="ACTIVE_LOCK";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "BACKGROUND":case "BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(W);this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(W);this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale");this.fire(new a.Event("geolocate",W));this._finish()}},X.prototype._updateCamera=function(W){var da=new a.LngLat(W.coords.longitude,W.coords.latitude);W=W.coords.accuracy;
var xa=this._map.getBearing();xa=a.extend({bearing:xa},this.options.fitBoundsOptions);this._map.fitBounds(da.toBounds(W),xa,{geolocateSource:!0})},X.prototype._updateMarker=function(W){if(W){var da=new a.LngLat(W.coords.longitude,W.coords.latitude);this._accuracyCircleMarker.setLngLat(da).addTo(this._map);this._userLocationDotMarker.setLngLat(da).addTo(this._map);this._accuracy=W.coords.accuracy;this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),
this._accuracyCircleMarker.remove()},X.prototype._updateCircleRadius=function(){var W=this._map._container.clientHeight/2,da=this._map.unproject([0,W]);W=this._map.unproject([1,W]);da=da.distanceTo(W);da=Math.ceil(2*this._accuracy/da);this._circleElement.style.width=da+"px";this._circleElement.style.height=da+"px"},X.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},X.prototype._onError=function(W){if(this._map){if(this.options.trackUserLocation)if(1===
W.code){this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this._geolocateButton.disabled=!0;var da=this._map._getUIString("GeolocateControl.LocationNotAvailable");
this._geolocateButton.title=da;this._geolocateButton.setAttribute("aria-label",da);void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===W.code&&Th)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale");this.fire(new a.Event("error",W));this._finish()}},X.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId);this._timeoutId=void 0},X.prototype._setupUI=function(W){var da=
this;(this._container.addEventListener("contextmenu",function(xa){return xa.preventDefault()}),this._geolocateButton=La.create("button","mapboxgl-ctrl-geolocate",this._container),La.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===W)?(a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled."),W=this._map._getUIString("GeolocateControl.LocationNotAvailable"),this._geolocateButton.disabled=
!0,this._geolocateButton.title=W,this._geolocateButton.setAttribute("aria-label",W)):(W=this._map._getUIString("GeolocateControl.FindMyLocation"),this._geolocateButton.title=W,this._geolocateButton.setAttribute("aria-label",W));this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF");this.options.showUserLocation&&(this._dotElement=La.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ui(this._dotElement),this._circleElement=
La.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ui({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom));this._geolocateButton.addEventListener("click",this.trigger.bind(this));this._setup=!0;this.options.trackUserLocation&&this._map.on("movestart",function(xa){xa.geolocateSource||"ACTIVE_LOCK"!==da._watchState||xa.originalEvent&&"resize"===xa.originalEvent.type||(da._watchState=
"BACKGROUND",da._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),da._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),da.fire(new a.Event("trackuserlocationend")))})},X.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case "OFF":this._watchState="WAITING_ACTIVE";this.fire(new a.Event("trackuserlocationstart"));break;case "WAITING_ACTIVE":case "ACTIVE_LOCK":case "ACTIVE_ERROR":case "BACKGROUND_ERROR":ch--;
Th=!1;this._watchState="OFF";this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background");this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error");this.fire(new a.Event("trackuserlocationend"));break;case "BACKGROUND":this._watchState=
"ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case "WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case "ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case "BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case "BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var W;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");
this._geolocateButton.setAttribute("aria-pressed","true");1<++ch?(W={maximumAge:6E5,timeout:0},Th=!0):(W=this.options.positionOptions,Th=!1);this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,W)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1E4);return!0},X.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID);
this._geolocationWatchID=void 0;this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting");this._geolocateButton.setAttribute("aria-pressed","false");this.options.showUserLocation&&this._updateMarker(null)},X}(a.Evented),Cg={maxWidth:100,unit:"metric"},Pf=function(U){this.options=a.extend({},Cg,U);a.bindAll(["_onMove","setUnit"],this)};Pf.prototype.getDefaultPosition=function(){return"bottom-left"};Pf.prototype._onMove=function(){ab(this._map,this._container,this.options)};Pf.prototype.onAdd=
function(U){return this._map=U,this._container=La.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",U.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container};Pf.prototype.onRemove=function(){La.remove(this._container);this._map.off("move",this._onMove);this._map=void 0};Pf.prototype.setUnit=function(U){this.options.unit=U;ab(this._map,this._container,this.options)};var ag=function(U){this._fullscreen=!1;U&&U.container&&(U.container instanceof a.window.HTMLElement?this._container=
U.container:a.warnOnce("Full screen control 'container' must be a DOM element."));a.bindAll(["_onClickFullscreen","_changeIcon"],this);"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};ag.prototype.onAdd=
function(U){return this._map=U,this._container||(this._container=this._map.getContainer()),this._controlContainer=La.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer};ag.prototype.onRemove=function(){La.remove(this._controlContainer);this._map=null;a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)};
ag.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)};ag.prototype._setupUI=function(){var U=this._fullscreenButton=La.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);La.create("span","mapboxgl-ctrl-icon",U).setAttribute("aria-hidden",!0);U.type="button";this._updateTitle();this._fullscreenButton.addEventListener("click",
this._onClickFullscreen);a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)};ag.prototype._updateTitle=function(){var U=this._getTitle();this._fullscreenButton.setAttribute("aria-label",U);this._fullscreenButton.title=U};ag.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")};ag.prototype._isFullscreen=function(){return this._fullscreen};ag.prototype._changeIcon=function(){(a.window.document.fullscreenElement||
a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())};ag.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?
a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};
var bk={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Vi=function(U){function X(W){U.call(this);this.options=a.extend(Object.create(bk),W);a.bindAll("_update _onClose remove _onMouseMove _onMouseUp _onDrag".split(" "),this)}return U&&(X.__proto__=U),(X.prototype=Object.create(U&&U.prototype)).constructor=X,X.prototype.addTo=function(W){return this._map&&this.remove(),this._map=W,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",
this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},X.prototype.isOpen=function(){return!!this._map},X.prototype.remove=function(){return this._content&&La.remove(this._content),
this._container&&(La.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},X.prototype.getLngLat=function(){return this._lngLat},X.prototype.setLngLat=function(W){return this._lngLat=
a.LngLat.convert(W),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},X.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),
this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},X.prototype.getElement=function(){return this._container},X.prototype.setText=function(W){return this.setDOMContent(a.window.document.createTextNode(W))},X.prototype.setHTML=function(W){var da=a.window.document.createDocumentFragment(),xa=a.window.document.createElement("body");for(xa.innerHTML=W;W=xa.firstChild;)da.appendChild(W);
return this.setDOMContent(da)},X.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},X.prototype.setMaxWidth=function(W){return this.options.maxWidth=W,this._update(),this},X.prototype.setDOMContent=function(W){return this._createContent(),this._content.appendChild(W),this._update(),this},X.prototype.addClassName=function(W){this._container&&this._container.classList.add(W)},X.prototype.removeClassName=function(W){this._container&&this._container.classList.remove(W)},
X.prototype.toggleClassName=function(W){if(this._container)return this._container.classList.toggle(W)},X.prototype._createContent=function(){this._content&&La.remove(this._content);this._content=La.create("div","mapboxgl-popup-content",this._container);this.options.closeButton&&(this._closeButton=La.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="\x26#215;",this._closeButton.addEventListener("click",
this._onClose))},X.prototype._onMouseUp=function(W){this._update(W.point)},X.prototype._onMouseMove=function(W){this._update(W.point)},X.prototype._onDrag=function(W){this._update(W.point)},X.prototype._update=function(W){var da=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=La.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=La.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&
this.options.className.split(" ").forEach(function(fb){return da._container.classList.add(fb)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Fa(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||W)){W=this._pos=this._trackPointer&&W?W:this._map.project(this._lngLat);
var xa=this.options.anchor,Ka=function Ob(Fb){if(Fb){if("number"==typeof Fb){var Pb=Math.round(Math.sqrt(.5*Math.pow(Fb,2)));return{center:new a.Point(0,0),top:new a.Point(0,Fb),"top-left":new a.Point(Pb,Pb),"top-right":new a.Point(-Pb,Pb),bottom:new a.Point(0,-Fb),"bottom-left":new a.Point(Pb,-Pb),"bottom-right":new a.Point(-Pb,-Pb),left:new a.Point(Fb,0),right:new a.Point(-Fb,0)}}return Fb instanceof a.Point||Array.isArray(Fb)?(Fb=a.Point.convert(Fb),{center:Fb,top:Fb,"top-left":Fb,"top-right":Fb,
bottom:Fb,"bottom-left":Fb,"bottom-right":Fb,left:Fb,right:Fb}):{center:a.Point.convert(Fb.center||[0,0]),top:a.Point.convert(Fb.top||[0,0]),"top-left":a.Point.convert(Fb["top-left"]||[0,0]),"top-right":a.Point.convert(Fb["top-right"]||[0,0]),bottom:a.Point.convert(Fb.bottom||[0,0]),"bottom-left":a.Point.convert(Fb["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(Fb["bottom-right"]||[0,0]),left:a.Point.convert(Fb.left||[0,0]),right:a.Point.convert(Fb.right||[0,0])}}return Ob(new a.Point(0,0))}(this.options.offset);
if(!xa){xa=this._container.offsetWidth;var Wa=this._container.offsetHeight;Wa=W.y+Ka.bottom.y<Wa?["top"]:W.y>this._map.transform.height-Wa?["bottom"]:[];W.x<xa/2?Wa.push("left"):W.x>this._map.transform.width-xa/2&&Wa.push("right");xa=0===Wa.length?"bottom":Wa.join("-")}W=W.add(Ka[xa]).round();La.setTransform(this._container,ah[xa]+" translate("+W.x+"px,"+W.y+"px)");Xa(this._container,xa,"popup")}},X.prototype._onClose=function(){this.remove()},X}(a.Evented),Wi={version:a.version,supported:bb,setRTLTextPlugin:a.setRTLTextPlugin,
getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:Ak,NavigationControl:$f,GeolocateControl:Bg,AttributionControl:qg,ScaleControl:Pf,FullscreenControl:ag,Popup:Vi,Marker:Ui,Style:ud,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){(Nd||(Nd=new me),Nd).acquire("mapboxgl_preloaded_worker_pool")},clearPrewarmedResources:function(){var U=Nd;U&&(U.isPreloaded()&&1===U.numActive()?(U.release("mapboxgl_preloaded_worker_pool"),
Nd=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(U){a.config.ACCESS_TOKEN=U},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(U){a.config.API_URL=U},get workerCount(){return me.workerCount},set workerCount(U){me.workerCount=U},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},
set maxParallelImageRequests(U){a.config.MAX_PARALLEL_IMAGE_REQUESTS=U},clearStorage:function(U){a.clearTileCache(U)},workerUrl:""};return Wi});return k})},{}],448:[function(b,D,G){function r(p,k,a){for(var e=Array(p),f=0;f<p;++f)e[f]=0,f===k&&(e[f]+=.5),f===a&&(e[f]+=.5);return e}D.exports=function(p){for(var k=1<<p+1,a=Array(k),e=0;e<k;++e){var f=e;var l=p,m=e;if(0===m||m===(1<<l+1)-1)var c=[];else{var d=[];c=[];for(var g=0;g<=l;++g)if(m&1<<g){d.push(r(l,g-1,g-1));c.push(null);for(var h=0;h<=l;++h)~m&
1<<h&&(d.push(r(l,g-1,h-1)),c.push([g,h]))}l=n(d);m=[];g=0;b:for(;g<l.length;++g){d=l[g];var q=[];for(h=0;h<d.length;++h){if(!c[d[h]])continue b;q.push(c[d[h]].slice())}m.push(q)}c=m}a[f]=c}return a};var n=b("convex-hull")},{"convex-hull":135}],449:[function(b,D,G){function r(h,q,t,v,w){h[0]=q[0]*v+t[0]*w;h[1]=q[1]*v+t[1]*w;h[2]=q[2]*v+t[2]*w}var n=b("./normalize");G=b("gl-mat4/create");var p=b("gl-mat4/clone"),k=b("gl-mat4/determinant"),a=b("gl-mat4/invert"),e=b("gl-mat4/transpose"),f={length:b("gl-vec3/length"),
normalize:b("gl-vec3/normalize"),dot:b("gl-vec3/dot"),cross:b("gl-vec3/cross")},l=G(),m=G(),c=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];D.exports=function(h,q,t,v,w,A){q||(q=[0,0,0]);t||(t=[0,0,0]);v||(v=[0,0,0]);w||(w=[0,0,0,1]);A||(A=[0,0,0,1]);if(!n(l,h))return!1;p(m,l);m[3]=0;m[7]=0;m[11]=0;m[15]=1;if(Math.abs(1E-8>k(m)))return!1;var z=l[3],y=l[7],B=l[11];h=l[12];var C=l[13],u=l[14],F=l[15];if(0!==z||0!==y||0!==B){c[0]=z;c[1]=y;c[2]=B;c[3]=F;if(!a(m,m))return!1;e(m,m);z=c[0];y=c[1];B=c[2];
F=c[3];w[0]=m[0]*z+m[4]*y+m[8]*B+m[12]*F;w[1]=m[1]*z+m[5]*y+m[9]*B+m[13]*F;w[2]=m[2]*z+m[6]*y+m[10]*B+m[14]*F;w[3]=m[3]*z+m[7]*y+m[11]*B+m[15]*F}else w[0]=w[1]=w[2]=0,w[3]=1;q[0]=h;q[1]=C;q[2]=u;d[0][0]=l[0];d[0][1]=l[1];d[0][2]=l[2];d[1][0]=l[4];d[1][1]=l[5];d[1][2]=l[6];d[2][0]=l[8];d[2][1]=l[9];d[2][2]=l[10];t[0]=f.length(d[0]);f.normalize(d[0],d[0]);v[0]=f.dot(d[0],d[1]);r(d[1],d[1],d[0],1,-v[0]);t[1]=f.length(d[1]);f.normalize(d[1],d[1]);v[0]/=t[1];v[1]=f.dot(d[0],d[2]);r(d[2],d[2],d[0],1,-v[1]);
v[2]=f.dot(d[1],d[2]);r(d[2],d[2],d[1],1,-v[2]);t[2]=f.length(d[2]);f.normalize(d[2],d[2]);v[1]/=t[2];v[2]/=t[2];f.cross(g,d[1],d[2]);if(0>f.dot(d[0],g))for(q=0;3>q;q++)t[q]*=-1,d[q][0]*=-1,d[q][1]*=-1,d[q][2]*=-1;A[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0));A[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0));A[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0));A[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0));d[2][1]>d[1][2]&&(A[0]=-A[0]);d[0][2]>d[2][0]&&(A[1]=-A[1]);
d[1][0]>d[0][1]&&(A[2]=-A[2]);return!0}},{"./normalize":450,"gl-mat4/clone":272,"gl-mat4/create":273,"gl-mat4/determinant":274,"gl-mat4/invert":278,"gl-mat4/transpose":289,"gl-vec3/cross":339,"gl-vec3/dot":344,"gl-vec3/length":354,"gl-vec3/normalize":361}],450:[function(b,D,G){D.exports=function(r,n){var p=n[15];if(0===p)return!1;p=1/p;for(var k=0;16>k;k++)r[k]=n[k]*p;return!0}},{}],451:[function(b,D,G){function r(){return{translate:[0,0,0],scale:[1,1,1],skew:[0,0,0],perspective:[0,0,0,1],quaternion:[0,
0,0,1]}}var n=b("gl-vec3/lerp"),p=b("mat4-recompose"),k=b("mat4-decompose"),a=b("gl-mat4/determinant"),e=b("quat-slerp"),f=r(),l=r(),m=r();D.exports=function(c,d,g,h){if(0===a(d)||0===a(g))return!1;d=k(d,f.translate,f.scale,f.skew,f.perspective,f.quaternion);g=k(g,l.translate,l.scale,l.skew,l.perspective,l.quaternion);if(!d||!g)return!1;n(m.translate,f.translate,l.translate,h);n(m.skew,f.skew,l.skew,h);n(m.scale,f.scale,l.scale,h);n(m.perspective,f.perspective,l.perspective,h);e(m.quaternion,f.quaternion,
l.quaternion,h);p(c,m.translate,m.scale,m.skew,m.perspective,m.quaternion);return!0}},{"gl-mat4/determinant":274,"gl-vec3/lerp":355,"mat4-decompose":449,"mat4-recompose":452,"quat-slerp":501}],452:[function(b,D,G){var r={identity:b("gl-mat4/identity"),translate:b("gl-mat4/translate"),multiply:b("gl-mat4/multiply"),create:b("gl-mat4/create"),scale:b("gl-mat4/scale"),fromRotationTranslation:b("gl-mat4/fromRotationTranslation")};r.create();var n=r.create();D.exports=function(p,k,a,e,f,l){r.identity(p);
r.fromRotationTranslation(p,l,k);p[3]=f[0];p[7]=f[1];p[11]=f[2];p[15]=f[3];r.identity(n);0!==e[2]&&(n[9]=e[2],r.multiply(p,p,n));0!==e[1]&&(n[9]=0,n[8]=e[1],r.multiply(p,p,n));0!==e[0]&&(n[8]=0,n[4]=e[0],r.multiply(p,p,n));r.scale(p,p,a);return p}},{"gl-mat4/create":273,"gl-mat4/fromRotationTranslation":276,"gl-mat4/identity":277,"gl-mat4/multiply":280,"gl-mat4/scale":287,"gl-mat4/translate":288}],453:[function(b,D,G){D.exports=Math.log2||function(r){return Math.log(r)*Math.LOG2E}},{}],454:[function(b,
D,G){function r(h){this._components=h.slice();this._time=[0];this.prevMatrix=h.slice();this.nextMatrix=h.slice();this.computedMatrix=h.slice();this.computedInverse=h.slice();this.computedEye=[0,0,0];this.computedUp=[0,0,0];this.computedCenter=[0,0,0];this.computedRadius=[0];this._limits=[-Infinity,Infinity]}var n=b("binary-search-bounds"),p=b("mat4-interpolate"),k=b("gl-mat4/invert"),a=b("gl-mat4/rotateX"),e=b("gl-mat4/rotateY"),f=b("gl-mat4/rotateZ"),l=b("gl-mat4/lookAt"),m=b("gl-mat4/translate");
b("gl-mat4/scale");var c=b("gl-vec3/normalize"),d=[0,0,0];D.exports=function(h){h=h||{};return new r(h.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};b=r.prototype;b.recalcMatrix=function(h){var q=this._time,t=n.le(q,h),v=this.computedMatrix;if(!(0>t)){var w=this._components;if(t===q.length-1)for(var A=16*t,z=0;16>z;++z)v[z]=w[A++];else{var y=q[t+1]-q[t];A=16*t;var B=this.prevMatrix,C=!0;for(z=0;16>z;++z)B[z]=w[A++];var u=this.nextMatrix;for(z=0;16>z;++z)u[z]=w[A++],C=C&&B[z]===u[z];if(1E-6>y||C)for(z=
0;16>z;++z)v[z]=B[z];else p(v,B,u,(h-q[t])/y)}z=this.computedUp;z[0]=v[1];z[1]=v[5];z[2]=v[9];c(z,z);z=this.computedInverse;k(z,v);h=this.computedEye;q=z[15];h[0]=z[12]/q;h[1]=z[13]/q;h[2]=z[14]/q;q=this.computedCenter;t=Math.exp(this.computedRadius[0]);for(z=0;3>z;++z)q[z]=h[z]-v[2+4*z]*t}};b.idle=function(h){if(!(h<this.lastT())){for(var q=this._components,t=q.length-16,v=0;16>v;++v)q.push(q[t++]);this._time.push(h)}};b.flush=function(h){h=n.gt(this._time,h)-2;0>h||(this._time.splice(0,h),this._components.splice(0,
16*h))};b.lastT=function(){return this._time[this._time.length-1]};b.lookAt=function(h,q,t,v){this.recalcMatrix(h);q=q||this.computedEye;t=t||d;v=v||this.computedUp;this.setMatrix(h,l(this.computedMatrix,q,t,v));for(v=h=0;3>v;++v)h+=Math.pow(t[v]-q[v],2);h=Math.log(Math.sqrt(h));this.computedRadius[0]=h};b.rotate=function(h,q,t,v){this.recalcMatrix(h);var w=this.computedInverse;q&&e(w,w,q);t&&a(w,w,t);v&&f(w,w,v);this.setMatrix(h,k(this.computedMatrix,w))};var g=[0,0,0];b.pan=function(h,q,t,v){g[0]=
-(q||0);g[1]=-(t||0);g[2]=-(v||0);this.recalcMatrix(h);q=this.computedInverse;m(q,q,g);this.setMatrix(h,k(q,q))};b.translate=function(h,q,t,v){g[0]=q||0;g[1]=t||0;g[2]=v||0;this.recalcMatrix(h);q=this.computedMatrix;m(q,q,g);this.setMatrix(h,q)};b.setMatrix=function(h,q){if(!(h<this.lastT()))for(this._time.push(h),h=0;16>h;++h)this._components.push(q[h])};b.setDistance=function(h,q){this.computedRadius[0]=q};b.setDistanceLimits=function(h,q){var t=this._limits;t[0]=h;t[1]=q};b.getDistanceLimits=function(h){var q=
this._limits;return h?(h[0]=q[0],h[1]=q[1],h):q}},{"binary-search-bounds":455,"gl-mat4/invert":278,"gl-mat4/lookAt":279,"gl-mat4/rotateX":284,"gl-mat4/rotateY":285,"gl-mat4/rotateZ":286,"gl-mat4/scale":287,"gl-mat4/translate":288,"gl-vec3/normalize":361,"mat4-interpolate":451}],455:[function(b,D,G){arguments[4][243][0].apply(G,arguments)},{dup:243}],456:[function(b,D,G){D.exports=function(n){var p=n.length;if(3>p){for(var k=Array(p),a=0;a<p;++a)k[a]=a;return 2===p&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?
[0]:k}k=Array(p);for(a=0;a<p;++a)k[a]=a;k.sort(function(d,g){var h=n[d][0]-n[g][0];return h?h:n[d][1]-n[g][1]});var e=[k[0],k[1]],f=[k[0],k[1]];for(a=2;a<p;++a){for(var l=k[a],m=n[l],c=e.length;1<c&&0>=r(n[e[c-2]],n[e[c-1]],m);)--c,e.pop();e.push(l);for(c=f.length;1<c&&0<=r(n[f[c-2]],n[f[c-1]],m);)--c,f.pop();f.push(l)}k=Array(f.length+e.length-2);a=p=0;for(l=e.length;a<l;++a)k[p++]=e[a];for(a=f.length-2;0<a;--a)k[p++]=f[a];return k};var r=b("robust-orientation")[3]},{"robust-orientation":520}],457:[function(b,
D,G){D.exports=function(n,p){function k(z){var y=!1;"altKey"in z&&(y=y||z.altKey!==v.alt,v.alt=!!z.altKey);"shiftKey"in z&&(y=y||z.shiftKey!==v.shift,v.shift=!!z.shiftKey);"ctrlKey"in z&&(y=y||z.ctrlKey!==v.control,v.control=!!z.ctrlKey);"metaKey"in z&&(y=y||z.metaKey!==v.meta,v.meta=!!z.metaKey);return y}function a(z,y){var B=r.x(y),C=r.y(y);"buttons"in y&&(z=y.buttons|0);if(z!==h||B!==q||C!==t||k(y))h=z|0,q=B||0,t=C||0,p&&p(h,q,t,v)}function e(z){a(0,z)}function f(){if(h||q||t||v.shift||v.alt||
v.meta||v.control)h=q=t=0,v.shift=v.alt=v.control=v.meta=!1,p&&p(0,0,0,v)}function l(z){k(z)&&p&&p(h,q,t,v)}function m(z){0===r.buttons(z)?a(0,z):a(h,z)}function c(z){a(h|r.buttons(z),z)}function d(z){a(h&~r.buttons(z),z)}function g(){w||(w=!0,n.addEventListener("mousemove",m),n.addEventListener("mousedown",c),n.addEventListener("mouseup",d),n.addEventListener("mouseleave",e),n.addEventListener("mouseenter",e),n.addEventListener("mouseout",e),n.addEventListener("mouseover",e),n.addEventListener("blur",
f),n.addEventListener("keyup",l),n.addEventListener("keydown",l),n.addEventListener("keypress",l),n!==window&&(window.addEventListener("blur",f),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}p||(p=n,n=window);var h=0,q=0,t=0,v={shift:!1,alt:!1,control:!1,meta:!1},w=!1;g();var A={element:n};Object.defineProperties(A,{enabled:{get:function(){return w},set:function(z){z?g():w&&(w=!1,n.removeEventListener("mousemove",m),n.removeEventListener("mousedown",
c),n.removeEventListener("mouseup",d),n.removeEventListener("mouseleave",e),n.removeEventListener("mouseenter",e),n.removeEventListener("mouseout",e),n.removeEventListener("mouseover",e),n.removeEventListener("blur",f),n.removeEventListener("keyup",l),n.removeEventListener("keydown",l),n.removeEventListener("keypress",l),n!==window&&(window.removeEventListener("blur",f),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},
buttons:{get:function(){return h},enumerable:!0},x:{get:function(){return q},enumerable:!0},y:{get:function(){return t},enumerable:!0},mods:{get:function(){return v},enumerable:!0}});return A};var r=b("mouse-event")},{"mouse-event":459}],458:[function(b,D,G){var r={left:0,top:0};D.exports=function(n,p,k){p=p||n.currentTarget||n.srcElement;Array.isArray(k)||(k=[0,0]);var a=n.clientX||0;n=n.clientY||0;p=p===window||p===document||p===document.body?r:p.getBoundingClientRect();k[0]=a-p.left;k[1]=n-p.top;
return k}},{}],459:[function(b,D,G){function r(n){return n.target||n.srcElement||window}G.buttons=function(n){if("object"===typeof n){if("buttons"in n)return n.buttons;if("which"in n){n=n.which;if(2===n)return 4;if(3===n)return 2;if(0<n)return 1<<n-1}else if("button"in n){n=n.button;if(1===n)return 4;if(2===n)return 2;if(0<=n)return 1<<n}}return 0};G.element=r;G.x=function(n){if("object"===typeof n){if("offsetX"in n)return n.offsetX;var p=r(n).getBoundingClientRect();return n.clientX-p.left}return 0};
G.y=function(n){if("object"===typeof n){if("offsetY"in n)return n.offsetY;var p=r(n).getBoundingClientRect();return n.clientY-p.top}return 0}},{}],460:[function(b,D,G){var r=b("to-px");D.exports=function(n,p,k){"function"===typeof n&&(k=!!p,p=n,n=window);var a=r("ex",n),e=function(f){k&&f.preventDefault();var l=f.deltaX||0,m=f.deltaY||0,c=f.deltaZ||0,d=1;switch(f.deltaMode){case 1:d=a;break;case 2:d=window.innerHeight}l*=d;m*=d;c*=d;if(l||m||c)return p(l,m,c,f)};n.addEventListener("wheel",e);return e}},
{"to-px":550}],461:[function(b,D,G){function r(c,d,g){for(var h=0,q=0;q<c;++q)d&1<<q&&(h|=1<<g[q]);return h}function n(c,d,g,h,q,t){function v(L,P){u.push("for(","i"+q[L],"\x3d",P,";","i"+q[L],"\x3c","s"+q[L],";","++","i"+q[L],"){")}function w(L){for(var P=0;P<y;++P)u.push("p"+P,"+\x3d","u"+P+"_"+q[L],";");u.push("}")}function A(){for(var L=1;L<1<<B;++L)u.push(m,"\x3d","e"+L,";","e"+L,"\x3d","y"+L,";","y"+L,"\x3d",m,";")}function z(L,P){if(0>L){for(var N=0;N<y;++N)t[N]?u.push("c"+N+"_0","\x3d","d"+
N,".get(","p"+N,");"):u.push("c"+N+"_0","\x3d","d"+N,"[","p"+N,"];");L=[];for(N=0;N<y;++N)L.push("c"+N+"_0");for(N=0;N<h;++N)L.push("x"+N);u.push("b0","\x3d",a,"[",l,"]\x3dphase(",L.join(),");");for(L=1;L<1<<B;++L)u.push("b"+L,"\x3d",a,"[",l,"+","e"+L,"];");N=[];for(L=1;L<1<<B;++L)N.push("(b0!\x3d\x3db"+L+")");u.push("if(",N.join("||"),"){");var Q=[];for(N=0;N<B;++N)Q.push("i"+N);for(N=0;N<y;++N)for(Q.push("c"+N+"_0"),L=1;L<1<<B;++L)t[N]?u.push("c"+N+"_"+L,"\x3d","d"+N,".get(","p"+N,"+","d"+N+"_"+
L,");"):u.push("c"+N+"_"+L,"\x3d","d"+N,"[","p"+N,"+","d"+N+"_"+L,"];"),Q.push("c"+N+"_"+L);for(N=0;N<1<<B;++N)Q.push("b"+N);for(N=0;N<h;++N)Q.push("x"+N);u.push("vertex(",Q.join(),");","v0","\x3d",k,"[",l,"]\x3d",e,"++;");N=(1<<B)-1;Q="b"+N;for(L=0;L<B;++L)if(0===(P&~(1<<L))){for(var O=N^1<<L,T="b"+O,V=[],Z=O;0<Z;Z=Z-1&O)V.push(k+"["+l+"+e"+Z+"]");V.push("v0");for(Z=0;Z<y;++Z)L&1?V.push("c"+Z+"_"+N,"c"+Z+"_"+O):V.push("c"+Z+"_"+O,"c"+Z+"_"+N);L&1?V.push(Q,T):V.push(T,Q);for(Z=0;Z<h;++Z)V.push("x"+
Z);u.push("if(",Q,"!\x3d\x3d",T,"){","face(",V.join(),")}")}u.push("}",l,"+\x3d1;")}else{for(N=L-1;0<=N;--N)v(N,0);Q=[];for(N=0;N<y;++N)t[N]?Q.push("d"+N+".get(p"+N+")"):Q.push("d"+N+"[p"+N+"]");for(N=0;N<h;++N)Q.push("x"+N);u.push(a,"[",l,"++]\x3dphase(",Q.join(),");");for(N=0;N<L;++N)w(N);for(N=0;N<y;++N)u.push("p"+N,"+\x3d","u"+N+"_"+q[L],";");u.push("if(","s"+q[L],"\x3e0){","i"+q[L],"\x3d1;");z(L-1,P|1<<q[L]);for(N=0;N<y;++N)u.push("p"+N,"+\x3d","u"+N+"_"+q[L],";");L===B-1&&(u.push(l,"\x3d0;"),
A());v(L,2);z(L-1,P);L===B-1&&(u.push("if(","i"+q[B-1],"\x261){",l,"\x3d0;}"),A());w(L);u.push("}")}}var y=t.length,B=q.length;if(2>B)throw Error("ndarray-extract-contour: Dimension must be at least 2");for(var C="extractContour"+q.join("_"),u=[],F=[],H=[],J=0;J<y;++J)H.push("a"+J);for(J=0;J<h;++J)H.push("x"+J);for(J=0;J<B;++J)F.push("s"+J+"\x3da0.shape["+J+"]|0");for(J=0;J<y;++J){F.push("d"+J+"\x3da"+J+".data","o"+J+"\x3da"+J+".offset|0");for(var I=0;I<B;++I)F.push("t"+J+"_"+I+"\x3da"+J+".stride["+
I+"]|0")}for(J=0;J<y;++J)for(F.push("p"+J+"\x3do"+J),F.push("c"+J+"_0"),I=1;I<1<<B;++I){for(var M=[],E=0;E<B;++E)I&1<<E&&M.push("-t"+(J+"_"+E));F.push("d"+J+"_"+I+"\x3d("+M.join("")+")|0");F.push("c"+J+"_"+I+"\x3d0")}for(J=0;J<y;++J)for(I=0;I<B;++I)E=["t"+J+"_"+q[I]],0<I&&E.push("t"+J+"_"+q[I-1]+"*s"+q[I-1]),F.push("u"+J+"_"+q[I]+"\x3d("+E.join("-")+")|0");for(J=0;J<B;++J)F.push("i"+J+"\x3d0");F.push(e+"\x3d0");I=["2"];for(J=B-2;0<=J;--J)I.push("s"+q[J]);F.push(f+"\x3d("+I.join("*")+")|0",a+"\x3dmallocUint32("+
f+")",k+"\x3dmallocUint32("+f+")",l+"\x3d0");F.push("b0\x3d0");for(I=1;I<1<<B;++I){J=[];M=[];for(E=0;E<B;++E)I&1<<E&&(0===M.length?J.push("1"):J.unshift(M.join("*"))),M.push("s"+q[E]);E="";0>J[0].indexOf("s"+q[B-2])&&(E="-");M=r(B,I,q);F.push("e"+M+"\x3d(-"+J.join("-")+")|0","y"+M+"\x3d("+E+J.join("-")+")|0","b"+M+"\x3d0")}F.push("v0\x3d0",m+"\x3d0");z(B-1,0);u.push("freeUint32(",k,");freeUint32(",a,");");C=["'use strict';function ",C,"(",H.join(),"){var ",F.join(),";",u.join(""),"}return ",C].join("");
return(new Function("vertex","face","phase","mallocUint32","freeUint32",C))(c,d,g,p.mallocUint32,p.freeUint32)}var p=b("typedarray-pool");D.exports=function(c){function d(A){throw Error("ndarray-extract-contour: "+A);}"object"!==typeof c&&d("Must specify arguments");var g=c.order;Array.isArray(g)||d("Must specify order");var h=c.arrayArguments||1;1>h&&d("Must have at least one array argument");var q=c.scalarArguments||0;0>q&&d("Scalar arg count must be \x3e 0");"function"!==typeof c.vertex&&d("Must specify vertex creation function");
"function"!==typeof c.cell&&d("Must specify cell creation function");"function"!==typeof c.phase&&d("Must specify phase function");for(var t=c.getters||[],v=Array(h),w=0;w<h;++w)0<=t.indexOf(w)?v[w]=!0:v[w]=!1;return n(c.vertex,c.cell,c.phase,q,g,v)};var k="V",a="P",e="N",f="Q",l="X",m="T"},{"typedarray-pool":567}],462:[function(b,D,G){function r(m){if(m in k)return k[m];for(var c=[],d=0;d<m;++d)c.push("out",d,"s\x3d0.5*(inp",d,"l-inp",d,"r);");var g=["array"],h=["junk"];for(d=0;d<m;++d){g.push("array");
h.push("out"+d+"s");var q=n(m);q[d]=-1;g.push({array:0,offset:q.slice()});q[d]=1;g.push({array:0,offset:q.slice()});h.push("inp"+d+"l","inp"+d+"r")}return k[m]=p({args:g,pre:e,post:e,body:{body:c.join(""),args:h.map(function(t){return{name:t,lvalue:0===t.indexOf("out"),rvalue:0===t.indexOf("inp"),count:"junk"!==t|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+m})}D.exports=function(m,c,d){if(Array.isArray(d)){if(d.length!==c.dimension)throw Error("ndarray-gradient: invalid boundary conditions");
}else d="string"===typeof d?n(c.dimension,d):n(c.dimension,"clamp");if(m.dimension!==c.dimension+1)throw Error("ndarray-gradient: output dimension must be +1 input dimension");if(m.shape[c.dimension]!==c.dimension)throw Error("ndarray-gradient: output shape must match input shape");for(var g=0;g<c.dimension;++g)if(m.shape[g]!==c.shape[g])throw Error("ndarray-gradient: shape mismatch");if(0===c.size)return m;if(0>=c.dimension)return m.set(0),m;var h=d;d=h.join();g=a[d];if(!g){g=h.length;for(var q=
["function gradient(dst,src){var s\x3dsrc.shape.slice();"],t=0;t<1<<g;++t){for(var v=[],w=0;w<g;++w)t&1<<w&&v.push(w+1);for(var A=0;A<1<<v.length;++A){var z=v.slice();for(w=0;w<v.length;++w)A&1<<w&&(z[w]=-z[w]);w=z;z=g-w.length;for(var y=[],B=[],C=[],u=0;u<g;++u)0<=w.indexOf(u+1)?C.push("0"):0<=w.indexOf(-(u+1))?C.push("s["+u+"]-1"):(C.push("-1"),y.push("1"),B.push("s["+u+"]-2"));B=".lo("+y.join()+").hi("+B.join()+")";0===y.length&&(B="");if(0<z){q.push("if(1");for(u=0;u<g;++u)0<=w.indexOf(u+1)||
0<=w.indexOf(-(u+1))||q.push("\x26\x26s[",u,"]\x3e2");q.push("){grad",z,"(src.pick(",C.join(),")",B);for(u=0;u<g;++u)0<=w.indexOf(u+1)||0<=w.indexOf(-(u+1))||q.push(",dst.pick(",C.join(),",",u,")",B);q.push(");")}for(u=0;u<w.length;++u){y=Math.abs(w[u])-1;var F="dst.pick("+C.join()+","+y+")"+B;switch(h[y]){case "clamp":var H=C.slice(),J=C.slice();0>w[u]?H[y]="s["+y+"]-2":J[y]="1";0===z?q.push("if(s[",y,"]\x3e1){dst.set(",C.join(),",",y,",0.5*(src.get(",H.join(),")-src.get(",J.join(),")))}else{dst.set(",
C.join(),",",y,",0)};"):q.push("if(s[",y,"]\x3e1){diff(",F,",src.pick(",H.join(),")",B,",src.pick(",J.join(),")",B,");}else{zero(",F,");};");break;case "mirror":0===z?q.push("dst.set(",C.join(),",",y,",0);"):q.push("zero(",F,");");break;case "wrap":H=C.slice();J=C.slice();0>w[u]?(H[y]="s["+y+"]-2",J[y]="0"):(H[y]="s["+y+"]-1",J[y]="1");0===z?q.push("if(s[",y,"]\x3e2){dst.set(",C.join(),",",y,",0.5*(src.get(",H.join(),")-src.get(",J.join(),")))}else{dst.set(",C.join(),",",y,",0)};"):q.push("if(s[",
y,"]\x3e2){diff(",F,",src.pick(",H.join(),")",B,",src.pick(",J.join(),")",B,");}else{zero(",F,");};");break;default:throw Error("ndarray-gradient: Invalid boundary condition");}}0<z&&q.push("};")}}q.push("return dst;};return gradient");h=["diff","zero"];v=[f,l];for(t=1;t<=g;++t)h.push("grad"+t),v.push(r(t));h.push(q.join(""));g=Function.apply(void 0,h).apply(void 0,v);k[d]=g}return g(m,c)};var n=b("dup"),p=b("cwise-compiler"),k={},a={},e={body:"",args:[],thisVars:[],localVars:[]},f=p({args:["array",
"array","array"],pre:e,post:e,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out\x3d0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),l=p({args:["array"],pre:e,post:e,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out\x3d0",thisVars:[],localVars:[]},funcName:"zero"})},{"cwise-compiler":151,dup:176}],463:[function(b,D,G){function r(a,e){var f=Math.floor(e);e-=f;var l=0<=f+1&&
f+1<a.shape[0],m=0<=f&&f<a.shape[0]?+a.get(f):0;a=l?+a.get(f+1):0;return(1-e)*m+e*a}function n(a,e,f){var l=Math.floor(e);e-=l;var m=0<=l&&l<a.shape[0],c=0<=l+1&&l+1<a.shape[0],d=Math.floor(f);f-=d;var g=0<=d&&d<a.shape[1],h=0<=d+1&&d+1<a.shape[1],q=m&&g?a.get(l,d):0;m=m&&h?a.get(l,d+1):0;g=c&&g?a.get(l+1,d):0;a=c&&h?a.get(l+1,d+1):0;return(1-f)*((1-e)*q+e*g)+f*((1-e)*m+e*a)}function p(a,e,f,l){var m=Math.floor(e);e-=m;var c=0<=m&&m<a.shape[0],d=0<=m+1&&m+1<a.shape[0],g=Math.floor(f);f-=g;var h=0<=
g&&g<a.shape[1],q=0<=g+1&&g+1<a.shape[1],t=Math.floor(l);l-=t;var v=0<=t&&t<a.shape[2],w=0<=t+1&&t+1<a.shape[2],A=c&&h&&v?a.get(m,g,t):0,z=c&&q&&v?a.get(m,g+1,t):0,y=d&&h&&v?a.get(m+1,g,t):0;v=d&&q&&v?a.get(m+1,g+1,t):0;var B=c&&h&&w?a.get(m,g,t+1):0;c=c&&q&&w?a.get(m,g+1,t+1):0;h=d&&h&&w?a.get(m+1,g,t+1):0;a=d&&q&&w?a.get(m+1,g+1,t+1):0;return(1-l)*((1-f)*((1-e)*A+e*y)+f*((1-e)*z+e*v))+l*((1-f)*((1-e)*B+e*h)+f*((1-e)*c+e*a))}function k(a){var e=a.shape.length|0,f=Array(e),l=Array(e),m=Array(e),c=
Array(e),d;for(d=0;d<e;++d){var g=+arguments[d+1];f[d]=Math.floor(g);l[d]=g-f[d];m[d]=0<=f[d]&&f[d]<a.shape[d];c[d]=0<=f[d]+1&&f[d]+1<a.shape[d]}g=0;var h;d=0;a:for(;d<1<<e;++d){var q=1;var t=a.offset;for(h=0;h<e;++h)if(d&1<<h){if(!c[h])continue a;q*=l[h];t+=a.stride[h]*(f[h]+1)}else{if(!m[h])continue a;q*=1-l[h];t+=a.stride[h]*f[h]}g+=q*a.data[t]}return g}D.exports=function(a,e,f,l){switch(a.shape.length){case 0:return 0;case 1:return r(a,e);case 2:return n(a,e,f);case 3:return p(a,e,f,l);default:return k.apply(void 0,
arguments)}};D.exports.d1=r;D.exports.d2=n;D.exports.d3=p},{}],464:[function(b,D,G){function r(d){if(!d)return k;for(var g=0;g<d.args.length;++g){var h=d.args[g];d.args[g]=0===g?{name:h,lvalue:!0,rvalue:!!d.rvalue,count:d.count||1}:{name:h,lvalue:!1,rvalue:!0,count:1}}d.thisVars||(d.thisVars=[]);d.localVars||(d.localVars=[]);return d}function n(d){for(var g=[],h=0;h<d.args.length;++h)g.push("a"+h);g=new Function("P",["return function ",d.funcName,"_ndarrayops(",g.join(","),") {P(",g.join(","),");return a0}"].join(""));
d=p({args:d.args,pre:r(d.pre),body:r(d.body),post:r(d.proc),funcName:d.funcName});return g(d)}var p=b("cwise-compiler"),k={body:"",args:[],thisVars:[],localVars:[]},a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"\x26",bor:"|",bxor:"^",lshift:"\x3c\x3c",rshift:"\x3e\x3e",rrshift:"\x3e\x3e\x3e"};(function(){for(var d in a){var g=a[d];G[d]=n({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+g+"c"},funcName:d});G[d+"eq"]=n({args:["array","array"],body:{args:["a","b"],body:"a"+g+
"\x3db"},rvalue:!0,funcName:d+"eq"});G[d+"s"]=n({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+g+"s"},funcName:d+"s"});G[d+"seq"]=n({args:["array","scalar"],body:{args:["a","s"],body:"a"+g+"\x3ds"},rvalue:!0,funcName:d+"seq"})}})();var e={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var d in e){var g=e[d];G[d]=n({args:["array","array"],body:{args:["a","b"],body:"a\x3d"+g+"b"},funcName:d});G[d+"eq"]=n({args:["array"],body:{args:["a"],body:"a\x3d"+g+"a"},rvalue:!0,
count:2,funcName:d+"eq"})}})();var f={and:"\x26\x26",or:"||",eq:"\x3d\x3d\x3d",neq:"!\x3d\x3d",lt:"\x3c",gt:"\x3e",leq:"\x3c\x3d",geq:"\x3e\x3d"};(function(){for(var d in f){var g=f[d];G[d]=n({args:["array","array","array"],body:{args:["a","b","c"],body:"a\x3db"+g+"c"},funcName:d});G[d+"s"]=n({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a\x3db"+g+"s"},funcName:d+"s"});G[d+"eq"]=n({args:["array","array"],body:{args:["a","b"],body:"a\x3da"+g+"b"},rvalue:!0,count:2,funcName:d+"eq"});
G[d+"seq"]=n({args:["array","scalar"],body:{args:["a","s"],body:"a\x3da"+g+"s"},rvalue:!0,count:2,funcName:d+"seq"})}})();var l="abs acos asin atan ceil cos exp floor log round sin sqrt tan".split(" ");(function(){for(var d=0;d<l.length;++d){var g=l[d];G[g]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b)",thisVars:["this_f"]},funcName:g});G[g+"eq"]=n({args:["array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},
body:{args:["a"],body:"a\x3dthis_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"})}})();var m=["max","min","atan2","pow"];(function(){for(var d=0;d<m.length;++d){var g=m[d];G[g]=n({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",thisVars:["this_f"]},funcName:g});G[g+"s"]=n({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(b,c)",
thisVars:["this_f"]},funcName:g+"s"});G[g+"eq"]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"eq"});G[g+"seq"]=n({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"seq"})}})();var c=["atan2","pow"];(function(){for(var d=0;d<c.length;++d){var g=
c[d];G[g+"op"]=n({args:["array","array","array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:g+"op"});G[g+"ops"]=n({args:["array","array","scalar"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a\x3dthis_f(c,b)",thisVars:["this_f"]},funcName:g+"ops"});G[g+"opeq"]=n({args:["array","array"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a",
"b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opeq"});G[g+"opseq"]=n({args:["array","scalar"],pre:{args:[],body:"this_f\x3dMath."+g,thisVars:["this_f"]},body:{args:["a","b"],body:"a\x3dthis_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:g+"opseq"})}})();G.any=p({args:["array"],pre:k,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"});
G.all=p({args:["array"],pre:k,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"});G.sum=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"});G.prod=
p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*\x3da",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"});G.norm2squared=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],
thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"});G.norm2=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+\x3da*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"});G.norminf=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,
count:4}],body:"if(-a\x3ethis_s){this_s\x3d-a}else if(a\x3ethis_s){this_s\x3da}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"});G.norm1=p({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s\x3d0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+\x3da\x3c0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"});
G.sup=p({args:["array"],pre:{body:"this_h\x3d-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3ethis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});G.inf=p({args:["array"],pre:{body:"this_h\x3dInfinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_\x3cthis_h)this_h\x3d_inline_1_arg0_",args:[{name:"_inline_1_arg0_",
lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}});G.argmin=p({args:["index","array","shape"],pre:{body:"{this_v\x3dInfinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3cthis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});G.argmax=p({args:["index","array","shape"],pre:{body:"{this_v\x3d-Infinity;this_i\x3d_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,
count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_\x3ethis_v){this_v\x3d_inline_1_arg1_;for(var _inline_1_k\x3d0;_inline_1_k\x3c_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]\x3d_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}});G.random=
n({args:["array"],pre:{args:[],body:"this_f\x3dMath.random",thisVars:["this_f"]},body:{args:["a"],body:"a\x3dthis_f()",thisVars:["this_f"]},funcName:"random"});G.assign=n({args:["array","array"],body:{args:["a","b"],body:"a\x3db"},funcName:"assign"});G.assigns=n({args:["array","scalar"],body:{args:["a","b"],body:"a\x3db"},funcName:"assigns"});G.equals=p({args:["array","array"],pre:k,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!\x3d\x3dy){return false}",
localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":151}],465:[function(b,D,G){var r=b("ndarray"),n=b("./doConvert.js");D.exports=function(p,k){for(var a=[],e=p,f=1;Array.isArray(e);)a.push(e.length),f*=e.length,e=e[0];if(0===a.length)return r();k||(k=r(new Float64Array(f),a));n(k,p);return k}},{"./doConvert.js":466,ndarray:469}],466:[function(b,D,G){D.exports=b("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",
args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v\x3d_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i\x3d0;_inline_1_i\x3c_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v\x3d_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_\x3d_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i",
"_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":151}],467:[function(b,D,G){function r(e){switch(e){case "uint8":return[a.mallocUint8,a.freeUint8];case "uint16":return[a.mallocUint16,a.freeUint16];case "uint32":return[a.mallocUint32,a.freeUint32];case "int8":return[a.mallocInt8,a.freeInt8];case "int16":return[a.mallocInt16,a.freeInt16];case "int32":return[a.mallocInt32,a.freeInt32];case "float32":return[a.mallocFloat,a.freeFloat];
case "float64":return[a.mallocDouble,a.freeDouble];default:return null}}function n(e){for(var f=[],l=0;l<e;++l)f.push("s"+l);for(l=0;l<e;++l)f.push("n"+l);for(l=1;l<e;++l)f.push("d"+l);for(l=1;l<e;++l)f.push("e"+l);for(l=1;l<e;++l)f.push("f"+l);return f}function p(e,f){function l(w){return"generic"===f?["data.get(",w,")"].join(""):["data[",w,"]"].join("")}function m(w,A){return"generic"===f?["data.set(",w,",",A,")"].join(""):["data[",w,"]\x3d",A].join("")}var c=["'use strict'"],d=["ndarrayInsertionSort",
e.join("d"),f].join(""),g=["left","right","data","offset"].concat(n(e.length)),h=r(f),q=["i,j,cptr,ptr\x3dleft*s0+offset"];if(1<e.length){for(var t=[],v=1;v<e.length;++v)q.push("i"+v),t.push("n"+v);h?q.push("scratch\x3dmalloc("+t.join("*")+")"):q.push("scratch\x3dnew Array("+t.join("*")+")");q.push("dptr","sptr","a","b")}else q.push("scratch");c.push(["function ",d,"(",g.join(","),"){var ",q.join(",")].join(""),"for(i\x3dleft+1;i\x3c\x3dright;++i){","j\x3di;ptr+\x3ds0","cptr\x3dptr");if(1<e.length){c.push("dptr\x3d0;sptr\x3dptr");
for(v=e.length-1;0<=v;--v)g=e[v],0!==g&&c.push(["for(i",g,"\x3d0;i",g,"\x3cn",g,";++i",g,"){"].join(""));c.push("scratch[dptr++]\x3d",l("sptr"));for(v=0;v<e.length;++v)g=e[v],0!==g&&c.push("sptr+\x3dd"+g,"}");c.push("__g:while(j--\x3eleft){","dptr\x3d0","sptr\x3dcptr-s0");for(v=1;v<e.length;++v)1===v&&c.push("__l:"),c.push(["for(i",v,"\x3d0;i",v,"\x3cn",v,";++i",v,"){"].join(""));c.push(["a\x3d",l("sptr"),"\nb\x3dscratch[dptr]\nif(a\x3cb){break __g}\nif(a\x3eb){break __l}"].join(""));for(v=e.length-
1;1<=v;--v)c.push("sptr+\x3de"+v,"dptr+\x3df"+v,"}");c.push("dptr\x3dcptr;sptr\x3dcptr-s0");for(v=e.length-1;0<=v;--v)g=e[v],0!==g&&c.push(["for(i",g,"\x3d0;i",g,"\x3cn",g,";++i",g,"){"].join(""));c.push(m("dptr",l("sptr")));for(v=0;v<e.length;++v)g=e[v],0!==g&&c.push(["dptr+\x3dd",g,";sptr+\x3dd",g].join(""),"}");c.push("cptr-\x3ds0\n}");c.push("dptr\x3dcptr;sptr\x3d0");for(v=e.length-1;0<=v;--v)g=e[v],0!==g&&c.push(["for(i",g,"\x3d0;i",g,"\x3cn",g,";++i",g,"){"].join(""));c.push(m("dptr","scratch[sptr++]"));
for(v=0;v<e.length;++v)g=e[v],0!==g&&c.push("dptr+\x3dd"+g,"}")}else c.push("scratch\x3d"+l("ptr"),"while((j--\x3eleft)\x26\x26("+l("cptr-s0")+"\x3escratch)){",m("cptr",l("cptr-s0")),"cptr-\x3ds0","}",m("cptr","scratch"));c.push("}");1<e.length&&h&&c.push("free(scratch)");c.push("} return "+d);if(h)return e=new Function("malloc","free",c.join("\n")),e(h[0],h[1]);e=new Function(c.join("\n"));return e()}function k(e,f,l){function m(P){return["(offset+",P,"*s0)"].join("")}function c(P){return"generic"===
f?["data.get(",P,")"].join(""):["data[",P,"]"].join("")}function d(P,N){return"generic"===f?["data.set(",P,",",N,")"].join(""):["data[",P,"]\x3d",N].join("")}function g(P,N,Q){if(1===P.length)F.push("ptr0\x3d"+m(P[0]));else for(var O=0;O<P.length;++O)F.push(["b_ptr",O,"\x3ds0*",P[O]].join(""));N&&F.push("pivot_ptr\x3d0");F.push("ptr_shift\x3doffset");for(O=e.length-1;0<=O;--O){var T=e[O];0!==T&&F.push(["for(i",T,"\x3d0;i",T,"\x3cn",T,";++i",T,"){"].join(""))}if(1<P.length)for(O=0;O<P.length;++O)F.push(["ptr",
O,"\x3db_ptr",O,"+ptr_shift"].join(""));F.push(Q);N&&F.push("++pivot_ptr");for(O=0;O<e.length;++O)T=e[O],0!==T&&(1<P.length?F.push("ptr_shift+\x3dd"+T):F.push("ptr0+\x3dd"+T),F.push("}"))}function h(P,N,Q,O){if(1===N.length)F.push("ptr0\x3d"+m(N[0]));else{for(var T=0;T<N.length;++T)F.push(["b_ptr",T,"\x3ds0*",N[T]].join(""));F.push("ptr_shift\x3doffset")}Q&&F.push("pivot_ptr\x3d0");P&&F.push(P+":");for(T=1;T<e.length;++T)F.push(["for(i",T,"\x3d0;i",T,"\x3cn",T,";++i",T,"){"].join(""));if(1<N.length)for(T=
0;T<N.length;++T)F.push(["ptr",T,"\x3db_ptr",T,"+ptr_shift"].join(""));F.push(O);for(T=e.length-1;1<=T;--T)Q&&F.push("pivot_ptr+\x3df"+T),1<N.length?F.push("ptr_shift+\x3de"+T):F.push("ptr0+\x3de"+T),F.push("}")}function q(){1<e.length&&I&&F.push("free(pivot1)","free(pivot2)")}function t(P,N){P="el"+P;N="el"+N;if(1<e.length){var Q="__l"+ ++M;h(Q,[P,N],!1,["comp\x3d",c("ptr0"),"-",c("ptr1"),"\nif(comp\x3e0){tmp0\x3d",P,";",P,"\x3d",N,";",N,"\x3dtmp0;break ",Q,"}\nif(comp\x3c0){break ",Q,"}"].join(""))}else F.push(["if(",
c(m(P)),"\x3e",c(m(N)),"){tmp0\x3d",P,";",P,"\x3d",N,";",N,"\x3dtmp0}"].join(""))}function v(P,N){1<e.length?g([P,N],!1,d("ptr0",c("ptr1"))):F.push(d(m(P),c(m(N))))}function w(P,N,Q){if(1<e.length){var O="__l"+ ++M;h(O,[N],!0,[P,"\x3d",c("ptr0"),"-pivot",Q,"[pivot_ptr]\nif(",P,"!\x3d\x3d0){break ",O,"}"].join(""))}else F.push([P,"\x3d",c(m(N)),"-pivot",Q].join(""))}function A(P,N){1<e.length?g([P,N],!1,["tmp\x3d",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1","tmp")].join("")):F.push(["ptr0\x3d",
m(P),"\nptr1\x3d",m(N),"\ntmp\x3d",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1","tmp")].join(""))}function z(P,N,Q){1<e.length?(g([P,N,Q],!1,["tmp\x3d",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1",c("ptr2")),"\n",d("ptr2","tmp")].join("")),F.push("++"+N,"--"+Q)):F.push(["ptr0\x3d",m(P),"\nptr1\x3d",m(N),"\nptr2\x3d",m(Q),"\n++",N,"\n--",Q,"\ntmp\x3d",c("ptr0"),"\n",d("ptr0",c("ptr1")),"\n",d("ptr1",c("ptr2")),"\n",d("ptr2","tmp")].join(""))}function y(P,N){A(P,N);F.push("--"+N)}function B(P,
N,Q){1<e.length?g([P,N],!0,[d("ptr0",c("ptr1")),"\n",d("ptr1",["pivot",Q,"[pivot_ptr]"].join(""))].join("")):F.push(d(m(P),c(m(N))),d(m(N),"pivot"+Q))}function C(P,N){F.push(["if((",N,"-",P,")\x3c\x3d32){\ninsertionSort(",P,",",N,",data,offset,",n(e.length).join(","),")\n}else{\n",H,"(",P,",",N,",data,offset,",n(e.length).join(","),")\n}"].join(""))}function u(P,N,Q){1<e.length?(F.push(["__l",++M,":while(true){"].join("")),g([P],!0,["if(",c("ptr0"),"!\x3d\x3dpivot",N,"[pivot_ptr]){break __l",M,"}"].join("")),
F.push(Q,"}")):F.push(["while(",c(m(P)),"\x3d\x3d\x3dpivot",N,"){",Q,"}"].join(""))}var F=["'use strict'"],H=["ndarrayQuickSort",e.join("d"),f].join(""),J=["left","right","data","offset"].concat(n(e.length)),I=r(f),M=0;F.push(["function ",H,"(",J.join(","),"){"].join(""));J="sixth\x3d((right-left+1)/6)|0 index1\x3dleft+sixth index5\x3dright-sixth index3\x3d(left+right)\x3e\x3e1 index2\x3dindex3-sixth index4\x3dindex3+sixth el1\x3dindex1 el2\x3dindex2 el3\x3dindex3 el4\x3dindex4 el5\x3dindex5 less\x3dleft+1 great\x3dright-1 pivots_are_equal\x3dtrue tmp tmp0 x y z k ptr0 ptr1 ptr2 comp_pivot1\x3d0 comp_pivot2\x3d0 comp\x3d0".split(" ");
if(1<e.length){for(var E=[],L=1;L<e.length;++L)E.push("n"+L),J.push("i"+L);for(L=0;8>L;++L)J.push("b_ptr"+L);J.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize\x3d"+E.join("*"));I?J.push("pivot1\x3dmalloc(elementSize)","pivot2\x3dmalloc(elementSize)"):J.push("pivot1\x3dnew Array(elementSize),pivot2\x3dnew Array(elementSize)")}else J.push("pivot1","pivot2");F.push("var "+J.join(","));t(1,2);t(4,5);t(1,3);t(2,3);t(1,4);t(3,4);t(2,5);t(2,3);t(4,5);1<e.length?g("el1 el2 el3 el4 el5 index1 index3 index5".split(" "),
!0,["pivot1[pivot_ptr]\x3d",c("ptr1"),"\npivot2[pivot_ptr]\x3d",c("ptr3"),"\npivots_are_equal\x3dpivots_are_equal\x26\x26(pivot1[pivot_ptr]\x3d\x3d\x3dpivot2[pivot_ptr])\nx\x3d",c("ptr0"),"\ny\x3d",c("ptr2"),"\nz\x3d",c("ptr4"),"\n",d("ptr5","x"),"\n",d("ptr6","y"),"\n",d("ptr7","z")].join("")):F.push(["pivot1\x3d",c(m("el2")),"\npivot2\x3d",c(m("el4")),"\npivots_are_equal\x3dpivot1\x3d\x3d\x3dpivot2\nx\x3d",c(m("el1")),"\ny\x3d",c(m("el3")),"\nz\x3d",c(m("el5")),"\n",d(m("index1"),"x"),"\n",d(m("index3"),
"y"),"\n",d(m("index5"),"z")].join(""));v("index2","left");v("index4","right");F.push("if(pivots_are_equal){");F.push("for(k\x3dless;k\x3c\x3dgreat;++k){");w("comp","k",1);F.push("if(comp\x3d\x3d\x3d0){continue}");F.push("if(comp\x3c0){");F.push("if(k!\x3d\x3dless){");A("k","less");F.push("}");F.push("++less");F.push("}else{");F.push("while(true){");w("comp","great",1);F.push("if(comp\x3e0){");F.push("great--");F.push("}else if(comp\x3c0){");z("k","less","great");F.push("break");F.push("}else{");
y("k","great");F.push("break");F.push("}");F.push("}");F.push("}");F.push("}");F.push("}else{");F.push("for(k\x3dless;k\x3c\x3dgreat;++k){");w("comp_pivot1","k",1);F.push("if(comp_pivot1\x3c0){");F.push("if(k!\x3d\x3dless){");A("k","less");F.push("}");F.push("++less");F.push("}else{");w("comp_pivot2","k",2);F.push("if(comp_pivot2\x3e0){");F.push("while(true){");w("comp","great",2);F.push("if(comp\x3e0){");F.push("if(--great\x3ck){break}");F.push("continue");F.push("}else{");w("comp","great",1);F.push("if(comp\x3c0){");
z("k","less","great");F.push("}else{");y("k","great");F.push("}");F.push("break");F.push("}");F.push("}");F.push("}");F.push("}");F.push("}");F.push("}");B("left","(less-1)",1);B("right","(great+1)",2);C("left","(less-2)");C("(great+2)","right");F.push("if(pivots_are_equal){");q();F.push("return");F.push("}");F.push("if(less\x3cindex1\x26\x26great\x3eindex5){");u("less",1,"++less");u("great",2,"--great");F.push("for(k\x3dless;k\x3c\x3dgreat;++k){");w("comp_pivot1","k",1);F.push("if(comp_pivot1\x3d\x3d\x3d0){");
F.push("if(k!\x3d\x3dless){");A("k","less");F.push("}");F.push("++less");F.push("}else{");w("comp_pivot2","k",2);F.push("if(comp_pivot2\x3d\x3d\x3d0){");F.push("while(true){");w("comp","great",2);F.push("if(comp\x3d\x3d\x3d0){");F.push("if(--great\x3ck){break}");F.push("continue");F.push("}else{");w("comp","great",1);F.push("if(comp\x3c0){");z("k","less","great");F.push("}else{");y("k","great");F.push("}");F.push("break");F.push("}");F.push("}");F.push("}");F.push("}");F.push("}");F.push("}");q();
C("less","great");F.push("}return "+H);if(1<e.length&&I)return J=new Function("insertionSort","malloc","free",F.join("\n")),J(l,I[0],I[1]);J=new Function("insertionSort",F.join("\n"));return J(l)}var a=b("typedarray-pool");D.exports=function(e,f){var l=["'use strict'"],m=["ndarraySortWrapper",e.join("d"),f].join("");l.push(["function ",m,"(array){"].join(""));for(var c=["data\x3darray.data,offset\x3darray.offset|0,shape\x3darray.shape,stride\x3darray.stride"],d=0;d<e.length;++d)c.push(["s",d,"\x3dstride[",
d,"]|0,n",d,"\x3dshape[",d,"]|0"].join(""));var g=Array(e.length),h=[];for(d=0;d<e.length;++d){var q=e[d];0!==q&&(g[q]=0===h.length?"1":h.join("*"),h.push("n"+q))}var t=h=-1;for(d=0;d<e.length;++d)q=e[d],0!==q&&(0<h?c.push(["d",q,"\x3ds",q,"-d",h,"*n",h].join("")):c.push(["d",q,"\x3ds",q].join("")),h=q),q=e.length-1-d,0!==q&&(0<t?c.push(["e",q,"\x3ds",q,"-e",t,"*n",t,",f",q,"\x3d",g[q],"-f",t,"*n",t].join("")):c.push(["e",q,"\x3ds",q,",f",q,"\x3d",g[q]].join("")),t=q);l.push("var "+c.join(","));c=
["0","n0-1","data","offset"].concat(n(e.length));l.push(["if(n0\x3c\x3d32){insertionSort(",c.join(","),")}else{quickSort(",c.join(","),")}"].join(""));l.push("}return "+m);l=new Function("insertionSort","quickSort",l.join("\n"));m=p(e,f);e=k(e,f,m);return l(m,e)}},{"typedarray-pool":567}],468:[function(b,D,G){var r=b("./lib/compile_sort.js"),n={};D.exports=function(p){var k=p.order,a=p.dtype,e=[k,a].join(":"),f=n[e];f||(n[e]=f=r(k,a));f(p);return p}},{"./lib/compile_sort.js":467}],469:[function(b,
D,G){function r(m,c){return m[0]-c[0]}function n(){var m=this.stride,c=Array(m.length),d;for(d=0;d<c.length;++d)c[d]=[Math.abs(m[d]),d];c.sort(r);m=Array(c.length);for(d=0;d<m.length;++d)m[d]=c[d][1];return m}function p(m,c){var d=["View",c,"d",m].join("");0>c&&(d="View_Nil"+m);var g="generic"===m;if(-1===c)return c=new Function("function "+d+"(a){this.data\x3da;};var proto\x3d"+d+".prototype;proto.dtype\x3d'"+m+"';proto.index\x3dfunction(){return -1};proto.size\x3d0;proto.dimension\x3d-1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction(){return new "+
d+"(this.data);};proto.get\x3dproto.set\x3dfunction(){};proto.pick\x3dfunction(){return null};return function construct_"+d+"(a){return new "+d+"(a);}"),c();if(0===c)return c=new Function("TrivialArray","function "+d+"(a,d) {this.data \x3d a;this.offset \x3d d};var proto\x3d"+d+".prototype;proto.dtype\x3d'"+m+"';proto.index\x3dfunction(){return this.offset};proto.dimension\x3d0;proto.size\x3d1;proto.shape\x3dproto.stride\x3dproto.order\x3d[];proto.lo\x3dproto.hi\x3dproto.transpose\x3dproto.step\x3dfunction "+
d+"_copy() {return new "+d+"(this.data,this.offset)};proto.pick\x3dfunction "+d+"_pick(){return TrivialArray(this.data);};proto.valueOf\x3dproto.get\x3dfunction "+d+"_get(){return "+(g?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set\x3dfunction "+d+"_set(v){return "+(g?"this.data.set(this.offset,v)":"this.data[this.offset]\x3dv")+"};return function construct_"+d+"(a,b,c,d){return new "+d+"(a,d)}"),c(l[m][0]);var h=["'use strict'"];var q=a(c),t=q.map(function(z){return"i"+z}),v=
"this.offset+"+q.map(function(z){return"this.stride["+z+"]*i"+z}).join("+"),w=q.map(function(z){return"b"+z}).join(","),A=q.map(function(z){return"c"+z}).join(",");h.push("function "+d+"(a,"+w+","+A+",d){this.data\x3da","this.shape\x3d["+w+"]","this.stride\x3d["+A+"]","this.offset\x3dd|0}","var proto\x3d"+d+".prototype","proto.dtype\x3d'"+m+"'","proto.dimension\x3d"+c);h.push("Object.defineProperty(proto,'size',{get:function "+d+"_size(){return "+q.map(function(z){return"this.shape["+z+"]"}).join("*"),
"}})");1===c?h.push("proto.order\x3d[0]"):(h.push("Object.defineProperty(proto,'order',{get:"),4>c?(h.push("function "+d+"_order(){"),2===c?h.push("return (Math.abs(this.stride[0])\x3eMath.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===c&&h.push("var s0\x3dMath.abs(this.stride[0]),s1\x3dMath.abs(this.stride[1]),s2\x3dMath.abs(this.stride[2]);if(s0\x3es1){if(s1\x3es2){return [2,1,0];}else if(s0\x3es2){return [1,2,0];}else{return [1,0,2];}}else if(s0\x3es2){return [2,0,1];}else if(s2\x3es1){return [0,1,2];}else{return [0,2,1];}}})")):
h.push("ORDER})"));h.push("proto.set\x3dfunction "+d+"_set("+t.join(",")+",v){");g?h.push("return this.data.set("+v+",v)}"):h.push("return this.data["+v+"]\x3dv}");h.push("proto.get\x3dfunction "+d+"_get("+t.join(",")+"){");g?h.push("return this.data.get("+v+")}"):h.push("return this.data["+v+"]}");h.push("proto.index\x3dfunction "+d+"_index(",t.join(),"){return "+v+"}");h.push("proto.hi\x3dfunction "+d+"_hi("+t.join(",")+"){return new "+d+"(this.data,"+q.map(function(z){return["(typeof i",z,"!\x3d\x3d'number'||i",
z,"\x3c0)?this.shape[",z,"]:i",z,"|0"].join("")}).join(",")+","+q.map(function(z){return"this.stride["+z+"]"}).join(",")+",this.offset)}");g=q.map(function(z){return"a"+z+"\x3dthis.shape["+z+"]"});v=q.map(function(z){return"c"+z+"\x3dthis.stride["+z+"]"});h.push("proto.lo\x3dfunction "+d+"_lo("+t.join(",")+"){var b\x3dthis.offset,d\x3d0,"+g.join(",")+","+v.join(","));for(g=0;g<c;++g)h.push("if(typeof i"+g+"\x3d\x3d\x3d'number'\x26\x26i"+g+"\x3e\x3d0){d\x3di"+g+"|0;b+\x3dc"+g+"*d;a"+g+"-\x3dd}");h.push("return new "+
d+"(this.data,"+q.map(function(z){return"a"+z}).join(",")+","+q.map(function(z){return"c"+z}).join(",")+",b)}");h.push("proto.step\x3dfunction "+d+"_step("+t.join(",")+"){var "+q.map(function(z){return"a"+z+"\x3dthis.shape["+z+"]"}).join(",")+","+q.map(function(z){return"b"+z+"\x3dthis.stride["+z+"]"}).join(",")+",c\x3dthis.offset,d\x3d0,ceil\x3dMath.ceil");for(g=0;g<c;++g)h.push("if(typeof i"+g+"\x3d\x3d\x3d'number'){d\x3di"+g+"|0;if(d\x3c0){c+\x3db"+g+"*(a"+g+"-1);a"+g+"\x3dceil(-a"+g+"/d)}else{a"+
g+"\x3dceil(a"+g+"/d)}b"+g+"*\x3dd}");h.push("return new "+d+"(this.data,"+q.map(function(z){return"a"+z}).join(",")+","+q.map(function(z){return"b"+z}).join(",")+",c)}");v=Array(c);w=Array(c);for(g=0;g<c;++g)v[g]="a[i"+g+"]",w[g]="b[i"+g+"]";h.push("proto.transpose\x3dfunction "+d+"_transpose("+t+"){"+t.map(function(z,y){return z+"\x3d("+z+"\x3d\x3d\x3dundefined?"+y+":"+z+"|0)"}).join(";"),"var a\x3dthis.shape,b\x3dthis.stride;return new "+d+"(this.data,"+v.join(",")+","+w.join(",")+",this.offset)}");
h.push("proto.pick\x3dfunction "+d+"_pick("+t+"){var a\x3d[],b\x3d[],c\x3dthis.offset");for(g=0;g<c;++g)h.push("if(typeof i"+g+"\x3d\x3d\x3d'number'\x26\x26i"+g+"\x3e\x3d0){c\x3d(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");h.push("var ctor\x3dCTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}");h.push("return function construct_"+d+"(data,shape,stride,offset){return new "+d+"(data,"+q.map(function(z){return"shape["+z+"]"}).join(",")+","+q.map(function(z){return"stride["+
z+"]"}).join(",")+",offset)}");c=new Function("CTOR_LIST","ORDER",h.join("\n"));return c(l[m],n)}function k(m){if(e(m))return"buffer";if(f)switch(Object.prototype.toString.call(m)){case "[object Float64Array]":return"float64";case "[object Float32Array]":return"float32";case "[object Int8Array]":return"int8";case "[object Int16Array]":return"int16";case "[object Int32Array]":return"int32";case "[object Uint8Array]":return"uint8";case "[object Uint16Array]":return"uint16";case "[object Uint32Array]":return"uint32";
case "[object Uint8ClampedArray]":return"uint8_clamped";case "[object BigInt64Array]":return"bigint64";case "[object BigUint64Array]":return"biguint64"}return Array.isArray(m)?"array":"generic"}var a=b("iota-array"),e=b("is-buffer"),f="undefined"!==typeof Float64Array,l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};(function(){for(var m in l)l[m].push(p(m,-1))});D.exports=function(m,c,d,g){if(void 0===
m){var h=l.array[0];return h([])}"number"===typeof m&&(m=[m]);void 0===c&&(c=[m.length]);h=c.length;if(void 0===d){d=Array(h);for(var q=h-1,t=1;0<=q;--q)d[q]=t,t*=c[q]}if(void 0===g)for(q=g=0;q<h;++q)0>d[q]&&(g-=(c[q]-1)*d[q]);q=k(m);for(t=l[q];t.length<=h+1;)t.push(p(q,t.length-1));h=t[h+1];return h(m,c,d,g)}},{"iota-array":437,"is-buffer":439}],470:[function(b,D,G){var r=b("double-bits"),n=Math.pow(2,-1074);D.exports=function(p,k){if(isNaN(p)||isNaN(k))return NaN;if(p===k)return p;if(0===p)return 0>
k?-n:n;var a=r.hi(p),e=r.lo(p);k>p===0<p?4294967295===e?(a+=1,e=0):e+=1:0===e?(e=4294967295,--a):--e;return r.pack(e,a)}},{"double-bits":173}],471:[function(b,D,G){function r(f,l,m,c){return["C",f,l,m,c,m,c]}function n(f,l,m,c,d,g){return["C",f/3+2/3*m,l/3+2/3*c,d/3+2/3*m,g/3+2/3*c,d,g]}function p(f,l,m,c,d,g,h,q,t,v){if(v)y=v[0],g=v[1],A=v[2],z=v[3];else{y=k(f,l,-d);f=y.x;l=y.y;y=k(q,t,-d);q=y.x;t=y.y;y=(f-q)/2;A=(l-t)/2;z=y*y/(m*m)+A*A/(c*c);1<z&&(z=Math.sqrt(z),m*=z,c*=z);z=m*m;var w=c*c;g=(g==
h?-1:1)*Math.sqrt(Math.abs((z*w-z*A*A-w*y*y)/(z*A*A+w*y*y)));Infinity==g&&(g=1);var A=g*m*A/c+(f+q)/2,z=g*-c*y/m+(l+t)/2,y=Math.asin(((l-z)/c).toFixed(9));g=Math.asin(((t-z)/c).toFixed(9));y=f<A?a-y:y;g=q<A?a-g:g;0>y&&(y=2*a+y);0>g&&(g=2*a+g);h&&y>g&&(y-=2*a);!h&&g>y&&(g-=2*a)}if(Math.abs(g-y)>e){var B=g;w=q;var C=t;g=y+e*(h&&g>y?1:-1);q=A+m*Math.cos(g);t=z+c*Math.sin(g);B=p(q,t,m,c,d,0,h,w,C,[g,B,A,z])}h=Math.tan((g-y)/4);m=4/3*m*h;c=4/3*c*h;f=[2*f-(f+m*Math.sin(y)),2*l-(l-c*Math.cos(y)),q+m*Math.sin(g),
t-c*Math.cos(g),q,t];if(v)return f;B&&(f=f.concat(B));for(v=0;v<f.length;)l=k(f[v],f[v+1],d),f[v++]=l.x,f[v++]=l.y;return f}function k(f,l,m){return{x:f*Math.cos(m)-l*Math.sin(m),y:f*Math.sin(m)+l*Math.cos(m)}}var a=Math.PI,e=a/180*120;D.exports=function(f){for(var l,m=[],c=0,d=0,g=0,h=0,q=null,t=null,v=0,w=0,A=0,z=f.length;A<z;A++){var y=f[A],B=y[0];switch(B){case "M":g=y[1];h=y[2];break;case "A":y=p(v,w,y[1],y[2],a/180*y[3],y[4],y[5],y[6],y[7]);y.unshift("C");7<y.length&&(m.push(y.splice(0,7)),
y.unshift("C"));break;case "S":if("C"==l||"S"==l)v+=v-c,w+=w-d;y=["C",v,w,y[1],y[2],y[3],y[4]];break;case "T":"Q"==l||"T"==l?(q=2*v-q,t=2*w-t):(q=v,t=w);y=n(v,w,q,t,y[1],y[2]);break;case "Q":q=y[1];t=y[2];y=n(v,w,y[1],y[2],y[3],y[4]);break;case "L":y=r(v,w,y[1],y[2]);break;case "H":y=r(v,w,y[1],w);break;case "V":y=r(v,w,v,y[1]);break;case "Z":y=r(v,w,g,h)}l=B;v=y[y.length-2];w=y[y.length-1];4<y.length?(c=y[y.length-4],d=y[y.length-3]):(c=v,d=w);m.push(y)}return m}},{}],472:[function(b,D,G){G.vertexNormals=
function(r,n,p){var k=n.length,a=Array(k);p=void 0===p?1E-6:p;for(var e=0;e<k;++e)a[e]=[0,0,0];for(e=0;e<r.length;++e)for(var f=r[e],l,m=f[f.length-1],c=f[0],d=0;d<f.length;++d){l=m;m=c;c=f[(d+1)%f.length];var g=n[l],h=n[m],q=n[c],t=Array(3),v=0,w=Array(3),A=0;for(l=0;3>l;++l)t[l]=g[l]-h[l],v+=t[l]*t[l],w[l]=q[l]-h[l],A+=w[l]*w[l];if(v*A>p)for(g=a[m],v=1/Math.sqrt(v*A),l=0;3>l;++l)A=(l+1)%3,h=(l+2)%3,g[l]+=v*(w[A]*t[h]-w[h]*t[A])}for(e=0;e<k;++e){g=a[e];for(l=r=0;3>l;++l)r+=g[l]*g[l];if(r>p)for(v=
1/Math.sqrt(r),l=0;3>l;++l)g[l]*=v;else for(l=0;3>l;++l)g[l]=0}return a};G.faceNormals=function(r,n,p){var k=r.length,a=Array(k);p=void 0===p?1E-6:p;for(var e=0;e<k;++e){for(var f=r[e],l=Array(3),m=0;3>m;++m)l[m]=n[f[m]];f=Array(3);var c=Array(3);for(m=0;3>m;++m)f[m]=l[1][m]-l[0][m],c[m]=l[2][m]-l[0][m];l=Array(3);var d=0;for(m=0;3>m;++m){var g=(m+1)%3,h=(m+2)%3;l[m]=f[g]*c[h]-f[h]*c[g];d+=l[m]*l[m]}d=d>p?1/Math.sqrt(d):0;for(m=0;3>m;++m)l[m]*=d;a[e]=l}return a}},{}],473:[function(b,D,G){var r=Object.getOwnPropertySymbols,
n=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;D.exports=function(){try{if(!Object.assign)return!1;var k=new String("abc");k[5]="de";if("5"===Object.getOwnPropertyNames(k)[0])return!1;var a={};for(k=0;10>k;k++)a["_"+String.fromCharCode(k)]=k;if("0123456789"!==Object.getOwnPropertyNames(a).map(function(f){return a[f]}).join(""))return!1;var e={};"abcdefghijklmnopqrst".split("").forEach(function(f){e[f]=f});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},e)).join("")?
!1:!0}catch(f){return!1}}()?Object.assign:function(k,a){if(null===k||void 0===k)throw new TypeError("Object.assign cannot be called with null or undefined");var e=Object(k);for(var f,l=1;l<arguments.length;l++){var m=Object(arguments[l]);for(var c in m)n.call(m,c)&&(e[c]=m[c]);if(r){f=r(m);for(var d=0;d<f.length;d++)p.call(m,f[d])&&(e[f[d]]=m[f[d]])}}return e}},{}],474:[function(b,D,G){D.exports=function(r,n,p,k,a,e,f,l,m,c){var d=n+e+c;if(0<g){var g=Math.sqrt(d+1);r[0]=.5*(f-m)/g;r[1]=.5*(l-k)/g;
r[2]=.5*(p-e)/g;r[3]=.5*g}else c=Math.max(n,e,c),g=Math.sqrt(2*c-d+1),n>=c?(r[0]=.5*g,r[1]=.5*(a+p)/g,r[2]=.5*(l+k)/g,r[3]=.5*(f-m)/g):e>=c?(r[0]=.5*(p+a)/g,r[1]=.5*g,r[2]=.5*(m+f)/g,r[3]=.5*(l-k)/g):(r[0]=.5*(k+l)/g,r[1]=.5*(f+m)/g,r[2]=.5*g,r[3]=.5*(p-a)/g);return r}},{}],475:[function(b,D,G){function r(c,d,g){return Math.sqrt(Math.pow(c,2)+Math.pow(d,2)+Math.pow(g,2))}function n(c,d,g,h){return Math.sqrt(Math.pow(c,2)+Math.pow(d,2)+Math.pow(g,2)+Math.pow(h,2))}function p(c,d){var g=d[0],h=d[1],
q=d[2];d=d[3];var t=n(g,h,q,d);1E-6<t?(c[0]=g/t,c[1]=h/t,c[2]=q/t,c[3]=d/t):(c[0]=c[1]=c[2]=0,c[3]=1)}function k(c,d,g){this.radius=a([g]);this.center=a(d);this.rotation=a(c);this.computedRadius=this.radius.curve(0);this.computedCenter=this.center.curve(0);this.computedRotation=this.rotation.curve(0);this.computedUp=[.1,0,0];this.computedEye=[.1,0,0];this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.recalcMatrix(0)}D.exports=function(c){c=c||{};var d=c.center||[0,0,0],g=c.rotation||[0,0,
0,1],h=c.radius||1;d=[].slice.call(d,0,3);g=[].slice.call(g,0,4);p(g,g);d=new k(g,d,Math.log(h));d.setDistanceLimits(c.zoomMin,c.zoomMax);("eye"in c||"up"in c)&&d.lookAt(0,c.eye,c.center,c.up);return d};var a=b("filtered-vector"),e=b("gl-mat4/lookAt"),f=b("gl-mat4/fromQuat"),l=b("gl-mat4/invert"),m=b("./lib/quatFromFrame");b=k.prototype;b.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())};b.recalcMatrix=function(c){this.radius.curve(c);this.center.curve(c);
this.rotation.curve(c);var d=this.computedRotation;p(d,d);c=this.computedMatrix;f(c,d);var g=this.computedCenter;d=this.computedEye;var h=this.computedUp,q=Math.exp(this.computedRadius[0]);d[0]=g[0]+q*c[2];d[1]=g[1]+q*c[6];d[2]=g[2]+q*c[10];h[0]=c[1];h[1]=c[5];h[2]=c[9];for(g=0;3>g;++g){for(q=h=0;3>q;++q)h+=c[g+4*q]*d[q];c[12+g]=-h}};b.getMatrix=function(c,d){this.recalcMatrix(c);c=this.computedMatrix;if(d){for(var g=0;16>g;++g)d[g]=c[g];return d}return c};b.idle=function(c){this.center.idle(c);this.radius.idle(c);
this.rotation.idle(c)};b.flush=function(c){this.center.flush(c);this.radius.flush(c);this.rotation.flush(c)};b.pan=function(c,d,g,h){d=d||0;g=g||0;h=h||0;this.recalcMatrix(c);var q=this.computedMatrix,t=q[1],v=q[5],w=q[9],A=r(t,v,w);t/=A;v/=A;w/=A;A=q[0];var z=q[4],y=q[8],B=A*t+z*v+y*w;A-=t*B;z-=v*B;y-=w*B;B=r(A,z,y);A/=B;z/=B;y/=B;B=q[2];var C=q[6];q=q[10];var u=B*t+C*v+q*w,F=B*A+C*z+q*y;r(B-(u*t+F*A),C-(u*v+F*z),q-(u*w+F*y));this.center.move(c,A*d+t*g,z*d+v*g,y*d+w*g);d=Math.exp(this.computedRadius[0]);
d=Math.max(1E-4,d+h);this.radius.set(c,Math.log(d))};b.rotate=function(c,d,g,h){this.recalcMatrix(c);d=d||0;g=g||0;var q=this.computedMatrix,t=q[2],v=q[6],w=q[10],A=d*q[0]+g*q[1],z=d*q[4]+g*q[5];q=d*q[8]+g*q[9];g=-(v*q-w*z);q=-(w*A-t*q);A=-(t*z-v*A);z=Math.sqrt(Math.max(0,1-Math.pow(g,2)-Math.pow(q,2)-Math.pow(A,2)));var y=n(g,q,A,z);1E-6<y?(g/=y,q/=y,A/=y,z/=y):(g=q=A=0,z=1);y=this.computedRotation;var B=y[0],C=y[1],u=y[2],F=y[3];y=B*z+F*g+C*A-u*q;var H=C*z+F*q+u*g-B*A,J=u*z+F*A+B*q-C*g;B=F*z-B*
g-C*q-u*A;h&&(g=t,q=v,A=w,h=Math.sin(h)/r(g,q,A),g*=h,q*=h,A*=h,z=Math.cos(d),y=y*z+B*g+H*A-J*q,H=H*z+B*q+J*g-y*A,J=J*z+B*A+y*q-H*g,B=B*z-y*g-H*q-J*A);d=n(y,H,J,B);1E-6<d?(y/=d,H/=d,J/=d,B/=d):(y=H=J=0,B=1);this.rotation.set(c,y,H,J,B)};b.lookAt=function(c,d,g,h){this.recalcMatrix(c);g=g||this.computedCenter;d=d||this.computedEye;h=h||this.computedUp;var q=this.computedMatrix;e(q,d,g,h);h=this.computedRotation;m(h,q[0],q[1],q[2],q[4],q[5],q[6],q[8],q[9],q[10]);p(h,h);this.rotation.set(c,h[0],h[1],
h[2],h[3]);for(h=q=0;3>h;++h)q+=Math.pow(g[h]-d[h],2);this.radius.set(c,.5*Math.log(Math.max(q,1E-6)));this.center.set(c,g[0],g[1],g[2])};b.translate=function(c,d,g,h){this.center.move(c,d||0,g||0,h||0)};b.setMatrix=function(c,d){var g=this.computedRotation;m(g,d[0],d[1],d[2],d[4],d[5],d[6],d[8],d[9],d[10]);p(g,g);this.rotation.set(c,g[0],g[1],g[2],g[3]);g=this.computedMatrix;l(g,d);var h=g[15];if(1E-6<Math.abs(h)){d=g[12]/h;var q=g[13]/h;h=g[14]/h;this.recalcMatrix(c);var t=Math.exp(this.computedRadius[0]);
this.center.set(c,d-g[2]*t,q-g[6]*t,h-g[10]*t)}else this.center.idle(c);this.radius.idle(c)};b.setDistance=function(c,d){0<d&&this.radius.set(c,Math.log(d))};b.setDistanceLimits=function(c,d){c=0<c?Math.log(c):-Infinity;d=0<d?Math.log(d):Infinity;d=Math.max(d,c);this.radius.bounds[0][0]=c;this.radius.bounds[1][0]=d};b.getDistanceLimits=function(c){var d=this.radius.bounds;return c?(c[0]=Math.exp(d[0][0]),c[1]=Math.exp(d[1][0]),c):[Math.exp(d[0][0]),Math.exp(d[1][0])]};b.toJSON=function(){this.recalcMatrix(this.lastT());
return{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}};b.fromJSON=function(c){var d=this.lastT(),g=c.center;g&&this.center.set(d,g[0],g[1],g[2]);(g=c.rotation)&&this.rotation.set(d,g[0],g[1],g[2],g[3]);(g=c.distance)&&0<g&&this.radius.set(d,Math.log(g));this.setDistanceLimits(c.zoomMin,c.zoomMax)}},{"./lib/quatFromFrame":474,"filtered-vector":242,"gl-mat4/fromQuat":275,
"gl-mat4/invert":278,"gl-mat4/lookAt":279}],476:[function(b,D,G){var r=b("repeat-string");D.exports=function(n,p,k){return r("undefined"!==typeof k?k+"":" ",p)+n}},{"repeat-string":513}],477:[function(b,D,G){function r(k,a){function e(c,d,g){g=[];for(var h,q=0;h=m.exec(c);){if(1E4<q++)throw Error("Circular references in parenthesis");g.push(c.slice(0,h.index));g.push(e(d[h[1]],d));c=c.slice(h.index+h[0].length)}g.push(c);return g}if("string"!==typeof k)return[k];var f=[k];"string"===typeof a||Array.isArray(a)?
a={brackets:a}:a||(a={});k=a.brackets?Array.isArray(a.brackets)?a.brackets:[a.brackets]:["{}","[]","()"];var l=a.escape||"___";a=!!a.flat;k.forEach(function(c){function d(q,t,v){q=f.push(q.slice(c[0].length,-c[1].length))-1;h.push(q);return l+q+l}var g=new RegExp(["\\",c[0],"[^\\",c[0],"\\",c[1],"]*\\",c[1]].join("")),h=[];f.forEach(function(q,t){for(var v,w=0;q!=v;)if(v=q,q=q.replace(g,d),1E4<w++)throw Error("References have circular dependency. Please, check them.");f[t]=q});h=h.reverse();f=f.map(function(q){h.forEach(function(t){q=
q.replace(new RegExp("(\\"+l+t+"\\"+l+")","g"),c[0]+"$1"+c[1])});return q})});var m=new RegExp("\\"+l+"([0-9]+)\\"+l);return a?f:e(f[0],f)}function n(k,a){function e(c,d){if(null==k[d])throw Error("Reference "+d+"is undefined");return k[d]}if(a&&a.flat){var f=a&&a.escape||"___";a=k[0];if(!a)return"";f=new RegExp("\\"+f+"([0-9]+)\\"+f);for(var l=0;a!=m;){if(1E4<l++)throw Error("Circular references in "+k);var m=a;a=a.replace(f,e)}return a}return k.reduce(function h(d,g){Array.isArray(g)&&(g=g.reduce(h,
""));return d+g},"")}function p(k,a){return Array.isArray(k)?n(k,a):r(k,a)}p.parse=r;p.stringify=n;D.exports=p},{}],478:[function(b,D,G){var r=b("pick-by-alias");D.exports=function(n){1<arguments.length&&(n=arguments);"string"===typeof n?n=n.split(/\s/).map(parseFloat):"number"===typeof n&&(n=[n]);if(n.length&&"number"===typeof n[0])var p=1===n.length?{width:n[0],height:n[0],x:0,y:0}:2===n.length?{width:n[0],height:n[1],x:0,y:0}:{x:n[0],y:n[1],width:n[2]-n[0]||0,height:n[3]-n[1]||0};else n&&(n=r(n,
{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),p={x:n.left||0,y:n.top||0},p.width=null==n.width?n.right?n.right-p.x:0:n.width,p.height=null==n.height?n.bottom?n.bottom-p.y:0:n.height);return p}},{"pick-by-alias":485}],479:[function(b,D,G){D.exports=function(k){var a=[];k.replace(n,function(e,f,l){e=f.toLowerCase();l=(l=l.match(p))?l.map(Number):[];"m"==e&&2<l.length&&(a.push([f].concat(l.splice(0,2))),e="l",
f="m"==f?"l":"L");for(;;){if(l.length==r[e])return l.unshift(f),a.push(l);if(l.length<r[e])throw Error("malformed path data");a.push([f].concat(l.splice(0,r[e])))}});return a};var r={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/ig,p=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig},{}],480:[function(b,D,G){D.exports=function(r,n){n||(n=[0,""]);r=String(r);var p=parseFloat(r,10);n[0]=p;n[1]=r.match(/[\d.\-\+]*\s*(.*)/)[1]||"";return n}},{}],481:[function(b,D,G){(function(r){function n(a,
e){for(var f=0,l=a.length-1;0<=l;l--){var m=a[l];"."===m?a.splice(l,1):".."===m?(a.splice(l,1),f++):f&&(a.splice(l,1),f--)}if(e)for(;f--;f)a.unshift("..");return a}function p(a,e){if(a.filter)return a.filter(e);for(var f=[],l=0;l<a.length;l++)e(a[l],l,a)&&f.push(a[l]);return f}G.resolve=function(){for(var a="",e=!1,f=arguments.length-1;-1<=f&&!e;f--){var l=0<=f?arguments[f]:r.cwd();if("string"!==typeof l)throw new TypeError("Arguments to path.resolve must be strings");l&&(a=l+"/"+a,e="/"===l.charAt(0))}a=
n(p(a.split("/"),function(m){return!!m}),!e).join("/");return(e?"/":"")+a||"."};G.normalize=function(a){var e=G.isAbsolute(a),f="/"===k(a,-1);(a=n(p(a.split("/"),function(l){return!!l}),!e).join("/"))||e||(a=".");a&&f&&(a+="/");return(e?"/":"")+a};G.isAbsolute=function(a){return"/"===a.charAt(0)};G.join=function(){var a=Array.prototype.slice.call(arguments,0);return G.normalize(p(a,function(e,f){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))};
G.relative=function(a,e){function f(d){for(var g=0;g<d.length&&""===d[g];g++);for(var h=d.length-1;0<=h&&""===d[h];h--);return g>h?[]:d.slice(g,h-g+1)}a=G.resolve(a).substr(1);e=G.resolve(e).substr(1);a=f(a.split("/"));e=f(e.split("/"));for(var l=Math.min(a.length,e.length),m=l,c=0;c<l;c++)if(a[c]!==e[c]){m=c;break}l=[];for(c=m;c<a.length;c++)l.push("..");l=l.concat(e.slice(m));return l.join("/")};G.sep="/";G.delimiter=":";G.dirname=function(a){"string"!==typeof a&&(a+="");if(0===a.length)return".";
for(var e=a.charCodeAt(0),f=47===e,l=-1,m=!0,c=a.length-1;1<=c;--c)if(e=a.charCodeAt(c),47===e){if(!m){l=c;break}}else m=!1;return-1===l?f?"/":".":f&&1===l?"/":a.slice(0,l)};G.basename=function(a,e){"string"!==typeof a&&(a+="");var f=0,l=-1,m=!0,c;for(c=a.length-1;0<=c;--c)if(47===a.charCodeAt(c)){if(!m){f=c+1;break}}else-1===l&&(m=!1,l=c+1);a=-1===l?"":a.slice(f,l);e&&a.substr(-1*e.length)===e&&(a=a.substr(0,a.length-e.length));return a};G.extname=function(a){"string"!==typeof a&&(a+="");for(var e=
-1,f=0,l=-1,m=!0,c=0,d=a.length-1;0<=d;--d){var g=a.charCodeAt(d);if(47===g){if(!m){f=d+1;break}}else-1===l&&(m=!1,l=d+1),46===g?-1===e?e=d:1!==c&&(c=1):-1!==e&&(c=-1)}return-1===e||-1===l||0===c||1===c&&e===l-1&&e===f+1?"":a.slice(e,l)};var k="b"==="ab".substr(-1)?function(a,e,f){return a.substr(e,f)}:function(a,e,f){0>e&&(e=a.length+e);return a.substr(e,f)}}).call(this,b("_process"))},{_process:500}],482:[function(b,D,G){(function(r){(function(){if("undefined"!==typeof performance&&null!==performance&&
performance.now)D.exports=function(){return performance.now()};else if("undefined"!==typeof r&&null!==r&&r.hrtime){D.exports=function(){return(p()-e)/1E6};var n=r.hrtime;var p=function(){var l=n();return 1E9*l[0]+l[1]};var k=p();var a=1E9*r.uptime();var e=k-a}else if(Date.now){D.exports=function(){return Date.now()-f};var f=Date.now()}else D.exports=function(){return(new Date).getTime()-f},f=(new Date).getTime()}).call(this)}).call(this,b("_process"))},{_process:500}],483:[function(b,D,G){D.exports=
function(p){var k=p.length;if(k<r)for(var a=1,e=0;e<k;++e)for(var f=0;f<e;++f)if(p[e]<p[f])a=-a;else{if(p[e]===p[f])return 0}else{var l=n.mallocUint8(k);for(e=0;e<k;++e)l[e]=0;a=1;for(e=0;e<k;++e)if(!l[e]){var m=1;l[e]=1;for(f=p[e];f!==e;f=p[f]){if(l[f])return n.freeUint8(l),0;m+=1;l[f]=1}m&1||(a=-a)}n.freeUint8(l)}return a};var r=32,n=b("typedarray-pool")},{"typedarray-pool":567}],484:[function(b,D,G){var r=b("typedarray-pool"),n=b("invert-permutation");G.rank=function(p){var k=p.length;switch(k){case 0:case 1:return 0;
case 2:return p[1]}var a=r.mallocUint32(k),e=r.mallocUint32(k),f=0,l;n(p,e);for(l=0;l<k;++l)a[l]=p[l];for(l=k-1;0<l;--l)k=e[l],p=a[l],a[l]=a[k],a[k]=p,e[l]=e[p],e[p]=k,f=(f+p)*l;r.freeUint32(e);r.freeUint32(a);return f};G.unrank=function(p,k,a){switch(p){case 0:return a?a:[];case 1:return a?(a[0]=0,a):[0];case 2:return a?(k?(a[0]=0,a[1]=1):(a[0]=1,a[1]=0),a):k?[0,1]:[1,0]}a=a||Array(p);var e,f=1;a[0]=0;for(e=1;e<p;++e)a[e]=e,f=f*e|0;for(e=p-1;0<e;--e){p=k/f|0;k=k-p*f|0;f=f/e|0;var l=a[e]|0;a[e]=a[p]|
0;a[p]=l|0}return a}},{"invert-permutation":436,"typedarray-pool":567}],485:[function(b,D,G){function r(p){if(n[p])return n[p];"string"===typeof p&&(p=n[p]=p.split(/\s*,\s*|\s+/));return p}D.exports=function(p,k,a){var e={},f,l;"string"===typeof k&&(k=r(k));if(Array.isArray(k)){var m={};for(l=0;l<k.length;l++)m[k[l]]=!0;k=m}for(f in k)k[f]=r(k[f]);m={};for(f in k){var c=k[f];if(Array.isArray(c))for(l=0;l<c.length;l++){var d=c[l];a&&(m[d]=!0);if(d in p){e[f]=p[d];if(a)for(;l<c.length;l++)m[c[l]]=!0;
break}}else f in p&&(k[f]&&(e[f]=p[f]),a&&(m[f]=!0))}if(a)for(f in p)m[f]||(e[f]=p[f]);return e};var n={}},{}],486:[function(b,D,G){D.exports=function(n,p){function k(h,q){q=m[q][h[q]];q.splice(q.indexOf(h),1)}function a(h,q,t){var v;for(v=0;2>v;++v)if(0<m[v][q].length){var w=m[v][q][0];var A=v;break}v=w[A^1];for(var z=0;2>z;++z)for(var y=m[z][q],B=0;B<y.length;++B){var C=y[B],u=C[z^1];0<r(p[h],p[q],p[v],p[u])&&(w=C,v=u,A=z)}if(t)return v;w&&k(w,A);return v}function e(h,q){var t=m[q][h][0],v=[h];
k(t,q);for(q=t[q^1];;){for(;q!==h;)v.push(q),q=a(v[v.length-2],q,!1);if(0===m[0][h].length+m[1][h].length)break;q=v[v.length-1];t=h;var w=v[1],A=a(q,t,!0);if(0>r(p[q],p[t],p[w],p[A]))break;v.push(h);q=a(q,t)}return v}for(var f=p.length|0,l=n.length,m=[Array(f),Array(f)],c=0;c<f;++c)m[0][c]=[],m[1][c]=[];for(c=0;c<l;++c){var d=n[c];m[0][d[0]].push(d);m[1][d[1]].push(d)}n=[];for(c=0;c<f;++c)0===m[0][c].length+m[1][c].length&&n.push([c]);for(c=0;c<f;++c)for(l=0;2>l;++l){for(d=[];0<m[l][c].length;){var g=
e(c,l);g[1]===g[g.length-1]?d.push.apply(d,g):(0<d.length&&n.push(d),d=g)}0<d.length&&n.push(d)}return n};var r=b("compare-angle")},{"compare-angle":132}],487:[function(b,D,G){D.exports=function(n,p){for(var k=r(n,p.length),a=Array(p.length),e=Array(p.length),f=[],l=0;l<p.length;++l){var m=k[l].length;e[l]=m;a[l]=!0;1>=m&&f.push(l)}for(;0<f.length;)for(m=f.pop(),a[m]=!1,m=k[m],l=0;l<m.length;++l){var c=m[l];0===--e[c]&&f.push(c)}k=Array(p.length);e=[];for(l=0;l<p.length;++l)a[l]?(m=e.length,k[l]=
m,e.push(p[l])):k[l]=-1;p=[];for(l=0;l<n.length;++l)f=n[l],a[f[0]]&&a[f[1]]&&p.push([k[f[0]],k[f[1]]]);return[p,e]};var r=b("edges-to-adjacency-list")},{"edges-to-adjacency-list":178}],488:[function(b,D,G){function r(c,d){for(var g=Array(c),h=0;h<c;++h)g[h]=d;return g}function n(c){for(var d=Array(c),g=0;g<c;++g)d[g]=[];return d}D.exports=function(c,d){function g(M){for(var E=M.length,L=0;L<E;++L)if(!J[M[L]])return!1;return!0}var h=m(c,d);c=h[0];d=h[1];for(var q=d.length,t=p(c,d.length),v=0;v<q;++v)if(1===
t[v].length%2)throw Error("planar-graph-to-polyline: graph must be manifold");c=k(c,d);c=c.filter(function(M){for(var E=M.length,L=[0],P=0;P<E;++P){var N=d[M[P]],Q=d[M[(P+1)%E]],O=e(-N[0],N[1]),T=e(-N[0],Q[1]);N=e(Q[0],N[1]);Q=e(Q[0],Q[1]);L=f(L,f(f(O,T),f(N,Q)))}return 0<L[L.length-1]});h=c.length;var w=Array(h),A=Array(h);for(v=0;v<h;++v){w[v]=v;var z=Array(h);t=c[v].map(function(M){return d[M]});var y=a([t]),B=0,C=0;a:for(;C<h;++C)if(z[C]=0,v!==C){t=c[C];for(var u=t.length,F=0;F<u;++F){var H=y(d[t[F]]);
if(0!==H){0>H&&(z[C]=1,B+=1);continue a}}z[C]=1;B+=1}A[v]=[B,v,z]}A.sort(function(M,E){return E[0]-M[0]});for(v=0;v<h;++v)for(z=A[v],t=z[1],u=z[2],C=0;C<h;++C)u[C]&&(w[C]=t);A=n(h);for(v=0;v<h;++v)A[v].push(w[v]),A[w[v]].push(v);z={};var J=r(q,!1);for(v=0;v<h;++v)for(t=c[v],u=t.length,C=0;C<u;++C)q=t[C],y=t[(C+1)%u],B=Math.min(q,y)+":"+Math.max(q,y),B in z?(B=z[B],A[B].push(v),A[v].push(B),J[q]=J[y]=!0):z[B]=v;C=[];q=r(h,-1);for(v=0;v<h;++v)w[v]!==v||g(c[v])?q[v]=-1:(C.push(v),q[v]=0);for(h=[];0<
C.length;){v=C.pop();w=A[v];l(w,function(M,E){return M-E});u=w.length;z=q[v];if(0===z){t=c[v];var I=[t]}for(v=0;v<u;++v)t=w[v],0<=q[t]||(q[t]=z^1,C.push(t),0===z&&(t=c[t],g(t)||(t.reverse(),I.push(t))));0===z&&h.push(I)}return h};var p=b("edges-to-adjacency-list"),k=b("planar-dual"),a=b("point-in-big-polygon"),e=b("two-product"),f=b("robust-sum"),l=b("uniq"),m=b("./lib/trim-leaves")},{"./lib/trim-leaves":487,"edges-to-adjacency-list":178,"planar-dual":486,"point-in-big-polygon":490,"robust-sum":525,
"two-product":554,uniq:569}],489:[function(b,D,G){arguments[4][243][0].apply(G,arguments)},{dup:243}],490:[function(b,D,G){function r(){return!0}function n(g){return function(h,q){return(h=g[h])?!!h.queryPoint(q,r):!1}}function p(g){for(var h={},q=0;q<g.length;++q){var t=g[q],v=t[0][0],w=t[0][1];t=t[1][1];w=[Math.min(w,t),Math.max(w,t)];v in h?h[v].push(w):h[v]=[w]}g={};v=Object.keys(h);for(q=0;q<v.length;++q)g[v[q]]=c(h[v[q]]);return n(g)}function k(g,h){return function(q){var t=d.le(h,q[0]);if(0>
t)return 1;var v=g[t];if(!v)if(0<t&&h[t]===q[0])v=g[t-1];else return 1;for(t=1;v;){var w=v.key,A=l(q,w[0],w[1]);if(w[0][0]<w[1][0])if(0>A)v=v.left;else if(0<A)t=-1,v=v.right;else return 0;else if(0<A)v=v.left;else if(0>A)t=1,v=v.right;else return 0}return t}}function a(g){return 1}function e(g){return function(h){return g(h[0],h[1])?0:1}}function f(g,h){return function(q){return g(q[0],q[1])?0:h(q)}}D.exports=function(g){for(var h=g.length,q=[],t=[],v=0;v<h;++v)for(var w=g[v],A=w.length,z=A-1,y=0;y<
A;z=y++){z=w[z];var B=w[y];z[0]===B[0]?t.push([z,B]):q.push([z,B])}if(0===q.length)return 0===t.length?a:e(p(t));g=m(q);g=k(g.slabs,g.coordinates);return 0===t.length?g:f(p(t),g)};var l=b("robust-orientation")[3],m=b("slab-decomposition"),c=b("interval-tree-1d"),d=b("binary-search-bounds")},{"binary-search-bounds":489,"interval-tree-1d":434,"robust-orientation":520,"slab-decomposition":537}],491:[function(b,D,G){function r(c,d,g){c=m.segments(c);d=m.segments(d);d=m.combine(c,d);g=g(d);return m.polygon(g)}
var n=b("./lib/build-log");G=b("./lib/epsilon");var p=b("./lib/intersecter"),k=b("./lib/segment-chainer"),a=b("./lib/segment-selector"),e=b("./lib/geojson"),f=!1,l=G();var m={buildLog:function(c){!0===c?f=n():!1===c&&(f=!1);return!1===f?!1:f.list},epsilon:function(c){return l.epsilon(c)},segments:function(c){var d=p(!0,l,f);c.regions.forEach(d.addRegion);return{segments:d.calculate(c.inverted),inverted:c.inverted}},combine:function(c,d){return{combined:p(!1,l,f).calculate(c.segments,c.inverted,d.segments,
d.inverted),inverted1:c.inverted,inverted2:d.inverted}},selectUnion:function(c){return{segments:a.union(c.combined,f),inverted:c.inverted1||c.inverted2}},selectIntersect:function(c){return{segments:a.intersect(c.combined,f),inverted:c.inverted1&&c.inverted2}},selectDifference:function(c){return{segments:a.difference(c.combined,f),inverted:c.inverted1&&!c.inverted2}},selectDifferenceRev:function(c){return{segments:a.differenceRev(c.combined,f),inverted:!c.inverted1&&c.inverted2}},selectXor:function(c){return{segments:a.xor(c.combined,
f),inverted:c.inverted1!==c.inverted2}},polygon:function(c){return{regions:k(c.segments,l,f),inverted:c.inverted}},polygonFromGeoJSON:function(c){return e.toPolygon(m,c)},polygonToGeoJSON:function(c){return e.fromPolygon(m,l,c)},union:function(c,d){return r(c,d,m.selectUnion)},intersect:function(c,d){return r(c,d,m.selectIntersect)},difference:function(c,d){return r(c,d,m.selectDifference)},differenceRev:function(c,d){return r(c,d,m.selectDifferenceRev)},xor:function(c,d){return r(c,d,m.selectXor)}};
"object"===typeof window&&(window.PolyBool=m);D.exports=m},{"./lib/build-log":492,"./lib/epsilon":493,"./lib/geojson":494,"./lib/intersecter":495,"./lib/segment-chainer":497,"./lib/segment-selector":498}],492:[function(b,D,G){D.exports=function(){function r(a,e){n.list.push({type:a,data:e?JSON.parse(JSON.stringify(e)):void 0});return n}var n,p=0,k=!1;return n={list:[],segmentId:function(){return p++},checkIntersection:function(a,e){return r("check",{seg1:a,seg2:e})},segmentChop:function(a,e){r("div_seg",
{seg:a,pt:e});return r("chop",{seg:a,pt:e})},statusRemove:function(a){return r("pop_seg",{seg:a})},segmentUpdate:function(a){return r("seg_update",{seg:a})},segmentNew:function(a,e){return r("new_seg",{seg:a,primary:e})},segmentRemove:function(a){return r("rem_seg",{seg:a})},tempStatus:function(a,e,f){return r("temp_status",{seg:a,above:e,below:f})},rewind:function(a){return r("rewind",{seg:a})},status:function(a,e,f){return r("status",{seg:a,above:e,below:f})},vert:function(a){if(a===k)return n;
k=a;return r("vert",{x:a})},log:function(a){"string"!==typeof a&&(a=JSON.stringify(a,!1,"  "));return r("log",{txt:a})},reset:function(){return r("reset")},selected:function(a){return r("selected",{segs:a})},chainStart:function(a){return r("chain_start",{seg:a})},chainRemoveHead:function(a,e){return r("chain_rem_head",{index:a,pt:e})},chainRemoveTail:function(a,e){return r("chain_rem_tail",{index:a,pt:e})},chainNew:function(a,e){return r("chain_new",{pt1:a,pt2:e})},chainMatch:function(a){return r("chain_match",
{index:a})},chainClose:function(a){return r("chain_close",{index:a})},chainAddHead:function(a,e){return r("chain_add_head",{index:a,pt:e})},chainAddTail:function(a,e){return r("chain_add_tail",{index:a,pt:e})},chainConnect:function(a,e){return r("chain_con",{index1:a,index2:e})},chainReverse:function(a){return r("chain_rev",{index:a})},chainJoin:function(a,e){return r("chain_join",{index1:a,index2:e})},done:function(){return r("done")}}}},{}],493:[function(b,D,G){D.exports=function(r){"number"!==
typeof r&&(r=1E-10);var n={epsilon:function(p){"number"===typeof p&&(r=p);return r},pointAboveOrOnLine:function(p,k,a){var e=k[0];k=k[1];return(a[0]-e)*(p[1]-k)-(a[1]-k)*(p[0]-e)>=-r},pointBetween:function(p,k,a){var e=a[0]-k[0];a=a[1]-k[1];p=(p[0]-k[0])*e+(p[1]-k[1])*a;return p<r||p-(e*e+a*a)>-r?!1:!0},pointsSameX:function(p,k){return Math.abs(p[0]-k[0])<r},pointsSameY:function(p,k){return Math.abs(p[1]-k[1])<r},pointsSame:function(p,k){return n.pointsSameX(p,k)&&n.pointsSameY(p,k)},pointsCompare:function(p,
k){return n.pointsSameX(p,k)?n.pointsSameY(p,k)?0:p[1]<k[1]?-1:1:p[0]<k[0]?-1:1},pointsCollinear:function(p,k,a){return Math.abs((p[0]-k[0])*(k[1]-a[1])-(k[0]-a[0])*(p[1]-k[1]))<r},linesIntersect:function(p,k,a,e){var f=k[0]-p[0];k=k[1]-p[1];var l=e[0]-a[0],m=e[1]-a[1];e=f*m-k*l;if(Math.abs(e)<r)return!1;var c=p[0]-a[0];a=p[1]-a[1];l=(l*a-m*c)/e;a=(f*a-k*c)/e;p={alongA:0,alongB:0,pt:[p[0]+l*f,p[1]+l*k]};p.alongA=l<=-r?-2:l<r?-1:l-1<=-r?0:l-1<r?1:2;p.alongB=a<=-r?-2:a<r?-1:a-1<=-r?0:a-1<r?1:2;return p},
pointInsideRegion:function(p,k){var a=p[0];p=p[1];for(var e=k[k.length-1][0],f=k[k.length-1][1],l=!1,m=0;m<k.length;m++){var c=k[m][0],d=k[m][1];d-p>r!=f-p>r&&(e-c)*(p-d)/(f-d)+c-a>r&&(l=!l);e=c;f=d}return l}};return n}},{}],494:[function(b,D,G){D.exports={toPolygon:function(r,n){function p(e){function f(c){c=c.slice(0,c.length-1);return r.segments({inverted:!1,regions:[c]})}if(0>=e.length)return r.segments({inverted:!1,regions:[]});for(var l=f(e[0]),m=1;m<e.length;m++)l=r.selectDifference(r.combine(l,
f(e[m])));return l}if("Polygon"===n.type)return r.polygon(p(n.coordinates));if("MultiPolygon"===n.type){for(var k=r.segments({inverted:!1,regions:[]}),a=0;a<n.coordinates.length;a++)k=r.selectUnion(r.combine(k,p(n.coordinates[a])));return r.polygon(k)}throw Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon");},fromPolygon:function(r,n,p){function k(d,g){return n.pointInsideRegion([.5*(d[0][0]+d[1][0]),.5*(d[0][1]+d[1][1])],g)}function a(d,g){for(var h=0;h<d.children.length;h++){var q=
d.children[h];if(k(g,q.region)){a(q,g);return}}var t={region:g,children:[]};for(h=0;h<d.children.length;h++)q=d.children[h],k(q.region,g)&&(t.children.push(q),d.children.splice(h,1),h--);d.children.push(t)}function e(d,g){for(var h=0,q=d[d.length-1][0],t=d[d.length-1][1],v=[],w=0;w<d.length;w++){var A=d[w][0],z=d[w][1];v.push([A,z]);h+=z*q-A*t;q=A;t=z}0>h!==g&&v.reverse();v.push([v[0][0],v[0][1]]);return v}function f(d){var g=[e(d.region,!1)];c.push(g);for(var h=0;h<d.children.length;h++){var q=g,
t=q.push;var v=d.children[h];for(var w=0;w<v.children.length;w++)f(v.children[w]);v=e(v.region,!0);t.call(q,v)}}p=r.polygon(r.segments(p));r={region:null,children:[]};for(var l=0;l<p.regions.length;l++){var m=p.regions[l];3>m.length||a(r,m)}var c=[];for(l=0;l<r.children.length;l++)f(r.children[l]);return 0>=c.length?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}}},{}],495:[function(b,D,G){var r=b("./linked-list");D.exports=function(n,
p,k){function a(d,g,h){return{id:k?k.segmentId():-1,start:d,end:g,myFill:{above:h.myFill.above,below:h.myFill.below},otherFill:null}}function e(d,g){c.insertBefore(d,function(h){var q=d.isStart;var t=h.isStart,v=h.pt;h=h.other.pt;var w=p.pointsCompare(d.pt,v);q=0!==w?w:p.pointsSame(g,h)?0:q!==t?q?1:-1:p.pointAboveOrOnLine(g,t?v:h,t?h:v)?1:-1;return 0>q})}function f(d,g){var h=r.node({isStart:!0,pt:d.start,seg:d,primary:g,other:null,status:null});e(h,d.end);d=r.node({isStart:!1,pt:d.end,seg:d,primary:g,
other:h,status:null});h.other=d;e(d,h.pt);return h}function l(d,g){var h=a(g,d.seg.end,d.seg);k&&k.segmentChop(d.seg,g);d.other.remove();d.seg.end=g;d.other.pt=g;e(d.other,d.pt);return f(h,d.primary)}function m(d,g){function h(u){return t.findTransition(function(F){var H=F.ev;F=u.seg.start;var J=u.seg.end,I=H.seg.start;H=H.seg.end;F=p.pointsCollinear(F,I,H)?p.pointsCollinear(J,I,H)?1:p.pointAboveOrOnLine(J,I,H)?1:-1:p.pointAboveOrOnLine(F,I,H)?1:-1;return 0<F})}function q(u,F){var H=u.seg,J=F.seg,
I=H.start,M=H.end,E=J.start,L=J.end;k&&k.checkIntersection(H,J);H=p.linesIntersect(I,M,E,L);if(!1===H){if(!p.pointsCollinear(I,M,E)||p.pointsSame(I,L)||p.pointsSame(M,E))return!1;H=p.pointsSame(I,E);J=p.pointsSame(M,L);if(H&&J)return F;var P=!H&&p.pointBetween(I,E,L);E=!J&&p.pointBetween(M,E,L);if(H)return E?l(F,M):l(u,L),F;P&&(J||(E?l(F,M):l(u,L)),l(F,I))}else 0===H.alongA&&(-1===H.alongB?l(u,E):0===H.alongB?l(u,H.pt):1===H.alongB&&l(u,L)),0===H.alongB&&(-1===H.alongA?l(F,I):0===H.alongA?l(F,H.pt):
1===H.alongA&&l(F,M));return!1}for(var t=r.create(),v=[];!c.isEmpty();){var w=c.getHead();k&&k.vert(w.pt[0]);if(w.isStart){k&&k.segmentNew(w.seg,w.primary);var A=h(w),z=A.before?A.before.ev:null,y=A.after?A.after.ev:null;k&&k.tempStatus(w.seg,z?z.seg:!1,y?y.seg:!1);var B=function(){if(z){var u=q(w,z);if(u)return u}return y?q(w,y):!1}();if(B){if(n){var C;if(C=null===w.seg.myFill.below?!0:w.seg.myFill.above!==w.seg.myFill.below)B.seg.myFill.above=!B.seg.myFill.above}else B.seg.otherFill=w.seg.myFill;
k&&k.segmentUpdate(B.seg);w.other.remove();w.remove()}if(c.getHead()!==w){k&&k.rewind(w.seg);continue}n?(C=null===w.seg.myFill.below?!0:w.seg.myFill.above!==w.seg.myFill.below,w.seg.myFill.below=y?y.seg.myFill.above:d,w.seg.myFill.above=C?!w.seg.myFill.below:w.seg.myFill.below):null===w.seg.otherFill&&(B=y?w.primary===y.primary?y.seg.otherFill.above:y.seg.myFill.above:w.primary?g:d,w.seg.otherFill={above:B,below:B});k&&k.status(w.seg,z?z.seg:!1,y?y.seg:!1);w.other.status=A.insert(r.node({ev:w}))}else{A=
w.status;if(null===A)throw Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");t.exists(A.prev)&&t.exists(A.next)&&q(A.prev.ev,A.next.ev);k&&k.statusRemove(A.ev.seg);A.remove();w.primary||(A=w.seg.myFill,w.seg.myFill=w.seg.otherFill,w.seg.otherFill=A);v.push(w.seg)}c.getHead().remove()}k&&k.done();return v}var c=r.create();return n?{addRegion:function(d){for(var g,h=d[d.length-1],q=0;q<d.length;q++){g=h;h=d[q];var t=p.pointsCompare(g,h);if(0!==t){var v=
0>t?g:h;g=0>t?h:g;v={id:k?k.segmentId():-1,start:v,end:g,myFill:{above:null,below:null},otherFill:null};f(v,!0)}}},calculate:function(d){return m(d,!1)}}:{calculate:function(d,g,h,q){d.forEach(function(t){f(a(t.start,t.end,t),!0)});h.forEach(function(t){f(a(t.start,t.end,t),!1)});return m(g,q)}}}},{"./linked-list":496}],496:[function(b,D,G){D.exports={create:function(){var r={root:{root:!0,next:null},exists:function(n){return null===n||n===r.root?!1:!0},isEmpty:function(){return null===r.root.next},
getHead:function(){return r.root.next},insertBefore:function(n,p){for(var k=r.root,a=r.root.next;null!==a;){if(p(a)){n.prev=a.prev;n.next=a;a.prev.next=n;a.prev=n;return}k=a;a=a.next}k.next=n;n.prev=k;n.next=null},findTransition:function(n){for(var p=r.root,k=r.root.next;null!==k&&!n(k);)p=k,k=k.next;return{before:p===r.root?null:p,after:k,insert:function(a){a.prev=p;a.next=k;p.next=a;null!==k&&(k.prev=a);return a}}}};return r},node:function(r){r.prev=null;r.next=null;r.remove=function(){if(r.prev.next=
r.next)r.next.prev=r.prev;r.prev=null;r.next=null};return r}}},{}],497:[function(b,D,G){D.exports=function(r,n,p){var k=[],a=[];r.forEach(function(e){function f(y,B,C){q.index=y;q.matches_head=B;q.matches_pt1=C;if(q===g)return q=h,!1;q=null;return!0}function l(y){p&&p.chainReverse(y);k[y].reverse()}function m(y,B){var C=k[y],u=k[B],F=C[C.length-1],H=C[C.length-2],J=u[0],I=u[1];n.pointsCollinear(H,F,J)&&(p&&p.chainRemoveTail(y,F),C.pop(),F=H);n.pointsCollinear(F,J,I)&&(p&&p.chainRemoveHead(B,J),u.shift());
p&&p.chainJoin(y,B);k[y]=C.concat(u);k.splice(B,1)}var c=e.start,d=e.end;if(n.pointsSame(c,d))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{p&&p.chainStart(e);for(var g={index:0,matches_head:!1,matches_pt1:!1},h={index:0,matches_head:!1,matches_pt1:!1},q=g,t=0;t<k.length;t++){e=k[t];var v=e[0];e=e[e.length-1];if(n.pointsSame(v,c)){if(f(t,!0,!0))break}else if(n.pointsSame(v,d)){if(f(t,!0,!1))break}else if(n.pointsSame(e,c)){if(f(t,
!1,!0))break}else if(n.pointsSame(e,d)&&f(t,!1,!1))break}if(q===g)k.push([c,d]),p&&p.chainNew(c,d);else if(q===h){p&&p.chainMatch(g.index);t=g.index;c=g.matches_pt1?d:c;d=g.matches_head;e=k[t];v=d?e[0]:e[e.length-1];var w=d?e[1]:e[e.length-2],A=d?e[e.length-1]:e[0],z=d?e[e.length-2]:e[1];n.pointsCollinear(w,v,c)&&(d?(p&&p.chainRemoveHead(g.index,c),e.shift()):(p&&p.chainRemoveTail(g.index,c),e.pop()),v=w);n.pointsSame(A,c)?(k.splice(t,1),n.pointsCollinear(z,A,v)&&(d?(p&&p.chainRemoveTail(g.index,
v),e.pop()):(p&&p.chainRemoveHead(g.index,v),e.shift())),p&&p.chainClose(g.index),a.push(e)):d?(p&&p.chainAddHead(g.index,c),e.unshift(c)):(p&&p.chainAddTail(g.index,c),e.push(c))}else e=g.index,t=h.index,p&&p.chainConnect(e,t),c=k[e].length<k[t].length,g.matches_head?h.matches_head?c?(l(e),m(e,t)):(l(t),m(t,e)):m(t,e):h.matches_head?m(e,t):c?(l(e),m(t,e)):(l(t),m(e,t))}});return a}},{}],498:[function(b,D,G){function r(n,p,k){var a=[];n.forEach(function(e){var f=(e.myFill.above?8:0)+(e.myFill.below?
4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==p[f]&&a.push({id:k?k.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===p[f],below:2===p[f]},otherFill:null})});k&&k.selected(a);return a}D.exports={union:function(n,p){return r(n,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],p)},intersect:function(n,p){return r(n,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],p)},difference:function(n,p){return r(n,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],p)},differenceRev:function(n,p){return r(n,[0,2,1,0,
0,0,1,1,0,2,0,2,0,0,0,0],p)},xor:function(n,p){return r(n,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],p)}}},{}],499:[function(b,D,G){var r=new Float64Array(4),n=new Float64Array(4),p=new Float64Array(4);D.exports=function(k,a,e,f,l){r.length<f.length&&(r=new Float64Array(f.length),n=new Float64Array(f.length),p=new Float64Array(f.length));for(var m=0;m<f.length;++m)r[m]=k[m]-f[m],n[m]=a[m]-k[m],p[m]=e[m]-k[m];var c=0,d=0,g=0,h=0,q=0,t=0;for(m=0;m<f.length;++m){var v=n[m],w=p[m],A=r[m];c+=v*v;d+=v*w;g+=w*w;
h+=A*v;q+=A*w;t+=A*A}m=Math.abs(c*g-d*d);v=d*q-g*h;w=d*h-c*q;v+w<=m?0>v?0>w?0>h?(w=0,-h>=c?(v=1,c=c+2*h+t):(v=-h/c,c=h*v+t)):(v=0,0<=q?(w=0,c=t):-q>=g?(w=1,c=g+2*q+t):(w=-q/g,c=q*w+t)):(v=0,0<=q?(w=0,c=t):-q>=g?(w=1,c=g+2*q+t):(w=-q/g,c=q*w+t)):0>w?(w=0,0<=h?(v=0,c=t):-h>=c?(v=1,c=c+2*h+t):(v=-h/c,c=h*v+t)):(m=1/m,v*=m,w*=m,c=v*(c*v+d*w+2*h)+w*(d*v+g*w+2*q)+t):0>v?(v=d+h,m=g+q,m>v?(m-=v,v=c-2*d+g,m>=v?(v=1,w=0,c=c+2*h+t):(v=m/v,w=1-v,c=v*(c*v+d*w+2*h)+w*(d*v+g*w+2*q)+t)):(v=0,0>=m?(w=1,c=g+2*q+t):
0<=q?(w=0,c=t):(w=-q/g,c=q*w+t))):0>w?(v=d+q,m=c+h,m>v?(m-=v,v=c-2*d+g,m>=v?(w=1,v=0,c=g+2*q+t):(w=m/v,v=1-w,c=v*(c*v+d*w+2*h)+w*(d*v+g*w+2*q)+t)):(w=0,0>=m?(v=1,c=c+2*h+t):0<=h?(v=0,c=t):(v=-h/c,c=h*v+t))):(m=g+q-d-h,0>=m?(v=0,w=1,c=g+2*q+t):(v=c-2*d+g,m>=v?(v=1,w=0,c=c+2*h+t):(v=m/v,w=1-v,c=v*(c*v+d*w+2*h)+w*(d*v+g*w+2*q)+t)));d=1-v-w;for(m=0;m<f.length;++m)l[m]=d*k[m]+v*a[m]+w*e[m];return 0>c?0:c}},{}],500:[function(b,D,G){function r(){throw Error("setTimeout has not been defined");}function n(){throw Error("clearTimeout has not been defined");
}function p(t){if(m===setTimeout)return setTimeout(t,0);if((m===r||!m)&&setTimeout)return m=setTimeout,setTimeout(t,0);try{return m(t,0)}catch(v){try{return m.call(null,t,0)}catch(w){return m.call(this,t,0)}}}function k(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(v){try{return c.call(null,t)}catch(w){return c.call(this,t)}}}function a(){g&&h&&(g=!1,h.length?d=h.concat(d):q=-1,d.length&&e())}function e(){if(!g){var t=
p(a);g=!0;for(var v=d.length;v;){h=d;for(d=[];++q<v;)h&&h[q].run();q=-1;v=d.length}h=null;g=!1;k(t)}}function f(t,v){this.fun=t;this.array=v}function l(){}b=D.exports={};try{var m="function"===typeof setTimeout?setTimeout:r}catch(t){m=r}try{var c="function"===typeof clearTimeout?clearTimeout:n}catch(t){c=n}var d=[],g=!1,h,q=-1;b.nextTick=function(t){var v=Array(arguments.length-1);if(1<arguments.length)for(var w=1;w<arguments.length;w++)v[w-1]=arguments[w];d.push(new f(t,v));1!==d.length||g||p(e)};
f.prototype.run=function(){this.fun.apply(null,this.array)};b.title="browser";b.browser=!0;b.env={};b.argv=[];b.version="";b.versions={};b.on=l;b.addListener=l;b.once=l;b.off=l;b.removeListener=l;b.removeAllListeners=l;b.emit=l;b.prependListener=l;b.prependOnceListener=l;b.listeners=function(t){return[]};b.binding=function(t){throw Error("process.binding is not supported");};b.cwd=function(){return"/"};b.chdir=function(t){throw Error("process.chdir is not supported");};b.umask=function(){return 0}},
{}],501:[function(b,D,G){D.exports=b("gl-quat/slerp")},{"gl-quat/slerp":304}],502:[function(b,D,G){(function(r){var n=b("performance-now"),p="undefined"===typeof window?r:window;r=["moz","webkit"];for(var k=p.requestAnimationFrame,a=p.cancelAnimationFrame||p.cancelRequestAnimationFrame,e=0;!k&&e<r.length;e++)k=p[r[e]+"RequestAnimationFrame"],a=p[r[e]+"CancelAnimationFrame"]||p[r[e]+"CancelRequestAnimationFrame"];if(!k||!a){var f=0,l=0,m=[],c=1E3/60;k=function(d){if(0===m.length){var g=n(),h=Math.max(0,
c-(g-f));f=h+g;setTimeout(function(){for(var q=m.slice(0),t=m.length=0;t<q.length;t++)if(!q[t].cancelled)try{q[t].callback(f)}catch(v){setTimeout(function(){throw v;},0)}},Math.round(h))}m.push({handle:++l,callback:d,cancelled:!1});return l};a=function(d){for(var g=0;g<m.length;g++)m[g].handle===d&&(m[g].cancelled=!0)}}D.exports=function(d){return k.call(p,d)};D.exports.cancel=function(){a.apply(p,arguments)};D.exports.polyfill=function(d){d||(d=p);d.requestAnimationFrame=k;d.cancelAnimationFrame=
a}}).call(this,"undefined"!==typeof lb?lb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"performance-now":482}],503:[function(b,D,G){var r=b("big-rat/add");D.exports=function(n,p){for(var k=n.length,a=Array(k),e=0;e<k;++e)a[e]=r(n[e],p[e]);return a}},{"big-rat/add":80}],504:[function(b,D,G){D.exports=function(n){for(var p=Array(n.length),k=0;k<n.length;++k)p[k]=r(n[k]);return p};var r=b("big-rat")},{"big-rat":83}],505:[function(b,D,G){var r=b("big-rat"),n=b("big-rat/mul");
D.exports=function(p,k){k=r(k);for(var a=p.length,e=Array(a),f=0;f<a;++f)e[f]=n(p[f],k);return e}},{"big-rat":83,"big-rat/mul":92}],506:[function(b,D,G){var r=b("big-rat/sub");D.exports=function(n,p){for(var k=n.length,a=Array(k),e=0;e<k;++e)a[e]=r(n[e],p[e]);return a}},{"big-rat/sub":94}],507:[function(b,D,G){var r=b("compare-cell"),n=b("compare-oriented-cell"),p=b("cell-orientation");D.exports=function(k){k.sort(n);for(var a=k.length,e=0,f=0;f<a;++f){var l=k[f],m=p(l);if(0!==m){if(0<e){var c=k[e-
1];if(0===r(l,c)&&p(c)!==m){--e;continue}}k[e++]=l}}k.length=e;return k}},{"cell-orientation":117,"compare-cell":133,"compare-oriented-cell":134}],508:[function(b,D,G){var r=b("array-bounds"),n=b("color-normalize"),p=b("update-diff"),k=b("pick-by-alias"),a=b("object-assign"),e=b("flatten-vertex-data");b=b("to-float32");var f=b.float32,l=b.fract32;D.exports=function(c,d){function g(J){J?t(J):null===J&&v();h()}function h(J){if("number"===typeof J)return q(J);J&&!Array.isArray(J)&&(J=[J]);c._refresh();
z.forEach(function(I,M){I&&(J&&(I.draw=J[M]?!0:!1),I.draw?q(M):I.draw=!0)})}function q(J){"number"===typeof J&&(J=z[J]);null!=J&&J&&J.count&&J.color&&J.opacity&&J.positions&&1<J.positions.length&&(J.scaleRatio=[J.scale[0]*J.viewport.width,J.scale[1]*J.viewport.height],H(J),J.after&&J.after(J))}function t(J){if(J){null!=J.length?"number"===typeof J[0]&&(J=[{positions:J}]):Array.isArray(J)||(J=[J]);var I=0,M=0;g.groups=z=J.map(function(N,Q){var O=z[Q];if(N)"function"===typeof N?N={after:N}:"number"===
typeof N[0]&&(N={positions:N});else return O;N=k(N,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"});O||(z[Q]=O={id:Q,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},N=a({},A,N));p(O,N,[{lineWidth:function(T){return.5*+T},capSize:function(T){return.5*+T},opacity:parseFloat,
errors:function(T){T=e(T);M+=T.length;return T},positions:function(T,V){T=e(T,"float64");V.count=Math.floor(T.length/2);V.bounds=r(T,2);V.offset=I;I+=V.count;return T}},{color:function(T,V){V=V.count;T||(T="transparent");if(!Array.isArray(T)||"number"===typeof T[0]){var Z=T;T=Array(V);for(var aa=0;aa<V;aa++)T[aa]=Z}if(T.length<V)throw Error("Not enough colors");Z=new Uint8Array(4*V);for(aa=0;aa<V;aa++){var Y=n(T[aa],"uint8");Z.set(Y,4*aa)}return Z},range:function(T,V,Z){Z=V.bounds;T||(T=Z);V.scale=
[1/(T[2]-T[0]),1/(T[3]-T[1])];V.translate=[-T[0],-T[1]];V.scaleFract=l(V.scale);V.translateFract=l(V.translate);return T},viewport:function(T){if(Array.isArray(T))var V={x:T[0],y:T[1],width:T[2]-T[0],height:T[3]-T[1]};else T?(V={x:T.x||T.left||0,y:T.y||T.top||0},V.width=T.right?T.right-V.x:T.w||T.width||0,V.height=T.bottom?T.bottom-V.y:T.h||T.height||0):V={x:0,y:0,width:w.drawingBufferWidth,height:w.drawingBufferHeight};return V}}]);return O});if(I||M){J=z.reduce(function(N,Q,O){return N+(Q?Q.count:
0)},0);var E=new Float64Array(2*J),L=new Uint8Array(4*J),P=new Float32Array(4*J);z.forEach(function(N,Q){if(N){Q=N.positions;var O=N.offset,T=N.errors;N.count&&(L.set(N.color,4*O),P.set(T,4*O),E.set(Q,2*O))}});B(f(E));C(l(E));y(L);u(P)}}}function v(){B.destroy();C.destroy();y.destroy();u.destroy();F.destroy()}"function"===typeof c?(d||(d={}),d.regl=c):d=c;d.length&&(d.positions=d);c=d.regl;if(!c.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");
var w=c._gl,A={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},z=[];var y=c.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)});var B=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var C=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var u=c.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});var F=c.buffer({usage:"static",type:"float",data:m});t(d);var H=c({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor \x3d color / 255.;\n\n\t\t\tvec2 pixelOffset \x3d lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy \x3d -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position \x3d position + dxy;\n\n\t\t\tvec2 pos \x3d (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos +\x3d pixelOffset / viewport.zw;\n\n\t\t\tgl_Position \x3d vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",
frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor \x3d fragColor;\n\t\t\tgl_FragColor.a *\x3d opacity;\n\t\t}\n\t\t",uniforms:{range:c.prop("range"),lineWidth:c.prop("lineWidth"),capSize:c.prop("capSize"),opacity:c.prop("opacity"),scale:c.prop("scale"),translate:c.prop("translate"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),viewport:function(J,I){return[I.viewport.x,I.viewport.y,J.viewportWidth,
J.viewportHeight]}},attributes:{color:{buffer:y,offset:function(J,I){return 4*I.offset},divisor:1},position:{buffer:B,offset:function(J,I){return 8*I.offset},divisor:1},positionFract:{buffer:C,offset:function(J,I){return 8*I.offset},divisor:1},error:{buffer:u,offset:function(J,I){return 16*I.offset},divisor:1},direction:{buffer:F,stride:24,offset:0},lineOffset:{buffer:F,stride:24,offset:8},capOffset:{buffer:F,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",
alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport"),stencil:!1,instances:c.prop("count"),count:m.length});a(g,{update:t,draw:h,destroy:v,regl:c,gl:w,canvas:w.canvas,groups:z});return g};var m=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,
1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":70,"color-normalize":125,"flatten-vertex-data":244,"object-assign":473,"pick-by-alias":485,
"to-float32":549,"update-diff":571}],509:[function(b,D,G){function r(h,q){if(!(this instanceof r))return new r(h,q);"function"===typeof h?(q||(q={}),q.regl=h):q=h;q.length&&(q.positions=q);h=q.regl;if(!h.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=h._gl;this.regl=h;this.passes=[];this.shaders=r.shaders.has(h)?r.shaders.get(h):r.shaders.set(h,r.createShaders(h)).get(h);this.update(q)}var n=b("color-normalize"),p=b("array-bounds"),
k=b("object-assign"),a=b("glslify"),e=b("pick-by-alias"),f=b("flatten-vertex-data"),l=b("earcut"),m=b("array-normalize");G=b("to-float32");var c=G.float32,d=G.fract32;G=b("es6-weak-map");var g=b("parse-rect");D.exports=r;r.dashMult=2;r.maxPatternLength=256;r.precisionThreshold=3E6;r.maxPoints=1E4;r.maxLines=2048;r.shaders=new G;r.createShaders=function(h){var q=h.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),t={primitive:"triangle strip",instances:h.prop("count"),count:4,offset:0,uniforms:{miterMode:function(A,
z){return"round"===z.join?2:1},miterLimit:h.prop("miterLimit"),scale:h.prop("scale"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),thickness:h.prop("thickness"),dashPattern:h.prop("dashTexture"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),dashSize:h.prop("dashLength"),viewport:function(A,z){return[z.viewport.x,z.viewport.y,A.viewportWidth,A.viewportHeight]},depth:h.prop("depth")},blend:{enable:!0,color:[0,0,0,
0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(A,z){return!z.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport")},v=h(k({vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineOffset \x3d lineTop * 2. - 1.;\n\n\tvec2 diff \x3d (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent \x3d normalize(diff * scale * viewport.zw);\n\tvec2 normal \x3d vec2(-tangent.y, tangent.x);\n\n\tvec2 position \x3d project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha \x3d 1.;\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:q,divisor:0,
stride:8,offset:0},lineTop:{buffer:q,divisor:0,stride:8,offset:4},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},t));try{var w=h(k({cull:{enable:!0,face:"back"},vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD \x3d -.875;\nconst float MIN_DIFF \x3d 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord \x3d aCoord, bCoord \x3d bCoord, prevCoord \x3d prevCoord, nextCoord \x3d nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x \x3d (abs(scale.x) \x3c MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y \x3d (abs(scale.y) \x3c MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio \x3d adjustedScale * viewport.zw;\n\tvec2 normalWidth \x3d thickness / scaleRatio;\n\n\tfloat lineStart \x3d 1. - lineEnd;\n\tfloat lineBot \x3d 1. - lineTop;\n\n\tfragColor \x3d (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord \x3d\x3d prevCoord) prevCoord \x3d aCoord + normalize(bCoord - aCoord);\n\tif (bCoord \x3d\x3d nextCoord) nextCoord \x3d bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff \x3d aCoord - prevCoord;\n\tvec2 currDiff \x3d bCoord - aCoord;\n\tvec2 nextDiff \x3d nextCoord - bCoord;\n\n\tvec2 prevTangent \x3d normalize(prevDiff * scaleRatio);\n\tvec2 currTangent \x3d normalize(currDiff * scaleRatio);\n\tvec2 nextTangent \x3d normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal \x3d vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal \x3d vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal \x3d vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection \x3d normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection \x3d normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff \x3d abs(prevTangent - currTangent);\n\tvec2 nextTanDiff \x3d abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) \x3c MIN_DIFF) {\n\t\tstartJoinDirection \x3d currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) \x3c MIN_DIFF) {\n\t\tendJoinDirection \x3d currNormal;\n\t}\n\tif (aCoord \x3d\x3d bCoord) {\n\t\tendJoinDirection \x3d startJoinDirection;\n\t\tcurrNormal \x3d prevNormal;\n\t\tcurrTangent \x3d prevTangent;\n\t}\n\n\ttangent \x3d currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift \x3d dot(currNormal, startJoinDirection);\n\tfloat endJoinShift \x3d dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio \x3d abs(1. / startJoinShift);\n\tfloat endMiterRatio \x3d abs(1. / endJoinShift);\n\n\tvec2 startJoin \x3d startJoinDirection * startMiterRatio;\n\tvec2 endJoin \x3d endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin \x3d sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin \x3d -startTopJoin;\n\n\tendTopJoin \x3d sign(endJoinShift) * endJoin * .5;\n\tendBotJoin \x3d -endTopJoin;\n\n\tvec2 aTopCoord \x3d aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord \x3d bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord \x3d aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord \x3d bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping \x3d distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping \x3d distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse \x3d dot(currTangent, prevTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\tbool nextReverse \x3d dot(currTangent, nextTangent) \x3c\x3d REVERSE_THRESHOLD \x26\x26 abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) \x3c  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord \x3d aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord \x3d aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse \x26\x26 baClipping \x3e 0. \x26\x26 baClipping \x3c length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -\x3d normalWidth * endTopJoin;\n\t\tbTopCoord +\x3d normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift \x3d normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust \x3d 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord \x3d bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord \x3d bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse \x26\x26 abClipping \x3e 0. \x26\x26 abClipping \x3c length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -\x3d normalWidth * startBotJoin;\n\t\taBotCoord +\x3d normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition \x3d (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition \x3d (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition \x3d (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition \x3d (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position \x3d (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord \x3d aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord \x3d bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position \x3d vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter \x3d step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter \x3d step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tvec2 startMiterWidth \x3d vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff \x3d vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw +\x3d vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff \x3d startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff +\x3d viewport.xyxy;\n\t\t\tstartCutoff +\x3d startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tvec2 endMiterWidth \x3d vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff \x3d vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw +\x3d vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff \x3d endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff +\x3d viewport.xyxy;\n\t\t\tendCutoff +\x3d endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff \x3d b - a;\n\tvec2 perp \x3d normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha \x3d 1., distToStart, distToEnd;\n\tfloat cutoff \x3d thickness * .5;\n\n\t//bevel miter\n\tif (miterMode \x3d\x3d 1.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *\x3d min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode \x3d\x3d 2.) {\n\t\tif (enableStartMiter \x3d\x3d 1.) {\n\t\t\tdistToStart \x3d distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter \x3d\x3d 1.) {\n\t\t\tdistToEnd \x3d distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd \x3c 0.) {\n\t\t\t\tfloat radius \x3d length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius \x3e cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -\x3d smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t \x3d fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash \x3d texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor \x3d fragColor;\n\tgl_FragColor.a *\x3d alpha * opacity * dash;\n}\n"]),
attributes:{lineEnd:{buffer:q,divisor:0,stride:8,offset:0},lineTop:{buffer:q,divisor:0,stride:8,offset:4},aColor:{buffer:h.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:h.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:h.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:h.prop("positionBuffer"),stride:8,
offset:24,divisor:1}}},t))}catch(A){w=v}return{fill:h({primitive:"triangle",elements:function(A,z){return z.triangles},offset:0,vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES \x3d 256.;\n\nvoid main() {\n\tfloat depth \x3d (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position \x3d position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position \x3d vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor \x3d color / 255.;\n\tfragColor.a *\x3d opacity;\n}\n"]),
frag:a(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor \x3d fragColor;\n}\n"]),uniforms:{scale:h.prop("scale"),color:h.prop("fill"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),translate:h.prop("translate"),opacity:h.prop("opacity"),pixelRatio:h.context("pixelRatio"),id:h.prop("id"),viewport:function(A,z){return[z.viewport.x,z.viewport.y,A.viewportWidth,A.viewportHeight]}},attributes:{position:{buffer:h.prop("positionBuffer"),
stride:8,offset:8},positionFract:{buffer:h.prop("positionFractBuffer"),stride:8,offset:8}},blend:t.blend,depth:{enable:!1},scissor:t.scissor,stencil:t.stencil,viewport:t.viewport}),rect:v,miter:w}};r.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null};r.prototype.render=function(){for(var h=[],q=arguments.length;q--;)h[q]=arguments[q];h.length&&this.update.apply(this,h);this.draw()};r.prototype.draw=
function(){for(var h=this,q=[],t=arguments.length;t--;)q[t]=arguments[t];(q.length?q:this.passes).forEach(function(v,w){if(v&&Array.isArray(v))return h.draw.apply(h,v);"number"===typeof v&&(v=h.passes[v]);v&&1<v.count&&v.opacity&&(h.regl._refresh(),v.fill&&v.triangles&&2<v.triangles.length&&h.shaders.fill(v),v.thickness&&(v.scale[0]*v.viewport.width>r.precisionThreshold||v.scale[1]*v.viewport.height>r.precisionThreshold?h.shaders.rect(v):"rect"===v.join||!v.join&&(2>=v.thickness||v.count>=r.maxPoints)?
h.shaders.rect(v):h.shaders.miter(v)))});return this};r.prototype.update=function(h){var q=this;if(h){null!=h.length?"number"===typeof h[0]&&(h=[{positions:h}]):Array.isArray(h)||(h=[h]);var t=this.regl,v=this.gl;h.forEach(function(z,y){var B=q.passes[y];if(void 0!==z)if(null===z)q.passes[y]=null;else{"number"===typeof z[0]&&(z={positions:z});z=e(z,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",
miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"});B||(q.passes[y]=B={id:y,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:t.texture({channels:1,
data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:t.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:t.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:t.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},z=k({},r.defaults,z));null!=z.thickness&&(B.thickness=parseFloat(z.thickness));null!=z.opacity&&(B.opacity=parseFloat(z.opacity));null!=z.miterLimit&&(B.miterLimit=parseFloat(z.miterLimit));null!=z.overlay&&
(B.overlay=!!z.overlay,y<r.maxLines&&(B.depth=2*(r.maxLines-1-y%r.maxLines)/r.maxLines-1));null!=z.join&&(B.join=z.join);null!=z.hole&&(B.hole=z.hole);null!=z.fill&&(B.fill=z.fill?n(z.fill,"uint8"):null);null!=z.viewport&&(B.viewport=g(z.viewport));B.viewport||(B.viewport=g([v.drawingBufferWidth,v.drawingBufferHeight]));null!=z.close&&(B.close=z.close);null===z.positions&&(z.positions=[]);if(z.positions){if(z.positions.x&&z.positions.y){var C=z.positions.x,u=z.positions.y;var F=B.count=Math.max(C.length,
u.length);y=new Float64Array(2*F);for(var H=0;H<F;H++)y[2*H]=C[H],y[2*H+1]=u[H]}else y=f(z.positions,"float64"),F=B.count=Math.floor(y.length/2);C=B.bounds=p(y,2);if(B.fill){H=[];u={};for(var J=0,I=0,M=0,E=B.count;I<E;I++){var L=y[2*I],P=y[2*I+1];isNaN(L)||isNaN(P)||null==L||null==P?(L=y[2*J],P=y[2*J+1],u[I]=J):J=I;H[M++]=L;H[M++]=P}H=l(H,B.hole||[]);J=0;for(I=H.length;J<I;J++)null!=u[H[J]]&&(H[J]=u[H[J]]);B.triangles=H}u=new Float64Array(y);m(u,2,C);C=new Float64Array(2*F+6);B.close?y[0]===y[2*F-
2]&&y[1]===y[2*F-1]?(C[0]=u[2*F-4],C[1]=u[2*F-3]):(C[0]=u[2*F-2],C[1]=u[2*F-1]):(C[0]=u[0],C[1]=u[1]);C.set(u,2);B.close?y[0]===y[2*F-2]&&y[1]===y[2*F-1]?(C[2*F+2]=u[2],C[2*F+3]=u[3],--B.count):(C[2*F+2]=u[0],C[2*F+3]=u[1],C[2*F+4]=u[2],C[2*F+5]=u[3]):(C[2*F+2]=u[2*F-2],C[2*F+3]=u[2*F-1],C[2*F+4]=u[2*F-2],C[2*F+5]=u[2*F-1]);B.positionBuffer(c(C));B.positionFractBuffer(d(C))}z.range?B.range=z.range:B.range||(B.range=B.bounds);(z.range||z.positions)&&B.count&&(y=B.bounds,F=B.range[2]-B.range[0],C=B.range[3]-
B.range[1],B.scale=[(y[2]-y[0])/F,(y[3]-y[1])/C],B.translate=[-B.range[0]/F+y[0]/F||0,-B.range[1]/C+y[1]/C||0],B.scaleFract=d(B.scale),B.translateFract=d(B.translate));if(z.dashes){if(!z.dashes||2>z.dashes.length)y=1,F=new Uint8Array([255,255,255,255,255,255,255,255]);else{for(F=y=0;F<z.dashes.length;++F)y+=z.dashes[F];F=new Uint8Array(y*r.dashMult);C=0;u=255;for(H=0;2>H;H++)for(J=0;J<z.dashes.length;++J){I=0;for(M=z.dashes[J]*r.dashMult*.5;I<M;++I)F[C++]=u;u^=255}}B.dashLength=y;B.dashTexture({channels:1,
data:F,width:F.length,height:1,mag:"linear",min:"linear"},0,0)}if(z.color){y=B.count;(F=z.color)||(F="transparent");z=new Uint8Array(4*y+4);if(Array.isArray(F)&&"number"!==typeof F[0]){for(C=0;C<y;C++)u=n(F[C],"uint8"),z.set(u,4*C);z.set(n(F[0],"uint8"),4*y)}else for(F=n(F,"uint8"),C=0;C<y+1;C++)z.set(F,4*C);B.colorBuffer({usage:"dynamic",type:"uint8",data:z})}}});if(h.length<this.passes.length){for(var w=h.length;w<this.passes.length;w++){var A=this.passes[w];A&&(A.colorBuffer.destroy(),A.positionBuffer.destroy(),
A.dashTexture.destroy())}this.passes.length=h.length}h=[];for(w=0;w<this.passes.length;w++)null!==this.passes[w]&&h.push(this.passes[w]);this.passes=h;return this}};r.prototype.destroy=function(){this.passes.forEach(function(h){h.colorBuffer.destroy();h.positionBuffer.destroy();h.dashTexture.destroy()});this.passes.length=0;return this}},{"array-bounds":70,"array-normalize":71,"color-normalize":125,earcut:177,"es6-weak-map":233,"flatten-vertex-data":244,glslify:413,"object-assign":473,"parse-rect":478,
"pick-by-alias":485,"to-float32":549}],510:[function(b,D,G){function r(w,A){if(w){if("string"===typeof w)return n(w,A);var z=Object.prototype.toString.call(w).slice(8,-1);"Object"===z&&w.constructor&&(z=w.constructor.name);if("Map"===z||"Set"===z)return Array.from(w);if("Arguments"===z||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z))return n(w,A)}}function n(w,A){if(null==A||A>w.length)A=w.length;for(var z=0,y=Array(A);z<A;z++)y[z]=w[z];return y}function p(w,A){var z=this;if(!(this instanceof
p))return new p(w,A);"function"===typeof w?(A||(A={}),A.regl=w):(A=w,w=null);A&&A.length&&(A.positions=A);w=A.regl;var y=w._gl,B=[];this.tooManyColors=h;var C=w.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"});l(this,{regl:w,gl:y,groups:[],markerCache:[null],markerTextures:[null],palette:B,paletteIds:{},paletteTexture:C,maxColors:255,maxSize:100,canvas:y.canvas});this.update(A);y={uniforms:{constPointSize:!!A.constPointSize,
pixelRatio:w.context("pixelRatio"),palette:C,paletteSize:function(u,F){return[z.tooManyColors?0:255,C.height]},scale:w.prop("scale"),scaleFract:w.prop("scaleFract"),translate:w.prop("translate"),translateFract:w.prop("translateFract"),opacity:w.prop("opacity"),marker:w.prop("markerTexture")},attributes:{x:function(u,F){return F.xAttr||{buffer:F.positionBuffer,stride:8,offset:0}},y:function(u,F){return F.yAttr||{buffer:F.positionBuffer,stride:8,offset:4}},xFract:function(u,F){return F.xAttr?{constant:[0,
0]}:{buffer:F.positionFractBuffer,stride:8,offset:0}},yFract:function(u,F){return F.yAttr?{constant:[0,0]}:{buffer:F.positionFractBuffer,stride:8,offset:4}},size:function(u,F){return F.size.length?{buffer:F.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*F.size/z.maxSize)]}},borderSize:function(u,F){return F.borderSize.length?{buffer:F.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*F.borderSize/z.maxSize)]}},colorId:function(u,F){return F.color.length?{buffer:F.colorBuffer,stride:z.tooManyColors?
8:4,offset:0}:{constant:z.tooManyColors?B.slice(4*F.color,4*F.color+4):[F.color]}},borderColorId:function(u,F){return F.borderColor.length?{buffer:F.colorBuffer,stride:z.tooManyColors?8:4,offset:z.tooManyColors?4:2}:{constant:z.tooManyColors?B.slice(4*F.borderColor,4*F.borderColor+4):[F.borderColor]}},isActive:function(u,F){return!0===F.activation?{constant:[1]}:F.activation?F.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",
dstAlpha:"one"}},scissor:{enable:!0,box:w.prop("viewport")},viewport:w.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:w.prop("elements"),count:w.prop("count"),offset:w.prop("offset"),primitive:"points"};A=l({},y);A.frag=m(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist \x3d texture2D(marker, gl_PointCoord).r, delta \x3d fragWidth;\n\n  // max-distance alpha\n  if (dist \x3c 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel \x3d\x3d fragColorLevel || fragBorderColor.a \x3d\x3d 0.) {\n    float colorAmt \x3d smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor \x3d vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt \x3d smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt \x3d smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color \x3d fragBorderColor;\n    color.a *\x3d borderColorAmt;\n    color \x3d mix(color, fragColor, colorAmt);\n    color.a *\x3d opacity;\n\n    gl_FragColor \x3d color;\n  }\n\n}\n"]);
A.vert=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\n\nconst float maxSize \x3d 100.;\nconst float borderLevel \x3d .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d 2. * size * pointSizeScale;\n  fragPointSize \x3d size * pixelRatio;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n\n  fragBorderColorLevel \x3d clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel \x3d clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]);
this.drawMarker=w(A);y=l({},y);y.frag=m(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt \x3d clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha \x3d 1.0, delta \x3d fragWidth;\n\n\tradius \x3d length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius \x3e 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -\x3d smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius \x3d fragBorderRadius;\n\tfloat ratio \x3d smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color \x3d mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *\x3d alpha * opacity;\n\tgl_FragColor \x3d color;\n}\n"]);
y.vert=m(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize \x3d 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale \x3d (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect \x3d (paletteSize.x \x3c 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive \x3d\x3d 0.) return;\n\n  vec2 position \x3d vec2(x, y);\n  vec2 positionFract \x3d vec2(xFract, yFract);\n\n  vec4 color \x3d getColor(colorId);\n  vec4 borderColor \x3d getColor(borderColorId);\n\n  float size \x3d size * maxSize / 255.;\n  float borderSize \x3d borderSize * maxSize / 255.;\n\n  gl_PointSize \x3d (size + borderSize) * pointSizeScale;\n\n  vec2 pos \x3d (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position \x3d vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius \x3d 1. - 2. * borderSize / (size + borderSize);\n  fragColor \x3d color;\n  fragBorderColor \x3d borderColor.a \x3d\x3d 0. || borderSize \x3d\x3d 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth \x3d 1. / gl_PointSize;\n}\n"]);
h&&(y.frag=y.frag.replace("smoothstep","smoothStep"),A.frag=A.frag.replace("smoothstep","smoothStep"));this.drawCircle=w(y)}var k=b("color-normalize"),a=b("array-bounds"),e=b("color-id"),f=b("@plotly/point-cluster"),l=b("object-assign"),m=b("glslify"),c=b("pick-by-alias"),d=b("update-diff"),g=b("flatten-vertex-data"),h=b("is-iexplorer"),q=b("to-float32"),t=b("parse-rect");p.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,
count:0,offset:0,bounds:null,positions:[],snap:1E4};p.prototype.render=function(){arguments.length&&this.update.apply(this,arguments);this.draw();return this};p.prototype.draw=function(){for(var w=this,A=arguments.length,z=Array(A),y=0;y<A;y++)z[y]=arguments[y];A=this.groups;1===z.length&&Array.isArray(z[0])&&(null===z[0][0]||Array.isArray(z[0][0]))&&(z=z[0]);this.regl._refresh();if(z.length)for(A=0;A<z.length;A++)this.drawItem(A,z[A]);else A.forEach(function(B,C){w.drawItem(C)});return this};p.prototype.drawItem=
function(w,A){var z=this.groups;w=z[w];"number"===typeof A&&(w=z[A],A=null);if(w&&w.count&&w.opacity){w.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,w,A));z=[];for(var y=1;y<w.activation.length;y++)if(w.activation[y]&&(!0===w.activation[y]||w.activation[y].data.length)){var B=z.push,C=B.apply,u=this.getMarkerDrawOptions(y,w,A);var F=u;F=Array.isArray(F)?n(F):void 0;F||(F="undefined"!==typeof Symbol&&Symbol.iterator in Object(u)?Array.from(u):void 0);if(!(u=F||r(u)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
C.call(B,z,u)}z.length&&this.drawMarker(z)}};p.prototype.getMarkerDrawOptions=function(w,A,z){var y=A.range,B=A.tree,C=A.viewport,u=A.activation,F=A.selectionBuffer,H=A.count;if(!B)return z?[l({},A,{markerTexture:this.markerTextures[w],activation:u[w],count:z.length,elements:z,offset:0})]:[l({},A,{markerTexture:this.markerTextures[w],activation:u[w],offset:0})];var J=[];y=B.range(y,{lod:!0,px:[(y[2]-y[0])/C.width,(y[3]-y[1])/C.height]});if(z){B=u[w].data;H=new Uint8Array(H);for(C=0;C<z.length;C++){var I=
z[C];H[I]=B?B[I]:1}F.subdata(H)}for(H=y.length;H--;){B=y[H];C=B;C=Array.isArray(C)?C:void 0;if(!C)if(C=void 0,"undefined"!==typeof Symbol&&Symbol.iterator in Object(B)){I=[];var M=!0,E=!1,L=void 0;try{for(var P=B[Symbol.iterator]();!(M=(C=P.next()).done)&&(I.push(C.value),2!==I.length);M=!0);}catch(N){E=!0,L=N}finally{try{if(!M&&null!=P["return"])P["return"]()}finally{if(E)throw L;}}C=I}else C=void 0;if(!(B=C||r(B,2)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
C=B[0];J.push(l({},A,{markerTexture:this.markerTextures[w],activation:z?F:u[w],offset:C,count:B[1]-C}))}return J};p.prototype.update=function(){for(var w=this,A=arguments.length,z=Array(A),y=0;y<A;y++)z[y]=arguments[y];if(z.length){1===z.length&&Array.isArray(z[0])&&(z=z[0]);var B=this.groups,C=this.gl,u=this.regl,F=this.maxSize,H=this.maxColors,J=this.palette;this.groups=B=z.map(function(I,M){var E=B[M];if(void 0===I)return E;null===I?I={positions:null}:"function"===typeof I?I={ondraw:I}:"number"===
typeof I[0]&&(I={positions:I});I=c(I,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",
opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"});null===I.positions&&(I.positions=[]);null!=I.tooManyColors&&(w.tooManyColors=I.tooManyColors);E||(B[M]=E={id:M,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:u.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:u.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:u.buffer({data:new Uint8Array(0),
usage:"dynamic",type:"uint8"}),positionBuffer:u.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:u.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},I=l({},p.defaults,I));!I.positions||"marker"in I||(I.marker=E.marker,delete E.marker);!I.marker||"positions"in I||(I.positions=E.positions,delete E.positions);var L=0,P=0;d(E,I,[{snap:!0,size:function(Z,aa){null==Z&&(Z=p.defaults.size);L+=Z&&Z.length?1:0;return Z},borderSize:function(Z,aa){null==Z&&(Z=p.defaults.borderSize);
L+=Z&&Z.length?1:0;return Z},opacity:parseFloat,color:function(Z,aa){null==Z&&(Z=p.defaults.color);Z=w.updateColor(Z);P++;return Z},borderColor:function(Z,aa){null==Z&&(Z=p.defaults.borderColor);Z=w.updateColor(Z);P++;return Z},bounds:function(Z,aa,Y){"range"in Y||(Y.range=null);return Z},positions:function(Z,aa,Y){var ea=aa.snap,ca=aa.positionBuffer,ba=aa.positionFractBuffer,ka=aa.selectionBuffer;if(Z.x||Z.y)return aa.xAttr=Z.x.length?{buffer:u.buffer(Z.x),offset:0,stride:4,count:Z.x.length}:{buffer:Z.x.buffer,
offset:4*Z.x.offset||0,stride:4*(Z.x.stride||1),count:Z.x.count},aa.yAttr=Z.y.length?{buffer:u.buffer(Z.y),offset:0,stride:4,count:Z.y.length}:{buffer:Z.y.buffer,offset:4*Z.y.offset||0,stride:4*(Z.y.stride||1),count:Z.y.count},aa.count=Math.max(aa.xAttr.count,aa.yAttr.count),Z;Z=g(Z,"float64");var qa=aa.count=Math.floor(Z.length/2),pa=aa.bounds=qa?a(Z,2):null;Y.range||aa.range||(delete aa.range,Y.range=pa);Y.marker||aa.marker||(delete aa.marker,Y.marker=null);ea&&(!0===ea||qa>ea)?aa.tree=f(Z,{bounds:pa}):
ea&&ea.length&&(aa.tree=ea);aa.tree&&(Y={primitive:"points",usage:"static",data:aa.tree,type:"uint32"},aa.elements?aa.elements(Y):aa.elements=u.elements(Y));ca({data:q.float(Z),usage:"dynamic"});ba({data:q.fract(Z),usage:"dynamic"});ka({data:new Uint8Array(qa),type:"uint8",usage:"stream"});return Z}},{marker:function(Z,aa,Y){Y=aa.activation;Y.forEach(function(qa){return qa&&qa.destroy&&qa.destroy()});Y.length=0;if(Z&&"number"!==typeof Z[0]){for(var ea=[],ca=0,ba=Math.min(Z.length,aa.count);ca<ba;ca++){var ka=
w.addMarker(Z[ca]);ea[ka]||(ea[ka]=new Uint8Array(aa.count));ea[ka][ca]=1}for(aa=0;aa<ea.length;aa++)if(ea[aa]){ca={data:ea[aa],type:"uint8",usage:"static"};if(Y[aa])Y[aa](ca);else Y[aa]=u.buffer(ca);Y[aa].data=ea[aa]}}else ea=w.addMarker(Z),Y[ea]=!0;return Z},range:function(Z,aa,Y){if(Y=aa.bounds)return Z||(Z=Y),aa.scale=[1/(Z[2]-Z[0]),1/(Z[3]-Z[1])],aa.translate=[-Z[0],-Z[1]],aa.scaleFract=q.fract(aa.scale),aa.translateFract=q.fract(aa.translate),Z},viewport:function(Z){return t(Z||[C.drawingBufferWidth,
C.drawingBufferHeight])}}]);if(L){var N=E;I=N.count;M=N.size;var Q=N.borderSize;N=N.sizeBuffer;var O=new Uint8Array(2*I);if(M.length||Q.length)for(var T=0;T<I;T++)O[2*T]=Math.round(255*(null==M[T]?M:M[T])/F),O[2*T+1]=Math.round(255*(null==Q[T]?Q:Q[T])/F);N({data:O,usage:"dynamic"})}if(P){N=E;I=N.count;M=N.color;Q=N.borderColor;N=N.colorBuffer;if(w.tooManyColors){if(M.length||Q.length){var V=new Uint8Array(8*I);for(O=0;O<I;O++)T=M[O],V[8*O]=J[4*T],V[8*O+1]=J[4*T+1],V[8*O+2]=J[4*T+2],V[8*O+3]=J[4*T+
3],T=Q[O],V[8*O+4]=J[4*T],V[8*O+5]=J[4*T+1],V[8*O+6]=J[4*T+2],V[8*O+7]=J[4*T+3]}}else if(M.length||Q.length)for(V=new Uint8Array(4*I+2),O=0;O<I;O++)null!=M[O]&&(V[4*O]=M[O]%H,V[4*O+1]=Math.floor(M[O]/H)),null!=Q[O]&&(V[4*O+2]=Q[O]%H,V[4*O+3]=Math.floor(Q[O]/H));N({data:V||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return E})}};p.prototype.addMarker=function(w){var A=this.markerTextures,z=this.regl,y=this.markerCache,B=null==w?0:y.indexOf(w);if(0<=B)return B;if(w instanceof Uint8Array||w instanceof
Uint8ClampedArray)var C=w;else{C=new Uint8Array(w.length);B=0;for(var u=w.length;B<u;B++)C[B]=255*w[B]}u=Math.floor(Math.sqrt(C.length));B=A.length;y.push(w);A.push(z.texture({channels:1,data:C,radius:u,mag:"linear",min:"linear"}));return B};p.prototype.updateColor=function(w){var A=this.paletteIds,z=this.palette,y=this.maxColors;Array.isArray(w)||(w=[w]);var B=[];if("number"===typeof w[0]){var C=[];if(Array.isArray(w))for(var u=0;u<w.length;u+=4)C.push(w.slice(u,u+4));else for(u=0;u<w.length;u+=
4)C.push(w.subarray(u,u+4));w=C}for(C=0;C<w.length;C++){u=w[C];u=k(u,"uint8");var F=e(u,!1);if(null==A[F]){var H=z.length;A[F]=Math.floor(H/4);z[H]=u[0];z[H+1]=u[1];z[H+2]=u[2];z[H+3]=u[3]}B[C]=A[F]}!this.tooManyColors&&z.length>4*y&&(this.tooManyColors=!0);this.updatePalette(z);return 1===B.length?B[0]:B};p.prototype.updatePalette=function(w){if(!this.tooManyColors){var A=this.maxColors,z=this.paletteTexture,y=Math.ceil(.25*w.length/A);if(1<y){w=w.slice();for(var B=.25*w.length%A;B<y*A;B++)w.push(0,
0,0,0)}z.height<y&&z.resize(A,y);z.subimage({width:Math.min(.25*w.length,A),height:y,data:w},0,0)}};p.prototype.destroy=function(){this.groups.forEach(function(w){w.sizeBuffer.destroy();w.positionBuffer.destroy();w.positionFractBuffer.destroy();w.colorBuffer.destroy();w.activation.forEach(function(A){return A&&A.destroy&&A.destroy()});w.selectionBuffer.destroy();w.elements&&w.elements.destroy()});this.groups.length=0;this.paletteTexture.destroy();this.markerTextures.forEach(function(w){return w&&
w.destroy&&w.destroy()});return this};var v=b("object-assign");D.exports=function(w,A){w=new p(w,A);A=w.render.bind(w);v(A,{render:A,update:w.update.bind(w),draw:w.draw.bind(w),destroy:w.destroy.bind(w),regl:w.regl,gl:w.gl,canvas:w.gl.canvas,groups:w.groups,markers:w.markerCache,palette:w.palette});return A}},{"@plotly/point-cluster":57,"array-bounds":70,"color-id":123,"color-normalize":125,"flatten-vertex-data":244,glslify:413,"is-iexplorer":440,"object-assign":473,"parse-rect":478,"pick-by-alias":485,
"to-float32":549,"update-diff":571}],511:[function(b,D,G){function r(d,g){if(!(this instanceof r))return new r(d,g);this.traces=[];this.passes={};this.regl=d;this.scatter=k(d);this.canvas=this.scatter.canvas}function n(d,g,h){g=d[g];var q=d[h];2<g.length?(d=g[1],g=g[3]):g.length?(d=g[0],g=g[1]):(d=g.y,g=g.y+g.height);2<q.length?(h=q[0],q=q[2]):q.length?(h=q[0],q=q[1]):(h=q.x,q=q.x+q.width);return[h,d,q,g]}function p(d){if("number"===typeof d)return[d,d,d,d];if(2===d.length)return[d[0],d[1],d[0],d[1]];
d=m(d);return[d.x,d.y,d.x+d.width,d.y+d.height]}var k=b("regl-scatter2d"),a=b("pick-by-alias"),e=b("array-bounds"),f=b("raf"),l=b("array-range"),m=b("parse-rect"),c=b("flatten-vertex-data");D.exports=r;r.prototype.render=function(){for(var d=this,g=[],h=arguments.length;h--;)g[h]=arguments[h];g.length&&this.update.apply(this,g);if(this.regl.attributes.preserveDrawingBuffer)return this.draw();this.dirty?null==this.planned&&(this.planned=f(function(){d.draw();d.dirty=!0;d.planned=null})):(this.draw(),
this.dirty=!0,f(function(){d.dirty=!1}));return this};r.prototype.update=function(){for(var d,g=[],h=arguments.length;h--;)g[h]=arguments[h];if(g.length){for(h=0;h<g.length;h++)this.updateItem(h,g[h]);this.traces=this.traces.filter(Boolean);g=[];for(var q=h=0;q<this.traces.length;q++){for(var t=this.traces[q],v=this.traces[q].passes,w=0;w<v.length;w++)g.push(this.passes[v[w]]);t.passOffset=h;h+=t.passes.length}(d=this.scatter).update.apply(d,g);return this}};r.prototype.updateItem=function(d,g){var h=
this.regl;if(null===g)return this.traces[d]=null,this;if(!g)return this;g=a(g,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",
marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"});d=this.traces[d]||(this.traces[d]={id:d,buffer:h.buffer({usage:"dynamic",type:"float",
data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:m([h._gl.drawingBufferWidth,h._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});null!=g.color&&(d.color=g.color);null!=g.size&&(d.size=g.size);null!=g.marker&&(d.marker=g.marker);null!=g.borderColor&&(d.borderColor=g.borderColor);null!=g.borderSize&&(d.borderSize=g.borderSize);null!=g.opacity&&(d.opacity=g.opacity);g.viewport&&(d.viewport=m(g.viewport));null!=
g.diagonal&&(d.diagonal=g.diagonal);null!=g.upper&&(d.upper=g.upper);null!=g.lower&&(d.lower=g.lower);if(g.data)for(d.buffer(c(g.data)),d.columns=g.data.length,d.count=g.data[0].length,d.bounds=[],h=0;h<d.columns;h++)d.bounds[h]=e(g.data[h],1);if(g.range){d.range=g.range;var q=d.range&&"number"!==typeof d.range[0]}g.domain&&(d.domain=g.domain);h=!1;null!=g.padding&&(Array.isArray(g.padding)&&g.padding.length===d.columns&&"number"===typeof g.padding[g.padding.length-1]?(d.padding=g.padding.map(p),
h=!0):d.padding=p(g.padding));var t=d.columns,v=d.count,w=d.viewport.width,A=d.viewport.height,z=d.viewport.x,y=d.viewport.y,B=w/t,C=A/t;d.passes=[];for(var u=0;u<t;u++)for(var F=0;F<t;F++)if(d.diagonal||F!==u)if(d.upper||!(u>F))if(d.lower||!(u<F)){var H=d.id;H=(null!=H.id?H.id:H)<<16|(u&255)<<8|F&255;var J=this.passes[H]||(this.passes[H]={});g.data&&(J.positions=g.transpose?{x:{buffer:d.buffer,offset:F,count:v,stride:t},y:{buffer:d.buffer,offset:u,count:v,stride:t}}:{x:{buffer:d.buffer,offset:F*
v,count:v},y:{buffer:d.buffer,offset:u*v,count:v}},J.bounds=n(d.bounds,u,F));if(g.domain||g.viewport||g.data){var I=h?n(d.padding,u,F):d.padding;if(d.domain){var M=n(d.domain,u,F);J.viewport=[z+M[0]*w+I[0],y+M[1]*A+I[1],z+M[2]*w-I[2],y+M[3]*A-I[3]]}else J.viewport=[z+F*B+B*I[0],y+u*C+C*I[1],z+(F+1)*B-B*I[2],y+(u+1)*C-C*I[3]]}g.color&&(J.color=d.color);g.size&&(J.size=d.size);g.marker&&(J.marker=d.marker);g.borderSize&&(J.borderSize=d.borderSize);g.borderColor&&(J.borderColor=d.borderColor);g.opacity&&
(J.opacity=d.opacity);g.range&&(J.range=q?n(d.range,u,F):d.range||J.bounds);d.passes.push(H)}return this};r.prototype.draw=function(){for(var d,g=[],h=arguments.length;h--;)g[h]=arguments[h];if(g.length){var q=[];for(h=0;h<g.length;h++)if("number"===typeof g[h]){var t=this.traces[g[h]],v=t.passOffset;q.push.apply(q,l(v,v+t.passes.length))}else if(g[h].length){var w=g[h];t=this.traces[h];v=t.passes;var A=t.passOffset;v=v.map(function(z,y){q[A+y]=w})}(d=this.scatter).draw.apply(d,q)}else this.scatter.draw();
return this};r.prototype.destroy=function(){this.traces.forEach(function(d){d.buffer&&d.buffer.destroy&&d.buffer.destroy()});this.passes=this.traces=null;this.scatter.destroy();return this}},{"array-bounds":70,"array-range":72,"flatten-vertex-data":244,"parse-rect":478,"pick-by-alias":485,raf:502,"regl-scatter2d":510}],512:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?D.exports=n():r.createREGL=n()})(this,function(){function r(yb,Wb){this.id=ha++;this.type=yb;this.data=
Wb}function n(yb){if(0===yb.length)return[];var Wb=yb.charAt(0),Dc=yb.charAt(yb.length-1);if(1<yb.length&&Wb===Dc&&('"'===Wb||"'"===Wb))return['"'+yb.substr(1,yb.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Wb=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(yb))return n(yb.substr(0,Wb.index)).concat(n(Wb[1])).concat(n(yb.substr(Wb.index+Wb[0].length)));Wb=yb.split(".");if(1===Wb.length)return['"'+yb.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];yb=[];for(Dc=0;Dc<Wb.length;++Dc)yb=
yb.concat(n(Wb[Dc]));return yb}function p(yb){return"["+n(yb).join("][")+"]"}function k(){var yb={"":0},Wb=[""];return{id:function(Dc){var ec=yb[Dc];if(ec)return ec;ec=yb[Dc]=Wb.length;Wb.push(Dc);return ec},str:function(Dc){return Wb[Dc]}}}function a(yb,Wb,Dc){function ec(){var ob=window.innerWidth,tb=window.innerHeight;yb!==document.body&&(tb=yb.getBoundingClientRect(),ob=tb.right-tb.left,tb=tb.bottom-tb.top);kc.width=Dc*ob;kc.height=Dc*tb;ra(kc.style,{width:ob+"px",height:tb+"px"})}var kc=document.createElement("canvas");
ra(kc.style,{border:0,margin:0,padding:0,top:0,left:0});yb.appendChild(kc);yb===document.body&&(kc.style.position="absolute",ra(yb.style,{margin:0,padding:0}));var ic;yb!==document.body&&"function"===typeof ResizeObserver?(ic=new ResizeObserver(function(){setTimeout(ec)}),ic.observe(yb)):window.addEventListener("resize",ec,!1);ec();return{canvas:kc,onDestroy:function(){ic?ic.disconnect():window.removeEventListener("resize",ec);yb.removeChild(kc)}}}function e(yb,Wb){function Dc(ec){try{return yb.getContext(ec,
Wb)}catch(kc){return null}}return Dc("webgl")||Dc("experimental-webgl")||Dc("webgl-experimental")}function f(yb){return"string"===typeof yb?yb.split():yb}function l(yb){return"string"===typeof yb?document.querySelector(yb):yb}function m(yb){var Wb=yb||{},Dc,ec,kc,ic;yb={};var ob=[],tb=[],$b="undefined"===typeof window?1:window.devicePixelRatio,lc=!1,yc=function(Ub){},Rb=function(){};"string"===typeof Wb?Dc=document.querySelector(Wb):"object"===typeof Wb&&("string"===typeof Wb.nodeName&&"function"===
typeof Wb.appendChild&&"function"===typeof Wb.getBoundingClientRect?Dc=Wb:"function"===typeof Wb.drawArrays||"function"===typeof Wb.drawElements?(ic=Wb,kc=ic.canvas):("gl"in Wb?ic=Wb.gl:"canvas"in Wb?kc=l(Wb.canvas):"container"in Wb&&(ec=l(Wb.container)),"attributes"in Wb&&(yb=Wb.attributes),"extensions"in Wb&&(ob=f(Wb.extensions)),"optionalExtensions"in Wb&&(tb=f(Wb.optionalExtensions)),"onDone"in Wb&&(yc=Wb.onDone),"profile"in Wb&&(lc=!!Wb.profile),"pixelRatio"in Wb&&($b=+Wb.pixelRatio)));Dc&&("canvas"===
Dc.nodeName.toLowerCase()?kc=Dc:ec=Dc);if(!ic){if(!kc){Dc=a(ec||document.body,yc,$b);if(!Dc)return null;kc=Dc.canvas;Rb=Dc.onDestroy}void 0===yb.premultipliedAlpha&&(yb.premultipliedAlpha=!0);ic=e(kc,yb)}return ic?{gl:ic,canvas:kc,container:ec,extensions:ob,optionalExtensions:tb,pixelRatio:$b,profile:lc,onDone:yc,onDestroy:Rb}:(Rb(),yc("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function c(yb,Wb){function Dc(ob){ob=ob.toLowerCase();try{var tb=
ec[ob]=yb.getExtension(ob)}catch($b){}return!!tb}for(var ec={},kc=0;kc<Wb.extensions.length;++kc){var ic=Wb.extensions[kc];if(!Dc(ic))return Wb.onDestroy(),Wb.onDone('"'+ic+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}Wb.optionalExtensions.forEach(Dc);return{extensions:ec,restore:function(){Object.keys(ec).forEach(function(ob){if(ec[ob]&&!Dc(ob))throw Error("(regl): error restoring extension "+ob);})}}}function d(yb,Wb){for(var Dc=
Array(yb),ec=0;ec<yb;++ec)Dc[ec]=Wb(ec);return Dc}function g(yb){var Wb=(65535<yb)<<4;yb>>>=Wb;var Dc=(255<yb)<<3;yb>>>=Dc;Wb|=Dc;Dc=(15<yb)<<2;yb>>>=Dc;Wb|=Dc;Dc=(3<yb)<<1;return Wb|Dc|yb>>>Dc>>1}function h(){function yb(ec){a:{for(var kc=16;268435456>=kc;kc*=16)if(ec<=kc){ec=kc;break a}ec=0}kc=Dc[g(ec)>>2];return 0<kc.length?kc.pop():new ArrayBuffer(ec)}function Wb(ec){Dc[g(ec.byteLength)>>2].push(ec)}var Dc=d(8,function(){return[]});return{alloc:yb,free:Wb,allocType:function(ec,kc){switch(ec){case 5120:ec=
new Int8Array(yb(kc),0,kc);break;case 5121:ec=new Uint8Array(yb(kc),0,kc);break;case 5122:ec=new Int16Array(yb(2*kc),0,kc);break;case 5123:ec=new Uint16Array(yb(2*kc),0,kc);break;case 5124:ec=new Int32Array(yb(4*kc),0,kc);break;case 5125:ec=new Uint32Array(yb(4*kc),0,kc);break;case 5126:ec=new Float32Array(yb(4*kc),0,kc);break;default:return null}return ec.length!==kc?ec.subarray(0,kc):ec},freeType:function(ec){Wb(ec.buffer)}}}function q(yb){return!!yb&&"object"===typeof yb&&Array.isArray(yb.shape)&&
Array.isArray(yb.stride)&&"number"===typeof yb.offset&&yb.shape.length===yb.stride.length&&(Array.isArray(yb.data)||Fa(yb.data))}function t(yb,Wb,Dc,ec,kc,ic){for(var ob=0;ob<Wb;++ob)for(var tb=yb[ob],$b=0;$b<Dc;++$b)for(var lc=tb[$b],yc=0;yc<ec;++yc)kc[ic++]=lc[yc]}function v(yb,Wb,Dc,ec,kc){for(var ic=1,ob=Dc+1;ob<Wb.length;++ob)ic*=Wb[ob];var tb=Wb[Dc];if(4===Wb.length-Dc){var $b=Wb[Dc+1],lc=Wb[Dc+2];Wb=Wb[Dc+3];for(ob=0;ob<tb;++ob)t(yb[ob],$b,lc,Wb,ec,kc),kc+=ic}else for(ob=0;ob<tb;++ob)v(yb[ob],
Wb,Dc+1,ec,kc),kc+=ic}function w(yb){return gb[Object.prototype.toString.call(yb)]|0}function A(yb,Wb){for(var Dc=0;Dc<Wb.length;++Dc)yb[Dc]=Wb[Dc]}function z(yb,Wb,Dc,ec,kc,ic,ob){for(var tb=0,$b=0;$b<Dc;++$b)for(var lc=0;lc<ec;++lc)yb[tb++]=Wb[kc*$b+ic*lc+ob]}function y(yb,Wb,Dc,ec){function kc(Rb){this.id=$b++;this.buffer=yb.createBuffer();this.type=Rb;this.usage=35044;this.byteLength=0;this.dimension=1;this.dtype=5121;this.persistentData=null;Dc.profile&&(this.stats={size:0})}function ic(Rb,Ub,
zb){Rb.byteLength=Ub.byteLength;yb.bufferData(Rb.type,Ub,zb)}function ob(Rb,Ub,zb,qb,vb,Db){Rb.usage=zb;if(Array.isArray(Ub)){if(Rb.dtype=qb||5126,0<Ub.length)if(Array.isArray(Ub[0])){vb=mb(Ub);for(var Qb=qb=1;Qb<vb.length;++Qb)qb*=vb[Qb];Rb.dimension=qb;Ub=kb(Ub,vb,Rb.dtype);ic(Rb,Ub,zb);Db?Rb.persistentData=Ub:wa.freeType(Ub)}else"number"===typeof Ub[0]?(Rb.dimension=vb,vb=wa.allocType(Rb.dtype,Ub.length),A(vb,Ub),ic(Rb,vb,zb),Db?Rb.persistentData=vb:wa.freeType(vb)):Fa(Ub[0])&&(Rb.dimension=Ub[0].length,
Rb.dtype=qb||w(Ub[0])||5126,Ub=kb(Ub,[Ub.length,Ub[0].length],Rb.dtype),ic(Rb,Ub,zb),Db?Rb.persistentData=Ub:wa.freeType(Ub))}else if(Fa(Ub))Rb.dtype=qb||w(Ub),Rb.dimension=vb,ic(Rb,Ub,zb),Db&&(Rb.persistentData=new Uint8Array(new Uint8Array(Ub.buffer)));else if(q(Ub)){vb=Ub.shape;var wc=Ub.stride;Qb=Ub.offset;var dc=0,xc=0,Nc=0,Lc=0;1===vb.length?(dc=vb[0],xc=1,Nc=wc[0],Lc=0):2===vb.length&&(dc=vb[0],xc=vb[1],Nc=wc[0],Lc=wc[1]);Rb.dtype=qb||w(Ub.data)||5126;Rb.dimension=xc;vb=wa.allocType(Rb.dtype,
dc*xc);z(vb,Ub.data,dc,xc,Nc,Lc,Qb);ic(Rb,vb,zb);Db?Rb.persistentData=vb:wa.freeType(vb)}else Ub instanceof ArrayBuffer&&(Rb.dtype=5121,Rb.dimension=vb,ic(Rb,Ub,zb),Db&&(Rb.persistentData=new Uint8Array(new Uint8Array(Ub))))}function tb(Rb){Wb.bufferCount--;ec(Rb);yb.deleteBuffer(Rb.buffer);Rb.buffer=null;delete lc[Rb.id]}var $b=0,lc={};kc.prototype.bind=function(){yb.bindBuffer(this.type,this.buffer)};kc.prototype.destroy=function(){tb(this)};var yc=[];Dc.profile&&(Wb.getTotalBufferSize=function(){var Rb=
0;Object.keys(lc).forEach(function(Ub){Rb+=lc[Ub].stats.size});return Rb});return{create:function(Rb,Ub,zb,qb){function vb(Qb){var wc=35044,dc=null,xc=0,Nc=0,Lc=1;Array.isArray(Qb)||Fa(Qb)||q(Qb)||Qb instanceof ArrayBuffer?dc=Qb:"number"===typeof Qb?xc=Qb|0:Qb&&("data"in Qb&&(dc=Qb.data),"usage"in Qb&&(wc=La[Qb.usage]),"type"in Qb&&(Nc=bb[Qb.type]),"dimension"in Qb&&(Lc=Qb.dimension|0),"length"in Qb&&(xc=Qb.length|0));Db.bind();dc?ob(Db,dc,wc,Nc,Lc,qb):(xc&&yb.bufferData(Db.type,xc,wc),Db.dtype=Nc||
5121,Db.usage=wc,Db.dimension=Lc,Db.byteLength=xc);Dc.profile&&(Db.stats.size=Db.byteLength*ya[Db.dtype]);return vb}Wb.bufferCount++;var Db=new kc(Ub);lc[Db.id]=Db;zb||vb(Rb);vb._reglType="buffer";vb._buffer=Db;vb.subdata=function(Qb,wc){wc=(wc||0)|0;Db.bind();if(Fa(Qb)||Qb instanceof ArrayBuffer)yb.bufferSubData(Db.type,wc,Qb);else if(Array.isArray(Qb)){if(0<Qb.length)if("number"===typeof Qb[0]){var dc=wa.allocType(Db.dtype,Qb.length);A(dc,Qb);yb.bufferSubData(Db.type,wc,dc);wa.freeType(dc)}else if(Array.isArray(Qb[0])||
Fa(Qb[0])){var xc=mb(Qb);dc=kb(Qb,xc,Db.dtype);yb.bufferSubData(Db.type,wc,dc);wa.freeType(dc)}}else if(q(Qb)){xc=Qb.shape;var Nc=Qb.stride,Lc=dc=0,$c=0,od=0;1===xc.length?(dc=xc[0],Lc=1,$c=Nc[0],od=0):2===xc.length&&(dc=xc[0],Lc=xc[1],$c=Nc[0],od=Nc[1]);xc=Array.isArray(Qb.data)?Db.dtype:w(Qb.data);xc=wa.allocType(xc,dc*Lc);z(xc,Qb.data,dc,Lc,$c,od,Qb.offset);yb.bufferSubData(Db.type,wc,xc);wa.freeType(xc)}return vb};Dc.profile&&(vb.stats=Db.stats);vb.destroy=function(){tb(Db)};return vb},createStream:function(Rb,
Ub){var zb=yc.pop();zb||(zb=new kc(Rb));zb.bind();ob(zb,Ub,35040,0,1,!1);return zb},destroyStream:function(Rb){yc.push(Rb)},clear:function(){Xa(lc).forEach(tb);yc.forEach(tb)},getBuffer:function(Rb){return Rb&&Rb._buffer instanceof kc?Rb._buffer:null},restore:function(){Xa(lc).forEach(function(Rb){Rb.buffer=yb.createBuffer();yb.bindBuffer(Rb.type,Rb.buffer);yb.bufferData(Rb.type,Rb.persistentData||Rb.byteLength,Rb.usage)})},_initBuffer:ob}}function B(yb,Wb,Dc,ec){function kc(Rb){this.id=$b++;tb[this.id]=
this;this.buffer=Rb;this.primType=4;this.type=this.vertCount=0}function ic(Rb,Ub,zb,qb,vb,Db,Qb){Rb.buffer.bind();var wc;Ub?((wc=Qb)||Fa(Ub)&&(!q(Ub)||Fa(Ub.data))||(wc=Wb.oes_element_index_uint?5125:5123),Dc._initBuffer(Rb.buffer,Ub,zb,wc,3)):(yb.bufferData(34963,Db,zb),Rb.buffer.dtype=wc||5121,Rb.buffer.usage=zb,Rb.buffer.dimension=3,Rb.buffer.byteLength=Db);wc=Qb;if(!Qb){switch(Rb.buffer.dtype){case 5121:case 5120:wc=5121;break;case 5123:case 5122:wc=5123;break;case 5125:case 5124:wc=5125}Rb.buffer.dtype=
wc}Rb.type=wc;Ub=vb;0>Ub&&(Ub=Rb.buffer.byteLength,5123===wc?Ub>>=1:5125===wc&&(Ub>>=2));Rb.vertCount=Ub;Ub=qb;0>qb&&(Ub=4,qb=Rb.buffer.dimension,1===qb&&(Ub=0),2===qb&&(Ub=1),3===qb&&(Ub=4));Rb.primType=Ub}function ob(Rb){ec.elementsCount--;delete tb[Rb.id];Rb.buffer.destroy();Rb.buffer=null}var tb={},$b=0,lc={uint8:5121,uint16:5123};Wb.oes_element_index_uint&&(lc.uint32=5125);kc.prototype.bind=function(){this.buffer.bind()};var yc=[];return{create:function(Rb,Ub){function zb(Db){if(Db)if("number"===
typeof Db)qb(Db),vb.primType=4,vb.vertCount=Db|0,vb.type=5121;else{var Qb=null,wc=35044,dc=-1,xc=-1,Nc=0,Lc=0;if(Array.isArray(Db)||Fa(Db)||q(Db))Qb=Db;else if("data"in Db&&(Qb=Db.data),"usage"in Db&&(wc=La[Db.usage]),"primitive"in Db&&(dc=Ia[Db.primitive]),"count"in Db&&(xc=Db.count|0),"type"in Db&&(Lc=lc[Db.type]),"length"in Db)Nc=Db.length|0;else if(Nc=xc,5123===Lc||5122===Lc)Nc*=2;else if(5125===Lc||5124===Lc)Nc*=4;ic(vb,Qb,wc,dc,xc,Nc,Lc)}else qb(),vb.primType=4,vb.vertCount=0,vb.type=5121;return zb}
var qb=Dc.create(null,34963,!0),vb=new kc(qb._buffer);ec.elementsCount++;zb(Rb);zb._reglType="elements";zb._elements=vb;zb.subdata=function(Db,Qb){qb.subdata(Db,Qb);return zb};zb.destroy=function(){ob(vb)};return zb},createStream:function(Rb){var Ub=yc.pop();Ub||(Ub=new kc(Dc.create(null,34963,!0,!1)._buffer));ic(Ub,Rb,35040,-1,-1,0,0);return Ub},destroyStream:function(Rb){yc.push(Rb)},getElements:function(Rb){return"function"===typeof Rb&&Rb._elements instanceof kc?Rb._elements:null},clear:function(){Xa(tb).forEach(ob)}}}
function C(yb){for(var Wb=wa.allocType(5123,yb.length),Dc=0;Dc<yb.length;++Dc)if(isNaN(yb[Dc]))Wb[Dc]=65535;else if(Infinity===yb[Dc])Wb[Dc]=31744;else if(-Infinity===yb[Dc])Wb[Dc]=64512;else{Na[0]=yb[Dc];var ec=Ta[0],kc=ec>>>31<<15,ic=(ec<<1>>>24)-127;ec=ec>>13&1023;Wb[Dc]=-24>ic?kc:-14>ic?kc+(ec+1024>>-14-ic):15<ic?kc+31744:kc+(ic+15<<10)+ec}return Wb}function u(yb){return Array.isArray(yb)||Fa(yb)}function F(yb){return"[object "+yb+"]"}function H(yb){return Array.isArray(yb)&&(0===yb.length||"number"===
typeof yb[0])}function J(yb){return Array.isArray(yb)&&0!==yb.length&&u(yb[0])?!0:!1}function I(yb){return Object.prototype.toString.call(yb)}function M(yb){if(!yb)return!1;var Wb=I(yb);return 0<=eb.indexOf(Wb)?!0:H(yb)||J(yb)||q(yb)}function E(yb,Wb){36193===yb.type?(yb.data=C(Wb),wa.freeType(Wb)):yb.data=Wb}function L(yb,Wb,Dc,ec,kc,ic){yb="undefined"!==typeof Za[yb]?Za[yb]:Ga[yb]*pb[Wb];ic&&(yb*=6);if(kc){for(ec=0;1<=Dc;)ec+=yb*Dc*Dc,Dc/=2;return ec}return yb*Dc*ec}function P(yb,Wb,Dc,ec,kc,ic,
ob){function tb(){this.format=this.internalformat=6408;this.type=5121;this.flipY=this.premultiplyAlpha=this.compressed=!1;this.unpackAlignment=1;this.colorSpace=37444;this.channels=this.height=this.width=0}function $b(Ma,xb){Ma.internalformat=xb.internalformat;Ma.format=xb.format;Ma.type=xb.type;Ma.compressed=xb.compressed;Ma.premultiplyAlpha=xb.premultiplyAlpha;Ma.flipY=xb.flipY;Ma.unpackAlignment=xb.unpackAlignment;Ma.colorSpace=xb.colorSpace;Ma.width=xb.width;Ma.height=xb.height;Ma.channels=xb.channels}
function lc(Ma,xb){if("object"===typeof xb&&xb){"premultiplyAlpha"in xb&&(Ma.premultiplyAlpha=xb.premultiplyAlpha);"flipY"in xb&&(Ma.flipY=xb.flipY);"alignment"in xb&&(Ma.unpackAlignment=xb.alignment);"colorSpace"in xb&&(Ma.colorSpace=xe[xb.colorSpace]);"type"in xb&&(Ma.type=Kd[xb.type]);var rb=Ma.width,Hb=Ma.height,mc=Ma.channels,Ic=!1;"shape"in xb?(rb=xb.shape[0],Hb=xb.shape[1],3===xb.shape.length&&(mc=xb.shape[2],Ic=!0)):("radius"in xb&&(rb=Hb=xb.radius),"width"in xb&&(rb=xb.width),"height"in xb&&
(Hb=xb.height),"channels"in xb&&(mc=xb.channels,Ic=!0));Ma.width=rb|0;Ma.height=Hb|0;Ma.channels=mc|0;rb=!1;"format"in xb&&(rb=xb.format,Hb=Ma.internalformat=Gc[rb],Ma.format=re[Hb],rb in Kd&&!("type"in xb)&&(Ma.type=Kd[rb]),rb in dd&&(Ma.compressed=!0),rb=!0);!Ic&&rb?Ma.channels=Ga[Ma.format]:Ic&&!rb&&Ma.channels!==Ya[Ma.format]&&(Ma.format=Ma.internalformat=Ya[Ma.channels])}}function yc(Ma){yb.pixelStorei(37440,Ma.flipY);yb.pixelStorei(37441,Ma.premultiplyAlpha);yb.pixelStorei(37443,Ma.colorSpace);
yb.pixelStorei(3317,Ma.unpackAlignment)}function Rb(){tb.call(this);this.yOffset=this.xOffset=0;this.data=null;this.needsFree=!1;this.element=null;this.needsCopy=!1}function Ub(Ma,xb){var rb=null;M(xb)?rb=xb:xb&&(lc(Ma,xb),"x"in xb&&(Ma.xOffset=xb.x|0),"y"in xb&&(Ma.yOffset=xb.y|0),M(xb.data)&&(rb=xb.data));if(xb.copy){xb=kc.viewportWidth;var Hb=kc.viewportHeight;Ma.width=Ma.width||xb-Ma.xOffset;Ma.height=Ma.height||Hb-Ma.yOffset;Ma.needsCopy=!0}else if(!rb)Ma.width=Ma.width||1,Ma.height=Ma.height||
1,Ma.channels=Ma.channels||4;else if(Fa(rb))Ma.channels=Ma.channels||4,Ma.data=rb,"type"in xb||5121!==Ma.type||(Ma.type=gb[Object.prototype.toString.call(rb)]|0);else if(H(rb)){Ma.channels=Ma.channels||4;xb=rb;Hb=xb.length;switch(Ma.type){case 5121:case 5123:case 5125:case 5126:Hb=wa.allocType(Ma.type,Hb);Hb.set(xb);Ma.data=Hb;break;case 36193:Ma.data=C(xb)}Ma.alignment=1;Ma.needsFree=!0}else if(q(rb)){xb=rb.data;Array.isArray(xb)||5121!==Ma.type||(Ma.type=gb[Object.prototype.toString.call(xb)]|0);
Hb=rb.shape;var mc=rb.stride,Ic,Yb;3===Hb.length?(Ic=Hb[2],Yb=mc[2]):Yb=Ic=1;var Ac=Hb[0];var Yc=Hb[1];Hb=mc[0];mc=mc[1];Ma.alignment=1;Ma.width=Ac;Ma.height=Yc;Ma.channels=Ic;Ma.format=Ma.internalformat=Ya[Ic];Ma.needsFree=!0;Ac=Yb;rb=rb.offset;Ic=Ma.width;Yb=Ma.height;Yc=Ma.channels;for(var md=wa.allocType(36193===Ma.type?5126:Ma.type,Ic*Yb*Yc),Gb=0,Sb=0;Sb<Yb;++Sb)for(var zc=0;zc<Ic;++zc)for(var Sc=0;Sc<Yc;++Sc)md[Gb++]=xb[Hb*zc+mc*Sb+Ac*Sc+rb];E(Ma,md)}else if(I(rb)===Pa||I(rb)===Va||I(rb)===
va)I(rb)===Pa||I(rb)===Va?Ma.element=rb:Ma.element=rb.canvas,Ma.width=Ma.element.width,Ma.height=Ma.element.height,Ma.channels=4;else if(I(rb)===Ea)Ma.element=rb,Ma.width=rb.width,Ma.height=rb.height,Ma.channels=4;else if(I(rb)===Qa)Ma.element=rb,Ma.width=rb.naturalWidth,Ma.height=rb.naturalHeight,Ma.channels=4;else if(I(rb)===$a)Ma.element=rb,Ma.width=rb.videoWidth,Ma.height=rb.videoHeight,Ma.channels=4;else if(J(rb)){xb=Ma.width||rb[0].length;Hb=Ma.height||rb.length;mc=Ma.channels;mc=u(rb[0][0])?
mc||rb[0][0].length:mc||1;Ac=ab.shape(rb);Ic=1;for(Yb=0;Yb<Ac.length;++Yb)Ic*=Ac[Yb];Ic=wa.allocType(36193===Ma.type?5126:Ma.type,Ic);ab.flatten(rb,Ac,"",Ic);E(Ma,Ic);Ma.alignment=1;Ma.width=xb;Ma.height=Hb;Ma.channels=mc;Ma.format=Ma.internalformat=Ya[mc];Ma.needsFree=!0}}function zb(Ma,xb,rb,Hb,mc){var Ic=Ma.element,Yb=Ma.data,Ac=Ma.internalformat,Yc=Ma.format,md=Ma.type,Gb=Ma.width,Sb=Ma.height;yc(Ma);Ic?yb.texSubImage2D(xb,mc,rb,Hb,Yc,md,Ic):Ma.compressed?yb.compressedTexSubImage2D(xb,mc,rb,Hb,
Ac,Gb,Sb,Yb):Ma.needsCopy?(ec(),yb.copyTexSubImage2D(xb,mc,rb,Hb,Ma.xOffset,Ma.yOffset,Gb,Sb)):yb.texSubImage2D(xb,mc,rb,Hb,Gb,Sb,Yc,md,Yb)}function qb(){return ve.pop()||new Rb}function vb(Ma){Ma.needsFree&&wa.freeType(Ma.data);Rb.call(Ma);ve.push(Ma)}function Db(){tb.call(this);this.genMipmaps=!1;this.mipmapHint=4352;this.mipmask=0;this.images=Array(16)}function Qb(Ma,xb,rb){var Hb=Ma.images[0]=qb();Ma.mipmask=1;Hb.width=Ma.width=xb;Hb.height=Ma.height=rb;Hb.channels=Ma.channels=4}function wc(Ma,
xb){if(M(xb)){var rb=Ma.images[0]=qb();$b(rb,Ma);Ub(rb,xb);Ma.mipmask=1}else if(lc(Ma,xb),Array.isArray(xb.mipmap)){xb=xb.mipmap;for(var Hb=0;Hb<xb.length;++Hb)rb=Ma.images[Hb]=qb(),$b(rb,Ma),rb.width>>=Hb,rb.height>>=Hb,Ub(rb,xb[Hb]),Ma.mipmask|=1<<Hb}else rb=Ma.images[0]=qb(),$b(rb,Ma),Ub(rb,xb),Ma.mipmask=1;$b(Ma,Ma.images[0])}function dc(Ma,xb){Ma=Ma.images;for(var rb=0;rb<Ma.length&&Ma[rb];++rb){var Hb=Ma[rb],mc=xb,Ic=rb,Yb=Hb.element,Ac=Hb.data,Yc=Hb.internalformat,md=Hb.format,Gb=Hb.type,Sb=
Hb.width,zc=Hb.height;yc(Hb);Yb?yb.texImage2D(mc,Ic,md,md,Gb,Yb):Hb.compressed?yb.compressedTexImage2D(mc,Ic,Yc,Sb,zc,0,Ac):Hb.needsCopy?(ec(),yb.copyTexImage2D(mc,Ic,md,Hb.xOffset,Hb.yOffset,Sb,zc,0)):yb.texImage2D(mc,Ic,md,Sb,zc,0,md,Gb,Ac||null)}}function xc(){var Ma=Se.pop()||new Db;tb.call(Ma);for(var xb=Ma.mipmask=0;16>xb;++xb)Ma.images[xb]=null;return Ma}function Nc(Ma){for(var xb=Ma.images,rb=0;rb<xb.length;++rb)xb[rb]&&vb(xb[rb]),xb[rb]=null;Se.push(Ma)}function Lc(){this.magFilter=this.minFilter=
9728;this.wrapT=this.wrapS=33071;this.anisotropic=1;this.genMipmaps=!1;this.mipmapHint=4352}function $c(Ma,xb){"min"in xb&&(Ma.minFilter=Fd[xb.min],0<=hb.indexOf(Ma.minFilter)&&!("faces"in xb)&&(Ma.genMipmaps=!0));"mag"in xb&&(Ma.magFilter=yd[xb.mag]);var rb=Ma.wrapS,Hb=Ma.wrapT;if("wrap"in xb){var mc=xb.wrap;"string"===typeof mc?rb=Hb=sd[mc]:Array.isArray(mc)&&(rb=sd[mc[0]],Hb=sd[mc[1]])}else"wrapS"in xb&&(rb=sd[xb.wrapS]),"wrapT"in xb&&(Hb=sd[xb.wrapT]);Ma.wrapS=rb;Ma.wrapT=Hb;"anisotropic"in xb&&
(Ma.anisotropic=xb.anisotropic);if("mipmap"in xb){rb=!1;switch(typeof xb.mipmap){case "string":Ma.mipmapHint=Mc[xb.mipmap];rb=Ma.genMipmaps=!0;break;case "boolean":rb=Ma.genMipmaps=xb.mipmap;break;case "object":Ma.genMipmaps=!1,rb=!0}!rb||"min"in xb||(Ma.minFilter=9984)}}function od(Ma,xb){yb.texParameteri(xb,10241,Ma.minFilter);yb.texParameteri(xb,10240,Ma.magFilter);yb.texParameteri(xb,10242,Ma.wrapS);yb.texParameteri(xb,10243,Ma.wrapT);Wb.ext_texture_filter_anisotropic&&yb.texParameteri(xb,34046,
Ma.anisotropic);Ma.genMipmaps&&(yb.hint(33170,Ma.mipmapHint),yb.generateMipmap(xb))}function Zc(Ma){tb.call(this);this.mipmask=0;this.internalformat=6408;this.id=gf++;this.refCount=1;this.target=Ma;this.texture=yb.createTexture();this.unit=-1;this.bindCount=0;this.texInfo=new Lc;ob.profile&&(this.stats={size:0})}function rd(Ma){yb.activeTexture(33984);yb.bindTexture(Ma.target,Ma.texture)}function Dd(){var Ma=Te[0];Ma?yb.bindTexture(Ma.target,Ma.texture):yb.bindTexture(3553,null)}function ed(Ma){var xb=
Ma.texture,rb=Ma.unit,Hb=Ma.target;0<=rb&&(yb.activeTexture(33984+rb),yb.bindTexture(Hb,null),Te[rb]=null);yb.deleteTexture(xb);Ma.texture=null;Ma.params=null;Ma.pixels=null;Ma.refCount=0;delete $e[Ma.id];ic.textureCount--}var Mc={"don't care":4352,"dont care":4352,nice:4354,fast:4353},sd={repeat:10497,clamp:33071,mirror:33648},yd={nearest:9728,linear:9729},Fd=ra({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},yd),xe=
{none:0,browser:37444},Kd={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Gc={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},dd={};Wb.ext_srgb&&(Gc.srgb=35904,Gc.srgba=35906);Wb.oes_texture_float&&(Kd.float32=Kd["float"]=5126);Wb.oes_texture_half_float&&(Kd.float16=Kd["half float"]=36193);Wb.webgl_depth_texture&&(ra(Gc,{depth:6402,"depth stencil":34041}),ra(Kd,{uint16:5123,uint32:5125,"depth stencil":34042}));Wb.webgl_compressed_texture_s3tc&&
ra(dd,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779});Wb.webgl_compressed_texture_atc&&ra(dd,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798});Wb.webgl_compressed_texture_pvrtc&&ra(dd,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843});Wb.webgl_compressed_texture_etc1&&(dd["rgb etc1"]=36196);var vd=Array.prototype.slice.call(yb.getParameter(34467));Object.keys(dd).forEach(function(Ma){var xb=
dd[Ma];0<=vd.indexOf(xb)&&(Gc[Ma]=xb)});var Cd=Object.keys(Gc);Dc.textureFormats=Cd;var ae=[];Object.keys(Gc).forEach(function(Ma){ae[Gc[Ma]]=Ma});var me=[];Object.keys(Kd).forEach(function(Ma){me[Kd[Ma]]=Ma});var Nd=[];Object.keys(yd).forEach(function(Ma){Nd[yd[Ma]]=Ma});var Id=[];Object.keys(Fd).forEach(function(Ma){Id[Fd[Ma]]=Ma});var qe=[];Object.keys(sd).forEach(function(Ma){qe[sd[Ma]]=Ma});var re=Cd.reduce(function(Ma,xb){var rb=Gc[xb];6409===rb||6406===rb||6409===rb||6410===rb||6402===rb||
34041===rb||Wb.ext_srgb&&(35904===rb||35906===rb)?Ma[rb]=rb:32855===rb||0<=xb.indexOf("rgba")?Ma[rb]=6408:Ma[rb]=6407;return Ma},{}),ve=[],Se=[],gf=0,$e={},cf=Dc.maxTextureUnits,Te=Array(cf).map(function(){return null});ra(Zc.prototype,{bind:function(){this.bindCount+=1;var Ma=this.unit;if(0>Ma){for(var xb=0;xb<cf;++xb){var rb=Te[xb];if(rb){if(0<rb.bindCount)continue;rb.unit=-1}Te[xb]=this;Ma=xb;break}ob.profile&&ic.maxTextureUnits<Ma+1&&(ic.maxTextureUnits=Ma+1);this.unit=Ma;yb.activeTexture(33984+
Ma);yb.bindTexture(this.target,this.texture)}return Ma},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&ed(this)}});ob.profile&&(ic.getTotalTextureSize=function(){var Ma=0;Object.keys($e).forEach(function(xb){Ma+=$e[xb].stats.size});return Ma});return{create2D:function(Ma,xb){function rb(mc,Ic){var Yb=Hb.texInfo;Lc.call(Yb);var Ac=xc();"number"===typeof mc?"number"===typeof Ic?Qb(Ac,mc|0,Ic|0):Qb(Ac,mc|0,mc|0):mc?($c(Yb,mc),wc(Ac,mc)):Qb(Ac,1,1);Yb.genMipmaps&&(Ac.mipmask=
(Ac.width<<1)-1);Hb.mipmask=Ac.mipmask;$b(Hb,Ac);Hb.internalformat=Ac.internalformat;rb.width=Ac.width;rb.height=Ac.height;rd(Hb);dc(Ac,3553);od(Yb,3553);Dd();Nc(Ac);ob.profile&&(Hb.stats.size=L(Hb.internalformat,Hb.type,Ac.width,Ac.height,Yb.genMipmaps,!1));rb.format=ae[Hb.internalformat];rb.type=me[Hb.type];rb.mag=Nd[Yb.magFilter];rb.min=Id[Yb.minFilter];rb.wrapS=qe[Yb.wrapS];rb.wrapT=qe[Yb.wrapT];return rb}var Hb=new Zc(3553);$e[Hb.id]=Hb;ic.textureCount++;rb(Ma,xb);rb.subimage=function(mc,Ic,
Yb,Ac){Ic|=0;Yb|=0;Ac|=0;var Yc=qb();$b(Yc,Hb);Yc.width=0;Yc.height=0;Ub(Yc,mc);Yc.width=Yc.width||(Hb.width>>Ac)-Ic;Yc.height=Yc.height||(Hb.height>>Ac)-Yb;rd(Hb);zb(Yc,3553,Ic,Yb,Ac);Dd();vb(Yc);return rb};rb.resize=function(mc,Ic){mc|=0;Ic=Ic|0||mc;if(mc===Hb.width&&Ic===Hb.height)return rb;rb.width=Hb.width=mc;rb.height=Hb.height=Ic;rd(Hb);for(var Yb=0;Hb.mipmask>>Yb;++Yb){var Ac=mc>>Yb,Yc=Ic>>Yb;if(!Ac||!Yc)break;yb.texImage2D(3553,Yb,Hb.format,Ac,Yc,0,Hb.format,Hb.type,null)}Dd();ob.profile&&
(Hb.stats.size=L(Hb.internalformat,Hb.type,mc,Ic,!1,!1));return rb};rb._reglType="texture2d";rb._texture=Hb;ob.profile&&(rb.stats=Hb.stats);rb.destroy=function(){Hb.decRef()};return rb},createCube:function(Ma,xb,rb,Hb,mc,Ic){function Yb(md,Gb,Sb,zc,Sc,Ec){var Pc,Oc=Ac.texInfo;Lc.call(Oc);for(Pc=0;6>Pc;++Pc)Yc[Pc]=xc();if("number"===typeof md||!md)for(md=md|0||1,Pc=0;6>Pc;++Pc)Qb(Yc[Pc],md,md);else if("object"===typeof md)if(Gb)wc(Yc[0],md),wc(Yc[1],Gb),wc(Yc[2],Sb),wc(Yc[3],zc),wc(Yc[4],Sc),wc(Yc[5],
Ec);else if($c(Oc,md),lc(Ac,md),"faces"in md)for(md=md.faces,Pc=0;6>Pc;++Pc)$b(Yc[Pc],Ac),wc(Yc[Pc],md[Pc]);else for(Pc=0;6>Pc;++Pc)wc(Yc[Pc],md);$b(Ac,Yc[0]);Ac.mipmask=Oc.genMipmaps?(Yc[0].width<<1)-1:Yc[0].mipmask;Ac.internalformat=Yc[0].internalformat;Yb.width=Yc[0].width;Yb.height=Yc[0].height;rd(Ac);for(Pc=0;6>Pc;++Pc)dc(Yc[Pc],34069+Pc);od(Oc,34067);Dd();ob.profile&&(Ac.stats.size=L(Ac.internalformat,Ac.type,Yb.width,Yb.height,Oc.genMipmaps,!0));Yb.format=ae[Ac.internalformat];Yb.type=me[Ac.type];
Yb.mag=Nd[Oc.magFilter];Yb.min=Id[Oc.minFilter];Yb.wrapS=qe[Oc.wrapS];Yb.wrapT=qe[Oc.wrapT];for(Pc=0;6>Pc;++Pc)Nc(Yc[Pc]);return Yb}var Ac=new Zc(34067);$e[Ac.id]=Ac;ic.cubeCount++;var Yc=Array(6);Yb(Ma,xb,rb,Hb,mc,Ic);Yb.subimage=function(md,Gb,Sb,zc,Sc){Sb|=0;zc|=0;Sc|=0;var Ec=qb();$b(Ec,Ac);Ec.width=0;Ec.height=0;Ub(Ec,Gb);Ec.width=Ec.width||(Ac.width>>Sc)-Sb;Ec.height=Ec.height||(Ac.height>>Sc)-zc;rd(Ac);zb(Ec,34069+md,Sb,zc,Sc);Dd();vb(Ec);return Yb};Yb.resize=function(md){md|=0;if(md!==Ac.width){Yb.width=
Ac.width=md;Yb.height=Ac.height=md;rd(Ac);for(var Gb=0;6>Gb;++Gb)for(var Sb=0;Ac.mipmask>>Sb;++Sb)yb.texImage2D(34069+Gb,Sb,Ac.format,md>>Sb,md>>Sb,0,Ac.format,Ac.type,null);Dd();ob.profile&&(Ac.stats.size=L(Ac.internalformat,Ac.type,Yb.width,Yb.height,!1,!0));return Yb}};Yb._reglType="textureCube";Yb._texture=Ac;ob.profile&&(Yb.stats=Ac.stats);Yb.destroy=function(){Ac.decRef()};return Yb},clear:function(){for(var Ma=0;Ma<cf;++Ma)yb.activeTexture(33984+Ma),yb.bindTexture(3553,null),Te[Ma]=null;Xa($e).forEach(ed);
ic.cubeCount=0;ic.textureCount=0},getTexture:function(Ma){return null},restore:function(){for(var Ma=0;Ma<cf;++Ma){var xb=Te[Ma];xb&&(xb.bindCount=0,xb.unit=-1,Te[Ma]=null)}Xa($e).forEach(function(rb){rb.texture=yb.createTexture();yb.bindTexture(rb.target,rb.texture);for(var Hb=0;32>Hb;++Hb)if(0!==(rb.mipmask&1<<Hb))if(3553===rb.target)yb.texImage2D(3553,Hb,rb.internalformat,rb.width>>Hb,rb.height>>Hb,0,rb.internalformat,rb.type,null);else for(var mc=0;6>mc;++mc)yb.texImage2D(34069+mc,Hb,rb.internalformat,
rb.width>>Hb,rb.height>>Hb,0,rb.internalformat,rb.type,null);od(rb.texInfo,rb.target)})}}}function N(yb,Wb,Dc,ec,kc,ic){function ob(Zc,rd,Dd){this.target=Zc;this.texture=rd;this.renderbuffer=Dd;var ed=Zc=0;rd?(Zc=rd.width,ed=rd.height):Dd&&(Zc=Dd.width,ed=Dd.height);this.width=Zc;this.height=ed}function tb(Zc){Zc&&(Zc.texture&&Zc.texture._texture.decRef(),Zc.renderbuffer&&Zc.renderbuffer._renderbuffer.decRef())}function $b(Zc,rd,Dd){Zc&&(Zc.texture?Zc.texture._texture.refCount+=1:Zc.renderbuffer._renderbuffer.refCount+=
1)}function lc(Zc,rd){rd&&(rd.texture?yb.framebufferTexture2D(36160,Zc,rd.target,rd.texture._texture.texture,0):yb.framebufferRenderbuffer(36160,Zc,36161,rd.renderbuffer._renderbuffer.renderbuffer))}function yc(Zc){var rd=3553,Dd=null,ed=null,Mc=Zc;"object"===typeof Zc&&(Mc=Zc.data,"target"in Zc&&(rd=Zc.target|0));Zc=Mc._reglType;"texture2d"===Zc?Dd=Mc:"textureCube"===Zc?Dd=Mc:"renderbuffer"===Zc&&(ed=Mc,rd=36161);return new ob(rd,Dd,ed)}function Rb(Zc,rd,Dd,ed,Mc){if(Dd)return Zc=ec.create2D({width:Zc,
height:rd,format:ed,type:Mc}),Zc._texture.refCount=0,new ob(3553,Zc,null);Zc=kc.create({width:Zc,height:rd,format:ed});Zc._renderbuffer.refCount=0;return new ob(36161,null,Zc)}function Ub(Zc){return Zc&&(Zc.texture||Zc.renderbuffer)}function zb(Zc,rd,Dd){Zc&&(Zc.texture?Zc.texture.resize(rd,Dd):Zc.renderbuffer&&Zc.renderbuffer.resize(rd,Dd),Zc.width=rd,Zc.height=Dd)}function qb(){this.id=$c++;od[this.id]=this;this.framebuffer=yb.createFramebuffer();this.height=this.width=0;this.colorAttachments=[];
this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function vb(Zc){Zc.colorAttachments.forEach(tb);tb(Zc.depthAttachment);tb(Zc.stencilAttachment);tb(Zc.depthStencilAttachment)}function Db(Zc){yb.deleteFramebuffer(Zc.framebuffer);Zc.framebuffer=null;ic.framebufferCount--;delete od[Zc.id]}function Qb(Zc){var rd;yb.bindFramebuffer(36160,Zc.framebuffer);var Dd=Zc.colorAttachments;for(rd=0;rd<Dd.length;++rd)lc(36064+rd,Dd[rd]);for(rd=Dd.length;rd<Dc.maxColorAttachments;++rd)yb.framebufferTexture2D(36160,
36064+rd,3553,null,0);yb.framebufferTexture2D(36160,33306,3553,null,0);yb.framebufferTexture2D(36160,36096,3553,null,0);yb.framebufferTexture2D(36160,36128,3553,null,0);lc(36096,Zc.depthAttachment);lc(36128,Zc.stencilAttachment);lc(33306,Zc.depthStencilAttachment);yb.checkFramebufferStatus(36160);yb.isContextLost();yb.bindFramebuffer(36160,dc.next?dc.next.framebuffer:null);dc.cur=dc.next;yb.getError()}function wc(Zc,rd){function Dd(Mc,sd){var yd=0,Fd=0,xe=!0,Kd=!0;var Gc=null;var dd=!0,vd="rgba",
Cd="uint8",ae=1,me=null,Nd=null,Id=null,qe=!1;if("number"===typeof Mc)yd=Mc|0,Fd=sd|0||yd;else if(Mc){"shape"in Mc?(Fd=Mc.shape,yd=Fd[0],Fd=Fd[1]):("radius"in Mc&&(yd=Fd=Mc.radius),"width"in Mc&&(yd=Mc.width),"height"in Mc&&(Fd=Mc.height));if("color"in Mc||"colors"in Mc)Gc=Mc.color||Mc.colors,Array.isArray(Gc);if(!Gc){"colorCount"in Mc&&(ae=Mc.colorCount|0);"colorTexture"in Mc&&(dd=!!Mc.colorTexture,vd="rgba4");if("colorType"in Mc&&(Cd=Mc.colorType,!dd))if("half float"===Cd||"float16"===Cd)vd="rgba16f";
else if("float"===Cd||"float32"===Cd)vd="rgba32f";"colorFormat"in Mc&&(vd=Mc.colorFormat,0<=xc.indexOf(vd)?dd=!0:0<=Nc.indexOf(vd)&&(dd=!1))}if("depthTexture"in Mc||"depthStencilTexture"in Mc)qe=!(!Mc.depthTexture&&!Mc.depthStencilTexture);"depth"in Mc&&("boolean"===typeof Mc.depth?xe=Mc.depth:(me=Mc.depth,Kd=!1));"stencil"in Mc&&("boolean"===typeof Mc.stencil?Kd=Mc.stencil:(Nd=Mc.stencil,xe=!1));"depthStencil"in Mc&&("boolean"===typeof Mc.depthStencil?xe=Kd=Mc.depthStencil:(Id=Mc.depthStencil,Kd=
xe=!1))}else yd=Fd=1;var re=sd=null,ve=null;if(Array.isArray(Gc))Mc=Gc.map(yc);else if(Gc)Mc=[yc(Gc)];else for(Mc=Array(ae),Gc=0;Gc<ae;++Gc)Mc[Gc]=Rb(yd,Fd,dd,vd,Cd);yd=yd||Mc[0].width;Fd=Fd||Mc[0].height;me?sd=yc(me):xe&&!Kd&&(sd=Rb(yd,Fd,qe,"depth","uint32"));Nd?re=yc(Nd):Kd&&!xe&&(re=Rb(yd,Fd,!1,"stencil","uint8"));Id?ve=yc(Id):!me&&!Nd&&Kd&&xe&&(ve=Rb(yd,Fd,qe,"depth stencil","depth stencil"));xe=null;for(Gc=0;Gc<Mc.length;++Gc)$b(Mc[Gc],yd,Fd),Mc[Gc]&&Mc[Gc].texture&&(Kd=Cb[Mc[Gc].texture._texture.format]*
Ib[Mc[Gc].texture._texture.type],null===xe&&(xe=Kd));$b(sd,yd,Fd);$b(re,yd,Fd);$b(ve,yd,Fd);vb(ed);ed.width=yd;ed.height=Fd;ed.colorAttachments=Mc;ed.depthAttachment=sd;ed.stencilAttachment=re;ed.depthStencilAttachment=ve;Dd.color=Mc.map(Ub);Dd.depth=Ub(sd);Dd.stencil=Ub(re);Dd.depthStencil=Ub(ve);Dd.width=ed.width;Dd.height=ed.height;Qb(ed);return Dd}var ed=new qb;ic.framebufferCount++;Dd(Zc,rd);return ra(Dd,{resize:function(Mc,sd){Mc=Math.max(Mc|0,1);sd=Math.max(sd|0||Mc,1);if(Mc===ed.width&&sd===
ed.height)return Dd;for(var yd=ed.colorAttachments,Fd=0;Fd<yd.length;++Fd)zb(yd[Fd],Mc,sd);zb(ed.depthAttachment,Mc,sd);zb(ed.stencilAttachment,Mc,sd);zb(ed.depthStencilAttachment,Mc,sd);ed.width=Dd.width=Mc;ed.height=Dd.height=sd;Qb(ed);return Dd},_reglType:"framebuffer",_framebuffer:ed,destroy:function(){Db(ed);vb(ed)},use:function(Mc){dc.setFBO({framebuffer:Dd},Mc)}})}var dc={cur:null,next:null,dirty:!1,setFBO:null},xc=["rgba"],Nc=["rgba4","rgb565","rgb5 a1"];Wb.ext_srgb&&Nc.push("srgba");Wb.ext_color_buffer_half_float&&
Nc.push("rgba16f","rgb16f");Wb.webgl_color_buffer_float&&Nc.push("rgba32f");var Lc=["uint8"];Wb.oes_texture_half_float&&Lc.push("half float","float16");Wb.oes_texture_float&&Lc.push("float","float32");var $c=0,od={};return ra(dc,{getFramebuffer:function(Zc){return"function"===typeof Zc&&"framebuffer"===Zc._reglType&&(Zc=Zc._framebuffer,Zc instanceof qb)?Zc:null},create:wc,createCube:function(Zc){function rd(ed){var Mc={color:null},sd=0,yd=null;var Fd="rgba";var xe="uint8",Kd=1;if("number"===typeof ed)sd=
ed|0;else if(ed){"shape"in ed?sd=ed.shape[0]:("radius"in ed&&(sd=ed.radius|0),"width"in ed?sd=ed.width|0:"height"in ed&&(sd=ed.height|0));if("color"in ed||"colors"in ed)yd=ed.color||ed.colors,Array.isArray(yd);yd||("colorCount"in ed&&(Kd=ed.colorCount|0),"colorType"in ed&&(xe=ed.colorType),"colorFormat"in ed&&(Fd=ed.colorFormat));"depth"in ed&&(Mc.depth=ed.depth);"stencil"in ed&&(Mc.stencil=ed.stencil);"depthStencil"in ed&&(Mc.depthStencil=ed.depthStencil)}else sd=1;if(yd)if(Array.isArray(yd))for(ed=
[],Fd=0;Fd<yd.length;++Fd)ed[Fd]=yd[Fd];else ed=[yd];else for(ed=Array(Kd),yd={radius:sd,format:Fd,type:xe},Fd=0;Fd<Kd;++Fd)ed[Fd]=ec.createCube(yd);Mc.color=Array(ed.length);for(Fd=0;Fd<ed.length;++Fd)Kd=ed[Fd],sd=sd||Kd.width,Mc.color[Fd]={target:34069,data:ed[Fd]};for(Fd=0;6>Fd;++Fd){for(Kd=0;Kd<ed.length;++Kd)Mc.color[Kd].target=34069+Fd;0<Fd&&(Mc.depth=Dd[0].depth,Mc.stencil=Dd[0].stencil,Mc.depthStencil=Dd[0].depthStencil);if(Dd[Fd])Dd[Fd](Mc);else Dd[Fd]=wc(Mc)}return ra(rd,{width:sd,height:sd,
color:ed})}var Dd=Array(6);rd(Zc);return ra(rd,{faces:Dd,resize:function(ed){var Mc=ed|0;if(Mc===rd.width)return rd;var sd=rd.color;for(ed=0;ed<sd.length;++ed)sd[ed].resize(Mc);for(ed=0;6>ed;++ed)Dd[ed].resize(Mc);rd.width=rd.height=Mc;return rd},_reglType:"framebufferCube",destroy:function(){Dd.forEach(function(ed){ed.destroy()})}})},clear:function(){Xa(od).forEach(Db)},restore:function(){dc.cur=null;dc.next=null;dc.dirty=!0;Xa(od).forEach(function(Zc){Zc.framebuffer=yb.createFramebuffer();Qb(Zc)})}})}
function Q(){this.w=this.z=this.y=this.x=this.state=0;this.buffer=null;this.size=0;this.normalized=!1;this.type=5126;this.divisor=this.stride=this.offset=0}function O(yb,Wb,Dc,ec,kc){function ic(vb){if(vb!==qb.currentVAO){var Db=Wb.oes_vertex_array_object;vb?Db.bindVertexArrayOES(vb.vao):Db.bindVertexArrayOES(null);qb.currentVAO=vb}}function ob(vb){if(vb!==qb.currentVAO){if(vb)vb.bindAttrs();else for(var Db=Wb.angle_instanced_arrays,Qb=0;Qb<Rb.length;++Qb){var wc=Rb[Qb];wc.buffer?(yb.enableVertexAttribArray(Qb),
yb.vertexAttribPointer(Qb,wc.size,wc.type,wc.normalized,wc.stride,wc.offfset),Db&&Db.vertexAttribDivisorANGLE(Qb,wc.divisor)):(yb.disableVertexAttribArray(Qb),yb.vertexAttrib4f(Qb,wc.x,wc.y,wc.z,wc.w))}qb.currentVAO=vb}}function tb(){Xa(zb).forEach(function(vb){vb.destroy()})}function $b(){this.id=++Ub;this.attributes=[];var vb=Wb.oes_vertex_array_object;this.vao=vb?vb.createVertexArrayOES():null;zb[this.id]=this;this.buffers=[]}function lc(){Wb.oes_vertex_array_object&&Xa(zb).forEach(function(vb){vb.refresh()})}
var yc=Dc.maxAttributes,Rb=Array(yc);for(Dc=0;Dc<yc;++Dc)Rb[Dc]=new Q;var Ub=0,zb={},qb={Record:Q,scope:{},state:Rb,currentVAO:null,targetVAO:null,restore:Wb.oes_vertex_array_object?lc:function(){},createVAO:function(vb){function Db(wc){for(var dc=0;dc<Qb.buffers.length;++dc)Qb.buffers[dc].destroy();Qb.buffers.length=0;dc=Qb.attributes;dc.length=wc.length;for(var xc=0;xc<wc.length;++xc){var Nc=wc[xc],Lc=dc[xc]=new Q;Array.isArray(Nc)||Fa(Nc)||q(Nc)?(Nc=kc.create(Nc,34962,!1,!0),Lc.buffer=kc.getBuffer(Nc),
Lc.size=Lc.buffer.dimension|0,Lc.normalized=!1,Lc.type=Lc.buffer.dtype,Lc.offset=0,Lc.stride=0,Lc.divisor=0,Lc.state=1,Qb.buffers.push(Nc)):kc.getBuffer(Nc)?(Lc.buffer=kc.getBuffer(Nc),Lc.size=Lc.buffer.dimension|0,Lc.normalized=!1,Lc.type=Lc.buffer.dtype,Lc.offset=0,Lc.stride=0,Lc.divisor=0,Lc.state=1):kc.getBuffer(Nc.buffer)?(Lc.buffer=kc.getBuffer(Nc.buffer),Lc.size=(+Nc.size||Lc.buffer.dimension)|0,Lc.normalized=!!Nc.normalized||!1,Lc.type="type"in Nc?bb[Nc.type]:Lc.buffer.dtype,Lc.offset=(Nc.offset||
0)|0,Lc.stride=(Nc.stride||0)|0,Lc.divisor=(Nc.divisor||0)|0,Lc.state=1):"x"in Nc&&(Lc.x=+Nc.x||0,Lc.y=+Nc.y||0,Lc.z=+Nc.z||0,Lc.w=+Nc.w||0,Lc.state=2)}Qb.refresh();return Db}var Qb=new $b;ec.vaoCount+=1;Db.destroy=function(){Qb.destroy()};Db._vao=Qb;Db._reglType="vao";return Db(vb)},getVAO:function(vb){return"function"===typeof vb&&vb._vao?vb._vao:null},destroyBuffer:function(vb){for(var Db=0;Db<Rb.length;++Db){var Qb=Rb[Db];Qb.buffer===vb&&(yb.disableVertexAttribArray(Db),Qb.buffer=null)}},setVAO:Wb.oes_vertex_array_object?
ic:ob,clear:Wb.oes_vertex_array_object?tb:function(){}};$b.prototype.bindAttrs=function(){for(var vb=Wb.angle_instanced_arrays,Db=this.attributes,Qb=0;Qb<Db.length;++Qb){var wc=Db[Qb];wc.buffer?(yb.enableVertexAttribArray(Qb),yb.bindBuffer(34962,wc.buffer.buffer),yb.vertexAttribPointer(Qb,wc.size,wc.type,wc.normalized,wc.stride,wc.offset),vb&&vb.vertexAttribDivisorANGLE(Qb,wc.divisor)):(yb.disableVertexAttribArray(Qb),yb.vertexAttrib4f(Qb,wc.x,wc.y,wc.z,wc.w))}for(vb=Db.length;vb<yc;++vb)yb.disableVertexAttribArray(vb)};
$b.prototype.refresh=function(){var vb=Wb.oes_vertex_array_object;vb&&(vb.bindVertexArrayOES(this.vao),this.bindAttrs(),qb.currentVAO=this)};$b.prototype.destroy=function(){if(this.vao){var vb=Wb.oes_vertex_array_object;this===qb.currentVAO&&(qb.currentVAO=null,vb.bindVertexArrayOES(null));vb.deleteVertexArrayOES(this.vao);this.vao=null}zb[this.id]&&(delete zb[this.id],--ec.vaoCount)};return qb}function T(yb,Wb,Dc,ec){function kc(qb,vb,Db,Qb){this.name=qb;this.id=vb;this.location=Db;this.info=Qb}
function ic(qb,vb){for(var Db=0;Db<qb.length;++Db)if(qb[Db].id===vb.id){qb[Db].location=vb.location;return}qb.push(vb)}function ob(qb,vb,Db){Db=35632===qb?lc:yc;var Qb=Db[vb];if(!Qb){var wc=Wb.str(vb);Qb=yb.createShader(qb);yb.shaderSource(Qb,wc);yb.compileShader(Qb);Db[vb]=Qb}return Qb}function tb(qb,vb){this.id=zb++;this.fragId=qb;this.vertId=vb;this.program=null;this.uniforms=[];this.attributes=[];ec.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function $b(qb,vb,Db){var Qb=ob(35632,
qb.fragId);var wc=ob(35633,qb.vertId);vb=qb.program=yb.createProgram();yb.attachShader(vb,Qb);yb.attachShader(vb,wc);if(Db)for(Qb=0;Qb<Db.length;++Qb)wc=Db[Qb],yb.bindAttribLocation(vb,wc[0],wc[1]);yb.linkProgram(vb);wc=yb.getProgramParameter(vb,35718);ec.profile&&(qb.stats.uniformsCount=wc);var dc=qb.uniforms;for(Qb=0;Qb<wc;++Qb)if(Db=yb.getActiveUniform(vb,Qb))if(1<Db.size)for(var xc=0;xc<Db.size;++xc){var Nc=Db.name.replace("[0]","["+xc+"]");ic(dc,new kc(Nc,Wb.id(Nc),yb.getUniformLocation(vb,Nc),
Db))}else ic(dc,new kc(Db.name,Wb.id(Db.name),yb.getUniformLocation(vb,Db.name),Db));wc=yb.getProgramParameter(vb,35721);ec.profile&&(qb.stats.attributesCount=wc);qb=qb.attributes;for(Qb=0;Qb<wc;++Qb)(Db=yb.getActiveAttrib(vb,Qb))&&ic(qb,new kc(Db.name,Wb.id(Db.name),yb.getAttribLocation(vb,Db.name),Db))}var lc={},yc={},Rb={},Ub=[],zb=0;ec.profile&&(Dc.getMaxUniformsCount=function(){var qb=0;Ub.forEach(function(vb){vb.stats.uniformsCount>qb&&(qb=vb.stats.uniformsCount)});return qb},Dc.getMaxAttributesCount=
function(){var qb=0;Ub.forEach(function(vb){vb.stats.attributesCount>qb&&(qb=vb.stats.attributesCount)});return qb});return{clear:function(){var qb=yb.deleteShader.bind(yb);Xa(lc).forEach(qb);lc={};Xa(yc).forEach(qb);yc={};Ub.forEach(function(vb){yb.deleteProgram(vb.program)});Ub.length=0;Rb={};Dc.shaderCount=0},program:function(qb,vb,Db,Qb){var wc=Rb[vb];wc||(wc=Rb[vb]={});var dc=wc[qb];if(dc&&!Qb)return dc;vb=new tb(vb,qb);Dc.shaderCount++;$b(vb,Db,Qb);dc||(wc[qb]=vb);Ub.push(vb);return vb},restore:function(){lc=
{};yc={};for(var qb=0;qb<Ub.length;++qb)$b(Ub[qb],null,Ub[qb].attributes.map(function(vb){return[vb.location,vb.name]}))},shader:ob,frag:-1,vert:-1}}function V(yb,Wb,Dc,ec,kc,ic,ob){function tb(lc){var yc=null===Wb.next?5121:Wb.next.colorAttachments[0].texture._texture.type;var Rb=0,Ub=0,zb=ec.framebufferWidth,qb=ec.framebufferHeight,vb=null;Fa(lc)?vb=lc:lc&&(Rb=lc.x|0,Ub=lc.y|0,zb=(lc.width||ec.framebufferWidth-Rb)|0,qb=(lc.height||ec.framebufferHeight-Ub)|0,vb=lc.data||null);Dc();lc=zb*qb*4;vb||
(5121===yc?vb=new Uint8Array(lc):5126===yc&&(vb=vb||new Float32Array(lc)));yb.pixelStorei(3333,4);yb.readPixels(Rb,Ub,zb,qb,6408,yc,vb);return vb}function $b(lc){var yc;Wb.setFBO({framebuffer:lc.framebuffer},function(){yc=tb(lc)});return yc}return function(lc){return lc&&"framebuffer"in lc?$b(lc):tb(lc)}}function Z(yb){return Array.prototype.slice.call(yb)}function aa(yb){return Z(yb).join("")}function Y(){function yb(){var tb=[],$b=[];return ra(function(){tb.push.apply(tb,Z(arguments))},{def:function(){var lc=
"v"+Dc++;$b.push(lc);0<arguments.length&&(tb.push(lc,"\x3d"),tb.push.apply(tb,Z(arguments)),tb.push(";"));return lc},toString:function(){return aa([0<$b.length?"var "+$b.join(",")+";":"",aa(tb)])}})}function Wb(){function tb(Ub,zb){lc(Ub,zb,"\x3d",$b.def(Ub,zb),";")}var $b=yb(),lc=yb(),yc=$b.toString,Rb=lc.toString;return ra(function(){$b.apply($b,Z(arguments))},{def:$b.def,entry:$b,exit:lc,save:tb,set:function(Ub,zb,qb){tb(Ub,zb);$b(Ub,zb,"\x3d",qb,";")},toString:function(){return yc()+Rb()}})}var Dc=
0,ec=[],kc=[],ic=yb(),ob={};return{global:ic,link:function(tb){for(var $b=0;$b<kc.length;++$b)if(kc[$b]===tb)return ec[$b];$b="g"+Dc++;ec.push($b);kc.push(tb);return $b},block:yb,proc:function(tb,$b){function lc(){var zb="a"+yc.length;yc.push(zb);return zb}var yc=[];$b=$b||0;for(var Rb=0;Rb<$b;++Rb)lc();Rb=Wb();var Ub=Rb.toString;return ob[tb]=ra(Rb,{arg:lc,toString:function(){return aa(["function(",yc.join(),"){",Ub(),"}"])}})},scope:Wb,cond:function(){var tb=aa(arguments),$b=Wb(),lc=Wb(),yc=$b.toString,
Rb=lc.toString;return ra($b,{then:function(){$b.apply($b,Z(arguments));return this},"else":function(){lc.apply(lc,Z(arguments));return this},toString:function(){var Ub=Rb();Ub&&(Ub="else{"+Ub+"}");return aa(["if(",tb,"){",yc(),"}",Ub])}})},compile:function(){var tb=['"use strict";',ic,"return {"];Object.keys(ob).forEach(function(lc){tb.push('"',lc,'":',ob[lc].toString(),",")});tb.push("}");var $b=aa(tb).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,ec.concat($b)).apply(null,
kc)}}}function ea(yb){return Array.isArray(yb)||Fa(yb)||q(yb)}function ca(yb){return yb.sort(function(Wb,Dc){return"viewport"===Wb?-1:"viewport"===Dc?1:Wb<Dc?-1:1})}function ba(yb,Wb,Dc,ec){this.thisDep=yb;this.contextDep=Wb;this.propDep=Dc;this.append=ec}function ka(yb){return yb&&!(yb.thisDep||yb.contextDep||yb.propDep)}function qa(yb){return new ba(!1,!1,!1,yb)}function pa(yb,Wb){var Dc=yb.type;return 0===Dc?(Dc=yb.data.length,new ba(!0,1<=Dc,2<=Dc,Wb)):4===Dc?(Dc=yb.data,new ba(Dc.thisDep,Dc.contextDep,
Dc.propDep,Wb)):new ba(3===Dc,2===Dc,1===Dc,Wb)}function oa(yb,Wb,Dc,ec,kc,ic,ob,tb,$b,lc,yc,Rb,Ub,zb,qb){function vb(Gb){return Gb.replace(".","_")}function Db(Gb,Sb,zc){var Sc=vb(Gb);mc.push(Gb);Hb[Sc]=rb[Sc]=!!zc;Ic[Sc]=Sb}function Qb(Gb,Sb,zc){var Sc=vb(Gb);mc.push(Gb);Array.isArray(zc)?(rb[Sc]=zc.slice(),Hb[Sc]=zc.slice()):rb[Sc]=Hb[Sc]=zc;Yb[Sc]=Sb}function wc(){var Gb=Y(),Sb=Gb.link,zc=Gb.global;Gb.id=md++;Gb.batchId="0";var Sc=Sb(Ac),Ec=Gb.shared={props:"a0"};Object.keys(Ac).forEach(function(vc){Ec[vc]=
zc.def(Sc,".",vc)});var Pc=Gb.next={},Oc=Gb.current={};Object.keys(Yb).forEach(function(vc){Array.isArray(rb[vc])&&(Pc[vc]=zc.def(Ec.next,".",vc),Oc[vc]=zc.def(Ec.current,".",vc))});var Kc=Gb.constants={};Object.keys(Yc).forEach(function(vc){Kc[vc]=zc.def(JSON.stringify(Yc[vc]))});Gb.invoke=function(vc,tc){switch(tc.type){case 0:var gd=["this",Ec.context,Ec.props,Gb.batchId];return vc.def(Sb(tc.data),".call(",gd.slice(0,Math.max(tc.data.length+1,4)),")");case 1:return vc.def(Ec.props,tc.data);case 2:return vc.def(Ec.context,
tc.data);case 3:return vc.def("this",tc.data);case 4:return tc.data.append(Gb,vc),tc.data.ref}};Gb.attribCache={};var pc={};Gb.scopeAttrib=function(vc){vc=Wb.id(vc);if(vc in pc)return pc[vc];var tc=lc.scope[vc];tc||(tc=lc.scope[vc]=new cf);return pc[vc]=Sb(tc)};return Gb}function dc(Gb){var Sb=Gb["static"];Gb=Gb.dynamic;if("profile"in Sb){var zc=!!Sb.profile;var Sc=qa(function(Pc,Oc){return zc});Sc.enable=zc}else if("profile"in Gb){var Ec=Gb.profile;Sc=pa(Ec,function(Pc,Oc){return Pc.invoke(Oc,Ec)})}return Sc}
function xc(Gb,Sb){Sb=Gb["static"];Gb=Gb.dynamic;if("framebuffer"in Sb){var zc=Sb.framebuffer;return zc?(zc=tb.getFramebuffer(zc),qa(function(Ec,Pc){var Oc=Ec.link(zc);Ec=Ec.shared;Pc.set(Ec.framebuffer,".next",Oc);Ec=Ec.context;Pc.set(Ec,".framebufferWidth",Oc+".width");Pc.set(Ec,".framebufferHeight",Oc+".height");return Oc})):qa(function(Ec,Pc){Ec=Ec.shared;Pc.set(Ec.framebuffer,".next","null");Ec=Ec.context;Pc.set(Ec,".framebufferWidth",Ec+".drawingBufferWidth");Pc.set(Ec,".framebufferHeight",
Ec+".drawingBufferHeight");return"null"})}if("framebuffer"in Gb){var Sc=Gb.framebuffer;return pa(Sc,function(Ec,Pc){var Oc=Ec.invoke(Pc,Sc);Ec=Ec.shared;var Kc=Ec.framebuffer;Oc=Pc.def(Kc,".getFramebuffer(",Oc,")");Pc.set(Kc,".next",Oc);Ec=Ec.context;Pc.set(Ec,".framebufferWidth",Oc+"?"+Oc+".width:"+Ec+".drawingBufferWidth");Pc.set(Ec,".framebufferHeight",Oc+"?"+Oc+".height:"+Ec+".drawingBufferHeight");return Oc})}return null}function Nc(Gb,Sb,zc){function Sc(Kc){if(Kc in Ec){var pc=Ec[Kc];Kc=!0;
var vc=pc.x|0,tc=pc.y|0,gd,ud;"width"in pc?gd=pc.width|0:Kc=!1;"height"in pc?ud=pc.height|0:Kc=!1;return new ba(!Kc&&Sb&&Sb.thisDep,!Kc&&Sb&&Sb.contextDep,!Kc&&Sb&&Sb.propDep,function(Ad,wd){Ad=Ad.shared.context;var se=gd;"width"in pc||(se=wd.def(Ad,".","framebufferWidth","-",vc));var te=ud;"height"in pc||(te=wd.def(Ad,".","framebufferHeight","-",tc));return[vc,tc,se,te]})}if(Kc in Pc){var xd=Pc[Kc];Kc=pa(xd,function(Ad,wd){var se=Ad.invoke(wd,xd);Ad=Ad.shared.context;var te=wd.def(se,".x|0"),Fe=
wd.def(se,".y|0"),je=wd.def('"width" in ',se,"?",se,".width|0:","(",Ad,".","framebufferWidth","-",te,")");se=wd.def('"height" in ',se,"?",se,".height|0:","(",Ad,".","framebufferHeight","-",Fe,")");return[te,Fe,je,se]});Sb&&(Kc.thisDep=Kc.thisDep||Sb.thisDep,Kc.contextDep=Kc.contextDep||Sb.contextDep,Kc.propDep=Kc.propDep||Sb.propDep);return Kc}return Sb?new ba(Sb.thisDep,Sb.contextDep,Sb.propDep,function(Ad,wd){Ad=Ad.shared.context;return[0,0,wd.def(Ad,".","framebufferWidth"),wd.def(Ad,".","framebufferHeight")]}):
null}var Ec=Gb["static"],Pc=Gb.dynamic;if(Gb=Sc("viewport")){var Oc=Gb;Gb=new ba(Gb.thisDep,Gb.contextDep,Gb.propDep,function(Kc,pc){var vc=Oc.append(Kc,pc);Kc=Kc.shared.context;pc.set(Kc,".viewportWidth",vc[2]);pc.set(Kc,".viewportHeight",vc[3]);return vc})}return{viewport:Gb,scissor_box:Sc("scissor.box")}}function Lc(Gb,Sb){Gb=Gb["static"];if("string"===typeof Gb.frag&&"string"===typeof Gb.vert){if(0<Object.keys(Sb.dynamic).length)return null;Gb=Sb["static"];Sb=Object.keys(Gb);if(0<Sb.length&&"number"===
typeof Gb[Sb[0]]){for(var zc=[],Sc=0;Sc<Sb.length;++Sc)zc.push([Gb[Sb[Sc]]|0,Sb[Sc]]);return zc}}return null}function $c(Gb,Sb,zc){function Sc(vc){if(vc in Ec){var tc=Wb.id(Ec[vc]);vc=qa(function(){return tc});vc.id=tc;return vc}if(vc in Pc){var gd=Pc[vc];return pa(gd,function(ud,xd){var Ad=ud.invoke(xd,gd);return xd.def(ud.shared.strings,".id(",Ad,")")})}return null}var Ec=Gb["static"],Pc=Gb.dynamic,Oc=Sc("frag"),Kc=Sc("vert"),pc=null;ka(Oc)&&ka(Kc)?(pc=yc.program(Kc.id,Oc.id,null,zc),Gb=qa(function(vc,
tc){return vc.link(pc)})):Gb=new ba(Oc&&Oc.thisDep||Kc&&Kc.thisDep,Oc&&Oc.contextDep||Kc&&Kc.contextDep,Oc&&Oc.propDep||Kc&&Kc.propDep,function(vc,tc){var gd=vc.shared.shader;var ud=Oc?Oc.append(vc,tc):tc.def(gd,".","frag");vc=Kc?Kc.append(vc,tc):tc.def(gd,".","vert");return tc.def(gd+".program("+vc+","+ud+")")});return{frag:Oc,vert:Kc,progVar:Gb,program:pc}}function od(Gb,Sb){function zc(Kc,pc){if(Kc in Sc){var vc=Sc[Kc]|0;return qa(function(gd,ud){pc&&(gd.OFFSET=vc);return vc})}if(Kc in Ec){var tc=
Ec[Kc];return pa(tc,function(gd,ud){ud=gd.invoke(ud,tc);pc&&(gd.OFFSET=ud);return ud})}return pc&&Pc?qa(function(gd,ud){gd.OFFSET="0";return 0}):null}var Sc=Gb["static"],Ec=Gb.dynamic,Pc=function(){if("elements"in Sc){var Kc=Sc.elements;ea(Kc)?Kc=ic.getElements(ic.create(Kc,!0)):Kc&&(Kc=ic.getElements(Kc));var pc=qa(function(tc,gd){return Kc?(gd=tc.link(Kc),tc.ELEMENTS=gd):tc.ELEMENTS=null});pc.value=Kc;return pc}if("elements"in Ec){var vc=Ec.elements;return pa(vc,function(tc,gd){var ud=tc.shared,
xd=ud.isBufferArgs;ud=ud.elements;var Ad=tc.invoke(gd,vc),wd=gd.def("null");xd=gd.def(xd,"(",Ad,")");Ad=tc.cond(xd).then(wd,"\x3d",ud,".createStream(",Ad,");")["else"](wd,"\x3d",ud,".getElements(",Ad,");");gd.entry(Ad);gd.exit(tc.cond(xd).then(ud,".destroyStream(",wd,");"));return tc.ELEMENTS=wd})}return null}(),Oc=zc("offset",!0);return{elements:Pc,primitive:function(){if("primitive"in Sc){var Kc=Sc.primitive;return qa(function(vc,tc){return Ia[Kc]})}if("primitive"in Ec){var pc=Ec.primitive;return pa(pc,
function(vc,tc){var gd=vc.constants.primTypes;vc=vc.invoke(tc,pc);return tc.def(gd,"[",vc,"]")})}return Pc?ka(Pc)?Pc.value?qa(function(vc,tc){return tc.def(vc.ELEMENTS,".primType")}):qa(function(){return 4}):new ba(Pc.thisDep,Pc.contextDep,Pc.propDep,function(vc,tc){vc=vc.ELEMENTS;return tc.def(vc,"?",vc,".primType:",4)}):null}(),count:function(){if("count"in Sc){var Kc=Sc.count|0;return qa(function(){return Kc})}if("count"in Ec){var pc=Ec.count;return pa(pc,function(vc,tc){return vc.invoke(tc,pc)})}return Pc?
ka(Pc)?Pc?Oc?new ba(Oc.thisDep,Oc.contextDep,Oc.propDep,function(vc,tc){return tc.def(vc.ELEMENTS,".vertCount-",vc.OFFSET)}):qa(function(vc,tc){return tc.def(vc.ELEMENTS,".vertCount")}):qa(function(){return-1}):new ba(Pc.thisDep||Oc.thisDep,Pc.contextDep||Oc.contextDep,Pc.propDep||Oc.propDep,function(vc,tc){var gd=vc.ELEMENTS;return vc.OFFSET?tc.def(gd,"?",gd,".vertCount-",vc.OFFSET,":-1"):tc.def(gd,"?",gd,".vertCount:-1")}):null}(),instances:zc("instances",!1),offset:Oc}}function Zc(Gb,Sb){var zc=
Gb["static"],Sc=Gb.dynamic,Ec={};mc.forEach(function(Pc){function Oc(pc,vc){if(Pc in zc){var tc=pc(zc[Pc]);Ec[Kc]=qa(function(){return tc})}else if(Pc in Sc){var gd=Sc[Pc];Ec[Kc]=pa(gd,function(ud,xd){return vc(ud,xd,ud.invoke(xd,gd))})}}var Kc=vb(Pc);switch(Pc){case "cull.enable":case "blend.enable":case "dither":case "stencil.enable":case "depth.enable":case "scissor.enable":case "polygonOffset.enable":case "sample.alpha":case "sample.enable":case "depth.mask":return Oc(function(pc){return pc},
function(pc,vc,tc){return tc});case "depth.func":return Oc(function(pc){return cd[pc]},function(pc,vc,tc){return vc.def(pc.constants.compareFuncs,"[",tc,"]")});case "depth.range":return Oc(function(pc){return pc},function(pc,vc,tc){pc=vc.def("+",tc,"[0]");vc=vc.def("+",tc,"[1]");return[pc,vc]});case "blend.func":return Oc(function(pc){return[Cc["srcRGB"in pc?pc.srcRGB:pc.src],Cc["dstRGB"in pc?pc.dstRGB:pc.dst],Cc["srcAlpha"in pc?pc.srcAlpha:pc.src],Cc["dstAlpha"in pc?pc.dstAlpha:pc.dst]]},function(pc,
vc,tc){function gd(wd,se){return vc.def('"',wd,se,'" in ',tc,"?",tc,".",wd,se,":",tc,".",wd)}pc=pc.constants.blendFuncs;var ud=gd("src","RGB"),xd=gd("dst","RGB");ud=vc.def(pc,"[",ud,"]");var Ad=vc.def(pc,"[",gd("src","Alpha"),"]");xd=vc.def(pc,"[",xd,"]");pc=vc.def(pc,"[",gd("dst","Alpha"),"]");return[ud,xd,Ad,pc]});case "blend.equation":return Oc(function(pc){if("string"===typeof pc)return[Te[pc],Te[pc]];if("object"===typeof pc)return[Te[pc.rgb],Te[pc.alpha]]},function(pc,vc,tc){var gd=pc.constants.blendEquations,
ud=vc.def(),xd=vc.def();pc=pc.cond("typeof ",tc,'\x3d\x3d\x3d"string"');pc.then(ud,"\x3d",xd,"\x3d",gd,"[",tc,"];");pc["else"](ud,"\x3d",gd,"[",tc,".rgb];",xd,"\x3d",gd,"[",tc,".alpha];");vc(pc);return[ud,xd]});case "blend.color":return Oc(function(pc){return d(4,function(vc){return+pc[vc]})},function(pc,vc,tc){return d(4,function(gd){return vc.def("+",tc,"[",gd,"]")})});case "stencil.mask":return Oc(function(pc){return pc|0},function(pc,vc,tc){return vc.def(tc,"|0")});case "stencil.func":return Oc(function(pc){return[cd[pc.cmp||
"keep"],pc.ref||0,"mask"in pc?pc.mask:-1]},function(pc,vc,tc){pc=vc.def('"cmp" in ',tc,"?",pc.constants.compareFuncs,"[",tc,".cmp]",":",7680);var gd=vc.def(tc,".ref|0");vc=vc.def('"mask" in ',tc,"?",tc,".mask|0:-1");return[pc,gd,vc]});case "stencil.opFront":case "stencil.opBack":return Oc(function(pc){return["stencil.opBack"===Pc?1029:1028,Qc[pc.fail||"keep"],Qc[pc.zfail||"keep"],Qc[pc.zpass||"keep"]]},function(pc,vc,tc){function gd(xd){return vc.def('"',xd,'" in ',tc,"?",ud,"[",tc,".",xd,"]:",7680)}
var ud=pc.constants.stencilOps;return["stencil.opBack"===Pc?1029:1028,gd("fail"),gd("zfail"),gd("zpass")]});case "polygonOffset.offset":return Oc(function(pc){return[pc.factor|0,pc.units|0]},function(pc,vc,tc){pc=vc.def(tc,".factor|0");vc=vc.def(tc,".units|0");return[pc,vc]});case "cull.face":return Oc(function(pc){var vc=0;"front"===pc?vc=1028:"back"===pc&&(vc=1029);return vc},function(pc,vc,tc){return vc.def(tc,'\x3d\x3d\x3d"front"?',1028,":",1029)});case "lineWidth":return Oc(function(pc){return pc},
function(pc,vc,tc){return tc});case "frontFace":return Oc(function(pc){return Wc[pc]},function(pc,vc,tc){return vc.def(tc+'\x3d\x3d\x3d"cw"?2304:2305')});case "colorMask":return Oc(function(pc){return pc.map(function(vc){return!!vc})},function(pc,vc,tc){return d(4,function(gd){return"!!"+tc+"["+gd+"]"})});case "sample.coverage":return Oc(function(pc){return["value"in pc?pc.value:1,!!pc.invert]},function(pc,vc,tc){pc=vc.def('"value" in ',tc,"?+",tc,".value:1");vc=vc.def("!!",tc,".invert");return[pc,
vc]})}});return Ec}function rd(Gb,Sb){var zc=Gb["static"],Sc=Gb.dynamic,Ec={};Object.keys(zc).forEach(function(Pc){var Oc=zc[Pc];if("number"===typeof Oc||"boolean"===typeof Oc)var Kc=qa(function(){return Oc});else if("function"===typeof Oc){var pc=Oc._reglType;if("texture2d"===pc||"textureCube"===pc)Kc=qa(function(vc){return vc.link(Oc)});else if("framebuffer"===pc||"framebufferCube"===pc)Kc=qa(function(vc){return vc.link(Oc.color[0])})}else u(Oc)&&(Kc=qa(function(vc){return vc.global.def("[",d(Oc.length,
function(tc){return Oc[tc]}),"]")}));Kc.value=Oc;Ec[Pc]=Kc});Object.keys(Sc).forEach(function(Pc){var Oc=Sc[Pc];Ec[Pc]=pa(Oc,function(Kc,pc){return Kc.invoke(pc,Oc)})});return Ec}function Dd(Gb,Sb){var zc=Gb["static"],Sc=Gb.dynamic,Ec={};Object.keys(zc).forEach(function(Pc){var Oc=zc[Pc],Kc=Wb.id(Pc),pc=new cf;if(ea(Oc))pc.state=1,pc.buffer=kc.getBuffer(kc.create(Oc,34962,!1,!0)),pc.type=0;else{var vc=kc.getBuffer(Oc);if(vc)pc.state=1,pc.buffer=vc,pc.type=0;else if("constant"in Oc){var tc=Oc.constant;
pc.buffer="null";pc.state=2;"number"===typeof tc?pc.x=tc:fc.forEach(function(se,te){te<tc.length&&(pc[se]=tc[te])})}else{vc=ea(Oc.buffer)?kc.getBuffer(kc.create(Oc.buffer,34962,!1,!0)):kc.getBuffer(Oc.buffer);var gd=Oc.offset|0,ud=Oc.stride|0,xd=Oc.size|0,Ad=!!Oc.normalized,wd=0;"type"in Oc&&(wd=bb[Oc.type]);Oc=Oc.divisor|0;pc.buffer=vc;pc.state=1;pc.size=xd;pc.normalized=Ad;pc.type=wd||vc.dtype;pc.offset=gd;pc.stride=ud;pc.divisor=Oc}}Ec[Pc]=qa(function(se,te){te=se.attribCache;if(Kc in te)return te[Kc];
var Fe={isStream:!1};Object.keys(pc).forEach(function(je){Fe[je]=pc[je]});pc.buffer&&(Fe.buffer=se.link(pc.buffer),Fe.type=Fe.type||Fe.buffer+".dtype");return te[Kc]=Fe})});Object.keys(Sc).forEach(function(Pc){var Oc=Sc[Pc];Ec[Pc]=pa(Oc,function(Kc,pc){function vc(te){pc(xd[te],"\x3d",tc,".",te,"|0;")}var tc=Kc.invoke(pc,Oc),gd=Kc.shared;Kc=Kc.constants;var ud=gd.isBufferArgs;gd=gd.buffer;var xd={isStream:pc.def(!1)},Ad=new cf;Ad.state=1;Object.keys(Ad).forEach(function(te){xd[te]=pc.def(""+Ad[te])});
var wd=xd.buffer,se=xd.type;pc("if(",ud,"(",tc,")){",xd.isStream,"\x3dtrue;",wd,"\x3d",gd,".createStream(",34962,",",tc,");",se,"\x3d",wd,".dtype;","}else{",wd,"\x3d",gd,".getBuffer(",tc,");","if(",wd,"){",se,"\x3d",wd,".dtype;",'}else if("constant" in ',tc,"){",xd.state,"\x3d",2,";","if(typeof "+tc+'.constant \x3d\x3d\x3d "number"){',xd[fc[0]],"\x3d",tc,".constant;",fc.slice(1).map(function(te){return xd[te]}).join("\x3d"),"\x3d0;","}else{",fc.map(function(te,Fe){return xd[te]+"\x3d"+tc+".constant.length\x3e"+
Fe+"?"+tc+".constant["+Fe+"]:0;"}).join(""),"}}else{","if(",ud,"(",tc,".buffer)){",wd,"\x3d",gd,".createStream(",34962,",",tc,".buffer);","}else{",wd,"\x3d",gd,".getBuffer(",tc,".buffer);","}",se,'\x3d"type" in ',tc,"?",Kc.glTypes,"[",tc,".type]:",wd,".dtype;",xd.normalized,"\x3d!!",tc,".normalized;");vc("size");vc("offset");vc("stride");vc("divisor");pc("}}");pc.exit("if(",xd.isStream,"){",gd,".destroyStream(",wd,");","}");return xd})});return Ec}function ed(Gb,Sb){Sb=Gb["static"];Gb=Gb.dynamic;
if("vao"in Sb){var zc=Sb.vao;null!==zc&&null===lc.getVAO(zc)&&(zc=lc.createVAO(zc));return qa(function(Ec){return Ec.link(lc.getVAO(zc))})}if("vao"in Gb){var Sc=Gb.vao;return pa(Sc,function(Ec,Pc){var Oc=Ec.invoke(Pc,Sc);return Pc.def(Ec.shared.vao+".getVAO("+Oc+")")})}return null}function Mc(Gb){var Sb=Gb["static"],zc=Gb.dynamic,Sc={};Object.keys(Sb).forEach(function(Ec){var Pc=Sb[Ec];Sc[Ec]=qa(function(Oc,Kc){return"number"===typeof Pc||"boolean"===typeof Pc?""+Pc:Oc.link(Pc)})});Object.keys(zc).forEach(function(Ec){var Pc=
zc[Ec];Sc[Ec]=pa(Pc,function(Oc,Kc){return Oc.invoke(Kc,Pc)})});return Sc}function sd(Gb,Sb,zc,Sc,Ec){function Pc(wd){var se=pc[wd];se&&(tc[wd]=se)}var Oc=Lc(Gb,Sb),Kc=xc(Gb,Ec),pc=Nc(Gb,Kc,Ec),vc=od(Gb,Ec),tc=Zc(Gb,Ec),gd=$c(Gb,Ec,Oc);Pc("viewport");Pc(vb("scissor.box"));var ud=0<Object.keys(tc).length;Kc={framebuffer:Kc,draw:vc,shader:gd,state:tc,dirty:ud,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};Kc.profile=dc(Gb,Ec);Kc.uniforms=rd(zc,Ec);Kc.drawVAO=Kc.scopeVAO=ed(Gb,Ec);if(!Kc.drawVAO&&
gd.program&&!Oc&&Dc.angle_instanced_arrays){var xd=!0;Gb=gd.program.attributes.map(function(wd){wd=Sb["static"][wd];xd=xd&&!!wd;return wd});if(xd&&0<Gb.length){var Ad=lc.getVAO(lc.createVAO(Gb));Kc.drawVAO=new ba(null,null,null,function(wd,se){return wd.link(Ad)});Kc.useVAO=!0}}Oc?Kc.useVAO=!0:Kc.attributes=Dd(Sb,Ec);Kc.context=Mc(Sc,Ec);return Kc}function yd(Gb,Sb,zc){var Sc=Gb.shared.context,Ec=Gb.scope();Object.keys(zc).forEach(function(Pc){Sb.save(Sc,"."+Pc);Ec(Sc,".",Pc,"\x3d",zc[Pc].append(Gb,
Sb),";")});Sb(Ec)}function Fd(Gb,Sb,zc,Sc){var Ec=Gb.shared,Pc=Ec.gl,Oc=Ec.framebuffer,Kc;xb&&(Kc=Sb.def(Ec.extensions,".webgl_draw_buffers"));var pc=Gb.constants;Ec=pc.drawBuffer;pc=pc.backBuffer;Gb=zc?zc.append(Gb,Sb):Sb.def(Oc,".next");Sc||Sb("if(",Gb,"!\x3d\x3d",Oc,".cur){");Sb("if(",Gb,"){",Pc,".bindFramebuffer(",36160,",",Gb,".framebuffer);");xb&&Sb(Kc,".drawBuffersWEBGL(",Ec,"[",Gb,".colorAttachments.length]);");Sb("}else{",Pc,".bindFramebuffer(",36160,",null);");xb&&Sb(Kc,".drawBuffersWEBGL(",
pc,");");Sb("}",Oc,".cur\x3d",Gb,";");Sc||Sb("}")}function xe(Gb,Sb,zc){var Sc=Gb.shared,Ec=Sc.gl,Pc=Gb.current,Oc=Gb.next,Kc=Sc.current,pc=Sc.next,vc=Gb.cond(Kc,".dirty");mc.forEach(function(tc){tc=vb(tc);if(!(tc in zc.state))if(tc in Oc){var gd=Oc[tc];var ud=Pc[tc];var xd=d(rb[tc].length,function(Ad){return vc.def(gd,"[",Ad,"]")});vc(Gb.cond(xd.map(function(Ad,wd){return Ad+"!\x3d\x3d"+ud+"["+wd+"]"}).join("||")).then(Ec,".",Yb[tc],"(",xd,");",xd.map(function(Ad,wd){return ud+"["+wd+"]\x3d"+Ad}).join(";"),
";"))}else gd=vc.def(pc,".",tc),xd=Gb.cond(gd,"!\x3d\x3d",Kc,".",tc),vc(xd),tc in Ic?xd(Gb.cond(gd).then(Ec,".enable(",Ic[tc],");")["else"](Ec,".disable(",Ic[tc],");"),Kc,".",tc,"\x3d",gd,";"):xd(Ec,".",Yb[tc],"(",gd,");",Kc,".",tc,"\x3d",gd,";")});0===Object.keys(zc.state).length&&vc(Kc,".dirty\x3dfalse;");Sb(vc)}function Kd(Gb,Sb,zc,Sc){var Ec=Gb.shared,Pc=Gb.current,Oc=Ec.current,Kc=Ec.gl;ca(Object.keys(zc)).forEach(function(pc){var vc=zc[pc];if(!Sc||Sc(vc)){var tc=vc.append(Gb,Sb);if(Ic[pc]){var gd=
Ic[pc];ka(vc)?tc?Sb(Kc,".enable(",gd,");"):Sb(Kc,".disable(",gd,");"):Sb(Gb.cond(tc).then(Kc,".enable(",gd,");")["else"](Kc,".disable(",gd,");"));Sb(Oc,".",pc,"\x3d",tc,";")}else if(u(tc)){var ud=Pc[pc];Sb(Kc,".",Yb[pc],"(",tc,");",tc.map(function(xd,Ad){return ud+"["+Ad+"]\x3d"+xd}).join(";"),";")}else Sb(Kc,".",Yb[pc],"(",tc,");",Oc,".",pc,"\x3d",tc,";")}})}function Gc(Gb,Sb){Ma&&(Gb.instancing=Sb.def(Gb.shared.extensions,".angle_instanced_arrays"))}function dd(Gb,Sb,zc,Sc,Ec){function Pc(){return"undefined"===
typeof performance?"Date.now()":"performance.now()"}function Oc(wd){xd=Sb.def();wd(xd,"\x3d",Pc(),";");"string"===typeof Ec?wd(tc,".count+\x3d",Ec,";"):wd(tc,".count++;");zb&&(Sc?(Ad=Sb.def(),wd(Ad,"\x3d",ud,".getNumPendingQueries();")):wd(ud,".beginQuery(",tc,");"))}function Kc(wd){wd(tc,".cpuTime+\x3d",Pc(),"-",xd,";");zb&&(Sc?wd(ud,".pushScopeStats(",Ad,",",ud,".getNumPendingQueries(),",tc,");"):wd(ud,".endQuery();"))}function pc(wd){var se=Sb.def(gd,".profile");Sb(gd,".profile\x3d",wd,";");Sb.exit(gd,
".profile\x3d",se,";")}var vc=Gb.shared,tc=Gb.stats,gd=vc.current,ud=vc.timer;zc=zc.profile;var xd,Ad;if(zc){if(ka(zc)){zc.enable?(Oc(Sb),Kc(Sb.exit),pc("true")):pc("false");return}zc=zc.append(Gb,Sb);pc(zc)}else zc=Sb.def(gd,".profile");vc=Gb.block();Oc(vc);Sb("if(",zc,"){",vc,"}");Gb=Gb.block();Kc(Gb);Sb.exit("if(",zc,"){",Gb,"}")}function vd(Gb,Sb,zc,Sc,Ec){function Pc(pc){switch(pc){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;
default:return 1}}function Oc(pc,vc,tc){function gd(){Sb("if(!",wd,".buffer){",xd,".enableVertexAttribArray(",Ad,");}");var je=tc.type;var Ge=tc.size?Sb.def(tc.size,"||",vc):vc;Sb("if(",wd,".type!\x3d\x3d",je,"||",wd,".size!\x3d\x3d",Ge,"||",Fe.map(function(uf){return wd+"."+uf+"!\x3d\x3d"+tc[uf]}).join("||"),"){",xd,".bindBuffer(",34962,",",se,".buffer);",xd,".vertexAttribPointer(",[Ad,Ge,je,tc.normalized,tc.stride,tc.offset],");",wd,".type\x3d",je,";",wd,".size\x3d",Ge,";",Fe.map(function(uf){return wd+
"."+uf+"\x3d"+tc[uf]+";"}).join(""),"}");Ma&&(je=tc.divisor,Sb("if(",wd,".divisor!\x3d\x3d",je,"){",Gb.instancing,".vertexAttribDivisorANGLE(",[Ad,je],");",wd,".divisor\x3d",je,";}"))}function ud(){Sb("if(",wd,".buffer){",xd,".disableVertexAttribArray(",Ad,");",wd,".buffer\x3dnull;","}if(",fc.map(function(je,Ge){return wd+"."+je+"!\x3d\x3d"+te[Ge]}).join("||"),"){",xd,".vertexAttrib4f(",Ad,",",te,");",fc.map(function(je,Ge){return wd+"."+je+"\x3d"+te[Ge]+";"}).join(""),"}")}var xd=Kc.gl,Ad=Sb.def(pc,
".location"),wd=Sb.def(Kc.attributes,"[",Ad,"]");pc=tc.state;var se=tc.buffer,te=[tc.x,tc.y,tc.z,tc.w],Fe=["buffer","normalized","offset","stride"];1===pc?gd():2===pc?ud():(Sb("if(",pc,"\x3d\x3d\x3d",1,"){"),gd(),Sb("}else{"),ud(),Sb("}"))}var Kc=Gb.shared;Sc.forEach(function(pc){var vc=pc.name,tc=zc.attributes[vc];if(tc){if(!Ec(tc))return;var gd=tc.append(Gb,Sb)}else{if(!Ec(Fc))return;var ud=Gb.scopeAttrib(vc);gd={};Object.keys(new cf).forEach(function(xd){gd[xd]=Sb.def(ud,".",xd)})}Oc(Gb.link(pc),
Pc(pc.info.type),gd)})}function Cd(Gb,Sb,zc,Sc,Ec){for(var Pc=Gb.shared,Oc=Pc.gl,Kc,pc=0;pc<Sc.length;++pc){var vc=Sc[pc],tc=vc.name,gd=vc.info.type,ud=zc.uniforms[tc];vc=Gb.link(vc)+".location";if(ud){if(!Ec(ud))continue;if(ka(ud)){tc=ud.value;if(35678===gd||35680===gd)gd=Gb.link(tc._texture||tc.color[0]._texture),Sb(Oc,".uniform1i(",vc,",",gd+".bind());"),Sb.exit(gd,".unbind();");else if(35674===gd||35675===gd||35676===gd)tc=Gb.global.def("new Float32Array(["+Array.prototype.slice.call(tc)+"])"),
ud=2,35675===gd?ud=3:35676===gd&&(ud=4),Sb(Oc,".uniformMatrix",ud,"fv(",vc,",false,",tc,");");else{switch(gd){case 5126:Kc="1f";break;case 35664:Kc="2f";break;case 35665:Kc="3f";break;case 35666:Kc="4f";break;case 35670:Kc="1i";break;case 5124:Kc="1i";break;case 35671:Kc="2i";break;case 35667:Kc="2i";break;case 35672:Kc="3i";break;case 35668:Kc="3i";break;case 35673:Kc="4i";break;case 35669:Kc="4i"}Sb(Oc,".uniform",Kc,"(",vc,",",u(tc)?Array.prototype.slice.call(tc):tc,");")}continue}else var xd=ud.append(Gb,
Sb)}else{if(!Ec(Fc))continue;xd=Sb.def(Pc.uniforms,"[",Wb.id(tc),"]")}35678===gd?Sb("if(",xd,"\x26\x26",xd,'._reglType\x3d\x3d\x3d"framebuffer"){',xd,"\x3d",xd,".color[0];","}"):35680===gd&&Sb("if(",xd,"\x26\x26",xd,'._reglType\x3d\x3d\x3d"framebufferCube"){',xd,"\x3d",xd,".color[0];","}");tc=1;switch(gd){case 35678:case 35680:gd=Sb.def(xd,"._texture");Sb(Oc,".uniform1i(",vc,",",gd,".bind());");Sb.exit(gd,".unbind();");continue;case 5124:case 35670:Kc="1i";break;case 35667:case 35671:Kc="2i";tc=2;
break;case 35668:case 35672:Kc="3i";tc=3;break;case 35669:case 35673:Kc="4i";tc=4;break;case 5126:Kc="1f";break;case 35664:Kc="2f";tc=2;break;case 35665:Kc="3f";tc=3;break;case 35666:Kc="4f";tc=4;break;case 35674:Kc="Matrix2fv";break;case 35675:Kc="Matrix3fv";break;case 35676:Kc="Matrix4fv"}Sb(Oc,".uniform",Kc,"(",vc,",");if("M"===Kc.charAt(0)){vc=Math.pow(gd-35674+2,2);var Ad=Gb.global.def("new Float32Array(",vc,")");Sb("false,(Array.isArray(",xd,")||",xd," instanceof Float32Array)?",xd,":(",d(vc,
function(wd){return Ad+"["+wd+"]\x3d"+xd+"["+wd+"]"}),",",Ad,")")}else 1<tc?Sb(d(tc,function(wd){return xd+"["+wd+"]"})):Sb(xd);Sb(");")}}function ae(Gb,Sb,zc,Sc){function Ec(je){var Ge=tc[je];return Ge?Ge.contextDep&&Sc.contextDynamic||Ge.propDep?Ge.append(Gb,zc):Ge.append(Gb,Sb):Sb.def(vc,".",je)}function Pc(){function je(){zc(se,".drawElementsInstancedANGLE(",[ud,Ad,te,xd+"\x3c\x3c(("+te+"-5121)\x3e\x3e1)",wd],");")}function Ge(){zc(se,".drawArraysInstancedANGLE(",[ud,xd,Ad,wd],");")}gd?Fe?je():
(zc("if(",gd,"){"),je(),zc("}else{"),Ge(),zc("}")):Ge()}function Oc(){function je(){zc(pc+".drawElements("+[ud,Ad,te,xd+"\x3c\x3c(("+te+"-5121)\x3e\x3e1)"]+");")}function Ge(){zc(pc+".drawArrays("+[ud,xd,Ad]+");")}gd?Fe?je():(zc("if(",gd,"){"),je(),zc("}else{"),Ge(),zc("}")):Ge()}var Kc=Gb.shared,pc=Kc.gl,vc=Kc.draw,tc=Sc.draw,gd=function(){var je=tc.elements,Ge=Sb;if(je){if(je.contextDep&&Sc.contextDynamic||je.propDep)Ge=zc;je=je.append(Gb,Ge)}else je=Ge.def(vc,".","elements");je&&Ge("if("+je+")"+
pc+".bindBuffer(34963,"+je+".buffer.buffer);");return je}(),ud=Ec("primitive"),xd=Ec("offset"),Ad=function(){var je=tc.count,Ge=Sb;if(je){if(je.contextDep&&Sc.contextDynamic||je.propDep)Ge=zc;je=je.append(Gb,Ge)}else je=Ge.def(vc,".","count");return je}();if("number"===typeof Ad){if(0===Ad)return}else zc("if(",Ad,"){"),zc.exit("}");var wd,se;Ma&&(wd=Ec("instances"),se=Gb.instancing);var te=gd+".type",Fe=tc.elements&&ka(tc.elements);Ma&&("number"!==typeof wd||0<=wd)?"string"===typeof wd?(zc("if(",
wd,"\x3e0){"),Pc(),zc("}else if(",wd,"\x3c0){"),Oc(),zc("}")):Pc():Oc()}function me(Gb,Sb,zc,Sc,Ec){Sb=wc();Ec=Sb.proc("body",Ec);Ma&&(Sb.instancing=Ec.def(Sb.shared.extensions,".angle_instanced_arrays"));Gb(Sb,Ec,zc,Sc);return Sb.compile().body}function Nd(Gb,Sb,zc,Sc){Gc(Gb,Sb);zc.useVAO?zc.drawVAO?Sb(Gb.shared.vao,".setVAO(",zc.drawVAO.append(Gb,Sb),");"):Sb(Gb.shared.vao,".setVAO(",Gb.shared.vao,".targetVAO);"):(Sb(Gb.shared.vao,".setVAO(null);"),vd(Gb,Sb,zc,Sc.attributes,function(){return!0}));
Cd(Gb,Sb,zc,Sc.uniforms,function(){return!0});ae(Gb,Sb,Sb,zc)}function Id(Gb,Sb){var zc=Gb.proc("draw",1);Gc(Gb,zc);yd(Gb,zc,Sb.context);Fd(Gb,zc,Sb.framebuffer);xe(Gb,zc,Sb);Kd(Gb,zc,Sb.state);dd(Gb,zc,Sb,!1,!0);var Sc=Sb.shader.progVar.append(Gb,zc);zc(Gb.shared.gl,".useProgram(",Sc,".program);");if(Sb.shader.program)Nd(Gb,zc,Sb,Sb.shader.program);else{zc(Gb.shared.vao,".setVAO(null);");var Ec=Gb.global.def("{}"),Pc=zc.def(Sc,".id"),Oc=zc.def(Ec,"[",Pc,"]");zc(Gb.cond(Oc).then(Oc,".call(this,a0);")["else"](Oc,
"\x3d",Ec,"[",Pc,"]\x3d",Gb.link(function(Kc){return me(Nd,Gb,Sb,Kc,1)}),"(",Sc,");",Oc,".call(this,a0);"))}0<Object.keys(Sb.state).length&&zc(Gb.shared.current,".dirty\x3dtrue;")}function qe(Gb,Sb,zc,Sc){function Ec(){return!0}Gb.batchId="a1";Gc(Gb,Sb);vd(Gb,Sb,zc,Sc.attributes,Ec);Cd(Gb,Sb,zc,Sc.uniforms,Ec);ae(Gb,Sb,Sb,zc)}function re(Gb,Sb,zc,Sc){function Ec(gd){return gd.contextDep&&Oc||gd.propDep}function Pc(gd){return!Ec(gd)}Gc(Gb,Sb);var Oc=zc.contextDep,Kc=Sb.def(),pc=Sb.def();Gb.shared.props=
pc;Gb.batchId=Kc;var vc=Gb.scope(),tc=Gb.scope();Sb(vc.entry,"for(",Kc,"\x3d0;",Kc,"\x3c","a1",";++",Kc,"){",pc,"\x3d","a0","[",Kc,"];",tc,"}",vc.exit);zc.needsContext&&yd(Gb,tc,zc.context);zc.needsFramebuffer&&Fd(Gb,tc,zc.framebuffer);Kd(Gb,tc,zc.state,Ec);zc.profile&&Ec(zc.profile)&&dd(Gb,tc,zc,!1,!0);Sc?(zc.useVAO?zc.drawVAO?Ec(zc.drawVAO)?tc(Gb.shared.vao,".setVAO(",zc.drawVAO.append(Gb,tc),");"):vc(Gb.shared.vao,".setVAO(",zc.drawVAO.append(Gb,vc),");"):vc(Gb.shared.vao,".setVAO(",Gb.shared.vao,
".targetVAO);"):(vc(Gb.shared.vao,".setVAO(null);"),vd(Gb,vc,zc,Sc.attributes,Pc),vd(Gb,tc,zc,Sc.attributes,Ec)),Cd(Gb,vc,zc,Sc.uniforms,Pc),Cd(Gb,tc,zc,Sc.uniforms,Ec),ae(Gb,vc,tc,zc)):(Sb=Gb.global.def("{}"),Sc=zc.shader.progVar.append(Gb,tc),pc=tc.def(Sc,".id"),vc=tc.def(Sb,"[",pc,"]"),tc(Gb.shared.gl,".useProgram(",Sc,".program);","if(!",vc,"){",vc,"\x3d",Sb,"[",pc,"]\x3d",Gb.link(function(gd){return me(qe,Gb,zc,gd,2)}),"(",Sc,");}",vc,".call(this,a0[",Kc,"],",Kc,");"))}function ve(Gb,Sb){function zc(vc){return vc.contextDep&&
Ec||vc.propDep}var Sc=Gb.proc("batch",2);Gb.batchId="0";Gc(Gb,Sc);var Ec=!1,Pc=!0;Object.keys(Sb.context).forEach(function(vc){Ec=Ec||Sb.context[vc].propDep});Ec||(yd(Gb,Sc,Sb.context),Pc=!1);var Oc=Sb.framebuffer,Kc=!1;Oc?(Oc.propDep?Ec=Kc=!0:Oc.contextDep&&Ec&&(Kc=!0),Kc||Fd(Gb,Sc,Oc)):Fd(Gb,Sc,null);Sb.state.viewport&&Sb.state.viewport.propDep&&(Ec=!0);xe(Gb,Sc,Sb);Kd(Gb,Sc,Sb.state,function(vc){return!zc(vc)});Sb.profile&&zc(Sb.profile)||dd(Gb,Sc,Sb,!1,"a1");Sb.contextDep=Ec;Sb.needsContext=Pc;
Sb.needsFramebuffer=Kc;Pc=Sb.shader.progVar;if(Pc.contextDep&&Ec||Pc.propDep)re(Gb,Sc,Sb,null);else if(Pc=Pc.append(Gb,Sc),Sc(Gb.shared.gl,".useProgram(",Pc,".program);"),Sb.shader.program)re(Gb,Sc,Sb,Sb.shader.program);else{Sc(Gb.shared.vao,".setVAO(null);");Oc=Gb.global.def("{}");Kc=Sc.def(Pc,".id");var pc=Sc.def(Oc,"[",Kc,"]");Sc(Gb.cond(pc).then(pc,".call(this,a0,a1);")["else"](pc,"\x3d",Oc,"[",Kc,"]\x3d",Gb.link(function(vc){return me(re,Gb,Sb,vc,2)}),"(",Pc,");",pc,".call(this,a0,a1);"))}0<
Object.keys(Sb.state).length&&Sc(Gb.shared.current,".dirty\x3dtrue;")}function Se(Gb,Sb){function zc(Oc){var Kc=Sb.shader[Oc];Kc&&Sc.set(Ec.shader,"."+Oc,Kc.append(Gb,Sc))}var Sc=Gb.proc("scope",3);Gb.batchId="a2";var Ec=Gb.shared,Pc=Ec.current;yd(Gb,Sc,Sb.context);Sb.framebuffer&&Sb.framebuffer.append(Gb,Sc);ca(Object.keys(Sb.state)).forEach(function(Oc){var Kc=Sb.state[Oc].append(Gb,Sc);u(Kc)?Kc.forEach(function(pc,vc){Sc.set(Gb.next[Oc],"["+vc+"]",pc)}):Sc.set(Ec.next,"."+Oc,Kc)});dd(Gb,Sc,Sb,
!0,!0);["elements","offset","count","instances","primitive"].forEach(function(Oc){var Kc=Sb.draw[Oc];Kc&&Sc.set(Ec.draw,"."+Oc,""+Kc.append(Gb,Sc))});Object.keys(Sb.uniforms).forEach(function(Oc){Sc.set(Ec.uniforms,"["+Wb.id(Oc)+"]",Sb.uniforms[Oc].append(Gb,Sc))});Object.keys(Sb.attributes).forEach(function(Oc){var Kc=Sb.attributes[Oc].append(Gb,Sc),pc=Gb.scopeAttrib(Oc);Object.keys(new cf).forEach(function(vc){Sc.set(pc,"."+vc,Kc[vc])})});Sb.scopeVAO&&Sc.set(Ec.vao,".targetVAO",Sb.scopeVAO.append(Gb,
Sc));zc("vert");zc("frag");0<Object.keys(Sb.state).length&&(Sc(Pc,".dirty\x3dtrue;"),Sc.exit(Pc,".dirty\x3dtrue;"));Sc("a1(",Gb.shared.context,",a0,",Gb.batchId,");")}function gf(Gb){if("object"===typeof Gb&&!u(Gb)){for(var Sb=Object.keys(Gb),zc=0;zc<Sb.length;++zc)if(la.isDynamic(Gb[Sb[zc]]))return!0;return!1}}function $e(Gb,Sb,zc){function Sc(gd,ud){Oc.forEach(function(xd){var Ad=Ec[xd];la.isDynamic(Ad)&&(Ad=gd.invoke(ud,Ad),ud(tc,".",xd,"\x3d",Ad,";"))})}var Ec=Sb["static"][zc];if(Ec&&gf(Ec)){var Pc=
Gb.global,Oc=Object.keys(Ec),Kc=!1,pc=!1,vc=!1,tc=Gb.global.def("{}");Oc.forEach(function(gd){var ud=Ec[gd];if(la.isDynamic(ud))"function"===typeof ud&&(ud=Ec[gd]=la.unbox(ud)),gd=pa(ud,null),Kc=Kc||gd.thisDep,vc=vc||gd.propDep,pc=pc||gd.contextDep;else{Pc(tc,".",gd,"\x3d");switch(typeof ud){case "number":Pc(ud);break;case "string":Pc('"',ud,'"');break;case "object":Array.isArray(ud)&&Pc("[",ud.join(),"]");break;default:Pc(Gb.link(ud))}Pc(";")}});Sb.dynamic[zc]=new la.DynamicVariable(4,{thisDep:Kc,
contextDep:pc,propDep:vc,ref:tc,append:Sc});delete Sb["static"][zc]}}var cf=lc.Record,Te={add:32774,subtract:32778,"reverse subtract":32779};Dc.ext_blend_minmax&&(Te.min=32775,Te.max=32776);var Ma=Dc.angle_instanced_arrays,xb=Dc.webgl_draw_buffers,rb={dirty:!0,profile:qb.profile},Hb={},mc=[],Ic={},Yb={};Db("dither",3024);Db("blend.enable",3042);Qb("blend.color","blendColor",[0,0,0,0]);Qb("blend.equation","blendEquationSeparate",[32774,32774]);Qb("blend.func","blendFuncSeparate",[1,0,1,0]);Db("depth.enable",
2929,!0);Qb("depth.func","depthFunc",513);Qb("depth.range","depthRange",[0,1]);Qb("depth.mask","depthMask",!0);Qb("colorMask","colorMask",[!0,!0,!0,!0]);Db("cull.enable",2884);Qb("cull.face","cullFace",1029);Qb("frontFace","frontFace",2305);Qb("lineWidth","lineWidth",1);Db("polygonOffset.enable",32823);Qb("polygonOffset.offset","polygonOffset",[0,0]);Db("sample.alpha",32926);Db("sample.enable",32928);Qb("sample.coverage","sampleCoverage",[1,!1]);Db("stencil.enable",2960);Qb("stencil.mask","stencilMask",
-1);Qb("stencil.func","stencilFunc",[519,0,-1]);Qb("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]);Qb("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]);Db("scissor.enable",3089);Qb("scissor.box","scissor",[0,0,yb.drawingBufferWidth,yb.drawingBufferHeight]);Qb("viewport","viewport",[0,0,yb.drawingBufferWidth,yb.drawingBufferHeight]);var Ac={gl:yb,context:Ub,strings:Wb,next:Hb,current:rb,draw:Rb,elements:ic,buffer:kc,shader:yc,attributes:lc.state,vao:lc,uniforms:$b,framebuffer:tb,
extensions:Dc,timer:zb,isBufferArgs:ea},Yc={primTypes:Ia,compareFuncs:cd,blendFuncs:Cc,blendEquations:Te,stencilOps:Qc,glTypes:bb,orientationType:Wc};xb&&(Yc.backBuffer=[1029],Yc.drawBuffer=d(ec.maxDrawbuffers,function(Gb){return 0===Gb?[0]:d(Gb,function(Sb){return 36064+Sb})}));var md=0;return{next:Hb,current:rb,procs:function(){var Gb=wc(),Sb=Gb.proc("poll"),zc=Gb.proc("refresh"),Sc=Gb.block();Sb(Sc);zc(Sc);var Ec=Gb.shared,Pc=Ec.gl,Oc=Ec.next,Kc=Ec.current;Sc(Kc,".dirty\x3dfalse;");Fd(Gb,Sb);Fd(Gb,
zc,null,!0);var pc;Ma&&(pc=Gb.link(Ma));Dc.oes_vertex_array_object&&zc(Gb.link(Dc.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var vc=0;vc<ec.maxAttributes;++vc){var tc=zc.def(Ec.attributes,"[",vc,"]"),gd=Gb.cond(tc,".buffer");gd.then(Pc,".enableVertexAttribArray(",vc,");",Pc,".bindBuffer(",34962,",",tc,".buffer.buffer);",Pc,".vertexAttribPointer(",vc,",",tc,".size,",tc,".type,",tc,".normalized,",tc,".stride,",tc,".offset);")["else"](Pc,".disableVertexAttribArray(",vc,");",Pc,".vertexAttrib4f(",
vc,",",tc,".x,",tc,".y,",tc,".z,",tc,".w);",tc,".buffer\x3dnull;");zc(gd);Ma&&zc(pc,".vertexAttribDivisorANGLE(",vc,",",tc,".divisor);")}zc(Gb.shared.vao,".currentVAO\x3dnull;",Gb.shared.vao,".setVAO(",Gb.shared.vao,".targetVAO);");Object.keys(Ic).forEach(function(ud){var xd=Ic[ud],Ad=Sc.def(Oc,".",ud),wd=Gb.block();wd("if(",Ad,"){",Pc,".enable(",xd,")}else{",Pc,".disable(",xd,")}",Kc,".",ud,"\x3d",Ad,";");zc(wd);Sb("if(",Ad,"!\x3d\x3d",Kc,".",ud,"){",wd,"}")});Object.keys(Yb).forEach(function(ud){var xd=
Yb[ud],Ad=rb[ud],wd,se,te=Gb.block();te(Pc,".",xd,"(");u(Ad)?(xd=Ad.length,wd=Gb.global.def(Oc,".",ud),se=Gb.global.def(Kc,".",ud),te(d(xd,function(Fe){return wd+"["+Fe+"]"}),");",d(xd,function(Fe){return se+"["+Fe+"]\x3d"+wd+"["+Fe+"];"}).join("")),Sb("if(",d(xd,function(Fe){return wd+"["+Fe+"]!\x3d\x3d"+se+"["+Fe+"]"}).join("||"),"){",te,"}")):(wd=Sc.def(Oc,".",ud),se=Sc.def(Kc,".",ud),te(wd,");",Kc,".",ud,"\x3d",wd,";"),Sb("if(",wd,"!\x3d\x3d",se,"){",te,"}"));zc(te)});return Gb.compile()}(),compile:function(Gb,
Sb,zc,Sc,Ec){var Pc=wc();Pc.stats=Pc.link(Ec);Object.keys(Sb["static"]).forEach(function(Oc){$e(Pc,Sb,Oc)});qc.forEach(function(Oc){$e(Pc,Gb,Oc)});zc=sd(Gb,Sb,zc,Sc,Pc);Id(Pc,zc);Se(Pc,zc);ve(Pc,zc);return Pc.compile()}}}function ja(yb,Wb){for(var Dc=0;Dc<yb.length;++Dc)if(yb[Dc]===Wb)return Dc;return-1}var ra=function(yb,Wb){for(var Dc=Object.keys(Wb),ec=0;ec<Dc.length;++ec)yb[Dc[ec]]=Wb[Dc[ec]];return yb},ha=0,la={DynamicVariable:r,define:function(yb,Wb){return new r(yb,p(Wb+""))},isDynamic:function(yb){return"function"===
typeof yb&&!yb._reglType||yb instanceof r},unbox:function(yb,Wb){return"function"===typeof yb?new r(0,yb):yb},accessor:p},ua={next:"function"===typeof requestAnimationFrame?function(yb){return requestAnimationFrame(yb)}:function(yb){return setTimeout(yb,16)},cancel:"function"===typeof cancelAnimationFrame?function(yb){return cancelAnimationFrame(yb)}:clearTimeout},na="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},wa=h();wa.zero=h();
var Ca=function(yb,Wb){var Dc=1;Wb.ext_texture_filter_anisotropic&&(Dc=yb.getParameter(34047));var ec=1,kc=1;Wb.webgl_draw_buffers&&(ec=yb.getParameter(34852),kc=yb.getParameter(36063));var ic=!!Wb.oes_texture_float;if(ic){ic=yb.createTexture();yb.bindTexture(3553,ic);yb.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var ob=yb.createFramebuffer();yb.bindFramebuffer(36160,ob);yb.framebufferTexture2D(36160,36064,3553,ic,0);yb.bindTexture(3553,null);if(36053!==yb.checkFramebufferStatus(36160))ic=!1;else{yb.viewport(0,
0,1,1);yb.clearColor(1,0,0,1);yb.clear(16384);var tb=wa.allocType(5126,4);yb.readPixels(0,0,1,1,6408,5126,tb);yb.getError()?ic=!1:(yb.deleteFramebuffer(ob),yb.deleteTexture(ic),ic=1===tb[0]);wa.freeType(tb)}}tb=!0;"undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(tb=yb.createTexture(),ob=wa.allocType(5121,36),yb.activeTexture(33984),yb.bindTexture(34067,tb),yb.texImage2D(34069,0,6408,3,3,0,6408,5121,ob),wa.freeType(ob),
yb.bindTexture(34067,null),yb.deleteTexture(tb),tb=!yb.getError());return{colorBits:[yb.getParameter(3410),yb.getParameter(3411),yb.getParameter(3412),yb.getParameter(3413)],depthBits:yb.getParameter(3414),stencilBits:yb.getParameter(3415),subpixelBits:yb.getParameter(3408),extensions:Object.keys(Wb).filter(function($b){return!!Wb[$b]}),maxAnisotropic:Dc,maxDrawbuffers:ec,maxColorAttachments:kc,pointSizeDims:yb.getParameter(33901),lineWidthDims:yb.getParameter(33902),maxViewportDims:yb.getParameter(3386),
maxCombinedTextureUnits:yb.getParameter(35661),maxCubeMapSize:yb.getParameter(34076),maxRenderbufferSize:yb.getParameter(34024),maxTextureUnits:yb.getParameter(34930),maxTextureSize:yb.getParameter(3379),maxAttributes:yb.getParameter(34921),maxVertexUniforms:yb.getParameter(36347),maxVertexTextureUnits:yb.getParameter(35660),maxVaryingVectors:yb.getParameter(36348),maxFragmentUniforms:yb.getParameter(36349),glsl:yb.getParameter(35724),renderer:yb.getParameter(7937),vendor:yb.getParameter(7936),version:yb.getParameter(7938),
readFloat:ic,npotTextureCube:tb}},Fa=function(yb){return yb instanceof Uint8Array||yb instanceof Uint16Array||yb instanceof Uint32Array||yb instanceof Int8Array||yb instanceof Int16Array||yb instanceof Int32Array||yb instanceof Float32Array||yb instanceof Float64Array||yb instanceof Uint8ClampedArray},Xa=function(yb){return Object.keys(yb).map(function(Wb){return yb[Wb]})},ab={shape:function(yb){for(var Wb=[];yb.length;yb=yb[0])Wb.push(yb.length);return Wb},flatten:function(yb,Wb,Dc,ec){var kc=1;
if(Wb.length)for(var ic=0;ic<Wb.length;++ic)kc*=Wb[ic];else kc=0;Dc=ec||wa.allocType(Dc,kc);switch(Wb.length){case 0:break;case 1:ec=Wb[0];for(Wb=0;Wb<ec;++Wb)Dc[Wb]=yb[Wb];break;case 2:ec=Wb[0];Wb=Wb[1];for(ic=kc=0;ic<ec;++ic)for(var ob=yb[ic],tb=0;tb<Wb;++tb)Dc[kc++]=ob[tb];break;case 3:t(yb,Wb[0],Wb[1],Wb[2],Dc,0);break;default:v(yb,Wb,0,Dc,0)}return Dc}},gb={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,
"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},bb={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,"float":5126,float32:5126},La={dynamic:35048,stream:35040,"static":35044},kb=ab.flatten,mb=ab.shape,ya=[];ya[5120]=1;ya[5122]=2;ya[5124]=4;ya[5121]=1;ya[5123]=2;ya[5125]=4;ya[5126]=4;var Ia={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,
"triangle fan":6},Na=new Float32Array(1),Ta=new Uint32Array(Na.buffer),hb=[9984,9986,9985,9987],Ya=[0,6409,6410,6407,6408],Ga={};Ga[6409]=Ga[6406]=Ga[6402]=1;Ga[34041]=Ga[6410]=2;Ga[6407]=Ga[35904]=3;Ga[6408]=Ga[35906]=4;var Pa=F("HTMLCanvasElement"),Va=F("OffscreenCanvas"),va=F("CanvasRenderingContext2D"),Ea=F("ImageBitmap"),Qa=F("HTMLImageElement"),$a=F("HTMLVideoElement"),eb=Object.keys(gb).concat([Pa,Va,va,Ea,Qa,$a]),pb=[];pb[5121]=1;pb[5126]=4;pb[36193]=2;pb[5123]=2;pb[5125]=4;var Za=[];Za[32854]=
2;Za[32855]=2;Za[36194]=2;Za[34041]=4;Za[33776]=.5;Za[33777]=.5;Za[33778]=1;Za[33779]=1;Za[35986]=.5;Za[35987]=1;Za[34798]=1;Za[35840]=.5;Za[35841]=.25;Za[35842]=.5;Za[35843]=.25;Za[36196]=.5;var nb=[];nb[32854]=2;nb[32855]=2;nb[36194]=2;nb[33189]=2;nb[36168]=1;nb[34041]=4;nb[35907]=4;nb[34836]=16;nb[34842]=8;nb[34843]=6;var sb=function(yb,Wb,Dc,ec,kc){function ic(Rb){this.id=lc++;this.refCount=1;this.renderbuffer=Rb;this.format=32854;this.height=this.width=0;kc.profile&&(this.stats={size:0})}function ob(Rb){var Ub=
Rb.renderbuffer;yb.bindRenderbuffer(36161,null);yb.deleteRenderbuffer(Ub);Rb.renderbuffer=null;Rb.refCount=0;delete yc[Rb.id];ec.renderbufferCount--}var tb={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Wb.ext_srgb&&(tb.srgba=35907);Wb.ext_color_buffer_half_float&&(tb.rgba16f=34842,tb.rgb16f=34843);Wb.webgl_color_buffer_float&&(tb.rgba32f=34836);var $b=[];Object.keys(tb).forEach(function(Rb){$b[tb[Rb]]=Rb});var lc=0,yc={};ic.prototype.decRef=function(){0>=
--this.refCount&&ob(this)};kc.profile&&(ec.getTotalRenderbufferSize=function(){var Rb=0;Object.keys(yc).forEach(function(Ub){Rb+=yc[Ub].stats.size});return Rb});return{create:function(Rb,Ub){function zb(vb,Db){var Qb=0,wc=0,dc=32854;"object"===typeof vb&&vb?("shape"in vb?(wc=vb.shape,Qb=wc[0]|0,wc=wc[1]|0):("radius"in vb&&(Qb=wc=vb.radius|0),"width"in vb&&(Qb=vb.width|0),"height"in vb&&(wc=vb.height|0)),"format"in vb&&(dc=tb[vb.format])):"number"===typeof vb?(Qb=vb|0,wc="number"===typeof Db?Db|0:
Qb):vb||(Qb=wc=1);if(Qb!==qb.width||wc!==qb.height||dc!==qb.format)return zb.width=qb.width=Qb,zb.height=qb.height=wc,qb.format=dc,yb.bindRenderbuffer(36161,qb.renderbuffer),yb.renderbufferStorage(36161,dc,Qb,wc),kc.profile&&(qb.stats.size=nb[qb.format]*qb.width*qb.height),zb.format=$b[qb.format],zb}var qb=new ic(yb.createRenderbuffer());yc[qb.id]=qb;ec.renderbufferCount++;zb(Rb,Ub);zb.resize=function(vb,Db){vb|=0;Db=Db|0||vb;if(vb===qb.width&&Db===qb.height)return zb;zb.width=qb.width=vb;zb.height=
qb.height=Db;yb.bindRenderbuffer(36161,qb.renderbuffer);yb.renderbufferStorage(36161,qb.format,vb,Db);kc.profile&&(qb.stats.size=nb[qb.format]*qb.width*qb.height);return zb};zb._reglType="renderbuffer";zb._renderbuffer=qb;kc.profile&&(zb.stats=qb.stats);zb.destroy=function(){qb.decRef()};return zb},clear:function(){Xa(yc).forEach(ob)},restore:function(){Xa(yc).forEach(function(Rb){Rb.renderbuffer=yb.createRenderbuffer();yb.bindRenderbuffer(36161,Rb.renderbuffer);yb.renderbufferStorage(36161,Rb.format,
Rb.width,Rb.height)});yb.bindRenderbuffer(36161,null)}}},Cb=[];Cb[6408]=4;Cb[6407]=3;var Ib=[];Ib[5121]=1;Ib[5126]=4;Ib[36193]=2;var fc=["x","y","z","w"],qc="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Cc={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,
"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},cd={never:512,less:513,"\x3c":513,equal:514,"\x3d":514,"\x3d\x3d":514,"\x3d\x3d\x3d":514,lequal:515,"\x3c\x3d":515,greater:516,"\x3e":516,notequal:517,"!\x3d":517,"!\x3d\x3d":517,gequal:518,"\x3e\x3d":518,always:519},Qc={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Wc={cw:2304,ccw:2305},Fc=new ba(!1,!1,!1,function(){}),
ld=function(yb,Wb){function Dc(){this.endQueryIndex=this.startQueryIndex=-1;this.sum=0;this.stats=null}function ec(yc,Rb,Ub){var zb=ob.pop()||new Dc;zb.startQueryIndex=yc;zb.endQueryIndex=Rb;zb.sum=0;zb.stats=Ub;tb.push(zb)}if(!Wb.ext_disjoint_timer_query)return null;var kc=[],ic=[],ob=[],tb=[],$b=[],lc=[];return{beginQuery:function(yc){var Rb=kc.pop()||Wb.ext_disjoint_timer_query.createQueryEXT();Wb.ext_disjoint_timer_query.beginQueryEXT(35007,Rb);ic.push(Rb);ec(ic.length-1,ic.length,yc)},endQuery:function(){Wb.ext_disjoint_timer_query.endQueryEXT(35007)},
pushScopeStats:ec,update:function(){var yc;var Rb=ic.length;if(0!==Rb){lc.length=Math.max(lc.length,Rb+1);$b.length=Math.max($b.length,Rb+1);$b[0]=0;var Ub=lc[0]=0;for(yc=Rb=0;yc<ic.length;++yc){var zb=ic[yc];Wb.ext_disjoint_timer_query.getQueryObjectEXT(zb,34919)?(Ub+=Wb.ext_disjoint_timer_query.getQueryObjectEXT(zb,34918),kc.push(zb)):ic[Rb++]=zb;$b[yc+1]=Ub;lc[yc+1]=Rb}ic.length=Rb;for(yc=Rb=0;yc<tb.length;++yc){Ub=tb[yc];var qb=Ub.startQueryIndex;zb=Ub.endQueryIndex;Ub.sum+=$b[zb]-$b[qb];qb=lc[qb];
zb=lc[zb];zb===qb?(Ub.stats.gpuTime+=Ub.sum/1E6,ob.push(Ub)):(Ub.startQueryIndex=qb,Ub.endQueryIndex=zb,tb[Rb++]=Ub)}tb.length=Rb}},getNumPendingQueries:function(){return ic.length},clear:function(){kc.push.apply(kc,ic);for(var yc=0;yc<kc.length;yc++)Wb.ext_disjoint_timer_query.deleteQueryEXT(kc[yc]);ic.length=0;kc.length=0},restore:function(){ic.length=0;kc.length=0}}};return function(yb){function Wb(){if(0===Gc.length)dc&&dc.update(),ae=null;else{ae=ua.next(Wb);yc();for(var Nd=Gc.length-1;0<=Nd;--Nd){var Id=
Gc[Nd];Id&&Id($c,null,0)}zb.flush();dc&&dc.update()}}function Dc(){!ae&&0<Gc.length&&(ae=ua.next(Wb))}function ec(){ae&&(ua.cancel(Wb),ae=null)}function kc(Nd){Nd.preventDefault();ec();dd.forEach(function(Id){Id()})}function ic(Nd){zb.getError();vb.restore();ed.restore();Zc.restore();Mc.restore();sd.restore();yd.restore();rd.restore();dc&&dc.restore();Fd.procs.refresh();Dc();vd.forEach(function(Id){Id()})}function ob(Nd){function Id(Ma){var xb={},rb={};Object.keys(Ma).forEach(function(Hb){var mc=
Ma[Hb];la.isDynamic(mc)?rb[Hb]=la.unbox(mc,Hb):xb[Hb]=mc});return{dynamic:rb,"static":xb}}var qe=Id(Nd.context||{}),re=Id(Nd.uniforms||{}),ve=Id(Nd.attributes||{}),Se=Id(function(Ma){function xb(Hb){if(Hb in rb){var mc=rb[Hb];delete rb[Hb];Object.keys(mc).forEach(function(Ic){rb[Hb+"."+Ic]=mc[Ic]})}}var rb=ra({},Ma);delete rb.uniforms;delete rb.attributes;delete rb.context;delete rb.vao;"stencil"in rb&&rb.stencil.op&&(rb.stencil.opBack=rb.stencil.opFront=rb.stencil.op,delete rb.stencil.op);xb("blend");
xb("depth");xb("cull");xb("stencil");xb("polygonOffset");xb("scissor");xb("sample");"vao"in Ma&&(rb.vao=Ma.vao);return rb}(Nd));Nd={gpuTime:0,cpuTime:0,count:0};qe=Fd.compile(Se,ve,re,qe,Nd);var gf=qe.draw,$e=qe.batch,cf=qe.scope,Te=[];return ra(function(Ma,xb){var rb;if("function"===typeof Ma)return cf.call(this,null,Ma,0);if("function"===typeof xb)if("number"===typeof Ma)for(rb=0;rb<Ma;++rb)cf.call(this,null,xb,rb);else if(Array.isArray(Ma))for(rb=0;rb<Ma.length;++rb)cf.call(this,Ma[rb],xb,rb);
else return cf.call(this,Ma,xb,0);else if("number"===typeof Ma){if(0<Ma){xb=$e.call;for(rb=Ma|0;Te.length<rb;)Te.push(null);return xb.call($e,this,Te,Ma|0)}}else if(Array.isArray(Ma)){if(Ma.length)return $e.call(this,Ma,Ma.length)}else return gf.call(this,Ma)},{stats:Nd})}function tb(Nd,Id){Nd=0;Fd.procs.poll();var qe=Id.color;qe&&(zb.clearColor(+qe[0]||0,+qe[1]||0,+qe[2]||0,+qe[3]||0),Nd|=16384);"depth"in Id&&(zb.clearDepth(+Id.depth),Nd|=256);"stencil"in Id&&(zb.clearStencil(Id.stencil|0),Nd|=1024);
zb.clear(Nd)}function $b(Nd){Gc.push(Nd);Dc();return{cancel:function(){function Id(){var re=ja(Gc,Id);Gc[re]=Gc[Gc.length-1];--Gc.length;0>=Gc.length&&ec()}var qe=ja(Gc,Nd);Gc[qe]=Id}}}function lc(){var Nd=xe.viewport,Id=xe.scissor_box;Nd[0]=Nd[1]=Id[0]=Id[1]=0;$c.viewportWidth=$c.framebufferWidth=$c.drawingBufferWidth=Nd[2]=Id[2]=zb.drawingBufferWidth;$c.viewportHeight=$c.framebufferHeight=$c.drawingBufferHeight=Nd[3]=Id[3]=zb.drawingBufferHeight}function yc(){$c.tick+=1;$c.time=Ub();lc();Fd.procs.poll()}
function Rb(){lc();Fd.procs.refresh();dc&&dc.update()}function Ub(){return(na()-xc)/1E3}yb=m(yb);if(!yb)return null;var zb=yb.gl,qb=zb.getContextAttributes();zb.isContextLost();var vb=c(zb,yb);if(!vb)return null;var Db=k(),Qb={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},wc=vb.extensions,dc=ld(zb,wc),xc=na(),Nc=zb.drawingBufferWidth,Lc=zb.drawingBufferHeight,$c={tick:0,time:0,viewportWidth:Nc,viewportHeight:Lc,
framebufferWidth:Nc,framebufferHeight:Lc,drawingBufferWidth:Nc,drawingBufferHeight:Lc,pixelRatio:yb.pixelRatio},od=Ca(zb,wc),Zc=y(zb,Qb,yb,function(Nd){return rd.destroyBuffer(Nd)}),rd=O(zb,wc,od,Qb,Zc),Dd=B(zb,wc,Zc,Qb),ed=T(zb,Db,Qb,yb),Mc=P(zb,wc,od,function(){Fd.procs.poll()},$c,Qb,yb),sd=sb(zb,wc,od,Qb,yb),yd=N(zb,wc,od,Mc,sd,Qb),Fd=oa(zb,Db,wc,od,Zc,Dd,Mc,yd,{},rd,ed,{elements:null,primitive:4,count:-1,offset:0,instances:-1},$c,dc,yb);Db=V(zb,yd,Fd.procs.poll,$c,qb,wc,od);var xe=Fd.next,Kd=
zb.canvas,Gc=[],dd=[],vd=[],Cd=[yb.onDestroy],ae=null;Kd&&(Kd.addEventListener("webglcontextlost",kc,!1),Kd.addEventListener("webglcontextrestored",ic,!1));var me=yd.setFBO=ob({framebuffer:la.define.call(null,1,"framebuffer")});Rb();qb=ra(ob,{clear:function(Nd){if("framebuffer"in Nd)if(Nd.framebuffer&&"framebufferCube"===Nd.framebuffer_reglType)for(var Id=0;6>Id;++Id)me(ra({framebuffer:Nd.framebuffer.faces[Id]},Nd),tb);else me(Nd,tb);else tb(null,Nd)},prop:la.define.bind(null,1),context:la.define.bind(null,
2),"this":la.define.bind(null,3),draw:ob({}),buffer:function(Nd){return Zc.create(Nd,34962,!1,!1)},elements:function(Nd){return Dd.create(Nd,!1)},texture:Mc.create2D,cube:Mc.createCube,renderbuffer:sd.create,framebuffer:yd.create,framebufferCube:yd.createCube,vao:rd.createVAO,attributes:qb,frame:$b,on:function(Nd,Id){switch(Nd){case "frame":return $b(Id);case "lost":var qe=dd;break;case "restore":qe=vd;break;case "destroy":qe=Cd}qe.push(Id);return{cancel:function(){for(var re=0;re<qe.length;++re)if(qe[re]===
Id){qe[re]=qe[qe.length-1];qe.pop();break}}}},limits:od,hasExtension:function(Nd){return 0<=od.extensions.indexOf(Nd.toLowerCase())},read:Db,destroy:function(){Gc.length=0;ec();Kd&&(Kd.removeEventListener("webglcontextlost",kc),Kd.removeEventListener("webglcontextrestored",ic));ed.clear();yd.clear();sd.clear();Mc.clear();Dd.clear();Zc.clear();rd.clear();dc&&dc.clear();Cd.forEach(function(Nd){Nd()})},_gl:zb,_refresh:Rb,poll:function(){yc();dc&&dc.update()},now:Ub,stats:Qb});yb.onDone(null,qb);return qb}})},
{}],513:[function(b,D,G){var r="",n;D.exports=function(p,k){if("string"!==typeof p)throw new TypeError("expected a string");if(1===k)return p;if(2===k)return p+p;var a=p.length*k;if(n!==p||"undefined"===typeof n)n=p,r="";else if(r.length>=a)return r.substr(0,a);for(;a>r.length&&1<k;)k&1&&(r+=p),k>>=1,p+=p;r+=p;return r=r.substr(0,a)}},{}],514:[function(b,D,G){(function(r){D.exports=r.performance&&r.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,
"undefined"!==typeof lb?lb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],515:[function(b,D,G){D.exports=function(r){for(var n=r.length,p=r[r.length-1],k=n,a=n-2;0<=a;--a){var e=p,f=r[a];p=e+f;e=p-e;if(f-=e)r[--k]=p,p=f}var l=0;for(a=k;a<n;++a)e=r[a],f=p,p=e+f,e=p-e,(f-=e)&&(r[l++]=f);r[l++]=p;r.length=l;return r}},{}],516:[function(b,D,G){function r(m){if(1===m.length)return m[0];if(2===m.length)return["sum(",m[0],",",m[1],")"].join("");var c=m.length>>1;return["sum(",
r(m.slice(0,c)),",",r(m.slice(c)),")"].join("")}function n(m){if(2===m.length)return["sum(prod(",m[0][0],",",m[1][1],"),prod(-",m[0][1],",",m[1][0],"))"].join("");for(var c=[],d=0;d<m.length;++d){for(var g=c,h=g.push,q=m,t=d,v=Array(q.length-1),w=1;w<q.length;++w)for(var A=v[w-1]=Array(q.length-1),z=0,y=0;z<q.length;++z)z!==t&&(A[y++]=q[w][z]);q=n(v);t=d&1?"-":"";h.call(g,["scale(",q,",",t,m[0][d],")"].join(""))}return r(c)}function p(m){for(var c=Function,d=Array(m),g=0;g<m;++g){d[g]=Array(m);for(var h=
0;h<m;++h)d[g][h]=["m[",g,"][",h,"]"].join("")}return(new c("sum","scale","prod","compress",["function robustDeterminant",m,"(m){return compress(",n(d),")};return robustDeterminant",m].join("")))(a,e,k,f)}var k=b("two-product"),a=b("robust-sum"),e=b("robust-scale"),f=b("robust-compress"),l=[function(){return[0]},function(m){return[m[0][0]]}];(function(){for(;6>l.length;)l.push(p(l.length));for(var m=[],c=["function robustDeterminant(m){switch(m.length){"],d=0;6>d;++d)m.push("det"+d),c.push("case ",
d,":return det",d,"(m);");c.push("}var det\x3dCACHE[m.length];if(!det)det\x3dCACHE[m.length]\x3dgen(m.length);return det(m);}return robustDeterminant");m.push("CACHE","gen",c.join(""));m=Function.apply(void 0,m);D.exports=m.apply(void 0,l.concat([l,p]));for(d=0;d<l.length;++d)D.exports[d]=l[d]})()},{"robust-compress":515,"robust-scale":522,"robust-sum":525,"two-product":554}],517:[function(b,D,G){var r=b("two-product"),n=b("robust-sum");D.exports=function(p,k){for(var a=r(p[0],k[0]),e=1;e<p.length;++e)a=
n(a,r(p[e],k[e]));return a}},{"robust-sum":525,"two-product":554}],518:[function(b,D,G){function r(g,h){for(var q=Array(g.length-1),t=1;t<g.length;++t)for(var v=q[t-1]=Array(g.length-1),w=0,A=0;w<g.length;++w)w!==h&&(v[A++]=g[t][w]);return q}function n(g){if(1===g.length)return g[0];if(2===g.length)return["sum(",g[0],",",g[1],")"].join("");var h=g.length>>1;return["sum(",n(g.slice(0,h)),",",n(g.slice(h)),")"].join("")}function p(g,h){return"m"===g.charAt(0)?"w"===h.charAt(0)?(g=g.split("["),["w",
h.substr(1),"m",g[0].substr(1)].join("")):["prod(",g,",",h,")"].join(""):p(h,g)}function k(g){if(2===g.length)return[["diff(",p(g[0][0],g[1][1]),",",p(g[1][0],g[0][1]),")"].join("")];for(var h=[],q=0;q<g.length;++q){var t=h,v=t.push,w=n(k(r(g,q)));var A=q&1?"-":"";v.call(t,["scale(",w,",",A,g[0][q],")"].join(""))}return h}function a(g){for(var h=[],q=[],t=Array(g),v=0;v<g;++v){t[v]=Array(g);for(var w=0;w<g;++w)t[v][w]=["m",w,"[",g-v-2,"]"].join("")}for(v=0;v<g;++v)t[0][v]="1",t[g-1][v]="w"+v;for(v=
0;v<g;++v)0===(v&1)?h.push.apply(h,k(r(t,v))):q.push.apply(q,k(r(t,v)));h=n(h);q=n(q);t="exactInSphere"+g;w=[];for(v=0;v<g;++v)w.push("m"+v);w=["function ",t,"(",w.join(),"){"];for(v=0;v<g;++v){var A=w,z=A.push,y=v;var B=v;for(var C=g,u=[],F=0;F<C-2;++F)u.push(["prod(m",B,"[",F,"],m",B,"[",F,"])"].join(""));B=n(u);z.call(A,"var w",y,"\x3d",B,";");for(A=0;A<g;++A)A!==v&&w.push("var w",v,"m",A,"\x3dscale(w",v,",m",A,"[0]);")}w.push("var p\x3d",h,",n\x3d",q,",d\x3ddiff(p,n);return d[d.length-1];}return ",
t);return(new Function("sum","diff","prod","scale",w.join("")))(l,m,f,c)}function e(g){var h=d[g.length];h||(h=d[g.length]=a(g.length));return h.apply(void 0,g)}var f=b("two-product"),l=b("robust-sum"),m=b("robust-subtract"),c=b("robust-scale"),d=[function(){return 0},function(){return 0},function(){return 0}];(function(){for(;6>=d.length;)d.push(a(d.length));for(var g=[],h=["slow"],q=0;6>=q;++q)g.push("a"+q),h.push("o"+q);var t=["function testInSphere(",g.join(),"){switch(arguments.length){case 0:case 1:return 0;"];
for(q=2;6>=q;++q)t.push("case ",q,":return o",q,"(",g.slice(0,q).join(),");");t.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return testInSphere");h.push(t.join(""));g=Function.apply(void 0,h);D.exports=g.apply(void 0,[e].concat(d));for(q=0;6>=q;++q)D.exports[q]=d[q]})()},{"robust-scale":522,"robust-subtract":524,"robust-sum":525,"two-product":554}],519:[function(b,D,G){function r(k){for(var a="robustLinearSolve"+k+"d",
e=["function ",a,"(A,b){return ["],f=0;f<k;++f){e.push("det([");for(var l=0;l<k;++l){0<l&&e.push(",");e.push("[");for(var m=0;m<k;++m)0<m&&e.push(","),m===f?e.push("+b[",l,"]"):e.push("+A[",l,"][",m,"]");e.push("]")}e.push("]),")}e.push("det(A)]}return ",a);a=new Function("det",e.join(""));return 6>k?a(n[k]):a(n)}var n=b("robust-determinant"),p=[function(){return[0]},function(k,a){return[[a[0]],[k[0][0]]]}];(function(){for(;6>p.length;)p.push(r(p.length));for(var k=[],a=["function dispatchLinearSolve(A,b){switch(A.length){"],
e=0;6>e;++e)k.push("s"+e),a.push("case ",e,":return s",e,"(A,b);");a.push("}var s\x3dCACHE[A.length];if(!s)s\x3dCACHE[A.length]\x3dg(A.length);return s(A,b)}return dispatchLinearSolve");k.push("CACHE","g",a.join(""));k=Function.apply(void 0,k);D.exports=k.apply(void 0,p.concat([p,r]));for(e=0;6>e;++e)D.exports[e]=p[e]})()},{"robust-determinant":516}],520:[function(b,D,G){function r(h,q){for(var t=Array(h.length-1),v=1;v<h.length;++v)for(var w=t[v-1]=Array(h.length-1),A=0,z=0;A<h.length;++A)A!==q&&
(w[z++]=h[v][A]);return t}function n(h){if(1===h.length)return h[0];if(2===h.length)return["sum(",h[0],",",h[1],")"].join("");var q=h.length>>1;return["sum(",n(h.slice(0,q)),",",n(h.slice(q)),")"].join("")}function p(h){if(2===h.length)return[["sum(prod(",h[0][0],",",h[1][1],"),prod(-",h[0][1],",",h[1][0],"))"].join("")];for(var q=[],t=0;t<h.length;++t){var v=q,w=v.push,A=n(p(r(h,t)));var z=t&1?"-":"";w.call(v,["scale(",A,",",z,h[0][t],")"].join(""))}return q}function k(h){for(var q=[],t=[],v=Array(h),
w=0;w<h;++w){v[w]=Array(h);for(var A=0;A<h;++A)v[w][A]=["m",A,"[",h-w-1,"]"].join("")}w=[];for(A=0;A<h;++A)0===(A&1)?q.push.apply(q,p(r(v,A))):t.push.apply(t,p(r(v,A))),w.push("m"+A);q=n(q);t=n(t);h="orientation"+h+"Exact";h=["function ",h,"(",w.join(),"){var p\x3d",q,",n\x3d",t,",d\x3dsub(p,n);return d[d.length-1];};return ",h].join("");return(new Function("sum","prod","scale","sub",h))(f,e,l,m)}function a(h){var q=g[h.length];q||(q=g[h.length]=k(h.length));return q.apply(void 0,h)}var e=b("two-product"),
f=b("robust-sum"),l=b("robust-scale"),m=b("robust-subtract"),c=k(3),d=k(4),g=[function(){return 0},function(){return 0},function(h,q){return q[0]-h[0]},function(h,q,t){var v=(h[1]-t[1])*(q[0]-t[0]),w=(h[0]-t[0])*(q[1]-t[1]),A=v-w;if(0<v){if(0>=w)return A;v+=w}else if(0>v){if(0<=w)return A;v=-(v+w)}else return A;v*=3.3306690738754716E-16;return A>=v||A<=-v?A:c(h,q,t)},function(h,q,t,v){var w=h[0]-v[0],A=q[0]-v[0],z=t[0]-v[0],y=h[1]-v[1],B=q[1]-v[1],C=t[1]-v[1],u=h[2]-v[2],F=q[2]-v[2],H=t[2]-v[2],J=
A*C,I=z*B;z*=y;C*=w;w*=B;y*=A;A=u*(J-I)+F*(z-C)+H*(w-y);u=7.771561172376103E-16*((Math.abs(J)+Math.abs(I))*Math.abs(u)+(Math.abs(z)+Math.abs(C))*Math.abs(F)+(Math.abs(w)+Math.abs(y))*Math.abs(H));return A>u||-A>u?A:d(h,q,t,v)}];(function(){for(;5>=g.length;)g.push(k(g.length));for(var h=[],q=["slow"],t=0;5>=t;++t)h.push("a"+t),q.push("o"+t);var v=["function getOrientation(",h.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(t=2;5>=t;++t)v.push("case ",t,":return o",t,"(",h.slice(0,
t).join(),");");v.push("}var s\x3dnew Array(arguments.length);for(var i\x3d0;i\x3carguments.length;++i){s[i]\x3darguments[i]};return slow(s);}return getOrientation");q.push(v.join(""));h=Function.apply(void 0,q);D.exports=h.apply(void 0,[a].concat(g));for(t=0;5>=t;++t)D.exports[t]=g[t]})()},{"robust-scale":522,"robust-subtract":524,"robust-sum":525,"two-product":554}],521:[function(b,D,G){var r=b("robust-sum"),n=b("robust-scale");D.exports=function(p,k){if(1===p.length)return n(k,p[0]);if(1===k.length)return n(p,
k[0]);if(0===p.length||0===k.length)return[0];var a=[0];if(p.length<k.length)for(var e=0;e<p.length;++e)a=r(a,n(k,p[e]));else for(e=0;e<k.length;++e)a=r(a,n(p,k[e]));return a}},{"robust-scale":522,"robust-sum":525}],522:[function(b,D,G){var r=b("two-product"),n=b("two-sum");D.exports=function(p,k){var a=p.length;if(1===a)return p=r(p[0],k),p[0]?p:[p[1]];var e=Array(2*a),f=[.1,.1],l=[.1,.1],m=0;r(p[0],k,f);f[0]&&(e[m++]=f[0]);for(var c=1;c<a;++c){r(p[c],k,l);n(f[1],l[0],f);f[0]&&(e[m++]=f[0]);var d=
l[1],g=f[1],h=d+g;d=g-(h-d);f[1]=h;d&&(e[m++]=d)}f[1]&&(e[m++]=f[1]);0===m&&(e[m++]=0);e.length=m;return e}},{"two-product":554,"two-sum":555}],523:[function(b,D,G){D.exports=function(n,p,k,a){var e=r(n,k,a),f=r(p,k,a);if(0<e&&0<f||0>e&&0>f)return!1;var l=r(k,n,p),m=r(a,n,p);if(0<l&&0<m||0>l&&0>m)return!1;if(0===e&&0===f&&0===l&&0===m){a:{for(e=0;2>e;++e){f=n[e];l=p[e];m=Math.max(f,l);var c=k[e],d=a[e],g=Math.min(c,d);if(Math.max(c,d)<Math.min(f,l)||m<g){n=!1;break a}}n=!0}return n}return!0};var r=
b("robust-orientation")[3]},{"robust-orientation":520}],524:[function(b,D,G){D.exports=function(r,n){var p=r.length|0,k=n.length|0;if(1===p&&1===k)return r=r[0],p=-n[0],n=r+p,k=n-r,n=(r=r-(n-k)+(p-k))?[r,n]:[n],n;var a=Array(p+k),e=0,f=0,l=0,m=Math.abs,c=r[f],d=m(c),g=-n[l],h=m(g);if(d<h){var q=c;f+=1;f<p&&(c=r[f],d=m(c))}else q=g,l+=1,l<k&&(g=-n[l],h=m(g));if(f<p&&d<h||l>=k){var t=c;f+=1;f<p&&(c=r[f],d=m(c))}else t=g,l+=1,l<k&&(g=-n[l],h=m(g));var v=t+q;q-=v-t;for(var w=v,A;f<p&&l<k;)d<h?(t=c,f+=
1,f<p&&(c=r[f],d=m(c))):(t=g,l+=1,l<k&&(g=-n[l],h=m(g))),v=t+q,t=v-t,(t=q-t)&&(a[e++]=t),t=w+v,A=t-w,q=t-A,v-=A,w-=q,q=w+v,w=t;for(;f<p;)t=c,v=t+q,t=v-t,(t=q-t)&&(a[e++]=t),t=w+v,A=t-w,q=t-A,v-=A,w-=q,q=w+v,w=t,f+=1,f<p&&(c=r[f]);for(;l<k;)t=g,v=t+q,t=v-t,(t=q-t)&&(a[e++]=t),t=w+v,A=t-w,q=t-A,v-=A,w-=q,q=w+v,w=t,l+=1,l<k&&(g=-n[l]);q&&(a[e++]=q);w&&(a[e++]=w);e||(a[e++]=0);a.length=e;return a}},{}],525:[function(b,D,G){D.exports=function(r,n){var p=r.length|0,k=n.length|0;if(1===p&&1===k)return r=
r[0],p=n[0],n=r+p,k=n-r,n=(r=r-(n-k)+(p-k))?[r,n]:[n],n;var a=Array(p+k),e=0,f=0,l=0,m=Math.abs,c=r[f],d=m(c),g=n[l],h=m(g);if(d<h){var q=c;f+=1;f<p&&(c=r[f],d=m(c))}else q=g,l+=1,l<k&&(g=n[l],h=m(g));if(f<p&&d<h||l>=k){var t=c;f+=1;f<p&&(c=r[f],d=m(c))}else t=g,l+=1,l<k&&(g=n[l],h=m(g));var v=t+q;q-=v-t;for(var w=v,A;f<p&&l<k;)d<h?(t=c,f+=1,f<p&&(c=r[f],d=m(c))):(t=g,l+=1,l<k&&(g=n[l],h=m(g))),v=t+q,t=v-t,(t=q-t)&&(a[e++]=t),t=w+v,A=t-w,q=t-A,v-=A,w-=q,q=w+v,w=t;for(;f<p;)t=c,v=t+q,t=v-t,(t=q-t)&&
(a[e++]=t),t=w+v,A=t-w,q=t-A,v-=A,w-=q,q=w+v,w=t,f+=1,f<p&&(c=r[f]);for(;l<k;)t=g,v=t+q,t=v-t,(t=q-t)&&(a[e++]=t),t=w+v,A=t-w,q=t-A,v-=A,w-=q,q=w+v,w=t,l+=1,l<k&&(g=n[l]);q&&(a[e++]=q);w&&(a[e++]=w);e||(a[e++]=0);a.length=e;return a}},{}],526:[function(b,D,G){D.exports=function(r){return 0>r?-1:0<r?1:0}},{}],527:[function(b,D,G){D.exports=function(p){return n(r(p))};var r=b("boundary-cells"),n=b("reduce-simplicial-complex")},{"boundary-cells":100,"reduce-simplicial-complex":507}],528:[function(b,
D,G){D.exports=function(a,e,f,l){f=f||0;if("undefined"===typeof l){for(var m=a.length,c=l=0;c<m;++c)l=Math.max(l,a[c].length)|0;--l}if(0===a.length||1>l)return{cells:[],vertexIds:[],vertexWeights:[]};c=+f;var d=e.length;m=n.mallocUint8(d);for(var g=0;g<d;++g)m[g]=e[g]<c|0;var h=l,q=a.length;c=n.mallocUint32(2*(h*(h+1)/2*q|0));for(g=d=0;g<q;++g){var t=a[g];h=t.length;for(var v=0;v<h;++v)for(var w=0;w<v;++w){var A=t[w],z=t[v];c[d++]=Math.min(A,z)|0;c[d++]=Math.max(A,z)|0}}p(r(c,[d/2|0,2]));for(g=h=
2;g<d;g+=2)if(c[g-2]!==c[g]||c[g-1]!==c[g+1])c[h++]=c[g],c[h++]=c[g+1];c=r(c,[h/2|0,2]);f=+f;d=c.data;g=c.shape[0];h=n.mallocDouble(g);for(t=q=0;t<g;++t)v=d[2*t],w=d[2*t+1],m[v]!==m[w]&&(A=e[v],z=e[w],d[2*q]=v,d[2*q+1]=w,h[q++]=(z-f)/(z-A));c.shape[0]=q;f=r(h,[q]);d=e.length|0;e=n.mallocInt32(2*d);g=c.shape[0];h=c.data;for(t=q=e[0]=0;t<g;++t)if(v=h[2*t],v!==q){for(e[2*q+1]=t;++q<v;)e[2*q]=t,e[2*q+1]=t;e[2*q]=t}for(e[2*q+1]=g;++q<d;)e[2*q]=e[2*q+1]=g;a=k(l)(a,c.data,e,m);d=c.shape[0]|0;g=c.data;l=
Array(d);for(h=0;h<d;++h)l[h]=[g[2*h],g[2*h+1]];d=[].slice.call(f.data,0,f.shape[0]);n.free(m);n.free(c.data);n.free(f.data);n.free(e);return{cells:a,vertexIds:l,vertexWeights:d}};var r=b("ndarray"),n=b("typedarray-pool"),p=b("ndarray-sort"),k=b("./lib/codegen")},{"./lib/codegen":529,ndarray:469,"ndarray-sort":468,"typedarray-pool":567}],529:[function(b,D,G){D.exports=function(k){var a=p[k];if(!a){a=p;var e=Array(k+1);e[0]=[[]];for(var f=1;f<=k;++f)for(var l=e[f]=n(f),m=0;m<l.length;++m);var c=["function B(C,E,i,j){",
"var a\x3dMath.min(i,j)|0,b\x3dMath.max(i,j)|0,l\x3dC[2*a],h\x3dC[2*a+1];","while(l\x3ch){","var m\x3d(l+h)\x3e\x3e1,v\x3dE[2*m+1];","if(v\x3d\x3d\x3db){return m}","if(b\x3cv){h\x3dm}else{l\x3dm+1}","}","return l;","};","function getContour",k,"d(F,E,C,S){","var n\x3dF.length,R\x3d[];","for(var i\x3d0;i\x3cn;++i){var c\x3dF[i],l\x3dc.length;"];for(f=k+1;1<f;--f){f<k+1&&c.push("else ");c.push("if(l\x3d\x3d\x3d",f,"){");l=[];for(m=0;m<f;++m)l.push("(S[c["+m+"]]\x3c\x3c"+m+")");c.push("var M\x3d",l.join("+"),
";if(M\x3d\x3d\x3d0||M\x3d\x3d\x3d",(1<<f)-1,"){continue}switch(M){");l=e[f-1];for(m=0;m<l.length;++m){c.push("case ",m,":");var d=l[m];if(!(0>=d.length)){c.push("R.push(");for(var g=0;g<d.length;++g){var h=d[g];0<g&&c.push(",");c.push("[");for(var q=0;q<h.length;++q){var t=h[q];0<q&&c.push(",");c.push("B(C,E,c[",t[0],"],c[",t[1],"])")}c.push("]")}c.push(");")}c.push("break;")}c.push("}}")}c.push("}return R;};return getContour",k,"d");e=(new Function("pool",c.join("")))(r);a=a[k]=e}return a};var r=
b("typedarray-pool"),n=b("marching-simplex-table"),p={}},{"marching-simplex-table":448,"typedarray-pool":567}],530:[function(b,D,G){function r(c,d){var g=c.length,h=c.length-d.length,q=Math.min;if(h)return h;switch(g){case 0:return 0;case 1:return c[0]-d[0];case 2:return(g=c[0]+c[1]-d[0]-d[1])?g:q(c[0],c[1])-q(d[0],d[1]);case 3:h=c[0]+c[1];var t=d[0]+d[1];if(g=h+c[2]-(t+d[2]))return g;var v=q(c[0],c[1]),w=q(d[0],d[1]);return(g=q(v,c[2])-q(w,d[2]))?g:q(v+c[2],h)-q(w+d[2],t);default:c=c.slice(0);c.sort();
d=d.slice(0);d.sort();for(q=0;q<g;++q)if(h=c[q]-d[q])return h;return 0}}function n(c,d){return r(c[0],d[0])}function p(c,d){if(d){for(var g=c.length,h=Array(g),q=0;q<g;++q)h[q]=[c[q],d[q]];h.sort(n);for(q=0;q<g;++q)c[q]=h[q][0],d[q]=h[q][1]}else c.sort(r);return c}function k(c){if(0===c.length)return[];for(var d=1,g=c.length,h=1;h<g;++h){var q=c[h];r(q,c[h-1])&&(h===d?d++:c[d++]=q)}c.length=d;return c}function a(c,d){for(var g=0,h=c.length-1,q=-1;g<=h;){var t=g+h>>1,v=r(c[t],d);0>=v?(0===v&&(q=t),
g=t+1):0<v&&(h=t-1)}return q}function e(c,d){for(var g=Array(c.length),h=0,q=g.length;h<q;++h)g[h]=[];q=[];h=0;for(var t=d.length;h<t;++h)for(var v=d[h],w=v.length,A=1,z=1<<w;A<z;++A){q.length=l.popCount(A);for(var y=0,B=0;B<w;++B)A&1<<B&&(q[y++]=v[B]);y=a(c,q);if(!(0>y))for(;!(g[y++].push(h),y>=c.length||0!==r(c[y],q)););}return g}function f(c,d){if(0>d)return[];for(var g=[],h=(1<<d+1)-1,q=0;q<c.length;++q)for(var t=c[q],v=h;v<1<<t.length;v=l.nextCombination(v)){for(var w=Array(d+1),A=0,z=0;z<t.length;++z)v&
1<<z&&(w[A++]=t[z]);g.push(w)}return p(g)}"use restrict";var l=b("bit-twiddle"),m=b("union-find");G.dimension=function(c){for(var d=0,g=Math.max,h=0,q=c.length;h<q;++h)d=g(d,c[h].length);return d-1};G.countVertices=function(c){for(var d=-1,g=Math.max,h=0,q=c.length;h<q;++h)for(var t=c[h],v=0,w=t.length;v<w;++v)d=g(d,t[v]);return d+1};G.cloneCells=function(c){for(var d=Array(c.length),g=0,h=c.length;g<h;++g)d[g]=c[g].slice(0);return d};G.compareCells=r;G.normalize=p;G.unique=k;G.findCell=a;G.incidence=
e;G.dual=function(c,d){if(!d)return e(k(f(c,0)),c,0);for(var g=Array(d),h=0;h<d;++h)g[h]=[];h=0;for(d=c.length;h<d;++h)for(var q=c[h],t=0,v=q.length;t<v;++t)g[q[t]].push(h);return g};G.explode=function(c){for(var d=[],g=0,h=c.length;g<h;++g)for(var q=c[g],t=q.length|0,v=1,w=1<<t;v<w;++v){for(var A=[],z=0;z<t;++z)v>>>z&1&&A.push(q[z]);d.push(A)}return p(d)};G.skeleton=f;G.boundary=function(c){for(var d=[],g=0,h=c.length;g<h;++g)for(var q=c[g],t=0,v=q.length;t<v;++t){for(var w=Array(q.length-1),A=0,
z=0;A<v;++A)A!==t&&(w[z++]=q[A]);d.push(w)}return p(d)};G.connectedComponents=function(c,d){if(d){d=new m(d);for(var g=0;g<c.length;++g)for(var h=c[g],q=0;q<h.length;++q)for(var t=q+1;t<h.length;++t)d.link(h[q],h[t]);h=[];q=d.ranks;for(g=0;g<q.length;++g)q[g]=-1;for(g=0;g<c.length;++g)t=d.find(c[g][0]),0>q[t]?(q[t]=h.length,h.push([c[g].slice(0)])):h[q[t]].push(c[g].slice(0));return h}d=k(p(f(c,0)));g=new m(d.length);for(h=0;h<c.length;++h)for(q=c[h],t=0;t<q.length;++t)for(var v=a(d,[q[t]]),w=t+1;w<
q.length;++w)g.link(v,a(d,[q[w]]));q=[];t=g.ranks;for(h=0;h<t.length;++h)t[h]=-1;for(h=0;h<c.length;++h)v=g.find(a(d,[c[h][0]])),0>t[v]?(t[v]=q.length,q.push([c[h].slice(0)])):q[t[v]].push(c[h].slice(0));return q}},{"bit-twiddle":97,"union-find":568}],531:[function(b,D,G){arguments[4][97][0].apply(G,arguments)},{dup:97}],532:[function(b,D,G){arguments[4][530][0].apply(G,arguments)},{"bit-twiddle":531,dup:530,"union-find":533}],533:[function(b,D,G){function r(n){this.roots=Array(n);this.ranks=Array(n);
for(var p=0;p<n;++p)this.roots[p]=p,this.ranks[p]=0}"use restrict";D.exports=r;r.prototype.length=function(){return this.roots.length};r.prototype.makeSet=function(){var n=this.roots.length;this.roots.push(n);this.ranks.push(0);return n};r.prototype.find=function(n){for(var p=this.roots;p[n]!==n;){var k=p[n];p[n]=p[k];n=k}return n};r.prototype.link=function(n,p){n=this.find(n);p=this.find(p);if(n!==p){var k=this.ranks,a=this.roots,e=k[n],f=k[p];e<f?a[n]=p:f<e?a[p]=n:(a[p]=n,++k[n])}}},{}],534:[function(b,
D,G){D.exports=function(p,k,a){function e(I){if(z[I])return Infinity;var M=v[I],E=w[I];if(0>M||0>E)return Infinity;M=k[M];E=k[E];return Math.abs(r(k[I],M,E))/Math.sqrt(Math.pow(M[0]-E[0],2)+Math.pow(M[1]-E[1],2))}function f(I,M){var E=u[I],L=u[M];u[I]=L;u[M]=E;F[E]=M;F[L]=I}function l(I){for(var M=A[u[I]];;){var E=M,L=2*I+1,P=2*(I+1),N=I;if(L<H){var Q=A[u[L]];Q<E&&(N=L,E=Q)}P<H&&A[u[P]]<E&&(N=P);if(N===I)return I;f(I,N);I=N}}function m(I){for(var M=A[u[I]];0<I;){var E=I&1?I-1>>1:(I>>1)-1;if(0<=E&&
M<A[u[E]])f(I,E),I=E;else return I}}function c(){if(0<H){var I=u[0];f(0,H-1);--H;l(0);return I}return-1}function d(I,M){var E=u[I];if(A[E]===M)return I;A[E]=-Infinity;m(I);c();A[E]=M;H+=1;return m(H-1)}function g(I){if(!z[I]){z[I]=!0;var M=v[I];I=w[I];0<=v[I]&&(v[I]=M);0<=w[M]&&(w[M]=I);0<=F[M]&&d(F[M],e(M));0<=F[I]&&d(F[I],e(I))}}function h(I,M){if(0>I[M])return M;var E=M,L=M;do{var P=I[L];if(!z[L]||0>P||P===L)break;L=P;P=I[L];if(!z[L]||0>P||P===L)break;L=P;E=I[E]}while(E!==L);for(;M!==L;M=I[M])I[M]=
L;return L}for(var q=k.length,t=p.length,v=Array(q),w=Array(q),A=Array(q),z=Array(q),y=0;y<q;++y)v[y]=w[y]=-1,A[y]=Infinity,z[y]=!1;for(y=0;y<t;++y){var B=p[y];if(2!==B.length)throw Error("Input must be a graph");var C=B[1];B=B[0];w[B]=-1!==w[B]?-2:C;v[C]=-1!==v[C]?-2:B}var u=[],F=Array(q);for(y=0;y<q;++y)Infinity>(A[y]=e(y))?(F[y]=u.length,u.push(y)):F[y]=-1;var H=u.length;for(y=H>>1;0<=y;--y)l(y);for(;;){y=c();if(0>y||A[y]>a)break;g(y)}a=[];for(y=0;y<q;++y)z[y]||(F[y]=a.length,a.push(k[y].slice()));
var J=[];p.forEach(function(I){var M=h(v,I[0]);I=h(w,I[1]);0<=M&&0<=I&&M!==I&&(M=F[M],I=F[I],M!==I&&J.push([M,I]))});n.unique(n.normalize(J));return{positions:a,edges:J}};var r=b("robust-orientation"),n=b("simplicial-complex")},{"robust-orientation":520,"simplicial-complex":532}],535:[function(b,D,G){function r(p,k){if(k[0][0]<k[1][0]){var a=k[0];k=k[1]}else if(k[0][0]>k[1][0])a=k[1],k=k[0];else{a=Math.min(p[0][1],p[1][1]);p=Math.max(p[0][1],p[1][1]);var e=Math.min(k[0][1],k[1][1]);k=Math.max(k[0][1],
k[1][1]);return p<e?p-e:a>k?a-k:p-k}p[0][1]<p[1][1]?(e=p[0],p=p[1]):(e=p[1],p=p[0]);return(e=n(k,a,e))?e:(e=n(k,a,p))?e:p-k}D.exports=function(p,k){if(k[0][0]<k[1][0]){var a=k[0];var e=k[1]}else if(k[0][0]>k[1][0])a=k[1],e=k[0];else return r(k,p);if(p[0][0]<p[1][0])k=p[0],p=p[1];else if(p[0][0]>p[1][0])k=p[1],p=p[0];else return-r(p,k);var f=n(a,e,p),l=n(a,e,k);if(0>f){if(0>=l)return f}else if(0<f){if(0<=l)return f}else if(l)return l;f=n(p,k,e);l=n(p,k,a);if(0>f){if(0>=l)return f}else if(0<f){if(0<=
l)return f}else if(l)return l;return e[0]-p[0]};var n=b("robust-orientation")},{"robust-orientation":520}],536:[function(b,D,G){arguments[4][243][0].apply(G,arguments)},{dup:243}],537:[function(b,D,G){function r(c,d,g){this.slabs=c;this.coordinates=d;this.horizontal=g}function n(c,d){return c.y-d}function p(c,d){for(var g=null;c;){var h=c.key;if(h[0][0]<h[1][0]){var q=h[0];var t=h[1]}else q=h[1],t=h[0];q=l(q,t,d);if(0>q)c=c.left;else if(0<q)if(d[0]!==h[1][0])g=c,c=c.right;else{if(h=p(c.right,d))return h;
c=c.left}else{if(d[0]!==h[1][0])return c;if(h=p(c.right,d))return h;c=c.left}}return g}function k(c,d,g,h){this.y=c;this.index=d;this.start=g;this.closed=h}function a(c,d,g,h){this.x=c;this.segment=d;this.create=g;this.index=h}D.exports=function(c){for(var d=c.length,g=2*d,h=Array(g),q=0;q<d;++q){var t=c[q],v=t[0][0]<t[1][0];h[2*q]=new a(t[0][0],t,v,q);h[2*q+1]=new a(t[1][0],t,!v,q)}h.sort(function(y,B){var C=y.x-B.x;return C?C:(C=y.create-B.create)?C:Math.min(y.segment[0][1],y.segment[1][1])-Math.min(B.segment[0][1],
B.segment[1][1])});c=f(m);d=[];t=[];v=[];for(q=0;q<g;){for(var w=h[q].x,A=[];q<g;){var z=h[q];if(z.x!==w)break;q+=1;z.segment[0][0]===z.x&&z.segment[1][0]===z.x?z.create&&(z.segment[0][1]<z.segment[1][1]?(A.push(new k(z.segment[0][1],z.index,!0,!0)),A.push(new k(z.segment[1][1],z.index,!1,!1))):(A.push(new k(z.segment[1][1],z.index,!0,!1)),A.push(new k(z.segment[0][1],z.index,!1,!0)))):c=z.create?c.insert(z.segment,z.index):c.remove(z.segment)}d.push(c.root);t.push(w);v.push(A)}return new r(d,t,v)};
var e=b("binary-search-bounds"),f=b("functional-red-black-tree"),l=b("robust-orientation"),m=b("./lib/order-segments");r.prototype.castUp=function(c){var d=e.le(this.coordinates,c[0]);if(0>d)return-1;var g=p(this.slabs[d],c),h=-1;g&&(h=g.value);if(this.coordinates[d]===c[0]){var q=null;g&&(q=g.key);0<d&&(g=p(this.slabs[d-1],c))&&(q?0<m(g.key,q)&&(q=g.key,h=g.value):(h=g.value,q=g.key));g=this.horizontal[d];if(0<g.length){var t=e.ge(g,c[1],n);if(t<g.length){d=g[t];if(c[1]===d.y){if(d.closed)return d.index;
for(;t<g.length-1&&g[t+1].y===c[1];)if(t+=1,d=g[t],d.closed)return d.index;if(d.y===c[1]&&!d.start){t+=1;if(t>=g.length)return h;d=g[t]}}d.start?q?(c=l(q[0],q[1],[c[0],d.y]),q[0][0]>q[1][0]&&(c=-c),0<c&&(h=d.index)):h=d.index:d.y!==c[1]&&(h=d.index)}}}return h}},{"./lib/order-segments":535,"binary-search-bounds":536,"functional-red-black-tree":247,"robust-orientation":520}],538:[function(b,D,G){function r(a,e){a=k(p(a,e),[e[e.length-1]]);return a[a.length-1]}function n(a,e,f,l){e=-e/(l-e);0>e?e=0:
1<e&&(e=1);l=1-e;for(var m=a.length,c=Array(m),d=0;d<m;++d)c[d]=e*a[d]+l*f[d];return c}var p=b("robust-dot-product"),k=b("robust-sum");D.exports=function(a,e){for(var f=[],l=[],m=r(a[a.length-1],e),c=a[a.length-1],d,g=0;g<a.length;++g,c=d){d=a[g];var h=r(d,e);if(0>m&&0<h||0<m&&0>h)m=n(c,h,d,m),f.push(m),l.push(m.slice());0>h?l.push(d.slice()):0<h?f.push(d.slice()):(f.push(d.slice()),l.push(d.slice()));m=h}return{positive:f,negative:l}};D.exports.positive=function(a,e){for(var f=[],l=r(a[a.length-
1],e),m=a[a.length-1],c,d=0;d<a.length;++d,m=c){c=a[d];var g=r(c,e);(0>l&&0<g||0<l&&0>g)&&f.push(n(m,g,c,l));0<=g&&f.push(c.slice());l=g}return f};D.exports.negative=function(a,e){for(var f=[],l=r(a[a.length-1],e),m=a[a.length-1],c,d=0;d<a.length;++d,m=c){c=a[d];var g=r(c,e);(0>l&&0<g||0<l&&0>g)&&f.push(n(m,g,c,l));0>=g&&f.push(c.slice());l=g}return f}},{"robust-dot-product":517,"robust-sum":525}],539:[function(b,D,G){!function(){function r(a){var e=a;if(k[e])e=k[e];else{for(var f=e,l,m=[],c=0;f;){if(null!==
(l=p.text.exec(f)))m.push(l[0]);else if(null!==(l=p.modulo.exec(f)))m.push("%");else if(null!==(l=p.placeholder.exec(f))){if(l[2]){c|=1;var d=[],g=l[2],h;if(null!==(h=p.key.exec(g)))for(d.push(h[1]);""!==(g=g.substring(h[0].length));)if(null!==(h=p.key_access.exec(g)))d.push(h[1]);else if(null!==(h=p.index_access.exec(g)))d.push(h[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");l[2]=d}else c|=
2;if(3===c)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");m.push({placeholder:l[0],param_no:l[1],keys:l[2],sign:l[3],pad_char:l[4],align:l[5],width:l[6],precision:l[7],type:l[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");f=f.substring(l[0].length)}e=k[e]=m}f=arguments;l=1;m=e.length;d="";var q,t;for(g=0;g<m;g++)if("string"===typeof e[g])d+=e[g];else if("object"===typeof e[g]){h=e[g];if(h.keys)for(c=f[l],q=0;q<h.keys.length;q++){if(void 0==
c)throw Error(r('[sprintf] Cannot access property "%s" of undefined value "%s"',h.keys[q],h.keys[q-1]));c=c[h.keys[q]]}else c=h.param_no?f[h.param_no]:f[l++];p.not_type.test(h.type)&&p.not_primitive.test(h.type)&&c instanceof Function&&(c=c());if(p.numeric_arg.test(h.type)&&"number"!==typeof c&&isNaN(c))throw new TypeError(r("[sprintf] expecting number but found %T",c));p.number.test(h.type)&&(t=0<=c);switch(h.type){case "b":c=parseInt(c,10).toString(2);break;case "c":c=String.fromCharCode(parseInt(c,
10));break;case "d":case "i":c=parseInt(c,10);break;case "j":c=JSON.stringify(c,null,h.width?parseInt(h.width):0);break;case "e":c=h.precision?parseFloat(c).toExponential(h.precision):parseFloat(c).toExponential();break;case "f":c=h.precision?parseFloat(c).toFixed(h.precision):parseFloat(c);break;case "g":c=h.precision?String(Number(c.toPrecision(h.precision))):parseFloat(c);break;case "o":c=(parseInt(c,10)>>>0).toString(8);break;case "s":c=String(c);c=h.precision?c.substring(0,h.precision):c;break;
case "t":c=String(!!c);c=h.precision?c.substring(0,h.precision):c;break;case "T":c=Object.prototype.toString.call(c).slice(8,-1).toLowerCase();c=h.precision?c.substring(0,h.precision):c;break;case "u":c=parseInt(c,10)>>>0;break;case "v":c=c.valueOf();c=h.precision?c.substring(0,h.precision):c;break;case "x":c=(parseInt(c,10)>>>0).toString(16);break;case "X":c=(parseInt(c,10)>>>0).toString(16).toUpperCase()}if(p.json.test(h.type))d+=c;else{if(!p.number.test(h.type)||t&&!h.sign)var v="";else v=t?"+":
"-",c=c.toString().replace(p.sign,"");q=h.pad_char?"0"===h.pad_char?"0":h.pad_char.charAt(1):" ";var w=h.width-(v+c).length;w=h.width?0<w?q.repeat(w):"":"";d+=h.align?v+c+w:"0"===q?v+w+c:w+v+c}}return d}function n(a,e){return r.apply(null,[a].concat(e||[]))}var p={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,
key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/},k=Object.create(null);"undefined"!==typeof G&&(G.sprintf=r,G.vsprintf=n);"undefined"!==typeof window&&(window.sprintf=r,window.vsprintf=n)}()},{}],540:[function(b,D,G){var r=b("parenthesis");D.exports=function(n,p,k){if(null==n)throw Error("First argument should be a string");if(null==p)throw Error("Separator should be a string or a RegExp");if(!k)k={};else if("string"===typeof k||Array.isArray(k))k=
{ignore:k};null==k.escape&&(k.escape=!0);null==k.ignore?k.ignore="[] () {} \x3c\x3e \"\" '' `` “” «»".split(" "):("string"===typeof k.ignore&&(k.ignore=[k.ignore]),k.ignore=k.ignore.map(function(m){1===m.length&&(m+=m);return m}));n=r.parse(n,{flat:!0,brackets:k.ignore});var a=n[0].split(p);if(k.escape){k=[];for(var e=0;e<a.length;e++){var f=a[e],l=a[e+1];"\\"===f[f.length-1]&&"\\"!==f[f.length-2]?(k.push(f+p+l),e++):k.push(f)}a=k}for(e=0;e<a.length;e++)n[0]=a[e],a[e]=r.stringify(n,{flat:!0});return a}},
{parenthesis:477}],541:[function(b,D,G){D.exports=function(r){function n(v){var w=[v],A=[v];k[v]=a[v]=d;e[v]=!0;for(d+=1;0<A.length;){v=A[A.length-1];var z=r[v];if(f[v]<z.length){for(var y=f[v];y<z.length;++y){var B=z[y];if(0>k[B]){k[B]=a[B]=d;e[B]=!0;d+=1;w.push(B);A.push(B);break}else e[B]&&(a[v]=Math.min(a[v],a[B])|0);0<=l[B]&&m[v].push(l[B])}f[v]=y}else{if(a[v]===k[v]){var C=[];z=[];B=0;for(y=w.length-1;0<=y;--y){var u=w[y];e[u]=!1;C.push(u);z.push(m[u]);B+=m[u].length;l[u]=g.length;if(u===v){w.length=
y;break}}g.push(C);v=Array(B);for(y=0;y<z.length;y++)for(C=0;C<z[y].length;C++)v[--B]=z[y][C];h.push(v)}A.pop()}}}for(var p=r.length,k=Array(p),a=Array(p),e=Array(p),f=Array(p),l=Array(p),m=Array(p),c=0;c<p;++c)k[c]=-1,a[c]=0,e[c]=!1,f[c]=0,l[c]=-1,m[c]=[];var d=0,g=[],h=[];for(c=0;c<p;++c)0>k[c]&&n(c);for(c=0;c<h.length;c++){var q=h[c];if(0!==q.length){q.sort(function(v,w){return v-w});p=[q[0]];for(var t=1;t<q.length;t++)q[t]!==q[t-1]&&p.push(q[t]);h[c]=p}}return{components:g,adjacencyList:h}}},
{}],542:[function(b,D,G){function r(e,f){var l=e.length,m=["'use strict';"],c="surfaceNets"+e.join("_")+"d"+f;m.push("var contour\x3dgenContour({","order:[",e.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p \x3e c)|0 },");"generic"===f&&m.push("getters:[0],");var d=[];f=[];for(e=0;e<l;++e)d.push("d"+e),f.push("d"+e);for(e=0;e<1<<l;++e)d.push("v"+e),f.push("v"+e);for(e=0;e<1<<l;++e)d.push("p"+e),f.push("p"+e);d.push("a","b","c");f.push("a","c");m.push("vertex:function vertexFunc(",
d.join(),"){");d=[];for(e=0;e<1<<l;++e)d.push("(p"+e+"\x3c\x3c"+e+")");m.push("var m\x3d(",d.join("+"),")|0;if(m\x3d\x3d\x3d0||m\x3d\x3d\x3d",(1<<(1<<l))-1,"){return}");d=[];var g=[];128>=1<<(1<<l)?(m.push("switch(m){"),g=m):m.push("switch(m\x3e\x3e\x3e7){");for(e=0;e<1<<(1<<l);++e){128<1<<(1<<l)&&0===e%128&&(0<d.length&&g.push("}}"),g="vExtra"+d.length,m.push("case ",e>>>7,":",g,"(m\x260x7f,",f.join(),");break;"),g=["function ",g,"(m,",f.join(),"){switch(m){"],d.push(g));g.push("case ",e&127,":");
for(var h=Array(l),q=Array(l),t=Array(l),v=Array(l),w=0,A=0;A<l;++A)h[A]=[],q[A]=[],t[A]=0,v[A]=0;for(A=0;A<1<<l;++A)for(var z=0;z<l;++z){var y=A^1<<z;if(!(y>A)&&!(e&1<<y)!==!(e&1<<A)){var B=1;e&1<<y?q[z].push("v"+y+"-v"+A):(q[z].push("v"+A+"-v"+y),B=-B);0>B?(h[z].push("-v"+A+"-v"+y),t[z]+=2):(h[z].push("v"+A+"+v"+y),t[z]-=2);w+=1;for(B=0;B<l;++B)B!==z&&(y&1<<B?v[B]+=1:--v[B])}}A=[];for(z=0;z<l;++z)0===h[z].length?A.push("d"+z+"-0.5"):(y="",0>t[z]?y=t[z]+"*c":0<t[z]&&(y="+"+t[z]+"*c"),A.push("d"+
z+"-"+(.5+v[z]/w*.5)+"-"+h[z].length/w*.5+"*("+h[z].join("+")+y+")/("+q[z].join("+")+")"));g.push("a.push([",A.join(),"]);","break;")}m.push("}},");0<d.length&&g.push("}}");f=[];for(e=0;e<1<<l-1;++e)f.push("v"+e);f.push("c0","c1","p0","p1","a","b","c");m.push("cell:function cellFunc(",f.join(),"){");l=p(l-1);m.push("if(p0){b.push(",l.map(function(C){return"["+C.map(function(u){return"v"+u})+"]"}).join(),")}else{b.push(",l.map(function(C){C=C.slice();C.reverse();return"["+C.map(function(u){return"v"+
u})+"]"}).join(),")}}});function ",c,"(array,level){var verts\x3d[],cells\x3d[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",c,";");for(e=0;e<d.length;++e)m.push(d[e].join(""));return(new Function("genContour",m.join("")))(n)}D.exports=function(e,f){if(0>=e.dimension)return{positions:[],cells:[]};if(1===e.dimension){e=k(e,f);f=e.length;for(var l=Array(f),m=Array(f),c=0;c<f;++c)l[c]=[e[c]],m[c]=[c];return{positions:l,cells:m}}l=e.order.join()+"-"+e.dtype;m=a[l];
f=+f||0;m||(m=a[l]=r(e.order,e.dtype));return m(e,f)};var n=b("ndarray-extract-contour"),p=b("triangulate-hypercube"),k=b("zero-crossings"),a={}},{"ndarray-extract-contour":461,"triangulate-hypercube":552,"zero-crossings":596}],543:[function(b,D,G){Object.defineProperty(G,"__esModule",{value:!0});var r=function(){return function(f,l){if(Array.isArray(f))return f;if(Symbol.iterator in Object(f)){var m=[],c=!0,d=!1,g=void 0;try{for(var h=f[Symbol.iterator](),q;!(c=(q=h.next()).done)&&(m.push(q.value),
!l||m.length!==l);c=!0);}catch(t){d=!0,g=t}finally{try{if(!c&&h["return"])h["return"]()}finally{if(d)throw g;}}return m}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),n=2*Math.PI,p=function(f,l,m,c,d,g,h){var q=f.x;f=f.y;q*=l;f*=m;return{x:c*q-d*f+g,y:d*q+c*f+h}},k=function(f,l){var m=1.5707963267948966===l?.551915024494:-1.5707963267948966===l?-.551915024494:4/3*Math.tan(l/4),c=Math.cos(f),d=Math.sin(f),g=Math.cos(f+l);f=Math.sin(f+l);return[{x:c-d*m,y:d+c*m},{x:g+
f*m,y:f-g*m},{x:g,y:f}]},a=function(f,l,m,c){var d=f*m+l*c;1<d&&(d=1);-1>d&&(d=-1);return(0>f*c-l*m?-1:1)*Math.acos(d)},e=function(f,l,m,c,d,g,h,q,t,v,w,A){var z=Math.pow(d,2),y=Math.pow(g,2),B=Math.pow(w,2),C=Math.pow(A,2),u=z*y-z*C-y*B;0>u&&(u=0);u=Math.sqrt(u/(z*C+y*B))*(h===q?-1:1);h=u*d/g*A;u=u*-g/d*w;f=v*h-t*u+(f+m)/2;l=t*h+v*u+(l+c)/2;c=(w-h)/d;t=(A-u)/g;d=(-w-h)/d;A=(-A-u)/g;g=a(1,0,c,t);A=a(c,t,d,A);0===q&&0<A&&(A-=n);1===q&&0>A&&(A+=n);return[f,l,g,A]};G.default=function(f){var l=f.px,m=
f.py,c=f.cx,d=f.cy,g=f.rx,h=f.ry,q=f.xAxisRotation,t=void 0===q?0:q;q=f.largeArcFlag;var v=f.sweepFlag;f=[];if(0===g||0===h)return[];var w=Math.sin(t*n/360),A=Math.cos(t*n/360);t=A*(l-c)/2+w*(m-d)/2;var z=-w*(l-c)/2+A*(m-d)/2;if(0===t&&0===z)return[];g=Math.abs(g);h=Math.abs(h);var y=Math.pow(t,2)/Math.pow(g,2)+Math.pow(z,2)/Math.pow(h,2);1<y&&(g*=Math.sqrt(y),h*=Math.sqrt(y));l=e(l,m,c,d,g,h,void 0===q?0:q,void 0===v?0:v,w,A,t,z);m=r(l,4);var B=m[0],C=m[1];l=m[2];m=m[3];c=Math.abs(m)/(n/4);1E-7>
Math.abs(1-c)&&(c=1);c=Math.max(Math.ceil(c),1);m/=c;for(d=0;d<c;d++)f.push(k(l,m)),l+=m;return f.map(function(u){var F=p(u[0],g,h,A,w,B,C),H=F.x;F=F.y;var J=p(u[1],g,h,A,w,B,C),I=J.x;J=J.y;u=p(u[2],g,h,A,w,B,C);return{x1:H,y1:F,x2:I,y2:J,x:u.x,y:u.y}})};D.exports=G.default},{}],544:[function(b,D,G){var r=b("parse-svg-path"),n=b("abs-svg-path"),p=b("normalize-svg-path"),k=b("is-svg-path"),a=b("assert");D.exports=function(e){Array.isArray(e)&&1===e.length&&"string"===typeof e[0]&&(e=e[0]);"string"===
typeof e&&(a(k(e),"String is not an SVG path."),e=r(e));a(Array.isArray(e),"Argument should be a string or an array of path segments.");e=n(e);e=p(e);if(!e.length)return[0,0,0,0];for(var f=[Infinity,Infinity,-Infinity,-Infinity],l=0,m=e.length;l<m;l++)for(var c=e[l].slice(1),d=0;d<c.length;d+=2)c[d+0]<f[0]&&(f[0]=c[d+0]),c[d+1]<f[1]&&(f[1]=c[d+1]),c[d+0]>f[2]&&(f[2]=c[d+0]),c[d+1]>f[3]&&(f[3]=c[d+1]);return f}},{"abs-svg-path":65,assert:73,"is-svg-path":445,"normalize-svg-path":545,"parse-svg-path":479}],
545:[function(b,D,G){function r(k,a,e,f){return["C",k,a,e,f,e,f]}function n(k,a,e,f,l,m){return["C",k/3+2/3*e,a/3+2/3*f,l/3+2/3*e,m/3+2/3*f,l,m]}D.exports=function(k){for(var a,e=[],f=0,l=0,m=0,c=0,d=null,g=null,h=0,q=0,t=0,v=k.length;t<v;t++){var w=k[t],A=w[0];switch(A){case "M":m=w[1];c=w[2];break;case "A":var z=p({px:h,py:q,cx:w[6],cy:w[7],rx:w[1],ry:w[2],xAxisRotation:w[3],largeArcFlag:w[4],sweepFlag:w[5]});if(!z.length)continue;for(a=0;a<z.length;a++)w=z[a],w=["C",w.x1,w.y1,w.x2,w.y2,w.x,w.y],
a<z.length-1&&e.push(w);break;case "S":z=h;if("C"==a||"S"==a)z+=z-f,q+=q-l;w=["C",z,q,w[1],w[2],w[3],w[4]];break;case "T":"Q"==a||"T"==a?(d=2*h-d,g=2*q-g):(d=h,g=q);w=n(h,q,d,g,w[1],w[2]);break;case "Q":d=w[1];g=w[2];w=n(h,q,w[1],w[2],w[3],w[4]);break;case "L":w=r(h,q,w[1],w[2]);break;case "H":w=r(h,q,w[1],q);break;case "V":w=r(h,q,h,w[1]);break;case "Z":w=r(h,q,m,c)}a=A;h=w[w.length-2];q=w[w.length-1];4<w.length?(f=w[w.length-4],l=w[w.length-3]):(f=h,l=q);e.push(w)}return e};var p=b("svg-arc-to-cubic-bezier")},
{"svg-arc-to-cubic-bezier":543}],546:[function(b,D,G){function r(){if(null!=m)return m;var c=document.createElement("canvas").getContext("2d");c.canvas.width=c.canvas.height=1;if(!window.Path2D)return m=!1;var d=new Path2D("M0,0h1v1h-1v-1Z");c.fillStyle="black";c.fill(d);return m=(c=c.getImageData(0,0,1,1))&&c.data&&255===c.data[3]}var n=b("svg-path-bounds"),p=b("parse-svg-path"),k=b("draw-svg-path"),a=b("is-svg-path"),e=b("bitmap-sdf"),f=document.createElement("canvas"),l=f.getContext("2d");D.exports=
function(c,d){if(!a(c))throw Error("Argument should be valid svg path string");d||(d={});if(d.shape){var g=d.shape[0];var h=d.shape[1]}else g=f.width=d.w||d.width||200,h=f.height=d.h||d.height||200;var q=Math.min(g,h),t=d.stroke||0,v=d.viewbox||d.viewBox||n(c);v=[g/(v[2]-v[0]),h/(v[3]-v[1])];v=Math.min(v[0]||0,v[1]||0)/2;l.fillStyle="black";l.fillRect(0,0,g,h);l.fillStyle="white";t&&("number"!=typeof t&&(t=1),l.strokeStyle=0<t?"white":"black",l.lineWidth=Math.abs(t));l.translate(.5*g,.5*h);l.scale(v,
v);r()?(c=new Path2D(c),l.fill(c),t&&l.stroke(c)):(c=p(c),k(l,c),l.fill(),t&&l.stroke());l.setTransform(1,0,0,1,0,0);return e(l,{cutoff:null!=d.cutoff?d.cutoff:.5,radius:null!=d.radius?d.radius:.5*q})};var m},{"bitmap-sdf":98,"draw-svg-path":174,"is-svg-path":445,"parse-svg-path":479,"svg-path-bounds":544}],547:[function(b,D,G){(function(r){function n(a,e,f){f=f||{};var l=k[a];l||(l=k[a]={" ":{data:new Float32Array(0),shape:.2}});var m=l[e];if(!m)if(1>=e.length||!/\d/.test(e)){m=p(e,{triangles:!0,
font:a,textAlign:f.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}});f=m.cells;m=m.positions;for(var c=new Float32Array(6*f.length),d=a=0,g=0;g<f.length;++g)for(var h=f[g],q=0;3>q;++q){var t=m[h[q]];c[a++]=t[0];c[a++]=t[1]+1.4;d=Math.max(t[0],d)}m=l[e]={data:c,shape:d}}else{d=e.split(/(\d|\s)/);f=Array(d.length);for(c=m=g=0;c<d.length;++c)f[c]=n(a,d[c]),g+=f[c].data.length,m+=f[c].shape,0<c&&(m+=.02);a=new Float32Array(g);d=0;
g=-.5*m;for(c=0;c<f.length;++c){h=f[c].data;for(q=0;q<h.length;q+=2)a[d++]=h[q]+g,a[d++]=h[q+1];g+=f[c].shape+.02}m=l[e]={data:a,shape:m}}return m}D.exports=n;var p=b("vectorize-text");r=window||r.global||{};var k=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}}).call(this,b("_process"))},{_process:500,"vectorize-text":572}],548:[function(b,D,G){(function(r){function n(V,Z){var aa,Y;V=V?V:"";Z=Z||{};if(V instanceof n)return V;if(!(this instanceof n))return new n(V,Z);var ea=V;var ca={r:0,g:0,b:0};var ba=1;var ka=
aa=!1;if("string"==typeof ea)a:{ea=ea.replace(J,"").replace(I,"").toLowerCase();var qa=!1;if(Q[ea])ea=Q[ea],qa=!0;else if("transparent"==ea){ea={r:0,g:0,b:0,a:0,format:"name"};break a}ea=(Y=T.rgb.exec(ea))?{r:Y[1],g:Y[2],b:Y[3]}:(Y=T.rgba.exec(ea))?{r:Y[1],g:Y[2],b:Y[3],a:Y[4]}:(Y=T.hsl.exec(ea))?{h:Y[1],s:Y[2],l:Y[3]}:(Y=T.hsla.exec(ea))?{h:Y[1],s:Y[2],l:Y[3],a:Y[4]}:(Y=T.hsv.exec(ea))?{h:Y[1],s:Y[2],v:Y[3]}:(Y=T.hsva.exec(ea))?{h:Y[1],s:Y[2],v:Y[3],a:Y[4]}:(Y=T.hex8.exec(ea))?{r:parseInt(Y[1],16),
g:parseInt(Y[2],16),b:parseInt(Y[3],16),a:parseInt(Y[4],16)/255,format:qa?"name":"hex8"}:(Y=T.hex6.exec(ea))?{r:parseInt(Y[1],16),g:parseInt(Y[2],16),b:parseInt(Y[3],16),format:qa?"name":"hex"}:(Y=T.hex4.exec(ea))?{r:parseInt(Y[1]+""+Y[1],16),g:parseInt(Y[2]+""+Y[2],16),b:parseInt(Y[3]+""+Y[3],16),a:parseInt(Y[4]+""+Y[4],16)/255,format:qa?"name":"hex8"}:(Y=T.hex3.exec(ea))?{r:parseInt(Y[1]+""+Y[1],16),g:parseInt(Y[2]+""+Y[2],16),b:parseInt(Y[3]+""+Y[3],16),format:qa?"name":"hex"}:!1}if("object"==
typeof ea){if(H(ea.r)&&H(ea.g)&&H(ea.b))ca=ea.g,aa=ea.b,ca={r:255*C(ea.r,255),g:255*C(ca,255),b:255*C(aa,255)},aa=!0,ka="%"===String(ea.r).substr(-1)?"prgb":"rgb";else if(H(ea.h)&&H(ea.s)&&H(ea.v)){ca=F(ea.s);ka=F(ea.v);Y=ea.h;aa=ca;ca=ka;Y=6*C(Y,360);aa=C(aa,100);ca=C(ca,100);ka=r.floor(Y);var pa=Y-ka;Y=ca*(1-aa);qa=ca*(1-pa*aa);aa=ca*(1-(1-pa)*aa);ka%=6;ca={r:255*[ca,qa,Y,Y,aa,ca][ka],g:255*[aa,ca,ca,qa,Y,Y][ka],b:255*[Y,Y,aa,ca,ca,qa][ka]};aa=!0;ka="hsv"}else H(ea.h)&&H(ea.s)&&H(ea.l)&&(ca=F(ea.s),
aa=F(ea.l),ca=k(ea.h,ca,aa),aa=!0,ka="hsl");ea.hasOwnProperty("a")&&(ba=ea.a)}ba=B(ba);ea=ea.format||ka;ka=L(255,P(ca.r,0));Y=L(255,P(ca.g,0));ca=L(255,P(ca.b,0));this._originalInput=V;this._r=ka;this._g=Y;this._b=ca;this._a=ba;this._roundA=E(100*this._a)/100;this._format=Z.format||ea;this._gradientType=Z.gradientType;1>this._r&&(this._r=E(this._r));1>this._g&&(this._g=E(this._g));1>this._b&&(this._b=E(this._b));this._ok=aa;this._tc_id=M++}function p(V,Z,aa){V=C(V,255);Z=C(Z,255);aa=C(aa,255);var Y=
P(V,Z,aa),ea=L(V,Z,aa),ca=(Y+ea)/2;if(Y==ea)var ba=ea=0;else{var ka=Y-ea;ea=.5<ca?ka/(2-Y-ea):ka/(Y+ea);switch(Y){case V:ba=(Z-aa)/ka+(Z<aa?6:0);break;case Z:ba=(aa-V)/ka+2;break;case aa:ba=(V-Z)/ka+4}ba/=6}return{h:ba,s:ea,l:ca}}function k(V,Z,aa){function Y(ba,ka,qa){0>qa&&(qa+=1);1<qa&&--qa;return qa<1/6?ba+6*(ka-ba)*qa:.5>qa?ka:qa<2/3?ba+(ka-ba)*(2/3-qa)*6:ba}V=C(V,360);Z=C(Z,100);aa=C(aa,100);if(0===Z)aa=Z=V=aa;else{var ea=.5>aa?aa*(1+Z):aa+Z-aa*Z,ca=2*aa-ea;aa=Y(ca,ea,V+1/3);Z=Y(ca,ea,V);V=
Y(ca,ea,V-1/3)}return{r:255*aa,g:255*Z,b:255*V}}function a(V,Z,aa){V=C(V,255);Z=C(Z,255);aa=C(aa,255);var Y=P(V,Z,aa),ea=L(V,Z,aa),ca=Y-ea;if(Y==ea)var ba=0;else{switch(Y){case V:ba=(Z-aa)/ca+(Z<aa?6:0);break;case Z:ba=(aa-V)/ca+2;break;case aa:ba=(V-Z)/ca+4}ba/=6}return{h:ba,s:0===Y?0:ca/Y,v:Y}}function e(V,Z,aa,Y){V=[u(E(V).toString(16)),u(E(Z).toString(16)),u(E(aa).toString(16))];return Y&&V[0].charAt(0)==V[0].charAt(1)&&V[1].charAt(0)==V[1].charAt(1)&&V[2].charAt(0)==V[2].charAt(1)?V[0].charAt(0)+
V[1].charAt(0)+V[2].charAt(0):V.join("")}function f(V,Z,aa,Y){return[u(r.round(255*parseFloat(Y)).toString(16)),u(E(V).toString(16)),u(E(Z).toString(16)),u(E(aa).toString(16))].join("")}function l(V,Z){Z=0===Z?0:Z||10;V=n(V).toHsl();V.s-=Z/100;V.s=L(1,P(0,V.s));return n(V)}function m(V,Z){Z=0===Z?0:Z||10;V=n(V).toHsl();V.s+=Z/100;V.s=L(1,P(0,V.s));return n(V)}function c(V){return n(V).desaturate(100)}function d(V,Z){Z=0===Z?0:Z||10;V=n(V).toHsl();V.l+=Z/100;V.l=L(1,P(0,V.l));return n(V)}function g(V,
Z){Z=0===Z?0:Z||10;V=n(V).toRgb();V.r=P(0,L(255,V.r-E(255*-(Z/100))));V.g=P(0,L(255,V.g-E(255*-(Z/100))));V.b=P(0,L(255,V.b-E(255*-(Z/100))));return n(V)}function h(V,Z){Z=0===Z?0:Z||10;V=n(V).toHsl();V.l-=Z/100;V.l=L(1,P(0,V.l));return n(V)}function q(V,Z){V=n(V).toHsl();Z=(V.h+Z)%360;V.h=0>Z?360+Z:Z;return n(V)}function t(V){V=n(V).toHsl();V.h=(V.h+180)%360;return n(V)}function v(V){var Z=n(V).toHsl(),aa=Z.h;return[n(V),n({h:(aa+120)%360,s:Z.s,l:Z.l}),n({h:(aa+240)%360,s:Z.s,l:Z.l})]}function w(V){var Z=
n(V).toHsl(),aa=Z.h;return[n(V),n({h:(aa+90)%360,s:Z.s,l:Z.l}),n({h:(aa+180)%360,s:Z.s,l:Z.l}),n({h:(aa+270)%360,s:Z.s,l:Z.l})]}function A(V){var Z=n(V).toHsl(),aa=Z.h;return[n(V),n({h:(aa+72)%360,s:Z.s,l:Z.l}),n({h:(aa+216)%360,s:Z.s,l:Z.l})]}function z(V,Z,aa){Z=Z||6;aa=aa||30;var Y=n(V).toHsl();aa=360/aa;V=[n(V)];for(Y.h=(Y.h-(aa*Z>>1)+720)%360;--Z;)Y.h=(Y.h+aa)%360,V.push(n(Y));return V}function y(V,Z){Z=Z||6;var aa=n(V).toHsv();V=aa.h;var Y=aa.s;aa=aa.v;for(var ea=[],ca=1/Z;Z--;)ea.push(n({h:V,
s:Y,v:aa})),aa=(aa+ca)%1;return ea}function B(V){V=parseFloat(V);if(isNaN(V)||0>V||1<V)V=1;return V}function C(V,Z){var aa=V;"string"==typeof aa&&-1!=aa.indexOf(".")&&1===parseFloat(aa)&&(V="100%");aa="string"===typeof V&&-1!=V.indexOf("%");V=L(Z,P(0,parseFloat(V)));aa&&(V=parseInt(V*Z,10)/100);return 1E-6>r.abs(V-Z)?1:V%Z/parseFloat(Z)}function u(V){return 1==V.length?"0"+V:""+V}function F(V){1>=V&&(V=100*V+"%");return V}function H(V){return!!T.CSS_UNIT.exec(V)}var J=/^\s+/,I=/\s+$/,M=0,E=r.round,
L=r.min,P=r.max,N=r.random;n.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var V=this.toRgb();return(299*V.r+587*V.g+114*V.b)/1E3},getLuminance:function(){var V=this.toRgb();var Z=V.r/255;var aa=V.g/255;V=V.b/255;Z=.03928>=Z?Z/12.92:r.pow((Z+.055)/1.055,
2.4);aa=.03928>=aa?aa/12.92:r.pow((aa+.055)/1.055,2.4);V=.03928>=V?V/12.92:r.pow((V+.055)/1.055,2.4);return.2126*Z+.7152*aa+.0722*V},setAlpha:function(V){this._a=B(V);this._roundA=E(100*this._a)/100;return this},toHsv:function(){var V=a(this._r,this._g,this._b);return{h:360*V.h,s:V.s,v:V.v,a:this._a}},toHsvString:function(){var V=a(this._r,this._g,this._b),Z=E(360*V.h),aa=E(100*V.s);V=E(100*V.v);return 1==this._a?"hsv("+Z+", "+aa+"%, "+V+"%)":"hsva("+Z+", "+aa+"%, "+V+"%, "+this._roundA+")"},toHsl:function(){var V=
p(this._r,this._g,this._b);return{h:360*V.h,s:V.s,l:V.l,a:this._a}},toHslString:function(){var V=p(this._r,this._g,this._b),Z=E(360*V.h),aa=E(100*V.s);V=E(100*V.l);return 1==this._a?"hsl("+Z+", "+aa+"%, "+V+"%)":"hsla("+Z+", "+aa+"%, "+V+"%, "+this._roundA+")"},toHex:function(V){return e(this._r,this._g,this._b,V)},toHexString:function(V){return"#"+this.toHex(V)},toHex8:function(V){var Z=this._g,aa=this._b,Y=this._a;Z=[u(E(this._r).toString(16)),u(E(Z).toString(16)),u(E(aa).toString(16)),u(r.round(255*
parseFloat(Y)).toString(16))];V=V&&Z[0].charAt(0)==Z[0].charAt(1)&&Z[1].charAt(0)==Z[1].charAt(1)&&Z[2].charAt(0)==Z[2].charAt(1)&&Z[3].charAt(0)==Z[3].charAt(1)?Z[0].charAt(0)+Z[1].charAt(0)+Z[2].charAt(0)+Z[3].charAt(0):Z.join("");return V},toHex8String:function(V){return"#"+this.toHex8(V)},toRgb:function(){return{r:E(this._r),g:E(this._g),b:E(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+E(this._r)+", "+E(this._g)+", "+E(this._b)+")":"rgba("+E(this._r)+", "+E(this._g)+", "+
E(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:E(100*C(this._r,255))+"%",g:E(100*C(this._g,255))+"%",b:E(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+E(100*C(this._r,255))+"%, "+E(100*C(this._g,255))+"%, "+E(100*C(this._b,255))+"%)":"rgba("+E(100*C(this._r,255))+"%, "+E(100*C(this._g,255))+"%, "+E(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":1>this._a?!1:O[e(this._r,this._g,this._b,
!0)]||!1},toFilter:function(V){var Z="#"+f(this._r,this._g,this._b,this._a),aa=Z,Y=this._gradientType?"GradientType \x3d 1, ":"";V&&(V=n(V),aa="#"+f(V._r,V._g,V._b,V._a));return"progid:DXImageTransform.Microsoft.gradient("+Y+"startColorstr\x3d"+Z+",endColorstr\x3d"+aa+")"},toString:function(V){var Z=!!V;V=V||this._format;var aa=!1,Y=1>this._a&&0<=this._a;if(!Z&&Y&&("hex"===V||"hex6"===V||"hex3"===V||"hex4"===V||"hex8"===V||"name"===V))return"name"===V&&0===this._a?this.toName():this.toRgbString();
"rgb"===V&&(aa=this.toRgbString());"prgb"===V&&(aa=this.toPercentageRgbString());if("hex"===V||"hex6"===V)aa=this.toHexString();"hex3"===V&&(aa=this.toHexString(!0));"hex4"===V&&(aa=this.toHex8String(!0));"hex8"===V&&(aa=this.toHex8String());"name"===V&&(aa=this.toName());"hsl"===V&&(aa=this.toHslString());"hsv"===V&&(aa=this.toHsvString());return aa||this.toHexString()},clone:function(){return n(this.toString())},_applyModification:function(V,Z){V=V.apply(null,[this].concat([].slice.call(Z)));this._r=
V._r;this._g=V._g;this._b=V._b;this.setAlpha(V._a);return this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(h,arguments)},desaturate:function(){return this._applyModification(l,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(q,
arguments)},_applyCombination:function(V,Z){return V.apply(null,[this].concat([].slice.call(Z)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination(t,arguments)},monochromatic:function(){return this._applyCombination(y,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(v,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}};n.fromRatio=
function(V,Z){if("object"==typeof V){var aa={},Y;for(Y in V)V.hasOwnProperty(Y)&&(aa[Y]="a"===Y?V[Y]:F(V[Y]));V=aa}return n(V,Z)};n.equals=function(V,Z){return V&&Z?n(V).toRgbString()==n(Z).toRgbString():!1};n.random=function(){return n.fromRatio({r:N(),g:N(),b:N()})};n.mix=function(V,Z,aa){aa=0===aa?0:aa||50;V=n(V).toRgb();Z=n(Z).toRgb();aa/=100;return n({r:(Z.r-V.r)*aa+V.r,g:(Z.g-V.g)*aa+V.g,b:(Z.b-V.b)*aa+V.b,a:(Z.a-V.a)*aa+V.a})};n.readability=function(V,Z){V=n(V);Z=n(Z);return(r.max(V.getLuminance(),
Z.getLuminance())+.05)/(r.min(V.getLuminance(),Z.getLuminance())+.05)};n.isReadable=function(V,Z,aa){V=n.readability(V,Z);Z=!1;var Y=aa||{level:"AA",size:"small"};aa=(Y.level||"AA").toUpperCase();Y=(Y.size||"small").toLowerCase();"AA"!==aa&&"AAA"!==aa&&(aa="AA");"small"!==Y&&"large"!==Y&&(Y="small");switch(aa+Y){case "AAsmall":case "AAAlarge":Z=4.5<=V;break;case "AAlarge":Z=3<=V;break;case "AAAsmall":Z=7<=V}return Z};n.mostReadable=function(V,Z,aa){var Y=null,ea=0;aa=aa||{};var ca=aa.includeFallbackColors;
var ba=aa.level;var ka=aa.size;for(var qa=0;qa<Z.length;qa++){var pa=n.readability(V,Z[qa]);pa>ea&&(ea=pa,Y=n(Z[qa]))}if(n.isReadable(V,Y,{level:ba,size:ka})||!ca)return Y;aa.includeFallbackColors=!1;return n.mostReadable(V,["#fff","#000"],aa)};var Q=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",
chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",
deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",
lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",
mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",
red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},O=n.hexNames=function(V){var Z=
{},aa;for(aa in V)V.hasOwnProperty(aa)&&(Z[V[aa]]=aa);return Z}(Q),T={CSS_UNIT:/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,
hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};"undefined"!==typeof D&&D.exports?D.exports=n:window.tinycolor=n})(Math)},{}],549:[function(b,D,G){function r(p){if(p.length){if(p instanceof Float32Array)return p;var k=new Float32Array(p);k.set(p);return k}n[0]=p;return n[0]}D.exports=
r;D.exports.float32=D.exports.float=r;D.exports.fract32=D.exports.fract=function(p){if(p.length){for(var k=r(p),a=0,e=k.length;a<e;a++)k[a]=p[a]-k[a];return k}return r(p-r(p))};var n=new Float32Array(1)},{}],550:[function(b,D,G){function r(a,e){e=p(getComputedStyle(a).getPropertyValue(e));return e[0]*n(e[1],a)}function n(a,e){e=e||document.body;a=(a||"px").trim().toLowerCase();if(e===window||e===document)e=document.body;switch(a){case "%":return e.clientHeight/100;case "ch":case "ex":var f=document.createElement("div");
f.style["font-size"]="128"+a;e.appendChild(f);a=r(f,"font-size")/128;e.removeChild(f);return a;case "em":return r(e,"font-size");case "rem":return r(document.body,"font-size");case "vw":return window.innerWidth/100;case "vh":return window.innerHeight/100;case "vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case "vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case "in":return k;case "cm":return k/2.54;case "mm":return k/25.4;case "pt":return k/72;case "pc":return k/
6}return 1}var p=b("parse-unit");D.exports=n;var k=96},{"parse-unit":480}],551:[function(b,D,G){(function(r,n){"object"===typeof G&&"undefined"!==typeof D?n(G):(r=r||self,n(r.topojson=r.topojson||{}))})(this,function(r){function n(h){return h}function p(h){if(null==h)return n;var q,t,v=h.scale[0],w=h.scale[1],A=h.translate[0],z=h.translate[1];return function(y,B){B||(q=t=0);B=2;var C=y.length,u=Array(C);u[0]=(q+=y[0])*v+A;for(u[1]=(t+=y[1])*w+z;B<C;)u[B]=y[B],++B;return u}}function k(h){function q(C){C=
v(C);C[0]<A&&(A=C[0]);C[0]>y&&(y=C[0]);C[1]<z&&(z=C[1]);C[1]>B&&(B=C[1])}function t(C){switch(C.type){case "GeometryCollection":C.geometries.forEach(t);break;case "Point":q(C.coordinates);break;case "MultiPoint":C.coordinates.forEach(q)}}var v=p(h.transform),w,A=Infinity,z=A,y=-A,B=-A;h.arcs.forEach(function(C){for(var u=-1,F=C.length,H;++u<F;)H=v(C[u],u),H[0]<A&&(A=H[0]),H[0]>y&&(y=H[0]),H[1]<z&&(z=H[1]),H[1]>B&&(B=H[1])});for(w in h.objects)t(h.objects[w]);return[A,z,y,B]}function a(h,q){var t=
q.id,v=q.bbox,w=null==q.properties?{}:q.properties;h=e(h,q);return null==t&&null==v?{type:"Feature",properties:w,geometry:h}:null==v?{type:"Feature",id:t,properties:w,geometry:h}:{type:"Feature",id:t,bbox:v,properties:w,geometry:h}}function e(h,q){function t(C){return y(C)}function v(C){for(var u=[],F=0,H=C.length;F<H;++F){var J=C[F],I=u;I.length&&I.pop();for(var M=B[0>J?~J:J],E=0,L=M.length;E<L;++E)I.push(y(M[E],E));if(0>J)for(J=I,I=J.length,M=I-L;M<--I;)L=J[M],J[M++]=J[I],J[I]=L}2>u.length&&u.push(u[0]);
return u}function w(C){for(C=v(C);4>C.length;)C.push(C[0]);return C}function A(C){return C.map(w)}function z(C){var u=C.type;switch(u){case "GeometryCollection":return{type:u,geometries:C.geometries.map(z)};case "Point":C=y(C.coordinates);break;case "MultiPoint":C=C.coordinates.map(t);break;case "LineString":C=v(C.arcs);break;case "MultiLineString":C=C.arcs.map(v);break;case "Polygon":C=A(C.arcs);break;case "MultiPolygon":C=C.arcs.map(A);break;default:return null}return{type:u,coordinates:C}}var y=
p(h.transform),B=h.arcs;return z(q)}function f(h,q){function t(C){var u=h.arcs[0>C?~C:C],F=u[0];if(h.transform){var H=[0,0];u.forEach(function(J){H[0]+=J[0];H[1]+=J[1]})}else H=u[u.length-1];return 0>C?[H,F]:[F,H]}function v(C,u){for(var F in C){var H=C[F];delete u[H.start];delete H.start;delete H.end;H.forEach(function(J){w[0>J?~J:J]=1});y.push(H)}}var w={},A={},z={},y=[],B=-1;q.forEach(function(C,u){var F=h.arcs[0>C?~C:C];3>F.length&&!F[1][0]&&!F[1][1]&&(F=q[++B],q[B]=C,q[u]=F)});q.forEach(function(C){var u=
t(C),F=u[0],H=u[1];(u=z[F])?(delete z[u.end],u.push(C),u.end=H,(C=A[H])?(delete A[C.start],F=C===u?u:u.concat(C),A[F.start=u.start]=z[F.end=C.end]=F):A[u.start]=z[u.end]=u):(u=A[H])?(delete A[u.start],u.unshift(C),u.start=F,(C=z[F])?(delete z[C.end],F=C===u?u:C.concat(u),A[F.start=C.start]=z[F.end=u.end]=F):A[u.start]=z[u.end]=u):(u=[C],A[u.start=F]=z[u.end=H]=u)});v(z,A);v(A,z);q.forEach(function(C){w[0>C?~C:C]||y.push([C])});return y}function l(h,q,t){var v;if(1<arguments.length)var w=m(h,q,t);
else{var A=0;for(w=Array(v=h.arcs.length);A<v;++A)w[A]=A}return{type:"MultiLineString",arcs:f(h,w)}}function m(h,q,t){function v(u){var F=0>u?~u:u;(B[F]||(B[F]=[])).push({i:u,g:C})}function w(u){u.forEach(v)}function A(u){u.forEach(w)}function z(u){switch(C=u,u.type){case "GeometryCollection":u.geometries.forEach(z);break;case "LineString":w(u.arcs);break;case "MultiLineString":case "Polygon":A(u.arcs);break;case "MultiPolygon":u.arcs.forEach(A)}}var y=[],B=[],C;z(q);B.forEach(null==t?function(u){y.push(u[0].i)}:
function(u){t(u[0].g,u[u.length-1].g)&&y.push(u[0].i)});return y}function c(h,q){function t(B){switch(B.type){case "GeometryCollection":B.geometries.forEach(t);break;case "Polygon":v(B.arcs);break;case "MultiPolygon":B.arcs.forEach(v)}}function v(B){B.forEach(function(C){C.forEach(function(u){(A[u=0>u?~u:u]||(A[u]=[])).push(B)})});z.push(B)}function w(B){B=e(h,{type:"Polygon",arcs:[B]}).coordinates[0];for(var C=-1,u=B.length,F,H=B[u-1],J=0;++C<u;)F=H,H=B[C],J+=F[0]*H[1]-F[1]*H[0];return Math.abs(J)}
var A={},z=[],y=[];q.forEach(t);z.forEach(function(B){if(!B._){var C=[],u=[B];B._=1;for(y.push(C);B=u.pop();)C.push(B),B.forEach(function(F){F.forEach(function(H){A[0>H?~H:H].forEach(function(J){J._||(J._=1,u.push(J))})})})}});z.forEach(function(B){delete B._});return{type:"MultiPolygon",arcs:y.map(function(B){var C=[];B.forEach(function(J){J.forEach(function(I){I.forEach(function(M){2>A[0>M?~M:M].length&&C.push(M)})})});C=f(h,C);if(1<(B=C.length))for(var u=1,F=w(C[0]),H;u<B;++u)(H=w(C[u]))>F&&(F=
C[0],C[0]=C[u],C[u]=F,F=H);return C}).filter(function(B){return 0<B.length})}}function d(h,q){for(var t=0,v=h.length;t<v;){var w=t+v>>>1;h[w]<q?t=w+1:v=w}return t}function g(h){if(null==h)return n;var q,t,v=h.scale[0],w=h.scale[1],A=h.translate[0],z=h.translate[1];return function(y,B){B||(q=t=0);B=2;var C=y.length,u=Array(C),F=Math.round((y[0]-A)/v),H=Math.round((y[1]-z)/w);u[0]=F-q;q=F;u[1]=H-t;for(t=H;B<C;)u[B]=y[B],++B;return u}}r.bbox=k;r.feature=function(h,q){"string"===typeof q&&(q=h.objects[q]);
return"GeometryCollection"===q.type?{type:"FeatureCollection",features:q.geometries.map(function(t){return a(h,t)})}:a(h,q)};r.merge=function(h){return e(h,c.apply(this,arguments))};r.mergeArcs=c;r.mesh=function(h){return e(h,l.apply(this,arguments))};r.meshArcs=l;r.neighbors=function(h){function q(I,M){I.forEach(function(E){0>E&&(E=~E);var L=w[E];L?L.push(M):w[E]=[M]})}function t(I,M){I.forEach(function(E){q(E,M)})}function v(I,M){if("GeometryCollection"===I.type)I.geometries.forEach(function(E){v(E,
M)});else if(I.type in z)z[I.type](I.arcs,M)}var w={},A=h.map(function(){return[]}),z={LineString:q,MultiLineString:t,Polygon:t,MultiPolygon:function(I,M){I.forEach(function(E){t(E,M)})}};h.forEach(v);for(var y in w){h=w[y];for(var B=h.length,C=0;C<B;++C)for(var u=C+1;u<B;++u){var F=h[C],H=h[u],J;(J=A[F])[y=d(J,H)]!==H&&J.splice(y,0,H);(J=A[H])[y=d(J,F)]!==F&&J.splice(y,0,F)}}return A};r.quantize=function(h,q){function t(F){return C(F)}function v(F){switch(F.type){case "GeometryCollection":var H=
{type:"GeometryCollection",geometries:F.geometries.map(v)};break;case "Point":H={type:"Point",coordinates:C(F.coordinates)};break;case "MultiPoint":H={type:"MultiPoint",coordinates:F.coordinates.map(t)};break;default:return F}null!=F.id&&(H.id=F.id);null!=F.bbox&&(H.bbox=F.bbox);null!=F.properties&&(H.properties=F.properties);return H}if(h.transform)throw Error("already quantized");if(q&&q.scale)var w=h.bbox;else{if(!(2<=(B=Math.floor(q))))throw Error("n must be ≥2");w=h.bbox||k(h);q=w[0];var A=w[1],
z=w[2],y=w[3],B;q={scale:[z-q?(z-q)/(B-1):1,y-A?(y-A)/(B-1):1],translate:[q,A]}}var C=g(q),u;A=h.objects;z={};for(u in A)z[u]=v(A[u]);return{type:"Topology",bbox:w,transform:q,objects:z,arcs:h.arcs.map(function(F){var H=0,J=1,I=F.length,M,E=Array(I);for(E[0]=C(F[0],0);++H<I;)if((M=C(F[H],H))[0]||M[1])E[J++]=M;1===J&&(E[J++]=[0,0]);E.length=J;return E})}};r.transform=p;r.untransform=g;Object.defineProperty(r,"__esModule",{value:!0})})},{}],552:[function(b,D,G){D.exports=function(k){if(0>k)return[];
if(0===k)return[[0]];for(var a=Math.round(p(k+1))|0,e=[],f=0;f<a;++f){for(var l=r.unrank(k,f),m=[0],c=0,d=0;d<l.length;++d)c+=1<<l[d],m.push(c);1>n(l)&&(m[0]=c,m[k]=0);e.push(m)}return e};var r=b("permutation-rank"),n=b("permutation-parity"),p=b("gamma")},{gamma:248,"permutation-parity":483,"permutation-rank":484}],553:[function(b,D,G){function r(d,g,h){return Math.sqrt(Math.pow(d,2)+Math.pow(g,2)+Math.pow(h,2))}function n(d){var g=Math.abs(d[0]),h=Math.abs(d[1]),q=Math.abs(d[2]),t=[0,0,0];g>Math.max(h,
q)?t[2]=1:h>Math.max(g,q)?t[0]=1:t[1]=1;for(q=h=g=0;3>q;++q)g+=d[q]*d[q],h+=t[q]*d[q];for(q=0;3>q;++q)t[q]-=h/g*d[q];l(t,t);return t}function p(d,g,h,q,t,v,w,A){this.center=k(h);this.up=k(q);this.right=k(t);this.radius=k([v]);this.angle=k([w,A]);this.angle.bounds=[[-Infinity,-Math.PI/2],[Infinity,Math.PI/2]];this.setDistanceLimits(d,g);this.computedCenter=this.center.curve(0);this.computedUp=this.up.curve(0);this.computedRight=this.right.curve(0);this.computedRadius=this.radius.curve(0);this.computedAngle=
this.angle.curve(0);this.computedToward=[0,0,0];this.computedEye=[0,0,0];this.computedMatrix=Array(16);for(d=0;16>d;++d)this.computedMatrix[d]=.5;this.recalcMatrix(0)}D.exports=function(d){d=d||{};var g=d.center||[0,0,0],h=d.up||[0,1,0],q=d.right||n(h),t=d.radius||1,v=d.theta||0,w=d.phi||0;g=[].slice.call(g,0,3);h=[].slice.call(h,0,3);l(h,h);q=[].slice.call(q,0,3);l(q,q);"eye"in d&&(t=d.eye,v=[t[0]-g[0],t[1]-g[1],t[2]-g[2]],f(q,v,h),1E-6>r(q[0],q[1],q[2])?q=n(h):l(q,q),t=r(v[0],v[1],v[2]),w=m(h,v)/
t,v=m(q,v)/t,w=Math.acos(w),v=Math.acos(v));t=Math.log(t);return new p(d.zoomMin,d.zoomMax,g,h,q,t,v,w)};var k=b("filtered-vector"),a=b("gl-mat4/invert"),e=b("gl-mat4/rotate"),f=b("gl-vec3/cross"),l=b("gl-vec3/normalize"),m=b("gl-vec3/dot");b=p.prototype;b.setDistanceLimits=function(d,g){d=0<d?Math.log(d):-Infinity;g=0<g?Math.log(g):Infinity;g=Math.max(g,d);this.radius.bounds[0][0]=d;this.radius.bounds[1][0]=g};b.getDistanceLimits=function(d){var g=this.radius.bounds[0];return d?(d[0]=Math.exp(g[0][0]),
d[1]=Math.exp(g[1][0]),d):[Math.exp(g[0][0]),Math.exp(g[1][0])]};b.recalcMatrix=function(d){this.center.curve(d);this.up.curve(d);this.right.curve(d);this.radius.curve(d);this.angle.curve(d);for(var g=this.computedUp,h=this.computedRight,q=0,t=0,v=0;3>v;++v)t+=g[v]*h[v],q+=g[v]*g[v];var w=Math.sqrt(q);for(v=d=0;3>v;++v)h[v]-=g[v]*t/q,d+=h[v]*h[v],g[v]/=w;d=Math.sqrt(d);for(v=0;3>v;++v)h[v]/=d;var A=this.computedToward;f(A,g,h);l(A,A);d=Math.exp(this.computedRadius[0]);w=this.computedAngle[0];q=this.computedAngle[1];
t=Math.cos(w);w=Math.sin(w);var z=Math.cos(q),y=Math.sin(q);q=this.computedCenter;var B=t*z,C=w*z,u=-t*y,F=-w*y;t=this.computedEye;w=this.computedMatrix;for(v=0;3>v;++v){var H=B*h[v]+C*A[v]+y*g[v];w[4*v+1]=u*h[v]+F*A[v]+z*g[v];w[4*v+2]=H;w[4*v+3]=0}h=w[1];v=w[5];y=w[9];A=w[2];z=w[6];B=w[10];g=v*B-y*z;y=y*A-h*B;h=h*z-v*A;v=r(g,y,h);w[0]=g/v;w[4]=y/v;w[8]=h/v;for(v=0;3>v;++v)t[v]=q[v]+w[2+4*v]*d;for(v=0;3>v;++v){for(q=d=0;3>q;++q)d+=w[v+4*q]*t[q];w[12+v]=-d}w[15]=1};b.getMatrix=function(d,g){this.recalcMatrix(d);
d=this.computedMatrix;if(g){for(var h=0;16>h;++h)g[h]=d[h];return g}return d};var c=[0,0,0];b.rotate=function(d,g,h,q){this.angle.move(d,g,h);if(q){this.recalcMatrix(d);g=this.computedMatrix;c[0]=g[2];c[1]=g[6];c[2]=g[10];h=this.computedUp;for(var t=this.computedRight,v=this.computedToward,w=0;3>w;++w)g[4*w]=h[w],g[4*w+1]=t[w],g[4*w+2]=v[w];e(g,g,q,c);for(w=0;3>w;++w)h[w]=g[4*w],t[w]=g[4*w+1];this.up.set(d,h[0],h[1],h[2]);this.right.set(d,t[0],t[1],t[2])}};b.pan=function(d,g,h,q){g=g||0;h=h||0;q=
q||0;this.recalcMatrix(d);var t=this.computedMatrix,v=t[1],w=t[5],A=t[9],z=r(v,w,A);v/=z;w/=z;A/=z;z=t[0];var y=t[4];t=t[8];var B=z*v+y*w+t*A;z-=v*B;y-=w*B;t-=A*B;B=r(z,y,t);this.center.move(d,z/B*g+v*h,y/B*g+w*h,t/B*g+A*h);g=Math.exp(this.computedRadius[0]);g=Math.max(1E-4,g+q);this.radius.set(d,Math.log(g))};b.translate=function(d,g,h,q){this.center.move(d,g||0,h||0,q||0)};b.setMatrix=function(d,g,h,q){var t=1;"number"===typeof h&&(t=h|0);if(0>t||3<t)t=1;var v=(t+2)%3;g||(this.recalcMatrix(d),g=
this.computedMatrix);h=g[t];var w=g[t+4],A=g[t+8];if(q){q=Math.abs(h);var z=Math.abs(A),y=Math.max(q,Math.abs(w),z);q===y?(h=0>h?-1:1,w=A=0):z===y?(A=0>A?-1:1,h=w=0):(w=0>w?-1:1,h=A=0)}else q=r(h,w,A),h/=q,w/=q,A/=q;q=g[v];z=g[v+4];v=g[v+8];y=q*h+z*w+v*A;q-=h*y;z-=w*y;v-=A*y;y=r(q,z,v);q/=y;z/=y;v/=y;y=w*v-A*z;var B=A*q-h*v,C=h*z-w*q,u=r(y,B,C);y/=u;B/=u;C/=u;this.center.jump(d,H,J,I);this.radius.idle(d);this.up.jump(d,h,w,A);this.right.jump(d,q,z,v);if(2===t)J=g[1],I=g[5],h=g[9],H=0>F?-Math.PI/2:
Math.PI/2,J=Math.atan2(J*y+I*B+h*C,J*q+I*z+h*v);else{J=g[2];I=g[6];var F=g[10];H=Math.asin(Math.min(1,Math.max(-1,J*h+I*w+F*A)));J=Math.atan2(J*y+I*B+F*C,J*q+I*z+F*v)}this.angle.jump(d,J,H);this.recalcMatrix(d);F=g[2];h=g[6];w=g[10];I=this.computedMatrix;a(I,g);g=I[15];var H=I[12]/g,J=I[13]/g,I=I[14]/g;g=Math.exp(this.computedRadius[0]);this.center.jump(d,H-F*g,J-h*g,I-w*g)};b.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())};
b.idle=function(d){this.center.idle(d);this.up.idle(d);this.right.idle(d);this.radius.idle(d);this.angle.idle(d)};b.flush=function(d){this.center.flush(d);this.up.flush(d);this.right.flush(d);this.radius.flush(d);this.angle.flush(d)};b.setDistance=function(d,g){0<g&&this.radius.set(d,Math.log(g))};b.lookAt=function(d,g,h,q){this.recalcMatrix(d);g=g||this.computedEye;h=h||this.computedCenter;q=q||this.computedUp;var t=q[0],v=q[1];q=q[2];var w=r(t,v,q);if(!(1E-6>w)){t/=w;v/=w;q/=w;w=g[0]-h[0];var A=
g[1]-h[1];g=g[2]-h[2];var z=r(w,A,g);if(!(1E-6>z)){w/=z;A/=z;g/=z;var y=this.computedRight,B=y[0],C=y[1];y=y[2];var u=t*B+v*C+q*y;B-=u*t;C-=u*v;y-=u*q;u=r(B,C,y);if(.01>u&&(B=v*g-q*A,C=q*w-t*g,y=t*A-v*w,u=r(B,C,y),1E-6>u))return;B/=u;C/=u;y/=u;this.up.set(d,t,v,q);this.right.set(d,B,C,y);this.center.set(d,h[0],h[1],h[2]);this.radius.set(d,Math.log(z));h=v*y-q*C;z=q*B-t*y;u=t*C-v*B;var F=r(h,z,u);t=Math.asin(Math.min(1,Math.max(-1,t*w+v*A+q*g)));v=Math.atan2(h/F*w+z/F*A+u/F*g,B*w+C*A+y*g);w=this.angle._state;
q=w[w.length-1];w=w[w.length-2];q%=2*Math.PI;A=Math.abs(q-v);g=Math.abs(q-2*Math.PI-v);Math.abs(q+2*Math.PI-v)<A&&(q+=2*Math.PI);g<A&&(q-=2*Math.PI);this.angle.jump(this.angle.lastT(),q,w);this.angle.set(d,v,t)}}}},{"filtered-vector":242,"gl-mat4/invert":278,"gl-mat4/rotate":283,"gl-vec3/cross":339,"gl-vec3/dot":344,"gl-vec3/normalize":361}],554:[function(b,D,G){D.exports=function(n,p,k){var a=n*p,e=r*n;e-=e-n;n-=e;var f=r*p;f-=f-p;p-=f;p=n*p-(a-e*f-n*f-e*p);return k?(k[0]=p,k[1]=a,k):[p,a]};var r=
+(Math.pow(2,27)+1)},{}],555:[function(b,D,G){D.exports=function(r,n,p){var k=r+n,a=k-r;n-=a;r-=k-a;return p?(p[0]=r+n,p[1]=k,p):[r+n,k]}},{}],556:[function(b,D,G){var r=b("../prototype/is");D.exports=function(n){if("function"!==typeof n||!hasOwnProperty.call(n,"length"))return!1;try{if("number"!==typeof n.length||"function"!==typeof n.call||"function"!==typeof n.apply)return!1}catch(p){return!1}return!r(n)}},{"../prototype/is":563}],557:[function(b,D,G){var r=b("../value/is"),n=b("../object/is"),
p=b("../string/coerce"),k=b("./to-short-string");D.exports=function(a,e,f){if(!n(f))throw new TypeError(e.replace("%v",k(a)));if(!r(a)){if("default"in f)return f["default"];if(f.isOptional)return null}f=p(f.errorMessage);r(f)||(f=e);throw new TypeError(f.replace("%v",k(a)));}},{"../object/is":560,"../string/coerce":564,"../value/is":566,"./to-short-string":559}],558:[function(b,D,G){D.exports=function(r){try{return r.toString()}catch(n){try{return String(r)}catch(p){return null}}}},{}],559:[function(b,
D,G){var r=b("./safe-to-string"),n=/[\n\r\u2028\u2029]/g;D.exports=function(p){p=r(p);if(null===p)return"\x3cNon-coercible to string value\x3e";100<p.length&&(p=p.slice(0,99)+"…");return p=p.replace(n,function(k){switch(k){case "\n":return"\\n";case "\r":return"\\r";case "\u2028":return"\\u2028";case "\u2029":return"\\u2029";default:throw Error("Unexpected character");}})}},{"./safe-to-string":558}],560:[function(b,D,G){var r=b("../value/is"),n={object:!0,"function":!0,undefined:!0};D.exports=function(p){return r(p)?
hasOwnProperty.call(n,typeof p):!1}},{"../value/is":566}],561:[function(b,D,G){var r=b("../lib/resolve-exception"),n=b("./is");D.exports=function(p,k){return n(p)?p:r(p,"%v is not a plain function",k)}},{"../lib/resolve-exception":557,"./is":562}],562:[function(b,D,G){var r=b("../function/is"),n=/^\s*class[\s{/}]/,p=Function.prototype.toString;D.exports=function(k){return!r(k)||n.test(p.call(k))?!1:!0}},{"../function/is":556}],563:[function(b,D,G){var r=b("../object/is");D.exports=function(n){if(!r(n))return!1;
try{return n.constructor?n.constructor.prototype===n:!1}catch(p){return!1}}},{"../object/is":560}],564:[function(b,D,G){var r=b("../value/is"),n=b("../object/is"),p=Object.prototype.toString;D.exports=function(k){if(!r(k))return null;if(n(k)){var a=k.toString;if("function"!==typeof a||a===p)return null}return""+k}},{"../object/is":560,"../value/is":566}],565:[function(b,D,G){var r=b("../lib/resolve-exception"),n=b("./is");D.exports=function(p,k){return n(p)?p:r(p,"Cannot use %v",k)}},{"../lib/resolve-exception":557,
"./is":566}],566:[function(b,D,G){D.exports=function(r){return void 0!==r&&null!==r}},{}],567:[function(b,D,G){(function(r){function n(J){if(J){var I=w.log2(J.length||J.byteLength);F[I].push(J)}}function p(J){J=w.nextPow2(J);var I=w.log2(J);I=F[I];return 0<I.length?I.pop():new ArrayBuffer(J)}function k(J){return new Uint8Array(p(J),0,J)}function a(J){return new Uint16Array(p(2*J),0,J)}function e(J){return new Uint32Array(p(4*J),0,J)}function f(J){return new Int8Array(p(J),0,J)}function l(J){return new Int16Array(p(2*
J),0,J)}function m(J){return new Int32Array(p(4*J),0,J)}function c(J){return new Float32Array(p(4*J),0,J)}function d(J){return new Float64Array(p(8*J),0,J)}function g(J){return y?new Uint8ClampedArray(p(J),0,J):k(J)}function h(J){return B?new BigUint64Array(p(8*J),0,J):null}function q(J){return C?new BigInt64Array(p(8*J),0,J):null}function t(J){return new DataView(p(J),0,J)}function v(J){J=w.nextPow2(J);var I=w.log2(J);I=H[I];return 0<I.length?I.pop():new z(J)}var w=b("bit-twiddle"),A=b("dup"),z=
b("buffer").Buffer;r.__TYPEDARRAY_POOL||(r.__TYPEDARRAY_POOL={UINT8:A([32,0]),UINT16:A([32,0]),UINT32:A([32,0]),BIGUINT64:A([32,0]),INT8:A([32,0]),INT16:A([32,0]),INT32:A([32,0]),BIGINT64:A([32,0]),FLOAT:A([32,0]),DOUBLE:A([32,0]),DATA:A([32,0]),UINT8C:A([32,0]),BUFFER:A([32,0])});var y="undefined"!==typeof Uint8ClampedArray,B="undefined"!==typeof BigUint64Array,C="undefined"!==typeof BigInt64Array,u=r.__TYPEDARRAY_POOL;u.UINT8C||(u.UINT8C=A([32,0]));u.BIGUINT64||(u.BIGUINT64=A([32,0]));u.BIGINT64||
(u.BIGINT64=A([32,0]));u.BUFFER||(u.BUFFER=A([32,0]));var F=u.DATA,H=u.BUFFER;G.free=function(J){if(z.isBuffer(J))H[w.log2(J.length)].push(J);else if("[object ArrayBuffer]"!==Object.prototype.toString.call(J)&&(J=J.buffer),J){var I=w.log2(J.length||J.byteLength)|0;F[I].push(J)}};G.freeUint8=G.freeUint16=G.freeUint32=G.freeBigUint64=G.freeInt8=G.freeInt16=G.freeInt32=G.freeBigInt64=G.freeFloat32=G.freeFloat=G.freeFloat64=G.freeDouble=G.freeUint8Clamped=G.freeDataView=function(J){n(J.buffer)};G.freeArrayBuffer=
n;G.freeBuffer=function(J){H[w.log2(J.length)].push(J)};G.malloc=function(J,I){if(void 0===I||"arraybuffer"===I)return p(J);switch(I){case "uint8":return k(J);case "uint16":return a(J);case "uint32":return e(J);case "int8":return f(J);case "int16":return l(J);case "int32":return m(J);case "float":case "float32":return c(J);case "double":case "float64":return d(J);case "uint8_clamped":return g(J);case "bigint64":return q(J);case "biguint64":return h(J);case "buffer":return v(J);case "data":case "dataview":return t(J)}return null};
G.mallocArrayBuffer=p;G.mallocUint8=k;G.mallocUint16=a;G.mallocUint32=e;G.mallocInt8=f;G.mallocInt16=l;G.mallocInt32=m;G.mallocFloat32=G.mallocFloat=c;G.mallocFloat64=G.mallocDouble=d;G.mallocUint8Clamped=g;G.mallocBigUint64=h;G.mallocBigInt64=q;G.mallocDataView=t;G.mallocBuffer=v;G.clearCache=function(){for(var J=0;32>J;++J)u.UINT8[J].length=0,u.UINT16[J].length=0,u.UINT32[J].length=0,u.INT8[J].length=0,u.INT16[J].length=0,u.INT32[J].length=0,u.FLOAT[J].length=0,u.DOUBLE[J].length=0,u.BIGUINT64[J].length=
0,u.BIGINT64[J].length=0,u.UINT8C[J].length=0,F[J].length=0,H[J].length=0}}).call(this,"undefined"!==typeof lb?lb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"bit-twiddle":97,buffer:111,dup:176}],568:[function(b,D,G){function r(n){this.roots=Array(n);this.ranks=Array(n);for(var p=0;p<n;++p)this.roots[p]=p,this.ranks[p]=0}"use restrict";D.exports=r;b=r.prototype;Object.defineProperty(b,"length",{get:function(){return this.roots.length}});b.makeSet=function(){var n=this.roots.length;
this.roots.push(n);this.ranks.push(0);return n};b.find=function(n){for(var p=n,k=this.roots;k[n]!==n;)n=k[n];for(;k[p]!==n;){var a=k[p];k[p]=n;p=a}return n};b.link=function(n,p){n=this.find(n);p=this.find(p);if(n!==p){var k=this.ranks,a=this.roots,e=k[n],f=k[p];e<f?a[n]=p:f<e?a[p]=n:(a[p]=n,++k[n])}}},{}],569:[function(b,D,G){D.exports=function(r,n,p){if(0===r.length)return r;if(n){p||r.sort(n);p=1;for(var k=r.length,a=r[0],e,f=1;f<k;++f)e=a,a=r[f],n(a,e)&&(f===p?p++:r[p++]=a);r.length=p;return r}p||
r.sort();n=1;p=r.length;k=r[0];for(e=1;e<p;++e)a=k,k=r[e],k!==a&&(e===n?n++:r[n++]=k);r.length=n;return r}},{}],570:[function(b,D,G){var r=/['"]/;D.exports=function(n){if(!n)return"";r.test(n.charAt(0))&&(n=n.substr(1));r.test(n.charAt(n.length-1))&&(n=n.substr(0,n.length-1));return n}},{}],571:[function(b,D,G){D.exports=function(r,n,p){Array.isArray(p)||(p=[].slice.call(arguments,2));for(var k=0,a=p.length;k<a;k++){var e=p[k],f;for(f in e)if((void 0===n[f]||Array.isArray(n[f])||r[f]!==n[f])&&f in
n){if(!0===e[f])var l=n[f];else if(!1===e[f])continue;else if("function"===typeof e[f]&&(l=e[f](n[f],r,n),void 0===l))continue;r[f]=l}}return r}},{}],572:[function(b,D,G){D.exports=function(k,a){if("object"!==typeof a||null===a)a={};return r(k,a.canvas||n,a.context||p,a)};var r=b("./lib/vtext"),n=null,p=null;"undefined"!==typeof document&&(n=document.createElement("canvas"),n.width=8192,n.height=1024,p=n.getContext("2d"))},{"./lib/vtext":573}],573:[function(b,D,G){function r(C,u,F,H){var J="\x3c"+
C+"\x3e";C="\x3c/"+C+"\x3e";for(var I=J.length,M=C.length,E=u[0]===w||u[0]===y,L=0,P;-1<L;){L=F.indexOf(J,L);if(-1===L)break;P=F.indexOf(C,L+I);if(-1===P)break;if(P<=L)break;for(var N=L;N<P+M;++N)if(N<L+I||N>=P)H[N]=null,F=F.substr(0,N)+" "+F.substr(N+1);else if(null!==H[N]){var Q=H[N].indexOf(u[0]);-1===Q?H[N]+=u:E&&(H[N]=H[N].substr(0,Q+1)+(1+parseInt(H[N][Q+1]))+H[N].substr(Q+2))}L+=I;L=F.substr(L,P-L).indexOf(J);L=-1!==L?L:P+M}return H}function n(C,u,F){for(var H=u.textAlign||"start",J=u.textBaseline||
"alphabetic",I=[1073741824,1073741824],M=[0,0],E=C.length,L=0;L<E;++L)for(var P=C[L],N=0;2>N;++N)I[N]=Math.min(I[N],P[N])|0,M[N]=Math.max(M[N],P[N])|0;var Q=0;switch(H){case "center":Q=-.5*(I[0]+M[0]);break;case "right":case "end":Q=-M[0];break;case "left":case "start":Q=-I[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+H+"'");}var O=0;switch(J){case "hanging":case "top":O=-I[1];break;case "middle":O=-.5*(I[1]+M[1]);break;case "alphabetic":case "ideographic":O=-3*F;break;
case "bottom":O=-M[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+J+"'");}var T=1/F;"lineHeight"in u?T*=+u.lineHeight:"width"in u?T=u.width/(M[0]-I[0]):"height"in u&&(T=u.height/(M[1]-I[1]));return C.map(function(V){return[T*(V[0]+Q),T*(V[1]+O)]})}function p(C,u,F,H,J,I){function M(){if(""!==Y){var pa=u.measureText(Y).width;u.fillText(Y,V+ca,Z+ba);ca+=pa}}function E(){return""+Math.round(ka)+"px "}function L(pa,oa){var ja=""+u.font;if(!0===I.subscripts){var ra=pa.indexOf(y),
ha=oa.indexOf(y);ra=-1<ra?parseInt(pa[1+ra]):0;ha=-1<ha?parseInt(oa[1+ha]):0;ra!==ha&&(ja=ja.replace(E(),"?px "),ka*=Math.pow(.75,ha-ra),ja=ja.replace("?px ",E()));ba+=.25*T*(ha-ra)}!0===I.superscripts&&(ra=pa.indexOf(w),ha=oa.indexOf(w),ra=-1<ra?parseInt(pa[1+ra]):0,ha=-1<ha?parseInt(oa[1+ha]):0,ra!==ha&&(ja=ja.replace(E(),"?px "),ka*=Math.pow(.75,ha-ra),ja=ja.replace("?px ",E())),ba-=.25*T*(ha-ra));!0===I.bolds&&(ha=-1<pa.indexOf(h),ra=-1<oa.indexOf(h),!ha&&ra&&(ja=la?ja.replace("italic ","italic bold "):
"bold "+ja),ha&&!ra&&(ja=ja.replace("bold ","")));if(!0===I.italics){var la=-1<pa.indexOf(t);pa=-1<oa.indexOf(t);!la&&pa&&(ja="italic "+ja);la&&!pa&&(ja=ja.replace("italic ",""))}u.font=ja}F=F.replace(/\n/g,"");F=!0===I.breaklines?F.replace(/<br>/g,"\n"):F.replace(/<br>/g," ");var P="",N=[];for(aa=0;aa<F.length;++aa)N[aa]=P;!0===I.bolds&&(N=r(g,h,F,N));!0===I.italics&&(N=r(q,t,F,N));!0===I.superscripts&&(N=r(v,A,F,N));!0===I.subscripts&&(N=r(z,B,F,N));var Q=[],O="";for(aa=0;aa<F.length;++aa)null!==
N[aa]&&(O+=F[aa],Q.push(N[aa]));N=O.split("\n");F=N.length;var T=Math.round(J*H),V=H,Z=2*H;J=0;aa=F*T+Z;C.height<aa&&(C.height=aa);u.fillStyle="#000";u.fillRect(0,0,C.width,C.height);u.fillStyle="#fff";var aa;O=0;var Y="";for(C=0;C<F;++C){var ea=N[C]+"\n";var ca=0;var ba=C*T;var ka=H;Y="";for(aa=0;aa<ea.length;++aa){var qa=aa+O<Q.length?Q[aa+O]:Q[Q.length-1];P===qa?Y+=ea[aa]:(M(),Y=ea[aa],void 0!==qa&&(L(P,qa),P=qa))}M();O+=ea.length;aa=Math.round(ca+2*V)|0;J<aa&&(J=aa)}H=J;P=Z+T*F;return f(u.getImageData(0,
0,H,P).data,[P,H,4]).pick(-1,-1,0).transpose(1,0)}function k(C,u,F,H){C=e(C,128);H=H?l(C.cells,C.positions,.25):{edges:C.cells,positions:C.positions};F=n(H.positions,u,F);C=H.edges;H="ccw"===u.orientation;m(F,C);if(u.polygons||u.polygon||u.polyline){u=d(C,F);C=Array(u.length);for(var J=0;J<u.length;++J){for(var I=u[J],M=Array(I.length),E=0;E<I.length;++E){for(var L=I[E],P=Array(L.length),N=0;N<L.length;++N)P[N]=F[L[N]].slice();H&&P.reverse();M[E]=P}C[J]=M}return C}return u.triangles||u.triangulate||
u.triangle?{cells:c(F,C,{delaunay:!1,exterior:!1,interior:!0}),positions:F}:{edges:C,positions:F}}function a(C,u,F){try{return k(C,u,F,!0)}catch(H){}try{return k(C,u,F,!1)}catch(H){}return u.polygons||u.polyline||u.polygon?[]:u.triangles||u.triangulate||u.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}D.exports=function(C,u,F,H){var J=64,I=1.25,M={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};H&&(H.size&&0<H.size&&(J=H.size),H.lineSpacing&&0<H.lineSpacing&&(I=H.lineSpacing),
H.styletags&&H.styletags.breaklines&&(M.breaklines=H.styletags.breaklines?!0:!1),H.styletags&&H.styletags.bolds&&(M.bolds=H.styletags.bolds?!0:!1),H.styletags&&H.styletags.italics&&(M.italics=H.styletags.italics?!0:!1),H.styletags&&H.styletags.subscripts&&(M.subscripts=H.styletags.subscripts?!0:!1),H.styletags&&H.styletags.superscripts&&(M.superscripts=H.styletags.superscripts?!0:!1));F.font=[H.fontStyle,H.fontVariant,H.fontWeight,J+"px",H.font].filter(function(E){return E}).join(" ");F.textAlign=
"start";F.textBaseline="alphabetic";F.direction="ltr";C=p(u,F,C,J,I,M);return a(C,H,J)};D.exports.processPixels=a;var e=b("surface-nets"),f=b("ndarray"),l=b("simplify-planar-graph"),m=b("clean-pslg"),c=b("cdt2d"),d=b("planar-graph-to-polyline"),g="b",h="b|",q="i",t="i|",v="sup",w="+",A="+1",z="sub",y="-",B="-1"},{cdt2d:112,"clean-pslg":121,ndarray:469,"planar-graph-to-polyline":488,"simplify-planar-graph":534,"surface-nets":542}],574:[function(b,D,G){(function(){function r(A){A.permitHostObjects___&&
A.permitHostObjects___(r)}function n(A){return!("weakmap:"==A.substr(0,8)&&"___"===A.substr(A.length-3))}function p(A){if(A!==Object(A))throw new TypeError("Not an object: "+A);var z=A[h];if(z&&z.key===A)return z;if(g(A)){z={key:A};try{return d(A,h,{value:z,writable:!1,enumerable:!1,configurable:!1}),z}catch(y){}}}function k(A){A.prototype=null;return Object.freeze(A)}function a(){t||"undefined"===typeof console||(t=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}
if("undefined"===typeof ses||!ses.ok||ses.ok()){"undefined"!==typeof ses&&(ses.weakMapPermitHostObjects=r);var e=!1;if("function"===typeof WeakMap){var f=WeakMap;if("undefined"===typeof navigator||!/Firefox/.test(navigator.userAgent)){var l=new f,m=Object.freeze({});l.set(m,1);if(1!==l.get(m))e=!0;else{D.exports=WeakMap;return}}}var c=Object.getOwnPropertyNames,d=Object.defineProperty,g=Object.isExtensible,h="weakmap:ident:"+Math.random()+"___";"undefined"!==typeof crypto&&"function"===typeof crypto.getRandomValues&&
"function"===typeof ArrayBuffer&&"function"===typeof Uint8Array&&(l=new ArrayBuffer(25),l=new Uint8Array(l),crypto.getRandomValues(l),h="weakmap:rand:"+Array.prototype.map.call(l,function(A){return(A%36).toString(36)}).join("")+"___");d(Object,"getOwnPropertyNames",{value:function(A){return c(A).filter(n)}});if("getPropertyNames"in Object){var q=Object.getPropertyNames;d(Object,"getPropertyNames",{value:function(A){return q(A).filter(n)}})}(function(){var A=Object.freeze;d(Object,"freeze",{value:function(B){p(B);
return A(B)}});var z=Object.seal;d(Object,"seal",{value:function(B){p(B);return z(B)}});var y=Object.preventExtensions;d(Object,"preventExtensions",{value:function(B){p(B);return y(B)}})})();var t=!1,v=0,w=function(){this instanceof w||a();var A=[],z=[],y=v++;return Object.create(w.prototype,{get___:{value:k(function(B,C){var u=p(B);if(u)return y in u?u[y]:C;B=A.indexOf(B);return 0<=B?z[B]:C})},has___:{value:k(function(B){var C=p(B);return C?y in C:0<=A.indexOf(B)})},set___:{value:k(function(B,C){var u;
(u=p(B))?u[y]=C:(u=A.indexOf(B),0<=u?z[u]=C:(u=A.length,z[u]=C,A[u]=B));return this})},delete___:{value:k(function(B){var C=p(B);if(C)return y in C&&delete C[y];B=A.indexOf(B);if(0>B)return!1;C=A.length-1;A[B]=void 0;z[B]=z[C];A[B]=A[C];A.length=C;z.length=C;return!0})}})};w.prototype=Object.create(Object.prototype,{get:{value:function(A,z){return this.get___(A,z)},writable:!0,configurable:!0},has:{value:function(A){return this.has___(A)},writable:!0,configurable:!0},set:{value:function(A,z){return this.set___(A,
z)},writable:!0,configurable:!0},"delete":{value:function(A){return this.delete___(A)},writable:!0,configurable:!0}});"function"===typeof f?function(){function A(){this instanceof w||a();var z=new f,y=void 0,B=!1;var C=e?function(u,F){z.set(u,F);z.has(u)||(y||(y=new w),y.set(u,F));return this}:function(u,F){if(B)try{z.set(u,F)}catch(H){y||(y=new w),y.set___(u,F)}else z.set(u,F);return this};return Object.create(w.prototype,{get___:{value:k(function(u,F){return y?z.has(u)?z.get(u):y.get___(u,F):z.get(u,
F)})},has___:{value:k(function(u){return z.has(u)||(y?y.has___(u):!1)})},set___:{value:k(C)},delete___:{value:k(function(u){var F=!!z["delete"](u);return y?y.delete___(u)||F:F})},permitHostObjects___:{value:k(function(u){if(u===r)B=!0;else throw Error("bogus call to permitHostObjects___");})}})}e&&"undefined"!==typeof Proxy&&(Proxy=void 0);A.prototype=w.prototype;D.exports=A;Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!==
typeof Proxy&&(Proxy=void 0),D.exports=w)}})()},{}],575:[function(b,D,G){var r=b("./hidden-store.js");D.exports=function(){var n={};return function(p){if(("object"!==typeof p||null===p)&&"function"!==typeof p)throw Error("Weakmap-shim: Key must be object");var k=p.valueOf(n);return k&&k.identity===n?k:r(p,n)}}},{"./hidden-store.js":576}],576:[function(b,D,G){D.exports=function(r,n){var p={identity:n},k=r.valueOf;Object.defineProperty(r,"valueOf",{value:function(a){return a!==n?k.apply(this,arguments):
p},writable:!0});return p}},{}],577:[function(b,D,G){var r=b("./create-store.js");D.exports=function(){var n=r();return{get:function(p,k){p=n(p);return p.hasOwnProperty("value")?p.value:k},set:function(p,k){n(p).value=k;return this},has:function(p){return"value"in n(p)},"delete":function(p){return delete n(p).value}}}},{"./create-store.js":575}],578:[function(b,D,G){var r=b("get-canvas-context");D.exports=function(n){return r("webgl",n)}},{"get-canvas-context":249}],579:[function(b,D,G){function r(c){this.local=
this.regionalOptions[c||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");var p=n.instance();r.prototype=new n.baseCalendar;b(r.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(c,d){if("string"===typeof c)return(d=c.match(a))?d[0]:"";var g=this._validateYear(c);c=c.month();var h=""+this.toChineseMonth(g,c);d&&2>h.length&&(h="0"+h);this.isIntercalaryMonth(g,c)&&
(h+="i");return h},monthNames:function(c){if("string"===typeof c){var d=c.match(e);return d?d[0]:""}d=this._validateYear(c);c=c.month();var g="一月 二月 三月 四月 五月 六月 七月 八月 九月 十月 十一月 十二月".split(" ")[this.toChineseMonth(d,c)-1];this.isIntercalaryMonth(d,c)&&(g="闰"+g);return g},monthNamesShort:function(c){if("string"===typeof c){var d=c.match(f);return d?d[0]:""}d=this._validateYear(c);c=c.month();var g="一 二 三 四 五 六 七 八 九 十 十一 十二".split(" ")[this.toChineseMonth(d,c)-1];this.isIntercalaryMonth(d,c)&&(g="闰"+
g);return g},parseMonth:function(c,d){c=this._validateYear(c);var g=parseInt(d);if(isNaN(g)){if("闰"===d[0]){var h=!0;d=d.substring(1)}"月"===d[d.length-1]&&(d=d.substring(0,d.length-1));g=1+"一 二 三 四 五 六 七 八 九 十 十一 十二".split(" ").indexOf(d)}else d=d[d.length-1],h="i"===d||"I"===d;return this.toMonthIndex(c,g,h)},dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,
dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(c,d){c.year&&(c=c.year());if("number"!==typeof c||1888>c||2111<c)throw d.replace(/\{0\}/,this.local.name);return c},toMonthIndex:function(c,d,g){c=this.intercalaryMonth(c);if(g&&d!==c||1>d||12<d)throw n.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!g&&d<=c?d-1:d:d-1},toChineseMonth:function(c,d){c.year&&(c=c.year(),d=c.month());c=this.intercalaryMonth(c);if(0>d||d>(c?12:11))throw n.local.invalidMonth.replace(/\{0\}/,
this.local.name);return c?d<c?d+1:d:d+1},intercalaryMonth:function(c){c=this._validateYear(c);return l[c-l[0]]>>13},isIntercalaryMonth:function(c,d){c.year&&(c=c.year(),d=c.month());c=this.intercalaryMonth(c);return!!c&&c===d},leapYear:function(c){return 0!==this.intercalaryMonth(c)},weekOfYear:function(c,d,g){var h=this._validateYear(c,n.local.invalidyear);h=m[h-m[0]];h=p.newDate(h>>9&4095,h>>5&15,h&31);h.add(4-(h.dayOfWeek()||7),"d");c=this.toJD(c,d,g)-h.toJD();return 1+Math.floor(c/7)},monthsInYear:function(c){return this.leapYear(c)?
13:12},daysInMonth:function(c,d){c.year&&(d=c.month(),c=c.year());c=this._validateYear(c);c=l[c-l[0]];if(d>(c>>13?12:11))throw n.local.invalidMonth.replace(/\{0\}/,this.local.name);return c&1<<12-d?30:29},weekDay:function(c,d,g){return 6>(this.dayOfWeek(c,d,g)||7)},toJD:function(c,d,g){q=this._validate(c,q,g,n.local.invalidDate);c=this._validateYear(q.year());d=q.month();g=q.day();var h=this.isIntercalaryMonth(c,d),q=this.toChineseMonth(c,d);if("object"===typeof c)d=q||{};else{if(!("number"===typeof c&&
1888<=c&&2111>=c))throw Error("Lunar year outside range 1888-2111");if(!("number"===typeof q&&1<=q&&12>=q))throw Error("Lunar month outside range 1 - 12");if(!("number"===typeof g&&1<=g&&30>=g))throw Error("Lunar day outside range 1 - 30");if("object"===typeof h){var t=!1;d=h}else t=!!h,d={};c={year:c,month:q,day:g,isIntercalary:t}}q=c.day-1;g=l[c.year-l[0]];h=(h=g>>13)?c.month>h?c.month:c.isIntercalary?c.month:c.month-1:c.month-1;for(t=0;t<h;t++)q+=g&1<<12-t?30:29;c=m[c.year-m[0]];c=new Date(c>>
9&4095,(c>>5&15)-1,(c&31)+q);d.year=c.getFullYear();d.month=1+c.getMonth();d.day=c.getDate();return p.toJD(d.year,d.month,d.day)},fromJD:function(c){var d=p.fromJD(c),g=d.year();c=d.month();d=d.day();if("object"===typeof g)c=c||{};else{if(!("number"===typeof g&&1888<=g&&2111>=g))throw Error("Solar year outside range 1888-2111");if(!("number"===typeof c&&1<=c&&12>=c))throw Error("Solar month outside range 1 - 12");if(!("number"===typeof d&&1<=d&&31>=d))throw Error("Solar day outside range 1 - 31");
g={year:g,month:c,day:d};c={}}d=m[g.year-m[0]];c.year=(g.year<<9|g.month<<5|g.day)>=d?g.year:g.year-1;d=m[c.year-m[0]];g=Math.round((new Date(g.year,g.month-1,g.day)-new Date(d>>9&4095,(d>>5&15)-1,d&31))/864E5);var h=l[c.year-l[0]];for(d=0;13>d;d++){var q=h&1<<12-d?30:29;if(g<q)break;g-=q}h>>=13;!h||d<h?(c.isIntercalary=!1,c.month=1+d):(c.isIntercalary=d===h?!0:!1,c.month=d);c.day=1+g;g=this.toMonthIndex(c.year,c.month,c.isIntercalary);return this.newDate(c.year,g,c.day)},fromString:function(c){c=
c.match(k);var d=this._validateYear(+c[1]),g=this.toMonthIndex(d,+c[2],!!c[3]);return this.newDate(d,g,+c[4])},add:function(c,d,g){var h=c.year(),q=c.month(),t=this.isIntercalaryMonth(h,q);h=this.toChineseMonth(h,q);c=Object.getPrototypeOf(r.prototype).add.call(this,c,d,g);"y"===g&&(d=c.year(),g=c.month(),q=this.isIntercalaryMonth(d,h),t=t&&q?this.toMonthIndex(d,h,!0):this.toMonthIndex(d,h,!1),t!==g&&c.month(t));return c}});var k=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,
e=/^闰?十?[一二三四五六七八九]?月/m,f=/^闰?十?[一二三四五六七八九]?/m;n.calendars.chinese=r;var l=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,
6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,
31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],m=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,
983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,
1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,
1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":593,
"object-assign":473}],580:[function(b,D,G){function r(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");r.prototype=new n.baseCalendar;b(r.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:"Thout;Paopi;Hathor;Koiak;Tobi;Meshir;Paremhat;Paremoude;Pashons;Paoni;Epip;Mesori;Pi Kogi Enavot".split(";"),
monthNamesShort:"Tho Pao Hath Koi Tob Mesh Pat Pad Pash Pao Epi Meso PiK".split(" "),dayNames:"Tkyriaka Pesnau Pshoment Peftoou Ptiou Psoou Psabbaton".split(" "),dayNamesShort:"Tky Pes Psh Pef Pti Pso Psa".split(" "),dayNamesMin:"Tk Pes Psh Pef Pt Pso Psa".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){p=this._validate(p,this.minMonth,this.minDay,n.local.invalidYear);p=p.year()+(0>p.year()?1:0);return 3===p%4||-1===p%4},monthsInYear:function(p){this._validate(p,
this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(p,k,a){p=this.newDate(p,k,a);p.add(-p.dayOfWeek(),"d");return Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(p,k){p=this._validate(p,k,this.minDay,n.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(13===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(p,k,a){return 6>(this.dayOfWeek(p,k,a)||7)},toJD:function(p,k,a){k=this._validate(p,k,a,n.local.invalidDate);
p=k.year();0>p&&p++;return k.day()+30*(k.month()-1)+365*(p-1)+Math.floor(p/4)+this.jdEpoch-1},fromJD:function(p){var k=Math.floor(p)+.5-this.jdEpoch,a=Math.floor((k-Math.floor((k+366)/1461))/365)+1;0>=a&&a--;k=Math.floor(p)+.5-this.newDate(a,1,1).toJD();p=Math.floor(k/30)+1;return this.newDate(a,p,k-30*(p-1)+1)}});n.calendars.coptic=r},{"../main":593,"object-assign":473}],581:[function(b,D,G){function r(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");
r.prototype=new n.baseCalendar;b(r.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:"Ick Offle February March April May June Grune August Spune Sektober Ember December".split(" "),monthNamesShort:"Ick Off Feb Mar Apr May Jun Gru Aug Spu Sek Emb Dec".split(" "),dayNames:"Sunday Octeday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
dayNamesShort:"Sun Oct Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Oc Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(k){this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);return!1},monthsInYear:function(k){this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);return 13},daysInYear:function(k){this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);return 400},weekOfYear:function(k,a,e){k=this.newDate(k,
a,e);k.add(-k.dayOfWeek(),"d");return Math.floor((k.dayOfYear()-1)/8)+1},daysInMonth:function(k,a){k=this._validate(k,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[k.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(k,a,e){return(this._validate(k,a,e,n.local.invalidDate).day()+1)%8},weekDay:function(k,a,e){k=this.dayOfWeek(k,a,e);return 2<=k&&6>=k},extraInfo:function(k,a,e){k=this._validate(k,a,e,n.local.invalidDate);return{century:p[Math.floor((k.year()-1)/100)+1]||""}},
toJD:function(k,a,e){e=this._validate(k,a,e,n.local.invalidDate);k=e.year()+(0>e.year()?1:0);a=e.month();e=e.day();return e+(1<a?16:0)+(2<a?32*(a-2):0)+400*(k-1)+this.jdEpoch-1},fromJD:function(k){k=Math.floor(k+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(k/400)+1;k-=400*(a-1);k+=15<k?16:0;var e=Math.floor(k/32)+1;return this.newDate(0>=a?a-1:a,e,k-32*(e-1)+1)}});var p={20:"Fruitbat",21:"Anchovy"};n.calendars.discworld=r},{"../main":593,"object-assign":473}],582:[function(b,D,G){function r(p){this.local=
this.regionalOptions[p||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");r.prototype=new n.baseCalendar;b(r.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:"Meskerem Tikemet Hidar Tahesas Tir Yekatit Megabit Miazia Genbot Sene Hamle Nehase Pagume".split(" "),monthNamesShort:"Mes Tik Hid Tah Tir Yek Meg Mia Gen Sen Ham Neh Pag".split(" "),
dayNames:"Ehud Segno Maksegno Irob Hamus Arb Kidame".split(" "),dayNamesShort:"Ehu Seg Mak Iro Ham Arb Kid".split(" "),dayNamesMin:"Eh Se Ma Ir Ha Ar Ki".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){p=this._validate(p,this.minMonth,this.minDay,n.local.invalidYear);p=p.year()+(0>p.year()?1:0);return 3===p%4||-1===p%4},monthsInYear:function(p){this._validate(p,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return 13},weekOfYear:function(p,
k,a){p=this.newDate(p,k,a);p.add(-p.dayOfWeek(),"d");return Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(p,k){p=this._validate(p,k,this.minDay,n.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(13===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(p,k,a){return 6>(this.dayOfWeek(p,k,a)||7)},toJD:function(p,k,a){k=this._validate(p,k,a,n.local.invalidDate);p=k.year();0>p&&p++;return k.day()+30*(k.month()-1)+365*(p-1)+Math.floor(p/4)+this.jdEpoch-1},fromJD:function(p){var k=
Math.floor(p)+.5-this.jdEpoch,a=Math.floor((k-Math.floor((k+366)/1461))/365)+1;0>=a&&a--;k=Math.floor(p)+.5-this.newDate(a,1,1).toJD();p=Math.floor(k/30)+1;return this.newDate(a,p,k-30*(p-1)+1)}});n.calendars.ethiopian=r},{"../main":593,"object-assign":473}],583:[function(b,D,G){function r(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}function n(k,a){return k-a*Math.floor(k/a)}var p=b("../main");b=b("object-assign");r.prototype=new p.baseCalendar;b(r.prototype,{name:"Hebrew",
jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:"Nisan;Iyar;Sivan;Tammuz;Av;Elul;Tishrei;Cheshvan;Kislev;Tevet;Shevat;Adar;Adar II".split(";"),monthNamesShort:"Nis Iya Siv Tam Av Elu Tis Che Kis Tev She Ada Ad2".split(" "),dayNames:"Yom Rishon;Yom Sheni;Yom Shlishi;Yom Revi'i;Yom Chamishi;Yom Shishi;Yom Shabbat".split(";"),dayNamesShort:"Ris She Shl Rev Cha Shi Sha".split(" "),
dayNamesMin:"Ri She Shl Re Ch Shi Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(k){k=this._validate(k,this.minMonth,this.minDay,p.local.invalidYear);return this._leapYear(k.year())},_leapYear:function(k){return 7>n(7*(0>k?k+1:k)+1,19)},monthsInYear:function(k){this._validate(k,this.minMonth,this.minDay,p.local.invalidYear);return this._leapYear(k.year?k.year():k)?13:12},weekOfYear:function(k,a,e){k=this.newDate(k,a,e);k.add(-k.dayOfWeek(),"d");return Math.floor((k.dayOfYear()-
1)/7)+1},daysInYear:function(k){k=this._validate(k,this.minMonth,this.minDay,p.local.invalidYear).year();return this.toJD(-1===k?1:k+1,7,1)-this.toJD(k,7,1)},daysInMonth:function(k,a){k.year&&(a=k.month(),k=k.year());this._validate(k,a,this.minDay,p.local.invalidMonth);return 12===a&&this.leapYear(k)?30:8===a&&5===n(this.daysInYear(k),10)?30:9===a&&3===n(this.daysInYear(k),10)?29:this.daysPerMonth[a-1]},weekDay:function(k,a,e){return 6!==this.dayOfWeek(k,a,e)},extraInfo:function(k,a,e){k=this._validate(k,
a,e,p.local.invalidDate);return{yearType:(this.leapYear(k)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(k)%10-3]}},toJD:function(k,a,e){e=this._validate(k,a,e,p.local.invalidDate);k=e.year();a=e.month();e=e.day();var f=0>=k?k+1:k;e=this.jdEpoch+this._delay1(f)+this._delay2(f)+e+1;if(7>a){for(f=7;f<=this.monthsInYear(k);f++)e+=this.daysInMonth(k,f);f=1}else f=7;for(;f<a;f++)e+=this.daysInMonth(k,f);return e},_delay1:function(k){k=Math.floor((235*k-234)/19);k=29*k+Math.floor((12084+
13753*k)/25920);3>n(3*(k+1),7)&&k++;return k},_delay2:function(k){var a=this._delay1(k-1),e=this._delay1(k);return 356===this._delay1(k+1)-e?2:382===e-a?1:0},fromJD:function(k){k=Math.floor(k)+.5;for(var a=Math.floor(98496*(k-this.jdEpoch)/35975351)-1;k>=this.toJD(-1===a?1:a+1,7,1);)a++;for(var e=k<this.toJD(a,1,1)?7:1;k>this.toJD(a,e,this.daysInMonth(a,e));)e++;k=k-this.toJD(a,e,1)+1;return this.newDate(a,e,k)}});p.calendars.hebrew=r},{"../main":593,"object-assign":473}],584:[function(b,D,G){function r(p){this.local=
this.regionalOptions[p||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");r.prototype=new n.baseCalendar;b(r.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:"Muharram;Safar;Rabi' al-awwal;Rabi' al-thani;Jumada al-awwal;Jumada al-thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),
dayNames:"Yawm al-ahad;Yawm al-ithnayn;Yawm ath-thulaathaa';Yawm al-arbi'aa';Yawm al-khamīs;Yawm al-jum'a;Yawm as-sabt".split(";"),dayNamesShort:"Aha Ith Thu Arb Kha Jum Sab".split(" "),dayNamesMin:"Ah It Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(p){return 11>(11*this._validate(p,this.minMonth,this.minDay,n.local.invalidYear).year()+14)%30},weekOfYear:function(p,k,a){p=this.newDate(p,k,a);p.add(-p.dayOfWeek(),"d");return Math.floor((p.dayOfYear()-
1)/7)+1},daysInYear:function(p){return this.leapYear(p)?355:354},daysInMonth:function(p,k){p=this._validate(p,k,this.minDay,n.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(12===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(p,k,a){return 5!==this.dayOfWeek(p,k,a)},toJD:function(p,k,a){a=this._validate(p,k,a,n.local.invalidDate);p=a.year();k=a.month();a=a.day();p=0>=p?p+1:p;return a+Math.ceil(29.5*(k-1))+354*(p-1)+Math.floor((3+11*p)/30)+this.jdEpoch-1},fromJD:function(p){p=
Math.floor(p)+.5;var k=Math.floor((30*(p-this.jdEpoch)+10646)/10631);k=0>=k?k-1:k;var a=Math.min(12,Math.ceil((p-29-this.toJD(k,1,1))/29.5)+1);p=p-this.toJD(k,a,1)+1;return this.newDate(k,a,p)}});n.calendars.islamic=r},{"../main":593,"object-assign":473}],585:[function(b,D,G){function r(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");r.prototype=new n.baseCalendar;b(r.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,
30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,
dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){p=this._validate(p,this.minMonth,this.minDay,n.local.invalidYear);p=0>p.year()?p.year()+1:p.year();return 0===p%4},weekOfYear:function(p,k,a){p=this.newDate(p,k,a);p.add(4-(p.dayOfWeek()||7),"d");return Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(p,k){p=this._validate(p,k,this.minDay,n.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(2===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(p,k,a){return 6>
(this.dayOfWeek(p,k,a)||7)},toJD:function(p,k,a){a=this._validate(p,k,a,n.local.invalidDate);p=a.year();k=a.month();a=a.day();0>p&&p++;2>=k&&(p--,k+=12);return Math.floor(365.25*(p+4716))+Math.floor(30.6001*(k+1))+a-1524.5},fromJD:function(p){var k=Math.floor(p+.5)+1524,a=Math.floor((k-122.1)/365.25),e=Math.floor(365.25*a),f=Math.floor((k-e)/30.6001);p=f-Math.floor(14>f?1:13);a-=Math.floor(2<p?4716:4715);k=k-e-Math.floor(30.6001*f);0>=a&&a--;return this.newDate(a,p,k)}});n.calendars.julian=r},{"../main":593,
"object-assign":473}],586:[function(b,D,G){function r(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}function n(k,a){return k-a*Math.floor(k/a)}var p=b("../main");b=b("object-assign");r.prototype=new p.baseCalendar;b(r.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),monthNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17".split(" "),
dayNames:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesShort:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),dayNamesMin:"0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" "),digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:"Pop Uo Zip Zotz Tzec Xul Yaxkin Mol Chen Yax Zac Ceh Mac Kankin Muan Pax Kayab Cumku Uayeb".split(" "),tzolkinMonths:"Imix Ik Akbal Kan Chicchan Cimi Manik Lamat Muluc Oc Chuen Eb Ben Ix Men Cib Caban Etznab Cauac Ahau".split(" ")}},
leapYear:function(k){this._validate(k,this.minMonth,this.minDay,p.local.invalidYear);return!1},formatYear:function(k){k=this._validate(k,this.minMonth,this.minDay,p.local.invalidYear).year();var a=Math.floor(k/400);k%=400;k+=0>k?400:0;return a+"."+Math.floor(k/20)+"."+k%20},forYear:function(k){k=k.split(".");if(3>k.length)throw"Invalid Mayan year";for(var a=0,e=0;e<k.length;e++){var f=parseInt(k[e],10);if(19<Math.abs(f)||0<e&&0>f)throw"Invalid Mayan year";a=20*a+f}return a},monthsInYear:function(k){this._validate(k,
this.minMonth,this.minDay,p.local.invalidYear);return 18},weekOfYear:function(k,a,e){this._validate(k,a,e,p.local.invalidDate);return 0},daysInYear:function(k){this._validate(k,this.minMonth,this.minDay,p.local.invalidYear);return 360},daysInMonth:function(k,a){this._validate(k,a,this.minDay,p.local.invalidMonth);return 20},daysInWeek:function(){return 5},dayOfWeek:function(k,a,e){return this._validate(k,a,e,p.local.invalidDate).day()},weekDay:function(k,a,e){this._validate(k,a,e,p.local.invalidDate);
return!0},extraInfo:function(k,a,e){a=this._validate(k,a,e,p.local.invalidDate).toJD();k=this._toHaab(a);a=this._toTzolkin(a);return{haabMonthName:this.local.haabMonths[k[0]-1],haabMonth:k[0],haabDay:k[1],tzolkinDayName:this.local.tzolkinMonths[a[0]-1],tzolkinDay:a[0],tzolkinTrecena:a[1]}},_toHaab:function(k){k-=this.jdEpoch;k=n(k+8+340,365);return[Math.floor(k/20)+1,n(k,20)]},_toTzolkin:function(k){k-=this.jdEpoch;return[n(k+20-1,20)+1,n(k+4-1,13)+1]},toJD:function(k,a,e){k=this._validate(k,a,e,
p.local.invalidDate);return k.day()+20*k.month()+360*k.year()+this.jdEpoch},fromJD:function(k){k=Math.floor(k)+.5-this.jdEpoch;var a=Math.floor(k/360);k%=360;k+=0>k?360:0;return this.newDate(a,Math.floor(k/20),k%20)}});p.calendars.mayan=r},{"../main":593,"object-assign":473}],587:[function(b,D,G){function r(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");r.prototype=new n.baseCalendar;var p=n.instance("gregorian");b(r.prototype,{name:"Nanakshahi",
jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:"Chet Vaisakh Jeth Harh Sawan Bhadon Assu Katak Maghar Poh Magh Phagun".split(" "),monthNamesShort:"Che Vai Jet Har Saw Bha Ass Kat Mgr Poh Mgh Pha".split(" "),dayNames:"Somvaar Mangalvar Budhvaar Veervaar Shukarvaar Sanicharvaar Etvaar".split(" "),dayNamesShort:"Som Mangal Budh Veer Shukar Sanichar Et".split(" "),
dayNamesMin:"So Ma Bu Ve Sh Sa Et".split(" "),digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(k){k=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return p.leapYear(k.year()+(1>k.year()?1:0)+1469)},weekOfYear:function(k,a,e){k=this.newDate(k,a,e);k.add(1-(k.dayOfWeek()||7),"d");return Math.floor((k.dayOfYear()-1)/7)+1},daysInMonth:function(k,a){k=this._validate(k,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[k.month()-
1]+(12===k.month()&&this.leapYear(k.year())?1:0)},weekDay:function(k,a,e){return 6>(this.dayOfWeek(k,a,e)||7)},toJD:function(k,a,e){a=this._validate(k,a,e,n.local.invalidMonth);k=a.year();0>k&&k++;e=a.day();for(var f=1;f<a.month();f++)e+=this.daysPerMonth[f-1];return e+p.toJD(k+1468,3,13)},fromJD:function(k){k=Math.floor(k+.5);for(var a=Math.floor((k-(this.jdEpoch-1))/366);k>=this.toJD(a+1,1,1);)a++;k=k-Math.floor(this.toJD(a,1,1)+.5)+1;for(var e=1;k>this.daysInMonth(a,e);)k-=this.daysInMonth(a,e),
e++;return this.newDate(a,e,k)}});n.calendars.nanakshahi=r},{"../main":593,"object-assign":473}],588:[function(b,D,G){function r(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");r.prototype=new n.baseCalendar;b(r.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:"Baisakh Jestha Ashadh Shrawan Bhadra Ashwin Kartik Mangsir Paush Mangh Falgun Chaitra".split(" "),
monthNamesShort:"Bai Je As Shra Bha Ash Kar Mang Pau Ma Fal Chai".split(" "),dayNames:"Aaitabaar Sombaar Manglbaar Budhabaar Bihibaar Shukrabaar Shanibaar".split(" "),dayNamesShort:"Aaita Som Mangl Budha Bihi Shukra Shani".split(" "),dayNamesMin:"Aai So Man Bu Bi Shu Sha".split(" "),digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(p){return this.daysInYear(p)!==this.daysPerYear},weekOfYear:function(p,k,a){p=this.newDate(p,k,a);p.add(-p.dayOfWeek(),"d");return Math.floor((p.dayOfYear()-
1)/7)+1},daysInYear:function(p){p=this._validate(p,this.minMonth,this.minDay,n.local.invalidYear).year();if("undefined"===typeof this.NEPALI_CALENDAR_DATA[p])return this.daysPerYear;for(var k=0,a=this.minMonth;12>=a;a++)k+=this.NEPALI_CALENDAR_DATA[p][a];return k},daysInMonth:function(p,k){p.year&&(k=p.month(),p=p.year());this._validate(p,k,this.minDay,n.local.invalidMonth);return"undefined"===typeof this.NEPALI_CALENDAR_DATA[p]?this.daysPerMonth[k-1]:this.NEPALI_CALENDAR_DATA[p][k]},weekDay:function(p,
k,a){return 6!==this.dayOfWeek(p,k,a)},toJD:function(p,k,a){a=this._validate(p,k,a,n.local.invalidDate);p=a.year();k=a.month();a=a.day();var e=n.instance(),f=0,l=k,m=p;this._createMissingCalendarData(p);p-=9<l||9===l&&a>=this.NEPALI_CALENDAR_DATA[m][0]?56:57;9!==k&&(f=a,l--);for(;9!==l;)0>=l&&(l=12,m--),f+=this.NEPALI_CALENDAR_DATA[m][l],l--;9===k?(f+=a-this.NEPALI_CALENDAR_DATA[m][0],0>f&&(f+=e.daysInYear(p))):f+=this.NEPALI_CALENDAR_DATA[m][9]-this.NEPALI_CALENDAR_DATA[m][0];return e.newDate(p,
1,1).add(f,"d").toJD()},fromJD:function(p){p=n.instance().fromJD(p);var k=p.year();p=p.dayOfYear();k+=56;this._createMissingCalendarData(k);for(var a=9,e=this.NEPALI_CALENDAR_DATA[k][a]-this.NEPALI_CALENDAR_DATA[k][0]+1;p>e;)a++,12<a&&(a=1,k++),e+=this.NEPALI_CALENDAR_DATA[k][a];return this.newDate(k,a,this.NEPALI_CALENDAR_DATA[k][a]-(e-p))},_createMissingCalendarData:function(p){var k=this.daysPerMonth.slice(0);k.unshift(17);for(var a=p-1;a<p+2;a++)"undefined"===typeof this.NEPALI_CALENDAR_DATA[a]&&
(this.NEPALI_CALENDAR_DATA[a]=k)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,
30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,
29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2E3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,
30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,
31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,
31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,
32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,
31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,
31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,
31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,
31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,
31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,
31,32,31,32,30,31,30,29,30,29,30,30]}});n.calendars.nepali=r},{"../main":593,"object-assign":473}],589:[function(b,D,G){function r(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");r.prototype=new n.baseCalendar;b(r.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:"Farvardin Ordibehesht Khordad Tir Mordad Shahrivar Mehr Aban Azar Day Bahman Esfand".split(" "),
monthNamesShort:"Far Ord Kho Tir Mor Sha Meh Aba Aza Day Bah Esf".split(" "),dayNames:"Yekshambe Doshambe Seshambe Chæharshambe Panjshambe Jom'e Shambe".split(" "),dayNamesShort:"Yek Do Se Chæ Panj Jom Sha".split(" "),dayNamesMin:"Ye Do Se Ch Pa Jo Sh".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(p){p=this._validate(p,this.minMonth,this.minDay,n.local.invalidYear);return 682>682*((p.year()-(0<p.year()?474:473))%2820+512)%2816},weekOfYear:function(p,k,a){p=
this.newDate(p,k,a);p.add(-((p.dayOfWeek()+1)%7),"d");return Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(p,k){p=this._validate(p,k,this.minDay,n.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(12===p.month()&&this.leapYear(p.year())?1:0)},weekDay:function(p,k,a){return 5!==this.dayOfWeek(p,k,a)},toJD:function(p,k,a){a=this._validate(p,k,a,n.local.invalidDate);p=a.year();k=a.month();a=a.day();p-=0<=p?474:473;var e=474+(p-2820*Math.floor(p/2820));return a+(7>=k?31*(k-1):30*(k-
1)+6)+Math.floor((682*e-110)/2816)+365*(e-1)+1029983*Math.floor(p/2820)+this.jdEpoch-1},fromJD:function(p){p=Math.floor(p)+.5;var k=p-this.toJD(475,1,1),a=Math.floor(k/1029983);k-=1029983*Math.floor(k/1029983);var e=2820;1029982!==k&&(e=Math.floor(k/366),e=Math.floor((2134*e+2816*(k-366*Math.floor(k/366))+2815)/1028522)+e+1);a=e+2820*a+474;a=0>=a?a-1:a;k=p-this.toJD(a,1,1)+1;k=186>=k?Math.ceil(k/31):Math.ceil((k-6)/30);p=p-this.toJD(a,k,1)+1;return this.newDate(a,k,p)}});n.calendars.persian=r;n.calendars.jalali=
r},{"../main":593,"object-assign":473}],590:[function(b,D,G){function r(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");var p=n.instance();r.prototype=new n.baseCalendar;b(r.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(k){k=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);k=this._t2gYear(k.year());return p.leapYear(k)},weekOfYear:function(k,a,e){a=this._validate(k,this.minMonth,
this.minDay,n.local.invalidYear);k=this._t2gYear(a.year());return p.weekOfYear(k,a.month(),a.day())},daysInMonth:function(k,a){k=this._validate(k,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[k.month()-1]+(2===k.month()&&this.leapYear(k.year())?1:0)},weekDay:function(k,a,e){return 6>(this.dayOfWeek(k,a,e)||7)},toJD:function(k,a,e){a=this._validate(k,a,e,n.local.invalidDate);k=this._t2gYear(a.year());return p.toJD(k,a.month(),a.day())},fromJD:function(k){k=p.fromJD(k);var a=this._g2tYear(k.year());
return this.newDate(a,k.month(),k.day())},_t2gYear:function(k){return k+this.yearsOffset+(k>=-this.yearsOffset&&-1>=k?1:0)},_g2tYear:function(k){return k-this.yearsOffset-(1<=k&&k<=this.yearsOffset?1:0)}});n.calendars.taiwan=r},{"../main":593,"object-assign":473}],591:[function(b,D,G){function r(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");var p=n.instance();r.prototype=new n.baseCalendar;b(r.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,
daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(k){k=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);k=this._t2gYear(k.year());return p.leapYear(k)},weekOfYear:function(k,a,e){a=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);k=this._t2gYear(a.year());return p.weekOfYear(k,a.month(),a.day())},daysInMonth:function(k,a){k=this._validate(k,a,this.minDay,n.local.invalidMonth);return this.daysPerMonth[k.month()-1]+(2===k.month()&&this.leapYear(k.year())?
1:0)},weekDay:function(k,a,e){return 6>(this.dayOfWeek(k,a,e)||7)},toJD:function(k,a,e){a=this._validate(k,a,e,n.local.invalidDate);k=this._t2gYear(a.year());return p.toJD(k,a.month(),a.day())},fromJD:function(k){k=p.fromJD(k);var a=this._g2tYear(k.year());return this.newDate(a,k.month(),k.day())},_t2gYear:function(k){return k-this.yearsOffset-(1<=k&&k<=this.yearsOffset?1:0)},_g2tYear:function(k){return k+this.yearsOffset+(k>=-this.yearsOffset&&-1>=k?1:0)}});n.calendars.thai=r},{"../main":593,"object-assign":473}],
592:[function(b,D,G){function r(k){this.local=this.regionalOptions[k||""]||this.regionalOptions[""]}var n=b("../main");b=b("object-assign");r.prototype=new n.baseCalendar;b(r.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:"Al-Muharram;Safar;Rabi' al-awwal;Rabi' Al-Thani;Jumada Al-Awwal;Jumada Al-Thani;Rajab;Sha'aban;Ramadan;Shawwal;Dhu al-Qi'dah;Dhu al-Hijjah".split(";"),monthNamesShort:"Muh Saf Rab1 Rab2 Jum1 Jum2 Raj Sha' Ram Shaw DhuQ DhuH".split(" "),
dayNames:"Yawm al-Ahad;Yawm al-Ithnain;Yawm al-Thalāthā’;Yawm al-Arba‘ā’;Yawm al-Khamīs;Yawm al-Jum‘a;Yawm al-Sabt".split(";"),dayNamesMin:"Ah Ith Th Ar Kh Ju Sa".split(" "),digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(k){k=this._validate(k,this.minMonth,this.minDay,n.local.invalidYear);return 355===this.daysInYear(k.year())},weekOfYear:function(k,a,e){k=this.newDate(k,a,e);k.add(-k.dayOfWeek(),"d");return Math.floor((k.dayOfYear()-1)/7)+1},daysInYear:function(k){for(var a=
0,e=1;12>=e;e++)a+=this.daysInMonth(k,e);return a},daysInMonth:function(k,a){k=this._validate(k,a,this.minDay,n.local.invalidMonth).toJD()-24E5+.5;for(var e=a=0;e<p.length;e++){if(p[e]>k)return p[a]-p[a-1];a++}return 30},weekDay:function(k,a,e){return 5!==this.dayOfWeek(k,a,e)},toJD:function(k,a,e){k=this._validate(k,a,e,n.local.invalidDate);a=12*(k.year()-1)+k.month()-15292;return k.day()+p[a-1]-1+24E5-.5},fromJD:function(k){k=k-24E5+.5;for(var a=0,e=0;e<p.length&&!(p[e]>k);e++)a++;e=a+15292;var f=
Math.floor((e-1)/12);return this.newDate(f+1,e-12*f,k-p[a-1]+1)},isValid:function(k,a,e){var f=n.baseCalendar.prototype.isValid.apply(this,arguments);f&&(k=null!=k.year?k.year:k,f=1276<=k&&1500>=k);return f},_validate:function(k,a,e,f){var l=n.baseCalendar.prototype._validate.apply(this,arguments);if(1276>l.year||1500<l.year)throw f.replace(/\{0\}/,this.local.name);return l}});n.calendars.ummalqura=r;var p=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,
729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,
3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,
6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,
9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,
12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,
14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,
17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,
19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,
22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,
24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,
27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,
29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,
32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,
34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,
37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,
39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,
42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,
44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,
46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,
49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,
51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,
54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,
56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,
59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,
61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,
64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,
66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68E3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,
69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,
71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,
74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,
76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,
79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":593,"object-assign":473}],593:[function(b,D,G){function r(){this.regionalOptions=[];this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"};this.local=this.regionalOptions[""];
this.calendars={};this._localCals={}}function n(f,l,m,c){this._calendar=f;this._year=l;this._month=m;this._day=c;if(0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(e.local.invalidDate||e.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);}function p(f,l){f=""+f;return"000000".substring(0,l-f.length)+f}function k(){this.shortYearCutoff="+10"}function a(f){this.local=this.regionalOptions[f]||this.regionalOptions[""]}b=b("object-assign");
b(r.prototype,{instance:function(f,l){f=(f||"gregorian").toLowerCase();l=l||"";var m=this._localCals[f+"-"+l];!m&&this.calendars[f]&&(m=new this.calendars[f](l),this._localCals[f+"-"+l]=m);if(!m)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,f);return m},newDate:function(f,l,m,c,d){c=(null!=f&&f.year?f.calendar():"string"===typeof c?this.instance(c,d):c)||this.instance();return c.newDate(f,l,m)},substituteDigits:function(f){return function(l){return(l+
"").replace(/[0-9]/g,function(m){return f[m]})}},substituteChineseDigits:function(f,l){return function(m){for(var c="",d=0;0<m;){var g=m%10;c=(0===g?"":f[g]+l[d])+c;d++;m=Math.floor(m/10)}0===c.indexOf(f[1]+l[1])&&(c=c.substr(1));return c||f[0]}}});b(n.prototype,{newDate:function(f,l,m){return this._calendar.newDate(null==f?this:f,l,m)},year:function(f){return 0===arguments.length?this._year:this.set(f,"y")},month:function(f){return 0===arguments.length?this._month:this.set(f,"m")},day:function(f){return 0===
arguments.length?this._day:this.set(f,"d")},date:function(f,l,m){if(!this._calendar.isValid(f,l,m))throw(e.local.invalidDate||e.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);this._year=f;this._month=l;this._day=m;return this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},
daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(f,l){return this._calendar.add(this,f,l)},set:function(f,l){return this._calendar.set(this,f,l)},compareTo:function(f){if(this._calendar.name!==
f._calendar.name)throw(e.local.differentCalendars||e.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,f._calendar.local.name);f=this._year!==f._year?this._year-f._year:this._month!==f._month?this.monthOfYear()-f.monthOfYear():this._day-f._day;return 0===f?0:0>f?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(f){return this._calendar.fromJD(f)},toJSDate:function(){return this._calendar.toJSDate(this)},
fromJSDate:function(f){return this._calendar.fromJSDate(f)},toString:function(){return(0>this.year()?"-":"")+p(Math.abs(this.year()),4)+"-"+p(this.month(),2)+"-"+p(this.day(),2)}});b(k.prototype,{_validateLevel:0,newDate:function(f,l,m){if(null==f)return this.today();f.year&&(this._validate(f,l,m,e.local.invalidDate||e.regionalOptions[""].invalidDate),m=f.day(),l=f.month(),f=f.year());return new n(this,f,l,m)},today:function(){return this.fromJSDate(new Date)},epoch:function(f){return 0>this._validate(f,
this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear).year()?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(f){f=this._validate(f,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear);return(0>f.year()?"-":"")+p(Math.abs(f.year()),4)},monthsInYear:function(f){this._validate(f,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear);return 12},monthOfYear:function(f,l){f=this._validate(f,l,this.minDay,
e.local.invalidMonth||e.regionalOptions[""].invalidMonth);return(f.month()+this.monthsInYear(f)-this.firstMonth)%this.monthsInYear(f)+this.minMonth},fromMonthOfYear:function(f,l){l=(l+this.firstMonth-2*this.minMonth)%this.monthsInYear(f)+this.minMonth;this._validate(f,l,this.minDay,e.local.invalidMonth||e.regionalOptions[""].invalidMonth);return l},daysInYear:function(f){f=this._validate(f,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear);return this.leapYear(f)?366:
365},dayOfYear:function(f,l,m){f=this._validate(f,l,m,e.local.invalidDate||e.regionalOptions[""].invalidDate);return f.toJD()-this.newDate(f.year(),this.fromMonthOfYear(f.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(f,l,m){f=this._validate(f,l,m,e.local.invalidDate||e.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(f))+2)%this.daysInWeek()},extraInfo:function(f,l,m){this._validate(f,l,m,e.local.invalidDate||e.regionalOptions[""].invalidDate);
return{}},add:function(f,l,m){this._validate(f,this.minMonth,this.minDay,e.local.invalidDate||e.regionalOptions[""].invalidDate);return this._correctAdd(f,this._add(f,l,m),l,m)},_add:function(f,l,m){this._validateLevel++;if("d"===m||"w"===m){l=f.toJD()+l*("w"===m?this.daysInWeek():1);var c=f.calendar().fromJD(l);this._validateLevel--;return[c.year(),c.month(),c.day()]}try{var d=f.year()+("y"===m?l:0),g=f.monthOfYear()+("m"===m?l:0);c=f.day();if("y"===m)f.month()!==this.fromMonthOfYear(d,g)&&(g=this.newDate(d,
f.month(),this.minDay).monthOfYear()),g=Math.min(g,this.monthsInYear(d)),c=Math.min(c,this.daysInMonth(d,this.fromMonthOfYear(d,g)));else if("m"===m){for(;g<this.minMonth;)d--,g+=this.monthsInYear(d);for(var h=this.monthsInYear(d);g>h-1+this.minMonth;)d++,g-=h,h=this.monthsInYear(d);c=Math.min(c,this.daysInMonth(d,this.fromMonthOfYear(d,g)))}var q=[d,this.fromMonthOfYear(d,g),c];this._validateLevel--;return q}catch(t){throw this._validateLevel--,t;}},_correctAdd:function(f,l,m,c){this.hasYearZero||
"y"!==c&&"m"!==c||0!==l[0]&&0<f.year()===0<l[0]||(l={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[c],l=this._add(f,m*l[0]+(0>m?-1:1)*l[1],l[2]));return f.date(l[0],l[1],l[2])},set:function(f,l,m){this._validate(f,this.minMonth,this.minDay,e.local.invalidDate||e.regionalOptions[""].invalidDate);var c="y"===m?l:f.year(),d="m"===m?l:f.month();l="d"===m?l:f.day();if("y"===m||"m"===m)l=Math.min(l,this.daysInMonth(c,d));return f.date(c,
d,l)},isValid:function(f,l,m){this._validateLevel++;var c=this.hasYearZero||0!==f;c&&(f=this.newDate(f,l,this.minDay),c=l>=this.minMonth&&l-this.minMonth<this.monthsInYear(f)&&m>=this.minDay&&m-this.minDay<this.daysInMonth(f));this._validateLevel--;return c},toJSDate:function(f,l,m){f=this._validate(f,l,m,e.local.invalidDate||e.regionalOptions[""].invalidDate);return e.instance().fromJD(this.toJD(f)).toJSDate()},fromJSDate:function(f){return this.fromJD(e.instance().fromJSDate(f).toJD())},_validate:function(f,
l,m,c){if(f.year){if(0===this._validateLevel&&this.name!==f.calendar().name)throw(e.local.differentCalendars||e.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,f.calendar().local.name);return f}try{this._validateLevel++;if(1===this._validateLevel&&!this.isValid(f,l,m))throw c.replace(/\{0\}/,this.local.name);var d=this.newDate(f,l,m);this._validateLevel--;return d}catch(g){throw this._validateLevel--,g;}}});a.prototype=new k;b(a.prototype,{name:"Gregorian",
jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){f=this._validate(f,this.minMonth,this.minDay,e.local.invalidYear||e.regionalOptions[""].invalidYear);f=f.year()+(0>f.year()?1:0);return 0===f%4&&(0!==f%100||0===f%400)},weekOfYear:function(f,l,m){f=this.newDate(f,l,m);f.add(4-(f.dayOfWeek()||7),"d");return Math.floor((f.dayOfYear()-1)/7)+1},daysInMonth:function(f,l){f=this._validate(f,l,this.minDay,e.local.invalidMonth||e.regionalOptions[""].invalidMonth);return this.daysPerMonth[f.month()-
1]+(2===f.month()&&this.leapYear(f.year())?1:0)},weekDay:function(f,l,m){return 6>(this.dayOfWeek(f,l,m)||7)},toJD:function(f,l,m){m=this._validate(f,l,m,e.local.invalidDate||e.regionalOptions[""].invalidDate);f=m.year();l=m.month();m=m.day();0>f&&f++;3>l&&(l+=12,f--);var c=Math.floor(f/100);return Math.floor(365.25*(f+4716))+Math.floor(30.6001*(l+1))+m+(2-c+Math.floor(c/4))-1524.5},fromJD:function(f){f=Math.floor(f+.5);var l=Math.floor((f-1867216.25)/36524.25);l=f+1+l-Math.floor(l/4);var m=l+1524;
f=Math.floor((m-122.1)/365.25);var c=Math.floor(365.25*f);l=Math.floor((m-c)/30.6001);m=m-c-Math.floor(30.6001*l);l-=13.5<l?13:1;f-=2.5<l?4716:4715;0>=f&&f--;return this.newDate(f,l,m)},toJSDate:function(f,l,m){f=this._validate(f,l,m,e.local.invalidDate||e.regionalOptions[""].invalidDate);f=new Date(f.year(),f.month()-1,f.day());f.setHours(0);f.setMinutes(0);f.setSeconds(0);f.setMilliseconds(0);f.setHours(12<f.getHours()?f.getHours()+2:0);return f},fromJSDate:function(f){return this.newDate(f.getFullYear(),
f.getMonth()+1,f.getDate())}});var e=D.exports=new r;e.cdate=n;e.baseCalendar=k;e.calendars.gregorian=a},{"object-assign":473}],594:[function(b,D,G){D=b("object-assign");var r=b("./main");D(r.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"});
r.local=r.regionalOptions[""];D(r.cdate.prototype,{formatDate:function(n,p){"string"!==typeof n&&(p=n,n="");return this._calendar.formatDate(n||"",this,p)}});D(r.baseCalendar.prototype,{UNIX_EPOCH:r.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:r.instance().jdEpoch,TICKS_PER_DAY:864E9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",
RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(n,p,k){"string"!==typeof n&&(k=p,p=n,n="");if(!p)return"";if(p.calendar()!==this)throw r.local.invalidFormat||r.regionalOptions[""].invalidFormat;n=n||this.local.dateFormat;k=k||{};for(var a=k.dayNamesShort||this.local.dayNamesShort,e=k.dayNames||this.local.dayNames,f=k.monthNumbers||this.local.monthNumbers,l=k.monthNamesShort||this.local.monthNamesShort,m=k.monthNames||this.local.monthNames,c=function(B,C){for(var u=1;y+
u<n.length&&n.charAt(y+u)===B;)u++;y+=u-1;return 1<Math.floor(u/(C||1))},d=function(B,C,u,F){C=""+C;if(c(B,F))for(;C.length<u;)C="0"+C;return C},g=function(B,C,u,F){return c(B)?F[C]:u[C]},h=this,q=function(B){return"function"===typeof f?f.call(h,B,c("m")):w(d("m",B.month(),2))},t=function(B,C){return C?"function"===typeof m?m.call(h,B):m[B.month()-h.minMonth]:"function"===typeof l?l.call(h,B):l[B.month()-h.minMonth]},v=this.local.digits,w=function(B){return k.localNumbers&&v?v(B):B},A="",z=!1,y=0;y<
n.length;y++)if(z)"'"!==n.charAt(y)||c("'")?A+=n.charAt(y):z=!1;else switch(n.charAt(y)){case "d":A+=w(d("d",p.day(),2));break;case "D":A+=g("D",p.dayOfWeek(),a,e);break;case "o":A+=d("o",p.dayOfYear(),3);break;case "w":A+=d("w",p.weekOfYear(),2);break;case "m":A+=q(p);break;case "M":A+=t(p,c("M"));break;case "y":A+=c("y",2)?p.year():(10>p.year()%100?"0":"")+p.year()%100;break;case "Y":c("Y",2);A+=p.formatYear();break;case "J":A+=p.toJD();break;case "@":A+=(p.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;
break;case "!":A+=(p.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case "'":c("'")?A+="'":z=!0;break;default:A+=n.charAt(y)}return A},parseDate:function(n,p,k){if(null==p)throw r.local.invalidArguments||r.regionalOptions[""].invalidArguments;p="object"===typeof p?p.toString():p+"";if(""===p)return null;n=n||this.local.dateFormat;k=k||{};var a=k.shortYearCutoff||this.shortYearCutoff;a="string"!==typeof a?a:this.today().year()%100+parseInt(a,10);for(var e=k.dayNamesShort||this.local.dayNamesShort,
f=k.dayNames||this.local.dayNames,l=k.parseMonth||this.local.parseMonth,m=k.monthNumbers||this.local.monthNumbers,c=k.monthNamesShort||this.local.monthNamesShort,d=k.monthNames||this.local.monthNames,g=k=-1,h=-1,q=-1,t=-1,v=!1,w=!1,A=function(I,M){for(var E=1;J+E<n.length&&n.charAt(J+E)===I;)E++;J+=E-1;return 1<Math.floor(E/(M||1))},z=function(I,M){M=A(I,M);I=[2,3,M?4:2,M?4:2,10,11,20]["oyYJ@!".indexOf(I)+1];I=new RegExp("^-?\\d{1,"+I+"}");I=p.substring(H).match(I);if(!I)throw(r.local.missingNumberAt||
r.regionalOptions[""].missingNumberAt).replace(/\{0\}/,H);H+=I[0].length;return parseInt(I[0],10)},y=this,B=function(){if("function"===typeof m){A("m");var I=m.call(y,p.substring(H));H+=I.length;return I}return z("m")},C=function(I,M,E,L){I=A(I,L)?E:M;for(M=0;M<I.length;M++)if(p.substr(H,I[M].length).toLowerCase()===I[M].toLowerCase())return H+=I[M].length,M+y.minMonth;throw(r.local.unknownNameAt||r.regionalOptions[""].unknownNameAt).replace(/\{0\}/,H);},u=function(){if("function"===typeof d){var I=
A("M")?d.call(y,p.substring(H)):c.call(y,p.substring(H));H+=I.length;return I}return C("M",c,d)},F=function(){if(p.charAt(H)!==n.charAt(J))throw(r.local.unexpectedLiteralAt||r.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,H);H++},H=0,J=0;J<n.length;J++)if(w)"'"!==n.charAt(J)||A("'")?F():w=!1;else switch(n.charAt(J)){case "d":q=z("d");break;case "D":C("D",e,f);break;case "o":t=z("o");break;case "w":z("w");break;case "m":h=B();break;case "M":h=u();break;case "y":g=J;v=!A("y",2);J=g;g=z("y",
2);break;case "Y":g=z("Y",2);break;case "J":k=z("J")+.5;"."===p.charAt(H)&&(H++,z("J"));break;case "@":k=z("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case "!":k=z("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case "*":H=p.length;break;case "'":A("'")?F():w=!0;break;default:F()}if(H<p.length)throw r.local.unexpectedText||r.regionalOptions[""].unexpectedText;-1===g?g=this.today().year():100>g&&v&&(g+=-1===a?1900:this.today().year()-this.today().year()%100-(g<=a?0:100));"string"===typeof h&&(h=l.call(this,
g,h));if(-1<t)for(h=1,q=t,a=this.daysInMonth(g,h);q>a;a=this.daysInMonth(g,h))h++,q-=a;return-1<k?this.fromJD(k):this.newDate(g,h,q)},determineDate:function(n,p,k,a,e){k&&"object"!==typeof k&&(e=a,a=k,k=null);"string"!==typeof a&&(e=a,a="");p=p?p.newDate():null;if(null==n)n=p;else{if("string"===typeof n)a:{try{var f=this.parseDate(a,n,e);break a}catch(l){}n=n.toLowerCase();k=(n.match(/^c/)&&k?k.newDate():null)||this.today();a=/([+-]?[0-9]+)\s*(d|w|m|y)?/g;for(e=a.exec(n);e;)k.add(parseInt(e[1],10),
e[2]||"d"),e=a.exec(n);f=k}else f="number"===typeof n?isNaN(n)||Infinity===n||-Infinity===n?p:this.today().add(n,"d"):this.newDate(n);n=f}return n}})},{"./main":593,"object-assign":473}],595:[function(b,D,G){D.exports=b("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da \x3d _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db \x3d _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da \x3e\x3d 0) !\x3d\x3d (_inline_1_db \x3e\x3d 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",
args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":151}],596:[function(b,D,G){D.exports=function(n,p){var k=[];p=+p||0;r(n.hi(n.shape[0]-1),k,p);return k};var r=b("./lib/zc-core")},
{"./lib/zc-core":595}],597:[function(b,D,G){D.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],598:[function(b,D,G){G=
b("./arrow_paths");var r=b("../../plots/font_attributes"),n=b("../../plots/cartesian/constants");b=b("../../plot_api/plot_template").templatedArray;D.exports=b("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:r({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",
min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},
borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:G.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:G.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},
startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",n.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",
values:["pixel",n.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",n.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",n.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",
values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:r({editType:"arraydraw"}),
editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803,"../../plots/font_attributes":825,"./arrow_paths":597}],599:[function(b,D,G){function r(e){p.filterVisible(e._fullLayout.annotations).forEach(function(f){var l=k.getFromId(e,f.xref),m=k.getFromId(e,f.yref);f._extremes={};l&&n(f,l);m&&n(f,m)})}function n(e,f){var l=f._id,m=l.charAt(0),
c=e[m],d=e["a"+m],g=e["_"+m+"padplus"],h=e["_"+m+"padminus"],q={x:1,y:-1}[m]*e[m+"shift"],t=3*e.arrowsize*e.arrowwidth||0,v=t+q,w=t-q,A=3*e.startarrowsize*e.arrowwidth||0;t=A+q;q=A-q;e["a"+m+"ref"]===e[m+"ref"]?(m=k.findExtremes(f,[f.r2c(c)],{ppadplus:v,ppadminus:w}),f=k.findExtremes(f,[f.r2c(d)],{ppadplus:Math.max(g,t),ppadminus:Math.max(h,q)}),f={min:[m.min[0],f.min[0]],max:[m.max[0],f.max[0]]}):(t=d?t+d:t,q=d?q-d:q,f=k.findExtremes(f,[f.r2c(c)],{ppadplus:Math.max(g,v,t),ppadminus:Math.max(h,w,
q)}));e._extremes[l]=f}var p=b("../../lib"),k=b("../../plots/cartesian/axes"),a=b("./draw").draw;D.exports=function(e){if(p.filterVisible(e._fullLayout.annotations).length&&e._fullData.length)return p.syncOrAsync([a,r],e)}},{"../../lib":749,"../../plots/cartesian/axes":797,"./draw":604}],600:[function(b,D,G){function r(e,f){e=e._fullLayout.annotations;var l=[],m=[],c=[],d=(f||[]).length,g,h,q;for(g=0;g<e.length;g++){var t=e[g];if(q=t.clicktoshow){for(h=0;h<d;h++){var v=f[h];var w=v.xaxis;var A=v.yaxis;
if(w._id===t.xref&&A._id===t.yref&&w.d2r(v.x)===n(t._xclick,w)&&A.d2r(v.y)===n(t._yclick,A)){v=t.visible?"onout"===q?m:c:l;v.push(g);break}}h===d&&t.visible&&"onout"===q&&m.push(g)}}return{on:l,off:m,explicitOff:c}}function n(e,f){return"log"===f.type?f.l2r(e):f.d2r(e)}var p=b("../../lib"),k=b("../../registry"),a=b("../../plot_api/plot_template").arrayEditor;D.exports={hasClickToShow:function(e,f){e=r(e,f);return 0<e.on.length||0<e.explicitOff.length},onClick:function(e,f){var l=r(e,f);f=l.on;l=l.off.concat(l.explicitOff);
var m={},c=e._fullLayout.annotations,d;if(f.length||l.length){for(d=0;d<f.length;d++){var g=a(e.layout,"annotations",c[f[d]]);g.modifyItem("visible",!0);p.extendFlat(m,g.getUpdateObj())}for(d=0;d<l.length;d++)g=a(e.layout,"annotations",c[l[d]]),g.modifyItem("visible",!1),p.extendFlat(m,g.getUpdateObj());return k.call("update",e,{},m)}}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../registry":880}],601:[function(b,D,G){var r=b("../../lib"),n=b("../color");D.exports=function(p,k,a,e){e("opacity");
p=e("bgcolor");var f=e("bordercolor");f=n.opacity(f);e("borderpad");var l=e("borderwidth"),m=e("showarrow");e("text",m?" ":a._dfltTitle.annotation);e("textangle");r.coerceFont(e,"font",a.font);e("width");e("align");e("height")&&e("valign");if(m){m=e("arrowside");if(-1!==m.indexOf("end")){var c=e("arrowhead");var d=e("arrowsize")}-1!==m.indexOf("start")&&(e("startarrowhead",c),e("startarrowsize",d));e("arrowcolor",f?k.bordercolor:n.defaultLine);e("arrowwidth",2*(f&&l||1));e("standoff");e("startstandoff")}k=
e("hovertext");a=a.hoverlabel||{};k&&(p=e("hoverlabel.bgcolor",a.bgcolor||(n.opacity(p)?n.rgb(p):n.defaultLine)),p=e("hoverlabel.bordercolor",a.bordercolor||n.contrast(p)),r.coerceFont(e,"hoverlabel.font",{family:a.font.family,size:a.font.size,color:a.font.color||p}));e("captureevents",!!k)}},{"../../lib":749,"../color":615}],602:[function(b,D,G){var r=b("fast-isnumeric"),n=b("../../lib/to_log_range");D.exports=function(p,k,a,e){function f(g){var h=m[g];h=l?n(h,k.range):Math.pow(10,h);r(h)||(h=null);
e(c+g,h)}k=k||{};var l="log"===a&&"linear"===k.type;a="linear"===a&&"log"===k.type;if(l||a){p=p._fullLayout.annotations;a=k._id.charAt(0);for(var m,c,d=0;d<p.length;d++)m=p[d],c="annotations["+d+"].",m[a+"ref"]===k._id&&f(a),m["a"+a+"ref"]===k._id&&f("a"+a)}}},{"../../lib/to_log_range":775,"fast-isnumeric":241}],603:[function(b,D,G){function r(f,l,m){function c(y,B){return n.coerce(f,l,e,y,B)}var d=c("visible"),g=c("clicktoshow");if(d||g){a(f,l,m,c);d=l.showarrow;var h=["x","y"],q=[-10,-30];m={_fullLayout:m};
for(var t=0;2>t;t++){var v=h[t],w=p.coerceRef(f,l,m,v,"","paper");"paper"!==w&&p.getFromId(m,w)._annIndices.push(l._index);p.coercePosition(l,m,c,w,v,.5);if(d){var A="a"+v,z=p.coerceRef(f,l,m,A,"pixel");"pixel"!==z&&z!==w&&(z=l[A]="pixel");p.coercePosition(l,m,c,z,A,"pixel"===z?q[t]:.4)}c(v+"anchor");c(v+"shift")}n.noneOrAll(f,l,["x","y"]);d&&n.noneOrAll(f,l,["ax","ay"]);g&&(g=c("xclick"),d=c("yclick"),l._xclick=void 0===g?l.x:p.cleanPosition(g,m,l.xref),l._yclick=void 0===d?l.y:p.cleanPosition(d,
m,l.yref))}}var n=b("../../lib"),p=b("../../plots/cartesian/axes"),k=b("../../plots/array_container_defaults"),a=b("./common_defaults"),e=b("./attributes");D.exports=function(f,l){k(f,l,{name:"annotations",handleItemDefaults:r})}},{"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"./attributes":598,"./common_defaults":601}],604:[function(b,D,G){function r(v,w){var A=v._fullLayout.annotations[w]||{},z=f.getFromId(v,A.xref),y=f.getFromId(v,A.yref);z&&z.setScale();
y&&y.setScale();n(v,A,w,!1,z,y)}function n(v,w,A,z,y,B){function C(ja){ja={index:A,annotation:w._input,fullAnnotation:w,event:ja};z&&(ja.subplotId=z);return ja}function u(ja){ja.call(m.font,pa).attr({"text-anchor":{left:"start",right:"end"}[w.align]||"middle"});d.convertToTspans(ja,v,F);return ja}function F(){function ja(Qa,$a){"auto"===$a&&($a=Qa<1/3?"left":Qa>2/3?"right":"center");return{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[$a]}var ra=oa.selectAll("a");1===ra.size()&&ra.text()===
oa.text()&&Y.insert("a",":first-child").attr({"xlink:xlink:href":ra.attr("xlink:href"),"xlink:xlink:show":ra.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(ba.node());ra=Y.select(".annotation-text-math-group");for(var ha=!ra.empty(),la=m.bBox((ha?ra:oa).node()),ua=la.width,na=la.height,wa=w.width||ua,Ca=w.height||na,Fa=Math.round(wa+2*ca),Xa=Math.round(Ca+2*ca),ab=!1,gb=["x","y"],bb=0;bb<gb.length;bb++){var La=gb[bb],kb=w[La+"ref"]||La,mb=w["a"+La+"ref"],ya={x:y,y:B}[La],Ia=(T+
("x"===La?0:-90))*Math.PI/180,Na=Fa*Math.cos(Ia),Ta=Xa*Math.sin(Ia);Ia=Math.abs(Na)+Math.abs(Ta);var hb=w[La+"anchor"],Ya=w[La+"shift"]*("x"===La?1:-1),Ga=O[La];if(ya){var Pa=ya.r2fraction(w[La]);if(0>Pa||1<Pa)if(mb===kb){if(Pa=ya.r2fraction(w["a"+La]),0>Pa||1<Pa)ab=!0}else ab=!0;Pa=ya._offset+ya.r2p(w[La]);var Va=.5}else"x"===La?(Va=w[La],Pa=J.l+J.w*Va):(Va=1-w[La],Pa=J.t+J.h*Va),Va=w.showarrow?.5:Va;w.showarrow?(Ga.head=Pa,hb=w["a"+La],Na=Na*ja(.5,w.xanchor)-Ta*ja(.5,w.yanchor),mb===kb?(Ga.tail=
ya._offset+ya.r2p(hb),ya=Na):(Ga.tail=Pa+hb,ya=Na+hb),Ga.text=Ga.tail+Na,Pa=H["x"===La?"width":"height"],"paper"===kb&&(Ga.head=e.constrain(Ga.head,1,Pa-1)),"pixel"===mb&&(kb=-Math.max(Ga.tail-3,Ga.text),mb=Math.min(Ga.tail+3,Ga.text)-Pa,0<kb?(Ga.tail+=kb,Ga.text+=kb):0<mb&&(Ga.tail-=mb,Ga.text-=mb)),Ga.tail+=Ya,Ga.head+=Ya):(ya=Na=Ia*ja(Va,hb),Ga.text=Pa+Na);Ga.text+=Ya;Na+=Ya;ya+=Ya;w["_"+La+"padplus"]=Ia/2+ya;w["_"+La+"padminus"]=Ia/2-ya;w["_"+La+"size"]=Ia;w["_"+La+"shift"]=Na}if(ab)Y.remove();
else{gb=ab=0;"left"!==w.align&&(ab=(wa-ua)*("center"===w.align?.5:1));"top"!==w.valign&&(gb=(Ca-na)*("middle"===w.valign?.5:1));ha?ra.select("svg").attr({x:ca+ab-1,y:ca+gb}).call(m.setClipUrl,ka?Q:null,v):oa.call(d.positionText,ca+ab-la.left,ca+gb-la.top).call(m.setClipUrl,ka?Q:null,v);qa.select("rect").call(m.setRect,ca,ca,wa,Ca);ba.call(m.setRect,ea/2,ea/2,Fa-ea,Xa-ea);Y.call(m.setTranslate,Math.round(O.x.text-Fa/2),Math.round(O.y.text-Xa/2));Z.attr({transform:"rotate("+T+","+O.x.text+","+O.y.text+
")"});var va=function(Qa,$a){V.selectAll(".annotation-arrow-g").remove();var eb=O.x.head,pb=O.y.head,Za=O.x.tail+Qa,nb=O.y.tail+$a,sb=O.x.text+Qa;Qa=O.y.text+$a;$a=e.rotationXYMatrix(T,sb,Qa);var Cb=e.apply2DTransform($a);$a=e.apply2DTransform2($a);var Ib=+ba.attr("width"),fc=+ba.attr("height");sb-=.5*Ib;Ib=sb+Ib;Qa-=.5*fc;fc=Qa+fc;$a=[[sb,Qa,sb,fc],[sb,fc,Ib,fc],[Ib,fc,Ib,Qa],[Ib,Qa,sb,Qa]].map($a);if(!$a.reduce(function(Qc,Wc){return Qc^!!e.segmentsIntersect(eb,pb,eb+1E6,pb+1E6,Wc[0],Wc[1],Wc[2],
Wc[3])},!1)){$a.forEach(function(Qc){if(Qc=e.segmentsIntersect(Za,nb,eb,pb,Qc[0],Qc[1],Qc[2],Qc[3]))Za=Qc.x,nb=Qc.y});$a=w.arrowwidth;fc=w.arrowcolor;Qa=w.arrowside;var qc=V.append("g").style({opacity:l.opacity(fc)}).classed("annotation-arrow-g",!0);fc=qc.append("path").attr("d","M"+Za+","+nb+"L"+eb+","+pb).style("stroke-width",$a+"px").call(l.stroke,l.rgb(fc));t(fc,Qa,w);if(I.annotationPosition&&fc.node().parentNode&&!z){Qa=eb;fc=pb;w.standoff&&(sb=Math.sqrt(Math.pow(eb-Za,2)+Math.pow(pb-nb,2)),
Qa+=w.standoff*(Za-eb)/sb,fc+=w.standoff*(nb-pb)/sb);$a=qc.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Za-Qa)+","+(nb-fc),transform:"translate("+Qa+","+fc+")"}).style("stroke-width",$a+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");var Cc,cd;h.init({element:$a.node(),gd:v,prepFn:function(){var Qc=m.getTranslate(Y);Cc=Qc.x;cd=Qc.y;y&&y.autorange&&L(y._name+".autorange",!0);B&&B.autorange&&L(B._name+
".autorange",!0)},moveFn:function(Qc,Wc){var Fc=Cb(Cc,cd),ld=Fc[0]+Qc;Fc=Fc[1]+Wc;Y.call(m.setTranslate,ld,Fc);P("x",y?y.p2r(y.r2p(w.x)+Qc):w.x+Qc/J.w);P("y",B?B.p2r(B.r2p(w.y)+Wc):w.y-Wc/J.h);w.axref===w.xref&&P("ax",y.p2r(y.r2p(w.ax)+Qc));w.ayref===w.yref&&P("ay",B.p2r(B.r2p(w.ay)+Wc));qc.attr("transform","translate("+Qc+","+Wc+")");Z.attr({transform:"rotate("+T+","+ld+","+Fc+")"})},doneFn:function(){k.call("_guiRelayout",v,N());var Qc=document.querySelector(".js-notes-box-panel");Qc&&Qc.redraw(Qc.selectedObj)}})}}};
w.showarrow&&va(0,0);if(aa){var Ea;h.init({element:Y.node(),gd:v,prepFn:function(){Ea=Z.attr("transform")},moveFn:function(Qa,$a){var eb="pointer";if(w.showarrow)w.axref===w.xref?P("ax",y.p2r(y.r2p(w.ax)+Qa)):P("ax",w.ax+Qa),w.ayref===w.yref?P("ay",B.p2r(B.r2p(w.ay)+$a)):P("ay",w.ay+$a),va(Qa,$a);else{if(z)return;if(y)var pb=y.p2r(y.r2p(w.x)+Qa);else pb=w._xsize/J.w,pb=h.align(w.x+(w._xshift-w.xshift)/J.w-pb/2+Qa/J.w,pb,0,1,w.xanchor);if(B)var Za=B.p2r(B.r2p(w.y)+$a);else Za=w._ysize/J.h,Za=h.align(w.y-
(w._yshift+w.yshift)/J.h-Za/2-$a/J.h,Za,0,1,w.yanchor);P("x",pb);P("y",Za);y&&B||(eb=h.getCursor(y?.5:pb,B?.5:Za,w.xanchor,w.yanchor))}Z.attr({transform:"translate("+Qa+","+$a+")"+Ea});g(Y,eb)},clickFn:function(Qa,$a){w.captureevents&&v.emit("plotly_clickannotation",C($a))},doneFn:function(){g(Y);k.call("_guiRelayout",v,N());var Qa=document.querySelector(".js-notes-box-panel");Qa&&Qa.redraw(Qa.selectedObj)}})}}}var H=v._fullLayout,J=v._fullLayout._size,I=v._context.edits;if(z){var M="annotation-"+
z;var E=z+".annotations"}else M="annotation",E="annotations";E=q(v.layout,E,w);var L=E.modifyBase,P=E.modifyItem,N=E.getUpdateObj;H._infolayer.selectAll("."+M+'[data-index\x3d"'+A+'"]').remove();var Q="clip"+H._uid+"_ann"+A;if(w._input&&!1!==w.visible){var O={x:{},y:{}},T=+w.textangle||0,V=H._infolayer.append("g").classed(M,!0).attr("data-index",String(A)).style("opacity",w.opacity),Z=V.append("g").classed("annotation-text-g",!0),aa=I[w.showarrow?"annotationTail":"annotationPosition"];M=w.captureevents||
I.annotationText||aa;var Y=Z.append("g").style("pointer-events",M?"all":null).call(g,"pointer").on("click",function(){v._dragging=!1;v.emit("plotly_clickannotation",C(p.event))});if(w.hovertext)Y.on("mouseover",function(){var ja=w.hoverlabel,ra=ja.font,ha=this.getBoundingClientRect(),la=v.getBoundingClientRect();c.loneHover({x0:ha.left-la.left,x1:ha.right-la.left,y:(ha.top+ha.bottom)/2-la.top,text:w.hovertext,color:ja.bgcolor,borderColor:ja.bordercolor,fontFamily:ra.family,fontSize:ra.size,fontColor:ra.color},
{container:H._hoverlayer.node(),outerContainer:H._paper.node(),gd:v})}).on("mouseout",function(){c.loneUnhover(H._hoverlayer.node())});var ea=w.borderwidth,ca=ea+w.borderpad,ba=Y.append("rect").attr("class","bg").style("stroke-width",ea+"px").call(l.stroke,w.bordercolor).call(l.fill,w.bgcolor),ka=w.width||w.height,qa=H._topclips.selectAll("#"+Q).data(ka?[0]:[]);qa.enter().append("clipPath").classed("annclip",!0).attr("id",Q).append("rect");qa.exit().remove();var pa=w.font;M=H._meta?e.templateString(w.text,
H._meta):w.text;var oa=Y.append("text").classed("annotation-text",!0).text(M);if(I.annotationText)oa.call(d.makeEditable,{delegate:Y,gd:v}).call(u).on("edit",function(ja){w.text=ja;this.call(u);P("text",ja);y&&y.autorange&&L(y._name+".autorange",!0);B&&B.autorange&&L(B._name+".autorange",!0);k.call("_guiRelayout",v,N())});else oa.call(u)}else p.selectAll("#"+Q).remove()}var p=b("d3"),k=b("../../registry"),a=b("../../plots/plots"),e=b("../../lib"),f=b("../../plots/cartesian/axes"),l=b("../color"),
m=b("../drawing"),c=b("../fx"),d=b("../../lib/svg_text_utils"),g=b("../../lib/setcursor"),h=b("../dragelement"),q=b("../../plot_api/plot_template").arrayEditor,t=b("./draw_arrow_head");D.exports={draw:function(v){var w=v._fullLayout;w._infolayer.selectAll(".annotation").remove();for(var A=0;A<w.annotations.length;A++)w.annotations[A].visible&&r(v,A);return a.previousPromises(v)},drawOne:r,drawRaw:n}},{"../../lib":749,"../../lib/setcursor":769,"../../lib/svg_text_utils":773,"../../plot_api/plot_template":787,
"../../plots/cartesian/axes":797,"../../plots/plots":860,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"../fx":655,"./draw_arrow_head":605,d3:169}],605:[function(b,D,G){var r=b("d3"),n=b("../color"),p=b("./arrow_paths");D.exports=function(k,a,e){function f(){k.style("stroke-dasharray","0px,100px")}function l(F,H,J,I){F.path&&(F.noRotate&&(J=0),r.select(m.parentNode).append("path").attr({"class":k.attr("class"),d:F.path,transform:"translate("+H.x+","+H.y+")"+(J?"rotate("+
180*J/Math.PI+")":"")+"scale("+I+")"}).style({fill:n.rgb(e.arrowcolor),"stroke-width":0}))}var m=k.node(),c=p[e.arrowhead||0],d=p[e.startarrowhead||0],g=(e.arrowwidth||1)*(e.arrowsize||1),h=(e.arrowwidth||1)*(e.startarrowsize||1),q=0<=a.indexOf("start");a=0<=a.indexOf("end");var t=c.backoff*g+e.standoff,v=d.backoff*h+e.startstandoff;if("line"===m.nodeName){var w={x:+k.attr("x1"),y:+k.attr("y1")};var A={x:+k.attr("x2"),y:+k.attr("y2")};var z=w.x-A.x,y=w.y-A.y;var B=Math.atan2(y,z);var C=B+Math.PI;
if(t&&v&&t+v>Math.sqrt(z*z+y*y)){f();return}if(t){if(t*t>z*z+y*y){f();return}var u=t*Math.sin(B);A.x+=t*Math.cos(B);A.y+=u;k.attr({x2:A.x,y2:A.y})}if(v){if(v*v>z*z+y*y){f();return}t=v*Math.sin(B);w.x-=v*Math.cos(B);w.y-=t;k.attr({x1:w.x,y1:w.y})}}else if("path"===m.nodeName){z=m.getTotalLength();y="";if(z<t+v){f();return}w=m.getPointAtLength(0);B=m.getPointAtLength(.1);B=Math.atan2(w.y-B.y,w.x-B.x);w=m.getPointAtLength(Math.min(v,z));y="0px,"+v+"px,";A=m.getPointAtLength(z);C=m.getPointAtLength(z-
.1);C=Math.atan2(A.y-C.y,A.x-C.x);A=m.getPointAtLength(Math.max(0,z-t));k.style("stroke-dasharray",y+(z-(y?v+t:t)+"px,"+z+"px"))}q&&l(d,w,B,h);a&&l(c,A,C,g)}},{"../color":615,"./arrow_paths":597,d3:169}],606:[function(b,D,G){G=b("./draw");var r=b("./click");D.exports={moduleType:"component",name:"annotations",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("annotations"),calcAutorange:b("./calc_autorange"),draw:G.draw,
drawOne:G.drawOne,drawRaw:G.drawRaw,hasClickToShow:r.hasClickToShow,onClick:r.onClick,convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":809,"./attributes":598,"./calc_autorange":599,"./click":600,"./convert_coords":602,"./defaults":603,"./draw":604}],607:[function(b,D,G){G=b("../annotations/attributes");var r=b("../../plot_api/edit_types").overrideAll;b=b("../../plot_api/plot_template").templatedArray;D.exports=r(b("annotation",{visible:G.visible,x:{valType:"any"},
y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:G.xanchor,xshift:G.xshift,yanchor:G.yanchor,yshift:G.yshift,text:G.text,textangle:G.textangle,font:G.font,width:G.width,height:G.height,opacity:G.opacity,align:G.align,valign:G.valign,bgcolor:G.bgcolor,bordercolor:G.bordercolor,borderpad:G.borderpad,borderwidth:G.borderwidth,showarrow:G.showarrow,arrowcolor:G.arrowcolor,arrowhead:G.arrowhead,startarrowhead:G.startarrowhead,arrowside:G.arrowside,arrowsize:G.arrowsize,
startarrowsize:G.startarrowsize,arrowwidth:G.arrowwidth,standoff:G.standoff,startstandoff:G.startstandoff,hovertext:G.hovertext,hoverlabel:G.hoverlabel,captureevents:G.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../annotations/attributes":598}],608:[function(b,D,G){function r(k,a){var e=a.fullSceneLayout.domain,f=a.fullLayout._size;a={pdata:null,type:"linear",autorange:!1,range:[-Infinity,Infinity]};k._xa={};n.extendFlat(k._xa,a);p.setConvert(k._xa);
k._xa._offset=f.l+e.x[0]*f.w;k._xa.l2p=function(){return.5*(1+k._pdata[0]/k._pdata[3])*f.w*(e.x[1]-e.x[0])};k._ya={};n.extendFlat(k._ya,a);p.setConvert(k._ya);k._ya._offset=f.t+(1-e.y[1])*f.h;k._ya.l2p=function(){return.5*(1-k._pdata[1]/k._pdata[3])*f.h*(e.y[1]-e.y[0])}}var n=b("../../lib"),p=b("../../plots/cartesian/axes");D.exports=function(k){for(var a=k.fullSceneLayout.annotations,e=0;e<a.length;e++)r(a[e],k);k.fullLayout._infolayer.selectAll(".annotation-"+k.id).remove()}},{"../../lib":749,"../../plots/cartesian/axes":797}],
609:[function(b,D,G){function r(f,l,m,c){function d(h,q){return n.coerce(f,l,e,h,q)}function g(h){var q=h+"axis",t={_fullLayout:{}};t._fullLayout[q]=m[q];return p.coercePosition(l,t,d,h,h,.5)}d("visible")&&(a(f,l,c.fullLayout,d),g("x"),g("y"),g("z"),n.noneOrAll(f,l,["x","y","z"]),l.xref="x",l.yref="y",l.zref="z",d("xanchor"),d("yanchor"),d("xshift"),d("yshift"),l.showarrow&&(l.axref="pixel",l.ayref="pixel",d("ax",-10),d("ay",-30),n.noneOrAll(f,l,["ax","ay"])))}var n=b("../../lib"),p=b("../../plots/cartesian/axes"),
k=b("../../plots/array_container_defaults"),a=b("../annotations/common_defaults"),e=b("./attributes");D.exports=function(f,l,m){k(f,l,{name:"annotations",handleItemDefaults:r,fullLayout:m.fullLayout})}},{"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"../annotations/common_defaults":601,"./attributes":607}],610:[function(b,D,G){var r=b("../annotations/draw").drawRaw,n=b("../../plots/gl3d/project"),p=["x","y","z"];D.exports=function(k){for(var a=k.fullSceneLayout,
e=k.dataScale,f=a.annotations,l=0;l<f.length;l++){for(var m=f[l],c=!1,d=0;3>d;d++){var g=p[d];g=a[g+"axis"].r2fraction(m[g]);if(0>g||1<g){c=!0;break}}c?k.fullLayout._infolayer.select(".annotation-"+k.id+'[data-index\x3d"'+l+'"]').remove():(m._pdata=n(k.glplot.cameraParams,[a.xaxis.r2l(m.x)*e[0],a.yaxis.r2l(m.y)*e[1],a.zaxis.r2l(m.z)*e[2]]),r(k.graphDiv,m,l,k.id,m._xa,m._ya))}}},{"../../plots/gl3d/project":848,"../annotations/draw":604}],611:[function(b,D,G){var r=b("../../registry"),n=b("../../lib");
D.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:b("./attributes")}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),includeBasePlot:function(p,k){var a=r.subplotsRegistry.gl3d;if(a)for(var e=a.attrRegex,f=Object.keys(p),l=0;l<f.length;l++){var m=f[l];e.test(m)&&(p[m].annotations||[]).length&&(n.pushUnique(k._basePlotModules,a),n.pushUnique(k._subplots.gl3d,m))}},convert:b("./convert"),draw:b("./draw")}},{"../../lib":749,"../../registry":880,
"./attributes":607,"./convert":608,"./defaults":609,"./draw":610}],612:[function(b,D,G){D.exports=b("world-calendars/dist/main");b("world-calendars/dist/plus");b("world-calendars/dist/calendars/chinese");b("world-calendars/dist/calendars/coptic");b("world-calendars/dist/calendars/discworld");b("world-calendars/dist/calendars/ethiopian");b("world-calendars/dist/calendars/hebrew");b("world-calendars/dist/calendars/islamic");b("world-calendars/dist/calendars/julian");b("world-calendars/dist/calendars/mayan");
b("world-calendars/dist/calendars/nanakshahi");b("world-calendars/dist/calendars/nepali");b("world-calendars/dist/calendars/persian");b("world-calendars/dist/calendars/taiwan");b("world-calendars/dist/calendars/thai");b("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":579,"world-calendars/dist/calendars/coptic":580,"world-calendars/dist/calendars/discworld":581,"world-calendars/dist/calendars/ethiopian":582,"world-calendars/dist/calendars/hebrew":583,"world-calendars/dist/calendars/islamic":584,
"world-calendars/dist/calendars/julian":585,"world-calendars/dist/calendars/mayan":586,"world-calendars/dist/calendars/nanakshahi":587,"world-calendars/dist/calendars/nepali":588,"world-calendars/dist/calendars/persian":589,"world-calendars/dist/calendars/taiwan":590,"world-calendars/dist/calendars/thai":591,"world-calendars/dist/calendars/ummalqura":592,"world-calendars/dist/main":593,"world-calendars/dist/plus":594}],613:[function(b,D,G){function r(q){var t=d[q];return t?t:t=d[q]=k.instance(q)}
function n(q){return a.extendFlat({},l,{description:q})}function p(q){return"Sets the calendar system to use with `"+q+"` date data."}var k=b("./calendars"),a=b("../../lib");b=b("../../constants/numerical");var e=b.EPOCHJD,f=b.ONEDAY,l={valType:"enumerated",values:Object.keys(k.calendars),editType:"calc",dflt:"gregorian"},m=function(q,t,v,w){var A={};A[v]=l;return a.coerce(q,t,A,v,w)},c={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},
m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},d={};b={xcalendar:n(p("x"))};G=a.extendFlat({},b,{ycalendar:n(p("y"))});var g=a.extendFlat({},G,{zcalendar:n(p("z"))}),h=n("Sets the calendar system to use for `range` and `tick0` if this is a date axis. This does not set the calendar for interpreting data on this axis, that's specified in the trace or via the global `layout.calendar`");
D.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:G,bar:G,box:G,heatmap:G,contour:G,histogram:G,histogram2d:G,histogram2dcontour:G,scatter3d:g,surface:g,mesh3d:g,scattergl:G,ohlc:b,candlestick:b},layout:{calendar:n("Sets the default calendar system to use for interpreting and displaying dates throughout the plot.")},subplots:{xaxis:{calendar:h},yaxis:{calendar:h},scene:{xaxis:{calendar:h},yaxis:{calendar:h},zaxis:{calendar:h}},polar:{radialaxis:{calendar:h}}},transforms:{filter:{valuecalendar:n("Sets the calendar system to use for `value`, if it is a date."),
targetcalendar:n("Sets the calendar system to use for `target`, if it is an array of dates. If `target` is a string (eg *x*) we use the corresponding trace attribute (eg `xcalendar`) if it exists, even if `targetcalendar` is provided.")}}},layoutAttributes:l,handleDefaults:m,handleTraceDefaults:function(q,t,v,w){for(var A=0;A<v.length;A++)m(q,t,v[A]+"calendar",w.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",
islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",
ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],
thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:r,worldCalFmt:function(q,t,v){t=Math.floor((t+.05)/f)+e;v=r(v).fromJD(t);t=0;for(var w,A,z;-1!==(t=q.indexOf("%",t));)w=q.charAt(t+1),"0"===w||"-"===w||"_"===w?(z=3,A=q.charAt(t+2),"_"===w&&(w="-")):(A=w,w="0",z=2),(A=c[A])?(w="##"===A?"##":v.formatDate(A[w]),q=q.substr(0,t)+w+q.substr(t+z),t+=w.length):t+=z;return q}}},{"../../constants/numerical":724,"../../lib":749,"./calendars":612}],614:[function(b,D,G){G.defaults=
"#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");G.defaultLine="#444";G.lightLine="#eee";G.background="#fff";G.borderLine="#BEC8D9";G.lightFraction=1E3/11},{}],615:[function(b,D,G){function r(f){if(p(f)||"string"!==typeof f)return f;var l=f.trim();if("rgb"!==l.substr(0,3))return f;var m=l.match(/^rgba?\s*\(([^()]*)\)$/);if(!m)return f;m=m[1].trim().split(/\s*[\s,]\s*/);l="a"===l.charAt(3)&&4===m.length;if(!l&&3!==m.length)return f;for(var c=0;c<m.length;c++){if(!m[c].length)return f;
m[c]=Number(m[c]);if(!(0<=m[c]))return f;if(3===c)1<m[c]&&(m[c]=1);else if(1<=m[c])return f}f=Math.round(255*m[0])+", "+Math.round(255*m[1])+", "+Math.round(255*m[2]);return l?"rgba("+f+", "+m[3]+")":"rgb("+f+")"}var n=b("tinycolor2"),p=b("fast-isnumeric"),k=D.exports={};b=b("./attributes");k.defaults=b.defaults;var a=k.defaultLine=b.defaultLine;k.lightLine=b.lightLine;var e=k.background=b.background;k.tinyRGB=function(f){f=f.toRgb();return"rgb("+Math.round(f.r)+", "+Math.round(f.g)+", "+Math.round(f.b)+
")"};k.rgb=function(f){return k.tinyRGB(n(f))};k.opacity=function(f){return f?n(f).getAlpha():0};k.addOpacity=function(f,l){f=n(f).toRgb();return"rgba("+Math.round(f.r)+", "+Math.round(f.g)+", "+Math.round(f.b)+", "+l+")"};k.combine=function(f,l){var m=n(f).toRgb();if(1===m.a)return n(f).toRgbString();f=n(l||e).toRgb();f=1===f.a?f:{r:255*(1-f.a)+f.r*f.a,g:255*(1-f.a)+f.g*f.a,b:255*(1-f.a)+f.b*f.a};return n({r:f.r*(1-m.a)+m.r*m.a,g:f.g*(1-m.a)+m.g*m.a,b:f.b*(1-m.a)+m.b*m.a}).toRgbString()};k.contrast=
function(f,l,m){var c=n(f);1!==c.getAlpha()&&(c=n(k.combine(f,e)));return(c.isDark()?l?c.lighten(l):e:m?c.darken(m):a).toString()};k.stroke=function(f,l){l=n(l);f.style({stroke:k.tinyRGB(l),"stroke-opacity":l.getAlpha()})};k.fill=function(f,l){l=n(l);f.style({fill:k.tinyRGB(l),"fill-opacity":l.getAlpha()})};k.clean=function(f){if(f&&"object"===typeof f){var l=Object.keys(f),m;for(m=0;m<l.length;m++){var c=l[m];var d=f[c];if("color"===c.substr(c.length-5))if(Array.isArray(d))for(c=0;c<d.length;c++)d[c]=
r(d[c]);else f[c]=r(d);else if("colorscale"===c.substr(c.length-10)&&Array.isArray(d))for(c=0;c<d.length;c++)Array.isArray(d[c])&&(d[c][1]=r(d[c][1]));else if(Array.isArray(d)){if(c=d[0],!Array.isArray(c)&&c&&"object"===typeof c)for(c=0;c<d.length;c++)k.clean(d[c])}else d&&"object"===typeof d&&k.clean(d)}}}},{"./attributes":614,"fast-isnumeric":241,tinycolor2:548}],616:[function(b,D,G){G=b("../../plots/cartesian/layout_attributes");var r=b("../../plots/font_attributes"),n=b("../../lib/extend").extendFlat;
b=b("../../plot_api/edit_types").overrideAll;D.exports=b({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",
values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:G.linecolor,outlinewidth:G.linewidth,bordercolor:G.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:G.tickmode,nticks:G.nticks,tick0:G.tick0,dtick:G.dtick,tickvals:G.tickvals,ticktext:G.ticktext,ticks:n({},G.ticks,{dflt:""}),ticklen:G.ticklen,tickwidth:G.tickwidth,tickcolor:G.tickcolor,showticklabels:G.showticklabels,tickfont:r({}),tickangle:G.tickangle,
tickformat:G.tickformat,tickformatstops:G.tickformatstops,tickprefix:G.tickprefix,showtickprefix:G.showtickprefix,ticksuffix:G.ticksuffix,showticksuffix:G.showticksuffix,separatethousands:G.separatethousands,exponentformat:G.exponentformat,showexponent:G.showexponent,title:{text:{valType:"string"},font:r({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:r({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},
"colorbars","from-root")},{"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/cartesian/layout_attributes":811,"../../plots/font_attributes":825}],617:[function(b,D,G){D.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],618:[function(b,D,G){var r=b("../../lib"),n=b("../../plot_api/plot_template"),
p=b("../../plots/cartesian/tick_value_defaults"),k=b("../../plots/cartesian/tick_mark_defaults"),a=b("../../plots/cartesian/tick_label_defaults"),e=b("./attributes");D.exports=function(f,l,m){function c(h,q){return r.coerce(g,d,e,h,q)}var d=n.newContainer(l,"colorbar"),g=f.colorbar||{};f=c("thicknessmode");c("thickness","fraction"===f?30/(m.width-m.margin.l-m.margin.r):30);f=c("lenmode");c("len","fraction"===f?1:m.height-m.margin.t-m.margin.b);c("x");c("xanchor");c("xpad");c("y");c("yanchor");c("ypad");
r.noneOrAll(g,d,["x","y"]);c("outlinecolor");c("outlinewidth");c("bordercolor");c("borderwidth");c("bgcolor");p(g,d,c,"linear");f={outerTicks:!1,font:m.font};a(g,d,c,"linear",f);k(g,d,c,"linear",f);c("title.text",m._dfltTitle.colorbar);r.coerceFont(c,"title.font",m.font);c("title.side")}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/cartesian/tick_label_defaults":818,"../../plots/cartesian/tick_mark_defaults":819,"../../plots/cartesian/tick_value_defaults":820,"./attributes":616}],
619:[function(b,D,G){function r(I){function M(ka){return h(ka,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function E(){"function"===typeof V.calc?V.calc(I,T,Q):(Q._fillgradient=O.reversescale?z(O.colorscale):O.colorscale,Q._zrange=[O[V.min],O[V.max]])}for(var L=I._fullLayout,P=I.calcdata,N=[],Q,O,T,V,Z=0;Z<P.length;Z++){T=P[Z][0].trace;var aa=T._module.colorbar;if(!0===T.visible&&aa){var Y=Array.isArray(aa);
aa=Y?aa:[aa];for(var ea=0;ea<aa.length;ea++){V=aa[ea];var ca=V.container;(O=ca?T[ca]:T)&&O.showscale&&(Q=M(O.colorbar),Q._id="cb"+T.uid+(Y&&ca?"-"+ca:""),Q._traceIndex=T.index,Q._propPrefix=(ca?ca+".":"")+"colorbar.",Q._meta=T._meta,E(),N.push(Q))}}}for(var ba in L._colorAxes)O=L[ba],O.showscale&&(P=L._colorAxes[ba],Q=M(O.colorbar),Q._id="cb"+ba,Q._propPrefix=ba+".colorbar.",Q._meta=L._meta,V={min:"cmin",max:"cmax"},"heatmap"!==P[0]&&(T=P[1],V.calc=T._module.colorbar.calc),E(),N.push(Q));return N}
function n(I,M,E){function L(La,kb){var mb={propContainer:Fa,propName:M._propPrefix+"title",traceIndex:M._traceIndex,_meta:M._meta,placeholder:P._dfltTitle.colorbar,containerGroup:I.select("."+J.cbtitle)},ya="h"===La.charAt(0)?La.substr(1):"h"+La;I.selectAll("."+ya+",."+ya+"-math-group").remove();w.draw(E,La,h(mb,kb||{}))}var P=E._fullLayout,N=P._size,Q=M._fillcolor,O=M._line,T=M.title,V=T.side,Z=M._zrange||e.extent(("function"===typeof Q?Q:O.color).domain()),aa="function"===typeof O.color?O.color:
function(){return O.color},Y="function"===typeof Q?Q:function(){return Q},ea=M._levels,ca=k(E,M,Z),ba=ca.fill,ka=ca.line,qa=Math.round(M.thickness*("fraction"===M.thicknessmode?N.w:1));ca=qa/N.w;var pa=Math.round(M.len*("fraction"===M.lenmode?N.h:1)),oa=pa/N.h,ja=M.xpad/N.w,ra=(M.borderwidth+M.outlinewidth)/2,ha=M.ypad/N.h,la=Math.round(M.x*N.w+M.xpad),ua=M.x-ca*({middle:.5,right:1}[M.xanchor]||0),na=M.y+oa*(({top:-.5,bottom:.5}[M.yanchor]||0)-.5),wa=Math.round(N.h*(1-na)),Ca=wa-pa;M._lenFrac=oa;
M._thickFrac=ca;M._xLeftFrac=ua;M._yBottomFrac=na;var Fa=M._axis=a(E,M,Z);Fa.position=M.x+ja+ca;-1!==["top","bottom"].indexOf(V)&&(Fa.title.side=V,Fa.titlex=M.x+ja,Fa.titley=na+("top"===T.side?oa-ha:ha));O.color&&"auto"===M.tickmode&&(Fa.tickmode="linear",Fa.tick0=ea.start,T=ea.size,ca=g.constrain((wa-Ca)/50,4,15)+1,ca=(Z[1]-Z[0])/((M.nticks||ca)*T),1<ca&&(pa=Math.pow(10,Math.floor(Math.log(ca)/Math.LN10)),T*=pa*g.roundUp(ca/pa,[2,5,10]),2E-6>(Math.abs(ea.start)/ea.size+1E-6)%1&&(Fa.tick0=0)),Fa.dtick=
T);Fa.domain=[na+ha,na+oa-ha];Fa.setScale();I.attr("transform","translate("+Math.round(N.l)+","+Math.round(N.t)+")");var Xa=I.select("."+J.cbtitleunshift).attr("transform","translate(-"+Math.round(N.l)+",-"+Math.round(N.t)+")"),ab=I.select("."+J.cbaxis),gb,bb=0;return g.syncOrAsync([l.previousPromises,function(){if(-1!==["top","bottom"].indexOf(V)){var La=Fa.title.font.size;L(Fa._id+"title",{attributes:{x:N.l+(M.x+ja)*N.w,y:"top"===V?(1-(na+oa-ha))*N.h+N.t+3+.75*La:(1-(na+ha))*N.h+N.t-3-.25*La,"text-anchor":"start"}})}},
function(){if(-1!==["top","bottom"].indexOf(V)){var La=I.select("."+J.cbtitle),kb=La.select("text"),mb=[-M.outlinewidth/2,M.outlinewidth/2],ya=La.select(".h"+Fa._id+"title-math-group").node(),Ia=15.6;kb.node()&&(Ia=parseInt(kb.node().style.fontSize,10)*u);ya?(bb=t.bBox(ya).height,bb>Ia&&(mb[1]-=(bb-Ia)/2)):kb.node()&&!kb.classed(J.jsPlaceholder)&&(bb=t.bBox(kb.node()).height);bb&&(bb+=5,"top"===V?(Fa.domain[1]-=bb/N.h,mb[1]*=-1):(Fa.domain[0]+=bb/N.h,kb=A.lineCount(kb),mb[1]+=(1-kb)*Ia),La.attr("transform",
"translate("+mb+")"),Fa.setScale())}I.selectAll("."+J.cbfills+",."+J.cblines).attr("transform","translate(0,"+Math.round(N.h*(1-Fa.domain[1]))+")");ab.attr("transform","translate(0,"+Math.round(-N.t)+")");La=I.select("."+J.cbfills).selectAll("rect."+J.cbfill).data(ba);La.enter().append("rect").classed(J.cbfill,!0).style("stroke","none");La.exit().remove();var Na=Z.map(Fa.c2p).map(Math.round).sort(function(Ta,hb){return Ta-hb});La.each(function(Ta,hb){hb=[0===hb?Z[0]:(ba[hb]+ba[hb-1])/2,hb===ba.length-
1?Z[1]:(ba[hb]+ba[hb+1])/2].map(Fa.c2p).map(Math.round);hb[1]=g.constrain(hb[1]+(hb[1]>hb[0])?1:-1,Na[0],Na[1]);hb=e.select(this).attr({x:la,width:Math.max(qa,2),y:e.min(hb),height:Math.max(e.max(hb)-e.min(hb),2)});M._fillgradient?t.gradient(hb,E,M._id,"vertical",M._fillgradient,"fill"):(Ta=Y(Ta).replace("e-",""),hb.attr("fill",f(Ta).toHexString()))});La=I.select("."+J.cblines).selectAll("path."+J.cbline).data(O.color&&O.width?ka:[]);La.enter().append("path").classed(J.cbline,!0);La.exit().remove();
La.each(function(Ta){e.select(this).attr("d","M"+la+","+(Math.round(Fa.c2p(Ta))+O.width/2%1)+"h"+qa).call(t.lineGroupStyle,O.width,aa(Ta),O.dash)});ab.selectAll("g."+Fa._id+"tick,path").remove();La=la+qa+(M.outlinewidth||0)/2-("outside"===M.ticks?1:0);mb=c.calcTicks(Fa);Ia=c.makeTransFn(Fa);kb=c.getTickSigns(Fa)[2];c.drawTicks(E,Fa,{vals:"inside"===Fa.ticks?c.clipEnds(Fa,mb):mb,layer:ab,path:c.makeTickPath(Fa,La,kb),transFn:Ia});return c.drawLabels(E,Fa,{vals:mb,layer:ab,transFn:Ia,labelFns:c.makeLabelFns(Fa,
La)})},function(){if(-1===["top","bottom"].indexOf(V)){var La=Fa.title.font.size,kb=Fa._offset+Fa._length/2;La=N.l+(Fa.position||0)*N.w+("right"===Fa.side?10+La*(Fa.showticklabels?1:.5):-10-La*(Fa.showticklabels?.5:0));L("h"+Fa._id+"title",{avoid:{selection:e.select(E).selectAll("g."+Fa._id+"tick"),side:V,offsetLeft:N.l,offsetTop:0,maxShift:P.width},attributes:{x:La,y:kb,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},l.previousPromises,function(){var La=qa+M.outlinewidth/2+t.bBox(ab.node()).width;
gb=Xa.select("text");if(gb.node()&&!gb.classed(J.jsPlaceholder)){var kb=Xa.select(".h"+Fa._id+"title-math-group").node();kb=kb&&-1!==["top","bottom"].indexOf(V)?t.bBox(kb).width:t.bBox(Xa.node()).right-la-N.l;La=Math.max(La,kb)}kb=2*M.xpad+La+M.borderwidth+M.outlinewidth/2;var mb=wa-Ca;I.select("."+J.cbbg).attr({x:la-M.xpad-(M.borderwidth+M.outlinewidth)/2,y:Ca-ra,width:Math.max(kb,2),height:Math.max(mb+2*ra,2)}).call(v.fill,M.bgcolor).call(v.stroke,M.bordercolor).style("stroke-width",M.borderwidth);
I.selectAll("."+J.cboutline).attr({x:la,y:Ca+M.ypad+("top"===V?bb:0),width:Math.max(qa,2),height:Math.max(mb-2*M.ypad-bb,2)}).call(v.stroke,M.outlinecolor).style({fill:"none","stroke-width":M.outlinewidth});I.attr("transform","translate("+(N.l-({center:.5,right:1}[M.xanchor]||0)*kb)+","+N.t+")");La={};var ya=F[M.yanchor],Ia=H[M.yanchor];"pixels"===M.lenmode?(La.y=M.y,La.t=mb*ya,La.b=mb*Ia):(La.t=La.b=0,La.yt=M.y+M.len*ya,La.yb=M.y-M.len*Ia);mb=F[M.xanchor];ya=H[M.xanchor];"pixels"===M.thicknessmode?
(La.x=M.x,La.l=kb*mb,La.r=kb*ya):(kb-=qa,La.l=kb*mb,La.r=kb*ya,La.xl=M.x-M.thickness*mb,La.xr=M.x+M.thickness*ya);l.autoMargin(E,M._id,La)}],E)}function p(I,M,E){var L=E._fullLayout._size,P,N,Q;d.init({element:I.node(),gd:E,prepFn:function(){P=I.attr("transform");q(I)},moveFn:function(O,T){I.attr("transform",P+" translate("+O+","+T+")");N=d.align(M._xLeftFrac+O/L.w,M._thickFrac,0,1,M.xanchor);Q=d.align(M._yBottomFrac-T/L.h,M._lenFrac,0,1,M.yanchor);O=d.getCursor(N,Q,M.xanchor,M.yanchor);q(I,O)},doneFn:function(){q(I);
if(void 0!==N&&void 0!==Q){var O={};O[M._propPrefix+"x"]=N;O[M._propPrefix+"y"]=Q;void 0!==M._traceIndex?m.call("_guiRestyle",E,O,M._traceIndex):m.call("_guiRelayout",E,O)}}})}function k(I,M,E){var L=M._levels;I=[];var P=[],N,Q=L.end+L.size/100,O=L.size,T=1.001*E[0]-.001*E[1],V=1.001*E[1]-.001*E[0];for(N=0;1E5>N;N++){var Z=L.start+N*O;if(0<O?Z>=Q:Z<=Q)break;Z>T&&Z<V&&I.push(Z)}if(M._fillgradient)P=[0];else if("function"===typeof M._fillcolor)if(M=M._filllevels)for(Q=M.end+M.size/100,O=M.size,N=0;1E5>
N;N++){Z=M.start+N*O;if(0<O?Z>=Q:Z<=Q)break;Z>E[0]&&Z<E[1]&&P.push(Z)}else P=I.map(function(aa){return aa-L.size/2}),P.push(P[P.length-1]+L.size);else M._fillcolor&&"string"===typeof M._fillcolor&&(P=[0]);0>L.size&&(I.reverse(),P.reverse());return{line:I,fill:P}}function a(I,M,E){function L(Q,O){return g.coerce(P,N,C,Q,O)}I=I._fullLayout;var P={type:"linear",range:E,tickmode:M.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:M.ticks,ticklen:M.ticklen,
tickwidth:M.tickwidth,tickcolor:M.tickcolor,showticklabels:M.showticklabels,tickfont:M.tickfont,tickangle:M.tickangle,tickformat:M.tickformat,exponentformat:M.exponentformat,separatethousands:M.separatethousands,showexponent:M.showexponent,showtickprefix:M.showtickprefix,tickprefix:M.tickprefix,showticksuffix:M.showticksuffix,ticksuffix:M.ticksuffix,title:M.title,showline:!0,anchor:"free",side:"right",position:1},N={type:"linear",_id:"y"+M._id};M={letter:"y",font:I.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,
calendar:I.calendar};y(P,N,L,M,I);B(P,N,L,M);return N}var e=b("d3"),f=b("tinycolor2"),l=b("../../plots/plots"),m=b("../../registry"),c=b("../../plots/cartesian/axes"),d=b("../dragelement"),g=b("../../lib"),h=b("../../lib/extend").extendFlat,q=b("../../lib/setcursor"),t=b("../drawing"),v=b("../color"),w=b("../titles"),A=b("../../lib/svg_text_utils"),z=b("../colorscale/helpers").flipScale,y=b("../../plots/cartesian/axis_defaults"),B=b("../../plots/cartesian/position_defaults"),C=b("../../plots/cartesian/layout_attributes");
G=b("../../constants/alignment");var u=G.LINE_SPACING,F=G.FROM_TL,H=G.FROM_BR,J=b("./constants").cn;D.exports={draw:function(I){var M=I._fullLayout._infolayer.selectAll("g."+J.colorbar).data(r(I),function(E){return E._id});M.enter().append("g").attr("class",function(E){return E._id}).classed(J.colorbar,!0);M.each(function(E){var L=e.select(this);g.ensureSingle(L,"rect",J.cbbg);g.ensureSingle(L,"g",J.cbfills);g.ensureSingle(L,"g",J.cblines);g.ensureSingle(L,"g",J.cbaxis,function(N){N.classed(J.crisp,
!0)});g.ensureSingle(L,"g",J.cbtitleunshift,function(N){N.append("g").classed(J.cbtitle,!0)});g.ensureSingle(L,"rect",J.cboutline);var P=n(L,E,I);P&&P.then&&(I._promises||[]).push(P);I._context.edits.colorbarPosition&&p(L,E,I)});M.exit().each(function(E){l.autoMargin(I,E._id)}).remove();M.order()}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/extend":739,"../../lib/setcursor":769,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_defaults":799,
"../../plots/cartesian/layout_attributes":811,"../../plots/cartesian/position_defaults":814,"../../plots/plots":860,"../../registry":880,"../color":615,"../colorscale/helpers":626,"../dragelement":634,"../drawing":637,"../titles":710,"./constants":617,d3:169,tinycolor2:548}],620:[function(b,D,G){var r=b("../../lib");D.exports=function(n){return r.isPlainObject(n.colorbar)}},{"../../lib":749}],621:[function(b,D,G){D.exports={moduleType:"component",name:"colorbar",attributes:b("./attributes"),supplyDefaults:b("./defaults"),
draw:b("./draw").draw,hasColorbar:b("./has_colorbar")}},{"./attributes":616,"./defaults":618,"./draw":619,"./has_colorbar":620}],622:[function(b,D,G){var r=b("../colorbar/attributes"),n=b("../../lib/regex").counter,p=b("./scales.js").scales;Object.keys(p);D.exports=function(k,a){a=a||{};var e=a.cLetter||"c";k="noScale"in a?a.noScale:"marker.line"===(k||"");var f="showScaleDflt"in a?a.showScaleDflt:"z"===e,l="string"===typeof a.colorscaleDflt?p[a.colorscaleDflt]:null,m=a.editTypeOverride||"";var c=
"colorAttr"in a?a.colorAttr:{z:"z",c:"color"}[e];var d=e+"auto",g=e+"min",h=e+"max",q={};q[g]=q[h]=void 0;var t={};t[d]=!1;var v={};"color"===c&&(v.color={valType:"color",arrayOk:!0,editType:m||"style"},a.anim&&(v.color.anim=!0));v[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:q};v[g]={valType:"number",dflt:null,editType:m||"plot",impliedEdits:t};v[h]={valType:"number",dflt:null,editType:m||"plot",impliedEdits:t};v[e+"mid"]={valType:"number",dflt:null,editType:"calc",impliedEdits:q};
v.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1}};v.autocolorscale={valType:"boolean",dflt:!1===a.autoColorDflt?!1:!0,editType:"calc",impliedEdits:{colorscale:void 0}};v.reversescale={valType:"boolean",dflt:!1,editType:"plot"};k||(v.showscale={valType:"boolean",dflt:f,editType:"calc"},v.colorbar=r);a.noColorAxis||(v.coloraxis={valType:"subplotid",regex:n("coloraxis"),dflt:null,editType:"calc"});return v}},{"../../lib/regex":765,"../colorbar/attributes":616,
"./scales.js":630}],623:[function(b,D,G){var r=b("fast-isnumeric"),n=b("../../lib"),p=b("./helpers").extractOpts;D.exports=function(k,a,e){k=k._fullLayout;var f=e.vals;a=(e=e.containerStr)?n.nestedProperty(a,e).get():a;e=p(a);var l=!1!==e.auto,m=e.min,c=e.max,d=e.mid;void 0===m?m=n.aggNums(Math.min,null,f):l&&(m=a._colorAx&&r(m)?Math.min(m,n.aggNums(Math.min,null,f)):n.aggNums(Math.min,null,f));void 0===c?c=n.aggNums(Math.max,null,f):l&&(c=a._colorAx&&r(c)?Math.max(c,n.aggNums(Math.max,null,f)):n.aggNums(Math.max,
null,f));l&&void 0!==d&&(c-d>d-m?m=d-(c-d):c-d<d-m&&(c=d+(d-m)));m===c&&(m-=.5,c+=.5);e._sync("min",m);e._sync("max",c);e.autocolorscale&&e._sync("colorscale",0>m*c?k.colorscale.diverging:0<=m?k.colorscale.sequential:k.colorscale.sequentialminus)}},{"../../lib":749,"./helpers":626,"fast-isnumeric":241}],624:[function(b,D,G){var r=b("../../lib"),n=b("./helpers").hasColorscale,p=b("./helpers").extractOpts;D.exports=function(k,a){function e(h,q){var t=h["_"+q];void 0!==t&&(h[q]=t)}function f(h,q){if(h=
q.container?r.nestedProperty(h,q.container).get():h)if(h.coloraxis)h._colorAx=a[h.coloraxis];else{var t=p(h),v=t.auto;(v||void 0===t.min)&&e(h,q.min);(v||void 0===t.max)&&e(h,q.max);t.autocolorscale&&e(h,"colorscale")}}for(var l=0;l<k.length;l++){var m=k[l],c=m._module.colorbar;if(c)if(Array.isArray(c))for(var d=0;d<c.length;d++)f(m,c[d]);else f(m,c);n(m,"marker.line")&&f(m,{container:"marker.line",min:"cmin",max:"cmax"})}for(var g in a._colorAxes)f(a[g],{min:"cmin",max:"cmax"})}},{"../../lib":749,
"./helpers":626}],625:[function(b,D,G){function r(l,m){var c=m.slice(0,m.length-1);return m?p.nestedProperty(l,c).get()||{}:l}var n=b("fast-isnumeric"),p=b("../../lib"),k=b("../colorbar/has_colorbar"),a=b("../colorbar/defaults"),e=b("./scales").isValid,f=b("../../registry").traceIs;D.exports=function q(m,c,d,g,h){var t=h.prefix,v=h.cLetter,w="_module"in c,A=r(m,t),z=r(c,t),y=r(c._template||{},t)||{},B=function(){delete m.coloraxis;delete c.coloraxis;return q(m,c,d,g,h)};if(w){var C=d._colorAxes||
{},u=g(t+"coloraxis");if(u){t=f(c,"contour")&&p.nestedProperty(c,"contours.coloring").get()||"heatmap";(w=C[u])?(w[2].push(B),w[0]!==t&&(w[0]=!1,p.warn(["Ignoring coloraxis:",u,"setting as it is linked to incompatible colorscales."].join(" ")))):C[u]=[t,c,[B]];return}}B=A[v+"min"];C=A[v+"max"];B=n(B)&&n(C)&&B<C;g(t+v+"auto",!B)?g(t+v+"mid"):(g(t+v+"min"),g(t+v+"max"));v=A.colorscale;B=y.colorscale;var F;void 0!==v&&(F=!e(v));void 0!==B&&(F=!e(B));g(t+"autocolorscale",F);g(t+"colorscale");g(t+"reversescale");
if("marker.line."!==t){var H;t&&w&&(H=k(A));g(t+"showscale",H)&&(t&&y&&(z._template=y),a(A,z,d))}}},{"../../lib":749,"../../registry":880,"../colorbar/defaults":618,"../colorbar/has_colorbar":620,"./scales":630,"fast-isnumeric":241}],626:[function(b,D,G){function r(q){var t=q._colorAx,v=t?t:q;q={};var w;for(w=0;w<g.length;w++){var A=g[w];q[A]=v[A]}if(t){var z="c";for(w=0;w<h.length;w++)A=h[w],q[A]=v["c"+A]}else{for(w=0;w<h.length;w++){A=h[w];var y="c"+A;y in v?q[A]=v[y]:(y="z"+A,y in v&&(q[A]=v[y]))}z=
y.charAt(0)}q._sync=function(B,C){B=-1!==h.indexOf(B)?z+B:B;v[B]=v["_"+B]=C};return q}function n(q){var t=r(q);q=t.min;var v=t.max;t=t.reversescale?p(t.colorscale):t.colorscale;for(var w=t.length,A=Array(w),z=Array(w),y=0;y<w;y++){var B=t[y];A[y]=q+B[0]*(v-q);z[y]=B[1]}return{domain:A,range:z}}function p(q){var t=q.length,v=Array(t);--t;for(var w=0;0<=t;t--,w++){var A=q[t];v[w]=[1-A[0],A[1]]}return v}function k(q,t){t=t||{};var v=q.domain,w=q.range;q=w.length;for(var A=Array(q),z=0;z<q;z++){var y=
f(w[z]).toRgb();A[z]=[y.r,y.g,y.b,y.a]}var B=e.scale.linear().domain(v).range(A).clamp(!0);v=t.noNumericCheck;t=t.returnArray;t=v&&t?B:v?function(C){return a(B(C))}:t?function(C){return l(C)?B(C):f(C).isValid()?C:c.defaultLine}:function(C){return l(C)?a(B(C)):f(C).isValid()?C:c.defaultLine};t.domain=B.domain;t.range=function(){return w};return t}function a(q){return f({r:q[0],g:q[1],b:q[2],a:q[3]}).toRgbString()}var e=b("d3"),f=b("tinycolor2"),l=b("fast-isnumeric"),m=b("../../lib"),c=b("../color"),
d=b("./scales").isValid,g=["showscale","autocolorscale","colorscale","reversescale","colorbar"],h=["min","max","mid","auto"];D.exports={hasColorscale:function(q,t,v){q=t?m.nestedProperty(q,t).get()||{}:q;v=q[v||"color"];t=!1;if(m.isArrayOrTypedArray(v))for(var w=0;w<v.length;w++)if(l(v[w])){t=!0;break}return m.isPlainObject(q)&&(t||!0===q.showscale||l(q.cmin)&&l(q.cmax)||d(q.colorscale)||m.isPlainObject(q.colorbar))},extractOpts:r,extractScale:n,flipScale:p,makeColorScaleFunc:k,makeColorScaleFuncFromTrace:function(q,
t){return k(n(q),t)}}},{"../../lib":749,"../color":615,"./scales":630,d3:169,"fast-isnumeric":241,tinycolor2:548}],627:[function(b,D,G){G=b("./scales");var r=b("./helpers");D.exports={moduleType:"component",name:"colorscale",attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),handleDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc"),scales:G.scales,defaultScale:G.defaultScale,getScale:G.get,isValidScale:G.isValid,
hasColorscale:r.hasColorscale,extractOpts:r.extractOpts,extractScale:r.extractScale,flipScale:r.flipScale,makeColorScaleFunc:r.makeColorScaleFunc,makeColorScaleFuncFromTrace:r.makeColorScaleFuncFromTrace}},{"./attributes":622,"./calc":623,"./cross_trace_defaults":624,"./defaults":625,"./helpers":626,"./layout_attributes":628,"./layout_defaults":629,"./scales":630}],628:[function(b,D,G){G=b("../../lib/extend").extendFlat;var r=b("./attributes");b=b("./scales").scales;D.exports={editType:"calc",colorscale:{editType:"calc",
sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:G({_isSubplotObj:!0,editType:"calc"},r("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":739,"./attributes":622,"./scales":630}],629:[function(b,D,G){var r=b("../../lib"),n=b("../../plot_api/plot_template"),p=b("./layout_attributes"),k=b("./defaults");
D.exports=function(a,e){function f(q,t){return r.coerce(d,g,p.coloraxis,q,t)}r.coerce(a,e,p,"colorscale.sequential",void 0);r.coerce(a,e,p,"colorscale.sequentialminus",void 0);r.coerce(a,e,p,"colorscale.diverging",void 0);var l=e._colorAxes,m;for(m in l){var c=l[m];if(c[0]){var d=a[m]||{};var g=n.newContainer(e,m,"coloraxis");g._name=m;k(d,g,e,f,{prefix:"",cLetter:"c"})}else{for(var h=0;h<c[2].length;h++)c[2][h]();delete e._colorAxes[m]}}}},{"../../lib":749,"../../plot_api/plot_template":787,"./defaults":625,
"./layout_attributes":628}],630:[function(b,D,G){function r(a){var e=0;if(!Array.isArray(a)||2>a.length||!a[0]||!a[a.length-1]||0!==+a[0][0]||1!==+a[a.length-1][0])return!1;for(var f=0;f<a.length;f++){var l=a[f];if(2!==l.length||+l[0]<e||!n(l[1]).isValid())return!1;e=+l[0]}return!0}var n=b("tinycolor2"),p={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],
[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],
Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],
[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],
[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],
Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,
"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],
[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},k=p.RdBu;D.exports={scales:p,defaultScale:k,get:function(a,e){function f(){try{a=p[a]||JSON.parse(a)}catch(l){a=e}}e||(e=k);if(!a)return e;"string"===typeof a&&(f(),"string"===typeof a&&f());return r(a)?a:e},isValid:function(a){return void 0!==p[a]?!0:r(a)}}},{tinycolor2:548}],631:[function(b,D,G){D.exports=function(r,n,p,k,a){r=(r-p)/(k-p);n=r+n/(k-p);p=(r+n)/2;return"left"===a||"bottom"===
a?r:"center"===a||"middle"===a?p:"right"===a||"top"===a?n:r<2/3-p?r:n>4/3-p?n:p}},{}],632:[function(b,D,G){var r=b("../../lib"),n=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];D.exports=function(p,k,a,e){p="left"===a?0:"center"===a?1:"right"===a?2:r.constrain(Math.floor(3*p),0,2);k="bottom"===e?0:"middle"===e?1:"top"===e?2:r.constrain(Math.floor(3*k),0,2);return n[k][p]}},{"../../lib":749}],633:[function(b,D,G){G.selectMode=function(r){return"lasso"===
r||"select"===r};G.drawMode=function(r){return"drawclosedpath"===r||"drawopenpath"===r||"drawline"===r||"drawrect"===r||"drawcircle"===r};G.openMode=function(r){return"drawline"===r||"drawopenpath"===r};G.rectMode=function(r){return"select"===r||"drawline"===r||"drawrect"===r||"drawcircle"===r};G.freeMode=function(r){return"lasso"===r||"drawclosedpath"===r||"drawopenpath"===r};G.selectingOrDrawing=function(r){return G.freeMode(r)||G.rectMode(r)}},{}],634:[function(b,D,G){function r(){var m=document.createElement("div");
m.className="dragcover";var c=m.style;c.position="fixed";c.left=0;c.right=0;c.top=0;c.bottom=0;c.zIndex=999999999;c.background="none";document.body.appendChild(m);return m}function n(m){return p(m.changedTouches?m.changedTouches[0]:m,document.body)}var p=b("mouse-event-offset"),k=b("has-hover"),a=b("has-passive-events"),e=b("../../lib").removeElement,f=b("../../plots/cartesian/constants"),l=D.exports={};l.align=b("./align");l.getCursor=b("./cursor");b=b("./unhover");l.unhover=b.wrapped;l.unhoverRaw=
b.raw;l.init=function(m){function c(I,M,E){Math.abs(I)<E&&(I=0);Math.abs(M)<E&&(M=0);return[I,M]}function d(I){q._dragged=!1;q._dragging=!0;var M=n(I);A=M[0];z=M[1];F=I.target;u=I;H=2===I.buttons||I.ctrlKey;"undefined"===typeof I.clientX&&"undefined"===typeof I.clientY&&(I.clientX=A,I.clientY=z);y=(new Date).getTime();y-q._mouseDownTime<v?t+=1:(t=1,q._mouseDownTime=y);m.prepFn&&m.prepFn(I,A,z);k&&!H?(C=r(),C.style.cursor=window.getComputedStyle(w).cursor):k||(C=document,B=window.getComputedStyle(document.documentElement).cursor,
document.documentElement.style.cursor=window.getComputedStyle(w).cursor);document.addEventListener("mouseup",h);document.addEventListener("touchend",h);!1!==m.dragmode&&(I.preventDefault(),document.addEventListener("mousemove",g),document.addEventListener("touchmove",g,{passive:!1}))}function g(I){I.preventDefault();I=n(I);var M=J(I[0]-A,I[1]-z,m.minDrag||f.MINDRAG);I=M[0];M=M[1];if(I||M)q._dragged=!0,l.unhover(q);q._dragged&&m.moveFn&&!H&&(q._dragdata={element:w,dx:I,dy:M},m.moveFn(I,M))}function h(I){delete q._dragdata;
!1!==m.dragmode&&(I.preventDefault(),document.removeEventListener("mousemove",g),document.removeEventListener("touchmove",g));document.removeEventListener("mouseup",h);document.removeEventListener("touchend",h);k?e(C):B&&(C.documentElement.style.cursor=B,B=null);if(q._dragging){q._dragging=!1;(new Date).getTime()-q._mouseDownTime>v&&(t=Math.max(t-1,1));if(q._dragged)m.doneFn&&m.doneFn();else if(m.clickFn&&m.clickFn(t,u),!H){try{var M=new MouseEvent("click",I)}catch(L){var E=n(I);M=document.createEvent("MouseEvents");
M.initMouseEvent("click",I.bubbles,I.cancelable,I.view,I.detail,I.screenX,I.screenY,E[0],E[1],I.ctrlKey,I.altKey,I.shiftKey,I.metaKey,I.button,I.relatedTarget)}F.dispatchEvent(M)}q._dragging=!1}q._dragged=!1}var q=m.gd,t=1,v=q._context.doubleClickDelay,w=m.element,A,z,y,B,C,u,F,H;q._mouseDownTime||(q._mouseDownTime=0);w.style.pointerEvents="all";w.onmousedown=d;a?(w._ontouchstart&&w.removeEventListener("touchstart",w._ontouchstart),w._ontouchstart=d,w.addEventListener("touchstart",d,{passive:!1})):
w.ontouchstart=d;var J=m.clampFn||c};l.coverSlip=r},{"../../lib":749,"../../plots/cartesian/constants":803,"./align":631,"./cursor":632,"./unhover":635,"has-hover":414,"has-passive-events":415,"mouse-event-offset":458}],635:[function(b,D,G){var r=b("../../lib/events"),n=b("../../lib/throttle"),p=b("../../lib/dom").getGraphDiv,k=b("../fx/constants"),a=D.exports={};a.wrapped=function(e,f,l){e=p(e);e._fullLayout&&n.clear(e._fullLayout._uid+k.HOVERID);a.raw(e,f,l)};a.raw=function(e,f){var l=e._fullLayout,
m=e._hoverdata;f||(f={});f.target&&!1===r.triggerHandler(e,"plotly_beforehover",f)||(l._hoverlayer.selectAll("g").remove(),l._hoverlayer.selectAll("line").remove(),l._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,f.target&&m&&e.emit("plotly_unhover",{event:f,points:m}))}},{"../../lib/dom":737,"../../lib/events":738,"../../lib/throttle":774,"../fx/constants":649}],636:[function(b,D,G){G.dash={valType:"string",values:"solid dot dash longdash dashdot longdashdot".split(" "),dflt:"solid",
editType:"style"}},{}],637:[function(b,D,G){function r(N,Q){return B.symbolFuncs[N%100](Q)+(200<=N?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}function n(N,Q,O,T){var V=f.select(N.node().parentNode),Z=-1!==Q.indexOf("top")?"top":-1!==Q.indexOf("bottom")?"bottom":"middle";Q=-1!==Q.indexOf("left")?"end":-1!==Q.indexOf("right")?"start":"middle";var aa=T?T/.8+1:0,Y=(q.lineCount(N)-1)*v+1;T=J[Q]*aa;O=.75*O+J[Z]*aa+(J[Z]-1)*Y*O/2;N.attr("text-anchor",Q);V.attr("transform","translate("+T+","+O+")")}function p(N,Q){N=
N.ts||Q.textfont.size;return l(N)&&0<N?N:0}function k(N,Q,O,T){var V=N[0]-Q[0],Z=N[1]-Q[1],aa=O[0]-Q[0],Y=O[1]-Q[1];O=Math.pow(V*V+Z*Z,.25);N=Math.pow(aa*aa+Y*Y,.25);V=(N*N*V-O*O*aa)*T;T*=N*N*Z-O*O*Y;Z=3*N*(O+N);O=3*O*(O+N);return[[f.round(Q[0]+(Z&&V/Z),2),f.round(Q[1]+(Z&&T/Z),2)],[f.round(Q[0]-(O&&V/O),2),f.round(Q[1]-(O&&T/O),2)]]}function a(N){var Q=N.getAttribute("data-unformatted");if(null!==Q)return Q+N.getAttribute("data-math")+N.getAttribute("text-anchor")+N.getAttribute("style")}function e(N,
Q){if(!N)return null;Q=Q._context;return"url('"+(Q._exportedPlot?"":Q._baseUrl||"")+"#"+N+"')"}var f=b("d3"),l=b("fast-isnumeric"),m=b("tinycolor2"),c=b("../../registry"),d=b("../color"),g=b("../colorscale"),h=b("../../lib"),q=b("../../lib/svg_text_utils"),t=b("../../constants/xmlns_namespaces"),v=b("../../constants/alignment").LINE_SPACING,w=b("../../constants/interactions").DESELECTDIM,A=b("../../traces/scatter/subtypes"),z=b("../../traces/scatter/make_bubble_size_func"),y=b("../../components/fx/helpers").appendArrayPointValue,
B=D.exports={};B.font=function(N,Q,O,T){h.isPlainObject(Q)&&(T=Q.color,O=Q.size,Q=Q.family);Q&&N.style("font-family",Q);O+1&&N.style("font-size",O+"px");T&&N.call(d.fill,T)};B.setPosition=function(N,Q,O){N.attr("x",Q).attr("y",O)};B.setSize=function(N,Q,O){N.attr("width",Q).attr("height",O)};B.setRect=function(N,Q,O,T,V){N.call(B.setPosition,Q,O).call(B.setSize,T,V)};B.translatePoint=function(N,Q,O,T){O=O.c2p(N.x);N=T.c2p(N.y);if(l(O)&&l(N)&&Q.node())"text"===Q.node().nodeName?Q.attr("x",O).attr("y",
N):Q.attr("transform","translate("+O+","+N+")");else return!1;return!0};B.translatePoints=function(N,Q,O){N.each(function(T){var V=f.select(this);B.translatePoint(T,V,Q,O)})};B.hideOutsideRangePoint=function(N,Q,O,T,V,Z){Q.attr("display",O.isPtWithinRange(N,V)&&T.isPtWithinRange(N,Z)?null:"none")};B.hideOutsideRangePoints=function(N,Q){if(Q._hasClipOnAxisFalse){var O=Q.xaxis,T=Q.yaxis;N.each(function(V){V=V[0].trace;var Z=V.xcalendar,aa=V.ycalendar;V=c.traceIs(V,"bar-like")?".bartext":".point,.textpoint";
N.selectAll(V).each(function(Y){B.hideOutsideRangePoint(Y,f.select(this),O,T,Z,aa)})})}};B.crispRound=function(N,Q,O){return Q&&l(Q)?N._context.staticPlot?Q:1>Q?1:Math.round(Q):O||0};B.singleLineStyle=function(N,Q,O,T,V){Q.style("fill","none");N=(((N||[])[0]||{}).trace||{}).line||{};O=O||N.width||0;V=V||N.dash||"";d.stroke(Q,T||N.color);B.dashLine(Q,V,O)};B.lineGroupStyle=function(N,Q,O,T){N.style("fill","none").each(function(V){V=(((V||[])[0]||{}).trace||{}).line||{};var Z=Q||V.width||0,aa=T||V.dash||
"";f.select(this).call(d.stroke,O||V.color).call(B.dashLine,aa,Z)})};B.dashLine=function(N,Q,O){O=+O||0;Q=B.dashStyle(Q,O);N.style({"stroke-dasharray":Q,"stroke-width":O+"px"})};B.dashStyle=function(N,Q){Q=Math.max(+Q||1,3);"solid"===N?N="":"dot"===N?N=Q+"px,"+Q+"px":"dash"===N?N=3*Q+"px,"+3*Q+"px":"longdash"===N?N=5*Q+"px,"+5*Q+"px":"dashdot"===N?N=3*Q+"px,"+Q+"px,"+Q+"px,"+Q+"px":"longdashdot"===N&&(N=5*Q+"px,"+2*Q+"px,"+Q+"px,"+2*Q+"px");return N};B.singleFillStyle=function(N){var Q=(((f.select(N.node()).data()[0]||
[])[0]||{}).trace||{}).fillcolor;Q&&N.call(d.fill,Q)};B.fillGroupStyle=function(N){N.style("stroke-width",0).each(function(Q){var O=f.select(this);Q[0].trace&&O.call(d.fill,Q[0].trace.fillcolor)})};var C=b("./symbol_defs");B.symbolNames=[];B.symbolFuncs=[];B.symbolNeedLines={};B.symbolNoDot={};B.symbolNoFill={};B.symbolList=[];Object.keys(C).forEach(function(N){var Q=C[N],O=Q.n;B.symbolList.push(O,String(O),N,O+100,String(O+100),N+"-open");B.symbolNames[O]=N;B.symbolFuncs[O]=Q.f;Q.needLine&&(B.symbolNeedLines[O]=
!0);Q.noDot?B.symbolNoDot[O]=!0:B.symbolList.push(O+200,String(O+200),N+"-dot",O+300,String(O+300),N+"-open-dot");Q.noFill&&(B.symbolNoFill[O]=!0)});var u=B.symbolNames.length;B.symbolNumber=function(N){if(l(N))N=+N;else if("string"===typeof N){var Q=0;0<N.indexOf("-open")&&(Q=100,N=N.replace("-open",""));0<N.indexOf("-dot")&&(Q+=200,N=N.replace("-dot",""));N=B.symbolNames.indexOf(N);0<=N&&(N+=Q)}return N%100>=u||400<=N?0:Math.floor(Math.max(N,0))};b={x1:1,x2:0,y1:0,y2:0};D={x1:0,x2:0,y1:1,y2:0};
var F=f.format("~.1f"),H={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:D},verticalreversed:{node:"linearGradient",attrs:D,reversed:!0}};B.gradient=function(N,Q,O,T,V,Z){for(var aa=V.length,Y=H[T],ea=Array(aa),ca=0;ca<aa;ca++)Y.reversed?ea[aa-1-ca]=[F(100*(1-V[ca][0])),V[ca][1]]:ea[ca]=[F(100*V[ca][0]),V[ca][1]];V=Q._fullLayout;
var ba="g"+V._uid+"-"+O;O=V._defs.select(".gradients").selectAll("#"+ba).data([T+ea.join(";")],h.identity);O.exit().remove();O.enter().append(Y.node).each(function(){var ka=f.select(this);Y.attrs&&ka.attr(Y.attrs);ka.attr("id",ba);ka=ka.selectAll("stop").data(ea);ka.exit().remove();ka.enter().append("stop");ka.each(function(qa){var pa=m(qa[1]);f.select(this).attr({offset:qa[0]+"%","stop-color":d.tinyRGB(pa),"stop-opacity":pa.getAlpha()})})});N.style(Z,e(ba,Q)).style(Z+"-opacity",null);N="."+f.select(N.node().parentNode).attr("class").replace(/\s/g,
".")+"\x3e."+N.attr("class").replace(/\s/g,".");V._gradientUrlQueryParts[N]=1};B.initGradients=function(N){N=N._fullLayout;h.ensureSingle(N._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove();N._gradientUrlQueryParts={}};B.pointStyle=function(N,Q,O){if(N.size()){var T=B.makePointStyleFns(Q);N.each(function(V){B.singlePointStyle(V,f.select(this),Q,T,O)})}};B.singlePointStyle=function(N,Q,O,T,V){var Z=O.marker,aa=Z.line;Q.style("opacity",T.selectedOpacityFn?T.selectedOpacityFn(N):
void 0===N.mo?Z.opacity:N.mo);if(T.ms2mrc){var Y="various"===N.ms||"various"===Z.size?3:T.ms2mrc(N.ms);N.mrc=Y;T.selectedSizeFn&&(Y=N.mrc=T.selectedSizeFn(N));var ea=B.symbolNumber(N.mx||Z.symbol)||0;N.om=100<=ea%200;Q.attr("d",r(ea,Y))}Y=!1;if(N.so){ea=aa.outlierwidth;var ca=aa.outliercolor;aa=Z.outliercolor}else ea=(aa||{}).width,ea=(N.mlw+1||ea+1||(N.trace?(N.trace.marker.line||{}).width:0)+1)-1||0,ca="mlc"in N?N.mlcc=T.lineScale(N.mlc):h.isArrayOrTypedArray(aa.color)?d.defaultLine:aa.color,h.isArrayOrTypedArray(Z.color)&&
(Y=!0),aa="mc"in N?N.mcc=T.markerScale(N.mc):Z.color||"rgba(0,0,0,0)",T.selectedColorFn&&(aa=T.selectedColorFn(N));if(N.om)Q.call(d.stroke,aa).style({"stroke-width":(ea||1)+"px",fill:"none"});else{Q.style("stroke-width",(N.isBlank?0:ea)+"px");var ba=Z.gradient;(T=N.mgt)?Y=!0:T=ba&&ba.type;Array.isArray(T)&&(T=T[0],H[T]||(T=0));T&&"none"!==T?((Z=N.mgc)?Y=!0:Z=ba.color,O=O.uid,Y&&(O+="-"+N.i),B.gradient(Q,V,O,T,[[0,Z],[1,aa]],"fill")):d.fill(Q,aa);ea&&d.stroke(Q,ca)}};B.makePointStyleFns=function(N){var Q=
{},O=N.marker;Q.markerScale=B.tryColorscale(O,"");Q.lineScale=B.tryColorscale(O,"line");c.traceIs(N,"symbols")&&(Q.ms2mrc=A.isBubble(N)?z(N):function(){return(O.size||6)/2});N.selectedpoints&&h.extendFlat(Q,B.makeSelectedPointStyleFns(N));return Q};B.makeSelectedPointStyleFns=function(N){var Q={},O=N.marker||{},T=(N.selected||{}).marker||{},V=(N.unselected||{}).marker||{},Z=T.opacity,aa=V.opacity,Y=void 0!==Z,ea=void 0!==aa;if(h.isArrayOrTypedArray(O.opacity)||Y||ea)Q.selectedOpacityFn=function(ha){var la=
void 0===ha.mo?O.opacity:ha.mo;return ha.selected?Y?Z:la:ea?aa:w*la};var ca=O.color,ba=T.color,ka=V.color;if(ba||ka)Q.selectedColorFn=function(ha){var la=ha.mcc||ca;return ha.selected?ba||la:ka||la};var qa=O.size,pa=T.size,oa=V.size,ja=void 0!==pa,ra=void 0!==oa;c.traceIs(N,"symbols")&&(ja||ra)&&(Q.selectedSizeFn=function(ha){var la=ha.mrc||qa/2;return ha.selected?ja?pa/2:la:ra?oa/2:la});return Q};B.makeSelectedTextStyleFns=function(N){var Q={},O=(N.textfont||{}).color,T=((N.selected||{}).textfont||
{}).color,V=((N.unselected||{}).textfont||{}).color;Q.selectedTextColorFn=function(Z){var aa=Z.tc||O;return Z.selected?T||aa:V?V:T?aa:d.addOpacity(aa,w)};return Q};B.selectedPointStyle=function(N,Q){if(N.size()&&Q.selectedpoints){var O=B.makeSelectedPointStyleFns(Q),T=Q.marker||{},V=[];O.selectedOpacityFn&&V.push(function(Z,aa){Z.style("opacity",O.selectedOpacityFn(aa))});O.selectedColorFn&&V.push(function(Z,aa){d.fill(Z,O.selectedColorFn(aa))});O.selectedSizeFn&&V.push(function(Z,aa){var Y=aa.mx||
T.symbol||0,ea=O.selectedSizeFn(aa);Z.attr("d",r(B.symbolNumber(Y),ea));aa.mrc2=ea});V.length&&N.each(function(Z){for(var aa=f.select(this),Y=0;Y<V.length;Y++)V[Y](aa,Z)})}};B.tryColorscale=function(N,Q){if(N=Q?h.nestedProperty(N,Q).get():N)if(Q=N.color,(N.colorscale||N._colorAx)&&h.isArrayOrTypedArray(Q))return g.makeColorScaleFuncFromTrace(N);return h.identity};var J={start:1,end:-1,middle:0,bottom:1,top:-1};B.textPointStyle=function(N,Q,O){if(N.size()){if(Q.selectedpoints)var T=B.makeSelectedTextStyleFns(Q).selectedTextColorFn;
var V=Q.texttemplate,Z=O._fullLayout;N.each(function(aa){var Y=f.select(this),ea=V?h.extractOption(aa,Q,"txt","texttemplate"):h.extractOption(aa,Q,"tx","text");if(ea||0===ea){if(V){var ca=Q._module.formatLabels?Q._module.formatLabels(aa,Q,Z):{},ba={};y(ba,Q,aa.i);ea=h.texttemplateString(ea,ca,Z._d3locale,ba,aa,Q._meta||{})}ca=aa.tp||Q.textposition;ba=p(aa,Q);var ka=T?T(aa):aa.tc||Q.textfont.color;Y.call(B.font,aa.tf||Q.textfont.family,ba,ka).text(ea).call(q.convertToTspans,O).call(n,ca,ba,aa.mrc)}else Y.remove()})}};
B.selectedTextStyle=function(N,Q){if(N.size()&&Q.selectedpoints){var O=B.makeSelectedTextStyleFns(Q);N.each(function(T){var V=f.select(this),Z=O.selectedTextColorFn(T),aa=T.tp||Q.textposition,Y=p(T,Q);d.fill(V,Z);n(V,aa,Y,T.mrc2||T.mrc)})}};B.smoothopen=function(N,Q){if(3>N.length)return"M"+N.join("L");var O="M"+N[0],T=[],V;for(V=1;V<N.length-1;V++)T.push(k(N[V-1],N[V],N[V+1],Q));O+="Q"+T[0][0]+" "+N[1];for(V=2;V<N.length-1;V++)O+="C"+T[V-2][1]+" "+T[V-1][0]+" "+N[V];return O+="Q"+T[N.length-3][1]+
" "+N[N.length-1]};B.smoothclosed=function(N,Q){if(3>N.length)return"M"+N.join("L")+"Z";var O="M"+N[0],T=N.length-1,V=[k(N[T],N[0],N[1],Q)],Z;for(Z=1;Z<T;Z++)V.push(k(N[Z-1],N[Z],N[Z+1],Q));V.push(k(N[T-1],N[T],N[0],Q));for(Z=1;Z<=T;Z++)O+="C"+V[Z-1][1]+" "+V[Z][0]+" "+N[Z];return O+="C"+V[T][1]+" "+V[0][0]+" "+N[0]+"Z"};var I={hv:function(N,Q){return"H"+f.round(Q[0],2)+"V"+f.round(Q[1],2)},vh:function(N,Q){return"V"+f.round(Q[1],2)+"H"+f.round(Q[0],2)},hvh:function(N,Q){return"H"+f.round((N[0]+Q[0])/
2,2)+"V"+f.round(Q[1],2)+"H"+f.round(Q[0],2)},vhv:function(N,Q){return"V"+f.round((N[1]+Q[1])/2,2)+"H"+f.round(Q[0],2)+"V"+f.round(Q[1],2)}},M=function(N,Q){return"L"+f.round(Q[0],2)+","+f.round(Q[1],2)};B.steps=function(N){var Q=I[N]||M;return function(O){for(var T="M"+f.round(O[0][0],2)+","+f.round(O[0][1],2),V=1;V<O.length;V++)T+=Q(O[V-1],O[V]);return T}};B.makeTester=function(){var N=h.ensureSingleById(f.select("body"),"svg","js-plotly-tester",function(O){O.attr(t.svgAttrs).style({position:"absolute",
left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Q=h.ensureSingle(N,"path","js-reference-point",function(O){O.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});B.tester=N;B.testref=Q};B.savedBBoxes={};var E=0;B.bBox=function(N,Q,O){O||(O=a(N));var T;if(O){if(T=B.savedBBoxes[O])return h.extendFlat({},T)}else if(1===N.childNodes.length){var V=N.childNodes[0];if(O=a(V)){T=+V.getAttribute("x")||0;var Z=+V.getAttribute("y")||0,aa=V.getAttribute("transform");
if(!aa)return O=B.bBox(V,!1,O),T&&(O.left+=T,O.right+=T),Z&&(O.top+=Z,O.bottom+=Z),O;O+="~"+T+"~"+Z+"~"+aa;if(T=B.savedBBoxes[O])return h.extendFlat({},T)}}if(!Q){var Y=B.tester.node();N=N.cloneNode(!0);Y.appendChild(N)}f.select(N).attr("transform",null).call(q.positionText,0,0);T=N.getBoundingClientRect();Z=B.testref.node().getBoundingClientRect();Q||Y.removeChild(N);Q={height:T.height,width:T.width,left:T.left-Z.left,top:T.top-Z.top,right:T.right-Z.left,bottom:T.bottom-Z.top};1E4<=E&&(B.savedBBoxes=
{},E=0);O&&(B.savedBBoxes[O]=Q);E++;return h.extendFlat({},Q)};B.setClipUrl=function(N,Q,O){N.attr("clip-path",e(Q,O))};B.getTranslate=function(N){N=(N[N.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(Q,O,T){return[O,T].join(" ")}).split(" ");return{x:+N[0]||0,y:+N[1]||0}};B.setTranslate=function(N,Q,O){var T=N.attr?"attr":"setAttribute",V=N[N.attr?"attr":"getAttribute"]("transform")||"";Q=Q||0;O=O||0;V=V.replace(/(\btranslate\(.*?\);?)/,
"").trim();V=(V+(" translate("+Q+", "+O+")")).trim();N[T]("transform",V);return V};B.getScale=function(N){N=(N[N.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(Q,O,T){return[O,T].join(" ")}).split(" ");return{x:+N[0]||1,y:+N[1]||1}};B.setScale=function(N,Q,O){var T=N.attr?"attr":"setAttribute",V=N[N.attr?"attr":"getAttribute"]("transform")||"";Q=Q||1;O=O||1;V=V.replace(/(\bscale\(.*?\);?)/,"").trim();V=(V+(" scale("+Q+", "+O+")")).trim();
N[T]("transform",V);return V};var L=/\s*sc.*/;B.setPointGroupScale=function(N,Q,O){Q=Q||1;O=O||1;if(N){var T=1===Q&&1===O?"":" scale("+Q+","+O+")";N.each(function(){var V=(this.getAttribute("transform")||"").replace(L,"");V+=T;V=V.trim();this.setAttribute("transform",V)})}};var P=/translate\([^)]*\)\s*$/;B.setTextPointsScale=function(N,Q,O){N&&N.each(function(){var T=f.select(this),V=T.select("text");if(V.node()){var Z=parseFloat(V.attr("x")||0);var aa=parseFloat(V.attr("y")||0);V=(T.attr("transform")||
"").match(P);Z=1===Q&&1===O?[]:["translate("+Z+","+aa+")","scale("+Q+","+O+")","translate("+-Z+","+-aa+")"];V&&Z.push(V);T.attr("transform",Z.join(" "))}})}},{"../../components/fx/helpers":651,"../../constants/alignment":717,"../../constants/interactions":723,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../lib/svg_text_utils":773,"../../registry":880,"../../traces/scatter/make_bubble_size_func":1172,"../../traces/scatter/subtypes":1179,"../color":615,"../colorscale":627,"./symbol_defs":638,
d3:169,"fast-isnumeric":241,tinycolor2:548}],638:[function(b,D,G){var r=b("d3");D.exports={circle:{n:0,f:function(n){n=r.round(n,2);return"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z"}},square:{n:1,f:function(n){n=r.round(n,2);return"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z"}},diamond:{n:2,f:function(n){n=r.round(1.3*n,2);return"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"Z"}},cross:{n:3,f:function(n){var p=r.round(.4*n,2);n=r.round(1.2*n,2);return"M"+n+","+p+"H"+p+"V"+n+"H-"+p+"V"+p+"H-"+n+"V-"+
p+"H-"+p+"V-"+n+"H"+p+"V-"+p+"H"+n+"Z"}},x:{n:4,f:function(n){n=r.round(.8*n/Math.sqrt(2),2);var p="l"+n+","+n,k="l"+n+",-"+n,a="l-"+n+",-"+n,e="l-"+n+","+n;return"M0,"+n+p+k+a+k+a+e+a+e+p+e+p+"Z"}},"triangle-up":{n:5,f:function(n){var p=r.round(2*n/Math.sqrt(3),2),k=r.round(n/2,2);n=r.round(n,2);return"M-"+p+","+k+"H"+p+"L0,-"+n+"Z"}},"triangle-down":{n:6,f:function(n){var p=r.round(2*n/Math.sqrt(3),2),k=r.round(n/2,2);n=r.round(n,2);return"M-"+p+",-"+k+"H"+p+"L0,"+n+"Z"}},"triangle-left":{n:7,f:function(n){var p=
r.round(2*n/Math.sqrt(3),2),k=r.round(n/2,2);n=r.round(n,2);return"M"+k+",-"+p+"V"+p+"L-"+n+",0Z"}},"triangle-right":{n:8,f:function(n){var p=r.round(2*n/Math.sqrt(3),2),k=r.round(n/2,2);n=r.round(n,2);return"M-"+k+",-"+p+"V"+p+"L"+n+",0Z"}},"triangle-ne":{n:9,f:function(n){var p=r.round(.6*n,2);n=r.round(1.2*n,2);return"M-"+n+",-"+p+"H"+p+"V"+n+"Z"}},"triangle-se":{n:10,f:function(n){var p=r.round(.6*n,2);n=r.round(1.2*n,2);return"M"+p+",-"+n+"V"+p+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(n){var p=
r.round(.6*n,2);n=r.round(1.2*n,2);return"M"+n+","+p+"H-"+p+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(n){var p=r.round(.6*n,2);n=r.round(1.2*n,2);return"M-"+p+","+n+"V-"+p+"H"+n+"Z"}},pentagon:{n:13,f:function(n){var p=r.round(.951*n,2),k=r.round(.588*n,2),a=r.round(-n,2),e=r.round(-.309*n,2);n=r.round(.809*n,2);return"M"+p+","+e+"L"+k+","+n+"H-"+k+"L-"+p+","+e+"L0,"+a+"Z"}},hexagon:{n:14,f:function(n){var p=r.round(n,2),k=r.round(n/2,2);n=r.round(n*Math.sqrt(3)/2,2);return"M"+n+",-"+k+"V"+k+"L0,"+
p+"L-"+n+","+k+"V-"+k+"L0,-"+p+"Z"}},hexagon2:{n:15,f:function(n){var p=r.round(n,2),k=r.round(n/2,2);n=r.round(n*Math.sqrt(3)/2,2);return"M-"+k+","+n+"H"+k+"L"+p+",0L"+k+",-"+n+"H-"+k+"L-"+p+",0Z"}},octagon:{n:16,f:function(n){var p=r.round(.924*n,2);n=r.round(.383*n,2);return"M-"+n+",-"+p+"H"+n+"L"+p+",-"+n+"V"+n+"L"+n+","+p+"H-"+n+"L-"+p+","+n+"V-"+n+"Z"}},star:{n:17,f:function(n){var p=1.4*n;n=r.round(.225*p,2);var k=r.round(.951*p,2),a=r.round(.363*p,2),e=r.round(.588*p,2),f=r.round(-p,2),l=
r.round(-.309*p,2),m=r.round(.118*p,2),c=r.round(.809*p,2);p=r.round(.382*p,2);return"M"+n+","+l+"H"+k+"L"+a+","+m+"L"+e+","+c+"L0,"+p+"L-"+e+","+c+"L-"+a+","+m+"L-"+k+","+l+"H-"+n+"L0,"+f+"Z"}},hexagram:{n:18,f:function(n){var p=r.round(.66*n,2),k=r.round(.38*n,2);n=r.round(.76*n,2);return"M-"+n+",0l-"+k+",-"+p+"h"+n+"l"+k+",-"+p+"l"+k+","+p+"h"+n+"l-"+k+","+p+"l"+k+","+p+"h-"+n+"l-"+k+","+p+"l-"+k+",-"+p+"h-"+n+"Z"}},"star-triangle-up":{n:19,f:function(n){var p=r.round(n*Math.sqrt(3)*.8,2),k=r.round(.8*
n,2),a=r.round(1.6*n,2);n=r.round(4*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+p+","+k+n+p+","+k+n+"0,-"+a+n+"-"+p+","+k+"Z"}},"star-triangle-down":{n:20,f:function(n){var p=r.round(n*Math.sqrt(3)*.8,2),k=r.round(.8*n,2),a=r.round(1.6*n,2);n=r.round(4*n,2);n="A "+n+","+n+" 0 0 1 ";return"M"+p+",-"+k+n+"-"+p+",-"+k+n+"0,"+a+n+p+",-"+k+"Z"}},"star-square":{n:21,f:function(n){var p=r.round(1.1*n,2);n=r.round(2*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+p+",-"+p+n+"-"+p+","+p+n+p+","+p+n+p+",-"+p+n+"-"+p+
",-"+p+"Z"}},"star-diamond":{n:22,f:function(n){var p=r.round(1.4*n,2);n=r.round(1.9*n,2);n="A "+n+","+n+" 0 0 1 ";return"M-"+p+",0"+n+"0,"+p+n+p+",0"+n+"0,-"+p+n+"-"+p+",0Z"}},"diamond-tall":{n:23,f:function(n){var p=r.round(.7*n,2);n=r.round(1.4*n,2);return"M0,"+n+"L"+p+",0L0,-"+n+"L-"+p+",0Z"}},"diamond-wide":{n:24,f:function(n){var p=r.round(1.4*n,2);n=r.round(.7*n,2);return"M0,"+n+"L"+p+",0L0,-"+n+"L-"+p+",0Z"}},hourglass:{n:25,f:function(n){n=r.round(n,2);return"M"+n+","+n+"H-"+n+"L"+n+",-"+
n+"H-"+n+"Z"},noDot:!0},bowtie:{n:26,f:function(n){n=r.round(n,2);return"M"+n+","+n+"V-"+n+"L-"+n+","+n+"V-"+n+"Z"},noDot:!0},"circle-cross":{n:27,f:function(n){n=r.round(n,2);return"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+",0A"+n+","+n+" 0 1,1 0,-"+n+"A"+n+","+n+" 0 0,1 "+n+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(n){var p=r.round(n,2);n=r.round(n/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+p+",0A"+p+","+p+" 0 1,1 0,-"+p+"A"+p+","+p+" 0 0,1 "+p+",0Z"},
needLine:!0,noDot:!0},"square-cross":{n:29,f:function(n){n=r.round(n,2);return"M0,"+n+"V-"+n+"M"+n+",0H-"+n+"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(n){n=r.round(n,2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+n+","+n+"H-"+n+"V-"+n+"H"+n+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(n){n=r.round(1.3*n,2);return"M"+n+",0L0,"+n+"L-"+n+",0L0,-"+n+"ZM0,-"+n+"V"+n+"M-"+n+",0H"+n},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(n){var p=
r.round(1.3*n,2);n=r.round(.65*n,2);return"M"+p+",0L0,"+p+"L-"+p+",0L0,-"+p+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(n){n=r.round(1.4*n,2);return"M0,"+n+"V-"+n+"M"+n+",0H-"+n},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(n){n=r.round(n,2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(n){var p=r.round(1.2*n,2);n=r.round(.85*n,2);return"M0,"+p+"V-"+p+"M"+
p+",0H-"+p+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(n){var p=r.round(n/2,2);n=r.round(n,2);return"M"+p+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+p+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(n){var p=r.round(1.2*n,2),k=r.round(1.6*n,2);n=r.round(.8*n,2);return"M-"+p+","+n+"L0,0M"+p+","+n+"L0,0M0,-"+k+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(n){var p=r.round(1.2*n,2),k=r.round(1.6*n,2);
n=r.round(.8*n,2);return"M-"+p+",-"+n+"L0,0M"+p+",-"+n+"L0,0M0,"+k+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(n){var p=r.round(1.2*n,2),k=r.round(1.6*n,2);n=r.round(.8*n,2);return"M"+n+","+p+"L0,0M"+n+",-"+p+"L0,0M-"+k+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(n){var p=r.round(1.2*n,2),k=r.round(1.6*n,2);n=r.round(.8*n,2);return"M-"+n+","+p+"L0,0M-"+n+",-"+p+"L0,0M"+k+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(n){n=r.round(1.4*
n,2);return"M"+n+",0H-"+n},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(n){n=r.round(1.4*n,2);return"M0,"+n+"V-"+n},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(n){n=r.round(n,2);return"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(n){n=r.round(n,2);return"M"+n+","+n+"L-"+n+",-"+n},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(n){var p=r.round(n,2);n=r.round(2*n,2);return"M0,0L-"+p+","+n+"H"+p+"Z"},noDot:!0},"arrow-down":{n:46,
f:function(n){var p=r.round(n,2);n=r.round(2*n,2);return"M0,0L-"+p+",-"+n+"H"+p+"Z"},noDot:!0},"arrow-left":{n:47,f:function(n){var p=r.round(2*n,2);n=r.round(n,2);return"M0,0L"+p+",-"+n+"V"+n+"Z"},noDot:!0},"arrow-right":{n:48,f:function(n){var p=r.round(2*n,2);n=r.round(n,2);return"M0,0L-"+p+",-"+n+"V"+n+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(n){var p=r.round(n,2);n=r.round(2*n,2);return"M-"+p+",0H"+p+"M0,0L-"+p+","+n+"H"+p+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(n){var p=
r.round(n,2);n=r.round(2*n,2);return"M-"+p+",0H"+p+"M0,0L-"+p+",-"+n+"H"+p+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(n){var p=r.round(2*n,2);n=r.round(n,2);return"M0,-"+n+"V"+n+"M0,0L"+p+",-"+n+"V"+n+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(n){var p=r.round(2*n,2);n=r.round(n,2);return"M0,-"+n+"V"+n+"M0,0L-"+p+",-"+n+"V"+n+"Z"},needLine:!0,noDot:!0}}},{d3:169}],639:[function(b,D,G){D.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",
values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",
editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],640:[function(b,D,G){function r(f,l,m,c){var d=l["error_"+c]||{},g=[];if(d.visible&&-1!==["linear","log"].indexOf(m.type)){d=e(d);for(var h=0;h<f.length;h++){var q=f[h],t=q.i;if(void 0===t)t=h;else if(null===t)continue;var v=q[c];if(n(m.c2l(v))){var w=d(v,
t);n(w[0])&&n(w[1])&&(t=q[c+"s"]=v-w[0],q=q[c+"h"]=v+w[1],g.push(t,q))}}f=l._extremes[m._id];m=k.findExtremes(m,g,a.extendFlat({tozero:f.opts.tozero},{padded:!0}));f.min=f.min.concat(m.min);f.max=f.max.concat(m.max)}}var n=b("fast-isnumeric"),p=b("../../registry"),k=b("../../plots/cartesian/axes"),a=b("../../lib"),e=b("./compute_error");D.exports=function(f){for(var l=f.calcdata,m=0;m<l.length;m++){var c=l[m],d=c[0].trace;if(!0===d.visible&&p.traceIs(d,"errorBarsOK")){var g=k.getFromId(f,d.xaxis),
h=k.getFromId(f,d.yaxis);r(c,d,g,"x");r(c,d,h,"y")}}}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"./compute_error":641,"fast-isnumeric":241}],641:[function(b,D,G){function r(n,p){if("percent"===n)return function(k){return Math.abs(k*p/100)};if("constant"===n)return function(){return Math.abs(p)};if("sqrt"===n)return function(k){return Math.sqrt(Math.abs(k))}}D.exports=function(n){var p=n.type,k=n.symmetric;if("data"===p){var a=n.array||[];if(k)return function(m,c){m=+a[c];
return[m,m]};var e=n.arrayminus||[];return function(m,c){m=+a[c];c=+e[c];return isNaN(m)&&isNaN(c)?[NaN,NaN]:[c||0,m||0]}}var f=r(p,n.value),l=r(p,n.valueminus);return k||void 0===n.valueminus?function(m){m=f(m);return[m,m]}:function(m){return[l(m),f(m)]}}},{}],642:[function(b,D,G){var r=b("fast-isnumeric"),n=b("../../registry"),p=b("../../lib"),k=b("../../plot_api/plot_template"),a=b("./attributes");D.exports=function(e,f,l,m){function c(q,t){return p.coerce(h,g,a,q,t)}var d="error_"+m.axis,g=k.newContainer(f,
d),h=e[d]||{};if(!1!==c("visible",void 0!==h.array||void 0!==h.value||"sqrt"===h.type)){e=c("type","array"in h?"data":"percent");d=!0;"sqrt"!==e&&(d=c("symmetric",!(("data"===e?"arrayminus":"valueminus")in h)));if("data"===e)c("array"),c("traceref"),d||(c("arrayminus"),c("tracerefminus"));else if("percent"===e||"constant"===e)c("value"),d||c("valueminus");e="copy_"+m.inherit+"style";m.inherit&&(f["error_"+m.inherit]||{}).visible&&c(e,!(h.color||r(h.thickness)||r(h.width)));m.inherit&&g[e]||(c("color",
l),c("thickness"),c("width",n.traceIs(f,"gl3d")?0:4))}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../registry":880,"./attributes":639,"fast-isnumeric":241}],643:[function(b,D,G){var r=b("../../lib");G=b("../../plot_api/edit_types").overrideAll;var n=b("./attributes"),p={error_x:r.extendFlat({},n),error_y:r.extendFlat({},n)};delete p.error_x.copy_zstyle;delete p.error_y.copy_zstyle;delete p.error_y.copy_ystyle;r={error_x:r.extendFlat({},n),error_y:r.extendFlat({},n),error_z:r.extendFlat({},
n)};delete r.error_x.copy_ystyle;delete r.error_y.copy_ystyle;delete r.error_z.copy_ystyle;delete r.error_z.copy_zstyle;D.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:p,bar:p,histogram:p,scatter3d:G(r,"calc","nested"),scattergl:G(p,"calc","nested")}},supplyDefaults:b("./defaults"),calc:b("./calc"),makeComputeError:b("./compute_error"),plot:b("./plot"),style:b("./style"),hoverInfo:function(k,a,e){(a.error_y||{}).visible&&(e.yerr=k.yh-k.y,a.error_y.symmetric||(e.yerrneg=
k.y-k.ys));(a.error_x||{}).visible&&(e.xerr=k.xh-k.x,a.error_x.symmetric||(e.xerrneg=k.x-k.xs))}}},{"../../lib":749,"../../plot_api/edit_types":780,"./attributes":639,"./calc":640,"./compute_error":641,"./defaults":642,"./plot":644,"./style":645}],644:[function(b,D,G){var r=b("d3"),n=b("fast-isnumeric"),p=b("../drawing"),k=b("../../traces/scatter/subtypes");D.exports=function(a,e,f,l){var m,c=f.xaxis,d=f.yaxis,g=l&&0<l.duration;e.each(function(h){var q=h[0].trace,t=q.error_x||{},v=q.error_y||{},w;
q.ids&&(w=function(z){return z.id});var A=k.hasMarkers(q)&&0<q.marker.maxdisplayed;v.visible||t.visible||(h=[]);q=r.select(this).selectAll("g.errorbar").data(h,w);q.exit().remove();h.length&&(t.visible||q.selectAll("path.xerror").remove(),v.visible||q.selectAll("path.yerror").remove(),q.style("opacity",1),h=q.enter().append("g").classed("errorbar",!0),g&&h.style("opacity",0).transition().duration(l.duration).style("opacity",1),p.setClipUrl(q,f.layerClipId,a),q.each(function(z){var y=r.select(this),
B=c.c2p(z.x),C=d.c2p(z.y);if(void 0!==z.yh){var u=d.c2p(z.yh);var F=d.c2p(z.ys);if(!n(F)){var H=!0;F=d.c2p(z.ys,!0)}}if(void 0!==z.xh){var J=c.c2p(z.xh);var I=c.c2p(z.xs);if(!n(I)){var M=!0;I=c.c2p(z.xs,!0)}}if(!A||z.vis){z=y.select("path.yerror");if(v.visible&&n(B)&&n(u)&&n(F)){var E=v.width;B="M"+(B-E)+","+u+"h"+2*E+"m-"+E+",0V"+F;H||(B+="m-"+E+",0h"+2*E);(m=!z.size())?z=y.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):g&&(z=z.transition().duration(l.duration).ease(l.easing));
z.attr("d",B)}else z.remove();H=y.select("path.xerror");t.visible&&n(C)&&n(J)&&n(I)?(u=(t.copy_ystyle?v:t).width,B="M"+J+","+(C-u)+"v"+2*u+"m0,-"+u+"H"+I,M||(B+="m0,-"+u+"v"+2*u),(m=!H.size())?H=y.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):g&&(H=H.transition().duration(l.duration).ease(l.easing)),H.attr("d",B)):H.remove()}}))})}},{"../../traces/scatter/subtypes":1179,"../drawing":637,d3:169,"fast-isnumeric":241}],645:[function(b,D,G){var r=b("d3"),n=b("../color");
D.exports=function(p){p.each(function(k){var a=k[0].trace;k=a.error_y||{};a=a.error_x||{};var e=r.select(this);e.selectAll("path.yerror").style("stroke-width",k.thickness+"px").call(n.stroke,k.color);a.copy_ystyle&&(a=k);e.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(n.stroke,a.color)})}},{"../color":615,d3:169}],646:[function(b,D,G){G=b("../../plots/font_attributes");var r=b("./layout_attributes").hoverlabel;b=b("../../lib/extend").extendFlat;D.exports={hoverlabel:{bgcolor:b({},
r.bgcolor,{arrayOk:!0}),bordercolor:b({},r.bordercolor,{arrayOk:!0}),font:G({arrayOk:!0,editType:"none"}),align:b({},r.align,{arrayOk:!0}),namelength:b({},r.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":739,"../../plots/font_attributes":825,"./layout_attributes":656}],647:[function(b,D,G){function r(k,a,e,f){f=f||n.identity;Array.isArray(k)&&(a[0][e]=f(k))}var n=b("../../lib"),p=b("../../registry");D.exports=function(k){function a(d){return function(g){return n.coerceHoverinfo({hoverinfo:g},
{_module:d._module},f)}}var e=k.calcdata,f=k._fullLayout;for(k=0;k<e.length;k++){var l=e[k],m=l[0].trace;if(!p.traceIs(m,"pie-like")){var c=p.traceIs(m,"2dMap")?r:n.fillArray;c(m.hoverinfo,l,"hi",a(m));m.hovertemplate&&c(m.hovertemplate,l,"ht");m.hoverlabel&&(c(m.hoverlabel.bgcolor,l,"hbg"),c(m.hoverlabel.bordercolor,l,"hbc"),c(m.hoverlabel.font.size,l,"hts"),c(m.hoverlabel.font.color,l,"htc"),c(m.hoverlabel.font.family,l,"htf"),c(m.hoverlabel.namelength,l,"hnl"),c(m.hoverlabel.align,l,"hta"))}}}},
{"../../lib":749,"../../registry":880}],648:[function(b,D,G){var r=b("../../registry"),n=b("./hover").hover;D.exports=function(p,k,a){function e(){p.emit("plotly_click",{points:p._hoverdata,event:k})}var f=r.getComponentMethod("annotations","onClick")(p,p._hoverdata);void 0!==a&&n(p,k,a,!0);p._hoverdata&&k&&k.target&&(f&&f.then?f.then(e):e(),k.stopImmediatePropagation&&k.stopImmediatePropagation())}},{"../../registry":880,"./hover":652}],649:[function(b,D,G){D.exports={YANGLE:60,HOVERARROWSIZE:6,
HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],650:[function(b,D,G){var r=b("../../lib"),n=b("./attributes"),p=b("./hoverlabel_defaults");D.exports=function(k,a,e,f){e=r.extendFlat({},f.hoverlabel);a.hovertemplate&&(e.namelength=-1);p(k,a,function(l,m){return r.coerce(k,a,n,l,m)},e)}},{"../../lib":749,"./attributes":646,"./hoverlabel_defaults":653}],651:[function(b,D,G){function r(e,f){if(Array.isArray(f)){if(Array.isArray(e)&&Array.isArray(e[f[0]]))return e[f[0]][f[1]]}else return e[f]}
var n=b("../../lib");G.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo};G.isTraceInSubplots=function(e,f){if("splom"===e.type){var l=e.xaxes||[];e=e.yaxes||[];for(var m=0;m<l.length;m++)for(var c=0;c<e.length;c++)if(-1!==f.indexOf(l[m]+e[c]))return!0;return!1}return-1!==f.indexOf(G.getSubplot(e))};G.flat=function(e,f){for(var l=Array(e.length),m=0;m<e.length;m++)l[m]=f;return l};G.p2c=function(e,f){for(var l=Array(e.length),m=0;m<e.length;m++)l[m]=e[m].p2c(f);return l};G.getDistanceFunction=
function(e,f,l,m){return"closest"===e?m||G.quadrature(f,l):"x"===e.charAt(0)?f:l};G.getClosest=function(e,f,l){if(!1!==l.index)0<=l.index&&l.index<e.length?l.distance=0:l.index=!1;else for(var m=0;m<e.length;m++){var c=f(e[m]);c<=l.distance&&(l.index=m,l.distance=c)}return l};G.inbox=function(e,f,l){return 0>e*f||0===e?l:Infinity};G.quadrature=function(e,f){return function(l){var m=e(l);l=f(l);return Math.sqrt(m*m+l*l)}};G.makeEventData=function(e,f,l){var m="index"in e?e.index:e.pointNumber,c={data:f._input,
fullData:f,curveNumber:f.index,pointNumber:m};if(f._indexToPoints){var d=f._indexToPoints[m];1===d.length?c.pointIndex=d[0]:c.pointIndices=d}else c.pointIndex=m;f._module.eventData?c=f._module.eventData(c,e,f,l,m):("xVal"in e?c.x=e.xVal:"x"in e&&(c.x=e.x),"yVal"in e?c.y=e.yVal:"y"in e&&(c.y=e.y),e.xa&&(c.xaxis=e.xa),e.ya&&(c.yaxis=e.ya),void 0!==e.zLabelVal&&(c.z=e.zLabelVal));G.appendArrayPointValue(c,f,m);return c};G.appendArrayPointValue=function(e,f,l){var m=f._arrayAttrs;if(m)for(var c=0;c<m.length;c++){var d=
m[c],g=p[d]||d;void 0===e[g]&&(d=n.nestedProperty(f,d).get(),d=r(d,l),void 0!==d&&(e[g]=d))}};G.appendArrayMultiPointValues=function(e,f,l){var m=f._arrayAttrs;if(m)for(var c=0;c<m.length;c++){var d=m[c],g=p[d]||d;if(void 0===e[g]){d=n.nestedProperty(f,d).get();for(var h=Array(l.length),q=0;q<l.length;q++)h[q]=r(d,l[q]);e[g]=h}}};var p={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"},k={x:!0,y:!0},a={"x unified":!0,"y unified":!0};G.isUnifiedHover=
function(e){return"string"!==typeof e?!1:!!a[e]};G.isXYhover=function(e){return"string"!==typeof e?!1:!!k[e]}},{"../../lib":749}],652:[function(b,D,G){function r(O,T,V,Z){function aa(va,Ea){for(Fa=0;Fa<Ca.length;Fa++)if((Xa=Ca[Fa])&&Xa[0]&&Xa[0].trace&&(Na=Xa[0].trace,!0===Na.visible&&0!==Na._length&&-1===["carpet","contourcarpet"].indexOf(Na._module.name))){"splom"===Na.type?(gb=0,ab=ca[gb]):(ab=u.getSubplot(Na),gb=ca.indexOf(ab));bb=la;u.isUnifiedHover(bb)&&(bb=bb.charAt(0));mb={cd:Xa,trace:Na,
xa:pa[gb],ya:oa[gb],maxHoverDistance:ua,maxSpikeDistance:na,index:!1,distance:Math.min(Ya,ua),spikeDistance:Infinity,xSpike:void 0,ySpike:void 0,color:z.defaultLine,name:Na.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0};ba[ab]&&(mb.subplot=ba[ab]._subplot);ba._splomScenes&&ba._splomScenes[Na.uid]&&(mb.scene=ba._splomScenes[Na.uid]);ya=wa.length;if("array"===bb){var Qa=T[Fa];"pointNumber"in Qa?(mb.index=Qa.pointNumber,bb="closest"):(bb=
"","xval"in Qa&&(La=Qa.xval,bb="x"),"yval"in Qa&&(kb=Qa.yval,bb=bb?"closest":"y"))}else void 0!==va&&void 0!==Ea?(La=va,kb=Ea):(La=Ta[gb],kb=hb[gb]);if(0!==ua)if(Na._module&&Na._module.hoverPoints){if(Qa=Na._module.hoverPoints(mb,La,kb,bb,ba._hoverlayer))for(var $a,eb=0;eb<Qa.length;eb++)$a=Qa[eb],g($a.x0)&&g($a.y0)&&wa.push(f($a,la))}else q.log("Unrecognized trace type in hover:",Na);"closest"===la&&wa.length>ya&&(wa.splice(0,ya),Ya=wa[0].distance);qa&&0!==na&&0===wa.length&&(mb.distance=na,mb.index=
!1,(Qa=Na._module.hoverPoints(mb,La,kb,"closest",ba._hoverlayer))&&(Qa=Qa.filter(function(pb){return pb.spikeDistance<=na})),Qa&&Qa.length)&&($a=Qa.filter(function(pb){return pb.xa.showspikes&&"hovered data"!==pb.xa.spikesnap}),$a.length&&($a=$a[0],g($a.x0)&&g($a.y0)&&($a=ea($a),!Ia.vLinePoint||Ia.vLinePoint.spikeDistance>$a.spikeDistance))&&(Ia.vLinePoint=$a),Qa=Qa.filter(function(pb){return pb.ya.showspikes&&"hovered data"!==pb.ya.spikesnap}),Qa.length&&(Qa=Qa[0],g(Qa.x0)&&g(Qa.y0)&&($a=ea(Qa),
!Ia.hLinePoint||Ia.hLinePoint.spikeDistance>$a.spikeDistance))&&(Ia.hLinePoint=$a))}}function Y(va,Ea){for(var Qa=null,$a=Infinity,eb,pb=0;pb<va.length;pb++)eb=va[pb].spikeDistance,eb<=$a&&eb<=Ea&&(Qa=va[pb],$a=eb);return Qa}function ea(va){return va?{xa:va.xa,ya:va.ya,x:void 0!==va.xSpike?va.xSpike:(va.x0+va.x1)/2,y:void 0!==va.ySpike?va.ySpike:(va.y0+va.y1)/2,distance:va.distance,spikeDistance:va.spikeDistance,curveNumber:va.trace.index,color:va.color,pointNumber:va.index}:null}V||(V="xy");var ca=
Array.isArray(V)?V:[V],ba=O._fullLayout,ka=ba._plots||[];V=ka[V];var qa=ba._has("cartesian");V&&(V=V.overlays.map(function(va){return va.id}),ca=ca.concat(V));V=ca.length;for(var pa=Array(V),oa=Array(V),ja=!1,ra=0;ra<V;ra++){var ha=ca[ra];if(ka[ha])ja=!0,pa[ra]=ka[ha].xaxis,oa[ra]=ka[ha].yaxis;else if(ba[ha]&&ba[ha]._subplot)ha=ba[ha]._subplot,pa[ra]=ha.xaxis,oa[ra]=ha.yaxis;else{q.warn("Unrecognized subplot: "+ha);return}}var la=T.hovermode||ba.hovermode;la&&!ja&&(la="closest");if(-1===["x","y",
"closest","x unified","y unified"].indexOf(la)||!O.calcdata||O.querySelector(".zoombox")||O._dragging)return y.unhoverRaw(O,T);var ua=-1===ba.hoverdistance?Infinity:ba.hoverdistance,na=-1===ba.spikedistance?Infinity:ba.spikedistance,wa=[],Ca=[],Fa,Xa,ab,gb,bb,La,kb,mb,ya,Ia={hLinePoint:null,vLinePoint:null};ka=!1;if(Array.isArray(T))for(la="array",ra=0;ra<T.length;ra++){if(Xa=O.calcdata[T[ra].curveNumber||0]){var Na=Xa[0].trace;"skip"!==Xa[0].trace.hoverinfo&&(Ca.push(Xa),"h"===Na.orientation&&(ka=
!0))}}else{for(Fa=0;Fa<O.calcdata.length;Fa++)Xa=O.calcdata[Fa],Na=Xa[0].trace,"skip"!==Na.hoverinfo&&u.isTraceInSubplots(Na,ca)&&(Ca.push(Xa),"h"===Na.orientation&&(ka=!0));if(T.target){if(!1===t.triggerHandler(O,"plotly_beforehover",T))return;ja=T.target.getBoundingClientRect();V=T.clientX-ja.left;ja=T.clientY-ja.top;if(0>V||V>pa[0]._length||0>ja||ja>oa[0]._length)return y.unhoverRaw(O,T)}else V="xpx"in T?T.xpx:pa[0]._length/2,ja="ypx"in T?T.ypx:oa[0]._length/2;T.pointerX=V+pa[0]._offset;T.pointerY=
ja+oa[0]._offset;var Ta="xval"in T?u.flat(ca,T.xval):u.p2c(pa,V);var hb="yval"in T?u.flat(ca,T.yval):u.p2c(oa,ja);if(!g(Ta[0])||!g(hb[0]))return q.warn("Fx.hover failed",T,O),y.unhoverRaw(O,T)}var Ya=Infinity;aa();V={fullLayout:ba,container:ba._hoverlayer,outerContainer:ba._paperdiv,event:T};O._spikepoints={vLinePoint:Ia.vLinePoint,hLinePoint:Ia.hLinePoint};qa&&0!==na&&0!==wa.length&&(ja=wa.filter(function(va){return va.ya.showspikes}),ja=Y(ja,na),Ia.hLinePoint=ea(ja),ja=wa.filter(function(va){return va.xa.showspikes}),
ja=Y(ja,na),Ia.vLinePoint=ea(ja));if(0===wa.length)return Z=y.unhoverRaw(O,T),!qa||null===Ia.hLinePoint&&null===Ia.vLinePoint||l(O,Ia,V),Z;qa&&l(O,Ia,V);wa.sort(function(va,Ea){return va.distance-Ea.distance});if(u.isXYhover(bb)&&0!==wa[0].length&&"splom"!==wa[0].trace.type){V=wa[0];ja=V.cd[V.index];ra="group"===ba.boxmode||"group"===ba.violinmode;ha=V.xVal;var Ga=V.xa;"category"===Ga.type&&(ha=Ga._categoriesMap[ha]);"date"===Ga.type&&(ha=Ga.d2c(ha));ja&&ja.t&&ja.t.posLetter===Ga._id&&ra&&(ha+=ja.t.dPos);
var Pa=V.yVal;Ga=V.ya;"category"===Ga.type&&(Pa=Ga._categoriesMap[Pa]);"date"===Ga.type&&(Pa=Ga.d2c(Pa));ja&&ja.t&&ja.t.posLetter===Ga._id&&ra&&(Pa+=ja.t.dPos);aa(ha,Pa);var Va={};wa=wa.filter(function(va){va=n(va);if(!Va[va])return Va[va]=!0,Va[va]})}V=O._hoverdata;ja=[];for(ra=0;ra<wa.length;ra++)ha=wa[ra],Ga=u.makeEventData(ha,ha.trace,ha.cd),!1!==ha.hovertemplate&&(Pa=!1,ha.cd[ha.index]&&ha.cd[ha.index].ht&&(Pa=ha.cd[ha.index].ht),ha.hovertemplate=Pa||ha.trace.hovertemplate||!1),ha.eventData=
[Ga],ja.push(Ga);O._hoverdata=ja;ka="y"===la&&(1<Ca.length||1<wa.length)||"closest"===la&&ka&&1<wa.length;ra=z.combine(ba.plot_bgcolor||z.background,ba.paper_bgcolor);ra=p(wa,{hovermode:la,rotateLabels:ka,bgColor:ra,container:ba._hoverlayer,outerContainer:ba._paperdiv,commonLabelOpts:ba.hoverlabel,hoverdistance:ba.hoverdistance},O);u.isUnifiedHover(la)||(a(ra,ka?"xa":"ya",ba),e(ra,ka));T.target&&T.target.tagName&&(ka=C.getComponentMethod("annotations","hasClickToShow")(O,ja),w(d.select(T.target),
ka?"pointer":""));T.target&&!Z&&m(O,T,V)&&(V&&O.emit("plotly_unhover",{event:T,points:V}),O.emit("plotly_hover",{event:T,points:O._hoverdata,xaxes:pa,yaxes:oa,xvals:Ta,yvals:hb}))}function n(O){return[O.trace.index,O.index,O.x0,O.y0,O.name,O.attr,O.xa,O.ya||""].join()}function p(O,T,V){function Z(La){return La.filter(function(kb){return void 0!==kb.zLabelVal||(kb[la]||"").split(" ")[0]===na})}var aa=V._fullLayout,Y=T.hovermode,ea=T.rotateLabels,ca=T.bgColor,ba=T.container,ka=T.outerContainer,qa=T.commonLabelOpts||
{},pa=T.fontFamily||F.HOVERFONT,oa=T.fontSize||F.HOVERFONTSIZE,ja=O[0],ra=ja.xa,ha=ja.ya,la="y"===Y.charAt(0)?"yLabel":"xLabel",ua=ja[la],na=(String(ua)||"").split(" ")[0];ka=ka.node().getBoundingClientRect();var wa=ka.top,Ca=ka.width,Fa=ka.height,Xa=void 0!==ua&&ja.distance<=T.hoverdistance&&("x"===Y||"y"===Y);if(Xa){ka=!0;var ab,gb;for(ab=0;ab<O.length;ab++)if(ka&&void 0===O[ab].zLabel&&(ka=!1),gb=O[ab].hoverinfo||O[ab].trace.hoverinfo)if(gb=Array.isArray(gb)?gb:gb.split("+"),-1===gb.indexOf("all")&&
-1===gb.indexOf(Y)){Xa=!1;break}ka&&(Xa=!1)}ka=ba.selectAll("g.axistext").data(Xa?[0]:[]);ka.enter().append("g").classed("axistext",!0);ka.exit().remove();ka.each(function(){var La=d.select(this),kb=q.ensureSingle(La,"path","",function(va){va.style({"stroke-width":"1px"})}),mb=q.ensureSingle(La,"text","",function(va){va.attr("data-notex",1)}),ya=qa.bgcolor||z.defaultLine,Ia=qa.bordercolor||z.contrast(ya),Na=z.contrast(ya),Ta={family:qa.font.family||pa,size:qa.font.size||oa,color:qa.font.color||Na};
kb.style({fill:ya,stroke:Ia});mb.text(ua).call(A.font,Ta).call(v.positionText,0,0).call(v.convertToTspans,V);La.attr("transform","");var hb=mb.node().getBoundingClientRect();if("x"===Y)Na="top"===ra.side?"-":"",mb.attr("text-anchor","middle").call(v.positionText,0,"top"===ra.side?wa-hb.bottom-P-N:wa-hb.top+P+N),ya=ra._offset+(ja.x0+ja.x1)/2,Ia=ha._offset+("top"===ra.side?0:ha._length),mb=hb.width/2+N,ya<mb?(ya=mb,kb.attr("d","M-"+(mb-P)+",0L-"+(mb-2*P)+","+Na+P+"H"+(N+hb.width/2)+"v"+Na+(2*N+hb.height)+
"H-"+mb+"V"+Na+P+"Z")):ya>aa.width-mb?(ya=aa.width-mb,kb.attr("d","M"+(mb-P)+",0L"+mb+","+Na+P+"v"+Na+(2*N+hb.height)+"H-"+mb+"V"+Na+P+"H"+(mb-2*P)+"Z")):kb.attr("d","M0,0L"+P+","+Na+P+"H"+(N+hb.width/2)+"v"+Na+(2*N+hb.height)+"H-"+(N+hb.width/2)+"V"+Na+P+"H-"+P+"Z");else{if("right"===ha.side){Na="start";var Ya=1;var Ga="";ya=ra._offset+ra._length}else Na="end",Ya=-1,Ga="-",ya=ra._offset;Ia=ha._offset+(ja.y0+ja.y1)/2;mb.attr("text-anchor",Na);kb.attr("d","M0,0L"+Ga+P+","+P+"V"+(N+hb.height/2)+"h"+
Ga+(2*N+hb.width)+"V-"+(N+hb.height/2)+"H"+Ga+P+"V-"+P+"Z");var Pa=hb.height/2;Ga=wa-hb.top-Pa;kb="clip"+aa._uid+"commonlabel"+ha._id;if(ya<hb.width+2*N+P){Ya="M-"+(P+N)+"-"+Pa+"h-"+(hb.width-N)+"V"+Pa+"h"+(hb.width-N)+"Z";var Va=hb.width-ya+N;v.positionText(mb,Va,Ga);"end"===Na&&mb.selectAll("tspan").each(function(){var va=d.select(this),Ea=A.tester.append("text").text(va.text()).call(A.font,Ta),Qa=Ea.node().getBoundingClientRect();Math.round(Qa.width)<Math.round(hb.width)&&va.attr("x",Va-Qa.width);
Ea.remove()})}else v.positionText(mb,Ya*(N+P),Ga),Ya=null;Na=aa._topclips.selectAll("#"+kb).data(Ya?[0]:[]);Na.enter().append("clipPath").attr("id",kb).append("path");Na.exit().remove();Na.select("path").attr("d",Ya);A.setClipUrl(mb,Ya?kb:null,V)}La.attr("transform","translate("+ya+","+Ia+")");O=Z(O)});if(u.isUnifiedHover(Y)){ba.selectAll("g.hovertext").remove();void 0!==ua&&ja.distance<=T.hoverdistance&&(O=Z(O));if(0===O.length)return;T={};H({showlegend:!0,legend:{title:{text:ua,font:aa.hoverlabel.font},
font:aa.hoverlabel.font,bgcolor:aa.hoverlabel.bgcolor,bordercolor:aa.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:aa.legend?aa.legend.traceorder:void 0,orientation:"v"}},T,V._fullData);T=T.legend;T.entries=[];for(ka=0;ka<O.length;ka++){gb=k(O[ka],!0,Y,aa,ua);ab=gb[0];var bb=gb[1];gb=O[ka];gb.name=bb;gb.text=""!==bb?bb+" : "+ab:ab;if(ab=gb.cd[gb.index])ab.mc&&(gb.mc=ab.mc),ab.mcc&&(gb.mc=ab.mcc),ab.mlc&&(gb.mlc=ab.mlc),ab.mlcc&&(gb.mlc=ab.mlcc),ab.mlw&&(gb.mlw=ab.mlw),ab.mrc&&(gb.mrc=
ab.mrc),ab.dir&&(gb.dir=ab.dir);gb._distinct=!0;T.entries.push([gb])}T.entries.sort(function(La,kb){return La[0].trace.index-kb[0].trace.index});T.layer=ba;J(V,T);T=q.mean(O.map(function(La){return(La.y0+La.y1)/2}));ka=q.mean(O.map(function(La){return(La.x0+La.x1)/2}));ba=ba.select("g.legend");ab=ba.node().getBoundingClientRect();ka+=ra._offset;T+=ha._offset-ab.height/2;gb=ab.width+2*N;ka=!(ka+gb<=Ca)&&0<=ka-gb?ka-gb:ka+2*N;ab=ab.height+2*N;gb=T+ab>=Fa;ab<=Fa&&(T<=wa?T=ha._offset+2*N:gb&&(T=Fa-ab));
ba.attr("transform","translate("+ka+","+T+")");return ba}ba=ba.selectAll("g.hovertext").data(O,function(La){return n(La)});ba.enter().append("g").classed("hovertext",!0).each(function(){var La=d.select(this);La.append("rect").call(z.fill,z.addOpacity(ca,.8));La.append("text").classed("name",!0);La.append("path").style("stroke-width","1px");La.append("text").classed("nums",!0).call(A.font,pa,oa)});ba.exit().remove();ba.each(function(La){var kb=d.select(this).attr("transform",""),mb=La.bgcolor||La.color,
ya=z.combine(z.opacity(mb)?mb:z.defaultLine,ca),Ia=z.combine(z.opacity(La.color)?La.color:z.defaultLine,ca),Na=La.borderColor||z.contrast(ya);mb=k(La,Xa,Y,aa,ua,kb);var Ta=mb[0],hb=mb[1];mb=kb.select("text.nums").call(A.font,La.fontFamily||pa,La.fontSize||oa,La.fontColor||Na).text(Ta).attr("data-notex",1).call(v.positionText,0,0).call(v.convertToTspans,V);var Ya=kb.select("text.name"),Ga=0,Pa=0;hb&&hb!==Ta?(Ya.call(A.font,La.fontFamily||pa,La.fontSize||oa,Ia).text(hb).attr("data-notex",1).call(v.positionText,
0,0).call(v.convertToTspans,V),Pa=Ya.node().getBoundingClientRect(),Ga=Pa.width+2*N,Pa=Pa.height+2*N):(Ya.remove(),kb.select("rect").remove());kb.select("path").style({fill:ya,stroke:Na});var Va=mb.node().getBoundingClientRect();ya=La.xa._offset+(La.x0+La.x1)/2;Na=La.ya._offset+(La.y0+La.y1)/2;Ia=Math.abs(La.x1-La.x0);Ta=Math.abs(La.y1-La.y0);hb=Va.width+P+N+Ga;La.ty0=wa-Va.top;La.bx=Va.width+2*N;La.by=Math.max(Va.height+2*N,Pa);La.anchor="start";La.txwidth=Va.width;La.tx2width=Ga;La.offset=0;ea?
(La.pos=ya,Pa=Na+Ta/2+hb<=Fa,("top"===La.idealAlign||!Pa)&&0<=Na-Ta/2-hb?(Na-=Ta/2,La.anchor="end"):Pa?(Na+=Ta/2,La.anchor="start"):La.anchor="middle"):(La.pos=Na,Pa=ya+Ia/2+hb<=Ca,("left"===La.idealAlign||!Pa)&&0<=ya-Ia/2-hb?(ya-=Ia/2,La.anchor="end"):Pa?(ya+=Ia/2,La.anchor="start"):(La.anchor="middle",Ia=hb/2,Pa=ya+Ia-Ca,Ia=ya-Ia,0<Pa&&(ya-=Pa),0>Ia&&(ya+=-Ia)));mb.attr("text-anchor",La.anchor);Ga&&Ya.attr("text-anchor",La.anchor);kb.attr("transform","translate("+ya+","+Na+")"+(ea?"rotate("+I+")":
""))});return ba}function k(O,T,V,Z,aa,Y){var ea="",ca="";void 0!==O.nameOverride&&(O.name=O.nameOverride);O.name&&(O.trace._meta&&(O.name=q.templateString(O.name,O.trace._meta)),ea=c(O.name,O.nameLength));void 0!==O.zLabel?(void 0!==O.xLabel&&(ca+="x: "+O.xLabel+"\x3cbr\x3e"),void 0!==O.yLabel&&(ca+="y: "+O.yLabel+"\x3cbr\x3e"),"choropleth"!==O.trace.type&&"choroplethmapbox"!==O.trace.type&&(ca+=(ca?"z: ":"")+O.zLabel)):T&&O[V.charAt(0)+"Label"]===aa?ca=O[("x"===V.charAt(0)?"y":"x")+"Label"]||"":
void 0===O.xLabel?void 0!==O.yLabel&&"scattercarpet"!==O.trace.type&&(ca=O.yLabel):ca=void 0===O.yLabel?O.xLabel:"("+O.xLabel+", "+O.yLabel+")";!O.text&&0!==O.text||Array.isArray(O.text)||(ca+=(ca?"\x3cbr\x3e":"")+O.text);void 0!==O.extraText&&(ca+=(ca?"\x3cbr\x3e":"")+O.extraText);Y&&""===ca&&!O.hovertemplate&&(""===ea&&Y.remove(),ca=ea);T=Z._d3locale;V=O.hovertemplate||!1;Z=O.hovertemplateLabels||O;aa=O.eventData[0]||{};V&&(ca=q.hovertemplateString(V,Z,T,aa,O.trace._meta),ca=ca.replace(Q,function(ba,
ka){ea=c(ka,O.nameLength);return""}));return[ca,ea]}function a(O,T,V){function Z(na){var wa=na[0],Ca=na[na.length-1];qa=wa.pmin-wa.pos-wa.dp+wa.size;pa=Ca.pos+Ca.dp+Ca.size-wa.pmax;if(.01<qa){for(ja=na.length-1;0<=ja;ja--)na[ja].dp+=qa;ka=!1}if(!(.01>pa)){if(-.01>qa){for(ja=na.length-1;0<=ja;ja--)na[ja].dp-=pa;ka=!1}if(ka){for(oa=Ca=0;oa<na.length;oa++)ra=na[oa],ra.pos+ra.dp+ra.size>wa.pmax&&Ca++;for(oa=na.length-1;0<=oa&&!(0>=Ca);oa--)ra=na[oa],ra.pos>wa.pmax-1&&(ra.del=!0,Ca--);for(oa=0;oa<na.length&&
!(0>=Ca);oa++)if(ra=na[oa],ra.pos<wa.pmin+1)for(ra.del=!0,Ca--,pa=2*ra.size,ja=na.length-1;0<=ja;ja--)na[ja].dp-=pa;for(oa=na.length-1;0<=oa&&!(0>=Ca);oa--)ra=na[oa],ra.pos+ra.dp+ra.size>wa.pmax&&(ra.del=!0,Ca--)}}}var aa=0,Y=1,ea=O.size(),ca=Array(ea),ba=0;O.each(function(na){var wa=na[T],Ca="x"===wa._id.charAt(0);wa=wa.range;0===ba&&wa&&wa[0]>wa[1]!==Ca&&(Y=-1);ca[ba++]=[{datum:na,traceIndex:na.trace.index,dp:0,pos:na.pos,posref:na.posref,size:na.by*(Ca?M:1)/2,pmin:0,pmax:Ca?V.width:V.height}]});
ca.sort(function(na,wa){return na[0].posref-wa[0].posref||Y*(wa[0].traceIndex-na[0].traceIndex)});for(var ka,qa,pa,oa,ja,ra,ha;!ka&&aa<=ea;){aa++;ka=!0;for(oa=0;oa<ca.length-1;){O=ca[oa];ha=ca[oa+1];var la=O[O.length-1],ua=ha[0];qa=la.pos+la.dp+la.size-ua.pos-ua.dp+ua.size;if(.01<qa&&la.pmin===ua.pmin&&la.pmax===ua.pmax){for(ja=ha.length-1;0<=ja;ja--)ha[ja].dp+=qa;O.push.apply(O,ha);ca.splice(oa+1,1);ha=0;for(ja=O.length-1;0<=ja;ja--)ha+=O[ja].dp;pa=ha/O.length;for(ja=O.length-1;0<=ja;ja--)O[ja].dp-=
pa;ka=!1}else oa++}ca.forEach(Z)}for(oa=ca.length-1;0<=oa;oa--)for(aa=ca[oa],ja=aa.length-1;0<=ja;ja--)ea=aa[ja],O=ea.datum,O.offset=ea.dp,O.del=ea.del}function e(O,T){O.each(function(V){var Z=d.select(this);if(V.del)return Z.remove();var aa=Z.select("text.nums"),Y=V.anchor,ea="end"===Y?-1:1,ca={start:1,end:-1,middle:0}[Y],ba=ca*(P+N),ka=ba+ca*(V.txwidth+N),qa=0,pa=V.offset;"middle"===Y&&(ba-=V.tx2width/2,ka+=V.txwidth/2+N);T&&(pa*=-L,qa=V.offset*E);Z.select("path").attr("d","middle"===Y?"M-"+(V.bx/
2+V.tx2width/2)+","+(pa-V.by/2)+"h"+V.bx+"v"+V.by+"h-"+V.bx+"Z":"M0,0L"+(ea*P+qa)+","+(P+pa)+"v"+(V.by/2-P)+"h"+ea*V.bx+"v-"+V.by+"H"+(ea*P+qa)+"V"+(pa-P)+"Z");ea=ba+qa;ba=pa+V.ty0-V.by/2+N;var oa=V.textAlign||"auto";"auto"!==oa&&("left"===oa&&"start"!==Y?(aa.attr("text-anchor","start"),ea="middle"===Y?-V.bx/2-V.tx2width/2+N:-V.bx-N):"right"===oa&&"end"!==Y&&(aa.attr("text-anchor","end"),ea="middle"===Y?V.bx/2-V.tx2width/2-N:V.bx+N));aa.call(v.positionText,ea,ba);V.tx2width&&(Z.select("text.name").call(v.positionText,
ka+ca*N+qa,pa+V.ty0-V.by/2+N),Z.select("rect").call(A.setRect,ka+(ca-1)*V.tx2width/2+qa,pa-V.by/2-1,V.tx2width,V.by+2))})}function f(O,T){function V(qa){return qa||g(qa)&&0===qa}function Z(qa,pa,oa){pa=ba(pa,oa);V(pa)&&(O[qa]=pa)}var aa=O.index,Y=O.trace||{},ea=O.cd[0],ca=O.cd[aa]||{},ba=Array.isArray(aa)?function(qa,pa){qa=q.castOption(ea,aa,qa);return V(qa)?qa:q.extractOption({},Y,"",pa)}:function(qa,pa){return q.extractOption(ca,Y,qa,pa)};Z("hoverinfo","hi","hoverinfo");Z("bgcolor","hbg","hoverlabel.bgcolor");
Z("borderColor","hbc","hoverlabel.bordercolor");Z("fontFamily","htf","hoverlabel.font.family");Z("fontSize","hts","hoverlabel.font.size");Z("fontColor","htc","hoverlabel.font.color");Z("nameLength","hnl","hoverlabel.namelength");Z("textAlign","hta","hoverlabel.align");O.posref="y"===T||"closest"===T&&"h"===Y.orientation?O.xa._offset+(O.x0+O.x1)/2:O.ya._offset+(O.y0+O.y1)/2;O.x0=q.constrain(O.x0,0,O.xa._length);O.x1=q.constrain(O.x1,0,O.xa._length);O.y0=q.constrain(O.y0,0,O.ya._length);O.y1=q.constrain(O.y1,
0,O.ya._length);void 0!==O.xLabelVal&&(O.xLabel="xLabel"in O?O.xLabel:B.hoverLabelText(O.xa,O.xLabelVal),O.xVal=O.xa.c2d(O.xLabelVal));void 0!==O.yLabelVal&&(O.yLabel="yLabel"in O?O.yLabel:B.hoverLabelText(O.ya,O.yLabelVal),O.yVal=O.ya.c2d(O.yLabelVal));void 0!==O.zLabelVal&&void 0===O.zLabel&&(O.zLabel=String(O.zLabelVal));if(!(isNaN(O.xerr)||"log"===O.xa.type&&0>=O.xerr)){var ka=B.tickText(O.xa,O.xa.c2l(O.xerr),"hover").text;O.xLabel=void 0!==O.xerrneg?O.xLabel+(" +"+ka+" / -"+B.tickText(O.xa,O.xa.c2l(O.xerrneg),
"hover").text):O.xLabel+(" ± "+ka);"x"===T&&(O.distance+=1)}isNaN(O.yerr)||"log"===O.ya.type&&0>=O.yerr||(ka=B.tickText(O.ya,O.ya.c2l(O.yerr),"hover").text,O.yLabel=void 0!==O.yerrneg?O.yLabel+(" +"+ka+" / -"+B.tickText(O.ya,O.ya.c2l(O.yerrneg),"hover").text):O.yLabel+(" ± "+ka),"y"===T&&(O.distance+=1));(T=O.hoverinfo||O.trace.hoverinfo)&&"all"!==T&&(T=Array.isArray(T)?T:T.split("+"),-1===T.indexOf("x")&&(O.xLabel=void 0),-1===T.indexOf("y")&&(O.yLabel=void 0),-1===T.indexOf("z")&&(O.zLabel=void 0),
-1===T.indexOf("text")&&(O.text=void 0),-1===T.indexOf("name")&&(O.name=void 0));return O}function l(O,T,V){var Z=V.container,aa=V.fullLayout,Y=aa._size;V=V.event;var ea=!!T.hLinePoint,ca=!!T.vLinePoint;Z.selectAll(".spikeline").remove();if(ca||ea){aa=z.combine(aa.plot_bgcolor,aa.paper_bgcolor);if(ea){var ba=T.hLinePoint;var ka=ba&&ba.xa;ea=ba&&ba.ya;if("cursor"===ea.spikesnap){var qa=V.pointerX;ka=V.pointerY}else qa=ka._offset+ba.x,ka=ea._offset+ba.y;var pa=1.5>h.readability(ba.color,aa)?z.contrast(aa):
ba.color;ba=ea.spikemode;var oa=ea.spikethickness;pa=ea.spikecolor||pa;var ja=B.getPxPosition(O,ea);if(-1!==ba.indexOf("toaxis")||-1!==ba.indexOf("across")){if(-1!==ba.indexOf("toaxis")){var ra=ja;var ha=qa}-1!==ba.indexOf("across")&&(ra=ea._counterDomainMin,ha=ea._counterDomainMax,"free"===ea.anchor&&(ra=Math.min(ra,ea.position),ha=Math.max(ha,ea.position)),ra=Y.l+ra*Y.w,ha=Y.l+ha*Y.w);Z.insert("line",":first-child").attr({x1:ra,x2:ha,y1:ka,y2:ka,"stroke-width":oa,stroke:pa,"stroke-dasharray":A.dashStyle(ea.spikedash,
oa)}).classed("spikeline",!0).classed("crisp",!0);Z.insert("line",":first-child").attr({x1:ra,x2:ha,y1:ka,y2:ka,"stroke-width":oa+2,stroke:aa}).classed("spikeline",!0).classed("crisp",!0)}-1!==ba.indexOf("marker")&&Z.insert("circle",":first-child").attr({cx:ja+("right"!==ea.side?oa:-oa),cy:ka,r:oa,fill:pa}).classed("spikeline",!0)}if(ca){ka=(ca=T.vLinePoint)&&ca.xa;ea=ca&&ca.ya;"cursor"===ka.spikesnap?(T=V.pointerX,ea=V.pointerY):(T=ka._offset+ca.x,ea=ea._offset+ca.y);ra=1.5>h.readability(ca.color,
aa)?z.contrast(aa):ca.color;V=ka.spikemode;ca=ka.spikethickness;ra=ka.spikecolor||ra;O=B.getPxPosition(O,ka);if(-1!==V.indexOf("toaxis")||-1!==V.indexOf("across")){if(-1!==V.indexOf("toaxis")){var la=O;var ua=ea}-1!==V.indexOf("across")&&(ua=ka._counterDomainMin,la=ka._counterDomainMax,"free"===ka.anchor&&(ua=Math.min(ua,ka.position),la=Math.max(la,ka.position)),la=Y.t+(1-la)*Y.h,ua=Y.t+(1-ua)*Y.h);Z.insert("line",":first-child").attr({x1:T,x2:T,y1:la,y2:ua,"stroke-width":ca,stroke:ra,"stroke-dasharray":A.dashStyle(ka.spikedash,
ca)}).classed("spikeline",!0).classed("crisp",!0);Z.insert("line",":first-child").attr({x1:T,x2:T,y1:la,y2:ua,"stroke-width":ca+2,stroke:aa}).classed("spikeline",!0).classed("crisp",!0)}-1!==V.indexOf("marker")&&Z.insert("circle",":first-child").attr({cx:T,cy:O-("top"!==ka.side?ca:-ca),r:ca,fill:ra}).classed("spikeline",!0)}}}function m(O,T,V){if(!V||V.length!==O._hoverdata.length)return!0;for(T=V.length-1;0<=T;T--){var Z=V[T],aa=O._hoverdata[T];if(Z.curveNumber!==aa.curveNumber||String(Z.pointNumber)!==
String(aa.pointNumber)||String(Z.pointNumbers)!==String(aa.pointNumbers))return!0}return!1}function c(O,T){return v.plainText(O||"",{len:T,allowedTags:"br sub sup b i em".split(" ")})}var d=b("d3"),g=b("fast-isnumeric"),h=b("tinycolor2"),q=b("../../lib"),t=b("../../lib/events"),v=b("../../lib/svg_text_utils"),w=b("../../lib/override_cursor"),A=b("../drawing"),z=b("../color"),y=b("../dragelement"),B=b("../../plots/cartesian/axes"),C=b("../../registry"),u=b("./helpers"),F=b("./constants"),H=b("../legend/defaults"),
J=b("../legend/draw"),I=F.YANGLE;b=Math.PI*I/180;var M=1/Math.sin(b),E=Math.cos(b),L=Math.sin(b),P=F.HOVERARROWSIZE,N=F.HOVERTEXTPAD;G.hover=function(O,T,V,Z){O=q.getGraphDiv(O);q.throttle(O._fullLayout._uid+F.HOVERID,F.HOVERMINTIME,function(){r(O,T,V,Z)})};G.loneHover=function(O,T){var V=!0;Array.isArray(O)||(V=!1,O=[O]);O=O.map(function(ca){return{color:ca.color||z.defaultLine,x0:ca.x0||ca.x||0,x1:ca.x1||ca.x||0,y0:ca.y0||ca.y||0,y1:ca.y1||ca.y||0,xLabel:ca.xLabel,yLabel:ca.yLabel,zLabel:ca.zLabel,
text:ca.text,name:ca.name,idealAlign:ca.idealAlign,borderColor:ca.borderColor,fontFamily:ca.fontFamily,fontSize:ca.fontSize,fontColor:ca.fontColor,nameLength:ca.nameLength,textAlign:ca.textAlign,trace:ca.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:ca.hovertemplate||!1,eventData:ca.eventData||!1,hovertemplateLabels:ca.hovertemplateLabels||!1}});var Z=d.select(T.container),aa=T.outerContainer?d.select(T.outerContainer):Z;Z={hovermode:"closest",rotateLabels:!1,bgColor:T.bgColor||
z.background,container:Z,outerContainer:aa};O=p(O,Z,T.gd);var Y=0,ea=0;O.sort(function(ca,ba){return ca.y0-ba.y0}).each(function(ca,ba){var ka=ca.y0-ca.by/2;ca.offset=ka-5<Y?Y-ka+5:0;Y=ka+ca.by+ca.offset;ba===T.anchorIndex&&(ea=ca.offset)}).each(function(ca){ca.offset-=ea});e(O,Z.rotateLabels);return V?O:O.node()};var Q=/<extra>([\s\S]*)<\/extra>/},{"../../lib":749,"../../lib/events":738,"../../lib/override_cursor":760,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../registry":880,
"../color":615,"../dragelement":634,"../drawing":637,"../legend/defaults":667,"../legend/draw":668,"./constants":649,"./helpers":651,d3:169,"fast-isnumeric":241,tinycolor2:548}],653:[function(b,D,G){var r=b("../../lib"),n=b("../color"),p=b("./helpers").isUnifiedHover;D.exports=function(k,a,e,f){function l(m){f.font[m]||(f.font[m]=a.legend?a.legend.font[m]:a.font[m])}f=f||{};a&&p(a.hovermode)&&(f.font||(f.font={}),l("size"),l("family"),l("color"),a.legend?(f.bgcolor||(f.bgcolor=n.combine(a.legend.bgcolor,
a.paper_bgcolor)),f.bordercolor||(f.bordercolor=a.legend.bordercolor)):f.bgcolor||(f.bgcolor=a.paper_bgcolor));e("hoverlabel.bgcolor",f.bgcolor);e("hoverlabel.bordercolor",f.bordercolor);e("hoverlabel.namelength",f.namelength);r.coerceFont(e,"hoverlabel.font",f.font);e("hoverlabel.align",f.align)}},{"../../lib":749,"../color":615,"./helpers":651}],654:[function(b,D,G){function r(k,a){a=a._scatterStackOpts||{};for(var e=0;e<k.length;e++){var f=k[e],l=(a[f.xaxis+f.yaxis]||{})[f.stackgroup]||{};if("h"!==
f.orientation&&"h"!==l.orientation)return!1}return!0}var n=b("../../lib"),p=b("./layout_attributes");D.exports=function(k,a,e){function f(m,c){return void 0!==a[m]?a[m]:n.coerce(k,a,p,m,c)}var l=f("clickmode");a._has("cartesian")?-1<l.indexOf("select")?e="closest":(a._isHoriz=r(e,a),e=a._isHoriz?"y":"x"):e="closest";return f("hovermode",e)}},{"../../lib":749,"./layout_attributes":656}],655:[function(b,D,G){var r=b("d3"),n=b("../../lib");G=b("../dragelement");var p=b("./helpers"),k=b("./layout_attributes"),
a=b("./hover");D.exports={moduleType:"component",name:"fx",constants:b("./constants"),schema:{layout:k},attributes:b("./attributes"),layoutAttributes:k,supplyLayoutGlobalDefaults:b("./layout_global_defaults"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),getDistanceFunction:p.getDistanceFunction,getClosest:p.getClosest,inbox:p.inbox,quadrature:p.quadrature,appendArrayPointValue:p.appendArrayPointValue,castHoverOption:function(e,f,l){return n.castOption(e,
f,"hoverlabel."+l)},castHoverinfo:function(e,f,l){return n.castOption(e,l,"hoverinfo",function(m){return n.coerceHoverinfo({hoverinfo:m},{_module:e._module},f)})},hover:a.hover,unhover:G.unhover,loneHover:a.loneHover,loneUnhover:function(e){e=n.isD3Selection(e)?e:r.select(e);e.selectAll("g.hovertext").remove();e.selectAll(".spikeline").remove()},click:b("./click")}},{"../../lib":749,"../dragelement":634,"./attributes":646,"./calc":647,"./click":648,"./constants":649,"./defaults":650,"./helpers":651,
"./hover":652,"./layout_attributes":656,"./layout_defaults":657,"./layout_global_defaults":658,d3:169}],656:[function(b,D,G){G=b("./constants");b=b("../../plots/font_attributes")({editType:"none"});b.family.dflt=G.HOVERFONT;b.size.dflt=G.HOVERFONTSIZE;D.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit",
"turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:b,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",
min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":825,"./constants":649}],657:[function(b,D,G){var r=b("../../lib"),n=b("./helpers").isUnifiedHover,p=b("./layout_attributes"),k=b("./hovermode_defaults"),a=b("./hoverlabel_defaults");D.exports=function(e,f,l){function m(g,h){return r.coerce(e,f,p,g,h)}if(l=k(e,f,l))m("hoverdistance"),m("spikedistance",n(l)?-1:void 0);"select"===
m("dragmode")&&m("selectdirection");l=f._has("mapbox");var c=f._has("geo"),d=f._basePlotModules.length;"zoom"===f.dragmode&&((l||c)&&1===d||l&&c&&2===d)&&(f.dragmode="pan");a(e,f,m)}},{"../../lib":749,"./helpers":651,"./hoverlabel_defaults":653,"./hovermode_defaults":654,"./layout_attributes":656}],658:[function(b,D,G){var r=b("../../lib"),n=b("./hoverlabel_defaults"),p=b("./layout_attributes");D.exports=function(k,a){n(k,a,function(e,f){return r.coerce(k,a,p,e,f)})}},{"../../lib":749,"./hoverlabel_defaults":653,
"./layout_attributes":656}],659:[function(b,D,G){function r(m,c,d){c=c[d+"axes"];m=Object.keys((m._splomAxes||{})[d]||{});if(Array.isArray(c))return c;if(m.length)return m}function n(m,c,d,g,h,q){d=c(m+"gap",d);var t=c("domain."+m);c(m+"side",g);m=Array(h);c=t[0];t=(t[1]-c)/(h-d);d=t*(1-d);for(g=0;g<h;g++){var v=c+t*g;m[q?h-1-g:g]=[v,v+d]}return m}function p(m,c,d,g,h){function q(w,A){-1!==c.indexOf(A)&&void 0===g[A]?(t[w]=A,g[A]=w):t[w]=""}var t=Array(d),v;if(Array.isArray(m))for(v=0;v<d;v++)q(v,
m[v]);else for(q(0,h),v=1;v<d;v++)q(v,h+(v+1));return t}var k=b("../../lib");G=b("../../lib/regex").counter;var a=b("../../plots/domain").attributes,e=b("../../plots/cartesian/constants").idRegex,f=b("../../plot_api/plot_template"),l={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",
values:[G("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[e.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[e.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,
max:1,editType:"plot"},domain:a({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};D.exports={moduleType:"component",name:"grid",schema:{layout:{grid:l}},layoutAttributes:l,sizeDefaults:function(m,c){function d(u,F){return k.coerce(g,y,l,u,F)}var g=m.grid||{},h=r(c,
g,"x"),q=r(c,g,"y");if(m.grid||h||q){m=Array.isArray(g.subplots)&&Array.isArray(g.subplots[0]);var t=Array.isArray(h),v=Array.isArray(q),w=t&&h!==g.xaxes&&v&&q!==g.yaxes;if(m){var A=g.subplots.length;var z=g.subplots[0].length}else v&&(A=q.length),t&&(z=h.length);var y=f.newContainer(c,"grid");h=d("rows",A);z=d("columns",z);if(1<h*z){m||t||v||"independent"===d("pattern")&&(m=!0);y._hasSubplotGrid=m;t="top to bottom"===d("roworder");v=m?.3:.1;if(w&&c._splomGridDflt){var B=c._splomGridDflt.xside;var C=
c._splomGridDflt.yside}y._domains={x:n("x",d,m?.2:.1,B,z),y:n("y",d,v,C,h,t)}}else delete c.grid}},contentDefaults:function(m,c){var d=c.grid;if(d&&d._domains){var g=m.grid||{};m=c._subplots;var h=d._hasSubplotGrid,q=d.rows,t=d.columns,v="independent"===d.pattern,w,A=d._axisMap={};if(h){var z=g.subplots||[];var y=d.subplots=Array(q);var B=1;for(c=0;c<q;c++){var C=y[c]=Array(t),u=z[c]||[];for(w=0;w<t;w++)if(v?(g=1===B?"xy":"x"+B+"y"+B,B++):g=u[w],C[w]="",-1!==m.cartesian.indexOf(g)){var F=g.indexOf("y");
var H=g.slice(0,F);F=g.slice(F);void 0!==A[H]&&A[H]!==w||void 0!==A[F]&&A[F]!==c||(C[w]=g,A[H]=w,A[F]=c)}}}else F=r(c,g,"x"),c=r(c,g,"y"),d.xaxes=p(F,m.xaxis,t,A,"x"),d.yaxes=p(c,m.yaxis,q,A,"y");v=d._anchors={};w="top to bottom"===d.roworder;for(var J in A)if(c=J.charAt(0),g=d[c+"side"],8>g.length)v[J]="free";else if("x"===c)if("t"===g.charAt(0)===w?(c=0,z=1,B=q):(c=q-1,B=z=-1),h)for(H=A[J];c!==B;c+=z){if(g=y[c][H])if(F=g.indexOf("y"),g.slice(0,F)===J){v[J]=g.slice(F);break}}else for(;c!==B;c+=z){if(F=
d.yaxes[c],-1!==m.cartesian.indexOf(J+F)){v[J]=F;break}}else if("l"===g.charAt(0)?(c=0,z=1,B=t):(c=t-1,B=z=-1),h)for(H=A[J];c!==B;c+=z){if(g=y[H][c])if(F=g.indexOf("y"),g.slice(F)===J){v[J]=g.slice(0,F);break}}else for(;c!==B;c+=z)if(H=d.xaxes[c],-1!==m.cartesian.indexOf(H+J)){v[J]=H;break}}}}},{"../../lib":749,"../../lib/regex":765,"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803,"../../plots/domain":824}],660:[function(b,D,G){G=b("../../plots/cartesian/constants");b=b("../../plot_api/plot_template").templatedArray;
D.exports=b("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",
dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",G.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",G.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":787,
"../../plots/cartesian/constants":803}],661:[function(b,D,G){var r=b("fast-isnumeric"),n=b("../../lib/to_log_range");D.exports=function(p,k,a,e){k=k||{};var f="log"===a&&"linear"===k.type;a="linear"===a&&"log"===k.type;if(f||a){p=p._fullLayout.images;a=k._id.charAt(0);for(var l,m,c=0;c<p.length;c++)if(l=p[c],m="images["+c+"].",l[a+"ref"]===k._id){var d=l[a];l=l["size"+a];f?(d=n(d,k.range),l=l/Math.pow(10,d)/2,l=2*Math.log(l+Math.sqrt(1+l*l))/Math.LN10):(d=Math.pow(10,d),l=d*(Math.pow(10,l/2)-Math.pow(10,
-l/2)));r(d)?r(l)||(l=null):l=d=null;e(m+a,d);e(m+"size"+a,l)}}}},{"../../lib/to_log_range":775,"fast-isnumeric":241}],662:[function(b,D,G){function r(e,f,l){function m(q,t){return n.coerce(e,f,a,q,t)}var c=m("source");if(!m("visible",!!c))return f;m("layer");m("xanchor");m("yanchor");m("sizex");m("sizey");m("sizing");m("opacity");l={_fullLayout:l};c=["x","y"];for(var d=0;2>d;d++){var g=c[d],h=p.coerceRef(e,f,l,g,"paper");"paper"!==h&&p.getFromId(l,h)._imgIndices.push(f._index);p.coercePosition(f,
l,m,h,g,0)}return f}var n=b("../../lib"),p=b("../../plots/cartesian/axes"),k=b("../../plots/array_container_defaults"),a=b("./attributes");D.exports=function(e,f){k(e,f,{name:"images",handleItemDefaults:r})}},{"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"./attributes":660}],663:[function(b,D,G){var r=b("d3"),n=b("../drawing"),p=b("../../plots/cartesian/axes"),k=b("../../constants/xmlns_namespaces");D.exports=function(a){function e(w){var A=r.select(this);
if(this._imgSrc!==w.source)if(A.attr("xmlns",k.svg),w.source&&"data:"===w.source.slice(0,5))A.attr("xlink:href",w.source),this._imgSrc=w.source;else{var z=new Promise(function(y){function B(){A.remove();y()}var C=new Image;this.img=C;C.setAttribute("crossOrigin","anonymous");C.onerror=B;C.onload=function(){var u=document.createElement("canvas");u.width=this.width;u.height=this.height;u.getContext("2d").drawImage(this,0,0);u=u.toDataURL("image/png");A.attr("xlink:href",u);y()};A.on("error",B);this._imgSrc=
C.src=w.source}.bind(this));a._promises.push(z)}}function f(w){var A=r.select(this),z=p.getFromId(a,w.xref),y=p.getFromId(a,w.yref),B=l._size,C=z?Math.abs(z.l2p(w.sizex)-z.l2p(0)):w.sizex*B.w,u=y?Math.abs(y.l2p(w.sizey)-y.l2p(0)):w.sizey*B.h,F=C*v.x[w.xanchor].offset,H=u*v.y[w.yanchor].offset,J=v.x[w.xanchor].sizing+v.y[w.yanchor].sizing;F=(z?z.r2p(w.x)+z._offset:w.x*B.w+B.l)+F;B=(y?y.r2p(w.y)+y._offset:B.h-w.y*B.h+B.t)+H;switch(w.sizing){case "fill":J+=" slice";break;case "stretch":J="none"}A.attr({x:F,
y:B,width:C,height:u,preserveAspectRatio:J,opacity:w.opacity});w=(z?z._id:"")+(y?y._id:"");n.setClipUrl(A,w?"clip"+l._uid+w:null,a)}var l=a._fullLayout,m=[],c={},d=[],g;for(g=0;g<l.images.length;g++){var h=l.images[g];if(h.visible)if("below"===h.layer&&"paper"!==h.xref&&"paper"!==h.yref){var q=h.xref+h.yref;var t=l._plots[q];t?(t.mainplot&&(q=t.mainplot.id),c[q]||(c[q]=[]),c[q].push(h)):d.push(h)}else"above"===h.layer?m.push(h):d.push(h)}var v={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",
offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};g=l._imageLowerLayer.selectAll("image").data(d);q=l._imageUpperLayer.selectAll("image").data(m);g.enter().append("image");q.enter().append("image");g.exit().remove();q.exit().remove();g.each(function(w){e.bind(this)(w);f.bind(this)(w)});q.each(function(w){e.bind(this)(w);f.bind(this)(w)});m=Object.keys(l._plots);for(g=0;g<m.length;g++)q=m[g],d=l._plots[q],
d.imagelayer&&(q=d.imagelayer.selectAll("image").data(c[q]||[]),q.enter().append("image"),q.exit().remove(),q.each(function(w){e.bind(this)(w);f.bind(this)(w)}))}},{"../../constants/xmlns_namespaces":725,"../../plots/cartesian/axes":797,"../drawing":637,d3:169}],664:[function(b,D,G){D.exports={moduleType:"component",name:"images",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("images"),draw:b("./draw"),convertCoords:b("./convert_coords")}},
{"../../plots/cartesian/include_components":809,"./attributes":660,"./convert_coords":661,"./defaults":662,"./draw":663}],665:[function(b,D,G){G=b("../../plots/font_attributes");b=b("../color/attributes");D.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:G({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",
flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",
values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:G({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},
editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":825,"../color/attributes":614}],666:[function(b,D,G){D.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,textGap:40,itemGap:5}},{}],667:[function(b,D,G){var r=b("../../registry"),n=b("../../lib"),p=b("../../plot_api/plot_template"),k=b("./attributes"),a=b("../../plots/layout_attributes"),e=b("./helpers");D.exports=function(f,l,
m){function c(A,z){return n.coerce(d,w,k,A,z)}for(var d=f.legend||{},g=0,h=!1,q="normal",t=0;t<m.length;t++){var v=m[t];if(v.visible){if(v.showlegend||v._dfltShowLegend&&!(v._module&&v._module.attributes&&v._module.attributes.showlegend&&!1===v._module.attributes.showlegend.dflt))g++,v.showlegend&&(h=!0,(r.traceIs(v,"pie-like")||!0===v._input.showlegend)&&g++);if(r.traceIs(v,"bar")&&"stack"===l.barmode||-1!==["tonextx","tonexty"].indexOf(v.fill))q=e.isGrouped({traceorder:q})?"grouped+reversed":"reversed";
void 0!==v.legendgroup&&""!==v.legendgroup&&(q=e.isReversed({traceorder:q})?"reversed+grouped":"grouped")}}m=n.coerce(f,l,a,"showlegend",h&&1<g);if(!1!==m||d.uirevision){var w=p.newContainer(l,"legend");c("uirevision",l.uirevision);!1!==m&&(c("bgcolor",l.paper_bgcolor),c("bordercolor"),c("borderwidth"),n.coerceFont(c,"font",l.font),m=c("orientation"),"h"===m?(g=0,r.getComponentMethod("rangeslider","isVisible")(f.xaxis)?(f=1.1,h="bottom"):(f=-.1,h="top")):(g=1.02,f=1,h="auto"),c("traceorder",q),e.isGrouped(l.legend)&&
c("tracegroupgap"),c("itemsizing"),c("itemclick"),c("itemdoubleclick"),c("x",g),c("xanchor"),c("y",f),c("yanchor",h),c("valign"),n.noneOrAll(d,w,["x","y"]),c("title.text")&&(c("title.side","h"===m?"left":"top"),n.coerceFont(c,"title.font",l.font)))}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/layout_attributes":851,"../../registry":880,"./attributes":665,"./helpers":671}],668:[function(b,D,G){function r(M,E,L,P,N){var Q=L.data()[0][0].trace;N={event:N,node:L.node(),curveNumber:Q.index,
expandedIndex:Q._expandedIndex,data:M.data,layout:M.layout,frames:M._transitionData._frames,config:M._context,fullData:M._fullData,fullLayout:M._fullLayout};Q._group&&(N.group=Q._group);q.traceIs(Q,"pie-like")&&(N.label=L.datum()[0].label);!1!==t.triggerHandler(M,"plotly_legendclick",N)&&(1===P?E._clickTimeout=setTimeout(function(){y(L,M,P)},M._context.doubleClickDelay):2===P&&(E._clickTimeout&&clearTimeout(E._clickTimeout),M._legendMouseDownTime=0,!1!==t.triggerHandler(M,"plotly_legenddoubleclick",
N)&&y(L,M,P)))}function n(M,E,L){var P=M.data()[0][0],N=P.trace,Q=q.traceIs(N,"pie-like"),O=N.index,T=L._main&&E._context.edits.legendText&&!Q,V=L._maxNameLength;L.entries?Q=P.text:(Q=Q?P.label:N.name,N._meta&&(Q=g.templateString(Q,N._meta)));N=g.ensureSingle(M,"text","legendtext");N.attr("text-anchor","start").classed("user-select-none",!0).call(w.font,L.font).text(T?p(Q,V):Q);z.positionText(N,B.textGap,0);if(T)N.call(z.makeEditable,{gd:E,text:Q}).call(a,M,E,L).on("edit",function(Z){this.text(p(Z,
V)).call(a,M,E,L);var aa=P.trace._fullInput||{},Y={};q.hasTransform(aa,"groupby")?(Y=q.getTransformIndices(aa,"groupby"),aa=g.keyedContainer(aa,"transforms["+Y[Y.length-1]+"].styles","target","value.name"),aa.set(P.trace._group,Z),Y=aa.constructUpdate()):Y.name=Z;return q.call("_guiRestyle",E,Y,O)});else a(N,M,E,L)}function p(M,E){E=Math.max(4,E);if(M&&M.trim().length>=E/2)return M;M=M||"";for(E-=M.length;0<E;E--)M+=" ";return M}function k(M,E){var L=E._context.doubleClickDelay,P,N=1,Q=g.ensureSingle(M,
"rect","legendtoggle",function(O){O.style("cursor","pointer").attr("pointer-events","all").call(A.fill,"rgba(0,0,0,0)")});Q.on("mousedown",function(){P=(new Date).getTime();P-E._legendMouseDownTime<L?N+=1:(N=1,E._legendMouseDownTime=P)});Q.on("mouseup",function(){if(!E._dragged&&!E._editing){var O=E._fullLayout.legend;(new Date).getTime()-E._legendMouseDownTime>L&&(N=Math.max(N-1,1));r(E,O,M,N,d.event)}})}function a(M,E,L,P){P._main||M.attr("data-notex",!0);z.convertToTspans(M,L,function(){var N=
P,Q=E.data()[0][0];if(N._main&&Q&&!Q.trace.showlegend)E.remove();else{var O=E.select("g[class*\x3dmath-group]"),T=O.node();N||(N=L._fullLayout.legend);var V=N.borderwidth,Z=(Q?N:N.title).font.size*C;if(T){var aa=w.bBox(T);T=aa.height;aa=aa.width;Q?w.setTranslate(O,0,.25*T):w.setTranslate(O,V,.75*T+V)}else{O=E.select(Q?".legendtext":".legendtitletext");var Y=z.lineCount(O);aa=O.node();T=Z*Y;aa=aa?w.bBox(aa).width:0;Q?z.positionText(O,B.textGap,-(Z*((Y-1)/2-.3))):z.positionText(O,B.titlePad+V,Z+V)}Q?
(Q.lineHeight=Z,Q.height=Math.max(T,16)+3,Q.width=aa):(N._titleWidth=aa,N._titleHeight=T)}})}function e(M){var E=0,L=0,P=M.title.side;P&&(-1!==P.indexOf("left")&&(E=M._titleWidth),-1!==P.indexOf("top")&&(L=M._titleHeight));return[E,L]}function f(M,E,L,P){var N=M._fullLayout;P||(P=N.legend);var Q=N._size,O=I.isVertical(P),T=I.isGrouped(P),V=P.borderwidth,Z=2*V,aa=B.textGap,Y=B.itemGap,ea=2*(V+Y),ca=c(P),ba=0>P.y||0===P.y&&"top"===ca,ka=1<P.y||1===P.y&&"bottom"===ca;P._maxHeight=Math.max(ba||ka?N.height/
2:Q.h,30);var qa=0;P._width=0;P._height=0;var pa=e(P);if(O)L.each(function(bb){var La=bb[0].height;w.setTranslate(this,V+pa[0],V+pa[1]+P._height+La/2+Y);P._height+=La;P._width=Math.max(P._width,bb[0].width)}),qa=aa+P._width,P._width+=Y+aa+Z,P._height+=ea,T&&(E.each(function(bb,La){w.setTranslate(this,0,La*P.tracegroupgap)}),P._height+=(P._lgroupsLength-1)*P.tracegroupgap);else{ca=m(P);var oa=1<P.x||1===P.x&&"left"===ca;ba=ka||ba;N=N.width/2;P._maxWidth=Math.max(0>P.x||0===P.x&&"right"===ca?ba&&"left"===
ca?Q.l+Q.w:N:oa?ba&&"right"===ca?Q.r+Q.w:N:Q.w,2*aa);var ja=0,ra=0;L.each(function(bb){bb=bb[0].width+aa;ja=Math.max(ja,bb);ra+=bb});qa=null;var ha=0;if(T){var la=0,ua=0,na=0;E.each(function(){var bb=0,La=0;d.select(this).selectAll("g.traces").each(function(mb){var ya=mb[0].height;w.setTranslate(this,pa[0],pa[1]+V+Y+ya/2+La);La+=ya;bb=Math.max(bb,aa+mb[0].width)});la=Math.max(la,La);var kb=bb+Y;kb+V+ua>P._maxWidth&&(ha=Math.max(ha,ua),ua=0,na+=la+P.tracegroupgap,la=La);w.setTranslate(this,ua,na);
ua+=kb});P._width=Math.max(ha,ua)+V;P._height=na+la+ea}else{E=L.size();var wa=ra+Z+(E-1)*Y<P._maxWidth,Ca=0,Fa=0,Xa=0,ab=0;L.each(function(bb){var La=bb[0].height;bb=aa+bb[0].width;var kb=(wa?bb:ja)+Y;kb+V+Fa>P._maxWidth&&(ha=Math.max(ha,ab),Fa=0,Xa+=Ca,P._height+=Ca,Ca=0);w.setTranslate(this,pa[0]+V+Fa,pa[1]+V+Xa+La/2+Y);ab=Fa+bb+Y;Fa+=kb;Ca=Math.max(Ca,La)});wa?(P._width=Fa+Z,P._height=Ca+ea):(P._width=Math.max(ha,ab)+Z,P._height+=Ca+ea)}}P._width=Math.ceil(Math.max(P._width+pa[0],P._titleWidth+
2*(V+B.titlePad)));P._height=Math.ceil(Math.max(P._height+pa[1],P._titleHeight+2*(V+B.itemGap)));P._effHeight=Math.min(P._height,P._maxHeight);M=M._context.edits;var gb=M.legendText||M.legendPosition;L.each(function(bb){var La=d.select(this).select(".legendtoggle"),kb=bb[0].height;bb=gb?aa:qa||aa+bb[0].width;O||(bb+=Y/2);w.setRect(La,0,-kb/2,bb,kb)})}function l(M){var E=M._fullLayout.legend,L=m(E),P=c(E);return h.autoMargin(M,"legend",{x:E.x,y:E.y,l:E._width*u[L],r:E._width*F[L],b:E._effHeight*F[P],
t:E._effHeight*u[P]})}function m(M){return g.isRightAnchor(M)?"right":g.isCenterAnchor(M)?"center":"left"}function c(M){return g.isBottomAnchor(M)?"bottom":g.isMiddleAnchor(M)?"middle":"top"}var d=b("d3"),g=b("../../lib"),h=b("../../plots/plots"),q=b("../../registry"),t=b("../../lib/events"),v=b("../dragelement"),w=b("../drawing"),A=b("../color"),z=b("../../lib/svg_text_utils"),y=b("./handle_click"),B=b("./constants");G=b("../../constants/alignment");var C=G.LINE_SPACING,u=G.FROM_TL,F=G.FROM_BR,H=
b("./get_legend_data"),J=b("./style"),I=b("./helpers");D.exports=function(M,E){var L=M._fullLayout,P="legend"+L._uid;if(E){var N=E.layer;P+="-hover"}else E=L.legend||{},E._main=!0,N=L._infolayer;if(N){M._legendMouseDownTime||(M._legendMouseDownTime=0);if(E._main){if(!M.calcdata)return;var Q=L.showlegend&&H(M.calcdata,E)}else{if(!E.entries)return;Q=H(E.entries,E)}var O=L.hiddenlabels||[];if(E._main&&(!L.showlegend||!Q.length))return N.selectAll(".legend").remove(),L._topdefs.select("#"+P).remove(),
h.autoMargin(M,"legend");var T=g.ensureSingle(N,"g","legend",function(qa){E._main&&qa.attr("pointer-events","all")}),V=g.ensureSingleById(L._topdefs,"clipPath",P,function(qa){qa.append("rect")}),Z=g.ensureSingle(T,"rect","bg",function(qa){qa.attr("shape-rendering","crispEdges")});Z.call(A.stroke,E.bordercolor).call(A.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px");var aa=g.ensureSingle(T,"g","scrollbox"),Y=E.title;E._titleWidth=0;E._titleHeight=0;if(Y.text){var ea=g.ensureSingle(aa,"text",
"legendtitletext");ea.attr("text-anchor","start").classed("user-select-none",!0).call(w.font,Y.font).text(Y.text);a(ea,aa,M,E)}else aa.selectAll(".legendtitletext").remove();var ca=g.ensureSingle(T,"rect","scrollbar",function(qa){qa.attr(B.scrollBarEnterAttrs).call(A.fill,B.scrollBarColor)}),ba=aa.selectAll("g.groups").data(Q);ba.enter().append("g").attr("class","groups");ba.exit().remove();var ka=ba.selectAll("g.traces").data(g.identity);ka.enter().append("g").attr("class","traces");ka.exit().remove();
ka.style("opacity",function(qa){var pa=qa[0].trace;return q.traceIs(pa,"pie-like")?-1!==O.indexOf(qa[0].label)?.5:1:"legendonly"===pa.visible?.5:1}).each(function(){d.select(this).call(n,M,E)}).call(J,M,E).each(function(){E._main&&d.select(this).call(k,M)});g.syncOrAsync([h.previousPromises,function(){return f(M,ba,ka,E)},function(){function qa(ya,Ia,Na){E._scrollY=M._fullLayout.legend._scrollY=ya;w.setTranslate(aa,0,-ya);w.setRect(ca,E._width,B.scrollBarMargin+ya*Na,B.scrollBarWidth,Ia);V.select("rect").attr("y",
oa+ya)}if(!E._main||!l(M)){var pa=L._size,oa=E.borderwidth,ja=pa.l+pa.w*E.x-u[m(E)]*E._width,ra=pa.t+pa.h*(1-E.y)-u[c(E)]*E._effHeight;if(E._main&&L.margin.autoexpand){var ha=ja,la=ra;ja=g.constrain(ja,0,L.width-E._width);ra=g.constrain(ra,0,L.height-E._effHeight);ja!==ha&&g.log("Constrain legend.x to make legend fit inside graph");ra!==la&&g.log("Constrain legend.y to make legend fit inside graph")}E._main&&w.setTranslate(T,ja,ra);ca.on(".drag",null);T.on("wheel",null);if(!E._main||E._height<=E._maxHeight||
M._context.staticPlot)ja=E._effHeight,E._main||(ja=E._height),Z.attr({width:E._width-oa,height:ja-oa,x:oa/2,y:oa/2}),w.setTranslate(aa,0,0),V.select("rect").attr({width:E._width-2*oa,height:ja-2*oa,x:oa,y:oa}),w.setClipUrl(aa,P,M),w.setRect(ca,0,0,0,0),delete E._scrollY;else{var ua=Math.max(B.scrollBarMinHeight,E._effHeight*E._effHeight/E._height),na=E._effHeight-ua-2*B.scrollBarMargin,wa=E._height-E._effHeight,Ca=na/wa,Fa=Math.min(E._scrollY||0,wa);Z.attr({width:E._width-2*oa+B.scrollBarWidth+B.scrollBarMargin,
height:E._effHeight-oa,x:oa/2,y:oa/2});V.select("rect").attr({width:E._width-2*oa+B.scrollBarWidth+B.scrollBarMargin,height:E._effHeight-2*oa,x:oa,y:oa+Fa});w.setClipUrl(aa,P,M);qa(Fa,ua,Ca);T.on("wheel",function(){Fa=g.constrain(E._scrollY+d.event.deltaY/na*wa,0,wa);qa(Fa,ua,Ca);0!==Fa&&Fa!==wa&&d.event.preventDefault()});var Xa,ab,gb;ja=d.behavior.drag().on("dragstart",function(){var ya=d.event.sourceEvent;Xa="touchstart"===ya.type?ya.changedTouches[0].clientY:ya.clientY;gb=Fa}).on("drag",function(){var ya=
d.event.sourceEvent;2===ya.buttons||ya.ctrlKey||(ab="touchmove"===ya.type?ya.changedTouches[0].clientY:ya.clientY,Fa=g.constrain((ab-Xa)/Ca+gb,0,wa),qa(Fa,ua,Ca))});ca.call(ja);ja=d.behavior.drag().on("dragstart",function(){var ya=d.event.sourceEvent;"touchstart"===ya.type&&(Xa=ya.changedTouches[0].clientY,gb=Fa)}).on("drag",function(){var ya=d.event.sourceEvent;"touchmove"===ya.type&&(ab=ya.changedTouches[0].clientY,Fa=g.constrain((Xa-ab)/Ca+gb,0,wa),qa(Fa,ua,Ca))});aa.call(ja)}if(M._context.edits.legendPosition){var bb,
La,kb,mb;T.classed("cursor-move",!0);v.init({element:T.node(),gd:M,prepFn:function(){var ya=w.getTranslate(T);kb=ya.x;mb=ya.y},moveFn:function(ya,Ia){ya=kb+ya;Ia=mb+Ia;w.setTranslate(T,ya,Ia);bb=v.align(ya,0,pa.l,pa.l+pa.w,E.xanchor);La=v.align(Ia,0,pa.t+pa.h,pa.t,E.yanchor)},doneFn:function(){void 0!==bb&&void 0!==La&&q.call("_guiRelayout",M,{"legend.x":bb,"legend.y":La})},clickFn:function(ya,Ia){var Na=N.selectAll("g.traces").filter(function(){var Ta=this.getBoundingClientRect();return Ia.clientX>=
Ta.left&&Ia.clientX<=Ta.right&&Ia.clientY>=Ta.top&&Ia.clientY<=Ta.bottom});0<Na.size()&&r(M,T,Na,ya,Ia)}})}}}],M)}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/events":738,"../../lib/svg_text_utils":773,"../../plots/plots":860,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"./constants":666,"./get_legend_data":669,"./handle_click":670,"./helpers":671,"./style":673,d3:169}],669:[function(b,D,G){var r=b("../../registry"),n=b("./helpers");D.exports=function(p,
k){function a(z,y){""!==z&&n.isGrouped(k)?-1===f.indexOf(z)?(f.push(z),l=!0,e[z]=[[y]]):e[z].push([y]):(z="~~i"+c,f.push(z),e[z]=[[y]],c++)}var e={},f=[],l=!1,m={},c=0,d=0,g,h=k._main;for(g=0;g<p.length;g++){var q=p[g];var t=q[0];var v=t.trace,w=v.legendgroup;if(!h||v.visible&&v.showlegend)if(r.traceIs(v,"pie-like"))for(m[w]||(m[w]={}),t=0;t<q.length;t++){var A=q[t].label;m[w][A]||(a(w,{label:A,color:q[t].color,i:q[t].i,trace:v,pts:q[t].pts}),m[w][A]=!0,d=Math.max(d,(A||"").length))}else a(w,t),d=
Math.max(d,(v.name||"").length)}if(!f.length)return[];p=f.length;if(l&&n.isGrouped(k))for(h=Array(p),g=0;g<p;g++)m=e[f[g]],h[g]=n.isReversed(k)?m.reverse():m;else{h=[Array(p)];for(g=0;g<p;g++)m=e[f[g]][0],h[0][n.isReversed(k)?p-g-1:g]=m;p=1}k._lgroupsLength=p;k._maxNameLength=d;return h}},{"../../registry":880,"./helpers":671}],670:[function(b,D,G){var r=b("../../lib"),n=b("../../registry"),p=!0;D.exports=function(k,a,e){function f(C,u,F){var H=t.indexOf(C),J=q[u];J||(J=q[u]=[]);-1===t.indexOf(C)&&
(t.push(C),H=t.length-1);J[H]=F;return H}function l(C,u){var F=C._fullInput;if(n.hasTransform(F,"groupby")){var H=v[F.index];H||(H=n.getTransformIndices(F,"groupby"),H=r.keyedContainer(F,"transforms["+H[H.length-1]+"].styles","target","value.visible"),v[F.index]=H);var J=H.get(C._group);void 0===J&&(J=!0);!1!==J&&H.set(C._group,u);w[F.index]=f(F.index,"visible",!1===F.visible?!1:!0)}else f(F.index,"visible",!1===F.visible?!1:u)}var m=a._fullLayout;if(!a._dragged&&!a._editing){var c=m.legend.itemclick,
d=m.legend.itemdoubleclick;1===e&&"toggle"===c&&"toggleothers"===d&&p&&a.data&&a._context.showTips&&r.notifier(r._(a,"Double-click on legend to isolate one trace"),"long");p=!1;var g;1===e?g=c:2===e&&(g=d);if(g){var h=m.hiddenlabels?m.hiddenlabels.slice():[];k=k.data()[0][0];e=a._fullData;m=k.trace;c=m.legendgroup;var q={},t=[],v=[],w=[];if(n.traceIs(m,"pie-like")){var A=k.label;k=h.indexOf(A);"toggle"===g?-1===k?h.push(A):h.splice(k,1):"toggleothers"===g&&(h=[],a.calcdata[0].forEach(function(C){A!==
C.label&&h.push(C.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===h.length&&-1===k&&(h=[]));n.call("_guiRelayout",a,"hiddenlabels",h)}else{d=c&&c.length;var z=[];if(d)for(k=0;k<e.length;k++){var y=e[k];y.visible&&y.legendgroup===c&&z.push(k)}if("toggle"===g){switch(m.visible){case !0:var B="legendonly";break;case !1:B=!1;break;case "legendonly":B=!0}if(d)for(k=0;k<e.length;k++)!1!==e[k].visible&&e[k].legendgroup===c&&l(e[k],B);else l(m,B)}else if("toggleothers"===g){z=!0;
for(k=0;k<e.length;k++)if(y=e[k]===m,g=!0!==e[k].showlegend,!(y||g||(y=d&&e[k].legendgroup===c,y||!0!==e[k].visible||n.traceIs(e[k],"notLegendIsolatable")))){z=!1;break}for(k=0;k<e.length;k++)if(!1!==e[k].visible&&!n.traceIs(e[k],"notLegendIsolatable"))switch(m.visible){case "legendonly":l(e[k],!0);break;case !0:B=z?!0:"legendonly",y=e[k]===m,g=!0!==e[k].showlegend&&!e[k].legendgroup,y=y||d&&e[k].legendgroup===c,l(e[k],y||g?!0:B)}}for(k=0;k<v.length;k++)if(g=v[k])for(c=g.constructUpdate(),B=Object.keys(c),
g=0;g<B.length;g++)e=B[g],m=q[e]=q[e]||[],m[w[k]]=c[e];m=Object.keys(q);for(k=0;k<m.length;k++)for(e=m[k],g=0;g<t.length;g++)q[e].hasOwnProperty(g)||(q[e][g]=void 0);n.call("_guiRestyle",a,q,t)}}}}},{"../../lib":749,"../../registry":880}],671:[function(b,D,G){G.isGrouped=function(r){return-1!==(r.traceorder||"").indexOf("grouped")};G.isVertical=function(r){return"h"!==r.orientation};G.isReversed=function(r){return-1!==(r.traceorder||"").indexOf("reversed")}},{}],672:[function(b,D,G){D.exports={moduleType:"component",
name:"legend",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw"),style:b("./style")}},{"./attributes":665,"./defaults":667,"./draw":668,"./style":673}],673:[function(b,D,G){function r(d,g){return(g?"radial":"horizontal")+(d?"":"reversed")}var n=b("d3"),p=b("../../registry"),k=b("../../lib"),a=b("../drawing"),e=b("../color"),f=b("../colorscale/helpers").extractOpts,l=b("../../traces/scatter/subtypes"),m=b("../../traces/pie/style_one"),c=b("../../traces/pie/helpers").castOption;
D.exports=function(d,g,h){function q(z,y,B){var C=z[0].trace,u=C.marker||{},F=u.line||{};C=B?C.visible&&C.type===B:p.traceIs(C,"bar");z=n.select(y).select("g.legendpoints").selectAll("path.legend"+B).data(C?[z]:[]);z.enter().append("path").classed("legend"+B,!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");z.exit().remove();z.each(function(H){var J=n.select(this);H=H[0];var I=A(H.mlw,u.line,5,2);J.style("stroke-width",I+"px").call(e.fill,H.mc||u.color);I&&e.stroke(J,H.mlc||F.color)})}
function t(z,y,B){var C=z[0],u=C.trace,F=B?u.visible&&u.type===B:p.traceIs(u,B);z=n.select(y).select("g.legendpoints").selectAll("path.legend"+B).data(F?[z]:[]);z.enter().append("path").classed("legend"+B,!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");z.exit().remove();z.size()&&(B=(u.marker||{}).line,y=A(c(B.width,C.pts),B,5,2),u=k.minExtend(u,{marker:{line:{width:y}}}),u.marker.line.color=B.color,C=k.minExtend(C,{trace:u}),m(z,C,u))}var v=g._fullLayout;h||(h=v.legend);var w="constant"===
h.itemsizing,A=function(z,y,B,C){if(!(z+1))if(y&&0<y.width)z=y.width;else return 0;return w?C:Math.min(z,B)};d.each(function(z){var y=n.select(this);y=k.ensureSingle(y,"g","layers");y.style("opacity",z[0].trace.opacity);var B=h.valign,C=z[0].lineHeight,u=z[0].height;"middle"!==B&&C&&u?y.attr("transform","translate(0,"+.5*{top:1,bottom:-1}[B]*(C-u+3)+")"):y.attr("transform",null);y.selectAll("g.legendfill").data([z]).enter().append("g").classed("legendfill",!0);y.selectAll("g.legendlines").data([z]).enter().append("g").classed("legendlines",
!0);y=y.selectAll("g.legendsymbols").data([z]);y.enter().append("g").classed("legendsymbols",!0);y.selectAll("g.legendpoints").data([z]).enter().append("g").classed("legendpoints",!0)}).each(function(z){var y=z[0].trace;z=[];if(y.visible)switch(y.type){case "histogram2d":case "heatmap":z=[["M-15,-2V4H15V-2Z"]];var B=!0;break;case "choropleth":case "choroplethmapbox":z=[["M-6,-6V6H6V-6Z"]];B=!0;break;case "densitymapbox":z=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]];B="radial";break;case "cone":z=
[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]];B=!1;break;case "streamtube":z=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]];B=!1;break;case "surface":z=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]];B=!0;break;case "mesh3d":z=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];B=!1;break;case "volume":z=
[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]];B=!0;break;case "isosurface":z=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],B=!1}z=n.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(z);z.enter().append("path").classed("legend3dandfriends",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1);z.exit().remove();z.each(function(C,u){var F=n.select(this),H=f(y),J=H.colorscale,I=H.reversescale;H=function(E){E.size()&&a.gradient(E,
g,"legendfill-"+y.uid,r(I,"radial"===B),J,"fill")};if(J)B||(M=J.length,M=0===u?J[I?M-1:0][1]:1===u?J[I?0:M-1][1]:J[Math.floor((M-1)/2)][1]);else{var M=y.vertexcolor||y.facecolor||y.color;M=k.isArrayOrTypedArray(M)?M[u]||M[0]:M}F.attr("d",C[0]);M?F.call(e.fill,M):F.call(H)})}).each(function(z){var y=z[0].trace,B="waterfall"===y.type;if(z[0]._distinct&&B)return B=z[0].trace[z[0].dir].marker,z[0].mc=B.color,z[0].mlw=B.line.width,z[0].mlc=B.line.color,q(z,this,"waterfall");var C=[];y.visible&&B&&(C=z[0].hasTotals?
[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);z=n.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(C);z.enter().append("path").classed("legendwaterfall",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1);z.exit().remove();z.each(function(u){var F=n.select(this),H=y[u[0]].marker,J=A(void 0,H.line,5,2);F.attr("d",u[1]).style("stroke-width",J+"px").call(e.fill,
H.color);J&&F.call(e.stroke,H.line.color)})}).each(function(z){q(z,this,"funnel")}).each(function(z){q(z,this)}).each(function(z){var y=z[0].trace,B=n.select(this).select("g.legendpoints").selectAll("path.legendbox").data(y.visible&&p.traceIs(y,"box-violin")?[z]:[]);B.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)");B.exit().remove();B.each(function(){var C=n.select(this);if("all"!==y.boxpoints&&"all"!==y.points||0!==e.opacity(y.fillcolor)||
0!==e.opacity((y.line||{}).color)){var u=A(void 0,y.line,5,2);C.style("stroke-width",u+"px").call(e.fill,y.fillcolor);u&&e.stroke(C,y.line.color)}else C=k.minExtend(y,{marker:{size:w?12:k.constrain(y.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}}),B.call(a.pointStyle,C,g)})}).each(function(z){t(z,this,"funnelarea")}).each(function(z){t(z,this,"pie")}).each(function(z){var y=z[0],B=y.trace,C=B.visible&&B.fill&&"none"!==B.fill,u=l.hasLines(B),F=B.contours,H=!1,J=!1,I=f(B),M=I.colorscale,
E=I.reversescale,L=function(Q){Q.size()&&a.gradient(Q,g,"legendfill-"+B.uid,r(E),M,"fill")};I=function(Q){if(Q.size()){var O="legendline-"+B.uid;a.lineGroupStyle(Q);a.gradient(Q,g,O,r(E),M,"stroke")}};if(F){var P=F.coloring;"lines"===P?H=!0:u="none"===P||"heatmap"===P||F.showlines;if("constraint"===F.type)C="\x3d"!==F._operation;else if("fill"===P||"heatmap"===P)J=!0}F=l.hasMarkers(B)||l.hasText(B)||!C&&!J?"M5,0":u||H?"M5,-2":"M5,-3";P=n.select(this);z=P.select(".legendfill").selectAll("path").data(C||
J?[z]:[]);z.enter().append("path").classed("js-fill",!0);z.exit().remove();z.attr("d",F+"h30v6h-30z").call(C?a.fillGroupStyle:L);if(u||H){C=A(void 0,B.line,10,5);C=k.minExtend(B,{line:{width:C}});var N=[k.minExtend(y,{trace:C})]}y=P.select(".legendlines").selectAll("path").data(u||H?[N]:[]);y.enter().append("path").classed("js-line",!0);y.exit().remove();y.attr("d",F+(H?"l30,0.0001":"h30")).call(u?a.lineGroupStyle:I)}).each(function(z){function y(E,L,P,N){E=k.nestedProperty(u,E).get();L=k.isArrayOrTypedArray(E)&&
L?L(E):E;w&&L&&void 0!==N&&(L=N);if(P){if(L<P[0])return P[0];if(L>P[1])return P[1]}return L}function B(E){return C._distinct&&C.index&&E[C.index]?E[C.index]:E[0]}var C=z[0],u=C.trace;z=l.hasMarkers(u);var F=l.hasText(u),H=l.hasLines(u);if(z||F||H){var J={};var I={};if(z){J.mc=y("marker.color",B);J.mx=y("marker.symbol",B);J.mo=y("marker.opacity",k.mean,[.2,1]);J.mlc=y("marker.line.color",B);J.mlw=y("marker.line.width",k.mean,[0,5],2);I.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var M=y("marker.size",
k.mean,[2,16],12);J.ms=M;I.marker.size=M}H&&(I.line={width:y("line.width",B,[0,10],5)});F&&(J.tx="Aa",J.tp=y("textposition",B),J.ts=10,J.tc=y("textfont.color",B),J.tf=y("textfont.family",B));J=[k.minExtend(C,J)];I=k.minExtend(u,I);I.selectedpoints=null;I.texttemplate=null}H=n.select(this).select("g.legendpoints");M=H.selectAll("path.scatterpts").data(z?J:[]);M.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform","translate(20,0)");M.exit().remove();M.call(a.pointStyle,I,
g);z&&(J[0].mrc=3);z=H.selectAll("g.pointtext").data(F?J:[]);z.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)");z.exit().remove();z.selectAll("text").call(a.textPointStyle,I,g)}).each(function(z){var y=z[0].trace;z=n.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(y.visible&&"candlestick"===y.type?[z,z]:[]);z.enter().append("path").classed("legendcandle",!0).attr("d",function(B,C){return C?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",
"translate(20,0)").style("stroke-miterlimit",1);z.exit().remove();z.each(function(B,C){B=n.select(this);C=y[C?"increasing":"decreasing"];var u=A(void 0,C.line,5,2);B.style("stroke-width",u+"px").call(e.fill,C.fillcolor);u&&e.stroke(B,C.line.color)})}).each(function(z){var y=z[0].trace;z=n.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(y.visible&&"ohlc"===y.type?[z,z]:[]);z.enter().append("path").classed("legendohlc",!0).attr("d",function(B,C){return C?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",
"translate(20,0)").style("stroke-miterlimit",1);z.exit().remove();z.each(function(B,C){B=n.select(this);C=y[C?"increasing":"decreasing"];var u=A(void 0,C.line,5,2);B.style("fill","none").call(a.dashLine,C.line.dash,u);u&&e.stroke(B,C.line.color)})})}},{"../../lib":749,"../../registry":880,"../../traces/pie/helpers":1134,"../../traces/pie/style_one":1140,"../../traces/scatter/subtypes":1179,"../color":615,"../colorscale/helpers":626,"../drawing":637,d3:169}],674:[function(b,D,G){function r(v,w){var A=
w.currentTarget,z=A.getAttribute("data-attr");w=A.getAttribute("data-val")||!0;var y=v._fullLayout,B={},C=g.list(v,null,!0),u=y._cartesianSpikesEnabled,F;if("zoom"===z){z="in"===w?.5:2;A=(1+z)/2;var H=(1-z)/2;for(F=0;F<C.length;F++)if(z=C[F],!z.fixedrange){var J=z._name;if("auto"===w)B[J+".autorange"]=!0;else if("reset"===w){if(void 0===z._rangeInitial)B[J+".autorange"]=!0;else{var I=z._rangeInitial.slice();B[J+".range[0]"]=I[0];B[J+".range[1]"]=I[1]}void 0!==z._showSpikeInitial&&(B[J+".showspikes"]=
z._showSpikeInitial,"on"!==u||z._showSpikeInitial||(u="off"))}else I=[z.r2l(z.range[0]),z.r2l(z.range[1])],I=[A*I[0]+H*I[1],A*I[1]+H*I[0]],B[J+".range[0]"]=z.l2r(I[0]),B[J+".range[1]"]=z.l2r(I[1])}}else"hovermode"!==z||"x"!==w&&"y"!==w||(w=y._isHoriz?"y":"x",A.setAttribute("data-val",w)),B[z]=w;y._cartesianSpikesEnabled=u;c.call("_guiRelayout",v,B)}function n(v,w){w=w.currentTarget;var A=w.getAttribute("data-attr");w=w.getAttribute("data-val")||!0;var z=v._fullLayout._subplots.gl3d||[],y={};A=A.split(".");
for(var B=0;B<z.length;B++)y[z[B]+"."+A[1]]=w;y.dragmode="pan"===w?w:"zoom";c.call("_guiRelayout",v,y)}function p(v,w){var A=w.currentTarget.getAttribute("data-attr");w="resetLastSave"===A;A="resetDefault"===A;for(var z=v._fullLayout,y=z._subplots.gl3d||[],B={},C=0;C<y.length;C++){var u=y[C],F=u+".camera",H=u+".aspectratio",J=u+".aspectmode";u=z[u]._scene;if(w){B[F+".up"]=u.viewInitial.up;B[F+".eye"]=u.viewInitial.eye;B[F+".center"]=u.viewInitial.center;var I=!0}else A&&(B[F+".up"]=null,B[F+".eye"]=
null,B[F+".center"]=null,I=!0);I&&(B[H+".x"]=u.viewInitial.aspectratio.x,B[H+".y"]=u.viewInitial.aspectratio.y,B[H+".z"]=u.viewInitial.aspectratio.z,B[J]=u.viewInitial.aspectmode)}c.call("_guiRelayout",v,B)}function k(v,w){w=w.currentTarget;var A=w._previousVal;v=v._fullLayout;var z=v._subplots.gl3d||[],y=["xaxis","yaxis","zaxis"],B={},C={};if(A)C=A,w._previousVal=null;else{for(A=0;A<z.length;A++){var u=z[A],F=v[u],H=u+".hovermode";B[H]=F.hovermode;C[H]=!1;for(H=0;3>H;H++){var J=y[H],I=u+"."+J+".showspikes";
C[I]=!1;B[I]=F[J].showspikes}}w._previousVal=B}return C}function a(v,w){var A=w.currentTarget;w=A.getAttribute("data-attr");A=A.getAttribute("data-val")||!0;for(var z=v._fullLayout,y=z._subplots.geo||[],B=0;B<y.length;B++){var C=y[B],u=z[C];"zoom"===w&&(u=u.projection.scale,c.call("_guiRelayout",v,C+".projection.scale","in"===A?2*u:.5*u))}"reset"===w&&m(v,"geo")}function e(v){v=v._fullLayout;return v.hovermode?!1:v._has("cartesian")?v._isHoriz?"y":"x":"closest"}function f(v){var w=e(v);c.call("_guiRelayout",
v,"hovermode",w)}function l(v,w){w=w.currentTarget.getAttribute("data-val");for(var A=v._fullLayout,z=A._subplots.mapbox||[],y={},B=0;B<z.length;B++){var C=z[B],u=A[C].zoom;y[C+".zoom"]="in"===w?1.05*u:u/1.05}c.call("_guiRelayout",v,y)}function m(v,w){var A=v._fullLayout;w=A._subplots[w]||[];for(var z={},y=0;y<w.length;y++)for(var B=w[y],C=A[B]._subplot.viewInitial,u=Object.keys(C),F=0;F<u.length;F++){var H=u[F];z[B+"."+H]=C[H]}c.call("_guiRelayout",v,z)}var c=b("../../registry"),d=b("../../plots/plots"),
g=b("../../plots/cartesian/axis_ids");G=b("../../fonts/ploticon");var h=b("../shapes/draw").eraseActiveShape,q=b("../../lib"),t=q._;b=D.exports={};b.toImage={name:"toImage",title:function(v){return"png"===((v._context.toImageButtonOptions||{}).format||"png")?t(v,"Download plot as a png"):t(v,"Download plot")},icon:G.camera,click:function(v){var w=v._context.toImageButtonOptions,A={format:w.format||"png"};q.notifier(t(v,"Taking snapshot - this may take a few seconds"),"long");"svg"!==A.format&&q.isIE()&&
(q.notifier(t(v,"IE only supports svg.  Changing format to svg."),"long"),A.format="svg");["filename","width","height","scale"].forEach(function(z){z in w&&(A[z]=w[z])});c.call("downloadImage",v,A).then(function(z){q.notifier(t(v,"Snapshot succeeded")+" - "+z,"long")}).catch(function(){q.notifier(t(v,"Sorry, there was a problem downloading your snapshot!"),"long")})}};b.sendDataToCloud={name:"sendDataToCloud",title:function(v){return t(v,"Edit in Chart Studio")},icon:G.disk,click:function(v){d.sendDataToCloud(v)}};
b.editInChartStudio={name:"editInChartStudio",title:function(v){return t(v,"Edit in Chart Studio")},icon:G.pencil,click:function(v){d.sendDataToCloud(v)}};b.zoom2d={name:"zoom2d",title:function(v){return t(v,"Zoom")},attr:"dragmode",val:"zoom",icon:G.zoombox,click:r};b.pan2d={name:"pan2d",title:function(v){return t(v,"Pan")},attr:"dragmode",val:"pan",icon:G.pan,click:r};b.select2d={name:"select2d",title:function(v){return t(v,"Box Select")},attr:"dragmode",val:"select",icon:G.selectbox,click:r};b.lasso2d=
{name:"lasso2d",title:function(v){return t(v,"Lasso Select")},attr:"dragmode",val:"lasso",icon:G.lasso,click:r};b.drawclosedpath={name:"drawclosedpath",title:function(v){return t(v,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:G.drawclosedpath,click:r};b.drawopenpath={name:"drawopenpath",title:function(v){return t(v,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:G.drawopenpath,click:r};b.drawline={name:"drawline",title:function(v){return t(v,"Draw line")},attr:"dragmode",
val:"drawline",icon:G.drawline,click:r};b.drawrect={name:"drawrect",title:function(v){return t(v,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:G.drawrect,click:r};b.drawcircle={name:"drawcircle",title:function(v){return t(v,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:G.drawcircle,click:r};b.eraseshape={name:"eraseshape",title:function(v){return t(v,"Erase active shape")},icon:G.eraseshape,click:h};b.zoomIn2d={name:"zoomIn2d",title:function(v){return t(v,"Zoom in")},attr:"zoom",
val:"in",icon:G.zoom_plus,click:r};b.zoomOut2d={name:"zoomOut2d",title:function(v){return t(v,"Zoom out")},attr:"zoom",val:"out",icon:G.zoom_minus,click:r};b.autoScale2d={name:"autoScale2d",title:function(v){return t(v,"Autoscale")},attr:"zoom",val:"auto",icon:G.autoscale,click:r};b.resetScale2d={name:"resetScale2d",title:function(v){return t(v,"Reset axes")},attr:"zoom",val:"reset",icon:G.home,click:r};b.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(v){return t(v,"Show closest data on hover")},
attr:"hovermode",val:"closest",icon:G.tooltip_basic,gravity:"ne",click:r};b.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(v){return t(v,"Compare data on hover")},attr:"hovermode",val:function(v){return v._fullLayout._isHoriz?"y":"x"},icon:G.tooltip_compare,gravity:"ne",click:r};b.zoom3d={name:"zoom3d",title:function(v){return t(v,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:G.zoombox,click:n};b.pan3d={name:"pan3d",title:function(v){return t(v,"Pan")},attr:"scene.dragmode",val:"pan",
icon:G.pan,click:n};b.orbitRotation={name:"orbitRotation",title:function(v){return t(v,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:G["3d_rotate"],click:n};b.tableRotation={name:"tableRotation",title:function(v){return t(v,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:G["z-axis"],click:n};b.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(v){return t(v,"Reset camera to default")},attr:"resetDefault",icon:G.home,click:p};b.resetCameraLastSave3d={name:"resetCameraLastSave3d",
title:function(v){return t(v,"Reset camera to last save")},attr:"resetLastSave",icon:G.movie,click:p};b.hoverClosest3d={name:"hoverClosest3d",title:function(v){return t(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",click:function(v,w){w=k(v,w);c.call("_guiRelayout",v,w)}};b.zoomInGeo={name:"zoomInGeo",title:function(v){return t(v,"Zoom in")},attr:"zoom",val:"in",icon:G.zoom_plus,click:a};b.zoomOutGeo={name:"zoomOutGeo",title:function(v){return t(v,
"Zoom out")},attr:"zoom",val:"out",icon:G.zoom_minus,click:a};b.resetGeo={name:"resetGeo",title:function(v){return t(v,"Reset")},attr:"reset",val:null,icon:G.autoscale,click:a};b.hoverClosestGeo={name:"hoverClosestGeo",title:function(v){return t(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",click:f};b.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(v){return t(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,
toggle:!0,icon:G.tooltip_basic,gravity:"ne",click:f};b.hoverClosestPie={name:"hoverClosestPie",title:function(v){return t(v,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:G.tooltip_basic,gravity:"ne",click:f};b.resetViewSankey={name:"resetSankeyGroup",title:function(v){return t(v,"Reset view")},icon:G.home,click:function(v){for(var w={"node.groups":[],"node.x":[],"node.y":[]},A=0;A<v._fullData.length;A++){var z=v._fullData[A]._viewInitial;w["node.groups"].push(z.node.groups.slice());
w["node.x"].push(z.node.x.slice());w["node.y"].push(z.node.y.slice())}c.call("restyle",v,w)}};b.toggleHover={name:"toggleHover",title:function(v){return t(v,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:G.tooltip_basic,gravity:"ne",click:function(v,w){w=k(v,w);w.hovermode=e(v);c.call("_guiRelayout",v,w)}};b.resetViews={name:"resetViews",title:function(v){return t(v,"Reset views")},icon:G.home,click:function(v,w){var A=w.currentTarget;A.setAttribute("data-attr","zoom");
A.setAttribute("data-val","reset");r(v,w);A.setAttribute("data-attr","resetLastSave");p(v,w);m(v,"geo");m(v,"mapbox")}};b.toggleSpikelines={name:"toggleSpikelines",title:function(v){return t(v,"Toggle Spike Lines")},icon:G.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(v){var w=v._fullLayout;w._cartesianSpikesEnabled="on"===w._cartesianSpikesEnabled?"off":"on";w=c;for(var A=w.call,z="on"===v._fullLayout._cartesianSpikesEnabled,y=g.list(v,null,!0),B={},C=0;C<y.length;C++){var u=y[C];
B[u._name+".showspikes"]=z?!0:u._showSpikeInitial}A.call(w,"_guiRelayout",v,B)}};b.resetViewMapbox={name:"resetViewMapbox",title:function(v){return t(v,"Reset view")},attr:"reset",icon:G.home,click:function(v){m(v,"mapbox")}};b.zoomInMapbox={name:"zoomInMapbox",title:function(v){return t(v,"Zoom in")},attr:"zoom",val:"in",icon:G.zoom_plus,click:l};b.zoomOutMapbox={name:"zoomOutMapbox",title:function(v){return t(v,"Zoom out")},attr:"zoom",val:"out",icon:G.zoom_minus,click:l}},{"../../fonts/ploticon":728,
"../../lib":749,"../../plots/cartesian/axis_ids":800,"../../plots/plots":860,"../../registry":880,"../shapes/draw":696}],675:[function(b,D,G){G.manage=b("./manage")},{"./manage":676}],676:[function(b,D,G){function r(h){function q(T){if(T.length){for(var V=[],Z=0;Z<T.length;Z++){var aa=T[Z];-1===A.indexOf(aa)&&V.push(d[aa])}P.push(V)}}var t=h._fullLayout,v=h._fullData,w=h._context,A=w.modeBarButtonsToRemove;h=w.modeBarButtonsToAdd;var z=t._has("cartesian"),y=t._has("gl3d"),B=t._has("geo"),C=t._has("pie"),
u=t._has("funnelarea"),F=t._has("gl2d"),H=t._has("ternary"),J=t._has("mapbox"),I=t._has("polar"),M=t._has("sankey"),E=n(t),L=m(t.hovermode),P=[],N=["toImage"];w.showEditInChartStudio?N.push("editInChartStudio"):w.showSendToCloud&&N.push("sendDataToCloud");q(N);w=[];N=[];var Q=[],O=[];1<(z||F||C||u||H)+B+y+J+I?(N=["toggleHover"],Q=["resetViews"]):B?(w=["zoomInGeo","zoomOutGeo"],N=["hoverClosestGeo"],Q=["resetGeo"]):y?(N=["hoverClosest3d"],Q=["resetCameraDefault3d","resetCameraLastSave3d"]):J?(w=["zoomInMapbox",
"zoomOutMapbox"],N=["toggleHover"],Q=["resetViewMapbox"]):F?N=["hoverClosestGl2d"]:C?N=["hoverClosestPie"]:M?(N=["hoverClosestCartesian","hoverCompareCartesian"],Q=["resetViewSankey"]):N=["toggleHover"];z&&(N=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);if(k(v)||L)N=[];!z&&!F||E||(w=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==Q[0]&&(Q=["resetScale2d"]));y?O=["zoom3d","pan3d","orbitRotation","tableRotation"]:(z||F)&&!E||H?O=["zoom2d","pan2d"]:J||B?O=["pan2d"]:I&&
(O=["zoom2d"]);p(v)&&O.push("select2d","lasso2d");if(Array.isArray(h)){v=[];for(z=0;z<h.length;z++)y=h[z],"string"===typeof y?-1!==g.indexOf(y)&&(t._has("mapbox")||t._has("cartesian"))&&O.push(y):v.push(y);h=v}q(O);q(w.concat(Q));q(N);return a(P,h)}function n(h){h=e.list({_fullLayout:h},null,!0);for(var q=0;q<h.length;q++)if(!h[q].fixedrange)return!1;return!0}function p(h){for(var q=!1,t=0;t<h.length&&!q;t++){var v=h[t];if(v._module&&v._module.selectPoints)if(l.traceIs(v,"scatter-like")){if(f.hasMarkers(v)||
f.hasText(v))q=!0}else if(l.traceIs(v,"box-violin")){if("all"===v.boxpoints||"all"===v.points)q=!0}else q=!0}return q}function k(h){for(var q=0;q<h.length;q++)if(!l.traceIs(h[q],"noHover"))return!1;return!0}function a(h,q){if(q.length)if(Array.isArray(q[0]))for(var t=0;t<q.length;t++)h.push(q[t]);else h.push(q);return h}var e=b("../../plots/cartesian/axis_ids"),f=b("../../traces/scatter/subtypes"),l=b("../../registry"),m=b("../fx/helpers").isUnifiedHover,c=b("./modebar"),d=b("./buttons");D.exports=
function(h){var q=h._fullLayout,t=h._context,v=q._modeBar;if(t.displayModeBar||t.watermark){if(!Array.isArray(t.modeBarButtonsToRemove))throw Error("*modeBarButtonsToRemove* configuration options must be an array.");if(!Array.isArray(t.modeBarButtonsToAdd))throw Error("*modeBarButtonsToAdd* configuration options must be an array.");var w=t.modeBarButtons;if(Array.isArray(w)&&w.length)for(t=0;t<w.length;t++)for(var A=w[t],z=0;z<A.length;z++){var y=A[z];if("string"===typeof y)if(void 0!==d[y])w[t][z]=
d[y];else throw Error("*modeBarButtons* configuration options invalid button name");}else w=!t.displayModeBar&&t.watermark?[]:r(h);v?v.update(h,w):q._modeBar=c(h,w)}else v&&(v.destroy(),delete q._modeBar)};var g="drawline drawopenpath drawclosedpath drawcircle drawrect eraseshape".split(" ")},{"../../plots/cartesian/axis_ids":800,"../../registry":880,"../../traces/scatter/subtypes":1179,"../fx/helpers":651,"./buttons":674,"./modebar":677}],677:[function(b,D,G){function r(f){this.container=f.container;
this.element=document.createElement("div");this.update(f.graphInfo,f.buttons);this.container.appendChild(this.element)}var n=b("d3"),p=b("fast-isnumeric"),k=b("../../lib"),a=b("../../fonts/ploticon"),e=new DOMParser;b=r.prototype;b.update=function(f,l){this.graphInfo=f;f=this.graphInfo._context;var m=this.graphInfo._fullLayout,c="modebar-"+m._uid;this.element.setAttribute("id",c);this._uid=c;this.element.className="modebar";"hover"===f.displayModeBar&&(this.element.className+=" modebar--hover ease-bg");
"v"===m.modebar.orientation&&(this.element.className+=" vertical",l=l.reverse());var d=m.modebar,g="hover"===f.displayModeBar?".js-plotly-plot .plotly:hover ":"";k.deleteRelatedStyleRule(c);k.addRelatedStyleRule(c,g+"#"+c+" .modebar-group","background-color: "+d.bgcolor);k.addRelatedStyleRule(c,"#"+c+" .modebar-btn .icon path","fill: "+d.color);k.addRelatedStyleRule(c,"#"+c+" .modebar-btn:hover .icon path","fill: "+d.activecolor);k.addRelatedStyleRule(c,"#"+c+" .modebar-btn.active .icon path","fill: "+
d.activecolor);c=!this.hasButtons(l);d=this.hasLogo!==f.displaylogo;g=this.locale!==f.locale;this.locale=f.locale;if(c||d||g)if(this.removeAllButtons(),this.updateButtons(l),f.watermark||f.displaylogo)l=this.getLogo(),f.watermark&&(l.className+=" watermark"),"v"===m.modebar.orientation?this.element.insertBefore(l,this.element.childNodes[0]):this.element.appendChild(l),this.hasLogo=!0;this.updateActiveButton()};b.updateButtons=function(f){var l=this;this.buttons=f;this.buttonElements=[];this.buttonsNames=
[];this.buttons.forEach(function(m){var c=l.createGroup();m.forEach(function(d){var g=d.name;if(!g)throw Error("must provide button 'name' in button config");if(-1!==l.buttonsNames.indexOf(g))throw Error("button name '"+g+"' is taken");l.buttonsNames.push(g);d=l.createButton(d);l.buttonElements.push(d);c.appendChild(d)});l.element.appendChild(c)})};b.createGroup=function(){var f=document.createElement("div");f.className="modebar-group";return f};b.createButton=function(f){var l=this,m=document.createElement("a");
m.setAttribute("rel","tooltip");m.className="modebar-btn";var c=f.title;void 0===c?c=f.name:"function"===typeof c&&(c=c(this.graphInfo));(c||0===c)&&m.setAttribute("data-title",c);void 0!==f.attr&&m.setAttribute("data-attr",f.attr);c=f.val;void 0!==c&&("function"===typeof c&&(c=c(this.graphInfo)),m.setAttribute("data-val",c));if("function"!==typeof f.click)throw Error("must provide button 'click' function in button config");m.addEventListener("click",function(d){f.click(l.graphInfo,d);l.updateActiveButton(d.currentTarget)});
m.setAttribute("data-toggle",f.toggle||!1);f.toggle&&n.select(m).classed("active",!0);c=f.icon;"function"===typeof c?m.appendChild(c()):m.appendChild(this.createIcon(c||a.question));m.setAttribute("data-gravity",f.gravity||"n");return m};b.createIcon=function(f){var l=p(f.height)?Number(f.height):f.ascent-f.descent;if(f.path){var m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("viewBox",[0,0,f.width,l].join(" "));m.setAttribute("class","icon");l=document.createElementNS("http://www.w3.org/2000/svg",
"path");l.setAttribute("d",f.path);f.transform?l.setAttribute("transform",f.transform):void 0!==f.ascent&&l.setAttribute("transform","matrix(1 0 0 -1 0 "+f.ascent+")");m.appendChild(l)}f.svg&&(m=e.parseFromString(f.svg,"application/xml").childNodes[0]);m.setAttribute("height","1em");m.setAttribute("width","1em");return m};b.updateActiveButton=function(f){var l=this.graphInfo._fullLayout,m=void 0!==f?f.getAttribute("data-attr"):null;this.buttonElements.forEach(function(c){var d=c.getAttribute("data-val")||
!0,g=c.getAttribute("data-attr"),h="true"===c.getAttribute("data-toggle");c=n.select(c);h?g===m&&c.classed("active",!c.classed("active")):(g=null===g?g:k.nestedProperty(l,g).get(),c.classed("active",g===d))})};b.hasButtons=function(f){var l=this.buttons;if(!l||f.length!==l.length)return!1;for(var m=0;m<f.length;++m){if(f[m].length!==l[m].length)return!1;for(var c=0;c<f[m].length;c++)if(f[m][c].name!==l[m][c].name)return!1}return!0};b.getLogo=function(){var f=this.createGroup(),l=document.createElement("a");
l.href="https://plotly.com/";l.target="_blank";l.setAttribute("data-title",k._(this.graphInfo,"Produced with Plotly"));l.className="modebar-btn plotlyjsicon modebar-btn--logo";l.appendChild(this.createIcon(a.newplotlylogo));f.appendChild(l);return f};b.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1};b.destroy=function(){k.removeElement(this.container.querySelector(".modebar"));k.deleteRelatedStyleRule(this._uid)};D.exports=
function(f,l){var m=f._fullLayout;f=new r({graphInfo:f,container:m._modebardiv.node(),buttons:l});m._privateplot&&n.select(f.element).append("span").classed("badge-private float--left",!0).text("PRIVATE");return f}},{"../../fonts/ploticon":728,"../../lib":749,d3:169,"fast-isnumeric":241}],678:[function(b,D,G){G=b("../../plots/font_attributes");var r=b("../color/attributes");b=b("../../plot_api/plot_template").templatedArray;b=b("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",
values:"month year day hour minute second all".split(" "),dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});D.exports={visible:{valType:"boolean",editType:"plot"},buttons:b,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},
y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:G({editType:"plot"}),bgcolor:{valType:"color",dflt:r.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:r.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":787,"../../plots/font_attributes":825,"../color/attributes":614}],
679:[function(b,D,G){D.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],680:[function(b,D,G){function r(m,c,d,g){function h(q,t){return p.coerce(m,c,f.buttons,q,t)}d=g.calendar;h("visible")&&(g=h("step"),"all"!==g&&(!d||"gregorian"===d||"month"!==g&&"year"!==g?h("stepmode"):c.stepmode="backward",h("count")),h("label"))}function n(m,c,d){d=d.filter(function(t){return c[t].anchor===m._id});for(var g=0,h=0;h<d.length;h++){var q=c[d[h]].domain;q&&(g=Math.max(q[1],g))}return[m.domain[0],
g+l.yPad]}var p=b("../../lib"),k=b("../color"),a=b("../../plot_api/plot_template"),e=b("../../plots/array_container_defaults"),f=b("./attributes"),l=b("./constants");D.exports=function(m,c,d,g,h){function q(w,A){return p.coerce(t,v,f,w,A)}var t=m.rangeselector||{},v=a.newContainer(c,"rangeselector");h=e(t,v,{name:"buttons",handleItemDefaults:r,calendar:h});q("visible",0<h.length)&&(g=n(c,d,g),q("x",g[0]),q("y",g[1]),p.noneOrAll(m,c,["x","y"]),q("xanchor"),q("yanchor"),p.coerceFont(q,"font",d.font),
m=q("bgcolor"),q("activecolor",k.contrast(m,l.lightAmount,l.darkAmount)),q("bordercolor"),q("borderwidth"))}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/array_container_defaults":793,"../color":615,"./attributes":678,"./constants":679}],681:[function(b,D,G){function r(B){B=t.list(B,"x",!0);for(var C=[],u=0;u<B.length;u++){var F=B[u];F.rangeselector&&F.rangeselector.visible&&C.push(F)}return C}function n(B){return B._id}function p(B,C,u){if("all"===C.step)return!0===B.autorange;
C=Object.keys(u);return B.range[0]===u[C[0]]&&B.range[1]===u[C[1]]}function k(B,C,u){B=h.ensureSingle(B,"rect","selector-rect",function(F){F.attr("shape-rendering","crispEdges")});B.attr({rx:z.rx,ry:z.ry});B.call(d.stroke,C.bordercolor).call(d.fill,u._isActive||u._isHovered?C.activecolor:C.bgcolor).style("stroke-width",C.borderwidth+"px")}function a(B,C,u,F){h.ensureSingle(B,"text","selector-text",function(H){H.classed("user-select-none",!0).attr("text-anchor","middle")}).call(g.font,C.font).text(e(u,
F._fullLayout._meta)).call(function(H){q.convertToTspans(H,F)})}function e(B,C){return B.label?C?h.templateString(B.label,C):B.label:"all"===B.step?"all":B.count+B.step.charAt(0)}function f(B,C,u,F,H){var J=0,I=0,M=u.borderwidth;C.each(function(){var N=l.select(this).select(".selector-text");N=Math.max(u.font.size*v*q.lineCount(N),16)+3;I=Math.max(I,N)});C.each(function(){var N=l.select(this),Q=N.select(".selector-rect"),O=N.select(".selector-text"),T=O.node()&&g.bBox(O.node()).width,V=u.font.size*
v,Z=q.lineCount(O);T=Math.max(T+10,z.minButtonWidth);N.attr("transform","translate("+(M+J)+","+M+")");Q.attr({x:0,y:0,width:T,height:I});q.positionText(O,T/2,I/2-(Z-1)*V/2+3);J+=T+5});var E=B._fullLayout._size;C=E.l+E.w*u.x;E=E.t+E.h*(1-u.y);var L="left";h.isRightAnchor(u)&&(C-=J,L="right");h.isCenterAnchor(u)&&(C-=J/2,L="center");var P="top";h.isBottomAnchor(u)&&(E-=I,P="bottom");h.isMiddleAnchor(u)&&(E-=I/2,P="middle");J=Math.ceil(J);I=Math.ceil(I);C=Math.round(C);E=Math.round(E);c.autoMargin(B,
F+"-range-selector",{x:u.x,y:u.y,l:J*w[L],r:J*A[L],b:I*A[P],t:I*w[P]});H.attr("transform","translate("+C+","+E+")")}var l=b("d3"),m=b("../../registry"),c=b("../../plots/plots"),d=b("../color"),g=b("../drawing"),h=b("../../lib"),q=b("../../lib/svg_text_utils"),t=b("../../plots/cartesian/axis_ids");G=b("../../constants/alignment");var v=G.LINE_SPACING,w=G.FROM_TL,A=G.FROM_BR,z=b("./constants"),y=b("./get_update_object");D.exports=function(B){var C=B._fullLayout._infolayer.selectAll(".rangeselector").data(r(B),
n);C.enter().append("g").classed("rangeselector",!0);C.exit().remove();C.style({cursor:"pointer","pointer-events":"all"});C.each(function(u){var F=l.select(this),H=u.rangeselector,J=F.selectAll("g.button").data(h.filterVisible(H.buttons));J.enter().append("g").classed("button",!0);J.exit().remove();J.each(function(I){var M=l.select(this),E=y(u,I);I._isActive=p(u,I,E);M.call(k,H,I);M.call(a,H,I,B);M.on("click",function(){B._dragged||m.call("_guiRelayout",B,E)});M.on("mouseover",function(){I._isHovered=
!0;M.call(k,H,I)});M.on("mouseout",function(){I._isHovered=!1;M.call(k,H,I)})});f(B,J,H,u._name,F)})}},{"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axis_ids":800,"../../plots/plots":860,"../../registry":880,"../color":615,"../drawing":637,"./constants":679,"./get_update_object":682,d3:169}],682:[function(b,D,G){var r=b("d3");D.exports=function(n,p){var k=n._name,a={};if("all"===p.step)a[k+".autorange"]=!0;else{var e=n.range,f=new Date(n.r2l(e[1])),
l=p.step,m=p.count;switch(p.stepmode){case "backward":var c=n.l2r(+r.time[l].utc.offset(f,-m));break;case "todate":p=r.time[l].utc.offset(f,-m),c=n.l2r(+r.time[l].utc.ceil(p))}n=[c,e[1]];a[k+".range[0]"]=n[0];a[k+".range[1]"]=n[1]}return a}},{d3:169}],683:[function(b,D,G){D.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:b("./attributes")}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":678,"./defaults":680,
"./draw":681}],684:[function(b,D,G){b=b("../color/attributes");D.exports={bgcolor:{valType:"color",dflt:b.background,editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],
editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":614}],685:[function(b,D,G){var r=b("../../plots/cartesian/axis_ids").list,n=b("../../plots/cartesian/autorange").getAutoRange,p=b("./constants");D.exports=function(k){for(var a=r(k,"x",!0),e=0;e<a.length;e++){var f=a[e],l=f[p.name];l&&l.visible&&l.autorange&&(l._input.autorange=!0,l._input.range=
l.range=n(k,f))}}},{"../../plots/cartesian/autorange":796,"../../plots/cartesian/axis_ids":800,"./constants":686}],686:[function(b,D,G){D.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",
grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},
{}],687:[function(b,D,G){var r=b("../../lib"),n=b("../../plot_api/plot_template"),p=b("../../plots/cartesian/axis_ids"),k=b("./attributes"),a=b("./oppaxis_attributes");D.exports=function(e,f,l){function m(A,z){return r.coerce(g,h,k,A,z)}function c(A,z){return r.coerce(t,v,a,A,z)}e=e[l];var d=f[l];if(e.rangeslider||f._requestRangeslider[d._id]){r.isPlainObject(e.rangeslider)||(e.rangeslider={});var g=e.rangeslider,h=n.newContainer(d,"rangeslider");if(m("visible")){m("bgcolor",f.plot_bgcolor);m("bordercolor");
m("borderwidth");m("thickness");m("autorange",!d.isValidRange(g.range));m("range");if(e=f._subplots)for(e=e.cartesian.filter(function(A){return A.substr(0,A.indexOf("y"))===p.name2id(l)}).map(function(A){return A.substr(A.indexOf("y"),A.length)}),e=r.simpleMap(e,p.id2name),d=0;d<e.length;d++){var q=e[d];var t=g[q]||{};var v=n.newContainer(h,q,"yaxis");q=f[q];var w;t.range&&q.isValidRange(t.range)&&(w="fixed");"match"!==c("rangemode",w)&&c("range",q.range.slice())}h._input=g}}}},{"../../lib":749,"../../plot_api/plot_template":787,
"../../plots/cartesian/axis_ids":800,"./attributes":684,"./oppaxis_attributes":691}],688:[function(b,D,G){function r(C,u,F,H){function J(){function L(Y){var ea=+(Y.clientX||Y.touches[0].clientX)-O;switch(Q){case I:var ca="ew-resize";Y=V+ea;ea=Z+ea;break;case M:ca="col-resize";Y=V+ea;ea=Z;break;case E:ca="col-resize";Y=V;ea=Z+ea;break;default:ca="ew-resize",Y=T,ea=T+ea}if(ea<Y){var ba=ea;ea=Y;Y=ba}H._pixelMin=Y;H._pixelMax=ea;y(c.select(aa),ca);n(C,u,F,H)}function P(){aa.removeEventListener("mousemove",
L);aa.removeEventListener("mouseup",P);this.removeEventListener("touchmove",L);this.removeEventListener("touchend",P);h.removeElement(aa)}var N=c.event,Q=N.target,O=N.clientX||N.touches[0].clientX,T=O-C.node().getBoundingClientRect().left,V=H.d2p(F._rl[0]),Z=H.d2p(F._rl[1]),aa=z.coverSlip();this.addEventListener("touchmove",L);this.addEventListener("touchend",P);aa.addEventListener("mousemove",L);aa.addEventListener("mouseup",P)}var I=C.select("rect."+B.slideBoxClassName).node(),M=C.select("rect."+
B.grabAreaMinClassName).node(),E=C.select("rect."+B.grabAreaMaxClassName).node();C.on("mousedown",J);C.on("touchstart",J)}function n(C,u,F,H){var J=F.l2r(h.constrain(H.p2d(H._pixelMin),H._rl[0],H._rl[1])),I=F.l2r(h.constrain(H.p2d(H._pixelMax),H._rl[0],H._rl[1]));window.requestAnimationFrame(function(){d.call("_guiRelayout",u,F._name+".range",[J,I])})}function p(C,u,F,H,J,I){u=B.handleWidth/2;var M=h.constrain(H.d2p(F._rl[0]),0,H._width);F=h.constrain(H.d2p(F._rl[1]),0,H._width);C.select("rect."+
B.slideBoxClassName).attr("x",M).attr("width",F-M);C.select("rect."+B.maskMinClassName).attr("width",M);C.select("rect."+B.maskMaxClassName).attr("x",F).attr("width",H._width-F);"match"!==I.rangemode&&(I=H._height-h.constrain(H.d2pOppAxis(J._rl[1]),0,H._height),J=H._height-h.constrain(H.d2pOppAxis(J._rl[0]),0,H._height),C.select("rect."+B.maskMinOppAxisClassName).attr("x",M).attr("height",I).attr("width",F-M),C.select("rect."+B.maskMaxOppAxisClassName).attr("x",M).attr("y",J).attr("height",H._height-
J).attr("width",F-M),C.select("rect."+B.slideBoxClassName).attr("y",I).attr("height",J-I));J=Math.round(h.constrain(M-u,-u,H._width+u))-.5;H=Math.round(h.constrain(F-u,-u,H._width+u))+.5;C.select("g."+B.grabberMinClassName).attr("transform","translate("+J+",0.5)");C.select("g."+B.grabberMaxClassName).attr("transform","translate("+H+",0.5)")}function k(C,u,F,H){C=h.ensureSingle(C,"rect",B.bgClassName,function(I){I.attr({x:0,y:0,"shape-rendering":"crispEdges"})});F=0===H.borderwidth%2?H.borderwidth:
H.borderwidth-1;var J=-H._offsetShift;u=q.crispRound(u,H.borderwidth);C.attr({width:H._width+F,height:H._height+F,transform:"translate("+J+","+J+")",fill:H.bgcolor,stroke:H.bordercolor,"stroke-width":u})}function a(C,u,F,H){h.ensureSingleById(u._fullLayout._topdefs,"clipPath",H._clipId,function(J){J.append("rect").attr({x:0,y:0})}).select("rect").attr({width:H._width,height:H._height})}function e(C,u,F,H){var J=u.calcdata;C=C.selectAll("g."+B.rangePlotClassName).data(F._subplotsWith,h.identity);C.enter().append("g").attr("class",
function(M){return B.rangePlotClassName+" "+M}).call(q.setClipUrl,H._clipId,u);C.order();C.exit().remove();var I;C.each(function(M,E){var L=c.select(this);E=0===E;var P=A.getFromId(u,M,"y"),N=P._name,Q=H[N],O={data:[],layout:{xaxis:{type:F.type,domain:[0,1],range:H.range.slice(),calendar:F.calendar},width:H._width,height:H._height,margin:{t:0,b:0,l:0,r:0}},_context:u._context};F.rangebreaks&&(O.layout.xaxis.rangebreaks=F.rangebreaks);O.layout[N]={type:P.type,domain:[0,1],range:"match"!==Q.rangemode?
Q.range.slice():P.range.slice(),calendar:P.calendar};P.rangebreaks&&(O.layout[N].rangebreaks=P.rangebreaks);g.supplyDefaults(O);P=O._fullLayout.xaxis;N=O._fullLayout[N];P.clearCalc();P.setScale();N.clearCalc();N.setScale();L={id:M,plotgroup:L,xaxis:P,yaxis:N,isRangePlot:!0};E?I=L:(L.mainplot="xy",L.mainplotinfo=I);E=w;N=E.rangePlot;O=[];for(P=0;P<J.length;P++){Q=J[P];var T=Q[0].trace;T.xaxis+T.yaxis===M&&O.push(Q)}N.call(E,u,L,O)})}function f(C,u,F,H,J){h.ensureSingle(C,"rect",B.maskMinClassName,
function(I){I.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",H._height).call(t.fill,B.maskColor);h.ensureSingle(C,"rect",B.maskMaxClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",H._height).call(t.fill,B.maskColor);"match"!==J.rangemode&&(h.ensureSingle(C,"rect",B.maskMinOppAxisClassName,function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",H._width).call(t.fill,B.maskOppAxisColor),h.ensureSingle(C,"rect",B.maskMaxOppAxisClassName,
function(I){I.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",H._width).style("border-top",B.maskOppBorder).call(t.fill,B.maskOppAxisColor))}function l(C,u,F,H){u._context.staticPlot||h.ensureSingle(C,"rect",B.slideBoxClassName,function(J){J.attr({y:0,cursor:B.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:H._height,fill:B.slideBoxFill})}function m(C,u,F,H){F=h.ensureSingle(C,"g",B.grabberMinClassName);C=h.ensureSingle(C,"g",B.grabberMaxClassName);var J={x:0,width:B.handleWidth,
rx:B.handleRadius,fill:t.background,stroke:t.defaultLine,"stroke-width":B.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(H._height/4),height:Math.round(H._height/2)};h.ensureSingle(F,"rect",B.handleMinClassName,function(E){E.attr(J)}).attr(I);h.ensureSingle(C,"rect",B.handleMaxClassName,function(E){E.attr(J)}).attr(I);if(!u._context.staticPlot){var M={width:B.grabAreaWidth,x:0,y:0,fill:B.grabAreaFill,cursor:B.grabAreaCursor};h.ensureSingle(F,"rect",B.grabAreaMinClassName,function(E){E.attr(M)}).attr("height",
H._height);h.ensureSingle(C,"rect",B.grabAreaMaxClassName,function(E){E.attr(M)}).attr("height",H._height)}}var c=b("d3"),d=b("../../registry"),g=b("../../plots/plots"),h=b("../../lib"),q=b("../drawing"),t=b("../color"),v=b("../titles"),w=b("../../plots/cartesian"),A=b("../../plots/cartesian/axis_ids"),z=b("../dragelement"),y=b("../../lib/setcursor"),B=b("./constants");D.exports=function(C){for(var u=C._fullLayout,F=u._rangeSliderData,H=0;H<F.length;H++){var J=F[H][B.name];J._clipId=J._id+"-"+u._uid}H=
u._infolayer.selectAll("g."+B.containerClassName).data(F,function(I){return I._name});H.exit().each(function(I){u._topdefs.select("#"+I[B.name]._clipId).remove()}).remove();0!==F.length&&(H.enter().append("g").classed(B.containerClassName,!0).attr("pointer-events","all"),H.each(function(I){var M=c.select(this),E=I[B.name],L=u[A.id2name(I.anchor)],P=E[A.id2name(I.anchor)];if(E.range){var N=h.simpleMap(E.range,I.r2l),Q=h.simpleMap(I.range,I.r2l);E.range=E._input.range=h.simpleMap(Q[0]<Q[1]?[Math.min(N[0],
Q[0]),Math.max(N[1],Q[1])]:[Math.max(N[0],Q[0]),Math.min(N[1],Q[1])],I.l2r)}I.cleanRange("rangeslider.range");Q=u._size;var O=I.domain;E._width=Q.w*(O[1]-O[0]);N=Math.round(Q.t+Q.h*(1-I._counterDomainMin)+("bottom"===I.side?I._depth:0)+E._offsetShift+B.extraPad);M.attr("transform","translate("+Math.round(Q.l+Q.w*O[0])+","+N+")");E._rl=h.simpleMap(E.range,I.r2l);var T=E._rl[0];Q=E._rl[1];var V=Q-T;E.p2d=function(qa){return qa/E._width*V+T};E.d2p=function(qa){return(qa-T)/V*E._width};if(I.rangebreaks){var Z=
I.locateBreaks(T,Q);if(Z.length){var aa=0;for(O=0;O<Z.length;O++){var Y=Z[O];aa+=Y.max-Y.min}var ea=E._width/(Q-T-aa),ca=[-ea*T];for(O=0;O<Z.length;O++)Y=Z[O],ca.push(ca[ca.length-1]-ea*(Y.max-Y.min));E.d2p=function(qa){for(var pa=ca[0],oa=0;oa<Z.length;oa++){var ja=Z[oa];if(qa>=ja.max)pa=ca[oa+1];else if(qa<ja.min)break}return pa+ea*qa};for(O=0;O<Z.length;O++)Y=Z[O],Y.pmin=E.d2p(Y.min),Y.pmax=E.d2p(Y.max);E.p2d=function(qa){for(var pa=ca[0],oa=0;oa<Z.length;oa++){var ja=Z[oa];if(qa>=ja.pmax)pa=ca[oa+
1];else if(qa<ja.pmin)break}return(qa-pa)/ea}}}if("match"!==P.rangemode){var ba=L.r2l(P.range[0]),ka=L.r2l(P.range[1])-ba;E.d2pOppAxis=function(qa){return(qa-ba)/ka*E._height}}M.call(k,C,I,E).call(a,C,I,E).call(e,C,I,E).call(f,C,I,E,P).call(l,C,I,E).call(m,C,I,E);r(M,C,I,E);p(M,C,I,E,L,P);"bottom"===I.side&&v.draw(C,I._id+"title",{propContainer:I,propName:I._name+".title",placeholder:u._dfltTitle.x,attributes:{x:I._offset+I._length/2,y:N+E._height+E._offsetShift+10+1.5*I.title.font.size,"text-anchor":"middle"}})}))}},
{"../../lib":749,"../../lib/setcursor":769,"../../plots/cartesian":810,"../../plots/cartesian/axis_ids":800,"../../plots/plots":860,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"../titles":710,"./constants":686,d3:169}],689:[function(b,D,G){function r(f){return(f=f&&f[e])&&f.visible}var n=b("../../plots/cartesian/axis_ids"),p=b("../../lib/svg_text_utils"),k=b("./constants"),a=b("../../constants/alignment").LINE_SPACING,e=k.name;G.isVisible=r;G.makeData=function(f){var l=
n.list({_fullLayout:f},"x",!0),m=f.margin,c=[];if(!f._has("gl2d"))for(var d=0;d<l.length;d++){var g=l[d];if(r(g)){c.push(g);var h=g[e];h._id=e+g._id;h._height=(f.height-m.b-m.t)*h.thickness;h._offsetShift=Math.floor(h.borderwidth/2)}}f._rangeSliderData=c};G.autoMarginOpts=function(f,l){f=f._fullLayout;var m=l[e],c=l._id.charAt(0),d=0,g=0;"bottom"===l.side&&(d=l._depth,l.title.text!==f._dfltTitle[c]&&(g=1.5*l.title.font.size+10+m._offsetShift,c=(l.title.text.match(p.BR_TAG_ALL)||[]).length,g+=c*l.title.font.size*
a));return{x:0,y:l._counterDomainMin,l:0,r:0,t:0,b:m._height+d+Math.max(f.margin.b,g),pad:k.extraPad+2*m._offsetShift}}},{"../../constants/alignment":717,"../../lib/svg_text_utils":773,"../../plots/cartesian/axis_ids":800,"./constants":686}],690:[function(b,D,G){G=b("../../lib");var r=b("./attributes"),n=b("./oppaxis_attributes"),p=b("./helpers");D.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:G.extendFlat({},r,{yaxis:n})}}},layoutAttributes:b("./attributes"),
handleDefaults:b("./defaults"),calcAutorange:b("./calc_autorange"),draw:b("./draw"),isVisible:p.isVisible,makeData:p.makeData,autoMarginOpts:p.autoMarginOpts}},{"../../lib":749,"./attributes":684,"./calc_autorange":685,"./defaults":687,"./draw":688,"./helpers":689,"./oppaxis_attributes":691}],691:[function(b,D,G){D.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},
{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],692:[function(b,D,G){G=b("../annotations/attributes");var r=b("../../traces/scatter/attributes").line,n=b("../drawing/attributes").dash,p=b("../../lib/extend").extendFlat;b=b("../../plot_api/plot_template").templatedArray;D.exports=b("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below",
"above"],dflt:"above",editType:"arraydraw"},xref:p({},G.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:p({},G.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},
y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:p({},r.color,{editType:"arraydraw"}),width:p({},r.width,{editType:"calc+arraydraw"}),dash:p({},n,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",
dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../lib/extend":739,"../../plot_api/plot_template":787,"../../traces/scatter/attributes":1155,"../annotations/attributes":598,"../drawing/attributes":636}],693:[function(b,D,G){function r(f,l,m,c,d,g){f/=2;return"pixel"===l?(m=d?e.extractPathCoords(d,g?a.paramIsY:a.paramIsX):[m,c],l=p.aggNums(Math.max,null,m),m=p.aggNums(Math.min,null,m),m=0>m?Math.abs(m)+f:f,l=0<l?l+f:f,{ppad:f,ppadplus:g?m:l,ppadminus:g?l:m}):{ppad:f}}function n(f,l,
m,c,d){var g="category"===f.type||"multicategory"===f.type?f.r2c:f.d2c;if(void 0!==l)return[g(l),g(m)];if(c){l=Infinity;m=-Infinity;c=c.match(a.segmentRE);var h;"date"===f.type&&(g=e.decodeDate(g));for(f=0;f<c.length;f++){var q=c[f];q=d[q.charAt(0)].drawn;void 0!==q&&(!(h=c[f].substr(1).match(a.paramRE))||h.length<q||(q=g(h[q]),q<l&&(l=q),q>m&&(m=q)))}if(m>=l)return[l,m]}}var p=b("../../lib"),k=b("../../plots/cartesian/axes"),a=b("./constants"),e=b("./helpers");D.exports=function(f){var l=p.filterVisible(f._fullLayout.shapes);
if(l.length&&f._fullData.length)for(var m=0;m<l.length;m++){var c=l[m];c._extremes={};if("paper"!==c.xref){var d="pixel"===c.xsizemode?c.xanchor:c.x0;var g="pixel"===c.xsizemode?c.xanchor:c.x1;var h=k.getFromId(f,c.xref);(d=n(h,d,g,c.path,a.paramIsX))&&(c._extremes[h._id]=k.findExtremes(h,d,r(c.line.width,c.xsizemode,c.x0,c.x1,c.path,!1)))}"paper"!==c.yref&&(d="pixel"===c.ysizemode?c.yanchor:c.y0,g="pixel"===c.ysizemode?c.yanchor:c.y1,h=k.getFromId(f,c.yref),(d=n(h,d,g,c.path,a.paramIsY))&&(c._extremes[h._id]=
k.findExtremes(h,d,r(c.line.width,c.ysizemode,c.y0,c.y1,c.path,!0))))}}},{"../../lib":749,"../../plots/cartesian/axes":797,"./constants":694,"./helpers":703}],694:[function(b,D,G){D.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,
3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],695:[function(b,D,G){function r(f,l,m){function c(J,I){return n.coerce(f,l,a,J,I)}if(c("visible")){var d=c("path");d=c("type",d?"path":"rect");"path"!==l.type&&delete l.path;c("editable");c("layer");c("opacity");c("fillcolor");c("fillrule");c("line.width")&&(c("line.color"),c("line.dash"));for(var g=c("xsizemode"),h=c("ysizemode"),q=["x","y"],t=0;2>t;t++){var v=q[t],w=v+"anchor",A=
"x"===v?g:h,z={_fullLayout:m},y=p.coerceRef(f,l,z,v,"","paper");if("paper"!==y){var B=p.getFromId(z,y);B._shapeIndices.push(l._index);var C=e.rangeToShapePosition(B);B=e.shapePositionToRange(B)}else B=C=n.identity;if("path"!==d){var u=v+"0";v+="1";var F=f[u],H=f[v];f[u]=B(f[u],!0);f[v]=B(f[v],!0);"pixel"===A?(c(u,0),c(v,10)):(p.coercePosition(l,z,c,y,u,.25),p.coercePosition(l,z,c,y,v,.75));l[u]=C(l[u]);l[v]=C(l[v]);f[u]=F;f[v]=H}"pixel"===A&&(A=f[w],f[w]=B(f[w],!0),p.coercePosition(l,z,c,y,w,.25),
l[w]=C(l[w]),f[w]=A)}"path"===d?c("path"):n.noneOrAll(f,l,["x0","x1","y0","y1"])}}var n=b("../../lib"),p=b("../../plots/cartesian/axes"),k=b("../../plots/array_container_defaults"),a=b("./attributes"),e=b("./helpers");D.exports=function(f,l){k(f,l,{name:"shapes",handleItemDefaults:r})}},{"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"./attributes":692,"./helpers":703}],696:[function(b,D,G){function r(C){var u=C._fullLayout;u._shapeUpperLayer.selectAll("path").remove();
u._shapeLowerLayer.selectAll("path").remove();for(var F in u._plots){var H=u._plots[F].shapelayer;H&&H.selectAll("path").remove()}for(F=0;F<u.shapes.length;F++)u.shapes[F].visible&&n(C,F)}function n(C,u){function F(M){var E=a(C,J),L={"data-index":u,"fill-rule":J.fillrule,d:E},P=J.opacity,N=J.fillcolor,Q=J.line.width?J.line.color:"rgba(0,0,0,0)",O=J.line.width,T=J.line.dash;O||!0!==J.editable||(O=5,T="solid");var V="Z"!==E[E.length-1],Z=!C._context.edits.shapePosition&&J.editable&&C._fullLayout._activeShapeIndex===
u;Z&&(N=V?"rgba(0,0,0,0)":C._fullLayout.activeshape.fillcolor,P=C._fullLayout.activeshape.opacity);var aa=M.append("path").attr(L).style("opacity",P).call(t.stroke,Q).call(t.fill,N).call(v.dashLine,T,O);p(aa,C,J);if(Z||C._context.edits.shapePosition)var Y=w(C.layout,"shapes",J);Z?(aa.style({cursor:"move"}),M={element:aa.node(),plotinfo:I,gd:C,editHelpers:Y,isActiveShape:!0},E=g(E,C),h(E,aa,M)):C._context.edits.shapePosition?k(C,aa,J,u,M,Y):!0===J.editable&&aa.style("pointer-events",V||.5>=t.opacity(N)*
P?"stroke":"all");aa.node().addEventListener("click",function(){a:{if(!C._context.edits.shapePosition){var ea=+aa.node().getAttribute("data-index");if(0<=ea){if(ea===C._fullLayout._activeShapeIndex){l(C);ea=void 0;break a}C._fullLayout._activeShapeIndex=ea;C._fullLayout._deactivateShape=l;r(C)}}ea=void 0}return ea})}C._fullLayout._paperdiv.selectAll('.shapelayer [data-index\x3d"'+u+'"]').remove();var H=B.makeOptionsAndPlotinfo(C,u),J=H.options,I=H.plotinfo;J._input&&!1!==J.visible&&("below"!==J.layer?
F(C._fullLayout._shapeUpperLayer):"paper"===J.xref||"paper"===J.yref?F(C._fullLayout._shapeLowerLayer):I._hadPlotinfo?F((I.mainplotinfo||I).shapelayer):F(C._fullLayout._shapeLowerLayer))}function p(C,u,F){F=(F.xref+F.yref).replace(/paper/g,"");v.setClipUrl(C,F?"clip"+u._fullLayout._uid+F:null,u)}function k(C,u,F,H,J,I){function M(){var mb=Math.max(F.line.width,10),ya=J.append("g").attr("data-index",H);ya.append("path").attr("d",u.attr("d")).style({cursor:"move","stroke-width":mb,"stroke-opacity":"0"});
var Ia={"fill-opacity":"0"};mb=Math.max(mb/2,10);ya.append("circle").attr({"data-line-point":"start-point",cx:Q?Fa(F.xanchor)+F.x0:Fa(F.x0),cy:O?Xa(F.yanchor)-F.y0:Xa(F.y0),r:mb}).style(Ia).classed("cursor-grab",!0);ya.append("circle").attr({"data-line-point":"end-point",cx:Q?Fa(F.xanchor)+F.x1:Fa(F.x1),cy:O?Xa(F.yanchor)-F.y1:Xa(F.y1),r:mb}).style(Ia).classed("cursor-grab",!0);return ya}function E(mb){if(C._fullLayout._drawing)kb=null;else if(T)kb="path"===mb.target.tagName?"move":"start-point"===
mb.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var ya=La.element.getBoundingClientRect(),Ia=ya.right-ya.left,Na=ya.bottom-ya.top,Ta=mb.clientX-ya.left;ya=mb.clientY-ya.top;mb=!V&&10<Ia&&10<Na&&!mb.shiftKey?A.getCursor(Ta/Ia,1-ya/Na):"move";z(u,mb);kb=mb.split("-")[0]}}function L(mb,ya){if("path"===F.type){var Ia=function(Ta){return Ta},Na=Ia;Q?Z("xanchor",F.xanchor=ab(ba+mb)):(Na=function(Ta){return ab(Fa(Ta)+mb)},wa&&"date"===wa.type&&(Na=B.encodeDate(Na)));
O?Z("yanchor",F.yanchor=gb(ka+ya)):(Ia=function(Ta){return gb(Xa(Ta)+ya)},Ca&&"date"===Ca.type&&(Ia=B.encodeDate(Ia)));Z("path",F.path=f(na,Na,Ia))}else Q?Z("xanchor",F.xanchor=ab(ba+mb)):(Z("x0",F.x0=ab(aa+mb)),Z("x1",F.x1=ab(ea+mb))),O?Z("yanchor",F.yanchor=gb(ka+ya)):(Z("y0",F.y0=gb(Y+ya)),Z("y1",F.y1=gb(ca+ya)));u.attr("d",a(C,F));N(J,F)}function P(mb,ya){if(V){var Ia=function(Pa){return Pa},Na=Ia;Q?Z("xanchor",F.xanchor=ab(ba+mb)):(Na=function(Pa){return ab(Fa(Pa)+mb)},wa&&"date"===wa.type&&
(Na=B.encodeDate(Na)));O?Z("yanchor",F.yanchor=gb(ka+ya)):(Ia=function(Pa){return gb(Xa(Pa)+ya)},Ca&&"date"===Ca.type&&(Ia=B.encodeDate(Ia)));Z("path",F.path=f(na,Na,Ia))}else if(T)"resize-over-start-point"===kb?(Na=aa+mb,Ia=O?Y-ya:Y+ya,Z("x0",F.x0=Q?Na:ab(Na)),Z("y0",F.y0=O?Ia:gb(Ia))):"resize-over-end-point"===kb&&(Na=ea+mb,Ia=O?ca-ya:ca+ya,Z("x1",F.x1=Q?Na:ab(Na)),Z("y1",F.y1=O?Ia:gb(Ia)));else{Na=-1!==kb.indexOf("n");Ia=-1!==kb.indexOf("s");var Ta=-1!==kb.indexOf("w"),hb=-1!==kb.indexOf("e"),
Ya=Na?qa+ya:qa,Ga=Ia?pa+ya:pa;Ta=Ta?oa+mb:oa;hb=hb?ja+mb:ja;O&&(Na&&(Ya=qa-ya),Ia&&(Ga=pa-ya));if(!O&&10<Ga-Ya||O&&10<Ya-Ga)Z(ra,F[ra]=O?Ya:gb(Ya)),Z(ha,F[ha]=O?Ga:gb(Ga));10<hb-Ta&&(Z(la,F[la]=Q?Ta:ab(Ta)),Z(ua,F[ua]=Q?hb:ab(hb)))}u.attr("d",a(C,F));N(J,F)}function N(mb,ya){if(Q||O){var Ia="path"!==ya.type;mb=mb.selectAll(".visual-cue").data([0]);mb.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Na=Fa(Q?ya.xanchor:c.midRange(Ia?
[ya.x0,ya.x1]:B.extractPathCoords(ya.path,y.paramIsX)));ya=Xa(O?ya.yanchor:c.midRange(Ia?[ya.y0,ya.y1]:B.extractPathCoords(ya.path,y.paramIsY)));Na=B.roundPositionForSharpStrokeRendering(Na,1);ya=B.roundPositionForSharpStrokeRendering(ya,1);Q&&O?mb.attr("d","M"+(Na-1-1)+","+(ya-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z"):Q?mb.attr("d","M"+(Na-1-1)+","+(ya-9-1)+"v18 h2 v-18 Z"):mb.attr("d","M"+(Na-9-1)+","+(ya-1-1)+"h18 v2 h-18 Z")}}var Q="pixel"===F.xsizemode,O="pixel"===F.ysizemode,T="line"===F.type,
V="path"===F.type,Z=I.modifyItem,aa,Y,ea,ca,ba,ka,qa,pa,oa,ja,ra,ha,la,ua,na,wa=d.getFromId(C,F.xref),Ca=d.getFromId(C,F.yref),Fa=B.getDataToPixel(C,wa),Xa=B.getDataToPixel(C,Ca,!0),ab=B.getPixelToData(C,wa),gb=B.getPixelToData(C,Ca,!0),bb=T?M():u,La={element:bb.node(),gd:C,prepFn:function(mb){if(!C._fullLayout._drawing){Q&&(ba=Fa(F.xanchor));O&&(ka=Xa(F.yanchor));"path"===F.type?na=F.path:(aa=Q?F.x0:Fa(F.x0),Y=O?F.y0:Xa(F.y0),ea=Q?F.x1:Fa(F.x1),ca=O?F.y1:Xa(F.y1));aa<ea?(oa=aa,la="x0",ja=ea,ua="x1"):
(oa=ea,la="x1",ja=aa,ua="x0");!O&&Y<ca||O&&Y>ca?(qa=Y,ra="y0",pa=ca,ha="y1"):(qa=ca,ra="y1",pa=Y,ha="y0");E(mb);N(J,F);var ya=F.xref,Ia=F.yref,Na=d.getFromId(C,ya),Ta=d.getFromId(C,Ia),hb="";"paper"===ya||Na.autorange||(hb+=ya);"paper"===Ia||Ta.autorange||(hb+=Ia);v.setClipUrl(u,hb?"clip"+C._fullLayout._uid+hb:null,C);La.moveFn="move"===kb?L:P;La.altKey=mb.altKey}},doneFn:function(){C._fullLayout._drawing||(z(u),J.selectAll(".visual-cue").remove(),p(u,C,F),m.call("_guiRelayout",C,I.getUpdateObj()))},
clickFn:function(){C._fullLayout._drawing||J.selectAll(".visual-cue").remove()}},kb;A.init(La);bb.node().onmousemove=E}function a(C,u){var F=u.type,H=d.getFromId(C,u.xref),J=d.getFromId(C,u.yref),I=C._fullLayout._size;if(H){var M=B.shapePositionToRange(H);var E=function(Q){return H._offset+H.r2p(M(Q,!0))}}else E=function(Q){return I.l+I.w*Q};if(J){var L=B.shapePositionToRange(J);var P=function(Q){return J._offset+J.r2p(L(Q,!0))}}else P=function(Q){return I.t+I.h*(1-Q)};if("path"===F)return H&&"date"===
H.type&&(E=B.decodeDate(E)),J&&"date"===J.type&&(P=B.decodeDate(P)),e(u,E,P);if("pixel"===u.xsizemode){E=E(u.xanchor);C=E+u.x0;var N=E+u.x1}else C=E(u.x0),N=E(u.x1);"pixel"===u.ysizemode?(P=P(u.yanchor),E=P-u.y0,u=P-u.y1):(E=P(u.y0),u=P(u.y1));if("line"===F)return"M"+C+","+E+"L"+N+","+u;if("rect"===F)return"M"+C+","+E+"H"+N+"V"+u+"H"+C+"Z";F=(C+N)/2;u=(E+u)/2;C=Math.abs(F-C);E=Math.abs(u-E);P="A"+C+","+E;C=F+C+","+u;return"M"+C+P+" 0 1,1 "+(F+","+(u-E))+P+" 0 0,1 "+C+"Z"}function e(C,u,F){var H=C.xsizemode,
J=C.ysizemode,I=C.xanchor,M=C.yanchor;return C.path.replace(y.segmentRE,function(E){var L=0,P=E.charAt(0),N=y.paramIsX[P],Q=y.paramIsY[P],O=y.numParams[P],T=E.substr(1).replace(y.paramRE,function(V){N[L]?V="pixel"===H?u(I)+Number(V):u(V):Q[L]&&(V="pixel"===J?F(M)-Number(V):F(V));L++;L>O&&(V="X");return V});L>O&&(T=T.replace(/[\s,]*X.*/,""),c.log("Ignoring extra params in segment "+E));return P+T})}function f(C,u,F){return C.replace(y.segmentRE,function(H){var J=0,I=H.charAt(0),M=y.paramIsX[I],E=y.paramIsY[I],
L=y.numParams[I];H=H.substr(1).replace(y.paramRE,function(P){if(J>=L)return P;M[J]?P=u(P):E[J]&&(P=F(P));J++;return P});return I+H})}function l(C){!C._context.edits.shapePosition&&0<=C._fullLayout._activeShapeIndex&&(q(C),delete C._fullLayout._activeShapeIndex,r(C))}var m=b("../../registry"),c=b("../../lib"),d=b("../../plots/cartesian/axes"),g=b("./draw_newshape/helpers").readPaths,h=b("./draw_newshape/display_outlines"),q=b("../../plots/cartesian/handle_outline").clearOutlineControllers,t=b("../color"),
v=b("../drawing"),w=b("../../plot_api/plot_template").arrayEditor,A=b("../dragelement"),z=b("../../lib/setcursor"),y=b("./constants"),B=b("./helpers");D.exports={draw:r,drawOne:n,eraseActiveShape:function(C){if(!C._context.edits.shapePosition){q(C);var u=C._fullLayout._activeShapeIndex,F=(C.layout||{}).shapes||[];if(u<F.length){for(var H=[],J=0;J<F.length;J++)J!==u&&H.push(F[J]);delete C._fullLayout._activeShapeIndex;m.call("_guiRelayout",C,{shapes:H})}}}}},{"../../lib":749,"../../lib/setcursor":769,
"../../plot_api/plot_template":787,"../../plots/cartesian/axes":797,"../../plots/cartesian/handle_outline":807,"../../registry":880,"../color":615,"../dragelement":634,"../drawing":637,"./constants":694,"./draw_newshape/display_outlines":700,"./draw_newshape/helpers":701,"./helpers":703}],697:[function(b,D,G){G=b("../../drawing/attributes").dash;b=b("../../../lib/extend").extendFlat;D.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},
dash:b({},G,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},
activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":739,"../../drawing/attributes":636}],698:[function(b,D,G){D.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],699:[function(b,D,G){var r=b("../../color");D.exports=function(n,p,k){k("newshape.drawdirection");k("newshape.layer");k("newshape.fillcolor");
k("newshape.fillrule");k("newshape.opacity");k("newshape.line.width")&&(k("newshape.line.color",r.contrast((n||{}).plot_bgcolor||"#FFF")),k("newshape.line.dash"));k("activeshape.fillcolor");k("activeshape.opacity")}},{"../../color":615}],700:[function(b,D,G){function r(q,t){for(var v=0;v<t.length;v++){var w=t[v];q[v]=[];for(var A=0;A<w.length;A++){q[v][A]=[];for(var z=0;z<w[A].length;z++)q[v][A][z]=w[A][z]}}return q}var n=b("../../dragelement"),p=b("../../dragelement/helpers").drawMode,k=b("../../../registry");
G=b("./constants");var a=G.i000,e=G.i090,f=G.i180,l=G.i270,m=b("../../../plots/cartesian/handle_outline").clearOutlineControllers;G=b("./helpers");var c=G.pointsShapeRectangle,d=G.pointsShapeEllipse,g=G.writePaths,h=b("./newshapes");D.exports=function z(t,v,w,A){function y(){z(t,v,w,A++);d(t[0])&&B({redrawing:!0})}function B(aa){w.isActiveShape=!1;var Y=h(v,w);Object.keys(Y).length&&k.call((aa||{}).redrawing?"relayout":"_guiRelayout",L,Y)}function C(aa){O=+aa.srcElement.getAttribute("data-i");T=+aa.srcElement.getAttribute("data-j");
Q[O][T].moveFn=u}function u(aa,Y){if(t.length){var ea=V[O][T][1],ca=V[O][T][2],ba=t[O],ka=ba.length;if(c(ba)){for(var qa=0;qa<ka;qa++)if(qa!==T){var pa=ba[qa];pa[1]===ba[T][1]&&(pa[1]=ea+aa);pa[2]===ba[T][2]&&(pa[2]=ca+Y)}ba[T][1]=ea+aa;ba[T][2]=ca+Y;if(!c(ba))for(aa=0;aa<ka;aa++)for(Y=0;Y<ba[aa].length;Y++)ba[aa][Y]=V[O][aa][Y]}else ba[T][1]=ea+aa,ba[T][2]=ca+Y;y()}}function F(){B()}function H(aa,Y){if(2===aa&&(O=+Y.srcElement.getAttribute("data-i"),T=+Y.srcElement.getAttribute("data-j"),aa=t[O],
!c(aa)&&!d(aa)&&t.length&&t[O]&&t[O].length)){aa=[];for(Y=0;Y<t[O].length;Y++)Y!==T&&aa.push(t[O][Y]);1<aa.length&&(2!==aa.length||"Z"!==aa[1][0])&&(0===T&&(aa[0][0]="M"),t[O]=aa,y(),B())}}function J(aa){Q=[];for(var Y=0;Y<t.length;Y++){var ea=t[Y],ca=!c(ea)&&d(ea);Q[Y]=[];for(var ba=0;ba<ea.length;ba++)if("Z"!==ea[ba][0]&&(!ca||ba===a||ba===e||ba===f||ba===l)){var ka=ea[ba][1],qa=ea[ba][2];ka=aa.append("circle").classed("cursor-grab",!0).attr("data-i",Y).attr("data-j",ba).attr("cx",ka).attr("cy",
qa).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});Q[Y][ba]={element:ka.node(),gd:L,prepFn:C,doneFn:F,clickFn:H};n.init(Q[Y][ba])}}}function I(aa,Y){if(t.length)for(var ea=0;ea<t.length;ea++)for(var ca=0;ca<t[ea].length;ca++)for(var ba=0;ba+2<t[ea][ca].length;ba+=2)t[ea][ca][ba+1]=V[ea][ca][ba+1]+aa,t[ea][ca][ba+2]=V[ea][ca][ba+2]+Y;y()}function M(aa){(O=+aa.srcElement.getAttribute("data-i"))||(O=0);Z[O].moveFn=I}function E(){B()}A||(A=0);var L=w.gd,
P=w.isActiveShape,N=L._fullLayout._zoomlayer;p(w.dragmode)?L._fullLayout._drawing=!0:0<=L._fullLayout._activeShapeIndex&&m(L);v.attr("d",g(t));var Q,O,T;if(P&&!A){var V=r([],t);P=N.append("g").attr("class","outline-controllers");J(P);var Z=[];t.length&&(Z[0]={element:v[0][0],gd:L,prepFn:M,doneFn:E},n.init(Z[0]))}}},{"../../../plots/cartesian/handle_outline":807,"../../../registry":880,"../../dragelement":634,"../../dragelement/helpers":633,"./constants":698,"./helpers":701,"./newshapes":702}],701:[function(b,
D,G){function r(c,d){return 1E-6>=Math.abs(c-d)}function n(c,d){var g=d[1]-c[1];c=d[2]-c[2];return Math.sqrt(g*g+c*c)}var p=b("parse-svg-path");D=b("./constants");var k=D.CIRCLE_SIDES,a=D.SQRT2;b=b("../../../plots/cartesian/helpers");var e=b.p2r,f=b.r2p,l=[0,3,4,5,6,1,2],m=[0,3,4,1,2];G.writePaths=function(c){var d=c.length;if(!d)return"M0,0Z";for(var g="",h=0;h<d;h++)for(var q=c[h].length,t=0;t<q;t++){var v=c[h][t][0];if("Z"===v)g+="Z";else for(var w=c[h][t].length,A=0;A<w;A++){var z=A;"Q"===v||
"S"===v?z=m[A]:"C"===v&&(z=l[A]);g+=c[h][t][z];0<A&&A<w-1&&(g+=",")}}return g};G.readPaths=function(c,d,g,h){c=p(c);var q=[],t=-1,v,w=0,A=0;var z=w;var y=A;for(var B=0;B<c.length;B++){var C=[],u=v=c[B][0];switch(v){case "M":t++;q[t]=[];w=+c[B][1];A=+c[B][2];C.push([u,w,A]);z=w;y=A;break;case "Q":case "S":v=+c[B][1];var F=+c[B][2];w=+c[B][3];A=+c[B][4];C.push([u,w,A,v,F]);break;case "C":v=+c[B][1];F=+c[B][2];var H=+c[B][3];var J=+c[B][4];w=+c[B][5];A=+c[B][6];C.push([u,w,A,v,F,H,J]);break;case "T":case "L":w=
+c[B][1];A=+c[B][2];C.push([u,w,A]);break;case "H":u="L";w=+c[B][1];C.push([u,w,A]);break;case "V":u="L";A=+c[B][1];C.push([u,w,A]);break;case "A":u="L";H=+c[B][1];F=+c[B][2];+c[B][4]||(H=-H,F=-F);J=w-H;var I=A;for(v=1;v<=k/2;v++){var M=2*Math.PI*v/k;C.push([u,J+H*Math.cos(M),I+F*Math.sin(M)])}break;case "Z":if(w!==z||A!==y)w=z,A=y,C.push([u,w,A])}u=(g||{}).domain;H=d._fullLayout._size;F=g&&"pixel"===g.xsizemode;J=g&&"pixel"===g.ysizemode;I=!1===h;for(M=0;M<C.length;M++){for(v=0;7>v+2;v+=2){var E=
C[M][v+1],L=C[M][v+2];void 0!==E&&void 0!==L&&(w=E,A=L,g&&(g.xaxis&&g.xaxis.p2r?(I&&(E-=g.xaxis._offset),E=F?f(g.xaxis,g.xanchor)+E:e(g.xaxis,E)):(I&&(E-=H.l),E=u?u.x[0]+E/H.w:E/H.w),g.yaxis&&g.yaxis.p2r?(I&&(L-=g.yaxis._offset),L=J?f(g.yaxis,g.yanchor)-L:e(g.yaxis,L)):(I&&(L-=H.t),L=u?u.y[1]-L/H.h:1-L/H.h)),C[M][v+1]=E,C[M][v+2]=L)}q[t].push(C[M].slice())}}return q};G.pointsShapeRectangle=function(c){if(5!==c.length)return!1;for(var d=1;3>d;d++)if(!r(c[0][d]-c[1][d],c[3][d]-c[2][d])||!r(c[0][d]-
c[3][d],c[1][d]-c[2][d]))return!1;return r(c[0][1],c[1][1])||r(c[0][1],c[3][1])?!!(n(c[0],c[1])*n(c[0],c[3])):!1};G.pointsShapeEllipse=function(c){var d=c.length;if(d!==k+1)return!1;d=k;for(var g=0;g<d;g++){var h=(2*d-g)%d,q=(d/2+h)%d;if(!r(n(c[g],c[(d/2+g)%d]),n(c[h],c[q])))return!1}return!0};G.handleEllipse=function(c,d,g){if(!c)return[d,g];var h=G.ellipseOver({x0:d[0],y0:d[1],x1:g[0],y1:g[1]});c=(h.x1+h.x0)/2;d=(h.y1+h.y0)/2;g=(h.x1-h.x0)/2;h=(h.y1-h.y0)/2;g||(g=h/=a);h||(h=g/=a);for(var q=[],
t=0;t<k;t++){var v=2*t*Math.PI/k;q.push([c+g*Math.cos(v),d+h*Math.sin(v)])}return q};G.ellipseOver=function(c){var d=c.x0,g=c.y0,h=c.x1,q=c.y1;c=h-d;var t=q-g;d=(d-c+h)/2;g=(g-t+q)/2;c*=a;t*=a;return{x0:d-c,y0:g-t,x1:d+c,y1:g+t}}},{"../../../plots/cartesian/helpers":808,"./constants":698,"parse-svg-path":479}],702:[function(b,D,G){G=b("../../dragelement/helpers");var r=G.drawMode,n=G.openMode;G=b("./constants");var p=G.i000,k=G.i090,a=G.i180,e=G.i270,f=G.cos45,l=G.sin45;G=b("../../../plots/cartesian/helpers");
var m=G.p2r,c=G.r2p,d=b("../../../plots/cartesian/handle_outline").clearSelect;b=b("./helpers");var g=b.readPaths,h=b.writePaths,q=b.ellipseOver;D.exports=function(t,v){if(t.length&&(t=t[0][0])){var w=t.getAttribute("d");t=v.gd;var A=t._fullLayout.newshape,z=v.plotinfo,y=z.xaxis,B=z.yaxis,C=!!z.domain||!z.xaxis,u=!!z.domain||!z.yaxis,F=v.isActiveShape,H=v.dragmode,J=(t.layout||{}).shapes||[];if(!r(H)&&void 0!==F){var I=t._fullLayout._activeShapeIndex;if(I<J.length)switch(t._fullLayout.shapes[I].type){case "rect":H=
"drawrect";break;case "circle":H="drawcircle";break;case "line":H="drawline";break;case "path":H=J[I].path||"",H="Z"===H[H.length-1]?"drawclosedpath":"drawopenpath"}}I=n(H);w=g(w,t,z,F);C={editable:!0,xref:C?"paper":y._id,yref:u?"paper":B._id,layer:A.layer,opacity:A.opacity,line:{color:A.line.color,width:A.line.width,dash:A.line.dash}};I||(C.fillcolor=A.fillcolor,C.fillrule=A.fillrule);var M;1===w.length&&(M=w[0]);if(M&&"drawrect"===H)C.type="rect",C.x0=M[0][1],C.y0=M[0][2],C.x1=M[2][1],C.y1=M[2][2];
else if(M&&"drawline"===H)C.type="line",C.x0=M[0][1],C.y0=M[0][2],C.x1=M[1][1],C.y1=M[1][2];else if(M&&"drawcircle"===H){C.type="circle";w=M[p][1];B=M[k][1];A=M[a][1];y=M[e][1];u=M[p][2];H=M[k][2];I=M[a][2];var E=M[e][2];M=z.xaxis&&("date"===z.xaxis.type||"log"===z.xaxis.type);var L=z.yaxis&&("date"===z.yaxis.type||"log"===z.yaxis.type);M&&(w=c(z.xaxis,w),B=c(z.xaxis,B),A=c(z.xaxis,A),y=c(z.xaxis,y));L&&(u=c(z.yaxis,u),H=c(z.yaxis,H),I=c(z.yaxis,I),E=c(z.yaxis,E));var P=(B+y)/2,N=(u+I)/2;w=q({x0:P,
y0:N,x1:P+(y-B+A-w)/2*f,y1:N+(E-H+I-u)/2*l});M&&(w.x0=m(z.xaxis,w.x0),w.x1=m(z.xaxis,w.x1));L&&(w.y0=m(z.yaxis,w.y0),w.y1=m(z.yaxis,w.y1));C.x0=w.x0;C.y0=w.y0;C.x1=w.x1;C.y1=w.y1}else{C.type="path";if(y&&B&&(z="date"===y.type,M="date"===B.type,z||M))for(B=0;B<w.length;B++)for(A=0;A<w[B].length;A++)for(y=0;y+2<w[B][A].length;y+=2)z&&(w[B][A][y+1]=w[B][A][y+1].replace(" ","_")),M&&(w[B][A][y+2]=w[B][A][y+2].replace(" ","_"));C.path=h(w)}d(t);v=v.editHelpers;z=(v||{}).modifyItem;M=[];for(w=0;w<J.length;w++)if(B=
t._fullLayout.shapes[w],M[w]=B._input,void 0!==F&&w===t._fullLayout._activeShapeIndex)switch(A=C,B.type){case "line":case "rect":case "circle":z("x0",A.x0);z("x1",A.x1);z("y0",A.y0);z("y1",A.y1);break;case "path":z("path",A.path)}return void 0===F?(M.push(C),M):v?v.getUpdateObj():{}}}},{"../../../plots/cartesian/handle_outline":807,"../../../plots/cartesian/helpers":808,"../../dragelement/helpers":633,"./constants":698,"./helpers":701}],703:[function(b,D,G){var r=b("./constants"),n=b("../../lib");
G.rangeToShapePosition=function(p){return"log"===p.type?p.r2d:function(k){return k}};G.shapePositionToRange=function(p){return"log"===p.type?p.d2r:function(k){return k}};G.decodeDate=function(p){return function(k){k.replace&&(k=k.replace("_"," "));return p(k)}};G.encodeDate=function(p){return function(k){return p(k).replace(" ","_")}};G.extractPathCoords=function(p,k){var a=[];p.match(r.segmentRE).forEach(function(e){var f=k[e.charAt(0)].drawn;void 0!==f&&(e=e.substr(1).match(r.paramRE),!e||e.length<
f||a.push(n.cleanNumber(e[f])))});return a};G.getDataToPixel=function(p,k,a){var e=p._fullLayout._size;if(k){var f=G.shapePositionToRange(k);p=function(l){return k._offset+k.r2p(f(l,!0))};"date"===k.type&&(p=G.decodeDate(p))}else p=a?function(l){return e.t+e.h*(1-l)}:function(l){return e.l+e.w*l};return p};G.getPixelToData=function(p,k,a){var e=p._fullLayout._size;if(k){var f=G.rangeToShapePosition(k);p=function(l){return f(k.p2r(l-k._offset))}}else p=a?function(l){return 1-(l-e.t)/e.h}:function(l){return(l-
e.l)/e.w};return p};G.roundPositionForSharpStrokeRendering=function(p,k){p=Math.round(p);return 1===Math.round(k%2)?p+.5:p};G.makeOptionsAndPlotinfo=function(p,k){k=p._fullLayout.shapes[k]||{};var a=p._fullLayout._plots[k.xref+k.yref];a?a._hadPlotinfo=!0:(a={},k.xref&&"paper"!==k.xref&&(a.xaxis=p._fullLayout[k.xref+"axis"]),k.yref&&"paper"!==k.yref&&(a.yaxis=p._fullLayout[k.yref+"axis"]));a.xsizemode=k.xsizemode;a.ysizemode=k.ysizemode;a.xanchor=k.xanchor;a.yanchor=k.yanchor;return{options:k,plotinfo:a}}},
{"../../lib":749,"./constants":694}],704:[function(b,D,G){G=b("./draw");D.exports={moduleType:"component",name:"shapes",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),supplyDrawNewShapeDefaults:b("./draw_newshape/defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("shapes"),calcAutorange:b("./calc_autorange"),draw:G.draw,drawOne:G.drawOne}},{"../../plots/cartesian/include_components":809,"./attributes":692,"./calc_autorange":693,"./defaults":695,"./draw":696,
"./draw_newshape/defaults":699}],705:[function(b,D,G){G=b("../../plots/font_attributes");var r=b("../../plots/pad_attributes"),n=b("../../lib/extend").extendDeepAll,p=b("../../plot_api/edit_types").overrideAll,k=b("../../plots/animation_attributes"),a=b("../../plot_api/plot_template").templatedArray;b=b("./constants");var e=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,
items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});D.exports=p(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:e,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:n(r({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left",
"center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:k.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},
font:G({})},font:G({}),activebgcolor:{valType:"color",dflt:b.gripBgActiveColor},bgcolor:{valType:"color",dflt:b.railBgColor},bordercolor:{valType:"color",dflt:b.railBorderColor},borderwidth:{valType:"number",min:0,dflt:b.railBorderWidth},ticklen:{valType:"number",min:0,dflt:b.tickLength},tickcolor:{valType:"color",dflt:b.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:b.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":739,"../../plot_api/edit_types":780,
"../../plot_api/plot_template":787,"../../plots/animation_attributes":792,"../../plots/font_attributes":825,"../../plots/pad_attributes":859,"./constants":706}],706:[function(b,D,G){D.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",
labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",
labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],707:[function(b,D,G){function r(l,m,c){function d(t,v){return p.coerce(l,m,a,t,v)}for(var g=k(l,m,{name:"steps",handleItemDefaults:n}),h=0,q=0;q<g.length;q++)g[q].visible&&h++;if(2>h?m.visible=!1:d("visible"))m._stepCount=h,h=m._visibleSteps=p.filterVisible(g),q=d("active"),(g[q]||{}).visible||(m.active=h[0]._index),
d("x"),d("y"),p.noneOrAll(l,m,["x","y"]),d("xanchor"),d("yanchor"),d("len"),d("lenmode"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),p.coerceFont(d,"font",c.font),d("currentvalue.visible")&&(d("currentvalue.xanchor"),d("currentvalue.prefix"),d("currentvalue.suffix"),d("currentvalue.offset"),p.coerceFont(d,"currentvalue.font",m.font)),d("transition.duration"),d("transition.easing"),d("bgcolor"),d("activebgcolor"),d("bordercolor"),d("borderwidth"),d("ticklen"),d("tickwidth"),d("tickcolor"),d("minorticklen")}
function n(l,m){function c(g,h){return p.coerce(l,m,f,g,h)}if("skip"===l.method||Array.isArray(l.args)?c("visible"):m.visible=!1){c("method");c("args");var d=c("label","step-"+m._index);c("value",d);c("execute")}}var p=b("../../lib"),k=b("../../plots/array_container_defaults"),a=b("./attributes"),e=b("./constants").name,f=a.steps;D.exports=function(l,m){k(l,m,{name:e,handleItemDefaults:r})}},{"../../lib":749,"../../plots/array_container_defaults":793,"./attributes":705,"./constants":706}],708:[function(b,
D,G){function r(L,P){L=L[J.name];for(var N=[],Q=0;Q<L.length;Q++){var O=L[Q];O.visible&&(O._gd=P,N.push(O))}return N}function n(L){return L._index}function p(L,P){var N=C.tester.selectAll("g."+J.labelGroupClass).data(P._visibleSteps);N.enter().append("g").classed(J.labelGroupClass,!0);var Q=0,O=0;N.each(function(aa){var Y=z.select(this);if(aa=f(Y,{step:aa},P).node())aa=C.bBox(aa),O=Math.max(O,aa.height),Q=Math.max(Q,aa.width)});N.remove();var T=P._dims={};T.inputAreaWidth=Math.max(J.railWidth,J.gripHeight);
var V=L._fullLayout._size;T.lx=V.l+V.w*P.x;T.ly=V.t+V.h*(1-P.y);T.outerLength="fraction"===P.lenmode?Math.round(V.w*P.len):P.len;T.inputAreaStart=0;T.inputAreaLength=Math.round(T.outerLength-P.pad.l-P.pad.r);T.labelStride=Math.max(1,Math.ceil((Q+J.labelPadding)/((T.inputAreaLength-2*J.stepInset)/(P._stepCount-1))));T.labelHeight=O;T.currentValueMaxWidth=0;T.currentValueHeight=0;T.currentValueTotalHeight=0;T.currentValueMaxLines=1;if(P.currentvalue.visible){var Z=C.tester.append("g");N.each(function(aa){var Y=
a(Z,P,aa.label);aa=Y.node()&&C.bBox(Y.node())||{width:0,height:0};Y=F.lineCount(Y);T.currentValueMaxWidth=Math.max(T.currentValueMaxWidth,Math.ceil(aa.width));T.currentValueHeight=Math.max(T.currentValueHeight,Math.ceil(aa.height));T.currentValueMaxLines=Math.max(T.currentValueMaxLines,Y)});T.currentValueTotalHeight=T.currentValueHeight+P.currentvalue.offset;Z.remove()}T.height=T.currentValueTotalHeight+J.tickOffset+P.ticklen+J.labelOffset+T.labelHeight+P.pad.t+P.pad.b;N="left";u.isRightAnchor(P)&&
(T.lx-=T.outerLength,N="right");u.isCenterAnchor(P)&&(T.lx-=T.outerLength/2,N="center");V="top";u.isBottomAnchor(P)&&(T.ly-=T.height,V="bottom");u.isMiddleAnchor(P)&&(T.ly-=T.height/2,V="middle");T.outerLength=Math.ceil(T.outerLength);T.height=Math.ceil(T.height);T.lx=Math.round(T.lx);T.ly=Math.round(T.ly);V={y:P.y,b:T.height*E[V],t:T.height*M[V]};"fraction"===P.lenmode?(V.l=0,V.xl=P.x-P.len*M[N],V.r=0,V.xr=P.x+P.len*E[N]):(V.x=P.x,V.l=T.outerLength*M[N],V.r=T.outerLength*E[N]);y.autoMargin(L,J.autoMarginIdRoot+
P._index,V)}function k(L,P,N){(N.steps[N.active]||{}).visible||(N.active=N._visibleSteps[0]._index);P.call(a,N).call(A,N).call(l,N).call(g,N).call(w,L,N).call(e,L,N);L=N._dims;C.setTranslate(P,L.lx+N.pad.l,L.ly+N.pad.t);P.call(q,N,!1);P.call(a,N)}function a(L,P,N){if(P.currentvalue.visible){var Q=P._dims;switch(P.currentvalue.xanchor){case "right":var O=Q.inputAreaLength-J.currentValueInset-Q.currentValueMaxWidth;var T="left";break;case "center":O=.5*Q.inputAreaLength;T="middle";break;default:O=J.currentValueInset,
T="left"}L=u.ensureSingle(L,"text",J.labelClass,function(aa){aa.classed("user-select-none",!0).attr({"text-anchor":T,"data-notex":1})});var V=P.currentvalue.prefix?P.currentvalue.prefix:"";if("string"===typeof N)V+=N;else{N=P.steps[P.active].label;var Z=P._gd._fullLayout._meta;Z&&(N=u.templateString(N,Z));V+=N}P.currentvalue.suffix&&(V+=P.currentvalue.suffix);L.call(C.font,P.currentvalue.font).text(V).call(F.convertToTspans,P._gd);V=F.lineCount(L);F.positionText(L,O,(Q.currentValueMaxLines+1-V)*P.currentvalue.font.size*
I);return L}}function e(L,P,N){u.ensureSingle(L,"rect",J.gripRectClass,function(Q){Q.call(d,P,L,N).style("pointer-events","all")}).attr({width:J.gripWidth,height:J.gripHeight,rx:J.gripRadius,ry:J.gripRadius}).call(B.stroke,N.bordercolor).call(B.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px")}function f(L,P,N){L=u.ensureSingle(L,"text",J.labelClass,function(O){O.classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1})});P=P.step.label;var Q=N._gd._fullLayout._meta;Q&&(P=
u.templateString(P,Q));L.call(C.font,N.font).text(P).call(F.convertToTspans,N._gd);return L}function l(L,P){L=u.ensureSingle(L,"g",J.labelsClass);var N=P._dims;L=L.selectAll("g."+J.labelGroupClass).data(N.labelSteps);L.enter().append("g").classed(J.labelGroupClass,!0);L.exit().remove();L.each(function(Q){var O=z.select(this);O.call(f,Q,P);C.setTranslate(O,t(P,Q.fraction),J.tickOffset+P.ticklen+P.font.size*I+J.labelOffset+N.currentValueTotalHeight)})}function m(L,P,N,Q,O){Q=N._visibleSteps[Math.round(Q*
(N._stepCount-1))]._index;Q!==N.active&&c(L,P,N,Q,!0,O)}function c(L,P,N,Q,O,T){var V=N.active;N.active=Q;H(L.layout,J.name,N).applyUpdate("active",Q);Q=N.steps[N.active];P.call(q,N,T);P.call(a,N);L.emit("plotly_sliderchange",{slider:N,step:N.steps[N.active],interaction:O,previousActive:V});Q&&Q.method&&O&&(P._nextMethod?(P._nextMethod.step=Q,P._nextMethod.doCallback=O,P._nextMethod.doTransition=T):(P._nextMethod={step:Q,doCallback:O,doTransition:T},P._nextMethodRaf=window.requestAnimationFrame(function(){var Z=
P._nextMethod.step;Z.method&&(Z.execute&&y.executeAPICommand(L,Z.method,Z.args),P._nextMethod=null,P._nextMethodRaf=null)})))}function d(L,P,N){var Q=N.node(),O=z.select(P);L.on("mousedown",function(){var T=N.data()[0];P.emit("plotly_sliderstart",{slider:T});var V=N.select("."+J.gripRectClass);z.event.stopPropagation();z.event.preventDefault();V.call(B.fill,T.activebgcolor);var Z=v(T,z.mouse(Q)[0]);m(P,N,T,Z,!0);T._dragging=!0;O.on("mousemove",function(){var aa=N.data()[0],Y=v(aa,z.mouse(Q)[0]);m(P,
N,aa,Y,!1)});O.on("mouseup",function(){var aa=N.data()[0];aa._dragging=!1;V.call(B.fill,aa.bgcolor);O.on("mouseup",null);O.on("mousemove",null);P.emit("plotly_sliderend",{slider:aa,step:aa.steps[aa.active]})})})}function g(L,P){L=L.selectAll("rect."+J.tickRectClass).data(P._visibleSteps);var N=P._dims;L.enter().append("rect").classed(J.tickRectClass,!0);L.exit().remove();L.attr({width:P.tickwidth+"px","shape-rendering":"crispEdges"});L.each(function(Q,O){Q=0===O%N.labelStride;var T=z.select(this);
T.attr({height:Q?P.ticklen:P.minorticklen}).call(B.fill,P.tickcolor);C.setTranslate(T,t(P,O/(P._stepCount-1))-.5*P.tickwidth,(Q?J.tickOffset:J.minorTickOffset)+N.currentValueTotalHeight)})}function h(L){var P=L._dims;P.labelSteps=[];for(var N=L._stepCount,Q=0;Q<N;Q+=P.labelStride)P.labelSteps.push({fraction:Q/(N-1),step:L._visibleSteps[Q]})}function q(L,P,N){L=L.select("rect."+J.gripRectClass);for(var Q=0,O=0;O<P._stepCount;O++)if(P._visibleSteps[O]._index===P.active){Q=O;break}Q=t(P,Q/(P._stepCount-
1));P._invokingCommand||(N&&0<P.transition.duration&&(L=L.transition().duration(P.transition.duration).ease(P.transition.easing)),L.attr("transform","translate("+(Q-.5*J.gripWidth)+","+P._dims.currentValueTotalHeight+")"))}function t(L,P){L=L._dims;return L.inputAreaStart+J.stepInset+(L.inputAreaLength-2*J.stepInset)*Math.min(1,Math.max(0,P))}function v(L,P){L=L._dims;return Math.min(1,Math.max(0,(P-J.stepInset-L.inputAreaStart)/(L.inputAreaLength-2*J.stepInset-2*L.inputAreaStart)))}function w(L,
P,N){var Q=N._dims,O=u.ensureSingle(L,"rect",J.railTouchRectClass,function(T){T.call(d,P,L,N).style("pointer-events","all")});O.attr({width:Q.inputAreaLength,height:Math.max(Q.inputAreaWidth,J.tickOffset+N.ticklen+Q.labelHeight)}).call(B.fill,N.bgcolor).attr("opacity",0);C.setTranslate(O,0,Q.currentValueTotalHeight)}function A(L,P){var N=P._dims,Q=N.inputAreaLength-2*J.railInset;L=u.ensureSingle(L,"rect",J.railRectClass);L.attr({width:Q,height:J.railWidth,rx:J.railRadius,ry:J.railRadius,"shape-rendering":"crispEdges"}).call(B.stroke,
P.bordercolor).call(B.fill,P.bgcolor).style("stroke-width",P.borderwidth+"px");C.setTranslate(L,J.railInset,.5*(N.inputAreaWidth-J.railWidth)+N.currentValueTotalHeight)}var z=b("d3"),y=b("../../plots/plots"),B=b("../color"),C=b("../drawing"),u=b("../../lib"),F=b("../../lib/svg_text_utils"),H=b("../../plot_api/plot_template").arrayEditor,J=b("./constants");b=b("../../constants/alignment");var I=b.LINE_SPACING,M=b.FROM_TL,E=b.FROM_BR;D.exports=function(L){function P(T){T._commandObserver&&(T._commandObserver.remove(),
delete T._commandObserver);y.autoMargin(L,J.autoMarginIdRoot+T._index)}var N=L._fullLayout,Q=r(N,L);N=N._infolayer.selectAll("g."+J.containerClassName).data(0<Q.length?[0]:[]);N.enter().append("g").classed(J.containerClassName,!0).style("cursor","ew-resize");N.exit().each(function(){z.select(this).selectAll("g."+J.groupClassName).each(P)}).remove();if(0!==Q.length){N=N.selectAll("g."+J.groupClassName).data(Q,n);N.enter().append("g").classed(J.groupClassName,!0);N.exit().each(P).remove();for(var O=
0;O<Q.length;O++)p(L,Q[O]);N.each(function(T){var V=z.select(this);h(T);y.manageCommandObserver(L,T,T._visibleSteps,function(Z){var aa=V.data()[0];aa.active!==Z.index&&(aa._dragging||c(L,V,aa,Z.index,!1,!0))});k(L,z.select(this),T)})}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plot_api/plot_template":787,"../../plots/plots":860,"../color":615,"../drawing":637,"./constants":706,d3:169}],709:[function(b,D,G){G=b("./constants");D.exports={moduleType:"component",
name:G.name,layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":705,"./constants":706,"./defaults":707,"./draw":708}],710:[function(b,D,G){var r=b("d3"),n=b("fast-isnumeric"),p=b("../../plots/plots"),k=b("../../registry"),a=b("../../lib"),e=b("../drawing"),f=b("../color"),l=b("../../lib/svg_text_utils"),m=b("../../constants/interactions"),c=b("../../constants/alignment").OPPOSITE_SIDE,d=/ [XY][0-9]* /;D.exports={draw:function(g,h,q){function t(V){a.syncOrAsync([v,
w],V)}function v(V){if(F){var Z="";F.rotate&&(Z+="rotate("+[F.rotate,u.x,u.y]+")");F.offset&&(Z+="translate(0, "+F.offset+")")}else Z=null;V.attr("transform",Z);V.style({"font-family":P,"font-size":r.round(N,2)+"px",fill:f.rgb(Q),opacity:I*f.opacity(Q),"font-weight":p.fontWeight}).attr(u).call(l.convertToTspans,g);return p.previousPromises(g)}function w(V){V=r.select(V.node().parentNode);if(C&&C.selection&&C.side&&L){V.attr("transform",null);var Z=c[C.side],aa="left"===C.side||"top"===C.side?-1:1,
Y=n(C.pad)?C.pad:2,ea=e.bBox(V.node()),ca={left:0,top:0,right:J.width,bottom:J.height};ca=C.maxShift||aa*(ca[C.side]-ea[C.side]);var ba=0;if(0>ca)ba=ca;else{var ka=C.offsetLeft||0,qa=C.offsetTop||0;ea.left-=ka;ea.right-=ka;ea.top-=qa;ea.bottom-=qa;C.selection.each(function(){var pa=e.bBox(this);a.bBoxIntersect(ea,pa,Y)&&(ba=Math.max(ba,aa*(pa[C.side]-ea[Z])+Y))});ba=Math.min(ca,ba)}(0<ba||0>ca)&&V.attr("transform","translate("+{left:[-ba,0],right:[ba,0],top:[0,-ba],bottom:[0,ba]}[C.side]+")")}}function A(){I=
0;M=!0;T.text(y).on("mouseover.opacity",function(){r.select(this).transition().duration(m.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){r.select(this).transition().duration(m.HIDE_PLACEHOLDER).style("opacity",0)})}var z=q.propName,y=q.placeholder,B=q.traceIndex,C=q.avoid||{},u=q.attributes,F=q.transform,H=q.containerGroup,J=g._fullLayout,I=1,M=!1,E=q.propContainer.title,L=(E&&E.text?E.text:"").trim();E=E&&E.font?E.font:{};var P=E.family,N=E.size,Q=E.color,O;"title.text"===
z?O="titleText":-1!==z.indexOf("axis")?O="axisTitleText":z.indexOf(!0)&&(O="colorbarTitleText");O=g._context.edits[O];""===L?I=0:L.replace(d," % ")===y.replace(d," % ")&&(I=.2,M=!0,O||(L=""));q._meta?L=a.templateString(L,q._meta):J._meta&&(L=a.templateString(L,J._meta));q=L||O;H||(H=a.ensureSingle(J._infolayer,"g","g-"+h));var T=H.selectAll("text").data(q?[0]:[]);T.enter().append("text");T.text(L).attr("class",h);T.exit().remove();if(!q)return H;T.call(t);if(O){if(L)T.on(".opacity",null);else A();
T.call(l.makeEditable,{gd:g}).on("edit",function(V){void 0!==B?k.call("_guiRestyle",g,z,V,B):k.call("_guiRelayout",g,z,V)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(t)}).on("input",function(V){this.text(V||" ").call(l.positionText,u.x,u.y)})}T.classed("js-placeholder",M);return H}}},{"../../constants/alignment":717,"../../constants/interactions":723,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/plots":860,"../../registry":880,"../color":615,"../drawing":637,
d3:169,"fast-isnumeric":241}],711:[function(b,D,G){G=b("../../plots/font_attributes");var r=b("../color/attributes"),n=b("../../lib/extend").extendFlat,p=b("../../plot_api/edit_types").overrideAll,k=b("../../plots/pad_attributes");b=b("../../plot_api/plot_template").templatedArray;var a=b("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},
{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});D.exports=p(b("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},
showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:n(k({editType:"arraydraw"}),{}),font:G({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:r.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},
{"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/font_attributes":825,"../../plots/pad_attributes":859,"../color/attributes":614}],712:[function(b,D,G){D.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",
buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},{}],713:[function(b,D,G){function r(l,m,c){function d(h,
q){return p.coerce(l,m,a,h,q)}var g=k(l,m,{name:"buttons",handleItemDefaults:n});d("visible",0<g.length)&&(d("active"),d("direction"),d("type"),d("showactive"),d("x"),d("y"),p.noneOrAll(l,m,["x","y"]),d("xanchor"),d("yanchor"),d("pad.t"),d("pad.r"),d("pad.b"),d("pad.l"),p.coerceFont(d,"font",c.font),d("bgcolor",c.paper_bgcolor),d("bordercolor"),d("borderwidth"))}function n(l,m){function c(d,g){return p.coerce(l,m,f,d,g)}c("visible","skip"===l.method||Array.isArray(l.args))&&(c("method"),c("args"),
c("args2"),c("label"),c("execute"))}var p=b("../../lib"),k=b("../../plots/array_container_defaults"),a=b("./attributes"),e=b("./constants").name,f=a.buttons;D.exports=function(l,m){k(l,m,{name:e,handleItemDefaults:r})}},{"../../lib":749,"../../plots/array_container_defaults":793,"./attributes":711,"./constants":712}],714:[function(b,D,G){function r(I){return I._index}function n(I,M){return+I.attr(H.menuIndexAttrName)===M._index}function p(I,M,E,L,P,N,Q,O){M.active=Q;u(I.layout,H.name,M).applyUpdate("active",
Q);"buttons"===M.type?a(I,L,null,null,M):"dropdown"===M.type&&(P.attr(H.menuIndexAttrName,"-1"),k(I,L,P,N,M),O||a(I,L,P,N,M))}function k(I,M,E,L,P){var N=B.ensureSingle(M,"g",H.headerClassName,function(V){V.style("pointer-events","all")}),Q=P._dims,O={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},T={width:Q.headerWidth,height:Q.headerHeight};N.call(l,P,P.buttons[P.active]||H.blankHeaderOpts,I).call(t,P,O,T);B.ensureSingle(M,"text",H.headerArrowClassName,function(V){V.classed("user-select-none",!0).attr("text-anchor",
"end").call(y.font,P.font).text(H.arrowSymbol[P.direction])}).attr({x:Q.headerWidth-H.arrowOffsetX+P.pad.l,y:Q.headerHeight/2+H.textOffsetY+P.pad.t});N.on("click",function(){E.call(v,String(n(E,P)?-1:P._index));a(I,M,E,L,P)});N.on("mouseover",function(){N.call(g)});N.on("mouseout",function(){N.call(h,P)});y.setTranslate(M,Q.lx,Q.ly)}function a(I,M,E,L,P){E||(E=M,E.attr("pointer-events","all"));var N=-1!==+E.attr(H.menuIndexAttrName)||"buttons"===P.type?P.buttons:[],Q="dropdown"===P.type?H.dropdownButtonClassName:
H.buttonClassName,O=E.selectAll("g."+Q).data(B.filterVisible(N));N=O.enter().append("g").classed(Q,!0);Q=O.exit();"dropdown"===P.type?(N.attr("opacity","0").transition().attr("opacity","1"),Q.transition().attr("opacity","0").remove()):Q.remove();var T=0,V=0;N=P._dims;Q=-1!==["up","down"].indexOf(P.direction);"dropdown"===P.type&&(Q?V=N.headerHeight+H.gapButtonHeader:T=N.headerWidth+H.gapButtonHeader);"dropdown"===P.type&&"up"===P.direction&&(V=-H.gapButtonHeader+H.gapButton-N.openHeight);"dropdown"===
P.type&&"left"===P.direction&&(T=-H.gapButtonHeader+H.gapButton-N.openWidth);var Z={x:N.lx+T+P.pad.l,y:N.ly+V+P.pad.t,yPad:H.gapButton,xPad:H.gapButton,index:0};T={l:Z.x+P.borderwidth,t:Z.y+P.borderwidth};O.each(function(aa,Y){var ea=w.select(this);ea.call(l,P,aa,I).call(t,P,Z);ea.on("click",function(){w.event.defaultPrevented||(aa.execute&&(aa.args2&&P.active===Y?(p(I,P,aa,M,E,L,-1),A.executeAPICommand(I,aa.method,aa.args2)):(p(I,P,aa,M,E,L,Y),A.executeAPICommand(I,aa.method,aa.args))),I.emit("plotly_buttonclicked",
{menu:P,button:aa,active:P.active}))});ea.on("mouseover",function(){ea.call(g)});ea.on("mouseout",function(){ea.call(h,P);O.call(d,P)})});O.call(d,P);Q?(T.w=Math.max(N.openWidth,N.headerWidth),T.h=Z.y-T.t):(T.w=Z.x-T.l,T.h=Math.max(N.openHeight,N.headerHeight));T.direction=P.direction;L&&(O.size()?e(I,M,E,L,P,T):f(L))}function e(I,M,E,L,P,N){M=P.direction;I=P._dims;P=P.active;var Q,O;if("up"===M||"down"===M)for(M=O=0;M<P;M++)O+=I.heights[M]+H.gapButton;else for(M=Q=0;M<P;M++)Q+=I.widths[M]+H.gapButton;
L.enable(N,Q,O);L.hbar&&L.hbar.attr("opacity","0").transition().attr("opacity","1");L.vbar&&L.vbar.attr("opacity","0").transition().attr("opacity","1")}function f(I){var M=!!I.hbar,E=!!I.vbar;M&&I.hbar.transition().attr("opacity","0").each("end",function(){M=!1;E||I.disable()});E&&I.vbar.transition().attr("opacity","0").each("end",function(){E=!1;M||I.disable()})}function l(I,M,E,L){I.call(m,M).call(c,M,E,L)}function m(I,M){B.ensureSingle(I,"rect",H.itemRectClassName,function(E){E.attr({rx:H.rx,ry:H.ry,
"shape-rendering":"crispEdges"})}).call(z.stroke,M.bordercolor).call(z.fill,M.bgcolor).style("stroke-width",M.borderwidth+"px")}function c(I,M,E,L){I=B.ensureSingle(I,"text",H.itemTextClassName,function(N){N.classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1})});E=E.label;var P=L._fullLayout._meta;P&&(E=B.templateString(E,P));I.call(y.font,M.font).text(E).call(C.convertToTspans,L)}function d(I,M){var E=M.active;I.each(function(L,P){L=w.select(this);P===E&&M.showactive&&L.select("rect."+
H.itemRectClassName).call(z.fill,H.activeColor)})}function g(I){I.select("rect."+H.itemRectClassName).call(z.fill,H.hoverColor)}function h(I,M){I.select("rect."+H.itemRectClassName).call(z.fill,M.bgcolor)}function q(I,M){var E=M._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},L=y.tester.selectAll("g."+H.dropdownButtonClassName).data(B.filterVisible(M.buttons));L.enter().append("g").classed(H.dropdownButtonClassName,!0);var P=-1!==["up",
"down"].indexOf(M.direction);L.each(function(T,V){var Z=w.select(this);Z.call(l,M,T,I);Z=Z.select("."+H.itemTextClassName);T=Z.node()&&y.bBox(Z.node()).width;T=Math.max(T+H.textPadX,H.minWidth);var aa=M.font.size*F;Z=C.lineCount(Z);Z=Math.max(aa*Z,H.minHeight)+H.textOffsetY;Z=Math.ceil(Z);T=Math.ceil(T);E.widths[V]=T;E.heights[V]=Z;E.height1=Math.max(E.height1,Z);E.width1=Math.max(E.width1,T);P?(E.totalWidth=Math.max(E.totalWidth,T),E.openWidth=E.totalWidth,E.totalHeight+=Z+H.gapButton,E.openHeight+=
Z+H.gapButton):(E.totalWidth+=T+H.gapButton,E.openWidth+=T+H.gapButton,E.totalHeight=Math.max(E.totalHeight,Z),E.openHeight=E.totalHeight)});P?E.totalHeight-=H.gapButton:E.totalWidth-=H.gapButton;E.headerWidth=E.width1+H.arrowPadX;E.headerHeight=E.height1;"dropdown"===M.type&&(P?(E.width1+=H.arrowPadX,E.totalHeight=E.height1):E.totalWidth=E.width1,E.totalWidth+=H.arrowPadX);L.remove();L=E.totalWidth+M.pad.l+M.pad.r;var N=E.totalHeight+M.pad.t+M.pad.b,Q=I._fullLayout._size;E.lx=Q.l+Q.w*M.x;E.ly=Q.t+
Q.h*(1-M.y);Q="left";B.isRightAnchor(M)&&(E.lx-=L,Q="right");B.isCenterAnchor(M)&&(E.lx-=L/2,Q="center");var O="top";B.isBottomAnchor(M)&&(E.ly-=N,O="bottom");B.isMiddleAnchor(M)&&(E.ly-=N/2,O="middle");E.totalWidth=Math.ceil(E.totalWidth);E.totalHeight=Math.ceil(E.totalHeight);E.lx=Math.round(E.lx);E.ly=Math.round(E.ly);A.autoMargin(I,H.autoMarginIdRoot+M._index,{x:M.x,y:M.y,l:L*({right:1,center:.5}[Q]||0),r:L*({left:1,center:.5}[Q]||0),b:N*({top:1,middle:.5}[O]||0),t:N*({bottom:1,middle:.5}[O]||
0)})}function t(I,M,E,L){L=L||{};var P=I.select("."+H.itemRectClassName),N=I.select("."+H.itemTextClassName),Q=M.borderwidth,O=E.index,T=M._dims;y.setTranslate(I,Q+E.x,Q+E.y);I=-1!==["up","down"].indexOf(M.direction);Q=L.height||(I?T.heights[O]:T.height1);P.attr({x:0,y:0,width:L.width||(I?T.width1:T.widths[O]),height:Q});M=M.font.size*F;L=C.lineCount(N);C.positionText(N,H.textOffsetX,Q/2-(L-1)*M/2+H.textOffsetY);I?E.y+=T.heights[O]+E.yPad:E.x+=T.widths[O]+E.xPad;E.index++}function v(I,M){I.attr(H.menuIndexAttrName,
M||"-1").selectAll("g."+H.dropdownButtonClassName).remove()}var w=b("d3"),A=b("../../plots/plots"),z=b("../color"),y=b("../drawing"),B=b("../../lib"),C=b("../../lib/svg_text_utils"),u=b("../../plot_api/plot_template").arrayEditor,F=b("../../constants/alignment").LINE_SPACING,H=b("./constants"),J=b("./scrollbox");D.exports=function(I){function M(T){A.autoMargin(I,H.autoMarginIdRoot+T._index)}var E=I._fullLayout,L=B.filterVisible(E[H.name]),P=E._menulayer.selectAll("g."+H.containerClassName).data(0<
L.length?[0]:[]);P.enter().append("g").classed(H.containerClassName,!0).style("cursor","pointer");P.exit().each(function(){w.select(this).selectAll("g."+H.headerGroupClassName).each(M)}).remove();if(0!==L.length){var N=P.selectAll("g."+H.headerGroupClassName).data(L,r);N.enter().append("g").classed(H.headerGroupClassName,!0);var Q=B.ensureSingle(P,"g",H.dropdownButtonGroupClassName,function(T){T.style("pointer-events","all")});for(P=0;P<L.length;P++)q(I,L[P]);var O=new J(I,Q,"updatemenus"+E._uid);
N.enter().size()&&(Q.node().parentNode.appendChild(Q.node()),Q.call(v));N.exit().each(function(T){Q.call(v);M(T)}).remove();N.each(function(T){var V=w.select(this),Z="dropdown"===T.type?Q:null;A.manageCommandObserver(I,T,T.buttons,function(aa){p(I,T,T.buttons[aa.index],V,Z,O,aa.index,!0)});"dropdown"===T.type?(k(I,V,Q,O,T),n(Q,T)&&a(I,V,Q,O,T)):a(I,V,null,null,T)})}}},{"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plot_api/plot_template":787,"../../plots/plots":860,
"../color":615,"../drawing":637,"./constants":712,"./scrollbox":716,d3:169}],715:[function(b,D,G){arguments[4][709][0].apply(G,arguments)},{"./attributes":711,"./constants":712,"./defaults":713,"./draw":714,dup:709}],716:[function(b,D,G){function r(e,f,l){this.gd=e;this.container=f;this.id=l;this.vbar=this.hbar=this.translateY=this.translateX=this.position=null;this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]);this.bg.exit().on(".drag",null).on("wheel",null).remove();this.bg.enter().append("rect").classed("scrollbox-bg",
!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}D.exports=r;var n=b("d3"),p=b("../color"),k=b("../drawing"),a=b("../../lib");r.barWidth=2;r.barLength=20;r.barRadius=2;r.barPad=1;r.barColor="#808BA4";r.prototype.enable=function(e,f,l){var m=this.gd._fullLayout,c=m.width,d=m.height;this.position=e;e=this.position.l;var g=this.position.w,h=this.position.t,q=this.position.h,t=this.position.direction,v="down"===t,w="left"===t,A="up"===t,z=g,y=q;v||w||"right"===t||A||(this.position.direction=
"down",v=!0);if(v||A){var B=e;var C=B+z;v?(A=h,t=Math.min(A+y,d)):(t=h+y,A=Math.max(t-y,0));y=t-A}else A=h,t=A+y,w?(C=e+z,B=Math.max(C-z,0)):(B=e,C=Math.min(B+z,c)),z=C-B;this._box={l:B,t:A,w:z,h:y};v=g>z;var u=r.barLength+2*r.barPad;w=r.barWidth+2*r.barPad;var F=h+q;F+w>d&&(F=d-w);d=this.container.selectAll("rect.scrollbar-horizontal").data(v?[0]:[]);d.exit().on(".drag",null).remove();d.enter().append("rect").classed("scrollbar-horizontal",!0).call(p.fill,r.barColor);v?(this.hbar=d.attr({rx:r.barRadius,
ry:r.barRadius,x:e,y:F,width:u,height:w}),this._hbarXMin=e+u/2,this._hbarTranslateMax=z-u):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);d=q>y;z=r.barWidth+2*r.barPad;u=r.barLength+2*r.barPad;F=e+g;F+z>c&&(F=c-z);c=this.container.selectAll("rect.scrollbar-vertical").data(d?[0]:[]);c.exit().on(".drag",null).remove();c.enter().append("rect").classed("scrollbar-vertical",!0).call(p.fill,r.barColor);d?(this.vbar=c.attr({rx:r.barRadius,ry:r.barRadius,x:F,y:h,width:z,height:u}),
this._vbarYMin=h+u/2,this._vbarTranslateMax=y-u):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);c=this.id;y=B-.5;C=d?C+z+.5:C+.5;A-=.5;t=v?t+w+.5:t+.5;m=m._topdefs.selectAll("#"+c).data(v||d?[0]:[]);m.exit().remove();m.enter().append("clipPath").attr("id",c).append("rect");v||d?(this._clipRect=m.select("rect").attr({x:Math.floor(y),y:Math.floor(A),width:Math.ceil(C)-Math.floor(y),height:Math.ceil(t)-Math.floor(A)}),this.container.call(k.setClipUrl,c,this.gd),this.bg.attr({x:e,
y:h,width:g,height:q})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(k.setClipUrl,null),delete this._clipRect);if(v||d)m=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this)),this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(m),m=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault();n.event.sourceEvent.stopPropagation()}).on("drag",
this._onBarDrag.bind(this)),v&&this.hbar.on(".drag",null).call(m),d&&this.vbar.on(".drag",null).call(m);this.setTranslate(f,l)};r.prototype.disable=function(){if(this.hbar||this.vbar)this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(k.setClipUrl,null),delete this._clipRect;this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,
delete this._vbarYMin,delete this._vbarTranslateMax)};r.prototype._onBoxDrag=function(){var e=this.translateX,f=this.translateY;this.hbar&&(e-=n.event.dx);this.vbar&&(f-=n.event.dy);this.setTranslate(e,f)};r.prototype._onBoxWheel=function(){var e=this.translateX,f=this.translateY;this.hbar&&(e+=n.event.deltaY);this.vbar&&(f+=n.event.deltaY);this.setTranslate(e,f)};r.prototype._onBarDrag=function(){var e=this.translateX,f=this.translateY;if(this.hbar){e+=this._hbarXMin;var l=e+this._hbarTranslateMax;
e=(a.constrain(n.event.x,e,l)-e)/(l-e)*(this.position.w-this._box.w)}this.vbar&&(f+=this._vbarYMin,l=f+this._vbarTranslateMax,f=(a.constrain(n.event.y,f,l)-f)/(l-f)*(this.position.h-this._box.h));this.setTranslate(e,f)};r.prototype.setTranslate=function(e,f){var l=this.position.w-this._box.w,m=this.position.h-this._box.h;e=a.constrain(e||0,0,l);f=a.constrain(f||0,0,m);this.translateX=e;this.translateY=f;this.container.call(k.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-f);
this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+f-.5)});this.hbar&&this.hbar.call(k.setTranslate,e+e/l*this._hbarTranslateMax,f);this.vbar&&this.vbar.call(k.setTranslate,e,f+f/m*this._vbarTranslateMax)}},{"../../lib":749,"../color":615,"../drawing":637,d3:169}],717:[function(b,D,G){D.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,
bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],718:[function(b,D,G){D.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},{}],719:[function(b,D,G){D.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format#locale_format"}},{}],720:[function(b,D,G){D.exports={COMPARISON_OPS:"\x3d !\x3d \x3c \x3e\x3d \x3e \x3c\x3d".split(" "),
COMPARISON_OPS2:["\x3d","\x3c","\x3e\x3d","\x3e","\x3c\x3d"],INTERVAL_OPS:"[] () [) (] ][ )( ]( )[".split(" "),SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"\x3d":"\x3d","\x3c":"\x3c","\x3c\x3d":"\x3c","\x3e":"\x3e","\x3e\x3d":"\x3e","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],721:[function(b,D,G){D.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],722:[function(b,D,
G){D.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},{}],723:[function(b,D,G){D.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1E3,DESELECTDIM:.2}},{}],724:[function(b,D,G){D.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1E4,ONEMAXYEAR:316224E5,ONEAVGYEAR:315576E5,ONEMINYEAR:31536E6,ONEMAXQUARTER:79488E5,ONEAVGQUARTER:78894E5,ONEMINQUARTER:76896E5,ONEMAXMONTH:26784E5,ONEAVGMONTH:26298E5,ONEMINMONTH:24192E5,ONEWEEK:6048E5,ONEDAY:864E5,
ONEHOUR:36E5,ONEMIN:6E4,ONESEC:1E3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"−"}},{}],725:[function(b,D,G){G.xmlns="http://www.w3.org/2000/xmlns/";G.svg="http://www.w3.org/2000/svg";G.xlink="http://www.w3.org/1999/xlink";G.svgAttrs={xmlns:G.svg,"xmlns:xlink":G.xlink}},{}],726:[function(b,D,G){G.version=b("./version").version;b("es6-promise").polyfill();b("../build/plotcss");b("./fonts/mathjax_config")();D=b("./registry");D=G.register=D.register;for(var r=b("./plot_api"),n=Object.keys(r),
p=0;p<n.length;p++){var k=n[p];"_"!==k.charAt(0)&&(G[k]=r[k]);D({moduleType:"apiMethod",name:k,fn:r[k]})}D(b("./traces/scatter"));D([b("./components/legend"),b("./components/fx"),b("./components/annotations"),b("./components/annotations3d"),b("./components/shapes"),b("./components/images"),b("./components/updatemenus"),b("./components/sliders"),b("./components/rangeslider"),b("./components/rangeselector"),b("./components/grid"),b("./components/errorbars"),b("./components/colorscale"),b("./components/colorbar")]);
D([b("./locale-en"),b("./locale-en-us")]);window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(D(window.PlotlyLocales),delete window.PlotlyLocales);G.Icons=b("./fonts/ploticon");G.Plots=b("./plots/plots");G.Fx=b("./components/fx");G.Snapshot=b("./snapshot");G.PlotSchema=b("./plot_api/plot_schema");G.Queue=b("./lib/queue");G.d3=b("d3")},{"../build/plotcss":1,"./components/annotations":606,"./components/annotations3d":611,"./components/colorbar":621,"./components/colorscale":627,"./components/errorbars":643,
"./components/fx":655,"./components/grid":659,"./components/images":664,"./components/legend":672,"./components/rangeselector":683,"./components/rangeslider":690,"./components/shapes":704,"./components/sliders":709,"./components/updatemenus":715,"./fonts/mathjax_config":727,"./fonts/ploticon":728,"./lib/queue":764,"./locale-en":778,"./locale-en-us":777,"./plot_api":782,"./plot_api/plot_schema":786,"./plots/plots":860,"./registry":880,"./snapshot":885,"./traces/scatter":1167,"./version":1337,d3:169,
"es6-promise":224}],727:[function(b,D,G){D.exports=function(){"undefined"!==typeof MathJax&&"local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured())}},{}],728:[function(b,D,G){D.exports={undo:{width:857.1,height:1E3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",
transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1E3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1E3,height:1E3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",
transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1E3,height:1E3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1E3,height:1E3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",
transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1E3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1E3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1E3,height:1E3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",
transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1E3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1E3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1E3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",
transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1E3,height:1E3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",
transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1E3,height:1E3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",
transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1E3,height:1E3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",
transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1E3,height:1E3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",
transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1E3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",
transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1E3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},
drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},
lasso:{width:1031,height:1E3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",
transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1E3,height:1E3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},
drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",
transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},
eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1E3,height:1E3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",
transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' viewBox\x3d'0 0 132 132'\x3e\x3cdefs\x3e\x3cstyle\x3e.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}\x3c/style\x3e\x3c/defs\x3e\x3ctitle\x3eplotly-logomark\x3c/title\x3e\x3cg id\x3d'symbol'\x3e\x3crect class\x3d'cls-1' width\x3d'132' height\x3d'132' rx\x3d'6' ry\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'54' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'102' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'78' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'54' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'30' r\x3d'6'/\x3e\x3ccircle class\x3d'cls-2' cx\x3d'30' cy\x3d'54' r\x3d'6'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/\x3e\x3cpath class\x3d'cls-3' d\x3d'M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/\x3e\x3c/g\x3e\x3c/svg\x3e"}}},
{}],729:[function(b,D,G){G.isLeftAnchor=function(r){return"left"===r.xanchor||"auto"===r.xanchor&&r.x<=1/3};G.isCenterAnchor=function(r){return"center"===r.xanchor||"auto"===r.xanchor&&r.x>1/3&&r.x<2/3};G.isRightAnchor=function(r){return"right"===r.xanchor||"auto"===r.xanchor&&r.x>=2/3};G.isTopAnchor=function(r){return"top"===r.yanchor||"auto"===r.yanchor&&r.y>=2/3};G.isMiddleAnchor=function(r){return"middle"===r.yanchor||"auto"===r.yanchor&&r.y>1/3&&r.y<2/3};G.isBottomAnchor=function(r){return"bottom"===
r.yanchor||"auto"===r.yanchor&&r.y<=1/3}},{}],730:[function(b,D,G){function r(m){return Math.abs(m[1]-m[0])>l-1E-14}function n(m,c){return e(c-m,l)}function p(m,c){if(r(c))return!0;if(c[0]<c[1]){var d=c[0];c=c[1]}else d=c[1],c=c[0];d=a(d,l);c=a(c,l);d>c&&(c+=l);m=a(m,l);var g=m+l;return m>=d&&m<=c||g>=d&&g<=c}function k(m,c,d,g,h,q,t){function v(C,u){return[C*Math.cos(u)+h,q-C*Math.sin(u)]}function w(C,u,F){return"A"+[C,C]+" "+[0,B,F]+" "+v(C,u)}h=h||0;q=q||0;var A=r([d,g]);if(A){var z=0;var y=f;
d=l}else d<g?(z=d,d=g):z=g;m<c?(g=m,m=c):g=c;var B=Math.abs(d-z)<=f?0:1;A?A=null===g?"M"+v(m,z)+w(m,y,0)+w(m,d,0)+"Z":"M"+v(g,z)+w(g,y,0)+w(g,d,0)+"ZM"+v(m,z)+w(m,y,1)+w(m,d,1)+"Z":null===g?(A="M"+v(m,z)+w(m,d,0),t&&(A+="L0,0Z")):A="M"+v(g,z)+"L"+v(m,z)+w(m,d,0)+"L"+v(g,d)+w(g,z,1)+"Z";return A}b=b("./mod");var a=b.mod,e=b.modHalf,f=Math.PI,l=2*f;D.exports={deg2rad:function(m){return m/180*f},rad2deg:function(m){return m/f*180},angleDelta:n,angleDist:function(m,c){return Math.abs(n(m,c))},isFullCircle:r,
isAngleInsideSector:p,isPtInsideSector:function(m,c,d,g){if(!p(c,g))return!1;d[0]<d[1]?(c=d[0],d=d[1]):(c=d[1],d=d[0]);return m>=c&&m<=d},pathArc:function(m,c,d,g,h){return k(null,m,c,d,g,h,0)},pathSector:function(m,c,d,g,h){return k(null,m,c,d,g,h,1)},pathAnnulus:function(m,c,d,g,h,q){return k(m,c,d,g,h,q,1)}}},{"./mod":756}],731:[function(b,D,G){function r(f){return a.isView(f)&&!(f instanceof e)}function n(f){return k(f)||r(f)}function p(f,l,m){if(n(f)){if(n(f[0])){for(var c=0;c<f.length;c++)m=
l(m,f[c].length);return m}return f.length}return 0}var k=Array.isArray,a="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},e="undefined"===typeof DataView?function(){}:DataView;G.isTypedArray=r;G.isArrayOrTypedArray=n;G.isArray1D=function(f){return!n(f[0])};G.ensureArray=function(f,l){k(f)||(f=[]);f.length=l;return f};G.concat=function(){var f=[],l=!0,m=0,c,d;for(c=0;c<arguments.length;c++){var g=arguments[c];if(d=g.length){if(h)f.push(g);else{var h=g;
var q=d}if(k(g))var t=!1;else l=!1,m?t!==g.constructor&&(t=!1):t=g.constructor;m+=d}}if(!m)return[];if(!f.length)return h;if(l)return h.concat.apply(h,f);if(t){l=new t(m);l.set(h);for(c=0;c<f.length;c++)g=f[c],l.set(g,q),q+=g.length;return l}l=Array(m);for(m=0;m<h.length;m++)l[m]=h[m];for(c=0;c<f.length;c++){g=f[c];for(m=0;m<g.length;m++)l[q+m]=g[m];q+=m}return l};G.maxRowLength=function(f){return p(f,Math.max,0)};G.minRowLength=function(f){return p(f,Math.min,Infinity)}},{}],732:[function(b,D,G){var r=
b("fast-isnumeric"),n=b("../constants/numerical").BADNUM,p=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;D.exports=function(k){"string"===typeof k&&(k=k.replace(p,""));return r(k)?Number(k):n}},{"../constants/numerical":724,"fast-isnumeric":241}],733:[function(b,D,G){D.exports=function(r){r=r._fullLayout;r._glcanvas&&r._glcanvas.size()&&r._glcanvas.each(function(n){n.regl&&n.regl.clear({color:!0,depth:!0})})}},{}],734:[function(b,D,G){D.exports=function(r){r._responsiveChartHandler&&(window.removeEventListener("resize",
r._responsiveChartHandler),delete r._responsiveChartHandler)}},{}],735:[function(b,D,G){function r(d,g){var h=G.valObjectMeta[g.valType];if(g.arrayOk&&c(d))return!0;if(h.validateFunction)return h.validateFunction(d,g);var q={},t=q;h.coerceFunction(d,{set:function(v){t=v}},q,g);return t!==q}var n=b("fast-isnumeric"),p=b("tinycolor2"),k=b("../plots/attributes"),a=b("../components/colorscale/scales"),e=b("../constants/interactions").DESELECTDIM,f=b("./nested_property"),l=b("./regex").counter,m=b("./mod").modHalf,
c=b("./array").isArrayOrTypedArray;G.valObjectMeta={data_array:{coerceFunction:function(d,g,h){c(d)?g.set(d):void 0!==h&&g.set(h)}},enumerated:{coerceFunction:function(d,g,h,q){q.coerceNumber&&(d=+d);-1===q.values.indexOf(d)?g.set(h):g.set(d)},validateFunction:function(d,g){g.coerceNumber&&(d=+d);g=g.values;for(var h=0;h<g.length;h++){var q=String(g[h]);if("/"===q.charAt(0)&&"/"===q.charAt(q.length-1)){if((new RegExp(q.substr(1,q.length-2))).test(d))return!0}else if(d===g[h])return!0}return!1}},"boolean":{coerceFunction:function(d,
g,h){!0===d||!1===d?g.set(d):g.set(h)}},number:{coerceFunction:function(d,g,h,q){!n(d)||void 0!==q.min&&d<q.min||void 0!==q.max&&d>q.max?g.set(h):g.set(+d)}},integer:{coerceFunction:function(d,g,h,q){d%1||!n(d)||void 0!==q.min&&d<q.min||void 0!==q.max&&d>q.max?g.set(h):g.set(+d)}},string:{coerceFunction:function(d,g,h,q){"string"!==typeof d?!0===q.strict||"number"!==typeof d?g.set(h):g.set(String(d)):q.noBlank&&!d?g.set(h):g.set(d)}},color:{coerceFunction:function(d,g,h){p(d).isValid()?g.set(d):g.set(h)}},
colorlist:{coerceFunction:function(d,g,h){function q(t){return p(t).isValid()}Array.isArray(d)&&d.length?d.every(q)?g.set(d):g.set(h):g.set(h)}},colorscale:{coerceFunction:function(d,g,h){g.set(a.get(d,h))}},angle:{coerceFunction:function(d,g,h){"auto"===d?g.set("auto"):n(d)?g.set(m(+d,360)):g.set(h)}},subplotid:{coerceFunction:function(d,g,h,q){q=q.regex||l(h);"string"===typeof d&&q.test(d)?g.set(d):g.set(h)},validateFunction:function(d,g){g=g.dflt;return d===g?!0:"string"!==typeof d?!1:l(g).test(d)?
!0:!1}},flaglist:{coerceFunction:function(d,g,h,q){if("string"!==typeof d)g.set(h);else if(-1!==(q.extras||[]).indexOf(d))g.set(d);else{d=d.split("+");for(var t=0;t<d.length;){var v=d[t];-1===q.flags.indexOf(v)||d.indexOf(v)<t?d.splice(t,1):t++}d.length?g.set(d.join("+")):g.set(h)}}},any:{coerceFunction:function(d,g,h){void 0===d?g.set(h):g.set(d)}},info_array:{coerceFunction:function(d,g,h,q){function t(H,J,I){var M;void 0===I&&(I=J.dflt);G.valObjectMeta[J.valType].coerceFunction(H,{set:function(E){M=
E}},I,J);return M}var v=2===q.dimensions||"1-2"===q.dimensions&&Array.isArray(d)&&Array.isArray(d[0]);if(Array.isArray(d)){q=q.items;var w=[],A=Array.isArray(q),z=A&&v&&Array.isArray(q[0]);z=v&&A&&!z;var y=A&&!z?q.length:d.length,B;h=Array.isArray(h)?h:[];if(v)for(v=0;v<y;v++){w[v]=[];var C=Array.isArray(d[v])?d[v]:[];var u=z?q.length:A?q[v].length:C.length;for(B=0;B<u;B++){var F=z?q[B]:A?q[v][B]:q;F=t(C[B],F,(h[v]||[])[B]);void 0!==F&&(w[v][B]=F)}}else for(v=0;v<y;v++)F=t(d[v],A?q[v]:q,h[v]),void 0!==
F&&(w[v]=F);g.set(w)}else g.set(h)},validateFunction:function(d,g){if(!Array.isArray(d))return!1;var h=g.items,q=Array.isArray(h),t=2===g.dimensions;if(!g.freeLength&&d.length!==h.length)return!1;for(var v=0;v<d.length;v++)if(t){if(!Array.isArray(d[v])||!g.freeLength&&d[v].length!==h[v].length)return!1;for(var w=0;w<d[v].length;w++)if(!r(d[v][w],q?h[v][w]:h))return!1}else if(!r(d[v],q?h[v]:h))return!1;return!0}}};G.coerce=function(d,g,h,q,t){h=f(h,q).get();var v=f(d,q);d=f(g,q);v=v.get();g=g._template;
void 0===v&&g&&(v=f(g,q).get(),g=0);void 0===t&&(t=h.dflt);if(h.arrayOk&&c(v))return d.set(v),v;var w=G.valObjectMeta[h.valType].coerceFunction;w(v,d,t,h);var A=d.get();g&&A===t&&!r(v,h)&&(v=f(g,q).get(),w(v,d,t,h),A=d.get());return A};G.coerce2=function(d,g,h,q,t){var v=f(d,q);d=G.coerce(d,g,h,q,t);v=v.get();return void 0!==v&&null!==v?d:!1};G.coerceFont=function(d,g,h){var q={};h=h||{};q.family=d(g+".family",h.family);q.size=d(g+".size",h.size);q.color=d(g+".color",h.color);return q};G.coerceHoverinfo=
function(d,g,h){var q=g._module.attributes;q=q.hoverinfo?q:k;var t=q.hoverinfo;if(1===h._dataLength){h="all"===t.dflt?t.flags.slice():t.dflt.split("+");h.splice(h.indexOf("name"),1);var v=h.join("+")}return G.coerce(d,g,q,"hoverinfo",v)};G.coerceSelectionMarkerOpacity=function(d,g){if(d.marker){var h=d.marker.opacity;if(void 0!==h){if(!c(h)&&!d.selected&&!d.unselected){var q=h;var t=e*h}g("selected.marker.opacity",q);g("unselected.marker.opacity",t)}}};G.validate=r},{"../components/colorscale/scales":630,
"../constants/interactions":723,"../plots/attributes":794,"./array":731,"./mod":756,"./nested_property":757,"./regex":765,"fast-isnumeric":241,tinycolor2:548}],736:[function(b,D,G){function r(M){return M&&t.componentsRegistry.calendars&&"string"===typeof M&&"gregorian"!==M}function n(M,E){return String(M+Math.pow(10,E)).substr(1)}function p(M,E,L,P,N){if(E||L||P||N)if(M+=" "+n(E,2)+":"+n(L,2),P||N)if(M+=":"+n(P,2),N){for(E=4;0===N%10;)--E,N/=10;M+="."+n(N,E)}return M}function k(M,E,L,P){M=M.replace(H,
function(Q){Q=Math.min(+Q.charAt(1)||6,6);return(E/1E3%1+2).toFixed(Q).substr(2).replace(/0+$/,"")||"0"});var N=new Date(Math.floor(E+.05));if(r(P))try{M=t.getComponentMethod("calendars","worldCalFmt")(M,E,P)}catch(Q){return"Invalid"}return L(M)(N)}var a=b("d3-time-format").timeFormat,e=b("fast-isnumeric"),f=b("./loggers"),l=b("./mod").mod;D=b("../constants/numerical");var m=D.BADNUM,c=D.ONEDAY,d=D.ONEHOUR,g=D.ONEMIN,h=D.ONESEC,q=D.EPOCHJD,t=b("../registry"),v=b("d3-time-format").utcFormat,w=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,
A=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,z=(new Date).getFullYear()-70;G.dateTick0=function(M,E){return r(M)?E?t.getComponentMethod("calendars","CANONICAL_SUNDAY")[M]:t.getComponentMethod("calendars","CANONICAL_TICK")[M]:E?"2000-01-02":"2000-01-01"};G.dfltRange=function(M){return r(M)?t.getComponentMethod("calendars","DFLTRANGE")[M]:["2000-01-01","2001-01-01"]};G.isJSDate=function(M){return"object"===
typeof M&&null!==M&&"function"===typeof M.getTime};G.dateTime2ms=function(M,E){if(G.isJSDate(M)){E=M.getTimezoneOffset()*g;var L=(M.getUTCMinutes()-M.getMinutes())*g+(M.getUTCSeconds()-M.getSeconds())*h+(M.getUTCMilliseconds()-M.getMilliseconds());if(L){var P=3*g;E=E-P/2+l(L-E+P/2,P)}M=Number(M)-E;return M>=y&&M<=B?M:m}if("string"!==typeof M&&"number"!==typeof M)return m;M=String(M);L=r(E);var N=M.charAt(0);!L||"G"!==N&&"g"!==N||(M=M.substr(1),E="");N=L&&"chinese"===E.substr(0,7);var Q=M.match(N?
A:w);if(!Q)return m;M=Q[1];var O=Q[3]||"1",T=Number(Q[5]||1),V=Number(Q[7]||0),Z=Number(Q[9]||0);Q=Number(Q[11]||0);if(L){if(2===M.length)return m;M=Number(M);try{var aa=t.getComponentMethod("calendars","getCal")(E);if(N){var Y="i"===O.charAt(O.length-1);O=parseInt(O,10);P=aa.newDate(M,aa.toMonthIndex(M,O,Y),T)}else P=aa.newDate(M,Number(O),T)}catch(ea){return m}return P?(P.toJD()-q)*c+V*d+Z*g+Q*h:m}M=2===M.length?(Number(M)+2E3-z)%100+z:Number(M);--O;E=new Date(Date.UTC(2E3,O,T,V,Z));E.setUTCFullYear(M);
return E.getUTCMonth()!==O||E.getUTCDate()!==T?m:E.getTime()+Q*h};var y=G.MIN_MS=G.dateTime2ms("-9999");var B=G.MAX_MS=G.dateTime2ms("9999-12-31 23:59:59.9999");G.isDateTime=function(M,E){return G.dateTime2ms(M,E)!==m};var C=90*c,u=3*d,F=5*g;G.ms2DateTime=function(M,E,L){if("number"!==typeof M||!(M>=y&&M<=B))return m;E||(E=0);var P=Math.floor(10*l(M+.05,1)),N=Math.round(M-P/10);if(r(L)){var Q=Math.floor(N/c)+q;M=Math.floor(l(M,c));try{var O=t.getComponentMethod("calendars","getCal")(L).fromJD(Q).formatDate("yyyy-mm-dd")}catch(T){O=
v("G%Y-%m-%d")(new Date(N))}if("-"===O.charAt(0))for(;11>O.length;)O="-0"+O.substr(1);else for(;10>O.length;)O="0"+O;L=E<C?Math.floor(M/d):0;N=E<C?Math.floor(M%d/g):0;Q=E<u?Math.floor(M%g/h):0;E=E<F?M%h*10+P:0}else M=new Date(N),O=v("%Y-%m-%d")(M),L=E<C?M.getUTCHours():0,N=E<C?M.getUTCMinutes():0,Q=E<u?M.getUTCSeconds():0,E=E<F?10*M.getUTCMilliseconds()+P:0;return p(O,L,N,Q,E)};G.ms2DateTimeLocal=function(M){if(!(M>=y+c&&M<=B-c))return m;var E=Math.floor(10*l(M+.05,1)),L=new Date(Math.round(M-E/10));
M=a("%Y-%m-%d")(L);var P=L.getHours(),N=L.getMinutes(),Q=L.getSeconds();E=10*L.getUTCMilliseconds()+E;return p(M,P,N,Q,E)};G.cleanDate=function(M,E,L){if(M===m)return E;if(G.isJSDate(M)||"number"===typeof M&&isFinite(M)){if(r(L))return f.error("JS Dates and milliseconds are incompatible with world calendars",M),E;M=G.ms2DateTimeLocal(+M);if(!M&&void 0!==E)return E}else if(!G.isDateTime(M,L))return f.error("unrecognized date",M),E;return M};var H=/%\d?f/g,J=[59,59.9,59.99,59.999,59.9999];G.formatDate=
function(M,E,L,P,N,Q){N=r(N)&&N;if(!E)if("y"===L)E=Q.year;else if("m"===L)E=Q.month;else if("d"===L)E=Q.dayMonth+"\n"+Q.year;else{E=L;L=l(M+.05,c);L=n(Math.floor(L/d),2)+":"+n(l(Math.floor(L/g),60),2);if("M"!==E){e(E)||(E=0);var O=(100+Math.min(l(M/h,60),J[E])).toFixed(E).substr(1);0<E&&(O=O.replace(/0+$/,"").replace(/[\.]$/,""));L+=":"+O}return L+"\n"+k(Q.dayMonthYear,M,P,N)}return k(E,M,P,N)};var I=3*c;G.incrementMonth=function(M,E,L){L=r(L)&&L;var P=l(M,c);M=Math.round(M-P);if(L)try{var N=Math.round(M/
c)+q,Q=t.getComponentMethod("calendars","getCal")(L),O=Q.fromJD(N);E%12?Q.add(O,E,"m"):Q.add(O,E/12,"y");return(O.toJD()-q)*c+P}catch(T){f.error("invalid ms "+M+" in calendar "+L)}M=new Date(M+I);return M.setUTCMonth(M.getUTCMonth()+E)+P-I};G.findExactDates=function(M,E){for(var L=0,P=0,N=0,Q=0,O,T=r(E)&&t.getComponentMethod("calendars","getCal")(E),V=0;V<M.length;V++)if(E=M[V],!e(E))Q++;else if(!(E%c))if(T)try{O=T.fromJD(E/c+q),1===O.day()?1===O.month()?L++:P++:N++}catch(Z){}else O=new Date(E),1===
O.getUTCDate()?0===O.getUTCMonth()?L++:P++:N++;P+=L;M=M.length-Q;return{exactYears:L/M,exactMonths:P/M,exactDays:(N+P)/M}}},{"../constants/numerical":724,"../registry":880,"./loggers":753,"./mod":756,"d3-time-format":166,"fast-isnumeric":241}],737:[function(b,D,G){function r(a){var e=a&&a.parentNode;e&&e.removeChild(a)}function n(a,e,f){a="plotly.js-style-"+a;var l=document.getElementById(a);l||(l=document.createElement("style"),l.setAttribute("id",a),l.appendChild(document.createTextNode("")),document.head.appendChild(l));
a=l.sheet;a.insertRule?a.insertRule(e+"{"+f+"}",0):a.addRule?a.addRule(e,f,0):k.warn("addStyleRule failed")}var p=b("d3"),k=b("./loggers");D.exports={getGraphDiv:function(a){if("string"===typeof a){var e=document.getElementById(a);if(null===e)throw Error("No DOM element with id '"+a+"' exists on the page.");return e}if(null===a||void 0===a)throw Error("DOM element provided is null or undefined");return a},isPlotDiv:function(a){a=p.select(a);return a.node()instanceof HTMLElement&&a.size()&&a.classed("js-plotly-plot")},
removeElement:r,addStyleRule:function(a,e){n("global",a,e)},addRelatedStyleRule:n,deleteRelatedStyleRule:function(a){(a=document.getElementById("plotly.js-style-"+a))&&r(a)}}},{"./loggers":753,d3:169}],738:[function(b,D,G){var r=b("events").EventEmitter;D.exports={init:function(n){if(n._ev instanceof r)return n;var p=new r,k=new r;n._ev=p;n._internalEv=k;n.on=p.on.bind(p);n.once=p.once.bind(p);n.removeListener=p.removeListener.bind(p);n.removeAllListeners=p.removeAllListeners.bind(p);n._internalOn=
k.on.bind(k);n._internalOnce=k.once.bind(k);n._removeInternalListener=k.removeListener.bind(k);n._removeAllInternalListeners=k.removeAllListeners.bind(k);n.emit=function(a,e){"undefined"!==typeof jQuery&&jQuery(n).trigger(a,e);p.emit(a,e);k.emit(a,e)};return n},triggerHandler:function(n,p,k){function a(m){if(m.listener){if(f.removeListener(p,m.listener),!m.fired)return m.fired=!0,m.listener.apply(f,[k])}else return m.apply(f,[k])}var e;"undefined"!==typeof jQuery&&(e=jQuery(n).triggerHandler(p,k));
var f=n._ev;if(!f)return e;n=f._events[p];if(!n)return e;n=Array.isArray(n)?n:[n];var l;for(l=0;l<n.length-1;l++)a(n[l]);n=a(n[l]);return void 0!==e?e:n},purge:function(n){delete n._ev;delete n.on;delete n.once;delete n.removeListener;delete n.removeAllListeners;delete n.emit;delete n._ev;delete n._internalEv;delete n._internalOn;delete n._internalOnce;delete n._removeInternalListener;delete n._removeAllInternalListeners;return n}}},{events:110}],739:[function(b,D,G){function r(k,a,e,f){var l=k[0],
m=k.length,c,d,g;if(2===m&&p(l)&&p(k[1])&&0===l.length){a:{var h=k[1];for(d=0;d<h.length;d++){var q=h[d];if(null!==q&&"object"===typeof q){h=!1;break a}void 0!==q&&(l[d]=q)}h=!0}if(h)return l;l.splice(0,l.length)}for(q=1;q<m;q++)for(c in h=k[q],h){var t=l[c];d=h[c];if(f&&p(d))l[c]=d;else if(a&&d&&(n(d)||(g=p(d))))g?(g=!1,t=t&&p(t)?t:[]):t=t&&n(t)?t:{},l[c]=r([t,d],a,e,f);else if("undefined"!==typeof d||e)l[c]=d}return l}var n=b("./is_plain_object.js"),p=Array.isArray;G.extendFlat=function(){return r(arguments,
!1,!1,!1)};G.extendDeep=function(){return r(arguments,!0,!1,!1)};G.extendDeepAll=function(){return r(arguments,!0,!0,!1)};G.extendDeepNoArrays=function(){return r(arguments,!0,!1,!0)}},{"./is_plain_object.js":750}],740:[function(b,D,G){D.exports=function(r){for(var n={},p=[],k=0,a=0;a<r.length;a++){var e=r[a];1!==n[e]&&(n[e]=1,p[k++]=e)}return p}},{}],741:[function(b,D,G){function r(p){return!0===p.visible}function n(p){p=p[0].trace;return!0===p.visible&&0!==p._length}D.exports=function(p){for(var k=
Array.isArray(p)&&Array.isArray(p[0])&&p[0][0]&&p[0][0].trace?n:r,a=[],e=0;e<p.length;e++){var f=p[e];k(f)&&a.push(f)}return a}},{}],742:[function(b,D,G){function r(h){h=h.geojson;var q=window.PlotlyGeoAssets||{};q="string"===typeof h?q[h]:h;return l(q)?q:(f.error("Oops ... something went wrong when fetching "+h),!1)}var n=b("d3"),p=b("country-regex"),k=b("@turf/area"),a=b("@turf/centroid"),e=b("@turf/bbox");G=b("./identity");var f=b("./loggers"),l=b("./is_plain_object"),m=b("./nested_property"),
c=b("./polygon"),d=Object.keys(p),g={"ISO-3":G,"USA-states":G,"country names":function(h){for(var q=0;q<d.length;q++){var t=d[q];if((new RegExp(p[t])).test(h.trim().toLowerCase()))return t}f.log("Unrecognized country name: "+h+".");return!1}};D.exports={locationToFeature:function(h,q,t){if(!q||"string"!==typeof q)return!1;q=g[h](q);var v;if(q){if("USA-states"===h)for(h=[],v=0;v<t.length;v++){var w=t[v];w.properties&&w.properties.gu&&"USA"===w.properties.gu&&h.push(w)}else h=t;for(v=0;v<h.length;v++)if(w=
h[v],w.id===q)return w;f.log(["Location with id",q,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(h){function q(y){for(var B=0;B<y.length-1;B++)if(0<y[B][0]&&0>y[B+1][0])return B;return null}var t=h.geometry,v=t.coordinates;h=h.id;var w=[],A,z;h="RUS"===h||"FJI"===h?function(y){if(null===q(y))var B=y;else for(B=Array(y.length),z=0;z<y.length;z++)B[z]=[0>y[z][0]?y[z][0]+360:y[z][0],y[z][1]];w.push(c.tester(B))}:"ATA"===h?function(y){var B=
q(y);if(null===B)return w.push(c.tester(y));var C=Array(y.length+1),u=0;for(z=0;z<y.length;z++)z>B?C[u++]=[y[z][0]+360,y[z][1]]:z===B?(C[u++]=y[z],C[u++]=[y[z][0],-90]):C[u++]=y[z];y=c.tester(C);y.pts.pop();w.push(y)}:function(y){w.push(c.tester(y))};switch(t.type){case "MultiPolygon":for(t=0;t<v.length;t++)for(A=0;A<v[t].length;A++)h(v[t][A]);break;case "Polygon":for(t=0;t<v.length;t++)h(v[t])}return w},getTraceGeojson:r,extractTraceFeature:function(h){function q(C){var u=m(C,t.featureidkey||"id").get(),
F=w[u];if(F){var H=C.geometry;if("Polygon"===H.type||"MultiPolygon"===H.type){H={type:"Feature",id:u,geometry:H,properties:{}};var J=H.properties,I=H.geometry;if("MultiPolygon"===I.type){I=I.coordinates;for(var M=0,E=0;E<I.length;E++){var L={type:"Polygon",coordinates:I[E]},P=k.default(L);if(P>M){M=P;var N=L}}}else N=I;N=a.default(N).geometry.coordinates;J.ct=N;F.fIn=C;F.fOut=H;A.push(H)}else f.log(["Location",F.loc,"does not have a valid GeoJSON geometry. Traces with locationmode *geojson-id* only support *Polygon* and *MultiPolygon* geometries."].join(" "))}delete w[u]}
var t=h[0].trace,v=r(t);if(!v)return!1;var w={},A=[],z;for(z=0;z<t._length;z++){var y=h[z];if(y.loc||0===y.loc)w[y.loc]=y}switch(v.type){case "FeatureCollection":h=v.features;for(z=0;z<h.length;z++)q(h[z]);break;case "Feature":q(v);break;default:return f.warn(["Invalid GeoJSON type",(v.type||"none")+".","Traces with locationmode *geojson-id* only support *FeatureCollection* and *Feature* types."].join(" ")),!1}for(var B in w)f.log(["Location *"+B+"*","does not have a matching feature with id-key",
"*"+t.featureidkey+"*."].join(" "));return A},fetchTraceGeoData:function(h){function q(y){return new Promise(function(B,C){n.json(y,function(u,F){if(u)return delete v[y],C(Error(404===u.status?'GeoJSON at URL "'+y+'" does not exist.':"Unexpected error while fetching from "+y));v[y]=F;return B(F)})})}function t(y){return new Promise(function(B,C){var u=0,F=setInterval(function(){if(v[y]&&"pending"!==v[y])return clearInterval(F),B(v[y]);if(100<u)return clearInterval(F),C("Unexpected error while fetching from "+
y);u++},50)})}for(var v=window.PlotlyGeoAssets||{},w=[],A=0;A<h.length;A++){var z=h[A][0].trace.geojson;"string"===typeof z&&(v[z]?"pending"===v[z]&&w.push(t(z)):(v[z]="pending",w.push(q(z))))}return w},computeBbox:function(h){return e.default(h)}}},{"./identity":747,"./is_plain_object":750,"./loggers":753,"./nested_property":757,"./polygon":761,"@turf/area":59,"@turf/bbox":60,"@turf/centroid":61,"country-regex":139,d3:169}],743:[function(b,D,G){var r=b("../constants/numerical").BADNUM;G.calcTraceToLineCoords=
function(n){for(var p=n[0].trace.connectgaps,k=[],a=[],e=0;e<n.length;e++){var f=n[e].lonlat;f[0]!==r?a.push(f):!p&&0<a.length&&(k.push(a),a=[])}0<a.length&&k.push(a);return k};G.makeLine=function(n){return 1===n.length?{type:"LineString",coordinates:n[0]}:{type:"MultiLineString",coordinates:n}};G.makePolygon=function(n){if(1===n.length)return{type:"Polygon",coordinates:n};for(var p=Array(n.length),k=0;k<n.length;k++)p[k]=[n[k]];return{type:"MultiPolygon",coordinates:p}};G.makeBlank=function(){return{type:"Point",
coordinates:[]}}},{"../constants/numerical":724}],744:[function(b,D,G){function r(f,l,m,c,d,g,h,q){m-=f;var t=d-f;d=h-d;c-=l;h=g-l;q-=g;g=m*q-d*c;if(0===g)return null;q=(t*q-d*h)/g;t=(t*c-m*h)/g;return 0>t||1<t||0>q||1<q?null:{x:f+m*q,y:l+c*q}}function n(f,l,m,c,d){var g=c*f+d*l;if(0>g)return c*c+d*d;if(g>m)return m=c-f,l=d-l,m*m+l*l;l=c*l-d*f;return l*l/m}var p=b("./mod").mod;G.segmentsIntersect=r;G.segmentDistance=function(f,l,m,c,d,g,h,q){if(r(f,l,m,c,d,g,h,q))return 0;var t=m-f,v=c-l,w=h-d,A=
q-g,z=t*t+v*v,y=w*w+A*A;f=Math.min(n(t,v,z,d-f,g-l),n(t,v,z,h-f,q-l),n(w,A,y,f-d,l-g),n(w,A,y,m-d,c-g));return Math.sqrt(f)};var k,a,e;G.getTextLocation=function(f,l,m,c){if(f!==a||c!==e)k={},a=f,e=c;if(k[m])return k[m];var d=f.getPointAtLength(p(m-c/2,l));c=f.getPointAtLength(p(m+c/2,l));var g=Math.atan((c.y-d.y)/(c.x-d.x));f=f.getPointAtLength(p(m,l));d={x:(4*f.x+d.x+c.x)/6,y:(4*f.y+d.y+c.y)/6,theta:g};return k[m]=d};G.clearLocationCache=function(){a=null};G.getVisibleSegment=function(f,l,m){function c(y){var B=
f.getPointAtLength(y);0===y?w=B:y===t&&(A=B);y=B.x<d?d-B.x:B.x>g?B.x-g:0;B=B.y<h?h-B.y:B.y>q?B.y-q:0;return Math.sqrt(y*y+B*B)}var d=l.left,g=l.right,h=l.top,q=l.bottom;l=0;for(var t=f.getTotalLength(),v=t,w,A,z=c(l);z;){l+=z+m;if(l>v)return;z=c(l)}for(z=c(v);z;){v-=z+m;if(l>v)return;z=c(v)}return{min:l,max:v,len:v-l,total:t,isClosed:0===l&&v===t&&.1>Math.abs(w.x-A.x)&&.1>Math.abs(w.y-A.y)}};G.findPointOnPath=function(f,l,m,c){c=c||{};var d=c.pathLength||f.getTotalLength(),g=c.tolerance||.001;c=c.iterationLimit||
30;for(var h=f.getPointAtLength(0)[m]>f.getPointAtLength(d)[m]?-1:1,q=0,t=0,v,w,A;q<c&&!(v=(t+d)/2,w=f.getPointAtLength(v),A=w[m]-l,Math.abs(A)<g);)0<h*A?d=v:t=v,q++;return w}},{"./mod":756}],745:[function(b,D,G){function r(c,d){c[3]*=d;return c}function n(c){if(k(c))return m;c=e(c);return c.length?c:m}function p(c){return k(c)?c:1}var k=b("fast-isnumeric"),a=b("tinycolor2"),e=b("color-normalize"),f=b("../components/colorscale");G=b("../components/color/attributes").defaultLine;var l=b("./array").isArrayOrTypedArray,
m=e(G);D.exports={formatColor:function(c,d,g){var h=c.color,q=l(h),t=l(d),v=[];var w=void 0!==f.extractOpts(c).colorscale?f.makeColorScaleFuncFromTrace(c):n;c=q?function(y,B){return void 0===y[B]?m:e(w(y[B]))}:n;var A=t?function(y,B){return void 0===y[B]?1:p(y[B])}:p;if(q||t)for(var z=0;z<g;z++)q=c(h,z),t=A(d,z),v[z]=r(q,t);else v=r(e(h),d);return v},parseColorScale:function(c,d){void 0===d&&(d=1);c=f.extractOpts(c);return(c.reversescale?f.flipScale(c.colorscale):c.colorscale).map(function(g){var h=
g[0];g=a(g[1]).toRgb();return{index:h,rgb:[g.r,g.g,g.b,d]}})}}},{"../components/color/attributes":614,"../components/colorscale":627,"./array":731,"color-normalize":125,"fast-isnumeric":241,tinycolor2:548}],746:[function(b,D,G){function r(n){return[n]}b=b("./identity");D.exports={keyFun:function(n){return n.key},repeat:r,descend:b,wrap:r,unwrap:function(n){return n[0]}}},{"./identity":747}],747:[function(b,D,G){D.exports=function(r){return r}},{}],748:[function(b,D,G){D.exports=function(r,n){if(!n)return r;
var p=1/Math.abs(n);p=1<p?(p*r+p*n)/p:r+n;var k=String(p).length;16<k&&k>=String(r).length+String(n).length&&(r=parseFloat(p).toPrecision(12),-1===r.indexOf("e+")&&(p=+r));return p}},{}],749:[function(b,D,G){function r(z){var y={},B;for(B in z)for(var C=z[B],u=0;u<C.length;u++)y[C[u]]=+B;return y}function n(z,y,B){var C=this,u=arguments;y||(y={});var F={};return z.replace(l.TEMPLATE_STRING_REGEX,function(H,J,I){var M,E;for(E=3;E<u.length;E++)if(M=u[E]){if(M.hasOwnProperty(J)){var L=M[J];break}q.test(J)||
(L=F[J]||l.nestedProperty(M,J).get())&&(F[J]=L);if(void 0!==L)break}if(void 0===L&&C)return C.count<C.max&&l.warn("Variable '"+J+"' in "+C.name+" could not be found!"),C.count===C.max&&l.warn("Too many "+C.name+" warnings - additional warnings will be suppressed"),C.count++,H;I?(":"===I[0]&&(H=B?B.numberFormat:p.format,L=H(I.replace(w,""))(L)),"|"===I[0]&&(H=B?B.timeFormat:k,L=l.dateTime2ms(L),L=l.formatDate(L,I.replace(w,""),!1,H))):y.hasOwnProperty(J+"Label")&&(L=y[J+"Label"]);return L})}var p=
b("d3"),k=b("d3-time-format").utcFormat,a=b("fast-isnumeric");G=b("../constants/numerical");var e=G.FP_SAFE,f=G.BADNUM,l=D.exports={};l.nestedProperty=b("./nested_property");l.keyedContainer=b("./keyed_container");l.relativeAttr=b("./relative_attr");l.isPlainObject=b("./is_plain_object");l.toLogRange=b("./to_log_range");l.relinkPrivateKeys=b("./relink_private");D=b("./array");l.isTypedArray=D.isTypedArray;l.isArrayOrTypedArray=D.isArrayOrTypedArray;l.isArray1D=D.isArray1D;l.ensureArray=D.ensureArray;
l.concat=D.concat;l.maxRowLength=D.maxRowLength;l.minRowLength=D.minRowLength;D=b("./mod");l.mod=D.mod;l.modHalf=D.modHalf;D=b("./coerce");l.valObjectMeta=D.valObjectMeta;l.coerce=D.coerce;l.coerce2=D.coerce2;l.coerceFont=D.coerceFont;l.coerceHoverinfo=D.coerceHoverinfo;l.coerceSelectionMarkerOpacity=D.coerceSelectionMarkerOpacity;l.validate=D.validate;D=b("./dates");l.dateTime2ms=D.dateTime2ms;l.isDateTime=D.isDateTime;l.ms2DateTime=D.ms2DateTime;l.ms2DateTimeLocal=D.ms2DateTimeLocal;l.cleanDate=
D.cleanDate;l.isJSDate=D.isJSDate;l.formatDate=D.formatDate;l.incrementMonth=D.incrementMonth;l.dateTick0=D.dateTick0;l.dfltRange=D.dfltRange;l.findExactDates=D.findExactDates;l.MIN_MS=D.MIN_MS;l.MAX_MS=D.MAX_MS;D=b("./search");l.findBin=D.findBin;l.sorterAsc=D.sorterAsc;l.sorterDes=D.sorterDes;l.distinctVals=D.distinctVals;l.roundUp=D.roundUp;l.sort=D.sort;l.findIndexOfMin=D.findIndexOfMin;D=b("./stats");l.aggNums=D.aggNums;l.len=D.len;l.mean=D.mean;l.median=D.median;l.midRange=D.midRange;l.variance=
D.variance;l.stdev=D.stdev;l.interp=D.interp;D=b("./matrix");l.init2dArray=D.init2dArray;l.transposeRagged=D.transposeRagged;l.dot=D.dot;l.translationMatrix=D.translationMatrix;l.rotationMatrix=D.rotationMatrix;l.rotationXYMatrix=D.rotationXYMatrix;l.apply2DTransform=D.apply2DTransform;l.apply2DTransform2=D.apply2DTransform2;D=b("./angles");l.deg2rad=D.deg2rad;l.rad2deg=D.rad2deg;l.angleDelta=D.angleDelta;l.angleDist=D.angleDist;l.isFullCircle=D.isFullCircle;l.isAngleInsideSector=D.isAngleInsideSector;
l.isPtInsideSector=D.isPtInsideSector;l.pathArc=D.pathArc;l.pathSector=D.pathSector;l.pathAnnulus=D.pathAnnulus;D=b("./anchor_utils");l.isLeftAnchor=D.isLeftAnchor;l.isCenterAnchor=D.isCenterAnchor;l.isRightAnchor=D.isRightAnchor;l.isTopAnchor=D.isTopAnchor;l.isMiddleAnchor=D.isMiddleAnchor;l.isBottomAnchor=D.isBottomAnchor;D=b("./geometry2d");l.segmentsIntersect=D.segmentsIntersect;l.segmentDistance=D.segmentDistance;l.getTextLocation=D.getTextLocation;l.clearLocationCache=D.clearLocationCache;l.getVisibleSegment=
D.getVisibleSegment;l.findPointOnPath=D.findPointOnPath;D=b("./extend");l.extendFlat=D.extendFlat;l.extendDeep=D.extendDeep;l.extendDeepAll=D.extendDeepAll;l.extendDeepNoArrays=D.extendDeepNoArrays;D=b("./loggers");l.log=D.log;l.warn=D.warn;l.error=D.error;D=b("./regex");l.counterRegex=D.counter;D=b("./throttle");l.throttle=D.throttle;l.throttleDone=D.done;l.clearThrottle=D.clear;D=b("./dom");l.getGraphDiv=D.getGraphDiv;l.isPlotDiv=D.isPlotDiv;l.removeElement=D.removeElement;l.addStyleRule=D.addStyleRule;
l.addRelatedStyleRule=D.addRelatedStyleRule;l.deleteRelatedStyleRule=D.deleteRelatedStyleRule;l.clearResponsive=b("./clear_responsive");l.makeTraceGroups=b("./make_trace_groups");l._=b("./localize");l.notifier=b("./notifier");l.filterUnique=b("./filter_unique");l.filterVisible=b("./filter_visible");l.pushUnique=b("./push_unique");l.increment=b("./increment");l.cleanNumber=b("./clean_number");l.ensureNumber=function(z){if(!a(z))return f;z=Number(z);return z<-e||z>e?f:a(z)?Number(z):f};l.isIndex=function(z,
y){return void 0!==y&&z>=y?!1:a(z)&&0<=z&&0===z%1};l.noop=b("./noop");l.identity=b("./identity");l.repeat=function(z,y){for(var B=Array(y),C=0;C<y;C++)B[C]=z;return B};l.swapAttrs=function(z,y,B,C){B||(B="x");C||(C="y");for(var u=0;u<y.length;u++){var F=y[u],H=l.nestedProperty(z,F.replace("?",B));F=l.nestedProperty(z,F.replace("?",C));var J=H.get();H.set(F.get());F.set(J)}};l.raiseToTop=function(z){z.parentNode.appendChild(z)};l.cancelTransition=function(z){return z.transition().duration(0)};l.constrain=
function(z,y,B){return y>B?Math.max(B,Math.min(y,z)):Math.max(y,Math.min(B,z))};l.bBoxIntersect=function(z,y,B){B=B||0;return z.left<=y.right+B&&y.left<=z.right+B&&z.top<=y.bottom+B&&y.top<=z.bottom+B};l.simpleMap=function(z,y,B,C,u){for(var F=z.length,H=Array(F),J=0;J<F;J++)H[J]=y(z[J],B,C,u);return H};l.randstr=function F(y,B,C,u){C||(C=16);void 0===B&&(B=24);if(0>=B)return"0";var H=Math.log(Math.pow(2,B))/Math.log(C),J="",I;for(I=2;Infinity===H;I*=2)H=Math.log(Math.pow(2,B/I))/Math.log(C)*I;var M=
H-Math.floor(H);for(I=0;I<Math.floor(H);I++){var E=Math.floor(Math.random()*C).toString(C);J=E+J}M&&(H=Math.pow(C,M),E=Math.floor(Math.random()*H).toString(C),J=E+J);H=parseInt(J,C);return y&&y[J]||Infinity!==H&&H>=Math.pow(2,B)?10<u?(l.warn("randstr failed uniqueness"),J):F(y,B,C,(u||0)+1):J};l.OptionControl=function(y,B){y||(y={});B||(B="opt");var C={optionList:[],_newoption:function(u){u[B]=y;C[u.name]=u;C.optionList.push(u)}};C["_"+B]=y;return C};l.smooth=function(y,B){B=Math.round(B)||0;if(2>
B)return y;var C=y.length,u=2*C,F=2*B-1,H=Array(F),J=Array(C),I,M,E;for(I=0;I<F;I++)H[I]=(1-Math.cos(Math.PI*(I+1)/B))/(2*B);for(I=0;I<C;I++){for(M=E=0;M<F;M++){var L=I+M+1-B;L<-C?L-=u*Math.round(L/u):L>=u&&(L-=u*Math.floor(L/u));0>L?L=-1-L:L>=C&&(L=u-1-L);E+=y[L]*H[M]}J[I]=E}return J};l.syncOrAsync=function(y,B,C){function u(){return l.syncOrAsync(y,B,C)}for(var F;y.length;)if(F=y.splice(0,1)[0],(F=F(B))&&F.then)return F.then(u).then(void 0,l.promiseError);return C&&C(B)};l.stripTrailingSlash=function(y){return"/"===
y.substr(-1)?y.substr(0,y.length-1):y};l.noneOrAll=function(y,B,C){if(y){var u=!1,F=!0,H;for(H=0;H<C.length;H++){var J=y[C[H]];void 0!==J&&null!==J?u=!0:F=!1}if(u&&!F)for(H=0;H<C.length;H++)y[C[H]]=B[C[H]]}};l.mergeArray=function(y,B,C,u){var F="function"===typeof u;if(l.isArrayOrTypedArray(y))for(var H=Math.min(y.length,B.length),J=0;J<H;J++){var I=y[J];B[J][C]=F?u(I):I}};l.mergeArrayCastPositive=function(y,B,C){return l.mergeArray(y,B,C,function(u){u=+u;return isFinite(u)?0<u?u:0:0})};l.fillArray=
function(y,B,C,u){u=u||l.identity;if(l.isArrayOrTypedArray(y))for(var F=0;F<B.length;F++)B[F][C]=u(y[F])};l.castOption=function(y,B,C,u){u=u||l.identity;y=l.nestedProperty(y,C).get();return l.isArrayOrTypedArray(y)?Array.isArray(B)&&l.isArrayOrTypedArray(y[B[0]])?u(y[B[0]][B[1]]):u(y[B]):y};l.extractOption=function(y,B,C,u){if(C in y)return y[C];y=l.nestedProperty(B,u).get();if(!Array.isArray(y))return y};l.tagSelected=function(y,B,C){var u=B.selectedpoints;B=B._indexToPoints;var F;B&&(F=r(B));for(B=
0;B<u.length;B++){var H=u[B];if(l.isIndex(H)||l.isArrayOrTypedArray(H)&&l.isIndex(H[0])&&l.isIndex(H[1]))H=F?F[H]:H,H=C?C[H]:H,void 0!==H&&H<y.length&&(y[H].selected=1)}};l.selIndices2selPoints=function(y){var B=y.selectedpoints;if(y=y._indexToPoints){y=r(y);for(var C=[],u=0;u<B.length;u++){var F=B[u];l.isIndex(F)&&(F=y[F],l.isIndex(F)&&C.push(F))}return C}return B};l.getTargetArray=function(y,B){B=B.target;return"string"===typeof B&&B?(y=l.nestedProperty(y,B).get(),Array.isArray(y)?y:!1):Array.isArray(B)?
B:!1};l.minExtend=function(y,B){var C={};"object"!==typeof B&&(B={});var u=Object.keys(y),F;for(F=0;F<u.length;F++){var H=u[F];var J=y[H];"_"!==H.charAt(0)&&"function"!==typeof J&&("module"===H?C[H]=J:Array.isArray(J)?C[H]="colorscale"===H?J.slice():J.slice(0,3):l.isTypedArray(J)?C[H]=J.subarray(0,3):C[H]=J&&"object"===typeof J?l.minExtend(y[H],B[H]):J)}u=Object.keys(B);for(F=0;F<u.length;F++)H=u[F],J=B[H],"object"===typeof J&&H in C&&"object"===typeof C[H]||(C[H]=J);return C};l.titleCase=function(y){return y.charAt(0).toUpperCase()+
y.substr(1)};l.containsAny=function(y,B){for(var C=0;C<B.length;C++)if(-1!==y.indexOf(B[C]))return!0;return!1};l.isIE=function(){return"undefined"!==typeof window.navigator.msSaveBlob};var m=/MSIE [1-9]\./;l.isIE9orBelow=function(){return l.isIE()&&m.test(window.navigator.userAgent)};var c=/Version\/[\d\.]+.*Safari/;l.isSafari=function(){return c.test(window.navigator.userAgent)};var d=/iPad|iPhone|iPod/;l.isIOS=function(){return d.test(window.navigator.userAgent)};l.isD3Selection=function(y){return y&&
"function"===typeof y.classed};l.ensureSingle=function(y,B,C,u){var F=y.select(B+(C?"."+C:""));if(F.size())return F;y=y.append(B);C&&y.classed(C,!0);u&&y.call(u);return y};l.ensureSingleById=function(y,B,C,u){var F=y.select(B+"#"+C);if(F.size())return F;y=y.append(B).attr("id",C);u&&y.call(u);return y};l.objectFromPath=function(y,B){y=y.split(".");for(var C,u=C={},F=0;F<y.length;F++){var H=y[F],J;(J=y[F].match(/(.*)\[([0-9]+)\]/))?(H=J[1],J=J[2],C=C[H]=[],C[J]=F===y.length-1?B:{},C=C[J]):(C[H]=F===
y.length-1?B:{},C=C[H])}return u};var g=/^([^\[\.]+)\.(.+)?/,h=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;l.expandObjectPaths=function(y){var B,C;if("object"===typeof y&&!Array.isArray(y))for(C in y)if(y.hasOwnProperty(C))if(B=C.match(g)){var u=y[C];var F=B[1];delete y[C];y[F]=l.extendDeepNoArrays(y[F]||{},l.objectFromPath(C,l.expandObjectPaths(u))[F])}else if(B=C.match(h)){u=y[C];F=B[1];var H=parseInt(B[2]);delete y[C];y[F]=y[F]||[];"."===B[3]?(B=B[4],F=y[F][H]=y[F][H]||{},l.extendDeepNoArrays(F,l.objectFromPath(B,
l.expandObjectPaths(u)))):y[F][H]=l.expandObjectPaths(u)}else y[C]=l.expandObjectPaths(y[C]);return y};l.numSeparate=function(y,B,C){C||(C=!1);if("string"!==typeof B||0===B.length)throw Error("Separator string required for formatting!");"number"===typeof y&&(y=String(y));var u=/(\d+)(\d{3})/,F=B.charAt(0);B=B.charAt(1);y=y.split(".");var H=y[0];F=1<y.length?F+y[1]:"";if(B&&(1<y.length||4<H.length||C))for(;u.test(H);)H=H.replace(u,"$1"+B+"$2");return H+F};l.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;
var q=/^\w*$/;l.templateString=function(y,B){var C={};return y.replace(l.TEMPLATE_STRING_REGEX,function(u,F){q.test(F)?u=B[F]:(C[F]=C[F]||l.nestedProperty(B,F).get,u=C[F]());return l.isValidTextValue(u)?u:""})};var t={max:10,count:0,name:"hovertemplate"};l.hovertemplateString=function(){return n.apply(t,arguments)};var v={max:10,count:0,name:"texttemplate"};l.texttemplateString=function(){return n.apply(v,arguments)};var w=/^[:|\|]/;l.subplotSort=function(y,B){for(var C=Math.min(y.length,B.length)+
1,u=0,F=0,H=0;H<C;H++){var J=y.charCodeAt(H)||0,I=B.charCodeAt(H)||0,M=48<=J&&57>=J,E=48<=I&&57>=I;M&&(u=10*u+J-48);E&&(F=10*F+I-48);if(!M||!E){if(u!==F)return u-F;if(J!==I)return J-I}}return F-u};var A=2E9;l.seedPseudoRandom=function(){A=2E9};l.pseudoRandom=function(){var y=A;A=(69069*A+1)%4294967296;return 429496729>Math.abs(A-y)?l.pseudoRandom():A/4294967296};l.fillText=function(y,B,C){var u=Array.isArray(C)?function(H){C.push(H)}:function(H){C.text=H},F=l.extractOption(y,B,"htx","hovertext");
if(l.isValidTextValue(F))return u(F);y=l.extractOption(y,B,"tx","text");if(l.isValidTextValue(y))return u(y)};l.isValidTextValue=function(y){return y||0===y};l.formatPercent=function(y,B){B=B||0;y=(Math.round(100*y*Math.pow(10,B))*Math.pow(.1,B)).toFixed(B)+"%";for(var C=0;C<B;C++)-1!==y.indexOf(".")&&(y=y.replace("0%","%"),y=y.replace(".%","%"));return y};l.isHidden=function(y){y=window.getComputedStyle(y).display;return!y||"none"===y};l.getTextTransform=function(y){var B=y.noCenter,C=y.textX,u=
y.textY,F=y.targetX,H=y.targetY,J=y.anchorX||0,I=y.anchorY||0,M=y.rotate;(y=y.scale)?1<y&&(y=1):y=0;return"translate("+(F-y*(C+J))+","+(H-y*(u+I))+")"+(1>y?"scale("+y+")":"")+(M?"rotate("+M+(B?"":" "+C+" "+u)+")":"")};l.ensureUniformFontSize=function(y,B){var C=l.extendFlat({},B);C.size=Math.max(B.size,y._fullLayout.uniformtext.minsize||0);return C}},{"../constants/numerical":724,"./anchor_utils":729,"./angles":730,"./array":731,"./clean_number":732,"./clear_responsive":734,"./coerce":735,"./dates":736,
"./dom":737,"./extend":739,"./filter_unique":740,"./filter_visible":741,"./geometry2d":744,"./identity":747,"./increment":748,"./is_plain_object":750,"./keyed_container":751,"./localize":752,"./loggers":753,"./make_trace_groups":754,"./matrix":755,"./mod":756,"./nested_property":757,"./noop":758,"./notifier":759,"./push_unique":763,"./regex":765,"./relative_attr":766,"./relink_private":767,"./search":768,"./stats":771,"./throttle":774,"./to_log_range":775,d3:169,"d3-time-format":166,"fast-isnumeric":241}],
750:[function(b,D,G){D.exports=function(r){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(r):"[object Object]"===Object.prototype.toString.call(r)&&Object.getPrototypeOf(r)===Object.prototype}},{}],751:[function(b,D,G){var r=b("./nested_property"),n=/^\w*$/;D.exports=function(p,k,a,e){a=a||"name";e=e||"value";var f,l={};if(k&&k.length){var m=r(p,k);var c=m.get()}else c=p;k=k||"";var d={};if(c)for(f=0;f<c.length;f++)d[c[f][a]]=f;var g=n.test(e),
h={set:function(q,t){var v=null===t?4:0;if(!c){if(!m||4===v)return;c=[];m.set(c)}var w=d[q];if(void 0===w){if(4===v)return;v|=3;w=c.length;d[q]=w}else t!==(g?c[w][e]:r(c[w],e).get())&&(v|=2);var A=c[w]=c[w]||{};A[a]=q;g?A[e]=t:r(A,e).set(t);null!==t&&(v&=-5);l[w]|=v;return h},get:function(q){if(c&&(q=d[q],void 0!==q))return g?c[q][e]:r(c[q],e).get()},rename:function(q,t){var v=d[q];if(void 0===v)return h;l[v]|=1;d[t]=v;delete d[q];c[v][a]=t;return h},remove:function(q){var t=d[q];if(void 0===t)return h;
var v=c[t];if(2<Object.keys(v).length)return l[t]|=2,h.set(q,null);if(g){for(f=t;f<c.length;f++)l[f]|=3;for(f=t;f<c.length;f++)d[c[f][a]]--;c.splice(t,1);delete d[q]}else r(v,e).set(null),l[t]|=6;return h},constructUpdate:function(){for(var q,t,v={},w=Object.keys(l),A=0;A<w.length;A++)t=w[A],q=k+"["+t+"]",c[t]?(l[t]&1&&(v[q+"."+a]=c[t][a]),l[t]&2&&(v[q+"."+e]=g?l[t]&4?null:c[t][e]:l[t]&4?null:r(c[t],e).get())):v[q]=null;return v}};return h}},{"./nested_property":757}],752:[function(b,D,G){var r=b("../registry");
D.exports=function(n,p){for(var k=n._context.locale,a=0;2>a;a++){for(var e=n._context.locales,f=0;2>f;f++){if(e=(e[k]||{}).dictionary)if(e=e[p])return e;e=r.localeRegistry}f=k.split("-")[0];if(f===k)break;k=f}return p}},{"../registry":880}],753:[function(b,D,G){function r(k,a){if(k&&k.apply)try{k.apply(console,a);return}catch(f){}for(var e=0;e<a.length;e++)try{k(a[e])}catch(f){console.log(a[e])}}var n=b("../plot_api/plot_config").dfltConfig,p=b("./notifier");b=D.exports={};b.log=function(){var k;
if(1<n.logging){var a=["LOG:"];for(k=0;k<arguments.length;k++)a.push(arguments[k]);r(console.trace||console.log,a)}if(1<n.notifyOnLogging){a=[];for(k=0;k<arguments.length;k++)a.push(arguments[k]);p(a.join("\x3cbr\x3e"),"long")}};b.warn=function(){var k;if(0<n.logging){var a=["WARN:"];for(k=0;k<arguments.length;k++)a.push(arguments[k]);r(console.trace||console.log,a)}if(0<n.notifyOnLogging){a=[];for(k=0;k<arguments.length;k++)a.push(arguments[k]);p(a.join("\x3cbr\x3e"),"stick")}};b.error=function(){var k;
if(0<n.logging){var a=["ERROR:"];for(k=0;k<arguments.length;k++)a.push(arguments[k]);r(console.error,a)}if(0<n.notifyOnLogging){a=[];for(k=0;k<arguments.length;k++)a.push(arguments[k]);p(a.join("\x3cbr\x3e"),"stick")}}},{"../plot_api/plot_config":785,"./notifier":759}],754:[function(b,D,G){var r=b("d3");D.exports=function(n,p,k){p=n.selectAll("g."+k.replace(/\s/g,".")).data(p,function(e){return e[0].trace.uid});p.exit().remove();p.enter().append("g").attr("class",k);p.order();var a=n.classed("rangeplot")?
"nodeRangePlot3":"node3";p.each(function(e){e[0][a]=r.select(this)});return p}},{d3:169}],755:[function(b,D,G){G.init2dArray=function(r,n){for(var p=Array(r),k=0;k<r;k++)p[k]=Array(n);return p};G.transposeRagged=function(r){var n=0,p=r.length,k,a;for(k=0;k<p;k++)n=Math.max(n,r[k].length);var e=Array(n);for(k=0;k<n;k++)for(e[k]=Array(p),a=0;a<p;a++)e[k][a]=r[a][k];return e};G.dot=function(r,n){if(!r.length||!n.length||r.length!==n.length)return null;var p=r.length,k;if(r[0].length){var a=Array(p);
for(k=0;k<p;k++)a[k]=G.dot(r[k],n)}else if(n[0].length)for(n=G.transposeRagged(n),a=Array(n.length),k=0;k<n.length;k++)a[k]=G.dot(r,n[k]);else for(k=a=0;k<p;k++)a+=r[k]*n[k];return a};G.translationMatrix=function(r,n){return[[1,0,r],[0,1,n],[0,0,1]]};G.rotationMatrix=function(r){r=r*Math.PI/180;return[[Math.cos(r),-Math.sin(r),0],[Math.sin(r),Math.cos(r),0],[0,0,1]]};G.rotationXYMatrix=function(r,n,p){return G.dot(G.dot(G.translationMatrix(n,p),G.rotationMatrix(r)),G.translationMatrix(-n,-p))};G.apply2DTransform=
function(r){return function(){var n=arguments;3===n.length&&(n=n[0]);n=1===arguments.length?n[0]:[n[0],n[1]];return G.dot(r,[n[0],n[1],1]).slice(0,2)}};G.apply2DTransform2=function(r){var n=G.apply2DTransform(r);return function(p){return n(p.slice(0,2)).concat(n(p.slice(2,4)))}}},{}],756:[function(b,D,G){D.exports={mod:function(r,n){r%=n;return 0>r?r+n:r},modHalf:function(r,n){return Math.abs(r)>n/2?r-Math.round(r/n)*n:r}}},{}],757:[function(b,D,G){function r(m,c){return function(){var d=m,g,h;for(g=
0;g<c.length-1;g++){var q=c[g];if(-1===q){q=!0;var t=[];for(h=0;h<d.length;h++)t[h]=r(d[h],c.slice(g+1))(),t[h]!==t[0]&&(q=!1);return q?t[0]:t}if("number"===typeof q&&!f(d))return;d=d[q];if("object"!==typeof d||null===d)return}if("object"===typeof d&&null!==d&&(t=d[c[g]],null!==t))return t}}function n(m,c){return void 0===m||null===m&&!c.match(l)}function p(m,c,d){return function(g){var h=m,q="",t=[[m,q]],v=n(g,d),w;for(w=0;w<c.length-1;w++){var A=c[w];if("number"===typeof A&&!f(h))throw"array index but container is not an array";
if(-1===A){v=h;q=c.slice(w+1);A=g;var z=d,y=f(A),B=!0,C=A,u=z.replace("-1",0),F=y?!1:n(A,u),H=q[0];for(t=0;t<v.length;t++)u=z.replace("-1",t),y&&(C=A[t%A.length],F=n(C,u)),F&&(B=!1),k(v,t,H,F)&&p(v[t],q,z.replace("-1",t))(C);if(v=!B)break;else return}if(!k(h,A,c[w+1],v))break;h=h[A];if("object"!==typeof h||null===h)throw"container is not an object";z=A;e(A)?z="["+A+"]":q&&(z="."+A);q+=z;t.push([h,q])}if(v){if(w===c.length-1&&(delete h[c[w]],Array.isArray(h)&&+c[w]===h.length-1))for(;h.length&&void 0===
h[h.length-1];)h.pop()}else h[c[w]]=g}}function k(m,c,d,g){if(void 0===m[c]){if(g)return!1;m[c]="number"===typeof d?[]:{}}return!0}function a(m,c,d){return{set:function(){throw"bad container";},get:function(){},astr:c,parts:d,obj:m}}var e=b("fast-isnumeric"),f=b("./array").isArrayOrTypedArray;D.exports=function(m,c){if(e(c))c=String(c);else if("string"!==typeof c||"[-1]"===c.substr(c.length-4))throw"bad property string";for(var d=0,g=c.split("."),h,q;d<g.length;){if(h=String(g[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(h[1])g[d]=
h[1];else if(0===d)g.splice(0,1);else throw"bad property string";h=h[2].substr(1,h[2].length-2).split("][");for(q=0;q<h.length;q++)d++,g.splice(d,0,Number(h[q]))}d++}return"object"!==typeof m?a(m,c,g):{set:p(m,g,c),get:r(m,g),astr:c,parts:g,obj:m}};var l=/(^|\.)args\[/},{"./array":731,"fast-isnumeric":241}],758:[function(b,D,G){D.exports=function(){}},{}],759:[function(b,D,G){var r=b("d3"),n=b("fast-isnumeric"),p=[];D.exports=function(k,a){function e(l){l.duration(700).style("opacity",0).each("end",
function(m){m=p.indexOf(m);-1!==m&&p.splice(m,1);r.select(this).remove()})}if(-1===p.indexOf(k)){p.push(k);var f=1E3;n(a)?f=a:"long"===a&&(f=3E3);k=r.select("body").selectAll(".plotly-notifier").data([0]);k.enter().append("div").classed("plotly-notifier",!0);k.selectAll(".notifier-note").data(p).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(l){var m=r.select(this);m.append("button").classed("notifier-close",!0).html("\x26times;").on("click",function(){m.transition().call(e)});
var c=m.append("p");l=l.split(/<br\s*\/?>/g);for(var d=0;d<l.length;d++)d&&c.append("br"),c.append("span").text(l[d]);"stick"===a?m.transition().duration(350).style("opacity",1):m.transition().duration(700).style("opacity",1).transition().delay(f).call(e)})}}},{d3:169,"fast-isnumeric":241}],760:[function(b,D,G){var r=b("./setcursor");D.exports=function(n,p){var k=n.attr("data-savedcursor");if(p){if(!k){k=(n.attr("class")||"").split(" ");for(var a=0;a<k.length;a++){var e=k[a];0===e.indexOf("cursor-")&&
n.attr("data-savedcursor",e.substr(7)).classed(e,!1)}n.attr("data-savedcursor")||n.attr("data-savedcursor","!!")}r(n,p)}else k&&(n.attr("data-savedcursor",null),"!!"===k?r(n):r(n,k))}},{"./setcursor":769}],761:[function(b,D,G){var r=b("./matrix").dot,n=b("../constants/numerical").BADNUM,p=D.exports={};p.tester=function(k){function a(v,w){var A=v[0],z=v[1];return A===n||A<l||A>m||z===n||z<c||z>d||w&&h(v)?!1:!0}function e(v,w){var A=v[0];v=v[1];if(A===n||A<l||A>m||v===n||v<c||v>d)return!1;var z=f.length,
y=f[0][0],B=f[0][1],C=0,u;for(u=1;u<z;u++){var F=y;var H=B;y=f[u][0];B=f[u][1];var J=Math.min(F,y);if(!(A<J||A>Math.max(F,y)||v>Math.max(H,B)))if(v<Math.min(H,B))A!==J&&C++;else{F=y===F?v:H+(A-F)*(B-H)/(y-F);if(v===F)return 1===u&&w?!1:!0;v<=F&&A!==J&&C++}}return 1===C%2}var f=k.slice(),l=f[0][0],m=l,c=f[0][1],d=c;f.push(f[0]);for(k=1;k<f.length;k++)l=Math.min(l,f[k][0]),m=Math.max(m,f[k][0]),c=Math.min(c,f[k][1]),d=Math.max(d,f[k][1]);var g=!1;if(5===f.length)if(f[0][0]===f[1][0]){if(f[2][0]===f[3][0]&&
f[0][1]===f[3][1]&&f[1][1]===f[2][1]){g=!0;var h=function(v){return v[0]===f[0][0]}}}else f[0][1]===f[1][1]&&f[2][1]===f[3][1]&&f[0][0]===f[3][0]&&f[1][0]===f[2][0]&&(g=!0,h=function(v){return v[1]===f[0][1]});var q=!0,t=f[0];for(k=1;k<f.length;k++)if(t[0]!==f[k][0]||t[1]!==f[k][1]){q=!1;break}return{xmin:l,xmax:m,ymin:c,ymax:d,pts:f,contains:g?a:e,isRect:g,degenerate:q}};p.isSegmentBent=function(k,a,e,f){var l=k[a],m=[k[e][0]-l[0],k[e][1]-l[1]],c=r(m,m),d=Math.sqrt(c);d=[-m[1]/d,m[0]/d];for(a+=1;a<
e;a++){var g=[k[a][0]-l[0],k[a][1]-l[1]];var h=r(g,m);if(0>h||h>c||Math.abs(r(g,d))>f)return!0}return!1};p.filter=function(k,a){function e(d){k.push(d);d=f.length;var g=l;f.splice(m+1);for(var h=g+1;h<k.length;h++)if(h===k.length-1||p.isSegmentBent(k,g,h+1,a))f.push(k[h]),f.length<d-2&&(l=h,m=f.length-1),g=h}var f=[k[0]],l=0,m=0;if(1<k.length){var c=k.pop();e(c)}return{addPt:e,raw:k,filtered:f}}},{"../constants/numerical":724,"./matrix":755}],762:[function(b,D,G){(function(r){var n=b("./show_no_webgl_msg"),
p=b("regl");D.exports=function(k,a){var e=k._fullLayout,f=!0;e._glcanvas.each(function(l){if(!l.regl&&(!l.pick||e._has("parcoords"))){try{l.regl=p({canvas:this,attributes:{antialias:!l.pick,preserveDrawingBuffer:!0},pixelRatio:k._context.plotGlPixelRatio||r.devicePixelRatio,extensions:a||[]})}catch(m){f=!1}l.regl||(f=!1);f&&this.addEventListener("webglcontextlost",function(m){k&&k.emit&&k.emit("plotly_webglcontextlost",{event:m,layer:l.key})},!1)}});f||n({container:e._glcontainer.node()});return f}}).call(this,
"undefined"!==typeof lb?lb:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./show_no_webgl_msg":770,regl:512}],763:[function(b,D,G){D.exports=function(r,n){if(n instanceof RegExp){for(var p=n.toString(),k=0;k<r.length;k++)if(r[k]instanceof RegExp&&r[k].toString()===p)return r;r.push(n)}else!n&&0!==n||-1!==r.indexOf(n)||r.push(n);return r}},{}],764:[function(b,D,G){var r=b("../lib"),n=b("../plot_api/plot_config").dfltConfig,p={add:function(k,a,e,f,l){k.undoQueue=k.undoQueue||
{index:0,queue:[],sequence:!1};var m=k.undoQueue.index;if(k.autoplay)k.undoQueue.inSequence||(k.autoplay=!1);else{if(!k.undoQueue.sequence||k.undoQueue.beginSequence){var c={undo:{calls:[],args:[]},redo:{calls:[],args:[]}};k.undoQueue.queue.splice(m,k.undoQueue.queue.length-m,c);k.undoQueue.index+=1}else c=k.undoQueue.queue[m-1];k.undoQueue.beginSequence=!1;c&&(c.undo.calls.unshift(a),c.undo.args.unshift(e),c.redo.calls.push(f),c.redo.args.push(l));k.undoQueue.queue.length>n.queueLength&&(k.undoQueue.queue.shift(),
k.undoQueue.index--)}},startSequence:function(k){k.undoQueue=k.undoQueue||{index:0,queue:[],sequence:!1};k.undoQueue.sequence=!0;k.undoQueue.beginSequence=!0},stopSequence:function(k){k.undoQueue=k.undoQueue||{index:0,queue:[],sequence:!1};k.undoQueue.sequence=!1;k.undoQueue.beginSequence=!1},undo:function(k){var a;if(k.framework&&k.framework.isPolar)k.framework.undo();else if(!(void 0===k.undoQueue||isNaN(k.undoQueue.index)||0>=k.undoQueue.index)){k.undoQueue.index--;var e=k.undoQueue.queue[k.undoQueue.index];
k.undoQueue.inSequence=!0;for(a=0;a<e.undo.calls.length;a++)p.plotDo(k,e.undo.calls[a],e.undo.args[a]);k.undoQueue.inSequence=!1;k.autoplay=!1}},redo:function(k){var a;if(k.framework&&k.framework.isPolar)k.framework.redo();else if(!(void 0===k.undoQueue||isNaN(k.undoQueue.index)||k.undoQueue.index>=k.undoQueue.queue.length)){var e=k.undoQueue.queue[k.undoQueue.index];k.undoQueue.inSequence=!0;for(a=0;a<e.redo.calls.length;a++)p.plotDo(k,e.redo.calls[a],e.redo.args[a]);k.undoQueue.inSequence=!1;k.autoplay=
!1;k.undoQueue.index++}},plotDo:function(k,a,e){k.autoplay=!0;for(var f=[],l,m=0;m<e.length;m++)l=e[m],f[m]=l===k?l:"object"===typeof l?Array.isArray(l)?r.extendDeep([],l):r.extendDeepAll({},l):l;a.apply(null,f)}};D.exports=p},{"../lib":749,"../plot_api/plot_config":785}],765:[function(b,D,G){G.counter=function(r,n,p,k){n=(n||"")+(p?"":"$");k=!1===k?"":"^";return"xy"===r?new RegExp(k+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp(k+r+"([2-9]|[1-9][0-9]+)?"+n)}},{}],766:[function(b,D,G){var r=
/^(.*)(\.[^\.\[\]]+|\[\d\])$/,n=/^[^\.\[\]]+$/;D.exports=function(p,k){for(;k;){var a=p.match(r);if(a)p=a[1];else if(p.match(n))p="";else throw Error("bad relativeAttr call:"+[p,k]);if("^"===k.charAt(0))k=k.slice(1);else break}return p&&"["!==k.charAt(0)?p+"."+k:p+k}},{}],767:[function(b,D,G){var r=b("./array").isArrayOrTypedArray,n=b("./is_plain_object");D.exports=function e(k,a){for(var f in a){var l=a[f],m=k[f];if(m!==l)if("_"===f.charAt(0)||"function"===typeof l)f in k||(k[f]=l);else if(r(l)&&
r(m)&&n(l[0])){if("customdata"!==f&&"ids"!==f)for(var c=Math.min(l.length,m.length),d=0;d<c;d++)m[d]!==l[d]&&n(l[d])&&n(m[d])&&e(m[d],l[d])}else n(l)&&n(m)&&(e(m,l),Object.keys(m).length||delete k[f])}}},{"./array":731,"./is_plain_object":750}],768:[function(b,D,G){function r(m,c){return m<c}function n(m,c){return m<=c}function p(m,c){return m>c}function k(m,c){return m>=c}var a=b("fast-isnumeric"),e=b("./loggers"),f=b("./identity"),l=b("../constants/numerical").BADNUM;G.findBin=function(m,c,d){if(a(c.start))return d?
Math.ceil((m-c.start)/c.size-1E-9)-1:Math.floor((m-c.start)/c.size+1E-9);var g=0,h=c.length,q=0,t=1<h?(c[h-1]-c[0])/(h-1):1;var v=0<=t?d?r:n:d?k:p;for(m+=1E-9*t*(d?-1:1)*(0<=t?1:-1);g<h&&100>q++;)d=Math.floor((g+h)/2),v(c[d],m)?g=d+1:h=d;90<q&&e.log("Long binary search...");return g-1};G.sorterAsc=function(m,c){return m-c};G.sorterDes=function(m,c){return c-m};G.distinctVals=function(m,c){var d=(c||{}).unitMinDiff;m=m.slice();m.sort(G.sorterAsc);for(c=m.length-1;-1<c&&m[c]===l;c--);var g=1;d||(g=
m[c]-m[0]||1);d=g/(c||1)/1E4;for(var h=[],q,t=0;t<=c;t++){var v=m[t],w=v-q;void 0===q?(h.push(v),q=v):w>d&&(g=Math.min(g,w),h.push(v),q=v)}return{vals:h,minDiff:g}};G.roundUp=function(m,c,d){for(var g=0,h=c.length-1,q=0,t=d?0:1,v=d?1:0,w=d?Math.ceil:Math.floor;g<h&&100>q++;)d=w((g+h)/2),c[d]<=m?g=d+t:h=d-v;return c[g]};G.sort=function(m,c){for(var d=0,g=0,h=1;h<m.length;h++){var q=c(m[h],m[h-1]);0>q?d=1:0<q&&(g=1);if(d&&g)return m.sort(c)}return g?m:m.reverse()};G.findIndexOfMin=function(m,c){c=c||
f;for(var d=Infinity,g,h=0;h<m.length;h++){var q=c(m[h]);q<d&&(d=q,g=h)}return g}},{"../constants/numerical":724,"./identity":747,"./loggers":753,"fast-isnumeric":241}],769:[function(b,D,G){D.exports=function(r,n){(r.attr("class")||"").split(" ").forEach(function(p){0===p.indexOf("cursor-")&&r.classed(p,!1)});n&&r.classed("cursor-"+n,!0)}},{}],770:[function(b,D,G){var r=b("../components/color"),n=function(){};D.exports=function(p){for(var k in p)"function"===typeof p[k]&&(p[k]=n);p.destroy=function(){p.container.parentNode.removeChild(p.container)};
k=document.createElement("div");k.className="no-webgl";k.style.cursor="pointer";k.style.fontSize="24px";k.style.color=r.defaults[0];k.style.position="absolute";k.style.left=k.style.top="0px";k.style.width=k.style.height="100%";k.style["background-color"]=r.lightLine;k.style["z-index"]=30;var a=document.createElement("p");a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info";a.style.position="relative";a.style.top="50%";a.style.left="50%";a.style.height=
"30%";a.style.width="50%";a.style.margin="-15% 0 0 -25%";k.appendChild(a);p.container.appendChild(k);p.container.style.background="#FFFFFF";p.container.onclick=function(){window.open("https://get.webgl.org")};return!1}},{"../components/color":615}],771:[function(b,D,G){var r=b("fast-isnumeric"),n=b("./array").isArrayOrTypedArray;G.aggNums=function(p,k,a,e){var f;if(!e||e>a.length)e=a.length;r(k)||(k=!1);if(n(a[0])){var l=Array(e);for(f=0;f<e;f++)l[f]=G.aggNums(p,k,a[f]);a=l}for(f=0;f<e;f++)r(k)?r(a[f])&&
(k=p(+k,+a[f])):k=a[f];return k};G.len=function(p){return G.aggNums(function(k){return k+1},0,p)};G.mean=function(p,k){k||(k=G.len(p));return G.aggNums(function(a,e){return a+e},0,p)/k};G.midRange=function(p){if(void 0!==p&&0!==p.length)return(G.aggNums(Math.max,null,p)+G.aggNums(Math.min,null,p))/2};G.variance=function(p,k,a){k||(k=G.len(p));r(a)||(a=G.mean(p,k));return G.aggNums(function(e,f){return e+Math.pow(f-a,2)},0,p)/k};G.stdev=function(p,k,a){return Math.sqrt(G.variance(p,k,a))};G.median=
function(p){p=p.slice().sort();return G.interp(p,.5)};G.interp=function(p,k){if(!r(k))throw"n should be a finite number";k=k*p.length-.5;if(0>k)return p[0];if(k>p.length-1)return p[p.length-1];var a=k%1;return a*p[Math.ceil(k)]+(1-a)*p[Math.floor(k)]}},{"./array":731,"fast-isnumeric":241}],772:[function(b,D,G){var r=b("color-normalize");D.exports=function(n){return n?r(n):[0,0,0,1]}},{"color-normalize":125}],773:[function(b,D,G){function r(E,L,P){var N,Q,O,T;MathJax.Hub.Queue(function(){Q=f.extendDeepAll({},
MathJax.Hub.config);O=MathJax.Hub.processSectionDelay;void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0);return MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){N=MathJax.Hub.config.menuSettings.renderer;if("SVG"!==N)return MathJax.Hub.setRenderer("SVG")},function(){var V="math-output-"+f.randstr({},64);T=e.select("body").append("div").attr({id:V}).style({visibility:"hidden",position:"absolute"}).style({"font-size":L.fontSize+
"px"}).text(E.replace(d,"\\lt ").replace(g,"\\gt "));return MathJax.Hub.Typeset(T.node())},function(){var V=e.select("body").select("#MathJax_SVG_glyphs");if(T.select(".MathJax_SVG").empty()||!T.select("svg").node())f.log("There was an error in the tex syntax.",E),P();else{var Z=T.select("svg").node().getBoundingClientRect();P(T.select(".MathJax_SVG"),V,Z)}T.remove();if("SVG"!==N)return MathJax.Hub.setRenderer(N)},function(){void 0!==O&&(MathJax.Hub.processSectionDelay=O);return MathJax.Hub.Config(Q)})}
function n(E,L){return E?(E=(E=E.match(L))&&(E[3]||E[4]))&&p(E):null}function p(E){return E.replace(M,function(L,P){if("#"===P.charAt(0))if(P="x"===P.charAt(1)?parseInt(P.substr(2),16):parseInt(P.substr(1),10),1114111<P)P=void 0;else{var N=String.fromCodePoint;N?P=N(P):(N=String.fromCharCode,P=65535>=P?N(P):N((P>>10)+55232,P%1024+56320))}else P=I[P];return P||L})}function k(E,L){function P(){Z++;var oa=document.createElementNS(l.svg,"tspan");e.select(oa).attr({class:"line",dy:Z*m+"em"});E.appendChild(oa);
aa=oa;var ja=V;V=[{node:oa}];if(1<ja.length)for(oa=1;oa<ja.length;oa++)N(ja[oa])}function N(oa){var ja=oa.type,ra={};if("a"===ja){var ha="a";var la=oa.target,ua=oa.href,na=oa.popup;ua&&(ra={"xlink:xlink:show":"_blank"===la||"_"!==la.charAt(0)?"new":"replace",target:la,"xlink:xlink:href":ua},na&&(ra.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+na+'");return false;'))}else ha="tspan";oa.style&&(ra.style=oa.style);ha=document.createElementNS(l.svg,ha);"sup"===ja||"sub"===ja?(Q(aa,v),
aa.appendChild(ha),la=document.createElementNS(l.svg,"tspan"),Q(la,v),e.select(la).attr("dy",t[ja]),ra.dy=q[ja],aa.appendChild(ha),aa.appendChild(la)):aa.appendChild(ha);e.select(ha).attr(ra);aa=oa.node=ha;V.push(oa)}function Q(oa,ja){oa.appendChild(document.createTextNode(ja))}function O(oa){if(1===V.length)f.log("Ignoring unexpected end tag \x3c/"+oa+"\x3e.",L);else{var ja=V.pop();oa!==ja.type&&f.log("Start tag \x3c"+ja.type+"\x3e doesnt match end tag \x3c"+oa+"\x3e. Pretending it did match.",L);
aa=V[V.length-1].node}}L=L.replace(A," ");var T=!1,V=[],Z=-1;if(B.test(L))P();else{var aa=E;V=[{node:E}]}for(var Y=L.split(z),ea=0;ea<Y.length;ea++){var ca=Y[ea],ba=ca.match(y),ka=ba&&ba[2].toLowerCase(),qa=h[ka];if("br"===ka)P();else if(void 0===qa)Q(aa,p(ca));else if(ba[1])O(ka);else{ca=ba[4];ba={type:ka};var pa=n(ca,C);pa?(pa=pa.replace(J,"$1 fill:"),qa&&(pa+=";"+qa)):qa&&(pa=qa);pa&&(ba.style=pa);"a"===ka&&(T=!0,ka=n(ca,u))&&(qa=document.createElement("a"),qa.href=ka,-1!==w.indexOf(qa.protocol)&&
(ba.href=encodeURI(decodeURI(ka)),ba.target=n(ca,F)||"_blank",ba.popup=n(ca,H)));N(ba)}}return T}function a(E,L,P){var N=P.horizontalAlign;P=P.verticalAlign||"top";var Q=E.node().getBoundingClientRect(),O=L.node().getBoundingClientRect(),T;var V="bottom"===P?function(){return Q.bottom-T.height}:"middle"===P?function(){return Q.top+(Q.height-T.height)/2}:function(){return Q.top};var Z="right"===N?function(){return Q.right-T.width}:"center"===N?function(){return Q.left+(Q.width-T.width)/2}:function(){return Q.left};
return function(){T=this.node().getBoundingClientRect();this.style({top:V()-O.top+"px",left:Z()-O.left+"px","z-index":1E3});return this}}var e=b("d3"),f=b("../lib"),l=b("../constants/xmlns_namespaces"),m=b("../constants/alignment").LINE_SPACING,c=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;G.convertToTspans=function(E,L,P){function N(){T.empty()||(V=E.attr("class")+"-math",T.select("svg."+V).remove());E.text("").style("white-space","pre");k(E.node(),Q)&&E.style("pointer-events","all");G.positionText(E);P&&P.call(E)}
var Q=E.text(),O=!E.attr("data-notex")&&"undefined"!==typeof MathJax&&Q.match(c),T=e.select(E.node().parentNode);if(!T.empty()){var V=E.attr("class")?E.attr("class").split(" ")[0]:"text";V+="-math";T.selectAll("svg."+V).remove();T.selectAll("g."+V+"-group").remove();E.style("display",null).attr({"data-unformatted":Q,"data-math":"N"});O?(L&&L._promises||[]).push(new Promise(function(Z){E.style("display","none");var aa=parseInt(E.node().style.fontSize,10);r(O[2],{fontSize:aa},function(Y,ea,ca){T.selectAll("svg."+
V).remove();T.selectAll("g."+V+"-group").remove();if((Y=Y&&Y.select("svg"))&&Y.node()){var ba=T.append("g").classed(V+"-group",!0).attr({"pointer-events":"none","data-unformatted":Q,"data-math":"Y"});ba.node().appendChild(Y.node());ea&&ea.node()&&Y.node().insertBefore(ea.node().cloneNode(!0),Y.node().firstChild);Y.attr({"class":V,height:ca.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});ea=E.node().style.fill||"black";ca=Y.select("g");ca.attr({fill:ea,
stroke:ea});ea=ca.node().getBoundingClientRect().width;ca=ca.node().getBoundingClientRect().height;var ka=+E.attr("x")-ea*{start:0,middle:.5,end:1}[E.attr("text-anchor")||"start"],qa=-(aa||E.node().getBoundingClientRect().height)/4;"y"===V[0]?(ba.attr({transform:"rotate("+[-90,+E.attr("x"),+E.attr("y")]+") translate("+[-ea/2,qa-ca/2]+")"}),Y.attr({x:+E.attr("x"),y:+E.attr("y")})):"l"===V[0]?Y.attr({x:E.attr("x"),y:qa-ca/2}):"a"===V[0]&&0!==V.indexOf("atitle")?Y.attr({x:0,y:qa}):Y.attr({x:ka,y:+E.attr("y")+
qa-ca/2});P&&P.call(E,ba);Z(ba)}else N(),Z()})})):N();return E}};var d=/(<|&lt;|&#60;)/g,g=/(>|&gt;|&#62;)/g,h={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},q={sub:"0.3em",sup:"-0.6em"},t={sub:"-0.21em",sup:"0.42em"},v="​",w=["http:","https:","mailto:","",void 0,":"],A=G.NEWLINES=/(\r\n?|\n)/g,z=/(<[^<>]*>)/,y=/<(\/?)([^ >]*)(\s+(.*))?>/i,B=/<br(\s+.*)?>/i;G.BR_TAG_ALL=/<br(\s+.*)?>/gi;var C=
/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,u=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,F=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,H=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,J=/(^|;)\s*color:/;G.plainText=function(E,L){L=L||{};var P=void 0!==L.len&&-1!==L.len?L.len:Infinity;L=void 0!==L.allowedTags?L.allowedTags:["br"];var N=E.split(z);E=[];for(var Q="",O=0,T=0;T<N.length;T++){var V=N[T],Z=V.match(y);if(Z=Z&&Z[2].toLowerCase())-1!==L.indexOf(Z)&&(E.push(V),Q=Z);else{Z=
V.length;if(O+Z<P)E.push(V),O+=Z;else if(O<P){L=P-O;Q&&("br"!==Q||3>=L||3>=Z)&&E.pop();3<P?E.push(V.substr(0,L-3)+"..."):E.push(V.substr(0,L));break}Q=""}}return E.join("")};var I={mu:"μ",amp:"\x26",lt:"\x3c",gt:"\x3e",nbsp:" ",times:"×",plusmn:"±",deg:"°"},M=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;G.convertEntities=p;G.sanitizeHTML=function(E){E=E.replace(A," ");var L=document.createElement("p"),P=L,N=[];E=E.split(z);for(var Q=0;Q<E.length;Q++){var O=E[Q],T=O.match(y),V=T&&T[2].toLowerCase();if(V in h)if(T[1])N.length&&
(P=N.pop());else{T=T[4];O=(O=n(T,C))?{style:O}:{};if("a"===V){var Z=n(T,u);if(Z){var aa=document.createElement("a");aa.href=Z;-1!==w.indexOf(aa.protocol)&&(O.href=encodeURI(decodeURI(Z)),T=n(T,F))&&(O.target=T)}}V=document.createElement(V);P.appendChild(V);e.select(V).attr(O);P=V;N.push(V)}else P.appendChild(document.createTextNode(p(O)))}return L.innerHTML};G.lineCount=function(E){return E.selectAll("tspan.line").size()||1};G.positionText=function(E,L,P){return E.each(function(){function N(V,Z){void 0===
Z?(Z=Q.attr(V),null===Z&&(Q.attr(V,0),Z=0)):Q.attr(V,Z);return Z}var Q=e.select(this),O=N("x",L),T=N("y",P);"text"===this.nodeName&&Q.selectAll("tspan.line").attr({x:O,y:T})})};G.makeEditable=function(E,L){function P(){Q();E.style({opacity:0});var aa=Z.attr("class");(aa=aa?"."+aa.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&e.select(E.node().parentNode).select(aa).style({opacity:0})}function N(aa){aa=aa.node();var Y=document.createRange();Y.selectNodeContents(aa);var ea=window.getSelection();
ea.removeAllRanges();ea.addRange(Y);aa.focus()}function Q(){var aa=e.select(O).select(".svg-container"),Y=aa.append("div"),ea=E.node().style,ca=parseFloat(ea.fontSize||12),ba=L.text;void 0===ba&&(ba=E.attr("data-unformatted"));Y.classed("plugin-editable editable",!0).style({position:"absolute","font-family":ea.fontFamily||"Arial","font-size":ca,color:L.fill||ea.fill||"black",opacity:1,"background-color":L.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ca/8+1,0,0,-1].join("px ")+
"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ba).call(a(E,aa,L)).on("blur",function(){O._editing=!1;E.text(this.textContent).style({opacity:1});var ka=e.select(this).attr("class");(ka=ka?"."+ka.split(" ")[0]+"-math-group":"[class*\x3d-math-group]")&&e.select(E.node().parentNode).select(ka).style({opacity:0});ka=this.textContent;e.select(this).transition().duration(0).remove();e.select(document).on("mouseup",null);V.edit.call(E,ka)}).on("focus",function(){var ka=this;
O._editing=!0;e.select(document).on("mouseup",function(){if(e.event.target===ka)return!1;document.activeElement===Y.node()&&Y.node().blur()})}).on("keyup",function(){27===e.event.which?(O._editing=!1,E.style({opacity:1}),e.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),V.cancel.call(E,this.textContent)):(V.input.call(E,this.textContent),e.select(this).call(a(E,aa,L)))}).on("keydown",function(){13===e.event.which&&this.blur()}).call(N)}var O=L.gd,T=L.delegate,
V=e.dispatch("edit","input","cancel"),Z=T||E;E.style({"pointer-events":T?"none":"all"});if(1!==E.size())throw Error("boo");if(L.immediate)P();else Z.on("click",P);return e.rebind(E,V,"on")}},{"../constants/alignment":717,"../constants/xmlns_namespaces":725,"../lib":749,d3:169}],774:[function(b,D,G){function r(p){p&&null!==p.timer&&(clearTimeout(p.timer),p.timer=null)}var n={};G.throttle=function(p,k,a){function e(){a();f.ts=Date.now();f.onDone&&(f.onDone(),f.onDone=null)}var f=n[p],l=Date.now();if(!f){for(var m in n)n[m].ts<
l-6E4&&delete n[m];f=n[p]={ts:0,timer:null}}r(f);l>f.ts+k?e():f.timer=setTimeout(function(){e();f.timer=null},k)};G.done=function(p){var k=n[p];return k&&k.timer?new Promise(function(a){var e=k.onDone;k.onDone=function(){e&&e();a();k.onDone=null}}):Promise.resolve()};G.clear=function(p){if(p)r(n[p]),delete n[p];else for(var k in n)G.clear(k)}},{}],775:[function(b,D,G){var r=b("fast-isnumeric");D.exports=function(n,p){if(0<n)return Math.log(n)/Math.LN10;n=Math.log(Math.min(p[0],p[1]))/Math.LN10;r(n)||
(n=Math.log(Math.max(p[0],p[1]))/Math.LN10-6);return n}},{"fast-isnumeric":241}],776:[function(b,D,G){D=D.exports={};var r=b("../plots/geo/constants").locationmodeToLayer,n=b("topojson-client").feature;D.getTopojsonName=function(p){return[p.scope.replace(/ /g,"-"),"_",p.resolution.toString(),"m"].join("")};D.getTopojsonPath=function(p,k){return p+k+".json"};D.getTopojsonFeatures=function(p,k){return n(k,k.objects[r[p.locationmode]]).features}},{"../plots/geo/constants":827,"topojson-client":551}],
777:[function(b,D,G){D.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],778:[function(b,D,G){D.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),
shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],779:[function(b,D,G){var r=b("../registry");D.exports=function(n){for(var p=r.layoutArrayContainers,k=r.layoutArrayRegexes,a=n.split("[")[0],e,f,l=0;l<k.length;l++)if((f=n.match(k[l]))&&0===f.index){e=f[0];break}e||(e=
p[p.indexOf(a)]);if(!e)return!1;n=n.substr(e.length);return n?(f=n.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))?{array:e,index:Number(f[1]),property:f[3]||""}:!1:{array:e,index:"",property:""}}},{"../registry":880}],780:[function(b,D,G){function r(l){for(var m={},c=0;c<l.length;c++)m[l[c]]=!1;return m}function n(l,m,c){l=k({},l);for(var d in l){var g=l[d];a(g)&&(l[d]=p(g,m,c,d))}"from-root"===c&&(l.editType=m);return l}function p(l,m,c,d){if(l.valType){c=k({},l);c.editType=m;if(Array.isArray(l.items))for(c.items=
Array(l.items.length),d=0;d<l.items.length;d++)c.items[d]=p(l.items[d],m,"from-root");return c}return n(l,m,"_"===d.charAt(0)?"nested":"from-root")}b=b("../lib");var k=b.extendFlat,a=b.isPlainObject;b={valType:"flaglist",extras:["none"],flags:"calc clearAxisTypes plot style markerSize colorbars".split(" ")};G={valType:"flaglist",extras:["none"],flags:"calc plot legend ticks axrange layoutstyle modebar camera arraydraw colorbars".split(" ")};var e=b.flags.slice().concat(["fullReplot"]),f=G.flags.slice().concat("layoutReplot");
D.exports={traces:b,layout:G,traceFlags:function(){return r(e)},layoutFlags:function(){return r(f)},update:function(l,m){if((m=m.editType)&&"none"!==m){m=m.split("+");for(var c=0;c<m.length;c++)l[m[c]]=!0}},overrideAll:n}},{"../lib":749}],781:[function(b,D,G){function r(A,z){var y=A[z],B=z.charAt(0);y&&"paper"!==y&&(A[z]=h(y,B))}function n(A){function z(y,B){var C=A.title&&A.title[B];A[y]&&!C&&(A.title||(A.title={}),A.title[B]=A[y],delete A[y])}if(A){if("string"===typeof A.title||"number"===typeof A.title)A.title=
{text:A.title};z("titlefont","font");z("titleposition","position");z("titleside","side");z("titleoffset","offset")}}function p(A){if(!c.isPlainObject(A))return!1;var z=A.name;delete A.name;delete A.showlegend;return("string"===typeof z||"number"===typeof z)&&String(z)}function k(A){var z="middle",y="center";"string"===typeof A&&(-1!==A.indexOf("top")?z="top":-1!==A.indexOf("bottom")&&(z="bottom"),-1!==A.indexOf("left")?y="left":-1!==A.indexOf("right")&&(y="right"));return z+" "+y}function a(A,z){return z in
A&&"object"===typeof A[z]&&0===Object.keys(A[z]).length}function e(A){var z=A.search(v);if(0<z)return A.substr(0,z)}var f=b("fast-isnumeric"),l=b("gl-mat4/fromQuat"),m=b("../registry"),c=b("../lib"),d=b("../plots/plots");D=b("../plots/cartesian/axis_ids");var g=b("../components/color"),h=D.cleanId,q=D.getFromTrace,t=m.traceIs;G.clearPromiseQueue=function(A){Array.isArray(A._promises)&&0<A._promises.length&&c.log("Clearing previous rejected promises from queue.");A._promises=[]};G.cleanLayout=function(A){var z;
A||(A={});A.xaxis1&&(A.xaxis||(A.xaxis=A.xaxis1),delete A.xaxis1);A.yaxis1&&(A.yaxis||(A.yaxis=A.yaxis1),delete A.yaxis1);A.scene1&&(A.scene||(A.scene=A.scene1),delete A.scene1);var y=(d.subplotsRegistry.cartesian||{}).attrRegex,B=(d.subplotsRegistry.polar||{}).attrRegex,C=(d.subplotsRegistry.ternary||{}).attrRegex,u=(d.subplotsRegistry.gl3d||{}).attrRegex,F=Object.keys(A);for(z=0;z<F.length;z++){var H=F[z];if(y&&y.test(H)){H=A[H];H.anchor&&"free"!==H.anchor&&(H.anchor=h(H.anchor));H.overlaying&&
(H.overlaying=h(H.overlaying));H.type||(H.isdate?H.type="date":H.islog?H.type="log":!1===H.isdate&&!1===H.islog&&(H.type="linear"));if("withzero"===H.autorange||"tozero"===H.autorange)H.autorange=!0,H.rangemode="tozero";delete H.islog;delete H.isdate;delete H.categories;a(H,"domain")&&delete H.domain;void 0!==H.autotick&&(void 0===H.tickmode&&(H.tickmode=H.autotick?"auto":"linear"),delete H.autotick);n(H)}else if(B&&B.test(H))n(A[H].radialaxis);else if(C&&C.test(H))H=A[H],n(H.aaxis),n(H.baxis),n(H.caxis);
else if(u&&u.test(H)){H=A[H];var J=H.cameraposition;if(Array.isArray(J)&&4===J[0].length){var I=J[1],M=J[2],E=l([],J[0]),L=[];for(J=0;3>J;++J)L[J]=I[J]+M*E[2+4*J];H.camera={eye:{x:L[0],y:L[1],z:L[2]},center:{x:I[0],y:I[1],z:I[2]},up:{x:0,y:0,z:1}};delete H.cameraposition}n(H.xaxis);n(H.yaxis);n(H.zaxis)}}y=Array.isArray(A.annotations)?A.annotations.length:0;for(z=0;z<y;z++)B=A.annotations[z],c.isPlainObject(B)&&(B.ref&&("paper"===B.ref?(B.xref="paper",B.yref="paper"):"data"===B.ref&&(B.xref="x",B.yref=
"y"),delete B.ref),r(B,"xref"),r(B,"yref"));y=Array.isArray(A.shapes)?A.shapes.length:0;for(z=0;z<y;z++)B=A.shapes[z],c.isPlainObject(B)&&(r(B,"xref"),r(B,"yref"));if(z=A.legend)3<z.x?(z.x=1.02,z.xanchor="left"):-2>z.x&&(z.x=-.02,z.xanchor="right"),3<z.y?(z.y=1.02,z.yanchor="bottom"):-2>z.y&&(z.y=-.02,z.yanchor="top");n(A);"rotate"===A.dragmode&&(A.dragmode="orbit");g.clean(A);A.template&&A.template.layout&&G.cleanLayout(A.template.layout);return A};G.cleanData=function(A){for(var z=0;z<A.length;z++){var y=
A[z];"histogramy"===y.type&&"xbins"in y&&!("ybins"in y)&&(y.ybins=y.xbins,delete y.xbins);if(y.error_y&&"opacity"in y.error_y){var B=g.defaults;B=y.error_y.color||(t(y,"bar")?g.defaultLine:B[z%B.length]);y.error_y.color=g.addOpacity(g.rgb(B),g.opacity(B)*y.error_y.opacity);delete y.error_y.opacity}"bardir"in y&&("h"!==y.bardir||!t(y,"bar")&&"histogram"!==y.type.substr(0,9)||(y.orientation="h",G.swapXYData(y)),delete y.bardir);"histogramy"===y.type&&G.swapXYData(y);if("histogramx"===y.type||"histogramy"===
y.type)y.type="histogram";"scl"in y&&!("colorscale"in y)&&(y.colorscale=y.scl,delete y.scl);"reversescl"in y&&!("reversescale"in y)&&(y.reversescale=y.reversescl,delete y.reversescl);y.xaxis&&(y.xaxis=h(y.xaxis,"x"));y.yaxis&&(y.yaxis=h(y.yaxis,"y"));t(y,"gl3d")&&y.scene&&(y.scene=d.subplotsRegistry.gl3d.cleanId(y.scene));if(!t(y,"pie-like")&&!t(y,"bar-like"))if(Array.isArray(y.textposition))for(B=0;B<y.textposition.length;B++)y.textposition[B]=k(y.textposition[B]);else y.textposition&&(y.textposition=
k(y.textposition));(B=m.getModule(y))&&B.colorbar&&(B=(B=B.colorbar.container)?y[B]:y)&&B.colorscale&&("YIGnBu"===B.colorscale&&(B.colorscale="YlGnBu"),"YIOrRd"===B.colorscale&&(B.colorscale="YlOrRd"));if("surface"===y.type&&c.isPlainObject(y.contours)){var C=["x","y","z"];for(B=0;B<C.length;B++){var u=y.contours[C[B]];c.isPlainObject(u)&&(u.highlightColor&&(u.highlightcolor=u.highlightColor,delete u.highlightColor),u.highlightWidth&&(u.highlightwidth=u.highlightWidth,delete u.highlightWidth))}}if("candlestick"===
y.type||"ohlc"===y.type){C=!1!==(y.increasing||{}).showlegend;u=!1!==(y.decreasing||{}).showlegend;B=p(y.increasing);var F=p(y.decreasing);if(!1!==B&&!1!==F){if(!C||u)if(u&&!C)B=F;else if(B.trim()){if(F.trim()){u=Math.min(B.length,F.length);for(C=0;C<u&&B.charAt(C)===F.charAt(C);C++);B=B.substr(0,C).trim()}}else B=F;B&&(y.name=B)}else!B&&!F||y.name||(y.name=B||F)}if(Array.isArray(y.transforms))for(C=y.transforms,B=0;B<C.length;B++)if(u=C[B],c.isPlainObject(u))switch(u.type){case "filter":u.filtersrc&&
(u.target=u.filtersrc,delete u.filtersrc);u.calendar&&(u.valuecalendar||(u.valuecalendar=u.calendar),delete u.calendar);break;case "groupby":if(u.styles=u.styles||u.style,u.styles&&!Array.isArray(u.styles)){F=u.styles;var H=Object.keys(F);u.styles=[];for(var J=0;J<H.length;J++)u.styles.push({target:H[J],value:F[H[J]]})}}a(y,"line")&&delete y.line;"marker"in y&&(a(y.marker,"line")&&delete y.marker.line,a(y,"marker")&&delete y.marker);g.clean(y);y.autobinx&&(delete y.autobinx,delete y.xbins);y.autobiny&&
(delete y.autobiny,delete y.ybins);n(y);y.colorbar&&n(y.colorbar);y.marker&&y.marker.colorbar&&n(y.marker.colorbar);y.line&&y.line.colorbar&&n(y.line.colorbar);y.aaxis&&n(y.aaxis);y.baxis&&n(y.baxis)}};G.swapXYData=function(A){c.swapAttrs(A,"? ?0 d? ?bins nbins? autobin? ?src error_?".split(" "));Array.isArray(A.z)&&Array.isArray(A.z[0])&&(A.transpose?delete A.transpose:A.transpose=!0);if(A.error_x&&A.error_y){var z=A.error_y;z="copy_ystyle"in z?z.copy_ystyle:!(z.color||z.thickness||z.width);c.swapAttrs(A,
["error_?.copy_ystyle"]);z&&c.swapAttrs(A,["error_?.color","error_?.thickness","error_?.width"])}if("string"===typeof A.hoverinfo){var y=A.hoverinfo.split("+");for(z=0;z<y.length;z++)"x"===y[z]?y[z]="y":"y"===y[z]&&(y[z]="x");A.hoverinfo=y.join("+")}};G.coerceTraceIndices=function(A,z){if(f(z))return[z];if(!Array.isArray(z)||!z.length)return A.data.map(function(C,u){return u});if(Array.isArray(z)){for(var y=[],B=0;B<z.length;B++)c.isIndex(z[B],A.data.length)?y.push(z[B]):c.warn("trace index (",z[B],
") is not a number or is out of bounds");return y}return z};G.manageArrayContainers=function(A,z,y){var B=A.obj,C=A.parts,u=C.length,F=C[u-1],H=f(F);H&&null===z?(A=C.slice(0,u-1).join("."),c.nestedProperty(B,A).get().splice(F,1)):(H&&void 0===A.get()&&void 0===A.get()&&(y[A.astr]=null),A.set(z))};var v=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;G.hasParent=function(A,z){for(z=e(z);z;){if(z in A)return!0;z=e(z)}return!1};var w=["x","y","z"];G.clearAxisTypes=function(A,z,y){for(var B=0;B<z.length;B++)for(var C=
A._fullData[B],u=0;3>u;u++){var F=q(A,C,w[u]);if(F&&"log"!==F.type){var H=F._name;F=F._id.substr(1);if("scene"===F.substr(0,5)){if(void 0!==y[F])continue;H=F+"."+H}F=H+".type";void 0===y[H]&&void 0===y[F]&&c.nestedProperty(A.layout,F).set(null)}}}},{"../components/color":615,"../lib":749,"../plots/cartesian/axis_ids":800,"../plots/plots":860,"../registry":880,"fast-isnumeric":241,"gl-mat4/fromQuat":275}],782:[function(b,D,G){D=b("./plot_api");G.plot=D.plot;G.newPlot=D.newPlot;G.restyle=D.restyle;
G.relayout=D.relayout;G.redraw=D.redraw;G.update=D.update;G._guiRestyle=D._guiRestyle;G._guiRelayout=D._guiRelayout;G._guiUpdate=D._guiUpdate;G._storeDirectGUIEdit=D._storeDirectGUIEdit;G.react=D.react;G.extendTraces=D.extendTraces;G.prependTraces=D.prependTraces;G.addTraces=D.addTraces;G.deleteTraces=D.deleteTraces;G.moveTraces=D.moveTraces;G.purge=D.purge;G.addFrames=D.addFrames;G.deleteFrames=D.deleteFrames;G.animate=D.animate;G.setPlotConfig=D.setPlotConfig;G.toImage=b("./to_image");G.validate=
b("./validate");G.downloadImage=b("../snapshot/download");b=b("./template_api");G.makeTemplate=b.makeTemplate;G.validateTemplate=b.validateTemplate},{"../snapshot/download":882,"./plot_api":784,"./template_api":789,"./to_image":790,"./validate":791}],783:[function(b,D,G){var r=b("../lib/is_plain_object"),n=b("../lib/noop"),p=b("../lib/loggers"),k=b("../lib/search").sorterAsc,a=b("../registry");G.containerArrayMatch=b("./container_array_match");var e=G.isAddVal=function(l){return"add"===l||r(l)},f=
G.isRemoveVal=function(l){return null===l||"remove"===l};G.applyContainerArrayChanges=function(l,m,c,d,g){var h=m.astr,q=a.getComponentMethod(h,"supplyLayoutDefaults"),t=a.getComponentMethod(h,"draw"),v=a.getComponentMethod(h,"drawOne");d=d.replot||d.recalc||q===n||t===n;var w=l.layout,A=l._fullLayout;if(c[""]){1<Object.keys(c).length&&p.warn("Full array edits are incompatible with other edits",h);v=c[""][""];if(f(v))m.set(null);else if(Array.isArray(v))m.set(v);else return p.warn("Unrecognized full array edit value",
h,v),!0;if(d)return!1;q(w,A);t(l);return!0}var z=Object.keys(c).map(Number).sort(k),y=m.get(),B=y||[],C=g(A,h).get(),u=[],F=-1,H=B.length,J;for(J=0;J<z.length;J++){var I=z[J];var M=c[I];var E=Object.keys(M);var L=M[""];var P=e(L);if(0>I||I>B.length-(P?0:1))p.warn("index out of range",h,I);else if(void 0!==L)1<E.length&&p.warn("Insertion \x26 removal are incompatible with edits to the same index.",h,I),f(L)?u.push(I):P?("add"===L&&(L={}),B.splice(I,0,L),C&&C.splice(I,0,{})):p.warn("Unrecognized full object edit value",
h,I,L),-1===F&&(F=I);else for(L=0;L<E.length;L++)P=h+"["+I+"].",g(B[I],E[L],P).set(M[E[L]])}for(J=u.length-1;0<=J;J--)B.splice(u[J],1),C&&C.splice(u[J],1);B.length?y||m.set(B):m.set(null);if(d)return!1;q(w,A);if(v!==n){if(-1===F)m=z;else{H=Math.max(B.length,H);m=[];for(J=0;J<z.length;J++){I=z[J];if(I>=F)break;m.push(I)}for(J=F;J<H;J++)m.push(J)}for(J=0;J<m.length;J++)v(l,m[J])}else t(l);return!0}},{"../lib/is_plain_object":750,"../lib/loggers":753,"../lib/noop":758,"../lib/search":768,"../registry":880,
"./container_array_match":779}],784:[function(b,D,G){function r(Ga){var Pa=Ga._fullLayout;Pa._redrawFromAutoMarginCount?Pa._redrawFromAutoMarginCount--:Ga.emit("plotly_afterplot")}function n(Ga,Pa){try{Ga._fullLayout._paper.style("background",Pa)}catch(Va){ba.error(Va)}}function p(Ga,Pa){Pa=na.combine(Pa,"white");n(Ga,Pa)}function k(Ga,Pa){if(!Ga._context){Ga._context=ba.extendDeep({},ab);var Va=Y.select("base");Ga._context._baseUrl=Va.size()&&Va.attr("href")?window.location.href.split("#")[0]:""}var va=
Ga._context;if(Pa){var Ea=Object.keys(Pa);for(Va=0;Va<Ea.length;Va++){var Qa=Ea[Va];"editable"!==Qa&&"edits"!==Qa&&Qa in va&&(va[Qa]="setBackground"===Qa&&"opaque"===Pa[Qa]?p:Pa[Qa])}Pa.plot3dPixelRatio&&!va.plotGlPixelRatio&&(va.plotGlPixelRatio=va.plot3dPixelRatio);Qa=Pa.editable;if(void 0!==Qa)for(va.editable=Qa,Ea=Object.keys(va.edits),Va=0;Va<Ea.length;Va++)va.edits[Ea[Va]]=Qa;if(Pa.edits)for(Ea=Object.keys(Pa.edits),Va=0;Va<Ea.length;Va++)Qa=Ea[Va],Qa in va.edits&&(va.edits[Qa]=Pa.edits[Qa]);
va._exportedPlot=Pa._exportedPlot}va.staticPlot&&(va.editable=!1,va.edits={},va.autosizable=!1,va.scrollZoom=!1,va.doubleClick=!1,va.showTips=!1,va.showLink=!1,va.displayModeBar=!1);"hover"!==va.displayModeBar||ca||(va.displayModeBar=!0);if("transparent"===va.setBackground||"function"!==typeof va.setBackground)va.setBackground=n;va._hasZeroHeight=va._hasZeroHeight||0===Ga.clientHeight;va._hasZeroWidth=va._hasZeroWidth||0===Ga.clientWidth;Va=va.scrollZoom;Ga=va._scrollZoom={};if(!0===Va)Ga.cartesian=
1,Ga.gl3d=1,Ga.geo=1,Ga.mapbox=1;else if("string"===typeof Va)for(Pa=Va.split("+"),Va=0;Va<Pa.length;Va++)Ga[Pa[Va]]=1;else!1!==Va&&(Ga.gl3d=1,Ga.geo=1,Ga.mapbox=1)}function a(Ga,Pa,Va){var va=Y.select(Ga).selectAll(".plot-container").data([0]);va.enter().insert("div",":first-child").classed("plot-container plotly",!0);va=va.selectAll(".svg-container").data([0]);va.enter().append("div").classed("svg-container",!0).style("position","relative");va.html("");Pa&&(Ga.data=Pa);Va&&(Ga.layout=Va);ha.manager.fillLayout(Ga);
va.style({width:Ga._fullLayout.width+"px",height:Ga._fullLayout.height+"px"});Ga.framework=ha.manager.framework(Ga);Ga.framework({data:Ga.data,layout:Ga.layout},va.node());Ga.framework.setUndoPoint();va=Ga.framework.svg();Pa=1;Va=Ga._fullLayout.title?Ga._fullLayout.title.text:"";""!==Va&&Va||(Pa=0);var Ea=function(){this.call(Fa.convertToTspans,Ga)};va=va.select(".title-group text").call(Ea);if(Ga._context.edits.titleText){var Qa=ba._(Ga,"Click to enter Plot title");Va&&Va!==Qa||(Pa=.2,va.attr({"data-unformatted":Qa}).text(Qa).style({opacity:Pa}).on("mouseover.opacity",
function(){Y.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){Y.select(this).transition().duration(1E3).style("opacity",0)}));var $a=function(){this.call(Fa.makeEditable,{gd:Ga}).on("edit",function(eb){Ga.framework({layout:{title:{text:eb}}});this.text(eb).call(Ea);this.call($a)}).on("cancel",function(){var eb=this.attr("data-unformatted");this.text(eb).call(Ea)})};va.call($a)}Ga._context.setBackground(Ga,Ga._fullLayout.paper_bgcolor);ra.addLinks(Ga);return Promise.resolve()}
function e(Ga,Pa){Pa+=1;var Va=[],va;for(va=0;va<Ga.length;va++){var Ea=Ga[va];0>Ea?Va.push(Pa+Ea):Va.push(Ea)}return Va}function f(Ga,Pa,Va){var va;for(va=0;va<Pa.length;va++){var Ea=Pa[va];if(Ea!==parseInt(Ea,10))throw Error("all values in "+Va+" must be integers");if(Ea>=Ga.data.length||Ea<-Ga.data.length)throw Error(Va+" must be valid indices for gd.data.");if(-1<Pa.indexOf(Ea,va+1)||0<=Ea&&-1<Pa.indexOf(-Ga.data.length+Ea)||0>Ea&&-1<Pa.indexOf(Ga.data.length+Ea))throw Error("each index in "+
Va+" must be unique.");}}function l(Ga,Pa,Va){if(!Array.isArray(Ga.data))throw Error("gd.data must be an array.");if("undefined"===typeof Pa)throw Error("currentIndices is a required argument.");Array.isArray(Pa)||(Pa=[Pa]);f(Ga,Pa,"currentIndices");"undefined"===typeof Va||Array.isArray(Va)||(Va=[Va]);"undefined"!==typeof Va&&f(Ga,Va,"newIndices");if("undefined"!==typeof Va&&Pa.length!==Va.length)throw Error("current and new indices must be of equal length.");}function m(Ga,Pa,Va){if(!Array.isArray(Ga.data))throw Error("gd.data must be an array.");
if("undefined"===typeof Pa)throw Error("traces must be defined.");Array.isArray(Pa)||(Pa=[Pa]);for(Ga=0;Ga<Pa.length;Ga++){var va=Pa[Ga];if("object"!==typeof va||Array.isArray(va)||null===va)throw Error("all values in traces array must be non-array objects");}"undefined"===typeof Va||Array.isArray(Va)||(Va=[Va]);if("undefined"!==typeof Va&&Va.length!==Pa.length)throw Error("if indices is specified, traces.length must equal indices.length");}function c(Ga,Pa,Va,va,Ea){var Qa=ba.isPlainObject(va);if(!Array.isArray(Ga.data))throw Error("gd.data must be an array");
if(!ba.isPlainObject(Pa))throw Error("update must be a key:value object");if("undefined"===typeof Va)throw Error("indices must be an integer or array of integers");f(Ga,Va,"indices");for(var $a in Pa){if(!Array.isArray(Pa[$a])||Pa[$a].length!==Va.length)throw Error("attribute "+$a+" must be an array of length equal to indices array length");if(Qa&&!($a in va&&Array.isArray(va[$a])&&va[$a].length===Pa[$a].length))throw Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object");
}Qa=Va;$a=ba.isPlainObject(va);Va=[];Array.isArray(Qa)||(Qa=[Qa]);Qa=e(Qa,Ga.data.length-1);for(var eb in Pa)for(var pb=0;pb<Qa.length;pb++){var Za=Ga.data[Qa[pb]];var nb=ka(Za,eb);Za=nb.get();var sb=Pa[eb][pb];if(!ba.isArrayOrTypedArray(sb))throw Error("attribute: "+eb+" index: "+pb+" must be an array");if(!ba.isArrayOrTypedArray(Za))throw Error("cannot extend missing or non-array attribute: "+eb);if(Za.constructor!==sb.constructor)throw Error("cannot extend array with an array of a different type: "+
eb);var Cb=$a?va[eb][pb]:va;ea(Cb)||(Cb=-1);Va.push({prop:nb,target:Za,insert:sb,maxp:Math.floor(Cb)})}Ga={};Pa={};for(va=0;va<Va.length;va++)eb=Va[va].prop,Qa=Ea(Va[va].target,Va[va].insert,Va[va].maxp),eb.set(Qa[0]),Array.isArray(Ga[eb.astr])||(Ga[eb.astr]=[]),Ga[eb.astr].push(Qa[1]),Array.isArray(Pa[eb.astr])||(Pa[eb.astr]=[]),Pa[eb.astr].push(Va[va].target.length);return{update:Ga,maxPoints:Pa}}function d(Ga,Pa){var Va=new Ga.constructor(Ga.length+Pa.length);Va.set(Ga);Va.set(Pa,Ga.length);return Va}
function g(Ga,Pa,Va,va){Ga=ba.getGraphDiv(Ga);var Ea=c(Ga,Pa,Va,va,function($a,eb,pb){if(ba.isTypedArray($a))if(0>pb){var Za=new $a.constructor(0);$a=d($a,eb);if(0>pb)var nb=$a;else nb=Za,Za=$a}else if(nb=new $a.constructor(pb),Za=new $a.constructor($a.length+eb.length-pb),pb===eb.length)nb.set(eb),Za.set($a);else if(pb<eb.length)pb=eb.length-pb,nb.set(eb.subarray(pb)),Za.set($a),Za.set(eb.subarray(0,pb),$a.length);else{pb-=eb.length;var sb=$a.length-pb;nb.set($a.subarray(sb));nb.set(eb,pb);Za.set($a.subarray(0,
sb))}else nb=$a.concat(eb),Za=0<=pb&&pb<nb.length?nb.splice(0,nb.length-pb):[];return[nb,Za]}),Qa=G.redraw(Ga);pa.add(Ga,G.prependTraces,[Ga,Ea.update,Va,Ea.maxPoints],g,arguments);return Qa}function h(Ga,Pa,Va,va){Ga=ba.getGraphDiv(Ga);var Ea=c(Ga,Pa,Va,va,function($a,eb,pb){if(ba.isTypedArray($a))if(0>=pb){var Za=new $a.constructor(0);$a=d(eb,$a);if(0>pb)var nb=$a;else nb=Za,Za=$a}else nb=new $a.constructor(pb),Za=new $a.constructor($a.length+eb.length-pb),pb===eb.length?(nb.set(eb),Za.set($a)):
pb<eb.length?(pb=eb.length-pb,nb.set(eb.subarray(0,pb)),Za.set(eb.subarray(pb)),Za.set($a,pb)):(pb-=eb.length,nb.set(eb),nb.set($a.subarray(0,pb),eb.length),Za.set($a.subarray(pb)));else nb=eb.concat($a),Za=0<=pb&&pb<nb.length?nb.splice(pb,nb.length):[];return[nb,Za]}),Qa=G.redraw(Ga);pa.add(Ga,G.extendTraces,[Ga,Ea.update,Va,Ea.maxPoints],h,arguments);return Qa}function q(Ga,Pa,Va){Ga=ba.getGraphDiv(Ga);var va=[],Ea=G.deleteTraces,Qa=[Ga,va],$a=[Ga,Pa],eb;m(Ga,Pa,Va);Array.isArray(Pa)||(Pa=[Pa]);
Pa=Pa.map(function(pb){return ba.extendFlat({},pb)});bb.cleanData(Pa);for(eb=0;eb<Pa.length;eb++)Ga.data.push(Pa[eb]);for(eb=0;eb<Pa.length;eb++)va.push(-Pa.length+eb);if("undefined"===typeof Va)return Pa=G.redraw(Ga),pa.add(Ga,Ea,Qa,q,$a),Pa;Array.isArray(Va)||(Va=[Va]);try{l(Ga,va,Va)}catch(pb){throw Ga.data.splice(Ga.data.length-Pa.length,Pa.length),pb;}pa.startSequence(Ga);pa.add(Ga,Ea,Qa,q,$a);Pa=G.moveTraces(Ga,va,Va);pa.stopSequence(Ga);return Pa}function t(Ga,Pa){Ga=ba.getGraphDiv(Ga);var Va=
[],va=G.addTraces,Ea=[Ga,Va,Pa],Qa=[Ga,Pa],$a;if("undefined"===typeof Pa)throw Error("indices must be an integer or array of integers.");Array.isArray(Pa)||(Pa=[Pa]);f(Ga,Pa,"indices");Pa=e(Pa,Ga.data.length-1);Pa.sort(ba.sorterDes);for($a=0;$a<Pa.length;$a+=1){var eb=Ga.data.splice(Pa[$a],1)[0];Va.push(eb)}Pa=G.redraw(Ga);pa.add(Ga,va,Ea,t,Qa);return Pa}function v(Ga,Pa,Va){Ga=ba.getGraphDiv(Ga);var va=[],Ea=[],Qa=[Ga,Va,Pa],$a=[Ga,Pa,Va],eb;l(Ga,Pa,Va);Pa=Array.isArray(Pa)?Pa:[Pa];if("undefined"===
typeof Va)for(Va=[],eb=0;eb<Pa.length;eb++)Va.push(-Pa.length+eb);Va=Array.isArray(Va)?Va:[Va];Pa=e(Pa,Ga.data.length-1);Va=e(Va,Ga.data.length-1);for(eb=0;eb<Ga.data.length;eb++)-1===Pa.indexOf(eb)&&va.push(Ga.data[eb]);for(eb=0;eb<Pa.length;eb++)Ea.push({newIndex:Va[eb],trace:Ga.data[Pa[eb]]});Ea.sort(function(pb,Za){return pb.newIndex-Za.newIndex});for(eb=0;eb<Ea.length;eb+=1)va.splice(Ea[eb].newIndex,0,Ea[eb].trace);Ga.data=va;Pa=G.redraw(Ga);pa.add(Ga,v,Qa,v,$a);return Pa}function w(Ga,Pa,Va,
va){Ga=ba.getGraphDiv(Ga);bb.clearPromiseQueue(Ga);var Ea={};if("string"===typeof Pa)Ea[Pa]=Va;else if(ba.isPlainObject(Pa))Ea=ba.extendFlat({},Pa),void 0===va&&(va=Va);else return ba.warn("Restyle fail.",Pa,Va,va),Promise.reject();Object.keys(Ea).length&&(Ga.changed=!0);Pa=bb.coerceTraceIndices(Ga,va);var Qa=B(Ga,Ea,Pa);Ea=Qa.flags;Ea.calc&&(Ga.calcdata=void 0);Ea.clearAxisTypes&&bb.clearAxisTypes(Ga,Pa,{});Pa=[];Ea.fullReplot?Pa.push(G.plot):(Pa.push(ra.previousPromises),ra.supplyDefaults(Ga),Ea.markerSize&&
(ra.doCalcdata(Ga),H(Pa)),Ea.style&&Pa.push(La.doTraceStyle),Ea.colorbars&&Pa.push(La.doColorBars),Pa.push(r));Pa.push(ra.rehover,ra.redrag);pa.add(Ga,w,[Ga,Qa.undoit,Qa.traces],w,[Ga,Qa.redoit,Qa.traces]);(Ea=ba.syncOrAsync(Pa,Ga))&&Ea.then||(Ea=Promise.resolve());return Ea.then(function(){Ga.emit("plotly_restyle",Qa.eventData);return Ga})}function A(Ga){return void 0===Ga?null:Ga}function z(Ga,Pa){return Pa?function(Va,va,Ea){var Qa=ka(Va,va),$a=Qa.set;Qa.set=function(eb){y((Ea||"")+va,Qa.get(),
eb,Ga);$a(eb)};return Qa}:ka}function y(Ga,Pa,Va,va){if(Array.isArray(Pa)||Array.isArray(Va)){var Ea=Array.isArray(Pa)?Pa:[];Va=Array.isArray(Va)?Va:[];Pa=Math.max(Ea.length,Va.length);for(var Qa=0;Qa<Pa;Qa++)y(Ga+"["+Qa+"]",Ea[Qa],Va[Qa],va)}else if(ba.isPlainObject(Pa)||ba.isPlainObject(Va))for(Ea in Pa=ba.isPlainObject(Pa)?Pa:{},Va=ba.isPlainObject(Va)?Va:{},Qa=ba.extendFlat({},Pa,Va),Qa)y(Ga+"."+Ea,Pa[Ea],Va[Ea],va);else void 0===va[Ga]&&(va[Ga]=A(Pa))}function B(Ga,Pa,Va){function va(){return Va.map(function(){})}
function Ea(qb){qb=la.id2name(qb);-1===zb.indexOf(qb)&&zb.push(qb)}function Qa(qb){return"LAYOUT"+qb+".autorange"}function $a(qb){return"LAYOUT"+qb+".range"}function eb(qb){for(var vb=qb;vb<Cb.length;vb++)if(Cb[vb]._input===Ib[qb])return Cb[vb]}function pb(qb,vb,Db){if(Array.isArray(qb))qb.forEach(function(dc){pb(dc,vb,Db)});else if(!(qb in Pa||bb.hasParent(Pa,qb))){if("LAYOUT"===qb.substr(0,6))var Qb=qc(Ga.layout,qb.replace("LAYOUT",""));else{Qb=Va[Db];var wc=sb._tracePreGUI[eb(Qb)._fullInput.uid];
Qb=z(wc,fc)(Ib[Qb],qb)}qb in Fc||(Fc[qb]=va());void 0===Fc[qb][Db]&&(Fc[qb][Db]=A(Qb.get()));void 0!==vb&&Qb.set(vb)}}function Za(qb){return function(vb){return Cb[vb][qb]}}function nb(qb){return function(vb,Db){return!1===vb?Cb[Va[Db]][qb]:null}}var sb=Ga._fullLayout,Cb=Ga._fullData,Ib=Ga.data,fc=sb._guiEditing,qc=z(sb._preGUI,fc),Cc=ba.extendDeepAll({},Pa),cd;C(Pa);var Qc=kb.traceFlags(),Wc={},Fc={};for(Wb in Pa){if(bb.hasParent(Pa,Wb))throw Error("cannot set "+Wb+" and a parent attribute simultaneously");
var ld=Pa[Wb],yb;if("autobinx"===Wb||"autobiny"===Wb){var Wb=Wb.charAt(Wb.length-1)+"bins";ld=Array.isArray(ld)?ld.map(nb(Wb)):!1===ld?Va.map(Za(Wb)):null}Wc[Wb]=ld;if("LAYOUT"===Wb.substr(0,6)){var Dc=qc(Ga.layout,Wb.replace("LAYOUT",""));Fc[Wb]=[A(Dc.get())];Dc.set(Array.isArray(ld)?ld[0]:ld);Qc.calc=!0}else{Fc[Wb]=va();for(cd=0;cd<Va.length;cd++){var ec=Ib[Va[cd]];var kc=eb(Va[cd]);Dc=z(sb._tracePreGUI[kc._fullInput.uid],fc)(ec,Wb);var ic=Dc.get();var ob=Array.isArray(ld)?ld[cd%ld.length]:ld;if(void 0!==
ob){var tb=Dc.parts[Dc.parts.length-1],$b=(yb=Wb.substr(0,Wb.length-tb.length-1))?yb+".":"",lc=yb?ka(kc,yb).get():kc;if((yb=ja.getTraceValObject(kc,Dc.parts))&&yb.impliedEdits&&null!==ob)for(var yc in yb.impliedEdits)pb(ba.relativeAttr(Wb,yc),yb.impliedEdits[yc],cd);else if("thicknessmode"!==tb&&"lenmode"!==tb||ic===ob||"fraction"!==ob&&"pixels"!==ob||!lc)"type"!==Wb||"pie"===ob===("pie"===ic)&&"funnelarea"===ob===("funnelarea"===ic)||($b="x",lc="y","bar"!==ob&&"bar"!==ic||"h"!==ec.orientation||($b=
"y",lc="x"),ba.swapAttrs(ec,["?","?src"],"labels",$b),ba.swapAttrs(ec,["d?","?0"],"label",$b),ba.swapAttrs(ec,["?","?src"],"values",lc),"pie"===ic||"funnelarea"===ic?(ka(ec,"marker.color").set(ka(ec,"marker.colors").get()),sb._pielayer.selectAll("g.trace").remove()):oa.traceIs(ec,"cartesian")&&ka(ec,"marker.colors").set(ka(ec,"marker.color").get()));else{var Rb=sb._size,Ub=lc.orient;Ub="top"===Ub||"bottom"===Ub;"thicknessmode"===tb?(tb=Ub?Rb.h:Rb.w,pb($b+"thickness",lc.thickness*("fraction"===ob?
1/tb:tb),cd)):(tb=Ub?Rb.w:Rb.h,pb($b+"len",lc.len*("fraction"===ob?1/tb:tb),cd))}Fc[Wb][cd]=A(ic);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Wb)){if("orientation"===Wb){if(Dc.set(ob),ic=ec.x&&!ec.y?"h":"v",(Dc.get()||ic)===kc.orientation)continue}else"orientationaxes"===Wb&&(ec.orientation={v:"h",h:"v"}[kc.orientation]);bb.swapXYData(ec);Qc.calc=Qc.clearAxisTypes=!0}else-1!==ra.dataArrayContainers.indexOf(Dc.parts[0])?(bb.manageArrayContainers(Dc,ob,Fc),Qc.calc=!0):(yb?
yb.arrayOk&&!oa.traceIs(kc,"regl")&&(ba.isArrayOrTypedArray(ob)||ba.isArrayOrTypedArray(ic))?Qc.calc=!0:kb.update(Qc,yb):Qc.calc=!0,Dc.set(ob))}}-1!==["swapxyaxes","orientationaxes"].indexOf(Wb)&&la.swap(Ga,Va);"orientationaxes"===Wb&&(cd=ka(Ga.layout,"hovermode"),ld=cd.get(),"x"===ld?cd.set("y"):"y"===ld?cd.set("x"):"x unified"===ld?cd.set("y unified"):"y unified"===ld&&cd.set("x unified"));if(-1!==["orientation","type"].indexOf(Wb)){var zb=[];for(cd=0;cd<Va.length;cd++)ld=Ib[Va[cd]],oa.traceIs(ld,
"cartesian")&&(Ea(ld.xaxis||"x"),Ea(ld.yaxis||"y"));pb(zb.map(Qa),!0,0);pb(zb.map($a),[0,1],0)}}}if(Qc.calc||Qc.plot)Qc.fullReplot=!0;return{flags:Qc,undoit:Fc,redoit:Wc,traces:Va,eventData:ba.extendDeepNoArrays([],[Cc,Va])}}function C(Ga){function Pa(pb,Za){Ga[Za]=Ga[pb];delete Ga[pb]}var Va=ba.counterRegex("axis",".title",!1,!1),va=/colorbar\.title$/,Ea=Object.keys(Ga),Qa;for(Qa=0;Qa<Ea.length;Qa++){var $a=Ea[Qa];var eb=Ga[$a];"title"!==$a&&!Va.test($a)&&!va.test($a)||"string"!==typeof eb&&"number"!==
typeof eb?-1<$a.indexOf("titlefont")?Pa($a,$a.replace("titlefont","title.font")):-1<$a.indexOf("titleposition")?Pa($a,$a.replace("titleposition","title.position")):-1<$a.indexOf("titleside")?Pa($a,$a.replace("titleside","title.side")):-1<$a.indexOf("titleoffset")&&Pa($a,$a.replace("titleoffset","title.offset")):Pa($a,$a.replace("title","title.text"))}}function u(Ga,Pa,Va){Ga=ba.getGraphDiv(Ga);bb.clearPromiseQueue(Ga);if(Ga.framework&&Ga.framework.isPolar)return Promise.resolve(Ga);var va={};if("string"===
typeof Pa)va[Pa]=Va;else if(ba.isPlainObject(Pa))va=ba.extendFlat({},Pa);else return ba.warn("Relayout fail.",Pa,Va),Promise.reject();Object.keys(va).length&&(Ga.changed=!0);var Ea=J(Ga,va);Pa=Ea.flags;Pa.calc&&(Ga.calcdata=void 0);Va=[ra.previousPromises];Pa.layoutReplot?Va.push(La.layoutReplot):Object.keys(va).length&&(F(Ga,Pa,Ea)||ra.supplyDefaults(Ga),Pa.legend&&Va.push(La.doLegend),Pa.layoutstyle&&Va.push(La.layoutStyles),Pa.axrange&&H(Va,Ea.rangesAltered),Pa.ticks&&Va.push(La.doTicksRelayout),
Pa.modebar&&Va.push(La.doModeBar),Pa.camera&&Va.push(La.doCamera),Pa.colorbars&&Va.push(La.doColorBars),Va.push(r));Va.push(ra.rehover,ra.redrag);pa.add(Ga,u,[Ga,Ea.undoit],u,[Ga,Ea.redoit]);(va=ba.syncOrAsync(Va,Ga))&&va.then||(va=Promise.resolve(Ga));return va.then(function(){Ga.emit("plotly_relayout",Ea.eventData);return Ga})}function F(Ga,Pa,Va){var va=Ga._fullLayout;if(!Pa.axrange)return!1;for(var Ea in Pa)if("axrange"!==Ea&&Pa[Ea])return!1;for(var Qa in Va.rangesAltered)if(Va=la.id2name(Qa),
Pa=Ga.layout[Va],Va=va[Va],Va.autorange=Pa.autorange,Va.range=Pa.range.slice(),Va.cleanRange(),Va._matchGroup)for(var $a in Va._matchGroup)$a!==Qa&&(Pa=va[la.id2name($a)],Pa.autorange=Va.autorange,Pa.range=Va.range.slice(),Pa._input.range=Va.range.slice());return!0}function H(Ga,Pa){Ga.push(Xa,La.doAutoRangeAndConstraints,Pa?function(Va){var va=[],Ea=!0,Qa;for(Qa in Pa){var $a=la.getFromId(Va,Qa);va.push(Qa);if($a._matchGroup)for(var eb in $a._matchGroup)Pa[eb]||va.push(eb);$a.automargin&&(Ea=!1)}return la.draw(Va,
va,{skipTitle:Ea})}:function(Va){return la.draw(Va,"redraw")},La.drawData,La.finalDraw)}function J(Ga,Pa){function Va(tb,$b){if(Array.isArray(tb))tb.forEach(function(yc){Va(yc,$b)});else if(!(tb in Pa||bb.hasParent(Pa,tb))){var lc=$a(Ea,tb);tb in fc||(fc[tb]=A(lc.get()));void 0!==$b&&lc.set($b)}}function va(tb){tb=la.name2id(tb.split(".")[0]);qc[tb]=1;return tb}var Ea=Ga.layout,Qa=Ga._fullLayout,$a=z(Qa._preGUI,Qa._guiEditing),eb=Object.keys(Pa),pb=la.list(Ga),Za=ba.extendDeepAll({},Pa),nb={},sb,
Cb;C(Pa);eb=Object.keys(Pa);for(sb=0;sb<eb.length;sb++)if(0===eb[sb].indexOf("allaxes")){for(Cb=0;Cb<pb.length;Cb++){var Ib=pb[Cb]._id.substr(1);Ib=-1!==Ib.indexOf("scene")?Ib+".":"";Ib=eb[sb].replace("allaxes",Ib+pb[Cb]._name);Pa[Ib]||(Pa[Ib]=Pa[eb[sb]])}delete Pa[eb[sb]]}eb=kb.layoutFlags();pb={};var fc={},qc={},Cc,cd;for(cd in Pa){if(bb.hasParent(Pa,cd))throw Error("cannot set "+cd+" and a parent attribute simultaneously");sb=$a(Ea,cd);Cb=Pa[cd];for(Ib=sb.parts.length-1;0<Ib&&"string"!==typeof sb.parts[Ib];)Ib--;
var Qc=sb.parts[Ib],Wc=sb.parts[Ib-1]+"."+Qc,Fc=sb.parts.slice(0,Ib).join("."),ld=ka(Ga.layout,Fc).get(),yb=ka(Qa,Fc).get(),Wb=sb.get();if(void 0!==Cb){pb[cd]=Cb;fc[cd]="reverse"===Qc?Cb:A(Wb);if((Ib=ja.getLayoutValObject(Qa,sb.parts))&&Ib.impliedEdits&&null!==Cb)for(var Dc in Ib.impliedEdits)Va(ba.relativeAttr(cd,Dc),Ib.impliedEdits[Dc]);-1!==["width","height"].indexOf(cd)?Cb?(Va("autosize",null),Wc="height"===cd?"width":"height",Va(Wc,Qa[Wc])):Qa[cd]=Ga._initialAutoSize[cd]:"autosize"===cd?(Va("width",
Cb?null:Qa.width),Va("height",Cb?null:Qa.height)):Wc.match(Ia)?(va(Wc),ka(Qa,Fc+"._inputRange").set(null)):Wc.match(Na)?(va(Wc),ka(Qa,Fc+"._inputRange").set(null),Wc=ka(Qa,Fc).get(),Wc._inputDomain&&(Wc._input.domain=Wc._inputDomain.slice())):Wc.match(Ta)&&ka(Qa,Fc+"._inputDomain").set(null);if("type"===Qc){var ec=ld;Wc="linear"===yb.type&&"log"===Cb;var kc="log"===yb.type&&"linear"===Cb;Wc||kc?(ec&&ec.range?yb.autorange?Wc&&(ec.range=ec.range[1]>ec.range[0]?[1,2]:[2,1]):(kc=ec.range[0],ec=ec.range[1],
Wc?(0>=kc&&0>=ec&&Va(Fc+".autorange",!0),0>=kc?kc=ec/1E6:0>=ec&&(ec=kc/1E6),Va(Fc+".range[0]",Math.log(kc)/Math.LN10),Va(Fc+".range[1]",Math.log(ec)/Math.LN10)):(Va(Fc+".range[0]",Math.pow(10,kc)),Va(Fc+".range[1]",Math.pow(10,ec)))):Va(Fc+".autorange",!0),Array.isArray(Qa._subplots.polar)&&Qa._subplots.polar.length&&Qa[sb.parts[0]]&&"radialaxis"===sb.parts[1]&&delete Qa[sb.parts[0]]._subplot.viewInitial["radialaxis.range"],oa.getComponentMethod("annotations","convertCoords")(Ga,yb,Cb,Va),oa.getComponentMethod("images",
"convertCoords")(Ga,yb,Cb,Va)):(Va(Fc+".autorange",!0),Va(Fc+".range",null));ka(Qa,Fc+"._inputRange").set(null)}else Qc.match(mb)&&(Wc=ka(Qa,cd).get(),(ec=(Cb||{}).type)&&"-"!==ec||(ec="linear"),oa.getComponentMethod("annotations","convertCoords")(Ga,Wc,ec,Va),oa.getComponentMethod("images","convertCoords")(Ga,Wc,ec,Va));if(Wc=gb.containerArrayMatch(cd)){var ic=Wc.array;sb=Wc.index;Qc=Wc.property;Ib=Ib||{editType:"calc"};""!==sb&&""===Qc&&(gb.isAddVal(Cb)?fc[cd]=null:gb.isRemoveVal(Cb)?fc[cd]=(ka(Ea,
ic).get()||[])[sb]:ba.warn("unrecognized full object value",Pa));kb.update(eb,Ib);nb[ic]||(nb[ic]={});(Ib=nb[ic][sb])||(Ib=nb[ic][sb]={});Ib[Qc]=Cb;delete Pa[cd]}else"reverse"===Qc?(ld.range?ld.range.reverse():(Va(Fc+".autorange",!0),ld.range=[1,0]),yb.autorange?eb.calc=!0:eb.plot=!0):(Qa._has("scatter-like")&&Qa._has("regl")&&"dragmode"===cd&&("lasso"===Cb||"select"===Cb)&&"lasso"!==Wb&&"select"!==Wb?eb.plot=!0:Qa._has("gl2d")?eb.plot=!0:Ib?kb.update(eb,Ib):eb.calc=!0,sb.set(Cb))}}for(ic in nb)gb.applyContainerArrayChanges(Ga,
$a(Ea,ic),nb[ic],eb,$a)||(eb.plot=!0);Qa=Qa._axisConstraintGroups||[];for(Cc in qc)for(sb=0;sb<Qa.length;sb++)if(nb=Qa[sb],nb[Cc]){eb.calc=!0;for(var ob in nb)qc[ob]||(la.getFromId(Ga,ob)._constraintShrinkable=!0)}if(I(Ga)||Pa.height||Pa.width)eb.plot=!0;if(eb.plot||eb.calc)eb.layoutReplot=!0;return{flags:eb,rangesAltered:qc,undoit:fc,redoit:pb,eventData:Za}}function I(Ga){var Pa=Ga._fullLayout,Va=Pa.width,va=Pa.height;Ga.layout.autosize&&ra.plotAutoSize(Ga,Ga.layout,Pa);return Pa.width!==Va||Pa.height!==
va}function M(Ga,Pa,Va,va){Ga=ba.getGraphDiv(Ga);bb.clearPromiseQueue(Ga);if(Ga.framework&&Ga.framework.isPolar)return Promise.resolve(Ga);ba.isPlainObject(Pa)||(Pa={});ba.isPlainObject(Va)||(Va={});Object.keys(Pa).length&&(Ga.changed=!0);Object.keys(Va).length&&(Ga.changed=!0);va=bb.coerceTraceIndices(Ga,va);var Ea=B(Ga,ba.extendFlat({},Pa),va);Pa=Ea.flags;var Qa=J(Ga,ba.extendFlat({},Va)),$a=Qa.flags;if(Pa.calc||$a.calc)Ga.calcdata=void 0;Pa.clearAxisTypes&&bb.clearAxisTypes(Ga,va,Va);Va=[];$a.layoutReplot?
Va.push(La.layoutReplot):Pa.fullReplot?Va.push(G.plot):(Va.push(ra.previousPromises),F(Ga,$a,Qa)||ra.supplyDefaults(Ga),Pa.style&&Va.push(La.doTraceStyle),(Pa.colorbars||$a.colorbars)&&Va.push(La.doColorBars),$a.legend&&Va.push(La.doLegend),$a.layoutstyle&&Va.push(La.layoutStyles),$a.axrange&&H(Va,Qa.rangesAltered),$a.ticks&&Va.push(La.doTicksRelayout),$a.modebar&&Va.push(La.doModeBar),$a.camera&&Va.push(La.doCamera),Va.push(r));Va.push(ra.rehover,ra.redrag);pa.add(Ga,M,[Ga,Ea.undoit,Qa.undoit,Ea.traces],
M,[Ga,Ea.redoit,Qa.redoit,Ea.traces]);(Va=ba.syncOrAsync(Va,Ga))&&Va.then||(Va=Promise.resolve(Ga));return Va.then(function(){Ga.emit("plotly_update",{data:Ea.eventData,layout:Qa.eventData});return Ga})}function E(Ga){return function(Pa){Pa._fullLayout._guiEditing=!0;var Va=Ga.apply(null,arguments);Pa._fullLayout._guiEditing=!1;return Va}}function L(Ga,Pa){for(var Va=0;Va<Pa.length;Va++){var va=Pa[Va],Ea=Ga.match(va.pattern);if(Ea)return{head:Ea[1],attr:va.attr}}}function P(Ga,Pa){var Va=ka(Pa,Ga).get();
if(void 0!==Va)return Va;Ga=Ga.split(".");for(Ga.pop();1<Ga.length;)if(Ga.pop(),Va=ka(Pa,Ga.join(".")+".uirevision").get(),void 0!==Va)return Va;return Pa.uirevision}function N(Ga,Pa){var Va=ba.isPlainObject(Ga),va=Array.isArray(Ga);return Va||va?(Va&&ba.isPlainObject(Pa)||va&&Array.isArray(Pa))&&JSON.stringify(Ga)===JSON.stringify(Pa):Ga===Pa}function Q(Ga,Pa,Va,va){var Ea=va._preGUI,Qa,$a,eb,pb=[],Za={};for(Qa in Ea){if($a=L(Qa,hb)){if($a=$a.attr||$a.head+".uirevision",($a=(eb=ka(va,$a).get())&&
P($a,Pa))&&$a===eb){eb=Ea[Qa];null===eb&&(eb=void 0);$a=ka(Pa,Qa);var nb=$a.get();if(N(nb,eb)){void 0===nb&&"autorange"===Qa.substr(Qa.length-9)&&pb.push(Qa.substr(0,Qa.length-10));$a.set(A(ka(va,Qa).get()));continue}}}else ba.warn("unrecognized GUI edit: "+Qa);delete Ea[Qa];"range["===Qa.substr(Qa.length-8,6)&&(Za[Qa.substr(0,Qa.length-9)]=1)}for(Ea=0;Ea<pb.length;Ea++)eb=pb[Ea],Za[eb]&&(eb=ka(Pa,eb).get())&&delete eb.autorange;pb=va._tracePreGUI;for(var sb in pb)for(Qa in Za=pb[sb],Ea=null,Za){if(!Ea){a:{for(Ea=
0;Ea<Va.length;Ea++)if(Va[Ea]._fullInput.uid===sb)break a;Ea=-1}if(0>Ea){delete pb[sb];break}var Cb=Va[Ea]._fullInput;a:{Ea=Cb.index;for(eb=0;eb<Ga.length;eb++)if(Ga[eb].uid===sb){Ea=eb;break a}Ea=!Ga[Ea]||Ga[Ea].uid?-1:Ea}if(0>Ea){delete pb[sb];break}Ea=Ga[Ea]}if($a=L(Qa,Ya)){if($a.attr?$a=(eb=ka(va,$a.attr).get())&&P($a.attr,Pa):(eb=Cb.uirevision,$a=Ea.uirevision,void 0===$a&&($a=Pa.uirevision)),$a&&$a===eb&&(eb=Za[Qa],null===eb&&(eb=void 0),$a=ka(Ea,Qa),nb=$a.get(),N(nb,eb))){$a.set(A(ka(Cb,Qa).get()));
continue}}else ba.warn("unrecognized GUI edit: "+Qa+" in trace uid "+sb);delete Za[Qa]}}function O(Ga,Pa,Va,va,Ea,Qa){var $a=Pa.length===Va.length;if(!Ea&&!$a)return{fullReplot:!0,calc:!0};var eb=kb.traceFlags();eb.arrays={};eb.nChanges=0;eb.nChangesAnim=0;va={getValObject:function(Za){Za=ja.getTraceValObject(pb,Za);!pb._module.animatable&&Za.anim&&(Za.anim=!1);return Za},flags:eb,immutable:va,transition:Ea,newDataRevision:Qa,gd:Ga};Qa={};for(Ga=0;Ga<Pa.length;Ga++)if(Va[Ga]){var pb=Va[Ga]._fullInput;
ra.hasMakesDataTransform(pb)&&(pb=Va[Ga]);Qa[pb.uid]||(Qa[pb.uid]=1,V(Pa[Ga]._fullInput,pb,[],va))}if(eb.calc||eb.plot)eb.fullReplot=!0;Ea&&eb.nChanges&&eb.nChangesAnim&&(eb.anim=eb.nChanges===eb.nChangesAnim&&$a?"all":"some");return eb}function T(Ga,Pa,Va,va,Ea){var Qa=kb.layoutFlags();Qa.arrays={};Qa.rangesAltered={};Qa.nChanges=0;Qa.nChangesAnim=0;V(Pa,Va,[],{getValObject:function($a){return ja.getLayoutValObject(Va,$a)},flags:Qa,immutable:va,transition:Ea,gd:Ga});if(Qa.plot||Qa.calc)Qa.layoutReplot=
!0;Ea&&Qa.nChanges&&Qa.nChangesAnim&&(Qa.anim=Qa.nChanges===Qa.nChangesAnim?"all":"some");return Qa}function V(Ga,Pa,Va,va){function Ea(){var yb=Qa.editType;if(nb&&-1!==yb.indexOf("arraydraw"))ba.pushUnique(pb.arrays[nb],sb);else{kb.update(pb,Qa);"none"!==yb&&pb.nChanges++;va.transition&&Qa.anim&&pb.nChangesAnim++;if(Ia.test(qc)||Na.test(qc))pb.rangesAltered[Va[0]]=1;Ta.test(qc)&&ka(Pa,"_inputDomain").set(null);"datarevision"===$a&&(pb.newDataRevision=1)}}var Qa,$a,eb=va.getValObject,pb=va.flags,
Za=va.immutable,nb=va.inArray,sb=va.arrayIndex;for($a in Ga){if(pb.calc&&!va.transition)return;var Cb=Ga[$a],Ib=Pa[$a],fc=Va.concat($a);var qc=fc.join(".");if("_"!==$a.charAt(0)&&"function"!==typeof Cb&&Cb!==Ib){if(("tick0"===$a||"dtick"===$a)&&"geo"!==Va[0]){var Cc=Pa.tickmode;if("auto"===Cc||"array"===Cc||!Cc)continue}if(!("range"===$a&&Pa.autorange||("zmin"===$a||"zmax"===$a)&&"contourcarpet"===Pa.type||!(Qa=eb(fc))||Qa._compareAsJSON&&JSON.stringify(Cb)===JSON.stringify(Ib))){Cc=Qa.valType;var cd=
"data_array"===Qa.valType||Qa.arrayOk,Qc=Array.isArray(Cb),Wc=Array.isArray(Ib);if(Qc&&Wc){var Fc="_input_"+$a,ld=Ga[Fc];Fc=Pa[Fc];if(Array.isArray(ld)&&ld===Fc)continue}if(void 0===Ib)cd&&Qc?pb.calc=!0:Ea();else if(Qa._isLinkedToArray){cd=[];Qc=!1;nb||(pb.arrays[$a]=cd);Wc=Math.min(Cb.length,Ib.length);ld=Math.max(Cb.length,Ib.length);if(Wc!==ld)if("arraydraw"===Qa.editType)Qc=!0;else{Ea();continue}for(Cc=0;Cc<Wc;Cc++)V(Cb[Cc],Ib[Cc],fc.concat(Cc),ba.extendFlat({inArray:$a,arrayIndex:Cc},va));if(Qc)for(Cc=
Wc;Cc<ld;Cc++)cd.push(Cc)}else!Cc&&ba.isPlainObject(Cb)?V(Cb,Ib,fc,va):cd?Qc&&Wc?(Za&&(pb.calc=!0),(Za||va.newDataRevision)&&Ea()):Qc!==Wc?pb.calc=!0:Ea():Qc&&Wc?(Cb.length!==Ib.length||String(Cb)!==String(Ib))&&Ea():Ea()}}}for($a in Pa)if(!($a in Ga||"_"===$a.charAt(0)||"function"===typeof Pa[$a]))if(Qa=eb(Va.concat($a)),("data_array"===Qa.valType||Qa.arrayOk)&&Array.isArray(Pa[$a])){pb.calc=!0;break}else Ea()}function Z(Ga,Pa){for(var Va in Ga)if("_"!==Va.charAt(0)){var va=Ga[Va],Ea=Pa[Va];if(va!==
Ea)if(ba.isPlainObject(va)&&ba.isPlainObject(Ea)){if(Z(va,Ea))return!0}else if(Array.isArray(va)&&Array.isArray(Ea)){if(va.length!==Ea.length)return!0;for(var Qa=0;Qa<va.length;Qa++)if(va[Qa]!==Ea[Qa])if(ba.isPlainObject(va[Qa])&&ba.isPlainObject(Ea[Qa])){if(Z(va[Qa],Ea[Qa]))return!0}else return!0}else return!0}}function aa(Ga){var Pa=Y.select(Ga),Va=Ga._fullLayout;Va._container=Pa.selectAll(".plot-container").data([0]);Va._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",
!0);Va._paperdiv=Va._container.selectAll(".svg-container").data([0]);Va._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative");Va._glcontainer=Va._paperdiv.selectAll(".gl-container").data([{}]);Va._glcontainer.enter().append("div").classed("gl-container",!0);Va._paperdiv.selectAll(".main-svg").remove();Va._paperdiv.select(".modebar-container").remove();Va._paper=Va._paperdiv.insert("svg",":first-child").classed("main-svg",!0);Va._toppaper=Va._paperdiv.append("svg").classed("main-svg",
!0);Va._modebardiv=Va._paperdiv.append("div");Va._hoverpaper=Va._paperdiv.append("svg").classed("main-svg",!0);if(!Va._uid){var va={};Y.selectAll("defs").each(function(){this.id&&(va[this.id.split("-")[1]]=1)});Va._uid=ba.randstr(va)}Va._paperdiv.selectAll(".main-svg").attr(Ca.svgAttrs);Va._defs=Va._paper.append("defs").attr("id","defs-"+Va._uid);Va._clips=Va._defs.append("g").classed("clips",!0);Va._topdefs=Va._toppaper.append("defs").attr("id","topdefs-"+Va._uid);Va._topclips=Va._topdefs.append("g").classed("clips",
!0);Va._bgLayer=Va._paper.append("g").classed("bglayer",!0);Va._draggers=Va._paper.append("g").classed("draglayer",!0);Pa=Va._paper.append("g").classed("layer-below",!0);Va._imageLowerLayer=Pa.append("g").classed("imagelayer",!0);Va._shapeLowerLayer=Pa.append("g").classed("shapelayer",!0);Va._cartesianlayer=Va._paper.append("g").classed("cartesianlayer",!0);Va._polarlayer=Va._paper.append("g").classed("polarlayer",!0);Va._ternarylayer=Va._paper.append("g").classed("ternarylayer",!0);Va._geolayer=
Va._paper.append("g").classed("geolayer",!0);Va._funnelarealayer=Va._paper.append("g").classed("funnelarealayer",!0);Va._pielayer=Va._paper.append("g").classed("pielayer",!0);Va._treemaplayer=Va._paper.append("g").classed("treemaplayer",!0);Va._sunburstlayer=Va._paper.append("g").classed("sunburstlayer",!0);Va._indicatorlayer=Va._toppaper.append("g").classed("indicatorlayer",!0);Va._glimages=Va._paper.append("g").classed("glimages",!0);Pa=Va._toppaper.append("g").classed("layer-above",!0);Va._imageUpperLayer=
Pa.append("g").classed("imagelayer",!0);Va._shapeUpperLayer=Pa.append("g").classed("shapelayer",!0);Va._infolayer=Va._toppaper.append("g").classed("infolayer",!0);Va._menulayer=Va._toppaper.append("g").classed("menulayer",!0);Va._zoomlayer=Va._toppaper.append("g").classed("zoomlayer",!0);Va._hoverlayer=Va._hoverpaper.append("g").classed("hoverlayer",!0);Va._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px");Ga.emit("plotly_framework")}var Y=
b("d3"),ea=b("fast-isnumeric"),ca=b("has-hover"),ba=b("../lib"),ka=ba.nestedProperty,qa=b("../lib/events"),pa=b("../lib/queue"),oa=b("../registry"),ja=b("./plot_schema"),ra=b("../plots/plots"),ha=b("../plots/polar/legacy"),la=b("../plots/cartesian/axes"),ua=b("../components/drawing"),na=b("../components/color"),wa=b("../plots/cartesian/graph_interact").initInteractions,Ca=b("../constants/xmlns_namespaces"),Fa=b("../lib/svg_text_utils"),Xa=b("../plots/cartesian/select").clearSelect,ab=b("./plot_config").dfltConfig,
gb=b("./manage_arrays"),bb=b("./helpers"),La=b("./subroutines"),kb=b("./edit_types"),mb=b("../plots/cartesian/constants").AX_NAME_PATTERN,ya=0,Ia=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Na=/^[xyz]axis[0-9]*\.autorange$/,Ta=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/,hb=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},
{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Ya=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,
attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];G.animate=function(Ga,Pa,Va){function va(eb,pb){var Za=0;return function(){if(eb&&++Za===pb)return eb()}}Ga=ba.getGraphDiv(Ga);if(!ba.isPlotDiv(Ga))throw Error("This element is not a Plotly plot: "+Ga+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");
var Ea=Ga._transitionData;Ea._frameQueue||(Ea._frameQueue=[]);Va=ra.supplyAnimationDefaults(Va);var Qa=Va.transition,$a=Va.frame;void 0===Ea._frameWaitingCnt&&(Ea._frameWaitingCnt=0);return new Promise(function(eb,pb){function Za(){if(0!==Ea._frameQueue.length){for(;Ea._frameQueue.length;){var Fc=Ea._frameQueue.pop();if(Fc.onInterrupt)Fc.onInterrupt()}Ga.emit("plotly_animationinterrupted",[])}}function nb(Fc){if(0!==Fc.length){for(var ld=0;ld<Fc.length;ld++){var yb="byname"===Fc[ld].type?ra.computeFrame(Ga,
Fc[ld].name):Fc[ld].data;var Wb=ld;Wb=Array.isArray($a)?Wb>=$a.length?$a[0]:$a[Wb]:$a;var Dc=ld;Dc=Array.isArray(Qa)?Dc>=Qa.length?Qa[0]:Qa[Dc]:Qa;Dc.duration=Math.min(Dc.duration,Wb.duration);yb={frame:yb,name:Fc[ld].name,frameOpts:Wb,transitionOpts:Dc};ld===Fc.length-1&&(yb.onComplete=va(eb,2),yb.onInterrupt=pb);Ea._frameQueue.push(yb)}"immediate"===Va.mode&&(Ea._lastFrameAt=-Infinity);Ea._animationRaf||Cb()}}function sb(){if(Ea._currentFrame&&Ea._currentFrame.onComplete)Ea._currentFrame.onComplete();
var Fc=Ea._currentFrame=Ea._frameQueue.shift();if(Fc){var ld=Fc.name?Fc.name.toString():null;Ga._fullLayout._currentFrame=ld;Ea._lastFrameAt=Date.now();Ea._timeToNext=Fc.frameOpts.duration;ra.transition(Ga,Fc.frame.data,Fc.frame.layout,bb.coerceTraceIndices(Ga,Fc.frame.traces),Fc.frameOpts,Fc.transitionOpts).then(function(){if(Fc.onComplete)Fc.onComplete()});Ga.emit("plotly_animatingframe",{name:ld,frame:Fc.frame,animation:{frame:Fc.frameOpts,transition:Fc.transitionOpts}})}else Ga.emit("plotly_animated"),
window.cancelAnimationFrame(Ea._animationRaf),Ea._animationRaf=null}function Cb(){Ga.emit("plotly_animating");Ea._lastFrameAt=-Infinity;Ea._timeToNext=0;Ea._runningTransitions=0;Ea._currentFrame=null;var Fc=function(){Ea._animationRaf=window.requestAnimationFrame(Fc);Date.now()-Ea._lastFrameAt>Ea._timeToNext&&sb()};Fc()}function Ib(Fc){Array.isArray(Qa)?Fc.transitionOpts=fc>=Qa.length?Qa[fc]:Qa[0]:Fc.transitionOpts=Qa;fc++;return Fc}var fc=0,qc,Cc=[],cd=void 0===Pa||null===Pa;var Qc=Array.isArray(Pa);
if(!cd&&!Qc&&ba.isPlainObject(Pa))Cc.push({type:"object",data:Ib(ba.extendFlat({},Pa))});else if(cd||-1!==["string","number"].indexOf(typeof Pa))for(Qc=0;Qc<Ea._frames.length;Qc++)(qc=Ea._frames[Qc])&&(cd||String(qc.group)===String(Pa))&&Cc.push({type:"byname",name:String(qc.name),data:Ib({name:qc.name})});else if(Qc)for(Qc=0;Qc<Pa.length;Qc++)qc=Pa[Qc],-1!==["number","string"].indexOf(typeof qc)?(qc=String(qc),Cc.push({type:"byname",name:qc,data:Ib({name:qc})})):ba.isPlainObject(qc)&&Cc.push({type:"object",
data:Ib(ba.extendFlat({},qc))});for(Qc=0;Qc<Cc.length;Qc++)if(qc=Cc[Qc],"byname"===qc.type&&!Ea._frameHash[qc.data.name]){ba.warn('animate failure: frame not found: "'+qc.data.name+'"');pb();return}-1!==["next","immediate"].indexOf(Va.mode)&&Za();"reverse"===Va.direction&&Cc.reverse();var Wc=Ga._fullLayout._currentFrame;if(Wc&&Va.fromcurrent){cd=-1;for(Qc=0;Qc<Cc.length;Qc++)if(qc=Cc[Qc],"byname"===qc.type&&qc.name===Wc){cd=Qc;break}if(0<cd&&cd<Cc.length-1){Wc=[];for(Qc=0;Qc<Cc.length;Qc++)qc=Cc[Qc],
("byname"!==Cc[Qc].type||Qc>cd)&&Wc.push(qc);Cc=Wc}}0<Cc.length?nb(Cc):(Ga.emit("plotly_animated"),eb())})};G.addFrames=function(Ga,Pa,Va){Ga=ba.getGraphDiv(Ga);if(null===Pa||void 0===Pa)return Promise.resolve();if(!ba.isPlotDiv(Ga))throw Error("This element is not a Plotly plot: "+Ga+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var va,Ea=Ga._transitionData._frames,Qa=Ga._transitionData._frameHash;if(!Array.isArray(Pa))throw Error("addFrames failure: frameList must be an Array of frame definitions"+
Pa);var $a=Ea.length+2*Pa.length;var eb=[],pb={};for(va=Pa.length-1;0<=va;va--)if(ba.isPlainObject(Pa[va])){var Za=Pa[va].name;var nb=(Qa[Za]||pb[Za]||{}).name,sb=Pa[va].name,Cb=Qa[nb]||pb[nb];nb&&sb&&"number"===typeof sb&&Cb&&5>ya&&(ya++,ba.warn('addFrames: overwriting frame "'+(Qa[nb]||pb[nb]).name+'" with a frame whose name of type "number" also equates to "'+nb+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),
5===ya&&ba.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed."));pb[Za]={name:Za};eb.push({frame:ra.supplyFrameDefaults(Pa[va]),index:Va&&void 0!==Va[va]&&null!==Va[va]?Va[va]:$a+va})}eb.sort(function(Ib,fc){return Ib.index>fc.index?-1:Ib.index<fc.index?1:0});Pa=[];Va=[];pb=Ea.length;for(va=eb.length-1;0<=va;va--){$a=eb[va].frame;"number"===typeof $a.name&&ba.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings");
if(!$a.name)for(;Qa[$a.name="frame "+Ga._transitionData._counter++];);if(Qa[$a.name]){for(Za=0;Za<Ea.length&&(Ea[Za]||{}).name!==$a.name;Za++);Pa.push({type:"replace",index:Za,value:$a});Va.unshift({type:"replace",index:Za,value:Ea[Za]})}else Za=Math.max(0,Math.min(eb[va].index,pb)),Pa.push({type:"insert",index:Za,value:$a}),Va.unshift({type:"delete",index:Za}),pb++}Ea=va=ra.modifyFrames;Qa=[Ga,Va];eb=[Ga,Pa];pa&&pa.add(Ga,va,Qa,Ea,eb);return ra.modifyFrames(Ga,Pa)};G.deleteFrames=function(Ga,Pa){Ga=
ba.getGraphDiv(Ga);if(!ba.isPlotDiv(Ga))throw Error("This element is not a Plotly plot: "+Ga);var Va,va=Ga._transitionData._frames,Ea=[],Qa=[];if(!Pa)for(Pa=[],Va=0;Va<va.length;Va++)Pa.push(Va);Pa=Pa.slice();Pa.sort();for(Va=Pa.length-1;0<=Va;Va--){var $a=Pa[Va];Ea.push({type:"delete",index:$a});Qa.unshift({type:"insert",index:$a,value:va[$a]})}Va=Pa=ra.modifyFrames;Qa=[Ga,Qa];$a=[Ga,Ea];pa&&pa.add(Ga,Pa,Qa,Va,$a);return ra.modifyFrames(Ga,Ea)};G.addTraces=q;G.deleteTraces=t;G.extendTraces=g;G.moveTraces=
v;G.prependTraces=h;G.newPlot=function(Ga,Pa,Va,va){Ga=ba.getGraphDiv(Ga);ra.cleanPlot([],{},Ga._fullData||[],Ga._fullLayout||{});ra.purge(Ga);return G.plot(Ga,Pa,Va,va)};G.plot=function(Ga,Pa,Va,va){function Ea(){for(var Cc=Cb._basePlotModules,cd=0;cd<Cc.length;cd++)Cc[cd].drawFramework&&Cc[cd].drawFramework(Ga);!Cb._glcanvas&&Cb._has("gl")&&(Cb._glcanvas=Cb._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,
pick:!0}],function(Qc){return Qc.key}),Cb._glcanvas.enter().append("canvas").attr("class",function(Qc){return"gl-canvas gl-canvas-"+Qc.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));if(Cb._glcanvas&&(Cb._glcanvas.attr("width",Cb.width).attr("height",Cb.height),(Cc=Cb._glcanvas.data()[0].regl)&&(Math.floor(Cb.width)!==Cc._gl.drawingBufferWidth||Math.floor(Cb.height)!==Cc._gl.drawingBufferHeight)))if(qc)ba.error("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.");
else return ba.log("WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug. Clearing graph and plotting again."),ra.cleanPlot([],{},Ga._fullData,Cb),ra.supplyDefaults(Ga),Cb=Ga._fullLayout,ra.doCalcdata(Ga),qc++,Ea();"h"===Cb.modebar.orientation?Cb._modebardiv.style("height",null).style("width","100%"):Cb._modebardiv.style("width",null).style("height",Cb.height+"px");return ra.previousPromises(Ga)}function Qa(){ra.clearAutoMarginIds(Ga);La.drawMarginPushers(Ga);la.allowAutoMargin(Ga);
if(Cb._has("pie"))for(var Cc=Ga._fullData,cd=0;cd<Cc.length;cd++){var Qc=Cc[cd];"pie"===Qc.type&&Qc.automargin&&ra.allowAutoMargin(Ga,"pie."+Qc.uid+".automargin")}ra.doAutoMargin(Ga);return ra.previousPromises(Ga)}function $a(){if(Ib)return ba.syncOrAsync([oa.getComponentMethod("shapes","calcAutorange"),oa.getComponentMethod("annotations","calcAutorange"),eb],Ga);eb()}function eb(){Ga._transitioning||(La.doAutoRangeAndConstraints(Ga),sb&&la.saveRangeInitial(Ga),oa.getComponentMethod("rangeslider",
"calcAutorange")(Ga))}function pb(){return la.draw(Ga,sb?"":"redraw")}Ga=ba.getGraphDiv(Ga);qa.init(Ga);if(ba.isPlainObject(Pa)){var Za=Pa;Pa=Za.data;Va=Za.layout;va=Za.config;var nb=Za.frames}if(!1===qa.triggerHandler(Ga,"plotly_beforeplot",[Pa,Va,va]))return Promise.reject();Pa||Va||ba.isPlotDiv(Ga)||ba.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",Ga);k(Ga,va);Va||(Va={});Y.select(Ga).classed("js-plotly-plot",!0);ua.makeTester();Array.isArray(Ga._promises)||
(Ga._promises=[]);var sb=0===(Ga.data||[]).length&&Array.isArray(Pa);Array.isArray(Pa)&&(bb.cleanData(Pa),sb?Ga.data=Pa:Ga.data.push.apply(Ga.data,Pa),Ga.empty=!1);if(!Ga.layout||sb)Ga.layout=bb.cleanLayout(Va);ra.supplyDefaults(Ga);var Cb=Ga._fullLayout;va=Cb._has("cartesian");if(!Cb._has("polar")&&Pa&&Pa[0]&&Pa[0].r)return ba.log("Legacy polar charts are deprecated!"),a(Ga,Pa,Va);Cb._replotting=!0;if(sb||Cb._shouldCreateBgLayer)aa(Ga),Cb._shouldCreateBgLayer&&delete Cb._shouldCreateBgLayer;Ga.framework!==
aa&&(Ga.framework=aa,aa(Ga));ua.initGradients(Ga);sb&&la.saveShowSpikeInitial(Ga);var Ib=!Ga.calcdata||Ga.calcdata.length!==(Ga._fullData||[]).length;Ib&&ra.doCalcdata(Ga);for(Pa=0;Pa<Ga.calcdata.length;Pa++)Ga.calcdata[Pa][0].trace=Ga._fullData[Pa];Ga._context.responsive?Ga._responsiveChartHandler||(Ga._responsiveChartHandler=function(){ba.isHidden(Ga)||ra.resize(Ga)},window.addEventListener("resize",Ga._responsiveChartHandler)):ba.clearResponsive(Ga);var fc=ba.extendFlat({},Cb._size),qc=0;Pa=[ra.previousPromises,
function(){if(nb)return G.addFrames(Ga,nb)},Ea,Qa,function(){if(ra.didMarginChange(fc,Cb._size))return ba.syncOrAsync([Qa,La.layoutStyles],Ga)}];va&&Pa.push($a);Pa.push(La.layoutStyles);va&&Pa.push(pb);Pa.push(La.drawData,La.finalDraw,wa,ra.addLinks,ra.rehover,ra.redrag,ra.doAutoMargin,ra.previousPromises);(Pa=ba.syncOrAsync(Pa,Ga))&&Pa.then||(Pa=Promise.resolve());return Pa.then(function(){r(Ga);return Ga})};G.purge=function(Ga){Ga=ba.getGraphDiv(Ga);var Pa=Ga._fullLayout||{};ra.cleanPlot([],{},
Ga._fullData||[],Pa);ra.purge(Ga);qa.purge(Ga);Pa._container&&Pa._container.remove();delete Ga._context;return Ga};G.react=function(Ga,Pa,Va,va){function Ea(){return G.addFrames(Ga,Za)}var Qa;Ga=ba.getGraphDiv(Ga);bb.clearPromiseQueue(Ga);var $a=Ga._fullData,eb=Ga._fullLayout;if(ba.isPlotDiv(Ga)&&$a&&eb){if(ba.isPlainObject(Pa)){var pb=Pa;Pa=pb.data;Va=pb.layout;va=pb.config;var Za=pb.frames}pb=!1;va&&(pb=ba.extendDeep({},Ga._context),Ga._context=void 0,k(Ga,va),pb=Z(pb,Ga._context));Ga.data=Pa||
[];bb.cleanData(Ga.data);Ga.layout=Va||{};bb.cleanLayout(Ga.layout);Q(Ga.data,Ga.layout,$a,eb);va=Object.getOwnPropertyNames(eb);for(var nb=0;nb<va.length;nb++){var sb=va[nb],Cb=sb.substring(0,5);("xaxis"===Cb||"yaxis"===Cb)&&(sb=eb[sb]._emptyCategories)&&sb()}ra.supplyDefaults(Ga,{skipUpdateCalc:!0});nb=Ga._fullData;va=Ga._fullLayout;sb=void 0===va.datarevision;Cb=va.transition;var Ib=T(Ga,eb,va,sb,Cb),fc=O(Ga,$a,nb,sb,Cb,Ib.newDataRevision);I(Ga)&&(Ib.layoutReplot=!0);fc.calc||Ib.calc?Ga.calcdata=
void 0:ra.supplyDefaultsUpdateCalc(Ga.calcdata,nb);$a=[];Za&&(Ga._transitionData={},ra.createTransitionData(Ga),$a.push(Ea));if(va.transition&&!pb&&(fc.anim||Ib.anim))Ib.ticks&&$a.push(La.doTicksRelayout),ra.doCalcdata(Ga),La.doAutoRangeAndConstraints(Ga),$a.push(function(){return ra.transitionFromReact(Ga,fc,Ib,eb)});else if(fc.fullReplot||Ib.layoutReplot||pb)Ga._fullLayout._skipDefaults=!0,$a.push(G.plot);else{for(Qa in Ib.arrays)if(pb=Ib.arrays[Qa],pb.length)if(va=oa.getComponentMethod(Qa,"drawOne"),
va!==ba.noop)for(nb=0;nb<pb.length;nb++)va(Ga,pb[nb]);else{pb=oa.getComponentMethod(Qa,"draw");if(pb===ba.noop)throw Error("cannot draw components: "+Qa);pb(Ga)}$a.push(ra.previousPromises);fc.style&&$a.push(La.doTraceStyle);(fc.colorbars||Ib.colorbars)&&$a.push(La.doColorBars);Ib.legend&&$a.push(La.doLegend);Ib.layoutstyle&&$a.push(La.layoutStyles);Ib.axrange&&H($a);Ib.ticks&&$a.push(La.doTicksRelayout);Ib.modebar&&$a.push(La.doModeBar);Ib.camera&&$a.push(La.doCamera);$a.push(r)}$a.push(ra.rehover,
ra.redrag);(Qa=ba.syncOrAsync($a,Ga))&&Qa.then||(Qa=Promise.resolve(Ga))}else Qa=G.newPlot(Ga,Pa,Va,va);return Qa.then(function(){Ga.emit("plotly_react",{data:Pa,layout:Va});return Ga})};G.redraw=function(Ga){Ga=ba.getGraphDiv(Ga);if(!ba.isPlotDiv(Ga))throw Error("This element is not a Plotly plot: "+Ga);bb.cleanData(Ga.data);bb.cleanLayout(Ga.layout);Ga.calcdata=void 0;return G.plot(Ga).then(function(){Ga.emit("plotly_redraw");return Ga})};G.relayout=u;G.restyle=w;G.setPlotConfig=function(Ga){return ba.extendFlat(ab,
Ga)};G.update=M;G._guiRelayout=E(u);G._guiRestyle=E(w);G._guiUpdate=E(M);G._storeDirectGUIEdit=function(Ga,Pa,Va){for(var va in Va){var Ea=ka(Ga,va);y(va,Ea.get(),Va[va],Pa)}}},{"../components/color":615,"../components/drawing":637,"../constants/xmlns_namespaces":725,"../lib":749,"../lib/events":738,"../lib/queue":764,"../lib/svg_text_utils":773,"../plots/cartesian/axes":797,"../plots/cartesian/constants":803,"../plots/cartesian/graph_interact":806,"../plots/cartesian/select":816,"../plots/plots":860,
"../plots/polar/legacy":868,"../registry":880,"./edit_types":780,"./helpers":781,"./manage_arrays":783,"./plot_config":785,"./plot_schema":786,"./subroutines":788,d3:169,"fast-isnumeric":241,"has-hover":414}],785:[function(b,D,G){function r(n,p){for(var k in n){var a=n[k];a.valType?p[k]=a.dflt:(p[k]||(p[k]={}),r(a,p[k]))}}b={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",
dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,
min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",
noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},
plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}};G={};r(b,G);D.exports=
{configAttributes:b,dfltConfig:G}},{}],786:[function(b,D,G){function r(E,L){var P,N,Q=E._basePlotModules;if(Q){for(P=0;P<Q.length;P++){var O=Q[P];if(O.attrRegex&&O.attrRegex.test(L)){if(O.layoutAttrOverrides)return O.layoutAttrOverrides;if(!T&&O.layoutAttributes)var T=O.layoutAttributes}if((O=O.baseLayoutAttrOverrides)&&L in O)return O[L]}if(T)return T}if(Q=E._modules)for(P=0;P<Q.length;P++)if((E=Q[P].layoutAttributes)&&L in E)return E[L];for(N in h.componentsRegistry){O=h.componentsRegistry[N];if("colorscale"===
O.name&&0===L.indexOf("coloraxis"))return O.layoutAttributes[L];if(!O.schema&&L===O.name)return O.layoutAttributes}return L in t?t[L]:"radialaxis"===L||"angularaxis"===L?y[L]:y.layout[L]||!1}function n(E,L,P){if(!E)return!1;if(E._isLinkedToArray)if(p(L[P]))P++;else if(P<L.length)return!1;for(;P<L.length;P++){var N=E[L[P]];if(F(N))E=N;else break;if(P===L.length-1)break;if(E._isLinkedToArray){if(P++,!p(L[P]))return!1}else if("info_array"===E.valType){P++;N=L[P];if(!p(N))return!1;var Q=E.items;if(Array.isArray(Q)){if(N>=
Q.length)return!1;if(2===E.dimensions){P++;if(L.length===P)break;E=L[P];if(!p(E))return!1;E=Q[N][E]}else E=Q[N]}else E=Q}}return E}function p(E){return E===Math.round(E)&&0<=E}function k(E){if("area"===E){var L={attributes:z};var P={}}else L=h.modules[E]._module,P=L.basePlotModule;var N={type:null},Q=u({},q),O=u({},L.attributes);G.crawl(O,function(T,V,Z,aa,Y){J(Q,Y).set(void 0);void 0===T&&J(O,Y).set(void 0)});u(N,Q);h.traceIs(E,"noOpacity")&&delete N.opacity;h.traceIs(E,"showLegend")||(delete N.showlegend,
delete N.legendgroup);h.traceIs(E,"noHover")&&(delete N.hoverinfo,delete N.hoverlabel);L.selectPoints||delete N.selectedpoints;u(N,O);P.attributes&&u(N,P.attributes);N.type=E;E={meta:L.meta||{},categories:L.categories||{},animatable:!!L.animatable,type:E,attributes:l(N)};L.layoutAttributes&&(P={},u(P,L.layoutAttributes),E.layoutAttributes=l(P));L.animatable||G.crawl(E,function(T){G.isValObject(T)&&"anim"in T&&delete T.anim});return E}function a(){var E={},L;u(E,t);for(L in h.subplotsRegistry){var P=
h.subplotsRegistry[L];if(P.layoutAttributes)if(Array.isArray(P.attr))for(var N=0;N<P.attr.length;N++)g(E,P,P.attr[N]);else g(E,P,"subplot"===P.attr?P.name:P.attr)}C(E,{radialaxis:y.radialaxis,angularaxis:y.angularaxis});C(E,y.layout);for(L in h.componentsRegistry)if(P=h.componentsRegistry[L],(N=P.schema)&&(N.subplots||N.layout)){if((P=N.subplots)&&P.xaxis&&!P.yaxis)for(var Q in P.xaxis)delete E.yaxis[Q]}else"colorscale"===P.name?u(E,P.layoutAttributes):P.layoutAttributes&&(N=P.layoutAttributes,P=
J(E,P.name),P.set(u(P.get()||{},N)));return{layoutAttributes:l(E)}}function e(E){var L=u({},h.transformsRegistry[E].attributes);Object.keys(h.componentsRegistry).forEach(function(P){var N=h.componentsRegistry[P];N.schema&&N.schema.transforms&&N.schema.transforms[E]&&Object.keys(N.schema.transforms[E]).forEach(function(Q){var O=N.schema.transforms[E][Q];Q=J(L,Q);Q.set(u(Q.get()||{},O))})});return{attributes:l(L)}}function f(){var E={frames:u({},v)};l(E);return E.frames}function l(E){m(E);c(E);d(E);
return E}function m(E){G.crawl(E,function(L,P,N){G.isValObject(L)?"data_array"===L.valType?(L.role="data",N[P+"src"]={valType:"string",editType:"none"}):!0===L.arrayOk&&(N[P+"src"]={valType:"string",editType:"none"}):F(L)&&(L.role="object")})}function c(E){G.crawl(E,function(L,P,N){if(L){var Q=L._isLinkedToArray;Q&&(delete L._isLinkedToArray,N[P]={items:{}},N[P].items[Q]=L,N[P].role="object")}})}function d(E){function L(P){for(var N in P)if(F(P[N]))L(P[N]);else if(Array.isArray(P[N]))for(var Q=0;Q<
P[N].length;Q++)L(P[N][Q]);else P[N]instanceof RegExp&&(P[N]=P[N].toString())}L(E)}function g(E,L,P){E=J(E,P);L=u({},L.layoutAttributes);L._isSubplotObj=!0;E.set(L)}var h=b("../registry");D=b("../lib");var q=b("../plots/attributes"),t=b("../plots/layout_attributes"),v=b("../plots/frame_attributes"),w=b("../plots/animation_attributes"),A=b("./plot_config").configAttributes,z=b("../plots/polar/legacy/area_attributes"),y=b("../plots/polar/legacy/axis_attributes"),B=b("./edit_types"),C=D.extendFlat,u=
D.extendDeepAll,F=D.isPlainObject,H=D.isArrayOrTypedArray,J=D.nestedProperty,I=D.valObjectMeta,M=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];G.IS_SUBPLOT_OBJ="_isSubplotObj";G.IS_LINKED_TO_ARRAY="_isLinkedToArray";G.DEPRECATED="_deprecated";G.UNDERSCORE_ATTRS=M;G.get=function(){var E={};h.allTypes.concat("area").forEach(function(P){E[P]=k(P)});var L={};Object.keys(h.transformsRegistry).forEach(function(P){L[P]=e(P)});return{defs:{valObjects:I,metaKeys:M.concat(["description",
"role","editType","impliedEdits"]),editType:{traces:B.traces,layout:B.layout},impliedEdits:{}},traces:E,layout:a(),transforms:L,frames:f(),animation:l(w),config:l(A)}};G.crawl=function(E,L,P,N){var Q=P||0;N=N||"";Object.keys(E).forEach(function(O){var T=E[O];if(-1===M.indexOf(O)){var V=(N?N+".":"")+O;L(T,O,E,Q,V);G.isValObject(T)||F(T)&&"impliedEdits"!==O&&G.crawl(T,L,Q+1,V)}})};G.isValObject=function(E){return E&&void 0!==E.valType};G.findArrayAttributes=function(E){function L(ea,ca,ba,ka){Q=Q.slice(0,
ka).concat([ca]);O=O.slice(0,ka).concat([ea&&ea._isLinkedToArray]);!ea||"data_array"!==ea.valType&&!0!==ea.arrayOk||"colorbar"===Q[ka-1]&&("ticktext"===ca||"tickvals"===ca)||P(T,0,"")}function P(ea,ca,ba){ea=ea[Q[ca]];ba+=Q[ca];if(ca===Q.length-1)H(ea)&&N.push(V+ba);else if(O[ca]){if(Array.isArray(ea))for(var ka=0;ka<ea.length;ka++)F(ea[ka])&&P(ea[ka],ca+1,ba+"["+ka+"].")}else F(ea)&&P(ea,ca+1,ba+".")}var N=[],Q=[],O=[];var T=E;var V="";G.crawl(q,L);E._module&&E._module.attributes&&G.crawl(E._module.attributes,
L);if(E=E.transforms)for(var Z=0;Z<E.length;Z++){var aa=E[Z],Y=aa._module;Y&&(V="transforms["+Z+"].",T=aa,G.crawl(Y.attributes,L))}return N};G.getTraceValObject=function(E,L){var P=L[0],N=1;if("transforms"===P){if(1===L.length)return q.transforms;P=E.transforms;if(!Array.isArray(P)||!P.length)return!1;N=L[1];if(!p(N)||N>=P.length)return!1;E=(E=(h.transformsRegistry[P[N].type]||{}).attributes)&&E[L[2]];N=3}else if("area"===E.type)E=z[P];else{var Q=E._module;Q||(Q=(h.modules[E.type||q.type.dflt]||{})._module);
if(!Q)return!1;E=(E=Q.attributes)&&E[P];E||(Q=Q.basePlotModule)&&Q.attributes&&(E=Q.attributes[P]);E||(E=q[P])}return n(E,L,N)};G.getLayoutValObject=function(E,L){E=r(E,L[0]);return n(E,L,1)}},{"../lib":749,"../plots/animation_attributes":792,"../plots/attributes":794,"../plots/frame_attributes":826,"../plots/layout_attributes":851,"../plots/polar/legacy/area_attributes":866,"../plots/polar/legacy/axis_attributes":867,"../registry":880,"./edit_types":780,"./plot_config":785}],787:[function(b,D,G){function r(a){"s"!==
a.charAt(a.length-1)&&n.warn("bad argument to arrayDefaultKey: "+a);return a.substr(0,a.length-1)+"defaults"}var n=b("../lib"),p=b("../plots/attributes"),k={name:{valType:"string",editType:"none"},templateitemname:{valType:"string",editType:"calc"}};G.templatedArray=function(a,e){e._isLinkedToArray=a;e.name=k.name;e.templateitemname=k.templateitemname;return e};G.traceTemplater=function(a){var e={},f;for(f in a){var l=a[f];Array.isArray(l)&&l.length&&(e[f]=0)}return{newTrace:function(m){f=n.coerce(m,
{},p,"type");m={type:f,_template:null};if(f in e){l=a[f];var c=e[f]%l.length;e[f]++;m._template=l[c]}return m}}};G.newContainer=function(a,e,f){var l=a._template;f=l&&(l[e]||f&&l[f]);n.isPlainObject(f)||(f=null);return a[e]={_template:f}};G.arrayTemplater=function(a,e,f){var l=(a=a._template)&&a[r(e)],m=a&&a[e];Array.isArray(m)&&m.length||(m=[]);var c={};return{newItem:function(d){var g={name:d.name,_input:d},h=g.templateitemname=d.templateitemname;if(!h||"string"!==typeof h)return g._template=l,
g;for(var q=0;q<m.length;q++){var t=m[q];if(t.name===h)return c[h]=1,g._template=t,g}g[f]=d[f]||!1;g._template=!1;return g},defaultItems:function(){for(var d=[],g=0;g<m.length;g++){var h=m[g],q=h.name;if(q&&"string"===typeof q&&!c[q]){var t={_template:h,name:q,_input:{_templateitemname:q}};t.templateitemname=h.templateitemname;d.push(t);c[q]=1}}return d}}};G.arrayDefaultKey=r;G.arrayEditor=function(a,e,f){function l(){t={};h&&(t[q]={},t[q].templateitemname=h)}function m(v,w){h?n.nestedProperty(t[q],
v).set(w):t[q+"."+v]=w}function c(){var v=t;l();return v}var d=(n.nestedProperty(a,e).get()||[]).length,g=f._index,h=g>=d&&(f._input||{})._templateitemname;h&&(g=d);var q=e+"["+g+"]",t;l();return{modifyBase:function(v,w){t[v]=w},modifyItem:m,getUpdateObj:c,applyUpdate:function(v,w){v&&m(v,w);v=c();for(var A in v)n.nestedProperty(a,A).set(v[A])}}}},{"../lib":749,"../plots/attributes":794}],788:[function(b,D,G){function r(y,B,C){for(var u=0;u<C.length;u++){var F=C[u][0],H=C[u][1];if(!(F[0]>=y[1]||F[1]<=
y[0])&&H[0]<B[1]&&H[1]>B[0])return!0}return!1}function n(y){function B(oa,ja,ra){var ha=oa._lw/2;return"x"===oa._id.charAt(0)?ja?"top"===ra?ja._offset-E-ha:ja._offset+ja._length+E+ha:M.t+M.h*(1-(oa.position||0))+ha%1:ja?"right"===ra?ja._offset+ja._length+E+ha:ja._offset-E-ha:M.l+M.w*(oa.position||0)+ha%1}function C(oa){return"M"+ba+","+oa+"H"+ka}function u(oa){return"M"+ea._offset+","+oa+"h"+ea._length}function F(oa){return"M"+oa+","+pa+"V"+qa}function H(oa){return"M"+oa+","+ca._offset+"v"+ca._length}
function J(oa,ja,ra){if(!oa.showline||N!==oa._mainSubplot)return"";if(!oa._anchorAxis)return ra(oa._mainLinePosition);ra=ja(oa._mainLinePosition);oa.mirror&&(ra+=ja(oa._mainMirrorPosition));return ra}var I=y._fullLayout,M=I._size,E=M.p,L=t.list(y,"",!0),P,N;I._paperdiv.style({width:y._context.responsive&&I.autosize&&!y._context._hasZeroWidth&&!y.layout.width?"100%":I.width+"px",height:y._context.responsive&&I.autosize&&!y._context._hasZeroHeight&&!y.layout.height?"100%":I.height+"px"}).selectAll(".main-svg").call(g.setSize,
I.width,I.height);y._context.setBackground(y,I.paper_bgcolor);G.drawMainTitle(y);q.manage(y);if(!I._has("cartesian"))return l.previousPromises(y);for(P=0;P<L.length;P++){var Q=L[P];var O=Q._anchorAxis;Q._linepositions={};Q._lw=g.crispRound(y,Q.linewidth,1);Q._mainLinePosition=B(Q,O,Q.side);Q._mainMirrorPosition=Q.mirror&&O?B(Q,O,v.OPPOSITE_SIDE[Q.side]):null}P=[];O=[];var T=[],V=1===d.opacity(I.paper_bgcolor)&&1===d.opacity(I.plot_bgcolor)&&I.paper_bgcolor===I.plot_bgcolor;for(N in I._plots)if(Q=
I._plots[N],Q.mainplot)Q.bg&&Q.bg.remove(),Q.bg=void 0;else{var Z=Q.xaxis.domain,aa=Q.yaxis.domain,Y=Q.plotgroup;r(Z,aa,T)?(Z=Y.node(),Q=Q.bg=m.ensureSingle(Y,"rect","bg"),Z.insertBefore(Q.node(),Z.childNodes[0]),O.push(N)):(Y.select("rect.bg").remove(),T.push([Z,aa]),V||(P.push(N),O.push(N)))}Q=I._bgLayer.selectAll(".bg").data(P);Q.enter().append("rect").classed("bg",!0);Q.exit().remove();Q.each(function(oa){I._plots[oa].bg=e.select(this)});for(P=0;P<O.length;P++){Q=I._plots[O[P]];var ea=Q.xaxis;
var ca=Q.yaxis;Q.bg&&Q.bg.call(g.setRect,ea._offset-E,ca._offset-E,ea._length+2*E,ca._length+2*E).call(d.fill,I.plot_bgcolor).style("stroke-width",0)}if(!I._hasOnlyLargeSploms)for(N in I._plots)Q=I._plots[N],ea=Q.xaxis,ca=Q.yaxis,O=Q.clipId="clip"+I._uid+N+"plot",P=m.ensureSingleById(I._clips,"clipPath",O,function(oa){oa.classed("plotclip",!0).append("rect")}),Q.clipRect=P.select("rect").attr({width:ea._length,height:ca._length}),g.setTranslate(Q.plot,ea._offset,ca._offset),Q._hasClipOnAxisFalse?
P=null:(P=O,O=null),g.setClipUrl(Q.plot,P,y),Q.layerClipId=O;for(N in I._plots){Q=I._plots[N];ea=Q.xaxis;ca=Q.yaxis;V="M0,0";if(p(ea,N)){O=a(ea,"left",ca,L);var ba=ea._offset-(O?E+O:0);O=a(ea,"right",ca,L);var ka=ea._offset+ea._length+(O?E+O:0);P=B(ea,ca,"bottom");T=B(ea,ca,"top");O=!ea._anchorAxis||N!==ea._mainSubplot;!O||"allticks"!==ea.mirror&&"all"!==ea.mirror||(ea._linepositions[N]=[P,T]);V=J(ea,C,u);O&&ea.showline&&("all"===ea.mirror||"allticks"===ea.mirror)&&(V+=C(P)+C(T));Q.xlines.style("stroke-width",
ea._lw+"px").call(d.stroke,ea.showline?ea.linecolor:"rgba(0,0,0,0)")}Q.xlines.attr("d",V);V="M0,0";if(p(ca,N)){O=a(ca,"bottom",ea,L);var qa=ca._offset+ca._length+(O?E:0);O=a(ca,"top",ea,L);var pa=ca._offset-(O?E:0);P=B(ca,ea,"left");T=B(ca,ea,"right");O=!ca._anchorAxis||N!==ca._mainSubplot;!O||"allticks"!==ca.mirror&&"all"!==ca.mirror||(ca._linepositions[N]=[P,T]);V=J(ca,F,H);O&&ca.showline&&("all"===ca.mirror||"allticks"===ca.mirror)&&(V+=F(P)+F(T));Q.ylines.style("stroke-width",ca._lw+"px").call(d.stroke,
ca.showline?ca.linecolor:"rgba(0,0,0,0)")}Q.ylines.attr("d",V)}t.makeClipPaths(y);return l.previousPromises(y)}function p(y,B){return(y.ticks||y.showline)&&(B===y._mainSubplot||"all"===y.mirror||"allticks"===y.mirror)}function k(y,B,C){if(!C.showline||!C._lw)return!1;if("all"===C.mirror||"allticks"===C.mirror)return!0;var u=C._anchorAxis;if(!u)return!1;var F=v.FROM_BL[B];return C.side===B?u.domain[F]===y.domain[F]:C.mirror&&u.domain[1-F]===y.domain[1-F]}function a(y,B,C,u){if(k(y,B,C))return C._lw;
for(var F=0;F<u.length;F++){var H=u[F];if(H._mainAxis===C._mainAxis&&k(y,B,H))return H._lw}return 0}var e=b("d3"),f=b("../registry"),l=b("../plots/plots"),m=b("../lib"),c=b("../lib/clear_gl_canvases"),d=b("../components/color"),g=b("../components/drawing"),h=b("../components/titles"),q=b("../components/modebar"),t=b("../plots/cartesian/axes"),v=b("../constants/alignment");D=b("../plots/cartesian/constraints");var w=D.enforce,A=D.clean,z=b("../plots/cartesian/autorange").doAutoRange;G.layoutStyles=
function(y){return m.syncOrAsync([l.doAutoMargin,n],y)};G.drawMainTitle=function(y){var B=y._fullLayout;var C=B.title;var u="middle";m.isRightAnchor(C)?u="end":m.isLeftAnchor(C)&&(u="start");C=u;u=B.title;var F="0em";m.isTopAnchor(u)?F=v.CAP_SHIFT+"em":m.isMiddleAnchor(u)&&(F=v.MID_SHIFT+"em");u=F;F=h.draw;var H=B._dfltTitle.plot;a:{var J=B.title;var I=B._size,M=0;"start"===C?M=J.pad.l:"end"===C&&(M=-J.pad.r);switch(J.xref){case "paper":J=I.l+I.w*J.x+M;break a;default:J=B.width*J.x+M}}a:{I=B.title;
M=B._size;var E=0;"0em"!==u&&u?u===v.CAP_SHIFT+"em"&&(E=I.pad.t):E=-I.pad.b;if("auto"===I.y)I=M.t/2;else switch(I.yref){case "paper":I=M.t+M.h-M.h*I.y+E;break a;default:I=B.height-B.height*I.y+E}}F.call(h,y,"gtitle",{propContainer:B,propName:"title.text",placeholder:H,attributes:{x:J,y:I,"text-anchor":C,dy:u}})};G.doTraceStyle=function(y){var B=y.calcdata,C=[],u;for(u=0;u<B.length;u++){var F=B[u],H=F[0]||{},J=H.trace||{},I=J._module||{},M=I.arraysToCalcdata;M&&M(F,J);(F=I.editStyle)&&C.push({fn:F,
cd0:H})}if(C.length){for(u=0;u<C.length;u++)B=C[u],B.fn(y,B.cd0);c(y);G.redrawReglTraces(y)}l.style(y);f.getComponentMethod("legend","draw")(y);return l.previousPromises(y)};G.doColorBars=function(y){f.getComponentMethod("colorbar","draw")(y);return l.previousPromises(y)};G.layoutReplot=function(y){var B=y.layout;y.layout=void 0;return f.call("plot",y,"",B)};G.doLegend=function(y){f.getComponentMethod("legend","draw")(y);return l.previousPromises(y)};G.doTicksRelayout=function(y){t.draw(y,"redraw");
y._fullLayout._hasOnlyLargeSploms&&(f.subplotsRegistry.splom.updateGrid(y),c(y),G.redrawReglTraces(y));G.drawMainTitle(y);return l.previousPromises(y)};G.doModeBar=function(y){var B=y._fullLayout;q.manage(y);for(var C=0;C<B._basePlotModules.length;C++){var u=B._basePlotModules[C].updateFx;u&&u(y)}return l.previousPromises(y)};G.doCamera=function(y){y=y._fullLayout;for(var B=y._subplots.gl3d,C=0;C<B.length;C++){var u=y[B[C]];u._scene.setViewport(u)}};G.drawData=function(y){var B=y._fullLayout;c(y);
for(var C=B._basePlotModules,u=0;u<C.length;u++)C[u].plot(y);G.redrawReglTraces(y);l.style(y);f.getComponentMethod("shapes","draw")(y);f.getComponentMethod("annotations","draw")(y);f.getComponentMethod("images","draw")(y);B._replotting=!1;return l.previousPromises(y)};G.redrawReglTraces=function(y){var B=y._fullLayout;if(B._has("regl")){var C=y._fullData;y=[];var u=[],F;B._hasOnlyLargeSploms&&B._splomGrid.draw();for(F=0;F<C.length;F++){var H=C[F];!0===H.visible&&0!==H._length&&("splom"===H.type?B._splomScenes[H.uid].draw():
"scattergl"===H.type?m.pushUnique(y,H.xaxis+H.yaxis):"scatterpolargl"===H.type&&m.pushUnique(u,H.subplot))}for(F=0;F<y.length;F++)C=B._plots[y[F]],C._scene&&C._scene.draw();for(F=0;F<u.length;F++)C=B[u[F]]._subplot,C._scene&&C._scene.draw()}};G.doAutoRangeAndConstraints=function(y){var B=y._fullLayout,C=t.list(y,"",!0);B=B._axisMatchGroups||[];for(var u={},F,H=0;H<C.length;H++)F=C[H],A(y,F),z(y,F),u[F._id]=1;w(y);C=0;a:for(;C<B.length;C++){H=B[C];var J=null,I;for(I in H)if(F=t.getFromId(y,I),u[F._id]){if(!1===
F.autorange)continue a;F=m.simpleMap(F.range,F.r2l);J?J[0]<J[1]?(J[0]=Math.min(J[0],F[0]),J[1]=Math.max(J[1],F[1])):(J[0]=Math.max(J[0],F[0]),J[1]=Math.min(J[1],F[1])):J=F}for(I in H)F=t.getFromId(y,I),F.range=m.simpleMap(J,F.l2r),F._input.range=F.range.slice(),F.setScale()}};G.finalDraw=function(y){f.getComponentMethod("rangeslider","draw")(y);f.getComponentMethod("rangeselector","draw")(y)};G.drawMarginPushers=function(y){f.getComponentMethod("legend","draw")(y);f.getComponentMethod("rangeselector",
"draw")(y);f.getComponentMethod("sliders","draw")(y);f.getComponentMethod("updatemenus","draw")(y);f.getComponentMethod("colorbar","draw")(y)}},{"../components/color":615,"../components/drawing":637,"../components/modebar":675,"../components/titles":710,"../constants/alignment":717,"../lib":749,"../lib/clear_gl_canvases":733,"../plots/cartesian/autorange":796,"../plots/cartesian/axes":797,"../plots/cartesian/constraints":804,"../plots/plots":860,"../registry":880,d3:169}],789:[function(b,D,G){function r(t,
v){function w(H,J,I){if(m(J)&&m(H))r(H,J);else if(Array.isArray(J)&&Array.isArray(H)){H=h.arrayTemplater({_template:t},I);for(y=0;y<J.length;y++){I=J[y];var M=H.newItem(I)._template;M&&r(M,I)}H=H.defaultItems();for(y=0;y<H.length;y++)J.push(H[y]._template);for(y=0;y<J.length;y++)delete J[y].templateitemname}}t=l.extendDeep({},t);var A=Object.keys(t).sort(),z,y;for(z=0;z<A.length;z++){var B=A[z],C=t[B];B in v?w(C,v[B],B):v[B]=C;if(n(B)===B)for(var u in v){var F=n(u);u===F||F!==B||u in t||w(C,v[u],
B)}}}function n(t){return t.replace(/[0-9]+$/,"")}function p(t,v,w,A,z){var y=z&&w(z),B;for(B in t){var C=t[B],u=e(t,B,A),F=e(t,B,z),H=w(F);if(!H){var J=n(B);J!==B&&(F=e(t,J,z),H=w(F))}if(!(y&&y===H||!H||H._noTemplating||"data_array"===H.valType||H.arrayOk&&Array.isArray(C)))if(!H.valType&&m(C))p(C,v,w,u,F);else if(H._isLinkedToArray&&Array.isArray(C)){var I=!1;H=0;J={};for(var M=0;M<C.length;M++){var E=C[M];if(m(E)){var L=E.name;L?J[L]||(p(E,v,w,e(C,H,u),e(C,H,F)),H++,J[L]=1):I||(I=h.arrayDefaultKey(B),
I=e(t,I,A),L=e(C,H,u),p(E,v,w,L,e(C,H,F)),E=l.nestedProperty(v,L),l.nestedProperty(v,I).set(E.get()),E.set(null),I=!0)}}}else l.nestedProperty(v,u).set(C)}}function k(t,v){return c.getLayoutValObject(t,l.nestedProperty({},v).parts)}function a(t,v){return c.getTraceValObject(t,l.nestedProperty({},v).parts)}function e(t,v,w){return w?Array.isArray(t)?w+"["+v+"]":w+"."+v:v}function f(t){switch(t.code){case "data":var v="The template has no key data.";break;case "layout":v="The template has no key layout.";
break;case "missing":v=t.path?"There are no templates for item "+t.path+" with name "+t.templateitemname:"There are no templates for trace "+t.index+", of type "+t.traceType+".";break;case "unused":v=t.path?"The template item at "+t.path+" was not used in constructing the plot.":t.dataCount?"Some of the templates of type "+t.traceType+" were not used. The template has "+t.templateCount+" traces, the data only has "+t.dataCount+" of this type.":"The template has "+t.templateCount+" traces of type "+
t.traceType+" but there are none in the data.";break;case "reused":v="Some of the templates of type "+t.traceType+" were used more than once. The template has "+t.templateCount+" traces, the data has "+t.dataCount+" of this type."}t.msg=v;return t}var l=b("../lib"),m=l.isPlainObject,c=b("./plot_schema"),d=b("../plots/plots"),g=b("../plots/attributes"),h=b("./plot_template"),q=b("./plot_config").dfltConfig;G.makeTemplate=function(t){t=l.isPlainObject(t)?t:l.getGraphDiv(t);t=l.extendDeep({_context:q},
{data:t.data,layout:t.layout});d.supplyDefaults(t);var v=t.data||[],w=t.layout||{};w._basePlotModules=t._fullLayout._basePlotModules;w._modules=t._fullLayout._modules;var A={data:{},layout:{}};v.forEach(function(u){var F={};p(u,F,a.bind(null,u));u=l.coerce(u,{},g,"type");var H=A.data[u];H||(H=A.data[u]=[]);H.push(F)});p(w,A.layout,k.bind(null,w));delete A.layout.template;t=w.template;if(m(t)){v=t.layout;var z;m(v)&&r(v,A.layout);var y=t.data;if(m(y)){for(z in A.data)if(v=y[z],Array.isArray(v)){var B=
A.data[z];var C=B.length;w=v.length;for(t=0;t<C;t++)r(v[t%w],B[t]);for(t=C;t<w;t++)B.push(l.extendDeep({},v[t]))}for(z in y)z in A.data||(A.data[z]=l.extendDeep([],y[z]))}}return A};G.validateTemplate=function(t,v){function w(I,M){for(var E in I)if("_"!==E.charAt(0)&&m(I[E])){var L=n(E),P=[],N;for(N=0;N<M.length;N++)P.push(e(I,E,M[N])),L!==E&&P.push(e(I,L,M[N]));for(N=0;N<P.length;N++)F[P[N]]=1;w(I[E],P)}}function A(I,M){for(var E in I)if(-1===E.indexOf("defaults")&&m(I[E])){var L=e(I,E,M);F[L]?A(I[E],
L):u.push({code:"unused",path:L})}}function z(I,M){for(var E in I)if("_"!==E.charAt(0)){var L=I[E],P=e(I,E,M);if(m(L))Array.isArray(I)&&!1===L._template&&L.templateitemname&&u.push({code:"missing",path:P,templateitemname:L.templateitemname}),z(L,P);else{var N;if(N=Array.isArray(L))a:{N=L;for(var Q=0;Q<N.length;Q++)if(m(N[Q])){N=!0;break a}N=void 0}N&&z(L,P)}}}var y=l.extendDeep({},{_context:q,data:t.data,layout:t.layout}),B=y.layout||{};m(v)||(v=B.template||{});var C=v.layout;t=v.data;var u=[];y.layout=
B;y.layout.template=v;d.supplyDefaults(y);v=y._fullLayout;y=y._fullData;var F={};m(C)?(w(v,["layout"]),A(C,"layout")):u.push({code:"layout"});if(m(t)){C={};for(B=0;B<y.length;B++){var H=y[B];var J=H.type;C[J]=(C[J]||0)+1;H._fullInput._template||u.push({code:"missing",index:H._fullInput.index,traceType:J})}for(J in t)B=t[J].length,H=C[J]||0,B>H?u.push({code:"unused",traceType:J,templateCount:B,dataCount:H}):H>B&&u.push({code:"reused",traceType:J,templateCount:B,dataCount:H})}else u.push({code:"data"});
z({data:y,layout:v},"");if(u.length)return u.map(f)}},{"../lib":749,"../plots/attributes":794,"../plots/plots":860,"./plot_config":785,"./plot_schema":786,"./plot_template":787}],790:[function(b,D,G){var r=b("fast-isnumeric"),n=b("./plot_api"),p=b("../plots/plots"),k=b("../lib"),a=b("../snapshot/helpers"),e=b("../snapshot/tosvg"),f=b("../snapshot/svgtoimg"),l=b("../version").version,m={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",
min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};D.exports=function(c,d){function g(L){return!(L in d)||k.validate(d[L],m[L])}function h(L,P){return k.coerce(d,z,m,L,P)}function q(){return new Promise(function(L){setTimeout(L,a.getDelay(J._fullLayout))})}function t(){return new Promise(function(L,P){var N=e(J,y,u),Q=J._fullLayout.width,O=J._fullLayout.height;if("full-json"===y)return P=p.graphJson(J,
!1,"keepdata","object",!0,!0),P.version=l,P=JSON.stringify(P),n.purge(J),document.body.removeChild(J),H?L(P):L(a.encodeJSON(P));n.purge(J);document.body.removeChild(J);if("svg"===y)return H?L(N):L(a.encodeSVG(N));var T=document.createElement("canvas");T.id=k.randstr();f({format:y,width:Q,height:O,scale:u,canvas:T,svg:N,promise:!0}).then(L).catch(P)})}d=d||{};if(k.isPlainObject(c)){var v=c.data||[];var w=c.layout||{};var A=c.config||{};c={}}else c=k.getGraphDiv(c),v=k.extendDeep([],c.data),w=k.extendDeep({},
c.layout),A=c._context,c=c._fullLayout||{};if(!g("width")&&null!==d.width||!g("height")&&null!==d.height)throw Error("Height and width should be pixel values.");if(!g("format"))throw Error("Image format is not jpeg, png, svg or webp.");var z={},y=h("format"),B=h("width"),C=h("height"),u=h("scale"),F=h("setBackground"),H=h("imageDataOnly"),J=document.createElement("div");J.style.position="absolute";J.style.left="-5000px";document.body.appendChild(J);var I=k.extendFlat({},w);B?I.width=B:null===d.width&&
r(c.width)&&(I.width=c.width);C?I.height=C:null===d.height&&r(c.height)&&(I.height=c.height);var M=k.extendFlat({},A,{_exportedPlot:!0,staticPlot:!0,setBackground:F}),E=a.getRedrawFunc(J);return new Promise(function(L,P){n.plot(J,v,I,M).then(E).then(q).then(t).then(function(N){N=H?N.replace(a.IMAGE_URL_PREFIX,""):N;L(N)}).catch(function(N){P(N)})})}},{"../lib":749,"../plots/plots":860,"../snapshot/helpers":884,"../snapshot/svgtoimg":886,"../snapshot/tosvg":888,"../version":1337,"./plot_api":784,"fast-isnumeric":241}],
791:[function(b,D,G){function r(q,t,v,w,A,z){z=z||[];for(var y=Object.keys(q),B=0;B<y.length;B++){var C=y[B];if("transforms"!==C){var u=z.slice();u.push(C);var F=q[C],H=t[C];var J=v;if(C in J)var I=J[C];else I=k(C),I=J[I.keyMinusId];var M=(I||{}).valType,E="info_array"===M,L="colorscale"===M;J=(I||{}).items;var P=v;var N=C,Q=k(N),O=Q.keyMinusId;Q=Q.id;P=O in P&&P[O]._isSubplotObj&&Q?!0:N in P;if(P)if(m(F)&&m(H)&&"any"!==M)r(F,H,I,w,A,u);else if(E&&c(F))if(F.length>H.length&&w.push(p("unused",A,u.concat(H.length))),
C=H.length,(M=Array.isArray(J))&&(C=Math.min(C,J.length)),2===I.dimensions)for(E=0;E<C;E++)if(c(F[E]))for(F[E].length>H[E].length&&w.push(p("unused",A,u.concat(E,H[E].length))),O=H[E].length,I=0;I<(M?Math.min(O,J[E].length):O);I++)L=M?J[E][I]:J,P=F[E][I],N=H[E][I],a.validate(P,L)?N!==P&&N!==+P&&w.push(p("dynamic",A,u.concat(E,I),P,N)):w.push(p("value",A,u.concat(E,I),P));else w.push(p("array",A,u.concat(E),F[E]));else for(E=0;E<C;E++)L=M?J[E]:J,P=F[E],N=H[E],a.validate(P,L)?N!==P&&N!==+P&&w.push(p("dynamic",
A,u.concat(E),P,N)):w.push(p("value",A,u.concat(E),P));else if(I.items&&!E&&c(F)){J=J[Object.keys(J)[0]];C=[];for(I=0;I<H.length;I++)E=H[I]._index||I,M=u.slice(),M.push(E),m(F[E])&&m(H[I])&&(C.push(E),E=F[E],L=H[I],m(E)&&!1!==E.visible&&!1===L.visible?w.push(p("invisible",A,M)):r(E,L,J,w,A,M));for(I=0;I<F.length;I++)M=u.slice(),M.push(I),m(F[I])?-1===C.indexOf(I)&&w.push(p("unused",A,M)):w.push(p("object",A,M,F[I]))}else!m(F)&&m(H)?w.push(p("object",A,u,F)):d(F)||!d(H)||E||L?C in t?a.validate(F,I)?
"enumerated"===I.valType&&(I.coerceNumber&&F!==+H||F!==H)&&w.push(p("dynamic",A,u,F,H)):w.push(p("value",A,u,F)):w.push(p("unused",A,u,F)):w.push(p("array",A,u,F));else w.push(p("schema",A,u))}}return w}function n(q){return c(q)?"In data trace "+q[1]+", ":"In "+q+", "}function p(q,t,v,w,A){v=v||"";if(c(t)){var z=t[0];var y=t[1]}else z=t,y=null;var B=v;if(c(B)){for(var C="",u=0;u<B.length;u++){var F=B[u];C="number"===typeof F?C.substr(0,C.length-1)+"["+F+"]":C+F;u<B.length-1&&(C+=".")}B=C}else B=String(B);
t=g[q](t,B,w,A);a.log(t);return{code:q,container:z,trace:y,path:v,astr:B,msg:t}}function k(q){q=q.match(h);return{keyMinusId:q&&q[1],id:q&&q[2]}}var a=b("../lib"),e=b("../plots/plots"),f=b("./plot_schema"),l=b("./plot_config").dfltConfig,m=a.isPlainObject,c=Array.isArray,d=a.isArrayOrTypedArray;D.exports=function(q,t){void 0===q&&(q=[]);void 0===t&&(t={});var v=f.get(),w=[],A={_context:a.extendFlat({},l)};if(c(q)){A.data=a.extendDeep([],q);var z=q}else A.data=[],z=[],w.push(p("array","data"));if(m(t)){A.layout=
a.extendDeep({},t);var y=t}else A.layout={},y={},1<arguments.length&&w.push(p("object","layout"));e.supplyDefaults(A);for(var B=A._fullData,C=z.length,u=0;u<C;u++){var F=z[u],H=["data",u];if(m(F)){var J=B[u],I=J.type,M=v.traces[I].attributes;M.type={valType:"enumerated",values:[I]};!1===J.visible&&!1!==F.visible&&w.push(p("invisible",H));r(F,J,M,w,H);F=F.transforms;J=J.transforms;if(F)for(c(F)||w.push(p("array",H,["transforms"])),H.push("transforms"),I=0;I<F.length;I++){M=["transforms",I];var E=F[I].type;
m(F[I])?(E=v.transforms[E]?v.transforms[E].attributes:{},E.type={valType:"enumerated",values:Object.keys(v.transforms)},r(F[I],J[I],E,w,H,M)):w.push(p("object",H,M))}}else w.push(p("object",H))}A=A._fullLayout;z=v.layout.layoutAttributes;for(C=0;C<B.length;C++)u=B[C],H=v.traces[u.type],(F=H.layoutAttributes)&&(u.subplot?a.extendFlat(z[H.attributes.subplot.dflt],F):a.extendFlat(z,F));r(y,A,z,w,"layout");return 0===w.length?void 0:w};var g={object:function(q,t){return("layout"===q&&""===t?"The layout argument":
"data"===q[0]&&""===t?"Trace "+q[1]+" in the data argument":n(q)+"key "+t)+" must be linked to an object container"},array:function(q,t){return("data"===q?"The data argument":n(q)+"key "+t)+" must be linked to an array container"},schema:function(q,t){return n(q)+"key "+t+" is not part of the schema"},unused:function(q,t,v){v=m(v)?"container":"key";return n(q)+v+" "+t+" did not get coerced"},dynamic:function(q,t,v,w){return[n(q)+"key",t,"(set to '"+v+"')","got reset to","'"+w+"'","during defaults."].join(" ")},
invisible:function(q,t){return(t?n(q)+"item "+t:"Trace "+q[1])+" got defaulted to be not visible"},value:function(q,t,v){return[n(q)+"key "+t,"is set to an invalid value ("+v+")"].join(" ")}},h=a.counterRegex("([a-z]+)")},{"../lib":749,"../plots/plots":860,"./plot_config":785,"./plot_schema":786}],792:[function(b,D,G){D.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",
dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:"linear quad cubic sin exp circle elastic back bounce linear-in quad-in cubic-in sin-in exp-in circle-in elastic-in back-in bounce-in linear-out quad-out cubic-out sin-out exp-out circle-out elastic-out back-out bounce-out linear-in-out quad-in-out cubic-in-out sin-in-out exp-in-out circle-in-out elastic-in-out back-in-out bounce-in-out".split(" "),
editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],793:[function(b,D,G){var r=b("../lib"),n=b("../plot_api/plot_template");D.exports=function(p,k,a){var e=a.name,f=a.inclusionAttr||"visible",l=k[e],m=r.isArrayOrTypedArray(p[e])?p[e]:[];p=k[e]=[];var c=n.arrayTemplater(k,e,f);for(e=0;e<m.length;e++){var d=m[e];if(r.isPlainObject(d))var g=c.newItem(d);else g=c.newItem({}),g[f]=!1;g._index=e;!1!==g[f]&&a.handleItemDefaults(d,
g,k,a);p.push(g)}f=c.defaultItems();for(e=0;e<f.length;e++)g=f[e],g._index=p.length,a.handleItemDefaults({},g,k,a,{}),p.push(g);if(r.isArrayOrTypedArray(l))for(k=Math.min(l.length,p.length),e=0;e<k;e++)r.relinkPrivateKeys(p[e],l[e]);return p}},{"../lib":749,"../plot_api/plot_template":787}],794:[function(b,D,G){b=b("../components/fx/attributes");D.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,
!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},
hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:b.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1E4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":646}],795:[function(b,D,G){D.exports={xaxis:{valType:"subplotid",
dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],796:[function(b,D,G){function r(g,h){function q(O,T){return Math.max(O,A(T))}var t,v,w=[],A=n(h);w=p(g,h);var z=w.min,y=w.max;if(0===z.length||0===y.length)return m.simpleMap(h.range,h.r2l);w=z[0].val;var B=y[0].val;for(t=1;t<z.length&&w===B;t++)w=Math.min(w,z[t].val);for(t=1;t<y.length&&w===B;t++)B=Math.max(B,y[t].val);g=!1;h.range&&(g=m.simpleMap(h.range,h.r2l),g=g[1]<g[0]);"reversed"===
h.autorange&&(g=!0,h.autorange=!0);var C=h.rangemode,u="tozero"===C,F="nonnegative"===C;C=h._length;var H=C/10,J=function(O,T){var V=0;if(h.rangebreaks)for(O=h.locateBreaks(O,T),T=0;T<O.length;T++){var Z=O[T];V+=Z.max-Z.min}return V},I=0;for(t=0;t<z.length;t++){var M=z[t];for(v=0;v<y.length;v++){var E=y[v];var L=E.val-M.val-J(M.val,E.val);if(0<L){var P=C-A(M)-A(E);if(P>H){if(L/P>I){var N=M;var Q=E;I=L/P}}else L/C>I&&(N={val:M.val,pad:0},Q={val:E.val,pad:0},I=L/C)}}}w===B?(M=w-1,E=w+1,u?0===w?w=[0,
1]:(z=(0<w?y:z).reduce(q,0),z=w/(1-Math.min(.5,z/C)),w=0<w?[0,z]:[z,0]):w=F?[Math.max(0,M),Math.max(1,E)]:[M,E]):(u?(0<=N.val&&(N={val:0,pad:0}),0>=Q.val&&(Q={val:0,pad:0})):F&&(0>N.val-I*A(N)&&(N={val:0,pad:0}),0>=Q.val&&(Q={val:1,pad:0})),I=(Q.val-N.val-J(M.val,E.val))/(C-A(N)-A(Q)),w=[N.val-I*A(N),Q.val+I*A(Q)]);g&&w.reverse();return m.simpleMap(w,h.l2r||Number)}function n(g){var h=g._length/20;"domain"===g.constrain&&g._inputDomain&&(h*=(g._inputDomain[1]-g._inputDomain[0])/(g.domain[1]-g.domain[0]));
return function(q){return q.pad+(q.extrapad?h:0)}}function p(g,h){function q(C,u){for(z=0;z<u.length;z++){var F=C[u[z]],H=(F._extremes||{})[t];if(!0===F.visible&&H){for(y=0;y<H.min.length;y++)B=H.min[y],k(w,B.val,B.pad,{extrapad:B.extrapad},e);for(y=0;y<H.max.length;y++)B=H.max[y],k(A,B.val,B.pad,{extrapad:B.extrapad},f)}}}var t=h._id,v=g._fullLayout,w=[],A=[],z,y,B;q(g._fullData,h._traceIndices);q(v.annotations||[],h._annIndices||[]);q(v.shapes||[],h._shapeIndices||[]);return{min:w,max:A}}function k(g,
h,q,t,v){var w=t.tozero;t=t.extrapad;for(var A=!0,z=0;z<g.length&&A;z++){var y=g[z];if(v(y.val,h)&&y.pad>=q&&(y.extrapad||!t)){A=!1;break}else v(h,y.val)&&y.pad<=q&&(t||!y.extrapad)&&(g.splice(z,1),z--)}A&&(v=w&&0===h,g.push({val:h,pad:v?0:q,extrapad:v?!1:t}))}function a(g){return l(g)&&Math.abs(g)<c}function e(g,h){return g<=h}function f(g,h){return g>=h}var l=b("fast-isnumeric"),m=b("../../lib"),c=b("../../constants/numerical").FP_SAFE,d=b("../../registry");D.exports={getAutoRange:r,makePadFn:n,
doAutoRange:function(g,h){h.setScale();if(h.autorange){h.range=r(g,h);h._r=h.range.slice();h._rl=m.simpleMap(h._r,h.r2l);var q=h._input,t={};t[h._attr+".range"]=h.range;t[h._attr+".autorange"]=h.autorange;d.call("_storeDirectGUIEdit",g.layout,g._fullLayout._preGUI,t);q.range=h.range.slice();q.autorange=h.autorange}(q=h._anchorAxis)&&q.rangeslider&&((t=q.rangeslider[h._name])&&"auto"===t.rangemode&&(t.range=r(g,h)),q._input.rangeslider[h._name]=m.extendFlat({},t))},findExtremes:function(g,h,q){function t(Y){if(Array.isArray(Y))return u=
!0,function(ca){return Math.max(Number(Y[ca]||0),0)};var ea=Math.max(Number(Y||0),0);return function(){return ea}}function v(Y){J=h[Y];l(J)&&(E=P(Y),L=N(Y),F?(I=g.c2l(J)-O(Y),M=g.c2l(J)+Q(Y)):(T=J-O(Y),V=J+Q(Y),C&&T<V/10&&(T=V/10),I=g.c2l(T),M=g.c2l(V)),B&&(I=Math.min(0,I),M=Math.max(0,M)),a(I)&&k(w,I,L,aa,e),a(M)&&k(A,M,E,aa,f))}q||(q={});g._m||g.setScale();var w=[],A=[],z=h.length,y=q.padded||!1,B=q.tozero&&("linear"===g.type||"-"===g.type),C="log"===g.type,u=!1,F=q.vpadLinearized||!1,H,J,I,M,E,
L,P=t((0<g._m?q.ppadplus:q.ppadminus)||q.ppad||0),N=t((0<g._m?q.ppadminus:q.ppadplus)||q.ppad||0),Q=t(q.vpadplus||q.vpad),O=t(q.vpadminus||q.vpad);if(!u){var T=Infinity;var V=-Infinity;if(C)for(H=0;H<z;H++){var Z=h[H];Z<T&&0<Z&&(T=Z);Z>V&&Z<c&&(V=Z)}else for(H=0;H<z;H++)Z=h[H],Z<T&&Z>-c&&(T=Z),Z>V&&Z<c&&(V=Z);h=[T,V];z=2}var aa={tozero:B,extrapad:y};y=Math.min(6,z);for(H=0;H<y;H++)v(H);for(H=z-1;H>=y;H--)v(H);return{min:w,max:A,opts:q}},concatExtremes:p}},{"../../constants/numerical":724,"../../lib":749,
"../../registry":880,"fast-isnumeric":241}],797:[function(b,D,G){function r(va){var Ea=1E-4*(va[1]-va[0]);return[va[0]-Ea,va[1]+Ea]}function n(va){return+va}function p(va){return String(va)}function k(va,Ea,Qa,$a,eb){function pb(fc){return 2>(1+100*(fc-va)/Qa.dtick)%100}for(var Za=0,nb=0,sb=0,Cb=0,Ib=0;Ib<Ea.length;Ib++)0===Ea[Ib]%1?sb++:E(Ea[Ib])||Cb++,pb(Ea[Ib])&&Za++,pb(Ea[Ib]+Qa.dtick/2)&&nb++;Ea=Ea.length-Cb;sb===Ea&&"date"!==Qa.type?1>Qa.dtick?va=$a-.5*Qa.dtick:(va-=.5,va+Qa.dtick<$a&&(va+=
Qa.dtick)):nb<.1*Ea&&(Za>.3*Ea||pb($a)||pb(eb))&&(eb=Qa.dtick/2,va+=va+eb<$a?eb:-eb);return va}function a(va){var Ea=va.tickvals,Qa=va.ticktext,$a=Array(Ea.length),eb=N.simpleMap(va.range,va.r2l),pb=r(eb);eb=Math.min(pb[0],pb[1]);pb=Math.max(pb[0],pb[1]);var Za=0;Array.isArray(Qa)||(Qa=[]);var nb="category"===va.type?va.d2l_noadd:va.d2l;"log"===va.type&&"L"!==String(va.dtick).charAt(0)&&(va.dtick="L"+Math.pow(10,Math.floor(Math.min(va.range[0],va.range[1]))-1));for(var sb=0;sb<Ea.length;sb++){var Cb=
nb(Ea[sb]);Cb>eb&&Cb<pb&&($a[Za]=void 0===Qa[sb]?La.tickText(va,Cb):l(va,Cb,String(Qa[sb])),Za++)}Za<Ea.length&&$a.splice(Za,Ea.length-Za);va.rangebreaks&&($a=$a.filter(function(Ib){return va.maskBreaks(Ib.x)!==Fa}));return $a}function e(va,Ea,Qa){return Ea*N.roundUp(va/Ea,Qa)}function f(va){var Ea=va.dtick;va._tickexponent=0;E(Ea)||"string"===typeof Ea||(Ea=1);if("category"===va.type||"multicategory"===va.type)va._tickround=null;if("date"===va.type){var Qa=va.r2l(va.tick0),$a=va.l2r(Qa).replace(/(^-|i)/g,
""),eb=$a.length;"M"===String(Ea).charAt(0)?10<eb||"01-01"!==$a.substr(5)?va._tickround="d":va._tickround=0===+Ea.substr(1)%12?"y":"m":Ea>=ha&&10>=eb||Ea>=15*ha?va._tickround="d":Ea>=na&&16>=eb||Ea>=ua?va._tickround="M":Ea>=wa&&19>=eb||Ea>=na?va._tickround="S":(Ea=va.l2r(Qa+Ea).replace(/^-/,"").length,va._tickround=Math.max(eb,Ea)-20,0>va._tickround&&(va._tickround=4))}else E(Ea)||"L"===Ea.charAt(0)?(eb=va.range.map(va.r2d||Number),E(Ea)||(Ea=Number(Ea.substr(1))),va._tickround=2-Math.floor(Math.log(Ea)/
Math.LN10+.01),Ea=Math.floor(Math.log(Math.max(Math.abs(eb[0]),Math.abs(eb[1])))/Math.LN10+.01),3<Math.abs(Ea)&&(!v(va.exponentformat)||14<Ea||-15>Ea?va._tickexponent=Ea:va._tickexponent=3*Math.round((Ea-1)/3))):va._tickround=null}function l(va,Ea,Qa){va=va.tickfont||{};return{x:Ea,dx:0,dy:0,text:Qa||"",fontSize:va.size,font:va.family,fontColor:va.color}}function m(va,Ea,Qa,$a){var eb=va._tickround,pb=Qa&&va.hoverformat||La.getTickFormat(va);$a&&(eb=E(eb)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[eb]);pb=N.formatDate(Ea.x,
pb,eb,va._dateFormat,va.calendar,va._extraFormat);var Za=pb.indexOf("\n");if(-1!==Za){var nb=pb.substr(Za+1);pb=pb.substr(0,Za)}$a&&("00:00:00"===pb||"00:00"===pb?(pb=nb,nb=""):8===pb.length&&(pb=pb.replace(/:00$/,"")));nb&&(Qa?pb="d"===eb?pb+(", "+nb):nb+(pb?", "+pb:""):va._inCalcTicks&&nb===va._prevDateHead||(pb+="\x3cbr\x3e"+nb,va._prevDateHead=nb));Ea.text=pb}function c(va,Ea,Qa,$a,eb){var pb=va.dtick;Qa=Ea.x;var Za=va.tickformat,nb="string"===typeof pb&&pb.charAt(0);"never"===eb&&(eb="");$a&&
"L"!==nb&&(pb="L3",nb="L");if(Za||"L"===nb)Ea.text=w(Math.pow(10,Qa),va,eb,$a);else if(E(pb)||"D"===nb&&.1>N.mod(Qa+.01,1))$a=Math.round(Qa),eb=Math.abs($a),Za=va.exponentformat,"power"===Za||v(Za)&&(14<$a||-15>$a)?(Ea.text=0===$a?1:1===$a?"10":"10\x3csup\x3e"+(1<$a?"":Ca)+eb+"\x3c/sup\x3e",Ea.fontSize*=1.25):("e"===Za||"E"===Za)&&2<eb?Ea.text="1"+Za+(0<$a?"+":Ca)+eb:(Ea.text=w(Math.pow(10,Qa),va,"","fakehover"),"D1"===pb&&"y"===va._id.charAt(0)&&(Ea.dy-=Ea.fontSize/6));else if("D"===nb)Ea.text=String(Math.round(Math.pow(10,
N.mod(Qa,1)))),Ea.fontSize*=.75;else throw"unrecognized dtick "+String(pb);"D1"===va.dtick&&(pb=String(Ea.text).charAt(0),"0"===pb||"1"===pb)&&("y"===va._id.charAt(0)?Ea.dx-=Ea.fontSize/4:(Ea.dy+=Ea.fontSize/2,Ea.dx+=(va.range[1]>va.range[0]?1:-1)*Ea.fontSize*(0>Qa?.5:.25)))}function d(va,Ea){va=va._categories[Math.round(Ea.x)];void 0===va&&(va="");Ea.text=String(va)}function g(va,Ea,Qa){var $a=va._categories[Math.round(Ea.x)]||[];va=void 0===$a[1]?"":String($a[1]);$a=void 0===$a[0]?"":String($a[0]);
Qa?Ea.text=$a+" - "+va:(Ea.text=va,Ea.text2=$a)}function h(va,Ea,Qa,$a,eb){"never"===eb?eb="":"all"===va.showexponent&&1E-6>Math.abs(Ea.x/va.dtick)&&(eb="hide");Ea.text=w(Ea.x,va,eb,$a)}function q(va,Ea,Qa,$a,eb){"radians"!==va.thetaunit||Qa?Ea.text=w(Ea.x,va,eb,$a):(Qa=Ea.x/180,0===Qa?Ea.text="0":(Qa=t(Qa),100<=Qa[1]?Ea.text=w(N.deg2rad(Ea.x),va,eb,$a):(va=0>Ea.x,Ea.text=1===Qa[1]?1===Qa[0]?"π":Qa[0]+"π":["\x3csup\x3e",Qa[0],"\x3c/sup\x3e⁄\x3csub\x3e",Qa[1],"\x3c/sub\x3eπ"].join(""),va&&(Ea.text=
Ca+Ea.text))))}function t(va){function Ea(eb,pb){return 1E-6>=Math.abs(pb-0)?eb:Ea(pb,eb%pb)}var Qa=function(eb){for(var pb=1;!(1E-6>=Math.abs(Math.round(eb*pb)/pb-eb));)pb*=10;return pb}(va);va*=Qa;var $a=Math.abs(Ea(va,Qa));return[Math.round(va/$a),Math.round(Qa/$a)]}function v(va){return"SI"===va||"B"===va}function w(va,Ea,Qa,$a){var eb=0>va,pb=Ea._tickround;Qa=Qa||Ea.exponentformat||"B";var Za=Ea._tickexponent,nb=La.getTickFormat(Ea),sb=Ea.separatethousands;$a&&(Za={exponentformat:Qa,dtick:"none"===
Ea.showexponent?Ea.dtick:E(va)?Math.abs(va)||1:1,range:"none"===Ea.showexponent?Ea.range.map(Ea.r2d):[0,va||1]},f(Za),pb=(Number(Za._tickround)||0)+4,Za=Za._tickexponent,Ea.hoverformat&&(nb=Ea.hoverformat));if(nb)return Ea._numFormat(nb)(va).replace(/-/g,Ca);$a=Math.pow(10,-pb)/2;"none"===Qa&&(Za=0);va=Math.abs(va);if(va<$a)va="0",eb=!1;else{va+=$a;Za&&(va*=Math.pow(10,-Za),pb+=Za);if(0===pb)va=String(Math.floor(va));else if(0>pb)for(va=String(Math.round(va)),va=va.substr(0,va.length+pb);0>pb;pb++)va+=
"0";else va=String(va),($a=va.indexOf(".")+1)&&(va=va.substr(0,$a+pb).replace(/\.?0+$/,""));va=N.numSeparate(va,Ea._separators,sb)}Za&&"hide"!==Qa&&(v(Qa)&&(14<Za||-15>Za)&&(Qa="power"),Ea=0>Za?Ca+-Za:"power"!==Qa?"+"+Za:String(Za),"e"===Qa||"E"===Qa?va+=Qa+Ea:"power"===Qa?va+="×10\x3csup\x3e"+Ea+"\x3c/sup\x3e":"B"===Qa&&9===Za?va+="B":v(Qa)&&(va+=Va[Za/3+5]));return eb?Ca+va:va}function A(va,Ea){var Qa=[],$a=function(eb,pb){pb=eb.xbnd[pb];null!==pb&&Qa.push(N.extendFlat({},eb,{x:pb}))};if(Ea.length){for(va=
0;va<Ea.length;va++)$a(Ea[va],0);$a(Ea[va-1],1)}return Qa}function z(va,Ea){var Qa=[],$a=Ea.length&&Ea[Ea.length-1].x<Ea[0].x,eb=function(nb,sb){sb=nb.xbnd[sb];null!==sb&&Qa.push(N.extendFlat({},nb,{x:sb}))};if(va.showdividers&&Ea.length){for(va=0;va<Ea.length;va++){var pb=Ea[va];pb.text2!==Za&&eb(pb,$a?1:0);var Za=pb.text2}eb(Ea[va-1],$a?0:1)}return Qa}function y(va,Ea){if(va._selections[Ea].size()){var Qa=Infinity;var $a=-Infinity;var eb=Infinity;var pb=-Infinity;va._selections[Ea].each(function(){var Za=
H(this);Za=V.bBox(Za.node().parentNode);Qa=Math.min(Qa,Za.top);$a=Math.max($a,Za.bottom);eb=Math.min(eb,Za.left);pb=Math.max(pb,Za.right)})}else pb=eb=$a=Qa=0;return{top:Qa,bottom:$a,left:eb,right:pb,height:$a-Qa,width:pb-eb}}function B(va){return[va.text,va.x,va.axInfo,va.font,va.fontSize,va.fontColor].join("_")}function C(va){var Ea=va.title.font.size,Qa=(va.title.text.match(Q.BR_TAG_ALL)||[]).length;return va.title.hasOwnProperty("standoff")?Qa?Ea*(ab+Qa*gb):Ea*ab:Qa?Ea*(Qa+1)*gb:Ea}function u(va,
Ea){Ea=va.l2p(Ea);return 1<Ea&&Ea<va._length-1}function F(va,Ea,Qa,$a){function eb(Ib){function fc(cd){return"number"===typeof cd&&Math.abs(cd-Cb)<qc}if(!Ib.showline||!Ib.linewidth)return!1;var qc=Math.max((Ib.linewidth+Ea.zerolinewidth)/2,1);if(fc(Ib._mainLinePosition)||fc(Ib._mainMirrorPosition))return!0;Ib=Ib._linepositions||{};for(var Cc in Ib)if(fc(Ib[Cc][0])||fc(Ib[Cc][1]))return!0}var pb=Qa._mainAxis;if(pb){var Za=va._fullLayout,nb=Ea._id.charAt(0),sb=La.counterLetter(Ea._id),Cb=Ea._offset+
(Math.abs($a[0])<Math.abs($a[1])===("x"===nb)?0:Ea._length);$a=Za._plots[Qa._mainSubplot];if(!($a.mainplotinfo||$a).overlays.length)return eb(Qa,Cb);va=La.list(va,sb);for(Qa=0;Qa<va.length;Qa++)if(sb=va[Qa],sb._mainAxis===pb&&eb(sb,Cb))return!0}}function H(va){va=M.select(va);var Ea=va.select(".text-math-group");return Ea.empty()?va.select("text"):Ea}function J(va){return va._id+".automargin"}function I(va,Ea){for(var Qa=0;Qa<Ea.length;Qa++)-1===va.indexOf(Ea[Qa])&&va.push(Ea[Qa])}var M=b("d3"),E=
b("fast-isnumeric"),L=b("../../plots/plots"),P=b("../../registry"),N=b("../../lib"),Q=b("../../lib/svg_text_utils"),O=b("../../components/titles"),T=b("../../components/color"),V=b("../../components/drawing"),Z=b("./layout_attributes"),aa=b("./clean_ticks");G=b("../../constants/numerical");var Y=G.ONEMAXYEAR,ea=G.ONEAVGYEAR,ca=G.ONEMINYEAR,ba=G.ONEMAXQUARTER,ka=G.ONEAVGQUARTER,qa=G.ONEMINQUARTER,pa=G.ONEMAXMONTH,oa=G.ONEAVGMONTH,ja=G.ONEMINMONTH,ra=G.ONEWEEK,ha=G.ONEDAY,la=ha/2,ua=G.ONEHOUR,na=G.ONEMIN,
wa=G.ONESEC,Ca=G.MINUS_SIGN,Fa=G.BADNUM;G=b("../../constants/alignment");var Xa=G.MID_SHIFT,ab=G.CAP_SHIFT,gb=G.LINE_SPACING,bb=G.OPPOSITE_SIDE,La=D.exports={};La.setConvert=b("./set_convert");var kb=b("./axis_autotype"),mb=b("./axis_ids");La.id2name=mb.id2name;La.name2id=mb.name2id;La.cleanId=mb.cleanId;La.list=mb.list;La.listIds=mb.listIds;La.getFromId=mb.getFromId;La.getFromTrace=mb.getFromTrace;b=b("./autorange");La.getAutoRange=b.getAutoRange;La.findExtremes=b.findExtremes;La.coerceRef=function(va,
Ea,Qa,$a,eb,pb){var Za=$a.charAt($a.length-1);Qa=Qa._fullLayout._subplots[Za+"axis"];$a+="ref";Za={};eb||(eb=Qa[0]||pb);pb||(pb=eb);Za[$a]={valType:"enumerated",values:Qa.concat(pb?[pb]:[]),dflt:eb};return N.coerce(va,Ea,Za,$a)};La.coercePosition=function(va,Ea,Qa,$a,eb,pb){"paper"===$a||"pixel"===$a?(Ea=N.ensureNumber,Qa=Qa(eb,pb)):(Ea=La.getFromId(Ea,$a),pb=Ea.fraction2r(pb),Qa=Qa(eb,pb),Ea=Ea.cleanPos);va[eb]=Ea(Qa)};La.cleanPosition=function(va,Ea,Qa){return("paper"===Qa||"pixel"===Qa?N.ensureNumber:
La.getFromId(Ea,Qa).cleanPos)(va)};La.redrawComponents=function(va,Ea){function Qa(eb,pb,Za,nb){eb=P.getComponentMethod(eb,pb);pb={};for(var sb=0;sb<Ea.length;sb++)for(var Cb=$a[La.id2name(Ea[sb])][Za],Ib=0;Ib<Cb.length;Ib++){var fc=Cb[Ib];if(!pb[fc]&&(eb(va,fc),pb[fc]=1,nb))return}}Ea=Ea?Ea:La.listIds(va);var $a=va._fullLayout;Qa("annotations","drawOne","_annIndices");Qa("shapes","drawOne","_shapeIndices");Qa("images","draw","_imgIndices",!0)};var ya=La.getDataConversions=function(va,Ea,Qa,$a){Qa=
"x"===Qa||"y"===Qa||"z"===Qa?Qa:$a;if(Array.isArray(Qa)){if(va={type:kb($a),_categories:[]},La.setConvert(va),"category"===va.type)for(Ea=0;Ea<$a.length;Ea++)va.d2c($a[Ea])}else va=La.getFromTrace(va,Ea,Qa);return va?{d2c:va.d2c,c2d:va.c2d}:"ids"===Qa?{d2c:p,c2d:p}:{d2c:n,c2d:n}};La.getDataToCoordFunc=function(va,Ea,Qa,$a){return ya(va,Ea,Qa,$a).d2c};La.counterLetter=function(va){va=va.charAt(0);if("x"===va)return"y";if("y"===va)return"x"};La.minDtick=function(va,Ea,Qa,$a){if(-1!==["log","category",
"multicategory"].indexOf(va.type)||!$a)va._minDtick=0;else if(void 0===va._minDtick)va._minDtick=Ea,va._forceTick0=Qa;else if(va._minDtick)if(2E-6>(va._minDtick/Ea+1E-6)%1&&2E-6>((Qa-va._forceTick0)/Ea%1+1.000001)%1)va._minDtick=Ea,va._forceTick0=Qa;else if(2E-6<(Ea/va._minDtick+1E-6)%1||2E-6<((Qa-va._forceTick0)/va._minDtick%1+1.000001)%1)va._minDtick=0};La.saveRangeInitial=function(va,Ea){va=La.list(va,"",!0);for(var Qa=!1,$a=0;$a<va.length;$a++){var eb=va[$a],pb=void 0===eb._rangeInitial,Za=pb||
!(eb.range[0]===eb._rangeInitial[0]&&eb.range[1]===eb._rangeInitial[1]);if(pb&&!1===eb.autorange||Ea&&Za)eb._rangeInitial=eb.range.slice(),Qa=!0}return Qa};La.saveShowSpikeInitial=function(va,Ea){for(var Qa=La.list(va,"",!0),$a=!1,eb="on",pb=0;pb<Qa.length;pb++){var Za=Qa[pb],nb=void 0===Za._showSpikeInitial,sb=nb||Za.showspikes!==Za._showspikes;if(nb||Ea&&sb)Za._showSpikeInitial=Za.showspikes,$a=!0;"on"!==eb||Za.showspikes||(eb="off")}va._fullLayout._cartesianSpikesEnabled=eb;return $a};La.autoBin=
function(va,Ea,Qa,$a,eb,pb){var Za=N.aggNums(Math.min,null,va),nb=N.aggNums(Math.max,null,va);if("category"===Ea.type||"multicategory"===Ea.type)return{start:Za-.5,end:nb+.5,size:Math.max(1,Math.round(pb)||1),_dataSpan:nb-Za};eb||(eb=Ea.calendar);var sb="log"===Ea.type?{type:"linear",range:[Za,nb]}:{type:Ea.type,range:N.simpleMap([Za,nb],Ea.c2r,0,eb),calendar:eb};La.setConvert(sb);(pb=pb&&aa.dtick(pb,sb.type))?(sb.dtick=pb,sb.tick0=aa.tick0(void 0,sb.type,eb)):(Qa?$a=(nb-Za)/Qa:(Qa=N.distinctVals(va),
pb=Math.pow(10,Math.floor(Math.log(Qa.minDiff)/Math.LN10)),Qa=pb*N.roundUp(Qa.minDiff/pb,[.9,1.9,4.9,9.9],!0),$a=Math.max(Qa,2*N.stdev(va)/Math.pow(va.length,$a?.25:.4)),E($a)||($a=1)),La.autoTicks(sb,$a));$a=sb.dtick;Qa=La.tickIncrement(La.tickFirst(sb),$a,"reverse",eb);if("number"===typeof $a)Qa=k(Qa,va,sb,Za,nb),sb=1+Math.floor((nb-Qa)/$a),va=Qa+sb*$a;else{if("M"===sb.dtick.charAt(0))a:{sb=Qa;va=N.findExactDates(va,eb);if(.8<va.exactDays&&(Qa=Number($a.substr(1)),sb=.8<va.exactYears&&0===Qa%12?
La.tickIncrement(sb,"M6","reverse")+1.5*ha:.8<va.exactMonths?La.tickIncrement(sb,"M1","reverse")+15.5*ha:sb-la,va=La.tickIncrement(sb,$a),va<=Za)){Qa=va;break a}Qa=sb}va=Qa;for(sb=0;va<=nb;)va=La.tickIncrement(va,$a,!1,eb),sb++}return{start:Ea.c2r(Qa,0,eb),end:Ea.c2r(va,0,eb),size:$a,_dataSpan:nb-Za}};La.prepTicks=function(va,Ea){Ea=N.simpleMap(va.range,va.r2l,void 0,void 0,Ea);if("auto"===va.tickmode||!va.dtick){var Qa=va.nticks;Qa||("category"===va.type||"multicategory"===va.type?(Qa=va.tickfont?
1.2*(va.tickfont.size||12):15,Qa=va._length/Qa):(Qa="y"===va._id.charAt(0)?40:80,Qa=N.constrain(va._length/Qa,4,9)+1),"radialaxis"===va._name&&(Qa*=2));"array"===va.tickmode&&(Qa*=100);va._roughDTick=(Math.abs(Ea[1]-Ea[0])-(va._lBreaks||0))/Qa;La.autoTicks(va,va._roughDTick);0<va._minDtick&&va.dtick<2*va._minDtick&&(va.dtick=va._minDtick,va.tick0=va.l2r(va._forceTick0))}va.tick0||(va.tick0="date"===va.type?"2000-01-01":0);"date"===va.type&&.1>va.dtick&&(va.dtick=.1);f(va)};La.calcTicks=function(va,
Ea){La.prepTicks(va,Ea);var Qa=N.simpleMap(va.range,va.r2l,void 0,void 0,Ea);if("array"===va.tickmode)return a(va);va._tmin=La.tickFirst(va,Ea);Ea=r(Qa);var $a=Ea[1],eb=Qa[1]<Qa[0];if(va._tmin<Ea[0]!==eb)return[];if("category"===va.type||"multicategory"===va.type)$a=eb?Math.max(-.5,$a):Math.min(va._categories.length-.5,$a);var pb="log"===va.type&&!(E(va.dtick)||"L"===va.dtick.charAt(0)),Za=null,nb=Math.max(1E3,va._length||0);Ea=[];for(var sb=va._tmin;(eb?sb>=$a:sb<=$a)&&!(Ea.length>nb||sb===Za);sb=
La.tickIncrement(sb,va.dtick,eb,va.calendar)){Za=sb;var Cb=!1;pb&&sb!==(sb|0)&&(Cb=!0);Ea.push({minor:Cb,value:sb})}($a="period"===va.ticklabelmode)&&Ea.unshift({minor:!1,value:La.tickIncrement(Ea[0].value,va.dtick,!eb,va.caldendar)});if(va.rangebreaks&&(Cb=Ea.length)){pb=0;"auto"===va.tickmode&&(pb=("y"===va._id.charAt(0)?2:6)*(va.tickfont?va.tickfont.size:12));Za=[];nb=eb?1:-1;sb=eb?Cb-1:0;for(eb=eb?0:Cb-1;nb*eb<=nb*sb;eb+=nb){Cb=Ea[eb];if(va.maskBreaks(Cb.value)===Fa){var Ib=Cb;a:{var fc=Cb.value;
for(var qc=va._rangebreaks.length,Cc=0;Cc<qc;Cc++){var cd=va._rangebreaks[Cc];if(fc>=cd.min&&fc<cd.max){fc=cd.max;break a}}}Ib.value=fc;if(va._rl&&(va._rl[0]===Cb.value||va._rl[1]===Cb.value))continue}Ib=va.c2p(Cb.value);if(Ib===Qc)Za[Za.length-1].value<Cb.value&&(Za[Za.length-1]=Cb);else if(void 0===Qc||Math.abs(Ib-Qc)>pb){var Qc=Ib;Za.push(Cb)}}Ea=Za.reverse()}"angularaxis"===va._id&&360===Math.abs(Qa[1]-Qa[0])&&Ea.pop();va._tmax=(Ea[Ea.length-1]||{}).value;va._prevDateHead="";va._inCalcTicks=!0;
Qc=Math.min(Qa[0],Qa[1]);Qa=Math.max(Qa[0],Qa[1]);var Wc;pb=La.getTickFormat(va);$a&&pb&&(/%[fLQsSMX]/.test(pb)||(/%[HI]/.test(pb)?Wc=ua:/%p/.test(pb)?Wc=la:/%[Aadejuwx]/.test(pb)?Wc=ha:/%[UVW]/.test(pb)?Wc=ra:/%[Bbm]/.test(pb)?Wc=oa:/%[q]/.test(pb)?Wc=ka:/%[Yy]/.test(pb)&&(Wc=ea)));pb=[];for(Za=0;Za<Ea.length;Za++)if(nb=La.tickText(va,Ea[Za].value,!1,Ea[Za].minor),!$a||Fc!==nb.text){var Fc=nb.text;pb.push(nb)}if($a){Fc=!1;for(Za=0;Za<pb.length;Za++){Ea=pb[Za].x;Za<pb.length-1?($a=Za,nb=Za+1):($a=
0<Za?Za-1:Za,nb=Za);$a=pb[$a].x;nb=pb[nb].x;sb=Math.abs(nb-$a);Cb=Wc||sb;eb=0;Cb>=ca?eb=sb>=ca&&sb<=Y?sb:ea:Wc===ka&&Cb>=qa?eb=sb>=qa&&sb<=ba?sb:ka:Cb>=ja?eb=sb>=ja&&sb<=pa?sb:oa:Wc===ra&&Cb>=ra?eb=ra:Cb>=ha?eb=ha:Wc===la&&Cb>=la?eb=la:Wc===ua&&Cb>=ua&&(eb=ua);if(eb&&va.rangebreaks){for(fc=Ib=Cb=0;42>fc;fc++)qc=fc/42,va.maskBreaks($a*(1-qc)+nb*qc)!==Fa&&(.5>qc?Cb++:Ib++);Ib&&(eb*=(Cb+Ib)/42)}eb<=sb&&(Ea+=eb/2);pb[Za].periodX=Ea;if(Ea>Qa||Ea<Qc)pb[Za].text=" ",Fc=!0}if(Fc)for(Za=0;Za<pb.length;Za++)if(pb[Za].periodX<=
Qa&&pb[Za].periodX>=Qc){va._prevDateHead="";pb[Za].text=La.tickText(va,pb[Za].x).text;break}}va._inCalcTicks=!1;return pb};var Ia=[2,5,10],Na=[1,2,3,6,12],Ta=[1,2,5,10,15,30],hb=[1,2,3,7,14],Ya=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ga=[-.301,0,.301,.699,1],Pa=[15,30,45,90,180];La.autoTicks=function(va,Ea){function Qa(pb){return Math.pow(pb,Math.floor(Math.log(Ea)/Math.LN10))}if("date"===va.type){va.tick0=N.dateTick0(va.calendar);var $a=2*Ea;if($a>ea)Ea/=ea,$a=Qa(10),va.dtick="M"+12*
e(Ea,$a,Ia);else if($a>oa)Ea/=oa,va.dtick="M"+e(Ea,1,Na);else if($a>ha){if(va.dtick=e(Ea,ha,va._hasDayOfWeekBreaks?[1,2,7,14]:hb),va.tick0=N.dateTick0(va.calendar,!0),$a=La.getTickFormat(va),/%[uVW]/.test($a)){$a=va.tick0.length;var eb=+va.tick0[$a-1];va.tick0=va.tick0.substring(0,$a-2)+String(eb+1)}}else $a>ua?va.dtick=e(Ea,ua,Na):$a>na?va.dtick=e(Ea,na,Ta):$a>wa?va.dtick=e(Ea,wa,Ta):($a=Qa(10),va.dtick=e(Ea,$a,Ia))}else"log"===va.type?(va.tick0=0,$a=N.simpleMap(va.range,va.r2l),.7<Ea?va.dtick=Math.ceil(Ea):
1>Math.abs($a[1]-$a[0])?(Ea=Math.abs(Math.pow(10,$a[1])-Math.pow(10,$a[0]))/(1.5*Math.abs(($a[1]-$a[0])/Ea)),$a=Qa(10),va.dtick="L"+e(Ea,$a,Ia)):va.dtick=.3<Ea?"D2":"D1"):"category"===va.type||"multicategory"===va.type?(va.tick0=0,va.dtick=Math.ceil(Math.max(Ea,1))):"angularaxis"===va._id?(va.tick0=0,va.dtick=e(Ea,1,Pa)):(va.tick0=0,$a=Qa(10),va.dtick=e(Ea,$a,Ia));0===va.dtick&&(va.dtick=1);if(!E(va.dtick)&&"string"!==typeof va.dtick)throw $a=va.dtick,va.dtick=1,"ax.dtick error: "+String($a);};La.tickIncrement=
function(va,Ea,Qa,$a){var eb=Qa?-1:1;if(E(Ea))return N.increment(va,eb*Ea);var pb=Ea.charAt(0),Za=eb*Number(Ea.substr(1));if("M"===pb)return N.incrementMonth(va,Za,$a);if("L"===pb)return Math.log(Math.pow(10,va)+Za)/Math.LN10;if("D"===pb)return Ea="D2"===Ea?Ga:Ya,va+=.01*eb,Qa=N.roundUp(N.mod(va,1),Ea,Qa),Math.floor(va)+Math.log(M.round(Math.pow(10,Qa),1))/Math.LN10;throw"unrecognized dtick "+String(Ea);};La.tickFirst=function(va,Ea){var Qa=va.r2l||Number,$a=N.simpleMap(va.range,Qa,void 0,void 0,
Ea),eb=(Ea=$a[1]<$a[0])?Math.floor:Math.ceil;$a=r($a)[0];var pb=va.dtick,Za=Qa(va.tick0);if(E(pb)){Ea=eb(($a-Za)/pb)*pb+Za;if("category"===va.type||"multicategory"===va.type)Ea=N.constrain(Ea,0,va._categories.length-1);return Ea}Qa=pb.charAt(0);var nb=Number(pb.substr(1));if("M"===Qa){eb=0;for(var sb,Cb;10>eb;){sb=La.tickIncrement(Za,pb,Ea,va.calendar);if(0>=(sb-$a)*(Za-$a))return Ea?Math.min(Za,sb):Math.max(Za,sb);sb=($a-(Za+sb)/2)/(sb-Za);Cb=Qa+(Math.abs(Math.round(sb))||1)*nb;Za=La.tickIncrement(Za,
Cb,0>sb?!Ea:Ea,va.calendar);eb++}N.error("tickFirst did not converge",va);return Za}if("L"===Qa)return Math.log(eb((Math.pow(10,$a)-Za)/nb)*nb+Za)/Math.LN10;if("D"===Qa)return va="D2"===pb?Ga:Ya,va=N.roundUp(N.mod($a,1),va,Ea),Math.floor($a)+Math.log(M.round(Math.pow(10,va),1))/Math.LN10;throw"unrecognized dtick "+String(pb);};La.tickText=function(va,Ea,Qa,$a){function eb(fc){if(void 0===fc)return!0;if(Qa)return"none"===fc;var qc={first:va._tmin,last:va._tmax}[fc];return"all"!==fc&&Ea!==qc}var pb=
l(va,Ea),Za="array"===va.tickmode,nb=Qa||Za,sb=va.type,Cb="category"===sb?va.d2l_noadd:va.d2l;if(Za&&Array.isArray(va.ticktext)){Za=N.simpleMap(va.range,va.r2l);var Ib=(Math.abs(Za[1]-Za[0])-(va._lBreaks||0))/1E4;for(Za=0;Za<va.ticktext.length&&!(Math.abs(Ea-Cb(va.tickvals[Za]))<Ib);Za++);if(Za<va.ticktext.length)return pb.text=String(va.ticktext[Za]),pb}Cb=Qa?"never":"none"!==va.exponentformat&&eb(va.showexponent)?"hide":"";"date"===sb?m(va,pb,Qa,nb):"log"===sb?c(va,pb,Qa,nb,Cb):"category"===sb?
d(va,pb):"multicategory"===sb?g(va,pb,Qa):"angularaxis"===va._id?q(va,pb,Qa,nb,Cb):h(va,pb,Qa,nb,Cb);$a||(va.tickprefix&&!eb(va.showtickprefix)&&(pb.text=va.tickprefix+pb.text),va.ticksuffix&&!eb(va.showticksuffix)&&(pb.text+=va.ticksuffix));if("boundaries"===va.tickson||va.showdividers)$a=function(fc){var qc=va.l2p(fc);return 0<=qc&&qc<=va._length?fc:null},pb.xbnd=[$a(pb.x-.5),$a(pb.x+va.dtick-.5)];return pb};La.hoverLabelText=function(va,Ea,Qa){if(Qa!==Fa&&Qa!==Ea)return La.hoverLabelText(va,Ea)+
" - "+La.hoverLabelText(va,Qa);Qa="log"===va.type&&0>=Ea;va=La.tickText(va,va.c2l(Qa?-Ea:Ea),"hover").text;return Qa?0===Ea?"0":Ca+va:va};var Va="f p n μ m  k M G T".split(" ");La.getTickFormat=function(va){function Ea(sb){return"string"!==typeof sb?sb:Number(sb.replace("M",""))*oa}function Qa(sb,Cb){var Ib=["L","D"];if(typeof sb===typeof Cb){if("number"===typeof sb)return sb-Cb;var fc=Ib.indexOf(sb.charAt(0));Ib=Ib.indexOf(Cb.charAt(0));return fc===Ib?Number(sb.replace(/(L|D)/g,""))-Number(Cb.replace(/(L|D)/g,
"")):fc-Ib}return"number"===typeof sb?1:-1}function $a(sb,Cb,Ib){Ib=Ib||function(qc){return qc};var fc=Cb[0];Cb=Cb[1];return(!fc&&"number"!==typeof fc||Ib(fc)<=Ib(sb))&&(!Cb&&"number"!==typeof Cb||Ib(Cb)>=Ib(sb))}function eb(sb,Cb){var Ib=null===Cb[0],fc=null===Cb[1],qc=0<=Qa(sb,Cb[0]);sb=0>=Qa(sb,Cb[1]);return(Ib||qc)&&(fc||sb)}var pb;if(va.tickformatstops&&0<va.tickformatstops.length)switch(va.type){case "date":case "linear":for(pb=0;pb<va.tickformatstops.length;pb++){var Za=va.tickformatstops[pb];
if(Za.enabled&&$a(va.dtick,Za.dtickrange,Ea)){var nb=Za;break}}break;case "log":for(pb=0;pb<va.tickformatstops.length;pb++)if(Za=va.tickformatstops[pb],Za.enabled&&eb(va.dtick,Za.dtickrange)){nb=Za;break}}return nb?nb.value:va.tickformat};La.getSubplots=function(va,Ea){va=va._fullLayout._subplots;va=va.cartesian.concat(va.gl2d||[]);Ea=Ea?La.findSubplotsWithAxis(va,Ea):va;Ea.sort(function(Qa,$a){Qa=Qa.substr(1).split("y");$a=$a.substr(1).split("y");return Qa[0]===$a[0]?+Qa[1]-+$a[1]:+Qa[0]-+$a[0]});
return Ea};La.findSubplotsWithAxis=function(va,Ea){Ea=new RegExp("x"===Ea._id.charAt(0)?"^"+Ea._id+"y":Ea._id+"$");for(var Qa=[],$a=0;$a<va.length;$a++){var eb=va[$a];Ea.test(eb)&&Qa.push(eb)}return Qa};La.makeClipPaths=function(va){var Ea=va._fullLayout;if(!Ea._hasOnlyLargeSploms){var Qa={_offset:0,_length:Ea.width,_id:""},$a={_offset:0,_length:Ea.height,_id:""},eb=La.list(va,"x",!0);va=La.list(va,"y",!0);var pb=[],Za,nb;for(Za=0;Za<eb.length;Za++)for(pb.push({x:eb[Za],y:$a}),nb=0;nb<va.length;nb++)0===
Za&&pb.push({x:Qa,y:va[nb]}),pb.push({x:eb[Za],y:va[nb]});Qa=Ea._clips.selectAll(".axesclip").data(pb,function(sb){return sb.x._id+sb.y._id});Qa.enter().append("clipPath").classed("axesclip",!0).attr("id",function(sb){return"clip"+Ea._uid+sb.x._id+sb.y._id}).append("rect");Qa.exit().remove();Qa.each(function(sb){M.select(this).select("rect").attr({x:sb.x._offset||0,y:sb.y._offset||0,width:sb.x._length||1,height:sb.y._length||1})})}};La.draw=function(va,Ea,Qa){var $a=va._fullLayout;"redraw"===Ea&&
$a._paper.selectAll("g.subplot").each(function(eb){eb=$a._plots[eb[0]];var pb=eb.xaxis,Za=eb.yaxis;eb.xaxislayer.selectAll("."+pb._id+"tick").remove();eb.yaxislayer.selectAll("."+Za._id+"tick").remove();eb.xaxislayer.selectAll("."+pb._id+"tick2").remove();eb.yaxislayer.selectAll("."+Za._id+"tick2").remove();eb.xaxislayer.selectAll("."+pb._id+"divider").remove();eb.yaxislayer.selectAll("."+Za._id+"divider").remove();eb.gridlayer&&eb.gridlayer.selectAll("path").remove();eb.zerolinelayer&&eb.zerolinelayer.selectAll("path").remove();
$a._infolayer.select(".g-"+pb._id+"title").remove();$a._infolayer.select(".g-"+Za._id+"title").remove()});Ea=Ea&&"redraw"!==Ea?Ea:La.listIds(va);return N.syncOrAsync(Ea.map(function(eb){return function(){if(eb){var pb=La.getFromId(va,eb),Za=La.drawOne(va,pb,Qa);pb._r=pb.range.slice();pb._rl=N.simpleMap(pb._r,pb.r2l);return Za}}}))};La.drawOne=function(va,Ea,Qa){function $a(Rb){Rb=Za+(Rb||"tick");cd[Rb]||(cd[Rb]=y(Ea,Rb));return cd[Rb]}Qa=Qa||{};var eb;Ea.setScale();var pb=va._fullLayout,Za=Ea._id,
nb=Za.charAt(0),sb=La.counterLetter(Za),Cb=pb._plots[Ea._mainSubplot];if(Cb){var Ib=Cb[nb+"axislayer"],fc=Ea._mainLinePosition,qc=Ea._mainMirrorPosition,Cc=Ea._vals=La.calcTicks(Ea);Cb=[Ea.mirror,fc,qc].join("_");for(eb=0;eb<Cc.length;eb++)Cc[eb].axInfo=Cb;Ea._selections={};Ea._tickAngles&&(Ea._prevTickAngles=Ea._tickAngles);Ea._tickAngles={};Ea._depth=null;var cd={};if(Ea.visible){var Qc=La.makeTransFn(Ea),Wc="period"===Ea.ticklabelmode?La.makeTransPeriodFn(Ea):La.makeTransFn(Ea);"boundaries"===
Ea.tickson?(Cb=A(Ea,Cc),eb=La.clipEnds(Ea,Cb),Cb="inside"===Ea.ticks?eb:Cb):(eb=La.clipEnds(Ea,Cc),Cb="inside"===Ea.ticks?eb:Cc);var Fc=Ea._gridVals=eb,ld=z(Ea,Cc);if(!pb._hasOnlyLargeSploms){var yb=Ea._subplotsWith,Wb={};for(eb=0;eb<yb.length;eb++){var Dc=yb[eb];var ec=pb._plots[Dc];Dc=ec[sb+"axis"];var kc=Dc._mainAxis._id;Wb[kc]||(Wb[kc]=1,kc="x"===nb?"M0,"+Dc._offset+"v"+Dc._length:"M"+Dc._offset+",0h"+Dc._length,La.drawGrid(va,Ea,{vals:Fc,counterAxis:Dc,layer:ec.gridlayer.select("."+Za),path:kc,
transFn:Qc}),La.drawZeroLine(va,Ea,{counterAxis:Dc,layer:ec.zerolinelayer,path:kc,transFn:Qc}))}}var ic=La.getTickSigns(Ea);Fc=[];if(Ea.ticks){eb=La.makeTickPath(Ea,fc,ic[2]);if(Ea._anchorAxis&&Ea.mirror&&!0!==Ea.mirror){var ob=La.makeTickPath(Ea,qc,ic[3]);var tb=eb+ob}else ob="",tb=eb;if(Ea.showdividers&&"outside"===Ea.ticks&&"boundaries"===Ea.tickson){var $b={};for(eb=0;eb<ld.length;eb++)$b[ld[eb].x]=1;qc=function(Rb){return $b[Rb.x]?ob:tb}}else qc=tb;La.drawTicks(va,Ea,{vals:Cb,layer:Ib,path:qc,
transFn:Qc});"allticks"===Ea.mirror&&(Fc=Object.keys(Ea._linepositions||{}))}for(eb=0;eb<Fc.length;eb++)Dc=Fc[eb],ec=pb._plots[Dc],qc=Ea._linepositions[Dc]||[],qc=La.makeTickPath(Ea,qc[0],ic[0])+La.makeTickPath(Ea,qc[1],ic[1]),La.drawTicks(va,Ea,{vals:Cb,layer:ec[nb+"axislayer"],path:qc,transFn:Qc});Cb=[];Cb.push(function(){return La.drawLabels(va,Ea,{vals:Cc,layer:Ib,transFn:Wc,labelFns:La.makeLabelFns(Ea,fc)})});if("multicategory"===Ea.type){var lc={x:2,y:10}[nb];Cb.push(function(){var Rb={x:"height",
y:"width"}[nb];Rb=$a()[Rb]+lc+(Ea._tickAngles[Za+"tick"]?Ea.tickfont.size*gb:0);for(var Ub=La,zb=Ub.drawLabels,qb=[],vb={},Db=0;Db<Cc.length;Db++){var Qb=Cc[Db];vb[Qb.text2]?vb[Qb.text2].push(Qb.x):vb[Qb.text2]=[Qb.x]}for(var wc in vb)qb.push(l(Ea,N.interp(vb[wc],.5),wc));return zb.call(Ub,va,Ea,{vals:qb,layer:Ib,cls:Za+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Qc,labelFns:La.makeLabelFns(Ea,fc+Rb*ic[4])})});Cb.push(function(){Ea._depth=ic[4]*($a("tick2")[Ea.side]-fc);var Rb=La.makeTickPath(Ea,
fc,ic[4],Ea._depth),Ub=Ea._id+"divider",zb=Ib.selectAll("path."+Ub).data(ld,B);zb.exit().remove();zb.enter().insert("path",":first-child").classed(Ub,1).classed("crisp",1).call(T.stroke,Ea.dividercolor).style("stroke-width",V.crispRound(va,Ea.dividerwidth,1)+"px");zb.attr("transform",Qc).attr("d",Rb)})}else Ea.title.hasOwnProperty("standoff")&&Cb.push(function(){Ea._depth=ic[4]*($a()[Ea.side]-fc)});var yc=P.getComponentMethod("rangeslider","isVisible")(Ea);Cb.push(function(){var Rb=Ea.side.charAt(0),
Ub=bb[Ea.side].charAt(0),zb=La.getPxPosition(va,Ea),qb="outside"===Ea.ticks?Ea.ticklen:0,vb;if(Ea.automargin||yc)if("multicategory"===Ea.type)var Db=$a("tick2");else Db=$a(),"x"===nb&&"b"===Rb&&(Ea._depth=Math.max(0<Db.width?Db.bottom-zb:0,qb));if(Ea.automargin){var Qb={x:0,y:0,r:0,l:0,t:0,b:0};var wc=[0,1];"x"===nb?("b"===Rb?Qb[Rb]=Ea._depth:(Qb[Rb]=Ea._depth=Math.max(0<Db.width?zb-Db.top:0,qb),wc.reverse()),0<Db.width&&(zb=Db.right-(Ea._offset+Ea._length),0<zb&&(Qb.xr=1,Qb.r=zb),Db=Ea._offset-Db.left,
0<Db&&(Qb.xl=0,Qb.l=Db))):("l"===Rb?Qb[Rb]=Ea._depth=Math.max(0<Db.height?zb-Db.left:0,qb):(Qb[Rb]=Ea._depth=Math.max(0<Db.height?Db.right-zb:0,qb),wc.reverse()),0<Db.height&&(zb=Db.bottom-(Ea._offset+Ea._length),0<zb&&(Qb.yb=0,Qb.b=zb),Db=Ea._offset-Db.top,0<Db&&(Qb.yt=1,Qb.t=Db)));Qb[sb]="free"===Ea.anchor?Ea.position:Ea._anchorAxis.domain[wc[0]];Ea.title.text!==pb._dfltTitle[nb]&&(Qb[Rb]+=C(Ea)+(Ea.title.standoff||0));if(Ea.mirror&&"free"!==Ea.anchor){var dc={x:0,y:0,r:0,l:0,t:0,b:0};dc[Ub]=Ea.linewidth;
Ea.mirror&&!0!==Ea.mirror&&(dc[Ub]+=qb);if(!0===Ea.mirror||"ticks"===Ea.mirror)dc[sb]=Ea._anchorAxis.domain[wc[1]];else if("all"===Ea.mirror||"allticks"===Ea.mirror)dc[sb]=[Ea._counterDomainMin,Ea._counterDomainMax][wc[1]]}}yc&&(vb=P.getComponentMethod("rangeslider","autoMarginOpts")(va,Ea));L.autoMargin(va,J(Ea),Qb);L.autoMargin(va,J(Ea)+".mirror",dc);L.autoMargin(va,Ea._id+".rangeslider",vb)});Qa.skipTitle||yc&&"bottom"===Ea.side||Cb.push(function(){var Rb=va._fullLayout,Ub=Ea._id,zb=Ub.charAt(0),
qb=Ea.title.font.size;if(Ea.title.hasOwnProperty("standoff"))var vb=Ea._depth+Ea.title.standoff+C(Ea);else vb="multicategory"===Ea.type?Ea._depth:10+1.5*qb+(Ea.linewidth?Ea.linewidth-1:0),vb="x"===zb?vb+("top"===Ea.side?qb*(Ea.showticklabels?1:0):qb*(Ea.showticklabels?1.5:.5)):vb+("right"===Ea.side?qb*(Ea.showticklabels?1:.5):qb*(Ea.showticklabels?.5:0));var Db=La.getPxPosition(va,Ea);if("x"===zb){qb=Ea._offset+Ea._length/2;var Qb="top"===Ea.side?Db-vb:Db+vb}else{Qb=Ea._offset+Ea._length/2;qb="right"===
Ea.side?Db+vb:Db-vb;var wc={rotate:"-90",offset:0}}if("multicategory"!==Ea.type){vb=Ea._selections[Ea._id+"tick"];var dc={selection:vb,side:Ea.side};vb&&vb.node()&&vb.node().parentNode&&(vb=V.getTranslate(vb.node().parentNode),dc.offsetLeft=vb.x,dc.offsetTop=vb.y);Ea.title.hasOwnProperty("standoff")&&(dc.pad=0)}return O.draw(va,Ub+"title",{propContainer:Ea,propName:Ea._name+".title.text",placeholder:Rb._dfltTitle[zb],avoid:dc,transform:wc,attributes:{x:qb,y:Qb,"text-anchor":"middle"}})});return N.syncOrAsync(Cb)}}};
La.getTickSigns=function(va){var Ea=va._id.charAt(0),Qa=va.side==={x:"top",y:"right"}[Ea]?1:-1;Qa=[-1,1,Qa,-Qa];"inside"!==va.ticks===("x"===Ea)&&(Qa=Qa.map(function($a){return-$a}));va.side&&Qa.push({l:-1,t:-1,r:1,b:1}[va.side.charAt(0)]);return Qa};La.makeTransFn=function(va){var Ea=va._id.charAt(0),Qa=va._offset;return"x"===Ea?function($a){return"translate("+(Qa+va.l2p($a.x))+",0)"}:function($a){return"translate(0,"+(Qa+va.l2p($a.x))+")"}};La.makeTransPeriodFn=function(va){var Ea=va._id.charAt(0),
Qa=va._offset;return"x"===Ea?function($a){return"translate("+(Qa+va.l2p($a.periodX))+",0)"}:function($a){return"translate(0,"+(Qa+va.l2p($a.periodX))+")"}};La.makeTickPath=function(va,Ea,Qa,$a){$a=void 0!==$a?$a:va.ticklen;var eb=va._id.charAt(0);va=(va.linewidth||1)/2;return"x"===eb?"M0,"+(Ea+va*Qa)+"v"+$a*Qa:"M"+(Ea+va*Qa)+",0h"+$a*Qa};La.makeLabelFns=function(va,Ea,Qa){var $a=va._id.charAt(0),eb="boundaries"!==va.tickson&&"outside"===va.ticks,pb=0,Za=0;eb&&(pb+=va.ticklen);Qa&&"outside"===va.ticks&&
(Za=N.deg2rad(Qa),pb=va.ticklen*Math.cos(Za)+1,Za=va.ticklen*Math.sin(Za));va.showticklabels&&(eb||va.showline)&&(pb+=.2*va.tickfont.size);pb+=(va.linewidth||1)/2;eb={labelStandoff:pb,labelShift:Za};if("x"===$a){var nb="bottom"===va.side?1:-1;var sb=Za*nb;var Cb=Ea+pb*nb;var Ib="bottom"===va.side?1:-.2;eb.xFn=function(fc){return fc.dx+sb};eb.yFn=function(fc){return fc.dy+Cb+fc.fontSize*Ib};eb.anchorFn=function(fc,qc){return E(qc)&&0!==qc&&180!==qc?0>qc*nb?"end":"start":"middle"};eb.heightFn=function(fc,
qc,Cc){return-60>qc||60<qc?-.5*Cc:"top"===va.side?-Cc:0}}else"y"===$a&&(nb="right"===va.side?1:-1,sb=pb,Cb=-Za*nb,Ib=90===Math.abs(va.tickangle)?.5:0,eb.xFn=function(fc){return fc.dx+Ea+(sb+fc.fontSize*Ib)*nb},eb.yFn=function(fc){return fc.dy+Cb+fc.fontSize*Xa},eb.anchorFn=function(fc,qc){return E(qc)&&90===Math.abs(qc)?"middle":"right"===va.side?"start":"end"},eb.heightFn=function(fc,qc,Cc){qc*="left"===va.side?1:-1;return-30>qc?-Cc:30>qc?-.5*Cc:0});return eb};La.drawTicks=function(va,Ea,Qa){Qa=
Qa||{};var $a=Ea._id+"tick",eb=Qa.vals;"period"===Ea.ticklabelmode&&(eb=eb.slice(),eb.shift());eb=Qa.layer.selectAll("path."+$a).data(Ea.ticks?eb:[],B);eb.exit().remove();eb.enter().append("path").classed($a,1).classed("ticks",1).classed("crisp",!1!==Qa.crisp).call(T.stroke,Ea.tickcolor).style("stroke-width",V.crispRound(va,Ea.tickwidth,1)+"px").attr("d",Qa.path);eb.attr("transform",Qa.transFn)};La.drawGrid=function(va,Ea,Qa){Qa=Qa||{};var $a=Ea._id+"grid",eb=Qa.vals,pb=Qa.counterAxis;if(!1===Ea.showgrid)eb=
[];else if(pb&&La.shouldShowZeroLine(va,Ea,pb)){pb="array"===Ea.tickmode;for(var Za=0;Za<eb.length;Za++){var nb=eb[Za].x;if(pb?!nb:Math.abs(nb)<Ea.dtick/100)if(eb=eb.slice(0,Za).concat(eb.slice(Za+1)),pb)Za--;else break}}eb=Qa.layer.selectAll("path."+$a).data(eb,B);eb.exit().remove();eb.enter().append("path").classed($a,1).classed("crisp",!1!==Qa.crisp);Ea._gw=V.crispRound(va,Ea.gridwidth,1);eb.attr("transform",Qa.transFn).attr("d",Qa.path).call(T.stroke,Ea.gridcolor||"#ddd").style("stroke-width",
Ea._gw+"px");"function"===typeof Qa.path&&eb.attr("d",Qa.path)};La.drawZeroLine=function(va,Ea,Qa){Qa=Qa||Qa;var $a=Ea._id+"zl",eb=La.shouldShowZeroLine(va,Ea,Qa.counterAxis);eb=Qa.layer.selectAll("path."+$a).data(eb?[{x:0,id:Ea._id}]:[]);eb.exit().remove();eb.enter().append("path").classed($a,1).classed("zl",1).classed("crisp",!1!==Qa.crisp).each(function(){Qa.layer.selectAll("path").sort(function(pb,Za){return mb.idSort(pb.id,Za.id)})});eb.attr("transform",Qa.transFn).attr("d",Qa.path).call(T.stroke,
Ea.zerolinecolor||T.defaultLine).style("stroke-width",V.crispRound(va,Ea.zerolinewidth,Ea._gw||1)+"px")};La.drawLabels=function(va,Ea,Qa){function $a(Wc,Fc){Wc.each(function(ld){var yb=M.select(this),Wb=yb.select(".text-math-group"),Dc=Ib.anchorFn(ld,Fc),ec=Qa.transFn.call(yb.node(),ld)+(E(Fc)&&0!==+Fc?" rotate("+Fc+","+Ib.xFn(ld)+","+(Ib.yFn(ld)-ld.fontSize/2)+")":""),kc=Q.lineCount(yb),ic=gb*ld.fontSize;(ld=Ib.heightFn(ld,E(Fc)?+Fc:0,(kc-1)*ic))&&(ec+=" translate(0, "+ld+")");Wb.empty()?yb.select("text").attr({transform:ec,
"text-anchor":Dc}):(yb=V.bBox(Wb.node()).width*{end:-.5,start:.5}[Dc],Wb.attr("transform",ec+(yb?"translate("+yb+",0)":"")))})}function eb(){$a(Cc,fc);if(Cb.length&&"x"===nb&&!E(fc)&&("log"!==Ea.type||"D"!==String(Ea.dtick).charAt(0))){var Wc=Qc=0,Fc=[];Cc.each(function(ec){Wc=Math.max(Wc,ec.fontSize);ec=Ea.l2p(ec.x);var kc=H(this);kc=V.bBox(kc.node());Fc.push({top:0,bottom:10,height:10,left:ec-kc.width/2,right:ec+kc.width/2+2,width:kc.width+2})});if("boundaries"!==Ea.tickson&&!Ea.showdividers||Qa.secondary){var ld=
Cb.length;var yb=Math.abs((Cb[ld-1].x-Cb[0].x)*Ea._m)/(ld-1)<2.5*Wc||"multicategory"===Ea.type;for(ld=0;ld<Fc.length-1;ld++)if(N.bBoxIntersect(Fc[ld],Fc[ld+1])){Qc=yb?90:30;break}}else for(yb=2,Ea.ticks&&(yb+=Ea.tickwidth/2),ld=0;ld<Fc.length;ld++){var Wb=Cb[ld].xbnd,Dc=Fc[ld];if(null!==Wb[0]&&Dc.left-Ea.l2p(Wb[0])<yb||null!==Wb[1]&&Ea.l2p(Wb[1])-Dc.right<yb){Qc=90;break}}Qc&&$a(Cc,Qc)}}Qa=Qa||{};var pb=va._fullLayout,Za=Ea._id,nb=Za.charAt(0),sb=Qa.cls||Za+"tick",Cb=Qa.vals,Ib=Qa.labelFns,fc=Qa.secondary?
0:Ea.tickangle,qc=(Ea._prevTickAngles||{})[sb],Cc=Qa.layer.selectAll("g."+sb).data(Ea.showticklabels?Cb:[],B),cd=[];Cc.enter().append("g").classed(sb,1).append("text").attr("text-anchor","middle").each(function(Wc){var Fc=M.select(this),ld=va._promises.length;Fc.call(Q.positionText,Ib.xFn(Wc),Ib.yFn(Wc)).call(V.font,Wc.font,Wc.fontSize,Wc.fontColor).text(Wc.text).call(Q.convertToTspans,va);va._promises[ld]?cd.push(va._promises.pop().then(function(){$a(Fc,fc)})):$a(Fc,fc)});Cc.exit().remove();Qa.repositionOnUpdate&&
Cc.each(function(Wc){M.select(this).select("text").call(Q.positionText,Ib.xFn(Wc),Ib.yFn(Wc))});$a(Cc,qc+1?qc:fc);var Qc=null;Ea._selections&&(Ea._selections[sb]=Cc);Za=[function(){return cd.length&&Promise.all(cd)}];Ea.automargin&&pb._redrawFromAutoMarginCount&&90===qc?(Qc=90,Za.push(function(){$a(Cc,qc)})):Za.push(eb);Ea._tickAngles&&Za.push(function(){Ea._tickAngles[sb]=null===Qc?E(fc)?fc:0:Qc});(pb=N.syncOrAsync(Za))&&pb.then&&va._promises.push(pb);return pb};La.getPxPosition=function(va,Ea){va=
va._fullLayout._size;var Qa=Ea._id.charAt(0),$a=Ea.side,eb;"free"!==Ea.anchor?eb=Ea._anchorAxis:"x"===Qa?eb={_offset:va.t+(1-(Ea.position||0))*va.h,_length:0}:"y"===Qa&&(eb={_offset:va.l+(Ea.position||0)*va.w,_length:0});if("top"===$a||"left"===$a)return eb._offset;if("bottom"===$a||"right"===$a)return eb._offset+eb._length};La.shouldShowZeroLine=function(va,Ea,Qa){var $a=N.simpleMap(Ea.range,Ea.r2l),eb;if(eb=0>=$a[0]*$a[1]&&Ea.zeroline&&("linear"===Ea.type||"-"===Ea.type)&&!(Ea.rangebreaks&&Ea.maskBreaks(0)===
Fa)){if(!(Qa=u(Ea,0)||!F(va,Ea,Qa,$a)))a:{va=va._fullData;Qa=Ea._mainSubplot;Ea=Ea._id.charAt(0);for($a=0;$a<va.length;$a++)if(eb=va[$a],!0===eb.visible&&eb.xaxis+eb.yaxis===Qa){if(P.traceIs(eb,"bar-like")&&eb.orientation==={x:"h",y:"v"}[Ea]){Qa=!0;break a}if(eb.fill&&eb.fill.charAt(eb.fill.length-1)===Ea){Qa=!0;break a}}Qa=!1}eb=Qa}return eb};La.clipEnds=function(va,Ea){return Ea.filter(function(Qa){return u(va,Qa.x)})};La.allowAutoMargin=function(va){for(var Ea=La.list(va,"",!0),Qa=0;Qa<Ea.length;Qa++){var $a=
Ea[Qa];$a.automargin&&(L.allowAutoMargin(va,J($a)),$a.mirror&&L.allowAutoMargin(va,J($a)+".mirror"));P.getComponentMethod("rangeslider","isVisible")($a)&&L.allowAutoMargin(va,$a._id+".rangeslider")}};La.swap=function(va,Ea){var Qa=[],$a,eb;for($a=0;$a<Ea.length;$a++){var pb=[],Za=va._fullData[Ea[$a]].xaxis,nb=va._fullData[Ea[$a]].yaxis;if(Za&&nb){for(eb=0;eb<Qa.length;eb++)-1===Qa[eb].x.indexOf(Za)&&-1===Qa[eb].y.indexOf(nb)||pb.push(eb);if(pb.length){var sb=Qa[pb[0]];if(1<pb.length)for(eb=1;eb<pb.length;eb++){var Cb=
Qa[pb[eb]];I(sb.x,Cb.x);I(sb.y,Cb.y)}I(sb.x,[Za]);I(sb.y,[nb])}else Qa.push({x:[Za],y:[nb]})}}for(Ea=0;Ea<Qa.length;Ea++){var Ib;eb=va;pb=Qa[Ea].x;Za=Qa[Ea].y;sb=[];Cb=[];nb=eb.layout;for($a=0;$a<pb.length;$a++)sb.push(La.getFromId(eb,pb[$a]));for($a=0;$a<Za.length;$a++)Cb.push(La.getFromId(eb,Za[$a]));var fc=Object.keys(Z),qc="anchor domain overlaying position side tickangle editType".split(" "),Cc=["linear","log"];for($a=0;$a<fc.length;$a++){var cd=fc[$a],Qc=sb[0][cd],Wc=Cb[0][cd],Fc=!0,ld=!1,yb=
!1;if("_"!==cd.charAt(0)&&"function"!==typeof Qc&&-1===qc.indexOf(cd)){for(Ib=1;Ib<sb.length&&Fc;Ib++){var Wb=sb[Ib][cd];"type"===cd&&-1!==Cc.indexOf(Qc)&&-1!==Cc.indexOf(Wb)&&Qc!==Wb?ld=!0:Wb!==Qc&&(Fc=!1)}for(Ib=1;Ib<Cb.length&&Fc;Ib++)Qc=Cb[Ib][cd],"type"===cd&&-1!==Cc.indexOf(Wc)&&-1!==Cc.indexOf(Qc)&&Wc!==Qc?yb=!0:Cb[Ib][cd]!==Wc&&(Fc=!1);if(Fc){ld&&(nb[sb[0]._name].type="linear");yb&&(nb[Cb[0]._name].type="linear");Ib=nb;Wc=sb;Fc=Cb;Wb=eb._fullLayout._dfltTitle;ld=N.nestedProperty;yb=ld(Ib[Wc[0]._name],
cd).get();Qc=ld(Ib[Fc[0]._name],cd).get();"title"===cd&&(yb&&yb.text===Wb.x&&(yb.text=Wb.y),Qc&&Qc.text===Wb.y&&(Qc.text=Wb.x));for(Wb=0;Wb<Wc.length;Wb++)ld(Ib,Wc[Wb]._name+"."+cd).set(Qc);for(Wb=0;Wb<Fc.length;Wb++)ld(Ib,Fc[Wb]._name+"."+cd).set(yb)}}}for($a=0;$a<eb._fullLayout.annotations.length;$a++)sb=eb._fullLayout.annotations[$a],-1!==pb.indexOf(sb.xref)&&-1!==Za.indexOf(sb.yref)&&N.swapAttrs(nb.annotations[$a],["?"])}}},{"../../components/color":615,"../../components/drawing":637,"../../components/titles":710,
"../../constants/alignment":717,"../../constants/numerical":724,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/plots":860,"../../registry":880,"./autorange":796,"./axis_autotype":798,"./axis_ids":800,"./clean_ticks":802,"./layout_attributes":811,"./set_convert":817,d3:169,"fast-isnumeric":241}],798:[function(b,D,G){var r=b("fast-isnumeric"),n=b("../../lib"),p=b("../../constants/numerical").BADNUM;D.exports=function(k,a,e){e=e||{};if(e=!e.noMultiCategory)e=n.isArrayOrTypedArray(k[0])&&
n.isArrayOrTypedArray(k[1]);if(e)return"multicategory";e=Math.max(1,(k.length-1)/1E3);for(var f=0,l=0,m={},c=0;c<k.length;c+=e){var d=k[Math.round(c)],g=String(d);m[g]||(m[g]=1,n.isDateTime(d,a)&&(f+=1),r(d)&&(l+=1))}if(f>2*l)return"date";a=Math.max(1,(k.length-1)/1E3);f=e=0;l={};for(m=0;m<k.length;m+=a)c=k[Math.round(m)],d=String(c),l[d]||(l[d]=1,"boolean"===typeof c?f++:n.cleanNumber(c)!==p?e++:"string"===typeof c&&f++);if(f>2*e)return"category";a:{if(k)for(a=0;a<k.length;a++)if(r(k[a])){k=!0;break a}k=
!1}return k?"linear":"-"}},{"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],799:[function(b,D,G){function r(w,A,z){function y(H,J){return a.coerce(w,A,f.rangebreaks,H,J)}if(y("enabled")){var B=y("bounds");if(B&&2<=B.length){var C="",u,F;if(2===B.length)for(u=0;2>u;u++)if(F=n(B[u])){C=q;break}C=y("pattern",C);if(C===q)for(u=0;2>u;u++)(F=n(B[u]))&&(A.bounds[u]=B[u]=F-1);if(C)for(u=0;2>u;u++)switch(F=B[u],C){case q:if(!p(F)){A.enabled=!1;return}F=+F;if(F!==Math.floor(F)||0>F||
7<=F){A.enabled=!1;return}A.bounds[u]=B[u]=F;break;case t:if(!p(F)){A.enabled=!1;return}F=+F;if(0>F||24<F){A.enabled=!1;return}A.bounds[u]=B[u]=F}!1===z.autorange&&(z=z.range,z[0]<z[1]?B[0]<z[0]&&B[1]>z[1]&&(A.enabled=!1):B[0]>z[0]&&B[1]<z[1]&&(A.enabled=!1))}else(B=y("values"))&&B.length?y("dvalue"):A.enabled=!1}}function n(w){if("string"===typeof w)return v[w.substr(0,3).toLowerCase()]}var p=b("fast-isnumeric"),k=b("../../registry"),a=b("../../lib"),e=b("../array_container_defaults"),f=b("./layout_attributes"),
l=b("./tick_value_defaults"),m=b("./tick_mark_defaults"),c=b("./tick_label_defaults"),d=b("./category_order_defaults"),g=b("./line_grid_defaults"),h=b("./set_convert"),q=b("./constants").WEEKDAY_PATTERN,t=b("./constants").HOUR_PATTERN;D.exports=function(w,A,z,y,B){var C=y.letter,u=y.font||{},F=y.splomStash||{},H=z("visible",!y.visibleDflt),J=A._template||{};J=A.type||J.type||"-";"date"===J&&k.getComponentMethod("calendars","handleDefaults")(w,A,"calendar",y.calendar);h(A,B);var I=!A.isValidRange(w.range);
I&&y.reverseDflt&&(I="reversed");!z("autorange",I)||"linear"!==J&&"-"!==J||z("rangemode");z("range");A.cleanRange();d(w,A,z,y);"category"===J||y.noHover||z("hoverformat");I=z("color");var M=I!==f.color.dflt?I:u.color;C=F.label||B._dfltTitle[C];c(w,A,z,J,y,{pass:1});if(!H)return A;z("title.text",C);a.coerceFont(z,"title.font",{family:u.family,size:Math.round(1.2*u.size),color:M});l(w,A,z,J);c(w,A,z,J,y,{pass:2});m(w,A,z,y);g(w,A,z,{dfltColor:I,bgColor:y.bgColor,showGrid:y.showGrid,attributes:f});(A.showline||
A.ticks)&&z("mirror");y.automargin&&z("automargin");u="multicategory"===J;if(!y.noTickson&&("category"===J||u)&&(A.ticks||A.showgrid)){var E;u&&(E="boundaries");z("tickson",E)}u&&z("showdividers")&&(z("dividercolor"),z("dividerwidth"));if("date"===J)if(y.noTicklabelmode||z("ticklabelmode"),e(w,A,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:r}),A.rangebreaks.length){for(w=0;w<A.rangebreaks.length;w++)if(A.rangebreaks[w].pattern===q){A._hasDayOfWeekBreaks=!0;break}h(A,B);if(B._has("scattergl")||
B._has("splom"))for(B=0;B<y.data.length;B++)if(w=y.data[B],"scattergl"===w.type||"splom"===w.type)w.visible=!1,a.warn(w.type+" traces do not work on axes with rangebreaks. Setting trace "+w.index+" to `visible: false`.")}else delete A.rangebreaks;return A};var v={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7}},{"../../lib":749,"../../registry":880,"../array_container_defaults":793,"./category_order_defaults":801,"./constants":803,"./layout_attributes":811,"./line_grid_defaults":813,"./set_convert":817,
"./tick_label_defaults":818,"./tick_mark_defaults":819,"./tick_value_defaults":820,"fast-isnumeric":241}],800:[function(b,D,G){var r=b("../../registry"),n=b("./constants");G.id2name=function(p){if("string"===typeof p&&p.match(n.AX_ID_PATTERN)){var k=p.substr(1);"1"===k&&(k="");return p.charAt(0)+"axis"+k}};G.name2id=function(p){if(p.match(n.AX_NAME_PATTERN)){var k=p.substr(5);"1"===k&&(k="");return p.charAt(0)+k}};G.cleanId=function(p,k){if("string"===typeof p&&p.match(n.AX_ID_PATTERN)&&(!k||p.charAt(0)===
k))return k=p.substr(1).replace(/^0+/,""),"1"===k&&(k=""),p.charAt(0)+k};G.list=function(p,k,a){var e=p._fullLayout;if(!e)return[];var f=G.listIds(p,k);p=Array(f.length);var l;for(l=0;l<f.length;l++){var m=f[l];p[l]=e[m.charAt(0)+"axis"+m.substr(1)]}if(!a)for(a=e._subplots.gl3d||[],l=0;l<a.length;l++)f=e[a[l]],k?p.push(f[k+"axis"]):p.push(f.xaxis,f.yaxis,f.zaxis);return p};G.listIds=function(p,k){p=p._fullLayout;if(!p)return[];p=p._subplots;return k?p[k+"axis"]:p.xaxis.concat(p.yaxis)};G.getFromId=
function(p,k,a){p=p._fullLayout;"x"===a?k=k.replace(/y[0-9]*/,""):"y"===a&&(k=k.replace(/x[0-9]*/,""));return p[G.id2name(k)]};G.getFromTrace=function(p,k,a){var e=p._fullLayout,f=null;r.traceIs(k,"gl3d")?(p=k.scene,"scene"===p.substr(0,5)&&(f=e[p][a+"axis"])):f=G.getFromId(p,k[a+"axis"]||a);return f};G.idSort=function(p,k){var a=p.charAt(0),e=k.charAt(0);return a!==e?a>e?1:-1:+(p.substr(1)||1)-+(k.substr(1)||1)};G.getAxisGroup=function(p,k){p=p._axisMatchGroups;for(var a=0;a<p.length;a++)if(p[a][k])return"g"+
a;return k}},{"../../registry":880,"./constants":803}],801:[function(b,D,G){D.exports=function(r,n,p,k){if("category"===n.type){r=r.categoryarray;r=Array.isArray(r)&&0<r.length;var a;r&&(a="array");a=p("categoryorder",a);var e;"array"===a&&(e=p("categoryarray"));r||"array"!==a||(a=n.categoryorder="trace");if("trace"===a)n._initialCategories=[];else if("array"===a)n._initialCategories=e.slice();else{p=k.dataAttr||n._id.charAt(0);e={};var f;if(k.axData)r=k.axData;else for(r=[],f=0;f<k.data.length;f++){var l=
k.data[f];l[p+"axis"]===n._id&&r.push(l)}for(f=0;f<r.length;f++)for(l=r[f][p],k=0;k<l.length;k++){var m=l[k];null!==m&&void 0!==m&&(e[m]=1)}e=Object.keys(e).sort();"category ascending"===a?n._initialCategories=e:"category descending"===a&&(n._initialCategories=e.reverse())}}}},{}],802:[function(b,D,G){var r=b("fast-isnumeric"),n=b("../../lib"),p=b("../../constants/numerical").ONEDAY;G.dtick=function(k,a){var e="log"===a,f="date"===a,l="category"===a;a=f?p:1;if(!k)return a;if(r(k))return k=Number(k),
0>=k?a:l?Math.max(1,Math.round(k)):f?Math.max(.1,k):k;if("string"!==typeof k||!f&&!e)return a;l=k.charAt(0);var m=k.substr(1);m=r(m)?Number(m):0;return 0>=m||!(f&&"M"===l&&m===Math.round(m)||e&&"L"===l||e&&"D"===l&&(1===m||2===m))?a:k};G.tick0=function(k,a,e,f){if("date"===a)return n.cleanDate(k,n.dateTick0(e));if("D1"!==f&&"D2"!==f)return r(k)?Number(k):0}},{"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],803:[function(b,D,G){b=b("../../lib/regex").counter;D.exports={idRegex:{x:b("x"),
y:b("y")},attrRegex:b("[xy]axis"),xAxisMatch:b("xaxis"),yAxisMatch:b("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:"imagelayer heatmaplayer contourcarpetlayer contourlayer funnellayer waterfalllayer barlayer carpetlayer violinlayer boxlayer ohlclayer scattercarpetlayer scatterlayer".split(" "),
clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":765}],804:[function(b,D,G){function r(d,g,h,q,t){var v="range"!==t,w=q[a(g)].type,A;t=[];for(A=0;A<h.length;A++){var z=h[A];if(z!==g){var y=q[a(z)];y.type===w&&(y.fixedrange?v&&y.anchor&&q[a(y.anchor)].fixedrange&&t.push(z):t.push(z))}}for(A=0;A<d.length;A++)if(d[A][g]){d=d[A];g=[];for(A=0;A<t.length;A++)z=t[A],d[z]||g.push(z);
return{linkableAxes:g,thisGroup:d}}return{linkableAxes:t,thisGroup:null}}function n(d,g,h,q,t){var v;if(null===g){g={};g[h]=1;var w=d.length;d.push(g)}else w=d.indexOf(g);var A=Object.keys(g);for(v=0;v<d.length;v++)if(h=d[v],v!==w&&h[q]){var z=h[q];for(v=0;v<A.length;v++)q=A[v],h[q]=z*t*g[q];d.splice(w,1);return}if(1!==t)for(v=0;v<A.length;v++)g[A[v]]*=t;g[q]=1}function p(d,g){var h=d._inputDomain,q=h[0]+(h[1]-h[0])*c[d.constraintoward];d.domain=d._input.domain=[q+(h[0]-q)/g,q+(h[1]-q)/g];d.setScale()}
var k=b("../../lib"),a=b("./axis_ids").id2name,e=b("./scale_zoom"),f=b("./autorange").makePadFn,l=b("./autorange").concatExtremes,m=b("../../constants/numerical").ALMOST_EQUAL,c=b("../../constants/alignment").FROM_BL;G.handleConstraintDefaults=function(d,g,h,q){var t=q.allAxisIds,v=q.layoutOut,w=q.scaleanchorDflt,A=q.constrainDflt;q=v._axisConstraintGroups;var z=v._axisMatchGroups,y=g._id,B=y.charAt(0);B=((v._splomAxes||{})[B]||{})[y]||{};y=g._id;var C=y.charAt(0);A=h("constrain",A);k.coerce(d,g,
{constraintoward:{valType:"enumerated",values:"x"===C?["left","center","right"]:["bottom","middle","top"],dflt:"x"===C?"center":"middle"}},"constraintoward");if((d.matches||B.matches)&&!g.fixedrange){var u=r(z,y,t,v);var F=k.coerce(d,g,{matches:{valType:"enumerated",values:u.linkableAxes||[],dflt:B.matches}},"matches")}if(!(F||g.fixedrange&&"domain"!==A)&&(d.scaleanchor||w)){var H=r(q,y,t,v,A);var J=k.coerce(d,g,{scaleanchor:{valType:"enumerated",values:H.linkableAxes||[]}},"scaleanchor",w)}F?(delete g.constrain,
n(z,u.thisGroup,y,F,1)):-1!==t.indexOf(d.matches)&&k.warn("ignored "+g._name+'.matches: "'+d.matches+'" to avoid either an infinite loop or because the target axis has fixed range.');J?(d=h("scaleratio"),d||(d=g.scaleratio=1),n(q,H.thisGroup,y,J,d)):-1!==t.indexOf(d.scaleanchor)&&k.warn("ignored "+g._name+'.scaleanchor: "'+d.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the target axis has fixed range or this axis declares a *matches* constraint.')};
G.enforce=function(d){var g=d._fullLayout,h=g._axisConstraintGroups||[],q,t,v,w;for(q=0;q<h.length;q++){var A=h[q],z=Object.keys(A),y=Infinity,B=0,C=Infinity,u={},F={},H=!1;for(t=0;t<z.length;t++){var J=z[t];F[J]=v=g[a(J)];v._inputDomain?v.domain=v._inputDomain.slice():v._inputDomain=v.domain.slice();v._inputRange||(v._inputRange=v.range.slice());v.setScale();u[J]=w=Math.abs(v._m)/A[J];y=Math.min(y,w);"domain"!==v.constrain&&v._constraintShrinkable||(C=Math.min(C,w));delete v._constraintShrinkable;
B=Math.max(B,w);"domain"===v.constrain&&(H=!0)}if(!(y>m*B)||H)for(t=0;t<z.length;t++)if(J=z[t],w=u[J],v=F[J],J=v.constrain,w!==C||"domain"===J)if(w/=C,"range"===J)e(v,w);else if(J=v._inputDomain,A=(v.domain[1]-v.domain[0])/(J[1]-J[0]),y=(v.r2l(v.range[1])-v.r2l(v.range[0]))/(v.r2l(v._inputRange[1])-v.r2l(v._inputRange[0])),w/=A,1>w*y)v.domain=v._input.domain=J.slice(),e(v,w);else{1>y&&(v.range=v._input.range=v._inputRange.slice(),w*=y);if(v.autorange){J=v.r2l(v.range[0]);A=v.r2l(v.range[1]);var I=
(J+A)/2;B=y=I;H=Math.abs(A-I);var M=I-H*w*1.0001;I+=H*w*1.0001;var E=f(v);p(v,w);var L=Math.abs(v._m),P=l(d,v),N=P.min;P=P.max;var Q;for(Q=0;Q<N.length;Q++){var O=N[Q].val-E(N[Q])/L;O>M&&O<y&&(y=O)}for(Q=0;Q<P.length;Q++)O=P[Q].val+E(P[Q])/L,O<I&&O>B&&(B=O);w/=(B-y)/(2*H);y=v.l2r(y);B=v.l2r(B);v.range=v._input.range=J<A?[y,B]:[B,y]}p(v,w)}}};G.clean=function(d,g){if(g._inputDomain){var h=!1,q=g._id;d=d._fullLayout._axisConstraintGroups;for(var t=0;t<d.length;t++)if(d[t][q]){h=!0;break}h&&"domain"===
g.constrain||(g._input.domain=g.domain=g._inputDomain,delete g._inputDomain)}}},{"../../constants/alignment":717,"../../constants/numerical":724,"../../lib":749,"./autorange":796,"./axis_ids":800,"./scale_zoom":815}],805:[function(b,D,G){function r(pa,oa,ja,ra){oa=C.ensureSingle(pa.draglayer,oa,ja,function(ha){ha.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",pa.id)});oa.call(M,ra);return oa.node()}function n(pa,oa,ja,ra,ha,la,ua){pa=r(pa,"rect",oa,ja);A.select(pa).call(H.setRect,
ra,ha,la,ua);return pa}function p(pa,oa){for(var ja=0;ja<pa.length;ja++)if(!pa[ja].fixedrange)return oa;return""}function k(pa,oa){var ja=pa.range[oa];oa=Math.abs(ja-pa.range[1-oa]);if("date"===pa.type)return ja;if("log"===pa.type)return pa=Math.ceil(Math.max(0,-Math.log(oa)/Math.LN10))+3,A.format("."+pa+"g")(Math.pow(10,ja));pa=Math.floor(Math.log(Math.abs(ja))/Math.LN10)-Math.floor(Math.log(oa)/Math.LN10)+4;return A.format("."+String(pa)+"g")(ja)}function a(pa,oa,ja,ra,ha){for(var la=0;la<pa.length;la++){var ua=
pa[la];if(!ua.fixedrange)if(ua.rangebreaks){var na="y"===ua._id.charAt(0),wa=na?1-ja:ja;ra[ua._name+".range[0]"]=ua.l2r(ua.p2l((na?1-oa:oa)*ua._length));ra[ua._name+".range[1]"]=ua.l2r(ua.p2l(wa*ua._length))}else na=ua._rl[0],wa=ua._rl[1]-na,ra[ua._name+".range[0]"]=ua.l2r(na+wa*oa),ra[ua._name+".range[1]"]=ua.l2r(na+wa*ja)}ha&&ha.length&&(pa=(oa+(1-ja))/2,a(ha,pa,1-pa,ra,[]))}function e(pa,oa){for(var ja=0;ja<pa.length;ja++){var ra=pa[ja];if(!ra.fixedrange)if(ra.rangebreaks){var ha=ra._length,la=
ra.p2l(0+oa)-ra.p2l(0);ha=ra.p2l(ha+oa)-ra.p2l(ha);la=(la+ha)/2;ra.range=[ra.l2r(ra._rl[0]-la),ra.l2r(ra._rl[1]-la)]}else ra.range=[ra.l2r(ra._rl[0]-oa/ra._m),ra.l2r(ra._rl[1]-oa/ra._m)]}}function f(pa,oa,ja){return pa?"nsew"===pa?ja?"":"pan"===oa?"move":"crosshair":pa.toLowerCase()+"-resize":"pointer"}function l(pa,oa,ja,ra,ha){return pa.append("path").attr("class","zoombox").style({fill:.2<oa?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+ja+", "+ra+")").attr("d",
ha+"Z")}function m(pa,oa,ja){return pa.append("path").attr("class","zoombox-corners").style({fill:F.background,stroke:F.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+oa+", "+ja+")").attr("d","M0,0Z")}function c(pa,oa,ja,ra,ha,la){pa.attr("d",ra+"M"+ja.l+","+ja.t+"v"+ja.h+"h"+ja.w+"v-"+ja.h+"h-"+ja.w+"Z");d(pa,oa,ha,la)}function d(pa,oa,ja,ra){ja||(pa.transition().style("fill",.2<ra?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),oa.transition().style("opacity",1).duration(200))}
function g(pa){A.select(pa).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function h(pa){qa&&pa.data&&pa._context.showTips&&(C.notifier(C._(pa,"Double-click to zoom back out"),"long"),qa=!1)}function q(pa){var oa=Math.floor(Math.min(pa.b-pa.t,pa.r-pa.l,ka)/2);return"M"+(pa.l-3.5)+","+(pa.t-.5+oa)+"h3v"+-oa+"h"+oa+"v-3h-"+(oa+3)+"ZM"+(pa.r+3.5)+","+(pa.t-.5+oa)+"h-3v"+-oa+"h"+-oa+"v-3h"+(oa+3)+"ZM"+(pa.r+3.5)+","+(pa.b+.5-oa)+"h-3v"+oa+"h"+-oa+"v3h"+(oa+3)+"ZM"+
(pa.l-3.5)+","+(pa.b+.5-oa)+"h3v"+oa+"h"+oa+"v3h-"+(oa+3)+"Z"}function t(pa,oa,ja,ra){for(var ha=!1,la={},ua={},na,wa,Ca,Fa,Xa=0;Xa<oa.length;Xa++){var ab=oa[Xa];for(na in ja)if(ab[na]){for(Ca in ab)("x"===Ca.charAt(0)?ja:ra)[Ca]||(la[Ca]=na);for(wa in ra)ab[wa]&&(ha=!0)}for(wa in ra)if(ab[wa])for(Fa in ab)("x"===Fa.charAt(0)?ja:ra)[Fa]||(ua[Fa]=wa)}ha&&(C.extendFlat(la,ua),ua={});oa={};ja=[];for(Ca in la)ra=V(pa,Ca),ja.push(ra),oa[ra._id]=ra;Ca={};ra=[];for(Fa in ua)na=V(pa,Fa),ra.push(na),Ca[na._id]=
na;return{xaHash:oa,yaHash:Ca,xaxes:ja,yaxes:ra,xLinks:la,yLinks:ua,isSubplotConstrained:ha}}function v(pa,oa){if(y){var ja=void 0!==pa.onwheel?"wheel":"mousewheel";pa._onwheel&&pa.removeEventListener(ja,pa._onwheel);pa._onwheel=oa;pa.addEventListener(ja,oa,{passive:!1})}else void 0!==pa.onwheel?pa.onwheel=oa:void 0!==pa.onmousewheel?pa.onmousewheel=oa:pa.isAddedWheelEvent||(pa.isAddedWheelEvent=!0,pa.addEventListener("wheel",oa,{passive:!1}))}function w(pa){var oa=[],ja;for(ja in pa)oa.push(pa[ja]);
return oa}var A=b("d3"),z=b("tinycolor2"),y=b("has-passive-events"),B=b("../../registry"),C=b("../../lib"),u=b("../../lib/svg_text_utils"),F=b("../../components/color"),H=b("../../components/drawing"),J=b("../../components/fx"),I=b("./axes"),M=b("../../lib/setcursor"),E=b("../../components/dragelement");G=b("../../components/dragelement/helpers");var L=G.selectingOrDrawing,P=G.freeMode,N=b("../../constants/alignment").FROM_TL,Q=b("../../lib/clear_gl_canvases"),O=b("../../plot_api/subroutines").redrawReglTraces,
T=b("../plots"),V=b("./axis_ids").getFromId,Z=b("./select").prepSelect,aa=b("./select").clearSelect,Y=b("./select").selectOnClick,ea=b("./scale_zoom"),ca=b("./constants"),ba=ca.MINDRAG,ka=ca.MINZOOM,qa=!0;D.exports={makeDragBox:function(pa,oa,ja,ra,ha,la,ua,na){function wa(){va=oa.xaxis;Ea=oa.yaxis;sb=va._length;Cb=Ea._length;Za=va._offset;nb=Ea._offset;Qa={};Qa[va._id]=va;$a={};$a[Ea._id]=Ea;if(ua&&na)for(var dc=oa.overlays,xc=0;xc<dc.length;xc++){var Nc=dc[xc].xaxis;Qa[Nc._id]=Nc;Nc=dc[xc].yaxis;
$a[Nc._id]=Nc}eb=w(Qa);pb=w($a);qc=p(eb,na);Cc=p(pb,ua);cd=!Cc&&!qc;Ib=t(pa,pa._fullLayout._axisConstraintGroups,Qa,$a);fc=t(pa,pa._fullLayout._axisMatchGroups,Qa,$a);Qc=na||Ib.isSubplotConstrained||fc.isSubplotConstrained;Wc=ua||Ib.isSubplotConstrained||fc.isSubplotConstrained;dc=pa._fullLayout;Fc=dc._has("scattergl");ld=dc._has("splom");yb=dc._has("svg")}function Ca(dc,xc){var Nc=kc.gd;if(0<=Nc._fullLayout._activeShapeIndex)Nc._fullLayout._deactivateShape(Nc);else{var Lc=Nc._fullLayout.clickmode;
g(Nc);2!==dc||Va||ya();if(Pa)-1<Lc.indexOf("select")&&Y(xc,Nc,eb,pb,oa.id,kc),-1<Lc.indexOf("event")&&J.click(Nc,xc,oa.id);else if(1===dc&&Va){var $c=ua?Ea:va;dc="s"===ua||"w"===na?0:1;var od=$c._name+".range["+dc+"]";dc=k($c,dc);xc="left";Lc="middle";if(!$c.fixedrange&&(ua?(Lc="n"===ua?"top":"bottom","right"===$c.side&&(xc="right")):"e"===na&&(xc="right"),Nc._context.showAxisRangeEntryBoxes))A.select(ec).call(u.makeEditable,{gd:Nc,immediate:!0,background:Nc._fullLayout.paper_bgcolor,text:String(dc),
fill:$c.tickfont?$c.tickfont.color:"#444",horizontalAlign:xc,verticalAlign:Lc}).on("edit",function(Zc){Zc=$c.d2r(Zc);void 0!==Zc&&B.call("_guiRelayout",Nc,od,Zc)})}}}function Fa(dc,xc,Nc){dc=ec.getBoundingClientRect();ic=xc-dc.left;ob=Nc-dc.top;tb={l:ic,r:ic,w:0,t:ob,b:ob,h:0};$b=pa._hmpixcount?pa._hmlumcount/pa._hmpixcount:z(pa._fullLayout.plot_bgcolor).getLuminance();lc="M0,0H"+sb+"V"+Cb+"H0V0";yc=!1;Rb="xy";qb=!1;Ub=l(Ga,$b,Za,nb,lc);zb=m(Ga,Za,nb)}function Xa(dc,xc){function Nc(){Rb="";tb.r=tb.l;
tb.t=tb.b;zb.attr("d","M0,0Z")}if(pa._transitioningWithDuration)return!1;dc=Math.max(0,Math.min(sb,dc+ic));xc=Math.max(0,Math.min(Cb,xc+ob));var Lc=Math.abs(dc-ic),$c=Math.abs(xc-ob);tb.l=Math.min(ic,dc);tb.r=Math.max(ic,dc);tb.t=Math.min(ob,xc);tb.b=Math.max(ob,xc);Ib.isSubplotConstrained?Lc>ka||$c>ka?(Rb="xy",Lc/sb>$c/Cb?($c=Lc*Cb/sb,ob>xc?tb.t=ob-$c:tb.b=ob+$c):(Lc=$c*sb/Cb,ic>dc?tb.l=ic-Lc:tb.r=ic+Lc),zb.attr("d",q(tb))):Nc():fc.isSubplotConstrained?Lc>ka||$c>ka?(Rb="xy",dc=Math.min(tb.l/sb,(Cb-
tb.b)/Cb),xc=Math.max(tb.r/sb,(Cb-tb.t)/Cb),tb.l=dc*sb,tb.r=xc*sb,tb.b=(1-dc)*Cb,tb.t=(1-xc)*Cb,zb.attr("d",q(tb))):Nc():!Cc||$c<Math.min(Math.max(.6*Lc,ba),ka)?Lc<ba||!qc?Nc():(tb.t=0,tb.b=Cb,Rb="x",zb.attr("d","M"+(tb.l-.5)+","+(ob-ka-.5)+"h-3v"+(2*ka+1)+"h3ZM"+(tb.r+.5)+","+(ob-ka-.5)+"h3v"+(2*ka+1)+"h-3Z")):!qc||Lc<Math.min(.6*$c,ka)?(tb.l=0,tb.r=sb,Rb="y",zb.attr("d","M"+(ic-ka-.5)+","+(tb.t-.5)+"v-3h"+(2*ka+1)+"v3ZM"+(ic-ka-.5)+","+(tb.b+.5)+"v3h"+(2*ka+1)+"v-3Z")):(Rb="xy",zb.attr("d",q(tb)));
tb.w=tb.r-tb.l;tb.h=tb.b-tb.t;Rb&&(qb=!0);pa._dragged=qb;c(Ub,zb,tb,lc,yc,$b);ab();pa.emit("plotly_relayouting",Wb);yc=!0}function ab(){Wb={};if("xy"===Rb||"x"===Rb)a(eb,tb.l/sb,tb.r/sb,Wb,Ib.xaxes),kb("x",Wb);if("xy"===Rb||"y"===Rb)a(pb,(Cb-tb.b)/Cb,(Cb-tb.t)/Cb,Wb,Ib.yaxes),kb("y",Wb)}function gb(){ab();g(pa);Ia();h(pa)}function bb(dc){function xc(Zc,rd,Dd){if(!Zc.fixedrange){var ed=C.simpleMap(Zc.range,Zc.r2l),Mc=ed[0]+(ed[1]-ed[0])*rd;Zc.range=ed.map(function(sd){return Zc.l2r(Mc+(sd-Mc)*Dd)})}}
if(pa._context._scrollZoom.cartesian||pa._fullLayout._enablescrollzoom)if(kc.plotinfo.selection=!1,aa(pa),pa._transitioningWithDuration)dc.preventDefault(),dc.stopPropagation();else{wa();clearTimeout(Db);var Nc=-dc.deltaY;isFinite(Nc)||(Nc=dc.wheelDelta/10);if(isFinite(Nc)){Nc=Math.exp(-Math.min(Math.max(Nc,-20),20)/200);var Lc=wc.draglayer.select(".nsewdrag").node().getBoundingClientRect(),$c=(dc.clientX-Lc.left)/Lc.width;Lc=(Lc.bottom-dc.clientY)/Lc.height;var od;if(Qc){na||($c=.5);for(od=0;od<
eb.length;od++)xc(eb[od],$c,Nc);kb("x");vb[2]*=Nc;vb[0]+=vb[2]*$c*(1/Nc-1)}if(Wc){ua||(Lc=.5);for(od=0;od<pb.length;od++)xc(pb[od],Lc,Nc);kb("y");vb[3]*=Nc;vb[1]+=vb[3]*(1-Lc)*(1/Nc-1)}Na(vb);mb();pa.emit("plotly_relayouting",Wb);Db=setTimeout(function(){vb=[0,0,sb,Cb];Ia()},Qb);dc.preventDefault()}else C.log("Did not find wheel motion attributes: ",dc)}}function La(dc,xc){function Nc(Zc,rd,Dd){for(var ed=1-rd,Mc,sd,yd=0;yd<Zc.length;yd++){var Fd=Zc[yd];if(!Fd.fixedrange){Mc=Fd;sd=Dd/Fd._length;sd=
Fd._rl[ed]+(Fd._rl[rd]-Fd._rl[ed])/(1-(0<=sd?Math.min(sd,.9):1/(1/Math.max(sd,-.3)+3.222)));var xe=Fd.l2r(sd);!1!==xe&&void 0!==xe&&(Fd.range[rd]=xe)}}return Mc._length*(Mc._rl[rd]-sd)/(Mc._rl[rd]-Mc._rl[ed])}if(!pa._transitioningWithDuration){pa._fullLayout._replotting=!0;if("ew"===qc||"ns"===Cc)qc&&(e(eb,dc),kb("x")),Cc&&(e(pb,xc),kb("y")),Na([qc?-dc:0,Cc?-xc:0,sb,Cb]);else{if(Ib.isSubplotConstrained&&qc&&Cc){var Lc="w"===qc===("n"===Cc)?1:-1;xc=(dc/sb+Lc*xc/Cb)/2;dc=xc*sb;xc=Lc*xc*Cb}"w"===qc?
dc=Nc(eb,0,dc):"e"===qc?dc=Nc(eb,1,-dc):qc||(dc=0);"n"===Cc?xc=Nc(pb,1,xc):"s"===Cc?xc=Nc(pb,0,-xc):Cc||(xc=0);Lc="w"===qc?dc:0;var $c="n"===Cc?xc:0;if(Ib.isSubplotConstrained){var od;if(!qc&&1===Cc.length){for(od=0;od<eb.length;od++)eb[od].range=eb[od]._r.slice(),ea(eb[od],1-xc/Cb);dc=xc*sb/Cb;Lc=dc/2}if(!Cc&&1===qc.length){for(od=0;od<pb.length;od++)pb[od].range=pb[od]._r.slice(),ea(pb[od],1-dc/sb);xc=dc*Cb/sb;$c=xc/2}}kb("x");kb("y");Na([Lc,$c,sb-dc,Cb-xc])}mb();pa.emit("plotly_relayouting",Wb)}}
function kb(dc,xc){var Nc=fc.isSubplotConstrained?{x:pb,y:eb}[dc]:fc[dc+"axes"];dc=fc.isSubplotConstrained?{x:eb,y:pb}[dc]:[];for(var Lc=0;Lc<Nc.length;Lc++){var $c=Nc[Lc],od=$c._id;od=fc.xLinks[od]||fc.yLinks[od];if(od=dc[0]||Qa[od]||$a[od])xc?(xc[$c._name+".range[0]"]=xc[od._name+".range[0]"],xc[$c._name+".range[1]"]=xc[od._name+".range[1]"]):$c.range=od.range.slice()}}function mb(){function dc($c){for(Nc=0;Nc<$c.length;Nc++)$c[Nc].fixedrange||xc.push($c[Nc]._id)}var xc=[],Nc;Qc&&(dc(eb),dc(Ib.xaxes),
dc(fc.xaxes));Wc&&(dc(pb),dc(Ib.yaxes),dc(fc.yaxes));Wb={};for(Nc=0;Nc<xc.length;Nc++){var Lc=V(pa,xc[Nc]);I.drawOne(pa,Lc,{skipTitle:!0});Wb[Lc._name+".range[0]"]=Lc.range[0];Wb[Lc._name+".range[1]"]=Lc.range[1]}I.redrawComponents(pa,xc)}function ya(){if(!pa._transitioningWithDuration){var dc=pa._context.doubleClick,xc=[];qc&&(xc=xc.concat(eb));Cc&&(xc=xc.concat(pb));fc.xaxes&&(xc=xc.concat(fc.xaxes));fc.yaxes&&(xc=xc.concat(fc.yaxes));var Nc={},Lc;if("reset+autosize"===dc)for(dc="autosize",Lc=0;Lc<
xc.length;Lc++){var $c=xc[Lc];if($c._rangeInitial&&($c.range[0]!==$c._rangeInitial[0]||$c.range[1]!==$c._rangeInitial[1])||!$c._rangeInitial&&!$c.autorange){dc="reset";break}}if("autosize"===dc)for(Lc=0;Lc<xc.length;Lc++)$c=xc[Lc],$c.fixedrange||(Nc[$c._name+".autorange"]=!0);else if("reset"===dc){if(qc||Ib.isSubplotConstrained)xc=xc.concat(Ib.xaxes);Cc&&!Ib.isSubplotConstrained&&(xc=xc.concat(Ib.yaxes));Ib.isSubplotConstrained&&(qc?Cc||(xc=xc.concat(pb)):xc=xc.concat(eb));for(Lc=0;Lc<xc.length;Lc++)$c=
xc[Lc],$c.fixedrange||($c._rangeInitial?(dc=$c._rangeInitial,Nc[$c._name+".range[0]"]=dc[0],Nc[$c._name+".range[1]"]=dc[1]):Nc[$c._name+".autorange"]=!0)}pa.emit("plotly_doubleclick",null);B.call("_guiRelayout",pa,Nc)}}function Ia(){Na([0,0,sb,Cb]);C.syncOrAsync([T.previousPromises,function(){pa._fullLayout._replotting=!1;B.call("_guiRelayout",pa,Wb)}],pa)}function Na(dc){var xc=pa._fullLayout,Nc=xc._plots;xc=xc._subplots.cartesian;var Lc;ld&&B.subplotsRegistry.splom.drag(pa);if(Fc)for(Lc=0;Lc<xc.length;Lc++){var $c=
Nc[xc[Lc]];var od=$c.xaxis;var Zc=$c.yaxis;if($c._scene){var rd=C.simpleMap(od.range,od.r2l);Zc=C.simpleMap(Zc.range,Zc.r2l);$c._scene.update({range:[rd[0],Zc[0],rd[1],Zc[1]]})}}if(ld||Fc)Q(pa),O(pa);if(yb){rd=dc[2]/va._length;var Dd=dc[3]/Ea._length;for(Lc=0;Lc<xc.length;Lc++){$c=Nc[xc[Lc]];od=$c.xaxis;Zc=$c.yaxis;var ed=Wc&&!Zc.fixedrange&&$a[Zc._id];if(Qc&&!od.fixedrange&&Qa[od._id]){var Mc=rd;var sd=na?dc[0]:Ya(od,Mc)}else fc.xaHash[od._id]?(Mc=rd,sd=dc[0]*od._length/va._length):fc.yaHash[od._id]?
(Mc=Dd,sd="ns"===Cc?-dc[1]*od._length/Ea._length:Ya(od,Mc,{n:"top",s:"bottom"}[Cc])):(Mc=Ta(od,rd,Dd),sd=hb(od,Mc));if(ed){ed=Dd;var yd=ua?dc[1]:Ya(Zc,ed)}else fc.yaHash[Zc._id]?(ed=Dd,yd=dc[1]*Zc._length/Ea._length):fc.xaHash[Zc._id]?(ed=rd,yd="ew"===qc?-dc[0]*Zc._length/va._length:Ya(Zc,ed,{e:"right",w:"left"}[qc])):(ed=Ta(Zc,rd,Dd),yd=hb(Zc,ed));if(Mc||ed){Mc||(Mc=1);ed||(ed=1);od=od._offset-sd/Mc;Zc=Zc._offset-yd/ed;$c.clipRect.call(H.setTranslate,sd,yd).call(H.setScale,Mc,ed);$c.plot.call(H.setTranslate,
od,Zc).call(H.setScale,1/Mc,1/ed);if(Mc!==$c.xScaleFactor||ed!==$c.yScaleFactor)H.setPointGroupScale($c.zoomScalePts,Mc,ed),H.setTextPointsScale($c.zoomScaleTxt,Mc,ed);H.hideOutsideRangePoints($c.clipOnAxisFalseTraces,$c);$c.xScaleFactor=Mc;$c.yScaleFactor=ed}}}}function Ta(dc,xc,Nc){return dc.fixedrange?0:Qc&&Ib.xaHash[dc._id]?xc:Wc&&(Ib.isSubplotConstrained?Ib.xaHash:Ib.yaHash)[dc._id]?Nc:0}function hb(dc,xc){return xc?(dc.range=dc._r.slice(),ea(dc,xc),Ya(dc,xc)):0}function Ya(dc,xc,Nc){return dc._length*
(1-xc)*N[Nc||dc.constraintoward||"middle"]}var Ga=pa._fullLayout._zoomlayer,Pa="nsew"===ua+na,Va=1===(ua+na).length,va,Ea,Qa,$a,eb,pb,Za,nb,sb,Cb,Ib,fc,qc,Cc,cd,Qc,Wc,Fc,ld,yb,Wb;wa();var Dc=f(Cc+qc,pa._fullLayout.dragmode,Pa),ec=n(oa,ua+na+"drag",Dc,ja,ra,ha,la);if(cd&&!Pa)return ec.onmousedown=null,ec.style.pointerEvents="none",ec;var kc={element:ec,gd:pa,plotinfo:oa,prepFn:function(dc,xc,Nc){var Lc=kc.dragmode,$c=pa._fullLayout.dragmode;$c!==Lc&&(kc.dragmode=$c);wa();cd||(Pa?dc.shiftKey?"pan"===
$c?$c="zoom":L($c)||($c="pan"):dc.ctrlKey&&($c="pan"):$c="pan");P($c)?kc.minDrag=1:kc.minDrag=void 0;L($c)?(kc.xaxes=eb,kc.yaxes=pb,Z(dc,xc,Nc,kc,$c)):(kc.clickFn=Ca,L(Lc)&&(kc.plotinfo.selection=!1,aa(pa)),cd||("zoom"===$c?(kc.moveFn=Xa,kc.doneFn=gb,kc.minDrag=1,Fa(dc,xc,Nc)):"pan"===$c&&(kc.moveFn=La,kc.doneFn=Ia)));pa._fullLayout._redrag=function(){var od=pa._dragdata;od&&od.element===ec&&!L(pa._fullLayout.dragmode)&&(wa(),Na([0,0,sb,Cb]),kc.moveFn(od.dx,od.dy))}}};E.init(kc);var ic,ob,tb,$b,lc,
yc,Rb,Ub,zb,qb,vb=[0,0,sb,Cb],Db=null,Qb=ca.REDRAWDELAY,wc=oa.mainplot?pa._fullLayout._plots[oa.mainplot]:oa;1!==ua.length*na.length&&v(ec,bb);return ec},makeDragger:r,makeRectDragger:n,makeZoombox:l,makeCorners:m,updateZoombox:c,xyCorners:q,transitionZoombox:d,removeZoombox:g,showDoubleClickNotifier:h,attachWheelEventHandler:v}},{"../../components/color":615,"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/drawing":637,"../../components/fx":655,"../../constants/alignment":717,
"../../lib":749,"../../lib/clear_gl_canvases":733,"../../lib/setcursor":769,"../../lib/svg_text_utils":773,"../../plot_api/subroutines":788,"../../registry":880,"../plots":860,"./axes":797,"./axis_ids":800,"./constants":803,"./scale_zoom":815,"./select":816,d3:169,"has-passive-events":415,tinycolor2:548}],806:[function(b,D,G){var r=b("d3"),n=b("../../components/fx"),p=b("../../components/dragelement"),k=b("../../lib/setcursor"),a=b("./dragbox").makeDragBox,e=b("./constants").DRAGGERSIZE;G.initInteractions=
function(f){var l=f._fullLayout;if(f._context.staticPlot)r.select(f).selectAll(".drag").remove();else if(l._has("cartesian")||l._has("splom")){Object.keys(l._plots||{}).sort(function(c,d){return(l._plots[c].mainplot&&!0)===(l._plots[d].mainplot&&!0)?(c=c.split("y"),d=d.split("y"),c[0]===d[0]?Number(c[1]||1)-Number(d[1]||1):Number(c[0]||1)-Number(d[0]||1)):l._plots[c].mainplot?1:-1}).forEach(function(c){var d=l._plots[c],g=d.xaxis,h=d.yaxis;if(!d.mainplot){var q=a(f,d,g._offset,h._offset,g._length,
h._length,"ns","ew");q.onmousemove=function(v){f._fullLayout._rehover=function(){f._fullLayout._hoversubplot===c&&f._fullLayout._plots[c]&&n.hover(f,v,c)};n.hover(f,v,c);f._fullLayout._lasthover=q;f._fullLayout._hoversubplot=c};q.onmouseout=function(v){f._dragging||(f._fullLayout._hoversubplot=null,p.unhover(f,v))};f._context.showAxisDragHandles&&(a(f,d,g._offset-e,h._offset-e,e,e,"n","w"),a(f,d,g._offset+g._length,h._offset-e,e,e,"n","e"),a(f,d,g._offset-e,h._offset+h._length,e,e,"s","w"),a(f,d,
g._offset+g._length,h._offset+h._length,e,e,"s","e"))}if(f._context.showAxisDragHandles){if(c===g._mainSubplot){var t=g._mainLinePosition;"top"===g.side&&(t-=e);a(f,d,g._offset+.1*g._length,t,.8*g._length,e,"","ew");a(f,d,g._offset,t,.1*g._length,e,"","w");a(f,d,g._offset+.9*g._length,t,.1*g._length,e,"","e")}c===h._mainSubplot&&(g=h._mainLinePosition,"right"!==h.side&&(g-=e),a(f,d,g,h._offset+.1*h._length,e,.8*h._length,"ns",""),a(f,d,g,h._offset+.9*h._length,e,.1*h._length,"s",""),a(f,d,g,h._offset,
e,.1*h._length,"n",""))}});var m=l._hoverlayer.node();m.onmousemove=function(c){c.target=f._fullLayout._lasthover;n.hover(f,c,l._hoversubplot)};m.onclick=function(c){c.target=f._fullLayout._lasthover;n.click(f,c)};m.onmousedown=function(c){f._fullLayout._lasthover.onmousedown(c)};G.updateFx(f)}};G.updateFx=function(f){f=f._fullLayout;k(f._draggers,"pan"===f.dragmode?"move":"crosshair")}},{"../../components/dragelement":634,"../../components/fx":655,"../../lib/setcursor":769,"./constants":803,"./dragbox":805,
d3:169}],807:[function(b,D,G){D.exports={clearOutlineControllers:function(r){(r=r._fullLayout._zoomlayer)&&r.selectAll(".outline-controllers").remove()},clearSelect:function(r){var n=r._fullLayout._zoomlayer;n&&n.selectAll(".select-outline").remove();r._fullLayout._drawing=!1}}},{}],808:[function(b,D,G){function r(n,p){switch(n.type){case "log":return n.p2d(p);case "date":return n.p2r(p,0,n.calendar);default:return n.p2r(p)}}D.exports={p2r:r,r2p:function(n,p){switch(n.type){case "log":return n.d2p(p);
case "date":return n.r2p(p,0,n.calendar);default:return n.r2p(p)}},axValue:function(n){var p="y"===n._id.charAt(0)?1:0;return function(k){return r(n,k[p])}},getTransform:function(n){return"translate("+n.xaxis._offset+","+n.yaxis._offset+")"}}},{}],809:[function(b,D,G){var r=b("../../registry"),n=b("../../lib");D.exports=function(p){return function(k,a){k=k[p];if(Array.isArray(k)){var e=r.subplotsRegistry.cartesian,f=e.idRegex,l=a._subplots,m=l.xaxis,c=l.yaxis;l=l.cartesian;for(var d=a._has("cartesian")||
a._has("gl2d"),g=0;g<k.length;g++){var h=k[g];if(n.isPlainObject(h)){var q=h.xref;h=h.yref;var t=f.x.test(q),v=f.y.test(h);if(t||v){d||n.pushUnique(a._basePlotModules,e);var w=!1;t&&-1===m.indexOf(q)&&(m.push(q),w=!0);v&&-1===c.indexOf(h)&&(c.push(h),w=!0);w&&t&&v&&l.push(q+h)}}}}}}},{"../../lib":749,"../../registry":880}],810:[function(b,D,G){function r(w,A,z){return m.ensureSingle(w,A,z,function(y){y.datum(z)})}function n(w,A,z,y,B){for(var C=q.traceLayerClasses,u=w._fullLayout,F=u._modules,H,J,
I=[],M=[],E=0;E<F.length;E++){H=F[E];J=H.name;var L=l.modules[J].categories;if(L.svg){var P=H.layerName||J+"layer";H=H.plot;z=g(z,H);J=z[0];z=z[1];J.length&&I.push({i:C.indexOf(P),className:P,plotMethod:H,cdModule:J});L.zoomScale&&M.push("."+P)}}I.sort(function(N,Q){return N.i-Q.i});C=A.plot.selectAll("g.mlayer").data(I,function(N){return N.className});C.enter().append("g").attr("class",function(N){return N.className}).classed("mlayer",!0).classed("rangeplot",A.isRangePlot);C.exit().remove();C.order();
C.each(function(N){var Q=f.select(this),O=N.className;N.plotMethod(w,A,N.cdModule,Q,y,B);-1===q.clipOnAxisFalseQuery.indexOf("."+O)&&d.setClipUrl(Q,A.layerClipId,w)});u._has("scattergl")&&(H=l.getModule("scattergl"),J=g(z,H)[0],H.plot(w,A,J));w._context.staticPlot||(A._hasClipOnAxisFalse&&(A.clipOnAxisFalseTraces=A.plot.selectAll(q.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),M.length&&(u=A.plot.selectAll(M.join(",")).selectAll(".trace"),A.zoomScalePts=u.selectAll("path.point"),A.zoomScaleTxt=
u.selectAll(".textpoint")))}function p(w){w=w._fullLayout;var A=w._subplots.cartesian,z=A.length,y,B=[],C=[];for(y=0;y<z;y++){var u=A[y];var F=w._plots[u];var H=F.xaxis;var J=F.yaxis;H=H._mainAxis._id+J._mainAxis._id;J=w._plots[H];F.overlays=[];H!==u&&J?(F.mainplot=H,F.mainplotinfo=J,C.push(u)):(F.mainplot=void 0,F.mainplotinfo=void 0,B.push(u))}for(y=0;y<C.length;y++)u=C[y],F=w._plots[u],F.mainplotinfo.overlays.push(F);A=B.concat(C);B=Array(z);for(y=0;y<z;y++){u=A[y];F=w._plots[u];H=F.xaxis;J=F.yaxis;
H=[u,H.layer,J.layer,H.overlaying||"",J.overlaying||""];for(u=0;u<F.overlays.length;u++)H.push(F.overlays[u].id);B[y]=H}return B}function k(w,A){var z=A.plotgroup,y=A.id,B=q.layerValue2layerClass[A.xaxis.layer],C=q.layerValue2layerClass[A.yaxis.layer];w=w._fullLayout._hasOnlyLargeSploms;if(A.mainplot){z=A.mainplotinfo;var u=z.plotgroup,F=y+"-x",H=y+"-y";A.gridlayer=z.gridlayer;A.zerolinelayer=z.zerolinelayer;v(z.overlinesBelow,"path",F);v(z.overlinesBelow,"path",H);v(z.overaxesBelow,"g",F);v(z.overaxesBelow,
"g",H);A.plot=v(z.overplot,"g",y);v(z.overlinesAbove,"path",F);v(z.overlinesAbove,"path",H);v(z.overaxesAbove,"g",F);v(z.overaxesAbove,"g",H);A.xlines=u.select(".overlines-"+B).select("."+F);A.ylines=u.select(".overlines-"+C).select("."+H);A.xaxislayer=u.select(".overaxes-"+B).select("."+F);A.yaxislayer=u.select(".overaxes-"+C).select("."+H)}else w?(A.xlines=v(z,"path","xlines-above"),A.ylines=v(z,"path","ylines-above"),A.xaxislayer=v(z,"g","xaxislayer-above"),A.yaxislayer=v(z,"g","yaxislayer-above")):
(y=v(z,"g","layer-subplot"),A.shapelayer=v(y,"g","shapelayer"),A.imagelayer=v(y,"g","imagelayer"),A.gridlayer=v(z,"g","gridlayer"),A.zerolinelayer=v(z,"g","zerolinelayer"),v(z,"path","xlines-below"),v(z,"path","ylines-below"),A.overlinesBelow=v(z,"g","overlines-below"),v(z,"g","xaxislayer-below"),v(z,"g","yaxislayer-below"),A.overaxesBelow=v(z,"g","overaxes-below"),A.plot=v(z,"g","plot"),A.overplot=v(z,"g","overplot"),A.xlines=v(z,"path","xlines-above"),A.ylines=v(z,"path","ylines-above"),A.overlinesAbove=
v(z,"g","overlines-above"),v(z,"g","xaxislayer-above"),v(z,"g","yaxislayer-above"),A.overaxesAbove=v(z,"g","overaxes-above"),A.xlines=z.select(".xlines-"+B),A.ylines=z.select(".ylines-"+C),A.xaxislayer=z.select(".xaxislayer-"+B),A.yaxislayer=z.select(".yaxislayer-"+C));w||(r(A.gridlayer,"g",A.xaxis._id),r(A.gridlayer,"g",A.yaxis._id),A.gridlayer.selectAll("g").map(function(J){return J[0]}).sort(h.idSort));A.xlines.style("fill","none").classed("crisp",!0);A.ylines.style("fill","none").classed("crisp",
!0)}function a(w,A){if(w){var z={};w.each(function(u){u=u[0];f.select(this).remove();e(u,A);z[u]=!0});for(var y in A._plots){w=A._plots[y].overlays||[];for(var B=0;B<w.length;B++){var C=w[B];z[C.id]&&C.plot.selectAll(".trace").remove()}}}}function e(w,A){A._draggers.selectAll("g."+w).remove();A._defs.select("#clip"+A._uid+w+"plot").remove()}var f=b("d3"),l=b("../../registry"),m=b("../../lib"),c=b("../plots"),d=b("../../components/drawing"),g=b("../get_data").getModuleCalcData,h=b("./axis_ids"),q=
b("./constants"),t=b("../../constants/xmlns_namespaces"),v=m.ensureSingle;G.name="cartesian";G.attr=["xaxis","yaxis"];G.idRoot=["x","y"];G.idRegex=q.idRegex;G.attrRegex=q.attrRegex;G.attributes=b("./attributes");G.layoutAttributes=b("./layout_attributes");G.supplyLayoutDefaults=b("./layout_defaults");G.transitionAxes=b("./transition_axes");G.finalizeSubplots=function(w,A){var z=A._subplots;A=z.xaxis;var y=z.yaxis,B=z.cartesian;z=B.concat(z.gl2d||[]);var C={},u={},F;for(F=0;F<z.length;F++){var H=z[F].split("y");
C[H[0]]=1;u["y"+H[1]]=1}for(F=0;F<A.length;F++)if(H=A[F],!C[H]){var J=(w[h.id2name(H)]||{}).anchor;q.idRegex.y.test(J)||(J="y");B.push(H+J);z.push(H+J);u[J]||(u[J]=1,m.pushUnique(y,J))}for(F=0;F<y.length;F++)J=y[F],u[J]||(H=(w[h.id2name(J)]||{}).anchor,q.idRegex.x.test(H)||(H="x"),B.push(H+J),z.push(H+J),C[H]||(C[H]=1,m.pushUnique(A,H)));if(!z.length){J=H="";for(var I in w)if(q.attrRegex.test(I))if("x"===I.charAt(0)){if(!H||+I.substr(5)<+H.substr(5))H=I}else if(!J||+I.substr(5)<+J.substr(5))J=I;H=
H?h.name2id(H):"x";J=J?h.name2id(J):"y";A.push(H);y.push(J);B.push(H+J)}};G.plot=function(w,A,z,y){var B=w._fullLayout,C=B._subplots.cartesian,u=w.calcdata,F;if(!Array.isArray(A))for(A=[],F=0;F<u.length;F++)A.push(F);for(F=0;F<C.length;F++){for(var H=C[F],J=B._plots[H],I=[],M,E=0;E<u.length;E++){var L=u[E],P=L[0].trace;if(P.xaxis+P.yaxis===H){if(-1!==A.indexOf(P.index)||P.carpet)M&&M[0].trace.xaxis+M[0].trace.yaxis===H&&-1!==["tonextx","tonexty","tonext"].indexOf(P.fill)&&-1===I.indexOf(M)&&I.push(M),
I.push(L);M=L}}n(w,J,I,z,y)}};G.clean=function(w,A,z,y){var B=y._plots||{};w=A._plots||{};z=y._subplots||{};var C;if(y._hasOnlyLargeSploms&&!A._hasOnlyLargeSploms)for(C in B){var u=B[C];u.plotgroup&&u.plotgroup.remove()}u=y._has&&y._has("gl");var F=A._has&&A._has("gl");if(u&&!F)for(C in B)u=B[C],u._scene&&u._scene.destroy();if(z.xaxis&&z.yaxis)for(B=h.listIds({_fullLayout:y}),C=0;C<B.length;C++)u=B[C],A[h.id2name(u)]||y._infolayer.selectAll(".g-"+u+"title").remove();C=y._has&&y._has("cartesian");
A=A._has&&A._has("cartesian");if(C&&!A)a(y._cartesianlayer.selectAll(".subplot"),y),y._defs.selectAll(".axesclip").remove(),delete y._axisConstraintGroups;else if(z.cartesian)for(C=0;C<z.cartesian.length;C++)A=z.cartesian[C],w[A]||(y._cartesianlayer.selectAll("."+A+",."+A+"-x,."+A+"-y").remove(),e(A,y))};G.drawFramework=function(w){var A=w._fullLayout,z=p(w);z=A._cartesianlayer.selectAll(".subplot").data(z,String);z.enter().append("g").attr("class",function(y){return"subplot "+y[0]});z.order();z.exit().call(a,
A);z.each(function(y){y=y[0];var B=A._plots[y];B.plotgroup=f.select(this);k(w,B);B.draglayer=v(A._draggers,"g",y)})};G.rangePlot=function(w,A,z){k(w,A);n(w,A,z);c.style(w)};G.toSVG=function(w){var A=w._fullLayout._glimages,z=f.select(w).selectAll(".svg-container");z.filter(function(y,B){return B===z.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var y=this.toDataURL("image/png");A.append("svg:image").attr({xmlns:t.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,
width:this.width,height:this.height})})};G.updateFx=b("./graph_interact").updateFx},{"../../components/drawing":637,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../registry":880,"../get_data":834,"../plots":860,"./attributes":795,"./axis_ids":800,"./constants":803,"./graph_interact":806,"./layout_attributes":811,"./layout_defaults":812,"./transition_axes":821,d3:169}],811:[function(b,D,G){G=b("../font_attributes");var r=b("../../components/color/attributes"),n=b("../../components/drawing/attributes").dash,
p=b("../../lib/extend").extendFlat,k=b("../../plot_api/plot_template").templatedArray;b("../../constants/docs");b("../../constants/docs");var a=b("../../constants/numerical").ONEDAY;b=b("./constants");var e=b.HOUR_PATTERN,f=b.WEEKDAY_PATTERN;D.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:r.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:G({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},
type:{valType:"enumerated",values:"- linear log date category multicategory".split(" "),dflt:"-",editType:"calc",_noTemplating:!0},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",
impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:"left center right top middle bottom".split(" "),editType:"plot"},
matches:{valType:"enumerated",values:[b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"calc"},rangebreaks:k("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[f,e,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",
min:0,dflt:a},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",
""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:r.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",
dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:p({},n,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"data",editType:"none"},tickfont:G({editType:"ticks"}),
tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",
values:"none e E power SI B".split(" "),dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:k("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",
editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:r.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:r.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:r.defaultLine,editType:"ticks"},
zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:r.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",b.idRegex.x.toString(),b.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",b.idRegex.x.toString(),b.idRegex.y.toString()],
editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:"trace;category ascending;category descending;array;total ascending;total descending;min ascending;min descending;max ascending;max descending;sum ascending;sum descending;mean ascending;mean descending;median ascending;median descending".split(";"),
dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:G({editType:"ticks"})}}},{"../../components/color/attributes":614,"../../components/drawing/attributes":636,"../../constants/docs":719,"../../constants/numerical":724,"../../lib/extend":739,"../../plot_api/plot_template":787,"../font_attributes":825,
"./constants":803}],812:[function(b,D,G){function r(A,z,y){Array.isArray(A[z])?A[z].push(y):A[z]=[y]}var n=b("../../lib"),p=b("../../components/color"),k=b("../../components/fx/helpers").isUnifiedHover,a=b("../../components/fx/hovermode_defaults"),e=b("../../plot_api/plot_template"),f=b("../layout_attributes"),l=b("./layout_attributes"),m=b("./type_defaults"),c=b("./axis_defaults"),d=b("./constraints").handleConstraintDefaults,g=b("./position_defaults");G=b("./axis_ids");var h=G.id2name,q=G.name2id,
t=b("./constants").AX_ID_PATTERN;b=b("../../registry");var v=b.traceIs,w=b.getComponentMethod;D.exports=function(A,z,y){function B(){la._traceIndices=(J[ja]||[]).map(function(gb){return gb._expandedIndex});la._annIndices=[];la._shapeIndices=[];la._imgIndices=[];la._subplotsWith=[];la._counterAxes=[];la._name=la._attr=ja;la._id=ra}function C(gb,bb){return n.coerce(ha,la,l,gb,bb)}function u(gb,bb){return n.coerce2(ha,la,l,gb,bb)}function F(gb,bb){gb="x"===gb?ca:ba;for(var La=[],kb=0;kb<gb.length;kb++){var mb=
gb[kb];mb===bb||(A[mb]||{}).overlaying||La.push(q(mb))}return La}function H(){var gb=ha.matches;t.test(gb)&&-1===ka.indexOf(gb)&&(qa[gb]=ha.type,pa=Object.keys(qa))}var J={},I={},M={},E={},L={},P={},N={},Q={},O={},T={},V,Z;for(V=0;V<y.length;V++){var aa=y[V];if(v(aa,"cartesian")||v(aa,"gl2d")){if(aa.xaxis){var Y=h(aa.xaxis);r(J,Y,aa)}else if(aa.xaxes)for(Z=0;Z<aa.xaxes.length;Z++)r(J,h(aa.xaxes[Z]),aa);if(aa.yaxis){var ea=h(aa.yaxis);r(J,ea,aa)}else if(aa.yaxes)for(Z=0;Z<aa.yaxes.length;Z++)r(J,h(aa.yaxes[Z]),
aa);"funnel"===aa.type?"h"===aa.orientation?(Y&&(I[Y]=!0),ea&&(N[ea]=!0)):ea&&(M[ea]=!0):"image"===aa.type?(ea&&(Q[ea]=!0),Y&&(Q[Y]=!0)):(ea&&(L[ea]=!0,P[ea]=!0),(!v(aa,"carpet")||"carpet"===aa.type&&!aa._cheater)&&Y&&(E[Y]=!0));"carpet"===aa.type&&aa._cheater&&Y&&(I[Y]=!0);v(aa,"2dMap")&&(O[Y]=!0,O[ea]=!0);v(aa,"oriented")&&(T["h"===aa.orientation?ea:Y]=!0)}}Z=z._subplots;V=Z.xaxis;Y=Z.yaxis;var ca=n.simpleMap(V,h),ba=n.simpleMap(Y,h);Z=ca.concat(ba);aa=p.background;V.length&&Y.length&&(aa=n.coerce(A,
z,f,"plot_bgcolor"));aa=p.combine(aa,z.paper_bgcolor);Y={x:Y,y:V};var ka=Y.x.concat(Y.y),qa={},pa=[];ea=a(A,z,y);var oa=k(ea);for(V=0;V<Z.length;V++){var ja=Z[V];var ra=q(ja);y=ja.charAt(0);n.isPlainObject(A[ja])||(A[ja]={});var ha=A[ja];var la=e.newContainer(z,ja,y+"axis");B();var ua={letter:y,font:z.font,outerTicks:O[ja],showGrid:!T[ja],data:J[ja]||[],bgColor:aa,calendar:z.calendar,automargin:!0,visibleDflt:"x"===y&&!E[ja]&&I[ja]||"y"===y&&!L[ja]&&M[ja],reverseDflt:"y"===y&&(!P[ja]&&N[ja]||Q[ja]),
splomStash:((z._splomAxes||{})[y]||{})[ra]};C("uirevision",z.uirevision);m(ha,la,C,ua);c(ha,la,C,ua,z);ua=oa&&y===ea.charAt(0);var na=u("spikecolor",oa?la.color:void 0),wa=u("spikethickness",oa?1.5:void 0),Ca=u("spikedash",oa?"dot":void 0),Fa=u("spikemode",oa?"across":void 0),Xa=u("spikesnap",oa?"hovered data":void 0);C("showspikes",!!ua||!!na||!!wa||!!Ca||!!Fa||!!Xa)||(delete la.spikecolor,delete la.spikethickness,delete la.spikedash,delete la.spikemode,delete la.spikesnap);g(ha,la,C,{letter:y,counterAxes:Y[y],
overlayableAxes:F(y,ja),grid:z.grid});C("title.standoff");H();la._input=ha}for(V=0;V<pa.length;)ra=pa[V++],ja=h(ra),y=ja.charAt(0),n.isPlainObject(A[ja])||(A[ja]={}),ha=A[ja],la=e.newContainer(z,ja,y+"axis"),B(),I={letter:y,font:z.font,outerTicks:O[ja],showGrid:!T[ja],data:[],bgColor:aa,calendar:z.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,splomStash:((z._splomAxes||{})[y]||{})[ra]},C("uirevision",z.uirevision),la.type=qa[ra]||"linear",c(ha,la,C,I,z),g(ha,la,C,{letter:y,counterAxes:Y[y],
overlayableAxes:F(y,ja),grid:z.grid}),C("fixedrange"),H(),la._input=ha;O=w("rangeslider","handleDefaults");T=w("rangeselector","handleDefaults");for(V=0;V<ca.length;V++)ja=ca[V],ha=A[ja],la=z[ja],O(A,z,ja),"date"===la.type&&T(ha,la,z,ba,la.calendar),C("fixedrange");for(V=0;V<ba.length;V++)ja=ba[V],ha=A[ja],la=z[ja],O=z[h(la.anchor)],O=w("rangeslider","isVisible")(O),C("fixedrange",O);O=z._axisConstraintGroups=[];T=z._axisMatchGroups=[];I=ka.concat(pa);Z=Z.concat(n.simpleMap(pa,h));for(V=0;V<Z.length;V++)ja=
Z[V],y=ja.charAt(0),ha=A[ja],la=z[ja],M="y"===y&&!ha.hasOwnProperty("scaleanchor")&&Q[ja]?la.anchor:void 0,E=!ha.hasOwnProperty("constrain")&&Q[ja]?"domain":void 0,d(ha,la,C,{allAxisIds:I,layoutOut:z,scaleanchorDflt:M,constrainDflt:E});for(V=0;V<T.length;V++){Q=T[V];I=Z=null;for(ra in Q)la=z[h(ra)],la.matches||(Z=la.range,I=la.autorange);if(null===Z||null===I)for(ra in Q){la=z[h(ra)];Z=la.range;I=la.autorange;break}for(ra in Q)la=z[h(ra)],la.matches&&(la.range=Z.slice(),la.autorange=I),la._matchGroup=
Q;if(O.length)for(ra in Q)for(Z=0;Z<O.length;Z++){Q=O[Z];for(var ab in Q)ra===ab&&(n.warn("Axis "+ab+" is set with both a *scaleanchor* and *matches* constraint; ignoring the scale constraint."),delete Q[ab],2>Object.keys(Q).length&&O.splice(Z,1))}}}},{"../../components/color":615,"../../components/fx/helpers":651,"../../components/fx/hovermode_defaults":654,"../../lib":749,"../../plot_api/plot_template":787,"../../registry":880,"../layout_attributes":851,"./axis_defaults":799,"./axis_ids":800,"./constants":803,
"./constraints":804,"./layout_attributes":811,"./position_defaults":814,"./type_defaults":822}],813:[function(b,D,G){var r=b("tinycolor2").mix,n=b("../../components/color/attributes").lightFraction,p=b("../../lib");D.exports=function(k,a,e,f){function l(g,h){return p.coerce2(k,a,f.attributes,g,h)}f=f||{};var m=f.dfltColor,c=l("linecolor",m),d=l("linewidth");e("showline",f.showLine||!!c||!!d)||(delete a.linecolor,delete a.linewidth);c=r(m,f.bgColor,f.blend||n).toRgbString();c=l("gridcolor",c);d=l("gridwidth");
e("showgrid",f.showGrid||!!c||!!d)||(delete a.gridcolor,delete a.gridwidth);f.noZeroLine||(m=l("zerolinecolor",m),c=l("zerolinewidth"),e("zeroline",f.showGrid||!!m||!!c)||(delete a.zerolinecolor,delete a.zerolinewidth))}},{"../../components/color/attributes":614,"../../lib":749,tinycolor2:548}],814:[function(b,D,G){var r=b("fast-isnumeric"),n=b("../../lib");D.exports=function(p,k,a,e){var f=e.counterAxes||[],l=e.overlayableAxes||[],m=e.letter;e=e.grid;if(e){var c=e._domains[m][e._axisMap[k._id]];
var d=e._anchors[k._id];if(c){var g=e[m+"side"].split(" ")[0];var h=e.domain[m]["right"===g||"top"===g?1:0]}}c=c||[0,1];d=d||(r(p.position)?"free":f[0]||"free");g=g||("x"===m?"bottom":"left");h=h||0;"free"===n.coerce(p,k,{anchor:{valType:"enumerated",values:["free"].concat(f),dflt:d}},"anchor")&&a("position",h);n.coerce(p,k,{side:{valType:"enumerated",values:"x"===m?["bottom","top"]:["left","right"],dflt:g}},"side");f=!1;l.length&&(f=n.coerce(p,k,{overlaying:{valType:"enumerated",values:[!1].concat(l),
dflt:!1}},"overlaying"));f||(l=a("domain",c),l[0]>l[1]-1/4096&&(k.domain=c),n.noneOrAll(p.domain,k.domain,c));a("layer");return k}},{"../../lib":749,"fast-isnumeric":241}],815:[function(b,D,G){var r=b("../../constants/alignment").FROM_BL;D.exports=function(n,p,k){void 0===k&&(k=r[n.constraintoward||"center"]);var a=[n.r2l(n.range[0]),n.r2l(n.range[1])];k=a[0]+(a[1]-a[0])*k;n.range=n._input.range=[n.l2r(k+(a[0]-k)*p),n.l2r(k+(a[1]-k)*p)]}},{"../../constants/alignment":717}],816:[function(b,D,G){function r(ca,
ba,ka,qa,pa,oa,ja){var ra=ba._hoverdata,ha=-1<ba._fullLayout.clickmode.indexOf("event"),la=[],ua;if(ra&&Array.isArray(ra)&&!0!==ra[0].hoverOnBox){a(ca,ba,oa);ka=f(ba,ka,qa,pa);ra=ra[0];qa=-1;pa=[];var na;for(na=0;na<ka.length;na++){var wa=ka[na];if(ra.fullData._expandedIndex===wa.cd[0].trace._expandedIndex){if(!0===ra.hoverOnBox)break;void 0!==ra.pointNumber?qa=ra.pointNumber:void 0!==ra.binNumber&&(qa=ra.binNumber,pa=ra.pointNumbers);break}}wa={pointNumber:qa,pointNumbers:pa,searchInfo:wa};if(0<
wa.pointNumbers.length)a:{qa=[];for(ra=0;ra<ka.length;ra++)pa=ka[ra],pa.cd[0].trace.selectedpoints&&0<pa.cd[0].trace.selectedpoints.length&&qa.push(pa);if(1===qa.length&&(ra=qa[0]===wa.searchInfo)&&(qa=wa.searchInfo.cd[0].trace,qa.selectedpoints.length===wa.pointNumbers.length)){for(ra=0;ra<wa.pointNumbers.length;ra++)if(0>qa.selectedpoints.indexOf(wa.pointNumbers[ra])){ra=!1;break a}ra=!0;break a}ra=!1}else{a:{for(qa=ra=0;qa<ka.length;qa++)if(pa=ka[qa],pa=pa.cd[0].trace,pa.selectedpoints){if(1<pa.selectedpoints.length){ra=
!1;break a}ra+=pa.selectedpoints.length;if(1<ra){ra=!1;break a}}ra=1===ra}ra=ra&&(ua=l(wa))}if(ra){ja&&ja.remove();for(ua=0;ua<ka.length;ua++)ja=ka[ua],ja._module.selectPoints(ja,!1);m(ba,ka);e(oa);ha&&ba.emit("plotly_deselect",null)}else{ca=ca.shiftKey&&(void 0!==ua?ua:l(wa));ca={pointNumber:wa.pointNumber,searchInfo:wa.searchInfo,subtract:ca};ua=oa.selectionDefs.concat([ca]);wa=k(ua);for(ua=0;ua<ka.length;ua++)if(ra=ka[ua]._module.selectPoints(ka[ua],wa),ra=d(ra,ka[ua]),la.length)for(qa=0;qa<ra.length;qa++)la.push(ra[qa]);
else la=ra;la={points:la};m(ba,ka,la);ca&&oa&&oa.selectionDefs.push(ca);ja&&(ka=oa.mergedPolygons,ca=C(oa.dragmode),F(g(ka,ca),ja,oa));ha&&ba.emit("plotly_selected",la)}}}function n(ca){return"pointNumber"in ca&&"searchInfo"in ca}function p(ca){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ba,ka,qa,pa){return pa.cd[0].trace._expandedIndex===ca.searchInfo.cd[0].trace._expandedIndex&&qa===ca.pointNumber},isRect:!1,degenerate:!1,subtract:ca.subtract}}function k(ca){for(var ba=[],ka=n(ca[0])?
0:ca[0][0][0],qa=ka,pa=n(ca[0])?0:ca[0][0][1],oa=pa,ja=0;ja<ca.length;ja++)if(n(ca[ja]))ba.push(p(ca[ja]));else{var ra=M.tester(ca[ja]);ra.subtract=ca[ja].subtract;ba.push(ra);ka=Math.min(ka,ra.xmin);qa=Math.max(qa,ra.xmax);pa=Math.min(pa,ra.ymin);oa=Math.max(oa,ra.ymax)}return{xmin:ka,xmax:qa,ymin:pa,ymax:oa,pts:[],contains:function(ha,la,ua,na){for(var wa=!1,Ca=0;Ca<ba.length;Ca++)ba[Ca].contains(ha,la,ua,na)&&(wa=!1===ba[Ca].subtract);return wa},isRect:!1,degenerate:!1}}function a(ca,ba,ka){ba._fullLayout._drawing=
!1;var qa=ba._fullLayout,pa=ka.plotinfo,oa=ka.dragmode,ja=qa._lastSelectedSubplot&&qa._lastSelectedSubplot===pa.id;ca=(ca.shiftKey||ca.altKey)&&!(B(oa)&&C(oa));ja&&ca&&pa.selection&&pa.selection.selectionDefs&&!ka.selectionDefs?(ka.selectionDefs=pa.selection.selectionDefs,ka.mergedPolygons=pa.selection.mergedPolygons):ca&&pa.selection||e(ka);ja||(Z(ba),qa._lastSelectedSubplot=pa.id)}function e(ca){var ba=ca.dragmode,ka=ca.plotinfo,qa=ca.gd;0<=qa._fullLayout._activeShapeIndex&&qa._fullLayout._deactivateShape(qa);
B(ba)&&(ba=qa._fullLayout._zoomlayer.selectAll(".select-outline-"+ka.id))&&qa._fullLayout._drawing&&((ba=J(ba,ca))&&q.call("_guiRelayout",qa,{shapes:ba}),qa._fullLayout._drawing=!1);ka.selection={};ka.selection.selectionDefs=ca.selectionDefs=[];ka.selection.mergedPolygons=ca.mergedPolygons=[]}function f(ca,ba,ka,qa){function pa(na,wa,Ca,Fa){return{_module:na,cd:wa,xaxis:Ca,yaxis:Fa}}var oa=[],ja=ba.map(function(na){return na._id}),ra=ka.map(function(na){return na._id}),ha;for(ha=0;ha<ca.calcdata.length;ha++){var la=
ca.calcdata[ha];var ua=la[0].trace;!0===ua.visible&&ua._module&&ua._module.selectPoints&&(!qa||ua.subplot!==qa&&ua.geo!==qa?"splom"===ua.type&&ua._xaxes[ja[0]]&&ua._yaxes[ra[0]]?(la=pa(ua._module,la,ba[0],ka[0]),la.scene=ca._fullLayout._splomScenes[ua.uid],oa.push(la)):"sankey"===ua.type?(ua=pa(ua._module,la,ba[0],ka[0]),oa.push(ua)):-1!==ja.indexOf(ua.xaxis)&&-1!==ra.indexOf(ua.yaxis)&&oa.push(pa(ua._module,la,L(ca,ua.xaxis),L(ca,ua.yaxis))):oa.push(pa(ua._module,la,ba[0],ka[0])))}return oa}function l(ca){var ba=
ca.searchInfo.cd[0].trace,ka=ca.pointNumber;ca=ca.pointNumbers;ka=0<ca.length?ca[0]:ka;return ba.selectedpoints?-1<ba.selectedpoints.indexOf(ka):!1}function m(ca,ba,ka){var qa;for(qa=0;qa<ba.length;qa++){var pa=ba[qa].cd[0].trace._fullInput;var oa=ca._fullLayout._tracePreGUI[pa.uid]||{};void 0===oa.selectedpoints&&(oa.selectedpoints=pa._input.selectedpoints||null)}if(ka){ka=ka.points||[];for(qa=0;qa<ba.length;qa++){var ja=ba[qa].cd[0].trace;ja._input.selectedpoints=ja._fullInput.selectedpoints=[];
ja._fullInput!==ja&&(ja.selectedpoints=[])}for(qa=0;qa<ka.length;qa++){pa=ka[qa];oa=pa.data;var ra=pa.fullData;pa.pointIndices?([].push.apply(oa.selectedpoints,pa.pointIndices),ja._fullInput!==ja&&[].push.apply(ra.selectedpoints,pa.pointIndices)):(oa.selectedpoints.push(pa.pointIndex),ja._fullInput!==ja&&ra.selectedpoints.push(pa.pointIndex))}}else for(qa=0;qa<ba.length;qa++)ja=ba[qa].cd[0].trace,delete ja.selectedpoints,delete ja._input.selectedpoints,ja._fullInput!==ja&&delete ja._fullInput.selectedpoints;
pa=!1;for(qa=0;qa<ba.length;qa++)if(oa=ba[qa],ka=oa.cd,ja=ka[0].trace,q.traceIs(ja,"regl")&&(pa=!0),ja=oa._module,ja=ja.styleOnSelect||ja.style)ja(ca,ka,ka[0].node3),ka[0].nodeRangePlot3&&ja(ca,ka,ka[0].nodeRangePlot3);pa&&(P(ca),N(ca))}function c(ca,ba,ka){if(ka)return ca=h.difference({regions:ca,inverted:!1},{regions:[ba],inverted:!1}),ca.regions;ca=h.union({regions:ca,inverted:!1},{regions:[ba],inverted:!1});return ca.regions}function d(ca,ba){if(Array.isArray(ca)){var ka=ba.cd;ba=ba.cd[0].trace;
for(var qa=0;qa<ca.length;qa++)ca[qa]=A(ca[qa],ba,ka)}return ca}function g(ca,ba){for(var ka=[],qa=0;qa<ca.length;qa++){ka[qa]=[];for(var pa=0;pa<ca[qa].length;pa++){ka[qa][pa]=[];ka[qa][pa][0]=pa?"L":"M";for(var oa=0;oa<ca[qa][pa].length;oa++)ka[qa][pa].push(ca[qa][pa][oa])}ba||ka[qa].push(["Z",ka[qa][0][1],ka[qa][0][2]])}return ka}var h=b("polybooljs"),q=b("../../registry"),t=b("../../components/drawing").dashStyle,v=b("../../components/color"),w=b("../../components/fx"),A=b("../../components/fx/helpers").makeEventData;
G=b("../../components/dragelement/helpers");var z=G.freeMode,y=G.rectMode,B=G.drawMode,C=G.openMode,u=G.selectMode,F=b("../../components/shapes/draw_newshape/display_outlines"),H=b("../../components/shapes/draw_newshape/helpers").handleEllipse,J=b("../../components/shapes/draw_newshape/newshapes"),I=b("../../lib"),M=b("../../lib/polygon"),E=b("../../lib/throttle"),L=b("./axis_ids").getFromId,P=b("../../lib/clear_gl_canvases"),N=b("../../plot_api/subroutines").redrawReglTraces,Q=b("./constants"),O=
Q.MINSELECT,T=M.filter,V=M.tester,Z=b("./handle_outline").clearSelect;b=b("./helpers");var aa=b.p2r,Y=b.axValue,ea=b.getTransform;D.exports={prepSelect:function(ca,ba,ka,qa,pa){function oa(Cb,Ib){return Cb-Ib}var ja=z(pa),ra=y(pa),ha=C(pa),la=B(pa),ua=u(pa),na="drawcircle"===pa,wa="drawline"===pa||na,Ca=qa.gd,Fa=Ca._fullLayout,Xa=Fa._zoomlayer,ab=qa.element.getBoundingClientRect(),gb=qa.plotinfo,bb=ea(gb),La=ba-ab.left,kb=ka-ab.top,mb=La,ya=kb;ba="M"+La+","+kb;var Ia=qa.xaxes[0]._length,Na=qa.yaxes[0]._length,
Ta=qa.xaxes.concat(qa.yaxes),hb=ca.altKey&&!(B(pa)&&ha),Ya,Ga,Pa,Va,va,Ea,Qa;a(ca,Ca,qa);ja&&(Ya=T([[La,kb]],Q.BENDPX));var $a=Xa.selectAll("path.select-outline-"+gb.id).data(la?[0]:[1,2]);ca=Fa.newshape;$a.enter().append("path").attr("class",function(Cb){return"select-outline select-outline-"+Cb+" select-outline-"+gb.id}).style(la?{opacity:ca.opacity/2,fill:ha?void 0:ca.fillcolor,stroke:ca.line.color,"stroke-dasharray":t(ca.line.dash,ca.line.width),"stroke-width":ca.line.width+"px"}:{}).attr("fill-rule",
ca.fillrule).classed("cursor-move",la?!0:!1).attr("transform",bb).attr("d",ba+"Z");var eb=Xa.append("path").attr("class","zoombox-corners").style({fill:v.background,stroke:v.defaultLine,"stroke-width":1}).attr("transform",bb).attr("d","M0,0Z"),pb=Fa._uid+Q.SELECTID,Za=[],nb=f(Ca,qa.xaxes,qa.yaxes,qa.subplot);var sb=gb.fillRangeItems?gb.fillRangeItems:ra?function(Cb,Ib){Cb=Cb.range={};for(va=0;va<Ta.length;va++){var fc=Ta[va],qc=fc._id.charAt(0);Cb[fc._id]=[aa(fc,Ib[qc+"min"]),aa(fc,Ib[qc+"max"])].sort(oa)}}:
function(Cb,Ib,fc){Cb=Cb.lassoPoints={};for(va=0;va<Ta.length;va++)Ib=Ta[va],Cb[Ib._id]=fc.filtered.map(Y(Ib))};qa.moveFn=function(Cb,Ib){mb=Math.max(0,Math.min(Ia,Cb+La));ya=Math.max(0,Math.min(Na,Ib+kb));Cb=Math.abs(mb-La);Ib=Math.abs(ya-kb);if(ra){if(ua){var fc=Fa.selectdirection;fc="any"===fc?Ib<Math.min(.6*Cb,O)?"h":Cb<Math.min(.6*Ib,O)?"v":"d":fc;switch(fc){case "h":var qc=na?Na/2:0;var Cc=Na;break;case "v":qc=na?Ia/2:0,Cc=Ia}}if(la)switch(Fa.newshape.drawdirection){case "vertical":fc="h";qc=
na?Na/2:0;Cc=Na;break;case "horizontal":fc="v";qc=na?Ia/2:0;Cc=Ia;break;case "ortho":Cb<Ib?(fc="h",qc=kb,Cc=ya):(fc="v",qc=La,Cc=mb);break;default:fc="d"}"h"===fc?(Va=wa?H(na,[mb,qc],[mb,Cc]):[[La,qc],[La,Cc],[mb,Cc],[mb,qc]],Va.xmin=wa?mb:Math.min(La,mb),Va.xmax=wa?mb:Math.max(La,mb),Va.ymin=Math.min(qc,Cc),Va.ymax=Math.max(qc,Cc),eb.attr("d","M"+Va.xmin+","+(kb-O)+"h-4v"+2*O+"h4ZM"+(Va.xmax-1)+","+(kb-O)+"h4v"+2*O+"h-4Z")):"v"===fc?(Va=wa?H(na,[qc,ya],[Cc,ya]):[[qc,kb],[qc,ya],[Cc,ya],[Cc,kb]],
Va.xmin=Math.min(qc,Cc),Va.xmax=Math.max(qc,Cc),Va.ymin=wa?ya:Math.min(kb,ya),Va.ymax=wa?ya:Math.max(kb,ya),eb.attr("d","M"+(La-O)+","+Va.ymin+"v-4h"+2*O+"v4ZM"+(La-O)+","+(Va.ymax-1)+"v4h"+2*O+"v-4Z")):"d"===fc&&(Va=wa?H(na,[La,kb],[mb,ya]):[[La,kb],[La,ya],[mb,ya],[mb,kb]],Va.xmin=Math.min(La,mb),Va.xmax=Math.max(La,mb),Va.ymin=Math.min(kb,ya),Va.ymax=Math.max(kb,ya),eb.attr("d","M0,0Z"))}else ja&&(Ya.addPt([mb,ya]),Va=Ya.filtered);qa.selectionDefs&&qa.selectionDefs.length?(Pa=c(qa.mergedPolygons,
Va,hb),Va.subtract=hb,Ga=k(qa.selectionDefs.concat([Va]))):(Pa=[Va],Ga=V(Va));F(g(Pa,ha),$a,qa);ua&&E.throttle(pb,Q.SELECTDELAY,function(){Za=[];var cd=[];for(va=0;va<nb.length;va++){Ea=nb[va];var Qc=Ea._module.selectPoints(Ea,Ga);cd.push(Qc);Qc=d(Qc,Ea);if(Za.length)for(var Wc=0;Wc<Qc.length;Wc++)Za.push(Qc[Wc]);else Za=Qc}Qa={points:Za};m(Ca,nb,Qa);sb(Qa,Va,Ya);qa.gd.emit("plotly_selecting",Qa)})};qa.clickFn=function(Cb,Ib){eb.remove();if(0<=Ca._fullLayout._activeShapeIndex)Ca._fullLayout._deactivateShape(Ca);
else if(!la){var fc=Fa.clickmode;E.done(pb).then(function(){E.clear(pb);if(2===Cb){$a.remove();for(va=0;va<nb.length;va++)Ea=nb[va],Ea._module.selectPoints(Ea,!1);m(Ca,nb);e(qa);Ca.emit("plotly_deselect",null)}else-1<fc.indexOf("select")&&r(Ib,Ca,qa.xaxes,qa.yaxes,qa.subplot,qa,$a),"event"===fc&&Ca.emit("plotly_selected",void 0);w.click(Ca,Ib)}).catch(I.error)}};qa.doneFn=function(){eb.remove();E.done(pb).then(function(){E.clear(pb);qa.gd.emit("plotly_selected",Qa);Va&&qa.selectionDefs&&(Va.subtract=
hb,qa.selectionDefs.push(Va),qa.mergedPolygons.length=0,[].push.apply(qa.mergedPolygons,Pa));qa.doneFnCompleted&&qa.doneFnCompleted(Za)}).catch(I.error);la&&e(qa)}},clearSelect:Z,clearSelectionsCache:e,selectOnClick:r}},{"../../components/color":615,"../../components/dragelement/helpers":633,"../../components/drawing":637,"../../components/fx":655,"../../components/fx/helpers":651,"../../components/shapes/draw_newshape/display_outlines":700,"../../components/shapes/draw_newshape/helpers":701,"../../components/shapes/draw_newshape/newshapes":702,
"../../lib":749,"../../lib/clear_gl_canvases":733,"../../lib/polygon":761,"../../lib/throttle":774,"../../plot_api/subroutines":788,"../../registry":880,"./axis_ids":800,"./constants":803,"./handle_outline":807,"./helpers":808,polybooljs:491}],817:[function(b,D,G){function r(u){return Math.pow(10,u)}var n=b("d3"),p=b("d3-time-format").utcFormat,k=b("fast-isnumeric"),a=b("../../lib"),e=a.cleanNumber,f=a.ms2DateTime,l=a.dateTime2ms,m=a.ensureNumber,c=a.isArrayOrTypedArray;G=b("../../constants/numerical");
var d=G.FP_SAFE,g=G.BADNUM,h=G.LOG_CLIP,q=G.ONEWEEK,t=G.ONEDAY,v=G.ONEHOUR,w=G.ONEMIN,A=G.ONESEC,z=b("./axis_ids"),y=b("./constants"),B=y.HOUR_PATTERN,C=y.WEEKDAY_PATTERN;D.exports=function(u,F){function H(aa,Y){return 0<aa?Math.log(aa)/Math.LN10:0>=aa&&Y&&u.range&&2===u.range.length?(aa=u.range[0],Y=u.range[1],.5*(aa+Y-2*h*Math.abs(aa-Y))):g}function J(aa,Y,ea,ca){if((ca||{}).msUTC&&k(aa))return+aa;Y=l(aa,ea||u.calendar);if(Y===g)if(k(aa))aa=+aa,Y=Math.floor(10*a.mod(aa+.05,1)),Y=l(new Date(Math.round(aa-
Y/10)))+Y/10;else return g;return Y}function I(aa,Y,ea){return f(aa,Y,ea||u.calendar)}function M(aa){return u._categories[Math.round(aa)]}function E(aa){if(null!==aa&&void 0!==aa){void 0===u._categoriesMap&&(u._categoriesMap={});if(void 0!==u._categoriesMap[aa])return u._categoriesMap[aa];u._categories.push("number"===typeof aa?String(aa):aa);var Y=u._categories.length-1;return u._categoriesMap[aa]=Y}return g}function L(aa){if(u._categoriesMap)return u._categoriesMap[aa]}function P(aa){var Y=L(aa);
if(void 0!==Y)return Y;if(k(aa))return+aa}F=F||{};var N=u._id||"x",Q=N.charAt(0),O=function(aa){return k(aa)?n.round(u._b+u._m*aa,2):g},T=function(aa){return(aa-u._b)/u._m};if(u.rangebreaks){var V="y"===Q;O=function(aa){if(!k(aa))return g;var Y=u._rangebreaks.length;if(!Y)return n.round(u._b+u._m*aa,2);var ea=V;u.range[0]>u.range[1]&&(ea=!ea);ea=ea?-1:1;for(var ca=ea*aa,ba=0,ka=0;ka<Y;ka++){var qa=ea*u._rangebreaks[ka].min,pa=ea*u._rangebreaks[ka].max;if(ca<qa)break;if(ca>pa)ba=ka+1;else{ba=ca<(qa+
pa)/2?ka:ka+1;break}}Y=u._B[ba]||0;return isFinite(Y)?n.round(Y+u._m2*aa,2):0};T=function(aa){var Y=u._rangebreaks.length;if(!Y)return(aa-u._b)/u._m;for(var ea=0,ca=0;ca<Y&&!(aa<u._rangebreaks[ca].pmin);ca++)aa>u._rangebreaks[ca].pmax&&(ea=ca+1);return(aa-u._B[ea])/u._m2}}u.c2l="log"===u.type?H:m;u.l2c="log"===u.type?r:m;u.l2p=O;u.p2l=T;u.c2p="log"===u.type?function(aa,Y){return O(H(aa,Y))}:O;u.p2c="log"===u.type?function(aa){return r(T(aa))}:T;-1!==["linear","-"].indexOf(u.type)?(u.d2r=u.r2d=u.d2c=
u.r2c=u.d2l=u.r2l=e,u.c2d=u.c2r=u.l2d=u.l2r=m,u.d2p=u.r2p=function(aa){return u.l2p(e(aa))},u.p2d=u.p2r=T,u.cleanPos=m):"log"===u.type?(u.d2r=u.d2l=function(aa,Y){return H(e(aa),Y)},u.r2d=u.r2c=function(aa){return r(e(aa))},u.d2c=u.r2l=e,u.c2d=u.l2r=m,u.c2r=H,u.l2d=r,u.d2p=function(aa,Y){return u.l2p(u.d2r(aa,Y))},u.p2d=function(aa){return r(T(aa))},u.r2p=function(aa){return u.l2p(e(aa))},u.p2r=T,u.cleanPos=m):"date"===u.type?(u.d2r=u.r2d=a.identity,u.d2c=u.r2c=u.d2l=u.r2l=J,u.c2d=u.c2r=u.l2d=u.l2r=
I,u.d2p=u.r2p=function(aa,Y,ea){return u.l2p(J(aa,0,ea))},u.p2d=u.p2r=function(aa,Y,ea){return I(T(aa),Y,ea)},u.cleanPos=function(aa){return a.cleanDate(aa,g,u.calendar)}):"category"===u.type?(u.d2c=u.d2l=E,u.r2d=u.c2d=u.l2d=M,u.d2r=u.d2l_noadd=P,u.r2c=function(aa){aa=P(aa);return void 0!==aa?aa:u.fraction2r(.5)},u.l2r=u.c2r=m,u.r2l=P,u.d2p=function(aa){return u.l2p(u.r2c(aa))},u.p2d=function(aa){return M(T(aa))},u.r2p=u.d2p,u.p2r=T,u.cleanPos=function(aa){return"string"===typeof aa&&""!==aa?aa:m(aa)}):
"multicategory"===u.type&&(u.r2d=u.c2d=u.l2d=M,u.d2r=u.d2l_noadd=P,u.r2c=function(aa){aa=P(aa);return void 0!==aa?aa:u.fraction2r(.5)},u.r2c_just_indices=L,u.l2r=u.c2r=m,u.r2l=P,u.d2p=function(aa){return u.l2p(u.r2c(aa))},u.p2d=function(aa){return M(T(aa))},u.r2p=u.d2p,u.p2r=T,u.cleanPos=function(aa){return Array.isArray(aa)||"string"===typeof aa&&""!==aa?aa:m(aa)},u.setupMultiCategory=function(aa){var Y=u._traceIndices,ea,ca=F._axisMatchGroups;if(ca&&ca.length&&0===u._categories.length)for(ea=0;ea<
ca.length;ea++){var ba=ca[ea];if(ba[N])for(var ka in ba)ka!==N&&(ba=F[z.id2name(ka)],Y=Y.concat(ba._traceIndices))}var qa=[[0,{}],[0,{}]];ca=[];for(ea=0;ea<Y.length;ea++)if(ba=aa[Y[ea]],Q in ba){ka=ba[Q];var pa=ba._length||a.minRowLength(ka);if(c(ka[0])&&c(ka[1]))for(ba=0;ba<pa;ba++){var oa=ka[0][ba],ja=ka[1][ba];null!==oa&&void 0!==oa&&null!==ja&&void 0!==ja&&(ca.push([oa,ja]),oa in qa[0][1]||(qa[0][1][oa]=qa[0][0]++),ja in qa[1][1]||(qa[1][1][ja]=qa[1][0]++))}}ca.sort(function(ra,ha){var la=qa[0][1];
if(la=la[ra[0]]-la[ha[0]])return la;la=qa[1][1];return la[ra[1]]-la[ha[1]]});for(ea=0;ea<ca.length;ea++)E(ca[ea])});u.fraction2r=function(aa){var Y=u.r2l(u.range[0]),ea=u.r2l(u.range[1]);return u.l2r(Y+aa*(ea-Y))};u.r2fraction=function(aa){var Y=u.r2l(u.range[0]),ea=u.r2l(u.range[1]);return(u.r2l(aa)-Y)/(ea-Y)};u.cleanRange=function(aa,Y){Y||(Y={});aa||(aa="range");var ea=a.nestedProperty(u,aa).get();var ca="date"===u.type?a.dfltRange(u.calendar):"y"===Q?y.DFLTRANGEY:Y.dfltRange||y.DFLTRANGEX;ca=
ca.slice();if("tozero"===u.rangemode||"nonnegative"===u.rangemode)ca[0]=0;if(ea&&2===ea.length)for("date"!==u.type||u.autorange||(ea[0]=a.cleanDate(ea[0],g,u.calendar),ea[1]=a.cleanDate(ea[1],g,u.calendar)),Y=0;2>Y;Y++)if("date"===u.type){if(!a.isDateTime(ea[Y],u.calendar)){u[aa]=ca;break}if(u.r2l(ea[0])===u.r2l(ea[1])){aa=a.constrain(u.r2l(ea[0]),a.MIN_MS+1E3,a.MAX_MS-1E3);ea[0]=u.l2r(aa-1E3);ea[1]=u.l2r(aa+1E3);break}}else{if(!k(ea[Y]))if(k(ea[1-Y]))ea[Y]=ea[1-Y]*(Y?10:.1);else{u[aa]=ca;break}ea[Y]<
-d?ea[Y]=-d:ea[Y]>d&&(ea[Y]=d);if(ea[0]===ea[1]){var ba=Math.max(1,Math.abs(1E-6*ea[0]));ea[0]-=ba;ea[1]+=ba}}else a.nestedProperty(u,aa).set(ca)};u.setScale=function(aa){var Y=F._size;if(u.overlaying){var ea=z.getFromId({_fullLayout:F},u.overlaying);u.domain=ea.domain}ea=aa&&u._r?"_r":"range";var ca=u.calendar;u.cleanRange(ea);aa=u.r2l(u[ea][0],ca);ea=u.r2l(u[ea][1],ca);(ca="y"===Q)?(u._offset=Y.t+(1-u.domain[1])*Y.h,u._length=Y.h*(u.domain[1]-u.domain[0]),u._m=u._length/(aa-ea),u._b=-u._m*ea):(u._offset=
Y.l+u.domain[0]*Y.w,u._length=Y.w*(u.domain[1]-u.domain[0]),u._m=u._length/(ea-aa),u._b=-u._m*aa);u._rangebreaks=[];u._lBreaks=0;u._m2=0;u._B=[];if(u.rangebreaks&&(u._rangebreaks=u.locateBreaks(Math.min(aa,ea),Math.max(aa,ea)),u._rangebreaks.length)){for(Y=0;Y<u._rangebreaks.length;Y++){var ba=u._rangebreaks[Y];u._lBreaks+=Math.abs(ba.max-ba.min)}Y=ca;aa>ea&&(Y=!Y);Y&&u._rangebreaks.reverse();var ka=Y?-1:1;u._m2=ka*u._length/(Math.abs(ea-aa)-u._lBreaks);u._B.push(-u._m2*(ca?ea:aa));for(Y=0;Y<u._rangebreaks.length;Y++)ba=
u._rangebreaks[Y],u._B.push(u._B[u._B.length-1]-ka*u._m2*(ba.max-ba.min));for(Y=0;Y<u._rangebreaks.length;Y++)ba=u._rangebreaks[Y],ba.pmin=O(ba.min),ba.pmax=O(ba.max)}if(!isFinite(u._m)||!isFinite(u._b)||0>u._length)throw F._replotting=!1,Error("Something went wrong with axis scaling");};u.maskBreaks=function(aa){for(var Y=u.rangebreaks||[],ea,ca,ba,ka,qa=0;qa<Y.length;qa++){var pa=Y[qa];if(pa.enabled)if(pa.bounds){var oa=pa.pattern;ea=a.simpleMap(pa.bounds,oa?e:u.d2c);ca=ea[0];ea=ea[1];switch(oa){case C:ka=
new Date(aa);ba=ka.getUTCDay();ca>ea&&(ea+=7,ba<ca&&(ba+=7));break;case B:ka=new Date(aa);ba=ka.getUTCHours();pa=ka.getUTCMinutes();oa=ka.getUTCSeconds();ka=ka.getUTCMilliseconds();ba+=pa/60+oa/3600+ka/36E5;ca>ea&&(ea+=24,ba<ca&&(ba+=24));break;case "":ba=aa}if(ba>=ca&&ba<ea)return g}else for(oa=a.simpleMap(pa.values,u.d2c).sort(a.sorterAsc),ka=0;ka<oa.length;ka++)if(ca=oa[ka],ea=ca+pa.dvalue,aa>=ca&&aa<ea)return g}return aa};u.locateBreaks=function(aa,Y){var ea,ca=[];if(!u.rangebreaks)return ca;
var ba=u.rangebreaks.slice().sort(function(ua,na){return ua.pattern===C&&na.pattern===B?-1:na.pattern===C&&ua.pattern===B?1:0}),ka=function(ua,na){ua=a.constrain(ua,aa,Y);na=a.constrain(na,aa,Y);if(ua!==na){for(var wa=!0,Ca=0;Ca<ca.length;Ca++){var Fa=ca[Ca];ua<Fa.max&&na>=Fa.min&&(ua<Fa.min&&(Fa.min=ua),na>Fa.max&&(Fa.max=na),wa=!1)}wa&&ca.push({min:ua,max:na})}};for(ea=0;ea<ba.length;ea++){var qa=ba[ea];if(qa.enabled)if(qa.bounds){var pa=aa,oa=Y;qa.pattern&&(pa=Math.floor(pa));var ja=a.simpleMap(qa.bounds,
qa.pattern?e:u.r2l);var ra=ja[0];var ha=ja[1];var la=new Date(pa);switch(qa.pattern){case C:qa=q;ha=((ha<ra?7:0)+(ha-ra))*t;pa+=ra*t-(la.getUTCDay()*t+la.getUTCHours()*v+la.getUTCMinutes()*w+la.getUTCSeconds()*A+la.getUTCMilliseconds());break;case B:qa=t;ha=((ha<ra?24:0)+(ha-ra))*v;pa+=ra*v-(la.getUTCHours()*v+la.getUTCMinutes()*w+la.getUTCSeconds()*A+la.getUTCMilliseconds());break;default:pa=Math.min(ja[0],ja[1]),oa=Math.max(ja[0],ja[1]),ha=qa=oa-pa}for(ra=pa;ra<oa;ra+=qa)ka(ra,ra+ha)}else for(oa=
a.simpleMap(qa.values,u.d2c),pa=0;pa<oa.length;pa++)ra=oa[pa],ha=ra+qa.dvalue,ka(ra,ha)}ca.sort(function(ua,na){return ua.min-na.min});return ca};u.makeCalcdata=function(aa,Y,ea){var ca;var ba=u.type;var ka="date"===ba&&aa[Y+"calendar"];if(Y in aa){Y=aa[Y];aa=aa._length||a.minRowLength(Y);if(a.isTypedArray(Y)&&("linear"===ba||"log"===ba)){if(aa===Y.length)return Y;if(Y.subarray)return Y.subarray(0,aa)}if("multicategory"===ba){ea=Array(aa);for(ka=0;ka<aa;ka++)ea[ka]=L([(Y[0]||[])[ka],(Y[1]||[])[ka]]);
return ea}ba=Array(aa);for(ca=0;ca<aa;ca++)ba[ca]=u.d2c(Y[ca],0,ka,ea)}else for(ea=(Y+"0"in aa)?u.d2c(aa[Y+"0"],0,ka):0,ka=aa["d"+Y]?Number(aa["d"+Y]):1,Y=aa[{x:"y",y:"x"}[Y]],aa=aa._length||Y.length,ba=Array(aa),ca=0;ca<aa;ca++)ba[ca]=ea+ca*ka;if(u.rangebreaks)for(ca=0;ca<aa;ca++)ba[ca]=u.maskBreaks(ba[ca]);return ba};u.isValidRange=function(aa){return Array.isArray(aa)&&2===aa.length&&k(u.r2l(aa[0]))&&k(u.r2l(aa[1]))};u.isPtWithinRange=function(aa,Y){aa=u.c2l(aa[Q],null,Y);Y=u.r2l(u.range[0]);var ea=
u.r2l(u.range[1]);return Y<ea?Y<=aa&&aa<=ea:ea<=aa&&aa<=Y};u._emptyCategories=function(){u._categories=[];u._categoriesMap={}};u.clearCalc=function(){var aa=F._axisMatchGroups;if(aa&&aa.length){for(var Y=!1,ea=0;ea<aa.length;ea++){var ca=aa[ea];if(ca[N]){Y=!0;ea=aa=null;for(var ba in ca)if(ca=F[z.id2name(ba)],ca._categories){aa=ca._categories;ea=ca._categoriesMap;break}aa&&ea?(u._categories=aa,u._categoriesMap=ea):u._emptyCategories();break}}Y||u._emptyCategories()}else u._emptyCategories();if(u._initialCategories)for(Y=
0;Y<u._initialCategories.length;Y++)E(u._initialCategories[Y])};u.sortByInitialCategories=function(){var aa=[];u._emptyCategories();if(u._initialCategories)for(var Y=0;Y<u._initialCategories.length;Y++)E(u._initialCategories[Y]);aa=aa.concat(u._traceIndices);Y=u._matchGroup;for(var ea in Y)N!==ea&&(Y=F[z.id2name(ea)],Y._categories=u._categories,Y._categoriesMap=u._categoriesMap,aa=aa.concat(Y._traceIndices));return aa};var Z=F._d3locale;"date"===u.type&&(u._dateFormat=Z?Z.timeFormat:p,u._extraFormat=
F._extraFormat);u._separators=F.separators;u._numFormat=Z?Z.numberFormat:n.format;delete u._minDtick;delete u._forceTick0}},{"../../constants/numerical":724,"../../lib":749,"./axis_ids":800,"./constants":803,d3:169,"d3-time-format":166,"fast-isnumeric":241}],818:[function(b,D,G){function r(e){var f=["showexponent","showtickprefix","showticksuffix"].filter(function(l){return void 0!==e[l]});if(f.every(function(l){return e[l]===e[f[0]]})||1===f.length)return e[f[0]]}function n(e,f){p.coerce(e,f,k.tickformatstops,
"enabled",void 0)&&(p.coerce(e,f,k.tickformatstops,"dtickrange",void 0),p.coerce(e,f,k.tickformatstops,"value",void 0))}var p=b("../../lib"),k=b("./layout_attributes"),a=b("../array_container_defaults");D.exports=function(e,f,l,m,c,d){if(!d||1===d.pass){var g=r(e);l("tickprefix")&&l("showtickprefix",g);l("ticksuffix",c.tickSuffixDflt)&&l("showticksuffix",g)}d&&2!==d.pass||(d=r(e),l("tickprefix")&&l("showtickprefix",d),l("ticksuffix",c.tickSuffixDflt)&&l("showticksuffix",d),l("showticklabels")&&(c=
c.font||{},g=f.color,p.coerceFont(l,"tickfont",{family:c.family,size:c.size,color:g&&g!==k.color.dflt?g:c.color}),l("tickangle"),"category"!==m&&(c=l("tickformat"),a(e,f,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:n}),f.tickformatstops.length||delete f.tickformatstops,c||"date"===m||(l("showexponent",d),l("exponentformat"),l("separatethousands")))))}},{"../../lib":749,"../array_container_defaults":793,"./layout_attributes":811}],819:[function(b,D,G){var r=b("../../lib"),n=b("./layout_attributes");
D.exports=function(p,k,a,e){var f=r.coerce2(p,k,n,"ticklen"),l=r.coerce2(p,k,n,"tickwidth");p=r.coerce2(p,k,n,"tickcolor",k.color);a("ticks",e.outerTicks||f||l||p?"outside":"")||(delete k.ticklen,delete k.tickwidth,delete k.tickcolor)}},{"../../lib":749,"./layout_attributes":811}],820:[function(b,D,G){var r=b("./clean_ticks"),n=b("../../lib").isArrayOrTypedArray;D.exports=function(p,k,a,e){function f(d){var g=p[d];return void 0!==g?g:(k._template||{})[d]}var l=f("tick0"),m=f("dtick"),c=f("tickvals");
c=n(c)?"array":m?"linear":"auto";c=a("tickmode",c);"auto"===c?a("nticks"):"linear"===c?(a=k.dtick=r.dtick(m,e),k.tick0=r.tick0(l,e,k.calendar,a)):"multicategory"!==e&&(void 0===a("tickvals")?k.tickmode="auto":a("ticktext"))}},{"../../lib":749,"./clean_ticks":802}],821:[function(b,D,G){var r=b("d3"),n=b("../../registry"),p=b("../../lib"),k=b("../../components/drawing"),a=b("./axes");D.exports=function(e,f,l,m){function c(y){var B=y.xaxis,C=y.yaxis;q._defs.select("#"+y.clipId+"\x3e rect").call(k.setTranslate,
0,0).call(k.setScale,1,1);y.plot.call(k.setTranslate,B._offset,C._offset).call(k.setScale,1,1);B=y.plot.selectAll(".scatterlayer .trace");B.selectAll(".point").call(k.setPointGroupScale,1,1);B.selectAll(".textpoint").call(k.setTextPointsScale,1,1);B.call(k.hideOutsideRangePoints,y)}function d(){for(var y={},B=0;B<f.length;B++){var C=f[B],u=C.plotinfo.xaxis,F=C.plotinfo.yaxis;C.xr1&&(y[u._name+".range"]=C.xr1.slice());C.yr1&&(y[F._name+".range"]=C.yr1.slice())}t&&t();return n.call("relayout",e,y).then(function(){for(var H=
0;H<f.length;H++)c(f[H].plotinfo)})}function g(){for(var y={},B=0;B<f.length;B++){var C=f[B],u=C.plotinfo.xaxis,F=C.plotinfo.yaxis;C.xr0&&(y[u._name+".range"]=C.xr0.slice());C.yr0&&(y[F._name+".range"]=C.yr0.slice())}return n.call("relayout",e,y).then(function(){for(var H=0;H<f.length;H++)c(f[H].plotinfo)})}function h(){v=Date.now();for(var y=w(Math.min(1,(v-A)/l.duration)),B=0;B<f.length;B++){var C=f[B],u=y,F=C.plotinfo,H=F.xaxis,J=F.yaxis,I=H._length,M=J._length,E=!!C.xr1,L=!!C.yr1,P=[];if(E){var N=
p.simpleMap(C.xr0,H.r2l),Q=p.simpleMap(C.xr1,H.r2l),O=N[1]-N[0],T=Q[1]-Q[0];P[0]=(N[0]*(1-u)+u*Q[0]-N[0])/(N[1]-N[0])*I;P[2]=I*(1-u+u*T/O);H.range[0]=H.l2r(N[0]*(1-u)+u*Q[0]);H.range[1]=H.l2r(N[1]*(1-u)+u*Q[1])}else P[0]=0,P[2]=I;L?(N=p.simpleMap(C.yr0,J.r2l),C=p.simpleMap(C.yr1,J.r2l),Q=N[1]-N[0],O=C[1]-C[0],P[1]=(N[1]*(1-u)+u*C[1]-N[1])/(N[0]-N[1])*M,P[3]=M*(1-u+u*O/Q),J.range[0]=H.l2r(N[0]*(1-u)+u*C[0]),J.range[1]=J.l2r(N[1]*(1-u)+u*C[1])):(P[1]=0,P[3]=M);a.drawOne(e,H,{skipTitle:!0});a.drawOne(e,
J,{skipTitle:!0});a.redrawComponents(e,[H._id,J._id]);u=E?I/P[2]:1;C=L?M/P[3]:1;H=H._offset-(E?P[0]/P[2]*I:0);J=J._offset-(L?P[1]/P[3]*M:0);F.clipRect.call(k.setTranslate,E?P[0]:0,L?P[1]:0).call(k.setScale,1/u,1/C);F.plot.call(k.setTranslate,H,J).call(k.setScale,u,C);k.setPointGroupScale(F.zoomScalePts,1/u,1/C);k.setTextPointsScale(F.zoomScaleTxt,1/u,1/C)}v-A>l.duration?(d(),z=window.cancelAnimationFrame(h)):z=window.requestAnimationFrame(h)}var q=e._fullLayout;if(0===f.length)a.redrawComponents(e);
else{var t;m&&(t=m());var v,w=r.ease(l.easing);e._transitionData._interruptCallbacks.push(function(){window.cancelAnimationFrame(z);z=null;return g()});var A=Date.now();var z=window.requestAnimationFrame(h);return Promise.resolve()}}},{"../../components/drawing":637,"../../lib":749,"../../registry":880,"./axes":797,d3:169}],822:[function(b,D,G){function r(k,a){var e={v:"x",h:"y"}[k.orientation||"v"],f=n(k,"box-violin"),l=n(k._fullInput||{},"candlestick");return f&&!l&&a===e&&void 0===k[e]&&void 0===
k[e+"0"]}var n=b("../../registry").traceIs,p=b("./axis_autotype");D.exports=function(k,a,e,f){if("-"===e("type",(f.splomStash||{}).type)){e=f.data;if("-"===a.type){f=a._id;var l=f.charAt(0);-1!==f.indexOf("scene")&&(f=l);b:{for(var m=f,c=0;c<e.length;c++){var d=e[c];if("splom"===d.type&&0<d._length&&(d["_"+l+"axes"]||{})[m]||(d[l+"axis"]||l)===m&&(r(d,l)||(d[l]||[]).length||d[l+"0"])){var g=d;break b}}g=void 0}if(g)if("histogram"===g.type&&l==={v:"y",h:"x"}[g.orientation||"v"])a.type="linear";else if(d=
l+"calendar",m=g[d],c={noMultiCategory:!n(g,"cartesian")||n(g,"noMultiCategory")},"box"===g.type&&g._hasPreCompStats&&l==={h:"x",v:"y"}[g.orientation||"v"]&&(c.noMultiCategory=!0),r(g,l)){var h={v:"x",h:"y"}[g.orientation||"v"],q=[];for(g=0;g<e.length;g++){var t=e[g];n(t,"box-violin")&&(t[l+"axis"]||l)===f&&(void 0!==t[h]?q.push(t[h][0]):void 0!==t.name?q.push(t.name):q.push("text"),t[d]!==m&&(m=void 0))}a.type=p(q,m,c)}else"splom"===g.type?(e=g.dimensions[g._axesDim[f]],e.visible&&(a.type=p(e.values,
m,c))):a.type=p(g[l]||[g[l+"0"]],m,c)}"-"===a.type?a.type="linear":k.type=a.type}}},{"../../registry":880,"./axis_autotype":798}],823:[function(b,D,G){function r(f,l,m){var c=!1;if("data"===l.type)f=f._fullData[null!==l.traces?l.traces[0]:0];else if("layout"===l.type)f=f._fullLayout;else return!1;f=e.nestedProperty(f,l.prop).get();m=m[l.type]=m[l.type]||{};m.hasOwnProperty(l.prop)&&m[l.prop]!==f&&(c=!0);m[l.prop]=f;return{changed:c,value:f}}function n(f,l){var m=[];f=l[0];var c={};if("string"===typeof f)c[f]=
l[1];else if(e.isPlainObject(f))c=f;else return m;k(c,function(d,g,h){m.push({type:"layout",prop:d,value:h})},"",0);return m}function p(f,l){var m=[];var c=l[0];var d=l[1];var g=l[2];l={};if("string"===typeof c)l[c]=d;else if(e.isPlainObject(c))l=c,void 0===g&&(g=d);else return m;void 0===g&&(g=null);k(l,function(h,q,t){if(Array.isArray(t)){t=t.slice();var v=Math.min(t.length,f.data.length);g&&(v=Math.min(v,g.length));q=[];for(var w=0;w<v;w++)q[w]=g?g[w]:w}else q=g?g.slice():null;if(null===q)Array.isArray(t)&&
(t=t[0]);else if(Array.isArray(q)){if(!Array.isArray(t))for(v=t,t=[],w=0;w<q.length;w++)t[w]=v;t.length=Math.min(q.length,t.length)}m.push({type:"data",prop:h,traces:q,value:t})},"",0);return m}function k(f,l,m,c){Object.keys(f).forEach(function(d){var g=f[d];if("_"!==d[0]){var h=m+(0<c?".":"")+d;e.isPlainObject(g)?k(g,l,h,c+1):l(h,d,g)}})}var a=b("../registry"),e=b("../lib");G.manageCommandObserver=function(f,l,m,c){var d={},g=!0;l&&l._commandObserver&&(d=l._commandObserver);d.cache||(d.cache={});
d.lookupTable={};var h=G.hasSimpleAPICommandBindings(f,m,d.lookupTable);if(l&&l._commandObserver){if(h)return d;if(l._commandObserver.remove)return l._commandObserver.remove(),l._commandObserver=null,d}if(h){r(f,h,d.cache);d.check=function(){if(g){var t=r(f,h,d.cache);t.changed&&c&&void 0!==d.lookupTable[t.value]&&(d.disable(),Promise.resolve(c({value:t.value,type:h.type,prop:h.prop,traces:h.traces,index:d.lookupTable[t.value]})).then(d.enable,d.enable));return t.changed}};var q="plotly_relayout plotly_redraw plotly_restyle plotly_update plotly_animatingframe plotly_afterplot".split(" ");
for(m=0;m<q.length;m++)f._internalOn(q[m],d.check);d.remove=function(){for(var t=0;t<q.length;t++)f._removeInternalListener(q[t],d.check)}}else e.log("Unable to automatically bind plot updates to API command"),d.lookupTable={},d.remove=function(){};d.disable=function(){g=!1};d.enable=function(){g=!0};l&&(l._commandObserver=d);return d};G.hasSimpleAPICommandBindings=function(f,l,m){var c,d=l.length;for(c=0;c<d;c++){var g=l[c];var h=g.method;g=g.args;Array.isArray(g)||(g=[]);if(!h)return!1;g=G.computeAPICommandBindings(f,
h,g);if(1!==g.length)return!1;if(t){h=g[0];if(h.type!==t.type||h.prop!==t.prop)return!1;if(Array.isArray(t.traces))if(Array.isArray(h.traces)){h.traces.sort();for(var q=0;q<t.traces.length;q++)if(t.traces[q]!==h.traces[q])return!1}else return!1;else if(h.prop!==t.prop)return!1}else{var t=g[0];Array.isArray(t.traces)&&t.traces.sort()}h=g[0];h=h.value;if(Array.isArray(h))if(1===h.length)h=h[0];else return!1;m&&(m[h]=c)}return t};G.executeAPICommand=function(f,l,m){if("skip"===l)return Promise.resolve();
var c=a.apiMethodRegistry[l];f=[f];Array.isArray(m)||(m=[]);for(var d=0;d<m.length;d++)f.push(m[d]);return c.apply(null,f).catch(function(g){e.warn("API call to Plotly."+l+" rejected.",g);return Promise.reject(g)})};G.computeAPICommandBindings=function(f,l,m){Array.isArray(m)||(m=[]);switch(l){case "restyle":f=p(f,m);break;case "relayout":f=n(f,m);break;case "update":f=p(f,[m[0],m[2]]).concat(n(f,[m[1]]));break;case "animate":f=m;f=Array.isArray(f[0])&&1===f[0].length&&-1!==["string","number"].indexOf(typeof f[0][0])?
[{type:"layout",prop:"_currentFrame",value:f[0][0].toString()}]:[];break;default:f=[]}return f}},{"../lib":749,"../registry":880}],824:[function(b,D,G){var r=b("../lib/extend").extendFlat;G.attributes=function(n,p){n=n||{};p={valType:"info_array",editType:n.editType,items:[{valType:"number",min:0,max:1,editType:n.editType},{valType:"number",min:0,max:1,editType:n.editType}],dflt:[0,1]};p={x:r({},p,{}),y:r({},p,{}),editType:n.editType};n.noGridCell||(p.row={valType:"integer",min:0,dflt:0,editType:n.editType},
p.column={valType:"integer",min:0,dflt:0,editType:n.editType});return p};G.defaults=function(n,p,k,a){var e=a&&a.x||[0,1];a=a&&a.y||[0,1];if(p=p.grid){var f=k("domain.column");void 0!==f&&(f<p.columns?e=p._domains.x[f]:delete n.domain.column);f=k("domain.row");void 0!==f&&(f<p.rows?a=p._domains.y[f]:delete n.domain.row)}p=k("domain.x",e);k=k("domain.y",a);p[0]<p[1]||(n.domain.x=e.slice());k[0]<k[1]||(n.domain.y=a.slice())}},{"../lib/extend":739}],825:[function(b,D,G){D.exports=function(r){var n=r.editType,
p=r.colorEditType;void 0===p&&(p=n);n={family:{valType:"string",noBlank:!0,strict:!0,editType:n},size:{valType:"number",min:1,editType:n},color:{valType:"color",editType:p},editType:n};r.arrayOk&&(n.family.arrayOk=!0,n.size.arrayOk=!0,n.color.arrayOk=!0);return n}},{}],826:[function(b,D,G){D.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],827:[function(b,
D,G){G.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator",
"albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"};G.axesNames=["lonaxis","lataxis"];G.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360};G.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180};G.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,
-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,
-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}};G.clipPad=.001;G.precision=.1;G.landColor="#F0DC82";G.waterColor="#3399FF";G.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"};G.sphereSVG={type:"Sphere"};G.fillLayers={ocean:1,land:1,lakes:1};G.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1};G.layers="bg ocean land lakes subunits countries coastlines rivers lataxis lonaxis frame backplot frontplot".split(" ");G.layersForChoropleth=
"bg ocean land subunits countries coastlines lataxis lonaxis frame backplot rivers lakes frontplot".split(" ");G.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],828:[function(b,D,G){function r(u){this.id=u.id;this.graphDiv=u.graphDiv;this.container=u.container;this.topojsonURL=u.topojsonURL;this.isStatic=u.staticPlot;this.midPt=this.bounds=this.fitScale=this.viewInitial=this.scope=this.projection=
this.topojson=this.topojsonName=null;this.hasChoropleth=!1;this.traceHash={};this.layers={};this.basePaths={};this.dataPaths={};this.dataPoints={};this.bgRect=this.clipRect=this.clipDef=null;this.makeFramework()}function n(u){var F=u.projection.type,H=a.geo[z.projNames[F]](),J=u._isClipped?z.lonaxisSpan[F]/2:null;u=["center","rotate","parallels","clipExtent"];F=function(E){return E?H:[]};for(var I=0;I<u.length;I++){var M=u[I];"function"!==typeof H[M]&&(H[M]=F)}H.isLonLatOverEdges=function(E){if(null===
H(E))return!0;if(J){var L=H.rotate();return a.geo.distance(E,[-L[0],-L[1]])>J*Math.PI/180}return!1};H.getPath=function(){return a.geo.path().projection(H)};H.getBounds=function(E){return H.getPath().bounds(E)};H.fitExtent=function(E,L){var P=E[1][0]-E[0][0],N=E[1][1]-E[0][1],Q=H.clipExtent&&H.clipExtent();H.scale(150).translate([0,0]);Q&&H.clipExtent(null);var O=H.getBounds(L);L=Math.min(P/(O[1][0]-O[0][0]),N/(O[1][1]-O[0][1]));P=+E[0][0]+(P-L*(O[1][0]+O[0][0]))/2;E=+E[0][1]+(N-L*(O[1][1]+O[0][1]))/
2;Q&&H.clipExtent(Q);return H.scale(150*L).translate([P,E])};H.precision(z.precision);J&&H.clipAngle(J-z.clipPad);return H}function p(u,F,H){var J=F[u],I=z.scopeDefaults[F.scope];if("lonaxis"===u){var M=I.lonaxisRange;var E=I.lataxisRange;var L=function(N,Q){return[N,Q]}}else"lataxis"===u&&(M=I.lataxisRange,E=I.lonaxisRange,L=function(N,Q){return[Q,N]});J={type:"linear",range:[M[0],M[1]-1E-6],tick0:J.tick0,dtick:J.dtick};g.setConvert(J,H);H=g.calcTicks(J);F.isScoped||"lonaxis"!==u||H.pop();u=H.length;
F=Array(u);for(J=0;J<u;J++){I=H[J].x;M=F[J]=[];for(var P=E[0];P<E[1]+2.5;P+=2.5)M.push(L(I,P))}return{type:"MultiLineString",coordinates:F}}function k(u,F){var H=z.clipPad,J=u[0]+H;u=u[1]-H;var I=F[0]+H;F=F[1]-H;0<J&&0>u&&(u+=360);H=(u-J)/4;return{type:"Polygon",coordinates:[[[J,I],[J,F],[J+H,F],[J+2*H,F],[J+3*H,F],[u,F],[u,I],[u-H,I],[u-2*H,I],[u-3*H,I],[J,I]]]}}var a=b("d3"),e=b("../../registry"),f=b("../../lib"),l=b("../../components/color"),m=b("../../components/drawing"),c=b("../../components/fx"),
d=b("../plots"),g=b("../cartesian/axes"),h=b("../cartesian/autorange").getAutoRange,q=b("../../components/dragelement"),t=b("../cartesian/select").prepSelect,v=b("../cartesian/select").clearSelect,w=b("../cartesian/select").selectOnClick,A=b("./zoom"),z=b("./constants"),y=b("../../lib/geo_location_utils"),B=b("../../lib/topojson_utils"),C=b("topojson-client").feature;b("./projections")(a);b=r.prototype;D.exports=function(u){return new r(u)};b.plot=function(u,F,H){var J=this,I=F[this.id],M=[],E=!1,
L;for(L in z.layerNameToAdjective)if("frame"!==L&&I["show"+L]){E=!0;break}for(L=0;L<u.length;L++)if(u[0][0].trace.locationmode){E=!0;break}E&&(I=B.getTopojsonName(I),null===J.topojson||I!==J.topojsonName)&&(J.topojsonName=I,void 0===PlotlyGeoAssets.topojson[J.topojsonName]&&M.push(J.fetchTopojson()));M=M.concat(y.fetchTraceGeoData(u));H.push(new Promise(function(P,N){Promise.all(M).then(function(){J.topojson=PlotlyGeoAssets.topojson[J.topojsonName];J.update(u,F);P()}).catch(N)}))};b.fetchTopojson=
function(){var u=this,F=B.getTopojsonPath(u.topojsonURL,u.topojsonName);return new Promise(function(H,J){a.json(F,function(I,M){if(I)return 404===I.status?J(Error(["plotly.js could not find topojson file at",F,". Make sure the *topojsonURL* plot config option is set properly."].join(" "))):J(Error(["unexpected error while fetching topojson file at",F].join(" ")));PlotlyGeoAssets.topojson[u.topojsonName]=M;H()})})};b.update=function(u,F){var H=F[this.id];this.hasChoropleth=!1;for(var J=0;J<u.length;J++){var I=
u[J],M=I[0].trace;"choropleth"===M.type&&(this.hasChoropleth=!0);!0===M.visible&&0<M._length&&M._module.calcGeoJSON(I,F)}this.updateProjection(u,F)||(this.viewInitial&&this.scope===H.scope||this.saveViewInitial(H),this.scope=H.scope,this.updateBaseLayers(F,H),this.updateDims(F,H),this.updateFx(F,H),d.generalUpdatePerTraceModule(this.graphDiv,this,u,H),u=this.layers.frontplot.select(".scatterlayer"),this.dataPoints.point=u.selectAll(".point"),this.dataPoints.text=u.selectAll("text"),this.dataPaths.line=
u.selectAll(".js-line"),u=this.layers.backplot.select(".choroplethlayer"),this.dataPaths.choropleth=u.selectAll("path"),this.render())};b.updateProjection=function(u,F){u=this.graphDiv;var H=F[this.id],J=F._size,I=H.domain,M=H.projection,E=H.lonaxis,L=H.lataxis,P=E._ax,N=L._ax;F=this.projection=n(H);I=[[J.l+J.w*I.x[0],J.t+J.h*(1-I.y[1])],[J.l+J.w*I.x[1],J.t+J.h*(1-I.y[0])]];J=H.center||{};var Q=M.rotation||{},O=E.range||[],T=L.range||[];H.fitbounds&&(P._length=I[1][0]-I[0][0],N._length=I[1][1]-I[0][1],
P.range=h(u,P),N.range=h(u,N),L=(P.range[0]+P.range[1])/2,E=(N.range[0]+N.range[1])/2,H._isScoped?J={lon:L,lat:E}:H._isClipped?(J={lon:L,lat:E},Q={lon:L,lat:E,roll:Q.roll},T=M.type,O=z.lonaxisSpan[T]/2||180,T=z.lataxisSpan[T]/2||90,O=[L-O,L+O],T=[E-T,E+T]):(J={lon:L,lat:E},Q={lon:L,lat:Q.lat,roll:Q.roll}));F.center([J.lon-Q.lon,J.lat-Q.lat]).rotate([-Q.lon,-Q.lat,Q.roll]).parallels(M.parallels);Q=k(O,T);F.fitExtent(I,Q);I=this.bounds=F.getBounds(Q);L=this.fitScale=F.scale();Q=F.translate();if(!(isFinite(I[0][0])&&
isFinite(I[0][1])&&isFinite(I[1][0])&&isFinite(I[1][1]))||isNaN(Q[0])||isNaN(Q[0])){F=["fitbounds","projection.rotation","center","lonaxis.range","lataxis.range"];H={};for(J=0;J<F.length;J++)H[this.id+"."+F[J]]=null;this.viewInitial=null;f.warn("Invalid geo settings, relayout'ing to default view.");u._promises.push(e.call("relayout",u,H));return"Invalid geo settings, relayout'ing to default view."}H.fitbounds?(u=F.getBounds(k(P.range,N.range)),u=Math.min((I[1][0]-I[0][0])/(u[1][0]-u[0][0]),(I[1][1]-
I[0][1])/(u[1][1]-u[0][1])),isFinite(u)?F.scale(u*L):f.warn("Something went wrong during"+this.id+"fitbounds computations.")):F.scale(M.scale*L);u=this.midPt=[(I[0][0]+I[1][0])/2,(I[0][1]+I[1][1])/2];F.translate([Q[0]+(u[0]-Q[0]),Q[1]+(u[1]-Q[1])]).clipExtent(I);H._isAlbersUsa&&(u=F([J.lon,J.lat]),H=F.translate(),F.translate([H[0]-(u[0]-H[0]),H[1]-(u[1]-H[1])]))};b.updateBaseLayers=function(u,F){function H(P){return"lonaxis"===P||"lataxis"===P}var J=this,I=J.topojson,M=J.layers,E=J.basePaths,L=(this.hasChoropleth?
z.layersForChoropleth:z.layers).filter(function(P){return z.lineLayers[P]||z.fillLayers[P]?F["show"+P]:H(P)?F[P].showgrid:!0});L=J.framework.selectAll(".layer").data(L,String);L.exit().each(function(P){delete M[P];delete E[P];a.select(this).remove()});L.enter().append("g").attr("class",function(P){return"layer "+P}).each(function(P){var N=M[P]=a.select(this);"bg"===P?J.bgRect=N.append("rect").style("pointer-events","all"):H(P)?E[P]=N.append("path").style("fill","none"):"backplot"===P?N.append("g").classed("choroplethlayer",
!0):"frontplot"===P?N.append("g").classed("scatterlayer",!0):z.lineLayers[P]?E[P]=N.append("path").style("fill","none").style("stroke-miterlimit",2):z.fillLayers[P]&&(E[P]=N.append("path").style("stroke","none"))});L.order();L.each(function(P){var N=E[P],Q=z.layerNameToAdjective[P];"frame"===P?N.datum(z.sphereSVG):z.lineLayers[P]||z.fillLayers[P]?N.datum(C(I,I.objects[P])):H(P)&&N.datum(p(P,F,u)).call(l.stroke,F[P].gridcolor).call(m.dashLine,"",F[P].gridwidth);z.lineLayers[P]?N.call(l.stroke,F[Q+
"color"]).call(m.dashLine,"",F[Q+"width"]):z.fillLayers[P]&&N.call(l.fill,F[Q+"color"])})};b.updateDims=function(u,F){var H=this.bounds,J=(F.framewidth||0)/2;u=H[0][0]-J;var I=H[0][1]-J,M=H[1][0]-u+J;H=H[1][1]-I+J;m.setRect(this.clipRect,u,I,M,H);this.bgRect.call(m.setRect,u,I,M,H).call(l.fill,F.bgcolor);this.xaxis._offset=u;this.xaxis._length=M;this.yaxis._offset=I;this.yaxis._length=H};b.updateFx=function(u,F){function H(){var O=I.viewInitial,T={},V;for(V in O)T[I.id+"."+V]=O[V];e.call("_guiRelayout",
M,T);M.emit("plotly_doubleclick",null)}function J(O){return I.projection.invert([O[0]+I.xaxis._offset,O[1]+I.yaxis._offset])}var I=this,M=I.graphDiv,E=I.bgRect,L=u.dragmode,P=u.clickmode;if(!I.isStatic){var N;"select"===L?N=function(O,T){(O.range={})[I.id]=[J([T.xmin,T.ymin]),J([T.xmax,T.ymax])]}:"lasso"===L&&(N=function(O,T,V){(O.lassoPoints={})[I.id]=V.filtered.map(J)});var Q={element:I.bgRect.node(),gd:M,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:N},xaxes:[I.xaxis],yaxes:[I.yaxis],
subplot:I.id,clickFn:function(O){2===O&&v(M)}};if("pan"===L){if(E.node().onmousedown=null,E.call(A(I,F)),E.on("dblclick.zoom",H),!M._context._scrollZoom.geo)E.on("wheel.zoom",null)}else if("select"===L||"lasso"===L)E.on(".zoom",null),Q.prepFn=function(O,T,V){t(O,T,V,Q,L)},q.init(Q);E.on("mousemove",function(){var O=I.projection.invert(a.mouse(this));if(!O||isNaN(O[0])||isNaN(O[1]))return q.unhover(M,a.event);I.xaxis.p2c=function(){return O[0]};I.yaxis.p2c=function(){return O[1]};c.hover(M,a.event,
I.id)});E.on("mouseout",function(){M._dragging||q.unhover(M,a.event)});E.on("click",function(){"select"!==L&&"lasso"!==L&&(-1<P.indexOf("select")&&w(a.event,M,[I.xaxis],[I.yaxis],I.id,Q),-1<P.indexOf("event")&&c.click(M,a.event))})}};b.makeFramework=function(){var u=this,F=u.graphDiv,H=F._fullLayout,J="clip"+H._uid+u.id;u.clipDef=H._clips.append("clipPath").attr("id",J);u.clipRect=u.clipDef.append("rect");u.framework=a.select(u.container).append("g").attr("class","geo "+u.id).call(m.setClipUrl,J,
F);u.project=function(I){return(I=u.projection(I))?[I[0]-u.xaxis._offset,I[1]-u.yaxis._offset]:[null,null]};u.xaxis={_id:"x",c2p:function(I){return u.project(I)[0]}};u.yaxis={_id:"y",c2p:function(I){return u.project(I)[1]}};u.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};g.setConvert(u.mockAxis,H)};b.saveViewInitial=function(u){var F=u.center||{},H=u.projection,J=H.rotation||{};this.viewInitial={fitbounds:u.fitbounds,"projection.scale":H.scale};f.extendFlat(this.viewInitial,u._isScoped?
{"center.lon":F.lon,"center.lat":F.lat}:u._isClipped?{"projection.rotation.lon":J.lon,"projection.rotation.lat":J.lat}:{"center.lon":F.lon,"center.lat":F.lat,"projection.rotation.lon":J.lon})};b.render=function(){function u(M){return(M=H(M.lonlat))?"translate("+M[0]+","+M[1]+")":null}function F(M){return H.isLonLatOverEdges(M.lonlat)?"none":null}var H=this.projection,J=H.getPath(),I;for(I in this.basePaths)this.basePaths[I].attr("d",J);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(M){return J(M.geojson)});
for(I in this.dataPoints)this.dataPoints[I].attr("display",F).attr("transform",u)}},{"../../components/color":615,"../../components/dragelement":634,"../../components/drawing":637,"../../components/fx":655,"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/topojson_utils":776,"../../registry":880,"../cartesian/autorange":796,"../cartesian/axes":797,"../cartesian/select":816,"../plots":860,"./constants":827,"./projections":832,"./zoom":833,d3:169,"topojson-client":551}],829:[function(b,
D,G){var r=b("../../plots/get_data").getSubplotCalcData;G=b("../../lib").counterRegex;var n=b("./geo");G=G("geo");D.exports={attr:"geo",name:"geo",idRoot:"geo",idRegex:G,attrRegex:G,attributes:{geo:{valType:"subplotid",dflt:"geo",editType:"calc"}},layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(p){for(var k=p._fullLayout,a=p.calcdata,e=k._subplots.geo,f=0;f<e.length;f++){var l=e[f],m=r(a,"geo",l),c=k[l]._subplot;c||(c=n({id:l,graphDiv:p,container:k._geolayer.node(),
topojsonURL:p._context.topojsonURL,staticPlot:p._context.staticPlot}),k[l]._subplot=c);c.plot(m,k,p._promises)}},updateFx:function(p){p=p._fullLayout;for(var k=p._subplots.geo,a=0;a<k.length;a++){var e=p[k[a]];e._subplot.updateFx(p,e)}},clean:function(p,k,a,e){p=e._subplots.geo||[];for(a=0;a<p.length;a++){var f=p[a],l=e[f]._subplot;!k[f]&&l&&(l.framework.remove(),l.clipDef.remove())}}}},{"../../lib":749,"../../plots/get_data":834,"./geo":828,"./layout_attributes":830,"./layout_defaults":831}],830:[function(b,
D,G){G=b("../../components/color/attributes");var r=b("../domain").attributes,n=b("./constants");b=b("../../plot_api/edit_types").overrideAll;var p={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:G.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(D.exports=b({domain:r({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations",
"geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(n.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(n.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},
visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:G.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:n.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:n.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:n.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:n.waterColor},
riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:G.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:G.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:G.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:G.background},lonaxis:p,lataxis:p},"plot","from-root")).uirevision=
{valType:"any",editType:"none"}},{"../../components/color/attributes":614,"../../plot_api/edit_types":780,"../domain":824,"./constants":827}],831:[function(b,D,G){function r(l,m,c,d){var g=k(d.fullData,"geo",d.id).map(function(J){return J._expandedIndex});d=c("resolution");var h=c("scope"),q=a.scopeDefaults[h],t=c("projection.type",q.projType),v=m._isAlbersUsa="albers usa"===t;v&&(h=m.scope="usa");var w=m._isScoped="world"!==h,A=m._isConic=-1!==t.indexOf("conic"),z=m._isClipped=!!a.lonaxisSpan[t];
!1===l.visible&&(l=n.extendDeep({},m._template),l.showcoastlines=!1,l.showcountries=!1,l.showframe=!1,l.showlakes=!1,l.showland=!1,l.showocean=!1,l.showrivers=!1,l.showsubunits=!1,l.lonaxis&&(l.lonaxis.showgrid=!1),l.lataxis&&(l.lataxis.showgrid=!1),m._template=l);l=c("visible");for(var y,B=0;B<f.length;B++){var C=f[B];y=[30,10][B];if(w)var u=q[C+"Range"];else{u=a[C+"Span"];u=(u[t]||u["*"])/2;var F=c("projection.rotation."+C.substr(0,3),q.projRotate[B]);u=[F-u,F+u]}u=c(C+".range",u);c(C+".tick0");
c(C+".dtick",y);if(y=c(C+".showgrid",l?void 0:!1))c(C+".gridcolor"),c(C+".gridwidth");m[C]._ax={type:"linear",_id:C.slice(0,3),_traceIndices:g,setScale:n.identity,c2l:n.identity,r2l:n.identity,autorange:!0,range:u.slice(),_m:1,_input:{}}}B=m.lonaxis.range;g=m.lataxis.range;t=B[0];B=B[1];0<t&&0>B&&(B+=360);t=(t+B)/2;if(!v){B=w?q.projRotate:[t,0,0];var H=c("projection.rotation.lon",B[0]);c("projection.rotation.lat",B[1]);c("projection.rotation.roll",B[2]);if(y=c("showcoastlines",!w&&l))c("coastlinecolor"),
c("coastlinewidth");(y=c("showocean",l?void 0:!1))&&c("oceancolor")}v?(H=-96.6,v=38.7):(H=w?t:H,v=(g[0]+g[1])/2);c("center.lon",H);c("center.lat",v);A&&c("projection.parallels",q.projParallels||[0,60]);c("projection.scale");(y=c("showland",l?void 0:!1))&&c("landcolor");(y=c("showlakes",l?void 0:!1))&&c("lakecolor");if(y=c("showrivers",l?void 0:!1))c("rivercolor"),c("riverwidth");if(y=c("showcountries",w&&"usa"!==h&&l))c("countrycolor"),c("countrywidth");if("usa"===h||"north america"===h&&50===d)c("showsubunits",
l),c("subunitcolor"),c("subunitwidth");!w&&(y=c("showframe",l))&&(c("framecolor"),c("framewidth"));c("bgcolor");c("fitbounds")&&(delete m.projection.scale,w?(delete m.center.lon,delete m.center.lat):z?(delete m.center.lon,delete m.center.lat,delete m.projection.rotation.lon,delete m.projection.rotation.lat,delete m.lonaxis.range,delete m.lataxis.range):(delete m.center.lon,delete m.center.lat,delete m.projection.rotation.lon))}var n=b("../../lib"),p=b("../subplot_defaults"),k=b("../get_data").getSubplotData,
a=b("./constants"),e=b("./layout_attributes"),f=a.axesNames;D.exports=function(l,m,c){p(l,m,c,{type:"geo",attributes:e,handleDefaults:r,fullData:c,partition:"y"})}},{"../../lib":749,"../get_data":834,"../subplot_defaults":874,"./constants":827,"./layout_attributes":830}],832:[function(b,D,G){D.exports=function(r){function n(O,T){return{type:"Feature",id:O.id,properties:O.properties,geometry:p(O.geometry,T)}}function p(O,T){if(!O)return null;if("GeometryCollection"===O.type)return{type:"GeometryCollection",
geometries:object.geometries.map(function(Z){return p(Z,T)})};if(!F.hasOwnProperty(O.type))return null;var V=F[O.type];r.geo.stream(O,T(V));return V.result()}function k(){}function a(O){return 1<O?J:-1>O?-J:Math.asin(O)}function e(O){return 1<O?0:-1>O?H:Math.acos(O)}function f(O,T){var V=(2+J)*Math.sin(T);T/=2;for(var Z=0,aa=Infinity;10>Z&&1E-6<Math.abs(aa);Z++)aa=Math.cos(T),T-=aa=(T+Math.sin(T)*(aa+2)-V)/(2*aa*(1+aa));return[2/Math.sqrt(H*(4+H))*O*(1+Math.cos(T)),2*Math.sqrt(H/(4+H))*Math.sin(T)]}
function l(O,T){function V(Z,aa){Z=P(Z/T,aa);Z[0]*=O;return Z}2>arguments.length&&(T=O);if(1===T)return P;if(Infinity===T)return m;V.invert=function(Z,aa){Z=P.invert(Z/O,aa);Z[0]*=T;return Z};return V}function m(O,T){return[O*Math.cos(T)/Math.cos(T/=2),2*Math.sin(T)]}function c(O,T){return[3*O/(2*H)*Math.sqrt(H*H/3-T*T),T]}function d(O,T){return[O,1.25*Math.log(Math.tan(H/4+.4*T))]}function g(O){return function(T){var V=O*Math.sin(T),Z=30,aa;do T-=aa=(T+Math.sin(T)-V)/(1+Math.cos(T));while(1E-6<Math.abs(aa)&&
0<--Z);return T/2}}function h(O,T){var V=T*T,Z=V*V;return[O*(.8707-.131979*V+Z*(-.013791+Z*(.003971*V-.001529*Z))),T*(1.007226+V*(.015085+Z*(-.044475+.028874*V-.005916*Z)))]}function q(O,T){var V=Math.min(18,36*Math.abs(T)/H),Z=Math.floor(V);V-=Z;var aa=(ba=Q[Z])[0],Y=ba[1],ea=(ba=Q[++Z])[0],ca=ba[1];Z=(ba=Q[Math.min(19,++Z)])[0];ba=ba[1];var ba;return[O*(ea+V*(Z-aa)/2+V*V*(Z-2*ea+aa)/2),(0<T?J:-J)*(ca+V*(ba-Y)/2+V*V*(ba-2*ca+Y)/2)]}function t(O,T){return[O*Math.cos(T),T]}function v(O,T){var V=Math.cos(T);
var Z=(Z=e(V*Math.cos(O/=2)))?Z/Math.sin(Z):1;return[2*V*Math.sin(O)*Z,Math.sin(T)*Z]}function w(O,T){var V=v(O,T);return[(V[0]+O/J)/2,(V[1]+T)/2]}r.geo.project=function(O,T){T=T.stream;if(!T)throw Error("not yet supported");return(O&&A.hasOwnProperty(O.type)?A[O.type]:p)(O,T)};var A={Feature:n,FeatureCollection:function(O,T){return{type:"FeatureCollection",features:O.features.map(function(V){return n(V,T)})}}},z=[],y=[],B={point:function(O,T){z.push([O,T])},result:function(){var O=z.length?2>z.length?
{type:"Point",coordinates:z[0]}:{type:"MultiPoint",coordinates:z}:null;z=[];return O}},C={lineStart:k,point:function(O,T){z.push([O,T])},lineEnd:function(){z.length&&(y.push(z),z=[])},result:function(){var O=y.length?2>y.length?{type:"LineString",coordinates:y[0]}:{type:"MultiLineString",coordinates:y}:null;y=[];return O}},u={polygonStart:k,lineStart:k,point:function(O,T){z.push([O,T])},lineEnd:function(){var O=z.length;if(O){do z.push(z[0].slice());while(4>++O);y.push(z);z=[]}},polygonEnd:k,result:function(){if(!y.length)return null;
var O=[],T=[];y.forEach(function(V){if(4>(aa=V.length))var Z=!1;else{Z=0;for(var aa,Y=V[aa-1][1]*V[0][0]-V[aa-1][0]*V[0][1];++Z<aa;)Y+=V[Z-1][1]*V[Z][0]-V[Z-1][0]*V[Z][1];Z=0>=Y}Z?O.push([V]):T.push(V)});T.forEach(function(V){var Z=V[0];O.some(function(aa){for(var Y=aa[0],ea=Z[0],ca=Z[1],ba=!1,ka=0,qa=Y.length,pa=qa-1;ka<qa;pa=ka++){var oa=Y[ka],ja=oa[0];oa=oa[1];var ra=Y[pa];pa=ra[0];ra=ra[1];oa>ca^ra>ca&&ea<(pa-ja)*(ca-oa)/(ra-oa)+ja&&(ba=!ba)}if(ba)return aa.push(V),!0})||O.push([V])});y=[];return O.length?
1<O.length?{type:"MultiPolygon",coordinates:O}:{type:"Polygon",coordinates:O[0]}:null}},F={Point:B,MultiPoint:B,LineString:C,MultiLineString:C,Polygon:u,MultiPolygon:u,Sphere:u},H=Math.PI,J=H/2,I=H/180,M=180/H,E=r.geo.projection,L=r.geo.projectionMutator;r.geo.interrupt=function(O){function T(ba,ka){for(var qa=0>ka?-1:1,pa=aa[+(0>ka)],oa=0,ja=pa.length-1;oa<ja&&ba>pa[oa][2][0];++oa);ba=O(ba-pa[oa][1][0],ka);ba[0]+=O(pa[oa][1][0],qa*ka>qa*pa[oa][0][1]?pa[oa][0][1]:ka)[0];return ba}function V(){Y=aa.map(function(ba){return ba.map(function(ka){var qa=
O(ka[0][0],ka[0][1])[0],pa=O(ka[2][0],ka[2][1])[0],oa=O(ka[1][0],ka[0][1])[1];ka=O(ka[1][0],ka[1][1])[1];if(oa>ka){var ja=oa;oa=ka;ka=ja}return[[qa,oa],[pa,ka]]})})}function Z(ba,ka){for(var qa=-1,pa=ba.length,oa=ba[0],ja,ra,ha,la=[];++qa<pa;){ja=ba[qa];ra=(ja[0]-oa[0])/ka;ha=(ja[1]-oa[1])/ka;for(var ua=0;ua<ka;++ua)la.push([oa[0]+ua*ra,oa[1]+ua*ha]);oa=ja}la.push(ja);return la}var aa=[[[[-H,0],[0,J],[H,0]]],[[[-H,0],[0,-J],[H,0]]]],Y;O.invert&&(T.invert=function(ba,ka){for(var qa=Y[+(0>ka)],pa=aa[+(0>
ka)],oa=0,ja=qa.length;oa<ja;++oa){var ra=qa[oa];if(ra[0][0]<=ba&&ba<ra[1][0]&&ra[0][1]<=ka&&ka<ra[1][1])return qa=O.invert(ba-O(pa[oa][1][0],0)[0],ka),qa[0]+=pa[oa][1][0],pa=T(qa[0],qa[1]),ba=[ba,ka],1E-6>Math.abs(pa[0]-ba[0])&&1E-6>Math.abs(pa[1]-ba[1])?qa:null}});var ea=r.geo.projection(T),ca=ea.stream;ea.stream=function(ba){var ka=ea.rotate(),qa=ca(ba),pa=(ea.rotate([0,0]),ca(ba));ea.rotate(ka);qa.sphere=function(){var oa=r.geo,ja=oa.stream;var ra=[];for(var ha=0,la=aa[0].length;ha<la;++ha){var ua=
aa[0][ha],na=180*ua[0][0]/H,wa=180*ua[0][1]/H,Ca=180*ua[1][1]/H,Fa=180*ua[2][0]/H;ua=180*ua[2][1]/H;ra.push(Z([[na+1E-6,wa+1E-6],[na+1E-6,Ca-1E-6],[Fa-1E-6,Ca-1E-6],[Fa-1E-6,ua+1E-6]],30))}for(ha=aa[1].length-1;0<=ha;--ha)ua=aa[1][ha],na=180*ua[0][0]/H,wa=180*ua[0][1]/H,Ca=180*ua[1][1]/H,Fa=180*ua[2][0]/H,ua=180*ua[2][1]/H,ra.push(Z([[Fa-1E-6,ua-1E-6],[Fa-1E-6,Ca+1E-6],[na+1E-6,Ca+1E-6],[na+1E-6,wa-1E-6]],30));ra={type:"Polygon",coordinates:[r.merge(ra)]};ja.call(oa,ra,pa)};return qa};ea.lobes=function(ba){if(!arguments.length)return aa.map(function(ka){return ka.map(function(qa){return[[180*
qa[0][0]/H,180*qa[0][1]/H],[180*qa[1][0]/H,180*qa[1][1]/H],[180*qa[2][0]/H,180*qa[2][1]/H]]})});aa=ba.map(function(ka){return ka.map(function(qa){return[[qa[0][0]*H/180,qa[0][1]*H/180],[qa[1][0]*H/180,qa[1][1]*H/180],[qa[2][0]*H/180,qa[2][1]*H/180]]})});V();return ea};return ea};f.invert=function(O,T){T=.5*T*Math.sqrt((4+H)/H);var V=a(T),Z=Math.cos(V);return[O/(2/Math.sqrt(H*(4+H))*(1+Z)),a((V+T*(Z+2))/(2+J))]};(r.geo.eckert4=function(){return E(f)}).raw=f;var P=r.geo.azimuthalEqualArea.raw;m.invert=
function(O,T){T=2*a(T/2);return[O*Math.cos(T/2)/Math.cos(T),T]};(r.geo.hammer=function(){var O=2,T=L(l),V=T(O);V.coefficient=function(Z){return arguments.length?T(O=+Z):O};return V}).raw=l;c.invert=function(O,T){return[2/3*H*O/Math.sqrt(H*H/3-T*T),T]};(r.geo.kavrayskiy7=function(){return E(c)}).raw=c;d.invert=function(O,T){return[O,2.5*Math.atan(Math.exp(.8*T))-.625*H]};(r.geo.miller=function(){return E(d)}).raw=d;g(H);var N=function(O,T,V){function Z(Y,ea){return[O*Y*Math.cos(ea=aa(ea)),T*Math.sin(ea)]}
var aa=g(V);Z.invert=function(Y,ea){ea=a(ea/T);return[Y/(O*Math.cos(ea)),a((2*ea+Math.sin(2*ea))/V)]};return Z}(Math.SQRT2/J,Math.SQRT2,H);(r.geo.mollweide=function(){return E(N)}).raw=N;h.invert=function(O,T){var V=T,Z=25;do{var aa=V*V;var Y=aa*aa;V-=Y=(V*(1.007226+aa*(.015085+Y*(-.044475+.028874*aa-.005916*Y)))-T)/(1.007226+aa*(.045255+Y*(-.311325+.259866*aa-.005916*11*Y)))}while(1E-6<Math.abs(Y)&&0<--Z);return[O/(.8707+(aa=V*V)*(-.131979+aa*(-.013791+aa*aa*aa*(.003971-.001529*aa)))),V]};(r.geo.naturalEarth=
function(){return E(h)}).raw=h;var Q=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Q.forEach(function(O){O[1]*=1.0144});q.invert=function(O,T){var V=T/J,Z=90*V,aa=Math.min(18,Math.abs(Z/5)),Y=Math.max(0,Math.floor(aa));do{var ea=Q[Y][1],ca=Q[Y+1][1],ba=Q[Math.min(19,Y+2)][1],ka=ba-ea,qa=2*(Math.abs(V)-
ca)/ka;ea=(ba-2*ca+ea)/ka;qa*=1-ea*qa*(1-2*ea*qa);if(0<=qa||1===Y){Z=(0<=T?5:-5)*(qa+aa);V=50;do aa=Math.min(18,Math.abs(Z)/5),Y=Math.floor(aa),qa=aa-Y,ea=Q[Y][1],ca=Q[Y+1][1],ba=Q[Math.min(19,Y+2)][1],Z-=(aa=(0<=T?J:-J)*(ca+qa*(ba-ea)/2+qa*qa*(ba-2*ca+ea)/2)-T)*M;while(1E-12<Math.abs(aa)&&0<--V);break}}while(0<=--Y);T=Q[Y][0];aa=Q[Y+1][0];Y=Q[Math.min(19,Y+2)][0];return[O/(aa+qa*(Y-T)/2+qa*qa*(Y-2*aa+T)/2),Z*I]};(r.geo.robinson=function(){return E(q)}).raw=q;t.invert=function(O,T){return[O/Math.cos(T),
T]};(r.geo.sinusoidal=function(){return E(t)}).raw=t;v.invert=function(O,T){if(!(O*O+4*T*T>H*H+1E-6)){var V=O,Z=T,aa=25;do{var Y=Math.sin(V),ea=Math.sin(V/2),ca=Math.cos(V/2),ba=Math.sin(Z),ka=Math.cos(Z),qa=Math.sin(2*Z),pa=ba*ba,oa=ka*ka,ja=ea*ea,ra=1-oa*ca*ca,ha=ra?e(ka*ca)*Math.sqrt(la=1/ra):la=0,la;ra=2*ha*ka*ea-O;var ua=ha*ba-T,na=la*(oa*ja+ha*ka*ca*pa),wa=la*(.5*Y*qa-2*ha*ba*ea);Y=.25*la*(qa*ea-ha*ba*oa*Y);ka=la*(pa*ca+ha*ja*ka);ca=wa*Y-ka*na;if(!ca)break;wa=(ua*wa-ra*ka)/ca;ra=(ra*Y-ua*na)/
ca;V-=wa;Z-=ra}while((1E-6<Math.abs(wa)||1E-6<Math.abs(ra))&&0<--aa);return[V,Z]}};(r.geo.aitoff=function(){return E(v)}).raw=v;w.invert=function(O,T){var V=O,Z=T,aa=25;do{var Y=Math.cos(Z),ea=Math.sin(Z),ca=Math.sin(2*Z),ba=ea*ea,ka=Y*Y,qa=Math.sin(V),pa=Math.cos(V/2),oa=Math.sin(V/2),ja=oa*oa,ra=1-ka*pa*pa,ha=ra?e(Y*pa)*Math.sqrt(la=1/ra):la=0,la;ra=.5*(2*ha*Y*oa+V/J)-O;var ua=.5*(ha*ea+Z)-T,na=.5*la*(ka*ja+ha*Y*pa*ba)+.5/J,wa=la*(qa*ca/4-ha*ea*oa);ea=.125*la*(ca*oa-ha*ea*ka*qa);ba=.5*la*(ba*pa+
ha*ja*Y)+.5;Y=wa*ea-ba*na;wa=(ua*wa-ra*ba)/Y;ra=(ra*ea-ua*na)/Y;V-=wa;Z-=ra}while((1E-6<Math.abs(wa)||1E-6<Math.abs(ra))&&0<--aa);return[V,Z]};(r.geo.winkel3=function(){return E(w)}).raw=w}},{}],833:[function(b,D,G){function r(z,y){return g.behavior.zoom().translate(y.translate()).scale(y.scale())}function n(z,y,B){function C(P,N){E[u+"."+P]=h.nestedProperty(J,P).get();q.call("_storeDirectGUIEdit",H,I._preGUI,E);var Q=h.nestedProperty(M,P);Q.get()!==N&&(Q.set(N),h.nestedProperty(J,P).set(N),L[u+"."+
P]=N)}var u=z.id,F=z.graphDiv,H=F.layout,J=H[u],I=F._fullLayout,M=I[u],E={},L={};B(C);C("projection.scale",y.scale()/z.fitScale);C("fitbounds",!1);F.emit("plotly_relayout",L)}function p(z,y){function B(u){var F=y.invert(z.midPt);u("center.lon",F[0]);u("center.lat",F[1])}var C=r(z,y);C.on("zoomstart",function(){g.select(this).style(w)}).on("zoom",function(){y.scale(g.event.scale).translate(g.event.translate);z.render();var u=y.invert(z.midPt);z.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":y.scale()/
z.fitScale,"geo.center.lon":u[0],"geo.center.lat":u[1]})}).on("zoomend",function(){g.select(this).style(A);n(z,y,B)});return C}function k(z,y){function B(N){var Q=y.rotate(),O=y.invert(z.midPt);N("projection.rotation.lon",-Q[0]);N("center.lon",O[0]);N("center.lat",O[1])}var C=r(z,y),u,F,H,J,I,M,E,L,P;C.on("zoomstart",function(){g.select(this).style(w);u=g.mouse(this);F=y.rotate();H=y.translate();J=F;I=y.invert(u)}).on("zoom",function(){M=g.mouse(this);var N=u;var Q=y.invert(N);Q?(Q=y(Q),N=2<Math.abs(Q[0]-
N[0])||2<Math.abs(Q[1]-N[1])):N=!0;N?(C.scale(y.scale()),C.translate(y.translate())):(y.scale(g.event.scale),y.translate([H[0],g.event.translate[1]]),I?y.invert(M)&&(L=y.invert(M),E=[J[0]+(L[0]-I[0]),F[1],F[2]],y.rotate(E),J=E):(u=M,I=y.invert(u)),P=!0,z.render(),N=y.rotate(),Q=y.invert(z.midPt),z.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":y.scale()/z.fitScale,"geo.center.lon":Q[0],"geo.center.lat":Q[1],"geo.projection.rotation.lon":-N[0]}))}).on("zoomend",function(){g.select(this).style(A);
P&&n(z,y,B)});return C}function a(z,y){function B(M){H++||M({type:"zoomstart"})}function C(M){var E=y.rotate();M("projection.rotation.lon",-E[0]);M("projection.rotation.lat",-E[1])}y.rotate();y.scale();var u=r(z,y),F=d(u,"zoomstart","zoom","zoomend"),H=0,J=u.on,I;u.on("zoomstart",function(){g.select(this).style(w);var M=g.mouse(this),E=y.rotate(),L=E,P=y.translate(),N=f(E);I=e(y,M);J.call(u,"zoom",function(){var Q=g.mouse(this);y.scale(g.event.scale);if(!I)M=Q,I=e(y,M);else if(e(y,Q)){y.rotate(E).translate(P);
var O=e(y,Q);var T=I;if(T&&O){Q=[T[1]*O[2]-T[2]*O[1],T[2]*O[0]-T[0]*O[2],T[0]*O[1]-T[1]*O[0]];var V=Math.sqrt(c(Q,Q));O=.5*Math.acos(Math.max(-1,Math.min(1,c(T,O))));T=Math.sin(O)/V;var Z=V&&[Math.cos(O),Q[2]*T,-Q[1]*T,Q[0]*T]}else Z=void 0;Q=N[0];V=N[1];O=N[2];T=N[3];var aa=Z[0],Y=Z[1],ea=Z[2];Z=Z[3];Q=[Q*aa-V*Y-O*ea-T*Z,Q*Y+V*aa+O*Z-T*ea,Q*ea-V*Z+O*aa+T*Y,Q*Z+V*ea-O*Y+T*aa];O=[Math.atan2(2*(Q[0]*Q[1]+Q[2]*Q[3]),1-2*(Q[1]*Q[1]+Q[2]*Q[2]))*v,Math.asin(Math.max(-1,Math.min(1,2*(Q[0]*Q[2]-Q[3]*Q[1]))))*
v,Math.atan2(2*(Q[0]*Q[3]+Q[1]*Q[2]),1-2*(Q[2]*Q[2]+Q[3]*Q[3]))*v];V=I;Q=L;aa=m(V,2,O[0]);aa=m(aa,1,O[1]);aa=m(aa,0,O[2]-Q[2]);T=V[0];Z=V[1];V=V[2];O=aa[0];Y=aa[1];aa=aa[2];ea=Math.atan2(Z,T)*v;Z=Math.sqrt(T*T+Z*Z);Math.abs(Y)>Z?(T=(0<Y?90:-90)-ea,Z=0):(T=Math.asin(Y/Z)*v-ea,Z=Math.sqrt(Z*Z-Y*Y));Y=180-T-2*ea;ea=(Math.atan2(aa,O)-Math.atan2(V,Z))*v;V=(Math.atan2(aa,O)-Math.atan2(V,-Z))*v;O=l(Q[0],Q[1],T,ea);aa=l(Q[0],Q[1],Y,V);Q=O<=aa?[T,ea,Q[2]]:[Y,V,Q[2]];isFinite(Q[0])&&isFinite(Q[1])&&isFinite(Q[2])||
(Q=L);y.rotate(Q);L=Q}F.of(this,arguments)({type:"zoom"})});B(F.of(this,arguments))}).on("zoomend",function(){g.select(this).style(A);J.call(u,"zoom",null);var M=F.of(this,arguments);--H||M({type:"zoomend"});n(z,y,C)}).on("zoom.redraw",function(){z.render();var M=y.rotate();z.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":y.scale()/z.fitScale,"geo.projection.rotation.lon":-M[0],"geo.projection.rotation.lat":-M[1]})});return g.rebind(u,F,"on")}function e(z,y){if(z=(y=z.invert(y))&&isFinite(y[0])&&
isFinite(y[1])){z=y[0]*t;y=y[1]*t;var B=Math.cos(y);z=[B*Math.cos(z),B*Math.sin(z),Math.sin(y)]}return z}function f(z){var y=.5*z[0]*t,B=.5*z[1]*t,C=.5*z[2]*t;z=Math.sin(y);y=Math.cos(y);var u=Math.sin(B);B=Math.cos(B);var F=Math.sin(C);C=Math.cos(C);return[y*B*C+z*u*F,z*B*C-y*u*F,y*u*C+z*B*F,y*B*F-z*u*C]}function l(z,y,B,C){z=((B-z)%360+540)%360-180;y=((C-y)%360+540)%360-180;return Math.sqrt(z*z+y*y)}function m(z,y,B){var C=B*t;B=z.slice();var u=0===y?1:0;y=2===y?1:2;var F=Math.cos(C);C=Math.sin(C);
B[u]=z[u]*F-z[y]*C;B[y]=z[y]*F+z[u]*C;return B}function c(z,y){for(var B=0,C=0,u=z.length;C<u;++C)B+=z[C]*y[C];return B}function d(z){for(var y=0,B=arguments.length,C=[];++y<B;)C.push(arguments[y]);var u=g.dispatch.apply(null,C);u.of=function(F,H){return function(J){try{var I=J.sourceEvent=g.event;J.target=z;g.event=J;u[J.type].apply(F,H)}finally{g.event=I}}};return u}var g=b("d3"),h=b("../../lib"),q=b("../../registry"),t=Math.PI/180,v=180/Math.PI,w={cursor:"pointer"},A={cursor:"auto"};D.exports=
function(z,y){return(y._isScoped?p:y._isClipped?a:k)(z,z.projection)}},{"../../lib":749,"../../registry":880,d3:169}],834:[function(b,D,G){var r=b("../registry"),n=b("./cartesian/constants").SUBPLOT_PATTERN;G.getSubplotCalcData=function(p,k,a){k=r.subplotsRegistry[k];if(!k)return[];k=k.attr;for(var e=[],f=0;f<p.length;f++){var l=p[f];l[0].trace[k]===a&&e.push(l)}return e};G.getModuleCalcData=function(p,k){var a=[],e=[];k="string"===typeof k?r.getModule(k).plot:"function"===typeof k?k:k.plot;if(!k)return[a,
p];for(var f=0;f<p.length;f++){var l=p[f],m=l[0].trace;!0===m.visible&&0!==m._length&&(m._module.plot===k?a.push(l):e.push(l))}return[a,e]};G.getSubplotData=function(p,k,a){if(!r.subplotsRegistry[k])return[];var e=r.subplotsRegistry[k].attr,f=[];if("gl2d"===k){var l=a.match(n);var m="x"+l[1];var c="y"+l[2]}for(var d=0;d<p.length;d++)l=p[d],"gl2d"===k&&r.traceIs(l,"gl2d")?l[e[0]]===m&&l[e[1]]===c&&f.push(l):l[e]===a&&f.push(l);return f}},{"../registry":880,"./cartesian/constants":803}],835:[function(b,
D,G){function r(f,l){this.element=f;this.plot=l;this.wheelListener=this.mouseListener=null;this.lastInputTime=Date.now();this.lastPos=[0,0];this.boxInited=this.boxEnabled=!1;this.boxStart=[0,0];this.boxEnd=[0,0];this.dragStart=[0,0]}var n=b("mouse-change"),p=b("mouse-wheel"),k=b("mouse-event-offset"),a=b("../cartesian/constants"),e=b("has-passive-events");D.exports=function(f){function l(){for(var h=f.graphDiv._fullLayout._axisConstraintGroups,q=f.xaxis._id,t=f.yaxis._id,v=0;v<h.length;v++)if(-1!==
h[v][q]){if(-1!==h[v][t])return!0;break}return!1}function m(h,q,t){function v(u,F,H){var J=Math.min(F,H);F=Math.max(F,H);J!==F?(w[u]=J,w[u+2]=F,g.dataBox=w,f.setRanges(w)):(f.selectBox.selectBox=[0,0,1,1],f.glplot.setDirty())}var w=f.calcDataBox(),A=d.viewBox,z=g.lastPos[0],y=g.lastPos[1],B=a.MINDRAG*d.pixelRatio,C=a.MINZOOM*d.pixelRatio;q*=d.pixelRatio;t*=d.pixelRatio;t=A[3]-A[1]-t;switch(f.fullLayout.dragmode){case "zoom":h?(y=q/(A[2]-A[0])*(w[2]-w[0])+w[0],A=t/(A[3]-A[1])*(w[3]-w[1])+w[1],g.boxInited||
(g.boxStart[0]=y,g.boxStart[1]=A,g.dragStart[0]=q,g.dragStart[1]=t),g.boxEnd[0]=y,g.boxEnd[1]=A,g.boxInited=!0,g.boxEnabled||g.boxStart[0]===g.boxEnd[0]&&g.boxStart[1]===g.boxEnd[1]||(g.boxEnabled=!0),A=Math.abs(g.dragStart[0]-q)<C,C=Math.abs(g.dragStart[1]-t)<C,!l()||A&&C?(A&&(g.boxEnd[0]=g.boxStart[0]),C&&(g.boxEnd[1]=g.boxStart[1])):(C=g.boxEnd[0]-g.boxStart[0],A=g.boxEnd[1]-g.boxStart[1],y=(w[3]-w[1])/(w[2]-w[0]),Math.abs(C*y)>Math.abs(A)?(g.boxEnd[1]=g.boxStart[1]+Math.abs(C)*y*(0<=A?1:-1),g.boxEnd[1]<
w[1]?(g.boxEnd[1]=w[1],g.boxEnd[0]=g.boxStart[0]+(w[1]-g.boxStart[1])/Math.abs(y)):g.boxEnd[1]>w[3]&&(g.boxEnd[1]=w[3],g.boxEnd[0]=g.boxStart[0]+(w[3]-g.boxStart[1])/Math.abs(y))):(g.boxEnd[0]=g.boxStart[0]+Math.abs(A)/y*(0<=C?1:-1),g.boxEnd[0]<w[0]?(g.boxEnd[0]=w[0],g.boxEnd[1]=g.boxStart[1]+(w[0]-g.boxStart[0])*Math.abs(y)):g.boxEnd[0]>w[2]&&(g.boxEnd[0]=w[2],g.boxEnd[1]=g.boxStart[1]+(w[2]-g.boxStart[0])*Math.abs(y))))):g.boxEnabled?(C=g.boxStart[0]!==g.boxEnd[0],A=g.boxStart[1]!==g.boxEnd[1],
C||A?(C&&(v(0,g.boxStart[0],g.boxEnd[0]),f.xaxis.autorange=!1),A&&(v(1,g.boxStart[1],g.boxEnd[1]),f.yaxis.autorange=!1),f.relayoutCallback()):f.glplot.setDirty(),g.boxEnabled=!1,g.boxInited=!1):g.boxInited&&(g.boxInited=!1);break;case "pan":g.boxEnabled=!1,g.boxInited=!1,h?(g.panning||(g.dragStart[0]=q,g.dragStart[1]=t),Math.abs(g.dragStart[0]-q)<B&&(q=g.dragStart[0]),Math.abs(g.dragStart[1]-t)<B&&(t=g.dragStart[1]),C=(z-q)*(w[2]-w[0])/(d.viewBox[2]-d.viewBox[0]),A=(y-t)*(w[3]-w[1])/(d.viewBox[3]-
d.viewBox[1]),w[0]+=C,w[2]+=C,w[1]+=A,w[3]+=A,f.setRanges(w),g.panning=!0,g.lastInputTime=Date.now(),f.xaxis.autorange=!1,f.yaxis.autorange=!1,f.cameraChanged(),f.handleAnnotations()):g.panning&&(g.panning=!1,f.relayoutCallback())}g.lastPos[0]=q;g.lastPos[1]=t}var c=f.mouseContainer,d=f.glplot,g=new r(c,d);g.mouseListener=n(c,m);c.addEventListener("touchstart",function(h){var q=k(h.changedTouches[0],c);m(0,q[0],q[1]);m(1,q[0],q[1]);h.preventDefault()},e?{passive:!1}:!1);c.addEventListener("touchmove",
function(h){h.preventDefault();var q=k(h.changedTouches[0],c);m(1,q[0],q[1]);h.preventDefault()},e?{passive:!1}:!1);c.addEventListener("touchend",function(h){m(0,g.lastPos[0],g.lastPos[1]);h.preventDefault()},e?{passive:!1}:!1);g.wheelListener=p(c,function(h,q){if(!f.scrollZoom)return!1;h=f.calcDataBox();var t=d.viewBox;q=Math.exp(5*q/(t[3]-t[1]));var v=g.lastPos[0]/(t[2]-t[0])*(h[2]-h[0])+h[0];t=g.lastPos[1]/(t[3]-t[1])*(h[3]-h[1])+h[1];h[0]=(h[0]-v)*q+v;h[2]=(h[2]-v)*q+v;h[1]=(h[1]-t)*q+t;h[3]=
(h[3]-t)*q+t;f.setRanges(h);g.lastInputTime=Date.now();f.xaxis.autorange=!1;f.yaxis.autorange=!1;f.cameraChanged();f.handleAnnotations();f.relayoutCallback();return!0},!0);return g}},{"../cartesian/constants":803,"has-passive-events":415,"mouse-change":457,"mouse-event-offset":458,"mouse-wheel":460}],836:[function(b,D,G){function r(a){this.scene=a;this.gl=a.gl;this.pixelRatio=a.pixelRatio;this.screenBox=[0,0,1,1];this.viewBox=[0,0,1,1];this.dataBox=[-1,-1,1,1];this.borderLineEnable=[!1,!1,!1,!1];
this.borderLineWidth=[1,1,1,1];this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.ticks=[[],[]];this.tickEnable=[!0,!0,!1,!1];this.tickPad=[15,15,15,15];this.tickAngle=[0,0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickMarkLength=[0,0,0,0];this.tickMarkWidth=[0,0,0,0];this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labels=["x","y"];this.labelEnable=[!0,!0,!1,!1];this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2];this.labelPad=[15,15,15,15];this.labelSize=
[12,12];this.labelFont=["sans-serif","sans-serif"];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.title="";this.titleEnable=!0;this.titleCenter=[0,0,0,0];this.titleAngle=0;this.titleColor=[0,0,0,1];this.titleFont="sans-serif";this.titleSize=18;this.gridLineEnable=[!0,!0];this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]];this.gridLineWidth=[1,1];this.zeroLineEnable=[!0,!0];this.zeroLineWidth=[1,1];this.zeroLineColor=[[0,0,0,1],[0,0,0,1]];this.borderColor=[0,0,0,0];this.backgroundColor=[0,
0,0,0];this.static=this.scene.staticPlot}var n=b("../cartesian/axes"),p=b("../../lib/str2rgbarray");b=r.prototype;var k=["xaxis","yaxis"];b.merge=function(a){this.titleEnable=!1;this.backgroundColor=p(a.plot_bgcolor);var e,f;for(f=0;2>f;++f){var l=k[f];var m=l.charAt(0);var c=a[this.scene[l]._name];m=c.title.text===this.scene.fullLayout._dfltTitle[m]?"":c.title.text;for(e=0;2>=e;e+=2)this.labelEnable[f+e]=!1,this.labels[f+e]=m,this.labelColor[f+e]=p(c.title.font.color),this.labelFont[f+e]=c.title.font.family,
this.labelSize[f+e]=c.title.font.size,this.labelPad[f+e]=this.getLabelPad(l,c),this.tickEnable[f+e]=!1,this.tickColor[f+e]=p((c.tickfont||{}).color),this.tickAngle[f+e]="auto"===c.tickangle?0:Math.PI*-c.tickangle/180,this.tickPad[f+e]=this.getTickPad(c),this.tickMarkLength[f+e]=0,this.tickMarkWidth[f+e]=c.tickwidth||0,this.tickMarkColor[f+e]=p(c.tickcolor),this.borderLineEnable[f+e]=!1,this.borderLineColor[f+e]=p(c.linecolor),this.borderLineWidth[f+e]=c.linewidth||0;e=this.hasSharedAxis(c);m=this.hasAxisInDfltPos(l,
c)&&!e;l=this.hasAxisInAltrPos(l,c)&&!e;var d=c.mirror||!1;var g=e?-1!==String(d).indexOf("all"):!!d;e=e?"allticks"===d:-1!==String(d).indexOf("ticks");m?this.labelEnable[f]=!0:l&&(this.labelEnable[f+2]=!0);m?this.tickEnable[f]=c.showticklabels:l&&(this.tickEnable[f+2]=c.showticklabels);if(m||g)this.borderLineEnable[f]=c.showline;if(l||g)this.borderLineEnable[f+2]=c.showline;if(m||e)this.tickMarkLength[f]=this.getTickMarkLength(c);if(l||e)this.tickMarkLength[f+2]=this.getTickMarkLength(c);this.gridLineEnable[f]=
c.showgrid;this.gridLineColor[f]=p(c.gridcolor);this.gridLineWidth[f]=c.gridwidth;this.zeroLineEnable[f]=c.zeroline;this.zeroLineColor[f]=p(c.zerolinecolor);this.zeroLineWidth[f]=c.zerolinewidth}};b.hasSharedAxis=function(a){var e=this.scene;return 0!==n.findSubplotsWithAxis(e.fullLayout._subplots.gl2d,a).indexOf(e.id)};b.hasAxisInDfltPos=function(a,e){e=e.side;if("xaxis"===a)return"bottom"===e;if("yaxis"===a)return"left"===e};b.hasAxisInAltrPos=function(a,e){e=e.side;if("xaxis"===a)return"top"===
e;if("yaxis"===a)return"right"===e};b.getLabelPad=function(a,e){var f=e.title.font.size,l=e.showticklabels;if("xaxis"===a)return"top"===e.side?-10+f*(1.5+(l?1:0)):-10+f*(1.5+(l?.5:0));if("yaxis"===a)return"right"===e.side?10+f*(1.5+(l?1:.5)):10+f*(1.5+(l?.5:0))};b.getTickPad=function(a){return"outside"===a.ticks?10+a.ticklen:15};b.getTickMarkLength=function(a){if(!a.ticks)return 0;var e=a.ticklen;return"inside"===a.ticks?-e:e};D.exports=function(a){return new r(a)}},{"../../lib/str2rgbarray":772,
"../cartesian/axes":797}],837:[function(b,D,G){D=b("../../plot_api/edit_types").overrideAll;var r=b("./scene2d"),n=b("../layout_attributes"),p=b("../../constants/xmlns_namespaces"),k=b("../cartesian/constants"),a=b("../cartesian"),e=b("../../components/fx/layout_attributes"),f=b("../get_data").getSubplotData;G.name="gl2d";G.attr=["xaxis","yaxis"];G.idRoot=["x","y"];G.idRegex=k.idRegex;G.attrRegex=k.attrRegex;G.attributes=b("../cartesian/attributes");G.supplyLayoutDefaults=function(l,m,c){m._has("cartesian")||
a.supplyLayoutDefaults(l,m,c)};G.layoutAttrOverrides=D(a.layoutAttributes,"plot","from-root");G.baseLayoutAttrOverrides=D({plot_bgcolor:n.plot_bgcolor,hoverlabel:e.hoverlabel},"plot","nested");G.plot=function(l){for(var m=l._fullLayout,c=l._fullData,d=m._subplots.gl2d,g=0;g<d.length;g++){var h=d[g],q=m._plots[h],t=f(c,"gl2d",h),v=q._scene2d;void 0===v&&(v=new r({id:h,graphDiv:l,container:l.querySelector(".gl-container"),staticPlot:l._context.staticPlot,plotGlPixelRatio:l._context.plotGlPixelRatio},
m),q._scene2d=v);v.plot(t,l.calcdata,m,l.layout)}};G.clean=function(l,m,c,d){for(var g=d._subplots.gl2d||[],h=0;h<g.length;h++){var q=g[h],t=d._plots[q];t._scene2d&&0===f(l,"gl2d",q).length&&(t._scene2d.destroy(),delete d._plots[q])}a.clean.apply(this,arguments)};G.drawFramework=function(l){l._context.staticPlot||a.drawFramework(l)};G.toSVG=function(l){l=l._fullLayout;for(var m=l._subplots.gl2d,c=0;c<m.length;c++){var d=l._plots[m[c]]._scene2d,g=d.toImage("png");l._glimages.append("svg:image").attr({xmlns:p.svg,
"xlink:href":g,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"});d.destroy()}};G.updateFx=function(l){l=l._fullLayout;for(var m=l._subplots.gl2d,c=0;c<m.length;c++)l._plots[m[c]]._scene2d.updateFx(l.dragmode)}},{"../../components/fx/layout_attributes":656,"../../constants/xmlns_namespaces":725,"../../plot_api/edit_types":780,"../cartesian":810,"../cartesian/attributes":795,"../cartesian/constants":803,"../get_data":834,"../layout_attributes":851,"./scene2d":838}],838:[function(b,D,G){function r(B,
C){this.container=B.container;this.graphDiv=B.graphDiv;this.pixelRatio=B.plotGlPixelRatio||window.devicePixelRatio;this.id=B.id;this.staticPlot=!!B.staticPlot;this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian;this.fullData=null;this.updateRefs(C);this.makeFramework();this.stopped||(this.glplotOptions=m(this),this.glplotOptions.merge(C),this.glplot=a(this.glplotOptions),this.camera=c(this),this.traces={},this.spikes=e(this.glplot),this.selectBox=f(this.glplot,{innerFill:!1,outerFill:!0}),
this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}var n=b("../../registry"),p=b("../../plots/cartesian/axes"),k=b("../../components/fx"),a=b("gl-plot2d"),e=b("gl-spikes2d"),f=b("gl-select-box"),l=b("webgl-context"),m=b("./convert"),c=b("./camera"),d=b("../../lib/show_no_webgl_msg");G=b("../cartesian/constraints");var g=G.enforce,h=G.clean,q=b("../cartesian/autorange").doAutoRange;G=b("../../components/dragelement/helpers");
var t=G.drawMode,v=G.selectMode,w=["xaxis","yaxis"],A,z,y=b("../cartesian/constants").SUBPLOT_PATTERN;D.exports=r;b=r.prototype;b.makeFramework=function(){if(this.staticPlot){if(!z&&(A=document.createElement("canvas"),z=l({canvas:A,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!z))throw Error("Error creating static canvas/context for image server");this.canvas=A;this.gl=z}else{var B=this.container.querySelector(".gl-canvas-focus"),C=l({canvas:B,preserveDrawingBuffer:!0,premultipliedAlpha:!0});
if(!C){d(this);this.stopped=!0;return}this.canvas=B;this.gl=C}B=this.canvas;B.style.width="100%";B.style.height="100%";B.style.position="absolute";B.style.top="0px";B.style.left="0px";B.style["pointer-events"]="none";this.updateSize(B);B.className+=" user-select-none";B=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");B.style.position="absolute";B.style.top=B.style.left="0px";B.style.width=B.style.height="100%";B.style["z-index"]=20;B.style["pointer-events"]="none";C=
this.mouseContainer=document.createElement("div");C.style.position="absolute";C.style["pointer-events"]="auto";this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var u=this.container;u.appendChild(B);u.appendChild(C);var F=this;C.addEventListener("mouseout",function(){F.isMouseOver=!1;F.unhover()});C.addEventListener("mouseover",function(){F.isMouseOver=!0})};b.toImage=function(B){B||(B="png");this.stopped=!0;this.staticPlot&&this.container.appendChild(A);this.updateSize(this.canvas);
var C=this.glplot.gl,u=C.drawingBufferWidth,F=C.drawingBufferHeight;C.clearColor(1,1,1,0);C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT);this.glplot.setDirty();this.glplot.draw();C.bindFramebuffer(C.FRAMEBUFFER,null);var H=new Uint8Array(u*F*4);C.readPixels(0,0,u,F,C.RGBA,C.UNSIGNED_BYTE,H);C=0;for(var J=F-1;C<J;++C,--J)for(var I=0;I<u;++I)for(var M=0;4>M;++M){var E=H[4*(u*C+I)+M];H[4*(u*C+I)+M]=H[4*(u*J+I)+M];H[4*(u*J+I)+M]=E}C=document.createElement("canvas");C.width=u;C.height=F;J=C.getContext("2d");
u=J.createImageData(u,F);u.data.set(H);J.putImageData(u,0,0);switch(B){case "jpeg":B=C.toDataURL("image/jpeg");break;case "webp":B=C.toDataURL("image/webp");break;default:B=C.toDataURL("image/png")}this.staticPlot&&this.container.removeChild(A);return B};b.updateSize=function(B){B||(B=this.canvas);var C=this.pixelRatio,u=this.fullLayout,F=Math.ceil(C*u.width)|0;C=Math.ceil(C*u.height)|0;if(B.width!==F||B.height!==C)B.width=F,B.height=C;return B};b.computeTickMarks=function(){this.xaxis.setScale();
this.yaxis.setScale();for(var B=[p.calcTicks(this.xaxis),p.calcTicks(this.yaxis)],C=0;2>C;++C)for(var u=0;u<B[C].length;++u)B[C][u].text+="";return B};b.updateRefs=function(B){this.fullLayout=B;B=this.id.match(y);var C="yaxis"+B[2];this.xaxis=this.fullLayout["xaxis"+B[1]];this.yaxis=this.fullLayout[C]};b.relayoutCallback=function(){var B=this.graphDiv,C=this.xaxis,u=this.yaxis,F=B.layout,H={},J=H[C._name+".range"]=C.range.slice(),I=H[u._name+".range"]=u.range.slice();H[C._name+".autorange"]=C.autorange;
H[u._name+".autorange"]=u.autorange;n.call("_storeDirectGUIEdit",B.layout,B._fullLayout._preGUI,H);var M=F[C._name];M.range=J;M.autorange=C.autorange;C=F[u._name];C.range=I;C.autorange=u.autorange;H.lastInputTime=this.camera.lastInputTime;B.emit("plotly_relayout",H)};b.cameraChanged=function(){var B=this.camera;this.glplot.setDataBox(this.calcDataBox());var C=this.computeTickMarks(),u=this.glplotOptions.ticks;a:{for(var F=0;2>F;++F){var H=C[F],J=u[F];if(H.length!==J.length){u=!0;break a}for(var I=
0;I<H.length;++I)if(H[I].x!==J[I].x){u=!0;break a}}u=!1}u&&(this.glplotOptions.ticks=C,this.glplotOptions.dataBox=B.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())};b.handleAnnotations=function(){for(var B=this.graphDiv,C=this.fullLayout.annotations,u=0;u<C.length;u++){var F=C[u];F.xref===this.xaxis._id&&F.yref===this.yaxis._id&&n.getComponentMethod("annotations","drawOne")(B,u)}};b.destroy=function(){if(this.glplot){var B=this.traces;B&&Object.keys(B).map(function(C){B[C].dispose();
delete B[C]});this.glplot.dispose();this.container.removeChild(this.svgContainer);this.container.removeChild(this.mouseContainer);this.glplot=this.fullData=null;this.stopped=!0;this.camera.mouseListener.enabled=!1;this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener);this.camera=null}};b.plot=function(B,C,u){var F=this.glplot;this.updateRefs(u);this.xaxis.clearCalc();this.yaxis.clearCalc();this.updateTraces(B,C);this.updateFx(u.dragmode);var H=u.width,J=u.height;this.updateSize(this.canvas);
B=this.glplotOptions;B.merge(u);B.screenBox=[0,0,H,J];C={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis}};h(C,this.xaxis);h(C,this.yaxis);var I=u._size,M=this.xaxis.domain,E=this.yaxis.domain;B.viewBox=[I.l+M[0]*I.w,I.b+E[0]*I.h,H-I.r-(1-M[1])*I.w,J-I.t-(1-E[1])*I.h];this.mouseContainer.style.width=I.w*(M[1]-M[0])+"px";this.mouseContainer.style.height=I.h*(E[1]-E[0])+"px";this.mouseContainer.height=I.h*(E[1]-E[0]);this.mouseContainer.style.left=
I.l+M[0]*I.w+"px";this.mouseContainer.style.top=I.t+(1-E[1])*I.h+"px";for(J=0;2>J;++J)H=this[w[J]],H._length=B.viewBox[J+2]-B.viewBox[J],q(this.graphDiv,H),H.setScale();g(C);B.ticks=this.computeTickMarks();B.dataBox=this.calcDataBox();B.merge(u);F.update(B);this.glplot.draw()};b.calcDataBox=function(){var B=this.xaxis,C=this.yaxis,u=B.range,F=C.range;B=B.r2l;C=C.r2l;return[B(u[0]),C(F[0]),B(u[1]),C(F[1])]};b.setRanges=function(B){var C=this.xaxis,u=this.yaxis,F=C.l2r,H=u.l2r;C.range=[F(B[0]),F(B[2])];
u.range=[H(B[1]),H(B[3])]};b.updateTraces=function(B,C){var u=Object.keys(this.traces),F;this.fullData=B;var H=0;a:for(;H<u.length;H++){var J=u[H],I=this.traces[J];for(F=0;F<B.length;F++){var M=B[F];if(M.uid===J&&M.type===I.type)continue a}I.dispose();delete this.traces[J]}for(H=0;H<B.length;H++)M=B[H],u=C[H],(F=this.traces[M.uid])?F.update(M,u):(F=M._module.plot(this,M,u),this.traces[M.uid]=F);this.glplot.objects.sort(function(E,L){return E._trace.index-L._trace.index})};b.updateFx=function(B){v(B)||
t(B)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto");this.mouseContainer.style.cursor="pan"===B?"move":"zoom"===B?"crosshair":null};b.emitPointAction=function(B,C){for(var u=B.trace.uid,F=B.pointIndex,H,J=0;J<this.fullData.length;J++)this.fullData[J].uid===u&&(H=this.fullData[J]);B={x:B.traceCoord[0],y:B.traceCoord[1],curveNumber:H.index,pointNumber:F,
data:H._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};k.appendArrayPointValue(B,H,F);this.graphDiv.emit(C,{points:[B]})};b.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var B=this.glplot,C=this.camera,u=C.mouseListener,F=1===this.lastButtonState&&0===u.buttons,H=this.fullLayout;this.lastButtonState=u.buttons;this.cameraChanged();var J=u.x*B.pixelRatio;u=this.canvas.height-B.pixelRatio*u.y;if(C.boxEnabled&&"zoom"===H.dragmode){this.selectBox.enabled=!0;H=this.selectBox.selectBox=
[Math.min(C.boxStart[0],C.boxEnd[0]),Math.min(C.boxStart[1],C.boxEnd[1]),Math.max(C.boxStart[0],C.boxEnd[0]),Math.max(C.boxStart[1],C.boxEnd[1])];for(F=0;2>F;F++)C.boxStart[F]===C.boxEnd[F]&&(H[F]=B.dataBox[F],H[F+2]=B.dataBox[F+2]);B.setDirty()}else if(!C.panning&&this.isMouseOver){this.selectBox.enabled=!1;var I=H._size;(C=(I=B.pick(J/B.pixelRatio+I.l+this.xaxis.domain[0]*I.w,u/B.pixelRatio-(I.t+(1-this.yaxis.domain[1])*I.h)))&&I.object._trace.handlePick(I))&&F&&this.emitPointAction(C,"plotly_click");
I&&"skip"!==I.object._trace.hoverinfo&&H.hovermode&&C&&(!this.lastPickResult||this.lastPickResult.traceUid!==C.trace.uid||this.lastPickResult.dataCoord[0]!==C.dataCoord[0]||this.lastPickResult.dataCoord[1]!==C.dataCoord[1])&&(this.lastPickResult={traceUid:C.trace?C.trace.uid:null,dataCoord:C.dataCoord.slice()},this.spikes.update({center:I.dataCoord}),C.screenCoord=[((B.viewBox[2]-B.viewBox[0])*(I.dataCoord[0]-B.dataBox[0])/(B.dataBox[2]-B.dataBox[0])+B.viewBox[0])/B.pixelRatio,(this.canvas.height-
(B.viewBox[3]-B.viewBox[1])*(I.dataCoord[1]-B.dataBox[1])/(B.dataBox[3]-B.dataBox[1])-B.viewBox[1])/B.pixelRatio],this.emitPointAction(C,"plotly_hover"),F=this.fullData[C.trace.index]||{},J=C.pointIndex,(H=k.castHoverinfo(F,H,J))&&"all"!==H&&(H=H.split("+"),-1===H.indexOf("x")&&(C.traceCoord[0]=void 0),-1===H.indexOf("y")&&(C.traceCoord[1]=void 0),-1===H.indexOf("z")&&(C.traceCoord[2]=void 0),-1===H.indexOf("text")&&(C.textLabel=void 0),-1===H.indexOf("name")&&(C.name=void 0)),k.loneHover({x:C.screenCoord[0],
y:C.screenCoord[1],xLabel:this.hoverFormatter("xaxis",C.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",C.traceCoord[1]),zLabel:C.traceCoord[2],text:C.textLabel,name:C.name,color:k.castHoverOption(F,J,"bgcolor")||C.color,borderColor:k.castHoverOption(F,J,"bordercolor"),fontFamily:k.castHoverOption(F,J,"font.family"),fontSize:k.castHoverOption(F,J,"font.size"),fontColor:k.castHoverOption(F,J,"font.color"),nameLength:k.castHoverOption(F,J,"namelength"),textAlign:k.castHoverOption(F,J,"align")},{container:this.svgContainer,
gd:this.graphDiv}))}I||this.unhover();B.draw()}};b.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),k.loneUnhover(this.svgContainer))};b.hoverFormatter=function(B,C){if(void 0!==C)return B=this[B],p.tickText(B,B.c2l(C),"hover").text}},{"../../components/dragelement/helpers":633,"../../components/fx":655,"../../lib/show_no_webgl_msg":770,"../../plots/cartesian/axes":797,"../../registry":880,"../cartesian/autorange":796,"../cartesian/constants":803,
"../cartesian/constraints":804,"./camera":835,"./convert":836,"gl-plot2d":298,"gl-select-box":310,"gl-spikes2d":319,"webgl-context":578}],839:[function(b,D,G){D=b("../../plot_api/edit_types").overrideAll;var r=b("../../components/fx/layout_attributes"),n=b("./scene"),p=b("../get_data").getSubplotData,k=b("../../lib"),a=b("../../constants/xmlns_namespaces");G.name="gl3d";G.attr="scene";G.idRoot="scene";G.idRegex=G.attrRegex=k.counterRegex("scene");G.attributes=b("./layout/attributes");G.layoutAttributes=
b("./layout/layout_attributes");G.baseLayoutAttrOverrides=D({hoverlabel:r.hoverlabel},"plot","nested");G.supplyLayoutDefaults=b("./layout/defaults");G.plot=function(e){for(var f=e._fullLayout,l=e._fullData,m=f._subplots.gl3d,c=0;c<m.length;c++){var d=m[c],g=p(l,"gl3d",d),h=f[d],q=h.camera,t=h._scene;t||(t=new n({id:d,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio,camera:q},f),h._scene=t);t.viewInitial||(t.viewInitial=
{up:{x:q.up.x,y:q.up.y,z:q.up.z},eye:{x:q.eye.x,y:q.eye.y,z:q.eye.z},center:{x:q.center.x,y:q.center.y,z:q.center.z}});t.plot(g,f,e.layout)}};G.clean=function(e,f,l,m){e=m._subplots.gl3d||[];for(l=0;l<e.length;l++){var c=e[l];!f[c]&&m[c]._scene&&(m[c]._scene.destroy(),m._infolayer&&m._infolayer.selectAll(".annotation-"+c).remove())}};G.toSVG=function(e){e=e._fullLayout;for(var f=e._subplots.gl3d,l=e._size,m=0;m<f.length;m++){var c=e[f[m]],d=c.domain;c=c._scene;var g=c.toImage("png");e._glimages.append("svg:image").attr({xmlns:a.svg,
"xlink:href":g,x:l.l+l.w*d.x[0],y:l.t+l.h*(1-d.y[1]),width:l.w*(d.x[1]-d.x[0]),height:l.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"});c.destroy()}};G.cleanId=function(e){if(e.match(/^scene[0-9]*$/))return e=e.substr(5),"1"===e&&(e=""),"scene"+e};G.updateFx=function(e){e=e._fullLayout;for(var f=e._subplots.gl3d,l=0;l<f.length;l++)e[f[l]]._scene.updateFx(e.dragmode,e.hovermode)}},{"../../components/fx/layout_attributes":656,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../plot_api/edit_types":780,
"../get_data":834,"./layout/attributes":840,"./layout/defaults":844,"./layout/layout_attributes":845,"./scene":849}],840:[function(b,D,G){D.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],841:[function(b,D,G){G=b("../../../components/color");var r=b("../../cartesian/layout_attributes"),n=b("../../../lib/extend").extendFlat;b=b("../../../plot_api/edit_types").overrideAll;D.exports=b({visible:r.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",
dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:G.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:r.color,categoryorder:r.categoryorder,categoryarray:r.categoryarray,title:{text:r.title.text,font:r.title.font},type:n({},r.type,{values:["-","linear","log","date","category"]}),autorange:r.autorange,rangemode:r.rangemode,range:n({},r.range,
{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:r.ticks,mirror:r.mirror,ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:r.tickfont,tickangle:r.tickangle,tickprefix:r.tickprefix,showtickprefix:r.showtickprefix,ticksuffix:r.ticksuffix,showticksuffix:r.showticksuffix,
showexponent:r.showexponent,exponentformat:r.exponentformat,separatethousands:r.separatethousands,tickformat:r.tickformat,tickformatstops:r.tickformatstops,hoverformat:r.hoverformat,showline:r.showline,linecolor:r.linecolor,linewidth:r.linewidth,showgrid:r.showgrid,gridcolor:n({},r.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:r.gridwidth,zeroline:r.zeroline,zerolinecolor:r.zerolinecolor,zerolinewidth:r.zerolinewidth,_deprecated:{title:r._deprecated.title,titlefont:r._deprecated.titlefont}},"plot",
"from-root")},{"../../../components/color":615,"../../../lib/extend":739,"../../../plot_api/edit_types":780,"../../cartesian/layout_attributes":811}],842:[function(b,D,G){var r=b("tinycolor2").mix,n=b("../../../lib"),p=b("../../../plot_api/plot_template"),k=b("./axis_attributes"),a=b("../../cartesian/type_defaults"),e=b("../../cartesian/axis_defaults"),f=["xaxis","yaxis","zaxis"],l=13600/187;D.exports=function(m,c,d){function g(w,A){return n.coerce(h,q,k,w,A)}for(var h,q,t=0;t<f.length;t++){var v=
f[t];h=m[v]||{};q=p.newContainer(c,v);q._id=v[0]+d.scene;q._name=v;a(h,q,g,d);e(h,q,g,{font:d.font,letter:v[0],data:d.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,bgColor:d.bgColor,calendar:d.calendar},d.fullLayout);g("gridcolor",r(q.color,d.bgColor,l).toRgbString());g("title.text",v[0]);q.setScale=n.noop;g("showspikes")&&(g("spikesides"),g("spikethickness"),g("spikecolor",q.color));g("showaxeslabels");g("showbackground")&&g("backgroundcolor")}}},{"../../../lib":749,"../../../plot_api/plot_template":787,
"../../cartesian/axis_defaults":799,"../../cartesian/type_defaults":822,"./axis_attributes":841,tinycolor2:548}],843:[function(b,D,G){function r(){this.bounds=[[-10,-10,-10],[10,10,10]];this.ticks=[[],[],[]];this.tickEnable=[!0,!0,!0];this.tickFont=["sans-serif","sans-serif","sans-serif"];this.tickSize=[12,12,12];this.tickAngle=[0,0,0];this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.tickPad=[18,18,18];this.labels=["x","y","z"];this.labelEnable=[!0,!0,!0];this.labelFont=["Open Sans","Open Sans",
"Open Sans"];this.labelSize=[20,20,20];this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.labelPad=[30,30,30];this.lineEnable=[!0,!0,!0];this.lineMirror=[!1,!1,!1];this.lineWidth=[1,1,1];this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.lineTickEnable=[!0,!0,!0];this.lineTickMirror=[!1,!1,!1];this.lineTickLength=[10,10,10];this.lineTickWidth=[1,1,1];this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.gridEnable=[!0,!0,!0];this.gridWidth=[1,1,1];this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];
this.zeroEnable=[!0,!0,!0];this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.zeroLineWidth=[2,2,2];this.backgroundEnable=[!0,!0,!0];this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]];this._defaultTickPad=this.tickPad.slice();this._defaultLabelPad=this.labelPad.slice();this._defaultLineTickLength=this.lineTickLength.slice()}var n=b("../../../lib/str2rgbarray"),p=b("../../../lib"),k=["xaxis","yaxis","zaxis"];r.prototype.merge=function(a,e){for(var f=0;3>f;++f){var l=e[k[f]];l.visible?
(this.labels[f]=a._meta?p.templateString(l.title.text,a._meta):l.title.text,"font"in l.title&&(l.title.font.color&&(this.labelColor[f]=n(l.title.font.color)),l.title.font.family&&(this.labelFont[f]=l.title.font.family),l.title.font.size&&(this.labelSize[f]=l.title.font.size)),"showline"in l&&(this.lineEnable[f]=l.showline),"linecolor"in l&&(this.lineColor[f]=n(l.linecolor)),"linewidth"in l&&(this.lineWidth[f]=l.linewidth),"showgrid"in l&&(this.gridEnable[f]=l.showgrid),"gridcolor"in l&&(this.gridColor[f]=
n(l.gridcolor)),"gridwidth"in l&&(this.gridWidth[f]=l.gridwidth),"log"===l.type?this.zeroEnable[f]=!1:"zeroline"in l&&(this.zeroEnable[f]=l.zeroline),"zerolinecolor"in l&&(this.zeroLineColor[f]=n(l.zerolinecolor)),"zerolinewidth"in l&&(this.zeroLineWidth[f]=l.zerolinewidth),this.lineTickEnable[f]="ticks"in l&&l.ticks?!0:!1,"ticklen"in l&&(this.lineTickLength[f]=this._defaultLineTickLength[f]=l.ticklen),"tickcolor"in l&&(this.lineTickColor[f]=n(l.tickcolor)),"tickwidth"in l&&(this.lineTickWidth[f]=
l.tickwidth),"tickangle"in l&&(this.tickAngle[f]="auto"===l.tickangle?-3600:Math.PI*-l.tickangle/180),"showticklabels"in l&&(this.tickEnable[f]=l.showticklabels),"tickfont"in l&&(l.tickfont.color&&(this.tickColor[f]=n(l.tickfont.color)),l.tickfont.family&&(this.tickFont[f]=l.tickfont.family),l.tickfont.size&&(this.tickSize[f]=l.tickfont.size)),"mirror"in l?-1!==["ticks","all","allticks"].indexOf(l.mirror)?(this.lineTickMirror[f]=!0,this.lineMirror[f]=!0):!0===l.mirror?(this.lineTickMirror[f]=!1,this.lineMirror[f]=
!0):(this.lineTickMirror[f]=!1,this.lineMirror[f]=!1):this.lineMirror[f]=!1,"showbackground"in l&&!1!==l.showbackground?(this.backgroundEnable[f]=!0,this.backgroundColor[f]=n(l.backgroundcolor)):this.backgroundEnable[f]=!1):(this.tickEnable[f]=!1,this.labelEnable[f]=!1,this.lineEnable[f]=!1,this.lineTickEnable[f]=!1,this.gridEnable[f]=!1,this.zeroEnable[f]=!1,this.backgroundEnable[f]=!1)}};D.exports=function(a,e){var f=new r;f.merge(a,e);return f}},{"../../../lib":749,"../../../lib/str2rgbarray":772}],
844:[function(b,D,G){function r(m,c,d,g){var h=d("bgcolor");h=p.combine(h,g.paper_bgcolor);for(var q=["up","center","eye"],t=0;t<q.length;t++)d("camera."+q[t]+".x"),d("camera."+q[t]+".y"),d("camera."+q[t]+".z");d("camera.projection.type");q=!!d("aspectratio.x")&&!!d("aspectratio.y")&&!!d("aspectratio.z");t=d("aspectmode",q?"manual":"auto");q||(m.aspectratio=c.aspectratio={x:1,y:1,z:1},"manual"===t&&(c.aspectmode="auto"),m.aspectmode=c.aspectmode);q=l(g.fullData,"gl3d",g.id);e(m,c,{font:g.font,scene:g.id,
data:q,bgColor:h,calendar:g.calendar,fullLayout:g.fullLayout});k.getComponentMethod("annotations3d","handleDefaults")(m,c,g);c=g.getDfltFromLayout("dragmode");!1===c||c||(c="orbit",m.camera&&m.camera.up?(h=m.camera.up.x,q=m.camera.up.y,m=m.camera.up.z,0!==m&&(h&&q&&m?.999<m/Math.sqrt(h*h+q*q+m*m)&&(c="turntable"):c="turntable")):c="turntable");d("dragmode",c);d("hovermode",g.getDfltFromLayout("hovermode"))}var n=b("../../../lib"),p=b("../../../components/color"),k=b("../../../registry"),a=b("../../subplot_defaults"),
e=b("./axis_defaults"),f=b("./layout_attributes"),l=b("../../get_data").getSubplotData;D.exports=function(m,c,d){var g=1<c._basePlotModules.length;a(m,c,d,{type:"gl3d",attributes:f,handleDefaults:r,fullLayout:c,font:c.font,fullData:d,getDfltFromLayout:function(h){if(!g&&n.validate(m[h],f[h]))return m[h]},paper_bgcolor:c.paper_bgcolor,calendar:c.calendar})}},{"../../../components/color":615,"../../../lib":749,"../../../registry":880,"../../get_data":834,"../../subplot_defaults":874,"./axis_defaults":842,
"./layout_attributes":845}],845:[function(b,D,G){function r(k,a,e){return{x:{valType:"number",dflt:k,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:e,editType:"camera"},editType:"camera"}}G=b("./axis_attributes");var n=b("../../domain").attributes,p=b("../../../lib/extend").extendFlat;b=b("../../../lib").counterRegex;D.exports={_arrayAttrRegexps:[b("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:p(r(0,
0,1),{}),center:p(r(0,0,0),{}),eye:p(r(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:n({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},
y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:G,yaxis:G,zaxis:G,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",
editType:"camera"}}}},{"../../../lib":749,"../../../lib/extend":739,"../../domain":824,"./axis_attributes":841}],846:[function(b,D,G){function r(){this.enabled=[!0,!0,!0];this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.drawSides=[!0,!0,!0];this.lineWidth=[1,1,1]}var n=b("../../../lib/str2rgbarray"),p=["xaxis","yaxis","zaxis"];r.prototype.merge=function(k){for(var a=0;3>a;++a){var e=k[p[a]];e.visible?(this.enabled[a]=e.showspikes,this.colors[a]=n(e.spikecolor),this.drawSides[a]=e.spikesides,this.lineWidth[a]=
e.spikethickness):(this.enabled[a]=!1,this.drawSides[a]=!1)}};D.exports=function(k){var a=new r;a.merge(k);return a}},{"../../../lib/str2rgbarray":772}],847:[function(b,D,G){D.exports=function(k){for(var a=k.axesOptions,e=k.glplot.axesPixels,f=k.fullSceneLayout,l=[[],[],[]],m=0;3>m;++m){var c=f[p[m]];c._length=(e[m].hi-e[m].lo)*e[m].pixelsPerDataUnit/k.dataScale[m];if(Infinity===Math.abs(c._length)||isNaN(c._length))l[m]=[];else{c._input_range=c.range.slice();c.range[0]=e[m].lo/k.dataScale[m];c.range[1]=
e[m].hi/k.dataScale[m];c._m=1/(k.dataScale[m]*e[m].pixelsPerDataUnit);c.range[0]===c.range[1]&&(--c.range[0],c.range[1]+=1);var d=c.tickmode;if("auto"===c.tickmode){c.tickmode="linear";var g=c.nticks||n.constrain(c._length/40,4,9);r.autoTicks(c,Math.abs(c.range[1]-c.range[0])/g)}g=r.calcTicks(c,{msUTC:!0});for(var h=0;h<g.length;++h)g[h].x*=k.dataScale[m],"date"===c.type&&(g[h].text=g[h].text.replace(/<br>/g," "));l[m]=g;c.tickmode=d}}a.ticks=l;for(m=0;3>m;++m)for(h=0;2>h;++h)a.bounds[h][m]=k.glplot.bounds[h][m];
a=Array(3);for(e=0;3>e;++e){f=l[e];m=Array(f.length);for(c=0;c<f.length;++c)m[c]=f[c].x;a[e]=m}k.contourLevels=a};var r=b("../../cartesian/axes"),n=b("../../../lib"),p=["xaxis","yaxis","zaxis"]},{"../../../lib":749,"../../cartesian/axes":797}],848:[function(b,D,G){function r(n,p){var k=[0,0,0,0],a,e;for(a=0;4>a;++a)for(e=0;4>e;++e)k[e]+=n[4*a+e]*p[a];return k}D.exports=function(n,p){return r(n.projection,r(n.view,r(n.model,[p[0],p[1],p[2],1])))}},{}],849:[function(b,D,G){function r(C,u){var F=document.createElement("div"),
H=C.container;this.graphDiv=C.graphDiv;var J=document.createElementNS("http://www.w3.org/2000/svg","svg");J.style.position="absolute";J.style.top=J.style.left="0px";J.style.width=J.style.height="100%";J.style["z-index"]=20;J.style["pointer-events"]="none";F.appendChild(J);this.svgContainer=J;F.id=C.id;F.style.position="absolute";F.style.top=F.style.left="0px";F.style.width=F.style.height="100%";H.appendChild(F);this.fullLayout=u;this.id=C.id||"scene";this.fullSceneLayout=u[this.id];this.plotArgs=
[[],{},{}];this.axesOptions=t(u,u[this.id]);this.spikeOptions=v(u[this.id]);this.container=F;this.staticMode=!!C.staticPlot;this.pixelRatio=this.pixelRatio||C.plotGlPixelRatio||2;this.dataScale=[1,1,1];this.contourLevels=[[],[],[]];this.convertAnnotations=l.getComponentMethod("annotations3d","convert");this.drawAnnotations=l.getComponentMethod("annotations3d","draw");this.initializeGLPlot()}function n(C,u,F){C=C.fullSceneLayout;for(var H=0;3>H;H++){var J=B[H],I=J.charAt(0);J=C[J];var M=u[I],E=u[I+
"calendar"];I=u["_"+I+"length"];if(m.isArrayOrTypedArray(M))for(var L,P=0;P<(I||M.length);P++)if(m.isArrayOrTypedArray(M[P]))for(var N=0;N<M[P].length;++N)L=J.d2l(M[P][N],0,E),!isNaN(L)&&isFinite(L)&&(F[0][H]=Math.min(F[0][H],L),F[1][H]=Math.max(F[1][H],L));else L=J.d2l(M[P],0,E),!isNaN(L)&&isFinite(L)&&(F[0][H]=Math.min(F[0][H],L),F[1][H]=Math.max(F[1][H],L));else F[0][H]=Math.min(F[0][H],0),F[1][H]=Math.max(F[1][H],I-1)}}function p(C,u){C=C.fullSceneLayout;for(var F=C.annotations||[],H=0;3>H;H++){var J=
B[H],I=J.charAt(0);J=C[J];for(var M=0;M<F.length;M++){var E=F[M];E.visible&&(E=J.r2l(E[I]),!isNaN(E)&&isFinite(E)&&(u[0][H]=Math.min(u[0][H],E),u[1][H]=Math.max(u[1][H],E)))}}}G=b("gl-plot3d");var k=G.createCamera,a=G.createScene,e=b("webgl-context"),f=b("has-passive-events"),l=b("../../registry"),m=b("../../lib"),c=b("../../plots/cartesian/axes"),d=b("../../components/fx"),g=b("../../lib/str2rgbarray"),h=b("../../lib/show_no_webgl_msg"),q=b("./project"),t=b("./layout/convert"),v=b("./layout/spikes"),
w=b("./layout/tick_marks"),A=b("is-mobile")({tablet:!0,featureDetect:!0}),z,y;b=r.prototype;b.prepareOptions=function(){var C={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:A,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!y&&(z=document.createElement("canvas"),y=e({canvas:z,preserveDrawingBuffer:!0,
premultipliedAlpha:!0,antialias:!0}),!y))throw Error("error creating static canvas/context for image server");C.gl=y;C.canvas=z}return C};b.tryCreatePlot=function(){var C=this.prepareOptions(),u=!0;try{this.glplot=a(C)}catch(F){if(this.staticMode)u=!1;else try{m.warn(["webgl setup failed possibly due to",A?"disabling":"enabling","preserveDrawingBuffer config. The device may not be supported by is-mobile module! Inverting preserveDrawingBuffer option in second attempt to create webgl scene."].join(" ")),
A=C.glOptions.preserveDrawingBuffer=!C.glOptions.preserveDrawingBuffer,this.glplot=a(C)}catch(H){u=!1}}return u};b.initializeGLCamera=function(){var C=this.fullSceneLayout.camera;this.camera=k(this.container,{center:[C.center.x,C.center.y,C.center.z],eye:[C.eye.x,C.eye.y,C.eye.z],up:[C.up.x,C.up.y,C.up.z],_ortho:"orthographic"===C.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})};b.initializeGLPlot=function(){var C=this;C.initializeGLCamera();if(!C.tryCreatePlot())return h(C);C.traces={};C.make4thDimension();
var u=C.graphDiv,F=u.layout,H=function(){var I={};C.isCameraChanged(F)&&(I[C.id+".camera"]=C.getCamera());C.isAspectChanged(F)&&(I[C.id+".aspectratio"]=C.glplot.getAspectratio(),"manual"!==F[C.id].aspectmode&&(C.fullSceneLayout.aspectmode=F[C.id].aspectmode=I[C.id+".aspectmode"]="manual"));return I},J=function(I){if(!1!==I.fullSceneLayout.dragmode){var M=H();I.saveLayout(F);I.graphDiv.emit("plotly_relayout",M)}};C.glplot.canvas.addEventListener("mouseup",function(){J(C)});C.glplot.canvas.addEventListener("wheel",
function(I){if(u._context._scrollZoom.gl3d){if(C.camera._ortho){I=I.deltaX>I.deltaY?1.1:1/1.1;var M=C.glplot.getAspectratio();C.glplot.setAspectratio({x:I*M.x,y:I*M.y,z:I*M.z})}J(C)}},f?{passive:!1}:!1);C.glplot.canvas.addEventListener("mousemove",function(){if(!1!==C.fullSceneLayout.dragmode&&0!==C.camera.mouseListener.buttons){var I=H();C.graphDiv.emit("plotly_relayouting",I)}});C.staticMode||C.glplot.canvas.addEventListener("webglcontextlost",function(I){u&&u.emit&&u.emit("plotly_webglcontextlost",
{event:I,layer:C.id})},!1);C.glplot.oncontextloss=function(){C.recoverContext()};C.glplot.onrender=function(){C.render()};return!0};b.render=function(){function C(aa,Y){aa=u.fullSceneLayout[aa];return c.tickText(aa,aa.d2l(Y),"hover").text}var u=this,F=u.graphDiv,H=u.svgContainer,J=u.container.getBoundingClientRect(),I=J.width;J=J.height;H.setAttributeNS(null,"viewBox","0 0 "+I+" "+J);H.setAttributeNS(null,"width",I);H.setAttributeNS(null,"height",J);w(u);u.glplot.axes.update(u.axesOptions);for(var M=
Object.keys(u.traces),E=null,L=u.glplot.selection,P=0;P<M.length;++P){var N=u.traces[M[P]];"skip"!==N.data.hoverinfo&&N.handlePick(L)&&(E=N);N.setContourLevels&&N.setContourLevels()}if(null!==E){var Q=q(u.glplot.cameraParams,L.dataCoordinate);N=E.data;M=F._fullData[N.index];P=L.index;var O={xLabel:C("xaxis",L.traceCoordinate[0]),yLabel:C("yaxis",L.traceCoordinate[1]),zLabel:C("zaxis",L.traceCoordinate[2])},T=d.castHoverinfo(M,u.fullLayout,P),V=(T||"").split("+");T=T&&"all"===T;M.hovertemplate||T||
(-1===V.indexOf("x")&&(O.xLabel=void 0),-1===V.indexOf("y")&&(O.yLabel=void 0),-1===V.indexOf("z")&&(O.zLabel=void 0),-1===V.indexOf("text")&&(L.textLabel=void 0),-1===V.indexOf("name")&&(E.name=void 0));var Z=[];"cone"===N.type||"streamtube"===N.type?(O.uLabel=C("xaxis",L.traceCoordinate[3]),(T||-1!==V.indexOf("u"))&&Z.push("u: "+O.uLabel),O.vLabel=C("yaxis",L.traceCoordinate[4]),(T||-1!==V.indexOf("v"))&&Z.push("v: "+O.vLabel),O.wLabel=C("zaxis",L.traceCoordinate[5]),(T||-1!==V.indexOf("w"))&&Z.push("w: "+
O.wLabel),O.normLabel=L.traceCoordinate[6].toPrecision(3),(T||-1!==V.indexOf("norm"))&&Z.push("norm: "+O.normLabel),"streamtube"===N.type&&(O.divergenceLabel=L.traceCoordinate[7].toPrecision(3),(T||-1!==V.indexOf("divergence"))&&Z.push("divergence: "+O.divergenceLabel)),L.textLabel&&Z.push(L.textLabel),V=Z.join("\x3cbr\x3e")):"isosurface"===N.type||"volume"===N.type?(O.valueLabel=c.tickText(u._mockAxis,u._mockAxis.d2l(L.traceCoordinate[3]),"hover").text,Z.push("value: "+O.valueLabel),L.textLabel&&
Z.push(L.textLabel),V=Z.join("\x3cbr\x3e")):V=L.textLabel;T={x:L.traceCoordinate[0],y:L.traceCoordinate[1],z:L.traceCoordinate[2],data:M._input,fullData:M,curveNumber:M.index,pointNumber:P};d.appendArrayPointValue(T,M,P);N._module.eventData&&(T=M._module.eventData(T,L,M,{},P));N={points:[T]};u.fullSceneLayout.hovermode&&d.loneHover({trace:M,x:(.5+.5*Q[0]/Q[3])*I,y:(.5-.5*Q[1]/Q[3])*J,xLabel:O.xLabel,yLabel:O.yLabel,zLabel:O.zLabel,text:V,name:E.name,color:d.castHoverOption(M,P,"bgcolor")||E.color,
borderColor:d.castHoverOption(M,P,"bordercolor"),fontFamily:d.castHoverOption(M,P,"font.family"),fontSize:d.castHoverOption(M,P,"font.size"),fontColor:d.castHoverOption(M,P,"font.color"),nameLength:d.castHoverOption(M,P,"namelength"),textAlign:d.castHoverOption(M,P,"align"),hovertemplate:m.castOption(M,P,"hovertemplate"),hovertemplateLabels:m.extendFlat({},T,O),eventData:[T]},{container:H,gd:F});L.buttons&&5>L.distance?F.emit("plotly_click",N):F.emit("plotly_hover",N);Q=N}else d.loneUnhover(H),F.emit("plotly_unhover",
Q);u.drawAnnotations(u)};b.recoverContext=function(){var C=this;C.glplot.dispose();var u=function(){C.glplot.gl.isContextLost()?requestAnimationFrame(u):C.initializeGLPlot()?C.plot.apply(C,C.plotArgs):m.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(u)};var B=["xaxis","yaxis","zaxis"];b.plot=function(C,u,F){this.plotArgs=[C,u,F];if(!this.glplot.contextLost){var H,J,I=u[this.id];F=F[this.id];this.fullLayout=u;this.fullSceneLayout=I;this.axesOptions.merge(u,
I);this.spikeOptions.merge(I);this.setViewport(I);this.updateFx(I.dragmode,I.hovermode);this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d;this.glplot.setClearColor(g(I.bgcolor));this.setConvert(E);C?Array.isArray(C)||(C=[C]):C=[];var M=[[Infinity,Infinity,Infinity],[-Infinity,-Infinity,-Infinity]];for(H=0;H<C.length;++H){var E=C[H];!0===E.visible&&0!==E._length&&n(this,E,M)}p(this,M);var L=[1,1,1];for(J=0;3>J;++J)L[J]=M[1][J]===M[0][J]?1:1/(M[1][J]-M[0][J]);this.dataScale=L;this.convertAnnotations(this);
for(H=0;H<C.length;++H)E=C[H],!0===E.visible&&0!==E._length&&((M=this.traces[E.uid])?M.data.type===E.type?M.update(E):(M.dispose(),M=E._module.plot(this,E),this.traces[E.uid]=M):(M=E._module.plot(this,E),this.traces[E.uid]=M),M.name=E.name);E=Object.keys(this.traces);H=0;a:for(;H<E.length;++H){for(J=0;J<C.length;++J)if(C[J].uid===E[H]&&!0===C[J].visible&&0!==C[J]._length)continue a;M=this.traces[E[H]];M.dispose();delete this.traces[E[H]]}this.glplot.objects.sort(function(Z,aa){return Z._trace.data.index-
aa._trace.data.index});M=[[0,0,0],[0,0,0]];C={};for(H=0;3>H;++H){E=I[B[H]];J=E.type;J in C?(C[J].acc*=L[H],C[J].count+=1):C[J]={acc:L[H],count:1};if(E.autorange){M[0][H]=Infinity;M[1][H]=-Infinity;var P=this.glplot.objects,N=this.fullSceneLayout.annotations||[],Q=E._name.charAt(0);for(J=0;J<P.length;J++){var O=P[J],T=O.bounds,V=O._trace.data._pad||0;M[0][H]="ErrorBars"===O.constructor.name&&E._lowerLogErrorBound?Math.min(M[0][H],E._lowerLogErrorBound):Math.min(M[0][H],T[0][H]/L[H]-V);M[1][H]=Math.max(M[1][H],
T[1][H]/L[H]+V)}for(J=0;J<N.length;J++)P=N[J],P.visible&&(P=E.r2l(P[Q]),M[0][H]=Math.min(M[0][H],P),M[1][H]=Math.max(M[1][H],P));"rangemode"in E&&"tozero"===E.rangemode&&(M[0][H]=Math.min(M[0][H],0),M[1][H]=Math.max(M[1][H],0));M[0][H]>M[1][H]?(M[0][H]=-1,M[1][H]=1):(J=M[1][H]-M[0][H],M[0][H]-=J/32,M[1][H]+=J/32);"reversed"===E.autorange&&(E=M[0][H],M[0][H]=M[1][H],M[1][H]=E)}else J=E.range,M[0][H]=E.r2l(J[0]),M[1][H]=E.r2l(J[1]);M[0][H]===M[1][H]&&(--M[0][H],M[1][H]+=1);this.glplot.setBounds(H,{min:M[0][H]*
L[H],max:M[1][H]*L[H]})}M=I.aspectmode;if("cube"===M)H=[1,1,1];else if("manual"===M)H=I.aspectratio,H=[H.x,H.y,H.z];else if("auto"===M||"data"===M){N=[1,1,1];for(H=0;3>H;++H)E=I[B[H]],J=E.type,E=C[J],N[H]=Math.pow(E.acc,1/E.count)/L[H];H="data"===M?N:4>=Math.max.apply(null,N)/Math.min.apply(null,N)?N:[1,1,1]}else throw Error("scene.js aspectRatio was not one of the enumerated types");I.aspectratio.x=F.aspectratio.x=H[0];I.aspectratio.y=F.aspectratio.y=H[1];I.aspectratio.z=F.aspectratio.z=H[2];this.glplot.setAspectratio(I.aspectratio);
this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:I.aspectratio.x,y:I.aspectratio.y,z:I.aspectratio.z});this.viewInitial.aspectmode||(this.viewInitial.aspectmode=I.aspectmode);I=I.domain||null;u=u._size||null;I&&u&&(F=this.container.style,F.position="absolute",F.left=u.l+I.x[0]*u.w+"px",F.top=u.t+(1-I.y[1])*u.h+"px",F.width=u.w*(I.x[1]-I.x[0])+"px",F.height=u.h*(I.y[1]-I.y[0])+"px");this.glplot.redraw()}};b.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",
this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)};b.getCamera=function(){this.camera.view.recalcMatrix(this.camera.view.lastT());var C=this.camera;return{up:{x:C.up[0],y:C.up[1],z:C.up[2]},center:{x:C.center[0],y:C.center[1],z:C.center[2]},eye:{x:C.eye[0],y:C.eye[1],z:C.eye[2]},projection:{type:!0===C._ortho?"orthographic":"perspective"}}};b.setViewport=function(C){var u=C.camera;this.camera.lookAt.apply(this,
[[u.eye.x,u.eye.y,u.eye.z],[u.center.x,u.center.y,u.center.z],[u.up.x,u.up.y,u.up.z]]);this.glplot.setAspectratio(C.aspectratio);"orthographic"===u.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())};b.isCameraChanged=function(C){var u=this.getCamera();C=m.nestedProperty(C,this.id+".camera").get();var F=!1;if(void 0===C)F=!0;else{for(var H=0;3>H;H++)for(var J=0;3>J;J++){var I=["up","center","eye"],M=["x","y","z"];if(!C[I[H]]||
u[I[H]][M[J]]!==C[I[H]][M[J]]){F=!0;break}}if(!C.projection||u.projection&&u.projection.type!==C.projection.type)F=!0}return F};b.isAspectChanged=function(C){var u=this.glplot.getAspectratio();C=m.nestedProperty(C,this.id+".aspectratio").get();return void 0===C||C.x!==u.x||C.y!==u.y||C.z!==u.z};b.saveLayout=function(C){var u=this.fullLayout,F=this.isCameraChanged(C),H=this.isAspectChanged(C),J=F||H;if(J){var I={};if(F){var M=this.getCamera();var E=m.nestedProperty(C,this.id+".camera");var L=E.get();
I[this.id+".camera"]=L}if(H){var P=this.glplot.getAspectratio();var N=m.nestedProperty(C,this.id+".aspectratio");L=N.get();I[this.id+".aspectratio"]=L}l.call("_storeDirectGUIEdit",C,u._preGUI,I);F&&(E.set(M),m.nestedProperty(u,this.id+".camera").set(M));H&&(N.set(P),m.nestedProperty(u,this.id+".aspectratio").set(P),this.glplot.redraw())}return J};b.updateFx=function(C,u){var F=this.camera;if(F)if("orbit"===C)F.mode="orbit",F.keyBindingMode="rotate";else if("turntable"===C){F.up=[0,0,1];F.mode="turntable";
F.keyBindingMode="rotate";var H=this.graphDiv;C=H._fullLayout;F=this.fullSceneLayout.camera;var J=F.up.x,I=F.up.y,M=F.up.z;.999>M/Math.sqrt(J*J+I*I+M*M)&&(J=this.id+".camera.up",I={x:0,y:0,z:1},M={},M[J]=I,H=H.layout,l.call("_storeDirectGUIEdit",H,C._preGUI,M),F.up=I,m.nestedProperty(H,J).set(I))}else F.keyBindingMode=C;this.fullSceneLayout.hovermode=u};b.toImage=function(C){C||(C="png");this.staticMode&&this.container.appendChild(z);this.glplot.redraw();var u=this.glplot.gl,F=u.drawingBufferWidth,
H=u.drawingBufferHeight;u.bindFramebuffer(u.FRAMEBUFFER,null);var J=new Uint8Array(F*H*4);u.readPixels(0,0,F,H,u.RGBA,u.UNSIGNED_BYTE,J);u=0;for(var I=H-1;u<I;++u,--I)for(var M=0;M<F;++M)for(var E=0;4>E;++E){var L=4*(F*u+M)+E,P=4*(F*I+M)+E,N=J[L];J[L]=J[P];J[P]=N}for(u=0;u<H;++u)for(I=0;I<F;++I)if(M=4*(F*u+I),E=J[M+3],0<E)for(E=255/E,L=0;3>L;++L)J[M+L]=Math.min(E*J[M+L],255);u=document.createElement("canvas");u.width=F;u.height=H;I=u.getContext("2d");F=I.createImageData(F,H);F.data.set(J);I.putImageData(F,
0,0);switch(C){case "jpeg":C=u.toDataURL("image/jpeg");break;case "webp":C=u.toDataURL("image/webp");break;default:C=u.toDataURL("image/png")}this.staticMode&&this.container.removeChild(z);return C};b.setConvert=function(){for(var C=0;3>C;C++){var u=this.fullSceneLayout[B[C]];c.setConvert(u,this.fullLayout);u.setScale=m.noop}};b.make4thDimension=function(){var C=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};c.setConvert(this._mockAxis,C)};D.exports=
r},{"../../components/fx":655,"../../lib":749,"../../lib/show_no_webgl_msg":770,"../../lib/str2rgbarray":772,"../../plots/cartesian/axes":797,"../../registry":880,"./layout/convert":843,"./layout/spikes":846,"./layout/tick_marks":847,"./project":848,"gl-plot3d":301,"has-passive-events":415,"is-mobile":441,"webgl-context":578}],850:[function(b,D,G){D.exports=function(r,n,p,k){k=k||r.length;for(var a=Array(k),e=0;e<k;e++)a[e]=[r[e],n[e],p[e]];return a}},{}],851:[function(b,D,G){G=b("./font_attributes");
var r=b("./animation_attributes"),n=b("../components/color/attributes"),p=b("../components/shapes/draw_newshape/attributes"),k=b("./pad_attributes");b=b("../lib/extend").extendFlat;var a=G({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif';a.size.dflt=12;a.color.dflt=n.defaultLine;D.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:G({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},
yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:b(k({editType:"layoutstyle"}),{}),editType:"layoutstyle"},
uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",
min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:n.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:n.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:n.defaults,editType:"calc"},
datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},
newshape:p.newshape,activeshape:p.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:b({},r.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:G({editType:"layoutstyle"})}}},{"../components/color/attributes":614,"../components/shapes/draw_newshape/attributes":697,"../lib/extend":739,"./animation_attributes":792,"./font_attributes":825,"./pad_attributes":859}],852:[function(b,D,G){b={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",
attribution:'\x3ca href\x3d"http://www.openstreetmap.org/about/" target\x3d"_blank"\x3e© OpenStreetMap\x3c/a\x3e',tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",
version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:'\x3ca href\x3d"https://carto.com/" target\x3d"_blank"\x3e© CARTO\x3c/a\x3e',tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:'\x3ca href\x3d"https://carto.com/" target\x3d"_blank"\x3e© CARTO\x3c/a\x3e',
tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://www.openstreetmap.org/copyright"\x3eODbL\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:'Map tiles by \x3ca href\x3d"http://stamen.com"\x3eStamen Design\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by/3.0"\x3eCC BY 3.0\x3c/a\x3e | Data by \x3ca href\x3d"http://openstreetmap.org"\x3eOpenStreetMap\x3c/a\x3e, under \x3ca href\x3d"http://creativecommons.org/licenses/by-sa/3.0"\x3eCC BY SA\x3c/a\x3e.',
tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}};G=Object.keys(b);D.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:"basic streets outdoors light dark satellite satellite-streets".split(" "),styleValueDflt:"basic",stylesNonMapbox:b,styleValuesNonMapbox:G,traceLayerPrefix:"plotly-trace-layer-",
layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:"Your custom plotly.js bundle is not using the correct mapbox-gl version\nPlease install mapbox-gl@1.10.1.",noAccessTokenErrorMsg:"Missing Mapbox access token.\nMapbox trace type require a Mapbox access token to be registered.\nFor example:\n  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });\nMore info here: https://www.mapbox.com/help/define-access-token/",missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",
G.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:"Set multiple mapbox access token across different mapbox subplot,\nusing first token found as mapbox-gl does not allow multipleaccess tokens on the same page.",mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",
path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",
polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;",
"ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3Csvg viewBox\x3d"0 0 20 20" xmlns\x3d"http://www.w3.org/2000/svg"%3E %3Cpath fill\x3d"%23333333" fill-rule\x3d"evenodd" d\x3d"M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',
"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left \x3e .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px",
"ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset\x3dutf-8,%3C?xml version\x3d"1.0" encoding\x3d"utf-8"?%3E %3Csvg version\x3d"1.1" id\x3d"Layer_1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" x\x3d"0px" y\x3d"0px" viewBox\x3d"0 0 21 21" style\x3d"enable-background:new 0 0 21 21;" xml:space\x3d"preserve"%3E%3Cg transform\x3d"translate(0,0.01)"%3E%3Cpath d\x3d"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3Cpath d\x3d"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpath d\x3d"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style\x3d"opacity:0.35;enable-background:new" class\x3d"st1"/%3E%3Cpolygon points\x3d"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style\x3d"opacity:0.9;fill:%23ffffff;enable-background:new" class\x3d"st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},
{}],853:[function(b,D,G){var r=b("../../lib");D.exports=function(n,p){var k=n.split(" ");n=k[0];k=k[1];var a=r.isArrayOrTypedArray(p)?r.mean(p):p;p=.5+a/100;a=1.5+a/100;var e=["",""],f=[0,0];switch(n){case "top":e[0]="top";f[1]=-a;break;case "bottom":e[0]="bottom",f[1]=a}switch(k){case "left":e[1]="right";f[0]=-p;break;case "right":e[1]="left",f[0]=p}return{anchor:e[0]&&e[1]?e.join("-"):e[0]?e[0]:e[1]?e[1]:"center",offset:f}}},{"../../lib":749}],854:[function(b,D,G){function r(d){return"string"===
typeof d&&(-1!==c.styleValuesMapbox.indexOf(d)||0===d.indexOf("mapbox://"))}var n=b("mapbox-gl"),p=b("../../lib"),k=b("../../plots/get_data").getSubplotCalcData,a=b("../../constants/xmlns_namespaces"),e=b("d3"),f=b("../../components/drawing"),l=b("../../lib/svg_text_utils"),m=b("./mapbox"),c=G.constants=b("./constants");G.name="mapbox";G.attr="subplot";G.idRoot="mapbox";G.idRegex=G.attrRegex=p.counterRegex("mapbox");G.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}};G.layoutAttributes=
b("./layout_attributes");G.supplyLayoutDefaults=b("./layout_defaults");G.plot=function(d){var g=d._fullLayout,h=d.calcdata,q=g._subplots.mapbox;if(n.version!==c.requiredVersion)throw Error(c.wrongVersionErrorMsg);var t=d._fullLayout;if(""===d._context.mapboxAccessToken)t="";else{for(var v=[],w=[],A=!1,z=!1,y=0;y<q.length;y++){var B=t[q[y]],C=B.accesstoken;r(B.style)&&(C?p.pushUnique(v,C):(r(B._input.style)&&(p.error("Uses Mapbox map style, but did not set an access token."),A=!0),z=!0));C&&p.pushUnique(w,
C)}if(z)throw d=A?c.noAccessTokenErrorMsg:c.missingStyleErrorMsg,p.error(d),Error(d);v.length?(1<v.length&&p.warn(c.multipleTokensErrorMsg),t=v[0]):(w.length&&p.log(["Listed mapbox access token(s)",w.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),t="")}n.accessToken=t;for(t=0;t<q.length;t++)v=q[t],w=k(h,"mapbox",v),A=g[v],z=A._subplot,z||(z=new m(d,v),g[v]._subplot=z),z.viewInitial||(z.viewInitial={center:p.extendFlat({},A.center),zoom:A.zoom,bearing:A.bearing,pitch:A.pitch}),
z.plot(w,g,d._promises)};G.clean=function(d,g,h,q){d=q._subplots.mapbox||[];for(h=0;h<d.length;h++){var t=d[h];!g[t]&&q[t]._subplot&&q[t]._subplot.destroy()}};G.toSVG=function(d){for(var g=d._fullLayout,h=g._subplots.mapbox,q=g._size,t=0;t<h.length;t++){var v=g[h[t]],w=v.domain,A=v._subplot.toImage("png");g._glimages.append("svg:image").attr({xmlns:a.svg,"xlink:href":A,x:q.l+q.w*w.x[0],y:q.t+q.h*(1-w.y[1]),width:q.w*(w.x[1]-w.x[0]),height:q.h*(w.y[1]-w.y[0]),preserveAspectRatio:"none"});v=e.select(v._subplot.div);
null!==v.select(".mapboxgl-ctrl-logo").node().offsetParent&&(A=g._glimages.append("g"),A.attr("transform","translate("+(q.l+q.w*w.x[0]+10)+", "+(q.t+q.h*(1-w.y[0])-31)+")"),A.append("path").attr("d",c.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),A.append("path").attr("d",c.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),A.append("path").attr("d",c.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),A.append("polygon").attr("points",
c.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"}));var z=v.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map","");v=g._glimages.append("g");var y=v.append("text");y.text(z).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":z});var B=f.bBox(y.node());A=q.w*(w.x[1]-w.x[0]);B.width>A/2&&(B=z.split("|").join("\x3cbr\x3e"),y.text(B).attr("data-unformatted",B).call(l.convertToTspans,
d),B=f.bBox(y.node()));y.attr("transform","translate(-3, "+(-B.height+8)+")");v.insert("rect",".static-attribution").attr({x:-B.width-6,y:-B.height-3,width:B.width+6,height:B.height+3,fill:"rgba(255, 255, 255, 0.75)"});y=1;B.width+6>A&&(y=A/(B.width+6));w=[q.l+q.w*w.x[1],q.t+q.h*(1-w.y[0])];v.attr("transform","translate("+w[0]+","+w[1]+") scale("+y+")")}};G.updateFx=function(d){d=d._fullLayout;for(var g=d._subplots.mapbox,h=0;h<g.length;h++)d[g[h]]._subplot.updateFx(d)}},{"../../components/drawing":637,
"../../constants/xmlns_namespaces":725,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/get_data":834,"./constants":852,"./layout_attributes":856,"./layout_defaults":857,"./mapbox":858,d3:169,"mapbox-gl":447}],855:[function(b,D,G){function r(l,m){this.subplot=l;this.uid=l.uid+"-"+m;this.index=m;this.idSource="source-"+this.uid;this.idLayer=f.layoutLayerPrefix+this.uid;this.below=this.layerType=this.source=this.sourceType=null;this.visible=!1}function n(l){if(!l.visible)return!1;l=l.source;
if(Array.isArray(l)&&0<l.length){for(var m=0;m<l.length;m++)if("string"!==typeof l[m]||0===l[m].length)return!1;return!0}return k.isPlainObject(l)||"string"===typeof l&&0<l.length}function p(l){var m={},c={};switch(l.type){case "circle":k.extendFlat(c,{"circle-radius":l.circle.radius,"circle-color":l.color,"circle-opacity":l.opacity});break;case "line":k.extendFlat(c,{"line-width":l.line.width,"line-color":l.color,"line-opacity":l.opacity,"line-dasharray":l.line.dash});break;case "fill":k.extendFlat(c,
{"fill-color":l.color,"fill-outline-color":l.fill.outlinecolor,"fill-opacity":l.opacity});break;case "symbol":var d=l.symbol,g=e(d.textposition,d.iconsize);k.extendFlat(m,{"icon-image":d.icon+"-15","icon-size":d.iconsize/10,"text-field":d.text,"text-size":d.textfont.size,"text-anchor":g.anchor,"text-offset":g.offset,"symbol-placement":d.placement});k.extendFlat(c,{"icon-color":l.color,"text-color":d.textfont.color,"text-opacity":l.opacity});break;case "raster":k.extendFlat(c,{"raster-fade-duration":0,
"raster-opacity":l.opacity})}return{layout:m,paint:c}}var k=b("../../lib"),a=b("../../lib/svg_text_utils").sanitizeHTML,e=b("./convert_text_opts"),f=b("./constants");b=r.prototype;b.update=function(l){this.visible?this.needsNewImage(l)?this.updateImage(l):this.needsNewSource(l)?(this.removeLayer(),this.updateSource(l),this.updateLayer(l)):this.needsNewLayer(l)?this.updateLayer(l):this.updateStyle(l):(this.updateSource(l),this.updateLayer(l));this.visible=n(l)};b.needsNewImage=function(l){return this.subplot.map.getSource(this.idSource)&&
"image"===this.sourceType&&"image"===l.sourcetype&&(this.source!==l.source||JSON.stringify(this.coordinates)!==JSON.stringify(l.coordinates))};b.needsNewSource=function(l){return this.sourceType!==l.sourcetype||this.source!==l.source||this.layerType!==l.type};b.needsNewLayer=function(l){return this.layerType!==l.type||this.below!==this.subplot.belowLookup["layout-"+this.index]};b.updateImage=function(l){this.subplot.map.getSource(this.idSource).updateImage({url:l.source,coordinates:l.coordinates})};
b.updateSource=function(l){var m=this.subplot.map;m.getSource(this.idSource)&&m.removeSource(this.idSource);this.sourceType=l.sourcetype;this.source=l.source;if(n(l)){var c=l.sourcetype,d=l.source,g={type:c};if("geojson"===c)var h="data";else"vector"===c?h="string"===typeof d?"url":"tiles":"raster"===c?(h="tiles",g.tileSize=256):"image"===c&&(h="url",g.coordinates=l.coordinates);g[h]=d;l.sourceattribution&&(g.attribution=a(l.sourceattribution));m.addSource(this.idSource,g)}};b.updateLayer=function(l){var m=
this.subplot,c=p(l),d=this.subplot.belowLookup["layout-"+this.index];if("traces"===d)for(var g=m.getMapLayers(),h=0;h<g.length;h++){var q=g[h].id;if("string"===typeof q&&0===q.indexOf(f.traceLayerPrefix)){var t=q;break}}else t=d;this.removeLayer();n(l)&&m.addLayer({id:this.idLayer,source:this.idSource,"source-layer":l.sourcelayer||"",type:l.type,minzoom:l.minzoom,maxzoom:l.maxzoom,layout:c.layout,paint:c.paint},t);this.layerType=l.type;this.below=d};b.updateStyle=function(l){n(l)&&(l=p(l),this.subplot.setOptions(this.idLayer,
"setLayoutProperty",l.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",l.paint))};b.removeLayer=function(){var l=this.subplot.map;l.getLayer(this.idLayer)&&l.removeLayer(this.idLayer)};b.dispose=function(){var l=this.subplot.map;l.getLayer(this.idLayer)&&l.removeLayer(this.idLayer);l.getSource(this.idSource)&&l.removeSource(this.idSource)};D.exports=function(l,m,c){l=new r(l,m);l.update(c);return l}},{"../../lib":749,"../../lib/svg_text_utils":773,"./constants":852,"./convert_text_opts":853}],
856:[function(b,D,G){G=b("../../lib");var r=b("../../components/color").defaultLine,n=b("../domain").attributes,p=b("../font_attributes"),k=b("../../traces/scatter/attributes").textposition,a=b("../../plot_api/edit_types").overrideAll,e=b("../../plot_api/plot_template").templatedArray;b=b("./constants");p=p({});p.family.dflt="Open Sans Regular, Arial Unicode MS Regular";(D.exports=a({_arrayAttrRegexps:[G.counterRegex("mapbox",".layers",!0)],domain:n({name:"mapbox"}),accesstoken:{valType:"string",
noBlank:!0,strict:!0},style:{valType:"any",values:b.styleValuesMapbox.concat(b.styleValuesNonMapbox),dflt:b.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:e("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},
type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:r},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:r}},symbol:{icon:{valType:"string",
dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:p,textposition:G.extendFlat({},k,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":615,"../../lib":749,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../traces/scatter/attributes":1155,"../domain":824,"../font_attributes":825,"./constants":852}],
857:[function(b,D,G){function r(f,l,m,c){m("accesstoken",c.accessToken);m("style");m("center.lon");m("center.lat");m("zoom");m("bearing");m("pitch");a(f,l,{name:"layers",handleItemDefaults:n});l._input=f}function n(f,l){function m(h,q){return p.coerce(f,l,e.layers,h,q)}if(m("visible")){var c=m("sourcetype"),d="raster"===c||"image"===c;m("source");m("sourceattribution");"vector"===c&&m("sourcelayer");"image"===c&&m("coordinates");var g;d&&(g="raster");c=m("type",g);d&&"raster"!==c&&(c=l.type="raster",
p.log("Source types *raster* and *image* must drawn *raster* layer type."));m("below");m("color");m("opacity");m("minzoom");m("maxzoom");"circle"===c&&m("circle.radius");"line"===c&&(m("line.width"),m("line.dash"));"fill"===c&&m("fill.outlinecolor");"symbol"===c&&(m("symbol.icon"),m("symbol.iconsize"),m("symbol.text"),p.coerceFont(m,"symbol.textfont"),m("symbol.textposition"),m("symbol.placement"))}}var p=b("../../lib"),k=b("../subplot_defaults"),a=b("../array_container_defaults"),e=b("./layout_attributes");
D.exports=function(f,l,m){k(f,l,m,{type:"mapbox",attributes:e,handleDefaults:r,partition:"y",accessToken:l._mapboxAccessToken})}},{"../../lib":749,"../array_container_defaults":793,"../subplot_defaults":874,"./layout_attributes":856}],858:[function(b,D,G){function r(B,C){this.id=C;this.gd=B;C=B._fullLayout;B=B._context;this.container=C._glcontainer.node();this.isStatic=B.staticPlot;this.uid=C._uid+"-"+this.id;this.yaxis=this.xaxis=this.div=null;this.createFramework(C);this.styleObj=this.accessToken=
this.map=null;this.traceHash={};this.layerList=[];this.belowLookup={};this.wheeling=this.dragging=!1}function n(B){var C={};a.isPlainObject(B)?(C.id=B.id,C.style=B):"string"===typeof B?(C.id=B,-1!==A.styleValuesMapbox.indexOf(B)?C.style=A.styleUrlPrefix+B+"-"+A.styleUrlSuffix:C.style=A.stylesNonMapbox[B]?A.stylesNonMapbox[B]:B):(C.id=A.styleValueDflt,C.style=A.styleUrlPrefix+A.styleValueDflt+"-"+A.styleUrlSuffix);C.transition={duration:0,delay:0};return C}function p(B){return[B.lon,B.lat]}var k=b("mapbox-gl"),
a=b("../../lib"),e=b("../../lib/geo_location_utils"),f=b("../../registry"),l=b("../cartesian/axes"),m=b("../../components/dragelement"),c=b("../../components/fx");G=b("../../components/dragelement/helpers");var d=G.rectMode,g=G.drawMode,h=G.selectMode,q=b("../cartesian/select").prepSelect,t=b("../cartesian/select").clearSelect,v=b("../cartesian/select").clearSelectionsCache,w=b("../cartesian/select").selectOnClick,A=b("./constants"),z=b("./layers");b=r.prototype;b.plot=function(B,C,u){var F=this,
H=C[F.id];F.map&&H.accesstoken!==F.accessToken&&(F.map.remove(),F.map=null,F.styleObj=null,F.traceHash={},F.layerList=[]);H=F.map?new Promise(function(J,I){F.updateMap(B,C,J,I)}):new Promise(function(J,I){F.createMap(B,C,J,I)});u.push(H)};b.createMap=function(B,C,u,F){var H=this,J=C[H.id],I=H.styleObj=n(J.style);H.accessToken=J.accesstoken;var M=H.map=(new k.Map({container:H.div,style:I.style,center:p(J.center),zoom:J.zoom,bearing:J.bearing,pitch:J.pitch,interactive:!H.isStatic,preserveDrawingBuffer:H.isStatic,
doubleClickZoom:!1,boxZoom:!1,attributionControl:!1})).addControl(new k.AttributionControl({compact:!0}));M._canvas.style.left="0px";M._canvas.style.top="0px";H.rejectOnError(F);H.isStatic||H.initFx(B,C);J=[];J.push(new Promise(function(E){M.once("load",E)}));J=J.concat(e.fetchTraceGeoData(B));Promise.all(J).then(function(){H.fillBelowLookup(B,C);H.updateData(B);H.updateLayout(C);H.resolveOnRender(u)}).catch(F)};b.updateMap=function(B,C,u,F){var H=this,J=H.map,I=C[this.id];H.rejectOnError(F);var M=
[];I=n(I.style);JSON.stringify(H.styleObj)!==JSON.stringify(I)&&(H.styleObj=I,J.setStyle(I.style),H.traceHash={},M.push(new Promise(function(E){J.once("styledata",E)})));M=M.concat(e.fetchTraceGeoData(B));Promise.all(M).then(function(){H.fillBelowLookup(B,C);H.updateData(B);H.updateLayout(C);H.resolveOnRender(u)}).catch(F)};b.fillBelowLookup=function(B,C){var u=C[this.id].layers,F,H=this.belowLookup={},J=!1;for(C=0;C<B.length;C++){var I=B[C][0].trace,M=I._module;"string"===typeof I.below?F=I.below:
M.getBelow&&(F=M.getBelow(I,this));""===F&&(J=!0);H["trace-"+I.uid]=F||""}for(C=0;C<u.length;C++)F=u[C],F="string"===typeof F.below?F.below:J?"traces":"",H["layout-"+C]=F;B={};for(var E in H)F=H[E],B[F]?B[F].push(E):B[F]=[E];for(F in B)if(H=B[F],1<H.length)for(C=0;C<H.length;C++)E=H[C],0===E.indexOf("trace-")?(E=E.split("trace-")[1],this.traceHash[E]&&(this.traceHash[E].below=null)):0===E.indexOf("layout-")&&(E=E.split("layout-")[1],this.layerList[E]&&(this.layerList[E].below=null))};var y={choroplethmapbox:0,
densitymapbox:1,scattermapbox:2};b.updateData=function(B){var C=this.traceHash,u,F=B.slice().sort(function(E,L){return y[E[0].trace.type]-y[L[0].trace.type]});for(u=0;u<F.length;u++){var H=F[u];var J=H[0].trace;var I=C[J.uid];var M=!1;I&&(I.type===J.type?(I.update(H),M=!0):I.dispose());!M&&J._module&&(C[J.uid]=J._module.plot(this,H))}F=Object.keys(C);u=0;a:for(;u<F.length;u++){H=F[u];for(I=0;I<B.length;I++)if(J=B[I][0].trace,H===J.uid)continue a;I=C[H];I.dispose();delete C[H]}};b.updateLayout=function(B){var C=
this.map,u=B[this.id];this.dragging||this.wheeling||(C.setCenter(p(u.center)),C.setZoom(u.zoom),C.setBearing(u.bearing),C.setPitch(u.pitch));this.updateLayers(B);this.updateFramework(B);this.updateFx(B);this.map.resize();this.gd._context._scrollZoom.mapbox?C.scrollZoom.enable():C.scrollZoom.disable()};b.resolveOnRender=function(B){var C=this.map;C.on("render",function F(){C.loaded()&&(C.off("render",F),setTimeout(B,10))})};b.rejectOnError=function(B){function C(){B(Error(A.mapOnErrorMsg))}var u=this.map;
u.once("error",C);u.once("style.error",C);u.once("source.error",C);u.once("tile.error",C);u.once("layer.error",C)};b.createFramework=function(B){var C=this,u=C.div=document.createElement("div");u.id=C.uid;u.style.position="absolute";C.container.appendChild(u);C.xaxis={_id:"x",c2p:function(F){return C.project(F).x}};C.yaxis={_id:"y",c2p:function(F){return C.project(F).y}};C.updateFramework(B);C.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"};l.setConvert(C.mockAxis,B)};b.initFx=function(B,
C){function u(){c.loneUnhover(C._hoverlayer)}function F(){var M=H.getView();J.emit("plotly_relayouting",H.getViewEditsWithDerived(M))}var H=this,J=H.gd,I=H.map;I.on("moveend",function(M){if(H.map){var E=J._fullLayout;if(M.originalEvent||H.wheeling){var L=E[H.id];f.call("_storeDirectGUIEdit",J.layout,E._preGUI,H.getViewEdits(L));var P=H.getView();L._input.center=L.center=P.center;L._input.zoom=L.zoom=P.zoom;L._input.bearing=L.bearing=P.bearing;L._input.pitch=L.pitch=P.pitch;J.emit("plotly_relayout",
H.getViewEditsWithDerived(P))}M.originalEvent&&"mouseup"===M.originalEvent.type?H.dragging=!1:H.wheeling&&(H.wheeling=!1);E._rehover&&E._rehover()}});I.on("wheel",function(){H.wheeling=!0});I.on("mousemove",function(M){var E=H.div.getBoundingClientRect();M.clientX=M.point.x+E.left;M.clientY=M.point.y+E.top;M.target.getBoundingClientRect=function(){return E};H.xaxis.p2c=function(){return M.lngLat.lng};H.yaxis.p2c=function(){return M.lngLat.lat};J._fullLayout._rehover=function(){J._fullLayout._hoversubplot===
H.id&&J._fullLayout[H.id]&&c.hover(J,M,H.id)};c.hover(J,M,H.id);J._fullLayout._hoversubplot=H.id});I.on("dragstart",function(){H.dragging=!0;u()});I.on("zoomstart",u);I.on("mouseout",function(){J._fullLayout._hoversubplot=null});I.on("drag",F);I.on("zoom",F);I.on("dblclick",function(){var M=J._fullLayout[H.id];f.call("_storeDirectGUIEdit",J.layout,J._fullLayout._preGUI,H.getViewEdits(M));var E=H.viewInitial;I.setCenter(p(E.center));I.setZoom(E.zoom);I.setBearing(E.bearing);I.setPitch(E.pitch);E=H.getView();
M._input.center=M.center=E.center;M._input.zoom=M.zoom=E.zoom;M._input.bearing=M.bearing=E.bearing;M._input.pitch=M.pitch=E.pitch;J.emit("plotly_doubleclick",null);J.emit("plotly_relayout",H.getViewEditsWithDerived(E))});H.clearSelect=function(){v(H.dragOptions);t(H.dragOptions.gd)};H.onClickInPanFn=function(M){return function(E){var L=J._fullLayout.clickmode;-1<L.indexOf("select")&&w(E.originalEvent,J,[H.xaxis],[H.yaxis],H.id,M);-1<L.indexOf("event")&&c.click(J,E.originalEvent)}}};b.updateFx=function(B){function C(M){M=
u.map.unproject(M);return[M.lng,M.lat]}var u=this,F=u.map,H=u.gd;if(!u.isStatic){var J=B.dragmode;var I=d(J)?function(M,E){(M.range={})[u.id]=[C([E.xmin,E.ymin]),C([E.xmax,E.ymax])]}:function(M,E,L){(M.lassoPoints={})[u.id]=L.filtered.map(C)};u.dragOptions=a.extendDeep(u.dragOptions||{},{dragmode:B.dragmode,element:u.div,gd:H,plotinfo:{id:u.id,domain:B[u.id].domain,xaxis:u.xaxis,yaxis:u.yaxis,fillRangeItems:I},xaxes:[u.xaxis],yaxes:[u.yaxis],subplot:u.id});F.off("click",u.onClickInPanHandler);h(J)||
g(J)?(F.dragPan.disable(),F.on("zoomstart",u.clearSelect),u.dragOptions.prepFn=function(M,E,L){q(M,E,L,u.dragOptions,J)},m.init(u.dragOptions)):(F.dragPan.enable(),F.off("zoomstart",u.clearSelect),u.div.onmousedown=null,u.onClickInPanHandler=u.onClickInPanFn(u.dragOptions),F.on("click",u.onClickInPanHandler))}};b.updateFramework=function(B){var C=B[this.id].domain;B=B._size;var u=this.div.style;u.width=B.w*(C.x[1]-C.x[0])+"px";u.height=B.h*(C.y[1]-C.y[0])+"px";u.left=B.l+C.x[0]*B.w+"px";u.top=B.t+
(1-C.y[1])*B.h+"px";this.xaxis._offset=B.l+C.x[0]*B.w;this.xaxis._length=B.w*(C.x[1]-C.x[0]);this.yaxis._offset=B.t+(1-C.y[1])*B.h;this.yaxis._length=B.h*(C.y[1]-C.y[0])};b.updateLayers=function(B){B=B[this.id].layers;var C=this.layerList,u;if(B.length!==C.length){for(u=0;u<C.length;u++)C[u].dispose();C=this.layerList=[];for(u=0;u<B.length;u++)C.push(z(this,u,B[u]))}else for(u=0;u<B.length;u++)C[u].update(B[u])};b.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))};
b.toImage=function(){this.map.stop();return this.map.getCanvas().toDataURL()};b.setOptions=function(B,C,u){for(var F in u)this.map[C](B,F,u[F])};b.getMapLayers=function(){return this.map.getStyle().layers};b.addLayer=function(B,C){var u=this.map;if("string"===typeof C){if(""===C){u.addLayer(B,C);return}for(var F=this.getMapLayers(),H=0;H<F.length;H++)if(C===F[H].id){u.addLayer(B,C);return}a.warn(["Trying to add layer with *below* value",C,"referencing a layer that does not exist or that does not yet exist."].join(" "))}u.addLayer(B)};
b.project=function(B){return this.map.project(new k.LngLat(B[0],B[1]))};b.getView=function(){var B=this.map,C=B.getCenter();C={lon:C.lng,lat:C.lat};var u=B.getCanvas(),F=u.width;u=u.height;return{center:C,zoom:B.getZoom(),bearing:B.getBearing(),pitch:B.getPitch(),_derived:{coordinates:[B.unproject([0,0]).toArray(),B.unproject([F,0]).toArray(),B.unproject([F,u]).toArray(),B.unproject([0,u]).toArray()]}}};b.getViewEdits=function(B){for(var C=this.id,u=["center","zoom","bearing","pitch"],F={},H=0;H<
u.length;H++){var J=u[H];F[C+"."+J]=B[J]}return F};b.getViewEditsWithDerived=function(B){var C=this.id,u=this.getViewEdits(B);u[C+"._derived"]=B._derived;return u};D.exports=r},{"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/fx":655,"../../lib":749,"../../lib/geo_location_utils":742,"../../registry":880,"../cartesian/axes":797,"../cartesian/select":816,"./constants":852,"./layers":855,"mapbox-gl":447}],859:[function(b,D,G){D.exports=function(r){r=r.editType;
return{t:{valType:"number",dflt:0,editType:r},r:{valType:"number",dflt:0,editType:r},b:{valType:"number",dflt:0,editType:r},l:{valType:"number",dflt:0,editType:r},editType:r}}},{}],860:[function(b,D,G){function r(O,T){T.text("");T=T.append("a").attr({"xlink:xlink:href":"#","class":"link--impt link--embedview","font-weight":"bold"}).text(O._context.linkText+" "+String.fromCharCode(187));if(O._context.sendData)T.on("click",function(){M.sendDataToCloud(O)});else{var V=window.location.pathname.split("/"),
Z=window.location.search;T.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+V[2].split(".")[0]+"/"+V[1]+Z})}}function n(O,T){function V(pa,oa){ka[oa]=pa;qa[pa]=1}function Z(pa,oa){if(pa&&"string"===typeof pa&&!qa[pa])return V(pa,oa),!0}var aa=T.length,Y=[],ea;for(ea=0;ea<O.length;ea++){var ca=O[ea]._fullInput;ca!==ba&&Y.push(ca);var ba=ca}O=Y.length;var ka=Array(aa),qa={};for(ea=0;ea<aa;ea++)ba=T[ea].uid,"number"===typeof ba&&(ba=String(ba)),Z(ba,ea)||ea<O&&Z(Y[ea].uid,ea)||V(A.randstr(qa),ea);
return ka}function p(O,T){function V(ka){for(var qa=!0,pa=0;pa<T.length;pa++){var oa=T[pa];Y[oa]||(ka[oa]?Y[oa]=ka[oa]:qa=!1)}qa&&(aa=!0)}var Z=O._context.locale;Z||"en-US"===Z;for(var aa=!1,Y={},ea=0;2>ea;ea++){for(var ca=O._context.locales,ba=0;2>ba;ba++){if(ca=(ca[Z]||{}).format)if(V(ca),aa)break;ca=t.localeRegistry}ba=Z.split("-")[0];if(aa||ba===Z)break;Z=ba}aa||V(t.localeRegistry.en.format);return Y}function k(O){O=O.transforms;if(Array.isArray(O)&&O.length)for(var T=0;T<O.length;T++){var V=
O[T];if((V=V._module||E[V.type])&&V.makesData)return!0}return!1}function a(O,T,V,Z){for(var aa=O.transforms,Y=[O],ea=0;ea<aa.length;ea++){var ca=aa[ea],ba=E[ca.type];ba&&ba.transform&&(Y=ba.transform(Y,{transform:ca,fullTrace:O,fullData:T,layout:V,fullLayout:Z,transformIndex:ea}))}return Y}function e(O){return"string"===typeof O&&"px"===O.substr(O.length-2)&&parseFloat(O)}function f(O){var T=O.margin;O._size||(T=O._size={l:Math.round(T.l),r:Math.round(T.r),t:Math.round(T.t),b:Math.round(T.b),p:Math.round(T.pad)},
T.w=Math.round(O.width)-T.l-T.r,T.h=Math.round(O.height)-T.t-T.b);O._pushmargin||(O._pushmargin={});O._pushmarginIds||(O._pushmarginIds={})}function l(O,T,V){function Z(ca){if(ca)for(;ca.length;)ca.shift()}function aa(ca){if(O._transitionData)return Z(O._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(V.redraw)return t.call("redraw",O)}).then(function(){O._transitioning=!1;O._transitioningWithDuration=!1;O.emit("plotly_transitioned",[])}).then(ca)}var Y=!1,ea=A.syncOrAsync([M.previousPromises,
function(){if(O._transitionData){O._transitioning=!1;var ca=O._transitionData._interruptCallbacks,ba=Promise.resolve();if(ca)for(;ca.length;)ba=ba.then(ca.shift());return ba}},V.prepareFn,M.rehover,function(){O.emit("plotly_transitioning",[]);return new Promise(function(ca){function ba(){ka++;return function(){qa++;Y||qa!==ka||aa(ca)}}O._transitioning=!0;0<T.duration&&(O._transitioningWithDuration=!0);O._transitionData._interruptCallbacks.push(function(){Y=!0});V.redraw&&O._transitionData._interruptCallbacks.push(function(){return t.call("redraw",
O)});O._transitionData._interruptCallbacks.push(function(){O.emit("plotly_transitioninterrupted",[])});var ka=0,qa=0;V.runFn(ba);setTimeout(ba())})}],O);ea&&ea.then||(ea=Promise.resolve());return ea.then(function(){return O})}function m(O,T){function V(gb,bb,La){var kb=bb._id.charAt(0);if("histogram2dcontour"===gb){gb=bb._counterAxes[0];bb=B.getFromId(T,gb);var mb="x"===kb||"x"===gb&&"category"===bb.type,ya="y"===kb||"y"===gb&&"category"===bb.type;return function(Ia,Na){return 0===Ia||0===Na||mb&&
Ia===La[Na].length-1||ya&&Na===La.length-1?-1:("y"===kb?Na:Ia)-1}}return function(Ia,Na){return"y"===kb?Na:Ia}}var Z=[],aa,Y,ea,ca,ba={min:function(gb){return A.aggNums(Math.min,null,gb)},max:function(gb){return A.aggNums(Math.max,null,gb)},sum:function(gb){return A.aggNums(function(bb,La){return bb+La},null,gb)},total:function(gb){return A.aggNums(function(bb,La){return bb+La},null,gb)},mean:function(gb){return A.mean(gb)},median:function(gb){return A.median(gb)}};for(aa=0;aa<O.length;aa++){var ka=
O[aa];if("category"===ka.type&&(Y=ka.categoryorder.match(Q))){var qa=Y[1],pa=Y[2],oa=[];for(Y=0;Y<ka._categories.length;Y++)oa.push([ka._categories[Y],[]]);for(Y=0;Y<ka._traceIndices.length;Y++){var ja=ka._traceIndices[Y];var ra=T._fullData[ja],ha=ka._id.charAt(0);if(!0===ra.visible){var la=ra.type;t.traceIs(ra,"histogram")&&(delete ra._xautoBinFinished,delete ra._yautoBinFinished);var ua=T.calcdata[ja];for(ja=0;ja<ua.length;ja++){var na=ua[ja];if("splom"===la){var wa=ra._axesDim[ka._id];"y"===ha&&
(ea=ra._diag[wa][0])&&(ka=T._fullLayout[B.id2name(ea)]);var Ca=na.trace.dimensions[wa].values;for(ea=0;ea<Ca.length;ea++){var Fa=Ca[ea];var Xa=ka._categoriesMap[Fa];for(ca=0;ca<na.trace.dimensions.length;ca++)ca!==wa&&oa[Xa][1].push(na.trace.dimensions[ca].values[ea])}}else if("scattergl"===la){for(ea=0;ea<na.t.x.length;ea++){if("x"===ha){Xa=Fa=na.t.x[ea];var ab=na.t.y[ea]}"y"===ha&&(Xa=Fa=na.t.y[ea],ab=na.t.x[ea]);oa[Xa][1].push(ab)}na.t&&na.t._scene&&delete na.t._scene.dirty}else if(na.hasOwnProperty("z"))for(ab=
na.z,na=V(ra.type,ka,ab),ea=0;ea<ab.length;ea++)for(ca=0;ca<ab[ea].length;ca++)Xa=na(ca,ea),Xa+1&&oa[Xa][1].push(ab[ea][ca]);else for("x"===ha?(Fa=na.p+1?na.p:na.x,ab=na.s||na.v||na.y):"y"===ha&&(Fa=na.p+1?na.p:na.y,ab=na.s||na.v||na.x),Array.isArray(ab)||(ab=[ab]),ea=0;ea<ab.length;ea++)oa[Fa][1].push(ab[ea])}}}ka._categoriesValue=oa;ra=[];for(Y=0;Y<oa.length;Y++)ra.push([oa[Y][0],ba[qa](oa[Y][1])]);ra.sort(function(gb,bb){return gb[1]-bb[1]});ka._categoriesAggregatedValue=ra;ka._initialCategories=
ra.map(function(gb){return gb[0]});"descending"===pa&&ka._initialCategories.reverse();Z=Z.concat(ka.sortByInitialCategories())}}return Z}function c(O,T,V){var Z={},aa;for(aa=0;aa<O.length;aa++){var Y=O[aa];var ea=Y._id;Y.clearCalc();"multicategory"===Y.type&&Y.setupMultiCategory(T);Z[Y._id]=1}O=V._axisMatchGroups||[];for(aa=0;aa<O.length;aa++)for(ea in O[aa])Z[ea]||(Y=V[B.id2name(ea)],Y.clearCalc())}function d(O){var T=O._fullLayout,V=T._visibleModules,Z={},aa,Y;for(aa=0;aa<V.length;aa++){var ea=
V[aa],ca=ea.crossTraceCalc;ca&&(ea=ea.basePlotModule.name,Z[ea]?A.pushUnique(Z[ea],ca):Z[ea]=[ca])}for(Y in Z)if(ca=Z[Y],ea=T._subplots[Y],Array.isArray(ea))for(V=0;V<ea.length;V++){var ba=ea[V],ka="cartesian"===Y?T._plots[ba]:T[ba];for(aa=0;aa<ca.length;aa++)ca[aa](O,ka,ba)}else for(aa=0;aa<ca.length;aa++)ca[aa](O)}var g=b("d3"),h=b("d3-time-format").timeFormatLocale,q=b("fast-isnumeric"),t=b("../registry"),v=b("../plot_api/plot_schema"),w=b("../plot_api/plot_template"),A=b("../lib"),z=b("../components/color"),
y=b("../constants/numerical").BADNUM,B=b("./cartesian/axis_ids"),C=b("./cartesian/handle_outline").clearSelect,u=b("./animation_attributes"),F=b("./frame_attributes"),H=b("../plots/get_data").getModuleCalcData,J=A.relinkPrivateKeys,I=A._,M=D.exports={};A.extendFlat(M,t);M.attributes=b("./attributes");M.attributes.type.values=M.allTypes;M.fontAttrs=b("./font_attributes");M.layoutAttributes=b("./layout_attributes");M.fontWeight="normal";var E=M.transformsRegistry;b=b("./command");M.executeAPICommand=
b.executeAPICommand;M.computeAPICommandBindings=b.computeAPICommandBindings;M.manageCommandObserver=b.manageCommandObserver;M.hasSimpleAPICommandBindings=b.hasSimpleAPICommandBindings;M.redrawText=function(O){O=A.getGraphDiv(O);var T=O._fullLayout||{};if(T._has&&T._has("polar")||!O.data||!O.data[0]||!O.data[0].r)return new Promise(function(V){setTimeout(function(){t.getComponentMethod("annotations","draw")(O);t.getComponentMethod("legend","draw")(O);t.getComponentMethod("colorbar","draw")(O);V(M.previousPromises(O))},
300)})};M.resize=function(O){O=A.getGraphDiv(O);var T,V=new Promise(function(Z,aa){O&&!A.isHidden(O)||aa(Error("Resize must be passed a displayed plot div element."));O._redrawTimer&&clearTimeout(O._redrawTimer);O._resolveResize&&(T=O._resolveResize);O._resolveResize=Z;O._redrawTimer=setTimeout(function(){if(!O.layout||O.layout.width&&O.layout.height||A.isHidden(O))Z(O);else{delete O.layout.width;delete O.layout.height;var Y=O.changed;O.autoplay=!0;t.call("relayout",O,{autosize:!0}).then(function(){O.changed=
Y;O._resolveResize===Z&&(delete O._resolveResize,Z(O))})}},100)});T&&T(V);return V};M.previousPromises=function(O){if((O._promises||[]).length)return Promise.all(O._promises).then(function(){O._promises=[]})};M.addLinks=function(O){if(O._context.showLink||O._context.showSources){var T=O._fullLayout,V=A.ensureSingle(T._paper,"text","js-plot-link-container",function(Y){Y.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:z.defaultLine,"pointer-events":"all"}).each(function(){var ea=
g.select(this);ea.append("tspan").classed("js-link-to-tool",!0);ea.append("tspan").classed("js-link-spacer",!0);ea.append("tspan").classed("js-sourcelinks",!0)})}),Z=V.node(),aa={y:T._paper.attr("height")-9};document.body.contains(Z)&&Z.getComputedTextLength()>=T.width-20?(aa["text-anchor"]="start",aa.x=5):(aa["text-anchor"]="end",aa.x=T._paper.attr("width")-7);V.attr(aa);T=V.select(".js-link-to-tool");Z=V.select(".js-link-spacer");V=V.select(".js-sourcelinks");O._context.showSources&&O._context.showSources(O);
O._context.showLink&&r(O,T);Z.text(T.text()&&V.text()?" - ":"")}};M.sendDataToCloud=function(O){var T=(window.PLOTLYENV||{}).BASE_URL||O._context.plotlyServerURL;if(T){O.emit("plotly_beforeexport");var V=g.select(O).append("div").attr("id","hiddenform").style("display","none");T=V.append("form").attr({action:T+"/external",method:"post",target:"_blank"});T.append("input").attr({type:"text",name:"data"}).node().value=M.graphJson(O,!1,"keepdata");T.node().submit();V.remove();O.emit("plotly_afterexport");
return!1}};var L="days shortDays months shortMonths periods dateTime date time decimal thousands grouping currency".split(" "),P=["year","month","dayMonth","dayMonthYear"];M.supplyDefaults=function(O,T){T=T&&T.skipUpdateCalc;var V=O._fullLayout||{};if(V._skipDefaults)delete V._skipDefaults;else{var Z=O._fullLayout={},aa=O.layout||{},Y=O._fullData||[],ea=O._fullData=[],ca=O.data||[],ba=O.calcdata||[],ka=O._context||{};O._transitionData||M.createTransitionData(O);Z._dfltTitle={plot:I(O,"Click to enter Plot title"),
x:I(O,"Click to enter X axis title"),y:I(O,"Click to enter Y axis title"),colorbar:I(O,"Click to enter Colorscale title"),annotation:I(O,"new text")};Z._traceWord=I(O,"trace");var qa=p(O,L);Z._mapboxAccessToken=ka.mapboxAccessToken;if(V._initialAutoSizeIsDone){var pa=V.width,oa=V.height;M.supplyLayoutGlobalDefaults(aa,Z,qa);aa.width||(Z.width=pa);aa.height||(Z.height=oa);M.sanitizeMargins(Z)}else M.supplyLayoutGlobalDefaults(aa,Z,qa),pa=!aa.width||!aa.height,oa=Z.autosize,ka=ka.autosizable,pa&&(oa||
ka)?M.plotAutoSize(O,aa,Z):pa&&M.sanitizeMargins(Z),!oa&&pa&&(aa.width=Z.width,aa.height=Z.height);pa=Z.separators;qa.decimal=pa.charAt(0);qa.thousands=pa.charAt(1);qa={numberFormat:g.locale(qa).numberFormat,timeFormat:h(qa).utcFormat};Z._d3locale=qa;Z._extraFormat=p(O,P);Z._initialAutoSizeIsDone=!0;Z._dataLength=ca.length;Z._modules=[];Z._visibleModules=[];Z._basePlotModules=[];qa=t.collectableSubplotTypes;pa={};var ja;if(!qa)for(ja in qa=[],ka=t.subplotsRegistry,ka){var ra=ka[ja].attr;if(ra&&(qa.push(ja),
Array.isArray(ra)))for(oa=0;oa<ra.length;oa++)A.pushUnique(qa,ra[oa])}for(ja=0;ja<qa.length;ja++)pa[qa[ja]]=[];pa=Z._subplots=pa;qa=Z._splomAxes={x:{},y:{}};oa=Z._splomSubplots={};Z._splomGridDflt={};Z._scatterStackOpts={};Z._firstScatter={};Z._alignmentOpts={};Z._colorAxes={};Z._requestRangeslider={};Z._traceUids=n(Y,ca);Z._globalTransforms=(O._context||{}).globalTransforms;M.supplyDataDefaults(ca,ea,aa,Z);ja=Object.keys(qa.x);qa=Object.keys(qa.y);if(1<ja.length&&1<qa.length){t.getComponentMethod("grid",
"sizeDefaults")(aa,Z);for(ca=0;ca<ja.length;ca++)A.pushUnique(pa.xaxis,ja[ca]);for(ca=0;ca<qa.length;ca++)A.pushUnique(pa.yaxis,qa[ca]);for(var ha in oa)A.pushUnique(pa.cartesian,ha)}Z._has=M._hasPlotType.bind(Z);if(Y.length===ea.length)for(ca=0;ca<ea.length;ca++)J(ea[ca],Y[ca]);M.supplyLayoutModuleDefaults(aa,Z,ea,O._transitionData);ha=Z._visibleModules;aa=[];for(ca=0;ca<ha.length;ca++)(pa=ha[ca].crossTraceDefaults)&&A.pushUnique(aa,pa);for(ca=0;ca<aa.length;ca++)aa[ca](ea,Z);Z._hasOnlyLargeSploms=
1===Z._basePlotModules.length&&"splom"===Z._basePlotModules[0].name&&15<ja.length&&15<qa.length&&0===Z.shapes.length&&0===Z.images.length;Z._hasCartesian=Z._has("cartesian");Z._hasGeo=Z._has("geo");Z._hasGL3D=Z._has("gl3d");Z._hasGL2D=Z._has("gl2d");Z._hasTernary=Z._has("ternary");Z._hasPie=Z._has("pie");M.linkSubplots(ea,Z,Y,V);M.cleanPlot(ea,Z,Y,V);aa=!(!V._has||!V._has("gl2d"));Y=!(!Z._has||!Z._has("gl2d"));ca=!(!V._has||!V._has("cartesian"));ha=!(!Z._has||!Z._has("cartesian"));aa=ca||aa;Y=ha||
Y;aa&&!Y?V._bgLayer.remove():Y&&!aa&&(Z._shouldCreateBgLayer=!0);V._zoomlayer&&!O._dragging&&C({_fullLayout:V});O=[];if(Z.meta)var la=Z._meta={meta:Z.meta,layout:{meta:Z.meta}};for(Y=0;Y<ea.length;Y++)ha=ea[Y],ha.meta?O[ha.index]=ha._meta={meta:ha.meta}:Z.meta&&(ha._meta={meta:Z.meta}),Z.meta&&(ha._meta.layout={meta:Z.meta});O.length&&(la||(la=Z._meta={}),la.data=O);J(Z,V);t.getComponentMethod("colorscale","crossTraceDefaults")(ea,Z);Z._preGUI||(Z._preGUI={});Z._tracePreGUI||(Z._tracePreGUI={});la=
Z._tracePreGUI;V={};for(var ua in la)V[ua]="old";for(ca=0;ca<ea.length;ca++)ua=ea[ca]._fullInput.uid,V[ua]||(la[ua]={}),V[ua]="new";for(ua in V)"old"===V[ua]&&delete la[ua];f(Z);t.getComponentMethod("rangeslider","makeData")(Z);T||ba.length!==ea.length||M.supplyDefaultsUpdateCalc(ba,ea)}};M.supplyDefaultsUpdateCalc=function(O,T){for(var V=0;V<T.length;V++){var Z=T[V],aa=(O[V]||[])[0];if(aa&&aa.trace){var Y=aa.trace;if(Y._hasCalcTransform){var ea=Y._arrayAttrs,ca;for(ca=0;ca<ea.length;ca++){var ba=
ea[ca];var ka=A.nestedProperty(Y,ba).get().slice();A.nestedProperty(Z,ba).set(ka)}}aa.trace=Z}}};M.createTransitionData=function(O){O._transitionData||(O._transitionData={});O._transitionData._frames||(O._transitionData._frames=[]);O._transitionData._frameHash||(O._transitionData._frameHash={});O._transitionData._counter||(O._transitionData._counter=0);O._transitionData._interruptCallbacks||(O._transitionData._interruptCallbacks=[])};M._hasPlotType=function(O){var T,V=this._basePlotModules||[];for(T=
0;T<V.length;T++)if(V[T].name===O)return!0;V=this._modules||[];for(T=0;T<V.length;T++){var Z=V[T].name;if(Z===O||(Z=t.modules[Z])&&Z.categories[O])return!0}return!1};M.cleanPlot=function(O,T,V,Z){var aa,Y=Z._basePlotModules||[];for(aa=0;aa<Y.length;aa++){var ea=Y[aa];ea.clean&&ea.clean(O,T,V,Z)}aa=Z._has&&Z._has("gl");T=T._has&&T._has("gl");aa&&!T&&void 0!==Z._glcontainer&&(Z._glcontainer.selectAll(".gl-canvas").remove(),Z._glcontainer.selectAll(".no-webgl").remove(),Z._glcanvas=null);Y=!!Z._infolayer;
aa=0;a:for(;aa<V.length;aa++){ea=V[aa].uid;for(T=0;T<O.length;T++)if(ea===O[T].uid)continue a;Y&&Z._infolayer.select(".cb"+ea).remove()}};M.linkSubplots=function(O,T,V,Z){var aa=Z._plots||{},Y=T._plots={};Z=T._subplots;V={_fullData:O,_fullLayout:T};var ea=Z.cartesian.concat(Z.gl2d||[]);for(Z=0;Z<ea.length;Z++){var ca=ea[Z];var ba=aa[ca],ka=B.getFromId(V,ca,"x"),qa=B.getFromId(V,ca,"y");ba?ba=Y[ca]=ba:(ba=Y[ca]={},ba.id=ca);ka._counterAxes.push(qa._id);qa._counterAxes.push(ka._id);ka._subplotsWith.push(ca);
qa._subplotsWith.push(ca);ba.xaxis=ka;ba.yaxis=qa;ba._hasClipOnAxisFalse=!1;for(ca=0;ca<O.length;ca++)if(ka=O[ca],ka.xaxis===ba.xaxis._id&&ka.yaxis===ba.yaxis._id&&!1===ka.cliponaxis){ba._hasClipOnAxisFalse=!0;break}}O=B.list(V,null,!0);for(Z=0;Z<O.length;Z++)aa=O[Z],ca=null,aa.overlaying&&(ca=B.getFromId(V,aa.overlaying))&&ca.overlaying&&(aa.overlaying=!1,ca=null),aa._mainAxis=ca||aa,ca&&(aa.domain=ca.domain.slice()),aa._anchorAxis="free"===aa.anchor?null:B.getFromId(V,aa.anchor);for(Z=0;Z<O.length;Z++){aa=
O[Z];aa._counterAxes.sort(B.idSort);aa._subplotsWith.sort(A.subplotSort);Y=ca=aa;var pa=T;ea={_fullLayout:pa};ba="x"===Y._id.charAt(0);var oa=Y._mainAxis._anchorAxis,ja=qa=ka="";oa&&(ja=oa._mainAxis._id,ka=ba?Y._id+ja:ja+Y._id);if(!ka||!pa._plots[ka])for(ka="",pa=Y._counterAxes,oa=0;oa<pa.length;oa++){var ra=pa[oa],ha=ba?Y._id+ra:ra+Y._id;qa||(qa=ha);ra=B.getFromId(ea,ra);if(ja&&ra.overlaying===ja){ka=ha;break}}ca._mainSubplot=ka||qa;if(aa._counterAxes.length&&(aa.spikemode&&-1!==aa.spikemode.indexOf("across")||
aa.automargin&&aa.mirror&&"free"!==aa.anchor||t.getComponentMethod("rangeslider","isVisible")(aa))){Y=1;for(ca=ea=0;ca<aa._counterAxes.length;ca++)ba=B.getFromId(V,aa._counterAxes[ca]),Y=Math.min(Y,ba.domain[0]),ea=Math.max(ea,ba.domain[1]);Y<ea&&(aa._counterDomainMin=Y,aa._counterDomainMax=ea)}}};M.clearExpandedTraceDefaultColors=function(O){function T(Y,ea,ca,ba){Z[ba]=ea;Z.length=ba+1;"color"===Y.valType&&void 0===Y.dflt&&aa.push(Z.join("."))}var V;var Z=[];var aa=O._module._colorAttrs;aa||(O._module._colorAttrs=
aa=[],v.crawl(O._module.attributes,T));for(V=0;V<aa.length;V++)A.nestedProperty(O,"_input."+aa[V]).get()||A.nestedProperty(O,aa[V]).set(null)};M.supplyDataDefaults=function(O,T,V,Z){function aa(Fa){T.push(Fa);var Xa=Fa._module;Xa&&(A.pushUnique(Y,Xa),!0===Fa.visible&&A.pushUnique(ea,Xa),A.pushUnique(ca,Fa._module.basePlotModule),ba++,!1!==Fa._input.visible&&ka++)}var Y=Z._modules,ea=Z._visibleModules,ca=Z._basePlotModules,ba=0,ka=0,qa;Z._transformModules=[];var pa={},oa=[],ja=w.traceTemplater((V.template||
{}).data||{});for(qa=0;qa<O.length;qa++){var ra=O[qa];var ha=ja.newTrace(ra);ha.uid=Z._traceUids[qa];M.supplyTraceDefaults(ra,ha,ka,Z,qa);ha.index=qa;ha._input=ra;ha._expandedIndex=ba;if(ha.transforms&&ha.transforms.length)for(var la=!1!==ra.visible&&!1===ha.visible,ua=a(ha,T,V,Z),na=0;na<ua.length;na++){var wa=ua[na],Ca={_template:ha._template,type:ha.type,uid:ha.uid+na};la&&!1===wa.visible&&delete wa.visible;M.supplyTraceDefaults(wa,Ca,ba,Z,qa);J(Ca,wa);Ca.index=qa;Ca._input=ra;Ca._fullInput=ha;
Ca._expandedIndex=ba;Ca._expandedInput=wa;aa(Ca)}else ha._fullInput=ha,ha._expandedInput=ha,aa(ha);t.traceIs(ha,"carpetAxis")&&(pa[ha.carpet]=ha);t.traceIs(ha,"carpetDependent")&&oa.push(qa)}for(qa=0;qa<oa.length;qa++)ha=T[oa[qa]],ha.visible&&(O=pa[ha.carpet],(ha._carpet=O)&&O.visible?(ha.xaxis=O.xaxis,ha.yaxis=O.yaxis):ha.visible=!1)};M.supplyAnimationDefaults=function(O){O=O||{};var T,V={};A.coerce(O||{},V,u,"mode",void 0);A.coerce(O||{},V,u,"direction",void 0);A.coerce(O||{},V,u,"fromcurrent",
void 0);if(Array.isArray(O.frame))for(V.frame=[],T=0;T<O.frame.length;T++)V.frame[T]=M.supplyAnimationFrameDefaults(O.frame[T]||{});else V.frame=M.supplyAnimationFrameDefaults(O.frame||{});if(Array.isArray(O.transition))for(V.transition=[],T=0;T<O.transition.length;T++)V.transition[T]=M.supplyAnimationTransitionDefaults(O.transition[T]||{});else V.transition=M.supplyAnimationTransitionDefaults(O.transition||{});return V};M.supplyAnimationFrameDefaults=function(O){var T={};A.coerce(O||{},T,u.frame,
"duration",void 0);A.coerce(O||{},T,u.frame,"redraw",void 0);return T};M.supplyAnimationTransitionDefaults=function(O){var T={};A.coerce(O||{},T,u.transition,"duration",void 0);A.coerce(O||{},T,u.transition,"easing",void 0);return T};M.supplyFrameDefaults=function(O){function T(Z,aa){return A.coerce(O,V,F,Z,aa)}var V={};T("group");T("name");T("traces");T("baseframe");T("data");T("layout");return V};M.supplyTraceDefaults=function(O,T,V,Z,aa){function Y(ha,la){return A.coerce(O,T,M.attributes,ha,la)}
var ea=Z.colorway||z.defaults;V=ea[V%ea.length];ea=Y("visible");Y("type");Y("name",Z._traceWord+" "+aa);Y("uirevision",Z.uirevision);var ca=M.getModule(T);if(T._module=ca){var ba=ca.basePlotModule,ka=ba.attr,qa=ba.attributes;if(ka&&qa){var pa=Z._subplots,oa="";if(ea||"gl2d"!==ba.name){if(Array.isArray(ka))for(aa=0;aa<ka.length;aa++){var ja=ka[aa],ra=A.coerce(O,T,qa,ja);pa[ja]&&A.pushUnique(pa[ja],ra);oa+=ra}else oa=A.coerce(O,T,qa,ka);pa[ba.name]&&A.pushUnique(pa[ba.name],oa)}}}ea&&(Y("customdata"),
Y("ids"),Y("meta"),t.traceIs(T,"showLegend")?(A.coerce(O,T,ca.attributes.showlegend?ca.attributes:M.attributes,"showlegend"),Y("legendgroup"),T._dfltShowLegend=!0):T._dfltShowLegend=!1,ca&&ca.supplyDefaults(O,T,V,Z),t.traceIs(T,"noOpacity")||Y("opacity"),t.traceIs(T,"notLegendIsolatable")&&(T.visible=!!T.visible),t.traceIs(T,"noHover")||(T.hovertemplate||A.coerceHoverinfo(O,T,Z),"parcats"!==T.type&&t.getComponentMethod("fx","supplyDefaults")(O,T,V,Z)),ca&&ca.selectPoints&&Y("selectedpoints"),M.supplyTransformDefaults(O,
T,Z));return T};M.hasMakesDataTransform=k;M.supplyTransformDefaults=function(O,T,V){if(T._length||k(O)){var Z=V._globalTransforms||[],aa=V._transformModules||[];if(Array.isArray(O.transforms)||0!==Z.length){Z=Z.concat(O.transforms||[]);for(var Y=T.transforms=[],ea=0;ea<Z.length;ea++){var ca=Z[ea],ba=ca.type,ka=E[ba],qa=!(ca._module&&ca._module===ka),pa=ka&&"function"===typeof ka.transform;ka||A.warn("Unrecognized transform type "+ba+".");ka&&ka.supplyDefaults&&(qa||pa)?(ca=ka.supplyDefaults(ca,T,
V,O),ca.type=ba,ca._module=ka,A.pushUnique(aa,ka)):ca=A.extendFlat({},ca);Y.push(ca)}}}};M.supplyLayoutGlobalDefaults=function(O,T,V){function Z(Y,ea){return A.coerce(O,T,M.layoutAttributes,Y,ea)}var aa=O.template;A.isPlainObject(aa)&&(T.template=aa,T._template=aa.layout,T._dataTemplate=aa.data);aa=A.coerceFont(Z,"font");Z("title.text",T._dfltTitle.plot);A.coerceFont(Z,"title.font",{family:aa.family,size:Math.round(1.4*aa.size),color:aa.color});Z("title.xref");Z("title.yref");Z("title.x");Z("title.y");
Z("title.xanchor");Z("title.yanchor");Z("title.pad.t");Z("title.pad.r");Z("title.pad.b");Z("title.pad.l");Z("uniformtext.mode")&&Z("uniformtext.minsize");Z("autosize",!(O.width&&O.height));Z("width");Z("height");Z("margin.l");Z("margin.r");Z("margin.t");Z("margin.b");Z("margin.pad");Z("margin.autoexpand");O.width&&O.height&&M.sanitizeMargins(T);t.getComponentMethod("grid","sizeDefaults")(O,T);Z("paper_bgcolor");Z("separators",V.decimal+V.thousands);Z("hidesources");Z("colorway");Z("datarevision");
V=Z("uirevision");Z("editrevision",V);Z("selectionrevision",V);Z("modebar.orientation");Z("modebar.bgcolor",z.addOpacity(T.paper_bgcolor,.5));aa=z.contrast(z.rgb(T.modebar.bgcolor));Z("modebar.color",z.addOpacity(aa,.3));Z("modebar.activecolor",z.addOpacity(aa,.7));Z("modebar.uirevision",V);t.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(O,T,Z);Z("meta");A.isPlainObject(O.transition)&&(Z("transition.duration"),Z("transition.easing"),Z("transition.ordering"));t.getComponentMethod("calendars",
"handleDefaults")(O,T,"calendar");t.getComponentMethod("fx","supplyLayoutGlobalDefaults")(O,T,Z)};M.plotAutoSize=function(O,T,V){var Z=O._context||{},aa=Z.frameMargins,Y;(Y=A.isPlotDiv(O))&&O.emit("plotly_autosize");Z.fillFrame?(Z=window.innerWidth,Y=window.innerHeight,document.body.style.overflow="hidden"):(Y=Y?window.getComputedStyle(O):{},Z=e(Y.width)||e(Y.maxWidth)||V.width,Y=e(Y.height)||e(Y.maxHeight)||V.height,q(aa)&&0<aa&&(aa=1-2*aa,Z=Math.round(aa*Z),Y=Math.round(aa*Y)));aa=M.layoutAttributes.width.min;
var ea=M.layoutAttributes.height.min;Z<aa&&(Z=aa);Y<ea&&(Y=ea);aa=!T.width&&1<Math.abs(V.width-Z);if((T=!T.height&&1<Math.abs(V.height-Y))||aa)aa&&(V.width=Z),T&&(V.height=Y);O._initialAutoSize||(O._initialAutoSize={width:Z,height:Y});M.sanitizeMargins(V)};M.supplyLayoutModuleDefaults=function(O,T,V,Z){var aa=t.componentsRegistry,Y=T._basePlotModules,ea;var ca=t.subplotsRegistry.cartesian;for(ea in aa){var ba=aa[ea];ba.includeBasePlot&&ba.includeBasePlot(O,T)}Y.length||Y.push(ca);T._has("cartesian")&&
(t.getComponentMethod("grid","contentDefaults")(O,T),ca.finalizeSubplots(O,T));for(var ka in T._subplots)T._subplots[ka].sort(A.subplotSort);for(ca=0;ca<Y.length;ca++)ba=Y[ca],ba.supplyLayoutDefaults&&ba.supplyLayoutDefaults(O,T,V);Y=T._modules;for(ca=0;ca<Y.length;ca++)ba=Y[ca],ba.supplyLayoutDefaults&&ba.supplyLayoutDefaults(O,T,V);Y=T._transformModules;for(ca=0;ca<Y.length;ca++)ba=Y[ca],ba.supplyLayoutDefaults&&ba.supplyLayoutDefaults(O,T,V,Z);for(ea in aa)ba=aa[ea],ba.supplyLayoutDefaults&&ba.supplyLayoutDefaults(O,
T,V)};M.purge=function(O){var T=O._fullLayout||{};void 0!==T._glcontainer&&(T._glcontainer.selectAll(".gl-canvas").remove(),T._glcontainer.remove(),T._glcanvas=null);T._modeBar&&T._modeBar.destroy();O._transitionData&&(O._transitionData._interruptCallbacks&&(O._transitionData._interruptCallbacks.length=0),O._transitionData._animationRaf&&window.cancelAnimationFrame(O._transitionData._animationRaf));A.clearThrottle();A.clearResponsive(O);delete O.data;delete O.layout;delete O._fullData;delete O._fullLayout;
delete O.calcdata;delete O.framework;delete O.empty;delete O.fid;delete O.undoqueue;delete O.undonum;delete O.autoplay;delete O.changed;delete O._promises;delete O._redrawTimer;delete O._hmlumcount;delete O._hmpixcount;delete O._transitionData;delete O._transitioning;delete O._initialAutoSize;delete O._transitioningWithDuration;delete O._dragging;delete O._dragged;delete O._dragdata;delete O._hoverdata;delete O._snapshotInProgress;delete O._editing;delete O._mouseDownTime;delete O._legendMouseDownTime;
O.removeAllListeners&&O.removeAllListeners()};M.style=function(O){var T=O._fullLayout._visibleModules,V=[],Z;for(Z=0;Z<T.length;Z++){var aa=T[Z];aa.style&&A.pushUnique(V,aa.style)}for(Z=0;Z<V.length;Z++)V[Z](O)};M.sanitizeMargins=function(O){if(O&&O.margin){var T=O.width,V=O.height;O=O.margin;var Z=V-(O.t+O.b);0>T-(O.l+O.r)&&(T=(T-1)/(O.l+O.r),O.l=Math.floor(T*O.l),O.r=Math.floor(T*O.r));0>Z&&(T=(V-1)/(O.t+O.b),O.t=Math.floor(T*O.t),O.b=Math.floor(T*O.b))}};M.clearAutoMarginIds=function(O){O._fullLayout._pushmarginIds=
{}};M.allowAutoMargin=function(O,T){O._fullLayout._pushmarginIds[T]=1};M.autoMargin=function(O,T,V){var Z=O._fullLayout,aa=Z._pushmargin,Y=Z._pushmarginIds;if(!1!==Z.margin.autoexpand){if(V){var ea=V.pad;void 0===ea&&(ea=Z.margin,ea=Math.min(12,ea.l,ea.r,ea.t,ea.b));V.l+V.r>.5*Z.width&&(A.log("Margin push",T,"is too big in x, dropping"),V.l=V.r=0);V.b+V.t>.5*Z.height&&(A.log("Margin push",T,"is too big in y, dropping"),V.b=V.t=0);aa[T]={l:{val:void 0!==V.xl?V.xl:V.x,size:V.l+ea},r:{val:void 0!==V.xr?
V.xr:V.x,size:V.r+ea},b:{val:void 0!==V.yb?V.yb:V.y,size:V.b+ea},t:{val:void 0!==V.yt?V.yt:V.y,size:V.t+ea}};Y[T]=1}else delete aa[T],delete Y[T];if(!Z._replotting)return M.doAutoMargin(O)}};M.doAutoMargin=function(O){var T=O._fullLayout;T._size||(T._size={});f(T);var V=T._size,Z=T.margin,aa=A.extendFlat({},V),Y=Z.l,ea=Z.r,ca=Z.t,ba=Z.b,ka=T.width,qa=T.height,pa=T._pushmargin,oa=T._pushmarginIds;if(!1!==T.margin.autoexpand){for(var ja in pa)oa[ja]||delete pa[ja];pa.base={l:{val:0,size:Y},r:{val:1,
size:ea},t:{val:1,size:ca},b:{val:0,size:ba}};for(var ra in pa){var ha=pa[ra].l||{},la=pa[ra].b||{};ja=ha.val;ha=ha.size;var ua=la.val;la=la.size;for(var na in pa){if(q(ha)&&pa[na].r){var wa=pa[na].r.val,Ca=pa[na].r.size;if(wa>ja){var Fa=(ha*wa+(Ca-ka)*ja)/(wa-ja);wa=(Ca*(1-ja)+(ha-ka)*(1-wa))/(wa-ja);0<=Fa&&0<=wa&&0<ka-(Fa+wa)&&Fa+wa>Y+ea&&(Y=Fa,ea=wa)}}q(la)&&pa[na].t&&(wa=pa[na].t.val,Ca=pa[na].t.size,wa>ua&&(Fa=(la*wa+(Ca-qa)*ua)/(wa-ua),wa=(Ca*(1-ua)+(la-qa)*(1-wa))/(wa-ua),0<=Fa&&0<=wa&&0<qa-
(wa+Fa)&&Fa+wa>ba+ca&&(ba=Fa,ca=wa)))}}}V.l=Math.round(Y);V.r=Math.round(ea);V.t=Math.round(ca);V.b=Math.round(ba);V.p=Math.round(Z.pad);V.w=Math.round(ka)-V.l-V.r;V.h=Math.round(qa)-V.t-V.b;if(!T._replotting&&M.didMarginChange(aa,V)){"_redrawFromAutoMarginCount"in T?T._redrawFromAutoMarginCount++:T._redrawFromAutoMarginCount=1;V=3*(1+Object.keys(oa).length);if(T._redrawFromAutoMarginCount<V)return t.call("plot",O);A.warn("Too many auto-margin redraws.")}};var N="lrtbpwh".split("");M.didMarginChange=
function(O,T){for(var V=0;V<N.length;V++){var Z=N[V],aa=O[Z];Z=T[Z];if(!q(aa)||1<Math.abs(Z-aa))return!0}return!1};M.graphJson=function(O,T,V,Z,aa,Y){function ea(ka,qa){if("function"===typeof ka)return qa?"_function_":null;if(A.isPlainObject(ka)){var pa={},oa;Object.keys(ka).sort().forEach(function(ja){if(-1===["_","["].indexOf(ja.charAt(0)))if("function"===typeof ka[ja])qa&&(pa[ja]="_function");else{if("keepdata"===V){if("src"===ja.substr(ja.length-3))return}else if("keepstream"===V){if(oa=ka[ja+
"src"],"string"===typeof oa&&0<oa.indexOf(":")&&!A.isPlainObject(ka.stream))return}else if("keepall"!==V&&(oa=ka[ja+"src"],"string"===typeof oa&&0<oa.indexOf(":")))return;pa[ja]=ea(ka[ja],qa)}});return pa}return Array.isArray(ka)?ka.map(function(ja){return ea(ja,qa)}):A.isTypedArray(ka)?A.simpleMap(ka,A.identity):A.isJSDate(ka)?A.ms2DateTimeLocal(+ka):ka}(aa&&T&&!O._fullData||aa&&!T&&!O._fullLayout)&&M.supplyDefaults(O);var ca=aa?O._fullLayout:O.layout,ba=(O._transitionData||{})._frames;aa={data:((aa?
O._fullData:O.data)||[]).map(function(ka){ka=ea(ka);T&&delete ka.fit;return ka})};T||(aa.layout=ea(ca));O.framework&&O.framework.isPolar&&(aa=O.framework.getConfig());ba&&(aa.frames=ea(ba));Y&&(aa.config=ea(O._context,!0));return"object"===Z?aa:JSON.stringify(aa)};M.modifyFrames=function(O,T){var V=O._transitionData._frames,Z=O._transitionData._frameHash;for(O=0;O<T.length;O++){var aa=T[O];switch(aa.type){case "replace":var Y=aa.value;var ea=(V[aa.index]||{}).name,ca=Y.name;V[aa.index]=Z[ca]=Y;ca!==
ea&&(delete Z[ea],Z[ca]=Y);break;case "insert":Y=aa.value;Z[Y.name]=Y;V.splice(aa.index,0,Y);break;case "delete":Y=V[aa.index],delete Z[Y.name],V.splice(aa.index,1)}}return Promise.resolve()};M.computeFrame=function(O,T){var V=O._transitionData._frameHash,Z;if(!T)throw Error("computeFrame must be given a string frame name");T=V[T.toString()];if(!T)return!1;O=[T];for(Z=[T.name];T.baseframe&&(T=V[T.baseframe.toString()])&&-1===Z.indexOf(T.name);)O.push(T),Z.push(T.name);for(var aa={};T=O.pop();)if(T.layout&&
(aa.layout=M.extendLayout(aa.layout,T.layout)),T.data){aa.data||(aa.data=[]);Z=T.traces;if(!Z)for(Z=[],V=0;V<T.data.length;V++)Z[V]=V;aa.traces||(aa.traces=[]);for(V=0;V<T.data.length;V++){var Y=Z[V];if(void 0!==Y&&null!==Y){var ea=aa.traces.indexOf(Y);-1===ea&&(ea=aa.data.length,aa.traces[ea]=Y);aa.data[ea]=M.extendTrace(aa.data[ea],T.data[V])}}}return aa};M.recomputeFrameHash=function(O){var T=O._transitionData._frameHash={};O=O._transitionData._frames;for(var V=0;V<O.length;V++){var Z=O[V];Z&&
Z.name&&(T[Z.name]=Z)}};M.extendObjectWithContainers=function(O,T,V){T=A.extendDeepNoArrays({},T||{});var Z=A.expandObjectPaths(T);var aa={};if(V&&V.length)for(T=0;T<V.length;T++){var Y=A.nestedProperty(Z,V[T]);var ea=Y.get();void 0===ea?A.nestedProperty(aa,V[T]).set(null):(Y.set(null),A.nestedProperty(aa,V[T]).set(ea))}O=A.extendDeepNoArrays(O||{},Z);if(V&&V.length)for(T=0;T<V.length;T++)if(Y=A.nestedProperty(aa,V[T]),Z=Y.get()){ea=A.nestedProperty(O,V[T]);var ca=ea.get();Array.isArray(ca)||(ca=
[],ea.set(ca));for(Y=0;Y<Z.length;Y++){var ba=Z[Y];ca[Y]=null===ba?null:M.extendObjectWithContainers(ca[Y],ba)}ea.set(ca)}return O};M.dataArrayContainers=["transforms","dimensions"];M.layoutArrayContainers=t.layoutArrayContainers;M.extendTrace=function(O,T){return M.extendObjectWithContainers(O,T,M.dataArrayContainers)};M.extendLayout=function(O,T){return M.extendObjectWithContainers(O,T,M.layoutArrayContainers)};M.transition=function(O,T,V,Z,aa,Y){aa={redraw:aa.redraw};var ea={},ca=[];aa.prepareFn=
function(){var ba=Array.isArray(T)?T.length:0;ba=Z.slice(0,ba);for(var ka=0;ka<ba.length;ka++){var qa=ba[ka],pa=O._fullData[qa]._module;pa&&(pa.animatable&&(pa=pa.basePlotModule.name,ea[pa]||(ea[pa]=[]),ea[pa].push(qa)),O.data[ba[ka]]=M.extendTrace(O.data[ba[ka]],T[ka]))}ba=A.expandObjectPaths(A.extendDeepNoArrays({},V));ka=/^[xy]axis[0-9]*$/;for(var oa in ba)ka.test(oa)&&delete ba[oa].range;M.extendLayout(O.layout,ba);delete O.calcdata;M.supplyDefaults(O);M.doCalcdata(O);if(oa=A.expandObjectPaths(V)){ba=
O._fullLayout._plots;for(var ja in ba){ka=ba[ja];qa=ka.xaxis;pa=ka.yaxis;var ra=qa.range.slice(),ha=pa.range.slice(),la=null,ua=null,na=null,wa=null;Array.isArray(oa[qa._name+".range"])?la=oa[qa._name+".range"].slice():Array.isArray((oa[qa._name]||{}).range)&&(la=oa[qa._name].range.slice());Array.isArray(oa[pa._name+".range"])?ua=oa[pa._name+".range"].slice():Array.isArray((oa[pa._name]||{}).range)&&(ua=oa[pa._name].range.slice());ra&&la&&(qa.r2l(ra[0])!==qa.r2l(la[0])||qa.r2l(ra[1])!==qa.r2l(la[1]))&&
(na={xr0:ra,xr1:la});ha&&ua&&(pa.r2l(ha[0])!==pa.r2l(ua[0])||pa.r2l(ha[1])!==pa.r2l(ua[1]))&&(wa={yr0:ha,yr1:ua});(na||wa)&&ca.push(A.extendFlat({plotinfo:ka},na,wa))}}return Promise.resolve()};aa.runFn=function(ba){var ka=O._fullLayout._basePlotModules;var qa=ca.length,pa;if(V)for(pa=0;pa<ka.length;pa++)ka[pa].transitionAxes&&ka[pa].transitionAxes(O,ca,Y,ba);qa?(ka=A.extendFlat({},Y),ka.duration=0,delete ea.cartesian):ka=Y;for(var oa in ea)qa=ea[oa],O._fullData[qa[0]]._module.basePlotModule.plot(O,
qa,ka,ba)};return l(O,Y,aa)};M.transitionFromReact=function(O,T,V,Z){var aa=O._fullLayout,Y=aa.transition,ea={},ca=[];ea.prepareFn=function(){var ba=aa._plots;ea.redraw=!1;"some"===T.anim&&(ea.redraw=!0);"some"===V.anim&&(ea.redraw=!0);for(var ka in ba){var qa=ba[ka],pa=qa.xaxis,oa=qa.yaxis,ja=Z[pa._name].range.slice(),ra=Z[oa._name].range.slice(),ha=pa.range.slice(),la=oa.range.slice();pa.setScale();oa.setScale();var ua=null,na=null;if(pa.r2l(ja[0])!==pa.r2l(ha[0])||pa.r2l(ja[1])!==pa.r2l(ha[1]))ua=
{xr0:ja,xr1:ha};if(oa.r2l(ra[0])!==oa.r2l(la[0])||oa.r2l(ra[1])!==oa.r2l(la[1]))na={yr0:ra,yr1:la};(ua||na)&&ca.push(A.extendFlat({plotinfo:qa},ua,na))}return Promise.resolve()};ea.runFn=function(ba){function ka(){for(var na=0;na<oa.length;na++)oa[na].transitionAxes&&oa[na].transitionAxes(O,ca,ja,ba)}function qa(){for(var na=0;na<oa.length;na++)oa[na].plot(O,ha,ra,ba)}for(var pa=O._fullData,oa=O._fullLayout._basePlotModules,ja,ra,ha,la=[],ua=0;ua<pa.length;ua++)la.push(ua);ca.length&&T.anim?"traces first"===
Y.ordering?(ja=A.extendFlat({},Y,{duration:0}),ha=la,ra=Y,setTimeout(ka,Y.duration),qa()):(ja=Y,ha=null,ra=A.extendFlat({},Y,{duration:0}),setTimeout(qa,ja.duration),ka()):ca.length?(ja=Y,ka()):T.anim&&(ha=la,ra=Y,qa())};return l(O,Y,ea)};M.doCalcdata=function(O,T){function V(ha){oa=Y[ha];ca=oa._module;if(!0===oa.visible&&oa.transforms)for(ca&&ca.calc&&(ha=ca.calc(O,oa),ha[0]&&ha[0].t&&ha[0].t._scene&&delete ha[0].t._scene.dirty),ka=0;ka<oa.transforms.length;ka++)ha=oa.transforms[ka],(ca=E[ha.type])&&
ca.calcTransform&&(ra=oa._hasCalcTransform=!0,ca.calcTransform(O,oa,ha))}function Z(ha,la){oa=Y[ha];ca=oa._module;if(!!ca.isContainer===la){la=[];if(!0===oa.visible&&0!==oa._length){delete oa._indexToPoints;var ua=oa.transforms||[];for(ka=ua.length-1;0<=ka;ka--)if(ua[ka].enabled){oa._indexToPoints=ua[ka]._indexToPoints;break}ca&&ca.calc&&(la=ca.calc(O,oa))}Array.isArray(la)&&la[0]||(la=[{x:y,y}]);la[0].t||(la[0].t={});la[0].trace=oa;qa[ha]=la}}var aa=B.list(O),Y=O._fullData,ea=O._fullLayout,ca,ba,
ka,qa=Array(Y.length),pa=(O.calcdata||[]).slice();O.calcdata=qa;ea._numBoxes=0;ea._numViolins=0;ea._violinScaleGroupStats={};O._hmpixcount=0;O._hmlumcount=0;ea._piecolormap={};ea._sunburstcolormap={};ea._treemapcolormap={};ea._funnelareacolormap={};for(ba=0;ba<Y.length;ba++)Array.isArray(T)&&-1===T.indexOf(ba)&&(qa[ba]=pa[ba]);for(ba=0;ba<Y.length;ba++){var oa=Y[ba];oa._arrayAttrs=v.findArrayAttributes(oa);oa._extremes={}}T=ea._subplots.polar||[];for(ba=0;ba<T.length;ba++)aa.push(ea[T[ba]].radialaxis,
ea[T[ba]].angularaxis);for(var ja in ea._colorAxes)ba=ea[ja],!1!==ba.cauto&&(delete ba.cmin,delete ba.cmax);var ra=!1;c(aa,Y,ea);for(ba=0;ba<Y.length;ba++)Z(ba,!0);for(ba=0;ba<Y.length;ba++)V(ba);ra&&c(aa,Y,ea);for(ba=0;ba<Y.length;ba++)Z(ba,!0);for(ba=0;ba<Y.length;ba++)Z(ba,!1);d(O);aa=m(aa,O);if(aa.length){ea._numBoxes=0;for(ba=ea._numViolins=0;ba<aa.length;ba++)Z(aa[ba],!0);for(ba=0;ba<aa.length;ba++)Z(aa[ba],!1);d(O)}t.getComponentMethod("fx","calc")(O);t.getComponentMethod("errorbars","calc")(O)};
var Q=/(total|sum|min|max|mean|median) (ascending|descending)/;M.rehover=function(O){O._fullLayout._rehover&&O._fullLayout._rehover()};M.redrag=function(O){O._fullLayout._redrag&&O._fullLayout._redrag()};M.generalUpdatePerTraceModule=function(O,T,V,Z){var aa=T.traceHash,Y={},ea;for(ea=0;ea<V.length;ea++){var ca=V[ea],ba=ca[0].trace;ba.visible&&(Y[ba.type]=Y[ba.type]||[],Y[ba.type].push(ca))}for(var ka in aa)Y[ka]||(V=aa[ka][0],V[0].trace.visible=!1,Y[ka]=[V]);for(var qa in Y)aa=Y[qa],aa[0][0].trace._module.plot(O,
T,A.filterVisible(aa),Z);T.traceHash=Y};M.plotBasePlot=function(O,T,V,Z,aa){O=t.getModule(O);V=H(T.calcdata,O)[0];O.plot(T,V,Z,aa)};M.cleanBasePlot=function(O,T,V,Z,aa){T=aa._has&&aa._has(O);V=V._has&&V._has(O);T&&!V&&aa["_"+O+"layer"].selectAll("g.trace").remove()}},{"../components/color":615,"../constants/numerical":724,"../lib":749,"../plot_api/plot_schema":786,"../plot_api/plot_template":787,"../plots/get_data":834,"../registry":880,"./animation_attributes":792,"./attributes":794,"./cartesian/axis_ids":800,
"./cartesian/handle_outline":807,"./command":823,"./font_attributes":825,"./frame_attributes":826,"./layout_attributes":851,d3:169,"d3-time-format":166,"fast-isnumeric":241}],861:[function(b,D,G){D.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:"draglayer plotbg backplot angular-grid radial-grid frontplot angular-line radial-line angular-axis radial-axis".split(" "),radialDragBoxSize:50,angularDragBoxSize:30,
cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],862:[function(b,D,G){function r(g,h,q,t){var v=t[0];t=t[1];var w=k(Math.sin(h)-Math.sin(g));g=k(Math.cos(h)-Math.cos(g));q=Math.tan(q);var A=k(1/q),z=w/g;h=t-z*v;A?w&&g?(w=h/(q-z),v=q*w):g?(w=t*A,v=t):(w=v,v*=q):w&&g?(w=0,v=h):g?(w=0,v=t):w=v=NaN;return[w,v]}function n(g,h,q,t){function v(C,u,F){return r(C,u,F,[g*Math.cos(C),g*Math.sin(C)])}var w=t.length,A=[];var z=l(t,function(C){return m(C,[h,q])?d(C,h):Infinity});var y=v(t[z],
t[e.mod(z-1,w)],h);A.push(y);for(y=0;y<w;z++,y++){var B=t[e.mod(z,w)];if(!m(B,[h,q]))break;A.push([g*Math.cos(B),g*Math.sin(B)])}z=l(t,function(C){return m(C,[h,q])?d(C,q):Infinity});t=v(t[z],t[e.mod(z+1,w)],q);A.push(t);A.push([0,0]);A.push(A[0].slice());return A}function p(g,h,q,t){if(e.isFullCircle([h,q])){h=t.length;q=Array(h+1);var v;for(v=0;v<h;v++){var w=t[v];q[v]=[g*Math.cos(w),g*Math.sin(w)]}q[v]=q[0].slice();g=q}else g=n(g,h,q,t);return g}function k(g){return 1E-10<Math.abs(g)?g:0}function a(g,
h,q){h=h||0;q=q||0;for(var t=g.length,v=Array(t),w=0;w<t;w++){var A=g[w];v[w]=[h+A[0],q-A[1]]}return v}var e=b("../../lib"),f=b("../../lib/polygon").tester,l=e.findIndexOfMin,m=e.isAngleInsideSector,c=e.angleDelta,d=e.angleDist;D.exports={isPtInsidePolygon:function(g,h,q,t,v){if(!m(h,t))return!1;if(q[0]<q[1]){var w=q[0];q=q[1]}else w=q[1],q=q[0];w=f(p(w,t[0],t[1],v));t=f(p(q,t[0],t[1],v));g=[g*Math.cos(h),g*Math.sin(h)];return t.contains(g)&&!w.contains(g)},findPolygonOffset:function(g,h,q,t){var v=
Infinity,w=Infinity;g=p(g,h,q,t);for(h=0;h<g.length;h++)q=g[h],v=Math.min(v,q[0]),w=Math.min(w,-q[1]);return[v,w]},findEnclosingVertexAngles:function(g,h){var q=l(h,function(v){v=c(v,g);return 0<v?v:Infinity}),t=e.mod(q+1,h.length);return[h[q],h[t]]},findIntersectionXY:r,findXYatLength:function(g,h,q,t){var v=-h*q,w=h*h+1,A=2*(h*v-q);q=Math.sqrt(A*A-4*w*(v*v+q*q-g*g));g=(-A+q)/(2*w);w=(-A-q)/(2*w);return[[g,h*g+v+t],[w,h*w+v+t]]},clampTiny:k,pathPolygon:function(g,h,q,t,v,w){g=p(g,h,q,t);return"M"+
a(g,v,w).join("L")},pathPolygonAnnulus:function(g,h,q,t,v,w,A){if(g<h){var z=g;g=h}else z=h;z=a(p(z,q,t,v),w,A);return"M"+a(p(g,q,t,v),w,A).reverse().join("L")+"M"+z.join("L")}}},{"../../lib":749,"../../lib/polygon":761}],863:[function(b,D,G){var r=b("../get_data").getSubplotCalcData,n=b("../../lib").counterRegex,p=b("./polar"),k=b("./constants");G=k.attr;var a=k.name;n=n(a);k={};k[G]={valType:"subplotid",dflt:a,editType:"calc"};D.exports={attr:G,name:a,idRoot:a,idRegex:n,attrRegex:n,attributes:k,
layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(e){for(var f=e._fullLayout,l=e.calcdata,m=f._subplots[a],c=0;c<m.length;c++){var d=m[c],g=r(l,a,d),h=f[d]._subplot;h||(h=p(e,d),f[d]._subplot=h);h.plot(g,f,e._promises)}},clean:function(e,f,l,m){e=m._subplots[a]||[];l=m._has&&m._has("gl");var c=f._has&&f._has("gl");l=l&&!c;for(c=0;c<e.length;c++){var d=e[c],g=m[d]._subplot;if(!f[d]&&g){g.framework.remove();g.layers["radial-axis-title"].remove();for(var h in g.clipPaths)g.clipPaths[h].remove()}l&&
g._scene&&(g._scene.destroy(),g._scene=null)}},toSVG:b("../cartesian").toSVG}},{"../../lib":749,"../cartesian":810,"../get_data":834,"./constants":861,"./layout_attributes":864,"./layout_defaults":865,"./polar":872}],864:[function(b,D,G){G=b("../../components/color/attributes");var r=b("../cartesian/layout_attributes"),n=b("../domain").attributes,p=b("../../lib").extendFlat,k=b("../../plot_api/edit_types").overrideAll;b=k({color:r.color,showline:p({},r.showline,{dflt:!0}),linecolor:r.linecolor,linewidth:r.linewidth,
showgrid:p({},r.showgrid,{dflt:!0}),gridcolor:r.gridcolor,gridwidth:r.gridwidth},"plot","from-root");k=k({tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:r.ticks,ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,showtickprefix:r.showtickprefix,tickprefix:r.tickprefix,showticksuffix:r.showticksuffix,ticksuffix:r.ticksuffix,showexponent:r.showexponent,exponentformat:r.exponentformat,separatethousands:r.separatethousands,
tickfont:r.tickfont,tickangle:r.tickangle,tickformat:r.tickformat,tickformatstops:r.tickformatstops,layer:r.layer},"plot","from-root");var a={visible:p({},r.visible,{dflt:!0}),type:p({},r.type,{values:["-","linear","log","date","category"]}),autorange:p({},r.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:p({},r.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",
impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:r.categoryorder,categoryarray:r.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:p({},r.title.text,{editType:"plot",dflt:""}),font:p({},r.title.font,{editType:"plot"}),editType:"plot"},hoverformat:r.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:r._deprecated.title,titlefont:r._deprecated.titlefont}};
p(a,b,k);r={visible:p({},r.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},categoryorder:r.categoryorder,categoryarray:r.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},
hoverformat:r.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};p(r,b,k);D.exports={domain:n({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:G.background},radialaxis:a,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",
editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":614,"../../lib":749,"../../plot_api/edit_types":780,"../cartesian/layout_attributes":811,"../domain":824}],865:[function(b,D,G){function r(A,z,y,B){function C(T,V){return y(J+"."+T,V)}var u=y("bgcolor");B.bgColor=k.combine(u,B.paper_bgcolor);u=y("sector");y("hole");for(var F=f(B.fullData,v.name,B.id),H=B.layoutOut,J,I=0;I<w.length;I++){J=w[I];p.isPlainObject(A[J])||(A[J]={});var M=A[J],
E=a.newContainer(z,J);E._id=E._name=J;E._attr=B.id+"."+J;E._traceIndices=F.map(function(T){return T._expandedIndex});var L=v.axisName2dataArray[J],P=n(M,E,C,F,L);d(M,E,C,{axData:F,dataAttr:L});L=C("visible");t(E,z,H);C("uirevision",z.uirevision);if(L){var N=C("color");var Q=N===M.color?N:B.font.color}E._m=1;switch(J){case "radialaxis":var O=C("autorange",!E.isValidRange(M.range));M.autorange=O;!O||"linear"!==P&&"-"!==P||C("rangemode");"reversed"===O&&(E._m=-1);C("range");E.cleanRange("range",{dfltRange:[0,
1]});L&&(C("side"),C("angle",u[0]),C("title.text"),p.coerceFont(C,"title.font",{family:B.font.family,size:Math.round(1.2*B.font.size),color:Q}));break;case "angularaxis":if("date"===P){p.log("Polar plots do not support date angular axes yet.");for(P=0;P<F.length;P++)F[P].visible=!1;P=M.type=E.type="linear"}"linear"===P?C("thetaunit"):C("period");O=C("direction");C("rotation",{counterclockwise:0,clockwise:90}[O])}L&&(l(M,E,C,E.type),c(M,E,C,E.type,{tickSuffixDflt:"degrees"===E.thetaunit?"°":void 0}),
m(M,E,C,{outerTicks:!0}),C("showticklabels")&&(p.coerceFont(C,"tickfont",{family:B.font.family,size:B.font.size,color:Q}),C("tickangle"),C("tickformat")),g(M,E,C,{dfltColor:N,bgColor:B.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:q[J]}),C("layer"));"category"!==P&&C("hoverformat");E._input=M}"category"===z.angularaxis.type&&y("gridshape")}function n(A,z,y,B,C){if("-"===y("type")){for(y=0;y<B.length;y++)if(B[y].visible){var u=B[y];break}u&&u[C]&&(z.type=h(u[C],"gregorian"));"-"===
z.type?z.type="linear":A.type=z.type}return z.type}var p=b("../../lib"),k=b("../../components/color"),a=b("../../plot_api/plot_template"),e=b("../subplot_defaults"),f=b("../get_data").getSubplotData,l=b("../cartesian/tick_value_defaults"),m=b("../cartesian/tick_mark_defaults"),c=b("../cartesian/tick_label_defaults"),d=b("../cartesian/category_order_defaults"),g=b("../cartesian/line_grid_defaults"),h=b("../cartesian/axis_autotype"),q=b("./layout_attributes"),t=b("./set_convert"),v=b("./constants"),
w=v.axisNames;D.exports=function(A,z,y){e(A,z,y,{type:v.name,attributes:q,handleDefaults:r,font:z.font,paper_bgcolor:z.paper_bgcolor,fullData:y,layoutOut:z})}},{"../../components/color":615,"../../lib":749,"../../plot_api/plot_template":787,"../cartesian/axis_autotype":798,"../cartesian/category_order_defaults":801,"../cartesian/line_grid_defaults":813,"../cartesian/tick_label_defaults":818,"../cartesian/tick_mark_defaults":819,"../cartesian/tick_value_defaults":820,"../get_data":834,"../subplot_defaults":874,
"./constants":861,"./layout_attributes":864,"./set_convert":873}],866:[function(b,D,G){G=b("../../../traces/scatter/attributes");var r=G.marker;b=b("../../../lib/extend").extendFlat;D.exports={r:b({},G.r,{}),t:b({},G.t,{}),marker:{color:b({},r.color,{}),size:b({},r.size,{}),symbol:b({},r.symbol,{}),opacity:b({},r.opacity,{}),editType:"calc"}}},{"../../../lib/extend":739,"../../../traces/scatter/attributes":1155}],867:[function(b,D,G){function r(p,k){return n({},k,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},
tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:"Legacy polar charts are deprecated! Please switch to *polar* subplots."},visible:{valType:"boolean"}})}G=b("../../cartesian/layout_attributes");var n=b("../../../lib/extend").extendFlat;b=b("../../../plot_api/edit_types").overrideAll;G=n({},G.domain,{});D.exports=b({radialaxis:r("radial",{range:{valType:"info_array",
items:[{valType:"number"},{valType:"number"}]},domain:G,orientation:{valType:"number"}}),angularaxis:r("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:G}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":739,"../../../plot_api/edit_types":780,"../../cartesian/layout_attributes":811}],868:[function(b,D,G){(D.exports=b("./micropolar")).manager=
b("./micropolar_manager")},{"./micropolar":869,"./micropolar_manager":870}],869:[function(b,D,G){var r=b("d3"),n=b("../../../lib").extendDeepAll,p=b("../../../constants/alignment").MID_SHIFT,k=D.exports={version:"0.2.2"};k.Axis=function(){function a(t){c=t||c;t=e.data;var v=e.layout;if("string"==typeof c||c.nodeName)c=r.select(c);c.datum(t).each(function(w,A){w=w.slice();l={data:k.util.cloneJson(w),layout:k.util.cloneJson(v)};var z=0;w.forEach(function(oa,ja){oa.color||(oa.color=v.defaultColorRange[z],
z=(z+1)%v.defaultColorRange.length);oa.strokeColor||(oa.strokeColor="LinePlot"===oa.geometry?oa.color:r.rgb(oa.color).darker().toString());l.data[ja].color=oa.color;l.data[ja].strokeColor=oa.strokeColor;l.data[ja].strokeDash=oa.strokeDash;l.data[ja].strokeSize=oa.strokeSize});w=w.filter(function(oa,ja){oa=oa.visible;return"undefined"===typeof oa||!0===oa});var y=!1;A=w.map(function(oa,ja){y=y||"undefined"!==typeof oa.groupId;return oa});if(y){var B=[];w=r.nest().key(function(oa,ja){return"undefined"!=
typeof oa.groupId?oa.groupId:"unstacked"}).entries(A).map(function(oa,ja){if("unstacked"!==oa.key){var ra=oa.values[0].r.map(function(ha,la){return 0});oa.values.forEach(function(ha,la,ua){ha.yStack=[ra];B.push(ra);ra=k.util.sumArrays(ha.r,ra)})}return oa.values});w=r.merge(w)}w.forEach(function(oa,ja){oa.t=Array.isArray(oa.t[0])?oa.t:[oa.t];oa.r=Array.isArray(oa.r[0])?oa.r:[oa.r]});var C=Math.min(v.width-v.margin.left-v.margin.right,v.height-v.margin.top-v.margin.bottom)/2;C=Math.max(10,C);var u=
[v.margin.left+C,v.margin.top+C];A=y?[0,r.max(k.util.sumArrays(k.util.arrayLast(w).r[0],k.util.arrayLast(B)))]:r.extent(k.util.flattenArray(w.map(function(oa,ja){return oa.r})));v.radialAxis.domain!=k.DATAEXTENT&&(A[0]=0);g=r.scale.linear().domain(v.radialAxis.domain!=k.DATAEXTENT&&v.radialAxis.domain?v.radialAxis.domain:A).range([0,C]);l.layout.radialAxis.domain=g.domain();var F=k.util.flattenArray(w.map(function(oa,ja){return oa.t})),H="string"===typeof F[0];if(H){F=k.util.deduplicate(F);var J=
F.slice();F=r.range(F.length);w=w.map(function(oa,ja){oa.t=[F];y&&(oa.yStack=oa.yStack);return oa})}var I=w.filter(function(oa,ja){return"LinePlot"===oa.geometry||"DotPlot"===oa.geometry}).length===w.length;A=null===v.needsEndSpacing?H||!I:v.needsEndSpacing;var M=v.angularAxis.domain&&v.angularAxis.domain!=k.DATAEXTENT&&!H&&0<=v.angularAxis.domain[0]?v.angularAxis.domain:r.extent(F),E=Math.abs(F[1]-F[0]);I&&!H&&(E=0);M=M.slice();A&&H&&(M[1]+=E);I=v.angularAxis.ticksCount||4;8<I&&(I=I/(I/8)+I%8);v.angularAxis.ticksStep&&
(I=(M[1]-M[0])/I);I=v.angularAxis.ticksStep||(M[1]-M[0])/(I*(v.minorTicks+1));J&&(I=Math.max(Math.round(I),1));M[2]||(M[2]=I);I=r.range.apply(this,M);I=I.map(function(oa,ja){return parseFloat(oa.toPrecision(12))});h=r.scale.linear().domain(M.slice(0,2)).range("clockwise"===v.direction?[0,360]:[360,0]);l.layout.angularAxis.domain=h.domain();l.layout.angularAxis.endPadding=A?E:0;m=r.select(this).select("svg.chart-root");if("undefined"===typeof m||m.empty())A=(new DOMParser).parseFromString("\x3csvg xmlns\x3d'http://www.w3.org/2000/svg' class\x3d'chart-root'\x3e' + '\x3cg class\x3d'outer-group'\x3e' + '\x3cg class\x3d'chart-group'\x3e' + '\x3ccircle class\x3d'background-circle'\x3e\x3c/circle\x3e' + '\x3cg class\x3d'geometry-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'radial axis-group'\x3e' + '\x3ccircle class\x3d'outside-circle'\x3e\x3c/circle\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'angular axis-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'guides-group'\x3e\x3cline\x3e\x3c/line\x3e\x3ccircle r\x3d'0'\x3e\x3c/circle\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3cg class\x3d'legend-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'tooltips-group'\x3e\x3c/g\x3e' + '\x3cg class\x3d'title-group'\x3e\x3ctext\x3e\x3c/text\x3e\x3c/g\x3e' + '\x3c/g\x3e' + '\x3c/svg\x3e",
"application/xml"),A=this.appendChild(this.ownerDocument.importNode(A.documentElement,!0)),m=r.select(A);m.select(".guides-group").style({"pointer-events":"none"});m.select(".angular.axis-group").style({"pointer-events":"none"});m.select(".radial.axis-group").style({"pointer-events":"none"});A=m.select(".chart-group");M={fill:"none",stroke:v.tickColor};var L={"font-size":v.font.size,"font-family":v.font.family,fill:v.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(oa,
ja){return" "+oa+" 0 "+v.font.outlineColor}).join(",")};if(v.showLegend){E=m.select(".legend-group").attr({transform:"translate("+[C,v.margin.top]+")"}).style({display:"block"});var P=w.map(function(oa,ja){ja=k.util.cloneJson(oa);ja.symbol="DotPlot"===oa.geometry?oa.dotType||"circle":"LinePlot"!=oa.geometry?"square":"line";ja.visibleInLegend="undefined"===typeof oa.visibleInLegend||oa.visibleInLegend;ja.color="LinePlot"===oa.geometry?oa.strokeColor:oa.color;return ja});k.Legend().config({data:w.map(function(oa,
ja){return oa.name||"Element"+ja}),legendConfig:n({},k.Legend.defaultConfig().legendConfig,{container:E,elements:P,reverseOrder:v.legend.reverseOrder})})();P=E.node().getBBox();C=Math.min(v.width-P.width-v.margin.left-v.margin.right,v.height-v.margin.top-v.margin.bottom)/2;C=Math.max(10,C);u=[v.margin.left+C,v.margin.top+C];g.range([0,C]);l.layout.radialAxis.domain=g.domain();E.attr("transform","translate("+[u[0]+C,u[1]-C]+")")}else E=m.select(".legend-group").style({display:"none"});m.attr({width:v.width,
height:v.height}).style({opacity:v.opacity});A.attr("transform","translate("+u+")").style({cursor:"crosshair"});var N=[(v.width-(v.margin.left+v.margin.right+2*C+(P?P.width:0)))/2,(v.height-(v.margin.top+v.margin.bottom+2*C))/2];N[0]=Math.max(0,N[0]);N[1]=Math.max(0,N[1]);m.select(".outer-group").attr("transform","translate("+N+")");if(v.title&&v.title.text){P=m.select("g.title-group text").style(L).text(v.title.text);var Q=P.node().getBBox();P.attr({x:u[0]-Q.width/2,y:u[1]-C-20})}P=m.select(".radial.axis-group");
v.radialAxis.gridLinesVisible&&(Q=P.selectAll("circle.grid-circle").data(g.ticks(5)),Q.enter().append("circle").attr({"class":"grid-circle"}).style(M),Q.attr("r",g),Q.exit().remove());P.select("circle.outside-circle").attr({r:C}).style(M);var O=m.select("circle.background-circle").attr({r:C}).style({fill:v.backgroundColor,stroke:v.stroke});v.radialAxis.visible&&(Q=r.svg.axis().scale(g).ticks(5).tickSize(5),P.call(Q).attr({transform:"rotate("+v.radialAxis.orientation+")"}),P.selectAll(".domain").style(M),
P.selectAll("g\x3etext").text(function(oa,ja){return this.textContent+v.radialAxis.ticksSuffix}).style(L).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(oa,ja){return"horizontal"===v.radialAxis.tickOrientation?"rotate("+-v.radialAxis.orientation+") translate("+[0,L["font-size"]]+")":"translate("+[0,L["font-size"]]+")"}}),P.selectAll("g\x3eline").style({stroke:"black"}));P=m.select(".angular.axis-group").selectAll("g.angular-tick").data(I);I=P.enter().append("g").classed("angular-tick",
!0);P.attr({transform:function(oa,ja){return"rotate("+(h(oa)%360+v.orientation)+")"}}).style({display:v.angularAxis.visible?"block":"none"});P.exit().remove();I.append("line").classed("grid-line",!0).classed("major",function(oa,ja){return 0==ja%(v.minorTicks+1)}).classed("minor",function(oa,ja){return 0!=ja%(v.minorTicks+1)}).style(M);I.selectAll(".minor").style({stroke:v.minorTickColor});P.select("line.grid-line").attr({x1:v.tickLength?C-v.tickLength:0,x2:C}).style({display:v.angularAxis.gridLinesVisible?
"block":"none"});I.append("text").classed("axis-text",!0).style(L);P=P.select("text.axis-text").attr({x:C+v.labelOffset,dy:p+"em",transform:function(oa,ja){oa=h(oa)%360+v.orientation;ja=C+v.labelOffset;var ra=v.angularAxis.tickOrientation;return"horizontal"==ra?"rotate("+-oa+" "+ja+" 0)":"radial"==ra?270>oa&&90<oa?"rotate(180 "+ja+" 0)":null:"rotate("+(180>=oa&&0<oa?-90:90)+" "+ja+" 0)"}}).style({"text-anchor":"middle",display:v.angularAxis.labelsVisible?"block":"none"}).text(function(oa,ja){return 0!=
ja%(v.minorTicks+1)?"":J?J[oa]+v.angularAxis.ticksSuffix:oa+v.angularAxis.ticksSuffix}).style(L);v.angularAxis.rewriteTicks&&P.text(function(oa,ja){return 0!=ja%(v.minorTicks+1)?"":v.angularAxis.rewriteTicks(this.textContent,ja)});P=r.max(A.selectAll(".angular-tick text")[0].map(function(oa,ja){return oa.getCTM().e+oa.getBBox().width}));E.attr({transform:"translate("+[C+P,v.margin.top]+")"});P=0<m.select("g.geometry-group").selectAll("g").size();var T=m.select("g.geometry-group").selectAll("g.geometry").data(w);
T.enter().append("g").attr({"class":function(oa,ja){return"geometry geometry"+ja}});T.exit().remove();if(w[0]||P){var V=[];w.forEach(function(oa,ja){var ra={};ra.radialScale=g;ra.angularScale=h;ra.container=T.filter(function(ha,la){return la==ja});ra.geometry=oa.geometry;ra.orientation=v.orientation;ra.direction=v.direction;ra.index=ja;V.push({data:oa,geometryConfig:ra})});var Z=[];r.nest().key(function(oa,ja){return"undefined"!=typeof oa.data.groupId||"unstacked"}).entries(V).forEach(function(oa,
ja){"unstacked"===oa.key?Z=Z.concat(oa.values.map(function(ra,ha){return[ra]})):Z.push(oa.values)});Z.forEach(function(oa,ja){var ra=Array.isArray(oa)?oa[0].geometryConfig.geometry:oa.geometryConfig.geometry;oa=oa.map(function(ha,la){return n(k[ra].defaultConfig(),ha)});k[ra]().config(oa)()})}var aa=m.select(".guides-group");w=m.select(".tooltips-group");var Y=k.tooltipPanel().config({container:w,fontSize:8})(),ea=k.tooltipPanel().config({container:w,fontSize:8})(),ca=k.tooltipPanel().config({container:w,
hasTick:!0})(),ba,ka;if(!H){var qa=aa.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});A.on("mousemove.angular-guide",function(oa,ja){oa=k.util.getMousePos(O).angle;qa.attr({x2:-C,transform:"rotate("+oa+")"}).style({opacity:.5});ba=h.invert((oa+180+360-v.orientation)%360);oa=k.util.convertToCartesian(C+12,oa+180);Y.text(k.util.round(ba)).move([oa[0]+u[0],oa[1]+u[1]])}).on("mouseout.angular-guide",function(oa,ja){aa.select("line").style({opacity:0})})}var pa=aa.select("circle").style({stroke:"grey",
fill:"none"});A.on("mousemove.radial-guide",function(oa,ja){oa=k.util.getMousePos(O).radius;pa.attr({r:oa}).style({opacity:.5});ka=g.invert(k.util.getMousePos(O).radius);oa=k.util.convertToCartesian(oa,v.radialAxis.orientation);ea.text(k.util.round(ka)).move([oa[0]+u[0],oa[1]+u[1]])}).on("mouseout.radial-guide",function(oa,ja){pa.style({opacity:0});ca.hide();Y.hide();ea.hide()});m.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(oa,ja){var ra=r.select(this);ja=this.style.fill;ra.attr({"data-opacity":this.style.opacity||
1});if(ja&&"none"!==ja){ra.attr({"data-fill":ja});ja=r.hsl(ja).darker().toString();ra.style({fill:ja,opacity:1});ra=k.util.round(oa[0]);var ha=k.util.round(oa[1]);H&&(ra=J[oa[0]]);oa="t: "+ra+", r: "+ha;ra=this.getBoundingClientRect();ha=m.node().getBoundingClientRect();ra=[ra.left+ra.width/2-N[0]-ha.left,ra.top+ra.height/2-N[1]-ha.top];ca.config({color:ja}).text(oa);ca.move(ra)}else ja=this.style.stroke||"black",ra.attr({"data-stroke":ja}),ja=r.hsl(ja).darker().toString(),ra.style({stroke:ja,opacity:1})}).on("mousemove.tooltip",
function(oa,ja){if(0!=r.event.which)return!1;r.select(this).attr("data-fill")&&ca.show()}).on("mouseout.tooltip",function(oa,ja){ca.hide();oa=r.select(this);(ja=oa.attr("data-fill"))?oa.style({fill:ja,opacity:oa.attr("data-opacity")}):oa.style({stroke:oa.attr("data-stroke"),opacity:oa.attr("data-opacity")})})});return q}var e={data:[],layout:{}},f={},l={},m,c,d=r.dispatch("hover"),g,h,q={render:function(t){a(t);return this},config:function(t){if(!arguments.length)return e;var v=k.util.cloneJson(t);
v.data.forEach(function(w,A){e.data[A]||(e.data[A]={});n(e.data[A],k.Axis.defaultConfig().data[0]);n(e.data[A],w)});n(e.layout,k.Axis.defaultConfig().layout);n(e.layout,v.layout);return this},getLiveConfig:function(){return l},getinputConfig:function(){return f},radialScale:function(t){return g},angularScale:function(t){return h},svg:function(){return m}};r.rebind(q,d,"on");return q};k.Axis.defaultConfig=function(a,e){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,
strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:r.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],
ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}};k.util={};k.DATAEXTENT="dataExtent";k.AREA="AreaChart";k.LINE="LinePlot";k.DOT="DotPlot";k.BAR="BarChart";k.util._override=function(a,e){for(var f in a)f in e&&(e[f]=a[f])};k.util._extend=function(a,
e){for(var f in a)e[f]=a[f]};k.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)};k.util.dataFromEquation2=function(a,e){e=e||6;return r.range(0,360+e,e).map(function(f,l){l=a(f*Math.PI/180);return[f,l]})};k.util.dataFromEquation=function(a,e,f){e=e||6;var l=[],m=[];r.range(0,360+e,e).forEach(function(c,d){d=a(c*Math.PI/180);l.push(c);m.push(d)});e={t:l,r:m};f&&(e.name=f);return e};k.util.ensureArray=function(a,e){if("undefined"===typeof a)return null;var f=
[].concat(a);return r.range(e).map(function(l,m){return f[m]||f[0]})};k.util.fillArrays=function(a,e,f){e.forEach(function(l,m){a[l]=k.util.ensureArray(a[l],f)});return a};k.util.cloneJson=function(a){return JSON.parse(JSON.stringify(a))};k.util.validateKeys=function(a,e){"string"===typeof e&&(e=e.split("."));var f=e.shift();return a[f]&&(!e.length||objHasKeys(a[f],e))};k.util.sumArrays=function(a,e){return r.zip(a,e).map(function(f,l){return r.sum(f)})};k.util.arrayLast=function(a){return a[a.length-
1]};k.util.arrayEqual=function(a,e){for(var f=Math.max(a.length,e.length,1);0<=f--&&a[f]===e[f];);return-2===f};k.util.flattenArray=function(a){for(var e=[];!k.util.arrayEqual(e,a);)e=a,a=[].concat.apply([],a);return a};k.util.deduplicate=function(a){return a.filter(function(e,f,l){return l.indexOf(e)==f})};k.util.convertToCartesian=function(a,e){e=e*Math.PI/180;return[a*Math.cos(e),a*Math.sin(e)]};k.util.round=function(a,e){e=Math.pow(10,e||2);return Math.round(a*e)/e};k.util.getMousePos=function(a){a=
r.mouse(a.node());var e=a[0],f=a[1],l={};l.x=e;l.y=f;l.pos=a;l.angle=180*(Math.atan2(f,e)+Math.PI)/Math.PI;l.radius=Math.sqrt(e*e+f*f);return l};k.util.duplicatesCount=function(a){for(var e={},f,l={},m=0,c=a.length;m<c;m++)f=a[m],f in e?(e[f]++,l[f]=e[f]):e[f]=1;return l};k.util.duplicates=function(a){return Object.keys(k.util.duplicatesCount(a))};k.util.translator=function(a,e,f,l){l&&(l=f.slice(),f=e,e=l);var m=e.reduce(function(c,d){if("undefined"!=typeof c)return c[d]},a);"undefined"!==typeof m&&
(e.reduce(function(c,d,g){if("undefined"!=typeof c)return g===e.length-1&&delete c[d],c[d]},a),f.reduce(function(c,d,g){"undefined"===typeof c[d]&&(c[d]={});g===f.length-1&&(c[d]=m);return c[d]},a))};k.PolyChart=function(){function a(){var m=e[0].geometryConfig,c=m.container;"string"==typeof c&&(c=r.select(c));c.datum(e).each(function(d,g){var h=!!d[0].data.yStack,q=d.map(function(u,F){return h?r.zip(u.data.t[0],u.data.r[0],u.data.yStack[0]):r.zip(u.data.t[0],u.data.r[0])}),t=m.angularScale,v=m.radialScale.domain()[0],
w={bar:function(u,F,H){H=d[H].data;F=m.radialScale(u[1])-m.radialScale(0);u=m.radialScale(u[2]||0);H=H.barWidth;r.select(this).attr({"class":"mark bar",d:"M"+[[F+u,-H/2],[F+u,H/2],[u,H/2],[u,-H/2]].join("L")+"Z",transform:function(J,I){return"rotate("+(m.orientation+t(J[0]))+")"}})},dot:function(u,F,H){var J=u[2]?[u[0],u[1]+u[2]]:u;u=r.svg.symbol().size(d[H].data.dotSize).type(d[H].data.dotType)(u,F);r.select(this).attr({"class":"mark dot",d:u,transform:function(I,M){I=m.radialScale(J[1]);M=(m.angularScale(J[0])+
m.orientation)*Math.PI/180;return"translate("+[I*Math.cos(M),I*Math.sin(M)]+")"}})}},A=r.svg.line.radial().interpolate(d[0].data.lineInterpolation).radius(function(u){return m.radialScale(u[1])}).angle(function(u){return m.angularScale(u[0])*Math.PI/180});w.line=function(u,F,H){var J=u[2]?q[H].map(function(M,E){return[M[0],M[1]+M[2]]}):q[H];r.select(this).each(w.dot).style({opacity:function(M,E){return+d[H].data.dotVisible},fill:B.stroke(u,F,H)}).attr({"class":"mark dot"});if(!(0<F)){var I=r.select(this.parentNode).selectAll("path.line").data([0]);
I.enter().insert("path");I.attr({"class":"line",d:A(J),transform:function(M,E){return"rotate("+(m.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(M,E){return B.fill(u,F,H)},"fill-opacity":0,stroke:function(M,E){return B.stroke(u,F,H)},"stroke-width":function(M,E){return B["stroke-width"](u,F,H)},"stroke-dasharray":function(M,E){return B["stroke-dasharray"](u,F,H)},opacity:function(M,E){return B.opacity(u,F,H)},display:function(M,E){return B.display(u,F,H)}})}};g=m.angularScale.range();
var z=Math.abs(g[1]-g[0])/q[0].length*Math.PI/180,y=r.svg.arc().startAngle(function(u){return-z/2}).endAngle(function(u){return z/2}).innerRadius(function(u){return m.radialScale(v+(u[2]||0))}).outerRadius(function(u){return m.radialScale(v+(u[2]||0))+m.radialScale(u[1])});w.arc=function(u,F,H){r.select(this).attr({"class":"mark arc",d:y,transform:function(J,I){return"rotate("+(m.orientation+t(J[0])+90)+")"}})};var B={fill:function(u,F,H){return d[H].data.color},stroke:function(u,F,H){return d[H].data.strokeColor},
"stroke-width":function(u,F,H){return d[H].data.strokeSize+"px"},"stroke-dasharray":function(u,F,H){return l[d[H].data.strokeDash]},opacity:function(u,F,H){return d[H].data.opacity},display:function(u,F,H){return"undefined"===typeof d[H].data.visible||d[H].data.visible?"block":"none"}};g=r.select(this).selectAll("g.layer").data(q);g.enter().append("g").attr({"class":"layer"});var C=g.selectAll("path.mark").data(function(u,F){return u});C.enter().append("path").attr({"class":"mark"});C.style(B).each(w[m.geometryType]);
C.exit().remove();g.exit().remove()})}var e=[k.PolyChart.defaultConfig()],f=r.dispatch("hover"),l={solid:"none",dash:[5,2],dot:[2,5]};a.config=function(m){if(!arguments.length)return e;m.forEach(function(c,d){e[d]||(e[d]={});n(e[d],k.PolyChart.defaultConfig());n(e[d],c)});return this};a.getColorScale=function(){};r.rebind(a,f,"on");return a};k.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",
strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:r.scale.category20()}}};k.BarChart=function(){return k.PolyChart()};k.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}};k.AreaChart=function(){return k.PolyChart()};k.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}};
k.DotPlot=function(){return k.PolyChart()};k.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}};k.LinePlot=function(){return k.PolyChart()};k.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}};k.Legend=function(){function a(){var l=e.legendConfig,m=e.data.map(function(A,z){return[].concat(A).map(function(y,B){var C=n({},l.elements[z]);C.name=y;C.color=[].concat(l.elements[z].color)[B];return C})}),c=r.merge(m);c=c.filter(function(A,
z){return l.elements[z]&&(l.elements[z].visibleInLegend||"undefined"===typeof l.elements[z].visibleInLegend)});l.reverseOrder&&(c=c.reverse());var d=l.container;if("string"==typeof d||d.nodeName)d=r.select(d);var g=c.map(function(A,z){return A.color}),h=l.fontSize,q=(m=null==l.isContinuous?"number"===typeof c[0]:l.isContinuous)?l.height:h*c.length;d=d.classed("legend-group",!0).selectAll("svg").data([0]);var t=d.enter().append("svg").attr({width:300,height:q+h,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",
version:"1.1"});t.append("g").classed("legend-axis",!0);t.append("g").classed("legend-marks",!0);t=r.range(c.length);var v=r.scale[m?"linear":"ordinal"]().domain(t).range(g),w=r.scale[m?"linear":"ordinal"]().domain(t)[m?"range":"rangePoints"]([0,q]);m?(q=d.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(g),q.enter().append("stop"),q.attr({offset:function(A,z){return z/(g.length-1)*100+"%"}}).style({"stop-color":function(A,
z){return A}}),d.append("rect").classed("legend-mark",!0).attr({height:l.height,width:l.colorBandWidth,fill:"url(#grad1)"})):(q=d.select(".legend-marks").selectAll("path.legend-mark").data(c),q.enter().append("path").classed("legend-mark",!0),q.attr({transform:function(A,z){return"translate("+[h/2,w(z)+h/2]+")"},d:function(A,z){A=A.symbol;z=3*h;A="line"===A?"M"+[[-h/2,-h/12],[h/2,-h/12],[h/2,h/12],[-h/2,h/12]]+"Z":-1!=r.svg.symbolTypes.indexOf(A)?r.svg.symbol().type(A).size(z)():r.svg.symbol().type("square").size(z)();
return A},fill:function(A,z){return v(z)}}),q.exit().remove());q=r.svg.axis().scale(w).orient("right");d=d.select("g.legend-axis").attr({transform:"translate("+[m?l.colorBandWidth:h,h/2]+")"}).call(q);d.selectAll(".domain").style({fill:"none",stroke:"none"});d.selectAll("line").style({fill:"none",stroke:m?l.textColor:"none"});d.selectAll("text").style({fill:l.textColor,"font-size":l.fontSize}).text(function(A,z){return c[z].name});return a}var e=k.Legend.defaultConfig(),f=r.dispatch("hover");a.config=
function(l){if(!arguments.length)return e;n(e,l);return this};r.rebind(a,f,"on");return a};k.Legend.defaultConfig=function(a,e){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}};k.tooltipPanel=function(){var a,e,f,l={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},m="tooltip-"+
k.tooltipPanel.uid++,c=function(){a=l.container.selectAll("g."+m).data([0]);var d=a.enter().append("g").classed(m,!0).style({"pointer-events":"none",display:"none"});f=d.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"});e=d.append("text").attr({dx:l.padding+10,dy:.3*+l.fontSize});return c};c.text=function(d){var g=r.hsl(l.color).l,h=.5<=g?"#aaa":"white";d=d||"";e.style({fill:.5<=g?"black":"white","font-size":l.fontSize+"px"}).text(d);g=l.padding;d=e.node().getBBox();h={fill:l.color,
stroke:h,"stroke-width":"2px"};var q=d.width+2*g+10;d=d.height+2*g;f.attr({d:"M"+[[10,-d/2],[10,-d/4],[l.hasTick?0:10,0],[10,d/4],[10,d/2],[q,d/2],[q,-d/2]].join("L")+"Z"}).style(h);a.attr({transform:"translate("+[10,-d/2+2*g]+")"});a.style({display:"block"});return c};c.move=function(d){if(a)return a.attr({transform:"translate("+[d[0],d[1]]+")"}).style({display:"block"}),c};c.hide=function(){if(a)return a.style({display:"none"}),c};c.show=function(){if(a)return a.style({display:"block"}),c};c.config=
function(d){n(l,d);return c};return c};k.tooltipPanel.uid=1;k.adapter={};k.adapter.plotly=function(){return{convert:function(a,e){var f={};if(a.data&&(f.data=a.data.map(function(g,h){g=n({},g);[[g,["marker","color"],["color"]],[g,["marker","opacity"],["opacity"]],[g,["marker","line","color"],["strokeColor"]],[g,["marker","line","dash"],["strokeDash"]],[g,["marker","line","width"],["strokeSize"]],[g,["marker","symbol"],["dotType"]],[g,["marker","size"],["dotSize"]],[g,["marker","barWidth"],["barWidth"]],
[g,["line","interpolation"],["lineInterpolation"]],[g,["showlegend"],["visibleInLegend"]]].forEach(function(q,t){k.util.translator.apply(null,q.concat(e))});e||delete g.marker;e&&delete g.groupId;e?("LinePlot"===g.geometry?(g.type="scatter",!0===g.dotVisible?(delete g.dotVisible,g.mode="lines+markers"):g.mode="lines"):"DotPlot"===g.geometry?(g.type="scatter",g.mode="markers"):"AreaChart"===g.geometry?g.type="area":"BarChart"===g.geometry&&(g.type="bar"),delete g.geometry):("scatter"===g.type?"lines"===
g.mode?g.geometry="LinePlot":"markers"===g.mode?g.geometry="DotPlot":"lines+markers"===g.mode&&(g.geometry="LinePlot",g.dotVisible=!0):"area"===g.type?g.geometry="AreaChart":"bar"===g.type&&(g.geometry="BarChart"),delete g.mode,delete g.type);return g}),!e&&a.layout&&"stack"===a.layout.barmode)){var l=k.util.duplicates(f.data.map(function(g,h){return g.geometry}));f.data.forEach(function(g,h){g=l.indexOf(g.geometry);-1!=g&&(f.data[h].groupId=g)})}if(a.layout){a=n({},a.layout);[[a,["plot_bgcolor"],
["backgroundColor"]],[a,["showlegend"],["showLegend"]],[a,["radialaxis"],["radialAxis"]],[a,["angularaxis"],["angularAxis"]],[a.angularaxis,["showline"],["gridLinesVisible"]],[a.angularaxis,["showticklabels"],["labelsVisible"]],[a.angularaxis,["nticks"],["ticksCount"]],[a.angularaxis,["tickorientation"],["tickOrientation"]],[a.angularaxis,["ticksuffix"],["ticksSuffix"]],[a.angularaxis,["range"],["domain"]],[a.angularaxis,["endpadding"],["endPadding"]],[a.radialaxis,["showline"],["gridLinesVisible"]],
[a.radialaxis,["tickorientation"],["tickOrientation"]],[a.radialaxis,["ticksuffix"],["ticksSuffix"]],[a.radialaxis,["range"],["domain"]],[a.angularAxis,["showline"],["gridLinesVisible"]],[a.angularAxis,["showticklabels"],["labelsVisible"]],[a.angularAxis,["nticks"],["ticksCount"]],[a.angularAxis,["tickorientation"],["tickOrientation"]],[a.angularAxis,["ticksuffix"],["ticksSuffix"]],[a.angularAxis,["range"],["domain"]],[a.angularAxis,["endpadding"],["endPadding"]],[a.radialAxis,["showline"],["gridLinesVisible"]],
[a.radialAxis,["tickorientation"],["tickOrientation"]],[a.radialAxis,["ticksuffix"],["ticksSuffix"]],[a.radialAxis,["range"],["domain"]],[a.font,["outlinecolor"],["outlineColor"]],[a.legend,["traceorder"],["reverseOrder"]],[a,["labeloffset"],["labelOffset"]],[a,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(g,h){k.util.translator.apply(null,g.concat(e))});e?("undefined"!==typeof a.tickLength&&(a.angularaxis.ticklen=a.tickLength,delete a.tickLength),a.tickColor&&(a.angularaxis.tickcolor=
a.tickColor,delete a.tickColor)):(a.angularAxis&&"undefined"!==typeof a.angularAxis.ticklen&&(a.tickLength=a.angularAxis.ticklen),a.angularAxis&&"undefined"!==typeof a.angularAxis.tickcolor&&(a.tickColor=a.angularAxis.tickcolor));a.legend&&"boolean"!=typeof a.legend.reverseOrder&&(a.legend.reverseOrder="normal"!=a.legend.reverseOrder);a.legend&&"boolean"==typeof a.legend.traceorder&&(a.legend.traceorder=a.legend.traceorder?"reversed":"normal",delete a.legend.reverseOrder);if(a.margin&&"undefined"!=
typeof a.margin.t){var m=["t","r","b","l","pad"],c=["top","right","bottom","left","pad"],d={};r.entries(a.margin).forEach(function(g,h){d[c[m.indexOf(g.key)]]=g.value});a.margin=d}e&&(delete a.needsEndSpacing,delete a.minorTickColor,delete a.minorTicks,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksCount,delete a.angularaxis.ticksStep,delete a.angularaxis.rewriteTicks,delete a.angularaxis.nticks,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksCount,delete a.radialaxis.ticksStep,
delete a.radialaxis.rewriteTicks,delete a.radialaxis.nticks);f.layout=a}return f}}}},{"../../../constants/alignment":717,"../../../lib":749,d3:169}],870:[function(b,D,G){var r=b("d3");G=b("../../../lib");var n=b("../../../components/color"),p=b("./micropolar"),k=b("./undo_manager"),a=G.extendDeepAll,e=D.exports={};e.framework=function(f){function l(t,v){v&&(h=v);r.select(r.select(h).node().parentNode).selectAll(".svg-container\x3e*:not(.chart-root)").remove();m=m?a(m,t):t;d||(d=p.Axis());g=p.adapter.plotly().convert(m);
d.config(g).render(h);f.data=m.data;f.layout=m.layout;e.fillLayout(f);return m}var m,c,d,g,h,q=new k;l.isPolar=!0;l.svg=function(){return d.svg()};l.getConfig=function(){return m};l.getLiveConfig=function(){return p.adapter.plotly().convert(d.getLiveConfig(),!0)};l.getLiveScales=function(){return{t:d.angularScale(),r:d.radialScale()}};l.setUndoPoint=function(){var t=this,v=p.util.cloneJson(m);(function(w,A){q.add({undo:function(){A&&t(A)},redo:function(){t(w)}})})(v,c);c=p.util.cloneJson(v)};l.undo=
function(){q.undo()};l.redo=function(){q.redo()};return l};e.fillLayout=function(f){var l=r.select(f).selectAll(".plot-container"),m=l.selectAll(".svg-container"),c=f.framework&&f.framework.svg&&f.framework.svg();f._fullLayout=a({width:800,height:600,paper_bgcolor:n.background,_container:l,_paperdiv:m,_paper:c},f.layout)}},{"../../../components/color":615,"../../../lib":749,"./micropolar":869,"./undo_manager":871,d3:169}],871:[function(b,D,G){D.exports=function(){function r(e,f){if(!e)return this;
k=!0;e[f]();k=!1;return this}var n=[],p=-1,k=!1,a;return{add:function(e){if(k)return this;n.splice(p+1,n.length-p);n.push(e);p=n.length-1;return this},setCallback:function(e){a=e},undo:function(){var e=n[p];if(!e)return this;r(e,"undo");--p;a&&a(e.undo);return this},redo:function(){var e=n[p+1];if(!e)return this;r(e,"redo");p+=1;a&&a(e.redo);return this},clear:function(){n=[];p=-1},hasUndo:function(){return-1!==p},hasRedo:function(){return p<n.length-1},getCommands:function(){return n},getPreviousCommand:function(){return n[p-
1]},getIndex:function(){return p}}}},{}],872:[function(b,D,G){function r(T,V){this.id=V;this.gd=T;this.radialAxisAngle=this.vangles=this._hasClipOnAxisFalse=null;this.traceHash={};this.layers={};this.clipPaths={};this.clipIds={};this.viewInitial={};T=T._fullLayout;this.clipIds.forTraces="clip"+T._uid+V+"-for-traces";this.clipPaths.forTraces=T._clips.append("clipPath").attr("id",this.clipIds.forTraces);this.clipPaths.forTraces.append("path");this.framework=T._polarlayer.append("g").attr("class",V);
this.angularTickLayout=this.radialTickLayout=null}function n(T){var V=T.ticks+String(T.ticklen)+String(T.showticklabels);"side"in T&&(V+=T.side);return V}function p(T,V){var Z=c.findIndexOfMin(V,function(aa){return c.angleDist(T,aa)});return V[Z]}function k(T,V,Z){V?(T.attr("display",null),T.attr(Z)):T&&T.attr("display","none");return T}function a(T,V){return"translate("+T+","+V+")"}function e(T){return"rotate("+T+")"}var f=b("d3"),l=b("tinycolor2"),m=b("../../registry"),c=b("../../lib"),d=b("../../components/color"),
g=b("../../components/drawing"),h=b("../plots"),q=b("../../plots/cartesian/axes"),t=b("../cartesian/set_convert"),v=b("./set_convert"),w=b("../cartesian/autorange").doAutoRange,A=b("../cartesian/dragbox"),z=b("../../components/dragelement"),y=b("../../components/fx"),B=b("../../components/titles"),C=b("../cartesian/select").prepSelect,u=b("../cartesian/select").selectOnClick,F=b("../cartesian/select").clearSelect,H=b("../../lib/setcursor"),J=b("../../lib/clear_gl_canvases"),I=b("../../plot_api/subroutines").redrawReglTraces,
M=b("../../constants/alignment").MID_SHIFT,E=b("./constants"),L=b("./helpers"),P=c._,N=c.mod,Q=c.deg2rad,O=c.rad2deg;b=r.prototype;D.exports=function(T,V){return new r(T,V)};b.plot=function(T,V){var Z=V[this.id];this._hasClipOnAxisFalse=!1;for(var aa=0;aa<T.length;aa++)if(!1===T[aa][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(V,Z);this.updateLayout(V,Z);h.generalUpdatePerTraceModule(this.gd,this,T,Z);this.updateFx(V,Z)};b.updateLayers=function(T,V){var Z=this.layers;T=
V.radialaxis;V=V.angularaxis;var aa=E.layerNames,Y=aa.indexOf("frontplot");aa=aa.slice(0,Y);V="below traces"===V.layer;T="below traces"===T.layer;V&&aa.push("angular-line");T&&aa.push("radial-line");V&&aa.push("angular-axis");T&&aa.push("radial-axis");aa.push("frontplot");V||aa.push("angular-line");T||aa.push("radial-line");V||aa.push("angular-axis");T||aa.push("radial-axis");T=this.framework.selectAll(".polarsublayer").data(aa,String);T.enter().append("g").attr("class",function(ea){return"polarsublayer "+
ea}).each(function(ea){var ca=Z[ea]=f.select(this);switch(ea){case "frontplot":ca.append("g").classed("barlayer",!0);ca.append("g").classed("scatterlayer",!0);break;case "backplot":ca.append("g").classed("maplayer",!0);break;case "plotbg":Z.bg=ca.append("path");break;case "radial-grid":ca.style("fill","none");break;case "angular-grid":ca.style("fill","none");break;case "radial-line":ca.append("line").style("fill","none");break;case "angular-line":ca.append("path").style("fill","none")}});T.order()};
b.updateLayout=function(T,V){var Z=this.layers,aa=T._size,Y=V.radialaxis,ea=V.angularaxis,ca=V.domain.x,ba=V.domain.y;this.xOffset=aa.l+aa.w*ca[0];this.yOffset=aa.t+aa.h*(1-ba[1]);var ka=this.xLength=aa.w*(ca[1]-ca[0]),qa=this.yLength=aa.h*(ba[1]-ba[0]),pa=V.sector;this.sectorInRad=pa.map(Q);var oa=pa[0];pa=pa[1]-oa;oa=N(oa,360);pa=oa+pa;var ja=Math.cos(Q(oa)),ra=Math.sin(Q(oa)),ha=Math.cos(Q(pa)),la=Math.sin(Q(pa));var ua=90>=oa&&90<=pa||90<oa&&450<=pa?1:0>=ra&&0>=la?0:Math.max(ra,la);var na=180>=
oa&&180<=pa||180<oa&&540<=pa?-1:0<=ja&&0<=ha?0:Math.min(ja,ha);oa=this.sectorBBox=[na,270>=oa&&270<=pa||270<oa&&630<=pa?-1:0<=ra&&0<=la?0:Math.min(ra,la),360<=pa?1:0>=ja&&0>=ha?0:Math.max(ja,ha),ua];pa=oa[2]-oa[0];ra=Math.abs((oa[3]-oa[1])/pa);qa/ka>ra?(ja=ka,ra*=ka,ka=(qa-ra)/aa.h/2,ca=[ca[0],ca[1]],ba=[ba[0]+ka,ba[1]-ka]):(ja=qa/ra,ra=qa,ka=(ka-ja)/aa.w/2,ca=[ca[0]+ka,ca[1]-ka],ba=[ba[0],ba[1]]);this.xLength2=ja;this.yLength2=ra;this.xDomain2=ca;this.yDomain2=ba;ka=this.xOffset2=aa.l+aa.w*ca[0];
qa=this.yOffset2=aa.t+aa.h*(1-ba[1]);ja=this.radius=ja/pa;ra=this.innerRadius=V.hole*ja;pa=this.cx=ka-ja*oa[0];oa=this.cy=qa+ja*oa[3];ha=this.cxx=pa-ka;la=this.cyy=oa-qa;this.radialAxis=this.mockAxis(T,V,Y,{_id:"x",side:{counterclockwise:"top",clockwise:"bottom"}[Y.side],domain:[ra/aa.w,ja/aa.w]});this.angularAxis=this.mockAxis(T,V,ea,{side:"right",domain:[0,Math.PI],autorange:!1});this.doAutoRange(T,V);this.updateAngularAxis(T,V);this.updateRadialAxis(T,V);this.updateRadialAxisTitle(T,V);this.xaxis=
this.mockCartesianAxis(T,V,{_id:"x",domain:ca});this.yaxis=this.mockCartesianAxis(T,V,{_id:"y",domain:ba});T=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",T).attr("transform",a(ha,la));Z.frontplot.attr("transform",a(ka,qa)).call(g.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd);Z.bg.attr("d",T).attr("transform",a(pa,oa)).call(d.fill,V.bgcolor)};b.mockAxis=function(T,V,Z,aa){Z=c.extendFlat({},Z,aa);v(Z,V,T);return Z};b.mockCartesianAxis=function(T,V,Z){var aa=
this,Y=Z._id,ea=c.extendFlat({type:"linear"},Z);t(ea,T);var ca={x:[0,2],y:[1,3]};ea.setRange=function(){var ba=aa.sectorBBox,ka=ca[Y],qa=aa.radialAxis._rl;qa=(qa[1]-qa[0])/(1-V.hole);ea.range=[ba[ka[0]]*qa,ba[ka[1]]*qa]};ea.isPtWithinRange="x"===Y?function(ba){return aa.isPtInside(ba)}:function(){return!0};ea.setRange();ea.setScale();return ea};b.doAutoRange=function(T,V){var Z=this.gd;T=this.radialAxis;V=V.radialaxis;T.setScale();w(Z,T);Z=T.range;V.range=Z.slice();V._input.range=Z.slice();T._rl=
[T.r2l(Z[0],null,"gregorian"),T.r2l(Z[1],null,"gregorian")]};b.updateRadialAxis=function(T,V){var Z=this,aa=Z.gd;T=Z.layers;var Y=Z.radius,ea=Z.innerRadius,ca=Z.cx,ba=Z.cy,ka=V.radialaxis,qa=N(V.sector[0],360),pa=Z.radialAxis;V=ea<Y;Z.fillViewInitialKey("radialaxis.angle",ka.angle);Z.fillViewInitialKey("radialaxis.range",pa.range.slice());pa.setGeometry();"auto"===pa.tickangle&&90<qa&&270>=qa&&(pa.tickangle=180);qa=function(la){return"translate("+(pa.l2p(la.x)+ea)+",0)"};var oa=function(la){return Z.pathArc(pa.r2p(la.x)+
ea)},ja=n(ka);Z.radialTickLayout!==ja&&(T["radial-axis"].selectAll(".xtick").remove(),Z.radialTickLayout=ja);if(V){pa.setScale();ja=q.calcTicks(pa);var ra=q.clipEnds(pa,ja),ha=q.getTickSigns(pa)[2];q.drawTicks(aa,pa,{vals:ja,layer:T["radial-axis"],path:q.makeTickPath(pa,0,ha),transFn:qa,crisp:!1});q.drawGrid(aa,pa,{vals:ra,layer:T["radial-grid"],path:oa,transFn:c.noop,crisp:!1});q.drawLabels(aa,pa,{vals:ja,layer:T["radial-axis"],transFn:qa,labelFns:q.makeLabelFns(pa,0)})}aa=Z.radialAxisAngle=Z.vangles?
O(p(Q(ka.angle),Z.vangles)):ka.angle;ca=a(ca,ba);ba=ca+e(-aa);k(T["radial-axis"],V&&(ka.showticklabels||ka.ticks),{transform:ba});k(T["radial-grid"],V&&ka.showgrid,{transform:ca});k(T["radial-line"].select("line"),V&&ka.showline,{x1:ea,y1:0,x2:Y,y2:0,transform:ba}).attr("stroke-width",ka.linewidth).call(d.stroke,ka.linecolor)};b.updateRadialAxisTitle=function(T,V,Z){T=this.gd;var aa=this.radius,Y=this.cx,ea=this.cy;V=V.radialaxis;var ca=this.id+"title";Z=void 0!==Z?Z:this.radialAxisAngle;var ba=Q(Z),
ka=Math.cos(ba);ba=Math.sin(ba);var qa=0;if(V.title){qa=g.bBox(this.layers["radial-axis"].node()).height;var pa=V.title.font.size;qa="counterclockwise"===V.side?-qa-.4*pa:qa+.8*pa}this.layers["radial-axis-title"]=B.draw(T,ca,{propContainer:V,propName:this.id+".radialaxis.title",placeholder:P(T,"Click to enter radial axis title"),attributes:{x:Y+aa/2*ka+qa*ba,y:ea-aa/2*ba+qa*ka,"text-anchor":"middle"},transform:{rotate:-Z}})};b.updateAngularAxis=function(T,V){var Z=this;T=Z.gd;var aa=Z.layers,Y=Z.radius,
ea=Z.innerRadius,ca=Z.cx,ba=Z.cy,ka=V.angularaxis,qa=Z.angularAxis;Z.fillViewInitialKey("angularaxis.rotation",ka.rotation);qa.setGeometry();qa.setScale();var pa=function(wa){return qa.t2g(wa.x)};"linear"===qa.type&&"radians"===qa.thetaunit&&(qa.tick0=O(qa.tick0),qa.dtick=O(qa.dtick));var oa=function(wa){return a(ca+Y*Math.cos(wa),ba-Y*Math.sin(wa))},ja=function(wa){return oa(pa(wa))},ra=function(wa){wa=pa(wa);return oa(wa)+e(-O(wa))},ha=function(wa){var Ca=pa(wa);wa=Math.cos(Ca);Ca=Math.sin(Ca);
return"M"+[ca+ea*wa,ba-ea*Ca]+"L"+[ca+Y*wa,ba-Y*Ca]},la=q.makeLabelFns(qa,0).labelStandoff,ua={xFn:function(wa){wa=pa(wa);return Math.cos(wa)*la},yFn:function(wa){var Ca=pa(wa);return-Math.sin(Ca)*(la+wa.fontSize*(0<Math.sin(Ca)?.2:1))+Math.abs(Math.cos(Ca))*wa.fontSize*M},anchorFn:function(wa){wa=pa(wa);wa=Math.cos(wa);return.1>Math.abs(wa)?"middle":0<wa?"start":"end"},heightFn:function(wa,Ca,Fa){wa=pa(wa);return-.5*(1+Math.sin(wa))*Fa}},na=n(ka);Z.angularTickLayout!==na&&(aa["angular-axis"].selectAll("."+
qa._id+"tick").remove(),Z.angularTickLayout=na);na=q.calcTicks(qa);"linear"===V.gridshape?(V=na.map(pa),0>c.angleDelta(V[0],V[1])&&(V=V.slice().reverse())):V=null;Z.vangles=V;"category"===qa.type&&(na=na.filter(function(wa){return c.isAngleInsideSector(pa(wa),Z.sectorInRad)}));qa.visible&&(V="inside"===qa.ticks?-1:1,q.drawTicks(T,qa,{vals:na,layer:aa["angular-axis"],path:"M"+(qa.linewidth||1)/2*V+",0h"+V*qa.ticklen,transFn:ra,crisp:!1}),q.drawGrid(T,qa,{vals:na,layer:aa["angular-grid"],path:ha,transFn:c.noop,
crisp:!1}),q.drawLabels(T,qa,{vals:na,layer:aa["angular-axis"],repositionOnUpdate:!0,transFn:ja,labelFns:ua}));k(aa["angular-line"].select("path"),ka.showline,{d:Z.pathSubplot(),transform:a(ca,ba)}).attr("stroke-width",ka.linewidth).call(d.stroke,ka.linecolor)};b.updateFx=function(T,V){this.gd._context.staticPlot||(this.updateAngularDrag(T),this.updateRadialDrag(T,V,0),this.updateRadialDrag(T,V,1),this.updateMainDrag(T))};b.updateMainDrag=function(T){function V(Za,nb){return Math.sqrt(Za*Za+nb*nb)}
function Z(Za,nb){return[Za*Math.cos(nb),Za*Math.sin(-nb)]}function aa(Za,nb){if(0===Za)return ra.pathSector(2*Na);var sb=Ta/Za,Cb=nb-sb;nb+=sb;sb=Math.max(0,Math.min(Za,wa));Za=sb-Na;sb+=Na;return"M"+Z(Za,Cb)+"A"+[Za,Za]+" 0,0,0 "+Z(Za,nb)+"L"+Z(sb,nb)+"A"+[sb,sb]+" 0,0,1 "+Z(sb,Cb)+"Z"}function Y(Za,nb,sb){if(0===Za)return ra.pathSector(2*Na);nb=Z(Za,nb);sb=Z(Za,sb);Za=mb((nb[0]+sb[0])/2);sb=mb((nb[1]+sb[1])/2);if(Za&&sb){nb=sb/Za;var Cb=-1/nb;Za=ya(Na,nb,Za,sb);nb=ya(Ta,Cb,Za[0][0],Za[0][1]);Za=
ya(Ta,Cb,Za[1][0],Za[1][1])}else{if(sb){Cb=Ta;var Ib=Na}else Cb=Na,Ib=Ta;nb=[[Za-Cb,sb-Ib],[Za+Cb,sb-Ib]];Za=[[Za-Cb,sb+Ib],[Za+Cb,sb+Ib]]}return"M"+nb.join("L")+"L"+Za.reverse().join("L")+"Z"}function ea(Za,nb){nb=Math.max(Math.min(nb,wa),Ca);Za<na?Za=0:wa-Za<na?Za=wa:nb<na?nb=0:wa-nb<na&&(nb=wa);if(Math.abs(nb-Za)>ua)return Za<nb?(Va=Za,va=nb):(Va=nb,va=Za),!0;va=Va=null;return!1}function ca(Za,nb){Za=Za||Ea;nb=nb||"M0,0Z";eb.attr("d",Za);pb.attr("d",nb);A.transitionZoombox(eb,pb,Qa,$a);Qa=!0;Za=
{};oa(Za);ha.emit("plotly_relayouting",Za)}function ba(Za,nb){Za=Ga+Za;var sb=Pa+nb;nb=V(Ga-ab,Pa-gb);Za=Math.min(V(Za-ab,sb-gb),wa);sb=Math.atan2(gb-Pa,Ga-ab);if(ea(nb,Za)){var Cb=Ea+ra.pathSector(va);Va&&(Cb+=ra.pathSector(Va));var Ib=aa(Va,sb)+aa(va,sb)}ca(Cb,Ib)}function ka(Za,nb,sb,Cb){Za=L.findIntersectionXY(sb,Cb,sb,[Za-ab,gb-nb]);return V(Za[0],Za[1])}function qa(Za,nb){Za=Ga+Za;var sb=Pa+nb,Cb=Math.atan2(gb-sb,Za-ab);nb=Ia(Math.atan2(gb-Pa,Ga-ab),La);var Ib=Ia(Cb,La);Cb=ka(Ga,Pa,nb[0],nb[1]);
Za=Math.min(ka(Za,sb,Ib[0],Ib[1]),wa);if(ea(Cb,Za)){var fc=Ea+ra.pathSector(va);Va&&(fc+=ra.pathSector(Va));var qc=[Y(Va,nb[0],nb[1]),Y(va,nb[0],nb[1])].join(" ")}ca(fc,qc)}function pa(){A.removeZoombox(ha);if(null!==Va&&null!==va){var Za={};oa(Za);A.showDoubleClickNotifier(ha);m.call("_guiRelayout",ha,Za)}}function oa(Za){var nb=kb._rl,sb=(nb[1]-nb[0])/(1-Ca/wa)/wa;Za[ra.id+".radialaxis.range"]=[nb[0]+(Va-Ca)*sb,nb[0]+(va-Ca)*sb]}function ja(Za,nb){var sb=ha._fullLayout.clickmode;A.removeZoombox(ha);
if(2===Za){var Cb={},Ib;for(Ib in ra.viewInitial)Cb[ra.id+"."+Ib]=ra.viewInitial[Ib];ha.emit("plotly_doubleclick",null);m.call("_guiRelayout",ha,Cb)}-1<sb.indexOf("select")&&1===Za&&u(nb,ha,[ra.xaxis],[ra.yaxis],ra.id,Ya);-1<sb.indexOf("event")&&y.click(ha,nb,ra.id)}var ra=this,ha=ra.gd,la=T._zoomlayer,ua=E.MINZOOM,na=E.OFFEDGE,wa=ra.radius,Ca=ra.innerRadius,Fa=ra.cx,Xa=ra.cy,ab=ra.cxx,gb=ra.cyy,bb=ra.sectorInRad,La=ra.vangles,kb=ra.radialAxis,mb=L.clampTiny,ya=L.findXYatLength,Ia=L.findEnclosingVertexAngles,
Na=E.cornerHalfWidth,Ta=E.cornerLen/2,hb=A.makeDragger(ra.layers,"path","maindrag","crosshair");f.select(hb).attr("d",ra.pathSubplot()).attr("transform",a(Fa,Xa));var Ya={element:hb,gd:ha,subplot:ra.id,plotinfo:{id:ra.id,xaxis:ra.xaxis,yaxis:ra.yaxis},xaxes:[ra.xaxis],yaxes:[ra.yaxis]},Ga,Pa,Va,va,Ea,Qa,$a,eb,pb;Ya.prepFn=function(Za,nb,sb){var Cb=ha._fullLayout.dragmode,Ib=hb.getBoundingClientRect();Ga=nb-Ib.left;Pa=sb-Ib.top;La&&(Ib=L.findPolygonOffset(wa,bb[0],bb[1],La),Ga+=ab+Ib[0],Pa+=gb+Ib[1]);
switch(Cb){case "zoom":Ya.moveFn=La?qa:ba;Ya.clickFn=ja;Ya.doneFn=pa;va=Va=null;Ea=ra.pathSubplot();Qa=!1;$a=l(ha._fullLayout[ra.id].bgcolor).getLuminance();eb=A.makeZoombox(la,$a,Fa,Xa,Ea);eb.attr("fill-rule","evenodd");pb=A.makeCorners(la,Fa,Xa);F(ha);break;case "select":case "lasso":C(Za,nb,sb,Ya,Cb)}};hb.onmousemove=function(Za){y.hover(ha,Za,ra.id);ha._fullLayout._lasthover=hb;ha._fullLayout._hoversubplot=ra.id};hb.onmouseout=function(Za){ha._dragging||z.unhover(ha,Za)};z.init(Ya)};b.updateRadialDrag=
function(T,V,Z){function aa(ya,Ia){La?La(ya,Ia):(ya=[ya,-Ia],ya=Math.abs(c.dot(ya,[Math.cos(ua),Math.sin(ua)])/Math.sqrt(c.dot(ya,ya))),isNaN(ya)||(La=.5>ya?ea:ca));ya={};null!==kb?ya[ba.id+".radialaxis.angle"]=kb:null!==mb&&(ya[ba.id+".radialaxis.range["+Z+"]"]=mb);ka.emit("plotly_relayouting",ya)}function Y(){null!==kb?m.call("_guiRelayout",ka,ba.id+".radialaxis.angle",kb):null!==mb&&m.call("_guiRelayout",ka,ba.id+".radialaxis.range["+Z+"]",mb)}function ea(ya,Ia){0!==Z&&(kb=Math.atan2(ja-(gb+Ia),
ab+ya-oa),ba.vangles&&(kb=p(kb,ba.vangles)),kb=O(kb),ya=a(oa,ja)+e(-kb),qa["radial-axis"].attr("transform",ya),qa["radial-line"].select("line").attr("transform",ya),ya=ba.gd._fullLayout,ba.updateRadialAxisTitle(ya,ya[ba.id],kb))}function ca(ya,Ia){ya=c.dot([ya,-Ia],[Math.cos(ua),Math.sin(ua)]);mb=Fa-Xa*ya;if(0<Xa!==(Z?mb>wa:mb<Ca))mb=null;else{Ia=ka._fullLayout;ya=Ia[ba.id];ra.range[Z]=mb;ra._rl[Z]=mb;ba.updateRadialAxis(Ia,ya);ba.xaxis.setRange();ba.xaxis.setScale();ba.yaxis.setRange();ba.yaxis.setScale();
Ia=!1;for(var Na in ba.traceHash){var Ta=ba.traceHash[Na],hb=c.filterVisible(Ta);Ta[0][0].trace._module.plot(ka,ba,hb,ya);m.traceIs(Na,"gl")&&hb.length&&(Ia=!0)}Ia&&(J(ka),I(ka))}}var ba=this,ka=ba.gd,qa=ba.layers;T=ba.radius;var pa=ba.innerRadius,oa=ba.cx,ja=ba.cy,ra=ba.radialAxis,ha=E.radialDragBoxSize,la=ha/2;if(ra.visible){var ua=Q(ba.radialAxisAngle),na=ra._rl,wa=na[0],Ca=na[1],Fa=na[Z],Xa=.75*(na[1]-na[0])/(1-V.hole)/T;if(Z){var ab=oa+(T+la)*Math.cos(ua);var gb=ja-(T+la)*Math.sin(ua);V="radialdrag"}else ab=
oa+(pa-la)*Math.cos(ua),gb=ja-(pa-la)*Math.sin(ua),V="radialdrag-inner";V=A.makeRectDragger(qa,V,"crosshair",-la,-la,ha,ha);var bb={element:V,gd:ka};k(f.select(V),ra.visible&&pa<T,{transform:a(ab,gb)});var La,kb,mb;bb.prepFn=function(){mb=kb=La=null;bb.moveFn=aa;bb.doneFn=Y;F(ka)};bb.clampFn=function(ya,Ia){Math.sqrt(ya*ya+Ia*Ia)<E.MINDRAG&&(Ia=ya=0);return[ya,Ia]};z.init(bb)}};b.updateAngularDrag=function(T){function V(La,kb){var mb=Y.gd._fullLayout,ya=mb[Y.id],Ia=O(Math.atan2(ja+ra-(Fa+kb),Ca+La-
oa-ra)-bb);ab=Xa+Ia;ca.frontplot.attr("transform",a(Y.xOffset2,Y.yOffset2)+e([-Ia,oa,ja]));Y.vangles?(gb=Y.radialAxisAngle+Ia,La=a(qa,pa)+e(-Ia),kb=a(qa,pa)+e(-gb),ca.bg.attr("transform",La),ca["radial-grid"].attr("transform",La),ca["radial-axis"].attr("transform",kb),ca["radial-line"].select("line").attr("transform",kb),Y.updateRadialAxisTitle(mb,ya,gb)):Y.clipPaths.forTraces.select("path").attr("transform",a(oa,ja)+e(Ia));na.each(function(){var Ta=f.select(this),hb=g.getTranslate(Ta);Ta.attr("transform",
a(hb.x,hb.y)+e([Ia]))});wa.each(function(){var Ta=f.select(this),hb=Ta.select("text"),Ya=g.getTranslate(Ta);Ta.attr("transform",e([Ia,hb.attr("x"),hb.attr("y")])+a(Ya.x,Ya.y))});ka.rotation=c.modHalf(ab,360);Y.updateAngularAxis(mb,ya);Y._hasClipOnAxisFalse&&!c.isFullCircle(Y.sectorInRad)&&ua.call(g.hideOutsideRangePoints,Y);mb=!1;for(var Na in Y.traceHash)m.traceIs(Na,"gl")&&(La=Y.traceHash[Na],kb=c.filterVisible(La),La[0][0].trace._module.plot(ea,Y,kb,ya),kb.length&&(mb=!0));mb&&(J(ea),I(ea));ya=
{};Z(ya);ea.emit("plotly_relayouting",ya)}function Z(La){La[Y.id+".angularaxis.rotation"]=ab;Y.vangles&&(La[Y.id+".radialaxis.angle"]=gb)}function aa(){wa.select("text").attr("transform",null);var La={};Z(La);m.call("_guiRelayout",ea,La)}var Y=this,ea=Y.gd,ca=Y.layers,ba=Y.radius,ka=Y.angularAxis,qa=Y.cx,pa=Y.cy,oa=Y.cxx,ja=Y.cyy,ra=E.angularDragBoxSize,ha=A.makeDragger(ca,"path","angulardrag","move"),la={element:ha,gd:ea};f.select(ha).attr("d",Y.pathAnnulus(ba,ba+ra)).attr("transform",a(qa,pa)).call(H,
"move");var ua=ca.frontplot.select(".scatterlayer").selectAll(".trace"),na=ua.selectAll(".point"),wa=ua.selectAll(".textpoint"),Ca,Fa,Xa,ab,gb,bb;la.prepFn=function(La,kb,mb){Xa=T[Y.id].angularaxis.rotation;La=ha.getBoundingClientRect();Ca=kb-La.left;Fa=mb-La.top;bb=Math.atan2(ja+ra-Fa,Ca-oa-ra);la.moveFn=V;la.doneFn=aa;F(ea)};Y.vangles&&!c.isFullCircle(Y.sectorInRad)&&(la.prepFn=c.noop,H(f.select(ha),null));z.init(la)};b.isPtInside=function(T){var V=this.sectorInRad,Z=this.vangles,aa=this.angularAxis.c2g(T.theta),
Y=this.radialAxis;T=Y.c2l(T.r);return(Z?L.isPtInsidePolygon:c.isPtInsideSector)(T,aa,Y._rl,V,Z)};b.pathArc=function(T){var V=this.sectorInRad,Z=this.vangles;return(Z?L.pathPolygon:c.pathArc)(T,V[0],V[1],Z)};b.pathSector=function(T){var V=this.sectorInRad,Z=this.vangles;return(Z?L.pathPolygon:c.pathSector)(T,V[0],V[1],Z)};b.pathAnnulus=function(T,V){var Z=this.sectorInRad,aa=this.vangles;return(aa?L.pathPolygonAnnulus:c.pathAnnulus)(T,V,Z[0],Z[1],aa)};b.pathSubplot=function(){var T=this.innerRadius,
V=this.radius;return T?this.pathAnnulus(T,V):this.pathSector(V)};b.fillViewInitialKey=function(T,V){T in this.viewInitial||(this.viewInitial[T]=V)}},{"../../components/color":615,"../../components/dragelement":634,"../../components/drawing":637,"../../components/fx":655,"../../components/titles":710,"../../constants/alignment":717,"../../lib":749,"../../lib/clear_gl_canvases":733,"../../lib/setcursor":769,"../../plot_api/subroutines":788,"../../plots/cartesian/axes":797,"../../registry":880,"../cartesian/autorange":796,
"../cartesian/dragbox":805,"../cartesian/select":816,"../cartesian/set_convert":817,"../plots":860,"./constants":861,"./helpers":862,"./set_convert":873,d3:169,tinycolor2:548}],873:[function(b,D,G){function r(f,l){var m=l._subplot;f.setGeometry=function(){var c=f._rl[0],d=f._rl[1],g=m.innerRadius,h=(m.radius-g)/(d-c),q=g/h,t=c>d?function(v){return 0>=v}:function(v){return 0<=v};f.c2g=function(v){v=f.c2l(v)-c;return(t(v)?v:0)+q};f.g2c=function(v){return f.l2c(v+c-q)};f.g2p=function(v){return v*h};
f.c2p=function(v){return f.g2p(f.c2g(v))}}}function n(f,l){var m=f.type;if("linear"===m){var c=f.d2c,d=f.c2d;f.d2c=function(g,h){g=c(g);return"degrees"===h?a(g):g};f.c2d=function(g,h){g="degrees"===h?e(g):g;return d(g)}}f.makeCalcdata=function(g,h){var q=g[h],t=g._length,v;if(q){if(p.isTypedArray(q)&&"linear"===m){if(t===q.length)return q;if(q.subarray)return q.subarray(0,t)}h=Array(t);for(v=0;v<t;v++)h[v]=f.d2c(q[v],g.thetaunit)}else for(v=h+"0",h="d"+h,q=(v in g)?f.d2c(g[v],g.thetaunit):0,g=g[h]?
f.d2c(g[h],g.thetaunit):(f.period||2*Math.PI)/t,h=Array(t),v=0;v<t;v++)h[v]=q+v*g;return h};f.setGeometry=function(){var g=l.sector,h=g.map(a),q={clockwise:-1,counterclockwise:1}[f.direction],t=a(f.rotation),v=function(C){return(C-t)/q},w;switch(m){case "linear":var A=w=p.identity;var z=a;var y=e;f.range=p.isFullCircle(h)?[g[0],g[0]+360]:h.map(v).map(e);break;case "category":g=f._categories.length;var B=f.period?Math.max(f.period,g):g;0===B&&(B=1);A=z=function(C){return 2*C*Math.PI/B};w=y=function(C){return C*
B/Math.PI/2};f.range=[0,B]}f.c2g=function(C){return q*A(C)+t};f.g2c=function(C){return w(v(C))};f.t2g=function(C){return q*z(C)+t};f.g2t=function(C){return y(v(C))}}}var p=b("../../lib"),k=b("../cartesian/set_convert"),a=p.deg2rad,e=p.rad2deg;D.exports=function(f,l,m){k(f,m);switch(f._id){case "x":case "radialaxis":r(f,l);break;case "angularaxis":n(f,l)}}},{"../../lib":749,"../cartesian/set_convert":817}],874:[function(b,D,G){var r=b("../lib"),n=b("../plot_api/plot_template"),p=b("./domain").defaults;
D.exports=function(k,a,e,f){function l(z,y){return r.coerce(q,t,m,z,y)}var m=f.attributes;e=f.handleDefaults;for(var c=f.partition||"x",d=a._subplots[f.type],g=d.length,h=g&&d[0].replace(/\d+$/,""),q,t,v=0;v<g;v++){var w=d[v];q=k[w]?k[w]:k[w]={};t=n.newContainer(a,w,h);l("uirevision",a.uirevision);var A={};A[c]=[v/g,(v+1)/g];p(t,a,l,A);f.id=w;e(q,t,l,f)}}},{"../lib":749,"../plot_api/plot_template":787,"./domain":824}],875:[function(b,D,G){function r(n){var p=n.description?" "+n.description:"";n=n.keys||
[];if(0<n.length){p=[];for(var k=0;k<n.length;k++)p[k]="`"+n[k]+"`";p=1===n.length?"variable "+p[0]:"variables "+p.slice(0,-1).join(", ")+" and "+p.slice(-1)+"."}return p}D=b("../constants/docs").FORMAT_LINK;b=b("../constants/docs").DATE_FORMAT_LINK;['Variables are inserted using %{variable}, for example "y: %{y}". Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',D,'for details on the formatting syntax. Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',
b,"for details on the date formatting syntax."].join(" ");G.hovertemplateAttrs=function(n,p){n=n||{};p=p||{};r(p);p={valType:"string",dflt:"",editType:n.editType||"none"};!1!==n.arrayOk&&(p.arrayOk=!0);return p};G.texttemplateAttrs=function(n,p){n=n||{};p=p||{};r(p);p={valType:"string",dflt:"",editType:n.editType||"calc"};!1!==n.arrayOk&&(p.arrayOk=!0);return p}},{"../constants/docs":719}],876:[function(b,D,G){var r=b("./ternary"),n=b("../../plots/get_data").getSubplotCalcData;D=b("../../lib").counterRegex;
G.name="ternary";var p=G.attr="subplot";G.idRoot="ternary";G.idRegex=G.attrRegex=D("ternary");(G.attributes={})[p]={valType:"subplotid",dflt:"ternary",editType:"calc"};G.layoutAttributes=b("./layout_attributes");G.supplyLayoutDefaults=b("./layout_defaults");G.plot=function(k){for(var a=k._fullLayout,e=k.calcdata,f=a._subplots.ternary,l=0;l<f.length;l++){var m=f[l],c=n(e,"ternary",m),d=a[m]._subplot;d||(d=new r({id:m,graphDiv:k,container:a._ternarylayer.node()},a),a[m]._subplot=d);d.plot(c,a,k._promises)}};
G.clean=function(k,a,e,f){k=f._subplots.ternary||[];for(e=0;e<k.length;e++){var l=k[e],m=f[l]._subplot;!a[l]&&m&&(m.plotContainer.remove(),m.clipDef.remove(),m.clipDefRelative.remove(),m.layers["a-title"].remove(),m.layers["b-title"].remove(),m.layers["c-title"].remove())}}},{"../../lib":749,"../../plots/get_data":834,"./layout_attributes":877,"./layout_defaults":878,"./ternary":879}],877:[function(b,D,G){G=b("../../components/color/attributes");var r=b("../domain").attributes,n=b("../cartesian/layout_attributes"),
p=b("../../plot_api/edit_types").overrideAll;b=b("../../lib/extend").extendFlat;b={title:{text:n.title.text,font:n.title.font},color:n.color,tickmode:n.tickmode,nticks:b({},n.nticks,{dflt:6,min:1}),tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:n.ticks,ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,showtickprefix:n.showtickprefix,tickprefix:n.tickprefix,showticksuffix:n.showticksuffix,ticksuffix:n.ticksuffix,showexponent:n.showexponent,
exponentformat:n.exponentformat,separatethousands:n.separatethousands,tickfont:n.tickfont,tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,hoverformat:n.hoverformat,showline:b({},n.showline,{dflt:!0}),linecolor:n.linecolor,linewidth:n.linewidth,showgrid:b({},n.showgrid,{dflt:!0}),gridcolor:n.gridcolor,gridwidth:n.gridwidth,layer:n.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:n._deprecated.title,titlefont:n._deprecated.titlefont}};D=D.exports=p({domain:r({name:"ternary"}),
bgcolor:{valType:"color",dflt:G.background},sum:{valType:"number",dflt:1,min:0},aaxis:b,baxis:b,caxis:b},"plot","from-root");D.uirevision={valType:"any",editType:"none"};D.aaxis.uirevision=D.baxis.uirevision=D.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":614,"../../lib/extend":739,"../../plot_api/edit_types":780,"../cartesian/layout_attributes":811,"../domain":824}],878:[function(b,D,G){function r(h,q,t,v){var w=t("bgcolor");t=t("sum");v.bgColor=p.combine(w,
v.paper_bgcolor);for(var A,z,y=0;y<g.length;y++)w=g[y],A=h[w]||{},z=k.newContainer(q,w),z._name=w,n(A,z,v,q);v=q.aaxis;w=q.baxis;q=q.caxis;v.min+w.min+q.min>=t&&(v.min=0,w.min=0,q.min=0,h.aaxis&&delete h.aaxis.min,h.baxis&&delete h.baxis.min,h.caxis&&delete h.caxis.min)}function n(h,q,t,v){function w(u,F){return a.coerce(h,q,A,u,F)}var A=d[q._name];w("uirevision",v.uirevision);q.type="linear";v=w("color");var z=v!==A.color.dflt?v:t.font.color,y=q._name.charAt(0).toUpperCase(),B="Component "+y,C=w("title.text",
B);q._hovertitle=C===B?C:y;a.coerceFont(w,"title.font",{family:t.font.family,size:Math.round(1.2*t.font.size),color:z});w("min");m(h,q,w,"linear");f(h,q,w,"linear",{});l(h,q,w,{outerTicks:!0});w("showticklabels")&&(a.coerceFont(w,"tickfont",{family:t.font.family,size:t.font.size,color:z}),w("tickangle"),w("tickformat"));c(h,q,w,{dfltColor:v,bgColor:t.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:A});w("hoverformat");w("layer")}var p=b("../../components/color"),k=b("../../plot_api/plot_template"),
a=b("../../lib"),e=b("../subplot_defaults"),f=b("../cartesian/tick_label_defaults"),l=b("../cartesian/tick_mark_defaults"),m=b("../cartesian/tick_value_defaults"),c=b("../cartesian/line_grid_defaults"),d=b("./layout_attributes"),g=["aaxis","baxis","caxis"];D.exports=function(h,q,t){e(h,q,t,{type:"ternary",attributes:d,handleDefaults:r,font:q.font,paper_bgcolor:q.paper_bgcolor})}},{"../../components/color":615,"../../lib":749,"../../plot_api/plot_template":787,"../cartesian/line_grid_defaults":813,
"../cartesian/tick_label_defaults":818,"../cartesian/tick_mark_defaults":819,"../cartesian/tick_value_defaults":820,"../subplot_defaults":874,"./layout_attributes":877}],879:[function(b,D,G){function r(E,L){this.id=E.id;this.graphDiv=E.graphDiv;this.init(L);this.makeFramework(L);this.cTickLayout=this.bTickLayout=this.aTickLayout=null}function n(E){p.select(E).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}var p=b("d3"),k=b("tinycolor2"),a=b("../../registry"),
e=b("../../lib"),f=e._,l=b("../../components/color"),m=b("../../components/drawing"),c=b("../cartesian/set_convert"),d=b("../../lib/extend").extendFlat,g=b("../plots"),h=b("../cartesian/axes"),q=b("../../components/dragelement"),t=b("../../components/fx");G=b("../../components/dragelement/helpers");var v=G.freeMode,w=G.rectMode,A=b("../../components/titles"),z=b("../cartesian/select").prepSelect,y=b("../cartesian/select").selectOnClick,B=b("../cartesian/select").clearSelect,C=b("../cartesian/select").clearSelectionsCache,
u=b("../cartesian/constants");D.exports=r;b=r.prototype;b.init=function(E){this.container=E._ternarylayer;this.defs=E._defs;this.layoutId=E._uid;this.traceHash={};this.layers={}};b.plot=function(E,L){var P=L[this.id];L=L._size;this._hasClipOnAxisFalse=!1;for(var N=0;N<E.length;N++)if(!1===E[N][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(P);this.adjustLayout(P,L);g.generalUpdatePerTraceModule(this.graphDiv,this,E,P);this.layers.plotbg.select("path").call(l.fill,P.bgcolor)};
b.makeFramework=function(E){var L=this.graphDiv,P=E[this.id],N=this.clipId="clip"+this.layoutId+this.id,Q=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=e.ensureSingleById(E._clips,"clipPath",N,function(O){O.append("path").attr("d","M0,0Z")});this.clipDefRelative=e.ensureSingleById(E._clips,"clipPath",Q,function(O){O.append("path").attr("d","M0,0Z")});this.plotContainer=e.ensureSingle(this.container,"g",this.id);this.updateLayers(P);m.setClipUrl(this.layers.backplot,N,L);m.setClipUrl(this.layers.grids,
N,L)};b.updateLayers=function(E){var L=this.layers,P=["draglayer","plotbg","backplot","grids"];"below traces"===E.aaxis.layer&&P.push("aaxis","aline");"below traces"===E.baxis.layer&&P.push("baxis","bline");"below traces"===E.caxis.layer&&P.push("caxis","cline");P.push("frontplot");"above traces"===E.aaxis.layer&&P.push("aaxis","aline");"above traces"===E.baxis.layer&&P.push("baxis","bline");"above traces"===E.caxis.layer&&P.push("caxis","cline");E=this.plotContainer.selectAll("g.toplevel").data(P,
String);var N=["agrid","bgrid","cgrid"];E.enter().append("g").attr("class",function(Q){return"toplevel "+Q}).each(function(Q){var O=p.select(this);L[Q]=O;"frontplot"===Q?O.append("g").classed("scatterlayer",!0):"backplot"===Q?O.append("g").classed("maplayer",!0):"plotbg"===Q?O.append("path").attr("d","M0,0Z"):"aline"===Q||"bline"===Q||"cline"===Q?O.append("path"):"grids"===Q&&N.forEach(function(T){L[T]=O.append("g").classed("grid "+T,!0)})});E.order()};var F=Math.sqrt(4/3);b.adjustLayout=function(E,
L){var P=this,N=E.domain,Q=(N.x[0]+N.x[1])/2,O=(N.y[0]+N.y[1])/2,T=N.x[1]-N.x[0],V=N.y[1]-N.y[0],Z=T*L.w,aa=V*L.h,Y=E.sum,ea=E.aaxis.min,ca=E.baxis.min,ba=E.caxis.min;if(Z>F*aa){var ka=aa;N=ka*F}else N=Z,ka=N/F;Z=T*N/Z;V=V*ka/aa;T=L.l+L.w*Q-N/2;L=L.t+L.h*(1-O)-ka/2;P.x0=T;P.y0=L;P.w=N;P.h=ka;P.sum=Y;P.xaxis={type:"linear",range:[ea+2*ba-Y,Y-ea-2*ca],domain:[Q-Z/2,Q+Z/2],_id:"x"};c(P.xaxis,P.graphDiv._fullLayout);P.xaxis.setScale();P.xaxis.isPtWithinRange=function(qa){return qa.a>=P.aaxis.range[0]&&
qa.a<=P.aaxis.range[1]&&qa.b>=P.baxis.range[1]&&qa.b<=P.baxis.range[0]&&qa.c>=P.caxis.range[1]&&qa.c<=P.caxis.range[0]};P.yaxis={type:"linear",range:[ea,Y-ca-ba],domain:[O-V/2,O+V/2],_id:"y"};c(P.yaxis,P.graphDiv._fullLayout);P.yaxis.setScale();P.yaxis.isPtWithinRange=function(){return!0};Z=P.yaxis.domain[0];Q=P.aaxis=d({},E.aaxis,{range:[ea,Y-ca-ba],side:"left",tickangle:(+E.aaxis.tickangle||0)-30,domain:[Z,Z+V*F],anchor:"free",position:0,_id:"y",_length:N});c(Q,P.graphDiv._fullLayout);Q.setScale();
O=P.baxis=d({},E.baxis,{range:[Y-ea-ba,ca],side:"bottom",domain:P.xaxis.domain,anchor:"free",position:0,_id:"x",_length:N});c(O,P.graphDiv._fullLayout);O.setScale();E=P.caxis=d({},E.caxis,{range:[Y-ea-ca,ba],side:"right",tickangle:(+E.caxis.tickangle||0)+30,domain:[Z,Z+V*F],anchor:"free",position:0,_id:"y",_length:N});c(E,P.graphDiv._fullLayout);E.setScale();Y="M"+T+","+(L+ka)+"h"+N+"l-"+N/2+",-"+ka+"Z";P.clipDef.select("path").attr("d",Y);P.layers.plotbg.select("path").attr("d",Y);Y="M0,"+ka+"h"+
N+"l-"+N/2+",-"+ka+"Z";P.clipDefRelative.select("path").attr("d",Y);Y="translate("+T+","+L+")";P.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Y);P.clipDefRelative.select("path").attr("transform",null);Y="translate("+(T-O._offset)+","+(L+ka)+")";P.layers.baxis.attr("transform",Y);P.layers.bgrid.attr("transform",Y);Y="translate("+(T+N/2)+","+L+")rotate(30)translate(0,"+-Q._offset+")";P.layers.aaxis.attr("transform",Y);P.layers.agrid.attr("transform",Y);Y="translate("+(T+N/2)+
","+L+")rotate(-30)translate(0,"+-E._offset+")";P.layers.caxis.attr("transform",Y);P.layers.cgrid.attr("transform",Y);P.drawAxes(!0);P.layers.aline.select("path").attr("d",Q.showline?"M"+T+","+(L+ka)+"l"+N/2+",-"+ka:"M0,0").call(l.stroke,Q.linecolor||"#000").style("stroke-width",(Q.linewidth||0)+"px");P.layers.bline.select("path").attr("d",O.showline?"M"+T+","+(L+ka)+"h"+N:"M0,0").call(l.stroke,O.linecolor||"#000").style("stroke-width",(O.linewidth||0)+"px");P.layers.cline.select("path").attr("d",
E.showline?"M"+(T+N/2)+","+L+"l"+N/2+","+ka:"M0,0").call(l.stroke,E.linecolor||"#000").style("stroke-width",(E.linewidth||0)+"px");P.graphDiv._context.staticPlot||P.initInteractions();m.setClipUrl(P.layers.frontplot,P._hasClipOnAxisFalse?null:P.clipId,P.graphDiv)};b.drawAxes=function(E){var L=this.graphDiv,P=this.id.substr(7)+"title",N=this.layers,Q=this.aaxis,O=this.baxis,T=this.caxis;this.drawAx(Q);this.drawAx(O);this.drawAx(T);if(E){E=Math.max(Q.showticklabels?Q.tickfont.size/2:0,(T.showticklabels?
.75*T.tickfont.size:0)+("outside"===T.ticks?.87*T.ticklen:0));var V=(O.showticklabels?O.tickfont.size:0)+("outside"===O.ticks?O.ticklen:0)+3;N["a-title"]=A.draw(L,"a"+P,{propContainer:Q,propName:this.id+".aaxis.title",placeholder:f(L,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-Q.title.font.size/3-E,"text-anchor":"middle"}});N["b-title"]=A.draw(L,"b"+P,{propContainer:O,propName:this.id+".baxis.title",placeholder:f(L,"Click to enter Component B title"),attributes:{x:this.x0-
V,y:this.y0+this.h+.83*O.title.font.size+V,"text-anchor":"middle"}});N["c-title"]=A.draw(L,"c"+P,{propContainer:T,propName:this.id+".caxis.title",placeholder:f(L,"Click to enter Component C title"),attributes:{x:this.x0+this.w+V,y:this.y0+this.h+.83*T.title.font.size+V,"text-anchor":"middle"}})}};b.drawAx=function(E){var L=this.graphDiv,P=E._name,N=P.charAt(0),Q=E._id;P=this.layers[P];var O=N+"tickLayout",T=E.ticks+String(E.ticklen)+String(E.showticklabels);this[O]!==T&&(P.selectAll("."+Q+"tick").remove(),
this[O]=T);E.setScale();Q=h.calcTicks(E);O=h.clipEnds(E,Q);T=h.makeTransFn(E);var V=h.getTickSigns(E)[2],Z=e.deg2rad(30),aa=V*(E.linewidth||1)/2;V*=E.ticklen;var Y=this.w,ea=this.h;Y={a:"M0,0l"+ea+",-"+Y/2,b:"M0,0l-"+Y/2+",-"+ea,c:"M0,0l-"+ea+","+Y/2}[N];h.drawTicks(L,E,{vals:"inside"===E.ticks?O:Q,layer:P,path:"b"===N?"M0,"+aa+"l"+Math.sin(Z)*V+","+Math.cos(Z)*V:"M"+aa+",0l"+Math.cos(Z)*V+","+-Math.sin(Z)*V,transFn:T,crisp:!1});h.drawGrid(L,E,{vals:O,layer:this.layers[N+"grid"],path:Y,transFn:T,
crisp:!1});h.drawLabels(L,E,{vals:Q,layer:P,transFn:T,labelFns:h.makeLabelFns(E,0,30)})};D=u.MINZOOM/2+.87;var H="m-0.87,.5h"+D+"v3h-"+(D+5.2)+"l"+(D/2+2.6)+",-"+(.87*D+4.5)+"l2.6,1.5l-"+D/2+","+.87*D+"Z",J="m0.87,.5h-"+D+"v3h"+(D+5.2)+"l-"+(D/2+2.6)+",-"+(.87*D+4.5)+"l-2.6,1.5l"+D/2+","+.87*D+"Z",I="m0,1l"+D/2+","+.87*D+"l2.6,-1.5l-"+(D/2+2.6)+",-"+(.87*D+4.5)+"l-"+(D/2+2.6)+","+(.87*D+4.5)+"l2.6,1.5l"+D/2+",-"+.87*D+"Z",M=!0;b.clearSelect=function(){C(this.dragOptions);B(this.dragOptions.gd)};b.initInteractions=
function(){function E(ha){var la={};la[T.id+".aaxis.min"]=ha.a;la[T.id+".baxis.min"]=ha.b;la[T.id+".caxis.min"]=ha.c;return la}function L(ha,la){var ua=Z._fullLayout.clickmode;n(Z);2===ha&&(Z.emit("plotly_doubleclick",null),a.call("_guiRelayout",Z,E({a:0,b:0,c:0})));-1<ua.indexOf("select")&&1===ha&&y(la,Z,[T.xaxis],[T.yaxis],T.id,T.dragOptions);-1<ua.indexOf("event")&&t.click(Z,la,T.id)}function P(ha,la){var ua=Y+ha,na=ea+la;la=Math.max(0,Math.min(1,1-ea/T.h,1-na/T.h));ha=Math.max(0,Math.min(1,1-
(Y+(T.h-ea)/Math.sqrt(3))/T.w,1-(ua+(T.h-na)/Math.sqrt(3))/T.w));ua=Math.max(0,Math.min(1,(Y-(T.h-ea)/Math.sqrt(3))/T.w,(ua-(T.h-na)/Math.sqrt(3))/T.w));na=(la/2+ua)*T.w;var wa=(1-la/2-ha)*T.w,Ca=(na+wa)/2,Fa=wa-na,Xa=(1-la)*T.h,ab=Xa-Fa/F;Fa<u.MINZOOM?(ka=ca,ja.attr("d",pa),ra.attr("d","M0,0Z")):(ka={a:ca.a+la*ba,b:ca.b+ha*ba,c:ca.c+ua*ba},ja.attr("d",pa+"M"+na+","+Xa+"H"+wa+"L"+Ca+","+ab+"L"+na+","+Xa+"Z"),ra.attr("d","M"+Y+","+ea+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+na+","+Xa+H+"M"+wa+","+Xa+
J+"M"+Ca+","+ab+I));oa||(ja.transition().style("fill",.2<qa?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ra.transition().style("opacity",1).duration(200),oa=!0);Z.emit("plotly_relayouting",E(ka))}function N(){n(Z);ka!==ca&&(a.call("_guiRelayout",Z,E(ka)),M&&Z.data&&Z._context.showTips&&(e.notifier(f(Z,"Double-click to zoom back out"),"long"),M=!1))}function Q(ha,la){var ua=ha/T.xaxis._m,na=la/T.yaxis._m;ka={a:ca.a-na,b:ca.b+(ua+na)/2,c:ca.c-(ua-na)/2};ua=[ka.a,ka.b,ka.c].sort(e.sorterAsc);
na=ua.indexOf(ka.a);var wa=ua.indexOf(ka.b),Ca=ua.indexOf(ka.c);0>ua[0]&&(0>ua[1]+ua[0]/2?(ua[2]+=ua[0]+ua[1],ua[0]=ua[1]=0):(ua[2]+=ua[0]/2,ua[1]+=ua[0]/2,ua[0]=0),ka={a:ua[na],b:ua[wa],c:ua[Ca]},la=(ca.a-ka.a)*T.yaxis._m,ha=(ca.c-ka.c-ca.b+ka.b)*T.xaxis._m);ua="translate("+(T.x0+ha)+","+(T.y0+la)+")";T.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ua);ha="translate("+-ha+","+-la+")";T.clipDefRelative.select("path").attr("transform",ha);T.aaxis.range=[ka.a,T.sum-ka.b-ka.c];
T.baxis.range=[T.sum-ka.a-ka.c,ka.b];T.caxis.range=[T.sum-ka.a-ka.b,ka.c];T.drawAxes(!1);T._hasClipOnAxisFalse&&T.plotContainer.select(".scatterlayer").selectAll(".trace").call(m.hideOutsideRangePoints,T);Z.emit("plotly_relayouting",E(ka))}function O(){a.call("_guiRelayout",Z,E(ka))}var T=this,V=T.layers.plotbg.select("path").node(),Z=T.graphDiv,aa=Z._fullLayout._zoomlayer;this.dragOptions={element:V,gd:Z,plotinfo:{id:T.id,domain:Z._fullLayout[T.id].domain,xaxis:T.xaxis,yaxis:T.yaxis},subplot:T.id,
prepFn:function(ha,la,ua){T.dragOptions.xaxes=[T.xaxis];T.dragOptions.yaxes=[T.yaxis];var na=T.dragOptions.dragmode=Z._fullLayout.dragmode;v(na)?T.dragOptions.minDrag=1:T.dragOptions.minDrag=void 0;"zoom"===na?(T.dragOptions.moveFn=P,T.dragOptions.clickFn=L,T.dragOptions.doneFn=N,ha=V.getBoundingClientRect(),Y=la-ha.left,ea=ua-ha.top,ka=ca={a:T.aaxis.range[0],b:T.baxis.range[1],c:T.caxis.range[1]},ba=T.aaxis.range[1]-ca.a,qa=k(T.graphDiv._fullLayout[T.id].bgcolor).getLuminance(),pa="M0,"+T.h+"L"+
T.w/2+", 0L"+T.w+","+T.h+"Z",oa=!1,ja=aa.append("path").attr("class","zoombox").attr("transform","translate("+T.x0+", "+T.y0+")").style({fill:.2<qa?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",pa),ra=aa.append("path").attr("class","zoombox-corners").attr("transform","translate("+T.x0+", "+T.y0+")").style({fill:l.background,stroke:l.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),T.clearSelect(Z)):"pan"===na?(T.dragOptions.moveFn=Q,T.dragOptions.clickFn=L,T.dragOptions.doneFn=
O,ka=ca={a:T.aaxis.range[0],b:T.baxis.range[1],c:T.caxis.range[1]},T.clearSelect(Z)):(w(na)||v(na))&&z(ha,la,ua,T.dragOptions,na)}};var Y,ea,ca,ba,ka,qa,pa,oa,ja,ra;V.onmousemove=function(ha){t.hover(Z,ha,T.id);Z._fullLayout._lasthover=V;Z._fullLayout._hoversubplot=T.id};V.onmouseout=function(ha){Z._dragging||q.unhover(Z,ha)};q.init(this.dragOptions)}},{"../../components/color":615,"../../components/dragelement":634,"../../components/dragelement/helpers":633,"../../components/drawing":637,"../../components/fx":655,
"../../components/titles":710,"../../lib":749,"../../lib/extend":739,"../../registry":880,"../cartesian/axes":797,"../cartesian/constants":803,"../cartesian/select":816,"../cartesian/set_convert":817,"../plots":860,d3:169,tinycolor2:548}],880:[function(b,D,G){function r(t){if(t.layoutAttributes&&(t=t.layoutAttributes._arrayAttrRegexps))for(var v=0;v<t.length;v++)l(G.layoutArrayRegexes,t[v])}function n(t,v){(t=G.componentsRegistry[t].schema)&&t.traces&&(t=t.traces[v])&&q(G.modules[v]._module.attributes,
t)}function p(t,v){(t=G.componentsRegistry[t].schema)&&t.transforms&&(t=t.transforms[v])&&q(G.transformsRegistry[v].attributes,t)}function k(t,v){if((t=G.componentsRegistry[t].schema)&&t.subplots){var w=G.subplotsRegistry[v];v=w.layoutAttributes;w="subplot"===w.attr?w.name:w.attr;Array.isArray(w)&&(w=w[0]);t=t.subplots[w];v&&t&&q(v,t)}}function a(t){"object"===typeof t&&(t=t.type);return t}var e=b("./lib/loggers"),f=b("./lib/noop"),l=b("./lib/push_unique"),m=b("./lib/is_plain_object"),c=b("./lib/dom").addStyleRule;
D=b("./lib/extend");var d=b("./plots/attributes"),g=b("./plots/layout_attributes"),h=D.extendFlat,q=D.extendDeepAll;G.modules={};G.allCategories={};G.allTypes=[];G.subplotsRegistry={};G.transformsRegistry={};G.componentsRegistry={};G.layoutArrayContainers=[];G.layoutArrayRegexes=[];G.traceLayoutAttributes={};G.localeRegistry={};G.apiMethodRegistry={};G.collectableSubplotTypes=null;G.register=function(t){G.collectableSubplotTypes=null;if(t)t&&!Array.isArray(t)&&(t=[t]);else throw Error("No argument passed to Plotly.register.");
for(var v=0;v<t.length;v++){var w=t[v];if(!w)throw Error("Invalid module was attempted to be registered!");switch(w.moduleType){case "trace":var A=void 0,z=void 0,y=w.name,B=w.categories,C=w.meta;if(G.modules[y])e.log("Type "+y+" already registered");else{if(!G.subplotsRegistry[w.basePlotModule.name]){var u=void 0,F=w.basePlotModule,H=F.name;if(G.subplotsRegistry[H])e.log("Plot type "+H+" already registered.");else for(u in r(F),G.subplotsRegistry[H]=F,G.componentsRegistry)k(u,F.name)}u={};for(F=
0;F<B.length;F++)u[B[F]]=!0,G.allCategories[B[F]]=!0;G.modules[y]={_module:w,categories:u};C&&Object.keys(C).length&&(G.modules[y].meta=C);G.allTypes.push(y);for(z in G.componentsRegistry)n(z,y);w.layoutAttributes&&h(G.traceLayoutAttributes,w.layoutAttributes);w=w.basePlotModule;z=w.name;if("mapbox"===z)for(A in w=w.constants.styleRules,w)c(".js-plotly-plot .plotly .mapboxgl-"+A,w[A]);"geo"!==z&&"mapbox"!==z||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}break;case "transform":A=
void 0;z=w;if("string"!==typeof z.name)throw Error("Transform module *name* must be a string.");w="Transform module "+z.name;y="function"===typeof z.transform;B="function"===typeof z.calcTransform;if(!y&&!B)throw Error(w+" is missing a *transform* or *calcTransform* method.");y&&B&&e.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed before all *calcTransform* methods."].join(" "));m(z.attributes)||e.log(w+" registered without an *attributes* object.");
"function"!==typeof z.supplyDefaults&&e.log(w+" registered without a *supplyDefaults* method.");G.transformsRegistry[z.name]=z;for(A in G.componentsRegistry)p(A,z.name);break;case "component":y=z=A=void 0;if("string"!==typeof w.name)throw Error("Component module *name* must be a string.");B=w.name;G.componentsRegistry[B]=w;w.layoutAttributes&&(w.layoutAttributes._isLinkedToArray&&l(G.layoutArrayContainers,B),r(w));for(y in G.modules)n(B,y);for(z in G.subplotsRegistry)k(B,z);for(A in G.transformsRegistry)p(B,
A);w.schema&&w.schema.layout&&q(g,w.schema.layout);break;case "locale":y=w;w=y.name;A=w.split("-")[0];z=y.dictionary;y=y.format;B=z&&Object.keys(z).length;C=y&&Object.keys(y).length;u=G.localeRegistry;(F=u[w])||(u[w]=F={});A!==w&&((w=u[A])||(u[A]=w={}),B&&w.dictionary===F.dictionary&&(w.dictionary=z),C&&w.format===F.format&&(w.format=y));B&&(F.dictionary=z);C&&(F.format=y);break;case "apiMethod":G.apiMethodRegistry[w.name]=w.fn;break;default:throw Error("Invalid module was attempted to be registered!");
}}};G.getModule=function(t){return(t=G.modules[a(t)])?t._module:!1};G.traceIs=function(t,v){t=a(t);if("various"===t)return!1;var w=G.modules[t];w||(t&&"area"!==t&&e.log("Unrecognized trace type "+t+"."),w=G.modules[d.type.dflt]);return!!w.categories[v]};G.getTransformIndices=function(t,v){var w=[];t=t.transforms||[];for(var A=0;A<t.length;A++)t[A].type===v&&w.push(A);return w};G.hasTransform=function(t,v){t=t.transforms||[];for(var w=0;w<t.length;w++)if(t[w].type===v)return!0;return!1};G.getComponentMethod=
function(t,v){return(t=G.componentsRegistry[t])?t[v]||f:f};G.call=function(){var t=arguments[0],v=[].slice.call(arguments,1);return G.apiMethodRegistry[t].apply(null,v)}},{"./lib/dom":737,"./lib/extend":739,"./lib/is_plain_object":750,"./lib/loggers":753,"./lib/noop":758,"./lib/push_unique":763,"./plots/attributes":794,"./plots/layout_attributes":851}],881:[function(b,D,G){function r(a){switch(a){case "themes__thumb":a={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,
t:5,b:5,pad:0},annotations:[]};break;case "thumbnail":a={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:a={}}return a}var n=b("../registry");b=b("../lib");var p=b.extendFlat,k=b.extendDeep;D.exports=function(a,e){a.framework&&a.framework.isPolar&&(a=a.framework.getConfig());var f,l=a.layout,m=k([],a.data);l=k({},l,r(e.tileClass));a=a._context||{};e.width&&(l.width=e.width);e.height&&(l.height=e.height);if("thumbnail"===
e.tileClass||"themes__thumb"===e.tileClass){l.annotations=[];var c=Object.keys(l);for(f=0;f<c.length;f++)-1<["xaxis","yaxis","zaxis"].indexOf(c[f].slice(0,5))&&(l[c[f]].title={text:""});for(f=0;f<m.length;f++)c=m[f],c.showscale=!1,c.marker&&(c.marker.showscale=!1),n.traceIs(c,"pie-like")&&(c.textposition="none")}if(Array.isArray(e.annotations))for(f=0;f<e.annotations.length;f++)l.annotations.push(e.annotations[f]);c=Object.keys(l).filter(function(h){return h.match(/^scene\d*$/)});if(c.length){var d=
{};"thumbnail"===e.tileClass&&(d={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1});for(f=0;f<c.length;f++){var g=l[c[f]];g.xaxis||(g.xaxis={});g.yaxis||(g.yaxis={});g.zaxis||(g.zaxis={});p(g.xaxis,d);p(g.yaxis,d);p(g.zaxis,d);g._scene=null}}f=document.createElement("div");e.tileClass&&(f.className=e.tileClass);m={gd:f,td:f,layout:l,data:m,config:{staticPlot:void 0===e.staticPlot?!0:e.staticPlot,plotGlPixelRatio:void 0===e.plotGlPixelRatio?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||
!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:a.mapboxAccessToken}};"transparent"!==e.setBackground&&(m.config.setBackground=e.setBackground||"opaque");m.gd.defaultLayout=r(e.tileClass);return m}},{"../lib":749,"../registry":880}],882:[function(b,D,G){var r=b("../lib"),n=b("../plot_api/to_image"),p=b("./filesaver"),k=b("./helpers");D.exports=function(a,e){var f;r.isPlainObject(a)||(f=r.getGraphDiv(a));e=e||{};e.format=e.format||"png";e.imageDataOnly=!0;return new Promise(function(l,
m){f&&f._snapshotInProgress&&m(Error("Snapshotting already in progress."));r.isIE()&&"svg"!==e.format&&m(Error(k.MSG_IE_BAD_FORMAT));f&&(f._snapshotInProgress=!0);var c=n(a,e),d=e.filename||a.fn||"newplot";d+="."+e.format.replace("-",".");c.then(function(g){f&&(f._snapshotInProgress=!1);return p(g,d,e.format)}).then(function(g){l(g)}).catch(function(g){f&&(f._snapshotInProgress=!1);m(g)})})}},{"../lib":749,"../plot_api/to_image":790,"./filesaver":883,"./helpers":884}],883:[function(b,D,G){var r=b("../lib"),
n=b("./helpers");D.exports=function(p,k,a){var e=document.createElement("a"),f="download"in e;return new Promise(function(l,m){r.isIE9orBelow()&&m(Error("IE \x3c 10 unsupported"));if(r.isSafari())return n.octetStream(("svg"===a?",":";base64,")+encodeURIComponent(p)),l(k);if(r.isIE())return m=n.createBlob(p,"svg"),window.navigator.msSaveBlob(m,k),l(k);if(f)return m=n.createBlob(p,a),m=n.createObjectURL(m),e.href=m,e.download=k,document.body.appendChild(e),e.click(),document.body.removeChild(e),n.revokeObjectURL(m),
l(k);m(Error("download error"))})}},{"../lib":749,"./helpers":884}],884:[function(b,D,G){var r=b("../registry");G.getDelay=function(p){return p._has?p._has("gl3d")||p._has("gl2d")||p._has("mapbox")?500:0:0};G.getRedrawFunc=function(p){return function(){var k=p._fullLayout||{};(k._has&&k._has("polar")||!p.data||!p.data[0]||!p.data[0].r)&&r.getComponentMethod("colorbar","draw")(p)}};G.encodeSVG=function(p){return"data:image/svg+xml,"+encodeURIComponent(p)};G.encodeJSON=function(p){return"data:application/json,"+
encodeURIComponent(p)};var n=window.URL||window.webkitURL;G.createObjectURL=function(p){return n.createObjectURL(p)};G.revokeObjectURL=function(p){return n.revokeObjectURL(p)};G.createBlob=function(p,k){if("svg"===k)return new window.Blob([p],{type:"image/svg+xml;charset\x3dutf-8"});if("full-json"===k)return new window.Blob([p],{type:"application/json;charset\x3dutf-8"});p=window.atob(p);for(var a=p.length,e=new ArrayBuffer(a),f=new Uint8Array(e),l=0;l<a;l++)f[l]=p.charCodeAt(l);return new window.Blob([e],
{type:"image/"+k})};G.octetStream=function(p){document.location.href="data:application/octet-stream"+p};G.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/;G.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":880}],885:[function(b,D,G){G=b("./helpers");b={getDelay:G.getDelay,getRedrawFunc:G.getRedrawFunc,clone:b("./cloneplot"),toSVG:b("./tosvg"),svgToImg:b("./svgtoimg"),toImage:b("./toimage"),downloadImage:b("./download")};D.exports=b},{"./cloneplot":881,
"./download":882,"./helpers":884,"./svgtoimg":886,"./toimage":887,"./tosvg":888}],886:[function(b,D,G){var r=b("../lib"),n=b("events").EventEmitter,p=b("./helpers");D.exports=function(k){var a=k.emitter||new n,e=new Promise(function(f,l){var m=window.Image,c=k.svg,d=k.format||"png";if(r.isIE()&&"svg"!==d)return m=Error(p.MSG_IE_BAD_FORMAT),l(m),k.promise?e:a.emit("error",m);var g=k.canvas,h=k.scale||1,q=h*(k.width||300),t=h*(k.height||150),v=g.getContext("2d"),w=new m;if("svg"===d||r.isIE9orBelow()||
r.isSafari())var A=p.encodeSVG(c);else{var z=p.createBlob(c,"svg");A=p.createObjectURL(z)}g.width=q;g.height=t;w.onload=function(){z=null;p.revokeObjectURL(A);"svg"!==d&&v.drawImage(w,0,0,q,t);switch(d){case "jpeg":var y=g.toDataURL("image/jpeg");break;case "png":y=g.toDataURL("image/png");break;case "webp":y=g.toDataURL("image/webp");break;case "svg":y=A;break;default:if(l(Error("Image format is not jpeg, png, svg or webp.")),!k.promise)return a.emit("error","Image format is not jpeg, png, svg or webp.")}f(y);
k.promise||a.emit("success",y)};w.onerror=function(y){z=null;p.revokeObjectURL(A);l(y);if(!k.promise)return a.emit("error",y)};w.src=A});return k.promise?e:a}},{"../lib":749,"./helpers":884,events:110}],887:[function(b,D,G){var r=b("events").EventEmitter,n=b("../registry"),p=b("../lib"),k=b("./helpers"),a=b("./cloneplot"),e=b("./tosvg"),f=b("./svgtoimg");D.exports=function(l,m){var c=new r;l=a(l,{format:"png"});var d=l.gd;d.style.position="absolute";d.style.left="-5000px";document.body.appendChild(d);
var g=k.getRedrawFunc(d);n.call("plot",d,l.data,l.layout,l.config).then(g).then(function(){var h=k.getDelay(d._fullLayout);setTimeout(function(){var q=e(d),t=document.createElement("canvas");t.id=p.randstr();c=f({format:m.format,width:d._fullLayout.width,height:d._fullLayout.height,canvas:t,emitter:c,svg:q});c.clean=function(){d&&document.body.removeChild(d)}},h)}).catch(function(h){c.emit("error",h)});return c}},{"../lib":749,"../registry":880,"./cloneplot":881,"./helpers":884,"./svgtoimg":886,"./tosvg":888,
events:110}],888:[function(b,D,G){function r(m){var c=n.select("body").append("div").style({display:"none"}).html("");m=m.replace(/(&[^;]*;)/gi,function(d){return"\x26lt;"===d?"\x26#60;":"\x26rt;"===d?"\x26#62;":-1!==d.indexOf("\x3c")||-1!==d.indexOf("\x3e")?"":c.html(d).text()});c.remove();return m}var n=b("d3"),p=b("../lib"),k=b("../components/drawing"),a=b("../components/color"),e=b("../constants/xmlns_namespaces"),f=/"/g,l=/("TOBESTRIPPED)|(TOBESTRIPPED")/g;D.exports=function(m,c,d){var g=m._fullLayout,
h=g._paper,q=g._toppaper,t=g.width,v=g.height,w;h.insert("rect",":first-child").call(k.setRect,0,0,t,v).call(a.fill,g.paper_bgcolor);var A=g._basePlotModules||[];for(w=0;w<A.length;w++){var z=A[w];z.toSVG&&z.toSVG(m)}if(q)for(w=q.node().childNodes,m=Array.prototype.slice.call(w),w=0;w<m.length;w++)q=m[w],q.childNodes.length&&h.node().appendChild(q);g._draggers&&g._draggers.remove();h.node().style.background="";h.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var B=
n.select(this);if("hidden"===this.style.visibility||"none"===this.style.display)B.remove();else{B.style({visibility:null,display:null});var C=this.style.fontFamily;C&&-1!==C.indexOf('"')&&B.style("font-family",C.replace(f,"TOBESTRIPPED"))}});if(g._gradientUrlQueryParts){w=[];for(var y in g._gradientUrlQueryParts)w.push(y);w.length&&h.selectAll(w.join(",")).each(function(){var B=n.select(this),C=this.style.fill;C&&-1!==C.indexOf("url(")&&B.style("fill",C.replace(f,"TOBESTRIPPED"));(C=this.style.stroke)&&
-1!==C.indexOf("url(")&&B.style("stroke",C.replace(f,"TOBESTRIPPED"))})}"pdf"!==c&&"eps"!==c||h.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0);h.node().setAttributeNS(e.xmlns,"xmlns",e.svg);h.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink);"svg"===c&&d&&(h.attr("width",d*t),h.attr("height",d*v),h.attr("viewBox","0 0 "+t+" "+v));c=(new window.XMLSerializer).serializeToString(h.node());c=r(c);c=c.replace(/&(?!\w+;|#[0-9]+;| #x[0-9A-F]+;)/g,"\x26amp;");c=c.replace(l,"'");p.isIE()&&
(c=c.replace(/"/gi,"'"),c=c.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),c=c.replace(/(\\')/gi,'"'));return c}},{"../components/color":615,"../components/drawing":637,"../constants/xmlns_namespaces":725,"../lib":749,d3:169}],889:[function(b,D,G){var r=b("../../lib");D.exports=function(n,p){for(var k=0;k<n.length;k++)n[k].i=k;r.mergeArray(p.text,n,"tx");r.mergeArray(p.hovertext,n,"htx");if(p=p.marker)if(r.mergeArray(p.opacity,n,"mo",!0),r.mergeArray(p.color,n,"mc"),p=p.line)r.mergeArray(p.color,n,"mlc"),
r.mergeArrayCastPositive(p.width,n,"mlw")}},{"../../lib":749}],890:[function(b,D,G){G=b("../scatter/attributes");var r=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../plots/template_attributes").texttemplateAttrs,p=b("../../components/colorscale/attributes"),k=b("../../plots/font_attributes"),a=b("./constants");b=b("../../lib/extend").extendFlat;k=k({editType:"calc",arrayOk:!0,colorEditType:"style"});var e=b({},G.marker.line.width,{dflt:0});e=b({width:e,editType:"calc"},p("marker.line"));
p=b({line:e,editType:"calc"},p("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});D.exports={x:G.x,x0:G.x0,dx:G.dx,y:G.y,y0:G.y0,dy:G.dy,text:G.text,texttemplate:n({editType:"plot"},{keys:a.eventDataKeys}),hovertext:G.hovertext,hovertemplate:r({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",
editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:b({},k,{}),insidetextfont:b({},k,{}),outsidetextfont:b({},k,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:b({},G.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",
dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:p,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:G.selected.marker.opacity,color:G.selected.marker.color,editType:"style"},textfont:G.selected.textfont,editType:"style"},unselected:{marker:{opacity:G.unselected.marker.opacity,color:G.unselected.marker.color,editType:"style"},textfont:G.unselected.textfont,editType:"style"},r:G.r,t:G.t,_deprecated:{bardir:{valType:"enumerated",
editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/font_attributes":825,"../../plots/template_attributes":875,"../scatter/attributes":1155,"./constants":892}],891:[function(b,D,G){var r=b("../../plots/cartesian/axes"),n=b("../../components/colorscale/helpers").hasColorscale,p=b("../../components/colorscale/calc"),k=b("./arrays_to_calcdata"),a=b("../scatter/calc_selection");D.exports=function(e,f){var l=r.getFromId(e,f.xaxis||"x"),
m=r.getFromId(e,f.yaxis||"y");var c={msUTC:!(!f.base&&0!==f.base)};"h"===f.orientation?(c=l.makeCalcdata(f,"x",c),l=m.makeCalcdata(f,"y")):(c=m.makeCalcdata(f,"y",c),l=l.makeCalcdata(f,"x"));m=Math.min(l.length,c.length);for(var d=Array(m),g=0;g<m;g++)d[g]={p:l[g],s:c[g]},f.ids&&(d[g].id=String(f.ids[g]));n(f,"marker")&&p(e,f,{vals:f.marker.color,containerStr:"marker",cLetter:"c"});n(f,"marker.line")&&p(e,f,{vals:f.marker.line.color,containerStr:"marker.line",cLetter:"c"});k(d,f);a(d,f);return d}},
{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../plots/cartesian/axes":797,"../scatter/calc_selection":1157,"./arrays_to_calcdata":889}],892:[function(b,D,G){D.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],893:[function(b,D,G){function r(z,y,B,C,u){if(C.length){var F;n(B,C);switch(u.mode){case "overlay":p(y,B,C,u);break;case "group":var H=[];var J=[];for(F=0;F<C.length;F++){var I=C[F];var M=I[0].trace;void 0===M.offset?J.push(I):H.push(I)}if(J.length){J=
new A(J,{sepNegVal:!1,overlapNoMerge:!u.norm});var E=z._fullLayout;z=J.minDiff;F=J.traces;I=F.length;M=J.positions.length!==J.distinctPositions.length;var L=z*(1-u.gap),P=w(E,y._id)+F[0][0].trace.orientation;E=E._alignmentOpts[P]||{};for(P=0;P<I;P++){var N=F[P],Q=N[0].trace,O=Object.keys((E[Q.alignmentgroup]||{}).offsetGroups||{}).length;var T=O?L/O:M?L/I:L;var V=T*(1-(u.groupgap||0));Q=O?((2*Q._offsetIndex+1-O)*T-V)/2:M?((2*P+1-I)*T-V)/2:-V/2;N=N[0].t;N.barwidth=V;N.poffset=Q;N.bargroupwidth=L;N.bardelta=
z}J.binWidth=F[0][0].t.barwidth/100;a(J);e(y,J);f(y,J,M);z=J.traces;for(F=0;F<z.length;F++)if(I=z[F],void 0===I[0].trace.base)for(M=new A([I],{sepNegVal:!0,overlapNoMerge:!0}),L=0;L<I.length;L++)if(E=I[L],E.p!==q&&(P=M.put(E.p,E.b+E.s)))E.b=P;u.norm?(m(J),c(B,J,u)):l(B,J)}H.length&&p(y,B,H,u);break;case "stack":case "relative":H=[];J=[];for(F=0;F<C.length;F++)I=C[F],M=I[0].trace,void 0===M.base?J.push(I):H.push(I);if(J.length){z=new A(J,{sepNegVal:"relative"===u.mode,overlapNoMerge:!(u.norm||"stack"===
u.mode||"relative"===u.mode)});k(y,z,u);F=B._id.charAt(0);I=z.traces;for(P=0;P<I.length;P++)if(M=I[P],L=M[0].trace,"funnel"===L.type)for(V=0;V<M.length;V++)N=M[V],N.s!==q&&z.put(N.p,-.5*N.s);for(P=0;P<I.length;P++){M=I[P];L=M[0].trace;E="funnel"===L.type;Q=[];for(V=0;V<M.length;V++)N=M[V],N.s!==q&&(T=E?N.s:N.s+N.b,O=z.put(N.p,T),T=O+T,N.b=O,N[F]=T,u.norm||(Q.push(T),N.hasB&&Q.push(O)));u.norm||(L._extremes[B._id]=v.findExtremes(B,Q,{tozero:!0,padded:!0}))}for(F=0;F<J.length;F++)for(I=J[F],M=0;M<I.length;M++)L=
I[M],L.s!==q&&L.b+L.s===z.get(L.p,L.s)&&(L._outmost=!0);u.norm&&c(B,z,u)}H.length&&p(y,B,H,u)}d(C,y)}}function n(z,y){var B;for(B=0;B<y.length;B++){var C=y[B];var u=C[0].trace;var F="funnel"===u.type?u._base:u.base,H="h"===u.orientation?u.xcalendar:u.ycalendar,J="category"===z.type||"multicategory"===z.type?function(){return null}:z.d2c;if(h(F)){for(u=0;u<Math.min(F.length,C.length);u++){var I=J(F[u],0,H);g(I)?(C[u].b=+I,C[u].hasB=1):C[u].b=0}for(;u<C.length;u++)C[u].b=0}else for(I=J(F,0,H),I=(F=
g(I))?I:0,u=0;u<C.length;u++)C[u].b=I,F&&(C[u].hasB=1)}}function p(z,y,B,C){for(var u=0;u<B.length;u++){var F=new A([B[u]],{unitMinDiff:C.xCat||C.yCat,sepNegVal:!1,overlapNoMerge:!C.norm});k(z,F,C);C.norm?(m(F),c(y,F,C)):l(y,F)}}function k(z,y,B){var C=y.minDiff,u=y.traces,F=C*(1-B.gap);B=F*(1-(B.groupgap||0));for(var H=-B/2,J=0;J<u.length;J++){var I=u[J][0].t;I.barwidth=B;I.poffset=H;I.bargroupwidth=F;I.bardelta=C}y.binWidth=u[0][0].t.barwidth/100;a(y);e(z,y);f(z,y)}function a(z){z=z.traces;var y,
B;for(y=0;y<z.length;y++){var C=z[y],u=C[0],F=u.trace;u=u.t;var H=F._offset||F.offset,J=u.poffset;if(h(H)){var I=Array.prototype.slice.call(H,0,C.length);for(B=0;B<I.length;B++)g(I[B])||(I[B]=J);for(B=I.length;B<C.length;B++)I.push(J);u.poffset=I}else void 0!==H&&(u.poffset=H);B=F._width||F.width;F=u.barwidth;if(h(B)){var M=Array.prototype.slice.call(B,0,C.length);for(B=0;B<M.length;B++)g(M[B])||(M[B]=F);for(B=M.length;B<C.length;B++)M.push(F);u.barwidth=M;if(void 0===H){I=[];for(B=0;B<C.length;B++)I.push(J+
(F-M[B])/2);u.poffset=I}}else void 0!==B&&(u.barwidth=B,void 0===H&&(u.poffset=J+(F-B)/2))}}function e(z,y){y=y.traces;z=z._id.charAt(0);for(var B=0;B<y.length;B++){var C=y[B],u=C[0].t,F=u.poffset,H=Array.isArray(F);u=u.barwidth;for(var J=Array.isArray(u),I=0;I<C.length;I++){var M=C[I],E=M.w=J?u[I]:u;M[z]=M.p+(H?F[I]:F)+E/2}}}function f(z,y,B){var C=y.traces,u=y.minDiff/2;v.minDtick(z,y.minDiff,y.distinctPositions[0],B);for(y=0;y<C.length;y++){B=C[y];var F=B[0],H=F.trace,J=[],I;for(I=0;I<B.length;I++){var M=
B[I];var E=M.p-u;M=M.p+u;J.push(E,M)}if(H.width||H.offset){E=F.t;F=E.poffset;var L=E.barwidth,P=Array.isArray(F),N=Array.isArray(L);for(I=0;I<B.length;I++){M=B[I];var Q=N?L[I]:L;E=M.p+(P?F[I]:F);M=E+Q;J.push(E,M)}}H._extremes[z._id]=v.findExtremes(z,J,{padded:!1})}}function l(z,y){y=y.traces;for(var B=z._id.charAt(0),C=0;C<y.length;C++){for(var u=y[C],F=u[0].trace,H=[],J=!1,I=0;I<u.length;I++){var M=u[I],E=M.b,L=E+M.s;M[B]=L;H.push(L);M.hasB&&H.push(E);M.hasB&&M.b||(J=!0)}F._extremes[z._id]=v.findExtremes(z,
H,{tozero:J,padded:!0})}}function m(z){for(var y=z.traces,B=0;B<y.length;B++)for(var C=y[B],u=0;u<C.length;u++){var F=C[u];F.s!==q&&z.put(F.p,F.b+F.s)}}function c(z,y,B){function C(aa){return g(z.c2l(aa))&&(aa<I-J||aa>M+J||!g(I))}var u=y.traces,F=z._id.charAt(0),H="fraction"===B.norm?1:100,J=H/1E9,I=z.l2c(z.c2l(0)),M="stack"===B.mode?H:I;for(B=0;B<u.length;B++){for(var E=u[B],L=E[0].trace,P=[],N=!1,Q=!1,O=0;O<E.length;O++){var T=E[O];if(T.s!==q){var V=Math.abs(H/y.get(T.p,T.s));T.b*=V;T.s*=V;V=T.b;
var Z=V+T.s;T[F]=Z;P.push(Z);Q=Q||C(Z);T.hasB&&(P.push(V),Q=Q||C(V));T.hasB&&T.b||(N=!0)}}L._extremes[z._id]=v.findExtremes(z,P,{tozero:N,padded:Q})}}function d(z,y){y=y._id.charAt(0);var B={},C,u,F=Infinity,H=-Infinity;for(C=0;C<z.length;C++){var J=z[C];for(u=0;u<J.length;u++){var I=J[u].p;g(I)&&(F=Math.min(F,I),H=Math.max(H,I))}}var M=1E4/(H-F);H=B.round=function(O){return String(Math.round(M*(O-F)))};for(C=0;C<z.length;C++){J=z[C];J[0].t.extents=B;I=J[0].t.poffset;var E=Array.isArray(I);for(u=
0;u<J.length;u++){var L=J[u],P=L[y]-L.w/2;if(g(P)){var N=L[y]+L.w/2,Q=H(L.p);B[Q]=B[Q]?[Math.min(P,B[Q][0]),Math.max(N,B[Q][1])]:[P,N]}L.p0=L.p+(E?I[u]:I);L.p1=L.p0+L.w;L.s0=L.b;L.s1=L.s0+L.s}}}var g=b("fast-isnumeric"),h=b("../../lib").isArrayOrTypedArray,q=b("../../constants/numerical").BADNUM,t=b("../../registry"),v=b("../../plots/cartesian/axes"),w=b("../../plots/cartesian/axis_ids").getAxisGroup,A=b("./sieve.js");D.exports={crossTraceCalc:function(z,y){var B=y.xaxis;y=y.yaxis;for(var C=z._fullLayout,
u=z._fullData,F=z.calcdata,H=[],J=[],I=0;I<u.length;I++){var M=u[I];if(!0===M.visible&&t.traceIs(M,"bar")&&M.xaxis===B._id&&M.yaxis===y._id&&("h"===M.orientation?H.push(F[I]):J.push(F[I]),M._computePh)){M=z.calcdata[I];for(var E=0;E<M.length;E++)"function"===typeof M[E].ph0&&(M[E].ph0=M[E].ph0()),"function"===typeof M[E].ph1&&(M[E].ph1=M[E].ph1())}}C={xCat:"category"===B.type||"multicategory"===B.type,yCat:"category"===y.type||"multicategory"===y.type,mode:C.barmode,norm:C.barnorm,gap:C.bargap,groupgap:C.bargroupgap};
r(z,B,y,J,C);r(z,y,B,H,C)},setGroupPositions:r}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_ids":800,"../../registry":880,"./sieve.js":903,"fast-isnumeric":241}],894:[function(b,D,G){function r(d,g,h,q){d=g.orientation;d=l(h,g[{v:"x",h:"y"}[d]+"axis"])+d;var t=h._alignmentOpts||{};h=q("alignmentgroup");var v=t[d];v||(v=t[d]={});(d=v[h])?d.traces.push(g):d=v[h]={traces:[g],alignmentIndex:Object.keys(v).length,offsetGroups:{}};q=q("offsetgroup");
d=d.offsetGroups;h=d[q];q&&(h||(h=d[q]={offsetIndex:Object.keys(d).length}),g._offsetIndex=h.offsetIndex)}function n(d,g,h,q,t,v){v=v||{};g=!1!==v.moduleHasSelected;var w=!1!==v.moduleHasUnselected,A=!1!==v.moduleHasConstrain,z=!1!==v.moduleHasCliponaxis,y=!1!==v.moduleHasTextangle,B=!1!==v.moduleHasInsideanchor,C=!!v.hasPathbar,u=Array.isArray(t)||"auto"===t;v=u||"inside"===t;t=u||"outside"===t;if(v||t)h=c(q,"textfont",h.font),u=p.extendFlat({},h),(d=!(d.textfont&&d.textfont.color))&&delete u.color,
c(q,"insidetextfont",u),C&&(C=p.extendFlat({},h),d&&delete C.color,c(q,"pathbar.textfont",C)),t&&c(q,"outsidetextfont",h),g&&q("selected.textfont.color"),w&&q("unselected.textfont.color"),A&&q("constraintext"),z&&q("cliponaxis"),y&&q("textangle"),q("texttemplate");v&&B&&q("insidetextanchor")}var p=b("../../lib"),k=b("../../components/color"),a=b("../../registry"),e=b("../scatter/xy_defaults"),f=b("./style_defaults"),l=b("../../plots/cartesian/axis_ids").getAxisGroup,m=b("./attributes"),c=p.coerceFont;
D.exports={supplyDefaults:function(d,g,h,q){function t(w,A){return p.coerce(d,g,m,w,A)}if(e(d,g,q,t)){t("orientation",g.x&&!g.y?"h":"v");t("base");t("offset");t("width");t("text");t("hovertext");t("hovertemplate");var v=t("textposition");n(d,g,q,t,v,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});f(d,g,t,h,q);h=(g.marker.line||{}).color;q=a.getComponentMethod("errorbars","supplyDefaults");q(d,g,h||k.defaultLine,
{axis:"y"});q(d,g,h||k.defaultLine,{axis:"x",inherit:"y"});p.coerceSelectionMarkerOpacity(g,t)}else g.visible=!1},crossTraceDefaults:function(d,g){function h(w){return p.coerce(t._input,t,m,w)}if("group"===g.barmode)for(var q=0;q<d.length;q++){var t=d[q];if("bar"===t.type){var v=t._input;r(v,t,g,h)}}},handleGroupingDefaults:r,handleText:n}},{"../../components/color":615,"../../lib":749,"../../plots/cartesian/axis_ids":800,"../../registry":880,"../scatter/xy_defaults":1181,"./attributes":890,"./style_defaults":905}],
895:[function(b,D,G){D.exports=function(r,n,p){r.x="xVal"in n?n.xVal:n.x;r.y="yVal"in n?n.yVal:n.y;n.xa&&(r.xaxis=n.xa);n.ya&&(r.yaxis=n.ya);"h"===p.orientation?(r.label=r.y,r.value=r.x):(r.label=r.x,r.value=r.y);return r}},{}],896:[function(b,D,G){var r=b("fast-isnumeric"),n=b("tinycolor2"),p=b("../../lib").isArrayOrTypedArray;G.coerceString=function(k,a,e){if("string"===typeof a){if(a||!k.noBlank)return a}else if(("number"===typeof a||!0===a)&&!k.strict)return String(a);return void 0!==e?e:k.dflt};
G.coerceNumber=function(k,a,e){if(r(a)){a=+a;var f=k.min,l=k.max;if(!(void 0!==f&&a<f||void 0!==l&&a>l))return a}return void 0!==e?e:k.dflt};G.coerceColor=function(k,a,e){return n(a).isValid()?a:void 0!==e?e:k.dflt};G.coerceEnumerated=function(k,a,e){k.coerceNumber&&(a=+a);return-1!==k.values.indexOf(a)?a:void 0!==e?e:k.dflt};G.getValue=function(k,a){var e;Array.isArray(k)?a<k.length&&(e=k[a]):e=k;return e};G.getLineWidth=function(k,a){return 0<a.mlw?a.mlw:p(k.marker.line.width)?0:k.marker.line.width}},
{"../../lib":749,"fast-isnumeric":241,tinycolor2:548}],897:[function(b,D,G){function r(c,d,g,h){function q(O){return O[E]-O.w/2}function t(O){return O[E]+O.w/2}function v(O,T){return p.inbox(O-I,T-I,F+Math.min(1,Math.abs(T-O)/Q)-1)}function w(O){return v(H(O),J(O))}function A(O){var T=M,V=O.b,Z=O[L];u&&(O=Math.abs(O.rawS)||0,0<T?Z+=O:0>T&&(Z-=O));return p.inbox(V-T,Z-T,F+(Z-T)/(Z-V)-1)}var z=c.cd,y=z[0].trace,B=z[0].t,C="closest"===h,u="waterfall"===y.type,F=c.maxHoverDistance,H=C?q:function(O){return Math.min(q(O),
O.p-B.bardelta/2)},J=C?t:function(O){return Math.max(t(O),O.p+B.bardelta/2)};if("h"===y.orientation){var I=g;var M=d;var E="y";var L="x";var P=A;var N=w}else I=d,M=g,E="x",L="y",N=A,P=w;d=c[E+"a"];g=c[L+"a"];var Q=Math.abs(d.r2c(d.range[1])-d.r2c(d.range[0]));h=p.getDistanceFunction(h,P,N,function(O){return(P(O)+N(O))/2});p.getClosest(z,h,c);if(!1!==c.index&&z[c.index].p!==m)return C||(H=function(O){return Math.min(q(O),O.p-B.bargroupwidth/2)},J=function(O){return Math.max(t(O),O.p+B.bargroupwidth/
2)}),z=z[c.index],h=y.base?z.b+z.s:z.s,c[L+"0"]=c[L+"1"]=g.c2p(z[L],!0),c[L+"LabelVal"]=h,h=B.extents[B.extents.round(z.p)],c[E+"0"]=d.c2p(C?H(z):h[0],!0),c[E+"1"]=d.c2p(C?J(z):h[1],!0),c[E+"LabelVal"]=z.p,c.labelLabel=l(d,c[E+"LabelVal"]),c.valueLabel=l(g,c[L+"LabelVal"]),c.spikeDistance=(A(z)+function(O){return v(q(O),t(O))}(z))/2-F,c[E+"Spike"]=d.c2p(z.p,!0),e(z,y,c),c.hovertemplate=y.hovertemplate,c}function n(c,d){var g=d.mcc||c.marker.color,h=d.mlcc||c.marker.line.color;c=f(c,d);if(a.opacity(g))return g;
if(a.opacity(h)&&c)return h}var p=b("../../components/fx"),k=b("../../registry"),a=b("../../components/color"),e=b("../../lib").fillText,f=b("./helpers").getLineWidth,l=b("../../plots/cartesian/axes").hoverLabelText,m=b("../../constants/numerical").BADNUM;D.exports={hoverPoints:function(c,d,g,h){if(c=r(c,d,g,h))return g=c.cd,d=g[0].trace,g=g[c.index],c.color=n(d,g),k.getComponentMethod("errorbars","hoverInfo")(g,d,c),[c]},hoverOnBars:r,getTraceColor:n}},{"../../components/color":615,"../../components/fx":655,
"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"./helpers":896}],898:[function(b,D,G){D.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,colorbar:b("../scatter/marker_colorbar"),arraysToCalcdata:b("./arrays_to_calcdata"),
plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"bar",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar oriented errorBarsOK showLegend zoomScale".split(" "),animatable:!0,meta:{}}},{"../../plots/cartesian":810,"../scatter/marker_colorbar":1173,"./arrays_to_calcdata":889,"./attributes":890,"./calc":891,"./cross_trace_calc":893,
"./defaults":894,"./event_data":895,"./hover":897,"./layout_attributes":899,"./layout_defaults":900,"./plot":901,"./select":902,"./style":904}],899:[function(b,D,G){D.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],900:[function(b,
D,G){var r=b("../../registry"),n=b("../../plots/cartesian/axes"),p=b("../../lib"),k=b("./layout_attributes");D.exports=function(a,e,f){for(var l=!1,m=!1,c=!1,d={},g=p.coerce(a,e,k,"barmode",void 0),h=0;h<f.length;h++){var q=f[h];if(r.traceIs(q,"bar")&&q.visible){l=!0;if("group"===g){var t=q.xaxis+q.yaxis;d[t]&&(c=!0);d[t]=!0}q.visible&&"histogram"===q.type&&"category"!==n.getFromId({_fullLayout:e},q["v"===q.orientation?"xaxis":"yaxis"]).type&&(m=!0)}}l?("overlay"!==g&&p.coerce(a,e,k,"barnorm",void 0),
p.coerce(a,e,k,"bargap",m&&!c?0:.2),p.coerce(a,e,k,"bargroupgap",void 0)):delete e.barmode}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"./layout_attributes":899}],901:[function(b,D,G){function r(E){return E.id}function n(E,L,P,N){var Q=[],O=[],T=N?L:P;L=N?P:L;Q[0]=T.c2p(E.s0,!0);O[0]=L.c2p(E.p0,!0);Q[1]=T.c2p(E.s1,!0);O[1]=L.c2p(E.p1,!0);return N?[Q,O]:[O,Q]}function p(E,L,P,N){if(!L.uniformtext.mode&&P&&0<P.duration){var Q;N&&(Q=N());return E.transition().duration(P.duration).ease(P.easing).each("end",
function(){Q&&Q()}).each("interrupt",function(){Q&&Q()})}return E}function k(E,L,P,N,Q,O,T,V,Z,aa,Y){function ea(wa,Ca,Fa){return q.ensureSingle(wa,"text").text(Ca).attr({"class":"bartext bartext-"+oa,"text-anchor":"middle","data-notex":1}).call(w.font,Fa).call(t.convertToTspans,E)}var ca=L.xaxis,ba=L.yaxis;L=E._fullLayout;var ka=N[0].trace,qa="h"===ka.orientation,pa=l(L,N,Q,ca,ba);var oa=m(ka,Q);var ja=N[Q],ra=!("stack"===aa.mode||"relative"===aa.mode)||ja._outmost;if(pa&&"none"!==oa&&(!ja.isBlank&&
O!==T&&V!==Z||"auto"!==oa&&"inside"!==oa)){var ha=L.font;N=C.getBarColor(N[Q],ka);N=C.getInsideTextFont(ka,Q,ha,N);Q=C.getOutsideTextFont(ka,Q,ha);ha=P.datum();qa?"log"===ca.type&&0>=ha.s0&&(O=ca.range[0]<ca.range[1]?0:ca._length):"log"===ba.type&&0>=ha.s0&&(V=ba.range[0]<ba.range[1]?ba._length:0);ca=Math.abs(T-O)-2*M;ba=Math.abs(Z-V)-2*M;"outside"===oa&&(ra||ja.hasB||(oa="inside"));if("auto"===oa)if(ra){oa="inside";var la=q.ensureUniformFontSize(E,N);var ua=ea(P,pa,la);var na=w.bBox(ua.node());ra=
na.width;ha=na.height;0<ra&&0<ha&&(ra<=ca&&ha<=ba||ra<=ba&&ha<=ca||(qa?ca>=ba/ha*ra:ba>=ca/ra*ha))?oa="inside":(oa="outside",ua.remove(),ua=null)}else oa="inside";if(!ua&&(la=q.ensureUniformFontSize(E,"outside"===oa?Q:N),ua=ea(P,pa,la),P=ua.attr("transform"),ua.attr("transform",""),na=w.bBox(ua.node()),ra=na.width,ha=na.height,ua.attr("transform",P),0>=ra||0>=ha)){ua.remove();return}P=ka.textangle;"outside"===oa?(pa="both"===ka.constraintext||"outside"===ka.constraintext,O=f(O,T,V,Z,na,{isHorizontal:qa,
constrained:pa,angle:P})):(pa="both"===ka.constraintext||"inside"===ka.constraintext,O=e(O,T,V,Z,na,{isHorizontal:qa,constrained:pa,angle:P,anchor:ka.insidetextanchor}));O.fontSize=la.size;y(ka.type,O,L);ja.transform=O;p(ua,L,aa,Y).attr("transform",q.getTextTransform(O))}else P.select("text").remove()}function a(E,L){var P=Math.PI/180*L;L=Math.abs(Math.sin(P));P=Math.abs(Math.cos(P));return{x:E.width*P+E.height*L,y:E.width*L+E.height*P}}function e(E,L,P,N,Q,O){var T=!!O.isHorizontal,V=!!O.constrained,
Z=O.angle||0,aa=O.anchor||"end",Y="end"===aa;aa="start"===aa;var ea=((O.leftToRight||0)+1)/2,ca=1-ea,ba=Q.width,ka=Q.height,qa=Math.abs(L-E),pa=Math.abs(N-P);O=qa>2*M&&pa>2*M?M:0;qa-=2*O;pa-=2*O;var oa="auto"===Z?0:Z;"auto"!==Z||ba<=qa&&ka<=pa||!(ba>qa||ka>pa)||(ba>pa||ka>qa)&&ba<ka===qa<pa||(oa+=90);ba=a(Q,oa);Z=1;V&&(Z=Math.min(1,qa/ba.x,pa/ba.y));V=Q.left*ca+Q.right*ea;Q=(Q.top+Q.bottom)/2;ea=(E+M)*ca+(L-M)*ea;ca=(P+N)/2;pa=qa=0;if(aa||Y)Y=(T?ba.x:ba.y)/2,ba=T?E<L?1:-1:P<N?1:-1,T?aa?(ea=E+ba*O,
qa=-ba*Y):(ea=L-ba*O,qa=ba*Y):aa?(ca=P+ba*O,pa=-ba*Y):(ca=N-ba*O,pa=ba*Y);return{textX:V,textY:Q,targetX:ea,targetY:ca,anchorX:qa,anchorY:pa,scale:Z,rotate:oa}}function f(E,L,P,N,Q,O){var T=!!O.isHorizontal,V=!!O.constrained,Z=O.angle||0,aa=Q.width,Y=Q.height,ea=Math.abs(L-E),ca=Math.abs(N-P);O=T?ca>2*M?M:0:ea>2*M?M:0;var ba=1;V&&(ba=T?Math.min(1,ca/Y):Math.min(1,ea/aa));V="auto"===Z?0:Z;Z=a(Q,V);Z=(T?Z.x:Z.y)/2;aa=(Q.left+Q.right)/2;Q=(Q.top+Q.bottom)/2;Y=(E+L)/2;ea=(P+N)/2;var ka=ca=0;E=T?L<E?1:
-1:P<N?1:-1;T?(Y=L-E*O,ca=E*Z):(ea=N+E*O,ka=-E*Z);return{textX:aa,textY:Q,targetX:Y,targetY:ea,anchorX:ca,anchorY:ka,scale:ba,rotate:V}}function l(E,L,P,N,Q){var O=L[0].trace;E=O.texttemplate?c(E,L,P,N,Q):O.textinfo?d(L,P,N,Q):u.getValue(O.text,P);return u.coerceString(H,E)}function m(E,L){E=u.getValue(E.textposition,L);return u.coerceEnumerated(J,E)}function c(E,L,P,N,Q){function O(ka){return z(ba,+ka,!0).text}var T=L[0].trace,V=q.castOption(T,P,"texttemplate");if(!V)return"";var Z="waterfall"===
T.type,aa="funnel"===T.type;if("h"===T.orientation){var Y="y";var ea=Q;var ca="x";var ba=N}else Y="x",ea=N,ca="y",ba=Q;P=L[P];L={};L.label=P.p;L.labelLabel=L[Y+"Label"]=z(ea,P.p,!0).text;Y=q.castOption(T,P.i,"text");if(0===Y||Y)L.text=Y;L.value=P.s;L.valueLabel=L[ca+"Label"]=O(P.s);ca={};I(ca,T,P.i);Z&&(L.delta=+P.rawS||P.s,L.deltaLabel=O(L.delta),L.final=P.v,L.finalLabel=O(L.final),L.initial=L.final-L.delta,L.initialLabel=O(L.initial));aa&&(L.value=P.s,L.valueLabel=O(L.value),L.percentInitial=P.begR,
L.percentInitialLabel=q.formatPercent(P.begR),L.percentPrevious=P.difR,L.percentPreviousLabel=q.formatPercent(P.difR),L.percentTotal=P.sumR,L.percenTotalLabel=q.formatPercent(P.sumR));if(Z=q.castOption(T,P.i,"customdata"))L.customdata=Z;return q.texttemplateString(V,L,E._d3locale,ca,L,T._meta||{})}function d(E,L,P,N){function Q(ba){return z(T?P:N,+ba,!0).text}var O=E[0].trace,T="h"===O.orientation,V="waterfall"===O.type,Z="funnel"===O.type,aa=E[L],Y=O.textinfo.split("+"),ea=[],ca=function(ba){return-1!==
Y.indexOf(ba)};ca("label")&&ea.push(z(T?N:P,E[L].p,!0).text);ca("text")&&(E=q.castOption(O,aa.i,"text"),(0===E||E)&&ea.push(E));V&&(V=+aa.rawS||aa.s,E=aa.v,L=E-V,ca("initial")&&ea.push(Q(L)),ca("delta")&&ea.push(Q(V)),ca("final")&&ea.push(Q(E)));Z&&(ca("value")&&ea.push(Q(aa.s)),Z=0,ca("percent initial")&&Z++,ca("percent previous")&&Z++,ca("percent total")&&Z++,Z=1<Z,ca("percent initial")&&(E=q.formatPercent(aa.begR),Z&&(E+=" of initial"),ea.push(E)),ca("percent previous")&&(E=q.formatPercent(aa.difR),
Z&&(E+=" of previous"),ea.push(E)),ca("percent total")&&(E=q.formatPercent(aa.sumR),Z&&(E+=" of total"),ea.push(E)));return ea.join("\x3cbr\x3e")}var g=b("d3"),h=b("fast-isnumeric"),q=b("../../lib"),t=b("../../lib/svg_text_utils"),v=b("../../components/color"),w=b("../../components/drawing"),A=b("../../registry"),z=b("../../plots/cartesian/axes").tickText;G=b("./uniform_text");var y=G.recordMinTextSize,B=G.clearMinTextSize,C=b("./style"),u=b("./helpers");G=b("./constants");var F=b("./attributes"),
H=F.text,J=F.textposition,I=b("../../components/fx/helpers").appendArrayPointValue,M=G.TEXTPAD;D.exports={plot:function(E,L,P,N,Q,O){var T=L.xaxis,V=L.yaxis,Z=E._fullLayout;Q||(Q={mode:Z.barmode,norm:Z.barmode,gap:Z.bargap,groupgap:Z.bargroupgap},B("bar",Z));P=q.makeTraceGroups(N,P,"trace bars").each(function(aa){var Y=g.select(this),ea=aa[0].trace,ca="funnel"===ea.type,ba="bar"===ea.type||ca,ka=0;"waterfall"===ea.type&&ea.connector.visible&&"between"===ea.connector.mode&&(ka=ea.connector.line.width/
2);var qa="h"===ea.orientation,pa=Q&&0<Q.duration;ca=q.ensureSingle(Y,"g","points");var oa=ea.ids?r:void 0;ca=ca.selectAll("g.point").data(q.identity,oa);ca.enter().append("g").classed("point",!0);ca.exit().remove();ca.each(function(ja,ra){function ha(bb){var La=g.round(gb/2%1,2);return 0===Q.gap&&0===Q.groupgap?g.round(Math.round(bb)-La,2):bb}function la(bb,La,kb){return kb&&bb===La?bb:2<=Math.abs(bb-La)?ha(bb):bb>La?Math.ceil(bb):Math.floor(bb)}var ua=g.select(this),na=n(ja,T,V,qa),wa=na[0][0],
Ca=na[0][1],Fa=na[1][0];na=na[1][1];var Xa=0===(qa?Ca-wa:na-Fa);Xa&&ba&&u.getLineWidth(ea,ja)&&(Xa=!1);Xa||(Xa=!h(wa)||!h(Ca)||!h(Fa)||!h(na));(ja.isBlank=Xa)&&(qa?Ca=wa:na=Fa);ka&&!Xa&&(qa?(wa-=(wa<Ca?1:-1)*ka,Ca+=(wa<Ca?1:-1)*ka):(Fa-=(Fa<na?1:-1)*ka,na+=(Fa<na?1:-1)*ka));if("waterfall"===ea.type){if(!Xa){var ab=ea[ja.dir].marker;var gb=ab.line.width;ab=ab.color}}else gb=u.getLineWidth(ea,ja),ab=ja.mc||ea.marker.color;E._context.staticPlot||(ab=1>v.opacity(ab)||.01<gb?ha:la,wa=ab(wa,Ca,qa),Ca=ab(Ca,
wa,qa),Fa=ab(Fa,na,!qa),na=ab(na,Fa,!qa));ab=p(q.ensureSingle(ua,"path"),Z,Q,O);ab.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ca-wa)*(na-Fa))?"M0,0Z":"M"+wa+","+Fa+"V"+na+"H"+Ca+"V"+Fa+"Z").call(w.setClipUrl,L.layerClipId,E);!Z.uniformtext.mode&&pa&&(Xa=w.makePointStyleFns(ea),w.singlePointStyle(ja,ab,ea,Xa,E));k(E,L,ua,aa,ra,wa,Ca,Fa,na,Q,O);L.layerClipId&&w.hideOutsideRangePoint(ja,ua.select("text"),T,V,ea.xcalendar,ea.ycalendar)});w.setClipUrl(Y,!1===ea.cliponaxis?null:L.layerClipId,
E)});A.getComponentMethod("errorbars","plot")(E,P,L,Q)},toMoveInsideBar:e}},{"../../components/color":615,"../../components/drawing":637,"../../components/fx/helpers":651,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../registry":880,"./attributes":890,"./constants":892,"./helpers":896,"./style":904,"./uniform_text":906,d3:169,"fast-isnumeric":241}],902:[function(b,D,G){D.exports=function(r,n){var p=r.cd,k=r.xaxis,a=r.yaxis,e=p[0].trace,f="funnel"===e.type;e=
"h"===e.orientation;var l=[],m;if(!1===n)for(m=0;m<p.length;m++)p[m].selected=0;else for(m=0;m<p.length;m++){var c=p[m];if("ct"in c)var d=c.ct;else{var g=c,h=k,q=a;d=e;var t=f,v=h.c2p(d?g.s0:g.p0,!0);h=h.c2p(d?g.s1:g.p1,!0);var w=q.c2p(d?g.p0:g.s0,!0);g=q.c2p(d?g.p1:g.s1,!0);d=t?[(v+h)/2,(w+g)/2]:d?[h,(w+g)/2]:[(v+h)/2,g]}n.contains(d,!1,m,r)?(l.push({pointNumber:m,x:k.c2d(c.x),y:a.c2d(c.y)}),c.selected=1):c.selected=0}return l}},{}],903:[function(b,D,G){function r(k,a){this.traces=k;this.sepNegVal=
a.sepNegVal;this.overlapNoMerge=a.overlapNoMerge;for(var e=Infinity,f=[],l=0;l<k.length;l++){for(var m=k[l],c=0;c<m.length;c++){var d=m[c];d.p!==p&&f.push(d.p)}m[0]&&m[0].width1&&(e=Math.min(m[0].width1,e))}this.positions=f;k=n(f,{unitMinDiff:a.unitMinDiff});this.distinctPositions=k.vals;this.binWidth=this.minDiff=1===k.vals.length&&Infinity!==e?e:Math.min(k.minDiff,e);this.bins={}}D.exports=r;var n=b("../../lib").distinctVals,p=b("../../constants/numerical").BADNUM;r.prototype.put=function(k,a){k=
this.getLabel(k,a);var e=this.bins[k]||0;this.bins[k]=e+a;return e};r.prototype.get=function(k,a){k=this.getLabel(k,a);return this.bins[k]||0};r.prototype.getLabel=function(k,a){return(0>a&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?k:Math.round(k/this.binWidth))}},{"../../constants/numerical":724,"../../lib":749}],904:[function(b,D,G){function r(A,z,y){A.selectAll("text").each(function(B){var C=l.select(this);B=d.ensureUniformFontSize(y,p(C,B,z,y));c.font(C,B)})}function n(A,z,y){A.each(function(B){var C=
l.select(this);if(B.selected){B=d.ensureUniformFontSize(y,p(C,B,z,y));var u=z.selected.textfont&&z.selected.textfont.color;u&&(B.color=u);c.font(C,B)}else c.selectedTextStyle(C,z)})}function p(A,z,y,B){B=B._fullLayout.font;var C=y.textfont;A.classed("bartext-inside")?(A=f(z,y),C=k(y,z.i,B,A)):A.classed("bartext-outside")&&(C=a(y,z.i,B));return C}function k(A,z,y,B){y=e(q,A.textfont,z,y);if(void 0===A._input.textfont||void 0===A._input.textfont.color||Array.isArray(A.textfont.color)&&void 0===A.textfont.color[z])y=
{color:m.contrast(B),family:y.family,size:y.size};return e(t,A.insidetextfont,z,y)}function a(A,z,y){y=e(q,A.textfont,z,y);return e(v,A.outsidetextfont,z,y)}function e(A,z,y,B){z=z||{};var C=w.getValue(z.family,y),u=w.getValue(z.size,y);z=w.getValue(z.color,y);return{family:w.coerceString(A.family,C,B.family),size:w.coerceNumber(A.size,u,B.size),color:w.coerceColor(A.color,z,B.color)}}function f(A,z){return"waterfall"===z.type?z[A.dir].marker.color:A.mc||z.marker.color}var l=b("d3"),m=b("../../components/color"),
c=b("../../components/drawing"),d=b("../../lib"),g=b("../../registry"),h=b("./uniform_text").resizeText;G=b("./attributes");var q=G.textfont,t=G.insidetextfont,v=G.outsidetextfont,w=b("./helpers");D.exports={style:function(A){var z=l.select(A).selectAll("g.barlayer").selectAll("g.trace");h(A,z,"bar");var y=z.size(),B=A._fullLayout;z.style("opacity",function(C){return C[0].trace.opacity}).each(function(C){("stack"===B.barmode&&1<y||0===B.bargap&&0===B.bargroupgap&&!C[0].trace.marker.line.width)&&l.select(this).attr("shape-rendering",
"crispEdges")});z.selectAll("g.points").each(function(C){var u=l.select(this);C=C[0].trace;c.pointStyle(u.selectAll("path"),C,A);r(u,C,A)});g.getComponentMethod("errorbars","style")(z)},styleTextPoints:r,styleOnSelect:function(A,z,y){z=z[0].trace;z.selectedpoints?(c.selectedPointStyle(y.selectAll("path"),z),n(y.selectAll("text"),z,A)):(c.pointStyle(y.selectAll("path"),z,A),r(y,z,A),g.getComponentMethod("errorbars","style")(y))},getInsideTextFont:k,getOutsideTextFont:a,getBarColor:f,resizeText:h}},
{"../../components/color":615,"../../components/drawing":637,"../../lib":749,"../../registry":880,"./attributes":890,"./helpers":896,"./uniform_text":906,d3:169}],905:[function(b,D,G){var r=b("../../components/color"),n=b("../../components/colorscale/helpers").hasColorscale,p=b("../../components/colorscale/defaults");D.exports=function(k,a,e,f,l){e("marker.color",f);n(k,"marker")&&p(k,a,l,e,{prefix:"marker.",cLetter:"c"});e("marker.line.color",r.defaultLine);n(k,"marker.line")&&p(k,a,l,e,{prefix:"marker.line.",
cLetter:"c"});e("marker.line.width");e("marker.opacity");e("selected.marker.color");e("unselected.marker.color")}},{"../../components/color":615,"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626}],906:[function(b,D,G){var r=b("d3"),n=b("../../lib");D.exports={recordMinTextSize:function(p,k,a){if(a.uniformtext.mode){p="_"+p+"Text_minsize";var e=a.uniformtext.minsize,f=k.scale*k.fontSize;k.hide=f<e;a[p]=a[p]||Infinity;k.hide||(a[p]=Math.min(a[p],Math.max(f,e)))}},
clearMinTextSize:function(p,k){k["_"+p+"Text_minsize"]=void 0},resizeText:function(p,k,a){p=p._fullLayout;var e=p["_"+a+"Text_minsize"];if(e){var f="hide"===p.uniformtext.mode;switch(a){case "funnelarea":case "pie":case "sunburst":a="g.slice";break;case "treemap":a="g.slice, g.pathbar";break;default:a="g.points \x3e g.point"}k.selectAll(a).each(function(l){if(l=l.transform)l.scale=f&&l.hide?0:e/l.fontSize,r.select(this).select("text").attr("transform",n.getTextTransform(l))})}}}},{"../../lib":749,
d3:169}],907:[function(b,D,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var r=b("../../lib/extend").extendFlat,n=b("../scatterpolar/attributes");b=b("../bar/attributes");D.exports={r:n.r,theta:n.theta,r0:n.r0,dr:n.dr,theta0:n.theta0,dtheta:n.dtheta,thetaunit:n.thetaunit,base:r({},b.base,{}),offset:r({},b.offset,{}),width:r({},b.width,{}),text:r({},b.text,{}),hovertext:r({},b.hovertext,{}),marker:b.marker,hoverinfo:n.hoverinfo,hovertemplate:G(),selected:b.selected,unselected:b.unselected}},
{"../../lib/extend":739,"../../plots/template_attributes":875,"../bar/attributes":890,"../scatterpolar/attributes":1228}],908:[function(b,D,G){var r=b("../../components/colorscale/helpers").hasColorscale,n=b("../../components/colorscale/calc"),p=b("../bar/arrays_to_calcdata"),k=b("../bar/cross_trace_calc").setGroupPositions,a=b("../scatter/calc_selection"),e=b("../../registry").traceIs,f=b("../../lib").extendFlat;D.exports={calc:function(l,m){function c(w){var A=m[w];void 0!==A&&(m["_"+w]=Array.isArray(A)?
h.makeCalcdata(m,w):h.d2c(A,m.thetaunit))}var d=l._fullLayout,g=m.subplot,h=d[g].angularaxis;d=d[g].radialaxis.makeCalcdata(m,"r");g=h.makeCalcdata(m,"theta");for(var q=m._length,t=Array(q),v=0;v<q;v++)t[v]={p:g[v],s:d[v]};"linear"===h.type&&(c("width"),c("offset"));r(m,"marker")&&n(l,m,{vals:m.marker.color,containerStr:"marker",cLetter:"c"});r(m,"marker.line")&&n(l,m,{vals:m.marker.line.color,containerStr:"marker.line",cLetter:"c"});p(t,m);a(t,m);return t},crossTraceCalc:function(l,m,c){for(var d=
l.calcdata,g=[],h=0;h<d.length;h++){var q=d[h],t=q[0].trace;!0===t.visible&&e(t,"bar")&&t.subplot===c&&g.push(q)}c=f({},m.radialaxis,{_id:"x"});k(l,m.angularaxis,c,g,{mode:m.barmode,norm:m.barnorm,gap:m.bargap,groupgap:m.bargroupgap})}}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../lib":749,"../../registry":880,"../bar/arrays_to_calcdata":889,"../bar/cross_trace_calc":893,"../scatter/calc_selection":1157}],909:[function(b,D,G){var r=b("../../lib"),n=b("../scatterpolar/defaults").handleRThetaDefaults,
p=b("../bar/style_defaults"),k=b("./attributes");D.exports=function(a,e,f,l){function m(c,d){return r.coerce(a,e,k,c,d)}n(a,e,l,m)?(m("thetaunit"),m("base"),m("offset"),m("width"),m("text"),m("hovertext"),m("hovertemplate"),p(a,e,m,f,l),r.coerceSelectionMarkerOpacity(e,m)):e.visible=!1}},{"../../lib":749,"../bar/style_defaults":905,"../scatterpolar/defaults":1230,"./attributes":907}],910:[function(b,D,G){var r=b("../../components/fx"),n=b("../../lib"),p=b("../bar/hover").getTraceColor,k=n.fillText,
a=b("../scatterpolar/hover").makeHoverPointText,e=b("../../plots/polar/helpers").isPtInsidePolygon;D.exports=function(f,l,m){var c=f.cd,d=c[0].trace,g=f.subplot,h=g.radialAxis,q=g.vangles,t=q?e:n.isPtInsideSector,v=f.maxHoverDistance,w=g.angularAxis._period||2*Math.PI,A=Math.abs(h.g2p(Math.sqrt(l*l+m*m))),z=Math.atan2(m,l);h.range[0]>h.range[1]&&(z+=Math.PI);r.getClosest(c,function(y){return t(A,z,[y.rp0,y.rp1],[y.thetag0,y.thetag1],q)?v+Math.min(1,Math.abs(y.thetag1-y.thetag0)/w)-1+(y.rp1-A)/(y.rp1-
y.rp0)-1:Infinity},f);if(!1!==f.index)return l=c[f.index],f.x0=f.x1=l.ct[0],f.y0=f.y1=l.ct[1],m=n.extendFlat({},l,{r:l.s,theta:l.p}),k(l,d,f),a(m,d,g,f),f.hovertemplate=d.hovertemplate,f.color=p(d,l),f.xLabelVal=f.yLabelVal=void 0,0>l.s&&(f.idealAlign="left"),[f]}},{"../../components/fx":655,"../../lib":749,"../../plots/polar/helpers":862,"../bar/hover":897,"../scatterpolar/hover":1232}],911:[function(b,D,G){D.exports={moduleType:"trace",name:"barpolar",basePlotModule:b("../../plots/polar"),categories:["polar",
"bar","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("../scatterpolar/format_labels"),style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../bar/select"),meta:{}}},{"../../plots/polar":863,
"../bar/select":902,"../bar/style":904,"../scatter/marker_colorbar":1173,"../scatterpolar/format_labels":1231,"./attributes":907,"./calc":908,"./defaults":909,"./hover":910,"./layout_attributes":912,"./layout_defaults":913,"./plot":914}],912:[function(b,D,G){D.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],913:[function(b,D,G){var r=b("../../lib"),n=b("./layout_attributes");D.exports=
function(p,k,a){for(var e={},f,l=0;l<a.length;l++)f=a[l],"barpolar"===f.type&&!0===f.visible&&(f=f.subplot,e[f]||(r.coerce(p[f]||{},k[f],n,"barmode",void 0),r.coerce(p[f]||{},k[f],n,"bargap",void 0),e[f]=1))}},{"../../lib":749,"./layout_attributes":912}],914:[function(b,D,G){function r(f){var l=f.cxx,m=f.cyy;return f.vangles?function(c,d,g,h){if(0<k.angleDelta(g,h)){var q=g;g=h}else q=h;h=e.findEnclosingVertexAngles(q,f.vangles)[0];var t=e.findEnclosingVertexAngles(g,f.vangles)[1];return e.pathPolygonAnnulus(c,
d,q,g,[h,(q+g)/2,t],l,m)}:function(c,d,g,h){return k.pathAnnulus(c,d,g,h,l,m)}}var n=b("d3"),p=b("fast-isnumeric"),k=b("../../lib"),a=b("../../components/drawing"),e=b("../../plots/polar/helpers");D.exports=function(f,l,m){var c=l.xaxis,d=l.yaxis,g=l.radialAxis,h=l.angularAxis,q=r(l),t=l.layers.frontplot.select("g.barlayer");k.makeTraceGroups(t,m,"trace bars").each(function(){var v=n.select(this),w=k.ensureSingle(v,"g","points").selectAll("g.point").data(k.identity);w.enter().append("g").style("vector-effect",
"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0);w.exit().remove();w.each(function(A){var z=n.select(this),y=A.rp0=g.c2p(A.s0),B=A.rp1=g.c2p(A.s1),C=A.thetag0=h.c2g(A.p0),u=A.thetag1=h.c2g(A.p1);if(p(y)&&p(B)&&p(C)&&p(u)&&y!==B&&C!==u){var F=g.c2g(A.s1),H=(C+u)/2;A.ct=[c.c2p(F*Math.cos(H)),d.c2p(F*Math.sin(H))];A=q(y,B,C,u)}else A="M0,0Z";k.ensureSingle(z,"path").attr("d",A)});a.setClipUrl(v,l._hasClipOnAxisFalse?l.clipIds.forTraces:null,f)})}},{"../../components/drawing":637,
"../../lib":749,"../../plots/polar/helpers":862,d3:169,"fast-isnumeric":241}],915:[function(b,D,G){G=b("../scatter/attributes");var r=b("../bar/attributes"),n=b("../../components/color/attributes"),p=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../lib/extend").extendFlat;var k=G.marker,a=k.line;D.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",
editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",
min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],
editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:b({},k.symbol,{arrayOk:!1,editType:"plot"}),opacity:b({},k.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:b({},k.size,{arrayOk:!1,editType:"calc"}),color:b({},k.color,{arrayOk:!1,editType:"style"}),line:{color:b({},
a.color,{arrayOk:!1,dflt:n.defaultLine,editType:"style"}),width:b({},a.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:G.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,
selected:{marker:G.selected.marker,editType:"style"},unselected:{marker:G.unselected.marker,editType:"style"},text:b({},G.text,{}),hovertext:b({},G.hovertext,{}),hovertemplate:p({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":614,"../../lib/extend":739,"../../plots/template_attributes":875,"../bar/attributes":890,"../scatter/attributes":1155}],916:[function(b,D,G){function r(v,w,A,z){var y=w+"0"in v;if(w in v||y&&
"d"+w in v)return A.makeCalcdata(v,w);z=y?v[w+"0"]:"name"in v&&("category"===A.type||c(v.name)&&-1!==["linear","log"].indexOf(A.type)||g.isDateTime(v.name)&&"date"===A.type)?v.name:z;w="multicategory"===A.type?A.r2c_just_indices(z):A.d2c(z,0,v[w+"calendar"]);v=v._length;A=Array(v);for(z=0;z<v;z++)A[z]=w;return A}function n(v,w){for(var A=v.length,z=Array(A+1),y=0;y<A;y++)z[y]=v[y]-w;z[A]=v[A-1]+w;return z}function p(v){for(var w=Array(v),A=0;A<v;A++)w[A]=[];return w}function k(v,w,A){for(var z in t)g.isArrayOrTypedArray(w[z])&&
(Array.isArray(A)?g.isArrayOrTypedArray(w[z][A[0]])&&(v[t[z]]=w[z][A[0]][A[1]]):v[t[z]]=w[z][A])}function a(v,w){if(g.isArrayOrTypedArray(w.selectedpoints))for(var A=0;A<v.length;A++){for(var z=v[A].pts||[],y={},B=0;B<z.length;B++)y[z[B].i]=B;g.tagSelected(z,w,y)}}function e(v,w){return v.v-w.v}function f(v){return v.v}function l(v,w,A){return 0===A?v.q1:Math.min(v.q1,w[Math.min(g.findBin(2.5*v.q1-1.5*v.q3,w,!0)+1,A-1)])}function m(v,w,A){return 0===A?v.q3:Math.max(v.q3,w[Math.max(g.findBin(2.5*v.q3-
1.5*v.q1,w),0)])}var c=b("fast-isnumeric"),d=b("../../plots/cartesian/axes"),g=b("../../lib"),h=b("../../constants/numerical").BADNUM,q=g._;D.exports=function(v,w){var A=v._fullLayout,z=d.getFromId(v,w.xaxis||"x"),y=d.getFromId(v,w.yaxis||"y"),B=[],C="violin"===w.type?"_numViolins":"_numBoxes",u,F;if("h"===w.orientation){var H=z;var J="x";z="y"}else H=y,J="y",y=z,z="x";var I=r(w,z,y,A[C]);y=g.distinctVals(I);var M=y.vals;y=y.minDiff/2;var E="all"===(w.boxpoints||w.points)?g.identity:function(ca){return ca.v<
O.lf||ca.v>O.uf};if(w._hasPreCompStats){var L=w[J],P=function(ca){return H.d2c((w[ca]||[])[u])};M=Infinity;var N=-Infinity;for(u=0;u<w._length;u++){var Q=I[u];if(c(Q)){var O={};O.pos=O[z]=Q;O.q1=P("q1");O.med=P("median");O.q3=P("q3");Q=[];if(L&&g.isArrayOrTypedArray(L[u]))for(F=0;F<L[u].length;F++){var T=H.d2c(L[u][F]);T!==h&&(T={v:T,i:[u,F]},k(T,w,[u,F]),Q.push(T))}O.pts=Q.sort(e);T=O[J]=Q.map(f);F=T.length;if(O.med!==h&&O.q1!==h&&O.q3!==h&&O.med>=O.q1&&O.q3>=O.med){var V=P("lowerfence");O.lf=V!==
h&&V<=O.q1?V:l(O,T,F);V=P("upperfence");O.uf=V!==h&&V>=O.q3?V:m(O,T,F);V=P("mean");O.mean=V!==h?V:F?g.mean(T,F):(O.q1+O.q3)/2;var Z=P("sd");O.sd=V!==h&&0<=Z?Z:F?g.stdev(T,F,O.mean):O.q3-O.q1;O.lo=4*O.q1-3*O.q3;O.uo=4*O.q3-3*O.q1;V=P("notchspan");V=V!==h&&0<V?V:0===F?0:1.57*(O.q3-O.q1)/Math.sqrt(F);O.ln=O.med-V;O.un=O.med+V;V=O.lf;Z=O.uf;w.boxpoints&&T.length&&(V=Math.min(V,T[0]),Z=Math.max(Z,T[F-1]));w.notched&&(V=Math.min(V,O.ln),Z=Math.max(Z,O.un));O.min=V;O.max=Z}else g.warn(["Invalid input - make sure that q1 \x3c\x3d median \x3c\x3d q3",
"q1 \x3d "+O.q1,"median \x3d "+O.med,"q3 \x3d "+O.q3].join("\n")),T=O.med!==h?O.med:O.q1!==h?O.q3!==h?(O.q1+O.q3)/2:O.q1:O.q3!==h?O.q3:0,O.med=T,O.q1=O.q3=T,O.lf=O.uf=T,O.mean=O.sd=T,O.ln=O.un=T,O.min=O.max=T;M=Math.min(M,O.min);N=Math.max(N,O.max);O.pts2=Q.filter(E);B.push(O)}}w._extremes[H._id]=d.findExtremes(H,[M,N],{padded:!0})}else{N=H.makeCalcdata(w,J);Q=n(M,y);V=M.length;Z=p(V);for(u=0;u<w._length;u++)T=N[u],c(T)&&(F=g.findBin(I[u],Q),0<=F&&F<V&&(T={v:T,i:u},k(T,w,u),Z[F].push(T)));I=Infinity;
var aa=-Infinity;Q=w.quartilemethod;var Y="exclusive"===Q,ea="inclusive"===Q;for(u=0;u<V;u++)0<Z[u].length&&(O={},O.pos=O[z]=M[u],Q=O.pts=Z[u].sort(e),T=O[J]=Q.map(f),F=T.length,O.min=T[0],O.max=T[F-1],O.mean=g.mean(T,F),O.sd=g.stdev(T,F,O.mean),O.med=g.interp(T,.5),F%2&&(Y||ea)?(Y?(L=T.slice(0,F/2),P=T.slice(F/2+1)):ea&&(L=T.slice(0,F/2+1),P=T.slice(F/2)),O.q1=g.interp(L,.5),O.q3=g.interp(P,.5)):(O.q1=g.interp(T,.25),O.q3=g.interp(T,.75)),O.lf=l(O,T,F),O.uf=m(O,T,F),O.lo=4*O.q1-3*O.q3,O.uo=4*O.q3-
3*O.q1,T=0===F?0:1.57*(O.q3-O.q1)/Math.sqrt(F),O.ln=O.med-T,O.un=O.med+T,I=Math.min(I,O.ln),aa=Math.max(aa,O.un),O.pts2=Q.filter(E),B.push(O));w._extremes[H._id]=d.findExtremes(H,w.notched?N.concat([I,aa]):N,{padded:!0})}a(B,w);return 0<B.length?(B[0].t={num:A[C],dPos:y,posLetter:z,valLetter:J,labels:{med:q(v,"median:"),min:q(v,"min:"),q1:q(v,"q1:"),q3:q(v,"q3:"),max:q(v,"max:"),mean:"sd"===w.boxmean?q(v,"mean ± σ:"):q(v,"mean:"),lf:q(v,"lower fence:"),uf:q(v,"upper fence:")}},A[C]++,B):[{t:{empty:!0}}]};
var t={text:"tx",hovertext:"htx"}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"fast-isnumeric":241}],917:[function(b,D,G){function r(e,f,l,m){var c=f.calcdata;f=f._fullLayout;var d=m._id,g=d.charAt(0),h,q,t=[],v=0;for(h=0;h<l.length;h++){var w=c[l[h]];for(q=0;q<w.length;q++)t.push(m.c2l(w[q].pos,!0)),v+=(w[q].pts2||[]).length}if(t.length){h=p.distinctVals(t,{unitMinDiff:"category"===m.type||"multicategory"===m.type});t=h.minDiff/2;n.minDtick(m,h.minDiff,h.vals[0],
!0);var A=f["violin"===e?"_numViolins":"_numBoxes"],z="group"===f[e+"mode"]&&1<A,y=1-f[e+"gap"];e=1-f[e+"groupgap"];for(h=0;h<l.length;h++){w=c[l[h]];var B=w[0].trace,C=w[0].t;q=B.width;var u=B.side,F,H;if(q){var J=F=H=q/2;var I=0}else J=t,z?(F=k(f,m._id)+B.orientation,H=(F=Object.keys(((f._alignmentOpts[F]||{})[B.alignmentgroup]||{}).offsetGroups||{}).length)||A,I=F?B._offsetIndex:C.num,F=J*y*e/H,I=2*J*(-.5+(I+.5)/H)*y,H=J*y/H):(F=J*y*e,I=0,H=J);C.dPos=J;C.bPos=I;C.bdPos=F;C.wHover=H;F=I+F;C=!!q;
H=(B.boxpoints||B.points)&&0<v;if("positive"===u)u=J*(q?1:.5),q=I;else if("negative"===u){u=I;q=J*(q?1:.5);var M=F}else u=q=J,I=M=F;if(H){J=B.pointpos;H=B.jitter;var E=B.marker.size/2,L=0;if(0<=J+H)if(L=F*(J+H),L>u){C=!0;var P=E;var N=L}else L>I&&(P=E,N=u);L<=u&&(N=u);u=0;if(0>=J-H)if(u=-F*(J-H),u>q){C=!0;var Q=E;var O=u}else u>M&&(Q=E,O=q);u<=q&&(O=q)}else N=u,O=q;J=Array(w.length);for(q=0;q<w.length;q++)J[q]=w[q].pos;B._extremes[d]=n.findExtremes(m,J,{padded:C,vpadminus:O,vpadplus:N,vpadLinearized:!0,
ppadminus:{x:Q,y:P}[g],ppadplus:{x:P,y:Q}[g]})}}}var n=b("../../plots/cartesian/axes"),p=b("../../lib"),k=b("../../plots/cartesian/axis_ids").getAxisGroup,a=["v","h"];D.exports={crossTraceCalc:function(e,f){var l=e.calcdata,m=f.xaxis;f=f.yaxis;for(var c=0;c<a.length;c++){for(var d=a[c],g="h"===d?f:m,h=[],q=0;q<l.length;q++){var t=l[q],v=t[0].t;t=t[0].trace;!0!==t.visible||"box"!==t.type&&"candlestick"!==t.type||v.empty||(t.orientation||"v")!==d||t.xaxis!==m._id||t.yaxis!==f._id||h.push(q)}r("box",
e,h,g)}},setPositionOffset:r}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_ids":800}],918:[function(b,D,G){function r(m,c,d,g){function h(F){var H=0;F&&F.length&&(H+=1,p.isArrayOrTypedArray(F[0])&&F[0].length&&(H+=1));return H}function q(F){return p.validate(m[F],l[F])}var t=d("y"),v=d("x");if("box"===c.type){var w=d("q1"),A=d("median");var z=d("q3");c._hasPreCompStats=w&&w.length&&A&&A.length&&z&&z.length;z=Math.min(p.minRowLength(w),p.minRowLength(A),p.minRowLength(z))}w=
h(t);A=h(v);var y=w&&p.minRowLength(t),B=A&&p.minRowLength(v);if(c._hasPreCompStats)switch(String(A)+String(w)){case "00":t=q("x0")||q("dx");var C=!q("y0")&&!q("dy")||t?"v":"h";var u=z;break;case "10":C="v";u=Math.min(z,B);break;case "20":C="h";u=Math.min(z,v.length);break;case "01":C="h";u=Math.min(z,y);break;case "02":C="v";u=Math.min(z,t.length);break;case "12":C="v";u=Math.min(z,B,t.length);break;case "21":C="h";u=Math.min(z,v.length,y);break;case "11":u=0;break;case "22":C=!1;for(u=0;u<v.length;u++)if("category"===
f(v[u])){C=!0;break}if(C)C="v",u=Math.min(z,B,t.length);else{for(u=0;u<t.length;u++)if("category"===f(t[u])){C=!0;break}C?(C="h",u=Math.min(z,v.length,y)):(C="v",u=Math.min(z,B,t.length))}}else 0<w?(C="v",u=0<A?Math.min(B,y):Math.min(y)):0<A?(C="h",u=Math.min(B)):u=0;u?(c._length=u,t=d("orientation",C),c._hasPreCompStats?"v"===t&&0===A?(d("x0",0),d("dx",1)):"h"===t&&0===w&&(d("y0",0),d("dy",1)):"v"===t&&0===A?d("x0"):"h"===t&&0===w&&d("y0"),k.getComponentMethod("calendars","handleTraceDefaults")(m,
c,["x","y"],g)):c.visible=!1}function n(m,c,d,g){g=g.prefix;m=p.coerce2(m,c,l,"marker.outliercolor");var h=d("marker.line.outliercolor"),q="outliers";if(c._hasPreCompStats)q="all";else if(m||h)q="suspectedoutliers";(g=d(g+"points",q))?(d("jitter","all"===g?.3:0),d("pointpos","all"===g?-1.5:0),d("marker.symbol"),d("marker.opacity"),d("marker.size"),d("marker.color",c.line.color),d("marker.line.color"),d("marker.line.width"),"suspectedoutliers"===g&&(d("marker.line.outliercolor",c.marker.color),d("marker.line.outlierwidth")),
d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size"),d("text"),d("hovertext")):delete c.marker;g=d("hoveron");"all"!==g&&-1===g.indexOf("points")||d("hovertemplate");p.coerceSelectionMarkerOpacity(c,d)}var p=b("../../lib"),k=b("../../registry"),a=b("../../components/color"),e=b("../bar/defaults").handleGroupingDefaults,f=b("../../plots/cartesian/axis_autotype"),l=b("./attributes");D.exports={supplyDefaults:function(m,c,d,g){function h(v,w){return p.coerce(m,
c,l,v,w)}r(m,c,h,g);if(!1!==c.visible){if(g=c._hasPreCompStats)h("lowerfence"),h("upperfence");h("line.color",(m.marker||{}).color||d);h("line.width");h("fillcolor",a.addOpacity(c.line.color,.5));d=!1;if(g){var q=h("mean"),t=h("sd");q&&q.length&&(d=!0,t&&t.length&&(d="sd"))}h("boxmean",d);h("whiskerwidth");h("width");h("quartilemethod");d=!1;g?(g=h("notchspan"))&&g.length&&(d=!0):p.validate(m.notchwidth,l.notchwidth)&&(d=!0);h("notched",d)&&h("notchwidth");n(m,c,h,{prefix:"box"})}},crossTraceDefaults:function(m,
c){function d(v){return p.coerce(h._input,h,l,v)}for(var g,h,q=0;q<m.length;q++){h=m[q];var t=h.type;if("box"===t||"violin"===t)g=h._input,"group"===c[t+"mode"]&&e(g,h,c,d)}},handleSampleDefaults:r,handlePointsDefaults:n}},{"../../components/color":615,"../../lib":749,"../../plots/cartesian/axis_autotype":798,"../../registry":880,"../bar/defaults":894,"./attributes":915}],919:[function(b,D,G){D.exports=function(r,n){n.hoverOnBox&&(r.hoverOnBox=n.hoverOnBox);"xVal"in n&&(r.x=n.xVal);"yVal"in n&&(r.y=
n.yVal);n.xa&&(r.xaxis=n.xa);n.ya&&(r.yaxis=n.ya);return r}},{}],920:[function(b,D,G){function r(l,m,c,d){function g(N){return(M(N)+E(N))/2}var h=l.cd,q=l.xa,t=l.ya,v=h[0].trace,w=h[0].t,A="violin"===v.type,z=[];var y=w.bdPos;var B=w.wHover,C=function(N){return L.c2l(N.pos)+w.bPos-L.c2l(I)};if(A&&"both"!==v.side){if("positive"===v.side){var u=function(N){N=C(N);return a.inbox(N,N+B,P)};var F=y;var H=0}"negative"===v.side&&(u=function(N){N=C(N);return a.inbox(N-B,N,P)},F=0,H=y)}else u=function(N){N=
C(N);return a.inbox(N-B,N+B,P)},F=H=y;A=A?function(N){return a.inbox(N.span[0]-J,N.span[1]-J,P)}:function(N){return a.inbox(N.min-J,N.max-J,P)};if("h"===v.orientation){var J=m;var I=c;var M=A;var E=u;c="y";var L=t;m="x"}else J=c,I=m,M=u,E=A,c="x",L=q,m="y",q=t;y=Math.min(1,y/Math.abs(L.r2c(L.range[1])-L.r2c(L.range[0])));var P=l.maxHoverDistance-y;y=l.maxSpikeDistance-y;d=a.getDistanceFunction(d,M,E,g);a.getClosest(h,d,l);if(!1===l.index)return[];h=h[l.index];d=v.line.color;t=(v.marker||{}).color;
e.opacity(d)&&v.line.width?l.color=d:e.opacity(t)&&v.boxpoints?l.color=t:l.color=v.fillcolor;l[c+"0"]=L.c2p(h.pos+w.bPos-H,!0);l[c+"1"]=L.c2p(h.pos+w.bPos+F,!0);l[c+"LabelVal"]=h.pos;F=c+"Spike";l.spikeDistance=g(h)*y/P;l[F]=L.c2p(h.pos,!0);H={};d=["med","q1","q3","min","max"];(v.boxmean||(v.meanline||{}).visible)&&d.push("mean");(v.boxpoints||v.points)&&d.push("lf","uf");for(c=0;c<d.length;c++)y=d[c],y in h&&!(h[y]in H)&&(H[h[y]]=!0,t=h[y],u=q.c2p(t,!0),A=k.extendFlat({},l),A.attr=y,A[m+"0"]=A[m+
"1"]=u,A[m+"LabelVal"]=t,A[m+"Label"]=(w.labels?w.labels[y]+" ":"")+p.hoverLabelText(q,t),A.hoverOnBox=!0,"mean"===y&&"sd"in h&&"sd"===v.boxmean&&(A[m+"err"]=h.sd),l.name="",l.spikeDistance=void 0,l[F]=void 0,A.hovertemplate=!1,z.push(A));return z}function n(l,m,c){for(var d=l.cd,g=l.xa,h=l.ya,q=d[0].trace,t=g.c2p(m),v=h.c2p(c),w=a.quadrature(function(B){var C=Math.max(3,B.mrc||0);return Math.max(Math.abs(g.c2p(B.x)-t)-C,1-3/C)},function(B){var C=Math.max(3,B.mrc||0);return Math.max(Math.abs(h.c2p(B.y)-
v)-C,1-3/C)}),A=!1,z=0;z<d.length;z++){m=d[z];for(var y=0;y<(m.pts||[]).length;y++)c=m.pts[y],c=w(c),c<=l.distance&&(l.distance=c,A=[z,y])}if(!A)return!1;m=d[A[0]];c=m.pts[A[1]];d=g.c2p(c.x,!0);w=h.c2p(c.y,!0);A=c.mrc||1;l=k.extendFlat({},l,{index:c.i,color:(q.marker||{}).color,name:q.name,x0:d-A,x1:d+A,y0:w-A,y1:w+A,spikeDistance:l.distance,hovertemplate:q.hovertemplate});"h"===q.orientation?(d=h,l.xLabelVal=c.x,l.yLabelVal=m.pos):(d=g,l.xLabelVal=m.pos,l.yLabelVal=c.y);w=d._id.charAt(0);l[w+"Spike"]=
d.c2p(m.pos,!0);f(c,q,l);return l}var p=b("../../plots/cartesian/axes"),k=b("../../lib"),a=b("../../components/fx"),e=b("../../components/color"),f=k.fillText;D.exports={hoverPoints:function(l,m,c,d){var g=l.cd[0].trace.hoveron,h=[],q;-1!==g.indexOf("boxes")&&(h=h.concat(r(l,m,c,d)));-1!==g.indexOf("points")&&(q=n(l,m,c));if("closest"===d)return q?[q]:h;q&&h.push(q);return h},hoverOnBoxes:r,hoverOnPoints:n}},{"../../components/color":615,"../../components/fx":655,"../../lib":749,"../../plots/cartesian/axes":797}],
921:[function(b,D,G){D.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults").supplyLayoutDefaults,calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),
moduleType:"trace",name:"box",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend boxLayout zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,"./attributes":915,"./calc":916,"./cross_trace_calc":917,"./defaults":918,"./event_data":919,"./hover":920,"./layout_attributes":922,"./layout_defaults":923,"./plot":924,"./select":925,"./style":926}],922:[function(b,D,G){D.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",
editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],923:[function(b,D,G){function r(a,e,f,l,m){a=m+"Layout";e=!1;for(var c=0;c<f.length;c++)if(n.traceIs(f[c],a)){e=!0;break}e&&(l(m+"mode"),l(m+"gap"),l(m+"groupgap"))}var n=b("../../registry"),p=b("../../lib"),k=b("./layout_attributes");D.exports={supplyLayoutDefaults:function(a,e,f){r(a,e,f,function(l,m){return p.coerce(a,e,k,l,m)},"box")},_supply:r}},
{"../../lib":749,"../../registry":880,"./layout_attributes":922}],924:[function(b,D,G){function r(f,l,m,c){var d="h"===m.orientation,g=l.val,h=l.pos,q=!!h.rangebreaks,t=c.bPos,v=c.wdPos||0,w=c.bPosPxOffset||0,A=m.whiskerwidth||0,z=m.notched||!1,y=z?1-2*m.notchwidth:1;if(Array.isArray(c.bdPos)){var B=c.bdPos[0];var C=c.bdPos[1]}else C=B=c.bdPos;f=f.selectAll("path.box").data("violin"!==m.type||m.box.visible?a.identity:[]);f.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class",
"box");f.exit().remove();f.each(function(u){if(u.empty)return"M0,0Z";var F=h.c2l(u.pos+t,!0),H=h.l2p(F-B)+w,J=h.l2p(F+C)+w,I=q?(H+J)/2:h.l2p(F)+w,M=m.whiskerwidth,E=q?H*M+(1-M)*I:h.l2p(F-v)+w;M=q?J*M+(1-M)*I:h.l2p(F+v)+w;var L=h.l2p(F-B*y)+w;F=h.l2p(F+C*y)+w;var P=g.c2p(u.q1,!0),N=g.c2p(u.q3,!0),Q=a.constrain(g.c2p(u.med,!0),Math.min(P,N)+1,Math.max(P,N)-1),O=void 0===u.lf||!1===m.boxpoints,T=g.c2p(O?u.min:u.lf,!0);O=g.c2p(O?u.max:u.uf,!0);var V=g.c2p(u.ln,!0);u=g.c2p(u.un,!0);d?k.select(this).attr("d",
"M"+Q+","+L+"V"+F+"M"+P+","+H+"V"+J+(z?"H"+V+"L"+Q+","+F+"L"+u+","+J:"")+"H"+N+"V"+H+(z?"H"+u+"L"+Q+","+L+"L"+V+","+H:"")+"ZM"+P+","+I+"H"+T+"M"+N+","+I+"H"+O+(0===A?"":"M"+T+","+E+"V"+M+"M"+O+","+E+"V"+M)):k.select(this).attr("d","M"+L+","+Q+"H"+F+"M"+H+","+P+"H"+J+(z?"V"+V+"L"+F+","+Q+"L"+J+","+u:"")+"V"+N+"H"+H+(z?"V"+u+"L"+L+","+Q+"L"+H+","+V:"")+"ZM"+I+","+P+"V"+T+"M"+I+","+N+"V"+O+(0===A?"":"M"+E+","+T+"H"+M+"M"+E+","+O+"H"+M))})}function n(f,l,m,c){var d=l.x;l=l.y;var g=c.bdPos,h=c.bPos,q=
m.boxpoints||m.points;a.seedPseudoRandom();var t=function(v){v.forEach(function(w){w.t=c;w.trace=m});return v};f=f.selectAll("g.points").data(q?t:[]);f.enter().append("g").attr("class","points");f.exit().remove();f=f.selectAll("path").data(function(v){var w=v.pts2;var A=Math.max((v.max-v.min)/10,v.q3-v.q1);var z=1E-9*A,y=.01*A,B=[],C=0;if(m.jitter){if(0===A)for(C=1,B=Array(w.length),A=0;A<w.length;A++)B[A]=1;else for(A=0;A<w.length;A++){var u=Math.max(0,A-5);var F=w[u].v,H=Math.min(w.length-1,A+5),
J=w[H].v;"all"!==q&&(w[A].v<v.lf?J=Math.min(J,v.lf):F=Math.max(F,v.uf));u=Math.sqrt(y*(H-u)/(J-F+z))||0;u=a.constrain(Math.abs(u),0,1);B.push(u);C=Math.max(u,C)}u=2*m.jitter/(C||1)}for(A=0;A<w.length;A++)z=w[A],y=z.v,C=m.jitter?u*B[A]*(a.pseudoRandom()-.5):0,C=v.pos+h+g*(m.pointpos+C),"h"===m.orientation?(z.y=C,z.x=y):(z.x=C,z.y=y),"suspectedoutliers"===q&&y<v.uo&&y>v.lo&&(z.so=!0);return w});f.enter().append("path").classed("point",!0);f.exit().remove();f.call(e.translatePoints,d,l)}function p(f,
l,m,c){var d=l.val,g=l.pos,h=!!g.rangebreaks,q=c.bPos,t=c.bPosPxOffset||0,v=m.boxmean||(m.meanline||{}).visible;if(Array.isArray(c.bdPos)){var w=c.bdPos[0];var A=c.bdPos[1]}else A=w=c.bdPos;f=f.selectAll("path.mean").data("box"===m.type&&m.boxmean||"violin"===m.type&&m.box.visible&&m.meanline.visible?a.identity:[]);f.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"});f.exit().remove();f.each(function(z){var y=g.c2l(z.pos+q,!0),B=g.l2p(y-w)+t,C=g.l2p(y+
A)+t;y=h?(B+C)/2:g.l2p(y)+t;var u=d.c2p(z.mean,!0),F=d.c2p(z.mean-z.sd,!0);z=d.c2p(z.mean+z.sd,!0);"h"===m.orientation?k.select(this).attr("d","M"+u+","+B+"V"+C+("sd"===v?"m0,0L"+F+","+y+"L"+u+","+B+"L"+z+","+y+"Z":"")):k.select(this).attr("d","M"+B+","+u+"H"+C+("sd"===v?"m0,0L"+y+","+F+"L"+B+","+u+"L"+y+","+z+"Z":""))})}var k=b("d3"),a=b("../../lib"),e=b("../../components/drawing");D.exports={plot:function(f,l,m,c){var d=l.xaxis,g=l.yaxis;a.makeTraceGroups(c,m,"trace boxes").each(function(h){var q=
k.select(this),t=h[0];h=t.t;t=t.trace;h.wdPos=h.bdPos*t.whiskerwidth;if(!0!==t.visible||h.empty)q.remove();else{if("h"===t.orientation){var v=g;var w=d}else v=d,w=g;r(q,{pos:v,val:w},t,h);n(q,{x:d,y:g},t,h);p(q,{pos:v,val:w},t,h)}})},plotBoxAndWhiskers:r,plotPoints:n,plotBoxMean:p}},{"../../components/drawing":637,"../../lib":749,d3:169}],925:[function(b,D,G){D.exports=function(r,n){var p=r.cd,k=r.xaxis,a=r.yaxis,e=[],f,l;if(!1===n)for(f=0;f<p.length;f++)for(l=0;l<(p[f].pts||[]).length;l++)p[f].pts[l].selected=
0;else for(f=0;f<p.length;f++)for(l=0;l<(p[f].pts||[]).length;l++){var m=p[f].pts[l],c=k.c2p(m.x),d=a.c2p(m.y);n.contains([c,d],null,m.i,r)?(e.push({pointNumber:m.i,x:k.c2d(m.x),y:a.c2d(m.y)}),m.selected=1):m.selected=0}return e}},{}],926:[function(b,D,G){var r=b("d3"),n=b("../../components/color"),p=b("../../components/drawing");D.exports={style:function(k,a,e){a=e?e:r.select(k).selectAll("g.trace.boxes");a.style("opacity",function(f){return f[0].trace.opacity});a.each(function(f){function l(g,h,
q,t){g.style("stroke-width",h+"px").call(n.stroke,q).call(n.fill,t)}var m=r.select(this),c=f[0].trace;f=c.line.width;var d=m.selectAll("path.box");"candlestick"===c.type?d.each(function(g){if(!g.empty){var h=r.select(this),q=c[g.dir];l(h,q.line.width,q.line.color,q.fillcolor);h.style("opacity",c.selectedpoints&&!g.selected?.3:1)}}):(l(d,f,c.line.color,c.fillcolor),m.selectAll("path.mean").style({"stroke-width":f,"stroke-dasharray":2*f+"px,"+f+"px"}).call(n.stroke,c.line.color),m=m.selectAll("path.point"),
p.pointStyle(m,c,k))})},styleOnSelect:function(k,a,e){a=a[0].trace;e=e.selectAll("path.point");a.selectedpoints?p.selectedPointStyle(e,a):p.pointStyle(e,a,k)}}},{"../../components/color":615,"../../components/drawing":637,d3:169}],927:[function(b,D,G){function r(k){return{line:{color:n({},p.line.color,{dflt:k}),width:p.line.width,editType:"style"},fillcolor:p.fillcolor,editType:"style"}}var n=b("../../lib").extendFlat;G=b("../ohlc/attributes");var p=b("../box/attributes");D.exports={x:G.x,open:G.open,
high:G.high,low:G.low,close:G.close,line:{width:n({},p.line.width,{}),editType:"style"},increasing:r(G.increasing.line.color.dflt),decreasing:r(G.decreasing.line.color.dflt),text:G.text,hovertext:G.hovertext,whiskerwidth:n({},p.whiskerwidth,{dflt:0}),hoverlabel:G.hoverlabel}},{"../../lib":749,"../box/attributes":915,"../ohlc/attributes":1101}],928:[function(b,D,G){function r(a,e,f,l){return{min:f,q1:Math.min(a,l),med:l,q3:Math.max(a,l),max:e}}var n=b("../../lib"),p=b("../../plots/cartesian/axes"),
k=b("../ohlc/calc").calcCommon;D.exports=function(a,e){var f=a._fullLayout,l=p.getFromId(a,e.xaxis),m=p.getFromId(a,e.yaxis);l=l.makeCalcdata(e,"x");a=k(a,e,l,m,r);return a.length?(n.extendFlat(a[0].t,{num:f._numBoxes,dPos:n.distinctVals(l).minDiff/2,posLetter:"x",valLetter:"y"}),f._numBoxes++,a):[{t:{empty:!0}}]}},{"../../lib":749,"../../plots/cartesian/axes":797,"../ohlc/calc":1102}],929:[function(b,D,G){function r(e,f,l,m){e=l(m+".line.color");l(m+".line.width",f.line.width);l(m+".fillcolor",p.addOpacity(e,
.5))}var n=b("../../lib"),p=b("../../components/color"),k=b("../ohlc/ohlc_defaults"),a=b("./attributes");D.exports=function(e,f,l,m){function c(d,g){return n.coerce(e,f,a,d,g)}k(e,f,c,m)?(c("line.width"),r(e,f,c,"increasing"),r(e,f,c,"decreasing"),c("text"),c("hovertext"),c("whiskerwidth"),m._requestRangeslider[f.xaxis]=!0):f.visible=!1}},{"../../components/color":615,"../../lib":749,"../ohlc/ohlc_defaults":1106,"./attributes":927}],930:[function(b,D,G){D.exports={moduleType:"trace",name:"candlestick",
basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:b("./attributes"),layoutAttributes:b("../box/layout_attributes"),supplyLayoutDefaults:b("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:b("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("../box/plot").plot,layerName:"boxlayer",style:b("../box/style").style,hoverPoints:b("../ohlc/hover").hoverPoints,selectPoints:b("../ohlc/select")}},
{"../../plots/cartesian":810,"../box/cross_trace_calc":917,"../box/layout_attributes":922,"../box/layout_defaults":923,"../box/plot":924,"../box/style":926,"../ohlc/hover":1104,"../ohlc/select":1108,"./attributes":927,"./calc":928,"./defaults":929}],931:[function(b,D,G){function r(k,a,e,f){["aaxis","baxis"].forEach(function(l){var m=l.charAt(0),c=k[l]||{},d=p.newContainer(a,l);n(c,d,{tickfont:"x",id:m+"axis",letter:m,font:a.font,name:l,data:k[m],calendar:a.calendar,dfltColor:f,bgColor:e.paper_bgcolor,
fullLayout:e});d._categories=d._categories||[];k[l]||"-"===c.type||(k[l]={type:c.type})})}var n=b("./axis_defaults"),p=b("../../plot_api/plot_template");D.exports=function(k,a,e,f,l){f("a")||(f("da"),f("a0"));f("b")||(f("db"),f("b0"));r(k,a,e,l)}},{"../../plot_api/plot_template":787,"./axis_defaults":936}],932:[function(b,D,G){function r(p,k){if(!n(p)||10<=k)return null;for(var a=Infinity,e=-Infinity,f=p.length,l=0;l<f;l++){var m=p[l];if(n(m)){if(m=r(m,k+1))a=Math.min(m[0],a),e=Math.max(m[1],e)}else a=
Math.min(m,a),e=Math.max(m,e)}return[a,e]}var n=b("../../lib").isArrayOrTypedArray;D.exports=function(p){return r(p,0)}},{"../../lib":749}],933:[function(b,D,G){var r=b("../../plots/font_attributes");G=b("./axis_attributes");b=b("../../components/color/attributes");r=r({editType:"calc"});r.family.dflt='"Open Sans", verdana, arial, sans-serif';r.size.dflt=12;r.color.dflt=b.defaultLine;D.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",
editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:G,baxis:G,font:r,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":614,"../../plots/font_attributes":825,
"./axis_attributes":935}],934:[function(b,D,G){var r=b("../../lib").isArrayOrTypedArray;D.exports=function(n,p,k,a){var e=r(k)?"a":"b",f=("a"===e?n.aaxis:n.baxis).smoothing,l="a"===e?n.a2i:n.b2j,m="a"===e?k:a;a="a"===e?a:k;k="a"===e?p.a.length:p.b.length;var c="a"===e?p.b.length:p.a.length,d=Math.floor("a"===e?n.b2j(a):n.a2i(a));p="a"===e?function(H){return n.evalxy([],H,d)}:function(H){return n.evalxy([],d,H)};if(f){var g=Math.max(0,Math.min(c-2,d));var h=d-g;var q="a"===e?function(H,J){return n.dxydi([],
H,g,J,h)}:function(H,J){return n.dxydj([],g,H,h,J)}}e=l(m[0]);l=l(m[1]);m=e<l?1:-1;var t=1E-8*(l-e);var v=0<m?Math.ceil:Math.floor;a=0<m?Math.min:Math.max;c=0<m?Math.max:Math.min;var w=(0<m?Math.floor:Math.ceil)(e+t);v=v(l-t);t=p(e);for(var A=[[t]];w*m<v*m;w+=m){var z=[];var y=c(e,w);var B=a(l,w+m);var C=B-y;var u=Math.max(0,Math.min(k-2,Math.floor(.5*(y+B))));var F=p(B);f&&(y=q(u,y-u),u=q(u,B-u),z.push([t[0]+y[0]/3*C,t[1]+y[1]/3*C]),z.push([F[0]-u[0]/3*C,F[1]-u[1]/3*C]));z.push(F);A.push(z);t=F}return A}},
{"../../lib":749}],935:[function(b,D,G){G=b("../../plots/font_attributes");var r=b("../../components/color/attributes"),n=b("../../plots/cartesian/layout_attributes"),p=b("../../plot_api/edit_types").overrideAll;b("../../constants/docs");b("../../constants/docs");D.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:G({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},
editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",
values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:G({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",
dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:"none e E power SI B".split(" "),dflt:"B",editType:"calc"},separatethousands:{valType:"boolean",
dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:p(n.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",
dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:r.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:r.lightLine,editType:"calc"},startline:{valType:"boolean",
editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",
editType:"calc"},titlefont:G({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":614,"../../constants/docs":719,"../../plot_api/edit_types":780,"../../plots/cartesian/layout_attributes":811,"../../plots/font_attributes":825}],936:[function(b,D,G){function r(d,g){if("-"===d.type){var h=d._id.charAt(0);d.type=c(g,d[h+"calendar"])}}var n=b("./attributes"),p=b("../../components/color").addOpacity,k=b("../../registry"),a=b("../../lib"),
e=b("../../plots/cartesian/tick_value_defaults"),f=b("../../plots/cartesian/tick_label_defaults"),l=b("../../plots/cartesian/category_order_defaults"),m=b("../../plots/cartesian/set_convert"),c=b("../../plots/cartesian/axis_autotype");D.exports=function(d,g,h){function q(C,u){return a.coerce(d,g,A,C,u)}function t(C,u){return a.coerce2(d,g,A,C,u)}var v=h.letter,w=h.font||{},A=n[v+"axis"];h.name&&(g._name=h.name,g._id=h.name);var z=q("type");"-"===z&&(h.data&&r(g,h.data),"-"===g.type?g.type="linear":
z=d.type=g.type);q("smoothing");q("cheatertype");q("showticklabels");q("labelprefix",v+" \x3d ");q("labelsuffix");q("showtickprefix");q("showticksuffix");q("separatethousands");q("tickformat");q("exponentformat");q("showexponent");q("categoryorder");q("tickmode");q("tickvals");q("ticktext");q("tick0");q("dtick");"array"===g.tickmode&&(q("arraytick0"),q("arraydtick"));q("labelpadding");g._hovertitle=v;"date"===z&&k.getComponentMethod("calendars","handleDefaults")(d,g,"calendar",h.calendar);m(g,h.fullLayout);
g.c2p=a.identity;var y=q("color",h.dfltColor),B=y===d.color?y:w.color;q("title.text")&&(a.coerceFont(q,"title.font",{family:w.family,size:Math.round(1.2*w.size),color:B}),q("title.offset"));q("tickangle");q("autorange",!g.isValidRange(d.range))&&q("rangemode");q("range");g.cleanRange();q("fixedrange");e(d,g,q,z);f(d,g,q,z,h);l(d,g,q,{data:h.data,dataAttr:v});h=t("gridcolor",p(y,.3));v=t("gridwidth");w=q("showgrid");w||(delete g.gridcolor,delete g.gridwidth);z=t("startlinecolor",y);B=t("startlinewidth",
v);q("startline",g.showgrid||!!z||!!B)||(delete g.startlinecolor,delete g.startlinewidth);y=t("endlinecolor",y);z=t("endlinewidth",v);q("endline",g.showgrid||!!y||!!z)||(delete g.endlinecolor,delete g.endlinewidth);w?(q("minorgridcount"),q("minorgridwidth",v),q("minorgridcolor",p(h,.06)),g.minorgridcount||(delete g.minorgridwidth,delete g.minorgridcolor)):(delete g.gridcolor,delete g.gridWidth);"none"===g.showticklabels&&(delete g.tickfont,delete g.tickangle,delete g.showexponent,delete g.exponentformat,
delete g.tickformat,delete g.showticksuffix,delete g.showtickprefix);g.showticksuffix||delete g.ticksuffix;g.showtickprefix||delete g.tickprefix;q("tickmode");return g}},{"../../components/color":615,"../../lib":749,"../../plots/cartesian/axis_autotype":798,"../../plots/cartesian/category_order_defaults":801,"../../plots/cartesian/set_convert":817,"../../plots/cartesian/tick_label_defaults":818,"../../plots/cartesian/tick_value_defaults":820,"../../registry":880,"./attributes":933}],937:[function(b,
D,G){var r=b("../../plots/cartesian/axes"),n=b("../../lib").isArray1D,p=b("./cheater_basis"),k=b("./array_minmax"),a=b("./calc_gridlines"),e=b("./calc_labels"),f=b("./calc_clippath"),l=b("../heatmap/clean_2d_array"),m=b("./smooth_fill_2d_array"),c=b("../heatmap/convert_column_xyz"),d=b("./set_convert");D.exports=function(g,h){var q=r.getFromId(g,h.xaxis);g=r.getFromId(g,h.yaxis);var t=h.aaxis,v=h.baxis,w=h.x,A=h.y,z=[];w&&n(w)&&z.push("x");A&&n(A)&&z.push("y");z.length&&c(h,t,v,"a","b",z);z=h._a=
h._a||h.a;var y=h._b=h._b||h.b;w=h._x||h.x;A=h._y||h.y;var B={};h._cheater&&(w=p("index"===t.cheatertype?z.length:z,"index"===v.cheatertype?y.length:y,h.cheaterslope));h._x=w=l(w);h._y=A=l(A);m(w,z,y);m(A,z,y);d(h);h.setScale();var C=k(w),u=k(A),F=.5*(C[1]-C[0]);C=.5*(C[1]+C[0]);var H=.5*(u[1]-u[0]);u=.5*(u[1]+u[0]);C=[C-1.3*F,C+1.3*F];u=[u-1.3*H,u+1.3*H];h._extremes[q._id]=r.findExtremes(q,C,{padded:!0});h._extremes[g._id]=r.findExtremes(g,u,{padded:!0});a(h,"a","b");a(h,"b","a");e(h,t);e(h,v);B.clipsegments=
f(h._xctrl,h._yctrl,t,v);B.x=w;B.y=A;B.a=z;B.b=y;return[B]}},{"../../lib":749,"../../plots/cartesian/axes":797,"../heatmap/clean_2d_array":1036,"../heatmap/convert_column_xyz":1038,"./array_minmax":932,"./calc_clippath":938,"./calc_gridlines":939,"./calc_labels":940,"./cheater_basis":942,"./set_convert":955,"./smooth_fill_2d_array":956}],938:[function(b,D,G){D.exports=function(r,n,p,k){var a,e=[];p=!!p.smoothing;var f=!!k.smoothing,l=r[0].length-1,m=r.length-1;k=0;var c=[];for(a=[];k<=l;k++)c[k]=
r[0][k],a[k]=n[0][k];e.push({x:c,y:a,bicubic:p});k=0;c=[];for(a=[];k<=m;k++)c[k]=r[k][l],a[k]=n[k][l];e.push({x:c,y:a,bicubic:f});k=l;c=[];for(a=[];0<=k;k--)c[l-k]=r[m][k],a[l-k]=n[m][k];e.push({x:c,y:a,bicubic:p});k=m;c=[];for(a=[];0<=k;k--)c[m-k]=r[k][0],a[m-k]=n[k][0];e.push({x:c,y:a,bicubic:f});return e}},{}],939:[function(b,D,G){var r=b("../../plots/cartesian/axes"),n=b("../../lib/extend").extendFlat;D.exports=function(p,k,a){function e(E){var L,P=[],N=[],Q={};if("b"===k){var O=p.b2j(E);var T=
Math.floor(Math.max(0,Math.min(B-2,O)));var V=O-T;Q.length=B;Q.crossLength=y;Q.xy=function(ba){return p.evalxy([],ba,O)};Q.dxy=function(ba,ka){return p.dxydi([],ba,T,ka,V)};for(L=0;L<y;L++){var Z=Math.min(y-2,L);var aa=L-Z;var Y=p.evalxy([],L,O);if(t.smoothing&&0<L){var ea=p.dxydi([],L-1,T,0,V);P.push(ca[0]+ea[0]/3);N.push(ca[1]+ea[1]/3);var ca=p.dxydi([],L-1,T,1,V);P.push(Y[0]-ca[0]/3);N.push(Y[1]-ca[1]/3)}P.push(Y[0]);N.push(Y[1]);ca=Y}}else for(L=p.a2i(E),Z=Math.floor(Math.max(0,Math.min(y-2,L))),
aa=L-Z,Q.length=y,Q.crossLength=B,Q.xy=function(ba){return p.evalxy([],L,ba)},Q.dxy=function(ba,ka){return p.dxydj([],Z,ba,aa,ka)},O=0;O<B;O++)T=Math.min(B-2,O),V=O-T,Y=p.evalxy([],L,O),t.smoothing&&0<O&&(ea=p.dxydj([],Z,O-1,aa,0),P.push(ca[0]+ea[0]/3),N.push(ca[1]+ea[1]/3),ca=p.dxydj([],Z,O-1,aa,1),P.push(Y[0]-ca[0]/3),N.push(Y[1]-ca[1]/3)),P.push(Y[0]),N.push(Y[1]),ca=Y;Q.axisLetter=k;Q.axis=c;Q.crossAxis=t;Q.value=E;Q.constvar=a;Q.index=l;Q.x=P;Q.y=N;Q.smoothing=t.smoothing;return Q}function f(E){var L,
P=[],N=[],Q={};Q.length=m.length;Q.crossLength=q.length;if("b"===k){var O=Math.max(0,Math.min(B-2,E));var T=Math.min(1,Math.max(0,E-O));Q.xy=function(aa){return p.evalxy([],aa,E)};Q.dxy=function(aa,Y){return p.dxydi([],aa,O,Y,T)};for(L=0;L<A;L++)P[L]=v[E*C][L],N[L]=w[E*C][L]}else{var V=Math.max(0,Math.min(y-2,E));var Z=Math.min(1,Math.max(0,E-V));Q.xy=function(aa){return p.evalxy([],E,aa)};Q.dxy=function(aa,Y){return p.dxydj([],V,aa,Z,Y)};for(L=0;L<z;L++)P[L]=v[L][E*C],N[L]=w[L][E*C]}Q.axisLetter=
k;Q.axis=c;Q.crossAxis=t;Q.value=m[E];Q.constvar=a;Q.index=E;Q.x=P;Q.y=N;Q.smoothing=t.smoothing;return Q}var l,m=p["_"+k],c=p[k+"axis"];var d=c._gridlines=[];var g=c._minorgridlines=[],h=c._boundarylines=[],q=p["_"+a],t=p[a+"axis"];"array"===c.tickmode&&(c.tickvals=m.slice());var v=p._xctrl,w=p._yctrl,A=v[0].length,z=v.length,y=p._a.length,B=p._b.length;r.prepTicks(c);"array"===c.tickmode&&delete c.tickvals;var C=c.smoothing?3:1;if("array"===c.tickmode){var u=5E-15;u=[Math.floor((m.length-1-c.arraytick0)/
c.arraydtick*(1+u)),Math.ceil(-c.arraytick0/c.arraydtick/(1+u))].sort(function(E,L){return E-L});var F=u[0]-1;u=u[1]+1;for(l=F;l<u;l++){var H=c.arraytick0+c.arraydtick*l;0>H||H>m.length-1||d.push(n(f(H),{color:c.gridcolor,width:c.gridwidth}))}for(l=F;l<u;l++){F=c.arraytick0+c.arraydtick*l;var J=Math.min(F+c.arraydtick,m.length-1);if(!(0>F||F>m.length-1||0>J||J>m.length-1)){var I=m[F];var M=m[J];for(d=0;d<c.minorgridcount;d++)H=J-F,0>=H||(H=I+(M-I)*(d+1)/(c.minorgridcount+1)*(c.arraydtick/H),H<m[0]||
H>m[m.length-1]||g.push(n(e(H),{color:c.minorgridcolor,width:c.minorgridwidth})))}}c.startline&&h.push(n(f(0),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&h.push(n(f(m.length-1),{color:c.endlinecolor,width:c.endlinewidth}))}else{u=5E-15;u=[Math.floor((m[m.length-1]-c.tick0)/c.dtick*(1+u)),Math.ceil((m[0]-c.tick0)/c.dtick/(1+u))].sort(function(E,L){return E-L});F=u[0];u=u[1];for(l=F;l<=u;l++)J=c.tick0+c.dtick*l,d.push(n(e(J),{color:c.gridcolor,width:c.gridwidth}));for(l=F-1;l<u+1;l++)for(J=
c.tick0+c.dtick*l,d=0;d<c.minorgridcount;d++)H=J+c.dtick*(d+1)/(c.minorgridcount+1),H<m[0]||H>m[m.length-1]||g.push(n(e(H),{color:c.minorgridcolor,width:c.minorgridwidth}));c.startline&&h.push(n(e(m[0]),{color:c.startlinecolor,width:c.startlinewidth}));c.endline&&h.push(n(e(m[m.length-1]),{color:c.endlinecolor,width:c.endlinewidth}))}}},{"../../lib/extend":739,"../../plots/cartesian/axes":797}],940:[function(b,D,G){var r=b("../../plots/cartesian/axes"),n=b("../../lib/extend").extendFlat;D.exports=
function(p,k){var a=k._labels=[],e=k._gridlines;for(p=0;p<e.length;p++){var f=e[p];if(-1!==["start","both"].indexOf(k.showticklabels)){var l=r.tickText(k,f.value);n(l,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:f.xy(0),dxy:f.dxy(0,0),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:0===p,isLast:p===e.length-1});a.push(l)}-1!==["end","both"].indexOf(k.showticklabels)&&(l=r.tickText(k,f.value),n(l,{endAnchor:!1,xy:f.xy(f.crossLength-1),dxy:f.dxy(f.crossLength-2,1),axis:f.axis,length:f.crossAxis.length,
font:f.axis.tickfont,isFirst:0===p,isLast:p===e.length-1}),a.push(l))}}},{"../../lib/extend":739,"../../plots/cartesian/axes":797}],941:[function(b,D,G){D.exports=function(r,n,p,k){var a=r[0]-n[0],e=r[1]-n[1],f=p[0]-n[0],l=p[1]-n[1];p=Math.pow(a*a+e*e,.25);r=Math.pow(f*f+l*l,.25);a=(r*r*a-p*p*f)*k;k*=r*r*e-p*p*l;e=r*(p+r)*3;p=p*(p+r)*3;return[[n[0]+(e&&a/e),n[1]+(e&&k/e)],[n[0]-(p&&a/p),n[1]-(p&&k/p)]]}},{}],942:[function(b,D,G){var r=b("../../lib").isArrayOrTypedArray;D.exports=function(n,p,k){var a,
e,f=[],l=r(n)?n.length:n,m=r(p)?p.length:p,c=r(n)?n:null,d=r(p)?p:null;c&&(a=(c.length-1)/(c[c.length-1]-c[0])/(l-1));d&&(e=(d.length-1)/(d[d.length-1]-d[0])/(m-1));var g=Infinity,h=-Infinity;for(n=0;n<m;n++){f[n]=[];var q=d?(d[n]-d[0])*e:n/(m-1);for(p=0;p<l;p++){var t=c?(c[p]-c[0])*a:p/(l-1);t-=q*k;g=Math.min(t,g);h=Math.max(t,h);f[n][p]=t}}k=1/(h-g);a=-g*k;for(n=0;n<m;n++)for(p=0;p<l;p++)f[n][p]=k*f[n][p]+a;return f}},{"../../lib":749}],943:[function(b,D,G){function r(k,a,e){return[(2*(-.5*e[0]+
1.5*a[0])+k[0])/3,(2*(-.5*e[1]+1.5*a[1])+k[1])/3]}var n=b("./catmull_rom"),p=b("../../lib").ensureArray;D.exports=function(k,a,e,f,l,m){var c,d,g,h,q=e[0].length,t=e.length,v=l?3*q-2:q,w=m?3*t-2:t;k=p(k,w);a=p(a,w);for(g=0;g<w;g++)k[g]=p(k[g],v),a[g]=p(a[g],v);for(h=d=0;d<t;d++,h+=m?3:1){var A=k[h];var z=a[h];var y=e[d];var B=f[d];for(g=c=0;c<q;c++,g+=l?3:1)A[g]=y[c],z[g]=B[c]}if(l)for(h=d=0;d<t;d++,h+=m?3:1){c=1;for(g=3;c<q-1;c++,g+=3)A=n([e[d][c-1],f[d][c-1]],[e[d][c],f[d][c]],[e[d][c+1],f[d][c+
1]],l),k[h][g-1]=A[0][0],a[h][g-1]=A[0][1],k[h][g+1]=A[1][0],a[h][g+1]=A[1][1];c=r([k[h][0],a[h][0]],[k[h][2],a[h][2]],[k[h][3],a[h][3]]);k[h][1]=c[0];a[h][1]=c[1];c=r([k[h][v-1],a[h][v-1]],[k[h][v-3],a[h][v-3]],[k[h][v-4],a[h][v-4]]);k[h][v-2]=c[0];a[h][v-2]=c[1]}if(m)for(g=0;g<v;g++){for(h=3;h<w-3;h+=3)A=n([k[h-3][g],a[h-3][g]],[k[h][g],a[h][g]],[k[h+3][g],a[h+3][g]],m),k[h-1][g]=A[0][0],a[h-1][g]=A[0][1],k[h+1][g]=A[1][0],a[h+1][g]=A[1][1];c=r([k[0][g],a[0][g]],[k[2][g],a[2][g]],[k[3][g],a[3][g]]);
k[1][g]=c[0];a[1][g]=c[1];c=r([k[w-1][g],a[w-1][g]],[k[w-3][g],a[w-3][g]],[k[w-4][g],a[w-4][g]]);k[w-2][g]=c[0];a[w-2][g]=c[1]}if(l&&m)for(h=1;h<w;h+=0===(h+1)%3?2:1){for(g=3;g<v-3;g+=3)A=n([k[h][g-3],a[h][g-3]],[k[h][g],a[h][g]],[k[h][g+3],a[h][g+3]],l),k[h][g-1]=.5*(k[h][g-1]+A[0][0]),a[h][g-1]=.5*(a[h][g-1]+A[0][1]),k[h][g+1]=.5*(k[h][g+1]+A[1][0]),a[h][g+1]=.5*(a[h][g+1]+A[1][1]);c=r([k[h][0],a[h][0]],[k[h][2],a[h][2]],[k[h][3],a[h][3]]);k[h][1]=.5*(k[h][1]+c[0]);a[h][1]=.5*(a[h][1]+c[1]);c=r([k[h][v-
1],a[h][v-1]],[k[h][v-3],a[h][v-3]],[k[h][v-4],a[h][v-4]]);k[h][v-2]=.5*(k[h][v-2]+c[0]);a[h][v-2]=.5*(a[h][v-2]+c[1])}return[k,a]}},{"../../lib":749,"./catmull_rom":941}],944:[function(b,D,G){D.exports={RELATIVE_CULL_TOLERANCE:1E-6}},{}],945:[function(b,D,G){D.exports=function(r,n,p){return n&&p?function(k,a,e,f,l){k||(k=[]);var m;a*=3;e*=3;var c=f*f;var d=1-f,g=d*d;d=d*f*2;f=-3*g;g=3*(g-d);d=3*(d-c);var h=3*c,q=l*l,t=q*l,v=1-l,w=v*v,A=w*v;for(m=0;m<r.length;m++){var z=r[m];c=f*z[e][a]+g*z[e][a+
1]+d*z[e][a+2]+h*z[e][a+3];var y=f*z[e+1][a]+g*z[e+1][a+1]+d*z[e+1][a+2]+h*z[e+1][a+3];var B=f*z[e+2][a]+g*z[e+2][a+1]+d*z[e+2][a+2]+h*z[e+2][a+3];z=f*z[e+3][a]+g*z[e+3][a+1]+d*z[e+3][a+2]+h*z[e+3][a+3];k[m]=A*c+3*(w*l*y+v*q*B)+t*z}return k}:n?function(k,a,e,f,l){k||(k=[]);var m;a*=3;var c=f*f;var d=1-f,g=d*d;d=d*f*2;f=-3*g;g=3*(g-d);d=3*(d-c);var h=3*c,q=1-l;for(m=0;m<r.length;m++){var t=r[m];c=f*t[e][a]+g*t[e][a+1]+d*t[e][a+2]+h*t[e][a+3];t=f*t[e+1][a]+g*t[e+1][a+1]+d*t[e+1][a+2]+h*t[e+1][a+3];
k[m]=q*c+l*t}return k}:p?function(k,a,e,f,l){k||(k=[]);var m;e*=3;var c=l*l,d=c*l,g=1-l,h=g*g,q=h*g;for(m=0;m<r.length;m++){var t=r[m];f=t[e][a+1]-t[e][a];var v=t[e+1][a+1]-t[e+1][a];var w=t[e+2][a+1]-t[e+2][a];t=t[e+3][a+1]-t[e+3][a];k[m]=q*f+3*(h*l*v+g*c*w)+d*t}return k}:function(k,a,e,f,l){k||(k=[]);var m,c=1-l;for(m=0;m<r.length;m++){var d=r[m];f=d[e][a+1]-d[e][a];d=d[e+1][a+1]-d[e+1][a];k[m]=c*f+l*d}return k}}},{}],946:[function(b,D,G){D.exports=function(r,n,p){return n&&p?function(k,a,e,f,l){k||
(k=[]);var m;a*=3;e*=3;var c=f*f,d=c*f,g=1-f,h=g*g,q=h*g;var t=l*l;var v=1-l,w=v*v;v=v*l*2;l=-3*w;w=3*(w-v);v=3*(v-t);var A=3*t;for(m=0;m<r.length;m++){var z=r[m];t=l*z[e][a]+w*z[e+1][a]+v*z[e+2][a]+A*z[e+3][a];var y=l*z[e][a+1]+w*z[e+1][a+1]+v*z[e+2][a+1]+A*z[e+3][a+1];var B=l*z[e][a+2]+w*z[e+1][a+2]+v*z[e+2][a+2]+A*z[e+3][a+2];z=l*z[e][a+3]+w*z[e+1][a+3]+v*z[e+2][a+3]+A*z[e+3][a+3];k[m]=q*t+3*(h*f*y+g*c*B)+d*z}return k}:n?function(k,a,e,f,l){k||(k=[]);var m;a*=3;var c=l*l,d=c*l,g=1-l,h=g*g,q=h*
g;for(m=0;m<r.length;m++){var t=r[m];f=t[e+1][a]-t[e][a];var v=t[e+1][a+1]-t[e][a+1];var w=t[e+1][a+2]-t[e][a+2];t=t[e+1][a+3]-t[e][a+3];k[m]=q*f+3*(h*l*v+g*c*w)+d*t}return k}:p?function(k,a,e,f,l){k||(k=[]);var m;e*=3;var c=1-f;var d=l*l;var g=1-l,h=g*g;g=g*l*2;l=-3*h;h=3*(h-g);g=3*(g-d);var q=3*d;for(m=0;m<r.length;m++){var t=r[m];d=l*t[e][a]+h*t[e+1][a]+g*t[e+2][a]+q*t[e+3][a];t=l*t[e][a+1]+h*t[e+1][a+1]+g*t[e+2][a+1]+q*t[e+3][a+1];k[m]=c*d+f*t}return k}:function(k,a,e,f,l){k||(k=[]);var m,c=1-
f;for(m=0;m<r.length;m++){var d=r[m];l=d[e+1][a]-d[e][a];d=d[e+1][a+1]-d[e][a+1];k[m]=c*l+f*d}return k}}},{}],947:[function(b,D,G){D.exports=function(r,n,p,k,a){var e=n-2,f=p-2;return k&&a?function(l,m,c){l||(l=[]);var d,g=Math.max(0,Math.min(Math.floor(m),e)),h=Math.max(0,Math.min(Math.floor(c),f));m=Math.max(0,Math.min(1,m-g));var q=Math.max(0,Math.min(1,c-h));g*=3;h*=3;var t=m*m,v=t*m,w=1-m,A=w*w,z=A*w,y=q*q,B=y*q,C=1-q,u=C*C,F=u*C;for(d=0;d<r.length;d++){var H=r[d];c=z*H[h][g]+3*(A*m*H[h][g+1]+
w*t*H[h][g+2])+v*H[h][g+3];var J=z*H[h+1][g]+3*(A*m*H[h+1][g+1]+w*t*H[h+1][g+2])+v*H[h+1][g+3];var I=z*H[h+2][g]+3*(A*m*H[h+2][g+1]+w*t*H[h+2][g+2])+v*H[h+2][g+3];H=z*H[h+3][g]+3*(A*m*H[h+3][g+1]+w*t*H[h+3][g+2])+v*H[h+3][g+3];l[d]=F*c+3*(u*q*J+C*y*I)+B*H}return l}:k?function(l,m,c){l||(l=[]);var d=Math.max(0,Math.min(Math.floor(m),e)),g=Math.max(0,Math.min(Math.floor(c),f));m=Math.max(0,Math.min(1,m-d));c=Math.max(0,Math.min(1,c-g));var h;d*=3;var q=m*m,t=q*m,v=1-m,w=v*v,A=w*v,z=1-c;for(h=0;h<r.length;h++){var y=
r[h];var B=z*y[g][d]+c*y[g+1][d];var C=z*y[g][d+1]+c*y[g+1][d+1];var u=z*y[g][d+2]+c*y[g+1][d+1];y=z*y[g][d+3]+c*y[g+1][d+1];l[h]=A*B+3*(w*m*C+v*q*u)+t*y}return l}:a?function(l,m,c){l||(l=[]);var d=Math.max(0,Math.min(Math.floor(m),e)),g=Math.max(0,Math.min(Math.floor(c),f));m=Math.max(0,Math.min(1,m-d));c=Math.max(0,Math.min(1,c-g));var h;g*=3;var q=c*c,t=q*c,v=1-c,w=v*v,A=w*v,z=1-m;for(h=0;h<r.length;h++){var y=r[h];var B=z*y[g][d]+m*y[g][d+1];var C=z*y[g+1][d]+m*y[g+1][d+1];var u=z*y[g+2][d]+m*
y[g+2][d+1];y=z*y[g+3][d]+m*y[g+3][d+1];l[h]=A*B+3*(w*c*C+v*q*u)+t*y}return l}:function(l,m,c){l||(l=[]);var d=Math.max(0,Math.min(Math.floor(m),e)),g=Math.max(0,Math.min(Math.floor(c),f));m=Math.max(0,Math.min(1,m-d));c=Math.max(0,Math.min(1,c-g));var h,q=1-c,t=1-m;for(h=0;h<r.length;h++){var v=r[h];var w=t*v[g][d]+m*v[g][d+1];v=t*v[g+1][d]+m*v[g+1][d+1];l[h]=q*w+c*v}return l}}},{}],948:[function(b,D,G){var r=b("../../lib"),n=b("./xy_defaults"),p=b("./ab_defaults"),k=b("./attributes"),a=b("../../components/color/attributes");
D.exports=function(e,f,l,m){function c(d,g){return r.coerce(e,f,k,d,g)}f._clipPathId="clip"+f.uid+"carpet";l=c("color",a.defaultLine);r.coerceFont(c,"font");c("carpet");p(e,f,m,c,l);f.a&&f.b?(3>f.a.length&&(f.aaxis.smoothing=0),3>f.b.length&&(f.baxis.smoothing=0),n(e,f,c)||(f.visible=!1),f._cheater&&c("cheaterslope")):f.visible=!1}},{"../../components/color/attributes":614,"../../lib":749,"./ab_defaults":931,"./attributes":933,"./xy_defaults":957}],949:[function(b,D,G){D.exports={attributes:b("./attributes"),
supplyDefaults:b("./defaults"),plot:b("./plot"),calc:b("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet carpetAxis notLegendIsolatable noMultiCategory noHover noSortingByValue".split(" "),meta:{}}},{"../../plots/cartesian":810,"./attributes":933,"./calc":937,"./defaults":948,"./plot":954}],950:[function(b,D,G){D.exports=function(r,n){for(var p=r._fullData.length,k,a=0;a<p;a++){var e=r._fullData[a];if(e.index!==
n.index&&"carpet"===e.type&&(k||(k=e),e.carpet===n.carpet))return e}return k}},{}],951:[function(b,D,G){D.exports=function(r,n,p){if(0===r.length)return"";var k,a=[],e=p?3:1;for(k=0;k<r.length;k+=e)a.push(r[k]+","+n[k]),p&&k<r.length-e&&(a.push("C"),a.push([r[k+1]+","+n[k+1],r[k+2]+","+n[k+2]+" "].join(" ")));return a.join(p?"":"L")}},{}],952:[function(b,D,G){var r=b("../../lib").isArrayOrTypedArray;D.exports=function(n,p,k){var a;r(n)?n.length>p.length&&(n=n.slice(0,p.length)):n=[];for(a=0;a<p.length;a++)n[a]=
k(p[a]);return n}},{"../../lib":749}],953:[function(b,D,G){D.exports=function(r,n,p,k,a,e){var f=a[0]*r.dpdx(n),l=a[1]*r.dpdy(p),m=1,c=1;e&&(c=Math.max(0,(a[0]*e[0]+a[1]*e[1])/Math.sqrt(a[0]*a[0]+a[1]*a[1])/Math.sqrt(e[0]*e[0]+e[1]*e[1])));a=180*Math.atan2(l,f)/Math.PI;-90>a?(a+=180,m=-m):90<a&&(a-=180,m=-m);return{angle:a,flip:m,p:r.c2p(k,n,p),offsetMultplier:c}}},{}],954:[function(b,D,G){function r(h,q,t,v,w,A){v="const-"+w+"-lines";t=t.selectAll("."+v).data(A);t.enter().append("path").classed(v,
!0).style("vector-effect","non-scaling-stroke");t.each(function(z){var y=z.y,B=e([],z.x,h.c2p);y=e([],y,q.c2p);B="M"+f(B,y,z.smoothing);k.select(this).attr("d",B).style("stroke-width",z.width).style("stroke",z.color).style("fill","none")});t.exit().remove()}function n(h,q,t,v,w,A,z,y){w=A.selectAll("text."+y).data(z);w.enter().append("text").classed(y,!0);var B=0,C={};w.each(function(u,F){if("auto"===u.axis.tickangle)var H=l(v,q,t,u.xy,u.dxy);else H=(u.axis.tickangle+180)*Math.PI/180,H=l(v,q,t,u.xy,
[Math.cos(H),Math.sin(H)]);F||(C={angle:H.angle,flip:H.flip});F=(u.endAnchor?-1:1)*H.flip;var J=k.select(this).attr({"text-anchor":0<F?"start":"end","data-notex":1}).call(a.font,u.font).text(u.text).call(m.convertToTspans,h),I=a.bBox(this);J.attr("transform","translate("+H.p[0]+","+H.p[1]+") rotate("+H.angle+")translate("+u.axis.labelpadding*F+","+.3*I.height+")");B=Math.max(B,I.width+u.axis.labelpadding)});w.exit().remove();C.maxExtent=B;return C}function p(h,q,t,v,w,A,z,y,B,C,u){v=[];z.title.text&&
v.push(z.title.text);q=q.selectAll("text."+u).data(v);var F=C.maxExtent;q.enter().append("text").classed(u,!0);q.each(function(){var H=l(t,y,B,w,A);-1===["start","both"].indexOf(z.showticklabels)&&(F=0);var J=z.title.font.size;F+=J+z.title.offset;var I=(C.angle+(0>C.flip?180:0)-H.angle+450)%360;I=90<I&&270>I;var M=k.select(this);M.text(z.title.text).call(m.convertToTspans,h);I&&(F=(-m.lineCount(M)+g)*d*J-F);M.attr("transform","translate("+H.p[0]+","+H.p[1]+") rotate("+H.angle+") translate(0,"+F+")").classed("user-select-none",
!0).attr("text-anchor","middle").call(a.font,z.title.font)});q.exit().remove()}var k=b("d3"),a=b("../../components/drawing"),e=b("./map_1d_array"),f=b("./makepath"),l=b("./orient_text"),m=b("../../lib/svg_text_utils"),c=b("../../lib");b=b("../../constants/alignment");D.exports=function(h,q,t,v){var w=q.xaxis,A=q.yaxis,z=h._fullLayout._clips;c.makeTraceGroups(v,t,"trace").each(function(y){var B=k.select(this),C=y[0];y=C.trace;var u=y.aaxis,F=y.baxis,H=c.ensureSingle(B,"g","minorlayer"),J=c.ensureSingle(B,
"g","majorlayer"),I=c.ensureSingle(B,"g","boundarylayer"),M=c.ensureSingle(B,"g","labellayer");B.style("opacity",y.opacity);r(w,A,J,u,"a",u._gridlines,!0);r(w,A,J,F,"b",F._gridlines,!0);r(w,A,H,u,"a",u._minorgridlines,!0);r(w,A,H,F,"b",F._minorgridlines,!0);r(w,A,I,u,"a-boundary",u._boundarylines);r(w,A,I,F,"b-boundary",F._boundarylines);B=n(h,w,A,y,C,M,u._labels,"a-label");F=n(h,w,A,y,C,M,F._labels,"b-label");u=c.aggNums(Math.min,null,y.a);I=c.aggNums(Math.max,null,y.a);H=c.aggNums(Math.min,null,
y.b);J=c.aggNums(Math.max,null,y.b);I=.5*(u+I);var E=H;var L=y.ab2xy(I,E,!0);var P=y.dxyda_rough(I,E);void 0===B.angle&&c.extendFlat(B,l(y,w,A,L,y.dxydb_rough(I,E)));p(h,M,y,C,L,P,y.aaxis,w,A,B,"a-title");I=u;E=.5*(H+J);L=y.ab2xy(I,E,!0);P=y.dxydb_rough(I,E);void 0===F.angle&&c.extendFlat(F,l(y,w,A,L,y.dxyda_rough(I,E)));p(h,M,y,C,L,P,y.baxis,w,A,F,"b-title");M=z.select("#"+y._clipPathId);M.size()||(M=z.append("clipPath").classed("carpetclip",!0));B=c.ensureSingle(M,"path","carpetboundary");J=C.clipsegments;
I=[];for(H=0;H<J.length;H++)C=J[H],F=e([],C.x,w.c2p),u=e([],C.y,A.c2p),I.push(f(F,u,C.bicubic));C="M"+I.join("L")+"Z";M.attr("id",y._clipPathId);B.attr("d",C)})};var d=b.LINE_SPACING,g=(1-b.MID_SHIFT)/d+1},{"../../components/drawing":637,"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"./makepath":951,"./map_1d_array":952,"./orient_text":953,d3:169}],955:[function(b,D,G){var r=b("./constants"),n=b("../../lib/search").findBin,p=b("./compute_control_points"),k=b("./create_spline_evaluator"),
a=b("./create_i_derivative_evaluator"),e=b("./create_j_derivative_evaluator");D.exports=function(f){var l=f._a,m=f._b,c=l.length,d=m.length,g=f.aaxis,h=f.baxis,q=l[0],t=l[c-1],v=m[0],w=m[d-1],A=l[l.length-1]-l[0],z=m[m.length-1]-m[0],y=A*r.RELATIVE_CULL_TOLERANCE,B=z*r.RELATIVE_CULL_TOLERANCE;q-=y;t+=y;v-=B;w+=B;f.isVisible=function(C,u){return C>q&&C<t&&u>v&&u<w};f.isOccluded=function(C,u){return C<q||C>t||u<v||u>w};f.setScale=function(){var C=p(f._xctrl,f._yctrl,f._x,f._y,g.smoothing,h.smoothing);
f._xctrl=C[0];f._yctrl=C[1];f.evalxy=k([f._xctrl,f._yctrl],c,d,g.smoothing,h.smoothing);f.dxydi=a([f._xctrl,f._yctrl],g.smoothing,h.smoothing);f.dxydj=e([f._xctrl,f._yctrl],g.smoothing,h.smoothing)};f.i2a=function(C){var u=Math.max(0,Math.floor(C[0]),c-2);C=C[0]-u;return(1-C)*l[u]+C*l[u+1]};f.j2b=function(C){var u=Math.max(0,Math.floor(C[1]),c-2);C=C[1]-u;return(1-C)*m[u]+C*m[u+1]};f.ij2ab=function(C){return[f.i2a(C[0]),f.j2b(C[1])]};f.a2i=function(C){var u=Math.max(0,Math.min(n(C,l),c-2)),F=l[u];
return Math.max(0,Math.min(c-1,u+(C-F)/(l[u+1]-F)))};f.b2j=function(C){var u=Math.max(0,Math.min(n(C,m),d-2)),F=m[u];return Math.max(0,Math.min(d-1,u+(C-F)/(m[u+1]-F)))};f.ab2ij=function(C){return[f.a2i(C[0]),f.b2j(C[1])]};f.i2c=function(C,u){return f.evalxy([],C,u)};f.ab2xy=function(C,u,F){if(!F&&(C<l[0]||C>l[c-1]|u<m[0]||u>m[d-1]))return[!1,!1];var H=f.a2i(C),J=f.b2j(u),I=f.evalxy([],H,J);if(F){var M=F=0,E=[],L;C<l[0]?(H=L=0,F=(C-l[0])/(l[1]-l[0])):C>l[c-1]?(L=c-2,H=1,F=(C-l[c-1])/(l[c-1]-l[c-2])):
(L=Math.max(0,Math.min(c-2,Math.floor(H))),H-=L);u<m[0]?(J=C=0,M=(u-m[0])/(m[1]-m[0])):u>m[d-1]?(C=d-2,J=1,M=(u-m[d-1])/(m[d-1]-m[d-2])):(C=Math.max(0,Math.min(d-2,Math.floor(J))),J-=C);F&&(f.dxydi(E,L,C,H,J),I[0]+=E[0]*F,I[1]+=E[1]*F);M&&(f.dxydj(E,L,C,H,J),I[0]+=E[0]*M,I[1]+=E[1]*M)}return I};f.c2p=function(C,u,F){return[u.c2p(C[0]),F.c2p(C[1])]};f.p2x=function(C,u,F){return[u.p2c(C[0]),F.p2c(C[1])]};f.dadi=function(C){C=Math.max(0,Math.min(l.length-2,C));return l[C+1]-l[C]};f.dbdj=function(C){C=
Math.max(0,Math.min(m.length-2,C));return m[C+1]-m[C]};f.dxyda=function(C,u,F,H){u=f.dxydi(null,C,u,F,H);C=f.dadi(C,F);return[u[0]/C,u[1]/C]};f.dxydb=function(C,u,F,H){C=f.dxydj(null,C,u,F,H);u=f.dbdj(u,H);return[C[0]/u,C[1]/u]};f.dxyda_rough=function(C,u,F){F=A*(F||.1);var H=f.ab2xy(C+F,u,!0);C=f.ab2xy(C-F,u,!0);return[.5*(H[0]-C[0])/F,.5*(H[1]-C[1])/F]};f.dxydb_rough=function(C,u,F){F=z*(F||.1);var H=f.ab2xy(C,u+F,!0);C=f.ab2xy(C,u-F,!0);return[.5*(H[0]-C[0])/F,.5*(H[1]-C[1])/F]};f.dpdx=function(C){return C._m};
f.dpdy=function(C){return C._m}}},{"../../lib/search":768,"./compute_control_points":943,"./constants":944,"./create_i_derivative_evaluator":945,"./create_j_derivative_evaluator":946,"./create_spline_evaluator":947}],956:[function(b,D,G){var r=b("../../lib");D.exports=function(n,p,k){var a,e,f=[],l=[],m=n[0].length,c=n.length,d=0;for(a=0;a<m;a++)for(e=0;e<c;e++){if(void 0===n[e][a]){f.push(a);l.push(e);var g=n[e];var h=a,q=void 0,t=0,v=0;0<a&&void 0!==(q=n[e][a-1])&&(v++,t+=q);a<m-1&&void 0!==(q=
n[e][a+1])&&(v++,t+=q);0<e&&void 0!==(q=n[e-1][a])&&(v++,t+=q);e<c-1&&void 0!==(q=n[e+1][a])&&(v++,t+=q);g[h]=t/Math.max(1,v)}d=Math.max(d,Math.abs(n[e][a]))}if(!f.length)return n;q=0;t=f.length;do{for(g=h=0;g<t;g++){a=f[g];e=l[g];var w=v=0;if(0===a){var A=Math.min(m-1,2);var z=p[A];var y=p[1];A=n[e][A];var B=n[e][1];w+=B+(B-A)*(p[0]-y)/(y-z);v++}else a===m-1&&(A=Math.max(0,m-3),z=p[A],y=p[m-2],A=n[e][A],B=n[e][m-2],w+=B+(B-A)*(p[m-1]-y)/(y-z),v++);(0===a||a===m-1)&&0<e&&e<c-1&&(z=k[e+1]-k[e],y=k[e]-
k[e-1],w+=(y*n[e+1][a]+z*n[e-1][a])/(y+z),v++);0===e?(A=Math.min(c-1,2),z=k[A],y=k[1],A=n[A][a],B=n[1][a],w+=B+(B-A)*(k[0]-y)/(y-z),v++):e===c-1&&(A=Math.max(0,c-3),z=k[A],y=k[c-2],A=n[A][a],B=n[c-2][a],w+=B+(B-A)*(k[c-1]-y)/(y-z),v++);(0===e||e===c-1)&&0<a&&a<m-1&&(z=p[a+1]-p[a],y=p[a]-p[a-1],w+=(y*n[e][a+1]+z*n[e][a-1])/(y+z),v++);if(v)w/=v;else{w=p[a+1]-p[a];z=p[a]-p[a-1];y=k[e+1]-k[e];A=k[e]-k[e-1];B=w*z*(w+z);var C=y*A*(y+A);w=(B*(A*n[e+1][a]+y*n[e-1][a])+C*(z*n[e][a+1]+w*n[e][a-1]))/(C*(z+w)+
B*(A+y))}w-=n[e][a];z=w/d;h+=z*z;v=v?0:.85;n[e][a]+=w*(1+v)}h=Math.sqrt(h)}while(100>q++&&1E-5<h);r.log("Smoother converged to",h,"after",q,"iterations");return n}},{"../../lib":749}],957:[function(b,D,G){var r=b("../../lib").isArray1D;D.exports=function(n,p,k){var a=(n=k("x"))&&n.length,e=(k=k("y"))&&k.length;if(!a&&!e)return!1;p._cheater=!n;a&&!r(n)||e&&!r(k)?p._length=null:(n=a?n.length:Infinity,e&&(n=Math.min(n,k.length)),p.a&&p.a.length&&(n=Math.min(n,p.a.length)),p.b&&p.b.length&&(n=Math.min(n,
p.b.length)),p._length=n);return!0}},{"../../lib":749}],958:[function(b,D,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var r=b("../scattergeo/attributes"),n=b("../../components/colorscale/attributes"),p=b("../../plots/attributes"),k=b("../../components/color/attributes").defaultLine;b=b("../../lib/extend").extendFlat;var a=r.marker.line;D.exports=b({locations:{valType:"data_array",editType:"calc"},locationmode:r.locationmode,z:{valType:"data_array",editType:"calc"},geojson:b({},r.geojson,
{}),featureidkey:r.featureidkey,text:b({},r.text,{}),hovertext:b({},r.hovertext,{}),marker:{line:{color:b({},a.color,{dflt:k}),width:b({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:r.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:r.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:b({},p.hoverinfo,{editType:"calc",flags:["location",
"z","text","name"]}),hovertemplate:G(),showlegend:b({},p.showlegend,{dflt:!1})},n("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":614,"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scattergeo/attributes":1196}],959:[function(b,D,G){function r(f){return f&&"string"===typeof f}var n=b("fast-isnumeric"),p=b("../../constants/numerical").BADNUM,k=b("../../components/colorscale/calc"),
a=b("../scatter/arrays_to_calcdata"),e=b("../scatter/calc_selection");D.exports=function(f,l){var m=l._length,c=Array(m);var d=l.geojson?function(v){return r(v)||n(v)}:r;for(var g=0;g<m;g++){var h=c[g]={},q=l.locations[g],t=l.z[g];d(q)&&n(t)?(h.loc=q,h.z=t):(h.loc=null,h.z=p);h.index=g}a(c,l);k(f,l,{vals:l.z,containerStr:"",cLetter:"z"});e(c,l);return c}},{"../../components/colorscale/calc":623,"../../constants/numerical":724,"../scatter/arrays_to_calcdata":1154,"../scatter/calc_selection":1157,"fast-isnumeric":241}],
960:[function(b,D,G){var r=b("../../lib"),n=b("../../components/colorscale/defaults"),p=b("./attributes");D.exports=function(k,a,e,f){function l(d,g){return r.coerce(k,a,p,d,g)}e=l("locations");var m=l("z");if(e&&e.length&&r.isArrayOrTypedArray(m)&&m.length){a._length=Math.min(e.length,m.length);e=l("geojson");if("string"===typeof e&&""!==e||r.isPlainObject(e))var c="geojson-id";"geojson-id"===l("locationmode",c)&&l("featureidkey");l("text");l("hovertext");l("hovertemplate");l("marker.line.width")&&
l("marker.line.color");l("marker.opacity");n(k,a,f,l,{prefix:"",cLetter:"z"});r.coerceSelectionMarkerOpacity(a,l)}else a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":958}],961:[function(b,D,G){D.exports=function(r,n,p,k,a){r.location=n.location;r.z=n.z;n=k[a];n.fIn&&n.fIn.properties&&(r.properties=n.fIn.properties);r.ct=n.ct;return r}},{}],962:[function(b,D,G){var r=b("../../plots/cartesian/axes"),n=b("./attributes"),p=b("../../lib").fillText;D.exports=function(k,
a,e){var f=k.cd,l=f[0].trace,m=k.subplot,c,d;for(c=0;c<f.length;c++){var g=f[c];var h=!1;if(g._polygons){for(d=0;d<g._polygons.length;d++)g._polygons[d].contains([a,e])&&(h=!h),g._polygons[d].contains([a+360,e])&&(h=!h);if(h)break}}if(h&&g)return k.x0=k.x1=k.xa.c2p(g.ct),k.y0=k.y1=k.ya.c2p(g.ct),k.index=g.index,k.location=g.loc,k.z=g.z,k.zLabel=r.tickText(m.mockAxis,m.mockAxis.c2l(g.z),"hover").text,k.hovertemplate=g.hovertemplate,a=g,l.hovertemplate||(f=a.hi||l.hoverinfo,e=String(a.loc),c="all"===
f?n.hoverinfo.flags:f.split("+"),f=-1!==c.indexOf("name"),m=-1!==c.indexOf("location"),g=-1!==c.indexOf("z"),c=-1!==c.indexOf("text"),d=[],!f&&m?k.nameOverride=e:(f&&(k.nameOverride=l.name),m&&d.push(e)),g&&d.push(k.zLabel),c&&p(a,l,d),k.extraText=d.join("\x3cbr\x3e")),[k]}},{"../../lib":749,"../../plots/cartesian/axes":797,"./attributes":958}],963:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,
plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"choropleth",basePlotModule:b("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":829,"../heatmap/colorbar":1037,"./attributes":958,"./calc":959,"./defaults":960,"./event_data":961,"./hover":962,"./plot":964,"./select":965,"./style":966}],964:[function(b,D,G){var r=b("d3"),
n=b("../../lib"),p=b("../../lib/geo_location_utils"),k=b("../../lib/topojson_utils").getTopojsonFeatures,a=b("../../plots/cartesian/autorange").findExtremes,e=b("./style").style;D.exports={calcGeoJSON:function(f,l){var m=f[0].trace;l=l[m.geo];var c=l._subplot,d=m.locationmode,g=m._length,h="geojson-id"===d?p.extractTraceFeature(f):k(m,c.topojson);c=[];for(var q=[],t=0;t<g;t++){var v=f[t],w="geojson-id"===d?v.fOut:p.locationToFeature(d,v.loc,h);w?(v.geojson=w,v.ct=w.properties.ct,v._polygons=p.feature2polygons(w),
v=p.computeBbox(w),c.push(v[0],v[2]),q.push(v[1],v[3])):v.geojson=null}"geojson"===l.fitbounds&&"geojson-id"===d&&(f=p.computeBbox(p.getTraceGeojson(m)),c=[f[0],f[2]],q=[f[1],f[3]]);f={padded:!0};m._extremes.lon=a(l.lonaxis._ax,c,f);m._extremes.lat=a(l.lataxis._ax,q,f)},plot:function(f,l,m){l=l.layers.backplot.select(".choroplethlayer");n.makeTraceGroups(l,m,"trace choropleth").each(function(c){var d=r.select(this).selectAll("path.choroplethlocation").data(n.identity);d.enter().append("path").classed("choroplethlocation",
!0);d.exit().remove();e(f,c)})}}},{"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/topojson_utils":776,"../../plots/cartesian/autorange":796,"./style":966,d3:169}],965:[function(b,D,G){D.exports=function(r,n){var p=r.cd,k=r.xaxis,a=r.yaxis,e=[],f,l;if(!1===n)for(f=0;f<p.length;f++)p[f].selected=0;else for(f=0;f<p.length;f++){var m=p[f];if(l=m.ct){var c=k.c2p(l);var d=a.c2p(l);n.contains([c,d],null,f,r)?(e.push({pointNumber:f,lon:l[0],lat:l[1]}),m.selected=1):m.selected=0}}return e}},
{}],966:[function(b,D,G){function r(e,f){var l=f[0].trace;f=f[0].node3.selectAll(".choroplethlocation");var m=l.marker||{},c=m.line||{},d=a.makeColorScaleFuncFromTrace(l);f.each(function(g){n.select(this).attr("fill",d(g.z)).call(p.stroke,g.mlc||c.color).call(k.dashLine,"",g.mlw||c.width||0).style("opacity",m.opacity)});k.selectedPointStyle(f,l,e)}var n=b("d3"),p=b("../../components/color"),k=b("../../components/drawing"),a=b("../../components/colorscale");D.exports={style:function(e,f){f&&r(e,f)},
styleOnSelect:function(e,f){var l=f[0].node3,m=f[0].trace;m.selectedpoints?k.selectedPointStyle(l.selectAll(".choroplethlocation"),m,e):r(e,f)}}},{"../../components/color":615,"../../components/colorscale":627,"../../components/drawing":637,d3:169}],967:[function(b,D,G){G=b("../choropleth/attributes");var r=b("../../components/colorscale/attributes"),n=b("../../plots/template_attributes").hovertemplateAttrs,p=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;D.exports=b({locations:{valType:"data_array",
editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:b({},G.featureidkey,{}),below:{valType:"string",editType:"plot"},text:G.text,hovertext:G.hovertext,marker:{line:{color:b({},G.marker.line.color,{editType:"plot"}),width:b({},G.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:b({},G.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:b({},G.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},
unselected:{marker:{opacity:b({},G.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:G.hoverinfo,hovertemplate:n({},{keys:["properties"]}),showlegend:b({},p.showlegend,{dflt:!1})},r("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../choropleth/attributes":958}],968:[function(b,D,G){function r(l){var m=l[0].trace,c=m._opts;if(m.selectedpoints){m=
a.makeSelectedPointStyleFns(m);for(var d=0;d<l.length;d++){var g=l[d];g.fOut&&(g.fOut.properties.mo2=m.selectedOpacityFn(g))}l={type:"identity",property:"mo2"}}else l=p.isArrayOrTypedArray(m.marker.opacity)?{type:"identity",property:"mo"}:m.marker.opacity;p.extendFlat(c.fill.paint,{"fill-opacity":l});p.extendFlat(c.line.paint,{"line-opacity":l});return c}var n=b("fast-isnumeric"),p=b("../../lib"),k=b("../../components/colorscale"),a=b("../../components/drawing"),e=b("../../lib/geojson_utils").makeBlank,
f=b("../../lib/geo_location_utils");D.exports={convert:function(l){var m=l[0].trace,c=!0===m.visible&&0!==m._length,d={layout:{visibility:"none"},paint:{}},g={layout:{visibility:"none"},paint:{}},h=m._opts={fill:d,line:g,geojson:e()};if(!c)return h;c=f.extractTraceFeature(l);if(!c)return h;var q=k.makeColorScaleFuncFromTrace(m),t=m.marker;m=t.line||{};var v;p.isArrayOrTypedArray(t.opacity)&&(v=function(u){u=u.mo;return n(u)?+p.constrain(u,0,1):0});var w;p.isArrayOrTypedArray(m.color)&&(w=function(u){return u.mlc});
var A;p.isArrayOrTypedArray(m.width)&&(A=function(u){return u.mlw});for(var z=0;z<l.length;z++){var y=l[z],B=y.fOut;if(B){var C=B.properties;C.fc=q(y.z);v&&(C.mo=v(y));w&&(C.mlc=w(y));A&&(C.mlw=A(y));y.ct=C.ct;y._polygons=f.feature2polygons(B)}}v=v?{type:"identity",property:"mo"}:t.opacity;p.extendFlat(d.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":v});p.extendFlat(g.paint,{"line-color":w?{type:"identity",property:"mlc"}:m.color,"line-width":A?{type:"identity",property:"mlw"}:
m.width,"line-opacity":v});d.layout.visibility="visible";g.layout.visibility="visible";h.geojson={type:"FeatureCollection",features:c};r(l);return h},convertOnSelect:r}},{"../../components/colorscale":627,"../../components/drawing":637,"../../lib":749,"../../lib/geo_location_utils":742,"../../lib/geojson_utils":743,"fast-isnumeric":241}],969:[function(b,D,G){var r=b("../../lib"),n=b("../../components/colorscale/defaults"),p=b("./attributes");D.exports=function(k,a,e,f){function l(d,g){return r.coerce(k,
a,p,d,g)}e=l("locations");var m=l("z"),c=l("geojson");r.isArrayOrTypedArray(e)&&e.length&&r.isArrayOrTypedArray(m)&&m.length&&("string"===typeof c&&""!==c||r.isPlainObject(c))?(l("featureidkey"),a._length=Math.min(e.length,m.length),l("below"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),n(k,a,f,l,{prefix:"",cLetter:"z"}),r.coerceSelectionMarkerOpacity(a,l)):a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,
"./attributes":967}],970:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../choropleth/calc"),plot:b("./plot"),hoverPoints:b("../choropleth/hover"),eventData:b("../choropleth/event_data"),selectPoints:b("../choropleth/select"),styleOnSelect:function(r,n){n&&n[0].trace._glTrace.updateOnSelect(n)},getBelow:function(r,n){r=n.getMapLayers();for(n=r.length-2;0<=n;n--){var p=r[n].id;if("string"===typeof p&&0===p.indexOf("water"))for(var k=
n+1;k<r.length;k++)if(p=r[k].id,"string"===typeof p&&-1===p.indexOf("plotly-"))return p}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":854,"../choropleth/calc":959,"../choropleth/event_data":961,"../choropleth/hover":962,"../choropleth/select":965,"../heatmap/colorbar":1037,"./attributes":967,"./defaults":969,"./plot":971}],971:[function(b,D,G){function r(a,
e){this.type="choroplethmapbox";this.subplot=a;this.uid=e;this.sourceId="source-"+e;this.layerList=[["fill",k+e+"-fill"],["line",k+e+"-line"]];this.below=null}var n=b("./convert").convert,p=b("./convert").convertOnSelect,k=b("../../plots/mapbox/constants").traceLayerPrefix;b=r.prototype;b.update=function(a){this._update(n(a))};b.updateOnSelect=function(a){this._update(p(a))};b._update=function(a){var e=this.subplot,f=this.layerList,l=e.belowLookup["trace-"+this.uid];e.map.getSource(this.sourceId).setData(a.geojson);
l!==this.below&&(this._removeLayers(),this._addLayers(a,l),this.below=l);for(l=0;l<f.length;l++){var m=f[l],c=m[1];m=a[m[0]];e.setOptions(c,"setLayoutProperty",m.layout);"visible"===m.layout.visibility&&e.setOptions(c,"setPaintProperty",m.paint)}};b._addLayers=function(a,e){for(var f=this.subplot,l=this.layerList,m=this.sourceId,c=0;c<l.length;c++){var d=l[c],g=d[0],h=a[g];f.addLayer({type:g,id:d[1],source:m,layout:h.layout,paint:h.paint},e)}};b._removeLayers=function(){for(var a=this.subplot.map,
e=this.layerList,f=e.length-1;0<=f;f--)a.removeLayer(e[f][1])};b.dispose=function(){var a=this.subplot.map;this._removeLayers();a.removeSource(this.sourceId)};D.exports=function(a,e){var f=e[0].trace,l=new r(a,f.uid),m=l.sourceId,c=n(e);f=l.below=a.belowLookup["trace-"+f.uid];a.map.addSource(m,{type:"geojson",data:c.geojson});l._addLayers(c,f);return e[0].trace._glTrace=l}},{"../../plots/mapbox/constants":852,"./convert":968}],972:[function(b,D,G){G=b("../../components/colorscale/attributes");var r=
b("../../plots/template_attributes").hovertemplateAttrs,n=b("../mesh3d/attributes"),p=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var k={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],
editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:r({editType:"calc"},{keys:["norm"]}),showlegend:b({},p.showlegend,{dflt:!1})};b(k,G("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(a){k[a]=
n[a]});k.hoverinfo=b({},p.hoverinfo,{editType:"calc",flags:"x y z u v w norm text name".split(" "),dflt:"x+y+z+norm+text+name"});k.transforms=void 0;D.exports=k},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../mesh3d/attributes":1096}],973:[function(b,D,G){var r=b("../../components/colorscale/calc");D.exports=function(n,p){for(var k=p.u,a=p.v,e=p.w,f=Math.min(p.x.length,p.y.length,p.z.length,k.length,a.length,
e.length),l=-Infinity,m=Infinity,c=0;c<f;c++){var d=k[c],g=a[c],h=e[c];d=Math.sqrt(d*d+g*g+h*h);l=Math.max(l,d);m=Math.min(m,d)}p._len=f;p._normMax=l;r(n,p,{vals:[m,l],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623}],974:[function(b,D,G){function r(g,h){this.scene=g;this.uid=h;this.data=this.mesh=null}function n(g,h){function q(A,z){var y=t[z],B=v[m[z]];return a(A,function(C){return y.d2l(C)*B})}var t=g.fullSceneLayout,v=g.dataScale;g={};g.vectors=l(q(h.u,"xaxis"),q(h.v,"yaxis"),
q(h.w,"zaxis"),h._len);g.positions=l(q(h.x,"xaxis"),q(h.y,"yaxis"),q(h.z,"zaxis"),h._len);var w=f(h);g.colormap=e(h);g.vertexIntensityBounds=[w.min/h._normMax,w.max/h._normMax];g.coneOffset=c[h.anchor];g.coneSize="scaled"===h.sizemode?h.sizeref||.5:h.sizeref&&h._normMax?h.sizeref/h._normMax:.5;g=p(g);w=h.lightposition;g.lightPosition=[w.x,w.y,w.z];g.ambient=h.lighting.ambient;g.diffuse=h.lighting.diffuse;g.specular=h.lighting.specular;g.roughness=h.lighting.roughness;g.fresnel=h.lighting.fresnel;
g.opacity=h.opacity;h._pad=d[h.anchor]*g.vectorScale*g.coneScale*h._normMax;return g}var p=b("gl-cone3d"),k=b("gl-cone3d").createConeMesh,a=b("../../lib").simpleMap,e=b("../../lib/gl_format_color").parseColorScale,f=b("../../components/colorscale").extractOpts,l=b("../../plots/gl3d/zip3");b=r.prototype;b.handlePick=function(g){if(g.object===this.mesh){var h=g.index=g.data.index,q=this.data.u[h],t=this.data.v[h],v=this.data.w[h];g.traceCoordinate=[this.data.x[h],this.data.y[h],this.data.z[h],q,t,v,
Math.sqrt(q*q+t*t+v*v)];q=this.data.hovertext||this.data.text;Array.isArray(q)&&void 0!==q[h]?g.textLabel=q[h]:q&&(g.textLabel=q);return!0}};var m={xaxis:0,yaxis:1,zaxis:2},c={tip:1,tail:0,cm:.25,center:.5},d={tip:1,tail:1,cm:.75,center:.5};b.update=function(g){this.data=g;g=n(this.scene,g);this.mesh.update(g)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};D.exports=function(g,h){var q=g.glplot.gl,t=n(g,h);q=k(q,t);t=new r(g,h.uid);t.mesh=q;t.data=h;q._trace=t;g.glplot.add(q);
return t}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gl_format_color":745,"../../plots/gl3d/zip3":850,"gl-cone3d":259}],975:[function(b,D,G){var r=b("../../lib"),n=b("../../components/colorscale/defaults"),p=b("./attributes");D.exports=function(k,a,e,f){function l(q,t){return r.coerce(k,a,p,q,t)}e=l("u");var m=l("v"),c=l("w"),d=l("x"),g=l("y"),h=l("z");e&&e.length&&m&&m.length&&c&&c.length&&d&&d.length&&g&&g.length&&h&&h.length?(l("sizeref"),l("sizemode"),l("anchor"),l("lighting.ambient"),
l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),n(k,a,f,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),a._length=null):a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":972}],976:[function(b,D,G){D.exports={moduleType:"trace",name:"cone",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),
supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),eventData:function(r,n){r.norm=n.traceCoordinate[6];return r},meta:{}}},{"../../plots/gl3d":839,"./attributes":972,"./calc":973,"./convert":974,"./defaults":975}],977:[function(b,D,G){G=b("../heatmap/attributes");var r=b("../scatter/attributes"),n=b("../../components/colorscale/attributes"),p=b("../../components/drawing/attributes").dash,k=b("../../plots/font_attributes"),a=b("../../lib/extend").extendFlat,
e=b("../../constants/filter_ops"),f=e.COMPARISON_OPS2;e=e.INTERVAL_OPS;b("../../constants/docs");b=r.line;D.exports=a({z:G.z,x:G.x,x0:G.x0,dx:G.dx,y:G.y,y0:G.y0,dy:G.dy,text:G.text,hovertext:G.hovertext,transpose:G.transpose,xtype:G.xtype,ytype:G.ytype,zhoverformat:G.zhoverformat,hovertemplate:G.hovertemplate,hoverongaps:G.hoverongaps,connectgaps:a({},G.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,
"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill",
"heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:k({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(f).concat(e),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:a({},b.color,{editType:"style+colorbars"}),
width:{valType:"number",min:0,editType:"style+colorbars"},dash:p,smoothing:a({},b.smoothing,{}),editType:"plot"}},n("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../components/drawing/attributes":636,"../../constants/docs":719,"../../constants/filter_ops":720,"../../lib/extend":739,"../../plots/font_attributes":825,"../heatmap/attributes":1034,"../scatter/attributes":1155}],978:[function(b,D,G){var r=b("../../components/colorscale"),
n=b("../heatmap/calc"),p=b("./set_contours"),k=b("./end_plus");D.exports=function(a,e){var f=n(a,e),l=f[0].z;p(e,l);var m=e.contours,c=r.extractOpts(e);"heatmap"===m.coloring&&c.auto&&!1===e.autocontour?(l=m.start,c=k(m),m=m.size||1,c=Math.floor((c-l)/m)+1,isFinite(m)||(c=m=1),l-=m/2,m=[l,l+c*m]):m=l;r.calc(a,e,{vals:m,cLetter:"z"});return f}},{"../../components/colorscale":627,"../heatmap/calc":1035,"./end_plus":988,"./set_contours":996}],979:[function(b,D,G){D.exports=function(r,n){var p=r[0],k=
p.z,a;switch(n.type){case "levels":p=Math.min(k[0][0],k[0][1]);for(a=0;a<r.length;a++){var e=r[a];e.prefixBoundary=!e.edgepaths.length&&(p>e.level||e.starts.length&&p===e.level)}break;case "constraint":if(p.prefixBoundary=!1,!p.edgepaths.length){var f=p.x.length,l=p.y.length;r=-Infinity;e=Infinity;for(a=0;a<l;a++)e=Math.min(e,k[a][0]),e=Math.min(e,k[a][f-1]),r=Math.max(r,k[a][0]),r=Math.max(r,k[a][f-1]);for(a=1;a<f-1;a++)e=Math.min(e,k[0][a]),e=Math.min(e,k[l-1][a]),r=Math.max(r,k[0][a]),r=Math.max(r,
k[l-1][a]);a=n.value;switch(n._operation){case "\x3e":a>r&&(p.prefixBoundary=!0);break;case "\x3c":if(a<e||p.starts.length&&a===e)p.prefixBoundary=!0;break;case "[]":n=Math.min(a[0],a[1]);a=Math.max(a[0],a[1]);if(a<e||n>r||p.starts.length&&a===e)p.prefixBoundary=!0;break;case "][":n=Math.min(a[0],a[1]),a=Math.max(a[0],a[1]),n<e&&a>r&&(p.prefixBoundary=!0)}}}}},{}],980:[function(b,D,G){var r=b("../../components/colorscale"),n=b("./make_color_map"),p=b("./end_plus");D.exports={min:"zmin",max:"zmax",
calc:function(k,a,e){k=a.contours;var f=a.line,l=k.size||1,m=k.coloring,c=n(a,{isColorbar:!0});"heatmap"===m?(a=r.extractOpts(a),e._fillgradient=a.reversescale?r.flipScale(a.colorscale):a.colorscale,e._zrange=[a.min,a.max]):"fill"===m&&(e._fillcolor=c);e._line={color:"lines"===m?c:f.color,width:!1!==k.showlines?f.width:0,dash:f.dash};e._levels={start:k.start,end:p(k),size:l}}}},{"../../components/colorscale":627,"./end_plus":988,"./make_color_map":993}],981:[function(b,D,G){D.exports={BOTTOMSTART:[1,
9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},
{}],982:[function(b,D,G){var r=b("fast-isnumeric"),n=b("./label_defaults");G=b("../../components/color");var p=G.addOpacity,k=G.opacity;b=b("../../constants/filter_ops");var a=b.CONSTRAINT_REDUCTION,e=b.COMPARISON_OPS2;D.exports=function(f,l,m,c,d,g){var h=l.contours,q=m("contours.operation");h._operation=a[q];if(-1===e.indexOf(h.operation))if(m("contours.value",[0,1]),Array.isArray(h.value))if(2<h.value.length)h.value=h.value.slice(2);else if(0===h.length)h.value=[0,1];else if(2>h.length){var t=
parseFloat(h.value[0]);h.value=[t,t+1]}else h.value=[parseFloat(h.value[0]),parseFloat(h.value[1])];else r(h.value)&&(t=parseFloat(h.value),h.value=[t,t+1]);else m("contours.value",0),r(h.value)||(Array.isArray(h.value)?h.value=parseFloat(h.value[0]):h.value=0);if("\x3d"===q)h=h.showlines=!0;else{h=m("contours.showlines");var v=m("fillcolor",p((f.line||{}).color||d,.5))}if(h){f=v&&k(v)?p(l.fillcolor,1):d;var w=m("line.color",f);m("line.width",2);m("line.dash")}m("line.smoothing");n(m,c,w,g)}},{"../../components/color":615,
"../../constants/filter_ops":720,"./label_defaults":992,"fast-isnumeric":241}],983:[function(b,D,G){function r(e,f){function l(d){return a(d)?+d:null}var m=Array.isArray(f),c;-1!==k.COMPARISON_OPS2.indexOf(e)?c=m?l(f[0]):l(f):-1!==k.INTERVAL_OPS.indexOf(e)?c=m?[l(f[0]),l(f[1])]:[l(f),l(f)]:-1!==k.SET_OPS.indexOf(e)&&(c=m?f.map(l):[l(f)]);return c}function n(e){return function(f){f=r(e,f);var l=Math.min(f[0],f[1]);f=Math.max(f[0],f[1]);return{start:l,end:f,size:f-l}}}function p(e){return function(f){f=
r(e,f);return{start:f,end:Infinity,size:Infinity}}}var k=b("../../constants/filter_ops"),a=b("fast-isnumeric");D.exports={"[]":n("[]"),"][":n("]["),"\x3e":p("\x3e"),"\x3c":p("\x3c"),"\x3d":p("\x3d")}},{"../../constants/filter_ops":720,"fast-isnumeric":241}],984:[function(b,D,G){D.exports=function(r,n,p,k){r=k("contours.start");k=k("contours.end");k=!1===r||!1===k;r=p("contours.size");(k?!(n.autocontour=!0):!p("autocontour",!1))&&r||p("ncontours")}},{}],985:[function(b,D,G){function r(p){return n.extendFlat({},
p,{edgepaths:n.extendDeep([],p.edgepaths),paths:n.extendDeep([],p.paths),starts:n.extendDeep([],p.starts)})}var n=b("../../lib");D.exports=function(p,k){var a=function(l){return l.reverse()},e=function(l){return l};switch(k){case "\x3d":case "\x3c":return p;case "\x3e":1!==p.length&&n.warn("Contour data invalid for the specified inequality operation.");var f=p[0];for(k=0;k<f.edgepaths.length;k++)f.edgepaths[k]=a(f.edgepaths[k]);for(k=0;k<f.paths.length;k++)f.paths[k]=a(f.paths[k]);for(k=0;k<f.starts.length;k++)f.starts[k]=
a(f.starts[k]);return p;case "][":k=a,a=e,e=k;case "[]":2!==p.length&&n.warn("Contour data invalid for the specified inequality range operation.");f=r(p[0]);p=r(p[1]);for(k=0;k<f.edgepaths.length;k++)f.edgepaths[k]=a(f.edgepaths[k]);for(k=0;k<f.paths.length;k++)f.paths[k]=a(f.paths[k]);for(k=0;k<f.starts.length;k++)f.starts[k]=a(f.starts[k]);for(;p.edgepaths.length;)f.edgepaths.push(e(p.edgepaths.shift()));for(;p.paths.length;)f.paths.push(e(p.paths.shift()));for(;p.starts.length;)f.starts.push(e(p.starts.shift()));
return[f]}}},{"../../lib":749}],986:[function(b,D,G){var r=b("../../lib"),n=b("../heatmap/xyz_defaults"),p=b("./constraint_defaults"),k=b("./contours_defaults"),a=b("./style_defaults"),e=b("./attributes");D.exports=function(f,l,m,c){function d(q,t){return r.coerce(f,l,e,q,t)}function g(q){return r.coerce2(f,l,e,q)}if(n(f,l,d,c)){d("text");d("hovertext");d("hovertemplate");d("hoverongaps");var h="constraint"===d("contours.type");d("connectgaps",r.isArray1D(l.z));h?p(f,l,d,c,m):(k(f,l,d,g),a(f,l,d,
c))}else l.visible=!1}},{"../../lib":749,"../heatmap/xyz_defaults":1048,"./attributes":977,"./constraint_defaults":982,"./contours_defaults":984,"./style_defaults":998}],987:[function(b,D,G){var r=b("../../lib"),n=b("./constraint_mapping"),p=b("./end_plus");D.exports=function(k,a,e){var f="constraint"===k.type?n[k._operation](k.value):k,l=f.size,m=[],c=p(f),d=e.trace._carpetTrace;a=d?{xaxis:d.aaxis,yaxis:d.baxis,x:e.a,y:e.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:e.x,y:e.y};for(f=f.start;f<c;f+=l)if(m.push(r.extendFlat({level:f,
crossings:{},starts:[],edgepaths:[],paths:[],z:e.z,smoothing:e.trace.line.smoothing},a)),1E3<m.length){r.warn("Too many contours, clipping at 1000",k);break}return m}},{"../../lib":749,"./constraint_mapping":983,"./end_plus":988}],988:[function(b,D,G){D.exports=function(r){return r.end+r.size/1E6}},{}],989:[function(b,D,G){function r(e,f,l,m){return Math.abs(e[0]-f[0])<l&&Math.abs(e[1]-f[1])<m}function n(e,f,l,m,c){var d=f.join(","),g=e.crossings[d],h=g,q=0,t=0;20<h&&l?208===h||1114===h?q=0===f[0]?
1:-1:t=0===f[1]?1:-1:-1!==a.BOTTOMSTART.indexOf(h)?t=1:-1!==a.LEFTSTART.indexOf(h)?q=1:-1!==a.TOPSTART.indexOf(h)?t=-1:q=-1;var v=[q,t];h=[p(e,f,[-v[0],-v[1]])];var w=e.z.length,A=e.z[0].length;q=f.slice();var z=v.slice();for(t=0;1E4>t;t++){20<g?(g=a.CHOOSESADDLE[g][0>(v[0]||v[1])?0:1],e.crossings[d]=a.SADDLEREMAINDER[g]):delete e.crossings[d];v=a.NEWDELTA[g];if(!v){k.log("Found bad marching index:",g,f,e.level);break}h.push(p(e,f,v));f[0]+=v[0];f[1]+=v[1];d=f.join(",");r(h[h.length-1],h[h.length-
2],m,c)&&h.pop();g=v[0]&&(0>f[0]||f[0]>A-2)||v[1]&&(0>f[1]||f[1]>w-2);if(f[0]===q[0]&&f[1]===q[1]&&v[0]===z[0]&&v[1]===z[1]||l&&g)break;g=e.crossings[d]}1E4===t&&k.log("Infinite loop in contour?");f=r(h[0],h[h.length-1],m,c);v=0;w=.2*e.smoothing;d=[];g=0;for(t=1;t<h.length;t++){z=h[t];var y=h[t-1];A=z[2]-y[2];z=z[3]-y[3];A=Math.sqrt(A*A+z*z);v+=A;d.push(A)}A=v/d.length*w;for(t=h.length-2;t>=g;t--)if(z=d[t],z<A){w=0;for(v=t-1;v>=g;v--)if(z+d[v]<A)z+=d[v];else break;if(f&&t===h.length-2)for(w=0;w<v;w++)if(z+
d[w]<A)z+=d[w];else break;z=t-v+w+1;y=Math.floor((t+v+w+2)/2);z=f||t!==h.length-2?f||-1!==v?z%2?h[y%h.length]:[(h[y%h.length][0]+h[(y+1)%h.length][0])/2,(h[y%h.length][1]+h[(y+1)%h.length][1])/2]:h[0]:h[h.length-1];h.splice(v+1,t-v+1,z);t=v+1;w&&(g=w);f&&(t===h.length-2?h[w]=h[h.length-1]:0===t&&(h[h.length-1]=h[0]))}h.splice(0,g);for(t=0;t<h.length;t++)h[t].length=2;if(!(2>h.length))if(f)h.pop(),e.paths.push(h);else{l||k.log("Unclosed interior contour?",e.level,q.join(","),h.join("L"));d=!1;for(l=
0;l<e.edgepaths.length;l++)if(t=e.edgepaths[l],!d&&r(t[0],h[h.length-1],m,c)){h.pop();d=!0;g=!1;for(q=0;q<e.edgepaths.length;q++)if(f=e.edgepaths[q],r(f[f.length-1],h[0],m,c)){g=!0;h.shift();e.edgepaths.splice(l,1);q===l?e.paths.push(h.concat(f)):(q>l&&q--,e.edgepaths[q]=f.concat(h,t));break}g||(e.edgepaths[l]=h.concat(t))}for(l=0;l<e.edgepaths.length&&!d;l++)t=e.edgepaths[l],r(t[t.length-1],h[0],m,c)&&(h.shift(),e.edgepaths[l]=t.concat(h),d=!0);d||e.edgepaths.push(h)}}function p(e,f,l){var m=f[0]+
Math.max(l[0],0);f=f[1]+Math.max(l[1],0);var c=e.z[f][m],d=e.xaxis,g=e.yaxis;if(l[1])return l=(e.level-c)/(e.z[f][m+1]-c),[d.c2p((1-l)*e.x[m]+l*e.x[m+1],!0),g.c2p(e.y[f],!0),m+l,f];l=(e.level-c)/(e.z[f+1][m]-c);return[d.c2p(e.x[m],!0),g.c2p((1-l)*e.y[f]+l*e.y[f+1],!0),m,f+l]}var k=b("../../lib"),a=b("./constants");D.exports=function(e,f,l){var m,c;f=f||.01;l=l||.01;for(c=0;c<e.length;c++){var d=e[c];for(m=0;m<d.starts.length;m++){var g=d.starts[m];n(d,g,"edge",f,l)}for(m=0;Object.keys(d.crossings).length&&
1E4>m;)m++,g=Object.keys(d.crossings)[0].split(",").map(Number),n(d,g,void 0,f,l);1E4===m&&k.log("Infinite loop in contour?")}}},{"../../lib":749,"./constants":981}],990:[function(b,D,G){var r=b("../../components/color"),n=b("../heatmap/hover");D.exports=function(p,k,a,e,f){(p=n(p,k,a,e,f,!0))&&p.forEach(function(l){var m=l.trace;"constraint"===m.contours.type&&(m.fillcolor&&r.opacity(m.fillcolor)?l.color=r.addOpacity(m.fillcolor,1):m.contours.showlines&&r.opacity(m.line.color)&&(l.color=r.addOpacity(m.line.color,
1)))});return p}},{"../../components/color":615,"../heatmap/hover":1041}],991:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot").plot,style:b("./style"),colorbar:b("./colorbar"),hoverPoints:b("./hover"),moduleType:"trace",name:"contour",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":810,"./attributes":977,"./calc":978,"./colorbar":980,"./defaults":986,
"./hover":990,"./plot":995,"./style":997}],992:[function(b,D,G){var r=b("../../lib");D.exports=function(n,p,k,a){a||(a={});n("contours.showlabels")&&(p=p.font,r.coerceFont(n,"contours.labelfont",{family:p.family,size:p.size,color:k}),n("contours.labelformat"));!1!==a.hasHover&&n("zhoverformat")}},{"../../lib":749}],993:[function(b,D,G){var r=b("d3"),n=b("../../components/colorscale"),p=b("./end_plus");D.exports=function(k){var a=k.contours,e=a.start,f=p(a),l=a.size||1,m=Math.floor((f-e)/l)+1,c="lines"===
a.coloring?0:1,d=n.extractOpts(k);isFinite(l)||(m=l=1);var g=d.reversescale?n.flipScale(d.colorscale):d.colorscale,h=g.length;k=Array(h);f=Array(h);var q;if("heatmap"===a.coloring){e=d.min;c=d.max;for(q=0;q<h;q++)d=g[q],k[q]=d[0]*(c-e)+e,f[q]=d[1];l=r.extent([e,c,a.start,a.start+l*(m-1)]);a=l[e<c?0:1];l=l[e<c?1:0];a!==e&&(k.splice(0,0,a),f.splice(0,0,f[0]));l!==c&&(k.push(l),f.push(f[f.length-1]))}else for(q=0;q<h;q++)d=g[q],k[q]=(d[0]*(m+c-1)-c/2)*l+e,f[q]=d[1];return n.makeColorScaleFunc({domain:k,
range:f},{noNumericCheck:!0})}},{"../../components/colorscale":627,"./end_plus":988,d3:169}],994:[function(b,D,G){var r=b("./constants");D.exports=function(n){var p=n[0].z,k=p.length,a=p[0].length,e=2===k||2===a,f,l,m;for(l=0;l<k-1;l++){var c=[];0===l&&(c=c.concat(r.BOTTOMSTART));l===k-2&&(c=c.concat(r.TOPSTART));for(f=0;f<a-1;f++){var d=c.slice();0===f&&(d=d.concat(r.LEFTSTART));f===a-2&&(d=d.concat(r.RIGHTSTART));var g=f+","+l;var h=[[p[l][f],p[l][f+1]],[p[l+1][f],p[l+1][f+1]]];for(m=0;m<n.length;m++){var q=
n[m];var t=q.level;var v=(h[0][0]>t?0:1)+(h[0][1]>t?0:2)+(h[1][1]>t?0:4)+(h[1][0]>t?0:8);t=5===v||10===v?t>(h[0][0]+h[0][1]+h[1][0]+h[1][1])/4?5===v?713:1114:5===v?104:208:15===v?0:v;t&&(q.crossings[g]=t,-1!==d.indexOf(t)&&(q.starts.push([f,l]),e&&-1!==d.indexOf(t,d.indexOf(t)+1)&&q.starts.push([f,l])))}}}}},{"./constants":981}],995:[function(b,D,G){function r(z,y,B,C){var u="fill"===C.coloring||"constraint"===C.type&&"\x3d"!==C._operation,F="M"+B.join("L")+"Z";u&&v(y,C);z=a.ensureSingle(z,"g","contourfill").selectAll("path").data(u?
y:[]);z.enter().append("path");z.exit().remove();z.each(function(H){(H=(H.prefixBoundary?F:"")+n(H,B))?k.select(this).attr("d",H).style("stroke","none"):k.select(this).remove()})}function n(z,y){for(var B="",C=0,u=z.edgepaths.map(function(L,P){return P}),F=!0,H,J,I,M;u.length;){J=e.smoothopen(z.edgepaths[C],z.smoothing);B+=F?J:J.replace(/^M/,"L");u.splice(u.indexOf(C),1);F=z.edgepaths[C][z.edgepaths[C].length-1];I=-1;for(J=0;4>J;J++){if(!F){a.log("Missing end?",C,z);break}.01>Math.abs(F[1]-y[0][1])&&
!(.01>Math.abs(F[0]-y[2][0]))?H=y[1]:.01>Math.abs(F[0]-y[0][0])?H=y[0]:.01>Math.abs(F[1]-y[2][1])?H=y[3]:.01>Math.abs(F[0]-y[2][0])&&(H=y[2]);for(M=0;M<z.edgepaths.length;M++){var E=z.edgepaths[M][0];.01>Math.abs(F[0]-H[0])?.01>Math.abs(F[0]-E[0])&&0<=(E[1]-F[1])*(H[1]-E[1])&&(H=E,I=M):.01>Math.abs(F[1]-H[1])?.01>Math.abs(F[1]-E[1])&&0<=(E[0]-F[0])*(H[0]-E[0])&&(H=E,I=M):a.log("endpt to newendpt is not vert. or horz.",F,H,E)}F=H;if(0<=I)break;B+="L"+H}if(I===z.edgepaths.length){a.log("unclosed perimeter path");
break}C=I;if(F=-1===u.indexOf(C))C=u[0],B+="Z"}for(C=0;C<z.paths.length;C++)B+=e.smoothclosed(z.paths[C],z.smoothing);return B}function p(z,y,B,C,u){var F=a.ensureSingle(z,"g","contourlines"),H=!1!==u.showlines,J=u.showlabels,I=H&&J,M=G.createLines(F,H||J,y);F=G.createLineClip(F,I,B,C.trace.uid);z=z.selectAll("g.contourlabels").data(J?[0]:[]);z.exit().remove();z.enter().append("g").classed("contourlabels",!0);if(J){var E=[],L=[];a.clearLocationCache();var P=G.labelFormatter(B,C),N=e.tester.append("text").attr("data-notex",
1).call(e.font,u.labelfont),Q=y[0].xaxis,O=y[0].yaxis;u=Q._length;var T=O._length,V=Q.range,Z=O.range,aa=a.aggNums(Math.min,null,C.x),Y=a.aggNums(Math.max,null,C.x),ea=a.aggNums(Math.min,null,C.y),ca=a.aggNums(Math.max,null,C.y);C=Math.max(Q.c2p(aa,!0),0);Q=Math.min(Q.c2p(Y,!0),u);Y=Math.max(O.c2p(ca,!0),0);O=Math.min(O.c2p(ea,!0),T);var ba={};V[0]<V[1]?(ba.left=C,ba.right=Q):(ba.left=Q,ba.right=C);Z[0]<Z[1]?(ba.top=Y,ba.bottom=O):(ba.top=O,ba.bottom=Y);ba.middle=(ba.top+ba.bottom)/2;ba.center=(ba.left+
ba.right)/2;E.push([[ba.left,ba.top],[ba.right,ba.top],[ba.right,ba.bottom],[ba.left,ba.bottom]]);var ka=w.LABELDISTANCE*Math.sqrt(u*u+T*T)/Math.max(1,y.length/w.LABELINCREASE);M.each(function(qa){var pa=G.calcTextOpts(qa.level,P,N,B);k.select(this).selectAll("path").each(function(){var oa=a.getVisibleSegment(this,ba,pa.height/2);if(oa&&!(oa.len<(pa.width+pa.height)*w.LABELMIN))for(var ja=Math.min(Math.ceil(oa.len/ka),w.LABELMAX),ra=0;ra<ja;ra++){var ha=G.findBestTextLocation(this,oa,pa,L,ba);if(!ha)break;
G.addLabelData(ha,pa,L,E)}})});N.remove();G.drawLabels(z,L,B,F,I?E:null)}J&&!H&&M.remove()}var k=b("d3"),a=b("../../lib"),e=b("../../components/drawing"),f=b("../../components/colorscale"),l=b("../../lib/svg_text_utils"),m=b("../../plots/cartesian/axes"),c=b("../../plots/cartesian/set_convert"),d=b("../heatmap/plot"),g=b("./make_crossings"),h=b("./find_all_paths"),q=b("./empty_pathinfo"),t=b("./convert_to_constraints"),v=b("./close_boundaries"),w=b("./constants"),A=w.LABELOPTIMIZER;G.plot=function(z,
y,B,C){var u=y.xaxis,F=y.yaxis;a.makeTraceGroups(C,B,"contour").each(function(H){var J=k.select(this),I=H[0],M=I.x,E=I.y,L=I.trace.contours,P=q(L,y,I),N=a.ensureSingle(J,"g","heatmapcoloring"),Q=[];"heatmap"===L.coloring&&(Q=[H]);d(z,y,Q,N);g(P);h(P);H=u.c2p(M[0],!0);M=u.c2p(M[M.length-1],!0);N=F.c2p(E[0],!0);E=F.c2p(E[E.length-1],!0);E=[[H,E],[M,E],[M,N],[H,N]];M=P;"constraint"===L.type&&(M=t(P,L._operation));H=a.ensureSingle(J,"g","contourbg").selectAll("path").data("fill"===L.coloring?[0]:[]);
H.enter().append("path");H.exit().remove();H.attr("d","M"+E.join("L")+"Z").style("stroke","none");r(J,M,E,L);p(J,P,z,I,L);M=I.trace;L="clip"+M.uid;P=z._fullLayout._clips.selectAll("#"+L).data(M.connectgaps?[]:[0]);P.enter().append("clipPath").classed("contourclip",!0).attr("id",L);P.exit().remove();if(!1===M.connectgaps){M=y.xaxis;H=y.yaxis;N=I.x;Q=I.y;var O=I.trace._emptypoints,T=[],V=I.z.length,Z=I.z[0].length,aa,Y=[];for(aa=0;aa<Z;aa++)Y.push(1);for(aa=0;aa<V;aa++)T.push(Y.slice());for(aa=0;aa<
O.length;aa++)V=O[aa],T[V[0]][V[1]]=0;I.zmask=T;I={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:M,yaxis:H,x:N,y:Q,z:T,smoothing:0};g([I]);h([I]);v([I],{type:"levels"});a.ensureSingle(P,"path","").attr("d",(I.prefixBoundary?"M"+E.join("L")+"Z":"")+n(I,E))}else L=null;e.setClipUrl(J,L,z)})};G.createLines=function(z,y,B){var C=B[0].smoothing;z=z.selectAll("g.contourlevel").data(y?B:[]);z.exit().remove();z.enter().append("g").classed("contourlevel",!0);y&&(y=z.selectAll("path.openline").data(function(u){return u.pedgepaths||
u.edgepaths}),y.exit().remove(),y.enter().append("path").classed("openline",!0),y.attr("d",function(u){return e.smoothopen(u,C)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"),y=z.selectAll("path.closedline").data(function(u){return u.ppaths||u.paths}),y.exit().remove(),y.enter().append("path").classed("closedline",!0),y.attr("d",function(u){return e.smoothclosed(u,C)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke"));return z};G.createLineClip=
function(z,y,B,C){C=y?"clipline"+C:null;y=B._fullLayout._clips.selectAll("#"+C).data(y?[0]:[]);y.exit().remove();y.enter().append("clipPath").classed("contourlineclip",!0).attr("id",C);e.setClipUrl(z,C,B);return y};G.labelFormatter=function(z,y){z=z._fullLayout;var B=y.trace;y=B.contours;var C={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};y.labelformat?(C.tickformat=y.labelformat,c(C,z)):(B=f.extractOpts(B))&&B.colorbar&&B.colorbar._axis?C=B.colorbar._axis:("constraint"===y.type?
(y=y.value,Array.isArray(y)?C.range=[y[0],y[y.length-1]]:C.range=[y,y]):(C.range=[y.start,y.end],C.nticks=(y.end-y.start)/y.size),C.range[0]===C.range[1]&&(C.range[1]+=C.range[0]||1),C.nticks||(C.nticks=1E3),c(C,z),m.prepTicks(C),C._tmin=null,C._tmax=null);return function(u){return m.tickText(C,u).text}};G.calcTextOpts=function(z,y,B,C){y=y(z);B.text(y).call(l.convertToTspans,C);B=B.node();C=e.bBox(B,!0);return{text:y,width:C.width,height:C.height,fontSize:+B.style["font-size"].replace("px",""),level:z,
dy:(C.top+C.bottom)/2}};G.findBestTextLocation=function(z,y,B,C,u){var F=B.width;if(y.isClosed){var H=y.len/A.INITIALSEARCHPOINTS;var J=y.min+H/2;var I=y.max}else H=(y.len-F)/(A.INITIALSEARCHPOINTS+1),J=y.min+H+F/2,I=y.max-(H+F)/2;for(var M=Infinity,E=0;E<A.ITERATIONS;E++){for(;J<I;J+=H){var L=a.getTextLocation(z,y.total,J,F);a:{var P=B;var N=C,Q=P.width/2,O=P.height/2,T=L.x,V=L.y,Z=L.theta,aa=Math.cos(Z)*Q,Y=Math.sin(Z)*Q;Q=(T>u.center?u.right-T:T-u.left)/(aa+Math.abs(Math.sin(Z)*O));O=(V>u.middle?
u.bottom-V:V-u.top)/(Math.abs(Y)+Math.cos(Z)*O);if(1>Q||1>O)P=Infinity;else{O=A.EDGECOST*(1/(Q-1)+1/(O-1));O+=A.ANGLECOST*Z*Z;Z=T-aa;Q=V-Y;T+=aa;V+=Y;for(aa=0;aa<N.length;aa++){Y=N[aa];var ea=Math.cos(Y.theta)*Y.width/2,ca=Math.sin(Y.theta)*Y.width/2;ea=2*a.segmentDistance(Z,Q,T,V,Y.x-ea,Y.y-ca,Y.x+ea,Y.y+ca)/(P.height+Y.height);ca=(Y=Y.level===P.level)?A.SAMELEVELDISTANCE:1;if(ea<=ca){P=Infinity;break a}O+=A.NEIGHBORCOST*(Y?A.SAMELEVELFACTOR:1)/(ea-ca)}P=O}}if(P<M){M=P;var ba=L;var ka=J}}if(M>2*
A.MAXCOST)break;E&&(H/=2);J=ka-H/2;I=J+1.5*H}if(M<=A.MAXCOST)return ba};G.addLabelData=function(z,y,B,C){var u=y.fontSize,F=y.width+u/3;u=Math.max(0,y.height-u/3);var H=z.x,J=z.y;z=z.theta;var I=Math.sin(z),M=Math.cos(z),E=function(L,P){return[H+L*M-P*I,J+L*I+P*M]};E=[E(-F/2,-u/2),E(-F/2,u/2),E(F/2,u/2),E(F/2,-u/2)];B.push({text:y.text,x:H,y:J,dy:y.dy,theta:z,level:y.level,width:F,height:u});C.push(E)};G.drawLabels=function(z,y,B,C,u){z=z.selectAll("text").data(y,function(F){return F.text+","+F.x+
","+F.y+","+F.theta});z.exit().remove();z.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(F){var H=F.x+Math.sin(F.theta)*F.dy,J=F.y-Math.cos(F.theta)*F.dy;k.select(this).text(F.text).attr({x:H,y:J,transform:"rotate("+180*F.theta/Math.PI+" "+H+" "+J+")"}).call(l.convertToTspans,B)});if(u){z="";for(y=0;y<u.length;y++)z+="M"+u[y].join("L")+"Z";a.ensureSingle(C,"path","").attr("d",z)}}},{"../../components/colorscale":627,"../../components/drawing":637,"../../lib":749,
"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../plots/cartesian/set_convert":817,"../heatmap/plot":1045,"./close_boundaries":979,"./constants":981,"./convert_to_constraints":985,"./empty_pathinfo":987,"./find_all_paths":989,"./make_crossings":994,d3:169}],996:[function(b,D,G){function r(k,a,e){var f={type:"linear",range:[k,a]};n.autoTicks(f,(a-k)/(e||15));return f}var n=b("../../plots/cartesian/axes"),p=b("../../lib");D.exports=function(k,a){var e=k.contours;if(k.autocontour){var f=
k.zmin,l=k.zmax;if(k.zauto||void 0===f)f=p.aggNums(Math.min,null,a);if(k.zauto||void 0===l)l=p.aggNums(Math.max,null,a);a=r(f,l,k.ncontours);e.size=a.dtick;e.start=n.tickFirst(a);a.range.reverse();e.end=n.tickFirst(a);e.start===f&&(e.start+=e.size);e.end===l&&(e.end-=e.size);e.start>e.end&&(e.start=e.end=(e.start+e.end)/2);k._input.contours||(k._input.contours={});p.extendFlat(k._input.contours,{start:e.start,end:e.end,size:e.size});k._input.autocontour=!0}else"constraint"!==e.type&&(l=e.start,a=
e.end,f=k._input.contours,l>a&&(e.start=f.start=a,a=e.end=f.end=l,l=e.start),0<e.size||(k=l===a?1:r(l,a,k.ncontours).dtick,f.size=e.size=k))}},{"../../lib":749,"../../plots/cartesian/axes":797}],997:[function(b,D,G){var r=b("d3"),n=b("../../components/drawing"),p=b("../heatmap/style"),k=b("./make_color_map");D.exports=function(a){var e=r.select(a).selectAll("g.contour");e.style("opacity",function(f){return f[0].trace.opacity});e.each(function(f){var l=r.select(this);f=f[0].trace;var m=f.contours,
c=f.line,d=m.size||1,g=m.start,h="constraint"===m.type,q=!h&&"lines"===m.coloring,t=!h&&"fill"===m.coloring,v=q||t?k(f):null;l.selectAll("g.contourlevel").each(function(z){r.select(this).selectAll("path").call(n.lineGroupStyle,c.width,q?v(z.level):c.color,c.dash)});var w=m.labelfont;l.selectAll("g.contourlabels text").each(function(z){n.font(r.select(this),{family:w.family,size:w.size,color:w.color||(q?v(z.level):c.color)})});if(h)l.selectAll("g.contourfill path").style("fill",f.fillcolor);else if(t){var A;
l.selectAll("g.contourfill path").style("fill",function(z){void 0===A&&(A=z.level);return v(z.level+.5*d)});void 0===A&&(A=g);l.selectAll("g.contourbg path").style("fill",v(A-.5*d))}});p(a)}},{"../../components/drawing":637,"../heatmap/style":1046,"./make_color_map":993,d3:169}],998:[function(b,D,G){var r=b("../../components/colorscale/defaults"),n=b("./label_defaults");D.exports=function(p,k,a,e,f){var l=a("contours.coloring"),m,c="";"fill"===l&&(m=a("contours.showlines"));!1!==m&&("lines"!==l&&
(c=a("line.color","#000")),a("line.width",.5),a("line.dash"));"none"!==l&&(!0!==p.showlegend&&(k.showlegend=!1),k._dfltShowLegend=!1,r(p,k,e,a,{prefix:"",cLetter:"z"}));a("line.smoothing");n(a,e,c,f)}},{"../../components/colorscale/defaults":625,"./label_defaults":992}],999:[function(b,D,G){G=b("../heatmap/attributes");var r=b("../contour/attributes"),n=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;var p=r.contours;D.exports=b({carpet:{valType:"string",editType:"calc"},
z:G.z,a:G.x,a0:G.x0,da:G.dx,b:G.y,b0:G.y0,db:G.dy,text:G.text,hovertext:G.hovertext,transpose:G.transpose,atype:G.xtype,btype:G.ytype,fillcolor:r.fillcolor,autocontour:r.autocontour,ncontours:r.ncontours,contours:{type:p.type,start:p.start,end:p.end,size:p.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:p.showlines,showlabels:p.showlabels,labelfont:p.labelfont,labelformat:p.labelformat,operation:p.operation,value:p.value,editType:"calc",impliedEdits:{autocontour:!1}},
line:{color:r.line.color,width:r.line.width,dash:r.line.dash,smoothing:r.line.smoothing,editType:"plot"},transforms:void 0},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../contour/attributes":977,"../heatmap/attributes":1034}],1E3:[function(b,D,G){var r=b("../../components/colorscale/calc"),n=b("../../lib"),p=b("../heatmap/convert_column_xyz"),k=b("../heatmap/clean_2d_array"),a=b("../heatmap/interp2d"),e=b("../heatmap/find_empties"),
f=b("../heatmap/make_bound_array"),l=b("./defaults"),m=b("../carpet/lookup_carpetid"),c=b("../contour/set_contours");D.exports=function(d,g){var h=g._carpetTrace=m(d,g);if(h&&h.visible&&"legendonly"!==h.visible){if(!g.a||!g.b){h=d.data[h.index];var q=d.data[g.index];q.a||(q.a=h.a);q.b||(q.b=h.b);l(q,g,g._defaultColor,d._fullLayout)}h=g._carpetTrace;q=h.aaxis;var t=h.baxis;q._minDtick=0;t._minDtick=0;n.isArray1D(g.z)&&p(g,q,t,"a","b",["z"]);var v=g._a=g._a||g.a;var w=g._b=g._b||g.b;v=v?q.makeCalcdata(g,
"_a"):[];w=w?t.makeCalcdata(g,"_b"):[];var A=g.a0||0;var z=g.da||1;var y=g.b0||0;var B=g.db||1;h=g._z=k(g._z||g.z,g.transpose);g._emptypoints=e(h);a(h,g._emptypoints);var C=n.maxRowLength(h);q=f(g,"scaled"===g.xtype?"":v,A,z,C,q);t=f(g,"scaled"===g.ytype?"":w,y,B,h.length,t);q={a:q,b:t,z:h};"levels"===g.contours.type&&"none"!==g.contours.coloring&&r(d,g,{vals:h,containerStr:"",cLetter:"z"});d=[q];c(g,g._z);return d}}},{"../../components/colorscale/calc":623,"../../lib":749,"../carpet/lookup_carpetid":950,
"../contour/set_contours":996,"../heatmap/clean_2d_array":1036,"../heatmap/convert_column_xyz":1038,"../heatmap/find_empties":1040,"../heatmap/interp2d":1043,"../heatmap/make_bound_array":1044,"./defaults":1001}],1001:[function(b,D,G){var r=b("../../lib"),n=b("../heatmap/xyz_defaults"),p=b("./attributes"),k=b("../contour/constraint_defaults"),a=b("../contour/contours_defaults"),e=b("../contour/style_defaults");D.exports=function(f,l,m,c){function d(h,q){return r.coerce(f,l,p,h,q)}function g(h){return r.coerce2(f,
l,p,h)}d("carpet");f.a&&f.b?n(f,l,d,c,"a","b")?(d("text"),"constraint"===d("contours.type")?k(f,l,d,c,m,{hasHover:!1}):(a(f,l,d,g),e(f,l,d,c,{hasHover:!1}))):l.visible=!1:(l._defaultColor=m,l._length=null)}},{"../../lib":749,"../contour/constraint_defaults":982,"../contour/contours_defaults":984,"../contour/style_defaults":998,"../heatmap/xyz_defaults":1048,"./attributes":999}],1002:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../contour/colorbar"),
calc:b("./calc"),plot:b("./plot"),style:b("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg carpet contour symbols showLegend hasLines carpetDependent noHover noSortingByValue".split(" "),meta:{}}},{"../../plots/cartesian":810,"../contour/colorbar":980,"../contour/style":997,"./attributes":999,"./calc":1E3,"./defaults":1001,"./plot":1003}],1003:[function(b,D,G){function r(F,H){var J,I,M;for(J=0;J<F.length;J++){var E=F[J];
var L=E.pedgepaths=[];var P=E.ppaths=[];for(I=0;I<E.edgepaths.length;I++){var N=E.edgepaths[I];var Q=[];for(M=0;M<N.length;M++)Q[M]=H(N[M]);L.push(Q)}for(I=0;I<E.paths.length;I++){N=E.paths[I];L=[];for(M=0;M<N.length;M++)L[M]=H(N[M]);P.push(L)}}}function n(F,H,J,I,M,E,L){var P=q.ensureSingle(F,"g","contourlines"),N=!1!==M.showlines,Q=M.showlabels,O=N&&Q,T=w.createLines(P,N||Q,H);P=w.createLineClip(P,O,J,I.trace.uid);F=F.selectAll("g.contourlabels").data(Q?[0]:[]);F.exit().remove();F.enter().append("g").classed("contourlabels",
!0);if(Q){var V=E.xaxis._length;E=E.yaxis._length;var Z=[[[0,0],[V,0],[V,E],[0,E]]],aa=[];q.clearLocationCache();var Y=w.labelFormatter(J,I),ea=h.tester.append("text").attr("data-notex",1).call(h.font,M.labelfont),ca={left:0,right:V,center:V/2,top:0,bottom:E,middle:E/2},ba=A.LABELDISTANCE*Math.sqrt(V*V+E*E)/Math.max(1,H.length/A.LABELINCREASE);T.each(function(ka){var qa=w.calcTextOpts(ka.level,Y,ea,J);c.select(this).selectAll("path").each(function(pa){var oa=q.getVisibleSegment(this,ca,qa.height/
2);if(oa&&(p(this,pa,ka,oa,L,qa.height),!(oa.len<(qa.width+qa.height)*A.LABELMIN))){pa=Math.min(Math.ceil(oa.len/ba),A.LABELMAX);for(var ja=0;ja<pa;ja++){var ra=w.findBestTextLocation(this,oa,qa,aa,ca);if(!ra)break;w.addLabelData(ra,qa,aa,Z)}}})});ea.remove();w.drawLabels(F,aa,J,P,O?Z:null)}Q&&!N&&T.remove()}function p(F,H,J,I,M,E){function L(Z,aa){var Y=0;if(.1>Math.abs(Z[0]-Q)||.1>Math.abs(Z[0]-O)){var ea=a(M.dxydb_rough(Z[0],Z[1],.1));Y=Math.max(Y,E*e(aa,ea)/2)}if(.1>Math.abs(Z[1]-T)||.1>Math.abs(Z[1]-
V))ea=a(M.dxyda_rough(Z[0],Z[1],.1)),Y=Math.max(Y,E*e(aa,ea)/2);return Y}for(var P,N=0;N<J.pedgepaths.length;N++)H===J.pedgepaths[N]&&(P=J.edgepaths[N]);if(P){var Q=M.a[0],O=M.a[M.a.length-1],T=M.b[0],V=M.b[M.b.length-1];H=k(F,0,1);F=k(F,I.total,I.total-1);H=L(P[0],H);P=I.total-L(P[P.length-1],F);I.min<H&&(I.min=H);I.max>P&&(I.max=P);I.len=I.max-I.min}}function k(F,H,J){H=F.getPointAtLength(H);J=F.getPointAtLength(J);F=J.x-H.x;H=J.y-H.y;J=Math.sqrt(F*F+H*H);return[F/J,H/J]}function a(F){var H=Math.sqrt(F[0]*
F[0]+F[1]*F[1]);return[F[0]/H,F[1]/H]}function e(F,H){F=Math.abs(F[0]*H[0]+F[1]*H[1]);return Math.sqrt(1-F*F)/F}function f(F,H,J,I,M,E){var L,P=q.ensureSingle(F,"g","contourbg").selectAll("path").data("fill"!==E||M?[]:[0]);P.enter().append("path");P.exit().remove();var N=[];for(L=0;L<H.length;L++)F=H[L],M=d([],F.x,J.c2p),E=d([],F.y,I.c2p),N.push(g(M,E,F.bicubic));P.attr("d","M"+N.join("L")+"Z").style("stroke","none")}function l(F,H,J,I,M,E,L,P,N,Q,O){(Q="fill"===Q)&&B(M,F.contours);H=q.ensureSingle(H,
"g","contourfill").selectAll("path").data(Q?M:[]);H.enter().append("path");H.exit().remove();H.each(function(T){(T=(T.prefixBoundary?O:"")+m(F,T,E,L,P,N,J,I))?c.select(this).attr("d",T).style("stroke","none"):c.select(this).remove()})}function m(F,H,J,I,M,E,L,P){function N(qa){return Math.abs(qa[0]-J[2][0])<ea}function Q(qa,pa){var oa="";if(Math.abs(qa[1]-J[0][1])<ca&&!N(qa)||Math.abs(qa[1]-J[2][1])<ca&&!(Math.abs(qa[0]-J[0][0])<ea)){var ja=M.aaxis;var ra=u(M,E,[qa[0],pa[0]],.5*(qa[1]+pa[1]))}else ja=
M.baxis,ra=u(M,E,.5*(qa[0]+pa[0]),[qa[1],pa[1]]);for(qa=1;qa<ra.length;qa++)for(oa+=ja.smoothing?"C":"L",pa=0;pa<ra[qa].length;pa++){var ha=ra[qa][pa];oa+=[L.c2p(ha[0]),P.c2p(ha[1])]+" "}return oa}var O="",T=H.edgepaths.map(function(qa,pa){return pa}),V=!0,Z,aa,Y,ea=1E-4*Math.abs(J[0][0]-J[2][0]),ca=1E-4*Math.abs(J[0][1]-J[2][1]);F=0;for(Z=null;T.length;){var ba=H.edgepaths[F][0];Z&&(O+=Q(Z,ba));Z=h.smoothopen(H.edgepaths[F].map(I),H.smoothing);O+=V?Z:Z.replace(/^M/,"L");T.splice(T.indexOf(F),1);
Z=H.edgepaths[F][H.edgepaths[F].length-1];ba=-1;for(V=0;4>V;V++){if(!Z){q.log("Missing end?",F,H);break}Math.abs(Z[1]-J[0][1])<ca&&!N(Z)?aa=J[1]:Math.abs(Z[0]-J[0][0])<ea?aa=J[0]:Math.abs(Z[1]-J[2][1])<ca?aa=J[3]:N(Z)&&(aa=J[2]);for(Y=0;Y<H.edgepaths.length;Y++){var ka=H.edgepaths[Y][0];Math.abs(Z[0]-aa[0])<ea?Math.abs(Z[0]-ka[0])<ea&&0<=(ka[1]-Z[1])*(aa[1]-ka[1])&&(aa=ka,ba=Y):Math.abs(Z[1]-aa[1])<ca?Math.abs(Z[1]-ka[1])<ca&&0<=(ka[0]-Z[0])*(aa[0]-ka[0])&&(aa=ka,ba=Y):q.log("endpt to newendpt is not vert. or horz.",
Z,aa,ka)}if(0<=ba)break;O+=Q(Z,aa);Z=aa}if(ba===H.edgepaths.length){q.log("unclosed perimeter path");break}F=ba;if(V=-1===T.indexOf(F))F=T[0],O+=Q(Z,aa)+"Z",Z=null}for(F=0;F<H.paths.length;F++)O+=h.smoothclosed(H.paths[F].map(I),H.smoothing);return O}var c=b("d3"),d=b("../carpet/map_1d_array"),g=b("../carpet/makepath"),h=b("../../components/drawing"),q=b("../../lib"),t=b("../contour/make_crossings"),v=b("../contour/find_all_paths"),w=b("../contour/plot"),A=b("../contour/constants"),z=b("../contour/convert_to_constraints"),
y=b("../contour/empty_pathinfo"),B=b("../contour/close_boundaries"),C=b("../carpet/lookup_carpetid"),u=b("../carpet/axis_aligned_line");D.exports=function(F,H,J,I){var M=H.xaxis,E=H.yaxis;q.makeTraceGroups(I,J,"contour").each(function(L){function P(ja){ja=O.ab2xy(ja[0],ja[1],!0);return[M.c2p(ja[0]),E.c2p(ja[1])]}var N=c.select(this);L=L[0];var Q=L.trace,O=Q._carpetTrace=C(F,Q),T=F.calcdata[O.index][0];if(O.visible&&"legendonly"!==O.visible){var V=L.a,Z=L.b,aa=Q.contours,Y=y(aa,H,L),ea="constraint"===
aa.type,ca=aa._operation,ba=ea?"\x3d"===ca?"lines":"fill":aa.coloring,ka=[[V[0],Z[Z.length-1]],[V[V.length-1],Z[Z.length-1]],[V[V.length-1],Z[0]],[V[0],Z[0]]];t(Y);v(Y,1E-8*(V[V.length-1]-V[0]),1E-8*(Z[Z.length-1]-Z[0]));V=Y;"constraint"===aa.type&&(V=z(Y,ca));r(Y,P);var qa,pa=[];for(qa=T.clipsegments.length-1;0<=qa;qa--){ca=T.clipsegments[qa];Z=d([],ca.x,M.c2p);var oa=d([],ca.y,E.c2p);Z.reverse();oa.reverse();pa.push(g(Z,oa,ca.bicubic))}ca="M"+pa.join("L")+"Z";f(N,T.clipsegments,M,E,ea,ba);l(Q,N,
M,E,V,ka,P,O,T,ba,ca);n(N,Y,F,L,aa,H,O);h.setClipUrl(N,O._clipPathId,F)}})}},{"../../components/drawing":637,"../../lib":749,"../carpet/axis_aligned_line":934,"../carpet/lookup_carpetid":950,"../carpet/makepath":951,"../carpet/map_1d_array":952,"../contour/close_boundaries":979,"../contour/constants":981,"../contour/convert_to_constraints":985,"../contour/empty_pathinfo":987,"../contour/find_all_paths":989,"../contour/make_crossings":994,"../contour/plot":995,d3:169}],1004:[function(b,D,G){G=b("../../components/colorscale/attributes");
var r=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../plots/attributes"),p=b("../scattermapbox/attributes");b=b("../../lib/extend").extendFlat;D.exports=b({lon:p.lon,lat:p.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:p.text,hovertext:p.hovertext,hoverinfo:b({},n.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:r(),showlegend:b({},n.showlegend,{dflt:!1})},
G("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scattermapbox/attributes":1219}],1005:[function(b,D,G){var r=b("fast-isnumeric"),n=b("../../lib").isArrayOrTypedArray,p=b("../../constants/numerical").BADNUM,k=b("../../components/colorscale/calc"),a=b("../../lib")._;D.exports=function(e,f){for(var l=f._length,m=Array(l),c=f.z,d=n(c)&&c.length,g=0;g<l;g++){var h=m[g]=
{},q=f.lon[g],t=f.lat[g];h.lonlat=r(q)&&r(t)?[+q,+t]:[p,p];d&&(q=c[g],h.z=r(q)?q:p)}k(e,f,{vals:d?c:[0,1],containerStr:"",cLetter:"z"});l&&(m[0].t={labels:{lat:a(e,"lat:")+" ",lon:a(e,"lon:")+" "}});return m}},{"../../components/colorscale/calc":623,"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],1006:[function(b,D,G){var r=b("fast-isnumeric"),n=b("../../lib"),p=b("../../components/color"),k=b("../../components/colorscale"),a=b("../../constants/numerical").BADNUM,e=b("../../lib/geojson_utils").makeBlank;
D.exports=function(f){var l=f[0].trace,m=!0===l.visible&&0!==l._length,c=l._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:e()};if(!m)return c;m=[];var d,g=l.z,h=l.radius;g=n.isArrayOrTypedArray(g)&&g.length;var q=n.isArrayOrTypedArray(h);for(d=0;d<f.length;d++){var t=f[d],v=t.lonlat;if(v[0]!==a){var w={};g&&(t=t.z,w.z=t!==a?t:0);q&&(w.r=r(h[d])&&0<h[d]?+h[d]:0);m.push({type:"Feature",geometry:{type:"Point",coordinates:v},properties:w})}}f=k.extractOpts(l);h=f.reversescale?k.flipScale(f.colorscale):
f.colorscale;d=h[0][1];v=["interpolate",["linear"],["heatmap-density"],0,1>p.opacity(d)?d:p.addOpacity(d,0)];for(d=1;d<h.length;d++)v.push(h[d][0],h[d][1]);d=["interpolate",["linear"],["get","z"],f.min,0,f.max,1];n.extendFlat(c.heatmap.paint,{"heatmap-weight":g?d:1/(f.max-f.min),"heatmap-color":v,"heatmap-radius":q?{type:"identity",property:"r"}:l.radius,"heatmap-opacity":l.opacity});c.geojson={type:"FeatureCollection",features:m};c.heatmap.layout.visibility="visible";return c}},{"../../components/color":615,
"../../components/colorscale":627,"../../constants/numerical":724,"../../lib":749,"../../lib/geojson_utils":743,"fast-isnumeric":241}],1007:[function(b,D,G){var r=b("../../lib"),n=b("../../components/colorscale/defaults"),p=b("./attributes");D.exports=function(k,a,e,f){function l(c,d){return r.coerce(k,a,p,c,d)}e=l("lon")||[];var m=l("lat")||[];(e=Math.min(e.length,m.length))?(a._length=e,l("z"),l("radius"),l("below"),l("text"),l("hovertext"),l("hovertemplate"),n(k,a,f,l,{prefix:"",cLetter:"z"})):
a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":1004}],1008:[function(b,D,G){D.exports=function(r,n){r.lon=n.lon;r.lat=n.lat;r.z=n.z;return r}},{}],1009:[function(b,D,G){var r=b("../../lib"),n=b("../../plots/cartesian/axes"),p=b("../scattermapbox/hover");D.exports=function(k,a,e){if(k=p(k,a,e)){k=k[0];var f=k.cd;a=f[0].trace;e=f[k.index];delete k.color;if("z"in e){var l=k.subplot.mockAxis;k.z=e.z;k.zLabel=n.tickText(l,l.c2l(e.z),"hover").text}f=f[0].t.labels;
if(a.hovertemplate)a=void 0;else{l=(e.hi||a.hoverinfo).split("+");var m=-1!==l.indexOf("all"),c=-1!==l.indexOf("lon"),d=-1!==l.indexOf("lat"),g=e.lonlat,h=[];m||c&&d?h.push("("+(g[0]+"°, ")+(g[1]+"°)")):c?h.push(f.lon+(g[0]+"°")):d&&h.push(f.lat+(g[1]+"°"));(m||-1!==l.indexOf("text"))&&r.fillText(e,a,h);a=h.join("\x3cbr\x3e")}k.extraText=a;return[k]}}},{"../../lib":749,"../../plots/cartesian/axes":797,"../scattermapbox/hover":1224}],1010:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),
colorbar:b("../heatmap/colorbar"),formatLabels:b("../scattermapbox/format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),getBelow:function(r,n){r=n.getMapLayers();for(n=0;n<r.length;n++){var p=r[n],k=p.id;if("symbol"===p.type&&"string"===typeof k&&-1===k.indexOf("plotly-"))return k}},moduleType:"trace",name:"densitymapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":854,
"../heatmap/colorbar":1037,"../scattermapbox/format_labels":1223,"./attributes":1004,"./calc":1005,"./defaults":1007,"./event_data":1008,"./hover":1009,"./plot":1011}],1011:[function(b,D,G){function r(k,a){this.type="densitymapbox";this.subplot=k;this.uid=a;this.sourceId="source-"+a;this.layerList=[["heatmap",p+a+"-heatmap"]];this.below=null}var n=b("./convert"),p=b("../../plots/mapbox/constants").traceLayerPrefix;b=r.prototype;b.update=function(k){var a=this.subplot,e=this.layerList;k=n(k);var f=
a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(k.geojson);f!==this.below&&(this._removeLayers(),this._addLayers(k,f),this.below=f);for(f=0;f<e.length;f++){var l=e[f],m=l[1];l=k[l[0]];a.setOptions(m,"setLayoutProperty",l.layout);"visible"===l.layout.visibility&&a.setOptions(m,"setPaintProperty",l.paint)}};b._addLayers=function(k,a){for(var e=this.subplot,f=this.layerList,l=this.sourceId,m=0;m<f.length;m++){var c=f[m],d=c[0],g=k[d];e.addLayer({type:d,id:c[1],source:l,layout:g.layout,
paint:g.paint},a)}};b._removeLayers=function(){for(var k=this.subplot.map,a=this.layerList,e=a.length-1;0<=e;e--)k.removeLayer(a[e][1])};b.dispose=function(){var k=this.subplot.map;this._removeLayers();k.removeSource(this.sourceId)};D.exports=function(k,a){var e=a[0].trace,f=new r(k,e.uid),l=f.sourceId;a=n(a);e=f.below=k.belowLookup["trace-"+e.uid];k.map.addSource(l,{type:"geojson",data:a.geojson});f._addLayers(a,e);return f}},{"../../plots/mapbox/constants":852,"./convert":1006}],1012:[function(b,
D,G){var r=b("../../lib");D.exports=function(n,p){for(var k=0;k<n.length;k++)n[k].i=k;r.mergeArray(p.text,n,"tx");r.mergeArray(p.hovertext,n,"htx");if(p=p.marker)if(r.mergeArray(p.opacity,n,"mo"),r.mergeArray(p.color,n,"mc"),p=p.line)r.mergeArray(p.color,n,"mlc"),r.mergeArrayCastPositive(p.width,n,"mlw")}},{"../../lib":749}],1013:[function(b,D,G){G=b("../bar/attributes");var r=b("../scatter/attributes").line,n=b("../../plots/attributes"),p=b("../../plots/template_attributes").hovertemplateAttrs,k=
b("../../plots/template_attributes").texttemplateAttrs,a=b("./constants"),e=b("../../lib/extend").extendFlat;b=b("../../components/color");D.exports={x:G.x,x0:G.x0,dx:G.dx,y:G.y,y0:G.y0,dy:G.dy,hovertext:G.hovertext,hovertemplate:p({},{keys:a.eventDataKeys}),hoverinfo:e({},n.hoverinfo,{flags:"name;x;y;text;percent initial;percent previous;percent total".split(";")}),textinfo:{valType:"flaglist",flags:"label;text;percent initial;percent previous;percent total;value".split(";"),extras:["none"],editType:"plot",
arrayOk:!1},texttemplate:k({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:G.text,textposition:e({},G.textposition,{dflt:"auto"}),insidetextanchor:e({},G.insidetextanchor,{dflt:"middle"}),textangle:e({},G.textangle,{dflt:0}),textfont:G.textfont,insidetextfont:G.insidetextfont,outsidetextfont:G.outsidetextfont,constraintext:G.constraintext,cliponaxis:G.cliponaxis,orientation:e({},G.orientation,{}),offset:e({},G.offset,{arrayOk:!1}),width:e({},G.width,{arrayOk:!1}),marker:G.marker,
connector:{fillcolor:{valType:"color",editType:"style"},line:{color:e({},r.color,{dflt:b.defaultLine}),width:e({},r.width,{dflt:0,editType:"plot"}),dash:r.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:G.offsetgroup,alignmentgroup:G.alignmentgroup}},{"../../components/color":615,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../bar/attributes":890,"../scatter/attributes":1155,"./constants":1015}],
1014:[function(b,D,G){function r(e){return e===a?0:e}var n=b("../../plots/cartesian/axes"),p=b("./arrays_to_calcdata"),k=b("../scatter/calc_selection"),a=b("../../constants/numerical").BADNUM;D.exports=function(e,f){var l=n.getFromId(e,f.xaxis||"x"),m=n.getFromId(e,f.yaxis||"y");"h"===f.orientation?(e=l.makeCalcdata(f,"x"),l=m.makeCalcdata(f,"y")):(e=m.makeCalcdata(f,"y"),l=l.makeCalcdata(f,"x"));var c=Math.min(l.length,e.length),d=Array(c);f._base=[];for(m=0;m<c;m++){0>e[m]&&(e[m]=a);var g=!1;e[m]!==
a&&m+1<c&&e[m+1]!==a&&(g=!0);g=d[m]={p:l[m],s:e[m],cNext:g};f._base[m]=-.5*g.s;f.ids&&(g.id=String(f.ids[m]));0===m&&(d[0].vTotal=0);d[0].vTotal+=r(g.s);g.begR=r(g.s)/r(d[0].s)}for(m=0;m<c;m++)if(g=d[m],g.s!==a){g.sumR=g.s/d[0].vTotal;g.difR=void 0!==h?g.s/h:1;var h=g.s}p(d,f);k(d,f);return d}},{"../../constants/numerical":724,"../../plots/cartesian/axes":797,"../scatter/calc_selection":1157,"./arrays_to_calcdata":1012}],1015:[function(b,D,G){D.exports={eventDataKeys:["percentInitial","percentPrevious",
"percentTotal"]}},{}],1016:[function(b,D,G){var r=b("../bar/cross_trace_calc").setGroupPositions;D.exports=function(n,p){var k=n._fullLayout,a=n._fullData,e=n.calcdata,f=p.xaxis,l=p.yaxis;p=[];var m=[],c=[],d;for(d=0;d<a.length;d++){var g=a[d];var h="h"===g.orientation;!0===g.visible&&g.xaxis===f._id&&g.yaxis===l._id&&"funnel"===g.type&&(g=e[d],h?c.push(g):m.push(g),p.push(g))}k={mode:k.funnelmode,norm:k.funnelnorm,gap:k.funnelgap,groupgap:k.funnelgroupgap};r(n,f,l,m,k);r(n,l,f,c,k);for(d=0;d<p.length;d++)for(g=
p[d],n=0;n<g.length;n++)n+1<g.length&&(g[n].nextP0=g[n+1].p0,g[n].nextS0=g[n+1].s0,g[n].nextP1=g[n+1].p1,g[n].nextS1=g[n+1].s1)}},{"../bar/cross_trace_calc":893}],1017:[function(b,D,G){function r(l){l=n.isArrayOrTypedArray(l)?"#000":l;return f.addOpacity(l,.5*f.opacity(l))}var n=b("../../lib"),p=b("../bar/defaults").handleGroupingDefaults,k=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),e=b("./attributes"),f=b("../../components/color");D.exports={supplyDefaults:function(l,m,c,d){function g(t,
v){return n.coerce(l,m,e,t,v)}if(a(l,m,d,g)){g("orientation",m.y&&!m.x?"v":"h");g("offset");g("width");var h=g("text");g("hovertext");g("hovertemplate");var q=g("textposition");k(l,m,d,g,q,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0});"none"===m.textposition||m.texttemplate||g("textinfo",Array.isArray(h)?"text+value":"value");c=g("marker.color",c);g("marker.line.color",f.defaultLine);g("marker.line.width");
g("connector.visible")&&(g("connector.fillcolor",r(c)),g("connector.line.width")&&(g("connector.line.color"),g("connector.line.dash")))}else m.visible=!1},crossTraceDefaults:function(l,m){function c(q){return n.coerce(g._input,g,e,q)}if("group"===m.funnelmode)for(var d=0;d<l.length;d++){var g=l[d];var h=g._input;p(h,g,m,c)}}}},{"../../components/color":615,"../../lib":749,"../bar/defaults":894,"../scatter/xy_defaults":1181,"./attributes":1013}],1018:[function(b,D,G){D.exports=function(r,n){r.x="xVal"in
n?n.xVal:n.x;r.y="yVal"in n?n.yVal:n.y;"percentInitial"in n&&(r.percentInitial=n.percentInitial);"percentPrevious"in n&&(r.percentPrevious=n.percentPrevious);"percentTotal"in n&&(r.percentTotal=n.percentTotal);n.xa&&(r.xaxis=n.xa);n.ya&&(r.yaxis=n.ya);return r}},{}],1019:[function(b,D,G){var r=b("../../components/color").opacity,n=b("../bar/hover").hoverOnBars,p=b("../../lib").formatPercent;D.exports=function(k,a,e,f){if(k=n(k,a,e,f)){a=k.cd;e=a[0].trace;a=a[k.index];k[("h"===e.orientation?"x":"y")+
"LabelVal"]=a.s;k.percentInitial=a.begR;k.percentInitialLabel=p(a.begR,1);k.percentPrevious=a.difR;k.percentPreviousLabel=p(a.difR,1);k.percentTotal=a.sumR;k.percentTotalLabel=p(a.sumR,1);var l=a.hi||e.hoverinfo;f=[];if(l&&"none"!==l&&"skip"!==l){var m="all"===l;l=l.split("+");(m||-1!==l.indexOf("percent initial"))&&f.push(k.percentInitialLabel+" of initial");(m||-1!==l.indexOf("percent previous"))&&f.push(k.percentPreviousLabel+" of previous");(m||-1!==l.indexOf("percent total"))&&f.push(k.percentTotalLabel+
" of total")}k.extraText=f.join("\x3cbr\x3e");m=e.marker;e=a.mc||m.color;f=a.mlc||m.line.color;a=a.mlw||m.line.width;a=r(e)?e:r(f)&&a?f:void 0;k.color=a;return[k]}}},{"../../components/color":615,"../../lib":749,"../bar/hover":897}],1020:[function(b,D,G){D.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),
plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,"../bar/select":902,"./attributes":1013,"./calc":1014,"./cross_trace_calc":1016,"./defaults":1017,"./event_data":1018,"./hover":1019,"./layout_attributes":1021,"./layout_defaults":1022,
"./plot":1023,"./style":1024}],1021:[function(b,D,G){D.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1022:[function(b,D,G){var r=b("../../lib"),n=b("./layout_attributes");D.exports=function(p,k,a){for(var e=!1,f=0;f<a.length;f++){var l=a[f];if(l.visible&&"funnel"===l.type){e=!0;break}}e&&(r.coerce(p,k,n,"funnelmode",
void 0),r.coerce(p,k,n,"funnelgap",.2),r.coerce(p,k,n,"funnelgroupgap",void 0))}},{"../../lib":749,"./layout_attributes":1021}],1023:[function(b,D,G){function r(c,d,g,h){var q=d.xaxis,t=d.yaxis;a.makeTraceGroups(h,g,"trace bars").each(function(v){var w=k.select(this);v=v[0].trace;w=a.ensureSingle(w,"g","regions");if(v.connector&&v.connector.visible){var A="h"===v.orientation;w=w.selectAll("g.region").data(a.identity);w.enter().append("g").classed("region",!0);w.exit().remove();var z=w.size();w.each(function(y,
B){if(B===z-1||y.cNext){B=p(y,q,t,A);y=B[0];B=B[1];var C="";y[0]!==f&&B[0]!==f&&y[1]!==f&&B[1]!==f&&y[2]!==f&&B[2]!==f&&y[3]!==f&&B[3]!==f&&(C=A?C+("M"+y[0]+","+B[1]+"L"+y[2]+","+B[2]+"H"+y[3]+"L"+y[1]+","+B[1]+"Z"):C+("M"+y[1]+","+B[1]+"L"+y[2]+","+B[3]+"V"+B[2]+"L"+y[1]+","+B[0]+"Z"));""===C&&(C="M0,0Z");a.ensureSingle(k.select(this),"path").attr("d",C).call(e.setClipUrl,d.layerClipId,c)}})}else w.remove()})}function n(c,d,g,h){var q=d.xaxis,t=d.yaxis;a.makeTraceGroups(h,g,"trace bars").each(function(v){var w=
k.select(this);v=v[0].trace;w=a.ensureSingle(w,"g","lines");if(v.connector&&v.connector.visible&&v.connector.line.width){var A="h"===v.orientation;w=w.selectAll("g.line").data(a.identity);w.enter().append("g").classed("line",!0);w.exit().remove();var z=w.size();w.each(function(y,B){if(B===z-1||y.cNext){B=p(y,q,t,A);y=B[0];B=B[1];var C="";void 0!==y[3]&&void 0!==B[3]&&(A?(C+="M"+y[0]+","+B[1]+"L"+y[2]+","+B[2],C+="M"+y[1]+","+B[1]+"L"+y[3]+","+B[2]):(C+="M"+y[1]+","+B[1]+"L"+y[2]+","+B[3],C+="M"+y[1]+
","+B[0]+"L"+y[2]+","+B[2]));""===C&&(C="M0,0Z");a.ensureSingle(k.select(this),"path").attr("d",C).call(e.setClipUrl,d.layerClipId,c)}})}else w.remove()})}function p(c,d,g,h){var q=[],t=[],v=h?d:g;d=h?g:d;q[0]=v.c2p(c.s0,!0);t[0]=d.c2p(c.p0,!0);q[1]=v.c2p(c.s1,!0);t[1]=d.c2p(c.p1,!0);q[2]=v.c2p(c.nextS0,!0);t[2]=d.c2p(c.nextP0,!0);q[3]=v.c2p(c.nextS1,!0);t[3]=d.c2p(c.nextP1,!0);return h?[q,t]:[t,q]}var k=b("d3"),a=b("../../lib"),e=b("../../components/drawing"),f=b("../../constants/numerical").BADNUM,
l=b("../bar/plot"),m=b("../bar/uniform_text").clearMinTextSize;D.exports=function(c,d,g,h){var q=c._fullLayout;m("funnel",q);r(c,d,g,h);n(c,d,g,h);l.plot(c,d,g,h,{mode:q.funnelmode,norm:q.funnelmode,gap:q.funnelgap,groupgap:q.funnelgroupgap})}},{"../../components/drawing":637,"../../constants/numerical":724,"../../lib":749,"../bar/plot":901,"../bar/uniform_text":906,d3:169}],1024:[function(b,D,G){var r=b("d3"),n=b("../../components/drawing"),p=b("../../components/color"),k=b("../../constants/interactions").DESELECTDIM;
G=b("../bar/style");var a=b("../bar/uniform_text").resizeText,e=G.styleTextPoints;D.exports={style:function(f,l,m){l=m?m:r.select(f).selectAll("g.funnellayer").selectAll("g.trace");a(f,l,"funnel");l.style("opacity",function(c){return c[0].trace.opacity});l.each(function(c){var d=r.select(this),g=c[0].trace;d.selectAll(".point \x3e path").each(function(h){if(!h.isBlank){var q=g.marker;r.select(this).call(p.fill,h.mc||q.color).call(p.stroke,h.mlc||q.line.color).call(n.dashLine,q.line.dash,h.mlw||q.line.width).style("opacity",
g.selectedpoints&&!h.selected?k:1)}});e(d,g,f);d.selectAll(".regions").each(function(){r.select(this).selectAll("path").style("stroke-width",0).call(p.fill,g.connector.fillcolor)});d.selectAll(".lines").each(function(){var h=g.connector.line;n.lineGroupStyle(r.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},{"../../components/color":615,"../../components/drawing":637,"../../constants/interactions":723,"../bar/style":904,"../bar/uniform_text":906,d3:169}],1025:[function(b,D,G){G=b("../pie/attributes");
var r=b("../../plots/attributes"),n=b("../../plots/domain").attributes,p=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../../plots/template_attributes").texttemplateAttrs;b=b("../../lib/extend").extendFlat;D.exports={labels:G.labels,label0:G.label0,dlabel:G.dlabel,values:G.values,marker:{colors:G.marker.colors,line:{color:b({},G.marker.line.color,{dflt:null}),width:b({},G.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:G.text,hovertext:G.hovertext,scalegroup:b({},
G.scalegroup,{}),textinfo:b({},G.textinfo,{flags:["label","text","value","percent"]}),texttemplate:k({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:b({},r.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:p({},{keys:["label","color","value","text","percent"]}),textposition:b({},G.textposition,{values:["inside","none"],dflt:"inside"}),textfont:G.textfont,insidetextfont:G.insidetextfont,title:{text:G.title.text,font:G.title.font,position:b({},
G.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:n({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/template_attributes":875,"../pie/attributes":1129}],1026:[function(b,D,G){var r=b("../../plots/plots");G.name="funnelarea";G.plot=
function(n,p,k,a){r.plotBasePlot(G.name,n,p,k,a)};G.clean=function(n,p,k,a){r.cleanBasePlot(G.name,n,p,k,a)}},{"../../plots/plots":860}],1027:[function(b,D,G){var r=b("../pie/calc");D.exports={calc:function(n,p){return r.calc(n,p)},crossTraceCalc:function(n){r.crossTraceCalc(n,{type:"funnelarea"})}}},{"../pie/calc":1131}],1028:[function(b,D,G){var r=b("../../lib"),n=b("./attributes"),p=b("../../plots/domain").defaults,k=b("../bar/defaults").handleText,a=b("../pie/defaults").handleLabelsAndValues;
D.exports=function(e,f,l,m){function c(h,q){return r.coerce(e,f,n,h,q)}l=c("labels");var d=c("values");l=a(l,d);d=l.len;f._hasLabels=l.hasLabels;f._hasValues=l.hasValues;!f._hasLabels&&f._hasValues&&(c("label0"),c("dlabel"));if(d){f._length=d;c("marker.line.width")&&c("marker.line.color",m.paper_bgcolor);c("marker.colors");c("scalegroup");l=c("text");d=c("texttemplate");var g;d||(g=c("textinfo",Array.isArray(l)?"text+percent":"percent"));c("hovertext");c("hovertemplate");if(d||g&&"none"!==g)g=c("textposition"),
k(e,f,m,c,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});p(f,m,c);c("title.text")&&(c("title.position"),r.coerceFont(c,"title.font",m.font));c("aspectratio");c("baseratio")}else f.visible=!1}},{"../../lib":749,"../../plots/domain":824,"../bar/defaults":894,"../pie/defaults":1132,"./attributes":1025}],1029:[function(b,D,G){D.exports={moduleType:"trace",name:"funnelarea",basePlotModule:b("./base_plot"),categories:["pie-like",
"funnelarea","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style"),styleOne:b("../pie/style_one"),meta:{}}},{"../pie/style_one":1140,"./attributes":1025,"./base_plot":1026,"./calc":1027,"./defaults":1028,"./layout_attributes":1030,"./layout_defaults":1031,"./plot":1032,"./style":1033}],1030:[function(b,
D,G){b=b("../pie/layout_attributes").hiddenlabels;D.exports={hiddenlabels:b,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":1136}],1031:[function(b,D,G){var r=b("../../lib"),n=b("./layout_attributes");D.exports=function(p,k){r.coerce(p,k,n,"hiddenlabels",void 0);r.coerce(p,k,n,"funnelareacolorway",k.colorway);r.coerce(p,k,n,"extendfunnelareacolors",void 0)}},{"../../lib":749,"./layout_attributes":1030}],
1032:[function(b,D,G){function r(A,z){return"l"+(z[0]-A[0])+","+(z[1]-A[1])}function n(A,z){return[.5*(A[0]+z[0]),.5*(A[1]+z[1])]}function p(A){function z(){var E=Math.sqrt(F);return[E,-E]}if(A.length){var y=A[0],B=y.trace,C=B.aspectratio;B=B.baseratio;.999<B&&(B=.999);B=Math.pow(B,2);var u=y.vTotal,F=u*B/(1-B)/u;B=[];B.push(z());var H;for(H=A.length-1;-1<H;H--){var J=A[H];J.hidden||(F+=J.v/u,B.push(z()))}u=Infinity;var I=-Infinity;for(H=0;H<B.length;H++)J=B[H],u=Math.min(u,J[1]),I=Math.max(I,J[1]);
for(H=0;H<B.length;H++)B[H][1]-=(I+u)/2;H=y.r;u=(I-u)/2;J=H/B[B.length-1][0];C*=H/u;y.r=C*u;for(H=0;H<B.length;H++)B[H][0]*=J,B[H][1]*=C;J=B[0];y=[-J[0],J[1]];C=[J[0],J[1]];u=0;for(H=A.length-1;-1<H;H--)if(J=A[H],!J.hidden){u+=1;I=B[u][0];var M=B[u][1];J.TL=[-I,M];J.TR=[I,M];J.BL=y;J.BR=C;J.pxmid=n(J.TR,J.BR);y=J.TL;C=J.TR}}}var k=b("d3"),a=b("../../components/drawing"),e=b("../../lib"),f=b("../../lib/svg_text_utils"),l=b("../bar/plot").toMoveInsideBar;G=b("../bar/uniform_text");var m=G.recordMinTextSize,
c=G.clearMinTextSize,d=b("../pie/helpers");b=b("../pie/plot");var g=b.attachFxHandlers,h=b.determineInsideTextFont,q=b.layoutAreas,t=b.prerenderTitles,v=b.positionTitleOutside,w=b.formatSliceLabel;D.exports=function(A,z){var y=A._fullLayout;c("funnelarea",y);t(z,A);q(z,y._size);e.makeTraceGroups(y._funnelarealayer,z,"trace").each(function(B){var C=k.select(this),u=B[0],F=u.trace;p(B);C.each(function(){var H=k.select(this).selectAll("g.slice").data(B);H.enter().append("g").classed("slice",!0);H.exit().remove();
H.each(function(J,I){if(J.hidden)k.select(this).selectAll("path,g").remove();else{J.pointNumber=J.i;J.curveNumber=F.index;var M=u.cx,E=u.cy,L=k.select(this),P=L.selectAll("path.surface").data([J]);P.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});L.call(g,A,B);var N="M"+(M+J.TR[0])+","+(E+J.TR[1])+r(J.TR,J.BR)+r(J.BR,J.BL)+r(J.BL,J.TL)+"Z";P.attr("d",N);w(A,J,u);P=d.castOption(F.textposition,J.pts);L=L.selectAll("g.slicetext").data(J.text&&"none"!==P?[0]:[]);L.enter().append("g").classed("slicetext",
!0);L.exit().remove();L.each(function(){var Q=e.ensureSingle(k.select(this),"text","",function(V){V.attr("data-notex",1)}),O=e.ensureUniformFontSize(A,h(F,J,y.font));Q.text(J.text).attr({"class":"slicetext",transform:"","text-anchor":"middle"}).call(a.font,O).call(f.convertToTspans,A);var T=a.bBox(Q.node());T=l(Math.max(J.TL[0],J.BL[0])+M,Math.min(J.TR[0],J.BR[0])+M,Math.min(J.BL[1],J.BR[1])+E,Math.max(J.TL[1],J.TR[1])+E,T,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"});T.fontSize=O.size;
m(F.type,T,y);B[I].transform=T;Q.attr("transform",e.getTextTransform(T))})}});H=k.select(this).selectAll("g.titletext").data(F.title.text?[0]:[]);H.enter().append("g").classed("titletext",!0);H.exit().remove();H.each(function(){var J=e.ensureSingle(k.select(this),"text","",function(M){M.attr("data-notex",1)}),I=F.title.text;F._meta&&(I=e.templateString(I,F._meta));J.text(I).attr({"class":"titletext",transform:"","text-anchor":"middle"}).call(a.font,F.title.font).call(f.convertToTspans,A);I=v(u,y._size);
J.attr("transform","translate("+I.x+","+I.y+")"+(1>I.scale?"scale("+I.scale+")":"")+"translate("+I.tx+","+I.ty+")")})})})}},{"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../bar/plot":901,"../bar/uniform_text":906,"../pie/helpers":1134,"../pie/plot":1138,d3:169}],1033:[function(b,D,G){var r=b("d3"),n=b("../pie/style_one"),p=b("../bar/uniform_text").resizeText;D.exports=function(k){var a=k._fullLayout._funnelarealayer.selectAll(".trace");p(k,a,"funnelarea");a.each(function(e){var f=
e[0].trace;e=r.select(this);e.style({opacity:f.opacity});e.selectAll("path.surface").each(function(l){r.select(this).call(n,l,f)})})}},{"../bar/uniform_text":906,"../pie/style_one":1140,d3:169}],1034:[function(b,D,G){G=b("../scatter/attributes");var r=b("../../plots/attributes"),n=b("../../plots/template_attributes").hovertemplateAttrs,p=b("../../components/colorscale/attributes");b("../../constants/docs");b=b("../../lib/extend").extendFlat;D.exports=b({z:{valType:"data_array",editType:"calc"},x:b({},
G.x,{impliedEdits:{xtype:"array"}}),x0:b({},G.x0,{impliedEdits:{xtype:"scaled"}}),dx:b({},G.dx,{impliedEdits:{xtype:"scaled"}}),y:b({},G.y,{impliedEdits:{ytype:"array"}}),y0:b({},G.y0,{impliedEdits:{ytype:"scaled"}}),dy:b({},G.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",
values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"},hovertemplate:n(),showlegend:b({},r.showlegend,{dflt:!1})},{transforms:void 0},p("",{cLetter:"z",
autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../constants/docs":719,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1035:[function(b,D,G){function r(q){for(var t=[],v=q.length,w=0;w<v;w++){var A=q[w];A!==h&&t.push(A)}return t}function n(q,t,v){for(var w=[],A=-1,z=0;z<v.length;z++)if(t[z]!==h){A++;w[A]=[];for(var y=0;y<v[z].length;y++)q[y]!==h&&w[A].push(v[z][y])}return w}var p=b("../../registry"),k=
b("../../lib"),a=b("../../plots/cartesian/axes"),e=b("../histogram2d/calc"),f=b("../../components/colorscale/calc"),l=b("./convert_column_xyz"),m=b("./clean_2d_array"),c=b("./interp2d"),d=b("./find_empties"),g=b("./make_bound_array"),h=b("../../constants/numerical").BADNUM;D.exports=function(q,t){function v(O){C=t._input.zsmooth=t.zsmooth=!1;k.warn('cannot use zsmooth: "fast": '+O)}var w=a.getFromId(q,t.xaxis||"x"),A=a.getFromId(q,t.yaxis||"y"),z=p.traceIs(t,"contour"),y=p.traceIs(t,"histogram"),
B=p.traceIs(t,"gl2d"),C=z?"best":t.zsmooth,u;w._minDtick=0;A._minDtick=0;if(y){var F=e(q,t);var H=F.x;var J=F.x0;var I=F.dx;var M=F.y;var E=F.y0;var L=F.dy;var P=F.z}else P=t.z,k.isArray1D(P)?(l(t,w,A,"x","y",["z"]),H=t._x,M=t._y,P=t._z):(H=t._x=t.x?w.makeCalcdata(t,"x"):[],M=t._y=t.y?A.makeCalcdata(t,"y"):[]),J=t.x0,I=t.dx,E=t.y0,L=t.dy,P=m(P,t,w,A);if(w.rangebreaks||A.rangebreaks)P=n(H,M,P),y||(H=r(H),M=r(M),t._x=H,t._y=M);y||!z&&!t.connectgaps||(t._emptypoints=d(P),c(P,t._emptypoints));if("fast"===
C)if("log"===w.type||"log"===A.type)v("log axis found");else if(!y){if(H.length){var N=(H[H.length-1]-H[0])/(H.length-1),Q=Math.abs(N/100);for(u=0;u<H.length-1;u++)if(Math.abs(H[u+1]-H[u]-N)>Q){v("x scale is not linear");break}}if(M.length&&"fast"===C)for(N=(M[M.length-1]-M[0])/(M.length-1),Q=Math.abs(N/100),u=0;u<M.length-1;u++)if(Math.abs(M[u+1]-M[u]-N)>Q){v("y scale is not linear");break}}u=k.maxRowLength(P);H="scaled"===t.xtype?"":H;N=g(t,H,J,I,u,w);M="scaled"===t.ytype?"":M;Q=g(t,M,E,L,P.length,
A);B||(t._extremes[w._id]=a.findExtremes(w,N),t._extremes[A._id]=a.findExtremes(A,Q));B={x:N,y:Q,z:P,text:t._text||t.text,hovertext:t._hovertext||t.hovertext};H&&H.length===N.length-1&&(B.xCenter=H);M&&M.length===Q.length-1&&(B.yCenter=M);y&&(B.xRanges=F.xRanges,B.yRanges=F.yRanges,B.pts=F.pts);z||f(q,t,{vals:P,cLetter:"z"});z&&t.contours&&"heatmap"===t.contours.coloring&&(q={type:"contour"===t.type?"heatmap":"histogram2d",xcalendar:t.xcalendar,ycalendar:t.ycalendar},B.xfill=g(q,H,J,I,u,w),B.yfill=
g(q,M,E,L,P.length,A));return[B]}},{"../../components/colorscale/calc":623,"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,"../histogram2d/calc":1067,"./clean_2d_array":1036,"./convert_column_xyz":1038,"./find_empties":1040,"./interp2d":1043,"./make_bound_array":1044}],1036:[function(b,D,G){var r=b("fast-isnumeric"),n=b("../../lib"),p=b("../../constants/numerical").BADNUM;D.exports=function(k,a,e,f){function l(z){if(r(z))return+z}function m(z){if(a&&
"carpet"!==a.type&&"contourcarpet"!==a.type&&z&&"category"===z.type&&a["_"+z._id.charAt(0)].length){var y=z._id.charAt(0),B={};y=a["_"+y+"CategoryMap"]||a[y];for(d=0;d<y.length;d++)B[y[d]]=d;return function(C){C=B[z._categories[C]];return C+1?C:p}}return n.identity}var c,d,g;if(a&&a.transpose){for(d=c=0;d<k.length;d++)c=Math.max(c,k[d].length);if(0===c)return!1;var h=function(z){return z.length};var q=function(z,y,B){return(z[B]||[])[y]}}else c=k.length,h=function(z,y){return z[y].length},q=function(z,
y,B){return(z[y]||[])[B]};var t=function(z,y,B){return y===p||B===p?p:q(z,y,B)},v=m(e),w=m(f);f&&"category"===f.type&&(c=f._categories.length);var A=Array(c);for(d=0;d<c;d++)for(f=e&&"category"===e.type?e._categories.length:h(k,d),A[d]=Array(f),g=0;g<f;g++)A[d][g]=l(t(k,w(d),v(g)));return A}},{"../../constants/numerical":724,"../../lib":749,"fast-isnumeric":241}],1037:[function(b,D,G){D.exports={min:"zmin",max:"zmax"}},{}],1038:[function(b,D,G){var r=b("../../lib"),n=b("../../constants/numerical").BADNUM;
D.exports=function(p,k,a,e,f,l){var m=p._length,c=k.makeCalcdata(p,e),d=a.makeCalcdata(p,f),g=p.text,h=void 0!==g&&r.isArray1D(g),q=p.hovertext,t=void 0!==q&&r.isArray1D(q),v,w=r.distinctVals(c),A=w.vals,z=r.distinctVals(d),y=z.vals,B=[],C,u;var F=y.length;var H=A.length;for(v=0;v<l.length;v++)B[v]=r.init2dArray(F,H);h&&(C=r.init2dArray(F,H));t&&(u=r.init2dArray(F,H));H=r.init2dArray(F,H);for(v=0;v<m;v++)if(c[v]!==n&&d[v]!==n){var J=r.findBin(c[v]+w.minDiff/2,A),I=r.findBin(d[v]+z.minDiff/2,y);for(F=
0;F<l.length;F++)B[F][I][J]=p[l[F]][v],H[I][J]=v;h&&(C[I][J]=g[v]);t&&(u[I][J]=q[v])}p["_"+e]=A;p["_"+f]=y;for(F=0;F<l.length;F++)p["_"+l[F]]=B[F];h&&(p._text=C);t&&(p._hovertext=u);k&&"category"===k.type&&(p["_"+e+"CategoryMap"]=A.map(function(M){return k._categories[M]}));a&&"category"===a.type&&(p["_"+f+"CategoryMap"]=y.map(function(M){return a._categories[M]}));p._after2before=H}},{"../../constants/numerical":724,"../../lib":749}],1039:[function(b,D,G){var r=b("../../lib"),n=b("./xyz_defaults"),
p=b("./style_defaults"),k=b("../../components/colorscale/defaults"),a=b("./attributes");D.exports=function(e,f,l,m){function c(d,g){return r.coerce(e,f,a,d,g)}n(e,f,c,m)?(c("text"),c("hovertext"),c("hovertemplate"),p(e,f,c,m),c("hoverongaps"),c("connectgaps",r.isArray1D(f.z)&&!1!==f.zsmooth),k(e,f,m,c,{prefix:"",cLetter:"z"})):f.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":1034,"./style_defaults":1047,"./xyz_defaults":1048}],1040:[function(b,D,G){var r=b("../../lib").maxRowLength;
D.exports=function(n){var p=[],k={},a=[],e=n[0],f=[],l=[0,0,0],m=r(n),c,d,g;for(c=0;c<n.length;c++){var h=f;f=e;e=n[c+1]||[];for(d=0;d<m;d++)void 0===f[d]&&((g=(void 0!==f[d-1]?1:0)+(void 0!==f[d+1]?1:0)+(void 0!==h[d]?1:0)+(void 0!==e[d]?1:0))?(0===c&&g++,0===d&&g++,c===n.length-1&&g++,d===f.length-1&&g++,4>g&&(k[[c,d]]=[c,d,g]),p.push([c,d,g])):a.push([c,d]))}for(;a.length;){e={};f=!1;for(n=a.length-1;0<=n;n--){var q=a[n];c=q[0];d=q[1];if(g=((k[[c-1,d]]||l)[2]+(k[[c+1,d]]||l)[2]+(k[[c,d-1]]||l)[2]+
(k[[c,d+1]]||l)[2])/20)e[q]=[c,d,g],a.splice(n,1),f=!0}if(!f)throw"findEmpties iterated with no new neighbors";for(q in e)k[q]=e[q],p.push(e[q])}return p.sort(function(t,v){return v[2]-t[2]})}},{"../../lib":749}],1041:[function(b,D,G){var r=b("../../components/fx"),n=b("../../lib"),p=b("../../plots/cartesian/axes"),k=b("../../components/colorscale").extractOpts;D.exports=function(a,e,f,l,m,c){var d=a.cd[0];l=d.trace;m=a.xa;var g=a.ya,h=d.x,q=d.y,t=d.z,v=d.xCenter,w=d.yCenter,A=d.zmask,z=l.zhoverformat,
y=h,B=q;if(!1!==a.index){try{var C=Math.round(a.index[1]);var u=Math.round(a.index[0])}catch(H){n.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(0>C||C>=t[0].length||0>u||u>t.length)return}else{if(0<r.inbox(e-h[0],e-h[h.length-1],0)||0<r.inbox(f-q[0],f-q[q.length-1],0))return;if(c){y=[2*h[0]-h[1]];for(C=1;C<h.length;C++)y.push((h[C]+h[C-1])/2);y.push([2*h[h.length-1]-h[h.length-2]]);B=[2*q[0]-q[1]];for(C=1;C<q.length;C++)B.push((q[C]+q[C-1])/2);B.push([2*
q[q.length-1]-q[q.length-2]])}C=Math.max(0,Math.min(y.length-2,n.findBin(e,y)));u=Math.max(0,Math.min(B.length-2,n.findBin(f,B)))}e=m.c2p(h[C]);f=m.c2p(h[C+1]);y=g.c2p(q[u]);B=g.c2p(q[u+1]);c?(f=e,c=h[C],B=y,w=q[u]):(c=v?v[C]:(h[C]+h[C+1])/2,w=w?w[u]:(q[u]+q[u+1])/2,m&&"category"===m.type&&(c=h[C]),g&&"category"===g.type&&(w=q[u]),l.zsmooth&&(e=f=m.c2p(c),y=B=g.c2p(w)));g=t[u][C];A&&!A[u][C]&&(g=void 0);if(void 0!==g||l.hoverongaps){var F;Array.isArray(d.hovertext)&&Array.isArray(d.hovertext[u])?
F=d.hovertext[u][C]:Array.isArray(d.text)&&Array.isArray(d.text[u])&&(F=d.text[u][C]);d=k(l);m=p.tickText({type:"linear",range:[d.min,d.max],hoverformat:z,_separators:m._separators,_numFormat:m._numFormat},g,"hover").text;return[n.extendFlat(a,{index:l._after2before?l._after2before[u][C]:[u,C],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:e,x1:f,y0:y,y1:B,xLabelVal:c,yLabelVal:w,zLabelVal:g,zLabel:m,text:F})]}}},{"../../components/colorscale":627,"../../components/fx":655,"../../lib":749,
"../../plots/cartesian/axes":797}],1042:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:b("./colorbar"),style:b("./style"),hoverPoints:b("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":810,"./attributes":1034,"./calc":1035,"./colorbar":1037,"./defaults":1039,"./hover":1041,"./plot":1045,"./style":1046}],
1043:[function(b,D,G){function r(k,a,e){var f=0,l,m,c,d,g,h;for(l=0;l<a.length;l++){var q=a[l];var t=q[0];q=q[1];var v=k[t][q];for(m=d=g=0;4>m;m++){var w=p[m];if(c=k[t+w[0]])if(w=c[q+w[1]],void 0!==w){if(0===g)var A=h=w;else A=Math.min(A,w),h=Math.max(h,w);d++;g+=w}}if(0===d)throw"iterateInterp2d order is wrong: no defined neighbors";k[t][q]=g/d;void 0===v?4>d&&(f=1):(k[t][q]=(1+e)*k[t][q]-e*v,h>A&&(f=Math.max(f,Math.abs(k[t][q]-v)/(h-A))))}return f}var n=b("../../lib"),p=[[-1,0],[1,0],[0,-1],[0,
1]];D.exports=function(k,a){var e=1,f;r(k,a);for(f=0;f<a.length&&!(4>a[f][2]);f++);a=a.slice(f);for(f=0;100>f&&.01<e;f++)e=r(k,a,.5-.25*Math.min(1,.5*e));.01<e&&n.log("interp2d didn't converge quickly",e);return k}},{"../../lib":749}],1044:[function(b,D,G){var r=b("../../registry"),n=b("../../lib").isArrayOrTypedArray;D.exports=function(p,k,a,e,f,l){var m=[],c=r.traceIs(p,"contour"),d=r.traceIs(p,"histogram"),g=r.traceIs(p,"gl2d");if(n(k)&&1<k.length&&!d&&"category"!==l.type)if(e=k.length,e<=f){if(c||
g)m=k.slice(0,f);else if(1===f)m=[k[0]-.5,k[0]+.5];else{m=[1.5*k[0]-.5*k[1]];for(c=1;c<e;c++)m.push(.5*(k[c-1]+k[c]));m.push(1.5*k[e-1]-.5*k[e-2])}if(e<f)for(g=m[m.length-1],k=g-m[m.length-2],c=e;c<f;c++)g+=k,m.push(g)}else return c?k.slice(0,f):k.slice(0,f+1);else for(p=p[l._id.charAt(0)+"calendar"],k=d?l.r2c(a,0,p):n(k)&&1===k.length?k[0]:void 0===a?0:("log"===l.type?l.d2c:l.r2c)(a,0,p),e=e||1,c=c||g?0:-.5;c<f;c++)m.push(k+e*c);return m}},{"../../lib":749,"../../registry":880}],1045:[function(b,
D,G){function r(c,d){var g=d.length-2,h=f.constrain(f.findBin(c,d),0,g),q=d[h];c=f.constrain(h+(c-q)/(d[h+1]-q)-.5,0,g);d=Math.round(c);h=Math.abs(c-d);return c&&c!==g&&h?{bin0:d,frac:h,bin1:Math.round(d+h/(c-d))}:{bin0:d,bin1:d,frac:0}}function n(c,d){var g=d.length-1;g=f.constrain(f.findBin(c,d),0,g);var h=d[g];c=(c-h)/(d[g+1]-h)||0;return 0>=c?{bin0:g,bin1:g,frac:0}:.5>c?{bin0:g,bin1:g+1,frac:c}:{bin0:g+1,bin1:g,frac:1-c}}function p(c,d,g){c[d]=g[0];c[d+1]=g[1];c[d+2]=g[2];c[d+3]=Math.round(255*
g[3])}var k=b("d3"),a=b("tinycolor2"),e=b("../../registry"),f=b("../../lib"),l=b("../../components/colorscale").makeColorScaleFuncFromTrace,m=b("../../constants/xmlns_namespaces");D.exports=function(c,d,g,h){var q=d.xaxis,t=d.yaxis;f.makeTraceGroups(h,g,"hm").each(function(v){function w(la,ua){return void 0!==la?(la=ea(la),la[0]=Math.round(la[0]),la[1]=Math.round(la[1]),la[2]=Math.round(la[2]),ba+=ua,ka+=la[0]*ua,qa+=la[1]*ua,pa+=la[2]*ua,la):[0,0,0,0]}function A(la,ua,na,wa){var Ca=la[na.bin0];if(void 0===
Ca)return w(void 0,1);la=la[na.bin1];var Fa=ua[na.bin0];ua=ua[na.bin1];return w(Ca+na.frac*(la-Ca||0)+wa.frac*((Fa-Ca||0)+na.frac*(void 0===la?void 0===ua?0:void 0===Fa?2*(ua-Ca):2*(2*ua-Fa-Ca)/3:void 0===ua?void 0===Fa?0:2*(2*Ca-la-Fa)/3:void 0===Fa?2*(2*ua-la-Ca)/3:ua+Ca-la-Fa)))}var z=k.select(this),y=v[0],B=y.trace,C=y.z,u=y.x,F=y.y,H=y.xCenter,J=y.yCenter,I=e.traceIs(B,"contour"),M=I?"best":B.zsmooth,E=C.length,L=f.maxRowLength(C),P=!1,N=!1,Q;for(Q=0;void 0===O&&Q<u.length-1;){var O=q.c2p(u[Q]);
Q++}for(Q=u.length-1;void 0===T&&0<Q;){var T=q.c2p(u[Q]);Q--}T<O&&(Q=T,T=O,O=Q,P=!0);for(Q=0;void 0===V&&Q<F.length-1;){var V=t.c2p(F[Q]);Q++}for(Q=F.length-1;void 0===Z&&0<Q;){var Z=t.c2p(F[Q]);Q--}Z<V&&(Q=V,V=Z,Z=Q,N=!0);I&&(H=u,J=F,u=y.xfill,F=y.yfill);"fast"!==M&&(Q="best"===M?0:.5,O=Math.max(-Q*q._length,O),T=Math.min((1+Q)*q._length,T),V=Math.max(-Q*t._length,V),Z=Math.min((1+Q)*t._length,Z));var aa=Math.round(T-O),Y=Math.round(Z-V);if(0>=aa||0>=Y)z.selectAll("image").data([]).exit().remove();
else{"fast"===M?(Z=L,Q=E):(Z=aa,Q=Y);T=document.createElement("canvas");T.width=Z;T.height=Q;Z=T.getContext("2d");var ea=l(B,{noNumericCheck:!0,returnArray:!0});"fast"===M?(y=P?function(la){return L-1-la}:f.identity,I=N?function(la){return E-1-la}:f.identity):(y=function(la){return f.constrain(Math.round(q.c2p(u[la])-O),0,aa)},I=function(la){return f.constrain(Math.round(t.c2p(F[la])-V),0,Y)});Q=I(0);var ca=[Q,Q];P=P?0:1;N=N?0:1;var ba=0,ka=0,qa=0,pa=0;if(M){B=0;try{var oa=new Uint8Array(aa*Y*4)}catch(la){oa=
Array(aa*Y*4)}if("best"===M){M=H||u;P=J||F;N=Array(M.length);y=Array(P.length);I=Array(aa);H=H?n:r;ca=J?n:r;for(Q=0;Q<M.length;Q++)N[Q]=Math.round(q.c2p(M[Q])-O);for(Q=0;Q<P.length;Q++)y[Q]=Math.round(t.c2p(P[Q])-V);for(Q=0;Q<aa;Q++)I[Q]=H(Q,N);for(J=0;J<Y;J++)for(M=ca(J,y),P=C[M.bin0],N=C[M.bin1],Q=0;Q<aa;Q++,B+=4)H=A(P,N,I[Q],M),p(oa,B,H)}else for(J=0;J<E;J++)for(M=C[J],ca=I(J),Q=0;Q<aa;Q++)H=w(M[Q],1),B=4*(ca*aa+y(Q)),p(oa,B,H);C=Z.createImageData(aa,Y);try{C.data.set(oa)}catch(la){for(Q=C.data,
H=Q.length,J=0;J<H;J++)Q[J]=oa[J]}Z.putImageData(C,0,0)}else{oa=B.xgap;B=B.ygap;var ja=Math.floor(oa/2),ra=Math.floor(B/2);for(J=0;J<E;J++)if(M=C[J],ca.reverse(),ca[N]=I(J+1),ca[0]!==ca[1]&&void 0!==ca[0]&&void 0!==ca[1]){Q=y(0);var ha=[Q,Q];for(Q=0;Q<L;Q++)ha.reverse(),ha[P]=y(Q+1),ha[0]!==ha[1]&&void 0!==ha[0]&&void 0!==ha[1]&&(H=M[Q],H=w(H,(ha[1]-ha[0])*(ca[1]-ca[0])),Z.fillStyle="rgba("+H.join(",")+")",Z.fillRect(ha[0]+ja,ca[0]+ra,ha[1]-ha[0]-oa,ca[1]-ca[0]-B))}}ka=Math.round(ka/ba);qa=Math.round(qa/
ba);pa=Math.round(pa/ba);C=a("rgb("+ka+","+qa+","+pa+")");c._hmpixcount=(c._hmpixcount||0)+ba;c._hmlumcount=(c._hmlumcount||0)+ba*C.getLuminance();v=z.selectAll("image").data(v);v.enter().append("svg:image").attr({xmlns:m.svg,preserveAspectRatio:"none"});v.attr({height:Y,width:aa,x:O,y:V,"xlink:href":T.toDataURL("image/png")})}})}},{"../../components/colorscale":627,"../../constants/xmlns_namespaces":725,"../../lib":749,"../../registry":880,d3:169,tinycolor2:548}],1046:[function(b,D,G){var r=b("d3");
D.exports=function(n){r.select(n).selectAll(".hm image").style("opacity",function(p){return p.trace.opacity})}},{d3:169}],1047:[function(b,D,G){D.exports=function(r,n,p){!1===p("zsmooth")&&(p("xgap"),p("ygap"));p("zhoverformat")}},{}],1048:[function(b,D,G){function r(a,e){var f=e(a);"scaled"===(f?e(a+"type","array"):"scaled")&&(e(a+"0"),e("d"+a));return f}var n=b("fast-isnumeric"),p=b("../../lib"),k=b("../../registry");D.exports=function(a,e,f,l,m,c){var d=f("z");m=m||"x";c=c||"y";if(void 0===d||
!d.length)return 0;if(p.isArray1D(a.z)){var g=f(m);f=f(c);g=p.minRowLength(g);f=p.minRowLength(f);if(0===g||0===f)return 0;e._length=Math.min(g,f,d.length)}else{r(m,f);r(c,f);g=!0;for(var h=!1,q=!1,t,v=0;v<d.length;v++){t=d[v];if(!p.isArrayOrTypedArray(t)){g=!1;break}0<t.length&&(h=!0);for(var w=0;w<t.length;w++)if(n(t[w])){q=!0;break}}if(!(g&&h&&q))return 0;f("transpose");e._length=null}if("heatmapgl"===a.type||"contourgl"===a.type)return!0;k.getComponentMethod("calendars","handleTraceDefaults")(a,
e,[m,c],l);return!0}},{"../../lib":749,"../../registry":880,"fast-isnumeric":241}],1049:[function(b,D,G){G=b("../heatmap/attributes");var r=b("../../components/colorscale/attributes"),n=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;for(var p="z x x0 dx y y0 dy text transpose xtype ytype".split(" "),k={},a=0;a<p.length;a++){var e=p[a];k[e]=G[e]}k.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"};n(k,r("",{cLetter:"z",autoColorDflt:!1}));D.exports=
b(k,"calc","nested")},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../heatmap/attributes":1034}],1050:[function(b,D,G){function r(a,e){this.scene=a;this.uid=e;this.type="heatmapgl";this.name="";this.hoverinfo="all";this.xData=[];this.yData=[];this.zData=[];this.textLabels=[];this.idToIndex=[];this.bounds=[0,0,0,0];this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]};this.heatmap=n(a.glplot,this.options);
this.heatmap._trace=this}var n=b("gl-heatmap2d"),p=b("../../plots/cartesian/axes"),k=b("../../lib/str2rgbarray");b=r.prototype;b.handlePick=function(a){var e=this.options,f=e.shape,l=a.pointId,m=l%f[0];f=Math.floor(l/f[0]);return{trace:this,dataCoord:a.dataCoord,traceCoord:[e.x[m],e.y[f],e.z[l]],textLabel:this.textLabels[l],name:this.name,pointIndex:[f,m],hoverinfo:this.hoverinfo}};b.update=function(a,e){e=e[0];this.index=a.index;this.name=a.name;this.hoverinfo=a.hoverinfo;var f=e.z;this.options.z=
[].concat.apply([],f);this.options.shape=[f[0].length,f.length];this.options.x=e.x;this.options.y=e.y;this.options.zsmooth=a.zsmooth;f=a.colorscale;for(var l=a.zmin,m=a.zmax,c=f.length,d=Array(c),g=Array(4*c),h=0;h<c;h++){var q=f[h],t=k(q[1]);d[h]=l+q[0]*(m-l);for(q=0;4>q;q++)g[4*h+q]=t[q]}this.options.colorLevels=d;this.options.colorValues=g;this.textLabels=[].concat.apply([],a.text);this.heatmap.update(this.options);f=this.scene.xaxis;l=this.scene.yaxis;if(!1===a.zsmooth){var v={ppad:e.x[1]-e.x[0]};
var w={ppad:e.y[1]-e.y[0]}}a._extremes[f._id]=p.findExtremes(f,e.x,v);a._extremes[l._id]=p.findExtremes(l,e.y,w)};b.dispose=function(){this.heatmap.dispose()};D.exports=function(a,e,f){a=new r(a,e.uid);a.update(e,f);return a}},{"../../lib/str2rgbarray":772,"../../plots/cartesian/axes":797,"gl-heatmap2d":268}],1051:[function(b,D,G){var r=b("../../lib"),n=b("../heatmap/xyz_defaults"),p=b("../../components/colorscale/defaults"),k=b("./attributes");D.exports=function(a,e,f,l){function m(c,d){return r.coerce(a,
e,k,c,d)}n(a,e,m,l)?(m("text"),m("zsmooth"),p(a,e,l,m,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"../heatmap/xyz_defaults":1048,"./attributes":1049}],1052:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../heatmap/calc"),plot:b("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":837,
"../heatmap/calc":1035,"../heatmap/colorbar":1037,"./attributes":1049,"./convert":1050,"./defaults":1051}],1053:[function(b,D,G){G=b("../bar/attributes");var r=b("../../plots/template_attributes").hovertemplateAttrs,n=b("./bin_attributes"),p=b("./constants");b=b("../../lib/extend").extendFlat;D.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b({},G.text,{}),hovertext:b({},G.hovertext,{}),orientation:G.orientation,histfunc:{valType:"enumerated",
values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",
min:0,dflt:0,editType:"calc"},xbins:n("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:n("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:r({},{keys:p.eventDataKeys}),marker:G.marker,offsetgroup:G.offsetgroup,alignmentgroup:G.alignmentgroup,selected:G.selected,unselected:G.unselected,_deprecated:{bardir:G._deprecated.bardir}}},{"../../lib/extend":739,
"../../plots/template_attributes":875,"../bar/attributes":890,"./bin_attributes":1055,"./constants":1059}],1054:[function(b,D,G){D.exports=function(r,n){for(var p=r.length,k=0,a=0;a<p;a++)n[a]?(r[a]/=n[a],k+=r[a]):r[a]=null;return k}},{}],1055:[function(b,D,G){D.exports=function(r,n){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],1056:[function(b,D,G){var r=b("fast-isnumeric");D.exports={count:function(n,
p,k){k[n]++;return 1},sum:function(n,p,k,a){p=a[p];return r(p)?(p=Number(p),k[n]+=p,p):0},avg:function(n,p,k,a,e){p=a[p];r(p)&&(p=Number(p),k[n]+=p,e[n]++);return 0},min:function(n,p,k,a){p=a[p];if(r(p)){p=Number(p);if(!r(k[n]))return k[n]=p;if(k[n]>p)return a=p-k[n],k[n]=p,a}return 0},max:function(n,p,k,a){p=a[p];if(r(p)){p=Number(p);if(!r(k[n]))return k[n]=p;if(k[n]<p)return a=p-k[n],k[n]=p,a}return 0}}},{"fast-isnumeric":241}],1057:[function(b,D,G){function r(d,g,h,q){if(0>=d*g)return Infinity;
for(var t="date"===h.type,v=n(Math.abs(g-d),t),w=0;10>w;w++){var A=n(80*v,t);if(v===A)break;var z=A;var y=d,B=g,C=h,u=q;t&&z>e?(y=p(y,C,u),B=p(B,C,u),z=z===k?0:1,z=y[z]!==B[z]):z=.1<Math.floor(B/z)-Math.floor(y/z);if(z)v=A;else break}return v}function n(d,g){return g&&d>m?d>e?d>1.1*k?k:d>1.1*a?a:e:d>f?f:d>l?l:m:Math.pow(10,Math.floor(Math.log(d)/Math.LN10))}function p(d,g,h){d=g.c2d(d,k,h).split("-");""===d[0]&&(d.unshift(),d[0]="-"+d[0]);return d}G=b("../../constants/numerical");var k=G.ONEAVGYEAR,
a=G.ONEAVGMONTH,e=G.ONEDAY,f=G.ONEHOUR,l=G.ONEMIN,m=G.ONESEC,c=b("../../plots/cartesian/axes").tickIncrement;D.exports=function(d,g,h,q,t){var v=-1.1*g,w=-.1*g,A=d-w;g=h[0];h=h[1];A=Math.min(r(g+w,g+A,q,t),r(h+w,h+A,q,t));v=Math.min(r(g+v,g+w,q,t),r(h+v,h+w,q,t));if(A>v&&v<Math.abs(h-g)/4E3){var z=A;var y=!1}else z=Math.min(A,v),y=!0;if("date"===q.type&&z>e){var B=z===k?1:6,C=z===k?"M12":"M1";return function(u,F){var H=q.c2d(u,k,t),J=H.indexOf("-",B);0<J&&(H=H.substr(0,J));H=q.d2c(H,0,t);H<u&&(J=
c(H,C,!1,t),(H+J)/2<u+d&&(H=J));return F&&y?c(H,C,!0,t):H}}return function(u,F){var H=z*Math.round(u/z);H+z/10<u&&H+.9*z<u+d&&(H+=z);F&&y&&(H-=z);return H}}},{"../../constants/numerical":724,"../../plots/cartesian/axes":797}],1058:[function(b,D,G){function r(h,q,t,v,w){function A(Q,O,T){O[Q+"Found"]?(O[Q]=u(O[Q]),null===O[Q]&&(O[Q]=T[Q])):(N[Q]=O[Q]=T[Q],a.nestedProperty(F[0],z+"."+Q).set(T[Q]))}var z=v+"bins",y=h._fullLayout,B=y._histogramBinOpts[q["_"+v+"bingroup"]];y="overlay"===y.barmode;var C,
u="date"===t.type?function(Q){return Q||0===Q?a.cleanDate(Q,null,P):null}:function(Q){return k(Q)?Number(Q):null};if(q["_"+v+"autoBinFinished"])delete q["_"+v+"autoBinFinished"];else{var F=B.traces;var H=[],J=!0,I=!1,M=!1;for(C=0;C<F.length;C++){var E=F[C];if(E.visible){var L=B.dirs[C];L=E["_"+L+"pos0"]=t.makeCalcdata(E,L);H=a.concat(H,L);delete E["_"+v+"autoBinFinished"];!0===q.visible&&(J?J=!1:(delete E._autoBin,E["_"+v+"autoBinFinished"]=1),e.traceIs(E,"2dMap")&&(I=!0),"histogram2dcontour"===E.type&&
(M=!0))}}var P=F[0][v+"calendar"];C=f.autoBin(H,t,B.nbins,I,P,B.sizeFound&&B.size);var N=(F[0]._autoBin={})[B.dirs[0]]={};M&&(B.size||(C.start=t.c2r(f.tickIncrement(t.r2c(C.start,0,P),C.size,!0,P),0,P)),void 0===B.end&&(C.end=t.c2r(f.tickIncrement(t.r2c(C.end,0,P),C.size,!1,P),0,P)));if(y&&!e.traceIs(q,"2dMap")&&0===C._dataSpan&&"category"!==t.type&&"multicategory"!==t.type){if(w)return[C,L,!0];C=n(h,q,t,v,z)}L=E.cumulative||{};L.enabled&&"include"!==L.currentbin&&("decreasing"===L.direction?C.start=
t.c2r(f.tickIncrement(t.r2c(C.start,0,P),C.size,!0,P),0,P):C.end=t.c2r(f.tickIncrement(t.r2c(C.end,0,P),C.size,!1,P),0,P));B.size=C.size;B.sizeFound||(N.size=C.size,a.nestedProperty(F[0],z+".size").set(C.size));A("start",B,C);A("end",B,C)}L=q["_"+v+"pos0"];delete q["_"+v+"pos0"];w=q._input[z]||{};h=a.extendFlat({},B);M=B.start;y=t.r2l(w.start);E=void 0!==y;(B.startFound||E)&&y!==t.r2l(M)&&(y=E?y:a.aggNums(Math.min,null,L),M={type:"category"===t.type||"multicategory"===t.type?"linear":t.type,r2l:t.r2l,
dtick:B.size,tick0:M,calendar:P,range:[y,f.tickIncrement(y,B.size,!1,P)].map(t.l2r)},M=f.tickFirst(M),M>t.r2l(y)&&(M=f.tickIncrement(M,B.size,!0,P)),h.start=t.l2r(M),E||a.nestedProperty(q,z+".start").set(h.start));E=B.end;y=t.r2l(w.end);w=void 0!==y;(B.endFound||w)&&y!==t.r2l(E)&&(B=w?y:a.aggNums(Math.max,null,L),h.end=t.l2r(B),w||a.nestedProperty(q,z+".start").set(h.end));t="autobin"+v;!1===q._input[t]&&(q._input[z]=a.extendFlat({},q[z]||{}),delete q._input[t],delete q[t]);return[h,L]}function n(h,
q,t,v,w){for(var A=h._fullLayout,z=q.xaxis,y=q.yaxis,B=q.orientation,C=[],u=h._fullData,F=0;F<u.length;F++){var H=u[F];"histogram"===H.type&&!0===H.visible&&H.orientation===B&&H.xaxis===z&&H.yaxis===y&&C.push(H)}F=!1;z=Infinity;y=[q];for(B=0;B<C.length;B++)if(u=C[B],u===q)F=!0;else if(F){H=r(h,u,t,v,!0);var J=H[0],I=H[2];u["_"+v+"autoBinFinished"]=1;u["_"+v+"pos0"]=H[1];I?y.push(u):z=Math.min(z,J.size)}else H=A._histogramBinOpts[u["_"+v+"bingroup"]],z=Math.min(z,H.size||u[w].size);h=Array(y.length);
for(B=0;B<y.length;B++)for(C=y[B]["_"+v+"pos0"],u=0;u<C.length;u++)if(void 0!==C[u]){h[B]=C[u];break}isFinite(z)||(z=a.distinctVals(h).minDiff);for(B=0;B<y.length;B++)u=y[B],C=u[v+"calendar"],C={start:t.c2r(h[B]-z/2,0,C),end:t.c2r(h[B]+z/2,0,C),size:z},u._input[w]=u[w]=C,(H=A._histogramBinOpts[u["_"+v+"bingroup"]])&&a.extendFlat(H,C);return q[w]}function p(h,q,t){function v(y){z=h[y];h[y]/=2}function w(y){A=h[y];h[y]=z+A/2;z+=A}var A,z;if("half"===t)if("increasing"===q)for(v(0),q=1;q<h.length;q++)w(q);
else for(v(h.length-1),q=h.length-2;0<=q;q--)w(q);else if("increasing"===q){for(q=1;q<h.length;q++)h[q]+=h[q-1];"exclude"===t&&(h.unshift(0),h.pop())}else{for(q=h.length-2;0<=q;q--)h[q]+=h[q+1];"exclude"===t&&(h.push(0),h.shift())}}var k=b("fast-isnumeric"),a=b("../../lib"),e=b("../../registry"),f=b("../../plots/cartesian/axes"),l=b("../bar/arrays_to_calcdata"),m=b("./bin_functions"),c=b("./norm_functions"),d=b("./average"),g=b("./bin_label_vals");D.exports={calc:function(h,q){var t=[],v=[],w=f.getFromId(h,
"h"===q.orientation?q.yaxis:q.xaxis),A="h"===q.orientation?"y":"x",z={x:"y",y:"x"}[A],y=q[A+"calendar"],B=q.cumulative,C=r(h,q,w,A),u=C[0];C=C[1];var F="string"===typeof u.size,H=[],J=F?H:u,I=[],M=[],E=[],L=0,P=q.histnorm,N=q.histfunc,Q=-1!==P.indexOf("density"),O;B.enabled&&Q&&(P=P.replace(/ ?density$/,""),Q=!1);var T="max"===N||"min"===N?null:0,V=m.count;P=c[P];var Z=!1;if(a.isArrayOrTypedArray(q[z])&&"count"!==N){var aa=q[z];Z="avg"===N;V=m[N]}z=w.r2c(u.start,0,y);for(O=w.r2c(u.end,0,y)+(z-f.tickIncrement(z,
u.size,!1,y))/1E6;z<O&&1E6>t.length;){N=f.tickIncrement(z,u.size,!1,y);t.push((z+N)/2);v.push(T);E.push([]);H.push(z);Q&&I.push(1/(N-z));Z&&M.push(0);if(N<=z)break;z=N}H.push(z);F||"date"!==w.type||(J={start:w.r2c(J.start,0,y),end:w.r2c(J.end,0,y),size:J.size});h._fullLayout._roundFnOpts||(h._fullLayout._roundFnOpts={});var Y=q["_"+A+"bingroup"];T={leftGap:Infinity,rightGap:Infinity};Y&&(h._fullLayout._roundFnOpts[Y]||(h._fullLayout._roundFnOpts[Y]=T),T=h._fullLayout._roundFnOpts[Y]);N=v.length;A=
!0;O=T.leftGap;var ea=T.rightGap;F={};for(z=0;z<C.length;z++){var ca=C[z];Q=a.findBin(ca,J);0<=Q&&Q<N&&(L+=V(Q,z,v,aa,M),A&&E[Q].length&&ca!==C[E[Q][0]]&&(A=!1),E[Q].push(z),F[z]=Q,O=Math.min(O,ca-H[Q]),ea=Math.min(ea,H[Q+1]-ca))}T.leftGap=O;T.rightGap=ea;var ba;A||(ba=function(ka,qa){return function(){var pa=h._fullLayout._roundFnOpts[Y];return g(pa.leftGap,pa.rightGap,H,w,y)(ka,qa)}});Z&&(L=d(v,M));P&&P(v,L,I);B.enabled&&p(v,B.direction,B.currentbin);I=Math.min(t.length,v.length);aa=[];M=0;J=I-
1;for(z=0;z<I;z++)if(v[z]){M=z;break}for(z=I-1;z>=M;z--)if(v[z]){J=z;break}for(z=M;z<=J;z++)k(t[z])&&k(v[z])&&(I={p:t[z],s:v[z],b:0},B.enabled||(I.pts=E[z],A?I.ph0=I.ph1=E[z].length?C[E[z][0]]:t[z]:(q._computePh=!0,I.ph0=ba(H[z]),I.ph1=ba(H[z+1],!0))),aa.push(I));1===aa.length&&(aa[0].width1=f.tickIncrement(aa[0].p,u.size,!1,y)-aa[0].p);l(aa,q);a.isArrayOrTypedArray(q.selectedpoints)&&a.tagSelected(aa,q,F);return aa},calcAllAutoBins:r}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../registry":880,
"../bar/arrays_to_calcdata":889,"./average":1054,"./bin_functions":1056,"./bin_label_vals":1057,"./norm_functions":1065,"fast-isnumeric":241}],1059:[function(b,D,G){D.exports={eventDataKeys:["binNumber"]}},{}],1060:[function(b,D,G){var r=b("../../lib"),n=b("../../plots/cartesian/axis_ids"),p=b("../../registry").traceIs,k=b("../bar/defaults").handleGroupingDefaults,a=r.nestedProperty,e=n.getAxisGroup,f=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},
{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],l=["x","y"];D.exports=function(m,c){function d(H,J){return r.coerce(z._input,z,z._module.attributes,H,J)}function g(H){return"v"===H.orientation?"x":"y"}function h(H,J,I){var M=H.uid+"__"+I;J||(J=M);var E=n.getFromTrace({_fullLayout:c},H,I).type;var L=H[I+"calendar"]||"",P=q[J],N=!0;P&&(E===P.axType&&L===P.calendar?(N=!1,P.traces.push(H),P.dirs.push(I)):(J=M,E!==P.axType&&r.warn(["Attempted to group the bins of trace",
H.index,"set on a","type:"+E,"axis with bins on","type:"+P.axType,"axis."].join(" ")),L!==P.calendar&&r.warn(["Attempted to group the bins of trace",H.index,"set with a",L,"calendar with bins",P.calendar?"on a "+P.calendar+" calendar":"w/o a set calendar"].join(" "))));N&&(q[J]={traces:[H],dirs:[I],axType:E,calendar:H[I+"calendar"]||""});H["_"+I+"bingroup"]=J}var q=c._histogramBinOpts={},t=[],v={},w=[],A;for(A=0;A<m.length;A++){var z=m[A];p(z,"histogram")&&(t.push(z),delete z._xautoBinFinished,delete z._yautoBinFinished,
p(z,"2dMap")||k(z._input,z,c,d))}m=c._alignmentOpts||{};for(A=0;A<t.length;A++){z=t[A];var y="";if(!p(z,"2dMap")){var B=g(z);if("group"===c.barmode&&z.alignmentgroup){var C=e(c,z[B+"axis"])+z.orientation;(m[C]||{})[z.alignmentgroup]&&(y=C)}y||"overlay"===c.barmode||(y=e(c,z.xaxis)+e(c,z.yaxis)+g(z))}y?(v[y]||(v[y]=[]),v[y].push(z)):w.push(z)}for(y in v)if(t=v[y],1===t.length)w.push(t[0]);else{m=!1;for(A=0;A<t.length;){z=t[A];m=d("bingroup");break}y=m||y;for(A=0;A<t.length;A++)z=t[A],(m=z._input.bingroup)&&
m!==y&&r.warn(["Trace",z.index,"must match within bingroup",y+".","Ignoring its bingroup:",m,"setting."].join(" ")),z.bingroup=y,h(z,y,g(z))}for(A=0;A<w.length;A++)if(z=w[A],v=d("bingroup"),p(z,"2dMap"))for(t=0;2>t;t++)B=l[t],m=d(B+"bingroup",v?v+"__"+B:null),h(z,m,B);else h(z,v,g(z));for(y in q)for(v=q[y],t=v.traces,w=0;w<f.length;w++)if(m=f[w],C=m.name,"nbins"!==C||!v.sizeFound){for(A=0;A<t.length;A++){z=t[A];B=v.dirs[A];var u=m.aStr[B];if(void 0!==a(z._input,u).get()){v[C]=d(u);v[C+"Found"]=!0;
break}var F=(z._autoBin||{})[B]||{};F[C]&&a(z,u).set(F[C])}if("start"===C||"end"===C)for(;A<t.length;A++)z=t[A],z["_"+B+"bingroup"]&&(F=(z._autoBin||{})[B]||{},d(u,F[C]));"nbins"!==C||v.sizeFound||v.nbinsFound||(z=t[0],v[C]=d(u))}}},{"../../lib":749,"../../plots/cartesian/axis_ids":800,"../../registry":880,"../bar/defaults":894}],1061:[function(b,D,G){var r=b("../../registry"),n=b("../../lib"),p=b("../../components/color"),k=b("../bar/style_defaults"),a=b("./attributes");D.exports=function(e,f,l,
m){function c(t,v){return n.coerce(e,f,a,t,v)}var d=c("x"),g=c("y");c("cumulative.enabled")&&(c("cumulative.direction"),c("cumulative.currentbin"));c("text");c("hovertext");c("hovertemplate");var h=c("orientation",g&&!d?"h":"v"),q="v"===h?"x":"y";h="v"===h?"y":"x";(d=d&&g?Math.min(n.minRowLength(d)&&n.minRowLength(g)):n.minRowLength(f[q]||[]))?(f._length=d,r.getComponentMethod("calendars","handleTraceDefaults")(e,f,["x","y"],m),f[h]&&c("histfunc"),c("histnorm"),c("autobin"+q),k(e,f,c,l,m),n.coerceSelectionMarkerOpacity(f,
c),l=(f.marker.line||{}).color,m=r.getComponentMethod("errorbars","supplyDefaults"),m(e,f,l||p.defaultLine,{axis:"y"}),m(e,f,l||p.defaultLine,{axis:"x",inherit:"y"})):f.visible=!1}},{"../../components/color":615,"../../lib":749,"../../registry":880,"../bar/style_defaults":905,"./attributes":1053}],1062:[function(b,D,G){D.exports=function(r,n,p,k,a){r.x="xVal"in n?n.xVal:n.x;r.y="yVal"in n?n.yVal:n.y;"zLabelVal"in n&&(r.z=n.zLabelVal);n.xa&&(r.xaxis=n.xa);n.ya&&(r.yaxis=n.ya);if(!(p.cumulative||{}).enabled){n=
Array.isArray(a)?k[0].pts[a[0]][a[1]]:k[a].pts;r.pointNumbers=n;r.binNumber=r.pointNumber;delete r.pointNumber;delete r.pointIndex;if(p._indexToPoints)for(k=[],a=0;a<n.length;a++)k=k.concat(p._indexToPoints[n[a]]);else k=n;r.pointIndices=k}return r}},{}],1063:[function(b,D,G){var r=b("../bar/hover").hoverPoints,n=b("../../plots/cartesian/axes").hoverLabelText;D.exports=function(p,k,a,e){if(k=r(p,k,a,e))return p=k[0],a=p.cd[p.index],e=p.cd[0].trace,e.cumulative.enabled||(e="h"===e.orientation?"y":
"x",p[e+"Label"]=n(p[e+"a"],a.ph0,a.ph1)),k}},{"../../plots/cartesian/axes":797,"../bar/hover":897}],1064:[function(b,D,G){D.exports={attributes:b("./attributes"),layoutAttributes:b("../bar/layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),supplyLayoutDefaults:b("../bar/layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("../bar/cross_trace_calc").crossTraceCalc,plot:b("../bar/plot").plot,layerName:"barlayer",style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,
colorbar:b("../scatter/marker_colorbar"),hoverPoints:b("./hover"),selectPoints:b("../bar/select"),eventData:b("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg bar histogram oriented errorBarsOK showLegend".split(" "),meta:{}}},{"../../plots/cartesian":810,"../bar/cross_trace_calc":893,"../bar/layout_attributes":899,"../bar/layout_defaults":900,"../bar/plot":901,"../bar/select":902,"../bar/style":904,"../scatter/marker_colorbar":1173,
"./attributes":1053,"./calc":1058,"./cross_trace_defaults":1060,"./defaults":1061,"./event_data":1062,"./hover":1063}],1065:[function(b,D,G){D.exports={percent:function(r,n){var p=r.length;n=100/n;for(var k=0;k<p;k++)r[k]*=n},probability:function(r,n){for(var p=r.length,k=0;k<p;k++)r[k]/=n},density:function(r,n,p,k){n=r.length;k=k||1;for(var a=0;a<n;a++)r[a]=r[a]*p[a]*k},"probability density":function(r,n,p,k){var a=r.length;k&&(n/=k);for(k=0;k<a;k++)r[k]*=p[k]/n}}},{}],1066:[function(b,D,G){G=b("../histogram/attributes");
var r=b("../histogram/bin_attributes"),n=b("../heatmap/attributes"),p=b("../../plots/attributes"),k=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;D.exports=b({x:G.x,y:G.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:G.histnorm,histfunc:G.histfunc,nbinsx:G.nbinsx,xbins:r("x"),nbinsy:G.nbinsy,ybins:r("y"),autobinx:G.autobinx,autobiny:G.autobiny,
bingroup:b({},G.bingroup,{}),xbingroup:b({},G.bingroup,{}),ybingroup:b({},G.bingroup,{}),xgap:n.xgap,ygap:n.ygap,zsmooth:n.zsmooth,zhoverformat:n.zhoverformat,hovertemplate:k({},{keys:"z"}),showlegend:b({},p.showlegend,{dflt:!1})},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../heatmap/attributes":1034,"../histogram/attributes":1053,"../histogram/bin_attributes":1055}],
1067:[function(b,D,G){function r(d,g,h,q){var t=Array(d);if(q)for(h=0;h<d;h++)t[h]=1/(g[h+1]-g[h]);else for(g=1/h,h=0;h<d;h++)t[h]=g;return t}function n(d,g){return{start:d(g.start),end:d(g.end),size:g.size}}function p(d,g,h,q,t,v){var w=d.length-1,A=Array(w);q=m(h,q,d,t,v);for(h=0;h<w;h++)t=(g||[])[h],A[h]=void 0===t?[q(d[h]),q(d[h+1],!0)]:[t,t];return A}var k=b("../../lib"),a=b("../../plots/cartesian/axes"),e=b("../histogram/bin_functions"),f=b("../histogram/norm_functions"),l=b("../histogram/average"),
m=b("../histogram/bin_label_vals"),c=b("../histogram/calc").calcAllAutoBins;D.exports=function(d,g){var h=a.getFromId(d,g.xaxis),q=a.getFromId(d,g.yaxis),t=g.xcalendar,v=g.ycalendar,w=function(ua){return h.r2c(ua,0,t)},A=function(ua){return q.r2c(ua,0,v)},z=c(d,g,h,"x");var y=z[0];z=z[1];d=c(d,g,q,"y");var B=d[0];d=d[1];var C=g._length;z.length>C&&z.splice(C,z.length-C);d.length>C&&d.splice(C,d.length-C);var u=[],F=[],H=[],J="string"===typeof y.size,I="string"===typeof B.size,M=[],E=[],L=J?M:y,P=
I?E:B,N=0,Q=[],O=[],T=g.histnorm,V=g.histfunc,Z=-1!==T.indexOf("density"),aa="max"===V||"min"===V?null:0,Y=e.count;T=f[T];var ea=!1,ca=[],ba=[];(g="z"in g?g.z:"marker"in g&&Array.isArray(g.marker.color)?g.marker.color:"")&&"count"!==V&&(ea="avg"===V,Y=e[V]);V=y.size;var ka=w(y.start),qa=w(y.end)+(ka-a.tickIncrement(ka,V,!1,t))/1E6;for(y=ka;y<qa;y=a.tickIncrement(y,V,!1,t))F.push(aa),M.push(y),ea&&H.push(0);M.push(y);aa=F.length;V=(y-ka)/aa;ka=h.c2r(ka+V/2,0,t);var pa=B.size;qa=A(B.start);var oa=A(B.end)+
(qa-a.tickIncrement(qa,pa,!1,v))/1E6;for(y=qa;y<oa;y=a.tickIncrement(y,pa,!1,v)){u.push(F.slice());E.push(y);var ja=Array(aa);for(B=0;B<aa;B++)ja[B]=[];O.push(ja);ea&&Q.push(H.slice())}E.push(y);H=u.length;B=(y-qa)/H;qa=q.c2r(qa+B/2,0,v);Z&&(ca=r(F.length,L,V,J),ba=r(u.length,P,B,I));J||"date"!==h.type||(L=n(w,L));I||"date"!==q.type||(P=n(A,P));J=F=!0;I=Array(aa);Z=Array(H);var ra=ja=oa=pa=Infinity;for(y=0;y<C;y++){var ha=z[y],la=d[y];w=k.findBin(ha,L);A=k.findBin(la,P);0<=w&&w<aa&&0<=A&&A<H&&(N+=
Y(w,y,u[A],g,Q[A]),O[A][w].push(y),F&&(void 0===I[w]?I[w]=ha:I[w]!==ha&&(F=!1)),J&&(void 0===Z[A]?Z[A]=la:Z[A]!==la&&(J=!1)),pa=Math.min(pa,ha-M[w]),oa=Math.min(oa,M[w+1]-ha),ja=Math.min(ja,la-E[A]),ra=Math.min(ra,E[A+1]-la))}if(ea)for(A=0;A<H;A++)N+=l(u[A],Q[A]);if(T)for(A=0;A<H;A++)T(u[A],N,ca,ba[A]);return{x:z,xRanges:p(M,F&&I,pa,oa,h,t),x0:ka,dx:V,y:d,yRanges:p(E,J&&Z,ja,ra,q,v),y0:qa,dy:B,z:u,pts:O}}},{"../../lib":749,"../../plots/cartesian/axes":797,"../histogram/average":1054,"../histogram/bin_functions":1056,
"../histogram/bin_label_vals":1057,"../histogram/calc":1058,"../histogram/norm_functions":1065}],1068:[function(b,D,G){var r=b("../../lib"),n=b("./sample_defaults"),p=b("../heatmap/style_defaults"),k=b("../../components/colorscale/defaults"),a=b("./attributes");D.exports=function(e,f,l,m){function c(d,g){return r.coerce(e,f,a,d,g)}n(e,f,c,m);!1!==f.visible&&(p(e,f,c,m),k(e,f,m,c,{prefix:"",cLetter:"z"}),c("hovertemplate"))}},{"../../components/colorscale/defaults":625,"../../lib":749,"../heatmap/style_defaults":1047,
"./attributes":1066,"./sample_defaults":1071}],1069:[function(b,D,G){var r=b("../heatmap/hover"),n=b("../../plots/cartesian/axes").hoverLabelText;D.exports=function(p,k,a,e,f,l){if(k=r(p,k,a,e,f,l))return p=k[0],e=p.index,f=p.cd[0],a=f.xRanges[e[1]],e=f.yRanges[e[0]],p.xLabel=n(p.xa,a[0],a[1]),p.yLabel=n(p.ya,e[0],e[1]),k}},{"../../plots/cartesian/axes":797,"../heatmap/hover":1041}],1070:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),
calc:b("../heatmap/calc"),plot:b("../heatmap/plot"),layerName:"heatmaplayer",colorbar:b("../heatmap/colorbar"),style:b("../heatmap/style"),hoverPoints:b("./hover"),eventData:b("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":810,"../heatmap/calc":1035,"../heatmap/colorbar":1037,"../heatmap/plot":1045,"../heatmap/style":1046,"../histogram/cross_trace_defaults":1060,
"../histogram/event_data":1062,"./attributes":1066,"./defaults":1068,"./hover":1069}],1071:[function(b,D,G){var r=b("../../registry"),n=b("../../lib");D.exports=function(p,k,a,e){var f=a("x"),l=a("y");f=n.minRowLength(f);l=n.minRowLength(l);f&&l?(k._length=Math.min(f,l),r.getComponentMethod("calendars","handleTraceDefaults")(p,k,["x","y"],e),(a("z")||a("marker.color"))&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")):k.visible=!1}},{"../../lib":749,"../../registry":880}],1072:[function(b,
D,G){G=b("../histogram2d/attributes");var r=b("../contour/attributes"),n=b("../../components/colorscale/attributes");b=b("../../lib/extend").extendFlat;D.exports=b({x:G.x,y:G.y,z:G.z,marker:G.marker,histnorm:G.histnorm,histfunc:G.histfunc,nbinsx:G.nbinsx,xbins:G.xbins,nbinsy:G.nbinsy,ybins:G.ybins,autobinx:G.autobinx,autobiny:G.autobiny,bingroup:G.bingroup,xbingroup:G.xbingroup,ybingroup:G.ybingroup,autocontour:r.autocontour,ncontours:r.ncontours,contours:r.contours,line:{color:r.line.color,width:b({},
r.line.width,{dflt:.5}),dash:r.line.dash,smoothing:r.line.smoothing,editType:"plot"},zhoverformat:G.zhoverformat,hovertemplate:G.hovertemplate},n("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../contour/attributes":977,"../histogram2d/attributes":1066}],1073:[function(b,D,G){var r=b("../../lib"),n=b("../histogram2d/sample_defaults"),p=b("../contour/contours_defaults"),k=b("../contour/style_defaults"),a=b("./attributes");D.exports=
function(e,f,l,m){function c(d,g){return r.coerce(e,f,a,d,g)}n(e,f,c,m);!1!==f.visible&&(p(e,f,c,function(d){return r.coerce2(e,f,a,d)}),k(e,f,c,m),c("hovertemplate"))}},{"../../lib":749,"../contour/contours_defaults":984,"../contour/style_defaults":998,"../histogram2d/sample_defaults":1071,"./attributes":1072}],1074:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../contour/calc"),plot:b("../contour/plot").plot,
layerName:"contourlayer",style:b("../contour/style"),colorbar:b("../contour/colorbar"),hoverPoints:b("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg 2dMap contour histogram showLegend".split(" "),meta:{}}},{"../../plots/cartesian":810,"../contour/calc":978,"../contour/colorbar":980,"../contour/hover":990,"../contour/plot":995,"../contour/style":997,"../histogram/cross_trace_defaults":1060,"./attributes":1072,"./defaults":1073}],
1075:[function(b,D,G){G=b("../../plots/attributes");var r=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../lib/extend").extendFlat;b=b("./constants").colormodel;for(var p=["rgb","rgba","rgba256","hsl","hsla"],k=[],a=[],e=0;e<p.length;e++){var f=b[p[e]];k.push("For the `"+p[e]+"` colormodel, it is ["+(f.zminDflt||f.min).join(", ")+"].");a.push("For the `"+p[e]+"` colormodel, it is ["+(f.zmaxDflt||f.max).join(", ")+"].")}D.exports=n({source:{valType:"string",editType:"calc"},z:{valType:"data_array",
editType:"calc"},colormodel:{valType:"enumerated",values:p,editType:"calc"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},
y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:n({},G.hoverinfo,{flags:"x y z color name text".split(" "),dflt:"x+y+z+text+name"}),hovertemplate:r({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"./constants":1077}],
1076:[function(b,D,G){function r(g,h,q,t){return function(v){return k.constrain((v-g)*h,q,t)}}function n(g,h){return function(q){return k.constrain(q,g,h)}}function p(g){var h=a.colormodel[g.colormodel],q=(h.colormodel||g.colormodel).length;g._sArray=[];for(var t=0;t<q;t++)h.min[t]!==g.zmin[t]||h.max[t]!==g.zmax[t]?g._sArray.push(r(g.zmin[t],(h.max[t]-h.min[t])/(g.zmax[t]-g.zmin[t]),h.min[t],h.max[t])):g._sArray.push(n(h.min[t],h.max[t]));return function(v){v=v.slice(0,q);for(var w=0;w<q;w++){var A=
v[w];if(!e(A))return!1;v[w]=g._sArray[w](A)}return v}}var k=b("../../lib"),a=b("./constants"),e=b("fast-isnumeric"),f=b("../../plots/cartesian/axes"),l=b("../../lib").maxRowLength,m=b("image-size"),c=b("../../snapshot/helpers").IMAGE_URL_PREFIX,d=b("buffer/").Buffer;D.exports=function(g,h){if(h._hasZ){var q=h.z.length;var t=l(h.z)}else h._hasSource&&(q=h.source.replace(c,""),q=new d(q,"base64"),t=m(q),q=t.height,t=t.width);var v=f.getFromId(g,h.xaxis||"x");g=f.getFromId(g,h.yaxis||"y");var w=v.d2c(h.x0)-
h.dx/2,A=g.d2c(h.y0)-h.dy/2,z,y=[w,w+t*h.dx],B=[A,A+q*h.dy];if(v&&"log"===v.type)for(z=0;z<t;z++)y.push(w+z*h.dx);if(g&&"log"===g.type)for(z=0;z<q;z++)B.push(A+z*h.dy);h._extremes[v._id]=f.findExtremes(v,y);h._extremes[g._id]=f.findExtremes(g,B);h._scaler=p(h);return[{x0:w,y0:A,z:h.z,w:t,h:q}]}},{"../../lib":749,"../../plots/cartesian/axes":797,"../../snapshot/helpers":884,"./constants":1077,"buffer/":111,"fast-isnumeric":241,"image-size":418}],1077:[function(b,D,G){D.exports={colormodel:{rgb:{min:[0,
0,0],max:[255,255,255],fmt:function(r){return r.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(r){return r.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(r){return r.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(r){r=r.slice(0,3);r[1]+="%";r[2]+="%";return r},suffix:["°","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],
fmt:function(r){r=r.slice(0,4);r[1]+="%";r[2]+="%";return r},suffix:["°","%","%",""]}}}},{}],1078:[function(b,D,G){var r=b("../../lib"),n=b("./attributes"),p=b("./constants"),k=b("../../snapshot/helpers").IMAGE_URL_PREFIX;D.exports=function(a,e){function f(m,c){return r.coerce(a,e,n,m,c)}f("source");e.source&&!e.source.match(k)&&delete e.source;e._hasSource=!!e.source;var l=f("z");e._hasZ=!(void 0===l||!l.length||!l[0]||!l[0].length);e._hasZ||e._hasSource?(f("x0"),f("y0"),f("dx"),f("dy"),e._hasZ?
(f("colormodel","rgb"),l=p.colormodel[e.colormodel],f("zmin",l.zminDflt||l.min),f("zmax",l.zmaxDflt||l.max)):e._hasSource&&(e.colormodel="rgba256",l=p.colormodel[e.colormodel],e.zmin=l.zminDflt,e.zmax=l.zmaxDflt),f("text"),f("hovertext"),f("hovertemplate"),e._length=null):e.visible=!1}},{"../../lib":749,"../../snapshot/helpers":884,"./attributes":1075,"./constants":1077}],1079:[function(b,D,G){D.exports=function(r,n){"xVal"in n&&(r.x=n.xVal);"yVal"in n&&(r.y=n.yVal);n.xa&&(r.xaxis=n.xa);n.ya&&(r.yaxis=
n.ya);r.color=n.color;r.colormodel=n.trace.colormodel;r.z||(r.z=n.color);return r}},{}],1080:[function(b,D,G){var r=b("../../components/fx"),n=b("../../lib"),p=b("./constants");D.exports=function(k,a,e){var f=k.cd[0],l=f.trace,m=k.xa,c=k.ya;if(!(0<r.inbox(a-f.x0,a-(f.x0+f.w*l.dx),0)||0<r.inbox(e-f.y0,e-(f.y0+f.h*l.dy),0))){a=Math.floor((a-f.x0)/l.dx);e=Math.floor(Math.abs(e-f.y0)/l.dy);if(l._hasZ)var d=f.z[e][a];else l._hasSource&&(d=l._canvas.el.getContext("2d").getImageData(a,e,1,1).data);if(d){var g=
f.hi||l.hoverinfo,h;g&&(g=g.split("+"),-1!==g.indexOf("all")&&(g=["color"]),-1!==g.indexOf("color")&&(h=!0));var q=p.colormodel[l.colormodel],t=q.colormodel||l.colormodel,v=t.length;g=l._scaler(d);q=q.suffix;var w=[];if(l.hovertemplate||h)w.push("["+[g[0]+q[0],g[1]+q[1],g[2]+q[2]].join(", ")),4===v&&w.push(", "+g[3]+q[3]),w.push("]"),w=w.join(""),k.extraText=t.toUpperCase()+": "+w;var A;Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[e])?A=l.hovertext[e][a]:Array.isArray(l.text)&&Array.isArray(l.text[e])&&
(A=l.text[e][a]);c=c.c2p(f.y0+(e+.5)*l.dy);h=f.x0+(a+.5)*l.dx;t=f.y0+(e+.5)*l.dy;d="["+d.slice(0,l.colormodel.length).join(", ")+"]";return[n.extendFlat(k,{index:[e,a],x0:m.c2p(f.x0+a*l.dx),x1:m.c2p(f.x0+(a+1)*l.dx),y0:c,y1:c,color:g,xVal:h,xLabelVal:h,yVal:t,yLabelVal:t,zLabelVal:d,text:A,hovertemplateLabels:{zLabel:d,colorLabel:w,"color[0]Label":g[0]+q[0],"color[1]Label":g[1]+q[1],"color[2]Label":g[2]+q[2],"color[3]Label":g[3]+q[3]}})]}}}},{"../../components/fx":655,"../../lib":749,"./constants":1077}],
1081:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover"),eventData:b("./event_data"),moduleType:"trace",name:"image",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":810,"./attributes":1075,"./calc":1076,"./defaults":1078,"./event_data":1079,"./hover":1080,"./plot":1082,"./style":1083}],
1082:[function(b,D,G){function r(f){return"linear"===f.type&&f.range[1]>f.range[0]===("x"===f._id.charAt(0))}var n=b("d3"),p=b("../../lib"),k=b("../../constants/xmlns_namespaces"),a=b("./constants"),e=p.isIOS()||p.isSafari()||p.isIE();D.exports=function(f,l,m,c){var d=l.xaxis,g=l.yaxis,h=!(e||f._context._exportedPlot);p.makeTraceGroups(c,m,"im").each(function(q){function t(V){var Z=document.createElement("canvas");Z.width=Q;Z.height=O;var aa=Z.getContext("2d"),Y=function(ha){return p.constrain(Math.round(d.c2p(B+
ha*H)-M),0,Q)},ea=function(ha){return p.constrain(Math.round(g.c2p(C+ha*J)-L),0,O)},ca=a.colormodel[A.colormodel],ba=ca.colormodel||A.colormodel;ca=ca.fmt;for(I=0;I<w.w;I++){var ka=Y(I),qa=Y(I+1);if(qa!==ka&&!isNaN(qa)&&!isNaN(ka))for(var pa=0;pa<w.h;pa++){var oa=ea(pa),ja=ea(pa+1);if(ja!==oa&&!isNaN(ja)&&!isNaN(oa)&&V(I,pa)){var ra=A._scaler(V(I,pa));aa.fillStyle=ra?ba+"("+ca(ra).join(",")+")":"rgba(0,0,0,0)";aa.fillRect(ka,oa,qa-ka,ja-oa)}}}return Z}var v=n.select(this),w=q[0],A=w.trace,z=h&&!A._hasZ&&
A._hasSource&&r(d)&&r(g);A._fastImage=z;var y=w.z,B=w.x0,C=w.y0,u=w.w,F=w.h,H=A.dx,J=A.dy,I;for(I=0;void 0===M&&I<u;){var M=d.c2p(B+I*H);I++}for(I=u;void 0===E&&0<I;){var E=d.c2p(B+I*H);I--}for(I=0;void 0===L&&I<F;){var L=g.c2p(C+I*J);I++}for(I=F;void 0===P&&0<I;){var P=g.c2p(C+I*J);I--}if(E<M){var N=E;E=M;M=N}P<L&&(N=L,L=P,P=N);z||(M=Math.max(-.5*d._length,M),E=Math.min(1.5*d._length,E),L=Math.max(-.5*g._length,L),P=Math.min(1.5*g._length,P));var Q=Math.round(E-M),O=Math.round(P-L);if(0>=Q||0>=O)v.selectAll("image").data([]).exit().remove();
else{var T=v.selectAll("image").data([q]);T.enter().append("svg:image").attr({xmlns:k.svg,preserveAspectRatio:"none"});T.exit().remove();T.attr("style","image-rendering: optimizeSpeed; image-rendering: -moz-crisp-edges; image-rendering: -o-crisp-edges; image-rendering: -webkit-optimize-contrast; image-rendering: optimize-contrast; image-rendering: crisp-edges; image-rendering: pixelated;");q=(new Promise(function(V){if(A._hasZ)V();else if(A._hasSource)if(A._canvas&&A._canvas.el.width===u&&A._canvas.el.height===
F&&A._canvas.source===A.source)V();else{var Z=document.createElement("canvas");Z.width=u;Z.height=F;var aa=Z.getContext("2d");A._image=A._image||new Image;var Y=A._image;Y.onload=function(){aa.drawImage(Y,0,0);A._canvas={el:Z,source:A.source};V()};Y.setAttribute("src",A.source)}})).then(function(){if(A._hasZ){var V=t(function(aa,Y){return y[Y][aa]});V=V.toDataURL("image/png")}else if(A._hasSource)if(z)V=A.source;else{var Z=A._canvas.el.getContext("2d").getImageData(0,0,u,F).data;V=t(function(aa,Y){aa=
4*(Y*u+aa);return[Z[aa],Z[aa+1],Z[aa+2],Z[aa+3]]});V=V.toDataURL("image/png")}T.attr({"xlink:href":V,height:O,width:Q,x:M,y:L})});f._promises.push(q)}})}},{"../../constants/xmlns_namespaces":725,"../../lib":749,"./constants":1077,d3:169}],1083:[function(b,D,G){var r=b("d3");D.exports=function(n){r.select(n).selectAll(".im image").style("opacity",function(p){return p[0].trace.opacity})}},{d3:169}],1084:[function(b,D,G){G=b("../../lib/extend").extendFlat;var r=b("../../lib/extend").extendDeep,n=b("../../plot_api/edit_types").overrideAll,
p=b("../../plots/font_attributes"),k=b("../../components/color/attributes"),a=b("../../plots/domain").attributes,e=b("../../plots/cartesian/layout_attributes"),f=b("../../plot_api/plot_template").templatedArray,l=b("../../constants/delta.js");b("../../constants/docs");b=p({editType:"plot",colorEditType:"plot"});var m={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:k.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",
min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},c={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"};f=f("step",r({},m,{range:c}));D.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",
editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:G({},b,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot"},font:G({},b,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",
editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot"},increasing:{symbol:{valType:"string",dflt:l.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:l.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:l.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:l.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:G({},b,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular",
"bullet"]},bar:r({},m,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:k.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:n({range:c,visible:G({},e.visible,{dflt:!0}),tickmode:e.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:G({},e.ticks,{dflt:"outside"}),ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,tickfont:p({}),
tickangle:e.tickangle,tickformat:e.tickformat,tickformatstops:e.tickformatstops,tickprefix:e.tickprefix,showtickprefix:e.showtickprefix,ticksuffix:e.ticksuffix,showticksuffix:e.showticksuffix,separatethousands:e.separatethousands,exponentformat:e.exponentformat,showexponent:e.showexponent,editType:"plot"},"plot"),steps:f,threshold:{line:{color:G({},m.line.color,{}),width:G({},m.line.width,{dflt:1}),editType:"plot"},thickness:G({},m.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},
editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":614,"../../constants/delta.js":718,"../../constants/docs":719,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/cartesian/layout_attributes":811,"../../plots/domain":824,"../../plots/font_attributes":825}],1085:[function(b,D,G){var r=b("../../plots/plots");G.name="indicator";G.plot=function(n,p,k,a){r.plotBasePlot(G.name,n,p,k,a)};G.clean=function(n,p,k,a){r.cleanBasePlot(G.name,
n,p,k,a)}},{"../../plots/plots":860}],1086:[function(b,D,G){D.exports={calc:function(r,n){r=[];var p=n.value;"number"!==typeof n._lastValue&&(n._lastValue=n.value);var k=n._lastValue,a=k;n._hasDelta&&"number"===typeof n.delta.reference&&(a=n.delta.reference);r[0]={y:p,lastY:k,delta:p-a,relativeDelta:(p-a)/a};return r}}},{}],1087:[function(b,D,G){D.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},
{}],1088:[function(b,D,G){function r(d,g){function h(q,t){return n.coerce(d,g,p.gauge.steps,q,t)}h("color");h("line.color");h("line.width");h("range");h("thickness")}var n=b("../../lib"),p=b("./attributes"),k=b("../../plots/domain").defaults,a=b("../../plot_api/plot_template"),e=b("../../plots/array_container_defaults"),f=b("./constants.js"),l=b("../../plots/cartesian/tick_value_defaults"),m=b("../../plots/cartesian/tick_mark_defaults"),c=b("../../plots/cartesian/tick_label_defaults");D.exports={supplyDefaults:function(d,
g,h,q){function t(F,H){return n.coerce(d,g,p,F,H)}function v(F,H){return n.coerce(y,B,p.gauge,F,H)}function w(F,H){return n.coerce(C,u,p.gauge.axis,F,H)}k(g,q,t);t("mode");g._hasNumber=-1!==g.mode.indexOf("number");g._hasDelta=-1!==g.mode.indexOf("delta");g._hasGauge=-1!==g.mode.indexOf("gauge");h=t("value");g._range=[0,"number"===typeof h?1.5*h:1];h=Array(2);if(g._hasNumber){t("number.valueformat");t("number.font.color",q.font.color);t("number.font.family",q.font.family);t("number.font.size");void 0===
g.number.font.size&&(g.number.font.size=f.defaultNumberFontSize,h[0]=!0);t("number.prefix");t("number.suffix");var A=g.number.font.size}if(g._hasDelta){t("delta.font.color",q.font.color);t("delta.font.family",q.font.family);t("delta.font.size");void 0===g.delta.font.size&&(g.delta.font.size=(g._hasNumber?.5:1)*(A||f.defaultNumberFontSize),h[1]=!0);t("delta.reference",g.value);t("delta.relative");t("delta.valueformat",g.delta.relative?"2%":"");t("delta.increasing.symbol");t("delta.increasing.color");
t("delta.decreasing.symbol");t("delta.decreasing.color");t("delta.position");var z=g.delta.font.size}g._scaleNumbers=(!g._hasNumber||h[0])&&(!g._hasDelta||h[1])||!1;t("title.font.color",q.font.color);t("title.font.family",q.font.family);t("title.font.size",.25*(A||z||f.defaultNumberFontSize));t("title.text");var y;if(g._hasGauge){(y=d.gauge)||(y={});var B=a.newContainer(g,"gauge");v("shape");(g._isBullet="bullet"===g.gauge.shape)||t("title.align","center");(g._isAngular="angular"===g.gauge.shape)||
t("align","center");v("bgcolor",q.paper_bgcolor);v("borderwidth");v("bordercolor");v("bar.color");v("bar.line.color");v("bar.line.width");v("bar.thickness",f.valueThickness*("bullet"===g.gauge.shape?.5:1));e(y,B,{name:"steps",handleItemDefaults:r});v("threshold.value");v("threshold.thickness");v("threshold.line.width");v("threshold.line.color");var C={};y&&(C=y.axis||{});var u=a.newContainer(B,"axis");w("visible");g._range=w("range",g._range);q={outerTicks:!0};l(C,u,w,"linear");c(C,u,w,"linear",q);
m(C,u,w,q)}else t("title.align","center"),t("align","center"),g._isAngular=g._isBullet=!1;g._length=null}}},{"../../lib":749,"../../plot_api/plot_template":787,"../../plots/array_container_defaults":793,"../../plots/cartesian/tick_label_defaults":818,"../../plots/cartesian/tick_mark_defaults":819,"../../plots/cartesian/tick_value_defaults":820,"../../plots/domain":824,"./attributes":1084,"./constants.js":1087}],1089:[function(b,D,G){D.exports={moduleType:"trace",name:"indicator",basePlotModule:b("./base_plot"),
categories:["svg","noOpacity","noHover"],animatable:!0,attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc").calc,plot:b("./plot"),meta:{}}},{"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./plot":1090}],1090:[function(b,D,G){function r(J,I,M,E){function L(ka){ka.attr("width",function(qa){return Math.max(0,ca.c2p(qa.range[1])-ca.c2p(qa.range[0]))}).attr("x",function(qa){return ca.c2p(qa.range[0])}).attr("y",function(qa){return.5*(1-qa.thickness)*
Y}).attr("height",function(qa){return qa.thickness*Y})}var P=M[0].trace;I=E.gauge;var N=E.layer,Q=E.gaugeBg,O=E.gaugeOutline,T=E.size,V=P.domain,Z=E.transitionOpts,aa=E.onComplete;I.enter().append("g").classed("bullet",!0);I.attr("transform","translate("+T.l+", "+T.t+")");N.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0);N.selectAll("g.xbulletaxistick,path,text").remove();var Y=T.h;E=P.gauge.bar.thickness*Y;var ea=V.x[0];V=V.x[0]+(V.x[1]-V.x[0])*(P._hasNumber||P._hasDelta?1-v.bulletNumberDomainSize:
1);var ca=e(J,P.gauge.axis);ca._id="xbulletaxis";ca.domain=[ea,V];ca.setScale();V=A.calcTicks(ca);ea=A.makeTransFn(ca);var ba=A.getTickSigns(ca)[2];T=T.t+T.h;ca.visible&&(A.drawTicks(J,ca,{vals:"inside"===ca.ticks?A.clipEnds(ca,V):V,layer:N,path:A.makeTickPath(ca,T,ba),transFn:ea}),A.drawLabels(J,ca,{vals:V,layer:N,transFn:ea,labelFns:A.makeLabelFns(ca,T)}));J=[Q].concat(P.gauge.steps);J=I.selectAll("g.bg-bullet").data(J);J.enter().append("g").classed("bg-bullet",!0).append("rect");J.select("rect").call(L).call(k);
J.exit().remove();J=I.selectAll("g.value-bullet").data([P.gauge.bar]);J.enter().append("g").classed("value-bullet",!0).append("rect");J.select("rect").attr("height",E).attr("y",(Y-E)/2).call(k);Z&&0<Z.duration?J.select("rect").transition().duration(Z.duration).ease(Z.easing).each("end",function(){aa&&aa()}).each("interrupt",function(){aa&&aa()}).attr("width",Math.max(0,ca.c2p(Math.min(P.gauge.axis.range[1],M[0].y)))):J.select("rect").attr("width","number"===typeof M[0].y?Math.max(0,ca.c2p(Math.min(P.gauge.axis.range[1],
M[0].y))):0);J.exit().remove();M=M.filter(function(){return P.gauge.threshold.value});M=I.selectAll("g.threshold-bullet").data(M);M.enter().append("g").classed("threshold-bullet",!0).append("line");M.select("line").attr("x1",ca.c2p(P.gauge.threshold.value)).attr("x2",ca.c2p(P.gauge.threshold.value)).attr("y1",(1-P.gauge.threshold.thickness)/2*Y).attr("y2",(1-(1-P.gauge.threshold.thickness)/2)*Y).call(C.stroke,P.gauge.threshold.line.color).style("stroke-width",P.gauge.threshold.line.width);M.exit().remove();
I=I.selectAll("g.gauge-outline").data([O]);I.enter().append("g").classed("gauge-outline",!0).append("rect");I.select("rect").call(L).call(k);I.exit().remove()}function n(J,I,M,E){function L(ua){var na=Q.gauge.axis.range[0];ua=(ua-na)/(Q.gauge.axis.range[1]-na)*Math.PI-ba;return ua<-ba?-ba:ua>ba?ba:ua}function P(ua){return d.svg.arc().innerRadius((V+T)/2-ua/2*(T-V)).outerRadius((V+T)/2+ua/2*(T-V)).startAngle(-ba)}function N(ua){ua.attr("d",function(na){return P(na.thickness).startAngle(L(na.range[0])).endAngle(L(na.range[1]))()})}
var Q=M[0].trace,O=E.size,T=E.radius,V=E.innerRadius,Z=E.gaugeBg;I=E.gaugeOutline;var aa=[O.l+O.w/2,O.t+O.h/2+T/2];O=E.gauge;var Y=E.layer,ea=E.transitionOpts,ca=E.onComplete,ba=Math.PI/2;O.enter().append("g").classed("angular",!0);O.attr("transform",f(aa[0],aa[1]));Y.enter().append("g").classed("angularaxis",!0).classed("crisp",!0);Y.selectAll("g.xangularaxistick,path,text").remove();var ka=e(J,Q.gauge.axis);ka.type="linear";ka.range=Q.gauge.axis.range;ka._id="xangularaxis";ka.setScale();var qa=
function(ua){return(ka.range[0]-ua.x)/(ka.range[1]-ka.range[0])*Math.PI+Math.PI},pa={},oa=A.makeLabelFns(ka,0).labelStandoff;pa.xFn=function(ua){ua=qa(ua);return Math.cos(ua)*oa};pa.yFn=function(ua){var na=qa(ua);return-Math.sin(na)*(oa+ua.fontSize*(0<Math.sin(na)?.2:1))+Math.abs(Math.cos(na))*ua.fontSize*q};pa.anchorFn=function(ua){ua=qa(ua);ua=Math.cos(ua);return.1>Math.abs(ua)?"middle":0<ua?"start":"end"};pa.heightFn=function(ua,na,wa){ua=qa(ua);return-.5*(1+Math.sin(ua))*wa};var ja=function(ua){return f(aa[0]+
T*Math.cos(ua),aa[1]-T*Math.sin(ua))};var ra=function(ua){return ja(qa(ua))};var ha=function(ua){ua=qa(ua);return ja(ua)+"rotate("+-h(ua)+")"};E=A.calcTicks(ka);var la=A.getTickSigns(ka)[2];ka.visible&&(la="inside"===ka.ticks?-1:1,A.drawTicks(J,ka,{vals:E,layer:Y,path:"M"+(ka.linewidth||1)/2*la+",0h"+la*ka.ticklen,transFn:ha}),A.drawLabels(J,ka,{vals:E,layer:Y,transFn:ra,labelFns:pa}));J=[Z].concat(Q.gauge.steps);J=O.selectAll("g.bg-arc").data(J);J.enter().append("g").classed("bg-arc",!0).append("path");
J.select("path").call(N).call(k);J.exit().remove();J=P(Q.gauge.bar.thickness);Z=O.selectAll("g.value-arc").data([Q.gauge.bar]);Z.enter().append("g").classed("value-arc",!0).append("path");Y=Z.select("path");ea&&0<ea.duration?(Y.transition().duration(ea.duration).ease(ea.easing).each("end",function(){ca&&ca()}).each("interrupt",function(){ca&&ca()}).attrTween("d",a(J,L(M[0].lastY),L(M[0].y))),Q._lastValue=M[0].y):Y.attr("d","number"===typeof M[0].y?J.endAngle(L(M[0].y)):"M0,0Z");Y.call(k);Z.exit().remove();
J=[];(M=Q.gauge.threshold.value)&&J.push({range:[M,M],color:Q.gauge.threshold.color,line:{color:Q.gauge.threshold.line.color,width:Q.gauge.threshold.line.width},thickness:Q.gauge.threshold.thickness});M=O.selectAll("g.threshold-arc").data(J);M.enter().append("g").classed("threshold-arc",!0).append("path");M.select("path").call(N).call(k);M.exit().remove();I=O.selectAll("g.gauge-outline").data([I]);I.enter().append("g").classed("gauge-outline",!0).append("path");I.select("path").call(N).call(k);I.exit().remove()}
function p(J,I,M,E){function L(la,ua,na,wa){if(!la.match("s")||0<=na===0<=wa||ua(na).slice(-1).match(H)||ua(wa).slice(-1).match(H))return ua;la=la.slice().replace("s","f").replace(/\d+/,function(Fa){return parseInt(Fa)-1});var Ca=e(J,{tickformat:la});return function(Fa){return 1>Math.abs(Fa)?A.tickText(Ca,Fa).text:ua(Fa)}}function P(){function la(){var Xa="number"===typeof M[0].y?Ca+na(M[0].y)+wa:"-";Fa.text(Xa).call(t.font,Q.number.font).call(w.convertToTspans,J)}var ua=e(J,{tickformat:Q.number.valueformat},
Q._range);ua.setScale();A.prepTicks(ua);var na=function(Xa){return A.tickText(ua,Xa).text},wa=Q.number.suffix,Ca=Q.number.prefix,Fa=ea.select("text.number");aa&&0<aa.duration?Fa.transition().duration(aa.duration).ease(aa.easing).each("end",function(){la();Y&&Y()}).each("interrupt",function(){la();Y&&Y()}).attrTween("text",function(){var Xa=d.select(this),ab=d.interpolateNumber(M[0].lastY,M[0].y);Q._lastValue=M[0].y;var gb=L(Q.number.valueformat,na,M[0].lastY,M[0].y);return function(bb){Xa.text(Ca+
gb(ab(bb))+wa)}}):la();ca=m(Ca+na(M[0].y)+wa,Q.number.font,Z,J);return Fa}function N(){function la(){Xa.text(Ca(wa(M[0]),na)).call(C.fill,Fa(M[0])).call(w.convertToTspans,J)}var ua=e(J,{tickformat:Q.delta.valueformat},Q._range);ua.setScale();A.prepTicks(ua);var na=function(ab){return A.tickText(ua,ab).text},wa=function(ab){return Q.delta.relative?ab.relativeDelta:ab.delta},Ca=function(ab,gb){return 0===ab||"number"!==typeof ab||isNaN(ab)?"-":(0<ab?Q.delta.increasing.symbol:Q.delta.decreasing.symbol)+
gb(ab)},Fa=function(ab){return 0<=ab.delta?Q.delta.increasing.color:Q.delta.decreasing.color};void 0===Q._deltaLastValue&&(Q._deltaLastValue=wa(M[0]));var Xa=ea.select("text.delta");Xa.call(t.font,Q.delta.font).call(C.fill,Fa({delta:Q._deltaLastValue}));aa&&0<aa.duration?Xa.transition().duration(aa.duration).ease(aa.easing).tween("text",function(){var ab=d.select(this),gb=wa(M[0]),bb=Q._deltaLastValue,La=L(Q.delta.valueformat,na,bb,gb),kb=d.interpolateNumber(bb,gb);Q._deltaLastValue=gb;return function(mb){ab.text(Ca(kb(mb),
La));ab.call(C.fill,Fa({delta:kb(mb)}))}}).each("end",function(){la();Y&&Y()}).each("interrupt",function(){la();Y&&Y()}):la();ba=m(Ca(wa(M[0]),na),Q.delta.font,Z,J);return Xa}var Q=M[0].trace,O=E.numbersX,T=E.numbersY,V=Q.align||"center",Z=u[V],aa=E.transitionOpts,Y=E.onComplete,ea=g.ensureSingle(I,"g","numbers"),ca,ba;I=[];Q._hasNumber&&I.push("number");Q._hasDelta&&(I.push("delta"),"left"===Q.delta.position&&I.reverse());I=ea.selectAll("text").data(I);I.enter().append("text");I.attr("text-anchor",
function(){return Z}).attr("class",function(la){return la}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null);I.exit().remove();var ka=Q.mode+Q.align;if(Q._hasDelta){var qa=N();ka+=Q.delta.position+Q.delta.font.size+Q.delta.font.family+Q.delta.valueformat;ka+=Q.delta.increasing.symbol+Q.delta.decreasing.symbol;var pa=ba}Q._hasNumber&&(P(),ka+=Q.number.font.size+Q.number.font.family+Q.number.valueformat+Q.number.suffix+Q.number.prefix,pa=ca);if(Q._hasDelta&&Q._hasNumber){I=[(ca.left+ca.right)/
2,(ca.top+ca.bottom)/2];var oa=[(ba.left+ba.right)/2,(ba.top+ba.bottom)/2],ja=.75*Q.delta.font.size;if("left"===Q.delta.position){var ra=c(Q,"deltaPos",0,-1*(ca.width*F[Q.align]+ba.width*(1-F[Q.align])+ja),ka,Math.min);var ha=I[1]-oa[1];pa={width:ca.width+ba.width+ja,height:Math.max(ca.height,ba.height),left:ba.left+ra,right:ca.right,top:Math.min(ca.top,ba.top+ha),bottom:Math.max(ca.bottom,ba.bottom+ha)}}"right"===Q.delta.position&&(ra=c(Q,"deltaPos",0,ca.width*(1-F[Q.align])+ba.width*F[Q.align]+
ja,ka,Math.max),ha=I[1]-oa[1],pa={width:ca.width+ba.width+ja,height:Math.max(ca.height,ba.height),left:ca.left,right:ba.right+ra,top:Math.min(ca.top,ba.top+ha),bottom:Math.max(ca.bottom,ba.bottom+ha)});"bottom"===Q.delta.position&&(ra=null,ha=ba.height,pa={width:Math.max(ca.width,ba.width),height:ca.height+ba.height,left:Math.min(ca.left,ba.left),right:Math.max(ca.right,ba.right),top:ca.bottom-ca.height,bottom:ca.bottom+ba.height});"top"===Q.delta.position&&(ra=null,ha=ca.top,pa={width:Math.max(ca.width,
ba.width),height:ca.height+ba.height,left:Math.min(ca.left,ba.left),right:Math.max(ca.right,ba.right),top:ca.bottom-ca.height-ba.height,bottom:ca.bottom});qa.attr({dx:ra,dy:ha})}(Q._hasNumber||Q._hasDelta)&&ea.attr("transform",function(){var la=E.numbersScaler(pa);ka+=la[2];la=c(Q,"numbersScale",1,la[0],ka,Math.min);Q._scaleNumbers||(la=1);var ua=Q._isAngular?T-la*pa.bottom:T-la*(pa.top+pa.bottom)/2;Q._numbersTop=la*pa.top+ua;var na=pa[V];"center"===V&&(na=(pa.left+pa.right)/2);na=O-la*na;na=c(Q,
"numbersTranslate",0,na,ka,Math.max);return f(na,ua)+" scale("+la+")"})}function k(J){J.each(function(I){C.stroke(d.select(this),I.line.color)}).each(function(I){C.fill(d.select(this),I.color)}).style("stroke-width",function(I){return I.line.width})}function a(J,I,M){return function(){var E=d.interpolate(I,M);return function(L){return J.endAngle(E(L))()}}}function e(J,I,M){function E(N,Q){return g.coerce(L,P,B,N,Q)}J=J._fullLayout;var L=g.extendFlat({type:"linear",ticks:"outside",range:M,showline:!0},
I),P={type:"linear",_id:"x"+I._id};I={letter:"x",font:J.font,noHover:!0,noTickson:!0};z(L,P,E,I,J);y(L,P,E,I);return P}function f(J,I){return"translate("+J+","+I+")"}function l(J,I,M){return[Math.min(I/J.width,M/J.height),J,I+"x"+M]}function m(J,I,M,E){var L=document.createElementNS("http://www.w3.org/2000/svg","text");L=d.select(L);L.text(J).attr("x",0).attr("y",0).attr("text-anchor",M).attr("data-unformatted",J).call(w.convertToTspans,E).call(t.font,I);return t.bBox(L.node())}function c(J,I,M,E,
L,P){I="_cache"+I;J[I]&&J[I].key===L||(J[I]={key:L,value:M});M=g.aggNums(P,null,[J[I].value,E],2);return J[I].value=M}var d=b("d3"),g=b("../../lib"),h=g.rad2deg,q=b("../../constants/alignment").MID_SHIFT,t=b("../../components/drawing"),v=b("./constants"),w=b("../../lib/svg_text_utils"),A=b("../../plots/cartesian/axes"),z=b("../../plots/cartesian/axis_defaults"),y=b("../../plots/cartesian/position_defaults"),B=b("../../plots/cartesian/layout_attributes"),C=b("../../components/color"),u={left:"start",
center:"middle",right:"end"},F={left:0,center:.5,right:1},H=/[yzafpnµmkMGTPEZY]/;D.exports=function(J,I,M,E){var L=J._fullLayout,P;M&&0<M.duration&&E&&(P=E());g.makeTraceGroups(L._indicatorlayer,I,"trace").each(function(N){var Q=N[0].trace,O=d.select(this),T=Q._hasGauge,V=Q._isAngular,Z=Q._isBullet,aa=Q.domain,Y={w:L._size.w*(aa.x[1]-aa.x[0]),h:L._size.h*(aa.y[1]-aa.y[0]),l:L._size.l+L._size.w*aa.x[0],r:L._size.r+L._size.w*(1-aa.x[1]),t:L._size.t+L._size.h*(1-aa.y[1]),b:L._size.b+L._size.h*aa.y[0]},
ea=Y.l+Y.w/2,ca=Y.t+Y.h/2,ba=Math.min(Y.w/2,Y.h),ka=v.innerRadius*ba;aa=Q.align||"center";var qa=ca;if(T){if(V){var pa=ea;qa=ca+ba/2;var oa=function(na){var wa=.9*ka;return[wa/Math.sqrt(na.width/2*(na.width/2)+na.height*na.height),na,wa]}}if(Z){var ja=v.bulletPadding;pa=1-v.bulletNumberDomainSize+ja;pa=Y.l+(pa+(1-pa)*F[aa])*Y.w;oa=function(na){return l(na,(v.bulletNumberDomainSize-ja)*Y.w,Y.h)}}}else pa=Y.l+F[aa]*Y.w,oa=function(na){return l(na,Y.w,Y.h)};p(J,O,N,{numbersX:pa,numbersY:qa,numbersScaler:oa,
transitionOpts:M,onComplete:P});if(T){var ra={range:Q.gauge.axis.range,color:Q.gauge.bgcolor,line:{color:Q.gauge.bordercolor,width:0},thickness:1};var ha={range:Q.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:Q.gauge.bordercolor,width:Q.gauge.borderwidth},thickness:1}}pa=O.selectAll("g.angular").data(V?N:[]);pa.exit().remove();var la=O.selectAll("g.angularaxis").data(V?N:[]);la.exit().remove();V&&n(J,O,N,{radius:ba,innerRadius:ka,gauge:pa,layer:la,size:Y,gaugeBg:ra,gaugeOutline:ha,transitionOpts:M,
onComplete:P});pa=O.selectAll("g.bullet").data(Z?N:[]);pa.exit().remove();oa=O.selectAll("g.bulletaxis").data(Z?N:[]);oa.exit().remove();Z&&r(J,O,N,{gauge:pa,layer:oa,size:Y,gaugeBg:ra,gaugeOutline:ha,transitionOpts:M,onComplete:P});var ua=O.selectAll("text.title").data(N);ua.exit().remove();ua.enter().append("text").classed("title",!0);ua.attr("text-anchor",function(){return Z?u.right:u[Q.title.align]}).text(Q.title.text).call(t.font,Q.title.font).call(w.convertToTspans,J);ua.attr("transform",function(){var na=
Y.l+Y.w*F[Q.title.align],wa,Ca=v.titlePadding,Fa=t.bBox(ua.node());T?(V&&(wa=Q.gauge.axis.visible?t.bBox(la.node()).top-Ca-Fa.bottom:Y.t+Y.h/2-ba/2-Fa.bottom-Ca),Z&&(wa=qa-(Fa.top+Fa.bottom)/2,na=Y.l-v.bulletPadding*Y.w)):wa=Q._numbersTop-Ca-Fa.bottom;return f(na,wa)})})}},{"../../components/color":615,"../../components/drawing":637,"../../constants/alignment":717,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_defaults":799,"../../plots/cartesian/layout_attributes":811,
"../../plots/cartesian/position_defaults":814,"./constants":1087,d3:169}],1091:[function(b,D,G){function r(f){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function n(f){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}G=b("../../components/colorscale/attributes");var p=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../mesh3d/attributes"),a=b("../../plots/attributes"),e=
b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;D=D.exports=b(e({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",
dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:r("x"),y:r("y"),z:r("z")},caps:{x:n("x"),y:n("y"),z:n("z")},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:p(),showlegend:e({},a.showlegend,{dflt:!1})},G("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:k.opacity,lightposition:k.lightposition,lighting:k.lighting,flatshading:k.flatshading,contour:k.contour,hoverinfo:e({},a.hoverinfo)}),"calc","nested");
D.flatshading.dflt=!0;D.lighting.facenormalsepsilon.dflt=0;D.x.editType=D.y.editType=D.z.editType=D.value.editType="calc+clearAxisTypes";D.transforms=void 0},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875,"../mesh3d/attributes":1096}],1092:[function(b,D,G){var r=b("../../components/colorscale/calc"),n=b("../streamtube/calc").processGrid,p=b("../streamtube/calc").filter;D.exports=
function(k,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length);a._x=p(a.x,a._len);a._y=p(a.y,a._len);a._z=p(a.z,a._len);a._value=p(a.value,a._len);var e=n(a);a._gridFill=e.fill;a._Xs=e.Xs;a._Ys=e.Ys;a._Zs=e.Zs;a._len=e.len;e=Infinity;for(var f=-Infinity,l=0;l<a._len;l++){var m=a._value[l];e=Math.min(e,m);f=Math.max(f,m)}a._minValues=e;a._maxValues=f;a._vMin=void 0===a.isomin||null===a.isomin?e:a.isomin;a._vMax=void 0===a.isomax||null===a.isomin?f:a.isomax;r(k,a,{vals:[a._vMin,a._vMax],
containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623,"../streamtube/calc":1262}],1093:[function(b,D,G){function r(c,d,g){this.scene=c;this.uid=g;this.mesh=d;this.name="";this.data=null;this.showContour=!1}function n(c){function d(){ab=[];gb=[];bb=[];La=[];qa=ka=0}function g(mb,ya,Ia,Na){ab.push(mb);gb.push(ya);bb.push(Ia);La.push(Na);ka++;return ka-1}function h(mb,ya,Ia){for(var Na=[],Ta=0;Ta<mb.length;Ta++)Na[Ta]=mb[Ta]*(1-Ia)+Ia*ya[Ta];return Na}function q(mb,ya){return"all"===
mb||null===mb?!0:-1<mb.indexOf(ya)}function t(mb,ya,Ia){qa=ka;var Na=[ya];var Ta=[Ia];if(1<=kb)Na=[ya],Ta=[Ia];else if(0<kb){var hb=Ia;Na=ya[0];Ta=ya[1];ya=ya[2];for(var Ya=[],Ga=0;Ga<Na.length;Ga++)Ya[Ga]=(Na[Ga]+Ta[Ga]+ya[Ga])/3;var Pa=Math.sqrt(1-kb);Ga=h(Ya,Na,Pa);Ia=h(Ya,Ta,Pa);var Va=h(Ya,ya,Pa);Ya=hb[0];Pa=hb[1];hb=hb[2];ya=[[Na,Ta,Ia],[Ia,Ga,Na],[Ta,ya,Va],[Va,Ia,Ta],[ya,Na,Ga],[Ga,Va,ya]];Ta=[[Ya,Pa,-1],[-1,-1,Ya],[Pa,hb,-1],[-1,-1,Pa],[hb,Ya,-1],[-1,-1,hb]];Na=ya}for(hb=0;hb<Na.length;hb++){ya=
Na[hb];Ia=Ta[hb];Ga=[];for(Ya=0;3>Ya;Ya++){var va=ya[Ya][0],Ea=ya[Ya][1];Va=ya[Ya][2];Pa=ya[Ya][3];if(-1<Ia[Ya])var Qa=Ia[Ya];else a:{Qa=La.length;for(var $a=qa;$a<Qa;$a++)if(va===ab[$a]&&Ea===gb[$a]&&Va===bb[$a]){Qa=$a;break a}Qa=-1}-1<Qa?Ga[Ya]=Qa:(Qa=Ga,$a=Ya,Pa=null===mb?Pa:mb,Qa[$a]=g(va,Ea,Va,Pa))}ya=Ga[1];Ia=Ga[2];c._meshI.push(Ga[0]);c._meshJ.push(ya);c._meshK.push(Ia);ba++}}function v(mb,ya,Ia){var Na=function(Ta,hb,Ya){t(mb,[ya[Ta],ya[hb],ya[Ya]],[Ia[Ta],Ia[hb],Ia[Ya]])};Na(0,1,2);Na(2,
3,0)}function w(mb,ya,Ia){var Na=function(Ta,hb,Ya){t(mb,[ya[Ta],ya[hb],ya[Ya]],[Ia[Ta],Ia[hb],Ia[Ya]])};Na(0,1,2);Na(3,0,1);Na(2,3,0);Na(1,2,3)}function A(mb,ya,Ia,Na){var Ta=mb[3];Ta<Ia&&(Ta=Ia);Ta>Na&&(Ta=Na);Ia=(mb[3]-Ta)/(mb[3]-ya[3]+1E-9);Na=[];for(Ta=0;4>Ta;Ta++)Na[Ta]=(1-Ia)*mb[Ta]+Ia*ya[Ta];return Na}function z(mb,ya,Ia){return mb>=ya&&mb<=Ia}function y(mb){var ya=.001*(Xa-Fa);return mb>=Fa-ya&&mb<=Xa+ya}function B(mb){for(var ya=[],Ia=0;4>Ia;Ia++){var Na=mb[Ia];ya.push([c._x[Na],c._y[Na],
c._z[Na],c._value[Na]])}return ya}function C(mb,ya,Ia,Na,Ta,hb){hb||(hb=1);Ia=[-1,-1,-1];var Ya=!1,Ga=[z(ya[0][3],Na,Ta),z(ya[1][3],Na,Ta),z(ya[2][3],Na,Ta)];if(!Ga[0]&&!Ga[1]&&!Ga[2])return!1;var Pa=function(va,Ea,Qa){return y(Ea[0][3])&&y(Ea[1][3])&&y(Ea[2][3])?(t(va,Ea,Qa),!0):3>hb?C(va,Ea,Qa,Fa,Xa,++hb):!1};if(Ga[0]&&Ga[1]&&Ga[2])return Pa(mb,ya,Ia)||Ya;var Va=!1;[[0,1,2],[2,0,1],[1,2,0]].forEach(function(va){if(Ga[va[0]]&&Ga[va[1]]&&!Ga[va[2]]){var Ea=ya[va[0]],Qa=ya[va[1]],$a=ya[va[2]],eb=A($a,
Ea,Na,Ta);$a=A($a,Qa,Na,Ta);Ya=Pa(mb,[$a,eb,Ea],[-1,-1,Ia[va[0]]])||Ya;Ya=Pa(mb,[Ea,Qa,$a],[Ia[va[0]],Ia[va[1]],-1])||Ya;Va=!0}});if(Va)return Ya;[[0,1,2],[1,2,0],[2,0,1]].forEach(function(va){if(Ga[va[0]]&&!Ga[va[1]]&&!Ga[va[2]]){var Ea=ya[va[0]],Qa=ya[va[2]],$a=A(ya[va[1]],Ea,Na,Ta);Qa=A(Qa,Ea,Na,Ta);Ya=Pa(mb,[Qa,$a,Ea],[-1,-1,Ia[va[0]]])||Ya;Va=!0}});return Ya}function u(mb,ya,Ia,Na){var Ta=!1,hb=B(ya),Ya=[z(hb[0][3],Ia,Na),z(hb[1][3],Ia,Na),z(hb[2][3],Ia,Na),z(hb[3][3],Ia,Na)];if(!(Ya[0]||Ya[1]||
Ya[2]||Ya[3]))return Ta;if(Ya[0]&&Ya[1]&&Ya[2]&&Ya[3])return ca&&(Ta=w(mb,hb,ya)||Ta),Ta;var Ga=!1;[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Pa){if(Ya[Pa[0]]&&Ya[Pa[1]]&&Ya[Pa[2]]&&!Ya[Pa[3]]){var Va=hb[Pa[0]],va=hb[Pa[1]],Ea=hb[Pa[2]],Qa=hb[Pa[3]];ca?Ta=t(mb,[Va,va,Ea],[ya[Pa[0]],ya[Pa[1]],ya[Pa[2]]])||Ta:(Pa=A(Qa,Va,Ia,Na),va=A(Qa,va,Ia,Na),Ea=A(Qa,Ea,Ia,Na),Ta=t(null,[Pa,va,Ea],[-1,-1,-1])||Ta);Ga=!0}});if(Ga)return Ta;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,
0]].forEach(function(Pa){if(Ya[Pa[0]]&&Ya[Pa[1]]&&!Ya[Pa[2]]&&!Ya[Pa[3]]){var Va=hb[Pa[0]],va=hb[Pa[1]],Ea=hb[Pa[2]],Qa=hb[Pa[3]],$a=A(Ea,Va,Ia,Na);Ea=A(Ea,va,Ia,Na);var eb=A(Qa,va,Ia,Na);Qa=A(Qa,Va,Ia,Na);ca?(Ta=t(mb,[Va,Qa,$a],[ya[Pa[0]],-1,-1])||Ta,Ta=t(mb,[va,Ea,eb],[ya[Pa[1]],-1,-1])||Ta):Ta=v(null,[$a,Ea,eb,Qa],[-1,-1,-1,-1])||Ta;Ga=!0}});if(Ga)return Ta;[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Pa){if(Ya[Pa[0]]&&!Ya[Pa[1]]&&!Ya[Pa[2]]&&!Ya[Pa[3]]){var Va=hb[Pa[0]],va=hb[Pa[2]],
Ea=hb[Pa[3]],Qa=A(hb[Pa[1]],Va,Ia,Na);va=A(va,Va,Ia,Na);Ea=A(Ea,Va,Ia,Na);ca?(Ta=t(mb,[Va,Qa,va],[ya[Pa[0]],-1,-1])||Ta,Ta=t(mb,[Va,va,Ea],[ya[Pa[0]],-1,-1])||Ta,Ta=t(mb,[Va,Ea,Qa],[ya[Pa[0]],-1,-1])||Ta):Ta=t(null,[Qa,va,Ea],[-1,-1,-1])||Ta;Ga=!0}});return Ta}function F(mb,ya,Ia,Na,Ta,hb,Ya,Ga,Pa,Va,va){var Ea=!1;ea&&(q(mb,"A")&&(Ea=u(null,[ya,Ia,Na,hb],Va,va)||Ea),q(mb,"B")&&(Ea=u(null,[Ia,Na,Ta,Pa],Va,va)||Ea),q(mb,"C")&&(Ea=u(null,[Ia,hb,Ya,Pa],Va,va)||Ea),q(mb,"D")&&(Ea=u(null,[Na,hb,Ga,Pa],
Va,va)||Ea),q(mb,"E")&&(Ea=u(null,[Ia,Na,hb,Pa],Va,va)||Ea));ca&&(Ea=u(mb,[Ia,Na,hb,Pa],Va,va)||Ea);return Ea}function H(mb,ya,Ia,Na,Ta,hb,Ya,Ga){return[!0===Ga[0]?!0:C(mb,B([ya,Ia,Na]),[ya,Ia,Na],hb,Ya),!0===Ga[1]?!0:C(mb,B([Na,Ta,ya]),[Na,Ta,ya],hb,Ya)]}function J(mb,ya,Ia,Na,Ta,hb,Ya,Ga,Pa){return Ga?H(mb,ya,Ia,Ta,Na,hb,Ya,Pa):H(mb,Ia,Ta,Na,ya,hb,Ya,Pa)}function I(mb,ya,Ia,Na,Ta,hb,Ya){var Ga=!1,Pa=function(){Ga=C(mb,[Ea,Qa,$a],[-1,-1,-1],Ta,hb)||Ga;Ga=C(mb,[$a,eb,Ea],[-1,-1,-1],Ta,hb)||Ga},Va=
Ya[0],va=Ya[1];Ya=Ya[2];if(Va){var Ea=h(B([na(ya,Ia-0,Na-0)])[0],B([na(ya-1,Ia-0,Na-0)])[0],Va);var Qa=h(B([na(ya,Ia-0,Na-1)])[0],B([na(ya-1,Ia-0,Na-1)])[0],Va);var $a=h(B([na(ya,Ia-1,Na-1)])[0],B([na(ya-1,Ia-1,Na-1)])[0],Va);var eb=h(B([na(ya,Ia-1,Na-0)])[0],B([na(ya-1,Ia-1,Na-0)])[0],Va);Pa()}va&&(Ea=h(B([na(ya-0,Ia,Na-0)])[0],B([na(ya-0,Ia-1,Na-0)])[0],va),Qa=h(B([na(ya-0,Ia,Na-1)])[0],B([na(ya-0,Ia-1,Na-1)])[0],va),$a=h(B([na(ya-1,Ia,Na-1)])[0],B([na(ya-1,Ia-1,Na-1)])[0],va),eb=h(B([na(ya-1,Ia,
Na-0)])[0],B([na(ya-1,Ia-1,Na-0)])[0],va),Pa());Ya&&(Ea=h(B([na(ya-0,Ia-0,Na)])[0],B([na(ya-0,Ia-0,Na-1)])[0],Ya),Qa=h(B([na(ya-0,Ia-1,Na)])[0],B([na(ya-0,Ia-1,Na-1)])[0],Ya),$a=h(B([na(ya-1,Ia-1,Na)])[0],B([na(ya-1,Ia-1,Na-1)])[0],Ya),eb=h(B([na(ya-1,Ia-0,Na)])[0],B([na(ya-1,Ia-0,Na-1)])[0],Ya),Pa());return Ga}function M(mb,ya,Ia,Na,Ta){for(var hb=[],Ya=0,Ga=0;Ga<ya.length;Ga++)for(var Pa=ya[Ga],Va=1;Va<la;Va++)for(var va=1;va<ha;va++)hb.push(J(mb,na(Pa,va-1,Va-1),na(Pa,va-1,Va),na(Pa,va,Va-1),na(Pa,
va,Va),Ia,Na,(Pa+va+Va)%2,Ta&&Ta[Ya]?Ta[Ya]:[])),Ya++;return hb}function E(mb,ya,Ia,Na,Ta){for(var hb=[],Ya=0,Ga=0;Ga<ya.length;Ga++)for(var Pa=ya[Ga],Va=1;Va<ra;Va++)for(var va=1;va<la;va++)hb.push(J(mb,na(Va-1,Pa,va-1),na(Va,Pa,va-1),na(Va-1,Pa,va),na(Va,Pa,va),Ia,Na,(Va+Pa+va)%2,Ta&&Ta[Ya]?Ta[Ya]:[])),Ya++;return hb}function L(mb,ya,Ia,Na,Ta){for(var hb=[],Ya=0,Ga=0;Ga<ya.length;Ga++)for(var Pa=ya[Ga],Va=1;Va<ha;Va++)for(var va=1;va<ra;va++)hb.push(J(mb,na(va-1,Va-1,Pa),na(va-1,Va,Pa),na(va,Va-
1,Pa),na(va,Va,Pa),Ia,Na,(va+Va+Pa)%2,Ta&&Ta[Ya]?Ta[Ya]:[])),Ya++;return hb}function P(mb,ya,Ia){for(var Na=1;Na<la;Na++)for(var Ta=1;Ta<ha;Ta++)for(var hb=1;hb<ra;hb++){var Ya=mb,Ga=na(hb-1,Ta-1,Na-1),Pa=na(hb-1,Ta-1,Na),Va=na(hb-1,Ta,Na-1),va=na(hb-1,Ta,Na),Ea=na(hb,Ta-1,Na-1),Qa=na(hb,Ta-1,Na),$a=na(hb,Ta,Na-1),eb=na(hb,Ta,Na),pb=ya,Za=Ia,nb=Ya;(hb+Ta+Na)%2?(ea&&"even"===Ya&&(nb=null),F(nb,Ga,Pa,Va,va,Ea,Qa,$a,eb,pb,Za)):(ea&&"odd"===Ya&&(nb=null),F(nb,eb,$a,Qa,Ea,va,Va,Pa,Ga,pb,Za))}}function N(mb,
ya,Ia){ca=!0;P(mb,ya,Ia);ca=!1}function Q(mb,ya,Ia){ea=!0;P(mb,ya,Ia);ea=!1}function O(mb,ya){for(var Ia=[];mb<ya;mb++)Ia.push(mb);return Ia}function T(){for(var mb=0;mb<ra;mb++)for(var ya=0;ya<ha;ya++)for(var Ia=0;Ia<la;Ia++){var Na=na(mb,ya,Ia);g(c._x[Na],c._y[Na],c._z[Na],c._value[Na])}}c._meshI=[];c._meshJ=[];c._meshK=[];var V=c.surface.show,Z=c.spaceframe.show,aa=c.surface.fill,Y=c.spaceframe.fill,ea=!1,ca=!1,ba=0,ka,qa,pa=c._Xs,oa=c._Ys,ja=c._Zs,ra=pa.length,ha=oa.length,la=ja.length,ua=m.indexOf(c._gridFill.replace(/-/g,
"").replace(/\+/g,"")),na=function(mb,ya,Ia){switch(ua){case 5:return Ia+la*ya+la*ha*mb;case 4:return Ia+la*mb+la*ra*ya;case 3:return ya+ha*Ia+ha*la*mb;case 2:return ya+ha*mb+ha*ra*Ia;case 1:return mb+ra*Ia+ra*la*ya;default:return mb+ra*ya+ra*ha*Ia}},wa=c._minValues,Ca=c._maxValues,Fa=c._vMin,Xa=c._vMax,ab,gb,bb,La,kb;(function(){d();T();Z&&Y&&(kb=Y,N(null,Fa,Xa));if(V&&aa){kb=aa;for(var mb=c.surface.pattern,ya=c.surface.count,Ia=0;Ia<ya;Ia++){var Na=1===ya?.5:Ia/(ya-1);Na=(1-Na)*Fa+Na*Xa;Na=Math.abs(Na-
wa)>Math.abs(Na-Ca)?[wa,Na]:[Na,Ca];Q(mb,Na[0],Na[1])}}var Ta=[[Math.min(Fa,Ca),Math.max(Fa,Ca)],[Math.min(wa,Xa),Math.max(wa,Xa)]];["x","y","z"].forEach(function(hb){for(var Ya=[],Ga=0;Ga<Ta.length;Ga++){var Pa=0,Va=Ta[Ga][0],va=Ta[Ga][1],Ea=c.slices[hb];if(Ea.show&&Ea.fill){kb=Ea.fill;var Qa=[],$a=[],eb=[];if(Ea.locations.length)for(var pb=0;pb<Ea.locations.length;pb++){var Za=l(Ea.locations[pb],"x"===hb?pa:"y"===hb?oa:ja);0===Za.distRatio?Qa.push(Za.id):0<Za.id&&($a.push(Za.id),"x"===hb?eb.push([Za.distRatio,
0,0]):"y"===hb?eb.push([0,Za.distRatio,0]):eb.push([0,0,Za.distRatio]))}else Qa="x"===hb?O(1,ra-1):"y"===hb?O(1,ha-1):O(1,la-1);if(0<$a.length){if("x"===hb){Ea=Pa;pb=Va;Za=va;for(var nb=Ya[Pa],sb=[],Cb=0,Ib=0;Ib<$a.length;Ib++)for(var fc=$a[Ib],qc=1;qc<la;qc++)for(var Cc=1;Cc<ha;Cc++)sb.push(I(null,fc,Cc,qc,pb,Za,eb[Ib],nb&&nb[Cb]?nb[Cb]:[])),Cb++;Ya[Ea]=sb}else if("y"===hb){Ea=Pa;pb=Va;Za=va;nb=Ya[Pa];sb=[];for(Ib=Cb=0;Ib<$a.length;Ib++)for(fc=$a[Ib],qc=1;qc<ra;qc++)for(Cc=1;Cc<la;Cc++)sb.push(I(null,
qc,fc,Cc,pb,Za,eb[Ib],nb&&nb[Cb]?nb[Cb]:[])),Cb++;Ya[Ea]=sb}else{Ea=Pa;pb=Va;Za=va;nb=Ya[Pa];sb=[];for(Ib=Cb=0;Ib<$a.length;Ib++)for(fc=$a[Ib],qc=1;qc<ha;qc++)for(Cc=1;Cc<ra;Cc++)sb.push(I(null,Cc,qc,fc,pb,Za,eb[Ib],nb&&nb[Cb]?nb[Cb]:[])),Cb++;Ya[Ea]=sb}Pa++}0<Qa.length&&(Ya[Pa]="x"===hb?M(null,Qa,Va,va,Ya[Pa]):"y"===hb?E(null,Qa,Va,va,Ya[Pa]):L(null,Qa,Va,va,Ya[Pa]),Pa++)}Qa=c.caps[hb];Qa.show&&Qa.fill&&(kb=Qa.fill,Ya[Pa]="x"===hb?M(null,[0,ra-1],Va,va,Ya[Pa]):"y"===hb?E(null,[0,ha-1],Va,va,Ya[Pa]):
L(null,[0,la-1],Va,va,Ya[Pa]))}});0===ba&&d();c._meshX=ab;c._meshY=gb;c._meshZ=bb;c._meshIntensity=La;c._Xs=pa;c._Ys=oa;c._Zs=ja})();return c}var p=b("gl-mesh3d"),k=b("../../lib/gl_format_color").parseColorScale,a=b("../../lib/str2rgbarray"),e=b("../../components/colorscale").extractOpts,f=b("../../plots/gl3d/zip3"),l=function(c,d){for(var g=d.length-1;0<g;g--){var h=Math.min(d[g],d[g-1]),q=Math.max(d[g],d[g-1]);if(q>h&&h<c&&c<=q)return{id:g,distRatio:(q-c)/(q-h)}}return{id:0,distRatio:0}};b=r.prototype;
b.handlePick=function(c){if(c.object===this.mesh){var d=c.data.index,g=this.data._meshY[d],h=this.data._meshZ[d],q=this.data._Ys.length,t=this.data._Zs.length;d=l(this.data._meshX[d],this.data._Xs).id;g=l(g,this.data._Ys).id;h=l(h,this.data._Zs).id;q=c.index=h+t*g+t*q*d;c.traceCoordinate=[this.data._meshX[q],this.data._meshY[q],this.data._meshZ[q],this.data._value[q]];t=this.data.hovertext||this.data.text;Array.isArray(t)&&void 0!==t[q]?c.textLabel=t[q]:t&&(c.textLabel=t);return!0}};b.update=function(c){function d(q,
t,v,w){return t.map(function(A){return q.d2l(A,0,w)*v})}var g=this.scene,h=g.fullSceneLayout;this.data=n(c);g=f(d(h.xaxis,c._meshX,g.dataScale[0],c.xcalendar),d(h.yaxis,c._meshY,g.dataScale[1],c.ycalendar),d(h.zaxis,c._meshZ,g.dataScale[2],c.zcalendar));h=f(c._meshI,c._meshJ,c._meshK);g={positions:g,cells:h,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,
vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:a(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};h=e(c);g.vertexIntensity=c._meshIntensity;g.vertexIntensityBounds=[h.min,h.max];g.colormap=k(c);this.mesh.update(g)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};var m="xyz xzy yxz yzx zxy zyx".split(" ");D.exports={findNearestOnAxis:l,
generateIsoMeshes:n,createIsosurfaceTrace:function(c,d){var g=p({gl:c.glplot.gl}),h=new r(c,g,d.uid);g._trace=h;h.update(d);c.glplot.add(g);return h}}},{"../../components/colorscale":627,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../../plots/gl3d/zip3":850,"gl-mesh3d":292}],1094:[function(b,D,G){function r(e,f,l,m,c){l=c("isomin");var d=c("isomax");void 0!==d&&null!==d&&void 0!==l&&null!==l&&l>d&&(f.isomin=null,f.isomax=null);l=c("x");d=c("y");var g=c("z"),h=c("value");l&&l.length&&
d&&d.length&&g&&g.length&&h&&h.length?(p.getComponentMethod("calendars","handleTraceDefaults")(e,f,["x","y","z"],m),["x","y","z"].forEach(function(q){var t="caps."+q;c(t+".show")&&c(t+".fill");q="slices."+q;c(q+".show")&&(c(q+".fill"),c(q+".locations"))}),c("spaceframe.show")&&c("spaceframe.fill"),c("surface.show")&&(c("surface.count"),c("surface.fill"),c("surface.pattern")),c("contour.show")&&(c("contour.color"),c("contour.width")),"text hovertext hovertemplate lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading opacity".split(" ").forEach(function(q){c(q)}),
a(e,f,m,c,{prefix:"",cLetter:"c"}),f._length=null):f.visible=!1}var n=b("../../lib"),p=b("../../registry"),k=b("./attributes"),a=b("../../components/colorscale/defaults");D.exports={supplyDefaults:function(e,f,l,m){r(e,f,l,m,function(c,d){return n.coerce(e,f,k,c,d)})},supplyIsoDefaults:r}},{"../../components/colorscale/defaults":625,"../../lib":749,"../../registry":880,"./attributes":1091}],1095:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,
calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":839,"./attributes":1091,"./calc":1092,"./convert":1093,"./defaults":1094}],1096:[function(b,D,G){G=b("../../components/colorscale/attributes");var r=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../surface/attributes"),p=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;
D.exports=b({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:r({editType:"calc"}),delaunayaxis:{valType:"enumerated",values:["x",
"y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},G("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:n.opacity,flatshading:{valType:"boolean",
dflt:!1,editType:"calc"},contour:{show:b({},n.contours.x.show,{}),color:n.contours.x.color,width:n.contours.x.width,editType:"calc"},lightposition:{x:b({},n.lightposition.x,{dflt:1E5}),y:b({},n.lightposition.y,{dflt:1E5}),z:b({},n.lightposition.z,{dflt:0}),editType:"calc"},lighting:b({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1E-6,editType:"calc"},editType:"calc"},n.lighting),hoverinfo:b({},p.hoverinfo,{editType:"calc"}),
showlegend:b({},p.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../surface/attributes":1278}],1097:[function(b,D,G){var r=b("../../components/colorscale/calc");D.exports=function(n,p){p.intensity&&r(n,p,{vals:p.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":623}],1098:[function(b,D,G){function r(q,t,v){this.scene=q;this.uid=v;this.mesh=t;this.name="";this.color=
"#fff";this.data=null;this.showContour=!1}function n(q){for(var t=[],v=q.length,w=0;w<v;w++)t[w]=d(q[w]);return t}function p(q,t,v,w){for(var A=[],z=t.length,y=0;y<z;y++)A[y]=q.d2l(t[y],0,w)*v;return A}function k(q){for(var t=[],v=q.length,w=0;w<v;w++)t[w]=Math.round(q[w]);return t}function a(q,t){for(var v=q.length,w=0;w<v;w++)if(-.5>=q[w]||q[w]>=t-.5)return!1;return!0}var e=b("gl-mesh3d"),f=b("delaunay-triangulate"),l=b("alpha-shape"),m=b("convex-hull"),c=b("../../lib/gl_format_color").parseColorScale,
d=b("../../lib/str2rgbarray"),g=b("../../components/colorscale").extractOpts,h=b("../../plots/gl3d/zip3");b=r.prototype;b.handlePick=function(q){if(q.object===this.mesh){var t=q.index=q.data.index;q.traceCoordinate=q.data._cellCenter?q.data.dataCoordinate:[this.data.x[t],this.data.y[t],this.data.z[t]];var v=this.data.hovertext||this.data.text;Array.isArray(v)&&void 0!==v[t]?q.textLabel=v[t]:v&&(q.textLabel=v);return!0}};b.update=function(q){var t=this.scene,v=t.fullSceneLayout;this.data=q;var w=q.x.length;
t=h(p(v.xaxis,q.x,t.dataScale[0],q.xcalendar),p(v.yaxis,q.y,t.dataScale[1],q.ycalendar),p(v.zaxis,q.z,t.dataScale[2],q.zcalendar));if(q.i&&q.j&&q.k){if(q.i.length!==q.j.length||q.j.length!==q.k.length||!a(q.i,w)||!a(q.j,w)||!a(q.k,w))return;w=h(k(q.i),k(q.j),k(q.k))}else if(0===q.alphahull)w=m(t);else if(0<q.alphahull)w=l(q.alphahull,t);else{w=["x","y","z"].indexOf(q.delaunayaxis);v=[];for(var A=t.length,z=0;z<A;z++)v[z]=[t[z][(w+1)%3],t[z][(w+2)%3]];w=f(v)}t={positions:t,cells:w,lightPosition:[q.lightposition.x,
q.lightposition.y,q.lightposition.z],ambient:q.lighting.ambient,diffuse:q.lighting.diffuse,specular:q.lighting.specular,roughness:q.lighting.roughness,fresnel:q.lighting.fresnel,vertexNormalsEpsilon:q.lighting.vertexnormalsepsilon,faceNormalsEpsilon:q.lighting.facenormalsepsilon,opacity:q.opacity,contourEnable:q.contour.show,contourColor:d(q.contour.color).slice(0,3),contourWidth:q.contour.width,useFacetNormals:q.flatshading};q.intensity?(w=g(q),this.color="#fff",v=q.intensitymode,t[v+"Intensity"]=
q.intensity,t[v+"IntensityBounds"]=[w.min,w.max],t.colormap=c(q)):q.vertexcolor?(this.color=q.vertexcolor[0],t.vertexColors=n(q.vertexcolor)):q.facecolor?(this.color=q.facecolor[0],t.cellColors=n(q.facecolor)):(this.color=q.color,t.meshColor=d(q.color));this.mesh.update(t)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};D.exports=function(q,t){var v=e({gl:q.glplot.gl}),w=new r(q,v,t.uid);v._trace=w;w.update(t);q.glplot.add(v);return w}},{"../../components/colorscale":627,
"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../../plots/gl3d/zip3":850,"alpha-shape":69,"convex-hull":135,"delaunay-triangulate":171,"gl-mesh3d":292}],1099:[function(b,D,G){var r=b("../../registry"),n=b("../../lib"),p=b("../../components/colorscale/defaults"),k=b("./attributes");D.exports=function(a,e,f,l){function m(d,g){return n.coerce(a,e,k,d,g)}function c(d){var g=d.map(function(h){return(h=m(h))&&n.isArrayOrTypedArray(h)?h:null});return g.every(function(h){return h&&h.length===
g[0].length})&&g}c(["x","y","z"])?(c(["i","j","k"]),(!e.i||e.j&&e.k)&&(!e.j||e.k&&e.i)&&(!e.k||e.i&&e.j)?(r.getComponentMethod("calendars","handleTraceDefaults")(a,e,["x","y","z"],l),"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lighting.vertexnormalsepsilon lighting.facenormalsepsilon lightposition.x lightposition.y lightposition.z flatshading alphahull delaunayaxis opacity".split(" ").forEach(function(d){m(d)}),m("contour.show")&&(m("contour.color"),m("contour.width")),
"intensity"in a?(m("intensity"),m("intensitymode"),p(a,e,l,m,{prefix:"",cLetter:"c"})):(e.showscale=!1,"facecolor"in a?m("facecolor"):"vertexcolor"in a?m("vertexcolor"):m("color",f)),m("text"),m("hovertext"),m("hovertemplate"),e._length=null):e.visible=!1):e.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"../../registry":880,"./attributes":1096}],1100:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),colorbar:{min:"cmin",
max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":839,"./attributes":1096,"./calc":1097,"./convert":1098,"./defaults":1099}],1101:[function(b,D,G){function r(f){return{line:{color:n({},e.color,{dflt:f}),width:e.width,dash:p,editType:"style"},editType:"style"}}var n=b("../../lib").extendFlat;G=b("../scatter/attributes");var p=b("../../components/drawing/attributes").dash,k=b("../../components/fx/attributes"),
a=b("../../constants/delta.js");b=a.INCREASING.COLOR;a=a.DECREASING.COLOR;var e=G.line;D.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:n({},e.width,{}),dash:n({},p,{}),editType:"style"},increasing:r(b),decreasing:r(a),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",
dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:n({},k.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":636,"../../components/fx/attributes":646,"../../constants/delta.js":718,"../../lib":749,"../scatter/attributes":1155}],1102:[function(b,D,G){function r(f,l,m,c){return{o:f,h:l,l:m,c}}function n(f,l,m,c,d){for(var g=c.makeCalcdata(l,"open"),h=c.makeCalcdata(l,"high"),q=c.makeCalcdata(l,
"low"),t=c.makeCalcdata(l,"close"),v=Array.isArray(l.text),w=Array.isArray(l.hovertext),A=!0,z=null,y=[],B=0;B<m.length;B++){var C=m[B],u=g[B],F=h[B],H=q[B],J=t[B];if(C!==e&&u!==e&&F!==e&&H!==e&&J!==e){J===u?null!==z&&J!==z&&(A=J>z):A=J>u;z=J;var I=d(u,F,H,J);I.pos=C;I.yc=(u+J)/2;I.i=B;I.dir=A?"increasing":"decreasing";I.x=I.pos;I.y=[H,F];v&&(I.tx=l.text[B]);w&&(I.htx=l.hovertext[B]);y.push(I)}else y.push({pos:C,empty:!0})}l._extremes[c._id]=a.findExtremes(c,p.concat(q,h),{padded:!0});y.length&&(y[0].t=
{labels:{open:k(f,"open:")+" ",high:k(f,"high:")+" ",low:k(f,"low:")+" ",close:k(f,"close:")+" "}});return y}var p=b("../../lib"),k=p._,a=b("../../plots/cartesian/axes"),e=b("../../constants/numerical").BADNUM;D.exports={calc:function(f,l){var m=a.getFromId(f,l.xaxis),c=a.getFromId(f,l.yaxis);var d=l._minDiff;if(!d){var g=f._fullData,h=[];d=Infinity;var q;for(q=0;q<g.length;q++){var t=g[q];if("ohlc"===t.type&&!0===t.visible&&t.xaxis===m._id){h.push(t);var v=m.makeCalcdata(t,"x");t._xcalc=v;(t=p.distinctVals(v).minDiff)&&
isFinite(t)&&(d=Math.min(d,t))}}Infinity===d&&(d=1);for(q=0;q<h.length;q++)h[q]._minDiff=d}d*=l.tickwidth;g=l._minDiff;l._minDiff=null;h=l._xcalc;l._xcalc=null;f=n(f,l,h,c,r);l._extremes[m._id]=a.findExtremes(m,h,{vpad:g/2});return f.length?(p.extendFlat(f[0].t,{wHover:g/2,tickLen:d}),f):[{t:{empty:!0}}]},calcCommon:n}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797}],1103:[function(b,D,G){function r(a,e,f,l){f(l+".line.color");f(l+".line.width",e.line.width);f(l+
".line.dash",e.line.dash)}var n=b("../../lib"),p=b("./ohlc_defaults"),k=b("./attributes");D.exports=function(a,e,f,l){function m(c,d){return n.coerce(a,e,k,c,d)}p(a,e,m,l)?(m("line.width"),m("line.dash"),r(a,e,m,"increasing"),r(a,e,m,"decreasing"),m("text"),m("hovertext"),m("tickwidth"),l._requestRangeslider[e.xaxis]=!0):e.visible=!1}},{"../../lib":749,"./attributes":1101,"./ohlc_defaults":1106}],1104:[function(b,D,G){function r(c,d,g,h){function q(I){I=I.pos+F-d;return e.inbox(I-H,I+H,J)}function t(I){var M=
I[C];I=I[u];return M===I||e.inbox(M-g,I-g,J)}function v(I){return(q(I)+t(I))/2}var w=c.cd,A=c.xa,z=w[0].trace,y=w[0].t,B=z.type,C="ohlc"===B?"l":"min",u="ohlc"===B?"h":"max",F=y.bPos||0;B=y.bdPos||y.tickLen;var H=y.wHover;y=Math.min(1,B/Math.abs(A.r2c(A.range[1])-A.r2c(A.range[0])));var J=c.maxHoverDistance-y;y=c.maxSpikeDistance-y;h=e.getDistanceFunction(h,q,t,v);e.getClosest(w,h,c);if(!1===c.index)return null;w=w[c.index];if(w.empty)return null;z=z[w.dir];h=z.line.color;f.opacity(h)&&z.line.width?
c.color=h:c.color=z.fillcolor;c.x0=A.c2p(w.pos+F-B,!0);c.x1=A.c2p(w.pos+F+B,!0);c.xLabelVal=w.pos;c.spikeDistance=v(w)*y/J;c.xSpike=A.c2p(w.pos,!0);return c}function n(c,d,g,h){var q=c.cd,t=c.ya,v=q[0].trace,w=q[0].t,A=[];c=r(c,d,g,h);if(!c)return[];q=q[c.index].hi||v.hoverinfo;d=q.split("+");if("all"!==q&&-1===d.indexOf("y"))return[];q=["high","open","close","low"];d={};for(g=0;g<q.length;g++){h=q[g];var z=v[h][c.index],y=t.c2p(z,!0);if(z in d){var B=d[z];B.yLabel+="\x3cbr\x3e"+w.labels[h]+k.hoverLabelText(t,
z)}else B=a.extendFlat({},c),B.y0=B.y1=y,B.yLabelVal=z,B.yLabel=w.labels[h]+k.hoverLabelText(t,z),B.name="",A.push(B),d[z]=B}return A}function p(c,d,g,h){function q(B){return A.labels[B]+k.hoverLabelText(v,w[B][z])}var t=c.cd,v=c.ya,w=t[0].trace,A=t[0].t;c=r(c,d,g,h);if(!c)return[];t=t[c.index];var z=c.index=t.i;d=t.dir;h=t.hi||w.hoverinfo;g=h.split("+");var y="all"===h;h=y||-1!==g.indexOf("y");g=y||-1!==g.indexOf("text");d=h?[q("open"),q("high"),q("low"),q("close")+"  "+m[d]]:[];g&&l(t,w,d);c.extraText=
d.join("\x3cbr\x3e");c.y0=c.y1=v.c2p(t.yc,!0);return[c]}var k=b("../../plots/cartesian/axes"),a=b("../../lib"),e=b("../../components/fx"),f=b("../../components/color"),l=b("../../lib").fillText;b=b("../../constants/delta.js");var m={increasing:b.INCREASING.SYMBOL,decreasing:b.DECREASING.SYMBOL};D.exports={hoverPoints:function(c,d,g,h){return c.cd[0].trace.hoverlabel.split?n(c,d,g,h):p(c,d,g,h)},hoverSplit:n,hoverOnPoints:p}},{"../../components/color":615,"../../components/fx":655,"../../constants/delta.js":718,
"../../lib":749,"../../plots/cartesian/axes":797}],1105:[function(b,D,G){D.exports={moduleType:"trace",name:"ohlc",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc").calc,plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select")}},{"../../plots/cartesian":810,"./attributes":1101,"./calc":1102,"./defaults":1103,"./hover":1104,"./plot":1107,
"./select":1108,"./style":1109}],1106:[function(b,D,G){var r=b("../../registry"),n=b("../../lib");D.exports=function(p,k,a,e){var f=a("x"),l=a("open"),m=a("high"),c=a("low"),d=a("close");a("hoverlabel.split");r.getComponentMethod("calendars","handleTraceDefaults")(p,k,["x"],e);if(l&&m&&c&&d)return p=Math.min(l.length,m.length,c.length,d.length),f&&(p=Math.min(p,n.minRowLength(f))),k._length=p}},{"../../lib":749,"../../registry":880}],1107:[function(b,D,G){var r=b("d3"),n=b("../../lib");D.exports=
function(p,k,a,e){var f=k.yaxis,l=k.xaxis,m=!!l.rangebreaks;n.makeTraceGroups(e,a,"trace ohlc").each(function(c){var d=r.select(this);c=c[0];var g=c.t;if(!0!==c.trace.visible||g.empty)d.remove();else{var h=g.tickLen;d=d.selectAll("path").data(n.identity);d.enter().append("path");d.exit().remove();d.attr("d",function(q){if(q.empty)return"M0,0Z";var t=l.c2p(q.pos-h,!0),v=l.c2p(q.pos+h,!0),w=m?(t+v)/2:l.c2p(q.pos,!0),A=f.c2p(q.o,!0),z=f.c2p(q.h,!0),y=f.c2p(q.l,!0);q=f.c2p(q.c,!0);return"M"+t+","+A+"H"+
w+"M"+w+","+z+"V"+y+"M"+v+","+q+"H"+w})}})}},{"../../lib":749,d3:169}],1108:[function(b,D,G){D.exports=function(r,n){var p=r.cd,k=r.xaxis,a=r.yaxis,e=[],f,l=p[0].t.bPos||0;if(!1===n)for(f=0;f<p.length;f++)p[f].selected=0;else for(f=0;f<p.length;f++){var m=p[f];n.contains([k.c2p(m.pos+l),a.c2p(m.yc)],null,m.i,r)?(e.push({pointNumber:m.i,x:k.c2d(m.pos),y:a.c2d(m.yc)}),m.selected=1):m.selected=0}return e}},{}],1109:[function(b,D,G){var r=b("d3"),n=b("../../components/drawing"),p=b("../../components/color");
D.exports=function(k,a,e){k=e?e:r.select(k).selectAll("g.ohlclayer").selectAll("g.trace");k.style("opacity",function(f){return f[0].trace.opacity});k.each(function(f){var l=f[0].trace;r.select(this).selectAll("path").each(function(m){if(!m.empty){var c=l[m.dir].line;r.select(this).style("fill","none").call(p.stroke,c.color).call(n.dashLine,c.dash,c.width).style("opacity",l.selectedpoints&&!m.selected?.3:1)}})})}},{"../../components/color":615,"../../components/drawing":637,d3:169}],1110:[function(b,
D,G){G=b("../../lib/extend").extendFlat;var r=b("../../plots/attributes"),n=b("../../plots/font_attributes"),p=b("../../components/colorscale/attributes"),k=b("../../plots/template_attributes").hovertemplateAttrs;b=b("../../plots/domain").attributes;p=G({editType:"calc"},p("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:k({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});D.exports={domain:b({name:"parcats",
trace:!0,editType:"calc"}),hoverinfo:G({},r.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:k({editType:"plot",arrayOk:!1},{keys:"count probability category categorycount colorcount bandcolorcount".split(" ")}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,
editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:n({editType:"calc"}),tickfont:n({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",
dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:p,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/font_attributes":825,"../../plots/template_attributes":875}],
1111:[function(b,D,G){var r=b("../../plots/get_data").getModuleCalcData,n=b("./plot");G.name="parcats";G.plot=function(p,k,a,e){k=r(p.calcdata,"parcats");k.length&&n(p,k[0],a,e)};G.clean=function(p,k,a,e){p=e._has&&e._has("parcats");k=k._has&&k._has("parcats");p&&!k&&e._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":834,"./plot":1116}],1112:[function(b,D,G){function r(q,t,v){var w=q.map(function(A){return A.categories.length}).reduce(function(A,z){return Math.max(A,z)});return{dimensions:q,
paths:t,trace:void 0,maxCats:w,count:v}}function n(q,t,v){q.valueInds.push(t);q.count+=v}function p(q,t,v){q.valueInds.push(t);q.count+=v}function k(q,t){t=void 0===t||null===t?[]:t.map(function(C){return C});var v={},w={},A=[];t.forEach(function(C,u){v[C]=0;w[C]=u});for(var z=0;z<q.length;z++){var y=q[z];if(void 0===v[y]){v[y]=1;var B=t.push(y)-1;w[y]=B}else v[y]++,B=w[y];A.push(B)}q=t.map(function(C){return v[C]});return{uniqueValues:t,uniqueCounts:q,inds:A}}function a(q){var t=q.map(function(v){return v.displayindex});
if(e(t))for(t=0;t<q.length;t++)q[t]._displayindex=q[t].displayindex;else for(t=0;t<q.length;t++)q[t]._displayindex=t}function e(q){for(var t=Array(q.length),v=0;v<q.length;v++){if(0>q[v]||q[v]>=q.length||void 0!==t[q[v]])return!1;t[q[v]]=!0}return!0}var f=b("../../lib/gup").wrap,l=b("../../components/colorscale/helpers").hasColorscale,m=b("../../components/colorscale/calc"),c=b("../../lib/filter_unique.js"),d=b("../../components/drawing"),g=b("../../lib"),h=b("fast-isnumeric");D.exports=function(q,
t){function v(L){if(g.isArrayOrTypedArray(y.color))var P=L=y.color[L%y.color.length];else L=y.color;return{color:B(L),rawColor:P}}var w=g.filterVisible(t.dimensions);if(0===w.length)return[];var A=w.map(function(L){if("trace"===L.categoryorder)var P=null;else if("array"===L.categoryorder)P=L.categoryarray;else{P=c(L.values);for(var N=!0,Q=0;Q<P.length;Q++)if(!h(P[Q])){N=!1;break}P.sort(N?g.sorterAsc:void 0);"category descending"===L.categoryorder&&(P=P.reverse())}return k(L.values,P)});var z=g.isArrayOrTypedArray(t.counts)?
t.counts:[t.counts];a(w);w.forEach(function(L,P){P=A[P];L._categoryarray=P.uniqueValues;L._ticktext=null===L.ticktext||void 0===L.ticktext?[]:L.ticktext.slice();for(var N=L._ticktext.length;N<P.uniqueValues.length;N++)L._ticktext.push(P.uniqueValues[N])});var y=t.line;if(y){l(t,"line")&&m(q,t,{vals:t.line.color,containerStr:"line",cLetter:"c"});var B=d.tryColorscale(y)}else B=g.identity;var C=w[0].values.length,u={},F=A.map(function(L){return L.inds});var H=0;var J,I;for(J=0;J<C;J++){var M=[];for(I=
0;I<F.length;I++)M.push(F[I][J]);q=z[J%z.length];H+=q;I=v(J);var E=M+"-"+I.rawColor;void 0===u[E]&&(u[E]={categoryInds:M,color:I.color,rawColor:I.rawColor,valueInds:[],count:0});p(u[E],J,q)}w=w.map(function(L,P){return{dimensionInd:P,containerInd:L._index,displayInd:L._displayindex,dimensionLabel:L.label,count:H,categories:[],dragX:null}});for(J=0;J<C;J++)for(q=z[J%z.length],I=0;I<w.length;I++)F=w[I].containerInd,M=A[I].inds[J],E=w[I].categories,void 0===E[M]&&(E[M]={dimensionInd:I,categoryInd:M,
categoryValue:t.dimensions[F]._categoryarray[M],displayInd:M,categoryLabel:t.dimensions[F]._ticktext[M],valueInds:[],count:0,dragY:null}),n(E[M],J,q);return f(r(w,u,H))}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"../../components/drawing":637,"../../lib":749,"../../lib/filter_unique.js":740,"../../lib/gup":746,"fast-isnumeric":241}],1113:[function(b,D,G){function r(c,d,g,h,q){q("line.shape");q("line.hovertemplate");var t=q("line.color",h.colorway[0]);if(k(c,
"line")&&p.isArrayOrTypedArray(t)){if(t.length)return q("line.colorscale"),a(c,d,h,q,{prefix:"line.",cLetter:"c"}),t.length;d.line.color=g}return Infinity}function n(c,d){function g(v,w){return p.coerce(c,d,l.dimensions,v,w)}var h=g("values"),q=g("visible");h&&h.length||(q=d.visible=!1);if(q){g("label");g("displayindex",d._index);h=c.categoryarray;h=Array.isArray(h)&&0<h.length;var t;h&&(t="array");t=g("categoryorder",t);"array"===t?(g("categoryarray"),g("ticktext")):(delete c.categoryarray,delete c.ticktext);
h||"array"!==t||(d.categoryorder="trace")}}var p=b("../../lib"),k=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),e=b("../../plots/domain").defaults,f=b("../../plots/array_container_defaults"),l=b("./attributes"),m=b("../parcoords/merge_length");D.exports=function(c,d,g,h){function q(v,w){return p.coerce(c,d,l,v,w)}var t=f(c,d,{name:"dimensions",handleItemDefaults:n});g=r(c,d,g,h,q);e(d,h,q);Array.isArray(t)&&t.length||(d.visible=!1);m(d,t,"values",
g);q("hoveron");q("hovertemplate");q("arrangement");q("bundlecolors");q("sortpaths");q("counts");p.coerceFont(q,"labelfont",{family:h.font.family,size:Math.round(h.font.size),color:h.font.color});p.coerceFont(q,"tickfont",{family:h.font.family,size:Math.round(h.font.size/1.2),color:h.font.color})}},{"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/domain":824,"../parcoords/merge_length":1126,
"./attributes":1110}],1114:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1110,"./base_plot":1111,"./calc":1112,"./defaults":1113,"./plot":1116}],1115:[function(b,D,G){function r(ba,ka,qa,pa){ba=ba.map(L.bind(0,ka,qa));pa=pa.selectAll("g.parcatslayer").data([null]);
pa.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");pa=pa.selectAll("g.trace.parcats").data(ba,n);ba=pa.enter().append("g").attr("class","trace parcats");pa.attr("transform",function(ha){return"translate("+ha.x+", "+ha.y+")"});ba.append("g").attr("class","paths");qa=pa.select("g.paths").selectAll("path.path").data(function(ha){return ha.paths},n);qa.attr("fill",function(ha){return ha.model.color});var oa=qa.enter().append("path").attr("class","path").attr("stroke-opacity",
0).attr("fill",function(ha){return ha.model.color}).attr("fill-opacity",0);c(oa);qa.attr("d",function(ha){return ha.svgD});oa.empty()||qa.sort(k);qa.exit().remove();qa.on("mouseover",a).on("mouseout",e).on("click",m);ba.append("g").attr("class","dimensions");ba=pa.select("g.dimensions").selectAll("g.dimension").data(function(ha){return ha.dimensions},n);ba.enter().append("g").attr("class","dimension");ba.attr("transform",function(ha){return"translate("+ha.x+", 0)"});ba.exit().remove();qa=ba.selectAll("g.category").data(function(ha){return ha.categories},
n);oa=qa.enter().append("g").attr("class","category");qa.attr("transform",function(ha){return"translate(0, "+ha.y+")"});oa.append("rect").attr("class","catrect").attr("pointer-events","none");qa.select("rect.catrect").attr("fill","none").attr("width",function(ha){return ha.width}).attr("height",function(ha){return ha.height});g(oa);var ja=qa.selectAll("rect.bandrect").data(function(ha){return ha.bands},n);ja.each(function(){aa.raiseToTop(this)});ja.attr("fill",function(ha){return ha.color});var ra=
ja.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(ha){return ha.color}).attr("fill-opacity",0);ja.attr("fill",function(ha){return ha.color}).attr("width",function(ha){return ha.width}).attr("height",function(ha){return ha.height}).attr("y",function(ha){return ha.y}).attr("cursor",function(ha){return"fixed"===ha.parcatsViewModel.arrangement?"default":"perpendicular"===ha.parcatsViewModel.arrangement?"ns-resize":"move"});h(ra);ja.exit().remove();oa.append("text").attr("class",
"catlabel").attr("pointer-events","none");ja=ka._fullLayout.paper_bgcolor;qa.select("text.catlabel").attr("text-anchor",function(ha){return p(ha)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",ja+" -1px  1px 2px, "+ja+" 1px  1px 2px, "+ja+"  1px -1px 2px, "+ja+" -1px -1px 2px").style("fill","rgb(0, 0, 0)").attr("x",function(ha){return p(ha)?ha.width+5:-5}).attr("y",function(ha){return ha.height/2}).text(function(ha){return ha.model.categoryLabel}).each(function(ha){Y.font(T.select(this),
ha.parcatsViewModel.categorylabelfont);ca.convertToTspans(T.select(this),ka)});oa.append("text").attr("class","dimlabel");qa.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(ha){return"fixed"===ha.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(ha){return ha.width/2}).attr("y",-5).text(function(ha,la){return 0===la?ha.parcatsViewModel.model.dimensions[ha.model.dimensionInd].dimensionLabel:null}).each(function(ha){Y.font(T.select(this),
ha.parcatsViewModel.labelfont)});qa.selectAll("rect.bandrect").on("mouseover",C).on("mouseout",u);qa.exit().remove();ba.call(T.behavior.drag().origin(function(ha){return{x:ha.x,y:0}}).on("dragstart",F).on("drag",H).on("dragend",J));pa.each(function(ha){ha.traceSelection=T.select(this);ha.pathSelection=T.select(this).selectAll("g.paths").selectAll("path.path");ha.dimensionSelection=T.select(this).selectAll("g.dimensions").selectAll("g.dimension")});pa.exit().remove()}function n(ba){return ba.key}function p(ba){return ba.model.dimensionInd===
ba.parcatsViewModel.dimensions[ba.parcatsViewModel.dimensions.length-1].model.dimensionInd}function k(ba,ka){return ba.model.rawColor>ka.model.rawColor?1:ba.model.rawColor<ka.model.rawColor?-1:0}function a(ba){if(!ba.parcatsViewModel.dragDimension&&-1===ba.parcatsViewModel.hoverinfoItems.indexOf("skip")){aa.raiseToTop(this);d(T.select(this));var ka=f(ba),qa=l(ba);ba.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ka,event:T.event,constraints:qa});if(-1===ba.parcatsViewModel.hoverinfoItems.indexOf("none")){var pa=
T.mouse(this)[0];ka=ba.parcatsViewModel.graphDiv;qa=ba.parcatsViewModel.trace;var oa=ka._fullLayout,ja=oa._paperdiv.node().getBoundingClientRect(),ra=ba.parcatsViewModel.graphDiv.getBoundingClientRect(),ha;for(ha=0;ha<ba.leftXs.length-1;ha++)if(ba.leftXs[ha]+ba.dimWidths[ha]-2<=pa&&pa<=ba.leftXs[ha+1]+2){var la=ba.parcatsViewModel.dimensions[ha];la=(la.x+la.width+ba.parcatsViewModel.dimensions[ha+1].x)/2;var ua=(ba.topYs[ha]+ba.topYs[ha+1]+ba.height)/2;break}la=ba.parcatsViewModel.x+la;ua=ba.parcatsViewModel.y+
ua;ha=ea.mostReadable(ba.model.color,["black","white"]);pa=ba.model.count;var na=pa/ba.parcatsViewModel.model.count,wa={countLabel:pa,probabilityLabel:na.toFixed(3)},Ca=[];-1!==ba.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ca.push(["Count:",wa.countLabel].join(" "));-1!==ba.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Ca.push(["P:",wa.probabilityLabel].join(" "));Ca=Ca.join("\x3cbr\x3e");var Fa=T.mouse(ka)[0];Z.loneHover({trace:qa,x:la-ja.left+ra.left,y:ua-ja.top+ra.top,text:Ca,
color:ba.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:ha,idealAlign:Fa<la?"right":"left",hovertemplate:(qa.line||{}).hovertemplate,hovertemplateLabels:wa,eventData:[{data:qa._input,fullData:qa,count:pa,probability:na}]},{container:oa._hoverlayer.node(),outerContainer:oa._paper.node(),gd:ka})}}}function e(ba){if(!ba.parcatsViewModel.dragDimension&&(c(T.select(this)),Z.loneUnhover(ba.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),ba.parcatsViewModel.pathSelection.sort(k),
-1===ba.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var ka=f(ba),qa=l(ba);ba.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:ka,event:T.event,constraints:qa})}}function f(ba){for(var ka=[],qa=I(ba.parcatsViewModel),pa=0;pa<ba.model.valueInds.length;pa++)ka.push({curveNumber:qa,pointNumber:ba.model.valueInds[pa]});return ka}function l(ba){for(var ka={},qa=ba.parcatsViewModel.model.dimensions,pa=0;pa<qa.length;pa++){var oa=qa[pa];ka[oa.containerInd]=oa.categories[ba.model.categoryInds[pa]].categoryValue}void 0!==
ba.model.rawColor&&(ka.color=ba.model.rawColor);return ka}function m(ba){if(-1===ba.parcatsViewModel.hoverinfoItems.indexOf("skip")){var ka=f(ba),qa=l(ba);ba.parcatsViewModel.graphDiv.emit("plotly_click",{points:ka,event:T.event,constraints:qa})}}function c(ba){ba.attr("fill",function(ka){return ka.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function d(ba){ba.attr("fill-opacity",.8).attr("stroke",function(ka){return ea.mostReadable(ka.model.color,
["black","white"])}).attr("stroke-width",.3)}function g(ba){ba.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function h(ba){ba.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function q(ba){var ka=ba.categoryViewModel.model.dimensionInd,qa=ba.categoryViewModel.model.categoryInd;return ba.parcatsViewModel.pathSelection.filter(function(pa){return pa.model.categoryInds[ka]===qa&&pa.model.color===ba.color})}
function t(ba){T.select(ba.parentNode).selectAll("rect.bandrect").each(function(ka){ka=q(ka);d(ka);ka.each(function(){aa.raiseToTop(this)})});T.select(ba.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function v(ba){var ka=T.select(ba).datum(),qa=q(ka);d(qa);qa.each(function(){aa.raiseToTop(this)});T.select(ba.parentNode).selectAll("rect.bandrect").filter(function(pa){return pa.color===ka.color}).each(function(){aa.raiseToTop(this);T.select(this).attr("stroke",
"black").attr("stroke-width",1.5)})}function w(ba,ka,qa){var pa=T.select(ba).datum(),oa=pa.categoryViewModel.model;pa=pa.parcatsViewModel.graphDiv;var ja=[];T.select(ba.parentNode).selectAll("rect.bandrect").each(function(ra){q(ra).each(function(ha){Array.prototype.push.apply(ja,f(ha))})});ba={};ba[oa.dimensionInd]=oa.categoryValue;pa.emit(ka,{points:ja,event:qa,constraints:ba})}function A(ba,ka,qa){ba=T.select(ba).datum();var pa=ba.categoryViewModel.model,oa=ba.parcatsViewModel.graphDiv,ja=[];q(ba).each(function(ha){Array.prototype.push.apply(ja,
f(ha))});var ra={};ra[pa.dimensionInd]=pa.categoryValue;void 0!==ba.rawColor&&(ra.color=ba.rawColor);oa.emit(ka,{points:ja,event:qa,constraints:ra})}function z(ba,ka){ka=T.select(ka.parentNode).select("rect.catrect");var qa=ka.node().getBoundingClientRect(),pa=ka.datum(),oa=pa.parcatsViewModel,ja=oa.model.dimensions[pa.model.dimensionInd];ka=oa.trace;var ra=qa.top+qa.height/2;1<oa.dimensions.length&&ja.displayInd===oa.dimensions.length-1?(qa=qa.left,oa="left"):(qa=qa.left+qa.width,oa="right");ja=
pa.model.count;var ha=pa.model.categoryLabel,la=ja/pa.parcatsViewModel.model.count,ua={countLabel:ja,categoryLabel:ha,probabilityLabel:la.toFixed(3)},na=[];-1!==pa.parcatsViewModel.hoverinfoItems.indexOf("count")&&na.push(["Count:",ua.countLabel].join(" "));-1!==pa.parcatsViewModel.hoverinfoItems.indexOf("probability")&&na.push(["P("+ua.categoryLabel+"):",ua.probabilityLabel].join(" "));pa=na.join("\x3cbr\x3e");return{trace:ka,x:qa-ba.left,y:ra-ba.top,text:pa,color:"lightgray",borderColor:"black",
fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:oa,hovertemplate:ka.hovertemplate,hovertemplateLabels:ua,eventData:[{data:ka._input,fullData:ka,count:ja,category:ha,probability:la}]}}function y(ba,ka){var qa=[];T.select(ka.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){qa.push(z(ba,this))});return qa}function B(ba,ka){var qa=ka.getBoundingClientRect(),pa=T.select(ka).datum(),oa=pa.categoryViewModel,ja=oa.parcatsViewModel,
ra=ja.model.dimensions[oa.model.dimensionInd];ka=ja.trace;var ha=qa.y+qa.height/2;1<ja.dimensions.length&&ra.displayInd===ja.dimensions.length-1?(qa=qa.left,ra="left"):(qa=qa.left+qa.width,ra="right");var la=oa.model.categoryLabel,ua=pa.parcatsViewModel.model.count,na=0;pa.categoryViewModel.bands.forEach(function(bb){bb.color===pa.color&&(na+=bb.count)});var wa=oa.model.count,Ca=0;ja.pathSelection.each(function(bb){bb.model.color===pa.color&&(Ca+=bb.model.count)});ja=na/ua;var Fa=na/Ca,Xa=na/wa,ab=
{countLabel:ua,categoryLabel:la,probabilityLabel:ja.toFixed(3)},gb=[];-1!==oa.parcatsViewModel.hoverinfoItems.indexOf("count")&&gb.push(["Count:",ab.countLabel].join(" "));-1!==oa.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(gb.push("P(color ∩ "+la+"): "+ab.probabilityLabel),gb.push("P("+la+" | color): "+Fa.toFixed(3)),gb.push("P(color | "+la+"): "+Xa.toFixed(3)));oa=gb.join("\x3cbr\x3e");Fa=ea.mostReadable(pa.color,["black","white"]);return{trace:ka,x:qa-ba.left,y:ha-ba.top,text:oa,color:pa.color,
borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:Fa,fontSize:10,idealAlign:ra,hovertemplate:ka.hovertemplate,hovertemplateLabels:ab,eventData:[{data:ka._input,fullData:ka,category:la,count:ua,probability:ja,categorycount:wa,colorcount:Ca,bandcolorcount:na}]}}function C(ba){if(!(ba.parcatsViewModel.dragDimension||-1!==ba.parcatsViewModel.hoverinfoItems.indexOf("skip")||-1>T.mouse(this)[1])){var ka=ba.parcatsViewModel.graphDiv,qa=ka._fullLayout,pa=qa._paperdiv.node().getBoundingClientRect(),
oa=ba.parcatsViewModel.hoveron;"color"===oa?(v(this),A(this,"plotly_hover",T.event)):(t(this),w(this,"plotly_hover",T.event));if(-1===ba.parcatsViewModel.hoverinfoItems.indexOf("none")){var ja;"category"===oa?ja=z(pa,this):"color"===oa?ja=B(pa,this):"dimension"===oa&&(ja=y(pa,this));ja&&Z.loneHover(ja,{container:qa._hoverlayer.node(),outerContainer:qa._paper.node(),gd:ka})}}}function u(ba){var ka=ba.parcatsViewModel;ka.dragDimension||(c(ka.pathSelection),g(ka.dimensionSelection.selectAll("g.category")),
h(ka.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),Z.loneUnhover(ka.graphDiv._fullLayout._hoverlayer.node()),ka.pathSelection.sort(k),-1===ka.hoverinfoItems.indexOf("skip")&&("color"===ba.parcatsViewModel.hoveron?A(this,"plotly_unhover",T.event):w(this,"plotly_unhover",T.event)))}function F(ba){"fixed"!==ba.parcatsViewModel.arrangement&&(ba.dragDimensionDisplayInd=ba.model.displayInd,ba.initialDragDimensionDisplayInds=ba.parcatsViewModel.model.dimensions.map(function(ka){return ka.displayInd}),
ba.dragHasMoved=!1,ba.dragCategoryDisplayInd=null,T.select(this).selectAll("g.category").select("rect.catrect").each(function(ka){var qa=T.mouse(this)[0],pa=T.mouse(this)[1];-2<=qa&&qa<=ka.width+2&&-2<=pa&&pa<=ka.height+2&&(ba.dragCategoryDisplayInd=ka.model.displayInd,ba.initialDragCategoryDisplayInds=ba.model.categories.map(function(oa){return oa.displayInd}),ka.model.dragY=ka.y,aa.raiseToTop(this.parentNode),T.select(this.parentNode).selectAll("rect.bandrect").each(function(oa){oa.y<pa&&pa<=oa.y+
oa.height&&(ba.potentialClickBand=this)}))}),ba.parcatsViewModel.dragDimension=ba,Z.loneUnhover(ba.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function H(ba){if("fixed"!==ba.parcatsViewModel.arrangement&&(ba.dragHasMoved=!0,null!==ba.dragDimensionDisplayInd)){var ka=ba.dragDimensionDisplayInd,qa=ka-1,pa=ka+1,oa=ba.parcatsViewModel.dimensions[ka];if(null!==ba.dragCategoryDisplayInd){var ja=oa.categories[ba.dragCategoryDisplayInd];ja.model.dragY+=T.event.dy;var ra=ja.model.dragY,ha=ja.model.displayInd,
la=oa.categories,ua=la[ha-1];la=la[ha+1];void 0!==ua&&ra<ua.y+ua.height/2&&(ja.model.displayInd=ua.model.displayInd,ua.model.displayInd=ha);void 0!==la&&ra+ja.height>la.y+la.height/2&&(ja.model.displayInd=la.model.displayInd,la.model.displayInd=ha);ba.dragCategoryDisplayInd=ja.model.displayInd}if(null===ba.dragCategoryDisplayInd||"freeform"===ba.parcatsViewModel.arrangement)oa.model.dragX=T.event.x,qa=ba.parcatsViewModel.dimensions[qa],pa=ba.parcatsViewModel.dimensions[pa],void 0!==qa&&oa.model.dragX<
qa.x+qa.width&&(oa.model.displayInd=qa.model.displayInd,qa.model.displayInd=ka),void 0!==pa&&oa.model.dragX+oa.width>pa.x&&(oa.model.displayInd=pa.model.displayInd,pa.model.displayInd=ba.dragDimensionDisplayInd),ba.dragDimensionDisplayInd=oa.model.displayInd;Q(ba.parcatsViewModel);N(ba.parcatsViewModel);E(ba.parcatsViewModel);M(ba.parcatsViewModel)}}function J(ba){if("fixed"!==ba.parcatsViewModel.arrangement&&null!==ba.dragDimensionDisplayInd){T.select(this).selectAll("text").attr("font-weight","normal");
var ka={},qa=I(ba.parcatsViewModel),pa=ba.parcatsViewModel.model.dimensions.map(function(ua){return ua.displayInd}),oa=ba.initialDragDimensionDisplayInds.some(function(ua,na){return ua!==pa[na]});oa&&pa.forEach(function(ua,na){ka["dimensions["+ba.parcatsViewModel.model.dimensions[na].containerInd+"].displayindex"]=ua});var ja=!1;if(null!==ba.dragCategoryDisplayInd){var ra=ba.model.categories.map(function(ua){return ua.displayInd});if(ja=ba.initialDragCategoryDisplayInds.some(function(ua,na){return ua!==
ra[na]})){var ha=ba.model.categories.slice().sort(function(ua,na){return ua.displayInd-na.displayInd}),la=ha.map(function(ua){return ua.categoryValue});ha=ha.map(function(ua){return ua.categoryLabel});ka["dimensions["+ba.model.containerInd+"].categoryarray"]=[la];ka["dimensions["+ba.model.containerInd+"].ticktext"]=[ha];ka["dimensions["+ba.model.containerInd+"].categoryorder"]="array"}}-1===ba.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!ba.dragHasMoved&&ba.potentialClickBand&&("color"===ba.parcatsViewModel.hoveron?
A(ba.potentialClickBand,"plotly_click",T.event.sourceEvent):w(ba.potentialClickBand,"plotly_click",T.event.sourceEvent));ba.model.dragX=null;null!==ba.dragCategoryDisplayInd&&(ba.parcatsViewModel.dimensions[ba.dragDimensionDisplayInd].categories[ba.dragCategoryDisplayInd].model.dragY=null,ba.dragCategoryDisplayInd=null);ba.dragDimensionDisplayInd=null;ba.parcatsViewModel.dragDimension=null;ba.dragHasMoved=null;ba.potentialClickBand=null;Q(ba.parcatsViewModel);N(ba.parcatsViewModel);T.transition().duration(300).ease("cubic-in-out").each(function(){E(ba.parcatsViewModel,
!0);M(ba.parcatsViewModel,!0)}).each("end",function(){(oa||ja)&&V.restyle(ba.parcatsViewModel.graphDiv,ka,[qa])})}}function I(ba){for(var ka,qa=ba.graphDiv._fullData,pa=0;pa<qa.length;pa++)if(ba.key===qa[pa].uid){ka=pa;break}return ka}function M(ba,ka){void 0===ka&&(ka=!1);ba.pathSelection.data(function(qa){return qa.paths},n);(function(qa){return ka?qa.transition():qa})(ba.pathSelection).attr("d",function(qa){return qa.svgD})}function E(ba,ka){function qa(oa){return ka?oa.transition():oa}void 0===
ka&&(ka=!1);ba.dimensionSelection.data(function(oa){return oa.dimensions},n);var pa=ba.dimensionSelection.selectAll("g.category").data(function(oa){return oa.categories},n);qa(ba.dimensionSelection).attr("transform",function(oa){return"translate("+oa.x+", 0)"});qa(pa).attr("transform",function(oa){return"translate(0, "+oa.y+")"});pa.select(".dimlabel").text(function(oa,ja){return 0===ja?oa.parcatsViewModel.model.dimensions[oa.model.dimensionInd].dimensionLabel:null});pa.select(".catlabel").attr("text-anchor",
function(oa){return p(oa)?"start":"end"}).attr("x",function(oa){return p(oa)?oa.width+5:-5}).each(function(oa){if(p(oa)){oa=oa.width+5;var ja="start"}else oa=-5,ja="end";T.select(this).selectAll("tspan").attr("x",oa).attr("text-anchor",ja)});ba=pa.selectAll("rect.bandrect").data(function(oa){return oa.bands},n);pa=ba.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(oa){return oa.color}).attr("fill-opacity",0);ba.attr("fill",function(oa){return oa.color}).attr("width",
function(oa){return oa.width}).attr("height",function(oa){return oa.height}).attr("y",function(oa){return oa.y});h(pa);ba.each(function(){aa.raiseToTop(this)});ba.exit().remove()}function L(ba,ka,qa){qa=qa[0];var pa=ka.margin||{l:80,r:80,t:100,b:80},oa=qa.trace,ja=oa.domain,ra=ka.width,ha=Math.floor(ra*(ja.x[1]-ja.x[0])),la=Math.floor(ka.height*(ja.y[1]-ja.y[0]));ra=ja.x[0]*ra+pa.l;ka=ka.height-ja.y[1]*ka.height+pa.t;ja=oa.line.shape;var ua="all"===oa.hoverinfo?["count","probability"]:(oa.hoverinfo||
"").split("+");ba={trace:oa,key:oa.uid,model:qa,x:ra,y:ka,width:ha,height:la,hoveron:oa.hoveron,hoverinfoItems:ua,arrangement:oa.arrangement,bundlecolors:oa.bundlecolors,sortpaths:oa.sortpaths,labelfont:oa.labelfont,categorylabelfont:oa.tickfont,pathShape:ja,dragDimension:null,margin:pa,paths:[],dimensions:[],graphDiv:ba,traceSelection:null,pathSelection:null,dimensionSelection:null};qa.dimensions&&(Q(ba),N(ba));return ba}function P(ba,ka,qa,pa,oa){var ja=[],ra=[],ha;for(ha=0;ha<qa.length-1;ha++){var la=
T.interpolateNumber(qa[ha]+ba[ha],ba[ha+1]);ja.push(la(oa));ra.push(la(1-oa))}oa="M "+ba[0]+","+ka[0];oa+="l"+qa[0]+",0 ";for(ha=1;ha<qa.length;ha++)oa+="C"+ja[ha-1]+","+ka[ha-1]+" "+ra[ha-1]+","+ka[ha]+" "+ba[ha]+","+ka[ha],oa+="l"+qa[ha]+",0 ";oa=oa+("l0,"+pa+" l -")+(qa[qa.length-1]+",0 ");for(ha=qa.length-2;0<=ha;ha--)oa+="C"+ra[ha]+","+(ka[ha+1]+pa)+" "+ja[ha]+","+(ka[ha]+pa)+" "+(ba[ha]+qa[ha])+","+(ka[ha]+pa),oa+="l-"+qa[ha]+",0 ";return oa+"Z"}function N(ba){function ka(mb){var ya=mb.categoryInds.map(function(Ia,
Na){return ja[Na][Ia]});return ha.map(function(Ia){return ya[Ia]})}var qa=ba.dimensions,pa=ba.model,oa=qa.map(function(mb){return mb.categories.map(function(ya){return ya.y})}),ja=ba.model.dimensions.map(function(mb){return mb.categories.map(function(ya){return ya.displayInd})}),ra=ba.model.dimensions.map(function(mb){return mb.displayInd}),ha=ba.dimensions.map(function(mb){return mb.model.dimensionInd}),la=qa.map(function(mb){return mb.x}),ua=qa.map(function(mb){return mb.width}),na=[];for(wa in pa.paths)pa.paths.hasOwnProperty(wa)&&
na.push(pa.paths[wa]);na.sort(function(mb,ya){var Ia=ka(mb),Na=ka(ya);"backward"===ba.sortpaths&&(Ia.reverse(),Na.reverse());Ia.push(mb.valueInds[0]);Na.push(ya.valueInds[0]);ba.bundlecolors&&(Ia.unshift(mb.rawColor),Na.unshift(ya.rawColor));return Ia<Na?-1:Ia>Na?1:0});pa=Array(na.length);var wa=qa[0].model.count;qa=qa[0].categories.map(function(mb){return mb.height}).reduce(function(mb,ya){return mb+ya});for(var Ca=0;Ca<na.length;Ca++){var Fa=na[Ca];var Xa=0<wa?Fa.count/wa*qa:0;for(var ab=Array(oa.length),
gb=0;gb<Fa.categoryInds.length;gb++){var bb=ja[gb][Fa.categoryInds[gb]],La=ra[gb];ab[La]=oa[La][bb];oa[La][bb]+=Xa;bb=ba.dimensions[La].categories[bb];La=bb.bands.length;var kb=bb.bands[La-1];void 0===kb||Fa.rawColor!==kb.rawColor?(La=void 0===kb?0:kb.y+kb.height,bb.bands.push({key:La,color:Fa.color,rawColor:Fa.rawColor,height:Xa,width:bb.width,count:Fa.count,y:La,categoryViewModel:bb,parcatsViewModel:ba})):(bb=bb.bands[La-1],bb.height+=Xa,bb.count+=Fa.count)}gb="hspline"===ba.pathShape?P(la,ab,ua,
Xa,.5):P(la,ab,ua,Xa,0);pa[Ca]={key:Fa.valueInds[0],model:Fa,height:Xa,leftXs:la,topYs:ab,dimWidths:ua,svgD:gb,parcatsViewModel:ba}}ba.paths=pa}function Q(ba){var ka=ba.model.dimensions.map(function(oa){return{displayInd:oa.displayInd,dimensionInd:oa.dimensionInd}});ka.sort(function(oa,ja){return oa.displayInd-ja.displayInd});var qa=[],pa;for(pa in ka)qa.push(O(ba,ba.model.dimensions[ka[pa].dimensionInd]));ba.dimensions=qa}function O(ba,ka){var qa=ba.model.dimensions.length;qa=40+(1<qa?(ba.width-
80-16)/(qa-1):0)*ka.displayInd;var pa=[],oa=ba.model.maxCats,ja=ka.categories.length,ra=ka.count,ha=ba.height-8*(oa-1),la=8*(oa-ja)/2,ua=ka.categories.map(function(Ca){return{displayInd:Ca.displayInd,categoryInd:Ca.categoryInd}});ua.sort(function(Ca,Fa){return Ca.displayInd-Fa.displayInd});for(oa=0;oa<ja;oa++){var na=ua[oa].categoryInd;var wa=ka.categories[na];na=0<ra?wa.count/ra*ha:0;wa={key:wa.valueInds[0],model:wa,width:16,height:na,y:null!==wa.dragY?wa.dragY:la,bands:[],parcatsViewModel:ba};la=
la+na+8;pa.push(wa)}return{key:ka.dimensionInd,x:null!==ka.dragX?ka.dragX:qa,y:0,width:16,model:ka,categories:pa,parcatsViewModel:ba,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}var T=b("d3"),V=b("../../plot_api/plot_api"),Z=b("../../components/fx"),aa=b("../../lib"),Y=b("../../components/drawing"),ea=b("tinycolor2"),ca=b("../../lib/svg_text_utils");D.exports=function(ba,
ka,qa,pa){r(qa,ba,pa,ka)}},{"../../components/drawing":637,"../../components/fx":655,"../../lib":749,"../../lib/svg_text_utils":773,"../../plot_api/plot_api":784,d3:169,tinycolor2:548}],1116:[function(b,D,G){var r=b("./parcats");D.exports=function(n,p,k,a){var e=n._fullLayout,f=e._size;r(n,e._paper,p,{width:f.w,height:f.h,margin:{t:f.t,r:f.r,b:f.b,l:f.l}},k,a)}},{"./parcats":1115}],1117:[function(b,D,G){G=b("../../components/colorscale/attributes");var r=b("../../plots/cartesian/layout_attributes"),
n=b("../../plots/font_attributes"),p=b("../../plots/domain").attributes,k=b("../../lib/extend").extendFlat;b=b("../../plot_api/plot_template").templatedArray;D.exports={domain:p({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:n({editType:"plot"}),tickfont:n({editType:"plot"}),rangefont:n({editType:"plot"}),dimensions:b("dimension",{label:{valType:"string",
editType:"plot"},tickvals:k({},r.tickvals,{editType:"plot"}),ticktext:k({},r.ticktext,{editType:"plot"}),tickformat:k({},r.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",
dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:k({editType:"calc"},G("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/plot_template":787,"../../plots/cartesian/layout_attributes":811,"../../plots/domain":824,"../../plots/font_attributes":825}],1118:[function(b,D,G){function r(E,L,P,N){a:{for(var Q=0;Q<N.length;Q++)if(P>=N[Q][0]&&P<=N[Q][1]){N=
!0;break a}N=!1}if(N)return P;E=E?-1:1;var O=0;N=L.length-1;0>E&&(Q=O,O=N,N=Q);for(var T=Q=L[O];E*O<E*N;O+=E){var V=O+E,Z=L[V];if(E*P<E*(Q*(1-M)+Z*M))return Q*(1-I)+T*I;if(E*P<E*Z||V===N)return Z*(1-I)+Q*I;T=Q;Q=Z}}function n(E){E.attr("x",-C.bar.captureWidth/2).attr("width",C.bar.captureWidth)}function p(E){E.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function k(E){if(!E.brush.filterSpecified)return"0,"+E.height;for(var L=a(E.brush.filter.getConsolidated(),
E.height),P=[0],N,Q,O=L.length?L[0][0]:null,T=0;T<L.length;T++)N=L[T],Q=N[1]-N[0],P.push(O),P.push(Q),Q=T+1,Q<L.length&&(O=L[Q][0]-N[1]);P.push(E.height);return P}function a(E,L){return E.map(function(P){return P.map(function(N){return Math.max(0,N*L)}).sort(J)})}function e(){u.select(document.body).style("cursor",null)}function f(E){E.attr("stroke-dasharray",k)}function l(E,L){E=u.select(E).selectAll(".highlight, .highlight-shadow");L=L?E.transition().duration(C.bar.snapDuration).each("end",L):E;
f(L)}function m(E,L){var P=E.brush,N={};if(P.filterSpecified){var Q=E.height;P=P.filter.getConsolidated();var O=a(P,Q),T=NaN,V=NaN,Z=NaN;for(Q=0;Q<=O.length;Q++){var aa=O[Q];if(aa&&aa[0]<=L&&L<=aa[1]){T=Q;break}else if(V=Q?Q-1:NaN,aa&&aa[0]>L){Z=Q;break}}Q=T;isNaN(Q)&&(Q=isNaN(V)||isNaN(Z)?isNaN(V)?Z:V:L-O[V][1]<O[Z][0]-L?V:Z);isNaN(Q)||(O=O[Q],V=C.bar.handleHeight,V=L>O[1]+V||L<O[0]-V?void 0:L>=.9*O[1]+.1*O[0]?"n":L<=.9*O[0]+.1*O[1]?"s":"ns",V&&(N.interval=P[Q],N.intervalPix=O,N.region=V))}if(E.ordinal&&
!N.region)for(P=E.unitTickvals,E=E.unitToPaddedPx.invert(L),Q=0;Q<P.length;Q++)if(L=[.25*P[Math.max(Q-1,0)]+.75*P[Q],.25*P[Math.min(Q+1,P.length-1)]+.75*P[Q]],E>=L[0]&&E<=L[1]){N.clickableOrdinalRange=L;break}return N}function c(E,L){u.event.sourceEvent.stopPropagation();E=L.height-u.mouse(E)[1]-2*C.verticalPadding;var P=L.unitToPaddedPx.invert(E),N=L.brush,Q=m(L,E),O=Q.interval,T=N.svgBrush;T.wasDragged=!1;T.grabbingBar="ns"===Q.region;if(T.grabbingBar){var V=O.map(L.unitToPaddedPx);T.grabPoint=
E-V[0]-C.verticalPadding;T.barLength=V[1]-V[0]}T.clickableOrdinalRange=Q.clickableOrdinalRange;T.stayingIntervals=L.multiselect&&N.filterSpecified?N.filter.getConsolidated():[];O&&(T.stayingIntervals=T.stayingIntervals.filter(function(Z){return Z[0]!==O[0]&&Z[1]!==O[1]}));T.startExtent=Q.region?O["s"===Q.region?1:0]:P;L.parent.inBrushDrag=!0;T.brushStartCallback()}function d(E,L){u.event.sourceEvent.stopPropagation();var P=L.height-u.mouse(E)[1]-2*C.verticalPadding,N=L.brush.svgBrush;N.wasDragged=
!0;N._dragging=!0;N.newExtent=N.grabbingBar?[P-N.grabPoint,P+N.barLength-N.grabPoint].map(L.unitToPaddedPx.invert):[N.startExtent,L.unitToPaddedPx.invert(P)].sort(J);L.brush.filterSpecified=!0;N.extent=N.stayingIntervals.concat([N.newExtent]);N.brushCallback(L);l(E.parentNode)}function g(E,L){var P=L.brush,N=P.filter,Q=P.svgBrush;Q._dragging||(h(E,L),d(E,L),L.brush.svgBrush.wasDragged=!1);Q._dragging=!1;u.event.sourceEvent.stopPropagation();var O=Q.grabbingBar;Q.grabbingBar=!1;Q.grabLocation=void 0;
L.parent.inBrushDrag=!1;e();if(Q.wasDragged)if(O=function(){N.set(N.getConsolidated())},L.ordinal){var T=L.unitTickvals;T[T.length-1]<T[0]&&T.reverse();Q.newExtent=[r(0,T,Q.newExtent[0],Q.stayingIntervals),r(1,T,Q.newExtent[1],Q.stayingIntervals)];T=Q.newExtent[1]>Q.newExtent[0];Q.extent=Q.stayingIntervals.concat(T?[Q.newExtent]:[]);Q.extent.length||A(P);Q.brushCallback(L);T?l(E.parentNode,O):(O(),l(E.parentNode))}else O();else Q.wasDragged=void 0,Q.clickableOrdinalRange?P.filterSpecified&&L.multiselect?
Q.extent.push(Q.clickableOrdinalRange):(Q.extent=[Q.clickableOrdinalRange],P.filterSpecified=!0):O?(Q.extent=Q.stayingIntervals,0===Q.extent.length&&A(P)):A(P),Q.brushCallback(L),l(E.parentNode);Q.brushEndCallback(P.filterSpecified?N.getConsolidated():[])}function h(E,L){E=L.height-u.mouse(E)[1]-2*C.verticalPadding;L=m(L,E);E="crosshair";L.clickableOrdinalRange?E="pointer":L.region&&(E=L.region+"-resize");u.select(document.body).style("cursor",E)}function q(E){E.on("mousemove",function(L){u.event.preventDefault();
L.parent.inBrushDrag||h(this,L)}).on("mouseleave",function(L){L.parent.inBrushDrag||e()}).call(u.behavior.drag().on("dragstart",function(L){c(this,L)}).on("drag",function(L){d(this,L)}).on("dragend",function(L){g(this,L)}))}function t(E,L){return E[0]-L[0]}function v(E){var L=E.selectAll(".background").data(H);L.enter().append("rect").classed("background",!0).call(n).call(p).style("pointer-events","auto").attr("transform","translate(0 "+C.verticalPadding+")");L.call(q).attr("height",function(P){return P.height-
C.verticalPadding});L=E.selectAll(".highlight-shadow").data(H);L.enter().append("line").classed("highlight-shadow",!0).attr("x",-C.bar.width/2).attr("stroke-width",C.bar.width+C.bar.strokeWidth).attr("stroke",C.bar.strokeColor).attr("opacity",C.bar.strokeOpacity).attr("stroke-linecap","butt");L.attr("y1",function(P){return P.height}).call(f);E=E.selectAll(".highlight").data(H);E.enter().append("line").classed("highlight",!0).attr("x",-C.bar.width/2).attr("stroke-width",C.bar.width-C.bar.strokeWidth).attr("stroke",
C.bar.fillColor).attr("opacity",C.bar.fillOpacity).attr("stroke-linecap","butt");E.attr("y1",function(P){return P.height}).call(f)}function w(E){return E.svgBrush.extent.map(function(L){return L.slice()})}function A(E){E.filterSpecified=!1;E.svgBrush.extent=[[-Infinity,Infinity]]}function z(E){return function(L){L=L.brush;var P=w(L).slice();L.filter.set(P);E()}}function y(E){E=E.slice();for(var L=[],P,N=E.shift();N;){for(P=N.slice();(N=E.shift())&&N[0]<=P[1];)P[1]=Math.max(P[1],N[1]);L.push(P)}1===
L.length&&L[0][0]>L[0][1]&&(L=[]);return L}function B(){var E=[],L,P;return{set:function(N){E=N.map(function(Q){return Q.slice().sort(J)}).sort(t);1===E.length&&-Infinity===E[0][0]&&Infinity===E[0][1]&&(E=[[0,-1]]);L=y(E);P=E.reduce(function(Q,O){return[Math.min(Q[0],O[0]),Math.max(Q[1],O[1])]},[Infinity,-Infinity])},get:function(){return E.slice()},getConsolidated:function(){return L},getBounds:function(){return P}}}var C=b("./constants"),u=b("d3"),F=b("../../lib/gup").keyFun,H=b("../../lib/gup").repeat,
J=b("../../lib").sorterAsc,I=C.bar.snapRatio,M=C.bar.snapClose;D.exports={makeBrush:function(E,L,P,N,Q,O){E=B();E.set(P);return{filter:E,filterSpecified:L,svgBrush:{extent:[],brushStartCallback:N,brushCallback:z(Q),brushEndCallback:O}}},ensureAxisBrush:function(E){E=E.selectAll("."+C.cn.axisBrush).data(H,F);E.enter().append("g").classed(C.cn.axisBrush,!0);v(E)},cleanRanges:function(E,L){Array.isArray(E[0])?(E=E.map(function(N){return N.sort(J)}),E=L.multiselect?y(E.sort(t)):[E[0]]):E=[E.sort(J)];
if(L.tickvals){var P=L.tickvals.slice().sort(J);E=E.map(function(N){N=[r(0,P,N[0],[]),r(1,P,N[1],[])];if(N[1]>N[0])return N}).filter(function(N){return N});if(!E.length)return}return 1<E.length?E:E[0]}}},{"../../lib":749,"../../lib/gup":746,"./constants":1121,d3:169}],1119:[function(b,D,G){var r=b("d3"),n=b("../../plots/get_data").getModuleCalcData,p=b("./plot"),k=b("../../constants/xmlns_namespaces");G.name="parcoords";G.plot=function(a){var e=n(a.calcdata,"parcoords")[0];e.length&&p(a,e)};G.clean=
function(a,e,f,l){a=l._has&&l._has("parcoords");e=e._has&&e._has("parcoords");a&&!e&&(l._paperdiv.selectAll(".parcoords").remove(),l._glimages.selectAll("*").remove())};G.toSVG=function(a){var e=a._fullLayout._glimages,f=r.select(a).selectAll(".svg-container");f.filter(function(l,m){return m===f.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var l=this.toDataURL("image/png");e.append("svg:image").attr({xmlns:k.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:this.width,
height:this.height})});window.setTimeout(function(){r.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":725,"../../plots/get_data":834,"./plot":1128,d3:169}],1120:[function(b,D,G){var r=b("../../lib").isArrayOrTypedArray,n=b("../../components/colorscale"),p=b("../../lib/gup").wrap;D.exports=function(k,a){if(n.hasColorscale(a,"line")&&r(a.line.color)){var e=a.line.color;var f=n.extractOpts(a.line).colorscale;n.calc(k,a,{vals:e,containerStr:"line",
cLetter:"c"})}else{k=a._length;e=Array(k);for(f=0;f<k;f++)e[f]=.5;f=[[0,a.line.color],[1,a.line.color]]}return p({lineColor:e,cscale:f})}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gup":746}],1121:[function(b,D,G){D.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5E3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,
fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",
axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],1122:[function(b,D,G){function r(h,q,t,v,w){var A=w("line.color",t);if(k(h,"line")&&p.isArrayOrTypedArray(A)){if(A.length)return w("line.colorscale"),a(h,q,v,w,{prefix:"line.",cLetter:"c"}),A.length;q.line.color=t}return Infinity}function n(h,q,t,v){function w(z,y){return p.coerce(h,q,m.dimensions,z,y)}
t=w("values");var A=w("visible");t&&t.length||(A=q.visible=!1);A&&(w("label"),w("tickvals"),w("ticktext"),w("tickformat"),t=w("range"),q._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:t},l.setConvert(q._ax,v.layout),w("multiselect"),v=w("constraintrange"))&&(q.constraintrange=c.cleanRanges(v,q))}var p=b("../../lib"),k=b("../../components/colorscale/helpers").hasColorscale,a=b("../../components/colorscale/defaults"),e=b("../../plots/domain").defaults,f=b("../../plots/array_container_defaults"),
l=b("../../plots/cartesian/axes"),m=b("./attributes"),c=b("./axisbrush"),d=b("./constants").maxDimensionCount,g=b("./merge_length");D.exports=function(h,q,t,v){function w(z,y){return p.coerce(h,q,m,z,y)}var A=h.dimensions;Array.isArray(A)&&A.length>d&&(p.log("parcoords traces support up to "+d+" dimensions at the moment"),A.splice(d));A=f(h,q,{name:"dimensions",layout:v,handleItemDefaults:n});t=r(h,q,t,v,w);e(q,v,w);Array.isArray(A)&&A.length||(q.visible=!1);g(q,A,"values",t);v={family:v.font.family,
size:Math.round(v.font.size/1.2),color:v.font.color};p.coerceFont(w,"labelfont",v);p.coerceFont(w,"tickfont",v);p.coerceFont(w,"rangefont",v);w("labelangle");w("labelside")}},{"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"../../lib":749,"../../plots/array_container_defaults":793,"../../plots/cartesian/axes":797,"../../plots/domain":824,"./attributes":1117,"./axisbrush":1118,"./constants":1121,"./merge_length":1126}],1123:[function(b,D,G){var r=b("../../lib").isTypedArray;
G.convertTypedArray=function(n){return r(n)?Array.prototype.slice.call(n):n};G.isOrdinal=function(n){return!!n.tickvals};G.isVisible=function(n){return n.visible||!("visible"in n)}},{"../../lib":749}],1124:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:b("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},
{"./attributes":1117,"./base_plot":1119,"./calc":1120,"./defaults":1122,"./plot":1128}],1125:[function(b,D,G){function r(w,A,z,y,B){var C=w._gl;C.enable(C.SCISSOR_TEST);C.scissor(A,z,y,B);w.clear({color:[0,0,0,0],depth:1})}function n(w,A,z,y,B,C){function u(H){var J=Math.min(y,B-H*y);0===H&&(window.cancelAnimationFrame(z.currentRafs[F]),delete z.currentRafs[F],r(w,C.scissorX,C.scissorY,C.scissorWidth,C.viewBoxSize[1]));z.clearOnly||(C.count=2*J,C.offset=2*H*y,A(C),H*y+J<B&&(z.currentRafs[F]=window.requestAnimationFrame(function(){u(H+
1)})),z.drawCompleted=!1)}var F=C.key;z.drawCompleted||(w.read({x:0,y:0,width:1,height:1,data:q}),z.drawCompleted=!0);u(0)}function p(w,A){for(var z=Array(256),y=0;256>y;y++)z[y]=w(y/255).concat(A);return z}function k(w,A,z){for(var y=Array(w*(g+4)),B=0,C=0;C<w;C++){for(var u=0;u<g;u++)y[B++]=u<A.length?A[u].paddedUnitValues[C]:.5;y[B++]=(C>>>16)%256/255;y[B++]=(C>>>8)%256/255;y[B++]=(C>>>0)%256/255;y[B++]=Math.max(1E-6,Math.min(.999999,z[C]))}return y}function a(w){w="0"+w;return w.substr(w.length-
2)}function e(w){return w<g?"p"+a(w+1)+"_"+a(w+4):"colors"}function f(w,A,z){for(var y=0;y<=g;y+=4){for(var B=w,C=B[e(y)],u=y/4,F=A,H=z,J=Array(8*F),I=0,M=0;M<F;M++)for(var E=0;2>E;E++)for(var L=0;4>L;L++){var P=4*u+L,N=H[64*M+P];63===P&&0===E&&(N*=-1);J[I++]=N}C.call(B,J)}}function l(w){for(var A={},z=0;z<=g;z+=4)A[e(z)]=w.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return A}function m(w){var A=Math.max(0,Math.floor(2047*w[0]),0);w=Math.min(2047,Math.ceil(2047*w[1]),2047);return[Math.min(A,
w),Math.max(A,w)]}G=b("glslify");var c=G(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform sampler2D mask, palette;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\n\nbool isPick    \x3d (drwLayer \x3e 1.5);\nbool isContext \x3d (drwLayer \x3c 0.5);\n\nconst vec4 ZEROS \x3d vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS \x3d vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 \x3d val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 \x3d val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo \x3c hi) \x26\x26 (lo \x3e p || p \x3e hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] \x3d A;\n    pnts[1] \x3d B;\n    pnts[2] \x3d C;\n    pnts[3] \x3d D;\n\n    for(int i \x3d 0; i \x3c 4; ++i) {\n        for(int j \x3d 0; j \x3c 4; ++j) {\n            for(int k \x3d 0; k \x3c 4; ++k) {\n                if(0 \x3d\x3d iMod(\n                    int(255.0 * texture2D(mask,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x \x3d 0.5 * sign(v) + 0.5;\n    float y \x3d axisY(x, A, B, C, D);\n    float z \x3d 1.0 - abs(v);\n\n    z +\x3d isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A \x3d mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B \x3d mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C \x3d mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D \x3d mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v \x3d colors[3];\n\n    gl_Position \x3d position(isContext, v, A, B, C, D);\n\n    fragColor \x3d\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),
d=G(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor \x3d fragColor;\n}\n"]),g=b("./constants").maxDimensionCount,h=b("../../lib"),q=new Uint8Array(4),t=new Uint8Array(4),v={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};D.exports=function(w,A){function z(Q){F=Q.model;H=Q.viewModel;J=H.dimensions.slice();I=J[0]?J[0].values.length:0;var O=F.lines;Q=B?O.color.map(function(T,V){return V/O.color.length}):O.color;Q=k(I,J,Q);
f(M,I,Q);y||B||(L=C.texture(h.extendFlat({data:p(F.unitToColor,255)},v)))}var y=A.context,B=A.pick,C=A.regl,u={currentRafs:{},drawCompleted:!0,clearOnly:!1},F,H,J,I,M=l(C),E,L=C.texture(v),P=[];z(A);var N=C({profile:!1,blend:{enable:y,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!y,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:C.prop("scissorX"),y:C.prop("scissorY"),
width:C.prop("scissorWidth"),height:C.prop("scissorHeight")}},viewport:{x:C.prop("viewportX"),y:C.prop("viewportY"),width:C.prop("viewportWidth"),height:C.prop("viewportHeight")},dither:!1,vert:c,frag:d,primitive:"lines",lineWidth:1,attributes:M,uniforms:{resolution:C.prop("resolution"),viewBoxPos:C.prop("viewBoxPos"),viewBoxSize:C.prop("viewBoxSize"),dim0A:C.prop("dim0A"),dim1A:C.prop("dim1A"),dim0B:C.prop("dim0B"),dim1B:C.prop("dim1B"),dim0C:C.prop("dim0C"),dim1C:C.prop("dim1C"),dim0D:C.prop("dim0D"),
dim1D:C.prop("dim1D"),loA:C.prop("loA"),hiA:C.prop("hiA"),loB:C.prop("loB"),hiB:C.prop("hiB"),loC:C.prop("loC"),hiC:C.prop("hiC"),loD:C.prop("loD"),hiD:C.prop("hiD"),palette:L,contextColor:C.prop("contextColor"),mask:C.prop("maskTexture"),drwLayer:C.prop("drwLayer"),maskHeight:C.prop("maskHeight")},offset:C.prop("offset"),count:C.prop("count")});return{render:function(Q,O,T){var V=Q.length,Z,aa=Infinity,Y=-Infinity;for(Z=0;Z<V;Z++){if(Q[Z].dim0.canvasX<aa){aa=Q[Z].dim0.canvasX;var ea=Z}if(Q[Z].dim1.canvasX>
Y){Y=Q[Z].dim1.canvasX;var ca=Z}}0===V&&r(C,0,0,F.canvasWidth,F.canvasHeight);var ba=y,ka;Z=[[],[]];for(Y=0;64>Y;Y++)aa=!ba&&Y<J.length?J[Y].brush.filter.getBounds():[-Infinity,Infinity],Z[0][Y]=aa[0],Z[1][Y]=aa[1];var qa=Array(16384);for(aa=0;16384>aa;aa++)qa[aa]=255;if(!ba)for(aa=0;aa<J.length;aa++){Y=aa%8;ba=(aa-Y)/8;var pa=Math.pow(2,Y),oa=J[aa].brush.filter.get();if(!(2>oa.length)){var ja=m(oa[0])[1];for(ka=1;ka<oa.length;ka++){var ra=m(oa[ka]);for(Y=ja+1;Y<ra[0];Y++)qa[8*Y+ba]&=~pa;ja=Math.max(ja,
ra[1])}}}aa={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:qa};E?E(aa):E=C.texture(aa);aa={maskTexture:E,maskHeight:2048,loA:Z[0].slice(0,16),loB:Z[0].slice(16,32),loC:Z[0].slice(32,48),loD:Z[0].slice(48,64),hiA:Z[1].slice(0,16),hiB:Z[1].slice(16,32),hiC:Z[1].slice(32,48),hiD:Z[1].slice(48,64)};for(Z=0;Z<V;Z++){var ha=Q[Z];pa=ha.dim0.crossfilterDimensionIndex;oa=ha.dim1.crossfilterDimensionIndex;ja=ha.canvasX;ra=ha.canvasY;Y=ja+ha.panelSizeX;if(O||!P[pa]||P[pa][0]!==
ja||P[pa][1]!==Y){P[pa]=[ja,Y];Y=F;qa=ea;ba=ca;ka=Z;var la=ha.panelSizeX,ua=ha.panelSizeY;ha=ha.dim0.crossfilterDimensionIndex;for(var na=y?0:B?2:1,wa=aa,Ca=[[],[]],Fa=0;64>Fa;Fa++)Ca[0][Fa]=Fa===pa?1:0,Ca[1][Fa]=Fa===oa?1:0;Fa=Y.lines.canvasOverdrag;var Xa=Y.domain,ab=Y.canvasWidth,gb=Y.canvasHeight,bb=Y.deselectedLines.color;Y=h.extendFlat({key:ha,resolution:[ab,gb],viewBoxPos:[ja+Fa,ra],viewBoxSize:[la,ua],i0:pa,i1:oa,dim0A:Ca[0].slice(0,16),dim0B:Ca[0].slice(16,32),dim0C:Ca[0].slice(32,48),dim0D:Ca[0].slice(48,
64),dim1A:Ca[1].slice(0,16),dim1B:Ca[1].slice(16,32),dim1C:Ca[1].slice(32,48),dim1D:Ca[1].slice(48,64),drwLayer:na,contextColor:[bb[0]/255,bb[1]/255,bb[2]/255,1>bb[3]?bb[3]:Math.max(1/255,Math.pow(1/Y.lines.color.length,1/3))],scissorX:(ka===qa?0:ja+Fa)+(Y.pad.l-Fa)+Y.layoutWidth*Xa.x[0],scissorWidth:(ka===ba?ab-ja+Fa:la+.5)+(ka===qa?ja+Fa:0),scissorY:ra+Y.pad.b+Y.layoutHeight*Xa.y[0],scissorHeight:ua,viewportX:Y.pad.l-Fa+Y.layoutWidth*Xa.x[0],viewportY:Y.pad.b+Y.layoutHeight*Xa.y[0],viewportWidth:ab,
viewportHeight:gb},wa);u.clearOnly=T;n(C,N,u,O?F.lines.blockLineCount:I,I,Y)}}},readPixel:function(Q,O){C.read({x:Q,y:O,width:1,height:1,data:t});return t},readPixels:function(Q,O,T,V){var Z=new Uint8Array(4*T*V);C.read({x:Q,y:O,width:T,height:V,data:Z});return Z},destroy:function(){w.style["pointer-events"]="none";L.destroy();E&&E.destroy();for(var Q in M)M[Q].destroy()},update:z}}},{"../../lib":749,"./constants":1121,glslify:413}],1126:[function(b,D,G){D.exports=function(r,n,p,k){k||(k=Infinity);
var a;for(a=0;a<n.length;a++){var e=n[a];e.visible&&(k=Math.min(k,e[p].length))}Infinity===k&&(k=0);r._length=k;for(a=0;a<n.length;a++)e=n[a],e.visible&&(e._length=k);return k}},{}],1127:[function(b,D,G){function r(Q,O){return p(C.aggNums(Math.min,null,Q,O),C.aggNums(Math.max,null,Q,O))}function n(Q){var O=Q.range;return O?p(O[0],O[1]):r(Q.values,Q._length)}function p(Q,O){if(isNaN(Q)||!isFinite(Q))Q=0;if(isNaN(O)||!isFinite(O))O=0;Q===O&&(0===Q?(--Q,O+=1):(Q*=.9,O*=1.1));return[Q,O]}function k(Q,
O){return O?function(T,V){V=O[V];return null===V||void 0===V?Q(T):V}:Q}function a(Q,O,T,V,Z){var aa=n(T);return V?z.scale.ordinal().domain(V.map(k(z.format(T.tickformat),Z))).range(V.map(function(Y){return Q-O+(Y-aa[0])/(aa[1]-aa[0])*(2*O-Q)})):z.scale.linear().domain(aa).range([Q-O,O])}function e(Q,O){return z.scale.linear().range([O,Q-O])}function f(Q,O){return z.scale.linear().domain(n(Q)).range([O,1-O])}function l(Q){if(Q.tickvals){var O=n(Q);return z.scale.ordinal().domain(Q.tickvals).range(Q.tickvals.map(function(T){return(T-
O[0])/(O[1]-O[0])}))}}function m(Q){var O=Q.map(function(aa){return aa[0]}),T=Q.map(function(aa){aa=y(aa[1]);return z.rgb("rgb("+aa[0]+","+aa[1]+","+aa[2]+")")}),V=function(aa){return function(Y){return Y[aa]}},Z=["r","g","b"].map(function(aa){return z.scale.linear().clamp(!0).domain(O).range(T.map(V(aa)))});return function(aa){return Z.map(function(Y){return Y(aa)})}}function c(Q){return Q.dimensions.some(function(O){return O.brush.filterSpecified})}function d(Q,O,T){var V=M(O),Z=V.trace,aa=E.convertTypedArray(V.lineColor),
Y=Z.line;O={color:y(L.deselectedLineColor)};var ea=H.extractOpts(Y);V=ea.reversescale?H.flipScale(V.cscale):V.cscale;var ca=Z.domain,ba=Z.dimensions,ka=Q.width,qa=Z.labelangle,pa=Z.labelside,oa=Z.labelfont,ja=Z.tickfont,ra=Z.rangefont;Z=C.extendDeepNoArrays({},Y,{color:aa.map(z.scale.linear().domain(n({values:aa,range:[ea.min,ea.max],_length:Z._length}))),blockLineCount:L.blockLineCount,canvasOverdrag:L.overdrag*L.canvasPixelRatio});aa=Q.margin||{l:80,r:80,t:100,b:80};Y=Math.floor(ka*(ca.x[1]-ca.x[0]));
ea=Math.floor(Q.height*(ca.y[1]-ca.y[0]));return{key:T,colCount:ba.filter(E.isVisible).length,dimensions:ba,tickDistance:L.tickDistance,unitToColor:m(V),lines:Z,deselectedLines:O,labelAngle:qa,labelSide:pa,labelFont:oa,tickFont:ja,rangeFont:ra,layoutWidth:ka,layoutHeight:Q.height,domain:ca,translateX:ca.x[0]*ka,translateY:Q.height-ca.y[1]*Q.height,pad:aa,canvasWidth:Y*L.canvasPixelRatio+2*Z.canvasOverdrag,canvasHeight:ea*L.canvasPixelRatio,width:Y,height:ea,canvasPixelRatio:L.canvasPixelRatio}}function g(Q,
O,T){var V=T.width,Z=T.height,aa=T.dimensions,Y=T.canvasPixelRatio,ea=function(pa){return V*pa/Math.max(1,T.colCount-1)},ca=L.verticalPadding/Z,ba=e(Z,L.verticalPadding),ka={key:T.key,xScale:ea,model:T,inBrushDrag:!1},qa={};ka.dimensions=aa.filter(E.isVisible).map(function(pa,oa){function ja(gb,bb){return{val:gb,text:Fa[bb]}}function ra(gb,bb){return gb.val-bb.val}var ha=f(pa,ca),la=qa[pa.label];qa[pa.label]=(la||0)+1;la=pa.label+(la?"__"+la:"");var ua=pa.constraintrange,na=ua&&ua.length;na&&!Array.isArray(ua[0])&&
(ua=[ua]);ua=na?ua.map(function(gb){return gb.map(ha)}):[[-Infinity,Infinity]];var wa=pa.values;wa.length>pa._length&&(wa=wa.slice(0,pa._length));var Ca=pa.tickvals;if(Array.isArray(Ca)&&Ca.length){var Fa=pa.ticktext;Array.isArray(Fa)&&Fa.length?Fa.length>Ca.length?Fa=Fa.slice(0,Ca.length):Ca.length>Fa.length&&(Ca=Ca.slice(0,Fa.length)):Fa=Ca.map(z.format(pa.tickformat));for(var Xa=1;Xa<Ca.length;Xa++)if(Ca[Xa]<Ca[Xa-1]){Xa=Ca.map(ja).sort(ra);for(var ab=0;ab<Ca.length;ab++)Ca[ab]=Xa[ab].val,Fa[ab]=
Xa[ab].text;break}}else Ca=void 0;wa=E.convertTypedArray(wa);return{key:la,label:pa.label,tickFormat:pa.tickformat,tickvals:Ca,ticktext:Fa,ordinal:E.isOrdinal(pa),multiselect:pa.multiselect,xIndex:oa,crossfilterDimensionIndex:oa,visibleIndex:pa._index,height:Z,values:wa,paddedUnitValues:wa.map(ha),unitTickvals:Ca&&Ca.map(ha),xScale:ea,x:ea(oa),canvasX:ea(oa)*Y,unitToPaddedPx:ba,domainScale:a(Z,L.verticalPadding,pa,Ca,Fa),ordinalScale:l(pa),parent:ka,model:T,brush:P.makeBrush(Q,na,ua,function(){Q.linePickActive(!1)},
function(){ka.focusLayer&&ka.focusLayer.render(ka.panels,!0);var gb=c(ka);!Q.contextShown()&&gb?(ka.contextLayer&&ka.contextLayer.render(ka.panels,!0),Q.contextShown(!0)):Q.contextShown()&&!gb&&(ka.contextLayer&&ka.contextLayer.render(ka.panels,!0,!0),Q.contextShown(!1))},function(gb){ka.focusLayer.render(ka.panels,!0);ka.pickLayer&&ka.pickLayer.render(ka.panels,!0);Q.linePickActive(!0);if(O&&O.filterChanged){var bb=ha.invert;gb=gb.map(function(La){return La.map(bb).sort(C.sorterAsc)}).sort(function(La,
kb){return La[0]-kb[0]});O.filterChanged(ka.key,pa._index,gb)}})}});return ka}function h(Q){Q.classed(L.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}function q(){var Q=!0,O=!1;return{linePickActive:function(T){return arguments.length?Q=!!T:Q},contextShown:function(T){return arguments.length?O=!!T:O}}}function t(Q,O){var T=Q*Math.PI/180;return{dir:"top"===O?1:-1,dx:Math.sin(T),dy:Math.cos(T),degrees:Q}}function v(Q,O){var T=O.panels||(O.panels=
[]);Q=Q.data();for(var V=0;V<Q.length-1;V++){var Z=T[V]||(T[V]={}),aa=Q[V],Y=Q[V+1];Z.dim0=aa;Z.dim1=Y;Z.canvasX=aa.canvasX;Z.panelSizeX=Y.canvasX-aa.canvasX;Z.panelSizeY=O.model.canvasHeight;Z.y=0;Z.canvasY=0}}function w(Q){for(var O=0;O<Q.length;O++)for(var T=0;T<Q[O].length;T++)for(var V=Q[O][T].trace,Z=V.dimensions,aa=0;aa<Z.length;aa++){var Y=Z[aa].values,ea=Z[aa]._ax;ea&&(ea.range=ea.range?p(ea.range[0],ea.range[1]):r(Y,V._length),ea.dtick||(ea.dtick=.01*(Math.abs(ea.range[1]-ea.range[0])||
1)),ea.tickformat=Z[aa].tickformat,B.calcTicks(ea),ea.cleanRange())}}function A(Q,O){if(Q.ordinal)return"";var T=Q.domainScale.domain();return B.tickText(Q.model.dimensions[Q.visibleIndex]._ax,T[O?T.length-1:0],!1).text}var z=b("d3"),y=b("color-rgba"),B=b("../../plots/cartesian/axes"),C=b("../../lib"),u=b("../../lib/svg_text_utils"),F=b("../../components/drawing"),H=b("../../components/colorscale");G=b("../../lib/gup");var J=G.keyFun,I=G.repeat,M=G.unwrap,E=b("./helpers"),L=b("./constants"),P=b("./axisbrush"),
N=b("./lines");D.exports=function(Q,O,T,V){var Z=Q._fullLayout,aa=Z._toppaper;Z=Z._glcontainer;w(O);var Y=q(),ea=O.filter(function(qa){return M(qa).trace.visible}).map(d.bind(0,T)).map(g.bind(0,Y,V));Z.each(function(qa,pa){return C.extendFlat(qa,ea[pa])});O=Z.selectAll(".gl-canvas").each(function(qa){qa.viewModel=ea[0];qa.model=qa.viewModel?qa.viewModel.model:null});var ca=null;O.filter(function(qa){return qa.pick}).style("pointer-events","auto").on("mousemove",function(qa){if(Y.linePickActive()&&
qa.lineLayer&&V&&V.hover){var pa=z.event,oa=this.width,ja=this.height,ra=z.mouse(this),ha=ra[0];ra=ra[1];0>ha||0>ra||ha>=oa||ra>=ja||(ja=qa.lineLayer.readPixel(ha,ja-1-ra),ja=(oa=0!==ja[3])?ja[2]+256*(ja[1]+256*ja[0]):null,qa={x:ha,y:ra,clientX:pa.clientX,clientY:pa.clientY,dataIndex:qa.model.key,curveNumber:ja},ja!==ca&&(oa?V.hover(qa):V.unhover&&V.unhover(qa),ca=ja))}});O.style("opacity",function(qa){return qa.pick?0:1});aa.style("background","rgba(255, 255, 255, 0)");aa=aa.selectAll("."+L.cn.parcoords).data(ea,
J);aa.exit().remove();aa.enter().append("g").classed(L.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none");aa.attr("transform",function(qa){return"translate("+qa.model.translateX+","+qa.model.translateY+")"});aa=aa.selectAll("."+L.cn.parcoordsControlView).data(I,J);aa.enter().append("g").classed(L.cn.parcoordsControlView,!0);aa.attr("transform",function(qa){return"translate("+qa.model.pad.l+","+qa.model.pad.t+")"});var ba=aa.selectAll("."+L.cn.yAxis).data(function(qa){return qa.dimensions},
J);ba.enter().append("g").classed(L.cn.yAxis,!0);aa.each(function(qa){v(ba,qa)});O.each(function(qa){if(qa.viewModel){!qa.lineLayer||V?qa.lineLayer=N(this,qa):qa.lineLayer.update(qa);if(qa.key||0===qa.key)qa.viewModel[qa.key]=qa.lineLayer;qa.lineLayer.render(qa.viewModel.panels,!qa.context||V)}});ba.attr("transform",function(qa){return"translate("+qa.xScale(qa.xIndex)+", 0)"});ba.call(z.behavior.drag().origin(function(qa){return qa}).on("drag",function(qa){var pa=qa.parent;Y.linePickActive(!1);qa.x=
Math.max(-L.overdrag,Math.min(qa.model.width+L.overdrag,z.event.x));qa.canvasX=qa.x*qa.model.canvasPixelRatio;ba.sort(function(oa,ja){return oa.x-ja.x}).each(function(oa,ja){oa.xIndex=ja;oa.x=qa===oa?oa.x:oa.xScale(oa.xIndex);oa.canvasX=oa.x*oa.model.canvasPixelRatio});v(ba,pa);ba.filter(function(oa){return 0!==Math.abs(qa.xIndex-oa.xIndex)}).attr("transform",function(oa){return"translate("+oa.xScale(oa.xIndex)+", 0)"});z.select(this).attr("transform","translate("+qa.x+", 0)");ba.each(function(oa,
ja,ra){ra===qa.parent.key&&(pa.dimensions[ja]=oa)});pa.contextLayer&&pa.contextLayer.render(pa.panels,!1,!c(pa));pa.focusLayer.render&&pa.focusLayer.render(pa.panels)}).on("dragend",function(qa){var pa=qa.parent;qa.x=qa.xScale(qa.xIndex);qa.canvasX=qa.x*qa.model.canvasPixelRatio;v(ba,pa);z.select(this).attr("transform",function(oa){return"translate("+oa.x+", 0)"});pa.contextLayer&&pa.contextLayer.render(pa.panels,!1,!c(pa));pa.focusLayer&&pa.focusLayer.render(pa.panels);pa.pickLayer&&pa.pickLayer.render(pa.panels,
!0);Y.linePickActive(!0);V&&V.axesMoved&&V.axesMoved(pa.key,pa.dimensions.map(function(oa){return oa.crossfilterDimensionIndex}))}));ba.exit().remove();aa=ba.selectAll("."+L.cn.axisOverlays).data(I,J);aa.enter().append("g").classed(L.cn.axisOverlays,!0);aa.selectAll("."+L.cn.axis).remove();var ka=aa.selectAll("."+L.cn.axis).data(I,J);ka.enter().append("g").classed(L.cn.axis,!0);ka.each(function(qa){var pa=qa.model.height/qa.model.tickDistance,oa=qa.domainScale,ja=oa.domain();z.select(this).call(z.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(pa,
qa.tickFormat).tickValues(qa.ordinal?ja:null).tickFormat(function(ra){return E.isOrdinal(qa)?ra:B.tickText(qa.model.dimensions[qa.visibleIndex]._ax,ra,!1).text}).scale(oa));F.font(ka.selectAll("text"),qa.model.tickFont)});ka.selectAll(".domain, .tick\x3eline").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px");ka.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select",
"none");O=aa.selectAll("."+L.cn.axisHeading).data(I,J);O.enter().append("g").classed(L.cn.axisHeading,!0);O=O.selectAll("."+L.cn.axisTitle).data(I,J);O.enter().append("text").classed(L.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select","none").style("pointer-events","auto");O.text(function(qa){return qa.label}).each(function(qa){var pa=z.select(this);F.font(pa,qa.model.labelFont);u.convertToTspans(pa,Q)}).attr("transform",function(qa){var pa=t(qa.model.labelAngle,
qa.model.labelSide),oa=L.axisTitleOffset;return(0<pa.dir?"":"translate(0,"+(2*oa+qa.model.height)+")")+"rotate("+pa.degrees+")translate("+-oa*pa.dx+","+-oa*pa.dy+")"}).attr("text-anchor",function(qa){qa=t(qa.model.labelAngle,qa.model.labelSide);return 2*Math.abs(qa.dx)>Math.abs(qa.dy)?0>qa.dir*qa.dx?"start":"end":"middle"});O=aa.selectAll("."+L.cn.axisExtent).data(I,J);O.enter().append("g").classed(L.cn.axisExtent,!0);T=O.selectAll("."+L.cn.axisExtentTop).data(I,J);T.enter().append("g").classed(L.cn.axisExtentTop,
!0);T.attr("transform","translate(0,"+-L.axisExtentOffset+")");T=T.selectAll("."+L.cn.axisExtentTopText).data(I,J);T.enter().append("text").classed(L.cn.axisExtentTopText,!0).call(h);T.text(function(qa){return A(qa,!0)}).each(function(qa){F.font(z.select(this),qa.model.rangeFont)});O=O.selectAll("."+L.cn.axisExtentBottom).data(I,J);O.enter().append("g").classed(L.cn.axisExtentBottom,!0);O.attr("transform",function(qa){return"translate(0,"+(qa.model.height+L.axisExtentOffset)+")"});O=O.selectAll("."+
L.cn.axisExtentBottomText).data(I,J);O.enter().append("text").classed(L.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(h);O.text(function(qa){return A(qa,!1)}).each(function(qa){F.font(z.select(this),qa.model.rangeFont)});P.ensureAxisBrush(aa)}},{"../../components/colorscale":627,"../../components/drawing":637,"../../lib":749,"../../lib/gup":746,"../../lib/svg_text_utils":773,"../../plots/cartesian/axes":797,"./axisbrush":1118,"./constants":1121,"./helpers":1123,"./lines":1125,"color-rgba":127,
d3:169}],1128:[function(b,D,G){function r(e,f,l){l=f.indexOf(l);e=e.indexOf(l);-1===e&&(e+=f.length);return e}function n(e,f){return function(l,m){return r(e,f,l)-r(e,f,m)}}var p=b("./parcoords"),k=b("../../lib/prepare_regl"),a=b("./helpers").isVisible;D.exports=function(e,f){var l=e._fullLayout;if(k(e)){var m={},c={},d={},g={},h=l._size;f.forEach(function(q,t){q=q[0].trace;d[t]=q.index;q=g[t]=q._fullInput.index;m[t]=e.data[q].dimensions;c[t]=e.data[q].dimensions.slice()});p(e,f,{width:h.w,height:h.h,
margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{filterChanged:function(q,t,v){var w=c[q][t];v=v.map(function(y){return y.slice()});var A="dimensions["+t+"].constraintrange",z=l._tracePreGUI[e._fullData[d[q]]._fullInput.uid];void 0===z[A]&&(z[A]=w.constraintrange||null);t=e._fullData[d[q]].dimensions[t];v.length?(1===v.length&&(v=v[0]),w.constraintrange=v,t.constraintrange=v.slice(),v=[v]):(delete w.constraintrange,delete t.constraintrange,v=null);w={};w[A]=v;e.emit("plotly_restyle",[w,[g[q]]])},hover:function(q){e.emit("plotly_hover",
q)},unhover:function(q){e.emit("plotly_unhover",q)},axesMoved:function(q,t){t=n(t,c[q].filter(a));m[q].sort(t);c[q].filter(function(v){return!a(v)}).sort(function(v){return c[q].indexOf(v)}).forEach(function(v){m[q].splice(m[q].indexOf(v),1);m[q].splice(c[q].indexOf(v),0,v)});e.emit("plotly_restyle",[{dimensions:[m[q]]},[g[q]]])}})}}},{"../../lib/prepare_regl":762,"./helpers":1123,"./parcoords":1127}],1129:[function(b,D,G){G=b("../../plots/attributes");var r=b("../../plots/domain").attributes,n=b("../../plots/font_attributes"),
p=b("../../components/color/attributes"),k=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs;b=b("../../lib/extend").extendFlat;n=n({editType:"plot",arrayOk:!0,colorEditType:"plot"});D.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},
line:{color:{valType:"color",dflt:p.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:b({},G.hoverinfo,{flags:["label","text","value",
"percent","name"]}),hovertemplate:k({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:b({},n,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:b({},n,{}),outsidetextfont:b({},n,{}),automargin:{valType:"boolean",
dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:b({},n,{}),position:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"plot"},editType:"plot"},domain:r({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",
editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:b({},n,{}),titleposition:{valType:"enumerated",values:"top left;top center;top right;middle center;bottom left;bottom center;bottom right".split(";"),editType:"calc"}}}},{"../../components/color/attributes":614,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,
"../../plots/font_attributes":825,"../../plots/template_attributes":875}],1130:[function(b,D,G){var r=b("../../plots/plots");G.name="pie";G.plot=function(n,p,k,a){r.plotBasePlot(G.name,n,p,k,a)};G.clean=function(n,p,k,a){r.cleanBasePlot(G.name,n,p,k,a)}},{"../../plots/plots":860}],1131:[function(b,D,G){function r(f){return function(l,m){if(!l)return!1;l=k(l);if(!l.isValid())return!1;l=a.addOpacity(l,l.getAlpha());f[m]||(f[m]=l);return l}}function n(f,l){var m,c=JSON.stringify(f),d=l[c];if(!d){d=f.slice();
for(m=0;m<f.length;m++)d.push(k(f[m]).lighten(20).toHexString());for(m=0;m<f.length;m++)d.push(k(f[m]).darken(20).toHexString());l[c]=d}return d}var p=b("fast-isnumeric"),k=b("tinycolor2"),a=b("../../components/color"),e={};D.exports={calc:function(f,l){var m=[],c=f._fullLayout;f=c.hiddenlabels||[];var d=l.labels,g=l.marker.colors||[],h=l.values,q=l._length,t=l._hasValues&&q,v;if(l.dlabel)for(d=Array(q),v=0;v<q;v++)d[v]=String(l.label0+v*l.dlabel);var w={};c=r(c["_"+l.type+"colormap"]);var A=0,z=
!1;for(v=0;v<q;v++){if(t){var y=h[v];if(!p(y))continue;y=+y;if(0>y)continue}else y=1;var B=d[v];if(void 0===B||""===B)B=v;B=String(B);var C=w[B];void 0===C?(w[B]=m.length,(C=-1!==f.indexOf(B))||(A+=y),m.push({v:y,label:B,color:c(g[v],B),i:v,pts:[v],hidden:C})):(z=!0,C=m[C],C.v+=y,C.pts.push(v),C.hidden||(A+=y),!1===C.color&&g[v]&&(C.color=c(g[v],B)))}("funnelarea"===l.type?z:l.sort)&&m.sort(function(u,F){return F.v-u.v});m[0]&&(m[0].vTotal=A);return m},crossTraceCalc:function(f,l){(l=(l||{}).type)||
(l="pie");var m=f._fullLayout;f=f.calcdata;var c=m[l+"colorway"],d=m["_"+l+"colormap"];m["extend"+l+"colors"]&&(c=n(c,e));for(var g=m=0;g<f.length;g++){var h=f[g];if(h[0].trace.type===l)for(var q=0;q<h.length;q++){var t=h[q];!1===t.color&&(d[t.label]?t.color=d[t.label]:(d[t.label]=t.color=c[m%c.length],m++))}}},makePullColorFn:r,generateExtendedColors:n}},{"../../components/color":615,"fast-isnumeric":241,tinycolor2:548}],1132:[function(b,D,G){function r(f,l){var m=Array.isArray(f),c=p.isArrayOrTypedArray(l);
f=Math.min(m?f.length:Infinity,c?l.length:Infinity);isFinite(f)||(f=0);if(f&&c){for(var d,g=0;g<f;g++){var h=l[g];if(n(h)&&0<h){d=!0;break}}d||(f=0)}return{hasLabels:m,hasValues:c,len:f}}var n=b("fast-isnumeric"),p=b("../../lib"),k=b("./attributes"),a=b("../../plots/domain").defaults,e=b("../bar/defaults").handleText;D.exports={handleLabelsAndValues:r,supplyDefaults:function(f,l,m,c){function d(q,t){return p.coerce(f,l,k,q,t)}m=d("labels");var g=d("values");m=r(m,g);g=m.len;l._hasLabels=m.hasLabels;
l._hasValues=m.hasValues;!l._hasLabels&&l._hasValues&&(d("label0"),d("dlabel"));if(g){l._length=g;d("marker.line.width")&&d("marker.line.color");d("marker.colors");d("scalegroup");m=d("text");g=d("texttemplate");var h;g||(h=d("textinfo",Array.isArray(m)?"text+percent":"percent"));d("hovertext");d("hovertemplate");if(g||h&&"none"!==h)h=d("textposition"),e(f,l,c,d,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),
(Array.isArray(h)||"auto"===h||"outside"===h)&&d("automargin"),("inside"===h||"auto"===h||Array.isArray(h))&&d("insidetextorientation");a(l,c,d);h=d("hole");d("title.text")&&(m=d("title.position",h?"middle center":"top center"),h||"middle center"!==m||(l.title.position="top center"),p.coerceFont(d,"title.font",c.font));d("sort");d("direction");d("rotation");d("pull")}else l.visible=!1}}},{"../../lib":749,"../../plots/domain":824,"../bar/defaults":894,"./attributes":1129,"fast-isnumeric":241}],1133:[function(b,
D,G){var r=b("../../components/fx/helpers").appendArrayMultiPointValues;D.exports=function(n,p){var k={curveNumber:p.index,pointNumbers:n.pts,data:p._input,fullData:p,label:n.label,color:n.color,value:n.v,percent:n.percent,text:n.text,v:n.v};1===n.pts.length&&(k.pointNumber=k.i=n.pts[0]);r(k,p,n.pts);"funnelarea"===p.type&&(delete k.v,delete k.i);return k}},{"../../components/fx/helpers":651}],1134:[function(b,D,G){var r=b("../../lib");G.formatPiePercent=function(n,p){n=(100*n).toPrecision(3);-1!==
n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,""));return r.numSeparate(n,p)+"%"};G.formatPieValue=function(n,p){n=n.toPrecision(10);-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,""));return r.numSeparate(n,p)};G.getFirstFilled=function(n,p){if(Array.isArray(n))for(var k=0;k<p.length;k++){var a=n[p[k]];if(a||0===a||""===a)return a}};G.castOption=function(n,p){if(Array.isArray(n))return G.getFirstFilled(n,p);if(n)return n}},{"../../lib":749}],1135:[function(b,D,G){D.exports={attributes:b("./attributes"),
supplyDefaults:b("./defaults").supplyDefaults,supplyLayoutDefaults:b("./layout_defaults"),layoutAttributes:b("./layout_attributes"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style"),styleOne:b("./style_one"),moduleType:"trace",name:"pie",basePlotModule:b("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":1129,"./base_plot":1130,"./calc":1131,"./defaults":1132,"./layout_attributes":1136,"./layout_defaults":1137,
"./plot":1138,"./style":1139,"./style_one":1140}],1136:[function(b,D,G){D.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1137:[function(b,D,G){var r=b("../../lib"),n=b("./layout_attributes");D.exports=function(p,k){r.coerce(p,k,n,"hiddenlabels",void 0);r.coerce(p,k,n,"piecolorway",k.colorway);r.coerce(p,k,n,"extendpiecolors",void 0)}},{"../../lib":749,"./layout_attributes":1136}],
1138:[function(b,D,G){function r(Q,O){Q.each(function(T){var V=y.select(this);if(T.labelExtraX||T.labelExtraY){var Z=V.select("g.slicetext text");T.transform.targetX+=T.labelExtraX;T.transform.targetY+=T.labelExtraY;Z.attr("transform",H.getTextTransform(T.transform));Z=T.cxFinal+T.pxmid[0];var aa="M"+Z+","+(T.cyFinal+T.pxmid[1]),Y=(T.yLabelMax-T.yLabelMin)*(0>T.pxmid[0]?-1:1)/4;if(T.labelExtraX){var ea=T.labelExtraX*T.pxmid[1]/T.pxmid[0],ca=T.yLabelMid+T.labelExtraY-(T.cyFinal+T.pxmid[1]);aa=Math.abs(ea)>
Math.abs(ca)?aa+("l"+ca*T.pxmid[0]/T.pxmid[1]+","+ca+"H"+(Z+T.labelExtraX+Y)):aa+("l"+T.labelExtraX+","+ea+"v"+(ca-ea)+"h"+Y)}else aa+="V"+(T.yLabelMid+T.labelExtraY)+"h"+Y;H.ensureSingle(V,"path","textline").call(u.stroke,O.outsidetextfont.color).attr({"stroke-width":Math.min(2,O.outsidetextfont.size/8),d:aa,fill:"none"})}else V.select("path.textline").remove()})}function n(Q,O,T){var V=T[0],Z=V.trace,aa=V.cx,Y=V.cy;"_hasHoverLabel"in Z||(Z._hasHoverLabel=!1);"_hasHoverEvent"in Z||(Z._hasHoverEvent=
!1);Q.on("mouseover",function(ea){var ca=O._fullLayout,ba=O._fullData[Z.index];if(!O._dragging&&!1!==ca.hovermode){var ka=ba.hoverinfo;Array.isArray(ka)&&(ka=C.castHoverinfo({hoverinfo:[L.castOption(ka,ea.pts)],_module:Z._module},ca,0));"all"===ka&&(ka="label+text+value+percent+name");if(ba.hovertemplate||"none"!==ka&&"skip"!==ka&&ka){var qa=ea.rInscribed||0,pa=aa+ea.pxmid[0]*(1-qa),oa=Y+ea.pxmid[1]*(1-qa),ja=ca.separators,ra=[];ka&&-1!==ka.indexOf("label")&&ra.push(ea.label);ea.text=L.castOption(ba.hovertext||
ba.text,ea.pts);if(ka&&-1!==ka.indexOf("text")){var ha=ea.text;H.isValidTextValue(ha)&&ra.push(ha)}ea.value=ea.v;ea.valueLabel=L.formatPieValue(ea.v,ja);ka&&-1!==ka.indexOf("value")&&ra.push(ea.valueLabel);ea.percent=ea.v/V.vTotal;ea.percentLabel=L.formatPiePercent(ea.percent,ja);ka&&-1!==ka.indexOf("percent")&&ra.push(ea.percentLabel);ja=ba.hoverlabel;ha=ja.font;C.loneHover({trace:Z,x0:pa-qa*V.r,x1:pa+qa*V.r,y:oa,text:ra.join("\x3cbr\x3e"),name:ba.hovertemplate||-1!==ka.indexOf("name")?ba.name:void 0,
idealAlign:0>ea.pxmid[0]?"left":"right",color:L.castOption(ja.bgcolor,ea.pts)||ea.color,borderColor:L.castOption(ja.bordercolor,ea.pts),fontFamily:L.castOption(ha.family,ea.pts),fontSize:L.castOption(ha.size,ea.pts),fontColor:L.castOption(ha.color,ea.pts),nameLength:L.castOption(ja.namelength,ea.pts),textAlign:L.castOption(ja.align,ea.pts),hovertemplate:L.castOption(ba.hovertemplate,ea.pts),hovertemplateLabels:ea,eventData:[P(ea,ba)]},{container:ca._hoverlayer.node(),outerContainer:ca._paper.node(),
gd:O});Z._hasHoverLabel=!0}Z._hasHoverEvent=!0;O.emit("plotly_hover",{points:[P(ea,ba)],event:y.event})}});Q.on("mouseout",function(ea){var ca=O._fullLayout,ba=O._fullData[Z.index],ka=y.select(this).datum();Z._hasHoverEvent&&(ea.originalEvent=y.event,O.emit("plotly_unhover",{points:[P(ka,ba)],event:y.event}),Z._hasHoverEvent=!1);Z._hasHoverLabel&&(C.loneUnhover(ca._hoverlayer.node()),Z._hasHoverLabel=!1)});Q.on("click",function(ea){var ca=O._fullLayout;O._dragging||!1===ca.hovermode||(O._hoverdata=
[P(ea,O._fullData[Z.index])],C.click(O,y.event))})}function p(Q,O,T){var V=L.castOption(Q.outsidetextfont.color,O.pts)||L.castOption(Q.textfont.color,O.pts)||T.color,Z=L.castOption(Q.outsidetextfont.family,O.pts)||L.castOption(Q.textfont.family,O.pts)||T.family;Q=L.castOption(Q.outsidetextfont.size,O.pts)||L.castOption(Q.textfont.size,O.pts)||T.size;return{color:V,family:Z,size:Q}}function k(Q,O,T){var V=L.castOption(Q.insidetextfont.color,O.pts);!V&&Q._input.textfont&&(V=L.castOption(Q._input.textfont.color,
O.pts));var Z=L.castOption(Q.insidetextfont.family,O.pts)||L.castOption(Q.textfont.family,O.pts)||T.family;Q=L.castOption(Q.insidetextfont.size,O.pts)||L.castOption(Q.textfont.size,O.pts)||T.size;return{color:V||u.contrast(O.color),family:Z,size:Q}}function a(Q,O){for(var T,V,Z=0;Z<Q.length;Z++)if(T=Q[Z][0],V=T.trace,V.title.text){var aa=V.title.text;V._meta&&(aa=H.templateString(aa,V._meta));V=F.tester.append("text").attr("data-notex",1).text(aa).call(F.font,V.title.font).call(J.convertToTspans,
O);aa=F.bBox(V.node(),!0);T.titleBox={width:aa.width,height:aa.height};V.remove()}}function e(Q,O,T){var V=T.r||O.rpx1,Z=O.rInscribed;if(O.startangle===O.stopangle)return{rCenter:1-Z,scale:0,rotate:0,textPosAngle:0};var aa=O.ring,Y=1===aa&&Math.abs(O.startangle-O.stopangle)===2*Math.PI,ea=O.halfangle,ca=O.midangle;T=T.trace.insidetextorientation;var ba="horizontal"===T,ka="tangential"===T,qa="radial"===T;T="auto"===T;var pa=[];if(!T){var oa=function(ha,la){var ua=O.startangle,na=O.stopangle;if(ua>
ha&&ha>na||ua<ha&&ha<na)ua=Math.abs(ha-O.startangle),na=Math.abs(ha-O.stopangle),ua=ua<na?ua:na,ra="tan"===la?l(Q,V,aa,ua,0):f(Q,V,aa,ua,Math.PI/2),ra.textPosAngle=ha,pa.push(ra)},ja;if(ba||ka){for(ja=4;-4<=ja;ja-=2)oa(Math.PI*ja,"tan");for(ja=4;-4<=ja;ja-=2)oa(Math.PI*(ja+1),"tan")}if(ba||qa){for(ja=4;-4<=ja;ja-=2)oa(Math.PI*(ja+1.5),"rad");for(ja=4;-4<=ja;ja-=2)oa(Math.PI*(ja+.5),"rad")}}if(Y||T||ba){var ra={scale:Z*V*2/Math.sqrt(Q.width*Q.width+Q.height*Q.height),rCenter:1-Z,rotate:0};ra.textPosAngle=
(O.startangle+O.stopangle)/2;if(1<=ra.scale)return ra;pa.push(ra)}if(T||qa)ra=f(Q,V,aa,ea,ca),ra.textPosAngle=(O.startangle+O.stopangle)/2,pa.push(ra);if(T||ka)ra=l(Q,V,aa,ea,ca),ra.textPosAngle=(O.startangle+O.stopangle)/2,pa.push(ra);for(ea=Y=Z=0;ea<pa.length&&(ca=pa[ea].scale,Y<ca&&(Y=ca,Z=ea),T||!(1<=Y));ea++);return pa[Z]}function f(Q,O,T,V,Z){O=Math.max(0,O-2*E);var aa=Q.width/Q.height;T=m(aa,V,O,T);O=T/O;return{scale:2*T/Q.height,rCenter:Math.cos(O)-aa*O,rotate:(180/Math.PI*Z+720)%180-90}}
function l(Q,O,T,V,Z){O=Math.max(0,O-2*E);var aa=Q.height/Q.width;T=m(aa,V,O,T);O=T/O;return{scale:2*T/Q.width,rCenter:Math.cos(O)-aa*O,rotate:(180/Math.PI*(Z+Math.PI/2)+720)%180-90}}function m(Q,O,T,V){O=Q+1/(2*Math.tan(O));return T*Math.min(1/(Math.sqrt(O*O+.5)+O),V/(Math.sqrt(Q*Q+V/2)+Q))}function c(Q,O){var T=O.pxmid[0];O=O.pxmid[1];var V=Q.width/2;Q=Q.height/2;0>T&&(V*=-1);0>O&&(Q*=-1);return{scale:1,rCenter:1,rotate:0,x:V+Math.abs(Q)*(0<V?1:-1)/2,y:Q/(1+T*T/(O*O)),outside:!0}}function d(Q,O){var T=
Q.trace,V=Q.cx,Z=Q.cy,aa=0;var Y=0+T.title.font.size;var ea=h(T);-1!==T.title.position.indexOf("top")?(Z-=(1+ea)*Q.r,Y-=Q.titleBox.height):-1!==T.title.position.indexOf("bottom")&&(Z+=(1+ea)*Q.r);var ca=Q.trace.aspectratio;ca=Q.r/(void 0===ca?1:ca);var ba=O.w*(T.domain.x[1]-T.domain.x[0])/2;-1!==T.title.position.indexOf("left")?(ba+=ca,V-=(1+ea)*ca,aa+=Q.titleBox.width/2):-1!==T.title.position.indexOf("center")?ba*=2:-1!==T.title.position.indexOf("right")&&(ba+=ca,V+=(1+ea)*ca,aa-=Q.titleBox.width/
2);ea=ba/Q.titleBox.width;Q=g(Q,O)/Q.titleBox.height;return{x:V,y:Z,scale:Math.min(ea,Q),tx:aa,ty:Y}}function g(Q,O){var T=Q.trace;return Math.min(Q.titleBox.height,O.h*(T.domain.y[1]-T.domain.y[0])/2)}function h(Q){var O=Q.pull;if(!O)return 0;var T;if(Array.isArray(O))for(T=O=0;T<Q.pull.length;T++)Q.pull[T]>O&&(O=Q.pull[T]);return O}function q(Q,O){function T(la,ua){return la.pxmid[1]-ua.pxmid[1]}function V(la,ua){return ua.pxmid[1]-la.pxmid[1]}function Z(la,ua){ua||(ua={});var na=ua.labelExtraY+
(Y?ua.yLabelMax:ua.yLabelMin);ua=Y?la.yLabelMin:la.yLabelMax;var wa=Y?la.yLabelMax:la.yLabelMin,Ca=la.cyFinal+ba(la.px0[1],la.px1[1]),Fa=na-ua;0<Fa*ka&&(la.labelExtraY=Fa);if(Array.isArray(O.pull))for(na=0;na<ra.length;na++){var Xa=ra[na];Xa===la||(L.castOption(O.pull,la.pts)||0)>=(L.castOption(O.pull,Xa.pts)||0)||(0<(la.pxmid[1]-Xa.pxmid[1])*ka?(Fa=Xa.cyFinal+ba(Xa.px0[1],Xa.px1[1]),Fa=Fa-ua-la.labelExtraY,0<Fa*ka&&(la.labelExtraY+=Fa)):0<(wa+la.labelExtraY-Ca)*ka&&(Fa=3*pa*Math.abs(na-ra.indexOf(la)),
Xa=Xa.cxFinal+qa(Xa.px0[0],Xa.px1[0]),Fa=Xa+Fa-(la.cxFinal+la.pxmid[0])-la.labelExtraX,0<Fa*pa&&(la.labelExtraX+=Fa)))}}var aa,Y,ea;for(Y=0;2>Y;Y++){var ca=Y?T:V;var ba=Y?Math.max:Math.min;var ka=Y?1:-1;for(aa=0;2>aa;aa++){var qa=aa?Math.max:Math.min;var pa=aa?1:-1;var oa=Q[Y][aa];oa.sort(ca);var ja=Q[1-Y][aa];var ra=ja.concat(oa);var ha=[];for(ea=0;ea<oa.length;ea++)void 0!==oa[ea].yLabelMid&&ha.push(oa[ea]);oa=!1;for(ea=0;Y&&ea<ja.length;ea++)if(void 0!==ja[ea].yLabelMid){oa=ja[ea];break}for(ea=
0;ea<ha.length;ea++)ja=ea&&ha[ea-1],oa&&!ea&&(ja=oa),Z(ha[ea],ja)}}}function t(Q,O){for(var T=[],V=0;V<Q.length;V++){var Z=Q[V][0],aa=Z.trace,Y=aa.domain,ea=O.w*(Y.x[1]-Y.x[0]);Y=O.h*(Y.y[1]-Y.y[0]);aa.title.text&&"middle center"!==aa.title.position&&(Y-=g(Z,O));ea/=2;var ca=Y/2;"funnelarea"!==aa.type||aa.scalegroup||(ca/=aa.aspectratio);Z.r=Math.min(ea,ca)/(1+h(aa));Z.cx=O.l+O.w*(aa.domain.x[1]+aa.domain.x[0])/2;Z.cy=O.t+O.h*(1-aa.domain.y[0])-Y/2;aa.title.text&&-1!==aa.title.position.indexOf("bottom")&&
(Z.cy-=g(Z,O));aa.scalegroup&&-1===T.indexOf(aa.scalegroup)&&T.push(aa.scalegroup)}for(aa=0;aa<T.length;aa++){Y=Infinity;ea=T[aa];for(V=0;V<Q.length;V++)if(O=Q[V][0],Z=O.trace,Z.scalegroup===ea){if("pie"===Z.type)var ba=O.r*O.r;else"funnelarea"===Z.type&&(1<Z.aspectratio?(ba=O.r,ca=ba/Z.aspectratio):(ca=O.r,ba=ca*Z.aspectratio),ba*=(1+Z.baseratio)/2,ba*=ca);Y=Math.min(Y,ba/O.vTotal)}for(V=0;V<Q.length;V++)O=Q[V][0],Z=O.trace,Z.scalegroup===ea&&(ca=Y*O.vTotal,"funnelarea"===Z.type&&(ca/=(1+Z.baseratio)/
2,ca/=Z.aspectratio),O.r=Math.sqrt(ca))}}function v(Q){var O=Q[0],T=O.r,V=O.trace,Z=V.rotation*Math.PI/180,aa=2*Math.PI/O.vTotal,Y="px0",ea="px1",ca;if("counterclockwise"===V.direction){for(ca=0;ca<Q.length&&Q[ca].hidden;ca++);if(ca===Q.length)return;Z+=aa*Q[ca].v;aa*=-1;Y="px1";ea="px0"}var ba=w(T,Z);for(ca=0;ca<Q.length;ca++){var ka=Q[ca];if(!ka.hidden){ka[Y]=ba;ka.startangle=Z;Z+=aa*ka.v/2;ka.pxmid=w(T,Z);ka.midangle=Z;Z+=aa*ka.v/2;ba=w(T,Z);ka.stopangle=Z;ka[ea]=ba;ka.largeArc=ka.v>O.vTotal/2?
1:0;ka.halfangle=Math.PI*Math.min(ka.v/O.vTotal,.5);ka.ring=1-V.hole;var qa=ka;ka=ka.v!==O.vTotal||O.trace.hole?Math.min(1/(1+1/Math.sin(ka.halfangle)),ka.ring/2):1;qa.rInscribed=ka}}}function w(Q,O){return[Q*Math.sin(O),-Q*Math.cos(O)]}function A(Q,O,T){var V=Q._fullLayout,Z=T.trace,aa=Z.texttemplate,Y=Z.textinfo;if(!aa&&Y&&"none"!==Y){var ea=Y.split("+"),ca=-1!==ea.indexOf("label"),ba=-1!==ea.indexOf("text");Y=-1!==ea.indexOf("value");ea=-1!==ea.indexOf("percent");var ka=V.separators;ca=ca?[O.label]:
[];ba&&(ba=L.getFirstFilled(Z.text,O.pts),N(ba)&&ca.push(ba));Y&&ca.push(L.formatPieValue(O.v,ka));ea&&ca.push(L.formatPiePercent(O.v/T.vTotal,ka));O.text=ca.join("\x3cbr\x3e")}if(aa)if(aa=H.castOption(Z,O.i,"texttemplate")){T={label:O.label,value:O.v,valueLabel:L.formatPieValue(O.v,V.separators),percent:O.v/T.vTotal,percentLabel:L.formatPiePercent(O.v/T.vTotal,V.separators),color:O.color,text:O.text,customdata:H.castOption(Z,O.i,"customdata")};V=L.getFirstFilled(Z.text,O.pts);if(N(V)||""===V)T.text=
V;O.text=H.texttemplateString(aa,T,Q._fullLayout._d3locale,T,Z._meta||{})}else O.text=""}function z(Q,O){var T=Q.rotate*Math.PI/180,V=Math.cos(T);T=Math.sin(T);var Z=(O.left+O.right)/2;O=(O.top+O.bottom)/2;Q.textX=Z*V-O*T;Q.textY=Z*T+O*V;Q.noCenter=!0}var y=b("d3"),B=b("../../plots/plots"),C=b("../../components/fx"),u=b("../../components/color"),F=b("../../components/drawing"),H=b("../../lib"),J=b("../../lib/svg_text_utils");G=b("../bar/uniform_text");var I=G.recordMinTextSize,M=G.clearMinTextSize,
E=b("../bar/constants").TEXTPAD,L=b("./helpers"),P=b("./event_data"),N=b("../../lib").isValidTextValue;D.exports={plot:function(Q,O){var T=Q._fullLayout,V=T._size;M("pie",T);a(O,Q);t(O,V);var Z=H.makeTraceGroups(T._pielayer,O,"trace").each(function(aa){var Y=y.select(this),ea=aa[0],ca=ea.trace;v(aa);Y.attr("stroke-linejoin","round");Y.each(function(){var ba=y.select(this).selectAll("g.slice").data(aa);ba.enter().append("g").classed("slice",!0);ba.exit().remove();var ka=[[[],[]],[[],[]]],qa=!1;ba.each(function(ra,
ha){function la(bb,La,kb,mb){return"a"+mb*ea.r+","+mb*ea.r+" 0 "+ra.largeArc+(kb?" 1 ":" 0 ")+mb*(La[0]-bb[0])+","+mb*(La[1]-bb[1])}if(ra.hidden)y.select(this).selectAll("path,g").remove();else{ra.pointNumber=ra.i;ra.curveNumber=ca.index;ka[0>ra.pxmid[1]?0:1][0>ra.pxmid[0]?0:1].push(ra);var ua=ea.cx,na=ea.cy,wa=y.select(this),Ca=wa.selectAll("path.surface").data([ra]);Ca.enter().append("path").classed("surface",!0).style({"pointer-events":"all"});wa.call(n,Q,aa);if(ca.pull){var Fa=+L.castOption(ca.pull,
ra.pts)||0;0<Fa&&(ua+=Fa*ra.pxmid[0],na+=Fa*ra.pxmid[1])}ra.cxFinal=ua;ra.cyFinal=na;Fa=ca.hole;if(ra.v===ea.vTotal){var Xa="M"+(ua+ra.px0[0])+","+(na+ra.px0[1])+la(ra.px0,ra.pxmid,!0,1)+la(ra.pxmid,ra.px0,!0,1)+"Z";Fa?Ca.attr("d","M"+(ua+Fa*ra.px0[0])+","+(na+Fa*ra.px0[1])+la(ra.px0,ra.pxmid,!1,Fa)+la(ra.pxmid,ra.px0,!1,Fa)+"Z"+Xa):Ca.attr("d",Xa)}else if(Xa=la(ra.px0,ra.px1,!0,1),Fa){var ab=1-Fa;Ca.attr("d","M"+(ua+Fa*ra.px1[0])+","+(na+Fa*ra.px1[1])+la(ra.px1,ra.px0,!1,Fa)+"l"+ab*ra.px0[0]+","+
ab*ra.px0[1]+Xa+"Z")}else Ca.attr("d","M"+ua+","+na+"l"+ra.px0[0]+","+ra.px0[1]+Xa+"Z");A(Q,ra,ea);var gb=L.castOption(ca.textposition,ra.pts);wa=wa.selectAll("g.slicetext").data(ra.text&&"none"!==gb?[0]:[]);wa.enter().append("g").classed("slicetext",!0);wa.exit().remove();wa.each(function(){var bb=H.ensureSingle(y.select(this),"text","",function(Ia){Ia.attr("data-notex",1)}),La=H.ensureUniformFontSize(Q,"outside"===gb?p(ca,ra,T.font):k(ca,ra,T.font));bb.text(ra.text).attr({"class":"slicetext",transform:"",
"text-anchor":"middle"}).call(F.font,La).call(J.convertToTspans,Q);var kb=F.bBox(bb.node());if("outside"===gb)var mb=c(kb,ra);else mb=e(kb,ra,ea),"auto"===gb&&1>mb.scale&&(kb=H.ensureUniformFontSize(Q,ca.outsidetextfont),bb.call(F.font,kb),kb=F.bBox(bb.node()),mb=c(kb,ra));var ya=mb.textPosAngle;ya=void 0===ya?ra.pxmid:w(ea.r,ya);mb.targetX=ua+ya[0]*mb.rCenter+(mb.x||0);mb.targetY=na+ya[1]*mb.rCenter+(mb.y||0);z(mb,kb);mb.outside&&(ya=mb.targetY,ra.yLabelMin=ya-kb.height/2,ra.yLabelMid=ya,ra.yLabelMax=
ya+kb.height/2,ra.labelExtraX=0,ra.labelExtraY=0,qa=!0);mb.fontSize=La.size;I(ca.type,mb,T);aa[ha].transform=mb;bb.attr("transform",H.getTextTransform(mb))})}});var pa=y.select(this).selectAll("g.titletext").data(ca.title.text?[0]:[]);pa.enter().append("g").classed("titletext",!0);pa.exit().remove();pa.each(function(){var ra=H.ensureSingle(y.select(this),"text","",function(la){la.attr("data-notex",1)}),ha=ca.title.text;ca._meta&&(ha=H.templateString(ha,ca._meta));ra.text(ha).attr({"class":"titletext",
transform:"","text-anchor":"middle"}).call(F.font,ca.title.font).call(J.convertToTspans,Q);ha="middle center"===ca.title.position?{x:ea.cx,y:ea.cy,scale:ea.trace.hole*ea.r*2/Math.sqrt(ea.titleBox.width*ea.titleBox.width+ea.titleBox.height*ea.titleBox.height),tx:0,ty:-ea.titleBox.height/2+ea.trace.title.font.size}:d(ea,V);ra.attr("transform","translate("+ha.x+","+ha.y+")"+(1>ha.scale?"scale("+ha.scale+")":"")+"translate("+ha.tx+","+ha.ty+")")});qa&&q(ka,ca);r(ba,ca);if(qa&&ca.automargin){ba=F.bBox(Y.node());
pa=ca.domain;var oa=(.5*V.w*(pa.x[1]-pa.x[0])-ea.r)/V.w,ja=(.5*V.h*(pa.y[1]-pa.y[0])-ea.r)/V.h;B.autoMargin(Q,"pie."+ca.uid+".automargin",{xl:pa.x[0]-oa,xr:pa.x[1]+oa,yb:pa.y[0]-ja,yt:pa.y[1]+ja,l:Math.max(ea.cx-ea.r-ba.left,0),r:Math.max(ba.right-(ea.cx+ea.r),0),b:Math.max(ba.bottom-(ea.cy+ea.r),0),t:Math.max(ea.cy-ea.r-ba.top,0),pad:5})}})});setTimeout(function(){Z.selectAll("tspan").each(function(){var aa=y.select(this);aa.attr("dy")&&aa.attr("dy",aa.attr("dy"))})},0)},formatSliceLabel:A,transformInsideText:e,
determineInsideTextFont:k,positionTitleOutside:d,prerenderTitles:a,layoutAreas:t,attachFxHandlers:n,computeTransform:z}},{"../../components/color":615,"../../components/drawing":637,"../../components/fx":655,"../../lib":749,"../../lib/svg_text_utils":773,"../../plots/plots":860,"../bar/constants":892,"../bar/uniform_text":906,"./event_data":1133,"./helpers":1134,d3:169}],1139:[function(b,D,G){var r=b("d3"),n=b("./style_one"),p=b("../bar/uniform_text").resizeText;D.exports=function(k){var a=k._fullLayout._pielayer.selectAll(".trace");
p(k,a,"pie");a.each(function(e){var f=e[0].trace;e=r.select(this);e.style({opacity:f.opacity});e.selectAll("path.surface").each(function(l){r.select(this).call(n,l,f)})})}},{"../bar/uniform_text":906,"./style_one":1140,d3:169}],1140:[function(b,D,G){var r=b("../../components/color"),n=b("./helpers").castOption;D.exports=function(p,k,a){var e=a.marker.line;a=n(e.color,k.pts)||r.defaultLine;e=n(e.width,k.pts)||0;p.style("stroke-width",e).call(r.fill,k.color).call(r.stroke,a)}},{"../../components/color":615,
"./helpers":1134}],1141:[function(b,D,G){b=b("../scatter/attributes");D.exports={x:b.x,y:b.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:b.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,
max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":1155}],1142:[function(b,D,G){function r(e,f){this.scene=e;this.uid=f;this.type="pointcloud";this.pickXData=[];this.pickYData=[];this.xData=[];this.yData=[];this.textLabels=[];this.color="rgb(0, 0, 0)";this.name=
"";this.hoverinfo="all";this.idToIndex=new Int32Array(0);this.bounds=[0,0,0,0];this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]};this.pointcloud=n(e.glplot,this.pointcloudOptions);this.pointcloud._trace=this}var n=b("gl-pointcloud2d"),p=b("../../lib/str2rgbarray"),k=b("../../plots/cartesian/autorange").findExtremes,a=b("../scatter/get_trace_color");b=r.prototype;b.handlePick=function(e){var f=this.idToIndex[e.pointId];
return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*f],this.pickXYData[2*f+1]]:[this.pickXData[f],this.pickYData[f]],textLabel:Array.isArray(this.textLabels)?this.textLabels[f]:this.textLabels,color:this.color,name:this.name,pointIndex:f,hoverinfo:this.hoverinfo}};b.update=function(e){this.index=e.index;this.textLabels=e.text;this.name=e.name;this.hoverinfo=e.hoverinfo;this.bounds=[Infinity,Infinity,-Infinity,-Infinity];this.updateFast(e);this.color=a(e,{})};b.updateFast=
function(e){var f=this.xData=this.pickXData=e.x,l=this.yData=this.pickYData=e.y,m=this.pickXYData=e.xy,c=e.xbounds&&e.ybounds,d=e.indices,g=this.bounds,h;if(m){var q=m;m=m.length>>>1;if(c)g[0]=e.xbounds[0],g[2]=e.xbounds[1],g[1]=e.ybounds[0],g[3]=e.ybounds[1];else for(h=0;h<m;h++){c=q[2*h];var t=q[2*h+1];c<g[0]&&(g[0]=c);c>g[2]&&(g[2]=c);t<g[1]&&(g[1]=t);t>g[3]&&(g[3]=t)}if(!d)for(d=new Int32Array(m),h=0;h<m;h++)d[h]=h}else for(m=f.length,q=new Float32Array(2*m),d=new Int32Array(m),h=0;h<m;h++)c=
f[h],t=l[h],d[h]=h,q[2*h]=c,q[2*h+1]=t,c<g[0]&&(g[0]=c),c>g[2]&&(g[2]=c),t<g[1]&&(g[1]=t),t>g[3]&&(g[3]=t);this.idToIndex=d;this.pointcloudOptions.idToIndex=d;this.pointcloudOptions.positions=q;m=p(e.marker.color);q=p(e.marker.border.color);d=e.opacity*e.marker.opacity;m[3]*=d;this.pointcloudOptions.color=m;m=e.marker.blend;null===m&&(m=100>f.length||100>l.length);this.pointcloudOptions.blend=m;q[3]*=d;this.pointcloudOptions.borderColor=q;q=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=
e.marker.sizemin;this.pointcloudOptions.sizeMax=q;this.pointcloudOptions.areaRatio=e.marker.border.arearatio;this.pointcloud.update(this.pointcloudOptions);f=this.scene.xaxis;l=this.scene.yaxis;q=q/2||.5;e._extremes[f._id]=k(f,[g[0],g[2]],{ppad:q});e._extremes[l._id]=k(l,[g[1],g[3]],{ppad:q})};b.dispose=function(){this.pointcloud.dispose()};D.exports=function(e,f){e=new r(e,f.uid);e.update(f);return e}},{"../../lib/str2rgbarray":772,"../../plots/cartesian/autorange":796,"../scatter/get_trace_color":1165,
"gl-pointcloud2d":303}],1143:[function(b,D,G){var r=b("../../lib"),n=b("./attributes");D.exports=function(p,k,a){function e(f,l){return r.coerce(p,k,n,f,l)}e("x");e("y");e("xbounds");e("ybounds");p.xy&&p.xy instanceof Float32Array&&(k.xy=p.xy);p.indices&&p.indices instanceof Int32Array&&(k.indices=p.indices);e("text");e("marker.color",a);e("marker.opacity");e("marker.blend");e("marker.sizemin");e("marker.sizemax");e("marker.border.color",a);e("marker.border.arearatio");k._length=null}},{"../../lib":749,
"./attributes":1141}],1144:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../scatter3d/calc"),plot:b("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":837,"../scatter3d/calc":1183,"./attributes":1141,"./convert":1142,"./defaults":1143}],1145:[function(b,D,G){G=b("../../plots/font_attributes");var r=b("../../plots/attributes"),n=b("../../components/color/attributes"),
p=b("../../components/fx/attributes"),k=b("../../plots/domain").attributes,a=b("../../plots/template_attributes").hovertemplateAttrs,e=b("../../components/colorscale/attributes"),f=b("../../plot_api/plot_template").templatedArray,l=b("../../lib/extend").extendFlat,m=b("../../plot_api/edit_types").overrideAll;b("../../constants/docs");(D.exports=m({hoverinfo:l({},r.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:p.hoverlabel,domain:k({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v",
"h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:G({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},
customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:p.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",
editType:"calc"},line:{color:{valType:"color",dflt:n.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:p.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:f("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",
editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:l(e().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":614,"../../components/colorscale/attributes":622,"../../components/fx/attributes":646,"../../constants/docs":719,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plot_api/plot_template":787,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/font_attributes":825,
"../../plots/template_attributes":875}],1146:[function(b,D,G){function r(c,d){var g=c._fullData[d],h=c._fullLayout,q=h.dragmode,t=g._bgRect;if("pan"!==q&&"zoom"!==q){a(t,"pan"===h.dragmode?"move":"crosshair");h={_id:"x",c2p:l.identity,_offset:g._sankey.translateX,_length:g._sankey.width};g={_id:"y",c2p:l.identity,_offset:g._sankey.translateY,_length:g._sankey.height};var v={gd:c,element:t.node(),plotinfo:{id:d,xaxis:h,yaxis:g,fillRangeItems:l.noop},subplot:d,xaxes:[h],yaxes:[g],doneFnCompleted:function(w){for(var A=
c._fullData[d],z=A.node.groups.slice(),y=[],B=0;B<w.length;B++){a:{var C=A._sankey.graph.nodes;for(var u=0;u<C.length;u++)if(C[u].pointNumber===w[B].pointNumber){C=C[u];break a}C=void 0}if(C)if(C.group){for(u=0;u<C.childrenNodes.length;u++)y.push(C.childrenNodes[u].pointNumber);z[C.pointNumber-A.node._count]=!1}else y.push(C.pointNumber)}w=z.filter(Boolean).concat([y]);m.call("_guiRestyle",c,{"node.groups":[w]},d)},prepFn:function(w,A,z){f(w,A,z,v,q)}};e.init(v)}}D=b("../../plot_api/edit_types").overrideAll;
var n=b("../../plots/get_data").getModuleCalcData,p=b("./plot"),k=b("../../components/fx/layout_attributes"),a=b("../../lib/setcursor"),e=b("../../components/dragelement"),f=b("../../plots/cartesian/select").prepSelect,l=b("../../lib"),m=b("../../registry");G.name="sankey";G.baseLayoutAttrOverrides=D({hoverlabel:k.hoverlabel},"plot","nested");G.plot=function(c){var d=n(c.calcdata,"sankey")[0];p(c,d);G.updateFx(c)};G.clean=function(c,d,g,h){c=h._has&&h._has("sankey");d=d._has&&d._has("sankey");c&&
!d&&(h._paperdiv.selectAll(".sankey").remove(),h._paperdiv.selectAll(".bgsankey").remove())};G.updateFx=function(c){for(var d=0;d<c._fullData.length;d++)r(c,d)}},{"../../components/dragelement":634,"../../components/fx/layout_attributes":656,"../../lib":749,"../../lib/setcursor":769,"../../plot_api/edit_types":780,"../../plots/cartesian/select":816,"../../plots/get_data":834,"../../registry":880,"./plot":1151}],1147:[function(b,D,G){function r(l,m,c){for(var d=p.init2dArray(l,0),g=0;g<Math.min(m.length,
c.length);g++)if(p.isIndex(m[g],l)&&p.isIndex(c[g],l)){if(m[g]===c[g])return!0;d[m[g]].push(c[g])}return n(d).components.some(function(h){return 1<h.length})}var n=b("strongly-connected-components"),p=b("../../lib"),k=b("../../lib/gup").wrap,a=p.isArrayOrTypedArray,e=p.isIndex,f=b("../../components/colorscale");D.exports=function(l,m){var c=m.node,d=m.link;l=[];var g=a(d.color),h=a(d.customdata),q={},t={},v=d.colorscales.length,w;for(w=0;w<v;w++){var A=d.colorscales[w],z=f.extractScale(A,{cLetter:"c"});
z=f.makeColorScaleFunc(z);t[A.label]=z}for(w=v=0;w<d.value.length;w++)d.source[w]>v&&(v=d.source[w]),d.target[w]>v&&(v=d.target[w]);v+=1;m.node._count=v;m=m.node.groups;A={};for(w=0;w<m.length;w++){var y=m[w];for(z=0;z<y.length;z++){var B=y[z],C=v+w;A.hasOwnProperty(B)?p.warn("Node "+B+" is already part of a group."):A[B]=C}}z=[];y=[];for(w=0;w<d.value.length;w++){B=d.value[w];C=d.source[w];var u=d.target[w];if(0<B&&e(C,v)&&e(u,v)&&(!A.hasOwnProperty(C)||!A.hasOwnProperty(u)||A[C]!==A[u])){A.hasOwnProperty(u)&&
(u=A[u]);A.hasOwnProperty(C)&&(C=A[C]);C=+C;u=+u;q[C]=q[u]=!0;var F="";d.label&&d.label[w]&&(F=d.label[w]);var H=null;F&&t.hasOwnProperty(F)&&(H=t[F]);l.push({pointNumber:w,label:F,color:g?d.color[w]:d.color,customdata:h?d.customdata[w]:d.customdata,concentrationscale:H,source:C,target:u,value:+B});z.push(C);y.push(u)}}d=v+m.length;h=a(c.color);t=a(c.customdata);g=[];for(w=0;w<d;w++)q[w]&&g.push({group:w>v-1,childrenNodes:[],pointNumber:w,label:c.label[w],color:h?c.color[w]:c.color,customdata:t?c.customdata[w]:
c.customdata});c=!1;r(d,z,y)&&(c=!0);return k({circular:c,_nodes:g,_links:l,_groups:m,_groupLookup:A})}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gup":746,"strongly-connected-components":541}],1148:[function(b,D,G){D.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",
sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}}},{}],1149:[function(b,D,G){function r(c,d){function g(h,q){return n.coerce(c,d,p.link.colorscales,h,q)}g("label");g("cmin");g("cmax");g("colorscale")}var n=b("../../lib"),p=b("./attributes"),k=b("../../components/color"),a=b("tinycolor2"),e=b("../../plots/domain").defaults,f=b("../../components/fx/hoverlabel_defaults"),
l=b("../../plot_api/plot_template"),m=b("../../plots/array_container_defaults");D.exports=function(c,d,g,h){function q(u,F){return n.coerce(c,d,p,u,F)}function t(u,F){return n.coerce(w,A,p.node,u,F)}function v(u,F){return n.coerce(y,B,p.link,u,F)}g=n.extendDeep(h.hoverlabel,c.hoverlabel);var w=c.node,A=l.newContainer(d,"node");t("label");t("groups");t("x");t("y");t("pad");t("thickness");t("line.color");t("line.width");t("hoverinfo",c.hoverinfo);f(w,A,t,g);t("hovertemplate");var z=h.colorway;t("color",
A.label.map(function(u,F){return k.addOpacity(z[F%z.length],.8)}));t("customdata");var y=c.link||{},B=l.newContainer(d,"link");v("label");v("source");v("target");v("value");v("line.color");v("line.width");v("hoverinfo",c.hoverinfo);f(y,B,v,g);v("hovertemplate");g=.333>a(h.paper_bgcolor).getLuminance()?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";v("color",n.repeat(g,B.value.length));v("customdata");m(y,B,{name:"colorscales",handleItemDefaults:r});e(d,h,q);q("orientation");q("valueformat");q("valuesuffix");
var C;A.x.length&&A.y.length&&(C="freeform");q("arrangement",C);n.coerceFont(q,"textfont",n.extendFlat({},h.font));d._length=null}},{"../../components/color":615,"../../components/fx/hoverlabel_defaults":653,"../../lib":749,"../../plot_api/plot_template":787,"../../plots/array_container_defaults":793,"../../plots/domain":824,"./attributes":1145,tinycolor2:548}],1150:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),moduleType:"trace",
name:"sankey",basePlotModule:b("./base_plot"),selectPoints:b("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":1145,"./base_plot":1146,"./calc":1147,"./defaults":1149,"./plot":1151,"./select.js":1153}],1151:[function(b,D,G){function r(z){return""!==z}function n(z,y){return z.filter(function(B){return B.key===y.traceId})}function p(z,y){g.select(z).select("path").style("fill-opacity",y);g.select(z).select("rect").style("fill-opacity",y)}function k(z){g.select(z).select("text.name").style("fill",
"black")}function a(z){return function(y){return-1!==z.node.sourceLinks.indexOf(y.link)||-1!==z.node.targetLinks.indexOf(y.link)}}function e(z){return function(y){return-1!==y.node.sourceLinks.indexOf(z.link)||-1!==y.node.targetLinks.indexOf(z.link)}}function f(z,y,B){y&&B&&n(B,y).selectAll("."+w.sankeyLink).filter(a(y)).call(m.bind(0,y,B,!1))}function l(z,y,B){y&&B&&n(B,y).selectAll("."+w.sankeyLink).filter(a(y)).call(c.bind(0,y,B,!1))}function m(z,y,B,C){var u=C.datum().link.label;C.style("fill-opacity",
function(F){if(!F.link.concentrationscale)return.4});u&&n(y,z).selectAll("."+w.sankeyLink).filter(function(F){return F.link.label===u}).style("fill-opacity",function(F){if(!F.link.concentrationscale)return.4});B&&n(y,z).selectAll("."+w.sankeyNode).filter(e(z)).call(f)}function c(z,y,B,C){var u=C.datum().link.label;C.style("fill-opacity",function(F){return F.tinyColorAlpha});u&&n(y,z).selectAll("."+w.sankeyLink).filter(function(F){return F.link.label===u}).style("fill-opacity",function(F){return F.tinyColorAlpha});
B&&n(y,z).selectAll(w.sankeyNode).filter(e(z)).call(l)}function d(z,y){z=v.nestedProperty(z.hoverlabel||{},y).get();return Array.isArray(z)?!1:z}var g=b("d3"),h=b("./render"),q=b("../../components/fx"),t=b("../../components/color"),v=b("../../lib"),w=b("./constants").cn,A=v._;D.exports=function(z,y){for(var B=z._fullLayout,C=B._paper,u=B._size,F=0;F<z._fullData.length;F++)if(z._fullData[F].visible&&z._fullData[F].type===w.sankey&&!z._fullData[F]._viewInitial){var H=z._fullData[F].node;z._fullData[F]._viewInitial=
{node:{groups:H.groups.slice(),x:H.x.slice(),y:H.y.slice()}}}var J=A(z,"source:")+" ",I=A(z,"target:")+" ",M=A(z,"concentration:")+" ",E=A(z,"incoming flow count:")+" ",L=A(z,"outgoing flow count:")+" ";h(z,C,y,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{linkEvents:{hover:function(P,N,Q){!1!==z._fullLayout.hovermode&&(g.select(P).call(m.bind(0,N,Q,!0)),"skip"!==N.link.trace.link.hoverinfo&&(N.link.fullData=N.link.trace,z.emit("plotly_hover",{event:g.event,points:[N.link]})))},follow:function(P,
N){function Q(ea){if(ea.circular){var ca=(ea.circularPathData.leftInnerExtent+ea.circularPathData.rightInnerExtent)/2;var ba=ea.circularPathData.verticalFullExtent}else ca=(ea.source.x1+ea.target.x0)/2,ba=(ea.y0+ea.y1)/2;ca=[ca,ba];"v"===ea.trace.orientation&&ca.reverse();ca[0]+=N.parent.translateX;ca[1]+=N.parent.translateY;return ca}if(!1!==z._fullLayout.hovermode&&(P=N.link.trace.link,"none"!==P.hoverinfo&&"skip"!==P.hoverinfo)){for(var O=[],T=0,V=0;V<N.flow.links.length;V++){var Z=N.flow.links[V];
if("closest"!==z._fullLayout.hovermode||N.link.pointNumber===Z.pointNumber){N.link.pointNumber===Z.pointNumber&&(T=V);Z.fullData=Z.trace;P=N.link.trace.link;var aa=Q(Z),Y={valueLabel:g.format(N.valueFormat)(Z.value)+N.valueSuffix};O.push({x:aa[0],y:aa[1],name:Y.valueLabel,text:[Z.label||"",J+Z.source.label,I+Z.target.label,Z.concentrationscale?M+g.format("%0.2f")(Z.flow.labelConcentration):""].filter(r).join("\x3cbr\x3e"),color:d(P,"bgcolor")||t.addOpacity(Z.color,1),borderColor:d(P,"bordercolor"),
fontFamily:d(P,"font.family"),fontSize:d(P,"font.size"),fontColor:d(P,"font.color"),nameLength:d(P,"namelength"),textAlign:d(P,"align"),idealAlign:g.event.x<aa[0]?"right":"left",hovertemplate:P.hovertemplate,hovertemplateLabels:Y,eventData:[Z]})}}q.loneHover(O,{container:B._hoverlayer.node(),outerContainer:B._paper.node(),gd:z,anchorIndex:T}).each(function(){N.link.concentrationscale||p(this,.65);k(this)})}},unhover:function(P,N,Q){!1!==z._fullLayout.hovermode&&(g.select(P).call(c.bind(0,N,Q,!0)),
"skip"!==N.link.trace.link.hoverinfo&&(N.link.fullData=N.link.trace,z.emit("plotly_unhover",{event:g.event,points:[N.link]})),q.loneUnhover(B._hoverlayer.node()))},select:function(P,N){P=N.link;P.originalEvent=g.event;z._hoverdata=[P];q.click(z,{target:!0})}},nodeEvents:{hover:function(P,N,Q){!1!==z._fullLayout.hovermode&&(g.select(P).call(f,N,Q),"skip"!==N.node.trace.node.hoverinfo&&(N.node.fullData=N.node.trace,z.emit("plotly_hover",{event:g.event,points:[N.node]})))},follow:function(P,N){if(!1!==
z._fullLayout.hovermode){var Q=N.node.trace.node;if("none"!==Q.hoverinfo&&"skip"!==Q.hoverinfo){P=g.select(P).select("."+w.nodeRect);var O=z._fullLayout._paperdiv.node().getBoundingClientRect(),T=P.node().getBoundingClientRect();P=T.left-2-O.left;var V=T.right+2-O.left;O=T.top+T.height/4-O.top;T={valueLabel:g.format(N.valueFormat)(N.node.value)+N.valueSuffix};N.node.fullData=N.node.trace;N=q.loneHover({x0:P,x1:V,y:O,name:g.format(N.valueFormat)(N.node.value)+N.valueSuffix,text:[N.node.label,E+N.node.targetLinks.length,
L+N.node.sourceLinks.length].filter(r).join("\x3cbr\x3e"),color:d(Q,"bgcolor")||N.tinyColorHue,borderColor:d(Q,"bordercolor"),fontFamily:d(Q,"font.family"),fontSize:d(Q,"font.size"),fontColor:d(Q,"font.color"),nameLength:d(Q,"namelength"),textAlign:d(Q,"align"),idealAlign:"left",hovertemplate:Q.hovertemplate,hovertemplateLabels:T,eventData:[N.node]},{container:B._hoverlayer.node(),outerContainer:B._paper.node(),gd:z});p(N,.85);k(N)}}},unhover:function(P,N,Q){!1!==z._fullLayout.hovermode&&(g.select(P).call(l,
N,Q),"skip"!==N.node.trace.node.hoverinfo&&(N.node.fullData=N.node.trace,z.emit("plotly_unhover",{event:g.event,points:[N.node]})),q.loneUnhover(B._hoverlayer.node()))},select:function(P,N,Q){var O=N.node;O.originalEvent=g.event;z._hoverdata=[O];g.select(P).call(l,N,Q);q.click(z,{target:!0})}}})}},{"../../components/color":615,"../../components/fx":655,"../../lib":749,"./constants":1148,"./render":1152,d3:169}],1152:[function(b,D,G){function r(Y,ea,ca){function ba(kb){kb.forEach(function(mb){var ya=
0;var Ia=mb.length,Na;mb.sort(function(hb,Ya){return hb.y0-Ya.y0});for(Na=0;Na<Ia;++Na){var Ta=mb[Na];Ta.y0>=ya||(ya-=Ta.y0,1E-6<ya&&(Ta.y0+=ya,Ta.y1+=ya));ya=Ta.y1+ja}})}function ka(kb){var mb=kb.map(function(Ga,Pa){return{x0:Ga.x0,index:Pa}}).sort(function(Ga,Pa){return Ga.x0-Pa.x0}),ya=[],Ia=-1,Na=-Infinity;for(Xa=0;Xa<mb.length;Xa++){var Ta=kb[mb[Xa].index];if(Ta.x0>Na+ra){Ia+=1;var hb=Ta.x0}Na=Ta.x0;ya[Ia]||(ya[Ia]=[]);ya[Ia].push(Ta);var Ya=hb-Ta.x0;Ta.x0+=Ya;Ta.x1+=Ya}return ya}var qa=V(ea);
ea=qa.trace;var pa=ea.domain,oa="h"===ea.orientation,ja=ea.node.pad,ra=ea.node.thickness,ha=Y.width*(pa.x[1]-pa.x[0]),la=Y.height*(pa.y[1]-pa.y[0]),ua=qa._nodes,na=qa._links,wa=qa.circular;var Ca=wa?P.sankeyCircular().circularLinkGap(0):L.sankey();Ca.iterations(H.sankeyIterations).size(oa?[ha,la]:[la,ha]).nodeWidth(ra).nodePadding(ja).nodeId(function(kb){return kb.pointNumber}).nodes(ua).links(na);var Fa=Ca();Ca.nodePadding()<ja&&Q.warn("node.pad was reduced to ",Ca.nodePadding()," to fit within the figure.");
var Xa,ab,gb;for(La in qa._groupLookup){ua=parseInt(qa._groupLookup[La]);for(Xa=0;Xa<Fa.nodes.length;Xa++)if(Fa.nodes[Xa].pointNumber===ua){var bb=Fa.nodes[Xa];break}bb&&(ua={pointNumber:parseInt(La),x0:bb.x0,x1:bb.x1,y0:bb.y0,y1:bb.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]},Fa.nodes.unshift(ua),bb.childrenNodes.unshift(ua))}(function(){for(Xa=0;Xa<Fa.nodes.length;Xa++){var kb=Fa.nodes[Xa],mb={};for(ab=0;ab<kb.targetLinks.length;ab++){var ya=kb.targetLinks[ab];var Ia=ya.source.pointNumber+":"+
ya.target.pointNumber;mb.hasOwnProperty(Ia)||(mb[Ia]=[]);mb[Ia].push(ya)}var Na=Object.keys(mb);for(ab=0;ab<Na.length;ab++){Ia=Na[ab];Ia=mb[Ia];var Ta=0,hb={};for(gb=0;gb<Ia.length;gb++)ya=Ia[gb],hb[ya.label]||(hb[ya.label]=0),hb[ya.label]+=ya.value,Ta+=ya.value;for(gb=0;gb<Ia.length;gb++)ya=Ia[gb],ya.flow={value:Ta,labelConcentration:hb[ya.label]/Ta,concentration:ya.value/Ta,links:Ia},ya.concentrationscale&&(ya.color=I(ya.concentrationscale(ya.flow.labelConcentration)))}for(ab=mb=0;ab<kb.sourceLinks.length;ab++)mb+=
kb.sourceLinks[ab].value;for(ab=0;ab<kb.sourceLinks.length;ab++)ya=kb.sourceLinks[ab],ya.concentrationOut=ya.value/mb;for(ab=mb=0;ab<kb.targetLinks.length;ab++)mb+=kb.targetLinks[ab].value;for(ab=0;ab<kb.targetLinks.length;ab++)ya=kb.targetLinks[ab],ya.concenrationIn=ya.value/mb}})();if(ea.node.x.length&&ea.node.y.length){for(Xa=0;Xa<Math.min(ea.node.x.length,ea.node.y.length,Fa.nodes.length);Xa++)if(ea.node.x[Xa]&&ea.node.y[Xa]){var La=[ea.node.x[Xa]*ha,ea.node.y[Xa]*la];Fa.nodes[Xa].x0=La[0]-ra/
2;Fa.nodes[Xa].x1=La[0]+ra/2;bb=Fa.nodes[Xa].y1-Fa.nodes[Xa].y0;Fa.nodes[Xa].y0=La[1]-bb/2;Fa.nodes[Xa].y1=La[1]+bb/2}"snap"===ea.arrangement&&(ua=Fa.nodes,La=ka(ua),ba(La));Ca.update(Fa)}return{circular:wa,key:ca,trace:ea,guid:Q.randstr(),horizontal:oa,width:ha,height:la,nodePad:ea.node.pad,nodeLineColor:ea.node.line.color,nodeLineWidth:ea.node.line.width,linkLineColor:ea.link.line.color,linkLineWidth:ea.link.line.width,valueFormat:ea.valueformat,valueSuffix:ea.valuesuffix,textFont:ea.textfont,translateX:pa.x[0]*
Y.width+Y.margin.l,translateY:Y.height-pa.y[1]*Y.height+Y.margin.t,dragParallel:oa?la:ha,dragPerpendicular:oa?ha:la,arrangement:ea.arrangement,sankey:Ca,graph:Fa,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function n(Y,ea,ca){var ba=I(ea.color),ka=ea.source.label+"|"+ea.target.label;ea.trace=Y.trace;ea.curveNumber=Y.trace.index;return{circular:Y.circular,key:ka+"__"+ca,traceId:Y.key,pointNumber:ea.pointNumber,link:ea,tinyColorHue:M.tinyRGB(ba),tinyColorAlpha:ba.getAlpha(),linkPath:p,
linkLineColor:Y.linkLineColor,linkLineWidth:Y.linkLineWidth,valueFormat:Y.valueFormat,valueSuffix:Y.valueSuffix,sankey:Y.sankey,parent:Y,interactionState:Y.interactionState,flow:ea.flow}}function p(){return function(Y){if(Y.link.circular){var ea=Y.link,ca=ea.width/2,ba=ea.circularPathData;return"top"===ea.circularLinkType?"M "+ba.targetX+" "+(ba.targetY+ca)+" L"+ba.rightInnerExtent+" "+(ba.targetY+ca)+"A"+(ba.rightLargeArcRadius+ca)+" "+(ba.rightSmallArcRadius+ca)+" 0 0 1 "+(ba.rightFullExtent-ca)+
" "+(ba.targetY-ba.rightSmallArcRadius)+"L"+(ba.rightFullExtent-ca)+" "+ba.verticalRightInnerExtent+"A"+(ba.rightLargeArcRadius+ca)+" "+(ba.rightLargeArcRadius+ca)+" 0 0 1 "+ba.rightInnerExtent+" "+(ba.verticalFullExtent-ca)+"L"+ba.leftInnerExtent+" "+(ba.verticalFullExtent-ca)+"A"+(ba.leftLargeArcRadius+ca)+" "+(ba.leftLargeArcRadius+ca)+" 0 0 1 "+(ba.leftFullExtent+ca)+" "+ba.verticalLeftInnerExtent+"L"+(ba.leftFullExtent+ca)+" "+(ba.sourceY-ba.leftSmallArcRadius)+"A"+(ba.leftLargeArcRadius+ca)+
" "+(ba.leftSmallArcRadius+ca)+" 0 0 1 "+ba.leftInnerExtent+" "+(ba.sourceY+ca)+"L"+ba.sourceX+" "+(ba.sourceY+ca)+"L"+ba.sourceX+" "+(ba.sourceY-ca)+"L"+ba.leftInnerExtent+" "+(ba.sourceY-ca)+"A"+(ba.leftLargeArcRadius-ca)+" "+(ba.leftSmallArcRadius-ca)+" 0 0 0 "+(ba.leftFullExtent-ca)+" "+(ba.sourceY-ba.leftSmallArcRadius)+"L"+(ba.leftFullExtent-ca)+" "+ba.verticalLeftInnerExtent+"A"+(ba.leftLargeArcRadius-ca)+" "+(ba.leftLargeArcRadius-ca)+" 0 0 0 "+ba.leftInnerExtent+" "+(ba.verticalFullExtent+
ca)+"L"+ba.rightInnerExtent+" "+(ba.verticalFullExtent+ca)+"A"+(ba.rightLargeArcRadius-ca)+" "+(ba.rightLargeArcRadius-ca)+" 0 0 0 "+(ba.rightFullExtent+ca)+" "+ba.verticalRightInnerExtent+"L"+(ba.rightFullExtent+ca)+" "+(ba.targetY-ba.rightSmallArcRadius)+"A"+(ba.rightLargeArcRadius-ca)+" "+(ba.rightSmallArcRadius-ca)+" 0 0 0 "+ba.rightInnerExtent+" "+(ba.targetY-ca)+"L"+ba.targetX+" "+(ba.targetY-ca)+"Z":"M "+ba.targetX+" "+(ba.targetY-ca)+" L"+ba.rightInnerExtent+" "+(ba.targetY-ca)+"A"+(ba.rightLargeArcRadius+
ca)+" "+(ba.rightSmallArcRadius+ca)+" 0 0 0 "+(ba.rightFullExtent-ca)+" "+(ba.targetY+ba.rightSmallArcRadius)+"L"+(ba.rightFullExtent-ca)+" "+ba.verticalRightInnerExtent+"A"+(ba.rightLargeArcRadius+ca)+" "+(ba.rightLargeArcRadius+ca)+" 0 0 0 "+ba.rightInnerExtent+" "+(ba.verticalFullExtent+ca)+"L"+ba.leftInnerExtent+" "+(ba.verticalFullExtent+ca)+"A"+(ba.leftLargeArcRadius+ca)+" "+(ba.leftLargeArcRadius+ca)+" 0 0 0 "+(ba.leftFullExtent+ca)+" "+ba.verticalLeftInnerExtent+"L"+(ba.leftFullExtent+ca)+
" "+(ba.sourceY+ba.leftSmallArcRadius)+"A"+(ba.leftLargeArcRadius+ca)+" "+(ba.leftSmallArcRadius+ca)+" 0 0 0 "+ba.leftInnerExtent+" "+(ba.sourceY-ca)+"L"+ba.sourceX+" "+(ba.sourceY-ca)+"L"+ba.sourceX+" "+(ba.sourceY+ca)+"L"+ba.leftInnerExtent+" "+(ba.sourceY+ca)+"A"+(ba.leftLargeArcRadius-ca)+" "+(ba.leftSmallArcRadius-ca)+" 0 0 1 "+(ba.leftFullExtent-ca)+" "+(ba.sourceY+ba.leftSmallArcRadius)+"L"+(ba.leftFullExtent-ca)+" "+ba.verticalLeftInnerExtent+"A"+(ba.leftLargeArcRadius-ca)+" "+(ba.leftLargeArcRadius-
ca)+" 0 0 1 "+ba.leftInnerExtent+" "+(ba.verticalFullExtent-ca)+"L"+ba.rightInnerExtent+" "+(ba.verticalFullExtent-ca)+"A"+(ba.rightLargeArcRadius-ca)+" "+(ba.rightLargeArcRadius-ca)+" 0 0 1 "+(ba.rightFullExtent+ca)+" "+ba.verticalRightInnerExtent+"L"+(ba.rightFullExtent+ca)+" "+(ba.targetY+ba.rightSmallArcRadius)+"A"+(ba.rightLargeArcRadius-ca)+" "+(ba.rightSmallArcRadius-ca)+" 0 0 1 "+ba.rightInnerExtent+" "+(ba.targetY+ca)+"L"+ba.targetX+" "+(ba.targetY+ca)+"Z"}ea=Y.link.source.x1;ca=Y.link.target.x0;
var ka=Z(ea,ca);ba=ka(.5);ka=ka(.5);var qa=Y.link.y0-Y.link.width/2,pa=Y.link.y0+Y.link.width/2,oa=Y.link.y1-Y.link.width/2;Y=Y.link.y1+Y.link.width/2;return"M"+ea+","+qa+"C"+ba+","+qa+" "+ka+","+oa+" "+ca+","+oa+"L"+ca+","+Y+"C"+ka+","+Y+" "+ba+","+pa+" "+ea+","+pa+"Z"}}function k(Y,ea){var ca=I(ea.color),ba=H.nodePadAcross,ka=Y.nodePad/2;ea.dx=ea.x1-ea.x0;ea.dy=ea.y1-ea.y0;var qa=ea.dx,pa=Math.max(.5,ea.dy),oa="node_"+ea.pointNumber;ea.group&&(oa=Q.randstr());ea.trace=Y.trace;ea.curveNumber=Y.trace.index;
return{index:ea.pointNumber,key:oa,partOfGroup:ea.partOfGroup||!1,group:ea.group,traceId:Y.key,trace:Y.trace,node:ea,nodePad:Y.nodePad,nodeLineColor:Y.nodeLineColor,nodeLineWidth:Y.nodeLineWidth,textFont:Y.textFont,size:Y.horizontal?Y.height:Y.width,visibleWidth:Math.ceil(qa),visibleHeight:pa,zoneX:-ba,zoneY:-ka,zoneWidth:qa+2*ba,zoneHeight:pa+2*ka,labelY:Y.horizontal?ea.dy/2+1:ea.dx/2+1,left:1===ea.originalLayer,sizeAcross:Y.width,forceLayouts:Y.forceLayouts,horizontal:Y.horizontal,darkBackground:128>=
ca.getBrightness(),tinyColorHue:M.tinyRGB(ca),tinyColorAlpha:ca.getAlpha(),valueFormat:Y.valueFormat,valueSuffix:Y.valueSuffix,sankey:Y.sankey,graph:Y.graph,arrangement:Y.arrangement,uniqueNodeLabelPathId:[Y.guid,Y.key,oa].join("_"),interactionState:Y.interactionState,figure:Y}}function a(Y){Y.attr("transform",function(ea){return"translate("+ea.node.x0.toFixed(3)+", "+ea.node.y0.toFixed(3)+")"})}function e(Y){Y.call(a)}function f(Y){Y.attr("width",function(ea){return ea.node.x1-ea.node.x0}).attr("height",
function(ea){return ea.visibleHeight})}function l(Y){return"translate("+Y.translateX+","+Y.translateY+")"+(Y.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function m(Y){return"translate("+(Y.horizontal?0:Y.labelY)+" "+(Y.horizontal?Y.labelY:0)+")"}function c(Y){return J.svg.line()([[Y.horizontal?Y.left?-Y.sizeAcross:Y.visibleWidth+H.nodeTextOffsetHorizontal:H.nodeTextOffsetHorizontal,0],[Y.horizontal?Y.left?-H.nodeTextOffsetHorizontal:Y.sizeAcross:Y.visibleHeight-H.nodeTextOffsetHorizontal,
0]])}function d(Y){return Y.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}function g(Y){return Y.horizontal?"scale(1 1)":"scale(-1 1)"}function h(Y){return Y.darkBackground&&!Y.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function q(Y){return Y.horizontal&&Y.left?"100%":"0%"}function t(Y,ea,ca){Y.on(".basic",null).on("mouseover.basic",function(ba){ba.interactionState.dragInProgress||ba.partOfGroup||(ca.hover(this,ba,ea),ba.interactionState.hovered=[this,ba])}).on("mousemove.basic",function(ba){ba.interactionState.dragInProgress||
ba.partOfGroup||(ca.follow(this,ba),ba.interactionState.hovered=[this,ba])}).on("mouseout.basic",function(ba){ba.interactionState.dragInProgress||ba.partOfGroup||(ca.unhover(this,ba,ea),ba.interactionState.hovered=!1)}).on("click.basic",function(ba){ba.interactionState.hovered&&(ca.unhover(this,ba,ea),ba.interactionState.hovered=!1);ba.interactionState.dragInProgress||ba.partOfGroup||ca.select(this,ba,ea)})}function v(Y,ea,ca,ba){var ka=J.behavior.drag().origin(function(qa){return{x:qa.node.x0+qa.visibleWidth/
2,y:qa.node.y0+qa.visibleHeight/2}}).on("dragstart",function(qa){if("fixed"!==qa.arrangement&&(Q.ensureSingle(ba._fullLayout._infolayer,"g","dragcover",function(oa){ba._fullLayout._dragCover=oa}),Q.raiseToTop(this),qa.interactionState.dragInProgress=qa.node,C(qa.node),qa.interactionState.hovered&&(ca.nodeEvents.unhover.apply(0,qa.interactionState.hovered),qa.interactionState.hovered=!1),"snap"===qa.arrangement)){var pa=qa.traceId+"|"+qa.key;qa.forceLayouts[pa]?qa.forceLayouts[pa].alpha(1):w(Y,pa,
qa,ba);A(Y,ea,qa,pa,ba)}}).on("drag",function(qa){if("fixed"!==qa.arrangement){var pa=J.event.x,oa=J.event.y;"snap"===qa.arrangement?(qa.node.x0=pa-qa.visibleWidth/2,qa.node.x1=pa+qa.visibleWidth/2):("freeform"===qa.arrangement&&(qa.node.x0=pa-qa.visibleWidth/2,qa.node.x1=pa+qa.visibleWidth/2),oa=Math.max(0,Math.min(qa.size-qa.visibleHeight/2,oa)));qa.node.y0=oa-qa.visibleHeight/2;qa.node.y1=oa+qa.visibleHeight/2;C(qa.node);"snap"!==qa.arrangement&&(qa.sankey.update(qa.graph),Y.filter(u(qa)).call(e),
ea.attr("d",p()))}}).on("dragend",function(qa){if("fixed"!==qa.arrangement){qa.interactionState.dragInProgress=!1;for(var pa=0;pa<qa.node.childrenNodes.length;pa++)qa.node.childrenNodes[pa].x=qa.node.x,qa.node.childrenNodes[pa].y=qa.node.y;"snap"!==qa.arrangement&&y(qa,ba)}});Y.on(".drag",null).call(ka)}function w(Y,ea,ca,ba){F(ca.graph.nodes);var ka=ca.graph.nodes.filter(function(qa){return qa.originalX===ca.node.originalX}).filter(function(qa){return!qa.partOfGroup});ca.forceLayouts[ea]=N.forceSimulation(ka).alphaDecay(0).force("collide",
N.forceCollide().radius(function(qa){return qa.dy/2+ca.nodePad/2}).strength(1).iterations(H.forceIterations)).force("constrain",z(Y,ea,ka,ca,ba)).stop()}function A(Y,ea,ca,ba,ka){window.requestAnimationFrame(function pa(){var oa;for(oa=0;oa<H.forceTicksPerFrame;oa++)ca.forceLayouts[ba].tick();oa=ca.graph.nodes;for(var ja=0;ja<oa.length;ja++)oa[ja].y0=oa[ja].y-oa[ja].dy/2,oa[ja].y1=oa[ja].y0+oa[ja].dy,oa[ja].x0=oa[ja].x-oa[ja].dx/2,oa[ja].x1=oa[ja].x0+oa[ja].dx;ca.sankey.update(ca.graph);Y.filter(u(ca)).call(e);
ea.attr("d",p());0<ca.forceLayouts[ba].alpha()?window.requestAnimationFrame(pa):(oa=ca.node.originalX,ca.node.x0=oa-ca.visibleWidth/2,ca.node.x1=oa+ca.visibleWidth/2,y(ca,ka))})}function z(Y,ea,ca,ba){return function(){for(var ka=0,qa=0;qa<ca.length;qa++){var pa=ca[qa];pa===ba.interactionState.dragInProgress?(pa.x=pa.lastDraggedX,pa.y=pa.lastDraggedY):(pa.vx=(pa.originalX-pa.x)/H.forceTicksPerFrame,pa.y=Math.min(ba.size-pa.dy/2,Math.max(pa.dy/2,pa.y)));ka=Math.max(ka,Math.abs(pa.vx),Math.abs(pa.vy))}!ba.interactionState.dragInProgress&&
.1>ka&&0<ba.forceLayouts[ea].alpha()&&ba.forceLayouts[ea].alpha(0)}}function y(Y,ea){for(var ca=[],ba=[],ka=0;ka<Y.graph.nodes.length;ka++){var qa=(Y.graph.nodes[ka].y0+Y.graph.nodes[ka].y1)/2;ca.push((Y.graph.nodes[ka].x0+Y.graph.nodes[ka].x1)/2/Y.figure.width);ba.push(qa/Y.figure.height)}aa.call("_guiRestyle",ea,{"node.x":[ca],"node.y":[ba]},Y.trace.index).then(function(){ea._fullLayout._dragCover&&ea._fullLayout._dragCover.remove()})}function B(Y){var ea=[],ca;for(ca=0;ca<Y.length;ca++)Y[ca].originalX=
(Y[ca].x0+Y[ca].x1)/2,Y[ca].originalY=(Y[ca].y0+Y[ca].y1)/2,-1===ea.indexOf(Y[ca].originalX)&&ea.push(Y[ca].originalX);ea.sort(function(ba,ka){return ba-ka});for(ca=0;ca<Y.length;ca++)Y[ca].originalLayerIndex=ea.indexOf(Y[ca].originalX),Y[ca].originalLayer=Y[ca].originalLayerIndex/(ea.length-1)}function C(Y){Y.lastDraggedX=Y.x0+Y.dx/2;Y.lastDraggedY=Y.y0+Y.dy/2}function u(Y){return function(ea){return ea.node.originalX===Y.node.originalX}}function F(Y){for(var ea=0;ea<Y.length;ea++)Y[ea].y=(Y[ea].y0+
Y[ea].y1)/2,Y[ea].x=(Y[ea].x0+Y[ea].x1)/2}var H=b("./constants"),J=b("d3"),I=b("tinycolor2"),M=b("../../components/color"),E=b("../../components/drawing"),L=b("@plotly/d3-sankey"),P=b("@plotly/d3-sankey-circular"),N=b("d3-force"),Q=b("../../lib");G=b("../../lib/gup");var O=G.keyFun,T=G.repeat,V=G.unwrap,Z=b("d3-interpolate").interpolateNumber,aa=b("../../registry");D.exports=function(Y,ea,ca,ba,ka){var qa=!1;Q.ensureSingle(Y._fullLayout._infolayer,"g","first-render",function(){qa=!0});var pa=Y._fullLayout._dragCover;
ca=ca.filter(function(ja){return V(ja).trace.visible}).map(r.bind(null,ba));ea=ea.selectAll("."+H.cn.sankey).data(ca,O);ea.exit().remove();ea.enter().append("g").classed(H.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",l);ea.each(function(ja,ra){Y._fullData[ra]._sankey=ja;var ha="bgsankey-"+ja.trace.uid+"-"+ra;Q.ensureSingle(Y._fullLayout._draggers,"rect",ha);
Y._fullData[ra]._bgRect=J.select("."+ha);Y._fullData[ra]._bgRect.style("pointer-events","all").attr("width",ja.width).attr("height",ja.height).attr("x",ja.translateX).attr("y",ja.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})});ea.transition().ease(H.ease).duration(H.duration).attr("transform",l);ca=ea.selectAll("."+H.cn.sankeyLinks).data(T,O);ca.enter().append("g").classed(H.cn.sankeyLinks,!0).style("fill","none");ba=ca.selectAll("."+H.cn.sankeyLink).data(function(ja){return ja.graph.links.filter(function(ra){return ra.value}).map(n.bind(null,
ja))},O);ba.enter().append("path").classed(H.cn.sankeyLink,!0).call(t,ea,ka.linkEvents);ba.style("stroke",function(ja){return 1<ja.link.width||0<ja.linkLineWidth?M.tinyRGB(I(ja.linkLineColor)):ja.tinyColorHue}).style("stroke-opacity",function(ja){return 1<ja.link.width||0<ja.linkLineWidth?M.opacity(ja.linkLineColor):ja.tinyColorAlpha}).style("fill",function(ja){return ja.tinyColorHue}).style("fill-opacity",function(ja){return ja.tinyColorAlpha}).style("stroke-width",function(ja){return 1<ja.link.width||
0<ja.linkLineWidth?ja.linkLineWidth:1}).attr("d",p());ba.style("opacity",function(){return Y._context.staticPlot||qa||pa?1:0}).transition().ease(H.ease).duration(H.duration).style("opacity",1);ba.exit().transition().ease(H.ease).duration(H.duration).style("opacity",0).remove();ca=ea.selectAll("."+H.cn.sankeyNodeSet).data(T,O);ca.enter().append("g").classed(H.cn.sankeyNodeSet,!0);ca.style("cursor",function(ja){switch(ja.arrangement){case "fixed":return"default";case "perpendicular":return"ns-resize";
default:return"move"}});ca=ca.selectAll("."+H.cn.sankeyNode).data(function(ja){var ra=ja.graph.nodes;B(ra);return ra.map(k.bind(null,ja))},O);ca.enter().append("g").classed(H.cn.sankeyNode,!0).call(a).style("opacity",function(ja){return!Y._context.staticPlot&&!qa||ja.partOfGroup?0:1});ca.call(t,ea,ka.nodeEvents).call(v,ba,ka,Y);ca.transition().ease(H.ease).duration(H.duration).call(a).style("opacity",function(ja){return ja.partOfGroup?0:1});ca.exit().transition().ease(H.ease).duration(H.duration).style("opacity",
0).remove();ka=ca.selectAll("."+H.cn.nodeRect).data(T);ka.enter().append("rect").classed(H.cn.nodeRect,!0).call(f);ka.style("stroke-width",function(ja){return ja.nodeLineWidth}).style("stroke",function(ja){return M.tinyRGB(I(ja.nodeLineColor))}).style("stroke-opacity",function(ja){return M.opacity(ja.nodeLineColor)}).style("fill",function(ja){return ja.tinyColorHue}).style("fill-opacity",function(ja){return ja.tinyColorAlpha});ka.transition().ease(H.ease).duration(H.duration).call(f);ka=ca.selectAll("."+
H.cn.nodeCapture).data(T);ka.enter().append("rect").classed(H.cn.nodeCapture,!0).style("fill-opacity",0);ka.attr("x",function(ja){return ja.zoneX}).attr("y",function(ja){return ja.zoneY}).attr("width",function(ja){return ja.zoneWidth}).attr("height",function(ja){return ja.zoneHeight});ka=ca.selectAll("."+H.cn.nodeCentered).data(T);ka.enter().append("g").classed(H.cn.nodeCentered,!0).attr("transform",m);ka.transition().ease(H.ease).duration(H.duration).attr("transform",m);ea=ka.selectAll("."+H.cn.nodeLabelGuide).data(T);
ea.enter().append("path").classed(H.cn.nodeLabelGuide,!0).attr("id",function(ja){return ja.uniqueNodeLabelPathId}).attr("d",c).attr("transform",d);ea.transition().ease(H.ease).duration(H.duration).attr("d",c).attr("transform",d);var oa=ka.selectAll("."+H.cn.nodeLabel).data(T);oa.enter().append("text").classed(H.cn.nodeLabel,!0).attr("transform",g).style("user-select","none").style("cursor","default").style("fill","black");oa.style("text-shadow",function(ja){return ja.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":
"none"}).each(function(ja){E.font(oa,ja.textFont)});oa.transition().ease(H.ease).duration(H.duration).attr("transform",g);ka=oa.selectAll("."+H.cn.nodeLabelTextPath).data(T);ka.enter().append("textPath").classed(H.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(ja){return"#"+ja.uniqueNodeLabelPathId}).attr("startOffset",q).style("fill",h);ka.text(function(ja){return ja.horizontal||5<ja.node.dy?ja.node.label:""}).attr("text-anchor",function(ja){return ja.horizontal&&
ja.left?"end":"start"});ka.transition().ease(H.ease).duration(H.duration).attr("startOffset",q).style("fill",h)}},{"../../components/color":615,"../../components/drawing":637,"../../lib":749,"../../lib/gup":746,"../../registry":880,"./constants":1148,"@plotly/d3-sankey":56,"@plotly/d3-sankey-circular":55,d3:169,"d3-force":160,"d3-interpolate":162,tinycolor2:548}],1153:[function(b,D,G){D.exports=function(r,n){for(var p=[],k=r.cd[0].trace,a=k._sankey.graph.nodes,e=0;e<a.length;e++){var f=a[e];if(!f.partOfGroup){var l=
[(f.x0+f.x1)/2,(f.y0+f.y1)/2];"v"===k.orientation&&l.reverse();n&&n.contains(l,!1,e,r)&&p.push({pointNumber:f.pointNumber})}}return p}},{}],1154:[function(b,D,G){var r=b("../../lib");D.exports=function(n,p){for(var k=0;k<n.length;k++)n[k].i=k;r.mergeArray(p.text,n,"tx");r.mergeArray(p.texttemplate,n,"txt");r.mergeArray(p.hovertext,n,"htx");r.mergeArray(p.customdata,n,"data");r.mergeArray(p.textposition,n,"tp");p.textfont&&(r.mergeArrayCastPositive(p.textfont.size,n,"ts"),r.mergeArray(p.textfont.color,
n,"tc"),r.mergeArray(p.textfont.family,n,"tf"));if(p=p.marker){r.mergeArrayCastPositive(p.size,n,"ms");r.mergeArrayCastPositive(p.opacity,n,"mo");r.mergeArray(p.symbol,n,"mx");r.mergeArray(p.color,n,"mc");if(k=p.line)r.mergeArray(k.color,n,"mlc"),r.mergeArrayCastPositive(k.width,n,"mlw");(p=p.gradient)&&"none"!==p.type&&(r.mergeArray(p.type,n,"mgt"),r.mergeArray(p.color,n,"mgc"))}}},{"../../lib":749}],1155:[function(b,D,G){G=b("../../plots/template_attributes").texttemplateAttrs;var r=b("../../plots/template_attributes").hovertemplateAttrs,
n=b("../../components/colorscale/attributes"),p=b("../../plots/font_attributes"),k=b("../../components/drawing/attributes").dash,a=b("../../components/drawing"),e=b("./constants");b=b("../../lib/extend").extendFlat;D.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",
anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:G({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,
editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:r({},{keys:e.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:"linear spline hv vh hvh vhv".split(" "),dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},
dash:b({},k,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:"none tozeroy tozerox tonexty tonextx toself tonext".split(" "),editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:b({symbol:{valType:"enumerated",values:a.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",
min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:b({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},n("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",
values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},n("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",
min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:p({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",
editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorscale/attributes":622,"../../components/drawing":637,"../../components/drawing/attributes":636,"../../lib/extend":739,"../../plots/font_attributes":825,"../../plots/template_attributes":875,"./constants":1159}],1156:[function(b,D,G){function r(q,t,v,w,A,z,y){var B=t._length,C=q._fullLayout;q=v._id;var u=w._id,F=C._firstScatter[k(t)]===t.uid;C=(a(t,C,v,w)||{}).orientation;var H=t.fill;v._minDtick=0;w._minDtick=0;var J=
{padded:!0},I={padded:!0};y&&(J.ppad=I.ppad=y);(y=2>B||A[0]!==A[B-1]||z[0]!==z[B-1])&&("tozerox"===H||"tonextx"===H&&(F||"h"===C))?J.tozero=!0:(t.error_y||{}).visible||"tonexty"!==H&&"tozeroy"!==H&&(c.hasMarkers(t)||c.hasText(t))||(J.padded=!1,J.ppad=0);if(y&&("tozeroy"===H||"tonexty"===H&&(F||"v"===C)))I.tozero=!0;else if("tonextx"===H||"tozerox"===H)I.padded=!1;q&&(t._extremes[q]=l.findExtremes(v,A,J));u&&(t._extremes[u]=l.findExtremes(w,z,I))}function n(q,t){if(c.hasMarkers(q)){var v=q.marker,
w=1.6*(q.marker.sizeref||1);var A="area"===q.marker.sizemode?function(y){return Math.max(Math.sqrt((y||0)/w),3)}:function(y){return Math.max((y||0)/w,3)};if(f.isArrayOrTypedArray(v.size)){v={type:"linear"};l.setConvert(v);q=v.makeCalcdata(q.marker,"size");v=Array(t);for(var z=0;z<t;z++)v[z]=A(q[z]);return v}return A(v.size)}}function p(q,t){var v=k(t);q=q._firstScatter;q[v]||(q[v]=t.uid)}function k(q){var t=q.stackgroup;return q.xaxis+q.yaxis+q.type+(t?"-"+t:"")}function a(q,t,v,w){if(q=q.stackgroup)if(t=
t._scatterStackOpts[v._id+w._id][q],v="v"===t.orientation?w:v,"linear"===v.type||"log"===v.type)return t}var e=b("fast-isnumeric"),f=b("../../lib"),l=b("../../plots/cartesian/axes"),m=b("../../constants/numerical").BADNUM,c=b("./subtypes"),d=b("./colorscale_calc"),g=b("./arrays_to_calcdata"),h=b("./calc_selection");D.exports={calc:function(q,t){var v=q._fullLayout,w=l.getFromId(q,t.xaxis||"x"),A=l.getFromId(q,t.yaxis||"y"),z=w.makeCalcdata(t,"x"),y=A.makeCalcdata(t,"y"),B=t._length,C=Array(B),u=t.ids,
F=a(t,v,w,A),H=!1,J;p(v,t);v="x";var I="y";if(F){f.pushUnique(F.traceIndices,t._expandedIndex);if(J="v"===F.orientation){I="s";var M="x"}else v="s",M="y";var E="interpolate"===F.stackgaps}else{var L=n(t,B);r(q,t,w,A,z,y,L)}for(w=0;w<B;w++){A=C[w]={};L=e(z[w]);var P=e(y[w]);L&&P?(A[v]=z[w],A[I]=y[w]):F&&(J?L:P)?(A[M]=J?z[w]:y[w],A.gap=!0,E?(A.s=m,H=!0):A.s=0):A[v]=A[I]=m;u&&(A.id=String(u[w]))}g(C,t);d(q,t);h(C,t);if(F){for(w=0;w<C.length;)C[w][M]===m?C.splice(w,1):w++;f.sort(C,function(N,Q){return N[M]-
Q[M]||N.i-Q.i});if(H){for(w=0;w<C.length-1&&C[w].gap;)w++;z=C[w].s;z||(z=C[w].s=0);for(q=0;q<w;q++)C[q].s=z;for(t=C.length-1;t>w&&C[t].gap;)t--;z=C[t].s;for(q=C.length-1;q>t;q--)C[q].s=z;for(;w<t;)if(w++,C[w].gap){for(q=w+1;C[q].gap;)q++;z=C[w-1][M];y=C[w-1].s;for(B=(C[q].s-y)/(C[q][M]-z);w<q;)C[w].s=y+(C[w][M]-z)*B,w++}}}return C},calcMarkerSize:n,calcAxisExpansion:r,setFirstScatter:p,getStackOpts:a}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"./arrays_to_calcdata":1154,
"./calc_selection":1157,"./colorscale_calc":1158,"./subtypes":1179,"fast-isnumeric":241}],1157:[function(b,D,G){var r=b("../../lib");D.exports=function(n,p){r.isArrayOrTypedArray(p.selectedpoints)&&r.tagSelected(n,p)}},{"../../lib":749}],1158:[function(b,D,G){var r=b("../../components/colorscale/helpers").hasColorscale,n=b("../../components/colorscale/calc"),p=b("./subtypes");D.exports=function(k,a){p.hasLines(a)&&r(a,"line")&&n(k,a,{vals:a.line.color,containerStr:"line",cLetter:"c"});p.hasMarkers(a)&&
(r(a,"marker")&&n(k,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),r(a,"marker.line")&&n(k,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":623,"../../components/colorscale/helpers":626,"./subtypes":1179}],1159:[function(b,D,G){D.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],1160:[function(b,D,G){function r(p,k,a,e,f,l,m){f[e]=!0;e={i:null,gap:!0,s:0};e[m]=a;p.splice(k,0,
e);k&&a===p[k-1][m]?(a=p[k-1],e.s=a.s,e.i=a.i,e.gap=a.gap):l&&(l=p[k-1],a=(f=p[k+1])?l?l.s+(f.s-l.s)*(a-l[m])/(f[m]-l[m]):f.s:l.s,e.s=a);k||(p[0].t=p[1].t,p[0].trace=p[1].trace,delete p[1].t,delete p[1].trace)}var n=b("./calc");D.exports=function(p,k){var a=k.xaxis;k=k.yaxis;var e=p._fullLayout._scatterStackOpts[a._id+k._id];if(e){var f=p.calcdata,l,m,c,d,g,h;for(h in e){var q=e[h];var t=q.traceIndices;if(t.length){var v="interpolate"===q.stackgaps;var w=q.groupnorm;if("v"===q.orientation){var A=
"x";var z="y"}else A="y",z="x";var y=Array(t.length);for(l=0;l<y.length;l++)y[l]=!1;var B=f[t[0]];var C=Array(B.length);for(l=0;l<B.length;l++)C[l]=B[l][A];for(l=1;l<t.length;l++){var u=f[t[l]];for(m=c=0;m<u.length;m++){for(g=u[m][A];g>C[c]&&c<C.length;c++)r(u,m,C[c],l,y,v,A),m++;if(g!==C[c]){for(d=0;d<l;d++)r(f[t[d]],c,g,d,y,v,A);C.splice(c,0,g)}c++}for(;c<C.length;c++)r(u,m,C[c],l,y,v,A),m++}c=C.length;for(m=0;m<B.length;m++){d=B[m][z]=B[m].s;for(l=1;l<t.length;l++)u=f[t[l]],u[0].trace._rawLength=
u[0].trace._length,u[0].trace._length=c,d+=u[m].s,u[m][z]=d;if(w)for(u=("fraction"===w?d:d/100)||1,l=0;l<t.length;l++)d=f[t[l]][m],d[z]/=u,d.sNorm=d.s/u}for(l=0;l<t.length;l++){u=f[t[l]];B=u[0].trace;w=n.calcMarkerSize(B,B._rawLength);z=Array.isArray(w);if(w&&y[l]||z)for(d=w,w=Array(c),m=0;m<c;m++)w[m]=u[m].gap?0:z?d[u[m].i]:d;z=Array(c);d=Array(c);for(m=0;m<c;m++)z[m]=u[m].x,d[m]=u[m].y;n.calcAxisExpansion(p,B,a,k,z,d,w);u[0].t.orientation=q.orientation}}}}}},{"./calc":1156}],1161:[function(b,D,
G){D.exports=function(r){for(var n=0;n<r.length;n++){var p=r[n];if("scatter"===p.type){var k=p.fill;if("none"!==k&&"toself"!==k&&(p.opacity=void 0,"tonexty"===k||"tonextx"===k))for(k=n-1;0<=k;k--){var a=r[k];if("scatter"===a.type&&a.xaxis===p.xaxis&&a.yaxis===p.yaxis){a.opacity=void 0;break}}}}}},{}],1162:[function(b,D,G){var r=b("../../lib"),n=b("../../registry"),p=b("./attributes"),k=b("./constants"),a=b("./subtypes"),e=b("./xy_defaults"),f=b("./stack_defaults"),l=b("./marker_defaults"),m=b("./line_defaults"),
c=b("./line_shape_defaults"),d=b("./text_defaults"),g=b("./fillcolor_defaults");D.exports=function(h,q,t,v){function w(y,B){return r.coerce(h,q,p,y,B)}var A=e(h,q,v,w);A||(q.visible=!1);if(q.visible){var z=f(h,q,v,w);A=!z&&A<k.PTS_LINESONLY?"lines+markers":"lines";w("text");w("hovertext");w("mode",A);a.hasLines(q)&&(m(h,q,t,v,w),c(h,q,w),w("connectgaps"),w("line.simplify"));a.hasMarkers(q)&&l(h,q,t,v,w,{gradient:!0});a.hasText(q)&&(w("texttemplate"),d(h,q,v,w));v=[];if(a.hasMarkers(q)||a.hasText(q))w("cliponaxis"),
w("marker.maxdisplayed"),v.push("points");w("fill",z?z.fillDflt:"none");"none"!==q.fill&&(g(h,q,t,w),a.hasLines(q)||c(h,q,w));z=(q.line||{}).color;A=(q.marker||{}).color;"tonext"!==q.fill&&"toself"!==q.fill||v.push("fills");w("hoveron",v.join("+")||"points");"fills"!==q.hoveron&&w("hovertemplate");v=n.getComponentMethod("errorbars","supplyDefaults");v(h,q,z||A||t,{axis:"y"});v(h,q,z||A||t,{axis:"x",inherit:"y"});r.coerceSelectionMarkerOpacity(q,w)}}},{"../../lib":749,"../../registry":880,"./attributes":1155,
"./constants":1159,"./fillcolor_defaults":1163,"./line_defaults":1168,"./line_shape_defaults":1170,"./marker_defaults":1174,"./stack_defaults":1177,"./subtypes":1179,"./text_defaults":1180,"./xy_defaults":1181}],1163:[function(b,D,G){var r=b("../../components/color"),n=b("../../lib").isArrayOrTypedArray;D.exports=function(p,k,a,e){p=!1;if(k.marker){var f=k.marker.color,l=(k.marker.line||{}).color;f&&!n(f)?p=f:l&&!n(l)&&(p=l)}e("fillcolor",r.addOpacity((k.line||{}).color||p||a,.5))}},{"../../components/color":615,
"../../lib":749}],1164:[function(b,D,G){var r=b("../../plots/cartesian/axes");D.exports=function(n,p,k){var a={},e={_fullLayout:k};k=r.getFromTrace(e,p,"x");p=r.getFromTrace(e,p,"y");a.xLabel=r.tickText(k,n.x,!0).text;a.yLabel=r.tickText(p,n.y,!0).text;return a}},{"../../plots/cartesian/axes":797}],1165:[function(b,D,G){var r=b("../../components/color"),n=b("./subtypes");D.exports=function(p,k){if("lines"===p.mode)return(k=p.line.color)&&r.opacity(k)?k:p.fillcolor;if("none"===p.mode)return p.fill?
p.fillcolor:"";var a=k.mcc||(p.marker||{}).color,e=k.mlcc||((p.marker||{}).line||{}).color;return(k=a&&r.opacity(a)?a:e&&r.opacity(e)&&(k.mlw||((p.marker||{}).line||{}).width)?e:"")?.3>r.opacity(k)?r.addOpacity(k,.3):k:(k=(p.line||{}).color)&&r.opacity(k)&&n.hasLines(p)&&p.line.width?k:p.fillcolor}},{"../../components/color":615,"./subtypes":1179}],1166:[function(b,D,G){var r=b("../../lib"),n=b("../../components/fx"),p=b("../../registry"),k=b("./get_trace_color"),a=b("../../components/color"),e=r.fillText;
D.exports=function(f,l,m,c){var d=f.cd,g=d[0].trace,h=f.xa,q=f.ya,t=h.c2p(l),v=q.c2p(m),w=[t,v];m=g.hoveron||"";var A=-1!==g.mode.indexOf("markers")?3:.5;if(-1!==m.indexOf("points")&&(l=function(H){var J=Math.max(A,H.mrc||0),I=h.c2p(H.x)-t;H=q.c2p(H.y)-v;return Math.max(Math.sqrt(I*I+H*H)-J,1-A/J)},c=n.getDistanceFunction(c,function(H){var J=Math.max(3,H.mrc||0),I=1-1/J;H=Math.abs(h.c2p(H.x)-t);return H<J?I*H/J:H-J+I},function(H){var J=Math.max(3,H.mrc||0),I=1-1/J;H=Math.abs(q.c2p(H.y)-v);return H<
J?I*H/J:H-J+I},l),n.getClosest(d,c,f),!1!==f.index)){c=d[f.index];m=h.c2p(c.x,!0);w=q.c2p(c.y,!0);var z=c.mrc||1;f.index=c.i;var y=d[0].t.orientation,B=y&&(c.sNorm||c.s);d="h"===y?B:c.x;y="v"===y?B:c.y;r.extendFlat(f,{color:k(g,c),x0:m-z,x1:m+z,xLabelVal:d,y0:w-z,y1:w+z,yLabelVal:y,spikeDistance:l(c),hovertemplate:g.hovertemplate});e(c,g,f);p.getComponentMethod("errorbars","hoverInfo")(c,g,f);return[f]}if(-1!==m.indexOf("fills")&&g._polygons){z=g._polygons;c=[];y=!1;l=Infinity;d=-Infinity;B=Infinity;
var C=-Infinity;for(m=0;m<z.length;m++){var u=z[m];u.contains(w)&&(y=!y,c.push(u),B=Math.min(B,u.ymin),C=Math.max(C,u.ymax))}if(y){B=Math.max(B,0);C=Math.min(C,q._length);w=(B+C)/2;for(m=0;m<c.length;m++)for(y=c[m].pts,z=1;z<y.length;z++){u=y[z-1][1];var F=y[z][1];u>w!==F>=w&&(B=y[z-1][0],C=y[z][0],F-u&&(B+=(C-B)*(w-u)/(F-u),l=Math.min(l,B),d=Math.max(d,B)))}l=Math.max(l,0);d=Math.min(d,h._length);c=a.defaultLine;a.opacity(g.fillcolor)?c=g.fillcolor:a.opacity((g.line||{}).color)&&(c=g.line.color);
r.extendFlat(f,{distance:f.maxHoverDistance,x0:l,x1:d,y0:w,y1:w,color:c,hovertemplate:!1});delete f.index;g.text&&!Array.isArray(g.text)?f.text=String(g.text):f.text=g.name;return[f]}}}},{"../../components/color":615,"../../components/fx":655,"../../lib":749,"../../registry":880,"./get_trace_color":1165}],1167:[function(b,D,G){G=b("./subtypes");D.exports={hasLines:G.hasLines,hasMarkers:G.hasMarkers,hasText:G.hasText,isBubble:G.isBubble,attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),
calc:b("./calc").calc,crossTraceCalc:b("./cross_trace_calc"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot"),colorbar:b("./marker_colorbar"),formatLabels:b("./format_labels"),style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols errorBarsOK showLegend scatter-like zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,
"./arrays_to_calcdata":1154,"./attributes":1155,"./calc":1156,"./cross_trace_calc":1160,"./cross_trace_defaults":1161,"./defaults":1162,"./format_labels":1164,"./hover":1166,"./marker_colorbar":1173,"./plot":1175,"./select":1176,"./style":1178,"./subtypes":1179}],1168:[function(b,D,G){var r=b("../../lib").isArrayOrTypedArray,n=b("../../components/colorscale/helpers").hasColorscale,p=b("../../components/colorscale/defaults");D.exports=function(k,a,e,f,l,m){var c=(k.marker||{}).color;l("line.color",
e);n(k,"line")?p(k,a,f,l,{prefix:"line.",cLetter:"c"}):(k=(r(c)?!1:c)||e,l("line.color",k));l("line.width");(m||{}).noDash||l("line.dash")}},{"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"../../lib":749}],1169:[function(b,D,G){G=b("../../constants/numerical");var r=G.BADNUM;G=G.LOG_CLIP;var n=G+.5,p=G-.5,k=b("../../lib"),a=k.segmentsIntersect,e=k.constrain,f=b("./constants");D.exports=function(l,m){function c(Ta){Ta=l[Ta];if(!Ta)return!1;var hb=m.linearized?
C.l2p(Ta.x):C.c2p(Ta.x),Ya=m.linearized?u.l2p(Ta.y):u.c2p(Ta.y);if(hb===r){F&&(hb=C.c2p(Ta.x,!0));if(hb===r)return!1;H&&Ya===r&&(hb*=Math.abs(C._m*I*(0<C._m?n:p)/(u._m*J*(0<u._m?n:p))));hb*=1E3}if(Ya===r){H&&(Ya=u.c2p(Ta.y,!0));if(Ya===r)return!1;Ya*=1E3}return[hb,Ya]}function d(Ta,hb,Ya,Ga){Ya-=Ta;Ga-=hb;Ta=.5-Ta;var Pa=.5-hb;hb=Ya*Ya+Ga*Ga;var Va=Ya*Ta+Ga*Pa;if(0<Va&&Va<hb&&(Ya=Ta*Ga-Pa*Ya,Ya*Ya<hb))return!0}function g(Ta,hb){var Ya=Ta[0]/J;Ta=Ta[1]/I;var Ga=Math.max(0,-Ya,Ya-1,-Ta,Ta-1);Ga&&void 0!==
ea&&d(Ya,Ta,ea,ca)&&(Ga=0);Ga&&hb&&d(Ya,Ta,hb[0]/J,hb[1]/I)&&(Ga=0);return(1+f.toleranceGrowth*Ga)*E}function h(Ta,hb){var Ya=Ta[0]-hb[0];Ta=Ta[1]-hb[1];return Math.sqrt(Ya*Ya+Ta*Ta)}function q(Ta,hb){for(var Ya=[],Ga=0,Pa=0;4>Pa;Pa++){var Va=ja[Pa];(Va=a(Ta[0],Ta[1],hb[0],hb[1],Va[0],Va[1],Va[2],Va[3]))&&(!Ga||1<Math.abs(Va.x-Ya[0][0])||1<Math.abs(Va.y-Ya[0][1]))&&(Va=[Va.x,Va.y],Ga&&h(Va,Ta)<h(Ya[0],Ta)?Ya.unshift(Va):Ya.push(Va),Ga++)}return Ya}function t(Ta){if(Ta[0]<ka||Ta[0]>qa||Ta[1]<pa||Ta[1]>
oa)return[e(Ta[0],ka,qa),e(Ta[1],pa,oa)]}function v(Ta,hb){if(Ta[0]===hb[0]&&(Ta[0]===ka||Ta[0]===qa)||Ta[1]===hb[1]&&(Ta[1]===pa||Ta[1]===oa))return!0}function w(Ta,hb){var Ya=[];Ta=t(Ta);hb=t(hb);if(Ta&&hb&&v(Ta,hb))return Ya;Ta&&Ya.push(Ta);hb&&Ya.push(hb);return Ya}function A(Ta,hb,Ya){return function(Ga,Pa){var Va=t(Ga),va=t(Pa),Ea=[];if(Va&&va&&v(Va,va))return Ea;Va&&Ea.push(Va);va&&Ea.push(va);if(Ga=2*k.constrain((Ga[Ta]+Pa[Ta])/2,hb,Ya)-((Va||Ga)[Ta]+(va||Pa)[Ta]))Va=Va&&va?0<Ga===Va[Ta]>
va[Ta]?Va:va:Va||va,Va[Ta]+=Ga;return Ea}}function z(Ta){var hb=Ta[0],Ya=Ta[1],Ga=hb===V[Z-1][0],Pa=Ya===V[Z-1][1];if(!Ga||!Pa)if(1<Z){var Va=hb===V[Z-2][0],va=Ya===V[Z-2][1];Ga&&(hb===ka||hb===qa)&&Va?va?Z--:V[Z-1]=Ta:Pa&&(Ya===pa||Ya===oa)&&va?Va?Z--:V[Z-1]=Ta:V[Z++]=Ta}else V[Z++]=Ta}function y(Ta){V[Z-1][0]!==Ta[0]&&V[Z-1][1]!==Ta[1]&&z([la,ua]);z(Ta);Ca=null;la=ua=0}function B(Ta){ea=Ta[0]/J;ca=Ta[1]/I;ra=Ta[0]<ka?ka:Ta[0]>qa?qa:0;ha=Ta[1]<pa?pa:Ta[1]>oa?oa:0;if(ra||ha){if(Z)if(Ca){var hb=wa(Ca,
Ta);1<hb.length&&(y(hb[0]),V[Z++]=hb[1])}else na=wa(V[Z-1],Ta)[0],V[Z++]=na;else V[Z++]=[ra||Ta[0],ha||Ta[1]];hb=V[Z-1];if(ra&&ha&&(hb[0]!==ra||hb[1]!==ha)){if(Ca)if(la!==ra&&ua!==ha)if(la&&ua){hb=Ta[0]-Ca[0];var Ya=(Ta[1]-Ca[1])/hb;hb=0<(Ca[1]*Ta[0]-Ta[1]*Ca[0])/hb?[0<Ya?ka:qa,oa]:[0<Ya?qa:ka,pa];z(hb)}else z([la||ra,ua||ha]);else la&&ua&&z([la,ua]);z([ra,ha])}else la-ra&&ua-ha&&z([ra||la,ha||ua]);Ca=Ta;la=ra;ua=ha}else Ca&&y(wa(Ca,Ta)[0]),V[Z++]=Ta}var C=m.xaxis,u=m.yaxis,F="log"===C.type,H="log"===
u.type,J=C._length,I=u._length,M=m.connectGaps,E=m.baseTolerance,L=m.shape,P="linear"===L,N=m.fill&&"none"!==m.fill,Q=[],O=f.minTolerance,T=l.length,V=Array(T),Z=0,aa,Y,ea,ca;var ba=f.maxScreensAway;var ka=-J*ba,qa=J*(1+ba),pa=-I*ba,oa=I*(1+ba),ja=[[ka,pa,qa,pa],[qa,pa,qa,oa],[qa,oa,ka,oa],[ka,oa,ka,pa]],ra,ha,la,ua,na,wa;"linear"===L||"spline"===L?wa=q:"hv"===L||"vh"===L?wa=w:"hvh"===L?wa=A(0,ka,qa):"vhv"===L&&(wa=A(1,pa,oa));for(L=0;L<T;L++)if(ba=c(L)){Z=0;var Ca=null;B(ba);for(L++;L<T;L++){var Fa=
c(L);if(!Fa)if(M)continue;else break;if(P&&m.simplify){var Xa=c(L+1);var ab=h(Fa,ba);if(N&&(0===Z||Z===T-1)||!(ab<g(Fa,Xa)*O)){var gb=[(Fa[0]-ba[0])/ab,(Fa[1]-ba[1])/ab];var bb=ba;var La=ab;var kb=aa=Y=0;var mb=!1;ab=Fa;for(L++;L<l.length;L++){var ya=Xa;Xa=c(L+1);if(!ya)if(M)continue;else break;var Ia=[ya[0]-ba[0],ya[1]-ba[1]];var Na=Ia[0]*gb[1]-Ia[1]*gb[0];aa=Math.min(aa,Na);Y=Math.max(Y,Na);if(Y-aa>g(ya,Xa))break;ab=ya;Ia=Ia[0]*gb[0]+Ia[1]*gb[1];Ia>La?(La=Ia,Fa=ya,mb=!1):Ia<kb&&(kb=Ia,bb=ya,mb=
!0)}mb?(B(Fa),ab!==bb&&B(bb)):(bb!==ba&&B(bb),ab!==Fa&&B(Fa));B(ab);if(L>=l.length||!ya)break;B(ya);ba=ya}}else B(Fa)}Ca&&z([la||Ca[0],ua||Ca[1]]);Q.push(V.slice(0,Z))}return Q}},{"../../constants/numerical":724,"../../lib":749,"./constants":1159}],1170:[function(b,D,G){D.exports=function(r,n,p){"spline"===p("line.shape")&&p("line.smoothing")}},{}],1171:[function(b,D,G){var r={tonextx:1,tonexty:1,tonext:1};D.exports=function(n,p,k){var a,e={};var f=!1;var l=-1,m=0,c=-1;for(p=0;p<k.length;p++)n=k[p][0].trace,
(a=n.stackgroup||"")?a in e?a=e[a]:(a=e[a]=m,m++):n.fill in r&&0<=c?a=c:(a=c=m,m++),a<l&&(f=!0),n._groupIndex=l=a;k=k.slice();f&&k.sort(function(d,g){d=d[0].trace;g=g[0].trace;return d._groupIndex-g._groupIndex||d.index-g.index});e={};for(p=0;p<k.length;p++)n=k[p][0].trace,a=n.stackgroup||"",!0===n.visible?(n._nexttrace=null,n.fill in r&&(f=e[a],n._prevtrace=f||null,f&&(f._nexttrace=n)),n._ownfill=n.fill&&("tozero"===n.fill.substr(0,6)||"toself"===n.fill||"to"===n.fill.substr(0,2)&&!n._prevtrace),
e[a]=n):n._prevtrace=n._nexttrace=n._ownfill=null;return k}},{}],1172:[function(b,D,G){var r=b("fast-isnumeric");D.exports=function(n){n=n.marker;var p=n.sizeref||1,k=n.sizemin||0,a="area"===n.sizemode?function(e){return Math.sqrt(e/p)}:function(e){return e/p};return function(e){e=a(e/2);return r(e)&&0<e?Math.max(e,k):0}}},{"fast-isnumeric":241}],1173:[function(b,D,G){D.exports={container:"marker",min:"cmin",max:"cmax"}},{}],1174:[function(b,D,G){var r=b("../../components/color"),n=b("../../components/colorscale/helpers").hasColorscale,
p=b("../../components/colorscale/defaults"),k=b("./subtypes");D.exports=function(a,e,f,l,m,c){var d=k.isBubble(a),g=(a.line||{}).color;c=c||{};g&&(f=g);m("marker.symbol");m("marker.opacity",d?.7:1);m("marker.size");m("marker.color",f);n(a,"marker")&&p(a,e,l,m,{prefix:"marker.",cLetter:"c"});c.noSelect||(m("selected.marker.color"),m("unselected.marker.color"),m("selected.marker.size"),m("unselected.marker.size"));c.noLine||(f=g&&!Array.isArray(g)&&e.marker.color!==g?g:d?r.background:r.defaultLine,
m("marker.line.color",f),n(a,"marker.line")&&p(a,e,l,m,{prefix:"marker.line.",cLetter:"c"}),m("marker.line.width",d?1:0));d&&(m("marker.sizeref"),m("marker.sizemin"),m("marker.sizemode"));c.gradient&&"none"!==m("marker.gradient.type")&&m("marker.gradient.color")}},{"../../components/color":615,"../../components/colorscale/defaults":625,"../../components/colorscale/helpers":626,"./subtypes":1179}],1175:[function(b,D,G){function r(q,t,v){t.each(function(w){var A=f(k.select(this),"g","fills");m.setClipUrl(A,
v.layerClipId,q);var z=w[0].trace;w=[];z._ownfill&&w.push("_ownFill");z._nexttrace&&w.push("_nextFill");A=A.selectAll("g").data(w,l);A.enter().append("g");A.exit().each(function(y){z[y]=null}).remove();A.order().each(function(y){z[y]=f(k.select(this),"path","js-fill")})})}function n(q,t,v,w,A,z,y){function B(ha){return M?ha.transition():ha}function C(ha){B(ha).attr("d","M0,0Z")}function u(ha){return ha.filter(function(la){return!la.gap&&la.vis})}function F(ha){return ha.filter(function(la){return la.vis})}
function H(ha){return ha.filter(function(la){return!la.gap})}function J(ha){return ha.id}function I(){return!1}p(q,t,v,w,A);var M=!!y&&0<y.duration,E=v.xaxis,L=v.yaxis,P=w[0].trace,N=P.line,Q=k.select(z),O=f(Q,"g","errorbars");z=f(Q,"g","lines");t=f(Q,"g","points");A=f(Q,"g","text");a.getComponentMethod("errorbars","plot")(q,O,v,y);if(!0===P.visible){B(Q).style("opacity",P.opacity);var T=P.fill.charAt(P.fill.length-1);"x"!==T&&"y"!==T&&(T="");w[0][v.isRangePlot?"nodeRangePlot3":"node3"]=Q;y="";Q=
[];if(O=P._prevtrace){y=O._prevRevpath||"";var V=O._nextFill;Q=O._polygons}var Z,aa,Y="",ea="",ca=[];var ba=e.noop;O=P._ownFill;if(c.hasLines(P)||"none"!==P.fill){V&&V.datum(w);if(-1!==["hv","vh","hvh","vhv"].indexOf(N.shape)){var ka=m.steps(N.shape);var qa=m.steps(N.shape.split("").reverse().join(""))}else ka="spline"===N.shape?qa=function(ha){var la=ha[ha.length-1];return 1<ha.length&&ha[0][0]===la[0]&&ha[0][1]===la[1]?m.smoothclosed(ha.slice(1),N.smoothing):m.smoothopen(ha,N.smoothing)}:qa=function(ha){return"M"+
ha.join("L")};var pa=function(ha){return qa(ha.reverse())};ca=d(w,{xaxis:E,yaxis:L,connectGaps:P.connectgaps,baseTolerance:Math.max(N.width||1,3)/4,shape:N.shape,simplify:N.simplify,fill:P.fill});var oa=P._polygons=Array(ca.length);for(ba=0;ba<ca.length;ba++)P._polygons[ba]=h(ca[ba]);if(ca.length){var ja=ca[0][0];var ra=ca[ca.length-1];ra=ra[ra.length-1]}ba=function(ha){return function(la){Z=ka(la);aa=pa(la);Y?T?(Y+="L"+Z.substr(1),ea=aa+("L"+ea.substr(1))):(Y+="Z"+Z,ea=aa+"Z"+ea):(Y=Z,ea=aa);c.hasLines(P)&&
1<la.length&&(la=k.select(this),la.datum(w),ha?B(la.style("opacity",0).attr("d",Z).call(m.lineGroupStyle)).style("opacity",1):(la=B(la),la.attr("d",Z),m.singleLineStyle(w,la)))}}}z=z.selectAll(".js-line").data(ca);B(z.exit()).style("opacity",0).remove();z.each(ba(!1));z.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(m.lineGroupStyle).each(ba(!0));m.setClipUrl(z,v.layerClipId,q);ca.length?(O?(O.datum(w),ja&&ra&&(T?("y"===T?ja[1]=ra[1]=L.c2p(0,!0):"x"===
T&&(ja[0]=ra[0]=E.c2p(0,!0)),B(O).attr("d","M"+ra+"L"+ja+"L"+Y.substr(1)).call(m.singleFillStyle)):B(O).attr("d",Y+"Z").call(m.singleFillStyle))):V&&("tonext"===P.fill.substr(0,6)&&Y&&y?("tonext"===P.fill?B(V).attr("d",Y+"Z"+y+"Z").call(m.singleFillStyle):B(V).attr("d",Y+"L"+y.substr(1)+"Z").call(m.singleFillStyle),P._polygons=P._polygons.concat(Q)):(C(V),P._polygons=null)),P._prevRevpath=ea,P._prevPolygons=oa):(O?C(O):V&&C(V),P._polygons=P._prevRevpath=P._prevPolygons=null);t.datum(w);A.datum(w);
(function(ha,la,ua){var na,wa=ua[0].trace;ua=c.hasMarkers(wa);var Ca=c.hasText(wa);var Fa=wa.ids?J:void 0;var Xa=I,ab=I;if(ua||Ca){var gb=l,bb=wa.stackgroup,La=bb&&"infer zero"===q._fullLayout._scatterStackOpts[E._id+L._id][bb].stackgaps;wa.marker.maxdisplayed||wa._needsCull?gb=La?F:u:bb&&!La&&(gb=H);ua&&(Xa=gb);Ca&&(ab=gb)}ha=ha.selectAll("path.point");ha=ha.data(Xa,Fa);Xa=ha.enter().append("path").classed("point",!0);M&&Xa.call(m.pointStyle,wa,q).call(m.translatePoints,E,L).style("opacity",0).transition().style("opacity",
1);ha.order();var kb;ua&&(kb=m.makePointStyleFns(wa));ha.each(function(mb){var ya=k.select(this),Ia=B(ya);(na=m.translatePoint(mb,Ia,E,L))?(m.singlePointStyle(mb,Ia,wa,kb,q),v.layerClipId&&m.hideOutsideRangePoint(mb,Ia,E,L,wa.xcalendar,wa.ycalendar),wa.customdata&&ya.classed("plotly-customdata",null!==mb.data&&void 0!==mb.data)):Ia.remove()});M?ha.exit().transition().style("opacity",0).remove():ha.exit().remove();ha=la.selectAll("g");ha=ha.data(ab,Fa);ha.enter().append("g").classed("textpoint",!0).append("text");
ha.order();ha.each(function(mb){var ya=k.select(this),Ia=B(ya.select("text"));(na=m.translatePoint(mb,Ia,E,L))?v.layerClipId&&m.hideOutsideRangePoint(mb,ya,E,L,wa.xcalendar,wa.ycalendar):ya.remove()});ha.selectAll("text").call(m.textPointStyle,wa,q).each(function(mb){var ya=E.c2p(mb.x),Ia=L.c2p(mb.y);k.select(this).selectAll("tspan.line").each(function(){B(k.select(this)).attr({x:ya,y:Ia})})});ha.exit().remove()})(t,A,w);V=!1===P.cliponaxis?null:v.layerClipId;m.setClipUrl(t,V,q);m.setClipUrl(A,V,
q)}}function p(q,t,v,w,A){q=v.xaxis;v=v.yaxis;var z=k.extent(e.simpleMap(q.range,q.r2c)),y=k.extent(e.simpleMap(v.range,v.r2c));v=w[0].trace;if(c.hasMarkers(v)&&(v=v.marker.maxdisplayed,0!==v)){q=w.filter(function(F){return F.x>=z[0]&&F.x<=z[1]&&F.y>=y[0]&&F.y<=y[1]});var B=Math.ceil(q.length/v),C=0;A.forEach(function(F,H){F=F[0].trace;c.hasMarkers(F)&&0<F.marker.maxdisplayed&&H<t&&C++});var u=Math.round(C*B/3+Math.floor(C/3)*B/7.1);w.forEach(function(F){delete F.vis});q.forEach(function(F,H){0===
Math.round((H+u)%B)&&(F.vis=!0)})}}var k=b("d3"),a=b("../../registry"),e=b("../../lib"),f=e.ensureSingle,l=e.identity,m=b("../../components/drawing"),c=b("./subtypes"),d=b("./line_points"),g=b("./link_traces"),h=b("../../lib/polygon").tester;D.exports=function(q,t,v,w,A,z){var y,B=!A,C=!!A&&0<A.duration,u=g(q,t,v);v=w.selectAll("g.trace").data(u,function(F){return F[0].trace.uid});v.enter().append("g").attr("class",function(F){return"trace scatter trace"+F[0].trace.uid}).style("stroke-miterlimit",
2);v.order();r(q,v,t);C?(z&&(y=z()),k.transition().duration(A.duration).ease(A.easing).each("end",function(){y&&y()}).each("interrupt",function(){y&&y()}).each(function(){w.selectAll("g.trace").each(function(F,H){n(q,H,t,F,u,this,A)})})):v.each(function(F,H){n(q,H,t,F,u,this,A)});B&&v.exit().remove();w.selectAll("path:not([d])").remove()}},{"../../components/drawing":637,"../../lib":749,"../../lib/polygon":761,"../../registry":880,"./line_points":1169,"./link_traces":1171,"./subtypes":1179,d3:169}],
1176:[function(b,D,G){var r=b("./subtypes");D.exports=function(n,p){var k=n.cd,a=n.xaxis,e=n.yaxis,f=[],l=k[0].trace;if(!r.hasMarkers(l)&&!r.hasText(l))return[];if(!1===p)for(l=0;l<k.length;l++)k[l].selected=0;else for(l=0;l<k.length;l++){var m=k[l];var c=a.c2p(m.x);var d=e.c2p(m.y);null!==m.i&&p.contains([c,d],!1,l,n)?(f.push({pointNumber:m.i,x:a.c2d(m.x),y:e.c2d(m.y)}),m.selected=1):m.selected=0}return f}},{"./subtypes":1179}],1177:[function(b,D,G){var r=["orientation","groupnorm","stackgaps"];
D.exports=function(n,p,k,a){k=k._scatterStackOpts;var e=a("stackgroup");if(e){var f=p.xaxis+p.yaxis,l=k[f];l||(l=k[f]={});k=l[e];f=!1;k?k.traces.push(p):(k=l[e]={traceIndices:[],traces:[p]},f=!0);p={orientation:p.x&&!p.y?"h":"v"};for(e=0;e<r.length;e++){l=r[e];var m=l+"Found";if(!k[m]){var c=void 0!==n[l],d="orientation"===l;if(c||f)if(k[l]=a(l,p[l]),d&&(k.fillDflt="h"===k[l]?"tonextx":"tonexty"),c&&(k[m]=!0,!f&&(delete k.traces[0][l],d)))for(l=0;l<k.traces.length-1;l++)m=k.traces[l],m._input.fill!==
m.fill&&(m.fill=k.fillDflt)}}return k}}},{}],1178:[function(b,D,G){function r(e,f,l){k.pointStyle(e.selectAll("path.point"),f,l)}function n(e,f,l){k.textPointStyle(e.selectAll("text"),f,l)}var p=b("d3"),k=b("../../components/drawing"),a=b("../../registry");D.exports={style:function(e){var f=p.select(e).selectAll("g.trace.scatter");f.style("opacity",function(l){return l[0].trace.opacity});f.selectAll("g.points").each(function(l){var m=p.select(this);r(m,l.trace||l[0].trace,e)});f.selectAll("g.text").each(function(l){var m=
p.select(this);n(m,l.trace||l[0].trace,e)});f.selectAll("g.trace path.js-line").call(k.lineGroupStyle);f.selectAll("g.trace path.js-fill").call(k.fillGroupStyle);a.getComponentMethod("errorbars","style")(f)},stylePoints:r,styleText:n,styleOnSelect:function(e,f,l){f=f[0].trace;f.selectedpoints?(k.selectedPointStyle(l.selectAll("path.point"),f),k.selectedTextStyle(l.selectAll("text"),f)):(r(l,f,e),n(l,f,e))}}},{"../../components/drawing":637,"../../registry":880,d3:169}],1179:[function(b,D,G){var r=
b("../../lib");D.exports={hasLines:function(n){return n.visible&&n.mode&&-1!==n.mode.indexOf("lines")},hasMarkers:function(n){return n.visible&&(n.mode&&-1!==n.mode.indexOf("markers")||"splom"===n.type)},hasText:function(n){return n.visible&&n.mode&&-1!==n.mode.indexOf("text")},isBubble:function(n){return r.isPlainObject(n.marker)&&r.isArrayOrTypedArray(n.marker.size)}}},{"../../lib":749}],1180:[function(b,D,G){var r=b("../../lib");D.exports=function(n,p,k,a,e){e=e||{};a("textposition");r.coerceFont(a,
"textfont",k.font);e.noSelect||(a("selected.textfont.color"),a("unselected.textfont.color"))}},{"../../lib":749}],1181:[function(b,D,G){var r=b("../../lib"),n=b("../../registry");D.exports=function(p,k,a,e){var f=e("x"),l=e("y");n.getComponentMethod("calendars","handleTraceDefaults")(p,k,["x","y"],a);if(f)p=r.minRowLength(f),l?l=Math.min(p,r.minRowLength(l)):(l=p,e("y0"),e("dy"));else{if(!l)return 0;l=r.minRowLength(l);e("x0");e("dx")}return k._length=l}},{"../../lib":749,"../../registry":880}],1182:[function(b,
D,G){function r(d){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}G=b("../scatter/attributes");var n=b("../../components/colorscale/attributes"),p=b("../../plots/template_attributes").hovertemplateAttrs,k=b("../../plots/template_attributes").texttemplateAttrs,a=b("../../plots/attributes"),e=b("../../constants/gl3d_dashes"),f=b("../../constants/gl3d_markers"),l=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;
var m=G.marker,c=m.line;e=l({width:G.line.width,dash:{valType:"enumerated",values:Object.keys(e),dflt:"solid"}},n("line"));D=D.exports=b({x:G.x,y:G.y,z:{valType:"data_array"},text:l({},G.text,{}),texttemplate:k({},{}),hovertext:l({},G.hovertext,{}),hovertemplate:p(),mode:l({},G.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:r("x"),y:r("y"),z:r("z")},connectgaps:G.connectgaps,line:e,marker:l({symbol:{valType:"enumerated",
values:Object.keys(f),dflt:"circle",arrayOk:!0},size:l({},m.size,{dflt:8}),sizeref:m.sizeref,sizemin:m.sizemin,sizemode:m.sizemode,opacity:l({},m.opacity,{arrayOk:!1}),colorbar:m.colorbar,line:l({width:l({},c.width,{arrayOk:!1})},n("marker.line"))},n("marker")),textposition:l({},G.textposition,{dflt:"top center"}),textfont:{color:G.textfont.color,size:G.textfont.size,family:l({},G.textfont.family,{arrayOk:!1})},hoverinfo:l({},a.hoverinfo)},"calc","nested");D.x.editType=D.y.editType=D.z.editType="calc+clearAxisTypes"},
{"../../components/colorscale/attributes":622,"../../constants/gl3d_dashes":721,"../../constants/gl3d_markers":722,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1183:[function(b,D,G){var r=b("../scatter/arrays_to_calcdata"),n=b("../scatter/colorscale_calc");D.exports=function(p,k){var a=[{x:!1,y:!1,trace:k,t:{}}];r(a,k);n(p,k);return a}},{"../scatter/arrays_to_calcdata":1154,"../scatter/colorscale_calc":1158}],
1184:[function(b,D,G){function r(p,k,a,e){if(!k||!k.visible)return null;k=n.getComponentMethod("errorbars","makeComputeError")(k);for(var f=Array(p.length),l=0;l<p.length;l++){var m=k(+p[l],l);if("log"===e.type){var c=e.c2l(p[l]),d=p[l]-m[0];m=p[l]+m[1];f[l]=[(e.c2l(d,!0)-c)*a,(e.c2l(m,!0)-c)*a];0<d&&(c=e.c2l(d),e._lowerLogErrorBound||(e._lowerLogErrorBound=c),e._lowerErrorBound=Math.min(e._lowerLogErrorBound,c))}else f[l]=[-m[0]*a,m[1]*a]}return f}var n=b("../../registry");D.exports=function(p,k,
a){p=[r(p.x,p.error_x,k[0],a.xaxis),r(p.y,p.error_y,k[1],a.yaxis),r(p.z,p.error_z,k[2],a.zaxis)];a:{for(k=0;k<p.length;k++)if(p[k]){k=p[k].length;break a}k=0}if(0===k)return null;a=Array(k);for(var e=0;e<k;e++){for(var f=[[0,0,0],[0,0,0]],l=0;3>l;l++)if(p[l])for(var m=0;2>m;m++)f[m][l]=p[l][e][m];a[e]=f}return a}},{"../../registry":880}],1185:[function(b,D,G){function r(H,J){this.scene=H;this.uid=J;this.color=this.delaunayMesh=this.textMarkers=this.errorBars=this.scatterPlot=this.linePlot=null;this.mode=
"";this.dataPoints=[];this.axesBounds=[[-Infinity,-Infinity,-Infinity],[Infinity,Infinity,Infinity]];this.data=this.textLabels=null}function n(H){for(var J=[0,0,0],I=[[0,0,0],[0,0,0],[0,0,0]],M=[1,1,1],E=0;3>E;E++){var L=H[E];L&&!1!==L.copy_zstyle&&!1!==H[2].visible&&(L=H[2]);L&&L.visible&&(J[E]=L.width/2,I[E]=w(L.color),M[E]=L.thickness)}return{capSize:J,color:I,lineWidth:M}}function p(H){return null===H||void 0===H?0:-1<H.indexOf("left")?-1:-1<H.indexOf("right")?1:0}function k(H){return null===
H||void 0===H?0:-1<H.indexOf("top")?-1:-1<H.indexOf("bottom")?1:0}function a(H){var J=[0,0];if(Array.isArray(H))for(var I=0;I<H.length;I++)J[I]=[0,0],H[I]&&(J[I][0]=p(H[I]),J[I][1]=k(H[I]));else J[0]=p(H),J[1]=k(H);return J}function e(H,J){return J(4*H)}function f(H){return B[H]}function l(H,J,I,M,E){if(v.isArrayOrTypedArray(H)){var L=[];for(var P=0;P<J;P++)L[P]=void 0===H[P]?M:I(H[P],E)}else L=I(H,v.identity);return L}function m(H,J){function I(ha,la){ha=E[ha];return C.tickText(ha,ha.d2l(la),!0).text}
var M=[],E=H.fullSceneLayout,L=H.dataScale,P=E.xaxis,N=E.yaxis,Q=E.zaxis,O=J.marker,T=J.line,V=J.x||[],Z=J.y||[],aa=J.z||[],Y=V.length,ea=J.xcalendar,ca=J.ycalendar,ba=J.zcalendar,ka;for(ka=0;ka<Y;ka++){var qa=P.d2l(V[ka],0,ea)*L[0];var pa=N.d2l(Z[ka],0,ca)*L[1];var oa=Q.d2l(aa[ka],0,ba)*L[2];M[ka]=[qa,pa,oa]}if(Array.isArray(J.text))var ja=J.text;else if(void 0!==J.text)for(ja=Array(Y),ka=0;ka<Y;ka++)ja[ka]=J.text;var ra=J.texttemplate;if(ra)for(H=H.fullLayout._d3locale,P=(ka=Array.isArray(ra))?
Math.min(ra.length,Y):Y,N=ka?function(ha){return ra[ha]}:function(){return ra},ja=Array(P),ka=0;ka<P;ka++)Q={x:V[ka],y:Z[ka],z:aa[ka]},ea={xLabel:I("xaxis",V[ka]),yLabel:I("yaxis",Z[ka]),zLabel:I("zaxis",aa[ka])},ca={},u(ca,J,ka),ba=J._meta||{},ja[ka]=v.texttemplateString(N(ka),ea,H,ca,Q,ba);M={position:M,mode:J.mode,text:ja};"line"in J&&(M.lineColor=A(T,1,Y),M.lineWidth=T.width,M.lineDashes=T.dash);"marker"in J&&(ka=z(J),M.scatterColor=A(O,1,Y),M.scatterSize=l(O.size,Y,e,20,ka),M.scatterMarker=l(O.symbol,
Y,f,"●"),M.scatterLineWidth=O.line.width,M.scatterLineColor=A(O.line,1,Y),M.scatterAngle=0);"textposition"in J&&(M.textOffset=a(J.textposition),M.textColor=A(J.textfont,1,Y),M.textSize=l(J.textfont.size,Y,v.identity,12),M.textFont=J.textfont.family,M.textAngle=0);O=["x","y","z"];M.project=[!1,!1,!1];M.projectScale=[1,1,1];M.projectOpacity=[1,1,1];for(ka=0;3>ka;++ka)if(Y=J.projection[O[ka]],M.project[ka]=Y.show)M.projectOpacity[ka]=Y.opacity,M.projectScale[ka]=Y.scale;M.errorBounds=F(J,L,E);L=n([J.error_x,
J.error_y,J.error_z]);M.errorColor=L.color;M.errorLineWidth=L.lineWidth;M.errorCapSize=L.capSize;M.delaunayAxis=J.surfaceaxis;M.delaunayColor=w(J.surfacecolor);return M}function c(H){if(Array.isArray(H)){var J=H[0];Array.isArray(J)&&(H=J);return"rgb("+H.slice(0,3).map(function(I){return Math.round(255*I)})+")"}return null}var d=b("gl-line3d"),g=b("gl-scatter3d"),h=b("gl-error3d"),q=b("gl-mesh3d"),t=b("delaunay-triangulate"),v=b("../../lib"),w=b("../../lib/str2rgbarray"),A=b("../../lib/gl_format_color").formatColor,
z=b("../scatter/make_bubble_size_func"),y=b("../../constants/gl3d_dashes"),B=b("../../constants/gl3d_markers"),C=b("../../plots/cartesian/axes"),u=b("../../components/fx/helpers").appendArrayPointValue,F=b("./calc_errors");b=r.prototype;b.handlePick=function(H){if(H.object&&(H.object===this.linePlot||H.object===this.delaunayMesh||H.object===this.textMarkers||H.object===this.scatterPlot)){var J=H.index=H.data.index;H.object.highlight&&H.object.highlight(null);this.scatterPlot&&(H.object=this.scatterPlot,
this.scatterPlot.highlight(H.data));H.textLabel="";if(this.textLabels)if(Array.isArray(this.textLabels)){if(this.textLabels[J]||0===this.textLabels[J])H.textLabel=this.textLabels[J]}else H.textLabel=this.textLabels;H.traceCoordinate=[this.data.x[J],this.data.y[J],this.data.z[J]];return!0}};b.update=function(H){var J=this.scene.glplot.gl;var I=y.solid;this.data=H;var M=m(this.scene,H);"mode"in M&&(this.mode=M.mode);"lineDashes"in M&&M.lineDashes in y&&(I=y[M.lineDashes]);this.color=c(M.scatterColor)||
c(M.lineColor);this.dataPoints=M.position;I={gl:this.scene.glplot.gl,position:M.position,color:M.lineColor,lineWidth:M.lineWidth||1,dashes:I[0],dashScale:I[1],opacity:H.opacity,connectGaps:H.connectgaps};-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(I):(this.linePlot=d(I),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);I=H.opacity;H.marker&&H.marker.opacity&&(I*=
H.marker.opacity);I={gl:this.scene.glplot.gl,position:M.position,color:M.scatterColor,size:M.scatterSize,glyph:M.scatterMarker,opacity:I,orthographic:!0,lineWidth:M.scatterLineWidth,lineColor:M.scatterLineColor,project:M.project,projectScale:M.projectScale,projectOpacity:M.projectOpacity};-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(I):(this.scatterPlot=g(I),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&
(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null);I={gl:this.scene.glplot.gl,position:M.position,glyph:M.text,color:M.textColor,size:M.textSize,angle:M.textAngle,alignment:M.textOffset,font:M.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:H.opacity};this.textLabels=H.hovertext||H.text;-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(I):(this.textMarkers=g(I),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):
this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null);I={gl:this.scene.glplot.gl,position:M.position,color:M.errorColor,error:M.errorBounds,lineWidth:M.errorLineWidth,capSize:M.errorCapSize,opacity:H.opacity};this.errorBars?M.errorBounds?this.errorBars.update(I):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):M.errorBounds&&(this.errorBars=h(I),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars));
if(0<=M.delaunayAxis){I=M.position;var E=M.delaunayColor;M=M.delaunayAxis;var L=(M+1)%3,P=(M+2)%3,N=[];M=[];var Q;for(Q=0;Q<I.length;++Q){var O=I[Q];!isNaN(O[L])&&isFinite(O[L])&&!isNaN(O[P])&&isFinite(O[P])&&(N.push([O[L],O[P]]),M.push(Q))}L=t(N);for(Q=0;Q<L.length;++Q)for(P=L[Q],N=0;N<P.length;++N)P[N]=M[P[N]];I={positions:I,cells:L,meshColor:E};I.opacity=H.opacity;this.delaunayMesh?this.delaunayMesh.update(I):(I.gl=J,this.delaunayMesh=q(I),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&
(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)};b.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose());this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose());this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose());this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose());this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),
this.delaunayMesh.dispose())};D.exports=function(H,J){H=new r(H,J.uid);H.update(J);return H}},{"../../components/fx/helpers":651,"../../constants/gl3d_dashes":721,"../../constants/gl3d_markers":722,"../../lib":749,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../../plots/cartesian/axes":797,"../scatter/make_bubble_size_func":1172,"./calc_errors":1184,"delaunay-triangulate":171,"gl-error3d":264,"gl-line3d":271,"gl-mesh3d":292,"gl-scatter3d":308}],1186:[function(b,D,G){function r(m,
c,d,g){var h=0,q=d("x"),t=d("y");d=d("z");n.getComponentMethod("calendars","handleTraceDefaults")(m,c,["x","y","z"],g);q&&t&&d&&(h=Math.min(q.length,t.length,d.length),c._length=c._xlength=c._ylength=c._zlength=h);return h}var n=b("../../registry"),p=b("../../lib"),k=b("../scatter/subtypes"),a=b("../scatter/marker_defaults"),e=b("../scatter/line_defaults"),f=b("../scatter/text_defaults"),l=b("./attributes");D.exports=function(m,c,d,g){function h(A,z){return p.coerce(m,c,l,A,z)}if(r(m,c,h,g)){h("text");
h("hovertext");h("hovertemplate");h("mode");k.hasLines(c)&&(h("connectgaps"),e(m,c,d,g,h));k.hasMarkers(c)&&a(m,c,d,g,h,{noSelect:!0});k.hasText(c)&&(h("texttemplate"),f(m,c,g,h,{noSelect:!0}));g=(c.line||{}).color;var q=(c.marker||{}).color;0<=h("surfaceaxis")&&h("surfacecolor",g||q);for(var t=["x","y","z"],v=0;3>v;++v){var w="projection."+t[v];h(w+".show")&&(h(w+".opacity"),h(w+".scale"))}t=n.getComponentMethod("errorbars","supplyDefaults");t(m,c,g||q||d,{axis:"z"});t(m,c,g||q||d,{axis:"y",inherit:"z"});
t(m,c,g||q||d,{axis:"x",inherit:"z"})}else c.visible=!1}},{"../../lib":749,"../../registry":880,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1182}],1187:[function(b,D,G){D.exports={plot:b("./convert"),attributes:b("./attributes"),markerSymbols:b("../../constants/gl3d_markers"),supplyDefaults:b("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:b("./calc"),
moduleType:"trace",name:"scatter3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":722,"../../plots/gl3d":839,"./attributes":1182,"./calc":1183,"./convert":1185,"./defaults":1186}],1188:[function(b,D,G){G=b("../scatter/attributes");var r=b("../../plots/attributes"),n=b("../../plots/template_attributes").hovertemplateAttrs,p=b("../../plots/template_attributes").texttemplateAttrs,k=b("../../components/colorscale/attributes");
b=b("../../lib/extend").extendFlat;var a=G.marker,e=G.line,f=a.line;D.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:b({},G.mode,{dflt:"markers"}),text:b({},G.text,{}),texttemplate:p({editType:"plot"},{keys:["a","b","text"]}),hovertext:b({},G.hovertext,{}),line:{color:e.color,width:e.width,dash:e.dash,shape:b({},e.shape,{values:["linear","spline"]}),smoothing:e.smoothing,editType:"calc"},connectgaps:G.connectgaps,
fill:b({},G.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:G.fillcolor,marker:b({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:b({width:f.width,editType:"calc"},k("marker.line")),gradient:a.gradient,editType:"calc"},k("marker")),textfont:G.textfont,textposition:G.textposition,selected:G.selected,unselected:G.unselected,hoverinfo:b({},r.hoverinfo,{flags:["a","b","text","name"]}),hoveron:G.hoveron,
hovertemplate:n()}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1189:[function(b,D,G){var r=b("fast-isnumeric"),n=b("../scatter/colorscale_calc"),p=b("../scatter/arrays_to_calcdata"),k=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,e=b("../carpet/lookup_carpetid");D.exports=function(f,l){var m=l._carpetTrace=e(f,l);if(m&&m.visible&&"legendonly"!==m.visible){var c;
l.xaxis=m.xaxis;l.yaxis=m.yaxis;var d=l._length,g=Array(d),h=!1;for(c=0;c<d;c++){var q=l.a[c];var t=l.b[c];if(r(q)&&r(t)){var v=m.ab2xy(+q,+t,!0),w=m.isVisible(+q,+t);w||(h=!0);g[c]={x:v[0],y:v[1],a:q,b:t,vis:w}}else g[c]={x:!1,y:!1}}l._needsCull=h;g[0].carpet=m;g[0].trace=l;a(l,d);n(f,l);p(g,l);k(g,l);return g}}},{"../carpet/lookup_carpetid":950,"../scatter/arrays_to_calcdata":1154,"../scatter/calc":1156,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,"fast-isnumeric":241}],1190:[function(b,
D,G){var r=b("../../lib"),n=b("../scatter/constants"),p=b("../scatter/subtypes"),k=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),e=b("../scatter/line_shape_defaults"),f=b("../scatter/text_defaults"),l=b("../scatter/fillcolor_defaults"),m=b("./attributes");D.exports=function(c,d,g,h){function q(w,A){return r.coerce(c,d,m,w,A)}q("carpet");d.xaxis="x";d.yaxis="y";var t=q("a"),v=q("b");if(t=Math.min(t.length,v.length)){d._length=t;q("text");q("texttemplate");q("hovertext");q("mode",
t<n.PTS_LINESONLY?"lines+markers":"lines");p.hasLines(d)&&(a(c,d,g,h,q),e(c,d,q),q("connectgaps"));p.hasMarkers(d)&&k(c,d,g,h,q,{gradient:!0});p.hasText(d)&&f(c,d,h,q);h=[];if(p.hasMarkers(d)||p.hasText(d))q("marker.maxdisplayed"),h.push("points");q("fill");"none"!==d.fill&&(l(c,d,g,q),p.hasLines(d)||e(c,d,q));"tonext"!==d.fill&&"toself"!==d.fill||h.push("fills");"fills"!==q("hoveron",h.join("+")||"points")&&q("hovertemplate");r.coerceSelectionMarkerOpacity(d,q)}else d.visible=!1}},{"../../lib":749,
"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/line_shape_defaults":1170,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1188}],1191:[function(b,D,G){D.exports=function(r,n,p,k,a){n=k[a];r.a=n.a;r.b=n.b;r.y=n.y;return r}},{}],1192:[function(b,D,G){D.exports=function(r,n){var p={};n=n._carpet;r=n.ab2ij([r.a,r.b]);var k=Math.floor(r[0]),a=Math.floor(r[1]);n=n.evalxy([],k,a,r[0]-
k,r[1]-a);p.yLabel=n[1].toFixed(3);return p}},{}],1193:[function(b,D,G){var r=b("../scatter/hover"),n=b("../../lib").fillText;D.exports=function(p,k,a,e){function f(d,g){var h=d.labelprefix&&0<d.labelprefix.length?d.labelprefix.replace(/ = $/,""):d._hovertitle;c.push(h+": "+g.toFixed(3)+d.labelsuffix)}if((k=r(p,k,a,e))&&!1!==k[0].index){a=k[0];if(void 0===a.index)return e=p.xa._length,p=e*(1-a.y0/p.ya._length)/2,e-=p,a.x0=Math.max(Math.min(a.x0,e),p),a.x1=Math.max(Math.min(a.x1,e),p),k;p=a.cd[a.index];
a.a=p.a;a.b=p.b;a.xLabelVal=void 0;a.yLabelVal=void 0;e=a.trace;var l=e._carpet,m=e._module.formatLabels(p,e);a.yLabel=m.yLabel;delete a.text;var c=[];e.hovertemplate||(m=(p.hi||e.hoverinfo).split("+"),-1!==m.indexOf("all")&&(m=["a","b","text"]),-1!==m.indexOf("a")&&f(l.aaxis,p.a),-1!==m.indexOf("b")&&f(l.baxis,p.b),c.push("y: "+a.yLabel),-1!==m.indexOf("text")&&n(p,e,c),a.extraText=c.join("\x3cbr\x3e"));return k}}},{"../../lib":749,"../scatter/hover":1166}],1194:[function(b,D,G){D.exports={attributes:b("./attributes"),
supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:b("../../plots/cartesian"),categories:"svg carpet symbols showLegend carpetDependent zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,
"../scatter/marker_colorbar":1173,"../scatter/select":1176,"../scatter/style":1178,"./attributes":1188,"./calc":1189,"./defaults":1190,"./event_data":1191,"./format_labels":1192,"./hover":1193,"./plot":1195}],1195:[function(b,D,G){var r=b("../scatter/plot"),n=b("../../plots/cartesian/axes"),p=b("../../components/drawing");D.exports=function(k,a,e,f){var l=e[0][0].carpet;a={xaxis:n.getFromId(k,l.xaxis||"x"),yaxis:n.getFromId(k,l.yaxis||"y"),plot:a.plot};r(k,a,e,f);for(a=0;a<e.length;a++)l=e[a][0].trace,
l=f.selectAll("g.trace"+l.uid+" .js-line"),p.setClipUrl(l,e[a][0].carpet._clipPathId,k)}},{"../../components/drawing":637,"../../plots/cartesian/axes":797,"../scatter/plot":1175}],1196:[function(b,D,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var r=b("../../plots/template_attributes").texttemplateAttrs,n=b("../scatter/attributes"),p=b("../../plots/attributes"),k=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash,e=b("../../lib/extend").extendFlat;
b=b("../../plot_api/edit_types").overrideAll;var f=n.marker,l=n.line,m=f.line;D.exports=b({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:e({},n.mode,{dflt:"markers"}),text:e({},n.text,{}),texttemplate:r({editType:"plot"},{keys:["lat","lon","location",
"text"]}),hovertext:e({},n.hovertext,{}),textfont:n.textfont,textposition:n.textposition,line:{color:l.color,width:l.width,dash:a},connectgaps:n.connectgaps,marker:e({symbol:f.symbol,opacity:f.opacity,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,colorbar:f.colorbar,line:e({width:m.width},k("marker.line")),gradient:f.gradient},k("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:n.fillcolor,selected:n.selected,unselected:n.unselected,hoverinfo:e({},
p.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:G()},"calc","nested")},{"../../components/colorscale/attributes":622,"../../components/drawing/attributes":636,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1197:[function(b,D,G){function r(l){return l&&"string"===typeof l}var n=b("fast-isnumeric"),p=b("../../constants/numerical").BADNUM,k=b("../scatter/colorscale_calc"),
a=b("../scatter/arrays_to_calcdata"),e=b("../scatter/calc_selection"),f=b("../../lib")._;D.exports=function(l,m){var c=Array.isArray(m.locations),d=c?m.locations.length:m._length,g=Array(d);var h=m.geojson?function(A){return r(A)||n(A)}:r;for(var q=0;q<d;q++){var t=g[q]={};if(c){var v=m.locations[q];t.loc=h(v)?v:null}else{v=m.lon[q];var w=m.lat[q];n(v)&&n(w)?t.lonlat=[+v,+w]:t.lonlat=[p,p]}}a(g,m);k(l,m);e(g,m);d&&(g[0].t={labels:{lat:f(l,"lat:")+" ",lon:f(l,"lon:")+" "}});return g}},{"../../constants/numerical":724,
"../../lib":749,"../scatter/arrays_to_calcdata":1154,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,"fast-isnumeric":241}],1198:[function(b,D,G){var r=b("../../lib"),n=b("../scatter/subtypes"),p=b("../scatter/marker_defaults"),k=b("../scatter/line_defaults"),a=b("../scatter/text_defaults"),e=b("../scatter/fillcolor_defaults"),f=b("./attributes");D.exports=function(l,m,c,d){function g(v,w){return r.coerce(l,m,f,v,w)}var h=g("locations");if(h&&h.length){var q=g("geojson");if("string"===
typeof q&&""!==q||r.isPlainObject(q))var t="geojson-id";"geojson-id"===g("locationmode",t)&&g("featureidkey");h=h.length}else h=g("lon")||[],q=g("lat")||[],h=Math.min(h.length,q.length);h?(m._length=h,g("text"),g("hovertext"),g("hovertemplate"),g("mode"),n.hasLines(m)&&(k(l,m,c,d,g),g("connectgaps")),n.hasMarkers(m)&&p(l,m,c,d,g,{gradient:!0}),n.hasText(m)&&(g("texttemplate"),a(l,m,d,g)),g("fill"),"none"!==m.fill&&e(l,m,c,g),r.coerceSelectionMarkerOpacity(m,g)):m.visible=!1}},{"../../lib":749,"../scatter/fillcolor_defaults":1163,
"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1196}],1199:[function(b,D,G){D.exports=function(r,n,p,k,a){r.lon=n.lon;r.lat=n.lat;r.location=n.loc?n.loc:null;n=k[a];n.fIn&&n.fIn.properties&&(r.properties=n.fIn.properties);return r}},{}],1200:[function(b,D,G){var r=b("../../plots/cartesian/axes");D.exports=function(n,p,k){var a={};p=k[p.geo]._subplot.mockAxis;n=n.lonlat;a.lonLabel=r.tickText(p,p.c2l(n[0]),
!0).text;a.latLabel=r.tickText(p,p.c2l(n[1]),!0).text;return a}},{"../../plots/cartesian/axes":797}],1201:[function(b,D,G){function r(f,l,m,c){if(!f.hovertemplate){var d=l.hi||f.hoverinfo,g="all"===d?e.hoverinfo.flags:d.split("+");d=-1!==g.indexOf("location")&&Array.isArray(f.locations);var h=-1!==g.indexOf("lon"),q=-1!==g.indexOf("lat");g=-1!==g.indexOf("text");var t=[];d?t.push(l.loc):h&&q?t.push("("+(m.lonLabel+"°, ")+(m.latLabel+"°)")):h?t.push(c.lon+(m.lonLabel+"°")):q&&t.push(c.lat+(m.latLabel+
"°"));g&&a(l,f,t);return t.join("\x3cbr\x3e")}}var n=b("../../components/fx"),p=b("../../constants/numerical").BADNUM,k=b("../scatter/get_trace_color"),a=b("../../lib").fillText,e=b("./attributes");D.exports=function(f,l,m){var c=f.cd,d=c[0].trace,g=f.xa,h=f.ya,q=f.subplot,t=q.projection.isLonLatOverEdges,v=q.project;n.getClosest(c,function(z){var y=z.lonlat;if(y[0]===p||t(y))return Infinity;var B=v(y),C=v([l,m]);y=Math.abs(B[0]-C[0]);B=Math.abs(B[1]-C[1]);z=Math.max(3,z.mrc||0);return Math.max(Math.sqrt(y*
y+B*B)-z,1-3/z)},f);if(!1!==f.index){var w=c[f.index],A=w.lonlat;g=[g.c2p(A),h.c2p(A)];h=w.mrc||1;f.x0=g[0]-h;f.x1=g[0]+h;f.y0=g[1]-h;f.y1=g[1]+h;f.loc=w.loc;f.lon=A[0];f.lat=A[1];A={};A[d.geo]={_subplot:q};q=d._module.formatLabels(w,d,A);f.lonLabel=q.lonLabel;f.latLabel=q.latLabel;f.color=k(d,w);f.extraText=r(d,w,f,c[0].t.labels);f.hovertemplate=d.hovertemplate;return[f]}}},{"../../components/fx":655,"../../constants/numerical":724,"../../lib":749,"../scatter/get_trace_color":1165,"./attributes":1196}],
1202:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:b("../../plots/geo"),categories:["geo","symbols","showLegend",
"scatter-like"],meta:{}}},{"../../plots/geo":829,"../scatter/marker_colorbar":1173,"../scatter/style":1178,"./attributes":1196,"./calc":1197,"./defaults":1198,"./event_data":1199,"./format_labels":1200,"./hover":1201,"./plot":1203,"./select":1204,"./style":1205}],1203:[function(b,D,G){var r=b("d3"),n=b("../../lib"),p=b("../../lib/topojson_utils").getTopojsonFeatures,k=b("../../lib/geojson_utils"),a=b("../../lib/geo_location_utils"),e=b("../../plots/cartesian/autorange").findExtremes,f=b("../../constants/numerical").BADNUM,
l=b("../scatter/calc").calcMarkerSize,m=b("../scatter/subtypes"),c=b("./style");D.exports={calcGeoJSON:function(d,g){var h=d[0].trace;g=g[h.geo];var q=g._subplot,t=h._length;if(Array.isArray(h.locations)){var v=h.locationmode,w="geojson-id"===v?a.extractTraceFeature(d):p(h,q.topojson);for(q=0;q<t;q++){var A=d[q];var z="geojson-id"===v?A.fOut:a.locationToFeature(v,A.loc,w);A.lonlat=z?z.properties.ct:[f,f]}}v={padded:!0};if("geojson"===g.fitbounds&&"geojson-id"===h.locationmode)d=a.computeBbox(a.getTraceGeojson(h)),
w=[d[0],d[2]],z=[d[1],d[3]];else{w=Array(t);z=Array(t);for(q=0;q<t;q++)A=d[q],w[q]=A.lonlat[0],z[q]=A.lonlat[1];v.ppad=l(h,t)}h._extremes.lon=e(g.lonaxis._ax,w,v);h._extremes.lat=e(g.lataxis._ax,z,v)},plot:function(d,g,h){g=g.layers.frontplot.select(".scatterlayer");h=n.makeTraceGroups(g,h,"trace scattergeo");h.selectAll("*").remove();h.each(function(q){var t=r.select(this),v=q[0].trace;if(m.hasLines(v)||"none"!==v.fill){var w=k.calcTraceToLineCoords(q);w="none"!==v.fill?k.makePolygon(w):k.makeLine(w);
t.selectAll("path.js-line").data([{geojson:w,trace:v}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}m.hasMarkers(v)&&t.selectAll("path.point").data(n.identity).enter().append("path").classed("point",!0).each(function(A){A.lonlat[0]===f&&r.select(this).remove()});m.hasText(v)&&t.selectAll("g").data(n.identity).enter().append("g").append("text").each(function(A){A.lonlat[0]===f&&r.select(this).remove()});c(d,q)})}}},{"../../constants/numerical":724,"../../lib":749,"../../lib/geo_location_utils":742,
"../../lib/geojson_utils":743,"../../lib/topojson_utils":776,"../../plots/cartesian/autorange":796,"../scatter/calc":1156,"../scatter/subtypes":1179,"./style":1205,d3:169}],1204:[function(b,D,G){var r=b("../scatter/subtypes"),n=b("../../constants/numerical").BADNUM;D.exports=function(p,k){var a=p.cd,e=p.xaxis,f=p.yaxis,l=[],m=a[0].trace,c;if(!r.hasMarkers(m)&&!r.hasText(m))return[];if(!1===k)for(c=0;c<a.length;c++)a[c].selected=0;else for(c=0;c<a.length;c++){m=a[c];var d=m.lonlat;if(d[0]!==n){var g=
e.c2p(d);var h=f.c2p(d);k.contains([g,h],null,c,p)?(l.push({pointNumber:c,lon:d[0],lat:d[1]}),m.selected=1):m.selected=0}}return l}},{"../../constants/numerical":724,"../scatter/subtypes":1179}],1205:[function(b,D,G){function r(f,l){var m=l[0].trace,c=l[0].node3;c.style("opacity",l[0].trace.opacity);a(c,m,f);e(c,m,f);c.selectAll("path.js-line").style("fill","none").each(function(d){var g=n.select(this);d=d.trace;var h=d.line||{};g.call(k.stroke,h.color).call(p.dashLine,h.dash||"",h.width||0);"none"!==
d.fill&&g.call(k.fill,d.fillcolor)})}var n=b("d3"),p=b("../../components/drawing"),k=b("../../components/color");b=b("../scatter/style");var a=b.stylePoints,e=b.styleText;D.exports=function(f,l){l&&r(f,l)}},{"../../components/color":615,"../../components/drawing":637,"../scatter/style":1178,d3:169}],1206:[function(b,D,G){var r=b("../../plots/attributes");G=b("../scatter/attributes");var n=b("../../components/colorscale/attributes"),p=b("../../lib/extend").extendFlat,k=b("../../plot_api/edit_types").overrideAll;
b=b("./constants").DASHES;var a=G.line,e=G.marker,f=e.line;D=D.exports=k({x:G.x,x0:G.x0,dx:G.dx,y:G.y,y0:G.y0,dy:G.dy,text:G.text,hovertext:G.hovertext,textposition:G.textposition,textfont:G.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:a.color,width:a.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(b),dflt:"solid"}},marker:p({},n("marker"),{symbol:e.symbol,
size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,opacity:e.opacity,colorbar:e.colorbar,line:p({},n("marker.line"),{width:f.width})}),connectgaps:G.connectgaps,fill:p({},G.fill,{dflt:"none"}),fillcolor:G.fillcolor,selected:{marker:G.selected.marker,textfont:G.selected.textfont},unselected:{marker:G.unselected.marker,textfont:G.unselected.textfont},opacity:r.opacity},"calc","nested");D.x.editType=D.y.editType=D.x0.editType=D.y0.editType="calc+clearAxisTypes";D.hovertemplate=G.hovertemplate;
D.texttemplate=G.texttemplate},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../scatter/attributes":1155,"./constants":1208}],1207:[function(b,D,G){function r(q,t,v){q=q._extremes[t._id];t=a(t,v._bnds,{padded:!0});q.min=q.min.concat(t.min);q.max=q.max.concat(t.max)}var n=b("@plotly/point-cluster"),p=b("../../lib"),k=b("../../plots/cartesian/axis_ids"),a=b("../../plots/cartesian/autorange").findExtremes;G=b("../scatter/calc");
var e=G.calcMarkerSize,f=G.calcAxisExpansion,l=G.setFirstScatter,m=b("../scatter/colorscale_calc"),c=b("./convert"),d=b("./scene_update"),g=b("../../constants/numerical").BADNUM,h=b("./constants").TOO_MANY_POINTS;D.exports=function(q,t){var v=q._fullLayout,w=k.getFromId(q,t.xaxis),A=k.getFromId(q,t.yaxis),z=v._plots[t.xaxis+t.yaxis],y=t._length,B=y>=h,C=2*y,u={},F,H=t._x=w.makeCalcdata(t,"x"),J=t._y=A.makeCalcdata(t,"y"),I=Array(C);for(F=0;F<y;F++){var M=H[F];var E=J[F];I[2*F]=M===g?NaN:M;I[2*F+1]=
E===g?NaN:E}if("log"===w.type)for(F=0;F<C;F+=2)I[F]=w.c2l(I[F]);if("log"===A.type)for(F=1;F<C;F+=2)I[F]=A.c2l(I[F]);if(B&&"log"!==w.type&&"log"!==A.type)u.tree=n(I);else for(C=u.ids=Array(y),F=0;F<y;F++)C[F]=F;m(q,t);F=c.style(q,t);F.marker&&(F.marker.positions=I);F.line&&1<I.length&&p.extendFlat(F.line,c.linePositions(q,t,I));if(F.errorX||F.errorY)C=c.errorBarPositions(q,t,I,H,J),F.errorX&&p.extendFlat(F.errorX,C.x),F.errorY&&p.extendFlat(F.errorY,C.y);F.text&&(p.extendFlat(F.text,{positions:I},
c.textPosition(q,t,F.text,F.marker)),p.extendFlat(F.textSel,{positions:I},c.textPosition(q,t,F.text,F.markerSel)),p.extendFlat(F.textUnsel,{positions:I},c.textPosition(q,t,F.text,F.markerUnsel)));z=d(q,z);l(v,t);var L;B?F.marker&&(L=2*(F.marker.sizeAvg||Math.max(F.marker.size,3))):L=e(t,y);f(q,t,w,A,H,J,L);F.errorX&&r(t,w,F.errorX);F.errorY&&r(t,A,F.errorY);F.fill&&!z.fill2d&&(z.fill2d=!0);F.marker&&!z.scatter2d&&(z.scatter2d=!0);F.line&&!z.line2d&&(z.line2d=!0);!F.errorX&&!F.errorY||z.error2d||(z.error2d=
!0);F.text&&!z.glText&&(z.glText=!0);F.marker&&(F.marker.snap=y);z.lineOptions.push(F.line);z.errorXOptions.push(F.errorX);z.errorYOptions.push(F.errorY);z.fillOptions.push(F.fill);z.markerOptions.push(F.marker);z.markerSelectedOptions.push(F.markerSel);z.markerUnselectedOptions.push(F.markerUnsel);z.textOptions.push(F.text);z.textSelectedOptions.push(F.textSel);z.textUnselectedOptions.push(F.textUnsel);z.selectBatch.push([]);z.unselectBatch.push([]);u._scene=z;u.index=z.count;u.x=H;u.y=J;u.positions=
I;z.count++;return[{x:!1,y:!1,t:u,trace:t}]}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/autorange":796,"../../plots/cartesian/axis_ids":800,"../scatter/calc":1156,"../scatter/colorscale_calc":1158,"./constants":1208,"./convert":1209,"./scene_update":1217,"@plotly/point-cluster":57}],1208:[function(b,D,G){D.exports={TOO_MANY_POINTS:1E5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],
dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],1209:[function(b,D,G){function r(I,M){var E=I._fullLayout;I=M._length;var L=M.textfont,P=M.textposition,N=Array.isArray(P)?P:[P],Q=L.color;P=L.size;L=L.family;var O={},T,V=M.texttemplate;if(V){O.text=[];var Z=E._d3locale,aa=(T=Array.isArray(V))?Math.min(V.length,I):I,Y=T?function(qa){return V[qa]}:function(){return V};for(T=0;T<aa;T++){var ea={i:T},ca=M._module.formatLabels(ea,M,E),ba={};B(ba,M,T);var ka=M._meta||{};O.text.push(d.texttemplateString(Y(T),
ca,Z,ba,ea,ka))}}else Array.isArray(M.text)&&M.text.length<I?O.text=M.text.slice():O.text=M.text;if(Array.isArray(O.text))for(T=O.text.length;T<I;T++)O.text[T]="";O.opacity=M.opacity;O.font={};O.align=[];O.baseline=[];for(T=0;T<N.length;T++){M=N[T].split(/\s+/);switch(M[1]){case "left":O.align.push("right");break;case "right":O.align.push("left");break;default:O.align.push(M[1])}switch(M[0]){case "top":O.baseline.push("bottom");break;case "bottom":O.baseline.push("top");break;default:O.baseline.push(M[0])}}if(Array.isArray(Q))for(O.color=
Array(I),T=0;T<I;T++)O.color[T]=Q[T];else O.color=Q;if(d.isArrayOrTypedArray(P)||Array.isArray(L))for(O.font=Array(I),T=0;T<I;T++)M=O.font[T]={},M.size=d.isTypedArray(P)?P[T]:Array.isArray(P)?f(P[T])?P[T]:0:P,M.family=Array.isArray(L)?L[T]:L;else O.font={size:P,family:L};return O}function n(I){var M=I._length,E=I.marker,L={},P=d.isArrayOrTypedArray(E.symbol);var N=d.isArrayOrTypedArray(E.color);var Q=d.isArrayOrTypedArray(E.line.color),O=d.isArrayOrTypedArray(E.opacity),T=d.isArrayOrTypedArray(E.size),
V=d.isArrayOrTypedArray(E.line.width),Z;P||(Z=w.isOpenSymbol(E.symbol));if(P||N||Q||O){L.colors=Array(M);L.borderColors=Array(M);Q=q(E,E.opacity,M);O=q(E.line,E.opacity,M);if(!Array.isArray(O[0])){var aa=O;O=Array(M);for(N=0;N<M;N++)O[N]=aa}if(!Array.isArray(Q[0]))for(aa=Q,Q=Array(M),N=0;N<M;N++)Q[N]=aa;L.colors=Q;L.borderColors=O;for(N=0;N<M;N++)P&&(Z=w.isOpenSymbol(E.symbol[N])),Z&&(O[N]=Q[N].slice(),Q[N]=Q[N].slice(),Q[N][3]=0);L.opacity=I.opacity}else Z?(L.color=m(E.color,"uint8"),L.color[3]=
0,L.borderColor=m(E.color,"uint8")):(L.color=m(E.color,"uint8"),L.borderColor=m(E.line.color,"uint8")),L.opacity=I.opacity*E.opacity;if(P)for(L.markers=Array(M),N=0;N<M;N++)L.markers[N]=e(E.symbol[N]);else L.marker=e(E.symbol);Z=v(I);if(T||V){I=L.sizes=Array(M);P=L.borderSizes=Array(M);Q=0;if(T){for(N=0;N<M;N++)I[N]=Z(E.size[N]),Q+=I[N];var Y=Q/M}else for(T=Z(E.size),N=0;N<M;N++)I[N]=T;if(V)for(N=0;N<M;N++)P[N]=E.line.width[N]/2;else for(T=E.line.width/2,N=0;N<M;N++)P[N]=T;L.sizeAvg=Y}else L.size=
Z(E&&E.size||10),L.borderSizes=Z(E.line.width);return L}function p(I,M){I=I.marker;var E={};if(!M)return E;M.marker&&M.marker.symbol?E=n(d.extendFlat({},I,M.marker)):M.marker&&(M.marker.size&&(E.size=M.marker.size/2),M.marker.color&&(E.colors=M.marker.color),void 0!==M.marker.opacity&&(E.opacity=M.marker.opacity));return E}function k(I,M,E){var L={};if(!E)return L;E.textfont&&(M={opacity:1,text:M.text,texttemplate:M.texttemplate,textposition:M.textposition,textfont:d.extendFlat({},M.textfont)},E.textfont&&
d.extendFlat(M.textfont,E.textfont),L=r(I,M));return L}function a(I,M){var E={capSize:2*M.width,lineWidth:M.thickness,color:M.color};M.copy_ystyle&&(E=I.error_y);return E}function e(I){if("circle"===I)return null;var M=g.symbolNumber(I);var E=g.symbolFuncs[M%100];var L=!!g.symbolNoDot[M%100];M=!!g.symbolNoFill[M%100];var P=w.isDotSymbol(I);if(H[I])return H[I];E=P&&!L?E(1.1*u)+J:E(u);E=l(E,{w:C,h:C,viewBox:[-u,-u,u,u],stroke:M?F:-F});return(H[I]=E)||null}var f=b("fast-isnumeric"),l=b("svg-path-sdf"),
m=b("color-normalize"),c=b("../../registry"),d=b("../../lib"),g=b("../../components/drawing"),h=b("../../plots/cartesian/axis_ids"),q=b("../../lib/gl_format_color").formatColor,t=b("../scatter/subtypes"),v=b("../scatter/make_bubble_size_func"),w=b("./helpers"),A=b("./constants"),z=b("../../constants/interactions").DESELECTDIM,y={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},B=b("../../components/fx/helpers").appendArrayPointValue,C=A.SYMBOL_SDF_SIZE,u=A.SYMBOL_SIZE,F=A.SYMBOL_STROKE,
H={},J=g.symbolFuncs[0](.05*u);D.exports={style:function(I,M){var E={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0};if(!0!==M.visible)return E;t.hasText(M)&&(E.text=r(I,M),E.textSel=k(I,M,M.selected),E.textUnsel=k(I,M,M.unselected));if(t.hasMarkers(M)&&(E.marker=n(M),E.markerSel=p(M,M.selected),E.markerUnsel=p(M,M.unselected),!M.unselected&&d.isArrayOrTypedArray(M.marker.opacity))){var L=M.marker.opacity;
E.markerUnsel.opacity=Array(L.length);for(I=0;I<L.length;I++)E.markerUnsel.opacity[I]=z*L[I]}if(t.hasLines(M)){E.line={overlay:!0,thickness:M.line.width,color:M.line.color,opacity:M.opacity};L=(A.DASHES[M.line.dash]||[1]).slice();for(I=0;I<L.length;++I)L[I]*=M.line.width;E.line.dashes=L}M.error_x&&M.error_x.visible&&(E.errorX=a(M,M.error_x));M.error_y&&M.error_y.visible&&(E.errorY=a(M,M.error_y));M.fill&&"none"!==M.fill&&(E.fill={closed:!0,fill:M.fillcolor,thickness:0});return E},markerStyle:n,markerSelection:p,
linePositions:function(I,M,E){var L=E.length,P=L/2;if(t.hasLines(M)&&P)if("hv"===M.line.shape){var N=[];for(I=0;I<P-1;I++)isNaN(E[2*I])||isNaN(E[2*I+1])?N.push(NaN,NaN,NaN,NaN):(N.push(E[2*I],E[2*I+1]),isNaN(E[2*I+2])||isNaN(E[2*I+3])?N.push(NaN,NaN):N.push(E[2*I+2],E[2*I+1]));N.push(E[L-2],E[L-1])}else if("hvh"===M.line.shape){N=[];for(I=0;I<P-1;I++)if(isNaN(E[2*I])||isNaN(E[2*I+1])||isNaN(E[2*I+2])||isNaN(E[2*I+3]))isNaN(E[2*I])||isNaN(E[2*I+1])?N.push(NaN,NaN):N.push(E[2*I],E[2*I+1]),N.push(NaN,
NaN);else{var Q=(E[2*I]+E[2*I+2])/2;N.push(E[2*I],E[2*I+1],Q,E[2*I+1],Q,E[2*I+3])}N.push(E[L-2],E[L-1])}else if("vhv"===M.line.shape){N=[];for(I=0;I<P-1;I++)isNaN(E[2*I])||isNaN(E[2*I+1])||isNaN(E[2*I+2])||isNaN(E[2*I+3])?(isNaN(E[2*I])||isNaN(E[2*I+1])?N.push(NaN,NaN):N.push(E[2*I],E[2*I+1]),N.push(NaN,NaN)):(Q=(E[2*I+1]+E[2*I+3])/2,N.push(E[2*I],E[2*I+1],E[2*I],Q,E[2*I+2],Q));N.push(E[L-2],E[L-1])}else if("vh"===M.line.shape){N=[];for(I=0;I<P-1;I++)isNaN(E[2*I])||isNaN(E[2*I+1])?N.push(NaN,NaN,
NaN,NaN):(N.push(E[2*I],E[2*I+1]),isNaN(E[2*I+2])||isNaN(E[2*I+3])?N.push(NaN,NaN):N.push(E[2*I],E[2*I+3]));N.push(E[L-2],E[L-1])}else N=E;L=!1;for(I=0;I<N.length;I++)if(isNaN(N[I])){L=!0;break}E=L||N.length>A.TOO_MANY_POINTS?"rect":t.hasMarkers(M)?"rect":"round";if(L&&M.connectgaps)for(M=N[0],L=N[1],I=0;I<N.length;I+=2)isNaN(N[I])||isNaN(N[I+1])?(N[I]=M,N[I+1]=L):(M=N[I],L=N[I+1]);return{join:E,positions:N}},errorBarPositions:function(I,M,E,L,P){function N(Z,aa){var Y=aa._id.charAt(0),ea=M["error_"+
Y];if(ea&&ea.visible&&("linear"===aa.type||"log"===aa.type)){ea=Q(ea);for(var ca={x:0,y:1}[Y],ba={x:[0,1,2,3],y:[2,3,0,1]}[Y],ka=new Float64Array(4*T),qa=Infinity,pa=-Infinity,oa=0,ja=0;oa<T;oa++,ja+=4){var ra=Z[oa];if(f(ra)){var ha=E[2*oa+ca],la=ea(ra,oa),ua=la[0];la=la[1];if(f(ua)&&f(la)){var na=ra+la;ka[ja+ba[0]]=ha-aa.c2l(ra-ua);ka[ja+ba[1]]=aa.c2l(na)-ha;ka[ja+ba[2]]=0;ka[ja+ba[3]]=0;qa=Math.min(qa,ra-ua);pa=Math.max(pa,ra+la)}}}V[Y]={positions:E,errors:ka,_bnds:[qa,pa]}}}var Q=c.getComponentMethod("errorbars",
"makeComputeError"),O=h.getFromId(I,M.xaxis);I=h.getFromId(I,M.yaxis);var T=E.length/2,V={};N(L,O);N(P,I);return V},textPosition:function(I,M,E,L){I=M._length;var P={};if(t.hasMarkers(M)){M=E.font;var N=E.align,Q=E.baseline;P.offset=Array(I);for(E=0;E<I;E++){var O=L.sizes?L.sizes[E]:L.size,T=Array.isArray(M)?M[E].size:M.size,V=Array.isArray(N)?1<N.length?N[E]:N[0]:N,Z=Array.isArray(Q)?1<Q.length?Q[E]:Q[0]:Q;Z=y[Z];O=O?O/.8+1:0;P.offset[E]=[y[V]*O/T,(-Z*O-.5*Z)/T]}}return P}}},{"../../components/drawing":637,
"../../components/fx/helpers":651,"../../constants/interactions":723,"../../lib":749,"../../lib/gl_format_color":745,"../../plots/cartesian/axis_ids":800,"../../registry":880,"../scatter/make_bubble_size_func":1172,"../scatter/subtypes":1179,"./constants":1208,"./helpers":1213,"color-normalize":125,"fast-isnumeric":241,"svg-path-sdf":546}],1210:[function(b,D,G){var r=b("../../lib"),n=b("../../registry"),p=b("./helpers"),k=b("./attributes"),a=b("../scatter/constants"),e=b("../scatter/subtypes"),f=
b("../scatter/xy_defaults"),l=b("../scatter/marker_defaults"),m=b("../scatter/line_defaults"),c=b("../scatter/fillcolor_defaults"),d=b("../scatter/text_defaults");D.exports=function(g,h,q,t){function v(y,B){return r.coerce(g,h,k,y,B)}var w=g.marker?p.isOpenSymbol(g.marker.symbol):!1,A=e.isBubble(g),z=f(g,h,t,v);z?(z=z<a.PTS_LINESONLY?"lines+markers":"lines",v("text"),v("hovertext"),v("hovertemplate"),v("mode",z),e.hasLines(h)&&(v("connectgaps"),m(g,h,q,t,v),v("line.shape")),e.hasMarkers(h)&&(l(g,
h,q,t,v),v("marker.line.width",w||A?1:0)),e.hasText(h)&&(v("texttemplate"),d(g,h,t,v)),t=(h.line||{}).color,w=(h.marker||{}).color,v("fill"),"none"!==h.fill&&c(g,h,q,v),A=n.getComponentMethod("errorbars","supplyDefaults"),A(g,h,t||w||q,{axis:"y"}),A(g,h,t||w||q,{axis:"x",inherit:"y"}),r.coerceSelectionMarkerOpacity(h,v)):h.visible=!1}},{"../../lib":749,"../../registry":880,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,
"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"../scatter/xy_defaults":1181,"./attributes":1206,"./helpers":1213}],1211:[function(b,D,G){var r=b("../../lib"),n=b("../../components/color"),p=b("../../constants/interactions").DESELECTDIM;D.exports={styleTextSelection:function(k){k=k[0];var a=k.trace,e=k.t;k=e._scene;e=e.index;var f=k.selectBatch[e],l=k.unselectBatch[e],m=k.textOptions[e],c=k.textSelectedOptions[e]||{},d=k.textUnselectedOptions[e]||{},g=r.extendFlat({},m);if(f.length||l.length){c=
c.color;d=d.color;m=m.color;var h=Array.isArray(m);g.color=Array(a._length);for(a=0;a<f.length;a++){var q=f[a];g.color[q]=c||(h?m[q]:m)}for(a=0;a<l.length;a++)q=l[a],f=h?m[q]:m,g.color[q]=d?d:c?f:n.addOpacity(f,p)}k.glText[e].update(g)}}},{"../../components/color":615,"../../constants/interactions":723,"../../lib":749}],1212:[function(b,D,G){var r=b("../scatter/format_labels");D.exports=function(n,p,k){var a=n.i;"x"in n||(n.x=p._x[a]);"y"in n||(n.y=p._y[a]);return r(n,p,k)}},{"../scatter/format_labels":1164}],
1213:[function(b,D,G){var r=b("./constants");G.isOpenSymbol=function(n){return"string"===typeof n?r.OPEN_RE.test(n):100<n%200};G.isDotSymbol=function(n){return"string"===typeof n?r.DOT_RE.test(n):200<n}},{"./constants":1208}],1214:[function(b,D,G){function r(a,e,f,l){var m=a.xa,c=a.ya,d=a.distance,g=a.dxy,h=a.index;e={pointNumber:h,x:e[h],y:f[h]};e.tx=Array.isArray(l.text)?l.text[h]:l.text;e.htx=Array.isArray(l.hovertext)?l.hovertext[h]:l.hovertext;e.data=Array.isArray(l.customdata)?l.customdata[h]:
l.customdata;e.tp=Array.isArray(l.textposition)?l.textposition[h]:l.textposition;if(f=l.textfont)e.ts=p.isArrayOrTypedArray(f.size)?f.size[h]:f.size,e.tc=Array.isArray(f.color)?f.color[h]:f.color,e.tf=Array.isArray(f.family)?f.family[h]:f.family;if(f=l.marker)e.ms=p.isArrayOrTypedArray(f.size)?f.size[h]:f.size,e.mo=p.isArrayOrTypedArray(f.opacity)?f.opacity[h]:f.opacity,e.mx=p.isArrayOrTypedArray(f.symbol)?f.symbol[h]:f.symbol,e.mc=p.isArrayOrTypedArray(f.color)?f.color[h]:f.color;var q=f&&f.line;
q&&(e.mlc=Array.isArray(q.color)?q.color[h]:q.color,e.mlw=p.isArrayOrTypedArray(q.width)?q.width[h]:q.width);(f=f&&f.gradient)&&"none"!==f.type&&(e.mgt=Array.isArray(f.type)?f.type[h]:f.type,e.mgc=Array.isArray(f.color)?f.color[h]:f.color);m=m.c2p(e.x,!0);c=c.c2p(e.y,!0);f=e.mrc||1;if(q=l.hoverlabel)e.hbg=Array.isArray(q.bgcolor)?q.bgcolor[h]:q.bgcolor,e.hbc=Array.isArray(q.bordercolor)?q.bordercolor[h]:q.bordercolor,e.hts=p.isArrayOrTypedArray(q.font.size)?q.font.size[h]:q.font.size,e.htc=Array.isArray(q.font.color)?
q.font.color[h]:q.font.color,e.htf=Array.isArray(q.font.family)?q.font.family[h]:q.font.family,e.hnl=p.isArrayOrTypedArray(q.namelength)?q.namelength[h]:q.namelength;if(q=l.hoverinfo)e.hi=Array.isArray(q)?q[h]:q;if(q=l.hovertemplate)e.ht=Array.isArray(q)?q[h]:q;h={};h[a.index]=e;a=p.extendFlat({},a,{color:k(l,e),x0:m-f,x1:m+f,xLabelVal:e.x,y0:c-f,y1:c+f,yLabelVal:e.y,cd:h,distance:d,spikeDistance:g,hovertemplate:e.ht});e.htx?a.text=e.htx:e.tx?a.text=e.tx:l.text&&(a.text=l.text);p.fillText(e,l,a);
n.getComponentMethod("errorbars","hoverInfo")(e,l,a);return a}var n=b("../../registry"),p=b("../../lib"),k=b("../scatter/get_trace_color");D.exports={hoverPoints:function(a,e,f,l){var m=a.cd,c=m[0].t;m=m[0].trace;var d=a.xa,g=a.ya,h=c.x,q=c.y;e=d.c2p(e);f=g.c2p(f);var t=a.distance;if(c.tree){var v=d.p2c(e-t),w=d.p2c(e+t),A=g.p2c(f-t),z=g.p2c(f+t);c="x"===l?c.tree.range(Math.min(v,w),Math.min(g._rl[0],g._rl[1]),Math.max(v,w),Math.max(g._rl[0],g._rl[1])):c.tree.range(Math.min(v,w),Math.min(A,z),Math.max(v,
w),Math.max(A,z))}else c=c.ids;if("x"===l)for(l=0;l<c.length;l++){if(w=h[c[l]],w=Math.abs(d.c2p(w)-e),w<t){t=w;v=g.c2p(q[c[l]])-f;var y=Math.sqrt(w*w+v*v);var B=c[l]}}else for(l=c.length-1;-1<l;l--)w=h[c[l]],v=q[c[l]],w=d.c2p(w)-e,v=g.c2p(v)-f,v=Math.sqrt(w*w+v*v),v<t&&(t=y=v,B=c[l]);a.index=B;a.distance=t;a.dxy=y;return void 0===B?[a]:[r(a,h,q,m)]},calcHover:r}},{"../../lib":749,"../../registry":880,"../scatter/get_trace_color":1165}],1215:[function(b,D,G){G=b("./hover");D.exports={moduleType:"trace",
name:"scattergl",basePlotModule:b("../../plots/cartesian"),categories:"gl regl cartesian symbols errorBarsOK showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../scatter/cross_trace_defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:G.hoverPoints,selectPoints:b("./select"),meta:{}}},{"../../plots/cartesian":810,"../scatter/cross_trace_defaults":1161,
"../scatter/marker_colorbar":1173,"./attributes":1206,"./calc":1207,"./defaults":1210,"./format_labels":1212,"./hover":1214,"./plot":1216,"./select":1218}],1216:[function(b,D,G){function r(g,h,q){var t=g._size;return[t.l+h.domain[0]*t.w,t.b+q.domain[0]*t.h,g.width-t.r-(1-h.domain[1])*t.w,g.height-t.t-(1-q.domain[1])*t.h]}var n=b("regl-scatter2d"),p=b("regl-line2d"),k=b("regl-error2d"),a=b("gl-text"),e=b("../../lib"),f=b("../../components/dragelement/helpers").selectMode,l=b("../../lib/prepare_regl"),
m=b("../scatter/subtypes"),c=b("../scatter/link_traces"),d=b("./edit_style").styleTextSelection;D.exports=function(g,h,q){if(q.length){var t=g._fullLayout,v=h._scene,w=h.xaxis,A=h.yaxis;if(v)if(l(g,["ANGLE_instanced_arrays","OES_element_index_uint"])){var z=v.count,y=t._glcanvas.data()[0].regl;c(g,h,q);if(v.dirty){!0===v.error2d&&(v.error2d=k(y));!0===v.line2d&&(v.line2d=p(y));!0===v.scatter2d&&(v.scatter2d=n(y,{constPointSize:!0}));!0===v.fill2d&&(v.fill2d=p(y));if(!0===v.glText)for(v.glText=Array(z),
g=0;g<z;g++)v.glText[g]=new a(y);if(v.glText){if(z>v.glText.length)for(h=z-v.glText.length,g=0;g<h;g++)v.glText.push(new a(y));else z<v.glText.length&&v.glText.splice(z,v.glText.length-z).forEach(function(L){L.destroy()});for(g=0;g<z;g++)v.glText[g].update(v.textOptions[g])}v.line2d&&(v.line2d.update(v.lineOptions),v.lineOptions=v.lineOptions.map(function(L){if(L&&L.positions){for(var P=L.positions,N=0;N<P.length&&(isNaN(P[N])||isNaN(P[N+1]));)N+=2;for(var Q=P.length-2;Q>N&&(isNaN(P[Q])||isNaN(P[Q+
1]));)Q-=2;L.positions=P.slice(N,Q+2)}return L}),v.line2d.update(v.lineOptions));v.error2d&&(g=(v.errorXOptions||[]).concat(v.errorYOptions||[]),v.error2d.update(g));v.scatter2d&&v.scatter2d.update(v.markerOptions);v.fillOrder=e.repeat(null,z);v.fill2d&&(v.fillOptions=v.fillOptions.map(function(L,P){var N=q[P];if(L&&N&&N[0]&&N[0].trace){var Q=N[0];N=Q.trace;var O=Q.t,T=v.lineOptions[P],V;Q=[];N._ownfill&&Q.push(P);N._nexttrace&&Q.push(P+1);Q.length&&(v.fillOrder[P]=Q);Q=[];O=T&&T.positions||O.positions;
if("tozeroy"===N.fill){for(T=0;T<O.length&&isNaN(O[T+1]);)T+=2;for(V=O.length-2;V>T&&isNaN(O[V+1]);)V-=2;0!==O[T+1]&&(Q=[O[T],0]);Q=Q.concat(O.slice(T,V+2));0!==O[V+1]&&(Q=Q.concat([O[V],0]))}else if("tozerox"===N.fill){for(T=0;T<O.length&&isNaN(O[T]);)T+=2;for(V=O.length-2;V>T&&isNaN(O[V]);)V-=2;0!==O[T]&&(Q=[0,O[T+1]]);Q=Q.concat(O.slice(T,V+2));0!==O[V]&&(Q=Q.concat([0,O[V+1]]))}else if("toself"===N.fill||"tonext"===N.fill){Q=[];for(T=V=0;T<O.length;T+=2)if(isNaN(O[T])||isNaN(O[T+1]))Q=Q.concat(O.slice(V,
T)),Q.push(O[V],O[V+1]),V=T+2;Q=Q.concat(O.slice(V));V&&Q.push(O[V],O[V+1])}else if(T=N._nexttrace)if(V=v.lineOptions[P+1])if(V=V.positions,"tonexty"===N.fill){Q=O.slice();for(P=Math.floor(V.length/2);P--;){O=V[2*P];var Z=V[2*P+1];isNaN(O)||isNaN(Z)||Q.push(O,Z)}L.fill=T.fillcolor}if(N._prevtrace&&"tonext"===N._prevtrace.fill){P=v.lineOptions[P-1].positions;O=Q.length/2;V=[O];for(T=0;T<P.length;T+=2)(isNaN(P[T])||isNaN(P[T+1]))&&V.push(T/2+O+1);Q=Q.concat(P);L.hole=V}L.fillmode=N.fill;L.opacity=N.opacity;
L.positions=Q;return L}}),v.fill2d.update(v.fillOptions))}y=f(t.dragmode);h=-1<t.clickmode.indexOf("select");for(g=0;g<z;g++){var B=q[g][0];var C=B.trace;var u=B.t,F=u.index;B=C._length;var H=u.x,J=u.y;if(C.selectedpoints||y||h){y||(y=!0);if(C.selectedpoints){var I=v.selectBatch[F]=e.selIndices2selPoints(C),M={};for(C=0;C<I.length;C++)M[I[C]]=1;I=[];for(C=0;C<B;C++)M[C]||I.push(C);v.unselectBatch[F]=I}F=u.xpx=Array(B);u=u.ypx=Array(B);for(C=0;C<B;C++)F[C]=w.c2p(H[C]),u[C]=A.c2p(J[C])}else u.xpx=u.ypx=
null}if(y){v.select2d||(v.select2d=n(t._glcanvas.data()[1].regl));if(v.scatter2d){y=Array(z);for(g=0;g<z;g++)y[g]=v.selectBatch[g].length||v.unselectBatch[g].length?v.markerUnselectedOptions[g]:{};v.scatter2d.update(y)}v.select2d&&(v.select2d.update(v.markerOptions),v.select2d.update(v.markerSelectedOptions));v.glText&&q.forEach(function(L){m.hasText(((L||[])[0]||{}).trace||{})&&d(L)})}else v.scatter2d&&v.scatter2d.update(v.markerOptions);var E={viewport:r(t,w,A),range:[(w._rl||w.range)[0],(A._rl||
A.range)[0],(w._rl||w.range)[1],(A._rl||A.range)[1]]};t=e.repeat(E,v.count);v.fill2d&&v.fill2d.update(t);v.line2d&&v.line2d.update(t);v.error2d&&v.error2d.update(t.concat(t));v.scatter2d&&v.scatter2d.update(t);v.select2d&&v.select2d.update(t);v.glText&&v.glText.forEach(function(L){L.update(E)})}else v.init()}}},{"../../components/dragelement/helpers":633,"../../lib":749,"../../lib/prepare_regl":762,"../scatter/link_traces":1171,"../scatter/subtypes":1179,"./edit_style":1211,"gl-text":326,"regl-error2d":508,
"regl-line2d":509,"regl-scatter2d":510}],1217:[function(b,D,G){var r=b("../../lib");D.exports=function(n,p){var k=p._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},e={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};p._scene||(k=p._scene={},k.init=function(){r.extendFlat(k,e,
a)},k.init(),k.update=function(f){var l=r.repeat(f,k.count);k.fill2d&&k.fill2d.update(l);k.scatter2d&&k.scatter2d.update(l);k.line2d&&k.line2d.update(l);k.error2d&&k.error2d.update(l.concat(l));k.select2d&&k.select2d.update(l);if(k.glText)for(l=0;l<k.count;l++)k.glText[l].update(f)},k.draw=function(){for(var f=k.count,l=k.fill2d,m=k.error2d,c=k.line2d,d=k.scatter2d,g=k.glText,h=k.select2d,q=k.selectBatch,t=k.unselectBatch,v=0;v<f;v++){l&&k.fillOrder[v]&&l.draw(k.fillOrder[v]);c&&k.lineOptions[v]&&
c.draw(v);m&&(k.errorXOptions[v]&&m.draw(v),k.errorYOptions[v]&&m.draw(v+f));if(d&&k.markerOptions[v])if(t[v].length){var w=r.repeat([],k.count);w[v]=t[v];d.draw(w)}else q[v].length||d.draw(v);g[v]&&k.textOptions[v]&&g[v].render()}h&&h.draw(q);k.dirty=!1},k.destroy=function(){k.fill2d&&k.fill2d.destroy&&k.fill2d.destroy();k.scatter2d&&k.scatter2d.destroy&&k.scatter2d.destroy();k.error2d&&k.error2d.destroy&&k.error2d.destroy();k.line2d&&k.line2d.destroy&&k.line2d.destroy();k.select2d&&k.select2d.destroy&&
k.select2d.destroy();k.glText&&k.glText.forEach(function(f){f.destroy&&f.destroy()});k.lineOptions=null;k.fillOptions=null;k.markerOptions=null;k.markerSelectedOptions=null;k.markerUnselectedOptions=null;k.errorXOptions=null;k.errorYOptions=null;k.textOptions=null;k.textSelectedOptions=null;k.textUnselectedOptions=null;k.selectBatch=null;k.unselectBatch=null;p._scene=null});k.dirty||r.extendFlat(k,a);return k}},{"../../lib":749}],1218:[function(b,D,G){var r=b("../scatter/subtypes"),n=b("./edit_style").styleTextSelection;
D.exports=function(p,k){var a=p.cd,e=[],f=a[0].trace,l=a[0].t,m=f._length,c=l.x,d=l.y,g=l._scene,h=l.index;if(!g)return e;var q=r.hasText(f),t=r.hasMarkers(f);if(!0!==f.visible||!t&&!q)return e;f=[];var v=[];if(!1!==k&&!k.degenerate)for(var w=0;w<m;w++)k.contains([l.xpx[w],l.ypx[w]],!1,w,p)?(f.push(w),e.push({pointNumber:w,x:c[w],y:d[w]})):v.push(w);t&&((p=g.scatter2d,f.length||v.length)?g.selectBatch[h].length||g.unselectBatch[h].length||(k=Array(g.count),k[h]=g.markerUnselectedOptions[h],p.update.apply(p,
k)):(k=Array(g.count),k[h]=g.markerOptions[h],p.update.apply(p,k)));g.selectBatch[h]=f;g.unselectBatch[h]=v;q&&n(a);return e}},{"../scatter/subtypes":1179,"./edit_style":1211}],1219:[function(b,D,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var r=b("../../plots/template_attributes").texttemplateAttrs,n=b("../scattergeo/attributes"),p=b("../scatter/attributes"),k=b("../../plots/mapbox/layout_attributes"),a=b("../../plots/attributes"),e=b("../../components/colorscale/attributes"),f=
b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;var l=n.line,m=n.marker;D.exports=b({lon:n.lon,lat:n.lat,mode:f({},p.mode,{dflt:"markers"}),text:f({},p.text,{}),texttemplate:r({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:f({},p.hovertext,{}),line:{color:l.color,width:l.width},connectgaps:p.connectgaps,marker:f({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:m.opacity,
size:m.size,sizeref:m.sizeref,sizemin:m.sizemin,sizemode:m.sizemode},e("marker")),fill:n.fill,fillcolor:p.fillcolor,textfont:k.layers.symbol.textfont,textposition:k.layers.symbol.textposition,below:{valType:"string"},selected:{marker:p.selected.marker},unselected:{marker:p.unselected.marker},hoverinfo:f({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:G()},"calc","nested")},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,
"../../plots/mapbox/layout_attributes":856,"../../plots/template_attributes":875,"../scatter/attributes":1155,"../scattergeo/attributes":1196}],1220:[function(b,D,G){function r(){return{geojson:l.makeBlank(),layout:{visibility:"none"},paint:{}}}function n(w){var A=w[0].trace,z=A.marker,y=A.selectedpoints,B=e.isArrayOrTypedArray(z.color),C=e.isArrayOrTypedArray(z.size),u=e.isArrayOrTypedArray(z.opacity),F,H;B&&(H=m.hasColorscale(A,"marker")?m.makeColorScaleFuncFromTrace(z):e.identity);var J;C&&(J=
d(A));var I;u&&(I=function(Q){Q=a(Q)?+e.constrain(Q,0,1):0;return A.opacity*Q});var M=[];for(F=0;F<w.length;F++){var E=w[F],L=E.lonlat;if(L[0]!==f){var P={};H&&(P.mcc=E.mcc=H(E.mc));J&&(P.mrc=E.mrc=J(E.ms));I&&(P.mo=I(E.mo));y&&(P.selected=E.selected||0);M.push({type:"Feature",geometry:{type:"Point",coordinates:L},properties:P})}}if(y){var N=c.makeSelectedPointStyleFns(A);for(F=0;F<M.length;F++)w=M[F].properties,N.selectedOpacityFn&&(w.mo=A.opacity*N.selectedOpacityFn(w)),N.selectedColorFn&&(w.mcc=
N.selectedColorFn(w)),N.selectedSizeFn&&(w.mrc=N.selectedSizeFn(w))}return{geojson:{type:"FeatureCollection",features:M},mcc:B||N&&N.selectedColorFn?{type:"identity",property:"mcc"}:z.color,mrc:C||N&&N.selectedSizeFn?{type:"identity",property:"mrc"}:z.size/2,mo:u||N&&N.selectedOpacityFn?{type:"identity",property:"mo"}:A.opacity*z.opacity}}function p(w,A){return e.isArrayOrTypedArray(w)?A?function(z){return a(w[z])?+w[z]:0}:function(z){return w[z]}:w?function(){return w}:k}function k(){return""}var a=
b("fast-isnumeric"),e=b("../../lib"),f=b("../../constants/numerical").BADNUM,l=b("../../lib/geojson_utils"),m=b("../../components/colorscale"),c=b("../../components/drawing"),d=b("../scatter/make_bubble_size_func"),g=b("../scatter/subtypes"),h=b("../../plots/mapbox/convert_text_opts"),q=b("../../components/fx/helpers").appendArrayPointValue,t=b("../../lib/svg_text_utils").NEWLINES,v=b("../../lib/svg_text_utils").BR_TAG_ALL;D.exports=function(w,A){var z=A[0].trace,y=!0===z.visible&&0!==z._length,B=
"none"!==z.fill,C=g.hasLines(z),u=g.hasMarkers(z),F=g.hasText(z),H=u&&"circle"===z.marker.symbol,J=u&&"circle"!==z.marker.symbol,I=r(),M=r(),E=r();u=r();var L={fill:I,line:M,circle:E,symbol:u};if(!y)return L;if(B||C)var P=l.calcTraceToLineCoords(A);B&&(I.geojson=l.makePolygon(P),I.layout.visibility="visible",e.extendFlat(I.paint,{"fill-color":z.fillcolor}));C&&(M.geojson=l.makeLine(P),M.layout.visibility="visible",e.extendFlat(M.paint,{"line-width":z.line.width,"line-color":z.line.color,"line-opacity":z.opacity}));
H&&(y=n(A),E.geojson=y.geojson,E.layout.visibility="visible",e.extendFlat(E.paint,{"circle-color":y.mcc,"circle-radius":y.mrc,"circle-opacity":y.mo}));if(J||F){w=w._fullLayout;y=A[0].trace;C=y.marker||{};B=C.symbol;C=C.angle;B="circle"!==B?p(B):k;C="auto"!==C?p(C,!0):k;H=g.hasText(y)?p(y.text):k;E=[];for(P=0;P<A.length;P++)if(I=A[P],I.lonlat[0]!==f){if(M=y.texttemplate){M=Array.isArray(M)?M[P]||"":M;var N=y._module.formatLabels(I,y,w),Q={};q(Q,y,I.i);M=e.texttemplateString(M,N,w._d3locale,Q,I,y._meta||
{})}else M=H(P);M&&(M=M.replace(t,"").replace(v,"\n"));E.push({type:"Feature",geometry:{type:"Point",coordinates:I.lonlat},properties:{symbol:B(P),angle:C(P),text:M}})}u.geojson={type:"FeatureCollection",features:E};e.extendFlat(u.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"});J&&(e.extendFlat(u.layout,{"icon-size":z.marker.size/10}),"angle"in z.marker&&"auto"!==z.marker.angle&&e.extendFlat(u.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),
u.layout["icon-allow-overlap"]=z.marker.allowoverlap,e.extendFlat(u.paint,{"icon-opacity":z.opacity*z.marker.opacity,"icon-color":z.marker.color}));F&&(A=h(z.textposition,(z.marker||{}).size),e.extendFlat(u.layout,{"text-size":z.textfont.size,"text-anchor":A.anchor,"text-offset":A.offset}),e.extendFlat(u.paint,{"text-color":z.textfont.color,"text-opacity":z.opacity}))}return L}},{"../../components/colorscale":627,"../../components/drawing":637,"../../components/fx/helpers":651,"../../constants/numerical":724,
"../../lib":749,"../../lib/geojson_utils":743,"../../lib/svg_text_utils":773,"../../plots/mapbox/convert_text_opts":853,"../scatter/make_bubble_size_func":1172,"../scatter/subtypes":1179,"fast-isnumeric":241}],1221:[function(b,D,G){function r(m,c,d){m=d("lon")||[];d=d("lat")||[];d=Math.min(m.length,d.length);return c._length=d}var n=b("../../lib"),p=b("../scatter/subtypes"),k=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),e=b("../scatter/text_defaults"),f=b("../scatter/fillcolor_defaults"),
l=b("./attributes");D.exports=function(m,c,d,g){function h(t,v){return n.coerce(m,c,l,t,v)}if(r(m,c,h)){h("text");h("texttemplate");h("hovertext");h("hovertemplate");h("mode");h("below");p.hasLines(c)&&(a(m,c,d,g,h,{noDash:!0}),h("connectgaps"));if(p.hasMarkers(c)){k(m,c,d,g,h,{noLine:!0});h("marker.allowoverlap");h("marker.angle");var q=c.marker;"circle"!==q.symbol&&(n.isArrayOrTypedArray(q.size)&&(q.size=q.size[0]),n.isArrayOrTypedArray(q.color)&&(q.color=q.color[0]))}p.hasText(c)&&e(m,c,g,h,{noSelect:!0});
h("fill");"none"!==c.fill&&f(m,c,d,h);n.coerceSelectionMarkerOpacity(c,h)}else c.visible=!1}},{"../../lib":749,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1219}],1222:[function(b,D,G){D.exports=function(r,n){r.lon=n.lon;r.lat=n.lat;return r}},{}],1223:[function(b,D,G){var r=b("../../plots/cartesian/axes");D.exports=function(n,p,k){var a={};p=k[p.subplot]._subplot.mockAxis;
n=n.lonlat;a.lonLabel=r.tickText(p,p.c2l(n[0]),!0).text;a.latLabel=r.tickText(p,p.c2l(n[1]),!0).text;return a}},{"../../plots/cartesian/axes":797}],1224:[function(b,D,G){function r(f,l,m){if(!f.hovertemplate){var c=(l.hi||f.hoverinfo).split("+"),d=-1!==c.indexOf("all"),g=-1!==c.indexOf("lon"),h=-1!==c.indexOf("lat"),q=l.lonlat,t=[];d||g&&h?t.push("("+(q[0]+"°, ")+(q[1]+"°)")):g?t.push(m.lon+(q[0]+"°")):h&&t.push(m.lat+(q[1]+"°"));(d||-1!==c.indexOf("text"))&&a(l,f,t);return t.join("\x3cbr\x3e")}}
var n=b("../../components/fx"),p=b("../../lib"),k=b("../scatter/get_trace_color"),a=p.fillText,e=b("../../constants/numerical").BADNUM;D.exports=function(f,l,m){var c=f.cd,d=c[0].trace,g=f.xa,h=f.ya,q=f.subplot,t=360*(0<=l?Math.floor((l+180)/360):Math.ceil((l-180)/360)),v=l-t;n.getClosest(c,function(z){var y=z.lonlat;if(y[0]===e)return Infinity;var B=p.modHalf(y[0],360);y=y[1];var C=q.project([B,y]);y=C.x-g.c2p([v,y]);B=C.y-h.c2p([B,m]);z=Math.max(3,z.mrc||0);return Math.max(Math.sqrt(y*y+B*B)-z,
1-3/z)},f);if(!1!==f.index){l=c[f.index];var w=l.lonlat;w=[p.modHalf(w[0],360)+t,w[1]];t=g.c2p(w);w=h.c2p(w);var A=l.mrc||1;f.x0=t-A;f.x1=t+A;f.y0=w-A;f.y1=w+A;t={};t[d.subplot]={_subplot:q};t=d._module.formatLabels(l,d,t);f.lonLabel=t.lonLabel;f.latLabel=t.latLabel;f.color=k(d,l);f.extraText=r(d,l,c[0].t.labels);f.hovertemplate=d.hovertemplate;return[f]}}},{"../../components/fx":655,"../../constants/numerical":724,"../../lib":749,"../scatter/get_trace_color":1165}],1225:[function(b,D,G){D.exports=
{attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("../scattergeo/calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),styleOnSelect:function(r,n){n&&n[0].trace._glTrace.update(n)},moduleType:"trace",name:"scattermapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":854,
"../scatter/marker_colorbar":1173,"../scattergeo/calc":1197,"./attributes":1219,"./defaults":1221,"./event_data":1222,"./format_labels":1223,"./hover":1224,"./plot":1226,"./select":1227}],1226:[function(b,D,G){function r(a,e){this.type="scattermapbox";this.subplot=a;this.uid=e;this.sourceIds={fill:"source-"+e+"-fill",line:"source-"+e+"-line",circle:"source-"+e+"-circle",symbol:"source-"+e+"-symbol"};this.layerIds={fill:p+e+"-fill",line:p+e+"-line",circle:p+e+"-circle",symbol:p+e+"-symbol"};this.below=
null}var n=b("./convert"),p=b("../../plots/mapbox/constants").traceLayerPrefix,k=["fill","line","circle","symbol"];b=r.prototype;b.addSource=function(a,e){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:e.geojson})};b.setSourceData=function(a,e){this.subplot.map.getSource(this.sourceIds[a]).setData(e.geojson)};b.addLayer=function(a,e,f){this.subplot.addLayer({type:a,id:this.layerIds[a],source:this.sourceIds[a],layout:e.layout,paint:e.paint},f)};b.update=function(a){var e=this.subplot,
f=e.map,l=n(e.gd,a),m=e.belowLookup["trace-"+this.uid],c;if(m!==this.below){for(c=k.length-1;0<=c;c--){var d=k[c];f.removeLayer(this.layerIds[d])}for(c=0;c<k.length;c++)d=k[c],f=l[d],this.addLayer(d,f,m);this.below=m}for(c=0;c<k.length;c++)d=k[c],f=l[d],e.setOptions(this.layerIds[d],"setLayoutProperty",f.layout),"visible"===f.layout.visibility&&(this.setSourceData(d,f),e.setOptions(this.layerIds[d],"setPaintProperty",f.paint));a[0].trace._glTrace=this};b.dispose=function(){for(var a=this.subplot.map,
e=k.length-1;0<=e;e--){var f=k[e];a.removeLayer(this.layerIds[f]);a.removeSource(this.sourceIds[f])}};D.exports=function(a,e){var f=e[0].trace,l=new r(a,f.uid),m=n(a.gd,e);a=l.below=a.belowLookup["trace-"+f.uid];for(f=0;f<k.length;f++){var c=k[f],d=m[c];l.addSource(c,d);l.addLayer(c,d,a)}return e[0].trace._glTrace=l}},{"../../plots/mapbox/constants":852,"./convert":1220}],1227:[function(b,D,G){var r=b("../../lib"),n=b("../scatter/subtypes"),p=b("../../constants/numerical").BADNUM;D.exports=function(k,
a){var e=k.cd,f=k.xaxis,l=k.yaxis,m=[],c;if(!n.hasMarkers(e[0].trace))return[];if(!1===a)for(c=0;c<e.length;c++)e[c].selected=0;else for(c=0;c<e.length;c++){var d=e[c],g=d.lonlat;if(g[0]!==p){var h=[r.modHalf(g[0],360),g[1]];h=[f.c2p(h),l.c2p(h)];a.contains(h,null,c,k)?(m.push({pointNumber:c,lon:g[0],lat:g[1]}),d.selected=1):d.selected=0}}return m}},{"../../constants/numerical":724,"../../lib":749,"../scatter/subtypes":1179}],1228:[function(b,D,G){G=b("../../plots/template_attributes").hovertemplateAttrs;
var r=b("../../plots/template_attributes").texttemplateAttrs,n=b("../../lib/extend").extendFlat,p=b("../scatter/attributes");b=b("../../plots/attributes");var k=p.line;D.exports={mode:p.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},
thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:p.text,texttemplate:r({editType:"plot"},{keys:["r","theta","text"]}),hovertext:p.hovertext,line:{color:k.color,width:k.width,dash:k.dash,shape:n({},k.shape,{values:["linear","spline"]}),smoothing:k.smoothing,editType:"calc"},connectgaps:p.connectgaps,marker:p.marker,cliponaxis:n({},p.cliponaxis,{dflt:!1}),textposition:p.textposition,textfont:p.textfont,fill:n({},p.fill,{values:["none",
"toself","tonext"],dflt:"none"}),fillcolor:p.fillcolor,hoverinfo:n({},b.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:p.hoveron,hovertemplate:G(),selected:p.selected,unselected:p.unselected}},{"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1229:[function(b,D,G){var r=b("fast-isnumeric"),n=b("../../constants/numerical").BADNUM,p=b("../../plots/cartesian/axes"),k=b("../scatter/colorscale_calc"),a=b("../scatter/arrays_to_calcdata"),
e=b("../scatter/calc_selection"),f=b("../scatter/calc").calcMarkerSize;D.exports=function(l,m){var c=l._fullLayout,d=m.subplot,g=c[d].radialaxis;d=c[d].angularaxis;c=g.makeCalcdata(m,"r");var h=d.makeCalcdata(m,"theta"),q=m._length;d=Array(q);for(var t=0;t<q;t++){var v=c[t],w=h[t],A=d[t]={};r(v)&&r(w)?(A.r=v,A.theta=w):A.r=n}h=f(m,q);m._extremes.x=p.findExtremes(g,c,{ppad:h});k(l,m);a(d,m);e(d,m);return d}},{"../../constants/numerical":724,"../../plots/cartesian/axes":797,"../scatter/arrays_to_calcdata":1154,
"../scatter/calc":1156,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,"fast-isnumeric":241}],1230:[function(b,D,G){function r(d,g,h,q){d=q("r");h=q("theta");if(d)h?d=Math.min(d.length,h.length):(d=d.length,q("theta0"),q("dtheta"));else{if(!h)return 0;d=g.theta.length;q("r0");q("dr")}return g._length=d}var n=b("../../lib"),p=b("../scatter/subtypes"),k=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),e=b("../scatter/line_shape_defaults"),f=b("../scatter/text_defaults"),
l=b("../scatter/fillcolor_defaults"),m=b("../scatter/constants").PTS_LINESONLY,c=b("./attributes");D.exports={handleRThetaDefaults:r,supplyDefaults:function(d,g,h,q){function t(w,A){return n.coerce(d,g,c,w,A)}var v=r(d,g,q,t);if(v){t("thetaunit");t("mode",v<m?"lines+markers":"lines");t("text");t("hovertext");"fills"!==g.hoveron&&t("hovertemplate");p.hasLines(g)&&(a(d,g,h,q,t),e(d,g,t),t("connectgaps"));p.hasMarkers(g)&&k(d,g,h,q,t,{gradient:!0});p.hasText(g)&&(t("texttemplate"),f(d,g,q,t));q=[];if(p.hasMarkers(g)||
p.hasText(g))t("cliponaxis"),t("marker.maxdisplayed"),q.push("points");t("fill");"none"!==g.fill&&(l(d,g,h,t),p.hasLines(g)||e(d,g,t));"tonext"!==g.fill&&"toself"!==g.fill||q.push("fills");t("hoveron",q.join("+")||"points");n.coerceSelectionMarkerOpacity(g,t)}else g.visible=!1}}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/line_shape_defaults":1170,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,
"./attributes":1228}],1231:[function(b,D,G){var r=b("../../lib"),n=b("../../plots/cartesian/axes");D.exports=function(p,k,a){var e={},f=a[k.subplot]._subplot;f?(k=f.radialAxis,f=f.angularAxis):(f=a[k.subplot],k=f.radialaxis,f=f.angularaxis);a=k.c2l(p.r);e.rLabel=n.tickText(k,a,!0).text;p="degrees"===f.thetaunit?r.rad2deg(p.theta):p.theta;e.thetaLabel=n.tickText(f,p,!0).text;return e}},{"../../lib":749,"../../plots/cartesian/axes":797}],1232:[function(b,D,G){function r(p,k,a,e){var f=a.radialAxis,
l=a.angularAxis;f._hovertitle="r";l._hovertitle="θ";var m={};m[k.subplot]={_subplot:a};a=k._module.formatLabels(p,k,m);e.rLabel=a.rLabel;e.thetaLabel=a.thetaLabel;a=p.hi||k.hoverinfo;p=[];k.hovertemplate||(k=a.split("+"),-1!==k.indexOf("all")&&(k=["r","theta","text"]),-1!==k.indexOf("r")&&p.push(f._hovertitle+": "+e.rLabel),-1!==k.indexOf("theta")&&p.push(l._hovertitle+": "+e.thetaLabel),-1!==k.indexOf("text")&&e.text&&(p.push(e.text),delete e.text),e.extraText=p.join("\x3cbr\x3e"))}var n=b("../scatter/hover");
D.exports={hoverPoints:function(p,k,a,e){if((k=n(p,k,a,e))&&!1!==k[0].index){a=k[0];if(void 0===a.index)return k;p=p.subplot;e=a.cd[a.index];var f=a.trace;if(p.isPtInside(e))return a.xLabelVal=void 0,a.yLabelVal=void 0,r(e,f,p,a),a.hovertemplate=f.hovertemplate,k}},makeHoverPointText:r}},{"../scatter/hover":1166}],1233:[function(b,D,G){D.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:b("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:b("./attributes"),
supplyDefaults:b("./defaults").supplyDefaults,colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scatter/select"),meta:{}}},{"../../plots/polar":863,"../scatter/marker_colorbar":1173,"../scatter/select":1176,"../scatter/style":1178,"./attributes":1228,"./calc":1229,"./defaults":1230,"./format_labels":1231,
"./hover":1232,"./plot":1234}],1234:[function(b,D,G){var r=b("../scatter/plot"),n=b("../../constants/numerical").BADNUM;D.exports=function(p,k,a){var e=k.layers.frontplot.select("g.scatterlayer"),f={xaxis:k.xaxis,yaxis:k.yaxis,plot:k.framework,layerClipId:k._hasClipOnAxisFalse?k.clipIds.forTraces:null},l=k.radialAxis;k=k.angularAxis;for(var m=0;m<a.length;m++)for(var c=a[m],d=0;d<c.length;d++){var g=c[d],h=g.r;if(h===n)g.x=g.y=n;else{h=l.c2g(h);var q=k.c2g(g.theta);g.x=h*Math.cos(q);g.y=h*Math.sin(q)}}r(p,
f,a,e)}},{"../../constants/numerical":724,"../scatter/plot":1175}],1235:[function(b,D,G){G=b("../scatterpolar/attributes");var r=b("../scattergl/attributes");b=b("../../plots/template_attributes").texttemplateAttrs;D.exports={mode:G.mode,r:G.r,theta:G.theta,r0:G.r0,dr:G.dr,theta0:G.theta0,dtheta:G.dtheta,thetaunit:G.thetaunit,text:G.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:G.hovertext,hovertemplate:G.hovertemplate,line:r.line,connectgaps:r.connectgaps,marker:r.marker,
fill:r.fill,fillcolor:r.fillcolor,textposition:r.textposition,textfont:r.textfont,hoverinfo:G.hoverinfo,selected:G.selected,unselected:G.unselected}},{"../../plots/template_attributes":875,"../scattergl/attributes":1206,"../scatterpolar/attributes":1228}],1236:[function(b,D,G){var r=b("../scatter/colorscale_calc"),n=b("../scatter/calc").calcMarkerSize,p=b("../scattergl/convert"),k=b("../../plots/cartesian/axes"),a=b("../scattergl/constants").TOO_MANY_POINTS;D.exports=function(e,f){var l=e._fullLayout,
m=f.subplot,c=l[m].radialaxis;m=l[m].angularaxis;l=f._r=c.makeCalcdata(f,"r");var d=f._theta=m.makeCalcdata(f,"theta");m=f._length;var g={};m<l.length&&(l=l.slice(0,m));m<d.length&&(d=d.slice(0,m));g.r=l;g.theta=d;r(e,f);e=g.opts=p.style(e,f);var h;m<a?h=n(f,m):e.marker&&(h=2*(e.marker.sizeAvg||Math.max(e.marker.size,3)));f._extremes.x=k.findExtremes(c,l,{ppad:h});return[{x:!1,y:!1,t:g,trace:f}]}},{"../../plots/cartesian/axes":797,"../scatter/calc":1156,"../scatter/colorscale_calc":1158,"../scattergl/constants":1208,
"../scattergl/convert":1209}],1237:[function(b,D,G){var r=b("../../lib"),n=b("../scatter/subtypes"),p=b("../scatterpolar/defaults").handleRThetaDefaults,k=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),e=b("../scatter/text_defaults"),f=b("../scatter/fillcolor_defaults"),l=b("../scatter/constants").PTS_LINESONLY,m=b("./attributes");D.exports=function(c,d,g,h){function q(v,w){return r.coerce(c,d,m,v,w)}var t=p(c,d,h,q);t?(q("thetaunit"),q("mode",t<l?"lines+markers":"lines"),q("text"),
q("hovertext"),"fills"!==d.hoveron&&q("hovertemplate"),n.hasLines(d)&&(a(c,d,g,h,q),q("connectgaps")),n.hasMarkers(d)&&k(c,d,g,h,q),n.hasText(d)&&(q("texttemplate"),e(c,d,h,q)),q("fill"),"none"!==d.fill&&f(c,d,g,q),r.coerceSelectionMarkerOpacity(d,q)):d.visible=!1}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"../scatterpolar/defaults":1230,
"./attributes":1235}],1238:[function(b,D,G){var r=b("../scatterpolar/format_labels");D.exports=function(n,p,k){var a=n.i;"r"in n||(n.r=p._r[a]);"theta"in n||(n.theta=p._theta[a]);return r(n,p,k)}},{"../scatterpolar/format_labels":1231}],1239:[function(b,D,G){var r=b("../scattergl/hover"),n=b("../scatterpolar/hover").makeHoverPointText;D.exports={hoverPoints:function(p,k,a,e){var f=p.cd[0].t,l=f.r;f=f.theta;if((k=r.hoverPoints(p,k,a,e))&&!1!==k[0].index){a=k[0];if(void 0===a.index)return k;p=p.subplot;
e=a.cd[a.index];var m=a.trace;e.r=l[a.index];e.theta=f[a.index];if(p.isPtInside(e))return a.xLabelVal=void 0,a.yLabelVal=void 0,n(e,m,p,a),k}}}},{"../scattergl/hover":1214,"../scatterpolar/hover":1232}],1240:[function(b,D,G){D.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:b("../../plots/polar"),categories:"gl regl polar symbols showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),
calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scattergl/select"),meta:{}}},{"../../plots/polar":863,"../scatter/marker_colorbar":1173,"../scattergl/select":1218,"./attributes":1235,"./calc":1236,"./defaults":1237,"./format_labels":1238,"./hover":1239,"./plot":1241}],1241:[function(b,D,G){var r=b("@plotly/point-cluster"),n=b("fast-isnumeric"),p=b("../scattergl/plot"),k=b("../scattergl/scene_update"),a=b("../scattergl/convert"),e=b("../../lib"),f=b("../scattergl/constants").TOO_MANY_POINTS;
D.exports=function(l,m,c){if(c.length){var d=m.radialAxis,g=m.angularAxis,h=k(l,m);c.forEach(function(q){if(q&&q[0]&&q[0].trace){var t=q[0];q=t.trace;t=t.t;var v=q._length,w=t.r,A=t.theta,z=t.opts,y,B=w.slice(),C=A.slice();for(y=0;y<w.length;y++)m.isPtInside({r:w[y],theta:A[y]})||(B[y]=NaN,C[y]=NaN);var u=Array(2*v),F=Array(v),H=Array(v);for(y=0;y<v;y++){var J=B[y];if(n(J)){var I=d.c2g(J);var M=g.c2g(C[y],q.thetaunit);J=I*Math.cos(M);I*=Math.sin(M)}else J=I=NaN;F[y]=u[2*y]=J;H[y]=u[2*y+1]=I}t.tree=
r(u);z.marker&&v>=f&&(z.marker.cluster=t.tree);z.marker&&(z.markerSel.positions=z.markerUnsel.positions=z.marker.positions=u);z.line&&1<u.length&&e.extendFlat(z.line,a.linePositions(l,q,u));z.text&&(e.extendFlat(z.text,{positions:u},a.textPosition(l,q,z.text,z.marker)),e.extendFlat(z.textSel,{positions:u},a.textPosition(l,q,z.text,z.markerSel)),e.extendFlat(z.textUnsel,{positions:u},a.textPosition(l,q,z.text,z.markerUnsel)));z.fill&&!h.fill2d&&(h.fill2d=!0);z.marker&&!h.scatter2d&&(h.scatter2d=!0);
z.line&&!h.line2d&&(h.line2d=!0);z.text&&!h.glText&&(h.glText=!0);h.lineOptions.push(z.line);h.fillOptions.push(z.fill);h.markerOptions.push(z.marker);h.markerSelectedOptions.push(z.markerSel);h.markerUnselectedOptions.push(z.markerUnsel);h.textOptions.push(z.text);h.textSelectedOptions.push(z.textSel);h.textUnselectedOptions.push(z.textUnsel);h.selectBatch.push([]);h.unselectBatch.push([]);t.x=F;t.y=H;t.rawx=F;t.rawy=H;t.r=w;t.theta=A;t.positions=u;t._scene=h;t.index=h.count;h.count++}});return p(l,
m,c)}}},{"../../lib":749,"../scattergl/constants":1208,"../scattergl/convert":1209,"../scattergl/plot":1216,"../scattergl/scene_update":1217,"@plotly/point-cluster":57,"fast-isnumeric":241}],1242:[function(b,D,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var r=b("../../plots/template_attributes").texttemplateAttrs,n=b("../scatter/attributes"),p=b("../../plots/attributes"),k=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash;b=b("../../lib/extend").extendFlat;
var e=n.marker,f=n.line,l=e.line;D.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:b({},n.mode,{dflt:"markers"}),text:b({},n.text,{}),texttemplate:r({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:b({},n.hovertext,{}),line:{color:f.color,width:f.width,dash:a,shape:b({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing,editType:"calc"},connectgaps:n.connectgaps,
cliponaxis:n.cliponaxis,fill:b({},n.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:n.fillcolor,marker:b({symbol:e.symbol,opacity:e.opacity,maxdisplayed:e.maxdisplayed,size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,line:b({width:l.width,editType:"calc"},k("marker.line")),gradient:e.gradient,editType:"calc"},k("marker")),textfont:n.textfont,textposition:n.textposition,selected:n.selected,unselected:n.unselected,hoverinfo:b({},p.hoverinfo,{flags:["a","b","c","text",
"name"]}),hoveron:n.hoveron,hovertemplate:G()}},{"../../components/colorscale/attributes":622,"../../components/drawing/attributes":636,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../scatter/attributes":1155}],1243:[function(b,D,G){var r=b("fast-isnumeric"),n=b("../scatter/colorscale_calc"),p=b("../scatter/arrays_to_calcdata"),k=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize,e=["a","b","c"],f={a:["b","c"],b:["a","c"],c:["a","b"]};
D.exports=function(l,m){var c=l._fullLayout[m.subplot].sum,d=m.sum||c,g={a:m.a,b:m.b,c:m.c},h,q;for(h=0;h<e.length;h++){var t=e[h];if(!g[t]){var v=g[f[t][0]];var w=g[f[t][1]];var A=Array(v.length);for(q=0;q<v.length;q++)A[q]=d-v[q]-w[q];g[t]=A}}d=m._length;q=Array(d);for(h=0;h<d;h++)if(t=g.a[h],A=g.b[h],v=g.c[h],r(t)&&r(A)&&r(v)){t=+t;A=+A;v=+v;w=c/(t+A+v);1!==w&&(t*=w,A*=w,v*=w);var z=t;w=v-A;q[h]={x:w,y:z,a:t,b:A,c:v}}else q[h]={x:!1,y:!1};a(m,d);n(l,m);p(q,m);k(q,m);return q}},{"../scatter/arrays_to_calcdata":1154,
"../scatter/calc":1156,"../scatter/calc_selection":1157,"../scatter/colorscale_calc":1158,"fast-isnumeric":241}],1244:[function(b,D,G){var r=b("../../lib"),n=b("../scatter/constants"),p=b("../scatter/subtypes"),k=b("../scatter/marker_defaults"),a=b("../scatter/line_defaults"),e=b("../scatter/line_shape_defaults"),f=b("../scatter/text_defaults"),l=b("../scatter/fillcolor_defaults"),m=b("./attributes");D.exports=function(c,d,g,h){function q(z,y){return r.coerce(c,d,m,z,y)}var t=q("a"),v=q("b"),w=q("c");
if(t){var A=t.length;v?(A=Math.min(A,v.length),w&&(A=Math.min(A,w.length))):A=w?Math.min(A,w.length):0}else v&&w&&(A=Math.min(v.length,w.length));if(A){d._length=A;q("sum");q("text");q("hovertext");"fills"!==d.hoveron&&q("hovertemplate");q("mode",A<n.PTS_LINESONLY?"lines+markers":"lines");p.hasLines(d)&&(a(c,d,g,h,q),e(c,d,q),q("connectgaps"));p.hasMarkers(d)&&k(c,d,g,h,q,{gradient:!0});p.hasText(d)&&(q("texttemplate"),f(c,d,h,q));h=[];if(p.hasMarkers(d)||p.hasText(d))q("cliponaxis"),q("marker.maxdisplayed"),
h.push("points");q("fill");"none"!==d.fill&&(l(c,d,g,q),p.hasLines(d)||e(c,d,q));"tonext"!==d.fill&&"toself"!==d.fill||h.push("fills");q("hoveron",h.join("+")||"points");r.coerceSelectionMarkerOpacity(d,q)}else d.visible=!1}},{"../../lib":749,"../scatter/constants":1159,"../scatter/fillcolor_defaults":1163,"../scatter/line_defaults":1168,"../scatter/line_shape_defaults":1170,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scatter/text_defaults":1180,"./attributes":1242}],1245:[function(b,
D,G){D.exports=function(r,n,p,k,a){n.xa&&(r.xaxis=n.xa);n.ya&&(r.yaxis=n.ya);k[a]?(n=k[a],r.a=n.a,r.b=n.b,r.c=n.c):(r.a=n.a,r.b=n.b,r.c=n.c);return r}},{}],1246:[function(b,D,G){var r=b("../../plots/cartesian/axes");D.exports=function(n,p,k){var a={};p=k[p.subplot]._subplot;a.aLabel=r.tickText(p.aaxis,n.a,!0).text;a.bLabel=r.tickText(p.baxis,n.b,!0).text;a.cLabel=r.tickText(p.caxis,n.c,!0).text;return a}},{"../../plots/cartesian/axes":797}],1247:[function(b,D,G){var r=b("../scatter/hover");D.exports=
function(n,p,k,a){if((p=r(n,p,k,a))&&!1!==p[0].index){k=p[0];if(void 0===k.index)return a=n.xa._length,n=a*(1-k.y0/n.ya._length)/2,a-=n,k.x0=Math.max(Math.min(k.x0,a),n),k.x1=Math.max(Math.min(k.x1,a),n),p;var e=k.cd[k.index];n=k.trace;a=k.subplot;k.a=e.a;k.b=e.b;k.c=e.c;k.xLabelVal=void 0;k.yLabelVal=void 0;var f={};f[n.subplot]={_subplot:a};f=n._module.formatLabels(e,n,f);k.aLabel=f.aLabel;k.bLabel=f.bLabel;k.cLabel=f.cLabel;f=e.hi||n.hoverinfo;e=[];n.hovertemplate||(f=f.split("+"),-1!==f.indexOf("all")&&
(f=["a","b","c"]),-1!==f.indexOf("a")&&e.push(a.aaxis._hovertitle+": "+k.aLabel),-1!==f.indexOf("b")&&e.push(a.baxis._hovertitle+": "+k.bLabel),-1!==f.indexOf("c")&&e.push(a.caxis._hovertitle+": "+k.cLabel));k.extraText=e.join("\x3cbr\x3e");k.hovertemplate=n.hovertemplate;return p}}},{"../scatter/hover":1166}],1248:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),
style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:b("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":876,"../scatter/marker_colorbar":1173,"../scatter/select":1176,"../scatter/style":1178,"./attributes":1242,"./calc":1243,"./defaults":1244,"./event_data":1245,
"./format_labels":1246,"./hover":1247,"./plot":1249}],1249:[function(b,D,G){var r=b("../scatter/plot");D.exports=function(n,p,k){var a=p.plotContainer;a.select(".scatterlayer").selectAll("*").remove();a={xaxis:p.xaxis,yaxis:p.yaxis,plot:a,layerClipId:p._hasClipOnAxisFalse?p.clipIdRelative:null};p=p.layers.frontplot.select("g.scatterlayer");r(n,a,k,p)}},{"../scatter/plot":1175}],1250:[function(b,D,G){function r(l){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",
regex:a[l],editType:"plot"}}}var n=b("../scatter/attributes"),p=b("../../components/colorscale/attributes");G=b("../../plots/template_attributes").hovertemplateAttrs;var k=b("../scattergl/attributes"),a=b("../../plots/cartesian/constants").idRegex,e=b("../../plot_api/plot_template").templatedArray;b=b("../../lib/extend").extendFlat;n=n.marker;var f=n.line;f=b(p("marker.line",{editTypeOverride:"calc"}),{width:b({},f.width,{editType:"calc"}),editType:"calc"});p=b(p("marker"),{symbol:n.symbol,size:b({},
n.size,{editType:"markerSize"}),sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:f,editType:"calc"});p.color.editType=p.cmin.editType=p.cmax.editType="style";D.exports={dimensions:e("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},
matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:b({},k.text,{}),hovertext:b({},k.hovertext,{}),hovertemplate:G(),marker:p,xaxes:r("x"),yaxes:r("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:k.selected.marker,editType:"calc"},unselected:{marker:k.unselected.marker,
editType:"calc"},opacity:k.opacity}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/plot_template":787,"../../plots/cartesian/constants":803,"../../plots/template_attributes":875,"../scatter/attributes":1155,"../scattergl/attributes":1206}],1251:[function(b,D,G){function r(c){var d=c._fullLayout,g=d._glcanvas.data()[0].regl,h=d._splomGrid;h||(h=d._splomGrid=p(g));h.update(n(c))}function n(c){function d(H,J,I,M,E,L){var P=J[H+"color"];H=J[H+"width"];J=String(P+
H);J in t?t[J].data.push(NaN,NaN,I,M,E,L):t[J]={data:[I,M,E,L],join:"rect",thickness:H,color:P,viewport:q,range:q,overlay:!1}}var g=c._fullLayout,h=g._size,q=[0,0,g.width,g.height],t={},v;for(v in g._splomSubplots){var w=g._plots[v],A=w.xaxis;w=w.yaxis;var z=A._gridVals,y=w._gridVals,B=h.b+w.domain[0]*h.h,C=-w._m,u=-C*w.r2l(w.range[0],w.calendar);if(A.showgrid)for(v=0;v<z.length;v++){var F=A._offset+A.l2p(z[v].x);d("grid",A,F,B,F,B+w._length)}if(w.showgrid)for(v=0;v<y.length;v++)z=B+u+C*y[v].x,d("grid",
w,A._offset,z,A._offset+A._length,z);m(c,A,w)&&(F=A._offset+A.l2p(0),d("zeroline",A,F,B,F,B+w._length));m(c,w,A)&&(z=B+u+0,d("zeroline",w,A._offset,z,A._offset+A._length,z))}c=[];for(v in t)c.push(t[v]);return c}var p=b("regl-line2d"),k=b("../../registry"),a=b("../../lib/prepare_regl"),e=b("../../plots/get_data").getModuleCalcData,f=b("../../plots/cartesian"),l=b("../../plots/cartesian/axis_ids").getFromId,m=b("../../plots/cartesian/axes").shouldShowZeroLine;D.exports={name:"splom",attr:f.attr,attrRegex:f.attrRegex,
layoutAttributes:f.layoutAttributes,supplyLayoutDefaults:f.supplyLayoutDefaults,drawFramework:f.drawFramework,plot:function(c){var d=c._fullLayout,g=k.getModule("splom"),h=e(c.calcdata,g)[0];a(c,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(d._hasOnlyLargeSploms&&r(c),g.plot(c,{},h))},drag:function(c){var d=c.calcdata,g=c._fullLayout;g._hasOnlyLargeSploms&&r(c);for(var h=0;h<d.length;h++){var q=d[h][0].trace,t=g._splomScenes[q.uid];if("splom"===q.type&&t&&t.matrix){for(var v=c,w=q._visibleDims,
A=t.viewOpts.ranges=Array(t.matrixOptions.data.length),z=0;z<w.length;z++){var y=w[z],B=A[z]=Array(4),C=l(v,q._diag[y][0]);C&&(B[0]=C.r2l(C.range[0]),B[2]=C.r2l(C.range[1]));if(y=l(v,q._diag[y][1]))B[1]=y.r2l(y.range[0]),B[3]=y.r2l(y.range[1])}t.selectBatch.length||t.unselectBatch.length?t.matrix.update({ranges:A},{ranges:A}):t.matrix.update({ranges:A})}}},updateGrid:r,clean:function(c,d,g,h){var q={},t;if(h._splomScenes){for(t=0;t<c.length;t++){var v=c[t];"splom"===v.type&&(q[v.uid]=1)}for(t=0;t<
g.length;t++)if(v=g[t],!q[v.uid]){var w=h._splomScenes[v.uid];w&&w.destroy&&w.destroy();h._splomScenes[v.uid]=null;delete h._splomScenes[v.uid]}}0===Object.keys(h._splomScenes||{}).length&&delete h._splomScenes;h._splomGrid&&!d._hasOnlyLargeSploms&&h._hasOnlyLargeSploms&&(h._splomGrid.destroy(),h._splomGrid=null,delete h._splomGrid);f.clean(c,d,g,h)},updateFx:f.updateFx,toSVG:f.toSVG}},{"../../lib/prepare_regl":762,"../../plots/cartesian":810,"../../plots/cartesian/axes":797,"../../plots/cartesian/axis_ids":800,
"../../plots/get_data":834,"../../registry":880,"regl-line2d":509}],1252:[function(b,D,G){var r=b("../../lib"),n=b("../../plots/cartesian/axis_ids"),p=b("../scatter/calc").calcMarkerSize,k=b("../scatter/calc").calcAxisExpansion,a=b("../scatter/colorscale_calc"),e=b("../scattergl/convert").markerSelection,f=b("../scattergl/convert").markerStyle,l=b("./scene_update"),m=b("../../constants/numerical").BADNUM,c=b("../scattergl/constants").TOO_MANY_POINTS;D.exports=function(d,g){function h(H,J){J=H.makeCalcdata({v:J.values,
vcalendar:g.calendar},"v");for(var I=0;I<J.length;I++)J[I]=J[I]===m?NaN:J[I];w.push(J);A.push("log"===H.type?r.simpleMap(J,H.c2l):J)}var q=g.dimensions,t=g._length,v={},w=v.cdata=[],A=v.data=[],z=g._visibleDims=[],y;for(y=0;y<q.length;y++){var B=q[y];if(B.visible){var C=n.getFromId(d,g._diag[y][0]);var u=n.getFromId(d,g._diag[y][1]);C&&u&&C.type!==u.type?r.log("Skipping splom dimension "+y+" with conflicting axis types"):(C?(h(C,B),u&&"category"===u.type&&(u._categories=C._categories.slice())):h(u,
B),z.push(y))}}a(d,g);r.extendFlat(v,f(g));var F=w.length*t>c?2*(v.sizeAvg||Math.max(v.size,3)):p(g,t);for(t=0;t<z.length;t++)y=z[t],B=q[y],C=n.getFromId(d,g._diag[y][0])||{},u=n.getFromId(d,g._diag[y][1])||{},k(d,g,C,u,w[t],w[t],F);d=l(d,g);d.matrix||(d.matrix=!0);d.matrixOptions=v;d.selectedOptions=e(g,g.selected);d.unselectedOptions=e(g,g.unselected);return[{x:!1,y:!1,t:{},trace:g}]}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axis_ids":800,"../scatter/calc":1156,"../scatter/colorscale_calc":1158,
"../scattergl/constants":1208,"../scattergl/convert":1209,"./scene_update":1259}],1253:[function(b,D,G){function r(c,d){function g(q,t){return p.coerce(c,d,a.dimensions,q,t)}g("label");var h=g("values");h&&h.length?g("visible"):d.visible=!1;g("axis.type");g("axis.matches")}function n(c,d,g,h){function q(L,P,N,Q){if(L){var O=L.charAt(0),T=g._splomAxes[O];d["_"+O+"axes"][L]=1;Q.push(L);L in T||(L=T[L]={},N&&(L.label=N.label||"",N.visible&&N.axis&&(N.axis.type&&(L.type=N.axis.type),N.axis.matches&&(L.matches=
P))))}}var t=d.dimensions,v=t.length;c=d.showupperhalf;var w=d.showlowerhalf,A=d.diagonal.visible,z,y=Array(v),B=Array(v);for(z=0;z<v;z++){var C=z?z+1:"";y[z]="x"+C;B[z]="y"+C}y=h("xaxes",y);C=h("yaxes",B);var u=d._diag=Array(v);d._xaxes={};d._yaxes={};h=[];B=[];var F=!A&&!w,H=!A&&!c;d._axesDim={};for(z=0;z<v;z++){var J=t[z],I=0===z,M=z===v-1,E=I&&F||M&&H?void 0:y[z];I=I&&H||M&&F?void 0:C[z];q(E,I,J,h);q(I,E,J,B);u[z]=[E,I];d._axesDim[E]=z;d._axesDim[I]=z}for(z=0;z<h.length;z++)for(t=0;t<B.length;t++)v=
h[z]+B[t],z>t&&c?g._splomSubplots[v]=1:z<t&&w?g._splomSubplots[v]=1:z!==t||!A&&w&&c||(g._splomSubplots[v]=1);if(!w||!A&&c&&w)g._splomGridDflt.xside="bottom",g._splomGridDflt.yside="left"}var p=b("../../lib"),k=b("../../plots/array_container_defaults"),a=b("./attributes"),e=b("../scatter/subtypes"),f=b("../scatter/marker_defaults"),l=b("../parcoords/merge_length"),m=b("../scattergl/helpers").isOpenSymbol;D.exports=function(c,d,g,h){function q(z,y){return p.coerce(c,d,a,z,y)}var t=k(c,d,{name:"dimensions",
handleItemDefaults:r}),v=q("diagonal.visible"),w=q("showupperhalf"),A=q("showlowerhalf");l(d,t,"values")&&(v||w||A)?(q("text"),q("hovertext"),q("hovertemplate"),f(c,d,g,h,q),g=m(d.marker.symbol),t=e.isBubble(d),q("marker.line.width",g||t?1:0),n(c,d,h,q),p.coerceSelectionMarkerOpacity(d,q)):d.visible=!1}},{"../../lib":749,"../../plots/array_container_defaults":793,"../parcoords/merge_length":1126,"../scatter/marker_defaults":1174,"../scatter/subtypes":1179,"../scattergl/helpers":1213,"./attributes":1250}],
1254:[function(b,D,G){var r=b("../../lib"),n=b("../scatter/colorscale_calc"),p=b("../scattergl/convert").markerStyle;D.exports=function(k,a){var e=a.trace;if(a=k._fullLayout._splomScenes[e.uid])n(k,e),r.extendFlat(a.matrixOptions,p(e)),k=r.extendFlat({},a.matrixOptions,a.viewOpts),a.matrix.update(k,null)}},{"../../lib":749,"../scatter/colorscale_calc":1158,"../scattergl/convert":1209}],1255:[function(b,D,G){G.getDimIndex=function(r,n){n=n._id;for(var p={x:0,y:1}[n.charAt(0)],k=r._visibleDims,a=0;a<
k.length;a++)if(r._diag[k[a]][p]===n)return a;return!1}},{}],1256:[function(b,D,G){var r=b("./helpers"),n=b("../scattergl/hover").calcHover;D.exports={hoverPoints:function(p,k,a){var e=p.cd[0].trace,f=p.scene.matrixOptions.cdata,l=p.xa,m=p.ya;k=l.c2p(k);a=m.c2p(a);var c=p.distance,d=r.getDimIndex(e,l),g=r.getDimIndex(e,m);if(!1===d||!1===g)return[p];d=f[d];f=f[g];var h;for(g=0;g<d.length;g++){var q=f[g],t=l.c2p(d[g])-k;q=m.c2p(q)-a;t=Math.sqrt(t*t+q*q);if(t<c){c=h=t;var v=g}}p.index=v;p.distance=
c;p.dxy=h;return void 0===v?[p]:[n(p,d,f,e)]}}},{"../scattergl/hover":1214,"./helpers":1255}],1257:[function(b,D,G){G=b("../../registry");var r=b("../../components/grid");D.exports={moduleType:"trace",name:"splom",basePlotModule:b("./base_plot"),categories:"gl regl cartesian symbols showLegend scatter-like".split(" "),attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select"),
editStyle:b("./edit_style"),meta:{}};G.register(r)},{"../../components/grid":659,"../../registry":880,"../scatter/marker_colorbar":1173,"./attributes":1250,"./base_plot":1251,"./calc":1252,"./defaults":1253,"./edit_style":1254,"./hover":1256,"./plot":1258,"./select":1260}],1258:[function(b,D,G){var r=b("regl-splom"),n=b("../../lib"),p=b("../../plots/cartesian/axis_ids"),k=b("../../components/dragelement/helpers").selectMode;D.exports=function(a,e,f){if(f.length)for(e=0;e<f.length;e++){var l,m,c=a,
d=f[e][0],g=c._fullLayout,h=g._size,q=d.trace;var t=d.t;d=g._splomScenes[q.uid];var v=d.matrixOptions,w=v.cdata,A=g._glcanvas.data()[0].regl,z=g.dragmode;if(0!==w.length){v.lower=q.showupperhalf;v.upper=q.showlowerhalf;v.diagonal=q.diagonal.visible;var y=q._visibleDims,B=w.length,C=d.viewOpts={};C.ranges=Array(B);C.domains=Array(B);for(l=0;l<y.length;l++){var u=y[l];var F=C.ranges[l]=Array(4),H=C.domains[l]=Array(4);if(m=p.getFromId(c,q._diag[u][0]))F[0]=m._rl[0],F[2]=m._rl[1],H[0]=m.domain[0],H[2]=
m.domain[1];if(u=p.getFromId(c,q._diag[u][1]))F[1]=u._rl[0],F[3]=u._rl[1],H[1]=u.domain[0],H[3]=u.domain[1]}C.viewport=[h.l,h.b,h.w+h.l,h.h+h.b];!0===d.matrix&&(d.matrix=r(A));u=-1<g.clickmode.indexOf("select");g=!0;if(k(z)||q.selectedpoints||u){z=q._length;if(q.selectedpoints){m=d.selectBatch=q.selectedpoints;l={};for(u=0;u<m.length;u++)l[m[u]]=!0;m=[];for(u=0;u<z;u++)l[u]||m.push(u);d.unselectBatch=m}h=t.xpx=Array(B);B=t.ypx=Array(B);for(l=0;l<y.length;l++){u=y[l];if(m=p.getFromId(c,q._diag[u][0]))for(h[l]=
Array(z),t=0;t<z;t++)h[l][t]=m.c2p(w[l][t]);if(u=p.getFromId(c,q._diag[u][1]))for(B[l]=Array(z),t=0;t<z;t++)B[l][t]=u.c2p(w[l][t])}if(d.selectBatch.length||d.unselectBatch.length)c=n.extendFlat({},v,d.unselectedOptions,C),q=n.extendFlat({},v,d.selectedOptions,C),d.matrix.update(c,q),g=!1}else t.xpx=t.ypx=null;g&&(v=n.extendFlat({},v,C),d.matrix.update(v,null))}}}},{"../../components/dragelement/helpers":633,"../../lib":749,"../../plots/cartesian/axis_ids":800,"regl-splom":511}],1259:[function(b,D,
G){var r=b("../../lib");D.exports=function(n,p){var k=n._fullLayout;n=p.uid;var a=k._splomScenes;a||(a=k._splomScenes={});k={dirty:!0,selectBatch:[],unselectBatch:[]};var e={matrix:!1,selectBatch:[],unselectBatch:[]},f=a[p.uid];f||(f=a[n]=r.extendFlat({},k,e),f.draw=function(){f.matrix&&f.matrix.draw&&(f.selectBatch.length||f.unselectBatch.length?f.matrix.draw(f.unselectBatch,f.selectBatch):f.matrix.draw());f.dirty=!1},f.destroy=function(){f.matrix&&f.matrix.destroy&&f.matrix.destroy();f.matrixOptions=
null;f.selectBatch=null;f=f.unselectBatch=null});f.dirty||r.extendFlat(f,k);return f}},{"../../lib":749}],1260:[function(b,D,G){var r=b("../../lib"),n=b("../scatter/subtypes"),p=b("./helpers");D.exports=function(k,a){var e=k.cd,f=e[0].trace,l=e[0].t;e=k.scene;var m=e.matrixOptions.cdata,c=k.xaxis,d=k.yaxis,g=[];if(!e)return g;var h=!n.hasMarkers(f)&&!n.hasText(f);if(!0!==f.visible||h)return g;c=p.getDimIndex(f,c);d=p.getDimIndex(f,d);if(!1===c||!1===d)return g;f=l.xpx[c];l=l.ypx[d];c=m[c];h=m[d];
m=[];d=[];if(!1!==a&&!a.degenerate)for(var q=0;q<c.length;q++)a.contains([f[q],l[q]],null,q,k)?(m.push(q),g.push({pointNumber:q,x:c[q],y:h[q]})):d.push(q);k=e.matrixOptions;m.length||d.length?e.selectBatch.length||e.unselectBatch.length||e.matrix.update(e.unselectedOptions,r.extendFlat({},k,e.selectedOptions,e.viewOpts)):e.matrix.update(k,null);e.selectBatch=m;e.unselectBatch=d;return g}},{"../../lib":749,"../scatter/subtypes":1179,"./helpers":1255}],1261:[function(b,D,G){G=b("../../components/colorscale/attributes");
var r=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../mesh3d/attributes"),p=b("../../plots/attributes");b=b("../../lib/extend").extendFlat;var k={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},
y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1E3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:r({editType:"calc"},{keys:"tubex tubey tubez tubeu tubev tubew norm divergence".split(" ")}),showlegend:b({},p.showlegend,{dflt:!1})};b(k,G("",{colorAttr:"u/v/w norm",
showScaleDflt:!0,editTypeOverride:"calc"}));["opacity","lightposition","lighting"].forEach(function(a){k[a]=n[a]});k.hoverinfo=b({},p.hoverinfo,{editType:"calc",flags:"x y z u v w norm divergence text name".split(" "),dflt:"x+y+z+norm+text+name"});k.transforms=void 0;D.exports=k},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../mesh3d/attributes":1096}],1262:[function(b,D,G){function r(a){var e=a._x,f=a._y,
l=a._z,m=a._len,c,d,g=-Infinity,h=Infinity,q=-Infinity,t=Infinity,v=-Infinity,w=Infinity,A="";if(m){var z=e[0];var y=f[0];var B=l[0]}if(1<m){var C=e[m-1];var u=f[m-1];var F=l[m-1]}for(c=0;c<m;c++){g=Math.max(g,e[c]);h=Math.min(h,e[c]);q=Math.max(q,f[c]);t=Math.min(t,f[c]);v=Math.max(v,l[c]);w=Math.min(w,l[c]);if(!H&&e[c]!==z){var H=!0;A+="x"}if(!J&&f[c]!==y){var J=!0;A+="y"}if(!I&&l[c]!==B){var I=!0;A+="z"}}H||(A+="x");J||(A+="y");I||(A+="z");var M=p.distinctVals(a._x).vals,E=p.distinctVals(a._y).vals,
L=p.distinctVals(a._z).vals;A=A.replace("x",(z>C?"-":"+")+"x");A=A.replace("y",(y>u?"-":"+")+"y");A=A.replace("z",(B>F?"-":"+")+"z");if(!m||m<M.length*E.length*L.length)m=0,M=[],E=[],L=[];c=function(T){return"x"===T?e:"y"===T?f:l};C=function(T){return"x"===T?M:"y"===T?E:L};F=function(T){return T[m-1]<T[0]?-1:1};a=c(A[1]);H=c(A[3]);J=c(A[5]);I=C(A[1]).length;z=C(A[3]).length;C=C(A[5]).length;y=!1;u=F(c(A[1]));B=F(c(A[3]));var P=F(c(A[5]));for(c=0;c<C-1;c++){for(F=0;F<z-1;F++){for(d=0;d<I-1;d++){var N=
I*(z*c+F)+d,Q=I*(z*c+(F+1))+d,O=I*(z*(c+1)+F)+d;a[N]*u<a[I*(z*c+F)+(d+1)]*u&&H[N]*B<H[Q]*B&&J[N]*P<J[O]*P||(y=!0);if(y)break}if(y)break}if(y)break}y&&(p.warn("Encountered arbitrary coordinates! Unable to input data grid."),m=0,M=[],E=[],L=[]);return{xMin:h,yMin:t,zMin:w,xMax:g,yMax:q,zMax:v,Xs:M,Ys:E,Zs:L,len:m,fill:A}}function n(a,e){void 0===e&&(e=a.length);if(p.isTypedArray(a))return a.subarray(0,e);for(var f=[],l=0;l<e;l++)f[l]=+a[l];return f}var p=b("../../lib"),k=b("../../components/colorscale/calc");
D.exports={calc:function(a,e){e._len=Math.min(e.u.length,e.v.length,e.w.length,e.x.length,e.y.length,e.z.length);e._u=n(e.u,e._len);e._v=n(e.v,e._len);e._w=n(e.w,e._len);e._x=n(e.x,e._len);e._y=n(e.y,e._len);e._z=n(e.z,e._len);var f=r(e);e._gridFill=f.fill;e._Xs=f.Xs;e._Ys=f.Ys;e._Zs=f.Zs;e._len=f.len;var l=0;if(e.starts){var m=n(e.starts.x||[]);var c=n(e.starts.y||[]);var d=n(e.starts.z||[]);l=Math.min(m.length,c.length,d.length)}e._startsX=m||[];e._startsY=c||[];e._startsZ=d||[];var g=0,h=Infinity,
q;for(q=0;q<e._len;q++){var t=e._u[q],v=e._v[q],w=e._w[q];t=Math.sqrt(t*t+v*v+w*w);g=Math.max(g,t);h=Math.min(h,t)}k(a,e,{vals:[h,g],containerStr:"",cLetter:"c"});for(q=0;q<l;q++)a=m[q],f.xMax=Math.max(f.xMax,a),f.xMin=Math.min(f.xMin,a),a=c[q],f.yMax=Math.max(f.yMax,a),f.yMin=Math.min(f.yMin,a),a=d[q],f.zMax=Math.max(f.zMax,a),f.zMin=Math.min(f.zMin,a);e._slen=l;e._normMax=g;e._xbnds=[f.xMin,f.xMax];e._ybnds=[f.yMin,f.yMax];e._zbnds=[f.zMin,f.zMax]},filter:n,processGrid:r}},{"../../components/colorscale/calc":623,
"../../lib":749}],1263:[function(b,D,G){function r(g,h){this.scene=g;this.uid=h;this.data=this.mesh=null}function n(g){var h=g.length;return 2<h?g.slice(1,h-1):2===h?[(g[0]+g[1])/2]:g}function p(g){var h=g.length;return 1===h?[.5,.5]:[g[1]-g[0],g[h-1]-g[h-2]]}function k(g,h){function q(I,M){var E=t[M],L=v[d[M]];return f.simpleMap(I,function(P){return E.d2l(P)*L})}var t=g.fullSceneLayout,v=g.dataScale,w=h._len;g={};g.vectors=c(q(h._u,"xaxis"),q(h._v,"yaxis"),q(h._w,"zaxis"),w);if(!w)return{positions:[],
cells:[]};var A=q(h._Xs,"xaxis"),z=q(h._Ys,"yaxis");w=q(h._Zs,"zaxis");g.meshgrid=[A,z,w];g.gridFill=h._gridFill;if(h._slen)g.startingPositions=c(q(h._startsX,"xaxis"),q(h._startsY,"yaxis"),q(h._startsZ,"zaxis"));else{for(var y=z[0],B=n(A),C=n(w),u=Array(B.length*C.length),F=0,H=0;H<B.length;H++)for(var J=0;J<C.length;J++)u[F++]=[B[H],y,C[J]];g.startingPositions=u}g.colormap=l(h);g.tubeSize=h.sizeref;g.maxLength=h.maxdisplayed;y=q(h._xbnds,"xaxis");B=q(h._ybnds,"yaxis");C=q(h._zbnds,"zaxis");A=p(A);
z=p(z);w=p(w);g=a(g,[[y[0]-A[0],B[0]-z[0],C[0]-w[0]],[y[1]+A[1],B[1]+z[1],C[1]+w[1]]]);w=m(h);g.vertexIntensityBounds=[w.min/h._normMax,w.max/h._normMax];w=h.lightposition;g.lightPosition=[w.x,w.y,w.z];g.ambient=h.lighting.ambient;g.diffuse=h.lighting.diffuse;g.specular=h.lighting.specular;g.roughness=h.lighting.roughness;g.fresnel=h.lighting.fresnel;g.opacity=h.opacity;h._pad=g.tubeScale*h.sizeref*2;return g}var a=b("gl-streamtube3d"),e=a.createTubeMesh,f=b("../../lib"),l=b("../../lib/gl_format_color").parseColorScale,
m=b("../../components/colorscale").extractOpts,c=b("../../plots/gl3d/zip3"),d={xaxis:0,yaxis:1,zaxis:2};b=r.prototype;b.handlePick=function(g){function h(A,z){var y=t[d[z]];return q[z].l2c(A)/y}var q=this.scene.fullSceneLayout,t=this.scene.dataScale;if(g.object===this.mesh){var v=g.data.position,w=g.data.velocity;g.traceCoordinate=[h(v[0],"xaxis"),h(v[1],"yaxis"),h(v[2],"zaxis"),h(w[0],"xaxis"),h(w[1],"yaxis"),h(w[2],"zaxis"),g.data.intensity*this.data._normMax,g.data.divergence];g.textLabel=this.data.hovertext||
this.data.text;return!0}};b.update=function(g){this.data=g;g=k(this.scene,g);this.mesh.update(g)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};D.exports=function(g,h){var q=g.glplot.gl,t=k(g,h);q=e(q,t);t=new r(g,h.uid);t.mesh=q;t.data=h;q._trace=t;g.glplot.add(q);return t}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gl_format_color":745,"../../plots/gl3d/zip3":850,"gl-streamtube3d":323}],1264:[function(b,D,G){var r=b("../../lib"),n=b("../../components/colorscale/defaults"),
p=b("./attributes");D.exports=function(k,a,e,f){function l(q,t){return r.coerce(k,a,p,q,t)}e=l("u");var m=l("v"),c=l("w"),d=l("x"),g=l("y"),h=l("z");e&&e.length&&m&&m.length&&c&&c.length&&d&&d.length&&g&&g.length&&h&&h.length?(l("starts.x"),l("starts.y"),l("starts.z"),l("maxdisplayed"),l("sizeref"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),n(k,a,f,l,{prefix:"",cLetter:"c"}),
l("text"),l("hovertext"),l("hovertemplate"),a._length=null):a.visible=!1}},{"../../components/colorscale/defaults":625,"../../lib":749,"./attributes":1261}],1265:[function(b,D,G){D.exports={moduleType:"trace",name:"streamtube",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc").calc,plot:b("./convert"),eventData:function(r,n){r.tubex=r.x;r.tubey=r.y;r.tubez=r.z;r.tubeu=n.traceCoordinate[3];
r.tubev=n.traceCoordinate[4];r.tubew=n.traceCoordinate[5];r.norm=n.traceCoordinate[6];r.divergence=n.traceCoordinate[7];delete r.x;delete r.y;delete r.z;return r},meta:{}}},{"../../plots/gl3d":839,"./attributes":1261,"./calc":1262,"./convert":1263,"./defaults":1264}],1266:[function(b,D,G){G=b("../../plots/attributes");var r=b("../../plots/template_attributes").hovertemplateAttrs,n=b("../../plots/template_attributes").texttemplateAttrs,p=b("../../components/colorscale/attributes"),k=b("../../plots/domain").attributes,
a=b("../pie/attributes"),e=b("./constants");b=b("../../lib/extend").extendFlat;D.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",
dflt:-1},marker:b({colors:{valType:"data_array",editType:"calc"},line:{color:b({},a.marker.line.color,{dflt:null}),width:b({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},p("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:"label;text;value;current path;percent root;percent entry;percent parent".split(";"),extras:["none"],editType:"plot"},texttemplate:n({editType:"plot"},
{keys:e.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:b({},G.hoverinfo,{flags:"label;text;value;name;current path;percent root;percent entry;percent parent".split(";"),dflt:"label+text+value+name"}),hovertemplate:r({},{keys:e.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:b({},a.outsidetextfont,{}),domain:k({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":622,
"../../lib/extend":739,"../../plots/attributes":794,"../../plots/domain":824,"../../plots/template_attributes":875,"../pie/attributes":1129,"./constants":1269}],1267:[function(b,D,G){var r=b("../../plots/plots");G.name="sunburst";G.plot=function(n,p,k,a){r.plotBasePlot(G.name,n,p,k,a)};G.clean=function(n,p,k,a){r.cleanBasePlot(G.name,n,p,k,a)}},{"../../plots/plots":860}],1268:[function(b,D,G){function r(g,h,q){var t=0,v=g.children;if(v){for(var w=v.length,A=0;A<w;A++)t+=r(v[A],h,q);q.branches&&t++}else q.leaves&&
t++;g.value=g.data.data.value=t;h._values||(h._values=[]);return h._values[g.data.data.i]=t}var n=b("d3-hierarchy"),p=b("fast-isnumeric"),k=b("../../lib"),a=b("../../components/colorscale").makeColorScaleFuncFromTrace,e=b("../pie/calc").makePullColorFn,f=b("../pie/calc").generateExtendedColors,l=b("../../components/colorscale").calc,m=b("../../constants/numerical").ALMOST_EQUAL,c={},d={};G.calc=function(g,h){var q=g._fullLayout,t=h.ids,v=k.isArrayOrTypedArray(t),w=h.labels,A=h.parents,z=h.values,
y=k.isArrayOrTypedArray(z),B=[],C={},u={},F=function(Y,ea){C[Y]?C[Y].push(ea):C[Y]=[ea];u[ea]=1},H=function(Y){return Y||"number"===typeof Y},J=function(Y){return!y||p(z[Y])&&0<=z[Y]};if(v){v=Math.min(t.length,A.length);var I=function(Y){return H(t[Y])&&J(Y)};var M=function(Y){return String(t[Y])}}else v=Math.min(w.length,A.length),I=function(Y){return H(w[Y])&&J(Y)},M=function(Y){return String(w[Y])};y&&(v=Math.min(v,z.length));for(var E=0;E<v;E++)if(I(E)){var L=M(E),P=H(A[E])?String(A[E]):"",N=
{i:E,id:L,pid:P,label:H(w[E])?String(w[E]):""};y&&(N.v=+z[E]);B.push(N);F(P,L)}if(!C[""]){A=[];for(var Q in C)u[Q]||A.push(Q);if(1===A.length)Q=A[0],B.unshift({hasImpliedRoot:!0,id:Q,pid:"",label:Q});else return k.warn("Multiple implied roots, cannot build "+h.type+" hierarchy.")}else if(1<C[""].length){Q=k.randstr();for(A=0;A<B.length;A++)""===B[A].pid&&(B[A].pid=Q);B.unshift({hasMultipleRoots:!0,id:Q,pid:"",label:""})}try{var O=n.stratify().id(function(Y){return Y.id}).parentId(function(Y){return Y.pid})(B)}catch(Y){return k.warn("Failed to build "+
h.type+" hierarchy. Error: "+Y.message)}O=n.hierarchy(O);var T=!1;if(y)switch(h.branchvalues){case "remainder":O.sum(function(Y){return Y.data.v});break;case "total":O.each(function(Y){var ea=Y.data.data,ca=ea.v;if(Y.children){var ba=Y.children.reduce(function(ka,qa){return ka+qa.data.data.v},0);if(ea.hasImpliedRoot||ea.hasMultipleRoots)ca=ba;if(ca<ba*m)return T=!0,k.warn(["Total value for node",Y.data.data.id,"is smaller than the sum of its children. \nparent value \x3d",ca,"\nchildren sum \x3d",
ba].join(" "))}Y.value=ca})}else r(O,h,{branches:-1!==h.count.indexOf("branches"),leaves:-1!==h.count.indexOf("leaves")});if(!T){O.sort(function(Y,ea){return ea.value-Y.value});var V=h.marker.colors||[];Q=!!V.length;if(h._hasColorscale){Q||(V=y?h.values:h._values);l(g,h,{vals:V,containerStr:"marker",cLetter:"c"});var Z=a(h.marker)}else var aa=e(q["_"+h.type+"colormap"]);O.each(function(Y){Y=Y.data.data;Y.color=h._hasColorscale?Z(V[Y.i]):aa(V[Y.i],Y.id)});B[0].hierarchy=O;return B}};G._runCrossTraceCalc=
function(g,h){function q(y){var B=y.data.data,C=B.id;!1===B.color&&(w[C]?B.color=w[C]:y.parent?y.parent.parent?B.color=y.parent.data.data.color:(w[C]=B.color=v[A%v.length],A++):B.color="rgba(0,0,0,0)")}var t=h._fullLayout;h=h.calcdata;var v=t[g+"colorway"],w=t["_"+g+"colormap"];t["extend"+g+"colors"]&&(v=f(v,"treemap"===g?d:c));var A=0;for(t=0;t<h.length;t++){var z=h[t][0];z.trace.type===g&&z.hierarchy&&z.hierarchy.each(q)}};G.crossTraceCalc=function(g){return G._runCrossTraceCalc("sunburst",g)}},
{"../../components/colorscale":627,"../../constants/numerical":724,"../../lib":749,"../pie/calc":1131,"d3-hierarchy":161,"fast-isnumeric":241}],1269:[function(b,D,G){D.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" ")}},{}],1270:[function(b,D,G){var r=b("../../lib"),n=b("./attributes"),p=b("../../plots/domain").defaults,k=b("../bar/defaults").handleText;b=b("../../components/colorscale");var a=
b.hasColorscale,e=b.handleDefaults;D.exports=function(f,l,m,c){function d(h,q){return r.coerce(f,l,n,h,q)}m=d("labels");var g=d("parents");m&&m.length&&g&&g.length?((m=d("values"))&&m.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("marker.line.width")&&d("marker.line.color",c.paper_bgcolor),d("marker.colors"),(m=l._hasColorscale=a(f,"marker","colors")||(f.marker||{}).coloraxis)&&e(f,l,c,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",m?1:.7),m=d("text"),d("texttemplate"),l.texttemplate||
d("textinfo",Array.isArray(m)?"text+label":"label"),d("hovertext"),d("hovertemplate"),k(f,l,c,d,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("insidetextorientation"),p(l,c,d),l._length=null):l.visible=!1}},{"../../components/colorscale":627,"../../lib":749,"../../plots/domain":824,"../bar/defaults":894,"./attributes":1266}],1271:[function(b,D,G){function r(c,d,g){for(var h=c.data.data,q={curveNumber:d.index,
pointNumber:h.i,data:d._input,fullData:d},t=0;t<g.length;t++){var v=g[t];v in c&&(q[v]=c[v])}"parentString"in c&&!l.isHierarchyRoot(c)&&(q.parent=c.parentString);k(q,d,h.i);return q}var n=b("d3"),p=b("../../registry"),k=b("../../components/fx/helpers").appendArrayPointValue,a=b("../../components/fx"),e=b("../../lib"),f=b("../../lib/events"),l=b("./helpers"),m=b("../pie/helpers").formatPieValue;D.exports=function(c,d,g,h,q){var t=h[0],v=t.trace,w=t.hierarchy,A="sunburst"===v.type,z="treemap"===v.type;
"_hasHoverLabel"in v||(v._hasHoverLabel=!1);"_hasHoverEvent"in v||(v._hasHoverEvent=!1);c.on("mouseover",function(y){var B=g._fullLayout;if(!g._dragging&&!1!==B.hovermode){var C=g._fullData[v.index],u=y.data.data,F=u.i,H=l.isHierarchyRoot(y),J=l.getParent(w,y),I=l.getValue(y),M=function(ea){return e.castOption(C,F,ea)},E=M("hovertemplate"),L=a.castHoverinfo(C,B,F),P=B.separators;if(E||L&&"none"!==L&&"skip"!==L){if(A){var N=t.cx+y.pxmid[0]*(1-y.rInscribed);var Q=t.cy+y.pxmid[1]*(1-y.rInscribed)}z&&
(N=y._hoverX,Q=y._hoverY);var O={},T=[],V=[],Z=function(ea){return-1!==T.indexOf(ea)};L&&(T="all"===L?C._module.attributes.hoverinfo.flags:L.split("+"));O.label=u.label;Z("label")&&O.label&&V.push(O.label);u.hasOwnProperty("v")&&(O.value=u.v,O.valueLabel=m(O.value,P),Z("value")&&V.push(O.valueLabel));O.currentPath=y.currentPath=l.getPath(y.data);Z("current path")&&!H&&V.push(O.currentPath);var aa=[];L=function(){-1===aa.indexOf(Y)&&(V.push(Y),aa.push(Y))};O.percentParent=y.percentParent=I/l.getValue(J);
O.parent=y.parentString=l.getPtLabel(J);if(Z("percent parent")){var Y=l.formatPercent(O.percentParent,P)+" of "+O.parent;L()}O.percentEntry=y.percentEntry=I/l.getValue(d);O.entry=y.entry=l.getPtLabel(d);!Z("percent entry")||H||y.onPathbar||(Y=l.formatPercent(O.percentEntry,P)+" of "+O.entry,L());O.percentRoot=y.percentRoot=I/l.getValue(w);O.root=y.root=l.getPtLabel(w);Z("percent root")&&!H&&(Y=l.formatPercent(O.percentRoot,P)+" of "+O.root,L());O.text=M("hovertext")||M("text");Z("text")&&(Y=O.text,
e.isValidTextValue(Y)&&V.push(Y));u={trace:C,y:Q,text:V.join("\x3cbr\x3e"),name:E||Z("name")?C.name:void 0,color:M("hoverlabel.bgcolor")||u.color,borderColor:M("hoverlabel.bordercolor"),fontFamily:M("hoverlabel.font.family"),fontSize:M("hoverlabel.font.size"),fontColor:M("hoverlabel.font.color"),nameLength:M("hoverlabel.namelength"),textAlign:M("hoverlabel.align"),hovertemplate:E,hovertemplateLabels:O,eventData:[r(y,C,q.eventDataKeys)]};A&&(u.x0=N-y.rInscribed*y.rpx1,u.x1=N+y.rInscribed*y.rpx1,u.idealAlign=
0>y.pxmid[0]?"left":"right");z&&(u.x=N,u.idealAlign=0>N?"left":"right");a.loneHover(u,{container:B._hoverlayer.node(),outerContainer:B._paper.node(),gd:g});v._hasHoverLabel=!0}z&&(B=c.select("path.surface"),q.styleOne(B,y,C,{hovered:!0}));v._hasHoverEvent=!0;g.emit("plotly_hover",{points:[r(y,C,q.eventDataKeys)],event:n.event})}});c.on("mouseout",function(y){var B=g._fullLayout,C=g._fullData[v.index],u=n.select(this).datum();v._hasHoverEvent&&(y.originalEvent=n.event,g.emit("plotly_unhover",{points:[r(u,
C,q.eventDataKeys)],event:n.event}),v._hasHoverEvent=!1);v._hasHoverLabel&&(a.loneUnhover(B._hoverlayer.node()),v._hasHoverLabel=!1);z&&(y=c.select("path.surface"),q.styleOne(y,u,C,{hovered:!1}))});c.on("click",function(y){var B=g._fullLayout,C=g._fullData[v.index],u=A&&(l.isHierarchyRoot(y)||l.isLeaf(y)),F=l.getPtId(y);F=l.isEntry(y)?l.findEntryWithChild(w,F):l.findEntryWithLevel(w,F);F=l.getPtId(F);var H={points:[r(y,C,q.eventDataKeys)],event:n.event};u||(H.nextLevel=F);H=f.triggerHandler(g,"plotly_"+
v.type+"click",H);!1!==H&&B.hovermode&&(g._hoverdata=[r(y,C,q.eventDataKeys)],a.click(g,n.event));u||!1===H||g._dragging||g._transitioning||(p.call("_storeDirectGUIEdit",C,B._tracePreGUI[C.uid],{level:C.level}),y={data:[{level:F}],traces:[v.index]},C={frame:{redraw:!1,duration:q.transitionTime},transition:{duration:q.transitionTime,easing:q.transitionEasing},mode:"immediate",fromcurrent:!0},a.loneUnhover(B._hoverlayer.node()),p.call("animate",g,y,C))})}},{"../../components/fx":655,"../../components/fx/helpers":651,
"../../lib":749,"../../lib/events":738,"../../registry":880,"../pie/helpers":1134,"./helpers":1272,d3:169}],1272:[function(b,D,G){var r=b("../../lib"),n=b("../../components/color"),p=b("../../lib/setcursor"),k=b("../pie/helpers");G.findEntryWithLevel=function(a,e){var f;e&&a.eachAfter(function(l){if(G.getPtId(l)===e)return f=l.copy()});return f||a};G.findEntryWithChild=function(a,e){var f;a.eachAfter(function(l){for(var m=l.children||[],c=0;c<m.length;c++)if(G.getPtId(m[c])===e)return f=l.copy()});
return f||a};G.isEntry=function(a){return!a.parent};G.isLeaf=function(a){return!a.children};G.getPtId=function(a){return a.data.data.id};G.getPtLabel=function(a){return a.data.data.label};G.getValue=function(a){return a.value};G.isHierarchyRoot=function(a){return""===a.data.data.pid};G.setSliceCursor=function(a,e,f){e=f.isTransitioning;e||(e=a.datum(),e=f.hideOnRoot&&G.isHierarchyRoot(e)||f.hideOnLeaves&&G.isLeaf(e));p(a,e?null:"pointer")};G.getInsideTextFontKey=function(a,e,f,l,m){f=f.data.data.i;
return r.castOption(e,f,((m||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+a)||r.castOption(e,f,"textfont."+a)||l.size};G.getOutsideTextFontKey=function(a,e,f,l){f=f.data.data.i;return r.castOption(e,f,"outsidetextfont."+a)||r.castOption(e,f,"textfont."+a)||l.size};G.isOutsideText=function(a,e){return!a._hasColorscale&&G.isHierarchyRoot(e)};G.determineTextFont=function(a,e,f,l){if(G.isOutsideText(a,e))a={color:G.getOutsideTextFontKey("color",a,e,f),family:G.getOutsideTextFontKey("family",
a,e,f),size:G.getOutsideTextFontKey("size",a,e,f)};else{var m=e.data.data,c=m.i,d=r.castOption(a,c,((l||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");!d&&a._input.textfont&&(d=r.castOption(a._input,c,"textfont.color"));a={color:d||n.contrast(m.color),family:G.getInsideTextFontKey("family",a,e,f,l),size:G.getInsideTextFontKey("size",a,e,f,l)}}return a};G.hasTransition=function(a){return!!(a&&0<a.duration)};G.getMaxDepth=function(a){return 0<=a.maxdepth?a.maxdepth:Infinity};G.isHeader=
function(a,e){return!(G.isLeaf(a)||a.depth===e._maxDepth-1)};G.getParent=function(a,e){return G.findEntryWithLevel(a,e.data.data.pid)};G.listPath=function(a,e){a=a.parent;if(!a)return[];var f=e?[a.data[e]]:[a];return G.listPath(a,e).concat(f)};G.getPath=function(a){return G.listPath(a,"label").join("/")+"/"};G.formatValue=k.formatPieValue;G.formatPercent=function(a,e){var f=r.formatPercent(a,0);"0%"===f&&(f=k.formatPiePercent(a,e));return f}},{"../../components/color":615,"../../lib":749,"../../lib/setcursor":769,
"../pie/helpers":1134}],1273:[function(b,D,G){D.exports={moduleType:"trace",name:"sunburst",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1173,"./attributes":1266,
"./base_plot":1267,"./calc":1268,"./defaults":1270,"./layout_attributes":1274,"./layout_defaults":1275,"./plot":1276,"./style":1277}],1274:[function(b,D,G){D.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1275:[function(b,D,G){var r=b("../../lib"),n=b("./layout_attributes");D.exports=function(p,k){r.coerce(p,k,n,"sunburstcolorway",k.colorway);r.coerce(p,k,n,"extendsunburstcolors",void 0)}},{"../../lib":749,"./layout_attributes":1274}],
1276:[function(b,D,G){function r(z,y,B,C){function u(ha){var la=A.getPtId(ha),ua=Y[la],na=Y[A.getPtId(N)];if(na){var wa=ha.x1>na.x1?2*Math.PI:0;ha=ha.rpx1<na.rpx1?{rpx0:0,rpx1:0}:{x0:wa,x1:wa}}else{var Ca,Fa=A.getPtId(ha.parent);E.each(function(ab){if(A.getPtId(ab)===Fa)return Ca=ab});ha=Ca.children;var Xa;ha.forEach(function(ab,gb){if(A.getPtId(ab)===la)return Xa=gb});ha=ha.length;na=a.interpolate(Ca.x0,Ca.x1);ha={rpx0:T,rpx1:T,x0:na(Xa/ha),x1:na((Xa+1)/ha)}}return a.interpolate(ua,ha)}function F(ha){var la=
Y[A.getPtId(ha)],ua={x0:ha.x0,x1:ha.x1,rpx0:ha.rpx0,rpx1:ha.rpx1};la||(aa?ha.parent?ja?(ha=ha.x1>ja?2*Math.PI:0,la={x0:ha,x1:ha}):(la={rpx0:T,rpx1:T},l.extendFlat(la,J(ha))):la={rpx0:0,rpx1:0}:la={x0:0,x1:0});return a.interpolate(la,ua)}function H(ha){var la=Y[A.getPtId(ha)],ua=ha.transform;la||(la={rpx1:ha.rpx1,transform:{textPosAngle:ua.textPosAngle,scale:0,rotate:ua.rotate,rCenter:ua.rCenter,x:ua.x,y:ua.y}},aa?ha.parent?ja?la.x0=la.x1=ha.x1>ja?2*Math.PI:0:l.extendFlat(la,J(ha)):la.x0=la.x1=0:la.x0=
la.x1=0);var na=a.interpolate(la.transform.textPosAngle,ha.transform.textPosAngle),wa=a.interpolate(la.rpx1,ha.rpx1),Ca=a.interpolate(la.x0,ha.x0),Fa=a.interpolate(la.x1,ha.x1),Xa=a.interpolate(la.transform.scale,ua.scale),ab=a.interpolate(la.transform.rotate,ua.rotate),gb=0===ua.rCenter?3:0===la.transform.rCenter?1/3:1,bb=a.interpolate(la.transform.rCenter,ua.rCenter);return function(La){var kb=wa(La),mb=Ca(La),ya=Fa(La),Ia=bb(Math.pow(La,gb));mb=ka(kb,(mb+ya)/2);ya=na(La);kb={pxmid:mb,rpx1:kb,transform:{textPosAngle:ya,
rCenter:Ia,x:ua.x,y:ua.y}};c(P.type,ua,I);return{transform:{targetX:pa(kb),targetY:oa(kb),scale:Xa(La),rotate:ab(La),rCenter:Ia}}}}function J(ha){var la=ha.parent,ua=Y[A.getPtId(la)],na={};ua?(la=la.children,ha=la.indexOf(ha),la=la.length,ua=a.interpolate(ua.x0,ua.x1),na.x0=ua(ha/la),na.x1=ua(ha/la)):na.x0=na.x1=0;return na}var I=z._fullLayout,M=!I.uniformtext.mode&&A.hasTransition(C),E=a.select(B).selectAll("g.slice"),L=y[0],P=L.trace,N=A.findEntryWithLevel(L.hierarchy,P.level);B=A.getMaxDepth(P);
C=I._size;var Q=P.domain,O=C.h*(Q.y[1]-Q.y[0]),T=.5*Math.min(C.w*(Q.x[1]-Q.x[0]),O),V=L.cx=C.l+C.w*(Q.x[1]+Q.x[0])/2,Z=L.cy=C.t+C.h*(1-Q.y[0])-O/2;if(!N)return E.remove();var aa=null,Y={};M&&E.each(function(ha){Y[A.getPtId(ha)]={rpx0:ha.rpx0,rpx1:ha.rpx1,x0:ha.x0,x1:ha.x1,transform:ha.transform};!aa&&A.isEntry(ha)&&(aa=ha)});C=n(N).descendants();Q=N.height+1;var ea=0,ca=B;L.hasMultipleRoots&&A.isHierarchyRoot(N)&&(C=C.slice(1),--Q,ea=1,ca+=1);C=C.filter(function(ha){return ha.y1<=ca});var ba=Math.min(Q,
B),ka=function(ha,la){return[ha*Math.cos(la),-ha*Math.sin(la)]},qa=function(ha){return l.pathAnnulus(ha.rpx0,ha.rpx1,ha.x0,ha.x1,V,Z)},pa=function(ha){return V+k(ha.rpx1,ha.transform.textPosAngle)[0]*(ha.transform.rCenter||0)+(ha.transform.x||0)},oa=function(ha){return Z+k(ha.rpx1,ha.transform.textPosAngle)[1]*(ha.transform.rCenter||0)+(ha.transform.y||0)};E=E.data(C,A.getPtId);E.enter().append("g").classed("slice",!0);M?E.exit().transition().each(function(){var ha=a.select(this);ha.select("path.surface").transition().attrTween("d",
function(la){var ua=u(la);return function(na){return qa(ua(na))}});ha.select("g.slicetext").attr("opacity",0)}).remove():E.exit().remove();E.order();var ja=null;if(M&&aa){var ra=A.getPtId(aa);E.each(function(ha){null===ja&&A.getPtId(ha)===ra&&(ja=ha.x1)})}B=E;M&&(B=B.transition().each("end",function(){var ha=a.select(this);A.setSliceCursor(ha,z,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})}));B.each(function(ha){var la=a.select(this),ua=l.ensureSingle(la,"path","surface",function(Fa){Fa.style("pointer-events",
"all")});ha.rpx0=(ha.y0-ea)/ba*T;ha.rpx1=(ha.y1-ea)/ba*T;ha.xmid=(ha.x0+ha.x1)/2;ha.pxmid=ka(ha.rpx1,ha.xmid);ha.midangle=-(ha.xmid-Math.PI/2);ha.startangle=-(ha.x0-Math.PI/2);ha.stopangle=-(ha.x1-Math.PI/2);ha.halfangle=.5*Math.min(l.angleDelta(ha.x0,ha.x1)||Math.PI,Math.PI);ha.ring=1-ha.rpx0/ha.rpx1;ha.rInscribed=p(ha,P);M?ua.transition().attrTween("d",function(Fa){var Xa=F(Fa);return function(ab){return qa(Xa(ab))}}):ua.attr("d",qa);la.call(v,N,z,y,{eventDataKeys:w.eventDataKeys,transitionTime:w.CLICK_TRANSITION_TIME,
transitionEasing:w.CLICK_TRANSITION_EASING}).call(A.setSliceCursor,z,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:z._transitioning});ua.call(q,ha,P);la=l.ensureSingle(la,"g","slicetext");la=l.ensureSingle(la,"text","",function(Fa){Fa.attr("data-notex",1)});var na=l.ensureUniformFontSize(z,A.determineTextFont(P,ha,I.font));la.text(G.formatSliceLabel(ha,N,P,y,I)).classed("slicetext",!0).attr("text-anchor","middle").call(f.font,na).call(m.convertToTspans,z);var wa=f.bBox(la.node());ha.transform=h(wa,
ha,L);ha.transform.targetX=pa(ha);ha.transform.targetY=oa(ha);var Ca=function(Fa,Xa){Fa=Fa.transform;g(Fa,Xa);Fa.fontSize=na.size;c(P.type,Fa,I);return l.getTextTransform(Fa)};M?la.transition().attrTween("transform",function(Fa){var Xa=H(Fa);return function(ab){return Ca(Xa(ab),wa)}}):la.attr("transform",Ca(ha,wa))})}function n(z){return e.partition().size([2*Math.PI,z.height+1])(z)}function p(z){return 0===z.rpx0&&l.isFullCircle([z.x0,z.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(z.halfangle)),z.ring/
2))}function k(z,y){return[z*Math.sin(y),-z*Math.cos(y)]}var a=b("d3"),e=b("d3-hierarchy"),f=b("../../components/drawing"),l=b("../../lib"),m=b("../../lib/svg_text_utils");D=b("../bar/uniform_text");var c=D.recordMinTextSize,d=D.clearMinTextSize;D=b("../pie/plot");var g=D.computeTransform,h=D.transformInsideText,q=b("./style").styleOne,t=b("../bar/style").resizeText,v=b("./fx"),w=b("./constants"),A=b("./helpers");G.plot=function(z,y,B,C){var u=z._fullLayout,F=u._sunburstlayer,H,J=!B,I=!u.uniformtext.mode&&
A.hasTransition(B);d("sunburst",u);y=F.selectAll("g.trace.sunburst").data(y,function(M){return M[0].trace.uid});y.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round");y.order();I?(C&&(H=C()),a.transition().duration(B.duration).ease(B.easing).each("end",function(){H&&H()}).each("interrupt",function(){H&&H()}).each(function(){F.selectAll("g.trace").each(function(M){r(z,M,this,B)})})):(y.each(function(M){r(z,M,this,B)}),u.uniformtext.mode&&t(z,u._sunburstlayer.selectAll(".trace"),
"sunburst"));J&&y.exit().remove()};G.formatSliceLabel=function(z,y,B,C,u){var F=B.texttemplate,H=B.textinfo;if(!(F||H&&"none"!==H))return"";var J=u.separators,I=z.data.data;C=C[0].hierarchy;var M=A.isHierarchyRoot(z),E=A.getParent(C,z),L=A.getValue(z);if(!F){var P=H.split("+");u=function(V){return-1!==P.indexOf(V)};var N=[];u("label")&&I.label&&N.push(I.label);I.hasOwnProperty("v")&&u("value")&&N.push(A.formatValue(I.v,J));if(!M){u("current path")&&N.push(A.getPath(z.data));z=0;u("percent parent")&&
z++;u("percent entry")&&z++;u("percent root")&&z++;var Q=1<z;if(z){z=function(V){T=A.formatPercent(O,J);Q&&(T+=" of "+V);N.push(T)};if(u("percent parent")&&!M){var O=L/A.getValue(E);z("parent")}u("percent entry")&&(O=L/A.getValue(y),z("entry"));u("percent root")&&(O=L/A.getValue(C),z("root"))}}if(u("text")){var T=l.castOption(B,I.i,"text");l.isValidTextValue(T)&&N.push(T)}return N.join("\x3cbr\x3e")}F=l.castOption(B,I.i,"texttemplate");if(!F)return"";H={};I.label&&(H.label=I.label);I.hasOwnProperty("v")&&
(H.value=I.v,H.valueLabel=A.formatValue(I.v,J));H.currentPath=A.getPath(z.data);M||(H.percentParent=L/A.getValue(E),H.percentParentLabel=A.formatPercent(H.percentParent,J),H.parent=A.getPtLabel(E));H.percentEntry=L/A.getValue(y);H.percentEntryLabel=A.formatPercent(H.percentEntry,J);H.entry=A.getPtLabel(y);H.percentRoot=L/A.getValue(C);H.percentRootLabel=A.formatPercent(H.percentRoot,J);H.root=A.getPtLabel(C);I.hasOwnProperty("color")&&(H.color=I.color);y=l.castOption(B,I.i,"text");if(l.isValidTextValue(y)||
""===y)H.text=y;H.customdata=l.castOption(B,I.i,"customdata");return l.texttemplateString(F,H,u._d3locale,H,B._meta||{})}},{"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../bar/style":904,"../bar/uniform_text":906,"../pie/plot":1138,"./constants":1269,"./fx":1271,"./helpers":1272,"./style":1277,d3:169,"d3-hierarchy":161}],1277:[function(b,D,G){function r(e,f,l){var m=f.data.data;f=!f.children;var c=m.i,d=k.castOption(l,c,"marker.line.color")||p.defaultLine;c=k.castOption(l,
c,"marker.line.width")||0;e.style("stroke-width",c).call(p.fill,m.color).call(p.stroke,d).style("opacity",f?l.leaf.opacity:null)}var n=b("d3"),p=b("../../components/color"),k=b("../../lib"),a=b("../bar/uniform_text").resizeText;D.exports={style:function(e){var f=e._fullLayout._sunburstlayer.selectAll(".trace");a(e,f,"sunburst");f.each(function(l){var m=n.select(this),c=l[0].trace;m.style("opacity",c.opacity);m.selectAll("path.surface").each(function(d){n.select(this).call(r,d,c)})})},styleOne:r}},
{"../../components/color":615,"../../lib":749,"../bar/uniform_text":906,d3:169}],1278:[function(b,D,G){function r(f){return{valType:"boolean",dflt:!1}}function n(f){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:r("x"),y:r("y"),z:r("z")},color:{valType:"color",dflt:p.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",
min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:p.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var p=b("../../components/color");G=b("../../components/colorscale/attributes");var k=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/attributes"),e=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;D=D.exports=b(e({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},
text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:k(),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},G("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:n("x"),y:n("y"),z:n("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1E5,max:1E5,dflt:10},y:{valType:"number",min:-1E5,max:1E5,dflt:1E4},z:{valType:"number",
min:-1E5,max:1E5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:e({},G.zauto,{}),zmin:e({},G.zmin,{}),zmax:e({},G.zmax,{})},hoverinfo:e({},a.hoverinfo),showlegend:e({},a.showlegend,
{dflt:!1})}),"calc","nested");D.x.editType=D.y.editType=D.z.editType="calc+clearAxisTypes";D.transforms=void 0},{"../../components/color":615,"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/attributes":794,"../../plots/template_attributes":875}],1279:[function(b,D,G){var r=b("../../components/colorscale/calc");D.exports=function(n,p){p.surfacecolor?r(n,p,{vals:p.surfacecolor,containerStr:"",cLetter:"c"}):r(n,p,{vals:p.z,containerStr:"",
cLetter:"c"})}},{"../../components/colorscale/calc":623}],1280:[function(b,D,G){function r(v,w,A){this.scene=v;this.uid=A;this.surface=w;this.data=null;this.showContour=[!1,!1,!1];this.contourStart=[null,null,null];this.contourEnd=[null,null,null];this.contourSize=[0,0,0];this.minValues=[Infinity,Infinity,Infinity];this.maxValues=[-Infinity,-Infinity,-Infinity];this.dataScaleY=this.dataScaleX=1;this.refineData=!0;this.objectOffset=[0,0,0]}function n(v){for(var w=[],A=0;A<h.length;A++){var z=h[A],
y=w,B=y.push;var C=v;if(C<z)z=0;else{for(var u=0;0===Math.floor(C%z);)C/=z,u++;z=u}B.call(y,z)}return w}function p(v,w,A){var z=A[8]+A[2]*w[0]+A[5]*w[1];v[0]=(A[6]+A[0]*w[0]+A[3]*w[1])/z;v[1]=(A[7]+A[1]*w[0]+A[4]*w[1])/z;return v}var k=b("gl-surface3d"),a=b("ndarray"),e=b("ndarray-linear-interpolate").d2,f=b("../heatmap/interp2d"),l=b("../heatmap/find_empties"),m=b("../../lib").isArrayOrTypedArray,c=b("../../lib/gl_format_color").parseColorScale,d=b("../../lib/str2rgbarray"),g=b("../../components/colorscale").extractOpts;
b=r.prototype;b.getXat=function(v,w,A,z){v=m(this.data.x)?m(this.data.x[0])?this.data.x[w][v]:this.data.x[v]:v;return void 0===A?v:z.d2l(v,0,A)};b.getYat=function(v,w,A,z){v=m(this.data.y)?m(this.data.y[0])?this.data.y[w][v]:this.data.y[w]:w;return void 0===A?v:z.d2l(v,0,A)};b.getZat=function(v,w,A,z){var y=this.data.z[w][v];null===y&&this.data.connectgaps&&this.data._interpolatedZ&&(y=this.data._interpolatedZ[w][v]);return void 0===A?y:z.d2l(y,0,A)};b.handlePick=function(v){if(v.object===this.surface){var w=
Math.max(Math.min(Math.round((v.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),A=Math.max(Math.min(Math.round((v.data.index[1]-1)/this.dataScaleY-1),this.data._ylength-1),0);v.index=[w,A];v.traceCoordinate=[this.getXat(w,A),this.getYat(w,A),this.getZat(w,A)];v.dataCoordinate=[this.getXat(w,A,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(w,A,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(w,A,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];
for(var z=0;3>z;z++){var y=v.dataCoordinate[z];null!==y&&void 0!==y&&(v.dataCoordinate[z]*=this.scene.dataScale[z])}z=this.data.hovertext||this.data.text;Array.isArray(z)&&z[A]&&void 0!==z[A][w]?v.textLabel=z[A][w]:v.textLabel=z?z:"";v.data.dataCoordinate=v.dataCoordinate.slice();this.surface.highlight(v.data);this.scene.glplot.spikes.position=v.dataCoordinate;return!0}};var h=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,
167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,
977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,
1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,
2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];b.calcXnums=function(v){var w,A=[];for(w=1;w<v;w++){var z=this.getXat(w-1,0),y=this.getXat(w,0);A[w-1]=y!==z&&void 0!==z&&null!==z&&void 0!==y&&null!==y?Math.abs(y-z):0}z=0;for(w=1;w<
v;w++)z+=A[w-1];for(w=1;w<v;w++)A[w-1]=0===A[w-1]?1:Math.round(z/A[w-1]);return A};b.calcYnums=function(v){var w,A=[];for(w=1;w<v;w++){var z=this.getYat(0,w-1),y=this.getYat(0,w);A[w-1]=y!==z&&void 0!==z&&null!==z&&void 0!==y&&null!==y?Math.abs(y-z):0}z=0;for(w=1;w<v;w++)z+=A[w-1];for(w=1;w<v;w++)A[w-1]=0===A[w-1]?1:Math.round(z/A[w-1]);return A};G=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260];var q=G[9],t=G[13];b.estimateScale=function(v,w){w=0===w?this.calcXnums(v):this.calcYnums(v);if(0===
w.length)w=void 0;else{for(var A=1,z=0;z<w.length;z++){var y=w[z];if(1>A||1>y)A=void 0;else{A=n(A);y=n(y);for(var B=1,C=0;C<h.length;C++)B*=Math.pow(h[C],Math.max(A[C],y[C]));A=B}}w=A}for(z=1+w;z<q;)z*=2;for(;z>t;){z--;A=w=z;z=n(A);for(y=0;y<h.length;y++)if(0<z[y]){A=h[y];break}z=w/A;z++;z<q&&(z=t)}v=Math.round(z/v);return 1<v?v:1};b.refineCoords=function(v){var w=this.dataScaleX,A=this.dataScaleY,z=Math.floor(v[0].shape[0]*w+1)|0,y=Math.floor(v[0].shape[1]*A+1)|0,B=1+v[0].shape[0]+1,C=1+v[0].shape[1]+
1;B=a(new Float32Array(B*C),[B,C]);w=[1/w,0,0,0,1/A,0,0,0,1];for(A=0;A<v.length;++A){this.surface.padField(B,v[A]);for(var u=C=a(new Float32Array(z*y),[z,y]),F=B,H=p,J=w,I=[0,0],M=u.shape[0],E=u.shape[1],L=0;L<M;L++)for(var P=0;P<E;P++)H(I,[L,P],J),u.set(L,P,e(F,I[0],I[1]));v[A]=C}};b.setContourLevels=function(){var v=[[],[],[]],w=[!1,!1,!1],A=!1,z,y;for(z=0;3>z;++z)if(this.showContour[z]&&(A=!0,0<this.contourSize[z]&&null!==this.contourStart[z]&&null!==this.contourEnd[z]&&this.contourEnd[z]>this.contourStart[z]))for(w[z]=
!0,y=this.contourStart[z];y<this.contourEnd[z];y+=this.contourSize[z]){var B=y*this.scene.dataScale[z];for(var C=v[z],u=!1,F=0;F<C.length;F++)if(B===C[F]){u=!0;break}!1===u&&C.push(B)}if(A){A=[[],[],[]];for(z=0;3>z;++z)this.showContour[z]&&(A[z]=w[z]?v[z]:this.scene.contourLevels[z]);this.surface.update({levels:A})}};b.update=function(v){var w=this.scene,A=w.fullSceneLayout,z=this.surface,y=v.opacity,B=c(v,y),C=w.dataScale,u=v.z[0].length,F=v._ylength;w=w.contourLevels;this.data=v;var H,J,I,M=[];
for(H=0;3>H;H++)for(M[H]=[],J=0;J<u;J++)M[H][J]=[];for(J=0;J<u;J++)for(I=0;I<F;I++)M[0][J][I]=this.getXat(J,I,v.xcalendar,A.xaxis),M[1][J][I]=this.getYat(J,I,v.ycalendar,A.yaxis),M[2][J][I]=this.getZat(J,I,v.zcalendar,A.zaxis);if(v.connectgaps)for(v._emptypoints=l(M[2]),f(M[2],v._emptypoints),v._interpolatedZ=[],J=0;J<u;J++)for(v._interpolatedZ[J]=[],I=0;I<F;I++)v._interpolatedZ[J][I]=M[2][J][I];for(H=0;3>H;H++)for(J=0;J<u;J++)for(I=0;I<F;I++)A=M[H][J][I],M[H][J][I]=null===A||void 0===A?NaN:M[H][J][I]*
C[H];for(H=0;3>H;H++)for(J=0;J<u;J++)for(I=0;I<F;I++)A=M[H][J][I],null!==A&&void 0!==A&&(this.minValues[H]>A&&(this.minValues[H]=A),this.maxValues[H]<A&&(this.maxValues[H]=A));for(H=0;3>H;H++)this.objectOffset[H]=.5*(this.minValues[H]+this.maxValues[H]);for(H=0;3>H;H++)for(J=0;J<u;J++)for(I=0;I<F;I++)A=M[H][J][I],null!==A&&void 0!==A&&(M[H][J][I]-=this.objectOffset[H]);A=[a(new Float32Array(u*F),[u,F]),a(new Float32Array(u*F),[u,F]),a(new Float32Array(u*F),[u,F])];for(H=0;3>H;H++)for(J=0;J<u;J++)for(I=
0;I<F;I++)A[H].set(J,I,M[H][J][I]);M={colormap:B,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!v.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:v.opacityscale,opacity:v.opacity};H=g(v);M.intensityBounds=[H.min,H.max];if(v.surfacecolor){H=a(new Float32Array(u*F),[u,F]);for(J=0;J<u;J++)for(I=0;I<
F;I++)H.set(J,I,v.surfacecolor[I][J]);A.push(H)}else M.intensityBounds[0]*=C[2],M.intensityBounds[1]*=C[2];if(t<A[0].shape[0]||t<A[0].shape[1])this.refineData=!1;!0===this.refineData&&(this.dataScaleX=this.estimateScale(A[0].shape[0],0),this.dataScaleY=this.estimateScale(A[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(A));v.surfacecolor&&(M.intensity=A.pop());u=[!0,!0,!0];F=["x","y","z"];for(H=0;3>H;++H)C=v.contours[F[H]],u[H]=C.highlight,M.showContour[H]=C.show||C.highlight,
M.showContour[H]&&(M.contourProject[H]=[C.project.x,C.project.y,C.project.z],C.show?(this.showContour[H]=!0,M.levels[H]=w[H],z.highlightColor[H]=M.contourColor[H]=d(C.color),z.highlightTint[H]=C.usecolormap?M.contourTint[H]=0:M.contourTint[H]=1,M.contourWidth[H]=C.width,this.contourStart[H]=C.start,this.contourEnd[H]=C.end,this.contourSize[H]=C.size):(this.showContour[H]=!1,this.contourStart[H]=null,this.contourEnd[H]=null,this.contourSize[H]=0),C.highlight&&(M.dynamicColor[H]=d(C.highlightcolor),
M.dynamicWidth[H]=C.highlightwidth));w=B[0].rgb;B=B[B.length-1].rgb;w[0]===B[0]&&w[1]===B[1]&&w[2]===B[2]&&w[3]===B[3]&&(M.vertexColor=!0);M.objectOffset=this.objectOffset;M.coords=A;z.update(M);z.visible=v.visible;z.enableDynamic=u;z.enableHighlight=u;z.snapToData=!0;"lighting"in v&&(z.ambientLight=v.lighting.ambient,z.diffuseLight=v.lighting.diffuse,z.specularLight=v.lighting.specular,z.roughness=v.lighting.roughness,z.fresnel=v.lighting.fresnel);"lightposition"in v&&(z.lightPosition=[v.lightposition.x,
v.lightposition.y,v.lightposition.z]);y&&1>y&&(z.supportsTransparency=!0)};b.dispose=function(){this.scene.glplot.remove(this.surface);this.surface.dispose()};D.exports=function(v,w){var A=k({gl:v.glplot.gl}),z=new r(v,A,w.uid);A._trace=z;z.update(w);v.glplot.add(A);return z}},{"../../components/colorscale":627,"../../lib":749,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../heatmap/find_empties":1040,"../heatmap/interp2d":1043,"gl-surface3d":325,ndarray:469,"ndarray-linear-interpolate":463}],
1281:[function(b,D,G){function r(f,l,m,c){f=c("opacityscale");if("max"===f)l.opacityscale=[[0,.1],[1,1]];else if("min"===f)l.opacityscale=[[0,1],[1,.1]];else if("extremes"===f){f=[];for(m=0;32>m;m++)c=m/31,f.push([c,Math.max(0,Math.min(1,.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2))))]);l.opacityscale=f}else{a:if(m=0,!Array.isArray(f)||2>f.length||!f[0]||!f[f.length-1]||0!==+f[0][0]||1!==+f[f.length-1][0])f=!1;else{for(c=0;c<f.length;c++){var d=f[c];if(2!==d.length||+d[0]<m){f=!1;break a}m=+d[0]}f=
!0}f||(l.opacityscale=void 0)}}function n(f,l,m){l in f&&!(m in f)&&(f[m]=f[l])}var p=b("../../registry"),k=b("../../lib"),a=b("../../components/colorscale/defaults"),e=b("./attributes");D.exports={supplyDefaults:function(f,l,m,c){function d(A,z){return k.coerce(f,l,e,A,z)}m=d("x");var g=d("y");var h=d("z");if(!h||!h.length||m&&1>m.length||g&&1>g.length)l.visible=!1;else{l._xlength=Array.isArray(m)&&k.isArrayOrTypedArray(m[0])?h.length:h[0].length;l._ylength=h.length;p.getComponentMethod("calendars",
"handleTraceDefaults")(f,l,["x","y","z"],c);d("text");d("hovertext");d("hovertemplate");"lighting.ambient lighting.diffuse lighting.specular lighting.roughness lighting.fresnel lightposition.x lightposition.y lightposition.z hidesurface connectgaps opacity".split(" ").forEach(function(A){d(A)});h=d("surfacecolor");var q=["x","y","z"];for(m=0;3>m;++m){var t="contours."+q[m],v=d(t+".show"),w=d(t+".highlight");if(v||w)for(g=0;3>g;++g)d(t+".project."+q[g]);v&&(d(t+".color"),d(t+".width"),d(t+".usecolormap"));
w&&(d(t+".highlightcolor"),d(t+".highlightwidth"));d(t+".start");d(t+".end");d(t+".size")}h||(n(f,"zmin","cmin"),n(f,"zmax","cmax"),n(f,"zauto","cauto"));a(f,l,c,d,{prefix:"",cLetter:"c"});r(f,l,c,d);l._length=null}},opacityscaleDefaults:r}},{"../../components/colorscale/defaults":625,"../../lib":749,"../../registry":880,"./attributes":1278}],1282:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),
plot:b("./convert"),moduleType:"trace",name:"surface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":839,"./attributes":1278,"./calc":1279,"./convert":1280,"./defaults":1281}],1283:[function(b,D,G){G=b("../../components/annotations/attributes");var r=b("../../lib/extend").extendFlat,n=b("../../plot_api/edit_types").overrideAll,p=b("../../plots/font_attributes"),k=b("../../plots/domain").attributes;b("../../constants/docs");(D.exports=n({domain:k({name:"table",
trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:r({},G.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:r({},
p({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:r({},G.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:r({},p({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":598,
"../../constants/docs":719,"../../lib/extend":739,"../../plot_api/edit_types":780,"../../plots/domain":824,"../../plots/font_attributes":825}],1284:[function(b,D,G){var r=b("../../plots/get_data").getModuleCalcData,n=b("./plot");G.name="table";G.plot=function(p){var k=r(p.calcdata,"table")[0];k.length&&n(p,k)};G.clean=function(p,k,a,e){p=e._has&&e._has("table");k=k._has&&k._has("table");p&&!k&&e._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":834,"./plot":1291}],1285:[function(b,
D,G){var r=b("../../lib/gup").wrap;D.exports=function(){return r({})}},{"../../lib/gup":746}],1286:[function(b,D,G){D.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"\x3cbr\x3e",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1E3,scrollbarHideDuration:1E3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",
uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",
scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1287:[function(b,D,G){function r(g){if(Array.isArray(g)){for(var h=0,q=0;q<g.length;q++)h=Math.max(h,r(g[q]));return h}return g}function n(g,h){return g+h}function p(g){g=g.slice();var h=Infinity,q=0,t;for(t=0;t<g.length;t++)Array.isArray(g[t])||(g[t]=[g[t]]),h=Math.min(h,g[t].length),q=Math.max(q,g[t].length);if(h!==q)for(t=0;t<
g.length;t++)(h=q-g[t].length)&&(g[t]=g[t].concat(k(h)));return g}function k(g){for(var h=Array(g),q=0;q<g;q++)h[q]="";return h}function a(g){return g.calcdata.columns.reduce(function(h,q){return q.xIndex<g.xIndex?h+q.columnWidth:h},0)}function e(g,h){return Object.keys(g).map(function(q){return c({},g[q],{auxiliaryBlocks:h})})}function f(g,h){for(var q={},t,v=0,w=0,A=l(),z=0,y=0,B=0;B<g.length;B++)if(t=g[B],A.rows.push({rowIndex:B,rowHeight:t}),w+=t,w>=h||B===g.length-1)q[v]=A,A.key=y++,A.firstRowIndex=
z,A.lastRowIndex=B,A=l(),v+=w,z=B+1,w=0;return q}function l(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}var m=b("./constants"),c=b("../../lib/extend").extendFlat,d=b("fast-isnumeric");D.exports=function(g,h){var q=p(h.cells.values),t=function(E){return E.slice(h.header.values.length,E.length)},v=p(h.header.values);v.length&&!v[0].length&&(v[0]=[""],v=p(v));var w=v.concat(t(q).map(function(){return k((v[0]||[""]).length)})),A=h.domain,z=Math.floor(g._fullLayout._size.w*(A.x[1]-A.x[0])),
y=Math.floor(g._fullLayout._size.h*(A.y[1]-A.y[0])),B=h.header.values.length?w[0].map(function(){return h.header.height}):[m.emptyHeaderHeight],C=q.length?q[0].map(function(){return h.cells.height}):[],u=B.reduce(n,0);C=f(C,y-u+m.uplift);B=f(B,u);B=e(B,[]);C=e(C,B);var F={},H=h._fullInput.columnorder.concat(t(q.map(function(E,L){return L}))),J=w.map(function(E,L){E=Array.isArray(h.columnwidth)?h.columnwidth[Math.min(L,h.columnwidth.length-1)]:h.columnwidth;return d(E)?Number(E):1}),I=J.reduce(n,0);
J=J.map(function(E){return E/I*z});t=Math.max(r(h.header.line.width),r(h.cells.line.width));var M={key:h.uid+g._context.staticPlot,translateX:A.x[0]*g._fullLayout._size.w,translateY:g._fullLayout._size.h*(1-A.y[1]),size:g._fullLayout._size,width:z,maxLineWidth:t,height:y,columnOrder:H,groupHeight:y,rowBlocks:C,headerRowBlocks:B,scrollY:0,cells:c({},h.cells,{values:q}),headerCells:c({},h.header,{values:w}),gdColumns:w.map(function(E){return E[0]}),gdColumnsOriginalOrder:w.map(function(E){return E[0]}),
prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:w.map(function(E,L){F[E]=(F[E]||0)+1;return{key:E+"__"+F[E],label:E,specIndex:L,xIndex:H[L],xScale:a,x:void 0,calcdata:void 0,columnWidth:J[L]}})};M.columns.forEach(function(E){E.calcdata=M;E.x=a(E)});return M}},{"../../lib/extend":739,"./constants":1286,"fast-isnumeric":241}],1288:[function(b,D,G){function r(p){var k=(p=p.rowBlocks[p.page])?p.rows[0].rowIndex:0;return[k,p?k+p.rows.length:0]}var n=b("../../lib/extend").extendFlat;
G.splitToPanels=function(p){var k=[0,0],a=n({},p,{key:"header",type:"header",page:0,prevPages:k,currentRepaint:[null,null],dragHandle:!0,values:p.calcdata.headerCells.values[p.specIndex],rowBlocks:p.calcdata.headerRowBlocks,calcdata:n({},p.calcdata,{cells:p.calcdata.headerCells})}),e=n({},p,{key:"cells1",type:"cells",page:0,prevPages:k,currentRepaint:[null,null],dragHandle:!1,values:p.calcdata.cells.values[p.specIndex],rowBlocks:p.calcdata.rowBlocks});p=n({},p,{key:"cells2",type:"cells",page:1,prevPages:k,
currentRepaint:[null,null],dragHandle:!1,values:p.calcdata.cells.values[p.specIndex],rowBlocks:p.calcdata.rowBlocks});return[e,p,a]};G.splitToCells=function(p){var k=r(p);return(p.values||[]).slice(k[0],k[1]).map(function(a,e){var f="string"===typeof a&&a.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:e+f,key:k[0]+e,column:p,calcdata:p.calcdata,page:p.page,rowBlocks:p.rowBlocks,value:a}})}},{"../../lib/extend":739}],1289:[function(b,D,G){function r(a,e){var f=a.header.values.length;
a=(a.columnorder||[]).slice(0,f);var l=a.slice().sort(function(c,d){return c-d});a=a.map(function(c){return l.indexOf(c)});for(var m=a.length;m<f;m++)a.push(m);e("columnorder",a)}var n=b("../../lib"),p=b("./attributes"),k=b("../../plots/domain").defaults;D.exports=function(a,e,f,l){function m(c,d){return n.coerce(a,e,p,c,d)}k(e,l,m);m("columnwidth");m("header.values");m("header.format");m("header.align");m("header.prefix");m("header.suffix");m("header.height");m("header.line.width");m("header.line.color");
m("header.fill.color");n.coerceFont(m,"header.font",n.extendFlat({},l.font));r(e,m);m("cells.values");m("cells.format");m("cells.align");m("cells.prefix");m("cells.suffix");m("cells.height");m("cells.line.width");m("cells.line.color");m("cells.fill.color");n.coerceFont(m,"cells.font",n.extendFlat({},l.font));e._length=null}},{"../../lib":749,"../../plots/domain":824,"./attributes":1283}],1290:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),
plot:b("./plot"),moduleType:"trace",name:"table",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1283,"./base_plot":1284,"./calc":1285,"./defaults":1289,"./plot":1291}],1291:[function(b,D,G){function r(ea){return Math.ceil(ea.calcdata.maxLineWidth/2)}function n(ea,ca){return"clip"+ea._fullLayout._uid+"_columnBoundaryClippath_"+ca.calcdata.key+"_"+ca.specIndex}function p(ea){return[].concat.apply([],ea.map(function(ca){return ca})).map(function(ca){return ca.__data__})}
function k(ea,ca,ba){var ka=ea.selectAll("."+L.cn.scrollbarKit).data(N.repeat,N.keyFun);ka.enter().append("g").classed(L.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision");ka.each(function(pa){var oa=pa.scrollbarState;var ja=pa.rowBlocks;ja=M(ja,ja.length-1)+(ja.length?E(ja[ja.length-1],Infinity):1);oa.totalHeight=ja;oa.scrollableAreaHeight=pa.groupHeight-z(pa);oa.currentlyVisibleHeight=Math.min(oa.totalHeight,oa.scrollableAreaHeight);oa.ratio=oa.currentlyVisibleHeight/oa.totalHeight;
oa.barLength=Math.max(oa.ratio*oa.currentlyVisibleHeight,L.goldenRatio*L.scrollbarWidth);oa.barWiggleRoom=oa.currentlyVisibleHeight-oa.barLength;oa.wiggleRoom=Math.max(0,oa.totalHeight-oa.scrollableAreaHeight);oa.topY=0===oa.barWiggleRoom?0:pa.scrollY/oa.wiggleRoom*oa.barWiggleRoom;oa.bottomY=oa.topY+oa.barLength;oa.dragMultiplier=oa.wiggleRoom/oa.barWiggleRoom}).attr("transform",function(pa){return"translate("+(pa.width+L.scrollbarWidth/2+L.scrollbarOffset)+" "+z(pa)+")"});ka=ka.selectAll("."+L.cn.scrollbar).data(N.repeat,
N.keyFun);ka.enter().append("g").classed(L.cn.scrollbar,!0);var qa=ka.selectAll("."+L.cn.scrollbarSlider).data(N.repeat,N.keyFun);qa.enter().append("g").classed(L.cn.scrollbarSlider,!0);qa.attr("transform",function(pa){return"translate(0 "+(pa.scrollbarState.topY||0)+")"});qa=qa.selectAll("."+L.cn.scrollbarGlyph).data(N.repeat,N.keyFun);qa.enter().append("line").classed(L.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",L.scrollbarWidth).attr("stroke-linecap","round").attr("y1",L.scrollbarWidth/
2);qa.attr("y2",function(pa){return pa.scrollbarState.barLength-L.scrollbarWidth/2}).attr("stroke-opacity",function(pa){return pa.columnDragInProgress||!pa.scrollbarState.barWiggleRoom||ba?0:.4});qa.transition().delay(0).duration(0);qa.transition().delay(L.scrollbarHideDelay).duration(L.scrollbarHideDuration).attr("stroke-opacity",0);ka=ka.selectAll("."+L.cn.scrollbarCaptureZone).data(N.repeat,N.keyFun);ka.enter().append("line").classed(L.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",
.01).attr("stroke-width",L.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(pa){var oa=P.event.y,ja=this.getBoundingClientRect(),ra=pa.scrollbarState;oa-=ja.top;ja=P.scale.linear().domain([0,ra.scrollableAreaHeight]).range([0,ra.totalHeight]).clamp(!0);ra.topY<=oa&&oa<=ra.bottomY||C(ca,ea,null,ja(oa-ra.barLength/2))(pa)}).call(P.behavior.drag().origin(function(pa){P.event.stopPropagation();pa.scrollbarState.scrollbarScrollInProgress=!0;return pa}).on("drag",
C(ca,ea)).on("dragend",function(){}));ka.attr("y2",function(pa){return pa.scrollbarState.scrollableAreaHeight});ca._context.staticPlot&&(qa.remove(),ka.remove())}function a(ea,ca,ba,ka){ba=ba.selectAll("."+L.cn.columnCells).data(N.repeat,N.keyFun);ba.enter().append("g").classed(L.cn.columnCells,!0);ba.exit().remove();ba=e(ba);c(ba);var qa=f(ba);g(qa);qa=m(ba);qa=l(qa);d(qa);h(qa,ca,ka,ea);I(ba)}function e(ea){ea=ea.selectAll("."+L.cn.columnCell).data(aa.splitToCells,function(ca){return ca.keyWithinBlock});
ea.enter().append("g").classed(L.cn.columnCell,!0);ea.exit().remove();return ea}function f(ea){ea=ea.selectAll("."+L.cn.cellRect).data(N.repeat,function(ca){return ca.keyWithinBlock});ea.enter().append("rect").classed(L.cn.cellRect,!0);return ea}function l(ea){ea=ea.selectAll("."+L.cn.cellText).data(N.repeat,function(ca){return ca.keyWithinBlock});ea.enter().append("text").classed(L.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){P.event.stopPropagation()});return ea}
function m(ea){ea=ea.selectAll("."+L.cn.cellTextHolder).data(N.repeat,function(ca){return ca.keyWithinBlock});ea.enter().append("g").classed(L.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision");return ea}function c(ea){ea.each(function(ca,ba){var ka=ca.calcdata.cells.font,qa=ca.column.specIndex;ka={size:t(ka.size,qa,ba),color:t(ka.color,qa,ba),family:t(ka.family,qa,ba)};ca.rowNumber=ca.key;ca.align=t(ca.calcdata.cells.align,qa,ba);ca.cellBorderWidth=t(ca.calcdata.cells.line.width,
qa,ba);ca.font=ka})}function d(ea){ea.each(function(ca){Q.font(P.select(this),ca.font)})}function g(ea){ea.attr("width",function(ca){return ca.column.columnWidth}).attr("stroke-width",function(ca){return ca.cellBorderWidth}).each(function(ca){var ba=P.select(this);Y.stroke(ba,t(ca.calcdata.cells.line.color,ca.column.specIndex,ca.rowNumber));Y.fill(ba,t(ca.calcdata.cells.fill.color,ca.column.specIndex,ca.rowNumber))})}function h(ea,ca,ba,ka){ea.text(function(qa){var pa=qa.column.specIndex,oa=qa.rowNumber,
ja=qa.value,ra="string"===typeof ja,ha=ra&&ja.match(/<br>/i),la=!ra||ha;qa.mayHaveMarkup=ra&&ja.match(/[<&>]/);ja="string"===typeof ja&&ja.match(L.latexCheck);ra=(qa.latex=ja)?"":t(qa.calcdata.cells.prefix,pa,oa)||"";var ua=ja?"":t(qa.calcdata.cells.suffix,pa,oa)||"";pa=ja?null:t(qa.calcdata.cells.format,pa,oa)||null;pa=ra+(pa?P.format(pa)(qa.value):qa.value)+ua;var na;qa.wrappingNeeded=!qa.wrapped&&!la&&!ja&&(na=-1!==pa.indexOf(L.wrapSplitCharacter));qa.cellHeightMayIncrease=ha||ja||qa.mayHaveMarkup||
(void 0===na?-1!==pa.indexOf(L.wrapSplitCharacter):na);qa.needsConvertToTspans=qa.mayHaveMarkup||qa.wrappingNeeded||qa.latex;qa.wrappingNeeded?(ha=(" "===L.wrapSplitCharacter?pa.replace(/<a href=/ig,"\x3ca_href\x3d"):pa).split(L.wrapSplitCharacter),ha=" "===L.wrapSplitCharacter?ha.map(function(wa){return wa.replace(/<a_href=/ig,"\x3ca href\x3d")}):ha,qa.fragments=ha.map(function(wa){return{text:wa,width:null}}),qa.fragments.push({fragment:L.wrapSpacer,width:null}),qa=ha.join(L.lineBreaker)+L.lineBreaker+
L.wrapSpacer):(delete qa.fragments,qa=pa);return qa}).attr("dy",function(qa){return qa.needsConvertToTspans?0:"0.75em"}).each(function(qa){var pa=P.select(this),oa=qa.wrappingNeeded?F:H;qa.needsConvertToTspans?O.convertToTspans(pa,ka,oa(ba,this,ca,ka,qa)):P.select(this.parentNode).attr("transform",function(ja){return"translate("+J(ja)+" "+L.cellPad+")"}).attr("text-anchor",function(ja){return{left:"start",center:"middle",right:"end"}[ja.align]})})}function q(ea,ca,ba){var ka=ca.gdColumnsOriginalOrder;
ca.gdColumns.sort(function(qa,pa){return ba[ka.indexOf(qa)]-ba[ka.indexOf(pa)]});ca.columnorder=ba;ea.emit("plotly_restyle")}function t(ea,ca,ba){return Array.isArray(ea)?(ea=ea[Math.min(ca,ea.length-1)],Array.isArray(ea)?ea[Math.min(ba,ea.length-1)]:ea):ea}function v(ea,ca,ba){ea.transition().ease(L.releaseTransitionEase).duration(L.releaseTransitionDuration).attr("transform","translate("+ca.x+" "+ba+")")}function w(ea){return"cells"===ea.type}function A(ea){return"header"===ea.type}function z(ea){return(ea.rowBlocks.length?
ea.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(ca,ba){return ca+E(ba,Infinity)},0)}function y(ea,ca,ba){for(var ka=[],qa=0,pa=0;pa<ea.length;pa++){for(var oa=ea[pa],ja=oa.rows,ra=0,ha=0;ha<ja.length;ha++)ra+=ja[ha].rowHeight;oa.allRowsHeight=ra;oa=ca;ja=oa+ba;oa<qa+ra&&ja>qa&&ka.push(pa);qa+=ra}return ka}function B(ea,ca,ba){var ka=p(ca)[0];if(void 0!==ka){var qa=ka.rowBlocks,pa=ka.calcdata,oa=M(qa,qa.length),ja=ka.calcdata.groupHeight-z(ka),ra=pa.scrollY=Math.max(0,Math.min(oa-ja,pa.scrollY)),
ha=y(qa,ra,ja);1===ha.length&&(ha[0]===qa.length-1?ha.unshift(ha[0]-1):ha.push(ha[0]+1));ha[0]%2&&ha.reverse();ca.each(function(la,ua){la.page=ha[ua];la.scrollY=ra});ca.attr("transform",function(la){return"translate(0 "+(M(la.rowBlocks,la.page)-la.scrollY)+")"});ea&&(u(ea,ba,ca,ha,ka.prevPages,ka,0),u(ea,ba,ca,ha,ka.prevPages,ka,1),k(ba,ea))}}function C(ea,ca,ba,ka){return function(qa){var pa=qa.calcdata?qa.calcdata:qa;qa=ca.filter(function(ra){return pa.key===ra.key});var oa=ba||pa.scrollbarState.dragMultiplier,
ja=pa.scrollY;pa.scrollY=void 0===ka?pa.scrollY+oa*P.event.dy:ka;oa=qa.selectAll("."+L.cn.yColumn).selectAll("."+L.cn.columnBlock).filter(w);B(ea,oa,qa);return pa.scrollY===ja}}function u(ea,ca,ba,ka,qa,pa,oa){ka[oa]!==qa[oa]&&(clearTimeout(pa.currentRepaint[oa]),pa.currentRepaint[oa]=setTimeout(function(){var ja=ba.filter(function(ra,ha){return ha===oa&&ka[ha]!==qa[ha]});a(ea,ca,ja,ba);qa[oa]=ka[oa]}))}function F(ea,ca,ba,ka){return function(){var qa=P.select(ca.parentNode);qa.each(function(pa){var oa=
pa.fragments;qa.selectAll("tspan.line").each(function(Ca,Fa){oa[Fa].width=this.getComputedTextLength()});var ja=oa[oa.length-1].width,ra=oa.slice(0,-1),ha=[],la=0,ua=pa.column.columnWidth-2*L.cellPad;for(pa.value="";ra.length;){var na=ra.shift();var wa=na.width+ja;la+wa>ua&&(pa.value+=ha.join(L.wrapSpacer)+L.lineBreaker,ha=[],la=0);ha.push(na.text);la+=wa}la&&(pa.value+=ha.join(L.wrapSpacer));pa.wrapped=!0});qa.selectAll("tspan.line").remove();h(qa.select("."+L.cn.cellText),ba,ea,ka);P.select(ca.parentNode.parentNode).call(I)}}
function H(ea,ca,ba,ka,qa){return function(){if(!qa.settledY){var pa=P.select(ca.parentNode),oa=qa.rowBlocks[qa.page],ja=qa.key-oa.firstRowIndex,ra=oa.rows[ja].rowHeight,ha=qa.cellHeightMayIncrease?ca.parentNode.getBoundingClientRect().height+2*L.cellPad:ra;ra=Math.max(ha,ra);ra-oa.rows[ja].rowHeight&&(oa.rows[ja].rowHeight=ra,ea.selectAll("."+L.cn.columnCell).call(I),B(null,ea.filter(w),0),k(ba,ka,!0));pa.attr("transform",function(){var la=this.parentNode.getBoundingClientRect(),ua=P.select(this.parentNode).select("."+
L.cn.cellRect).node().getBoundingClientRect(),na=this.transform.baseVal.consolidate();la=ua.top-la.top+(na?na.matrix.f:L.cellPad);return"translate("+J(qa,P.select(this.parentNode).select("."+L.cn.cellTextHolder).node().getBoundingClientRect().width)+" "+la+")"});qa.settledY=!0}}}function J(ea,ca){switch(ea.align){case "left":return L.cellPad;case "right":return ea.column.columnWidth-(ca||0)-L.cellPad;case "center":return(ea.column.columnWidth-(ca||0))/2;default:return L.cellPad}}function I(ea){ea.attr("transform",
function(ca){var ba=ca.rowBlocks[0].auxiliaryBlocks.reduce(function(ka,qa){return ka+E(qa,Infinity)},0);return"translate(0 "+(E(ca.rowBlocks[ca.page],ca.key)+ba)+")"}).selectAll("."+L.cn.cellRect).attr("height",function(ca){var ba=ca.rowBlocks[ca.page];return ba.rows[ca.key-ba.firstRowIndex].rowHeight})}function M(ea,ca){var ba=0;for(--ca;0<=ca;ca--){var ka=ea[ca];var qa=ka.allRowsHeight;if(void 0!==qa)ka=qa;else{for(var pa=qa=0;pa<ka.rows.length;pa++)qa+=ka.rows[pa].rowHeight;ka=ka.allRowsHeight=
qa}ba+=ka}return ba}function E(ea,ca){for(var ba=0,ka=0;ka<ea.rows.length&&ea.rows[ka].rowIndex<ca;ka++)ba+=ea.rows[ka].rowHeight;return ba}var L=b("./constants"),P=b("d3"),N=b("../../lib/gup"),Q=b("../../components/drawing"),O=b("../../lib/svg_text_utils"),T=b("../../lib").raiseToTop,V=b("../../lib").cancelTransition,Z=b("./data_preparation_helper"),aa=b("./data_split_helpers"),Y=b("../../components/color");D.exports=function(ea,ca){var ba=!ea._context.staticPlot;ca=ea._fullLayout._paper.selectAll("."+
L.cn.table).data(ca.map(function(ja){ja=N.unwrap(ja).trace;return Z(ea,ja)}),N.keyFun);ca.exit().remove();ca.enter().append("g").classed(L.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all");ca.attr("width",function(ja){return ja.width+ja.size.l+ja.size.r}).attr("height",function(ja){return ja.height+ja.size.t+ja.size.b}).attr("transform",
function(ja){return"translate("+ja.translateX+","+ja.translateY+")"});var ka=ca.selectAll("."+L.cn.tableControlView).data(N.repeat,N.keyFun);ca=ka.enter().append("g").classed(L.cn.tableControlView,!0).style("box-sizing","content-box");if(ba){var qa="onwheel"in document?"wheel":"mousewheel";ca.on("mousemove",function(ja){ka.filter(function(ra){return ja===ra}).call(k,ea)}).on(qa,function(ja){ja.scrollbarState.wheeling||(ja.scrollbarState.wheeling=!0,C(ea,ka,null,ja.scrollY+P.event.deltaY)(ja)||(P.event.stopPropagation(),
P.event.preventDefault()),ja.scrollbarState.wheeling=!1)}).call(k,ea,!0)}ka.attr("transform",function(ja){return"translate("+ja.size.l+" "+ja.size.t+")"});ca=ka.selectAll("."+L.cn.scrollBackground).data(N.repeat,N.keyFun);ca.enter().append("rect").classed(L.cn.scrollBackground,!0).attr("fill","none");ca.attr("width",function(ja){return ja.width}).attr("height",function(ja){return ja.height});ka.each(function(ja){Q.setClipUrl(P.select(this),"clip"+ea._fullLayout._uid+"_scrollAreaBottomClip_"+ja.key,
ea)});var pa=ka.selectAll("."+L.cn.yColumn).data(function(ja){return ja.columns},N.keyFun);pa.enter().append("g").classed(L.cn.yColumn,!0);pa.exit().remove();pa.attr("transform",function(ja){return"translate("+ja.x+" 0)"});ba&&pa.call(P.behavior.drag().origin(function(ja){var ra=P.select(this);v(ra,ja,-L.uplift);T(this);ja.calcdata.columnDragInProgress=!0;k(ka.filter(function(ha){return ja.calcdata.key===ha.key}),ea);return ja}).on("drag",function(ja){var ra=P.select(this);ja.x=Math.max(-L.overdrag,
Math.min(ja.calcdata.width+L.overdrag-ja.columnWidth,P.event.x));p(pa).filter(function(ha){return ha.calcdata.key===ja.calcdata.key}).sort(function(ha,la){return(ja===ha?P.event.x:ha.x)+ha.columnWidth/2-((ja===la?P.event.x:la.x)+la.columnWidth/2)}).forEach(function(ha,la){ha.xIndex=la;ha.x=ja===ha?ha.x:ha.xScale(ha)});pa.filter(function(ha){return ja!==ha}).transition().ease(L.transitionEase).duration(L.transitionDuration).attr("transform",function(ha){return"translate("+ha.x+" 0)"});ra.call(V).attr("transform",
"translate("+ja.x+" -"+L.uplift+" )")}).on("dragend",function(ja){var ra=P.select(this),ha=ja.calcdata;ja.x=ja.xScale(ja);ja.calcdata.columnDragInProgress=!1;v(ra,ja,0);q(ea,ha,ha.columns.map(function(la){return la.xIndex}))}));pa.each(function(ja){Q.setClipUrl(P.select(this),n(ea,ja),ea)});qa=pa.selectAll("."+L.cn.columnBlock).data(aa.splitToPanels,N.keyFun);qa.enter().append("g").classed(L.cn.columnBlock,!0).attr("id",function(ja){return ja.key});qa.style("cursor",function(ja){return ja.dragHandle?
"ew-resize":ja.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var oa=qa.filter(A);ca=qa.filter(w);ba&&ca.call(P.behavior.drag().origin(function(ja){P.event.stopPropagation();return ja}).on("drag",C(ea,ka,-1)).on("dragend",function(){}));a(ea,ka,oa,qa);a(ea,ka,ca,qa);ba=ka.selectAll("."+L.cn.scrollAreaClip).data(N.repeat,N.keyFun);ba.enter().append("clipPath").classed(L.cn.scrollAreaClip,!0).attr("id",function(ja){return"clip"+ea._fullLayout._uid+"_scrollAreaBottomClip_"+ja.key});ba=
ba.selectAll("."+L.cn.scrollAreaClipRect).data(N.repeat,N.keyFun);ba.enter().append("rect").classed(L.cn.scrollAreaClipRect,!0).attr("x",-L.overdrag).attr("y",-L.uplift).attr("fill","none");ba.attr("width",function(ja){return ja.width+2*L.overdrag}).attr("height",function(ja){return ja.height+L.uplift});pa.selectAll("."+L.cn.columnBoundary).data(N.repeat,N.keyFun).enter().append("g").classed(L.cn.columnBoundary,!0);ba=pa.selectAll("."+L.cn.columnBoundaryClippath).data(N.repeat,N.keyFun);ba.enter().append("clipPath").classed(L.cn.columnBoundaryClippath,
!0);ba.attr("id",function(ja){return n(ea,ja)});ba=ba.selectAll("."+L.cn.columnBoundaryRect).data(N.repeat,N.keyFun);ba.enter().append("rect").classed(L.cn.columnBoundaryRect,!0).attr("fill","none");ba.attr("width",function(ja){return ja.columnWidth+2*r(ja)}).attr("height",function(ja){return ja.calcdata.height+2*r(ja)+L.uplift}).attr("x",function(ja){return-r(ja)}).attr("y",function(ja){return-r(ja)});B(null,ca,ka)}},{"../../components/color":615,"../../components/drawing":637,"../../lib":749,"../../lib/gup":746,
"../../lib/svg_text_utils":773,"./constants":1286,"./data_preparation_helper":1287,"./data_split_helpers":1288,d3:169}],1292:[function(b,D,G){G=b("../../plots/template_attributes").hovertemplateAttrs;var r=b("../../plots/template_attributes").texttemplateAttrs,n=b("../../components/colorscale/attributes"),p=b("../../plots/domain").attributes,k=b("../pie/attributes"),a=b("../sunburst/attributes"),e=b("./constants");b=b("../../lib/extend").extendFlat;D.exports={labels:a.labels,parents:a.parents,values:a.values,
branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:"squarify binary dice slice slice-dice dice-slice".split(" "),dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:b({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},
r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},n("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:["\x3e","\x3c","|","/","\\"],dflt:"\x3e",editType:"plot"},
thickness:{valType:"number",min:12,editType:"plot"},textfont:b({},k.textfont,{}),editType:"calc"},text:k.text,textinfo:a.textinfo,texttemplate:r({editType:"plot"},{keys:e.eventDataKeys.concat(["label","value"])}),hovertext:k.hovertext,hoverinfo:a.hoverinfo,hovertemplate:G({},{keys:e.eventDataKeys}),textfont:k.textfont,insidetextfont:k.insidetextfont,outsidetextfont:b({},k.outsidetextfont,{}),textposition:{valType:"enumerated",values:"top left;top center;top right;middle left;middle center;middle right;bottom left;bottom center;bottom right".split(";"),
dflt:"top left",editType:"plot"},domain:p({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plots/domain":824,"../../plots/template_attributes":875,"../pie/attributes":1129,"../sunburst/attributes":1266,"./constants":1295}],1293:[function(b,D,G){var r=b("../../plots/plots");G.name="treemap";G.plot=function(n,p,k,a){r.plotBasePlot(G.name,n,p,k,a)};G.clean=function(n,p,k,a){r.cleanBasePlot(G.name,n,p,k,a)}},{"../../plots/plots":860}],
1294:[function(b,D,G){var r=b("../sunburst/calc");G.calc=function(n,p){return r.calc(n,p)};G.crossTraceCalc=function(n){return r._runCrossTraceCalc("treemap",n)}},{"../sunburst/calc":1268}],1295:[function(b,D,G){D.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:"currentPath root entry percentRoot percentEntry percentParent".split(" "),gapWithPathbar:1}},{}],1296:[function(b,D,G){var r=b("../../lib"),n=b("./attributes"),p=b("../../components/color"),k=b("../../plots/domain").defaults,
a=b("../bar/defaults").handleText,e=b("../bar/constants").TEXTPAD;b=b("../../components/colorscale");var f=b.hasColorscale,l=b.handleDefaults;D.exports=function(m,c,d,g){function h(w,A){return r.coerce(m,c,n,w,A)}d=h("labels");var q=h("parents");if(d&&d.length&&q&&q.length){(d=h("values"))&&d.length?h("branchvalues"):h("count");h("level");h("maxdepth");"squarify"===h("tiling.packing")&&h("tiling.squarifyratio");h("tiling.flip");h("tiling.pad");d=h("text");h("texttemplate");c.texttemplate||h("textinfo",
Array.isArray(d)?"text+label":"label");h("hovertext");h("hovertemplate");d=h("pathbar.visible");a(m,c,g,h,"auto",{hasPathbar:d,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});h("textposition");q=-1!==c.textposition.indexOf("bottom");h("marker.line.width")&&h("marker.line.color",g.paper_bgcolor);var t=h("marker.colors"),v=c._hasColorscale=f(m,"marker","colors")||(m.marker||{}).coloraxis;v?l(m,c,g,h,{prefix:"marker.",
cLetter:"c"}):h("marker.depthfade",!(t||[]).length);t=2*c.textfont.size;h("marker.pad.t",q?t/4:t);h("marker.pad.l",t/4);h("marker.pad.r",t/4);h("marker.pad.b",q?t:t/4);v&&l(m,c,g,h,{prefix:"marker.",cLetter:"c"});c._hovered={marker:{line:{width:2,color:p.contrast(g.paper_bgcolor)}}};d&&(h("pathbar.thickness",c.pathbar.textfont.size+2*e),h("pathbar.side"),h("pathbar.edgeshape"));k(c,g,h);c._length=null}else c.visible=!1}},{"../../components/color":615,"../../components/colorscale":627,"../../lib":749,
"../../plots/domain":824,"../bar/constants":892,"../bar/defaults":894,"./attributes":1292}],1297:[function(b,D,G){var r=b("d3"),n=b("../../lib"),p=b("../../components/drawing"),k=b("../../lib/svg_text_utils"),a=b("./partition"),e=b("./style").styleOne,f=b("./constants"),l=b("../sunburst/helpers"),m=b("../sunburst/fx");D.exports=function(c,d,g,h,q){var t=q.barDifY,v=q.width,w=q.height,A=q.viewX,z=q.viewY,y=q.pathSlice,B=q.toMoveInsideSlice,C=q.strTransform,u=q.hasTransition,F=q.handleSlicesExit,H=
q.makeUpdateSliceInterpolator,J=q.makeUpdateTextInterpolator,I={},M=c._fullLayout;q=d[0];var E=q.trace;q=q.hierarchy;var L=v/E._entryDepth,P=l.listPath(g.data,"id");q=a(q.copy(),[v,w],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();q=q.filter(function(N){var Q=P.indexOf(N.data.id);if(-1===Q)return!1;N.x0=L*Q;N.x1=L*(Q+1);N.y0=t;N.y1=t+w;return N.onPathbar=!0});q.reverse();h=h.data(q,l.getPtId);h.enter().append("g").classed("pathbar",!0);F(h,!0,I,[v,w],y);h.order();u&&(h=
h.transition().each("end",function(){var N=r.select(this);l.setSliceCursor(N,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})}));h.each(function(N){N._hoverX=A(N.x1-Math.min(v,w)/2);N._hoverY=z(N.y1-w/2);var Q=r.select(this),O=n.ensureSingle(Q,"path","surface",function(T){T.style("pointer-events","all")});u?O.transition().attrTween("d",function(T){var V=H(T,!0,I,[v,w]);return function(Z){return y(V(Z))}}):O.attr("d",y);Q.call(m,g,c,d,{styleOne:e,eventDataKeys:f.eventDataKeys,transitionTime:f.CLICK_TRANSITION_TIME,
transitionEasing:f.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,c,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:c._transitioning});O.call(e,N,E,{hovered:!1});N._text=(l.getPtLabel(N)||"").split("\x3cbr\x3e").join(" ")||"";Q=n.ensureSingle(Q,"g","slicetext");Q=n.ensureSingle(Q,"text","",function(T){T.attr("data-notex",1)});O=n.ensureUniformFontSize(c,l.determineTextFont(E,N,M.font,{onPathbar:!0}));Q.text(N._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(p.font,O).call(k.convertToTspans,
c);N.textBB=p.bBox(Q.node());N.transform=B(N,{fontSize:O.size,onPathbar:!0});N.transform.fontSize=O.size;u?Q.transition().attrTween("transform",function(T){var V=J(T,!0,I,[v,w]);return function(Z){return C(V(Z))}}):Q.attr("transform",C(N))})}},{"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../sunburst/fx":1271,"../sunburst/helpers":1272,"./constants":1295,"./partition":1302,"./style":1304,d3:169}],1298:[function(b,D,G){var r=b("d3"),n=b("../../lib"),p=b("../../components/drawing"),
k=b("../../lib/svg_text_utils"),a=b("./partition"),e=b("./style").styleOne,f=b("./constants"),l=b("../sunburst/helpers"),m=b("../sunburst/fx"),c=b("../sunburst/plot").formatSliceLabel;D.exports=function(d,g,h,q,t){var v=t.width,w=t.height,A=t.viewX,z=t.viewY,y=t.pathSlice,B=t.toMoveInsideSlice,C=t.strTransform,u=t.hasTransition,F=t.handleSlicesExit,H=t.makeUpdateSliceInterpolator,J=t.makeUpdateTextInterpolator;t=t.prevEntry;var I=d._fullLayout,M=g[0].trace,E=-1!==M.textposition.indexOf("left"),L=
-1!==M.textposition.indexOf("right"),P=-1!==M.textposition.indexOf("bottom"),N=!P&&!M.marker.pad.t||P&&!M.marker.pad.b,Q=a(h,[v,w],{packing:M.tiling.packing,squarifyratio:M.tiling.squarifyratio,flipX:-1<M.tiling.flip.indexOf("x"),flipY:-1<M.tiling.flip.indexOf("y"),pad:{inner:M.tiling.pad,top:M.marker.pad.t,left:M.marker.pad.l,right:M.marker.pad.r,bottom:M.marker.pad.b}}).descendants(),O=Infinity,T=-Infinity;Q.forEach(function(aa){var Y=aa.depth;Y>=M._maxDepth?(aa.x0=aa.x1=(aa.x0+aa.x1)/2,aa.y0=aa.y1=
(aa.y0+aa.y1)/2):(O=Math.min(O,Y),T=Math.max(T,Y))});q=q.data(Q,l.getPtId);M._maxVisibleLayers=isFinite(T)?T-O+1:0;q.enter().append("g").classed("slice",!0);F(q,!1,{},[v,w],y);q.order();var V=null;if(u&&t){var Z=l.getPtId(t);q.each(function(aa){null===V&&l.getPtId(aa)===Z&&(V={x0:aa.x0,x1:aa.x1,y0:aa.y0,y1:aa.y1})})}u&&(q=q.transition().each("end",function(){var aa=r.select(this);l.setSliceCursor(aa,d,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}));q.each(function(aa){var Y=l.isHeader(aa,M);
aa._hoverX=A(aa.x1-M.marker.pad.r);aa._hoverY=P?z(aa.y1-M.marker.pad.b/2):z(aa.y0+M.marker.pad.t/2);var ea=r.select(this),ca=n.ensureSingle(ea,"path","surface",function(ba){ba.style("pointer-events","all")});u?ca.transition().attrTween("d",function(ba){var ka=H(ba,!1,V||{x0:0,x1:v,y0:0,y1:w},[v,w]);return function(qa){return y(ka(qa))}}):ca.attr("d",y);ea.call(m,h,d,g,{styleOne:e,eventDataKeys:f.eventDataKeys,transitionTime:f.CLICK_TRANSITION_TIME,transitionEasing:f.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,
d,{isTransitioning:d._transitioning});ca.call(e,aa,M,{hovered:!1});aa._text=aa.x0===aa.x1||aa.y0===aa.y1?"":Y?N?"":l.getPtLabel(aa)||"":c(aa,h,M,g,I)||"";ea=n.ensureSingle(ea,"g","slicetext");ea=n.ensureSingle(ea,"text","",function(ba){ba.attr("data-notex",1)});ca=n.ensureUniformFontSize(d,l.determineTextFont(M,aa,I.font));ea.text(aa._text||" ").classed("slicetext",!0).attr("text-anchor",L?"end":E||Y?"start":"middle").call(p.font,ca).call(k.convertToTspans,d);aa.textBB=p.bBox(ea.node());aa.transform=
B(aa,{fontSize:ca.size,isHeader:Y});aa.transform.fontSize=ca.size;u?ea.transition().attrTween("transform",function(ba){var ka=J(ba,!1,V||{x0:0,x1:v,y0:0,y1:w},[v,w]);return function(qa){return C(ka(qa))}}):ea.attr("transform",C(aa))});return V}},{"../../components/drawing":637,"../../lib":749,"../../lib/svg_text_utils":773,"../sunburst/fx":1271,"../sunburst/helpers":1272,"../sunburst/plot":1276,"./constants":1295,"./partition":1302,"./style":1304,d3:169}],1299:[function(b,D,G){D.exports={moduleType:"trace",
name:"treemap",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":1173,"./attributes":1292,"./base_plot":1293,"./calc":1294,"./defaults":1296,"./layout_attributes":1300,
"./layout_defaults":1301,"./plot":1303,"./style":1304}],1300:[function(b,D,G){D.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1301:[function(b,D,G){var r=b("../../lib"),n=b("./layout_attributes");D.exports=function(p,k){r.coerce(p,k,n,"treemapcolorway",k.colorway);r.coerce(p,k,n,"extendtreemapcolors",void 0)}},{"../../lib":749,"./layout_attributes":1300}],1302:[function(b,D,G){function r(k,a){switch(k){case "squarify":return p.treemapSquarify.ratio(a);
case "binary":return p.treemapBinary;case "dice":return p.treemapDice;case "slice":return p.treemapSlice;default:return p.treemapSliceDice}}function n(k,a,e){if(e.swapXY){var f=k.x0;k.x0=k.y0;k.y0=f;f=k.x1;k.x1=k.y1;k.y1=f}e.flipX&&(f=k.x0,k.x0=a[0]-k.x1,k.x1=a[0]-f);e.flipY&&(f=k.y0,k.y0=a[1]-k.y1,k.y1=a[1]-f);if(k=k.children)for(f=0;f<k.length;f++)n(k[f],a,e)}var p=b("d3-hierarchy");D.exports=function(k,a,e){var f=e.flipX,l=e.flipY,m="dice-slice"===e.packing,c=e.pad[l?"bottom":"top"],d=e.pad[f?
"right":"left"],g=e.pad[f?"left":"right"],h=e.pad[l?"top":"bottom"];if(m){var q=d;d=c;c=q;q=g;g=h;h=q}k=p.treemap().tile(r(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(d).paddingRight(g).paddingTop(c).paddingBottom(h).size(m?[a[1],a[0]]:a)(k);(m||f||l)&&n(k,a,{swapXY:m,flipX:f,flipY:l});return k}},{"d3-hierarchy":161}],1303:[function(b,D,G){function r(q){return k.isHierarchyRoot(q)?"":k.getPtId(q)}function n(q,t,v,w){var A=q._fullLayout,z=t[0],y=z.trace,B=z.hierarchy,C=k.findEntryWithLevel(B,
y.level),u=p.select(v);v=u.selectAll("g.pathbar");u=u.selectAll("g.slice");if(C){var F=k.isHierarchyRoot(C),H=!A.uniformtext.mode&&k.hasTransition(w),J=k.getMaxDepth(y),I=A._size,M=y.domain,E=I.w*(M.x[1]-M.x[0]);w=I.h*(M.y[1]-M.y[0]);var L=y.pathbar.thickness,P=y.marker.line.width+d.gapWithPathbar;P=y.pathbar.visible?-1<y.pathbar.side.indexOf("bottom")?w+P:-(L+P):0;var N={x0:E,x1:E,y0:P,y1:P+L},Q=function(na,wa,Ca){var Fa=y.tiling.pad;return{x0:na.x0-Fa-Fa<=wa.x0?0:na.x0-Fa+Fa>=wa.x1?Ca[0]:na.x0,
x1:na.x1+Fa-Fa<=wa.x0?0:na.x1+Fa+Fa>=wa.x1?Ca[0]:na.x1,y0:na.y0-Fa-Fa<=wa.y0?0:na.y0-Fa+Fa>=wa.y1?Ca[1]:na.y0,y1:na.y1+Fa-Fa<=wa.y0?0:na.y1+Fa+Fa>=wa.y1?Ca[1]:na.y1}},O=null,T={},V={},Z=null,aa=function(na,wa){return wa?T[r(na)]:V[r(na)]};z.hasMultipleRoots&&F&&J++;y._maxDepth=J;y._backgroundColor=A.paper_bgcolor;y._entryDepth=C.data.depth;y._atRootLevel=F;var Y=-E/2+I.l+I.w*(M.x[1]+M.x[0])/2,ea=-w/2+I.t+I.h*(1-(M.y[1]+M.y[0])/2),ca=ea+0,ba=Y+0;z=function(na){return ba+na};F=function(na){return ca+
na};var ka=ba+0,qa=function(na){na.x=Math.max(ka,na.x)},pa=y.pathbar.edgeshape;I=function(na){var wa=ba+Math.max(Math.min(na.x0,na.x0),0),Ca=ba+Math.min(Math.max(na.x1,na.x1),E),Fa=ca+na.y0,Xa=ca+na.y1;na=L/2;var ab={},gb={};ab.x=wa;gb.x=Ca;ab.y=gb.y=(Fa+Xa)/2;var bb={x:wa,y:Fa};Fa={x:Ca,y:Fa};Ca={x:Ca,y:Xa};wa={x:wa,y:Xa};"\x3e"===pa?(bb.x-=na,Fa.x-=na,Ca.x-=na,wa.x-=na):"/"===pa?(Ca.x-=na,wa.x-=na,ab.x-=na/2,gb.x-=na/2):"\\"===pa?(bb.x-=na,Fa.x-=na,ab.x-=na/2,gb.x-=na/2):"\x3c"===pa&&(ab.x-=na,
gb.x-=na);qa(bb);qa(wa);qa(ab);qa(Fa);qa(Ca);qa(gb);return"M"+(bb.x+","+bb.y)+"L"+(Fa.x+","+Fa.y)+"L"+(gb.x+","+gb.y)+"L"+(Ca.x+","+Ca.y)+"L"+(wa.x+","+wa.y)+"L"+(ab.x+","+ab.y)+"Z"};var oa=function(na,wa){var Ca=na.x0,Fa=na.x1,Xa=na.y0,ab=na.y1;na=na.textBB;var gb=-1!==y.textposition.indexOf("bottom"),bb=-1!==y.textposition.indexOf("top")||wa.isHeader&&!gb?"start":gb?"end":"middle",La=-1!==y.textposition.indexOf("right"),kb=-1!==y.textposition.indexOf("left")||wa.onPathbar,mb=y.marker.pad;wa.isHeader&&
(Ca+=mb.l-e,Fa-=mb.r-e,Ca>=Fa&&(Ca=Fa=(Ca+Fa)/2),gb?(gb=ab-mb.b,Xa<gb&&gb<ab&&(Xa=gb)):(gb=Xa+mb.t,Xa<gb&&gb<ab&&(ab=gb)));na=f(Ca,Fa,Xa,ab,na,{isHorizontal:!1,constrained:!0,angle:0,anchor:bb,leftToRight:kb?-1:La?1:0});na.fontSize=wa.fontSize;na.targetX=Y+na.targetX;na.targetY=ea+na.targetY;if(isNaN(na.targetX)||isNaN(na.targetY))return{};Ca!==Fa&&Xa!==ab&&l(y.type,na,A);return{scale:na.scale,rotate:na.rotate,textX:na.textX,textY:na.textY,anchorX:na.anchorX,anchorY:na.anchorY,targetX:na.targetX,
targetY:na.targetY}},ja=function(na,wa){for(var Ca,Fa=0;!Ca&&Fa<J;)Fa++,(na=na.parent)?Ca=aa(na,wa):Fa=J;return Ca||{}},ra=function(na,wa,Ca,Fa){Ca=aa(na,wa);na=wa?N:(wa=aa(C,wa))?Q(na,wa,Fa):{};return p.interpolate(Ca,na)};M=function(na,wa,Ca,Fa){var Xa=aa(na,wa);Xa?Fa=Xa:wa?Fa=N:O?na.parent?(Ca=Z||Ca)&&!wa?Fa=Q(na,Ca,Fa):(Fa={},a.extendFlat(Fa,ja(na,wa))):Fa=na:Fa={};return p.interpolate(Fa,{x0:na.x0,x1:na.x1,y0:na.y0,y1:na.y1})};var ha=function(na,wa,Ca,Fa){var Xa=aa(na,wa),ab={};wa?Fa=T[r(B)]||
N:(Ca=V[y.level]||Ca,Fa=na.data.depth-C.data.depth<J?Q(na,Ca,Fa):{});a.extendFlat(ab,{transform:oa({x0:Fa.x0,x1:Fa.x1,y0:Fa.y0,y1:Fa.y1,textBB:na.textBB,_text:na._text},{isHeader:k.isHeader(na,y)})});Xa?ab=Xa:na.parent&&a.extendFlat(ab,ja(na,wa));wa=na.transform;na.x0!==na.x1&&na.y0!==na.y1&&l(y.type,wa,A);return p.interpolate(ab,{transform:{scale:wa.scale,rotate:wa.rotate,textX:wa.textX,textY:wa.textY,anchorX:wa.anchorX,anchorY:wa.anchorY,targetX:wa.targetX,targetY:wa.targetY}})},la=function(na,
wa,Ca,Fa,Xa){var ab=Fa[0],gb=Fa[1];H?na.exit().transition().each(function(){var bb=p.select(this);bb.select("path.surface").transition().attrTween("d",function(La){var kb=ra(La,wa,Ca,[ab,gb]);return function(mb){return Xa(kb(mb))}});bb.select("g.slicetext").attr("opacity",0)}).remove():na.exit().remove()},ua=function(na){var wa=na.transform;na.x0!==na.x1&&na.y0!==na.y1&&l(y.type,wa,A);return a.getTextTransform({textX:wa.textX,textY:wa.textY,anchorX:wa.anchorX,anchorY:wa.anchorY,targetX:wa.targetX,
targetY:wa.targetY,scale:wa.scale,rotate:wa.rotate})};H&&(v.each(function(na){T[r(na)]={x0:na.x0,x1:na.x1,y0:na.y0,y1:na.y1};na.transform&&(T[r(na)].transform={textX:na.transform.textX,textY:na.transform.textY,anchorX:na.transform.anchorX,anchorY:na.transform.anchorY,targetX:na.transform.targetX,targetY:na.transform.targetY,scale:na.transform.scale,rotate:na.transform.rotate})}),u.each(function(na){V[r(na)]={x0:na.x0,x1:na.x1,y0:na.y0,y1:na.y1};na.transform&&(V[r(na)].transform={textX:na.transform.textX,
textY:na.transform.textY,anchorX:na.transform.anchorX,anchorY:na.transform.anchorY,targetX:na.transform.targetX,targetY:na.transform.targetY,scale:na.transform.scale,rotate:na.transform.rotate});!O&&k.isEntry(na)&&(O=na)}));Z=g(q,t,C,u,{width:E,height:w,viewX:function(na){return Y+na},viewY:function(na){return ea+na},pathSlice:function(na){var wa=Y+na.x0,Ca=Y+na.x1,Fa=ea+na.y0;na=ea+na.y1;return Ca-wa&&na-Fa?"M"+(wa+","+(Fa+0))+"L"+(Ca-0+","+Fa)+"L"+(Ca+","+(na-0))+"L"+(wa+0+","+na)+"Z":""},toMoveInsideSlice:oa,
prevEntry:O,makeUpdateSliceInterpolator:M,makeUpdateTextInterpolator:ha,handleSlicesExit:la,hasTransition:H,strTransform:ua});y.pathbar.visible?h(q,t,C,v,{barDifY:P,width:E,height:L,viewX:z,viewY:F,pathSlice:I,toMoveInsideSlice:oa,makeUpdateSliceInterpolator:M,makeUpdateTextInterpolator:ha,handleSlicesExit:la,hasTransition:H,strTransform:ua}):v.remove()}else v.remove(),u.remove()}var p=b("d3"),k=b("../sunburst/helpers"),a=b("../../lib"),e=b("../bar/constants").TEXTPAD,f=b("../bar/plot").toMoveInsideBar;
G=b("../bar/uniform_text");var l=G.recordMinTextSize,m=G.clearMinTextSize,c=b("../bar/style").resizeText,d=b("./constants"),g=b("./draw_descendants"),h=b("./draw_ancestors");D.exports=function(q,t,v,w){var A=q._fullLayout,z=A._treemaplayer,y,B=!v;m("treemap",A);t=z.selectAll("g.trace.treemap").data(t,function(C){return C[0].trace.uid});t.enter().append("g").classed("trace",!0).classed("treemap",!0);t.order();!A.uniformtext.mode&&k.hasTransition(v)?(w&&(y=w()),p.transition().duration(v.duration).ease(v.easing).each("end",
function(){y&&y()}).each("interrupt",function(){y&&y()}).each(function(){z.selectAll("g.trace").each(function(C){n(q,C,this,v)})})):(t.each(function(C){n(q,C,this,v)}),A.uniformtext.mode&&c(q,A._treemaplayer.selectAll(".trace"),"treemap"));B&&t.exit().remove()}},{"../../lib":749,"../bar/constants":892,"../bar/plot":901,"../bar/style":904,"../bar/uniform_text":906,"../sunburst/helpers":1272,"./constants":1295,"./draw_ancestors":1297,"./draw_descendants":1298,d3:169}],1304:[function(b,D,G){function r(f,
l,m,c){var d=(c||{}).hovered;c=l.data.data;var g=c.i;c=c.color;var h=a.isHierarchyRoot(l),q=1;if(d)d=m._hovered.marker.line.color,g=m._hovered.marker.line.width;else if(h&&"rgba(0,0,0,0)"===c)q=0,d="rgba(0,0,0,0)",g=0;else if(d=k.castOption(m,g,"marker.line.color")||p.defaultLine,g=k.castOption(m,g,"marker.line.width")||0,!m._hasColorscale&&!l.onPathbar){var t=m.marker.depthfade;if(t&&(h=p.combine(p.addOpacity(m._backgroundColor,.75),c),!0===t?(t=a.getMaxDepth(m),l=isFinite(t)?a.isLeaf(l)?0:m._maxVisibleLayers-
(l.data.depth-m._entryDepth):l.data.height+1):(l=l.data.depth-m._entryDepth,m._atRootLevel||l++),0<l))for(m=0;m<l;m++)c=p.combine(p.addOpacity(h,.5*m/l),c)}f.style("stroke-width",g).call(p.fill,c).call(p.stroke,d).style("opacity",q)}var n=b("d3"),p=b("../../components/color"),k=b("../../lib"),a=b("../sunburst/helpers"),e=b("../bar/uniform_text").resizeText;D.exports={style:function(f){var l=f._fullLayout._treemaplayer.selectAll(".trace");e(f,l,"treemap");l.each(function(m){var c=n.select(this),d=
m[0].trace;c.style("opacity",d.opacity);c.selectAll("path.surface").each(function(g){n.select(this).call(r,g,d,{hovered:!1})})})},styleOne:r}},{"../../components/color":615,"../../lib":749,"../bar/uniform_text":906,"../sunburst/helpers":1272,d3:169}],1305:[function(b,D,G){G=b("../box/attributes");b=b("../../lib/extend").extendFlat;D.exports={y:G.y,x:G.x,x0:G.x0,y0:G.y0,name:b({},G.name,{}),orientation:b({},G.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",
dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:G.fillcolor,points:b({},G.boxpoints,{}),jitter:b({},
G.jitter,{}),pointpos:b({},G.pointpos,{}),width:b({},G.width,{}),marker:G.marker,text:G.text,hovertext:G.hovertext,hovertemplate:G.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},
color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:G.offsetgroup,alignmentgroup:G.alignmentgroup,selected:G.selected,unselected:G.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":739,"../box/attributes":915}],1306:[function(b,D,G){function r(f,
l,m,c){function d(v){var w=h[v];w="multicategory"===m.type?m.r2c(w):m.d2c(w,0,f[l.valLetter+"calendar"]);return w===e?t[v]:w}var g=f.spanmode,h=f.span||[],q=[l.min,l.max],t=[l.min-2*c,l.max+2*c];c="soft"===g?t:"hard"===g?q:[d(0),d(1)];g={type:"linear",range:c};p.setConvert(g);g.cleanRange();return c}var n=b("../../lib"),p=b("../../plots/cartesian/axes"),k=b("../box/calc"),a=b("./helpers"),e=b("../../constants/numerical").BADNUM;D.exports=function(f,l){var m=k(f,l);if(m[0].t.empty)return m;for(var c=
f._fullLayout,d=p.getFromId(f,l["h"===l.orientation?"xaxis":"yaxis"]),g=Infinity,h=-Infinity,q=0,t=0,v=0;v<m.length;v++){var w=m[v],A=w.pts.map(a.extractVal),z=w;var y=w;var B=y.max-y.min;if(B)if(l.bandwidth)y=Math.max(l.bandwidth,B/1E4);else{var C=A.length,u=n.stdev(A,C-1,y.mean);y=Math.max(1.059*Math.min(u,(y.q3-y.q1)/1.349)*Math.pow(C,-.2),B/100)}else y=l.bandwidth?l.bandwidth:0;B=z.bandwidth=y;z=w.span=r(l,w,d,B);if(w.min===w.max&&0===B)z=w.span=[w.min,w.max],w.density=[{v:1,t:z[0]}],w.bandwidth=
B,q=Math.max(q,1);else{y=z[1]-z[0];C=Math.ceil(y/(B/3));y/=C;if(!isFinite(y)||!isFinite(C))return n.error("Something went wrong with computing the violin span"),m[0].t.empty=!0,m;B=a.makeKDE(w,l,A);w.density=Array(C);C=0;for(u=z[0];u<z[1]+y/2;C++,u+=y){var F=B(u);w.density[C]={v:F,t:u};q=Math.max(q,F)}}t=Math.max(t,A.length);g=Math.min(g,z[0]);h=Math.max(h,z[1])}g=p.findExtremes(d,[g,h],{padded:!0});l._extremes[d._id]=g;l.width?m[0].t.maxKDE=q:(c=c._violinScaleGroupStats,l=l.scalegroup,(d=c[l])?(d.maxKDE=
Math.max(d.maxKDE,q),d.maxCount=Math.max(d.maxCount,t)):c[l]={maxKDE:q,maxCount:t});m[0].t.labels.kde=n._(f,"kde:");return m}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../box/calc":916,"./helpers":1309}],1307:[function(b,D,G){var r=b("../box/cross_trace_calc").setPositionOffset,n=["v","h"];D.exports=function(p,k){var a=p.calcdata,e=k.xaxis;k=k.yaxis;for(var f=0;f<n.length;f++){for(var l=n[f],m="h"===l?k:e,c=[],d=0;d<a.length;d++){var g=a[d],h=g[0].t;g=g[0].trace;
!0!==g.visible||"violin"!==g.type||h.empty||g.orientation!==l||g.xaxis!==e._id||g.yaxis!==k._id||c.push(d)}r("violin",p,c,m)}}},{"../box/cross_trace_calc":917}],1308:[function(b,D,G){var r=b("../../lib"),n=b("../../components/color"),p=b("../box/defaults"),k=b("./attributes");D.exports=function(a,e,f,l){function m(t,v){return r.coerce(a,e,k,t,v)}function c(t,v){return r.coerce2(a,e,k,t,v)}p.handleSampleDefaults(a,e,m,l);if(!1!==e.visible){m("bandwidth");m("side");m("width")||(m("scalegroup",e.name),
m("scalemode"));l=m("span");var d;Array.isArray(l)&&(d="manual");m("spanmode",d);d=m("line.color",(a.marker||{}).color||f);f=m("line.width");var g=m("fillcolor",n.addOpacity(e.line.color,.5));p.handlePointsDefaults(a,e,m,{prefix:""});l=c("box.width");g=c("box.fillcolor",g);var h=c("box.line.color",d),q=c("box.line.width",f);m("box.visible",!!(l||g||h||q))||(e.box={visible:!1});d=c("meanline.color",d);f=c("meanline.width",f);m("meanline.visible",!(!d&&!f))||(e.meanline={visible:!1})}}},{"../../components/color":615,
"../../lib":749,"../box/defaults":918,"./attributes":1305}],1309:[function(b,D,G){var r=b("../../lib");G.makeKDE=function(n,p,k){var a=k.length,e=n.bandwidth,f=1/(a*e);return function(l){for(var m=0,c=0;c<a;c++){var d=(l-k[c])/e;m+=1/Math.sqrt(2*Math.PI)*Math.exp(-.5*d*d)}return f*m}};G.getPositionOnKdePath=function(n,p,k){if("h"===p.orientation){var a="y";var e="x"}else a="x",e="y";k=r.findPointOnPath(n.path,k,e,{pathLength:n.pathLength});n=n.posCenterPx;a=k[a];return[a,"both"===p.side?2*n-a:n]};
G.getKdeValue=function(n,p,k){var a=n.pts.map(G.extractVal);return G.makeKDE(n,p,a)(k)/n.posDensityScale};G.extractVal=function(n){return n.v}},{"../../lib":749}],1310:[function(b,D,G){var r=b("../../lib"),n=b("../../plots/cartesian/axes"),p=b("../box/hover"),k=b("./helpers");D.exports=function(a,e,f,l,m){var c=a.cd,d=c[0].trace,g=d.hoveron,h=-1!==g.indexOf("violins"),q=-1!==g.indexOf("kde"),t=[],v;if(h||q){var w=p.hoverOnBoxes(a,e,f,l);if(q&&0<w.length){var A=a.xa,z=a.ya;if("h"===d.orientation){var y=
e;q="y";var B=z;var C="x"}else y=f,q="x",B=A,C="y",A=z;var u=c[a.index];if(y>=u.span[0]&&y<=u.span[1]){var F=r.extendFlat({},a);z=A.c2p(y,!0);var H=k.getKdeValue(u,d,y);u=k.getPositionOnKdePath(u,d,z);var J=B._offset;B=B._length;F[q+"0"]=u[0];F[q+"1"]=u[1];F[C+"0"]=F[C+"1"]=z;F[C+"Label"]=C+": "+n.hoverLabelText(A,y)+", "+c[0].t.labels.kde+" "+H.toFixed(3);F.spikeDistance=w[0].spikeDistance;c=q+"Spike";F[c]=w[0][c];w[0].spikeDistance=void 0;w[0][c]=void 0;F.hovertemplate=!1;t.push(F);F={stroke:a.color};
F[q+"1"]=r.constrain(J+u[0],J,J+B);F[q+"2"]=r.constrain(J+u[1],J,J+B);F[C+"1"]=F[C+"2"]=A._offset+z}}h&&(t=t.concat(w))}-1!==g.indexOf("points")&&(v=p.hoverOnPoints(a,e,f));a=m.selectAll(".violinline-"+d.uid).data(F?[0]:[]);a.enter().append("line").classed("violinline-"+d.uid,!0).attr("stroke-width",1.5);a.exit().remove();a.attr(F);if("closest"===l)return v?[v]:t;v&&t.push(v);return t}},{"../../lib":749,"../../plots/cartesian/axes":797,"../box/hover":920,"./helpers":1309}],1311:[function(b,D,G){D.exports=
{attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../box/select"),moduleType:"trace",name:"violin",basePlotModule:b("../../plots/cartesian"),categories:"cartesian svg symbols oriented box-violin showLegend violinLayout zoomScale".split(" "),
meta:{}}},{"../../plots/cartesian":810,"../box/defaults":918,"../box/select":925,"../scatter/style":1178,"./attributes":1305,"./calc":1306,"./cross_trace_calc":1307,"./defaults":1308,"./hover":1310,"./layout_attributes":1312,"./layout_defaults":1313,"./plot":1314,"./style":1315}],1312:[function(b,D,G){G=b("../box/layout_attributes");b=b("../../lib").extendFlat;D.exports={violinmode:b({},G.boxmode,{}),violingap:b({},G.boxgap,{}),violingroupgap:b({},G.boxgroupgap,{})}},{"../../lib":749,"../box/layout_attributes":922}],
1313:[function(b,D,G){var r=b("../../lib"),n=b("./layout_attributes"),p=b("../box/layout_defaults");D.exports=function(k,a,e){p._supply(k,a,e,function(f,l){return r.coerce(k,a,n,f,l)},"violin")}},{"../../lib":749,"../box/layout_defaults":923,"./layout_attributes":1312}],1314:[function(b,D,G){var r=b("d3"),n=b("../../lib"),p=b("../../components/drawing"),k=b("../box/plot"),a=b("../scatter/line_points"),e=b("./helpers");D.exports=function(f,l,m,c){function d(t){t=a(t,{xaxis:h,yaxis:q,connectGaps:!0,
baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return p.smoothopen(t[0],1)}var g=f._fullLayout,h=l.xaxis,q=l.yaxis;n.makeTraceGroups(c,m,"trace violins").each(function(t){var v=r.select(this);t=t[0];var w=t.t,A=t.trace;if(!0!==A.visible||w.empty)v.remove();else{var z=w.bPos,y=w.bdPos,B=l[w.valLetter+"axis"],C=l[w.posLetter+"axis"],u="both"===A.side,F=u||"positive"===A.side,H=u||"negative"===A.side;t=v.selectAll("path.violin").data(n.identity);t.enter().append("path").style("vector-effect",
"non-scaling-stroke").attr("class","violin");t.exit().remove();t.each(function(M){var E=r.select(this),L=M.density,P=L.length,N=C.c2l(M.pos+z,!0),Q=C.l2p(N);if(A.width)var O=w.maxKDE/y;else O=g._violinScaleGroupStats[A.scalegroup],O="count"===A.scalemode?O.maxKDE/y*(O.maxCount/M.pts.length):O.maxKDE/y;var T;if(F){var V=Array(P);for(T=0;T<P;T++){var Z=V[T]={};Z[w.posLetter]=N+L[T].v/O;Z[w.valLetter]=B.c2l(L[T].t,!0)}var aa=d(V)}if(H){V=Array(P);var Y=0;for(T=P-1;Y<P;Y++,T--)Z=V[Y]={},Z[w.posLetter]=
N-L[T].v/O,Z[w.valLetter]=B.c2l(L[T].t,!0);Y=d(V)}u?aa=aa+"L"+Y.substr(1)+"Z":(N=[Q,B.c2p(L[0].t)],L=[Q,B.c2p(L[P-1].t)],"h"===A.orientation&&(N.reverse(),L.reverse()),aa=F?"M"+N+"L"+aa.substr(1)+"L"+L:"M"+L+"L"+Y.substr(1)+"L"+N);E.attr("d",aa);M.posCenterPx=Q;M.posDensityScale=O*y;M.path=E.node();M.pathLength=M.path.getTotalLength()/(u?2:1)});var J=A.box;t=J.width;J=(J.line||{}).width;u?(t*=y,J=0):F?(t=[0,y*t/2],J*={x:1,y:-1}[w.posLetter]):(t=[y*t/2,0],J*={x:-1,y:1}[w.posLetter]);k.plotBoxAndWhiskers(v,
{pos:C,val:B},A,{bPos:z,bdPos:t,bPosPxOffset:J});k.plotBoxMean(v,{pos:C,val:B},A,{bPos:z,bdPos:t,bPosPxOffset:J});if(!A.box.visible&&A.meanline.visible)var I=n.identity;I=v.selectAll("path.meanline").data(I||[]);I.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke");I.exit().remove();I.each(function(M){var E=B.c2p(M.mean,!0);M=e.getPositionOnKdePath(M,A,E);r.select(this).attr("d","h"===A.orientation?"M"+E+","+M[0]+"V"+M[1]:"M"+M[0]+","+E+
"H"+M[1])});k.plotPoints(v,{x:h,y:q},A,w)}})}},{"../../components/drawing":637,"../../lib":749,"../box/plot":924,"../scatter/line_points":1169,"./helpers":1309,d3:169}],1315:[function(b,D,G){var r=b("d3"),n=b("../../components/color"),p=b("../scatter/style").stylePoints;D.exports=function(k){var a=r.select(k).selectAll("g.trace.violins");a.style("opacity",function(e){return e[0].trace.opacity});a.each(function(e){e=e[0].trace;var f=r.select(this),l=e.box||{},m=l.line||{},c=e.meanline||{},d=c.width;
f.selectAll("path.violin").style("stroke-width",e.line.width+"px").call(n.stroke,e.line.color).call(n.fill,e.fillcolor);f.selectAll("path.box").style("stroke-width",m.width+"px").call(n.stroke,m.color).call(n.fill,l.fillcolor);l={"stroke-width":d+"px","stroke-dasharray":2*d+"px,"+d+"px"};f.selectAll("path.mean").style(l).call(n.stroke,c.color);f.selectAll("path.meanline").style(l).call(n.stroke,c.color);p(f,e,k)})}},{"../../components/color":615,"../scatter/style":1178,d3:169}],1316:[function(b,D,
G){G=b("../../components/colorscale/attributes");var r=b("../isosurface/attributes"),n=b("../surface/attributes"),p=b("../../plots/attributes"),k=b("../../lib/extend").extendFlat;b=b("../../plot_api/edit_types").overrideAll;D=D.exports=b(k({x:r.x,y:r.y,z:r.z,value:r.value,isomin:r.isomin,isomax:r.isomax,surface:r.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:r.slices,caps:r.caps,text:r.text,hovertext:r.hovertext,hovertemplate:r.hovertemplate},
G("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:r.colorbar,opacity:r.opacity,opacityscale:n.opacityscale,lightposition:r.lightposition,lighting:r.lighting,flatshading:r.flatshading,contour:r.contour,hoverinfo:k({},p.hoverinfo),showlegend:k({},p.showlegend,{dflt:!1})}),"calc","nested");D.x.editType=D.y.editType=D.z.editType=D.value.editType="calc+clearAxisTypes";D.transforms=void 0},{"../../components/colorscale/attributes":622,"../../lib/extend":739,"../../plot_api/edit_types":780,
"../../plots/attributes":794,"../isosurface/attributes":1091,"../surface/attributes":1278}],1317:[function(b,D,G){function r(m,c,d){this.scene=m;this.uid=d;this.mesh=c;this.name="";this.data=null;this.showContour=!1}var n=b("gl-mesh3d"),p=b("../../lib/gl_format_color").parseColorScale,k=b("../../lib/str2rgbarray"),a=b("../../components/colorscale").extractOpts,e=b("../../plots/gl3d/zip3"),f=b("../isosurface/convert").findNearestOnAxis,l=b("../isosurface/convert").generateIsoMeshes;b=r.prototype;b.handlePick=
function(m){if(m.object===this.mesh){var c=m.data.index,d=this.data._meshY[c],g=this.data._meshZ[c],h=this.data._Ys.length,q=this.data._Zs.length;c=f(this.data._meshX[c],this.data._Xs).id;d=f(d,this.data._Ys).id;g=f(g,this.data._Zs).id;h=m.index=g+q*d+q*h*c;m.traceCoordinate=[this.data._meshX[h],this.data._meshY[h],this.data._meshZ[h],this.data._value[h]];q=this.data.hovertext||this.data.text;Array.isArray(q)&&void 0!==q[h]?m.textLabel=q[h]:q&&(m.textLabel=q);return!0}};b.update=function(m){function c(h,
q,t,v){return q.map(function(w){return h.d2l(w,0,v)*t})}var d=this.scene,g=d.fullSceneLayout;this.data=l(m);d=e(c(g.xaxis,m._meshX,d.dataScale[0],m.xcalendar),c(g.yaxis,m._meshY,d.dataScale[1],m.ycalendar),c(g.zaxis,m._meshZ,d.dataScale[2],m.zcalendar));g=e(m._meshI,m._meshJ,m._meshK);d={positions:d,cells:g,lightPosition:[m.lightposition.x,m.lightposition.y,m.lightposition.z],ambient:m.lighting.ambient,diffuse:m.lighting.diffuse,specular:m.lighting.specular,roughness:m.lighting.roughness,fresnel:m.lighting.fresnel,
vertexNormalsEpsilon:m.lighting.vertexnormalsepsilon,faceNormalsEpsilon:m.lighting.facenormalsepsilon,opacity:m.opacity,opacityscale:m.opacityscale,contourEnable:m.contour.show,contourColor:k(m.contour.color).slice(0,3),contourWidth:m.contour.width,useFacetNormals:m.flatshading};g=a(m);d.vertexIntensity=m._meshIntensity;d.vertexIntensityBounds=[g.min,g.max];d.colormap=p(m);this.mesh.update(d)};b.dispose=function(){this.scene.glplot.remove(this.mesh);this.mesh.dispose()};D.exports=function(m,c){var d=
n({gl:m.glplot.gl}),g=new r(m,d,c.uid);d._trace=g;g.update(c);m.glplot.add(d);return g}},{"../../components/colorscale":627,"../../lib/gl_format_color":745,"../../lib/str2rgbarray":772,"../../plots/gl3d/zip3":850,"../isosurface/convert":1093,"gl-mesh3d":292}],1318:[function(b,D,G){var r=b("../../lib"),n=b("./attributes"),p=b("../isosurface/defaults").supplyIsoDefaults,k=b("../surface/defaults").opacityscaleDefaults;D.exports=function(a,e,f,l){function m(c,d){return r.coerce(a,e,n,c,d)}p(a,e,f,l,m);
k(a,e,l,m)}},{"../../lib":749,"../isosurface/defaults":1094,"../surface/defaults":1281,"./attributes":1316}],1319:[function(b,D,G){D.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"volume",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":839,"../isosurface/calc":1092,"./attributes":1316,"./convert":1317,"./defaults":1318}],
1320:[function(b,D,G){function r(l){return{marker:{color:f({},n.marker.color,{arrayOk:!1,editType:"style"}),line:{color:f({},n.marker.line.color,{arrayOk:!1,editType:"style"}),width:f({},n.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}var n=b("../bar/attributes");G=b("../scatter/attributes").line;var p=b("../../plots/attributes"),k=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs,
e=b("./constants"),f=b("../../lib/extend").extendFlat;b=b("../../components/color");D.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,hovertext:n.hovertext,hovertemplate:k({},{keys:e.eventDataKeys}),hoverinfo:f({},p.hoverinfo,{flags:"name x y text initial delta final".split(" ")}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",
arrayOk:!1},texttemplate:a({editType:"plot"},{keys:e.eventDataKeys.concat(["label"])}),text:n.text,textposition:n.textposition,insidetextanchor:n.insidetextanchor,textangle:n.textangle,textfont:n.textfont,insidetextfont:n.insidetextfont,outsidetextfont:n.outsidetextfont,constraintext:n.constraintext,cliponaxis:n.cliponaxis,orientation:n.orientation,offset:n.offset,width:n.width,increasing:r("increasing"),decreasing:r("decreasing"),totals:r("intermediate sums and total"),connector:{line:{color:f({},
G.color,{dflt:b.defaultLine}),width:f({},G.width,{editType:"plot"}),dash:G.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup}},{"../../components/color":615,"../../lib/extend":739,"../../plots/attributes":794,"../../plots/template_attributes":875,"../bar/attributes":890,"../scatter/attributes":1155,"./constants":1322}],
1321:[function(b,D,G){function r(f){return"a"===f||"absolute"===f}function n(f){return"t"===f||"total"===f}var p=b("../../plots/cartesian/axes"),k=b("../../lib").mergeArray,a=b("../scatter/calc_selection"),e=b("../../constants/numerical").BADNUM;D.exports=function(f,l){var m=p.getFromId(f,l.xaxis||"x"),c=p.getFromId(f,l.yaxis||"y");"h"===l.orientation?(f=m.makeCalcdata(l,"x"),m=c.makeCalcdata(l,"y")):(f=c.makeCalcdata(l,"y"),m=m.makeCalcdata(l,"x"));c=Math.min(m.length,f.length);for(var d=Array(c),
g=0,h,q=!1,t=0;t<c;t++){h=f[t]||0;var v=!1;(f[t]!==e||n(l.measure[t])||r(l.measure[t]))&&t+1<c&&(f[t+1]!==e||n(l.measure[t+1])||r(l.measure[t+1]))&&(v=!0);v=d[t]={i:t,p:m[t],s:h,rawS:h,cNext:v};r(l.measure[t])?(g=v.s,v.isSum=!0,v.dir="totals",v.s=g):n(l.measure[t])?(v.isSum=!0,v.dir="totals",v.s=g):(v.isSum=!1,v.dir=0>v.rawS?"decreasing":"increasing",h=v.s,v.s=g+h,g+=h);"totals"===v.dir&&(q=!0);l.ids&&(v.id=String(l.ids[t]));v.v=(l.base||0)+g}d.length&&(d[0].hasTotals=q);k(l.text,d,"tx");k(l.hovertext,
d,"htx");a(d,l);return d}},{"../../constants/numerical":724,"../../lib":749,"../../plots/cartesian/axes":797,"../scatter/calc_selection":1157}],1322:[function(b,D,G){D.exports={eventDataKeys:["initial","delta","final"]}},{}],1323:[function(b,D,G){var r=b("../bar/cross_trace_calc").setGroupPositions;D.exports=function(n,p){var k=n._fullLayout,a=n._fullData,e=n.calcdata,f=p.xaxis,l=p.yaxis;p=[];var m=[],c=[],d;for(d=0;d<a.length;d++){var g=a[d];if(!0===g.visible&&g.xaxis===f._id&&g.yaxis===l._id&&"waterfall"===
g.type){var h=e[d];"h"===g.orientation?c.push(h):m.push(h);p.push(h)}}h={mode:k.waterfallmode,norm:k.waterfallnorm,gap:k.waterfallgap,groupgap:k.waterfallgroupgap};r(n,f,l,m,h);r(n,l,f,c,h);for(d=0;d<p.length;d++)for(h=p[d],n=0;n<h.length;n++)f=h[n],!1===f.isSum&&(f.s0+=0===n?0:h[n-1].s),n+1<h.length&&(h[n].nextP0=h[n+1].p0,h[n].nextS0=h[n+1].s0)}},{"../bar/cross_trace_calc":893}],1324:[function(b,D,G){function r(c,d,g){c(d+".marker.color",g);c(d+".marker.line.color",f.defaultLine);c(d+".marker.line.width")}
var n=b("../../lib"),p=b("../bar/defaults").handleGroupingDefaults,k=b("../bar/defaults").handleText,a=b("../scatter/xy_defaults"),e=b("./attributes"),f=b("../../components/color");b=b("../../constants/delta.js");var l=b.INCREASING.COLOR,m=b.DECREASING.COLOR;D.exports={supplyDefaults:function(c,d,g,h){function q(t,v){return n.coerce(c,d,e,t,v)}a(c,d,h,q)?(q("measure"),q("orientation",d.x&&!d.y?"h":"v"),q("base"),q("offset"),q("width"),q("text"),q("hovertext"),q("hovertemplate"),g=q("textposition"),
k(c,d,h,q,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==d.textposition&&(q("texttemplate"),d.texttemplate||q("textinfo")),r(q,"increasing",l),r(q,"decreasing",m),r(q,"totals","#4499FF"),q("connector.visible")&&(q("connector.mode"),q("connector.line.width")&&(q("connector.line.color"),q("connector.line.dash")))):d.visible=!1},crossTraceDefaults:function(c,d){function g(v){return n.coerce(q._input,
q,e,v)}if("group"===d.waterfallmode)for(var h=0;h<c.length;h++){var q=c[h];var t=q._input;p(t,q,d,g)}}}},{"../../components/color":615,"../../constants/delta.js":718,"../../lib":749,"../bar/defaults":894,"../scatter/xy_defaults":1181,"./attributes":1320}],1325:[function(b,D,G){D.exports=function(r,n){r.x="xVal"in n?n.xVal:n.x;r.y="yVal"in n?n.yVal:n.y;"initial"in n&&(r.initial=n.initial);"delta"in n&&(r.delta=n.delta);"final"in n&&(r.final=n.final);n.xa&&(r.xaxis=n.xa);n.ya&&(r.yaxis=n.ya);return r}},
{}],1326:[function(b,D,G){function r(f,l){var m=f[l.dir].marker;f=m.color;l=m.line.color;m=m.line.width;if(p(f))return f;if(p(l)&&m)return l}var n=b("../../plots/cartesian/axes").hoverLabelText,p=b("../../components/color").opacity,k=b("../bar/hover").hoverOnBars;b=b("../../constants/delta.js");var a=b.INCREASING.SYMBOL,e=b.DECREASING.SYMBOL;D.exports=function(f,l,m,c){if(l=k(f,l,m,c)){var d=l.cd;m=d[0].trace;var g=(c="h"===m.orientation)?f.xa:f.ya;f=d[l.index];d=f.isSum?f.b+f.s:f.rawS;if(!f.isSum){l.initial=
f.b+f.s-d;l.delta=d;l.final=l.initial+l.delta;var h=n(g,Math.abs(l.delta));l.deltaLabel=0>d?"("+h+")":h;l.finalLabel=n(g,l.final);l.initialLabel=n(g,l.initial)}h=f.hi||m.hoverinfo;g=[];if(h&&"none"!==h&&"skip"!==h){var q="all"===h,t=h.split("+");h=function(v){return q||-1!==t.indexOf(v)};f.isSum||(!h("final")||(c?h("x"):h("y"))||g.push(l.finalLabel),h("delta")&&(0>d?g.push(l.deltaLabel+" "+e):g.push(l.deltaLabel+" "+a)),h("initial")&&g.push("Initial: "+l.initialLabel))}g.length&&(l.extraText=g.join("\x3cbr\x3e"));
l.color=r(m,f);return[l]}}},{"../../components/color":615,"../../constants/delta.js":718,"../../plots/cartesian/axes":797,"../bar/hover":897}],1327:[function(b,D,G){D.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),
eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:b("../../plots/cartesian"),categories:"bar-like cartesian svg oriented showLegend zoomScale".split(" "),meta:{}}},{"../../plots/cartesian":810,"../bar/select":902,"./attributes":1320,"./calc":1321,"./cross_trace_calc":1323,"./defaults":1324,"./event_data":1325,"./hover":1326,"./layout_attributes":1328,"./layout_defaults":1329,"./plot":1330,"./style":1331}],1328:[function(b,D,G){D.exports=
{waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1329:[function(b,D,G){var r=b("../../lib"),n=b("./layout_attributes");D.exports=function(p,k,a){for(var e=!1,f=0;f<a.length;f++){var l=a[f];if(l.visible&&"waterfall"===l.type){e=!0;break}}e&&(r.coerce(p,k,n,"waterfallmode",void 0),r.coerce(p,k,n,"waterfallgap",.2),r.coerce(p,
k,n,"waterfallgroupgap",void 0))}},{"../../lib":749,"./layout_attributes":1328}],1330:[function(b,D,G){function r(l,m,c,d){var g=m.xaxis,h=m.yaxis;p.makeTraceGroups(d,c,"trace bars").each(function(q){var t=n.select(this);q=q[0].trace;t=p.ensureSingle(t,"g","lines");if(q.connector&&q.connector.visible){var v="h"===q.orientation,w=q.connector.mode;t=t.selectAll("g.line").data(p.identity);t.enter().append("g").classed("line",!0);t.exit().remove();var A=t.size();t.each(function(z,y){if(y===A-1||z.cNext){var B=
[];var C=[];var u=v?g:h,F=v?h:g;B[0]=u.c2p(z.s0,!0);C[0]=F.c2p(z.p0,!0);B[1]=u.c2p(z.s1,!0);C[1]=F.c2p(z.p1,!0);B[2]=u.c2p(z.nextS0,!0);C[2]=F.c2p(z.nextP0,!0);C=v?[B,C]:[C,B];B=C[0];C=C[1];u="";B[0]!==a&&C[0]!==a&&B[1]!==a&&C[1]!==a&&("spanning"===w&&!z.isSum&&0<y&&(u=v?u+("M"+B[0]+","+C[1]+"V"+C[0]):u+("M"+B[1]+","+C[0]+"H"+B[0])),"between"!==w&&(z.isSum||y<A-1)&&(u=v?u+("M"+B[1]+","+C[0]+"V"+C[1]):u+("M"+B[0]+","+C[1]+"H"+B[1])),B[2]!==a&&C[2]!==a&&(u=v?u+("M"+B[1]+","+C[1]+"V"+C[2]):u+("M"+B[1]+
","+C[1]+"H"+B[2])));""===u&&(u="M0,0Z");p.ensureSingle(n.select(this),"path").attr("d",u).call(k.setClipUrl,m.layerClipId,l)}})}else t.remove()})}var n=b("d3"),p=b("../../lib"),k=b("../../components/drawing"),a=b("../../constants/numerical").BADNUM,e=b("../bar/plot"),f=b("../bar/uniform_text").clearMinTextSize;D.exports=function(l,m,c,d){var g=l._fullLayout;f("waterfall",g);e.plot(l,m,c,d,{mode:g.waterfallmode,norm:g.waterfallmode,gap:g.waterfallgap,groupgap:g.waterfallgroupgap});r(l,m,c,d)}},{"../../components/drawing":637,
"../../constants/numerical":724,"../../lib":749,"../bar/plot":901,"../bar/uniform_text":906,d3:169}],1331:[function(b,D,G){var r=b("d3"),n=b("../../components/drawing"),p=b("../../components/color"),k=b("../../constants/interactions").DESELECTDIM;G=b("../bar/style");var a=b("../bar/uniform_text").resizeText,e=G.styleTextPoints;D.exports={style:function(f,l,m){l=m?m:r.select(f).selectAll("g.waterfalllayer").selectAll("g.trace");a(f,l,"waterfall");l.style("opacity",function(c){return c[0].trace.opacity});
l.each(function(c){var d=r.select(this),g=c[0].trace;d.selectAll(".point \x3e path").each(function(h){if(!h.isBlank){var q=g[h.dir].marker;r.select(this).call(p.fill,q.color).call(p.stroke,q.line.color).call(n.dashLine,q.line.dash,q.line.width).style("opacity",g.selectedpoints&&!h.selected?k:1)}});e(d,g,f);d.selectAll(".lines").each(function(){var h=g.connector.line;n.lineGroupStyle(r.select(this).selectAll("path"),h.width,h.color,h.dash)})})}}},{"../../components/color":615,"../../components/drawing":637,
"../../constants/interactions":723,"../bar/style":904,"../bar/uniform_text":906,d3:169}],1332:[function(b,D,G){function r(h,q,t,v){if(v.enabled){var w=v.target,A=f.nestedProperty(q,w),z=A.get();h=e.getDataConversions(h,q,w,z);h=n(v,h);for(var y=Array(t.length),B=0;B<t.length;B++)y[B]=h(z,t[B]);A.set(y);"count"===v.func&&f.pushUnique(q._arrayAttrs,w)}}function n(h,q){var t=q.d2c,v=q.c2d;switch(h.func){case "count":return p;case "first":return k;case "last":return a;case "sum":return function(w,A){for(var z=
0,y=0;y<A.length;y++){var B=t(w[A[y]]);B!==c&&(z+=B)}return v(z)};case "avg":return function(w,A){for(var z=0,y=0,B=0;B<A.length;B++){var C=t(w[A[B]]);C!==c&&(z+=C,y++)}return y?v(z/y):c};case "min":return function(w,A){for(var z=Infinity,y=0;y<A.length;y++){var B=t(w[A[y]]);B!==c&&(z=Math.min(z,B))}return Infinity===z?c:v(z)};case "max":return function(w,A){for(var z=-Infinity,y=0;y<A.length;y++){var B=t(w[A[y]]);B!==c&&(z=Math.max(z,B))}return-Infinity===z?c:v(z)};case "range":return function(w,
A){for(var z=Infinity,y=-Infinity,B=0;B<A.length;B++){var C=t(w[A[B]]);C!==c&&(z=Math.min(z,C),y=Math.max(y,C))}return-Infinity===y||Infinity===z?c:v(y-z)};case "change":return function(w,A){var z=t(w[A[0]]);w=t(w[A[A.length-1]]);return z===c||w===c?c:v(w-z)};case "median":return function(w,A){for(var z=[],y=0;y<A.length;y++){var B=t(w[A[y]]);B!==c&&z.push(B)}if(!z.length)return c;z.sort(f.sorterAsc);w=(z.length-1)/2;return v((z[Math.floor(w)]+z[Math.ceil(w)])/2)};case "mode":return function(w,A){for(var z=
{},y=0,B=c,C=0;C<A.length;C++){var u=t(w[A[C]]);if(u!==c){var F=z[u]=(z[u]||0)+1;F>y&&(y=F,B=u)}}return y?v(B):c};case "rms":return function(w,A){for(var z=0,y=0,B=0;B<A.length;B++){var C=t(w[A[B]]);C!==c&&(z+=C*C,y++)}return y?v(Math.sqrt(z/y)):c};case "stddev":return function(w,A){var z=0,y=0,B=1,C=c,u;for(u=0;u<A.length&&C===c;u++)C=t(w[A[u]]);if(C===c)return c;for(;u<A.length;u++){var F=t(w[A[u]]);F!==c&&(F-=C,z+=F,y+=F*F,B++)}return(w="sample"===h.funcmode?B-1:B)?Math.sqrt((y-z*z/B)/w):0}}}function p(h,
q){return q.length}function k(h,q){return h[q[0]]}function a(h,q){return h[q[q.length-1]]}var e=b("../plots/cartesian/axes"),f=b("../lib"),l=b("../plot_api/plot_schema"),m=b("./helpers").pointsAccessorFunction,c=b("../constants/numerical").BADNUM;G.moduleType="transform";G.name="aggregate";var d=G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",
editType:"calc"},func:{valType:"enumerated",values:"count sum avg median mode rms stddev min max first last change range".split(" "),dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},g=d.aggregations;G.supplyDefaults=function(h,q){function t(u,F){return f.coerce(y[w],B,g,u,F)}var v={},w;if(!f.coerce(h,v,d,"enabled",void 0))return v;q=l.findArrayAttributes(q);
var A={};for(w=0;w<q.length;w++)A[q[w]]=1;var z=f.coerce(h,v,d,"groups",void 0);if(!Array.isArray(z)){if(!A[z])return v.enabled=!1,v;A[z]=0}var y=h.aggregations||[];h=v.aggregations=Array(y.length);for(w=0;w<y.length;w++){var B={_index:w};z=t("target");var C=t("func");t("enabled")&&z&&(A[z]||"count"===C&&void 0===A[z])?("stddev"===C&&t("funcmode"),A[z]=0,h[w]=B):h[w]={enabled:!1,_index:w}}for(w=0;w<q.length;w++)A[q[w]]&&h.push({target:q[w],func:g.func.dflt,enabled:!0,_index:-1});return v};G.calcTransform=
function(h,q,t){if(t.enabled){var v=t.groups,w=f.getTargetArray(q,{target:v});if(w){var A,z={},y={},B=[],C=m(q.transforms,t),u=w.length;q._length&&(u=Math.min(u,q._length));for(A=0;A<u;A++){var F=w[A];var H=z[F];void 0===H?(z[F]=B.length,H=[A],B.push(H),y[z[F]]=C(A)):(B[H].push(A),y[z[F]]=(y[z[F]]||[]).concat(C(A)))}t._indexToPoints=y;t=t.aggregations;for(A=0;A<t.length;A++)r(h,q,B,t[A]);"string"===typeof v&&r(h,q,B,{target:v,func:"first",enabled:!0});q._length=B.length}}}},{"../constants/numerical":724,
"../lib":749,"../plot_api/plot_schema":786,"../plots/cartesian/axes":797,"./helpers":1335}],1333:[function(b,D,G){function r(m,c,d){var g=m.operation,h=m.value,q=Array.isArray(h),t=function(A){return c(A,0,m.valuecalendar)},v=function(A){return c(A,0,d)},w;-1!==e.indexOf(g)?w=q?t(h[0]):t(h):-1!==f.indexOf(g)?w=q?[t(h[0]),t(h[1])]:[t(h),t(h)]:-1!==l.indexOf(g)&&(w=q?h.map(t):[t(h)]);switch(g){case "\x3d":return function(A){return v(A)===w};case "!\x3d":return function(A){return v(A)!==w};case "\x3c":return function(A){return v(A)<
w};case "\x3c\x3d":return function(A){return v(A)<=w};case "\x3e":return function(A){return v(A)>w};case "\x3e\x3d":return function(A){return v(A)>=w};case "[]":return function(A){A=v(A);return A>=w[0]&&A<=w[1]};case "()":return function(A){A=v(A);return A>w[0]&&A<w[1]};case "[)":return function(A){A=v(A);return A>=w[0]&&A<w[1]};case "(]":return function(A){A=v(A);return A>w[0]&&A<=w[1]};case "][":return function(A){A=v(A);return A<=w[0]||A>=w[1]};case ")(":return function(A){A=v(A);return A<w[0]||
A>w[1]};case "](":return function(A){A=v(A);return A<=w[0]||A>w[1]};case ")[":return function(A){A=v(A);return A<w[0]||A>=w[1]};case "{}":return function(A){return-1!==w.indexOf(v(A))};case "}{":return function(A){return-1===w.indexOf(v(A))}}}var n=b("../lib"),p=b("../registry"),k=b("../plots/cartesian/axes"),a=b("./helpers").pointsAccessorFunction;b=b("../constants/filter_ops");var e=b.COMPARISON_OPS,f=b.INTERVAL_OPS,l=b.SET_OPS;G.moduleType="transform";G.name="filter";G.attributes={enabled:{valType:"boolean",
dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(e).concat(f).concat(l),dflt:"\x3d",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"};G.supplyDefaults=function(m){function c(h,q){return n.coerce(m,d,G.attributes,h,q)}var d={};if(c("enabled")){var g=c("target");if(n.isArrayOrTypedArray(g)&&0===g.length)return d.enabled=
!1,d;c("preservegaps");c("operation");c("value");g=p.getComponentMethod("calendars","handleDefaults");g(m,d,"valuecalendar",null);g(m,d,"targetcalendar",null)}return d};G.calcTransform=function(m,c,d){function g(u,F){for(var H=0;H<w.length;H++){var J=n.nestedProperty(c,w[H]);u(J,F)}}if(d.enabled){var h=n.getTargetArray(c,d);if(h){var q=d.target,t=h.length;c._length&&(t=Math.min(t,c._length));var v=d.targetcalendar,w=c._arrayAttrs,A=d.preservegaps;if("string"===typeof q){var z=n.nestedProperty(c,q+
"calendar").get();z&&(v=z)}m=k.getDataToCoordFunc(m,c,q,h);v=r(d,m,v);var y={};m={};q=0;if(A){var B=function(u){y[u.astr]=n.extendDeep([],u.get());u.set(Array(t))};z=function(u,F){var H=y[u.astr][F];u.get()[F]=H}}else B=function(u){y[u.astr]=n.extendDeep([],u.get());u.set([])},z=function(u,F){F=y[u.astr][F];u.get().push(F)};g(B);B=a(c.transforms,d);for(var C=0;C<t;C++)v(h[C])?(g(z,C),m[q++]=B(C)):A&&q++;d._indexToPoints=m;c._length=q}}}},{"../constants/filter_ops":720,"../lib":749,"../plots/cartesian/axes":797,
"../registry":880,"./helpers":1335}],1334:[function(b,D,G){var r=b("../lib"),n=b("../plot_api/plot_schema"),p=b("../plots/plots"),k=b("./helpers").pointsAccessorFunction;G.moduleType="transform";G.name="groupby";G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},
editType:"calc"},editType:"calc"};G.supplyDefaults=function(a,e,f){e={};if(!r.coerce(a,e,G.attributes,"enabled",void 0))return e;r.coerce(a,e,G.attributes,"groups",void 0);r.coerce(a,e,G.attributes,"nameformat",1<f._dataLength?"%{group} (%{trace})":"%{group}");f=a.styles;var l=e.styles=[];if(f)for(a=0;a<f.length;a++){var m=l[a]={};r.coerce(f[a],l[a],G.attributes.styles,"target");var c=r.coerce(f[a],l[a],G.attributes.styles,"value");r.isPlainObject(c)?m.value=r.extendDeep({},c):c&&delete m.value}return e};
G.transform=function(a,e){var f,l=[];for(f=0;f<a.length;f++){var m=void 0,c;var d=a[f];var g=e.transform;var h=e.transformIndex;var q=d.transforms[h].groups,t=k(d.transforms,g);if(r.isArrayOrTypedArray(q)&&0!==q.length){var v=r.filterUnique(q),w=Array(v.length),A=q.length,z=n.findArrayAttributes(d),y=g.styles||[],B={};for(c=0;c<y.length;c++)B[y[c].target]=y[c].value;g.styles&&(m=r.keyedContainer(g,"styles","target","value.name"));y={};var C={};for(c=0;c<v.length;c++){var u=v[c];y[u]=c;C[u]=0;var F=
w[c]=r.extendDeepNoArrays({},d);F._group=u;F.transforms[h]._indexToPoints={};var H=null;m&&(H=m.get(u));F.name=H||""===H?H:r.templateString(g.nameformat,{trace:d.name,group:u});H=F.transforms;F.transforms=[];for(u=0;u<H.length;u++)F.transforms[u]=r.extendDeepNoArrays({},H[u]);for(u=0;u<z.length;u++)r.nestedProperty(F,z[u]).set([])}for(c=0;c<z.length;c++){g=z[c];u=0;for(m=[];u<v.length;u++)m[u]=r.nestedProperty(w[u],g).get();g=r.nestedProperty(d,g).get();for(u=0;u<A;u++)m[y[q[u]]].push(g[u])}for(u=
0;u<A;u++)F=w[y[q[u]]],F.transforms[h]._indexToPoints[C[q[u]]]=t(u),C[q[u]]++;for(c=0;c<v.length;c++)u=v[c],F=w[c],p.clearExpandedTraceDefaultColors(F),r.extendDeepNoArrays(F,B[u]||{});d=w}else d=[d];for(h=0;h<d.length;h++)l.push(d[h])}return l}},{"../lib":749,"../plot_api/plot_schema":786,"../plots/plots":860,"./helpers":1335}],1335:[function(b,D,G){G.pointsAccessorFunction=function(r,n){for(var p,k,a=0;a<r.length;a++){p=r[a];if(p===n)break;p._indexToPoints&&!1!==p.enabled&&(k=p._indexToPoints)}return k?
function(e){return k[e]}:function(e){return[e]}}},{}],1336:[function(b,D,G){function r(e,f){switch(e.order){case "ascending":return function(l,m){l=f(l.v);m=f(m.v);return l===a?1:m===a?-1:l-m};case "descending":return function(l,m){l=f(l.v);m=f(m.v);return l===a?1:m===a?-1:m-l}}}var n=b("../lib"),p=b("../plots/cartesian/axes"),k=b("./helpers").pointsAccessorFunction,a=b("../constants/numerical").BADNUM;G.moduleType="transform";G.name="sort";G.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},
target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"};G.supplyDefaults=function(e){var f={};n.coerce(e,f,G.attributes,"enabled",void 0)&&(n.coerce(e,f,G.attributes,"target",void 0),n.coerce(e,f,G.attributes,"order",void 0));return f};G.calcTransform=function(e,f,l){if(l.enabled){var m=n.getTargetArray(f,l);if(m){var c=l.target,d=m.length;f._length&&(d=Math.min(d,
f._length));var g=f._arrayAttrs;c=p.getDataToCoordFunc(e,f,c,m);var h=d,q=Array(h);e=Array(h);var t;for(t=0;t<h;t++)q[t]={v:m[t],i:t};q.sort(r(l,c));for(t=0;t<h;t++)e[t]=q[t].i;m=k(f.transforms,l);c={};for(h=0;h<g.length;h++){t=n.nestedProperty(f,g[h]);var v=t.get(),w=Array(d);for(q=0;q<d;q++)w[q]=v[e[q]];t.set(w)}for(q=0;q<d;q++)c[q]=m(e[q]);l._indexToPoints=c;f._length=d}}}},{"../constants/numerical":724,"../lib":749,"../plots/cartesian/axes":797,"./helpers":1335}],1337:[function(b,D,G){G.version=
"1.55.2"},{}]},{},[26])(26)})};
shadow$provide[521]=function(lb,ma,Ab,Da){function b(D){return D&&D.__esModule?D:{"default":D}}Object.defineProperty(Da,"__esModule",{value:!0});Da["default"]=void 0;lb=b(ma(519));ma=b(ma(520));ma=(0,lb["default"])(ma["default"]);Da["default"]=ma};
'use strict';var Mta,L3,P3,Kta,Nta,Pta,Qta;$APP.F3=function(a){return a instanceof $APP.I?a.ja:null};$APP.G3=function(a){return a instanceof $APP.Lq?a.obj:a instanceof $APP.Mq?a.J:$APP.ap.A(a,$APP.D([$APP.ls,$APP.F3]))};
$APP.M3=function(a){var b=$APP.N(a),c=$APP.H.o(b,$APP.H3,function(g){return JSON.stringify(g,null,1)});a=$APP.H.g(b,$APP.I3);var d=$APP.H.o(b,$APP.J3,"application/json");b=$APP.H.g(b,$APP.K3);var e=$APP.m(b)?b:new $APP.T(null,1,5,$APP.V,[L3],null),f=$APP.m(a)?a:"plotly_data.json";return new $APP.l(null,4,[$APP.tn,"toData",$APP.Ls,$APP.G3(Jta),$APP.ot,"Save data",Kta,function(g){g=g.data;g=c.j?c.j(g):c.call(null,g);return $APP.lq($APP.wi.A(e,f,$APP.D([d,g])))}],null)};
$APP.Lta=new $APP.I(null,"newline","newline",1790071323);$APP.J3=new $APP.I(null,"data-type","data-type",-326421468);Mta=new $APP.I(null,"displaylogo","displaylogo",1531477828);$APP.I3=new $APP.I(null,"filename","filename",-1428840783);L3=new $APP.I("transparency.components.plotly","send-data-to-client","transparency.components.plotly/send-data-to-client",1896277780);$APP.N3=new $APP.I(null,"modeBarButtonsToAdd","modeBarButtonsToAdd",792964880);
$APP.O3=new $APP.I(null,"displayModeBar","displayModeBar",-1187531817);P3=new $APP.I("transparency.components.plotly","download-file","transparency.components.plotly/download-file",-676073443);$APP.Q3=new $APP.I(null,"layout","layout",-2120940921);$APP.R3=new $APP.I(null,"lf","lf",1923784290);Kta=new $APP.I(null,"click","click",1912301393);$APP.H3=new $APP.I(null,"data-\x3estring","data-\x3estring",-1527786836);Nta=new $APP.I(null,"locale","locale",-2115712697);
$APP.Ota=new $APP.I(null,"quote?","quote?",-1114029317);Pta=new $APP.I(null,"cr+lf","cr+lf",486534798);$APP.S3=new $APP.I(null,"toImageButtonOptions","toImageButtonOptions",-347346271);$APP.T3=new $APP.I(null,"y","y",-1757859776);$APP.U3=new $APP.I(null,"scale","scale",-230427353);$APP.V3=new $APP.I(null,"editable","editable",1930280326);Qta=new $APP.I(null,"responsive","responsive",-1606632318);$APP.K3=new $APP.I(null,"download-event","download-event",577445774);$APP.od("plotly");var Rta=$APP.pn(521);$APP.W3=new $APP.l(null,2,[$APP.R3,"\n",Pta,"\r\n"],null);$APP.Sta=[":newline must be one of [",$APP.Pm(",",$APP.vl($APP.W3)),"]"].join("");var Jta;$APP.X3=Rta.default;$APP.nq(P3,function(a){var b=$APP.G(a,0,null);a=$APP.G(a,1,null);var c=document.createElement("a");c.href=b;c.download=a;document.body.appendChild(c);c.click();document.body.removeChild(c);a=window.URL.revokeObjectURL;return a.j?a.j(b):a.call(null,b)});
$APP.Bq(L3,function(a,b){a=$APP.N(a);a=$APP.H.g(a,$APP.Lt);$APP.G(b,0,null);var c=$APP.G(b,1,null),d=$APP.G(b,2,null);b=$APP.G(b,3,null);b=new Blob(new $APP.T(null,1,5,$APP.V,[b],null),$APP.ap(new $APP.l(null,1,[$APP.X,$APP.m(d)?d:"text/plain"],null)));d=window.URL.createObjectURL;b=d.j?d.j(b):d.call(null,b);return new $APP.l(null,2,[$APP.Lt,a,P3,new $APP.T(null,2,5,$APP.V,[b,c],null)],null)});
Jta=new $APP.l(null,4,["width",857.1,"height",1E3,"path","m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z","transform","matrix(1 0 0 -1 0 850)"],
null);$APP.Y3=new $APP.l(null,7,[$APP.S3,new $APP.l(null,4,[$APP.us,"png",$APP.Dt,560,$APP.ss,960,$APP.U3,2],null),$APP.N3,new $APP.T(null,1,5,$APP.V,[$APP.M3($APP.O)],null),$APP.O3,"hover",$APP.V3,!1,Mta,!1,Qta,!0,Nta,"en"],null);$APP.nd.setLoaded(void 0);
}).call(this);